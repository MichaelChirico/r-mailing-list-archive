From jfox at mcmaster.ca  Mon Oct  1 00:15:06 2001
From: jfox at mcmaster.ca (John Fox)
Date: Sun, 30 Sep 2001 18:15:06 -0400
Subject: [R] non linear models
In-Reply-To: <CPEKKGJLCKLNFGNPBBMMEEBLCAAA.cendter@misag-usa.com>
Message-ID: <5.1.0.14.2.20010930180857.01be7628@mcmail.cis.mcmaster.ca>

Dear Christian,

Polynomial-regression models are linear in the parameters, so they can be 
fit by lm. There are several ways to do your example:

 > x <- c(-1, 0, 1)
 > y <- c(2, 1, 2)

 > lm(y ~ I(x^2))

Call:
lm(formula = y ~ I(x^2))

Coefficients:
(Intercept)       I(x^2)
           1            1

 > lm(y ~ x + I(x^2))  # this fits a term in x as well as x^2

Call:
lm(formula = y ~ x + I(x^2))

Coefficients:
(Intercept)            x       I(x^2)
    1.00e+00    -7.85e-17     1.00e+00

 > lm(y ~ poly(x, 2)) # this fits order-2 orthogonal polynomials

Call:
lm(formula = y ~ poly(x, 2))

Coefficients:
(Intercept)  poly(x, 2)1  poly(x, 2)2
   1.667e+00   -3.127e-16    8.165e-01

I hope that this helps,
  John

At 11:59 AM 30/09/2001 -0400, Christian Endter wrote:
>Dear Members of the Help List,
>
>Honestly, I feel a little bit stupid - I would like to do something rather
>simple: fit a non linear model to existing data, to be more precise I wanted
>to start with simple higher order polynomials.
>
>Unfortunately, I do not quite understand the examples in the helpfiles for
>the nlm, nls and nlsModel commands.
>
>Could anyone please provide a simple example to get me started (i.e. y = p +
>x^2 fitted to x= -1 0 1 y = 2 1 2; a simple parabola p should turn out to be
>1). How do I do this and how do I do the same for something like y = a + bx
>+ cx^2 + dx^3 ??

-----------------------------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario, Canada L8S 4M4
email: jfox at mcmaster.ca
phone: 905-525-9140x23604
web: www.socsci.mcmaster.ca/jfox
-----------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kestickler at netscape.net  Mon Oct  1 03:22:36 2001
From: kestickler at netscape.net (kestickler@netscape.net)
Date: Sun, 30 Sep 2001 21:22:36 -0400
Subject: [R] dataframe manipulation
Message-ID: <368D8984.0F478F1E.0F79CEED@netscape.net>

Hi,

a couple of questions on manipulating a dataframe:

1) Without using a for loop (often inefficient, as i understand, in R), is it possible to split a dataframe into a list of dataframes with the number of *columns* in each (child)dataframe specified by the elements of a numeric vector?
for example:

dataframe
10 20 30 40
24 90 34 12
12 44 67 77
split using the vector c(3, 1)
results in 2 dataframes of 3 and 1 column.
10 20 30
24 90 34
12 44 67

and
40
12
77


2) To find the abs() of the difference between every element of a dataframe and the element in the nth column in the *same row*, i use the following code:

n <- 4
apply(df, 1, myDist, df[n,])
myDist <- function(x, y) {
    dist <- sum(abs(x-y));
    return (dist);
}


This however, produces an error message:
Fails as: Error in abs: non-numeric argument to function
I guess its because df[n,] creates a dataframe and not a vector. Any suggestions on how to modify the function?


Thanks for your help,

ken




__________________________________________________________________




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From merithew at ccmr.cornell.edu  Mon Oct  1 04:06:47 2001
From: merithew at ccmr.cornell.edu (Robert D. Merithew)
Date: Sun, 30 Sep 2001 22:06:47 -0400 (EDT)
Subject: [R] can I add to a plot and auto-re-scale axes?
Message-ID: <Pine.LNX.4.10.10109302158270.27662-100000@magic.ccmr.cornell.edu>

(I'm new to R)
 
Is there a way to add data to an existing plot, and have the plot axes
rescaled automatically (i.e. if the new data lie outside the current
axes) ?
 
If not, how can I specify multiple datasets at once, so the axes are
scaled to accomodate all sets?


Details:

(Am I using R's data structures in a reasonable way?)
 
I have many small datasets taken under different conditions, and have
placed the vectors of x-values into one list, and y-values into
another.  The lists are part of a data frame:
 
expts$x[[1]] is a vector of x-coordinates for experiment 1,
expts$y[[3]] is a vector of y-coordinates for experiment 3, etc.
 
I want to plot experiments 1, 4, and 7 together on a single plot, and
have the axes automatically scaled.
 
> plot(expts$x[[1]], expts$y[[1]])
> points(expts$x[[4]], expts$y[[4]])
> points(expts$x[[7]], expts$y[[7]])
 
This works, but won't rescale if experiment 4 has a wider range than
experiment 1.
 
I'm also open to better ways of structuring the data, if that helps.
 
Right now, expts$temp (for example), is a column of the data frame
containing the temperature at which each dataset is taken.  I'd love to
be able to ask for a plot of all datasets with (expts$temp == 25), for
example.  Or build a vector of experiment numbers and plot them all...

thanks,
--
Robert Merithew
Laboratory of Atomic and Solid State Physics
Cornell University, Ithaca, NY


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ReddinM at prose.dpi.qld.gov.au  Mon Oct  1 07:44:38 2001
From: ReddinM at prose.dpi.qld.gov.au (Redding, Matthew)
Date: Mon, 1 Oct 2001 15:44:38 +1000 
Subject: [R] Grouped Regression
Message-ID: <FB599DB5ACE2D211887500A0C9D334E40B1688@TBACRMEXH001>

HI All R Gurus, 

Please reply directly to this email if you have a suggestion, as I am not
currently an R-help member.

I would like to complete a non-linear regression with groups.  Having gone
down the path of completing such
things under GENSTAT, I would prefer to do it with R.

My example data set is...

 TimeTreat    ExtrVol2     SorbedT
         ET1        39.5       384.5
         ET1        78.7       305.2
         ET1       118.0       261.5
         ET1       157.6       233.7
         ET1       197.5       206.3
         ET2        37.5       422.1
         ET2        74.8       405.5
         ET2       112.0       382.6
         ET2       149.7       361.8
         ET2       187.4       347.7

To do a straightforward nls on the data, some code like this would be
necessary...

char<-read.table("O:/R_STH/L_TBA/P_IndSer/IntLive/Ilem_Research/Matt/Incubat
ion/Desorption Isotherms/RWork/DPIAds.txt", header=TRUE)
library(NLS)
test1<-nls(SorbedT~A + B/(1 + D*ExtrVol2), data=char, start=list(A=200,B=80,
D=0.003),trace=TRUE)
summary(test1)


Given this code, How do I alter it to group regression based on the factor
TimeTreat, and provide a comparison of the 
results?

Thanks, 

Matt Redding



********************************DISCLAIMER****************************
The information contained in the above e-mail message or messages 
(which includes any attachments) is confidential and may be legally 
privileged.  It is intended only for the use of the person or entity 
to which it is addressed.  If you are not the addressee any form of 
disclosure, copying, modification, distribution or any action taken 
or omitted in reliance on the information is unauthorised.  Opinions 
contained in the message(s) do not necessarily reflect the opinions 
of the Queensland Government and its authorities.  If you received 
this communication in error, please notify the sender immediately and 
delete it from your computer system network.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Oct  1 08:59:46 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 1 Oct 2001 07:59:46 +0100 (BST)
Subject: [R] dataframe manipulation
In-Reply-To: <368D8984.0F478F1E.0F79CEED@netscape.net>
Message-ID: <Pine.GSO.4.31.0110010742090.5843-100000@auk.stats>

On Sun, 30 Sep 2001 kestickler at netscape.net wrote:

> Hi,
>
> a couple of questions on manipulating a dataframe:
>
> 1) Without using a for loop (often inefficient, as i understand, in R), is it possible to split a dataframe into a list of dataframes with the number of *columns* in each (child)dataframe specified by the elements of a numeric vector?
> for example:
>
> dataframe
> 10 20 30 40
> 24 90 34 12
> 12 44 67 77
> split using the vector c(3, 1)
> results in 2 dataframes of 3 and 1 column.
> 10 20 30
> 24 90 34
> 12 44 67
>
> and
> 40
> 12
> 77

I would loop over the elements of the split.

sp <- c(3, 1)
csp <- c(0, cumsum(sp))
res <- list(length(split))
for(i in seq(along=sp))
  res[[i]] <- df[(1+csp[i]):csp[i+1]]

There are better ways if you had many subgroups, but not for two.

>
>
> 2) To find the abs() of the difference between every element of a
dataframe and the element in the nth column in the *same row*,
i use the following code:
>
> n <- 4
> apply(df, 1, myDist, df[n,])
> myDist <- function(x, y) {
>     dist <- sum(abs(x-y));
>     return (dist);
> }
>
>
> This however, produces an error message:
> Fails as: Error in abs: non-numeric argument to function
> I guess its because df[n,] creates a dataframe and not a vector. Any suggestions on how to modify the function?

Oops: df[, n] is the nth column, not df[n, ], and that's the error.

Secondly, myDist needs to return a vector argument: you have returned the
sum of the absolute differences, not the absolute differences.

Third, apply takes an array as its argument, not a data frame, so in fact
coerces df to a matrix.

Here is what I think you wanted:

m <- as.matrix(df)
abs(m - m[, n])


BTW, the `;' in myDist are unnecessary: this is not C.

myDist <- function(x, y) sum(abs(x-y))

will do.



-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dick at b6ori1.bauv.unibw-muenchen.de  Mon Oct  1 10:59:40 2001
From: dick at b6ori1.bauv.unibw-muenchen.de (Thomas Dick)
Date: Mon, 1 Oct 2001 08:59:40 +0000
Subject: [R] acepack
Message-ID: <1011001085940.ZM413111@B6ori1>

Hello all,

in the file ./acepack/src/ace.f in the acepack package is a subroutine called
acemod for the prediction of responses.

This routine can't be called from within R. Is it because it is faulty or isn't
it needed for prediction?

Thank you,
Thomas
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From johann at ai.univie.ac.at  Mon Oct  1 09:50:49 2001
From: johann at ai.univie.ac.at (Johann Petrak)
Date: Mon, 01 Oct 2001 09:50:49 +0200
Subject: [R] reading in ASCII files
References: <3BAF2DA9.6090108@ai.univie.ac.at> <IISq6GAtjEs7EwVT@myatt.demon.co.uk>
Message-ID: <3BB82059.4060903@ai.univie.ac.at>

Mark Myatt wrote:

> Johann Petrak <johann at ai.univie.ac.at> writes:
> 
>>- factors/levels are created automatically: often, the possible
>>  labels are known in advance and could immediately be
>>  converted. This would save a lot of memory and time for
>>  bigger files, I assume.
>>
> 
> You can use levels() and factor() to do this.
> 
I know ... the point I wanted to make is that for 

very big files, this is an awful waste of memory
and time:
everything gets first stored as strings and only
after being read in gets converted to levels.
I am currently trying to understand the R source code
to do it another way: first convert a single
ASCII file to several binary coded column-files,
then read in those columns needed using readBin.
This should allow greates flexibility when
files are really big.

Cheers,
   Johann


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Bill.Venables at CMIS.CSIRO.AU  Mon Oct  1 10:22:25 2001
From: Bill.Venables at CMIS.CSIRO.AU (Bill.Venables@CMIS.CSIRO.AU)
Date: Mon, 1 Oct 2001 18:22:25 +1000 
Subject: [R] Grouped Regression
Message-ID: <E09E527B56BE2D438A3D6A246DDD27A90490B1@Roper-CV.qld.cmis.csiro.au>



>  -----Original Message-----
> From: 	Redding, Matthew [mailto:ReddinM at prose.dpi.qld.gov.au] 
> Sent:	Monday, 1 October 2001 3:45 PM
> To:	'r-help at lists.r-project.org'
> Subject:	[R] Grouped Regression
> 
> HI All R Gurus, 
> 
> Please reply directly to this email if you have a suggestion, as I am not
> currently an R-help member.
> 
> I would like to complete a non-linear regression with groups.  Having gone
> down the path of completing such
> things under GENSTAT, I would prefer to do it with R.
> 
> My example data set is...
> 
>  TimeTreat    ExtrVol2     SorbedT
>          ET1        39.5       384.5
>          ET1        78.7       305.2
>          ET1       118.0       261.5
>          ET1       157.6       233.7
>          ET1       197.5       206.3
>          ET2        37.5       422.1
>          ET2        74.8       405.5
>          ET2       112.0       382.6
>          ET2       149.7       361.8
>          ET2       187.4       347.7
> 
> To do a straightforward nls on the data, some code like this would be
> necessary...
> 
>
char<-read.table("O:/R_STH/L_TBA/P_IndSer/IntLive/Ilem_Research/Matt/Incubat
> ion/Desorption Isotherms/RWork/DPIAds.txt", header=TRUE)

Uh?  I suppose so.  Wouldn't it be simpler to put the data set in your
working directory?  Better still, do this step once and save the image from
that point on.

> library(NLS)
> test1<-nls(SorbedT~A + B/(1 + D*ExtrVol2), data=char,
start=list(A=200,B=80,
> D=0.003),trace=TRUE)
> summary(test1)
> 
> 
> Given this code, How do I alter it to group regression based on the factor
> TimeTreat, and provide a comparison of the 
> results?

Not enough people realise that the coefficients in a non-linear regression
may be parametrized as indexed quantities.

Here is one way of doing it.

> tst <- nls(SorbedT ~ A[TimeTreat] + B[TimeTreat]/(1 +
D[TimeTreat]*ExtrVol2),
+ data = dp1, start = list(A = c(200, 200), B = c(80,80), D = c(0.001,
0.001)),
+ trace = T)
82946.47 :  2e+02 2e+02 8e+01 8e+01 1e-03 1e-03 
82367.47 :  2.738746e+02 1.916630e+02 9.237563e+00 9.091811e+01 2.423017e-03
9.647061e-04 
79252.85 :  2.883669e+02 1.750317e+02 1.333030e+00 1.126316e+02 1.604157e-02
9.099994e-04 
78725.84 :   2.755148e+02  1.422234e+02  2.988133e+01  1.552895e+02
-5.021803e-02  .414247e-04 
77101.27 :   2.601821e+02  7.970087e+01 -8.884658e+01  2.362855e+02
2.189281e-02  7.813934e-04 
52402.35 :   2.172250e+02 -3.010763e+01  4.124670e+01  3.784320e+02
3.783349e-02  7.532221e-04 
46948.38 :   2.135563e+02 -4.034542e+01  4.767352e+01  3.917020e+02
1.571341e-02  7.530422e-04 
40955.72 :   2.053626e+02 -6.017882e+01  7.337312e+01  4.174103e+02
1.410275e-02  7.527228e-04 
31148.60 :   1.898579e+02 -9.736439e+01  1.218645e+02  4.656113e+02
1.342821e-02  7.522047e-04 
17465.68 :   1.626501e+02 -1.624220e+02  2.068017e+02  5.499460e+02
1.326065e-02  7.515317e-04 
4388.065 :   1.218128e+02 -2.599712e+02  3.342096e+02  6.764111e+02
1.324469e-02  7.509433e-04 
37.07059 :   8.097130e+01 -3.574638e+02  4.616163e+02  8.028200e+02
1.324616e-02  7.507585e-04 
37.07051 :   8.097170e+01 -3.574484e+02  4.616165e+02  8.028046e+02
1.324581e-02  7.508045e-04 
> coef(tst)
           A1            A2            B1            B2            D1 
 8.097170e+01 -3.574484e+02  4.616165e+02  8.028046e+02  1.324581e-02 
           D2 
 7.508045e-04 

A2 looks a bit sick if you were expecting a positive asymptote.

Bill Venables, 
CMIS, CSIRO Marine Laboratories, 
PO Box 120, Cleveland, Qld. 4163
Phone: +61 7 3826 7251  Fax: +61 7 3826 7304
<mailto: Bill.Venables at cmis.csiro.au>
http://www.cmis.csiro.au/bill.venables/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From steinar at math.uio.no  Mon Oct  1 10:35:30 2001
From: steinar at math.uio.no (Steinar Bjerve)
Date: Mon, 01 Oct 2001 10:35:30 +0200
Subject: [R] Missing file
Message-ID: <3BB82470.A12F272B@math.uio.no>

I downloaded  R 1.3.1 to my  G3 powerbook running MacOS 9.1.  When I try
to open  it, I get Missing file: f2clib.

When I try to open R on my Gr desk computer running on Mac OS 9.0, I
get: carbonlib--CFBundleGetValueForInfoDictionaryKey  was not found.  I
need help on this.

Steinar
--
===============================
Steinar Bjerve         www.math.uio.no/~steinar/
===============================
Amor Fati ,


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dmurdoch at pair.com  Mon Oct  1 13:34:26 2001
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Mon, 01 Oct 2001 07:34:26 -0400
Subject: [R] can I add to a plot and auto-re-scale axes?
In-Reply-To: <Pine.LNX.4.10.10109302158270.27662-100000@magic.ccmr.cornell.edu>
References: <Pine.LNX.4.10.10109302158270.27662-100000@magic.ccmr.cornell.edu>
Message-ID: <6okgrtseifsk8isrtiu0ehv6iaarqvt4un@4ax.com>

On Sun, 30 Sep 2001 22:06:47 -0400 (EDT), you wrote:

>(I'm new to R)
> 
>Is there a way to add data to an existing plot, and have the plot axes
>rescaled automatically (i.e. if the new data lie outside the current
>axes) ?

No, there's not.  The scale is established by the first call.
> 
>If not, how can I specify multiple datasets at once, so the axes are
>scaled to accomodate all sets?

You need to use the optional arguments xlim and ylim in the first
call.

Your example would look like this:

plot(expts$x[[1]], expts$y[[1]], xlim = range(c(expts$x[[1]],
expts$x[[4]], expts$x[[7]])), 
ylim = range(c(expts$y[[1]], expts$y[[4]], expts$y[[7]])))

(You might make do with something much simpler, like xlim = c(0,10),
if you know the range of the data in advance, or want consistency
across a wider range.)

You also asked whether your data was organized well.  I'd suggest not
using a list, just use single x and y vectors, with another vector
giving the experiment number.  Then you could have something like

 plot(x[expt == 1], y[expt == 1], xlim = range(x[expt %in% c(1,4,
7)]), ylim = range(y[expt %in% c(1,4, 7)])

 etc.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From partha_bagchi at hgsi.com  Mon Oct  1 13:52:08 2001
From: partha_bagchi at hgsi.com (partha_bagchi@hgsi.com)
Date: Mon, 1 Oct 2001 07:52:08 -0400
Subject: [R] using the pfe editor with R 1.1.3  under windows 2000
Message-ID: <OFCAD12FF7.580DE17C-ON85256AD8.00411896@hgsi.com>


I agree with your last sentiment. In almost all cases, I prefer to write my
function with a text editor (PFE in my case) and source it in R.



                                                                                                               
                    Uwe Ligges                                                                                 
                    <ligges at statistik.uni-do        To:     partha_bagchi at hgsi.com                             
                    rtmund.de>                      cc:     kjetilh at umsanet.edu.bo, Anne York                  
                                                    <anne.york at noaa.gov>, Help R <r-help at stat.math.ethz.ch>    
                    09/29/2001 05:17 AM             Subject:     Re: [R] using the pfe editor with R 1.1.3     
                                                    under windows 2000                                         
                                                                                                               




partha_bagchi at hgsi.com wrote:
>
> I don't know. I do not have access to Win98.

Kjetil Halvorsen wrote:
>> This works for me to (windows 98), with one exception. I have set PFE as
>> the default pager, and that works if PFE is already running. But PFE as
>> default editor
>> have problems. If I use fix() when PFE is already running, I have to
>> kill the R process.
>>
>> Why the difference?

If running as 'pager', only a file is shown in the editor.
If running as 'editor', R waits until the editor has finished, because R
cannot know, when you have finished the 'fix'ing of an object.

I don't know PFE, but with e.g. WinEdt it is possible to start a new
instance of the editor with another caption-name using some command line
arguments, so the instances of the editor can be distinguished by
Windows (and R).
Maybe this is also possible for PFE (?).

BTW: Often it is nice to edit an ASCII file, say foo.R, and source() it
into R instead of using fix(), since the R process is not "interrupted"
and you have saved the function in a file you can make use of much
easier.

Uwe Ligges



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jfox at mcmaster.ca  Mon Oct  1 14:30:54 2001
From: jfox at mcmaster.ca (John Fox)
Date: Mon, 01 Oct 2001 08:30:54 -0400
Subject: [R] can I add to a plot and auto-re-scale axes?
In-Reply-To: <Pine.LNX.4.10.10109302158270.27662-100000@magic.ccmr.corne
 ll.edu>
Message-ID: <5.1.0.14.2.20011001081502.01be7760@mcmail.cis.mcmaster.ca>

Dear Robert,

I didn't follow exactly how the data are set up -- I don't think that a 
data frame can be composed of lists, so I must misunderstand what you've done.

But I can answer your plotting question. A general trick is to set up the 
plot to accommodate all of the data without plotting anything, by 
specifying type='n'. Then you can add the points. For example, suppose you 
have lists x and y composed of vectors:

     plot(range(unlist(x)), range(unlist(y)), type='n',
         xlab='x', ylab='y')
     for(i in seq(along=x)) points(x[[i]], y[[i]])

In your case, however, you don't seem to want to distinguish the different 
sets of points, so an even simpler approach would be to convert the lists 
into vectors to plot them directly:

     plot(unlist(x), unlist(y), xlab='x', ylab='y')

I hope that this is of some help,
  John


At 10:06 PM 30/09/2001 -0400, Robert D. Merithew wrote:
>(I'm new to R)
>
>Is there a way to add data to an existing plot, and have the plot axes
>rescaled automatically (i.e. if the new data lie outside the current
>axes) ?
>
>If not, how can I specify multiple datasets at once, so the axes are
>scaled to accomodate all sets?
>
>
>Details:
>
>(Am I using R's data structures in a reasonable way?)
>
>I have many small datasets taken under different conditions, and have
>placed the vectors of x-values into one list, and y-values into
>another.  The lists are part of a data frame:
>
>expts$x[[1]] is a vector of x-coordinates for experiment 1,
>expts$y[[3]] is a vector of y-coordinates for experiment 3, etc.
>
>I want to plot experiments 1, 4, and 7 together on a single plot, and
>have the axes automatically scaled.
>
> > plot(expts$x[[1]], expts$y[[1]])
> > points(expts$x[[4]], expts$y[[4]])
> > points(expts$x[[7]], expts$y[[7]])
>
>This works, but won't rescale if experiment 4 has a wider range than
>experiment 1.
>
>I'm also open to better ways of structuring the data, if that helps.
>
>Right now, expts$temp (for example), is a column of the data frame
>containing the temperature at which each dataset is taken.  I'd love to
>be able to ask for a plot of all datasets with (expts$temp == 25), for
>example.  Or build a vector of experiment numbers and plot them all...

-----------------------------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario, Canada L8S 4M4
email: jfox at mcmaster.ca
phone: 905-525-9140x23604
web: www.socsci.mcmaster.ca/jfox
-----------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Mon Oct  1 14:33:40 2001
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 1 Oct 2001 14:33:40 +0200
Subject: [R] Reading and writing to S-like databases
In-Reply-To: <200109281812.f8SICqI01180@arbres1a.FMR.Com>
References: <200109281812.f8SICqI01180@arbres1a.FMR.Com>
Message-ID: <15288.25252.359559.340227@gargle.gargle.HOWL>


>>>>> "DavidB" == David Brahm <a215020 at agate.fmr.com> writes:
    DavidB> I asked:
    >> In S-Plus, I build databases of many large objects.  In any given
    >> analysis, I only need a few of those objects, but attach'ing the
    >> whole database is fine since objects are only read as needed.  How
    >> can I do the same thing in R, without reading the entire database?

    DavidB> Responses were generally in 2 categories: 1) Use an external
    DavidB> SQL database (fine for dataframes, but not flexible enough), 2)
    DavidB> Use autoload() or delay() (thanks to Agustin Lobo & Ray
    DavidB> Brownrigg!).  Here's what I came up with from the second
    DavidB> approach.

>> ##### Code: #####
>> "%&%" <- function(a, b) paste(a, b, sep="")

>> g.save.data <- function(dir, pos=2) {
>>   for (i in dir %&% c("", "/data", "/R")) if (!file.exists(i)) dir.create(i)
>>   obj <- objects(pos, all.names=T)
>>   for (i in obj) save(list=i, file=dir %&% "/data/" %&% i %&% ".RData")
>>   code <- obj %&% " <- delay({data(\"" %&% obj %&% "\"); " %&% obj %&% "})"
>>   cat(code, file=dir %&% "/R/" %&% basename(dir), sep="\n")
>> }

Just a ``didactical'' comment on the code above :  The
   >> for (i in dir %&% c("", "/data", "/R")) 
   >>	  if(!file.exists(i)) dir.create(i)
part (using your own "%&%" function) 
is probably better written as something like
   
    for (d in dir) { 
	i <- file.path(d,"data","R")
        if (!file.exists(i)) dir.create(i)
    }

a version which is platform independent {i.e. should work on all flavors of
Unix, Windows, and MacOS} since it does not rely on explicit pasting of
strings for path creation.
And the same of course applies to the same thing in subsequent lines of
your g.save.data() function.

>> g.attach <- function(dir) library(basename(dir), lib.loc=dirname(dir), char=T)

>> 
>> ##### Example: #####
>> attach(NULL, name="newdata")    # Create some data in a new environment
>> assign("x1",  1:10, 2)
>> assign("x2", 11:20, 2)
>> g.save.data("/tmp/newdata")     # Save that environment's contents to a pkg
>> detach(2)
>> g.attach("/tmp/newdata")        # Open the pkg and see the data!
>> 

    DavidB> 		-- David Brahm (a215020 at agate.fmr.com)

Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rolf at math.unb.ca  Mon Oct  1 15:25:29 2001
From: rolf at math.unb.ca (Rolf Turner)
Date: Mon, 1 Oct 2001 10:25:29 -0300 (ADT)
Subject: [R] Graceful exit from fortran.
Message-ID: <200110011325.KAA08559@gelfand.math.unb.ca>


Is there a way to exit gracefully from dynamically loaded Fortran,
(several layers down), if an error condition is detected?

I.e. suppose I'm within a subroutine called by a subroutine, ...,
called by .Fortran(); I want to give up gracefully if an error
condition is detected.

If I say something like

      if(x .gt. 42.d0) stop

then indeed everything stops, i.e. R falls over.  I'd ***like*** to
be able to print out an informative error message (which I guess
could be done --- a wee bit kludgily --- by calling, say, intpr())
and then exit gracefully, with R continuing to run.

Is this possible, or is it just too much too expect?

					cheers,

						Rolf Turner
						rolf at math.unb.ca
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From olivier.martin at inrialpes.fr  Mon Oct  1 16:22:46 2001
From: olivier.martin at inrialpes.fr (Olivier Martin)
Date: Mon, 01 Oct 2001 16:22:46 +0200
Subject: [R] save plot graph
Message-ID: <3BB87C36.470803EB@inrialpes.fr>

Dear all,

I have a lot plot graphs and i would like to save them.
One solution is to use the grab function with xv.
But it is tedious....
So is there a R function that can save automatically
the result of a plot in a gif or ps or bmp file

Thanks
Olivier

--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
Olivier MARTIN               phone: (33) 04 76 61 53 55
Projet IS2                               06 08 67 93 42
INRIA Rhone-Alpes            fax  : (33) 04 76 61 54 77
655, Av. de l'Europe
Montbonnot                  e-mail:olivier.martin at inrialpes.fr
38334 Saint Ismier cedex
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-


-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20011001/b94b521a/attachment.html

From ripley at stats.ox.ac.uk  Mon Oct  1 16:47:48 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 1 Oct 2001 15:47:48 +0100 (BST)
Subject: [R] Graceful exit from fortran.
In-Reply-To: <200110011325.KAA08559@gelfand.math.unb.ca>
Message-ID: <Pine.LNX.4.31.0110011524100.1160-100000@gannet.stats>

On Mon, 1 Oct 2001, Rolf Turner wrote:

>
> Is there a way to exit gracefully from dynamically loaded Fortran,
> (several layers down), if an error condition is detected?
>
> I.e. suppose I'm within a subroutine called by a subroutine, ...,
> called by .Fortran(); I want to give up gracefully if an error
> condition is detected.
>
> If I say something like
>
>       if(x .gt. 42.d0) stop
>
> then indeed everything stops, i.e. R falls over.  I'd ***like*** to
> be able to print out an informative error message (which I guess
> could be done --- a wee bit kludgily --- by calling, say, intpr())
> and then exit gracefully, with R continuing to run.
>
> Is this possible, or is it just too much too expect?

You can borrow the idea of the following piece of code in src/main/print.c

/* Fortran-callable error routine for lapack */

void F77_NAME(xerbla)(char *srname, int *info)
{
    error("On entry to %6s parameter number %d had an illegal value",
          srname, *info);
}

which although I am not sure should always work (passing Fortran strings
being the problem), no one has complained.

A safer route is to add fexitc.c and fexitf.f to your compile, these being
something like

      subroutine fexit(msg)
      int nc
      character*(*) msg
      nc = len(msg)
      call fexitc(msg, nc)
      end

#include <R.h>

void F77_NAME(fexitc)(char *msg, int *nchar)
{
    int nc = *nchar;
    char buf[256];
    if(nc > 255) {
        warning("invalid character length in fexitc");
	nc = 255;
    }
    strncpy(buf, msg, nc);
    buf[nc] = '\0';
    error(buf);
}


Then use

      call fexit('My error message')


I'll add something like that for R 1.4.0.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Oct  1 16:52:56 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 1 Oct 2001 15:52:56 +0100 (BST)
Subject: [R] save plot graph
In-Reply-To: <3BB87C36.470803EB@inrialpes.fr>
Message-ID: <Pine.LNX.4.31.0110011548030.1160-100000@gannet.stats>

On Mon, 1 Oct 2001, Olivier Martin wrote:

> Dear all,
>
> I have a lot plot graphs and i would like to save them.
> One solution is to use the grab function with xv.
> But it is tedious....
> So is there a R function that can save automatically
> the result of a plot in a gif or ps or bmp file

On what platform?  Try dev.copy2eps, or on Windows (the only place we use
bmp files) savePlot.

R does not produce gifs, because of patent claims.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Mon Oct  1 18:02:57 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 1 Oct 2001 09:02:57 -0700 (PDT)
Subject: [R] kidney survival data
In-Reply-To: <003101c14763$d6628600$53db88c8@TeresaCristina.des.ufscar.br>
Message-ID: <Pine.A41.4.33.0110010900020.84818-100000@homer04.u.washington.edu>

On Thu, 27 Sep 2001, Teresa Cristina Martins Dias wrote:

> Dear all, in survival5, kidney data set, appears in help page:
>
> "survival5 does not reproduce the original analysis."
>
> What   does it means?

The dataset has several ties in the failure times, so handling of ties
matters.  According to Therneau the original paper didn't handle the ties
quite correctly.  The effect would usually be invisibly small, but the
REML-like computations seem to be more sensitive to ties than the usual
Cox model.  The difference from the original paper is quite small, but the
comment is there as a reassurance that it is a known difference.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Mon Oct  1 18:31:53 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 1 Oct 2001 09:31:53 -0700 (PDT)
Subject: [R] evaluating the contents of a string
In-Reply-To: <Pine.GSO.4.20.0109281618530.26143-100000@jade.saintmarys.edu>
Message-ID: <Pine.A41.4.33.0110010924390.84818-100000@homer04.u.washington.edu>

On Fri, 28 Sep 2001, David A Richmond wrote:
<snip>
> is there a function to pass bname to such that dim returns the dimensions
> of b?
>
> like
> 	dim(somefunc(bname))
> returns
> 	[1] 3 3
>
> does 'somefunc' exist?

As already pointed out, eval(parse(text=bname)) will return the object
whose name is in the text string. Another way is get(bname), which is more
specific (it gets objects by name, rather than evaluating arbitrary code).

In general, this sort of question is frequently a sign that someone is
doing things the hard way.  There are some real situations where you need
to operate on strings like this, but they are fairly rare.

For example, if you have a collection of arrays and may want the
dimensions of any one of them, you could put them in a list


 listofarrays<-list()
 listofarrays$b <- matrix(1:9,3,3)
 dim(listofarrays$b)

and even
 bname<-"b"
 dim(listofarrays[[bname]])


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Mon Oct  1 18:38:40 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 1 Oct 2001 09:38:40 -0700 (PDT)
Subject: [R] Re: [R-SIG-Mac]how much memory does one need...
In-Reply-To: <Pine.GSO.4.20.0109291844090.9879-100000@jade.saintmarys.edu>
Message-ID: <Pine.A41.4.33.0110010935510.84818-100000@homer04.u.washington.edu>

On Sat, 29 Sep 2001, David A Richmond wrote:
>
> Several questions arise from this problem: 1) how do I determine how much
> memory is free within the program?, 2) how do I determine how much memory
> is being consumed by a given object?, 3) how do I force R to create a
> matrix as a single rather than a double?

1) gc() or memory.profile()

2) Not well-defined in general, but for a matrix it is usually 8 bytes per
element for real, 4 for integer (plus a fairly small fixed overhead).

3) You don't.  R doesn't have single precision.  as.single() is just a
request that when the object is passed to .C or .Fortran it should be
converted to single precision.


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pgilbert at bank-banque-canada.ca  Mon Oct  1 18:41:16 2001
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 01 Oct 2001 12:41:16 -0400
Subject: [R] generic default values
Message-ID: <3BB89CAC.1750B551@bank-banque-canada.ca>

I have a generic function

test.equal <- function(obj1, obj2, ...) UseMethod("test.equal")

however, the only argument that specific methods use is "fuzz" so I
would like to change this to

test.equal <- function(obj1, obj2, fuzz=???) UseMethod("test.equal")

The problem is that some methods use slightly different default values
for fuzz than others. How should the generic be specified to allow this?

Thanks,
Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thaleia at uclink4.berkeley.edu  Mon Oct  1 19:19:06 2001
From: thaleia at uclink4.berkeley.edu (Thaleia Travasarou)
Date: Mon, 01 Oct 2001 10:19:06 -0700
Subject: [R] question
Message-ID: <4.1.20011001101408.00a916b0@uclink4.berkeley.edu>

Dear Sir / Madam,

I am a Ph.D student in the Civil Engineering Department at UC Berkeley.
My work currently involves performing nonlinear regression analysis using the
random effects model.

(i.e : yij = f(xij) + ei + eij)

I would like to ask you whether the software R has a built in function to
perform non-linear regression
using a random effects model.

Thank you very much for your help in advance,

Thaleia Travasarou
Graduate Student Researcher,
Civil Engineering Department
440 Davis Hall, UC Berkeley
tel: (510) 642-9005
e-mail: thaleia at uclin4.berkeley.edu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20011001/c1baef73/attachment.html

From gpetris at definetti.uark.edu  Mon Oct  1 19:58:36 2001
From: gpetris at definetti.uark.edu (Giovanni Petris)
Date: Mon, 1 Oct 2001 12:58:36 -0500 (CDT)
Subject: [R] save plot graph
In-Reply-To: <3BB87C36.470803EB@inrialpes.fr> (message from Olivier Martin on
	Mon, 01 Oct 2001 16:22:46 +0200)
References: <3BB87C36.470803EB@inrialpes.fr>
Message-ID: <200110011758.MAA05133@definetti.uark.edu>


dev.print()
dev.copy2eps()
dev.copy()

GP


> Date: Mon, 01 Oct 2001 16:22:46 +0200
> From: Olivier Martin <olivier.martin at inrialpes.fr>
> X-Accept-Language: en
> Sender: owner-r-help at stat.math.ethz.ch
> Precedence: SfS-bulk
> Content-Type: multipart/alternative;
>  boundary="------------AF57D599448FD65783CD0AE5"
> Content-Length: 2506
> 
> 
> --------------AF57D599448FD65783CD0AE5
> Content-Type: text/plain; charset=us-ascii
> Content-Transfer-Encoding: 7bit
> 
> Dear all,
> 
> I have a lot plot graphs and i would like to save them.
> One solution is to use the grab function with xv.
> But it is tedious....
> So is there a R function that can save automatically
> the result of a plot in a gif or ps or bmp file
> 
> Thanks
> Olivier
> 
> --
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> Olivier MARTIN               phone: (33) 04 76 61 53 55
> Projet IS2                               06 08 67 93 42
> INRIA Rhone-Alpes            fax  : (33) 04 76 61 54 77
> 655, Av. de l'Europe
> Montbonnot                  e-mail:olivier.martin at inrialpes.fr
> 38334 Saint Ismier cedex
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> 
> 
> 
> --------------AF57D599448FD65783CD0AE5
> Content-Type: text/html; charset=us-ascii
> Content-Transfer-Encoding: 7bit
> 
> <!doctype html public "-//w3c//dtd html 4.0 transitional//en">
> <html>
> Dear all,
> <p>I have a lot plot graphs and i would like to save them.
> <br>One solution is to use the grab function with xv.
> <br>But it is tedious....
> <br>So is there a R function that can save automatically
> <br>the result of a plot in a gif or ps or bmp file
> <p>Thanks
> <br>Olivier
> <pre>--&nbsp;
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> Olivier MARTIN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; phone: (33) 04 76 61 53 55
> Projet IS2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 06 08 67 93 42&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
> INRIA Rhone-Alpes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fax&nbsp; : (33) 04 76 61 54 77
> 655, Av. de l'Europe
> Montbonnot&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e-mail:olivier.martin at inrialpes.fr
> 38334 Saint Ismier cedex
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-</pre>
> &nbsp;</html>
> 
> --------------AF57D599448FD65783CD0AE5--
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 

 __________________________________________________
[                                                  ]
[ Giovanni Petris                 GPetris at uark.edu ]
[ Department of Mathematical Sciences              ]
[ University of Arkansas - Fayetteville, AR 72701  ]
[ Ph: (501) 575-6324, 575-8630 (fax)               ]
[ http://definetti.uark.edu/~gpetris/              ]
[__________________________________________________]

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rolf at math.unb.ca  Mon Oct  1 20:51:16 2001
From: rolf at math.unb.ca (Rolf Turner)
Date: Mon, 1 Oct 2001 15:51:16 -0300 (ADT)
Subject: [R] Summary on graceful exit from fortran.
Message-ID: <200110011851.PAA18871@gelfand.math.unb.ca>


I had asked for a way of gracefully exiting from a dynamically
loaded subroutine (possibly several levels down) --- without
knocking R over --- if an error condition was detected.

As usual, if there is anything at all reasonable in the question, and
if there exists an answer, Brian Ripley will tell you the answer.

Since Prof. Ripley's answer was already posted to this list, I won't
recapitulate it here.  Let me just say that I tried it (the second
version using a Fortran subroutine which calls a C function) and it
worked.  Since Prof. Ripley supplied explicit code, it was trivial to
implement.  I had to change ***ONE*** line, in the Fortran code:
the declaration ``int nc'' causes the compiler to hiccup (at least on
our system) --- I change it to ``integer nc'' and everying flew
beautifully.

The behaviour provided was EXACTLY what I'd hoped for.

In closing let me (as has been done so often before on this list and
the s-news list --- but it bears repeating) publicly express my
gratitude to Prof. Ripley for his help and wisdom and extensive
insight.

					cheers,

						Rolf Turner
						rolf at math.unb.ca
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From a215020 at agate.fmr.com  Mon Oct  1 21:02:04 2001
From: a215020 at agate.fmr.com (David Brahm)
Date: Mon, 1 Oct 2001 15:02:04 -0400 (EDT)
Subject: [R] Reading and writing to S-like databases
Message-ID: <200110011902.f91J24o24253@arbres1a.FMR.Com>

On 9/27 I asked:
> In S-Plus, I build databases of many large objects.  In any given analysis,
> I only need a few of those objects, but attach'ing the whole database is fine
> since objects are only read as needed.  How can I do the same thing in R,
> without reading the entire database?

Here are the latest versions of my functions to accomplish this.  Note I now
use system-independent file descriptors (as suggested by Martin Maechler), I
have eliminated the need to eliminate conflicts first (I "eval" in the proper
environment), and I now store the loaded objects in the package (overwriting
the promise objects) rather than in the global environment.

##### Code: #####

# Save objects in position "pos" to a delayed-evaluation data package:
g.data.save <- function(dir, obj=z, pos=2) {
  z <- objects(pos, all.names=T)
  if (is.character(pos)) pos <- match(pos, search())
  pkg <- basename(dir)
  for (i in file.path(dir,c("","data","R"))) if (!file.exists(i)) dir.create(i)
  for (i in obj) {
    file <- file.path(dir, "data", paste(i,"RData",sep="."))
    expr <- parse(text=paste("save(list=\"",i,"\", file=\"",file,"\")",sep=""))
    eval(expr, pos.to.env(pos))
  }
  code <- paste(z," <- delay(g.data.load(\"", z, "\", \"", pkg, "\"))", sep="")
  cat(code, file=file.path(dir, "R", pkg), sep="\n")
}

# Routine used in data packages, e.g.  x <- delay(g.data.load("x", "newdata"))
g.data.load <- function(i, pkg) {
  load(system.file("data", paste(i,"RData",sep="."), package=pkg),
       pos.to.env(match(paste("package",pkg,sep=":"), search())))
  get(i)
}

# Attach a delayed-evaluation data package:
g.data.attach <- function(dir)
  library(basename(dir), lib.loc=dirname(dir), char=T)

# Get data from an unattached package (like get(item,dir) in S-plus):
g.data.get <- function(item, dir) {
  env <- new.env()
  load(file.path(dir, "data", paste(item,"RData",sep=".")), env)
  get(item, envir=env)
}


##### Example: #####

attach(NULL, name="newdata")
assign("x1", matrix(1, 1000, 1000), 2)
assign("x2", matrix(2, 1000, 1000), 2)
g.data.save("/tmp/newdata")
detach(2)
g.data.attach("/tmp/newdata")
objects(2)                           # These are promise objects
system.time(print(dim(x1)))          # Takes time to load up
system.time(print(dim(x1)))          # Second time is faster!
objects(2)                           # Now x1 is a real object
find("x1")                           # It's in package:newdata
detach(2)
unlink("/tmp/newdata", recursive=T)  # Clean up

#####################

			-- David Brahm (a215020 at agate.fmr.com)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hlai at whsun1.wh.whoi.edu  Tue Oct  2 00:04:00 2001
From: hlai at whsun1.wh.whoi.edu (Han Lai)
Date: Mon, 01 Oct 2001 15:04:00 -0700
Subject: [R] linear mixed-effects model
Message-ID: <3BB8E850.FAC876FD@whsun1.wh.whoi.edu>

Hi,

I use the package "nlme" to fit linear regression on data that has 27
groups (subjects).  The following is my scripts.

lw <- groupedData( y ~ x | group, data = read.table("lw.d",header=T))
lw1 <- lme(y~x,data=lw,random= ~x | group)

Everaything o.k. up to this point.  However, the next one,

lw2 <- lme(y~x+sex,data=lw,random= ~x | group),
where sex is classification factor with M=male and F=female, gives the
following message:

  Error in MEEM(object, conLin, control$niterEM) :
          Singularity in backsolve at level 0, block 1

Is any fix to this problem?

Cheers!
Han

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Mon Oct  1 22:50:07 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 1 Oct 2001 13:50:07 -0700 (PDT)
Subject: [R] Correlations in multivariate censored data
In-Reply-To: <3BB3964A.102@discovery.saclay.cea.fr>
Message-ID: <Pine.A41.4.33.0110011345440.60010-100000@homer25.u.washington.edu>

On Thu, 27 Sep 2001, Pierre Chanial wrote:

> Hello,
>
> I would like to know if the following problem can be solved using the survival
> package in R.
>
> I would like to perform a linear regression:
> Z=aX + bY + c
> a,b,c being constants to determine (with errors)
> X,Y,Z being measurement vectors.
> X     being eventually censored.
>
> This problem has not been consistently addressed in my field (astronomy), that's
> why I need interdisciplinarity help!
> (references to published and referred articles are highly welcomed)
>

No, survival can't handle this.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Mon Oct  1 22:52:50 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 1 Oct 2001 13:52:50 -0700 (PDT)
Subject: [R] Generate rand. data with zero skewness and some kurtosis
In-Reply-To: <200109280608.IAA17415@stat.math.ethz.ch>
Message-ID: <Pine.A41.4.33.0110011350230.60010-100000@homer25.u.washington.edu>

On Fri, 28 Sep 2001, Abdul Kudus wrote:

> Dear all,
>
> Right now, I'm doing research about outlier in statistical data
> (univariate and multivariate) and I want to simulate its behavior.  My
> problem is :
> How to generate random data from distribution with zero skewness and
> some kurtosis values in R ?

The t-distribution family may help.  These have zero skewness and
kurtosis ranging from the normal to infinite. I don't know offhand the
relationship between degrees of freedom and kurtosis, but it should be
easy to look up (or evaluate by simulation).

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From macq at llnl.gov  Mon Oct  1 23:28:29 2001
From: macq at llnl.gov (Don MacQueen)
Date: Mon, 1 Oct 2001 14:28:29 -0700
Subject: [R] Efficiency: as.POSIXct() or ISOdate()
In-Reply-To: <Pine.GSO.4.31.0109301204460.29625-100000@auk.stats>
References: <Pine.GSO.4.31.0109301204460.29625-100000@auk.stats>
Message-ID: <p05101003b7de8c88787d@[128.115.153.6]>

I am using awk to pre-process several data files that have date-time 
information in a non-standard format. The files can be in the many 
tens of thousands of lines. At present, I plan to use scan(pipe()) or 
perhaps read.table(pipe()) with whatever other arguments are 
necessary.

It occurs to me that using awk I have the opportunity to read the 
datetime information as either a single character vector of datetimes 
and use as.POSIXct() , or as six numeric vectors and use ISOdate().

I would appreciate advice about the relative merits. I would tend to 
prefer the faster one, if there is much difference.

Thanks
-Don

p.s.
I haven't quite sorted out the options, i.e., when to use strftime(), 
when to use format.POSIXct(), when to use as.POSIXct(). At the 
moment, though, I believe I would use as.POSIXct(). I don't at this 
point see any reason to use the "lt" structure in my current 
application.

>  version
          _
platform powerpc-apple-darwin1.3.7
arch     powerpc
os       darwin1.3.7
system   powerpc, darwin1.3.7
status
major    1
minor    3.0
year     2001
month    06
day      22
language R

(and I will probably also use a Solaris version at some point)
-- 
--------------------------------------
Don MacQueen
Environmental Protection Department
Lawrence Livermore National Laboratory
Livermore, CA, USA
--------------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From monnie at xena.hunter.cuny.edu  Mon Oct  1 23:26:23 2001
From: monnie at xena.hunter.cuny.edu (Monnie McGee)
Date: Mon, 1 Oct 2001 17:26:23 -0400 (EDT)
Subject: No subject
Message-ID: <Pine.GSO.4.05.10110011725500.8032-100000@xena.hunter.cuny.edu>

Dear All - 

I tried to install R-1.3.1 on a Ultrasparc 10 running Solaris 2.7. I have
followed the directions in the INSTALL file exactly, but R refuses to
create the file R.bin. I also had someone else, who is better with UNIX
than I am, try the installation. It didn't create the R.bin file for him,
either. As a result, I cannot run R, even after going through the
installation process.

Help!

Regards,
Monnie McGee

Monnie McGee, Ph.D.
Assistant Professor
Hunter College
Department of Mathematics and Statistics
695 Park Avenue
New York, NY 10021

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Tue Oct  2 00:21:11 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Oct 2001 00:21:11 +0200
Subject: [R] Re: none
In-Reply-To: <Pine.GSO.4.05.10110011725500.8032-100000@xena.hunter.cuny.edu>
References: <Pine.GSO.4.05.10110011725500.8032-100000@xena.hunter.cuny.edu>
Message-ID: <x2itdzovc8.fsf@blueberry.kubism.ku.dk>

Monnie McGee <monnie at xena.hunter.cuny.edu> writes:

> Dear All - 
> 
> I tried to install R-1.3.1 on a Ultrasparc 10 running Solaris 2.7. I have
> followed the directions in the INSTALL file exactly, but R refuses to
> create the file R.bin. I also had someone else, who is better with UNIX
> than I am, try the installation. It didn't create the R.bin file for him,
> either. As a result, I cannot run R, even after going through the
> installation process.
> 
> Help!

Which compiler suite? Which "make" utility? What is the error message?
Did the configure step say anything odd?

(Solaris 7 is known good with GNU toolchain and also some other
configurations).
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From znmeb at aracnet.com  Tue Oct  2 05:17:12 2001
From: znmeb at aracnet.com (M. Edward Borasky)
Date: Mon, 1 Oct 2001 20:17:12 -0700
Subject: [R] save plot graph
In-Reply-To: <200110020201.EAA09827@stat.math.ethz.ch>
Message-ID: <HBEHIIBBKKNOBLMPKCBBKEBBDOAA.znmeb@aracnet.com>

> Date: Mon, 01 Oct 2001 16:22:46 +0200
> From: Olivier Martin <olivier.martin at inrialpes.fr>
> Subject: [R] save plot graph
>
> - --------------AF57D599448FD65783CD0AE5
> Content-Type: text/plain; charset=us-ascii
> Content-Transfer-Encoding: 7bit
>
> Dear all,
>
> I have a lot plot graphs and i would like to save them.
> One solution is to use the grab function with xv.
> But it is tedious....
> So is there a R function that can save automatically
> the result of a plot in a gif or ps or bmp file
>
> Thanks
> Olivier

When I want code that works on either Windows or *N*X, I usually use
Portable Network Graphics (png) files. Do a "help (png)" for the details.
"png" files can be imported into Word documents and displayed with most
browsers. Dealing with PostScript is a pain on Windows, "gifs" have
intellectual property issues as Dr. Ripley noted, and "bmp" files are
*huge*. "wmf" files work great on Windows; if I don't need portability,
that's what I use on Windows R. But *N*X R doesn't make "wmf" files yet.
--
M. Edward (Ed) Borasky, Chief Scientist, Borasky Research
http://www.borasky-research.net  http://www.aracnet.com/~znmeb
mailto:znmeb at borasky-research.net  mailto:znmeb at aracnet.com

Q: How do you tell when a pineapple is ready to eat?
A: It picks up its knife and fork.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jarioksa at cc.oulu.fi  Tue Oct  2 08:34:20 2001
From: jarioksa at cc.oulu.fi (Jari Oksanen)
Date: Tue, 02 Oct 2001 09:34:20 +0300
Subject: [R] Graceful exit from fortran. (fwd)
Message-ID: <200110020634.f926YKs14425@pc112145.oulu.fi>


rolf at math.unb.ca said:
> If I say something like
>       if(x .gt. 42.d0) stop
> then indeed everything stops, i.e. R falls over.  I'd ***like*** to be
> able to print out an informative error message (which I guess could be
> done -


In Fortran:

    subroutine foo(..., ier)
    integer ier
    ier=0
    ...
    if (x .gt. 42.d0) then
       ier=1
       return
    endif
    ...
    return
    end

In R:

foo <- .Fortran("foo", ..., ier=integer(1))
if(foo$ier) stop("error: x > 42")


By the way, is the following allowed in Windows with mignw32 g77:

subroutine topen(filename)
character*255 filename
open(unit=1, file=filename, status='old')
return 
end

subroutine tread(line)
character*255 line
read(1, *) line
return
end

This seems to work magically when linked to R in Linux (RH7.1, gcc 
"2.96" g77), but one friend of mine told it crashes R when linked to 
Windows R. I don't have Windows R with building tools anywhere I know, 
so I am not sure if this is the cause of the failure.
cheers, jari oksanen
- -- 
Jari Oksanen -- Dept Biology, Univ Oulu, 90014 Oulu, Finland
Ph. +358 8 5531526, cell +358 40 5136529, fax +358 8 5531061
email jari.oksanen at oulu.fi, homepage http://cc.oulu.fi/~jarioksa/



------- End of Forwarded Message



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wsi at gcal.ac.uk  Tue Oct  2 11:23:30 2001
From: wsi at gcal.ac.uk (Bill Simpson)
Date: Tue, 2 Oct 2001 10:23:30 +0100 (BST)
Subject: [R] plot of Bernoulli data
Message-ID: <Pine.LNX.4.10.10110021008370.522-100000@localhost.localdomain>

I have some Bernoulli data something like this:
 x<-sort(runif(100,1,20))
 p<-pnorm(x,10,3)
 y<-as.numeric(runif(x)<p)
 plot(x,y)
 lines(x,p)

This plot is not very satisfactory because the ogive does not visually
fit the (0,1) points very well, and also because the points tend to fall
on top of one another. The second problem can be eliminated by adding
vertical jitter. However I was thinking about the following plot. Instead
of plotting all the 0,1 points, instead divide the x axis into bins. In
each bin, find the average y value. Then plot (x=average of x values in
bin, y=average of 0,1 values in bin). So if I use 10 bins I have 10 points
in the plot and now the y-values are proportions instead of 0/1.  Is this
a plot that other people have used (refs appreciated)? If so maybe someone
has code to do this. Otherwise, I am not sure of how to do this in R.
Could someone help me?  Thanks very much.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From olivier.martin at inrialpes.fr  Tue Oct  2 12:43:17 2001
From: olivier.martin at inrialpes.fr (Olivier Martin)
Date: Tue, 02 Oct 2001 12:43:17 +0200
Subject: [R] R and Java
Message-ID: <3BB99A45.7405CDBE@inrialpes.fr>

Daer all,

Before to expose my problem, this the configuartion of my environment.
I use the version 1.2.1 of R  with a  limux system (redhat)

I have installed SJava  (from omeghat) package successfully.
So, i wanted to try an example (calc.R) that is provided in the library.

This is the message I obtained:
Error in isJavaInitialized("Java virtual machine has not been
initialized. Call .JavaInit
Java virtual machine has not been initialized. Call .JavaInit()

So, i tried .JavaInit() but i obtained Segmentation fault (core dumped)

Could somebody  help me ?
Thanks,
Olivier

--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
Olivier MARTIN
PhD student                  phone: (33) 04 76 61 53 55
Projet IS2                               06 08 67 93 42
INRIA Rhone-Alpes            fax  : (33) 04 76 61 54 77
655, Av. de l'Europe
Montbonnot                   e-mail:olivier.martin at inrialpes.fr
38334 Saint Ismier cedex
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-


-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20011002/93ed4229/attachment.html

From wsi at gcal.ac.uk  Tue Oct  2 13:57:18 2001
From: wsi at gcal.ac.uk (Bill Simpson)
Date: Tue, 2 Oct 2001 12:57:18 +0100 (BST)
Subject: [R] plot of Bernoulli data
In-Reply-To: <Pine.LNX.4.10.10110021008370.522-100000@localhost.localdomain>
Message-ID: <Pine.LNX.4.10.10110021252580.983-100000@localhost.localdomain>

>  x<-sort(runif(100,1,20))
>  p<-pnorm(x,10,3)
>  y<-as.numeric(runif(x)<p)
>  plot(x,y)
>  lines(x,p)
df<-data.frame(x,y)
aggregate(df,list(x=(x<5),(x>5)&(x<10),(x>10) & (x<15),(x>15)), FUN=mean)
gives me what I want but if anyone has a better way to collect the
observations into bins I'd like to hear it. It would be nice to
pass along something like
breaks<-c(5,10,15,20)

Thanks

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From johann at ai.univie.ac.at  Tue Oct  2 14:21:51 2001
From: johann at ai.univie.ac.at (Johann Petrak)
Date: Tue, 02 Oct 2001 14:21:51 +0200
Subject: [R] Avoiding deep copies
Message-ID: <3BB9B15F.2090604@ai.univie.ac.at>

Is it correct that there is no way of avoiding deep copying
of data structures? Or asked from a different perspective,
is it true that there are no pointers? :)
(not that I am a fan of pointer, they just let me
decide when to do deep copy on my own when the
memory manager doesnt do it for me :) )

I was considering writing code in R that would need
the internal representation of complex graph structures
where several nodes in the graph point to the same
huge array of data.
Now, obviously one cannot just do something like
attr(thenode,"mydatavec")<-thedatavec or
thenode$mydatavec<-thedatavec
since all the data in thedatavec will be copied
with this assignment.
Are there commonly accepted/used workarounds?

Johann



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andy_liaw at merck.com  Tue Oct  2 14:44:35 2001
From: andy_liaw at merck.com (Liaw, Andy)
Date: Tue, 02 Oct 2001 08:44:35 -0400
Subject: [R] connections: remember to close it!
Message-ID: <51F9C42DA15CD311BD220008C707D81903DC82B8@usrymx10.merck.com>

Hi all,

I have newly discovered the power of connections (although just a small part
of it, namely the file() connection).  It allowed me to process data file
with arbitrary number of fields per line, which I was using awk for
preprocessing before readling into R.  The combination of the connection,
readLines() and strsplit() really make the work a lot easier and more
organized.  Thanks a bundle to the R Core for this excellent work!!

One reminder for people new to connections:  If you open connections inside
a function, make sure they are closed before exiting from that function,
otherwise you end up with connections that can not be closed (or at least I
tried closeAllConnections() without success on WinNT4).  Not being very
smart or clear-headed, I turned a working R script that opens the connection
and process the data into an R function, but introduced some bugs in the
process.  I forgot to add "on.exit(close(filecon))" right after I open the
connection in the function.  As a result, repeated failed calls to the
function generated a bunch of open connections that I can't close.  I'm not
sure what the consequences of this is.  I was able to quit R gracefully, but
my NT seemed to have become unstable afterward.

System info:  R-1.3.1 on WinNT4sp6.  IBM Thinkpad 600E with PII and 128MB
ram.

Cheers,
Andy

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Tue Oct  2 15:05:19 2001
From: ben at zoo.ufl.edu (Ben Bolker)
Date: Tue, 2 Oct 2001 09:05:19 -0400 (EDT)
Subject: [R] plot of Bernoulli data
In-Reply-To: <Pine.LNX.4.10.10110021252580.983-100000@localhost.localdomain>
Message-ID: <Pine.LNX.4.30.0110020904580.30607-100000@bolker.zoo.ufl.edu>


  cut()?

On Tue, 2 Oct 2001, Bill Simpson wrote:

> >  x<-sort(runif(100,1,20))
> >  p<-pnorm(x,10,3)
> >  y<-as.numeric(runif(x)<p)
> >  plot(x,y)
> >  lines(x,p)
> df<-data.frame(x,y)
> aggregate(df,list(x=(x<5),(x>5)&(x<10),(x>10) & (x<15),(x>15)), FUN=mean)
> gives me what I want but if anyone has a better way to collect the
> observations into bins I'd like to hear it. It would be nice to
> pass along something like
> breaks<-c(5,10,15,20)
>
> Thanks
>
> Bill Simpson
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker at zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fharrell at virginia.edu  Tue Oct  2 15:15:12 2001
From: fharrell at virginia.edu (Frank E Harrell Jr)
Date: Tue, 02 Oct 2001 09:15:12 -0400
Subject: [R] plot of Bernoulli data
References: <Pine.LNX.4.10.10110021008370.522-100000@localhost.localdomain>
Message-ID: <3BB9BDE0.F5D7375F@virginia.edu>

The loess smoother, with outlier detection turned off,
is an excellent way to estimate the relationship
between a continuous variable and the probability
of an event, based on a binary dependent variable.
Use lowess(x,y,iter=0).  I do wonder about the way in
which your data are generated, however.  You
might think about

 p <- whatever  # and check that if you use pnorm the
                # first arg to pnorm spans the right metric
 y <- 1*(runif(n) <= p)  # n=100 in your example

Bill Simpson wrote:
> 
> I have some Bernoulli data something like this:
>  x<-sort(runif(100,1,20))
>  p<-pnorm(x,10,3)
>  y<-as.numeric(runif(x)<p)
>  plot(x,y)
>  lines(x,p)
> 
> This plot is not very satisfactory because the ogive does not visually
> fit the (0,1) points very well, and also because the points tend to fall
> on top of one another. The second problem can be eliminated by adding
> vertical jitter. However I was thinking about the following plot. Instead
> of plotting all the 0,1 points, instead divide the x axis into bins. In
> each bin, find the average y value. Then plot (x=average of x values in
> bin, y=average of 0,1 values in bin). So if I use 10 bins I have 10 points
> in the plot and now the y-values are proportions instead of 0/1.  Is this
> a plot that other people have used (refs appreciated)? If so maybe someone
> has code to do this. Otherwise, I am not sure of how to do this in R.
> Could someone help me?  Thanks very much.
> 
> Bill
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andy_liaw at merck.com  Tue Oct  2 15:28:49 2001
From: andy_liaw at merck.com (Liaw, Andy)
Date: Tue, 02 Oct 2001 09:28:49 -0400
Subject: [R] file connection, while, readLines and browser
Message-ID: <51F9C42DA15CD311BD220008C707D81903DC82BA@usrymx10.merck.com>

Dear R-help,

I have one more question about the functions mentioned in the subject.
Again, the system info is:
platform i386-pc-mingw32
arch     x86            
os       Win32          (OK, it's NT4sp6)
system   x86, Win32     
status                  
major    1              
minor    3.1            
year     2001           
month    08             
day      31             
language R              

I defined a function like the following:

myfun <- function(file, maxline) {
  f.con <- file(file, open="rt")
  on.exit(close(f.con))
  while(length(readln <- readLines(f.con, 1)) > 0 ) {
    ## Do something with readln...
  }
  ## Do something more...
}

This didn't work for me.  It gave me an error at the while statement, saying
"NA where logical needed".  I inserted a browser() right inside the while
loop and have it step through the function.  It seems to be stuck at the
first line of the file and never move down.  This behaviour is different
from the call without the browser().  Anyone has ideas why this is the case?

What had worked for me is something like the following:
  repeat {
    readln <- readLines(f.con, 1)
    if(length(readln) == 0) break
    ## do something...
  }

Any suggestions are greatly appreciated.

Regards,
Andy

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From luke at nokomis.stat.umn.edu  Tue Oct  2 16:04:38 2001
From: luke at nokomis.stat.umn.edu (Luke Tierney)
Date: Tue, 2 Oct 2001 09:04:38 -0500
Subject: [R] Avoiding deep copies
In-Reply-To: <3BB9B15F.2090604@ai.univie.ac.at>; from johann@ai.univie.ac.at on Tue, Oct 02, 2001 at 02:21:51PM +0200
References: <3BB9B15F.2090604@ai.univie.ac.at>
Message-ID: <20011002090438.A21473@nokomis.stat.umn.edu>

On Tue, Oct 02, 2001 at 02:21:51PM +0200, Johann Petrak wrote:
> Is it correct that there is no way of avoiding deep copying
> of data structures? Or asked from a different perspective,
> is it true that there are no pointers? :)
> (not that I am a fan of pointer, they just let me
> decide when to do deep copy on my own when the
> memory manager doesnt do it for me :) )
> 
> I was considering writing code in R that would need
> the internal representation of complex graph structures
> where several nodes in the graph point to the same
> huge array of data.
> Now, obviously one cannot just do something like
> attr(thenode,"mydatavec")<-thedatavec or
> thenode$mydatavec<-thedatavec
> since all the data in thedatavec will be copied
> with this assignment.
> Are there commonly accepted/used workarounds?
> 
> Johann
> 

There are two (useful) types of object that are passed by reference in
R: environments and external pointers.  External pointers are useful
for managing data allocated at the C level.  Environments are useful
for doing this sort of thing at the R level.  For example, if you
define, say,

new.ref <- function(value = NULL) {
    ref <- new.env()
    assign("value", value, env = ref)
    ref
}

ref.value <- function(ref) get("value", env = ref)

"ref.value<-" <- function(ref, value) {
    assign("value", value, env = ref)
    ref
}

then

r <- new.ref(<data that should not be copied>)

produces a reference object that will not be deep copied, and

s <- r

makes s another name for that reference, so that ref.value(s) <- <new value>
changes the value returned by ref.value(r):

> r <- new.ref(1)
> ref.value(r)
[1] 1
> s<-r
> ref.value(s) <- 2
> ref.value(s)     
[1] 2
> ref.value(r)
[1] 2

A slightly fancier version would wrap the environment in a list and
attach a class to it, something like

new.ref <- function(value = NULL) {
    ref <- list(env = new.env())
    class(ref) <- "refObject"
    assign("value", value, env = ref$env)
    ref
}

is.refObject <- function(r) inherits(r, "refObject")

print.refObject <- function(r) cat("<reference>\n")

ref.value <- function(ref) {
    if (! is.refObject(ref)) stop("not a refObject")
    get("value", env = ref$env)
}

"ref.value<-" <- function(ref, value) {
    if (! is.refObject(ref)) stop("not a refObject")
    assign("value", value, env = ref$env)
    ref
}

Then

> r <- new.ref(1)
> r
<reference>
> ref.value(3)
Error in ref.value(3) : not a refObject


We've talked about adding something like this off and on but have not
gotten around to it yet.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke at stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andy_liaw at merck.com  Tue Oct  2 16:30:02 2001
From: andy_liaw at merck.com (Liaw, Andy)
Date: Tue, 02 Oct 2001 10:30:02 -0400
Subject: An example (was RE: [R] file connection, while, readLines and
 bro	wser)
Message-ID: <51F9C42DA15CD311BD220008C707D81903DC82BC@usrymx10.merck.com>

Prof. Gentleman (and R-help),

Here's an example of what didn't work.  I still don't understand why.

Function:
trycon <- function(file, n) {
  f.con <- file(file, open="rt")
  on.exit(close(f.con))
  i <- 0
  while( length(readln <- readLines(f.con, 1)) > 0 ) {
    x <- unlist(strsplit(readln, " "))
    if(length(x) <= 6 && x[3] == x[4]) next
    i <- i + 1
  }
  return(invisible())
}

Data file:
1 0.00 ABC ABC 1.00 0 
2 0.00 DEF DEF 1.00 0 CDE 1.00 0 XYZ 0.72 0 
3 0.00 abc abc 1.00 0 ghi 1.00 0 stu 0.72 0 lmn 0.80 0 

R call:
trycon("C:/home/data.txt", 4)
Error in while (length(readln <- readLines(f.con, 1)) > 0) { : 
	missing value where logical needed

The "if(...) next" line seems to be the source of the problem, but the error
message and the behaviour of browser() really throw me off.  Can you shed
some light on this?  (I have a hunch that I'm missing something *real*
obvious...)

Regards,
Andy



> -----Original Message-----
> From: Robert Gentleman [mailto:rgentlem at jimmy.harvard.edu]
> Sent: Tuesday, October 02, 2001 9:50 AM
> To: Liaw, Andy
> Subject: Re: [R] file connection, while, readLines and browser
> 
> 
> On Tue, Oct 02, 2001 at 09:28:49AM -0400, Liaw, Andy wrote:
> > Dear R-help,
> > 
> > I have one more question about the functions mentioned in 
> the subject.
> > Again, the system info is:
> > platform i386-pc-mingw32
> > arch     x86            
> > os       Win32          (OK, it's NT4sp6)
> > system   x86, Win32     
> > status                  
> > major    1              
> > minor    3.1            
> > year     2001           
> > month    08             
> > day      31             
> > language R              
> > 
> > I defined a function like the following:
> > 
> > myfun <- function(file, maxline) {
> >   f.con <- file(file, open="rt")
> >   on.exit(close(f.con))
> >   while(length(readln <- readLines(f.con, 1)) > 0 ) {
> >     ## Do something with readln...
> >   }
> >   ## Do something more...
> > }
> > 
> > This didn't work for me.  It gave me an error at the while 
> statement, saying
> > "NA where logical needed".  I inserted a browser() right 
> inside the while
> > loop and have it step through the function.  It seems to be 
> stuck at the
> > first line of the file and never move down.  This behaviour 
> is different
> > from the call without the browser().  Anyone has ideas why 
> this is the case?
> > 
> 
>  It seems to work for me. Are you sure that's what you did? It is best
>  not to edit anything, get a simple example that shows the error and
>  post that. It makes for a lot less work for those of us that are
>  willing to look at it and it makes sure that we find the problem that
>  you are having.
> 
> 
> > What had worked for me is something like the following:
> >   repeat {
> >     readln <- readLines(f.con, 1)
> >     if(length(readln) == 0) break
> >     ## do something...
> >   }
> > 
> > Any suggestions are greatly appreciated.
> > 
> > Regards,
> > Andy
> > 
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: 
> r-help-request at stat.math.ethz.ch
> > 
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 
> -- 
> +-------------------------------------------------------------
> --------------+
> | Robert Gentleman                 phone : (617) 632-5250     
>               |
> | Associate Professor              fax:   (617)  632-2444     
>               |
> | Department of Biostatistics      office: M1B28
> | Harvard School of Public Health  email: 
> rgentlem at jimmy.dfci.harvard.edu   |
> +-------------------------------------------------------------
> --------------+
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Tue Oct  2 16:34:04 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Oct 2001 16:34:04 +0200
Subject: [R] Avoiding deep copies
In-Reply-To: <3BB9B15F.2090604@ai.univie.ac.at>
References: <3BB9B15F.2090604@ai.univie.ac.at>
Message-ID: <x28zeuun4z.fsf@blueberry.kubism.ku.dk>

Johann Petrak <johann at ai.univie.ac.at> writes:

> Is it correct that there is no way of avoiding deep copying
> of data structures? Or asked from a different perspective,
> is it true that there are no pointers? :)
> (not that I am a fan of pointer, they just let me
> decide when to do deep copy on my own when the
> memory manager doesnt do it for me :) )
> 
> I was considering writing code in R that would need
> the internal representation of complex graph structures
> where several nodes in the graph point to the same
> huge array of data.
> Now, obviously one cannot just do something like
> attr(thenode,"mydatavec")<-thedatavec or
> thenode$mydatavec<-thedatavec
> since all the data in thedatavec will be copied
> with this assignment.
> Are there commonly accepted/used workarounds?

Some ideas are being bandied about on this issue, but it isn't all
that easy. We've had the .Alias mechanism for a while, but it is
a very dirty hack, and people are wanting to remove it.

You could have a look at Luke Tierney's notes on this and related
matters if you care: 

http://www.stat.umn.edu/~luke/R/simpleref.html

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From amaitour at pasteur.fr  Tue Oct  2 16:51:28 2001
From: amaitour at pasteur.fr (Aboubakar Maitournam)
Date: Tue, 02 Oct 2001 16:51:28 +0200
Subject: [R] Problems about packages
Message-ID: <3BB9D46F.66C31535@pasteur.fr>

Dear everybody!

I have installed some packages as mclust_1.1-4.tar.gz by loading them
from CRAN. Apparently it's OK because when I open a R session
(under linux) and when I m doing library(), the packages are included
correctly in the library.
But when I try to load the library , for example : library(mclust)
I have the instruction :Segmentation fault (core dumped) and I was
rejected out of R session. (
I don't see where the problem is(of memory probably).

Thanks in advance.

A. Maitournam.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-

r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch

_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From johann at ai.univie.ac.at  Tue Oct  2 17:08:50 2001
From: johann at ai.univie.ac.at (Johann Petrak)
Date: Tue, 02 Oct 2001 17:08:50 +0200
Subject: [R] Accessing just the value of an object but not the attributes
Message-ID: <3BB9D882.1010602@ai.univie.ac.at>

I have the feeling that this is a dumb question but oh well ...
When I have an object x with several attributes,
y <- x will make a copy of x with all the attributes included.
What if I just want y to get the value assigned but nothing
else (no class, names, dim or other attributes)?

Johann

-- 
Phone/FAX/Adr/PGPkey ... at http://www.ai.univie.ac.at/~johann

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Tue Oct  2 17:21:02 2001
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Tue, 2 Oct 2001 17:21:02 +0200
Subject: [R] Accessing just the value of an object but not the attributes
In-Reply-To: <3BB9D882.1010602@ai.univie.ac.at>
References: <3BB9D882.1010602@ai.univie.ac.at>
Message-ID: <15289.56158.773396.601767@gargle.gargle.HOWL>

>>>>> "Johann" == Johann Petrak <johann at ai.univie.ac.at> writes:

    Johann> I have the feeling that this is a dumb question but oh well ...
no, actually not at all dumb

    Johann> When I have an object x with several attributes, y <- x will
    Johann> make a copy of x with all the attributes included.  What if I
    Johann> just want y to get the value assigned but nothing else (no
    Johann> class, names, dim or other attributes)?

The answer -- `unfortunately' IMHO --- 
is  as.vector() :

>> Description:
>> 
>>      `vector' .......
>> 
>>      `as.vector', a generic, attempts to coerce its argument into a
>>      vector of mode `mode' (the default is to coerce to whichever mode
>>      is most convenient).  The attributes of `x' are removed.
	                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

"unfortunately" : 
		IMO, a vector with attributes is still a vector, particularly
		if these are just names.. hence as.vector() should leave it
		alone, but -- alas -- it's for compatibility reasons too
		important to be changed. 
So even if a new  dropattributes() function would do what as.vector() does
now, it would break too much code if as.vector() was changed...
Note that "unfortunately" is my personal opinion, not a general R core one.

Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Tue Oct  2 17:31:42 2001
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Tue, 2 Oct 2001 17:31:42 +0200
Subject: [R] generic default values
In-Reply-To: <3BB89CAC.1750B551@bank-banque-canada.ca>
References: <3BB89CAC.1750B551@bank-banque-canada.ca>
Message-ID: <15289.56798.325976.912544@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert at bank-banque-canada.ca> writes:

    PaulG> I have a generic function test.equal <- function(obj1, obj2,
    PaulG> ...) UseMethod("test.equal")

    PaulG> however, the only argument that specific methods use is "fuzz"
    PaulG> so I would like to change this to

    PaulG> test.equal <- function(obj1, obj2, fuzz=???)
    PaulG> UseMethod("test.equal")

    PaulG> The problem is that some methods use slightly different default
    PaulG> values for fuzz than others. How should the generic be specified
    PaulG> to allow this?

I think ``anything goes'' since the default is taken from the method, not
the generic anyway.  
I would use "NULL" , as in the following example :

  > test.equal <- function(obj1, obj2, fuzz= NULL) UseMethod("test.equal")

  > test.equal.foo <- function(obj1, obj2, fuzz= 1e-10) {
  +     cat("`test.equal.foo(*): fuzz =", format(fuzz),"\n")
  +     fuzz
  + }    

  > foo <- function(x) { y <- x; class(y) <- "foo"; y }

  > test.equal(foo(1), foo(2))
  `test.equal.foo(*): fuzz = 1e-10 
  [1] 1e-10
  > 

BTW: In R-devel (which you seem to be using, Paul), i.e., from R version 1.4,
     (as in S version 4, and by the same author!),
     there is the generic function

  identical()
 
for comparing objects. Of course, ``identical'' implies that no fuzz can be
used. 

Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From johann at ai.univie.ac.at  Tue Oct  2 17:32:25 2001
From: johann at ai.univie.ac.at (Johann Petrak)
Date: Tue, 02 Oct 2001 17:32:25 +0200
Subject: [R] Accessing just the value of an object but not the attributes
References: <3BB9D882.1010602@ai.univie.ac.at> <15289.56158.773396.601767@gargle.gargle.HOWL>
Message-ID: <3BB9DE09.40408@ai.univie.ac.at>

I see the role of as.vector().
But even if as.vector() needs to keep its attribute-dropping
side-effect for compatibility reasons, wouldn't
a dropattr() still be a good idea?
For instance, I can assign attributes to closures, but
wont get rid of them using as.vector() - and neither
using as.function() by the way ...
So if I dont know in advance what kind of object it is
and I do want to just access the "value" in any case
I have to check the type ... ?


Johann

Martin Maechler wrote:

> [...]
> 
> "unfortunately" : 
> 		IMO, a vector with attributes is still a vector, particularly
> 		if these are just names.. hence as.vector() should leave it
> 		alone, but -- alas -- it's for compatibility reasons too
> 		important to be changed. 
> So even if a new  dropattributes() function would do what as.vector() does
> now, it would break too much code if as.vector() was changed...
> Note that "unfortunately" is my personal opinion, not a general R core one.
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Tue Oct  2 18:00:23 2001
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Tue, 2 Oct 2001 18:00:23 +0200
Subject: [R] Accessing just the value of an object but not the attributes
In-Reply-To: <3BB9DE09.40408@ai.univie.ac.at>
References: <3BB9D882.1010602@ai.univie.ac.at>
	<15289.56158.773396.601767@gargle.gargle.HOWL>
	<3BB9DE09.40408@ai.univie.ac.at>
Message-ID: <15289.58519.404154.948554@gargle.gargle.HOWL>

>>>>> "Johann" == Johann Petrak <johann at ai.univie.ac.at> writes:

    Johann> I see the role of as.vector().  But even if as.vector() needs
    Johann> to keep its attribute-dropping side-effect for compatibility
    Johann> reasons, wouldn't a dropattr() still be a good idea?  For
    Johann> instance, I can assign attributes to closures, but wont get rid
    Johann> of them using as.vector() - and neither using as.function() by
    Johann> the way ...  So if I dont know in advance what kind of object
    Johann> it is and I do want to just access the "value" in any case I
    Johann> have to check the type ... ?

Continuing another example from R-help, where

  > foo <- function(x) { y <- x; class(y) <- "foo"; y }

Let's try

  > attr(foo,"myattr") <- "my attribute"
  > foo
  function(x) { y <- x; class(y) <- "foo"; y }
  attr(,"myattr")
  [1] "my attribute"
  > as.vector(foo, mode="function")
  function (x) 
  {
      y <- x
      class(y) <- "foo"
      y
  }
  > 

So, that *does* work for functions, and you would think

    dropAttributes <- function(x) as.vector(x, mode = mode(x))

should work in most cases {but not for environments() or stranger things
like promisses ..}. 

The reason:  "vector" is used -- and confused --
in S (the language, R being one implementation)
in at least too fundamentally different ways :

  1) an atomic vector {numeric, character,..}

  2) a "generic" vector.  List()s and expression()s being generic vectors, too.

However, as a matter of fact, as.vector() doesn't drop attributes for list()s.
{not caring if this could be considered a bug or not; as you know, "me thinks"
 particularly about as.vector() ..}

There, and in general you could use

    dropAttributesDANGER <- function(x) {attributes(x) <- NULL ; x}

the "DANGER" lying in the fact that you *do* lose all attributes, including
    dim, class, names, dimnames, ...
which might entail that  dropAttributesDANGER(obj) might print tons of lines
since print.default() is used instead of  print.<class of obj>().

If, instead, you'd use proper OO techniques, you'd have a class "foobar" and
a `value()' (say) generic with a method for your class, i.e.
   value.foobar <- function(x) {attributes(x) <- NULL ; x}

and in your code, you'd use  ` value(myspecialobject) '

BTW: Yes,   function(x) {attributes(x) <- NULL ; x}
 could probably made memory-efficient (no copying) by making it
 .Internal(); however, I don't know if it's worth it.
          

    Johann> Martin Maechler wrote:

    >> [...]
    >> 
    >> "unfortunately" : IMO, a vector with attributes is still a vector,
    >> particularly if these are just names.. hence as.vector() should
    >> leave it alone, but -- alas -- it's for compatibility reasons too
    >> important to be changed.  So even if a new dropattributes() function
    >> would do what as.vector() does now, it would break too much code if
    >> as.vector() was changed...  Note that "unfortunately" is my personal
    >> opinion, not a general R core one.

Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andys at neptuneandco.com  Tue Oct  2 18:26:10 2001
From: andys at neptuneandco.com (Andrew Schuh)
Date: Tue, 02 Oct 2001 10:26:10 -0600
Subject: [R] R and Java
References: <3BB99A45.7405CDBE@inrialpes.fr>
Message-ID: <3BB9EAA2.1A2834BB@neptuneandco.com>

Olivier Martin wrote:

> Daer all,
>
> Before to expose my problem, this the configuartion of my environment.
>
> I use the version 1.2.1 of R  with a  limux system (redhat)
>
> I have installed SJava  (from omeghat) package successfully.
> So, i wanted to try an example (calc.R) that is provided in the
> library.
> This is the message I obtained:
> Error in isJavaInitialized("Java virtual machine has not been
> initialized. Call .JavaInit
> Java virtual machine has not been initialized. Call .JavaInit()
>
> So, i tried .JavaInit() but i obtained Segmentation fault (core
> dumped)
>
> Could somebody  help me ?
> Thanks,
> Olivier
>
> --
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> Olivier MARTIN
> PhD student                  phone: (33) 04 76 61 53 55
> Projet IS2                               06 08 67 93 42
> INRIA Rhone-Alpes            fax  : (33) 04 76 61 54 77
> 655, Av. de l'Europe
> Montbonnot                   e-mail:olivier.martin at inrialpes.fr
> 38334 Saint Ismier cedex
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>
>

I finally got it running (sorta) on my RH7.1.  I would make sure you
have the latest package from Omegahat first.  Then, I believe the  most
likely culprit is the LD_LIBRARY_PATH env variable.  Mine includes the
following (my bash profile).


LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:/usr/local/lib/R/library/SJava/libs:/opt/IBMJava2-13/jre/bin:

/opt/IBMJava2-13/jre/bin/classic:/usr/lib:/usr/local/lib/R/bin:/usr/local/lib/R/library/SJava/org/omegahat/Jars/ROmegahatExamples.jar:.;
export LD_LIBRARY_PATH

You can replace the java directories with the jdk you are using.  Also
make sure that error messages aren't pointing you to a '.so' (in the
libs directory of SJava) that you don't have.  I had to rename one of
them in an earlier version of the SJava package.

Even with this, I am only able to run an example after I run java at
least once.  I would open the BASH shell and run any java class and then
open R and be able to run the examples (
library(SJava);.JavaInit();source(....example.r);example.r();  )  .
This makes it a little difficult to use the package (or at the least,
inelegant) by running R in batch.  I have had a lot of difficulty
creating any original code with this package.  My goal was to create
some original code to allow me to run a java app that called R.  Not
much luck.  I put a message out some time ago but I haven't had much
luck getting responses.  If anyone out there has had any luck using this
package with Redhat and IBM JDK please let me know.  Hope this helps.

For the future, the omegahat help list would probably be a better place
to put this.  Although I realize that list doesn't get nearly as much
feedback as this one.


--
Andrew Schuh
Environmental Mathematician

Neptune and Co, Inc.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20011002/5618bdd2/attachment.html

From tlumley at u.washington.edu  Tue Oct  2 18:51:54 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue, 2 Oct 2001 09:51:54 -0700 (PDT)
Subject: [R] R and Java
In-Reply-To: <3BB9EAA2.1A2834BB@neptuneandco.com>
Message-ID: <Pine.A41.4.33.0110020947200.158656-100000@homer06.u.washington.edu>

On Tue, 2 Oct 2001, Andrew Schuh wrote:

> I finally got it running (sorta) on my RH7.1.  I would make sure you
> have the latest package from Omegahat first.  Then, I believe the  most
> likely culprit is the LD_LIBRARY_PATH env variable.  Mine includes the
> following (my bash profile).
>
>
> LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:/usr/local/lib/R/library/SJava/libs:/opt/IBMJava2-13/jre/bin:
>
> /opt/IBMJava2-13/jre/bin/classic:/usr/lib:/usr/local/lib/R/bin:/usr/local/lib/R/library/SJava/org/omegahat/Jars/ROmegahatExamples.jar:.;
> export LD_LIBRARY_PATH
>
> You can replace the java directories with the jdk you are using.  Also
> make sure that error messages aren't pointing you to a '.so' (in the
> libs directory of SJava) that you don't have.  I had to rename one of
> them in an earlier version of the SJava package.
>
> Even with this, I am only able to run an example after I run java at
> least once.  I would open the BASH shell and run any java class and then
> open R and be able to run the examples (
> library(SJava);.JavaInit();source(....example.r);example.r();  )  .
> This makes it a little difficult to use the package (or at the least,
> inelegant) by running R in batch.  I have had a lot of difficulty
> creating any original code with this package.  My goal was to create
> some original code to allow me to run a java app that called R.  Not
> much luck.  I put a message out some time ago but I haven't had much
> luck getting responses.  If anyone out there has had any luck using this
> package with Redhat and IBM JDK please let me know.  Hope this helps.


It works (at least works better) when the .JavaInit() call specifies all
the classpaths you are going to use


The following snippet is from a demonstration that worked (even in front
of other people) under Windows. An earlier version with Unix path names
also worked under Debian, but I haven't tried that recently.


library(SJava)
##set up paths
orcaHomeDir<-"C:/Program Files/R/rw1030/library/orcaR/"
orcaHomeOrcaJar <- paste(orcaHomeDir,"exec/orca.jar",sep="")
orcaHomeVisADJar <- paste(orcaHomeDir,"exec/visad.jar",sep="")
orcaHomeGrappaJar <- paste(orcaHomeDir,"exec/grappalite.jar",sep="")
orcaHomeJaxpJar <- paste(orcaHomeDir,"exec/jaxp.jar",sep="")
orcaHomeParserJar <- paste(orcaHomeDir,"exec/parser.jar",sep="")
orcaClasses <- c(orcaHomeOrcaJar,orcaHomeVisADJar,
                 orcaHomeGrappaJar,orcaHomeJaxpJar,orcaHomeParserJar)
## Initialize JVM
.JavaInit(list(classPath=orcaClasses))
## Verify JVM
.Java("System", "getProperty", "java.class.path")


## Same example
TaoDataFile     <- paste(orcaHomeDir,"data/orca.tao.time",sep="")
TaoDataGroupVar  <- "Group"
TaoDataTimeVar <- "Time"

od.1 <- .Java("org.orca.data.parsers.OrcaDataSource",
              "openFileData",
              TaoDataFile,
              .name="od");



     -thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andy_liaw at merck.com  Tue Oct  2 20:54:16 2001
From: andy_liaw at merck.com (Liaw, Andy)
Date: Tue, 02 Oct 2001 14:54:16 -0400
Subject: problem with while loop with next (was RE: [R] file connection,
 w	hile, readLines and browser)
Message-ID: <51F9C42DA15CD311BD220008C707D81903DC82BE@usrymx10.merck.com>

Dear R-help,

I think I have kinda isolated the problem I had to the following:

i <- 0
while( {i <- i + 1} < 5) {
  if(i < 3) next
  print(i)
}

This seems to go into an infinite loop.  After I break the execution, i has
the value 1.

At the R prompt, if I start from i <- 0 and keep typing {i <- i + 1} < 5, it
eventually evaluate to TRUE.  So why does the while loop not work?

(BTW, the same while loop runs as I expected in Splus 6.0.3 on WinNT.)

Any hints?  I'd really appreciate the help!

Cheers,
Andy


> -----Original Message-----
> From: Liaw, Andy [mailto:andy_liaw at merck.com]
> Sent: Tuesday, October 02, 2001 10:30 AM
> To: 'Robert Gentleman'
> Cc: r-help (E-mail)
> Subject: An example (was RE: [R] file connection, while, readLines and
> bro wser)
> 
> 
> Prof. Gentleman (and R-help),
> 
> Here's an example of what didn't work.  I still don't understand why.
> 
> Function:
> trycon <- function(file, n) {
>   f.con <- file(file, open="rt")
>   on.exit(close(f.con))
>   i <- 0
>   while( length(readln <- readLines(f.con, 1)) > 0 ) {
>     x <- unlist(strsplit(readln, " "))
>     if(length(x) <= 6 && x[3] == x[4]) next
>     i <- i + 1
>   }
>   return(invisible())
> }
> 
> Data file:
> 1 0.00 ABC ABC 1.00 0 
> 2 0.00 DEF DEF 1.00 0 CDE 1.00 0 XYZ 0.72 0 
> 3 0.00 abc abc 1.00 0 ghi 1.00 0 stu 0.72 0 lmn 0.80 0 
> 
> R call:
> trycon("C:/home/data.txt", 4)
> Error in while (length(readln <- readLines(f.con, 1)) > 0) { : 
> 	missing value where logical needed
> 
> The "if(...) next" line seems to be the source of the 
> problem, but the error
> message and the behaviour of browser() really throw me off.  
> Can you shed
> some light on this?  (I have a hunch that I'm missing something *real*
> obvious...)
> 
> Regards,
> Andy
> 
> 
> 
> > -----Original Message-----
> > From: Robert Gentleman [mailto:rgentlem at jimmy.harvard.edu]
> > Sent: Tuesday, October 02, 2001 9:50 AM
> > To: Liaw, Andy
> > Subject: Re: [R] file connection, while, readLines and browser
> > 
> > 
> > On Tue, Oct 02, 2001 at 09:28:49AM -0400, Liaw, Andy wrote:
> > > Dear R-help,
> > > 
> > > I have one more question about the functions mentioned in 
> > the subject.
> > > Again, the system info is:
> > > platform i386-pc-mingw32
> > > arch     x86            
> > > os       Win32          (OK, it's NT4sp6)
> > > system   x86, Win32     
> > > status                  
> > > major    1              
> > > minor    3.1            
> > > year     2001           
> > > month    08             
> > > day      31             
> > > language R              
> > > 
> > > I defined a function like the following:
> > > 
> > > myfun <- function(file, maxline) {
> > >   f.con <- file(file, open="rt")
> > >   on.exit(close(f.con))
> > >   while(length(readln <- readLines(f.con, 1)) > 0 ) {
> > >     ## Do something with readln...
> > >   }
> > >   ## Do something more...
> > > }
> > > 
> > > This didn't work for me.  It gave me an error at the while 
> > statement, saying
> > > "NA where logical needed".  I inserted a browser() right 
> > inside the while
> > > loop and have it step through the function.  It seems to be 
> > stuck at the
> > > first line of the file and never move down.  This behaviour 
> > is different
> > > from the call without the browser().  Anyone has ideas why 
> > this is the case?
> > > 
> > 
> >  It seems to work for me. Are you sure that's what you did? 
> It is best
> >  not to edit anything, get a simple example that shows the error and
> >  post that. It makes for a lot less work for those of us that are
> >  willing to look at it and it makes sure that we find the 
> problem that
> >  you are having.
> > 
> > 
> > > What had worked for me is something like the following:
> > >   repeat {
> > >     readln <- readLines(f.con, 1)
> > >     if(length(readln) == 0) break
> > >     ## do something...
> > >   }
> > > 
> > > Any suggestions are greatly appreciated.
> > > 
> > > Regards,
> > > Andy
> > > 
> > > 
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-.-.-.-.-.-.-.-
> > > r-help mailing list -- Read 
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To: 
> > r-help-request at stat.math.ethz.ch
> > > 
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._._._._._._._._
> > 
> > -- 
> > +-------------------------------------------------------------
> > --------------+
> > | Robert Gentleman                 phone : (617) 632-5250     
> >               |
> > | Associate Professor              fax:   (617)  632-2444     
> >               |
> > | Department of Biostatistics      office: M1B28
> > | Harvard School of Public Health  email: 
> > rgentlem at jimmy.dfci.harvard.edu   |
> > +-------------------------------------------------------------
> > --------------+
> > 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-help mailing list -- Read 
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From luke at nokomis.stat.umn.edu  Tue Oct  2 21:36:06 2001
From: luke at nokomis.stat.umn.edu (Luke Tierney)
Date: Tue, 2 Oct 2001 14:36:06 -0500
Subject: problem with while loop with next (was RE: [R] file connection, w	hile, readLines and browser)
In-Reply-To: <51F9C42DA15CD311BD220008C707D81903DC82BE@usrymx10.merck.com>; from andy_liaw@merck.com on Tue, Oct 02, 2001 at 02:54:16PM -0400
References: <51F9C42DA15CD311BD220008C707D81903DC82BE@usrymx10.merck.com>
Message-ID: <20011002143606.B22235@nokomis.stat.umn.edu>

It does look like `next' does not work properly with while loops in
versions through 1.3.1.  We did some reorganizing of looping internals
in the development branch and that fixed the problem, so it will be
fixed in 1.4.

luke

On Tue, Oct 02, 2001 at 02:54:16PM -0400, Liaw, Andy wrote:
> Dear R-help,
> 
> I think I have kinda isolated the problem I had to the following:
> 
> i <- 0
> while( {i <- i + 1} < 5) {
>   if(i < 3) next
>   print(i)
> }
> 
> This seems to go into an infinite loop.  After I break the execution, i has
> the value 1.
> 
> At the R prompt, if I start from i <- 0 and keep typing {i <- i + 1} < 5, it
> eventually evaluate to TRUE.  So why does the while loop not work?
> 
> (BTW, the same while loop runs as I expected in Splus 6.0.3 on WinNT.)
> 
> Any hints?  I'd really appreciate the help!
> 
> Cheers,
> Andy
> 
> 
> > -----Original Message-----
> > From: Liaw, Andy [mailto:andy_liaw at merck.com]
> > Sent: Tuesday, October 02, 2001 10:30 AM
> > To: 'Robert Gentleman'
> > Cc: r-help (E-mail)
> > Subject: An example (was RE: [R] file connection, while, readLines and
> > bro wser)
> > 
> > 
> > Prof. Gentleman (and R-help),
> > 
> > Here's an example of what didn't work.  I still don't understand why.
> > 
> > Function:
> > trycon <- function(file, n) {
> >   f.con <- file(file, open="rt")
> >   on.exit(close(f.con))
> >   i <- 0
> >   while( length(readln <- readLines(f.con, 1)) > 0 ) {
> >     x <- unlist(strsplit(readln, " "))
> >     if(length(x) <= 6 && x[3] == x[4]) next
> >     i <- i + 1
> >   }
> >   return(invisible())
> > }
> > 
> > Data file:
> > 1 0.00 ABC ABC 1.00 0 
> > 2 0.00 DEF DEF 1.00 0 CDE 1.00 0 XYZ 0.72 0 
> > 3 0.00 abc abc 1.00 0 ghi 1.00 0 stu 0.72 0 lmn 0.80 0 
> > 
> > R call:
> > trycon("C:/home/data.txt", 4)
> > Error in while (length(readln <- readLines(f.con, 1)) > 0) { : 
> > 	missing value where logical needed
> > 
> > The "if(...) next" line seems to be the source of the 
> > problem, but the error
> > message and the behaviour of browser() really throw me off.  
> > Can you shed
> > some light on this?  (I have a hunch that I'm missing something *real*
> > obvious...)
> > 
> > Regards,
> > Andy
> > 
> > 
> > 
> > > -----Original Message-----
> > > From: Robert Gentleman [mailto:rgentlem at jimmy.harvard.edu]
> > > Sent: Tuesday, October 02, 2001 9:50 AM
> > > To: Liaw, Andy
> > > Subject: Re: [R] file connection, while, readLines and browser
> > > 
> > > 
> > > On Tue, Oct 02, 2001 at 09:28:49AM -0400, Liaw, Andy wrote:
> > > > Dear R-help,
> > > > 
> > > > I have one more question about the functions mentioned in 
> > > the subject.
> > > > Again, the system info is:
> > > > platform i386-pc-mingw32
> > > > arch     x86            
> > > > os       Win32          (OK, it's NT4sp6)
> > > > system   x86, Win32     
> > > > status                  
> > > > major    1              
> > > > minor    3.1            
> > > > year     2001           
> > > > month    08             
> > > > day      31             
> > > > language R              
> > > > 
> > > > I defined a function like the following:
> > > > 
> > > > myfun <- function(file, maxline) {
> > > >   f.con <- file(file, open="rt")
> > > >   on.exit(close(f.con))
> > > >   while(length(readln <- readLines(f.con, 1)) > 0 ) {
> > > >     ## Do something with readln...
> > > >   }
> > > >   ## Do something more...
> > > > }
> > > > 
> > > > This didn't work for me.  It gave me an error at the while 
> > > statement, saying
> > > > "NA where logical needed".  I inserted a browser() right 
> > > inside the while
> > > > loop and have it step through the function.  It seems to be 
> > > stuck at the
> > > > first line of the file and never move down.  This behaviour 
> > > is different
> > > > from the call without the browser().  Anyone has ideas why 
> > > this is the case?
> > > > 
> > > 
> > >  It seems to work for me. Are you sure that's what you did? 
> > It is best
> > >  not to edit anything, get a simple example that shows the error and
> > >  post that. It makes for a lot less work for those of us that are
> > >  willing to look at it and it makes sure that we find the 
> > problem that
> > >  you are having.
> > > 
> > > 
> > > > What had worked for me is something like the following:
> > > >   repeat {
> > > >     readln <- readLines(f.con, 1)
> > > >     if(length(readln) == 0) break
> > > >     ## do something...
> > > >   }
> > > > 
> > > > Any suggestions are greatly appreciated.
> > > > 
> > > > Regards,
> > > > Andy
> > > > 
> > > > 
> > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > > -.-.-.-.-.-.-.-.-
> > > > r-help mailing list -- Read 
> > > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > > Send "info", "help", or "[un]subscribe"
> > > > (in the "body", not the subject !)  To: 
> > > r-help-request at stat.math.ethz.ch
> > > > 
> > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > > _._._._._._._._._
> > > 
> > > -- 
> > > +-------------------------------------------------------------
> > > --------------+
> > > | Robert Gentleman                 phone : (617) 632-5250     
> > >               |
> > > | Associate Professor              fax:   (617)  632-2444     
> > >               |
> > > | Department of Biostatistics      office: M1B28
> > > | Harvard School of Public Health  email: 
> > > rgentlem at jimmy.dfci.harvard.edu   |
> > > +-------------------------------------------------------------
> > > --------------+
> > > 
> > 
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke at stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tdlong at uci.edu  Tue Oct  2 21:59:08 2001
From: tdlong at uci.edu (Tony Long)
Date: Tue, 2 Oct 2001 12:59:08 -0700
Subject: [R] default library locations under Linux
Message-ID: <p05001900b7dfca9786ea@[128.200.28.179]>

All:

I am attempting to allow multiple users on a linux system use some 
common functions.  The problem I am having is that for some users 
their default library location is

.lib.loc = "/usr/lib/R/library"

whereas for other users it is

.lib.loc = "/usr/local/lib/R/library"

It seems as though the packages (for example cluster) load fine if I 
just change .lib.loc to "usr/lib/R/library"  but when I go to run the 
functions I get additional errors like:

Error in .fortran("pam",as.integer(n), ...:  C/Fortran function name 
not in load table

I suspect I don't have a clue how to global "synchronize" my linux 
installation of R so that all users see the same packages (clearly 
just changing .lib.loc doesn't do the trick), and I have to do it at 
a "higher" level than the .lib.loc.

I think it is likely the whole problem stems from how I installed 
these packages.  Namely being in my personal account as su, starting 
R, and using the install.packages() {this function is cool to the 
point of being dangerous}.  Maybe I should be running the 
install.packages option from another directory.  Any advice here 
would also be appreciated.

Any suggestions.  Tony
-- 

Tony Long

Ecology and Evolutionary Biology
Steinhaus Hall
University of California at Irvine
Irvine, CA
92697-2525

Tel:  (949) 824-2562   (office)
Tel:  (949) 824-5994   (lab)
Fax: (949) 824-2181

email:  tdlong at uci.edu
http://hjmuller.bio.uci.edu/~labhome/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From monnie at xena.hunter.cuny.edu  Mon Oct  1 23:19:40 2001
From: monnie at xena.hunter.cuny.edu (Monnie McGee)
Date: Mon, 01 Oct 2001 17:19:40 -0400
Subject: [R] Installing R-1.3.1 on Solaris 2.7
Message-ID: <Version.32.20011001171701.00dec4f0@xena.hunter.cuny.edu>

Dear All - 

I tried to install R-1.3.1 on a Ultrasparc 10 running Solaris 2.7.  I have
followed the directions in the INSTALL file exactly, but R refuses to
create the file R.bin.  I also had someone else, who is better with UNIX
than I am, try the installation.  It didn't create the R.bin file for him,
either.  As a result, I cannot run R, even after going through the
installation process.

Help!

Regards,
Monnie McGee

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andy_liaw at merck.com  Tue Oct  2 22:20:36 2001
From: andy_liaw at merck.com (Liaw, Andy)
Date: Tue, 02 Oct 2001 16:20:36 -0400
Subject: [R] RE: problem with while loop with next
Message-ID: <51F9C42DA15CD311BD220008C707D81903DC82C0@usrymx10.merck.com>

Prof. Tierney,

Thanks very much for the info.  

Why does the loop work if I move the assignment out of the condition?  E.g.,
the following works:

i <- 0
while(i < 5) {
  i <- i + 1
  if(i < 3) next
  print(i)
}

Regards,
Andy

> -----Original Message-----
> From: Luke Tierney [mailto:luke at nokomis.stat.umn.edu]
> Sent: Tuesday, October 02, 2001 3:36 PM
> To: Liaw, Andy
> Cc: r-help (E-mail)
> Subject: Re: problem with while loop with next (was RE: [R] file
> connection, w hile, readLines and browser)
> 
> 
> It does look like `next' does not work properly with while loops in
> versions through 1.3.1.  We did some reorganizing of looping internals
> in the development branch and that fixed the problem, so it will be
> fixed in 1.4.
> 
> luke
> 
> On Tue, Oct 02, 2001 at 02:54:16PM -0400, Liaw, Andy wrote:
> > Dear R-help,
> > 
> > I think I have kinda isolated the problem I had to the following:
> > 
> > i <- 0
> > while( {i <- i + 1} < 5) {
> >   if(i < 3) next
> >   print(i)
> > }
> > 
> > This seems to go into an infinite loop.  After I break the 
> execution, i has
> > the value 1.
> > 
> > At the R prompt, if I start from i <- 0 and keep typing {i 
> <- i + 1} < 5, it
> > eventually evaluate to TRUE.  So why does the while loop not work?
> > 
> > (BTW, the same while loop runs as I expected in Splus 6.0.3 
> on WinNT.)
> > 
> > Any hints?  I'd really appreciate the help!
> > 
> > Cheers,
> > Andy
> > 
> > 
> > > -----Original Message-----
> > > From: Liaw, Andy [mailto:andy_liaw at merck.com]
> > > Sent: Tuesday, October 02, 2001 10:30 AM
> > > To: 'Robert Gentleman'
> > > Cc: r-help (E-mail)
> > > Subject: An example (was RE: [R] file connection, while, 
> readLines and
> > > bro wser)
> > > 
> > > 
> > > Prof. Gentleman (and R-help),
> > > 
> > > Here's an example of what didn't work.  I still don't 
> understand why.
> > > 
> > > Function:
> > > trycon <- function(file, n) {
> > >   f.con <- file(file, open="rt")
> > >   on.exit(close(f.con))
> > >   i <- 0
> > >   while( length(readln <- readLines(f.con, 1)) > 0 ) {
> > >     x <- unlist(strsplit(readln, " "))
> > >     if(length(x) <= 6 && x[3] == x[4]) next
> > >     i <- i + 1
> > >   }
> > >   return(invisible())
> > > }
> > > 
> > > Data file:
> > > 1 0.00 ABC ABC 1.00 0 
> > > 2 0.00 DEF DEF 1.00 0 CDE 1.00 0 XYZ 0.72 0 
> > > 3 0.00 abc abc 1.00 0 ghi 1.00 0 stu 0.72 0 lmn 0.80 0 
> > > 
> > > R call:
> > > trycon("C:/home/data.txt", 4)
> > > Error in while (length(readln <- readLines(f.con, 1)) > 0) { : 
> > > 	missing value where logical needed
> > > 
> > > The "if(...) next" line seems to be the source of the 
> > > problem, but the error
> > > message and the behaviour of browser() really throw me off.  
> > > Can you shed
> > > some light on this?  (I have a hunch that I'm missing 
> something *real*
> > > obvious...)
> > > 
> > > Regards,
> > > Andy
> > > 
> > > 
> > > 
> > > > -----Original Message-----
> > > > From: Robert Gentleman [mailto:rgentlem at jimmy.harvard.edu]
> > > > Sent: Tuesday, October 02, 2001 9:50 AM
> > > > To: Liaw, Andy
> > > > Subject: Re: [R] file connection, while, readLines and browser
> > > > 
> > > > 
> > > > On Tue, Oct 02, 2001 at 09:28:49AM -0400, Liaw, Andy wrote:
> > > > > Dear R-help,
> > > > > 
> > > > > I have one more question about the functions mentioned in 
> > > > the subject.
> > > > > Again, the system info is:
> > > > > platform i386-pc-mingw32
> > > > > arch     x86            
> > > > > os       Win32          (OK, it's NT4sp6)
> > > > > system   x86, Win32     
> > > > > status                  
> > > > > major    1              
> > > > > minor    3.1            
> > > > > year     2001           
> > > > > month    08             
> > > > > day      31             
> > > > > language R              
> > > > > 
> > > > > I defined a function like the following:
> > > > > 
> > > > > myfun <- function(file, maxline) {
> > > > >   f.con <- file(file, open="rt")
> > > > >   on.exit(close(f.con))
> > > > >   while(length(readln <- readLines(f.con, 1)) > 0 ) {
> > > > >     ## Do something with readln...
> > > > >   }
> > > > >   ## Do something more...
> > > > > }
> > > > > 
> > > > > This didn't work for me.  It gave me an error at the while 
> > > > statement, saying
> > > > > "NA where logical needed".  I inserted a browser() right 
> > > > inside the while
> > > > > loop and have it step through the function.  It seems to be 
> > > > stuck at the
> > > > > first line of the file and never move down.  This behaviour 
> > > > is different
> > > > > from the call without the browser().  Anyone has ideas why 
> > > > this is the case?
> > > > > 
> > > > 
> > > >  It seems to work for me. Are you sure that's what you did? 
> > > It is best
> > > >  not to edit anything, get a simple example that shows 
> the error and
> > > >  post that. It makes for a lot less work for those of 
> us that are
> > > >  willing to look at it and it makes sure that we find the 
> > > problem that
> > > >  you are having.
> > > > 
> > > > 
> > > > > What had worked for me is something like the following:
> > > > >   repeat {
> > > > >     readln <- readLines(f.con, 1)
> > > > >     if(length(readln) == 0) break
> > > > >     ## do something...
> > > > >   }
> > > > > 
> > > > > Any suggestions are greatly appreciated.
> > > > > 
> > > > > Regards,
> > > > > Andy
> > > > > 
> > > > > 
> > > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > > > -.-.-.-.-.-.-.-.-
> > > > > r-help mailing list -- Read 
> > > > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > > > Send "info", "help", or "[un]subscribe"
> > > > > (in the "body", not the subject !)  To: 
> > > > r-help-request at stat.math.ethz.ch
> > > > > 
> > > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > > > _._._._._._._._._
> > > > 
> > > > -- 
> > > > +-------------------------------------------------------------
> > > > --------------+
> > > > | Robert Gentleman                 phone : (617) 632-5250     
> > > >               |
> > > > | Associate Professor              fax:   (617)  632-2444     
> > > >               |
> > > > | Department of Biostatistics      office: M1B28
> > > > | Harvard School of Public Health  email: 
> > > > rgentlem at jimmy.dfci.harvard.edu   |
> > > > +-------------------------------------------------------------
> > > > --------------+
> > > > 
> > > 
> > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > > -.-.-.-.-.-.-.-.-
> > > r-help mailing list -- Read 
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: 
> r-help-request at stat.math.ethz.ch
> > 
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._.
> > _._
> > 
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: 
> r-help-request at stat.math.ethz.ch
> > 
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 
> -- 
> Luke Tierney
> University of Minnesota                      Phone:           
> 612-625-7843
> School of Statistics                         Fax:             
> 612-624-8868
> 313 Ford Hall, 224 Church St. S.E.           email:      
> luke at stat.umn.edu
> Minneapolis, MN 55455 USA                    WWW:  
http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From elvis at xlsolutions-corp.com  Tue Oct  2 22:32:36 2001
From: elvis at xlsolutions-corp.com (Elvis Miller, PhD)
Date: Tue, 02 Oct 2001 16:32:36 -0400
Subject: [R] Course: R Programming in Boston - November 2001.
Message-ID: <200110022032.f92KWZD31581@badass.hosting-network.com>

XLSolutions Corporation (www.xlsolutions-corp.com) is pleased to 
announce a three-day R course, "R Fundamentals and Programming
Techniques" in:

Boston - November 28-30, 2001.

Cost for 3-day course:

Commercial $985
Academic $875

Payment due 7 days AFTER the class and Includes course materials, 
90 days Technical Support for R, snacks and continental breakfast!)

PARTICIPANTS TO OUR CLASSES ARE ALWAYS PROVIDED WITH A COMPUTER!

R is a freely available implementation of the S language and 
environment, 
for statistical computing and graphics similar to the commercial 
S-PLUS. 
You can download a copy of R software (Windows, Mac, Unix & Linux) 
from http://cran.r-project.org.

Course Description:

This three-day R course focuses on a broad spectrum of topics, from
reading raw data to a comparison of R, S and SAS. We will learn the 
essentials of data manipulation, graphical visualization and R 
programming. We will explore statistical data analysis tools, including 
graphics with data sets from areas such as Finance, Biopharm, 
manufacturing and E-commerce. However, participants are encouraged to
bring their own data for an interactive session with the trainer.


Registration and more information on outline and trainer: 



Email Sue Turner: sue at xlsolutions-corp.com
Phone: 206-686-1578 x221

Visit us: www.xlsolutions-corp.com/training.htm


Course Format:

This course consists of a series of short lectures with demonstrations 
and 
interactive sessions for the participants. Each student is provided 
with 
bound copies of the notes and a CD-ROM containing all examples, 
exercises and software used on the course.


Share Your Thoughts:

Are there any additional topics you would like for this course to 
address?
Would you like for this course to be offered in another city? 

Please let us know by contributing to our recommendation list: 
training at xlsolutions-corp.com.


================================================


Three-day R Fundamentals and Programming Techniques (Boston)

Pre-registration Form (Please email or print and fax: 206-686-1578)
XLsolutions Corporation: For your Solutions needs, Consulting and 
Training. www.xlsolutions-corp.com



Title...... First Name ................. Last Name....................

Organization..........................................................

Mailing Address....................................................... 

..............................................................

.............................................................

Zip Code...................... Country.............................

Telephone........................... Fax 
..............................

E-mail................................................................

Payment will be made by: (1) check (2) invoice (3) bank transfer

Sincerely

Elvis Miller, PhD
Manager Training and Technical Support
North American Division
XLSolutions Corporation
Email: elvis at xlsolutions-corp.com
Phone: 206-686-1578
Web: www.xlsolutions-corp.com


XLSolutions also offer customized private courses delivered by expert
trainers with a track teaching and training record in their fields.

XLSolutions Consulting Group meets your needs from design to 
development.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From luke at nokomis.stat.umn.edu  Tue Oct  2 22:32:33 2001
From: luke at nokomis.stat.umn.edu (Luke Tierney)
Date: Tue, 2 Oct 2001 15:32:33 -0500
Subject: [R] Re: problem with while loop with next
In-Reply-To: <51F9C42DA15CD311BD220008C707D81903DC82C0@usrymx10.merck.com>; from andy_liaw@merck.com on Tue, Oct 02, 2001 at 04:20:36PM -0400
References: <51F9C42DA15CD311BD220008C707D81903DC82C0@usrymx10.merck.com>
Message-ID: <20011002153233.C22235@nokomis.stat.umn.edu>

On Tue, Oct 02, 2001 at 04:20:36PM -0400, Liaw, Andy wrote:
> Prof. Tierney,
> 
> Thanks very much for the info.  
> 
> Why does the loop work if I move the assignment out of the condition?  E.g.,
> the following works:
> 
> i <- 0
> while(i < 5) {
>   i <- i + 1
>   if(i < 3) next
>   print(i)
> }
> 
> Regards,
> Andy

The bug in the code is that `next' causes a jump directly to
evaluating the body for the next iteration without first evaluating
the test expression.  That happens to be OK with this way of writing
the loop since there are no side effects in the condition and the
condition is always true if the jump occurs.

luke











> 
> > -----Original Message-----
> > From: Luke Tierney [mailto:luke at nokomis.stat.umn.edu]
> > Sent: Tuesday, October 02, 2001 3:36 PM
> > To: Liaw, Andy
> > Cc: r-help (E-mail)
> > Subject: Re: problem with while loop with next (was RE: [R] file
> > connection, w hile, readLines and browser)
> > 
> > 
> > It does look like `next' does not work properly with while loops in
> > versions through 1.3.1.  We did some reorganizing of looping internals
> > in the development branch and that fixed the problem, so it will be
> > fixed in 1.4.
> > 
> > luke
> > 
> > On Tue, Oct 02, 2001 at 02:54:16PM -0400, Liaw, Andy wrote:
> > > Dear R-help,
> > > 
> > > I think I have kinda isolated the problem I had to the following:
> > > 
> > > i <- 0
> > > while( {i <- i + 1} < 5) {
> > >   if(i < 3) next
> > >   print(i)
> > > }
> > > 
> > > This seems to go into an infinite loop.  After I break the 
> > execution, i has
> > > the value 1.
> > > 
> > > At the R prompt, if I start from i <- 0 and keep typing {i 
> > <- i + 1} < 5, it
> > > eventually evaluate to TRUE.  So why does the while loop not work?
> > > 
> > > (BTW, the same while loop runs as I expected in Splus 6.0.3 
> > on WinNT.)
> > > 
> > > Any hints?  I'd really appreciate the help!
> > > 
> > > Cheers,
> > > Andy
> > > 
> > > 
> > > > -----Original Message-----
> > > > From: Liaw, Andy [mailto:andy_liaw at merck.com]
> > > > Sent: Tuesday, October 02, 2001 10:30 AM
> > > > To: 'Robert Gentleman'
> > > > Cc: r-help (E-mail)
> > > > Subject: An example (was RE: [R] file connection, while, 
> > readLines and
> > > > bro wser)
> > > > 
> > > > 
> > > > Prof. Gentleman (and R-help),
> > > > 
> > > > Here's an example of what didn't work.  I still don't 
> > understand why.
> > > > 
> > > > Function:
> > > > trycon <- function(file, n) {
> > > >   f.con <- file(file, open="rt")
> > > >   on.exit(close(f.con))
> > > >   i <- 0
> > > >   while( length(readln <- readLines(f.con, 1)) > 0 ) {
> > > >     x <- unlist(strsplit(readln, " "))
> > > >     if(length(x) <= 6 && x[3] == x[4]) next
> > > >     i <- i + 1
> > > >   }
> > > >   return(invisible())
> > > > }
> > > > 
> > > > Data file:
> > > > 1 0.00 ABC ABC 1.00 0 
> > > > 2 0.00 DEF DEF 1.00 0 CDE 1.00 0 XYZ 0.72 0 
> > > > 3 0.00 abc abc 1.00 0 ghi 1.00 0 stu 0.72 0 lmn 0.80 0 
> > > > 
> > > > R call:
> > > > trycon("C:/home/data.txt", 4)
> > > > Error in while (length(readln <- readLines(f.con, 1)) > 0) { : 
> > > > 	missing value where logical needed
> > > > 
> > > > The "if(...) next" line seems to be the source of the 
> > > > problem, but the error
> > > > message and the behaviour of browser() really throw me off.  
> > > > Can you shed
> > > > some light on this?  (I have a hunch that I'm missing 
> > something *real*
> > > > obvious...)
> > > > 
> > > > Regards,
> > > > Andy
> > > > 
> > > > 
> > > > 
> > > > > -----Original Message-----
> > > > > From: Robert Gentleman [mailto:rgentlem at jimmy.harvard.edu]
> > > > > Sent: Tuesday, October 02, 2001 9:50 AM
> > > > > To: Liaw, Andy
> > > > > Subject: Re: [R] file connection, while, readLines and browser
> > > > > 
> > > > > 
> > > > > On Tue, Oct 02, 2001 at 09:28:49AM -0400, Liaw, Andy wrote:
> > > > > > Dear R-help,
> > > > > > 
> > > > > > I have one more question about the functions mentioned in 
> > > > > the subject.
> > > > > > Again, the system info is:
> > > > > > platform i386-pc-mingw32
> > > > > > arch     x86            
> > > > > > os       Win32          (OK, it's NT4sp6)
> > > > > > system   x86, Win32     
> > > > > > status                  
> > > > > > major    1              
> > > > > > minor    3.1            
> > > > > > year     2001           
> > > > > > month    08             
> > > > > > day      31             
> > > > > > language R              
> > > > > > 
> > > > > > I defined a function like the following:
> > > > > > 
> > > > > > myfun <- function(file, maxline) {
> > > > > >   f.con <- file(file, open="rt")
> > > > > >   on.exit(close(f.con))
> > > > > >   while(length(readln <- readLines(f.con, 1)) > 0 ) {
> > > > > >     ## Do something with readln...
> > > > > >   }
> > > > > >   ## Do something more...
> > > > > > }
> > > > > > 
> > > > > > This didn't work for me.  It gave me an error at the while 
> > > > > statement, saying
> > > > > > "NA where logical needed".  I inserted a browser() right 
> > > > > inside the while
> > > > > > loop and have it step through the function.  It seems to be 
> > > > > stuck at the
> > > > > > first line of the file and never move down.  This behaviour 
> > > > > is different
> > > > > > from the call without the browser().  Anyone has ideas why 
> > > > > this is the case?
> > > > > > 
> > > > > 
> > > > >  It seems to work for me. Are you sure that's what you did? 
> > > > It is best
> > > > >  not to edit anything, get a simple example that shows 
> > the error and
> > > > >  post that. It makes for a lot less work for those of 
> > us that are
> > > > >  willing to look at it and it makes sure that we find the 
> > > > problem that
> > > > >  you are having.
> > > > > 
> > > > > 
> > > > > > What had worked for me is something like the following:
> > > > > >   repeat {
> > > > > >     readln <- readLines(f.con, 1)
> > > > > >     if(length(readln) == 0) break
> > > > > >     ## do something...
> > > > > >   }
> > > > > > 
> > > > > > Any suggestions are greatly appreciated.
> > > > > > 
> > > > > > Regards,
> > > > > > Andy
> > > > > > 
> > > > > > 
> > > > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > > > > -.-.-.-.-.-.-.-.-
> > > > > > r-help mailing list -- Read 
> > > > > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > > > > Send "info", "help", or "[un]subscribe"
> > > > > > (in the "body", not the subject !)  To: 
> > > > > r-help-request at stat.math.ethz.ch
> > > > > > 
> > > > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > > > > _._._._._._._._._
> > > > > 
> > > > > -- 
> > > > > +-------------------------------------------------------------
> > > > > --------------+
> > > > > | Robert Gentleman                 phone : (617) 632-5250     
> > > > >               |
> > > > > | Associate Professor              fax:   (617)  632-2444     
> > > > >               |
> > > > > | Department of Biostatistics      office: M1B28
> > > > > | Harvard School of Public Health  email: 
> > > > > rgentlem at jimmy.dfci.harvard.edu   |
> > > > > +-------------------------------------------------------------
> > > > > --------------+
> > > > > 
> > > > 
> > > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > > > -.-.-.-.-.-.-.-.-
> > > > r-help mailing list -- Read 
> > > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To: 
> > r-help-request at stat.math.ethz.ch
> > > 
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._._._._._._.
> > > _._
> > > 
> > > 
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-.-.-.-.-.-.-.-
> > > r-help mailing list -- Read 
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To: 
> > r-help-request at stat.math.ethz.ch
> > > 
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._._._._._._._._
> > 
> > -- 
> > Luke Tierney
> > University of Minnesota                      Phone:           
> > 612-625-7843
> > School of Statistics                         Fax:             
> > 612-624-8868
> > 313 Ford Hall, 224 Church St. S.E.           email:      
> > luke at stat.umn.edu
> > Minneapolis, MN 55455 USA                    WWW:  
> http://www.stat.umn.edu
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._
> 

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke at stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From monnie at xena.hunter.cuny.edu  Wed Oct  3 00:23:26 2001
From: monnie at xena.hunter.cuny.edu (Monnie McGee)
Date: Tue, 02 Oct 2001 18:23:26 -0400
Subject: [R] Installing R-1.3.1 again
Message-ID: <200110022221.f92ML0x12518@xena.hunter.cuny.edu>

Dear All,

I have tried twice more to install R-1.3.1 on my sparc with no success.  I
thank you for the useful suggestions that were sent, even though they didn't
seem to help.

I am sorry that I was a bit cryptic in my last note.  Frankly, I didn't know
what information you needed, so I was waiting for someone to ask some
questions.  

I hope the following will answer your questions.  I kept a careful record of
everything that I did and all messages that I received while installing R.
The
main problem, I feel, is that R.bin is not being made for some reason.  I
haven't the foggiest idea why.

First I unpacked R-1.3.1.tgz in the directory /usr/local.  The first time I
tried the installation, I unpacked the file in my home directory on my sparc
machine.  Here are the commands that followed and the results from each
command:

cd R-1.3.1
su
# ./configure
R is now configured for sparc-sun-solaris2.7  
Source directory:          .  
Installation directory:    /usr/local  
C compiler:                gcc  -g -O2  
C++ compiler:              c++  -g -O2  
FORTRAN compiler:          g77  -g -O2  
X11 support:               yes  
Gnome support:             no  
Tcl/Tk support:            no  
R profiling support:       yes  
R as a shared library:     no
configure: warning: you cannot build info versions of the R manuals
# make          
make[3]: ar: Command not found
make[3]: *** [libappl.a] Error 127
make[3]: Leaving directory `/usr/local/R-1.3.1/src/appl'
make[2]: *** [R] Error 2
make[2]: Leaving directory `/usr/local/R-1.3.1/src/appl'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/usr/local/R-1.3.1/src'
make: *** [R] Error 1     
# make check
make[1]: Entering directory `/usr/local/R-1.3.1/tests'
make[2]: Entering directory `/usr/local/R-1.3.1/tests'
make[3]: Entering directory `/usr/local/R-1.3.1/tests/Examples'
make[4]: Entering directory `/usr/local/R-1.3.1/tests/Examples'
make[4]: Leaving directory `/usr/local/R-1.3.1/tests/Examples'
make[4]: Entering directory `/usr/local/R-1.3.1/tests/Examples'
collecting examples for package `base' ...
make[5]: Entering directory `/usr/local/R-1.3.1/src/library' 
>>> Building/Updating help pages for package `base'     
Formats: text example 
(.... example list follows ...)
make[5]: Leaving directory `/usr/local/R-1.3.1/src/library'
make[4]: *** No rule to make target `../../bin/R.bin', needed by
`base-Ex.Rout'.  Stop.
make[4]: Leaving directory `/usr/local/R-1.3.1/tests/Examples'
make[3]: *** [test-Examples] Error 2
make[3]: Leaving directory `/usr/local/R-1.3.1/tests/Examples'
make[2]: *** [test-Examples] Error 2
make[2]: Leaving directory `/usr/local/R-1.3.1/tests'
make[1]: *** [test-all-basics] Error 1
make[1]: Leaving directory `/usr/local/R-1.3.1/tests'
make: *** [check] Error 2#     

Since I saw that the process had not made the R.bin file, I did not go further
with make install.  I had done the make install step in a previous
installation
to no avail.

If for some reason you need all of the messages that were printed on the
screen
during the configure, make, and make check stages, I have those, too.  For the
purposes of this e-mail, I chose not to include them.  

By the way, one of my colleagues completed a successful installation of R on
another machine in the department last night.  This machine also runs Solaris
7.  He was helping me with this installation, but became just as stuck as I
was.

Thank you again for your help,
Monnie McGee

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Wed Oct  3 09:08:46 2001
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed, 3 Oct 2001 09:08:46 +0200
Subject: [R] Installing R-1.3.1 again
In-Reply-To: <200110022221.f92ML0x12518@xena.hunter.cuny.edu>
References: <200110022221.f92ML0x12518@xena.hunter.cuny.edu>
Message-ID: <15290.47486.230774.418684@gargle.gargle.HOWL>

>>>>> "Monnie" == Monnie McGee <monnie at xena.hunter.cuny.edu> writes:

    Monnie> Dear All, I have tried twice more to install R-1.3.1 on my
    Monnie> sparc with no success.  I thank you for the useful suggestions
    Monnie> that were sent, even though they didn't seem to help.

    Monnie> I am sorry that I was a bit cryptic in my last note.  Frankly,
    Monnie> I didn't know what information you needed, so I was waiting for
    Monnie> someone to ask some questions.

    Monnie> I hope the following will answer your questions.  I kept a
    Monnie> careful record of everything that I did and all messages that I
    Monnie> received while installing R.  The main problem, I feel, is that
    Monnie> R.bin is not being made for some reason.  I haven't the
    Monnie> foggiest idea why.

    Monnie> First I unpacked R-1.3.1.tgz in the directory /usr/local.  The
    Monnie> first time I tried the installation, I unpacked the file in my
    Monnie> home directory on my sparc machine.  Here are the commands that
    Monnie> followed and the results from each command:

  >> cd R-1.3.1
  >> su

  >> # ./configure

  >> R is now configured for sparc-sun-solaris2.7  
  >> Source directory:          .  
  >> Installation directory:    /usr/local  
  >> C compiler:                gcc  -g -O2  
  >> C++ compiler:              c++  -g -O2  
  >> FORTRAN compiler:          g77  -g -O2  
  >> X11 support:               yes  
  >> Gnome support:             no  
  >> Tcl/Tk support:            no  
  >> R profiling support:       yes  
  >> R as a shared library:     no

  >> configure: warning: you cannot build info versions of the R manuals
     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

{you should install ``GNU texinfo'' (from any GNU mirror),
 and by the way, also ``GNU readline'' which typically is missing from
 Solaris as well}


  >> # make          
  >> make[3]: ar: Command not found
              ~~~~~~~~~~~~~~~~~~~~~	      
  >> make[3]: *** [libappl.a] Error 127
  >> make[3]: Leaving directory `/usr/local/R-1.3.1/src/appl'
  >> make[2]: *** [R] Error 2
  >> make[2]: Leaving directory `/usr/local/R-1.3.1/src/appl'
  >> make[1]: *** [R] Error 1
  >> make[1]: Leaving directory `/usr/local/R-1.3.1/src'
  >> make: *** [R] Error 1     
     ---------------------

You got an error here; so just forget about everything else.
"make check" does not make sense, if "make" completes with an error !

The error  message ``ar: Command not found''
means that your installation of  gcc/g77 is broken:

 man> NAME
 man>      ar - create, modify, and extract from archives.

Prof Brian Ripley usually recommends to use f77 for Solaris instead of
g77,i.e. for you

	rm config.cache
	make clean
	configure --with-f77

but I'm not sure if this will suffice.  You probably need to first install
the GNU compiler suite (gcc etc) properly.

  >> # make check
  >> make[1]: Entering directory `/usr/local/R-1.3.1/tests'
  ............
  ............

Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Wed Oct  3 11:16:32 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Oct 2001 11:16:32 +0200
Subject: [R] Installing R-1.3.1 again
In-Reply-To: <15290.47486.230774.418684@gargle.gargle.HOWL>
References: <200110022221.f92ML0x12518@xena.hunter.cuny.edu>
	<15290.47486.230774.418684@gargle.gargle.HOWL>
Message-ID: <x21yklxevj.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler at stat.math.ethz.ch> writes:

> You got an error here; so just forget about everything else.
> "make check" does not make sense, if "make" completes with an error !
> 
> The error  message ``ar: Command not found''
> means that your installation of  gcc/g77 is broken:

Well, specifically it means that the ar command cannot be found.
There's supposed to be one in /usr/ccs/bin/ar or, if you install the
GNU binutils, in /usr/local/bin/ar (usually). First thing to check is
whether /usr/ccs/bin is in your $PATH.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maj at waikato.ac.nz  Wed Oct  3 11:50:51 2001
From: maj at waikato.ac.nz (Murray Jorgensen)
Date: Wed, 03 Oct 2001 21:50:51 +1200
Subject: [R] 1.3.1 Windows binaries install
In-Reply-To: <3BB9D882.1010602@ai.univie.ac.at>
Message-ID: <200110030950.VAA18500@gosset.stats.waikato.ac.nz>

I've just upgraded to 1.3.1. The new installer SetupR.exe is wonderful!
Thanks,
Brian! Also install.packages() works well.

A few questions, though.

1. There seems to be no help on tseries.

2. The old packages from my earlier installation of R appear along with the
new
packages in the html packages help file. I find that I can load these packages
still, with a lot of searching noise coming from the disk drive. Now this may
be an advantage, but I will surely want to junk some of these old packages
soon. I wonder if things will get messy at this point?

3. Some familiar old packages are gone. I wonder where their functionality is
now? I'm thinking of (for me) ctest, eda, lqs, modreg, mva, splines, stepfun,
tcltk. (I won't ask this about ts - maybe I can use ts help for tseries
functions?)

Murray Jorgensen




Dr Murray Jorgensen      http://www.stats.waikato.ac.nz/Staff/maj.html 
Department of Statistics, University of Waikato, Hamilton, New Zealand 
Email: maj at waikato.ac.nz                            Fax +64-7 838 4155
Phone +64-7 838 4773 home phone +64-7 856 6705  Mobile +64-21 139 5862

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Wed Oct  3 12:18:53 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Oct 2001 12:18:53 +0200
Subject: [R] 1.3.1 Windows binaries install
In-Reply-To: <200110030950.VAA18500@gosset.stats.waikato.ac.nz>
References: <200110030950.VAA18500@gosset.stats.waikato.ac.nz>
Message-ID: <x2ofnpvxf6.fsf@blueberry.kubism.ku.dk>

Murray Jorgensen <maj at waikato.ac.nz> writes:

> I've just upgraded to 1.3.1. The new installer SetupR.exe is wonderful!
> Thanks,
> Brian! Also install.packages() works well.
> 
> A few questions, though.
> 
> 1. There seems to be no help on tseries.
> 
> 2. The old packages from my earlier installation of R appear along with the
> new
> packages in the html packages help file. I find that I can load these packages
> still, with a lot of searching noise coming from the disk drive. Now this may
> be an advantage, but I will surely want to junk some of these old packages
> soon. I wonder if things will get messy at this point?
> 
> 3. Some familiar old packages are gone. I wonder where their functionality is
> now? I'm thinking of (for me) ctest, eda, lqs, modreg, mva, splines, stepfun,
> tcltk. (I won't ask this about ts - maybe I can use ts help for tseries
> functions?)

Um, that's not supposed to happen... you're supposed to end up with a
....\rw1031\library directory with all of those inside of it. Would
you happen to have an old setting for your R library confusing things???

tseries is not among the "recommended" packages that you get by
default, so you would normally get that from CRAN and that should put
the help files in place too.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ozric at web.de  Wed Oct  3 12:26:48 2001
From: ozric at web.de (C. Schulz)
Date: Wed, 3 Oct 2001 12:26:48 +0200
Subject: [R] package GeneSOM ?
Message-ID: <200110031026.f93AQiu23709@mailgate5.cinetic.de>

Hello Rprofessionals,

The SOM-Obj works very well, when i normalize
my data and the plot-function, too !

But i miss or didn't find the possibility , extract the
information  from the SOMplot "clusterSize" and "mean" for every cluster as quantitative information ( i.e. the DataFrame with an additional column which
define the calculate clusters from SOM)?

My intention  -  compare calculate SOM results with other unsupervised classification results !

P.S. How i have got qerror to interpret ?


Thanks for advance & regards,
 Christian

_______________________________________________________________________




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From sristatistician at yahoo.com  Wed Oct  3 13:25:07 2001
From: sristatistician at yahoo.com (srinivasa raghavan)
Date: Wed, 3 Oct 2001 04:25:07 -0700 (PDT)
Subject: [R] Exporting the output -windows
Message-ID: <20011003112507.35778.qmail@web20101.mail.yahoo.com>

Hi R-users,

     I am a newbie to R. I worked on multivariate
tools(mva package)for windows98 the output are all
displayed in console.Is it possible to export the
results in to HTML format and also to get report
quality output in neat tabulated format.

     I tried for in the R imports and Exports manual
but not satisfactory.There is detailed instruction
importing from various formats sas,spss,s-plus,excel
etc.

     Any help will be appreciated

srinivas 



__________________________________________________

Listen to your Yahoo! Mail messages from any phone.
http://phone.yahoo.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From baron at cattell.psych.upenn.edu  Wed Oct  3 14:13:26 2001
From: baron at cattell.psych.upenn.edu (Jonathan Baron)
Date: Wed, 3 Oct 2001 08:13:26 -0400 (EDT)
Subject: [R] Exporting the output -windows
Message-ID: <200110031213.f93CDQK28824@cattell.psych.upenn.edu>

The xtable package produces tables in html.  See also write(),
which may be usable for something simple, if you set the
delimitar as "</td><td>" for example.  (And see the different
versions of write().)

Jon Baron
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From phgrosje at ulb.ac.be  Wed Oct  3 15:27:15 2001
From: phgrosje at ulb.ac.be (Philippe Grosjean)
Date: Wed, 3 Oct 2001 15:27:15 +0200
Subject: [R] Exporting the output -windows
In-Reply-To: <20011003112507.35778.qmail@web20101.mail.yahoo.com>
Message-ID: <MABBLJDICACNFOLGIHJOKEBLCGAA.phgrosje@ulb.ac.be>

Look at xtable library to export tables formated in HTML.
Regards,

Philippe Grosjean


...........]<(({?<...............<?}))><...............................
 ) ) ) ) )	 __               	 __
( ( ( ( ( 	|__)              	|  _
 ) ) ) ) )	|   hilippe       	|__)rosjean
( ( ( ( ( 	Marine Biol. Lab., ULB, Belgium
 ) ) ) ) )	                  	 __
( ( ( ( ( 	|\  /|            	|__)
 ) ) ) ) )	| \/ |ariculture &	|__)iostatistics
( ( ( ( (
 ) ) ) ) )	e-mail: phgrosje at ulb.ac.be or phgrosjean at sciviews.org
( ( ( ( ( 	SciViews project coordinator (http://www.sciviews.org)
 ) ) ) ) )      tel: 00-32-2-650.29.70 (lab), 00-32-2-673.31.33 (home)
( ( ( ( (
 ) ) ) ) )      "I'm 100% confident that p is between 0 and 1"
( ( ( ( (                                  L. Gonick & W. Smith (1993)
 ) ) ) ) )
.......................................................................


-----Message d'origine-----
De : owner-r-help at stat.math.ethz.ch
[mailto:owner-r-help at stat.math.ethz.ch]De la part de srinivasa raghavan
Envoye : mercredi 3 octobre 2001 13:25
A : r-help at stat.math.ethz.ch
Objet : [R] Exporting the output -windows


Hi R-users,

     I am a newbie to R. I worked on multivariate
tools(mva package)for windows98 the output are all
displayed in console.Is it possible to export the
results in to HTML format and also to get report
quality output in neat tabulated format.

     I tried for in the R imports and Exports manual
but not satisfactory.There is detailed instruction
importing from various formats sas,spss,s-plus,excel
etc.

     Any help will be appreciated

srinivas



__________________________________________________

Listen to your Yahoo! Mail messages from any phone.
http://phone.yahoo.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cof at agere.com  Wed Oct  3 15:50:58 2001
From: cof at agere.com (Ortega Fernandez, Carlos (carlos))
Date: Wed, 3 Oct 2001 15:50:58 +0200 
Subject: [R] Exporting the output -windows
Message-ID: <B010EF86FE79904186E666A83CA90B3CAFDC25@SP0005EXCUAG01.ags.agere.com>

Hi,

There are several ways to get the values of a variable into a file, but for
the purpose you mention, please refer to the help entry for "sink()". The
output will be in a plain text file that you can convert to HTML with an
additional filter.

Regarding the "neat tabulated format", you can customize the output you need
and even create an HTML file with that with the use of the library (xtable)
available in CRAN, also ported for Windows platforms.

Hope it helps.
Carlos Ortega. 


-----Mensaje original-----
De: srinivasa raghavan [mailto:sristatistician at yahoo.com]
Enviado el: mi?rcoles 3 de octubre de 2001 13:25
Para: r-help at stat.math.ethz.ch
Asunto: [R] Exporting the output -windows


Hi R-users,

     I am a newbie to R. I worked on multivariate
tools(mva package)for windows98 the output are all
displayed in console.Is it possible to export the
results in to HTML format and also to get report
quality output in neat tabulated format.

     I tried for in the R imports and Exports manual
but not satisfactory.There is detailed instruction
importing from various formats sas,spss,s-plus,excel
etc.

     Any help will be appreciated

srinivas 



__________________________________________________

Listen to your Yahoo! Mail messages from any phone.
http://phone.yahoo.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20011003/9b2cd891/attachment.html

From duncan at research.bell-labs.com  Wed Oct  3 16:23:44 2001
From: duncan at research.bell-labs.com (Duncan Temple Lang)
Date: Wed, 3 Oct 2001 10:23:44 -0400
Subject: [R] R and Java
In-Reply-To: <3BB99A45.7405CDBE@inrialpes.fr>; from olivier.martin@inrialpes.fr on Tue, Oct 02, 2001 at 12:43:17PM +0200
References: <3BB99A45.7405CDBE@inrialpes.fr>
Message-ID: <20011003102344.G1799@jessie.research.bell-labs.com>

Hi Olivier.

  For (what I believe are) technical reasons, if you get an error in R
before initializing the Java virtual machine (JVM), very bad things
happen when you do actually start Java via the .JavaInit() function.
So the thing to try is running R, and immediately loading the SJava
library and initializing the JVM. 
 (R
   > library(SJava)
   > .JavaInit()
)
Then things should be better and we can start dealing with any other problems.

The technical reasons that I believe are causing the problem are what
make the S-Java connection somewhat less stable than other
packages. Specifically they relate to the fact that Java and the
underlying implementation uses threads, while R does not. And all the
libraries that they share in common (libc, libm, ...) are slightly
different and whoever gets to load them first wins and sets the
environment for the other.  When running Java inside R, R wins.  On
Unix, you can run Java and call R from within Java. In that setup,
Java will load the correct libraries for itself and R will be happy
with the result.

As Andrew pointed out, setting the LD_LIBRARY_PATH environment
variable correctly is important. And ensuring that the same JVM is
used at run time as used at compile time is usually vital.  To to do
this, the package supplies two shell scripts (one for the C shell and
another for the Bourne shell) in the scripts/ directory which can be
sourced to set the necessary environment variables.

Hope this helps. I'm keen to hear about other problems.
 D.

Olivier Martin wrote:
> Daer all,
> 
> Before to expose my problem, this the configuartion of my environment.
> I use the version 1.2.1 of R  with a  limux system (redhat)
> 
> I have installed SJava  (from omeghat) package successfully.
> So, i wanted to try an example (calc.R) that is provided in the library.
> 
> This is the message I obtained:
> Error in isJavaInitialized("Java virtual machine has not been
> initialized. Call .JavaInit
> Java virtual machine has not been initialized. Call .JavaInit()
> 
> So, i tried .JavaInit() but i obtained Segmentation fault (core dumped)
> 
> Could somebody  help me ?
> Thanks,
> Olivier
> 
> --
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> Olivier MARTIN
> PhD student                  phone: (33) 04 76 61 53 55
> Projet IS2                               06 08 67 93 42
> INRIA Rhone-Alpes            fax  : (33) 04 76 61 54 77
> 655, Av. de l'Europe
> Montbonnot                   e-mail:olivier.martin at inrialpes.fr
> 38334 Saint Ismier cedex
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> 
> 

-- 
_______________________________________________________________

Duncan Temple Lang                duncan at research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jyan at stat.wisc.edu  Wed Oct  3 16:59:34 2001
From: jyan at stat.wisc.edu (Jun Yan)
Date: Wed, 3 Oct 2001 09:59:34 -0500 (CDT)
Subject: [R] package GeneSOM ?
In-Reply-To: <200110031026.f93AQiu23709@mailgate5.cinetic.de>
Message-ID: <Pine.LNX.4.21.0110030948500.534-100000@gstat205.stat.wisc.edu>

> But i miss or didn't find the possibility , extract the
> information  from the SOMplot "clusterSize" and "mean" for every cluster as quantitative information ( i.e. the DataFrame with an additional column which
> define the calculate clusters from SOM)?

Within a som object, code is a matrix with nrow = xdim*ydim, each row
corresponding to a code vector of a cell in the map. The mapping from cell
coordinate (x, y) to the row index in the code matrix is:
          rownumber = x + y * xdim
and hence (indexed from 0)
	x = (rownumber - 1) %% xdim
	y = (rownumber - 1) %/% xdim 

The "mean" for each cluster is contained in the row of code.
The "clustersize" could be obtained by the following function

somsum <- function(obj) {
  xdim <- obj$xdim
  ydim <- obj$ydim
  m <- nrow(obj$code)
  x <- (1:m - 1) %% xdim
  y <- (1:m - 1) %/% xdim
  f <- function(ii) {
    x <- (ii - 1) %% xdim 
    y <- (ii - 1) %/% xdim 
    ind <- obj$visual$x == x & obj$visual$y == y
    n <- length(ind[ind])
    n
  }
  nobs <- sapply(1:m, f)
  data.frame(x, y, nobs)
}

The output from this function could be put side by side with code using
cbind.

> My intention  -  compare calculate SOM results with other unsupervised classification results !
> 
> P.S. How i have got qerror to interpret ?

The qerror is calculated as an average of a weighted quantization error
for each sample:
\sum h_{ci} |x - m_i|^2

where the summation is taken over all the coding (mean) vector for the
sample, h_{ci} is the neighbouhood funcion, and m_i is the coding
vector. The default radius of neighbourhood is 1.

I am sorry it's not well documented. I will try to improve this over the
weekend.

Jun
 
> Thanks for advance & regards,
>  Christian

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From a215020 at agate.fmr.com  Wed Oct  3 17:35:58 2001
From: a215020 at agate.fmr.com (David Brahm)
Date: Wed, 3 Oct 2001 11:35:58 -0400 (EDT)
Subject: [R] Several R vs S-Plus issues
Message-ID: <200110031535.f93FZwk16862@arbres1a.FMR.Com>

Hi, all,

   I've been converting code from S-Plus ("S" for short) to R for a few weeks.
Here are some differences I've found, aside from the big well-known ones
(scoping, models, data storage) and the contents of Kurt Hornik's FAQ section
3.3.3.  Let me start with the ones that seem like serious bugs or deficiencies:

1) LETTERS[c(NA,2)] in S is c("","B"), but in R is c("NA","B").

  This is TERRIBLE!  I have a ton of S-Plus code that looks like:
     y$ticker <- z$ticker[match(y$cusip, z$cusip)]
  and I count on a ticker of "" to indicate failed lookups.  Not only will
  I need to change all that code, but I'll never be able to trade Nabisco
  (ticker NA) again.  PLEASE re-consider this choice, or at least make it
  an option: option(na.char="").


2) system() has no "input" argument in R.

   Here's a (Unix) example:
   S> system("cd mydir; latex myfile", input="x")
     which goes to the directory where myfile lives and LaTeX's it, passing
     an "x" through STDIN in case LaTeX encounters an error.  My R fix is:
   R> system("cd mydir; echo x | latex myfile")
   Note that it's not as simple as  cmd <- paste("echo",input,"|",cmd).


3) R> myfun <- function(x, ...) {x[...] <- 0;  x}
   R> myfun(3)
   Error in myfun(3) : SubAssignArgs: invalid number of arguments

   It failed because no ... was given.  Fortunately, this is easily patched:
   R> myfun <- function(x, ...) {if (missing(...)) x[]<-0 else x[...]<-0; x}


4) Missing functions:
   a) identical() [scheduled for 1.4.0]
   b) slice.index()
   c) rowSums(), colSums(), colVars(), etc.
   d) unpaste() - R has strsplit, whose result is like the transpose of unpaste


5) rowsum() gives character dimnames in S, factor numbers in R.
   I've reported this early, and Brian D. Ripley promised a fix in 1.4.0.


OK, the rest are just differences, not complaints.  In fact, sometimes they are
very good differences.

1) Same argument given twice produces an error in R; S takes the last one.
   S> mean(x=4, x=5)    # Returns 5
   R> mean(x=4, x=5)    # Error

2) row.names(y) <- LETTERS[1:3] coerces list to dataframe in S, is error in R.

3) Default "what" for scan in S is "", in R is double(0).

4) Default "quote" for scan is "'\"" in R, causes different behavior than S.

5) which(<numeric>) converts to logical in S, is an error in R.

6) The NULL returned by if(F){...} is invisible in R, visible in S.

7) The NULL returned by return() is visible in R, invisible in S.

8) Args to "var" differ, and R has "cov".  S na.method="a" is like R use="p".

9) var (or cov) drops dimensions in S, not R.

10) cut allows labels=F in R, not in S (also left.include=T becomes right=F).

11) substring(s,"x") <- "X" only works in S, but R has s <- gsub("x","X",s).

12) S function casefold() replaced in R by toupper() or tolower().

13) Functions missing from S: sub(), gsub(), chartr(), toupper(), tolower()

14) Log scale indicated in S with par(xaxt)=="l", in R with par("xlog")==T.

			-- David Brahm (a215020 at agate.fmr.com)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Wed Oct  3 18:05:25 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Oct 2001 18:05:25 +0200
Subject: [R] Several R vs S-Plus issues
In-Reply-To: <200110031535.f93FZwk16862@arbres1a.FMR.Com>
References: <200110031535.f93FZwk16862@arbres1a.FMR.Com>
Message-ID: <x2wv2cvhdm.fsf@blueberry.kubism.ku.dk>

David Brahm  <a215020 at agate.fmr.com> writes:

> Hi, all,
> 
>    I've been converting code from S-Plus ("S" for short) to R for a few weeks.
> Here are some differences I've found, aside from the big well-known ones
> (scoping, models, data storage) and the contents of Kurt Hornik's FAQ section
> 3.3.3.  Let me start with the ones that seem like serious bugs or deficiencies:
> 
> 1) LETTERS[c(NA,2)] in S is c("","B"), but in R is c("NA","B").

...
> 14) Log scale indicated in S with par(xaxt)=="l", in R with par("xlog")==T.

*Sigh*

PLEASE do not post several bugs in one report (hint: look at the
       filing system on bugs.r-project.org)

PLEASE discern between actual bugs and points for discussion and
       design issues

PLEASE do not mail to multiple addresses. All bug reports are echoed
       to the r-devel list and should be discussed there. This will
       ensure that the discussion, including possible patches and
       workarounds are filed in the bug repository. Worse, careless
       followups to posts on r-devel or r-help with a Cc: field
       including "r-bugs" will cause the creation of *new* bug
       reports since they lack the crucial (PR#nnnn) part.

Sorry if I sound annoyed, but I am....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From r-help at lists.thewrittenword.com  Wed Oct  3 18:07:52 2001
From: r-help at lists.thewrittenword.com (r-help@lists.thewrittenword.com)
Date: Wed, 3 Oct 2001 11:07:52 -0500
Subject: [R] Installing R-1.3.1 again
In-Reply-To: <x21yklxevj.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@biostat.ku.dk on Wed, Oct 03, 2001 at 11:16:32AM +0200
References: <200110022221.f92ML0x12518@xena.hunter.cuny.edu> <15290.47486.230774.418684@gargle.gargle.HOWL> <x21yklxevj.fsf@blueberry.kubism.ku.dk>
Message-ID: <20011003110752.C3432@oolong.il.thewrittenword.com>

On Wed, Oct 03, 2001 at 11:16:32AM +0200, Peter Dalgaard BSA wrote:
> Martin Maechler <maechler at stat.math.ethz.ch> writes:
> 
> > You got an error here; so just forget about everything else.
> > "make check" does not make sense, if "make" completes with an error !
> > 
> > The error  message ``ar: Command not found''
> > means that your installation of  gcc/g77 is broken:
> 
> Well, specifically it means that the ar command cannot be found.
> There's supposed to be one in /usr/ccs/bin/ar or, if you install the
> GNU binutils, in /usr/local/bin/ar (usually). First thing to check is
> whether /usr/ccs/bin is in your $PATH.

BTW, /usr/ccs/bin/ar is part of the SUNWbtool Solaris package. It is
installed if you did a Solaris installed and checked the "Developer"
option. I don't thin it is present for end-user installs.

You can also install GNU binutils.

-- 
albert chin (china at thewrittenword.com)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From a215020 at agate.fmr.com  Wed Oct  3 18:56:51 2001
From: a215020 at agate.fmr.com (David Brahm)
Date: Wed, 3 Oct 2001 12:56:51 -0400 (EDT)
Subject: [R] Several R vs S-Plus issues
Message-ID: <200110031656.f93Gups17329@arbres1a.FMR.Com>

Peter Dalgaard <p.dalgaard at biostat.ku.dk> wrote:
> Sorry if I sound annoyed, but I am....

Grossly unfair, Peter!  And since you chose to vent your annoyance publicly,
I am responding publicly.  I spent several hours trying to build a coherent,
single-page summary of my observations over several weeks, and my reward is a
scolding for sending my email to the address given in the FAQ???  Jeez!  Just
delete it if it offends so much!

> PLEASE do not post several bugs in one report ...
> PLEASE discern between actual bugs and points for discussion...

Not mentioned in the FAQ (section 9.2), nor anywhere else on CRAN that I can
find.  It sounds like r-bugs is some kind of automated system that cannot
handle non-standard formatting, is that it?  I assumed it was just read by a
human (the "bugs guy"), parsed, and handed out appropriately, sorry.

> PLEASE do not mail to multiple addresses. All bug reports are echoed
> to the r-devel list and should be discussed there.

Then I don't understand how to communicate with the "development team", besides
just posting to the general discussion list.  Is every posting there really
read and handled by the right people?  I guess I fundamentally don't understand
your communication model, e.g. how my comment about subsetting (which isn't
strictly a "bug") gets to the guy who actually writes "[".

> Sorry if I sound annoyed, but I am....

Likewise.  R-help sure is filled with a lot of negativity.

		       -- David Brahm (a215020 at agate.fmr.com)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Wed Oct  3 19:49:43 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Wed, 3 Oct 2001 10:49:43 -0700 (PDT)
Subject: deep breaths and count to 10 (was Re: [R] Several R vs S-Plus issues)
In-Reply-To: <200110031656.f93Gups17329@arbres1a.FMR.Com>
Message-ID: <Pine.A41.4.33.0110031023050.91640-100000@homer32.u.washington.edu>


Some information that might be useful to readers of these lists

> Peter Dalgaard <p.dalgaard at biostat.ku.dk> wrote:
On Wed, 3 Oct 2001, David Brahm wrote:
> > PLEASE do not post several bugs in one report ...
> > PLEASE discern between actual bugs and points for discussion...
>
> Not mentioned in the FAQ (section 9.2), nor anywhere else on CRAN that I can
> find.  It sounds like r-bugs is some kind of automated system that cannot
> handle non-standard formatting, is that it?  I assumed it was just read by a
> human (the "bugs guy"), parsed, and handed out appropriately, sorry.

R-bugs is an automated bugs repository. It's designed to make sure that
each bug is filed away separately and that we can check off which ones
have been fixed when the next release comes along.  It exists because we
found that bugs not fixed immediately often got forgotten. It also
assigns bug numbers that ensure all correspondence relevant to a
particular bug is filed together.

This means that multiple bugs in one report are a bit of a pain. They end
up filed in one place, so it's harder to check which bits of the report
are fixed.  It's particularly distracting when the same report contains
things that we intend to fix, things that we can't fix, things that are
already fixed and things that we don't want to fix.

It's not the end of the world, but it is a lot less effective than one
message per bug.


> > PLEASE do not mail to multiple addresses. All bug reports are echoed
> > to the r-devel list and should be discussed there.
>
> Then I don't understand how to communicate with the "development team", besides
> just posting to the general discussion list.  Is every posting there really
> read and handled by the right people?

Two points: Yes, we really do read r-devel, so it's the right place for
feature requests and miscellaneous complaints that aren't bugs, just
infelicities.

Also, all email sent to r-bugs is automatically forwarded to r-devel.
Similarly r-announce is forwarded to r-devel and r-help. This means that
you should almost never send the same message to more than one R address.

R-devel is in fact the main place where R-bugs is read.  Various people go
over the repository from time to time, to make sure that there aren't
lurking problems, but most bugs get discussed and fixed
more-or-less immediately.


	-thomas


Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Wed Oct  3 19:55:13 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Oct 2001 19:55:13 +0200
Subject: [R] Several R vs S-Plus issues
In-Reply-To: <200110031656.f93Gups17329@arbres1a.FMR.Com>
References: <200110031656.f93Gups17329@arbres1a.FMR.Com>
Message-ID: <x2ofnovcam.fsf@blueberry.kubism.ku.dk>

David Brahm  <a215020 at agate.fmr.com> writes:

> Peter Dalgaard <p.dalgaard at biostat.ku.dk> wrote:
> > Sorry if I sound annoyed, but I am....
> 
> Grossly unfair, Peter!  And since you chose to vent your annoyance publicly,
> I am responding publicly.  I spent several hours trying to build a coherent,
> single-page summary of my observations over several weeks, and my reward is a
> scolding for sending my email to the address given in the FAQ???  Jeez!  Just
> delete it if it offends so much!

Sorry I cannot do that. I'm among the guys that actually try to fix
things once in a while. And has spent several *years* doing so.

And sorry for taking it out on you, but these things are recurrent.
The note was targeted at everybody.

(I don't think you'll find anything in the FAQ saying that bug
reports should be sent to r-help, though.)

> > PLEASE do not post several bugs in one report ...
> > PLEASE discern between actual bugs and points for discussion...
> 
> Not mentioned in the FAQ (section 9.2), nor anywhere else on CRAN that I can
> find.  It sounds like r-bugs is some kind of automated system that cannot
> handle non-standard formatting, is that it?  I assumed it was just read by a
> human (the "bugs guy"), parsed, and handed out appropriately, sorry.

Maybe the FAQ needs some points added on this, but it does talk about
reporting _a_ bug.

Let me explain: 

R-bugs is a semi-automatic bug-*filing* system, which attaches a
report number and keeps reports with similar numbers together. It
allows us to sort reports into categories, say "Language" and move
them to "Language-fixed" when they are fixed. We cannot fix everything
at once so we review unresolved reports occasionally and see if the
bug is still there (occasionally the bug gets fixed but noone updates
the repository) and maybe try another stab at isolating the problem.

The problem with a multiple report like yours is that it is cannot be
uniquely filed (although there's a TooMuchAtOnce category), but worse:
It lingers in the repository until every problem in it is resolved,
and there is no heading that can tell us at a glance what the report
is all about. Every time it is reviewed we have to read the whole
thing through to recall what the issues were and filter out those
questions that were already resolved, or previously decided to be
unresolvable. This makes the whole debugging process take much more
time.

> 
> > PLEASE do not mail to multiple addresses. All bug reports are echoed
> > to the r-devel list and should be discussed there.
> 
> Then I don't understand how to communicate with the "development team", besides
> just posting to the general discussion list.  

If you mail to r-bugs, the report is copied to the R-devel list and
presumably read by the interested developers. A copy of this and any
follow-ups on the list get stored in the repository.

> Is every posting there really
> read and handled by the right people?  I guess I fundamentally don't understand
> your communication model, e.g. how my comment about subsetting (which isn't
> strictly a "bug") gets to the guy who actually writes "[".

That one arguably *is* a bug (whereas the fact that R gets you a
missing result from indexing with a missing value is a design
improvement). 

For discussing the design of things, you could take up the issue on
the r-devel list as a normal topic. This may or may not spark some
discussion, which is about the best you can hope for. Obviously, noone
is *obliged* to change things according to your tastes.

> > Sorry if I sound annoyed, but I am....
> 
> Likewise.  R-help sure is filled with a lot of negativity.

Sorry if you feel that. I think there are others who actually feel
they are getting help.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Harvey.Monder at pharma.com  Wed Oct  3 20:29:03 2001
From: Harvey.Monder at pharma.com (Monder, Harvey)
Date: Wed, 3 Oct 2001 14:29:03 -0400 
Subject: [R] Several R vs S-Plus issues
Message-ID: <E5EC0556E8B6D2118CB600A0C9B6BB6003BA5793@a2mbx01.pharma.com>

Also in assign() there some arguments lacking in R such as 'frame' and
'where', though I guess that 'frame' in S may be similar to 'pos' in R.

	Harvey

	-----Original Message-----
	From:	David Brahm [SMTP:a215020 at agate.fmr.com]
	Sent:	Wednesday, October 03, 2001 11:36 AM
	To:	r-help at stat.math.ethz.ch
	Cc:	Kurt.Hornik at ci.tuwien.ac.at; r-bugs at r-project.org
	Subject:	[R] Several R vs S-Plus issues

	Hi, all,

	   I've been converting code from S-Plus ("S" for short) to R for a
few weeks.
	Here are some differences I've found, aside from the big well-known
ones
	(scoping, models, data storage) and the contents of Kurt Hornik's
FAQ section
	3.3.3.  Let me start with the ones that seem like serious bugs or
deficiencies:

	1) LETTERS[c(NA,2)] in S is c("","B"), but in R is c("NA","B").

	  This is TERRIBLE!  I have a ton of S-Plus code that looks like:
	     y$ticker <- z$ticker[match(y$cusip, z$cusip)]
	  and I count on a ticker of "" to indicate failed lookups.  Not
only will
	  I need to change all that code, but I'll never be able to trade
Nabisco
	  (ticker NA) again.  PLEASE re-consider this choice, or at least
make it
	  an option: option(na.char="").


	2) system() has no "input" argument in R.

	   Here's a (Unix) example:
	   S> system("cd mydir; latex myfile", input="x")
	     which goes to the directory where myfile lives and LaTeX's it,
passing
	     an "x" through STDIN in case LaTeX encounters an error.  My R
fix is:
	   R> system("cd mydir; echo x | latex myfile")
	   Note that it's not as simple as  cmd <-
paste("echo",input,"|",cmd).


	3) R> myfun <- function(x, ...) {x[...] <- 0;  x}
	   R> myfun(3)
	   Error in myfun(3) : SubAssignArgs: invalid number of arguments

	   It failed because no ... was given.  Fortunately, this is easily
patched:
	   R> myfun <- function(x, ...) {if (missing(...)) x[]<-0 else
x[...]<-0; x}


	4) Missing functions:
	   a) identical() [scheduled for 1.4.0]
	   b) slice.index()
	   c) rowSums(), colSums(), colVars(), etc.
	   d) unpaste() - R has strsplit, whose result is like the transpose
of unpaste


	5) rowsum() gives character dimnames in S, factor numbers in R.
	   I've reported this early, and Brian D. Ripley promised a fix in
1.4.0.


	OK, the rest are just differences, not complaints.  In fact,
sometimes they are
	very good differences.

	1) Same argument given twice produces an error in R; S takes the
last one.
	   S> mean(x=4, x=5)    # Returns 5
	   R> mean(x=4, x=5)    # Error

	2) row.names(y) <- LETTERS[1:3] coerces list to dataframe in S, is
error in R.

	3) Default "what" for scan in S is "", in R is double(0).

	4) Default "quote" for scan is "'\"" in R, causes different behavior
than S.

	5) which(<numeric>) converts to logical in S, is an error in R.

	6) The NULL returned by if(F){...} is invisible in R, visible in S.

	7) The NULL returned by return() is visible in R, invisible in S.

	8) Args to "var" differ, and R has "cov".  S na.method="a" is like R
use="p".

	9) var (or cov) drops dimensions in S, not R.

	10) cut allows labels=F in R, not in S (also left.include=T becomes
right=F).

	11) substring(s,"x") <- "X" only works in S, but R has s <-
gsub("x","X",s).

	12) S function casefold() replaced in R by toupper() or tolower().

	13) Functions missing from S: sub(), gsub(), chartr(), toupper(),
tolower()

	14) Log scale indicated in S with par(xaxt)=="l", in R with
par("xlog")==T.

				-- David Brahm (a215020 at agate.fmr.com)
	
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
	r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
	Send "info", "help", or "[un]subscribe"
	(in the "body", not the subject !)  To:
r-help-request at stat.math.ethz.ch
	
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From phgrosje at ulb.ac.be  Wed Oct  3 20:45:42 2001
From: phgrosje at ulb.ac.be (Philippe Grosjean)
Date: Wed, 3 Oct 2001 20:45:42 +0200
Subject: [R] Several R vs S-Plus issues
In-Reply-To: <200110031656.f93Gups17329@arbres1a.FMR.Com>
Message-ID: <MABBLJDICACNFOLGIHJOOEBPCGAA.phgrosje@ulb.ac.be>

I understand you feel shoked when you spend hours and hours compiling a
message with all bugs and differences you found between R and Splus. But,
please, understand that what you call the "development team" is just a group
of volunteers. This is *very* different than the "development team" of Splus
whose job is to develop the software for others, called "users". With GPL
software, like R, there is no clear limit between the "development team" and
the "users". When "users" reach you level of understanding of the software,
they are expected to become somehow part of the "development team". It means
that you should preferrably propose patches, that is, corrections for bugs
you found. If you cannot, then there are standard methods for submitting
bugs to the _fuzzy_ developers community. It is because everybody can take
part of the development that these methods (that you find too rigid) are
like that.

A last point. R is not a clone of Splus... It is just "not unlike Splus".
Thus, any difference is not necessarily a bug. But, since you did already a
good job there, why not to start making a pdf document that underlines all
differences between Splus and R? This document would be intended for
developers that translate Splus code to R code and vice versa. This sounds
great to me, because I am developing code for both Splus and R, and I
sometimes lose hours figuring out why my code works in R and not in Splus,
or the contrary.
Best regards,

Philippe Grosjean


...........]<(({?<...............<?}))><...............................
 ) ) ) ) )	 __               	 __
( ( ( ( ( 	|__)              	|  _
 ) ) ) ) )	|   hilippe       	|__)rosjean
( ( ( ( ( 	Marine Biol. Lab., ULB, Belgium
 ) ) ) ) )	                  	 __
( ( ( ( ( 	|\  /|            	|__)
 ) ) ) ) )	| \/ |ariculture &	|__)iostatistics
( ( ( ( (
 ) ) ) ) )	e-mail: phgrosje at ulb.ac.be or phgrosjean at sciviews.org
( ( ( ( ( 	SciViews project coordinator (http://www.sciviews.org)
 ) ) ) ) )      tel: 00-32-2-650.29.70 (lab), 00-32-2-673.31.33 (home)
( ( ( ( (
 ) ) ) ) )      "I'm 100% confident that p is between 0 and 1"
( ( ( ( (                                  L. Gonick & W. Smith (1993)
 ) ) ) ) )
.......................................................................


-----Message d'origine-----
De : owner-r-help at stat.math.ethz.ch
[mailto:owner-r-help at stat.math.ethz.ch]De la part de David Brahm
Envoy? : mercredi 3 octobre 2001 18:57
? : p.dalgaard at biostat.ku.dk
Cc : r-help at stat.math.ethz.ch
Objet : Re: [R] Several R vs S-Plus issues


Peter Dalgaard <p.dalgaard at biostat.ku.dk> wrote:
> Sorry if I sound annoyed, but I am....

Grossly unfair, Peter!  And since you chose to vent your annoyance publicly,
I am responding publicly.  I spent several hours trying to build a coherent,
single-page summary of my observations over several weeks, and my reward is
a
scolding for sending my email to the address given in the FAQ???  Jeez!
Just
delete it if it offends so much!

> PLEASE do not post several bugs in one report ...
> PLEASE discern between actual bugs and points for discussion...

Not mentioned in the FAQ (section 9.2), nor anywhere else on CRAN that I can
find.  It sounds like r-bugs is some kind of automated system that cannot
handle non-standard formatting, is that it?  I assumed it was just read by a
human (the "bugs guy"), parsed, and handed out appropriately, sorry.

> PLEASE do not mail to multiple addresses. All bug reports are echoed
> to the r-devel list and should be discussed there.

Then I don't understand how to communicate with the "development team",
besides
just posting to the general discussion list.  Is every posting there really
read and handled by the right people?  I guess I fundamentally don't
understand
your communication model, e.g. how my comment about subsetting (which isn't
strictly a "bug") gets to the guy who actually writes "[".

> Sorry if I sound annoyed, but I am....

Likewise.  R-help sure is filled with a lot of negativity.

		       -- David Brahm (a215020 at agate.fmr.com)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From feldesmanm at pdx.edu  Wed Oct  3 21:21:45 2001
From: feldesmanm at pdx.edu (Marc Feldesman)
Date: Wed, 03 Oct 2001 12:21:45 -0700
Subject: [R] R != S-Plus
Message-ID: <5.1.0.14.2.20011003120653.00b14d20@odin.pdx.edu>

David Brahm's initial post seems to me to be filled with a mixture of bugs, 
wants, and needs coupled with a desire to "make" R become S-Plus.  David, 
if S-Plus works for you, why are you bothering to convert all your code to 
R?  No one has ever asserted that R==S (or S-Plus), and there is no reason 
to expect this equality to hold, ever.

R is open source.  If you want to change something, you are free to change 
it and you are free to contribute your changes to the community.  If you 
want to find and fix a bug, I'm sure the r-development team would welcome 
your assistance.  (BTW, it has never been difficult for me to figure out 
how or where to report problems and concerns.  Indeed it isn't in the FAQs 
- and maybe it should - but anyone with a reasonable amount of 
inquisitiveness could figure it out.)

Yelling at the developers is a no win strategy.  They're not obliged to do 
anything, including fixing bugs.  They do it voluntarily and most of us 
genuinely appreciate the incredibly hard work they do.  I'm not an 
R-developer -- just a very grateful consumer -- but my standard response to 
ungrateful people is to do less for them, not more.

Peter's response may have seemed "unfair", but it was needed IMHO.

My 2 cents.









=====================
Dr. Marc R. Feldesman
Professor and Chairman
Anthropology Department
Portland State University
1721 SW Broadway
Portland, Oregon 97201
email:  feldesmanm at pdx.edu
phone:  503-725-3081
fax:    503-725-3905
http://web.pdx.edu/~h1mf
PGP Key Available On Request
======================

"Anyway, no drug, not even alcohol, causes the fundamental ills of society.
If we're looking for the source of our troubles, we shouldn't test people
for drugs, we should test them for stupidity, ignorance, greed and love of
power."   P.J. O'Rourke

Powered by Optiplochoerus and Windows 2000 (scary isn't it?)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rossini at blindglobe.net  Wed Oct  3 21:53:25 2001
From: rossini at blindglobe.net (A.J. Rossini)
Date: 03 Oct 2001 12:53:25 -0700
Subject: [R] R != S-Plus
In-Reply-To: <5.1.0.14.2.20011003120653.00b14d20@odin.pdx.edu>
References: <5.1.0.14.2.20011003120653.00b14d20@odin.pdx.edu>
Message-ID: <87y9mspkju.fsf@jeeves.blindglobe.net>

>>>>> "MF" == Marc Feldesman <feldesmanm at pdx.edu> writes:

    MF> David Brahm's initial post seems to me to be filled with a
    MF> mixture of bugs, wants, and needs coupled with a desire to
    MF> "make" R become S-Plus.  David, if S-Plus works for you, why
    MF> are you bothering to convert all your code to R?  No one has
    MF> ever asserted that R==S (or S-Plus), and there is no reason to
    MF> expect this equality to hold, ever.

I think I'd disagree.  David's post was fine.  It was a nice detailed
explanation of his user experiences, something nearly every open
source development team wants.  In other contexts/projects, I've
really appreciated his reports and some of his provided solutions.

The only major problem I can see is that he sent it to R-bugs,
creating a minor (major?) workload problem for Peter which shouldn't
have happened.

Something broke down in the development process.  Let's get it fixed.

Civility is important from EVERYBODY.  

Relax.  As Thomas' subject said, take a deep breath and count to 10.

However, this isn't the first time we've seen comments about "open
source, volunteers, blah, blah" bandied around at people who have
demonstrated willingness to help OSS projects in the past, or worse,
who have run OSS projects in the past (not in this case, but I do
recall a snide remark from someone who should've known better about
OSS volunteer projects, directed towards the developer of the slick
(GPL'd) Emacs SAS mode predating ESS (which we later incorporated)).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini at u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini at scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pgilbert at bank-banque-canada.ca  Wed Oct  3 22:41:40 2001
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 03 Oct 2001 16:41:40 -0400
Subject: [R] R != S-Plus
References: <5.1.0.14.2.20011003120653.00b14d20@odin.pdx.edu> <87y9mspkju.fsf@jeeves.blindglobe.net>
Message-ID: <3BBB7804.F669DBCF@bank-banque-canada.ca>

>The only major problem I can see is that he sent it to R-bugs,
>creating a minor (major?) workload problem for Peter which
shouldn't
>have happened.

>Something broke down in the development process.  Let's get it
fixed.

I'm not sure what the fix should be but I have erred on both
sides of the problem.
On occassion I have reported to r-bugs something that really was
not a bug. More often I have reported something to r-devel that I
think may be a bug, but not sent it to r-bugs because I was not
sure, and then it got forgotten and never filed on r-bugs.
Perhaps a solution would be to have someone approve messages to
r-bugs so there is at least a rough scan first. (Since there are
so few bugs in R there really is not much traffic on r-bugs.)

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gregory_r_warnes at groton.pfizer.com  Wed Oct  3 15:50:21 2001
From: gregory_r_warnes at groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 3 Oct 2001 09:50:21 -0400 
Subject: [R] plot of Bernoulli data
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEE86@groexmbcr02.pfizer.com>


In the next release of the gregmisc library there is a function "wapply"
that applies a specified function over 'windows' of x-y data (code below).
You would use it in this case as:

 x<-sort(runif(100,1,20))
 p<-pnorm(x,10,3)
 y<-as.numeric(runif(x)<p)
 plot(x,y)
 lines(x,p)

 # draw a line with 10 points, each computed on regions spanning 1/5th of
the x range
 lines(wapply(x,y,n=10,width=1/5),col="red")

-Greg



# $Id: wapply.R,v 1.2 2001/08/31 23:45:45 warneg Exp $
#
"wapply" _ function( x, y, fun=mean, method="range",
                    width=1/10, n=50, ...)
{
  method <- match.arg(method, c("width","range","nobs","fraction"))

  if(method == "width" || method == "range" )
    {
      if(method=="range")
        width <- width * range(x)
      
      
      pts _ seq(min(x),max(x),length.out=n)
      
      result _ sapply( pts, function(pts,y,width,fun,XX,...)
                      {
                        low _ min((pts-width/2),max(XX))
                        high _ max((pts+width/2), min(XX))
                        return (fun(y[(XX>= low) & (XX<=high)],...))
                      },
                      y=y,
                      width=width,
                      fun=fun,
                      XX = x,
                      ...)
      
      return(x=pts,y=result)
    }
  else # method=="nobs" || method=="fraction"
    {
      if( method=="fraction")
        width <- floor(length(x) * width)
      
      ord <- order(x)
      x  <- x[ord]
      y  <- y[ord]

      n  <- length(x)
      center  <- 1:n
      below <- sapply(center - width/2, function(XX) max(1,XX) )
      above <- sapply(center + width/2, function(XX) min(n,XX) )

      retval  <- list()
      retval$x  <- x
      retval$y  <- apply(cbind(below,above), 1,
                         function(x) fun(y[x[1]:x[2]],...) )
                         
      return(retval)
    }
      
}



 >  -----Original Message-----
 >  From: Bill Simpson [mailto:wsi at gcal.ac.uk]
 >  Sent: Tuesday, October 02, 2001 7:57 AM
 >  To: r-help at stat.math.ethz.ch
 >  Subject: Re: [R] plot of Bernoulli data
 >  
 >  
 >  >  x<-sort(runif(100,1,20))
 >  >  p<-pnorm(x,10,3)
 >  >  y<-as.numeric(runif(x)<p)
 >  >  plot(x,y)
 >  >  lines(x,p)
 >  df<-data.frame(x,y)
 >  aggregate(df,list(x=(x<5),(x>5)&(x<10),(x>10) & 
 >  (x<15),(x>15)), FUN=mean)
 >  gives me what I want but if anyone has a better way to collect the
 >  observations into bins I'd like to hear it. It would be nice to
 >  pass along something like
 >  breaks<-c(5,10,15,20)
 >  
 >  Thanks
 >  
 >  Bill Simpson
 >  
 >  -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
 >  -.-.-.-.-.-.-.-.-.-
 >  r-help mailing list -- Read 
 >  http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
 >  Send "info", "help", or "[un]subscribe"
 >  (in the "body", not the subject !)  To: 
 >  r-help-request at stat.math.ethz.ch
 >  _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
 >  _._._._._._._._._._
 >  


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From a215020 at agate.fmr.com  Wed Oct  3 22:59:21 2001
From: a215020 at agate.fmr.com (David Brahm)
Date: Wed, 3 Oct 2001 16:59:21 -0400 (EDT)
Subject: [R] Several R vs S-Plus issues
Message-ID: <200110032059.f93KxLo19424@arbres1a.FMR.Com>

Marc Feldesman (feldesmanm at pdx.edu) wrote:
> David, if S-Plus works for you, why are you bothering to convert all your
> code to R? 

Group decision.  I have the most old S code of the group, so I have the most
issues with incompatibility.  If I can't get it to work, we either revert to
S-Plus, or bifurcate into the "S people" and the "R people".

> R is open source. If you want to change something, you are free to change 
> it and you are free to contribute your changes to the community.

Really?  You think nobody in the community would complain if I went in and
changed the behavior of "[" for character vectors?  I don't really understand
the OSS model, but I doubt that.  I think I am a "user", not a "developer".


Thomas Lumley (tlumley at u.washington.edu) wrote:
> deep breaths and count to 10...

OK, so here's what I think I've learned.  Feedback please if I've still got it
wrong.
1) Do not Cc: to r-bugs!!!
2) Bugs go individually to r-bugs.  Here is the only one I think qualifies:
   - myfun <- function(x, ...) {x[...] <- 0;  x}  fails if no ... given
3) Feature and compatibility requests go to r-devel, to which I am just now
   subscribed.  Separate messages, I suppose.  These would be:
   - LETTERS[c(NA,2)] in S is c("","B"), but in R is c("NA","B")
   - system() has no "input" argument in R
   - No slice.index()
   - No rowSums(), colSums(), colVars(), etc.
   - No unpaste()
4) Issues already addressed (rowsum, identical) don't need to go anywhere.
5) Other differences are just FYI, and don't need to go anywhere.
   Philippe Grosjean (phgrosje at ulb.ac.be) suggested I make a project of
   collecting all such differences, but frankly that's too big a job for me.
   I am, after all, supposed to be working!

I have the greatest respect for Peter and all the others who work so hard at
this project.  I'm obviously having some trouble understanding the
communication model, but I'll get it eventually.  Peace.

			     -- David Brahm (a215020 at agate.fmr.com)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maj at waikato.ac.nz  Wed Oct  3 23:22:27 2001
From: maj at waikato.ac.nz (Murray Jorgensen)
Date: Thu, 04 Oct 2001 09:22:27 +1200
Subject: [R] 1.3.1 Windows binaries install
In-Reply-To: <200110030950.VAA18500@gosset.stats.waikato.ac.nz>
References: <3BB9D882.1010602@ai.univie.ac.at>
Message-ID: <200110032122.JAA19944@gosset.stats.waikato.ac.nz>

I see my error now. Those packages I mention are in "base".

At 09:50 PM 3-10-01 +1200, Murray Jorgensen wrote:
>I've just upgraded to 1.3.1. The new installer SetupR.exe is wonderful!
>Thanks,
>Brian! Also install.packages() works well.
>
>A few questions, though.
>
>1. There seems to be no help on tseries.
>
>2. The old packages from my earlier installation of R appear along with the
>new
>packages in the html packages help file. I find that I can load these
packages
>still, with a lot of searching noise coming from the disk drive. Now this may
>be an advantage, but I will surely want to junk some of these old packages
>soon. I wonder if things will get messy at this point?
>
>3. Some familiar old packages are gone. I wonder where their functionality is
>now? I'm thinking of (for me) ctest, eda, lqs, modreg, mva, splines, stepfun,
>tcltk. (I won't ask this about ts - maybe I can use ts help for tseries
>functions?)
>
>Murray Jorgensen
>
>
>
>
>Dr Murray Jorgensen      http://www.stats.waikato.ac.nz/Staff/maj.html 
>Department of Statistics, University of Waikato, Hamilton, New Zealand 
>Email: maj at waikato.ac.nz                            Fax +64-7 838 4155
>Phone +64-7 838 4773 home phone +64-7 856 6705  Mobile +64-21 139 5862
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._
>  
Dr Murray Jorgensen      http://www.stats.waikato.ac.nz/Staff/maj.html 
Department of Statistics, University of Waikato, Hamilton, New Zealand 
Email: maj at waikato.ac.nz                            Fax +64-7 838 4155
Phone +64-7 838 4773 home phone +64-7 856 6705  Mobile +64-21 139 5862

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From a215020 at agate.fmr.com  Thu Oct  4 00:17:30 2001
From: a215020 at agate.fmr.com (David Brahm)
Date: Wed, 3 Oct 2001 18:17:30 -0400 (EDT)
Subject: [R] Several R vs S-Plus issues
Message-ID: <200110032217.f93MHUo19862@arbres1a.FMR.Com>

I wrote:
> R-help sure is filled with a lot of negativity.

Well, I went to document this, and found I was confusing r-help in my mind
with some other mailing lists, including s-news.  I take it back.

			-- David Brahm (a215020 at agate.fmr.com)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Thu Oct  4 02:32:11 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Wed, 3 Oct 2001 17:32:11 -0700 (PDT)
Subject: [R] Several R vs S-Plus issues
In-Reply-To: <200110032059.f93KxLo19424@arbres1a.FMR.Com>
Message-ID: <Pine.A41.4.33.0110031729510.35520-100000@homer37.u.washington.edu>

On Wed, 3 Oct 2001, David Brahm wrote:
> Thomas Lumley (tlumley at u.washington.edu) wrote:
> > deep breaths and count to 10...
>
> OK, so here's what I think I've learned.  Feedback please if I've still got it
> wrong.
> 1) Do not Cc: to r-bugs!!!
> 2) Bugs go individually to r-bugs.  Here is the only one I think qualifies:
>    - myfun <- function(x, ...) {x[...] <- 0;  x}  fails if no ... given

> 3) Feature and compatibility requests go to r-devel, to which I am just now
>    subscribed.  Separate messages, I suppose.  These would be:
>    - LETTERS[c(NA,2)] in S is c("","B"), but in R is c("NA","B")
>    - system() has no "input" argument in R
>    - No slice.index()
>    - No rowSums(), colSums(), colVars(), etc.
>    - No unpaste()

There's no need for separate messages for r-devel, in fact it may be
easier with things together.  R-bugs is a special case.

Perhaps the FAQ should note that if R-devel and R-help are bulletin boards
then R-bugs is a filing cabinet.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From akudus at stat.unisba.ac.id  Thu Oct  4 03:13:45 2001
From: akudus at stat.unisba.ac.id (Abdul Kudus)
Date: Thu, 04 Oct 2001 08:13:45 +0700
Subject: [R] Summary on random data with zero skew and some kurtosis
Message-ID: <200110040108.DAA19683@stat.math.ethz.ch>

Thanks to all who response my problem.  Here are my summary :

1.  from Dirk Eddelbuettel <edd at debian.org> 

We could try a mixture of normals -- ie flip a coin (use a uniform with
some cutoff c where 0 < c < 1 ) to choose between N(0, sigma_1) and N(0,
sigma_2). 


2.  from Michaell Taylor <michaell.taylor at reis.com> 

We could use the gld library to specify the lambdas of virtually any 
distribution, including the one that you are interested in.  It is 
available  from CRAN.  

Calculating the lambda's from known moments is a bit tricker, but he 
has a Maple routine to do just that.

3.  from Uwe Ligges <ligges at statistik.uni-dortmund.de> 

That's a theoretical problem, not an R problem. Or I misunderstood....

At first select a distribution, which
a) has zero skewness
b) a well defined and preferably easy to calculate kurtosis.

After that, choose the parameters of the distribution, so that the
theoretical value of the kurtosis is equal to the value you want to 
get. 

At last generate renadom numbers for that distribution with the now
given parameters.

4.  from John Fox <jfox at mcmaster.ca> 

Why not sample from a t-distribution with small df?

5.  Thomas Lumley <tlumley at u.washington.edu> 

The t-distribution family may help.  These have zero skewness and
kurtosis ranging from the normal to infinite. He doen't know offhand the
relationship between degrees of freedom and kurtosis, but it should be
easy to look up (or evaluate by simulation).

6.  Bob Wheeler <bwheeler at echip.com>

We can use the Johnson system. See the SuppDists package.


Abdul Kudus
=====================
Dept. of Statistics
Bandung Islamic University
Indonesia
====================


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From akudus at stat.unisba.ac.id  Wed Oct  3 03:42:24 2001
From: akudus at stat.unisba.ac.id (Abdul Kudus)
Date: Wed, 03 Oct 2001 08:42:24 +0700
Subject: [R] Summary : Generate random data from dist. with 0 skewness and some
	kurtosis
Message-ID: <200110040202.EAA23337@stat.math.ethz.ch>

Thanks to all who response my problem.  Here are my summary :

1.  from Dirk Eddelbuettel <edd at debian.org> 

We could try a mixture of normals -- ie flip a coin (use a uniform with
some cutoff c where 0 < c < 1 ) to choose between N(0, sigma_1) and N(0,
sigma_2). 


2.  from Michaell Taylor <michaell.taylor at reis.com> 

We could use the gld library to specify the lambdas of virtually any 
distribution, including the one that you are interested in.  It is 
available  from CRAN.  

Calculating the lambda's from known moments is a bit tricker, but he 
has a Maple routine to do just that.

3.  from Uwe Ligges <ligges at statistik.uni-dortmund.de> 

That's a theoretical problem, not an R problem. Or I misunderstood....

At first select a distribution, which
a) has zero skewness
b) a well defined and preferably easy to calculate kurtosis.

After that, choose the parameters of the distribution, so that the
theoretical value of the kurtosis is equal to the value you want to 
get. 

At last generate renadom numbers for that distribution with the now
given parameters.

4.  from John Fox <jfox at mcmaster.ca> 

Why not sample from a t-distribution with small df?

5.  Thomas Lumley <tlumley at u.washington.edu> 

The t-distribution family may help.  These have zero skewness and
kurtosis ranging from the normal to infinite. He doen't know offhand the
relationship between degrees of freedom and kurtosis, but it should be
easy to look up (or evaluate by simulation).

6.  Bob Wheeler <bwheeler at echip.com>

We can use the Johnson system. See the SuppDists package.


Abdul Kudus
=====================
Dept. of Statistics
Bandung Islamic University
Indonesia
====================


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ozric at web.de  Thu Oct  4 12:18:47 2001
From: ozric at web.de (C. Schulz)
Date: Thu, 4 Oct 2001 12:18:47 +0200
Subject: [R] tcl/tk & Windows2000?
Message-ID: <200110041018.f94AIku15577@mailgate5.cinetic.de>

Hello,
i have some problems to run tcltk/R
on  with Win2000.
With Win98 i have no problems !?

When i do this in R, i get no message-error & tcl/tk
is really here !

Sys.putenv("TCL_LIBRARY"="C:/tcl/lib/tcl83")

,but after i use :
library(tcltk)
,i get :
Error in dyn.load(x, as.logical(local), as.logical(now)) :
unable to load shared library "D:/XY/rw1030/library/tcltk/libs/tcl83":
LoadLibrary failure: Das angegebene Modul wurde nicht gefunden.
Error in library(tcltk) : .First.lib failed

Tcl/Tk was correct installed, i used ActiveState TCL/TK, too.
Is it possible i have copy some files to /winnt/system32 folder ?


thanks for advance & reagards,
christian


_______________________________________________________________________




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mark at myatt.demon.co.uk  Thu Oct  4 10:58:32 2001
From: mark at myatt.demon.co.uk (Mark Myatt)
Date: Thu, 4 Oct 2001 09:58:32 +0100
Subject: [R] can I add to a plot and auto-re-scale axes?
In-Reply-To: <Pine.LNX.4.10.10109302158270.27662-100000@magic.ccmr.cornell.edu>
References: <Pine.LNX.4.10.10109302158270.27662-100000@magic.ccmr.cornell.edu>
Message-ID: <5eEGfHA4SCv7EwKz@myatt.demon.co.uk>

Robert D. Merithew <merithew at ccmr.cornell.edu> writes:
>(I'm new to R)
> 
>Is there a way to add data to an existing plot, and have the plot axes
>rescaled automatically (i.e. if the new data lie outside the current
>axes) ?
> 
>If not, how can I specify multiple datasets at once, so the axes are
>scaled to accomodate all sets?

Rescaling is not possible as the scale is set by the first call to
plot(). If by "add data" you mean that you want to plot multiple data
series and you now in advance which series you want to add then you
should set ylim on the first plot() call to the range of the widest data
series and then add the series to the initial plot.

Mark

--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From a296180 at mica.fmr.com  Thu Oct  4 12:58:26 2001
From: a296180 at mica.fmr.com (David Kane  <David Kane)
Date: Thu, 4 Oct 2001 06:58:26 -0400
Subject: [R] Strange behavior with saved character vectors containing a slash
Message-ID: <15292.16594.74893.279772@gargle.gargle.HOWL>

I am seeing some strange behavior using save on a character vector containing a
slash. If this is a bug, I will happily submit it (as a single entry! ;-) ) to
r-bugs. Here is an example involving "VIA\B".

> version
         _                   
platform sparc-sun-solaris2.6
arch     sparc               
os       solaris2.6          
system   sparc, solaris2.6   
status                       
major    1                   
minor    3.0                 
year     2001                
month    06                  
day      22                  
language R                   
> ls()
character(0)
> test <- "VIA\\B"	# I proceed the \ with another to escape it.
> cat(test, "\n")
VIA\B			# This is how the string should look.
> save(test, ascii = TRUE, file = "here")
> remove(list = ls())
> ls()
character(0)
> load("here")
> ls()
[1] "test"
> cat(test, "\n")
VIAB		# This is not how the string should look! Where did the \ go?
 
> unlink("here")

Any insights would be much appreciated.

Regards,

Dave Kane
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Oct  4 13:22:25 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Oct 2001 13:22:25 +0200
Subject: [R] Strange behavior with saved character vectors containing a slash
In-Reply-To: <15292.16594.74893.279772@gargle.gargle.HOWL>
References: <15292.16594.74893.279772@gargle.gargle.HOWL>
Message-ID: <x2eloj4pla.fsf@blueberry.kubism.ku.dk>

"David Kane  <David Kane" <a296180 at mica.fmr.com> writes:

> I am seeing some strange behavior using save on a character vector containing a
> slash. If this is a bug, I will happily submit it (as a single entry! ;-) ) to
> r-bugs. Here is an example involving "VIA\B".
> 

It's a bug alright. In saveload.c we have

        if (x[i] <= 32 || x[i] > 126) {
            switch(x[i]) {
            case '\n': fprintf(fp, "\\n");  break;
            case '\t': fprintf(fp, "\\t");  break;
            case '\v': fprintf(fp, "\\v");  break;
            case '\b': fprintf(fp, "\\b");  break;
            case '\r': fprintf(fp, "\\r");  break;
            case '\f': fprintf(fp, "\\f");  break;
            case '\a': fprintf(fp, "\\a");  break;
            case '\\': fprintf(fp, "\\\\"); break;
            case '\?': fprintf(fp, "\\?");  break;
            case '\'': fprintf(fp, "\\'");  break;
            case '\"': fprintf(fp, "\\\""); break;
                /* cannot print char in octal mode -> cast to unsigned
                   char first */
            default  : fprintf(fp, "\\%03o", (unsigned char) x[i]); break;
            }
        }

Which *looks* like it handles the backslash, but doesn't....
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andy_liaw at merck.com  Thu Oct  4 14:11:56 2001
From: andy_liaw at merck.com (Liaw, Andy)
Date: Thu, 04 Oct 2001 08:11:56 -0400
Subject: [R] Several R vs S-Plus issues
Message-ID: <51F9C42DA15CD311BD220008C707D81903DC82CD@usrymx10.merck.com>

> > R is open source. If you want to change something, you are 
> free to change 
> > it and you are free to contribute your changes to the community.
> 
> Really?  You think nobody in the community would complain if 
> I went in and
> changed the behavior of "[" for character vectors?  I don't 
> really understand
> the OSS model, but I doubt that.  I think I am a "user", not 
> a "developer".

IMHO, for an OSS project, the line between "user" and "developer" tend to be
very fuzzy.  Many contributions to the code came from people who *are*
users.  They added features or fixed bugs because they want/need to for
themselves, and feel it might be useful for others.

No one can/will stop you from modifying the behavior of "[" for character
vectors in R for your own use.  Whether your modification will be accepted
by the R community at large is an entirely different matter.
 
> 3) Feature and compatibility requests go to r-devel, to which 
> I am just now
>    subscribed.  Separate messages, I suppose.  These would be:
>    - LETTERS[c(NA,2)] in S is c("","B"), but in R is c("NA","B")

My vote is for this to be called a bug.  The S behavior is consistent.  R
isn't.

>    Philippe Grosjean (phgrosje at ulb.ac.be) suggested I make a 
> project of
>    collecting all such differences, but frankly that's too 
> big a job for me.
>    I am, after all, supposed to be working!

And what do you think all those who put their time and effort into
writing/fixing/maintaining R are doing?  AFAIK not a single one of them gets
a penny for the work they put into R.
 
> I have the greatest respect for Peter and all the others who 
> work so hard at
> this project.  I'm obviously having some trouble understanding the
> communication model, but I'll get it eventually.  Peace.
> 
> 			     -- David Brahm (a215020 at agate.fmr.com)

Just my $0.02...

Andy
Andy I. Liaw, PhD
Biometrics Research          Phone: (732) 594-0820
Merck & Co., Inc.              Fax: (732) 594-1565
P.O. Box 2000, RY70-38            Rahway, NJ 07065
mailto:andy_liaw at merck.com


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mark at myatt.demon.co.uk  Thu Oct  4 14:23:50 2001
From: mark at myatt.demon.co.uk (Mark Myatt)
Date: Thu, 4 Oct 2001 13:23:50 +0100
Subject: [R] tcl/tk & Windows2000?
In-Reply-To: <200110041018.f94AIku15577@mailgate5.cinetic.de>
References: <200110041018.f94AIku15577@mailgate5.cinetic.de>
Message-ID: <05f1m1AWTFv7EwZM@myatt.demon.co.uk>

C. Schulz <ozric at web.de> writes:
>Hello,
>i have some problems to run tcltk/R
>on  with Win2000.
>With Win98 i have no problems !?
>
>When i do this in R, i get no message-error & tcl/tk
>is really here !
>
>Sys.putenv("TCL_LIBRARY"="C:/tcl/lib/tcl83")
>
>,but after i use :
>library(tcltk)
>,i get :
>Error in dyn.load(x, as.logical(local), as.logical(now)) :
>unable to load shared library "D:/XY/rw1030/library/tcltk/libs/tcl83":
>LoadLibrary failure: Das angegebene Modul wurde nicht gefunden.
>Error in library(tcltk) : .First.lib failed
>
>Tcl/Tk was correct installed, i used ActiveState TCL/TK, too.
>Is it possible i have copy some files to /winnt/system32 folder ?

Not of direct help but I find that Win2000 stops setup routines writing
to both the system directory and the registry. I think you will need to
log in as a user with write rights to the system directories and re-
install your TCL/TK support libraries. Don't overwrite any newer files
as many of the system .DLLs are win2000 specific.

I hope that helps,

Mark

--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Oct  4 14:53:27 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Oct 2001 14:53:27 +0200
Subject: [R] tcl/tk & Windows2000?
In-Reply-To: <05f1m1AWTFv7EwZM@myatt.demon.co.uk>
References: <200110041018.f94AIku15577@mailgate5.cinetic.de>
	<05f1m1AWTFv7EwZM@myatt.demon.co.uk>
Message-ID: <x2669v4ldk.fsf@blueberry.kubism.ku.dk>

Mark Myatt <mark at myatt.demon.co.uk> writes:

> C. Schulz <ozric at web.de> writes:
> >Hello,
> >i have some problems to run tcltk/R
> >on  with Win2000.
> >With Win98 i have no problems !?
> >
> >When i do this in R, i get no message-error & tcl/tk
> >is really here !
> >
> >Sys.putenv("TCL_LIBRARY"="C:/tcl/lib/tcl83")
> >
> >,but after i use :
> >library(tcltk)
> >,i get :
> >Error in dyn.load(x, as.logical(local), as.logical(now)) :
> >unable to load shared library "D:/XY/rw1030/library/tcltk/libs/tcl83":
> >LoadLibrary failure: Das angegebene Modul wurde nicht gefunden.
> >Error in library(tcltk) : .First.lib failed
> >
> >Tcl/Tk was correct installed, i used ActiveState TCL/TK, too.
> >Is it possible i have copy some files to /winnt/system32 folder ?
> 
> Not of direct help but I find that Win2000 stops setup routines writing
> to both the system directory and the registry. I think you will need to
> log in as a user with write rights to the system directories and re-
> install your TCL/TK support libraries. Don't overwrite any newer files
> as many of the system .DLLs are win2000 specific.

Hmm. This looks more like it is ignoring the TCL_LIBRARY setting.
Perhaps you should try to set it in a different way (in the .Renviron
file etc.).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fharrell at virginia.edu  Thu Oct  4 15:05:59 2001
From: fharrell at virginia.edu (Frank E Harrell Jr)
Date: Thu, 04 Oct 2001 09:05:59 -0400
Subject: [R] plot of Bernoulli data
References: <5429125E11E4D411AF7300805FE603A8014CEE86@groexmbcr02.pfizer.com>
Message-ID: <3BBC5EB7.C173E2E1@virginia.edu>

Greg - My model for this type of application is to
either use

- shingle objects with Trellis/Lattice to allow overlapping
  intervals (and for this application there is good reason
  for intervals to overlap if you are not using the
  better loess/lowess solution)
or
- the cut2 function in the soon (I hope) to be beta-released
  Hmisc library, with tapply and all the other stratified
  computation functions.  cut2 has the same arguments as
  cut but also arguments g (number of quantile groups) and
  m (number of observations per interval)

cut2 at present does not handle fixed windows as you
describe, but in general such windows are problematic.

The bigger point though is that there may be a slight
advantage in separating the stratification code (e.g.,
cut2) from the computation code (e.g., tapply and
summarize (in Hmisc)).

Frank Harrell


"Warnes, Gregory R" wrote:
> 
> In the next release of the gregmisc library there is a function "wapply"
> that applies a specified function over 'windows' of x-y data (code below).
> You would use it in this case as:
> 
>  x<-sort(runif(100,1,20))
>  p<-pnorm(x,10,3)
>  y<-as.numeric(runif(x)<p)
>  plot(x,y)
>  lines(x,p)
> 
>  # draw a line with 10 points, each computed on regions spanning 1/5th of
> the x range
>  lines(wapply(x,y,n=10,width=1/5),col="red")
> 
> -Greg
> 
> # $Id: wapply.R,v 1.2 2001/08/31 23:45:45 warneg Exp $
> #
> "wapply" _ function( x, y, fun=mean, method="range",
>                     width=1/10, n=50, ...)
> {
>   method <- match.arg(method, c("width","range","nobs","fraction"))
> 
>   if(method == "width" || method == "range" )
>     {
>       if(method=="range")
>         width <- width * range(x)
> 
> 
>       pts _ seq(min(x),max(x),length.out=n)
> 
>       result _ sapply( pts, function(pts,y,width,fun,XX,...)
>                       {
>                         low _ min((pts-width/2),max(XX))
>                         high _ max((pts+width/2), min(XX))
>                         return (fun(y[(XX>= low) & (XX<=high)],...))
>                       },
>                       y=y,
>                       width=width,
>                       fun=fun,
>                       XX = x,
>                       ...)
> 
>       return(x=pts,y=result)
>     }
>   else # method=="nobs" || method=="fraction"
>     {
>       if( method=="fraction")
>         width <- floor(length(x) * width)
> 
>       ord <- order(x)
>       x  <- x[ord]
>       y  <- y[ord]
> 
>       n  <- length(x)
>       center  <- 1:n
>       below <- sapply(center - width/2, function(XX) max(1,XX) )
>       above <- sapply(center + width/2, function(XX) min(n,XX) )
> 
>       retval  <- list()
>       retval$x  <- x
>       retval$y  <- apply(cbind(below,above), 1,
>                          function(x) fun(y[x[1]:x[2]],...) )
> 
>       return(retval)
>     }
> 
> }
> 
>  >  -----Original Message-----
>  >  From: Bill Simpson [mailto:wsi at gcal.ac.uk]
>  >  Sent: Tuesday, October 02, 2001 7:57 AM
>  >  To: r-help at stat.math.ethz.ch
>  >  Subject: Re: [R] plot of Bernoulli data
>  >
>  >
>  >  >  x<-sort(runif(100,1,20))
>  >  >  p<-pnorm(x,10,3)
>  >  >  y<-as.numeric(runif(x)<p)
>  >  >  plot(x,y)
>  >  >  lines(x,p)
>  >  df<-data.frame(x,y)
>  >  aggregate(df,list(x=(x<5),(x>5)&(x<10),(x>10) &
>  >  (x<15),(x>15)), FUN=mean)
>  >  gives me what I want but if anyone has a better way to collect the
>  >  observations into bins I'd like to hear it. It would be nice to
>  >  pass along something like
>  >  breaks<-c(5,10,15,20)
>  >
>  >  Thanks
>  >
>  >  Bill Simpson
>  >
>  >  -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
>  >  -.-.-.-.-.-.-.-.-.-
>  >  r-help mailing list -- Read
>  >  http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>  >  Send "info", "help", or "[un]subscribe"
>  >  (in the "body", not the subject !)  To:
>  >  r-help-request at stat.math.ethz.ch
>  >  _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
>  >  _._._._._._._._._._
>  >
> 
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From etptupaf at bs.ehu.es  Thu Oct  4 17:38:43 2001
From: etptupaf at bs.ehu.es (F. Tusell)
Date: Thu, 4 Oct 2001 17:38:43 +0200
Subject: [R] Ordered factors and DBMS
Message-ID: <200110041538.RAA00953@agesi.bs.ehu.es>

Is there any way of preserving order of ordered factors when storing a
table in PostgreSQL?

I have been  using PostgreSQL and the RPgSQL package  to store a large
table with answers such  as "Strong disagreement", "Strong agreement",
"Mild disagreement".  "Mild agreement".  When reading the  table, such
answers are  turned into  factors, apparently in  reverse alphabetical
order.  If I  reorder them  using ordered(factor,  levels=the  order I
want), everything  is fine for the  session, but saving  the table and
re-reading it reverts to the original order.

I have  a vague  feeling of having  seen this  asked, but I  could not
locate any  references. I looked  also B.D. Ripley's  "Using Databases
with R", but this problem is not discussed.


ft.
-- 
Fernando TUSELL                                e-mail:
Departamento de Econometr?a y Estad?stica           etptupaf at bs.ehu.es 
Facultad de CC.EE. y Empresariales             Tel:   (+34)94.601.3733
Avenida Lendakari Aguirre, 83                  Fax:   (+34)94.601.3754
E-48015 BILBAO  (Spain)                        Secr:  (+34)94.601.3740
PGP: finger etptupaf at bsdx01.bs.ehu.es          http://etdx01.bs.ehu.es
----------------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tord.snall at ebc.uu.se  Thu Oct  4 14:51:48 2001
From: tord.snall at ebc.uu.se (Tord Snall)
Date: Thu, 04 Oct 2001 14:51:48 +0200
Subject: [R] sort data.frame and contour()
Message-ID: <3.0.6.32.20011004145148.009bc640@mail.anst.uu.se>

Dear all,

I would like to know if there is a function for sorting a data.frame based
on one column. sort() does it for a single vector but not for the whole
data. order() does it if there are relations between the columns but in my
case it is simply a data.frame.

Further, I would like to plot other data,

pop.size<- c(800, 800, 1500, 1000, 158, 300, 740, 250, 2000, 1500, 250, 700)
fem.frek<- c(0.054, 0.099, 0.04, 0.113, 0.234, 0.241, 0.099, 0.182, 0.176,
0.175, 0.126, 0.09)
rel.femfec<- c(0.975, 0.713, 1.035, 1.745, 0.77, 1.162, 0.94, 0.636, 2.12,
2.159, 0.428, 1.217)
emil.data<- as.data.frame(cbind(pop.size, fem.frek,asfem.frek,rel.femfec))
attach(emil.data)
contour(pop.size, fem.frek, matrix(rel.femfec, ncol=length(fem.frek)))

using contour() but I get an error message and read 

   x,y: locations of grid lines at which the values in `z' are
          measured.  These must be in ascending order.  By default,
    
Must a model be fitted first and the model then plotted, or am I missing
something essential?


Thanks in advance!

Sincerely,
Tord Sn?ll


-----------------------------------------------------------------------
Tord Sn?ll
Avd. f v?xtekologi, Evolutionsbiologiskt centrum, Uppsala universitet
Dept. of Plant Ecology, Evolutionary Biology Centre, Uppsala University
Villav?gen 14			
SE-752 36 Uppsala, Sweden
Tel: 018-471 28 82 (int +46 18 471 28 82) (work)
Tel: 018-25 71 33 (int +46 18 25 71 33) (home)
Fax: 018-55 34 19 (int +46 18 55 34 19) (work)
E-mail: Tord.Snall at ebc.uu.se
http://www.vaxtbio.uu.se/resfold/snall.htm
------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bates at stat.wisc.edu  Thu Oct  4 16:06:21 2001
From: bates at stat.wisc.edu (Douglas Bates)
Date: 04 Oct 2001 09:06:21 -0500
Subject: [R] Ordered factors and DBMS
In-Reply-To: <200110041538.RAA00953@agesi.bs.ehu.es>
References: <200110041538.RAA00953@agesi.bs.ehu.es>
Message-ID: <6ry9mra49u.fsf@franz.stat.wisc.edu>

"F. Tusell" <etptupaf at bs.ehu.es> writes:

> Is there any way of preserving order of ordered factors when storing a
> table in PostgreSQL?
> 
> I have been  using PostgreSQL and the RPgSQL package  to store a large
> table with answers such  as "Strong disagreement", "Strong agreement",
> "Mild disagreement".  "Mild agreement".  When reading the  table, such
> answers are  turned into  factors, apparently in  reverse alphabetical
> order.  If I  reorder them  using ordered(factor,  levels=the  order I
> want), everything  is fine for the  session, but saving  the table and
> re-reading it reverts to the original order.
> 
> I have  a vague  feeling of having  seen this  asked, but I  could not
> locate any  references. I looked  also B.D. Ripley's  "Using Databases
> with R", but this problem is not discussed.

I think it would be difficult to do this in a single table in
PostgreSQL but it could be expressed naturally as two tables and a
join.  The first table would contain the data as factor levels and the
second table would give the correspondence between levels and labels.
The join would provide the data as labels by matching the levels.

Another possibility is to define a PostgreSQL data type for this.

MySQL does have this type of structure.  They call it an enum
data type.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From york at noaa.gov  Thu Oct  4 17:15:43 2001
From: york at noaa.gov (Anne York)
Date: Thu, 4 Oct 2001 08:15:43 -0700 (PDT)
Subject: [R] tcl/tk & Windows2000?
In-Reply-To: <x2669v4ldk.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10110040814010.29852-100000@ofis450a.akctr.noaa.gov>

Are you sure your library name is correct? The default name is 
"c:/ProgramFiles/Tcl/lib/tcl8.3"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Anne E. York
National Marine Mammal Laboratory
Seattle WA 98115-0070  USA
e-mail: anne.york at noaa.gov
Voice: +1 206-526-4039
Fax: +1 206-526-6615
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

On 4 Oct 2001, Peter Dalgaard BSA wrote:

>Mark Myatt <mark at myatt.demon.co.uk> writes:
>
>> C. Schulz <ozric at web.de> writes:
>> >Hello,
>> >i have some problems to run tcltk/R
>> >on  with Win2000.
>> >With Win98 i have no problems !?
>> >
>> >When i do this in R, i get no message-error & tcl/tk
>> >is really here !
>> >
>> >Sys.putenv("TCL_LIBRARY"="C:/tcl/lib/tcl83")
>> >
>> >,but after i use :
>> >library(tcltk)
>> >,i get :
>> >Error in dyn.load(x, as.logical(local), as.logical(now)) :
>> >unable to load shared library "D:/XY/rw1030/library/tcltk/libs/tcl83":
>> >LoadLibrary failure: Das angegebene Modul wurde nicht gefunden.
>> >Error in library(tcltk) : .First.lib failed
>> >
>> >Tcl/Tk was correct installed, i used ActiveState TCL/TK, too.
>> >Is it possible i have copy some files to /winnt/system32 folder ?
>> 
>> Not of direct help but I find that Win2000 stops setup routines writing
>> to both the system directory and the registry. I think you will need to
>> log in as a user with write rights to the system directories and re-
>> install your TCL/TK support libraries. Don't overwrite any newer files
>> as many of the system .DLLs are win2000 specific.
>
>Hmm. This looks more like it is ignoring the TCL_LIBRARY setting.
>Perhaps you should try to set it in a different way (in the .Renviron
>file etc.).
>
>-- 
>   O__  ---- Peter Dalgaard             Blegdamsvej 3  
>  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
> (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
>~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From a215020 at agate.fmr.com  Thu Oct  4 17:29:01 2001
From: a215020 at agate.fmr.com (David Brahm)
Date: Thu, 4 Oct 2001 11:29:01 -0400 (EDT)
Subject: [R] Several R vs S-Plus issues
Message-ID: <200110041529.f94FT1E24988@arbres1a.FMR.Com>

I wrote, re: collecting R/S differences,
> frankly that's too big a job for me. I am, after all, supposed to be working!

Andy I. Liaw <andy_liaw at merck.com> wrote:
> And what do you think all those who put their time and effort into
> writing/fixing/maintaining R are doing?

They are better people than me, I admit it!  I just don't want to promise
something I can't deliver.

  Me> LETTERS[c(NA,2)] in S is c("","B"), but in R is c("NA","B")
Andy> My vote is for this to be called a bug.

I have moved my further comments on this to R-devel.

				-- David Brahm (brahm at alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gregory_r_warnes at groton.pfizer.com  Thu Oct  4 17:54:15 2001
From: gregory_r_warnes at groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 4 Oct 2001 11:54:15 -0400 
Subject: [R] plot of Bernoulli data
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEE99@groexmbcr02.pfizer.com>

Hi Frank,

Actually the 'wapply' function I have does 'overlapping' windows.  (It would
have to if it uses 1/5 of the range at each of 10 points, n'est-pas?)  The
main reason I created it was to add a 'local variance' estimate to plots in
an attempt to more easily detect changes in variability. EG:

x <- rnorm(500,sd=10)
y <- rnorm(500,sd=sqrt(abs(x)))
plot(x,y)

sdplus <- function(x,sign=1) 
  {
    if(length(x)>0) 
        mean(x) + sign * sqrt(var(x)) 
    else 
        NA
  }
lines(wapply(x,y,fun=sdplus,width=1/5),col="red")
lines(wapply(x,y,fun=sdplus,sign=-1,width=1/5),col="red")

Not very pretty, but does what I need. 

I'm not familiar with the trellace/lattice functions.  Is there a better or
more elegant way to do this?

-Greg

 >  -----Original Message-----
 >  From: Frank E Harrell Jr [mailto:fharrell at virginia.edu]
 >  Sent: Thursday, October 04, 2001 9:06 AM
 >  To: Warnes, Gregory R
 >  Cc: 'Bill Simpson'; 'r-help at stat.math.ethz.ch'
 >  Subject: Re: [R] plot of Bernoulli data
 >  
 >  
 >  Greg - My model for this type of application is to
 >  either use
 >  
 >  - shingle objects with Trellis/Lattice to allow overlapping
 >    intervals (and for this application there is good reason
 >    for intervals to overlap if you are not using the
 >    better loess/lowess solution)
 >  or
 >  - the cut2 function in the soon (I hope) to be beta-released
 >    Hmisc library, with tapply and all the other stratified
 >    computation functions.  cut2 has the same arguments as
 >    cut but also arguments g (number of quantile groups) and
 >    m (number of observations per interval)
 >  
 >  cut2 at present does not handle fixed windows as you
 >  describe, but in general such windows are problematic.
 >  
 >  The bigger point though is that there may be a slight
 >  advantage in separating the stratification code (e.g.,
 >  cut2) from the computation code (e.g., tapply and
 >  summarize (in Hmisc)).
 >  
 >  Frank Harrell
 >  
 >  
 >  "Warnes, Gregory R" wrote:
 >  > 
 >  > In the next release of the gregmisc library there is a 
 >  function "wapply"
 >  > that applies a specified function over 'windows' of x-y 
 >  data (code below).
 >  > You would use it in this case as:
 >  > 
 >  >  x<-sort(runif(100,1,20))
 >  >  p<-pnorm(x,10,3)
 >  >  y<-as.numeric(runif(x)<p)
 >  >  plot(x,y)
 >  >  lines(x,p)
 >  > 
 >  >  # draw a line with 10 points, each computed on regions 
 >  spanning 1/5th of
 >  > the x range
 >  >  lines(wapply(x,y,n=10,width=1/5),col="red")
 >  > 
 >  > -Greg
 >  > 
 >  > # $Id: wapply.R,v 1.2 2001/08/31 23:45:45 warneg Exp $
 >  > #
 >  > "wapply" _ function( x, y, fun=mean, method="range",
 >  >                     width=1/10, n=50, ...)
 >  > {
 >  >   method <- match.arg(method, 
 >  c("width","range","nobs","fraction"))
 >  > 
 >  >   if(method == "width" || method == "range" )
 >  >     {
 >  >       if(method=="range")
 >  >         width <- width * range(x)
 >  > 
 >  > 
 >  >       pts _ seq(min(x),max(x),length.out=n)
 >  > 
 >  >       result _ sapply( pts, function(pts,y,width,fun,XX,...)
 >  >                       {
 >  >                         low _ min((pts-width/2),max(XX))
 >  >                         high _ max((pts+width/2), min(XX))
 >  >                         return (fun(y[(XX>= low) & 
 >  (XX<=high)],...))
 >  >                       },
 >  >                       y=y,
 >  >                       width=width,
 >  >                       fun=fun,
 >  >                       XX = x,
 >  >                       ...)
 >  > 
 >  >       return(x=pts,y=result)
 >  >     }
 >  >   else # method=="nobs" || method=="fraction"
 >  >     {
 >  >       if( method=="fraction")
 >  >         width <- floor(length(x) * width)
 >  > 
 >  >       ord <- order(x)
 >  >       x  <- x[ord]
 >  >       y  <- y[ord]
 >  > 
 >  >       n  <- length(x)
 >  >       center  <- 1:n
 >  >       below <- sapply(center - width/2, function(XX) max(1,XX) )
 >  >       above <- sapply(center + width/2, function(XX) min(n,XX) )
 >  > 
 >  >       retval  <- list()
 >  >       retval$x  <- x
 >  >       retval$y  <- apply(cbind(below,above), 1,
 >  >                          function(x) fun(y[x[1]:x[2]],...) )
 >  > 
 >  >       return(retval)
 >  >     }
 >  > 
 >  > }
 >  > 
 >  >  >  -----Original Message-----
 >  >  >  From: Bill Simpson [mailto:wsi at gcal.ac.uk]
 >  >  >  Sent: Tuesday, October 02, 2001 7:57 AM
 >  >  >  To: r-help at stat.math.ethz.ch
 >  >  >  Subject: Re: [R] plot of Bernoulli data
 >  >  >
 >  >  >
 >  >  >  >  x<-sort(runif(100,1,20))
 >  >  >  >  p<-pnorm(x,10,3)
 >  >  >  >  y<-as.numeric(runif(x)<p)
 >  >  >  >  plot(x,y)
 >  >  >  >  lines(x,p)
 >  >  >  df<-data.frame(x,y)
 >  >  >  aggregate(df,list(x=(x<5),(x>5)&(x<10),(x>10) &
 >  >  >  (x<15),(x>15)), FUN=mean)
 >  >  >  gives me what I want but if anyone has a better way 
 >  to collect the
 >  >  >  observations into bins I'd like to hear it. It would 
 >  be nice to
 >  >  >  pass along something like
 >  >  >  breaks<-c(5,10,15,20)
 >  >  >
 >  >  >  Thanks
 >  >  >
 >  >  >  Bill Simpson
 >  >  >
 >  >  >  -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
 >  >  >  -.-.-.-.-.-.-.-.-.-
 >  >  >  r-help mailing list -- Read
 >  >  >  http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
 >  >  >  Send "info", "help", or "[un]subscribe"
 >  >  >  (in the "body", not the subject !)  To:
 >  >  >  r-help-request at stat.math.ethz.ch
 >  >  >  _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
 >  >  >  _._._._._._._._._._
 >  >  >
 >  > 
 >  > LEGAL NOTICE
 >  > Unless expressly stated otherwise, this message is 
 >  confidential and may be privileged. It is intended for the 
 >  addressee(s) only. Access to this E-mail by anyone else is 
 >  unauthorized. If you are not an addressee, any disclosure 
 >  or copying of the contents of this E-mail or any action 
 >  taken (or not taken) in reliance on it is unauthorized and 
 >  may be unlawful. If you are not an addressee, please inform 
 >  the sender immediately.
 >  > 
 >  -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
 >  -.-.-.-.-.-.-.-.-.-
 >  > r-help mailing list -- Read 
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fharrell at virginia.edu  Thu Oct  4 18:19:55 2001
From: fharrell at virginia.edu (Frank E Harrell Jr)
Date: Thu, 04 Oct 2001 12:19:55 -0400
Subject: [R] plot of Bernoulli data
References: <5429125E11E4D411AF7300805FE603A8014CEE99@groexmbcr02.pfizer.com>
Message-ID: <3BBC8C2B.B488B576@virginia.edu>

Thanks for elaborating Greg - I see this more clearly now.
Trellis/lattice handles overlapping intervals that are
used to make multiple panels (using shingles).  That
would be for a third variable.  I don't think shingles
will help with what you are doing, so I see the
utility of your function more better now.  Thanks -Frank


"Warnes, Gregory R" wrote:
> 
> Hi Frank,
> 
> Actually the 'wapply' function I have does 'overlapping' windows.  (It would
> have to if it uses 1/5 of the range at each of 10 points, n'est-pas?)  The
> main reason I created it was to add a 'local variance' estimate to plots in
> an attempt to more easily detect changes in variability. EG:
> 
> x <- rnorm(500,sd=10)
> y <- rnorm(500,sd=sqrt(abs(x)))
> plot(x,y)
> 
> sdplus <- function(x,sign=1)
>   {
>     if(length(x)>0)
>         mean(x) + sign * sqrt(var(x))
>     else
>         NA
>   }
> lines(wapply(x,y,fun=sdplus,width=1/5),col="red")
> lines(wapply(x,y,fun=sdplus,sign=-1,width=1/5),col="red")
> 
> Not very pretty, but does what I need.
> 
> I'm not familiar with the trellace/lattice functions.  Is there a better or
> more elegant way to do this?
> 
> -Greg
> 
>  >  -----Original Message-----
>  >  From: Frank E Harrell Jr [mailto:fharrell at virginia.edu]
>  >  Sent: Thursday, October 04, 2001 9:06 AM
>  >  To: Warnes, Gregory R
>  >  Cc: 'Bill Simpson'; 'r-help at stat.math.ethz.ch'
>  >  Subject: Re: [R] plot of Bernoulli data
>  >
>  >
>  >  Greg - My model for this type of application is to
>  >  either use
>  >
>  >  - shingle objects with Trellis/Lattice to allow overlapping
>  >    intervals (and for this application there is good reason
>  >    for intervals to overlap if you are not using the
>  >    better loess/lowess solution)
>  >  or
>  >  - the cut2 function in the soon (I hope) to be beta-released
>  >    Hmisc library, with tapply and all the other stratified
>  >    computation functions.  cut2 has the same arguments as
>  >    cut but also arguments g (number of quantile groups) and
>  >    m (number of observations per interval)
>  >
>  >  cut2 at present does not handle fixed windows as you
>  >  describe, but in general such windows are problematic.
>  >
>  >  The bigger point though is that there may be a slight
>  >  advantage in separating the stratification code (e.g.,
>  >  cut2) from the computation code (e.g., tapply and
>  >  summarize (in Hmisc)).
>  >
>  >  Frank Harrell
>  >
>  >
>  >  "Warnes, Gregory R" wrote:
>  >  >
>  >  > In the next release of the gregmisc library there is a
>  >  function "wapply"
>  >  > that applies a specified function over 'windows' of x-y
>  >  data (code below).
>  >  > You would use it in this case as:
>  >  >
>  >  >  x<-sort(runif(100,1,20))
>  >  >  p<-pnorm(x,10,3)
>  >  >  y<-as.numeric(runif(x)<p)
>  >  >  plot(x,y)
>  >  >  lines(x,p)
>  >  >
>  >  >  # draw a line with 10 points, each computed on regions
>  >  spanning 1/5th of
>  >  > the x range
>  >  >  lines(wapply(x,y,n=10,width=1/5),col="red")
>  >  >
>  >  > -Greg
>  >  >
>  >  > # $Id: wapply.R,v 1.2 2001/08/31 23:45:45 warneg Exp $
>  >  > #
>  >  > "wapply" _ function( x, y, fun=mean, method="range",
>  >  >                     width=1/10, n=50, ...)
>  >  > {
>  >  >   method <- match.arg(method,
>  >  c("width","range","nobs","fraction"))
>  >  >
>  >  >   if(method == "width" || method == "range" )
>  >  >     {
>  >  >       if(method=="range")
>  >  >         width <- width * range(x)
>  >  >
>  >  >
>  >  >       pts _ seq(min(x),max(x),length.out=n)
>  >  >
>  >  >       result _ sapply( pts, function(pts,y,width,fun,XX,...)
>  >  >                       {
>  >  >                         low _ min((pts-width/2),max(XX))
>  >  >                         high _ max((pts+width/2), min(XX))
>  >  >                         return (fun(y[(XX>= low) &
>  >  (XX<=high)],...))
>  >  >                       },
>  >  >                       y=y,
>  >  >                       width=width,
>  >  >                       fun=fun,
>  >  >                       XX = x,
>  >  >                       ...)
>  >  >
>  >  >       return(x=pts,y=result)
>  >  >     }
>  >  >   else # method=="nobs" || method=="fraction"
>  >  >     {
>  >  >       if( method=="fraction")
>  >  >         width <- floor(length(x) * width)
>  >  >
>  >  >       ord <- order(x)
>  >  >       x  <- x[ord]
>  >  >       y  <- y[ord]
>  >  >
>  >  >       n  <- length(x)
>  >  >       center  <- 1:n
>  >  >       below <- sapply(center - width/2, function(XX) max(1,XX) )
>  >  >       above <- sapply(center + width/2, function(XX) min(n,XX) )
>  >  >
>  >  >       retval  <- list()
>  >  >       retval$x  <- x
>  >  >       retval$y  <- apply(cbind(below,above), 1,
>  >  >                          function(x) fun(y[x[1]:x[2]],...) )
>  >  >
>  >  >       return(retval)
>  >  >     }
>  >  >
>  >  > }
>  >  >
>  >  >  >  -----Original Message-----
>  >  >  >  From: Bill Simpson [mailto:wsi at gcal.ac.uk]
>  >  >  >  Sent: Tuesday, October 02, 2001 7:57 AM
>  >  >  >  To: r-help at stat.math.ethz.ch
>  >  >  >  Subject: Re: [R] plot of Bernoulli data
>  >  >  >
>  >  >  >
>  >  >  >  >  x<-sort(runif(100,1,20))
>  >  >  >  >  p<-pnorm(x,10,3)
>  >  >  >  >  y<-as.numeric(runif(x)<p)
>  >  >  >  >  plot(x,y)
>  >  >  >  >  lines(x,p)
>  >  >  >  df<-data.frame(x,y)
>  >  >  >  aggregate(df,list(x=(x<5),(x>5)&(x<10),(x>10) &
>  >  >  >  (x<15),(x>15)), FUN=mean)
>  >  >  >  gives me what I want but if anyone has a better way
>  >  to collect the
>  >  >  >  observations into bins I'd like to hear it. It would
>  >  be nice to
>  >  >  >  pass along something like
>  >  >  >  breaks<-c(5,10,15,20)
>  >  >  >
>  >  >  >  Thanks
>  >  >  >
>  >  >  >  Bill Simpson
>  >  >  >
>  >  >  >  -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
>  >  >  >  -.-.-.-.-.-.-.-.-.-
>  >  >  >  r-help mailing list -- Read
>  >  >  >  http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>  >  >  >  Send "info", "help", or "[un]subscribe"
>  >  >  >  (in the "body", not the subject !)  To:
>  >  >  >  r-help-request at stat.math.ethz.ch
>  >  >  >  _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
>  >  >  >  _._._._._._._._._._
>  >  >  >
>  >  >
>  >  > LEGAL NOTICE
>  >  > Unless expressly stated otherwise, this message is
>  >  confidential and may be privileged. It is intended for the
>  >  addressee(s) only. Access to this E-mail by anyone else is
>  >  unauthorized. If you are not an addressee, any disclosure
>  >  or copying of the contents of this E-mail or any action
>  >  taken (or not taken) in reliance on it is unauthorized and
>  >  may be unlawful. If you are not an addressee, please inform
>  >  the sender immediately.
>  >  >
>  >  -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
>  >  -.-.-.-.-.-.-.-.-.-
>  >  > r-help mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> >
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._
> 
> --
> Frank E Harrell Jr              Prof. of Biostatistics & Statistics
> Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
> U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tklistaddr at keittlab.bio.sunysb.edu  Thu Oct  4 19:28:43 2001
From: tklistaddr at keittlab.bio.sunysb.edu (Timothy H. Keitt)
Date: Thu, 04 Oct 2001 13:28:43 -0400
Subject: [R] Ordered factors and DBMS
References: <200110041538.RAA00953@agesi.bs.ehu.es>
Message-ID: <3BBC9C4B.4010103@keittlab.bio.sunysb.edu>

Doug's suggestions of joining two tables or defining a new type are a 
good ones, although you would have to do some manual manipulations in 
raw SQL. There is a general need to be able to split compound R types 
across more than one SQL column. It may be possible with RPgSQL if you 
redefind rpgsql.format.values.factor and friends, but I haven't tried 
this myself. It is something to think about as we develop a more general 
db interface.

Tim

F. Tusell wrote:

>Is there any way of preserving order of ordered factors when storing a
>table in PostgreSQL?
>
>I have been  using PostgreSQL and the RPgSQL package  to store a large
>table with answers such  as "Strong disagreement", "Strong agreement",
>"Mild disagreement".  "Mild agreement".  When reading the  table, such
>answers are  turned into  factors, apparently in  reverse alphabetical
>order.  If I  reorder them  using ordered(factor,  levels=the  order I
>want), everything  is fine for the  session, but saving  the table and
>re-reading it reverts to the original order.
>
>I have  a vague  feeling of having  seen this  asked, but I  could not
>locate any  references. I looked  also B.D. Ripley's  "Using Databases
>with R", but this problem is not discussed.
>
>
>ft.
>

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Thu Oct  4 20:02:17 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Thu, 4 Oct 2001 11:02:17 -0700 (PDT)
Subject: [R] sort data.frame and contour()
In-Reply-To: <3.0.6.32.20011004145148.009bc640@mail.anst.uu.se>
Message-ID: <Pine.A41.4.33.0110041059120.100374-100000@homer38.u.washington.edu>

On Thu, 4 Oct 2001, Tord Snall wrote:
>
> Further, I would like to plot other data,
>
> pop.size<- c(800, 800, 1500, 1000, 158, 300, 740, 250, 2000, 1500, 250, 700)
> fem.frek<- c(0.054, 0.099, 0.04, 0.113, 0.234, 0.241, 0.099, 0.182, 0.176,
> 0.175, 0.126, 0.09)
> rel.femfec<- c(0.975, 0.713, 1.035, 1.745, 0.77, 1.162, 0.94, 0.636, 2.12,
> 2.159, 0.428, 1.217)
> emil.data<- as.data.frame(cbind(pop.size, fem.frek,asfem.frek,rel.femfec))
> attach(emil.data)
> contour(pop.size, fem.frek, matrix(rel.femfec, ncol=length(fem.frek)))
>
> using contour() but I get an error message and read
>
>    x,y: locations of grid lines at which the values in `z' are
>           measured.  These must be in ascending order.  By default,
>
> Must a model be fitted first and the model then plotted, or am I missing
> something essential?

Yes, you have to use an interpolator of some sort first.  I had some
recollection of this being documented but I can't find it anywhere.

	-thomas



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From trafton at itd.nrl.navy.mil  Thu Oct  4 20:35:06 2001
From: trafton at itd.nrl.navy.mil (Greg Trafton)
Date: Thu, 4 Oct 2001 14:35:06 -0400
Subject: [R] printing out tables to a file using cat...
Message-ID: <15292.43994.430083.856642@viz.itd.nrl.navy.mil>

Hi, all.  I'd like to print out a table to a file (I'm using
cat(...,file="foobar")).  the problem is, cat doesn't print out the
headings for the table (making the table hard to interpret!).  For
example:

> table(showdistribution(nw.109.transitions, interruptions[1]))

interruption   opened-map 
           1            2 

> cat(table(showdistribution(nw.109.transitions, interruptions[1])))
1 2

how do I get the first format to show up in a file?

thanks!
greg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ltorgo at liacc.up.pt  Thu Oct  4 20:39:31 2001
From: ltorgo at liacc.up.pt (=?iso-8859-1?Q?Lu=EDs_Torgo?=)
Date: Thu, 4 Oct 2001 19:39:31 +0100
Subject: [R] Locale problems with strptime to convert dates
Message-ID: <NEBBILKFKLBAHMOHCJBAAEPBCAAA.ltorgo@liacc.up.pt>

Hi.
I'm using R1.3.1 on a x86 machine running Win 2000.

My problem:
- I want to convert a string to a date format using strptime. As I'm from
Portugal my locale information is the following:

> Sys.getlocale()
[1]
"LC_COLLATE=Portuguese_Portugal.1252;LC_CTYPE=Portuguese_Portugal.1252;LC_MO
NETARY=C;LC_NUMERIC=C;LC_TIME=Portuguese_Portugal.1252"

If I do the following everything works fine :

> k <- "25-Set-01"
> strptime(k,"%d-%b-%y")
[1] "2001-09-25"

because the month September in Portuguese is named "Setembro" and thus is
abbreviated as "set" and not "sep" as in English.

However, I'm interested in reading English dates. I was hoping that the
following would solve my problem:

> Sys.setlocale("LC_TIME", locale="USA")
[1] "English_United States.1252"

However, I get the following error :

> k <- "25-Sep-01"
> strptime(k,"%d-%b-%y")
[1] "NA"

Thank you for any help with this.
Luis Torgo
FEP/LIACC, University of Porto
ltorgo at liacc.up.pt
www.liacc.up.pt/~ltorgo

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From a296180 at mica.fmr.com  Thu Oct  4 20:53:39 2001
From: a296180 at mica.fmr.com (David Kane  <David Kane)
Date: Thu, 4 Oct 2001 14:53:39 -0400
Subject: [R] Problems merging with POSIXct objects and all = TRUE
Message-ID: <15292.45107.369769.945864@gargle.gargle.HOWL>

I am having problems using merge with all = TRUE when one of the dataframes has
objects of class POSIXct. If this is a bug, let me know and I will report it to
r-bugs. Here is an example:

> version
         _                   
platform sparc-sun-solaris2.6
arch     sparc               
os       solaris2.6          
system   sparc, solaris2.6   
status                       
major    1                   
minor    3.0                 
year     2001                
month    06                  
day      22                  
language R                   
> x <- data.frame(a = as.POSIXct(Sys.time() + (1:3)*10000), b = LETTERS[1:3])
> x
                    a b
1 2001-10-04 17:37:46 A
2 2001-10-04 20:24:26 B
3 2001-10-04 23:11:06 C
> y <- data.frame(b = LETTERS[3:4], c = 1:2)
> y
  b c
1 C 1
2 D 2
> merge(x, y)
  b                   a c
1 C 2001-10-04 23:11:06 1		# This answer is correct
> merge(x, y, all = TRUE)
Error in as.POSIXct.default(value) : Don't know how to convert `value' to class "POSIXct"

Any insights would be much appreciated.

Regards,

Dave Kane
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jasont at indigoindustrial.co.nz  Thu Oct  4 20:55:13 2001
From: jasont at indigoindustrial.co.nz (Jason Turner)
Date: Fri, 5 Oct 2001 06:55:13 +1200
Subject: [R] Ordered factors and DBMS
In-Reply-To: <200110041538.RAA00953@agesi.bs.ehu.es>; from etptupaf@bs.ehu.es on Thu, Oct 04, 2001 at 05:38:43PM +0200
References: <200110041538.RAA00953@agesi.bs.ehu.es>
Message-ID: <20011005065513.B2631@camille.indigoindustrial.co.nz>

Additions to Doug Bates' suggestions

> ... it could be expressed naturally as two tables and a
> join.  The first table would contain the data as factor levels and the
> second table would give the correspondence between levels and labels.

I think this is probably the most clear and elegant way to do it.
 
> Another possibility is to define a PostgreSQL data type for this.

See the PosgreSQL documentation for "CREATE TYPE".

Cheers

Jason
-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont at indigoindustrial.co.nz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ligges at statistik.uni-dortmund.de  Thu Oct  4 21:04:58 2001
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 04 Oct 2001 21:04:58 +0200
Subject: [R] printing out tables to a file using cat...
References: <15292.43994.430083.856642@viz.itd.nrl.navy.mil>
Message-ID: <3BBCB2DA.2BA50D3D@statistik.uni-dortmund.de>

Greg Trafton wrote:
> 
> Hi, all.  I'd like to print out a table to a file (I'm using
> cat(...,file="foobar")).  the problem is, cat doesn't print out the
> headings for the table (making the table hard to interpret!).  For
> example:
> 
> > table(showdistribution(nw.109.transitions, interruptions[1]))
> 
> interruption   opened-map
>            1            2
> 
> > cat(table(showdistribution(nw.109.transitions, interruptions[1])))
> 1 2
> 
> how do I get the first format to show up in a file?

See
 ?write.table

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From trafton at itd.nrl.navy.mil  Thu Oct  4 21:10:43 2001
From: trafton at itd.nrl.navy.mil (Greg Trafton)
Date: Thu, 4 Oct 2001 15:10:43 -0400
Subject: [R] printing out tables to a file using cat...
In-Reply-To: <3BBCB2DA.2BA50D3D@statistik.uni-dortmund.de>
References: <15292.43994.430083.856642@viz.itd.nrl.navy.mil>
	<3BBCB2DA.2BA50D3D@statistik.uni-dortmund.de>
Message-ID: <15292.46131.874353.625639@viz.itd.nrl.navy.mil>

>>>>> Uwe Ligges writes:

>> how do I get the first format to show up in a file?

> See ?write.table

thanks!

I tried write.table and it comes out pretty dang ugly...

> write.table(table(showdistribution(nw.109.transitions, interruptions[1])))
"c..interruption....opened.map.." "Freq"
"1" "interruption" "1"
"2" "opened-map" "2"

but that's much better than some of the other options!

thanks again,
greg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From baron at cattell.psych.upenn.edu  Thu Oct  4 21:14:27 2001
From: baron at cattell.psych.upenn.edu (Jonathan Baron)
Date: Thu, 4 Oct 2001 15:14:27 -0400 (EDT)
Subject: [R] printing out tables to a file using cat...
Message-ID: <200110041914.f94JERn11999@cattell.psych.upenn.edu>

Try write.table()
Look up help(write.table)
Jon
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fharrell at virginia.edu  Thu Oct  4 21:18:58 2001
From: fharrell at virginia.edu (Frank E Harrell Jr)
Date: Thu, 04 Oct 2001 15:18:58 -0400
Subject: [R] Ordered factors and DBMS
References: <200110041538.RAA00953@agesi.bs.ehu.es> <20011005065513.B2631@camille.indigoindustrial.co.nz>
Message-ID: <3BBCB622.453F704@virginia.edu>

As someone mentioned in a previous posting, the inherent ENUM and
SET data types in MySQL give it an advantage in this area.
I am just starting to work on a project in which XML
Metadata specifies a MySQL database (including factor
levels for ENUM and SET (multiple choice instead of single)
fields).  This metadata will later drive some "smart"
import functions in R that will make such variables
immediately analyzable and self-documenting.  Some 
mocked-up examples are at the end of the slides from
a talk I recently gave, available at
http://hesweb1.med.virginia.edu/biostat/dm

I prefer to use the inherent data types rather than
making factor labels reside in a separate SQL table.

I have only just begun to look at RMySQL documentation.
Does RMySQL fetch SET variables as binary integers 
such that selected choices can be sensed once
the bit mapping is known?

Frank Harrell


Jason Turner wrote:
> 
> Additions to Doug Bates' suggestions
> 
> > ... it could be expressed naturally as two tables and a
> > join.  The first table would contain the data as factor levels and the
> > second table would give the correspondence between levels and labels.
> 
> I think this is probably the most clear and elegant way to do it.
> 
> > Another possibility is to define a PostgreSQL data type for this.
> 
> See the PosgreSQL documentation for "CREATE TYPE".
> 
> Cheers
> 
> Jason
> --
> Indigo Industrial Controls Ltd.
> 64-21-343-545
> jasont at indigoindustrial.co.nz
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From aravind at genome.wi.mit.edu  Thu Oct  4 21:34:32 2001
From: aravind at genome.wi.mit.edu (Aravind Subramanian)
Date: Thu, 04 Oct 2001 15:34:32 -0400
Subject: [R] mutual information implementation
Message-ID: <3BBCB9C8.CBAEB174@genome.wi.mit.edu>

Hi,

is anyone aware of an R/S function or package that implements the mutual
information (MI)
approach to select/evaluate/reduce features before feeding into a neural
network?

Thanks,

aravind


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dj at research.bell-labs.com  Thu Oct  4 22:07:39 2001
From: dj at research.bell-labs.com (David James)
Date: Thu, 4 Oct 2001 16:07:39 -0400
Subject: [R] Ordered factors and DBMS
In-Reply-To: <3BBCB622.453F704@virginia.edu>; from fharrell@virginia.edu on Thu, Oct 04, 2001 at 03:18:58PM -0400
References: <200110041538.RAA00953@agesi.bs.ehu.es> <20011005065513.B2631@camille.indigoindustrial.co.nz> <3BBCB622.453F704@virginia.edu>
Message-ID: <20011004160739.A5690@jessie.research.bell-labs.com>

Frank E Harrell Jr wrote:
> As someone mentioned in a previous posting, the inherent ENUM and
> SET data types in MySQL give it an advantage in this area.

Unfortunately this is highly non-portable.  Moreover, the conversion
is not 1-1, for both factors and ordered factors get mapped into
MySQL's ENUM creating an ambiguity when we fetch a previously
exported R/S object.  XML, as you point out, is more amenable for
this type of higher-level specification.

> I am just starting to work on a project in which XML
> Metadata specifies a MySQL database (including factor
> levels for ENUM and SET (multiple choice instead of single)
> fields).  This metadata will later drive some "smart"
> import functions in R that will make such variables
> immediately analyzable and self-documenting.  Some 
> mocked-up examples are at the end of the slides from
> a talk I recently gave, available at
> http://hesweb1.med.virginia.edu/biostat/dm
> 
> I prefer to use the inherent data types rather than
> making factor labels reside in a separate SQL table.

No problem (I think) for self-contained applications whose 
data will not need to migrate from one RDBMS to another.
But I second Tim's suggestion that we should be thinking
about this problem in general terms, both beyond factors and 
RDBMS.

> 
> I have only just begun to look at RMySQL documentation.
> Does RMySQL fetch SET variables as binary integers 
> such that selected choices can be sensed once
> the bit mapping is known?

No, currently we (naively) fetched these as character vectors,
following the practice in Paul DuBois' "MySQL". I'm happy to 
hear any suggestion...

> 
> Frank Harrell
> 
> 
> Jason Turner wrote:
> > 
> > Additions to Doug Bates' suggestions
> > 
> > > ... it could be expressed naturally as two tables and a
> > > join.  The first table would contain the data as factor levels and the
> > > second table would give the correspondence between levels and labels.
> > 
> > I think this is probably the most clear and elegant way to do it.
> > 
> > > Another possibility is to define a PostgreSQL data type for this.
> > 
> > See the PosgreSQL documentation for "CREATE TYPE".
> > 
> > Cheers
> > 
> > Jason
> > --
> > Indigo Industrial Controls Ltd.
> > 64-21-343-545
> > jasont at indigoindustrial.co.nz
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> -- 
> Frank E Harrell Jr              Prof. of Biostatistics & Statistics
> Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
> U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
David A. James
Statistics Research, Room 2C-253            Phone:  (908) 582-3082       
Bell Labs, Lucent Technologies              Fax:    (908) 582-3340
Murray Hill, NJ 09794-0636
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From grimes at altaplana.com  Thu Oct  4 22:13:33 2001
From: grimes at altaplana.com (Seth Grimes)
Date: Thu, 4 Oct 2001 16:13:33 -0400 (EDT)
Subject: [R] Open-source DS tools
Message-ID: <Pine.BSF.4.21.0110041602570.36804-100000@shell.cais.net>

Hello all,

	I'm a computing consultant and write a decision support column for
CMP's Intelligent Enterprise magazine.  I'm researching open-source
decision-support tools for an upcoming column: what tools are available,
how they compare to commercial tools, and why there aren't more, for
instance, why there aren't any (so far as I know) open-source OLAP or
analytical reporting tools.  I'd like to hear views on any of these points
if you have any to share.  Write me at grimes at altaplana.com.

	Thanks,

					Seth



--
Seth Grimes   Alta Plana   database & Web / design & development
grimes at altaplana.com       http://altaplana.com    301-873-8225



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tallwine at oreilly.com  Thu Oct  4 23:06:11 2001
From: tallwine at oreilly.com (Tim Allwine)
Date: Thu, 04 Oct 2001 14:06:11 -0700
Subject: [R] printing out tables to a file using cat...
References: <15292.43994.430083.856642@viz.itd.nrl.navy.mil>
Message-ID: <3BBCCF43.B726CA04@oreilly.com>

Greg Trafton wrote:
> 
> Hi, all.  I'd like to print out a table to a file (I'm using
> cat(...,file="foobar")).  the problem is, cat doesn't print out the
> headings for the table (making the table hard to interpret!).  For
> example:
> 
> > table(showdistribution(nw.109.transitions, interruptions[1]))
> 
> interruption   opened-map
>            1            2
> 
> > cat(table(showdistribution(nw.109.transitions, interruptions[1])))
> 1 2
> 
> how do I get the first format to show up in a file?
> 

Try write.table(datasource,"path_to_file")

-Tim
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From markhall at gol.com  Fri Oct  5 00:12:05 2001
From: markhall at gol.com (Mark E. Hall)
Date: Fri, 5 Oct 2001 07:12:05 +0900
Subject: [R] tcl/tk & Windows2000?
In-Reply-To: <x2669v4ldk.fsf@blueberry.kubism.ku.dk>
Message-ID: <004801c14d21$c45440c0$b414d8cb@01680437>



> > Not of direct help but I find that Win2000 stops setup routines
writing
> > to both the system directory and the registry. I think you will need
to
> > log in as a user with write rights to the system directories and re-
> > install your TCL/TK support libraries. Don't overwrite any newer
files
> > as many of the system .DLLs are win2000 specific.
> 
> Hmm. This looks more like it is ignoring the TCL_LIBRARY setting.
> Perhaps you should try to set it in a different way (in the .Renviron
> file etc.).
> 

While I am out of the office, two things on setting TCL up in
Windows2000.  First, if you
are networked, you need full read and write permissions.  Second, you
then need to set the permissions for TCL using the stupid menu driven
icon that is inWindows2000.  To find out more about this, go to the web
pages for TCL/TKL from the people who wrote it (sorry I don't have it
handy).  

They have evidently done something in Win2000 concerning TCL/TKL.  I got
the r-routines to work, but have yet to get PIT (a remote sensing
program in TCL/TKL) to work.  

Best, MEHall



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From richmond at saintmarys.edu  Fri Oct  5 00:23:57 2001
From: richmond at saintmarys.edu (David A Richmond)
Date: Thu, 4 Oct 2001 17:23:57 -0500 (EST)
Subject: [R] evaluating the contents of a string
In-Reply-To: <Pine.A41.4.33.0110010924390.84818-100000@homer04.u.washington.edu>
Message-ID: <Pine.GSO.4.20.0110011449380.14936-100000@jade.saintmarys.edu>

On Mon, 1 Oct 2001, Thomas Lumley wrote:
> In general, this sort of question is frequently a sign that someone is
> doing things the hard way.  There are some real situations where you need
> to operate on strings like this, but they are fairly rare.

Well, actually I don't know if I'm reinventing the wheel here, but my
objective was to write a function which lists the objects in memory with
characteristic info, like data type, dimensions, and memory used. so I use
ls(pos=1) to get the list of objects at the 'root' level, and then use
get(i,pos=1) to get information about each object, then display it in a
table. It works nicely with get, and I can make it available if anyone's
interested. (I call it "describe" and it displays the name, type,
dimensions and size of each object)

dave richmond


On Mon, 1 Oct 2001, Thomas Lumley wrote:

> On Fri, 28 Sep 2001, David A Richmond wrote:
> <snip>
> > is there a function to pass bname to such that dim returns the dimensions
> > of b?
> <snip>
>
> As already pointed out, eval(parse(text=bname)) will return the object
> whose name is in the text string. Another way is get(bname), which is more
> specific (it gets objects by name, rather than evaluating arbitrary code).
> 
> In general, this sort of question is frequently a sign that someone is
> doing things the hard way.  There are some real situations where you need
> to operate on strings like this, but they are fairly rare.
> 
> For example, if you have a collection of arrays and may want the
> dimensions of any one of them, you could put them in a list
> 
> 
>  listofarrays<-list()
>  listofarrays$b <- matrix(1:9,3,3)
>  dim(listofarrays$b)
> 
> and even
>  bname<-"b"
>  dim(listofarrays[[bname]])
> 
> 
> 	-thomas
> 
> Thomas Lumley			Asst. Professor, Biostatistics
> tlumley at u.washington.edu	University of Washington, Seattle
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|David Richmond                It works on a          |      
+ Dept. of Sociology          complex scientific      + 
|Saint Mary's College          principle, known as    |  
+ Notre Dame, IN 46556               "pot luck."      +
|219-284-4517                    - The Doctor         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From xiao.gang.fan1 at libertysurf.fr  Fri Oct  5 01:23:54 2001
From: xiao.gang.fan1 at libertysurf.fr (Fan)
Date: Fri, 05 Oct 2001 00:23:54 +0100
Subject: [R] about the char _
Message-ID: <3BBCEF8A.9C378687@libertysurf.fr>

Dear all,

I don't know the historical reason why the char '_' was 
defined in the R language grammar as a synonyme of the 
assignment <-, anyway the R documentation dosen't recommand 
its usage.

Well, this is a real "incompatibility issue" each time
we need to interface R with other language/systems, notably with 
database systems. Recall that, in perhaps all computer systems, 
the char '_' can be used in the name of a variable or a column 
in a data table.

So that's my question : is there an option to change this
behaviour ? 

All that I want is the possibility to use the same name of 
variables in my R source as they are declared in the other systems.

Thanks
--
Fan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fharrell at virginia.edu  Fri Oct  5 04:47:34 2001
From: fharrell at virginia.edu (fharrell@virginia.edu)
Date: Thu, 04 Oct 2001 22:47:34 -0400
Subject: [R] Ordered factors and DBMS
References: <200110041538.RAA00953@agesi.bs.ehu.es> <20011005065513.B2631@camille.indigoindustrial.co.nz> <3BBCB622.453F704@virginia.edu> <20011004160739.A5690@jessie.research.bell-labs.com>
Message-ID: <3BBD1F46.401202BD@virginia.edu>

David James wrote:
> 
> Frank E Harrell Jr wrote:
> > As someone mentioned in a previous posting, the inherent ENUM and
> > SET data types in MySQL give it an advantage in this area.
> 
> Unfortunately this is highly non-portable.  Moreover, the conversion
> is not 1-1, for both factors and ordered factors get mapped into
> MySQL's ENUM creating an ambiguity when we fetch a previously
> exported R/S object.  XML, as you point out, is more amenable for
> this type of higher-level specification.

Thanks very much for your note David.  As I plan to stick with
MySQL and to drive the database creation from the metadata in
XML the non-portability is not an issue for me.  The metadata
can also direct a "smart" export from MySQL into other
DBMS if the need ever arises.  The metadata can also provide
the original ordering of categories (which I will use mainly
as the display order on pull-down lists), and this can be
communicated to R to adjust a data frame after import.

> 
> > I am just starting to work on a project in which XML
> > Metadata specifies a MySQL database (including factor
> > levels for ENUM and SET (multiple choice instead of single)
> > fields).  This metadata will later drive some "smart"
> > import functions in R that will make such variables
> > immediately analyzable and self-documenting.  Some
> > mocked-up examples are at the end of the slides from
> > a talk I recently gave, available at
> > http://hesweb1.med.virginia.edu/biostat/dm
> >
> > I prefer to use the inherent data types rather than
> > making factor labels reside in a separate SQL table.
> 
> No problem (I think) for self-contained applications whose
> data will not need to migrate from one RDBMS to another.
> But I second Tim's suggestion that we should be thinking
> about this problem in general terms, both beyond factors and
> RDBMS.
> 
> >
> > I have only just begun to look at RMySQL documentation.
> > Does RMySQL fetch SET variables as binary integers
> > such that selected choices can be sensed once
> > the bit mapping is known?
> 
> No, currently we (naively) fetched these as character vectors,
> following the practice in Paul DuBois' "MySQL". I'm happy to
> hear any suggestion...

I think a nice solution would be to fetch those as integers
using MySQL's binary bit string representation.  This could
create a variable of class 'mchoice' for multiple choice,
with attribute mlevels containing the vector of character
strings corresponding to the MySQL bit mappings in the
64-bit integer that represents a SET variable.  The only
downside to SET to me is the 64-choice limitation.

Integer representation of ENUM types, which is consistent
with internal storage of factors in S I believe, 
will preserve the ordering of
levels so that a simple conversion to an ordered factor
would suffice.  So dispensing with character vectors for
both ENUM and SET will be a help I think, assuming
the vector of labels defined to MySQL can be referenced
during import.

Thanks,

Frank

> 
> >
> > Frank Harrell
> >
> >
> > Jason Turner wrote:
> > >
> > > Additions to Doug Bates' suggestions
> > >
> > > > ... it could be expressed naturally as two tables and a
> > > > join.  The first table would contain the data as factor levels and the
> > > > second table would give the correspondence between levels and labels.
> > >
> > > I think this is probably the most clear and elegant way to do it.
> > >
> > > > Another possibility is to define a PostgreSQL data type for this.
> > >
> > > See the PosgreSQL documentation for "CREATE TYPE".
> > >
> > > Cheers
> > >
> > > Jason
> > > --
> > > Indigo Industrial Controls Ltd.
> > > 64-21-343-545
> > > jasont at indigoindustrial.co.nz
> > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> > --
> > Frank E Harrell Jr              Prof. of Biostatistics & Statistics
> > Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
> > U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> --
> David A. James
> Statistics Research, Room 2C-253            Phone:  (908) 582-3082
> Bell Labs, Lucent Technologies              Fax:    (908) 582-3340
> Murray Hill, NJ 09794-0636

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Fri Oct  5 09:43:01 2001
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 5 Oct 2001 09:43:01 +0200
Subject: [R] evaluating the contents of a string
In-Reply-To: <Pine.GSO.4.20.0110011449380.14936-100000@jade.saintmarys.edu>
References: <Pine.A41.4.33.0110010924390.84818-100000@homer04.u.washington.edu>
	<Pine.GSO.4.20.0110011449380.14936-100000@jade.saintmarys.edu>
Message-ID: <15293.25733.700982.162381@gargle.gargle.HOWL>

>>>>> "David" == David A Richmond <richmond at saintmarys.edu> writes:

    David> On Mon, 1 Oct 2001, Thomas Lumley wrote:
    >> In general, this sort of question is frequently a sign that someone is
    >> doing things the hard way.  There are some real situations where you need
    >> to operate on strings like this, but they are fairly rare.

    David> Well, actually I don't know if I'm reinventing the wheel here,
    David> but my objective was to write a function which lists the objects
    David> in memory with characteristic info, like data type, dimensions,
    David> and memory used. so I use ls(pos=1) to get the list of objects
    David> at the 'root' level, and then use get(i,pos=1) to get
    David> information about each object, then display it in a table. It
    David> works nicely with get, and I can make it available if anyone's
    David> interested. (I call it "describe" and it displays the name,
    David> type, dimensions and size of each object)

    <....>

you may also have a look at the function

    ls.str()

which does something similar.
Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From phgrosje at ulb.ac.be  Fri Oct  5 09:56:24 2001
From: phgrosje at ulb.ac.be (Philippe Grosjean)
Date: Fri, 5 Oct 2001 09:56:24 +0200
Subject: [R] about the char _
In-Reply-To: <3BBCEF8A.9C378687@libertysurf.fr>
Message-ID: <MABBLJDICACNFOLGIHJOMECMCGAA.phgrosje@ulb.ac.be>

>Dear all,

>I don't know the historical reason why the char '_' was
>defined in the R language grammar as a synonyme of the
>assignment <-, anyway the R documentation dosen't recommand
>its usage.

>Well, this is a real "incompatibility issue" each time
>we need to interface R with other language/systems, notably with
>database systems. Recall that, in perhaps all computer systems,
>the char '_' can be used in the name of a variable or a column
>in a data table.

>So that's my question : is there an option to change this
>behaviour ?

>All that I want is the possibility to use the same name of
>variables in my R source as they are declared in the other systems.

>Thanks
>--
>Fan

I totally agree with this. Since _ is a deprecated synonym of <-, is it any
possibility to eliminate it in one of the next major versions of R?
Therefore, a variable name like my_variable would become viable... like in
most other computer languages. What I really appreciate in R synthax is that
there is almost no ambiguities. I mean, in R, a word has only one
signification. For instance <- is assignation, = gives a value to an
argument in a function and == is for comparison, where some other languages
use the same = in the different situations. As far as I know, there are only
two cases where the same word (or character) can be used in two different
situations:
1) A function, and an argument in a function can both have the same name,
i.e., myfunction <- function(myfunction="value", arg2,...) {} is viable;
2) The dot is used both in variable names and to represent the object
hierarchy: my.var and print.myvar. The first dot is part of the variable
name, while the second dot separate the method (print) and the variable
(myvar). If _ was allowed in variables names, we could use print.my_var
(which should, perhaps, be recommended) and it would be easier to spot where
is the "object hierarchy" and where is the variable name.
Best,

Philippe Grosjean


...........]<(({?<...............<?}))><...............................
 ) ) ) ) )	 __               	 __
( ( ( ( ( 	|__)              	|  _
 ) ) ) ) )	|   hilippe       	|__)rosjean
( ( ( ( ( 	Marine Biol. Lab., ULB, Belgium
 ) ) ) ) )	                  	 __
( ( ( ( ( 	|\  /|            	|__)
 ) ) ) ) )	| \/ |ariculture &	|__)iostatistics
( ( ( ( (
 ) ) ) ) )	e-mail: phgrosje at ulb.ac.be or phgrosjean at sciviews.org
( ( ( ( ( 	SciViews project coordinator (http://www.sciviews.org)
 ) ) ) ) )      tel: 00-32-2-650.29.70 (lab), 00-32-2-673.31.33 (home)
( ( ( ( (
 ) ) ) ) )      "I'm 100% confident that p is between 0 and 1"
( ( ( ( (                                  L. Gonick & W. Smith (1993)
 ) ) ) ) )
.......................................................................


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Gerard.Keogh at cso.ie  Fri Oct  5 10:50:42 2001
From: Gerard.Keogh at cso.ie (Gerard.Keogh@cso.ie)
Date: Fri, 05 Oct 2001 09:50:42 +0100
Subject: [R] about the char _
Message-ID: <OFFAE6A4CD.5A2FC257-ON80256ADC.002EA57E@cso.ie>


Yes I agree with Fan. For those of us (new to R and) who also use SAS, the
underscore is an ideal way to create variable names. In fact it provides a
good convention for naming global variables in code that is written to be
called by  say another "users" program. R's use of the "." to concatenate
names is useful to distinguish variable levels but I think that being able
to name an object  _myfun.x1 would be a great asset in future versions of
R.

Gerard Keogh




                                                                                                                        
                    Fan                                                                                                 
                    <xiao.gang.fan1 at liber        To:     r-help at stat.math.ethz.ch                                       
                    tysurf.fr>                   cc:                                                                    
                    Sent by:                     Subject:     [R] about the char _                                      
                    owner-r-help at stat.mat                                                                               
                    h.ethz.ch                                                                                           
                                                                                                                        
                                                                                                                        
                    05/10/01 00:23                                                                                      
                                                                                                                        
                                                                                                                        




Dear all,

I don't know the historical reason why the char '_' was
defined in the R language grammar as a synonyme of the
assignment <-, anyway the R documentation dosen't recommand
its usage.

Well, this is a real "incompatibility issue" each time
we need to interface R with other language/systems, notably with
database systems. Recall that, in perhaps all computer systems,
the char '_' can be used in the name of a variable or a column
in a data table.

So that's my question : is there an option to change this
behaviour ?

All that I want is the possibility to use the same name of
variables in my R source as they are declared in the other systems.

Thanks
--
Fan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._._




The information in this email, and any attachments transmitted with it, are confidential 
and are for the intended recipient only. If you receive this message in error, please 
notify us via postmaster at cso.ie.

To see the latest figures from the CSO go to http://www.cso.ie
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From a.trapletti at bluewin.ch  Fri Oct  5 11:28:35 2001
From: a.trapletti at bluewin.ch (Adrian Trapletti)
Date: Fri, 05 Oct 2001 11:28:35 +0200
Subject: [R] Re: R-help Digest V2 #541
References: <200110050201.EAA04241@stat.math.ethz.ch>
Message-ID: <3BBD7D43.A24247A6@bluewin.ch>

R-help Digest wrote:

>
> Date: Thu, 04 Oct 2001 15:34:32 -0400
> From: Aravind Subramanian <aravind at genome.wi.mit.edu>
> Subject: [R] mutual information implementation
>
> Hi,
>
> is anyone aware of an R/S function or package that implements the mutual
> information (MI)
> approach to select/evaluate/reduce features before feeding into a neural
> network?
>
> Thanks,
>
> aravind
>

The function amif from the tseries package computes the mutual information. However, only in the context of time series (series vs. lagged series). However, it should be rather simple to call the underlying fortran function muin2ser from within R (have a look at the file tseries/src/muin2ser.f).

Best
Adrian

--
Dr. Adrian Trapletti        Phone:     +41 (0)1 994 56 30
Wildsbergstrasse 31         Fax  :     +41 (0)1 994 56 33
CH-8610 Uster               Email: a.trapletti at bluewin.ch
Switzerland                 WWW  :   trapletti.homeip.net


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dtrenkler at nts6.oec.uni-osnabrueck.de  Fri Oct  5 11:45:25 2001
From: dtrenkler at nts6.oec.uni-osnabrueck.de (Trenkler, Dietrich)
Date: Fri, 5 Oct 2001 11:45:25 +0200 
Subject: [R] 3dim histogram?
Message-ID: <FB75CFC167F3D311B11D00A0CC20FB0E3734CF@nts7.oec.Uni-Osnabrueck.DE>

Hello all,


I wonder if there is a package including a program to display a 3dim
histogram.

Thanks.

   --- D.Trenkler ---

****************************************************************************
*****
   Dr. Dietrich Trenkler        (dtrenkler at nts6.oec.uni-osnabrueck.de)      
   Statistik / Empirische Wirtschaftsforschung
   Universitaet Osnabrueck
   Rolandstrasse 8                                Phone: +49(0) 541-969-2753
   D-49069 Osnabrueck                          Fax  : +49(0) 541-969-2744
   GERMANY
****************************************************************************
*****



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From laurent at cbs.dtu.dk  Fri Oct  5 11:45:12 2001
From: laurent at cbs.dtu.dk (Laurent Gautier)
Date: Fri, 05 Oct 2001 11:45:12 +0200
Subject: [R] about the char _
References: <MABBLJDICACNFOLGIHJOMECMCGAA.phgrosje@ulb.ac.be>
Message-ID: <3BBD8128.42B774FD@cbs.dtu.dk>

I do not want to pour oil on fire (see the "S-Plus != R" earlier this
week).
(I am writing in peace. =)  )



I do not see the 'underscore' thing as a _major_ issue.



If one really really really want to have underscores, one still can:


> "underscore_if_I_want" <- 2
> get("underscore_if_I_want")
[1] 2





Regards,




Laurent







Philippe Grosjean wrote:
> 
> >Dear all,
> 
> >I don't know the historical reason why the char '_' was
> >defined in the R language grammar as a synonyme of the
> >assignment <-, anyway the R documentation dosen't recommand
> >its usage.
> 
> >Well, this is a real "incompatibility issue" each time
> >we need to interface R with other language/systems, notably with
> >database systems. Recall that, in perhaps all computer systems,
> >the char '_' can be used in the name of a variable or a column
> >in a data table.
> 
> >So that's my question : is there an option to change this
> >behaviour ?
> 
> >All that I want is the possibility to use the same name of
> >variables in my R source as they are declared in the other systems.
> 
> >Thanks
> >--
> >Fan
> 
> I totally agree with this. Since _ is a deprecated synonym of <-, is it any
> possibility to eliminate it in one of the next major versions of R?
> Therefore, a variable name like my_variable would become viable... like in
> most other computer languages. What I really appreciate in R synthax is that
> there is almost no ambiguities. I mean, in R, a word has only one
> signification. For instance <- is assignation, = gives a value to an
> argument in a function and == is for comparison, where some other languages
> use the same = in the different situations. As far as I know, there are only
> two cases where the same word (or character) can be used in two different
> situations:
> 1) A function, and an argument in a function can both have the same name,
> i.e., myfunction <- function(myfunction="value", arg2,...) {} is viable;
> 2) The dot is used both in variable names and to represent the object
> hierarchy: my.var and print.myvar. The first dot is part of the variable
> name, while the second dot separate the method (print) and the variable
> (myvar). If _ was allowed in variables names, we could use print.my_var
> (which should, perhaps, be recommended) and it would be easier to spot where
> is the "object hierarchy" and where is the variable name.
> Best,
> 
> Philippe Grosjean
> 
> ...........]<(({?<...............<?}))><...............................
>  ) ) ) ) )       __                      __
> ( ( ( ( (       |__)                    |  _
>  ) ) ) ) )      |   hilippe             |__)rosjean
> ( ( ( ( (       Marine Biol. Lab., ULB, Belgium
>  ) ) ) ) )                               __
> ( ( ( ( (       |\  /|                  |__)
>  ) ) ) ) )      | \/ |ariculture &      |__)iostatistics
> ( ( ( ( (
>  ) ) ) ) )      e-mail: phgrosje at ulb.ac.be or phgrosjean at sciviews.org
> ( ( ( ( (       SciViews project coordinator (http://www.sciviews.org)
>  ) ) ) ) )      tel: 00-32-2-650.29.70 (lab), 00-32-2-673.31.33 (home)
> ( ( ( ( (
>  ) ) ) ) )      "I'm 100% confident that p is between 0 and 1"
> ( ( ( ( (                                  L. Gonick & W. Smith (1993)
>  ) ) ) ) )
> .......................................................................
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Laurent Gautier			CBS, Building 208, DTU
PhD. Student			D-2800 Lyngby,Denmark	
tel: +45 45 25 24 85		http://www.cbs.dtu.dk/laurent
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From llaghi at foodsci.unibo.it  Fri Oct  5 12:12:57 2001
From: llaghi at foodsci.unibo.it (luca laghi)
Date: Fri, 5 Oct 2001 12:12:57 +0200
Subject: [R] double quotes
References: <MABBLJDICACNFOLGIHJOMECMCGAA.phgrosje@ulb.ac.be>
Message-ID: <004101c14d86$4e2e5420$06d3cc89@foodsci.unibo.it>

Dear all,
I would like to use the double quote symbol ( " ) as a character.
How can I do it?
In particular I'd like to obtain from the paste function the following
string:

"word"

I tried with

paste (""", word, """)

but it doesn't work.

Thank to everybody
Luca


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Fri Oct  5 12:16:04 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Oct 2001 12:16:04 +0200
Subject: [R] double quotes
In-Reply-To: <004101c14d86$4e2e5420$06d3cc89@foodsci.unibo.it>
References: <MABBLJDICACNFOLGIHJOMECMCGAA.phgrosje@ulb.ac.be>
	<004101c14d86$4e2e5420$06d3cc89@foodsci.unibo.it>
Message-ID: <x2n136wfx7.fsf@blueberry.kubism.ku.dk>

"luca laghi" <llaghi at foodsci.unibo.it> writes:

> Dear all,
> I would like to use the double quote symbol ( " ) as a character.
> How can I do it?
> In particular I'd like to obtain from the paste function the following
> string:
> 
> "word"
> 
> I tried with
> 
> paste (""", word, """)
> 
> but it doesn't work.

Use "\"" or '"'.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dmurdoch at pair.com  Fri Oct  5 13:18:00 2001
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Fri, 05 Oct 2001 07:18:00 -0400
Subject: [R] 3dim histogram?
In-Reply-To: <FB75CFC167F3D311B11D00A0CC20FB0E3734CF@nts7.oec.Uni-Osnabrueck.DE>
References: <FB75CFC167F3D311B11D00A0CC20FB0E3734CF@nts7.oec.Uni-Osnabrueck.DE>
Message-ID: <qh5rrts6tk3ht98d0ekl9dekt77e34o385@4ax.com>

On Fri, 5 Oct 2001 11:45:25 +0200 , you wrote:

>Hello all,
>
>
>I wonder if there is a package including a program to display a 3dim
>histogram.

The Windows-only package rgl available on my web page,
<http://www.stats.uwo.ca/faculty/murdoch/software> has a hist3d()
function to do this.  I'm working on a Linux version too, but it's
going slower than expected...

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From P.Connolly at hortresearch.co.nz  Fri Oct  5 14:32:34 2001
From: P.Connolly at hortresearch.co.nz (Patrick Connolly)
Date: Sat, 6 Oct 2001 00:32:34 +1200 (NZST)
Subject: [R] about the char _
In-Reply-To: <MABBLJDICACNFOLGIHJOMECMCGAA.phgrosje@ulb.ac.be> from "Philippe Grosjean" at Oct 05, 2001 09:56:24 AM
Message-ID: <200110051232.f95CWYT06002@biomat1.marc.hort.cri.nz>

According to Philippe Grosjean:
|> 

.....

|> If _ was allowed in variables names, we could use print.my_var
|> (which should, perhaps, be recommended) and it would be easier to spot where
|> is the "object hierarchy" and where is the variable name.

Here is one stick-in-the-mud who does not share the enthusiasm for
such a change.  I started using Splus almost 10 years ago, and being a
confirmed lazy typist ever since I started using unix, I immediately
adopted the '_' shortform instead of the clumsy '<-' sequence.  It's
an ingrained habit now which will be hard for an old codger to get out
of.  Some esteemed contributors to this list have strong feelings
against its use, but for my own use, I don't encounter any problems.
If I make my code public I change it, but at the time of writing it in
the first place, I'm very attached to lazy typing.

There are hundreds of files of code which I have written the lazy way
and I periodically source those.  Perhaps it wouldn't be difficult to
search and replace in those files, but I'd prefer not to edit them
since the date of the files is important information.

Of course, such a stick-in-the-mud attitude does make it difficult to
make progress by insisting on backward compatibility, but I offer a
suggestion.

You could get a similar effect with names such as my..variable which
would be visually distinctive from my.variable and still work with the
current convention, but I don't know if SAS could deal with such a
name. There could be a problem with ..myfun.x1 because it would not be
available to the likes of objects(), but there could well be a way
around that.

best


-- 
*************************************************************
   ___      Patrick Connolly
 {~._.~}    HortResearch             Great minds discuss ideas;
 _( Y )_    Mt Albert                Average minds discuss events; 
(:_~*~_:)   Auckland                 Small minds discuss people.
 (_)-(_)    New Zealand                                    .... Anon
            Ph: +64-9 815 4200 x 7188
*************************************************************


______________________________________________________
The contents of this e-mail are privileged and/or confidential to the
named recipient and are not to be used by any other person and/or
organisation. If you have received this e-mail in error, please notify 
the sender and delete all material pertaining to this e-mail.
______________________________________________________
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From phgrosje at ulb.ac.be  Fri Oct  5 13:51:33 2001
From: phgrosje at ulb.ac.be (Philippe Grosjean)
Date: Fri, 5 Oct 2001 13:51:33 +0200
Subject: [R] about the char _
In-Reply-To: <200110051232.f95CWYT06002@biomat1.marc.hort.cri.nz>
Message-ID: <MABBLJDICACNFOLGIHJOEEDACGAA.phgrosje@ulb.ac.be>

Well, you are totally right. Backward compatibility *is* very important.
That is probably a reason why the R team keeps _ as a synonym of <- for
assignation. And still, there is the nice function make.names() to eliminate
improper characters from name strings. Yet, I still believe that not using .
(dot) in names strings would easy to decrypt the "object hierarchy" in R as
in Splus. make.names() replaces any improper character by ... a dot. Thus,
you got dots everywhere in variables names when you import data from SAS, or
any external source.


-----Message d'origine-----
De : Patrick Connolly [mailto:P.Connolly at hortresearch.co.nz]
Envoye : vendredi 5 octobre 2001 14:33
A : Philippe Grosjean
Cc : R-help
Objet : Re: [R] about the char _


According to Philippe Grosjean:
|>

.....

|> If _ was allowed in variables names, we could use print.my_var
|> (which should, perhaps, be recommended) and it would be easier to spot
where
|> is the "object hierarchy" and where is the variable name.

Here is one stick-in-the-mud who does not share the enthusiasm for
such a change.  I started using Splus almost 10 years ago, and being a
confirmed lazy typist ever since I started using unix, I immediately
adopted the '_' shortform instead of the clumsy '<-' sequence.  It's
an ingrained habit now which will be hard for an old codger to get out
of.  Some esteemed contributors to this list have strong feelings
against its use, but for my own use, I don't encounter any problems.
If I make my code public I change it, but at the time of writing it in
the first place, I'm very attached to lazy typing.

There are hundreds of files of code which I have written the lazy way
and I periodically source those.  Perhaps it wouldn't be difficult to
search and replace in those files, but I'd prefer not to edit them
since the date of the files is important information.

Of course, such a stick-in-the-mud attitude does make it difficult to
make progress by insisting on backward compatibility, but I offer a
suggestion.

You could get a similar effect with names such as my..variable which
would be visually distinctive from my.variable and still work with the
current convention, but I don't know if SAS could deal with such a
name. There could be a problem with ..myfun.x1 because it would not be
available to the likes of objects(), but there could well be a way
around that.

best


--
*************************************************************
   ___      Patrick Connolly
 {~._.~}    HortResearch             Great minds discuss ideas;
 _( Y )_    Mt Albert                Average minds discuss events;
(:_~*~_:)   Auckland                 Small minds discuss people.
 (_)-(_)    New Zealand                                    .... Anon
            Ph: +64-9 815 4200 x 7188
*************************************************************


______________________________________________________
The contents of this e-mail are privileged and/or confidential to the
named recipient and are not to be used by any other person and/or
organisation. If you have received this e-mail in error, please notify
the sender and delete all material pertaining to this e-mail.
______________________________________________________


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maj at waikato.ac.nz  Fri Oct  5 14:05:22 2001
From: maj at waikato.ac.nz (Murray Jorgensen)
Date: Sat, 06 Oct 2001 00:05:22 +1200
Subject: [R] about the char _
In-Reply-To: <3BBD8128.42B774FD@cbs.dtu.dk>
References: <MABBLJDICACNFOLGIHJOMECMCGAA.phgrosje@ulb.ac.be>
Message-ID: <200110051157.XAA25686@gosset.stats.waikato.ac.nz>

Just one small point: the assignment symbol must be about the most commonly
used symbol in any computer language. Yet in R and S+ it is represented by
a two-character string with, moreover, a change in case! I won't mind
giving up underscore as an assignment if an alternate single character,
preerably lower-case symbol is made available. Trouble is, I can't think of
anything!

Murray Jorgensen


Dr Murray Jorgensen       http://www.stats.waikato.ac.nz/Staff/maj.html 
Department of Statistics, University of Waikato, Hamilton, New Zealand 
*Applications Editor, Australian and New Zealand Journal of Statistics* 
maj at waikato.ac.nz Phone +64-7 838 4773 home phone 856 6705 Fax 838 4155

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Fri Oct  5 14:32:35 2001
From: ben at zoo.ufl.edu (Ben Bolker)
Date: Fri, 5 Oct 2001 08:32:35 -0400 (EDT)
Subject: [R] 3dim histogram?
In-Reply-To: <FB75CFC167F3D311B11D00A0CC20FB0E3734CF@nts7.oec.Uni-Osnabrueck.DE>
Message-ID: <Pine.LNX.4.30.0110050826240.4238-100000@bolker.zoo.ufl.edu>


  You can also use the scatterplot3d library with type="h" to get a sort
of 3d histogram, although it may not look exactly the way you want
(example 4 in the scatterplot3d does a 3d plot of a matrix).

  Ben Bolker

On Fri, 5 Oct 2001, Trenkler, Dietrich wrote:

> Hello all,
>
>
> I wonder if there is a package including a program to display a 3dim
> histogram.
>
> Thanks.
>
>    --- D.Trenkler ---
>
> ****************************************************************************
> *****
>    Dr. Dietrich Trenkler        (dtrenkler at nts6.oec.uni-osnabrueck.de)
>    Statistik / Empirische Wirtschaftsforschung
>    Universitaet Osnabrueck
>    Rolandstrasse 8                                Phone: +49(0) 541-969-2753
>    D-49069 Osnabrueck                          Fax  : +49(0) 541-969-2744
>    GERMANY
> ****************************************************************************
> *****
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker at zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From loesljrg at accucom.net  Fri Oct  5 15:14:01 2001
From: loesljrg at accucom.net (JRG)
Date: Fri, 5 Oct 2001 09:14:01 -0400
Subject: [R] about the char _
In-Reply-To: <200110051157.XAA25686@gosset.stats.waikato.ac.nz>
References: <3BBD8128.42B774FD@cbs.dtu.dk>
Message-ID: <B0002191321@netserv1.accucom.net>

Date sent:      	Sat, 06 Oct 2001 00:05:22 +1200
To:             	r-help at stat.math.ethz.ch
From:           	Murray Jorgensen <maj at waikato.ac.nz>
Subject:        	Re: [R] about the char _

> Just one small point: the assignment symbol must be about the most commonly
> used symbol in any computer language. Yet in R and S+ it is represented by
> a two-character string with, moreover, a change in case! 

Members of the Pascal family have that same quirk [there, 
assignment is  :=  ].  I admit to being a lazy typist (as have others 
here), and that quirk used to annoy me.  But I'd expect that most R 
code actually gets written in someone's favorite editor, and that 
that editor almost certainly has the ability to define the string "<-" 
as a keyboard macro.  That's how I learned to live with ":=" 
through several incarnations of Pascal.

---JRG


I won't mind
> giving up underscore as an assignment if an alternate single character,
> preerably lower-case symbol is made available. Trouble is, I can't think of
> anything!
> 
> Murray Jorgensen
> 
> 
> Dr Murray Jorgensen       http://www.stats.waikato.ac.nz/Staff/maj.html 
> Department of Statistics, University of Waikato, Hamilton, New Zealand 
> *Applications Editor, Australian and New Zealand Journal of Statistics* 
> maj at waikato.ac.nz Phone +64-7 838 4773 home phone 856 6705 Fax 838 4155
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._



John R. Gleason

Syracuse University
430 Huntington Hall                      Voice:   315-443-3107
Syracuse, NY 13244-2340  USA             FAX:     315-443-4085

PGP public key at keyservers
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From c.milkosky at xpedite.com  Fri Oct  5 15:23:33 2001
From: c.milkosky at xpedite.com (Chris Milkosky)
Date: Fri, 5 Oct 2001 09:23:33 -0400
Subject: [R] non-interactive R usage...
In-Reply-To: <3BBCB2DA.2BA50D3D@statistik.uni-dortmund.de>
Message-ID: <NEEALIKPCPOEAMABNNLLEEFDCMAA.c.milkosky@xpedite.com>

<Newbie alert> Hello all! </Newbie alert>   =)

Hi all,

First of all, I'm new to R and I'm REALLY REALLY impressed by it.  It's an asset to the open source community.  I can't begin to say
how glad I am to have stumbled across it in freshmeat.net...  Kudos to the developers - you've done a great job.

OK - my question may be answered by looking through documentation (I did RTFM), but I haven't noticed anything yet.  I think I must
just be missing something though.

Does R give you the capability to run a script (read as non-interactive) that would perform a statistical task, and then send output
to a file?  For example: read a set of data from a file, generate a JPEG _file_ containing a plot of the data (with some specific
stat calcs plotted of course), and then exit?

I do capacity planning and would like to be able to have JPEG plots of real time statistical data appear on web pages, so I'm
thinking that a CGI can be executed that starts R up, generates a plot, and writes it to a file.  We currently use gnuplot, but with
all of the statistical needs we have, it is turning out to be less flexible than we had hoped.

Has this been done before?  Could it be?  If so, can we pass command line parameters to our R scripts somehow?

Thanks,

Chris


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fharrell at virginia.edu  Fri Oct  5 15:35:53 2001
From: fharrell at virginia.edu (Frank E Harrell Jr)
Date: Fri, 05 Oct 2001 09:35:53 -0400
Subject: [R] about the char _
References: <MABBLJDICACNFOLGIHJOMECMCGAA.phgrosje@ulb.ac.be> <3BBD8128.42B774FD@cbs.dtu.dk>
Message-ID: <3BBDB739.EE1BF46@virginia.edu>

I have to agree with Laurent.  I don't think this is a
big issue.  I've been importing SAS datasets into S
for 10 years and have not ever been disappointed to
see a period instead of an underscore in a variable
name.

In addition it is very important to maintain compatibility
with S-Plus on this issue.

Users of ESS under Emacs can be lazy and politically
correct also as _ is immediately expanded to <-

Frank


Laurent Gautier wrote:
> 
> I do not want to pour oil on fire (see the "S-Plus != R" earlier this
> week).
> (I am writing in peace. =)  )
> 
> I do not see the 'underscore' thing as a _major_ issue.
> 
> If one really really really want to have underscores, one still can:
> 
> > "underscore_if_I_want" <- 2
> > get("underscore_if_I_want")
> [1] 2
> 
> Regards,
> 
> Laurent
> 
> Philippe Grosjean wrote:
> >
> > >Dear all,
> >
> > >I don't know the historical reason why the char '_' was
> > >defined in the R language grammar as a synonyme of the
> > >assignment <-, anyway the R documentation dosen't recommand
> > >its usage.
> >
> > >Well, this is a real "incompatibility issue" each time
> > >we need to interface R with other language/systems, notably with
> > >database systems. Recall that, in perhaps all computer systems,
> > >the char '_' can be used in the name of a variable or a column
> > >in a data table.
> >
> > >So that's my question : is there an option to change this
> > >behaviour ?
> >
> > >All that I want is the possibility to use the same name of
> > >variables in my R source as they are declared in the other systems.
> >
> > >Thanks
> > >--
> > >Fan
> >
> > I totally agree with this. Since _ is a deprecated synonym of <-, is it any
> > possibility to eliminate it in one of the next major versions of R?
> > Therefore, a variable name like my_variable would become viable... like in
> > most other computer languages. What I really appreciate in R synthax is that
> > there is almost no ambiguities. I mean, in R, a word has only one
> > signification. For instance <- is assignation, = gives a value to an
> > argument in a function and == is for comparison, where some other languages
> > use the same = in the different situations. As far as I know, there are only
> > two cases where the same word (or character) can be used in two different
> > situations:
> > 1) A function, and an argument in a function can both have the same name,
> > i.e., myfunction <- function(myfunction="value", arg2,...) {} is viable;
> > 2) The dot is used both in variable names and to represent the object
> > hierarchy: my.var and print.myvar. The first dot is part of the variable
> > name, while the second dot separate the method (print) and the variable
> > (myvar). If _ was allowed in variables names, we could use print.my_var
> > (which should, perhaps, be recommended) and it would be easier to spot where
> > is the "object hierarchy" and where is the variable name.
> > Best,
> >
> > Philippe Grosjean
> >
> > ...........]<(({?<...............<?}))><...............................
> >  ) ) ) ) )       __                      __
> > ( ( ( ( (       |__)                    |  _
> >  ) ) ) ) )      |   hilippe             |__)rosjean
> > ( ( ( ( (       Marine Biol. Lab., ULB, Belgium
> >  ) ) ) ) )                               __
> > ( ( ( ( (       |\  /|                  |__)
> >  ) ) ) ) )      | \/ |ariculture &      |__)iostatistics
> > ( ( ( ( (
> >  ) ) ) ) )      e-mail: phgrosje at ulb.ac.be or phgrosjean at sciviews.org
> > ( ( ( ( (       SciViews project coordinator (http://www.sciviews.org)
> >  ) ) ) ) )      tel: 00-32-2-650.29.70 (lab), 00-32-2-673.31.33 (home)
> > ( ( ( ( (
> >  ) ) ) ) )      "I'm 100% confident that p is between 0 and 1"
> > ( ( ( ( (                                  L. Gonick & W. Smith (1993)
> >  ) ) ) ) )
> > .......................................................................
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> --
> Laurent Gautier                 CBS, Building 208, DTU
> PhD. Student                    D-2800 Lyngby,Denmark
> tel: +45 45 25 24 85            http://www.cbs.dtu.dk/laurent
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andy_liaw at merck.com  Fri Oct  5 15:47:16 2001
From: andy_liaw at merck.com (Liaw, Andy)
Date: Fri, 05 Oct 2001 09:47:16 -0400
Subject: Grow up and use ESS already (was RE: [R] about the char _)
Message-ID: <51F9C42DA15CD311BD220008C707D81903DC82DF@usrymx10.merck.com>

> Members of the Pascal family have that same quirk [there, 
> assignment is  :=  ].  I admit to being a lazy typist (as have others 
> here), and that quirk used to annoy me.  But I'd expect that most R 
> code actually gets written in someone's favorite editor, and that 
> that editor almost certainly has the ability to define the 
> string "<-" 
> as a keyboard macro.  That's how I learned to live with ":=" 
> through several incarnations of Pascal.

In deed...  In S-mode under ESS (5.1.19), typing "_" automagically gives "
<- ".  Note the extra spaces for readibility!  It's also smart enough to
leave "_" inside quotes alone.

Andy

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From edd at debian.org  Fri Oct  5 16:00:18 2001
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri, 5 Oct 2001 09:00:18 -0500
Subject: [R] non-interactive R usage...
In-Reply-To: <NEEALIKPCPOEAMABNNLLEEFDCMAA.c.milkosky@xpedite.com>; from c.milkosky@xpedite.com on Fri, Oct 05, 2001 at 09:23:33AM -0400
References: <3BBCB2DA.2BA50D3D@statistik.uni-dortmund.de> <NEEALIKPCPOEAMABNNLLEEFDCMAA.c.milkosky@xpedite.com>
Message-ID: <20011005090018.B10002@debian.org>


> Does R give you the capability to run a script (read as non-interactive) that would perform a statistical task, and then send output
> to a file?  For example: read a set of data from a file, generate a JPEG _file_ containing a plot of the data (with some specific
> stat calcs plotted of course), and then exit?

See "R --help"  for 

	R [options] [< infile] [> outfile]
	
> I do capacity planning and would like to be able to have JPEG plots of real time statistical data appear on web pages, so I'm
> thinking that a CGI can be executed that starts R up, generates a plot, and writes it to a file.  We currently use gnuplot, but with
> all of the statistical needs we have, it is turning out to be less flexible than we had hoped.

Also note that the FAQ mentions two R / WWW projects and I made use of Rcgi for
a simple web interface, including graph creation. Works well.

Dirk

-- 
Three out of two people have difficulties with fractions.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From partha_bagchi at hgsi.com  Fri Oct  5 16:09:44 2001
From: partha_bagchi at hgsi.com (partha_bagchi@hgsi.com)
Date: Fri, 5 Oct 2001 10:09:44 -0400
Subject: [R] non-interactive R usage...
Message-ID: <OFED9DB246.FB9190E4-ON85256ADC.004D6D94@hgsi.com>


Take a look at Rweb from Jeff Banfield (http://www.math.montana.edu/Rweb/)
or Rcgi which is a CGI WWW interface to R by Mark J Ray. This information
is also mention in the FAQ.



                                                                                                           
                    "Chris Milkosky"                                                                       
                    <c.milkosky at xpedite.        To:     "r-mailing-list" <r-help at stat.math.ethz.ch>        
                    com>                        cc:                                                        
                    Sent by:                    Subject:     [R] non-interactive R usage...                
                    owner-r-help at stat.ma                                                                   
                    th.ethz.ch                                                                             
                                                                                                           
                                                                                                           
                    10/05/2001 09:23 AM                                                                    
                                                                                                           
                                                                                                           




<Newbie alert> Hello all! </Newbie alert>   =)

Hi all,

First of all, I'm new to R and I'm REALLY REALLY impressed by it.  It's an
asset to the open source community.  I can't begin to say
how glad I am to have stumbled across it in freshmeat.net...  Kudos to the
developers - you've done a great job.

OK - my question may be answered by looking through documentation (I did
RTFM), but I haven't noticed anything yet.  I think I must
just be missing something though.

Does R give you the capability to run a script (read as non-interactive)
that would perform a statistical task, and then send output
to a file?  For example: read a set of data from a file, generate a JPEG
_file_ containing a plot of the data (with some specific
stat calcs plotted of course), and then exit?

I do capacity planning and would like to be able to have JPEG plots of real
time statistical data appear on web pages, so I'm
thinking that a CGI can be executed that starts R up, generates a plot, and
writes it to a file.  We currently use gnuplot, but with
all of the statistical needs we have, it is turning out to be less flexible
than we had hoped.

Has this been done before?  Could it be?  If so, can we pass command line
parameters to our R scripts somehow?

Thanks,

Chris


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._._



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From macq at llnl.gov  Fri Oct  5 16:11:26 2001
From: macq at llnl.gov (Don MacQueen)
Date: Fri, 5 Oct 2001 07:11:26 -0700
Subject: [R] about the char _
In-Reply-To: <200110051157.XAA25686@gosset.stats.waikato.ac.nz>
References: <MABBLJDICACNFOLGIHJOMECMCGAA.phgrosje@ulb.ac.be>
 <200110051157.XAA25686@gosset.stats.waikato.ac.nz>
Message-ID: <p05101021b7e36e4865f8@[128.115.153.6]>

I can't think of any alternative either.

Note that Insightful started allowing "=" as a valid assignment 
operator in Splus starting in version 5 (I think it was). I assume 
they did this bowing to popular demand, but it was a mistake, because 
one can now clobber oneself rather badly with a simple and 
easy-to-make typographical error:

>  x <- 3
>  if (x=4) cat('Oops!\n')
Oops!
>  x
[1] 4

-Don

(yes, there are many ways to hurt oneself with typos, but this one 
is, I think, more dangerous than most)

At 12:05 AM +1200 10/6/01, Murray Jorgensen wrote:
>Just one small point: the assignment symbol must be about the most commonly
>used symbol in any computer language. Yet in R and S+ it is represented by
>a two-character string with, moreover, a change in case! I won't mind
>giving up underscore as an assignment if an alternate single character,
>preerably lower-case symbol is made available. Trouble is, I can't think of
>anything!
>
>Murray Jorgensen
>
>
>Dr Murray Jorgensen       http://www.stats.waikato.ac.nz/Staff/maj.html
>Department of Statistics, University of Waikato, Hamilton, New Zealand
>*Applications Editor, Australian and New Zealand Journal of Statistics*
>maj at waikato.ac.nz Phone +64-7 838 4773 home phone 856 6705 Fax 838 4155
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


-- 
--------------------------------------
Don MacQueen
Environmental Protection Department
Lawrence Livermore National Laboratory
Livermore, CA, USA
--------------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andy_liaw at merck.com  Fri Oct  5 16:13:04 2001
From: andy_liaw at merck.com (Liaw, Andy)
Date: Fri, 05 Oct 2001 10:13:04 -0400
Subject: [R] non-interactive R usage...
Message-ID: <51F9C42DA15CD311BD220008C707D81903DC82E0@usrymx10.merck.com>

I just try the following on Linux (Mandrake7.1) and it works:

file (tryplot.R:
jpeg("tryplot.jpg")
plot(rnorm(100))
dev.off()

>From the shell prompt:
R --no-save < tryplot.R > tryplot.Rout

This generated the JPEG file, and dump the R session text to tryplot.Rout.

If I understand correctly, jpeg() will *not* work with R BATCH, since it
depends on x11(), and x11() isn't available when run under batch mode.

Andy

> -----Original Message-----
> From: Chris Milkosky [mailto:c.milkosky at xpedite.com]
> Sent: Friday, October 05, 2001 9:24 AM
> To: r-mailing-list
> Subject: [R] non-interactive R usage...
> 
> 
> <Newbie alert> Hello all! </Newbie alert>   =)
> 
> Hi all,
> 
> First of all, I'm new to R and I'm REALLY REALLY impressed by 
> it.  It's an asset to the open source community.  I can't begin to say
> how glad I am to have stumbled across it in freshmeat.net...  
> Kudos to the developers - you've done a great job.
> 
> OK - my question may be answered by looking through 
> documentation (I did RTFM), but I haven't noticed anything 
> yet.  I think I must
> just be missing something though.
> 
> Does R give you the capability to run a script (read as 
> non-interactive) that would perform a statistical task, and 
> then send output
> to a file?  For example: read a set of data from a file, 
> generate a JPEG _file_ containing a plot of the data (with 
> some specific
> stat calcs plotted of course), and then exit?
> 
> I do capacity planning and would like to be able to have JPEG 
> plots of real time statistical data appear on web pages, so I'm
> thinking that a CGI can be executed that starts R up, 
> generates a plot, and writes it to a file.  We currently use 
> gnuplot, but with
> all of the statistical needs we have, it is turning out to be 
> less flexible than we had hoped.
> 
> Has this been done before?  Could it be?  If so, can we pass 
> command line parameters to our R scripts somehow?
> 
> Thanks,
> 
> Chris
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From baron at cattell.psych.upenn.edu  Fri Oct  5 16:13:38 2001
From: baron at cattell.psych.upenn.edu (Jonathan Baron)
Date: Fri, 5 Oct 2001 10:13:38 -0400 (EDT)
Subject: [R] non-interactive R usage...
Message-ID: <200110051413.f95EDcu26361@cattell.psych.upenn.edu>

I run scripts in R like this:

R --vanilla < script.R

This is on Linux/Unix.  Don't know about DOS/Windows.  But I
learned about it from looking at the R man page: man R.

There is also a BATCH mode.  I haven't tried that.
See
help(BATCH)

Jon

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tklistaddr at keittlab.bio.sunysb.edu  Fri Oct  5 16:15:50 2001
From: tklistaddr at keittlab.bio.sunysb.edu (Timothy H. Keitt)
Date: Fri, 05 Oct 2001 10:15:50 -0400
Subject: [R] about the char _
References: <MABBLJDICACNFOLGIHJOEEDACGAA.phgrosje@ulb.ac.be>
Message-ID: <3BBDC096.70509@keittlab.bio.sunysb.edu>

I personally would like to see underscore assignment removed. Perhaps it 
could be temporarily a global option whether this is accepted. It might 
also help to issue lots of warnings whenever it is parsed. The 
"make.names" function isn't as useful as one might think. I used it to 
do automatic conversion between SQL and R names, but ran into things like:

dbListTables(conn)

[1] my.table                                    % converted from my_table

dbGetQuery(conn, "select * from my.table") % Oops, forgot that its 
really my_table

ERROR: invalid SQL

You can really scan the SQL and remove the dots because that is used to 
indicate table fields, e.g., my_table.my_column.

Let's kill that bit of cruft (underscore assignment) asap.

Tim

Philippe Grosjean wrote:

>Well, you are totally right. Backward compatibility *is* very important.
>That is probably a reason why the R team keeps _ as a synonym of <- for
>assignation. And still, there is the nice function make.names() to eliminate
>improper characters from name strings. Yet, I still believe that not using .
>(dot) in names strings would easy to decrypt the "object hierarchy" in R as
>in Splus. make.names() replaces any improper character by ... a dot. Thus,
>you got dots everywhere in variables names when you import data from SAS, or
>any external source.
>
>
>-----Message d'origine-----
>De : Patrick Connolly [mailto:P.Connolly at hortresearch.co.nz]
>Envoye : vendredi 5 octobre 2001 14:33
>A : Philippe Grosjean
>Cc : R-help
>Objet : Re: [R] about the char _
>
>
>According to Philippe Grosjean:
>|>
>
>.....
>
>|> If _ was allowed in variables names, we could use print.my_var
>|> (which should, perhaps, be recommended) and it would be easier to spot
>where
>|> is the "object hierarchy" and where is the variable name.
>
>Here is one stick-in-the-mud who does not share the enthusiasm for
>such a change.  I started using Splus almost 10 years ago, and being a
>confirmed lazy typist ever since I started using unix, I immediately
>adopted the '_' shortform instead of the clumsy '<-' sequence.  It's
>an ingrained habit now which will be hard for an old codger to get out
>of.  Some esteemed contributors to this list have strong feelings
>against its use, but for my own use, I don't encounter any problems.
>If I make my code public I change it, but at the time of writing it in
>the first place, I'm very attached to lazy typing.
>
>There are hundreds of files of code which I have written the lazy way
>and I periodically source those.  Perhaps it wouldn't be difficult to
>search and replace in those files, but I'd prefer not to edit them
>since the date of the files is important information.
>
>Of course, such a stick-in-the-mud attitude does make it difficult to
>make progress by insisting on backward compatibility, but I offer a
>suggestion.
>
>You could get a similar effect with names such as my..variable which
>would be visually distinctive from my.variable and still work with the
>current convention, but I don't know if SAS could deal with such a
>name. There could be a problem with ..myfun.x1 because it would not be
>available to the likes of objects(), but there could well be a way
>around that.
>
>best
>
>
>--
>*************************************************************
>   ___      Patrick Connolly
> {~._.~}    HortResearch             Great minds discuss ideas;
> _( Y )_    Mt Albert                Average minds discuss events;
>(:_~*~_:)   Auckland                 Small minds discuss people.
> (_)-(_)    New Zealand                                    .... Anon
>            Ph: +64-9 815 4200 x 7188
>*************************************************************
>
>
>______________________________________________________
>The contents of this e-mail are privileged and/or confidential to the
>named recipient and are not to be used by any other person and/or
>organisation. If you have received this e-mail in error, please notify
>the sender and delete all material pertaining to this e-mail.
>______________________________________________________
>
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Fri Oct  5 16:41:51 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Fri, 5 Oct 2001 07:41:51 -0700 (PDT)
Subject: [R] non-interactive R usage...
In-Reply-To: <51F9C42DA15CD311BD220008C707D81903DC82E0@usrymx10.merck.com>
Message-ID: <Pine.A41.4.33.0110050739001.95096-100000@homer36.u.washington.edu>

On Fri, 5 Oct 2001, Liaw, Andy wrote:

> I just try the following on Linux (Mandrake7.1) and it works:
>
> file (tryplot.R:
> jpeg("tryplot.jpg")
> plot(rnorm(100))
> dev.off()
>
> From the shell prompt:
> R --no-save < tryplot.R > tryplot.Rout
>
> This generated the JPEG file, and dump the R session text to tryplot.Rout.
>
> If I understand correctly, jpeg() will *not* work with R BATCH, since it
> depends on x11(), and x11() isn't available when run under batch mode.


Also, if you have any degree of control over the browser used you might
want to use png() rather than jpeg(). The jpeg compression algorithm is
optimised for photographs and in many statistical graphs it is relatively
inefficient and introduces annoying artifacts.  Older browsers don't speak
PNG, though.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From murdoch at stats.uwo.ca  Fri Oct  5 17:18:06 2001
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 05 Oct 2001 11:18:06 -0400
Subject: [R] about the char _
In-Reply-To: <B0002191321@netserv1.accucom.net>
References: <3BBD8128.42B774FD@cbs.dtu.dk> <200110051157.XAA25686@gosset.stats.waikato.ac.nz> <B0002191321@netserv1.accucom.net>
Message-ID: <jkirrt4dvncn5v5qb8uqcc6jfbfv7ghj48@4ax.com>

On Fri, 5 Oct 2001  Murray Jorgensen wrote:

> Just one small point: the assignment symbol must be about the most commonly
> used symbol in any computer language. Yet in R and S+ it is represented by
> a two-character string with, moreover, a change in case! 

I was curious about this, so I decided to do a quick character count
on the characters in the R library source.  I didn't have the current
version handy, so I did it on the version 1.2.2 source, consisting of
about 1.3 million characters.

This isn't counting symbols, it's counting characters, which is a lot
easier!

And the top 10 in frequency were:

  (0):  38323
  (n):  39921
  (i):  40075
  (s):  40947
  (a):  41137
  (t):  44049
  (.):  49665
  (e):  55619
  (,):  70619
  (SP): 313061

Of these, the only one that is almost certainly a symbol is the comma,
but it sure looks like whitespace is another contender!

If we restrict the counts to the single characters that are usually
symbols (in a really loose sense of "usually" and "symbols" :-), we
see:

  (]):   5731
  ([):   5799
  (=):  12183
  (<):  13897
  (-):  16985
  ("):  23380
  ()):  34756
  (():  34772
  (,):  70619

So assignment could well be in the top 10, but probably isn't in the
top 3.  And for what it's worth, the underscore was way down at a
count of 140.

Back to our regularly scheduled programming...

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andys at neptuneandco.com  Fri Oct  5 17:30:06 2001
From: andys at neptuneandco.com (Andrew Schuh)
Date: Fri, 05 Oct 2001 09:30:06 -0600
Subject: [R] non-interactive R usage...
In-Reply-To: <51F9C42DA15CD311BD220008C707D81903DC82E0@usrymx10.merck.co
 m>
Message-ID: <4.1.20011005092326.00a79020@63.225.15.193>

One way to get these formats (pngs,gifs,jpegs, etc) is to generate a postscript
file under a BATCH and then use some of the unix tools to convert to
PPN(PNM?).  Then one can use the PPN(PNM?)TOPNG type programs to further
convert to PNGs, GIFs, etc.  This is how Banfield generates his 'on the fly'
images.  The only problem I have found with it is that the image quality is not
very good.  I have messed around with the compression arguments to these
programs too with no luck.  I'm not sure at what point(s) the image quality
drops.  If anyone has any ideas of how to get around this I would be glad to
hear from them. 

At 10:13 AM 10/5/2001 -0400, Liaw, Andy wrote:
>I just try the following on Linux (Mandrake7.1) and it works:
>
>file (tryplot.R:
>jpeg("tryplot.jpg")
>plot(rnorm(100))
>dev.off()
>
>>From the shell prompt:
>R --no-save < tryplot.R > tryplot.Rout
>
>This generated the JPEG file, and dump the R session text to tryplot.Rout.
>
>If I understand correctly, jpeg() will *not* work with R BATCH, since it
>depends on x11(), and x11() isn't available when run under batch mode.
>
>Andy
>
>> -----Original Message-----
>> From: Chris Milkosky [mailto:c.milkosky at xpedite.com]
>> Sent: Friday, October 05, 2001 9:24 AM
>> To: r-mailing-list
>> Subject: [R] non-interactive R usage...
>> 
>> 
>> <Newbie alert> Hello all! </Newbie alert>   =)
>> 
>> Hi all,
>> 
>> First of all, I'm new to R and I'm REALLY REALLY impressed by 
>> it.  It's an asset to the open source community.  I can't begin to say
>> how glad I am to have stumbled across it in freshmeat.net...  
>> Kudos to the developers - you've done a great job.
>> 
>> OK - my question may be answered by looking through 
>> documentation (I did RTFM), but I haven't noticed anything 
>> yet.  I think I must
>> just be missing something though.
>> 
>> Does R give you the capability to run a script (read as 
>> non-interactive) that would perform a statistical task, and 
>> then send output
>> to a file?  For example: read a set of data from a file, 
>> generate a JPEG _file_ containing a plot of the data (with 
>> some specific
>> stat calcs plotted of course), and then exit?
>> 
>> I do capacity planning and would like to be able to have JPEG 
>> plots of real time statistical data appear on web pages, so I'm
>> thinking that a CGI can be executed that starts R up, 
>> generates a plot, and writes it to a file.  We currently use 
>> gnuplot, but with
>> all of the statistical needs we have, it is turning out to be 
>> less flexible than we had hoped.
>> 
>> Has this been done before?  Could it be?  If so, can we pass 
>> command line parameters to our R scripts somehow?
>> 
>> Thanks,
>> 
>> Chris
>> 
>> 
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
>> -.-.-.-.-.-.-.-.-
>> r-help mailing list -- Read 
>> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To: 
>> r-help-request at stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
>> _._._._._._._._._
>> 
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20011005/6ea6b541/attachment.html

From gregory_r_warnes at groton.pfizer.com  Fri Oct  5 17:48:21 2001
From: gregory_r_warnes at groton.pfizer.com (Warnes, Gregory R)
Date: Fri, 5 Oct 2001 11:48:21 -0400 
Subject: [R] non-interactive R usage...
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEEAE@groexmbcr02.pfizer.com>


There are a number of ways of using R non-interactively.  The simplest
method is just to put your R commands in a file, say 'myscript.R' and do 

(Under Unix/Linux:)

   R --no-save < myscript.R > myscript.out

(Under MS-Windows)

   Rterm < myscript.R > myscript.out


This will run R, feeding it the commands in 'myscript.R' and send the output
to 'myscript.out'. 

Note that if you want graphics saved to a file that you should explicitly
open (and then close!) the desired device.

-Greg


 >  -----Original Message-----
 >  From: Chris Milkosky [mailto:c.milkosky at xpedite.com]
 >  Sent: Friday, October 05, 2001 9:24 AM
 >  To: r-mailing-list
 >  Subject: [R] non-interactive R usage...
 >  
 >  
 >  <Newbie alert> Hello all! </Newbie alert>   =)
 >  
 >  Hi all,
 >  
 >  First of all, I'm new to R and I'm REALLY REALLY impressed 
 >  by it.  It's an asset to the open source community.  I 
 >  can't begin to say
 >  how glad I am to have stumbled across it in 
 >  freshmeat.net...  Kudos to the developers - you've done a great job.
 >  
 >  OK - my question may be answered by looking through 
 >  documentation (I did RTFM), but I haven't noticed anything 
 >  yet.  I think I must
 >  just be missing something though.
 >  
 >  Does R give you the capability to run a script (read as 
 >  non-interactive) that would perform a statistical task, and 
 >  then send output
 >  to a file?  For example: read a set of data from a file, 
 >  generate a JPEG _file_ containing a plot of the data (with 
 >  some specific
 >  stat calcs plotted of course), and then exit?
 >  
 >  I do capacity planning and would like to be able to have 
 >  JPEG plots of real time statistical data appear on web pages, so I'm
 >  thinking that a CGI can be executed that starts R up, 
 >  generates a plot, and writes it to a file.  We currently 
 >  use gnuplot, but with
 >  all of the statistical needs we have, it is turning out to 
 >  be less flexible than we had hoped.
 >  
 >  Has this been done before?  Could it be?  If so, can we 
 >  pass command line parameters to our R scripts somehow?
 >  
 >  Thanks,
 >  
 >  Chris
 >  
 >  
 >  -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
 >  -.-.-.-.-.-.-.-.-.-
 >  r-help mailing list -- Read 
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From merithew at ccmr.cornell.edu  Fri Oct  5 17:54:13 2001
From: merithew at ccmr.cornell.edu (Robert D. Merithew)
Date: Fri, 5 Oct 2001 11:54:13 -0400 (EDT)
Subject: [R] nls() fit to a lorentzian - can I specify partials?
Message-ID: <Pine.LNX.4.10.10110051135240.6488-100000@magic.ccmr.cornell.edu>


First, thanks to all who helped me with my question about rescaling axes
on the fly.  Using unlist() and range() to set the axis ranges in advance
worked well.  I've since plotted about 300 datasets with relative ease.

Now I'm trying to fit a lossy oscillator resonance to (the square root of)
a lorentzian (testframe$y is oscillator amplitude, testframe$x is drive
frequency):

lorentz <- nls( y ~ a0 / (Q*sqrt((1-(x/f0)^2)^2 + ((x/f0) * 1/Q)^2)),
               data = testframe,
               start = list (a0=1.4, f0=84321.6, Q=600000))

and am running into lots of convergence trouble (singular derivatives,
step factors heading off to 1/infinity, etc).

Does nls take symbolic partial derivatives of my expression?  (I suspect
it's doing derivatives numerically) 

Can I specify the partials in advance?

I noticed the 'deriv' function, but am baffled by its output:

> deriv(~ a0 / (Q*sqrt((1-(x/f0)^2)^2 + ((x/f0) * 1/Q)^2)),"a0")
expression({
    .expr1 <- x/f0
    .expr10 <- Q * sqrt(1 - .expr1^2^2 + .expr1 * 1/Q^2)
    .value <- a0/.expr10
    .grad <- array(0, c(length(.value), 1), list(NULL, c("a0")))
    .grad[, "a0"] <- 1/.expr10
    attr(.value, "gradient") <- .grad
    .value
})


I think .expr10 should look more like:

	Q * sqrt((1 - .expr1^2)^2 + (.expr1 * 1/Q)^2)

Is there simply a problem with the way the output of deriv() is displayed
(missing 2 sets of parentheses)?

Finally:  Is there a better way to do my lorentzian fits with R?


thanks,

--
Robert Merithew
LASSP, Cornell University

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From johann at ai.univie.ac.at  Fri Oct  5 18:15:20 2001
From: johann at ai.univie.ac.at (Johann Petrak)
Date: Fri, 05 Oct 2001 18:15:20 +0200
Subject: [R] non-interactive R usage...
References: <NEEALIKPCPOEAMABNNLLEEFDCMAA.c.milkosky@xpedite.com>
Message-ID: <3BBDDC98.1070605@ai.univie.ac.at>

Chris Milkosky wrote:


> Does R give you the capability to run a script (read as non-interactive) that would perform a statistical task, and then send output
> to a file?  For example: read a set of data from a file, generate a JPEG _file_ containing a plot of the data (with some specific
> stat calcs plotted of course), and then exit?
> 
> I do capacity planning and would like to be able to have JPEG plots of real time statistical data appear on web pages, so I'm
> thinking that a CGI can be executed that starts R up, generates a plot, and writes it to a file.  We currently use gnuplot, but with
> all of the statistical needs we have, it is turning out to be less flexible than we had hoped.
> 

There are two questions in there:
   - how to run R non-interactively: look at the BATCH option
     (try the command: 'R BATCH --help')

   - how to store the output of a plot command in a JPG file: this
     is done by using the "jpeg" device instead of the 'x11' device.
     Try 'help(Devices)' and 'help(jpeg)' in R for a start.

Johann




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bates at stat.wisc.edu  Fri Oct  5 19:18:22 2001
From: bates at stat.wisc.edu (Douglas Bates)
Date: 05 Oct 2001 12:18:22 -0500
Subject: [R] nls() fit to a lorentzian - can I specify partials?
In-Reply-To: <Pine.LNX.4.10.10110051135240.6488-100000@magic.ccmr.cornell.edu>
References: <Pine.LNX.4.10.10110051135240.6488-100000@magic.ccmr.cornell.edu>
Message-ID: <6ru1xe80pt.fsf@franz.stat.wisc.edu>

"Robert D. Merithew" <merithew at ccmr.cornell.edu> writes:

> Now I'm trying to fit a lossy oscillator resonance to (the square root of)
> a lorentzian (testframe$y is oscillator amplitude, testframe$x is drive
> frequency):
> 
> lorentz <- nls( y ~ a0 / (Q*sqrt((1-(x/f0)^2)^2 + ((x/f0) * 1/Q)^2)),
>                data = testframe,
>                start = list (a0=1.4, f0=84321.6, Q=600000))
> 
> and am running into lots of convergence trouble (singular derivatives,
> step factors heading off to 1/infinity, etc).

The documentation for the nls function is not as complete as it should
be.  

> Does nls take symbolic partial derivatives of my expression?  (I suspect
> it's doing derivatives numerically) 

It uses numerical derivatives.

> Can I specify the partials in advance?

Yes.  Define a function Lorentzian with arguments x, a0, f0, and Q.
It should return the function value as a vector of the same length as
x with an attribute named "gradient" that is an length(x) by 3
matrix.  The column names of the matrix should be "a0", "f0", and "Q"

> I noticed the 'deriv' function, but am baffled by its output:
> 
> > deriv(~ a0 / (Q*sqrt((1-(x/f0)^2)^2 + ((x/f0) * 1/Q)^2)),"a0")
> expression({
>     .expr1 <- x/f0
>     .expr10 <- Q * sqrt(1 - .expr1^2^2 + .expr1 * 1/Q^2)
>     .value <- a0/.expr10
>     .grad <- array(0, c(length(.value), 1), list(NULL, c("a0")))
>     .grad[, "a0"] <- 1/.expr10
>     attr(.value, "gradient") <- .grad
>     .value
> })
> 
> 
> I think .expr10 should look more like:
> 
> 	Q * sqrt((1 - .expr1^2)^2 + (.expr1 * 1/Q)^2)
> 
> Is there simply a problem with the way the output of deriv() is displayed
> (missing 2 sets of parentheses)?

I imagine the actual expression tree for .expr10 corresponds to the
expression you wrote but it is being deparsed without the parentheses.

> Finally:  Is there a better way to do my lorentzian fits with R?

The parameter a0 is a conditionally linear parameter.  You can remove
that from the optimization by using the "plinear" algorithm.  I would
also recommend setting trace = TRUE so you can see the steps that are
being taken in the algorithm.

lorentz <- nls( y ~ 1 / (Q*sqrt((1-(x/f0)^2)^2 + ((x/f0) * 1/Q)^2)),
               data = testframe, alg = "plinear",
               start = list (f0=84321.6, Q=600000), trace = TRUE)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From monnie at xena.hunter.cuny.edu  Fri Oct  5 21:10:54 2001
From: monnie at xena.hunter.cuny.edu (Monnie McGee)
Date: Fri, 05 Oct 2001 15:10:54 -0400
Subject: [R] Installing R on Solaris
Message-ID: <200110051908.f95J8RM19100@xena.hunter.cuny.edu>

Dear All,

Thank you to all who replied to my problem with R-installation.  It turns
out that the solution was simple: I changed my PATH to include
/usr/ccs/bin.  R then installed without any problem, and it is running fine
now.

Thanks again,
Monnie McGee

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From xiao.gang.fan1 at libertysurf.fr  Fri Oct  5 21:47:53 2001
From: xiao.gang.fan1 at libertysurf.fr (Fan)
Date: Fri, 05 Oct 2001 20:47:53 +0100
Subject: [R] about the char _
References: <MABBLJDICACNFOLGIHJOMECMCGAA.phgrosje@ulb.ac.be> <3BBD8128.42B774FD@cbs.dtu.dk> <3BBDB739.EE1BF46@virginia.edu>
Message-ID: <3BBE0E69.E03A2DD8@libertysurf.fr>

1. I totally agree with the idea of maintaining back compatibility,
my question was: "is there an option to change this behaviour"
(locally or globally). An option will be the only way to satisfy everyone.

2. I'm little surprised of the discussions followed in this thread:
my question was not a theoritical langugage concern (like the operator
assignment, lazeiness, etc.), or a conversion feasability (like make.names, 
use of ""), but rather the following issue:
  "how to maintain the same variable names in different systems"

--
Fan

ps: the origin of the assignment in S comed from APL, 
the first array or vector oriented language.

Frank E Harrell Jr wrote :
> I have to agree with Laurent.  I don't think this is a
> big issue.  I've been importing SAS datasets into S
> for 10 years and have not ever been disappointed to
> see a period instead of an underscore in a variable
> name.
> 
> In addition it is very important to maintain compatibility
> with S-Plus on this issue.
> 
> Users of ESS under Emacs can be lazy and politically
> correct also as _ is immediately expanded to <-
> 
> Frank
> 
> Laurent Gautier wrote:
> >
> > I do not want to pour oil on fire (see the "S-Plus != R" earlier this
> > week).
> > (I am writing in peace. =)  )
> >
> > I do not see the 'underscore' thing as a _major_ issue.
> >
> > If one really really really want to have underscores, one still can:
> >
> > > "underscore_if_I_want" <- 2
> > > get("underscore_if_I_want")
> > [1] 2
> >
> > Regards,
> >
> > Laurent
> >
> > Philippe Grosjean wrote:
> > >
> > > >Dear all,
> > >
> > > >I don't know the historical reason why the char '_' was
> > > >defined in the R language grammar as a synonyme of the
> > > >assignment <-, anyway the R documentation dosen't recommand
> > > >its usage.
> > >
> > > >Well, this is a real "incompatibility issue" each time
> > > >we need to interface R with other language/systems, notably with
> > > >database systems. Recall that, in perhaps all computer systems,
> > > >the char '_' can be used in the name of a variable or a column
> > > >in a data table.
> > >
> > > >So that's my question : is there an option to change this
> > > >behaviour ?
> > >
> > > >All that I want is the possibility to use the same name of
> > > >variables in my R source as they are declared in the other systems.
> > >
> > > >Thanks
> > > >--
> > > >Fan
> > >
> > > I totally agree with this. Since _ is a deprecated synonym of <-, is it any
> > > possibility to eliminate it in one of the next major versions of R?
> > > Therefore, a variable name like my_variable would become viable... like in
> > > most other computer languages. What I really appreciate in R synthax is that
> > > there is almost no ambiguities. I mean, in R, a word has only one
> > > signification. For instance <- is assignation, = gives a value to an
> > > argument in a function and == is for comparison, where some other languages
> > > use the same = in the different situations. As far as I know, there are only
> > > two cases where the same word (or character) can be used in two different
> > > situations:
> > > 1) A function, and an argument in a function can both have the same name,
> > > i.e., myfunction <- function(myfunction="value", arg2,...) {} is viable;
> > > 2) The dot is used both in variable names and to represent the object
> > > hierarchy: my.var and print.myvar. The first dot is part of the variable
> > > name, while the second dot separate the method (print) and the variable
> > > (myvar). If _ was allowed in variables names, we could use print.my_var
> > > (which should, perhaps, be recommended) and it would be easier to spot where
> > > is the "object hierarchy" and where is the variable name.
> > > Best,
> > >
> > > Philippe Grosjean
> > >
> > > ...........]<(({?<...............<?}))><...............................
> > >  ) ) ) ) )       __                      __
> > > ( ( ( ( (       |__)                    |  _
> > >  ) ) ) ) )      |   hilippe             |__)rosjean
> > > ( ( ( ( (       Marine Biol. Lab., ULB, Belgium
> > >  ) ) ) ) )                               __
> > > ( ( ( ( (       |\  /|                  |__)
> > >  ) ) ) ) )      | \/ |ariculture &      |__)iostatistics
> > > ( ( ( ( (
> > >  ) ) ) ) )      e-mail: phgrosje at ulb.ac.be or phgrosjean at sciviews.org
> > > ( ( ( ( (       SciViews project coordinator (http://www.sciviews.org)
> > >  ) ) ) ) )      tel: 00-32-2-650.29.70 (lab), 00-32-2-673.31.33 (home)
> > > ( ( ( ( (
> > >  ) ) ) ) )      "I'm 100% confident that p is between 0 and 1"
> > > ( ( ( ( (                                  L. Gonick & W. Smith (1993)
> > >  ) ) ) ) )
> > > .......................................................................
> > >
> > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> > --
> > Laurent Gautier                 CBS, Building 208, DTU
> > PhD. Student                    D-2800 Lyngby,Denmark
> > tel: +45 45 25 24 85            http://www.cbs.dtu.dk/laurent
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> --
> Frank E Harrell Jr              Prof. of Biostatistics & Statistics
> Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
> U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From s-luppescu at uchicago.edu  Fri Oct  5 22:16:12 2001
From: s-luppescu at uchicago.edu (s-luppescu@uchicago.edu)
Date: Fri, 05 Oct 2001 15:16:12 -0500 (CDT)
Subject: [R] Reading in data in a triangle
Message-ID: <XFMail.20011005151612.s-luppescu@uchicago.edu>

I have plain-text data in lower triangular form that I want to read in. Does
anyone know of an easy way to do this?
______________________________________________________________________
Stuart Luppescu         -=-=-  University of Chicago
$(B:MJ8$HCRF`H~$NIc(B        -=-=-  s-luppescu at uchicago.edu
http://www.consortium-chicago.org/people/sl.html
http://musuko.uchicago.edu/pubkey.asc for PGP Public Key
ICQ #21172047  AIM: psycho7070
I have found little that is good about human beings.  In my experience
most of them are trash.
                -- Sigmund Freud
>> Sent on 05-Oct-2001 at 15:14:29 with xfmail
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jasont at indigoindustrial.co.nz  Fri Oct  5 23:03:54 2001
From: jasont at indigoindustrial.co.nz (Jason Turner)
Date: Sat, 6 Oct 2001 09:03:54 +1200
Subject: [R] 3dim histogram?
In-Reply-To: <FB75CFC167F3D311B11D00A0CC20FB0E3734CF@nts7.oec.Uni-Osnabrueck.DE>; from dtrenkler@nts6.oec.uni-osnabrueck.de on Fri, Oct 05, 2001 at 11:45:25AM +0200
References: <FB75CFC167F3D311B11D00A0CC20FB0E3734CF@nts7.oec.Uni-Osnabrueck.DE>
Message-ID: <20011006090354.B1194@camille.indigoindustrial.co.nz>

> I wonder if there is a package including a program to display a 3dim
> histogram.

Not histograms, but density estimates...

library(sm)
sm.density(...)

This is a non-parametric density estimate, and a rather
nice one too.

If you have Large data sets (note - capital-L large ;-)

library(KernSmooth)
bkde2d(...)

is much faster, as it uses binning and an fft or two. 

I've used these with persp() to give nice visual stuff.

Cheers

Jason
-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont at indigoindustrial.co.nz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From faheem at email.unc.edu  Fri Oct  5 23:57:07 2001
From: faheem at email.unc.edu (Faheem Mitha)
Date: Fri, 5 Oct 2001 17:57:07 -0400 (EDT)
Subject: [R] modifying matrix allocation functions for use with R
Message-ID: <Pine.LNX.4.33.0110051552330.7289-100000@Chrestomanci>


Dear R people,

I'm using compiled C code as a shared library as a backend to C code,
using the .C interface. I need to do some matrix manipulation in the C
code. I decided to use the new GSL (Gnu Scientific Library) currently
(0.9.3) in beta status.

This has appropriate matrix structures defined, and quite a comprehensive
collection of matrix routines. However, there is a problem with the space
allocation routines for the matrix structures, in that they use the
standard malloc. In "Writing R Extensions" two ways are listed for doing
memory allocation in this context, "transient memory allocation"  (5.1.1)
and "user-controlled memory" (5.1.2). However, neither of these is the
standard malloc, and my current understanding is because the standard
malloc does not work with compiled libs for R.

My current thinking is to rewrite these routines in R. I am open to other
suggestions. If there is anyone who has needed to use and define matrix
routines in this context, I would be interested to hear what you did.

Another option would be to define the matrices in R and pass them
down, but this would mean having to use the .Call interface or something
instead of the .C one, and that is a little too rich for my blood.

A second more general question. Is there any gain in efficiency in using
"native" C code in place of R entry points for C code, like for random
number generation etc?

Please ccc me if you reply, I'm not subscribed to the list. Thanks.

                                    Sincerely, Faheem Mitha.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jfox at mcmaster.ca  Sat Oct  6 06:37:32 2001
From: jfox at mcmaster.ca (John Fox)
Date: Sat, 06 Oct 2001 00:37:32 -0400
Subject: [R] Reading in data in a triangle
In-Reply-To: <XFMail.20011005151612.s-luppescu@uchicago.edu>
Message-ID: <5.1.0.14.2.20011006002452.01c3f888@mcmail.cis.mcmaster.ca>

Dear Stuart,

At 03:16 PM 05/10/2001 -0500, s-luppescu at uchicago.edu wrote:
>I have plain-text data in lower triangular form that I want to read in. Does
>anyone know of an easy way to do this?

It's not altogether clear to me what you want to do, but I'll take a stab 
at it.

Simply to read the data into a vector is no trick: scan will do that. 
Assuming that you want to read the data into a lower-triangular matrix, you 
might try something like the following, starting with the file LT.txt, 
which contains:

     1
     2 3
     4 5 6
     7 8 9 10

Then, constructing an upper-triangular matrix and transposing it,

     > U <- matrix(0, 4, 4)
     > U[outer(1:4, 1:4, '<=')] <- scan('c:/temp/LT.txt')
     Read 10 items
     > t(U)
         [,1] [,2] [,3] [,4]
     [1,]    1    0    0    0
     [2,]    2    3    0    0
     [3,]    4    5    6    0
     [4,]    7    8    9   10

Is that what you need?

  John


-----------------------------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario, Canada L8S 4M4
email: jfox at mcmaster.ca
phone: 905-525-9140x23604
web: www.socsci.mcmaster.ca/jfox
-----------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mariacoll at tiscalinet.it  Sat Oct  6 09:40:00 2001
From: mariacoll at tiscalinet.it (Marilena Colletta)
Date: Sat, 6 Oct 2001 09:40:00 +0200
Subject: [R] help memory size
Message-ID: <000e01c14e3a$1b6d4460$34cf0a3e@colletta>

I'm Marilena and I have a problem with R (Version of R that I'm using is 1.2.1 and 1.3.1). My file data is so big that the R's memory is inadeguate.When I read "help( memory.size)" I don't obtain adeguate memory size. My teacher adviser myself that I must user modality batch. Help !
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20011006/5674d481/attachment.html

From ripley at stats.ox.ac.uk  Sat Oct  6 10:44:28 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 6 Oct 2001 09:44:28 +0100 (BST)
Subject: [R] non-interactive R usage...
In-Reply-To: <4.1.20011005092326.00a79020@63.225.15.193>
Message-ID: <Pine.GSO.4.31.0110060939550.9255-100000@auk.stats>

On Fri, 5 Oct 2001, Andrew Schuh wrote:

> One way to get these formats (pngs,gifs,jpegs, etc) is to generate a postscript
> file under a BATCH and then use some of the unix tools to convert to
> PPN(PNM?).  Then one can use the PPN(PNM?)TOPNG type programs to further
> convert to PNGs, GIFs, etc.  This is how Banfield generates his 'on the fly'
> images.  The only problem I have found with it is that the image quality is not
> very good.  I have messed around with the compression arguments to these
> programs too with no luck.  I'm not sure at what point(s) the image quality
> drops.  If anyone has any ideas of how to get around this I would be glad to
> hear from them.

1) Look at R's bitmap() device, which postdates Rcgi etc.

2) jpeg() is not available in BATCH mode on Unix, but it is on Windows
(at least on a workstation: I have no motivation to try it on a Windows
Server but suspect it may fail for permissions reasons).

3) If you are running on a Unix workstation and are logged it at the
console the using R --no-save < infile > outfile enables you to use
jpeg().  Using R BATCH deliberately disables this, since those conditions
are often not met in batch use.

[...]

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Oct  6 10:54:39 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 6 Oct 2001 09:54:39 +0100 (BST)
Subject: [R] about the char _
In-Reply-To: <3BBE0E69.E03A2DD8@libertysurf.fr>
Message-ID: <Pine.GSO.4.31.0110060946200.9255-100000@auk.stats>

For clarity, can we note that there are two issues here?

1) Should "_" be allowed for assignment?   Currently "<-" and "->" and "_"
and (in R-devel only, in some circumstances) "=" are allowed.

2) Should "_" be allowed in names.  This falls into two parts.
a) should it be allowed in bare names (unquoted)
b) should it be allowed in non-standard (quoted) names.

Now 2a implies not-1, but there are a lot of other possibilities.

Even if we change 1 to "no" (which I have advocated), I think allowing 2a
would be very confusing to experienced users.  And several correspondents
are asking for 2a, not to change 1.


On Fri, 5 Oct 2001, Fan wrote:

> 1. I totally agree with the idea of maintaining back compatibility,
> my question was: "is there an option to change this behaviour"
> (locally or globally). An option will be the only way to satisfy everyone.
>
> 2. I'm little surprised of the discussions followed in this thread:
> my question was not a theoritical langugage concern (like the operator
> assignment, lazeiness, etc.), or a conversion feasability (like make.names,
> use of ""), but rather the following issue:
>   "how to maintain the same variable names in different systems"
>
> --
> Fan
>
> ps: the origin of the assignment in S comed from APL,
> the first array or vector oriented language.

Well, JMC can comment on that.  I understood from Rick Becker that long
long ago AT&T had terminals with a left-arrow key and that was the original
S assignment symbol.  I less clearly remember being told that it generated
the ASCII code for _.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Oct  6 11:41:46 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 6 Oct 2001 10:41:46 +0100 (BST)
Subject: [R] modifying matrix allocation functions for use with R
In-Reply-To: <Pine.LNX.4.33.0110051552330.7289-100000@Chrestomanci>
Message-ID: <Pine.LNX.4.31.0110061032400.9611-100000@gannet.stats>

On Fri, 5 Oct 2001, Faheem Mitha wrote:

>
> Dear R people,
>
> I'm using compiled C code as a shared library as a backend to C code,
> using the .C interface. I need to do some matrix manipulation in the C
> code. I decided to use the new GSL (Gnu Scientific Library) currently
> (0.9.3) in beta status.
>
> This has appropriate matrix structures defined, and quite a comprehensive
> collection of matrix routines. However, there is a problem with the space
> allocation routines for the matrix structures, in that they use the
> standard malloc. In "Writing R Extensions" two ways are listed for doing
> memory allocation in this context, "transient memory allocation"  (5.1.1)
> and "user-controlled memory" (5.1.2). However, neither of these is the
> standard malloc, and my current understanding is because the standard
> malloc does not work with compiled libs for R.

Not so. You can use standard malloc, and people often do.
There are some BUTs though:

1) You must not mix standard malloc/free with R's Calloc/Free.  This will
crash the Windows port with great rapidity.

2) You have to check that the allocations worked and generate suitable
error handling (and terminating R via a call to exit() is not suitable).

3) You need error handlers to de-allocate the memory if your code gets
interrupted.

It is normally simplest to change the malloc calls, but you can also
write wrappers so that malloc calls R_alloc and free does nothing.

> My current thinking is to rewrite these routines in R. I am open to other
> suggestions. If there is anyone who has needed to use and define matrix
> routines in this context, I would be interested to hear what you did.

R has package Matrix interfacing to C++ matrix routines.

> Another option would be to define the matrices in R and pass them
> down, but this would mean having to use the .Call interface or something
> instead of the .C one, and that is a little too rich for my blood.

R matrices are quite different objects from C matrices.

> A second more general question. Is there any gain in efficiency in using
> "native" C code in place of R entry points for C code, like for random
> number generation etc?

None: the R entry points for C code are calls directly to efficient C
code.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thoffman at zappa.sax.de  Sat Oct  6 13:29:44 2001
From: thoffman at zappa.sax.de (Thomas Hoffmann)
Date: Sat, 06 Oct 2001 12:29:44 +0100
Subject: [R] src/modules/Makefile.in: What is the (practical) difference betw. 
 SUBDIRS and MODULES?
Message-ID: <3BBEEB28.D1763920@zappa.sax.de>

As the subject says, one has

SUBDIRS = X11 gnome internet lapack vfonts

MODULES = $(R_GUIS) internet lapack vfonts

It is my understanding, that there is a 1:1 correspondence between
subdirs and modules. If this were true, then one could use one of
both in all places. Or do I overlook something here?

-- 
Thomas Hoffmann                                    Telephone: 49-351-4598831
thoffman at zappa.sax.de                                       Dresden, Germany

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Oct  6 13:35:08 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 6 Oct 2001 12:35:08 +0100 (BST)
Subject: [R] src/modules/Makefile.in: What is the (practical) difference
 betw.  SUBDIRS and MODULES?
In-Reply-To: <3BBEEB28.D1763920@zappa.sax.de>
Message-ID: <Pine.GSO.4.31.0110061228550.17118-100000@auk.stats>

On Sat, 6 Oct 2001, Thomas Hoffmann wrote:

> As the subject says, one has
>
> SUBDIRS = X11 gnome internet lapack vfonts
>
> MODULES = $(R_GUIS) internet lapack vfonts
>
> It is my understanding, that there is a 1:1 correspondence between
> subdirs and modules. If this were true, then one could use one of
> both in all places. Or do I overlook something here?

Not all R_GUIS might be supported: gnome often is not. So there is
on my Solaris system a gnome subdir but no gnome module.
Your assumption of a 1:1 correspondence is incorrect for my system, which
has

R_GUIS = X11

in $(top_builddir)/Makeconf.


MODULES is used for shared libraries to be made (to be dynamically loaded).
SUBDIRS is used for things to be cleaned and to be distributed.

One could argue that MODULES should be used for things to be cleaned, *BUT*
that might have be changed by a re-configure, so SUBDIRS looks safer.

[I'm not the author of any of this, and the choices made look right to me.]

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Oct  6 16:36:19 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 6 Oct 2001 15:36:19 +0100 (GMT Daylight Time)
Subject: [R] Accessing just the value of an object but not the attributes
In-Reply-To: <3BB9DE09.40408@ai.univie.ac.at>
Message-ID: <Pine.WNT.4.31.0110061532190.1088-100000@tern.stats>

On Tue, 2 Oct 2001, Johann Petrak wrote:

> I see the role of as.vector().
> But even if as.vector() needs to keep its attribute-dropping
> side-effect for compatibility reasons, wouldn't
> a dropattr() still be a good idea?

Not needed, as

attributes(x) <- NULL

removes all attributes.  I have no idea why this might be useful to you
.. remember that class and dim are attributes, for example.

Because they are not normally visible, assignment functions like
attributes<- are too little appreciated in S programming.

> For instance, I can assign attributes to closures, but
> wont get rid of them using as.vector() - and neither
> using as.function() by the way ...
> So if I dont know in advance what kind of object it is
> and I do want to just access the "value" in any case
> I have to check the type ... ?

[...]
-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Oct  6 18:17:01 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 6 Oct 2001 17:17:01 +0100 (BST)
Subject: [R] connections: remember to close it!
In-Reply-To: <51F9C42DA15CD311BD220008C707D81903DC82B8@usrymx10.merck.com>
Message-ID: <Pine.LNX.4.31.0110061706360.16709-100000@gannet.stats>

On Tue, 2 Oct 2001, Liaw, Andy wrote:

> Hi all,
>
> I have newly discovered the power of connections (although just a small part
> of it, namely the file() connection).  It allowed me to process data file
> with arbitrary number of fields per line, which I was using awk for
> preprocessing before readling into R.  The combination of the connection,
> readLines() and strsplit() really make the work a lot easier and more
> organized.  Thanks a bundle to the R Core for this excellent work!!
>
> One reminder for people new to connections:  If you open connections inside
> a function, make sure they are closed before exiting from that function,
> otherwise you end up with connections that can not be closed (or at least I
> tried closeAllConnections() without success on WinNT4).  Not being very
> smart or clear-headed, I turned a working R script that opens the connection
> and process the data into an R function, but introduced some bugs in the
> process.  I forgot to add "on.exit(close(filecon))" right after I open the
> connection in the function.  As a result, repeated failed calls to the
> function generated a bunch of open connections that I can't close.  I'm not
> sure what the consequences of this is.  I was able to quit R gracefully, but
> my NT seemed to have become unstable afterward.

Some terminology:

     `close' closes and destroys a connection.

     `closeAllConnections' closes all open user connections.

Notice the distinction.

You can close and destroy connections later. Just call
showConnections(all=FALSE)  and then use
close(getConnection(some.number)).  This *is* on the *same* help page as
closeAllConnections.

closeAllConnections was broken when close was made generic. It should read

function ()
{
    set <- getAllConnections()
    set <- set[set > 2]
    for (i in seq(along = set)) close(getConnection(set[i]))
    invisible()
}

and needs to be amended to handle the sink stack.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ozric at web.de  Sat Oct  6 19:21:40 2001
From: ozric at web.de (C. Schulz)
Date: Sat, 6 Oct 2001 19:21:40 +0200
Subject: [R] tcltk 
Message-ID: <200110061721.f96HLeu15840@mailgate5.cinetic.de>

HI,
(1) ...thanks for the last comments to tcltk & Win2000.
(2) - i'm newbie in tcl/tk but would like learn fast and develop
(learning by doing) a tcl/tk clusterAnalysis application which combine
some clusterMethods from different Rpackages.

i use the tkttest.R example as "reference" and become not finished for
my "first" step????
(3) how is it possible that the code from the tkttest.R example would
be execute and not only print to the screen; 
(4) Have somebody further "small" Rtcltk statistical sourceCode example's as
a further startingPoint for me ?

thanks for advance &
regards,christian



require (tcltk) || stop("tcltk support is absent")
require(cluster)
require(mva)
require(foreign)
local ({
dialog.fc <- function() {
tt <- tktoplevel()
tkwm.title(tt,"Fuzzy-ClusterAnalysis")
		cdata.entry <- tkentry(tt,textvariable="cdata")
		k.entry <- tkentry(tt,textvariable="k")
		reset <- function ()  {
			tclvar$cdata <- ""
			tclvar$k	 <- ""
		}
 reset.but <- tkbutton(tt,text="Reset", command=reset)
 submit.but <- tkbutton(tt,text="submit",command=function()tclvar$done<-1)
 
 build  <- function()
 	{
	 x <- parse(text=tclvar$cdata) [[1]]
	 y <- parse(text=tclvar$k)	[[1]]
  result <- substitute(fanny(x,y))
}

tkgrid(tklabel(tt,text="Fuzzy-Cluster"),columnspan=4)
tkgrid(tklabel(tt,text="data"),cdata.entry)
tkgrid(tklabel(tt,text="numberOfCluster"),k.entry)
tkgrid(submit.but, reset.but)

 tkbind(tt, "<Destroy>", function()tclvar$done<-2)
 tkwait.variable("done")
if(tclvar$done=="2") stop("aborted")
tkdestroy(tt)
cmd <- build()
cat("### Command executed via Tk ###\n")
cat(deparse(build()),sep="\n")
cat("### -----\n")
eval (cmd)
}
tclvar$cdata <- read.spss("c:/Rdata/ordCluVars.sav")
tclvar$k <- "5"
dialog.fc()
}
)









_______________________________________________________________________




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Sat Oct  6 19:30:38 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Oct 2001 19:30:38 +0200
Subject: [R] about the char _
In-Reply-To: <Pine.GSO.4.31.0110060946200.9255-100000@auk.stats>
References: <Pine.GSO.4.31.0110060946200.9255-100000@auk.stats>
Message-ID: <x2itdsoev5.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley at stats.ox.ac.uk> writes:

> For clarity, can we note that there are two issues here?
> 
> 1) Should "_" be allowed for assignment?   Currently "<-" and "->" and "_"
> and (in R-devel only, in some circumstances) "=" are allowed.
> 
> 2) Should "_" be allowed in names.  This falls into two parts.
> a) should it be allowed in bare names (unquoted)
> b) should it be allowed in non-standard (quoted) names.
> 
> Now 2a implies not-1, but there are a lot of other possibilities.
> 
> Even if we change 1 to "no" (which I have advocated), I think allowing 2a
> would be very confusing to experienced users.  And several correspondents
> are asking for 2a, not to change 1.

And also note that we have compatibility issues both to and from
S-PLUS. One thing would be to dissuade people from using "_" for
assignment, which is arguably a relic (the character displayed as a
backarrow on JMC's terminal - the adm3a, as far as I remember), and
breaking older code is something we must do occasionally, but the
weirdness that could occur from porting R code with "_" inside
variable names to S-PLUS makes me shudder....

A 3rd issue, BTW, is that we might want to allow quoted names in some
contexts where we do not now - notably in model formulas.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From stranda at cofc.edu  Sat Oct  6 19:45:28 2001
From: stranda at cofc.edu (Allan Strand)
Date: 06 Oct 2001 13:45:28 -0400
Subject: [R] calculating DNA mismatch distributions for large populations
In-Reply-To: Peter Dalgaard BSA's message of "Tue, 28 Aug 2001 16:10:14 +0200"
Message-ID: <86hetcachz.fsf_-_@linum.cofc.edu>

Hi all,

I am interested in calculating and displaying the distributions of
pairwise comparisons between DNA sequences in populations.  The
comparisons are the number of nucleotide sites that differ between the
two sequences (mismatches).  My sequences are stored in a vector of
strings.  There is an additional vector of the same length that
provides the indices to the DNA sequences.  Finally, I have output
from table() that gives the distribution of indices in the population.
It looks something like this:

seqindex    1,2,3,4,5
sequences  "ATG","ATC","AAT","CTT","GTC"

table() output of
seqindex frequencies:
  1   2   3    4    5
  6   10  5    1    7

The sequences are usually around 100 characters long (rather than 3)
and there can be several hundred different unique sequences and the
freqencies of sequence indices may total many thousands (often
30,000).


Right now, I am trying  the following approach:
1) I create a 'distance matrix' of mismatches.  I have been calculating
   the mismatches using the following approach (states() creates a
   list of two vectors: sl$aindex==indices and sl$state==sequences)

            sl<-states(lnum,Rland);
            rmat<-matrix(0,nrow=length(sl[[1]]),ncol=length(sl[[1]]));
            for (i in 1:length(sl[[1]]))
              for (j in i:length(sl[[1]]))
                {
                  if (i!=j)
                    {
                      vi<-strsplit(sl$state[[i]],NULL)[[1]]
                      vj<-strsplit(sl$state[[j]],NULL)[[1]]
                      rmat[j,i]<-length(vi)-sum(vi==vj);
                      rmat[j,i]->rmat[i,j];
                    }
                }
            rmat
    
   this works pretty well, although it is not blindingly fast.

2) I have then tried this approach to get the distribution of
   mismatches for the entire population: 

   I have tried to concatenate X copies of rows of rmat
   corresponding to a particular sequence index.  I'm using
   "rep(rmat[seqindex,],X)". Here, X is the the frequency of that
   sequence index (and sequence) in the population.  I try then to
   repeat this for every sequence index present in the pop.  My
   plan was to then run table() on the resulting vector.  As I
   suspected, trying this with real data brought my 450Mhz/128Meg
   RAM box to its knees and I never had the patience to wait for the
   finished product.  This effect is due to large amounts of memory
   usage.



My question is: What is a more efficient (in terms of memory and/or
speed) way to solve this problem.  Clearly, this partially brain-dead
biologist has not found it.  I think this question really comes down
to what is the efficient way to solve part 2.  One possibility that
occurred to me is to use table() on each row of rmat, then multiply
the resulting table by the number of times that the sequence is found
in the population.  I'm not clear on how to combine the resulting
tables for all sequences however.  Nor am I clear on whether this is
an improvement on my first approach.  Certainly, it would seem that
this could improve memory usage.

Thanks for any suggestions,
a.

BTW:
platform i386-unknown-freebsd4.4
arch     i386                   
os       freebsd4.4             
system   i386, freebsd4.4       
status                          
major    1                      
minor    3.1                    
year     2001                   
month    08                     
day      31                     
language R

-- 
Allan Strand,   Biology    http://linum.cofc.edu
College of Charleston      Ph. (843) 953-8085
Charleston, SC 29424       Fax (843) 953-5453

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Sat Oct  6 19:47:23 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Oct 2001 19:47:23 +0200
Subject: [R] tcltk
In-Reply-To: <200110061721.f96HLeu15840@mailgate5.cinetic.de>
References: <200110061721.f96HLeu15840@mailgate5.cinetic.de>
Message-ID: <x28zeooe38.fsf@blueberry.kubism.ku.dk>

"C. Schulz" <ozric at web.de> writes:

> HI,
> (1) ...thanks for the last comments to tcltk & Win2000.
> (2) - i'm newbie in tcl/tk but would like learn fast and develop
> (learning by doing) a tcl/tk clusterAnalysis application which combine
> some clusterMethods from different Rpackages.
> 
> i use the tkttest.R example as "reference" and become not finished for
> my "first" step????
> (3) how is it possible that the code from the tkttest.R example would
> be execute and not only print to the screen; 

Um, what are you trying to say here? In tkttest, the code is first
generated (using substitute), then deparsed and printed, then passed
to eval, and the result of dialog.t.test is the value of eval(cmd),
i.e. the call to t.test (which is generally printed at the end).

> (4) Have somebody further "small" Rtcltk statistical sourceCode example's as
> a further startingPoint for me ?

Something might show up in Rnews.

...
> tclvar$cdata <- read.spss("c:/Rdata/ordCluVars.sav")

This looks unhealthy. Tcl variables are generally simple strings, but
what you have on the RHS of that is a complicated structure.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From edd at debian.org  Sat Oct  6 22:27:40 2001
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 6 Oct 2001 15:27:40 -0500
Subject: [R] tcltk
In-Reply-To: <x28zeooe38.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@biostat.ku.dk on Sat, Oct 06, 2001 at 07:47:23PM +0200
References: <200110061721.f96HLeu15840@mailgate5.cinetic.de> <x28zeooe38.fsf@blueberry.kubism.ku.dk>
Message-ID: <20011006152740.A26145@debian.org>


> > (4) Have somebody further "small" Rtcltk statistical sourceCode example's as
> > a further startingPoint for me ?
> 
> Something might show up in Rnews.

I "collected" and rebuilt a few "widget" examples as well. I was wondering
if we should split off a r-sig-tcltk.  Would others see value in this? 

Dirk

-- 
Three out of two people have difficulties with fractions.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sun Oct  7 10:47:12 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 7 Oct 2001 09:47:12 +0100 (BST)
Subject: [R] Graceful exit from fortran. (fwd)
In-Reply-To: <200110020634.f926YKs14425@pc112145.oulu.fi>
Message-ID: <Pine.LNX.4.31.0110070941140.23404-100000@gannet.stats>

On Tue, 2 Oct 2001, Jari Oksanen wrote:

>
> rolf at math.unb.ca said:
> > If I say something like
> >       if(x .gt. 42.d0) stop
> > then indeed everything stops, i.e. R falls over.  I'd ***like*** to be
> > able to print out an informative error message (which I guess could be
> > done -
>
>
> In Fortran:
>
>     subroutine foo(..., ier)
>     integer ier
>     ier=0
>     ...
>     if (x .gt. 42.d0) then
>        ier=1
>        return
>     endif
>     ...
>     return
>     end
>
> In R:
>
> foo <- .Fortran("foo", ..., ier=integer(1))
> if(foo$ier) stop("error: x > 42")

(Rolf wanted it from a deeply nested subroutine.  This is now solved in
R-devel: see its NEWS file.)

> By the way, is the following allowed in Windows with mignw32 g77:
>
> subroutine topen(filename)
> character*255 filename
> open(unit=1, file=filename, status='old')
> return
> end
>
> subroutine tread(line)
> character*255 line
> read(1, *) line
> return
> end
>
> This seems to work magically when linked to R in Linux (RH7.1, gcc
> "2.96" g77), but one friend of mine told it crashes R when linked to
> Windows R. I don't have Windows R with building tools anywhere I know,
> so I am not sure if this is the cause of the failure.

The cause of the failure is that you declared a fixed-length 255 character
string and did not pass one!  You were lucky it worked anywhere. It is
more correct Fortran (and more portable) to declare character*(*) in your
examples.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From syed at adudionline.com.sa  Sun Oct  7 18:36:19 2001
From: syed at adudionline.com.sa (syed gillani)
Date: Sun, 7 Oct 2001 16:36:19 -0000
Subject: [R] Installing Packages
Message-ID: <001a01c14f4e$451482a0$0406eed5@gillani>

Hello All,

I have all the packages as .zip files in a folder, say zipfolder.
Does "pkunzip -d c:\zipfolder\*.zip", while I am in the library folder of R home, install the packages just like installing each package individually from the RGui Packages menu?

Thanks

syed at saudionline.com.sa

-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20011007/2e9ef17c/attachment.html

From ripley at stats.ox.ac.uk  Sun Oct  7 16:25:48 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 7 Oct 2001 15:25:48 +0100 (BST)
Subject: [R] Installing Packages
In-Reply-To: <001a01c14f4e$451482a0$0406eed5@gillani>
Message-ID: <Pine.LNX.4.31.0110071509260.23656-100000@gannet.stats>

On Sun, 7 Oct 2001, syed gillani wrote:

> Hello All,
>
> I have all the packages as .zip files in a folder, say zipfolder.
> Does "pkunzip -d c:\zipfolder\*.zip", while I am in the library folder of R home, install the packages just like installing each package individually from the RGui Packages menu?

No (see 3) below).  There are lots of things called pk(un)zip. I have
little idea which you mean, as pkunzip is not widely available these days
and the last version I saw was a DOS program from 1993.  Later versions
have different names, e.g. PKZIP 4.5 for Windows (or Unix or OpenVMS).
There are much more widely used commercial offerings (ZipMagic, WinZip,
ZipIt, ...).

No unzip program I have access to does multiple unzips like that. I also
suspect that pkunzip may not unzip the packages from CRAN: some versions
definitely do not.  However, using pkunzip seems the hard way out as

1) You can select all the packages at once in RGui's list.

2) You can also use install.packages directly, as in

install.packages(dir("c:\\zipfolder\\*.zip"))

3) After installing packages you need to run some updates: see the rw-FAQ.
1) and 2) do that automatically.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Kurt.Hornik at ci.tuwien.ac.at  Sun Oct  7 17:00:48 2001
From: Kurt.Hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 7 Oct 2001 17:00:48 +0200
Subject: [R] src/modules/Makefile.in: What is the (practical) difference
 betw.  SUBDIRS and MODULES?
In-Reply-To: <Pine.GSO.4.31.0110061228550.17118-100000@auk.stats>
References: <3BBEEB28.D1763920@zappa.sax.de>
	<Pine.GSO.4.31.0110061228550.17118-100000@auk.stats>
Message-ID: <15296.28192.110207.516151@mithrandir.hornik.net>

>>>>> Prof Brian D Ripley writes:

> On Sat, 6 Oct 2001, Thomas Hoffmann wrote:
>> As the subject says, one has
>> 
>> SUBDIRS = X11 gnome internet lapack vfonts
>> 
>> MODULES = $(R_GUIS) internet lapack vfonts
>> 
>> It is my understanding, that there is a 1:1 correspondence between
>> subdirs and modules. If this were true, then one could use one of
>> both in all places. Or do I overlook something here?

> Not all R_GUIS might be supported: gnome often is not. So there is
> on my Solaris system a gnome subdir but no gnome module.
> Your assumption of a 1:1 correspondence is incorrect for my system, which
> has

> R_GUIS = X11

> in $(top_builddir)/Makeconf.


> MODULES is used for shared libraries to be made (to be dynamically
> loaded).  SUBDIRS is used for things to be cleaned and to be
> distributed.

> One could argue that MODULES should be used for things to be cleaned,
> *BUT* that might have be changed by a re-configure, so SUBDIRS looks
> safer.

> [I'm not the author of any of this, and the choices made look right to
> me.]

Thanks :-)

In general we always use SUBDIRS for cleaning up.  We must do that
because e.g. configure could have created a Makefile in a subdir which
make distclean must remove.

[One could argue that targets that build should always use SUBDIRS too
but that can make things rather tricky.]

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From chrysopa at terra.com.br  Mon Oct  8 00:46:08 2001
From: chrysopa at terra.com.br (Ronaldo Reis Jr.)
Date: Sun, 7 Oct 2001 19:46:08 -0300
Subject: [R] plot logist
Message-ID: <200110072252.f97Mq2r16022@srv11-sao.sao.terra.com.br>

Hi,
I make a glm analysis with binomial errors and its OK.
Now I need plot the ajusted logist line in my points. How do I make it?

|              * * * * -> I need plot an ajusted     
|            * *           line in this points.
|          * *
|         *
|        * *
|      * *
|* * * *
|_________________________



Exist an abline like function for ajust others formulas? 
Exist in R anything like Tablecurve 2d?

Thanks
Ronaldo
-- 
Majority, n.:
	That quality that distinguishes a crime from a law.
--
|   //|\\   [*****************************][*******************]
|| ( ? ? )  [Ronaldo Reis J?nior          ][PentiumIII-600     ]
|     V     [ESALQ/USP-Entomologia, CP-09 ][HD: 30 + 10 Gb     ]
||  / l \   [13418-900 Piracicaba - SP    ][RAM: 128 Mb        ]
|  /(lin)\  [Fone: 19-429-4199 r.229      ][Video: SiS620-8Mb  ]
||/(linux)\ [chrysopa at insecta.ufv.br      ][Modem: Pctel-onboar]
|/ (linux) \[ICQ#: 5692561                ][SO: CL 7.0 (2.2.19)]
||  ( x )   [*****************************][*******************]
||| _/ \_Powered by Conectiva Linux 7.0 D+:) | Lxuser#: 205366
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Oct  8 08:39:37 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 8 Oct 2001 07:39:37 +0100 (BST)
Subject: [R] plot logist
In-Reply-To: <200110072252.f97Mq2r16022@srv11-sao.sao.terra.com.br>
Message-ID: <Pine.GSO.4.31.0110080736480.8814-100000@auk.stats>

On Sun, 7 Oct 2001, Ronaldo Reis Jr. wrote:

> Hi,
> I make a glm analysis with binomial errors and its OK.
> Now I need plot the ajusted logist line in my points. How do I make it?
>
> |              * * * * -> I need plot an ajusted
> |            * *           line in this points.
> |          * *
> |         *
> |        * *
> |      * *
> |* * * *
> |_________________________
>
>
>
> Exist an abline like function for ajust others formulas?
> Exist in R anything like Tablecurve 2d?

Use predict + lines to plot the curve.  There's an example in the
MASS script ch07.R, which should be on your R machine in
.../library/MASS/scripts/ch07.R. Run it and look at the output to see how
to adapt it.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From phgrosje at ulb.ac.be  Mon Oct  8 08:43:46 2001
From: phgrosje at ulb.ac.be (Philippe Grosjean)
Date: Mon, 8 Oct 2001 08:43:46 +0200
Subject: [R] plot logist
In-Reply-To: <200110072252.f97Mq2r16022@srv11-sao.sao.terra.com.br>
Message-ID: <MABBLJDICACNFOLGIHJOIEDMCGAA.phgrosje@ulb.ac.be>

>Hi,
>I make a glm analysis with binomial errors and its OK.
>Now I need plot the ajusted logist line in my points. How do I make it?

>|              * * * * -> I need plot an ajusted
>|            * *           line in this points.
>|          * *
>|         *
>|        * *
>|      * *
>|* * * *
>|_________________________

Nice ASCII art ;-)

>Exist an abline like function for ajust others formulas?
>Exist in R anything like Tablecurve 2d?

>Thanks
>Ronaldo

look at the curve function:

?curve

Best,

Philippe Grosjean


...........]<(({?<...............<?}))><...............................
 ) ) ) ) )	 __               	 __
( ( ( ( ( 	|__)              	|  _
 ) ) ) ) )	|   hilippe       	|__)rosjean
( ( ( ( ( 	Marine Biol. Lab., ULB, Belgium
 ) ) ) ) )	                  	 __
( ( ( ( ( 	|\  /|            	|__)
 ) ) ) ) )	| \/ |ariculture &	|__)iostatistics
( ( ( ( (
 ) ) ) ) )	e-mail: phgrosje at ulb.ac.be or phgrosjean at sciviews.org
( ( ( ( ( 	SciViews project coordinator (http://www.sciviews.org)
 ) ) ) ) )      tel: 00-32-2-650.29.70 (lab), 00-32-2-673.31.33 (home)
( ( ( ( (
 ) ) ) ) )      "I'm 100% confident that p is between 0 and 1"
( ( ( ( (                                  L. Gonick & W. Smith (1993)
 ) ) ) ) )
.......................................................................


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From phgrosje at ulb.ac.be  Mon Oct  8 14:22:14 2001
From: phgrosje at ulb.ac.be (Philippe Grosjean)
Date: Mon, 8 Oct 2001 14:22:14 +0200
Subject: [R] List of functions with debug() and trace()
Message-ID: <MABBLJDICACNFOLGIHJOGEEACGAA.phgrosje@ulb.ac.be>

Hello all,

Is it a function to list all functions set with debug() or trace()?
Best,

Philippe Grosjean



..........]<(({?<...............<?}))><...............................
 ) ) ) ) )	 __               	 __
( ( ( ( ( 	|__)              	|  _
 ) ) ) ) )	|   hilippe       	|__)rosjean
( ( ( ( ( 	Marine Biol. Lab., ULB, Belgium
 ) ) ) ) )	                  	 __
( ( ( ( ( 	|\  /|            	|__)
 ) ) ) ) )	| \/ |ariculture &	|__)iostatistics
( ( ( ( (
 ) ) ) ) )	e-mail: phgrosje at ulb.ac.be or phgrosjean at sciviews.org
( ( ( ( ( 	SciViews project coordinator (http://www.sciviews.org)
 ) ) ) ) )      tel: 00-32-2-650.29.70 (lab), 00-32-2-673.31.33 (home)
( ( ( ( (
 ) ) ) ) )      "I'm 100% confident that p is between 0 and 1"
( ( ( ( (                                  L. Gonick & W. Smith (1993)
 ) ) ) ) )
.......................................................................


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wsi at gcal.ac.uk  Mon Oct  8 12:58:23 2001
From: wsi at gcal.ac.uk (Bill Simpson)
Date: Mon, 8 Oct 2001 11:58:23 +0100 (BST)
Subject: [R] testing diff for slopes and intercepts
Message-ID: <Pine.LNX.4.10.10110081157040.966-100000@localhost.localdomain>

I fit the model

fit<-lm(thresh~cond*Ne)
where
thresh is the reponse
cond is a factor with levels a, b, and c
Ne is a continuous indep var

I think of this full model as having three lines: thresh as a function of
Ne for each condition. Thus we have slopea, slopeb, slopec, inta, intb,
intc.
lm output       my params
-------------------------
(Intercept)   inta  
condb         intb - inta
condc         intc - inta
Ne            slopea
condb:Ne      slopeb - slopea
condc:Ne      slopec - slopea

This parametrization automatically compares
inta vs intb
inta vs intc
But how to get test for diff of intb vs intc?

Same question for slope: I already have
slopea vs slopeb
slopea vs slopec
But how to get test for diff of slopeb vs slopec?

Thanks for any help.

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Mon Oct  8 14:48:54 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Oct 2001 14:48:54 +0200
Subject: [R] testing diff for slopes and intercepts
In-Reply-To: <Pine.LNX.4.10.10110081157040.966-100000@localhost.localdomain>
References: <Pine.LNX.4.10.10110081157040.966-100000@localhost.localdomain>
Message-ID: <x2669qe1qh.fsf@blueberry.kubism.ku.dk>

Bill Simpson <wsi at gcal.ac.uk> writes:

> This parametrization automatically compares
> inta vs intb
> inta vs intc
> But how to get test for diff of intb vs intc?
> 
> Same question for slope: I already have
> slopea vs slopeb
> slopea vs slopec
> But how to get test for diff of slopeb vs slopec?

This is the sort of thing relevel() is for.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From J.B.Bremnes at dnmi.no  Mon Oct  8 16:25:54 2001
From: J.B.Bremnes at dnmi.no (John Bjornar Bremnes)
Date: Mon, 08 Oct 2001 14:25:54 +0000
Subject: [R] .Fortran()
Message-ID: <3BC1B772.45901C87@dnmi.no>

I am trying to call some Fortran subroutines using .Fortran(). These
subroutines have arguments of type 'character', 'real', 'integer', and
'integer*2'. Is it impossible to call  subroutines expecting both
'character' and 'real' as input? 

Any help is appreciated.

John Bjornar Bremnes
Norwegian Meteorological Institute
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From a215020 at agate.fmr.com  Mon Oct  8 16:39:33 2001
From: a215020 at agate.fmr.com (David Brahm)
Date: Mon, 8 Oct 2001 10:39:33 -0400 (EDT)
Subject: [R] non-interactive R usage...
Message-ID: <200110081439.f98EdX608458@arbres1a.FMR.Com>

Chris Milkosky <c.milkosky at xpedite.com> wrote:
> Does R give you the capability to run a script (read as non-interactive) that
> would perform a statistical task, and then send output to a file?
> ...can we pass command line parameters to our R scripts somehow?

One way to pass arguments and flags is through a Perl wrapper.  This also
allows you to set up environment variables appropriately in a Unix cron job.
Here's my template.  I'm not sure about graphics, though.

###### Begin Code: ######
#!/usr/local/bin/perl -s
(($arg1, $arg2) = @ARGV) || die "Must supply 2 arguments";
$f += 0;			                       # -f flag, force numeric
$ENV{"R_LIBS"} = "$ENV{SetThisAppropriately}/Rlib";
$| = 1;				                     # Don't buffer Perl output
$script = "/tmp/rwrap$$.R";
$outfile = "/tmp/rwrap$$.out";
open(SCRIPT, ">$script");
print SCRIPT <<EOF;
  arg1  <- "$arg1"
  arg2  <- "$arg2"
  fflag <- $f
EOF
print SCRIPT <<'EOF';
Z<-require(misc, q=T)                                                # Quietly!
# YOUR CODE HERE
q()
EOF
close(SCRIPT);
system("R --vanilla --slave < $script > $outfile");
$? && die "Aborted in R with errcode $?";   # Check for successful R completion
unlink $script;                   # The script remains for debugging if failure
####### End Code #######

					-- David Brahm (brahm at alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wsi at gcal.ac.uk  Mon Oct  8 17:03:51 2001
From: wsi at gcal.ac.uk (Bill Simpson)
Date: Mon, 8 Oct 2001 16:03:51 +0100 (BST)
Subject: [R] testing diff for slopes and intercepts
In-Reply-To: <x2669qe1qh.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10110081603140.1144-100000@localhost.localdomain>

> 
> This is the sort of thing relevel() is for.
Yes, that does the trick--thanks very much.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Oct  8 17:07:16 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 8 Oct 2001 16:07:16 +0100 (BST)
Subject: [R] .Fortran()
In-Reply-To: <3BC1B772.45901C87@dnmi.no>
Message-ID: <Pine.LNX.4.31.0110081605420.2787-100000@gannet.stats>

On Mon, 8 Oct 2001, John Bjornar Bremnes wrote:

> I am trying to call some Fortran subroutines using .Fortran(). These
> subroutines have arguments of type 'character', 'real', 'integer', and
> 'integer*2'. Is it impossible to call  subroutines expecting both
> 'character' and 'real' as input?

No, but it is impossible to call those expecting 'integer*2'

See ?.Foreign for what is supported, and note the comments there about
character types: they work on some compilers and not on others.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From a215020 at agate.fmr.com  Mon Oct  8 17:44:10 2001
From: a215020 at agate.fmr.com (David Brahm)
Date: Mon, 8 Oct 2001 11:44:10 -0400 (EDT)
Subject: [R] Trouble with 3-dots
Message-ID: <200110081544.f98FiAw08909@arbres1a.FMR.Com>

Hi, all,

Last week I described a possible bug with "...":
R> myfun <- function(x, ...) {x[...] <- 0;  x}
R> x <- matrix(1:12, 3,4)
R> myfun(x)
   Error in myfun(x) : SubAssignArgs: invalid number of arguments

I had a solution:
R> myfun <- function(x, ...) {if (missing(...)) x[]<-0 else x[...]<-0; x}

Here is another, probably related, problem:
R> myfun2 <- function(x, ...) myfun(x, ...)
R> myfun2(x, ,1:2)
   Error in myfun(x, ...) : Argument is missing, with no default

Any ideas how to fix this up?  I could, of course, explicitly pass all args:
R> myfun2(x, 1:dim(x)[1], 1:2)
        [,1] [,2] [,3] [,4]
   [1,]    0    0    7   10
   [2,]    0    0    8   11
   [3,]    0    0    9   12

Thanks!
					-- David Brahm (brahm at alum.mit.edu)

"I write this letter not to nag nor to whine, but to prod." - Lisa Simpson
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From LindnerW at t-online.de  Mon Oct  8 18:15:38 2001
From: LindnerW at t-online.de (Wolfgang Lindner)
Date: Mon, 8 Oct 2001 18:15:38 +0200
Subject: [R] Package Install Problem under Win98
Message-ID: <15qd46-05akfgC@fwd05.sul.t-online.com>

Hi, 

I have tried to install 'tensor' as a new package in these phases:

1.
via 'Install package from local Zip-File' in Rgui/Windows98:

install.packages("D:/R/_Pakets12MB/tensor.zip", .lib.loc[1], CRAN = NULL)

2.
Looking at the library folder, there was now a new entry 'tensor'
including some files e.g.

\library\tensor\R\tensor.R

3.
Then I have done   Rgui:(P)ackages(L)oad Package: 
Result - No entry of 'tensor' in the package-List ??

Here is the next communication with Rgui:

library(tensor)
Warning message: 
Package  `tensor' contains no R code in: library(tensor) 
search()
[1] ".GlobalEnv"     "package:tensor" "package:ctest"  "Autoloads"     
[5] "package:base"  

Please, can you tell me what has gone wrong?

Wolfgang

--
OStR Wolfgang Lindner                     Tel  : +49 (0203) 379-1326
Gerhard-Mercator-Universit?t Duisburg     Fax  : +49 (0203) 379-2528
Fakult?t 4 - Naturwissenschaften          eMail: Lindner at math.uni-duisburg.de
Institut fuer Mathematik, LE 424
Lotharstr. 65
D 47048  Duisburg (Germany)

NaT-Working: http://www.uni-duisburg.de/FB11/PROJECTS/NATW/index.html
Home:        http://www.uni-duisburg.de/FB11/STAFF/Lindner.html

privat: Stieglitzweg 6, D 42799 Leichlingen
eMail : LindnerW at t-online.de
Phone :   +49 (02175)  71163
Mobil :   +49 (0)174 9134006

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ligges at statistik.uni-dortmund.de  Mon Oct  8 19:28:43 2001
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 08 Oct 2001 19:28:43 +0200
Subject: [R] Package Install Problem under Win98
References: <15qd46-05akfgC@fwd05.sul.t-online.com>
Message-ID: <3BC1E24B.B1782CC1@statistik.uni-dortmund.de>

Wolfgang Lindner wrote:
> 
> Hi,
> 
> I have tried to install 'tensor' as a new package in these phases:
> 
> 1.
> via 'Install package from local Zip-File' in Rgui/Windows98:
> 
> install.packages("D:/R/_Pakets12MB/tensor.zip", .lib.loc[1], CRAN = NULL)
> 
> 2.
> Looking at the library folder, there was now a new entry 'tensor'
> including some files e.g.
> 
> \library\tensor\R\tensor.R

Hmmm. Looks like you installed the source code of the package, not the
binaries.
The file in ...\tensor\R should be called "tensor" (without the ".R").

 
> 3.
> Then I have done   Rgui:(P)ackages(L)oad Package:
> Result - No entry of 'tensor' in the package-List ??
> 
> Here is the next communication with Rgui:
> 
> library(tensor)
> Warning message:
> Package  `tensor' contains no R code in: library(tensor)
> search()
> [1] ".GlobalEnv"     "package:tensor" "package:ctest"  "Autoloads"
> [5] "package:base"
> 
> Please, can you tell me what has gone wrong?

Are you sure the file you got was called tensor.zip? If so, it was not
correctly created, I suppose. The recent versoin on CRAN is 1.1-2.
You didn't told us yours.

I think the recent version on CRAN is not corrupted and works for me.
Try reinstall the windows binaries of the package:
  install.packages("tensor")

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jfox at mcmaster.ca  Mon Oct  8 19:35:23 2001
From: jfox at mcmaster.ca (John Fox)
Date: Mon, 08 Oct 2001 13:35:23 -0400
Subject: [R] testing diff for slopes and intercepts
In-Reply-To: <Pine.LNX.4.10.10110081157040.966-100000@localhost.localdom
 ain>
Message-ID: <5.1.0.14.2.20011008132559.01bf89e8@mcmail.cis.mcmaster.ca>

Dear Bill,

At 11:58 AM 08/10/2001 +0100, Bill Simpson wrote:
>I fit the model
>
>fit<-lm(thresh~cond*Ne)
>where
>thresh is the reponse
>cond is a factor with levels a, b, and c
>Ne is a continuous indep var
>
>I think of this full model as having three lines: thresh as a function of
>Ne for each condition. Thus we have slopea, slopeb, slopec, inta, intb,
>intc.
>lm output       my params
>-------------------------
>(Intercept)   inta
>condb         intb - inta
>condc         intc - inta
>Ne            slopea
>condb:Ne      slopeb - slopea
>condc:Ne      slopec - slopea
>
>This parametrization automatically compares
>inta vs intb
>inta vs intc
>But how to get test for diff of intb vs intc?
>
>Same question for slope: I already have
>slopea vs slopeb
>slopea vs slopec
>But how to get test for diff of slopeb vs slopec?
>
>Thanks for any help.

Using the covariance matrix for the coefficients and the 
coefficient-estimates, you can test the linear hypotheses that condb - 
condc = 0, and condb:Ne - condc:Ne = 0. The linear.hypothesis function in 
the car package does this, but it's also not hard to work directly with the 
estimates and their covariance matrix. An alternative (producing the same 
test) is to refit the model, reparametrizing to set a different baseline 
category for the factor.

Finally, by doing these additional tests, you're using up more df than you 
have for comparisons among slopes and among intercepts. You might consider 
adjusting the tests for simultaneous inference.

John


-----------------------------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario, Canada L8S 4M4
email: jfox at mcmaster.ca
phone: 905-525-9140x23604
web: www.socsci.mcmaster.ca/jfox
-----------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andy_liaw at merck.com  Mon Oct  8 19:58:28 2001
From: andy_liaw at merck.com (Liaw, Andy)
Date: Mon, 08 Oct 2001 13:58:28 -0400
Subject: [R] Reading in data in a triangle
Message-ID: <51F9C42DA15CD311BD220008C707D81903DC82E7@usrymx10.merck.com>

> Dear Stuart,
> 
> At 03:16 PM 05/10/2001 -0500, s-luppescu at uchicago.edu wrote:
> >I have plain-text data in lower triangular form that I want 
> to read in. Does
> >anyone know of an easy way to do this?
> 
> It's not altogether clear to me what you want to do, but I'll 
> take a stab 
> at it.
> 
> Simply to read the data into a vector is no trick: scan will do that. 
> Assuming that you want to read the data into a 
> lower-triangular matrix, you 
> might try something like the following, starting with the 
> file LT.txt, 
> which contains:
> 
>      1
>      2 3
>      4 5 6
>      7 8 9 10
> 
> Then, constructing an upper-triangular matrix and transposing it,
> 
>      > U <- matrix(0, 4, 4)
>      > U[outer(1:4, 1:4, '<=')] <- scan('c:/temp/LT.txt')
>      Read 10 items
>      > t(U)
>          [,1] [,2] [,3] [,4]
>      [1,]    1    0    0    0
>      [2,]    2    3    0    0
>      [3,]    4    5    6    0
>      [4,]    7    8    9   10
> 
> Is that what you need?
> 
>   John
> 

John's solution requires the dimension of the matrix be known beforehand.
Here's a slightly more general way, using connections.  Maybe others can
improve on it?

lucon <- file("LU.txt", open="rt")
x <- readLines(lucon)
close(lucon)
n <- length(x)
U <- matrix(0, n, n)
U[upper.tri(U, diag=TRUE)] <- as.numeric(unlist(strsplit(x, " ")))
U <- t(U)


Andy

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jfox at mcmaster.ca  Mon Oct  8 20:58:51 2001
From: jfox at mcmaster.ca (John Fox)
Date: Mon, 08 Oct 2001 14:58:51 -0400
Subject: [R] Reading in data in a triangle
In-Reply-To: <51F9C42DA15CD311BD220008C707D81903DC82E7@usrymx10.merck.co
 m>
Message-ID: <5.1.0.14.2.20011008144137.01be98b0@mcmail.cis.mcmaster.ca>

Dear Andy and Stuart,

Once you've read the elements in the lower triangle, it's easy to compute 
the order of the matrix. If the order is n, then the number of elements in 
the lower triangle is k = n * (n + 1)/2, from which n = (sqrt(1 + 8 * k) - 
1)/2.

Thus,

 > elements <- scan('c:/temp/LT.txt')
Read 10 items
 > n <- (sqrt(1 + 8 * length(elements)) - 1)/2
 > U <- matrix(0, n, n)
 > U[outer(1:n, 1:n, '<=')] <- elements
 > t(U)
      [,1] [,2] [,3] [,4]
[1,]    1    0    0    0
[2,]    2    3    0    0
[3,]    4    5    6    0
[4,]    7    8    9   10
 >

John

At 01:58 PM 08/10/2001 -0400, Liaw, Andy wrote:
> > Dear Stuart,
> >
> > At 03:16 PM 05/10/2001 -0500, s-luppescu at uchicago.edu wrote:
> > >I have plain-text data in lower triangular form that I want
> > to read in. Does
> > >anyone know of an easy way to do this?
> >
> > It's not altogether clear to me what you want to do, but I'll
> > take a stab
> > at it.
> >
> > Simply to read the data into a vector is no trick: scan will do that.
> > Assuming that you want to read the data into a
> > lower-triangular matrix, you
> > might try something like the following, starting with the
> > file LT.txt,
> > which contains:
> >
> >      1
> >      2 3
> >      4 5 6
> >      7 8 9 10
> >
> > Then, constructing an upper-triangular matrix and transposing it,
> >
> >      > U <- matrix(0, 4, 4)
> >      > U[outer(1:4, 1:4, '<=')] <- scan('c:/temp/LT.txt')
> >      Read 10 items
> >      > t(U)
> >          [,1] [,2] [,3] [,4]
> >      [1,]    1    0    0    0
> >      [2,]    2    3    0    0
> >      [3,]    4    5    6    0
> >      [4,]    7    8    9   10
> >
> > Is that what you need?
> >
> >   John
> >
>
>John's solution requires the dimension of the matrix be known beforehand.
>Here's a slightly more general way, using connections.  Maybe others can
>improve on it?
>
>lucon <- file("LU.txt", open="rt")
>x <- readLines(lucon)
>close(lucon)
>n <- length(x)
>U <- matrix(0, n, n)
>U[upper.tri(U, diag=TRUE)] <- as.numeric(unlist(strsplit(x, " ")))
>U <- t(U)
>
>
>Andy

-----------------------------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario, Canada L8S 4M4
email: jfox at mcmaster.ca
phone: 905-525-9140x23604
web: www.socsci.mcmaster.ca/jfox
-----------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fenner at cs.pitt.edu  Tue Oct  9 00:58:24 2001
From: fenner at cs.pitt.edu (Mark E. Fenner)
Date: Mon, 8 Oct 2001 18:58:24 -0400 (EDT)
Subject: [R] Apologies
Message-ID: <Pine.LNX.4.21.0110081857391.29877-100000@oxygen.cs.pitt.edu>

I HATE to make things work with more SPAM, but I realized my mistake.

Again, my apologies for sending the subscribe to the wrong address.

Regards,
Mark

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fenner at cs.pitt.edu  Tue Oct  9 01:17:59 2001
From: fenner at cs.pitt.edu (Mark E. Fenner)
Date: Mon, 8 Oct 2001 19:17:59 -0400 (EDT)
Subject: [R] Yet another batch mode question
Message-ID: <Pine.LNX.4.21.0110081906070.30888-100000@oxygen.cs.pitt.edu>

Hello all and thanks in advance,

I know you can start R with either:

1.  R CMD BATCH myfile.R

or 

2. R < myfile.R

My question is this:  what if I want multiple input files and/or command
line arguments.  For example, under unix you can run a script command (in
a shell language, perl, or python) like:

python myScript.py

or better yet, if you have things set up right, you can place a
#!/usr/bin/python line at the beginning of the file and then just type (at
the shell command line):

./myScript.py

Now, if I wanted to specify a file to work with and a method to use, I
would just do:

./myScript.py file1 method1

How could I get this behavior in R?  With the commandArg() function I can
retrieve the arguments at the command line, but I'm puzzling over the best
way to implement this system at the command line so that it will be
consistent regardless of how someone chooses to run the script (be it
method 1 or 2 above).

I suppose I could create a script file in {python, perl, bash, etc} that
would simply take the arguments I want and provide them to R in a uniform
manner but a "standalone" R method would be preferable.

Regards,
Mark

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mgd at swarm.org  Tue Oct  9 02:13:05 2001
From: mgd at swarm.org (Marcus G. Daniels)
Date: 08 Oct 2001 18:13:05 -0600
Subject: [R] 64 bit / v9 build on Sparc Solaris 8
Message-ID: <m2k7y5y8ku.fsf@marcus.santafe.edu>

By my reading, R has a hard limit on INT_MAX bytes for vector
allocations.  On the sparcv9 architecture, INT_MAX is a 32 bit
quantity, even though pointers can be 64 bits.  Has any thought been
given to use of > 2GB of virtual memory on systems like this?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From luke at nokomis.stat.umn.edu  Tue Oct  9 03:00:26 2001
From: luke at nokomis.stat.umn.edu (Luke Tierney)
Date: Mon, 8 Oct 2001 20:00:26 -0500
Subject: [R] 64 bit / v9 build on Sparc Solaris 8
In-Reply-To: <m2k7y5y8ku.fsf@marcus.santafe.edu>; from mgd@swarm.org on Mon, Oct 08, 2001 at 06:13:05PM -0600
References: <m2k7y5y8ku.fsf@marcus.santafe.edu>
Message-ID: <20011008200026.C7699@nokomis.stat.umn.edu>

On Mon, Oct 08, 2001 at 06:13:05PM -0600, Marcus G. Daniels wrote:
> By my reading, R has a hard limit on INT_MAX bytes for vector
> allocations.  On the sparcv9 architecture, INT_MAX is a 32 bit
> quantity, even though pointers can be 64 bits.  Has any thought been
> given to use of > 2GB of virtual memory on systems like this?
> 

Thought, yes; action, no :-)

I think we're stuck for several reasons with int for the internal R
integer (FORTRAN compatibility is one reason I believe), so there will
always be a 2G limit on the element count for individual vectors.  But
it should be possible to allow for total memory use to match the word
size.  Unfortunately in writing the GC we used int in too many places
and a fairly careful review and rewrite is needed to replace the
appropriate int declarations (and no others) by size_t or ssize_t or
something analogous.  There may be a few other places that are
affected but the stuff in memory.c should be the bulk of it.  It's on
my to do list, but not terribly high at the moment.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke at stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From richmond at saintmarys.edu  Tue Oct  9 04:56:42 2001
From: richmond at saintmarys.edu (David A Richmond)
Date: Mon, 8 Oct 2001 21:56:42 -0500 (EST)
Subject: [R] find indices of nonzero elements
Message-ID: <Pine.GSO.4.20.0110082151050.883-100000@jade.saintmarys.edu>

Hi,
	Is there a function func(x) where x is an array such that it
returns a list of the indices of all non-zero elements of the array?

for example:
a:
1 0 0 
0 0 1
0 1 0

func(a) returns two vectors r and c:
r c
1 1
2 3
3 2


daver

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|David Richmond                It works on a          |      
+ Dept. of Sociology          complex scientific      + 
|Saint Mary's College          principle, known as    |  
+ Notre Dame, IN 46556               "pot luck."      +
|219-284-4517                    - The Doctor         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jasont at indigoindustrial.co.nz  Tue Oct  9 07:37:29 2001
From: jasont at indigoindustrial.co.nz (Jason Turner)
Date: Tue, 9 Oct 2001 18:37:29 +1300
Subject: [R] find indices of nonzero elements
In-Reply-To: <Pine.GSO.4.20.0110082151050.883-100000@jade.saintmarys.edu>; from richmond@saintmarys.edu on Mon, Oct 08, 2001 at 09:56:42PM -0500
References: <Pine.GSO.4.20.0110082151050.883-100000@jade.saintmarys.edu>
Message-ID: <20011009183729.B1137@camille.indigoindustrial.co.nz>

> 	Is there a function func(x) where x is an array such that it
> returns a list of the indices of all non-zero elements of the array?
> 
which()
eg.

> a<-matrix(c(1,0,0,0,0,1,0,1,0),ncol=3)
> a
     [,1] [,2] [,3]
[1,]    1    0    0
[2,]    0    0    1
[3,]    0    1    0
> which(a != 0, arr.ind=TRUE)
     row col
[1,]   1   1
[2,]   3   2
[3,]   2   3

That do?

Cheers

Jason
-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont at indigoindustrial.co.nz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Oct  9 08:32:25 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 9 Oct 2001 07:32:25 +0100 (BST)
Subject: [R] Yet another batch mode question
In-Reply-To: <Pine.LNX.4.21.0110081906070.30888-100000@oxygen.cs.pitt.edu>
Message-ID: <Pine.GSO.4.31.0110090718150.1468-100000@auk.stats>

On Mon, 8 Oct 2001, Mark E. Fenner wrote:

> Hello all and thanks in advance,
>
> I know you can start R with either:
>
> 1.  R CMD BATCH myfile.R
>
> or
>
> 2. R < myfile.R

Um, you can't: try it to see the fatal error.

> My question is this:  what if I want multiple input files and/or command
> line arguments.  For example, under unix you can run a script command (in
> a shell language, perl, or python) like:
>
> python myScript.py
>
> or better yet, if you have things set up right, you can place a
> #!/usr/bin/python line at the beginning of the file and then just type (at
> the shell command line):
>
> ./myScript.py
>
> Now, if I wanted to specify a file to work with and a method to use, I
> would just do:
>
> ./myScript.py file1 method1
>
> How could I get this behavior in R?  With the commandArg() function I can
> retrieve the arguments at the command line, but I'm puzzling over the best
> way to implement this system at the command line so that it will be
> consistent regardless of how someone chooses to run the script (be it
> method 1 or 2 above).

At present 1 does not pass along further arguments, but sends R method 2
(well, with enough flags to make it work).

If you give 2 further arguments, you will get a strident warning like

auk% R foo
ARGUMENT 'foo' __ignored__

R : Copyright 2001, The R Development Core Team
...

> I suppose I could create a script file in {python, perl, bash, etc} that
> would simply take the arguments I want and provide them to R in a uniform
> manner but a "standalone" R method would be preferable.

Your examples are entirely Unix, so I am not sure if you are interested in
anything else, but R needs to be.  Already on Windows R allows a file name
to be used as an extra argument: this is needed for file associations and
for drag-and-drop to work.  We have considered allowing that on Unix too.
so that

R /path/to/.Rdata

and

R /path/to/somescript.R

might work.  (Only the first is implemented on Windows at present.)

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From siim at obs.ee  Tue Oct  9 09:30:56 2001
From: siim at obs.ee (Ott Toomet)
Date: Tue, 9 Oct 2001 09:30:56 +0200 (CEST)
Subject: [R] find indices of nonzero elements
In-Reply-To: <Pine.GSO.4.20.0110082151050.883-100000@jade.saintmarys.edu>
Message-ID: <Pine.LNX.4.33.0110090929410.9943-100000@ecopc15.eco.au.dk>

Hi,

use:

which( a>0, arr.ind=TRUE)

best wishes,

Ott



On Mon, 8 Oct 2001, David A Richmond wrote:

> Hi,
> 	Is there a function func(x) where x is an array such that it
> returns a list of the indices of all non-zero elements of the array?
>
> for example:
> a:
> 1 0 0
> 0 0 1
> 0 1 0
>
> func(a) returns two vectors r and c:
> r c
> 1 1
> 2 3
> 3 2
>
>
> daver

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From alobo at ija.csic.es  Tue Oct  9 10:14:03 2001
From: alobo at ija.csic.es (Agustin Lobo)
Date: Tue, 9 Oct 2001 10:14:03 +0200 (MET DST)
Subject: [R] find indices of nonzero elements
In-Reply-To: <Pine.GSO.4.20.0110082151050.883-100000@jade.saintmarys.edu>
Message-ID: <Pine.OSF.3.96.1011009101337.20633A-100000@ija.csic.es>

> x <- cbind(c(1,0,0),c(0,0,1),c(0,1,0))
> x
     [,1] [,2] [,3]
[1,]    1    0    0
[2,]    0    0    1
[3,]    0    1    0

> cbind(row(x)[x!=0],col(x)[x!=0])
     [,1] [,2]
[1,]    1    1
[2,]    3    2
[3,]    2    3

Agus
Dr. Agustin Lobo
Instituto de Ciencias de la Tierra (CSIC)
Lluis Sole Sabaris s/n
08028 Barcelona SPAIN
tel 34 93409 5410
fax 34 93411 0012
alobo at ija.csic.es


On Mon, 8 Oct 2001, David A Richmond wrote:

> Hi,
> 	Is there a function func(x) where x is an array such that it
> returns a list of the indices of all non-zero elements of the array?
> 
> for example:
> a:
> 1 0 0 
> 0 0 1
> 0 1 0
> 
> func(a) returns two vectors r and c:
> r c
> 1 1
> 2 3
> 3 2
> 
> 
> daver
> 
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
> |David Richmond                It works on a          |      
> + Dept. of Sociology          complex scientific      + 
> |Saint Mary's College          principle, known as    |  
> + Notre Dame, IN 46556               "pot luck."      +
> |219-284-4517                    - The Doctor         |
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From phgrosje at ulb.ac.be  Tue Oct  9 10:35:25 2001
From: phgrosje at ulb.ac.be (Philippe Grosjean)
Date: Tue, 9 Oct 2001 10:35:25 +0200
Subject: [R] list of functions flagged with debug() or trace()
Message-ID: <MABBLJDICACNFOLGIHJOOEEHCGAA.phgrosje@ulb.ac.be>

Hello all,

Since I got no answer to my first mail, I suspect I did not formulate my
question adequately, so I try again.

In R, one can debug or trace a function 'foo' with debug(foo) or trace(foo),
respectively. This leads to a special treatment of the function 'foo' until
one enter undebug(foo) or untrace(foo). I would like to know if there is a
convenient way to know at any time which are the function flagged with
debug() or trace() in a R session.
Thank you,

Cheers,

Philippe Grosjean

...........]<(({?<...............<?}))><...............................
 ) ) ) ) )	 __               	 __
( ( ( ( ( 	|__)              	|  _
 ) ) ) ) )	|   hilippe       	|__)rosjean
( ( ( ( ( 	Marine Biol. Lab., ULB, Belgium
 ) ) ) ) )	                  	 __
( ( ( ( ( 	|\  /|            	|__)
 ) ) ) ) )	| \/ |ariculture &	|__)iostatistics
( ( ( ( (
 ) ) ) ) )	e-mail: phgrosje at ulb.ac.be or phgrosjean at sciviews.org
( ( ( ( ( 	SciViews project coordinator (http://www.sciviews.org)
 ) ) ) ) )      tel: 00-32-2-650.29.70 (lab), 00-32-2-673.31.33 (home)
( ( ( ( (
 ) ) ) ) )      "I'm 100% confident that p is between 0 and 1"
( ( ( ( (                                  L. Gonick & W. Smith (1993)
 ) ) ) ) )
.......................................................................


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From siim at obs.ee  Tue Oct  9 13:09:13 2001
From: siim at obs.ee (Ott Toomet)
Date: Tue, 9 Oct 2001 13:09:13 +0200 (CEST)
Subject: [R] bug in paste?
Message-ID: <Pine.LNX.4.33.0110091308270.10170-100000@ecopc15.eco.au.dk>

Dear all,

I have strange problems with paste.  Actually I suggest it is a bug (I
send a associated bug report for some days ago too).

I have a vector ce0, a character vector m and I paste them together:

> ce0
 [1] "1985" "9"    "2"    "2"    "1"    "A"    "1"    ""     "NA"   "5"
[11] "1999"

> m
 [1] "<1>" "<2>" "<3>" "<4>" "<4>" "<6>" "<7>" "<8>" "<9>" "<0>" "END"

> paste( ce0, m, sep="", collapse="")
[1] "1985<1>9<2>2<3>2<4>1<4>A1<7>NA<9>5<0>1999END"

                            ^
I expected to get the components of m-vector lying cleanly ordered
between the components of ce0, but it isn't so.  Instead of "1 2 3 4 5
6 7 8 9 0 END" you can see "1 2 3 4 4   7 9 0 END".  The main problem
rises from the "A1" in the row (marked with ^), where there is no
component from m inbetween the ce0 values at all!

However, this needs some background information.  ce0 is originally
from a large dataset (7000 obs x 1200 vars), read from a stata7-file
using read.dta:
> ce0 <- read.dta( "file.dta")[1,230:240]
So I am afraid ce0 contains some kind of extra iformation which I was
not able to figure about.

Can anybody explain me what is going on here?  My R is as follows:

platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    1
minor    3.1
year     2001
month    08
day      31
language R


Thanks in advance,

Ott Toomet


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Tue Oct  9 13:37:28 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Oct 2001 13:37:28 +0200
Subject: [R] bug in paste?
In-Reply-To: <Pine.LNX.4.33.0110091308270.10170-100000@ecopc15.eco.au.dk>
References: <Pine.LNX.4.33.0110091308270.10170-100000@ecopc15.eco.au.dk>
Message-ID: <x2k7y559jb.fsf@blueberry.kubism.ku.dk>

Ott Toomet <siim at obs.ee> writes:

> Dear all,
> 
> I have strange problems with paste.  Actually I suggest it is a bug (I
> send a associated bug report for some days ago too).

(And a whopping big one too...)

> I have a vector ce0, a character vector m and I paste them together:
> 
> > ce0
>  [1] "1985" "9"    "2"    "2"    "1"    "A"    "1"    ""     "NA"   "5"
> [11] "1999"
> 
> > m
>  [1] "<1>" "<2>" "<3>" "<4>" "<4>" "<6>" "<7>" "<8>" "<9>" "<0>" "END"
> 
> > paste( ce0, m, sep="", collapse="")
> [1] "1985<1>9<2>2<3>2<4>1<4>A1<7>NA<9>5<0>1999END"
> 
>                             ^
> I expected to get the components of m-vector lying cleanly ordered
> between the components of ce0, but it isn't so.  Instead of "1 2 3 4 5
> 6 7 8 9 0 END" you can see "1 2 3 4 4   7 9 0 END".  The main problem
> rises from the "A1" in the row (marked with ^), where there is no
> component from m inbetween the ce0 values at all!

I don't think the problem is sitting in paste():

> ce0<-c("1985","9","2","2","1","A","1","","NA","5","1999")
> m <- c("<1>","<2>","<3>","<4>","<4>","<6>","<7>","<8>","<9>","<0>","END")
> paste( ce0, m, sep="", collapse="")
[1] "1985<1>9<2>2<3>2<4>1<4>A<6>1<7><8>NA<9>5<0>1999END"


> However, this needs some background information.  ce0 is originally
> from a large dataset (7000 obs x 1200 vars), read from a stata7-file
> using read.dta:
> > ce0 <- read.dta( "file.dta")[1,230:240]
> So I am afraid ce0 contains some kind of extra iformation which I was
> not able to figure about.

What happens if you do a dput() on the vectors?

It might be that reading that big file is causing an overflow
somewhere, leading to a corrupted workspace -- i.e. that the bug is
really in the foreign package.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From siim at obs.ee  Tue Oct  9 15:03:31 2001
From: siim at obs.ee (Ott Toomet)
Date: Tue, 9 Oct 2001 15:03:31 +0200 (CEST)
Subject: [R] more on paste and bug
In-Reply-To: <x2k7y559jb.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.33.0110091446420.10293-100000@ecopc15.eco.au.dk>

Hi,

dput( ce0) gives a correct answer:
> dput( ce0)
c("1985", "9", "2", "2", "1", "A", "1", "", "NA", "5", "1999" )

The same does just print( ce0):
> print( ce0)
 [1] "1985" "9"    "2"    "2"    "1"    "A"    "1"    ""     "NA"   "5"
[11] "1999"

However, if I make a new similar vector ce0a:
> ce0a <- c( 1985,9,2,2,1,"A",1,"",NA,5,1999)

Then the paste works correctly:
> paste( ce0a, m, sep="", collapse="")
[1] "1985<1>9<2>2<3>2<4>1<5>A<6>1<7><8>NA<9>5<0>1999END"

I had M as
> m
 [1] "<1>" "<2>" "<3>" "<4>" "<5>" "<6>" "<7>" "<8>" "<9>" "<0>" "END"

So I have two apparently similar vectors which behave differently with
paste:
> paste( ce0a, m, sep="", collapse="")
[1] "1985<1>9<2>2<3>2<4>1<5>A<6>1<7><8>NA<9>5<0>1999END"
> paste( ce0, m, sep="", collapse="")
[1] "1985<1>9<2>2<3>2<4>1<5>A1<7>NA<9>5<0>1999END"
> ce0a
 [1] "1985" "9"    "2"    "2"    "1"    "A"    "1"    ""     "NA"   "5"
[11] "1999"
> ce0
 [1] "1985" "9"    "2"    "2"    "1"    "A"    "1"    ""     "NA"   "5"
[11] "1999"

I suggest there can be some hidden attributes somewhere in ce0 which I have
not noticed (there seem not to be factors), the problem seems to arise with
the non-numerical columns (ce0 is just part of one row of the big
dataframe).  Is it possible to figure it out, and possible change?  At least
attributes() do show nothing:
> attributes(ce0)
NULL
> attributes(ce0a)
NULL

The problem is actully that I cannot transform a stata7 dataset to ASCII, R
seems to be the only program here which is able to open it, but I have still
problems with saving.


On 9 Oct 2001, Peter Dalgaard BSA wrote:

> Ott Toomet <siim at obs.ee> writes:
>
> > Dear all,
> >
> > I have strange problems with paste.  Actually I suggest it is a bug (I
> > send a associated bug report for some days ago too).
>
> (And a whopping big one too...)
>
> > I have a vector ce0, a character vector m and I paste them together:
> >
> > > ce0
> >  [1] "1985" "9"    "2"    "2"    "1"    "A"    "1"    ""     "NA"   "5"
> > [11] "1999"
> >
> > > m
> >  [1] "<1>" "<2>" "<3>" "<4>" "<4>" "<6>" "<7>" "<8>" "<9>" "<0>" "END"
> >
> > > paste( ce0, m, sep="", collapse="")
> > [1] "1985<1>9<2>2<3>2<4>1<4>A1<7>NA<9>5<0>1999END"
> >
> >                             ^
> > I expected to get the components of m-vector lying cleanly ordered
> > between the components of ce0, but it isn't so.  Instead of "1 2 3 4 5
> > 6 7 8 9 0 END" you can see "1 2 3 4 4   7 9 0 END".  The main problem
> > rises from the "A1" in the row (marked with ^), where there is no
> > component from m inbetween the ce0 values at all!
>
> I don't think the problem is sitting in paste():
>
> > ce0<-c("1985","9","2","2","1","A","1","","NA","5","1999")
> > m <- c("<1>","<2>","<3>","<4>","<4>","<6>","<7>","<8>","<9>","<0>","END")
> > paste( ce0, m, sep="", collapse="")
> [1] "1985<1>9<2>2<3>2<4>1<4>A<6>1<7><8>NA<9>5<0>1999END"
>
>
> > However, this needs some background information.  ce0 is originally
> > from a large dataset (7000 obs x 1200 vars), read from a stata7-file
> > using read.dta:
> > > ce0 <- read.dta( "file.dta")[1,230:240]
> > So I am afraid ce0 contains some kind of extra iformation which I was
> > not able to figure about.
>
> What happens if you do a dput() on the vectors?
>
> It might be that reading that big file is causing an overflow
> somewhere, leading to a corrupted workspace -- i.e. that the bug is
> really in the foreign package.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fenner at cs.pitt.edu  Tue Oct  9 15:57:12 2001
From: fenner at cs.pitt.edu (Mark E. Fenner)
Date: Tue, 9 Oct 2001 09:57:12 -0400 (EDT)
Subject: [R] Yet another batch mode question
In-Reply-To: <Pine.GSO.4.31.0110090718150.1468-100000@auk.stats>
Message-ID: <Pine.LNX.4.21.0110090945170.31193-100000@oxygen.cs.pitt.edu>

On Tue, 9 Oct 2001, Prof Brian D Ripley wrote:

> On Mon, 8 Oct 2001, Mark E. Fenner wrote:
> 
> > Hello all and thanks in advance,
> >
> > I know you can start R with either:
> >
> > 1.  R CMD BATCH myfile.R
> >
> > or
> >
> > 2. R < myfile.R
> 
> Um, you can't: try it to see the fatal error.
> 

I did forget the "--no-save" or "--vanilla" or "--save" option that is
required for #2 but otherwise:

[mfenner at seneca testForList]$ cat test.R
x <- array(trunc(3*runif(100)), c(10,10))
mean(x)

[mfenner at seneca testForList]$cat results
Script started on Tue Oct  9 09:41:52 2001

[mfenner at seneca testForList]$ R --no-save < test.R
R : Copyright 2001, The R Development Core Team
Version 1.3.1  (2001-08-31)

<snip>

> x <- array(trunc(3*runif(100)), c(10,10))
>
> mean(x)
[1] 0.94
>
[mfenner at seneca testForList]$ R CMD BATCH test.R
[mfenner at seneca testForList]$ more test.Rout

R : Copyright 2001, The R Development Core Team
Version 1.3.1  (2001-08-31)
 
<snip>
 
> invisible(options(echo = TRUE))
> x <- array(trunc(3*runif(100)), c(10,10))
>
> mean(x)
[1] 0.8
> proc.time()
[1] 1.35 0.09 1.47 0.00 0.00
>
[mfenner at seneca testForList]$ exit
Script done on Tue Oct  9 09:42:43 2001
[mfenner at seneca testForList]$

In short, they both work for me.  You can supress the echoing of commands
by placing a options(echo = FALSE) type line in your script file.

> At present 1 does not pass along further arguments, but sends R method 2
> (well, with enough flags to make it work).
> 
> If you give 2 further arguments, you will get a strident warning like
> 
> auk% R foo
> ARGUMENT 'foo' __ignored__
> 
> R : Copyright 2001, The R Development Core Team
> ...

So, do people not use R in this fashion under Unix (as a general
rule)?  That is, running R from the command line with a script and an
input file.

BTW, I am primarily interested in the Unix environment.  Scripting under
Windows raises my blood pressure :) (unless it is in cygwin).

Regards,
Mark

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From J.B.Bremnes at dnmi.no  Tue Oct  9 16:14:24 2001
From: J.B.Bremnes at dnmi.no (John Bjornar Bremnes)
Date: Tue, 09 Oct 2001 14:14:24 +0000
Subject: [R] .Fortran()
References: <Pine.LNX.4.31.0110081605420.2787-100000@gannet.stats>
Message-ID: <3BC30640.A9E33785@dnmi.no>

Prof Brian Ripley wrote:
> 
> On Mon, 8 Oct 2001, John Bjornar Bremnes wrote:
> 
> > I am trying to call some Fortran subroutines using .Fortran(). These
> > subroutines have arguments of type 'character', 'real', 'integer', and
> > 'integer*2'. Is it impossible to call  subroutines expecting both
> > 'character' and 'real' as input?
> 
> No, but it is impossible to call those expecting 'integer*2'

Ok, it seems that I can easily avoid using 'integer*2'
 
> See ?.Foreign for what is supported, and note the comments there about
> character types: they work on some compilers and not on others.

Is g77 one of those where it does not work? I use R-1.3.0 on linux (PC).
I have tried the following simple example:

      subroutine mysub(filein, m, x, n)
c
      integer        m, n, i
      character*255  filein
      real           x(n)
c
      write(6,*) 'file: ', filein(1:m)
      do i=1,n
         x(i) = sqrt(1.0*i)
      enddo
      end

% R CMD SHLIB mysub.f 
g77   -fPIC  -g -O2 -c mysub.f -o mysub.o
gcc -shared  -o mysub.so mysub.o -L/usr/local/lib -lg2c -lm
-L/usr/local/lib -L. -L/usr/lib/gcc-lib/i386-linux/2.95.2 -lm 

> dyn.load("mysub.so")
> .Fortran( "mysub", as.character("myfile"), as.integer(6), as.single(rep(0,10)), as.integer(10), DUP=T )
 file: myfile
Segmentation fault (core dumped)
% R
> dyn.load("mysub.so")
> .Fortran( "mysub", as.character("myfile"), as.integer(6), as.single(rep(0,10)), as.integer(10), DUP=F )
Error: character variables must be duplicated in .C/.Fortran
>

Any comments?


Thanks again
John Bjornar Bremnes
Norwegian Meteorological Institute
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Oct  9 16:21:53 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 9 Oct 2001 15:21:53 +0100 (BST)
Subject: [R] .Fortran()
In-Reply-To: <3BC30640.A9E33785@dnmi.no>
Message-ID: <Pine.LNX.4.31.0110091515400.3245-100000@gannet.stats>

On Tue, 9 Oct 2001, John Bjornar Bremnes wrote:

> Prof Brian Ripley wrote:
> >
> > On Mon, 8 Oct 2001, John Bjornar Bremnes wrote:
> >
> > > I am trying to call some Fortran subroutines using .Fortran(). These
> > > subroutines have arguments of type 'character', 'real', 'integer', and
> > > 'integer*2'. Is it impossible to call  subroutines expecting both
> > > 'character' and 'real' as input?
> >
> > No, but it is impossible to call those expecting 'integer*2'
>
> Ok, it seems that I can easily avoid using 'integer*2'
>
> > See ?.Foreign for what is supported, and note the comments there about
> > character types: they work on some compilers and not on others.
>
> Is g77 one of those where it does not work? I use R-1.3.0 on linux (PC).

A properly working version of g77 should work on some platforms (including
Linux), but not others (including Windows).

> I have tried the following simple example:
>
>       subroutine mysub(filein, m, x, n)
> c
>       integer        m, n, i
>       character*255  filein
>       real           x(n)
> c
>       write(6,*) 'file: ', filein(1:m)
>       do i=1,n
>          x(i) = sqrt(1.0*i)
>       enddo
>       end
>
> % R CMD SHLIB mysub.f 
> g77   -fPIC  -g -O2 -c mysub.f -o mysub.o
> gcc -shared  -o mysub.so mysub.o -L/usr/local/lib -lg2c -lm
> -L/usr/local/lib -L. -L/usr/lib/gcc-lib/i386-linux/2.95.2 -lm
>
> > dyn.load("mysub.so")
> > .Fortran( "mysub", as.character("myfile"), as.integer(6), as.single(rep(0,10)), as.integer(10), DUP=T )
>  file: myfile
> Segmentation fault (core dumped)

That works for me (RH6.2, gcc 3.0.1, R 1.3.1).
 file: myfile
[[1]]
[1] "myfile"

[[2]]
[1] 6

[[3]]
 [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751 2.828427
 [9] 3.000000 3.162278
attr(,"Csingle")
[1] TRUE

[[4]]
[1] 10

BTW, no one said Fortran I/O would work, and it sometimes is a problem.


> % R
> > dyn.load("mysub.so")
> > .Fortran( "mysub", as.character("myfile"), as.integer(6), as.single(rep(0,10)), as.integer(10), DUP=F )
> Error: character variables must be duplicated in .C/.Fortran

> Any comments?

Do you have one of the many broken Linux versions of g77?

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Tue Oct  9 16:26:19 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Oct 2001 16:26:19 +0200
Subject: [R] more on paste and bug
In-Reply-To: <Pine.LNX.4.33.0110091446420.10293-100000@ecopc15.eco.au.dk>
References: <Pine.LNX.4.33.0110091446420.10293-100000@ecopc15.eco.au.dk>
Message-ID: <x28zek6gac.fsf@blueberry.kubism.ku.dk>

Ott Toomet <siim at obs.ee> writes:

> Hi,
> 
> dput( ce0) gives a correct answer:
> > dput( ce0)
> c("1985", "9", "2", "2", "1", "A", "1", "", "NA", "5", "1999" )
> 
> The same does just print( ce0):
> > print( ce0)
>  [1] "1985" "9"    "2"    "2"    "1"    "A"    "1"    ""     "NA"   "5"
> [11] "1999"
> 
> However, if I make a new similar vector ce0a:
> > ce0a <- c( 1985,9,2,2,1,"A",1,"",NA,5,1999)
> 
> Then the paste works correctly:
> > paste( ce0a, m, sep="", collapse="")
> [1] "1985<1>9<2>2<3>2<4>1<5>A<6>1<7><8>NA<9>5<0>1999END"
> 
> I had M as
> > m
>  [1] "<1>" "<2>" "<3>" "<4>" "<5>" "<6>" "<7>" "<8>" "<9>" "<0>" "END"
> 
> So I have two apparently similar vectors which behave differently with
> paste:
> > paste( ce0a, m, sep="", collapse="")
> [1] "1985<1>9<2>2<3>2<4>1<5>A<6>1<7><8>NA<9>5<0>1999END"
> > paste( ce0, m, sep="", collapse="")
> [1] "1985<1>9<2>2<3>2<4>1<5>A1<7>NA<9>5<0>1999END"
> > ce0a
>  [1] "1985" "9"    "2"    "2"    "1"    "A"    "1"    ""     "NA"   "5"
> [11] "1999"
> > ce0
>  [1] "1985" "9"    "2"    "2"    "1"    "A"    "1"    ""     "NA"   "5"
> [11] "1999"
> 
> I suggest there can be some hidden attributes somewhere in ce0 which I have
> not noticed (there seem not to be factors), the problem seems to arise with
> the non-numerical columns (ce0 is just part of one row of the big
> dataframe).  Is it possible to figure it out, and possible change?  At least
> attributes() do show nothing:
> > attributes(ce0)
> NULL
> > attributes(ce0a)
> NULL

Hmmm. The plot would seem to thicken around the entries in ce0
corresponding to <6> and <8>. If these accidentally contain \0
characters, much would be explained. Maybe also other weird
characters. 

What happens if you do nchar(ce0) ?  What if you omit the collapse=
argument? 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Tue Oct  9 17:10:56 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue, 9 Oct 2001 08:10:56 -0700 (PDT)
Subject: [R] list of functions flagged with debug() or trace()
In-Reply-To: <MABBLJDICACNFOLGIHJOOEEHCGAA.phgrosje@ulb.ac.be>
Message-ID: <Pine.A41.4.33.0110090808320.39912-100000@homer12.u.washington.edu>

On Tue, 9 Oct 2001, Philippe Grosjean wrote:

> Hello all,
>
> Since I got no answer to my first mail, I suspect I did not formulate my
> question adequately, so I try again.
>
> In R, one can debug or trace a function 'foo' with debug(foo) or trace(foo),
> respectively. This leads to a special treatment of the function 'foo' until
> one enter undebug(foo) or untrace(foo). I would like to know if there is a
> convenient way to know at any time which are the function flagged with
> debug() or trace() in a R session.

No, there isn't.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From J.B.Bremnes at dnmi.no  Tue Oct  9 18:01:35 2001
From: J.B.Bremnes at dnmi.no (John Bjornar Bremnes)
Date: Tue, 09 Oct 2001 16:01:35 +0000
Subject: [R] .Fortran()
References: <Pine.LNX.4.31.0110091515400.3245-100000@gannet.stats>
Message-ID: <3BC31F5F.52FBE588@dnmi.no>

Prof Brian Ripley wrote:
> 
> On Tue, 9 Oct 2001, John Bjornar Bremnes wrote:
> 
> > Prof Brian Ripley wrote:
> > >
> > > On Mon, 8 Oct 2001, John Bjornar Bremnes wrote:
> > >
> > > > I am trying to call some Fortran subroutines using .Fortran(). These
> > > > subroutines have arguments of type 'character', 'real', 'integer', and
> > > > 'integer*2'. Is it impossible to call  subroutines expecting both
> > > > 'character' and 'real' as input?
> > >
> > > No, but it is impossible to call those expecting 'integer*2'
> >
> > Ok, it seems that I can easily avoid using 'integer*2'
> >
> > > See ?.Foreign for what is supported, and note the comments there about
> > > character types: they work on some compilers and not on others.
> >
> > Is g77 one of those where it does not work? I use R-1.3.0 on linux (PC).
> 
> A properly working version of g77 should work on some platforms (including
> Linux), but not others (including Windows).
> 
> > I have tried the following simple example:
> >
> >       subroutine mysub(filein, m, x, n)
> > c
> >       integer        m, n, i
> >       character*255  filein
> >       real           x(n)
> > c
> >       write(6,*) 'file: ', filein(1:m)
> >       do i=1,n
> >          x(i) = sqrt(1.0*i)
> >       enddo
> >       end
> >
> > % R CMD SHLIB mysub.f 
> > g77   -fPIC  -g -O2 -c mysub.f -o mysub.o
> > gcc -shared  -o mysub.so mysub.o -L/usr/local/lib -lg2c -lm
> > -L/usr/local/lib -L. -L/usr/lib/gcc-lib/i386-linux/2.95.2 -lm
> >
> > > dyn.load("mysub.so")
> > > .Fortran( "mysub", as.character("myfile"), as.integer(6), as.single(rep(0,10)), as.integer(10), DUP=T )
> >  file: myfile
> > Segmentation fault (core dumped)
> 
> That works for me (RH6.2, gcc 3.0.1, R 1.3.1).
>  file: myfile
> [[1]]
> [1] "myfile"
> 
> [[2]]
> [1] 6
> 
> [[3]]
>  [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751 2.828427
>  [9] 3.000000 3.162278
> attr(,"Csingle")
> [1] TRUE
> 
> [[4]]
> [1] 10
> 
> BTW, no one said Fortran I/O would work, and it sometimes is a problem.
> 
> > % R
> > > dyn.load("mysub.so")
> > > .Fortran( "mysub", as.character("myfile"), as.integer(6), as.single(rep(0,10)), as.integer(10), DUP=F )
> > Error: character variables must be duplicated in .C/.Fortran
> 
> > Any comments?
> 
> Do you have one of the many broken Linux versions of g77?
> 

I have now tried versions 2.95.2 and 3.0 with no success. I will ask my
system administrator to install the latest gcc version (3.0.1?). Maybe I
should update R to 1.3.1 also. BTW where is the default compiler options
set for 'R CMD SHLIB'? 

In 
"Writing R Extensions" on page 23 it says "It is not possible to pass
numeric vectors as float * or REAL if DUP=TRUE". It should be DUP=FALSE,
or?


John Bjornar Bremnes
Norwegian Meteorological Institute
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From siim at obs.ee  Tue Oct  9 18:04:32 2001
From: siim at obs.ee (Ott Toomet)
Date: Tue, 9 Oct 2001 18:04:32 +0200 (CEST)
Subject: [R] bug & paste (continues...)
In-Reply-To: <Pine.LNX.4.33.0110091446420.10293-100000@ecopc15.eco.au.dk>
Message-ID: <Pine.LNX.4.33.0110091800350.1028-100000@ecopc15.eco.au.dk>

Hello again,

There are some new facts:

1) if you save image and restart the R, paste behaves normally:
> paste( ce0, m, sep="", collapse="")
[1] "1985<1>9<2>2<3>2<4>1<5>A<6>1<7><8>NA<9>5<0>1999END"
> paste( ce0a, m, sep="", collapse="")
[1] "1985<1>9<2>2<3>2<4>1<5>A<6>1<7><8>NA<9>5<0>1999END"

But making a new subset (a bit shorter this time and not text):
> e2000 <- read.dta( "/home/siim/tyy/andmebaasid/etu0012.dta")
> e0 <- e2000[1,231:239]
> e0
  c01b c02 c03 cx c05a01 c05ak01 c05b01 c05bk01 c0601
1    9   2   2  1      A       1             NA     5

(c05b01 should be a string variable, empty string in this case.
C05bk01 should be numerical, NA when empty.)

The problem arises again (m is correspondingly shorter now):
> paste( e0, m, sep="", collapse="")
[1] "9<1>2<2>2<3>1<4>A1<6>NA<8>5END"
> m
[1] "<1>" "<2>" "<3>" "<4>" "<5>" "<6>" "<7>" "<8>" "END"

paste without collapse gives a bit different picture, but that is
not correct either:
> paste( e0, m, sep="")
[1] "9<1>"  "2<2>"  "2<3>"  "1<4>"  "A"     "1<6>"  ""      "NA<8>" "5END"

nchar() do not show any hidden chars:
> nchar( e0)
[1] 1 1 1 1 1 1 0 2 1

So, it seems that R somehow remembers that e0 is taken from the big
dataframe, but I do not know how it is possible.  The memorisation is
passed in assignation:
> e1 <- e0
> paste( e1, m, sep="")
[1] "9<1>"  "2<2>"  "2<3>"  "1<4>"  "A"     "1<6>"  ""      "NA<8>" "5END"

but it vanishes when you save and load data:
> save( e0, file="jama.rd")
> load( "jama.rd")
> paste( e0, m, sep="")
[1] "9<1>"  "2<2>"  "2<3>"  "1<4>"  "A<5>"  "1<6>"  "<7>"   "NA<8>" "5END"


If you have any more ideas...

Best wishes,

Ott



P.S I do not know if this is related with the previous problem, but
when I remove the database:
>rm(e2000)

and then look memory:
> gc()
         used (Mb) gc trigger (Mb)
Ncells 220608  5.9     741108 19.8
Vcells  88222  0.7   11163343 85.2

Then it shows the memory usage less than 10M.  However, operating
system shows R is still using more than 80M.



On Tue, 9 Oct 2001, Ott Toomet wrote:

> Hi,
>
> dput( ce0) gives a correct answer:
> > dput( ce0)
> c("1985", "9", "2", "2", "1", "A", "1", "", "NA", "5", "1999" )
>
> The same does just print( ce0):
> > print( ce0)
>  [1] "1985" "9"    "2"    "2"    "1"    "A"    "1"    ""     "NA"   "5"
> [11] "1999"
>
> However, if I make a new similar vector ce0a:
> > ce0a <- c( 1985,9,2,2,1,"A",1,"",NA,5,1999)
>
> Then the paste works correctly:
> > paste( ce0a, m, sep="", collapse="")
> [1] "1985<1>9<2>2<3>2<4>1<5>A<6>1<7><8>NA<9>5<0>1999END"
>
> I had M as
> > m
>  [1] "<1>" "<2>" "<3>" "<4>" "<5>" "<6>" "<7>" "<8>" "<9>" "<0>" "END"
>
> So I have two apparently similar vectors which behave differently with
> paste:
> > paste( ce0a, m, sep="", collapse="")
> [1] "1985<1>9<2>2<3>2<4>1<5>A<6>1<7><8>NA<9>5<0>1999END"
> > paste( ce0, m, sep="", collapse="")
> [1] "1985<1>9<2>2<3>2<4>1<5>A1<7>NA<9>5<0>1999END"
> > ce0a
>  [1] "1985" "9"    "2"    "2"    "1"    "A"    "1"    ""     "NA"   "5"
> [11] "1999"
> > ce0
>  [1] "1985" "9"    "2"    "2"    "1"    "A"    "1"    ""     "NA"   "5"
> [11] "1999"
>
> I suggest there can be some hidden attributes somewhere in ce0 which I have
> not noticed (there seem not to be factors), the problem seems to arise with
> the non-numerical columns (ce0 is just part of one row of the big
> dataframe).  Is it possible to figure it out, and possible change?  At least
> attributes() do show nothing:
> > attributes(ce0)
> NULL
> > attributes(ce0a)
> NULL
>
> The problem is actully that I cannot transform a stata7 dataset to ASCII, R
> seems to be the only program here which is able to open it, but I have still
> problems with saving.
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From nittner at stat.uni-muenchen.de  Tue Oct  9 18:04:01 2001
From: nittner at stat.uni-muenchen.de (Thomas Nittner)
Date: Tue, 09 Oct 2001 18:04:01 +0200
Subject: [R] graphics
References: <3B5FCEB0.58B3816D@stat.uni-muenchen.de>
Message-ID: <3BC31FF1.583EE9B5@stat.uni-muenchen.de>

Hello helpteam,

I would like to generate graphics within
a loop which then should be one file.

For example, for each simulation I want
to draw the estimated regression line;
the resulting graphic should contain
one line for each loop.

Could you send me the syntax?

Thanks a lot,
greetings from Munich,
 
Thomas Nittner


-- 
Thomas Nittner              Tel:    ++49 89 2180 3197
Akademiestra?e 1          Fax:  ++49 89 2180 5042
D - 80799 M?nchen       http://www.stat.uni-muenchen.de
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ligges at statistik.uni-dortmund.de  Tue Oct  9 18:24:54 2001
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 09 Oct 2001 18:24:54 +0200
Subject: [R] graphics
References: <3B5FCEB0.58B3816D@stat.uni-muenchen.de> <3BC31FF1.583EE9B5@stat.uni-muenchen.de>
Message-ID: <3BC324D6.44E91D79@statistik.uni-dortmund.de>



Thomas Nittner wrote:
> 
> Hello helpteam,
> 
> I would like to generate graphics within
> a loop which then should be one file.
> 
> For example, for each simulation I want
> to draw the estimated regression line;
> the resulting graphic should contain
> one line for each loop.
> 
> Could you send me the syntax?

What about

 plot(...)
 for(...){
  ...
  my.lm <- lm(...)
  abline(my.lm)
 }

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Tue Oct  9 18:27:20 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Oct 2001 18:27:20 +0200
Subject: [R] bug & paste (continues...)
In-Reply-To: <Pine.LNX.4.33.0110091800350.1028-100000@ecopc15.eco.au.dk>
References: <Pine.LNX.4.33.0110091800350.1028-100000@ecopc15.eco.au.dk>
Message-ID: <x2r8sc4w47.fsf@blueberry.kubism.ku.dk>

Ott Toomet <siim at obs.ee> writes:

> > e1 <- e0
> > paste( e1, m, sep="")
> [1] "9<1>"  "2<2>"  "2<3>"  "1<4>"  "A"     "1<6>"  ""      "NA<8>" "5END"
> 
> but it vanishes when you save and load data:
> > save( e0, file="jama.rd")
> > load( "jama.rd")
> > paste( e0, m, sep="")
> [1] "9<1>"  "2<2>"  "2<3>"  "1<4>"  "A<5>"  "1<6>"  "<7>"   "NA<8>" "5END"
> 
> 
> If you have any more ideas...

Maybe. If you set sep=";", it won't show for 5&7 either, right?

Inside paste.c, we have 

        buf += LENGTH(STRING_ELT(VECTOR_ELT(x, j), i % k));

which reads the string length out of the SEXP field for the string. If
this is out of sync with the actual length of the string, the things
you describe could easily happen. 

Not really sure whether to put this down to non-defensive programming
in paste() or a bug in read.dta()... Probably mostly the latter.
 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From elvis at xlsolutions-corp.com  Tue Oct  9 19:02:37 2001
From: elvis at xlsolutions-corp.com (Elvis Miller, PhD)
Date: Tue, 09 Oct 2001 13:02:37 -0400
Subject: [R] Short R course In Los Angeles  - November 2001
Message-ID: <200110091702.f99H2bD26446@badass.hosting-network.com>

XLSolutions Corporation (www.xlsolutions-corp.com) is pleased to
announce a three-day R course, "R Fundamentals and Programming
Techniques" in:

Los Angeles - November 28-30, 2001.

Cost for 3-day course:


Academic    $875
Commercial  $985      Early bird registration: 5% off ends October 30th.


Payment due 7 days AFTER the class and Includes course materials,
90 days Technical Support for R, snacks and continental breakfast!)

PARTICIPANTS TO OUR CLASSES ARE ALWAYS PROVIDED WITH A COMPUTER!

R is a freely available implementation of the S language and environment,
for statistical computing and graphics similar to the commercial S-PLUS.
You can download a copy of R software (Windows, Mac, Unix & Linux)
from http://cran.r-project.org.

Course Description:

This three-day R course focuses on a broad spectrum of topics, from
reading raw data to a comparison of R, S and SAS. We will learn the
essentials of data manipulation, graphical visualization and R
programming. We will explore statistical data analysis tools, including
graphics with data sets from areas such as Finance, Biopharm,
manufacturing and E-commerce. However, participants are encouraged to
bring their own data for an interactive session with the trainer.


Registration and more information on outline and trainer:



Email Sue Turner: sue at xlsolutions-corp.com
Phone: 206-686-1578 x221

Visit us: www.xlsolutions-corp.com/training.htm


Course Format:

This course consists of a series of short lectures with demonstrations and
interactive sessions for the participants. Each student is provided with
bound copies of the notes and a CD-ROM containing all examples,
exercises and software used on the course.


Share Your Thoughts:

Are there any additional topics you would like for this course to address?
Would you like for this course to be offered in another city?

Please let us know by contributing to our recommendation list:
training at xlsolutions-corp.com.


================================================


Three-day R Fundamentals and Programming Techniques (Los Angeles)

Pre-registration Form (Please email or print and fax: 206-686-1578)
XLsolutions Corporation: For your Solutions needs, Consulting and
Training. www.xlsolutions-corp.com



Title...... First Name ................. Last Name....................

Organization..........................................................

Mailing Address.......................................................

.............................................................

..............................................................

Zip Code...................... Country.............................

Telephone........................... Fax ...............................

E-mail................................................................

Payment will be made by: (1) check (2) invoice (3) bank transfer

Sincerely

Elvis Miller, PhD
Manager Training and Technical Support
North American Division
XLSolutions Corporation
Email: elvis at xlsolutions-corp.com
Phone: 206-686-1578
Web: www.xlsolutions-corp.com


XLSolutions also offer customized private courses delivered by expert
trainers with a track teaching and training record in their fields.

XLSolutions Consulting Group meets your needs from design to development
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Oct  9 19:03:00 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 9 Oct 2001 18:03:00 +0100 (BST)
Subject: [R] .Fortran()
In-Reply-To: <3BC31F5F.52FBE588@dnmi.no>
Message-ID: <Pine.LNX.4.31.0110091800420.4807-100000@gannet.stats>

On Tue, 9 Oct 2001, John Bjornar Bremnes wrote:

> Prof Brian Ripley wrote:
> >
> > On Tue, 9 Oct 2001, John Bjornar Bremnes wrote:
> >
> > > Prof Brian Ripley wrote:
> > > >
> > > > On Mon, 8 Oct 2001, John Bjornar Bremnes wrote:
> > > >
> > > > > I am trying to call some Fortran subroutines using .Fortran(). These
> > > > > subroutines have arguments of type 'character', 'real', 'integer', and
> > > > > 'integer*2'. Is it impossible to call  subroutines expecting both
> > > > > 'character' and 'real' as input?
> > > >
> > > > No, but it is impossible to call those expecting 'integer*2'
> > >
> > > Ok, it seems that I can easily avoid using 'integer*2'
> > >
> > > > See ?.Foreign for what is supported, and note the comments there about
> > > > character types: they work on some compilers and not on others.
> > >
> > > Is g77 one of those where it does not work? I use R-1.3.0 on linux (PC).
> >
> > A properly working version of g77 should work on some platforms (including
> > Linux), but not others (including Windows).
> >
> > > I have tried the following simple example:
> > >
> > >       subroutine mysub(filein, m, x, n)
> > > c
> > >       integer        m, n, i
> > >       character*255  filein
> > >       real           x(n)
> > > c
> > >       write(6,*) 'file: ', filein(1:m)
> > >       do i=1,n
> > >          x(i) = sqrt(1.0*i)
> > >       enddo
> > >       end
> > >
> > > % R CMD SHLIB mysub.f 
> > > g77   -fPIC  -g -O2 -c mysub.f -o mysub.o
> > > gcc -shared  -o mysub.so mysub.o -L/usr/local/lib -lg2c -lm
> > > -L/usr/local/lib -L. -L/usr/lib/gcc-lib/i386-linux/2.95.2 -lm
> > >
> > > > dyn.load("mysub.so")
> > > > .Fortran( "mysub", as.character("myfile"), as.integer(6), as.single(rep(0,10)), as.integer(10), DUP=T )
> > >  file: myfile
> > > Segmentation fault (core dumped)
> >
> > That works for me (RH6.2, gcc 3.0.1, R 1.3.1).
> >  file: myfile
> > [[1]]
> > [1] "myfile"
> >
> > [[2]]
> > [1] 6
> >
> > [[3]]
> >  [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751 2.828427
> >  [9] 3.000000 3.162278
> > attr(,"Csingle")
> > [1] TRUE
> >
> > [[4]]
> > [1] 10
> >
> > BTW, no one said Fortran I/O would work, and it sometimes is a problem.
> >
> > > % R
> > > > dyn.load("mysub.so")
> > > > .Fortran( "mysub", as.character("myfile"), as.integer(6), as.single(rep(0,10)), as.integer(10), DUP=F )
> > > Error: character variables must be duplicated in .C/.Fortran
> >
> > > Any comments?
> >
> > Do you have one of the many broken Linux versions of g77?
> >
>
> I have now tried versions 2.95.2 and 3.0 with no success. I will ask my
> system administrator to install the latest gcc version (3.0.1?). Maybe I
> should update R to 1.3.1 also. BTW where is the default compiler options
> set for 'R CMD SHLIB'?

>From the configure script, in etc/Makeconf.

I doubt if 3.0.1 would help much over 3.0.  It's puzzling though.

> In
> "Writing R Extensions" on page 23 it says "It is not possible to pass
> numeric vectors as float * or REAL if DUP=TRUE". It should be DUP=FALSE,
> or?

It should be FALSE, and I've jut fixed it, thanks.

>
>
> John Bjornar Bremnes
> Norwegian Meteorological Institute
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hodgess at uhddx01.dt.uh.edu  Tue Oct  9 19:42:36 2001
From: hodgess at uhddx01.dt.uh.edu (Erin Hodgess)
Date: Tue, 9 Oct 2001 12:42:36 -0500 (CDT)
Subject: [R] JPEG from graphs problem
Message-ID: <200110091742.MAA08408@uhddx01.dt.uh.edu>

Dear R People:

I am using R version 1.3.1 for Windows.

I produce a graph, and save it as a JPEG file.
Then, when I try to look at it via the Windows Explorer,
I get an error message from the Microsoft Photo  program
of an Unknown File format.

What am I doing wrong, please?

Thanks in advance.

Sincerely,
Erin Hodgess
Assoc. Professor
Dept. of Computer and Mathematical Sciences
University of Houston - Downtown
e-mail: hodgess at uhddx01.dt.uh.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From john_heumann at agilent.com  Tue Oct  9 19:50:58 2001
From: john_heumann at agilent.com (HEUMANN,JOHN (A-Loveland,ex1))
Date: Tue, 9 Oct 2001 11:50:58 -0600 
Subject: [R] sample() help
Message-ID: <9153F74610B7D311B83900902771C8710A4CE423@axcs07.cos.agilent.com>

The documentation for sample() describes the optional "prob"
argument as "A vector of probabilities of obtaining the 
elements of the vector being sampled". 

Both run time behavior and source code (routine FixupProb) 
suggest that "prob" can be a vector of non-negative, 
relative weights (i.e. not necessarily normalized). 
Should the help be updated to reflect this?

Regards,
-jh-

=========================================
John M. Heumann, Agilent Technologies
815 14th St. S.W., Loveland, CO 80537 USA
Email: john_heumann at agilent.com
Phone: 970 679-3761 FAX: 970 679-5399
=========================================
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ligges at statistik.uni-dortmund.de  Tue Oct  9 20:57:51 2001
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 09 Oct 2001 20:57:51 +0200
Subject: [R] JPEG from graphs problem
References: <200110091742.MAA08408@uhddx01.dt.uh.edu>
Message-ID: <3BC348AF.FC171E04@statistik.uni-dortmund.de>

Erin Hodgess wrote:
> 
> Dear R People:
> 
> I am using R version 1.3.1 for Windows.
> 
> I produce a graph, and save it as a JPEG file.
> Then, when I try to look at it via the Windows Explorer,
> I get an error message from the Microsoft Photo  program
> of an Unknown File format.
> 
> What am I doing wrong, please?

How did you save it? I did the following:

 jpeg("c:/test.jpg")
 plot(1:10)
 dev.off()

and it works perfectly on WinNT4. Maybe you forgot dev.off()?
Using the GUI for saving also works perfectly for me.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From faheem at email.unc.edu  Tue Oct  9 21:31:16 2001
From: faheem at email.unc.edu (Faheem Mitha)
Date: Tue, 9 Oct 2001 15:31:16 -0400 (EDT)
Subject: [R] passing arguments to R CMD SHLIB
In-Reply-To: <15023.7060.622359.738360@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.33.0110091516460.20920-100000@Chrestomanci>


Dear People,

Earlier this year I wrote asking about how to pass arguments to R CMD
SHLIB. I received the reply that one way was to add arguments to the file
Makevars in the compilation directory. I'm having a related problem.

I want to compile up the following shared library. The Makefile has

all: mh.so
 mh.so: mh.c mh.h
	R CMD SHLIB mh.c

Makevars contains

PKG_CPPFLAGS=-O2 -Wall -pedantic

the compilation gives

gcc -I/usr/lib/R/include -O2 -Wall -pedantic -I/usr/local/include
-mieee-fp -D__NO_MATH_INLINES  -fPIC  -g -O2 -c mh.c -o mh.o

However, I want to link it to a shared library, ie. I want

gcc ... mh.c -lgslcblas

"R Extensions" says that the variable PKG_LIBS can be used for additional
`-l' and `-L' flags to be passed to the linker when building the shared
library. I added a line to Makevars like

PKG_LIBS=-lgslcblas

and other variations, but everything I do is completely ignored. I am at
my wits end. Is PKG_LIBS really the correct variable, and if so, what is
the correct syntax?

Thanks in advance.

                        Sincerely, Faheem Mitha.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From faheem at email.unc.edu  Tue Oct  9 22:03:14 2001
From: faheem at email.unc.edu (Faheem Mitha)
Date: Tue, 9 Oct 2001 16:03:14 -0400 (EDT)
Subject: [R] passing arguments to R CMD SHLIB
In-Reply-To: <Pine.LNX.4.33.0110091516460.20920-100000@Chrestomanci>
Message-ID: <Pine.LNX.4.33.0110091601570.24042-100000@Chrestomanci>



On Tue, 9 Oct 2001, Faheem Mitha wrote:

>
> Dear People,
>
> Earlier this year I wrote asking about how to pass arguments to R CMD
> SHLIB. I received the reply that one way was to add arguments to the file
> Makevars in the compilation directory. I'm having a related problem.

Er.. its working now. Like an idiot, I forgot to add the appropriate
header file. Sorry for troubling all of you.

                        Best regards, Faheem Mitha.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Tue Oct  9 22:26:20 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Oct 2001 22:26:20 +0200
Subject: [R] sample() help
In-Reply-To: <9153F74610B7D311B83900902771C8710A4CE423@axcs07.cos.agilent.com>
References: <9153F74610B7D311B83900902771C8710A4CE423@axcs07.cos.agilent.com>
Message-ID: <x2g08simqb.fsf@blueberry.kubism.ku.dk>

"HEUMANN,JOHN (A-Loveland,ex1)" <john_heumann at agilent.com> writes:

> The documentation for sample() describes the optional "prob"
> argument as "A vector of probabilities of obtaining the 
> elements of the vector being sampled". 
> 
> Both run time behavior and source code (routine FixupProb) 
> suggest that "prob" can be a vector of non-negative, 
> relative weights (i.e. not necessarily normalized). 
> Should the help be updated to reflect this?

Can't hurt. Done.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Jason.Turner at chh.co.nz  Tue Oct  9 22:35:34 2001
From: Jason.Turner at chh.co.nz (Turner, Jason)
Date: Wed, 10 Oct 2001 09:35:34 +1300
Subject: [R] Unlisting while preserving object types?
Message-ID: <F1BAF57B245ED21198CD0008C71E47A602750079@MPNPKIN1>

Hi

A toy example is probably the least ambiguous way of explaining what I'm
trying to do.

> library(ts)
> zz<-list(a=rnorm(100),b=rt(100,3))
> zz.spec<-lapply(zz,spectrum,plot=F)
> summary(zz.spec)
  Length Class Mode
a 15     spec  list
b 15     spec  list

I'm looking for an elegant way to fetch components of the sub-lists a and b
of zz.spec; 
e.g. to make a matrix with columns a$spec and b$spec.  

matrix(unlist(lapply(zz.spec,function(x){return(x$spec)})),ncol=length(zz.sp
ec))

is about the best I've come up with.  Is there a more direct way?  This gets
particularly
important with nested sub-lists - lists of lists of lists.  Is the best
approach is to 
have the good sense to avoid such structures in the first place?

Cheers

Jason

DISCLAIMER:  This electronic message together with any attachments is 
confidential.  If you are not the intended recipient, do not copy, disclose or 
use the contents in any way.  Please also advise us by return e-mail that you 
have received the message and then please destroy.  Carter Holt Harvey is not 
responsible for any changes made to this message and / or any attachments after 
sending by Carter Holt Harvey.  We use virus scanning software but exclude all 
liability for viruses or anything similar in this email or any attachment.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jbowers at csm.berkeley.edu  Wed Oct 10 00:01:48 2001
From: jbowers at csm.berkeley.edu (Jacob W. Bowers)
Date: Tue, 9 Oct 2001 15:01:48 -0700 (PDT)
Subject: [R] Unlisting while preserving object types?
In-Reply-To: <F1BAF57B245ED21198CD0008C71E47A602750079@MPNPKIN1>
Message-ID: <Pine.SV4.3.96.1011009145830.9747A-100000@csm.Berkeley.EDU>

Hi Jason,

How about this:

zz.spec<-lapply(zz,FUN=function(x){
spectrum(x,plot=F)
})

yourmatrix<-cbind(zz.spec$a$spec,zz.spec$b$spec)

Best,
Jake

On Wed, 10 Oct 2001, Turner, Jason wrote:

> Hi
> 
> A toy example is probably the least ambiguous way of explaining what I'm
> trying to do.
> 
> > library(ts)
> > zz<-list(a=rnorm(100),b=rt(100,3))
> > zz.spec<-lapply(zz,spectrum,plot=F)
> > summary(zz.spec)
>   Length Class Mode
> a 15     spec  list
> b 15     spec  list
> 
> I'm looking for an elegant way to fetch components of the sub-lists a and b
> of zz.spec; 
> e.g. to make a matrix with columns a$spec and b$spec.  
> 
> matrix(unlist(lapply(zz.spec,function(x){return(x$spec)})),ncol=length(zz.sp
> ec))
> 
> is about the best I've come up with.  Is there a more direct way?  This gets
> particularly
> important with nested sub-lists - lists of lists of lists.  Is the best
> approach is to 
> have the good sense to avoid such structures in the first place?
> 
> Cheers
> 
> Jason
> 
> DISCLAIMER:  This electronic message together with any attachments is 
> confidential.  If you are not the intended recipient, do not copy, disclose or 
> use the contents in any way.  Please also advise us by return e-mail that you 
> have received the message and then please destroy.  Carter Holt Harvey is not 
> responsible for any changes made to this message and / or any attachments after 
> sending by Carter Holt Harvey.  We use virus scanning software but exclude all 
> liability for viruses or anything similar in this email or any attachment.
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From sorenh at mail.dk  Wed Oct 10 00:20:45 2001
From: sorenh at mail.dk (=?iso-8859-1?Q?S=F8ren_H=F8jsgaard?=)
Date: Wed, 10 Oct 2001 00:20:45 +0200
Subject: [R] PROC MIXED user trying to use (n)lme...
Message-ID: <001601c15110$a48fd220$081114ac@agrsci.dk>

Dear R-users

Coming from a proc mixed (SAS) background I am trying to get into
the use of (n)lme.

In this connection, I have some (presumably stupid) questions
which I am sure someone out there can answer:

1) With proc mixed it is easy to get a hold on the estimated
variance parameters as they can be put out into a SAS data set.
How do I do the same with lme-objects? For example, I can see the
estimated variance matrix when typing the name of the lme-object,
but that does not give me a "handle" on the matrix.

2) I am trying to fit a mixed model, say

    y_{ij} = X_{ij}\beta + U_i + e_{ij}

where Y_{ij}, U_i and e_{ij} all are D-dimensional, and U_i ~
N_D(0,G), and e_{ij} ~ N(0,R). This is easy to do in proc mixed by
including a factor keeping track of how the elements of y_{ij} are
"stacked" on top of each other. This factor is then used in the
model, the random and the repeated statements. In the book by
Pinheiro and Bates (p.28 ff) there is a similar example. Yet, I
don't quite get the "generality" of the example. Can anyone help
with that?

3) With proc mixed it is easy to specify that some covariance
parameters are known (fixed) in advance. How can I do the same
with lme? (To be specific, I would like to specify that the
elements of R in the example above are known).

Thanks in advance

S?ren H?jsgaard
sorenh at agrsci.dk    http://www.jbs.agrsci.dk/~sorenh
-------------------------------------------------------------------------
Time flies like an arrow, fruit flies like a banana.
-------------------------------------------------------------------------



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Jason.Turner at chh.co.nz  Wed Oct 10 00:42:06 2001
From: Jason.Turner at chh.co.nz (Turner, Jason)
Date: Wed, 10 Oct 2001 11:42:06 +1300
Subject: [R] Unlisting while preserving object types?
Message-ID: <F1BAF57B245ED21198CD0008C71E47A60275007B@MPNPKIN1>

Thanks Jake, 

The example I gave is a toy one, however, and I neglected to mention that I
need it
automated because the number of members (in the example, a and b) isn't
known in 
advance, and could typically be as high as 30.  I got tired of typing it all
out each time.
Sorry I forgot the most crucial details - I keep forgetting that the whole
world isn't
working on this with me.  ;-)

Cheers

Jason

> Hi Jason,
> 
> How about this:
> 
> zz.spec<-lapply(zz,FUN=function(x){
> spectrum(x,plot=F)
> })
> 
> yourmatrix<-cbind(zz.spec$a$spec,zz.spec$b$spec)
> 
> Best,
> Jake
> 
> On Wed, 10 Oct 2001, Turner, Jason wrote:
> 
> > Hi
> > 
> > A toy example is probably the least ambiguous way of explaining what I'm
> > trying to do.
> > 
> > > library(ts)
> > > zz<-list(a=rnorm(100),b=rt(100,3))
> > > zz.spec<-lapply(zz,spectrum,plot=F)
> > > summary(zz.spec)
> >   Length Class Mode
> > a 15     spec  list
> > b 15     spec  list
> > 
> > I'm looking for an elegant way to fetch components of the sub-lists a
> and b
> > of zz.spec; 
> > e.g. to make a matrix with columns a$spec and b$spec.  
> > 
> >
> matrix(unlist(lapply(zz.spec,function(x){return(x$spec)})),ncol=length(zz.
> sp
> > ec))
> > 
> > is about the best I've come up with.  Is there a more direct way?  This
> gets
> > particularly
> > important with nested sub-lists - lists of lists of lists.  Is the best
> > approach is to 
> > have the good sense to avoid such structures in the first place?
> > 
> > Cheers
> > 
> > Jason
> > 
> > 

DISCLAIMER:  This electronic message together with any attachments is 
confidential.  If you are not the intended recipient, do not copy, disclose or 
use the contents in any way.  Please also advise us by return e-mail that you 
have received the message and then please destroy.  Carter Holt Harvey is not 
responsible for any changes made to this message and / or any attachments after 
sending by Carter Holt Harvey.  We use virus scanning software but exclude all 
liability for viruses or anything similar in this email or any attachment.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From matthew.clarkson at marketshare.com.au  Wed Oct 10 02:31:35 2001
From: matthew.clarkson at marketshare.com.au (Matthew Clarkson)
Date: Wed, 10 Oct 2001 10:31:35 +1000
Subject: [R] Spacing in the labels using xyplot()
Message-ID: <0C2C49DCA9C8D311B2980000E20E9D5544791B@SBSSERVER>

We have a variable that we use to label bars in barplot() and to condition
on in xyplot(). Since the labels can be quite long, we use strwrap()
on-the-fly to split the strings into several "lines" separated by "\n". With
barplot, this works nicely using text(), but with xyplot() it doesn't. In
the latter, the labels appear to be "double-spaced" compared to the
single-spacing in barplot(). Is it possible to close up the spacing in the
labels that xyplot() use? I can't see anything obvious in strip.default for
controlling this, so would greatly appreciate your advice. Thank you!

Matthew Clarkson
Consultant
e-mail: matthew.clarkson at marketshare.com.au
Ph: +61-7-3371 9655 Fax:+61-7-3870 3537
www.marketshare.com.au

This email is intended only for the use of the individual or entity named
above and may contain information that is confidential and privileged.  If
you are not the intended recipient, you are hereby notified that any
dissemination, distribution or copying of this email is strictly prohibited.
If you have received this email in error, please notify us immediately by
return email or telephone +61 07 3371 9655 or +61 02 9235 0005 and destroy
the original message.  Thank you.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From michaell.taylor at reis.com  Wed Oct 10 03:00:32 2001
From: michaell.taylor at reis.com (Michaell Taylor)
Date: Tue, 9 Oct 2001 21:00:32 -0400
Subject: [R] basic indexing
Message-ID: <20011010010042.85D879CF7E@mercury.bestweb.net>


I know there is a simple answer, I am attempting to make a simple indexing 
issue too complex.

Suppose I have a dataframe like the following:

	x	y
1	5	8
2	8	9
3	1	2
4	6	8
5	9	8

Now suppose I simply wish to have a lagged indicator of x such that

	x	y	z
1	5	8	NA
2	8	9	5
3	1	2	8
4	6	8	1
5	9	8	6

in stata this would be
gen z=x[N-1]

or even 

	x	y	z
1	5	8	NA
2	8	9	NA
3	1	2	NA
4	6	8	1
5	9	8	6

in stata this would be
gen z=x[N-1] if y==8

I've tried : z _ x[-1], but this leaves the vector too short.  I could 
"backfill" but this seem pretty contrived.  In practice, I need to get 
flexible lagging system as appropriate lags may depend of variable 
combinations.

Thanks for any comments you may have.

Michaell
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dmurdoch at pair.com  Wed Oct 10 04:22:26 2001
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Tue, 09 Oct 2001 22:22:26 -0400
Subject: [R] basic indexing
In-Reply-To: <20011010010042.85D879CF7E@mercury.bestweb.net>
References: <20011010010042.85D879CF7E@mercury.bestweb.net>
Message-ID: <dob7st4iqgv9c6kovu9p6pmqqdvrapdm4t@4ax.com>

On Tue, 9 Oct 2001 21:00:32 -0400, you wrote:

>in stata this would be
>gen z=x[N-1]

In R use z <- c(NA, x[-length(x)])

This says that z is an NA followed by the x vector with the last
element left off.  Another way is

 z <- c(NA, x)
 length(z) <- length(x)

>in stata this would be
>gen z=x[N-1] if y==8

In R you should probably use two statements for this.  The first
constructs z as above, the second is

 z[y != 8] <- NA

A one-liner is

  z <- ifelse(y == 8, c(NA, x[-length(x)]), NA)

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ligges at statistik.uni-dortmund.de  Wed Oct 10 08:22:05 2001
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed, 10 Oct 2001 08:22:05 +0200
Subject: [R] Spacing in the labels using xyplot()
References: <0C2C49DCA9C8D311B2980000E20E9D5544791B@SBSSERVER>
Message-ID: <3BC3E90D.4AF70C84@statistik.uni-dortmund.de>



Matthew Clarkson wrote:
> 
> We have a variable that we use to label bars in barplot() and to condition
> on in xyplot(). Since the labels can be quite long, we use strwrap()
> on-the-fly to split the strings into several "lines" separated by "\n". With
> barplot, this works nicely using text(), but with xyplot() it doesn't. In
> the latter, the labels appear to be "double-spaced" compared to the
> single-spacing in barplot(). Is it possible to close up the spacing in the
> labels that xyplot() use? I can't see anything obvious in strip.default for
> controlling this, so would greatly appreciate your advice. Thank you!

xyplot() is in package lattice (which is still under development).
Use ltext() instead of text() to put a text into a trellis.device.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From alobo at ija.csic.es  Wed Oct 10 08:48:36 2001
From: alobo at ija.csic.es (Agustin Lobo)
Date: Wed, 10 Oct 2001 08:48:36 +0200 (MET DST)
Subject: [R] basic indexing
In-Reply-To: <20011010010042.85D879CF7E@mercury.bestweb.net>
Message-ID: <Pine.OSF.3.96.1011010084247.15846A-100000@ija.csic.es>

On Tue, 9 Oct 2001, Michaell Taylor wrote:

> Suppose I have a dataframe like the following:
> 
> 	x	y
> 1	5	8
> 2	8	9
> 3	1	2
> 4	6	8
> 5	9	8
> 
> Now suppose I simply wish to have a lagged indicator of x such that
> 
> 	x	y	z
> 1	5	8	NA
> 2	8	9	5
> 3	1	2	8
> 4	6	8	1
> 5	9	8	6
> 
> in stata this would be
> gen z=x[N-1]

In R


z <- c(NA,z[1:(length(z)-1)]

Agus


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jarioksa at cc.oulu.fi  Wed Oct 10 08:46:48 2001
From: jarioksa at cc.oulu.fi (Jari Oksanen)
Date: Wed, 10 Oct 2001 09:46:48 +0300
Subject: [R] .Fortran() 
In-Reply-To: Message from Prof Brian Ripley <ripley@stats.ox.ac.uk> 
   of "Tue, 09 Oct 2001 15:21:53 BST." <Pine.LNX.4.31.0110091515400.3245-100000@gannet.stats> 
Message-ID: <200110100646.f9A6kou19441@pc112145.oulu.fi>

I have had a related conversation about .Fortran with Brian Ripley 
(undercover), and I have learnt some valuable things, for instance 
about English language. As a non-English speaking person I had hastily 
assumed that `may' in ?.Fortran is more or less synonymous with `can', 
but it seems that it rather is synonymous with `may not'. Now I have 
two new valuable pieces of information:

ripley at stats.ox.ac.uk said:
> A properly working version of g77 should work on some platforms
> (including Linux), but not others (including Windows).

This explains why my plug-in Fortran library worked in Linux (RH7.1, 
with gcc updates), but not when my mate tried that in Windows.

And this is the second piece:

ripley at stats.ox.ac.uk said:
> BTW, no one said Fortran I/O would work, and it sometimes is a
> problem.

This means that I have a problem. Does anybody here have a solution?

My problem is that there are plenty of legacy files in our field which 
are written with so-called Cornell Ecology Programs (CEP) formats. 
These are Fortran formatted files, and the actual format used is 
written in the file (on its second line, or, I should say, `card'). I 
thought that a nice solution was to write a Fortran program[me] to read 
these files and pass the data and row and column names back to R which 
then makes these into a data.frame. It was surprisingly easy and worked 
beautifully in Linux, but crashed R in Windows. I made a small test 
package in Fortran which made nothing but opened a file and read a 
line. This crashed in Windows (I don't have access to Windows, so these 
tests were made in Florida, and I never saw what happened). So it seems 
that this is not portable. Now comes the question (finally, I hope 
somebody got this far): Is there a R pluggable module to interpret 
Fortran format (which may be tricky), so that I could read these lines 
with plain C or plain R? (I once made a similar program[me] using 
Scientific Python module in Python, but that was much more tricky than 
using direct Fortran, and failed in some test files).

Another alternative is to let it be and make a separate stand-alone 
program to change these files into, say, csv and then read them into R. 
However, it was so nice when I suddenly had access to tens of my old 
files within an R session, and I would like other people to share my 
joy (sounds like a cheap thrill). Naturally, this works now in my 
system, so my concern is rather abstract.

cheers, jari oksanen
-- 
Jari Oksanen -- Dept Biology, Univ Oulu, 90014 Oulu, Finland
Ph. +358 8 5531526, cell +358 40 5136529, fax +358 8 5531061
email jari.oksanen at oulu.fi, homepage http://cc.oulu.fi/~jarioksa/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Oct 10 09:18:44 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 10 Oct 2001 08:18:44 +0100 (BST)
Subject: [R] .Fortran() 
In-Reply-To: <200110100646.f9A6kou19441@pc112145.oulu.fi>
Message-ID: <Pine.GSO.4.31.0110100807390.16796-100000@auk.stats>

On Wed, 10 Oct 2001, Jari Oksanen wrote:

> I have had a related conversation about .Fortran with Brian Ripley
> (undercover), and I have learnt some valuable things, for instance
> about English language. As a non-English speaking person I had hastily
> assumed that `may' in ?.Fortran is more or less synonymous with `can',
> but it seems that it rather is synonymous with `may not'. Now I have

Not really.  Both `may' and `can' signify possibility, not certainty.
There is at least one R implementation in which it works, so either would be
appropriate.  `may not' would mean that there was one where it did not,
and although that is currently known, it may become unknown at some later
date.

I'll expand the statement.

> two new valuable pieces of information:
>
> ripley at stats.ox.ac.uk said:
> > A properly working version of g77 should work on some platforms
> > (including Linux), but not others (including Windows).
>
> This explains why my plug-in Fortran library worked in Linux (RH7.1,
> with gcc updates), but not when my mate tried that in Windows.
>
> And this is the second piece:
>
> ripley at stats.ox.ac.uk said:
> > BTW, no one said Fortran I/O would work, and it sometimes is a
> > problem.
>
> This means that I have a problem. Does anybody here have a solution?

In general, no.  Indeed, in general Fortran formatted files are a
completely separate type of file (although I doubt R runs on any such
platform).  The problems are

(a) R is a C program linking in Fortran compiled code and libraries, and
the Fortran I/O may not be initialized, and

(b) C and Fortran I/O may be trying to use the same underlying mechanism
and assuming they have exclusive access to it, thereby corrupting the
other attempt.

These are much less likely with C/Fortran compiler pairs like gcc/g77,
but on some platforms we advocate using higher-performance native Fortran
compilers (e.g. on Solaris where f95 optimizes much better than g77, and
has high-performance libraries).

> My problem is that there are plenty of legacy files in our field which
> are written with so-called Cornell Ecology Programs (CEP) formats.
> These are Fortran formatted files, and the actual format used is
> written in the file (on its second line, or, I should say, `card'). I
> thought that a nice solution was to write a Fortran program[me] to read
> these files and pass the data and row and column names back to R which
> then makes these into a data.frame. It was surprisingly easy and worked
> beautifully in Linux, but crashed R in Windows. I made a small test
> package in Fortran which made nothing but opened a file and read a
> line. This crashed in Windows (I don't have access to Windows, so these
> tests were made in Florida, and I never saw what happened). So it seems
> that this is not portable. Now comes the question (finally, I hope
> somebody got this far): Is there a R pluggable module to interpret
> Fortran format (which may be tricky), so that I could read these lines
> with plain C or plain R? (I once made a similar program[me] using
> Scientific Python module in Python, but that was much more tricky than
> using direct Fortran, and failed in some test files).
>
> Another alternative is to let it be and make a separate stand-alone
> program to change these files into, say, csv and then read them into R.
> However, it was so nice when I suddenly had access to tens of my old
> files within an R session, and I would like other people to share my
> joy (sounds like a cheap thrill). Naturally, this works now in my
> system, so my concern is rather abstract.

I would do it that way, even invoke the external program via system.
It's tempting to use pipe/fifo connections, but they are not very portable.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From uht at dfu.min.dk  Wed Oct 10 11:13:48 2001
From: uht at dfu.min.dk (=?iso-8859-1?Q?Uffe_H=F8gsbro_Thygesen?=)
Date: Wed, 10 Oct 2001 11:13:48 +0200
Subject: [R] Weird feature when creating function lists with apply
Message-ID: <5483FBA06695D511AB2900B0D079FB3C1169FD@hfi02.dfu.min.dk>

Hi R-fellows,

can anyone explain this weird feature? I am trying to create a list of
functions with apply, and it appears that there is something strange going
on when the function evaluates the argument a. When I duplicate a into a
local variable b, the result changes !?!

Any pointers? Thank in advance. Cheers,

Uffe


# Create a function which returns a function
> f1 <- function(a) {return(function(x) a*x)}
# Create a list of functions, parameterised by 1:4
> apply(as.array(1:4),1,f1)[[2]](1)
[1] 4

# Repeat
> f2 <- function(a) {b <- a ;return(function(x) b*x)}
> apply(as.array(1:4),1,f2)[[2]](1)
[1] 2

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Uffe H. Thygesen, M.Sc.&Eng., Ph.D.
Danish Institute of Fisheries Research
http://www.dfu.min.dk


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Oct 10 11:34:58 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 10 Oct 2001 10:34:58 +0100 (BST)
Subject: [R] Weird feature when creating function lists with apply
In-Reply-To: <5483FBA06695D511AB2900B0D079FB3C1169FD@hfi02.dfu.min.dk>
Message-ID: <Pine.LNX.4.31.0110101026550.5545-100000@gannet.stats>

On Wed, 10 Oct 2001, [iso-8859-1] Uffe Hgsbro Thygesen wrote:

> Hi R-fellows,
>
> can anyone explain this weird feature? I am trying to create a list of
> functions with apply, and it appears that there is something strange going
> on when the function evaluates the argument a. When I duplicate a into a
> local variable b, the result changes !?!
>
> Any pointers? Thank in advance. Cheers,
>
> Uffe
>
>
> # Create a function which returns a function
> > f1 <- function(a) {return(function(x) a*x)}
> # Create a list of functions, parameterised by 1:4
> > apply(as.array(1:4),1,f1)[[2]](1)
> [1] 4
>
> # Repeat
> > f2 <- function(a) {b <- a ;return(function(x) b*x)}
> > apply(as.array(1:4),1,f2)[[2]](1)
> [1] 2

I don't think this is what you intended.

ll <- apply(as.array(1:4),1,f1)
ll
[[1]]
function(x) a*x
<environment: a6d374>

[[2]]
function(x) a*x
<environment: a6d09c>

[[3]]
function(x) a*x
<environment: a6dd60>

[[4]]
function(x) a*x
<environment: a6da88>

which is not what your comment implies.

And
> get("a", envir=environment(ll[[2]]))
[1] 4

shows why they differ.


1) This is a strange way to produce a list via arrays:
ll <- lapply(1:4, f1) is what is normally used.

2) I think what you really wanted was

f3 <- function(a) substitute(function(x) a*x, list(a = a))
lapply(1:4, f3)
[[1]]
function(x) 1 * x

[[2]]
function(x) 2 * x

[[3]]
function(x) 3 * x

[[4]]
function(x) 4 * x

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Wed Oct 10 11:36:31 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Oct 2001 11:36:31 +0200
Subject: [R] Weird feature when creating function lists with apply
In-Reply-To: <5483FBA06695D511AB2900B0D079FB3C1169FD@hfi02.dfu.min.dk>
References: <5483FBA06695D511AB2900B0D079FB3C1169FD@hfi02.dfu.min.dk>
Message-ID: <x2adyzomzk.fsf@blueberry.kubism.ku.dk>

Uffe H?gsbro Thygesen <uht at dfu.min.dk> writes:

> # Create a function which returns a function
> > f1 <- function(a) {return(function(x) a*x)}
> # Create a list of functions, parameterised by 1:4
> > apply(as.array(1:4),1,f1)[[2]](1)
> [1] 4
> 
> # Repeat
> > f2 <- function(a) {b <- a ;return(function(x) b*x)}
> > apply(as.array(1:4),1,f2)[[2]](1)
> [1] 2

This should work too:
f3 <- function(a) {a;function(x) a*x}
apply(as.array(1:4),1,f3)[[2]](1)

It is essentially the same situation that caused Luke Tierney
substantial headscratching recently. The key is lazy evaluation.
Here's part of the conversation from then:

[Snip from email from Luke]
On Wed, Aug 29, 2001 at 11:25:54PM +0200, Peter Dalgaard BSA wrote:
> Luke Tierney <luke at nokomis.stat.umn.edu> writes:
> 
> > > mkf <- function(j) function() j
> > > for (i in 1:10) x[[i]] <- mkf(i)
> > 
> > That doesn't work either:
> > 
> > > x[[2]]()
> > [1] 10
> > 
> > but for a slightly different reason: Lazy evaluation defers evaluating
> > the argument to mkf(i) until the funtction is called.
> 
> Argh. I've been looking at this for ten minutes and it still refuses
> to sink in....

Now imagine getting bitten by this while experimenting with some new
threading code, which is of course then the prime suspect for all bad
things that happen, and you can see why Duncan and I were tearing our
hair out for a bit :-).

> 
> Oh, now I see it:
> 
> > z<-2 ; f<-mkf(z)
> > z<-3
> > f()
> [1] 3
> > z<-4
> > f()
> [1] 3
> 
> The return value of mkf is not really a function of the argument, it
> is the same function every time, namely the function returning "j"
> which it will look up in its parent environment (the lexical one...)
> when called, and only *then* will it force the promise. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From uht at dfu.min.dk  Wed Oct 10 12:49:05 2001
From: uht at dfu.min.dk (=?iso-8859-1?Q?Uffe_H=F8gsbro_Thygesen?=)
Date: Wed, 10 Oct 2001 12:49:05 +0200
Subject: [R] Weird feature when creating function lists with apply
Message-ID: <5483FBA06695D511AB2900B0D079FB3C1169FF@hfi02.dfu.min.dk>

Thanks, Peter and Prof. Ripley, for your helpful replies.

Referring to Prof. Ripley's reply, when I do

f3 <- function(a) substitute(function(x) a*x, list(a = a))
f <- lapply(1:4, f3)[[1]]

then f is not a function:

> is.function(f)
[1] FALSE

but 

> is.function(eval(f))
[1] TRUE

Consistently, if I do

f4 <- function(a) eval(substitute(function(x) a*x, list(a = a)))
g <- lapply(1:4, f4)[[1]]

then g is indeed a function:

> is.function(g)
[1] TRUE

I do still not understand what f is, then, except something that evaluates
to a function. My conclusion is that I need to start my head, too, and
understand this lazy evaluation.

Thanks again. Cheers,

Uffe



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Uffe H. Thygesen, M.Sc.&Eng., Ph.D.
Danish Institute of Fisheries Research
http://www.dfu.min.dk


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bitwrit at ozemail.com.au  Wed Oct 10 13:33:39 2001
From: bitwrit at ozemail.com.au (Jim Lemon)
Date: Wed, 10 Oct 2001 21:33:39 +1000
Subject: [R] JPEG from graphs problem
References: <200110091742.MAA08408@uhddx01.dt.uh.edu>
Message-ID: <3BC43212.8C8F3E91@ozemail.com.au>

Erin Hodgess wrote:
> 
> ...I produce a graph, and save it as a JPEG file.
> Then, when I try to look at it via the Windows Explorer,
> I get an error message from the Microsoft Photo  program
> of an Unknown File format.
> 
Uwe's answer may contain a clue - make sure that the file extension is
jpg. IE tends to fail on graphic file display if it can't work out the
encoding.

Jim
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Wed Oct 10 13:34:59 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Oct 2001 13:34:59 +0200
Subject: [R] Weird feature when creating function lists with apply
In-Reply-To: <5483FBA06695D511AB2900B0D079FB3C1169FF@hfi02.dfu.min.dk>
References: <5483FBA06695D511AB2900B0D079FB3C1169FF@hfi02.dfu.min.dk>
Message-ID: <x21ykbohi4.fsf@blueberry.kubism.ku.dk>

Uffe H?gsbro Thygesen <uht at dfu.min.dk> writes:

> Thanks, Peter and Prof. Ripley, for your helpful replies.
> 
> Referring to Prof. Ripley's reply, when I do
> 
> f3 <- function(a) substitute(function(x) a*x, list(a = a))
> f <- lapply(1:4, f3)[[1]]
> 
> then f is not a function:
> 
> > is.function(f)
> [1] FALSE
> 
> but 
> 
> > is.function(eval(f))
> [1] TRUE
...
> I do still not understand what f is, then, except something that evaluates
> to a function. My conclusion is that I need to start my head, too, and
> understand this lazy evaluation.

This part is not about lazy evaluation. This is because substitute
returns an object of mode "call", sometimes called an "unevaluated
expression", (which is a bit unfortunate because there is also an
"expression" mode, of which it is not...)

You could try picking it apart:
> f[[1]]
function
> f[[2]]
$x


> f[[3]]
1 * x
> f[[3]][[1]]
*
[..etc..]

> g <- eval(f)
> g
function(x) a*x

!!! Now *that* is truly weird.... The "source" atribute for g is
getting set, seemingly out of nowhere, to something that should not be
part of f. (This is a bug, but some nasty trickery is involved in
these matters and if might be difficult to fix.)

However if we clear
> attributes(g)<-NULL
> g
function (x) 
1 * x

you can see that g is the actual function, not the call to the
function creator.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From anne.morgenstern at gmx.de  Wed Oct 10 13:53:49 2001
From: anne.morgenstern at gmx.de (Anne Morgenstern)
Date: Wed, 10 Oct 2001 13:53:49 +0200 (MEST)
Subject: [R] What kind of test in summary(glm)?
Message-ID: <21037.1002714829@www22.gmx.net>

Hello R Users,

when I use summary(glm) for a logistic regression model with logit as link
function I get one column "z value". What kind of test does R use? (I would
have expected a t-test).

Thanks, Anne

-- 
GMX - Die Kommunikationsplattform im Internet.
http://www.gmx.net

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Oct 10 14:14:43 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 10 Oct 2001 13:14:43 +0100 (BST)
Subject: [R] What kind of test in summary(glm)?
In-Reply-To: <21037.1002714829@www22.gmx.net>
Message-ID: <Pine.LNX.4.31.0110101304330.5811-100000@gannet.stats>

On Wed, 10 Oct 2001, Anne Morgenstern wrote:

> Hello R Users,
>
> when I use summary(glm) for a logistic regression model with logit as link
> function I get one column "z value". What kind of test does R use? (I would
> have expected a t-test).

It's not doing a test at all.  It is reporting a z value, the coefficient
divided by the estimated standard error.  Now although that is often
called a `t value', it is not for a GLM (except in special cases)
t-distributed under the null hypothesis.  If you mean that you used
glm(family=binomial), the scale is not estimated and the relevant
asymptotic theory suggests a normal distribution.  However, that can be
rather misleading.  Under glm(family=pseudobinomial) the scale is
estimated, but there is no really relevant theory (as you have a
quasi-likelihood model) suggesting a t distribution.

If you want to test, use anova.glm not the Wald statistic given by the
`z value', because of the Hauck-Donner effect.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mela at duke.edu  Wed Oct 10 14:16:48 2001
From: mela at duke.edu (carl mela)
Date: Wed, 10 Oct 2001 08:16:48 -0400
Subject: [R] R Memory Issues
Message-ID: <3BC43C30.E456FB48@duke.edu>

I am running R code (version 1.3.1) on a PC with 650 Mb of RAM, and
after a number of iterations of the code (each iteraction corresponds to
a set of draws in an MCMC algorithm), the program runs out of memory
(however, the number of iterations before the code runs out of memory is
quite variable).

After each iteration in the code, I run the following lines to ascertain
the memory demanded by R:

z_sapply(ls(), function(x) object.size(get(x)))
totmem_sum(as.matrix(rev(z)))
print ("totmem")
print (totmem)

Interestingly, the total size of all of the objects does not increase
with each iteration, as the objects are overwritten from iteration to
iteration.  So, for some reason R is consuming more memory each
iteration, even though the objects do not increase in size.  I have even
tried to issue a gc() command after each iteration, but this does not
help.

I would appreciate any advice from those on this list-serv regarding how
to solve this problem.  Thanks.

--
Carl F. Mela
Associate Professor of Marketing
Fuqua School of Business
Duke University
134 Tower View Drive, Box 90120
Durham, North Carolina 27708-9012
Phone: 919-660-7767
Fax: 919-681-6245
Email: mela at duke.edu
Web: http://faculty.fuqua.duke.edu/~mela/bio

-------------- next part --------------
A non-text attachment was scrubbed...
Name: mela.vcf
Type: text/x-vcard
Size: 381 bytes
Desc: Card for carl mela
Url : https://stat.ethz.ch/pipermail/r-help/attachments/20011010/086624e2/mela.vcf

From ripley at stats.ox.ac.uk  Wed Oct 10 14:32:01 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 10 Oct 2001 13:32:01 +0100 (BST)
Subject: [R] R Memory Issues
In-Reply-To: <3BC43C30.E456FB48@duke.edu>
Message-ID: <Pine.LNX.4.31.0110101324490.5811-100000@gannet.stats>

On Wed, 10 Oct 2001, carl mela wrote:

> I am running R code (version 1.3.1) on a PC with 650 Mb of RAM, and
> after a number of iterations of the code (each iteraction corresponds to
> a set of draws in an MCMC algorithm), the program runs out of memory
> (however, the number of iterations before the code runs out of memory is
> quite variable).
>
> After each iteration in the code, I run the following lines to ascertain
> the memory demanded by R:
>
> z_sapply(ls(), function(x) object.size(get(x)))
> totmem_sum(as.matrix(rev(z)))
> print ("totmem")
> print (totmem)
>
> Interestingly, the total size of all of the objects does not increase
> with each iteration, as the objects are overwritten from iteration to
> iteration.  So, for some reason R is consuming more memory each
> iteration, even though the objects do not increase in size.  I have even
> tried to issue a gc() command after each iteration, but this does not
> help.

There are much better ways to see the real memory usage. gc() for a start,
and on Windows see ?memory.size.

You may well be suffering from the way Windows manages memory: it is
entirely possible that it is not running out of memory, just fragmenting
it so it cannot allocate the chunks you want.

I suggest you re-compile R reserving a much larger initial chunk of memory
(RESERVED_SIZE in src/gnuwin32/malloc.c: set it above your RAM size) and
see if this helps.

> I would appreciate any advice from those on this list-serv regarding how
> to solve this problem.  Thanks.

Next time please report exactly what messages you got!

>
> --
> Carl F. Mela
> Associate Professor of Marketing
> Fuqua School of Business
> Duke University
> 134 Tower View Drive, Box 90120
> Durham, North Carolina 27708-9012
> Phone: 919-660-7767
> Fax: 919-681-6245
> Email: mela at duke.edu
> Web: http://faculty.fuqua.duke.edu/~mela/bio
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fharrell at virginia.edu  Wed Oct 10 14:48:10 2001
From: fharrell at virginia.edu (Frank E Harrell Jr)
Date: Wed, 10 Oct 2001 08:48:10 -0400
Subject: [R] What kind of test in summary(glm)?
References: <Pine.LNX.4.31.0110101304330.5811-100000@gannet.stats>
Message-ID: <3BC4438A.2B0E7FCB@virginia.edu>

To go a bit farther, simulations have shown that a t
distribution is inappropriate because it is overly
conservative (due to not having to estimate sigma).
P-values using the normal distribution are more
accurate than those from t.

As Brian noted, the Hauck-Donner effect can ruin
Wald statistics.  When a variable does not have
a dominating effect (i.e., when there is no cell
containing less than perhaps two observations
but this depends on N) Wald stats work reasonably
well.

Frank Harrell


Prof Brian Ripley wrote:
> 
> On Wed, 10 Oct 2001, Anne Morgenstern wrote:
> 
> > Hello R Users,
> >
> > when I use summary(glm) for a logistic regression model with logit as link
> > function I get one column "z value". What kind of test does R use? (I would
> > have expected a t-test).
> 
> It's not doing a test at all.  It is reporting a z value, the coefficient
> divided by the estimated standard error.  Now although that is often
> called a `t value', it is not for a GLM (except in special cases)
> t-distributed under the null hypothesis.  If you mean that you used
> glm(family=binomial), the scale is not estimated and the relevant
> asymptotic theory suggests a normal distribution.  However, that can be
> rather misleading.  Under glm(family=pseudobinomial) the scale is
> estimated, but there is no really relevant theory (as you have a
> quasi-likelihood model) suggesting a t distribution.
> 
> If you want to test, use anova.glm not the Wald statistic given by the
> `z value', because of the Hauck-Donner effect.
> 
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From john.janmaat at acadiau.ca  Wed Oct 10 14:55:25 2001
From: john.janmaat at acadiau.ca (John Janmaat)
Date: Wed, 10 Oct 2001 09:55:25 -0300
Subject: [R] Getting characters from integers
References: <5483FBA06695D511AB2900B0D079FB3C1169FD@hfi02.dfu.min.dk> <x2adyzomzk.fsf@blueberry.kubism.ku.dk>
Message-ID: <3BC4453D.94ACB0E0@acadiau.ca>

Hello All,

I am creating a graph in a loop, and want to use letters for marking
symbols.  Is there a function to convert an integer into a character.  I
am looking for something similar to the ASC() function of good old
BASIC, or the (char) type conversion of C.

Thanks,

John.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Wed Oct 10 15:07:22 2001
From: ben at zoo.ufl.edu (Ben Bolker)
Date: Wed, 10 Oct 2001 09:07:22 -0400 (EDT)
Subject: [R] Getting characters from integers
In-Reply-To: <3BC4453D.94ACB0E0@acadiau.ca>
Message-ID: <Pine.LNX.4.30.0110100905590.13396-100000@bolker.zoo.ufl.edu>


  LETTERS or letters might do what you want; they are character vectors
containing the (upper- or lowercase) alphabet.  (If they didn't exist you
could create them ...)



On Wed, 10 Oct 2001, John Janmaat wrote:

> Hello All,
>
> I am creating a graph in a loop, and want to use letters for marking
> symbols.  Is there a function to convert an integer into a character.  I
> am looking for something similar to the ASC() function of good old
> BASIC, or the (char) type conversion of C.
>
> Thanks,
>
> John.
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker at zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From J.B.Bremnes at dnmi.no  Wed Oct 10 16:07:52 2001
From: J.B.Bremnes at dnmi.no (John Bjornar Bremnes)
Date: Wed, 10 Oct 2001 14:07:52 +0000
Subject: [R] .Fortran()
References: <Pine.LNX.4.31.0110091800420.4807-100000@gannet.stats>
Message-ID: <3BC45638.F5717AF2@dnmi.no>

Prof Brian Ripley wrote:
> 
> On Tue, 9 Oct 2001, John Bjornar Bremnes wrote:
> 
> > Prof Brian Ripley wrote:
> > >
> > > On Tue, 9 Oct 2001, John Bjornar Bremnes wrote:
> > >
> > > > Prof Brian Ripley wrote:
> > > > >
> > > > > On Mon, 8 Oct 2001, John Bjornar Bremnes wrote:
> > > > >
> > > > > > I am trying to call some Fortran subroutines using .Fortran(). These
> > > > > > subroutines have arguments of type 'character', 'real', 'integer', and
> > > > > > 'integer*2'. Is it impossible to call  subroutines expecting both
> > > > > > 'character' and 'real' as input?
> > > > >
> > > > > No, but it is impossible to call those expecting 'integer*2'
> > > >
> > > > Ok, it seems that I can easily avoid using 'integer*2'
> > > >
> > > > > See ?.Foreign for what is supported, and note the comments there about
> > > > > character types: they work on some compilers and not on others.
> > > >
> > > > Is g77 one of those where it does not work? I use R-1.3.0 on linux (PC).
> > >
> > > A properly working version of g77 should work on some platforms (including
> > > Linux), but not others (including Windows).
> > >
> > > > I have tried the following simple example:
> > > >
> > > >       subroutine mysub(filein, m, x, n)
> > > > c
> > > >       integer        m, n, i
> > > >       character*255  filein
> > > >       real           x(n)
> > > > c
> > > >       write(6,*) 'file: ', filein(1:m)
> > > >       do i=1,n
> > > >          x(i) = sqrt(1.0*i)
> > > >       enddo
> > > >       end
> > > >
> > > > % R CMD SHLIB mysub.f 
> > > > g77   -fPIC  -g -O2 -c mysub.f -o mysub.o
> > > > gcc -shared  -o mysub.so mysub.o -L/usr/local/lib -lg2c -lm
> > > > -L/usr/local/lib -L. -L/usr/lib/gcc-lib/i386-linux/2.95.2 -lm
> > > >
> > > > > dyn.load("mysub.so")
> > > > > .Fortran( "mysub", as.character("myfile"), as.integer(6), as.single(rep(0,10)), as.integer(10), DUP=T )
> > > >  file: myfile
> > > > Segmentation fault (core dumped)
> > >
> > > That works for me (RH6.2, gcc 3.0.1, R 1.3.1).
> > >  file: myfile
> > > [[1]]
> > > [1] "myfile"
> > >
> > > [[2]]
> > > [1] 6
> > >
> > > [[3]]
> > >  [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751 2.828427
> > >  [9] 3.000000 3.162278
> > > attr(,"Csingle")
> > > [1] TRUE
> > >
> > > [[4]]
> > > [1] 10
> > >
> > > BTW, no one said Fortran I/O would work, and it sometimes is a problem.
> > >
> > > > % R
> > > > > dyn.load("mysub.so")
> > > > > .Fortran( "mysub", as.character("myfile"), as.integer(6), as.single(rep(0,10)), as.integer(10), DUP=F )
> > > > Error: character variables must be duplicated in .C/.Fortran
> > >
> > > > Any comments?
> > >
> > > Do you have one of the many broken Linux versions of g77?
> > >
> >
> > I have now tried versions 2.95.2 and 3.0 with no success. I will ask my
> > system administrator to install the latest gcc version (3.0.1?). Maybe I
> > should update R to 1.3.1 also. BTW where is the default compiler options
> > set for 'R CMD SHLIB'?
> 
> From the configure script, in etc/Makeconf.
> 
> I doubt if 3.0.1 would help much over 3.0.  It's puzzling though.
> 
> > In
> > "Writing R Extensions" on page 23 it says "It is not possible to pass
> > numeric vectors as float * or REAL if DUP=TRUE". It should be DUP=FALSE,
> > or?
> 
> It should be FALSE, and I've jut fixed it, thanks.

You were right about gcc 3.0.1 - it did not help. 

I then installed R-1.3.1 on a computer running a RH 7.? distribution of
linux with gcc 2.96 and it worked! All my previous tests were on a
Debian distribution. My system administrator thinks the problems may be
related to libc. The debian system use version 2.2.3 of this library and
RH 2.1.9 (if I remember correctly).

I will try out more complex Fortran subroutines (which work fine using
Splus 5.1 on irix 6.5) on the RH system.


thanks again
John Bjornar Bremnes
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bates at stat.wisc.edu  Wed Oct 10 16:09:38 2001
From: bates at stat.wisc.edu (Douglas Bates)
Date: 10 Oct 2001 09:09:38 -0500
Subject: [R] PROC MIXED user trying to use (n)lme...
In-Reply-To: <001601c15110$a48fd220$081114ac@agrsci.dk>
References: <001601c15110$a48fd220$081114ac@agrsci.dk>
Message-ID: <6r4rp737tp.fsf@franz.stat.wisc.edu>

S?ren H?jsgaard <sorenh at mail.dk> writes:

> Coming from a proc mixed (SAS) background I am trying to get into
> the use of (n)lme.

You may want to check the package SASmixed which provides lme analyses
for several of the examples in the book "SAS System for Mixed Models"
by Littel, Milliken, Stroup and Wolfinger.  Studying those examples
done in both PROC MIXED and lme can ease the transition.

> In this connection, I have some (presumably stupid) questions
> which I am sure someone out there can answer:
> 
> 1) With proc mixed it is easy to get a hold on the estimated
> variance parameters as they can be put out into a SAS data set.
> How do I do the same with lme-objects? For example, I can see the
> estimated variance matrix when typing the name of the lme-object,
> but that does not give me a "handle" on the matrix.

The VarCorr function returns a table of variance estimates, the
corresponding standard deviations, and the estimated correlations.
The value of VarCorr is a character matrix, not a numeric matrix.  If
you want the numeric matrix you need to do a bit of digging.  The
fitted model contains a "modelStruct" component which, in turn,
contains an "reStruct" component.  Each element of the reStruct can be
converted to a scaled variance-covariance matrix by as.matrix.  To
remove the scaling you need to multiply by sigma^2.  This is shown below.

 > library(nlme)
 Loading required package: nls 
 > data(Oxboys)
 > fm1 <- lme(height ~ age, data = Oxboys)
 > VarCorr(fm1)
 Subject = pdSymm(age) 
             Variance   StdDev   Corr  
 (Intercept) 65.3038110 8.081077 (Intr)
 age          2.8248080 1.680717 0.641 
 Residual     0.4354534 0.659889       
 > str(VarCorr(fm1))
  chr [1:3, 1:3] "65.3038110" " 2.8248080" " 0.4354534" "8.081077" ...
  - attr(*, "dimnames")=List of 2
   ..$ : chr [1:3] "(Intercept)" "age" "Residual"
   ..$ : chr [1:3] "Variance" "StdDev" "Corr"
  - attr(*, "title")= chr "Subject = pdSymm(age)"
  - attr(*, "class")= chr "VarCorr.lme"
 > lapply(lapply(fm1$modelStruct$reStruct, as.matrix), function(x) x * fm1$sigma^2)
 $Subject
             (Intercept)      age
 (Intercept)   65.303811 8.709806
 age            8.709806 2.824808

> 2) I am trying to fit a mixed model, say
> 
>     y_{ij} = X_{ij}\beta + U_i + e_{ij}
> 
> where Y_{ij}, U_i and e_{ij} all are D-dimensional, and U_i ~
> N_D(0,G), and e_{ij} ~ N(0,R). This is easy to do in proc mixed by
> including a factor keeping track of how the elements of y_{ij} are
> "stacked" on top of each other. This factor is then used in the
> model, the random and the repeated statements. In the book by
> Pinheiro and Bates (p.28 ff) there is a similar example. Yet, I
> don't quite get the "generality" of the example. Can anyone help
> with that?

I don't happen to have our book handy (I'm writing this from Belgium
where I am attending a conference) so I can't reply regarding the
example on p. 28.  In general the random statement in PROC MIXED is
easy to translate into nlme.  The repeated statement isn't.

The basic approach in lme is to define one or more factors that
represent the grouping of the observations.  In the example above the
data contain the information that the grouping is by the "Subject"
factor

 > formula(Oxboys)
 height ~ age | Subject

A full specification of the model in fm1 is
 > fm2 <- lme(fixed = height ~ age, data = Oxboys, random = ~ age | Subject)
 > VarCorr(fm2)
 Subject = pdLogChol(age) 
             Variance   StdDev   Corr  
 (Intercept) 65.3038159 8.081078 (Intr)
 age          2.8248081 1.680717 0.641 
 Residual     0.4354534 0.659889       

so the index i (or perhaps ij?) in your notation corresponds to the
levels of Subject.  We tend to express the model in the Laird-Ware
notation of a vector of responses y_i for the i'th subject along with
model matrices X_i and Z_i and a random within-subject noise vector
eps_i.  This gives y_i = X_i \beta + Z_i b_i + eps_i I'm not sure how
that correponds to your U_i in that I don't see a model matrix
associated with U_i.

It happens that I am giving a presentation on "Mixed-effects Models in
Practice" here in Belgium.  I put the slides in PDF format on
http://nlme.stat.wisc.edu/BSS2001.pdf (A4 sized) and as "4-up" copies
(USletter sized) on http://nlme.stat.wisc.edu/BSS2001_4up.pdf.  Those
slides contain examples of the model matrices associated with this
example.

> 3) With proc mixed it is easy to specify that some covariance
> parameters are known (fixed) in advance. How can I do the same
> with lme? (To be specific, I would like to specify that the
> elements of R in the example above are known).

You need to check for the available correlation structures in the
corStruct family and what their arguments are.  If your correlation
structure is not among those listed you would need to code it.

I hope this helps.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From murdoch at stats.uwo.ca  Wed Oct 10 16:22:48 2001
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Wed, 10 Oct 2001 10:22:48 -0400
Subject: [R] Getting characters from integers
In-Reply-To: <3BC4453D.94ACB0E0@acadiau.ca>
References: <5483FBA06695D511AB2900B0D079FB3C1169FD@hfi02.dfu.min.dk> <x2adyzomzk.fsf@blueberry.kubism.ku.dk> <3BC4453D.94ACB0E0@acadiau.ca>
Message-ID: <6ul8st8pnbo1bnr95va7eks53cjsro82ha@4ax.com>

On Wed, 10 Oct 2001 09:55:25 -0300, you wrote in message
<3BC4453D.94ACB0E0 at acadiau.ca>:

>Hello All,
>
>I am creating a graph in a loop, and want to use letters for marking
>symbols.  Is there a function to convert an integer into a character.  I
>am looking for something similar to the ASC() function of good old
>BASIC, or the (char) type conversion of C.

There are the letters and LETTERS vectors.  For example,

 > letters[1:3]
 [1] "a" "b" "c"

I don't think there's any function that does general ASCII
conversions, but you could fairly easily enter your own vector of
characters if letters aren't sufficient.  I imagine you'll have a hard
time entering a null character.  If you're on some platforms, you
could write your own general typecasting function using a fifo, but
those aren't supported everywhere.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tiefenbacher at slf.ch  Wed Oct 10 16:31:28 2001
From: tiefenbacher at slf.ch (Felix Tiefenbacher)
Date: Wed, 10 Oct 2001 16:31:28 +0200
Subject: [R] Importing many files
Message-ID: <3BC45BC0.2334E2CD@slf.ch>

Hello Cracks,

we want to import 10 x 365 files containing each 7 variables with 1211
rows. The filenames end with numbers from 1 to 365. We tried a for loop
to import using read.table but we couldn't create the r objects within
the loop. We want each file in an own r-objekt (matrix).

Does anyone know what can be done?

Thanks, Felix

--

Felix Tiefenbacher

Eidg. Institut f?r Schnee- und Lawinenforschung
Abteilung: Lawinendynamik
Fl?elastrasse 11
CH-7260 Davos Dorf

Tel: +41 (0)81/417 02 53
Fax: +41 (0)81/417 01 10



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jniesch at gwdg.de  Wed Oct 10 17:19:44 2001
From: jniesch at gwdg.de (Jens Nieschulze)
Date: Wed, 10 Oct 2001 17:19:44 +0200 (MET DST)
Subject: [R] Importing many files
In-Reply-To: <3BC45BC0.2334E2CD@slf.ch>
Message-ID: <Pine.SO4.4.10.10110101654030.18695-100000@ufobi7.uni-forst.gwdg.de>

On Wed, 10 Oct 2001, Felix Tiefenbacher wrote:

> Hello Cracks,
> 
> we want to import 10 x 365 files containing each 7 variables with 1211
> rows. The filenames end with numbers from 1 to 365. We tried a for loop
> to import using read.table but we couldn't create the r objects within
> the loop. We want each file in an own r-objekt (matrix).
> 
> Does anyone know what can be done?
there has been a similar question around August 13
you should look up the mail archive
and/or have a look at list.files()

if you want to do it "manually"
have a look at paste() and assign()

I tried it once as in

for(k in 1:4){
xx<-paste("jens",k,".txt",sep="")
 assign(paste("jens",k,sep=""),read.table(xx,sep=","))
}

have you thought of storing the files in a database and accessing them
from within R?

	Jens

> 
> Thanks, Felix
> 
> --
> 
> Felix Tiefenbacher
> 
> Eidg. Institut fr Schnee- und Lawinenforschung
> Abteilung: Lawinendynamik
> Flelastrasse 11
> CH-7260 Davos Dorf
> 
> Tel: +41 (0)81/417 02 53
> Fax: +41 (0)81/417 01 10
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

***********************************************************************
Jens Nieschulze

Institute for Forest Biometrics &	Phone: ++49-551-39-12107
Applied Computer Science		Fax  : ++49-551-39-3465
Buesgenweg 4
37077 Goettingen		E-mail: jniesch at uni-forst.gwdg.de
GERMANY				http://www.uni-forst.gwdg.de/~jniesch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jonathan_li at agilent.com  Wed Oct 10 20:43:46 2001
From: jonathan_li at agilent.com (jonathan_li@agilent.com)
Date: Wed, 10 Oct 2001 11:43:46 -0700
Subject: [R] How to comment out multiple lines in R source code?
Message-ID: <FC0B9DA2600ED4118F76009027AA5DDD02B27AE0@ALEX2>

Hi,

Is there a way to comment out multiple lines at once in R source code like C
language's /* */ struct? 
This is quite useful when one is testing different sections of a source
code. 

Thanks,
Jonathan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rossini at blindglobe.net  Wed Oct 10 20:55:07 2001
From: rossini at blindglobe.net (A.J. Rossini)
Date: 10 Oct 2001 11:55:07 -0700
Subject: [R] How to comment out multiple lines in R source code?
In-Reply-To: <FC0B9DA2600ED4118F76009027AA5DDD02B27AE0@ALEX2>
References: <FC0B9DA2600ED4118F76009027AA5DDD02B27AE0@ALEX2>
Message-ID: <87n12z72b8.fsf@jeeves.blindglobe.net>

>>>>> "jl" == jonathan li <jonathan_li at agilent.com> writes:

    jl> Hi, Is there a way to comment out multiple lines at once in R
    jl> source code like C language's /* */ struct? This is quite
    jl> useful when one is testing different sections of a source
    jl> code.

One alternative is to use editor macros for this.

(X)Emacs, when using ESS, supports comment-region and uncomment-region
commands.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini at u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini at scharp.org
-------- (fridays are probably at Rosen) --------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   T-Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From saikat at stat.wisc.edu  Wed Oct 10 21:14:33 2001
From: saikat at stat.wisc.edu (Saikat DebRoy)
Date: 10 Oct 2001 14:14:33 -0500
Subject: [R] more on paste and bug
In-Reply-To: <x28zek6gac.fsf@blueberry.kubism.ku.dk>
References: <Pine.LNX.4.33.0110091446420.10293-100000@ecopc15.eco.au.dk>
	<x28zek6gac.fsf@blueberry.kubism.ku.dk>
Message-ID: <qxplmijnw86.fsf@verdi.stat.wisc.edu>

>>>>> "Peter" == Peter Dalgaard BSA <p.dalgaard at biostat.ku.dk> writes:

  Peter> Ott Toomet <siim at obs.ee> writes:
  >> Hi,
  >> 
  >> dput( ce0) gives a correct answer: > dput( ce0) c("1985", "9",
  >> "2", "2", "1", "A", "1", "", "NA", "5", "1999" )
  >> 
  >> The same does just print( ce0): > print( ce0) [1] "1985" "9" "2"
  >> "2" "1" "A" "1" "" "NA" "5" [11] "1999"
  >> 
  >> However, if I make a new similar vector ce0a: > ce0a <- c(
  >> 1985,9,2,2,1,"A",1,"",NA,5,1999)
  >> 
  >> Then the paste works correctly: > paste( ce0a, m, sep="",
  >> collapse="") [1]
  >> "1985<1>9<2>2<3>2<4>1<5>A<6>1<7><8>NA<9>5<0>1999END"
  >> 
  >> I had M as > m [1] "<1>" "<2>" "<3>" "<4>" "<5>" "<6>" "<7>"
  >> "<8>" "<9>" "<0>" "END"
  >> 
  >> So I have two apparently similar vectors which behave differently
  >> with paste: > paste( ce0a, m, sep="", collapse="") [1]
  >> "1985<1>9<2>2<3>2<4>1<5>A<6>1<7><8>NA<9>5<0>1999END" > paste(
  >> ce0, m, sep="", collapse="") [1]
  >> "1985<1>9<2>2<3>2<4>1<5>A1<7>NA<9>5<0>1999END" > ce0a [1] "1985"
  >> "9" "2" "2" "1" "A" "1" "" "NA" "5" [11] "1999" > ce0 [1] "1985"
  >> "9" "2" "2" "1" "A" "1" "" "NA" "5" [11] "1999"
  >> 
  >> I suggest there can be some hidden attributes somewhere in ce0
  >> which I have not noticed (there seem not to be factors), the
  >> problem seems to arise with the non-numerical columns (ce0 is
  >> just part of one row of the big dataframe).  Is it possible to
  >> figure it out, and possible change?  At least attributes() do
  >> show nothing: > attributes(ce0) NULL > attributes(ce0a) NULL

  Peter> Hmmm. The plot would seem to thicken around the entries in
  Peter> ce0 corresponding to <6> and <8>. If these accidentally
  Peter> contain \0 characters, much would be explained. Maybe also
  Peter> other weird characters.

As it happens, I think the problem is in the read.dta code. The relevant
piece of code is in foreign/src/stataread.c (lines 317-324):

	    default:
	        charlen=INTEGER(types)[j]-STATA_STRINGOFFSET;
	        PROTECT(tmp=allocString(charlen+1));
		InStringBinary(fp,charlen,CHAR(tmp));
		CHAR(tmp)[charlen]=0;
		SET_STRING_ELT(VECTOR_ELT(df,j),i,tmp);
		UNPROTECT(1);
	      break;

As it happens, in this case the string "A" is written in the file
as two bytes (I do not not know why) with the second byte being '\0'.
So the above code creates a CHARSXP of length 3 with last two bytes
being '\0'.

  Peter> What happens if you do nchar(ce0) ?  What if you omit the
  Peter> collapse= argument?

nchar uses strlen - so it would return the length as 1.

By the way, by looking at the code for mkChar and paste, it seems that
R is _not_ storing null terminated strings - mkChar only allocates
storage for strlen(name) and not strlen(name)+1 and paste uses LENGTH
to get the string length. At the same time strlen is used in
do_nchar. Could there be a potential problem here? Maybe you should
use strnlen in do_nchar?

Saikat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From luke at nokomis.stat.umn.edu  Wed Oct 10 21:28:39 2001
From: luke at nokomis.stat.umn.edu (Luke Tierney)
Date: Wed, 10 Oct 2001 14:28:39 -0500
Subject: [R] more on paste and bug
In-Reply-To: <qxplmijnw86.fsf@verdi.stat.wisc.edu>; from saikat@stat.wisc.edu on Wed, Oct 10, 2001 at 02:14:33PM -0500
References: <Pine.LNX.4.33.0110091446420.10293-100000@ecopc15.eco.au.dk> <x28zek6gac.fsf@blueberry.kubism.ku.dk> <qxplmijnw86.fsf@verdi.stat.wisc.edu>
Message-ID: <20011010142839.B20168@nokomis.stat.umn.edu>

On Wed, Oct 10, 2001 at 02:14:33PM -0500, Saikat DebRoy wrote:
> >>>>> "Peter" == Peter Dalgaard BSA <p.dalgaard at biostat.ku.dk> writes:
> 
>   Peter> Ott Toomet <siim at obs.ee> writes:
>   >> Hi,
>   >> 
>   >> dput( ce0) gives a correct answer: > dput( ce0) c("1985", "9",
>   >> "2", "2", "1", "A", "1", "", "NA", "5", "1999" )
>   >> 
>   >> The same does just print( ce0): > print( ce0) [1] "1985" "9" "2"
>   >> "2" "1" "A" "1" "" "NA" "5" [11] "1999"
>   >> 
>   >> However, if I make a new similar vector ce0a: > ce0a <- c(
>   >> 1985,9,2,2,1,"A",1,"",NA,5,1999)
>   >> 
>   >> Then the paste works correctly: > paste( ce0a, m, sep="",
>   >> collapse="") [1]
>   >> "1985<1>9<2>2<3>2<4>1<5>A<6>1<7><8>NA<9>5<0>1999END"
>   >> 
>   >> I had M as > m [1] "<1>" "<2>" "<3>" "<4>" "<5>" "<6>" "<7>"
>   >> "<8>" "<9>" "<0>" "END"
>   >> 
>   >> So I have two apparently similar vectors which behave differently
>   >> with paste: > paste( ce0a, m, sep="", collapse="") [1]
>   >> "1985<1>9<2>2<3>2<4>1<5>A<6>1<7><8>NA<9>5<0>1999END" > paste(
>   >> ce0, m, sep="", collapse="") [1]
>   >> "1985<1>9<2>2<3>2<4>1<5>A1<7>NA<9>5<0>1999END" > ce0a [1] "1985"
>   >> "9" "2" "2" "1" "A" "1" "" "NA" "5" [11] "1999" > ce0 [1] "1985"
>   >> "9" "2" "2" "1" "A" "1" "" "NA" "5" [11] "1999"
>   >> 
>   >> I suggest there can be some hidden attributes somewhere in ce0
>   >> which I have not noticed (there seem not to be factors), the
>   >> problem seems to arise with the non-numerical columns (ce0 is
>   >> just part of one row of the big dataframe).  Is it possible to
>   >> figure it out, and possible change?  At least attributes() do
>   >> show nothing: > attributes(ce0) NULL > attributes(ce0a) NULL
> 
>   Peter> Hmmm. The plot would seem to thicken around the entries in
>   Peter> ce0 corresponding to <6> and <8>. If these accidentally
>   Peter> contain \0 characters, much would be explained. Maybe also
>   Peter> other weird characters.
> 
> As it happens, I think the problem is in the read.dta code. The relevant
> piece of code is in foreign/src/stataread.c (lines 317-324):
> 
> 	    default:
> 	        charlen=INTEGER(types)[j]-STATA_STRINGOFFSET;
> 	        PROTECT(tmp=allocString(charlen+1));
> 		InStringBinary(fp,charlen,CHAR(tmp));
> 		CHAR(tmp)[charlen]=0;
> 		SET_STRING_ELT(VECTOR_ELT(df,j),i,tmp);
> 		UNPROTECT(1);
> 	      break;
> 
> As it happens, in this case the string "A" is written in the file
> as two bytes (I do not not know why) with the second byte being '\0'.
> So the above code creates a CHARSXP of length 3 with last two bytes
> being '\0'.
> 
>   Peter> What happens if you do nchar(ce0) ?  What if you omit the
>   Peter> collapse= argument?
> 
> nchar uses strlen - so it would return the length as 1.
> 
> By the way, by looking at the code for mkChar and paste, it seems that
> R is _not_ storing null terminated strings - mkChar only allocates
> storage for strlen(name) and not strlen(name)+1 and paste uses LENGTH
> to get the string length. At the same time strlen is used in
> do_nchar. Could there be a potential problem here? Maybe you should
> use strnlen in do_nchar?
> 

It's OK--mkChar calls allocString, which calls allocVector(CHARSXP, n)
which does size = BYTE2VEC(length + 1) -- that is where the space for
the null gets tacked on.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke at stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Wed Oct 10 21:45:18 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Wed, 10 Oct 2001 12:45:18 -0700 (PDT)
Subject: [R] more on paste and bug
In-Reply-To: <qxplmijnw86.fsf@verdi.stat.wisc.edu>
Message-ID: <Pine.A41.4.33.0110101240040.169778-100000@homer07.u.washington.edu>

On 10 Oct 2001, Saikat DebRoy wrote:
> As it happens, I think the problem is in the read.dta code. The relevant
> piece of code is in foreign/src/stataread.c (lines 317-324):
>
> 	    default:
> 	        charlen=INTEGER(types)[j]-STATA_STRINGOFFSET;
> 	        PROTECT(tmp=allocString(charlen+1));
> 		InStringBinary(fp,charlen,CHAR(tmp));
> 		CHAR(tmp)[charlen]=0;
> 		SET_STRING_ELT(VECTOR_ELT(df,j),i,tmp);
> 		UNPROTECT(1);
> 	      break;
>
> As it happens, in this case the string "A" is written in the file
> as two bytes (I do not not know why) with the second byte being '\0'.
> So the above code creates a CHARSXP of length 3 with last two bytes
> being '\0'.
>

It happens because Stata treats strings as a fixed-length type, padded on
the right with nulls.  I didn't realise that R would incorporate trailing
nulls into the string.

It's easily fixed by just reading into a buffer and using strlen before
allocString.

It might be a bug that the LENGTH() of a string can be longer than its
strlen, though

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gb at stat.umu.se  Wed Oct 10 21:58:59 2001
From: gb at stat.umu.se (=?iso-8859-1?Q?G=F6ran_Brostr=F6m?=)
Date: Wed, 10 Oct 2001 21:58:59 +0200 (CEST)
Subject: [R] How to comment out multiple lines in R source code?
In-Reply-To: <87n12z72b8.fsf@jeeves.blindglobe.net>
Message-ID: <Pine.LNX.4.33.0110102156450.5878-100000@tal.stat.umu.se>

On 10 Oct 2001 rossini at blindglobe.net wrote:

> >>>>> "jl" == jonathan li <jonathan_li at agilent.com> writes:
>
>     jl> Hi, Is there a way to comment out multiple lines at once in R
>     jl> source code like C language's /* */ struct? This is quite
>     jl> useful when one is testing different sections of a source
>     jl> code.
>
> One alternative is to use editor macros for this.
>
> (X)Emacs, when using ESS, supports comment-region and uncomment-region
> commands.
>
> best,
> -tony

You may also try

if (FALSE){
...
...
}

G?ran

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gregory_r_warnes at groton.pfizer.com  Thu Oct 11 01:31:39 2001
From: gregory_r_warnes at groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 10 Oct 2001 19:31:39 -0400
Subject: FW: [R] basic indexing
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEED1@groexmbcr02.pfizer.com>

 >  -----Original Message-----
 >  From: Duncan Murdoch [mailto:dmurdoch at pair.com]
 >  
 >  On Tue, 9 Oct 2001 21:00:32 -0400, Michaell Taylor
[michaell.taylor at reis.com]:
 >  
 >  >in stata this would be
 >  >gen z=x[N-1]
 >  
 >  In R use z <- c(NA, x[-length(x)])

This can be captured conveniently in the simple function:

lag <- function(x, n)
	c( rep(NA,n), x[1:(length(x)-n)] )

which is used as

> y
[1] 8 9 2 8 8
> lag(y,1)
[1] NA 8 9 2 8
> lag(y,2)
[1] NA NA 8 9 2



 >  >in stata this would be
 >  >gen z=x[N-1] if y==8
 >  
 >  In R you should probably use two statements for this.  The first
 >  constructs z as above, the second is
 >  
 >   z[y != 8] <- NA

and, of course,

> z <- ifelse(y==8, lag(y,1), NA )


-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Oct 11 08:17:16 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 11 Oct 2001 07:17:16 +0100 (BST)
Subject: FW: [R] basic indexing
In-Reply-To: <5429125E11E4D411AF7300805FE603A8014CEED1@groexmbcr02.pfizer.com>
Message-ID: <Pine.GSO.4.31.0110110710360.28556-100000@auk.stats>

On Wed, 10 Oct 2001, Warnes, Gregory R wrote:

>  >  -----Original Message-----
>  >  From: Duncan Murdoch [mailto:dmurdoch at pair.com]
>  >
>  >  On Tue, 9 Oct 2001 21:00:32 -0400, Michaell Taylor
> [michaell.taylor at reis.com]:
>  >
>  >  >in stata this would be
>  >  >gen z=x[N-1]
>  >
>  >  In R use z <- c(NA, x[-length(x)])
>
> This can be captured conveniently in the simple function:
>
> lag <- function(x, n)
> 	c( rep(NA,n), x[1:(length(x)-n)] )
>
> which is used as
>
> > y
> [1] 8 9 2 8 8
> > lag(y,1)
> [1] NA 8 9 2 8
> > lag(y,2)
> [1] NA NA 8 9 2

There is of course already a generic function called lag in R (in package
ts), so overwriting it would not be a good idea.

Especially since this one has argument n of the opposite sign to the
generic definition.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Oct 11 08:33:00 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 11 Oct 2001 07:33:00 +0100 (BST)
Subject: [R] How to comment out multiple lines in R source code?
In-Reply-To: <Pine.LNX.4.33.0110102156450.5878-100000@tal.stat.umu.se>
Message-ID: <Pine.GSO.4.31.0110110730150.28556-100000@auk.stats>

On Wed, 10 Oct 2001, [iso-8859-1] Gran Brostrm wrote:

> On 10 Oct 2001 rossini at blindglobe.net wrote:
>
> > >>>>> "jl" == jonathan li <jonathan_li at agilent.com> writes:
> >
> >     jl> Hi, Is there a way to comment out multiple lines at once in R
> >     jl> source code like C language's /* */ struct? This is quite
> >     jl> useful when one is testing different sections of a source
> >     jl> code.
> >
> > One alternative is to use editor macros for this.
> >
> > (X)Emacs, when using ESS, supports comment-region and uncomment-region
> > commands.
> >
> > best,
> > -tony
>
> You may also try
>
> if (FALSE){
> ...
> ...
> }

Yes, you will see that in e.g. the MASS scripts to comment out S code that
does not (yet) work in R.

One warning: in that method the `commented' code has to syntactically
valid, and that has caught me more than once.   So I usually use ESS's
methods.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Oct 11 10:20:41 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Oct 2001 10:20:41 +0200
Subject: FW: [R] basic indexing
In-Reply-To: <Pine.GSO.4.31.0110110710360.28556-100000@auk.stats>
References: <Pine.GSO.4.31.0110110710360.28556-100000@auk.stats>
Message-ID: <x2g08qio4m.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley at stats.ox.ac.uk> writes:

> > > y
> > [1] 8 9 2 8 8
> > > lag(y,1)
> > [1] NA 8 9 2 8
> > > lag(y,2)
> > [1] NA NA 8 9 2
> 
> There is of course already a generic function called lag in R (in package
> ts), so overwriting it would not be a good idea.
> 
> Especially since this one has argument n of the opposite sign to the
> generic definition.

...which is Splus compatible, although not desirable. From the Splus
docs:

NOTE:
    
   Logically k should have the opposite sign, but due to its pervasive
   use in other functions, lag remains unchanged. However, the new shift
   function (which calls lag by default) has the more logical
   convention.



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From siim at obs.ee  Thu Oct 11 12:31:55 2001
From: siim at obs.ee (Ott Toomet)
Date: Thu, 11 Oct 2001 12:31:55 +0200 (CEST)
Subject: [R] large dataframes to ascii
Message-ID: <Pine.LNX.4.33.0110111219280.2749-100000@ecopc15.eco.au.dk>

Hi R-users,

I want to convert a large dataset (from stata format) to an ascii table.
The resulting table should be a human-readable table (like CSV, or
tab-separated file or something similar).  R reads the stata-file quite
easily (with some problems which are discussed here earlier), but so long I
have not found a suitable way to write it in ascii format.

Sure, there exists write.table, which is intended for that purpose.  But the
problem is that the table is quite a large (7500 obs x 1200 vars) and after
half-an-hout processing on my PII wiht 128 MB memory, write.table stopped
with a message that it could not allocate 35 MB more.

dput() and save( ..., ascii=TRUE) work well but the result is not such a
table I am looking for.  I tried also print() with option( width=very wide)
but the largest allowed with is 10000, the table should be around 30000
characters wide.

When I tried to write.table() line-by line, I got quite soon a message that
R was killed.

I know the write.table() pastes together all the variables and writes then
the resulting string to the file.  Aren't there any more efficient way of
doing it, I think saving the dataframe variable-by-variable using a C-function
should be quite a fast and not memory hungry at all.

I have R 1.3.1 on RH7.1 linux


Thanks in advance,

Ott Toomet

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bitwrit at ozemail.com.au  Thu Oct 11 11:04:22 2001
From: bitwrit at ozemail.com.au (Jim Lemon)
Date: Thu, 11 Oct 2001 19:04:22 +1000
Subject: [R] Unlisting while preserving object types?
Message-ID: <3BC56096.55ABABD1@ozemail.com.au>

"Turner, Jason" wrote:
> 
> ...The example I gave is a toy one, however, and I neglected to mention that I
> need it
> automated because the number of members (in the example, a and b) isn't
> known in
> advance, and could typically be as high as 30.  I got tired of typing it all
> out each time.
> Sorry I forgot the most crucial details - I keep forgetting that the whole
> world isn't
> working on this with me.  ;-)

> > >
> > >... I'm looking for an elegant way to fetch components of the sub-lists a
> > and b

I don't find unpacking lists straightforward, and use recursion when I
need a general solution. That is, to say, I test each component of a
list, and if it is another list, I call the function with the sublist.
At the bottom list, I apply the appropriate function and return the
transformed data. For a toy example...

# list2mat unpacks a list of vectors, possibly nested, and 
# returns a matrix whose columns are the vectors in the list.
# Note that the vectors in the list must all be the same length.

list2mat<-function(input.list) {
 firstname<-""
 for(l in 1:length(input.list)) {
  if(is.list(input.list[[l]])) {
   if(exists("newmat",inherits=F)) {
    if(nchar(firstname)) {
     tempnames<-firstname
     firstname<-""
    }
    else tempnames<-colnames(newmat)
    newmat<-cbind(newmat,list2mat(input.list[[l]]))
   }
   else {
    newmat<-list2mat(input.list[[l]])
    firstname<-names(input.list[l])
   }
  }
  else {
   if(exists("newmat",inherits=F)) {
    if(nchar(firstname)) {
     tempnames<-firstname
     firstname<-""
    }
    else tempnames<-colnames(newmat)
    newmat<-cbind(newmat,input.list[[l]])
    colnames(newmat)<-c(tempnames,names(input.list[l]))
   }
   else {
    newmat<-input.list[[l]]
    firstname<-names(input.list[l])
   }
  }
 }
 return(newmat)
}

> testlist<-list(a=1:5,b=2:6,c=list(d=3:7,e=c("a","b","c","d","e")))
> list2mat(testlist)

Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cof at agere.com  Thu Oct 11 14:24:51 2001
From: cof at agere.com (Ortega Fernandez, Carlos (carlos))
Date: Thu, 11 Oct 2001 14:24:51 +0200
Subject: [R] large dataframes to ascii
Message-ID: <B010EF86FE79904186E666A83CA90B3CB72D0B@SP0005EXCUAG01.ags.agere.com>

Hello,

One alternative way to do that is by processing portions of your big table.

You can select, consecutive numbers of colums and rows and save them in
separate files that after finishing you can recompose on Linux with cat and
paste commands.

It is clearly more tedious but effective and manageable.

Hope it helps.
Carlos Ortega.

--------------------------------------------------------------------
Hi R-users, 
I want to convert a large dataset (from stata format) to an ascii table. 
The resulting table should be a human-readable table (like CSV, or 
tab-separated file or something similar). R reads the stata-file quite 
easily (with some problems which are discussed here earlier), but so long I 
have not found a suitable way to write it in ascii format. 
Sure, there exists write.table, which is intended for that purpose. But the 
problem is that the table is quite a large (7500 obs x 1200 vars) and after 
half-an-hout processing on my PII wiht 128 MB memory, write.table stopped 
with a message that it could not allocate 35 MB more. 
dput() and save( ..., ascii=TRUE) work well but the result is not such a 
table I am looking for. I tried also print() with option( width=very wide) 
but the largest allowed with is 10000, the table should be around 30000 
characters wide. 
When I tried to write.table() line-by line, I got quite soon a message that 
R was killed. 
I know the write.table() pastes together all the variables and writes then 
the resulting string to the file. Aren't there any more efficient way of 
doing it, I think saving the dataframe variable-by-variable using a
C-function 
should be quite a fast and not memory hungry at all. 
I have R 1.3.1 on RH7.1 linux 
Thanks in advance, 
Ott Toomet 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20011011/a5e32bed/attachment.html

From paradis at isem.univ-montp2.fr  Thu Oct 11 15:22:46 2001
From: paradis at isem.univ-montp2.fr (Emmanuel Paradis)
Date: Thu, 11 Oct 2001 15:22:46 +0200
Subject: [R] How to comment out multiple lines in R source code?
Message-ID: <3.0.32.20011011152245.0090c640@162.38.183.200>

At 07:33 11/10/01 +0100, Prof Brian D Ripley <ripley at stats.ox.ac.uk> wrote:
>On Wed, 10 Oct 2001, [iso-8859-1] G?ran Brostr?m wrote:
>
>> On 10 Oct 2001 rossini at blindglobe.net wrote:
>>
>> > >>>>> "jl" == jonathan li <jonathan_li at agilent.com> writes:
>> >
>> >     jl> Hi, Is there a way to comment out multiple lines at once in R
>> >     jl> source code like C language's /* */ struct? This is quite
>> >     jl> useful when one is testing different sections of a source
>> >     jl> code.
>> >
>> > One alternative is to use editor macros for this.
>> >
>> > (X)Emacs, when using ESS, supports comment-region and uncomment-region
>> > commands.
>> >
>> > best,
>> > -tony
>>
>> You may also try
>>
>> if (FALSE){
>> ...
>> ...
>> }
>
>Yes, you will see that in e.g. the MASS scripts to comment out S code that
>does not (yet) work in R.
>
>One warning: in that method the `commented' code has to syntactically
>valid, and that has caught me more than once.   So I usually use ESS's
>methods.

In (X)Emacs, you can add a character at the beginning of several lines at
once by selecting a block of lines, and then typing C-x r t # (where you
can replace # by any other character or even a string; `C-x' means
`Ctrl-x'). This does not need ESS. You can even add the # in the middle of
the lines if your block selection starts at this point (in case you want to
comment out the right hand-side of a command... maybe not very usual).

BTW, the possibility to (un)comment out a block a R commands does not
appear in the ESS menu (it does in C-mode), and I did not find it in ESS's
doc (but I admit I did not read it all carefully).

Emmanuel Paradis

Emmanuel Paradis
Laboratoire de Pal?ontologie
Institut des Sciences de l'?volution
Universit? Montpellier II
F-34095 Montpellier c?dex 05
France
   phone: +33  4 67 14 39 64
     fax: +33  4 67 14 36 10
  mailto:paradis at isem.univ-montp2.fr
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From felber at slf.ch  Thu Oct 11 15:25:48 2001
From: felber at slf.ch (felber)
Date: Thu, 11 Oct 2001 15:25:48 +0200
Subject: [R] Create objects
Message-ID: <5.0.2.1.1.20011011145718.0361e608@mail.slf.ch>

hello cracks,

we have 365 objects (d.data1-d.data365) containing each 1200 rows with 7 
variables. now we want 1200 objects with the row number i (1:1200) of each 
d.data.

we tried it to do this way: for (k in 1:1200) for (j in 1:365) for (i in 
1:7) get(paste("test",k,sep=""))[j,i] <- get(paste("d.data",j,sep=""))[k,i]
-> following error appeared:  Error: Target of assignment expands to 
non-language object

Does anyone know what can be done?

thanks in advance,

  Andi

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From G.Janacek at uea.ac.uk  Thu Oct 11 18:05:23 2001
From: G.Janacek at uea.ac.uk (G.Janacek)
Date: Thu, 11 Oct 2001 17:05:23 +0100
Subject: [R] R 1.3.1 on OS9.1?
Message-ID: <a05010407b7eb70aaa2ca@[139.222.80.181]>

Dear List,
After my laptop was stolen I (eventually) replaced it with a G4 
laptop running Mac OS 9.1 . This also meant I updated to the current 
Mac binary 1.3.1. This is pretty wonderful except for one problem.

I normally save R figs as eps files using the Mac OS and then read 
them into Latex documents. This no longer works as the legends 
overwrite the diagrams. Saving as ps from R also does not work - the 
bounding box is then a problem.

Is my problem
(1)The move to the G4 platform
(2) A change in R from 1.2 to 1.3
(3) Idiocy on my part

I have been tearing my hair over this ( and I need to keep what I 
have). No doubt I am being stupid but if anyone can help me I would 
be very grateful.
G.Janacek
P.S. Stefano Iacus has done a cracking job - we Mac drivers owe him a 
huge debt.
-- 
G.Janacek					44 (0) 1603 592489
Dean                                    fax     44 (0) 1603 593868
School of Maths                   secretary     44 (0) 1603 592488
UEA
Norwich NR4 7TJ
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20011011/dbd843b2/attachment.html

From stecalza at tiscalinet.it  Thu Oct 11 18:05:26 2001
From: stecalza at tiscalinet.it (Stefano)
Date: Thu, 11 Oct 2001 18:05:26 +0200
Subject: [R] Harrell's library
Message-ID: <5.1.0.14.2.20011011175829.009f06f0@pop.tiscalinet.it>

Hi everybody.

I'm studying the Harrell's book on regression modeling strategies, and I'd 
like to replicate the examples using R (instead of S+). So how's going the 
porting of the hmisc and design libraries? Are there available, though in 
beta version?

TIA,
Stefano Calza

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Oct 11 18:53:57 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Oct 2001 18:53:57 +0200
Subject: [R] R 1.3.1 on OS9.1?
In-Reply-To: <a05010407b7eb70aaa2ca@[139.222.80.181]>
References: <a05010407b7eb70aaa2ca@[139.222.80.181]>
Message-ID: <x2wv22i0d6.fsf@blueberry.kubism.ku.dk>

"G.Janacek" <G.Janacek at uea.ac.uk> writes:

> Dear List,
> After my laptop was stolen I (eventually) replaced it with a G4 laptop
> running Mac OS 9.1 . This also meant I updated to the current Mac
> binary 1.3.1. This is pretty wonderful except for one problem.
> 
> I normally save R figs as eps files using the Mac OS and then read
> them into Latex documents. This no longer works as the legends
> overwrite the diagrams. Saving as ps from R also does not work - the
> bounding box is then a problem.
> 
> Is my problem
> (1)The move to the G4 platform
> (2) A change in R from 1.2 to 1.3
> (3) Idiocy on my part
> 
> I have been tearing my hair over this ( and I need to keep what I
> have). No doubt I am being stupid but if anyone can help me I would be
> very grateful.

An example of exactly what you do could be helpful. 

I don't really know the drivers for MacOS, but the usual issue with
saving from screen display to files is if the dimensions are slipping.
Essentially, you should try to ensure that the height, width, and
pointsize are the same, or at least in proportion. Plotting directly
to postscript could help too.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From garbade at psy.uni-muenchen.de  Thu Oct 11 19:11:27 2001
From: garbade at psy.uni-muenchen.de (Sven Garbade)
Date: Thu, 11 Oct 2001 19:11:27 +0200
Subject: [R] How to comment out multiple lines in R source code?
References: <3.0.32.20011011152245.0090c640@162.38.183.200>
Message-ID: <3BC5D2BF.AC49893C@psy.uni-muenchen.de>

Emmanuel Paradis wrote:
> 
> At 07:33 11/10/01 +0100, Prof Brian D Ripley <ripley at stats.ox.ac.uk> wrote:
> >On Wed, 10 Oct 2001, [iso-8859-1] G?ran Brostr?m wrote:
> >
> >> On 10 Oct 2001 rossini at blindglobe.net wrote:
> >>
> >> > >>>>> "jl" == jonathan li <jonathan_li at agilent.com> writes:
> >> >
> >> >     jl> Hi, Is there a way to comment out multiple lines at once in R
> >> >     jl> source code like C language's /* */ struct? This is quite
> >> >     jl> useful when one is testing different sections of a source
> >> >     jl> code.
> >> >
> >> > One alternative is to use editor macros for this.
> >> >
> >> > (X)Emacs, when using ESS, supports comment-region and uncomment-region
> >> > commands.
> >> >
> >> > best,
> >> > -tony
> >>
> >> You may also try
> >>
> >> if (FALSE){
> >> ...
> >> ...
> >> }
> >
> >Yes, you will see that in e.g. the MASS scripts to comment out S code that
> >does not (yet) work in R.
> >
> >One warning: in that method the `commented' code has to syntactically
> >valid, and that has caught me more than once.   So I usually use ESS's
> >methods.
> 
> In (X)Emacs, you can add a character at the beginning of several lines at
> once by selecting a block of lines, and then typing C-x r t # (where you
> can replace # by any other character or even a string; `C-x' means
> `Ctrl-x'). This does not need ESS. You can even add the # in the middle of
> the lines if your block selection starts at this point (in case you want to
> comment out the right hand-side of a command... maybe not very usual).
> 
> BTW, the possibility to (un)comment out a block a R commands does not
> appear in the ESS menu (it does in C-mode), and I did not find it in ESS's
> doc (but I admit I did not read it all carefully).

You can type M-x comment-region to comment and C-u M-x comment-region to
uncomment a region in (X)Emacs ESS-Mode.

Best, Sven
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fharrell at virginia.edu  Thu Oct 11 19:16:09 2001
From: fharrell at virginia.edu (Frank E Harrell Jr)
Date: Thu, 11 Oct 2001 13:16:09 -0400
Subject: [R] Harrell's library
References: <5.1.0.14.2.20011011175829.009f06f0@pop.tiscalinet.it>
Message-ID: <3BC5D3D9.C9E8A5F@virginia.edu>

I keep thinking that any day I will get the beta versions
ready.  I was waiting for new versions of Lattice and Grid
to finish Hmisc, and those are now available so I have no
excuse.  For Design I still lack one piece: I call a
Fortran function dqrsl1 from Linpack that is not available
with R.  I need to dig in and find out how to translate
my calls to call one of the Linpack Fortran functions
that is included in R.  If anyone has done that already please
let me know.

Frank Harrell


Stefano wrote:
> 
> Hi everybody.
> 
> I'm studying the Harrell's book on regression modeling strategies, and I'd
> like to replicate the examples using R (instead of S+). So how's going the
> porting of the hmisc and design libraries? Are there available, though in
> beta version?
> 
> TIA,
> Stefano Calza
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From a215020 at agate.fmr.com  Thu Oct 11 19:55:00 2001
From: a215020 at agate.fmr.com (David Brahm)
Date: Thu, 11 Oct 2001 13:55:00 -0400 (EDT)
Subject: [R] Trouble with 3-dots
Message-ID: <200110111755.f9BHt0k13623@arbres1a.FMR.Com>

   I wrote on 10/8/01 that I could not pass missing arguments from one function
to another through "...":

R> x <- matrix(1:12, 3,4)
R> myfun <- function(x, ...) {if (missing(...)) x[]<-0 else x[...]<-0; x}
R> myfun2 <- function(x, ...) myfun(x, ...)
R> myfun2(x, ,1:2)
   Error in myfun(x, ...) : Argument is missing, with no default

Here is one solution:
R> myfun2 <- function(x, ...) {
R>   sc <- sys.call()
R>   sc[[1]] <- as.name("myfun")
R>   eval.parent(sc)
R> }

R> myfun2(x, ,1:2)
       [,1] [,2] [,3] [,4]
  [1,]    0    0    7   10
  [2,]    0    0    8   11
  [3,]    0    0    9   12

Comments?  Is this in any way inefficient or dangerous?  Thanks.

		-- David Brahm (brahm at alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From phgrosje at ulb.ac.be  Thu Oct 11 16:25:22 2001
From: phgrosje at ulb.ac.be (Philippe Grosjean)
Date: Thu, 11 Oct 2001 16:25:22 +0200
Subject: [R] list of functions flagged with debug() or trace()
In-Reply-To: <20011009090918.O19085@jimmy.harvard.edu>
Message-ID: <MABBLJDICACNFOLGIHJOMEFGCGAA.phgrosje@ulb.ac.be>

>You probably didn't get an answer because the answer is no, there is
>no easy way,

>--
>+--------------------------------------------------------------------------
-+
>| Robert Gentleman                 phone : (617) 632-5250
|
>| Associate Professor              fax:   (617)  632-2444
|
>| Department of Biostatistics      office: M1B28
>| Harvard School of Public Health  email: rgentlem at jimmy.dfci.harvard.edu
|
>+--------------------------------------------------------------------------
-+


Thank you. I would like to program it, but I feel it is not easy, because
debug() or trace() is not an attribute of the function, at least available
through attr()... My approach would be to maintain a list of functions set
with debug() or trace(). Does anybody have a better idea?

Here is a first draft:

Debug <- function(FUN) {
	if (length(objects(envir=.GlobalEnv, all.names=TRUE,
pattern=".debug.functions")) != 0)
		.debug.functions <- get(".debug.functions", envir=.GlobalEnv) else
.debug.functions <- NULL
	assign(".debug.functions", unique(c(.debug.functions,
deparse(substitute(FUN)))), env= .GlobalEnv)
	debug(FUN)
}

Undebug <- function(FUN) {
	if (length(objects(envir=.GlobalEnv, all.names=TRUE,
pattern=".debug.functions")) != 0)
		.debug.functions <- get(".debug.functions", envir=.GlobalEnv) else
.debug.functions <- NULL
	pos <- which(.debug.functions == deparse(substitute(FUN)))
	if (length(pos) > 0)
		assign(".debug.functions", .debug.functions[-pos], env= .GlobalEnv)
	undebug(FUN)
}

Trace <- function(FUN) {
	if (length(objects(envir=.GlobalEnv, all.names=TRUE,
pattern=".trace.functions")) != 0)
		.debug.functions <- get(".trace.functions", envir=.GlobalEnv) else
.debug.functions <- NULL
	assign(".trace.functions", unique(c(.debug.functions,
deparse(substitute(FUN)))), env= .GlobalEnv)
	trace(FUN)
}

Untrace <- function(FUN) {
	if (length(objects(envir=.GlobalEnv, all.names=TRUE,
pattern=".trace.functions")) != 0)
		.debug.functions <- get(".trace.functions", envir=.GlobalEnv) else
.debug.functions <- NULL
	pos <- which(.debug.functions == deparse(substitute(FUN)))
	if (length(pos) > 0)
		assign(".trace.functions", .debug.functions[-pos], env= .GlobalEnv)
	undebug(FUN)
}

Of course, I should better mask debug/undebug and trace/untrace instead of
using Debug/Undebug Trace/Untrace, but then, how do I call the original
debug/undebug, trace/untrace primitives in the body of my function?
Thanks for help,

Philippe Grosjean


...........]<(({?<...............<?}))><...............................
 ) ) ) ) )	 __               	 __
( ( ( ( ( 	|__)              	|  _
 ) ) ) ) )	|   hilippe       	|__)rosjean
( ( ( ( ( 	Marine Biol. Lab., ULB, Belgium
 ) ) ) ) )	                  	 __
( ( ( ( ( 	|\  /|            	|__)
 ) ) ) ) )	| \/ |ariculture &	|__)iostatistics
( ( ( ( (
 ) ) ) ) )	e-mail: phgrosje at ulb.ac.be or phgrosjean at sciviews.org
( ( ( ( ( 	SciViews project coordinator (http://www.sciviews.org)
 ) ) ) ) )      tel: 00-32-2-650.29.70 (lab), 00-32-2-673.31.33 (home)
( ( ( ( (
 ) ) ) ) )      "I'm 100% confident that p is between 0 and 1"
( ( ( ( (                                  L. Gonick & W. Smith (1993)
 ) ) ) ) )
.......................................................................


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jniesch at gwdg.de  Thu Oct 11 21:52:52 2001
From: jniesch at gwdg.de (YJ)
Date: Thu, 11 Oct 2001 21:52:52 +0200
Subject: [R] Create objects
References: <5.0.2.1.1.20011011145718.0361e608@mail.slf.ch>
Message-ID: <3BC5F894.33F9ABD0@gwdg.de>


felber wrote:

> hello cracks,
>
> we have 365 objects (d.data1-d.data365) containing each 1200 rows with 7
> variables. now we want 1200 objects with the row number i (1:1200) of each
> d.data.
>
> we tried it to do this way: for (k in 1:1200) for (j in 1:365) for (i in
> 1:7) get(paste("test",k,sep=""))[j,i] <- get(paste("d.data",j,sep=""))[k,i]
> -> following error appeared:  Error: Target of assignment expands to
> non-language object
>
> Does anyone know what can be done?

hmm, the manual says that
#assign does not dispatch assignment methods,
#so it cannot be used to set elements of vectors, names, attributes, etc.

as a crude work-around in R you can use arrays as in this toy example which worked
as expected as long
as the columns are all numeric
#> dim(fi1)   [1] 10 9
#> dim(fi2)   [1] 10 9 ....
#
blah<-array(NA,dim=c(4,10,9))
for( k in 1:4)
{
 for( i in 1:10)
 {
  for( j in 1:9)
  {
  blah[k,i,j]<-eval(parse(text=paste("fi",k,sep="")))[i,j]
  }
 assign(paste("oops",i,sep=""),eval(parse(text=paste("blah[,",i,",]",sep=""))) )
 }
}

of course, the assign() is redundant and only needed if you need objects with
numbering ending in i, in your case 1 through 1200;
But I bet there are more efficient ways to handle your problem


>
>
> thanks in advance,
>
>   Andi
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Oct 11 22:00:38 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Oct 2001 22:00:38 +0200
Subject: [R] Trouble with 3-dots
In-Reply-To: <200110111755.f9BHt0k13623@arbres1a.FMR.Com>
References: <200110111755.f9BHt0k13623@arbres1a.FMR.Com>
Message-ID: <x2y9mi3q1l.fsf@blueberry.kubism.ku.dk>

David Brahm  <a215020 at agate.fmr.com> writes:

>    I wrote on 10/8/01 that I could not pass missing arguments from one function
> to another through "...":
> 
> R> x <- matrix(1:12, 3,4)
> R> myfun <- function(x, ...) {if (missing(...)) x[]<-0 else x[...]<-0; x}
> R> myfun2 <- function(x, ...) myfun(x, ...)
> R> myfun2(x, ,1:2)
>    Error in myfun(x, ...) : Argument is missing, with no default
> 
> Here is one solution:
> R> myfun2 <- function(x, ...) {
> R>   sc <- sys.call()
> R>   sc[[1]] <- as.name("myfun")
> R>   eval.parent(sc)
> R> }
> 
> R> myfun2(x, ,1:2)
>        [,1] [,2] [,3] [,4]
>   [1,]    0    0    7   10
>   [2,]    0    0    8   11
>   [3,]    0    0    9   12
> 
> Comments?  Is this in any way inefficient or dangerous?  Thanks.

If you use match.call rather than sys.call you get a construction type
that is used a couple of places in the R sources. Not dearly beloved
by its authors, but used nevertheless. (See lm, for instance)

Generally, combining missing and ... is asking for trouble and any
solution is going to be ugly in some way. 

There might be a cleaner way involving looking at 

match.call(expand.dots=FALSE)$...

but I don't quite see it. Be careful, there are lots of little
surprises in this stuff.

Time might be better spent figuring out why 

> "[<-"(x,value=0)
Error: SubAssignArgs: invalid number of arguments

whereas x[]<-0 works fine. (So does "[<-"(x,,value=0), which could be
part of the explanation).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From presnell at stat.ufl.edu  Thu Oct 11 22:48:12 2001
From: presnell at stat.ufl.edu (Brett Presnell)
Date: Thu, 11 Oct 2001 16:48:12 -0400
Subject: [R] Underscores and Fortran code
Message-ID: <15302.1420.571215.515265@minke.stat.ufl.edu>


This might more properly be filed as a bug report, but ...

I came upon the following problem while trying to dyn.load a library
of Fortran code into R.  I'm running RedHat 7.1 on a Pentium III
laptop, with R version 1.3.1 (latest rpm from CRAN) and gcc/g77
version 2.96.

My library has a number of Fortran subroutines that have underscores
in their names for readability.  By default g77 appends TWO
underscores to the ends of Fortran names that contain an underscore.
According to the g77 documentation this is for compatibility with f2c
and "many other UNIX Fortran compilers".  Unfortunately these symbols
are not in turn found by R, which expects only a single underscore in
all cases.

I can think of three obvious solutions to this problem:

1.  I could edit all my code and take the underscores out of the
    names.

    I definitely don't want to do this.

2.  Add -fno-second-underscore to FFLAGS in ${R_HOME}/etc/Makeconf.

    This seems to work for me, though I'm concerned that it might
    break something else down the line.  In general, I suppose that
    this could be done in configure, though I don't know which other
    compilers have this feature, or what switches they might use to
    turn off it off.

3.  Change symbol.For, .Fortran, dyn.load, and whatever else to
    produce/look for the correct names.

    This seems like the "right" answer, though it would presumably
    require some work in configure and elsewhere.  I notice that there
    is already some underscore checking going on in configure and in
    places like Rdynload.c.

Any suggestions are welcome.  Am I missing anything?

To save typing for anyone that want's to try this at home, I've
appended a simple test case below.

-- 
Brett Presnell
Department of Statistics
University of Florida
http://www.stat.ufl.edu/~presnell/

dog1.f:

      subroutine dog_dog(x,y,z)
      implicit none
      double precision x,y,z

      z = x+y
      return
      end

dog2.f:

      subroutine dogidog(x,y,z)
      implicit none
      double precision x,y,z

      z = x+y
      return
      end

After

bash$ R CMD SHLIB dog1.f
bash$ R CMD SHLIB dog2.f

note the symbols

bash$ nm dog1.so | grep dog
00000730 T dog_dog__
bash$ nm dog2.so | grep dog
00000730 T dogidog_

and in R

> x <- 2; y <- 3; z <- 0
> dyn.load("dog1.so")
> .Fortran("dog_dog", as.double(x), as.double(y), as.double(z))
Error in .Fortran("dog_dog", as.double(x), as.double(y), as.double(z))
> : 
  C/Fortran function name not in load table
> dyn.unload("dog1.so")
> dyn.load("dog2.so")
> .Fortran("dogidog", as.double(x), as.double(y), as.double(z))
[[1]]
[1] 2

[[2]]
[1] 3

[[3]]
[1] 5

> dyn.unload("dog2.so")
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From john_heumann at agilent.com  Thu Oct 11 23:38:02 2001
From: john_heumann at agilent.com (HEUMANN,JOHN (A-Loveland,ex1))
Date: Thu, 11 Oct 2001 15:38:02 -0600
Subject: [R] unary "-" on logicals
Message-ID: <9153F74610B7D311B83900902771C8710A4CE43C@axcs07.cos.agilent.com>

"An Introduction to R" says that arithmetic operators
coerce logical vectors to numeric vectors. This doesn't
seem to be true for unary "-" however: 

> x <- 1:10
> p1 <- (x > 5)
> p2 <- (-p1)
> is.logical(p2)
[1] TRUE
> is.numeric(p2)
[1] FALSE

Since "==" always does binary comparison, this can lead to
some bizarre behavior:

> p1
 [1] FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE
> p2
 [1] FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE
> (p1 == p2)
 [1]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
> ((!p1) == (!p2))
 [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE

Considering that p1 and p2 are both logicals, the last two
results seem to defy Boolean logic.

Is the fact that -p1 remains a logical instead of a numeric
intentional or a bug? 

Regards,
-jh-

=========================================
John M. Heumann, Agilent Technologies
815 14th St. S.W., Loveland, CO 80537 USA
Email: john_heumann at agilent.com
Phone: 970 679-3761 FAX: 970 679-5399
=========================================
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rgentlem at jimmy.harvard.edu  Thu Oct 11 23:53:34 2001
From: rgentlem at jimmy.harvard.edu (Robert Gentleman)
Date: Thu, 11 Oct 2001 17:53:34 -0400
Subject: [R] unary "-" on logicals
In-Reply-To: <9153F74610B7D311B83900902771C8710A4CE43C@axcs07.cos.agilent.com>; from HEUMANN,JOHN (A-Loveland,ex1) on Thu, Oct 11, 2001 at 03:38:02PM -0600
References: <9153F74610B7D311B83900902771C8710A4CE43C@axcs07.cos.agilent.com>
Message-ID: <20011011175334.X19085@jimmy.harvard.edu>

On Thu, Oct 11, 2001 at 03:38:02PM -0600, HEUMANN,JOHN (A-Loveland,ex1) wrote:
> "An Introduction to R" says that arithmetic operators
> coerce logical vectors to numeric vectors. This doesn't
> seem to be true for unary "-" however: 
> 
> > x <- 1:10
> > p1 <- (x > 5)
> > p2 <- (-p1)
> > is.logical(p2)
> [1] TRUE
> > is.numeric(p2)
> [1] FALSE
> 
> Since "==" always does binary comparison, this can lead to
> some bizarre behavior:
> 
> > p1
>  [1] FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE
> > p2
>  [1] FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE
> > (p1 == p2)
>  [1]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
> > ((!p1) == (!p2))
>  [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE

If you try 
> as.numeric(p1)
 [1] 0 0 0 0 0 1 1 1 1 1
> as.numeric(p2)
 [1]  0  0  0  0  0 -1 -1 -1 -1 -1

 So there is a coercion and a bug,
 somehow p2 is not forgetting to be a logical....


> 
> Considering that p1 and p2 are both logicals, the last two
> results seem to defy Boolean logic.
> 
> Is the fact that -p1 remains a logical instead of a numeric
> intentional or a bug? 
> 
> Regards,
> -jh-
> 
> =========================================
> John M. Heumann, Agilent Technologies
> 815 14th St. S.W., Loveland, CO 80537 USA
> Email: john_heumann at agilent.com
> Phone: 970 679-3761 FAX: 970 679-5399
> =========================================
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem at jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Fri Oct 12 00:01:17 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Oct 2001 00:01:17 +0200
Subject: [R] Underscores and Fortran code
In-Reply-To: <15302.1420.571215.515265@minke.stat.ufl.edu>
References: <15302.1420.571215.515265@minke.stat.ufl.edu>
Message-ID: <x2bsjdalaq.fsf@blueberry.kubism.ku.dk>

Brett Presnell <presnell at stat.ufl.edu> writes:

> This might more properly be filed as a bug report, but ...
> 
> I came upon the following problem while trying to dyn.load a library
> of Fortran code into R.  I'm running RedHat 7.1 on a Pentium III
> laptop, with R version 1.3.1 (latest rpm from CRAN) and gcc/g77
> version 2.96.
> 
> My library has a number of Fortran subroutines that have underscores
> in their names for readability.  By default g77 appends TWO
> underscores to the ends of Fortran names that contain an underscore.
> According to the g77 documentation this is for compatibility with f2c
> and "many other UNIX Fortran compilers".  Unfortunately these symbols
> are not in turn found by R, which expects only a single underscore in
> all cases.
> 
> I can think of three obvious solutions to this problem:
> 
> 1.  I could edit all my code and take the underscores out of the
>     names.
> 
>     I definitely don't want to do this.
> 
> 2.  Add -fno-second-underscore to FFLAGS in ${R_HOME}/etc/Makeconf.
> 
>     This seems to work for me, though I'm concerned that it might
>     break something else down the line.  In general, I suppose that
>     this could be done in configure, though I don't know which other
>     compilers have this feature, or what switches they might use to
>     turn off it off.
> 
> 3.  Change symbol.For, .Fortran, dyn.load, and whatever else to
>     produce/look for the correct names.
> 
>     This seems like the "right" answer, though it would presumably
>     require some work in configure and elsewhere.  I notice that there
>     is already some underscore checking going on in configure and in
>     places like Rdynload.c.
> 
> Any suggestions are welcome.  Am I missing anything?

Probably not. I've certainly never heard of that convention before.
Given that you're not likely to be mixing your code with things
compiled with other compilers, option 2 does look viable. However,
your code might become nonportable to non-g77 compilers if they have
the convention and no way to turn it off. 

For option 3, you might change the code in do_dotCode, but how would
you replace

# define F77_CALL(x)    x ## _

with something that checks for underscores in x? That does not look
easy. 

Which leaves option 1....


There is a 4th possibility: Write your own C wrappers for the Fortran
functions and have them conditionalize properly. If you figure out how
to test for the property in configure, we might be convinced to add
the definition of (say) F77_2ND_UNDERSCORE to the relevant include
file.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andy at arcriswell.com  Thu Oct 11 22:26:42 2001
From: andy at arcriswell.com (Andrew Criswell)
Date: Fri, 12 Oct 2001 03:26:42 +0700
Subject: [R] Where's MVA?
Message-ID: <004001c15293$0c16b750$6ed994cb@andrew8gpipq9q>

Hi All:

Package TSERIES is stated to depend on MVA. However, there is no MVA package to be found under the list of package sources.

Best wishes,
ANDREW

tseries: Package for time series analysis 
Package for time series analysis with emphasis on non-linear and non-stationary modelling Version: 0.7-6 
      Depends: ts, mva, quadprog 
      Date: 2001-08-27 
      Author: Compiled by Adrian Trapletti <adrian at olsen.ch> 
      Maintainer: Kurt.Hornik <Kurt.Hornik at ci.tuwien.ac.at> 
      License: GPL (see file COPYING), except for ./src/muin2ser.f and ./misc which are free for non-commercial purposes. See file README for details. 
      URL: http://www.r-project.org 
Index of Contents (Text)
Reference Manual (PDF)


Package Sources
AnalyzeFMRI CoCoAn Devore5 EMV GLMMGibbs GenKern GeneSOM KernSmooth Matrix NISTnls Oarray PHYLOGR PTAk RArcInfo RMySQL RODBC RPgSQL RandomFields RmSQL Rstreams Rwave SASmixed SuppDists VR XML acepack adapt akima ash bindata blighty boot bootstrap bqtl car cclust cfa chron cluster cmprsk coda conf.design cramer date diamonds dse e1071 ellipse event.chart exactRankTests fastICA fdim fields foreign fracdiff gafit gee geoR gld gregmisc gss ineq leaps lgtdl lmtest locfit logspline lokern lpridge maptree maxstat mclust mda meanscore mgcv mlbench muhaz multiv mvnmle mvtnorm netCDF nlme nlrq norm odesolve oz panel pcurve permax pinktoe pixmap polymars polynom princurve pspline quadprog quantreg rmeta rpart rpvm scatterplot3d sem sgeostat sm sma sn sna splancs sptests spweights strucchange survival tensor tree tripack tseries twostage vegan wavethresh wle xgobi xtable zmatrix 






-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20011012/5b0887c1/attachment.html

From Ko-Kang at xtra.co.nz  Fri Oct 12 06:38:52 2001
From: Ko-Kang at xtra.co.nz (Ko-Kang Wang)
Date: Fri, 12 Oct 2001 17:38:52 +1300
Subject: [R] Where's MVA?
References: <004001c15293$0c16b750$6ed994cb@andrew8gpipq9q>
Message-ID: <000e01c152d7$cc405920$482137d2@kwan022>

I think mva is a package comes with the base installation.  Have you tried
  library( mva )
in R?

Cheers,

Ko-Kang Wang
  ----- Original Message ----- 
  From: Andrew Criswell 
  To: r-help at stat.math.ethz.ch 
  Sent: Friday, October 12, 2001 9:26 AM
  Subject: [R] Where's MVA?


  Hi All:

  Package TSERIES is stated to depend on MVA. However, there is no MVA package to be found under the list of package sources.

  Best wishes,
  ANDREW
   
  tseries: Package for time series analysis 
  Package for time series analysis with emphasis on non-linear and non-stationary modelling Version: 0.7-6 
        Depends: ts, mva, quadprog 
        Date: 2001-08-27 
        Author: Compiled by Adrian Trapletti <adrian at olsen.ch> 
        Maintainer: Kurt.Hornik <Kurt.Hornik at ci.tuwien.ac.at> 
        License: GPL (see file COPYING), except for ./src/muin2ser.f and ./misc which are free for non-commercial purposes. See file README for details. 
        URL: http://www.r-project.org 
  Index of Contents (Text)
  Reference Manual (PDF)


  Package Sources
  AnalyzeFMRI CoCoAn Devore5 EMV GLMMGibbs GenKern GeneSOM KernSmooth Matrix NISTnls Oarray PHYLOGR PTAk RArcInfo RMySQL RODBC RPgSQL RandomFields RmSQL Rstreams Rwave SASmixed SuppDists VR XML acepack adapt akima ash bindata blighty boot bootstrap bqtl car cclust cfa chron cluster cmprsk coda conf.design cramer date diamonds dse e1071 ellipse event.chart exactRankTests fastICA fdim fields foreign fracdiff gafit gee geoR gld gregmisc gss ineq leaps lgtdl lmtest locfit logspline lokern lpridge maptree maxstat mclust mda meanscore mgcv mlbench muhaz multiv mvnmle mvtnorm netCDF nlme nlrq norm odesolve oz panel pcurve permax pinktoe pixmap polymars polynom princurve pspline quadprog quantreg rmeta rpart rpvm scatterplot3d sem sgeostat sm sma sn sna splancs sptests spweights strucchange survival tensor tree tripack tseries twostage vegan wavethresh wle xgobi xtable zmatrix 






-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20011012/c8d649f2/attachment.html

From jniesch at gwdg.de  Fri Oct 12 10:57:16 2001
From: jniesch at gwdg.de (J.N.)
Date: Fri, 12 Oct 2001 10:57:16 +0200 (MEST)
Subject: [R] Where's MVA?
In-Reply-To: <004001c15293$0c16b750$6ed994cb@andrew8gpipq9q>
Message-ID: <Pine.OSF.4.10.10110121055100.60385-100000@gwdu70.gwdg.de>

On Fri, 12 Oct 2001, Andrew Criswell wrote:

> Date: Fri, 12 Oct 2001 03:26:42 +0700
> From: Andrew Criswell <andy at arcriswell.com>
> To: r-help at stat.math.ethz.ch
> Subject: [R] Where's MVA?
> 
> Hi All:
> 
> Package TSERIES is stated to depend on MVA. However, there is no MVA package to be found under the list of package sources.

in R try 
library()

which will list all currently available libraries
there  should be a listing mva since it belongs to the base package
some (all?) packages autoload needed packages otherwise load them by hand
via
library(mva)

	Jens
> 
> Best wishes,
> ANDREW
> 
> tseries: Package for time series analysis 
> Package for time series analysis with emphasis on non-linear and non-stationary modelling Version: 0.7-6 
>       Depends: ts, mva, quadprog 
>       Date: 2001-08-27 
>       Author: Compiled by Adrian Trapletti <adrian at olsen.ch> 
>       Maintainer: Kurt.Hornik <Kurt.Hornik at ci.tuwien.ac.at> 
>       License: GPL (see file COPYING), except for ./src/muin2ser.f and ./misc which are free for non-commercial purposes. See file README for details. 
>       URL: http://www.r-project.org 
> Index of Contents (Text)
> Reference Manual (PDF)
> 
> 
> Package Sources
> AnalyzeFMRI CoCoAn Devore5 EMV GLMMGibbs GenKern GeneSOM KernSmooth Matrix NISTnls Oarray PHYLOGR PTAk RArcInfo RMySQL RODBC RPgSQL RandomFields RmSQL Rstreams Rwave SASmixed SuppDists VR XML acepack adapt akima ash bindata blighty boot bootstrap bqtl car cclust cfa chron cluster cmprsk coda conf.design cramer date diamonds dse e1071 ellipse event.chart exactRankTests fastICA fdim fields foreign fracdiff gafit gee geoR gld gregmisc gss ineq leaps lgtdl lmtest locfit logspline lokern lpridge maptree maxstat mclust mda meanscore mgcv mlbench muhaz multiv mvnmle mvtnorm netCDF nlme nlrq norm odesolve oz panel pcurve permax pinktoe pixmap polymars polynom princurve pspline quadprog quantreg rmeta rpart rpvm scatterplot3d sem sgeostat sm sma sn sna splancs sptests spweights strucchange survival tensor tree tripack tseries twostage vegan wavethresh wle xgobi xtable zmatrix 
> 
> 
> 
> 
> 
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pflugshaupt at geobot.umnw.ethz.ch  Fri Oct 12 11:00:51 2001
From: pflugshaupt at geobot.umnw.ethz.ch (Kaspar Pflugshaupt)
Date: Fri, 12 Oct 2001 11:00:51 +0200
Subject: [R] R 1.3.1 on OS9.1?
In-Reply-To: <a05010407b7eb70aaa2ca@[139.222.80.181]>
Message-ID: <B7EC7DE3.B976%pflugshaupt@geobot.umnw.ethz.ch>

On 11.10.2001 18:05 Uhr, G.Janacek wrote:

> Dear List,
> After my laptop was stolen I (eventually) replaced it with a G4
> laptop running Mac OS 9.1 . This also meant I updated to the current
> Mac binary 1.3.1. This is pretty wonderful except for one problem.
> 
> I normally save R figs as eps files using the Mac OS and then read
> them into Latex documents. This no longer works as the legends
> overwrite the diagrams. Saving as ps from R also does not work - the
> bounding box is then a problem.

I've seen similar things happen on a colleague's Mac using MacOS 9.1. On my
G4 (running MacOS 9.2), everything runs fine.

Two things you might try:

- Upgrade the "Carbon Library". Ist essential for R on the Mac. You get the
current version by upgrading to MacOS 9.2, or you can download it separately
from the Apple support web site.

- Generate your plots _directly_ as Postscript or PDF files, as Peter
Dalgaard suggested. I usually plot my stuff first on screen, then open a
file graphics device by postscript() (or pdf()) and re-run the plotting
commands. The resulting postscript files follow the EPS standard and are
fine for including anywhere, though they include no preview. If you generate
PDFs, you can preview them handily in the Acrobat viewer, then export as EPS
from there (with preview). All hail to Adobe for PDF files :-)


> P.S. Stefano Iacus has done a cracking job - we Mac drivers owe him a
> huge debt.

Couldn't agree more!


Kaspar

-- 

Kaspar Pflugshaupt
Geobotanisches Institut
Zuerichbergstr. 38
CH-8044 Zuerich

Tel. ++41 1 632 43 19
Fax  ++41 1 632 12 15

mailto:pflugshaupt at geobot.umnw.ethz.ch
privat:pflugshaupt at mails.ch
http://www.geobot.umnw.ethz.ch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From slehoczky at delacyassociates.com  Fri Oct 12 14:23:13 2001
From: slehoczky at delacyassociates.com (Sandor Lehoczky)
Date: Fri, 12 Oct 2001 08:23:13 -0400
Subject: [R] lr with positive coeffs
Message-ID: <3BC6E0B1.1EF236B6@delacyassociates.com>

Is there any way in R to do a linear regression with positive
coefficients only?

Thanks for any help!

Sandor Lehoczky
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From john.janmaat at acadiau.ca  Fri Oct 12 15:10:04 2001
From: john.janmaat at acadiau.ca (John Janmaat)
Date: Fri, 12 Oct 2001 10:10:04 -0300
Subject: [R] Econometrics ...
References: <B7EC7DE3.B976%pflugshaupt@geobot.umnw.ethz.ch>
Message-ID: <3BC6EBAC.C07DA6FC@acadiau.ca>

Hello,

Is there a package available for R which generates output commonly used
by econometricians (eg., the Durbin-Watson statistic for serial
correlation in regression residuals)?  I'm pretty sure most of the stuff
is out there in assorted packages, under different names.  However, it
would make my life, and that of my students, easier if it was all in one
package.

Thanks,

John.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Oct 12 15:28:48 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 12 Oct 2001 14:28:48 +0100 (BST)
Subject: [R] lr with positive coeffs
In-Reply-To: <3BC6E0B1.1EF236B6@delacyassociates.com>
Message-ID: <Pine.LNX.4.31.0110121428020.4809-100000@gannet.stats>

On Fri, 12 Oct 2001, Sandor Lehoczky wrote:

> Is there any way in R to do a linear regression with positive
> coefficients only?

Yes. There is an example in the MASS scripts ch09.R.
You could also use package quadprog.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From zeileis at ci.tuwien.ac.at  Fri Oct 12 15:36:23 2001
From: zeileis at ci.tuwien.ac.at (Achim Zeileis)
Date: Fri, 12 Oct 2001 15:36:23 +0200
Subject: [R] Econometrics ...
References: <B7EC7DE3.B976%pflugshaupt@geobot.umnw.ethz.ch> <3BC6EBAC.C07DA6FC@acadiau.ca>
Message-ID: <3BC6F1D7.6D821F5@ci.tuwien.ac.at>

John Janmaat wrote:
> 
> Hello,
> 
> Is there a package available for R which generates output commonly used
> by econometricians (eg., the Durbin-Watson statistic for serial
> correlation in regression residuals)?  I'm pretty sure most of the stuff
> is out there in assorted packages, under different names.  However, it
> would make my life, and that of my students, easier if it was all in one
> package.

By now there is no econometrics package or bundle, there are only
several packages, that might be of interest for econometricians. The
Durbin Watson test is for example in the package "lmtest" (a new version
of "lmtest" that offers not only the test statistic but also the p-value
is about to be finished). Other packages with useful econometric
functions can be found in "tseries" or in "strucchange".

Z


> Thanks,
> 
> John.
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From a215020 at agate.fmr.com  Fri Oct 12 16:00:07 2001
From: a215020 at agate.fmr.com (David Brahm)
Date: Fri, 12 Oct 2001 10:00:07 -0400 (EDT)
Subject: [R] large dataframes to ascii
Message-ID: <200110121400.f9CE07U27852@arbres1a.FMR.Com>

Ott Toomet wrote:
> I want to convert a large dataset (from stata format) to an ascii table.
> ... after half-an-hour processing on my PII wiht 128 MB memory, write.table
> stopped with a message that it could not allocate 35 MB more.

The following function has only been fully tested in S-Plus on Unix, but may
be of help.  It is somewhat analogous to
   write.table(tbl, file, quote=F, sep="\t", row.names=T)

The main point is that it writes output in blocks of rows; you can choose the
block size with argument "bsize".  There is an also optional argument "digits",
a list with the same names as "tbl", which determines how many decimal places
each column is rounded to.

##### Begin code: #####

g.output <- function(tbl, file="", append=F, hdr=T, sep="\t",
                     digits=NULL, verbose=F, bsize=7e4/length(tbl)) {
  if (is.numeric(digits))
    digits <- structure(as.list(rep(digits, length(tbl))), names=names(tbl))
  for (i in names(digits)) if (is.numeric(tbl[[i]]))
    tbl[[i]] <- as.character(round(tbl[[i]], digits[[i]]))
  if (!append) unlink(file)
  if (hdr && (!append || !file.exists(file)))                     # Header line
    cat(paste(names(tbl), collapse=sep), sep="\n", file=file)

  if (!(nt <- length(tbl[[1]]))) return(invisible())
  ix <- c(seq(1, nt, by=round(bsize)), nt+1)
  cfun <- function(tbl, i1, i2, nt, file, sep, verbose) {
    if (verbose) cat("From", i1, "to", i2, date(), "\n")
    if (i1 != 1 || i2 != nt) tbl <- g.subset(tbl, i1:i2)
    y <- do.call("paste", c(tbl, list(sep=sep)))
    cat(y, sep="\n", file=file, append=(file != ""))
  }
  for (i in seq(ix)[-1]) cfun(tbl, ix[i-1], ix[i]-1, nt, file, sep, verbose)
}

g.subset <- function(x, q=T, reverse=F) {
  y <- list()
  test <- is.na(seq(along=x[[1]])[q])
  f <- function(z) if (is.character(z)) ifelse(test,"",z[q]) else z[q]
  for (j in seq(x)) y[[j]] <- if (reverse) rev(f(x[[j]])) else f(x[[j]])
  names(y) <- names(x)
  if (is.data.frame(x)) data.frame(y) else y
}

##### End code #####
				-- David Brahm (brahm at alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From murdoch at stats.uwo.ca  Fri Oct 12 16:06:08 2001
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 12 Oct 2001 10:06:08 -0400
Subject: [R] Underscores and Fortran code
In-Reply-To: <15302.1420.571215.515265@minke.stat.ufl.edu>
References: <15302.1420.571215.515265@minke.stat.ufl.edu>
Message-ID: <h1udst4r139vr8pthtun47vvnvbsljo9qi@4ax.com>

On Thu, 11 Oct 2001 16:48:12 -0400, you wrote in message
<15302.1420.571215.515265 at minke.stat.ufl.edu>:

>Any suggestions are welcome.  Am I missing anything?

A 5th suggestion:  you can change the R code.  In the Windows version
1.3.1, I get these results:

Just like you, an error with the real name:

 > .Fortran("dog_dog", as.double(x), as.double(y), as.double(z))
 Error in .Fortran("dog_dog", as.double(x), as.double(y),
as.double(z)) : 
         C/Fortran function name not in load table

But add an extra underscore to the call and things are fine:

 > .Fortran("dog_dog_", as.double(x), as.double(y), as.double(z))
 [[1]]
 [1] 2

 [[2]]
 [1] 3

 [[3]]
 [1] 5

It seems like a fairly easy workaround to just append an extra
underscore to names when the compiler is doing this funny name
mangling.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From a215020 at agate.fmr.com  Fri Oct 12 16:20:33 2001
From: a215020 at agate.fmr.com (David Brahm)
Date: Fri, 12 Oct 2001 10:20:33 -0400 (EDT)
Subject: [R] More trouble with empty subsets
Message-ID: <200110121420.f9CEKXA28130@arbres1a.FMR.Com>

Here's another curious problem with empty subsets:
R> x <- as.factor(1:10)
R> x[] <- NA
  Error in "[<-.factor"(*tmp*, , value = NA) : 
      Argument "i" is missing, with no default

Bug, or merely different from S-Plus?

			       -- David Brahm (brahm at alum.mit.edu)

Peter Dalgaard <p.dalgaard at biostat.ku.dk> in thread [Trouble with 3-dots] said:
> Time might be better spent figuring out why 
> > "[<-"(x,value=0)
> Error: SubAssignArgs: invalid number of arguments
> whereas x[]<-0 works fine. (So does "[<-"(x,,value=0), which could be
> part of the explanation).
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Oct 12 16:21:36 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 12 Oct 2001 15:21:36 +0100 (BST)
Subject: [R] Underscores and Fortran code
In-Reply-To: <h1udst4r139vr8pthtun47vvnvbsljo9qi@4ax.com>
Message-ID: <Pine.LNX.4.31.0110121514000.4868-100000@gannet.stats>

On Fri, 12 Oct 2001, Duncan Murdoch wrote:

> On Thu, 11 Oct 2001 16:48:12 -0400, you wrote in message
> <15302.1420.571215.515265 at minke.stat.ufl.edu>:
>
> >Any suggestions are welcome.  Am I missing anything?
>
> A 5th suggestion:  you can change the R code.  In the Windows version
> 1.3.1, I get these results:
>
> Just like you, an error with the real name:
>
>  > .Fortran("dog_dog", as.double(x), as.double(y), as.double(z))
>  Error in .Fortran("dog_dog", as.double(x), as.double(y),
> as.double(z)) :
>          C/Fortran function name not in load table
>
> But add an extra underscore to the call and things are fine:
>
>  > .Fortran("dog_dog_", as.double(x), as.double(y), as.double(z))
>  [[1]]
>  [1] 2
>
>  [[2]]
>  [1] 3
>
>  [[3]]
>  [1] 5
>
> It seems like a fairly easy workaround to just append an extra
> underscore to names when the compiler is doing this funny name
> mangling.

BTW, _ is not valid in an ISO Fortran 77 name, so this is all about
compiler-specific extensions.  On Solaris f77 does not add, g77 does.

We could make .Fortran do this automatically ....   (I mean try
dog_dog_ then dog_dog__)   However F77_CALL etc would still be
wrong, and I am inclined to suggest we do adopt -fno-second-underscore
with g77.  Or advise people to use standard-conforming Fortran 77 ....


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Oct 12 16:27:50 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 12 Oct 2001 15:27:50 +0100 (BST)
Subject: [R] More trouble with empty subsets
In-Reply-To: <200110121420.f9CEKXA28130@arbres1a.FMR.Com>
Message-ID: <Pine.LNX.4.31.0110121527050.4868-100000@gannet.stats>

On Fri, 12 Oct 2001, David Brahm wrote:

> Here's another curious problem with empty subsets:
> R> x <- as.factor(1:10)
> R> x[] <- NA
>   Error in "[<-.factor"(*tmp*, , value = NA) :
>       Argument "i" is missing, with no default
>
> Bug, or merely different from S-Plus?

Bug already fixed in R-devel, so please tell us the version when
reporting.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From a215020 at agate.fmr.com  Fri Oct 12 16:27:39 2001
From: a215020 at agate.fmr.com (David Brahm)
Date: Fri, 12 Oct 2001 10:27:39 -0400 (EDT)
Subject: [R] lib.fixup
Message-ID: <200110121427.f9CERdo28221@arbres1a.FMR.Com>

Hi, all,

Can anyone tell me what this line in library() does?
  .Internal(lib.fixup(env, .GlobalEnv))

The reason I ask is that I'm writing a function that uses a bit of library()
code, and I want to know if I should include it:

  g.data.attach <- function(dir, pos=2) {
    env <- attach(NULL, pos, paste("package",basename(dir),sep=":"))
    attr(env, "path") <- dir
    sys.source(file.path(dir, "R", basename(dir)), env, keep.source=F)
  }

Thanks!  I'll try to make this my last message for today!

			  -- David Brahm (brahm at alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From duncan at research.bell-labs.com  Fri Oct 12 16:28:28 2001
From: duncan at research.bell-labs.com (Duncan Temple Lang)
Date: Fri, 12 Oct 2001 10:28:28 -0400
Subject: [R] Underscores and Fortran code
In-Reply-To: <h1udst4r139vr8pthtun47vvnvbsljo9qi@4ax.com>; from murdoch@stats.uwo.ca on Fri, Oct 12, 2001 at 10:06:08AM -0400
References: <15302.1420.571215.515265@minke.stat.ufl.edu> <h1udst4r139vr8pthtun47vvnvbsljo9qi@4ax.com>
Message-ID: <20011012102828.A17424@jessie.research.bell-labs.com>


And a 6th way to approach this is to use the mechanism for registering
native routines with R. This allows a shared library to explicitly
tell R what routines can be called by users using the .Fortran(),
.C(), .Call() and .External() functions, and it allows you to
associate alias names for each routine.  Then you can use those names
in the .Fortran() call, rather than the actual name.  This avoids the
entire dynamic lookup and the Fortran underscore problem.

A quick example might help. Suppose we want to create a shared library
named "myLib" and it contains one Fortran routine, named "__doit_".
Rather than use .Fortran("__doit"), suppose we want to call it
as .Fortran("myRoutine"). Then we can create the following
routine in our shared library and R will take care of 
registering the routines and mapping 
       .Fortran("myRoutine")
to a call to __doit_().

void R_init_myLib(DllInfo *dll)
{
  R_FortranMethodDef fortranRoutines[] = {
    { "myRoutine", (DL_FUNC) &__doit_, -1 },
    NULL
  };
    R_registerRoutines(dll, NULL, NULL, fortranRoutines, NULL);
}

(I can't recall off-hand about whether the you should use (DL_FUNC)
&__doit_ or (DL_FUNC) &__doit in the array definition. But the
compiler will let you know very quickly.)

Then when the library is loaded, .Fortran("myRoutine", ......) should
work just fine.

Each of the libraries in the R distribution uses this registration
mechanism and you can look there for examples. (Unfortunately none
contain Fortran examples.) Additionally, there is a short description
in the upcoming R newsletter and a slightly more cryptic description
available at
  http://cm.bell-labs.com/stat/duncan/DynamicCSymbols.ps

This may or may not be easier than any of the other 5 approaches
mentioned previously.  It is probably the least intrusive and most
portable of all however, so is probably worth it if you can recompile
the shared library (or link it into a new one).

Please let me know if there are any problems if you do use it. 

 D.



Duncan Murdoch wrote:
> On Thu, 11 Oct 2001 16:48:12 -0400, you wrote in message
> <15302.1420.571215.515265 at minke.stat.ufl.edu>:
> 
> >Any suggestions are welcome.  Am I missing anything?
> 
> A 5th suggestion:  you can change the R code.  In the Windows version
> 1.3.1, I get these results:
> 
> Just like you, an error with the real name:
> 
>  > .Fortran("dog_dog", as.double(x), as.double(y), as.double(z))
>  Error in .Fortran("dog_dog", as.double(x), as.double(y),
> as.double(z)) : 
>          C/Fortran function name not in load table
> 
> But add an extra underscore to the call and things are fine:
> 
>  > .Fortran("dog_dog_", as.double(x), as.double(y), as.double(z))
>  [[1]]
>  [1] 2
> 
>  [[2]]
>  [1] 3
> 
>  [[3]]
>  [1] 5
> 
> It seems like a fairly easy workaround to just append an extra
> underscore to names when the compiler is doing this funny name
> mangling.
> 
> Duncan Murdoch
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan at research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pgilbert at bank-banque-canada.ca  Fri Oct 12 16:30:29 2001
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 12 Oct 2001 10:30:29 -0400
Subject: [R] Econometrics ...
References: <B7EC7DE3.B976%pflugshaupt@geobot.umnw.ethz.ch> <3BC6EBAC.C07DA6FC@acadiau.ca>
Message-ID: <3BC6FE85.F1BC1CC4@bank-banque-canada.ca>

John Janmaat wrote:

> Is there a package available for R which generates output
commonly used
> by econometricians (eg., the Durbin-Watson statistic for serial

> correlation in regression residuals)?  I'm pretty sure most of
the stuff
> is out there in assorted packages, under different names.

That's a broad subject area, it would be a pretty big package. My
small part of it (the "dse" and "dseplus" bundles on CRAN) is
already already divided into many packages. You should also look
at "ts", "tseries",  and "strucchange". These are mostly about
time series and not other areas of econometrics. Also, as far as
I know, there is nothing that does structural modelling of time
series as is popular in some econometrics circles, although dse
has a (broken) interface to software that does that.

> However, it
> would make my life, and that of my students, easier if it was
all in one package.

I do appreciate this concern. Perhaps you or some of your
students might draft a roadmap. I would be happy to help wrt my
packages.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From laurent at cbs.dtu.dk  Fri Oct 12 16:52:27 2001
From: laurent at cbs.dtu.dk (Laurent Gautier)
Date: Fri, 12 Oct 2001 16:52:27 +0200
Subject: [R] Econometrics ...
References: <B7EC7DE3.B976%pflugshaupt@geobot.umnw.ethz.ch> <3BC6EBAC.C07DA6FC@acadiau.ca>
Message-ID: <3BC703AB.FB5A2FDD@cbs.dtu.dk>

John Janmaat wrote:
> 
> Hello,
> 
> Is there a package available for R which generates output commonly used
> by econometricians (eg., the Durbin-Watson statistic for serial
> correlation in regression residuals)?  I'm pretty sure most of the stuff
> is out there in assorted packages, under different names.  However, it
> would make my life, and that of my students, easier if it was all in one
> package.
> 
> Thanks,
> 
> John.
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._



Hi,


> help.search("autocorrelation")

Help files with alias or title matching `autocorrelation',
type `help(FOO, package = PKG)' to inspect entry `FOO(PKG) TITLE':

ACF(nlme)               Autocorrelation Function
ACF.gls(nlme)           Autocorrelation Function for gls Residuals
ACF.lme(nlme)           Autocorrelation Function for lme Residuals
acf(ts)                 Autocovariance and Autocorrelation Function
                        Estimation
plot.acf(ts)            Plotting Autocovariance and Autocorrelation
                        Functions



Hopin' it helps,





Laurent





-- 
Laurent Gautier			CBS, Building 208, DTU
PhD. Student			D-2800 Lyngby,Denmark	
tel: +45 45 25 24 85		http://www.cbs.dtu.dk/laurent
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From doraiss at auburn.edu  Fri Oct 12 17:22:55 2001
From: doraiss at auburn.edu (Sundar Dorai-Raj)
Date: Fri, 12 Oct 2001 10:22:55 -0500
Subject: [R] adding text to persp
Message-ID: <000201c15331$c42470f0$4a35cc83@sundar>

Any ideas on adding text to persp plots? The perspp function from S-plus
is not implemented. I'm using R1.3.0 on Win2000.

Thanks,

Sundar

--
Sundar Dorai-Raj, Ph.D.
Assistant Professor
Discrete & Statistical Sciences   Office: (334) 844-3647
231 Allison Lab                   Fax: (334) 844-3611
Auburn University                 Email: dorairaj at dms.auburn.edu
Auburn AL 36849-5307              http://www.dms.auburn.edu/~dorairaj/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Fri Oct 12 17:23:41 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Fri, 12 Oct 2001 08:23:41 -0700 (PDT)
Subject: [R] lib.fixup
In-Reply-To: <200110121427.f9CERdo28221@arbres1a.FMR.Com>
Message-ID: <Pine.A41.4.33.0110120821150.66172-100000@homer38.u.washington.edu>

On Fri, 12 Oct 2001, David Brahm wrote:

> Hi, all,
>
> Can anyone tell me what this line in library() does?
>   .Internal(lib.fixup(env, .GlobalEnv))

It mangles the environments of the objects you've created so that they
aren't saved with the rest of the workspace.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kestickler at netscape.net  Fri Oct 12 17:41:08 2001
From: kestickler at netscape.net (kestickler@netscape.net)
Date: Fri, 12 Oct 2001 11:41:08 -0400
Subject: [R] RGui innards questions
Message-ID: <5ABC6330.615AC55A.0F79CEED@netscape.net>

Hi,

i would like to find out more on how Rgui works. Is there any
documentation that details how RGui interfaces with the R language &
environment. So, i would like to know things such as:

- What language is RGui built in (source available?)
- What language is RTerm built in?
- how does the output of an R command get directed to the terminal
window in RGui?

It seems to me that RGui is RTerm packaged in an application with a
several convenient GUI capabilities. RGui must then be able to
somehow embed RTerm & capture the graphing window produced when plotting.
How is this implemented (especially if RTerm and RGui
are written in different languages)?

Thanks for any information.

ken



__________________________________________________________________




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jfox at mcmaster.ca  Fri Oct 12 18:47:05 2001
From: jfox at mcmaster.ca (John Fox)
Date: Fri, 12 Oct 2001 12:47:05 -0400
Subject: [R] Econometrics ...
In-Reply-To: <3BC6EBAC.C07DA6FC@acadiau.ca>
References: <B7EC7DE3.B976%pflugshaupt@geobot.umnw.ethz.ch>
Message-ID: <5.1.0.14.2.20011012124438.01beb8d0@mcmail.cis.mcmaster.ca>

At 10:10 AM 12/10/2001 -0300, John Janmaat wrote:

>Is there a package available for R which generates output commonly used
>by econometricians (eg., the Durbin-Watson statistic for serial
>correlation in regression residuals)?  I'm pretty sure most of the stuff
>is out there in assorted packages, under different names.  However, it
>would make my life, and that of my students, easier if it was all in one
>package.

Dear John,

The car package has some things that may be of use to you, including 
Durbin-Watson statistics (with p-values) and heteroscedasticity-corrected 
coefficient covariance matrices. The sem package has some functions for 
fitting structural-equation models.

I hope that this is of help,
  John


-----------------------------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario, Canada L8S 4M4
email: jfox at mcmaster.ca
phone: 905-525-9140x23604
web: www.socsci.mcmaster.ca/jfox
-----------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Oct 12 19:07:36 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 12 Oct 2001 18:07:36 +0100 (BST)
Subject: [R] RGui innards questions
In-Reply-To: <5ABC6330.615AC55A.0F79CEED@netscape.net>
Message-ID: <Pine.GSO.4.31.0110121802040.18288-100000@auk.stats>

R is Open Source, so just download the source from where you got the
binaries (and where you got the binaries is required to have it).
You want the file R-1.3.1.tgz.

The source code is the documentation.

That will save you guessing (and most of your guesses are wrong: Rgui and
Rterm are different C front-ends to R.dll which contains almost all the
code).


On Fri, 12 Oct 2001 kestickler at netscape.net wrote:

> Hi,
>
> i would like to find out more on how Rgui works. Is there any
> documentation that details how RGui interfaces with the R language &
> environment. So, i would like to know things such as:
>
> - What language is RGui built in (source available?)
> - What language is RTerm built in?
> - how does the output of an R command get directed to the terminal
> window in RGui?
>
> It seems to me that RGui is RTerm packaged in an application with a
> several convenient GUI capabilities. RGui must then be able to
> somehow embed RTerm & capture the graphing window produced when plotting.
> How is this implemented (especially if RTerm and RGui
> are written in different languages)?
>
> Thanks for any information.
>
> ken
>
>
>
> __________________________________________________________________
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From siim at obs.ee  Fri Oct 12 19:29:32 2001
From: siim at obs.ee (Ott Toomet)
Date: Fri, 12 Oct 2001 19:29:32 +0200 (CEST)
Subject: [R] Econometrics ...
In-Reply-To: <3BC703AB.FB5A2FDD@cbs.dtu.dk>
Message-ID: <Pine.LNX.4.33.0110121910001.1463-100000@ecopc15.eco.au.dk>

Hi,

I think an econometric package is needed.  R is more oriented to general
statistics (at least from my viewpoint) and lacks some commonly used
econometric methods, some other methods are spread in different packages.
Third problem is that many functions use algorithms, not common in econometrics
(e.g. neural networks).

I think we need at first a package wich is able to do a most basic
econometrics (I am not a time series man, so I drop the time series stuff,
these are just problems I have encountered):

econometrical modelling including
ols           (alias to lm())
logit, probit (alias to glm()?)
nlls          (glm()?)
perhaps multinominal logit, using ML method
tobit model
...

and the common tests including white heteroscedastisity, White
Heteroscedasticity-consistent t-values, Durbin-Watson etc..

These functions and tests should be in a form, common and easily
understandable for economists and students, eg to write

model <- logit( y~x)
summary( model, white.t=TRUE)
...


I think the functions, given in other packages should somehow repeated, at
least when the method is a bit unfamiliar for econometrics.  Of course, this
package cannot include everything in econometrics, but perhaps enough for a
basic course.  Additionally, it can made ,,covers'' of e.g. tseries package,
aliasing the functions there in a more common form, but I think it is not a
main issue.

I could well help with the functions I have, but unfortunately I cannot
maintain a whole new package right now.

best wishes,

Ott Toomet




> John Janmaat wrote:
> >
> > Hello,
> >
> > Is there a package available for R which generates output commonly used
> > by econometricians (eg., the Durbin-Watson statistic for serial
> > correlation in regression residuals)?  I'm pretty sure most of the stuff
> > is out there in assorted packages, under different names.  However, it
> > would make my life, and that of my students, easier if it was all in one
> > package.
> >
> > Thanks,
> >
> > John.
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gregory_r_warnes at groton.pfizer.com  Fri Oct 12 19:33:28 2001
From: gregory_r_warnes at groton.pfizer.com (Warnes, Gregory R)
Date: Fri, 12 Oct 2001 13:33:28 -0400
Subject: [R] Econometrics ...
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEEF2@groexmbcr02.pfizer.com>



 >  From: Paul Gilbert [mailto:pgilbert at bank-banque-canada.ca]
 >  
 >  John Janmaat wrote:
 >  
 >  > Is there a package available for R which generates output
 >  commonly used
 >  > by econometricians (eg., the Durbin-Watson statistic for serial
 >  
 >  > correlation in regression residuals)?  I'm pretty sure most of
 >  the stuff
 >  > is out there in assorted packages, under different names.
 >  
 >  That's a broad subject area, it would be a pretty big package. My
 >  small part of it (the "dse" and "dseplus" bundles on CRAN) is
 >  already already divided into many packages. You should also look
 >  at "ts", "tseries",  and "strucchange". 

 [...]

 >  > However, it
 >  > would make my life, and that of my students, easier if it was
 >  all in one package.

Perhaps the simplest thing in the short term would be to create a
'meta-package' that simply 'requires' the individual packages...

-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From agehr at mozart.depaul.edu  Fri Oct 12 19:45:16 2001
From: agehr at mozart.depaul.edu (Adam Gehr)
Date: Fri, 12 Oct 2001 12:45:16 -0500
Subject: [R] lr with positive coeffs
References: <3BC6E0B1.1EF236B6@delacyassociates.com>
Message-ID: <3BC72C2C.459785D1@mozart.fin.depaul.edu>

I've used the quadratic programming (quadprog) routine to
run a constrained
regression routine including non-negativity constraints.

   Adam Gehr

Sandor Lehoczky wrote:
> 
> Is there any way in R to do a linear regression with positive
> coefficients only?
> 
> Thanks for any help!
> 
> Sandor Lehoczky
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Fri Oct 12 20:59:57 2001
From: ben at zoo.ufl.edu (Ben Bolker)
Date: Fri, 12 Oct 2001 14:59:57 -0400 (EDT)
Subject: [R] Econometrics ...
In-Reply-To: <Pine.LNX.4.33.0110121910001.1463-100000@ecopc15.eco.au.dk>
Message-ID: <Pine.LNX.4.30.0110121419320.17467-100000@bolker.zoo.ufl.edu>


  My two cents --
  Constructing and maintaining an elaborate alias structure just so people
can write logit(y ~ x) rather than glm(y~x,link=logit) [etc.] seems like a
bad idea to me. A "meta-package" (as Greg Warnes suggested), and a small
discipline-specific document like those Jonathan Baron and Pete St. Onge
have written or started to write for psychology and ecology (see the
Contributed Documentation on CRAN), seem like a better way to go.  (The
package could also include useful discipline-specific tools that don't
already exist.) Among other problems, we're all going to go crazy when
people start to write in to the R help list for help with the logit(),
ols(), etc., etc., functions that none of us have heard of.  [It also
might not be an entirely bad thing if econometricians (for example)
learned that the rest of the world has something called a GLM that does
what they know of as logit and probit models.]

  Ben Bolker

On Fri, 12 Oct 2001, Ott Toomet wrote:

> Hi,
>
> I think an econometric package is needed.  R is more oriented to general
> statistics (at least from my viewpoint) and lacks some commonly used
> econometric methods, some other methods are spread in different packages.
> Third problem is that many functions use algorithms, not common in econometrics
> (e.g. neural networks).
>
> I think we need at first a package wich is able to do a most basic
> econometrics (I am not a time series man, so I drop the time series stuff,
> these are just problems I have encountered):
>
> econometrical modelling including
> ols           (alias to lm())
> logit, probit (alias to glm()?)
> nlls          (glm()?)
> perhaps multinominal logit, using ML method
> tobit model
> ...
>
> and the common tests including white heteroscedastisity, White
> Heteroscedasticity-consistent t-values, Durbin-Watson etc..
>
> These functions and tests should be in a form, common and easily
> understandable for economists and students, eg to write
>
> model <- logit( y~x)
> summary( model, white.t=TRUE)
> ...
>
>
> I think the functions, given in other packages should somehow repeated, at
> least when the method is a bit unfamiliar for econometrics.  Of course, this
> package cannot include everything in econometrics, but perhaps enough for a
> basic course.  Additionally, it can made ,,covers'' of e.g. tseries package,
> aliasing the functions there in a more common form, but I think it is not a
> main issue.
>
> I could well help with the functions I have, but unfortunately I cannot
> maintain a whole new package right now.
>
> best wishes,
>
> Ott Toomet
>
>
>
>
> > John Janmaat wrote:
> > >
> > > Hello,
> > >
> > > Is there a package available for R which generates output commonly used
> > > by econometricians (eg., the Durbin-Watson statistic for serial
> > > correlation in regression residuals)?  I'm pretty sure most of the stuff
> > > is out there in assorted packages, under different names.  However, it
> > > would make my life, and that of my students, easier if it was all in one
> > > package.
> > >
> > > Thanks,
> > >
> > > John.
> > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker at zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hodgess at uhddx01.dt.uh.edu  Sat Oct 13 19:32:49 2001
From: hodgess at uhddx01.dt.uh.edu (Erin Hodgess)
Date: Sat, 13 Oct 2001 12:32:49 -0500 (CDT)
Subject: [R] hist and normal curve
Message-ID: <200110131732.MAA10008@uhddx01.dt.uh.edu>

Dear R people:

I would like to superimpose a normal curve on a histogram.

I've seen this example in a book, somewhere.

I know that you draw the hist, get the mean and sd
of the data set, but then I'm stuck.

Could you help, please?

Thanks!
Erin

hodgess at uhddx01.dt.uh.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andy_royle at fws.gov  Sat Oct 13 21:50:01 2001
From: andy_royle at fws.gov (Andy Royle)
Date: Sat, 13 Oct 2001 15:50:01 -0400
Subject: [R] corrupted .RData
Message-ID: <3BC89AE9.7A338214@fws.gov>

Hello All, 

I'm suffering from a corrupted .RData which I believe
arose from a shutdown while the session was in the
process of saving the image. I wonder if theres
something I can do to recover the data?
(the fatal error message is contained below)

Unfortunately, there was quite a bit of new
code prior to my latest backup, which I would
hate to rewrite.

kind regards
andy



/data2/royle/NWI> R13 --vsize 100M --nsize 1000000

R : Copyright 2001, The R Development Core Team
Version 1.3.0  (2001-06-22)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

Error: an xdr real data read error occured
Fatal error: unable to restore saved data
 (remove .RData or increase memory)




-- 
J. Andy Royle
U.S. Fish and Wildlife Service
Div. of Migratory Bird Mgmt.
11510 American Holly Drive 
Laurel, MD 20708-4017

phone: 301-497-5673; fax: 301-497-5706 
email - royle at penguin.fws.gov
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hodgess at uhddx01.dt.uh.edu  Sat Oct 13 22:12:44 2001
From: hodgess at uhddx01.dt.uh.edu (Erin Hodgess)
Date: Sat, 13 Oct 2001 15:12:44 -0500 (CDT)
Subject: [R] Solution to hist/normal curve
Message-ID: <200110132012.PAA11026@uhddx01.dt.uh.edu>

Dear R People:

I found the solution to the histogram question
in Phil Spector's book, "An Introduction to S 
and S Plus".

The code from the example is found on page 202
and the graph is displayed on page 204.

Thanks anyway!

Sincerely,
Erin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hodgess at uhddx01.dt.uh.edu  Sat Oct 13 22:45:26 2001
From: hodgess at uhddx01.dt.uh.edu (Erin Hodgess)
Date: Sat, 13 Oct 2001 15:45:26 -0500 (CDT)
Subject: [R] hist with relative frequency
Message-ID: <200110132045.PAA11187@uhddx01.dt.uh.edu>

Dear R People:

Here is yet another histogram question (yahq), please:

When I use the hist() command with
freq=F, I get density on the side.

I would really like to have relative frequency; that is,
Rf = density/(sum(density))

Is there a step that I'm leaving out, please?

thanks!

Sincerely,
Erin
hodgess at uhddx01.dt.uh.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Sun Oct 14 00:52:24 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Oct 2001 00:52:24 +0200
Subject: [R] hist with relative frequency
In-Reply-To: <200110132045.PAA11187@uhddx01.dt.uh.edu>
References: <200110132045.PAA11187@uhddx01.dt.uh.edu>
Message-ID: <x2elo72lw7.fsf@blueberry.kubism.ku.dk>

Erin Hodgess <hodgess at uhddx01.dt.uh.edu> writes:

> Dear R People:
> 
> Here is yet another histogram question (yahq), please:
> 
> When I use the hist() command with
> freq=F, I get density on the side.
> 
> I would really like to have relative frequency; that is,
> Rf = density/(sum(density))
> 
> Is there a step that I'm leaving out, please?

Several people would probably contest that that is really what you
want (histograms are supposed to be density estimates), but if you
insist then you could use x <- hist(..., plot=F), normalize the count
or density component, then plot(x).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ralphl at lrz.uni-muenchen.de  Sun Oct 14 16:26:15 2001
From: ralphl at lrz.uni-muenchen.de (Ralph Leonhardt)
Date: Sun, 14 Oct 2001 16:26:15 +0200
Subject: [R] Econometrics ...
References: <Pine.LNX.4.33.0110121910001.1463-100000@ecopc15.eco.au.dk>
Message-ID: <3BC9A087.9BAB8F8A@lrz.uni-muenchen.de>

Ott Toomet wrote:


> tobit model
I used  the survival library for it. But a wrapper for this special
purpose would be convenient.

> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From richmond at saintmarys.edu  Sun Oct 14 19:44:09 2001
From: richmond at saintmarys.edu (David A Richmond)
Date: Sun, 14 Oct 2001 12:44:09 -0500 (EST)
Subject: [R] recursive functions and global variables
Message-ID: <Pine.GSO.4.20.0110141232360.26958-100000@jade.saintmarys.edu>

Hi,
	I am trying to write a recursive routine which passes some
variables through the function calls but also refers to some global
variables. I need the global variables because they are very big (n by n
matrices where n is <= 1000) and I don't have the huge amount of memory
needed to spawn dozens of copies of these matrices. The problem seems to
be that while variables in the root environment of R are global, variables
created in a function func1() are not available in functions called by
func1(). (See the example below.) So I need a way to create some variables
at the root level of a function that are available at any level
'underneath' the base function level. Note also that I want to be able to
modify elements that are at a higher level as well. 

dave



#start
b<-0
rm(b)

test <- function(x) {
	b <- x^2
	test2()
}

test2 <- function() {
	return(b+1.1)
}	

print(test(3))
#end

returns:
Error in test2() : Object "b" not found

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|David Richmond                It works on a          |      
+ Dept. of Sociology          complex scientific      + 
|Saint Mary's College          principle, known as    |  
+ Notre Dame, IN 46556               "pot luck."      +
|219-284-4517                    - The Doctor         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Sun Oct 14 20:49:49 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Sun, 14 Oct 2001 11:49:49 -0700 (PDT)
Subject: [R] recursive functions and global variables
In-Reply-To: <Pine.GSO.4.20.0110141232360.26958-100000@jade.saintmarys.edu>
Message-ID: <Pine.A41.4.33.0110141142250.24836-100000@homer18.u.washington.edu>

On Sun, 14 Oct 2001, David A Richmond wrote:

> Hi,
> 	I am trying to write a recursive routine which passes some
> variables through the function calls but also refers to some global
> variables. I need the global variables because they are very big (n by n
> matrices where n is <= 1000) and I don't have the huge amount of memory
> needed to spawn dozens of copies of these matrices. The problem seems to
> be that while variables in the root environment of R are global, variables
> created in a function func1() are not available in functions called by
> func1(). (See the example below.) So I need a way to create some variables
> at the root level of a function that are available at any level
> 'underneath' the base function level. Note also that I want to be able to
> modify elements that are at a higher level as well.
>

You probably want to use a named environment. There's an example in the
`Programmer's Niche' section of the 2nd R newsletter, on the R home page.

Basically, you create an environment like

   storage<-new.env()

and pass it down through your functions. You can then use get() and
assign() to retrieve and modify objects in this environment.

This is often the R way to handle issues for which S-PLUS programmers
would use 'frame 0' and 'frame 1'.


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.murrell at auckland.ac.nz  Mon Oct 15 00:28:56 2001
From: p.murrell at auckland.ac.nz (Paul Murrell)
Date: Mon, 15 Oct 2001 11:28:56 +1300
Subject: [R] adding text to persp
References: <000201c15331$c42470f0$4a35cc83@sundar>
Message-ID: <009301c154ff$9d308180$175dd882@stat.auckland.ac.nz>

Hi


> Any ideas on adding text to persp plots? The perspp function from S-plus
> is not implemented. I'm using R1.3.0 on Win2000.


One thing that might be useful to try is something like ...

    persp(1:10, 1:10, outer(1:10, 1:10))
    text(locator(1), "Here's some text")  # click on graph where you want
text

Paul



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From richmond at saintmarys.edu  Mon Oct 15 03:00:49 2001
From: richmond at saintmarys.edu (David A Richmond)
Date: Sun, 14 Oct 2001 20:00:49 -0500 (EST)
Subject: [R] recursive functions and global variables
In-Reply-To: <Pine.A41.4.33.0110141142250.24836-100000@homer18.u.washington.edu>
Message-ID: <Pine.GSO.4.20.0110141954020.12070-100000@jade.saintmarys.edu>

Hi again, 
	OK, I figured out how to get "new.env()" and "environment <-"
(thanks for the advice!) to allow called functions to access the variables
_created_ in the calling functions, but not the variables passed to the
calling function in the first place. For example, consider:

test <- function(x) {
	new.env-> storage
	environment<-storage
	b <- x^2
	test2(storage)
}

test2 <- function(e) {
	environment <- e
	cat("x =",x,"\n")
	cat("b =",b,"\n")
	return(b+1.1)
}	

test(3)

This fails in 'cat("x =",x,"\n")' because test2() doesn't know what "x" is
because it wasn't created in test(), but rather was a value passed to
test. Is there any way to get test2() to recognize this variable? (I know
I could simply make a copy x2 <- x in test(), but I'm trying to save
space, in my final application the 'x' will be a big array.

dave


On Sun, 14 Oct 2001, Thomas Lumley wrote:

> On Sun, 14 Oct 2001, David A Richmond wrote:
> 
> > Hi,
> > 	I am trying to write a recursive routine which passes some
> > variables through the function calls but also refers to some global
> > variables. I need the global variables because they are very big (n by n
> > matrices where n is <= 1000) and I don't have the huge amount of memory
> > needed to spawn dozens of copies of these matrices. The problem seems to
> > be that while variables in the root environment of R are global, variables
> > created in a function func1() are not available in functions called by
> > func1(). (See the example below.) So I need a way to create some variables
> > at the root level of a function that are available at any level
> > 'underneath' the base function level. Note also that I want to be able to
> > modify elements that are at a higher level as well.
> >
> 
> You probably want to use a named environment. There's an example in the
> `Programmer's Niche' section of the 2nd R newsletter, on the R home page.
> 
> Basically, you create an environment like
> 
>    storage<-new.env()
> 
> and pass it down through your functions. You can then use get() and
> assign() to retrieve and modify objects in this environment.
> 
> This is often the R way to handle issues for which S-PLUS programmers
> would use 'frame 0' and 'frame 1'.
> 
> 
> 	-thomas
> 
> Thomas Lumley			Asst. Professor, Biostatistics
> tlumley at u.washington.edu	University of Washington, Seattle
> 
> 

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|David Richmond                It works on a          |      
+ Dept. of Sociology          complex scientific      + 
|Saint Mary's College          principle, known as    |  
+ Notre Dame, IN 46556               "pot luck."      +
|219-284-4517                    - The Doctor         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wsi at gcal.ac.uk  Mon Oct 15 10:20:04 2001
From: wsi at gcal.ac.uk (Bill Simpson)
Date: Mon, 15 Oct 2001 09:20:04 +0100 (BST)
Subject: [R] hist and normal curve
In-Reply-To: <200110131732.MAA10008@uhddx01.dt.uh.edu>
Message-ID: <Pine.LNX.4.10.10110150919400.515-100000@localhost.localdomain>



On Sat, 13 Oct 2001, Erin Hodgess wrote:

> Dear R people:
> 
> I would like to superimpose a normal curve on a histogram.
x<-rnorm(150)
h<-hist(x,breaks=15)
xhist<-c(min(h$breaks),h$breaks)
yhist<-c(0,h$density,0)
xfit<-seq(min(x),max(x),length=40)
yfit<-dnorm(xfit,mean=mean(x),sd=sd(x))
plot(xhist,yhist,type="s",ylim=c(0,max(yhist,yfit)))
lines(xfit,yfit)

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From laurent at cbs.dtu.dk  Mon Oct 15 10:31:15 2001
From: laurent at cbs.dtu.dk (Laurent Gautier)
Date: Mon, 15 Oct 2001 10:31:15 +0200
Subject: [R] R-package and configure
Message-ID: <3BCA9ED3.7448541B@cbs.dtu.dk>

Dear R-helpers,



I have been trying to use the 'configure' feature offered to package
writters... but could make it work.
The matter may have been discussed before, and a rtfm answer with the
place the answer is found is perfect (but I read the 'writing R
extensions' manual).

The problem is:

In my C code I have code conditional to a defined macro. I used autoconf
the naive way (I am not an autoconf wizard) but the Makefile generated
seems of no use. Forgetting the use of something like 'DEFS=@DEFS@' I
tried to append say ' -DHAVE_ZLIB' to the 'CFLAGS' variable but it did
not give anything.
(note: I am using R-1.3.0... I plan to update)

Any idea ? 


Thanking in advance...




Laurent



-- 
Laurent Gautier			CBS, Building 208, DTU
PhD. Student			D-2800 Lyngby,Denmark	
tel: +45 45 25 24 85		http://www.cbs.dtu.dk/laurent
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kwan022 at stat.auckland.ac.nz  Mon Oct 15 10:44:23 2001
From: kwan022 at stat.auckland.ac.nz (Ko-Kang Kevin Wang)
Date: Mon, 15 Oct 2001 21:44:23 +1300 (NZDT)
Subject: [R] An Introduction to R - LaTeX Code
Message-ID: <Pine.SOL.4.21.0110152138490.18010-100000@stat1.stat.auckland.ac.nz>

Hi,

I am interested in seeing the LaTeX version of R manuals (such as An
Introduction to R), and I found from CRAN that:

"The texinfo sources of the latest version of these documents are
contained
in every R source distribution (in the subdirectory doc/manual of the
extracted archive). "

However when I went into that directory I only found the pdf and html
version.  Are there any other ways I can obtain a LaTeX version?

Thanks,

Ko-Kang Wang


------------------------------------------------------------------------------
Ko-Kang Kevin Wang
Statistical Analysis Division Leader
Software Developers' Klub (SDK)
University of Auckland
New Zealand

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ligges at statistik.uni-dortmund.de  Mon Oct 15 11:05:52 2001
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 15 Oct 2001 11:05:52 +0200
Subject: [R] An Introduction to R - LaTeX Code
References: <Pine.SOL.4.21.0110152138490.18010-100000@stat1.stat.auckland.ac.nz>
Message-ID: <3BCAA6F0.6CE45917@statistik.uni-dortmund.de>



Ko-Kang Kevin Wang wrote:
> 
> Hi,
> 
> I am interested in seeing the LaTeX version of R manuals (such as An
> Introduction to R), and I found from CRAN that:
> 
> "The texinfo sources of the latest version of these documents are
> contained in every R source distribution (in the subdirectory 
> doc/manual of the extracted archive). "
> 
> However when I went into that directory I only found the pdf and html
> version.  Are there any other ways I can obtain a LaTeX version?

And they are in doc/manual ...
Did you really download the *source* distribution (at
CRAN/src/base/R-1.3.1.tgz) or did you install a binary version of R
(e.g. that one of windows)?

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kwan022 at stat.auckland.ac.nz  Mon Oct 15 11:11:33 2001
From: kwan022 at stat.auckland.ac.nz (Ko-Kang Kevin Wang)
Date: Mon, 15 Oct 2001 22:11:33 +1300 (NZDT)
Subject: [R] An Introduction to R - LaTeX Code
In-Reply-To: <3BCAA6F0.6CE45917@statistik.uni-dortmund.de>
Message-ID: <Pine.SOL.4.21.0110152211180.18010-100000@stat1.stat.auckland.ac.nz>

Whoops.

Yes that solves the problem, thanks a lot.

Ko-Kang

On Mon, 15 Oct 2001, Uwe Ligges wrote:

> Date: Mon, 15 Oct 2001 11:05:52 +0200
> From: Uwe Ligges <ligges at statistik.uni-dortmund.de>
> To: Ko-Kang Kevin Wang <kwan022 at stat.auckland.ac.nz>
> Cc: R Help <r-help at stat.math.ethz.ch>
> Subject: Re: [R] An Introduction to R - LaTeX Code
> 
> 
> 
> Ko-Kang Kevin Wang wrote:
> > 
> > Hi,
> > 
> > I am interested in seeing the LaTeX version of R manuals (such as An
> > Introduction to R), and I found from CRAN that:
> > 
> > "The texinfo sources of the latest version of these documents are
> > contained in every R source distribution (in the subdirectory 
> > doc/manual of the extracted archive). "
> > 
> > However when I went into that directory I only found the pdf and html
> > version.  Are there any other ways I can obtain a LaTeX version?
> 
> And they are in doc/manual ...
> Did you really download the *source* distribution (at
> CRAN/src/base/R-1.3.1.tgz) or did you install a binary version of R
> (e.g. that one of windows)?
> 
> Uwe Ligges
> 

------------------------------------------------------------------------------
Ko-Kang Kevin Wang
Statistical Analysis Division Leader
Software Developers' Klub (SDK)
University of Auckland
New Zealand

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Mon Oct 15 11:39:24 2001
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 15 Oct 2001 11:39:24 +0200
Subject: [R] Problems merging with POSIXct objects and all = TRUE
In-Reply-To: <15292.45107.369769.945864@gargle.gargle.HOWL>
References: <15292.45107.369769.945864@gargle.gargle.HOWL>
Message-ID: <15306.44748.628359.158743@gargle.gargle.HOWL>

>>>>> "David" == "David Kane <David Kane" <a296180 at mica.fmr.com> writes:

    David> I am having problems using merge with all = TRUE when one of the
    David> dataframes has objects of class POSIXct. If this is a bug, let
    David> me know and I will report it to r-bugs. Here is an example:

    ... (R version 1.3.0)

 > x <- data.frame(a = as.POSIXct(Sys.time() + (1:3)*10000), b = LETTERS[1:3])
 > x
		     a b
 1 2001-10-04 17:37:46 A
 2 2001-10-04 20:24:26 B
 3 2001-10-04 23:11:06 C

 > y <- data.frame(b = LETTERS[3:4], c = 1:2)
 > y
   b c
 1 C 1
 2 D 2

 > merge(x, y)
   b                   a c
 1 C 2001-10-04 23:11:06 1		# This answer is correct

 > merge(x, y, all = TRUE)
 Error in as.POSIXct.default(value) : Don't know how to convert `value' to class "POSIXct"

-------------

The reason is that merge(x,y, all = TRUE) fills in NAs at "appropriate"
places, and currently, it seems we have no (automatic) NA concept for
POSIX[cl]t objects:

 > as.POSIXlt(NA)
 Error in as.POSIXlt(NA) : Don't know how to convert `NA' to class "POSIXlt"
 > as.POSIXct(NA)
 Error in as.POSIXct.default(NA) : Don't know how to convert `NA' to class "POSIXct"
 > as.POSIXct("NA")
 Error in fromchar(x) : character string is not in a standard unambiguous format

This might be considered a bug although only in a loose sense of the word.

Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From luke at nokomis.stat.umn.edu  Mon Oct 15 12:18:18 2001
From: luke at nokomis.stat.umn.edu (Luke Tierney)
Date: Mon, 15 Oct 2001 05:18:18 -0500
Subject: [R] recursive functions and global variables
In-Reply-To: <Pine.GSO.4.20.0110141954020.12070-100000@jade.saintmarys.edu>; from richmond@saintmarys.edu on Sun, Oct 14, 2001 at 08:00:49PM -0500
References: <Pine.A41.4.33.0110141142250.24836-100000@homer18.u.washington.edu> <Pine.GSO.4.20.0110141954020.12070-100000@jade.saintmarys.edu>
Message-ID: <20011015051818.A16715@nokomis.stat.umn.edu>

On Sun, Oct 14, 2001 at 08:00:49PM -0500, David A Richmond wrote:
> Hi again, 
> 	OK, I figured out how to get "new.env()" and "environment <-"
> (thanks for the advice!) to allow called functions to access the variables
> _created_ in the calling functions, but not the variables passed to the
> calling function in the first place. For example, consider:
> 
> test <- function(x) {
> 	new.env-> storage
> 	environment<-storage
> 	b <- x^2
> 	test2(storage)
> }
> 
> test2 <- function(e) {
> 	environment <- e
> 	cat("x =",x,"\n")
> 	cat("b =",b,"\n")
> 	return(b+1.1)
> }	
> 
> test(3)
> 
> This fails in 'cat("x =",x,"\n")' because test2() doesn't know what "x" is
> because it wasn't created in test(), but rather was a value passed to
> test. Is there any way to get test2() to recognize this variable? (I know
> I could simply make a copy x2 <- x in test(), but I'm trying to save
> space, in my final application the 'x' will be a big array.
> 
> dave

new.env and environment are functions--assigning to them as variables
doesn't do anything useful. But do you really need explicit
environment manipulation or is ordinary lexical scoping of definitions
enough?  That is,

test <- function(x) {
    test2 <- function() {
 	cat("x =",x,"\n")
 	cat("b =",b,"\n")
 	return(b+1.1)
    }
    b <- x^2
    test2()
}

test(3)

If you want to use explicitly constructed environments then you need
to access their contents by explicit calls to get or by explicit evals
in the environment.

Your original motivation for this was to prevent copying, but
arguments to functions are not copied, just marked as needing to be
copied on modify. So you may not really need any of this.

> 
> > On Sun, 14 Oct 2001, David A Richmond wrote:
> > 
> > > Hi,
> > > 	I am trying to write a recursive routine which passes some
> > > variables through the function calls but also refers to some global
> > > variables. I need the global variables because they are very big (n by n
> > > matrices where n is <= 1000) and I don't have the huge amount of memory
> > > needed to spawn dozens of copies of these matrices. The problem seems to
> > > be that while variables in the root environment of R are global, variables
> > > created in a function func1() are not available in functions called by
> > > func1(). (See the example below.) So I need a way to create some variables
> > > at the root level of a function that are available at any level
> > > 'underneath' the base function level. Note also that I want to be able to
> > > modify elements that are at a higher level as well.
> > >
> > 
> > You probably want to use a named environment. There's an example in the
> > `Programmer's Niche' section of the 2nd R newsletter, on the R home page.
> > 
> > Basically, you create an environment like
> > 
> >    storage<-new.env()
> > 
> > and pass it down through your functions. You can then use get() and
> > assign() to retrieve and modify objects in this environment.
> > 
> > This is often the R way to handle issues for which S-PLUS programmers
> > would use 'frame 0' and 'frame 1'.
> > 
> > 
> > 	-thomas
> > 
> > Thomas Lumley			Asst. Professor, Biostatistics
> > tlumley at u.washington.edu	University of Washington, Seattle
> > 
> > 
> 
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
> |David Richmond                It works on a          |      
> + Dept. of Sociology          complex scientific      + 
> |Saint Mary's College          principle, known as    |  
> + Notre Dame, IN 46556               "pot luck."      +
> |219-284-4517                    - The Doctor         |
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke at stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From sawilopo at idola.net.id  Tue Oct 16 02:37:43 2001
From: sawilopo at idola.net.id (Dr. Siswanto A. Wilopo, Sc.D)
Date: Mon, 15 Oct 2001 17:37:43 -0700
Subject: No subject
Message-ID: <LDELLNIKGEFNALLNIJHBOEJCCBAA.sawilopo@idola.net.id>

[un]subscribe


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From sawilopo at idola.net.id  Tue Oct 16 02:37:46 2001
From: sawilopo at idola.net.id (Dr. Siswanto A. Wilopo, Sc.D)
Date: Mon, 15 Oct 2001 17:37:46 -0700
Subject: No subject
Message-ID: <LDELLNIKGEFNALLNIJHBAEJDCBAA.sawilopo@idola.net.id>


"[uns]subscribe"

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jefferis at stanford.edu  Mon Oct 15 14:33:01 2001
From: jefferis at stanford.edu (Greg Jefferis)
Date: Mon, 15 Oct 2001 05:33:01 -0700
Subject: [R] predict.fda difficulties
Message-ID: <B7F0258D.2AA2%jefferis@stanford.edu>

Dear Dr Hornik / R help list,

I am using the mda package and in particular the fda routine to classify a
set of 162 neurons falling in to 11 neuronal cell types according to 17
morphological variables.  I would like to use a cross-validation approach in
which I split the data, train with one part amd then test the predictive
accuracy of the discriminant functions with the remaining part.  However I
have come across a problem doing this with predict.fda.  If I try using the
trained FDA object to predict the test data, I frequently get an error
message like:

Error in factor(pclass, labels = dimnames(means)[[1]]) :
    invalid labels; length 11 should be 1 or 10

As far as I can tell this is because the test data set is small and one of
the classes has no predicted members.  I have attached some sample code
which produces this error.  I have also attached the traceback().  I am
using R 1.3.1 on MacOS 9.1 and the mda package is the version that Stefano
Iacus made for this release of R.

Am I trying to do something stupid?  Is there a step I have not taken?  Or
is this a bug in the predict.fda routine?  I would be very grateful for any
guidance you could offer.  Many thanks,

Greg Jefferis.
__________________________________________________________________________
Greg Jefferis,                          Lab Address: Liqun Luo, Herrin 144
Neurosciences PhD Programme &                e-mail: jefferis at stanford.edu
Dept Biological Sciences,                       Lab: (650) 725 5809
Gilbert Biology Building,                       Fax: (650) 723 0589
371 Serra Mall,
Stanford, CA 94305-5020.                       Home: (650) 497 1135



__________________________________________________________________________
Toy Example
____________

# Dummy cross-validation routine

set.seed(7771)

TotalN<-162
TestN<-80
TrainN<-TotalN-TestN
# Make a dummy frame with 11 kinds of "CellType" labels and 17 normal
variables
DummyCellTypes<-floor(runif(TotalN,0,11)+1)
DummyParams<-data.frame(CellType=DummyCellTypes,
    matrix(rnorm(TotalN*17),TotalN,17))
DummyParams$CellType<-factor(DummyParams$CellType)
table(DummyParams$CellType)

TrainFDAs<-list(100)
TestConfusions<-list(100)
TestErrs<-rep(-1,100)
i<-1
z<-0
runsum<-0

while(i<=100 & z<1000){
    z<-z+1
    TrainSample<-sample(1:TotalN,TrainN)

    # Check to see if any CellTypes are missing from the training
    # or test set as this will certainly cause an error.
    TrainMissing<-any(table(DummyParams$CellType[TrainSample])==0)
    TestMissing<-any(table(DummyParams$CellType[-TrainSample])==0)

    if(!TrainMissing & !TestMissing){

       TrainFDAs[[i]]<-fda(CellType~.,data=DummyParams[TrainSample,])

       #Predict CellTypes of the test data set with the training set FDA
       TP<-predict(TrainFDAs[[i]], DummyParams[-TrainSample,])
       TestConfusions[[i]]<-confusion(TP,DummyParams$CellType[-TrainSample])

       #Keep track of the error rate
       runsum<-runsum+attr(TestConfusions[[i]],"error")
       i<-i+1      
    }
}
cat("Mean prediction error : ",runsum/i,"for ", i," cross-validation
runs\n")

__________________________________________________________________________
traceback()
_______________
> traceback()
5: stop(paste("invalid labels; length", nl, "should be 1 or",
length(levels)))
4: factor(pclass, labels = dimnames(means)[[1]])
3: switch(type, variates = return(x), class = {
       n <- nrow(x)
       prior <- 2 * log(prior)
       mindist <- dist(x, means[1, ], dimension) - prior[1]
       pclass <- rep(1, n)
       for (i in seq(2, J)) {
           ndist <- dist(x, means[i, ], dimension) - prior[i]
           l <- ndist < mindist
           pclass[l] <- i
           mindist[l] <- ndist[l]
       }
       return(factor(pclass, labels = dimnames(means)[[1]]))
   }, posterior = {
       pclass <- matrix(0, nrow(x), J)
       for (i in seq(J)) pclass[, i] <- exp(-0.5 * dist(x, means[i,
           ], dimension)) * prior[i]
       dimnames(pclass) <- list(dimnames(x)[[1]], dimnames(means)[[1]])
       return(pclass/drop(pclass %*% rep(1, J)))
   }, hierarchical = {
       prior <- 2 * log(prior)
       Pclass <- vector("list", length(dimension.set))
       names(Pclass) <- paste("D", dimension.set, sep = "")
       for (ad in seq(along = dimension.set)) {
           d <- dimension.set[ad]
           dd <- seq(d)
           mindist <- dist(x[, dd, drop = F], means[1, dd, drop = F],
               d) - prior[1]
           pclass <- rep(1, nrow(x))
           for (i in seq(2, J)) {
               ndist <- dist(x[, dd, drop = F], means[i, dd, drop = F],
                   d) - prior[i]
               l <- ndist < mindist
               pclass[l] <- i
               mindist[l] <- ndist[l]
           }
           levels(pclass) <- dimnames(means)[[1]]
           Pclass[[ad]] <- pclass
       }
       rownames <- dimnames(x)[[1]]
       if (is.null(rownames))
           rownames <- paste(seq(nrow(x)))
       return(structure(Pclass, class = "data.frame", row.names = rownames,
           dimensions = dimension.set))
   }, distances = {
       dclass <- matrix(0, nrow(x), J)
       for (i in seq(J)) dclass[, i] <- dist(x, means[i, ], dimension)
       dimnames(dclass) <- list(dimnames(x)[[1]], dimnames(means)[[1]])
       return(dclass)
   })
2: predict.fda(TrainFDAs[[i]], DummyParams[-TrainSample, ])
1: predict(TrainFDAs[[i]], DummyParams[-TrainSample, ])

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gregory_r_warnes at groton.pfizer.com  Mon Oct 15 15:30:28 2001
From: gregory_r_warnes at groton.pfizer.com (Warnes, Gregory R)
Date: Mon, 15 Oct 2001 09:30:28 -0400
Subject: FW: [R] Econometrics ...
Message-ID: <5429125E11E4D411AF7300805FE603A802B8C123@groexmbcr02.pfizer.com>



-----Original Message-----
From: Nels Tomlinson [mailto:tomlinso at purdue.edu] 
Sent: Friday, October 12, 2001 3:00 PM
To: Warnes, Gregory R
Subject: Re: [R] Econometrics ...


I like your meta-package idea.  To make it more useful, it should have a 
help page which provide links to the appropriate functions in the other, 
required packages.  That is, the 00index.html file in the package should 
consist of links to functions in the other packages.  This would provide 
 a familiar structure to students of econometrics, most of whom are NOT 
familiar with statistics.  

It seems that this should take little time beyond the time needed to 
identify the functions and make the meta-package, so it might be 
worthwhile.  Unfortunately, I don't think I'll have time to bell this 
cat myself.

Nels


Warnes, Gregory R wrote:

>
> >  From: Paul Gilbert [mailto:pgilbert at bank-banque-canada.ca]
> >  
> >  John Janmaat wrote:
> >  
> >  > Is there a package available for R which generates output
> >  commonly used
> >  > by econometricians (eg., the Durbin-Watson statistic for serial
> >  
> >  > correlation in regression residuals)?  I'm pretty sure most of
> >  the stuff
> >  > is out there in assorted packages, under different names.
> >  
> >  That's a broad subject area, it would be a pretty big package. My
> >  small part of it (the "dse" and "dseplus" bundles on CRAN) is
> >  already already divided into many packages. You should also look
> >  at "ts", "tseries",  and "strucchange". 
>
> [...]
>
> >  > However, it
> >  > would make my life, and that of my students, easier if it was
> >  all in one package.
>
>Perhaps the simplest thing in the short term would be to create a
>'meta-package' that simply 'requires' the individual packages...
>
>-Greg
>
>
>LEGAL NOTICE
>Unless expressly stated otherwise, this message is confidential and may be
privileged. It is intended for the addressee(s) only. Access to this E-mail
by anyone else is unauthorized. If you are not an addressee, any disclosure
or copying of the contents of this E-mail or any action taken (or not taken)
in reliance on it is unauthorized and may be unlawful. If you are not an
addressee, please inform the sender immediately.
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._
>



LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gco at eortc.be  Mon Oct 15 15:46:12 2001
From: gco at eortc.be (Gary Collins)
Date: Mon, 15 Oct 2001 15:46:12 +0200
Subject: [R] date and chron library  help...!
Message-ID: <02a201c1557f$c0e49d20$c90809c1@EORTC.BE>

Dear all,

I'm not sure whether this is a bug or not... But some help would be greatly appreciated.
I have a dataframe, which I read in using read.xport (from the foriegn library) as the orginal data is in SAS format.
3 columns of this dataset are supposed to be dates, but read.xport doesn't recognise them as dates (all columns are read in as mode numeric). So I load up the date library and go ahead to convert the 3 columns into dates.
So doing ...
> library(date)
> s05962$DOB_as.date(s05962$DOB)
> s05962$DOB    # to check if everything is ok, and it is...dates have been correctly converted...

However, when I look at the first 10 rows of the whole dataframe,
> s05962[1:10,]      # The column DOB is is still in numeric mode... So I try again, but the following occurs... 

> s05962$DOB_as.date(s05962$DOB)
Error in as.date(s05962$DOB) : Object "temp" not found

So not only do I not have the date columns correctly converted but when I try again I can't, unless I restart R.
I have no temp object in my workspace, the temp object refers to an object inside the as.date function...
BTW. I am using R-1.3.0... on windows 95.

Any help or is it a bug? I also tried using functions from the chron library, as.chron, and got dates but this time 10 years added on to them all (so another problem here as well), but the format of the columns with dates was ok using the as.chron function.  Am I doing something stupid?

Thanks

Gary.
__________________________________________________
Dr. Gary S. Collins,
Statistics Research Fellow,
Quality of Life Unit, 
European Organisation for Research and Treatment of Cancer, 
EORTC Data Center, 
Avenue E. Mounier 83, bte. 11,
B-1200 Brussels, Belgium.

Tel: +32 2 774 1 606
Fax: +32 2 779 4 568
http://www.eortc.be/home/qol/
__________________________________________________


-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20011015/cdcea4b4/attachment.html

From john.janmaat at acadiau.ca  Mon Oct 15 18:12:50 2001
From: john.janmaat at acadiau.ca (John Janmaat)
Date: Mon, 15 Oct 2001 13:12:50 -0300
Subject: [R] Econometrics ...
References: <Pine.LNX.4.30.0110121419320.17467-100000@bolker.zoo.ufl.edu>
Message-ID: <3BCB0B02.741AD51D@acadiau.ca>

Ben:

I agree with you that it would be a good thing if econometricians (among
others) adopted standard terminology beyond their field.  I do some
cross disciplinary work, and find communication difficult and
frustrating, especially when we are often talking about the same thing.

I would be interested in an econometrics 'add on' that might do
something like

summary.lm.econ(reg)

and dump out those summary statistics that econometricians like to see.

As to the locations of the stuff that we tend to use, a meta-package
that loads all the required packages, and a help page that translates
from the econometrics terminology to the 'R' terminology would be best,
IMHO.  Heck, this might just lead a few of us in the direction of
standard jargon.

John.

Ben Bolker wrote:
> 
>   My two cents --
>   Constructing and maintaining an elaborate alias structure just so people
> can write logit(y ~ x) rather than glm(y~x,link=logit) [etc.] seems like a
> bad idea to me. A "meta-package" (as Greg Warnes suggested), and a small
> discipline-specific document like those Jonathan Baron and Pete St. Onge
> have written or started to write for psychology and ecology (see the
> Contributed Documentation on CRAN), seem like a better way to go.  (The
> package could also include useful discipline-specific tools that don't
> already exist.) Among other problems, we're all going to go crazy when
> people start to write in to the R help list for help with the logit(),
> ols(), etc., etc., functions that none of us have heard of.  [It also
> might not be an entirely bad thing if econometricians (for example)
> learned that the rest of the world has something called a GLM that does
> what they know of as logit and probit models.]
> 
>   Ben Bolker
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From drhosini at hotmail.com  Mon Oct 15 17:39:58 2001
From: drhosini at hotmail.com (Moustafa ElHousinie)
Date: Mon, 15 Oct 2001 15:39:58 +0000
Subject: No subject
Message-ID: <F15ZdBFHG80pshGfs6000001679@hotmail.com>

Dear collegues
Few months ago I posted a request for a routine? to perform a
nomogram in R. I was promised that a library will be ready to perform such 
task.Is there any good news?
Thanx

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jeannot at math.unicaen.fr  Mon Oct 15 18:52:36 2001
From: jeannot at math.unicaen.fr (Jean Lejeune)
Date: Mon, 15 Oct 2001 18:52:36 +0200
Subject: [R] Distribution of range
Message-ID: <3.0.1.32.20011015185236.009a4260@mail.math.unicaen.fr>

Hi,

I look for  a function in R who compute the distribution ( density or/and
probability) for  the range  (max - min) of sample with n normal
distribution (mean =0,sd =1).
Is it possible to compute average and standard deviation in R 
Thanks
 
Jean LEJEUNE

University of CAEN (France)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetilh at umsanet.edu.bo  Mon Oct 15 19:41:38 2001
From: kjetilh at umsanet.edu.bo (kjetil halvorsen)
Date: Mon, 15 Oct 2001 13:41:38 -0400
Subject: [R] Distribution of range
References: <3.0.1.32.20011015185236.009a4260@mail.math.unicaen.fr>
Message-ID: <3BCB1FD2.4CDF880D@umsanet.edu.bo>

The closest you come, AFAIK, is 
?ptukey

for the studentized range. It has an argument df for the degrees of
freedom, with that large you couls simulate sigma known

Kjetil Halvorsen


Jean Lejeune wrote:
> 
> Hi,
> 
> I look for  a function in R who compute the distribution ( density or/and
> probability) for  the range  (max - min) of sample with n normal
> distribution (mean =0,sd =1).
> Is it possible to compute average and standard deviation in R
> Thanks
> 
> Jean LEJEUNE
> 
> University of CAEN (France)
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bates at stat.wisc.edu  Mon Oct 15 19:52:27 2001
From: bates at stat.wisc.edu (Douglas Bates)
Date: 15 Oct 2001 12:52:27 -0500
Subject: [R] hist and normal curve
In-Reply-To: <200110131732.MAA10008@uhddx01.dt.uh.edu>
References: <200110131732.MAA10008@uhddx01.dt.uh.edu>
Message-ID: <6ry9mcssdg.fsf@franz.stat.wisc.edu>

Erin Hodgess <hodgess at uhddx01.dt.uh.edu> writes:

> I would like to superimpose a normal curve on a histogram.
> 
> I've seen this example in a book, somewhere.
> 
> I know that you draw the hist, get the mean and sd
> of the data set, but then I'm stuck.

There is an example of overlaying a density estimate on a histogram in 

library(Devore5)
example(xmp01.01)

You can modify that to use the dnorm function instead of the density
estimate.  The important thing to remember is to use prob = TRUE in
the histogram.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From richards at upci.pitt.edu  Mon Oct 15 20:53:48 2001
From: richards at upci.pitt.edu (Richards, Tom)
Date: Mon, 15 Oct 2001 14:53:48 -0400
Subject: [R] gcc and Windows 2000
Message-ID: <5B9B19C8A522D411A8EC00A0C99D6A9A8D2625@mail.nsabp.pitt.edu>

Hello:

	After using R,

> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    3.1            
year     2001           
month    08             
day      31             
language R              

on NT 4.0 for some time, I have now received a new machine at work with
Windows 2000 on it.  Has anyone been able to use the MINGW32 port of gcc
successfully under Windows 2000?  Under NT 4.0 I had been using these
commands

gcc -O2 -c %FNAME%.c -IC:\Rw1031\src\include
-IC:\Mingw-1.0.1-20010726\include
dlltool --export-all-symbols --output-def %FNAME%.def %FNAME%.o
gcc --shared -o ..\libs\%FNAME%.dll %FNAME%.def %FNAME%.o
-LC:/Rw1031/src/gnuwin32 -lR

and setting FNAME accordingly.  These commands worked perfectly yesterday
under NT 4.0.  Now, the first two work OK, but the third yields the
following

ld: -shared not supported

and when I remove the switch --shared I get

ld: cannot open crt2.o: No such file or directory

Note that the directory where the development snapshot is installed is in my
path, as 

C:\Mingw-1.0.1-20010726\bin

just as I used to use under NT 4.0.  I don't know what to try next, and I
need to make DLL's for use with R 1.3.1.  Can anyone help me with this
problem?  Thanks in advance.

Tom Richards
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From d.tarfanelli at libero.it  Tue Oct 16 11:39:17 2001
From: d.tarfanelli at libero.it (d.tarfanelli@libero.it)
Date: Tue, 16 Oct 2001 11:39:17 +0200
Subject: [R] help me
Message-ID: <GLALHH$IBnKuonaFp9xz9m0LNjxr1OYB2boi9ra9QfFenLMgIYyGnb6@libero.it>

Hy,
I have dowloaded the R-version for Windows.
I would want to plot different pictures on the same device, but I am not
able to do it (i.e I would like make 2 qqplot on the same graphic).
Can you help me?
Thanks in advance
Davide 

reply to: d.tarfanelli at libero.it

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From zeileis at ci.tuwien.ac.at  Tue Oct 16 11:56:40 2001
From: zeileis at ci.tuwien.ac.at (Achim Zeileis)
Date: Tue, 16 Oct 2001 11:56:40 +0200
Subject: [R] help me
References: <GLALHH$IBnKuonaFp9xz9m0LNjxr1OYB2boi9ra9QfFenLMgIYyGnb6@libero.it>
Message-ID: <3BCC0458.DA1FEE7@ci.tuwien.ac.at>

"d.tarfanelli at libero.it" wrote:
> 
> Hy,
> I have dowloaded the R-version for Windows.
> I would want to plot different pictures on the same device, but I am not
> able to do it (i.e I would like make 2 qqplot on the same graphic).
> Can you help me?

You can use points() like in the following example.
Z


y <- rt(200, df = 5)
y.q <- qqnorm(y, plot.it=FALSE)
z <- rnorm(200)
z.q <- qqnorm(z, plot.it=FALSE)
plot(y.q)
points(z.q, col=2)




> Thanks in advance
> Davide
> 
> reply to: d.tarfanelli at libero.it
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jniesch at gwdg.de  Tue Oct 16 12:00:04 2001
From: jniesch at gwdg.de (Jens Nieschulze)
Date: Tue, 16 Oct 2001 12:00:04 +0200 (MET DST)
Subject: [R] help me
In-Reply-To: <GLALHH$IBnKuonaFp9xz9m0LNjxr1OYB2boi9ra9QfFenLMgIYyGnb6@libero.it>
Message-ID: <Pine.SO4.4.10.10110161158430.21309-100000@ufobi7.uni-forst.gwdg.de>

On Tue, 16 Oct 2001, d.tarfanelli at libero.it wrote:

> Hy,
> I have dowloaded the R-version for Windows.
> I would want to plot different pictures on the same device, but I am not
> able to do it (i.e I would like make 2 qqplot on the same graphic).
> Can you help me?
> Thanks in advance
> Davide 
set xlim,ylim on each plot to the same values and use something like
qqplot(....)
par(new=T)
qqplot(....)
> 
> reply to: d.tarfanelli at libero.it
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

***********************************************************************
Jens Nieschulze

Institute for Forest Biometrics &	Phone: ++49-551-39-12107
Applied Computer Science		Fax  : ++49-551-39-3465
Buesgenweg 4
37077 Goettingen		E-mail: jniesch at uni-forst.gwdg.de
GERMANY				http://www.uni-forst.gwdg.de/~jniesch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From aolinto at bignet.com.br  Tue Oct 16 13:30:13 2001
From: aolinto at bignet.com.br (aolinto@bignet.com.br)
Date: Tue, 16 Oct 2001 11:30:13 GMT
Subject: [R] summary.glm objects
Message-ID: <200110161129.JAA11927@hp.bignet.com.br>

Dear R-list members,

Im trying to run a S-plus source (diag.norm) from 
http://www.ime.usp.br/~giapaula/programas.html in R

Im having problems in the following lines:

lms <- summary(fit.model) # fit.model is a glm from gaussian 
family
s <- lms$sigma

It seems that sigma is not a summary.glm object in R, isnt 
it? (s is NULL)

Which is the equivalent object in R?

Thanks in advance.

Antonio Olinto




-----------------------------------------------------



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From doraiss at auburn.edu  Tue Oct 16 16:01:50 2001
From: doraiss at auburn.edu (Sundar Dorai-Raj)
Date: Tue, 16 Oct 2001 09:01:50 -0500
Subject: [R] summary.glm objects
In-Reply-To: <200110161129.JAA11927@hp.bignet.com.br>
Message-ID: <000301c1564b$1a8eb2e0$4a35cc83@sundar>

> 
> I?m having problems in the following lines:
> 
> lms <- summary(fit.model) # fit.model is a glm from gaussian 
> family
> s <- lms$sigma

s <- lms$deviance/lms$df.residual

Deviance is a more general term than standard deviation when fitting
non-gaussian models.

--
Sundar Dorai-Raj, Ph.D.
Assistant Professor
Discrete & Statistical Sciences   Office: (334) 844-3647
231 Allison Lab                   Fax: (334) 844-3611
Auburn University                 Email: dorairaj at dms.auburn.edu
Auburn AL 36849-5307              http://www.dms.auburn.edu/~dorairaj/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gregory_r_warnes at groton.pfizer.com  Tue Oct 16 16:12:50 2001
From: gregory_r_warnes at groton.pfizer.com (Warnes, Gregory R)
Date: Tue, 16 Oct 2001 10:12:50 -0400
Subject: [R] help me
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEF2A@groexmbcr02.pfizer.com>

Perhaps Davide wants to put two plots side by side, rather than
superimposed.  
In this case the necessary commands are,

par(mfrow=c(1,2))  # 1 row and 2 columns
qqnorm(y1)
qqline(y1)
qqnorm(y2)
qqline(y2)
par(mfrow=c(1,1))  # switch back to 1 plot

-Greg

 >  -----Original Message-----
 >  From: Achim Zeileis [mailto:zeileis at ci.tuwien.ac.at]
 >  Sent: Tuesday, October 16, 2001 5:57 AM
 >  To: d.tarfanelli at libero.it
 >  Cc: r-help at stat.math.ethz.ch
 >  Subject: Re: [R] help me
 >  
 >  
 >  "d.tarfanelli at libero.it" wrote:
 >  > 
 >  > Hy,
 >  > I have dowloaded the R-version for Windows.
 >  > I would want to plot different pictures on the same 
 >  device, but I am not
 >  > able to do it (i.e I would like make 2 qqplot on the same 
 >  graphic).
 >  > Can you help me?
 >  
 >  You can use points() like in the following example.
 >  Z
 >  
 >  
 >  y <- rt(200, df = 5)
 >  y.q <- qqnorm(y, plot.it=FALSE)
 >  z <- rnorm(200)
 >  z.q <- qqnorm(z, plot.it=FALSE)
 >  plot(y.q)
 >  points(z.q, col=2)
 >  
 >  
 >  
 >  
 >  > Thanks in advance
 >  > Davide
 >  > 
 >  > reply to: d.tarfanelli at libero.it
 >  > 
 >  > 
 >  -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
 >  -.-.-.-.-.-.-.-.-.-
 >  > r-help mailing list -- Read 
 >  http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
 >  > Send "info", "help", or "[un]subscribe"
 >  > (in the "body", not the subject !)  To: 
 >  r-help-request at stat.math.ethz.ch
 >  > 
 >  _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
 >  _._._._._._._._._._
 >  -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
 >  -.-.-.-.-.-.-.-.-.-
 >  r-help mailing list -- Read 
 >  http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
 >  Send "info", "help", or "[un]subscribe"
 >  (in the "body", not the subject !)  To: 
 >  r-help-request at stat.math.ethz.ch
 >  _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
 >  _._._._._._._._._._
 >  


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rita at liacc.up.pt  Tue Oct 16 16:02:55 2001
From: rita at liacc.up.pt (Rita Ribeiro)
Date: Tue, 16 Oct 2001 15:02:55 +0100
Subject: [R] Assignment of structures on a given environment
Message-ID: <3BCC3E0F.13884298@liacc.up.pt>

Hi,

In order to avoid deep copies by passing large arguments to functions or
returning values, I'm trying to do the assignment of variables in a
given environment. The problem is when I try to assign a structure: a
list for example.

If I have:
    ind <- c("a","b")

my idea is doing something like

    l <- alist()
    l[ind] <- as.list(c(20,40))

 in a given environment.



Example:
    ref <- new.env()
    (.....)
    assign("l",alist(),env=ref)


    If I do
        assign("l$a",20,env=ref)

    it creates me a new variable in the ref environment  named "l$a"



    So,  I did:

    eval(l <- alist(), env=ref)

    but this creates the l list both on the current and on the ref
environment.


    The alternative solution that I found out was:

    evalq(l<-alist(),env=ref)

    and then

        evalq(ind <-c("a","b"), env=ref)
        evalq(l[ind] <- as.list(c(20,40)), env=ref)


I would like to know if there is another possible solution, instead of
doing these 'evalqs' along the program code.


Thanks,

    Rita


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Tue Oct 16 17:08:37 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue, 16 Oct 2001 08:08:37 -0700 (PDT)
Subject: [R] summary.glm objects
In-Reply-To: <200110161129.JAA11927@hp.bignet.com.br>
Message-ID: <Pine.A41.4.33.0110160756360.84386-100000@homer09.u.washington.edu>

On Tue, 16 Oct 2001 aolinto at bignet.com.br wrote:

> Dear R-list members,
>
> Im trying to run a S-plus source (diag.norm) from
> http://www.ime.usp.br/~giapaula/programas.html in R
>
> Im having problems in the following lines:
>
> lms <- summary(fit.model) # fit.model is a glm from gaussian
> family
> s <- lms$sigma
>
> It seems that sigma is not a summary.glm object in R, isnt
> it? (s is NULL)
>

It is a summary.glm object. They have a different structure in R. The
dispersion parameter is lms$dispersion, which is the square of the
residual standard deviation for a linear model, so you want

  s<-sqrt(lms$dispersion)


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Tue Oct 16 18:20:01 2001
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Tue, 16 Oct 2001 16:20:01 +0000
Subject: [R] Problems merging with POSIXct objects and all = TRUE
In-Reply-To: <15306.44748.628359.158743@gargle.gargle.HOWL>
References: <15292.45107.369769.945864@gargle.gargle.HOWL>
	<15306.44748.628359.158743@gargle.gargle.HOWL>
Message-ID: <15308.24113.601422.359403@gargle.gargle.HOWL>

>>>>> "MM" == Martin Maechler <maechler at stat.math.ethz.ch> writes:

>>>>> "David" == "David Kane <David Kane" <a296180 at mica.fmr.com> writes:
    David> I am having problems using merge with all = TRUE when one of the
    David> dataframes has objects of class POSIXct. If this is a bug, let
    David> me know and I will report it to r-bugs. Here is an example:

    MM> ... (R version 1.3.0)

(example slightly compacted)

    >> x <- data.frame(a = as.POSIXct(Sys.time()+ (1:3)*10000), b=LETTERS[1:3])
    >> y <- data.frame(b = LETTERS[3:4], c = 1:2)
    >> merge(x, y)
    MM> b                   a c
    MM> 1 C 2001-10-04 23:11:06 1		# This answer is correct

    >> merge(x, y, all = TRUE)
    MM> Error in as.POSIXct.default(value) : Don't know how to convert `value' to class "POSIXct"

    MM> -------------

    MM> The reason is that merge(x,y, all = TRUE) fills in NAs at "appropriate"
    MM> places, and currently, it seems we have no (automatic) NA concept for
    MM> POSIX[cl]t objects:

    >> as.POSIXlt(NA)
    MM> Error in as.POSIXlt(NA) : Don't know how to convert `NA' to class "POSIXlt"
    >> as.POSIXct(NA)
    MM> Error in as.POSIXct.default(NA) : Don't know how to convert `NA' to class "POSIXct"
    >> as.POSIXct("NA")
    MM> Error in fromchar(x) : character string is not in a standard unambiguous format

    MM> This might be considered a bug although only in a loose sense of
    MM> the word.

I have now fixed this for "R-devel" (aka "1.4.0 to be").
as.POSIXct(*) and as.POSIXlt() now work with character "NA"s, and factors
are coerced to character  which fixes your   merge(x,y, all = TRUE) example
above.  Note that as.POSIXct(NA) still gives an error, duly IMO.

Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Oct 16 18:22:08 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 16 Oct 2001 17:22:08 +0100 (BST)
Subject: [R] gcc and Windows 2000
In-Reply-To: <5B9B19C8A522D411A8EC00A0C99D6A9A8D2625@mail.nsabp.pitt.edu>
Message-ID: <Pine.GSO.4.31.0110161646340.9245-100000@toucan.stats>

We build R's distribution under Windows 2000. There is a corrupt version
of mingw-1.0.1 on the source site (and also a correct one).  Get -1.1
instead, to avoid the confusion.


On Mon, 15 Oct 2001, Richards, Tom wrote:

> Hello:
>
> 	After using R,
>
> > version
>          _
> platform i386-pc-mingw32
> arch     x86
> os       Win32
> system   x86, Win32
> status
> major    1
> minor    3.1
> year     2001
> month    08
> day      31
> language R
>
> on NT 4.0 for some time, I have now received a new machine at work with
> Windows 2000 on it.  Has anyone been able to use the MINGW32 port of gcc
> successfully under Windows 2000?  Under NT 4.0 I had been using these
> commands
>
> gcc -O2 -c %FNAME%.c -IC:\Rw1031\src\include
> -IC:\Mingw-1.0.1-20010726\include
> dlltool --export-all-symbols --output-def %FNAME%.def %FNAME%.o
> gcc --shared -o ..\libs\%FNAME%.dll %FNAME%.def %FNAME%.o
> -LC:/Rw1031/src/gnuwin32 -lR
>
> and setting FNAME accordingly.  These commands worked perfectly yesterday
> under NT 4.0.  Now, the first two work OK, but the third yields the
> following
>
> ld: -shared not supported
>
> and when I remove the switch --shared I get
>
> ld: cannot open crt2.o: No such file or directory
>
> Note that the directory where the development snapshot is installed is in my
> path, as
>
> C:\Mingw-1.0.1-20010726\bin
>
> just as I used to use under NT 4.0.  I don't know what to try next, and I

One has gw, the other GW.  GW is the correct one.

> need to make DLL's for use with R 1.3.1.  Can anyone help me with this
> problem?  Thanks in advance.
>
> Tom Richards
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rita at liacc.up.pt  Tue Oct 16 17:40:34 2001
From: rita at liacc.up.pt (Rita Ribeiro)
Date: Tue, 16 Oct 2001 16:40:34 +0100
Subject: [R] Assignment of structures on a given environment
Message-ID: <3BCC54F2.6A0E4D54@liacc.up.pt>

Hi,

In order to avoid deep copies by passing large arguments to functions or

returning values, I'm trying to do the assignment of variables in a
given environment. The problem is when I try to assign a structure: a
list for example.

If I have:
    ind <- c("a","b")

my idea is doing something like

    l <- alist()
    l[ind] <- as.list(c(20,40))

 in a given environment.



Example:
    ref <- new.env()
    (.....)
    assign("l",alist(),env=ref)


    If I do
        assign("l$a",20,env=ref)

    it creates me a new variable in the ref environment  named "l$a"



    So,  I did:

    eval(l <- alist(), env=ref)

    but this creates the l list both on the current and on the ref
environment.


    The alternative solution that I found out was:

    evalq(l<-alist(),env=ref)

    and then

        evalq(ind <-c("a","b"), env=ref)
        evalq(l[ind] <- as.list(c(20,40)), env=ref)


I would like to know if there is another possible solution, instead of
doing these 'evalqs' along the program code.


Thanks,

    Rita



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rgentlem at jimmy.harvard.edu  Tue Oct 16 18:45:17 2001
From: rgentlem at jimmy.harvard.edu (Robert Gentleman)
Date: Tue, 16 Oct 2001 12:45:17 -0400
Subject: [R] Assignment of structures on a given environment
In-Reply-To: <3BCC54F2.6A0E4D54@liacc.up.pt>; from Rita Ribeiro on Tue, Oct 16, 2001 at 04:40:34PM +0100
References: <3BCC54F2.6A0E4D54@liacc.up.pt>
Message-ID: <20011016124517.S6980@jimmy.harvard.edu>

On Tue, Oct 16, 2001 at 04:40:34PM +0100, Rita Ribeiro wrote:
> Hi,
> 
> In order to avoid deep copies by passing large arguments to functions or
> 
> returning values, I'm trying to do the assignment of variables in a
> given environment. The problem is when I try to assign a structure: a
> list for example.
> 
> If I have:
>     ind <- c("a","b")
> 
> my idea is doing something like
> 
>     l <- alist()
>     l[ind] <- as.list(c(20,40))
> 
>  in a given environment.
> 
> 
> 
> Example:
>     ref <- new.env()
>     (.....)
>     assign("l",alist(),env=ref)
> 
> 
>     If I do
>         assign("l$a",20,env=ref)
> 
>     it creates me a new variable in the ref environment  named "l$a"
> 
  This is what you asked it to do.
  Environments work at the level of whole objects. I'm not sure what
  it would mean for l$a to exist in ref if l doesn't exist in ref.
  So, you just assign l into the environment and retrieve it from the
  environment, using get.

  If you you have only one list then perhaps you do not want to put
  the list in, rather just the elements.

   names <- names(l)
   for(i in 1:length(l)) assign(names[i], l[[i]], env=ref)

   you then have a and b, for example, in the environment and can
   extract them.
  
   If you have two lists, l1 and l2 and both have a's and b's as
   components then you have to put in the whole list (or adopt a
   naming convention).

   One might ask whether you are sure that you need to do this?
   I work on very large data sets and copying has pretty much never
   been an issue.

> 
> 
>     So,  I did:
> 
>     eval(l <- alist(), env=ref)
> 
>     but this creates the l list both on the current and on the ref
> environment.
> 
> 
>     The alternative solution that I found out was:
> 
>     evalq(l<-alist(),env=ref)
> 
>     and then
> 
>         evalq(ind <-c("a","b"), env=ref)
>         evalq(l[ind] <- as.list(c(20,40)), env=ref)
> 
> 
> I would like to know if there is another possible solution, instead of
> doing these 'evalqs' along the program code.
> 
> 
> Thanks,
> 
>     Rita
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem at jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From doraiss at auburn.edu  Tue Oct 16 19:11:15 2001
From: doraiss at auburn.edu (Sundar Dorai-Raj)
Date: Tue, 16 Oct 2001 12:11:15 -0500
Subject: [R] summary.glm objects
In-Reply-To: <000301c1564b$1a8eb2e0$4a35cc83@sundar>
Message-ID: <000801c15665$909bcda0$4a35cc83@sundar>

> 
> > 
> > I?m having problems in the following lines:
> > 
> > lms <- summary(fit.model) # fit.model is a glm from gaussian
> > family
> > s <- lms$sigma
> 
> s <- lms$deviance/lms$df.residual
> 
> Deviance is a more general term than standard deviation when 
> fitting non-gaussian models.

Sorry, make that "variance" rather than "standard deviation." To obtain
an estimate of s, just take the sqrt.

Sundar

--
Sundar Dorai-Raj, Ph.D.
Assistant Professor
Discrete & Statistical Sciences   Office: (334) 844-3647
231 Allison Lab                   Fax: (334) 844-3611
Auburn University                 Email: dorairaj at dms.auburn.edu
Auburn AL 36849-5307              http://www.dms.auburn.edu/~dorairaj/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rjporter at mindspring.com  Tue Oct 16 20:25:28 2001
From: rjporter at mindspring.com (Bob Porter)
Date: Tue, 16 Oct 2001 14:25:28 -0400
Subject: [R] optimal windows R machine
Message-ID: <007301c1566f$ef3a0480$214abfa8@drbob>

For some mysterious reason I do not believe this was delivered to the list.
Sorry if it turns out to be a duplicate.---Bob

>> Subject: optimal R windows machine

I have the happy task of purchasing a new windows desktop PC.  I have a
limited but not unreasonable budget and access to discounts and so forth.
 What would be folks' suggestions of priorities and requirements be if I
will
 use the machine for a lot of C and R based data analysis with large files,
 computationally intensive, a lot of graphic display but not 3D animation.
I
am proposing 1GB AMD processor,  1 GB RAM, 40GB drive, hi-speed CDRW, 64MEG
video, Win  XP home edition.  Thoughts?  I will upgrade software also:
Suggestions of C compiler package? Other "must have" packages compatible
with R?

Thanks,
Bob Porter, Ph.D.
Lambda Consulting
Tampa

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From drhosini at hotmail.com  Tue Oct 16 20:13:59 2001
From: drhosini at hotmail.com (Moustafa ElHousinie)
Date: Tue, 16 Oct 2001 18:13:59 +0000
Subject: No subject
Message-ID: <F91tik7swtZCvPAvBtb00001e75@hotmail.com>

Dear R fans
I want to do the ROC curve in R. Any help will be appreciated.
thanx

_________________________________________________________________


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From claude at isem.univ-montp2.fr  Tue Oct 16 21:33:48 2001
From: claude at isem.univ-montp2.fr (julien claude)
Date: Tue, 16 Oct 2001 21:33:48 +0200
Subject: [R] two way ANOVA with unequal sample sizes
Message-ID: <3.0.1.32.20011016213348.00832100@isem.isem.univ-montp2.fr>

Hi,

I am trying a two way anova with unequal sample sizes but results are not
as expected:

I take the example from Applied Linear Statistical Models (Neter et al.
pp889-897, 1996)

growth rate		gender	bone development
1.4			1		1
2.4			1		1
2.2			1		1
2.4			1		2
2.1			2		1
1.7			2		1
2.5			2		2
1.8			2		2
2			2		2
0.7			3		1
1.1			3		1
0.5			3		2
0.9			3		2
1.3			3		2

expected results are

source of variation	SS	df	MS	F	
gender			0.12	1	0.12	0.74	
bone development	4.1897	2	2.0949	12.89**	
interaction		0.0754	2	0.377	0.23	
Error			1.3	8	0.1625		

# I use 
aov (growrate ~ gender * bonedevelopment)->m
summary(m)

   						  Df      Sum Sq    Mean Sq 	F value   Pr(>F)   
as.factor(gender)                     			2 	4.3063  	2.1531 		13.2501
0.002891 **
as.factor(bonedevlopment)            		1 	0.0926  	0.0926  		0.5697
0.472022   
as.factor(gender:bonedevlopment)  		 2 	0.0754 	 0.0377 	 	0.2321	 0.798034   
Residuals                            			8 	1.3000 	 0.1625      

#if I change the order of factors, results are different
aov (growrate ~ bonedevelopment * gender)->m
summary(m)

                                      		Df 	Sum Sq Mean Sq 	F value
Pr(>F)   
as.factor(bonedevlopment)             	1 	0.0029  0.0029 		 0.0176
0.897785   
as.factor(gender)                    		2 	4.3960  2.1980 		13.5262 0.002713 **
as.factor(gender:bonedevlopment)  	2 	0.0754  0.0377  		0.2321   0.798034   
Residuals                           		8 	1.3000  0.1625      

#In the both cases, results for main effects differ from those expected in
Neter et al.
However interaction and residuals are well estimated.
Can anyone help, either I am wrong in the formula, or either is there an
other problem? Is there a mean to conduct easily the  test as in it is in
Neter et al. ?
The same problems occurs with anova(lm(....))?

thank you very much

julien CLAUDE
-------------------------------

CLAUDE julien
Universit? Montpellier II
Institut des Sciences de l'Evolution de Montpellier
Laboratoire de Pal?ontologie (Morphom?trie), Cc64
2, Place Eug?ne Bataillon.
34095, Montpellier, cedex 5
FRANCE

Phone :  (33) 4 67 14 47 82
Fax : (33) 4 67 14 36 10
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Tue Oct 16 21:59:12 2001
From: ben at zoo.ufl.edu (Ben Bolker)
Date: Tue, 16 Oct 2001 15:59:12 -0400 (EDT)
Subject: [R] two way ANOVA with unequal sample sizes
In-Reply-To: <3.0.1.32.20011016213348.00832100@isem.isem.univ-montp2.fr>
Message-ID: <Pine.LNX.4.30.0110161553100.23955-100000@bolker.zoo.ufl.edu>


  Is this a problem (perhaps) with the dreaded "SAS type III sums of
squares"?  I don't know the reference, but the authors may be estimating
the effect of dropping the main effects while the interaction terms are
still included in the model (which is at the very least controversial, and
probably wrong).
  The sums of squares estimated for unbalanced linear models necessarily
vary according to the order in which the factors are added or dropped.
What do the authors say about the order they're using?

See

http://finzi.psych.upenn.edu/R/Rhelp/archive/0913.html
http://finzi.psych.upenn.edu/R/Rhelp/archive/3612.html

and responses to them ...

  Ben Bolker

On Tue, 16 Oct 2001, julien claude wrote:

> Hi,
>
> I am trying a two way anova with unequal sample sizes but results are not
> as expected:
>
> I take the example from Applied Linear Statistical Models (Neter et al.
> pp889-897, 1996)
>
> growth rate		gender	bone development
> 1.4			1		1
> 2.4			1		1
> 2.2			1		1
> 2.4			1		2
> 2.1			2		1
> 1.7			2		1
> 2.5			2		2
> 1.8			2		2
> 2			2		2
> 0.7			3		1
> 1.1			3		1
> 0.5			3		2
> 0.9			3		2
> 1.3			3		2
>
> expected results are
>
> source of variation	SS	df	MS	F
> gender			0.12	1	0.12	0.74
> bone development	4.1897	2	2.0949	12.89**
> interaction		0.0754	2	0.377	0.23
> Error			1.3	8	0.1625
>
> # I use
> aov (growrate ~ gender * bonedevelopment)->m
> summary(m)
>
>    						  Df      Sum Sq    Mean Sq 	F value   Pr(>F)
> as.factor(gender)                     			2 	4.3063  	2.1531 		13.2501
> 0.002891 **
> as.factor(bonedevlopment)            		1 	0.0926  	0.0926  		0.5697
> 0.472022
> as.factor(gender:bonedevlopment)  		 2 	0.0754 	 0.0377 	 	0.2321	 0.798034
> Residuals                            			8 	1.3000 	 0.1625
>
> #if I change the order of factors, results are different
> aov (growrate ~ bonedevelopment * gender)->m
> summary(m)
>
>                                       		Df 	Sum Sq Mean Sq 	F value
> Pr(>F)
> as.factor(bonedevlopment)             	1 	0.0029  0.0029 		 0.0176
> 0.897785
> as.factor(gender)                    		2 	4.3960  2.1980 		13.5262 0.002713 **
> as.factor(gender:bonedevlopment)  	2 	0.0754  0.0377  		0.2321   0.798034
> Residuals                           		8 	1.3000  0.1625
>
> #In the both cases, results for main effects differ from those expected in
> Neter et al.
> However interaction and residuals are well estimated.
> Can anyone help, either I am wrong in the formula, or either is there an
> other problem? Is there a mean to conduct easily the  test as in it is in
> Neter et al. ?
> The same problems occurs with anova(lm(....))?
>
> thank you very much
>
> julien CLAUDE
> -------------------------------
>
> CLAUDE julien
> Universit? Montpellier II
> Institut des Sciences de l'Evolution de Montpellier
> Laboratoire de Pal?ontologie (Morphom?trie), Cc64
> 2, Place Eug?ne Bataillon.
> 34095, Montpellier, cedex 5
> FRANCE
>
> Phone :  (33) 4 67 14 47 82
> Fax : (33) 4 67 14 36 10
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker at zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Tue Oct 16 22:19:58 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue, 16 Oct 2001 13:19:58 -0700 (PDT)
Subject: [R] two way ANOVA with unequal sample sizes
In-Reply-To: <3.0.1.32.20011016213348.00832100@isem.isem.univ-montp2.fr>
Message-ID: <Pine.A41.4.33.0110161307090.84386-100000@homer09.u.washington.edu>

On Tue, 16 Oct 2001, julien claude wrote:

> Hi,
>
> I am trying a two way anova with unequal sample sizes but results are not
> as expected:
>
> I take the example from Applied Linear Statistical Models (Neter et al.
> pp889-897, 1996)
>
> growth rate		gender	bone development
> 1.4			1		1
> 2.4			1		1
> 2.2			1		1
> 2.4			1		2
> 2.1			2		1
> 1.7			2		1
> 2.5			2		2
> 1.8			2		2
> 2			2		2
> 0.7			3		1
> 1.1			3		1
> 0.5			3		2
> 0.9			3		2
> 1.3			3		2
>
> expected results are
>
> source of variation	SS	df	MS	F
> gender			0.12	1	0.12	0.74
> bone development	4.1897	2	2.0949	12.89**
> interaction		0.0754	2	0.377	0.23
> Error			1.3	8	0.1625

There's something fairly fundamental wrong here. Gender in your data has
three levels, but your expected results give only 1 df. If you check the
book again you  will find you have the column labels wrong. This isn't
main problem, though.

> #In the both cases, results for main effects differ from those expected in
> Neter et al.

Yes, but the book clearly warns you that many software packages don't
have the same choices for sums of squares in unbalanced designs that they
have.  R is one of those many packages.

Neter et al, as they carefull explain, present ANOVA tables that summarise
comparisons from a bunch of different models and on page 895 they show all
the sets of models they use to construct their ANOVA table.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Tue Oct 16 22:44:40 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Oct 2001 22:44:40 +0200
Subject: [R] two way ANOVA with unequal sample sizes
In-Reply-To: <3.0.1.32.20011016213348.00832100@isem.isem.univ-montp2.fr>
References: <3.0.1.32.20011016213348.00832100@isem.isem.univ-montp2.fr>
Message-ID: <x21yk39ux3.fsf@blueberry.kubism.ku.dk>

julien claude <claude at isem.univ-montp2.fr> writes:

> Hi,
> 
> I am trying a two way anova with unequal sample sizes but results are not
> as expected:
> 
> I take the example from Applied Linear Statistical Models (Neter et al.
> pp889-897, 1996)
> 
> growth rate		gender	bone development
> 1.4			1		1
> 2.4			1		1
> 2.2			1		1
> 2.4			1		2
> 2.1			2		1
> 1.7			2		1
> 2.5			2		2
> 1.8			2		2
> 2			2		2
> 0.7			3		1
> 1.1			3		1
> 0.5			3		2
> 0.9			3		2
> 1.3			3		2
> 
> expected results are
> 
> source of variation	SS	df	MS	F	
> gender			0.12	1	0.12	0.74	
> bone development	4.1897	2	2.0949	12.89**	
> interaction		0.0754	2	0.377	0.23	
> Error			1.3	8	0.1625		
> 
> # I use 
> aov (growrate ~ gender * bonedevelopment)->m
> summary(m)
> 
>    						  Df      Sum Sq    Mean Sq 	F value   Pr(>F)   
> as.factor(gender)                     			2 	4.3063  	2.1531 		13.2501
> 0.002891 **
> as.factor(bonedevlopment)            		1 	0.0926  	0.0926  		0.5697
> 0.472022   
> as.factor(gender:bonedevlopment)  		 2 	0.0754 	 0.0377 	 	0.2321	 0.798034   
> Residuals                            			8 	1.3000 	 0.1625      
Ahem. Tab damage detected... and your command and output don't match
up. 


The as.factor(gender:bonedevlopment) is playing with fire... You
should calculate factor() of each term. However, it would seem that
you already did manage to convert things to factors or you would have
gotten something to this effect:

> evalq(as.factor(gender:bone.development),d)
[1] 1
Levels:  1 
Warning messages: 
1: Numerical expression has 14 elements: only the first used in:
gender:bone.development 
2: Numerical expression has 14 elements: only the first used in:
gender:bone.development 




> 
> #if I change the order of factors, results are different
> aov (growrate ~ bonedevelopment * gender)->m
> summary(m)
> 
>                                       		Df 	Sum Sq Mean Sq 	F value
> Pr(>F)   
> as.factor(bonedevlopment)             	1 	0.0029  0.0029 		 0.0176
> 0.897785   
> as.factor(gender)                    		2 	4.3960  2.1980 		13.5262 0.002713 **
> as.factor(gender:bonedevlopment)  	2 	0.0754  0.0377  		0.2321   0.798034   
> Residuals                           		8 	1.3000  0.1625      
> 
> #In the both cases, results for main effects differ from those expected in
> Neter et al.
> However interaction and residuals are well estimated.
> Can anyone help, either I am wrong in the formula, or either is there an
> other problem? Is there a mean to conduct easily the  test as in it is in
> Neter et al. ?
> The same problems occurs with anova(lm(....))?

I don't think we're the ones with the problem... There are various
boneheaded ways in which people try to use to assign some kind of
SumSq to main effects in the presence of interaction, and they are all
wrong - although maybe not very wrong if the unbalance is slight.

The tests *should* depend on the test order, as is most clearly seen
if the predictors are highly collinear.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From richmond at saintmarys.edu  Wed Oct 17 00:39:21 2001
From: richmond at saintmarys.edu (David A Richmond)
Date: Tue, 16 Oct 2001 17:39:21 -0500 (EST)
Subject: [R] Assignment of structures on a given environment
In-Reply-To: <3BCC3E0F.13884298@liacc.up.pt>
Message-ID: <Pine.GSO.4.20.0110161733540.24237-100000@jade.saintmarys.edu>

I was having trouble with a similar issue recently, until I was informed
that arguments to functions aren't copied unless they're altered. So I can
pass a large matrix through a routine with as many sublevels as i need and
the matrix won't be recreated everytime I pass it to another function. Is
this the problem you're trying to avoid?

dave


On Tue, 16 Oct 2001, Rita Ribeiro wrote:

> Hi,
> 
> In order to avoid deep copies by passing large arguments to functions or
> returning values, I'm trying to do the assignment of variables in a
> given environment. The problem is when I try to assign a structure: a
> list for example.
> 
> If I have:
>     ind <- c("a","b")
> 
> my idea is doing something like
> 
>     l <- alist()
>     l[ind] <- as.list(c(20,40))
> 
>  in a given environment.
> 
> 
> 
> Example:
>     ref <- new.env()
>     (.....)
>     assign("l",alist(),env=ref)
> 
> 
>     If I do
>         assign("l$a",20,env=ref)
> 
>     it creates me a new variable in the ref environment  named "l$a"
> 
> 
> 
>     So,  I did:
> 
>     eval(l <- alist(), env=ref)
> 
>     but this creates the l list both on the current and on the ref
> environment.
> 
> 
>     The alternative solution that I found out was:
> 
>     evalq(l<-alist(),env=ref)
> 
>     and then
> 
>         evalq(ind <-c("a","b"), env=ref)
>         evalq(l[ind] <- as.list(c(20,40)), env=ref)
> 
> 
> I would like to know if there is another possible solution, instead of
> doing these 'evalqs' along the program code.
> 
> 
> Thanks,
> 
>     Rita
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|David Richmond                It works on a          |      
+ Dept. of Sociology          complex scientific      + 
|Saint Mary's College          principle, known as    |  
+ Notre Dame, IN 46556               "pot luck."      +
|219-284-4517                    - The Doctor         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jfox at mcmaster.ca  Wed Oct 17 01:42:15 2001
From: jfox at mcmaster.ca (John Fox)
Date: Tue, 16 Oct 2001 19:42:15 -0400
Subject: [R] two way ANOVA with unequal sample sizes
In-Reply-To: <3.0.1.32.20011016213348.00832100@isem.isem.univ-montp2.fr>
Message-ID: <5.1.0.14.2.20011016192832.01bed858@mcmail.cis.mcmaster.ca>

Dear Julien,

At 09:33 PM 16/10/2001 +0200, julien claude wrote:
>Hi,
>
>I am trying a two way anova with unequal sample sizes but results are not
>as expected:
>
>I take the example from Applied Linear Statistical Models (Neter et al.
>pp889-897, 1996)
>
>growth rate             gender  bone development
>1.4                     1               1
>2.4                     1               1
>2.2                     1               1
>2.4                     1               2
>2.1                     2               1
>1.7                     2               1
>2.5                     2               2
>1.8                     2               2
>2                       2               2
>0.7                     3               1
>1.1                     3               1
>0.5                     3               2
>0.9                     3               2
>1.3                     3               2

You've apparently reversed the data columns for gender and bone development.

>expected results are
>
>source of variation     SS      df      MS      F
>gender                  0.12    1       0.12    0.74
>bone development        4.1897  2       2.0949  12.89**
>interaction             0.0754  2       0.377   0.23
>Error                   1.3     8       0.1625
>
># I use
>aov (growrate ~ gender * bonedevelopment)->m
>summary(m)
>
>                                                   Df      Sum Sq    Mean 
> Sq     F value   Pr(>F)
>as.factor(gender)                                       2       4.3063 
>      2.1531          13.2501
>0.002891 **
>as.factor(bonedevlopment)                       1       0.0926 
>0.0926                  0.5697
>0.472022
>as.factor(gender:bonedevlopment)                2       0.0754  0.0377 
>      0.2321  0.798034
>Residuals                                               8       1.3000 
>0.1625
>
>#if I change the order of factors, results are different
>aov (growrate ~ bonedevelopment * gender)->m
>summary(m)
>
>                                                 Df      Sum Sq Mean Sq  F 
> value
>Pr(>F)
>as.factor(bonedevlopment)               1       0.0029  0.0029          0.0176
>0.897785
>as.factor(gender)                               2       4.3960  2.1980 
>      13.5262 0.002713 **
>as.factor(gender:bonedevlopment)        2       0.0754  0.0377 
>      0.2321   0.798034
>Residuals                                       8       1.3000  0.1625
>
>#In the both cases, results for main effects differ from those expected in
>Neter et al.
>However interaction and residuals are well estimated.
>Can anyone help, either I am wrong in the formula, or either is there an
>other problem? Is there a mean to conduct easily the  test as in it is in
>Neter et al. ?
>The same problems occurs with anova(lm(....))?

The problem is that the analysis in Neter et al. uses what are sometimes 
called "type III" sums of squares -- that is, testing each term in the 
model 'after' all others (including main effects 'after' interactions to 
which the main effects are marginal). Some would argue that this *never* 
makes sense, but it *certainly* doesn't make sense if you use 
"contr.treatment" to code contrasts for factors, which is the default in R.

To get the results in Neter, you can use contr.sum or contr.helmert with 
lm, along with the Anova function in the car package:

     > library(car)
     >
     > Anova(lm(growth.rate  ~ gender * bone,
     +     contrasts=list(gender='contr.sum', bone='contr.sum')),
     +     type='III')
     Anova Table (Type III tests)

     Response: growth.rate
                 Sum Sq Df  F value    Pr(>F)
     (Intercept) 34.680  1 213.4154 4.729e-07 ***
     gender       0.120  1   0.7385  0.415160
     bone         4.190  2  12.8914  0.003145 **
     gender:bone  0.075  2   0.2321  0.798034
     Residuals    1.300  8
     ---
     Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1
     >
     > Anova(lm(growth.rate  ~ gender * bone,
     +     contrasts=list(gender='contr.helmert', bone='contr.helmert')),
     +     type='III')
     Anova Table (Type III tests)

     Response: growth.rate
                 Sum Sq Df  F value    Pr(>F)
     (Intercept) 34.680  1 213.4154 4.729e-07 ***
     gender       0.120  1   0.7385  0.415160
     bone         4.190  2  12.8914  0.003145 **
     gender:bone  0.075  2   0.2321  0.798034
     Residuals    1.300  8
     ---
     Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1
     >

You might think about whether you really prefer this analysis to one that 
obeys marginality (producing what are sometimes called "type II" sums of 
squares). The anova function in R computes so-called "sequential" (or "type 
I") sums of squares which rarely correspond to hypotheses of interest.

How to calculate F-tests in unbalanced Anova models with interactions is a 
subject that seems to produce a lot of heat, so you can expect conflicting 
advice.

I hope that this is useful to you.
  John




-----------------------------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario, Canada L8S 4M4
email: jfox at mcmaster.ca
phone: 905-525-9140x23604
web: www.socsci.mcmaster.ca/jfox
-----------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rolf at maths.uwa.edu.au  Wed Oct 17 06:16:38 2001
From: rolf at maths.uwa.edu.au (Rolf Turner)
Date: Wed, 17 Oct 2001 12:16:38 +0800 (WST)
Subject: [R] Type III sums of squares.
Message-ID: <200110170416.MAA02431@salvia.maths.uwa.edu.au>


Peter Dalgaard writes (in response to a question about 2-way ANOVA
with imbalance):

>                                              ... There are various
> boneheaded ways in which people try to use to assign some kind of
> SumSq to main effects in the presence of interaction, and they are all
> wrong - although maybe not very wrong if the unbalance is slight.

People keep saying this --- very vehemently --- and it is NOT TRUE.

Point 1 --- imbalance is really irrelevant here, a fact which
is usually (always?) overlooked.  If the design is balanced,
all ``types'' of sums of squares are the same.  The sequential
sums of squares which R will happily produce might well contain
``significant'' values for SSA and/or SSB ***and*** a significant
value for the interaction sum of squares, SSAB.

Point 2 --- What does such ``significance'' ***mean***?  It is not
correct to say that it means nothing at all.  The significance
of say, SSA, reports on the result of the test of a hypothesis.
This hypothesis is a ***meaningful*** hypothesis.  It may well not be
an important hypothesis, or a particularly interesting hypothesis,
or a hypothesis that the experimenter actually cares about.
It is substantially different from the hypothesis which is tested
by SSA when there is no interaction.  (Different, but related.)
Bill Venables fulminates that consideration of such a hypothesis is
contrary to the fundamental philosophy of statistcial modelling, and
thereby an abomination in the sight of God, and probably Politically
Incorrect to boot.  This may well be so.  Nonetheless it ***is***
a well-defined and meaningful hypothesis.

Rather than dismissing the testing of such a hypothesis as being
``bone-headed'', the guru should point out to the desciple

	(a) just what hypothesis is being tested,

	(b) that this hypothesis packs a substantially different
	load of freight than that which is tested when there is
	no interaction, and

	(c) that the desciple should carefully search his or her
	soul as to whether the hypothesis which is being tested
	is of any actual interest.

This would go much further toward bringing the desciple to true
enlightenment.

Point 3 --- what hypothesis is being tested by SSA?

Let factor A correspond to index i, and B to index j.

Let the cell means be mu_ij.  (In the overparameterized
notation, mu_ij = mu + alpha_i + beta_j + gamma_ij.)

The hypothesis being tested is

		H_0: mu_1.-bar = mu_2.-bar = ... = mu_a.-bar

where factor A has a levels, and ``mu_i.-bar'' means
the average (arithmetic mean) of mu_i1, mu_i2, ..., mu_ib.
(Note --- factor B has b levels.)

I.e. the hypothesis is that there is no difference, on average,
between the levels of A, the average being taken over the levels
of B.

Now taking such an average may not be a sensible thing to do,
but it is perfectly well-defined, and thus a ***meaningful***
hypothesis is being tested.  (The meaning of which the hypothesis
is full might not be very exciting, but that is more of a practical
than a statistical issue.)

Note that the hypothesis being tested, while possibly of dubious
import, is perfectly comprehensible to the human mind.

(Remark: In real life, if we were really interested in averaging
over the levels of B at all, we would probably want a ***weighted***
average, with the weights corresponding to the preponderance of
the levels of B in the population.)

Note that if there is no interaction (if the gamma_ij are all zero)
then the hypothesis being tested is that for each fixed j, the mu_ij
are all ***identical*** (say mu_ij = tau_j) and hence the averages
over j are equal (mu_i.-bar = tau.-bar, independent of i.)

This is all easier to think about graphically.  For each j, plot the
mu_ij against the index i, giving a ``profile''.  ``No interaction''
means that all profiles are parallel.  No interaction and no A
effect means that all profiles are horizontal.

If the profiles are parallel, then all profiles will be horizontal
if and only if their mean is horizontal.

However if the profiles are ***not*** parallel (i.e. if there is
interaction) their means may be horizontal anyhow.

Let me repeat:  This horizontallity may not be of much interest if
the profiles are not parallel, but it is a perfectly well-defined
concept, and testing for it makes perfect sense in the abstract.

Point 4  --- on the (remote?) chance that we really are interested in
the above horizontallity, and if the design is in fact NOT BALANCED,
then the much maligned type III sums of squares are ***definitely***
called for.  Type III sums of squares will test the null hypothesis
stated in Point 3, irrespective of balance.  Sequential sums of
squares will test another, different, and totally bizarre hypothesis.
(Again a perfectly ``meaningfull'' hypothesis, but one such that the
meaning is really too convoluted to admit any sort of comprehension
by the human mind.  Moreover this hypothesis is dependent on the
design structure, rendering it even more unlikely to be of any
interest, even if one could understand what it it is saying.)


					cheers,

						Rolf Turner
						rolf at maths.unb.ca
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mark at myatt.demon.co.uk  Wed Oct 17 11:05:15 2001
From: mark at myatt.demon.co.uk (Mark Myatt)
Date: Wed, 17 Oct 2001 10:05:15 +0100
Subject: [R] optimal windows R machine
In-Reply-To: <007301c1566f$ef3a0480$214abfa8@drbob>
References: <007301c1566f$ef3a0480$214abfa8@drbob>
Message-ID: <N4ErWDALnUz7EwuU@myatt.demon.co.uk>

Bob Porter <rjporter at mindspring.com> writes:

>I have the happy task of purchasing a new windows desktop PC.  I have a
>limited but not unreasonable budget and access to discounts and so forth.
> What would be folks' suggestions of priorities and requirements be if I
>will
> use the machine for a lot of C and R based data analysis with large files,
> computationally intensive, a lot of graphic display but not 3D animation.
>I
>am proposing 1GB AMD processor,  1 GB RAM, 40GB drive, hi-speed CDRW, 64MEG
>video, Win  XP home edition.  Thoughts?  I will upgrade software also:
>Suggestions of C compiler package? Other "must have" packages compatible
>with R?

With the processor and memory thing should fly along. The video is a bit
over specified as most 64MB cards will be optimised for 3D graphics at
high colour depths. It will work OK but you might be better off going
for a cheaper graphics card and spending the savings on a better quality
monitor / keyboard / mouse. I have no experience with Windows XP. I
would consider one of the Linux distributions with a small and light
windows manager as I imagine XP will be quite an overhead.

Mark


--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From alobo at ija.csic.es  Wed Oct 17 13:01:53 2001
From: alobo at ija.csic.es (Agustin Lobo)
Date: Wed, 17 Oct 2001 13:01:53 +0200 (MET DST)
Subject: [R] read.packages: where is it?
Message-ID: <Pine.OSF.3.96.1011017125754.27410I-100000@ija.csic.es>


Hi!

The rw-FAQ.html (entry 7.2 How do I include compiled C code?) mentions 
the file readme.packages, which I do no find in my installation. I've
tried at CRAN and cannot find it. Doe anyone know where is it?

Thanks

Agus

Dr. Agustin Lobo
Instituto de Ciencias de la Tierra (CSIC)
Lluis Sole Sabaris s/n
08028 Barcelona SPAIN
tel 34 93409 5410
fax 34 93411 0012
alobo at ija.csic.es


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rhskelto at atm.ox.ac.uk  Wed Oct 17 13:05:53 2001
From: rhskelto at atm.ox.ac.uk (Randall Skelton)
Date: Wed, 17 Oct 2001 12:05:53 +0100 (BST)
Subject: [R] File reading.
Message-ID: <Pine.LNX.4.33.0110171150090.1323-100000@mulligan.atm.ox.ac.uk>

Hi all,

Appologies for the rather basic IO question but I am rather new to R...
Migrated from IDL/Matlab recently.  I have a rather simple Fortran
control file (sigh...) that I am trying to parse and read using R.  My
problem is that the file's format is somewhat flexible.  Imagine:

---
1>  39 1901
2>  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20
3>   22 24 26 28 30 32 34 36 38 40 42 44 46 48 50 52 54 56 58
4>     650.0   650.5   651.0   651.5   652.0   652.5   653.0   653.5   654.0
5>     654.5   655.0   655.5   656.0   656.5   657.0   657.5   658.0   658.5
         ...
7>    1599.5  1600.0
8>
9>  1 1 0
10> Xtemp.wf
11> 2
12> Xtemp.noise
13> 4
14> Xtemp.Sa
---

Line 1 contains 2 numbers (nx, ny) which can easily be read using scan.
If nx>0 then there are nx values to be read next (i.e. lines 2 and 3 have
39 values).  Likewise, with ny>0, lines 4-7 give 1901 values.  However, if
nx or ny are less than 0, then the data block for lines 2-3 or lines 4-7
will not be present and a generic index is made...  In psudo code:

---
# get the file handle for the case file
fin=fopen(casefile);

# read the file
in=fscanf(fin,'%f',2);

# first 2 numbers in the case file give the size
nx=in(1);
ny=in(2);

# read or construct the x label
if nx>0
    xlab=fscanf(fin,'%f',nx);
else
    nx=-nx;
    xlab=0:(nx-1);
end

# read or construct the y label
if ny>0
    ylab=fscanf(fin,'%f',ny);
else
    ny=-ny;
    ylab=1:ny;
end
---

My problems are that R seems to be tied to the line numbers on which data
is found and that the scan function doesn't remember where it last was...
Is there some C-like fopen/fread construct that I am missing?

Cheers,
Randall

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rita at liacc.up.pt  Wed Oct 17 12:31:24 2001
From: rita at liacc.up.pt (Rita Ribeiro)
Date: Wed, 17 Oct 2001 11:31:24 +0100
Subject: [R] Assignment of structures on a given environment]
Message-ID: <3BCD5DFC.A410D0C6@liacc.up.pt>

Robert Gentleman wrote:

> On Tue, Oct 16, 2001 at 04:40:34PM +0100, Rita Ribeiro wrote:
> > Hi,
> >
> > In order to avoid deep copies by passing large arguments to
functions or
> >
> > returning values, I'm trying to do the assignment of variables in a
> > given environment. The problem is when I try to assign a structure:
a
> > list for example.
> >
> > If I have:
> >     ind <- c("a","b")
> >
> > my idea is doing something like
> >
> >     l <- alist()
> >     l[ind] <- as.list(c(20,40))
> >
> >  in a given environment.
> >
> >
> >
> > Example:
> >     ref <- new.env()
> >     (.....)
> >     assign("l",alist(),env=ref)
> >
> >
> >     If I do
> >         assign("l$a",20,env=ref)
> >
> >     it creates me a new variable in the ref environment  named "l$a"

> >
>   This is what you asked it to do.
>   Environments work at the level of whole objects. I'm not sure what
>   it would mean for l$a to exist in ref if l doesn't exist in ref.
>   So, you just assign l into the environment and retrieve it from the
>   environment, using get.
>
>   If you you have only one list then perhaps you do not want to put
>   the list in, rather just the elements.
>
>    names <- names(l)
>    for(i in 1:length(l)) assign(names[i], l[[i]], env=ref)
>
>    you then have a and b, for example, in the environment and can
>    extract them.
>
>    If you have two lists, l1 and l2 and both have a's and b's as
>    components then you have to put in the whole list (or adopt a
>    naming convention).
>

    Hi, again


    My problem is  concerned with the fact that my list will be a list
of lists
which  elements will be sucessively appended and defined.
    I want to "build" the whole list into the environment. preserving
its structure
(it will be useful for me to be able to manipulate the list later).
    More precisely, I want to do ,in a given environment, something
like:

            l  <- alist()

            l$first <- alist()
            l$first[ind] <- as.list(c(20,40))  # where ind is local
vector
containind the elements names

            l$second <- 50

            So If i do

            > l
            $first
            $first$a
            [1] 20

            $first$b
            [1] 40


            $second
            [1] 50





            and

            > l$first$b
            [1] 40


            I'm searching for some alternative to solution to  define
this hierarchy
in the designed environment, without needing to use the 'evalq'
command..... Is
there one?

            Thanks again,

            Rita


>
>    One might ask whether you are sure that you need to do this?
>    I work on very large data sets and copying has pretty much never
>    been an issue.
>
> >
> >
> >     So,  I did:
> >
> >     eval(l <- alist(), env=ref)
> >
> >     but this creates the l list both on the current and on the ref
> > environment.
> >
> >
> >     The alternative solution that I found out was:
> >
> >     evalq(l<-alist(),env=ref)
> >
> >     and then
> >
> >         evalq(ind <-c("a","b"), env=ref)
> >         evalq(l[ind] <- as.list(c(20,40)), env=ref)
> >
> >
> > I would like to know if there is another possible solution, instead
of
> > doing these 'evalqs' along the program code.
> >
> >
> > Thanks,
> >
> >     Rita
> >
> >
> >
> >
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-

> > r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To:
r-help-request at stat.math.ethz.ch
> >
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

>
> --
>
+---------------------------------------------------------------------------+

> | Robert Gentleman                 phone : (617)
632-5250                   |
> | Associate Professor              fax:   (617)
632-2444                   |
> | Department of Biostatistics      office: M1B28
> | Harvard School of Public Health  email:
rgentlem at jimmy.dfci.harvard.edu   |
>
+---------------------------------------------------------------------------+

>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-

> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:
r-help-request at stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._



-------------- next part --------------
An embedded message was scrubbed...
From: Rita Ribeiro <rita at liacc.up.pt>
Subject: Re: [R] Assignment of structures on a given environment
Date: Wed, 17 Oct 2001 11:26:42 +0100
Size: 5022
Url: https://stat.ethz.ch/pipermail/r-help/attachments/20011017/e982c9f4/attachment.mht

From rita at liacc.up.pt  Wed Oct 17 12:32:41 2001
From: rita at liacc.up.pt (Rita Ribeiro)
Date: Wed, 17 Oct 2001 11:32:41 +0100
Subject: [R] Assignment of structures on a given environment
Message-ID: <3BCD5E48.D971754D@liacc.up.pt>

Hi,

I've already read something about it, and I known that when passing
arguments to
functions, R only passes a "promise" . The argument is copied only if
its value is
changed. But the problem is that I'm sucessively building a list along
the functions
calls, so the value is always updated....

Rita


David A Richmond wrote:

> I was having trouble with a similar issue recently, until I was
informed
> that arguments to functions aren't copied unless they're altered. So I
can
> pass a large matrix through a routine with as many sublevels as i need
and
> the matrix won't be recreated everytime I pass it to another function.
Is
> this the problem you're trying to avoid?
>
> dave
>
> On Tue, 16 Oct 2001, Rita Ribeiro wrote:
>
> > Hi,
> >
> > In order to avoid deep copies by passing large arguments to
functions or
> > returning values, I'm trying to do the assignment of variables in a
> > given environment. The problem is when I try to assign a structure:
a
> > list for example.
> >
> > If I have:
> >     ind <- c("a","b")
> >
> > my idea is doing something like
> >
> >     l <- alist()
> >     l[ind] <- as.list(c(20,40))
> >
> >  in a given environment.
> >
> >
> >
> > Example:
> >     ref <- new.env()
> >     (.....)
> >     assign("l",alist(),env=ref)
> >
> >
> >     If I do
> >         assign("l$a",20,env=ref)
> >
> >     it creates me a new variable in the ref environment  named "l$a"

> >
> >
> >
> >     So,  I did:
> >
> >     eval(l <- alist(), env=ref)
> >
> >     but this creates the l list both on the current and on the ref
> > environment.
> >
> >
> >     The alternative solution that I found out was:
> >
> >     evalq(l<-alist(),env=ref)
> >
> >     and then
> >
> >         evalq(ind <-c("a","b"), env=ref)
> >         evalq(l[ind] <- as.list(c(20,40)), env=ref)
> >
> >
> > I would like to know if there is another possible solution, instead
of
> > doing these 'evalqs' along the program code.
> >
> >
> > Thanks,
> >
> >     Rita
> >
> >
> >
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-

> > r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To:
r-help-request at stat.math.ethz.ch
> >
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

> >
>
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
> |David Richmond                It works on a          |
> + Dept. of Sociology          complex scientific      +
> |Saint Mary's College          principle, known as    |
> + Notre Dame, IN 46556               "pot luck."      +
> |219-284-4517                    - The Doctor         |
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
>
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-

> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:
r-help-request at stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Roger.Bivand at nhh.no  Wed Oct 17 13:53:29 2001
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 17 Oct 2001 13:53:29 +0200 (CEST)
Subject: [R] File reading.
In-Reply-To: <Pine.LNX.4.33.0110171150090.1323-100000@mulligan.atm.ox.ac.uk>
Message-ID: <Pine.LNX.4.21.0110171349320.14209-100000@reclus.nhh.no>

On Wed, 17 Oct 2001, Randall Skelton wrote:

> Hi all,
> 
> Appologies for the rather basic IO question but I am rather new to R...
> Migrated from IDL/Matlab recently.  I have a rather simple Fortran
> control file (sigh...) that I am trying to parse and read using R.  My
> problem is that the file's format is somewhat flexible.  Imagine:
> 
> ---
> 1>  39 1901
> 2>  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20
> 3>   22 24 26 28 30 32 34 36 38 40 42 44 46 48 50 52 54 56 58
> 4>     650.0   650.5   651.0   651.5   652.0   652.5   653.0   653.5   654.0
> 5>     654.5   655.0   655.5   656.0   656.5   657.0   657.5   658.0   658.5
>          ...
> 7>    1599.5  1600.0
> 8>
> 9>  1 1 0
> 10> Xtemp.wf
> 11> 2
> 12> Xtemp.noise
> 13> 4
> 14> Xtemp.Sa
> ---
> 
> Line 1 contains 2 numbers (nx, ny) which can easily be read using scan.
> If nx>0 then there are nx values to be read next (i.e. lines 2 and 3 have
> 39 values).  Likewise, with ny>0, lines 4-7 give 1901 values.  However, if
> nx or ny are less than 0, then the data block for lines 2-3 or lines 4-7
> will not be present and a generic index is made...  In psudo code:
> 
> ---
> # get the file handle for the case file
> fin=fopen(casefile);
> 
> # read the file
> in=fscanf(fin,'%f',2);
> 
> # first 2 numbers in the case file give the size
> nx=in(1);
> ny=in(2);
> 
> # read or construct the x label
> if nx>0
>     xlab=fscanf(fin,'%f',nx);
> else
>     nx=-nx;
>     xlab=0:(nx-1);
> end
> 
> # read or construct the y label
> if ny>0
>     ylab=fscanf(fin,'%f',ny);
> else
>     ny=-ny;
>     ylab=1:ny;
> end
> ---
> 
> My problems are that R seems to be tied to the line numbers on which data
> is found and that the scan function doesn't remember where it last was...
> Is there some C-like fopen/fread construct that I am missing?
> 
Maybe try file(), open(), and readLines(), see Brian Ripley's introduction
to using connections in R-News number 1, pages 16-17.

Roger

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Breiviksveien 40, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 93 93
e-mail: Roger.Bivand at nhh.no
and: Department of Geography and Regional Development, University of
Gdansk, al. Mar. J. Pilsudskiego 46, PL-81 378 Gdynia, Poland.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rhskelto at atm.ox.ac.uk  Wed Oct 17 14:52:42 2001
From: rhskelto at atm.ox.ac.uk (Randall Skelton)
Date: Wed, 17 Oct 2001 13:52:42 +0100 (BST)
Subject: [R] File reading.
In-Reply-To: <Pine.LNX.4.21.0110171349320.14209-100000@reclus.nhh.no>
Message-ID: <Pine.LNX.4.33.0110171347210.1323-100000@mulligan.atm.ox.ac.uk>

Indeed it was the 'file' command that I was missing.  Passing this object
through to 'scan' does what I was looking for.

> a<-file("Xtemp", "r", blocking = TRUE)
> b<-scan(a, what=list(nx=0, ny=0), n=2)
Read 1 records
> c<-scan(a, what=list(xlab=0), n=b$nx)
Read 39 records

The 'scan' documentation doesn't really explain this very well...

|     scan(file = "", what = double(0), nmax = -1, n = -1, sep = "",
|          quote = if (sep=="\n") "" else "'\"", dec = ".",
|          skip = 0, nlines = 0, na.strings = "NA",
|          flush = FALSE, fill = FALSE, strip.white = FALSE, quiet = FALSE,
|          blank.lines.skip = TRUE, multi.line = TRUE)

Thanks!
Randall

On Wed, 17 Oct 2001, Roger Bivand wrote:

> Maybe try file(), open(), and readLines(), see Brian Ripley's introduction
> to using connections in R-News number 1, pages 16-17.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From laurent at genome.cbs.dtu.dk  Wed Oct 17 14:55:36 2001
From: laurent at genome.cbs.dtu.dk (Laurent Gautier)
Date: Wed, 17 Oct 2001 14:55:36 +0200 (MDT)
Subject: [R] File reading.
In-Reply-To: <Pine.LNX.4.33.0110171150090.1323-100000@mulligan.atm.ox.ac.uk>
Message-ID: <Pine.SGI.3.95.1011017145228.11317705F-100000@genome.cbs.dtu.dk>



Laurent Gautier			CBS, Building 208, DTU
PhD. Student			D-2800 Lyngby,Denmark	
tel: +45 45 25 24 85		http://www.cbs.dtu.dk/laurent

On Wed, 17 Oct 2001, Randall Skelton wrote:

> My problems are that R seems to be tied to the line numbers on which data
> is found and that the scan function doesn't remember where it last was...
> Is there some C-like fopen/fread construct that I am missing?


The use of connections could be something worth being tried.

The command 'readLines' reads lines from a connection (and in this sense
'remembers' where it last was...)

try 

help(file)
help(readLines)


Hopin' it helps,



Laurent

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hstevens at muohio.edu  Wed Oct 17 15:35:43 2001
From: hstevens at muohio.edu (Martin Henry H. Stevens)
Date: Wed, 17 Oct 2001 09:35:43 -0400
Subject: [R] Type III sums of squares.
References: <200110170416.MAA02431@salvia.maths.uwa.edu.au>
Message-ID: <002e01c15710$a0cc95a0$e8093586@STEVENS>

>From a disciple:

Allow me to make this discussion a little more concrete for my mortal mind.
Let Factor A = grams of nitrogen fertilizer (levels i=1,2)
Let Factor B = watering regime (levels j=1,2)
Let response Y = Yield of soybeans (g / m^2)

Suppose we measure yield in different treatments and find means of:
        A1        A2
B1    50        100
B2    60        150

Suppose further that we have sufficiently small error to detect differences
among all means and (of course) "significant" main effects and significant
interaction. I would argue strongly that adding nitrogen, regardless of
other factors, increases yield. I would also argue that adding water,
regardless, of other factors, increaases yield. I would also conclude that
adding both together increases uyield more than you might expect based on
adding each factor separately. In a messy ecological setting, we frequently
don't know such basic information.

A more important example arises when factor B is a random effect (spatially
arrayed blocks outside the control of the experimenter?). In such a case, if
levels of B provide a representative sample of the relevent universe, then a
significant main effect demonstrates an overall trend REGARDLESS of what is
going on within each block. Significant interaction may provide interesting
details in the system, greater insight etc., but in the end, we might be
interested primarily in the overall trend across a landscape.

Comments?

Regards,
Henry Stevens
Hstevens at muohio.edu


----- Original Message -----
From: "Rolf Turner" <rolf at maths.uwa.edu.au>
To: <r-help at stat.math.ethz.ch>
Sent: Wednesday, October 17, 2001 12:16 AM
Subject: [R] Type III sums of squares.


>
> Peter Dalgaard writes (in response to a question about 2-way ANOVA
> with imbalance):
>
> >                                              ... There are various
> > boneheaded ways in which people try to use to assign some kind of
> > SumSq to main effects in the presence of interaction, and they are all
> > wrong - although maybe not very wrong if the unbalance is slight.
>
> People keep saying this --- very vehemently --- and it is NOT TRUE.
>
> Point 1 --- imbalance is really irrelevant here, a fact which
> is usually (always?) overlooked.  If the design is balanced,
> all ``types'' of sums of squares are the same.  The sequential
> sums of squares which R will happily produce might well contain
> ``significant'' values for SSA and/or SSB ***and*** a significant
> value for the interaction sum of squares, SSAB.
>
> Point 2 --- What does such ``significance'' ***mean***?  It is not
> correct to say that it means nothing at all.  The significance
> of say, SSA, reports on the result of the test of a hypothesis.
> This hypothesis is a ***meaningful*** hypothesis.  It may well not be
> an important hypothesis, or a particularly interesting hypothesis,
> or a hypothesis that the experimenter actually cares about.
> It is substantially different from the hypothesis which is tested
> by SSA when there is no interaction.  (Different, but related.)
> Bill Venables fulminates that consideration of such a hypothesis is
> contrary to the fundamental philosophy of statistcial modelling, and
> thereby an abomination in the sight of God, and probably Politically
> Incorrect to boot.  This may well be so.  Nonetheless it ***is***
> a well-defined and meaningful hypothesis.
>
> Rather than dismissing the testing of such a hypothesis as being
> ``bone-headed'', the guru should point out to the desciple
>
> (a) just what hypothesis is being tested,
>
> (b) that this hypothesis packs a substantially different
> load of freight than that which is tested when there is
> no interaction, and
>
> (c) that the desciple should carefully search his or her
> soul as to whether the hypothesis which is being tested
> is of any actual interest.
>
> This would go much further toward bringing the desciple to true
> enlightenment.
>
> Point 3 --- what hypothesis is being tested by SSA?
>
> Let factor A correspond to index i, and B to index j.
>
> Let the cell means be mu_ij.  (In the overparameterized
> notation, mu_ij = mu + alpha_i + beta_j + gamma_ij.)
>
> The hypothesis being tested is
>
> H_0: mu_1.-bar = mu_2.-bar = ... = mu_a.-bar
>
> where factor A has a levels, and ``mu_i.-bar'' means
> the average (arithmetic mean) of mu_i1, mu_i2, ..., mu_ib.
> (Note --- factor B has b levels.)
>
> I.e. the hypothesis is that there is no difference, on average,
> between the levels of A, the average being taken over the levels
> of B.
>
> Now taking such an average may not be a sensible thing to do,
> but it is perfectly well-defined, and thus a ***meaningful***
> hypothesis is being tested.  (The meaning of which the hypothesis
> is full might not be very exciting, but that is more of a practical
> than a statistical issue.)
>
> Note that the hypothesis being tested, while possibly of dubious
> import, is perfectly comprehensible to the human mind.
>
> (Remark: In real life, if we were really interested in averaging
> over the levels of B at all, we would probably want a ***weighted***
> average, with the weights corresponding to the preponderance of
> the levels of B in the population.)
>
> Note that if there is no interaction (if the gamma_ij are all zero)
> then the hypothesis being tested is that for each fixed j, the mu_ij
> are all ***identical*** (say mu_ij = tau_j) and hence the averages
> over j are equal (mu_i.-bar = tau.-bar, independent of i.)
>
> This is all easier to think about graphically.  For each j, plot the
> mu_ij against the index i, giving a ``profile''.  ``No interaction''
> means that all profiles are parallel.  No interaction and no A
> effect means that all profiles are horizontal.
>
> If the profiles are parallel, then all profiles will be horizontal
> if and only if their mean is horizontal.
>
> However if the profiles are ***not*** parallel (i.e. if there is
> interaction) their means may be horizontal anyhow.
>
> Let me repeat:  This horizontallity may not be of much interest if
> the profiles are not parallel, but it is a perfectly well-defined
> concept, and testing for it makes perfect sense in the abstract.
>
> Point 4  --- on the (remote?) chance that we really are interested in
> the above horizontallity, and if the design is in fact NOT BALANCED,
> then the much maligned type III sums of squares are ***definitely***
> called for.  Type III sums of squares will test the null hypothesis
> stated in Point 3, irrespective of balance.  Sequential sums of
> squares will test another, different, and totally bizarre hypothesis.
> (Again a perfectly ``meaningfull'' hypothesis, but one such that the
> meaning is really too convoluted to admit any sort of comprehension
> by the human mind.  Moreover this hypothesis is dependent on the
> design structure, rendering it even more unlikely to be of any
> interest, even if one could understand what it it is saying.)
>
>
> cheers,
>
> Rolf Turner
> rolf at maths.unb.ca
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rita at liacc.up.pt  Wed Oct 17 15:41:10 2001
From: rita at liacc.up.pt (Rita Ribeiro)
Date: Wed, 17 Oct 2001 14:41:10 +0100
Subject: [R] Assignment of structures on a given environment
References: <3BCC54F2.6A0E4D54@liacc.up.pt> <20011016124517.S6980@jimmy.harvard.edu> <3BCD5CE2.B22E59FC@liacc.up.pt> <20011017082559.A24286@jimmy.harvard.edu>
Message-ID: <3BCD8A76.D4428620@liacc.up.pt>


Hi,


Robert Gentleman wrote:

> Yes there is a way without evalq.
> Simply get and retrieve the list. From your description you say that
> you need to
>   1) keep the list structure
>   2) keep successively updating the list structure
>
> >From those perspectives putting the list in an environment will not
> help you save copies. In R we generally copy on mutate (not always and
> it could be improved but mostly).
>
> You really have not described the problem that you are trying to
> solve, rather you are giving us an abstraction and from that it is
>

The list I'm building keeps a variety of information about some dataset!
Among other things the list keeps the dataset itself in the data frame R format.

As there are some huge datasets, I was wishing to avoid frequent copies of that
structure.

I've already pass that list as an argument and there seems to be no problem in
the execution. The only issue is that in very large datasets those frequent
copies could slow down the execution.

I've also stored this list in the Global environment, but as the program
produces also an output file with similar information I wouldn't like the idea
of leaving some "garbage" in the Global environment or making users manage some
global variable...... Ok, I can do 'rm', but if users do want to have access to
the produced list??
My idea was making the program  return some kind of pointer to the environment
where is the list at, which users would use if they want to access it.... I
thought that way it wouldn't be necessary any copies....

Well, I'm seeing that there is no much way around it....


    Thanks  again for the tips,

    Rita



> very hard for anyone to give you sensible advice.
>
> I still truely doubt that size is an issue. Have you tried passing the
> list directly? Do you know that size is an issue or do you just
> presume it?
>
> Finally a very ugly solution that involves no evalq's
>
> You can always store your list in the Global environment and access it
> using get, assign and <<-. There should be only one copy but if you
> keep changing it, it will be duplicated, that's kind of necessary.
>
> --
> +---------------------------------------------------------------------------+
> | Robert Gentleman                 phone : (617) 632-5250                   |
> | Associate Professor              fax:   (617)  632-2444                   |
> | Department of Biostatistics      office: M1B28
> | Harvard School of Public Health  email: rgentlem at jimmy.dfci.harvard.edu   |
> +---------------------------------------------------------------------------+

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andy_liaw at merck.com  Wed Oct 17 16:41:24 2001
From: andy_liaw at merck.com (Liaw, Andy)
Date: Wed, 17 Oct 2001 10:41:24 -0400
Subject: [R] optimal windows R machine
Message-ID: <51F9C42DA15CD311BD220008C707D81903DC82F9@usrymx10.merck.com>

I agree with Mark about Linux, if for no other reasons than the fact that it
actually comes with the compilers needed to build R and do further code
development.  Compared with doing it on Linux, compiling R from source on
Windows is not exactly a pleasure, even with the tremendous work to make it
even possible by Ripley and Mararrato.

Cheers,
Andy

> -----Original Message-----
> From: Mark Myatt [mailto:mark at myatt.demon.co.uk]
> Sent: Wednesday, October 17, 2001 5:05 AM
> To: Bob Porter
> Cc: R-help at stat.math.ethz.ch
> Subject: Re: [R] optimal windows R machine
> 
> 
> Bob Porter <rjporter at mindspring.com> writes:
> 
> >I have the happy task of purchasing a new windows desktop 
> PC.  I have a
> >limited but not unreasonable budget and access to discounts 
> and so forth.
> > What would be folks' suggestions of priorities and 
> requirements be if I
> >will
> > use the machine for a lot of C and R based data analysis 
> with large files,
> > computationally intensive, a lot of graphic display but not 
> 3D animation.
> >I
> >am proposing 1GB AMD processor,  1 GB RAM, 40GB drive, 
> hi-speed CDRW, 64MEG
> >video, Win  XP home edition.  Thoughts?  I will upgrade 
> software also:
> >Suggestions of C compiler package? Other "must have" 
> packages compatible
> >with R?
> 
> With the processor and memory thing should fly along. The 
> video is a bit
> over specified as most 64MB cards will be optimised for 3D graphics at
> high colour depths. It will work OK but you might be better off going
> for a cheaper graphics card and spending the savings on a 
> better quality
> monitor / keyboard / mouse. I have no experience with Windows XP. I
> would consider one of the Linux distributions with a small and light
> windows manager as I imagine XP will be quite an overhead.
> 
> Mark
> 
> 
> --
> Mark Myatt
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Leslie_Branch at hgsi.com  Wed Oct 17 16:53:09 2001
From: Leslie_Branch at hgsi.com (Leslie_Branch@hgsi.com)
Date: Wed, 17 Oct 2001 10:53:09 -0400
Subject: [R] New Beginner: Problems w/loading Matrix package
Message-ID: <OF60D4DA2F.C1085910-ON85256AE8.004F95E4@hgsi.com>

Hello all,

I am 2 days old in compiling and installing R-1.3.1 and having all kinds of
problems with one particular package named "Matrix_0.3-15.tar.gz"

Where should I start?

OK!

I have successfully installed R version R-1.3.1 as well as a host of other
packages (piece of cake).  When I tried to install the Matrix package, I
got an error message stating that the "BLAS library could not be found"  I
then downloaded a copy of the blas(blas.tgz) tar file from
www.netlib.org/blas that contained nothing but function files.  I created
the library using Fortran (g77) and "ar".  I called it "blas.a", moved it
to the /usr/local/lib directory and made sure my path was set.  That still
didn't work.  Next I was told that I probably need to recompile R so it can
recognize the blas library.  I tried to do a "make distclean" to start over
and I get another error message that says:

make: Fatal error: Don't know how to make target `clean`

HELP!

Sorry to bore you with this R 101 basic stuff, but I have no clue as to
what to do next.  Any assistance will be greatly appreciated.


Leslie

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hlai at whsun1.wh.whoi.edu  Wed Oct 17 20:53:57 2001
From: hlai at whsun1.wh.whoi.edu (Han Lai)
Date: Wed, 17 Oct 2001 11:53:57 -0700
Subject: [R] Helps on "optimize"
Message-ID: <3BCDD3C5.DAD62DD7@whsun1.wh.whoi.edu>

Hi,

I am trying to write a r-code that maximizes fish yield, which is
summing over a total of 11 months (t=c(1:11))  for one cohort.  My code
looks like this:

t <- c(1:11)
days <- 30*t-15
yt <- 6.6*exp(log(12.3/6.6)*(days-126.3)/(189.5-126.3))
wt <- exp(log(0.250206)+2.14418*log(yt))
v0 <- 4; v1 <- 14
st <- (yt-v0)/(v1-v0); st[yt<=v0] <- 0; st[yt>=v1] <-1;
st1 <- cumsum(st)
yield <- function(F,N0,M,t,days,wt,st,st1) {
       sum(wt*N0*exp(-(t-1)*M-F*st1)*(st*F/(M+st*F))*(1-exp(-M-st*F))) }

optimize(yield,interval=c(0,3),max=T,N0=15.4185,M=0.3,t=t,days=days,wt=wt,st=st,st1=st1)

Everything is o.k. untile the last one line, which gives the following
error message.

Error in sum(wt * N0 * exp(-(t - 1) * M - F * st1) * (st * F/(M + st *
:
        Argument "t" is missing, with no default

Thanks in advance for your helps!

Cheers!
Han
Han-Lin.Lai at noaa.gov


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From reid_huntsinger at merck.com  Wed Oct 17 18:01:17 2001
From: reid_huntsinger at merck.com (Huntsinger, Reid)
Date: Wed, 17 Oct 2001 12:01:17 -0400
Subject: [R] New Beginner: Problems w/loading Matrix package
Message-ID: <B9A894093554D511941700508B5C76DB23D0CC@uswpmx08.merck.com>

First, you might want to get a BLAS optimized for your machine. One way is
to get ATLAS and run it. It automatically tunes the BLAS code to your setup.
But first maybe you want to get things working with the BLAS you have.

Second, "make distclean" removes the Makefile, among other things, so if you
issued this command twice (or somehow otherwise deleted the Makefile), you
would get a message like the one you got (On linux with make 3.79.1 I get
"make: *** No rule to make target 'clean'. Stop." but maybe you have a
different make). 

(re-) Run the configure script to regenerate the Makefile (and recognize the
BLAS library): 

$ ./configure [--with-whatever-options]

(make sure the file config.cache is gone in case "make distclean" didn't
work...)

Then you should be able to start over. 

Hope that helps,

Reid Huntsinger

-----Original Message-----
From: Leslie_Branch at hgsi.com [mailto:Leslie_Branch at hgsi.com]
Sent: Wednesday, October 17, 2001 10:53 AM
To: r-help at stat.math.ethz.ch
Subject: [R] New Beginner: Problems w/loading Matrix package


Hello all,

I am 2 days old in compiling and installing R-1.3.1 and having all kinds of
problems with one particular package named "Matrix_0.3-15.tar.gz"

Where should I start?

OK!

I have successfully installed R version R-1.3.1 as well as a host of other
packages (piece of cake).  When I tried to install the Matrix package, I
got an error message stating that the "BLAS library could not be found"  I
then downloaded a copy of the blas(blas.tgz) tar file from
www.netlib.org/blas that contained nothing but function files.  I created
the library using Fortran (g77) and "ar".  I called it "blas.a", moved it
to the /usr/local/lib directory and made sure my path was set.  That still
didn't work.  Next I was told that I probably need to recompile R so it can
recognize the blas library.  I tried to do a "make distclean" to start over
and I get another error message that says:

make: Fatal error: Don't know how to make target `clean`

HELP!

Sorry to bore you with this R 101 basic stuff, but I have no clue as to
what to do next.  Any assistance will be greatly appreciated.


Leslie

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From G.Janacek at uea.ac.uk  Wed Oct 17 18:07:12 2001
From: G.Janacek at uea.ac.uk (G.Janacek)
Date: Wed, 17 Oct 2001 17:07:12 +0100
Subject: [R] Using R
Message-ID: <a05010407b7f35c1f2c86@[139.222.80.181]>

I know this is a bit off topic but :

I am soon to teach first year stats to mathematicians for the first 
time in some years. I have used MINITAB in the past for simulation 
etc but we are now too poor to afford the licence.  Being an R 
enthusiast I am contemplating biting the bullet and using R ab initio 
( at present I use it with my third years).

I would be grateful for any words of wisdom.
Jan
-- 
G.Janacek					44 (0) 1603 592489
Dean                                    fax     44 (0) 1603 593868
School of Maths                   secretary     44 (0) 1603 592488
UEA
Norwich NR4 7TJ
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hlai at whsun1.wh.whoi.edu  Wed Oct 17 21:05:16 2001
From: hlai at whsun1.wh.whoi.edu (Han Lai)
Date: Wed, 17 Oct 2001 12:05:16 -0700
Subject: [R] Re: Helps on "optimize"
References: <3BCDD3C5.DAD62DD7@whsun1.wh.whoi.edu>
Message-ID: <3BCDD66C.6F92719C@whsun1.wh.whoi.edu>

Sorry about my missing statement.  My r-code is to find F-value that maximizes fish yield.
N0=15.4185,M=0.3,t=t,days=days,wt=wt,st=st,st1=st1 in optimize statement is constants or
constant arrays.

Han Lai wrote:

> Hi,
>
> I am trying to write a r-code that maximizes fish yield, which is
> summing over a total of 11 months (t=c(1:11))  for one cohort.  My code
> looks like this:
>
> t <- c(1:11)
> days <- 30*t-15
> yt <- 6.6*exp(log(12.3/6.6)*(days-126.3)/(189.5-126.3))
> wt <- exp(log(0.250206)+2.14418*log(yt))
> v0 <- 4; v1 <- 14
> st <- (yt-v0)/(v1-v0); st[yt<=v0] <- 0; st[yt>=v1] <-1;
> st1 <- cumsum(st)
> yield <- function(F,N0,M,t,days,wt,st,st1) {
>        sum(wt*N0*exp(-(t-1)*M-F*st1)*(st*F/(M+st*F))*(1-exp(-M-st*F))) }
>
> optimize(yield,interval=c(0,3),max=T,N0=15.4185,M=0.3,t=t,days=days,wt=wt,st=st,st1=st1)
>
> Everything is o.k. untile the last one line, which gives the following
> error message.
>
> Error in sum(wt * N0 * exp(-(t - 1) * M - F * st1) * (st * F/(M + st *
> :
>         Argument "t" is missing, with no default
>
> Thanks in advance for your helps!
>
> Cheers!
> Han
> Han-Lin.Lai at noaa.gov

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Wed Oct 17 18:09:33 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Oct 2001 18:09:33 +0200
Subject: [R] New Beginner: Problems w/loading Matrix package
In-Reply-To: <OF60D4DA2F.C1085910-ON85256AE8.004F95E4@hgsi.com>
References: <OF60D4DA2F.C1085910-ON85256AE8.004F95E4@hgsi.com>
Message-ID: <x2hesy5juq.fsf@blueberry.kubism.ku.dk>

Leslie_Branch at hgsi.com writes:

> Hello all,
> 
> I am 2 days old in compiling and installing R-1.3.1 and having all kinds of
> problems with one particular package named "Matrix_0.3-15.tar.gz"
> 
> Where should I start?
> 
> OK!
> 
> I have successfully installed R version R-1.3.1 as well as a host of other
> packages (piece of cake).  When I tried to install the Matrix package, I
> got an error message stating that the "BLAS library could not be found"  I
> then downloaded a copy of the blas(blas.tgz) tar file from
> www.netlib.org/blas that contained nothing but function files.  I created
> the library using Fortran (g77) and "ar".  I called it "blas.a", moved it
> to the /usr/local/lib directory and made sure my path was set.  That still
> didn't work.  Next I was told that I probably need to recompile R so it can
> recognize the blas library.  I tried to do a "make distclean" to start over
> and I get another error message that says:
> 
> make: Fatal error: Don't know how to make target `clean`
> 
> HELP!
> 
> Sorry to bore you with this R 101 basic stuff, but I have no clue as to
> what to do next.  Any assistance will be greatly appreciated.

You forgot to tell us what system you're on. There might be an easier
way to get the BLAS installed. Anyways: assuming you 

a) built R in its source directory
b) didn't do any important modifications to it

I'd suggest that you simply wipe the whole thing and unpack the R
sources again. Then make a BUILD dir, cd into it, and

../R-1.3.1/configure --with-blas

You may need to create a config.site file with

LIBS=-L/usr/local/lib

to get it to pick the blas from where you put it.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From reid_huntsinger at merck.com  Wed Oct 17 18:32:22 2001
From: reid_huntsinger at merck.com (Huntsinger, Reid)
Date: Wed, 17 Oct 2001 12:32:22 -0400
Subject: [R] New Beginner: Problems w/loading Matrix package
Message-ID: <B9A894093554D511941700508B5C76DB23D0CE@uswpmx08.merck.com>

Follow-up to previous post: I just checked the Matrix package and it
requires LAPACK, not just the BLAS. You can install LAPACK with ATLAS in one
of several ways detailed in the LAPACK or ATLAS docmentation.

Reid Huntsinger

-----Original Message-----
From: Leslie_Branch at hgsi.com [mailto:Leslie_Branch at hgsi.com]
Sent: Wednesday, October 17, 2001 10:53 AM
To: r-help at stat.math.ethz.ch
Subject: [R] New Beginner: Problems w/loading Matrix package


Hello all,

I am 2 days old in compiling and installing R-1.3.1 and having all kinds of
problems with one particular package named "Matrix_0.3-15.tar.gz"

Where should I start?

OK!

I have successfully installed R version R-1.3.1 as well as a host of other
packages (piece of cake).  When I tried to install the Matrix package, I
got an error message stating that the "BLAS library could not be found"  I
then downloaded a copy of the blas(blas.tgz) tar file from
www.netlib.org/blas that contained nothing but function files.  I created
the library using Fortran (g77) and "ar".  I called it "blas.a", moved it
to the /usr/local/lib directory and made sure my path was set.  That still
didn't work.  Next I was told that I probably need to recompile R so it can
recognize the blas library.  I tried to do a "make distclean" to start over
and I get another error message that says:

make: Fatal error: Don't know how to make target `clean`

HELP!

Sorry to bore you with this R 101 basic stuff, but I have no clue as to
what to do next.  Any assistance will be greatly appreciated.


Leslie

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Wed Oct 17 18:41:24 2001
From: ben at zoo.ufl.edu (Ben Bolker)
Date: Wed, 17 Oct 2001 12:41:24 -0400 (EDT)
Subject: [R] Helps on "optimize"
In-Reply-To: <3BCDD3C5.DAD62DD7@whsun1.wh.whoi.edu>
Message-ID: <Pine.LNX.4.30.0110171239210.25955-100000@bolker.zoo.ufl.edu>


  The problem is that optimize() has an optional argument "tol" which is
getting confused with the "t" argument in your function, since R tries to
do partial matching on function arguments.  If you rename the t argument
to t1 (or anything except "to" or "tol") it will work (I think):

yield <- function(F,N0,M,t1,days,wt,st,st1) {
        sum(wt*N0*exp(-(t1-1)*M-F*st1)*(st*F/(M+st*F))*(1-exp(-M-st*F)))
}
optimize(yield,interval=c(0,3),max=T,N0=15.4185,M=0.3,t1=t,
        days=days,wt=wt,st=st,st1=st1)

On Wed, 17 Oct 2001, Han Lai wrote:

> Hi,
>
> I am trying to write a r-code that maximizes fish yield, which is
> summing over a total of 11 months (t=c(1:11))  for one cohort.  My code
> looks like this:
>
> t <- c(1:11)
> days <- 30*t-15
> yt <- 6.6*exp(log(12.3/6.6)*(days-126.3)/(189.5-126.3))
> wt <- exp(log(0.250206)+2.14418*log(yt))
> v0 <- 4; v1 <- 14
> st <- (yt-v0)/(v1-v0); st[yt<=v0] <- 0; st[yt>=v1] <-1;
> st1 <- cumsum(st)
> yield <- function(F,N0,M,t,days,wt,st,st1) {
>        sum(wt*N0*exp(-(t-1)*M-F*st1)*(st*F/(M+st*F))*(1-exp(-M-st*F))) }
>
> optimize(yield,interval=c(0,3),max=T,N0=15.4185,M=0.3,t=t,days=days,wt=wt,st=st,st1=st1)
>
> Everything is o.k. untile the last one line, which gives the following
> error message.
>
> Error in sum(wt * N0 * exp(-(t - 1) * M - F * st1) * (st * F/(M + st *
> :
>         Argument "t" is missing, with no default
>
> Thanks in advance for your helps!
>
> Cheers!
> Han
> Han-Lin.Lai at noaa.gov
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker at zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Oct 17 19:25:01 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 17 Oct 2001 18:25:01 +0100 (BST)
Subject: [R] read.packages: where is it?
In-Reply-To: <Pine.OSF.3.96.1011017125754.27410I-100000@ija.csic.es>
Message-ID: <Pine.LNX.4.31.0110171820500.13526-100000@gannet.stats>

On Wed, 17 Oct 2001, Agustin Lobo wrote:

> The rw-FAQ.html (entry 7.2 How do I include compiled C code?) mentions
> the file readme.packages, which I do no find in my installation. I've
> tried at CRAN and cannot find it. Doe anyone know where is it?

It *is* in the SetupR.exe distribution: you need to select the component
for `Source Packages', as described in section 7.2 of the rw-FAQ.  If you
had done as that describes, readme.packages would be in the top-level
rw1031 folder.

Alternatively, it is also in the source distribution in directory
R-1.3.1/src/gnuwin32.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rhskelto at atm.ox.ac.uk  Wed Oct 17 23:14:21 2001
From: rhskelto at atm.ox.ac.uk (Randall Skelton)
Date: Wed, 17 Oct 2001 22:14:21 +0100 (BST)
Subject: [R] General Matrix Inverse
In-Reply-To: <Pine.LNX.4.33.0110171347210.1323-100000@mulligan.atm.ox.ac.uk>
Message-ID: <Pine.LNX.4.33.0110172157520.10674-100000@moriarty.atm.ox.ac.uk>

What is the easiest (not the fastest) way to find the general inverse of a
matrix in R?

Many thanks,
Randall

NB: Is there a searchable mailing list available?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tchur at optushome.com.au  Thu Oct 18 00:24:30 2001
From: tchur at optushome.com.au (Tim Churches)
Date: Thu, 18 Oct 2001 08:24:30 +1000
Subject: [R] optimal windows R machine
References: <007301c1566f$ef3a0480$214abfa8@drbob> <N4ErWDALnUz7EwuU@myatt.demon.co.uk>
Message-ID: <3BCE051E.B1AC7F2A@optushome.com.au>

Mark Myatt wrote:
> 
> Bob Porter <rjporter at mindspring.com> writes:
> 
> >I have the happy task of purchasing a new windows desktop PC.  I have a
> >limited but not unreasonable budget and access to discounts and so forth.
> > What would be folks' suggestions of priorities and requirements be if I
> >will
> > use the machine for a lot of C and R based data analysis with large files,
> > computationally intensive, a lot of graphic display but not 3D animation.
> >I
> >am proposing 1GB AMD processor,  1 GB RAM, 40GB drive, hi-speed CDRW, 64MEG
> >video, Win  XP home edition.  Thoughts?  I will upgrade software also:
> >Suggestions of C compiler package? Other "must have" packages compatible
> >with R?
> 
> With the processor and memory thing should fly along. The video is a bit
> over specified as most 64MB cards will be optimised for 3D graphics at
> high colour depths. It will work OK but you might be better off going
> for a cheaper graphics card and spending the savings on a better quality
> monitor / keyboard / mouse. I have no experience with Windows XP. I
> would consider one of the Linux distributions with a small and light
> windows manager as I imagine XP will be quite an overhead.

R keeps all its data in memory. Pentium 4 processors combined with RDRAM
memory provides a much higher CPU-to-memory bandwidth than any other
CPU/memory combination - at least twice as fast as any AMD/DDR memory
configuration, although the latency of the Pentium 4 memory access is
higher. What does this mean? If your work involves iterative access to
large R data objects (large meaning many tens or hundreds of megabytes),
then a Pentium 4 with RDRAM offers some theoretical advantages. I
haven't done any benchmarking with R, but this seems to apply to large
Numerical Python arrays (held in memory like R data). Computationally
(as opposed to memory access), a 1.8 GHz Pentium 4 seems to be on par
with a 1.4 GHz AMD. The 2 GHz Pentium 4 probably takes the cake for
outright speed at the moment, at quite a price premium. So my
recommendation is, if you can afford it, a 1.8 GHz Pentium 4 with 1
gigabyte of RDRAM memory. Note that none of this applies to Pentium 4
machines which use cheaper SDRAM memory - most of the memory bandwidth
advantage is lost when using SDRAM. 

Having said all this, you really need to be doing a lot of iterative
processing of large data objects for any of this to matter. Otherwise,
save your pennies and go for what you have described.

And why not set up you machine to at least dual boot into Linux as an
alternative to Windows XP? 

Tim Churches
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetilh at umsanet.edu.bo  Wed Oct 17 22:43:36 2001
From: kjetilh at umsanet.edu.bo (kjetil halvorsen)
Date: Wed, 17 Oct 2001 16:43:36 -0400
Subject: [R] Re: stochastic course notes with R
References: <200110171049.MAA21217@luc.ac.be>
Message-ID: <3BCDED78.B7E8C44E@umsanet.edu.bo>



Jim Lindsey wrote:

> As a reminder, the following books all have complete R code available
> on my web page as well:
> 
> Introductory Statistics. A Modelling Approach. OUP, 1995 0-19-852345-9
>         (also instructor's manual can be downloaded)
> Models for Repeated Measurements. (2nd edn) OUP, 1999 0-19-850559-0
> Nonlinear Models in Medical Statistics. OUP, 2001 0-19-850812-3
> 
Hola!

I have been interested in buying some of this books, but search
on amazon.com gives no help. Are this out of print, and if not, where
can I find them?

Thanks, Kjetil Halvorsen

> Of course, all four require my R libraries available at
> 
> www.luc.ac.be/~jlindsey/rcode.html
> 
> Comments and criticisms are very welcome.
>   Jim
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-announce mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-announce-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From john_heumann at agilent.com  Thu Oct 18 03:22:26 2001
From: john_heumann at agilent.com (HEUMANN,JOHN (A-Loveland,ex1))
Date: Wed, 17 Oct 2001 19:22:26 -0600
Subject: [R] if/else at 1.3.1
Message-ID: <9153F74610B7D311B83900902771C8710A4CE46A@axcs07.cos.agilent.com>

Under NT with 1.3.1

if (x == 1) {
  cat("Saw x=1\n");
} else {
  cat("Saw x!=1\n");
}

works as expected, but 

if (x == 1) {
  cat("Saw x=1\n");
} 
else {
  cat("Saw x!=1\n");
}

is currently giving me a syntax error on the "else" line. 
Apparently the parser considers the if statement to have 
ended as soon as it sees first closing brace, unless 
there's an else on the same line.

IIRC, both forms were accepted at 1.3.0. Is this a bug, 
or intentional? I don't see any mention of this
change in the "What's New" notes. BTW, I didn't notice
this behavior until after a crash (caused by a known
package bug) which blew me all the way out of RGui, 
so its possible I've corrupted my installation...

Thanks,
-jh-

=========================================
John M. Heumann, Agilent Technologies
815 14th St. S.W., Loveland, CO 80537 USA
Email: john_heumann at agilent.com
Phone: 970 679-3761 FAX: 970 679-5399
=========================================
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Oct 18 04:23:20 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 18 Oct 2001 03:23:20 +0100 (BST)
Subject: [R] if/else at 1.3.1
In-Reply-To: <9153F74610B7D311B83900902771C8710A4CE46A@axcs07.cos.agilent.com>
Message-ID: <Pine.LNX.4.31.0110180318060.13981-100000@gannet.stats>

On Wed, 17 Oct 2001, HEUMANN,JOHN (A-Loveland,ex1) wrote:

> Under NT with 1.3.1
>
> if (x == 1) {
>   cat("Saw x=1\n");
> } else {
>   cat("Saw x!=1\n");
> }
>
> works as expected, but
>
> if (x == 1) {
>   cat("Saw x=1\n");
> }
> else {
>   cat("Saw x!=1\n");
> }
>
> is currently giving me a syntax error on the "else" line.
> Apparently the parser considers the if statement to have
> ended as soon as it sees first closing brace, unless
> there's an else on the same line.

Right, that is as described in the R Language Reference Manual, e.g.
in section 10.2.5.

All R statements are considered ended at the first new line at which they
are syntactically complete.

> IIRC, both forms were accepted at 1.3.0. Is this a bug,

If it worked in 1.3.0, that was a bug, as it was documented otherwise in
that version too.

> or intentional? I don't see any mention of this
> change in the "What's New" notes. BTW, I didn't notice
> this behavior until after a crash (caused by a known
> package bug) which blew me all the way out of RGui,
> so its possible I've corrupted my installation...

I've never seen a syntax error crash RGui.  If that is all that there is
to this, please file a bug report.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Oct 18 04:24:50 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 18 Oct 2001 03:24:50 +0100 (BST)
Subject: [R] General Matrix Inverse
In-Reply-To: <Pine.LNX.4.33.0110172157520.10674-100000@moriarty.atm.ox.ac.uk>
Message-ID: <Pine.LNX.4.31.0110180323310.13981-100000@gannet.stats>

On Wed, 17 Oct 2001, Randall Skelton wrote:

> What is the easiest (not the fastest) way to find the general inverse of a
> matrix in R?

If you mean the generalized inverse, ginv() in package MASS.  Otherwise,
pleae tell us what a `general inverse' is.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From r.hankin at auckland.ac.nz  Thu Oct 18 05:21:58 2001
From: r.hankin at auckland.ac.nz (Robin Hankin)
Date: Thu, 18 Oct 2001 16:21:58 +1300
Subject: [R] tapply problem
Message-ID: <200110180321.f9I3Lwg06098@r.hankin.sems.auckland.ac.nz>

Hello everybody.

I have a question that has stumped me and the usual "apply" tricks
don't seem to work.  I run a course where each student's performance
is marked by one or more assessors. 

I have a data frame containing students' names, assessors' names and
their marks, arranged as follows:


        ID       student   assessor  Q1A  Q1B  Q1C  Q2A  Q2B  Q3
1  2152833    Fred.Smith      Robin 15.0 17.0 13.0 14.0 13.0  8.0
2  2152833    Fred.Smith      Steph 14.0 13.0 11.0 16.0 13.0  8.0
3  2152833    Fred.Smith      Julie 15.0 17.0 13.0 17.0 13.0  8.0
4  9821091    Joe.Bloggs       John 13.0 12.0 12.0 15.0 12.0  8.0
5  9821091    Joe.Bloggs      Julie   NA   NA   NA 18.0 14.0  8.0
6  9821091    Joe.Bloggs      Robin 12.0 12.5   NA 16.0 13.5  8.0
7  9821091    Joe.Bloggs      Steph   NA   NA 12.0 17.0 12.5  NA
8  9791734     Bob.Jones      Julie 13.0 12.0  8.0 16.0 13.0  8.0
9  9791734     Bob.Jones      Robin 11.0 12.0  7.0 14.0 11.0  8.0
...


note that some students are marked by more assessors than others.


What I want is each student's mean mark for each question, averaged
over the appropriate assessors.  Is there a neat vectorized method I
could use?

The best I can come up with is "tapply(x$Q1A,x$name,mean,na.rm=T)" but
this works question-by-question and I would like a reduced data frame
with the same column headings.


this is driving me crazy; thanks in advance!



-- 

Robin Hankin, Lecturer,
School of Environmental and Marine Science
Private Bag 92019 Auckland
New Zealand

r.hankin at auckland.ac.nz
tel 0064-9-373-7599 x6820; FAX 0064-9-373-7042



--f9295XO03655.1002013533/r.hankin.sems.auckland.ac.nz--



-- 

Robin Hankin, Lecturer,
School of Environmental and Marine Science
Private Bag 92019 Auckland
New Zealand

r.hankin at auckland.ac.nz
tel 0064-9-373-7599 x6820; FAX 0064-9-373-7042


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From phgrosje at ulb.ac.be  Thu Oct 18 09:11:54 2001
From: phgrosje at ulb.ac.be (Philippe Grosjean)
Date: Thu, 18 Oct 2001 09:11:54 +0200
Subject: [R] General Matrix Inverse
In-Reply-To: <Pine.LNX.4.31.0110180323310.13981-100000@gannet.stats>
Message-ID: <MABBLJDICACNFOLGIHJOCEHPCGAA.phgrosje@ulb.ac.be>

I use solve(x) to find the inverse of a matrix (don't know what a "general
inverse" is). By the way, what is better: solve(x), qr.solve(x) or ginv(x)?
ginv(x) seems to give results for matrices where solve and qr.solve return
an error:

> x <- matrix(1:9, 3, 3)
> x
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
> solve(x)
Error in solve.default(x) : singular matrix `x' in solve
> qr.solve(x)
Error in qr.solve(x) : singular matrix `x' in solve
> ginv(x)
           [,1]          [,2]       [,3]
[1,] -0.6388889 -5.555556e-02  0.5277778
[2,] -0.1666667  4.163336e-17  0.1666667
[3,]  0.3055556  5.555556e-02 -0.1944444

Regards,

Philippe Grosjean


...........]<(({?<...............<?}))><...............................
 ) ) ) ) )	 __               	 __
( ( ( ( ( 	|__)              	|  _
 ) ) ) ) )	|   hilippe       	|__)rosjean
( ( ( ( ( 	Marine Biol. Lab., ULB, Belgium
 ) ) ) ) )	                  	 __
( ( ( ( ( 	|\  /|            	|__)
 ) ) ) ) )	| \/ |ariculture &	|__)iostatistics
( ( ( ( (
 ) ) ) ) )	e-mail: phgrosje at ulb.ac.be or phgrosjean at sciviews.org
( ( ( ( ( 	SciViews project coordinator (http://www.sciviews.org)
 ) ) ) ) )      tel: 00-32-2-650.29.70 (lab), 00-32-2-673.31.33 (home)
( ( ( ( (
 ) ) ) ) )      "I'm 100% confident that p is between 0 and 1"
( ( ( ( (                                  L. Gonick & W. Smith (1993)
 ) ) ) ) )
.......................................................................


-----Message d'origine-----
De : owner-r-help at stat.math.ethz.ch
[mailto:owner-r-help at stat.math.ethz.ch]De la part de Prof Brian Ripley
Envoye : jeudi 18 octobre 2001 04:25
A : Randall Skelton
Cc : r-help at stat.math.ethz.ch
Objet : Re: [R] General Matrix Inverse


On Wed, 17 Oct 2001, Randall Skelton wrote:

> What is the easiest (not the fastest) way to find the general inverse of a
> matrix in R?

If you mean the generalized inverse, ginv() in package MASS.  Otherwise,
pleae tell us what a `general inverse' is.


--
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Torsten.Hothorn at rzmail.uni-erlangen.de  Thu Oct 18 09:52:11 2001
From: Torsten.Hothorn at rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Thu, 18 Oct 2001 09:52:11 +0200 (MEST)
Subject: [R] General Matrix Inverse
In-Reply-To: <MABBLJDICACNFOLGIHJOCEHPCGAA.phgrosje@ulb.ac.be>
Message-ID: <Pine.LNX.4.21.0110180948250.13816-100000@artemis.imbe.med.uni-erlangen.de>



> I use solve(x) to find the inverse of a matrix (don't know what a "general
> inverse" is). By the way, what is better: solve(x), qr.solve(x) or ginv(x)?
> ginv(x) seems to give results for matrices where solve and qr.solve return
> an error:
> 
> > x <- matrix(1:9, 3, 3)
> > x
>      [,1] [,2] [,3]
> [1,]    1    4    7
> [2,]    2    5    8
> [3,]    3    6    9
> > solve(x)
> Error in solve.default(x) : singular matrix `x' in solve
> > qr.solve(x)
> Error in qr.solve(x) : singular matrix `x' in solve
> > ginv(x)
>            [,1]          [,2]       [,3]
> [1,] -0.6388889 -5.555556e-02  0.5277778
> [2,] -0.1666667  4.163336e-17  0.1666667
> [3,]  0.3055556  5.555556e-02 -0.1944444
> 

if A is singular, A^-1 is not defined but a generalized inverse G is,
namely

G is generalized inverse of A <=>

A G A = A  (sometimes G is written as A^-)

G is not unique, but adding 3 conditions

- G A G = G

- t(G A) = G A

- t(A G) = A G 

makes G unique (Moore-Penrose-Inverse)  

Torsten 


> Regards,
> 
> Philippe Grosjean
> 
> 
> ...........]<(({?<...............<?}))><...............................
>  ) ) ) ) )	 __               	 __
> ( ( ( ( ( 	|__)              	|  _
>  ) ) ) ) )	|   hilippe       	|__)rosjean
> ( ( ( ( ( 	Marine Biol. Lab., ULB, Belgium
>  ) ) ) ) )	                  	 __
> ( ( ( ( ( 	|\  /|            	|__)
>  ) ) ) ) )	| \/ |ariculture &	|__)iostatistics
> ( ( ( ( (
>  ) ) ) ) )	e-mail: phgrosje at ulb.ac.be or phgrosjean at sciviews.org
> ( ( ( ( ( 	SciViews project coordinator (http://www.sciviews.org)
>  ) ) ) ) )      tel: 00-32-2-650.29.70 (lab), 00-32-2-673.31.33 (home)
> ( ( ( ( (
>  ) ) ) ) )      "I'm 100% confident that p is between 0 and 1"
> ( ( ( ( (                                  L. Gonick & W. Smith (1993)
>  ) ) ) ) )
> .......................................................................
> 
> 
> -----Message d'origine-----
> De : owner-r-help at stat.math.ethz.ch
> [mailto:owner-r-help at stat.math.ethz.ch]De la part de Prof Brian Ripley
> Envoye : jeudi 18 octobre 2001 04:25
> A : Randall Skelton
> Cc : r-help at stat.math.ethz.ch
> Objet : Re: [R] General Matrix Inverse
> 
> 
> On Wed, 17 Oct 2001, Randall Skelton wrote:
> 
> > What is the easiest (not the fastest) way to find the general inverse of a
> > matrix in R?
> 
> If you mean the generalized inverse, ginv() in package MASS.  Otherwise,
> pleae tell us what a `general inverse' is.
> 
> 
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Thu Oct 18 10:32:38 2001
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Thu, 18 Oct 2001 08:32:38 +0000
Subject: [R] dev.print() in R for windows
Message-ID: <15310.37798.287517.770680@gargle.gargle.HOWL>

Both help(dev.print) and the "R for windows FAQ"
suggest that dev.print() with no arguments
should work also on Windows 
[Our students have to use Windows, I don't fortunately ...]


 > dev.print()
 Error in PS(file, old$paper, old$family, old$encoding, old$bg, old$fg,  : 
	 unable to start device PostScript
 In addition: Warning message: 
 printing via file = "" is not implemented in this version 
 >

One explanation of the problem is that  
    getOption("printcmd")
is NULL and frankly I wouldn't know what to put there (Win NT 4, or Win 2k).

Of course all this not a big problem, since at least in RGui, there's the
print button that probably everyone uses.
OTOH, it would be nice if  dev.print()  was portable and would work on all
platforms (as advertized).

Confirmations, suggestions, opinions ?

Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dubroca at cebc.cnrs.fr  Thu Oct 18 10:36:25 2001
From: dubroca at cebc.cnrs.fr (Laurent Dubroca)
Date: Thu, 18 Oct 2001 10:36:25 +0200
Subject: [R] Sgeostat module
Message-ID: <5.0.2.1.0.20011018102825.00a91540@pop.free.fr>

Dear Users,

I use Sgeostat to calculate co variogram (function est.variogram with two 
variables).
If i inverse the 2 variables in the functions, the co variogram change! 
Normaly it is symmetric, isn't it?
Someone could me explain why, or give me an idea to calculate co variogram 
in a easy way...

Thanks in advance

Laurent

ps : sorry for my english


Laurent William Dubroca
Centre de Calcul de Chiz?
CNRS UPR 1934
BP 14 - Villiers en Bois - 79360 Beauvoir sur Niort
France
Ph : +33-(0)549.099.603
Fax : +33-(0)549.096.526

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From alobo at ija.csic.es  Thu Oct 18 10:57:17 2001
From: alobo at ija.csic.es (Agustin Lobo)
Date: Thu, 18 Oct 2001 10:57:17 +0200 (MET DST)
Subject: [R] optimal windows R machine
In-Reply-To: <3BCE051E.B1AC7F2A@optushome.com.au>
Message-ID: <Pine.OSF.3.96.1011018105315.15130B-100000@ija.csic.es>

On Thu, 18 Oct 2001, Tim Churches wrote:

> Mark Myatt wrote:
> > 
> > Bob Porter <rjporter at mindspring.com> writes:
> > 
.../...
> 
> And why not set up you machine to at least dual boot into Linux as an
> alternative to Windows XP? 
> 
> Tim Churches

Another alternative is using VMware for switching between
Windows and Linux with no reboot. You can even have both the 
dual boot and the VMWare acces to Windows from within Linux.
See http://www.vmware.com/support/ws3/doc/ws30_disks4.html

Agus


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Oct 18 11:05:51 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 18 Oct 2001 10:05:51 +0100 (BST)
Subject: [R] dev.print() in R for windows
In-Reply-To: <15310.37798.287517.770680@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.31.0110181000550.14272-100000@gannet.stats>

On Thu, 18 Oct 2001, Martin Maechler wrote:

> Both help(dev.print) and the "R for windows FAQ"
> suggest that dev.print() with no arguments
> should work also on Windows

I think you are reading dev.print() to mean no arguments, whereas it is
conventionally used to denote the function.  ?dev.print needs to say `if
properly set up: see postscript'.  Probably dev.print should default to
win.printer on Windows, but that would be both a cross-platform- and
back-compatibility change.

> [Our students have to use Windows, I don't fortunately ...]
>
>
>  > dev.print()
>  Error in PS(file, old$paper, old$family, old$encoding, old$bg, old$fg,  :
> 	 unable to start device PostScript
>  In addition: Warning message:
>  printing via file = "" is not implemented in this version
>  >
>
> One explanation of the problem is that
>     getOption("printcmd")
> is NULL and frankly I wouldn't know what to put there (Win NT 4, or Win 2k).

See ?postscript on a Windows version of R.

> Of course all this not a big problem, since at least in RGui, there's the
> print button that probably everyone uses.
> OTOH, it would be nice if  dev.print()  was portable and would work on all
> platforms (as advertized).

Well, it does if you have a print spooler set, and that applies equally
under Unix.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dtrenkler at nts6.oec.uni-osnabrueck.de  Thu Oct 18 11:11:42 2001
From: dtrenkler at nts6.oec.uni-osnabrueck.de (Trenkler, Dietrich)
Date: Thu, 18 Oct 2001 11:11:42 +0200
Subject: AW: [R] General Matrix Inverse
Message-ID: <FB75CFC167F3D311B11D00A0CC20FB0E3734FF@nts7.oec.Uni-Osnabrueck.DE>

Thorsten is right. There is a direct formula for computing the Moore-Penrose
inverse
using the singular value composition of a matrix. This is incorporated in
the following:

mpinv <- function(A, eps = 1e-13) {
    s <- svd(A)
    e <- s$d
    e[e > eps] <- 1/e[e > eps]
    return(s$v %*% diag(e) %*% t(s$u))
}

Hope it helps.

Dietrich



****************************************************************************
*****
   Dr. Dietrich Trenkler        (dtrenkler at nts6.oec.uni-osnabrueck.de)      
   Statistik / Empirische Wirtschaftsforschung
   Universitaet Osnabrueck
   Rolandstrasse 8                                Phone: +49(0) 541-969-2753
   D-49069 Osnabrueck                          Fax  : +49(0) 541-969-2744
   GERMANY
****************************************************************************
*****





> -----Urspr?ngliche Nachricht-----
> Von:	Torsten Hothorn 
> Gesendet am:	Thursday, October 18, 2001 9:52 AM
> An:	Philippe Grosjean
> Cc:	r-help at stat.math.ethz.ch
> Betreff:	RE: [R] General Matrix Inverse
> 
> 
> 
> > I use solve(x) to find the inverse of a matrix (don't know what a
> "general
> > inverse" is). By the way, what is better: solve(x), qr.solve(x) or
> ginv(x)?
> > ginv(x) seems to give results for matrices where solve and qr.solve
> return
> > an error:
> > 
> > > x <- matrix(1:9, 3, 3)
> > > x
> >      [,1] [,2] [,3]
> > [1,]    1    4    7
> > [2,]    2    5    8
> > [3,]    3    6    9
> > > solve(x)
> > Error in solve.default(x) : singular matrix `x' in solve
> > > qr.solve(x)
> > Error in qr.solve(x) : singular matrix `x' in solve
> > > ginv(x)
> >            [,1]          [,2]       [,3]
> > [1,] -0.6388889 -5.555556e-02  0.5277778
> > [2,] -0.1666667  4.163336e-17  0.1666667
> > [3,]  0.3055556  5.555556e-02 -0.1944444
> > 
> 
> if A is singular, A^-1 is not defined but a generalized inverse G is,
> namely
> 
> G is generalized inverse of A <=>
> 
> A G A = A  (sometimes G is written as A^-)
> 
> G is not unique, but adding 3 conditions
> 
> - G A G = G
> 
> - t(G A) = G A
> 
> - t(A G) = A G 
> 
> makes G unique (Moore-Penrose-Inverse)  
> 
> Torsten 
> 
> 
> > Regards,
> > 
> > Philippe Grosjean
> > 
> > 
> > ...........]<(({?<...............<?}))><...............................
> >  ) ) ) ) )	 __               	 __
> > ( ( ( ( ( 	|__)              	|  _
> >  ) ) ) ) )	|   hilippe       	|__)rosjean
> > ( ( ( ( ( 	Marine Biol. Lab., ULB, Belgium
> >  ) ) ) ) )	                  	 __
> > ( ( ( ( ( 	|\  /|            	|__)
> >  ) ) ) ) )	| \/ |ariculture &	|__)iostatistics
> > ( ( ( ( (
> >  ) ) ) ) )	e-mail: phgrosje at ulb.ac.be or phgrosjean at sciviews.org
> > ( ( ( ( ( 	SciViews project coordinator (http://www.sciviews.org)
> >  ) ) ) ) )      tel: 00-32-2-650.29.70 (lab), 00-32-2-673.31.33 (home)
> > ( ( ( ( (
> >  ) ) ) ) )      "I'm 100% confident that p is between 0 and 1"
> > ( ( ( ( (                                  L. Gonick & W. Smith (1993)
> >  ) ) ) ) )
> > .......................................................................
> > 
> > 
> > -----Message d'origine-----
> > De : owner-r-help at stat.math.ethz.ch
> > [mailto:owner-r-help at stat.math.ethz.ch]De la part de Prof Brian Ripley
> > Envoye : jeudi 18 octobre 2001 04:25
> > A : Randall Skelton
> > Cc : r-help at stat.math.ethz.ch
> > Objet : Re: [R] General Matrix Inverse
> > 
> > 
> > On Wed, 17 Oct 2001, Randall Skelton wrote:
> > 
> > > What is the easiest (not the fastest) way to find the general inverse
> of a
> > > matrix in R?
> > 
> > If you mean the generalized inverse, ginv() in package MASS.  Otherwise,
> > pleae tell us what a `general inverse' is.
> > 
> > 
> > --
> > Brian D. Ripley,                  ripley at stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> > 
> >
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.
> > -.-
> > r-help mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> >
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _.
> > _._
> > 
> > 
> >
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-
> > r-help mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> >
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._
> > 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-
> r-help mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ligges at statistik.uni-dortmund.de  Thu Oct 18 11:09:32 2001
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 18 Oct 2001 11:09:32 +0200
Subject: [R] dev.print() in R for windows
References: <15310.37798.287517.770680@gargle.gargle.HOWL>
Message-ID: <3BCE9C4C.736E2203@statistik.uni-dortmund.de>

Martin Maechler wrote:
> 
> Both help(dev.print) and the "R for windows FAQ"
> suggest that dev.print() with no arguments
> should work also on Windows
> [Our students have to use Windows, I don't fortunately ...]
> 
>  > dev.print()
>  Error in PS(file, old$paper, old$family, old$encoding, old$bg, old$fg,  :
>          unable to start device PostScript
>  In addition: Warning message:
>  printing via file = "" is not implemented in this version
>  >
> 
> One explanation of the problem is that
>     getOption("printcmd")
> is NULL and frankly I wouldn't know what to put there (Win NT 4, or Win 2k).
> 
> Of course all this not a big problem, since at least in RGui, there's the
> print button that probably everyone uses.
> OTOH, it would be nice if  dev.print()  was portable and would work on all
> platforms (as advertized).
> 
> Confirmations, suggestions, opinions ?

win.print() opens the windows printing dialog.

Most R users probably have installed ghostscript and GhostView, but it
is not a standard under Windows. So porting the unix like printing to
Windows (via postscript) is tricky. Particularly the windows printer
driver system differs from unix and you cannot print a postscript file
without ghostscript (or similar software) on a non-postscript (or even
worse GDI) printer.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Oct 18 11:10:12 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 18 Oct 2001 10:10:12 +0100 (BST)
Subject: [R] optimal windows R machine
In-Reply-To: <Pine.OSF.3.96.1011018105315.15130B-100000@ija.csic.es>
Message-ID: <Pine.LNX.4.31.0110181006210.14272-100000@gannet.stats>

On Thu, 18 Oct 2001, Agustin Lobo wrote:

> On Thu, 18 Oct 2001, Tim Churches wrote:
>
> > Mark Myatt wrote:
> > >
> > > Bob Porter <rjporter at mindspring.com> writes:
> > >
> .../...
> >
> > And why not set up you machine to at least dual boot into Linux as an
> > alternative to Windows XP?
> >
> > Tim Churches
>
> Another alternative is using VMware for switching between
> Windows and Linux with no reboot. You can even have both the
> dual boot and the VMWare acces to Windows from within Linux.
> See http://www.vmware.com/support/ws3/doc/ws30_disks4.html

Have you tried that yourself?  You get a very slow Windows machine.
Win4lin is faster, but you only get a Windows 98 emulation.  Everyone I
know who has tried those routes has abandoned them, and either reboots or
has a second main box, one for each OS, and switches between them.

I reboot: it takes about a minute.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Oct 18 11:15:03 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 18 Oct 2001 10:15:03 +0100 (BST)
Subject: AW: [R] General Matrix Inverse
In-Reply-To: <FB75CFC167F3D311B11D00A0CC20FB0E3734FF@nts7.oec.Uni-Osnabrueck.DE>
Message-ID: <Pine.LNX.4.31.0110181010290.14272-100000@gannet.stats>

On Thu, 18 Oct 2001, Trenkler, Dietrich wrote:

> Thorsten is right. There is a direct formula for computing the Moore-Penrose
> inverse
> using the singular value composition of a matrix. This is incorporated in
> the following:
>
> mpinv <- function(A, eps = 1e-13) {
>     s <- svd(A)
>     e <- s$d
>     e[e > eps] <- 1/e[e > eps]
>     return(s$v %*% diag(e) %*% t(s$u))
> }
>
> Hope it helps.

That's what ginv in library MASS already does, except that it uses a
relative tolerance (yours will fail for a matrix of the order of
10^(-20)), handles the complex case, the rank 1 case, .... In short, it
has been proven over a decade.  It's by the other author of MASS, BTW.

>
> > -----Ursprngliche Nachricht-----
> > Von:	Torsten Hothorn
> > Gesendet am:	Thursday, October 18, 2001 9:52 AM
> > An:	Philippe Grosjean
> > Cc:	r-help at stat.math.ethz.ch
> > Betreff:	RE: [R] General Matrix Inverse
> >
> >
> >
> > > I use solve(x) to find the inverse of a matrix (don't know what a
> > "general
> > > inverse" is). By the way, what is better: solve(x), qr.solve(x) or
> > ginv(x)?
> > > ginv(x) seems to give results for matrices where solve and qr.solve
> > return
> > > an error:
> > >
> > > > x <- matrix(1:9, 3, 3)
> > > > x
> > >      [,1] [,2] [,3]
> > > [1,]    1    4    7
> > > [2,]    2    5    8
> > > [3,]    3    6    9
> > > > solve(x)
> > > Error in solve.default(x) : singular matrix `x' in solve
> > > > qr.solve(x)
> > > Error in qr.solve(x) : singular matrix `x' in solve
> > > > ginv(x)
> > >            [,1]          [,2]       [,3]
> > > [1,] -0.6388889 -5.555556e-02  0.5277778
> > > [2,] -0.1666667  4.163336e-17  0.1666667
> > > [3,]  0.3055556  5.555556e-02 -0.1944444
> > >
> >
> > if A is singular, A^-1 is not defined but a generalized inverse G is,
> > namely
> >
> > G is generalized inverse of A <=>
> >
> > A G A = A  (sometimes G is written as A^-)
> >
> > G is not unique, but adding 3 conditions
> >
> > - G A G = G
> >
> > - t(G A) = G A
> >
> > - t(A G) = A G
> >
> > makes G unique (Moore-Penrose-Inverse)
> >
> > Torsten
> >
> >
> > > Regards,
> > >
> > > Philippe Grosjean
> > >
> > >
> > > ...........]<(({?<...............<?}))><...............................
> > >  ) ) ) ) )	 __               	 __
> > > ( ( ( ( ( 	|__)              	|  _
> > >  ) ) ) ) )	|   hilippe       	|__)rosjean
> > > ( ( ( ( ( 	Marine Biol. Lab., ULB, Belgium
> > >  ) ) ) ) )	                  	 __
> > > ( ( ( ( ( 	|\  /|            	|__)
> > >  ) ) ) ) )	| \/ |ariculture &	|__)iostatistics
> > > ( ( ( ( (
> > >  ) ) ) ) )	e-mail: phgrosje at ulb.ac.be or phgrosjean at sciviews.org
> > > ( ( ( ( ( 	SciViews project coordinator (http://www.sciviews.org)
> > >  ) ) ) ) )      tel: 00-32-2-650.29.70 (lab), 00-32-2-673.31.33 (home)
> > > ( ( ( ( (
> > >  ) ) ) ) )      "I'm 100% confident that p is between 0 and 1"
> > > ( ( ( ( (                                  L. Gonick & W. Smith (1993)
> > >  ) ) ) ) )
> > > .......................................................................
> > >
> > >
> > > -----Message d'origine-----
> > > De : owner-r-help at stat.math.ethz.ch
> > > [mailto:owner-r-help at stat.math.ethz.ch]De la part de Prof Brian Ripley
> > > Envoye : jeudi 18 octobre 2001 04:25
> > > A : Randall Skelton
> > > Cc : r-help at stat.math.ethz.ch
> > > Objet : Re: [R] General Matrix Inverse
> > >
> > >
> > > On Wed, 17 Oct 2001, Randall Skelton wrote:
> > >
> > > > What is the easiest (not the fastest) way to find the general inverse
> > of a
> > > > matrix in R?
> > >
> > > If you mean the generalized inverse, ginv() in package MASS.  Otherwise,
> > > pleae tell us what a `general inverse' is.
> > >
> > >
> > > --
> > > Brian D. Ripley,                  ripley at stats.ox.ac.uk
> > > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > > University of Oxford,             Tel:  +44 1865 272861 (self)
> > > 1 South Parks Road,                     +44 1865 272860 (secr)
> > > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> > >
> > >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.
> > > -.-
> > > r-help mailing list -- Read
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> > >
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _.
> > > _._
> > >
> > >
> > >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-.-
> > > r-help mailing list -- Read
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> > >
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._._
> > >
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-.-
> > r-help mailing list -- Read
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._._
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From alobo at ija.csic.es  Thu Oct 18 11:36:39 2001
From: alobo at ija.csic.es (Agustin Lobo)
Date: Thu, 18 Oct 2001 11:36:39 +0200 (MET DST)
Subject: [R] optimal windows R machine
In-Reply-To: <Pine.LNX.4.31.0110181006210.14272-100000@gannet.stats>
Message-ID: <Pine.OSF.3.96.1011018112040.15130C-100000@ija.csic.es>


On Thu, 18 Oct 2001, Prof Brian Ripley wrote:

> On Thu, 18 Oct 2001, Agustin Lobo wrote:
> 
> > On Thu, 18 Oct 2001, Tim Churches wrote:
> >
> > > Mark Myatt wrote:
> > > >
> > > > Bob Porter <rjporter at mindspring.com> writes:
> > > >
> > .../...
> > >
> > > And why not set up you machine to at least dual boot into Linux as an
> > > alternative to Windows XP?
> > >
> > > Tim Churches
> >
> > Another alternative is using VMware for switching between
> > Windows and Linux with no reboot. You can even have both the
> > dual boot and the VMWare acces to Windows from within Linux.
> > See http://www.vmware.com/support/ws3/doc/ws30_disks4.html
> 
> Have you tried that yourself?  You get a very slow Windows machine.

I've tried the simple VMWare installation. I agree, it's slow
in particular for R. But it's a working solution
for other applications (i.e., Word) in case you use R from Linux
but need eventual access to Windows. The minimum RAM requirement is 128 Mb
> 
> I reboot: it takes about a minute.

That's the point. In the www page that I mention you find directions
for using the same Windows installation for both rebooting (if you
need to run an application with a high requirement of resources) and
for accessing Windows from within Linux (if you just need to read
one of those  Word documents that are not correctely imported by
StartOffice, Applix,AbbiWord...). I've not tried this solution yet,
but I'll do it as soon as I get a new machine (soon, I hope). 

Agus


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mark at myatt.demon.co.uk  Thu Oct 18 11:26:35 2001
From: mark at myatt.demon.co.uk (Mark Myatt)
Date: Thu, 18 Oct 2001 10:26:35 +0100
Subject: [R] Updated tutorial (R and epidemiological data)
In-Reply-To: <200107100238.MAA01480@leonard.anu.edu.au>
References: <200107100238.MAA01480@leonard.anu.edu.au>
Message-ID: <qG0CZHALBqz7EwIw@myatt.demon.co.uk>


All,

Just a note to say that I have updated my "R Notes" adding a couple of
sections on working with R's charting functions and writing custom
charting functions. Examples include Bland & Altman plots, two variable
plots, pyramid plots, and Pareto charts.

Text is GNU/FDL and is in .RTF and .PDF formats. Sample datasets are
included. Get a copy from:

        http://www.myatt.demon.co.uk

I would be grateful is someone would find the time to try out the new
material and let me know if there are any problems with it.

Best wishes,

Mark


--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From petr.pikal at precheza.cz  Thu Oct 18 11:40:07 2001
From: petr.pikal at precheza.cz (Petr Pikal)
Date: Thu, 18 Oct 2001 11:40:07 +0200
Subject: [R] tapply problem
In-Reply-To: <200110180321.f9I3Lwg06098@r.hankin.sems.auckland.ac.nz>
Message-ID: <3BCEBF97.29423.3FB7EE@localhost>

On 18 Oct 2001 at 16:21, Robin Hankin wrote:

> Hello everybody.
> 
> I have a question that has stumped me and the usual "apply" 
tricks
> don't seem to work.  I run a course where each student's 
performance
> is marked by one or more assessors. 
> 
> I have a data frame containing students' names, assessors' names 
and
> their marks, arranged as follows:
> 
> 
>         ID       student   assessor  Q1A  Q1B  Q1C  Q2A  Q2B  
Q3
> 1  2152833    Fred.Smith      Robin 15.0 17.0 13.0 14.0 13.0  
8.0 2 
> 2152833    Fred.Smith      Steph 14.0 13.0 11.0 16.0 13.0  8.0 3 
> 2152833    Fred.Smith      Julie 15.0 17.0 13.0 17.0 13.0  8.0 4 
> 9821091    Joe.Bloggs       John 13.0 12.0 12.0 15.0 12.0  8.0 5 
> 9821091    Joe.Bloggs      Julie   NA   NA   NA 18.0 14.0  8.0 6 
> 9821091    Joe.Bloggs      Robin 12.0 12.5   NA 16.0 13.5  8.0 
7 
> 9821091    Joe.Bloggs      Steph   NA   NA 12.0 17.0 12.5  NA 
8 
> 9791734     Bob.Jones      Julie 13.0 12.0  8.0 16.0 13.0  8.0 9 
> 9791734     Bob.Jones      Robin 11.0 12.0  7.0 14.0 11.0  8.0 ...
> 
> 
> note that some students are marked by more assessors than 
others.
> 
> 
> What I want is each student's mean mark for each question, 
averaged
> over the appropriate assessors.  Is there a neat vectorized 
method I
> could use?
> 
If I understood it correctly you need something like that:

        ID student assessor Q1A  Q1B Q1C Q2A  Q2B Q3
1  2152833    Fred    Robin  15 17.0  13  14 13.0  8
2  2152833    Fred    Steph  14 13.0  11  16 13.0  8
3  2152833    Fred    Julie  15 17.0  13  17 13.0  8
4  9821091     Joe     John  13 12.0  12  15 12.0  8
5  9821091     Joe    Julie  NA   NA  NA  18 14.0  8
6  9821091     Joe    Robin  12 12.5  NA  16 13.5  8
7  9821091     Joe    Steph  NA   NA  12  17 12.5 NA
8  9791734     Bob    Julie  13 12.0   8  16 13.0  8
9  9791734     Bob    Robin  11 12.0   7  14 11.0  8
***10 9821091     Joe     John  14 15.0  14  15 11.0  9***

I added one line because each student was marked by the assessor 
only once in your example...

> aggregate(ppp[,4:9],list(ppp$student,ppp$assessor),mean)

  Group.1 Group.2  Q1A  Q1B Q1C Q2A  Q2B  Q3
***1     Joe    John 13.5 13.5  13  15 11.5 8.5***
2     Bob   Julie 13.0 12.0   8  16 13.0 8.0
3    Fred   Julie 15.0 17.0  13  17 13.0 8.0
4     Joe   Julie   NA   NA  NA  18 14.0 8.0
5     Bob   Robin 11.0 12.0   7  14 11.0 8.0
6    Fred   Robin 15.0 17.0  13  14 13.0 8.0
7     Joe   Robin 12.0 12.5  NA  16 13.5 8.0
8    Fred   Steph 14.0 13.0  11  16 13.0 8.0
9     Joe   Steph   NA   NA  12  17 12.5  NA



> The best I can come up with is 
"tapply(x$Q1A,x$name,mean,na.rm=T)" but
> this works question-by-question and I would like a reduced data 
frame
> with the same column headings.
> 
> 
> this is driving me crazy; thanks in advance!
> 
> 
> 
> -- 
> 
> Robin Hankin, Lecturer,
> School of Environmental and Marine Science
> Private Bag 92019 Auckland
> New Zealand
> 
> r.hankin at auckland.ac.nz
> tel 0064-9-373-7599 x6820; FAX 0064-9-373-7042
> 
> 
> 
> --f9295XO03655.1002013533/r.hankin.sems.auckland.ac.nz--
> 
> 
> 
> -- 
> 
> Robin Hankin, Lecturer,
> School of Environmental and Marine Science
> Private Bag 92019 Auckland
> New Zealand
> 
> r.hankin at auckland.ac.nz
> tel 0064-9-373-7599 x6820; FAX 0064-9-373-7042
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.- r-help mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html Send "info", 
"help",
> or "[un]subscribe" (in the "body", not the subject !)  To:
> r-help-request at stat.math.ethz.ch
> 
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
.
> _._._._._

Petr Pikal
petr.pikal at precheza.cz
p.pik at volny.cz


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gco at eortc.be  Thu Oct 18 13:46:38 2001
From: gco at eortc.be (Gary Collins)
Date: Thu, 18 Oct 2001 13:46:38 +0200
Subject: [R] eval and as.symbol question
Message-ID: <01aa01c157ca$8be908c0$c90809c1@EORTC.BE>

Dear all,
Can anyone help with the following problem...

if c1,...,c5 were objects and I wanted to simply count the number of missing items I can simply do

example1 <- function ()
{
        xx_vector(length=5))
        for(i in 1:5){
                xx[i]_sum(is.na(eval(as.symbol(paste("c", i, sep="")))==TRUE))
      }
      xx
}
This prodcues the correct results...
But when I merge these into a dataframe with colnames(df)<- c("c1","c2","c3","c4","c5"), so that
> df
  c1 c2 c3 c4 c5
1  1  1 NA NA NA
2  2  2 NA NA NA
3  3  3 NA NA NA
4 NA NA NA  1  1
5  2  2  2  2  2
6  2  2  2  2  2
7 NA  3  3 NA  2

and try the next "logical" step from above....

example2 <- function (x) 
{
        xx_matrix(ncol=1, nrow=5)
        for(i in 1:5){
                xx[i] <- sum(is.na(eval(as.symbol(paste("x$c", i, sep="")))==TRUE))
      }
      xx
}
> count.missing(x)
Error in eval(expr, envir, enclos) : Object "x$c1" not found

Any suggestions...? The counting missing data was merely an example, I want to try and understand this process so as to implement the idea into another function I am writing dealing with dataframes.
Thanks
Gary.
__________________________________________________
Dr. Gary S. Collins,
Statistics Research Fellow,
Quality of Life Unit, 
European Organisation for Research and Treatment of Cancer, 
EORTC Data Center, 
Avenue E. Mounier 83, bte. 11,
B-1200 Brussels, Belgium.

Tel: +32 2 774 1 606
Fax: +32 2 779 4 568
http://www.eortc.be/home/qol/
__________________________________________________


-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20011018/ba09cd0d/attachment.html

From Gerard.Keogh at cso.ie  Thu Oct 18 13:45:35 2001
From: Gerard.Keogh at cso.ie (Gerard.Keogh@cso.ie)
Date: Thu, 18 Oct 2001 12:45:35 +0100
Subject: [R] General Matrix Inverse
Message-ID: <OF00CE37CF.9FFA2088-ON80256AE9.003FF063@cso.ie>


Generalised Inverse:

The Moore-Penrose Generalisied Inverse is probably better defined as a
pseudo-Inverse that arises in solving least squares problems.
Another well known pseudo-Inverse is the so-called Drazin pseudo-Inverse.
If memory serves (and it's been 10-12 years!) it can be obtained via a
diagonalisation.

Anyway, I dare say Prof. Ripley (among others) probably has "all the
low-down" on this stuff.

Gerard





                                                                                                                                 
                    Torsten Hothorn                                                                                              
                    <Torsten.Hothorn at rzmail.uni-er        To:     Philippe Grosjean <phgrosje at ulb.ac.be>                         
                    langen.de>                            cc:     r-help at stat.math.ethz.ch                                       
                    Sent by:                              Subject:     RE: [R] General Matrix Inverse                            
                    owner-r-help at stat.math.ethz.ch                                                                               
                                                                                                                                 
                                                                                                                                 
                    18/10/01 08:52                                                                                               
                                                                                                                                 
                                                                                                                                 






> I use solve(x) to find the inverse of a matrix (don't know what a
"general
> inverse" is). By the way, what is better: solve(x), qr.solve(x) or
ginv(x)?
> ginv(x) seems to give results for matrices where solve and qr.solve
return
> an error:
>
> > x <- matrix(1:9, 3, 3)
> > x
>      [,1] [,2] [,3]
> [1,]    1    4    7
> [2,]    2    5    8
> [3,]    3    6    9
> > solve(x)
> Error in solve.default(x) : singular matrix `x' in solve
> > qr.solve(x)
> Error in qr.solve(x) : singular matrix `x' in solve
> > ginv(x)
>            [,1]          [,2]       [,3]
> [1,] -0.6388889 -5.555556e-02  0.5277778
> [2,] -0.1666667  4.163336e-17  0.1666667
> [3,]  0.3055556  5.555556e-02 -0.1944444
>

if A is singular, A^-1 is not defined but a generalized inverse G is,
namely

G is generalized inverse of A <=>

A G A = A  (sometimes G is written as A^-)

G is not unique, but adding 3 conditions

- G A G = G

- t(G A) = G A

- t(A G) = A G

makes G unique (Moore-Penrose-Inverse)

Torsten


> Regards,
>
> Philippe Grosjean
>
>
> ...........]<(({?<...............<?}))><...............................
>  ) ) ) ) )          __                        __
> ( ( ( ( (          |__)                      |  _
>  ) ) ) ) )         |   hilippe               |__)rosjean
> ( ( ( ( (          Marine Biol. Lab., ULB, Belgium
>  ) ) ) ) )                                    __
> ( ( ( ( (          |\  /|                    |__)
>  ) ) ) ) )         | \/ |ariculture &        |__)iostatistics
> ( ( ( ( (
>  ) ) ) ) )         e-mail: phgrosje at ulb.ac.be or phgrosjean at sciviews.org
> ( ( ( ( (          SciViews project coordinator (http://www.sciviews.org)
>  ) ) ) ) )      tel: 00-32-2-650.29.70 (lab), 00-32-2-673.31.33 (home)
> ( ( ( ( (
>  ) ) ) ) )      "I'm 100% confident that p is between 0 and 1"
> ( ( ( ( (                                  L. Gonick & W. Smith (1993)
>  ) ) ) ) )
> .......................................................................
>
>
> -----Message d'origine-----
> De : owner-r-help at stat.math.ethz.ch
> [mailto:owner-r-help at stat.math.ethz.ch]De la part de Prof Brian Ripley
> Envoye : jeudi 18 octobre 2001 04:25
> A : Randall Skelton
> Cc : r-help at stat.math.ethz.ch
> Objet : Re: [R] General Matrix Inverse
>
>
> On Wed, 17 Oct 2001, Randall Skelton wrote:
>
> > What is the easiest (not the fastest) way to find the general inverse
of a
> > matrix in R?
>
> If you mean the generalized inverse, ginv() in package MASS.  Otherwise,
> pleae tell us what a `general inverse' is.
>
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.
> -.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._.
> _._
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._._




The information in this email, and any attachments transmitted with it, are confidential 
and are for the intended recipient only. If you receive this message in error, please 
notify us via postmaster at cso.ie.

To see the latest figures from the CSO go to http://www.cso.ie
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pflugshaupt at geobot.umnw.ethz.ch  Thu Oct 18 14:19:48 2001
From: pflugshaupt at geobot.umnw.ethz.ch (Kaspar Pflugshaupt)
Date: Thu, 18 Oct 2001 14:19:48 +0200
Subject: [R] eval and as.symbol question
In-Reply-To: <01aa01c157ca$8be908c0$c90809c1@EORTC.BE>
Message-ID: <B7F49584.BB08%pflugshaupt@geobot.umnw.ethz.ch>

On 18.10.2001 13:46 Uhr, Gary Collins wrote:

> But when I merge these into a dataframe with colnames(df)<-
> c("c1","c2","c3","c4","c5"), so that
>> df
> c1 c2 c3 c4 c5
> 1  1  1 NA NA NA
> 2  2  2 NA NA NA
> 3  3  3 NA NA NA
> 4 NA NA NA  1  1
> 5  2  2  2  2  2
> 6  2  2  2  2  2
> 7 NA  3  3 NA  2
> 
> and try the next "logical" step from above....
> 

You might try something like this instead:

apply(df, 2, function(x) sum(is.na(x)))



Hope this helps

Kaspar


-- 

Kaspar Pflugshaupt
Geobotanisches Institut
Zuerichbergstr. 38
CH-8044 Zuerich

Tel. ++41 1 632 43 19
Fax  ++41 1 632 12 15

mailto:pflugshaupt at geobot.umnw.ethz.ch
privat:pflugshaupt at mails.ch
http://www.geobot.umnw.ethz.ch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gco at eortc.be  Thu Oct 18 14:32:39 2001
From: gco at eortc.be (Gary Collins)
Date: Thu, 18 Oct 2001 14:32:39 +0200
Subject: Fw: [R] eval and as.symbol question
Message-ID: <01c201c157d0$f9a77580$c90809c1@EORTC.BE>

----- Original Message -----
From: "Kaspar Pflugshaupt" <pflugshaupt at geobot.umnw.ethz.ch>
To: "Gary Collins" <gco at eortc.be>
Cc: "r-help" <r-help at stat.math.ethz.ch>
Sent: Thursday, October 18, 2001 2:19 PM
Subject: Re: [R] eval and as.symbol question


> On 18.10.2001 13:46 Uhr, Gary Collins wrote:
>
> > But when I merge these into a dataframe with colnames(df)<-
> > c("c1","c2","c3","c4","c5"), so that
> >> df
> > c1 c2 c3 c4 c5
> > 1  1  1 NA NA NA
> > 2  2  2 NA NA NA
> > 3  3  3 NA NA NA
> > 4 NA NA NA  1  1
> > 5  2  2  2  2  2
> > 6  2  2  2  2  2
> > 7 NA  3  3 NA  2
> >
> > and try the next "logical" step from above....
> >
>
> You might try something like this instead:
>
> apply(df, 2, function(x) sum(is.na(x)))
>
>
>
> Hope this helps
>
> Kaspar

I want to avoid this. I know how the apply function works. The counting
missing items was merely an example, there are a number of ways to solve
that particular problem. My question is how to use as.symbol, eval and paste
to get the required result as I will use very similar steps.

Thanks
Gary
__________________________________________________
Dr. Gary S. Collins,
Statistics Research Fellow,
Quality of Life Unit,
European Organisation for Research and Treatment of Cancer,
EORTC Data Center,
Avenue E. Mounier 83, bte. 11,
B-1200 Brussels, Belgium.

Tel: +32 2 774 1 606
Fax: +32 2 779 4 568
http://www.eortc.be/home/qol/
__________________________________________________


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jniesch at gwdg.de  Thu Oct 18 14:30:12 2001
From: jniesch at gwdg.de (Jens Nieschulze)
Date: Thu, 18 Oct 2001 14:30:12 +0200 (MET DST)
Subject: [R] Sgeostat module
In-Reply-To: <5.0.2.1.0.20011018102825.00a91540@pop.free.fr>
Message-ID: <Pine.SO4.4.10.10110181422120.7913-100000@ufobi7.uni-forst.gwdg.de>

On Thu, 18 Oct 2001, Laurent Dubroca wrote:

> Dear Users,
> 
> I use Sgeostat to calculate co variogram (function est.variogram with two 
> variables).
> If i inverse the 2 variables in the functions, the co variogram change! 
> Normaly it is symmetric, isn't it?
not necessarily
have a look at "lag effects" 
supposedly described in Journal & Huijbregts, 1978, p.41
or in Goovaerts: Geostatistics for Natural Resources Evaluation, p.49

> Someone could me explain why, or give me an idea to calculate co variogram 
> in a easy way...
have you looked at GSLIB or GSTAT?

	J
> 
> Thanks in advance
> 
> Laurent
> 
> ps : sorry for my english
> 
> 
> Laurent William Dubroca
> Centre de Calcul de Chiz
> CNRS UPR 1934
> BP 14 - Villiers en Bois - 79360 Beauvoir sur Niort
> France
> Ph : +33-(0)549.099.603
> Fax : +33-(0)549.096.526
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

***********************************************************************
Jens Nieschulze

Institute for Forest Biometrics &	Phone: ++49-551-39-12107
Applied Computer Science		Fax  : ++49-551-39-3465
Buesgenweg 4
37077 Goettingen		E-mail: jniesch at uni-forst.gwdg.de
GERMANY				http://www.uni-forst.gwdg.de/~jniesch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Oct 18 14:52:34 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Oct 2001 14:52:34 +0200
Subject: Fw: [R] eval and as.symbol question
In-Reply-To: <01c201c157d0$f9a77580$c90809c1@EORTC.BE>
References: <01c201c157d0$f9a77580$c90809c1@EORTC.BE>
Message-ID: <x21yk1f6ul.fsf@blueberry.kubism.ku.dk>

"Gary Collins" <gco at eortc.be> writes:


> >
> > You might try something like this instead:
> >
> > apply(df, 2, function(x) sum(is.na(x)))
> >
> >
> >
> > Hope this helps
> >
> > Kaspar
> 
> I want to avoid this. I know how the apply function works. The counting
> missing items was merely an example, there are a number of ways to solve
> that particular problem. My question is how to use as.symbol, eval and paste
> to get the required result as I will use very similar steps.

You should probably reconsider the hint from Kaspar that you might
want a more structured solution. Manipulation of code via text strings
is usually not The Right Way of doing things. 

However, if you must, you need to notice that as.symbol creates a
symbol from *any* textstring

> "]{" <- 5
> eval(as.symbol( "]{"))
[1] 5

However a$b is usually not a single symbol but three, an indexing
expression consisting of a, $, and b. If you want to get that from a
text string you need parse("a$b").

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From patrick.lindsey at luc.ac.be  Thu Oct 18 14:57:19 2001
From: patrick.lindsey at luc.ac.be (Patrick Lindsey)
Date: Thu, 18 Oct 2001 14:57:19 +0200 (MET DST)
Subject: [R] Problem compiling R1.3.1 on an Alpha after upgrading the readline and ncurses libraries.
Message-ID: <200110181257.OAA17030@luc.ac.be>

Hi everyone,
  I have just installed new version of ncurses (5.2) and readline (4.2) on
the Alpha I use. I tried compiling R from scratch (ie. I moved the version
I had to another place and uncompressed R 1.3.1 again, then ran the configure
script and make). Unfortunately, I get the following error message when it
tries to make R.bin. Did I do something wrong when I updated these libraries?
Should I install other versions of these?
 Here is the error I get:

g77 -mieee  -g -O2 -c xxxpr.f -o xxxpr.o
gcc   -o R.bin  CConverters.o Rdynload.o RNG.o apply.o arithmetic.o array.o attrib.o bind.o builtin.o character.o coerce.o colors.o complex.o connections.o context.o cov.o cum.o dcf.o datetime.o debug.o devPS.o devPicTeX.o deparse.o deriv.o devices.o dotcode.o dstruct.o duplicate.o envir.o errors.o eval.o format.o fourier.o gram.o gram-ex.o graphics.o internet.o iosupport.o lapack.o list.o logic.o main.o match.o memory.o model.o names.o objects.o optim.o optimize.o options.o par.o paste.o platform.o plot.o plot3d.o plotmath.o print.o printarray.o printvector.o printutils.o random.o regex.o relop.o saveload.o scan.o seq.o size.o sort.o source.o split.o subassign.o subscript.o subset.o summary.o unique.o util.o version.o vfonts.o xxxpr.o ../unix/libunix.a ../appl/libappl.a ../nmath/libnmath.a   -lg2c -lm -L/usr/local/lib/gcc-lib/alphaev6-dec-osf4.0f/2.95.2 -L/usr/lib/cmplrs/cc -L/usr/local/lib -lm  -L/home/lucg5606/Local/lib  -lz -lreadline -lncurses -lm
/bin/ld:
Unresolved:
rl_callback_handler_remove
rl_callback_handler_install
rl_callback_read_char
clear_history
collect2: ld returned 1 exit status
make[3]: *** [R.bin] Error 1

Here are the details of my system:

platform alphaev6-dec-osf4.0f
arch     alphaev6            
os       osf4.0f             
system   alphaev6, osf4.0f   
status                       
major    1                   
minor    3.1                 
year     2001                
month    08                  
day      31                  
language R                   

I must also say that I compiled myself the ncurses and readline libraries...
perhaps have I done something wrong there... Does anyone know where I can find
precompiled version of these libraries for my system?
Thanks,
Patrick.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andy_liaw at merck.com  Thu Oct 18 15:16:10 2001
From: andy_liaw at merck.com (Liaw, Andy)
Date: Thu, 18 Oct 2001 09:16:10 -0400
Subject: [R] optimal windows R machine
Message-ID: <51F9C42DA15CD311BD220008C707D81903DC8300@usrymx10.merck.com>

We did try VMware on one of our Linux boxes (dual P3 866 Xeon with 2GB
RDRAM).  It was unbearably slow!

Cheers,
Andy


> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
> Sent: Thursday, October 18, 2001 5:10 AM
> To: Agustin Lobo
> Cc: R-help at stat.math.ethz.ch
> Subject: Re: [R] optimal windows R machine
> 
> On Thu, 18 Oct 2001, Agustin Lobo wrote:
> >
> > Another alternative is using VMware for switching between
> > Windows and Linux with no reboot. You can even have both the
> > dual boot and the VMWare acces to Windows from within Linux.
> > See http://www.vmware.com/support/ws3/doc/ws30_disks4.html
> 
> Have you tried that yourself?  You get a very slow Windows machine.
> Win4lin is faster, but you only get a Windows 98 emulation.  
> Everyone I
> know who has tried those routes has abandoned them, and 
> either reboots or
> has a second main box, one for each OS, and switches between them.
> 
> I reboot: it takes about a minute.
> 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rossini at blindglobe.net  Thu Oct 18 15:31:52 2001
From: rossini at blindglobe.net (A.J. Rossini)
Date: 18 Oct 2001 06:31:52 -0700
Subject: [R] optimal windows R machine
In-Reply-To: <51F9C42DA15CD311BD220008C707D81903DC8300@usrymx10.merck.com>
References: <51F9C42DA15CD311BD220008C707D81903DC8300@usrymx10.merck.com>
Message-ID: <87itdd9irb.fsf@jeeves.blindglobe.net>

>>>>> "AL" == Andy Liaw <Liaw> writes:

    AL> We did try VMware on one of our Linux boxes (dual P3 866 Xeon
    AL> with 2GB RDRAM).  It was unbearably slow!


(and others have responded similarly).

I think it depends on what you need.  It was fine for me, using MS
Word and MS Powerpoint, as well as for running (not developing) Java
GUI-based applications (which have not tended to be that fast on
Unix, unlike say non-GUI apps).

Of course, now that I've got someone else to support Windows Terminal
Server at both my places of work, it's a non-issue (using rdesktop to
point to whichever Terminal Server contains the files that I need to
work on...).

In addition, I do admit to being semi-incompetent at both MS
packages, mostly due to a severe case of Emacs finger bindings as well
as personal bias...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini at u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini at scharp.org
-------- (fridays are probably at Rosen) --------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   T-Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From plummer at iarc.fr  Thu Oct 18 16:32:02 2001
From: plummer at iarc.fr (Martyn Plummer)
Date: Thu, 18 Oct 2001 16:32:02 +0200 (CEST)
Subject: [R] optimal windows R machine
In-Reply-To: <87itdd9irb.fsf@jeeves.blindglobe.net>
Message-ID: <XFMail.20011018163202.plummer@iarc.fr>

On 18-Oct-2001 A.J. Rossini wrote:
>>>>>> "AL" == Andy Liaw <Liaw> writes:
> 
>     AL> We did try VMware on one of our Linux boxes (dual P3 866 Xeon
>     AL> with 2GB RDRAM).  It was unbearably slow!
> 
> 
> (and others have responded similarly).
> 
> I think it depends on what you need.  It was fine for me, using MS
> Word and MS Powerpoint, as well as for running (not developing) Java
> GUI-based applications (which have not tended to be that fast on
> Unix, unlike say non-GUI apps).

I use VMWare for three applications
- MS Office         (The only way to get 100% MS Office compatibility )
- WinBUGS           (Doesn't run on unix)
- Internet Explorer (Some sites won't work with other browsers)

I must say I'm quite satisfied with it for these purposes.  My impression
is that number crunching (i.e. running WinBUGS) is almost as fast as
under native windows; disk access is terribly slow (perhaps due to
running one file system on top of another), and the user interface can
often appear slow due to the lack of accelerated graphics.  I could
be deluding myself though, as I can't quote you numbers.

On the plus side, suspending the guest OS (NT in my case) to disk and
restoring it is much faster than rebooting.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Torsten.Hothorn at rzmail.uni-erlangen.de  Thu Oct 18 16:24:54 2001
From: Torsten.Hothorn at rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Thu, 18 Oct 2001 16:24:54 +0200 (MEST)
Subject: [R] vectors / matrices
Message-ID: <Pine.LNX.4.21.0110181620460.14941-100000@artemis.imbe.med.uni-erlangen.de>


Hi, 

a friend of mine came across this

R> x <- 1:5
R> cbind(x,x)
     x x
[1,] 1 1
[2,] 2 2
[3,] 3 3
[4,] 4 4
[5,] 5 5
R> rbind(x,x)
  [,1] [,2] [,3] [,4] [,5]
x    1    2    3    4    5
x    1    2    3    4    5


x is a vector and therefore has no dim-attribute. Obviously cbind treats x
as a col-vector but rbind treats x as a row-vector, that is: two
functions have a different view on x. I'm sure there is a
good reason for this but I could not find it ...

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From petr.pikal at precheza.cz  Thu Oct 18 17:21:22 2001
From: petr.pikal at precheza.cz (Petr Pikal)
Date: Thu, 18 Oct 2001 17:21:22 +0200
Subject: [R] Error term in aov syntax question
Message-ID: <3BCF0F92.9453.1782486@localhost>

Hallo all

I went through all files and through some books I have, but still I am not 
completely sure about the correct aov syntax.

Suppose I have a dataset divided to three portions, according to a factor "mereni" 
which is a measurement day. There is another factor named "frakce" (Each 
sample is divided into three distinct fractions according to its particle size). 

samp	frakce	h	mereni
62	0	21.35	1
66	0	21.41	1
70	0	21.42	1
66	0.25	20.93	1
62	1	20.91	1
66	1	21.29	1
70	1	21.22	1
26	0	20.79	2
34	0	20.20	2
26	0.25	20.30	2
37	0.25	20.07	2
71	0.25	21.20	2
26	1	20.73	2
34	1	20.20	2
39	1	19.87	2
49	0	20.01	3
49	0.25	20.05	3
59	0.25	19.78	3
49	1	20.01	3
54	1	20.45	3

The samples are actually taken from one process and the hypotheses to be tested 
are:

**Are all samples same?
It seems that within each measurement they are all the same but:

> summary(aov(h[mereni==3]~vzor[mereni==3]))


                  Df   Sum Sq  Mean Sq F value   Pr(>F)   
vzor[mereni == 3]  2 0.234296 0.117148  224.58 0.004433 **
Residuals          2 0.001043 0.000522                    
---
Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1 
 

**Does a measurement day influence the response ("ce","h"),?
It seems that yes.

> summary(aov(h~mereni))


            Df Sum Sq Mean Sq F value    Pr(>F)    
mereni       2 4.3911  2.1956  19.625 3.826e-05 ***
Residuals   17 1.9019  0.1119                      
---
Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1


**Are there some differences in response among fractions?
It seems that yes but only for measurement 1.

> summary(aov(h[mereni==1]~frakce[mereni==1]))

                    Df   Sum Sq  Mean Sq F value  Pr(>F)  
frakce[mereni == 1]  2 0.193038 0.096519  4.5464 0.09334 .
Residuals            4 0.084918 0.021230                  
---
Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1 


I know there are not many measurements (only one 0.25 fraction in measurement 
1 and one 0 fraction in measurement 3) in my dataset :-(.

But if I had more data in one measurement (let say three fractions in each of three 
samples),
is the correct aov syntax for such problem like this:

summary(aov(h~frakce+vzor+Error(mereni/(frakce+vzor))))

Thanks a lot

Petr Pikal
Precheza a.s.
Nab?.Dr.E.Bene?e 24
750 62 P?erov
+420641 25 2257 
0724 008 364
petr.pikal at precheza.cz
p.pik at volny.cz


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jdpietkiewicz at yahoo.com  Thu Oct 18 17:26:43 2001
From: jdpietkiewicz at yahoo.com (Jonathan Pietkiewicz)
Date: Thu, 18 Oct 2001 08:26:43 -0700 (PDT)
Subject: No subject
Message-ID: <20011018152643.76551.qmail@web13103.mail.yahoo.com>

Is it possible to set the intercept of a 3rd order
polynomial fit to zero and compute the R squared value
of that fit?  I'm having some trouble.

Thank you,

Jonathan Pietkiewicz

__________________________________________________

Make a great connection at Yahoo! Personals.
http://personals.yahoo.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From laurent at genome.cbs.dtu.dk  Thu Oct 18 17:28:11 2001
From: laurent at genome.cbs.dtu.dk (Laurent Gautier)
Date: Thu, 18 Oct 2001 17:28:11 +0200 (MDT)
Subject: [R] optimal windows R machine
In-Reply-To: <87itdd9irb.fsf@jeeves.blindglobe.net>
Message-ID: <Pine.SGI.3.95.1011018172253.13977042F-100000@genome.cbs.dtu.dk>




On 18 Oct 2001, A.J. Rossini wrote:

> 
> I think it depends on what you need.  It was fine for me, using MS
> Word and MS Powerpoint, as well as for running (not developing) Java
> GUI-based applications (which have not tended to be that fast on
> Unix, unlike say non-GUI apps).



The speed of recent Java machines is, I think, more than decent on say
Linux (and not sooooo bad on SGI). I however observed the following
particaularities: If the java library files are local the GUI things
behave honestly, but if they are remote they are awfully slow (even if the
java application is run locally !... Java experts must help me with an
explanation for that)


Best,



Laurent



Laurent Gautier                 CBS, Building 208, DTU
PhD. Student                    D-2800 Lyngby,Denmark
tel: +45 45 25 24 85            http://www.cbs.dtu.dk/laurent



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gs at statlab.uni-heidelberg.de  Thu Oct 18 17:35:56 2001
From: gs at statlab.uni-heidelberg.de (G. Sawitzki)
Date: Thu, 18 Oct 2001 17:35:56 +0200
Subject: [R] Parsing for list components
Message-ID: <p05100300b7f4a62411ed@[129.206.113.199]>

How do I parse an identifier of a list component, e.g.
	mylist$mycomponent
or
	mylist[[1]] ?
Parse does not do the job, e.g.
	parse(text="mylist$mycomponent")
returns an expression with just one term, instead of "mylist", "$", 
"mycomponent".

What I need is a way to extract the list name (e.g. "mylist"), given 
an identifier of a component. Splitting the string is possible, but I 
think there are better solutions.

   gs.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Thu Oct 18 17:46:44 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Thu, 18 Oct 2001 08:46:44 -0700 (PDT)
Subject: [R] Re: your mail
In-Reply-To: <20011018152643.76551.qmail@web13103.mail.yahoo.com>
Message-ID: <Pine.A41.4.33.0110180845220.185368-100000@homer05.u.washington.edu>

On Thu, 18 Oct 2001, Jonathan Pietkiewicz wrote:

> Is it possible to set the intercept of a 3rd order
> polynomial fit to zero and compute the R squared value
> of that fit?  I'm having some trouble.
>

summary(lm(y~poly(x,3)-1))
does the fit and gives the r^2 [defined in this case as RSS/sum(y^2)]


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From a.stephenson at lancaster.ac.uk  Thu Oct 18 17:46:36 2001
From: a.stephenson at lancaster.ac.uk (Alec Stephenson)
Date: Thu, 18 Oct 2001 16:46:36 +0100 (BST)
Subject: [R] uniform generator (default)
Message-ID: <Pine.GSO.4.21.0110181608500.8086-100000@unixc.lancs.ac.uk>


Recieving digests.
> RNGkind(NULL)
[1] "Marsaglia-Multicarry" "Kinderman-Ramage"

I would appreciate it if anybody has any comments on the following.
Please do not comment on the R functions themselves, since they merely
mimic a (bivariate simplification of a) C routine called from S.

In particular, I would like to know if anything is available with regard
to the theoretical properties of the default uniform generator under
transformations such as these. 

testing <-
function(n,alpha) {
  sim <- matrix(0,ncol=2,nrow=n)
  for(i in 1:n) 
  { 
    u <- runif(1)
    # runif(1)  ####
    if(runif(1) < alpha) z <- -log(runif(1))-log(runif(1))
    else z <- -log(runif(1))
    sim[i,1] <- exp(-(z * u^alpha))
    sim[i,2] <- exp(-(z * (1-u)^alpha))
  }
  sim
}

tmp <- testing(100000,0.5) # about 30secs 4 me
plot(tmp[,1],tmp[,2],pch=".")

testing <-
function(n,alpha) {
  sim <- matrix(0,ncol=2,nrow=n)
  for(i in 1:n) 
  { 
    u <- runif(1)
    runif(1)  ####
    if(runif(1) < alpha) z <- -log(runif(1))-log(runif(1))
    else z <- -log(runif(1))
    sim[i,1] <- exp(-(z * u^alpha))
    sim[i,2] <- exp(-(z * (1-u)^alpha))
  }
  sim
}

tmp <- testing(100000,0.5) # about 30secs 4 me
plot(tmp[,1],tmp[,2],pch=".")


> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    3.1              
year     2001             
month    08               
day      31               
language R  

As an aside, the routine written specifically in R may take the form

"testing.r"<- 
function(n = 1, alpha = 1, margins = "frechet")
{
        if(length(n) != 1 || mode(n) != "numeric" || n <= 0 || n%%1 != 0)
            stop("`n' must be a positive integer")
        if(length(alpha) != 1 || mode(alpha) != "numeric" || alpha <= 0 ||
        alpha > 1) stop("`alpha' must be a parameter in (0,1]")
        ####
	u <- runif(n)
        z <- rgamma(n, 1+rbinom(n,1,alpha))
	sim <- z * cbind(x=u, y=1-u)^alpha
        exp(-sim)
} 

which doesn't have the same structured output (for obvious reasons).

Incedently, the distribution function from which these sample from is the
copula F(x,y)=exp(-(u^(1/alpha)+v^(1/alpha))^alpha) where u=-log(x) and
v=-log(y).

Thanks in advance.

Alec Stephenson                            tel +44 (0) 1524 593950
Department of Mathematics and Statistics   fax +44 (0) 1524 592681
Lancaster University            email a.stephenson at lancaster.ac.uk
Lancaster LA1 4YF



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Oct 18 18:31:58 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Oct 2001 18:31:58 +0200
Subject: [R] Parsing for list components
In-Reply-To: <p05100300b7f4a62411ed@[129.206.113.199]>
References: <p05100300b7f4a62411ed@[129.206.113.199]>
Message-ID: <x2wv1sewox.fsf@blueberry.kubism.ku.dk>

"G. Sawitzki" <gs at statlab.uni-heidelberg.de> writes:

> How do I parse an identifier of a list component, e.g.
> 	mylist$mycomponent
> or
> 	mylist[[1]] ?
> Parse does not do the job, e.g.
> 	parse(text="mylist$mycomponent")
> returns an expression with just one term, instead of "mylist", "$",
> "mycomponent".
> 
> What I need is a way to extract the list name (e.g. "mylist"), given
> an identifier of a component. Splitting the string is possible, but I
> think there are better solutions.

parse() *does* do the job:

> parse(text="mylist$mycomponent")[[1]][[2]]
mylist

or maybe

> as.character(parse(text="mylist$mycomponent")[[1]][[2]])
[1] "mylist"

I.e., you just need to pick the result apart afterwards.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pauljohn at ukans.edu  Thu Oct 18 18:30:33 2001
From: pauljohn at ukans.edu (Paul E Johnson)
Date: Thu, 18 Oct 2001 11:30:33 -0500
Subject: [R] Numerical precision of hist densities or cumsum?
Message-ID: <3BCF03A9.DD9E2106@ukans.edu>

Today I wanted to experiment with different distributions an to see the
hazard rates they imply. So I eventually ended up with this, which uses
the hist object's handy $density and the cumsum function in R:

x <- c(rweibull(21000,0.5,0.7))
#create "breaks" vector to go into histogram
#need last break bigger than max(x)
y <- seq(0,max(x)+2)
histx <- hist(x,freq=FALSE,breaks=y)
cumProb<- cumsum(histx$density)
survival <- 1-cumProb
survival<- c(1,survival)  
survival <- survival[1:length(histx$density)]
hazard <- histx$density / survival
plot(hazard,type="l")
par(ask=TRUE)
retention<- 1-hazard
plot(retention,type="l",xlim=c(0,95))

This works the way I expect, except that there is a little numerical
imprecision in the high end of the values for the cumulative
probability.  The vector cumProb does not have 1.0 as its last element,
but rather something close, like 0.99997 or such. I know the values in
cumProb are correct for the left end of the vector, just not the right
end.  That has implications for the calculation of hazard and retention
curve values.

Do you have any tips for me? 
-- 
Paul E. Johnson                       email: pauljohn at ukans.edu
Dept. of Political Science            http://lark.cc.ukans.edu/~pauljohn
University of Kansas                  Office: (785) 864-9086
Lawrence, Kansas 66045                FAX: (785) 864-5700
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gco at eortc.be  Thu Oct 18 18:43:13 2001
From: gco at eortc.be (Gary Collins)
Date: Thu, 18 Oct 2001 18:43:13 +0200
Subject: [R] eval and as.symbol question
Message-ID: <6999C949BB85D511A30A00508BB9F4433A2AD3@marvin.eortc.be>

Problem solved. Hint was from G. Sawitzki (gs at statlab.uni-heidelberg.de)
question to the list about "Parsing for list components".
Solution is

for(i in 1:5){
cat("\n", sum(is.na(eval(parse(text = paste("x$c", i, sep=""))) == TRUE)),
"\n")
}

Again, I want stress, I was not particularly wanting to find the number of
missing items in a list in a dataframe, this was merely an exaxmple I was
trying to figure out using eval, parse etc... 
I wanted an approach to access certain (non-adjacent) columns in a dataframe
using an identifier c1,c2,... for example.
Thanks
Gary

-----Original Message-----
From: Gary Collins
To: r-help
Sent: 10/18/01 1:46 PM
Subject: [R] eval and as.symbol question

Dear all,
Can anyone help with the following problem...
 
if c1,...,c5 were objects and I wanted to simply count the number of
missing items I can simply do
 
example1 <- function ()
{
        xx_vector(length=5))
        for(i in 1:5){
                xx[i]_sum(is.na(eval(as.symbol(paste("c", i,
sep="")))==TRUE))
      }
      xx
}
This prodcues the correct results...
But when I merge these into a dataframe with colnames(df)<-
c("c1","c2","c3","c4","c5"), so that
> df
  c1 c2 c3 c4 c5
1  1  1 NA NA NA
2  2  2 NA NA NA
3  3  3 NA NA NA
4 NA NA NA  1  1
5  2  2  2  2  2
6  2  2  2  2  2
7 NA  3  3 NA  2
 
and try the next "logical" step from above....
 
example2 <- function (x) 
{
        xx_matrix(ncol=1, nrow=5)
        for(i in 1:5){
                xx[i] <- sum(is.na(eval(as.symbol(paste("x$c", i,
sep="")))==TRUE))
      }
      xx
}
> count.missing(x)
Error in eval(expr, envir, enclos) : Object "x$c1" not found
 
Any suggestions...? The counting missing data was merely an example, I
want to try and understand this process so as to implement the idea into
another function I am writing dealing with dataframes.
Thanks
Gary.
__________________________________________________
Dr. Gary S. Collins,
Statistics Research Fellow,
Quality of Life Unit, 
European Organisation for Research and Treatment of Cancer, 
EORTC Data Center, 
Avenue E. Mounier 83, bte. 11,
B-1200 Brussels, Belgium.
 
Tel: +32 2 774 1 606
Fax: +32 2 779 4 568
http://www.eortc.be/home/qol/ <http://www.eortc.be/home/qol/> 
__________________________________________________
 
 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Setzer.Woodrow at epamail.epa.gov  Thu Oct 18 18:45:26 2001
From: Setzer.Woodrow at epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Thu, 18 Oct 2001 12:45:26 -0400
Subject: [R] Parsing for list components
Message-ID: <OF8CAFAF08.EFAC4DE3-ON85256AE9.005BE2C2@rtp.epa.gov>


You just have to look a little deeper:

> parse(text="mylist$mycomponent")[[1]]
mylist$mycomponent
> parse(text="mylist$mycomponent")[[1]][[1]]
$
> parse(text="mylist$mycomponent")[[1]][[2]]
mylist
> parse(text="mylist$mycomponent")[[1]][[3]]
mycomponent

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919)
541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


                                                                                                          
                    "G. Sawitzki"                                                                         
                    <gs at statlab.uni-heid        To:     r-help at stat.math.ethz.ch                          
                    elberg.de>                  cc:                                                       
                    Sent by:                    Subject:     [R] Parsing for list components              
                    owner-r-help at stat.ma                                                                  
                    th.ethz.ch                                                                            
                                                                                                          
                                                                                                          
                    10/18/01 11:35 AM                                                                     
                                                                                                          
                                                                                                          




How do I parse an identifier of a list component, e.g.
           mylist$mycomponent
or
           mylist[[1]] ?
Parse does not do the job, e.g.
           parse(text="mylist$mycomponent")
returns an expression with just one term, instead of "mylist", "$",
"mycomponent".

What I need is a way to extract the list name (e.g. "mylist"), given
an identifier of a component. Splitting the string is possible, but I
think there are better solutions.

   gs.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-.-
r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._._._




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Jordi.Lopez at uab.es  Thu Oct 18 18:44:41 2001
From: Jordi.Lopez at uab.es (Jordi Lopez Sintas)
Date: Thu, 18 Oct 2001 18:44:41 +0200
Subject: [R] object of class "dissimilarity"
Message-ID: <3BCF06F8.23DB0975@selene.uab.es>

R users,

Does anybody know how to convert a square matrix of distances (X^2
distances, actually) into an object of class "dissimilarity" so that the
cluster package can used it?
Thanks.

Jord? L?pez
Unv. Aut?noma de Barcelona


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From todd.taylor at pnl.gov  Thu Oct 18 19:06:22 2001
From: todd.taylor at pnl.gov (Taylor, Z Todd)
Date: Thu, 18 Oct 2001 10:06:22 -0700
Subject: [R] optimal windows R machine
Message-ID: <202822BFB70EBC4BB3EAFD853EE2B6BF94CAAD@pnlmse10.pnl.gov>

rossini at blindglobe.net [mailto:rossini at blindglobe.net] wrote:

> >>>>> "AL" == Andy Liaw <Liaw> writes:
> 
>     AL> We did try VMware on one of our Linux boxes (dual P3 866 Xeon
>     AL> with 2GB RDRAM).  It was unbearably slow!
> 
> 
> (and others have responded similarly).
> 
> I think it depends on what you need.  It was fine for me, using MS
> Word and MS Powerpoint, as well as for running (not developing) Java
> GUI-based applications (which have not tended to be that fast on
> Unix, unlike say non-GUI apps).

Maybe I'm more tolerable of "unbearable" slowness, but I also have
found VMware to be more than adequate.  I run an NT4 guest on a
Linux (RH7.1) host and find the speed fine except for really I/O
intensive things (disk or screen).  CPU-bound tasks run at practically
native speed.  You do have to assign adequate memory to the virtual
machine; you don't want Windows swapping to the virtual disk.  So
maybe really large R problems would be painful.

One caveat is that VMware won't work right currently in full-screen
mode on most setups using version 4.* of XFree86.  In windowed mode,
it's a bit more sluggish (screen I/O only; CPU-bound tasks are still
fast).

--Todd
-- 
Why do 'slim chance' and 'fat chance' mean the same thing?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From alobo at ija.csic.es  Thu Oct 18 19:30:37 2001
From: alobo at ija.csic.es (Agustin Lobo)
Date: Thu, 18 Oct 2001 19:30:37 +0200 (MET DST)
Subject: [R] Rcmd SHLIB in rw1031 (R for Win)
Message-ID: <Pine.OSF.3.96.1011018191029.25011C-100000@ija.csic.es>


Thanks for the answers on readme.packages.

I have installed Rw1031 from SetupR.exe including the option
for compiling source files and, following directions in 
www.stats.ox.ac.ul/pub/Rtools, have installed:

-tools.zip
-Perl (Active Perl)
-mingw-1.1.tar.gz
-copied sh.exe to c:\bin\sh.exe

After Perl installation, its directory is added to my path. I have also
added the directory where the R tools live, as well as the bin for
mingw.

My path looks like:


PATH=E:\PERL\BIN;E:\RW1031\RWINT;E:\RW1031\RWINT\BIN;C:\WINDOWS;C:\WINDOWS\COMMAND;C:\DOS;D:\;C:\UTILES\ULTRAEDT;C:\GZIP;C:\PROGRA~1\PATHFI~1.70;


Then I've tried to compile and build a dll for a C program (test.c)
that works fine in the R version for Linux.

I do:  



E:\rw1031\bin>Rcmd SHLIB e:/Rseg/test.c
make[1]: `libR.a' is up to date.
------- Building e:/Rseg/test.dll from e:/Rseg/test.a --------
echo LIBRARY e:/Rseg/test > e:/Rseg/test.def
echo EXPORTS >> e:/Rseg/test.def
nm e:/Rseg/test.a > Defs
sed -n '/^........ [BCDRT] _/s/^........ [BCDRT] _/ /p' Defs >>
e:/Rseg/test.def

rm -f Defs
gcc  --shared -s  -o e:/Rseg/test.dll e:/Rseg/test.def e:/Rseg/test.a
-LE:/RW10
31/src/gnuwin32  -lg2c -lR

E:\rw1031\bin>Rcmd SHLIB e:/Rseg/test.c
dlltool -k --as as   --dllname R.dll --def R.exp --output-lib libR.a
gcc   -IE:/RW1031/src/include -include E:/RW1031/src/include/globalvar.h
-Wall
-O2   -c e:/Rseg/test.c -o e:/Rseg/test.o
e:/Rseg/test.c:78: warning: `/*' within comment
e:/Rseg/test.c: In function `printListElement':
e:/Rseg/test.c:15: warning: unused variable `prova2'
e:/Rseg/test.c:15: warning: unused variable `prova'
e:/Rseg/test.c:14: warning: unused variable `s3'
e:/Rseg/test.c:14: warning: unused variable `s2'
e:/Rseg/test.c:14: warning: unused variable `s1'
e:/Rseg/test.c:14: warning: unused variable `g3'
e:/Rseg/test.c:14: warning: unused variable `g2'
e:/Rseg/test.c:14: warning: unused variable `g1'
e:/Rseg/test.c:9: warning: unused variable `names'
rm -f -f e:/Rseg/test.a
ar cr e:/Rseg/test.a *.o
e:\RW1031\RWINT\BIN\ar.exe: *.o: No such file or directory
make: *** [e:/Rseg/test.a] Error 1



I've checked, and ar.exe is in e:\RW1031\RWINT\BIN
...and test.a in e:/Rseg/


If I repeat, the process starts from test.a:

E:\rw1031\bin>Rcmd SHLIB e:/Rseg/test.c
make[1]: `libR.a' is up to date.
------- Building e:/Rseg/test.dll from e:/Rseg/test.a --------
echo LIBRARY e:/Rseg/test > e:/Rseg/test.def
echo EXPORTS >> e:/Rseg/test.def
nm e:/Rseg/test.a > Defs
sed -n '/^........ [BCDRT] _/s/^........ [BCDRT] _/ /p' Defs >>
e:/Rseg/test.def

rm -f Defs
gcc  --shared -s  -o e:/Rseg/test.dll e:/Rseg/test.def e:/Rseg/test.a
-LE:/RW10
31/src/gnuwin32  -lg2c -lR


Apparentely, all good. But, from R:

> dyn.load("test.dll")
> a <- segmentaF2001.new3(test5.stat,test5.ady)
ITERACION: 1Error in .Call("printListElement", lista, t(stat), ncol(stat),
nrow(stat)) : 
        .Call function name not in load table
Timing stopped at: NA NA 0.11 NA NA 
> 


The same code works fine under Linux. 

Does anyone see where is the problem?

Thanks

Agus

Dr. Agustin Lobo
Instituto de Ciencias de la Tierra (CSIC)
Lluis Sole Sabaris s/n
08028 Barcelona SPAIN
tel 34 93409 5410
fax 34 93411 0012
alobo at ija.csic.es



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Oct 18 19:41:00 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Oct 2001 19:41:00 +0200
Subject: [R] Rcmd SHLIB in rw1031 (R for Win)
In-Reply-To: <Pine.OSF.3.96.1011018191029.25011C-100000@ija.csic.es>
References: <Pine.OSF.3.96.1011018191029.25011C-100000@ija.csic.es>
Message-ID: <x2ofn4ethv.fsf@blueberry.kubism.ku.dk>

Agustin Lobo <alobo at ija.csic.es> writes:

> E:\rw1031\bin>Rcmd SHLIB e:/Rseg/test.c
> dlltool -k --as as   --dllname R.dll --def R.exp --output-lib libR.a
> gcc   -IE:/RW1031/src/include -include E:/RW1031/src/include/globalvar.h
> -Wall
> -O2   -c e:/Rseg/test.c -o e:/Rseg/test.o
> e:/Rseg/test.c:78: warning: `/*' within comment
> e:/Rseg/test.c: In function `printListElement':
> e:/Rseg/test.c:15: warning: unused variable `prova2'
> e:/Rseg/test.c:15: warning: unused variable `prova'
> e:/Rseg/test.c:14: warning: unused variable `s3'
> e:/Rseg/test.c:14: warning: unused variable `s2'
> e:/Rseg/test.c:14: warning: unused variable `s1'
> e:/Rseg/test.c:14: warning: unused variable `g3'
> e:/Rseg/test.c:14: warning: unused variable `g2'
> e:/Rseg/test.c:14: warning: unused variable `g1'
> e:/Rseg/test.c:9: warning: unused variable `names'
> rm -f -f e:/Rseg/test.a
> ar cr e:/Rseg/test.a *.o
> e:\RW1031\RWINT\BIN\ar.exe: *.o: No such file or directory
> make: *** [e:/Rseg/test.a] Error 1
> 
> 
> 
> I've checked, and ar.exe is in e:\RW1031\RWINT\BIN
> ...and test.a in e:/Rseg/

My guess is that either does you shell not expand *.o or test.o never
actually got made. Notice that it is *.o it cannot find. Is there
actually anything inside test.a?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From christensen_c at yahoo.com  Thu Oct 18 22:01:54 2001
From: christensen_c at yahoo.com (Clark Christensen)
Date: Thu, 18 Oct 2001 14:01:54 -0600
Subject: [R] R script
Message-ID: <3BCF3532.60000@yahoo.com>

Is there some way run an R script from the command line?  Can I put a 
line at the top of the file like I would for a bash or perl script?  For 
example, a such a script (test.r) might look like.

#!/usr/bin/R

x <- c(1:10)
print(x)


running ./test.r at the command line doesn't work.  So is there a way to 
do this?  Am I missing something, or do I just have to start R and 
source() the script file (sans #!/usr/bin/R) like I'm already doing?

Clark



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Oct 18 20:21:30 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Oct 2001 20:21:30 +0200
Subject: [R] R script
In-Reply-To: <3BCF3532.60000@yahoo.com>
References: <3BCF3532.60000@yahoo.com>
Message-ID: <x2k7xsermd.fsf@blueberry.kubism.ku.dk>

Clark Christensen <christensen_c at yahoo.com> writes:

> Is there some way run an R script from the command line?  Can I put a
> line at the top of the file like I would for a bash or perl script?
> For example, a such a script (test.r) might look like.
> 
> #!/usr/bin/R
> 
> x <- c(1:10)
> print(x)
> 
> 
> running ./test.r at the command line doesn't work.  So is there a way
> to do this?  Am I missing something, or do I just have to start R and
> source() the script file (sans #!/usr/bin/R) like I'm already doing?

It might become possible in the future. There are a couple of
complications that get in the way: You cannot use a shell script
(which /usr/bin/R is) in a #! line, and even if you could, R would be
called with the script as an argument, and it currently doesn't handle
that. 

What you *can* do is stuff like

[pd at blueberry pd]$ cat > xxx.RR
#!/bin/sh
R --vanilla --quiet << __END__
 x <- c(1:10)
 print(x)
__END__
[pd at blueberry pd]$ chmod +x xxx.RR
[pd at blueberry pd]$ ./xxx.RR
>  x <- c(1:10)
>  print(x)
 [1]  1  2  3  4  5  6  7  8  9 10
> 


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From edd at debian.org  Thu Oct 18 20:36:13 2001
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 18 Oct 2001 13:36:13 -0500
Subject: [R] R script
In-Reply-To: <3BCF3532.60000@yahoo.com>; from christensen_c@yahoo.com on Thu, Oct 18, 2001 at 02:01:54PM -0600
References: <3BCF3532.60000@yahoo.com>
Message-ID: <20011018133613.A21180@debian.org>


On Thu, Oct 18, 2001 at 02:01:54PM -0600, Clark Christensen wrote:
> Is there some way run an R script from the command line?  Can I put a 
> line at the top of the file like I would for a bash or perl script?  For 
> example, a such a script (test.r) might look like.
> 
> #!/usr/bin/R
> 
> x <- c(1:10)
> print(x)
> 
> 
> running ./test.r at the command line doesn't work.  So is there a way to 
> do this?  Am I missing something, or do I just have to start R and 
> source() the script file (sans #!/usr/bin/R) like I'm already doing?

Try it as a shell wrapper around R:

#!/bin/sh
R --vanilla --silent <<EOF
x <- c(1:10)
print(x)
EOF

You can add --slave to the R call to suppress the command echos.

Hth, Dirk

-- 
Three out of two people have difficulties with fractions.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andy_liaw at merck.com  Thu Oct 18 21:29:15 2001
From: andy_liaw at merck.com (Liaw, Andy)
Date: Thu, 18 Oct 2001 15:29:15 -0400
Subject: Ultimate Linux Box (was RE: [R] optimal windows R machine)
Message-ID: <51F9C42DA15CD311BD220008C707D81903DC8308@usrymx10.merck.com>

Well, maybe this is sort of related...

Eric Raymond has written an article for the Linux Journal on how to build an
Ultimate Linux Box.  You can find the whole thing at

http://www2.linuxjournal.com/cgi-bin/frames.pl/articles/style/0014.html

The machine is said to compile the Linux 2.4.9 kernel in 1 min. 50 sec.  I
wonder how long it might take to build R on this beast...

Cheers,
Andy


> -----Original Message-----
> From: Liaw, Andy [mailto:andy_liaw at merck.com]
> Sent: Thursday, October 18, 2001 9:16 AM
> To: R-help at stat.math.ethz.ch
> Subject: RE: [R] optimal windows R machine
> 
> 
> We did try VMware on one of our Linux boxes (dual P3 866 Xeon with 2GB
> RDRAM).  It was unbearably slow!
> 
> Cheers,
> Andy
> 
> 
> > -----Original Message-----
> > From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
> > Sent: Thursday, October 18, 2001 5:10 AM
> > To: Agustin Lobo
> > Cc: R-help at stat.math.ethz.ch
> > Subject: Re: [R] optimal windows R machine
> > 
> > On Thu, 18 Oct 2001, Agustin Lobo wrote:
> > >
> > > Another alternative is using VMware for switching between
> > > Windows and Linux with no reboot. You can even have both the
> > > dual boot and the VMWare acces to Windows from within Linux.
> > > See http://www.vmware.com/support/ws3/doc/ws30_disks4.html
> > 
> > Have you tried that yourself?  You get a very slow Windows machine.
> > Win4lin is faster, but you only get a Windows 98 emulation.  
> > Everyone I
> > know who has tried those routes has abandoned them, and 
> > either reboots or
> > has a second main box, one for each OS, and switches between them.
> > 
> > I reboot: it takes about a minute.
> > 
> > -- 
> > Brian D. Ripley,                  ripley at stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> > 
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read 
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: 
> > r-help-request at stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._._._._._._._._
> > 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Fri Oct 19 00:25:26 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Oct 2001 00:25:26 +0200
Subject: Ultimate Linux Box (was RE: [R] optimal windows R machine)
In-Reply-To: <51F9C42DA15CD311BD220008C707D81903DC8308@usrymx10.merck.com>
References: <51F9C42DA15CD311BD220008C707D81903DC8308@usrymx10.merck.com>
Message-ID: <x23d4gegbt.fsf@blueberry.kubism.ku.dk>

"Liaw, Andy" <andy_liaw at merck.com> writes:

> Well, maybe this is sort of related...
> 
> Eric Raymond has written an article for the Linux Journal on how to build an
> Ultimate Linux Box.  You can find the whole thing at
> 
> http://www2.linuxjournal.com/cgi-bin/frames.pl/articles/style/0014.html
> 
> The machine is said to compile the Linux 2.4.9 kernel in 1 min. 50 sec.  I
> wonder how long it might take to build R on this beast...

My guess is that it's about twice as fast as this beast (2xPentiumIII,866):

[Current R-devel]
291.64user 13.57system 4:01.62elapsed 126%CPU (0avgtext+0avgdata 0maxresident)k
0inputs+0outputs (586156major+348522minor)pagefaults 0swaps

The R builds spend quite a lot of time building the documentation,
and are locked to uniprocessor mode for the duration. This is because
it runs as a single perl script that processes all .Rd files in a
package. There's a good reason for that, but splitting things across a
couple of perl runs would speed things up considerably. The compile
part can be done (setting MAKE="make -j5") in 

165.89user 12.78system 1:46.26elapsed 168%CPU (0avgtext+0avgdata 0maxresident)k
0inputs+0outputs (634972major+360981minor)pagefaults 48swaps

(This machine is still running RedHat 6.2 with it's default dodgy
compiler, so make check doesn't run...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From PHewson at devon.gov.uk  Fri Oct 19 09:05:23 2001
From: PHewson at devon.gov.uk (Paul Hewson)
Date: Fri, 19 Oct 2001 08:05:23 +0100
Subject: [R] Cross-compilers versus windows compilers (was optimal win
	dows R machine)
Message-ID: <839153510892D31199B000508B5ECDB50B1EDA0C@cor-exg3.devon.gov.uk>

Good morning,

May I ask a naive follow up to this?   Having now been granted limited
rights to use R-windows on a work PC, I wish to set up my home PC to support
compiling packages and so on.   I currently have a working Linux set-up at
home, is there any general advice as to whether it would be better to add in
the cross-compilers there or is it better to persuade my home PC to dual
boot windows and set up the full recommended windows compilation collection.

Thanks for any pointers

Paul

>From: Liaw, Andy (andy_liaw at merck.com)
>Date: Wed Oct 17 2001 - 16:41:24 CEST 
>I agree with Mark about Linux, if for no other reasons than the fact that
it 
>actually comes with the compilers needed to build R and do further code 
>development. Compared with doing it on Linux, compiling R from source on 
>Windows is not exactly a pleasure, even with the tremendous work to make it

>even possible by Ripley and Mararrato. 
>Cheers, 
>Andy 


-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Paul Hewson     tel. (01392) 382773
Data Analyst and Research Officer

Road Safety Team, Environment Directorate, 
Devon County Council,
1st Floor, Lucombe House,
County Hall
Topsham Road
Exeter EX2 4QW

tel (01392) 382773   fax (01392) 382135
email phewson at devon.gov.uk
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From amaitour at pasteur.fr  Fri Oct 19 10:07:13 2001
From: amaitour at pasteur.fr (Aboubakar Maitournam)
Date: Fri, 19 Oct 2001 10:07:13 +0200
Subject: [R] R script
References: <3BCF3532.60000@yahoo.com>
Message-ID: <3BCFDF30.1DD38101@pasteur.fr>

Clark Christensen wrote:

> Is there some way run an R script from the command line?  Can I put a
> line at the top of the file like I would for a bash or perl script?  For
> example, a such a script (test.r) might look like.
>
> #!/usr/bin/R
>
> x <- c(1:10)
> print(x)
>
> running ./test.r at the command line doesn't work.  So is there a way to
> do this?  Am I missing something, or do I just have to start R and
> source() the script file (sans #!/usr/bin/R) like I'm already doing?
>
> Clark
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

I have had the same problem by trying to install R.1.3.1. I m not specialist so my

answer will be perhaps not clear or stupid. I think that you must copy the R
script
in the directory as /usr/local/bin/R and it must be "world readable" (chmod u, g
and o +r)
and executable(+x). If it's impossible for you to copy the script you have not
probably
the authorization (so see you "root").
The other solution is to type  all directory path which contains /.R  (I think
that is /usr/bin/.R for you)
the thing before ./R must be all the path where is the script (/usr/bin).

Bye good luck.

Aboubakar Maitournam.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From alobo at ija.csic.es  Fri Oct 19 10:33:23 2001
From: alobo at ija.csic.es (Agustin Lobo)
Date: Fri, 19 Oct 2001 10:33:23 +0200 (MET DST)
Subject: [R] Rcmd SHLIB in rw1031 (R for Win)
In-Reply-To: <5B9B19C8A522D411A8EC00A0C99D6A9A8D2643@mail.nsabp.pitt.edu>
Message-ID: <Pine.OSF.3.96.1011019102946.261B-100000@ija.csic.es>

On Thu, 18 Oct 2001, Richards, Tom wrote:

> Dear Agus:
> 
> Will you please respond always to the list on this, as I am having many
> problems with gcc/mingw32 right now, too.  Do you have mingw-1.1?
> 
> Thanks.
> Tom

Yes, MinGW-1.1.tar.gz, following the link included
in www.stats.ox.ac.uk/pub/Rtools and unpacking
with tar zxvf MinGW-1.1.tar.gz

Agus


> -----Original Message-----
> From: Peter Dalgaard BSA [mailto:p.dalgaard at biostat.ku.dk]
> Sent: Thursday, October 18, 2001 1:41 PM
> To: Agustin Lobo
> Cc: r-help
> Subject: Re: [R] Rcmd SHLIB in rw1031 (R for Win)
> 
> 
> Agustin Lobo <alobo at ija.csic.es> writes:
> 
> > E:\rw1031\bin>Rcmd SHLIB e:/Rseg/test.c
> > dlltool -k --as as   --dllname R.dll --def R.exp --output-lib libR.a
> > gcc   -IE:/RW1031/src/include -include E:/RW1031/src/include/globalvar.h
> > -Wall
> > -O2   -c e:/Rseg/test.c -o e:/Rseg/test.o
> > e:/Rseg/test.c:78: warning: `/*' within comment
> > e:/Rseg/test.c: In function `printListElement':
> > e:/Rseg/test.c:15: warning: unused variable `prova2'
> > e:/Rseg/test.c:15: warning: unused variable `prova'
> > e:/Rseg/test.c:14: warning: unused variable `s3'
> > e:/Rseg/test.c:14: warning: unused variable `s2'
> > e:/Rseg/test.c:14: warning: unused variable `s1'
> > e:/Rseg/test.c:14: warning: unused variable `g3'
> > e:/Rseg/test.c:14: warning: unused variable `g2'
> > e:/Rseg/test.c:14: warning: unused variable `g1'
> > e:/Rseg/test.c:9: warning: unused variable `names'
> > rm -f -f e:/Rseg/test.a
> > ar cr e:/Rseg/test.a *.o
> > e:\RW1031\RWINT\BIN\ar.exe: *.o: No such file or directory
> > make: *** [e:/Rseg/test.a] Error 1
> > 
> > 
> > 
> > I've checked, and ar.exe is in e:\RW1031\RWINT\BIN
> > ...and test.a in e:/Rseg/
> 
> My guess is that either does you shell not expand *.o or test.o never
> actually got made. Notice that it is *.o it cannot find. Is there
> actually anything inside test.a?
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From alobo at ija.csic.es  Fri Oct 19 10:56:21 2001
From: alobo at ija.csic.es (Agustin Lobo)
Date: Fri, 19 Oct 2001 10:56:21 +0200 (MET DST)
Subject: SOLVED: [R] Rcmd SHLIB in rw1031 (R for Win)
In-Reply-To: <Pine.OSF.3.96.1011018191029.25011C-100000@ija.csic.es>
Message-ID: <Pine.OSF.3.96.1011019104920.261C-100000@ija.csic.es>


I had one missing directory in my path.
mingw-1-1-tar.gz contains 2 "bin" directories.
I used tar zxvf MinGW-1.1.tar.gz from directory rw1031/Rwint
and got a rw1031/Rwint/bin directory (which I did include in
my path), but also another rw1031/Rwint/mingw32/bin (which
I had not seen). 

I also have included E:\rw1031 and E:\rw1031\bin in my path,
but it seems to me that the missing rw1031/Rwint/mingw32/bin 
was the cause of the problem.

Thanks!

Dr. Agustin Lobo
Instituto de Ciencias de la Tierra (CSIC)
Lluis Sole Sabaris s/n
08028 Barcelona SPAIN
tel 34 93409 5410
fax 34 93411 0012
alobo at ija.csic.es


On Thu, 18 Oct 2001, Agustin Lobo wrote:

> 
> Thanks for the answers on readme.packages.
> 
> I have installed Rw1031 from SetupR.exe including the option
> for compiling source files and, following directions in 
> www.stats.ox.ac.ul/pub/Rtools, have installed:
> 
> -tools.zip
> -Perl (Active Perl)
> -mingw-1.1.tar.gz
> -copied sh.exe to c:\bin\sh.exe
> 
> After Perl installation, its directory is added to my path. I have also
> added the directory where the R tools live, as well as the bin for
> mingw.
> 
> My path looks like:
> 
> 
> PATH=E:\PERL\BIN;E:\RW1031\RWINT;E:\RW1031\RWINT\BIN;C:\WINDOWS;C:\WINDOWS\COMMAND;C:\DOS;D:\;C:\UTILES\ULTRAEDT;C:\GZIP;C:\PROGRA~1\PATHFI~1.70;
> 
> 
> Then I've tried to compile and build a dll for a C program (test.c)
> that works fine in the R version for Linux.
> 
> I do:  
> 
> 
> 
> E:\rw1031\bin>Rcmd SHLIB e:/Rseg/test.c
> make[1]: `libR.a' is up to date.
> ------- Building e:/Rseg/test.dll from e:/Rseg/test.a --------
> echo LIBRARY e:/Rseg/test > e:/Rseg/test.def
> echo EXPORTS >> e:/Rseg/test.def
> nm e:/Rseg/test.a > Defs
> sed -n '/^........ [BCDRT] _/s/^........ [BCDRT] _/ /p' Defs >>
> e:/Rseg/test.def
> 
> rm -f Defs
> gcc  --shared -s  -o e:/Rseg/test.dll e:/Rseg/test.def e:/Rseg/test.a
> -LE:/RW10
> 31/src/gnuwin32  -lg2c -lR
> 
> E:\rw1031\bin>Rcmd SHLIB e:/Rseg/test.c
> dlltool -k --as as   --dllname R.dll --def R.exp --output-lib libR.a
> gcc   -IE:/RW1031/src/include -include E:/RW1031/src/include/globalvar.h
> -Wall
> -O2   -c e:/Rseg/test.c -o e:/Rseg/test.o
> e:/Rseg/test.c:78: warning: `/*' within comment
> e:/Rseg/test.c: In function `printListElement':
> e:/Rseg/test.c:15: warning: unused variable `prova2'
> e:/Rseg/test.c:15: warning: unused variable `prova'
> e:/Rseg/test.c:14: warning: unused variable `s3'
> e:/Rseg/test.c:14: warning: unused variable `s2'
> e:/Rseg/test.c:14: warning: unused variable `s1'
> e:/Rseg/test.c:14: warning: unused variable `g3'
> e:/Rseg/test.c:14: warning: unused variable `g2'
> e:/Rseg/test.c:14: warning: unused variable `g1'
> e:/Rseg/test.c:9: warning: unused variable `names'
> rm -f -f e:/Rseg/test.a
> ar cr e:/Rseg/test.a *.o
> e:\RW1031\RWINT\BIN\ar.exe: *.o: No such file or directory
> make: *** [e:/Rseg/test.a] Error 1
> 
> 
> 
> I've checked, and ar.exe is in e:\RW1031\RWINT\BIN
> ...and test.a in e:/Rseg/
> 
> 
> If I repeat, the process starts from test.a:
> 
> E:\rw1031\bin>Rcmd SHLIB e:/Rseg/test.c
> make[1]: `libR.a' is up to date.
> ------- Building e:/Rseg/test.dll from e:/Rseg/test.a --------
> echo LIBRARY e:/Rseg/test > e:/Rseg/test.def
> echo EXPORTS >> e:/Rseg/test.def
> nm e:/Rseg/test.a > Defs
> sed -n '/^........ [BCDRT] _/s/^........ [BCDRT] _/ /p' Defs >>
> e:/Rseg/test.def
> 
> rm -f Defs
> gcc  --shared -s  -o e:/Rseg/test.dll e:/Rseg/test.def e:/Rseg/test.a
> -LE:/RW10
> 31/src/gnuwin32  -lg2c -lR
> 
> 
> Apparentely, all good. But, from R:
> 
> > dyn.load("test.dll")
> > a <- segmentaF2001.new3(test5.stat,test5.ady)
> ITERACION: 1Error in .Call("printListElement", lista, t(stat), ncol(stat),
> nrow(stat)) : 
>         .Call function name not in load table
> Timing stopped at: NA NA 0.11 NA NA 
> > 
> 
> 
> The same code works fine under Linux. 
> 
> Does anyone see where is the problem?
> 
> Thanks
> 
> Agus
> 
> Dr. Agustin Lobo
> Instituto de Ciencias de la Tierra (CSIC)
> Lluis Sole Sabaris s/n
> 08028 Barcelona SPAIN
> tel 34 93409 5410
> fax 34 93411 0012
> alobo at ija.csic.es
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From laurent at genome.cbs.dtu.dk  Fri Oct 19 11:37:51 2001
From: laurent at genome.cbs.dtu.dk (Laurent Gautier)
Date: Fri, 19 Oct 2001 11:37:51 +0200 (MDT)
Subject: [R] object of class "dissimilarity"
In-Reply-To: <3BCF06F8.23DB0975@selene.uab.es>
Message-ID: <Pine.SGI.3.95.1011019113657.15253957D-100000@genome.cbs.dtu.dk>



Hello,


I think this is the purpose of the function 'as.dist'.



Regards,



Laurent






Laurent Gautier			CBS, Building 208, DTU
PhD. Student			D-2800 Lyngby,Denmark	
tel: +45 45 25 24 85		http://www.cbs.dtu.dk/laurent

On Thu, 18 Oct 2001, Jordi Lopez Sintas wrote:

> R users,
> 
> Does anybody know how to convert a square matrix of distances (X^2
> distances, actually) into an object of class "dissimilarity" so that the
> cluster package can used it?
> Thanks.
> 
> Jord Lpez
> Unv. Autnoma de Barcelona
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From laurent at genome.cbs.dtu.dk  Fri Oct 19 11:46:02 2001
From: laurent at genome.cbs.dtu.dk (Laurent Gautier)
Date: Fri, 19 Oct 2001 11:46:02 +0200 (MDT)
Subject: No subject
Message-ID: <Pine.SGI.3.95.1011019114058.15253957E-100000@genome.cbs.dtu.dk>

Dear all,


Would anybody have R/S code for the INDSCAL method ?
... and may be more recent solutions to it than the original ones (like
the ones suggested by Berge, Kiers and Krijnen ... I do not have their
paper) if them perform better).

I looked for such a thing on the net but haven't been very lucky so far...





Thanking in advance....





Laurent Gautier			CBS, Building 208, DTU
PhD. Student			D-2800 Lyngby,Denmark	
tel: +45 45 25 24 85		http://www.cbs.dtu.dk/laurent

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mark at myatt.demon.co.uk  Fri Oct 19 11:37:53 2001
From: mark at myatt.demon.co.uk (Mark Myatt)
Date: Fri, 19 Oct 2001 10:37:53 +0100
Subject: [R] Updated tutorial [R / Epid] - Problem with .PDF file in archive
In-Reply-To: <51F9C42DA15CD311BD220008C707D81903DC8308@usrymx10.merck.com>
References: <51F9C42DA15CD311BD220008C707D81903DC8308@usrymx10.merck.com>
Message-ID: <8zaX0cAxR$z7EwYT@myatt.demon.co.uk>


All,

A handful of users have reported problems extracting the PDF file from
the ZIP archive (Rex1031.zip). I don't know what caused the problem so I
have recreated the archive and posted it to my website:

        http://www.myatt.demon.co.uk

This morning (19 Oct 2001). I hope that this solves the problem. It may
take some time for the file to migrate to the public facing servers ...
better to wait a day before retrieving the new file (dated 19 Oct 2001).

Thanks to all of you who reported the problems and sorry for any
inconvenience caused.

Best wishes,

Mark


--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Fri Oct 19 12:03:17 2001
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 19 Oct 2001 12:03:17 +0200
Subject: [R] vectors / matrices
In-Reply-To: <Pine.LNX.4.21.0110181620460.14941-100000@artemis.imbe.med.uni-erlangen.de>
References: <Pine.LNX.4.21.0110181620460.14941-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <15311.64101.556096.508457@gargle.gargle.HOWL>

>>>>> "Torsten" == Torsten Hothorn <Torsten.Hothorn at rzmail.uni-erlangen.de> writes:

    Torsten> Hi, 

    Torsten> a friend of mine came across this

    R> x <- 1:5
    R> cbind(x,x)
    Torsten>      x x
    Torsten> [1,] 1 1
    Torsten> [2,] 2 2
    Torsten> [3,] 3 3
    Torsten> [4,] 4 4
    Torsten> [5,] 5 5

    R> rbind(x,x)
    Torsten>   [,1] [,2] [,3] [,4] [,5]
    Torsten> x    1    2    3    4    5
    Torsten> x    1    2    3    4    5


    Torsten> x is a vector and therefore has no dim-attribute. Obviously
    Torsten> cbind treats x as a col-vector but rbind treats x as a
    Torsten> row-vector, that is: two functions have a different view on
    Torsten> x. I'm sure there is a good reason for this but I could not
    Torsten> find it ...

This*) has been the ``S view'' on vectors forever, and rightly so IMO.
BTW, the same has been true for APL which in some sense was mother to S,
Matlab, etc.  It might well be that matlab / octave differ here, but I *do*
prefer the S way quite a bit.

*) Losely speaking:
  ``A vector used in array context is coerced to whatever array is reasonable''

Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Oct 19 12:16:52 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 19 Oct 2001 11:16:52 +0100 (BST)
Subject: [R] Cross-compilers versus windows compilers (was optimal win
 dows R machine)
In-Reply-To: <839153510892D31199B000508B5ECDB50B1EDA0C@cor-exg3.devon.gov.uk>
Message-ID: <Pine.LNX.4.31.0110191101420.15370-100000@gannet.stats>

On Fri, 19 Oct 2001, Paul Hewson wrote:

> May I ask a naive follow up to this?   Having now been granted limited
> rights to use R-windows on a work PC, I wish to set up my home PC to support
> compiling packages and so on.   I currently have a working Linux set-up at
> home, is there any general advice as to whether it would be better to add in
> the cross-compilers there or is it better to persuade my home PC to dual
> boot windows and set up the full recommended windows compilation collection.

If you don't need Compiled HTML help (and my guess is that you don't) then
almost all packages can be cross-compiled.  (Of course, almost all the
public ones are already available in compiled form: many thanks to
Phillipe Grosjean for updates while I am travelling etc.)

Setting up a cross-compiler can be at least as frustrating as setting up a
native one.  I am offering one on the Rtools portal that works for me, but
is a little out-of-date.  There are others out there, but they mostly lack
Fortran.

I would try the cross-compiling route for now, but would warn that as we
move to using R itself for parts of the build procedure, cross-compiling
may become less viable.  Indeed, I managed to break it in R-devel for
a week or so recently.


PS on the original topic about VMware: my comments were principally about
speed running R for Windows under VMware.  It is probable that R is a
particularly bad fit, as its memory manager is already trying to make
Windows memomry management work like the Unix equivalent, and memory
management is crucial to R's performance.

>
> Thanks for any pointers
>
> Paul
>
> >From: Liaw, Andy (andy_liaw at merck.com)
> >Date: Wed Oct 17 2001 - 16:41:24 CEST
> >I agree with Mark about Linux, if for no other reasons than the fact that
> it
> >actually comes with the compilers needed to build R and do further code
> >development. Compared with doing it on Linux, compiling R from source on
> >Windows is not exactly a pleasure, even with the tremendous work to make it
>
> >even possible by Ripley and Mararrato.
> >Cheers,
> >Andy
>
>
> -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
> Paul Hewson     tel. (01392) 382773
> Data Analyst and Research Officer
>
> Road Safety Team, Environment Directorate,
> Devon County Council,
> 1st Floor, Lucombe House,
> County Hall
> Topsham Road
> Exeter EX2 4QW
>
> tel (01392) 382773   fax (01392) 382135
> email phewson at devon.gov.uk
> -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From alobo at ija.csic.es  Fri Oct 19 15:12:17 2001
From: alobo at ija.csic.es (Agustin Lobo)
Date: Fri, 19 Oct 2001 15:12:17 +0200 (MET DST)
Subject: [R] C function that calls R function and is called by R
Message-ID: <Pine.OSF.3.96.1011019150612.120A-100000@ija.csic.es>


Hi!

Could anybody send me (or point to) a simple example of a
C function (called from R with .Call() ) that calls
itself an R function (i.e., union()) ?

It would be great help. Thanks.

Agus

Dr. Agustin Lobo
Instituto de Ciencias de la Tierra (CSIC)
Lluis Sole Sabaris s/n
08028 Barcelona SPAIN
tel 34 93409 5410
fax 34 93411 0012
alobo at ija.csic.es


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Fri Oct 19 15:05:02 2001
From: ben at zoo.ufl.edu (Ben Bolker)
Date: Fri, 19 Oct 2001 09:05:02 -0400 (EDT)
Subject: [R] Cross-compilers versus windows compilers (was optimal win
 dows R machine)
In-Reply-To: <839153510892D31199B000508B5ECDB50B1EDA0C@cor-exg3.devon.gov.uk>
Message-ID: <Pine.LNX.4.30.0110190904070.28365-100000@bolker.zoo.ufl.edu>


  I found it to be a minor hassle to set up the cross-compilers but not
too bad at all.  Following Brian Ripley's directions and hacking around
with scripts I managed to get things going.  If you run into trouble I
could probably help you.

  Ben


On Fri, 19 Oct 2001, Paul Hewson wrote:

> Good morning,
>
> May I ask a naive follow up to this?   Having now been granted limited
> rights to use R-windows on a work PC, I wish to set up my home PC to support
> compiling packages and so on.   I currently have a working Linux set-up at
> home, is there any general advice as to whether it would be better to add in
> the cross-compilers there or is it better to persuade my home PC to dual
> boot windows and set up the full recommended windows compilation collection.
>
> Thanks for any pointers
>
> Paul
>
> >From: Liaw, Andy (andy_liaw at merck.com)
> >Date: Wed Oct 17 2001 - 16:41:24 CEST
> >I agree with Mark about Linux, if for no other reasons than the fact that
> it
> >actually comes with the compilers needed to build R and do further code
> >development. Compared with doing it on Linux, compiling R from source on
> >Windows is not exactly a pleasure, even with the tremendous work to make it
>
> >even possible by Ripley and Mararrato.
> >Cheers,
> >Andy
>
>
> -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
> Paul Hewson     tel. (01392) 382773
> Data Analyst and Research Officer
>
> Road Safety Team, Environment Directorate,
> Devon County Council,
> 1st Floor, Lucombe House,
> County Hall
> Topsham Road
> Exeter EX2 4QW
>
> tel (01392) 382773   fax (01392) 382135
> email phewson at devon.gov.uk
> -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker at zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rdiaz at inner.es  Fri Oct 19 15:22:52 2001
From: rdiaz at inner.es (rdiaz)
Date: Fri, 19 Oct 2001 15:22:52 +0200
Subject: [R] multinomial: stepwise selection using prediction error
References: <200110170416.MAA02431@salvia.maths.uwa.edu.au>
Message-ID: <3BD0292C.F223BDB3@inner.es>

Dear All,

I often come across observational data sets, where the interest is in predicting
the class membership (often more than 2 classes) as a function of several
variables; generally, the number of predictors is very large, and it is also of
interest to make that number as small as possible (for instance, to minimize length
of future questionaires). I thought that a possible approach would be to use some
kind of stepwise model selection; as criterion for variable selection I would use
the prediction error from models fitted with "multinom" (package nnet), where the
prediction error would be obtained using k-fold cross-validation.

I have seen somewhat similar approaches, but not this one in particular, and since
I'd think the general situation is fairly common to many people,  I am wondering
whether the idea makes sense, or if it is a completely misguided and boneheaded
one.

(I think this is relatively easy to implement, comparing the results of
predict.multinom with the true class membership of the hold-out sets; that would be
the value returned by the function "extractAIC.mycvmultinom", and then I would be
able to just call stepAIC on objects of class "mycvmultinom").

Thanks,

Ram?n D?az
Inner Research
Vel?zquez 109
28006 Madrid
Spain


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From iosu at ucc.ie  Fri Oct 19 17:15:36 2001
From: iosu at ucc.ie (Jesus Maria Frias Celayeta)
Date: Fri, 19 Oct 2001 16:15:36 +0100 (IST)
Subject: [R] C function that calls R function and is called by R
In-Reply-To: <Pine.OSF.3.96.1011019150612.120A-100000@ija.csic.es>
Message-ID: <Pine.LNX.4.33.0110191608040.23047-100000@jmfrias.ucc.ie>

Hi Agustin,
	You can find examples in the "Writing R extensions"
section 4.8 "Evaluating R expression from C".

cheers,

IOsu

Jesus Maria Frias Celayeta, PhD.
Process Engineering Department
University College Cork. Ireland
phone: 353-21-4903097
fax:   353-21-4270249
http://www.ucc.ie/acad/departments/processeng/staff/friasj.html

On Fri, 19 Oct 2001, Agustin Lobo wrote:

>
> Hi!
>
> Could anybody send me (or point to) a simple example of a
> C function (called from R with .Call() ) that calls
> itself an R function (i.e., union()) ?
>
> It would be great help. Thanks.
>
> Agus
>
> Dr. Agustin Lobo
> Instituto de Ciencias de la Tierra (CSIC)
> Lluis Sole Sabaris s/n
> 08028 Barcelona SPAIN
> tel 34 93409 5410
> fax 34 93411 0012
> alobo at ija.csic.es
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Harvey.Monder at pharma.com  Fri Oct 19 17:53:48 2001
From: Harvey.Monder at pharma.com (Monder, Harvey)
Date: Fri, 19 Oct 2001 11:53:48 -0400
Subject: [R] Adapting programs from S to R
Message-ID: <E5EC0556E8B6D2118CB600A0C9B6BB6003BA57D6@a2mbx01.pharma.com>

I am adapting some Splus programs to run in R.  In the append function, if I
read the documentation correctly, the 'where' parameter in S can be
considered equivalent to the 'envir' in R.  However, what about 'frame'?  Is
there a parallel in R or do the different scoping rules make it irrelevant?

	Thanks in advance for any help and clarification.

	Regards,
	Harvey Monder
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From alobo at ija.csic.es  Fri Oct 19 19:06:25 2001
From: alobo at ija.csic.es (Agustin Lobo)
Date: Fri, 19 Oct 2001 19:06:25 +0200 (MET DST)
Subject: [R] Rcmd SHLIB: another problem
Message-ID: <Pine.OSF.3.96.1011019184209.10041A-100000@ija.csic.es>


Well, having made the same installation of Rtools
for rw1031
in a Win98 box (the former one was my Win95 labtop) to get
advantage of significantly more RAM, I try 

C:\alobo\Rseg>Rcmd SHLIB test.c
make: /bin/sh.exe: Command not found
make: *** [libR] Error 127

despite the fact that I made a C:\bin
directory and copied sh.exe there.
Actually, if I just type sh in
the MS-DOS window, it works
(I've put the C:\bin directory in
the path).

I've also tried runing from 
within C:/bin 

C:\bin>Rcmd SHLIB C:\alobo\Rseg\test.c
make: /bin/sh.exe: Command not found
make: *** [libR] Error 127

Could be a problem with / and \ ?
Does Win98 behaves differently than Win95 
on that regard?

Thanks,


Agus

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From smcnary at charm.net  Fri Oct 19 23:48:09 2001
From: smcnary at charm.net (Scot W McNary)
Date: Fri, 19 Oct 2001 17:48:09 -0400 (EDT)
Subject: [R] R code and simulation suggestions
In-Reply-To: <8zaX0cAxR$z7EwYT@myatt.demon.co.uk>
Message-ID: <Pine.BSI.4.40.0110191729260.29701-100000@fellspt.charm.net>



Hi,

I have a question about a simulation I've tried to write in R.  I'd
appreciate any suggestions for improvements in my R code or logic used to
construct the simulation.

Background:  I've recently come across a paper that cautions against using
the normal approximation to the binomial when P (population proportion)
is very small (or very large).  As an applied data analyst who is about to
do some work with differences between small p-hats (sample proportions), I
wanted to demonstrate to myself that even though the parent distributions
may not be well approximated by the normal distribution, the differences
between two proportions may be.  There may be an elegant proof of this (an
extension of the Central Limit Theorem?), but I wanted to see if I could
both demonstrate it the concept to myself and to sharpen my R usage to do
it.

Here's my strategy.  Assume two populations with population proportions of
.05.  Under the null hypothesis of no difference, the population
difference between proportions is 0.  Sample p-hats from these two
proportions repeatedly to create an empirical sampling distribution for
p-hat differences.  Bootstrap sample from the empirical sampling
distribution.  Find the mean p-hat difference for each bootstrap sample.
Then plot the resulting mean differences with a histogram, density plot,
and qq plot for visual inspection.  Test for normality just for kicks.

Here's my code:

### begin code

# an attempt to sample from two binomial distributions both
# with P=.05 to create a sampling distribution of p-hat1 - p-hat2
# differences

# create the binomial variable x and p(x)
source<-seq(0, 100, by=1)
px<-dbinom(source, 100, .05)

# sample from binomial distributions with probability px
# divide by 100 to create p-hats
# find 500 differences from randomly drawn p-hats with probability px
#  to create empircal sampling distribution for p-hat differences
dif4<-((sample(source, 500, replace=TRUE, px))/100 - (sample(source, 500,
        replace=TRUE, px))/100)

# get 5000 bootstrap samples from empirical sampling distribution for
p-hat differences
library(bootstrap)
sim4<-bootstrap(dif4, 5000, mean)

# pull out the p-hat difference statistics to plot
par(mfrow=c(2,2))
hist(sim4$thetastar, main="Histogram Prop<=.05, binomial draws")
plot(density(sim4$thetastar), main="Density Plot Prop<=.05, binomial
     draws")

# a significance test for normality
shapiro.test(sim4$thetastar)
qqnorm(sim4$thetastar, main="QQ Plot Prop<=.05, binomial draws")
plot(mean(sim4$thetastar), type="n", main="Density Plot Prop<=.05,
binomial draws")

### end code


This is my first attempt at something like this, so I'd consider any
suggestions as learning opportunities.  Does this make sense?  Does it
seem to do what I intend?  Are there faster/cleaner ways to do this?

I'm not sure it's relevant for this question but just in case:

platform i386-pc-mingw32
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    3.1
year     2001
month    08
day      31
language R


Thanks,

Scot McNary


--
  Scot W. McNary  email:smcnary at charm.net


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rswami at cistel.com  Sat Oct 20 16:39:13 2001
From: rswami at cistel.com (Ramalingam Swaminathan)
Date: Sat, 20 Oct 2001 10:39:13 -0400
Subject: [R] New to R
Message-ID: <B4F704C21609F64C9E5DB065BF0BAC6508C726@win2ks2.cistel>

Hi ,

I am new to R and want to learn R programming from scratch. I have
installed R console 1.3.1 and I am going through the HTLP help. What I
am looking for is a lead to some documentation towards learning R
programming and also some exercises towards learning with solutions. Is
ther such a book online documentation?

Thanks,

Ram
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rnassar at duke.edu  Sat Oct 20 17:03:50 2001
From: rnassar at duke.edu (Rashid Nassar)
Date: Sat, 20 Oct 2001 11:03:50 -0400 (EDT)
Subject: [R] New to R
In-Reply-To: <B4F704C21609F64C9E5DB065BF0BAC6508C726@win2ks2.cistel>
Message-ID: <Pine.SOL.3.91.1011020110319.18324A-100000@godzilla2.acpub.duke.edu>


An excellent book is:

S Programming  by W. N. Venables and B.D. Ripley, Springer-Verlag, 2000.
ISBN 0-387-98966-8

264 pages; it covers both S/S-Plus and R (matters specific to R are
indicated by "R" in the margin)

Rashid Nassar

On Sat, 20 Oct 2001, Ramalingam Swaminathan wrote:

> Date: Sat, 20 Oct 2001 10:39:13 -0400
> From: Ramalingam Swaminathan <rswami at cistel.com>
> To: r-help at stat.math.ethz.ch
> Subject: [R] New to R
> 
> Hi ,
> 
> I am new to R and want to learn R programming from scratch. I have
> installed R console 1.3.1 and I am going through the HTLP help. What I
> am looking for is a lead to some documentation towards learning R
> programming and also some exercises towards learning with solutions. Is
> ther such a book online documentation?
> 
> Thanks,
> 
> Ram
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kuonen at statoo.com  Sat Oct 20 17:57:04 2001
From: kuonen at statoo.com (Dr. Diego Kuonen)
Date: Sat, 20 Oct 2001 17:57:04 +0200
Subject: [R] New to R
References: <Pine.SOL.3.91.1011020110319.18324A-100000@godzilla2.acpub.duke.edu>
Message-ID: <3BD19ED0.913F699E@statoo.com>

Rashid Nassar wrote:
> 
> An excellent book is:
> S Programming  by W. N. Venables and B.D. Ripley, Springer-Verlag, 2000.
> ISBN 0-387-98966-8
> 264 pages; it covers both S/S-Plus and R (matters specific to R are
> indicated by "R" in the margin)

You may also want to check their "On-line Complements" available at 

  http://www.stats.ox.ac.uk/pub/MASS3/Compl.shtml

Especially, the "`R' Complements".

See also the "Contributed Documentation" section on CRAN:

  http://cran.r-project.org/other-docs.html

Greets

  Diego Kuonen


-- 
Dr. ?s sc. Diego Kuonen, CEO      phone   +41 (0)21 693 5508
Applied Statistician              mobile  +41 (0)78 709 5384
Statoo Consulting                 email   kuonen at statoo.com
PO Box 107, CH-1015 Lausanne      web     http://www.statoo.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ewilliams at ucsd.edu  Sat Oct 20 22:20:30 2001
From: ewilliams at ucsd.edu (Elliot Williams)
Date: Sat, 20 Oct 2001 13:20:30 -0700
Subject: [R] Animating a persp plot: non-constant scaling?
Message-ID: <01102013203000.02502@ewilliams.ucsd.edu>

Hi all,

I'm making an animation of a rotating persp plot of some data.  It's easy, 
really:  I just plot the persp in a loop over the theta parameter, saving 
each plot, and then chain them together with ImageMagick (as suggested on 
Paul Johnson's R-tips page).

But...  when you run the animation, because each graph is individually 
re-scaled, the image is not the same size in each frame.  That is, when the 
bounding box is facing you (theta=0), the plotted image is bigger than when 
it's at 45 degrees to the front.  

Here's a simple example:

thetas <- seq(0,360,10)
for (i in 1:36){
	png(paste("image", "_", i, ".png", sep = ""))
	persp(outer(seq(0.1,1,.01),seq(0.2,1,.01), beta), theta=thetas[i])
	dev.off()
}

then rename the files (1 -> 01) so that they're in order 
(is there a clever way around doing this from within R?), 
then animate with a command similar (on Linux) to:

(bash)$ convert -delay 10 -loop 5 image*.png animated.gif

Then open it up with something that likes animated gifs (I use a browser).
See how it wobbles?  Any clues?

Thanks.
Elliot.

-- 
Elliot Williams (ewilliams at ucsd.edu)
Economics Department, UC San Diego
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From r_stuff_online at hotmail.com  Sat Oct 20 22:51:22 2001
From: r_stuff_online at hotmail.com (Neil Osborne)
Date: Sat, 20 Oct 2001 21:51:22 +0100
Subject: [R] Bbuilding R on Win2K
References: <Pine.LNX.4.31.0110191101420.15370-100000@gannet.stats>
Message-ID: <OE14vBjNx45W9u1Em4q000030bd@hotmail.com>

Dear all,

I wonder if anyone can help with this challenge. I have recently downloaded
the R source (R-1.3.0.zip) and its associated buildtools. I have read the
INSTALL and other related docs. I have modified Makefile (turned of building
help) and set the BUILD=CYGWIN in MkRules (I believe the documentation
indicated that these were the variety bundled in the tools.zip file)

However, when I run make, this is what I get

F:\R-1.3.0\src\gnuwin32>make
mkdir -p ../../bin
make -C ./fixed
make[1]: Entering directory `F:/R-1.3.0/src/gnuwin32/fixed'
sed -e '/^#/d' -e '/Rsockfork/d' -e 's/F77_SUBROUTINE(\(.*\))/  { "\1_",
\1_},/' -e 's/C_FUNCTION(\(.*\))/{ "\1",        \1 },/' ../../appl/ROU
TINES > ../FFTab.h
\1_\",: unexpected EOF while looking for `''
\1_\",: -c: line 2: syntax error
make[1]: *** [../FFTab.h] Error 2
make[1]: Leaving directory `F:/R-1.3.0/src/gnuwin32/fixed'
make: *** [fixfiles] Error 2


I have a windows port of Perl (details below)
    This is perl, version 5.005_03 built for MSWin32-x86


I would be very grateful to any one who could point out what's going wrong,
and what can be done to correct this issue.

Thanks in advance

PS :

The OS is Windows 2000 (Version 5.00.21950.)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From faheem at email.unc.edu  Sun Oct 21 07:50:18 2001
From: faheem at email.unc.edu (Faheem Mitha)
Date: Sun, 21 Oct 2001 01:50:18 -0400 (EDT)
Subject: [R] generating a gamma random variable
Message-ID: <Pine.LNX.4.33.0110202236430.11629-100000@Chrestomanci>


Dear R People,

This question has nothing to do with R directly, but it is a simulation
question. I need to generate a random variable distributed as
gamma(\alpha,\beta), with the additional proviso that it must be a
function of random variable(s) which do not depend on \alpha, \beta. In
this case, I have \alpha = (T-1)/2, where T is a positive integer.

So, it seems reasonable to first simulate from a chi-squared distribution
with T-1 degrees of freedom. Then multiply by the appropriate scale
factor.

There seem to be at least two different ways to simulate from a
chi-squared distribution with n degrees of freedom.

1) Add together the sum of squares of n standard normal random variates.

2) Adding together n/2 independent exponential (mean 2) variates or
(n-1)/2 independent exponential variates plus a standard normal, depending
whether n is even or odd respectively.

Method 2) involves simulating roughly half as many random variates, but I
am wondering if it is really more efficient. How does simulating from an
exponential distribution compare in "expense" to simulating from a
standard normal?

I'm wondering whether this would be the best way. Does anyone else have a
better idea? One minor downside of the above method is that it requires
using a varying number (depending on T) of random variables, to obtain one
random variate. It would be preferable if this number was fixed (ideally
1).

One more question: how does one debug such an algorithm once coded up? Ie.
what is an efficient way of testing whether some random variates are
indeed distributed as Gamma(\alpha,\beta) for some \alpha, \beta?

Please cc me if you reply, I'm not subscribed to the list. Thanks in
advance.

                          Sincerely, Faheem Mitha.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From guido.schreurs at power.alstom.com  Sun Oct 21 12:22:22 2001
From: guido.schreurs at power.alstom.com (guido.schreurs@power.alstom.com)
Date: Sun, 21 Oct 2001 12:22:22 +0200
Subject: [R] Request information on R-package
Message-ID: <C1256AEC.003874D5.00@abb-chkra-pass1.kra.ch.abb.com>



Dear sir,mrs,ms,

I would like to get some more information about the R- program. I am seeking a
tool to calculate non-linear multivariate regression functions, this should be
programmed in C++(Windows-based). My question is if R can calculate the function
coefficients using regression functions and if the code for doing this is
available in C++ format.

Thank you.

Best regards,....

G. Schreurs

CONFIDENTIALITY : This  e-mail  and  any attachments are confidential and may be
privileged. If  you are not a named recipient, please notify the sender
immediately and do not disclose the contents to another person, use it for any
purpose or store or copy the information in any medium.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Bill.Venables at CMIS.CSIRO.AU  Sun Oct 21 15:14:36 2001
From: Bill.Venables at CMIS.CSIRO.AU (Bill.Venables@CMIS.CSIRO.AU)
Date: Sun, 21 Oct 2001 23:14:36 +1000
Subject: [R] Type III sums of squares.
Message-ID: <E09E527B56BE2D438A3D6A246DDD27A9049141@Roper-CV.qld.cmis.csiro.au>

Oh rats, not again.  Oh well.  Sigh.

I think it is Rolf who is doing the fulminating now.  Let me make a few
quick points in rejoinder and definitely leave it at that.

1. All "sums of squares" that I have ever seen proposed are geometrically
just the squared length of a projection onto the orthogonal complement of a
null hypothesis model subspace in a certain outer hypothesis model space.
As such they can be used to test that null within that outer hypothesis.
Hence there is only one Type of Sum of Squares and to coin others is to make
an artificial distinction where there is no difference.  In practice this
tends to obscure the essential simplicity of the idea and to encourage some
confusion.

2. Of course you can test aspects of main effects in the presence of
interactions just as you can test the hypothesis that the intercept of a
simple linear regression line is zero.  However you almost never want to do
that in practice.  The problem comes with people's perceptions.  It is very
tempting for some people to bypass embarrassingly significant interactions
because their interpretation is messy.  It seems far easier to cut straight
to the chase and to ask for a test of main effects that somehow bypasses
interactions so that you can get your head around the result more easily.
"Type III sums of squares", in providing a test of a generally uninteresting
hypothesis, run the risk of catering to this intellectually lazy whim that
many experimenters so crave.

Take it easy, Rolf.  I thought we were both on the same side.

Bill.




-----Original Message-----
From: Rolf Turner [mailto:rolf at maths.uwa.edu.au]
Sent: Wednesday, 17 October 2001 2:17 PM
To: r-help at stat.math.ethz.ch
Subject: [R] Type III sums of squares.



Peter Dalgaard writes (in response to a question about 2-way ANOVA
with imbalance):

>                                              ... There are various
> boneheaded ways in which people try to use to assign some kind of
> SumSq to main effects in the presence of interaction, and they are all
> wrong - although maybe not very wrong if the unbalance is slight.

People keep saying this --- very vehemently --- and it is NOT TRUE.

Point 1 --- imbalance is really irrelevant here, a fact which
is usually (always?) overlooked.  If the design is balanced,
all ``types'' of sums of squares are the same.  The sequential
sums of squares which R will happily produce might well contain
``significant'' values for SSA and/or SSB ***and*** a significant
value for the interaction sum of squares, SSAB.

Point 2 --- What does such ``significance'' ***mean***?  It is not
correct to say that it means nothing at all.  The significance
of say, SSA, reports on the result of the test of a hypothesis.
This hypothesis is a ***meaningful*** hypothesis.  It may well not be
an important hypothesis, or a particularly interesting hypothesis,
or a hypothesis that the experimenter actually cares about.
It is substantially different from the hypothesis which is tested
by SSA when there is no interaction.  (Different, but related.)
Bill Venables fulminates that consideration of such a hypothesis is
contrary to the fundamental philosophy of statistcial modelling, and
thereby an abomination in the sight of God, and probably Politically
Incorrect to boot.  This may well be so.  Nonetheless it ***is***
a well-defined and meaningful hypothesis.

Rather than dismissing the testing of such a hypothesis as being
``bone-headed'', the guru should point out to the desciple

	(a) just what hypothesis is being tested,

	(b) that this hypothesis packs a substantially different
	load of freight than that which is tested when there is
	no interaction, and

	(c) that the desciple should carefully search his or her
	soul as to whether the hypothesis which is being tested
	is of any actual interest.

This would go much further toward bringing the desciple to true
enlightenment.

Point 3 --- what hypothesis is being tested by SSA?

Let factor A correspond to index i, and B to index j.

Let the cell means be mu_ij.  (In the overparameterized
notation, mu_ij = mu + alpha_i + beta_j + gamma_ij.)

The hypothesis being tested is

		H_0: mu_1.-bar = mu_2.-bar = ... = mu_a.-bar

where factor A has a levels, and ``mu_i.-bar'' means
the average (arithmetic mean) of mu_i1, mu_i2, ..., mu_ib.
(Note --- factor B has b levels.)

I.e. the hypothesis is that there is no difference, on average,
between the levels of A, the average being taken over the levels
of B.

Now taking such an average may not be a sensible thing to do,
but it is perfectly well-defined, and thus a ***meaningful***
hypothesis is being tested.  (The meaning of which the hypothesis
is full might not be very exciting, but that is more of a practical
than a statistical issue.)

Note that the hypothesis being tested, while possibly of dubious
import, is perfectly comprehensible to the human mind.

(Remark: In real life, if we were really interested in averaging
over the levels of B at all, we would probably want a ***weighted***
average, with the weights corresponding to the preponderance of
the levels of B in the population.)

Note that if there is no interaction (if the gamma_ij are all zero)
then the hypothesis being tested is that for each fixed j, the mu_ij
are all ***identical*** (say mu_ij = tau_j) and hence the averages
over j are equal (mu_i.-bar = tau.-bar, independent of i.)

This is all easier to think about graphically.  For each j, plot the
mu_ij against the index i, giving a ``profile''.  ``No interaction''
means that all profiles are parallel.  No interaction and no A
effect means that all profiles are horizontal.

If the profiles are parallel, then all profiles will be horizontal
if and only if their mean is horizontal.

However if the profiles are ***not*** parallel (i.e. if there is
interaction) their means may be horizontal anyhow.

Let me repeat:  This horizontallity may not be of much interest if
the profiles are not parallel, but it is a perfectly well-defined
concept, and testing for it makes perfect sense in the abstract.

Point 4  --- on the (remote?) chance that we really are interested in
the above horizontallity, and if the design is in fact NOT BALANCED,
then the much maligned type III sums of squares are ***definitely***
called for.  Type III sums of squares will test the null hypothesis
stated in Point 3, irrespective of balance.  Sequential sums of
squares will test another, different, and totally bizarre hypothesis.
(Again a perfectly ``meaningfull'' hypothesis, but one such that the
meaning is really too convoluted to admit any sort of comprehension
by the human mind.  Moreover this hypothesis is dependent on the
design structure, rendering it even more unlikely to be of any
interest, even if one could understand what it it is saying.)


					cheers,

						Rolf Turner
						rolf at maths.unb.ca
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From faheem at email.unc.edu  Sun Oct 21 17:22:53 2001
From: faheem at email.unc.edu (Faheem Mitha)
Date: Sun, 21 Oct 2001 11:22:53 -0400 (EDT)
Subject: [R] generating a gamma random variable
In-Reply-To: <3BD28882.F865FF18@helsinki.fi>
Message-ID: <Pine.LNX.4.33.0110211106370.11629-100000@Chrestomanci>



On Sun, 21 Oct 2001, Bob O'Hara wrote:

> Faheem Mitha wrote:
> >
> > Dear R People,
> >
> > This question has nothing to do with R directly, but it is a simulation
> > question. I need to generate a random variable distributed as
> > gamma(\alpha,\beta), with the additional proviso that it must be a
> > function of random variable(s) which do not depend on \alpha, \beta. In
> > this case, I have \alpha = (T-1)/2, where T is a positive integer.
> >
> > So, it seems reasonable to first simulate from a chi-squared distribution
> > with T-1 degrees of freedom. Then multiply by the appropriate scale
> > factor.
> >
> Is there a reason why you don't want to use either rgamma or rchisq?

Come to think of it, there is no reason why I should not use rchisq. This
would depend on T, but that is Ok, since T is a constant within the
calculation, and the method I'm using above depends on T being fixed
anyway. This would probably be the most efficient way, since to get a
gamma distribution would then just involve multiplying by a constant.

Background: I'm using this simulation to run coupled Markov chains. T is a
contant within the calculation.

> > There seem to be at least two different ways to simulate from a
> > chi-squared distribution with n degrees of freedom.
> >
> There are much quicker ways than you suggested.  A rejection algorithm
> is one choice.  I'll save him the embarrassment of having to indulge in
> self promotion by suggesting that the classic text is Brian Ripley's
> 1987 book 'Stochastic Simulation'. There is also an algorithm in Press
> et al.'s 'Numerical Recipes in C'.

Yes, actually Stochastic Simulation is on my desk as I write, and it
suggests the methods I outlined above for simulating from chisq/gamma.

I'm still wondering about how to check (in general) whether a bunch of rvs
are distributed as gamma or not. How do people check such things in
practice?

Thanks for your reply.
                                      Sincerely, Faheem Mitha.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mtaboga at tiscalinet.it  Sun Oct 21 18:36:37 2001
From: mtaboga at tiscalinet.it (Marco Taboga)
Date: Sun, 21 Oct 2001 18:36:37 +0200
Subject: [R] Rcmd SHLIB on Win ME
Message-ID: <000a01c15a4e$8e87d4e0$9e250a3e@xxx>

I have a problem using Rcmd SHLIB. 
My system is configured as follows:
    - Operating system: Windows ME
    - R version: 1.3.1
    - RTools installed:
        * tools.zip
        * MinGW-1.1.tar.gz
        * ActivePerl-5.6.1.626-MSWin32-x86-multi-thread.msi
        * sh.exe in c:/bin
    - Path settings:
        C:\Perl\bin;C:\WINDOWS;C:\WINDOWS\COMMAND;c:\bin;c:\Programmi\R\bin;c:\Programmi\R\mingw32\bin;c:\Programmi\R\rw1031\bin

If I type Rcmd SHLIB prova.c (which works in my Linux box), I get:

make: /bin/sh.exe: Command not found 
make: *** [libR] Error 127

What did I do wrong?

Thanks,

Marco.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20011021/04e5fc00/attachment.html

From ligges at statistik.uni-dortmund.de  Sun Oct 21 21:37:56 2001
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Sun, 21 Oct 2001 21:37:56 +0200
Subject: [R] Request information on R-package
References: <C1256AEC.003874D5.00@abb-chkra-pass1.kra.ch.abb.com>
Message-ID: <3BD32414.7FB74874@statistik.uni-dortmund.de>

guido.schreurs at power.alstom.com wrote:
> 
> Dear sir,mrs,ms,
> 
> I would like to get some more information about the R- program. I am seeking a
> tool to calculate non-linear multivariate regression functions, this should be
> programmed in C++(Windows-based). My question is if R can calculate the function
> coefficients using regression functions and if the code for doing this is
> available in C++ format.

A good point to start are the packages nls for Nonlinear Rregression and
nlme (Nonlinear Mixed-Effects Models).

Underlying code is written in C (not C++) or Fortran.
You will find the code in the sources of the packages (available on
CRAN; also the windows binaries are available on CRAN.).

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ligges at statistik.uni-dortmund.de  Sun Oct 21 22:00:04 2001
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Sun, 21 Oct 2001 22:00:04 +0200
Subject: [R] Animating a persp plot: non-constant scaling?
References: <01102013203000.02502@ewilliams.ucsd.edu>
Message-ID: <3BD32944.A7A6E761@statistik.uni-dortmund.de>

Elliot Williams wrote:
> 
> Hi all,
> 
> I'm making an animation of a rotating persp plot of some data.  It's easy,
> really:  I just plot the persp in a loop over the theta parameter, saving
> each plot, and then chain them together with ImageMagick (as suggested on
> Paul Johnson's R-tips page).
> 
> But...  when you run the animation, because each graph is individually
> re-scaled, the image is not the same size in each frame.  That is, when the
> bounding box is facing you (theta=0), the plotted image is bigger than when
> it's at 45 degrees to the front.
> 
> Here's a simple example:
> 
> thetas <- seq(0,360,10)
> for (i in 1:36){
>         png(paste("image", "_", i, ".png", sep = ""))
>         persp(outer(seq(0.1,1,.01),seq(0.2,1,.01), beta), theta=thetas[i])
>         dev.off()
> }
> 
> then rename the files (1 -> 01) so that they're in order
> (is there a clever way around doing this from within R?),

Yes:
 paste("image", "_", formatC(i, width=2, flag="0"), ".png", sep = "")


> then animate with a command similar (on Linux) to:
> 
> (bash)$ convert -delay 10 -loop 5 image*.png animated.gif
> 
> Then open it up with something that likes animated gifs (I use a browser).
> See how it wobbles?  Any clues?

It "wobbles" because of the "intelligent scaling" that R does.
I think there is no easy solution for your request. What you can try is
to set some graphical parameters, but I am afraid that wouldn't result
in an absolute non-wobbling movie. 
Maybe ggobi or another software like that can do the trick better than
R?

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Sun Oct 21 22:07:26 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Sun, 21 Oct 2001 13:07:26 -0700 (PDT)
Subject: [R] generating a gamma random variable
In-Reply-To: <Pine.LNX.4.33.0110202236430.11629-100000@Chrestomanci>
Message-ID: <Pine.A41.4.33.0110211251340.26624-100000@homer37.u.washington.edu>

On Sun, 21 Oct 2001, Faheem Mitha wrote:

>
> Dear R People,
>
> This question has nothing to do with R directly, but it is a simulation
> question. I need to generate a random variable distributed as
> gamma(\alpha,\beta), with the additional proviso that it must be a
> function of random variable(s) which do not depend on \alpha, \beta. In
> this case, I have \alpha = (T-1)/2, where T is a positive integer.
>
> So, it seems reasonable to first simulate from a chi-squared distribution
> with T-1 degrees of freedom. Then multiply by the appropriate scale
> factor.

Or simulate from a gamma (using rgamma()) and multiply

> There seem to be at least two different ways to simulate from a
> chi-squared distribution with n degrees of freedom.
>
> 1) Add together the sum of squares of n standard normal random variates.
>
> 2) Adding together n/2 independent exponential (mean 2) variates or
> (n-1)/2 independent exponential variates plus a standard normal, depending
> whether n is even or odd respectively.
>
> Method 2) involves simulating roughly half as many random variates, but I
> am wondering if it is really more efficient. How does simulating from an
> exponential distribution compare in "expense" to simulating from a
> standard normal?

Both 1 and 2 are more expensive than rchisq() or rgamma(), at least if T
is large. A simple experiment shows that rnorm takes about 2-3 times as
long as rexp, but that 10^6 of them still only takes a few seconds.

In general the answer to the question "Which is quicker?" is "Try it and
see" (and the most common result is "It doesn't matter").


> I'm wondering whether this would be the best way. Does anyone else have a
> better idea? One minor downside of the above method is that it requires
> using a varying number (depending on T) of random variables, to obtain one
> random variate. It would be preferable if this number was fixed (ideally
> 1).
>
> One more question: how does one debug such an algorithm once coded up? Ie.
> what is an efficient way of testing whether some random variates are
> indeed distributed as Gamma(\alpha,\beta) for some \alpha, \beta?
>

You can obviously start by checking the mean, variance and perhaps a few
more moments.

One more general possibility is to use the large deviation bound used in
checking the built-in generators, in tests/p-r-random-tests.R.  The
empirical CDF F_n from a sample of size n and the true CDF F are related by
   P(sup | F_n - F | > t) < 2 exp(-2nt^2)

If you get a large enough sample n this should detect any error in the
distribution (provided you have F computed correctly). However, AFAIK this
test has never actually detected an error in any of our random number
generators so I don't know how useful it is in practice.

If there are special cases of your simulation where you know the correct
answer this can also help with checking.


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From garbade at psy.uni-muenchen.de  Mon Oct 22 12:17:21 2001
From: garbade at psy.uni-muenchen.de (Sven Garbade)
Date: Mon, 22 Oct 2001 12:17:21 +0200
Subject: [R] OT: compare several graphs
Message-ID: <3BD3F231.DC7174D2@psy.uni-muenchen.de>

Hi all,

this is OT, but maybe someone can give me a clue. I've got data from eye
tracker experiments (750 data points). These figures show how the data
lock like


|**  *    *****     |***     ******
|  ** ****          |   *   *
|                   |    * *
|                   |     *
|--------------     |---------------

Y axes display velocity, x axes display time, * are the data points. My
question is if there is a method to compare these graphs statistical and
decide if they are different from each other or not. Maybe I can divide
the x axes into several intervals and compare the means?

Thanks for any suggestions,
Sven
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Elena.Moltchanova at ktl.fi  Mon Oct 22 13:44:10 2001
From: Elena.Moltchanova at ktl.fi (Elena Moltchanova)
Date: Mon, 22 Oct 2001 14:44:10 +0300
Subject: [R] statistics for ragged arrays: loop to vector
Message-ID: <3BD4068A.30BDD17C@ktl.fi>

Dear R users,

I am currently writing a MCMC algorithm for spatial Poisson model. One
problem which I need to solve is as follows:

I have a vector X[1:J] which describes characteristics of cells of a
rectangular grid. Further, for each cell I have a list of adjascent
cells adj[] and the vector listing numbed of adjascent cells num[].

Thus if I want to list cells adjascent to cell i I write

begin.n[i]<-cumsum(c(0,adj)[1:i])+1
end.n[i]<-cumsum(adj[1:i])

and if I want to calculate some function, say mean, over the adjascent
cells I write

f.X[i]<-mean(X[begin.n[i]:end.n[i]])

This works fine, but if I need the function to be calculated for each
cell of the field a couple of times for each MCMC iteration, the amount
of time which is used by the loop is too large. My question is: can this
loop be written in some vector form?

Thanks for any comments

Elena Moltchanova
-------------- next part --------------
A non-text attachment was scrubbed...
Name: emor.vcf
Type: text/x-vcard
Size: 270 bytes
Desc: Card for Elena Moltchanova
Url : https://stat.ethz.ch/pipermail/r-help/attachments/20011022/ce59b19a/emor.vcf

From Jan_Svatos at eurotel.cz  Mon Oct 22 15:30:07 2001
From: Jan_Svatos at eurotel.cz (Jan_Svatos@eurotel.cz)
Date: Mon, 22 Oct 2001 15:30:07 +0200
Subject: [R] OT: compare several graphs
Message-ID: <OFBD8EECB0.F87C2BCD-ONC1256AED.0048B88B@eurotel.cz>


Hi Sven,

I am just doing something similar-
my graphs are densities of nonnegative r.v's (with all probability mass at
fixed bounded interval).
Then I compute their "distance" by dist (mva package needed), i.e.

my.dist<-dist(t(cbind(dens1$y, dens2$y)))

(provided that dist1$x==dist2$x, of course)
The problem of course is, how to decide about statistical and/or
"practical" significance of a difference.
I cannot remain myself of some correct statistical test of such hypothesis

H: f_1 \eqiv f_2 (given that at least the family of f_1, f_2 is known) vs.
H_1: f_1 \neq f_2

The Kolmogorov-Smirnov may be not sensitive to some alternatives.

But still the comparison of (appropriate kernel estimates of) densities may
be of some help.

Jan
-------------------------------------------------
designed for _monospaced_ font
-------------------------------------------------
/- Jan Svatos,              Sokolovska 855/225 -/
/- Data Analyst,            Prague 9           -/
/- Eurotel Praha            190 00             -/
/- jan_svatos at eurotel.cz    Czechia            -/
-------------------------------------------------



- - - Original message: - - -
From: owner-r-help at stat.math.ethz.ch
Send: 10/22/01 3:14:11 PM
To: R-Help <r-help at stat.math.ethz.ch>
Subject: [R] OT: compare several graphs

Hi all,

this is OT, but maybe someone can give me a clue. I've got data from eye
tracker experiments (750 data points). These figures show how the data
lock like


|**  *    *****     |***     ******
|  ** ****          |   *   *
|                   |    * *
|                   |     *
|--------------     |---------------

Y axes display velocity, x axes display time, * are the data points. My
question is if there is a method to compare these graphs statistical and
decide if they are different from each other or not. Maybe I can divide
the x axes into several intervals and compare the means?

Thanks for any suggestions,
Sven
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mtaboga at tiscalinet.it  Mon Oct 22 16:20:35 2001
From: mtaboga at tiscalinet.it (Marco Taboga)
Date: Mon, 22 Oct 2001 16:20:35 +0200
Subject: [R] generating a gamma random variable 
Message-ID: <001101c15b04$b7f3f5a0$66250a3e@xxx>

One method to generate a value x taken by a random variable X with a strictly increasing distribution function F(x) is the following:
    - Generate a value y taken by a random variable Y distributed as uniform on [0,1] (every programming language has routines to do this)
    - Evaluate the inverse of the distribution function F at the point y you just generated
    - The number you get x=F^(-1)(y) is the value x you wanted to generate (drawn from the distribution you chose)

This method is nice, but it can be computationally very expensive, since, in most cases (as in the case of a gamma), to compute the inverse of F you have to solve numerically the equation F(x)-y=0 and every iteration of the method you use to solve the equation requires the numerical computation of a definite integral to find F(x).
The reward you get for this great amount of computation is that your random generator for X is as good as the random generator for Y (the uniform random variable).

Sincerely,
Marco.



 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20011022/ed049ac9/attachment.html

From Julie.Francart at epid.ucl.ac.be  Mon Oct 22 16:23:55 2001
From: Julie.Francart at epid.ucl.ac.be (Julie Francart)
Date: Mon, 22 Oct 2001 16:23:55 +0200
Subject: [R] a french manual?
Message-ID: <3BD42BFB.40DBE1FC@epid.ucl.ac.be>

Can you help me? I search a french manual for R language. Is it exist
one? where can I get it ?
Thanks
Julie Franacrt
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From zeileis at ci.tuwien.ac.at  Mon Oct 22 16:35:04 2001
From: zeileis at ci.tuwien.ac.at (Achim Zeileis)
Date: Mon, 22 Oct 2001 16:35:04 +0200
Subject: [R] a french manual?
References: <3BD42BFB.40DBE1FC@epid.ucl.ac.be>
Message-ID: <3BD42E98.8787D3D3@ci.tuwien.ac.at>

Julie Francart wrote:
> 
> Can you help me? I search a french manual for R language. Is it exist
> one? where can I get it ?

There is ``R for Beginners / R pour les d?butants'' by Emmanuel Paradis
on CRAN under "Contributed Documentation".
Z


> Thanks
> Julie Franacrt
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Roger.Bivand at nhh.no  Mon Oct 22 17:17:03 2001
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 22 Oct 2001 17:17:03 +0200 (CEST)
Subject: [R] statistics for ragged arrays: loop to vector
In-Reply-To: <3BD4068A.30BDD17C@ktl.fi>
Message-ID: <Pine.LNX.4.21.0110221713140.19988-100000@reclus.nhh.no>

On Mon, 22 Oct 2001, Elena Moltchanova wrote:

> Dear R users,
> 
> I am currently writing a MCMC algorithm for spatial Poisson model. One
> problem which I need to solve is as follows:
> 
> I have a vector X[1:J] which describes characteristics of cells of a
> rectangular grid. Further, for each cell I have a list of adjascent
> cells adj[] and the vector listing numbed of adjascent cells num[].
> 
> Thus if I want to list cells adjascent to cell i I write
> 
> begin.n[i]<-cumsum(c(0,adj)[1:i])+1
> end.n[i]<-cumsum(adj[1:i])
> 
> and if I want to calculate some function, say mean, over the adjascent
> cells I write
> 
> f.X[i]<-mean(X[begin.n[i]:end.n[i]])
> 
> This works fine, but if I need the function to be calculated for each
> cell of the field a couple of times for each MCMC iteration, the amount
> of time which is used by the loop is too large. My question is: can this
> loop be written in some vector form?
> 
This is what lag.listw() in the sptests package does, using a list of
weights (here 1/(number of neighbours of i)) created by nb2listw() in the
spatial weights manipulation package spweights. You may find the
neighbours list structure used there in function cell2nb() of interest
too. I'd be grateful for feedback on the packages, and to hear more of
your progress with spatial probits.

Roger

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Breiviksveien 40, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 93 93
e-mail: Roger.Bivand at nhh.no
and: Department of Geography and Regional Development, University of
Gdansk, al. Mar. J. Pilsudskiego 46, PL-81 378 Gdynia, Poland.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From laurent at genome.cbs.dtu.dk  Mon Oct 22 17:36:46 2001
From: laurent at genome.cbs.dtu.dk (Laurent Gautier)
Date: Mon, 22 Oct 2001 17:36:46 +0200 (MDT)
Subject: No subject
Message-ID: <Pine.SGI.3.95.1011022173014.19025074B-100000@genome.cbs.dtu.dk>


Dear all,



I may have overlooked something but the following piece of code causes me
trouble:


> a_data.frame(1:4)
> a
  X1.4
1    1
2    2
3    3
4    4
> apply(a,2,cat)
1 2 3 4Error in ans[[1]] : subscript out of bounds
> apply(a,1,cat)
1234NULL


Is this the fact my data.frame has only one dimension ?
(and do I forget somewhere (but where ?) to specify not to 'drop'
dimension or something similar ?)




regards,






Laurent Gautier			CBS, Building 208, DTU
PhD. Student			D-2800 Lyngby,Denmark	
tel: +45 45 25 24 85		http://www.cbs.dtu.dk/laurent

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pflugshaupt at geobot.umnw.ethz.ch  Mon Oct 22 17:47:44 2001
From: pflugshaupt at geobot.umnw.ethz.ch (Kaspar Pflugshaupt)
Date: Mon, 22 Oct 2001 17:47:44 +0200
Subject: [R] OT: compare several graphs
In-Reply-To: <OFBD8EECB0.F87C2BCD-ONC1256AED.0048B88B@eurotel.cz>
Message-ID: <B7FA0C40.BBC6%pflugshaupt@geobot.umnw.ethz.ch>

On 22.10.2001 15:30 Uhr, Jan_Svatos at eurotel.cz wrote:

> 
> Hi Sven,
> 
> I am just doing something similar-
> my graphs are densities of nonnegative r.v's (with all probability mass at
> fixed bounded interval).
> Then I compute their "distance" by dist (mva package needed), i.e.
> 
> my.dist<-dist(t(cbind(dens1$y, dens2$y)))
> 
> (provided that dist1$x==dist2$x, of course)
> The problem of course is, how to decide about statistical and/or
> "practical" significance of a difference.
> I cannot remain myself of some correct statistical test of such hypothesis


I'm not sure if this is statistically sound (comments, please!), but what
about a resampling approach:

  repeat some 1000 times:
     shuffle one column randomly, then compute the distance
  compare your distance to the empirical distribution of
  "resampled distances"

In terms of R code:

  Nreps <- 5000
  dists <- numeric(Nreps)
  for(i in 1:Nreps)
  {
     y2 <- sample(dens2$y)
     dists[i] <- dist(t(cbind(dens1$y, y2)))
  }
  hist(dists)
  quantile(dists, 0.05)


If the original distance is lower than the 5% quantile of the resampled
dists, your two graphs would be "significantly more similar" than "random
graphs". For a two-sided test, you could use

  quantile(dists, c(0.025, 0.975)).

If this makes sense, there is still the problem of the correct distance
measurement. By default, dist() calculates euclidean distances. I'm not sure
it they are appropriate for this kind of data.

As I said, please comment. It's just an idea I had (along the lines of the
"Mantel test").


Cheers

Kaspar Pflugshaupt



-- 

Kaspar Pflugshaupt
Geobotanisches Institut
Zuerichbergstr. 38
CH-8044 Zuerich

Tel. ++41 1 632 43 19
Fax  ++41 1 632 12 15

mailto:pflugshaupt at geobot.umnw.ethz.ch
privat:pflugshaupt at mails.ch
http://www.geobot.umnw.ethz.ch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bongo at havana.biochem.dal.ca  Mon Oct 22 18:45:43 2001
From: bongo at havana.biochem.dal.ca (Christian Blouin)
Date: Mon, 22 Oct 2001 12:45:43 -0400
Subject: [R] Two questions
Message-ID: <01102212525601.26019@havana.biochem.dal.ca>



	Greetings,

		I have two questions that I could not answer from the
documentation.

	A - ecdf and confidence intervals : Is there a (simple) way to generate
confidence intervals (95%) for a ecdf? 

	B - cross-validation of rpart trees : a colleague is using S to
generate decision tree and mentioned to me the use of cross-validation. Is
this function enabled in R ? if so, how should one proceed to do it?

	Thanks,

	Christian

		
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Mon Oct 22 17:57:41 2001
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 22 Oct 2001 17:57:41 +0200
Subject: [R] apply(*, 2, <NULL returning function>)
In-Reply-To: <Pine.SGI.3.95.1011022173014.19025074B-100000@genome.cbs.dtu.dk>
References: <Pine.SGI.3.95.1011022173014.19025074B-100000@genome.cbs.dtu.dk>
Message-ID: <15316.16885.218059.736454@gargle.gargle.HOWL>

>>>>> "Laurent" == Laurent Gautier <laurent at genome.cbs.dtu.dk> writes:

(without using Subject; PLEASE do)


    Laurent> I may have overlooked something but the following piece of
    Laurent> code causes me trouble:


    >> a_data.frame(1:4)
    >> a
    Laurent> X1.4
    Laurent> 1    1
    Laurent> 2    2
    Laurent> 3    3
    Laurent> 4    4
    >> apply(a,2,cat)
    Laurent> 1 2 3 4Error in ans[[1]] : subscript out of bounds
    >> apply(a,1,cat)
    Laurent> 1234NULL

    Laurent> Is this the fact my data.frame has only one dimension ?
    Laurent> (and do I forget somewhere (but where ?) to specify not to 'drop'
    Laurent> dimension or something similar ?)

No,
it is because  apply(*, 2, Foobar)  doesn't work when the function Foobar()
only returns NULL :

 > apply(cbind(1:4), 2, function(...)NULL)
 Error in ans[[1]] : subscript out of bounds

 > apply(data.frame(1:4), 2, function(...)NULL)
 Error in ans[[1]] : subscript out of bounds

 > apply(data.frame(1:4), 1, function(...)NULL)
 NULL

This might be considered a bug, but I don't have time to investigate
further now.


Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From krcabrer at perseus.unalmed.edu.co  Mon Oct 22 18:56:12 2001
From: krcabrer at perseus.unalmed.edu.co (Kenneth Cabrera)
Date: Mon, 22 Oct 2001 11:56:12 -0500
Subject: [R] Dunnett's test
References: <01102212525601.26019@havana.biochem.dal.ca>
Message-ID: <3BD44FAC.44B00E15@perseus.unalmed.edu.co>

Hi dear R users:

I want to know if any body has implemented the
Dunnett's test for the difference between the control
group and other groups.

Or at least where can I find how to build it in R.

Thank you very much

Kenneth Cabrera
Universidad Nacional de Colombia
Sede Medellin
Facultad de Ciencias.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From feldesmanm at pdx.edu  Mon Oct 22 19:01:54 2001
From: feldesmanm at pdx.edu (Marc Feldesman)
Date: Mon, 22 Oct 2001 10:01:54 -0700
Subject: [R] Two questions
In-Reply-To: <01102212525601.26019@havana.biochem.dal.ca>
Message-ID: <5.1.0.14.2.20011022095910.00ab2980@odin.pdx.edu>

At 12:45 PM 10/22/2001 -0400, Christian Blouin wrote:

>         B - cross-validation of rpart trees : a colleague is using S to
>generate decision tree and mentioned to me the use of cross-validation. Is
>this function enabled in R ? if so, how should one proceed to do it?

Well documented in the rpart manuals and rpart help files.  If you are 
using R version 1.30 or higher, under Windows rpart gets installed as part 
of the recommended package distribution.

 >?xpred.rpart

might get you started.

Also

 >?rpart


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Mon Oct 22 19:15:35 2001
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 22 Oct 2001 19:15:35 +0200
Subject: [R] Re: conf.int. for ecdfs {was "Two questions"}
In-Reply-To: <01102212525601.26019@havana.biochem.dal.ca>
References: <01102212525601.26019@havana.biochem.dal.ca>
Message-ID: <15316.21559.93667.448250@gargle.gargle.HOWL>

>>>>> "Christian" == Christian Blouin <bongo at havana.biochem.dal.ca> writes:

    Christian> I have two questions that I could not answer from the
    Christian> documentation.

    Christian> A - ecdf and confidence intervals : Is there a (simple) way
    Christian> to generate confidence intervals (95%) for a ecdf?

About two weeks ago, Kjetil Halvorsen (CC'ed above)
sent me code to just do this, and I have improved on the code a bit
with the idea to incorporate into the stepfun package (part of "standard R").

However, it's content is also linked with the (hidden) pkstwo() function
in ctest's  kolomogorov-smirnov testing.
Also, I think part of this might become an option to ecdf() or plot.ecdf()
rather than the current setup.
Unfortunately, it's not finished for integration into R,
but here is the current code (without help pages) that works quite nicely:

## Fixme: In the following, computing and plotting should be separated

###--> ./ecdf.R plot.ecdf() should get conf.type and conf.int argument!!

ecdf.ksCI <- function(x, main = NULL, sub = NULL,
                      xlab = deparse(substitute(x)), ...)
{
    xlab
    if(is.null(main))
        main <- paste("ecdf(",deparse(substitute(x)),") + 95% K.S. bands",
                      sep="")
    n <- length(x)
    if(is.null(sub))
        sub <- paste("n = ", n)
    ec <- ecdf(x)
    xx <- get("x", envir=environment(ec))# = sort(x)
    yy <- get("y", envir=environment(ec))
    D <- approx.ksD(n)
    yyu <- pmin(yy+D, 1)
    yyl <- pmax(yy-D, 0)
    ecu <- stepfun(xx, c(yyu, 1) )
    ecl <- stepfun(xx, c(yyl, yyl[n]) )

    ## Plots -- all calling  plot.stepfun

    plot(ec, main = main, sub = sub, xlab = xlab)## no "..." here ???  __hmm..__
    plot(ecu, add=TRUE, verticals=TRUE, do.points=FALSE,
         col.hor="red" , col.vert="red", ...)
    plot(ecl, add=TRUE, verticals=TRUE, do.points=FALSE,
         col.hor="red", col.vert="red", ...)
}

approx.ksD <- function(n)
{
    ## approximations for the critical level for Kolmogorov-Smirnov statistic D,
    ## for confidence level 0.95. Taken from Bickel & Doksum, table IX, p.483
    ## and Lienert G.A.(1975) who attributes to Miller,L.H.(1956), JASA
    ifelse(n > 80,
           1.358 /( sqrt(n) + .12 + .11/sqrt(n)),##Bickel&Doksum, table IX,p.483

           splinefun(c(1:9, 10, 15, 10 * 2:8),# from Lienert
                     c(.975,   .84189, .70760, .62394, .56328,# 1:5
                       .51926, .48342, .45427, .43001, .40925,# 6:10
                       .33760, .29408, .24170, .21012,# 15,20,30,40
                       .18841, .17231, .15975, .14960)) (n))
}


###-- Example from Kjetil :

ecdf.ksCI( rchisq(50,3) )

--
Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Oct 22 22:03:37 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 22 Oct 2001 21:03:37 +0100 (BST)
Subject: [R] Bbuilding R on Win2K
In-Reply-To: <OE14vBjNx45W9u1Em4q000030bd@hotmail.com>
Message-ID: <Pine.GSO.4.31.0110222101030.18616-100000@toucan.stats>

1) Why not use the current R-1.3.1?

2) You are not getting the right toolset.  Is the Rtools set first in your
path?

3) BUILD=CYGWIN is not really supported: see the comments in
src/gnuwin32/INSTALL.  Check the portal for up-to-date information.

On Sat, 20 Oct 2001, Neil Osborne wrote:

> Dear all,
>
> I wonder if anyone can help with this challenge. I have recently downloaded
> the R source (R-1.3.0.zip) and its associated buildtools. I have read the
> INSTALL and other related docs. I have modified Makefile (turned of building
> help) and set the BUILD=CYGWIN in MkRules (I believe the documentation
> indicated that these were the variety bundled in the tools.zip file)
>
> However, when I run make, this is what I get
>
> F:\R-1.3.0\src\gnuwin32>make
> mkdir -p ../../bin
> make -C ./fixed
> make[1]: Entering directory `F:/R-1.3.0/src/gnuwin32/fixed'
> sed -e '/^#/d' -e '/Rsockfork/d' -e 's/F77_SUBROUTINE(\(.*\))/  { "\1_",
> \1_},/' -e 's/C_FUNCTION(\(.*\))/{ "\1",        \1 },/' ../../appl/ROU
> TINES > ../FFTab.h
> \1_\",: unexpected EOF while looking for `''
> \1_\",: -c: line 2: syntax error
> make[1]: *** [../FFTab.h] Error 2
> make[1]: Leaving directory `F:/R-1.3.0/src/gnuwin32/fixed'
> make: *** [fixfiles] Error 2
>
>
> I have a windows port of Perl (details below)
>     This is perl, version 5.005_03 built for MSWin32-x86
>
>
> I would be very grateful to any one who could point out what's going wrong,
> and what can be done to correct this issue.
>
> Thanks in advance
>
> PS :
>
> The OS is Windows 2000 (Version 5.00.21950.)
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Tue Oct 23 00:05:22 2001
From: ben at zoo.ufl.edu (Ben Bolker)
Date: Mon, 22 Oct 2001 18:05:22 -0400 (EDT)
Subject: [R] Animating a persp plot: non-constant scaling?
In-Reply-To: <3BD32944.A7A6E761@statistik.uni-dortmund.de>
Message-ID: <Pine.LNX.4.30.0110221801460.7673-100000@bolker.zoo.ufl.edu>


  The only thing that springs to mind is that there's a parameter in
Mathematica graphics that controls this, called (I believe)
SphericalGraphics.  Doesn't help that much for controlling persp, however.
  I'll also point out that I've got the LG3d (LiveGraphics3d interface)
package in slightly better shape; it's available as part of bundle
"bbmisc" from http://www.zoo.ufl.edu/bolker/R/{windows,linux}.  You might
find it useful -- it doesn't do animations (although LiveGraphics3D can),
but it is good for user-controllable display of a 3d object or surface.

  Ben Bolker

On Sun, 21 Oct 2001, Uwe Ligges wrote:

> Elliot Williams wrote:
> >
> > Hi all,
> >
> > I'm making an animation of a rotating persp plot of some data.  It's easy,
> > really:  I just plot the persp in a loop over the theta parameter, saving
> > each plot, and then chain them together with ImageMagick (as suggested on
> > Paul Johnson's R-tips page).
> >
> > But...  when you run the animation, because each graph is individually
> > re-scaled, the image is not the same size in each frame.  That is, when the
> > bounding box is facing you (theta=0), the plotted image is bigger than when
> > it's at 45 degrees to the front.
> >
> > Here's a simple example:
> >
> > thetas <- seq(0,360,10)
> > for (i in 1:36){
> >         png(paste("image", "_", i, ".png", sep = ""))
> >         persp(outer(seq(0.1,1,.01),seq(0.2,1,.01), beta), theta=thetas[i])
> >         dev.off()
> > }
> >
> > then rename the files (1 -> 01) so that they're in order
> > (is there a clever way around doing this from within R?),
>
> Yes:
>  paste("image", "_", formatC(i, width=2, flag="0"), ".png", sep = "")
>
>
> > then animate with a command similar (on Linux) to:
> >
> > (bash)$ convert -delay 10 -loop 5 image*.png animated.gif
> >
> > Then open it up with something that likes animated gifs (I use a browser).
> > See how it wobbles?  Any clues?
>
> It "wobbles" because of the "intelligent scaling" that R does.
> I think there is no easy solution for your request. What you can try is
> to set some graphical parameters, but I am afraid that wouldn't result
> in an absolute non-wobbling movie.
> Maybe ggobi or another software like that can do the trick better than
> R?
>
> Uwe Ligges
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker at zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetilh at umsanet.edu.bo  Tue Oct 23 00:06:01 2001
From: kjetilh at umsanet.edu.bo (kjetil halvorsen)
Date: Mon, 22 Oct 2001 18:06:01 -0400
Subject: [R] Dunnett's test
References: <01102212525601.26019@havana.biochem.dal.ca> <3BD44FAC.44B00E15@perseus.unalmed.edu.co>
Message-ID: <3BD49849.AEF69F98@umsanet.edu.bo>

> help.search("dunnett")
No help files found with alias or title matching `dunnett'

so it seems like nobody have implemented this.

for how to build it in R, see the " writing R extensions manual", and
look in ctest for examples of how to use 
"htest". For writing dunnett.test, it will be a good idea to return the
result as a list with class "htest". Then the printing of the result
will be done
automatically.

Kjetil Halvorsen

Kenneth Cabrera wrote:
> 
> Hi dear R users:
> 
> I want to know if any body has implemented the
> Dunnett's test for the difference between the control
> group and other groups.
> 
> Or at least where can I find how to build it in R.
> 
> Thank you very much
> 
> Kenneth Cabrera
> Universidad Nacional de Colombia
> Sede Medellin
> Facultad de Ciencias.
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Tue Oct 23 01:03:07 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Oct 2001 01:03:07 +0200
Subject: [R] Dunnett's test
In-Reply-To: <3BD49849.AEF69F98@umsanet.edu.bo>
References: <01102212525601.26019@havana.biochem.dal.ca>
	<3BD44FAC.44B00E15@perseus.unalmed.edu.co>
	<3BD49849.AEF69F98@umsanet.edu.bo>
Message-ID: <x27ktnffbo.fsf@blueberry.kubism.ku.dk>

kjetil halvorsen <kjetilh at umsanet.edu.bo> writes:

> > help.search("dunnett")
> No help files found with alias or title matching `dunnett'
> 
> so it seems like nobody have implemented this.
> 
> for how to build it in R, see the " writing R extensions manual", and
> look in ctest for examples of how to use 
> "htest". For writing dunnett.test, it will be a good idea to return the
> result as a list with class "htest". Then the printing of the result
> will be done
> automatically.
> 
> Kjetil Halvorsen

The real obstacle would seem to be the distribution of the many-one
t-statistic. This doesn't seem to be available from any of the
standard subroutine sources (apstat and toms). Miller's book cites the
tables from a 1964 paper by Dunnett - I browsed through it earlier
today and it seemed that the density can be calculated explicitly, but
you need numerical integration to get the CDF. Anyone have a handful
of spare evenings to code this up?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From loesljrg at accucom.net  Tue Oct 23 02:17:31 2001
From: loesljrg at accucom.net (JRG)
Date: Mon, 22 Oct 2001 20:17:31 -0400
Subject: [R] Dunnett's test
In-Reply-To: <x27ktnffbo.fsf@blueberry.kubism.ku.dk>
References: <3BD49849.AEF69F98@umsanet.edu.bo>
Message-ID: <B0002476125@netserv1.accucom.net>

To:             	kjetilh at umsanet.edu.bo
Copies to:      	Kenneth Cabrera <krcabrer at perseus.unalmed.edu.co>,
       	r-help at stat.math.ethz.ch
Subject:        	Re: [R] Dunnett's test
From:           	Peter Dalgaard BSA <p.dalgaard at biostat.ku.dk>
Date sent:      	23 Oct 2001 01:03:07 +0200

> kjetil halvorsen <kjetilh at umsanet.edu.bo> writes:
> 
> > > help.search("dunnett")
> > No help files found with alias or title matching `dunnett'
> > 
> > so it seems like nobody have implemented this.
> > 
> > for how to build it in R, see the " writing R extensions manual", and
> > look in ctest for examples of how to use 
> > "htest". For writing dunnett.test, it will be a good idea to return the
> > result as a list with class "htest". Then the printing of the result
> > will be done
> > automatically.
> > 
> > Kjetil Halvorsen
> 
> The real obstacle would seem to be the distribution of the many-one
> t-statistic. This doesn't seem to be available from any of the
> standard subroutine sources (apstat and toms). Miller's book cites the
> tables from a 1964 paper by Dunnett - I browsed through it earlier
> today and it seemed that the density can be calculated explicitly, but
> you need numerical integration to get the CDF. Anyone have a handful
> of spare evenings to code this up?
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  


The distribution in question is a certain type of multivariate t.  
Dunnett himself provided FORTRAN code for calculating quantiles of 
that distribution, in _Applied Statistics_ (1989).  [It's Algorithm 
AS251.1.].  My copy of the code (downloaded from StatLib, I think) 
also has a simple driver/demo program by Dunnett, dated 
10Apr1995.

---JRG


John R. Gleason

Syracuse University
430 Huntington Hall                      Voice:   315-443-3107
Syracuse, NY 13244-2340  USA             FAX:     315-443-4085

PGP public key at keyservers
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bwheeler at echip.com  Tue Oct 23 05:08:20 2001
From: bwheeler at echip.com (Bob Wheeler)
Date: Mon, 22 Oct 2001 23:08:20 -0400
Subject: [R] Dunnett's test
References: <01102212525601.26019@havana.biochem.dal.ca>
		<3BD44FAC.44B00E15@perseus.unalmed.edu.co>
		<3BD49849.AEF69F98@umsanet.edu.bo> <x27ktnffbo.fsf@blueberry.kubism.ku.dk>
Message-ID: <3BD4DF24.C0DBA61E@echip.com>

Hsu gives Fortran routines for the critical
values. See http://www.stat.ohio-state.edu/~jch/

Peter Dalgaard BSA wrote:
> 
> kjetil halvorsen <kjetilh at umsanet.edu.bo> writes:
> 
> > > help.search("dunnett")
> > No help files found with alias or title matching `dunnett'
> >
> > so it seems like nobody have implemented this.
> >
> > for how to build it in R, see the " writing R extensions manual", and
> > look in ctest for examples of how to use
> > "htest". For writing dunnett.test, it will be a good idea to return the
> > result as a list with class "htest". Then the printing of the result
> > will be done
> > automatically.
> >
> > Kjetil Halvorsen
> 
> The real obstacle would seem to be the distribution of the many-one
> t-statistic. This doesn't seem to be available from any of the
> standard subroutine sources (apstat and toms). Miller's book cites the
> tables from a 1964 paper by Dunnett - I browsed through it earlier
> today and it seemed that the density can be calculated explicitly, but
> you need numerical integration to get the CDF. Anyone have a handful
> of spare evenings to code this up?
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Bob Wheeler --- (Reply to: bwheeler at echip.com)
        ECHIP, Inc. --- (302) 239-6620, voice and
FAX
           724 Yorklyn Rd., Hockessin, DE 19707
              Randomness comes in bunches
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ross at turing.une.edu.au  Tue Oct 23 07:29:32 2001
From: ross at turing.une.edu.au (Ross Darnell)
Date: 23 Oct 2001 15:29:32 +1000
Subject: [R] Rows function in nlme package
Message-ID: <x85zo6iapqb.fsf@turing.une.edu.au>


The Rows function which is called from plot.compareFits in the nlme package
is not found.

> plot(compareFits(coef(bp.model3),coef(bp.model3M)))
Error in plot.compareFits(compareFits(coef(bp.model3), coef(bp.model3M))) : 
	couldn't find function "Rows"
> 

Can I find it elswhere? Have I missed a required package?


Thanks

Ross Darnell

> library(help=nlme)
nlme            Linear and nonlinear mixed effects models

Description:

Package: nlme
Version: 3.1-17
Date: 2001/08/26
Priority: recommended
Title: Linear and nonlinear mixed effects models
Author: Jose Pinheiro <jcp at research.bell-labs.com>,
        Douglas Bates <bates at stat.wisc.edu>,
        Saikat DebRoy <saikat at stat.wisc.edu>, and
        Deepayan Sarkar <deepayan at stat.wisc.edu> 
Maintainer: Douglas Bates <bates at stat.wisc.edu>
Description: Fit and compare Gaussian linear and nonlinear mixed-effects models.
Depends: nls, R(>= 1.3.0)
License: GPL version 2 or later
Built: R 1.3.0; i686-pc-linux-gnu; Fri Aug 31 17:45:56 CDT 2001


> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    3.1              
year     2001             
month    08               
day      31               
language R                
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Torsten.Hothorn at rzmail.uni-erlangen.de  Tue Oct 23 08:58:36 2001
From: Torsten.Hothorn at rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Tue, 23 Oct 2001 08:58:36 +0200 (MEST)
Subject: [R] Dunnett's test
In-Reply-To: <B0002476125@netserv1.accucom.net>
Message-ID: <Pine.LNX.4.21.0110230857140.25311-100000@artemis.imbe.med.uni-erlangen.de>

> > The real obstacle would seem to be the distribution of the many-one
> > t-statistic. This doesn't seem to be available from any of the
> > standard subroutine sources (apstat and toms). Miller's book cites the
> > tables from a 1964 paper by Dunnett - I browsed through it earlier
> > today and it seemed that the density can be calculated explicitly, but
> > you need numerical integration to get the CDF. Anyone have a handful
> > of spare evenings to code this up?
> > 
> > -- 
> >    O__  ---- Peter Dalgaard             Blegdamsvej 3  
> 
> 
> The distribution in question is a certain type of multivariate t.  
> Dunnett himself provided FORTRAN code for calculating quantiles of 
> that distribution, in _Applied Statistics_ (1989).  [It's Algorithm 
> AS251.1.].  My copy of the code (downloaded from StatLib, I think) 
> also has a simple driver/demo program by Dunnett, dated 
> 10Apr1995.

the multivariate t distribution is available in package mvtnorm (based on
the work by Genz & Bretz)

Torsten


> 
> ---JRG
> 
> 
> John R. Gleason
> 
> Syracuse University
> 430 Huntington Hall                      Voice:   315-443-3107
> Syracuse, NY 13244-2340  USA             FAX:     315-443-4085
> 
> PGP public key at keyservers
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Jan_Svatos at eurotel.cz  Tue Oct 23 09:50:13 2001
From: Jan_Svatos at eurotel.cz (Jan_Svatos@eurotel.cz)
Date: Tue, 23 Oct 2001 09:50:13 +0200
Subject: [R] OT: compare several graphs
Message-ID: <OF9629F59A.4180E284-ONC1256AEE.00265C57@eurotel.cz>



I am not sure too, if method I proposed is statistically sound
(probably not, as the way the density is estimated depends on chosen
kernel, bandwidth,...
and I had not do any "optimization" of this kind).

dist() and Euclidean distance: Yes, I am not sure, if use of Euclidean
distance is appropriate,
probably weighted distance (with weights defined by theoretical density, if
available) would be better.

The resample approach is interesting and for testing is definitely better
than plain Euclidean distance I proposed.
(My use of distances was motivated only to compare the magnitude of
differences as I tried to decide,
what profiles/graphs are more/less similar to given "typical" profile, and
no testing was involved).
OTOH, this test would probably not be sensitive to shift/location
alternatives, as I have checked experimentally.

Thanks,
Jan


>
>Jan Svatos
>
>>
>> Hi Sven,
>>
>> I am just doing something similar-
>> my graphs are densities of nonnegative r.v's (with all probability mass
at
>> fixed bounded interval).
>> Then I compute their "distance" by dist (mva package needed), i.e.
>>
>> my.dist<-dist(t(cbind(dens1$y, dens2$y)))
>>
>> (provided that dist1$x==dist2$x, of course)
>> The problem of course is, how to decide about statistical and/or
>> "practical" significance of a difference.
>> I cannot remain myself of some correct statistical test of such
hypothesis
>


>Kaspar Pflugshaupt:
>
>I'm not sure if this is statistically sound (comments, please!), but what
>about a resampling approach:
>
>  repeat some 1000 times:
>     shuffle one column randomly, then compute the distance
>  compare your distance to the empirical distribution of
>  "resampled distances"
>
>In terms of R code:
>
>  Nreps <- 5000
>  dists <- numeric(Nreps)
>  for(i in 1:Nreps)
>  {
>     y2 <- sample(dens2$y)
>     dists[i] <- dist(t(cbind(dens1$y, y2)))
>  }
>  hist(dists)
>  quantile(dists, 0.05)
>
>
>If the original distance is lower than the 5% quantile of the resampled
>dists, your two graphs would be "significantly more similar" than "random
>graphs". For a two-sided test, you could use
>
>  quantile(dists, c(0.025, 0.975)).
>
>If this makes sense, there is still the problem of the correct distance
>measurement. By default, dist() calculates euclidean distances. I'm not
sure
>it they are appropriate for this kind of data.
>
>As I said, please comment. It's just an idea I had (along the lines of the
>"Mantel test").
>
>
>Cheers
>
>Kaspar Pflugshaupt
>
>


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wsi at gcal.ac.uk  Tue Oct 23 10:10:43 2001
From: wsi at gcal.ac.uk (Bill Simpson)
Date: Tue, 23 Oct 2001 09:10:43 +0100 (BST)
Subject: [R] OT: compare several graphs
In-Reply-To: <B7FA0C40.BBC6%pflugshaupt@geobot.umnw.ethz.ch>
Message-ID: <Pine.LNX.4.10.10110230908030.3504-100000@localhost.localdomain>



On Mon, 22 Oct 2001, Kaspar Pflugshaupt wrote:

> On 22.10.2001 15:30 Uhr, Jan_Svatos at eurotel.cz wrote:
> 
> > 
> > Hi Sven,
> > 
> > I am just doing something similar-
> > my graphs are densities of nonnegative r.v's (with all probability mass at
> > fixed bounded interval).
> > Then I compute their "distance" by dist (mva package needed), i.e.
> > 
> > my.dist<-dist(t(cbind(dens1$y, dens2$y)))
> > 
> > (provided that dist1$x==dist2$x, of course)
> > The problem of course is, how to decide about statistical and/or
> > "practical" significance of a difference.
> > I cannot remain myself of some correct statistical test of such hypothesis
> 
> 
> I'm not sure if this is statistically sound (comments, please!), but what
> about a resampling approach:
As I told Sven directly, the tricky part about his data is that he has
time series. So he needs to take into account the correlated errors. But
nlme and Jim Lindsay's libraries will handle nonlinear models with
correlated errors.

Your suggestion doesn't take the correlated errors into account.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From garbade at psy.uni-muenchen.de  Tue Oct 23 10:21:22 2001
From: garbade at psy.uni-muenchen.de (Sven Garbade)
Date: Tue, 23 Oct 2001 10:21:22 +0200
Subject: [R] OT: compare several graphs
References: <B7FA0C40.BBC6%pflugshaupt@geobot.umnw.ethz.ch>
Message-ID: <3BD52882.6641CF52@psy.uni-muenchen.de>

This sounds interesting. But this tests if the observed data differs
from a random sample. My question is if the observed data differs from
each other.

By, Sven

Kaspar Pflugshaupt wrote:
> 
> On 22.10.2001 15:30 Uhr, Jan_Svatos at eurotel.cz wrote:
> 
> >
> > Hi Sven,
> >
> > I am just doing something similar-
> > my graphs are densities of nonnegative r.v's (with all probability mass at
> > fixed bounded interval).
> > Then I compute their "distance" by dist (mva package needed), i.e.
> >
> > my.dist<-dist(t(cbind(dens1$y, dens2$y)))
> >
> > (provided that dist1$x==dist2$x, of course)
> > The problem of course is, how to decide about statistical and/or
> > "practical" significance of a difference.
> > I cannot remain myself of some correct statistical test of such hypothesis
> 
> I'm not sure if this is statistically sound (comments, please!), but what
> about a resampling approach:
> 
>   repeat some 1000 times:
>      shuffle one column randomly, then compute the distance
>   compare your distance to the empirical distribution of
>   "resampled distances"
> 
> In terms of R code:
> 
>   Nreps <- 5000
>   dists <- numeric(Nreps)
>   for(i in 1:Nreps)
>   {
>      y2 <- sample(dens2$y)
>      dists[i] <- dist(t(cbind(dens1$y, y2)))
>   }
>   hist(dists)
>   quantile(dists, 0.05)
> 
> If the original distance is lower than the 5% quantile of the resampled
> dists, your two graphs would be "significantly more similar" than "random
> graphs". For a two-sided test, you could use
> 
>   quantile(dists, c(0.025, 0.975)).
> 
> If this makes sense, there is still the problem of the correct distance
> measurement. By default, dist() calculates euclidean distances. I'm not sure
> it they are appropriate for this kind of data.
> 
> As I said, please comment. It's just an idea I had (along the lines of the
> "Mantel test").
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From J.Sobieszek at elka.pw.edu.pl  Tue Oct 23 10:47:16 2001
From: J.Sobieszek at elka.pw.edu.pl (J.Sobieszek@elka.pw.edu.pl)
Date: Tue, 23 Oct 2001 10:47:16 +0200 (MET DST)
Subject: [R] summary of aov fit on a contrast basis
Message-ID: <Pine.SOL.4.30.0110231046290.27283-200000@mion.elka.pw.edu.pl>

Hello,

In a book (David W. Stockburger, "Multivariate Statistics: Concepts,
Models, and Applications", chapter 12 "Contrasts, Special and
Otherwise", available online at http://www.psychstat.smsu.edu/multibook)
I've found some examples of doing analysis of variance on a contrast
basis.

I attach my solution (in R, the book uses SPSS) to this problem.

Am I computing the same thing, and is there a simpler way of doing that?

I would greatly appreciate any comments.

Thanks,

Jarek
-------------- next part --------------
# the data

x <- data.frame(G = factor(c(rep(1, 3), rep(2, 3), rep(3, 3), rep(4, 3), rep(5, 3), rep(6, 3))), X = c(1, 2, 3, 5, 6, 7, 9, 10, 11, 1, 2, 3, 1, 2, 3, 1, 2, 3))

# model matrix using contrasts:
# c0:  1  1  1  1  1  1
# c1:  2  2 -1 -1 -1 -1
# c2:  0  0  3 -1 -1 -1
# c3:  1 -1  0  0  0  0
# c4:  0  0  0 -2  1  1
# c5:  0  0  0  0  1 -1

CG <- matrix(c(rep(2, 6), rep(-1, 12), rep(0, 6), rep(3, 3), rep(-1, 9), rep(1, 3), rep(-1, 3), rep(0, 21), rep(-2, 3), rep(1, 6), rep(0, 12), rep(1, 3), rep(-1, 3)), ncol = 5, nrow = 18)

# fit the aov model (intercept instead of c0, to stop printing of c0's aov)

x.aov <- aov(x$X ~ CG[,1] + CG[,2] + CG[,3] + CG[,4] + CG[,5], x = T)

# display summary

summary(x.aov)

# check model matrix

x.aov$x

From olivier.martin at inrialpes.fr  Tue Oct 23 11:27:08 2001
From: olivier.martin at inrialpes.fr (Olivier Martin)
Date: Tue, 23 Oct 2001 11:27:08 +0200
Subject: [R] plot a dendogram
Message-ID: <3BD537EC.11F841E0@inrialpes.fr>

Hi all,

My problem concerns cluster dendogram.
For example, i obtain :
h<-hclust(mat,method="ward").
I can plot the dendogram with:
plot.hclust(h)

This is my questions:
1- I would like to cut the tree and only display the part for which
     h$height is greater than 20 for example.

2- I would like to plot the dendogram for one class. More precisely,
suppose that i
     have two classes for my classification
     How can i plot the dendograms for my two classes.


I tried to use the tree libarary but with no success.
Could you help me.
Best regards,
Olivier


--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
Olivier MARTIN
PhD student                  phone: (33) 04 76 61 53 55
Projet IS2                               06 08 67 93 42
INRIA Rhone-Alpes            fax  : (33) 04 76 61 54 77
655, Av. de l'Europe
Montbonnot                   e-mail:olivier.martin at inrialpes.fr
38334 Saint Ismier cedex
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-


-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20011023/2c70b58b/attachment.html

From ross at turing.une.edu.au  Tue Oct 23 11:42:32 2001
From: ross at turing.une.edu.au (Ross Darnell)
Date: 23 Oct 2001 19:42:32 +1000
Subject: [R] Rows function in nlme package
In-Reply-To: Ross Darnell's message of "23 Oct 2001 15:29:32 +1000"
References: <x85zo6iapqb.fsf@turing.une.edu.au>
Message-ID: <x85u1wqae0n.fsf@turing.une.edu.au>

Ross Darnell <ross at turing.une.edu.au> writes:

> The Rows function which is called from plot.compareFits in the nlme package
> is not found.
> 
> > plot(compareFits(coef(bp.model3),coef(bp.model3M)))
> Error in plot.compareFits(compareFits(coef(bp.model3), coef(bp.model3M))) : 
> 	couldn't find function "Rows"
> > 
> 
> Can I find it elswhere? Have I missed a required package?
> 

[...]

After further hunting I realise  this is probably part of the "Trellis" 
package that is seem being brewed.

Sorry to answer my own query.

Ross Darnell


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Elena.Moltchanova at ktl.fi  Tue Oct 23 14:35:17 2001
From: Elena.Moltchanova at ktl.fi (Elena Moltchanova)
Date: Tue, 23 Oct 2001 15:35:17 +0300
Subject: [R] loading packages
Message-ID: <3BD56404.71B9BA90@ktl.fi>

Thanks to Roger for pointing out the packages spweights and sptests to
me. I believe they will be quiet useful in my work. But... I can't get
them to work!

Firstly, I realised that a newer version of R is available. I have now
downloaded and installed it. When I try to 'install packages from CRAN'
I get:

trying URL `http://cran.r-project.org/bin/windows/contrib/PACKAGES'
unable to connect to 'cran.r-project.org'.
Error in download.file(url = paste(contriburl, "PACKAGES", sep = "/"),
:
        cannot open URL
`http://cran.r-project.org/bin/windows/contrib/PACKAGES'

although my Netscape has no problems locating it.

Whan I unzip the files to the library-subdirectory the command

library(spweights)

results in

Warning message:
Package  `spweights' contains no R code in: library(pkg, character.only
= TRUE)

although library(help=spweights) produces a window with the desired
information.

I cannot use 'install package from local zip.-file' because the packages
are in .tar.gz-format.

Please tell me what am I missing here?

Best regards,

    Elena Moltchanova

-------------- next part --------------
A non-text attachment was scrubbed...
Name: emor.vcf
Type: text/x-vcard
Size: 270 bytes
Desc: Card for Elena Moltchanova
Url : https://stat.ethz.ch/pipermail/r-help/attachments/20011023/6490d1b3/emor.vcf

From jfox at mcmaster.ca  Tue Oct 23 14:43:47 2001
From: jfox at mcmaster.ca (John Fox)
Date: Tue, 23 Oct 2001 08:43:47 -0400
Subject: [R] summary of aov fit on a contrast basis
In-Reply-To: <Pine.SOL.4.30.0110231046290.27283-200000@mion.elka.pw.edu.
 pl>
Message-ID: <5.1.0.14.2.20011023083421.01d610e8@mcmail.cis.mcmaster.ca>

Dear Jarek,

There are probably other ways to do this, but one way is to assign the 
contrasts to the factor; using the data in your data frame x:

     > attach(x)
     >
     > con <- matrix(c(2,  2, -1, -1, -1, -1,
     +                 0,  0,  3, -1, -1, -1,
     +                 1, -1,  0,  0,  0,  0,
     +                 0,  0,  0, -2,  1,  1,
     +                 0,  0,  0,  0,  1, -1),
     +                 6, 5)
     >
     > con
         [,1] [,2] [,3] [,4] [,5]
     [1,]    2    0    1    0    0
     [2,]    2    0   -1    0    0
     [3,]   -1    3    0    0    0
     [4,]   -1   -1    0   -2    0
     [5,]   -1   -1    0    1    1
     [6,]   -1   -1    0    1   -1
     >
     > contrasts(G) <- con
     >
     > summary(lm(X ~ G))

     Call:
     lm(formula = X ~ G)

     Residuals:
         Min         1Q     Median         3Q        Max
     -1.000e+00 -1.000e+00 -5.551e-17  1.000e+00  1.000e+00

     Coefficients:
                 Estimate Std. Error  t value Pr(>|t|)
     (Intercept)  4.000e+00  2.357e-01   16.971 9.40e-10
     G1           1.401e-16  1.667e-01 8.41e-16 1.000000
     G2           2.000e+00  1.667e-01   12.000 4.84e-08
     G3          -2.000e+00  4.082e-01   -4.899 0.000367
     G4           2.318e-33  2.357e-01 9.83e-33 1.000000
     G5           1.813e-16  4.082e-01 4.44e-16 1.000000

     Residual standard error: 1 on 12 degrees of freedom
     Multiple R-Squared: 0.9333,     Adjusted R-squared: 0.9056
     F-statistic:  33.6 on 5 and 12 DF,  p-value: 1.179e-006

I used lm rather than aov to get the one-df t-tests for each contrast 
coefficient; these are simply sqrt(F) from your approach. Note that the 
contrast matrix is given by columns.

Is that what you wanted?

  John

At 10:47 AM 10/23/2001 +0200, J.Sobieszek at elka.pw.edu.pl wrote:
>Hello,
>
>In a book (David W. Stockburger, "Multivariate Statistics: Concepts,
>Models, and Applications", chapter 12 "Contrasts, Special and
>Otherwise", available online at http://www.psychstat.smsu.edu/multibook)
>I've found some examples of doing analysis of variance on a contrast
>basis.
>
>I attach my solution (in R, the book uses SPSS) to this problem.
>
>Am I computing the same thing, and is there a simpler way of doing that?
>
>I would greatly appreciate any comments.
>
>Thanks,
>
>Jarek

-----------------------------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario, Canada L8S 4M4
email: jfox at mcmaster.ca
phone: 905-525-9140x23604
web: www.socsci.mcmaster.ca/jfox
-----------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From heberto.ghezzo at mcgill.ca  Tue Oct 23 14:52:14 2001
From: heberto.ghezzo at mcgill.ca (Heberto Ghezzo)
Date: Tue, 23 Oct 2001 08:52:14 -0400
Subject: [R] Dunnett's test
References: <01102212525601.26019@havana.biochem.dal.ca>
	 <3BD44FAC.44B00E15@perseus.unalmed.edu.co> <3BD49849.AEF69F98@umsanet.edu.bo> <x27ktnffbo.fsf@blueberry.kubism.ku.dk>
Message-ID: <3BD567FE.11BFE360@mcgill.ca>

see attachment. I trie to implement it but I am very lousy programmer. . .:-)
Heberto Ghezzo Ph.D.
McGill University
Montreal- Canada

Peter Dalgaard BSA wrote:

> kjetil halvorsen <kjetilh at umsanet.edu.bo> writes:
>
> > > help.search("dunnett")
> > No help files found with alias or title matching `dunnett'
> >
> > so it seems like nobody have implemented this.
> >
> > for how to build it in R, see the " writing R extensions manual", and
> > look in ctest for examples of how to use
> > "htest". For writing dunnett.test, it will be a good idea to return the
> > result as a list with class "htest". Then the printing of the result
> > will be done
> > automatically.
> >
> > Kjetil Halvorsen
>
> The real obstacle would seem to be the distribution of the many-one
> t-statistic. This doesn't seem to be available from any of the
> standard subroutine sources (apstat and toms). Miller's book cites the
> tables from a 1964 paper by Dunnett - I browsed through it earlier
> today and it seemed that the density can be calculated explicitly, but
> you need numerical integration to get the CDF. Anyone have a handful
> of spare evenings to code this up?
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-------------- next part --------------
This file contains:
1. A Readme file provided by Charles Dunnett, the author of AS 251.
2. The published algorithm AS 251 together with the two other AS algorithms
   which it calls (AS 66 and AS 241).
3. A driver program (MVTIN) for either multivariate normal or t.
4. MVSTUD for calculating multivariate t probabilities.
***************************************************************************

Date: Mon, 10 Apr 1995 16:49:10 +0059 (EDT)
From: "Charles W. Dunnett" <dunnett at mcmail.cis.mcmaster.ca>
Subject: Readme for AS251 (extended version incl. multivariate t)

MVTIN is a driver program for computing multivariate normal or t
probability integrals over arbitrary rectangular regions.  The
correlation structure is assumed to be of product form, rho_ij =
b_i x b_j, where -1 < b_i < +1.

It requires the following:-

    1.	 MVNPRD  (published as algorithm AS 251 in Applied
      Statistics (1989), 38: 564-579; see also the correction
      note in Applied Statistics (1993), 42: 709),

    2.	 ALNORM and PPND7 (published as algorithms AS 66 and
      AS 241, respectively, in Applied Statistics, and

    3.	 MVSTUD   (which Studentizes MVNPRD).

Special cases of correlations which are of product form include
the following:-

  a) Equal correlations, rho >= 0.  Then b_i = sqrt(rho), all i.

  b) Multiple comparisons between treatments and a specified
treatment.  Then b_i = 1 / sqrt(1 + n_0/n_i), where n_0 and n_i
are the sample sizes for the specified treatment and i-th
treatment, respectively.

MVTIN computes 

      PROB  =  P{ B(I) < T_I < A(I), for I = 1,...,N }

where (T_1,...,T_N) is a multivariate normal or t random variable
with product correlation structure.  The B(I) may be -infinity or
finite and the A(I) may be finite or +infinity.
 
The program can be used on any mainframe computer (such as a VAX)
which has a Fortran compiler.  A PC can also be used, but the
execution times will be much longer, especially for multivariate t
integrals (unless your PC uses a 486 or faster chip).  Typical
computing times for a multivariate t p-value range from about three
minutes on an IBM/XT with math co-processor to 2.4 seconds on a
486DX2/66 PC.

The first time you use the program, it is recommended that you
specify NDF = 0 (which denotes the multivariate normal case), since
computing times are shorter than for multivariate t.

The accuracy is determined by the value of the parameter EPS, which
has been pre-set to  EPS  =  0.0001.  For increased accuracy, you
may change the value of EPS in the DATA statement of MVTIN to
EPS = 0.00001 (Smaller values than this are not recommended).

EXAMPLES:-

(1) Suppose the problem is to determine g* such that

            P{min(Z1,...,Zk) > g*}

         =  P{Z1 > g*, ... , Zk > g*}   = alpha

where Z1,...,Zk are N(0,1) with equal correlations, rho_ij = 0.5. 
The first prompt you receive is for N and NDF. You enter the
value of k for N, and 0 for NDF (indicating d.f.= infinity).  (At
the end of each problem, the program returns to this prompt for
the next problem.  If there is no further problem, enter 0 0 to
exit from the program.)

The next prompt is to specify the correlation structure.  You are
given three choices: 1) equal correlations, 2) correlations defined
from sample sizes as in b) above, and 3) unequal correlations of
the form rho_ij = b_i x b_j.  For this example, enter 1, followed
by 0.50 when you receive a prompt for rho.

Next you are asked whether you want equal or unequal limits.  Since
all your limits are to be g* to +infinity, you specify equal
limits.  You are also asked whether you want the central or non-
central case: if the latter, you are asked to enter the value(s) of
the non-centrality parameters.  

Then you are prompted to enter the values of INF and the limit(s). 
You enter 0 (to indicate upper 1-sided) followed by a trial value
for g*.

After computing PROB, you have the option of entering new limits to
obtain a new value of PROB, or returning to the beginning for a new
problem.

For example, for k = 5 and rho = 0.50, I found that g* = 0.564
achieved the value alpha = 0.05.

(2)  For the next example, consider a mc/control problem with
sample sizes 11 for the control and 10, 10, 12, 10 and 9 for the
treatment groups.  Here, k = 5 and d.f. = 56.  Suppose the largest
of the t-statistics comparing treatments with the control has the
value 2.50.  You want to determine its two-sided p-value, which is
given by

        p =  1 - P{ |T_1| < 2.5, ... , |T_5| < 2.5 }.

At the prompt for N and NDF, enter: 5  56.

At the prompt for correlation structure: enter 2 to denote it is to
be determined from the sample sizes, followed by the sample sizes
at the next prompt.

At the prompt for equal or unequal limits, enter: 1.

Enter 0 for the central case.

Then for the value of INF and the limits, enter: 2 -2.50 2.50

You should obtain the value PROB = .9375.  This is the probability
for -2.50 < T_i < 2.50 (all i); then p-value = 1-.9375 = .0625.


   Let me know if you encounter problems.  Also, please let me
know if it does not meet your needs in some way, or if you think
of any improvements.
                  Good luck!

                      With best wishes, Charles Dunnett.



* * * * * * * * * * * * * * * * * * * * * * * * * * * * 
Professor Charles W. Dunnett
Dept. of Mathematics and Statistics
McMaster University
Hamilton, Ontario L8S 4K1
Canada.
E-mail: dunnett at mcmaster.ca
TEL: (905) 525-9140 (Extension 27104)
FAX: (905) 522-0935
* * * * * * * * * * * * * * * * * * * * * * * * * * * *


      SUBROUTINE MVNPRD(A, B, BPD, EPS, N, INF, IERC, HINC, PROB, BOUND,
     *  IFAULT)
C
C        ALGORITHM AS 251.1  APPL.STATIST. (1989), VOL.38, NO.3
C
C        FOR A MULTIVARIATE NORMAL VECTOR WITH CORRELATION STRUCTURE
C        DEFINED BY RHO(I,J) = BPD(I) * BPD(J), COMPUTES THE PROBABILITY
C        THAT THE VECTOR FALLS IN A RECTANGLE IN N-SPACE WITH ERROR
C        LESS THAN EPS.
C
      INTEGER NN
      PARAMETER (NN = 50)
      REAL A(*), B(*), BPD(*), ESTT(22), FV(5), FD(5), F1T(22),
     *  F2T(22), F3T(22), G1T(22), G3T(22), PSUM(22), H(NN), HL(NN),
     *  BB(NN)
      INTEGER INF(*), INFT(NN), LDIR(22)
      REAL ZERO, HALF, ONE, TWO, FOUR, SIX, PT1, PT24, ONEP5,
     *  X2880, SMALL, DXMIN, SQRT2, PROB, ERRL, BI, START,
     *  Z, HINC, ADDN, EPS2, EPS1, EPS, ZU, Z2, Z3, Z4, Z5, ZZ,
     *  ERFAC, EL, EL1, BOUND, PART0, PART2, PART3, FUNC0, FUNC2,
     *  FUNCN, WT, CONTRB, DLG, DX, DA, ESTL, ESTR, SUM, EXCESS, ERROR,
     *  PROB1, SAFE
      INTEGER N, IERC, IFAULT, I, NTM, NMAX, LVL, NR, NDIM
      REAL ALNORM, PPND7
      EXTERNAL ALNORM, PPND7
      DATA ZERO, HALF, ONE, TWO, FOUR, SIX /0.0, 0.5, 1.0, 2.0,
     *  4.0, 6.0/
      DATA PT1, PT24, ONEP5, X2880 /0.1, 0.24, 1.5, 2880.0/
      DATA SMALL, DXMIN, SQRT2 /1.0E-10, 0.0000001, 1.41421356237310/
C
C        CHECK FOR INPUT VALUES OUT OF RANGE.
C
      PROB = ZERO
      BOUND = ZERO
      IFAULT = 1
      IF (N .LT. 1 .OR. N .GT. NN) RETURN
      DO 10 I = 1, N
         BI = ABS(BPD(I))
         IFAULT = 2
         IF (BI .GE. ONE) RETURN
         IFAULT = 3
         IF (INF(I) .LT. 0 .OR. INF(I) .GT. 2) RETURN
         IFAULT = 4
         IF (INF(I) .EQ. 2 .AND. A(I) .LE. B(I)) RETURN
   10 CONTINUE
      IFAULT = 0
      PROB = ONE
C
C        CHECK WHETHER ANY BPD(I) = 0.
C
      NDIM = 0
      DO 20 I = 1, N
         IF (BPD(I) .NE. ZERO) THEN
            NDIM = NDIM + 1
            H(NDIM) = A(I)
            HL(NDIM) = B(I)
            BB(NDIM) = BPD(I)
            INFT(NDIM) = INF(I)
         ELSE
C
C        IF ANY BPD(I) = 0, THE CONTRIBUTION TO PROB FOR THAT
C        VARIABLE IS COMPUTED FROM A UNIVARIATE NORMAL.
C
            IF (INF(I) .LT. 1) THEN
               PROB = PROB * (ONE - ALNORM(B(I), .FALSE.))
            ELSE IF (INF(I) .EQ. 1) THEN
               PROB = PROB * ALNORM(A(I), .FALSE.)
            ELSE
               PROB = PROB * (ALNORM(A(I), .FALSE.) -
     *                ALNORM(B(I), .FALSE.))
            END IF
            IF (PROB .LE. SMALL) PROB = ZERO
         END IF
   20 CONTINUE
      IF (NDIM .EQ. 0 .OR. PROB .EQ. ZERO) RETURN
C
C        IF NOT ALL BPD(I) = 0, PROB IS COMPUTED BY SIMPSON'S RULE.
C        BUT FIRST, INITIALIZE THE VARIABLES.
C
      Z = ZERO
      IF (HINC .LE. ZERO) HINC = PT24
      ADDN = -ONE
      DO 30 I = 1, NDIM
         IF (INFT(I) .EQ. 2 .OR.
     *   (INFT(I) .NE. INFT(1) .AND. BB(I) * BB(1) .GT. ZERO) .OR.
     *   (INFT(I) .EQ. INFT(1) .AND. BB(I) * BB(1) .LT. ZERO))
     *       ADDN = ZERO
   30 CONTINUE
C
C        THE VALUE OF ADDN IS TO BE ADDED TO THE PRODUCT EXPRESSIONS IN
C        THE INTEGRAND TO INSURE THAT THE LIMITING VALUE IS ZERO.
C
      PROB1 = ZERO
      NTM = 0
      NMAX = 400
      IF (IERC .EQ. 0) NMAX = NMAX * 2
      CALL PFUNC (Z, H, HL, BB, NDIM, INFT, ADDN, SAFE, FUNC0, NTM,
     *  IERC, PART0)
      EPS2 = EPS * PT1 * HALF
C
C        SET UPPER BOUND ON Z AND APPORTION EPS.
C
      ZU = -PPND7(EPS2, IFAULT) / SQRT2
      IF (IFAULT .NE. 0) THEN
         IFAULT = 6
         RETURN
      END IF
      NR = IFIX(ZU / HINC) + 1
      ERFAC = ONE
      IF (IERC .NE. 0) ERFAC = X2880 / HINC ** 5
      EL = (EPS - EPS2) / FLOAT(NR) * ERFAC
      EL1 = EL
C
C        START COMPUTATIONS FOR THE INTERVAL (Z, Z + HINC).
C
   40 ERROR = ZERO
      LVL = 0
      FV(1) = PART0
      FD(1) = SAFE
      START = Z
      DA = HINC
      Z3 = START + HALF * DA
      CALL PFUNC(Z3, H, HL, BB, NDIM, INFT, ADDN, FD(3), FUNCN, NTM,
     *  IERC, FV(3))
      Z5 = START + DA
      CALL PFUNC(Z5, H, HL, BB, NDIM, INFT, ADDN, FD(5), FUNC2, NTM,
     *  IERC, FV(5))
      PART2 = FV(5)
      SAFE = FD(5)
      WT = DA / SIX
      CONTRB = WT * (FV(1) + FOUR * FV(3) + FV(5))
      DLG = ZERO
      IF (IERC .NE. 0) THEN
         CALL WMAX(FD(1), FD(3), FD(5), DLG)
         IF (DLG .LE. EL) GO TO 90
         DX = DA
         GO TO 60
      END IF
      LVL = 1
      LDIR(LVL) = 2
      PSUM(LVL) = ZERO
C
C        BISECT INTERVAL.  IF IERC = 1, COMPUTE ESTIMATE ON LEFT
C        HALF; IF IERC = 0, ON BOTH HALVES.
C
   50 DX = HALF * DA
      WT = DX / SIX
      Z2 = START + HALF * DX
      CALL PFUNC(Z2, H, HL, BB, NDIM, INFT, ADDN, FD(2), FUNCN, NTM,
     *  IERC,FV(2))
      ESTL = WT * (FV(1) + FOUR * FV(2) + FV(3))
      IF (IERC .EQ. 0) THEN
         Z4 = START + ONEP5 * DX
         CALL PFUNC(Z4, H, HL, BB, NDIM, INFT, ADDN, FD(4), FUNCN,
     *     NTM, IERC, FV(4))
         ESTR = WT * (FV(3) + FOUR * FV(4) + FV(5))
         SUM = ESTL + ESTR
         DLG = ABS(CONTRB - SUM)
         EPS1 = EL / TWO ** (LVL - 1)
         ERRL = DLG
      ELSE
         FV(3) = FV(2)
         FD(3) = FD(2)
         CALL WMAX(FD(1), FD(3), FD(5), DLG)
         ERRL = DLG / TWO ** (5 * LVL)
         SUM = ESTL
         EPS1 = EL * (TWO ** LVL) ** 4
      END IF
C
C        STOP SUBDIVIDING INTERVAL WHEN ACCURACY IS SUFFICIENT,
C        OR IF INTERVAL TOO NARROW OR SUBDIVIDED TOO OFTEN.
C
      IF (DLG .LE. EPS1 .OR. DLG .LT. SMALL) GO TO 70
      IF (IFAULT .EQ. 0 .AND. NTM .GE. NMAX) IFAULT = 5
      IF (ABS(DX) .LE. DXMIN .OR. LVL .GT. 21) IFAULT = 7
      IF (IFAULT .NE. 0) GO TO 70
C
C        RAISE LEVEL.  STORE INFORMATION FOR RIGHT HALF AND APPLY
C        SIMPSON'S RULE TO LEFT HALF.
C
   60 LVL = LVL + 1
      LDIR(LVL) = 1
      F1T(LVL) = FV(3)
      F3T(LVL) = FV(5)
      DA = DX
      FV(5) = FV(3)
      IF (IERC .EQ. 0) THEN
         F2T(LVL) = FV(4)
         ESTT(LVL) = ESTR
         CONTRB = ESTL
         FV(3) = FV(2)
      ELSE
         G1T(LVL) = FD(3)
         G3T(LVL) = FD(5)
         FD(5) = FD(3)
      END IF
      GO TO 50
C
C        ACCEPT APPROXIMATE VALUE FOR INTERVAL.
C        RESTORE SAVED INFORMATION TO PROCESS
C        RIGHT HALF INTERVAL.
C
   70 ERROR = ERROR + ERRL
   80 IF (LDIR(LVL) .EQ. 1) THEN
         PSUM(LVL) = SUM
         LDIR(LVL) = 2
         IF (IERC .EQ. 0) DX = DX * TWO
         START = START + DX
         DA = HINC / TWO ** (LVL - 1)
         FV(1) = F1T(LVL)
         IF (IERC .EQ. 0) THEN
            FV(3) = F2T(LVL)
            CONTRB = ESTT(LVL)
         ELSE
            FV(3) = F3T(LVL)
            FD(1) = G1T(LVL)
            FD(5) = G3T(LVL)
         END IF
         FV(5) = F3T(LVL)
         GO TO 50
      END IF
      SUM = SUM + PSUM(LVL)
      LVL = LVL - 1
      IF (LVL .GT. 0) GO TO 80
      CONTRB = SUM
      LVL = 1
      DLG = ERROR
   90 PROB1 = PROB1 + CONTRB
      BOUND = BOUND + DLG
      EXCESS = EL - DLG
      EL = EL1
      IF (EXCESS .GT. ZERO) EL = EL1 + EXCESS
      IF ((FUNC0 .GT. ZERO .AND. FUNC2 .LE. FUNC0) .OR.
     *    (FUNC0 .LT. ZERO .AND. FUNC2 .GE. FUNC0)) THEN
         ZZ = -SQRT2 * Z5
         PART3 = ABS(FUNC2) * ALNORM(ZZ, .FALSE.) + BOUND / ERFAC
         IF (PART3 .LE. EPS .OR. NTM .GE. NMAX .OR. Z5 .GE. ZU) GOTO 100
      END IF
      Z = Z5
      PART0 = PART2
      FUNC0 = FUNC2
      IF (Z .LT. ZU .AND. NTM .LT. NMAX) GO TO 40
  100 PROB = (PROB1 - ADDN * HALF) * PROB
      BOUND = PART3
      IF (NTM .GE. NMAX .AND. IFAULT .EQ. 0) IFAULT = 5
      IF (BOUND .GT. EPS .AND. IFAULT .EQ. 0) IFAULT = 8
      RETURN
      END
      SUBROUTINE PFUNC(Z, A, B, BPD, N, INF, ADDN, DERIV, FUNCN, NTM,
     *  IERC, RESULT)
C
C        ALGORITHM AS 251.2  APPL.STATIST. (1989), VOL.38, NO.3
C
C
C        COMPUTE FUNCTION IN INTEGRAND AND ITS 4TH DERIVATIVE.
C
      INTEGER NN
      PARAMETER (NN = 50)
      REAL A(*), B(*), BPD(*), FOU(NN), FOU1(4, NN), TMP(4), GOU(NN),
     *  GOU1(4, NN), FF(4), GF(4), TERM(4), GERM(4)
      INTEGER INF(*)
      REAL ZERO, ONE, TWO, THREE, FOUR, SIX, EIGHT, TWELVE, SIXTN,
     *  SMALL, Z, U, U1, U2, BI, HI, HLI, BP, ADDN, DERIV, FUNCN,
     *  RESULT, RSLT1, RSLT2, DEN, SQRT2, SQRTPI, PHI, PHI1, PHI2,
     *  PHI3, PHI4, FRM, GRM
      INTEGER N, NTM, IERC, INFI, I, J, K, M, L, IK
      REAL ALNORM
      EXTERNAL ALNORM
      DATA ZERO, ONE, TWO, THREE, FOUR, SIX, EIGHT, TWELVE, SIXTN,
     *  SMALL /0.0, 1.0, 2.0, 3.0, 4.0, 6.0, 8.0, 12.0, 16.0, 0.1E-12/
      DATA SQRT2, SQRTPI /1.41421356237310, 1.77245385090552/
      DERIV = ZERO
      NTM = NTM + 1
      RSLT1 = ONE
      RSLT2 = ONE
      BI = ONE
      HI = A(1) + ONE
      HLI = B(1) + ONE
      INFI = -1
      DO 60 I = 1, N
         IF (BPD(I) .EQ. BI .AND. A(I) .EQ. HI .AND. B(I) .EQ. HLI .AND.
     *      INF(I) .EQ. INFI) THEN
            FOU(I) = FOU(I - 1)
            GOU(I) = GOU(I - 1)
            DO 10 IK = 1, 4
               FOU1(IK, I) = FOU1(IK, I - 1)
               GOU1(IK, I) = GOU1(IK, I - 1)
   10       CONTINUE
      ELSE
         BI = BPD(I)
         HI = A(I)
         HLI = B(I)
         INFI = INF(I)
         IF (BI .EQ. ZERO) THEN
            IF (INFI .LT. 1) THEN
               FOU(I) = ONE - ALNORM(HLI, .FALSE.)
            ELSE IF (INFI .EQ. 1) THEN
               FOU(I) = ALNORM(HI, .FALSE.)
            ELSE
               FOU(I) = ALNORM(HI, .FALSE.) - ALNORM(HLI, .FALSE.)
            END IF
            GOU(I) = FOU(I)
            DO 20 IK = 1, 4
               FOU1(IK, I) = ZERO
               GOU1(IK, I) = ZERO
   20       CONTINUE
         ELSE
            DEN = SQRT(ONE - BI * BI)
            BP = BI * SQRT2 / DEN
            IF (INFI .LT. 1) THEN
               U = -HLI / DEN + Z * BP
               FOU(I) = ALNORM(U, .FALSE.)
               CALL ASSIGN (U, BP, FOU1(1, I))
               BP = -BP
               U = -HLI / DEN + Z * BP
               GOU(I) = ALNORM(U, .FALSE.)
               CALL ASSIGN (U, BP, GOU1(1, I))
            ELSE IF (INFI .EQ. 1) THEN
               U = HI / DEN + Z * BP
               GOU(I) = ALNORM(U, .FALSE.)
               CALL ASSIGN (U, BP, GOU1(1, I))
               BP = -BP
               U = HI / DEN + Z * BP
               FOU(I) = ALNORM(U, .FALSE.)
               CALL ASSIGN (U, BP, FOU1(1, I))
            ELSE
               U2 = -HLI / DEN + Z * BP
               CALL ASSIGN (U2, BP, FOU1(1, I))
               BP = -BP
               U1 = HI / DEN + Z * BP
               CALL ASSIGN (U1, BP, TMP(1))
               FOU(I) = ALNORM(U1, .FALSE.) + ALNORM(U2, .FALSE.) - ONE
               DO 30 IK = 1, 4
                  FOU1(IK, I) = FOU1(IK, I) + TMP(IK)
   30          CONTINUE
               IF (-HLI .EQ. HI) THEN
                  GOU(I) = FOU(I)
                  DO 40 IK = 1, 4
                     GOU1(IK, I) = FOU1(IK, I)
   40             CONTINUE
               ELSE
                  U2 = -HLI / DEN + Z * BP
                  CALL ASSIGN (U2, BP, GOU1(1, I))
                  BP = -BP
                  U1 = HI / DEN + Z * BP
                  GOU(I) = ALNORM(U1, .FALSE.) + ALNORM(U2, .FALSE.)-ONE
                  CALL ASSIGN (U1, BP, TMP(1))
                  DO 50 IK = 1, 4
                     GOU1(IK, I) = GOU1(IK, I) + TMP(IK)
   50             CONTINUE
               END IF
            END IF
         END IF
      END IF
      RSLT1 = RSLT1 * FOU(I)
      RSLT2 = RSLT2 * GOU(I)
      IF (RSLT1 .LE. SMALL) RSLT1 = ZERO
      IF (RSLT2 .LE. SMALL) RSLT2 = ZERO
   60 CONTINUE
      FUNCN = RSLT1 + RSLT2 + ADDN
      RESULT = FUNCN * EXP(-Z * Z) / SQRTPI
C
C        IF 4TH DERIVATIVE IS NOT WANTED, STOP HERE.
C        OTHERWISE, PROCEED TO COMPUTE 4TH DERIVATIVE.
C
      IF (IERC .EQ. 0) RETURN
      DO 70 IK = 1, 4
         FF(IK) = ZERO
         GF(IK) = ZERO
   70 CONTINUE
      DO 100 I = 1, N
         FRM = ONE
         GRM = ONE
         DO 80 J = 1, N
            IF (J .EQ. 1) GO TO 80
            FRM = FRM * FOU(J)
            GRM = GRM * GOU(J)
            IF (FRM .LE. SMALL) FRM = ZERO
            IF (GRM .LE. SMALL) GRM = ZERO
   80    CONTINUE
         DO 90 IK = 1, 4
            FF(IK) = FF(IK) + FRM * FOU1(IK, I)
            GF(IK) = GF(IK) + GRM * GOU1(IK, I)
   90    CONTINUE
  100 CONTINUE
      IF (N .LE. 2) GO TO 230
      DO 130 I = 1, N
         DO 120 J = I + 1, N
            TERM(2) = FOU1(1, I) * FOU1(1, J)
            GERM(2) = GOU1(1, I) * GOU1(1, J)
            TERM(3) = FOU1(2, I) * FOU1(1, J)
            GERM(3) = GOU1(2, I) * GOU1(1, J)
            TERM(4) = FOU1(3, I) * FOU1(1, J)
            GERM(4) = GOU1(3, I) * GOU1(1, J)
            TERM(1) = FOU1(2, I) * FOU1(2, J)
            GERM(1) = GOU1(2, I) * GOU1(2, J)
            DO 110 K = 1, N
               IF (K .EQ. I .OR. K .EQ. J) GO TO 110
               CALL TOOSML (1, TERM, FOU(K))
               CALL TOOSML (1, GERM, GOU(K))
  110       CONTINUE
            FF(2) = FF(2) + TWO * TERM(2)
            FF(3) = FF(3) + TWO * TERM(3) * THREE
            FF(4) = FF(4) + TWO * (TERM(4) * FOUR + TERM(1) * THREE)
            GF(2) = GF(2) + TWO * GERM(2)
            GF(3) = GF(3) + TWO * GERM(3) * THREE
            GF(4) = GF(4) + TWO * (GERM(4) * FOUR + GERM(1) * THREE)
  120    CONTINUE
  130 CONTINUE
      DO 170 I = 1, N
         DO 160 J = I + 1, N
            DO 150 K = J + 1, N
               TERM(3) = FOU1(1, I) * FOU1(1, J) * FOU1(1, K)
               TERM(4) = FOU1(2, I) * FOU1(1, J) * FOU1(1, K)
               GERM(3) = GOU1(1, I) * GOU1(1, J) * GOU1(1, K)
               GERM(4) = GOU1(2, I) * GOU1(1, J) * GOU1(1, K)
               IF (N .GT. 3) THEN
                  DO 140 M = 1, N
                  IF (M .EQ. I .OR. M .EQ. J .OR. M .EQ. K) GO TO  140
                  CALL TOOSML (3, TERM, FOU(M))
                  CALL TOOSML (3, GERM, GOU(M))
  140             CONTINUE
            END IF
            FF(3) = FF(3) + SIX * TERM(3)
            FF(4) = FF(4) + SIX * TERM(4) * SIX
            GF(3) = GF(3) + SIX * GERM(3)
            GF(4) = GF(4) + SIX * GERM(4) * SIX
  150       CONTINUE
  160    CONTINUE
  170 CONTINUE
      IF (N .LE. 3) GO TO 230
      DO 220 I = 1, N
         DO 210 J = I + 1, N
            DO 200 K = J + 1, N
               DO 190 M = K + 1, N
      TERM(4) = FOU1(1, I) * FOU1(1, J) * FOU1(1, K) * FOU1(1, M)
      GERM(4) = GOU1(1, I) * GOU1(1, J) * GOU1(1, K) * GOU1(1, M)
               IF (N .GT. 4) THEN
                  DO 180 L = 1, N
         IF (L .EQ. I .OR. L .EQ. J .OR. L .EQ. K .OR. L .EQ. M)GOTO 180
                     CALL TOOSML (4, TERM, FOU(L))
                     CALL TOOSML (4, GERM, GOU(L))
  180             CONTINUE
               END IF
               FF(4) = FF(4) + FOUR * SIX * TERM(4)
               GF(4) = GF(4) + FOUR * SIX * GERM(4)
  190          CONTINUE
  200       CONTINUE
  210    CONTINUE
  220 CONTINUE
C
  230 CONTINUE
      PHI = EXP(-Z * Z) / SQRTPI
      PHI1 = -TWO * Z * PHI
      PHI2 = (FOUR * Z ** 2 - TWO) * PHI
      PHI3 = (-EIGHT * Z ** 3 + TWELVE * Z) * PHI
      PHI4 = (SIXTN * Z ** 2 * (Z ** 2 - THREE) + TWELVE) * PHI
      DERIV = PHI * (FF(4) + GF(4)) + FOUR * PHI1 * (FF(3) + GF(3))
     *  + SIX * PHI2 * (FF(2) + GF(2)) + FOUR * PHI3 * (FF(1) + GF(1))
     *  + PHI4 * FUNCN
      RETURN
      END
      SUBROUTINE ASSIGN (U, BP, FF)
C
C        ALGORITHM AS 251.3  APPL.STATIST. (1989), VOL.38, NO.3
C
C
C        COMPUTE DERIVATIVES OF NORMAL CDF'S.
C
      REAL FF(4)
      REAL U, U2, BP, HALF, ONE, THREE, SQ2PI, T1, T2, T3
      INTEGER I
      DATA HALF, ONE, THREE, SQ2PI /0.5, 1.0, 3.0, 2.50662827463100/
      DATA ZERO, UMAX, SMALL /0.0,  8.0, 0.1E-07/
      IF (ABS(U) .GT. UMAX) THEN
         DO 10 I = 1, 4
            FF(I) = ZERO
   10    CONTINUE
      ELSE
         U2 = U * U
         T1 = BP * EXP(-HALF * U2) / SQ2PI
         T2 = BP * T1
         T3 = BP * T2
         FF(1) = T1
         FF(2) = -U * T2
         FF(3) = (U2 - ONE) * T3
         FF(4) = (THREE - U2) * U * BP * T3
         DO 20 I = 1, 4
            IF(ABS(FF(I)) .LT. SMALL) FF(I) = ZERO
   20    CONTINUE
      END IF
      RETURN
      END
      SUBROUTINE WMAX(W1, W2, W3, DLG)
C
C        ALGORITHM AS 251.4  APPL.STATIST. (1989), VOL.38, NO.3
C
C
C        LARGEST ABSOLUTE VALUE OF QUADRATIC FUNCTION FITTED
C        TO THREE POINTS.
C
      REAL W1, W2, W3, DLG, QUAD, QLIM, QMIN, ONE, TWO, B2C
      DATA ONE, TWO, QMIN /1.0, 2.0, 0.00001/
      DLG = MAX( ABS(W1), ABS(W3) )
      QUAD = W1 - W2 * TWO + W3
      QLIM = MAX( ABS(W1 - W3) / TWO , QMIN)
      IF (ABS(QUAD) .LE. QLIM) RETURN
      B2C = (W1 - W3) / QUAD / TWO
      IF (ABS(B2C) .GE. ONE) RETURN
      DLG = MAX( DLG, ABS(W2 - B2C * QUAD * B2C / TWO) )
      RETURN
      END
      SUBROUTINE TOOSML (N, FF, F)
C
C        ALGORITHM AS 251.5  APPL.STATIST. (1989), VOL.38, NO.3
C
C
C        MULTIPLY FF(I) BY F FOR I = N TO 4.  SET TO ZERO IF TOO SMALL.
C
      REAL FF(4), F, ZERO, SMALL
      INTEGER N, I
      DATA ZERO, SMALL /0.0, 0.1E-12/
      DO 10 I = N, 4
         FF(I) = FF(I) * F
         IF (ABS(FF(I)) .LE. SMALL) FF(I) = ZERO
   10 CONTINUE
      RETURN
      END
      REAL FUNCTION ALNORM(X, UPPER)
C
C        ALGORITHM AS 66  APPL. STATIST. (1973) VOL.22, P.424
C
C        EVALUATES THE TAIL AREA OF THE STANDARDIZED NORMAL CURVE
C        FROM X TO INFINITY IF UPPER IS .TRUE. OR
C        FROM MINUS INFINITY TO X IF UPPER IS .FALSE.
C
      REAL LTONE, UTZERO, ZERO, HALF, ONE, CON, A1, A2, A3,
     $  A4, A5, A6, A7, B1, B2, B3, B4, B5, B6, B7, B8, B9,
     $  B10, B11, B12, X, Y, Z, ZEXP
      LOGICAL UPPER, UP
C
C        LTONE AND UTZERO MUST BE SET TO SUIT THE PARTICULAR COMPUTER
C        (SEE INTRODUCTORY TEXT)
C
      DATA LTONE, UTZERO /7.0, 18.66/
      DATA ZERO, HALF, ONE, CON /0.0, 0.5, 1.0, 1.28/
      DATA           A1,             A2,            A3,
     $               A4,             A5,            A6,
     $               A7
     $  /0.398942280444, 0.399903438504, 5.75885480458,
     $    29.8213557808,  2.62433121679, 48.6959930692,
     $    5.92885724438/
      DATA           B1,            B2,             B3,
     $               B4,            B5,             B6,
     $               B7,            B8,             B9,
     $              B10,           B11,            B12
     $  /0.398942280385,     3.8052E-8,  1.00000615302,
     $    3.98064794E-4, 1.98615381364, 0.151679116635,
     $    5.29330324926,  4.8385912808,  15.1508972451,
     $   0.742380924027,  30.789933034,  3.99019417011/
C
      ZEXP(Z) = EXP(Z)
C
      UP = UPPER
      Z = X
      IF (Z .GE. ZERO) GOTO 10
      UP = .NOT. UP
      Z = -Z
   10 IF (Z .LE. LTONE .OR. UP .AND. Z .LE. UTZERO) GOTO 20
      ALNORM = ZERO
      GOTO 40
   20 Y = HALF * Z * Z
      IF (Z .GT. CON) GOTO 30
C
      ALNORM = HALF - Z * (A1 - A2 * Y / (Y + A3 - A4 / (Y + A5 +
     $  A6 / (Y + A7))))
      GOTO 40
C
   30 ALNORM = B1 * ZEXP(-Y) / (Z - B2 + B3 / (Z + B4 + B5 / (Z -
     $  B6 + B7 / (Z + B8 - B9 / (Z + B10 + B11 / (Z + B12))))))
C
   40 IF (.NOT. UP) ALNORM = ONE - ALNORM
      RETURN
      END
      REAL FUNCTION PPND7 (P, IFAULT)
C
C        ALGORITHM AS241  APPL. STATIST. (1988) VOL. 37, NO. 3
C
C       PRODUCES THE NORMAL DEVIATE  Z  CORRESPONDING TO A GIVEN LOWER
C       TAIL AREA OF  P;  Z  IS ACCURATE TO ABOUT  1  PART IN 10**7.
C
C       THE HASH SUMS BELOW ARE THE SUMS OF THE MANTISSAS OF THE
C       COEFFICIENTS. THEY ARE INCLUDED FOR USE IN CHECKING
C       TRANSCRIPTION.
C
      INTEGER IFAULT
      REAL ZERO, ONE, HALF, SPLIT1, SPLIT2, CONST1, CONST2,
     *  A0, A1, A2, A3, B1, B2, B3, C0, C1, C2, C3, D1, D2,
     *  E0, E1, E2, E3, F1, F2, P, Q, R
      PARAMETER (ZERO = 0.0E0, ONE = 1.0E0, HALF = 0.5E0,
     *  SPLIT1 = 0.425E0,    SPLIT2 = 5.0E0,
     *  CONST1 = 0.180625E0, CONST2 = 1.6E0)
C
C     COEFFICIENTS FOR  P  CLOSE TO  1/2
      PARAMETER (A0 = 3.38713 27179E0,
     *           A1 = 5.04342 71938E1,
     *           A2 = 1.59291 13202E2,
     *           A3 = 5.91093 74720E1,
     *           B1 = 1.78951 69469E1,
     *           B2 = 7.87577 57664E1,
     *           B3 = 6.71875 63600E1)
C     HASH SUM AB    32.31845 77772
C
C     COEFFICIENTS FOR  P  NEITHER CLOSE TO  1/2  NOR  0 OR 1
      PARAMETER (C0 = 1.42343 72777E0,
     *           C1 = 2.75681 53900E0,
     *           C2 = 1.30672 84816E0,
     *           C3 = 1.70238 21103E-1,
     *           D1 = 7.37001 64250E-1,
     *           D2 = 1.20211 32975E-1)
C     HASH SUM CD    15.76149 29821
C
C     COEFFICIENTS FOR  P  NEAR  0 OR 1
      PARAMETER (E0 = 6.65790 51150E0,
     *           E1 = 3.08122 63860E0,
     *           E2 = 4.28682 94337E-1,
     *           E3 = 1.73372 03997E-2,
     *           F1 = 2.41978 94225E-1,
     *           F2 = 1.22582 02635E-2)
C     HASH SUM EF    19.40529 10204
C
      IFAULT = 0
      Q = P - HALF
      IF (ABS(Q) .LE. SPLIT1) THEN
         R = CONST1 - Q * Q
         PPND7 = Q * (((A3 * R + A2) * R + A1) * R + A0) /
     *               (((B3 * R + B2) * R + B1) * R + ONE)
         RETURN
      ELSE
         IF (Q .LT. 0) THEN
            R = P
         ELSE
            R = ONE - P
         ENDIF
         IF (R .LE. ZERO) THEN
            IFAULT = 1
            PPND7 = ZERO
            RETURN
         ENDIF
         R = SQRT(-LOG(R))
         IF (R .LE. SPLIT2) THEN
            R = R - CONST2
            PPND7 = (((C3 * R + C2) * R + C1) * R + C0) /
     *               ((D2 * R + D1) * R + ONE)
         ELSE
            R = R - SPLIT2
            PPND7 = (((E3 * R + E2) * R + E1) * R + E0) /
     *               ((F2 * R + F1) * R + ONE)
         ENDIF
         IF (Q .LT. 0) PPND7 = -PPND7
         RETURN
      ENDIF
      END
      PROGRAM MVTIN
C
C       COMPUTE PROBABILITY INTEGRAL FOR A MULTIVARIATE
C       NORMAL OR A MULTIVARIATE T WITH PRODUCT CORRELATION
C       STRUCTURE USING MVSTUD AND MVNPRD.
C
      DIMENSION A(50),B(50),BPD(50),INF(50),D(50),TMP(2)
      DATA  ZERO, ONE, EPS / 0.0, 1.0, 0.0001 /
      IERC = 0
      HNC = ZERO
C
C       START A NEW PROBLEM:-
C       ENTER N = NO. DIMENSIONS, AND NDF = DEG. OF FREEDOM
C       (FOR INFINITE D.F., ENTER NDF = 0)
C
   10 WRITE (*, 200)
      READ (*, *) N, NDF
      IF (N .LE. 0 .OR. NDF .LT. 0) STOP
      IF (N .GT. 50) THEN
         WRITE (*, 300)
         STOP
      ELSE
         XN = FLOAT(N)
      ENDIF
C
C       SPECIFY THE CORRELATION STRUCTURE:-
C       ENTER IX = 1 IF THERE IS A FIXED RHO
C          OR IX = 2 IF RHO IS DETERMINED FROM SAMPLE SIZES
C          OR IX = 3 IF RHO(I,J) = BPD(I)*BPD(J)
C          OR IX = 4 IF RHO(I,J) = 1 / (1 + SQRT(N))
C
   20 WRITE (*, 210)
      READ (*,*) IX
      IF (IX .LT. 1 .OR. IX .GT. 4) GO TO 10
      IF (IX .EQ. 1 .OR. IX .EQ. 4) THEN
         IF (IX .EQ. 4) THEN
             RHO = ONE / (ONE + SQRT(XN))
         ELSE
   30       WRITE (*, 220)
            READ (*, *) RHO
            IF (RHO .LT. ZERO .OR. RHO .GE. ONE) GO TO 30
         ENDIF
         SQTRHO = ZERO
         IF (RHO .GT. ZERO) SQTRHO = SQRT(RHO)
         DO 40 I = 1, N
            BPD(I) = SQTRHO
   40    CONTINUE
      ELSE
         IF (IX .EQ. 2) THEN
            WRITE (*, 310)
            READ (*, *) X0, (BPD(I), I = 1, N)
            DO 50 I = 1, N
               BPD(I) = ONE / SQRT(ONE + X0 / BPD(I))
   50       CONTINUE
         ELSE
               WRITE (*, 230) N
               READ (*, *) (BPD(I), I = 1, N)
         ENDIF
      ENDIF
C
C       SPECIFY MEANS
C
   80 WRITE (*, 205)
      READ (*, *) IDEL
      IF (IDEL .EQ. 0) THEN
         DO 90 I = 1, N
            D(I) = ZERO
   90    CONTINUE
      ELSE
         NCM = 1
         IF (IDEL .NE. 1) NCM = N
         WRITE (*, 270) NCM
         READ (*, *) (D(I), I = 1, NCM)
         IF (NCM .EQ. N) GO TO 120
         DO 110 I = 1, N
            D(I) = D(1)
  110    CONTINUE
      ENDIF
  120 CONTINUE
      WRITE (*, 240)
      READ (*, *) NCM
         IF (NCM .NE. 1) NCM = N
      NSTRT = 1
  125 CONTINUE
C
C       SPECIFY THE VALUES FOR THE ENDPOINTS
C
            WRITE (*, 245)
            DO 130 I = NSTRT, NCM
  132       IF (NCM .EQ. 1) THEN
                WRITE (*, 250)
            ELSE
                WRITE (*, 260) I
            END IF
            READ (*, *) INF1, TMP(1), (TMP(J), J = 2, INF1)
            IF (INF1 .LT. 0 .OR. INF1 .GT. 2) GO TO 132
            INF(I) = INF1
            IF (INF1 .EQ. 0) THEN
               B(I) = TMP(1)
               A(I) = ZERO
            ELSE
               IF (INF1 .EQ. 1) THEN
                  B(I) = ZERO
                  A(I) = TMP(1)
               ELSE
                  B(I) = TMP(1)
                  A(I) = TMP(2)
               ENDIF
            ENDIF
            IF (NCM .EQ. 1) GO TO 131
  130    CONTINUE
  131    IF (NCM .EQ. 1) THEN
            DO 140 I = 2, N
               A(I) = A(1)
               B(I) = B(1)
               INF(I) = INF(1)
  140       CONTINUE
         ELSE
            CONTINUE
         ENDIF
      NX = N
      IF (N .GT. 4) NX = 4
      WRITE (*, 180) NX
      DO 150 I = 1, NX
         WRITE (*, 190) I, B(I), A(I), INF(I), BPD(I), D(I)
  150 CONTINUE
C
C        COMPUTE PROB
C
      WRITE (*, 290) N, NDF
      CALL MVSTUD(NDF,A,B,BPD,EPS,N,INF,D,IERC,HNC,PROB,BND,IFLT)
      WRITE (*, 280) PROB, BND, IFLT
  160 WRITE (*, 170)
      READ (*, *) NSTRT
      IF (NSTRT .GT. N) GO TO 160
      IF (NSTRT .GE. 1) GO TO 125
      GO TO 10
  170 FORMAT(1X,'Enter 1 to repeat with new values for limits',
     *    /1X,'   or J for new values for J-th to N-th limits, incl.',
     *    /1X '   or 0 for new problem')
  180 FORMAT(1X,'First',I2,' parameter sets:-',
     *       /,1X,' i      L_i      U_i   Type     b_i    \mu_i')
  190 FORMAT(1X, I2, 2F9.3, I6, 2F9.3)
  200 FORMAT(1X, 'Enter No. Dimensions, and D.o.F. (0 for MVN)',
     *  /8X, '(or enter 0, 0 to terminate)')
  205 FORMAT(1X, 'Enter 0 for central case,'/
     *       1X, '   or 1 for vector (D,...,D),'/
     *       1X, '   or 2 for vector (D_1,...,D_N)')
  210 FORMAT(1X, 'Enter 1 for equal-rho case,'/
     *       1X, '   or 2 to compute \rho_ij from sample sizes,'/
     *       1X, '   or 3 if \rho_ij = b_i*b_j,'/
     *       1X, '   or 4 for \rho = 1 / (1+sqrt(N))')
  220 FORMAT(1X, 'Enter common \rho')
  230 FORMAT(1X, 'Enter b_i, i = 1, ',I3)
  240 FORMAT(1X, 'Enter 1 for a common set of limits or 0 if not')
  245 FORMAT(1X,'For each variable enter type of interval and limits,'/
     *       1X,'Type = 0 iff [a,\infty], = 1 iff [-\infty,b]',
     *', = 2 iff [a,b]'/)
  250 FORMAT(1X, 'Enter common values of TYPE and limit(s)')
  260 FORMAT(1X, 'Enter TYPE and limit(s) for I =',I3)
  270 FORMAT(1X, 'Enter',I3,' mean value(s)')
  280 FORMAT(1X, 'PROB  =',F10.6,/,1X,'BOUND =',F10.6,/,1X,
     *  'FAULT =', I10, /)
  290 FORMAT(/,1X,'Computed results for N =',I3,', NDF =',I4,':-')
  300 FORMAT(1X, 'DIMENSION LIMITS EXCEEDED',/)
  310 FORMAT(1X, 'Enter sample sizes (control first)',/)
      END
      SUBROUTINE MVSTUD(NDF,A,B,BPD,ERRB,N,INF,D,IERC,HNC,PROB,
     *    BND,IFLT)
C
C        COMPUTE MULTIVARIATE STUDENT INTEGRAL,
C        USING MVNPRD (DUNNETT, APPL. STAT., 1989)
C        IF RHO(I,J) = BPD(I)*BPD(J).
C
C        IF RHO(I,J) HAS GENERAL STRUCTURE, USE
C        MULNOR (SCHERVISH, APPL. STAT., 1984) AND REPLACE
C        CALL MVNPRD(A,B,BPD,EPS,N,INF,IERC,HNC,PROB,BND,IFLT)
C        BY CALL MULNOR(A,B,SIG,EPS,N,INF,PROB,BND,IFLT).
C
C        AUTHOR: C.W. DUNNETT, MCMASTER UNVERSITY
C
C        BASED ON ADAPTIVE SIMPSON'S RULE ALGORITHM
C        DESCRIBED IN SHAMPINE & ALLEN: "NUMERICAL
C        COMPUTING", (1974), PAGE 240.
C
C        PARAMETERS ARE SAME AS IN ALGORITHM AS 251
C        IN APPL. STAT. (1989), VOL. 38: 564-579
C        WITH THE FOLLOWING ADDITIONS:
C             NDF   INTEGER      INPUT  DEGREES OF FREEDOM
C             D     REAL ARRAY   INPUT  NON-CENTRALITY VECTOR
C        (PUT NDF = 0 FOR INFINITE D.F.)
C
      INTEGER NN
      PARAMETER (NN=50)
      DIMENSION A(*),B(*),BPD(*),INF(*),D(*),F(3),AA(NN),BB(NN)
      DATA ZERO,HALF,TWO,THREE,FOUR / 0.0, 0.5, 2.0, 3.0, 4.0 /
      DO 10 I = 1, N
         AA(I) = A(I) - D(I)
         BB(I) = B(I) - D(I)
   10 CONTINUE
      IF (NDF .LE. 0) THEN
         CALL MVNPRD(AA,BB,BPD,ERRB,N,INF,IERC,HNC,PROB,BND,IFLT)
         RETURN
      ENDIF
      BND   = ZERO
      IFLT  =  0
      MAXDF = 150
      ERB2  = ERRB
C
C        CHECK IF D.F. EXCEED MAXDF; IF YES, THEN PROB
C        IS COMPUTED BY QUADRATIC INTERPOLATION ON 1./D.F.
C
      IF (NDF .LE. MAXDF) GO TO 20
      CALL MVNPRD(AA,BB,BPD,ERB2,N,INF,IERC,HNC,F(1),BND,IFLT)
      NF    =  MAXDF / 2
      CALL SIMPSN(NF,A,B,BPD,ERB2,N,INF,D,IERC,HNC,F(3),BND,IFLT)
      NF    =  NF * 2
      CALL SIMPSN(NF,A,B,BPD,ERB2,N,INF,D,IERC,HNC,F(2),BND,IFLT)
      XX    =  FLOAT(NF) / FLOAT(NDF)
      AX    =  F(3) - F(2)*TWO + F(1)
      BX    =  F(2)*FOUR - F(3) - F(1)*THREE
      PROB  =  F(1) + XX * (AX * XX + BX) * HALF
      RETURN
   20 CALL SIMPSN (NDF,A,B,BPD,ERB2,N,INF,D,IERC,HNC,PROB,BND,IFLT)
      RETURN
      END
      SUBROUTINE SIMPSN (NDF,A,B,BPD,ERRB,N,INF,D,IERC,HNC,PROB,
     *   BND,IFLT)
C
C        STUDENTIZES A MULTIVARIATE INTEGRAL USING SIMPSON'S RULE.
C
      DIMENSION A(*),B(*),BPD(*),INF(*),D(*),
     *   FV(5),F1T(30),F2T(30),F3T(30),
     *   LDIR(30),PSUM(30),ESTT(30),ERRR(30),GV(5),G1T(30),G2T(30),
     *   G3T(30),GSUM(30)
      DATA ZERO,HALF,ONE,ONEP5,TWO,FOUR,SIX,DXMIN /0.0,0.5,1.0,1.5,
     *   2.0,4.0,6.0,0.000004/
      PROB    =  ZERO
      BOUNDA  =  ZERO
      BOUNDG  =  ZERO
      IFLAG   =  0
      IER     =  0
      START   =  -ONE
      DAX     =   ONE
      ERB2    =   ERRB * HALF
      EPS1    =   ERB2 * HALF
      CALL FUN (ZERO,NDF,A,B,BPD,ERB2,N,INF,D,F0,G0,IERC,HNC,IER)
   10 FV(1)   =  ZERO
      GV(1)   =  ZERO
      ERROR   =  ZERO
      DA      =  DAX
      LVL     =  1
      Z3      =  START + HALF*DA
      CALL FUN(Z3,NDF,A,B,BPD,ERB2,N,INF,D,FV(3),GV(3),IERC,HNC,IER)
      FV(5)   =  F0
      GV(5)   =  G0
      WT      =  ABS(DA) / SIX
      CONTRB  =  WT * (FV(1) + FOUR * FV(3) + FV(5))
      CONTRG  =  WT * (GV(1) + FOUR * GV(3) + GV(5))
      LDIR(LVL)  = 2
      PSUM(LVL)  = ZERO
      GSUM(LVL)  = ZERO
C
C        BISECT INTERVAL; COMPUTE ESTIMATES FOR EACH HALF.
C
   20 DX      =  HALF * DA
      WT      =  ABS(DX) / SIX
      Z2      =  START + HALF * DX
      CALL FUN(Z2,NDF,A,B,BPD,ERB2,N,INF,D,FV(2),GV(2),IERC,HNC,IER)
      Z4      =  START + ONEP5 * DX
      CALL FUN(Z4,NDF,A,B,BPD,ERB2,N,INF,D,FV(4),GV(4),IERC,HNC,IER)
      ESTL    =  WT * (FV(1) + FOUR * FV(2) + FV(3))
      ESTR    =  WT * (FV(3) + FOUR * FV(4) + FV(5))
      ESTGL   =  WT * (GV(1) + FOUR * GV(2) + GV(3))
      ESTGR   =  WT * (GV(3) + FOUR * GV(4) + GV(5))
      SUM     =  ESTL  +  ESTR
      SUMG    =  ESTGL +  ESTGR
      DLG     =  ABS(CONTRB - SUM)
      ERRL    =  DLG
C
C        STOP BISECTING WHEN ACCURACY SUFFICIENT, OR IF
C        INTERVAL TOO NARROW OR BISECTED TOO OFTEN.
C
   30 IF (DLG .LE. EPS1) GO TO 50
      IF (ABS(DX) .LE. DXMIN .OR. LVL .GE. 30) GO TO 40
C
C        RAISE LEVEL.  STORE INFORMATION FOR RIGHT HALF
C        AND APPLY SIMPSON'S RULE TO LEFT HALF.
C
      LVL     =  LVL + 1
      LDIR(LVL)  =  1
      F1T(LVL)   =  FV(3)
      F2T(LVL)   =  FV(4)
      F3T(LVL)   =  FV(5)
      G1T(LVL)   =  GV(3)
      G2T(LVL)   =  GV(4)
      G3T(LVL)   =  GV(5)
      DA      =  DX
      FV(5)   =  FV(3)
      FV(3)   =  FV(2)
      GV(5)   =  GV(3)
      GV(3)   =  GV(2)
      ESTT(LVL)  =  ESTR
      CONTRB  =  ESTL
      CONTRG  =  ESTGL
      EPS1    =  EPS1 * HALF
      ERRR(LVL)  =  EPS1
      GO TO 20
C
C        ACCEPT APPROXIMATE VALUE FOR INTERVAL.
C
   40 IFLAG   =  11
   50 ERROR   =  ERROR + ERRL
   60 IF (LDIR(LVL) .EQ. 1) GO TO 70
      SUM     =  SUM + PSUM(LVL)
      SUMG    =  SUMG + GSUM(LVL)
      LVL     =  LVL - 1
      IF (LVL .GT. 0) GO TO 60
      CONTRB  =  SUM
      CONTRG  =  SUMG
      LVL     =  1
      DLG     =  ERROR
      GO TO 80
C
C        RESTORE SAVED INFORMATION TO PROCESS RIGHT HALF.
C
   70 PSUM(LVL)  =  SUM
      GSUM(LVL)  =  SUMG
      LDIR(LVL)  =  2
      DA      =  DAX / TWO**(LVL-1)
      START      =  START + DX * TWO
      FV(1)      =  F1T(LVL)
      FV(3)      =  F2T(LVL)
      FV(5)      =  F3T(LVL)
      GV(1)      =  G1T(LVL)
      GV(3)      =  G2T(LVL)
      GV(5)      =  G3T(LVL)
      CONTRB     =  ESTT(LVL)
      EXCESS     =  EPS1 - DLG
      EPS1       =  ERRR(LVL)
      IF (EXCESS .GT. ZERO) EPS1 = EPS1 + EXCESS
      GO TO 20
   80 PROB       =  PROB + CONTRB
      BOUNDG     =  BOUNDG + CONTRG
      BOUNDA     =  BOUNDA + DLG
      IF (Z4 .LE. ZERO) GO TO 90
      IF (IFLT .EQ. 0) IFLT = IER
      IF (IFLT .EQ. 0) IFLT = IFLAG
      BOUNDA     =  BOUNDA + BOUNDG
      IF (BND .LT. BOUNDA) BND = BOUNDA
      RETURN
   90 EPS1       =  ERB2 * HALF
      EXCESS     =  EPS1 - BND
      IF (EXCESS .GT. ZERO) EPS1 = EPS1 + EXCESS
      START      =  ONE
      DAX        = -ONE
      GO TO 10
      END

      FUNCTION SDIST(Y,N)
C
C        COMPUTE Y**(N/2 - 1) EXP(-Y) / GAMMA(N/2)
C
C                (Revised: 1994-01-19)
C
      DATA ZERO, HALF, ONE, X23 / 0.0, 0.5, 1.0, -23.0 /
      DATA SQRTPI / 1.77245385090552 /
      SDIST      =  ZERO
      IF (Y .LE. ZERO) RETURN
      JJ         =  N/2 - 1
      JK         =  2 * JJ - N + 2
      JKP        =  JJ - JK
      SDIST      =  ONE
      IF (JK .LT. 0) SDIST = SDIST / SQRT(Y) / SQRTPI
      IF (JKP .EQ. 0) GO TO 20
      XN         =  FLOAT(N) * HALF
      TEST       =  ALOG(Y) - Y / FLOAT(JKP)
      IF ( TEST .LT. X23 ) THEN
         SDIST = ZERO
         RETURN
      ENDIF
      SDIST = ALOG ( SDIST )
      DO 10 J = 1, JKP
         XN    =   XN - ONE
         SDIST   =  SDIST + TEST - ALOG(XN)
   10 CONTINUE
      IF ( SDIST .LT. X23 ) THEN
          SDIST  =  ZERO
      ELSE
          SDIST  =  EXP( SDIST )
      ENDIF
      RETURN
   20 SDIST      =  SDIST * EXP(-Y)
      RETURN
      END

      SUBROUTINE FUN (Z,NDF,H,HL,BPD,ERB2,N,INF,D,F0,G0,IERC
     *   ,HNC,IER)
      INTEGER NN
      PARAMETER (NN=50)
      DIMENSION A(NN),B(NN),H(*),HL(*),BPD(*),INF(*),D(*)
      DATA  ZERO, ONE, TWO, SMALL / 0.0, 1.0, 2.0, 1.0E-08 /
      F0    =  ZERO
      G0    =  ZERO
      IF (Z .LE. -ONE .OR. Z .GE. ONE) RETURN
      DF    =  FLOAT(NDF)
      ARG   =  (ONE + Z) / (ONE - Z)
      TERM = ARG * DF * TWO / (ONE-Z)**2 * SDIST(DF/TWO*ARG*ARG,NDF)
      IF (TERM .LE. SMALL) RETURN
      DO 10 I = 1, N
         A(I) = ARG * H(I)   - D(I)
         B(I) = ARG * HL(I)  - D(I)
   10 CONTINUE
      CALL MVNPRD (A,B,BPD,ERB2,N,INF,IERC,HNC,PROB,BND,IFLT)
      IF (IER .EQ. 0) IER = IFLT
      G0  =  TERM * BND
      F0  =  TERM * PROB
      RETURN
      END

C * * * * * * * * * * * * * * * * * * * * * * * * * * * * 
C Charles Dunnett
C Dept. of Mathematics and Statistics
C McMaster University
C Hamilton, Ontario L8S 4K1
C Canada
C E-mail: dunnett at mcmaster.ca
C Tel.: (905) 525-9140 (Ext. 27104)
C * * * * * * * * * * * * * * * * * * * * * * * * * * * *


From Roger.Bivand at nhh.no  Tue Oct 23 15:25:04 2001
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 23 Oct 2001 15:25:04 +0200 (CEST)
Subject: [R] loading packages
In-Reply-To: <3BD56404.71B9BA90@ktl.fi>
Message-ID: <Pine.LNX.4.21.0110231511360.22116-100000@reclus.nhh.no>

Elena:

On Tue, 23 Oct 2001, Elena Moltchanova wrote:

> Thanks to Roger for pointing out the packages spweights and sptests to
> me. I believe they will be quiet useful in my work. But... I can't get
> them to work!
> 
> Firstly, I realised that a newer version of R is available. I have now
> downloaded and installed it. When I try to 'install packages from CRAN'
> I get:
> 
> trying URL `http://cran.r-project.org/bin/windows/contrib/PACKAGES'
> unable to connect to 'cran.r-project.org'.
> Error in download.file(url = paste(contriburl, "PACKAGES", sep = "/"),
> :
>         cannot open URL
> `http://cran.r-project.org/bin/windows/contrib/PACKAGES'
> 
> although my Netscape has no problems locating it.
> 
> Whan I unzip the files to the library-subdirectory the command
> 
> library(spweights)
> 
> results in
> 
> Warning message:
> Package  `spweights' contains no R code in: library(pkg, character.only
> = TRUE)

This happens when one installs a package source as though it was a binary,
because library() doesn't find the R code.

> 
> although library(help=spweights) produces a window with the desired
> information.
> 
> I cannot use 'install package from local zip.-file' because the packages
> are in .tar.gz-format.
> 
If the files you found are in *.tar.gz format, then they are the source
files, not the Windows binaries.

The *.zip files are in http://cran.r-project.org/bin/windows/contrib/ and
should be installable with the menu item: "Packages" -> "Install package
from local zip file", if -> "Install package from CRAN" doesn't fly for
you (does for me).

Roger

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Breiviksveien 40, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 93 93
e-mail: Roger.Bivand at nhh.no
and: Department of Geography and Regional Development, University of
Gdansk, al. Mar. J. Pilsudskiego 46, PL-81 378 Gdynia, Poland.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Manuel.Duval at pfizer.com  Tue Oct 23 15:39:52 2001
From: Manuel.Duval at pfizer.com (Duval, Manuel)
Date: Tue, 23 Oct 2001 09:39:52 -0400
Subject: No subject
Message-ID: <2198F469C0C4D511BBBD0002A55C51B63F28A4@frfsex01.fs1fr.wl.com>

Dear R contributors,


I recently dowloaded the R-1.3.1 on my SGi Origin 200 run by Irix6.5.
In order to instal it, I launched the command shown below:

env MAKE=gmake ./configure

 The output was as follow::

R is now configured for mips-sgi-irix6.5

  Source directory:          .
  Installation directory:    /usr/local
  C compiler:                cc  -OPT:IEEE_NaN_inf=ON -g
  C++ compiler:              CC  -OPT:IEEE_NaN_inf=ON -g
  FORTRAN compiler:          f77  -OPT:IEEE_NaN_inf=ON -g

  X11 support:               yes
  Gnome support:             no
  Tcl/Tk support:            no

  R profiling support:       yes
  R as a shared library:     no

Then, when I test the installatuion by invoking make check , I got the
following error message:

[duval at svsgi4]/shome/d/duvalm/R-1.2.3/tests> make test-All
don't know how to make ../../library/base/R/base (bu42).
*** Error code 1 (bu21)
*** Error code 1 (bu21)
*** Error code 1 (bu21)

Any clue to bypass this problem will be greatly appreciated.

Sincerely

Manuel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From joerg.maeder at ethz.ch  Tue Oct 23 15:43:26 2001
From: joerg.maeder at ethz.ch (Joerg Maeder)
Date: Tue, 23 Oct 2001 15:43:26 +0200
Subject: [R] FTP-Access from R
Message-ID: <3BD573FE.A15E21CA@ethz.ch>

I want to access a file on a ftp-server with R. But it doesn't work. I
suppose the reason is the username and password. Here the non working
file path

ftp://woudc:woudc*@ftp.tor.ec.gc.ca/Archive-NewFormat/totalozone_1.0_1/stn035/dobson/1929/19290301.dobson.beck.002.smi.csv

I tested other files on this server, same result: a crash of R. I tested
it with other 'normal' sites (on other servers): that works



gruess

joerg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetilh at umsanet.edu.bo  Tue Oct 23 15:48:35 2001
From: kjetilh at umsanet.edu.bo (kjetil halvorsen)
Date: Tue, 23 Oct 2001 09:48:35 -0400
Subject: [R] problems with postscript device
Message-ID: <3BD57533.71B2A59F@umsanet.edu.bo>

Hola!

I am producing postscript output from R (windows 98), both using firts
the windows devicd and then " copy to postscript", or using the
postscript device directly.  The problem shows up equally both ways.
The function producing the plot is given below. The only difference I
can see with this function and other I have producing plots, is that
this uses split.screen(). I include the plot in latex, and the result is
1)
a very small, unreadabkle plot and 2) the plot is rotated on head!

I had no problems with other functions:

 boot.stat <-
function (x, B = 1000, norm = FALSE) 
{
    xname <- deparse(substitute(x))
    means <- meds <- numeric(B)
    for (i in 1:B) {
        s <- sample(x, replace = TRUE)
        means[i] <- mean(s)
        meds[i] <- median(s)
    }
    CImedian <- quantile(meds, c(0.025, 0.5, 0.975))
    CImean <- quantile(means, c(0.025, 0.5, 0.975))
    hmean <- hist(means, freq = FALSE, plot = FALSE)
    hmeds <- hist(meds, freq = FALSE, plot = FALSE)
    split.screen(c(1, 2))
    xlims <- range(c(hmean$breaks, hmeds$breaks))
    ymax <- max(c(hmean$density, hmeds$density))
    screen(1)
    plot(hmean, freq = FALSE, col = "red", xlim = xlims, ylim = c(0, 
        ymax), xlab = paste("Sampling dist. of mean of ", xname), 
        main = "")
    bringToTop()
    if (norm) {
        n <- length(x)
        mu <- mean(x)
        sd <- sqrt(var(x)/n)
        ps <- seq(xlims[1], xlims[2], len = 100)
        lines(ps, dnorm(ps, mu, sd), col = "darkgreen")
    }
    lines(CImean, rep(ymax/2, 3))
    points(CImean[2], ymax/2, cex = 2, col = "black")
    screen(2)
    plot(hmeds, freq = FALSE, col = "lightblue", xlim = xlims, 
        ylim = c(0, ymax), xlab = paste("Sampling dist. of median of ", 
            xname), main = "")
    if (norm) {
        n <- length(x)
        p <- 1/2
        mu <- median(x)
        d <- density(x, n = 1, from = mu, to = mu)$y
        sd <- sqrt(p * (1 - p)/n)/d
        ps <- seq(xlims[1], xlims[2], len = 100)
        lines(ps, dnorm(ps, mu, sd), col = "darkgreen")
    }
    lines(CImedian, rep(ymax/2, 3))
    points(CImedian[2], ymax/2, cex = 2, col = "black")
    names(B) <- "Number of bootstrap replicactions"
    invisible(list(CImean = CImean, CImedian = CImedian, B, means =
means, 
        meds = meds))
}


call with for example:

boot.stat(rnorm(100))

Kjetil Halvorsen.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ltorgo at liacc.up.pt  Tue Oct 23 18:05:56 2001
From: ltorgo at liacc.up.pt (Luis Torgo)
Date: Tue, 23 Oct 2001 16:05:56 +0000
Subject: [R] Parsing of HTML files in R
Message-ID: <3BD59564.B865D5E@liacc.up.pt>

Is there any package similar to the XML package that is able to
"extract" relevant information from HTML files. Namely, I'm interested
in obtained data that is represented as a HTML table, into some R-type
structure.
Thank you.

--
Luis Torgo
    FEP/LIACC, University of Porto   Phone : (+351) 22 607 88 30
    Machine Learning Group           Fax   : (+351) 22 600 36 54
    R. Campo Alegre, 823             email : ltorgo at liacc.up.pt
    4150 PORTO   -  PORTUGAL         WWW   : http://www.liacc.up.pt/~ltorgo



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Oct 23 17:05:33 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 23 Oct 2001 16:05:33 +0100 (BST)
Subject: [R] FTP-Access from R
In-Reply-To: <3BD573FE.A15E21CA@ethz.ch>
Message-ID: <Pine.GSO.4.31.0110231604140.19920-100000@toucan.stats>

You haven't told us the R platform. But R's ftp is taken from libxml on
most systems, and it's not a complete implementation.

I suggest you use download.file with method = "wget".

On Tue, 23 Oct 2001, Joerg Maeder wrote:

> I want to access a file on a ftp-server with R. But it doesn't work. I
> suppose the reason is the username and password. Here the non working
> file path
>
> ftp://woudc:woudc*@ftp.tor.ec.gc.ca/Archive-NewFormat/totalozone_1.0_1/stn035/dobson/1929/19290301.dobson.beck.002.smi.csv
>
> I tested other files on this server, same result: a crash of R. I tested
> it with other 'normal' sites (on other servers): that works
>
>
>
> gruess
>
> joerg
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From steve at biostat.ucsf.edu  Tue Oct 23 21:18:56 2001
From: steve at biostat.ucsf.edu (Steve Shiboski)
Date: Tue, 23 Oct 2001 12:18:56 -0700
Subject: [R] zeros in table() output in version 1.3.1
Message-ID: <20011023121856.A11149@chanane.ucsf.edu>

Are the following differences in table() output
between versions 1.3.0 and 1.3.1 a feature, a bug
or a problem with my implementation?

(I am running under Solaris 2.7 SPARC, built using the
Sun C and FORTRAN compilers.)

Version 1.3.1:

> table(c(0,1),c(0,1))
   
    1
  1 1

Version 1.3.0:
 
> table(c(0,1),c(0,1))
   
    0 1
  0 1 0
  1 0 1


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Tue Oct 23 21:35:24 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Oct 2001 21:35:24 +0200
Subject: [R] zeros in table() output in version 1.3.1
In-Reply-To: <20011023121856.A11149@chanane.ucsf.edu>
References: <20011023121856.A11149@chanane.ucsf.edu>
Message-ID: <x21yjutair.fsf@blueberry.kubism.ku.dk>

Steve Shiboski <steve at biostat.ucsf.edu> writes:

> Are the following differences in table() output
> between versions 1.3.0 and 1.3.1 a feature, a bug
> or a problem with my implementation?
> 
> (I am running under Solaris 2.7 SPARC, built using the
> Sun C and FORTRAN compilers.)
> 
> Version 1.3.1:
> 
> > table(c(0,1),c(0,1))
>    
>     1
>   1 1

That'll be a bug, but it is not there when R is built with GNU tools:

> table(c(0,1),c(0,1))
   
    0 1
  0 1 0
  1 0 1

> version
         _                   
platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status                       
major    1                   
minor    3.1                 
year     2001                
month    08                  
day      31                  
language R                   


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From r.hankin at auckland.ac.nz  Tue Oct 23 23:28:54 2001
From: r.hankin at auckland.ac.nz (Robin Hankin)
Date: Wed, 24 Oct 2001 10:28:54 +1300
Subject: [R] tapply problem
In-Reply-To: <3BCEBF97.29423.3FB7EE@localhost> (petr.pikal@precheza.cz)
References: <3BCEBF97.29423.3FB7EE@localhost>
Message-ID: <200110232128.f9NLSsS02045@r.hankin.sems.auckland.ac.nz>

Hi Petr

many thanks for your help here.
> > 
> If I understood it correctly you need something like that:
> 
>         ID student assessor Q1A  Q1B Q1C Q2A  Q2B Q3
> 1  2152833    Fred    Robin  15 17.0  13  14 13.0  8
> 2  2152833    Fred    Steph  14 13.0  11  16 13.0  8

[deleted].


It worked perfectly (my problem was that I didn't know about the
"aggregate" function). 



kia ora (Maori for "cheers!")


robin

-- 

Robin Hankin, Lecturer,
School of Environmental and Marine Science
Private Bag 92019 Auckland
New Zealand

r.hankin at auckland.ac.nz
tel 0064-9-373-7599 x6820; FAX 0064-9-373-7042


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.murrell at auckland.ac.nz  Wed Oct 24 00:11:32 2001
From: p.murrell at auckland.ac.nz (Paul Murrell)
Date: Wed, 24 Oct 2001 11:11:32 +1300
Subject: [R] Rows function in nlme package
References: <x85zo6iapqb.fsf@turing.une.edu.au> <x85u1wqae0n.fsf@turing.une.edu.au>
Message-ID: <013c01c15c0f$ac195250$175dd882@stat.auckland.ac.nz>

Hi


> > The Rows function which is called from plot.compareFits in the nlme
package
> > is not found.
> >
> > > plot(compareFits(coef(bp.model3),coef(bp.model3M)))
> > Error in plot.compareFits(compareFits(coef(bp.model3),
coef(bp.model3M))) :
> > couldn't find function "Rows"
> > >
> >
> > Can I find it elswhere? Have I missed a required package?
> >
>
> [...]
>
> After further hunting I realise  this is probably part of the "Trellis"
> package that is seem being brewed.


It does appear that Rows() is part of Trellis in S-Plus (given that the
example for rows is a Trellis-related example), which means that you have
probably correctly guessed why it is not in R (because it is not in the
lattice package which we are "brewing").

OTOH, Rows() does not seem like a very hard function to replicate.  It would
appear that ...

    Rows(x, index)

... is basically just doing ...

    lapply(x, "[", index)

... so you could fix the code yourself if you feel keen.  In the longer
term, a fix will need changes to either nlme or lattice, at least one of
which will hopefully occur by the end of the year.

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pgajer at math.jhu.edu  Wed Oct 24 00:00:35 2001
From: pgajer at math.jhu.edu (pawel)
Date: Tue, 23 Oct 2001 18:00:35 -0400
Subject: [R] lowess C code
Message-ID: <3BD5E883.7E93074@math.jhu.edu>

Hi,
I understand that the core of lowess() function is written in C.
Is the C source code available and if yes, how can I get to it?

I want to write a multidimensional extension of lowess() if you know of
anybody who has implemented this already I would greatly appreciate any
references or pointers.
thank you very much,
pawel


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Oct 24 02:05:18 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 24 Oct 2001 01:05:18 +0100 (BST)
Subject: [R] lowess C code
In-Reply-To: <3BD5E883.7E93074@math.jhu.edu>
Message-ID: <Pine.GSO.4.31.0110240046080.20731-100000@toucan.stats>

On Tue, 23 Oct 2001, pawel wrote:

> Hi,
> I understand that the core of lowess() function is written in C.
> Is the C source code available and if yes, how can I get to it?

It's in the R sources in src/appl/lowess.c

> I want to write a multidimensional extension of lowess() if you know of
> anybody who has implemented this already I would greatly appreciate any
> references or pointers.

Look at loess in package modreg for one such.

> thank you very much,
> pawel
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mabramso at gmu.edu  Wed Oct 24 05:04:20 2001
From: mabramso at gmu.edu (Myriam Abramson)
Date: 23 Oct 2001 23:04:20 -0400
Subject: [R] easy graphic question
Message-ID: <m3y9m1agcr.fsf@home.sweet.home>


Hi!

How do I specify a filled point in a scatterplot? Their size? 

plot(x,y) just gives "empty" points like "o". I want a full black
point. 

TIA


-- 
                                   myriam

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From d.scott at auckland.ac.nz  Wed Oct 24 05:23:55 2001
From: d.scott at auckland.ac.nz (David Scott)
Date: Wed, 24 Oct 2001 16:23:55 +1300 (NZDT)
Subject: [R] easy graphic question
In-Reply-To: <m3y9m1agcr.fsf@home.sweet.home>
Message-ID: <Pine.GSO.4.33.0110241620250.15583-100000@aitken.scitec.auckland.ac.nz>

On 23 Oct 2001, Myriam Abramson wrote:

>
> Hi!
>
> How do I specify a filled point in a scatterplot? Their size?
>
> plot(x,y) just gives "empty" points like "o". I want a full black
> point.
>
To see the symbols available, try:

plot(1:30,pch=1:30)

Symbol size is controlled by the parameter cex, so try

plot(1:30,pch=1:30,cex=2)

for example and you will undoubtedly see how it works.

David Scott
_________________________________________________________________
David Scott     Department of Statistics
                Tamaki Campus
                The University of Auckland, PB 92019
                Auckland        NEW ZEALAND
Phone: +64 9 373 7599 ext 6830     Fax: +64 9 373 7000
Email:  d.scott at Auckland.ac.nz

President, New Zealand Statistical Association

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jefferis at stanford.edu  Wed Oct 24 05:52:33 2001
From: jefferis at stanford.edu (Greg Jefferis)
Date: Tue, 23 Oct 2001 20:52:33 -0700
Subject: [R] Re: Compiling R v 1.3.1 under Irix 6.5 on SGI Origin
In-Reply-To: <2198F469C0C4D511BBBD0002A55C51B63F28A4@frfsex01.fs1fr.wl.com>
Message-ID: <B7FB8910.2C69%jefferis@stanford.edu>

Hi,

I wondered if anyone had shed some light on this as I have come on a similar
problem on another Origin.  The configure output looks like this

> R is now configured for mips-sgi-irix6.5
> 
> Source directory:          .
> Installation directory:    /usr/local
> C compiler:                gcc  -g -O2
> C++ compiler:              c++  -g -O2
> FORTRAN compiler:          g77  -g -O2
> 
> X11 support:               yes
> Gnome support:             no
> Tcl/Tk support:            yes
> 
> R profiling support:       yes
> R as a shared library:     no

and the make output looks like this around the failure point

        gcc -I. -I../../../src/include -I../../../src/include
-I/usr/local/include -DHAVE_CONFIG_H  -fPIC  -g -O2 -c nanohttp.c -o
nanohttp.lo
        gcc -I. -I../../../src/include -I../../../src/include
-I/usr/local/include -DHAVE_CONFIG_H  -fPIC  -g -O2 -c sock.c -o sock.lo
        gcc -I. -I../../../src/include -I../../../src/include
-I/usr/local/include -DHAVE_CONFIG_H  -fPIC  -g -O2 -c sockconn.c -o
sockconn.lo
        gcc -shared  -o internet.so  Rsock.lo internet.lo nanoftp.lo
nanohttp.lo sock.lo sockconn.lo
making Lapack.d from Lapack.c
        gcc -I. -I../../../src/include -I../../../src/include
-I/usr/local/include -DHAVE_CONFIG_H  -fPIC  -g -O2 -c Lapack.c -o Lapack.lo
        g77  -fPIC  -g -O2 -c double.f -o double.lo
        g77  -fPIC  -g -O2 -c cmplx.f -o cmplx.lo
don't know how to make # (bu42).
*** Error code 1 (bu21)
*** Error code 1 (bu21)
*** Error code 1 (bu21)
*** Error code 1 (bu21)


Many thanks for any hints,

Greg Jefferis


On 10/23/01 06:39, "Duval, Manuel" <Manuel.Duval at pfizer.com> wrote:

> Dear R contributors,
> 
> 
> I recently dowloaded the R-1.3.1 on my SGi Origin 200 run by Irix6.5.
> In order to instal it, I launched the command shown below:
> 
> env MAKE=gmake ./configure
> 
> The output was as follow::
> 
> R is now configured for mips-sgi-irix6.5
> 
> Source directory:          .
> Installation directory:    /usr/local
> C compiler:                cc  -OPT:IEEE_NaN_inf=ON -g
> C++ compiler:              CC  -OPT:IEEE_NaN_inf=ON -g
> FORTRAN compiler:          f77  -OPT:IEEE_NaN_inf=ON -g
> 
> X11 support:               yes
> Gnome support:             no
> Tcl/Tk support:            no
> 
> R profiling support:       yes
> R as a shared library:     no
> 
> Then, when I test the installatuion by invoking make check , I got the
> following error message:
> 
> [duval at svsgi4]/shome/d/duvalm/R-1.2.3/tests> make test-All
> don't know how to make ../../library/base/R/base (bu42).
> *** Error code 1 (bu21)
> *** Error code 1 (bu21)
> *** Error code 1 (bu21)
> 
> Any clue to bypass this problem will be greatly appreciated.
> 
> Sincerely
> 
> Manuel
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.> -
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> 
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_.> _

__________________________________________________________________________
Greg Jefferis,                          Lab Address: Liqun Luo, Herrin 144
Neurosciences PhD Programme &                e-mail: jefferis at stanford.edu
Dept Biological Sciences,                       Lab: (650) 725 5809
Gilbert Biology Building,                       Fax: (650) 723 0589
371 Serra Mall,
Stanford, CA 94305-5020.                       Home: (650) 497 1135

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From laurent at genome.cbs.dtu.dk  Wed Oct 24 10:29:22 2001
From: laurent at genome.cbs.dtu.dk (Laurent Gautier)
Date: Wed, 24 Oct 2001 10:29:22 +0200 (MDT)
Subject: [R] Re: Compiling R v 1.3.1 under Irix 6.5 on SGI Origin
In-Reply-To: <B7FB8910.2C69%jefferis@stanford.edu>
Message-ID: <Pine.SGI.3.95.1011024102534.20713833B-100000@genome.cbs.dtu.dk>

Hello,


I had (and still have) to deal with SGIs and came across the similar
error message. I remember going through by setting MAKE=gmake in the
config.site file and by replacing the 'make ; make test; make install' on
the command line by 'gmake; gmake test; gmake install'
(rem: If I remember well, on a SGI the test bit do not go too good... this
is (was ?) a reported bug).


Hopin' it helps,



Laurent







Laurent Gautier			CBS, Building 208, DTU
PhD. Student			D-2800 Lyngby,Denmark	
tel: +45 45 25 24 85		http://www.cbs.dtu.dk/laurent

On Tue, 23 Oct 2001, Greg Jefferis wrote:

> Hi,
> 
> I wondered if anyone had shed some light on this as I have come on a similar
> problem on another Origin.  The configure output looks like this
> 
> > R is now configured for mips-sgi-irix6.5
> > 
> > Source directory:          .
> > Installation directory:    /usr/local
> > C compiler:                gcc  -g -O2
> > C++ compiler:              c++  -g -O2
> > FORTRAN compiler:          g77  -g -O2
> > 
> > X11 support:               yes
> > Gnome support:             no
> > Tcl/Tk support:            yes
> > 
> > R profiling support:       yes
> > R as a shared library:     no
> 
> and the make output looks like this around the failure point
> 
>         gcc -I. -I../../../src/include -I../../../src/include
> -I/usr/local/include -DHAVE_CONFIG_H  -fPIC  -g -O2 -c nanohttp.c -o
> nanohttp.lo
>         gcc -I. -I../../../src/include -I../../../src/include
> -I/usr/local/include -DHAVE_CONFIG_H  -fPIC  -g -O2 -c sock.c -o sock.lo
>         gcc -I. -I../../../src/include -I../../../src/include
> -I/usr/local/include -DHAVE_CONFIG_H  -fPIC  -g -O2 -c sockconn.c -o
> sockconn.lo
>         gcc -shared  -o internet.so  Rsock.lo internet.lo nanoftp.lo
> nanohttp.lo sock.lo sockconn.lo
> making Lapack.d from Lapack.c
>         gcc -I. -I../../../src/include -I../../../src/include
> -I/usr/local/include -DHAVE_CONFIG_H  -fPIC  -g -O2 -c Lapack.c -o Lapack.lo
>         g77  -fPIC  -g -O2 -c double.f -o double.lo
>         g77  -fPIC  -g -O2 -c cmplx.f -o cmplx.lo
> don't know how to make # (bu42).
> *** Error code 1 (bu21)
> *** Error code 1 (bu21)
> *** Error code 1 (bu21)
> *** Error code 1 (bu21)
> 
> 
> Many thanks for any hints,
> 
> Greg Jefferis
> 
> 
> On 10/23/01 06:39, "Duval, Manuel" <Manuel.Duval at pfizer.com> wrote:
> 
> > Dear R contributors,
> > 
> > 
> > I recently dowloaded the R-1.3.1 on my SGi Origin 200 run by Irix6.5.
> > In order to instal it, I launched the command shown below:
> > 
> > env MAKE=gmake ./configure
> > 
> > The output was as follow::
> > 
> > R is now configured for mips-sgi-irix6.5
> > 
> > Source directory:          .
> > Installation directory:    /usr/local
> > C compiler:                cc  -OPT:IEEE_NaN_inf=ON -g
> > C++ compiler:              CC  -OPT:IEEE_NaN_inf=ON -g
> > FORTRAN compiler:          f77  -OPT:IEEE_NaN_inf=ON -g
> > 
> > X11 support:               yes
> > Gnome support:             no
> > Tcl/Tk support:            no
> > 
> > R profiling support:       yes
> > R as a shared library:     no
> > 
> > Then, when I test the installatuion by invoking make check , I got the
> > following error message:
> > 
> > [duval at svsgi4]/shome/d/duvalm/R-1.2.3/tests> make test-All
> > don't know how to make ../../library/base/R/base (bu42).
> > *** Error code 1 (bu21)
> > *** Error code 1 (bu21)
> > *** Error code 1 (bu21)
> > 
> > Any clue to bypass this problem will be greatly appreciated.
> > 
> > Sincerely
> > 
> > Manuel
> > 
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.> -
> > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> > 
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _.> _
> 
> __________________________________________________________________________
> Greg Jefferis,                          Lab Address: Liqun Luo, Herrin 144
> Neurosciences PhD Programme &                e-mail: jefferis at stanford.edu
> Dept Biological Sciences,                       Lab: (650) 725 5809
> Gilbert Biology Building,                       Fax: (650) 723 0589
> 371 Serra Mall,
> Stanford, CA 94305-5020.                       Home: (650) 497 1135
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From amaitour at pasteur.fr  Wed Oct 24 10:48:30 2001
From: amaitour at pasteur.fr (Aboubakar Maitournam)
Date: Wed, 24 Oct 2001 10:48:30 +0200
Subject: [R] generating a gamma random variable
References: <001101c15b04$b7f3f5a0$66250a3e@xxx>
Message-ID: <3BD6805E.7F7E65BC@pasteur.fr>

Marco Taboga wrote:

> One method to generate a value x taken by a random variable X with a
> strictly increasing distribution function F(x) is the following:    -
> Generate a value y taken by a random variable Y distributed as uniform
> on [0,1] (every programming language has routines to do this)    -
> Evaluate the inverse of the distribution function F at the point y you
> just generated    - The number you get x=F^(-1)(y) is the value x you
> wanted to generate (drawn from the distribution you chose) This method
> is nice, but it can be computationally very expensive, since, in most
> cases (as in the case of a gamma), to compute the inverse of F you
> have to solve numerically the equation F(x)-y=0 and every iteration of
> the method you use to solve the equation requires the numerical
> computation of a definite integral to find F(x).The reward you get for
> this great amount of computation is that your random generator for X
> is as good as the random generator for Y (the uniform random
> variable). Sincerely,Marco.

(sorry for my english which is french translation).
That method (above) is naturally the primary method for stochastic
simulation. But it's depending of many conditions and it is
computationally delicate.
There is a way to simulate a gamma law of parameters a and b, based on
the standard method above (simplified) and the variation of the method
of rejection.
1) First you simulate a random variable following gamma law with
parameters a and 1 with 0<a<1.

For this you use the fact that the density of law gamma(a,1),
g(a,1)(x)  verifies the inequality :
g(a,1)(x) <= ((a+e)/(ae*gamma(a))g(x) where g(x) is the function
g(x)=(ae/(a+e))(x^(a-1)) 1{ 0<=x<1}+e^(-x) 1{x>=1}
   1_1 You simulate simply a random variable Y with density g by
leading  Y=G^(-1)(U), U uniform on [0,1] and
   G^{-1}(z)=[((a+e)/e)z]^(1/a) 1{z<(e/(a+e))}-log((1-z)((a+e)/ae)) 1
{z>=e/(a+e)}
    1-2 Simulation of random uniform variable V on [0,1] independant of
U
     1-3 if V <= gamma(a,1)(Y)/[((a+e)/(a*e*gamma(a)))*g(Y)] more
precisely
if V <= e^(-Y)1{0<=y<1} + Y^(a-1)1{1<=y} we lead X=Y or if V >....... we
return to 1_1.

2) You simulate a random variable X following gamma(a,b) a >0, b>0 as
folow
2-1 consider a-[a] the fractionnary part of (a-[a] <1), we simulate a
random variable H following law gamma(a-[a],1) according to the
algorithm 1
above.
2-1 We simulate a random variable J of law gamma([a],1) as sum of [a]
exponential variables
   J=-log[U1 x ...........U[a]]  (product in log of U from 1 to [a])
where the U[i] are uniform, independant
 on [0,1]
2-3 lead X=b(J+H)


Aboubakar Maitournam.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20011024/8bfa61ad/attachment.html

From mark at myatt.demon.co.uk  Wed Oct 24 10:54:50 2001
From: mark at myatt.demon.co.uk (Mark Myatt)
Date: Wed, 24 Oct 2001 09:54:50 +0100
Subject: [R] zeros in table() output in version 1.3.1
In-Reply-To: <20011023121856.A11149@chanane.ucsf.edu>
References: <20011023121856.A11149@chanane.ucsf.edu>
Message-ID: <tUGj9DAaHo17EwYC@myatt.demon.co.uk>

Steve Shiboski <steve at biostat.ucsf.edu> writes:
>Are the following differences in table() output
>between versions 1.3.0 and 1.3.1 a feature, a bug
>or a problem with my implementation?
>
>(I am running under Solaris 2.7 SPARC, built using the
>Sun C and FORTRAN compilers.)
>
>Version 1.3.1:
>
>> table(c(0,1),c(0,1))
>   
>    1
>  1 1
>
>Version 1.3.0:
> 
>> table(c(0,1),c(0,1))
>   
>    0 1
>  0 1 0
>  1 0 1

Odd. I don't get this behaviour on my Windows box. I think that,
perhaps, it is down to how the binary was compiled. Did you use the Sun
tools or the GNU tools?

Mark


--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mark at myatt.demon.co.uk  Wed Oct 24 11:00:26 2001
From: mark at myatt.demon.co.uk (Mark Myatt)
Date: Wed, 24 Oct 2001 10:00:26 +0100
Subject: [R] tapply problem - off topic
In-Reply-To: <200110232128.f9NLSsS02045@r.hankin.sems.auckland.ac.nz>
References: <3BCEBF97.29423.3FB7EE@localhost>
 <200110232128.f9NLSsS02045@r.hankin.sems.auckland.ac.nz>
Message-ID: <kUah9IAqMo17Ew57@myatt.demon.co.uk>

Robin Hankin <r.hankin at auckland.ac.nz> writes:

>kia ora (Maori for "cheers!")

Sounds like Italian for "What is the time?" Is the Maori the source for
the name of the soft drink? It makes more sense that the Italian.

Mark


--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gavin.simpson at ucl.ac.uk  Wed Oct 24 11:30:36 2001
From: gavin.simpson at ucl.ac.uk (Gavin Simpson)
Date: Wed, 24 Oct 2001 10:30:36 +0100
Subject: [R] How change the size of persp() axis labels?
Message-ID: <000701c15c6e$8a85ff80$4c202880@GSIMPSON>

Hi,

I have been using the persp() function to plot species response surfaces
based on GAMs (using package mgcv).  Everything works fine, except that
I have a slight problem when it comes to producing a figure with
multiple (4 - 6) persp() plots on it.  The axis labels remain the same
size, no matter how large or small the plot is, causing some overlap
when the multiplot figure is produced.

Is there a way to reduce the size of the axis labels in persp() (either
for ticktypes="simple" or ticktypes="detailed")?

Ideally I would like to know how to reduce the size of the axis labels
when using ticktypes="detailed", and force persp() to plot only the min
and max value along each axis.  Is this possible?

R is running under Win2000.

> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    3.1            
year     2001           
month    08             
day      31             
language R 

Many thanks

Gavin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Wed Oct 24 16:36:42 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Wed, 24 Oct 2001 07:36:42 -0700 (PDT)
Subject: [R] generating a gamma random variable
In-Reply-To: <3BD6805E.7F7E65BC@pasteur.fr>
Message-ID: <Pine.A41.4.33.0110240734290.20192-100000@homer40.u.washington.edu>

On Wed, 24 Oct 2001, Aboubakar Maitournam wrote:
> There is a way to simulate a gamma law of parameters a and b, based on
> the standard method above (simplified) and the variation of the method
> of rejection.


And there are source code and references for how R does it, yet another
different way, in src/nmath/rgamma.c

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Manuel.Duval at pfizer.com  Wed Oct 24 16:52:42 2001
From: Manuel.Duval at pfizer.com (Duval, Manuel)
Date: Wed, 24 Oct 2001 10:52:42 -0400
Subject: [R] Re: Compiling R v 1.3.1 under Irix 6.5 on SGI Origin
Message-ID: <2198F469C0C4D511BBBD0002A55C51B63F28B6@frfsex01.fs1fr.wl.com>

Hello Laurent, Ray and Greg,

I tried the gmake settings.
Yet, I still got an Error code 1 message when I run the test. 

running regression tests
don't know how to make ../library/base/R/base (bu42).
*** Error code 1 (bu21)


Thanks you if you have any idea.

Manuel

 
 
 


-----Message d'origine-----
De : Laurent Gautier [ mailto:laurent at genome.cbs.dtu.dk
<mailto:laurent at genome.cbs.dtu.dk> ]
Envoy? : mercredi 24 octobre 2001 10:29
? : Greg Jefferis
Cc : Duval, Manuel; 'R-help at lists.R-project.org'
Objet : Re: [R] Re: Compiling R v 1.3.1 under Irix 6.5 on SGI Origin


Hello,


I had (and still have) to deal with SGIs and came across the similar
error message. I remember going through by setting MAKE=gmake in the
config.site file and by replacing the 'make ; make test; make install' on
the command line by 'gmake; gmake test; gmake install'
(rem: If I remember well, on a SGI the test bit do not go too good... this
is (was ?) a reported bug).


Hopin' it helps,



Laurent







Laurent Gautier                 CBS, Building 208, DTU
PhD. Student                    D-2800 Lyngby,Denmark  
tel: +45 45 25 24 85            http://www.cbs.dtu.dk/laurent
<http://www.cbs.dtu.dk/laurent> 

On Tue, 23 Oct 2001, Greg Jefferis wrote:

> Hi,
>
> I wondered if anyone had shed some light on this as I have come on a
similar
> problem on another Origin.  The configure output looks like this
>
> > R is now configured for mips-sgi-irix6.5
> >
> > Source directory:          .
> > Installation directory:    /usr/local
> > C compiler:                gcc  -g -O2
> > C++ compiler:              c++  -g -O2
> > FORTRAN compiler:          g77  -g -O2
> >
> > X11 support:               yes
> > Gnome support:             no
> > Tcl/Tk support:            yes
> >
> > R profiling support:       yes
> > R as a shared library:     no
>
> and the make output looks like this around the failure point
>
>         gcc -I. -I../../../src/include -I../../../src/include
> -I/usr/local/include -DHAVE_CONFIG_H  -fPIC  -g -O2 -c nanohttp.c -o
> nanohttp.lo
>         gcc -I. -I../../../src/include -I../../../src/include
> -I/usr/local/include -DHAVE_CONFIG_H  -fPIC  -g -O2 -c sock.c -o sock.lo
>         gcc -I. -I../../../src/include -I../../../src/include
> -I/usr/local/include -DHAVE_CONFIG_H  -fPIC  -g -O2 -c sockconn.c -o
> sockconn.lo
>         gcc -shared  -o internet.so  Rsock.lo internet.lo nanoftp.lo
> nanohttp.lo sock.lo sockconn.lo
> making Lapack.d from Lapack.c
>         gcc -I. -I../../../src/include -I../../../src/include
> -I/usr/local/include -DHAVE_CONFIG_H  -fPIC  -g -O2 -c Lapack.c -o
Lapack.lo
>         g77  -fPIC  -g -O2 -c double.f -o double.lo
>         g77  -fPIC  -g -O2 -c cmplx.f -o cmplx.lo
> don't know how to make # (bu42).
> *** Error code 1 (bu21)
> *** Error code 1 (bu21)
> *** Error code 1 (bu21)
> *** Error code 1 (bu21)
>
>
> Many thanks for any hints,
>
> Greg Jefferis
>
>
> On 10/23/01 06:39, "Duval, Manuel" <Manuel.Duval at pfizer.com> wrote:
>
> > Dear R contributors,
> >
> >
> > I recently dowloaded the R-1.3.1 on my SGi Origin 200 run by Irix6.5.
> > In order to instal it, I launched the command shown below:
> >
> > env MAKE=gmake ./configure
> >
> > The output was as follow::
> >
> > R is now configured for mips-sgi-irix6.5
> >
> > Source directory:          .
> > Installation directory:    /usr/local
> > C compiler:                cc  -OPT:IEEE_NaN_inf=ON -g
> > C++ compiler:              CC  -OPT:IEEE_NaN_inf=ON -g
> > FORTRAN compiler:          f77  -OPT:IEEE_NaN_inf=ON -g
> >
> > X11 support:               yes
> > Gnome support:             no
> > Tcl/Tk support:            no
> >
> > R profiling support:       yes
> > R as a shared library:     no
> >
> > Then, when I test the installatuion by invoking make check , I got the
> > following error message:
> >
> > [duval at svsgi4]/shome/d/duvalm/R-1.2.3/tests> make test-All
> > don't know how to make ../../library/base/R/base (bu42).
> > *** Error code 1 (bu21)
> > *** Error code 1 (bu21)
> > *** Error code 1 (bu21)
> >
> > Any clue to bypass this problem will be greatly appreciated.
> >
> > Sincerely
> >
> > Manuel
> >
> >
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.> -
> > r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
<http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html> 
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> >
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _.> _
>
> __________________________________________________________________________
> Greg Jefferis,                          Lab Address: Liqun Luo, Herrin 144
> Neurosciences PhD Programme &                e-mail: jefferis at stanford.edu
> Dept Biological Sciences,                       Lab: (650) 725 5809
> Gilbert Biology Building,                       Fax: (650) 723 0589
> 371 Serra Mall,
> Stanford, CA 94305-5020.                       Home: (650) 497 1135
>
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
<http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html> 
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20011024/26bd3817/attachment.html

From deepayansarkar at yahoo.com  Wed Oct 24 17:14:10 2001
From: deepayansarkar at yahoo.com (Deepayan Sarkar)
Date: Wed, 24 Oct 2001 08:14:10 -0700 (PDT)
Subject: [R] Rows function in nlme package
In-Reply-To: <013c01c15c0f$ac195250$175dd882@stat.auckland.ac.nz>
Message-ID: <20011024151410.45344.qmail@web13905.mail.yahoo.com>


--- Paul Murrell <p.murrell at auckland.ac.nz> wrote:
> Hi
> 
> 
> > > The Rows function which is called from
> plot.compareFits in the nlme
> package
> > > is not found.
> > >
> > > >
> plot(compareFits(coef(bp.model3),coef(bp.model3M)))
> > > Error in
> plot.compareFits(compareFits(coef(bp.model3),
> coef(bp.model3M))) :
> > > couldn't find function "Rows"
> > > >
> > >
> > > Can I find it elswhere? Have I missed a required
> package?
> > >
> >
> > [...]
> >
> > After further hunting I realise  this is probably
> part of the "Trellis"
> > package that is seem being brewed.
> 
> 
> It does appear that Rows() is part of Trellis in
> S-Plus (given that the
> example for rows is a Trellis-related example),
> which means that you have
> probably correctly guessed why it is not in R
> (because it is not in the
> lattice package which we are "brewing").


Actually, lattice DOES have the Rows() function
(precisely because it is very commonly used in
Trellis code), though it is not well documented.

In fact, if you want to use (most of) the plot
functions in nlme, you would have to have grid and
lattice installed (both under development), not only
Rows().

Deepayan


__________________________________________________



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From roger at ysidro.econ.uiuc.edu  Wed Oct 24 18:31:52 2001
From: roger at ysidro.econ.uiuc.edu (Roger Koenker)
Date: Wed, 24 Oct 2001 11:31:52 -0500 (CDT)
Subject: [R] R with png for solaris?
In-Reply-To: <000701c15c6e$8a85ff80$4c202880@GSIMPSON>
Message-ID: <Pine.GSO.4.33.0110240957480.26997-100000@ysidro.econ.uiuc.edu>

I'm trying to remake R to use png on solaris.
I've installed the libpng and zlib packages,

	libpng-1.0.11-sol8-sparc-local
	zlib-1.1.3-sol8-sparc-local

and get this from ./configure

checking for png.h... (cached) yes
checking if libpng version >= 1.0.5... yes
checking for png_create_write_struct in -lpng... (cached) no
checking for XDR support... (cached) yes
checking for gzopen in -lz... (cached) yes
checking for zlib.h... (cached) yes
checking if zlib version >= 1.1.3... yes

after make and make check:  capabilities() still reports png FALSE.
I presume the problem is the "no" above, but I'm unclear what to do about it.
Any suggestions would be most welcome...for the record:

> version
         _
platform sparc-sun-solaris2.8
arch     sparc
os       solaris2.8
system   sparc, solaris2.8
status
major    1
minor    3.1
year     2001
month    08
day      31
language R

url:	http://www.econ.uiuc.edu		Roger Koenker
email	roger at ysidro.econ.uiuc.edu		Department of Economics
vox: 	217-333-4558				University of Illinois
fax:   	217-244-6678				Champaign, IL 61820




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rod.chav at hsoft.es  Thu Oct 25 01:34:50 2001
From: rod.chav at hsoft.es (antonio)
Date: Wed, 24 Oct 2001 19:34:50 -0400
Subject: [R] help with library(tcltk)
Message-ID: <01102419345000.01379@Yerupaja>

Hi,

I've recently installed R on a Linux Mandrake 8.0 i586 machine. I will like 
to run the tcltk interface but I get the following message:

> library(tcltk)
Error in firstlib(which.lib.loc, package) : 
        invalid command name "tcl_findLibrary"
Error in library(tcltk) : .First.lib failed
>

I think I have properly installed the tcl8.3 and tk8.3 libraries in 
/usr/local/lib

Of course I have the tcltk library under the same directory as the other 
packages (which are working without problems)

Thanks,

Antonio

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cstrato at EUnet.at  Wed Oct 24 20:22:39 2001
From: cstrato at EUnet.at (cstrato@EUnet.at)
Date: Wed, 24 Oct 2001 20:22:39 +0200
Subject: [R] lowess C code
References: <Pine.GSO.4.31.0110240046080.20731-100000@toucan.stats>
Message-ID: <3BD706EA.69090573@EUnet.at>

Hi,

It would be great to have a C function extending lowess to multiple
dimensions, i.e. about 100 dimensions. It is not quite clear to me
whether this is possible.
As far as I understand, loess can support only up to 14 dimensions.
Is this correct?

Best regards
Christian Stratowa
----------------------------------
C.h.r.i.s.t.i.a.n  S.t.r.a.t.o.w.a
V.i.e.n.n.a,  A.u.s.t.r.i.a


Prof Brian Ripley wrote:

> On Tue, 23 Oct 2001, pawel wrote:
>
> > Hi,
> > I understand that the core of lowess() function is written in C.
> > Is the C source code available and if yes, how can I get to it?
>
> It's in the R sources in src/appl/lowess.c
>
> > I want to write a multidimensional extension of lowess() if you know of
> > anybody who has implemented this already I would greatly appreciate any
> > references or pointers.
>
> Look at loess in package modreg for one such.
>
> > thank you very much,
> > pawel
> >
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From doraiss at auburn.edu  Wed Oct 24 22:42:26 2001
From: doraiss at auburn.edu (Sundar Dorai-Raj)
Date: Wed, 24 Oct 2001 15:42:26 -0500
Subject: [R] mixed fonts
Message-ID: <000d01c15ccc$63df58f0$4a35cc83@sundar>

Any way of mixing bold and plain fonts in text() (or mtext(), etc.)? I'm
looking for a solution that doesn't require manually spacing two calls
of text(). For example:

text(x=0,y=0,labels="bold(Figure 1.) plain(This is a picture.)")

where "Figure 1." is bold-faced and "This is a picture." is plain-faced.
I've tried to trick plotmath into doing this but have been unsuccessful.

Thanks in advance.

Sundar

> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    3.0            
year     2001           
month    06             
day      22             
language R

--
Sundar Dorai-Raj, Ph.D.
Assistant Professor
Discrete & Statistical Sciences   Office: (334) 844-3647
231 Allison Lab                   Fax: (334) 844-3611
Auburn University                 Email: dorairaj at dms.auburn.edu
Auburn AL 36849-5307              http://www.dms.auburn.edu/~dorairaj/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Wed Oct 24 23:19:20 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Oct 2001 23:19:20 +0200
Subject: [R] mixed fonts
In-Reply-To: <000d01c15ccc$63df58f0$4a35cc83@sundar>
References: <000d01c15ccc$63df58f0$4a35cc83@sundar>
Message-ID: <x2vgh4wxbb.fsf@blueberry.kubism.ku.dk>

"Sundar Dorai-Raj" <doraiss at auburn.edu> writes:

> Any way of mixing bold and plain fonts in text() (or mtext(), etc.)? I'm
> looking for a solution that doesn't require manually spacing two calls
> of text(). For example:
> 
> text(x=0,y=0,labels="bold(Figure 1.) plain(This is a picture.)")
> 
> where "Figure 1." is bold-faced and "This is a picture." is plain-faced.
> I've tried to trick plotmath into doing this but have been unsuccessful.

Didn't try hard enough:

plot(0,0)
text(x=0,y=0,labels=quote(bold("Figure 1. " )*"This is a picture."))


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Wed Oct 24 23:31:41 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Oct 2001 23:31:41 +0200
Subject: [R] help with library(tcltk)
In-Reply-To: <01102419345000.01379@Yerupaja>
References: <01102419345000.01379@Yerupaja>
Message-ID: <x2r8rswwqq.fsf@blueberry.kubism.ku.dk>

antonio <rod.chav at hsoft.es> writes:

> Hi,
> 
> I've recently installed R on a Linux Mandrake 8.0 i586 machine. I will like 
> to run the tcltk interface but I get the following message:
> 
> > library(tcltk)
> Error in firstlib(which.lib.loc, package) : 
>         invalid command name "tcl_findLibrary"
> Error in library(tcltk) : .First.lib failed
> >
> 
> I think I have properly installed the tcl8.3 and tk8.3 libraries in 
> /usr/local/lib
> 
> Of course I have the tcltk library under the same directory as the other 
> packages (which are working without problems)

tcl_findLibrary is defined in /usr/lib/tcl8.3/auto.tcl on my machine.
Could it be that you are mixing up tcl/tk versions? I would have
thought that it would be preinstalled on Mandrake.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From aolinto at bignet.com.br  Thu Oct 25 01:01:58 2001
From: aolinto at bignet.com.br (Antonio Olinto)
Date: Wed, 24 Oct 2001 21:01:58 -0200
Subject: [R] easy graphic question
References: <m3y9m1agcr.fsf@home.sweet.home>
Message-ID: <00a201c15ce0$5748c0e0$ae54fea9@nautilus>

Hi Myrian,

I suggest you to read the document UsingR item 3.3.1 on "Size, colour and
choice of plotting symbol" (see pages 24 and 25).

Also try "?par" at the command line and check for pch and cex.

David's examples are very nice too.

Best whishes,

Antonio Olinto
.
----- Original Message -----
From: "Myriam Abramson" <mabramso at gmu.edu>
To: <r-help at stat.math.ethz.ch>
Sent: Wednesday, October 24, 2001 1:04 AM
Subject: [R] easy graphic question


>
> Hi!
>
> How do I specify a filled point in a scatterplot? Their size?
>
> plot(x,y) just gives "empty" points like "o". I want a full black
> point.
>
> TIA
>
>
> --
>                                    myriam
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From laurent at genome.cbs.dtu.dk  Thu Oct 25 09:45:46 2001
From: laurent at genome.cbs.dtu.dk (Laurent Gautier)
Date: Thu, 25 Oct 2001 09:45:46 +0200 (MDT)
Subject: [R] X11() and XFree4.1.0 (and probably also MS truetype fonts)
Message-ID: <Pine.SGI.3.95.1011025094030.20647371D-100000@genome.cbs.dtu.dk>


Dear all,

I updated ('almost' painlessly =) ) the XFree version of my suse
distribution 7.1 (could not wait any longer as the screensaver was
crashing everything with irregular periodicity)... I have now Xfree 4.1.0
running (with OpenGL 3D going through the Mesa library), and I downloaded
MS truetype fonts (as suggested by Mr. Suse).


R seems to work... except (so far) the output of the 'pairs' function,
which give funny labels (it not Thai or Hebrew... looking closer it seems
that the letters are there, just lines a bit scrambled). As it was
working fine before, I tried to dig a bit and tried the function 'text'
but it seems to behave ok (normal and italic at least)...
(I admit I stopped investigating at this point...)


The question is:

Did I put myself in trouble (very likely) or did anybody else experienced
the same ?







Laurent




Laurent Gautier			CBS, Building 208, DTU
PhD. Student			D-2800 Lyngby,Denmark	
tel: +45 45 25 24 85		http://www.cbs.dtu.dk/laurent

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rhskelto at atm.ox.ac.uk  Thu Oct 25 10:32:08 2001
From: rhskelto at atm.ox.ac.uk (Randall Skelton)
Date: Thu, 25 Oct 2001 09:32:08 +0100 (BST)
Subject: [R] Object Programming in R
In-Reply-To: <00a201c15ce0$5748c0e0$ae54fea9@nautilus>
Message-ID: <Pine.LNX.4.33.0110250922190.17506-100000@moriarty.atm.ox.ac.uk>

Are there any good books/tutorials that explain how to best make use of
the object programming tools in R?  Alternatively, can someone suggest a
good oop book that describes (and gives examples) of oop with large
volumes of scientific/statistical data.

Cheers,
Randall

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jasont at indigoindustrial.co.nz  Thu Oct 25 12:30:31 2001
From: jasont at indigoindustrial.co.nz (Jason Turner)
Date: Thu, 25 Oct 2001 23:30:31 +1300
Subject: [R] R with png for solaris?
In-Reply-To: <Pine.GSO.4.33.0110240957480.26997-100000@ysidro.econ.uiuc.edu>; from roger@ysidro.econ.uiuc.edu on Wed, Oct 24, 2001 at 11:31:52AM -0500
References: <000701c15c6e$8a85ff80$4c202880@GSIMPSON> <Pine.GSO.4.33.0110240957480.26997-100000@ysidro.econ.uiuc.edu>
Message-ID: <20011025233031.B1200@camille.indigoindustrial.co.nz>

> I'm trying to remake R to use png on solaris.
...
> and get this from ./configure
...
> checking for png.h... (cached) yes

Looks like you forgot a:  

rm config.cache

before your

./configure

The truly paranoid can rm -r the R-1.x.y directory structure, 
and untar the source again, but the above should work fine.

Cheers

Jason
-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont at indigoindustrial.co.nz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From chrysopa at terra.com.br  Thu Oct 25 13:49:20 2001
From: chrysopa at terra.com.br (Ronaldo Reis Jr.)
Date: Thu, 25 Oct 2001 09:49:20 -0200
Subject: [R] significance of glm complete model
Message-ID: <200110251154.f9PBsvf15046@srv11-sao.sao.terra.com.br>

Hi,
Is possible to anova function on R calculate the significance of complete glm 
model?
I explain better.
I have a glm model:
> model1 <- glm(nsp~caules+mo,family=poisson)
I make an anova of this:
> anova(model1,test="F")
Analysis of Deviance Table
Model: poisson, link: log
Response: nsp
Terms added sequentially (first to last)
          Df Deviance Resid. Df Resid. Dev       F    Pr(>F)    
NULL                          6     40.315                      
caules     1   23.436         5     16.879 23.4360 1.291e-06 ***
mo         1    0.545         4     16.333  0.5455 0.4601808    
---
Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1 

It OK, but I need to know the significance of model, I know how to calculate, 
is not the problem, the question is: Exist a function that calculate this?
The deviance table that I need is:

          Df Deviance Resid. Df Resid. Dev       F    Pr(>F)    
NULL                          6     40.315                      
caules     1   23.436         5     16.879  23.4360  1.291e-06 ***
mo         1    0.545         4     16.333   0.5455  0.4601808    
Total      2   23.981         4     16.333  11.9905  0.000???  ***

This is my doubt. If the function anova dont make this, is possible to 
implement this in function, or is a wrong idea?

Thanks for all :)
Ronaldo
-- 
Steele's Plagiarism of Somebody's Philosophy:
	Everybody should believe in something -- I believe I'll have
	another drink.
--
|   //|\\   [*****************************][*******************]
|| ( ? ? )  [Ronaldo Reis J?nior          ][PentiumIII-600     ]
|     V     [ESALQ/USP-Entomologia, CP-09 ][HD: 30 + 10 Gb     ]
||  / l \   [13418-900 Piracicaba - SP    ][RAM: 128 Mb        ]
|  /(lin)\  [Fone: 19-429-4199 r.229      ][Video: SiS620-8Mb  ]
||/(linux)\ [chrysopa at insecta.ufv.br      ][Modem: Pctel-onboar]
|/ (linux) \[ICQ#: 5692561                ][SO: CL 7.0 (2.2.19)]
||  ( x )   [*****************************][*******************]
||| _/ \_Powered by Conectiva Linux 7.0 D+:) | Lxuser#: 205366
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cblouin at is2.dal.ca  Thu Oct 25 14:02:52 2001
From: cblouin at is2.dal.ca (Christian Blouin)
Date: Thu, 25 Oct 2001 09:02:52 -0300
Subject: [R] Simple graphing question
In-Reply-To: <Pine.LNX.4.33.0110250922190.17506-100000@moriarty.atm.ox.ac.uk>
Message-ID: <NFBBKFDEILGGFLKJLCLMMEAGCAAA.cblouin@is2.dal.ca>

Hi,
Is there a way to superimpose plots? This is a followup of the question on
putting 95% confidence interval in a ecdf. M. Maechler and k. halvorsen
ecdf.ksCl works like a charm by he way, thanks.

I have yet to find a way to get more than one ecdf in the same plot, or any
other data plotting for that matter.

	thanks,

	Christian

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Thu Oct 25 14:19:25 2001
From: ben at zoo.ufl.edu (Ben Bolker)
Date: Thu, 25 Oct 2001 08:19:25 -0400 (EDT)
Subject: [R] Simple graphing question
In-Reply-To: <NFBBKFDEILGGFLKJLCLMMEAGCAAA.cblouin@is2.dal.ca>
Message-ID: <Pine.LNX.4.30.0110250818320.12249-100000@bolker.zoo.ufl.edu>


  par(new=TRUE)

 (make sure to set axes=FALSE, xlab="",ylab="" unless you
really want these things plotted on top of your old graph)

or possibly
  lines() or points()

On Thu, 25 Oct 2001, Christian Blouin wrote:

> Hi,
> Is there a way to superimpose plots? This is a followup of the question on
> putting 95% confidence interval in a ecdf. M. Maechler and k. halvorsen
> ecdf.ksCl works like a charm by he way, thanks.
>
> I have yet to find a way to get more than one ecdf in the same plot, or any
> other data plotting for that matter.
>
> 	thanks,
>
> 	Christian
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker at zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jniesch at gwdg.de  Thu Oct 25 14:20:45 2001
From: jniesch at gwdg.de (Jens Nieschulze)
Date: Thu, 25 Oct 2001 14:20:45 +0200 (MET DST)
Subject: [R] Simple graphing question
In-Reply-To: <NFBBKFDEILGGFLKJLCLMMEAGCAAA.cblouin@is2.dal.ca>
Message-ID: <Pine.SO4.4.10.10110251418580.6119-100000@ufobi7.uni-forst.gwdg.de>

On Thu, 25 Oct 2001, Christian Blouin wrote:

> Hi,
> Is there a way to superimpose plots? This is a followup of the question on
> putting 95% confidence interval in a ecdf. M. Maechler and k. halvorsen
> ecdf.ksCl works like a charm by he way, thanks.

do-some-plotting-but-set-xlim()-ylim()
par(new=T)
do-some-more-plotting-with-same-xlim()-ylim()

is one way to do it
> 
> I have yet to find a way to get more than one ecdf in the same plot, or any
> other data plotting for that matter.
> 
> 	thanks,
> 
> 	Christian
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

***********************************************************************
Jens Nieschulze

Institute for Forest Biometrics &	Phone: ++49-551-39-12107
Applied Computer Science		Fax  : ++49-551-39-3465
Buesgenweg 4
37077 Goettingen		E-mail: jniesch at uni-forst.gwdg.de
GERMANY				http://www.uni-forst.gwdg.de/~jniesch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From roger at ysidro.econ.uiuc.edu  Thu Oct 25 15:16:18 2001
From: roger at ysidro.econ.uiuc.edu (Roger Koenker)
Date: Thu, 25 Oct 2001 08:16:18 -0500 (CDT)
Subject: [R] R with png for solaris?
In-Reply-To: <20011025233031.B1200@camille.indigoindustrial.co.nz>
Message-ID: <Pine.GSO.4.33.0110250811160.23858-100000@ysidro.econ.uiuc.edu>

Yes, as Robert Gentleman suggested moments after my question was posted
this was a problem of not removing the config.cache file.  I did a
make clean and then  rm config.cache and then everything built smoothly.
The resulting png files are very convenient particularly in the pdflatex
environment, thanks to Guido Masarotto and Brian Ripley for this.

Roger


url:	http://www.econ.uiuc.edu		Roger Koenker
email	roger at ysidro.econ.uiuc.edu		Department of Economics
vox: 	217-333-4558				University of Illinois
fax:   	217-244-6678				Champaign, IL 61820

On Thu, 25 Oct 2001, Jason Turner wrote:

> > I'm trying to remake R to use png on solaris.
> ...
> > and get this from ./configure
> ...
> > checking for png.h... (cached) yes
>
> Looks like you forgot a:
>
> rm config.cache
>
> before your
>
> ./configure
>
> The truly paranoid can rm -r the R-1.x.y directory structure,
> and untar the source again, but the above should work fine.
>
> Cheers
>
> Jason
> --
> Indigo Industrial Controls Ltd.
> 64-21-343-545
> jasont at indigoindustrial.co.nz
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Oct 25 15:36:39 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Oct 2001 15:36:39 +0200
Subject: [R] R with png for solaris?
In-Reply-To: <Pine.GSO.4.33.0110250811160.23858-100000@ysidro.econ.uiuc.edu>
References: <Pine.GSO.4.33.0110250811160.23858-100000@ysidro.econ.uiuc.edu>
Message-ID: <x2itd3rgd4.fsf@blueberry.kubism.ku.dk>

Roger Koenker <roger at ysidro.econ.uiuc.edu> writes:

> The resulting png files are very convenient particularly in the pdflatex
> environment

Um, no... 

PNG is a raster format. You'd likely be better off writing PDF
directly or using epstopdf on PostScript output.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From duncan at research.bell-labs.com  Thu Oct 25 16:24:35 2001
From: duncan at research.bell-labs.com (Duncan Temple Lang)
Date: Thu, 25 Oct 2001 10:24:35 -0400
Subject: [R] Parsing of HTML files in R
In-Reply-To: <3BD59564.B865D5E@liacc.up.pt>; from ltorgo@liacc.up.pt on Tue, Oct 23, 2001 at 04:05:56PM +0000
References: <3BD59564.B865D5E@liacc.up.pt>
Message-ID: <20011025102435.C2426@jessie.research.bell-labs.com>


If my memory serves me correctly, I believe that Dan Veillard's libxml
library provides an adaptation of the XML parser that handles HTML. In
that case, I can add something to the XML package that allows us to
access the HTML parser and use the same interface for both XML and
HTML from within R. I'll take a look and see if this is relatively
easy to do.


Luis Torgo wrote:
> Is there any package similar to the XML package that is able to
> "extract" relevant information from HTML files. Namely, I'm interested
> in obtained data that is represented as a HTML table, into some R-type
> structure.
> Thank you.
> 
> --
> Luis Torgo
>     FEP/LIACC, University of Porto   Phone : (+351) 22 607 88 30
>     Machine Learning Group           Fax   : (+351) 22 600 36 54
>     R. Campo Alegre, 823             email : ltorgo at liacc.up.pt
>     4150 PORTO   -  PORTUGAL         WWW   : http://www.liacc.up.pt/~ltorgo
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan at research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bates at stat.wisc.edu  Thu Oct 25 16:38:55 2001
From: bates at stat.wisc.edu (Douglas Bates)
Date: 25 Oct 2001 09:38:55 -0500
Subject: [R] Parsing of HTML files in R
In-Reply-To: <20011025102435.C2426@jessie.research.bell-labs.com>
References: <3BD59564.B865D5E@liacc.up.pt>
	<20011025102435.C2426@jessie.research.bell-labs.com>
Message-ID: <6rpu7b7pj4.fsf@franz.stat.wisc.edu>

Duncan Temple Lang <duncan at research.bell-labs.com> writes:

> If my memory serves me correctly, I believe that Dan Veillard's libxml
> library provides an adaptation of the XML parser that handles HTML. In
> that case, I can add something to the XML package that allows us to
> access the HTML parser and use the same interface for both XML and
> HTML from within R. I'll take a look and see if this is relatively
> easy to do.

Alternatively, try to transform your HTML to XHTML which can be parsed
as XML.  See the documentation on the "tidy" utility at

                http://www.w3.org/People/Raggett/tidy/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From siim at obs.ee  Thu Oct 25 16:52:12 2001
From: siim at obs.ee (Ott Toomet)
Date: Thu, 25 Oct 2001 16:52:12 +0200 (CEST)
Subject: [R] Simple graphing question
In-Reply-To: <NFBBKFDEILGGFLKJLCLMMEAGCAAA.cblouin@is2.dal.ca>
Message-ID: <Pine.LNX.4.33.0110251650280.4789-100000@ecopc15.eco.au.dk>

Hi,

how are you plotting?  Have you tried e.g.

> plot( x, y1)
> lines( x, y2)

this should draw the function y2 on the same graph where you plotted y1

Ott Toomet




On Thu, 25 Oct 2001, Christian Blouin wrote:

> Hi,
> Is there a way to superimpose plots? This is a followup of the question on
> putting 95% confidence interval in a ecdf. M. Maechler and k. halvorsen
> ecdf.ksCl works like a charm by he way, thanks.
>
> I have yet to find a way to get more than one ecdf in the same plot, or any
> other data plotting for that matter.
>
> 	thanks,
>
> 	Christian
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mark at myatt.demon.co.uk  Thu Oct 25 15:28:38 2001
From: mark at myatt.demon.co.uk (Mark Myatt)
Date: Thu, 25 Oct 2001 14:28:38 +0100
Subject: [R] Simple graphing question
In-Reply-To: <NFBBKFDEILGGFLKJLCLMMEAGCAAA.cblouin@is2.dal.ca>
References: <Pine.LNX.4.33.0110250922190.17506-100000@moriarty.atm.ox.ac.uk>
 <NFBBKFDEILGGFLKJLCLMMEAGCAAA.cblouin@is2.dal.ca>
Message-ID: <m9yx3KAGOB27EwyE@myatt.demon.co.uk>

Christian Blouin <cblouin at is2.dal.ca> writes:
>Hi,
>Is there a way to superimpose plots? This is a followup of the question on
>putting 95% confidence interval in a ecdf. M. Maechler and k. halvorsen
>ecdf.ksCl works like a charm by he way, thanks.
>
>I have yet to find a way to get more than one ecdf in the same plot, or any
>other data plotting for that matter.

Try:

        par(new = TRUE)

Before the 2nd plot.

Mark


--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Oct 25 17:56:21 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Oct 2001 17:56:21 +0200
Subject: [R] Simple graphing question
In-Reply-To: <NFBBKFDEILGGFLKJLCLMMEAGCAAA.cblouin@is2.dal.ca>
References: <NFBBKFDEILGGFLKJLCLMMEAGCAAA.cblouin@is2.dal.ca>
Message-ID: <x2elnrr9wa.fsf@blueberry.kubism.ku.dk>

"Christian Blouin" <cblouin at is2.dal.ca> writes:

> Hi,
> Is there a way to superimpose plots? This is a followup of the question on
> putting 95% confidence interval in a ecdf. M. Maechler and k. halvorsen
> ecdf.ksCl works like a charm by he way, thanks.
> 
> I have yet to find a way to get more than one ecdf in the same plot, or any
> other data plotting for that matter.

In addition to all the other ideas that have been brought up, you
might want to check whether the plotting function accepts add=TRUE for
adding to an existing plot. 

plot.stepfun() does.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hans.gardfjell at eg.umu.se  Thu Oct 25 18:12:24 2001
From: hans.gardfjell at eg.umu.se (Hans Gardfjell)
Date: Thu, 25 Oct 2001 12:12:24 -0400
Subject: [R] How to save boot objects?
Message-ID: <3BD839E8.9153A267@eg.umu.se>

Hi,

I have problem with saving and later sourcing boot objects. A short
familiar example...

R : Copyright 2001, The R Development Core Team
Version 1.3.1  (2001-08-31)
...

> library(boot)
> data(city)
> ratio <- function(d, w)
+ sum(d$x * w)/sum(d$u * w)
> boot.res<-boot(city, ratio, R=999, stype="w")
> dump("boot.res","boot.res.R")
>
Save workspace image? [y/n/c]: n
hans at poa:~/seedtest$ R

R : Copyright 2001, The R Development Core Team
Version 1.3.1  (2001-08-31)...

> source("boot.res.R")
Error in structure(list(t0 = 1.5203125, t =
structure(c(1.24632352941176,  :
        couldn't find function "boot"
>
When sourcing the boot object it seems that if R is rerunning the
bootstrap procedure again.

My plan was to run  several boot commands from within a battchfile on a
remote server. "Dumping" them and later pick them up and calculate CI
etc. Why is dump/source behaving like this on boot objects? Does anyone
of you have a better suggestion than using dump for saving boot objects?

Thanks,

Hans Gardfjell
Ume? University



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rhskelto at atm.ox.ac.uk  Thu Oct 25 18:27:13 2001
From: rhskelto at atm.ox.ac.uk (Randall Skelton)
Date: Thu, 25 Oct 2001 17:27:13 +0100 (BST)
Subject: [R] Classes in R
In-Reply-To: <Pine.LNX.4.33.0110250922190.17506-100000@moriarty.atm.ox.ac.uk>
Message-ID: <Pine.LNX.4.33.0110251719240.12253-100000@mulligan.atm.ox.ac.uk>

Two quick questions.

First, why doesn't using the matrix function actually set the class of the
resulting object to "matrix"?

> a <- matrix(1,10,10)
> attributes(a)
 $dim
 [1] 10 10

or should I be using?

> a <- matrix(1,10,10); class(a) <- c("matrix");
> attributes(a)
$dim
[1] 10 10

$class
[1] "matrix"

Second, can somone please send me an example showing how inheritance works
in R?  The R Language Definition document isn't particularly clear on the
subject... i.e. NextMethod lacks a good example.

Cheers,
Randall

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Oct 25 18:38:56 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 25 Oct 2001 17:38:56 +0100 (BST)
Subject: [R] lowess C code
In-Reply-To: <3BD706EA.69090573@EUnet.at>
Message-ID: <Pine.LNX.4.31.0110251734330.27189-100000@gannet.stats>

On Wed, 24 Oct 2001, cstrato at EUnet.at wrote:

> Hi,
>
> It would be great to have a C function extending lowess to multiple
> dimensions, i.e. about 100 dimensions. It is not quite clear to me
> whether this is possible.

It would most probably be statistical nonsense.  Local smoothing just
isn't local in high-dimensional spaces without enormous volumes of data.
Indeed, with 100-dimensional inputs you are going to be hard-pressed to
make any non-linear method work well without needing far more data than R
could cope with.

> As far as I understand, loess can support only up to 14 dimensions.
> Is this correct?

You have the sources ....


> Best regards
> Christian Stratowa
> ----------------------------------
> C.h.r.i.s.t.i.a.n  S.t.r.a.t.o.w.a
> V.i.e.n.n.a,  A.u.s.t.r.i.a
>
>
> Prof Brian Ripley wrote:
>
> > On Tue, 23 Oct 2001, pawel wrote:
> >
> > > Hi,
> > > I understand that the core of lowess() function is written in C.
> > > Is the C source code available and if yes, how can I get to it?
> >
> > It's in the R sources in src/appl/lowess.c
> >
> > > I want to write a multidimensional extension of lowess() if you know of
> > > anybody who has implemented this already I would greatly appreciate any
> > > references or pointers.
> >
> > Look at loess in package modreg for one such.
> >
> > > thank you very much,
> > > pawel
> > >
> > >
> > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > >
> >
> > --
> > Brian D. Ripley,                  ripley at stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Oct 25 18:45:21 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 25 Oct 2001 17:45:21 +0100 (BST)
Subject: [R] R with png for solaris?
In-Reply-To: <x2itd3rgd4.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.31.0110251743540.27189-100000@gannet.stats>

On 25 Oct 2001, Peter Dalgaard BSA wrote:

> Roger Koenker <roger at ysidro.econ.uiuc.edu> writes:
>
> > The resulting png files are very convenient particularly in the pdflatex
> > environment
>
> Um, no...
>
> PNG is a raster format. You'd likely be better off writing PDF
> directly or using epstopdf on PostScript output.

Definitely better off with R's pdf() device unless you are really writing
raster images with image(), and possibly even then as pdftex handles
.pdf files better than .png ones.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Oct 25 18:49:25 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Oct 2001 18:49:25 +0200
Subject: [R] How to save boot objects?
In-Reply-To: <3BD839E8.9153A267@eg.umu.se>
References: <3BD839E8.9153A267@eg.umu.se>
Message-ID: <x2adyfr7fu.fsf@blueberry.kubism.ku.dk>

Hans Gardfjell <hans.gardfjell at eg.umu.se> writes:

> Hi,
> 
> I have problem with saving and later sourcing boot objects. A short
> familiar example...
> 
> R : Copyright 2001, The R Development Core Team
> Version 1.3.1  (2001-08-31)
> ...
> 
> > library(boot)
> > data(city)
> > ratio <- function(d, w)
> + sum(d$x * w)/sum(d$u * w)
> > boot.res<-boot(city, ratio, R=999, stype="w")
> > dump("boot.res","boot.res.R")
> >
> Save workspace image? [y/n/c]: n
> hans at poa:~/seedtest$ R
> 
> R : Copyright 2001, The R Development Core Team
> Version 1.3.1  (2001-08-31)...
> 
> > source("boot.res.R")
> Error in structure(list(t0 = 1.5203125, t =
> structure(c(1.24632352941176,  :
>         couldn't find function "boot"
> >
> When sourcing the boot object it seems that if R is rerunning the
> bootstrap procedure again.
> 
> My plan was to run  several boot commands from within a battchfile on a
> remote server. "Dumping" them and later pick them up and calculate CI
> etc. Why is dump/source behaving like this on boot objects? Does anyone
> of you have a better suggestion than using dump for saving boot objects?

You could use save/load instead.

The cause for the trouble seems to be that the dumped data end up with

1.52199762187872, 1.4321608040201, 1.32309746328438, 1.47077922077922, 
1.66085578446910, 1.78693181818182), .Dim = c(999, 1)), R = 999, 
    data = structure(list(u = c(138, 93, 61, 179, 48, 37, 29, 
    23, 30, 2), x = c(143, 104, 69, 260, 75, 63, 50, 48, 111, 
    50)), .Names = c("u", "x"), row.names = c("1", "2", "3", 
    "4", "5", "6", "7", "8", "9", "10"), class = "data.frame"), 
    seed = c(1, 1433911782, 1092627872), statistic = function (d, w) 
    sum(d$x * w)/sum(d$u * w), sim = "ordinary", call = boot(data = city, 
        statistic = ratio, R = 999, stype = "w"), stype = "w", 
    strata = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1), weights = c(0.1, 
    0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1)), .Names = c("t0", 
"t", "R", "data", "seed", "statistic", "sim", "call", "stype", 
"strata", "weights"), class = "boot")

with the culprit being the

call = boot(data = city, statistic = ratio, R = 999, stype = "w")

We might need to put a quote() around language objects when deparsing
lists. 

Same thing happens with lm objects, and S-PLUS has the same problem
with those, so at least we're bug-compatible...

Fundamentally, the problem is that R/S objects aren't always
deparseable (and even when they are, parse and reparse are not unique
inverses).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bates at stat.wisc.edu  Thu Oct 25 18:55:38 2001
From: bates at stat.wisc.edu (Douglas Bates)
Date: 25 Oct 2001 11:55:38 -0500
Subject: [R] How to save boot objects?
In-Reply-To: <3BD839E8.9153A267@eg.umu.se>
References: <3BD839E8.9153A267@eg.umu.se>
Message-ID: <6rr8rr64mt.fsf@franz.stat.wisc.edu>

Hans Gardfjell <hans.gardfjell at eg.umu.se> writes:

> I have problem with saving and later sourcing boot objects. A short
> familiar example...
> 
> R : Copyright 2001, The R Development Core Team
> Version 1.3.1  (2001-08-31)
> ...
> 
> > library(boot)
> > data(city)
> > ratio <- function(d, w)
> + sum(d$x * w)/sum(d$u * w)
> > boot.res<-boot(city, ratio, R=999, stype="w")
> > dump("boot.res","boot.res.R")
> >
> Save workspace image? [y/n/c]: n
> hans at poa:~/seedtest$ R
> 
> R : Copyright 2001, The R Development Core Team
> Version 1.3.1  (2001-08-31)...
> 
> > source("boot.res.R")
> Error in structure(list(t0 = 1.5203125, t =
> structure(c(1.24632352941176,  :
>         couldn't find function "boot"
> >
> When sourcing the boot object it seems that if R is rerunning the
> bootstrap procedure again.
> 
> My plan was to run  several boot commands from within a battchfile on a
> remote server. "Dumping" them and later pick them up and calculate CI
> etc. Why is dump/source behaving like this on boot objects? Does anyone
> of you have a better suggestion than using dump for saving boot objects?
> 
> Thanks,
> 
> Hans Gardfjell
> Ume? University

Try using save/load instead of dump and source.  The source function
evaluates the expression it is given and the call that generates the
bootstrap sample is probably saved with the sample.

I used

> library(boot)
> data(city)
> ratio <- function(d, w) sum(d$x * w)/sum(d$u * w)
> boot.res <- boot(city, ratio, R=999, stype="w")
> save(boot.res, file = "/tmp/boot.res.rda")
> q("no")

then started a fresh session and was able to load the saved file
without including the boot library.

R : Copyright 2001, The R Development Core Team
...
Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> load("boot.res.rda")
> q()
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fharrell at virginia.edu  Thu Oct 25 19:01:20 2001
From: fharrell at virginia.edu (Frank E Harrell Jr)
Date: Thu, 25 Oct 2001 13:01:20 -0400
Subject: [R] A speed improvement challenge
Message-ID: <3BD84560.79351740@virginia.edu>

I need to create a vector of probability-weighted randomly
sampled values which each satisfy a different criterion.
This causes the sampling weights to vary between elements
of the vector.  Here is some example code, with x, y,
and freq being vectors each of length n.  aty is a
vector of length m.

  yinv <- double(m)
  for(i in 1:m) {
    s <- abs(y-aty[i]) < del
    yinv[i] <- if(any(s)) 
     sample(x[s], 1, replace=F, prob=freq[s]/sum(freq[s])) else
     approx(y, x, xout=aty[i], rule=2)$y
  }

Big picture: For a tabulated function given by (x,y) and
frequency of each occurrence of (x,y) given by the corresponding
element in freq, find the inverse of the function (x as a function
of y) for a vector of desired y-values aty[1],...aty[m].  If
the function has a nearly flat segment, let the resulting x[i] value
be a weighted randomly sampled x such that f(x) is within del of
the target y-value aty.  If no tabulated y is within del of the
target y, use reverse linear interpolation to get y inverse.
The reverse linear interpolation can easily be vectorized
(approx(y, x, xout=aty, rule=2)$y).

Thanks for any ideas.
-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From roger at ysidro.econ.uiuc.edu  Thu Oct 25 19:10:53 2001
From: roger at ysidro.econ.uiuc.edu (Roger Koenker)
Date: Thu, 25 Oct 2001 12:10:53 -0500 (CDT)
Subject: [R] R with png for solaris?
In-Reply-To: <Pine.LNX.4.31.0110251743540.27189-100000@gannet.stats>
Message-ID: <Pine.GSO.4.33.0110251207470.23858-100000@ysidro.econ.uiuc.edu>

Yes, I now agree.  I had had some trouble with postscript to pdf conversion
and had not tried the pdf() option, but it is now clear that either of
Peter's options are preferable to png() for what I wanted, which by the
way was pdflatex |ppower4 |acroread for projected slides.  Thanks to all
for the very helpful advice.


url:	http://www.econ.uiuc.edu		Roger Koenker
email	roger at ysidro.econ.uiuc.edu		Department of Economics
vox: 	217-333-4558				University of Illinois
fax:   	217-244-6678				Champaign, IL 61820

On Thu, 25 Oct 2001, Prof Brian Ripley wrote:

> On 25 Oct 2001, Peter Dalgaard BSA wrote:
>
> > Roger Koenker <roger at ysidro.econ.uiuc.edu> writes:
> >
> > > The resulting png files are very convenient particularly in the pdflatex
> > > environment
> >
> > Um, no...
> >
> > PNG is a raster format. You'd likely be better off writing PDF
> > directly or using epstopdf on PostScript output.
>
> Definitely better off with R's pdf() device unless you are really writing
> raster images with image(), and possibly even then as pdftex handles
> .pdf files better than .png ones.
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Friedrich.Leisch at ci.tuwien.ac.at  Thu Oct 25 19:15:02 2001
From: Friedrich.Leisch at ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 25 Oct 2001 19:15:02 +0200
Subject: [R] R with png for solaris?
In-Reply-To: <Pine.GSO.4.33.0110251207470.23858-100000@ysidro.econ.uiuc.edu>
References: <Pine.LNX.4.31.0110251743540.27189-100000@gannet.stats>
	<Pine.GSO.4.33.0110251207470.23858-100000@ysidro.econ.uiuc.edu>
Message-ID: <15320.18582.542975.374162@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 25 Oct 2001 12:10:53 -0500 (CDT),
>>>>> Roger Koenker (RK) wrote:

  > Yes, I now agree.  I had had some trouble with postscript to pdf conversion
  > and had not tried the pdf() option, but it is now clear that either of
  > Peter's options are preferable to png() for what I wanted, which by the
  > way was pdflatex |ppower4 |acroread for projected slides.  Thanks to all
  > for the very helpful advice.

If it is for online presentations then there are some cases when png
is preferable to pdf: when you have scatter plots with LOTS of points
(several thousand, but that depends on your hardware), then acroread
can get very slow in rendering the figure (and some printers do run
out of memory when printing the PS) -> that's the only situation when
I prefer a bitmap to a vector graphic.

Best,

-- 
-------------------------------------------------------------------
                        Friedrich  Leisch 
Institut f?r Statistik                     Tel: (+43 1) 58801 10715
Technische Universit?t Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstra?e 8-10/1071      Friedrich.Leisch at ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From nychka at cgd.ucar.edu  Thu Oct 25 21:49:56 2001
From: nychka at cgd.ucar.edu (Doug Nychka)
Date: Thu, 25 Oct 2001 13:49:56 -0600 (MDT)
Subject: [R] R with png for solaris?
In-Reply-To: <15320.18582.542975.374162@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.30.0110251347221.15735-100000@goldhill.cgd.ucar.edu>


Another way to deal with graphics that are large ( e.g. images) is to save
them as postscript and then convert them to jpg format. I like using xv to
do this. The graphicx package with pdflatex supports this format for
figures.

Doug

-----------------------------------------------------------------------------
Doug Nychka,

Geophysical Statistics Project              Email: nychka at ucar.edu
National Center for Atmospheric Research    Voice: 303-497-1711
Climate and Global Dynamics Division          FAX: 303-497-1333
Boulder, CO  80307                            Web: www.cgd.ucar.edu/~nychka

Address for overnight mail: 1850 Table Mesa Drive, Boulder, CO 80305


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jfox at mcmaster.ca  Thu Oct 25 22:49:56 2001
From: jfox at mcmaster.ca (John Fox)
Date: Thu, 25 Oct 2001 16:49:56 -0400
Subject: [R] Classes in R
In-Reply-To: <Pine.LNX.4.33.0110251719240.12253-100000@mulligan.atm.ox.a
 c.uk>
References: <Pine.LNX.4.33.0110250922190.17506-100000@moriarty.atm.ox.ac.uk>
Message-ID: <5.1.0.14.2.20011025162634.01d233c0@mcmail.cis.mcmaster.ca>

Dear Randall,

At 05:27 PM 10/25/2001 +0100, you wrote:
>Two quick questions.
>
>First, why doesn't using the matrix function actually set the class of the
>resulting object to "matrix"?
>
> > a <- matrix(1,10,10)
> > attributes(a)
>  $dim
>  [1] 10 10
>
>or should I be using?
>
> > a <- matrix(1,10,10); class(a) <- c("matrix");
> > attributes(a)
>$dim
>[1] 10 10
>
>$class
>[1] "matrix"

In R, not all objects have a class attribute, and hence not all objects 
belong to a class. In particular, matrices do not (necessarily) belong to a 
class. A matrix in R is a vector with a length-2 dim attribute.

Perhaps it would be more responsive to ask why you require that the matrix 
a belong to the class 'matrix'?

By the way, there is a Matrix library that creates matrices of class 'Matrix'.

>Second, can somone please send me an example showing how inheritance works
>in R?  The R Language Definition document isn't particularly clear on the
>subject... i.e. NextMethod lacks a good example.

 From R help:

An R ``object'' is a data object which has a class attribute. A class 
attribute is a character vector giving the names of the classes which the 
object ``inherits'' from. When a generic function fun is applied to an 
object with class attribute c("first", "second"), the system searches for a 
function called fun.first and, if it finds it, applied it to the object. If 
no such function is found a function called fun.second is tried. If no 
class name produces a suitable function, the function fun.default is used.

(I realize that this isn't usually what's meant by "object-oriented 
programming" or "inheritance.")

Thus, for example:

 > M <- matrix(1:12, 3, 4)
 > class(M) <- c('a', 'b')
 >
 > print.a <- function (x, ...) {
+     print.matrix(x)
+     NextMethod()
+     }
 >
 > print.b <- function(x, ...) print(as.vector(x))
 >
 > M
      [,1] [,2] [,3] [,4]
[1,]    1    4    7   10
[2,]    2    5    8   11
[3,]    3    6    9   12
  [1]  1  2  3  4  5  6  7  8  9 10 11 12
 >

I hope that this helps,
  John




-----------------------------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario, Canada L8S 4M4
email: jfox at mcmaster.ca
phone: 905-525-9140x23604
web: www.socsci.mcmaster.ca/jfox
-----------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Paul.Bliese at NA.AMEDD.ARMY.MIL  Thu Oct 25 22:54:12 2001
From: Paul.Bliese at NA.AMEDD.ARMY.MIL (Bliese, Paul D MAJ WRAIR-Wash DC)
Date: Thu, 25 Oct 2001 16:54:12 -0400
Subject: [R] Data packages in R V 1.3.1 in Win2K
Message-ID: <58CAB2332C0DD511BC7900A0C9EA316D428B90@DASMTYJQF009>

There is probably an easy answer to my problem...

Over the last couple of years, I've put together a simple package for
courses I've taught.  The package contains some data sets.

In R versions prior to 1.3.1, I have no trouble attaching the data.  I can
use ">data()" to see the available data sets, and ">data(mydata)" to put the
data set into the local environment.  In R V 1.3.1, the ">data()" command
still lists the data sets, but the ">data(mydata)" command returns an error
saying the file cannot be found. It appears to be looking in
"c:\documents...\temp" instead of in the data subdirectory assocatied with
the package.  Functions and help files seem to work fine.

Operating system:  Windows 2000

Any thoughts?

Paul Bliese
Walter Reed Army Institute of Research
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Oct 25 22:56:40 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 25 Oct 2001 21:56:40 +0100 (BST)
Subject: [R] zeros in table() output in version 1.3.1
In-Reply-To: <tUGj9DAaHo17EwYC@myatt.demon.co.uk>
Message-ID: <Pine.GSO.4.31.0110252154590.7581-100000@auk.stats>

On Wed, 24 Oct 2001, Mark Myatt wrote:

> Steve Shiboski <steve at biostat.ucsf.edu> writes:
> >Are the following differences in table() output
> >between versions 1.3.0 and 1.3.1 a feature, a bug
> >or a problem with my implementation?
> >
> >(I am running under Solaris 2.7 SPARC, built using the
> >Sun C and FORTRAN compilers.)
> >
> >Version 1.3.1:
> >
> >> table(c(0,1),c(0,1))
> >
> >    1
> >  1 1
> >
> >Version 1.3.0:
> >
> >> table(c(0,1),c(0,1))
> >
> >    0 1
> >  0 1 0
> >  1 0 1
>
> Odd. I don't get this behaviour on my Windows box. I think that,
> perhaps, it is down to how the binary was compiled. Did you use the Sun
> tools or the GNU tools?

I don't see it on Solaris 2.7 built with Sun's C and Fortran using either
Sun or GNU tools.   So it seems definitely a priblem with one specific
installation.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mabramso at gmu.edu  Fri Oct 26 04:26:02 2001
From: mabramso at gmu.edu (Myriam Abramson)
Date: 25 Oct 2001 22:26:02 -0400
Subject: [R] LVQ
Message-ID: <m3lmhz9lxh.fsf@home.sweet.home>


Hi!

I saw some LVQ (Learning Vector Quantization) functionality in the
documentation with help.search("lvq") but the functions are not
there. What should I load to get lvqtrain, lvqtest, etc. ?

TIA

-- 
                                   myriam

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fred at poleto.com  Fri Oct 26 05:39:54 2001
From: fred at poleto.com (Frederico Zanqueta Poleto)
Date: Fri, 26 Oct 2001 01:39:54 -0200
Subject: [R] glim and gls
Message-ID: <3BD8DB0A.EEF976BC@poleto.com>

Hello,

I would like to know if there is any package that allow us to fit
Generalized Linear Models via Maximum Likelihood and Linear Models using
Generalized Least Squarse in R as the functions glim and gls,
respectively, from S-Plus.

Also, anybody know if there is any package that fit Log-Linear Models
using Generalized Least Squares?

Any help will be very useful.

Thanks,
--
Frederico Zanqueta Poleto

fred at poleto.com - ICQ# 4129787


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ligges at statistik.uni-dortmund.de  Fri Oct 26 08:33:44 2001
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 26 Oct 2001 08:33:44 +0200
Subject: [R] LVQ
References: <m3lmhz9lxh.fsf@home.sweet.home>
Message-ID: <3BD903C8.C82802B6@statistik.uni-dortmund.de>



Myriam Abramson wrote:
> 
> Hi!
> 
> I saw some LVQ (Learning Vector Quantization) functionality in the
> documentation with help.search("lvq") but the functions are not
> there. What should I load to get lvqtrain, lvqtest, etc. ?

help.search says:
  lvqtest(class)                Classify Test Set from LVQ Codebook
          ^^^^^^
so you want to use  
  library(class)
to make the functions available.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From joerg.maeder at ethz.ch  Fri Oct 26 08:43:30 2001
From: joerg.maeder at ethz.ch (Joerg Maeder)
Date: Fri, 26 Oct 2001 08:43:30 +0200
Subject: [R] LVQ
References: <m3lmhz9lxh.fsf@home.sweet.home>
Message-ID: <3BD90612.80A3B0BB@ethz.ch>

Hi,

on the top of the documentation page you visit is a remark in which
package the function is defined. The common functions are in the base
package. The functions around lvq are in the package class. See the
following link for avaible packages (including how to install):

http://www.ci.tuwien.ac.at/R/doc/FAQ/R-FAQ.html#R%20Add-On%20Packages

the class package is inside the VR bundle. Link:

http://www.ci.tuwien.ac.at/R/src/contrib/PACKAGES.html#VR

gruess

joerg

Myriam Abramson wrote:
> 
> Hi!
> 
> I saw some LVQ (Learning Vector Quantization) functionality in the
> documentation with help.search("lvq") but the functions are not
> there. What should I load to get lvqtrain, lvqtest, etc. ?
> 
> TIA
> 
> --
>                                    myriam
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
    Joerg Maeder             IACETH              INSTITUTE
   PhD Student                              FOR ATMOSPHERIC 
  Phone: +41 1 633 36 25                 AND CLIMATE SCIENCE
 Fax: +41 1 633 10 58                  ETH Z?RICH Switzerland
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From emilia.stegemann at epost.de  Fri Oct 26 10:37:41 2001
From: emilia.stegemann at epost.de (Dr. Berthold Kramm)
Date: Fri, 26 Oct 2001 10:37:41 +0200
Subject: [R] step function for glm()
Message-ID: <3BD920D4.DEC269F9@epost.de>

Hi,

is there a possibility using the step() function together with a glm()
model, to force keeping some of the covariates in the model ?? and not
having them dropped ??

Thanks,
Berthold

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Oct 26 10:47:06 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 26 Oct 2001 09:47:06 +0100 (BST)
Subject: [R] step function for glm()
In-Reply-To: <3BD920D4.DEC269F9@epost.de>
Message-ID: <Pine.LNX.4.31.0110260944120.30646-100000@gannet.stats>

On Fri, 26 Oct 2001, Dr. Berthold Kramm wrote:

> is there a possibility using the step() function together with a glm()
> model, to force keeping some of the covariates in the model ?? and not
> having them dropped ??

Set a lower scope ... scope can be a list with components `upper' and
`lower'.

Looks to me like the documentation needs to be expanded: will do.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bxc at novonordisk.com  Fri Oct 26 13:14:59 2001
From: bxc at novonordisk.com (BXC (Bendix Carstensen))
Date: Fri, 26 Oct 2001 13:14:59 +0200
Subject: [R] cut - suggestion
Message-ID: <D5A7D734C9C5D211B9E30008C78923020E95B011@exdkba03.novo.dk>

I often use cut in order to produce quick tabulations of continuous data.
But if you choose "sensibe cotpoints as in:

> z <- rnorm(100)
> table( cut( z, breaks=seq(-1,1,0.5) ),
+ cut( z, breaks=c(-100,0,100) ) )
           
            (-100,0] (0,100]
  (-1,-0.5]       18       0
  (-0.5,0]        19       0
  (0,0.5]          0      17
  (0.5,1]          0      19
 
you get labels that do not align properly.
Looking into cut this descends from the definition of the labels:

            ch.br <- formatC(breaks, dig = dig, wid = 1)

i.e. really from the default of the format-agrument of formatC, which 
is "g" (significant digits). Inside formatC is namely:

if (missing(format) || is.null(format)) 
        format <- if (mode == "integer") 
            "d"
        else "g"

Significant digtits do not align properly and makes things difficult to
read,
so i sugget that a `,format="f"' be added in the definition of ch.br in
cut.

----------------------
Bendix Carstensen
Senior Statistician
Steno Diabetes Centre
Niels Steensens Vej 2
DK-2820 Gentofte
Denmark
tel: +45 44 43 87 38
mob: +45 28 25 87 38
fax: +45 44 43 73 13
bxc at novonordisk.com
www.biostat.ku.dk/~bxc
----------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bxc at novonordisk.com  Fri Oct 26 13:25:57 2001
From: bxc at novonordisk.com (BXC (Bendix Carstensen))
Date: Fri, 26 Oct 2001 13:25:57 +0200
Subject: [R] Bug or new concept in formatC?
Message-ID: <D5A7D734C9C5D211B9E30008C78923020E95B012@exdkba03.novo.dk>

As a sequel to my previous mail on cut, formatC does not produce 
what I have been taught is significant digits:

> x <- c(1.0793,1.0796, 11.0954, 11.0736 )
> formatC(x,digits=3,format="g")
[1] "1.08" "1.08" "11.1" "11.1"

(3,3,3,3) significant digits OK

> formatC(x,digits=3,format="f")
[1] "1.079"  "1.080"  "11.095" "11.074"

(3,3,3,3) digits after point, [(4,4,5,5) significant] OK

> formatC(x,digits=4,format="g")
[1] "1.079" " 1.08" " 11.1" "11.07"

(4,3,3,4) significant digits --- not OK (?)

Apparently formatC thinks that trailing 0s cannot count as significant.
Is this a bug or another concept of significant digits?

Bendix Carstensen

----------------------
Bendix Carstensen
Senior Statistician
Steno Diabetes Centre
Niels Steensens Vej 2
DK-2820 Gentofte
Denmark
tel: +45 44 43 87 38
mob: +45 28 25 87 38
fax: +45 44 43 73 13
bxc at novonordisk.com
www.biostat.ku.dk/~bxc
----------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Fri Oct 26 14:26:15 2001
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 26 Oct 2001 14:26:15 +0200
Subject: [R] Re: Bug or new concept in formatC? -- neither
In-Reply-To: <D5A7D734C9C5D211B9E30008C78923020E95B012@exdkba03.novo.dk>
References: <D5A7D734C9C5D211B9E30008C78923020E95B012@exdkba03.novo.dk>
Message-ID: <15321.22119.438096.893160@gargle.gargle.HOWL>

>>>>> "BXC" == BXC (Bendix Carstensen) <bxc at novonordisk.com> writes:

    BXC> As a sequel to my previous mail on cut, formatC does not produce
    BXC> what I have been taught is significant digits:

    >> x <- c(1.0793,1.0796, 11.0954, 11.0736 )
    >> formatC(x,digits=3,format="g")
    BXC> [1] "1.08" "1.08" "11.1" "11.1"

    BXC> (3,3,3,3) significant digits OK

    >> formatC(x,digits=3,format="f")
    BXC> [1] "1.079" "1.080" "11.095" "11.074"

    BXC> (3,3,3,3) digits after point, [(4,4,5,5) significant] OK

    >> formatC(x,digits=4,format="g")
    BXC> [1] "1.079" " 1.08" " 11.1" "11.07"

    BXC> (4,3,3,4) significant digits --- not OK (?)

    BXC> Apparently formatC thinks that trailing 0s cannot count as
    BXC> significant.  Is this a bug or another concept of significant
    BXC> digits?

No, it's just how ISO C (ANSI C) defines the behavior of the "g" format for
(s)printf.
However, there's also a flag argument (also well defined by ISO C) which
helps here, see below.
Yes, the help(formatC) page proably could explain all this, since nowadays
not everyone has a version of Kernighan&Ritchie close at hand (I still do).
Patches for  src/library/base/man/formatc.Rd are very welcome...

What you want, Bendix, is   flag = "#" :

> formatC(c(1.0793,1.0796, 11.0954, 11.0736),digits=4,format="g")
[1] "1.079" " 1.08" " 11.1" "11.07"

> formatC(c(1.0793,1.0796, 11.0954, 11.0736),digits=4,format="g",flag="-")
[1] "1.079" "1.08 " "11.1 " "11.07"

> formatC(c(1.0793,1.0796, 11.0954, 11.0736),digits=4,format="g",flag="0")
[1] "1.079" "01.08" "011.1" "11.07"

> formatC(c(1.0793,1.0796, 11.0954, 11.0736),digits=4,format="g",flag="#")
[1] "1.079" "1.080" "11.10" "11.07"
		 

Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From duncan at research.bell-labs.com  Fri Oct 26 16:56:09 2001
From: duncan at research.bell-labs.com (Duncan Temple Lang)
Date: Fri, 26 Oct 2001 10:56:09 -0400
Subject: [R] Parsing of HTML files in R
In-Reply-To: <3BD59564.B865D5E@liacc.up.pt>; from ltorgo@liacc.up.pt on Tue, Oct 23, 2001 at 04:05:56PM +0000
References: <3BD59564.B865D5E@liacc.up.pt>
Message-ID: <20011026105609.C8665@jessie.research.bell-labs.com>


Hi Luis,

 I just uploaded the latest version of the XML package
to the Omegahat web site at
  http://www.omegahat.org/RSXML/XML_0.7-0.tar.gz
and this now has support for parsing HTML.

I only added support for the DOM style of parsing, i.e.
reading the entire tree and then applying R functions
to convert it. Hopefully that will be enough to suit
your needs.

Please let me know if there are any problems with the package.

 Thanks for the suggestion to include HTML support.

 Duncan.

Luis Torgo wrote:
> Is there any package similar to the XML package that is able to
> "extract" relevant information from HTML files. Namely, I'm interested
> in obtained data that is represented as a HTML table, into some R-type
> structure.
> Thank you.
> 
> --
> Luis Torgo
>     FEP/LIACC, University of Porto   Phone : (+351) 22 607 88 30
>     Machine Learning Group           Fax   : (+351) 22 600 36 54
>     R. Campo Alegre, 823             email : ltorgo at liacc.up.pt
>     4150 PORTO   -  PORTUGAL         WWW   : http://www.liacc.up.pt/~ltorgo
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan at research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From steve at biostat.ucsf.edu  Fri Oct 26 18:34:14 2001
From: steve at biostat.ucsf.edu (Steve Shiboski)
Date: Fri, 26 Oct 2001 09:34:14 -0700
Subject: [R] zeros in table() output in version 1.3.1
In-Reply-To: <Pine.GSO.4.31.0110252154590.7581-100000@auk.stats>; from ripley@stats.ox.ac.uk on Thu, Oct 25, 2001 at 09:56:40PM +0100
References: <tUGj9DAaHo17EwYC@myatt.demon.co.uk> <Pine.GSO.4.31.0110252154590.7581-100000@auk.stats>
Message-ID: <20011026093414.A8448@chanane.ucsf.edu>

It turns out to be associated with the compilation flags
I put in the config.site file for the Sun C compiler.
Recompiling with the default flags chosen by R eliminates
the problem.

I put the following flags in config.site before building:

 CFLAGS=-fast 
 SHLIB_CFLAGS=-lsunmath 
 CPICFLAGS=-xcode=pic32

Not sure which caused the problem with table(), but
R's defaults eliminate -fast, -xcode=pic32 and -lsunmath.

Thanks for the responses.

-S
-- 
Stephen Shiboski  -------------------  steve at biostat.ucsf.edu
Division of Biostatistics                 voice: 415-476-0533
University of California, San Francisco     fax: 415-476-6014
500 Parnassus Avenue, MU 420-W;  San Francisco, CA 94143-0560

On Thu, Oct 25, 2001 at 09:56:40PM +0100, Prof Brian D Ripley wrote:
> On Wed, 24 Oct 2001, Mark Myatt wrote:
> 
> > Steve Shiboski <steve at biostat.ucsf.edu> writes:
> > >Are the following differences in table() output
> > >between versions 1.3.0 and 1.3.1 a feature, a bug
> > >or a problem with my implementation?
> > >
> > >(I am running under Solaris 2.7 SPARC, built using the
> > >Sun C and FORTRAN compilers.)
> > >
> > >Version 1.3.1:
> > >
> > >> table(c(0,1),c(0,1))
> > >
> > >    1
> > >  1 1
> > >
> > >Version 1.3.0:
> > >
> > >> table(c(0,1),c(0,1))
> > >
> > >    0 1
> > >  0 1 0
> > >  1 0 1
> >
> > Odd. I don't get this behaviour on my Windows box. I think that,
> > perhaps, it is down to how the binary was compiled. Did you use the Sun
> > tools or the GNU tools?
> 
> I don't see it on Solaris 2.7 built with Sun's C and Fortran using either
> Sun or GNU tools.   So it seems definitely a priblem with one specific
> installation.
> 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Oct 26 18:52:28 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 26 Oct 2001 17:52:28 +0100 (BST)
Subject: [R] zeros in table() output in version 1.3.1
In-Reply-To: <20011026093414.A8448@chanane.ucsf.edu>
Message-ID: <Pine.LNX.4.31.0110261750100.30945-100000@gannet.stats>

On Fri, 26 Oct 2001, Steve Shiboski wrote:

> It turns out to be associated with the compilation flags
> I put in the config.site file for the Sun C compiler.
> Recompiling with the default flags chosen by R eliminates
> the problem.
>
> I put the following flags in config.site before building:
>
>  CFLAGS=-fast
>  SHLIB_CFLAGS=-lsunmath
>  CPICFLAGS=-xcode=pic32
>
> Not sure which caused the problem with table(), but
> R's defaults eliminate -fast, -xcode=pic32 and -lsunmath.

-fast disables IEEE 754 arithmetic. For me R fails make check with that.
(You did run make check, didn't you ...?)

I use -xO5 -xlibmil -dalign (some libraries need -dalign), and f90 which
picks up -lsunmath too.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fred at poleto.com  Fri Oct 26 18:58:00 2001
From: fred at poleto.com (Frederico Zanqueta Poleto)
Date: 26 Oct 2001 16:58:00 -0000
Subject: [R] glim and gls
In-Reply-To: <6rhesm8mss.fsf@franz.stat.wisc.edu>
References: <6rhesm8mss.fsf@franz.stat.wisc.edu>
Message-ID: <20011026165800.7032.qmail@hm47.locaweb.com.br>


Douglas,

First, I would like to thank your answear.

>> I would like to know if there is any package that allow us to fit
>> Generalized Linear Models via Maximum Likelihood and Linear Models using
>> Generalized Least Squarse in R as the functions glim and gls,
>> respectively, from S-Plus.

> The glm function for generalized linear models is available in the
> base package of R.  That is, you can use it any time you start R.  The
> gls function for generalized least squares fits is available in the
> nlme package for R.

The glm function fits GLM using Iterative Reweighted Least Squares (IRLS) 
and I need to do it via Maximum Likelihood.
Yes, I looked the package nlme and it has the function gls. Thanks.

>> Also, anybody know if there is any package that fit Log-Linear Models
>> using Generalized Least Squares?

> There is a package GLMMGibbs for fitting generalized linear mixed
> models.  I'm not sure if that is what you want.

No, GLMMGibbs fit GLMM via Gibbs Sampling, and again I need to do it via 
Geeralized Least Squares.

I could also use the function loglin, but it uses Iterative Proportional 
Fitting.

Best regards,
--
Frederico Zanqueta Poleto
fred at poleto.com
--
"It would be possible to describe everything scientifically, but it would 
make no sense; it would be without meaning, as if you described a 
Beethoven symphony as a variation of wave pressure." Albert Einstein

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Fri Oct 26 19:05:34 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Fri, 26 Oct 2001 10:05:34 -0700 (PDT)
Subject: [R] glim and gls
In-Reply-To: <20011026165800.7032.qmail@hm47.locaweb.com.br>
Message-ID: <Pine.A41.4.33.0110261004060.114078-100000@homer37.u.washington.edu>

On 26 Oct 2001, Frederico Zanqueta Poleto wrote:

>
> Douglas,
>
> First, I would like to thank your answear.
>
> >> I would like to know if there is any package that allow us to fit
> >> Generalized Linear Models via Maximum Likelihood and Linear Models using
> >> Generalized Least Squarse in R as the functions glim and gls,
> >> respectively, from S-Plus.
>
> > The glm function for generalized linear models is available in the
> > base package of R.  That is, you can use it any time you start R.  The
> > gls function for generalized least squares fits is available in the
> > nlme package for R.
>
> The glm function fits GLM using Iterative Reweighted Least Squares (IRLS)
> and I need to do it via Maximum Likelihood.

IRLS *is* maximum likelihood for generalized linear models.


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetilh at umsanet.edu.bo  Fri Oct 26 19:31:20 2001
From: kjetilh at umsanet.edu.bo (kjetil halvorsen)
Date: Fri, 26 Oct 2001 13:31:20 -0400
Subject: [R] easy graphic question
References: <m3y9m1agcr.fsf@home.sweet.home>
Message-ID: <3BD99DE8.815F2A35@umsanet.edu.bo>

try 

plot(1:20, 1:20, pch=1:20)

for a selection of plotting symbols

Kjetil Halvorsen


Myriam Abramson wrote:
> 
> Hi!
> 
> How do I specify a filled point in a scatterplot? Their size?
> 
> plot(x,y) just gives "empty" points like "o". I want a full black
> point.
> 
> TIA
> 
> --
>                                    myriam
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From brianscholl1973 at yahoo.com  Fri Oct 26 20:14:39 2001
From: brianscholl1973 at yahoo.com (Brian Scholl)
Date: Fri, 26 Oct 2001 11:14:39 -0700 (PDT)
Subject: [R] Getting started with Time Series
Message-ID: <20011026181439.40878.qmail@web12203.mail.yahoo.com>

Anyone have a good R tutorial for time series? Or know
of a good book? Any advice would be helpful.  I've
been using matlab and programming things directly (not
using canned functions), but now I'm having difficulty
figuring out how to say, do freq domain anaylsis and
get a CI on my periodogram, or plotting the coherence,
etc.  Or how to change certain parameters, e.g. fit
AR(p) with p determined by BIC not AIC.  Also, I'm a
little uncertain as to what formula certain functions
are using.  A tutorial (or any suggestions) would be
great as the refman is not answering all of my
questions.

Thanks

Brian

__________________________________________________



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Leslie_Branch at hgsi.com  Fri Oct 26 20:14:42 2001
From: Leslie_Branch at hgsi.com (Leslie_Branch@hgsi.com)
Date: Fri, 26 Oct 2001 14:14:42 -0400
Subject: [R] Matrix problem w/R-1.3.1 on Solaris7
Message-ID: <OFAC9A7E6A.A6573B98-ON85256AF1.0062EF63@hgsi.com>

Can anyone tell me how to fix this.

root at nucleus => /usr/local/R-1.3.1/bin/R INSTALL Matrix_0.3-15.tar.gz
Installing source package `Matrix' ...
creating cache ./config.cache
checking for gcc... gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether gcc accepts -g... yes
checking for ATL_xerbla in -latlas... no
checking for dgemm_ in -lcxml... no
checking for dgemm_ in -ldxml... no
checking for dgemm_ in -lscs... no
checking for dgemm_ in -lcomplib.sgimath... no
checking for zherk in -lblas... no
checking for dgemm_ in -lblas... yes
checking for cheev_ in -llapack... yes
updating cache ./config.cache
creating ./config.status
creating src/Makevars
 libs
c++ -I/usr/local/R-1.3.1/lib/R/include  -I/usr/local/include   -fPIC  -g
-O2 -c R_LapackPP.cc -o R_LapackPP.o
R_LapackPP.cc:17: iostream: No such file or directory
make: *** [R_LapackPP.o] Error 1
ERROR: compilation failed for package `Matrix'




Leslie

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hea.ASG at asg-inc.com  Fri Oct 26 20:23:03 2001
From: hea.ASG at asg-inc.com (hea.ASG@asg-inc.com)
Date: Fri, 26 Oct 2001 14:23:03 -0400
Subject: No subject
Message-ID: <OF95436B66.F55CBFE9-ON85256AF1.00641356@asg-inc.com>

Hello all,

I am a Sr. Recruiter looking to fill an immediate programming need with a
major pharmaceutical company in their pre-clinical department.  Long term
contract with full benefits plus relocation assistance.  Please take a look
at the following job description and contact me if you are interested or
know of someone who might be.

Primary work using several Open-Source software tools:  the statistical
package
R (http://www.r-project.org), the scripting  language  Python (and to a
lesser extend Perl), and the application server Zope,  which  uses Python
as its scripting language.

This project will involve programming in each of these systems, as well as
some coding in C and Java.
The development will be mostly done on Solaris (UNIX), but the clients will
be Windows desktops.

Using Zope (http://www.zope.org) as the primary application server in
conjunction with Apache for static web content.

Thank you,
Holly Allen
Sr. Recruiter
ASG, Inc., Cary, NC
800-279-8082 x125




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Oct 26 21:19:38 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 26 Oct 2001 20:19:38 +0100 (BST)
Subject: [R] Getting started with Time Series
In-Reply-To: <20011026181439.40878.qmail@web12203.mail.yahoo.com>
Message-ID: <Pine.GSO.4.31.0110262018410.8695-100000@auk.stats>

On Fri, 26 Oct 2001, Brian Scholl wrote:

> Anyone have a good R tutorial for time series? Or know
> of a good book? Any advice would be helpful.  I've
> been using matlab and programming things directly (not
> using canned functions), but now I'm having difficulty
> figuring out how to say, do freq domain anaylsis and
> get a CI on my periodogram, or plotting the coherence,
> etc.  Or how to change certain parameters, e.g. fit
> AR(p) with p determined by BIC not AIC.  Also, I'm a
> little uncertain as to what formula certain functions
> are using.  A tutorial (or any suggestions) would be
> great as the refman is not answering all of my
> questions.

The code was in the main written to reproduce the examples in Venables &
Ripley (1999): see the MASS scripts for the changes needed.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wviechtb at s.psych.uiuc.edu  Fri Oct 26 22:04:02 2001
From: wviechtb at s.psych.uiuc.edu (Wolfgang Viechtbauer)
Date: Fri, 26 Oct 2001 15:04:02 -0500 (CDT)
Subject: [R] Finding an index of matrix[i,j]
In-Reply-To: <20011026093414.A8448@chanane.ucsf.edu>
Message-ID: <Pine.SOL.4.30.0110261343380.17931-100000@s.psych.uiuc.edu>

I hope somebody can help me out with this. Let's say I have a matrix with
i rows and j columns and I want to find the index of the row AND column of
the maximum value in the matrix. I tried to play around with the which()
command, but couldn't find an easy solution that didn't involve loops and
various other inelegant approaches. I hope that there is an easy way of
doing this. Thanks in advance for any suggestions!

------------------------------------------------------------------------
Wolfgang Viechtbauer                       wviechtb at s.psych.uiuc.edu
Department of Quantitative Psychology      viechtba at students.uiuc.edu

University of Illinois, Champaign-Urbana   [Virus  based  on  an honors-
Room 409, Psychology Building              system:  Forward  this  to 10
603 E. Daniel Street                       random  people  and  delete a
Champaign, IL 61820                        bunch of your files. Thanks.]

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Fri Oct 26 22:15:30 2001
From: ben at zoo.ufl.edu (Ben Bolker)
Date: Fri, 26 Oct 2001 16:15:30 -0400 (EDT)
Subject: [R] Finding an index of matrix[i,j]
In-Reply-To: <Pine.SOL.4.30.0110261343380.17931-100000@s.psych.uiuc.edu>
Message-ID: <Pine.LNX.4.30.0110261615110.22965-100000@bolker.zoo.ufl.edu>


  which(x,arr.ind=TRUE)

On Fri, 26 Oct 2001, Wolfgang Viechtbauer wrote:

> I hope somebody can help me out with this. Let's say I have a matrix with
> i rows and j columns and I want to find the index of the row AND column of
> the maximum value in the matrix. I tried to play around with the which()
> command, but couldn't find an easy solution that didn't involve loops and
> various other inelegant approaches. I hope that there is an easy way of
> doing this. Thanks in advance for any suggestions!
>
> ------------------------------------------------------------------------
> Wolfgang Viechtbauer                       wviechtb at s.psych.uiuc.edu
> Department of Quantitative Psychology      viechtba at students.uiuc.edu
>
> University of Illinois, Champaign-Urbana   [Virus  based  on  an honors-
> Room 409, Psychology Building              system:  Forward  this  to 10
> 603 E. Daniel Street                       random  people  and  delete a
> Champaign, IL 61820                        bunch of your files. Thanks.]
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker at zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rbb at nebiometrics.com  Fri Oct 26 23:07:52 2001
From: rbb at nebiometrics.com (Robert Burrows)
Date: Fri, 26 Oct 2001 17:07:52 -0400 (EDT)
Subject: [R] question about anova() output
Message-ID: <Pine.LNX.4.33.0110261702220.695-100000@neblt>

Hello,

I am getting output from anova() and summary(aov()) that depends on the
order of the factors in the fitted model object, and this has me baffled. I
see this dependency with the data.frame below but not with an example (table
6.4) from Montgomery's DOE book. This is with R 1.3.0 on Debian GNU-Linux.

Where have I gone wrong?

> centerpts
    run sample CH50mg
1  day1 dev126   0.56
2  day1 dev126   0.70
3  day1 dev126   0.82
4  day1 dev126   0.72
5  day2 dev126   0.57
6  day2 dev126   0.60
7  day3 dev126   0.61
8  day3 dev126   0.64
9  day3 dev126   0.68
10 day3 dev126   0.68
11 day1 dev118   0.77
12 day1 dev118   0.80
13 day1 dev118   0.86
14 day2 dev118   0.71
15 day2 dev118   0.70
16 day3 dev118   0.77
17 day3 dev118   0.77
18 day3 dev118   0.77
19 day3 dev118   0.80
20 day1 rgf108   0.77
21 day1 rgf108   0.86
22 day1 rgf108   0.82
23 day2 rgf108   0.62
24 day2 rgf108   0.63
25 day3 rgf108   0.66
26 day3 rgf108   0.71
27 day3 rgf108   0.69
28 day3 rgf108   0.69
>
>
> anova(lm(CH50mg~run+sample+run*sample,data=centerpts))
Analysis of Variance Table

Response: CH50mg
           Df   Sum Sq  Mean Sq F value    Pr(>F)
run         2 0.064308 0.032154 12.5597 0.0003343
sample      2 0.068649 0.034324 13.4075 0.0002337
run:sample  4 0.010444 0.002611  1.0199 0.4221699
Residuals  19 0.048642 0.002560
>
>
> anova(lm(CH50mg~sample+run+run*sample,data=centerpts))
Analysis of Variance Table

Response: CH50mg
           Df   Sum Sq  Mean Sq F value    Pr(>F)
sample      2 0.061927 0.030964 12.0948 0.0004093
run         2 0.071029 0.035515 13.8725 0.0001931
sample:run  4 0.010444 0.002611  1.0199 0.4221699
Residuals  19 0.048642 0.002560

TIA,

-- 
Robert Burrows
New England Biometrics
rbb at nebiometrics.com



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Fri Oct 26 23:49:23 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Fri, 26 Oct 2001 14:49:23 -0700 (PDT)
Subject: [R] question about anova() output
In-Reply-To: <Pine.LNX.4.33.0110261702220.695-100000@neblt>
Message-ID: <Pine.A41.4.33.0110261443290.175844-100000@homer07.u.washington.edu>

On Fri, 26 Oct 2001, Robert Burrows wrote:

> Hello,
>
> I am getting output from anova() and summary(aov()) that depends on the
> order of the factors in the fitted model object, and this has me baffled. I
> see this dependency with the data.frame below but not with an example (table
> 6.4) from Montgomery's DOE book. This is with R 1.3.0 on Debian GNU-Linux.
>
> Where have I gone wrong?
>

In worrying about it?

In a non-orthogonal design (ie most unbalanced designs) the sums of
squares do depend on the order. In an orthogonal design they don't. This
is because R uses sums of squares that are projections involving a nested
sequence of models.

Some packages report sums of squares that are based on comparing the full
model to the models with each factor removed one at a time.  The question
of which set of sums of squares is the Right Thing provokes low-level holy
wars on r-help from time to time.

You can compute sums of squares comparing any two models you feel like by
using
  anova(model1,model2)


This probably should be a FAQ


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Sat Oct 27 00:00:24 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Oct 2001 00:00:24 +0200
Subject: [R] question about anova() output
In-Reply-To: <Pine.LNX.4.33.0110261702220.695-100000@neblt>
References: <Pine.LNX.4.33.0110261702220.695-100000@neblt>
Message-ID: <x27ktit62v.fsf@blueberry.kubism.ku.dk>

Robert Burrows <rbb at nebiometrics.com> writes:

> Hello,
> 
> I am getting output from anova() and summary(aov()) that depends on the
> order of the factors in the fitted model object, and this has me baffled. I
> see this dependency with the data.frame below but not with an example (table
> 6.4) from Montgomery's DOE book. This is with R 1.3.0 on Debian GNU-Linux.
> 
> Where have I gone wrong?

In assuming that the order should not matter. Anova() gives the
incremental SS, and in an non-orthogonal design the order *does*
matter. You might want to try 

drop1(lm(CH50mg~run+sample))

and also

anova(lm(CH50mg~run))
anova(lm(CH50mg~sample))

Also, if you remove one of the first four observations, you will get a
balanced design and the order-dependence should disappear.

> > centerpts
>     run sample CH50mg
> 1  day1 dev126   0.56
> 2  day1 dev126   0.70
> 3  day1 dev126   0.82
> 4  day1 dev126   0.72
> 5  day2 dev126   0.57
> 6  day2 dev126   0.60
> 7  day3 dev126   0.61
> 8  day3 dev126   0.64
> 9  day3 dev126   0.68
> 10 day3 dev126   0.68
> 11 day1 dev118   0.77
> 12 day1 dev118   0.80
> 13 day1 dev118   0.86
> 14 day2 dev118   0.71
> 15 day2 dev118   0.70
> 16 day3 dev118   0.77
> 17 day3 dev118   0.77
> 18 day3 dev118   0.77
> 19 day3 dev118   0.80
> 20 day1 rgf108   0.77
> 21 day1 rgf108   0.86
> 22 day1 rgf108   0.82
> 23 day2 rgf108   0.62
> 24 day2 rgf108   0.63
> 25 day3 rgf108   0.66
> 26 day3 rgf108   0.71
> 27 day3 rgf108   0.69
> 28 day3 rgf108   0.69
> >
> >
> > anova(lm(CH50mg~run+sample+run*sample,data=centerpts))
> Analysis of Variance Table
> 
> Response: CH50mg
>            Df   Sum Sq  Mean Sq F value    Pr(>F)
> run         2 0.064308 0.032154 12.5597 0.0003343
> sample      2 0.068649 0.034324 13.4075 0.0002337
> run:sample  4 0.010444 0.002611  1.0199 0.4221699
> Residuals  19 0.048642 0.002560
> >
> >
> > anova(lm(CH50mg~sample+run+run*sample,data=centerpts))
> Analysis of Variance Table
> 
> Response: CH50mg
>            Df   Sum Sq  Mean Sq F value    Pr(>F)
> sample      2 0.061927 0.030964 12.0948 0.0004093
> run         2 0.071029 0.035515 13.8725 0.0001931
> sample:run  4 0.010444 0.002611  1.0199 0.4221699
> Residuals  19 0.048642 0.002560

BTW: The interaction operator is ":" ~run*sample expands to 
~sample+run+run:sample

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rbb at nebiometrics.com  Sat Oct 27 03:24:29 2001
From: rbb at nebiometrics.com (Robert Burrows)
Date: Fri, 26 Oct 2001 21:24:29 -0400 (EDT)
Subject: [R] question about anova() output
In-Reply-To: <Pine.A41.4.33.0110261443290.175844-100000@homer07.u.washington.edu>
Message-ID: <Pine.LNX.4.33.0110262110390.949-100000@neblt>

Many thanks to TL and PD for your replies. I clearly need to learn a bit
more about anova().

-- 
Robert Burrows
New England Biometrics
rbb at nebiometrics.com



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From vograno at arbitrade.com  Sat Oct 27 05:15:43 2001
From: vograno at arbitrade.com (Vadim Ogranovich)
Date: Fri, 26 Oct 2001 22:15:43 -0500
Subject: [R] "unloading" data
Message-ID: <AFD78192EC49D311BFAE00902798AB8F23D58E@jupiter.sc.arbitrade.com>

Dear R-Users,

I am reading the "An Introduction to R" manual and have come across data()
function for loading data.

I assume that R requires explicit loading of data objects to save memory.
Then I'd expect there should be a function that can unload the objects once
they are not needed anymore, what is this function? It would be helpful if
?data contained a reference to that function.

Thanks, Vadim

-------------------------------------------------- 
DISCLAIMER 
This e-mail, and any attachments thereto, is intended only for use by the
addressee(s) named herein and may contain legally privileged and/or
confidential information.  If you are not the intended recipient of this
e-mail, you are hereby notified that any dissemination, distribution or
copying of this e-mail, and any attachments thereto, is strictly prohibited.
If you have received this e-mail in error, please immediately notify me and
permanently delete the original and any copy of any e-mail and any printout
thereof. 

E-mail transmission cannot be guaranteed to be secure or error-free.  The
sender therefore does not accept liability for any errors or omissions in
the contents of this message which arise as a result of e-mail transmission.

NOTICE REGARDING PRIVACY AND CONFIDENTIALITY 

Knight Trading Group may, at its discretion, monitor and review the content
of all e-mail communications. 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Oct 27 11:16:27 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 27 Oct 2001 10:16:27 +0100 (BST)
Subject: [R] "unloading" data
In-Reply-To: <AFD78192EC49D311BFAE00902798AB8F23D58E@jupiter.sc.arbitrade.com>
Message-ID: <Pine.GSO.4.31.0110271012200.9332-100000@auk.stats>

On Fri, 26 Oct 2001, Vadim Ogranovich wrote:

> Dear R-Users,
>
> I am reading the "An Introduction to R" manual and have come across data()
> function for loading data.
>
> I assume that R requires explicit loading of data objects to save memory.
> Then I'd expect there should be a function that can unload the objects once
> they are not needed anymore, what is this function? It would be helpful if
> ?data contained a reference to that function.

rm().  Applies to any object in memory.

It's pretty rare that a data object loaded by data() would be large enough
to be material in memory usage these days, but R was originally written for
ca 2Mb systems.  If it were, one might do better to use attach/detach
(with a data file created with save).


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From doraiss at auburn.edu  Sat Oct 27 13:40:43 2001
From: doraiss at auburn.edu (Sundardas Dorai-raj)
Date: Sat, 27 Oct 2001 06:40:43 -0500
Subject: [R] "unloading" data
Message-ID: <sbda56ef.031@groupwise1.duc.auburn.edu>

rm() will unload the data. See also attach() and detach() to load and
unload .RData databases.

Sundar

>>> Vadim Ogranovich <vograno at arbitrade.com> 10/27/01 00:34 AM >>>
Dear R-Users,

I am reading the "An Introduction to R" manual and have come across
data()
function for loading data.

I assume that R requires explicit loading of data objects to save
memory.
Then I'd expect there should be a function that can unload the objects
once
they are not needed anymore, what is this function? It would be helpful
if
?data contained a reference to that function.

Thanks, Vadim

-------------------------------------------------- 
DISCLAIMER 
This e-mail, and any attachments thereto, is intended only for use by
the
addressee(s) named herein and may contain legally privileged and/or
confidential information.  If you are not the intended recipient of this
e-mail, you are hereby notified that any dissemination, distribution or
copying of this e-mail, and any attachments thereto, is strictly
prohibited.
If you have received this e-mail in error, please immediately notify me
and
permanently delete the original and any copy of any e-mail and any
printout
thereof. 

E-mail transmission cannot be guaranteed to be secure or error-free. 
The
sender therefore does not accept liability for any errors or omissions
in
the contents of this message which arise as a result of e-mail
transmission.

NOTICE REGARDING PRIVACY AND CONFIDENTIALITY 

Knight Trading Group may, at its discretion, monitor and review the
content
of all e-mail communications. 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in te "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From laurent at cbs.dtu.dk  Sat Oct 27 15:06:08 2001
From: laurent at cbs.dtu.dk (Laurent Gautier)
Date: Sat, 27 Oct 2001 15:06:08 +0200
Subject: [R] trouble with data.matrix
Message-ID: <3BDAB140.453DFCAD@cbs.dtu.dk>

Dear all,


The following causes me trouble:

> a <- data.frame(2:5,3:6,4:7)
> str(a)
`data.frame':	4 obs. of  3 variables:
 $ X2.5: int  2 3 4 5
 $ X3.6: int  3 4 5 6
 $ X4.7: int  4 5 6 7
> str(data.matrix(a))
 int [1:4, 1:3] 2 3 4 5 3 4 5 6 4 5 ...
 - attr(*, "dimnames")=List of 2
  ..$ : chr [1:4] "1" "2" "3" "4"
  ..$ : chr [1:3] "X2.5" "X3.6" "X4.7"



Reading the man page for 'data.matrix' trends to indicate it generates a
numerical matrix from a data.frame.
... or am I wrong ? (I could almost swear it was working before... but
like always the question turns to be
'before what ?'   =)    ).



Any hint would be greatly appreciated







...Oups, I almost forget:
I use R-1.3.1 compiled on a linux box with Suse 7.1






Laurent






-- 
Laurent Gautier			CBS, Building 208, DTU
PhD. Student			D-2800 Lyngby,Denmark	
tel: +45 45 25 24 85		http://www.cbs.dtu.dk/laurent
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Sat Oct 27 15:29:58 2001
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Sat, 27 Oct 2001 15:29:58 +0200
Subject: [R] trouble with data.matrix
In-Reply-To: <3BDAB140.453DFCAD@cbs.dtu.dk>
References: <3BDAB140.453DFCAD@cbs.dtu.dk>
Message-ID: <15322.46806.708814.931357@gargle.gargle.HOWL>

>>>>> "Laurent" == Laurent Gautier <laurent at cbs.dtu.dk> writes:

    Laurent> Dear all, The following causes me trouble:

	> a <- data.frame(2:5,3:6,4:7)

	> str(a)
	`data.frame':	4 obs. of  3 variables:
	 $ X2.5: int  2 3 4 5
	 $ X3.6: int  3 4 5 6
	 $ X4.7: int  4 5 6 7

	> str(data.matrix(a))
	 int [1:4, 1:3] 2 3 4 5 3 4 5 6 4 5 ...
	 - attr(*, "dimnames")=List of 2
	  ..$ : chr [1:4] "1" "2" "3" "4"
	  ..$ : chr [1:3] "X2.5" "X3.6" "X4.7"

    Laurent> Reading the man page for 'data.matrix' trends to indicate it
    Laurent> generates a numerical matrix from a data.frame.  

exactly --- and what is the trouble ?
You *did* get a numerical matrix {integers are numeric}

    Laurent> ... or am I wrong ? (I could almost swear it was working
    Laurent> before... 

(still is)

Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From laurent at genome.cbs.dtu.dk  Sat Oct 27 15:50:04 2001
From: laurent at genome.cbs.dtu.dk (Laurent Gautier)
Date: Sat, 27 Oct 2001 15:50:04 +0200 (MDT)
Subject: [R] trouble with data.matrix
In-Reply-To: <15322.46806.708814.931357@gargle.gargle.HOWL>
Message-ID: <Pine.SGI.3.95.1011027154801.21592635A-100000@genome.cbs.dtu.dk>



On Sat, 27 Oct 2001, Martin Maechler wrote:

> >>>>> "Laurent" == Laurent Gautier <laurent at cbs.dtu.dk> writes:
> 
>     Laurent> Dear all, The following causes me trouble:
> 
> 	> a <- data.frame(2:5,3:6,4:7)
> 
> 	> str(a)
> 	`data.frame':	4 obs. of  3 variables:
> 	 $ X2.5: int  2 3 4 5
> 	 $ X3.6: int  3 4 5 6
> 	 $ X4.7: int  4 5 6 7
> 
> 	> str(data.matrix(a))
> 	 int [1:4, 1:3] 2 3 4 5 3 4 5 6 4 5 ...
> 	 - attr(*, "dimnames")=List of 2
> 	  ..$ : chr [1:4] "1" "2" "3" "4"
> 	  ..$ : chr [1:3] "X2.5" "X3.6" "X4.7"
> 
>     Laurent> Reading the man page for 'data.matrix' trends to indicate it
>     Laurent> generates a numerical matrix from a data.frame.  
> 
> exactly --- and what is the trouble ?


Ouch...hhmmmm... I think I know: lack of sleep.....


> You *did* get a numerical matrix {integers are numeric}


I was looking the 'attribute' line... too stoopid....


Sorry for bothering (and eventually making a fool of myself)....




Laurent





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jasont at indigoindustrial.co.nz  Sun Oct 28 12:03:10 2001
From: jasont at indigoindustrial.co.nz (Jason Turner)
Date: Mon, 29 Oct 2001 00:03:10 +1300
Subject: [R] extract element, row, etc from general array structure
Message-ID: <20011029000310.A10732@camille.indigoindustrial.co.nz>

This one has me a bit stumped, and I know there may well be a really
simple way of doing it in R.  Sorry for the long-winded explanation.

Short version:
given an array of arbitrary number of dimensions D, how can we 
retrieve the Nth element of dimension D without knowing  in
advance what D will be?  For example, given that array
A has dimensions c(3,4,5), and N=2, can we write a function
that will "know" to return A[,,2], and not mistake that
for A[2] or A[,2]?  Bonus question - can such a function
be written without relying purely on an arbitrarily high
number of "if" statements?

Long version:
I've been using Greg Warnes' wapply function (thanks Greg!),
and modifying it to suit my own ends.  wapply() takes a vector,
and repeatedly applies a function FUNC (decided at run-time) to 
windows of the data.  The modification I've made is to generalize
the return structures - if a scalar is returned by FUNC, wapply
returns a vector.  If FUNC gives a vector, wappaly returns a
matrix.  etc...

A complementary function I'm trying to build is one that extracts
the results of FUNC for window N.  As I see it, the logic would 
be something like this:  

if:
foo<-wapply(some.time.series, some.vector.returning.function)

foo is a matrix.  The "extract" function would grab the column
of foo for window N.  e.g. N=5, extract would return foo[,5]
(maybe even with classes set appropriately, if I get particularly
clever).

Since we don't know in advance how many dimensions foo will have,
and the last dimension is the one we're interested in, how do
we express in R:
  if it's a vector, get foo[5],
  if it's a matrix, get foo[,5],
  if it's a 3d array, get foo[,,5], 
  ...
without being so ugly or having an arbitrary upper limit based on how
many "if" statements I was prepared to type?

If there's no elegant way, I'll work around it by keeping records
of data size, and pushing structures back to vectors when I 
need to automatically pull segments of data out.  If there's an 
easier way, I'd be most appreciative.

Cheers

Jason
-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont at indigoindustrial.co.nz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Sun Oct 28 13:06:32 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Oct 2001 13:06:32 +0100
Subject: [R] extract element, row, etc from general array structure
In-Reply-To: <20011029000310.A10732@camille.indigoindustrial.co.nz>
References: <20011029000310.A10732@camille.indigoindustrial.co.nz>
Message-ID: <x26690c6k7.fsf@blueberry.kubism.ku.dk>

Jason Turner <jasont at indigoindustrial.co.nz> writes:

> Since we don't know in advance how many dimensions foo will have,
> and the last dimension is the one we're interested in, how do
> we express in R:
>   if it's a vector, get foo[5],
>   if it's a matrix, get foo[,5],
>   if it's a 3d array, get foo[,,5], 
>   ...
> without being so ugly or having an arbitrary upper limit based on how
> many "if" statements I was prepared to type?
> 
> If there's no elegant way, I'll work around it by keeping records
> of data size, and pushing structures back to vectors when I 
> need to automatically pull segments of data out.  If there's an 
> easier way, I'd be most appreciative.


Something like this 

apply(foo, seq(length=length(dim(foo))-1),"[",5)

Won't work for vectors though since they don't have dim() and 1-D
arrays are probably also troublesome.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fharrell at virginia.edu  Sun Oct 28 13:58:54 2001
From: fharrell at virginia.edu (fharrell@virginia.edu)
Date: Sun, 28 Oct 2001 07:58:54 -0500
Subject: [R] Summary: A speed improvement challenge
Message-ID: <3BDC010E.CFFC4339@virginia.edu>

Many thanks to Nick Ellis, Vadim Kutsyy, Charles Berry, and
Bill Dunlap for providing thoughts and alternative solutions to the
problem.
I have included Nick and Charles' notes in full below and a summary of
the others.  Thanks also to Bill for telling me about an
inconsistency in how the first argument of sample is interpreted.
I had ignored this, resulting in a major bug.

Each person suggested substituting a built-in function
such as sapply, apply, or outer for the explicit for() looping.
I think that outer causes memory problems for large
n and m, and that sapply and apply 
do not reduce execution time (but this is platform and
language version-specific).  On S-Plus 6.0 under Intel
Linux, Vadim's sapply() suggestion results in more than
doubling of the execution time over using a simple for().

Bill Dunlap provided functions for zeroing in on the subscripts
that need to be addressed.

My conclusion: For this problem, for() isn't bad.  The
code is simple and maintainable and fairly efficient
depending on the platform.  To get a major speed
improvement I would write a simple and small Fortran or C function
to be called from S.

One area in which I hope to improve the original code (which
is at the end of this note) is to also make the sampling
weights for selecting x depending on the distance of y
from the target y, a la kernel density estimators or
loess.

Thanks again for the thoughtful responses,

Frank Harrell

---------------------------------------------------------------------
Frank,

to restate your problem:

1.) do the linear interpolation as a first cut.
2.) find the subset of points that have more than one neighbour - this
is
kernel density estimation with a boxcar window of half-width del
3.) perform multinomial sampling on the x values for that subset - ie
from
(abc)(defg)(hij) select, say, afj, with probabilities (pqr)(stuv)(wxy)

Step 2 could be done with a call to outer(), but that would probably be
wasteful, especially 'cos it doesn't exploit the ordering of the values.
A C
program that runs through the sorted values would be quick.

As for 3, sample() does multinomial sampling for a single set of p
values
(as you stated), but it's not hard to implement sample() using runif,
and it
should be straightforward to vectorize. Something like

p <- list(c(1,2,3)/6,c(3,1)/4,c(1,1,1,1)/4)
n <- max(sapply(p,length))
pcum <- sapply(p,function(x,n)c(cumsum(x)/sum(x),rep(1,n))[1:n],n=n) #
make
pcum's all same length
apply(sweep(pcum,2,runif(2),">"),2,function(x,n)(1:n)[x][1],n=n)

Nick Ellis
CSIRO Marine Research	mailto:Nick.Ellis at csiro.au
 
-------------------------------------------------------------------------------
try:

yinv<-sapply(1:m,function(i,x,y,freq,aty) ifelse(any(s<-abs(y-aty[i]) <
del),
sample(x[s], 1, replace=F, prob=freq[s]/sum(freq[s])),
approx(y, x, xout=aty[i], rule=2)$y),
x,y,freq,aty)

===================================================================
Vadim Kutsyy, PhD                             http://www.kutsyy.com
vkutsyy at cytokinetics.com                           vadim at kutsyy.com
Statistician                                      

----------------------------------------------------------------------------
Off the top of my head:


First, move the test 

        any( (s <- abs(y-aty[i])) < del )

outside the loop. I think 

        OK.2.sample <- ( abs( min(y)-aty ) < del ) | ( abs( max(y)-aty )
< del )
[I think OK.2.sample needs to take into account more than min and max
-FH]

does this correctly in a vectorized manner.

Then you can attack the sample() and approx() separately.

Second, 

        s.mat <- abs( outer(y,aty[OK.2.sample],"-") ) < del

vectorizes calculation of s.

Then,

        new.freq <- array(0,nr=nrow(s.mat), nc=ncol(s.mat) )
        new.freq[s.mat] <- freq[col(s.mat)[s.mat]]
        new.freq <- new.freq/ c( new.freq %*% rep( 1, ncol(s.mat) ))

gives a matrix whose rows are the probability eights padded with zeroes
and 
        cum.freq <- apply(new.freq,1,cumsum)

is the cumulative weight.

        leq.weight <- rep(runif(length(y)), ncol(s.mat) ) <= cum.freq
        which.2.sample <- leq.weight %*% rep(1, ncol(s.mat) )

I ***think*** which.2.sample indexes x as you require.

If this is still too slow, I think the part from s.mat onward can be
rendered in C with little trouble. In fact, it might be easier to
understand in C...

-Charles Berry

-----------------------------------------------------------------------------



> -----Original Message-----
> From: Frank E Harrell Jr [mailto:fharrell at virginia.edu]
> Sent: Friday, October 26, 2001 3:01 AM
> To: s-news; rhelp
> Subject: [S] A speed improvement challenge
> 
> 
> I need to create a vector of probability-weighted randomly
> sampled values which each satisfy a different criterion.
> This causes the sampling weights to vary between elements
> of the vector.  Here is some example code, with x, y,
> and freq being vectors each of length n.  aty is a
> vector of length m.
> 
>   yinv <- double(m)
>   for(i in 1:m) {
>     s <- abs(y-aty[i]) < del
>     yinv[i] <- if(any(s)) 
>      sample(x[s], 1, replace=F, prob=freq[s]/sum(freq[s])) else
>      approx(y, x, xout=aty[i], rule=2)$y
>   }
> 
> Big picture: For a tabulated function given by (x,y) and
> frequency of each occurrence of (x,y) given by the corresponding
> element in freq, find the inverse of the function (x as a function
> of y) for a vector of desired y-values aty[1],...aty[m].  If
> the function has a nearly flat segment, let the resulting x[i] value
> be a weighted randomly sampled x such that f(x) is within del of
> the target y-value aty.  If no tabulated y is within del of the
> target y, use reverse linear interpolation to get y inverse.
> The reverse linear interpolation can easily be vectorized
> (approx(y, x, xout=aty, rule=2)$y).
> 
> Thanks for any ideas.
> -- 
> Frank E Harrell Jr              Prof. of Biostatistics & Statistics
> Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
> U. Virginia School of Medicine  
> http://hesweb1.med.virginia.edu/biostat
> ---------------------------------------------------------------------
> This message was distributed by s-news at lists.biostat.wustl.edu.  To
> unsubscribe send e-mail to s-news-request at lists.biostat.wustl.edu with
> the BODY of the message:  unsubscribe s-news
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mousie at arcriswell.com  Mon Oct 29 03:36:43 2001
From: mousie at arcriswell.com (Dr. Andrew Criswell)
Date: Mon, 29 Oct 2001 09:36:43 +0700
Subject: [R] Help with 'get.hist.quote' on tseries
Message-ID: <jUsT.aNoTheR.mEsSaGe.iD.100432364429191@arcriswell.com>

Hi ALL:

I am trying to use get.help.quote from library(tseries). I tried 
to run the example from help(get.hist.quote) but R complained. Here 
is the command I used and the response:

ibm <- get.hist.quote(instrument = "ibm", start = "1998-01-01")
trying URL `http://chart.yahoo.com/table.csv?s=ibm&a=01&b=01&c=1998&d=10&e=28&f=2001&g=d&q=q&y=0&z=ibm&x=.
csv'

Content type `application/octet-stream' length unknown
opened URL
downloaded 45Kb

time series starts 1998-01-02
time series ends   2001-10-26
Error in fromchar(x) : character string is not in a standard unambiguous 
format
> 

Can anyone help? (I use R 1.3.1 with Windows 2000.)

Thanks,
ANDREW

Andrew Criswell, Ph.D.
Graduate School, Bangkok University







-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From a.trapletti at bluewin.ch  Mon Oct 29 09:47:04 2001
From: a.trapletti at bluewin.ch (Adrian Trapletti)
Date: Mon, 29 Oct 2001 09:47:04 +0100
Subject: [R] Help with 'get.hist.quote' on tseries
References: <200110290301.EAA05274@stat.math.ethz.ch>
Message-ID: <3BDD1788.81A9DE31@bluewin.ch>

> Date: Mon, 29 Oct 2001 09:36:43 +0700
> From: "Dr. Andrew Criswell" <mousie at arcriswell.com>
> Subject: [R] Help with 'get.hist.quote' on tseries
>
> Hi ALL:
>
> I am trying to use get.help.quote from library(tseries). I tried
> to run the example from help(get.hist.quote) but R complained. Here
> is the command I used and the response:
>
> ibm <- get.hist.quote(instrument = "ibm", start = "1998-01-01")
> trying URL `http://chart.yahoo.com/table.csv?s=ibm&a=01&b=01&c=1998&d=10&e=28&f=2001&g=d&q=q&y=0&z=ibm&x=.
> csv'
>
> Content type `application/octet-stream' length unknown
> opened URL
> downloaded 45Kb
>
> time series starts 1998-01-02
> time series ends   2001-10-26
> Error in fromchar(x) : character string is not in a standard unambiguous
> format
> >
>
> Can anyone help? (I use R 1.3.1 with Windows 2000.)
>
> Thanks,
> ANDREW
>
> Andrew Criswell, Ph.D.
> Graduate School, Bangkok University
>

Under Suse Linux 7.0 and R 1.3.1 this work fine (tseries 0.8-0). So this is maybe a Windows related problem?

best
Adrian

--
Dr. Adrian Trapletti        Phone:     +41 (0)1 994 56 30
Wildsbergstrasse 31         Fax  :     +41 (0)1 994 56 33
CH-8610 Uster               Email: a.trapletti at bluewin.ch
Switzerland                 WWW  :   trapletti.homeip.net



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Ko-Kang at xtra.co.nz  Mon Oct 29 09:49:41 2001
From: Ko-Kang at xtra.co.nz (Ko-Kang Wang)
Date: Mon, 29 Oct 2001 21:49:41 +1300
Subject: [R] Help with 'get.hist.quote' on tseries
References: <200110290301.EAA05274@stat.math.ethz.ch> <3BDD1788.81A9DE31@bluewin.ch>
Message-ID: <001101c16056$a71045c0$ad9637d2@kwan022>

Well I have the same problem but ONLY WITH trying to get ibm.  In other
words all other examples in the ?get.hist.quote are fine:

I am running R 1.3.1 on Windows ME.

See below:
# This is fine.
x <- get.hist.quote( instrument = "^spc", start = "1998-01-01",
                      quote = "Close")
plot(x)

# This is not fine as cannot find ibm.
# Error messages are the same as listed by Andrew.
x <- get.hist.quote(instrument = "ibm", quote = c("Cl", "Vol"))
plot(x, main = "International Business Machines Corp")

# Same.  Retrieved "^spc" fine but when trying to do x, it failed.
# Cannot get ibm.
spc <- get.hist.quote(instrument = "^spc", start = "1998-01-01")
ibm <- get.hist.quote(instrument = "ibm",  start = "1998-01-01")
x <- na.remove(ts.union(spc, ibm))
plot(x, main = "IBM vs S&P 500")

Cheers,

Ko-Kang Wang
----------------------------------------------------------------------------
--
Ko-Kang Kevin Wang
Statistical Analysis Division Leader
Software Developers' Klub (SDK)
University of Auckland
New Zealand


----- Original Message -----
From: "Adrian Trapletti" <a.trapletti at bluewin.ch>
To: "Dr. Andrew Criswell" <mousie at arcriswell.com>
Cc: "R-Help" <r-help at stat.math.ethz.ch>
Sent: Monday, October 29, 2001 9:47 PM
Subject: [R] Help with 'get.hist.quote' on tseries


> > Date: Mon, 29 Oct 2001 09:36:43 +0700
> > From: "Dr. Andrew Criswell" <mousie at arcriswell.com>
> > Subject: [R] Help with 'get.hist.quote' on tseries
> >
> > Hi ALL:
> >
> > I am trying to use get.help.quote from library(tseries). I tried
> > to run the example from help(get.hist.quote) but R complained. Here
> > is the command I used and the response:
> >
> > ibm <- get.hist.quote(instrument = "ibm", start = "1998-01-01")
> > trying URL
`http://chart.yahoo.com/table.csv?s=ibm&a=01&b=01&c=1998&d=10&e=28&f=2001&g=
d&q=q&y=0&z=ibm&x=.
> > csv'
> >
> > Content type `application/octet-stream' length unknown
> > opened URL
> > downloaded 45Kb
> >
> > time series starts 1998-01-02
> > time series ends   2001-10-26
> > Error in fromchar(x) : character string is not in a standard unambiguous
> > format
> > >
> >
> > Can anyone help? (I use R 1.3.1 with Windows 2000.)
> >
> > Thanks,
> > ANDREW
> >
> > Andrew Criswell, Ph.D.
> > Graduate School, Bangkok University
> >
>
> Under Suse Linux 7.0 and R 1.3.1 this work fine (tseries 0.8-0). So this
is maybe a Windows related problem?
>
> best
> Adrian
>
> --
> Dr. Adrian Trapletti        Phone:     +41 (0)1 994 56 30
> Wildsbergstrasse 31         Fax  :     +41 (0)1 994 56 33
> CH-8610 Uster               Email: a.trapletti at bluewin.ch
> Switzerland                 WWW  :   trapletti.homeip.net
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Kurt.Hornik at ci.tuwien.ac.at  Mon Oct 29 13:08:48 2001
From: Kurt.Hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 29 Oct 2001 13:08:48 +0100
Subject: [R] Help with 'get.hist.quote' on tseries
In-Reply-To: <001101c16056$a71045c0$ad9637d2@kwan022>
References: <200110290301.EAA05274@stat.math.ethz.ch>
	<3BDD1788.81A9DE31@bluewin.ch>
	<001101c16056$a71045c0$ad9637d2@kwan022>
Message-ID: <15325.18128.956449.567528@mithrandir.hornik.net>

>>>>> Ko-Kang Wang writes:

> Well I have the same problem but ONLY WITH trying to get ibm.  In
> other words all other examples in the ?get.hist.quote are fine:

> I am running R 1.3.1 on Windows ME.

I am confused.  Why does the ibm example fail and the others not?

In general, I think the reported problems are due to Windows locale
peculiarities.  The code in get.hist.quote() does

        lct <- Sys.getlocale("LC_TIME")
        Sys.setlocale("LC_TIME", "C")
        on.exit(Sys.setlocale("LC_TIME", lct))
        dat <- gsub(" ", "0", as.character(x[, 1]))
        dat <- as.POSIXct(strptime(dat, "%d-%b-%y"), tz = "GMT")

and I think this should be safe to ensure a C locale when reading in the
quotes.  We have to do this as entries are of the form

	26-Oct-01,110,112.10,109.62,111.16,10142500

If relying on strptime correctly parsing C locale month name abbrevs
cannot be assumed, we could fall back to hard-wiring month names.

The problem reported comes in fromchar() inside as.POSIXlt so it would
be interesting to see what strptime(dat, "%d-%b-%y") gives on platforms
where the problem occurs.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From laura at bayesian-bay.freeserve.co.uk  Mon Oct 29 13:47:16 2001
From: laura at bayesian-bay.freeserve.co.uk (Laura Gross)
Date: Mon, 29 Oct 2001 12:47:16 +0000
Subject: [R] Large data sets in R
Message-ID: <o+eOSNBU$U37EwKN@bayesian-bay.freeserve.co.uk>


As a new user of R, I'm wondering what the maximum matrix size is in R?
I have a large data set consisting of 9000 people and want to be able to
create large matrices involving these. Is R suitable for large data
sets?

Thanks
Laura
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Pierre.Ilouga at evotecoai.com  Mon Oct 29 14:36:27 2001
From: Pierre.Ilouga at evotecoai.com (Pierre.Ilouga@evotecoai.com)
Date: Mon, 29 Oct 2001 14:36:27 +0100
Subject: [R] From data.frame  to Matrix
Message-ID: <OFE1808007.877DA5EF-ONC1256AF4.00468F0F@evotecoai.com>


Hi to all.
I'm a relative new R user and I would like someone to help me in solving
the following simple question:
I have a two column (L , T ) data frame. Column L has three levels: a, b ,
and c  and Column T is real valued.

  L          T
  a    0.8
  a   0.9
  a   0.1
  a   -0.8
  a  -1.0
  b  -0.3
  b    0.7
  b       1.0
  b   0.4
  c  -0.5
  c  -1.0

My aim is to get a data frame of the form

      L    T1       T2   T3    T4  T5
     a    0.8   0.9      0.1  -0.8       -1
     b    -0.3      0.7   1.0      0.4   NA
      c   -0.5  -1.0     NA        NA     NA

without using a "for"  loop, but by using functions of the "apply" family
for exemple or something specific to R and more efficient.
How can I solve this problem?
Thanks in advance.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Oct 29 14:44:52 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 29 Oct 2001 13:44:52 +0000 (GMT)
Subject: [R] Large data sets in R
In-Reply-To: <o+eOSNBU$U37EwKN@bayesian-bay.freeserve.co.uk>
Message-ID: <Pine.LNX.4.31.0110291311450.16890-100000@gannet.stats>

On Mon, 29 Oct 2001, Laura Gross wrote:

> As a new user of R, I'm wondering what the maximum matrix size is in R?
> I have a large data set consisting of 9000 people and want to be able to
> create large matrices involving these. Is R suitable for large data
> sets?

The answer depends on

1) Your platform
2) The amount of memory you have (especially of RAM)
3) What you want to do with 9000 cases, in particular how much information
you have on them.

As a general guide, I would say 9000 cases was not large for R on a
machine with say 256Mb RAM.  But a cluster analysis needing a
9000*9000 matrix would be too large.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andy_liaw at merck.com  Mon Oct 29 15:20:52 2001
From: andy_liaw at merck.com (Liaw, Andy)
Date: Mon, 29 Oct 2001 09:20:52 -0500
Subject: [R] Large data sets in R
Message-ID: <51F9C42DA15CD311BD220008C707D81903DC8332@usrymx10.merck.com>

Can this be added to the official FAQ (or perhaps a more generic response)?
I believe the question qualifies as a legitimate FAQ.

(Or maybe it's there already?  Haven't check it lately...)

Andy

> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
> Sent: Monday, October 29, 2001 8:45 AM
> To: Laura Gross
> Cc: r-help at stat.math.ethz.ch
> Subject: Re: [R] Large data sets in R
> 
> 
> On Mon, 29 Oct 2001, Laura Gross wrote:
> 
> > As a new user of R, I'm wondering what the maximum matrix 
> size is in R?
> > I have a large data set consisting of 9000 people and want 
> to be able to
> > create large matrices involving these. Is R suitable for large data
> > sets?
> 
> The answer depends on
> 
> 1) Your platform
> 2) The amount of memory you have (especially of RAM)
> 3) What you want to do with 9000 cases, in particular how 
> much information
> you have on them.
> 
> As a general guide, I would say 9000 cases was not large for R on a
> machine with say 256Mb RAM.  But a cluster analysis needing a
> 9000*9000 matrix would be too large.
> 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From chrysopa at terra.com.br  Mon Oct 29 12:32:20 2001
From: chrysopa at terra.com.br (Ronaldo Reis Jr.)
Date: Mon, 29 Oct 2001 09:32:20 -0200
Subject: [R] cluster
Message-ID: <200110291421.f9TELrA01140@srv9-sao.sao.terra.com.br>

Hi,
I have the graph below:

|                  422
|          1       321
|   1
|          1
|32   1
|23
|_______________________

The numbers are points in coordinates (simplified graph).
I need make a cluster analysis of this for identify groups and make a graph 
with this groups under circle.
In R exist several packages for cluster analysis, but, which the package for 
this analysis and graphs?

Thanks for all
Inte mais
Ronaldo
-- 
The universe seems neither benign nor hostile, merely indifferent.
		-- Sagan
--
|   //|\\   [*****************************][*******************]
|| ( ? ? )  [Ronaldo Reis J?nior          ][PentiumIII-600     ]
|     V     [ESALQ/USP-Entomologia, CP-09 ][HD: 30 + 10 Gb     ]
||  / l \   [13418-900 Piracicaba - SP    ][RAM: 128 Mb        ]
|  /(lin)\  [Fone: 19-429-4199 r.229      ][Video: SiS620-8Mb  ]
||/(linux)\ [chrysopa at insecta.ufv.br      ][Modem: Pctel-onboar]
|/ (linux) \[ICQ#: 5692561                ][SO: CL 7.0 (2.2.19)]
||  ( x )   [*****************************][*******************]
||| _/ \_Powered by Conectiva Linux 7.0 D+:) | Lxuser#: 205366

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rgentlem at jimmy.harvard.edu  Mon Oct 29 17:26:40 2001
From: rgentlem at jimmy.harvard.edu (Robert Gentleman)
Date: Mon, 29 Oct 2001 11:26:40 -0500
Subject: [R] Large data sets in R
In-Reply-To: <51F9C42DA15CD311BD220008C707D81903DC8332@usrymx10.merck.com>; from Liaw, Andy on Mon, Oct 29, 2001 at 09:20:52AM -0500
References: <51F9C42DA15CD311BD220008C707D81903DC8332@usrymx10.merck.com>
Message-ID: <20011029112640.I9251@jimmy.harvard.edu>

As part of a new project I am working on we have a preliminary version
of an HDF5 library available. This will allow you to work with very
large datasets. We are hoping for a release in the next couple of
weeks but if you have some experience with hdf5 and want to look at an
early version please let me know.

   Robert

On Mon, Oct 29, 2001 at 09:20:52AM -0500, Liaw, Andy wrote:
> Can this be added to the official FAQ (or perhaps a more generic response)?
> I believe the question qualifies as a legitimate FAQ.
> 
> (Or maybe it's there already?  Haven't check it lately...)
> 
> Andy
> 
> > -----Original Message-----
> > From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
> > Sent: Monday, October 29, 2001 8:45 AM
> > To: Laura Gross
> > Cc: r-help at stat.math.ethz.ch
> > Subject: Re: [R] Large data sets in R
> > 
> > 
> > On Mon, 29 Oct 2001, Laura Gross wrote:
> > 
> > > As a new user of R, I'm wondering what the maximum matrix 
> > size is in R?
> > > I have a large data set consisting of 9000 people and want 
> > to be able to
> > > create large matrices involving these. Is R suitable for large data
> > > sets?
> > 
> > The answer depends on
> > 
> > 1) Your platform
> > 2) The amount of memory you have (especially of RAM)
> > 3) What you want to do with 9000 cases, in particular how 
> > much information
> > you have on them.
> > 
> > As a general guide, I would say 9000 cases was not large for R on a
> > machine with say 256Mb RAM.  But a cluster analysis needing a
> > 9000*9000 matrix would be too large.
> > 
> > -- 
> > Brian D. Ripley,                  ripley at stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> > 
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read 
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: 
> > r-help-request at stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._._._._._._._._
> > 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem at jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Mon Oct 29 17:29:19 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 29 Oct 2001 08:29:19 -0800 (PST)
Subject: [R] extract element, row, etc from general array structure
In-Reply-To: <20011029000310.A10732@camille.indigoindustrial.co.nz>
Message-ID: <Pine.A41.4.33.0110290819230.153272-100000@homer35.u.washington.edu>

On Mon, 29 Oct 2001, Jason Turner wrote:

> This one has me a bit stumped, and I know there may well be a really
> simple way of doing it in R.  Sorry for the long-winded explanation.
>
> Short version:
> given an array of arbitrary number of dimensions D, how can we
> retrieve the Nth element of dimension D without knowing  in
> advance what D will be?  For example, given that array
> A has dimensions c(3,4,5), and N=2, can we write a function
> that will "know" to return A[,,2], and not mistake that
> for A[2] or A[,2]?  Bonus question - can such a function
> be written without relying purely on an arbitrarily high
> number of "if" statements?
>

function(A,N){
 dims<-dim(A)
 D<-length(dims)
 skip<-prod(dims[seq(length=D-1)])
 slice<-A[ (N-1)*skip+1:skip]
 if (D>1) dim(slice)<-dims[seq(length=D-1)]
 return(slice)
}


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Mon Oct 29 18:10:57 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 29 Oct 2001 09:10:57 -0800 (PST)
Subject: [R] From data.frame  to Matrix
In-Reply-To: <OFE1808007.877DA5EF-ONC1256AF4.00468F0F@evotecoai.com>
Message-ID: <Pine.A41.4.33.0110290857210.153272-100000@homer35.u.washington.edu>

On Mon, 29 Oct 2001 Pierre.Ilouga at evotecoai.com wrote:

>
> Hi to all.
> I'm a relative new R user and I would like someone to help me in solving
> the following simple question:
> I have a two column (L , T ) data frame. Column L has three levels: a, b ,
> and c  and Column T is real valued.
>
>   L          T
>   a    0.8
>   a   0.9
>   a   0.1
>   a   -0.8
>   a  -1.0
>   b  -0.3
>   b    0.7
>   b       1.0
>   b   0.4
>   c  -0.5
>   c  -1.0
>
> My aim is to get a data frame of the form
>
>       L    T1       T2   T3    T4  T5
>      a    0.8   0.9      0.1  -0.8       -1
>      b    -0.3      0.7   1.0      0.4   NA
>       c   -0.5  -1.0     NA        NA     NA
>
> without using a "for"  loop, but by using functions of the "apply" family
> for exemple or something specific to R and more efficient.

The speed advantage of the `apply' family over for() loops in the S
dialects is legendary -- partly history and partly myth. The reason to use
apply is usually more for clarity than speed.

If your dataframe is called `data' I would do something like
  rows<-split(data$T,data$L)
  n<-max(sapply(rows,length))

  Ti<-matrix(NA, ncol=n, nrow=length(rows))
  for(i in 1:length(rows))
	Ti[i,1:length(rows[[i]])]<-rows[[i]]

  answer<-data.frame(names(rows),Ti)
  names(answer)<-c("L",paste("T",1:n,sep=""))


You could replace the loop with something like
    Ti<-do.call("rbind",lapply(rows,function(r) c(r,rep(NA,n-length(r)))))
but in this case it would be less clear than the loop and is unlikely to
be faster.


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetilh at umsanet.edu.bo  Mon Oct 29 17:31:15 2001
From: kjetilh at umsanet.edu.bo (kjetil halvorsen)
Date: Mon, 29 Oct 2001 12:31:15 -0400
Subject: [R] Finding an index of matrix[i,j]
References: <Pine.SOL.4.30.0110261343380.17931-100000@s.psych.uiuc.edu>
Message-ID: <3BDD8453.6EE2BDFC@umsanet.edu.bo>

> m <- rbinom(25,5,0.5)
> m <- matrix(m,5,5)
> m
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    4    3    2    4
[2,]    1    4    4    2    1
[3,]    4    3    3    2    3
[4,]    3    2    2    2    1
[5,]    2    2    3    2    2
> max(m)
[1] 4
> ?which
> which(m==max(m), arr.ind=TRUE)
     row col
[1,]   3   1
[2,]   1   2
[3,]   2   2
[4,]   2   3
[5,]   1   5


Kjetil Halvorsen

Wolfgang Viechtbauer wrote:
> 
> I hope somebody can help me out with this. Let's say I have a matrix with
> i rows and j columns and I want to find the index of the row AND column of
> the maximum value in the matrix. I tried to play around with the which()
> command, but couldn't find an easy solution that didn't involve loops and
> various other inelegant approaches. I hope that there is an easy way of
> doing this. Thanks in advance for any suggestions!
> 
> ------------------------------------------------------------------------
> Wolfgang Viechtbauer                       wviechtb at s.psych.uiuc.edu
> Department of Quantitative Psychology      viechtba at students.uiuc.edu
> 
> University of Illinois, Champaign-Urbana   [Virus  based  on  an honors-
> Room 409, Psychology Building              system:  Forward  this  to 10
> 603 E. Daniel Street                       random  people  and  delete a
> Champaign, IL 61820                        bunch of your files. Thanks.]
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From elvis at xlsolutions-corp.com  Mon Oct 29 19:50:14 2001
From: elvis at xlsolutions-corp.com (Elvis Miller, PhD)
Date: Mon, 29 Oct 2001 13:50:14 -0500
Subject: [R] Course: R programming Techniques in Washington DC- November 28-29
Message-ID: <200110291850.f9TIoEX23013@badass.hosting-network.com>

XLSolutions Corporation (www.xlsolutions-corp.com) will offer 
another short R course, "R Programming Techniques" in:

Washington DC - November 28-20, 2001.

Boston - November 28-30, 2001.


Academic $875
Commercial $985 Ask for Early bird discount! 

Please ask for group discount (2 persons or more)

Register Now! Payment due 7 days AFTER the class and Includes
course materials, 90 days Technical Support for R, 
snacks and continental breakfast!)


PARTICIPANTS TO OUR CLASSES ARE ALWAYS PROVIDED WITH A COMPUTER!



Course Description:

This short R course focuses on a broad spectrum of topics, from
reading raw data to a comparison of R, S and SAS. We will learn the 
essentials of data manipulation, graphical visualization and R 
programming. We will explore statistical data analysis tools, including 
graphics with data sets from areas such as Finance, Biopharm, 
manufacturing and E-commerce. However, participants are encouraged to
bring their own data for an interactive session with the trainer.


Registration and more information:



Email Sue Turner: sue at xlsolutions-corp.com
Phone: 206-686-1578 x221

Visit us: www.xlsolutions-corp.com/training.htm

The course outline will include:

.Introduction to R
.Install R, ESS
.Data Manipulation
.Graphics 
.Managing R projects, ESS
.Statistical Modelling in R
.Discussion, Cases studies from participants
.Iteration
.Functions 
.Packaging 
.Objects 
.Debugging and Optimizing
.Examples
Final Discussion



Course Format:

This course consists of a series of short lectures with demonstrations and 
interactive sessions for the participants. Each student is provided with 
bound copies of the notes and a CD-ROM containing all examples, 
exercises and software used on the course.


Share Your Thoughts:

Are there any additional topics you would like for this course to address?
Would you like for this course to be offered in another city? 

Please let us know by contributing to our recommendation list: 
training at xlsolutions-corp.com.


================================================


Short R Fundamentals and Programming Techniques (Washington DC/2)

Pre-registration Form (Please email or print and fax: 206-686-1578)
XLsolutions Corporation: For your Solutions needs, Consulting and 
Training. www.xlsolutions-corp.com



Title...... First Name ................. Last Name....................

Organization..........................................................

Mailing Address....................................................... 

...............................................................

...............................................................

Zip Code...................... Country.............................

Telephone........................... Fax ...............................

E-mail................................................................

Payment will be made by: (1) check (2) invoice (3) bank transfer

Sincerely

Sue Turner
Sales Manager
North American Division
XLSolutions Corporation
Email: sue at xlsolutions-corp.com
Phone: 206-686-1578
Web: www.xlsolutions-corp.com


XLSolutions also offer customized private courses delivered by expert
trainers with a track teaching and training record in their fields.

XLSolutions Consulting Group meets your needs from design to development.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tebaldi at rap.ucar.edu  Mon Oct 29 20:30:15 2001
From: tebaldi at rap.ucar.edu (Claudia Tebaldi)
Date: Mon, 29 Oct 2001 12:30:15 -0700 (MST)
Subject: [R] times 'til first change
Message-ID: <Pine.GSO.4.05.10110291201470.11245-100000@virga.rap.ucar.edu>

There is probably an elegant and efficient way to do this -- perhaps
already implemented, and some of you knows it. Myself, I'm getting stuck
in long loops ... 

Here is the question: 

I have a long (80,000 + obs) binary time series.
For each of its elements I'd like to compute and save in a vector "the
number of steps 'til the first switch of state happens". For example, say 
the first 10 obs of my x series look like

                 0 0 1 0 1 1 1 1 0 1

I want to come up with a 9-component y vector that looks like

                 2 1 1 1 4 3 2 1 1

(it took two steps for the state to change from 0 to 1 if I take the first
obs as the state of reference, one step if i take the second obs as
reference ... and so on). 
I don't care about distinguishing changes from 0 to 1 from their opposite,
but I'd like to have NAs appear in the derived series in case NAs appeared
in the original time series BEFORE a switch, say 
 
             x    0 0 1 0 1 1 1 NA 0 1.....

should originate

             y    2 1 1 1 NA NA NA NA 1....

because for the series of 1's starting in the 5th position I really don't
know if the switch happened at the 8th or at the 9th step.

thanks in advance

claudia


-------------------------------------------------------------------------
claudia tebaldi                                  NCAR  RAP
project scientist                                P.O. Box 3000
(303) 497-2830                                   Boulder, CO 80307
--------------------------------------------------------------------------





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From phgrosje at ulb.ac.be  Mon Oct 29 23:16:01 2001
From: phgrosje at ulb.ac.be (Philippe Grosjean)
Date: Mon, 29 Oct 2001 23:16:01 +0100
Subject: [R] times 'til first change
In-Reply-To: <Pine.GSO.4.05.10110291201470.11245-100000@virga.rap.ucar.edu>
Message-ID: <MABBLJDICACNFOLGIHJOEENDCGAA.phgrosje@ulb.ac.be>

Here is just a starting point:

> a <- c(0,0,1,0,1,1,1,1,0,1)
> unlist(sapply(rle(a)$lengths, function(x) x:1))
 [1] 2 1 1 1 4 3 2 1 1 1

To exactly match your question, you still have to drop the last element and
program a special treatment for NAs.
Best,

Philippe Grosjean


...........]<(({?<...............<?}))><...............................
 ) ) ) ) )	 __               	 __
( ( ( ( ( 	|__)              	|  _
 ) ) ) ) )	|   hilippe       	|__)rosjean
( ( ( ( ( 	Marine Biol. Lab., ULB, Belgium
 ) ) ) ) )	                  	 __
( ( ( ( ( 	|\  /|            	|__)
 ) ) ) ) )	| \/ |ariculture &	|__)iostatistics
( ( ( ( (
 ) ) ) ) )	e-mail: phgrosje at ulb.ac.be or phgrosjean at sciviews.org
( ( ( ( ( 	SciViews project coordinator (http://www.sciviews.org)
 ) ) ) ) )      tel: 00-32-2-650.29.70 (lab), 00-32-2-673.31.33 (home)
( ( ( ( (
 ) ) ) ) )      "I'm 100% confident that p is between 0 and 1"
( ( ( ( (                                  L. Gonick & W. Smith (1993)
 ) ) ) ) )
......................................................................



-----Message d'origine-----
De : owner-r-help at stat.math.ethz.ch
[mailto:owner-r-help at stat.math.ethz.ch]De la part de Claudia Tebaldi
Envoye : lundi 29 octobre 2001 20:30
A : r-help at stat.math.ethz.ch
Objet : [R] times 'til first change


There is probably an elegant and efficient way to do this -- perhaps
already implemented, and some of you knows it. Myself, I'm getting stuck
in long loops ...

Here is the question:

I have a long (80,000 + obs) binary time series.
For each of its elements I'd like to compute and save in a vector "the
number of steps 'til the first switch of state happens". For example, say
the first 10 obs of my x series look like

                 0 0 1 0 1 1 1 1 0 1

I want to come up with a 9-component y vector that looks like

                 2 1 1 1 4 3 2 1 1

(it took two steps for the state to change from 0 to 1 if I take the first
obs as the state of reference, one step if i take the second obs as
reference ... and so on).
I don't care about distinguishing changes from 0 to 1 from their opposite,
but I'd like to have NAs appear in the derived series in case NAs appeared
in the original time series BEFORE a switch, say

             x    0 0 1 0 1 1 1 NA 0 1.....

should originate

             y    2 1 1 1 NA NA NA NA 1....

because for the series of 1's starting in the 5th position I really don't
know if the switch happened at the 8th or at the 9th step.

thanks in advance

claudia


-------------------------------------------------------------------------
claudia tebaldi                                  NCAR  RAP
project scientist                                P.O. Box 3000
(303) 497-2830                                   Boulder, CO 80307
--------------------------------------------------------------------------





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Mon Oct 29 23:30:35 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 29 Oct 2001 14:30:35 -0800 (PST)
Subject: [R] times 'til first change
In-Reply-To: <Pine.GSO.4.05.10110291201470.11245-100000@virga.rap.ucar.edu>
Message-ID: <Pine.A41.4.33.0110291409460.153272-100000@homer35.u.washington.edu>

On Mon, 29 Oct 2001, Claudia Tebaldi wrote:

> There is probably an elegant and efficient way to do this -- perhaps
> already implemented, and some of you knows it. Myself, I'm getting stuck
> in long loops ...
>
> Here is the question:
>
> I have a long (80,000 + obs) binary time series.
> For each of its elements I'd like to compute and save in a vector "the
> number of steps 'til the first switch of state happens". For example, say
> the first 10 obs of my x series look like
>
>                  0 0 1 0 1 1 1 1 0 1
>
> I want to come up with a 9-component y vector that looks like
>
>                  2 1 1 1 4 3 2 1 1
>
> (it took two steps for the state to change from 0 to 1 if I take the first
> obs as the state of reference, one step if i take the second obs as
> reference ... and so on).

In this case without missing values I think this works
  cumsum(diff(x)!=0)->l
  y<-do.call("c",lapply(split(x,c(0,l)),function(r) length(r):1))

or something similar with rle()

> I don't care about distinguishing changes from 0 to 1 from their opposite,
> but I'd like to have NAs appear in the derived series in case NAs appeared
> in the original time series BEFORE a switch, say
>
>              x    0 0 1 0 1 1 1 NA 0 1.....
>
> should originate
>
>              y    2 1 1 1 NA NA NA NA 1....
>
> because for the series of 1's starting in the 5th position I really don't
> know if the switch happened at the 8th or at the 9th step.
>

This is a little trickier

If the NAs were sparse enough you could do

x1<-ifelse(is.na(x),1,x)
x0<-ifelse(is.na(x),0,x)

then generate y1 and y0 and do
  y1[y1!=y0]<-NA
but I'm not sure that this works if you have two NAs close together.


	-thomas



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dwhite at ling.ohio-state.edu  Tue Oct 30 00:10:45 2001
From: dwhite at ling.ohio-state.edu (David White)
Date: Mon, 29 Oct 2001 18:10:45 -0500 (EST)
Subject: [R] write a bunch of objects to files
Message-ID: <Pine.SOL.4.33.0110291805110.14264-100000@julius.ling.ohio-state.edu>


Hello all,

I've got a bunch of objects I'd like to write to .csv files. For example,
I have objects conveniently called

n002.csv
n001.csv
p103.csv
.
.
.

I tried a loop:

> for(i in ls(pattern="csv"))
+write.table(i, file=i, sep=",", quote=F)

That, of course, wrote out a bunch of files that contained

x
1, n002.csv

Or the like.

How can I get i in the loop above to be an object instead of a string?

Thanks

S. David White
sdavidwhite at bigfoot.com
Columbus, Ohio

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Tue Oct 30 00:26:40 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 29 Oct 2001 15:26:40 -0800 (PST)
Subject: [R] write a bunch of objects to files
In-Reply-To: <Pine.SOL.4.33.0110291805110.14264-100000@julius.ling.ohio-state.edu>
Message-ID: <Pine.A41.4.33.0110291519280.153272-100000@homer35.u.washington.edu>

On Mon, 29 Oct 2001, David White wrote:

>
> Hello all,
>
> I've got a bunch of objects I'd like to write to .csv files. For example,
> I have objects conveniently called
>
> n002.csv
> n001.csv
> p103.csv
> .
> .
> .
>
> I tried a loop:
>
> > for(i in ls(pattern="csv"))
> +write.table(i, file=i, sep=",", quote=F)
>
> That, of course, wrote out a bunch of files that contained
>
> x
> 1, n002.csv
>
> Or the like.
>
> How can I get i in the loop above to be an object instead of a string?
>

Use substitute():
 for(i in ls(pattern="csv"))
    eval(substitute(obj, file=fname, sep=",", quote=F),
		list(obj=as.name(i),fname=i)
         )

or get():
 for(i in ls(pattern="csv"))
	write.table(get(i), file=i, sep=",", quote=F)



	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From olivier at loudcloud.com  Tue Oct 30 01:20:27 2001
From: olivier at loudcloud.com (Olivier Collignon)
Date: Mon, 29 Oct 2001 16:20:27 -0800
Subject: [R] creating chron object aggregates (e.g. sums by day)
Message-ID: <3BDDF24A.D3167671@loudcloud.com>

What is the recommended/optimal way to perform aggregates on data frames
with chron objects?

Here is an example:

>raw.data
1 07/09/01   4000
2 07/09/01   2000
3 07/11/01   1000
4 07/13/01   800
5 07/13/01   700
6 07/16/01   600
7 07/17/01   500

I'm trying to construct a function that would first aggregate the data
(second column) by day (grouping by the first column) according to a
function (here "sum", but could be "max" or other)

>chronaggregate(raw.data, sum, "days")   #(used "days" since 07/09/01 is
short for 07/09/01 00:00:00, but could be 07/09/01 00:12:34)
1 07/09/01   6000      << sum of data values for day 07/09/01 from
raw.data
2 07/11/01   1000
3 07/13/01   1500      << sum of data values for day 07/13/01 from
raw.data
4 07/16/01   600
5 07/17/01   500

and insert 0 values for days without data:

1 07/09/01   6000
2 07/10/01   0              << inserted record
3 07/11/01   1000
4 07/12/01   0              << inserted record
5 07/13/01   1500
6 07/14/01   0              << inserted record
7 07/15/01   0              << inserted record
8 07/16/01   600
9 07/17/01   500

Is there a simple way to do this?

Thanks,

--
-Olivier

--
Olivier Collignon
Loudcloud, Inc.
olivier at loudcloud.com



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From vograno at arbitrade.com  Tue Oct 30 01:26:42 2001
From: vograno at arbitrade.com (Vadim Ogranovich)
Date: Mon, 29 Oct 2001 18:26:42 -0600
Subject: [R] write a bunch of objects to files
Message-ID: <AFD78192EC49D311BFAE00902798AB8F23D592@jupiter.sc.arbitrade.com>

Look at ?get

-----Original Message-----
From: David White [mailto:dwhite at ling.ohio-state.edu]
Sent: Monday, October 29, 2001 3:11 PM
To: r-help at stat.math.ethz.ch
Subject: [R] write a bunch of objects to files



Hello all,

I've got a bunch of objects I'd like to write to .csv files. For example,
I have objects conveniently called

n002.csv
n001.csv
p103.csv
.
.
.

I tried a loop:

> for(i in ls(pattern="csv"))
+write.table(i, file=i, sep=",", quote=F)

That, of course, wrote out a bunch of files that contained

x
1, n002.csv

Or the like.

How can I get i in the loop above to be an object instead of a string?

Thanks

S. David White
sdavidwhite at bigfoot.com
Columbus, Ohio

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-------------------------------------------------- 
DISCLAIMER 
This e-mail, and any attachments thereto, is intended only for use by the
addressee(s) named herein and may contain legally privileged and/or
confidential information.  If you are not the intended recipient of this
e-mail, you are hereby notified that any dissemination, distribution or
copying of this e-mail, and any attachments thereto, is strictly prohibited.
If you have received this e-mail in error, please immediately notify me and
permanently delete the original and any copy of any e-mail and any printout
thereof. 

E-mail transmission cannot be guaranteed to be secure or error-free.  The
sender therefore does not accept liability for any errors or omissions in
the contents of this message which arise as a result of e-mail transmission.

NOTICE REGARDING PRIVACY AND CONFIDENTIALITY 

Knight Trading Group may, at its discretion, monitor and review the content
of all e-mail communications. 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From skayis at lic.co.nz  Tue Oct 30 02:29:43 2001
From: skayis at lic.co.nz (Seyit Kayis)
Date: Tue, 30 Oct 2001 13:29:43 +1200
Subject: [R] Calling FORTRAN code
Message-ID: <4C256AF5.00083727.00@notes.livestock.org.nz>



Dear R users,

I have recently started using R. I need to execute a FORTRAN file within R.
Does it allow to call executable (or FORTRAN code) file within R ?

Thank you very much in advance.

Kind Regards

Seyit Ali KAYIS



  ___________________________________________________________________________
              THE FOLLOWING WARNINGS ATTACH TO THIS COMMUNICATION
This  material  is  intended  for  the named recipient only and has been created
solely for the purpose and function of Livestock Improvement Corporation Limited
and may contain information that is subject to the Privacy Act / Confidentiality
/ Privilege / Copyright. Any person other than the named recipient is prohibited
from retaining / disclosing / copying / distributing / using all or part of this
material.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From richmond at saintmarys.edu  Tue Oct 30 02:29:28 2001
From: richmond at saintmarys.edu (David A Richmond)
Date: Mon, 29 Oct 2001 20:29:28 -0500 (EST)
Subject: [R] extracting object names as strings
Message-ID: <Pine.GSO.4.20.0110292025590.16067-100000@jade.saintmarys.edu>

Hi,
	I'm looking for a function which returns the name of the argument
object as a string: 

>vect <- 1:3
>function(vect)
"vect"

I've looked at 'name', 'names', 'objects', none seem to do exactly what I
want. ls/objects comes close, but I can't figure out how to force it to
give me only one object name.

daver

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|David Richmond                It works on a          |      
+ Dept. of Sociology          complex scientific      + 
|Saint Mary's College          principle, known as    |  
+ Notre Dame, IN 46556               "pot luck."      +
|219-284-4517                    - The Doctor         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Robert.Denham at dnr.qld.gov.au  Tue Oct 30 06:21:46 2001
From: Robert.Denham at dnr.qld.gov.au (Denham Robert)
Date: Tue, 30 Oct 2001 15:21:46 +1000
Subject: [R] extracting object names as strings
Message-ID: <7BDA5DE121FF454A88C2FFFAD392718C15AA73@INDMAIL.lands.resnet.qg>

Try
> deparse(substitute(vect))

Robert
-----Original Message-----
From: David A Richmond [mailto:richmond at saintmarys.edu]
Sent: Tuesday, 30 October 2001 11:29
To: r-help at stat.math.ethz.ch
Subject: [R] extracting object names as strings


Hi,
	I'm looking for a function which returns the name of the
argument
object as a string: 

>vect <- 1:3
>function(vect)
"vect"

I've looked at 'name', 'names', 'objects', none seem to do exactly what
I
want. ls/objects comes close, but I can't figure out how to force it to
give me only one object name.

daver

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|David Richmond                It works on a          |      
+ Dept. of Sociology          complex scientific      + 
|Saint Mary's College          principle, known as    |  
+ Notre Dame, IN 46556               "pot luck."      +
|219-284-4517                    - The Doctor         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-.-
r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._._._


************************************************************************
The information in this e-mail together with any attachments is
intended only for the person or entity to which it is addressed
and may contain confidential and/or privileged material.

Any form of review, disclosure, modification, distribution
and/or publication of this e-mail message is prohibited.  

If you have received this message in error, you are asked to
inform the sender as quickly as possible and delete this message
and any copies of this message from your computer and/or your
computer system network.  
************************************************************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gb at stat.umu.se  Tue Oct 30 06:52:06 2001
From: gb at stat.umu.se (=?iso-8859-1?Q?G=F6ran_Brostr=F6m?=)
Date: Tue, 30 Oct 2001 06:52:06 +0100 (CET)
Subject: [R] Calling FORTRAN code
In-Reply-To: <4C256AF5.00083727.00@notes.livestock.org.nz>
Message-ID: <Pine.LNX.4.33.0110300650570.4581-100000@tal.stat.umu.se>

On Tue, 30 Oct 2001, Seyit Kayis wrote:

> 
> 
> Dear R users,
> 
> I have recently started using R. I need to execute a FORTRAN file within R.
> Does it allow to call executable (or FORTRAN code) file within R ?

Yes, see the functions 'system' and '.Fortran'

G?ran

> Thank you very much in advance.
> 
> Kind Regards
> 
> Seyit Ali KAYIS
> 
> 
> 
>   ___________________________________________________________________________
>               THE FOLLOWING WARNINGS ATTACH TO THIS COMMUNICATION
> This  material  is  intended  for  the named recipient only and has been created
> solely for the purpose and function of Livestock Improvement Corporation Limited
> and may contain information that is subject to the Privacy Act / Confidentiality
> / Privilege / Copyright. Any person other than the named recipient is prohibited
> from retaining / disclosing / copying / distributing / using all or part of this
> material.
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
 G?ran Brostr?m                      tel: +46 90 786 5223
 professor                           fax: +46 90 786 6614
 Department of Statistics            http://www.stat.umu.se/egna/gb/
 Ume? University
 SE-90187 Ume?, Sweden             e-mail: gb at stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From joerg.maeder at ethz.ch  Tue Oct 30 09:35:33 2001
From: joerg.maeder at ethz.ch (Joerg Maeder)
Date: Tue, 30 Oct 2001 09:35:33 +0100
Subject: [R] creating chron object aggregates (e.g. sums by day)
References: <3BDDF24A.D3167671@loudcloud.com>
Message-ID: <3BDE6655.5CF5B721@ethz.ch>

hallo,

the following code isn't very pretty, but it works. The great problem is
the format of the date.

#read your data
raw.data <- read.table('yourdatafile')
#collect the values of a single day (defined by the first 8 characters
of your date-code)
sum.raw.data <- tapply(raw.data[,2],substring(raw.data[,1],1,8),sum)
#creating the date range of your final variable 
dr <- as.character(seq(ISOdate(2001,7,1,0), ISOdate(2001,7,31,0),
"days"))
#Change the format of them to the same of your input data
sdr <- paste(substring(dr,6,7),substr(dr,9,10),substr(dr,3,4),sep='/')
#creating a vector with the correct length
arr.data <- rep(0,length(sdr))
#set the names of the single elements
names(arr.data) <- sdr
#now you can access the elements direct with their name
arr.data[names(sum.raw.data)] <- sum.raw.data
#show the result
arr.data


an other (similary) way is, to change the date format of your data

raw.data <- read.table('test.txt')
sum.raw.data <- tapply(raw.data[,2],substring(raw.data[,1],1,8),sum)
new.date <- strptime(names(sum.raw.data),format="%m/%d/%y") #convert
date format

se <- seq(ISOdate(2001,7,1,0), ISOdate(2001,7,31,0), "days")
arr.data <- rep(0,length(se))
names(arr.data) <- substr(as.character(se),1,10)
arr.data[as.character(new.date)] <- sum.raw.data


it's this simple enough?

gruess

joerg ameder


Olivier Collignon wrote:
> 
> What is the recommended/optimal way to perform aggregates on data frames
> with chron objects?
> 
> Here is an example:
> 
> >raw.data
> 1 07/09/01   4000
> 2 07/09/01   2000
> 3 07/11/01   1000
> 4 07/13/01   800
> 5 07/13/01   700
> 6 07/16/01   600
> 7 07/17/01   500
> 
> I'm trying to construct a function that would first aggregate the data
> (second column) by day (grouping by the first column) according to a
> function (here "sum", but could be "max" or other)
> 
> >chronaggregate(raw.data, sum, "days")   #(used "days" since 07/09/01 is
> short for 07/09/01 00:00:00, but could be 07/09/01 00:12:34)
> 1 07/09/01   6000      << sum of data values for day 07/09/01 from
> raw.data
> 2 07/11/01   1000
> 3 07/13/01   1500      << sum of data values for day 07/13/01 from
> raw.data
> 4 07/16/01   600
> 5 07/17/01   500
> 
> and insert 0 values for days without data:
> 
> 1 07/09/01   6000
> 2 07/10/01   0              << inserted record
> 3 07/11/01   1000
> 4 07/12/01   0              << inserted record
> 5 07/13/01   1500
> 6 07/14/01   0              << inserted record
> 7 07/15/01   0              << inserted record
> 8 07/16/01   600
> 9 07/17/01   500
> 
> Is there a simple way to do this?
> 
> Thanks,
> 
> --
> -Olivier
> 
> --
> Olivier Collignon
> Loudcloud, Inc.
> olivier at loudcloud.com
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
    Joerg Maeder             IACETH              INSTITUTE
   PhD Student                              FOR ATMOSPHERIC 
  Phone: +41 1 633 36 25                 AND CLIMATE SCIENCE
 Fax: +41 1 633 10 58                  ETH Z?RICH Switzerland
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From alobo at ija.csic.es  Tue Oct 30 10:25:21 2001
From: alobo at ija.csic.es (Agustin Lobo)
Date: Tue, 30 Oct 2001 10:25:21 +0100 (MET)
Subject: [R] extracting object names as strings
In-Reply-To: <Pine.GSO.4.20.0110292025590.16067-100000@jade.saintmarys.edu>
Message-ID: <Pine.OSF.3.96.1011030102027.5699A-100000@ija.csic.es>


Look at the example in help(deparse). 
deparse(substitute(x)) is used there, as.character(substitute(x))
should also work.
Actually, I made a simple function named "get.name"
with the first solution just to have an easier-to-remember
function!

Agus

Dr. Agustin Lobo
Instituto de Ciencias de la Tierra (CSIC)
Lluis Sole Sabaris s/n
08028 Barcelona SPAIN
tel 34 93409 5410
fax 34 93411 0012
alobo at ija.csic.es


On Mon, 29 Oct 2001, David A Richmond wrote:

> Hi,
> 	I'm looking for a function which returns the name of the argument
> object as a string: 
> 
> >vect <- 1:3
> >function(vect)
> "vect"
> 
> I've looked at 'name', 'names', 'objects', none seem to do exactly what I
> want. ls/objects comes close, but I can't figure out how to force it to
> give me only one object name.
> 
> daver
> 
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
> |David Richmond                It works on a          |      
> + Dept. of Sociology          complex scientific      + 
> |Saint Mary's College          principle, known as    |  
> + Notre Dame, IN 46556               "pot luck."      +
> |219-284-4517                    - The Doctor         |
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From laura at bayesian-bay.freeserve.co.uk  Tue Oct 30 10:59:57 2001
From: laura at bayesian-bay.freeserve.co.uk (Laura Gross)
Date: Tue, 30 Oct 2001 09:59:57 +0000
Subject: [R] Matrix/Data.Frame questions
Message-ID: <ud8$6JAdon37EwZB@bayesian-bay.freeserve.co.uk>

Dear list

Thanks to all who answered my query yesterday regarding the maximum size
of a matrix in R.

I have a couple more questions to ask with being new to R!

1. Having imported my data into R from SPSS, I have a data.frame
consisting of several variables. I am wanting to store my response
variable, Y, and four explanatory variables, X, in vectors/matrices. How
can I do this in R? 

2. If I have say a 4x4 matrix, A, and I want to extract part of this
matrix to create a submatrix, B, (say row 1:3 and column 1:3) how can I
do this?
Could it be done something like: B<-A[1:3,1:3] ?

Thanks for any help
Laura

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Oct 30 12:56:50 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 30 Oct 2001 11:56:50 +0000 (GMT)
Subject: [R] Help with 'get.hist.quote' on tseries
In-Reply-To: <3BDD1788.81A9DE31@bluewin.ch>
Message-ID: <Pine.LNX.4.31.0110301153040.1913-100000@gannet.stats>

On Mon, 29 Oct 2001, Adrian Trapletti wrote:

> > Date: Mon, 29 Oct 2001 09:36:43 +0700
> > From: "Dr. Andrew Criswell" <mousie at arcriswell.com>
> > Subject: [R] Help with 'get.hist.quote' on tseries
> >
> > Hi ALL:
> >
> > I am trying to use get.help.quote from library(tseries). I tried
> > to run the example from help(get.hist.quote) but R complained. Here
> > is the command I used and the response:
> >
> > ibm <- get.hist.quote(instrument = "ibm", start = "1998-01-01")
> > trying URL `http://chart.yahoo.com/table.csv?s=ibm&a=01&b=01&c=1998&d=10&e=28&f=2001&g=d&q=q&y=0&z=ibm&x=.
> > csv'
> >
> > Content type `application/octet-stream' length unknown
> > opened URL
> > downloaded 45Kb
> >
> > time series starts 1998-01-02
> > time series ends   2001-10-26
> > Error in fromchar(x) : character string is not in a standard unambiguous
> > format
> > >
> >
> > Can anyone help? (I use R 1.3.1 with Windows 2000.)
> >
> > Thanks,
> > ANDREW
> >
> > Andrew Criswell, Ph.D.
> > Graduate School, Bangkok University
> >
>
> Under Suse Linux 7.0 and R 1.3.1 this work fine (tseries 0.8-0). So this is maybe a Windows related problem?

It also works fine on R 1.3.1 with Windows 2000 here.  It might be a
locale-specific problem: in any case I think it needs you to debug it,
possibly trying setting your machine to a different locale.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From matthew_wiener at merck.com  Tue Oct 30 14:40:12 2001
From: matthew_wiener at merck.com (Wiener, Matthew Charles)
Date: Tue, 30 Oct 2001 08:40:12 -0500
Subject: [R] moving dimnames when reassigning
Message-ID: <7C4F091F6140D411A29300508B5C73B905BDEDCC@usrymx04.merck.com>

Hi, all.

I've got a question that arose when I was switching some row and columns in
a matrix.  I was expecting the row and column names to follow their rows and
columns, and they didn't.  I think I see some logic to the behavior, but I'm
not sure whether it's intentional or not, so I thought I'd ask the list
whether this is a feature or a bug.

Here's an example (R-1.3.1, same behavior under Windows NT and Linux).  This
example uses a matrix, and switches columns.  The same thing happens when
using data frames and when switching rows.


> t1 <- matrix(runif(25), 5, 5)
> dimnames(t1) <- list(letters[1:5], LETTERS[1:5])
> t1
          A         B                C         	D          E
a 0.8857528 0.1435165 0.44589190 0.1837626 0.000864055
b 0.1867816 0.8102641 0.97127777 0.8952994 0.151531510
c 0.1102591 0.4704422 0.04712121 0.2345568 0.535079125
d 0.7435725 0.7270509 0.49541471 0.3195482 0.892261212
e 0.7610705 0.6057041 0.73183485 0.9959111 0.176386124
> 
> t1[,c(1,2)] <- t1[,c(2,1)]
> t1
          A         B                C                  D           E
a 0.1435165 0.8857528 0.44589190 0.1837626 0.000864055
The columns switched,
b 0.8102641 0.1867816 0.97127777 0.8952994 0.151531510		but the
column names
c 0.4704422 0.1102591 0.04712121 0.2345568 0.535079125		didn't.
d 0.7270509 0.7435725 0.49541471 0.3195482 0.892261212
e 0.6057041 0.7610705 0.73183485 0.9959111 0.176386124
> 
> t1 <- t1[,c(2,1,3,4,5)]
> 
> t1
          B         A                C                  D            E
a 0.8857528 0.1435165 0.44589190 0.1837626 0.000864055		The columns
and
b 0.1867816 0.8102641 0.97127777 0.8952994 0.151531510		column names
both
c 0.1102591 0.4704422 0.04712121 0.2345568 0.535079125		switched.
d 0.7435725 0.7270509 0.49541471 0.3195482 0.892261212
e 0.7610705 0.6057041 0.73183485 0.9959111 0.176386124
> 


I was rearranging a matrix in the first way, and then found that the row and
column names hadn't followed along.  Two workarounds are to permute the row
and column names separately (which is what I'm doing), or to construct
indices to do things the second way.

If this was a design decision, I'd like to understand the reason for it
better.  If it's unintended, I'll turn this into a bug report.

Regards,

Matt Wiener


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From statsonthebrain at yahoo.com  Tue Oct 30 15:18:40 2001
From: statsonthebrain at yahoo.com (Isabel Jones)
Date: Tue, 30 Oct 2001 06:18:40 -0800 (PST)
Subject: [R] For Loops
Message-ID: <20011030141840.74240.qmail@web20803.mail.yahoo.com>

Hi all

Perhaps someone could help me?

I am running a loop from i=1 to n

In my data.frame I have a list of i.d's (i=1 to n) and
each i.d has 2
rows of data (representing 2 time points) e.g.

id  Y   X1   X2
 1   1   0     0 
 1   0   0     0
 2   1   1     0
 2   1   1     0

I am wanting to put into my 'for' loop, a line which
can pick out the
rows where id=i and call this a temporary name while
it executes some
commands beforing moving on to the next i. I'm not
sure what command I
can use to locate these rows where id=i and store them
in a temporary
matrix.

Also when I have say a matrix consisting of all values
of Y - how can I
refer to the Y for person i i.e. Yi
I have seen in the R information that I can use
Y[[i]]?
Is it possible to write say Y[[i]]<-x[[i]]*5

Can somebody point me in the right direction as to how
to use indexing?

Cheers to all
   Isabel

__________________________________________________



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Tue Oct 30 18:04:13 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue, 30 Oct 2001 09:04:13 -0800 (PST)
Subject: [R] Matrix/Data.Frame questions
In-Reply-To: <ud8$6JAdon37EwZB@bayesian-bay.freeserve.co.uk>
Message-ID: <Pine.A41.4.33.0110300901120.18308-100000@homer19.u.washington.edu>

On Tue, 30 Oct 2001, Laura Gross wrote:

> Dear list
>
> Thanks to all who answered my query yesterday regarding the maximum size
> of a matrix in R.
>
> I have a couple more questions to ask with being new to R!
>
> 1. Having imported my data into R from SPSS, I have a data.frame
> consisting of several variables. I am wanting to store my response
> variable, Y, and four explanatory variables, X, in vectors/matrices. How
> can I do this in R?

I don't think you really do want to do this, but if you do, and your
dataframe is called df, with columns called Y, X1,X2,X3,X4

  Y<-df$Y
  X1<-df$X1
  X2<-df$X2
etc

You could also do
  attach(df)
and then the columns of the data frame would behave like separate
variables called Y, X1,...,X4.

A lot of the modelling and some of the graphics functions in R are
designed to work on data frames, so it's usually easier to keep your data
frame together rather than separating out the variables.


> 2. If I have say a 4x4 matrix, A, and I want to extract part of this
> matrix to create a submatrix, B, (say row 1:3 and column 1:3) how can I
> do this?
> Could it be done something like: B<-A[1:3,1:3] ?

Yes, exactly.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From doraiss at auburn.edu  Tue Oct 30 18:17:12 2001
From: doraiss at auburn.edu (Sundar Dorai-Raj)
Date: Tue, 30 Oct 2001 11:17:12 -0600
Subject: [R] For Loops
In-Reply-To: <20011030141840.74240.qmail@web20803.mail.yahoo.com>
Message-ID: <000501c16166$b70cea80$4a35cc83@sundar>

Why not use tapply?

tapply(data,data$id,function(x) x)

This will split the data up according to id then allow you to apply a
function to each subset. This would be identical to, but more efficient
than, the following:

for(i in 1:n) {
  subset <- data[which(data$id==i),]
  f(subset) # where f() is sum function applied to the subset
}

Hope this helps.

Sundar



> -----Original Message-----
> From: owner-r-help at stat.math.ethz.ch 
> [mailto:owner-r-help at stat.math.ethz.ch] On Behalf Of Isabel Jones
> Sent: Tuesday, October 30, 2001 8:19 AM
> To: r-help at hypatia.math.ethz.ch
> Subject: [R] For Loops
> 
> 
> Hi all
> 
> Perhaps someone could help me?
> 
> I am running a loop from i=1 to n
> 
> In my data.frame I have a list of i.d's (i=1 to n) and
> each i.d has 2
> rows of data (representing 2 time points) e.g.
> 
> id  Y   X1   X2
>  1   1   0     0 
>  1   0   0     0
>  2   1   1     0
>  2   1   1     0
> 
> I am wanting to put into my 'for' loop, a line which
> can pick out the
> rows where id=i and call this a temporary name while
> it executes some
> commands beforing moving on to the next i. I'm not
> sure what command I
> can use to locate these rows where id=i and store them
> in a temporary
> matrix.
> 
> Also when I have say a matrix consisting of all values
> of Y - how can I
> refer to the Y for person i i.e. Yi
> I have seen in the R information that I can use
> Y[[i]]?
> Is it possible to write say Y[[i]]<-x[[i]]*5
> 
> Can somebody point me in the right direction as to how
> to use indexing?
> 
> Cheers to all
>    Isabel
> 
> __________________________________________________
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-> FAQ.html
> Send "info", 
> "help", or "[un]subscribe"
> (in the 
> "body", not the subject !)  To: 
> r-help-request at stat.math.ethz.ch 
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From richard.nixon at mrc-bsu.cam.ac.uk  Tue Oct 30 18:21:24 2001
From: richard.nixon at mrc-bsu.cam.ac.uk (Richard Nixon)
Date: Tue, 30 Oct 2001 17:21:24 +0000
Subject: [R] Random samples from a multivariate normal distribution
Message-ID: <E15ycZo-0001uC-00@bernstein.mrc-bsu.cam.ac.uk>

Hello,

Has anyone used R to generate random samples from a multivariate normal 
distribution?

Thanks
Richard

-- 
Dr. Richard Nixon
MRC Biostatistics Unit, Institute of Public Health,
Robinson Way, Cambridge, CB2 2SR

Alternative email: rmn20 at cam.ac.uk
http://www.mrc-bsu.cam.ac.uk/personal/richard
Tel: +44 (0)1223 330382, Fax: +44 (0)1223 330388

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.ribeiro at lancaster.ac.uk  Tue Oct 30 18:25:11 2001
From: p.ribeiro at lancaster.ac.uk (Paulo Justiniano Ribeiro Jr)
Date: Tue, 30 Oct 2001 17:25:11 +0000 (GMT)
Subject: [R] Random samples from a multivariate normal distribution
In-Reply-To: <E15ycZo-0001uC-00@bernstein.mrc-bsu.cam.ac.uk>
Message-ID: <Pine.GSO.4.21.0110301724040.28285-100000@unixb.lancs.ac.uk>

the function "mvrnorm" is available in the package MASS

best
P.J.

On Tue, 30 Oct 2001, Richard Nixon wrote:

> Hello,
> 
> Has anyone used R to generate random samples from a multivariate normal 
> distribution?
> 
> Thanks
> Richard
> 
> -- 
> Dr. Richard Nixon
> MRC Biostatistics Unit, Institute of Public Health,
> Robinson Way, Cambridge, CB2 2SR
> 
> Alternative email: rmn20 at cam.ac.uk
> http://www.mrc-bsu.cam.ac.uk/personal/richard
> Tel: +44 (0)1223 330382, Fax: +44 (0)1223 330388
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Paulo Justiniano Ribeiro Jr
Dept Maths & Stats  -  Fylde College
Lancaster University
Lancaster LA1 4YF   -  U.K.

e-mail: Paulo.Ribeiro at est.ufpr.br
http://www.maths.lancs.ac.uk/~ribeiro

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Tue Oct 30 18:31:37 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue, 30 Oct 2001 09:31:37 -0800 (PST)
Subject: [R] Random samples from a multivariate normal distribution
In-Reply-To: <E15ycZo-0001uC-00@bernstein.mrc-bsu.cam.ac.uk>
Message-ID: <Pine.A41.4.33.0110300928570.18308-100000@homer19.u.washington.edu>

On Tue, 30 Oct 2001, Richard Nixon wrote:

> Hello,
>
> Has anyone used R to generate random samples from a multivariate normal
> distribution?
>

Many people.  They use the mvrnorm() function in the MASS package.

This might be a good time to remind everyone of help.search(). Any of
  help.search("multivariate")
  help.search("normal")
  help.search("distribution")
will mention mvrnorm() if you have MASS installed (which, as of 1.3.0, you
almost certainly do).

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetilh at umsanet.edu.bo  Tue Oct 30 18:39:30 2001
From: kjetilh at umsanet.edu.bo (kjetil halvorsen)
Date: Tue, 30 Oct 2001 13:39:30 -0400
Subject: [R] For Loops
References: <20011030141840.74240.qmail@web20803.mail.yahoo.com>
Message-ID: <3BDEE5D2.A4E5547D@umsanet.edu.bo>

Hola!

fr <- data.frame(id=c(1,1,2,2,3,3,4,4), x=rnorm(8), y=rnorm(8))

> for (i in 1:4) { temp <- fr[fr$id==i,]
+                   print(temp)}
  id         x         y
1  1 -1.817315 -0.940551
2  1  1.511910  1.306569
  id          x         y
3  2 -1.3677349 0.5242760
4  2  0.4932293 0.4221455
  id         x          y
5  3 0.0975871 -1.6131919
6  3 0.1439102 -0.4736377
  id         x          y
7  4 0.4927572  1.2780839
8  4 0.3018717 -0.8101557
> 

for the second Q I think you want something like
Y[i,]

not Y[[i]] --- that is for lists.

Kjetil Halvorsen

Isabel Jones wrote:
> 
> Hi all
> 
> Perhaps someone could help me?
> 
> I am running a loop from i=1 to n
> 
> In my data.frame I have a list of i.d's (i=1 to n) and
> each i.d has 2
> rows of data (representing 2 time points) e.g.
> 
> id  Y   X1   X2
>  1   1   0     0
>  1   0   0     0
>  2   1   1     0
>  2   1   1     0
> 
> I am wanting to put into my 'for' loop, a line which
> can pick out the
> rows where id=i and call this a temporary name while
> it executes some
> commands beforing moving on to the next i. I'm not
> sure what command I
> can use to locate these rows where id=i and store them
> in a temporary
> matrix.
> 
> Also when I have say a matrix consisting of all values
> of Y - how can I
> refer to the Y for person i i.e. Yi
> I have seen in the R information that I can use
> Y[[i]]?
> Is it possible to write say Y[[i]]<-x[[i]]*5
> 
> Can somebody point me in the right direction as to how
> to use indexing?
> 
> Cheers to all
>    Isabel
> 
> __________________________________________________
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Ko-Kang at xtra.co.nz  Tue Oct 30 19:09:18 2001
From: Ko-Kang at xtra.co.nz (Ko-Kang Wang)
Date: Wed, 31 Oct 2001 07:09:18 +1300
Subject: [R] Help with 'get.hist.quote' on tseries
References: <Pine.LNX.4.31.0110301153040.1913-100000@gannet.stats>
Message-ID: <001b01c1616d$fedcd760$79a137d2@kwan022>



----- Original Message -----
From: "Prof Brian Ripley" <ripley at stats.ox.ac.uk>
To: "Adrian Trapletti" <a.trapletti at bluewin.ch>
Cc: "Dr. Andrew Criswell" <mousie at arcriswell.com>; "R-Help"
<r-help at stat.math.ethz.ch>
Sent: Wednesday, October 31, 2001 12:56 AM
Subject: Re: [R] Help with 'get.hist.quote' on tseries


> > Under Suse Linux 7.0 and R 1.3.1 this work fine (tseries 0.8-0). So this
is maybe a Windows related problem?
>
> It also works fine on R 1.3.1 with Windows 2000 here.  It might be a
> locale-specific problem: in any case I think it needs you to debug it,
> possibly trying setting your machine to a different locale.

Is the ibm dataset different to ^spc set?  It is strange that ^spc works on
my Windows ME here but not ibm.

By locale do you me the windows locale setting (for example mine is Chinese
Big-5)?

Thanks,

Ko-Kang Wang


----------------------------------------------------------------------------
--
Ko-Kang Kevin Wang
Statistical Analysis Division Leader
Software Developers' Klub (SDK)
University of Auckland
New Zealand


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Oct 30 19:38:17 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 30 Oct 2001 18:38:17 +0000 (GMT)
Subject: [R] Help with 'get.hist.quote' on tseries
In-Reply-To: <001b01c1616d$fedcd760$79a137d2@kwan022>
Message-ID: <Pine.LNX.4.31.0110301823310.5135-100000@gannet.stats>

On Wed, 31 Oct 2001, Ko-Kang Wang wrote:

>
>
> ----- Original Message -----
> From: "Prof Brian Ripley" <ripley at stats.ox.ac.uk>
> To: "Adrian Trapletti" <a.trapletti at bluewin.ch>
> Cc: "Dr. Andrew Criswell" <mousie at arcriswell.com>; "R-Help"
> <r-help at stat.math.ethz.ch>
> Sent: Wednesday, October 31, 2001 12:56 AM
> Subject: Re: [R] Help with 'get.hist.quote' on tseries
>
>
> > > Under Suse Linux 7.0 and R 1.3.1 this work fine (tseries 0.8-0). So this
> is maybe a Windows related problem?
> >
> > It also works fine on R 1.3.1 with Windows 2000 here.  It might be a
> > locale-specific problem: in any case I think it needs you to debug it,
> > possibly trying setting your machine to a different locale.
>
> Is the ibm dataset different to ^spc set?  It is strange that ^spc works on
> my Windows ME here but not ibm.

Yes, it's a different dataset.  *You* can debug why one works for you and
the other does not: they both work for me. for me the dat var for the ibm
dataset is

   [1] "29-Oct-01" "26-Oct-01" "25-Oct-01" "24-Oct-01" "23-Oct-01" "22-Oct-01"
...
[2731] "3-Jan-91"  "2-Jan-91"

It's possible that there is a date in there which your Windows ME is
failing to decode correctly, but you need to debug it to see.

> By locale do you me the windows locale setting (for example mine is Chinese
> Big-5)?

I mean the C language locale setting (not the character set). I am not at
all sure to what extent this is supported on non-English versions of
Windows, especially of Windows 9X (including ME).  The standard calls
exist: it's a question of whether they work correctly.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From csprin at brandybuck.ca.sandia.gov  Tue Oct 30 20:34:26 2001
From: csprin at brandybuck.ca.sandia.gov (Clayton Springer)
Date: Tue, 30 Oct 2001 11:34:26 -0800
Subject: [R] Obtaining the surrogate splits from rpart
Message-ID: <20011030113426.G8370@brandybuck>

Dear r-help,

I am trying to obtain the surrogate splits from an rpart object

The documentation for rpart.object mentions splits (a matrix
with the surrogate splits in it).  But it does not seem to
be quite right.


Thanks in advance for your help,

Clayton



p.s. It would help my understanding,
if you could give your answers using the built in "fit" example
from rpart.

> data(kyphosis)
> fit <- rpart(Kyphosis ~ Age + Number + Start, data=kyphosis)

-- 
Clayton Springer, Ph. D.
Sandia National Laboratories                      csprin at ca.sandia.gov
Biosystems Research Department                    (925) 294-2143
P.O. Box 969, MS 9951                fax:         (925) 294-3020
Livermore, CA, 94551-0969

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Oct 30 20:51:59 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 30 Oct 2001 19:51:59 +0000 (GMT)
Subject: [R] Obtaining the surrogate splits from rpart
In-Reply-To: <20011030113426.G8370@brandybuck>
Message-ID: <Pine.LNX.4.31.0110301948200.6940-100000@gannet.stats>

On Tue, 30 Oct 2001, Clayton Springer wrote:

> Dear r-help,
>
> I am trying to obtain the surrogate splits from an rpart object
>
> The documentation for rpart.object mentions splits (a matrix
> with the surrogate splits in it).  But it does not seem to
> be quite right.

In what respect?

> Thanks in advance for your help,
>
> Clayton
>
> p.s. It would help my understanding,
> if you could give your answers using the built in "fit" example
> from rpart.
>
> > data(kyphosis)
> > fit <- rpart(Kyphosis ~ Age + Number + Start, data=kyphosis)

summary.rpart prints them out for you, so just examine its R code
to see how to extract them.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From geert_aarts at fishgame.state.ak.us  Tue Oct 30 21:06:00 2001
From: geert_aarts at fishgame.state.ak.us (Geert Aarts)
Date: Tue, 30 Oct 2001 11:06:00 -0900
Subject: [R] memory
Message-ID: <000401c1617e$4c5f4490$b2f53f92@Domain>

Dear List

I would like to apply kriging (using sgeostat or fields package)
The result I got is as follows:

>Error: Cannot allocate vector of size 41148 Kb
>In addition: Warning Message:
>Reached total allocation of 255 Mb. See help(memory)

>memory.size(max=TRUE)
250,834,944

>memory.size()
95,052,192

In other words. R should be able to allocate the vector of 41Mb!!!!
What is the problem?
I read the documentation concerning memory, the CHANGES file and the
R-mailing list.

In addition to the problem mentioned above, I'm not able to apply the
function:

> --min-vsize=vl --max-vsize=vu --min-nsize=nl --max-nsize=nu

Can anybody explain what is happening and how to implement the function to
change the maximum memory allocation?

Geert Aarts


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pkleiber at honlab.nmfs.hawaii.edu  Tue Oct 30 21:17:26 2001
From: pkleiber at honlab.nmfs.hawaii.edu (Pierre Kleiber)
Date: Tue, 30 Oct 2001 10:17:26 -1000
Subject: [R] moving dimnames when reassigning
References: <7C4F091F6140D411A29300508B5C73B905BDEDCC@usrymx04.merck.com>
Message-ID: <3BDF0AD6.8A611376@honlab.nmfs.hawaii.edu>

It's not a bug IMHO.  If you want to switch columns as you indicated,
try this:
   > t1 <- t1[,c(2,1,3:5)]
    or
   > t1 <- t1[,c("B","A","C","D","E")]

The approach for rows would be similar.

Cheers, Pierre


"Wiener, Matthew Charles" wrote:
> 
> Hi, all.
> 
> I've got a question that arose when I was switching some row and columns in
> a matrix.  I was expecting the row and column names to follow their rows and
> columns, and they didn't.  I think I see some logic to the behavior, but I'm
> not sure whether it's intentional or not, so I thought I'd ask the list
> whether this is a feature or a bug.
> 
> Here's an example (R-1.3.1, same behavior under Windows NT and Linux).  This
> example uses a matrix, and switches columns.  The same thing happens when
> using data frames and when switching rows.
> 
> > t1 <- matrix(runif(25), 5, 5)
> > dimnames(t1) <- list(letters[1:5], LETTERS[1:5])
> > t1
>           A         B                C          D          E
> a 0.8857528 0.1435165 0.44589190 0.1837626 0.000864055
> b 0.1867816 0.8102641 0.97127777 0.8952994 0.151531510
> c 0.1102591 0.4704422 0.04712121 0.2345568 0.535079125
> d 0.7435725 0.7270509 0.49541471 0.3195482 0.892261212
> e 0.7610705 0.6057041 0.73183485 0.9959111 0.176386124
> >
> > t1[,c(1,2)] <- t1[,c(2,1)]
> > t1
>           A         B                C                  D           E
> a 0.1435165 0.8857528 0.44589190 0.1837626 0.000864055
> The columns switched,
> b 0.8102641 0.1867816 0.97127777 0.8952994 0.151531510          but the
> column names
> c 0.4704422 0.1102591 0.04712121 0.2345568 0.535079125          didn't.
> d 0.7270509 0.7435725 0.49541471 0.3195482 0.892261212
> e 0.6057041 0.7610705 0.73183485 0.9959111 0.176386124
> >
> > t1 <- t1[,c(2,1,3,4,5)]
> >
> > t1
>           B         A                C                  D            E
> a 0.8857528 0.1435165 0.44589190 0.1837626 0.000864055          The columns
> and
> b 0.1867816 0.8102641 0.97127777 0.8952994 0.151531510          column names
> both
> c 0.1102591 0.4704422 0.04712121 0.2345568 0.535079125          switched.
> d 0.7435725 0.7270509 0.49541471 0.3195482 0.892261212
> e 0.7610705 0.6057041 0.73183485 0.9959111 0.176386124
> >
> 
> I was rearranging a matrix in the first way, and then found that the row and
> column names hadn't followed along.  Two workarounds are to permute the row
> and column names separately (which is what I'm doing), or to construct
> indices to do things the second way.
> 
> If this was a design decision, I'd like to understand the reason for it
> better.  If it's unintended, I'll turn this into a bug report.
> 
> Regards,
> 
> Matt Wiener
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
-----------------------------------------------------------------
Pierre Kleiber             Email: pkleiber at honlab.nmfs.hawaii.edu
Fishery Biologist                     Tel: 808 983-5399/737-7544
NOAA FISHERIES - Honolulu Laboratory         Fax: 808 983-2902
2570 Dole St., Honolulu, HI 96822-2396 
-----------------------------------------------------------------
 "God could have told Moses about galaxies and mitochondria and
  all.  But behold... It was good enough for government work."
-----------------------------------------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Tue Oct 30 22:01:40 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue, 30 Oct 2001 13:01:40 -0800 (PST)
Subject: [R] memory
In-Reply-To: <000401c1617e$4c5f4490$b2f53f92@Domain>
Message-ID: <Pine.A41.4.33.0110301254510.15592-100000@homer22.u.washington.edu>

On Tue, 30 Oct 2001, Geert Aarts wrote:

> Dear List
>
> I would like to apply kriging (using sgeostat or fields package)
> The result I got is as follows:
>
> >Error: Cannot allocate vector of size 41148 Kb
> >In addition: Warning Message:
> >Reached total allocation of 255 Mb. See help(memory)
>
> >memory.size(max=TRUE)
> 250,834,944
>
> >memory.size()
> 95,052,192
>
> In other words. R should be able to allocate the vector of 41Mb!!!!
> What is the problem?

Presumably the function has already allocated a lot of memory (say, 150Mb)
before it tries to do the 41Mb allocation that triggers the error.  In
responding to the error R will unallocate all the memory that the function
had previously allocated.  You could confirm this by
  gcinfo(TRUE)
which would make R report the currently used memory size with each garbage
collection.

To set the --max-mem-size option (or any other command line option), add
it to the 'Target' field in the 'Properties' for the shortcut to R.

eg
"C:\Program Files\R\rw1030\bin\Rgui.exe" --max-mem-size=300M


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mscarr at excitehome.net  Wed Oct 31 01:47:16 2001
From: mscarr at excitehome.net (Mark Scarr)
Date: Tue, 30 Oct 2001 16:47:16 -0800
Subject: [R] Defining time series objects
Message-ID: <3BDF4A14.600BE811@excitehome.net>

Hi All,

I am new to R, having used S-plus a number of years back.
I would like to set up a time series object for forecasting, with data
collected daily between 5th April 2001 and 16th September 2001.
Any help would be most appreciated as I have been unable to find any
suitable examples in the documentation.


Thanks,


Mark.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pols1oh at bestweb.net  Wed Oct 31 02:53:29 2001
From: pols1oh at bestweb.net (Michaell Taylor)
Date: Tue, 30 Oct 2001 20:53:29 -0500
Subject: [R] Iteration within data blocks
In-Reply-To: <Pine.A41.4.33.0110301254510.15592-100000@homer22.u.washington.edu>
References: <Pine.A41.4.33.0110301254510.15592-100000@homer22.u.washington.edu>
Message-ID: <20011031015338.8DFE162DCE@clavin.bestweb.net>


I know there must be an easy way to do this, but I am too new to R and it 
must be late because I can't seem to get myself around this.  Assume I have,

scenario 	year	growth	value
1		1	.05	1
1		2	.03	0
1		3	.01	0
1		4	0	0
2		1	.01	1
2		2	.01	0
2		3	.01	0
2		4	0	0

What I want to do is within each scenario "grow" the value by the growth rate 
so that I get :  
scenario 	year	growth	value
1		1	.05	1
1		2	.03	1.03
1		3	.01	1.0403
1		4	0	1.0403
2		1	.01	1
2		2	.01	1.01
2		3	.01	1.0201
2		4	0	1.0201

There are 5,000 scenarios and 10 years. The only thing dancing in my head are 
giant for loops, which I know isn't right.

Any suggestions?

=========================================
Michaell Taylor, PhD
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Bill.Venables at CMIS.CSIRO.AU  Wed Oct 31 06:11:11 2001
From: Bill.Venables at CMIS.CSIRO.AU (Bill.Venables@CMIS.CSIRO.AU)
Date: Wed, 31 Oct 2001 15:11:11 +1000
Subject: [R] moving dimnames when reassigning
Message-ID: <E09E527B56BE2D438A3D6A246DDD27A90491A7@Roper-CV.qld.cmis.csiro.au>

This is an instructive example in a minor sort of way; it often clears
things up quite a bit once this lesson is learnt.

An assignment of the form

> name <- value

assigns the name to the value.  An assignment of the form

> name[] <- value

(effectively) uses value to replace the contents of the structure *but keeps
the attributes of name intact*.  By analogy (or extension, whatever),

> t1[, c(1,2)] <- anything.at.all

will simply take the atomic part of anything.at.all and use it to replace
the contents of the first and second columns of the matrix structure t1, but
leaving all attributes (such as dimnames) intact.

This is not a bug but a feature.  There are times when you want to do this
and this is about the only elegant way for doing it.

Bill Venables, 
CMIS, CSIRO Marine Laboratories, 
PO Box 120, Cleveland, Qld. 4163
AUSTRALIA
Phone:  +61 7 3826 7251  
Fax:    +61 7 3826 7304
Mobile: +61 419 634 642
<mailto: Bill.Venables at csiro.au>
http://www.cmis.csiro.au/bill.venables/


>  -----Original Message-----
> From: 	Wiener, Matthew Charles [mailto:matthew_wiener at merck.com] 
> Sent:	Tuesday, 30 October 2001 11:40 PM
> To:	R-help
> Subject:	[R] moving dimnames when reassigning
> 
> Hi, all.
> 
> I've got a question that arose when I was switching some row and columns
in
> a matrix.  I was expecting the row and column names to follow their rows
and
> columns, and they didn't.  I think I see some logic to the behavior, but
I'm
> not sure whether it's intentional or not, so I thought I'd ask the list
> whether this is a feature or a bug.
> 
> Here's an example (R-1.3.1, same behavior under Windows NT and Linux).
This
> example uses a matrix, and switches columns.  The same thing happens when
> using data frames and when switching rows.
> 
> 
> > t1 <- matrix(runif(25), 5, 5)
> > dimnames(t1) <- list(letters[1:5], LETTERS[1:5])
> > t1
>           A         B                C         	D          E
> a 0.8857528 0.1435165 0.44589190 0.1837626 0.000864055
> b 0.1867816 0.8102641 0.97127777 0.8952994 0.151531510
> c 0.1102591 0.4704422 0.04712121 0.2345568 0.535079125
> d 0.7435725 0.7270509 0.49541471 0.3195482 0.892261212
> e 0.7610705 0.6057041 0.73183485 0.9959111 0.176386124
> > 
> > t1[,c(1,2)] <- t1[,c(2,1)]
> > t1
>           A         B                C                  D           E
> a 0.1435165 0.8857528 0.44589190 0.1837626 0.000864055
> The columns switched,
> b 0.8102641 0.1867816 0.97127777 0.8952994 0.151531510		but
the
> column names
> c 0.4704422 0.1102591 0.04712121 0.2345568 0.535079125
didn't.
> d 0.7270509 0.7435725 0.49541471 0.3195482 0.892261212
> e 0.6057041 0.7610705 0.73183485 0.9959111 0.176386124
> > 
> > t1 <- t1[,c(2,1,3,4,5)]
> > 
> > t1
>           B         A                C                  D            E
> a 0.8857528 0.1435165 0.44589190 0.1837626 0.000864055		The
columns
> and
> b 0.1867816 0.8102641 0.97127777 0.8952994 0.151531510
column names
> both
> c 0.1102591 0.4704422 0.04712121 0.2345568 0.535079125
switched.
> d 0.7435725 0.7270509 0.49541471 0.3195482 0.892261212
> e 0.7610705 0.6057041 0.73183485 0.9959111 0.176386124
> > 
> 
> 
> I was rearranging a matrix in the first way, and then found that the row
and
> column names hadn't followed along.  Two workarounds are to permute the
row
> and column names separately (which is what I'm doing), or to construct
> indices to do things the second way.
> 
> If this was a design decision, I'd like to understand the reason for it
> better.  If it's unintended, I'll turn this into a bug report.
> 
> Regards,
> 
> Matt Wiener
> 
> 
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From joerg.maeder at ethz.ch  Wed Oct 31 09:15:49 2001
From: joerg.maeder at ethz.ch (Joerg Maeder)
Date: Wed, 31 Oct 2001 09:15:49 +0100
Subject: [R] Iteration within data blocks
References: <Pine.A41.4.33.0110301254510.15592-100000@homer22.u.washington.edu> <20011031015338.8DFE162DCE@clavin.bestweb.net>
Message-ID: <3BDFB335.9BE7D216@ethz.ch>

hello,

at the moment i found only a solution that works with a single loop for
the scenzarios

#the dataset (i used the first letter for colum names)
da <-
cbind(s=c(1,1,1,1,2,2,2,2),y=c(1,2,3,4,1,2,3,4),g=c(.05,.03,.01,0,.01,.01,.01,0),v=c(1,0,0,0,1,0,0,0))
#set the values of first year to zero (it woudn't be used for
calculations)
da[da[,'y']==1,'g'] <- 0
#thye single loop
for (as in 1:2) 
 da[da[,'s']==as,'v'] <- cumprod(da[da[,'s']==as,'g']+1)*da[da[,'s']==as
& da[,'y']==1,'v']

perhaps i will find a solution without any loops. if yes, will send it
to you

gruess

joerg


Michaell Taylor wrote:
> 
> I know there must be an easy way to do this, but I am too new to R and it
> must be late because I can't seem to get myself around this.  Assume I have,
> 
> scenario        year    growth  value
> 1               1       .05     1
> 1               2       .03     0
> 1               3       .01     0
> 1               4       0       0
> 2               1       .01     1
> 2               2       .01     0
> 2               3       .01     0
> 2               4       0       0
> 
> What I want to do is within each scenario "grow" the value by the growth rate
> so that I get :
> scenario        year    growth  value
> 1               1       .05     1
> 1               2       .03     1.03
> 1               3       .01     1.0403
> 1               4       0       1.0403
> 2               1       .01     1
> 2               2       .01     1.01
> 2               3       .01     1.0201
> 2               4       0       1.0201
> 
> There are 5,000 scenarios and 10 years. The only thing dancing in my head are
> giant for loops, which I know isn't right.
> 
> Any suggestions?
> 
> =========================================
> Michaell Taylor, PhD
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
    Joerg Maeder             IACETH              INSTITUTE
   PhD Student                              FOR ATMOSPHERIC 
  Phone: +41 1 633 36 25                 AND CLIMATE SCIENCE
 Fax: +41 1 633 10 58                  ETH Z?RICH Switzerland
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Wed Oct 31 09:41:13 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Oct 2001 09:41:13 +0100
Subject: [R] Iteration within data blocks
In-Reply-To: <20011031015338.8DFE162DCE@clavin.bestweb.net>
References: <Pine.A41.4.33.0110301254510.15592-100000@homer22.u.washington.edu>
	<20011031015338.8DFE162DCE@clavin.bestweb.net>
Message-ID: <x2r8rk8amu.fsf@blueberry.kubism.ku.dk>

Michaell Taylor <pols1oh at bestweb.net> writes:

> I know there must be an easy way to do this, but I am too new to R and it 
> must be late because I can't seem to get myself around this.  Assume I have,
> 
> scenario 	year	growth	value
> 1		1	.05	1
> 1		2	.03	0
> 1		3	.01	0
> 1		4	0	0
> 2		1	.01	1
> 2		2	.01	0
> 2		3	.01	0
> 2		4	0	0
> 
> What I want to do is within each scenario "grow" the value by the growth rate 
> so that I get :  
> scenario 	year	growth	value
> 1		1	.05	1
> 1		2	.03	1.03
> 1		3	.01	1.0403
> 1		4	0	1.0403
> 2		1	.01	1
> 2		2	.01	1.01
> 2		3	.01	1.0201
> 2		4	0	1.0201
> 
> There are 5,000 scenarios and 10 years. The only thing dancing in my head are 
> giant for loops, which I know isn't right.
> 
> Any suggestions?

Um, first: Are you sure that is what you want (growth values in lines
1 and 5 don't seem to be getting used) and not  1, 1.05, 1.0815,
1.092315 etc.? Assuming that this is the case, I'd try something like

f <- function(x) {
  n <- dim(x)[1]
  g <- c(0,x$growth[-n])
  cbind(x,cumprod(g+1))
}
do.call("rbind",lapply(split(frame,frame$scenario),f))

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From brostaux.y at fsagx.ac.be  Wed Oct 31 10:53:05 2001
From: brostaux.y at fsagx.ac.be (Yves Brostaux)
Date: Wed, 31 Oct 2001 10:53:05 +0100
Subject: [R] creating chron object aggregates (e.g. sums by day)
In-Reply-To: <200110310301.EAA04991@stat.math.ethz.ch>
Message-ID: <5.0.0.25.1.20011031104508.00a7b850@fusamail.fsagx.ac.be>

Hello,

I have an alternative code to resolve your problem. Not as simple and 
elegant as I would like, but quite easy to understand and maintain. Here it 
is :

# reading your data, preventing dates to be converted as factor
raw.data <- read.table("your data file", as.is=TRUE)
# aggregating your observations by day, using a numerical conversion of the 
dates
agg.data.1 <- tapply(raw.data[[2]], as.numeric(dates(raw.data[[1]])), sum)
agg.data.1
# moving from the results' table from tapply back to a data frame with 
named rows
agg.data.2 <- data.frame(sumval = agg.data.1[1:length(agg.data.1)])
agg.data.2
# creating the (numerical) date range of your observations
date.stamp <- 
data.frame(date=min(as.numeric(row.names(agg.data.2))):max(as.numeric(row.names(agg.data.2))))
date.stamp
# merging the aggregated data and the dates stamps
agg.data.3 <- merge(date.stamp, agg.data.2, by.x="date", by.y="row.names", 
all.x=TRUE)
# replacing the NA's where there are no value by zero
agg.data.3$sumval[is.na(agg.data.3$sumval)] <- 0
# converting back the numericals to dates
agg.data.3$date <- dates(agg.data.3$date)
agg.data.3

Hope it helped a bit !

Yves.

=====================================================================
         YVES BROSTAUX - Ing?nieur agronome Orientation Eaux & For?ts

         Assistant - Unit? de Statistique et Informatique
         Gembloux Agricultural University
         8, avenue de la Facult? B-5030 Gembloux (Belgium)
         T?l:      +32 (0)81 62 24 69
         E-mail :  brostaux.y at fsagx.ac.be
=====================================================================

At 04:01 31/10/01, you wrote:
>Olivier Collignon wrote:
> >
> > What is the recommended/optimal way to perform aggregates on data frames
> > with chron objects?
> >
> > Here is an example:
> >
> > >raw.data
> > 1 07/09/01   4000
> > 2 07/09/01   2000
> > 3 07/11/01   1000
> > 4 07/13/01   800
> > 5 07/13/01   700
> > 6 07/16/01   600
> > 7 07/17/01   500
> >
> > I'm trying to construct a function that would first aggregate the data
> > (second column) by day (grouping by the first column) according to a
> > function (here "sum", but could be "max" or other)
> >
> > >chronaggregate(raw.data, sum, "days")   #(used "days" since 07/09/01 is
> > short for 07/09/01 00:00:00, but could be 07/09/01 00:12:34)
> > 1 07/09/01   6000      << sum of data values for day 07/09/01 from
> > raw.data
> > 2 07/11/01   1000
> > 3 07/13/01   1500      << sum of data values for day 07/13/01 from
> > raw.data
> > 4 07/16/01   600
> > 5 07/17/01   500
> >
> > and insert 0 values for days without data:
> >
> > 1 07/09/01   6000
> > 2 07/10/01   0              << inserted record
> > 3 07/11/01   1000
> > 4 07/12/01   0              << inserted record
> > 5 07/13/01   1500
> > 6 07/14/01   0              << inserted record
> > 7 07/15/01   0              << inserted record
> > 8 07/16/01   600
> > 9 07/17/01   500
> >
> > Is there a simple way to do this?
> >
> > Thanks,
> >
> > --
> > -Olivier
> >
> > --
> > Olivier Collignon
> > Loudcloud, Inc.
> > olivier at loudcloud.com
> >
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> > 
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gco at eortc.be  Wed Oct 31 11:07:52 2001
From: gco at eortc.be (Gary Collins)
Date: Wed, 31 Oct 2001 11:07:52 +0100
Subject: [R] removing duplicated rows from a data.frame
Message-ID: <00c001c161f3$e6fa6000$c90809c1@EORTC.BE>

Dear all,
Sorry for the simplicity of the question, but how does one go about removing duplicated rows in a data.frame?
I'm looking for a quick and simple solution, as my data.frames are relatively large (50000 by 50). I've racked my brain and searched the help files and found nothing useful or quick, only duplicated() and unique() which work only work on lists.
Thanks
Gary.
__________________________________________________
Dr. Gary S. Collins,
Statistics Research Fellow,
Quality of Life Unit, 
European Organisation for Research and Treatment of Cancer, 
EORTC Data Center, 
Avenue E. Mounier 83, bte. 11,
B-1200 Brussels, Belgium.

Tel: +32 2 774 1 606
Fax: +32 2 779 4 568
http://www.eortc.be/home/qol/
__________________________________________________


-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20011031/2ae61bbd/attachment.html

From p.dalgaard at biostat.ku.dk  Wed Oct 31 12:36:06 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Oct 2001 12:36:06 +0100
Subject: [R] removing duplicated rows from a data.frame
In-Reply-To: <00c001c161f3$e6fa6000$c90809c1@EORTC.BE>
References: <00c001c161f3$e6fa6000$c90809c1@EORTC.BE>
Message-ID: <x2668w82jd.fsf@blueberry.kubism.ku.dk>

"Gary Collins" <gco at eortc.be> writes:

> Dear all, Sorry for the simplicity of the question, but how does one
> go about removing duplicated rows in a data.frame? I'm looking for a
> quick and simple solution, as my data.frames are relatively large
> (50000 by 50). I've racked my brain and searched the help files and
> found nothing useful or quick, only duplicated() and unique() which
> work only work on lists.

Nontrivial I think. Something like

eql <- function(x,y)ifelse(is.na(x),is.na(y),ifelse(is.na(y),FALSE,x==y))
o <- do.call("order",dfr)
isdup <- do.call("cbind",lapply(dfr[o,],function(x)eql(x,c(x[-1],NA))))
all.dup <- apply(isdup, 1, all)
all.dup[o] <- all.dup 
dfr[!all.dup]

i.e. sort the dataframe, figure out which rows have all values
identical to their successor. This gives logical vector, but in the
order of the sorted values, so reorder it. Finally select nondups. As
a "bonus feature", I think this will also remove any row containing all
NA's... 

A major stumbling block is that you'll want two NAs to compare equal,
hence the eql() function.

Actually, I think you can do away with the isdup array and do

all.dup <- do.call("pmin",lapply(dfr[o,],function(x)eql(x,c(x[-1],NA))))

and there may be further cleanups possible.

One dirty trick which is much quicker but not quite as reliable is
 
duplicated(do.call("paste",dfr))

(watch out for character strings with embedded spaces and underflowing
differences in numeric data!)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Oct 31 12:54:28 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 31 Oct 2001 11:54:28 +0000 (GMT)
Subject: [R] removing duplicated rows from a data.frame
In-Reply-To: <x2668w82jd.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.31.0110311144550.7757-100000@gannet.stats>

On 31 Oct 2001, Peter Dalgaard BSA wrote:

> "Gary Collins" <gco at eortc.be> writes:
>
> > Dear all, Sorry for the simplicity of the question, but how does one
> > go about removing duplicated rows in a data.frame? I'm looking for a
> > quick and simple solution, as my data.frames are relatively large
> > (50000 by 50). I've racked my brain and searched the help files and
> > found nothing useful or quick, only duplicated() and unique() which
> > work only work on lists.
>
> Nontrivial I think. Something like
>
> eql <- function(x,y)ifelse(is.na(x),is.na(y),ifelse(is.na(y),FALSE,x==y))
> o <- do.call("order",dfr)
> isdup <- do.call("cbind",lapply(dfr[o,],function(x)eql(x,c(x[-1],NA))))
> all.dup <- apply(isdup, 1, all)
> all.dup[o] <- all.dup
> dfr[!all.dup]
>
> i.e. sort the dataframe, figure out which rows have all values
> identical to their successor. This gives logical vector, but in the
> order of the sorted values, so reorder it. Finally select nondups. As
> a "bonus feature", I think this will also remove any row containing all
> NA's...
>
> A major stumbling block is that you'll want two NAs to compare equal,
> hence the eql() function.
>
> Actually, I think you can do away with the isdup array and do
>
> all.dup <- do.call("pmin",lapply(dfr[o,],function(x)eql(x,c(x[-1],NA))))
>
> and there may be further cleanups possible.
>
> One dirty trick which is much quicker but not quite as reliable is
>
> duplicated(do.call("paste",dfr))
>
> (watch out for character strings with embedded spaces and underflowing
> differences in numeric data!)

merge.data.frame does the equivalent of

mypaste <- function(...) paste(..., sep="\r")
do.call("mypaste", dfr)

which seems reliable enough.  Identical numerical data should
as.character identically, and embedded CRs are very rare in R character
strings.

As a test

data(iris)
duplicated(do.call("mypaste", iris))

(or duplicated(do.call("paste", c(iris, sep="\r"))) if you prefer a
one-liner).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From statsonthebrain at yahoo.com  Wed Oct 31 13:37:42 2001
From: statsonthebrain at yahoo.com (Isabel Jones)
Date: Wed, 31 Oct 2001 04:37:42 -0800 (PST)
Subject: [R] Quick question!
Message-ID: <20011031123742.47261.qmail@web20802.mail.yahoo.com>

Thanks very much to all who answered my question
yesterday on loops.

Just a further quick question:

If I have this:

for(i in 1:n) {
  subset <- data[which(data$id==i),]

which returns the rows where I have the variable ID=1,
how can I tell the same statement to return just
column Y where ID=i?

I have tried this

for(i in 1:n) {
  subset <- data[which(data$id==i),data$Y]

but it doesn't work

Thanks again
Isabel

__________________________________________________



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jniesch at gwdg.de  Wed Oct 31 13:47:04 2001
From: jniesch at gwdg.de (Jens Nieschulze)
Date: Wed, 31 Oct 2001 13:47:04 +0100 (MET)
Subject: [R] Quick question!
In-Reply-To: <20011031123742.47261.qmail@web20802.mail.yahoo.com>
Message-ID: <Pine.SO4.4.10.10110311345160.16699-100000@ufobi7.uni-forst.gwdg.de>

On Wed, 31 Oct 2001, Isabel Jones wrote:

> Thanks very much to all who answered my question
> yesterday on loops.
> 
> Just a further quick question:
> 
> If I have this:
> 
> for(i in 1:n) {
>   subset <- data[which(data$id==i),]
> 
> which returns the rows where I have the variable ID=1,
> how can I tell the same statement to return just
> column Y where ID=i?
> 
> I have tried this
> 
> for(i in 1:n) {
>   subset <- data[which(data$id==i),data$Y]

 for(i in 1:n) {
   subset <- data[which(data$id==i),"Y"]

maybe?
> 
> but it doesn't work
> 
> Thanks again
> Isabel
> 

***********************************************************************
Jens Nieschulze


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From theis at statistik.uni-dortmund.de  Wed Oct 31 14:08:42 2001
From: theis at statistik.uni-dortmund.de (Winfried Theis)
Date: Wed, 31 Oct 2001 13:08:42 -0000 (GMT)
Subject: [R] Quick question!
In-Reply-To: <20011031123742.47261.qmail@web20802.mail.yahoo.com>
Message-ID: <XFMail.011031130842.theis@statistik.uni-dortmund.de>


On 31-Oct-01 Isabel Jones wrote:
> If I have this:
> 
> for(i in 1:n) {
>   subset <- data[which(data$id==i),]
> 
> which returns the rows where I have the variable ID=1,
> how can I tell the same statement to return just
> column Y where ID=i?

Try
> subset <- data$Y[data$id==i]

Cheers,

Winfried
----------------------------------
E-Mail: Winfried Theis <theis at statistik.uni-dortmund.de>
Date: 31-Oct-01
Time: 13:06:37
Dipl.-Math. Winfried Theis, Fachbereich Statistik, Graduiertenkolleg
"Angewandte Statistik"
Universitt Dortmund, 44221 Dortmund
Tel.: +49-231-755-5903  FAX: +49-231-755-4387
----------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andy_liaw at merck.com  Wed Oct 31 14:20:05 2001
From: andy_liaw at merck.com (Liaw, Andy)
Date: Wed, 31 Oct 2001 08:20:05 -0500
Subject: [R] removing duplicated rows from a data.frame
Message-ID: <51F9C42DA15CD311BD220008C707D81903DC8345@usrymx10.merck.com>

Should one of the suggestion be implemented as the unique method for
data.frame?  Or maybe uniquerows.data.frame?  Just a thought...  This is
probably nearly a FAQ.

Andy

-----Original Message-----
From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
Sent: Wednesday, October 31, 2001 6:54 AM
To: Peter Dalgaard BSA
Cc: Gary Collins; r-help
Subject: Re: [R] removing duplicated rows from a data.frame


On 31 Oct 2001, Peter Dalgaard BSA wrote:

> "Gary Collins" <gco at eortc.be> writes:
>
> > Dear all, Sorry for the simplicity of the question, but how does one
> > go about removing duplicated rows in a data.frame? I'm looking for a
> > quick and simple solution, as my data.frames are relatively large
> > (50000 by 50). I've racked my brain and searched the help files and
> > found nothing useful or quick, only duplicated() and unique() which
> > work only work on lists.
>
> Nontrivial I think. Something like
>
> eql <- function(x,y)ifelse(is.na(x),is.na(y),ifelse(is.na(y),FALSE,x==y))
> o <- do.call("order",dfr)
> isdup <- do.call("cbind",lapply(dfr[o,],function(x)eql(x,c(x[-1],NA))))
> all.dup <- apply(isdup, 1, all)
> all.dup[o] <- all.dup
> dfr[!all.dup]
>
> i.e. sort the dataframe, figure out which rows have all values
> identical to their successor. This gives logical vector, but in the
> order of the sorted values, so reorder it. Finally select nondups. As
> a "bonus feature", I think this will also remove any row containing all
> NA's...
>
> A major stumbling block is that you'll want two NAs to compare equal,
> hence the eql() function.
>
> Actually, I think you can do away with the isdup array and do
>
> all.dup <- do.call("pmin",lapply(dfr[o,],function(x)eql(x,c(x[-1],NA))))
>
> and there may be further cleanups possible.
>
> One dirty trick which is much quicker but not quite as reliable is
>
> duplicated(do.call("paste",dfr))
>
> (watch out for character strings with embedded spaces and underflowing
> differences in numeric data!)

merge.data.frame does the equivalent of

mypaste <- function(...) paste(..., sep="\r")
do.call("mypaste", dfr)

which seems reliable enough.  Identical numerical data should
as.character identically, and embedded CRs are very rare in R character
strings.

As a test

data(iris)
duplicated(do.call("mypaste", iris))

(or duplicated(do.call("paste", c(iris, sep="\r"))) if you prefer a
one-liner).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Oct 31 14:40:42 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 31 Oct 2001 13:40:42 +0000 (GMT)
Subject: [R] removing duplicated rows from a data.frame
In-Reply-To: <51F9C42DA15CD311BD220008C707D81903DC8345@usrymx10.merck.com>
Message-ID: <Pine.LNX.4.31.0110311338160.8064-100000@gannet.stats>

On Wed, 31 Oct 2001, Liaw, Andy wrote:

> Should one of the suggestion be implemented as the unique method for
> data.frame?  Or maybe uniquerows.data.frame?  Just a thought...  This is
> probably nearly a FAQ.

Yes. I'd noted earler that S4 has unique.data.frame and
duplicated.data.frame via a variant on the paste method.

Will add.

>
> Andy
>
> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
> Sent: Wednesday, October 31, 2001 6:54 AM
> To: Peter Dalgaard BSA
> Cc: Gary Collins; r-help
> Subject: Re: [R] removing duplicated rows from a data.frame
>
>
> On 31 Oct 2001, Peter Dalgaard BSA wrote:
>
> > "Gary Collins" <gco at eortc.be> writes:
> >
> > > Dear all, Sorry for the simplicity of the question, but how does one
> > > go about removing duplicated rows in a data.frame? I'm looking for a
> > > quick and simple solution, as my data.frames are relatively large
> > > (50000 by 50). I've racked my brain and searched the help files and
> > > found nothing useful or quick, only duplicated() and unique() which
> > > work only work on lists.
> >
> > Nontrivial I think. Something like
> >
> > eql <- function(x,y)ifelse(is.na(x),is.na(y),ifelse(is.na(y),FALSE,x==y))
> > o <- do.call("order",dfr)
> > isdup <- do.call("cbind",lapply(dfr[o,],function(x)eql(x,c(x[-1],NA))))
> > all.dup <- apply(isdup, 1, all)
> > all.dup[o] <- all.dup
> > dfr[!all.dup]
> >
> > i.e. sort the dataframe, figure out which rows have all values
> > identical to their successor. This gives logical vector, but in the
> > order of the sorted values, so reorder it. Finally select nondups. As
> > a "bonus feature", I think this will also remove any row containing all
> > NA's...
> >
> > A major stumbling block is that you'll want two NAs to compare equal,
> > hence the eql() function.
> >
> > Actually, I think you can do away with the isdup array and do
> >
> > all.dup <- do.call("pmin",lapply(dfr[o,],function(x)eql(x,c(x[-1],NA))))
> >
> > and there may be further cleanups possible.
> >
> > One dirty trick which is much quicker but not quite as reliable is
> >
> > duplicated(do.call("paste",dfr))
> >
> > (watch out for character strings with embedded spaces and underflowing
> > differences in numeric data!)
>
> merge.data.frame does the equivalent of
>
> mypaste <- function(...) paste(..., sep="\r")
> do.call("mypaste", dfr)
>
> which seems reliable enough.  Identical numerical data should
> as.character identically, and embedded CRs are very rare in R character
> strings.
>
> As a test
>
> data(iris)
> duplicated(do.call("mypaste", iris))
>
> (or duplicated(do.call("paste", c(iris, sep="\r"))) if you prefer a
> one-liner).
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gco at eortc.be  Wed Oct 31 14:52:04 2001
From: gco at eortc.be (Gary Collins)
Date: Wed, 31 Oct 2001 14:52:04 +0100
Subject: [R] removing duplicated rows from a data.frame
References: <Pine.LNX.4.31.0110311338160.8064-100000@gannet.stats>
Message-ID: <015c01c16213$39667080$c90809c1@EORTC.BE>

Dear All,
Thanks. Prof. Ripleys approach worked perfectly. I implemented a quick and
durty approach via Andy Liaws suggestion via a unique.data.frame, and called
it by unique(), and tried it on about 50 dfs with no problems.
Ta.
Gary.

On Wed, 31 Oct 2001, Liaw, Andy wrote:

> Should one of the suggestion be implemented as the unique method for
> data.frame?  Or maybe uniquerows.data.frame?  Just a thought...  This is
> probably nearly a FAQ.

Yes. I'd noted earler that S4 has unique.data.frame and
duplicated.data.frame via a variant on the paste method.

Will add.

>
> Andy
>
> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
> Sent: Wednesday, October 31, 2001 6:54 AM
> To: Peter Dalgaard BSA
> Cc: Gary Collins; r-help
> Subject: Re: [R] removing duplicated rows from a data.frame
>
>
> On 31 Oct 2001, Peter Dalgaard BSA wrote:
>
> > "Gary Collins" <gco at eortc.be> writes:
> >
> > > Dear all, Sorry for the simplicity of the question, but how does one
> > > go about removing duplicated rows in a data.frame? I'm looking for a
> > > quick and simple solution, as my data.frames are relatively large
> > > (50000 by 50). I've racked my brain and searched the help files and
> > > found nothing useful or quick, only duplicated() and unique() which
> > > work only work on lists.
> >
> > Nontrivial I think. Something like
> >
> > eql <-
function(x,y)ifelse(is.na(x),is.na(y),ifelse(is.na(y),FALSE,x==y))
> > o <- do.call("order",dfr)
> > isdup <- do.call("cbind",lapply(dfr[o,],function(x)eql(x,c(x[-1],NA))))
> > all.dup <- apply(isdup, 1, all)
> > all.dup[o] <- all.dup
> > dfr[!all.dup]
> >
> > i.e. sort the dataframe, figure out which rows have all values
> > identical to their successor. This gives logical vector, but in the
> > order of the sorted values, so reorder it. Finally select nondups. As
> > a "bonus feature", I think this will also remove any row containing all
> > NA's...
> >
> > A major stumbling block is that you'll want two NAs to compare equal,
> > hence the eql() function.
> >
> > Actually, I think you can do away with the isdup array and do
> >
> > all.dup <- do.call("pmin",lapply(dfr[o,],function(x)eql(x,c(x[-1],NA))))
> >
> > and there may be further cleanups possible.
> >
> > One dirty trick which is much quicker but not quite as reliable is
> >
> > duplicated(do.call("paste",dfr))
> >
> > (watch out for character strings with embedded spaces and underflowing
> > differences in numeric data!)
>
> merge.data.frame does the equivalent of
>
> mypaste <- function(...) paste(..., sep="\r")
> do.call("mypaste", dfr)
>
> which seems reliable enough.  Identical numerical data should
> as.character identically, and embedded CRs are very rare in R character
> strings.
>
> As a test
>
> data(iris)
> duplicated(do.call("mypaste", iris))
>
> (or duplicated(do.call("paste", c(iris, sep="\r"))) if you prefer a
> one-liner).
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.
> -.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._
>
>

--
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

__________________________________________________
Dr. Gary S. Collins,
Statistics Research Fellow,
Quality of Life Unit,
European Organisation for Research and Treatment of Cancer,
EORTC Data Center,
Avenue E. Mounier 83, bte. 11,
B-1200 Brussels, Belgium.

Tel: +32 2 774 1 606
Fax: +32 2 779 4 568
http://www.eortc.be/home/qol/
__________________________________________________



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gpetris at definetti.uark.edu  Wed Oct 31 14:58:08 2001
From: gpetris at definetti.uark.edu (Giovanni Petris)
Date: Wed, 31 Oct 2001 07:58:08 -0600 (CST)
Subject: [R] Defining time series objects
In-Reply-To: <3BDF4A14.600BE811@excitehome.net> (message from Mark Scarr on
	Tue, 30 Oct 2001 16:47:16 -0800)
References: <3BDF4A14.600BE811@excitehome.net>
Message-ID: <200110311358.HAA02258@definetti.uark.edu>


Look at the library ts. In particular, you may want to look at the
functions arima0 and predict.arima0.

GP

-- 

 __________________________________________________
[                                                  ]
[ Giovanni Petris                 GPetris at uark.edu ]
[ Department of Mathematical Sciences              ]
[ University of Arkansas - Fayetteville, AR 72701  ]
[ Ph: (501) 575-6324, 575-8630 (fax)               ]
[ http://definetti.uark.edu/~gpetris/              ]
[__________________________________________________]

> Date: Tue, 30 Oct 2001 16:47:16 -0800
> From: Mark Scarr <mscarr at excitehome.net>
> Sender: owner-r-help at stat.math.ethz.ch
> Precedence: SfS-bulk
> Content-Type: text/plain; charset=us-ascii
> Content-Length: 679
> 
> Hi All,
> 
> I am new to R, having used S-plus a number of years back.
> I would like to set up a time series object for forecasting, with data
> collected daily between 5th April 2001 and 16th September 2001.
> Any help would be most appreciated as I have been unable to find any
> suitable examples in the documentation.
> 
> 
> Thanks,
> 
> 
> Mark.
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mark at myatt.demon.co.uk  Wed Oct 31 15:56:48 2001
From: mark at myatt.demon.co.uk (Mark Myatt)
Date: Wed, 31 Oct 2001 14:56:48 +0000
Subject: [R] Quick question!
In-Reply-To: <20011031123742.47261.qmail@web20802.mail.yahoo.com>
References: <20011031123742.47261.qmail@web20802.mail.yahoo.com>
Message-ID: <vdhzPGAwEB47EwBG@myatt.demon.co.uk>

Isabel Jones <statsonthebrain at yahoo.com> writes:

>Just a further quick question:
>
>If I have this:
>
>for(i in 1:n) {
>  subset <- data[which(data$id==i),]
>
>which returns the rows where I have the variable ID=1,
>how can I tell the same statement to return just
>column Y where ID=i?

The subset() function does this:

        For(i in 1:n) {
                ss <- subset(data, id == i, Y)
                }

Mark


--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pgilbert at bank-banque-canada.ca  Wed Oct 31 16:28:01 2001
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 31 Oct 2001 10:28:01 -0500
Subject: [R] Defining time series objects
References: <3BDF4A14.600BE811@excitehome.net>
Message-ID: <3BE01881.2DFEEDFB@bank-banque-canada.ca>

>I am new to R, having used S-plus a number of years back.
>I would like to set up a time series object for forecasting, with data
>collected daily between 5th April 2001 and 16th September 2001.
>Any help would be most appreciated as I have been unable to find any
>suitable examples in the documentation.

If you are considering multivariate ARMA or state space models then you
might look at the dse bundle of packages on CRAN. You might also find
dse useful if you are looking at multi-period forecasts from univariate
models.

There is a new version of dse on CRAN, but I have not widely advertised
it as I intend to soon clean up a couple of small glitches. In
particular, I mistakenly put the Users' Guide (which has lots of
forecasting examples) in the bundle subdirectory inst/doc rather than
dse1/inst/doc. Thus, it is distributed with the bundle but does not get
installed in an obvious place.

I have not used dse very much with daily data. Although it should not
make any difference, one is sometimes surprised. Please let me know if
you have any difficulty.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From helgito at hi.is  Wed Oct 31 16:33:18 2001
From: helgito at hi.is (helgito@hi.is)
Date: Wed, 31 Oct 2001 15:33:18 +0000
Subject: [R] isotonic regression
Message-ID: <3BE019BE.3E400696@hi.is>

Dear R-users

Do you know of an easy way in R of performing "isotonic (unimodal)"
regression ala BBBB, Barlow,  Bartolomew, Brenner and Brunk.

best regards

Helgi

--
Helgi Tomasson                                       FAX:  354-552-6806
University of Iceland                                PHONE:354-525-4571
Faculty of Economics and Business Administration     email:helgito at rhi.hi.is
Oddi v/ Sturlugotu
IS-101 Reykjavik
ICELAND



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From lorenmc at socrates.berkeley.edu  Wed Oct 31 17:22:10 2001
From: lorenmc at socrates.berkeley.edu (loren mccarter)
Date: Wed, 31 Oct 2001 08:22:10 -0800 (PST)
Subject: [R] shared libraries on FreeBSD 4.*
Message-ID: <Pine.GSO.4.21.0110310757080.11856-100000@socrates.Berkeley.EDU>

I've used R for a couple of years on FreeBSD with few problems. Recently,
a couple of the contributed packages seem to have difficulty finding
symbols in the shared libraries. Currently, I'm running R 1.3.1 on FreeBSD
4.4. I've tried setting LD_LIBRARY_PATH to /usr/local/lib
and some other things. The packages I've had trouble with are:

Matrix 0.3.15
RODBC 0.8.3
RSPython 0.3

Matrix could not find my BLAS library: 

     checking for dgemm_ in -lcomplib.sgimath... no
     checking for zherk in -lblas... no
     checking for dgemm_ in -lblas... no
     could not find your BLAS library
     ERROR: Configuration failed for package `Matrix'

I solved the problem with Matrix by adding -L/usr/local/lib to the 'FLIBS'
variable in $RHOME/etc/Makeconf. Then, it found the library and installed
just fine. 

RODBC gives me the following error:

   Installing source package `RODBC' ...
   creating cache ./config.cache
   checking for library containing SQLTables... no
   configure: error: no ODBC driver manager found
   ERROR: Configuration failed for package `RODBC'

I have unixODBC and libiodbc installed in /usr/local/lib and "nm
-g" returns the symbol SQLTables in libiodbc.so, libodbc.so,
libodbcpsql.so, libpsqlodbc.so. -L/usr/local/lib is in the FLIBS
statement so that is not the problem. 

RSPython installs fine, but when I load the library in R
'library(RSPython' it returns the following:

    Error in dyn.load(x, as.logical(local), as.logical(now)) : 
            unable to load shared library
    "/usr/local/lib/R/library/RSPython/libs/RSPython.so":
      /usr/local/lib/R/library/RSPython/libs/RSPython.so: Undefined symbol
    "pthread_create"
    Error in library(RSPython) : .First.lib failed


Am I correct in thinking that these three issues result from a
common problem with R and shared libraries on FreeBSD? Can
you think of something that I am doing incorrectly upon installation
or R or the packages that could cause these problems. In case it is
relevant, FreeBSD uses an older version of libtool as compared to the one
that comes with R. Here is the version information: 

FreeBSD libtool:
  ltmain.sh (GNU libtool) 1.3.4-freebsd-ports (1.385.2.196 1999/12/07
  21:47:57)

R libtool: 
  ltmain.sh (GNU libtool) 1.3e (1.890 2001/04/06 23:48:27)


Thanks for any help you can provide!

Loren

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Oct 31 18:19:43 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 31 Oct 2001 17:19:43 +0000 (GMT)
Subject: [R] shared libraries on FreeBSD 4.*
In-Reply-To: <Pine.GSO.4.21.0110310757080.11856-100000@socrates.Berkeley.EDU>
Message-ID: <Pine.LNX.4.31.0110311709220.10322-100000@gannet.stats>

On Wed, 31 Oct 2001, loren mccarter wrote:

> I've used R for a couple of years on FreeBSD with few problems. Recently,
> a couple of the contributed packages seem to have difficulty finding
> symbols in the shared libraries. Currently, I'm running R 1.3.1 on FreeBSD
> 4.4. I've tried setting LD_LIBRARY_PATH to /usr/local/lib
> and some other things. The packages I've had trouble with are:
>
> Matrix 0.3.15
> RODBC 0.8.3
> RSPython 0.3
>
> Matrix could not find my BLAS library:
>
>      checking for dgemm_ in -lcomplib.sgimath... no
>      checking for zherk in -lblas... no
>      checking for dgemm_ in -lblas... no
>      could not find your BLAS library
>      ERROR: Configuration failed for package `Matrix'
>
> I solved the problem with Matrix by adding -L/usr/local/lib to the 'FLIBS'
> variable in $RHOME/etc/Makeconf. Then, it found the library and installed
> just fine.

> RODBC gives me the following error:
>
>    Installing source package `RODBC' ...
>    creating cache ./config.cache
>    checking for library containing SQLTables... no
>    configure: error: no ODBC driver manager found
>    ERROR: Configuration failed for package `RODBC'
>
> I have unixODBC and libiodbc installed in /usr/local/lib and "nm
> -g" returns the symbol SQLTables in libiodbc.so, libodbc.so,
> libodbcpsql.so, libpsqlodbc.so. -L/usr/local/lib is in the FLIBS
> statement so that is not the problem.

I think it is. FLIBS refers to Fortran, and this is looking for C
libraries.  (Also, the configure script for RODBC is not looking for
FLIBS in $RHOME/etc/Makeconf.)  I think you need to set LIBS to
(not FLIBS) to -L/usr/local/lib -R/usr/local/lib (or whatever the
FreeBSD equivalent is) before running these configure scripts.

That said, on all my platforms having LD_LIBRARY_PATH set correctly works.

>
> RSPython installs fine, but when I load the library in R
> 'library(RSPython' it returns the following:
>
>     Error in dyn.load(x, as.logical(local), as.logical(now)) :
>             unable to load shared library
>     "/usr/local/lib/R/library/RSPython/libs/RSPython.so":
>       /usr/local/lib/R/library/RSPython/libs/RSPython.so: Undefined symbol
>     "pthread_create"
>     Error in library(RSPython) : .First.lib failed

do ldd on RSPython.so: I suspect -lpthreads is needed (plus an appropriate
path).

>
>
> Am I correct in thinking that these three issues result from a
> common problem with R and shared libraries on FreeBSD? Can

Well, FreeBSD is not a common platform for R but I recall no other
reports.

> you think of something that I am doing incorrectly upon installation
> or R or the packages that could cause these problems. In case it is
> relevant, FreeBSD uses an older version of libtool as compared to the one
> that comes with R. Here is the version information:
>
> FreeBSD libtool:
>   ltmain.sh (GNU libtool) 1.3.4-freebsd-ports (1.385.2.196 1999/12/07
>   21:47:57)
>
> R libtool:
>   ltmain.sh (GNU libtool) 1.3e (1.890 2001/04/06 23:48:27)
>
>
> Thanks for any help you can provide!
>
> Loren
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andyj at splash.princeton.edu  Wed Oct 31 19:06:10 2001
From: andyj at splash.princeton.edu (Andy Jacobson)
Date: 31 Oct 2001 13:06:10 -0500
Subject: [R] seg fault with mclust
Message-ID: <f2kitcvr8fh.fsf@tazman.princeton.edu>

Howdy,

        I'm experiencing a segmentation fault when trying to load
        mclust.so from mclust-1.1-4.  I'm using R-1.3.1 on RedHat 6.2,
        and `gcc --version` reports "egcs-2.91.66".

        Any ideas?

                -Andy

Package install:

        > install.packages("mclust")

        [stuff omitted]

        Installing source package `mclust' ...
         libs
        g77   -fPIC  -g -O2 -c blapack.f -o blapack.o
        g77   -fPIC  -g -O2 -c mclust.f -o mclust.o
        gcc -shared  -o mclust.so blapack.o mclust.o  -L/usr/local/lib -lg2c -lm -L/usr/lib/gcc-lib/i386-redhat-linux/egcs-2.91.66 -L/usr/i386-redhat-linux/lib -lm 

        [stuff omitted]

         DONE (mclust)

        DONE (INSTALL)

        Delete downloaded files (y/N)? y

        Warning message: 
        argument `lib' is missing: using /home/splash/andyj/lib/R in: install.packages("mclust") 
        > library("mclust")
        Segmentation fault (core dumped)

"Verbose" session showing dyn.load seg fault:
        
        ~> R --verbose

        R : Copyright 2001, The R Development Core Team
        Version 1.3.1  (2001-08-31)

        R is free software and comes with ABSOLUTELY NO WARRANTY.
        You are welcome to redistribute it under certain conditions.
        Type `license()' or `licence()' for distribution details.

        R is a collaborative project with many contributors.
        Type `contributors()' for more information.

        Type `demo()' for some demos, `help()' for on-line help, or
        `help.start()' for a HTML browser interface to help.
        Type `q()' to quit R.

        [Previously saved workspace restored]

        lnow dyn.load(/usr/local/lib/R/library/ctest/libs/ctest.so)..
        i >R_ReplConsole(): before "for(;;)" {main.c}
        > library(mclust)
        Garbage collection 1 = 0+0+1 (level 2) ... 
        135144 cons cells free (33%)
        5.7 Mbytes of heap free (94%)
        now dyn.load(/home/splash/andyj/lib/R/mclust/libs/mclust.so)..
        Segmentation fault (core dumped)



Andy Jacobson

andyj at splash.princeton.edu     

Program in Atmospheric and Oceanic Sciences
Sayre Hall, Forrestal Campus
Princeton University
PO Box CN710 Princeton, NJ 08544-0710 USA

Tel: 609/258-5260  Fax: 609/258-2850
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Oct 31 19:14:16 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 31 Oct 2001 18:14:16 +0000 (GMT)
Subject: [R] seg fault with mclust
In-Reply-To: <f2kitcvr8fh.fsf@tazman.princeton.edu>
Message-ID: <Pine.LNX.4.31.0110311809590.12071-100000@gannet.stats>

On 31 Oct 2001, Andy Jacobson wrote:

>         I'm experiencing a segmentation fault when trying to load
>         mclust.so from mclust-1.1-4.  I'm using R-1.3.1 on RedHat 6.2,
>         and `gcc --version` reports "egcs-2.91.66".

Standard problem: the Fortran on that system is broken.  It works with
gcc 2.95.3 or gcc 3.0.2, for example.  Avoid unreleased compilers put out
by RedHat!

If this is a problem I can make available a known working mclust.so for
RedHat 6.2.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From csprin at brandybuck.ca.sandia.gov  Wed Oct 31 20:03:46 2001
From: csprin at brandybuck.ca.sandia.gov (Clayton Springer)
Date: Wed, 31 Oct 2001 11:03:46 -0800
Subject: [R] Obtaining the surrogate splits from rpart
In-Reply-To: <Pine.LNX.4.31.0110301948200.6940-100000@gannet.stats>; from ripley@stats.ox.ac.uk on Tue, Oct 30, 2001 at 07:51:59PM +0000
References: <20011030113426.G8370@brandybuck> <Pine.LNX.4.31.0110301948200.6940-100000@gannet.stats>
Message-ID: <20011031110346.L8370@brandybuck>

On Tue, Oct 30, 2001 at 07:51:59PM +0000, Prof Brian Ripley wrote:
> On Tue, 30 Oct 2001, Clayton Springer wrote:
> 
> > Dear r-help,
> >

> > > data(kyphosis)
> > > fit <- rpart(Kyphosis ~ Age + Number + Start, data=kyphosis)
> 
> summary.rpart prints them out for you, so just examine its R code
> to see how to extract them.

I did that and found that only some of the surrogate splits are available.
I would like to have the surrogate split for every feature at each node.
Will I be able to print this out from an rpart object?  
Are all the surrogate splits even calculated in rpart, it doesn't seem like they are.

Has anybody found all the surrogate splits and/or calculated Brieman's feature rankings? 

thanks again,


Clayton

-- 
Clayton Springer, Ph. D.
Sandia National Laboratories                      csprin at ca.sandia.gov
Biosystems Research Department                    (925) 294-2143
P.O. Box 969, MS 9951                fax:         (925) 294-3020
Livermore, CA, 94551-0969

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rhskelto at atm.ox.ac.uk  Wed Oct 31 20:22:26 2001
From: rhskelto at atm.ox.ac.uk (Randall Skelton)
Date: Wed, 31 Oct 2001 19:22:26 +0000 (GMT)
Subject: [R] Map data
Message-ID: <Pine.LNX.4.33.0110311905030.32496-100000@mulligan.atm.ox.ac.uk>

Hello,

I am interested in trying to make relatively simple map plots (low/medium
resolution world and continental) with cylindrical, conical, azimuthal and
singular (i.e. Bonne, Sanson-Flamsteed sinusoidal and molweide)
projections on which I can overlay atmospheric data (contours, points,
polygons).  I found a reference to a map library by Barry Rowlingson but I
cannot seem to find it on CRAN.

http://www.r-project.org/nocvs/mail/r-help/2000/4480.html

Does anyone know of a similar or updated map package?

Any and all help is much appreciated,

Randall

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From lorenmc at socrates.berkeley.edu  Wed Oct 31 20:29:16 2001
From: lorenmc at socrates.berkeley.edu (loren mccarter)
Date: Wed, 31 Oct 2001 11:29:16 -0800 (PST)
Subject: [R] shared libraries on FreeBSD 4.*
In-Reply-To: <Pine.LNX.4.31.0110311709220.10322-100000@gannet.stats>
Message-ID: <Pine.GSO.4.21.0110311111140.2776-100000@socrates.Berkeley.EDU>

Thanks for your help. As was suggested by Prof Ripley, the problem appears
to be related to the environment variables for FLIB, LIBS and
LD_LIBRARY_PATH. I was able to solve the problem with RODBC by setting the
LIBS variable in the current shell immediately before the install (LIBS
was already set correctly in $RHOME/etc/Makeconf but RODBC must not
have been reading it). Below is a log that might be useful for
understanding the issue. It uses a modified version of the RODBC/configure
script that simply prints to screen the relevant environment variables
before AC_SEARCH_LIBS is invoked. I have yet to figure out what's
happening with RSPython, but that is probably more approporate for
omegahat-help if Prof Ripley's suggestion does not work. Thanks!

Loren


/* First showing that build does not work despite correct settings in  
 * LD_LIBRARY_PATH  
 * Note that LIBS='' despite correct settings in $RHOME/etc/Makeconf
 */

$ R INSTALL RODBC
Installing source package `RODBC' ...
LD_LIBRARY_PATH=/usr/local/lib/R/bin:/usr/local/lib:/usr/X11R6/lib:/usr/libexec/elf:/usr/libexec:/usr/lib
LIBS=
creating cache ./config.cache
checking for library containing SQLTables... no
configure: error: no ODBC driver manager found
ERROR: Configuration failed for package `RODBC'


/* Now, I set the LIBS variable in the current shell and all goes well.
 */

$ setenv LIBS -L/usr/local/lib

$ R INSTALL RODBC
Installing source package `RODBC' ...
LD_LIBRARY_PATH=/usr/local/lib/R/bin:/usr/local/lib:/usr/X11R6/lib:/usr/libexec/elf:/usr/libexec:/usr/lib
LIBS=-L/usr/local/lib
loading cache ./config.cache
checking for library containing SQLTables... -lodbc
updating cache ./config.cache
creating ./config.status
creating src/Makevars
 libs
gcc -I/usr/local/lib/R/include  -I/usr/local/include -mieee-fp  -fPIC  -g
-O2 -c RODBC.c -o RODBC.o
gcc -shared  -o RODBC.so RODBC.o -L/usr/local/lib -lodbc -L/usr/local/lib 
 R
 help
 >>> Building/Updating help pages for package `RODBC'
     Formats: text html latex example 
...


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rhskelto at atm.ox.ac.uk  Wed Oct 31 20:30:53 2001
From: rhskelto at atm.ox.ac.uk (Randall Skelton)
Date: Wed, 31 Oct 2001 19:30:53 +0000 (GMT)
Subject: [R] Applicability of "Programming with Data" Text
Message-ID: <Pine.LNX.4.33.0110311922400.32496-100000@mulligan.atm.ox.ac.uk>

Hello,

Before I consider purchasing it, can someone comment on the general
applicability of John Chambers' book titled "Programming with Data" for R
programming.  I am currently using R-1.3.1 with the Omega SLanguage and
RSMethod packages.

Many thanks,
Randall

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Wed Oct 31 20:34:43 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Oct 2001 20:34:43 +0100
Subject: [R] seg fault with mclust
In-Reply-To: <Pine.LNX.4.31.0110311809590.12071-100000@gannet.stats>
References: <Pine.LNX.4.31.0110311809590.12071-100000@gannet.stats>
Message-ID: <x28zdrli24.fsf@blueberry.kubism.ku.dk>

Prof Brian Ripley <ripley at stats.ox.ac.uk> writes:

> On 31 Oct 2001, Andy Jacobson wrote:
> 
> >         I'm experiencing a segmentation fault when trying to load
> >         mclust.so from mclust-1.1-4.  I'm using R-1.3.1 on RedHat 6.2,
> >         and `gcc --version` reports "egcs-2.91.66".
> 
> Standard problem: the Fortran on that system is broken.  It works with
> gcc 2.95.3 or gcc 3.0.2, for example.  Avoid unreleased compilers put out
> by RedHat!
> 
> If this is a problem I can make available a known working mclust.so for
> RedHat 6.2.

(Actually, I think egcs-2.91.66 aka EGCS 1.1.2 *was* released by
someone responsible, it's just buggy...)

Beware that this is not the only one! Several other packages also fail
to load in the same way. When 1.4.0 comes out, builds of R itself will
fail with stock 6.2. (Unless someone can figure out a workaround,
which hardly seems worth the effort. F2c is a workaround, btw, but it
is not standard with RH.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jmiyamot at u.washington.edu  Wed Oct 31 21:52:51 2001
From: jmiyamot at u.washington.edu (John Miyamoto)
Date: Wed, 31 Oct 2001 12:52:51 -0800 (PST)
Subject: [R] t.test
Message-ID: <Pine.A41.4.33.0110311244540.14686-100000@mead5.u.washington.edu>

Dear R-users,
   I am learning to use R 1.3.1 on a Pentium running Windows '98.  I'm
puzzled that several statistical procedures, t.test and chisq.test, do not
appear to be available on R version 1.3.1.  For example, if I type
"t.test", I get the reply, "Object "t.test" not found".  Is there a
package that I have to load in order to have access to these procedures,
or have they been dropped from the R program?  On a related question, is
there a web site that lists changes from one version of R to the next?  I
tried unsuccessfully to find such a list at the CRAN website.

John

--------------------------------------------------------------------
John Miyamoto                           |
Department of Psychology, Box 351525    |  If ignorance is bliss,
University of Washington                |  why are so many people
Seattle, WA 98195-1525.                 |  unhappy?
Phone: 206-543-0805, Fax: 206-685-3157  |
Email: jmiyamot at u.washington.edu        |
--------------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From camann at babylon.cnrs.humboldt.edu  Wed Oct 31 22:10:46 2001
From: camann at babylon.cnrs.humboldt.edu (Michael Camann)
Date: Wed, 31 Oct 2001 13:10:46 -0800 (PST)
Subject: [R] Pearson type III distributions
Message-ID: <Pine.LNX.4.10.10110311308070.16553-100000@babylon.cnrs.humboldt.edu>

Are there built in or contributed functions for density, p-values, etc for
the Pearson type III distribution, analogous to dnorm(), pnorm(), qnorm(),
etc?

--Mike C.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Michael A. Camann                                  Voice: 707-826-3676
Associate Professor of Zoology                       Fax: 707-826-3201
Institute for Forest Canopy Research     Email: mac24 at axe.humboldt.edu
Department of Biology                            ifcr at axe.humboldt.edu
Humboldt State University           
Arcata, CA 95521

                 URL:http://www.humboldt.edu/~mac24/
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tebaldi at rap.ucar.edu  Wed Oct 31 22:36:14 2001
From: tebaldi at rap.ucar.edu (Claudia Tebaldi)
Date: Wed, 31 Oct 2001 14:36:14 -0700 (MST)
Subject: [R] maps in R (fwd)
Message-ID: <Pine.GSO.4.05.10110311433550.2143-100000@virga.rap.ucar.edu>

Here is the answer to an old question of mine, regarding maps in R
Hope this help.

claudia



---------- Forwarded message ----------
Date: Mon, 25 Jun 2001 13:48:05 -0400
From: Kieran Healy <kjhealy at Princeton.EDU>
To: Claudia Tebaldi <tebaldi at ucar.edu>
Subject: Re: [R] maps in R

Hi  Claudia --

you can get the maps() library from here:

ftp://ftp.mcs.vuw.ac.nz/pub/statistics/map/

It's not on CRAN because it's still in development. I've been using it
for a while with no trouble, though. As far as I remember, it installs
like a regular R library. 

Kieran

Claudia Tebaldi wrote:
> 
> Hi everybody
> 
> Does any of you know how to mimick the functionality of the Splus
> library "maps "  in R?
> 
> I.E.:I'd like to draw contours of the US and individual states, and be
> able to overlay points by giving lat/long coordinates to points() or
> text() functions.  I'd be a happy camper with just the state-level
> resolution. . . .
> 
> thanks in advance
> 
> claudia

--
Kieran Healy
Department of Sociology, Princeton University,
Princeton NJ 08544. kjhealy at princeton.edu


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Ko-Kang at xtra.co.nz  Wed Oct 31 22:47:48 2001
From: Ko-Kang at xtra.co.nz (Ko-Kang Kevin Wang)
Date: Thu, 1 Nov 2001 10:47:48 +1300
Subject: [R] t.test
In-Reply-To: <Pine.A41.4.33.0110311244540.14686-100000@mead5.u.washington.edu>
Message-ID: <JLECJACFMBHFAAPLJNECOEHLCAAA.Ko-Kang@xtra.co.nz>

I think both are in the ctest package which is installed automatically when you install R.  I do not have this problem and I ma running R 1.3.1 on Windows too.

As for your second question, it is in CRAN.  Once you get to the CRAN main page (http://cran.r-project.org/), you should see a table and under "All Platforms" there is this line:
  Download the source code of the latest release: R-1.3.1.tgz (or read what's new in the latest version). 
click on "new" which is a hyperlink that shall direct you to see the changes.

Cheers,

Ko-Kang Wang

------------------------------------------------------------------------------
Ko-Kang Kevin Wang
Statistical Analysis Division Leader
Software Developers' Klub (SDK)
University of Auckland
New Zealand

-----Original Message-----
From: owner-r-help at stat.math.ethz.ch
[mailto:owner-r-help at stat.math.ethz.ch]On Behalf Of John Miyamoto
Sent: Thursday, November 01, 2001 9:53 AM
To: R discussion group
Subject: [R] t.test


Dear R-users,
   I am learning to use R 1.3.1 on a Pentium running Windows '98.  I'm
puzzled that several statistical procedures, t.test and chisq.test, do not
appear to be available on R version 1.3.1.  For example, if I type
"t.test", I get the reply, "Object "t.test" not found".  Is there a
package that I have to load in order to have access to these procedures,
or have they been dropped from the R program?  On a related question, is
there a web site that lists changes from one version of R to the next?  I
tried unsuccessfully to find such a list at the CRAN website.

John

--------------------------------------------------------------------
John Miyamoto                           |
Department of Psychology, Box 351525    |  If ignorance is bliss,
University of Washington                |  why are so many people
Seattle, WA 98195-1525.                 |  unhappy?
Phone: 206-543-0805, Fax: 206-685-3157  |
Email: jmiyamot at u.washington.edu        |
--------------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Wed Oct 31 22:55:21 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Oct 2001 22:55:21 +0100
Subject: [R] t.test
In-Reply-To: <Pine.A41.4.33.0110311244540.14686-100000@mead5.u.washington.edu>
References: <Pine.A41.4.33.0110311244540.14686-100000@mead5.u.washington.edu>
Message-ID: <x2wv1bo4om.fsf@blueberry.kubism.ku.dk>

John Miyamoto <jmiyamot at u.washington.edu> writes:

> Dear R-users,
>    I am learning to use R 1.3.1 on a Pentium running Windows '98.  I'm
> puzzled that several statistical procedures, t.test and chisq.test, do not
> appear to be available on R version 1.3.1.  For example, if I type
> "t.test", I get the reply, "Object "t.test" not found".  Is there a
> package that I have to load in order to have access to these procedures,
> or have they been dropped from the R program?  On a related question, is
> there a web site that lists changes from one version of R to the next?  I
> tried unsuccessfully to find such a list at the CRAN website.
> 

It should be there, and generally it is. Did you do anything peculiar
during installation?

Does library(ctest) make any difference? If so, then you might somehow
have squashed the normal load on startup.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gb at stat.umu.se  Wed Oct 31 22:16:42 2001
From: gb at stat.umu.se (=?iso-8859-1?Q?G=F6ran_Brostr=F6m?=)
Date: Wed, 31 Oct 2001 22:16:42 +0100 (CET)
Subject: [R] seg fault with mclust
In-Reply-To: <Pine.LNX.4.31.0110311809590.12071-100000@gannet.stats>
Message-ID: <Pine.LNX.4.33.0110312209210.11779-100000@tal.stat.umu.se>

On Wed, 31 Oct 2001, Prof Brian Ripley wrote:

> On 31 Oct 2001, Andy Jacobson wrote:
> 
> >         I'm experiencing a segmentation fault when trying to load
> >         mclust.so from mclust-1.1-4.  I'm using R-1.3.1 on RedHat 6.2,
> >         and `gcc --version` reports "egcs-2.91.66".
> 
> Standard problem: the Fortran on that system is broken.  It works with
> gcc 2.95.3 or gcc 3.0.2, for example.  Avoid unreleased compilers put out
> by RedHat!

Another oddity with RedHat gcc: RH7.2 comes with "gcc3" which claims to be 
gcc 3.0.2; but, it was released _before_ gcc 3.0.2 was released at 
gcc.gnu.org! 

G?ran 

> If this is a problem I can make available a known working mclust.so for
> RedHat 6.2.
> 
> 

-- 
 G?ran Brostr?m                      tel: +46 90 786 5223
 professor                           fax: +46 90 786 6614
 Department of Statistics            http://www.stat.umu.se/egna/gb/
 Ume? University
 SE-90187 Ume?, Sweden             e-mail: gb at stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Kurt.Hornik at ci.tuwien.ac.at  Wed Oct 31 20:02:27 2001
From: Kurt.Hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 31 Oct 2001 20:02:27 +0100
Subject: [R] shared libraries on FreeBSD 4.*
In-Reply-To: <Pine.LNX.4.31.0110311709220.10322-100000@gannet.stats>
References: <Pine.GSO.4.21.0110310757080.11856-100000@socrates.Berkeley.EDU>
	<Pine.LNX.4.31.0110311709220.10322-100000@gannet.stats>
Message-ID: <15328.19139.394610.219950@mithrandir.hornik.net>

>>>>> Prof Brian Ripley writes:

> On Wed, 31 Oct 2001, loren mccarter wrote:
>> I've used R for a couple of years on FreeBSD with few problems. Recently,
>> a couple of the contributed packages seem to have difficulty finding
>> symbols in the shared libraries. Currently, I'm running R 1.3.1 on FreeBSD
>> 4.4. I've tried setting LD_LIBRARY_PATH to /usr/local/lib
>> and some other things. The packages I've had trouble with are:
>> 
>> Matrix 0.3.15
>> RODBC 0.8.3
>> RSPython 0.3
>> 
>> Matrix could not find my BLAS library:
>> 
>> checking for dgemm_ in -lcomplib.sgimath... no
>> checking for zherk in -lblas... no
>> checking for dgemm_ in -lblas... no
>> could not find your BLAS library
>> ERROR: Configuration failed for package `Matrix'
>> 
>> I solved the problem with Matrix by adding -L/usr/local/lib to the 'FLIBS'
>> variable in $RHOME/etc/Makeconf. Then, it found the library and installed
>> just fine.

>> RODBC gives me the following error:
>> 
>> Installing source package `RODBC' ...
>> creating cache ./config.cache
>> checking for library containing SQLTables... no
>> configure: error: no ODBC driver manager found
>> ERROR: Configuration failed for package `RODBC'
>> 
>> I have unixODBC and libiodbc installed in /usr/local/lib and "nm
>> -g" returns the symbol SQLTables in libiodbc.so, libodbc.so,
>> libodbcpsql.so, libpsqlodbc.so. -L/usr/local/lib is in the FLIBS
>> statement so that is not the problem.

> I think it is. FLIBS refers to Fortran, and this is looking for C
> libraries.  (Also, the configure script for RODBC is not looking for
> FLIBS in $RHOME/etc/Makeconf.)  I think you need to set LIBS to
> (not FLIBS) to -L/usr/local/lib -R/usr/local/lib (or whatever the
> FreeBSD equivalent is) before running these configure scripts.

> That said, on all my platforms having LD_LIBRARY_PATH set correctly
> works.

In theory, all the stuff in /usr/local/lib should be picked up
automatically: configure adds -L/usr/local/lib to LIBS and everything in
LIBS to the R LD_LIBRARY_PATH (or platform equivalent).

If you find that configure does not work as expected pls let me know.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Wed Oct 31 23:57:49 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Oct 2001 23:57:49 +0100
Subject: [R] seg fault with mclust
In-Reply-To: <Pine.LNX.4.33.0110312209210.11779-100000@tal.stat.umu.se>
References: <Pine.LNX.4.33.0110312209210.11779-100000@tal.stat.umu.se>
Message-ID: <x2ofmno1si.fsf@blueberry.kubism.ku.dk>

G?ran Brostr?m <gb at stat.umu.se> writes:

> On Wed, 31 Oct 2001, Prof Brian Ripley wrote:
> 
> > On 31 Oct 2001, Andy Jacobson wrote:
> > 
> > >         I'm experiencing a segmentation fault when trying to load
> > >         mclust.so from mclust-1.1-4.  I'm using R-1.3.1 on RedHat 6.2,
> > >         and `gcc --version` reports "egcs-2.91.66".
> > 
> > Standard problem: the Fortran on that system is broken.  It works with
> > gcc 2.95.3 or gcc 3.0.2, for example.  Avoid unreleased compilers put out
> > by RedHat!
> 
> Another oddity with RedHat gcc: RH7.2 comes with "gcc3" which claims to be 
> gcc 3.0.2; but, it was released _before_ gcc 3.0.2 was released at 
> gcc.gnu.org! 
> 
> G?ran 

Mmmno..? According to the web sites, the announcement of gcc 3.0.2 was
on Oct 25 and RH 7.2 on the 26th. Of course, RedHat owns what used to
be Cygnus and hosts most of the GCC developers, so the correlation is
likely to be close. Not too bad an idea actually, to put things in
sync so that the RedHat offering is not the official release plus
umpteen local workarounds. And the GCC guys probably know that they'll
have to support whatever ships with RedHat anyway.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gb at stat.umu.se  Wed Oct 31 23:39:27 2001
From: gb at stat.umu.se (=?iso-8859-1?Q?G=F6ran_Brostr=F6m?=)
Date: Wed, 31 Oct 2001 23:39:27 +0100 (CET)
Subject: [R] seg fault with mclust
In-Reply-To: <x2ofmno1si.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.33.0110312333370.12075-100000@tal.stat.umu.se>

On 31 Oct 2001, Peter Dalgaard BSA wrote:

> G?ran Brostr?m <gb at stat.umu.se> writes:
> 
> > On Wed, 31 Oct 2001, Prof Brian Ripley wrote:
> > 
> > > On 31 Oct 2001, Andy Jacobson wrote:
> > > 
> > > >         I'm experiencing a segmentation fault when trying to load
> > > >         mclust.so from mclust-1.1-4.  I'm using R-1.3.1 on RedHat 6.2,
> > > >         and `gcc --version` reports "egcs-2.91.66".
> > > 
> > > Standard problem: the Fortran on that system is broken.  It works with
> > > gcc 2.95.3 or gcc 3.0.2, for example.  Avoid unreleased compilers put out
> > > by RedHat!
> > 
> > Another oddity with RedHat gcc: RH7.2 comes with "gcc3" which claims to be 
> > gcc 3.0.2; but, it was released _before_ gcc 3.0.2 was released at 
> > gcc.gnu.org! 
> > 
> > G?ran 
> 
> Mmmno..? According to the web sites, the announcement of gcc 3.0.2 was
> on Oct 25 and RH 7.2 on the 26th. 

Really? RH 7.2 was available at Sunet (ftp.sunet.se) on the 22nd.
And I installed it on one of my computers a day or two later.

> Of course, RedHat owns what used to
> be Cygnus and hosts most of the GCC developers, so the correlation is
> likely to be close. Not too bad an idea actually, to put things in
> sync so that the RedHat offering is not the official release plus
> umpteen local workarounds. And the GCC guys probably know that they'll
> have to support whatever ships with RedHat anyway.

Aha..., thanks! 

G?ran
-- 
 G?ran Brostr?m                      tel: +46 90 786 5223
 professor                           fax: +46 90 786 6614
 Department of Statistics            http://www.stat.umu.se/egna/gb/
 Ume? University
 SE-90187 Ume?, Sweden             e-mail: gb at stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


