From feldesmanm at pdx.edu  Thu Feb  1 04:14:42 2001
From: feldesmanm at pdx.edu (Marc R. Feldesman)
Date: Wed, 31 Jan 2001 19:14:42 -0800
Subject: [R] summary() vs mean()
Message-ID: <5.0.2.1.2.20010131190221.00a933a0@127.0.0.1>

Forgive what may seem to be a trivial question/problem.

Below is some simple R 1.2.1(Windows) code with output.

 > summary(mammals, digits=10)
        Name    Body.Weight      Brain.Weight
  Red Fox :1   Min.   :   3.0   Min.   :  26.0
  Pig     :1   1st Qu.:  35.5   1st Qu.: 138.5
  Man     :1   Median : 100.0   Median : 406.0
  Kangaroo:1   Mean   : 761.2   Mean   :1000.0
  Jaguar  :1   3rd Qu.: 493.0   3rd Qu.: 667.5
  Horse   :1   Max.   :6654.0   Max.   :5712.0
  (Other) :9
 > mean(mammals[,3])
[1] 1000.467  # <---summary() reports it as 1000.0
 > mean(mammals[,2])
[1] 761.2 # <- summary() reports it as 761.2

I'm puzzled why the Brain.Weight mean from summary() is different from 
mean(mammals[,3]), while the Body.Weight means are identical in the two 
functions.  This isn't limited to R; I've observed the same thing in S-Plus 
2000 (and v.6 beta).

I can get the "right" answer in S-Plus using the digits argument (setting 
digits=8), but this argument doesn't seem to have any effect in R 1.2.1.  I 
*did* use it the way it is illustrated in the help file as well (e.g.

summary(mammals, digits=max(10, getOption("digits")))
)
with the same results as above.

So, I guess I have two questions:

1)  Why does S (in both S-Plus and R 1.2.1) produce different values for 
the means in the second variable but not the first?

2)  Why does the digits argument seem not to have any effect in R 1.2.1's 
summary()?

P.S.  I also pasted the example code from the summary help file into the R 
1.2.1 window.  The digits argument doesn't change the results there either.







Dr. Marc R. Feldesman
email:  feldesmanm at pdx.edu
email:  feldesman at attglobal.net
fax:    503-725-3905

"Don't know where I'm going.
Don't like where I've been.
There may be no exit.
But hell, I'm going in."  Jimmy Buffett

Powered by Superchoerus - the 700 MHz Coppermine Box

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From znmeb at aracnet.com  Thu Feb  1 05:12:52 2001
From: znmeb at aracnet.com (M. Edward Borasky)
Date: Wed, 31 Jan 2001 20:12:52 -0800
Subject: [R] R works in KDE but not in Gnome
In-Reply-To: <200102010351.EAA21783@stat.math.ethz.ch>
Message-ID: <HBEHIIBBKKNOBLMPKCBBGEFDDCAA.znmeb@aracnet.com>

I have a Red Hat 7.0 system, plus glibc-2.2 and gcc-2.96.69. When I run the
R demo 'demo("graphics") with KDE it runs fine, but when I try it with Gnome
it croaks:

	demo(graphics)
	---- ~~~~~~~~

Type  <Return>	 to start :

> opar <- par(ask = interactive() && (.Device %in% c("X11",
    "GTK", "windows", "Macintosh")))

> x <- rnorm(50)

> opar <- c(opar, par(bg = "white"))

> plot(x, ann = FALSE, type = "n")
Hit <Return> to see next plot:

> abline(h = 0, col = gray(0.9))

> lines(x, col = "green4", lty = "dotted")
Error in plot.xy(xy.coords(x, y), type = type, col = col, lty = lty, ...) :
	Error: X11 cannot allocate additional graphics colors.
Consider using X11 with colortype="pseudo.cube" or "gray".
>

This has happened with every release of R I've tried; the latest is
R-base-1.2.1-2. BTW, if it matters, the display is set to 800x600, 8-bit
color. But it works with KDE.
--
M. Edward (Ed) Borasky
http://www.aracnet.com/~znmeb
mailto:znmeb at aracnet.com

If there's nothing to astrology, how come so many famous men were born on
holidays?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jdm at xnet.com  Thu Feb  1 05:22:01 2001
From: jdm at xnet.com (Jeff Miller)
Date: Wed, 31 Jan 2001 22:22:01 -0600
Subject: [R] constructing a vector from a dataframe and another vector
Message-ID: <001601c08c06$ad4ef820$cee7fea9@x2t9h6>


Hi All,

I have a dataframe, divs, that looks like this:


>  divs
          date             ticker         dividend
263     20010322    ADBE      0.025
264     20010628    ADBE      0.025
265     20010927    ADBE      0.025
4308   20010212     ED          0.550
4309   20010514     ED          0.410
5416   20010330     GE          0.137
5417   20010629     GE          0.137
5418   20010928     GE          0.137

and a character vector of symbols that might, for example,  look like this:

syms <- c("ADBE", "AAPL", "ED", "ED", "ADBE")

>From these two data objects, I'd like to construct the following numeric
vector of dividends:

 divvec <-   c( .025, .025, .025, .550, .410, .550, .410, .550, .410, .025,
.025, .025)

In other words, I'd like to construct a numeric vector by replacing each
symbol in syms
by the dividends associated with that symbol in the dataframe divs.

Symbols can occur more than once in syms, and some of the symbols in syms
might not
be in divs.

I see that if each symbol  occurred only once in syms, it's just a matter of
re-ordering divs
and using as.vector(divs[,"dividend"]). I don't see how to proceed when
symbols
occur more than once in syms.

Is there a clean way to do this?

Many thanks in advance,

        Jeff Miller






-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Bill.Venables at CMIS.CSIRO.AU  Thu Feb  1 06:32:39 2001
From: Bill.Venables at CMIS.CSIRO.AU (Bill.Venables@CMIS.CSIRO.AU)
Date: Thu, 1 Feb 2001 15:32:39 +1000 
Subject: [R] constructing a vector from a dataframe and another vector
Message-ID: <2B7F04539DAFD311B61D009027D0DDA20C3C6F@roper-cv.qld.cmis.CSIRO.AU>



| -----Original Message-----
| From: Jeff Miller [mailto:jdm at xnet.com]
| Sent: Thursday, 1 February 2001 14:22
| To: r-help at stat.math.ethz.ch
| Subject: [R] constructing a vector from a dataframe and another vector
| 
| 
| 
| Hi All,
| 
| I have a dataframe, divs, that looks like this:
| 
| 
| >  divs
|           date     ticker     dividend
| 263    20010322     ADBE        0.025
| 264    20010628     ADBE        0.025
| 265    20010927     ADBE        0.025
| 4308   20010212     ED          0.550
| 4309   20010514     ED          0.410
| 5416   20010330     GE          0.137
| 5417   20010629     GE          0.137
| 5418   20010928     GE          0.137
| 
| and a character vector of symbols that might, for example,  
| look like this:
| 
| syms <- c("ADBE", "AAPL", "ED", "ED", "ADBE")
| 
| From these two data objects, I'd like to construct the 
| following numeric vector of dividends:
| 
|  divvec <-   c( .025, .025, .025, .550, .410, .550, .410, 
|                 .550, .410, .025, .025, .025)
| 
| In other words, I'd like to construct a numeric vector by 
| replacing each symbol in syms by the dividends associated 
| with that symbol in the dataframe divs.
| 
| Symbols can occur more than once in syms, and some of the 
| symbols in syms might not be in divs.
| 
| I see that if each symbol  occurred only once in syms, it's 
| just a matter of re-ordering divs and using 
| as.vector(divs[,"dividend"]). I don't see how to proceed when
| symbols occur more than once in syms.
| 
| Is there a clean way to do this?

Let's take it in stages.  First split up the dividends:

> divvy.up <- split(divs$dividend, divs$ticker)

Now check which values in syms belong to the set you have:

> m <- is.element(syms, levels(divs$ticker))

Now put together your vector:

> divvec <- unlist(divvy.up[syms[m]])

Easy as 1, 2, 3.  Or, if you want it all in one large, 
undigestible lump:

> divvec <- unlist(split(divs$dividend, 
	divs$ticker)[syms[is.element(syms, levels(divs$ticker))]])

(Warning: untested code.)


--
Bill Venables, CSIRO/CMIS Environmetrics Project
Email: Bill.Venables at cmis.csiro.au
Phone: +61 7 3826 7251
Fax:   +61 7 3826 7304
Postal: PO Box 120, Cleveland, Qld 4163, AUSTRALIA



| Many thanks in advance,
| 
|         Jeff Miller
| 
| 
| 
| 
| 
| 
| -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
| -.-.-.-.-.-.-.-.-
| r-help mailing list -- Read 
| http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
| Send "info", "help", or "[un]subscribe"
| (in the "body", not the subject !)  To: 
| r-help-request at stat.math.ethz.ch
| _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
| _._._._._._._._._
| 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Feb  1 09:04:28 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 1 Feb 2001 08:04:28 +0000 (GMT)
Subject: [R] summary() vs mean()
In-Reply-To: <5.0.2.1.2.20010131190221.00a933a0@127.0.0.1>
Message-ID: <Pine.GSO.4.31.0102010758550.5939-100000@auk.stats>

On Wed, 31 Jan 2001, Marc R. Feldesman wrote:

> Forgive what may seem to be a trivial question/problem.
>
> Below is some simple R 1.2.1(Windows) code with output.
>
>  > summary(mammals, digits=10)
>         Name    Body.Weight      Brain.Weight
>   Red Fox :1   Min.   :   3.0   Min.   :  26.0
>   Pig     :1   1st Qu.:  35.5   1st Qu.: 138.5
>   Man     :1   Median : 100.0   Median : 406.0
>   Kangaroo:1   Mean   : 761.2   Mean   :1000.0
>   Jaguar  :1   3rd Qu.: 493.0   3rd Qu.: 667.5
>   Horse   :1   Max.   :6654.0   Max.   :5712.0
>   (Other) :9
>  > mean(mammals[,3])
> [1] 1000.467  # <---summary() reports it as 1000.0
>  > mean(mammals[,2])
> [1] 761.2 # <- summary() reports it as 761.2
>
> I'm puzzled why the Brain.Weight mean from summary() is different from
> mean(mammals[,3]), while the Body.Weight means are identical in the two
> functions.  This isn't limited to R; I've observed the same thing in S-Plus
> 2000 (and v.6 beta).

The results are to a certain number of significant figures, not decimal
places.

> I can get the "right" answer in S-Plus using the digits argument (setting
> digits=8), but this argument doesn't seem to have any effect in R 1.2.1.  I
> *did* use it the way it is illustrated in the help file as well (e.g.
>
> summary(mammals, digits=max(10, getOption("digits")))
> )
> with the same results as above.
>
> So, I guess I have two questions:
>
> 1)  Why does S (in both S-Plus and R 1.2.1) produce different values for
> the means in the second variable but not the first?

summary.default uses signif on the results, to by default 4 digits.

> 2)  Why does the digits argument seem not to have any effect in R 1.2.1's
> summary()?

Because R forgot to pass it down to summary.default.

> P.S.  I also pasted the example code from the summary help file into the R
> 1.2.1 window.  The digits argument doesn't change the results there either.

In R and summary.data.frame, digits is only used in formatting the result.

Replace

    z <- lapply(as.list(object), summary, maxsum = maxsum)

by

    z <- lapply(as.list(object), summary, maxsum = maxsum, digits = digits)

in R.

Brian


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Torsten.Hothorn at rzmail.uni-erlangen.de  Thu Feb  1 10:48:05 2001
From: Torsten.Hothorn at rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Thu, 1 Feb 2001 10:48:05 +0100 (MET)
Subject: [R] postscript and lty
Message-ID: <Pine.LNX.4.21.0102011046100.13674-100000@artemis.imbe.med.uni-erlangen.de>


To the plot experts:

when creating a plot containing different lines, each with a special line
type, it may happen that the result of 'postscript()' is not readable by
ghostview (which may not be an R error, thus not bug report ;-). 
This is the case when mixing lty as 0:6 and character or even when 
using lty as character only.

Example:

postscript("test.ps")
plot(1:10, type="l", lty=1)   
lines(sample(10), lty="9A1A1A")
lines(sample(10), lty="1A6A7A")
lines(sample(10), lty="9B")    
lines(sample(10), lty="1F")
legend(4,4,paste("test", 1:5), lty=c(1, "9A1A1A","1A6A7A","9B","1F"))
dev.off()

gives (for me) the ghostscript error message:

hothorn at artemis:~/tmp/lty > ps2epsi test.ps
Error: /rangecheck in --setdash--
Operand stack:
   --nostringval--   0
Execution stack:
   %interp_exit   .runexec2   --nostringval--   --nostringval--
--nostringval--   2   %stopped_push   --nostringval--   2   3   %oparray_pop
--nostringval--   --nostringval--   false   1   %stopped_push   1   3
%oparray_pop   1   3   %oparray_pop   .runexec2   --nostringval--
--nostringval--   --nostringval--   2   %stopped_push   --nostringval--
--nostringval--   --nostringval--   --nostringval--   false   1
%stopped_push   --nostringval--   2   4   %oparray_pop   --nostringval--
--nostringval--
Dictionary stack:
   --dict:918/1241(G)--   --dict:0/20(G)--   --dict:53/200(L)--
--dict:50/72(L)--
Current allocation mode is local
Current file position is 4696
GNU Ghostscript: Unrecoverable error, exit code 1



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

and gs version: GNU Ghostscript 5.50 (2000-2-13)

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Feb  1 14:10:36 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Feb 2001 14:10:36 +0100
Subject: [R] R works in KDE but not in Gnome
In-Reply-To: "M. Edward Borasky"'s message of "Wed, 31 Jan 2001 20:12:52 -0800"
References: <HBEHIIBBKKNOBLMPKCBBGEFDDCAA.znmeb@aracnet.com>
Message-ID: <x2ae86h7lf.fsf@blueberry.kubism.ku.dk>

"M. Edward Borasky" <znmeb at aracnet.com> writes:

> This has happened with every release of R I've tried; the latest is
> R-base-1.2.1-2. BTW, if it matters, the display is set to 800x600, 8-bit
> color. But it works with KDE.

Most likely this is due to the pretty background and all the snazzy
little shaded icons in GNOME eating up all available colors, of which
you'll only have 256 in 8-bit mode. KDE is more cartoon-like and uses
fewer colors. I think you need to up your display to at least 16-bit
or stay away from GNOME. Or take the hint from the error message and
do

x11(color="pseudo.cube")
demo(graphics)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Feb  1 14:30:13 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Feb 2001 14:30:13 +0100
Subject: [R] postscript and lty
In-Reply-To: Torsten Hothorn's message of "Thu, 1 Feb 2001 10:48:05 +0100 (MET)"
References: <Pine.LNX.4.21.0102011046100.13674-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <x27l3ah6oq.fsf@blueberry.kubism.ku.dk>

Torsten Hothorn <Torsten.Hothorn at rzmail.uni-erlangen.de> writes:

> To the plot experts:
> 
> when creating a plot containing different lines, each with a special line
> type, it may happen that the result of 'postscript()' is not readable by
> ghostview (which may not be an R error, thus not bug report ;-). 

It's a bug alright:

0.75 setlinewidth
[ 0.00] 0 setdash <------- Invalid PostScript


> This is the case when mixing lty as 0:6 and character or even when 
> using lty as character only.
> 
> Example:
> 
> postscript("test.ps")
> plot(1:10, type="l", lty=1)   
> lines(sample(10), lty="9A1A1A")
> lines(sample(10), lty="1A6A7A")
> lines(sample(10), lty="9B")    
> lines(sample(10), lty="1F")
> legend(4,4,paste("test", 1:5), lty=c(1, "9A1A1A","1A6A7A","9B","1F"))
> dev.off()
> 

A fundamental problem here is that c(1, "9A1A1A","1A6A7A","9B","1F")
will coerce the 1 to character, and line type "1" is causing the
trouble with postscript. Simpler version of same problem is

 postscript('test.ps')
 plot(1:10,type="l",lty="1")

The workaround is 

  legend(4,4,paste("test", 1:5), lty=c("0", "9A1A1A","1A6A7A","9B","1F"))

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Heberto at meakins.lan.mcgill.ca  Thu Feb  1 13:49:08 2001
From: Heberto at meakins.lan.mcgill.ca (Heberto Ghezzo)
Date: Thu, 1 Feb 2001 08:49:08 -0400
Subject: [R] R 1.2.1 - read.table - factors problem or is it  a data.frame problem
In-Reply-To: <Pine.A41.4.21.0101310737090.151672-100000@homer25.u.washington.edu>
References: <ML-3.3.980932297.7349.gordon@rats.localdomain>
Message-ID: <200102011339.f11Ddws09809@water.cc.mcgill.ca>

I have some problems with read.table and floats turning up as 
factors. In my case it was not a blank in the file but an unary minus!!
so 3.24,-57.23,... the 3.24 is numeric but -57.23 is a factor.
Yes I turned it into a numeric with as.numeric(as.character(.. but I 
think it will be better to modify somehow the read.table/read.csv 
code.
Thanks anyway.

R. Heberto Ghezzo  Ph.D.
Meakins-Christie Labs
McGill University
Montreal - Canada
heberto at meakins.lan.mcgill.ca
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rossini at blindglobe.net  Thu Feb  1 15:12:15 2001
From: rossini at blindglobe.net (A.J. Rossini)
Date: 01 Feb 2001 06:12:15 -0800
Subject: [R] R works in KDE but not in Gnome
In-Reply-To: <x2ae86h7lf.fsf@blueberry.kubism.ku.dk>
References: <HBEHIIBBKKNOBLMPKCBBGEFDDCAA.znmeb@aracnet.com>
	<x2ae86h7lf.fsf@blueberry.kubism.ku.dk>
Message-ID: <87y9vqpk5c.fsf@jeeves.blindglobe.net>

>>>>> "PDB" == Peter Dalgaard BSA <p.dalgaard at biostat.ku.dk> writes:

    PDB> "M. Edward Borasky" <znmeb at aracnet.com> writes:
    >> This has happened with every release of R I've tried; the
    >> latest is R-base-1.2.1-2. BTW, if it matters, the display is
    >> set to 800x600, 8-bit color. But it works with KDE.

    PDB> Most likely this is due to the pretty background and all the
    PDB> snazzy little shaded icons in GNOME eating up all available
    PDB> colors

It probably is.  You'll have to adjust both the GNOME environment AND
whatever window manager themes (for both) to squeeze into 8-bits
color, with GNOME.

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
UW Biostat/Center for AIDS Research	rossini at u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini at scharp.org
-------- (friday is unknown) --------
FHCRC: M--W : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy
CFAR:  ??   : 206-731-3647 (fax=3694)|Email is far better than phone
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Feb  1 15:15:31 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Feb 2001 15:15:31 +0100
Subject: [R] R 1.2.1 - read.table - factors problem or is it  a data.frame problem
In-Reply-To: "Heberto Ghezzo"'s message of "Thu, 1 Feb 2001 08:49:08 -0400"
References: <ML-3.3.980932297.7349.gordon@rats.localdomain> <200102011339.f11Ddws09809@water.cc.mcgill.ca>
Message-ID: <x2y9vqfq0s.fsf@blueberry.kubism.ku.dk>

"Heberto Ghezzo" <Heberto at meakins.lan.mcgill.ca> writes:

> I have some problems with read.table and floats turning up as 
> factors. In my case it was not a blank in the file but an unary minus!!
> so 3.24,-57.23,... the 3.24 is numeric but -57.23 is a factor.
> Yes I turned it into a numeric with as.numeric(as.character(.. but I 
> think it will be better to modify somehow the read.table/read.csv 
> code.
> Thanks anyway.

That certainly sounds like a bug, but I can't reproduce it:

$ cat > xx  
-1,2,3
1,-2,3
$ R
...
> summary(read.csv('xx',head=F))
       V1             V2           V3   
 Min.   :-1.0   Min.   :-2   Min.   :3  
 1st Qu.:-0.5   1st Qu.:-1   1st Qu.:3  
 Median : 0.0   Median : 0   Median :3  
 Mean   : 0.0   Mean   : 0   Mean   :3  
 3rd Qu.: 0.5   3rd Qu.: 1   3rd Qu.:3  
 Max.   : 1.0   Max.   : 2   Max.   :3  

Could you give us some further details on the setup that is causing
that effect?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From s-luppescu at uchicago.edu  Thu Feb  1 17:02:25 2001
From: s-luppescu at uchicago.edu (s-luppescu@uchicago.edu)
Date: Thu, 01 Feb 2001 10:02:25 -0600 (CST)
Subject: [R] Rotated mtext
Message-ID: <XFMail.20010201100225.s-luppescu@uchicago.edu>

I seem to remember this coming up before, but I can't find it any messages I've
saved or in the archives (searching by subject). I want to rotate mtext so that
it's perpendicular to the right side. I tried srt=90 and lots of other values,
but it seems to be ignored. Is there a way to do this?
______________________________________________________________________
Stuart Luppescu         -=-=-  University of Chicago
$(B:MJ8$HCRF`H~$NIc(B        -=-=-  s-luppescu at uchicago.edu
http://www.consortium-chicago.org/people/sl.html
http://musuko.uchicago.edu/pubkey.asc for PGP Public Key
ICQ #21172047  AIM: psycho7070
Lack of capability is usually disguised by lack of interest.
>> Sent on 01-Feb-2001 at 10:00:03 with xfmail
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From noureddine.hakim at axa-corporatesolutions.com  Thu Feb  1 17:31:57 2001
From: noureddine.hakim at axa-corporatesolutions.com (HAKIM Nour-Eddine)
Date: Thu, 1 Feb 2001 17:31:57 +0100 
Subject: [R] Error in download pkg
Message-ID: <53829589BB93D4119B5800B0D03DCD21A061@EXGAGRP5>

Dears ,

I have the follow error when i  want too use function abcnon of package
bootstrap :

Warning message: 
Package `bootstrap' contains no R code in: library(bootstrap) 

Can you help me !

Thx.


AXA Corporate Solutions
Nouveaux Produits
Nour-Eddine HAKIM
52 Rue d'Amsterdame - 75009 Paris - France
Tel	(+33 1) 56 92 97 48
Fax	(+33 1) 56 92 97 40
E-Mail :  noureddine.hakim at axa-corporatesolutions.com	

Ce message peut contenir de l'information confidentielle et est adress?
uniquement au(x) destinataire(s) pr?vu(s)  par l'exp?diteur. Si vous n'?tes
pas celui-ci, vous ?tes pri?s de ne pas user, utiliser, diss?miner ou
reproduire le contenu de ce message. S'il s'agit d'une erreur, veuillez en
avertir l'exp?diteur dans les plus brefs d?lais.
L'information contenue dans ce message refl?te exclusivement l'opinion de la
personne qui l'a ?mise mais en aucun cas celle du Groupe AXA.
This message may contain confidential information destined to be read only
by the intended recipient. No other persons should read, use, publish or
reproduce the content of this message. If you receive this message by
mistake, please notify the sender immediately. 
The information contained in this message represents the personal opinions
of the individual that sent it and should not be construed as representing
the position of the AXA Group





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Feb  1 17:38:47 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 1 Feb 2001 16:38:47 +0000 (GMT)
Subject: [R] Error in download pkg
Message-ID: <200102011638.QAA07777@toucan.stats.ox.ac.uk>


> From: HAKIM Nour-Eddine <noureddine.hakim at axa-corporatesolutions.com>
> Date: Thu, 1 Feb 2001 17:31:57 +0100 
> 
> Dears ,
> 
> I have the follow error when i  want too use function abcnon of package
> bootstrap :
> 
> Warning message: 
> Package `bootstrap' contains no R code in: library(bootstrap) 
> 
> Can you help me !

This sort of thing happens when you unpack a source
package in the library directory instead of installing it.

Can you please tell us what platform you are on and exactly what
you did?


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From noureddine.hakim at axa-corporatesolutions.com  Thu Feb  1 17:47:42 2001
From: noureddine.hakim at axa-corporatesolutions.com (HAKIM Nour-Eddine)
Date: Thu, 1 Feb 2001 17:47:42 +0100 
Subject: [R] Error in download pkg
Message-ID: <53829589BB93D4119B5800B0D03DCD21A062@EXGAGRP5>

Thx for ur replay.

I use bootstrap methods for Estimating parmeters.

And in the package of bootstrap (i download it) there is function (abcnon,
acbnon, bootstrap, ...) but whan i want to use these function it doesn't
work! "couldn't find function abcnon !!".

i am using Win NT.



AXA Corporate Solutions
Nouveaux Produits
Nour-Eddine HAKIM
52 Rue d'Amsterdame - 75009 Paris - France
Tel	(+33 1) 56 92 97 48
Fax	(+33 1) 56 92 97 40
E-Mail :  noureddine.hakim at axa-corporatesolutions.com	

Ce message peut contenir de l'information confidentielle et est adress?
uniquement au(x) destinataire(s) pr?vu(s)  par l'exp?diteur. Si vous n'?tes
pas celui-ci, vous ?tes pri?s de ne pas user, utiliser, diss?miner ou
reproduire le contenu de ce message. S'il s'agit d'une erreur, veuillez en
avertir l'exp?diteur dans les plus brefs d?lais.
L'information contenue dans ce message refl?te exclusivement l'opinion de la
personne qui l'a ?mise mais en aucun cas celle du Groupe AXA.
This message may contain confidential information destined to be read only
by the intended recipient. No other persons should read, use, publish or
reproduce the content of this message. If you receive this message by
mistake, please notify the sender immediately. 
The information contained in this message represents the personal opinions
of the individual that sent it and should not be construed as representing
the position of the AXA Group




> -----Message d'origine-----
> De:	Prof Brian Ripley [SMTP:ripley at stats.ox.ac.uk]
> Date:	jeudi 1 f?vrier 2001 17:39
> ?:	r-help at stat.math.ethz.ch;
> noureddine.hakim at axa-corporatesolutions.com
> Objet:	Re: [R] Error in download pkg
> 
> 
> > From: HAKIM Nour-Eddine <noureddine.hakim at axa-corporatesolutions.com>
> > Date: Thu, 1 Feb 2001 17:31:57 +0100 
> > 
> > Dears ,
> > 
> > I have the follow error when i  want too use function abcnon of package
> > bootstrap :
> > 
> > Warning message: 
> > Package `bootstrap' contains no R code in: library(bootstrap) 
> > 
> > Can you help me !
> 
> This sort of thing happens when you unpack a source
> package in the library directory instead of installing it.
> 
> Can you please tell us what platform you are on and exactly what
> you did?
> 
> 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pflugshaupt at cirsium.ethz.ch  Thu Feb  1 18:03:25 2001
From: pflugshaupt at cirsium.ethz.ch (Kaspar Pflugshaupt)
Date: Thu, 1 Feb 2001 18:03:25 +0100
Subject: [R] Error in download pkg
In-Reply-To: <53829589BB93D4119B5800B0D03DCD21A061@EXGAGRP5>
References: <53829589BB93D4119B5800B0D03DCD21A061@EXGAGRP5>
Message-ID: <01020118032500.00875@Aconitum>

On Thursday 01 February 2001 17:31, you wrote:
> Dears ,
>
> I have the follow error when i  want too use function abcnon of package
> bootstrap :
>
> Warning message:
> Package `bootstrap' contains no R code in: library(bootstrap)
>
> Can you help me !

This usually happens to me if I just copy the package into R's library 
folder, instead of installing it correctly.

Try "R INSTALL bootstrap", if you're under Linux, or install.packages(). 
Under Windows, use the installer application that comes with the distribution.

Did you install the package correctly?


Kaspar Pflugshaupt
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From quale at statguys.dhs.org  Thu Feb  1 18:15:54 2001
From: quale at statguys.dhs.org (Christopher Quale)
Date: Thu, 1 Feb 2001 09:15:54 -0800 (PST)
Subject: [R] Link with C code
In-Reply-To: <001601c08abd$4f2d3a30$a304a992@doc.ic.ac.uk>
Message-ID: <Pine.LNX.4.10.10102010913360.20174-100000@statguys.dhs.org>


Patrick,

I have had good success using the lcc compiler (sorry - don't have
a link handy). It comes with a fairly complete IDE called wedit.
If you do a search for lcc-win32 you should find it. If you need
any help putting the dll "project" together, don't hesitate to email
me off list (or on if it would be helpful to others).

Chris

On Tue, 30 Jan 2001, Patrick Wendel wrote:

> 
> 
> Hello,
> 
> I am using cygwin (latest version) and I managed to generate a dll partly
> with rcmd shlib although there was a problem with both the resouce file (I
> had to remove "FILEOS VOS__WINDOWS32") and the command line for gcc
> (--shared is not supported for instance).
> 
> So I would like to know which compiler/environment you advise to use for
> windows OS.
> 
> Then I could load the library in R but couldn't call any method.
> 
> Is there a function to know which functions have been successfully imported
> ?
> 
> I've also done the dll in other ways (using gcc and dlltool as explained on
> their website and also using VC++) but I had the same result.
> 
> I suppose I missed something in the dll creation but I cannot see what.
> 
> Any idea ?
> 
> Many thanks,
> 
> Patrick Wendel
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From feldesmanm at pdx.edu  Thu Feb  1 18:47:02 2001
From: feldesmanm at pdx.edu (Marc R. Feldesman)
Date: Thu, 01 Feb 2001 09:47:02 -0800
Subject: [R] summary() vs mean()
In-Reply-To: <Pine.GSO.4.31.0102010758550.5939-100000@auk.stats>
References: <5.0.2.1.2.20010131190221.00a933a0@127.0.0.1>
Message-ID: <5.0.2.1.2.20010201093043.00ac79a0@127.0.0.1>

Below is output after fixing summary.data.frame as you suggest.  This 
output now matches that in SPlus 2000 and SPlus 6.0 (Win Beta 2).

However, in light of the issue of significant digits, there still seems to 
be an inconsistency here (both in R and S dialects).  All the values for 
body weight print (?have) one decimal digit, while all the values for brain 
weight print (?have) 4.  Since all the original values in the data file are 
recorded without decimal digits at all, I find it strange that the (for 
example) minimum for body weight is 3.0, while the minimum for brain weight 
is 26.0000.  They're 3 and 26, respectively, in the original data 
file.  Why should one be reported to one decimal digit and the other to 
4?  This pattern follows throughout.

I don't think this is an R problem since a similar pattern (but with 3 
decimal digits) occurs in S-Plus.


S-Plus 6.0 (Win, Beta) OUTPUT
 > summary(mammals, digits=8)
    Body.Weight      Brain.Weight
     Min.:   3.0      Min.:  26.000
  1st Qu.:  35.5   1st Qu.: 138.500
   Median: 100.0    Median: 406.000
     Mean: 761.2      Mean:1000.467
  3rd Qu.: 493.0   3rd Qu.: 667.500
     Max.:6654.0      Max.:5712.000
 >

Obviously this isn't a giant problem, but one that a student first brought 
to my attention and I've been scratching my head trying to puzzle it out 
ever since.

R-1.2.1 (Windows, Binary after Brian Ripley's code fix)

 > summary(mammals, digits=8)
        Name    Body.Weight      Brain.Weight
  Red Fox :1   Min.   :   3.0   Min.   :  26.0000
  Pig     :1   1st Qu.:  35.5   1st Qu.: 138.5000
  Man     :1   Median : 100.0   Median : 406.0000
  Kangaroo:1   Mean   : 761.2   Mean   :1000.4667
  Jaguar  :1   3rd Qu.: 493.0   3rd Qu.: 667.5000
  Horse   :1   Max.   :6654.0   Max.   :5712.0000
  (Other) :9



At 08:04 AM 2/1/01 +0000, Prof Brian D Ripley wrote:
 >On Wed, 31 Jan 2001, Marc R. Feldesman wrote:
 >
 >> Forgive what may seem to be a trivial question/problem.
 >>
 >> Below is some simple R 1.2.1(Windows) code with output.
 >>
 >>  > summary(mammals, digits=10)
 >>         Name    Body.Weight      Brain.Weight
 >>   Red Fox :1   Min.   :   3.0   Min.   :  26.0
 >>   Pig     :1   1st Qu.:  35.5   1st Qu.: 138.5
 >>   Man     :1   Median : 100.0   Median : 406.0
 >>   Kangaroo:1   Mean   : 761.2   Mean   :1000.0
 >>   Jaguar  :1   3rd Qu.: 493.0   3rd Qu.: 667.5
 >>   Horse   :1   Max.   :6654.0   Max.   :5712.0
 >>   (Other) :9
 >>  > mean(mammals[,3])
 >> [1] 1000.467  # <---summary() reports it as 1000.0
 >>  > mean(mammals[,2])
 >> [1] 761.2 # <- summary() reports it as 761.2
 >>
 >> I'm puzzled why the Brain.Weight mean from summary() is different from
 >> mean(mammals[,3]), while the Body.Weight means are identical in the two
 >> functions.  This isn't limited to R; I've observed the same thing in S-Plus
 >> 2000 (and v.6 beta).
 >
 >The results are to a certain number of significant figures, not decimal
 >places.
 >
 >> I can get the "right" answer in S-Plus using the digits argument (setting
 >> digits=8), but this argument doesn't seem to have any effect in R 1.2.1.  I
 >> *did* use it the way it is illustrated in the help file as well (e.g.
 >>
 >> summary(mammals, digits=max(10, getOption("digits")))
 >> )
 >> with the same results as above.
 >>
 >> So, I guess I have two questions:
 >>
 >> 1)  Why does S (in both S-Plus and R 1.2.1) produce different values for
 >> the means in the second variable but not the first?
 >
 >summary.default uses signif on the results, to by default 4 digits.
 >
 >> 2)  Why does the digits argument seem not to have any effect in R 1.2.1's
 >> summary()?
 >
 >Because R forgot to pass it down to summary.default.
 >
 >> P.S.  I also pasted the example code from the summary help file into the R
 >> 1.2.1 window.  The digits argument doesn't change the results there either.
 >
 >In R and summary.data.frame, digits is only used in formatting the result.
 >
 >Replace
 >
 >    z <- lapply(as.list(object), summary, maxsum = maxsum)
 >
 >by
 >
 >    z <- lapply(as.list(object), summary, maxsum = maxsum, digits = digits)
 >
 >in R.
 >
 >Brian
 >
 >
 >--
 >Brian D. Ripley,                  ripley at stats.ox.ac.uk
 >Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
 >University of Oxford,             Tel:  +44 1865 272861 (self)
 >1 South Parks Road,                     +44 1865 272860 (secr)
 >Oxford OX1 3TG, UK                Fax:  +44 1865 272595


Dr. Marc R. Feldesman
email:  feldesmanm at pdx.edu
email:  feldesman at attglobal.net
fax:    503-725-3905

"Don't know where I'm going.
Don't like where I've been.
There may be no exit.
But hell, I'm going in."  Jimmy Buffett

Powered by Superchoerus - the 700 MHz Coppermine Box

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Feb  1 18:56:21 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 1 Feb 2001 17:56:21 +0000 (GMT)
Subject: [R] summary() vs mean()
Message-ID: <200102011756.RAA13809@toucan.stats.ox.ac.uk>


> Date: Thu, 01 Feb 2001 09:47:02 -0800
> To: Prof Brian D Ripley <ripley at stats.ox.ac.uk>
> From: "Marc R. Feldesman" <feldesmanm at pdx.edu>
> Subject: Re: [R] summary() vs mean()
> Cc: <r-help at stat.math.ethz.ch>
> 
> Below is output after fixing summary.data.frame as you suggest.  This 
> output now matches that in SPlus 2000 and SPlus 6.0 (Win Beta 2).
> 
> However, in light of the issue of significant digits, there still seems to 
> be an inconsistency here (both in R and S dialects).  All the values for 
> body weight print (?have) one decimal digit, while all the values for brain 
> weight print (?have) 4.  Since all the original values in the data file are 
> recorded without decimal digits at all, I find it strange that the (for 
> example) minimum for body weight is 3.0, while the minimum for brain weight 
> is 26.0000.  They're 3 and 26, respectively, in the original data 
> file.  Why should one be reported to one decimal digit and the other to 
> 4?  This pattern follows throughout.

[The fix I committed is different (passing digits=12, in fact).]

The issue is that the whole column is printed to 8 sf (which you asked
for but got 7 in S+6.0) and all the numbers are aligned on the decimal
point.  The column is formatted, not each number, which is what one
usually wants.  As the mean really is (I presume since there are 15
animals) 761.2, only one dp is needed to give 8 sf.

> I don't think this is an R problem since a similar pattern (but with 3 
> decimal digits) occurs in S-Plus.
> 
> 
> S-Plus 6.0 (Win, Beta) OUTPUT
>  > summary(mammals, digits=8)
>     Body.Weight      Brain.Weight
>      Min.:   3.0      Min.:  26.000
>   1st Qu.:  35.5   1st Qu.: 138.500
>    Median: 100.0    Median: 406.000
>      Mean: 761.2      Mean:1000.467
>   3rd Qu.: 493.0   3rd Qu.: 667.500
>      Max.:6654.0      Max.:5712.000
>  >
> 
> Obviously this isn't a giant problem, but one that a student first brought 
> to my attention and I've been scratching my head trying to puzzle it out 
> ever since.
> 
> R-1.2.1 (Windows, Binary after Brian Ripley's code fix)
> 
>  > summary(mammals, digits=8)
>         Name    Body.Weight      Brain.Weight
>   Red Fox :1   Min.   :   3.0   Min.   :  26.0000
>   Pig     :1   1st Qu.:  35.5   1st Qu.: 138.5000
>   Man     :1   Median : 100.0   Median : 406.0000
>   Kangaroo:1   Mean   : 761.2   Mean   :1000.4667
>   Jaguar  :1   3rd Qu.: 493.0   3rd Qu.: 667.5000
>   Horse   :1   Max.   :6654.0   Max.   :5712.0000
>   (Other) :9

[...]

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gordon.harrington at uni.edu  Thu Feb  1 23:25:37 2001
From: gordon.harrington at uni.edu (gordon.harrington@uni.edu)
Date: Thu, 01 Feb 2001 16:25:37 -0600 (CST)
Subject: [R] R 1.2.1 - read.table - factors problem...
In-Reply-To: <3A77F5A8.319DEE6D@ozemail.com.au>
Message-ID: <ML-3.3.981066337.9124.gordon@rats.localdomain>

Thanks to Jim Lemon and Thomas Lumley for instructing me by respectively
re-emphasizing that NA's sometimes can be difficult to detect and showing me
how to coerce from unwanted mode assignments. It should have occurred to me
that functions, such as complete.cases(), that search for NA's are only reading
cells, not processing the contents as do functions such as sum(). My data set
was a very large one from a 30 year old archive and turned out to have a few
invisible NA's whose encoding completely escaped me but which blocked
processing. 

 

Gordon M. Harrington		Mail:	3720 Village Place, #6308
Professor Emeritus			Waterloo, IA 50702-5848
University of Northern Iowa 	Phone:	319-291-8535
gordon.harrington at uni.edu	Fax:	319-291-8491
dryfly at aya.yale.edu			319-291-8324

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From MAILER-DAEMON at stat.math.ethz.ch  Thu Feb  1 20:56:43 2001
From: MAILER-DAEMON at stat.math.ethz.ch (Mail Delivery Subsystem)
Date: Thu, 1 Feb 2001 14:56:43 -0500
Subject: [R] Generalized Error Distribution (Exponential Power) CDF?
Message-ID: <01020114564306.07145@ewilliam.ucsd.edu>

Hi all,

Just a random shot in the dark.  Does anyone have/know of a function for the 
CDF of a generalized error dist?  


-- 
Elliot Williams (ewilliams at ucsd.edu)
Economics Department, UC San Diego
-------------- next part --------------
An embedded message was scrubbed...
From: Elliot Williams <ewilliams at ucsd.edu>
Subject: [R] Generalized Error Distribution (Exponential Power) CDF?
Date: Thu, 1 Feb 2001 13:04:09 -0500
Size: 1311
Url: https://stat.ethz.ch/pipermail/r-help/attachments/20010201/5c6a9c77/attachment.mht

From andy at arcriswell.com  Fri Feb  2 08:22:29 2001
From: andy at arcriswell.com (Andrew Criswell)
Date: Fri, 2 Feb 2001 14:22:29 +0700
Subject: [R] Finding a gsub like function in S+ 2000
Message-ID: <000701c08ce8$f8d20a70$bdd994cb@andrew8gpipq9q>

Hello All:

In R 1.2.0, one can easily change characters in a string using, for example,
the following command,

gsub("-"," ",c("1-7-1997","12-21-1997"))
[1]  "1 7 1997"    "12 21 1997"

Is there a similar command with S+ 2000?

Thank you,
ANDREW

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Fri Feb  2 08:44:51 2001
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 2 Feb 2001 08:44:51 +0100
Subject: [R] R 1.2.1 - read.table - factors problem or is it  a data.frame problem
In-Reply-To: <x2y9vqfq0s.fsf@blueberry.kubism.ku.dk>
References: <ML-3.3.980932297.7349.gordon@rats.localdomain>
	<200102011339.f11Ddws09809@water.cc.mcgill.ca>
	<x2y9vqfq0s.fsf@blueberry.kubism.ku.dk>
Message-ID: <14970.25971.917459.453403@gargle.gargle.HOWL>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard at biostat.ku.dk> writes:

    PD> "Heberto Ghezzo" <Heberto at meakins.lan.mcgill.ca> writes:
    >> I have some problems with read.table and floats turning up as 
    >> factors. In my case it was not a blank in the file but an unary minus!!
    >> so 3.24,-57.23,... the 3.24 is numeric but -57.23 is a factor.
    >> Yes I turned it into a numeric with as.numeric(as.character(.. but I 
    >> think it will be better to modify somehow the read.table/read.csv 
    >> code.
    >> Thanks anyway.

    PD> That certainly sounds like a bug, but I can't reproduce it:

    PD> $ cat > xx  
    PD> -1,2,3
    PD> 1,-2,3
    PD> $ R
    PD> ...
    >> summary(read.csv('xx',head=F))
    PD> V1             V2           V3   
    PD> Min.   :-1.0   Min.   :-2   Min.   :3  
    PD> 1st Qu.:-0.5   1st Qu.:-1   1st Qu.:3  
    PD> Median : 0.0   Median : 0   Median :3  
    PD> Mean   : 0.0   Mean   : 0   Mean   :3  
    PD> 3rd Qu.: 0.5   3rd Qu.: 1   3rd Qu.:3  
    PD> Max.   : 1.0   Max.   : 2   Max.   :3  

    PD> Could you give us some further details on the setup that is causing
    PD> that effect?

Heberto uses a Windoze mailer, hence probably ..

It could be that the problem comes from the fact that some win users
use non-ASCII minus characters (i.e. not "minus", but these find them on
their keyboards when typing in the data ..):

In iso_8859-1 aka "latin-1" (of which most European MSWin localizations are
   said to be a superset) there are three kinds of "-" :

       Oct   Dec   Hex   Char   Description
       --------------------------------------------------------------------
       055   45    2D     -     Minux  [The standard ASCII one]

       255   173   AD     ­     SOFT HYPHEN

       257   175   AF     ¯     MACRON

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Feb  2 08:56:54 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 2 Feb 2001 07:56:54 +0000 (GMT)
Subject: [R] Finding a gsub like function in S+ 2000
In-Reply-To: <000701c08ce8$f8d20a70$bdd994cb@andrew8gpipq9q>
Message-ID: <Pine.GSO.4.31.0102020743570.24089-100000@auk.stats>

On Fri, 2 Feb 2001, Andrew Criswell wrote:

> Hello All:
>
> In R 1.2.0, one can easily change characters in a string using, for example,
> the following command,
>
> gsub("-"," ",c("1-7-1997","12-21-1997"))
> [1]  "1 7 1997"    "12 21 1997"

There is also chartr for that exact purpose.

chartr("-"," ",c("1-7-1997","12-21-1997"))

> Is there a similar command with S+ 2000?

Funny you should mention that. `S Programming' (did you ever buy it)
p.31 has a limited substitute for sub, and the same idea will do gsub.

However, since what you actually want is to substitute single chars not
regexps, you could use use AsciiToInt and substring.  Take a look at the
help function on S-PLUS 2000 to see how it could be done (from memory).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Feb  2 09:11:11 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 2 Feb 2001 08:11:11 +0000 (GMT)
Subject: [R] R 1.2.1 - read.table - factors problem or is it  a data.frame
 problem
In-Reply-To: <14970.25971.917459.453403@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.31.0102020759140.24089-100000@auk.stats>

On Fri, 2 Feb 2001, Martin Maechler wrote:

> >>>>> "PD" == Peter Dalgaard BSA <p.dalgaard at biostat.ku.dk> writes:
>
>     PD> "Heberto Ghezzo" <Heberto at meakins.lan.mcgill.ca> writes:
>     >> I have some problems with read.table and floats turning up as
>     >> factors. In my case it was not a blank in the file but an unary minus!!
>     >> so 3.24,-57.23,... the 3.24 is numeric but -57.23 is a factor.
>     >> Yes I turned it into a numeric with as.numeric(as.character(.. but I
>     >> think it will be better to modify somehow the read.table/read.csv
>     >> code.
>     >> Thanks anyway.
>
>     PD> That certainly sounds like a bug, but I can't reproduce it:
>
>     PD> $ cat > xx
>     PD> -1,2,3
>     PD> 1,-2,3
>     PD> $ R
>     PD> ...
>     >> summary(read.csv('xx',head=F))
>     PD> V1             V2           V3
>     PD> Min.   :-1.0   Min.   :-2   Min.   :3
>     PD> 1st Qu.:-0.5   1st Qu.:-1   1st Qu.:3
>     PD> Median : 0.0   Median : 0   Median :3
>     PD> Mean   : 0.0   Mean   : 0   Mean   :3
>     PD> 3rd Qu.: 0.5   3rd Qu.: 1   3rd Qu.:3
>     PD> Max.   : 1.0   Max.   : 2   Max.   :3
>
>     PD> Could you give us some further details on the setup that is causing
>     PD> that effect?
>
> Heberto uses a Windoze mailer, hence probably ..
>
> It could be that the problem comes from the fact that some win users
> use non-ASCII minus characters (i.e. not "minus", but these find them on
> their keyboards when typing in the data ..):
>
> In iso_8859-1 aka "latin-1" (of which most European MSWin localizations are
>    said to be a superset) there are three kinds of "-" :
>
>        Oct   Dec   Hex   Char   Description
>        --------------------------------------------------------------------
>        055   45    2D     -     Minux  [The standard ASCII one]
>
>        255   173   AD     ­     SOFT HYPHEN
>
>        257   175   AF     ¯     MACRON

Actually, not as far as I can find out (and I have been working on
encodings for the next releases of R). The first really is hyphen in both
latin-1 and WinAnsi (the main Windows char set: the other, WinOEM, is not a
superset of latin-1).  Minus is not in the WinAnsi char set, but it does
have hyphen at 45 and 173 (it has two spaces too).

Unfortunately Adobe's ISOLatin1 encoding for postscript is not the same as
latin-1. That does have minus at 45 and (real) hyphen at 173.

As Windows NT/2000 machines support Unicode, on those the set of
possible inputs is much wider and I don't think R will cope with
Unicode-encoded files.  In Unicode minus is at 138 (and hyphen at 45).

It's a possible explanation, but then I don't think
as.numeric(as.character( would work.  My guess was that there was some
other non-printing character in that field, but that has the same
counter-argument.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From paradis at isem.univ-montp2.fr  Fri Feb  2 10:37:52 2001
From: paradis at isem.univ-montp2.fr (Emmanuel Paradis)
Date: Fri, 02 Feb 2001 10:37:52 +0100
Subject: [R] Rotated mtext
Message-ID: <3.0.32.20010202103751.008ffca0@162.38.183.200>

At 10:02 01/02/01 -0600, you wrote:
>I seem to remember this coming up before, but I can't find it any messages
I've
>saved or in the archives (searching by subject). I want to rotate mtext so
that
>it's perpendicular to the right side. I tried srt=90 and lots of other
values,
>but it seems to be ignored. Is there a way to do this?
>______________________________________________________________________
>Stuart Luppescu         -=-=-  University of Chicago

Try to change the graphical parameter "las" to:

	par(las=1)


Emmanuel Paradis


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mineoeli at unipa.it  Fri Feb  2 11:16:09 2001
From: mineoeli at unipa.it (Prof. Angelo Mineo)
Date: Fri, 2 Feb 2001 11:16:09 +0100
Subject: [R] Generalized Error Distribution (Exponential Power) CDF?
In-Reply-To: <01020114564306.07145@ewilliam.ucsd.edu>
Message-ID: <14970.35049.14669.135046@gargle.gargle.HOWL>


Hi Elliot,
I have a very short library in R that has routines (and related help pages)
to compute the density function, the distribution function, the quantiles
and to generate pseudo-random numbers for the following distribution:

f(x) = 1/(2*p^(1/p)*Gamma(1+1/p)*sigma)*exp[-(abs(x - mi)^p/(p*sigma^p)]
with p>=1.

If you (or anybody in this list) are interested to this library, I can send
it to you.

---------------------------------------------------------------
Prof. Angelo M. Mineo

Istituto di Statistica - Facolta' di Economia
Universita' degli Studi di Palermo
Viale delle Scienze
90128 Palermo - ITALY

tel.  : +39 091 6626239
fax   : +39 091 485726
e-mail: mineoeli at unipa.it
e-mail: elio.mineo at economia.unipa.it
Web   : http://statistica.economia.unipa.it/Elio
----------------------------------------------------------------



-----Messaggio originale-----
Da: owner-r-help at stat.math.ethz.ch
[mailto:owner-r-help at stat.math.ethz.ch]Per conto di Mail Delivery
Subsystem (by way of Elliot Williams <ewilliams at ucsd.edu>)
Inviato: giovedì 1 febbraio 2001 20.57
A: R-Help
Oggetto: [R] Generalized Error Distribution (Exponential Power) CDF?



Hi all,

Just a random shot in the dark.  Does anyone have/know of a function for the
CDF of a generalized error dist?


--
Elliot Williams (ewilliams at ucsd.edu)
Economics Department, UC San Diego

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hans.bury at pandora.be  Fri Feb  2 13:19:54 2001
From: hans.bury at pandora.be (Erik Bury)
Date: Fri, 2 Feb 2001 13:19:54 +0100
Subject: [R] R problem
Message-ID: <000a01c08d12$732e0f20$ef00a8c0@pandora.be>

hello!! i'm starting with R and i have some big problems:when i try to take a notepad document (or word) i can't put it into R!!!!
i tried : read.table("nameofmyfile.dat") but it doesn't work!!!!! my computer says:error in file(file, "r"): cannot open file "nameofmyfile"
I think i have to save my notepad file on another location....can u help me?????
thank u very much
veerle bury
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20010202/7207213b/attachment.html

From arnholt at math.appstate.edu  Fri Feb  2 15:03:10 2001
From: arnholt at math.appstate.edu (Alan Arnholt)
Date: Fri, 2 Feb 2001 09:03:10 -0500 (EST)
Subject: [R] R problem
In-Reply-To: <000a01c08d12$732e0f20$ef00a8c0@pandora.be>
Message-ID: <SIMEON.10102020910.A@arnholt.math.appstate.edu>

I assume you are using a windows machine.....You need to 
specify exactly where you are reading your data from.  

Suppose nameofmyfile.dat is on your A:\ drive, then you 
might type:

eriksdata <- read.table("A:/nameofmyfile.dat")




On Fri, 2 Feb 2001 13:19:54 +0100 Erik Bury 
<hans.bury at pandora.be> wrote:

> hello!! i'm starting with R and i have some big problems:when i try to take a notepad document (or word) i can't put it into R!!!!
> i tried : read.table("nameofmyfile.dat") but it doesn't work!!!!! my computer says:error in file(file, "r"): cannot open file "nameofmyfile"
> I think i have to save my notepad file on another location....can u help me?????
> thank u very much
> veerle bury

----------------------
Alan T. Arnholt
Associate Professor
Dept. of Mathematical Sciences
TEL: (828) 262-2863
FAX: (828) 265-8617
arnholt at math.appstate.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Marwan.Khawaja at fafo.no  Fri Feb  2 15:34:32 2001
From: Marwan.Khawaja at fafo.no (Khawaja Marwan)
Date: Fri, 2 Feb 2001 15:34:32 +0100 
Subject: No subject
Message-ID: <B5DEF8EC8E9D3444A94206C3C9949FC32BA514@mailsrv01.Fafo.No>

Does anyone know if there is a function to do power calculation for Wilcoxon
rank test in R.
Thanks for your help.

Marwan Khawaja
Fafo Institute for Applied Social Science
Borggt. 2B, P.O.Box 2947 T?yen
N-0608 Oslo, Norway

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From paradis at isem.univ-montp2.fr  Fri Feb  2 16:05:12 2001
From: paradis at isem.univ-montp2.fr (Emmanuel Paradis)
Date: Fri, 02 Feb 2001 16:05:12 +0100
Subject: [R] R problem
Message-ID: <3.0.32.20010202160508.00914d70@162.38.183.200>

At 13:19 02/02/01 +0100, you wrote: 
>>>>
hello!! i'm starting with R and i have some big  problems:when i try to
take a notepad document (or word) i can't put it into  R!!!! i tried :
read.table("nameofmyfile.dat") but it  doesn't work!!!!! my computer
says:error in file(file, "r"): cannot open file  "nameofmyfile" I think i
have to save my notepad file on another  location....can u help me?????
thank u very much veerle bury 


This isn't such a big problem! You can change your working directory with
setwd(), eg:

	setwd("c:/data/R")

(note that you MUST use / and not \, even under Windows)

To check what is the current working directory:

	getwd()

Another possibility is that you give the path to your data file, eg:

	read.table("c:/where/my/data/live/nameofmyfile.dat")

Finally, your data file must be saved in ASCII format.


Emmanuel Paradis
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dsweeney at nmrc.ucc.ie  Fri Feb  2 16:10:24 2001
From: dsweeney at nmrc.ucc.ie (Dermot MacSweeney)
Date: Fri, 2 Feb 2001 15:10:24 +0000 (GMT)
Subject: [R] History
Message-ID: <200102021510.PAA01768@achill.nmrc.ucc.ie>

Hi,

I upgraded to version 1.2.1 and now the up/down arrows for recalling commands no 
longer works. Is there a work around for this?

> version
         _                   
platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status                       
major    1                   
minor    2.1                 
year     2001                
month    01                  
day      15                  
language R           

Thanks in advance,
Dermot MacSweeney


**************************************************************

Dermot MacSweeney			NMRC, 
Email: dsweeney at nmrc.ucc.ie		Lee Maltings, 
Tel: +353 21 904178			Prospect Row, 
Fax: +353 21 270271			Cork, 
WWW: http://nmrc.ucc.ie			Ireland

**************************************************************


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Feb  2 16:28:01 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 2 Feb 2001 15:28:01 +0000 (GMT)
Subject: [R] History
In-Reply-To: <200102021510.PAA01768@achill.nmrc.ucc.ie>
Message-ID: <Pine.GSO.4.31.0102021527210.15830-100000@toucan.stats>

On Fri, 2 Feb 2001, Dermot MacSweeney wrote:

> Hi,
>
> I upgraded to version 1.2.1 and now the up/down arrows for recalling commands no
> longer works. Is there a work around for this?

Did you check that readline was picked up in the configure?  Works for me
on that platform.

>
> > version
>          _
> platform sparc-sun-solaris2.7
> arch     sparc
> os       solaris2.7
> system   sparc, solaris2.7
> status
> major    1
> minor    2.1
> year     2001
> month    01
> day      15
> language R
>
> Thanks in advance,
> Dermot MacSweeney
>
>
> **************************************************************
>
> Dermot MacSweeney			NMRC,
> Email: dsweeney at nmrc.ucc.ie		Lee Maltings,
> Tel: +353 21 904178			Prospect Row,
> Fax: +353 21 270271			Cork,
> WWW: http://nmrc.ucc.ie			Ireland
>
> **************************************************************
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From amurta at ipimar.pt  Fri Feb  2 15:35:54 2001
From: amurta at ipimar.pt (Alberto Murta)
Date: Fri, 02 Feb 2001 14:35:54 +0000
Subject: [R] out of memory?
Message-ID: <3A7AC5CA.52C3315F@ipimar.pt>

Dear all

I have a data.frame with 915 rows and 7 columns and I want to aggregate
one of the variables using 'aggregate.data.frame': 

my.new.data <- aggregate.data.frame(my.data$VAR1, by =
list(my.data$VAR2,...,my.data$VAR7), FUN = max)

however I get the message: "Error: vector memory exhausted (limit
reached?)".
Since I didn't set a limit I assume that's the machine memory (516 MB +
130 MB of swap). Is this normal for a data.frame of those dimensions? 

platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    1
minor    2.0
year     2000
month    12
day      15
language R


 
                        Alberto G. Murta                      
        IPIMAR - Institute of Fisheries and Sea Research
          Avenida de Brasilia, 1449-006 Lisboa, Portugal       
Tel: +351 213027062; Fax: +351 213015849; http://www.ipimar.pt
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From baron at cattell.psych.upenn.edu  Fri Feb  2 17:37:34 2001
From: baron at cattell.psych.upenn.edu (Jonathan Baron)
Date: Fri, 2 Feb 2001 11:37:34 -0500 (EST)
Subject: [R] History
Message-ID: <200102021637.LAA21288@cattell.psych.upenn.edu>

You need to install the readline package somewhere in the path.
But probably you've done this, or it wouldn't have worked before.
Perhaps the configuration file needs to know where the readline
package is.  

(See http://cnswww.cns.cwru.edu/~chet/readline/INSTALL for
installation of the readline package.)

Here is (some of) what my Sysadmin said about installing readline
when we did it.  (I installed R, but he installed readline.)

------

I installed readline (and the history library that comes with
it), specifying the suffixe "4.1" (so we can most easily
distinguish between different versions), and specified /pkg as
the directory to install.  I was going to try to compile with the
shared library next, but did not in view of what happened.  None
of the file names include the version number, and I didn't want
to try and rename them just to find out if shared library works
(the README file states "There is skeletal support for building
shared versions of the Readline and History libraries")

I expected the program to go in /pkg/bin, with libraries in
/pkg/lib, as the README suggested would happen.  There was no
program installed in /pkg/bin.  Two library files were installed
in /pkg/lib; more files in /pkg/include, /pkg/info, and /pkg/man.
So, it looks to me like it installed correctly.

-----

It did work, and the R installation program did find it in these
directories without further instruction.  R itself was installed
in /pkg.

Jon


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gb at stat.umu.se  Fri Feb  2 17:35:43 2001
From: gb at stat.umu.se (gb)
Date: Fri, 2 Feb 2001 17:35:43 +0100 (CET)
Subject: [R] rbinom
In-Reply-To: <Pine.GSO.4.31.0102021527210.15830-100000@toucan.stats>
Message-ID: <Pine.LNX.4.30.0102021723150.28419-100000@tal.stat.umu.se>

Can someone tell me what I am doing wrong, or if there is
a bug in rbinom? I was simulating power in Fisher's
exact test and the normal approximation when I got strange
results. I have a stripped version here:

-------------------------------------------------------
simulate <- function(replicates = 1000, size = 25,
                     p1 = 0.5, p2 = 0.5){
  p.is.zero <- 0
  p.is.one <- 0
  for (i in 1:replicates){
    x1 <- rbinom(1, size, p1)
    x2 <- rbinom(1, size, p2)
    p1 <- x1 / size
    p2 <- x2 / size
    p  <- ( p1 + p2 ) / 2

    if ( p == 0 ) p.is.zero <- p.is.zero + 1
    if ( p == 1 ) p.is.one <- p.is.one + 1

  }
  return(p.is.zero = p.is.zero,
         p.is.one = p.is.one)
}
----------------------------------------------------------
I run the function a few times and get
> simulate()
$p.is.zero
[1] 0

$p.is.one
[1] 0

> simulate()
$p.is.zero
[1] 0

$p.is.one
[1] 0

> simulate()
$p.is.zero
[1] 0

$p.is.one
[1] 0

> simulate()
$p.is.zero
[1] 975              ##!!!

$p.is.one
[1] 0

That is, I suddenly get highly extreme outcomes. And this behaviour
repeats. Sometimes with p == 1 a lot of times.

I run this on RH7.0, gcc 2.95.2, R-1.2.1

G?ran
-- 
 G?ran Brostr?m                      tel: +46 90 786 5223
 professor                           fax: +46 90 786 6614
 Department of Statistics            http://www.stat.umu.se/egna/gb/
 Ume? University
 SE-90187 Ume?, Sweden             e-mail: gb at stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Fri Feb  2 17:56:14 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Fri, 2 Feb 2001 08:56:14 -0800 (PST)
Subject: [R] rbinom
In-Reply-To: <Pine.LNX.4.30.0102021723150.28419-100000@tal.stat.umu.se>
Message-ID: <Pine.A41.4.21.0102020853060.177760-100000@homer07.u.washington.edu>

On Fri, 2 Feb 2001, gb wrote:

> Can someone tell me what I am doing wrong, or if there is
> a bug in rbinom? I was simulating power in Fisher's
> exact test and the normal approximation when I got strange
> results. I have a stripped version here:
> 
> -------------------------------------------------------
> simulate <- function(replicates = 1000, size = 25,
>                      p1 = 0.5, p2 = 0.5){
>   p.is.zero <- 0
>   p.is.one <- 0
>   for (i in 1:replicates){
>     x1 <- rbinom(1, size, p1)
>     x2 <- rbinom(1, size, p2)
>     p1 <- x1 / size
>     p2 <- x2 / size
>     p  <- ( p1 + p2 ) / 2
> 
>     if ( p == 0 ) p.is.zero <- p.is.zero + 1
>     if ( p == 1 ) p.is.one <- p.is.one + 1
> 
>   }
>   return(p.is.zero = p.is.zero,
>          p.is.one = p.is.one)
> }

You should be getting p.is.zero about 1/4 of the time (and similarly for
p.is.one), which agrees with what I get.

Try plotting p1 & p2 against i.

p1 & p2 are following a markov process  with absorbing states at 0 and 1,
so they will quite quickly end up there.  If both end up at zero, you get
p=0, if both at 1 you get p=1.

My guess is that you didn't mean to call two different things 'p1'...

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle
^^^^^^^^^^^^^^^^^^^^^^^^ 
 NOTE NEW EMAIL ADDRESS

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gb at stat.umu.se  Fri Feb  2 21:03:48 2001
From: gb at stat.umu.se (gb)
Date: Fri, 2 Feb 2001 21:03:48 +0100 (CET)
Subject: [R] rbinom
In-Reply-To: <Pine.A41.4.21.0102020853060.177760-100000@homer07.u.washington.edu>
Message-ID: <Pine.LNX.4.30.0102022058270.28547-100000@tal.stat.umu.se>

On Fri, 2 Feb 2001, Thomas Lumley wrote:

> On Fri, 2 Feb 2001, gb wrote:
>
> > Can someone tell me what I am doing wrong, or if there is
> > a bug in rbinom? I was simulating power in Fisher's
> > exact test and the normal approximation when I got strange
> > results. I have a stripped version here:
> >
> > -------------------------------------------------------
> > simulate <- function(replicates = 1000, size = 25,
> >                      p1 = 0.5, p2 = 0.5){
> >   p.is.zero <- 0
> >   p.is.one <- 0
> >   for (i in 1:replicates){
> >     x1 <- rbinom(1, size, p1)
> >     x2 <- rbinom(1, size, p2)
> >     p1 <- x1 / size
> >     p2 <- x2 / size
> >     p  <- ( p1 + p2 ) / 2
[snip]

> You should be getting p.is.zero about 1/4 of the time (and similarly for
> p.is.one), which agrees with what I get.
>
> Try plotting p1 & p2 against i.
>
> p1 & p2 are following a markov process  with absorbing states at 0 and 1,
> so they will quite quickly end up there.  If both end up at zero, you get
> p=0, if both at 1 you get p=1.
>
> My guess is that you didn't mean to call two different things 'p1'...

Thanks! Oh dear,... My only excuse is that it is late Friday night.

Thanks also to Matthew Austin for pointing out my error.

G?ran

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fitzpatrickd at boystown.org  Fri Feb  2 21:11:06 2001
From: fitzpatrickd at boystown.org (Fitzpatrick, Denis F)
Date: Fri, 2 Feb 2001 14:11:06 -0600 
Subject: [R] test for end of file?
Message-ID: <14F189704F520D4F8B316B922D5046D97C55F7@nrhexc1.btnrh.boystown.org>

I want to read in text files, processing a line at a time in a while loop,
and exiting the loop when the entire file has been read.  The files are too
large to suck in as a piece.
\
for example in :

while (line.I.just.read.in != end.of.file){
	dostuff()
	}

what is end.of.file? 
or what would be the functional alternative to this little snippet?

thanks

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Ko-Kang at xtra.co.nz  Fri Feb  2 21:26:04 2001
From: Ko-Kang at xtra.co.nz (Ko-Kang@xtra.co.nz)
Date: Sat, 3 Feb 2001 09:26:04 +1300
Subject: [R] R problem
References: <000a01c08d12$732e0f20$ef00a8c0@pandora.be>
Message-ID: <004501c08d56$5e2598c0$216d36d2@KoKang>

You need to specify the abosulte path of the file.  Otherwise R will assume your file is in R_HOME/bin directory.

Ko-Kang Wang
  ----- Original Message ----- 
  From: Erik Bury 
  To: R-help at lists.R-project.org 
  Sent: Saturday, February 03, 2001 1:19 AM
  Subject: [R] R problem


  hello!! i'm starting with R and i have some big problems:when i try to take a notepad document (or word) i can't put it into R!!!!
  i tried : read.table("nameofmyfile.dat") but it doesn't work!!!!! my computer says:error in file(file, "r"): cannot open file "nameofmyfile"
  I think i have to save my notepad file on another location....can u help me?????
  thank u very much
  veerle bury
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20010203/bda3d0e6/attachment.html

From ripley at stats.ox.ac.uk  Fri Feb  2 22:07:03 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 2 Feb 2001 21:07:03 +0000 (GMT)
Subject: [R] R problem
In-Reply-To: <004501c08d56$5e2598c0$216d36d2@KoKang>
Message-ID: <Pine.GSO.4.31.0102022106070.16377-100000@auk.stats>

On Sat, 3 Feb 2001 Ko-Kang at xtra.co.nz wrote:

> You need to specify the abosulte path of the file.  Otherwise R will assume your file is in R_HOME/bin directory.

Actually, whatever you set as the working directory in the shortcut.

NDR


>
> Ko-Kang Wang
>   ----- Original Message -----
>   From: Erik Bury
>   To: R-help at lists.R-project.org
>   Sent: Saturday, February 03, 2001 1:19 AM
>   Subject: [R] R problem
>
>
>   hello!! i'm starting with R and i have some big problems:when i try to take a notepad document (or word) i can't put it into R!!!!
>   i tried : read.table("nameofmyfile.dat") but it doesn't work!!!!! my computer says:error in file(file, "r"): cannot open file "nameofmyfile"
>   I think i have to save my notepad file on another location....can u help me?????
>   thank u very much
>   veerle bury
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Fri Feb  2 22:40:51 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Feb 2001 22:40:51 +0100
Subject: [R] test for end of file?
In-Reply-To: "Fitzpatrick, Denis F"'s message of "Fri, 2 Feb 2001 14:11:06 -0600"
References: <14F189704F520D4F8B316B922D5046D97C55F7@nrhexc1.btnrh.boystown.org>
Message-ID: <x2k878rcf0.fsf@blueberry.kubism.ku.dk>

"Fitzpatrick, Denis F" <fitzpatrickd at boystown.org> writes:

> I want to read in text files, processing a line at a time in a while loop,
> and exiting the loop when the entire file has been read.  The files are too
> large to suck in as a piece.
> \
> for example in :
> 
> while (line.I.just.read.in != end.of.file){
> 	dostuff()
> 	}
> 
> what is end.of.file? 
> or what would be the functional alternative to this little snippet?

Have a peek at

help(connection)
help(readLines)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From j.logsdon at lancaster.ac.uk  Sat Feb  3 16:45:58 2001
From: j.logsdon at lancaster.ac.uk (j.logsdon@lancaster.ac.uk)
Date: Sat, 3 Feb 2001 15:45:58 +0000 (GMT)
Subject: [R] Multi-sample clustering
In-Reply-To: <53829589BB93D4119B5800B0D03DCD21A002@EXGAGRP5>
Message-ID: <Pine.LNX.4.10.10102031249270.892-100000@mercury.quantex>

I am looking for what is described in Mardia, Kent and Bibby as
multi-sample clustering where the point is to establish the clusters of
already-defined groups - actually with different variances (MKB describe
the homogeneous case).  That is, the case where it is the pre-determined
groups (of different sizes) that need to be clustered, not the individual
data.

Having trawled through the R-pages and also an extensive Google search, I
haven't found anything to wet my appetite.

Have I missed anything in the present libraries (quite possible) or can
anyone direct me to (preferably) R code (or perhaps S-Plus) that may help?

TIA

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tov at ece.cmu.edu  Sat Feb  3 20:48:55 2001
From: tov at ece.cmu.edu (Thomas Vogels)
Date: 03 Feb 2001 14:48:55 -0500
Subject: [R] callback environment for Tk buttons
Message-ID: <pxk877cztk.fsf@infiniti.ece.cmu.edu>


Hi.  I'm running into problems with using R functions as callback
commands for buttons in Tk.

The following Tcl/Tk script creates three buttons.  If you press hello
it prints hello world. If you press HALLO it prints HALLO WORLD.
Not exciting, but I need an example...

    set tt [toplevel .tt]
    foreach i {"hello" "HALLO"} {
        pack [button $tt.b$i -text $i -command "puts $i"] -fill x
    }
    pack [button $tt.dismiss -text dismiss -command "destroy $tt"] -fill x

If I translate this to R, I get:
    tt <- tktoplevel()
    for (i in c("hello", "HALLO"))
        tkpack (tkbutton (tt, text=i,
                          command=function()cat(i,"world\n")), fill="x")
    tkpack (tkbutton (tt, text="dismiss",
                      command=function()tkdestroy(tt)), fill="x")

which is dumb, because the value of i is now always "HALLO" and either
button will cause R to 'cat' HALLO world.

The second try works better:
    tt <- tktoplevel()
    for (i in c("hello", "HALLO")) {
        cb <- eval(substitute(function()cat(w,"world\n"), list(w=i)))
        tkpack (tkbutton (tt, text=i, command=cb), fill="x")
    }
    tkpack (tkbutton (tt, text="dismiss",
                      command=function()tkdestroy(tt)), fill="x")

Now cb stores the value of i in the environment that it comes with.

At last the question:  am I missing the easy way out?  Or did I jump
out of the frying pan into the fire?  I.e. out of Tcl's quoting hell
into R's scoping rules ;-)

Thanks,
  -tom

-- 
mailto:tov at ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From luke at stat.umn.edu  Sat Feb  3 21:32:38 2001
From: luke at stat.umn.edu (Luke Tierney)
Date: Sat, 3 Feb 2001 14:32:38 -0600 (CST)
Subject: [R] callback environment for Tk buttons
In-Reply-To: <pxk877cztk.fsf@infiniti.ece.cmu.edu> from Thomas Vogels at "Feb
 3, 2001 02:48:55 pm"
Message-ID: <200102032032.f13KWcW08772@muskrat.stat.umn.edu>

Thomas Vogels wrote:
> 
> Hi.  I'm running into problems with using R functions as callback
> commands for buttons in Tk.
> 
> The following Tcl/Tk script creates three buttons.  If you press hello
> it prints hello world. If you press HALLO it prints HALLO WORLD.
> Not exciting, but I need an example...
> 
>     set tt [toplevel .tt]
>     foreach i {"hello" "HALLO"} {
>         pack [button $tt.b$i -text $i -command "puts $i"] -fill x
>     }
>     pack [button $tt.dismiss -text dismiss -command "destroy $tt"] -fill x
> 
> If I translate this to R, I get:
>     tt <- tktoplevel()
>     for (i in c("hello", "HALLO"))
>         tkpack (tkbutton (tt, text=i,
>                           command=function()cat(i,"world\n")), fill="x")
>     tkpack (tkbutton (tt, text="dismiss",
>                       command=function()tkdestroy(tt)), fill="x")
> 
> which is dumb, because the value of i is now always "HALLO" and either
> button will cause R to 'cat' HALLO world.
> 
> The second try works better:
>     tt <- tktoplevel()
>     for (i in c("hello", "HALLO")) {
>         cb <- eval(substitute(function()cat(w,"world\n"), list(w=i)))
>         tkpack (tkbutton (tt, text=i, command=cb), fill="x")
>     }
>     tkpack (tkbutton (tt, text="dismiss",
>                       command=function()tkdestroy(tt)), fill="x")
> 

I would avoid using eval(substitute... -- it will almost always lead
to code that is less clear and harder to get right or maintain than
using scoping rules.  Two ways to do this with scoping: you can define
a function that captures the value of i you want (I've renamed it j in
the funciton)

      tt <- tktoplevel()
      mkcb<-function(j) {
         cb <- eval(substitute(function()cat(w,"world\n"), list(w=j)))
         tkpack (tkbutton (tt, text=j, command=cb), fill="x")
      }
      for (i in c("hello", "HALLO")) mkcb(i)
      tkpack (tkbutton (tt, text="dismiss",
                        command=function()tkdestroy(tt)), fill="x")

If you don't want to create a function, use local:

     tt <- tktoplevel()
     for (i in c("hello", "HALLO"))
         local({
             j <- i
             cb <- eval(substitute(function()cat(w,"world\n"), list(w=j)))
             tkpack (tkbutton (tt, text=j, command=cb), fill="x")
         })
     tkpack (tkbutton (tt, text="dismiss",
                       command=function()tkdestroy(tt)), fill="x")
 
 
Scoping of the for loop variable is one of the few places where
scoping in R is a bit tricky because there are two possible ways you
could imagine it working, and you just need to know what R does.
In R

	for (i in x) ...

creates a new variable i in the calling environment (tom level in this
case) and changes the value of that variable each time through the
loop.  After the loop its value is the final value it had in the loop.

Another possibility would have been for each iteration to create a
local environment with a new variable named i with value equal to the
element of x for the current iteration. If this is the way R had
chosen to go then your first example would have been fine.  But for a
variety of reasons R went the other way, so if you want to capture the
current value of the iteration variable you need to do it by creating
a new variable with scope limited to the iteration, which is what both
these approaches do.

> At last the question:  am I missing the easy way out?  Or did I jump
> out of the frying pan into the fire?  I.e. out of Tcl's quoting hell
> into R's scoping rules ;-)
> 

I  guess the answer is yes :-)

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke at stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From sapsi at rediffmail.com  Sat Feb  3 21:39:31 2001
From: sapsi at rediffmail.com (Saptarshi The Dude Guha)
Date: 3 Feb 2001 20:39:31 -0000
Subject: [R] Random Nos
Message-ID: <20010203203931.29542.qmail@mailweb8.rediffmail.com>

R-lings,
I know the algo for Laplace generation, but arent there any packages available. 
Also, i'm trying to check for the Bernoulli sums obey the CLT, but though i calculate 2000 values of
           S(n)-n*p
          ----------
           sqrt(n*p*(1-p))

for p=.5 and n=45, this fails both KS test and shapiro test.
Why??
Thanks
sapsi
ISI,Delhi

please reply to sapsi at bigfoot.com



_____________________________________________________
Chat with your friends as soon as they come online. Get Rediff Bol at
http://bol.rediff.com




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Feb  3 22:03:32 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 3 Feb 2001 21:03:32 +0000 (GMT)
Subject: [R] Random Nos
In-Reply-To: <20010203203931.29542.qmail@mailweb8.rediffmail.com>
Message-ID: <Pine.GSO.4.31.0102032050240.19404-100000@toucan.stats>

On 3 Feb 2001, Saptarshi The Dude Guha wrote:

> R-lings,
> I know the algo for Laplace generation, but arent there any packages available.

It's one line in R!  Or at least, one algorithm is, for there are many.

> Also, i'm trying to check for the Bernoulli sums obey the CLT, but though i calculate 2000 values of
>            S(n)-n*p
>           ----------
>            sqrt(n*p*(1-p))
>
> for p=.5 and n=45, this fails both KS test and shapiro test.
> Why??

Maybe because the CLT is a limit for large n?  Or maybe you did not use
the correct distribution theory for those tests?  That for the KS test
applies to samples from a continuous distribution, and yours is quite
discrete.  I'll leave you to look this up.  The rate of divergence from
the CLT is known almost exactly in this case, and I suspect that the
distribution of the Smirnov statistic is too.

At its simplest, if you take a large enough sample you will reject
any null hypothesis outside the realm of theory.  Even if you had
generated using rnorm() in R, the distribution is slightly non-normal
(and slightly non-independent between samples).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From sapsi at rediffmail.com  Sat Feb  3 22:18:51 2001
From: sapsi at rediffmail.com (Saptarshi The Dude Guha)
Date: 3 Feb 2001 21:18:51 -0000
Subject: [R] CLT
Message-ID: <20010203211851.6919.qmail@mailweb3.rediffmail.com>

R'mms,

Prof. Brian Ripley, wrote
>>Maybe because the CLT is a limit for large n? Or maybe >>you did not use
>>the correct distribution theory for those tests? That >>for the KS test
>>applies to samples from a continuous distribution, an >>yours is quite

I quite agree that the Bernoulli is discrete, but i have read that Sn(sum of n bernoulli variables with prob of success=p) will converge in law to Normal, if we standardize these as i mentioned before, this will be N(0,1), I admit it wont work for 45, but it still doesnt pass the KS test for 200, and i thought this test in practise worked for discrete. I wrote the same program in Mathematica, where the Null is accepted at n=170-200.

Thanks
sapsi

sapsi at bigfoot.com


_____________________________________________________
Chat with your friends as soon as they come online. Get Rediff Bol at
http://bol.rediff.com




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Sun Feb  4 00:45:08 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Feb 2001 00:45:08 +0100
Subject: [R] callback environment for Tk buttons
In-Reply-To: Luke Tierney's message of "Sat, 3 Feb 2001 14:32:38 -0600 (CST)"
References: <200102032032.f13KWcW08772@muskrat.stat.umn.edu>
Message-ID: <x2vgqrz5yz.fsf@blueberry.kubism.ku.dk>

Luke Tierney <luke at stat.umn.edu> writes:

> > If I translate this to R, I get:
> >     tt <- tktoplevel()
> >     for (i in c("hello", "HALLO"))
> >         tkpack (tkbutton (tt, text=i,
> >                           command=function()cat(i,"world\n")), fill="x")
> >     tkpack (tkbutton (tt, text="dismiss",
> >                       command=function()tkdestroy(tt)), fill="x")

> If you don't want to create a function, use local:
> 
>      tt <- tktoplevel()
>      for (i in c("hello", "HALLO"))
>          local({
>              j <- i
>              cb <- eval(substitute(function()cat(w,"world\n"), list(w=j)))
>              tkpack (tkbutton (tt, text=j, command=cb), fill="x")
>          })
>      tkpack (tkbutton (tt, text="dismiss",
>                        command=function()tkdestroy(tt)), fill="x")
>  

Hmm. I thought you didn't want eval(substitute(..))?

How about 

    tt <- tktoplevel()
    for (i in c("hello", "HALLO")) {
	cb <- local({i<-i; function()cat(i,"world\n")})
        tkpack (tkbutton (tt, text=i,
                          command=cb), fill="x")
    }
    tkpack (tkbutton (tt, text="dismiss",
                      command=function()tkdestroy(tt)), fill="x")


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From luke at stat.umn.edu  Sun Feb  4 13:03:36 2001
From: luke at stat.umn.edu (Luke Tierney)
Date: Sun, 4 Feb 2001 06:03:36 -0600 (CST)
Subject: [R] callback environment for Tk buttons
In-Reply-To: <x2vgqrz5yz.fsf@blueberry.kubism.ku.dk> from Peter Dalgaard BSA
 at "Feb 4, 2001 00:45:08 am"
Message-ID: <200102041203.f14C3au14223@muskrat.stat.umn.edu>

Peter Dalgaard BSA wrote:
> Luke Tierney <luke at stat.umn.edu> writes:
> 
> > > If I translate this to R, I get:
> > >     tt <- tktoplevel()
> > >     for (i in c("hello", "HALLO"))
> > >         tkpack (tkbutton (tt, text=i,
> > >                           command=function()cat(i,"world\n")), fill="x")
> > >     tkpack (tkbutton (tt, text="dismiss",
> > >                       command=function()tkdestroy(tt)), fill="x")
> 
> > If you don't want to create a function, use local:
> > 
> >      tt <- tktoplevel()
> >      for (i in c("hello", "HALLO"))
> >          local({
> >              j <- i
> >              cb <- eval(substitute(function()cat(w,"world\n"), list(w=j)))
> >              tkpack (tkbutton (tt, text=j, command=cb), fill="x")
> >          })
> >      tkpack (tkbutton (tt, text="dismiss",
> >                        command=function()tkdestroy(tt)), fill="x")
> >  
> 
> Hmm. I thought you didn't want eval(substitute(..))?
> 
> How about 
> 
>     tt <- tktoplevel()
>     for (i in c("hello", "HALLO")) {
> 	cb <- local({i<-i; function()cat(i,"world\n")})
>         tkpack (tkbutton (tt, text=i,
>                           command=cb), fill="x")
>     }
>     tkpack (tkbutton (tt, text="dismiss",
>                       command=function()tkdestroy(tt)), fill="x")
> 
> 

THank you, peter.

That was the fryingpan and the fire of sut and paste. :-)

luke


-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke at stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tov at ece.cmu.edu  Sun Feb  4 20:23:59 2001
From: tov at ece.cmu.edu (Thomas Vogels)
Date: 04 Feb 2001 14:23:59 -0500
Subject: [R] callback environment for Tk buttons
In-Reply-To: Peter Dalgaard BSA's message of "04 Feb 2001 00:45:08 +0100"
References: <200102032032.f13KWcW08772@muskrat.stat.umn.edu>
	<x2vgqrz5yz.fsf@blueberry.kubism.ku.dk>
Message-ID: <pxu26a6yls.fsf@infiniti.ece.cmu.edu>


Luke, Peter,

thanks for the explanation of how to generate the callbacks and how
the for-loop works.  This helped a lot to understand what was going
on.

Regards,
  -tom

-- 
mailto:tov at ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dieter.menne at menne-biomed.de  Sun Feb  4 21:20:38 2001
From: dieter.menne at menne-biomed.de (Dieter Menne)
Date: Sun, 4 Feb 2001 21:20:38 +0100
Subject: [R] quinModel S != R
Message-ID: <NBBBIJMBGLHMKHGCPFJKOECGCGAA.dieter.menne@menne-biomed.de>

Dear friends of nlme,

Running quinModel (Pinheiro/Bates page 380) on R (current release, windows)
gives:

Nonlinear mixed-effects model fit by maximum likelihood
  Model: conc ~ quinModel(Subject, time, conc, dose, interval, lV, lKa,
lCl)
  Data: Quinidine
  Log-likelihood: -497
  Fixed: lV + lKa + lCl ~ 1
    lV    lKa    lCl
 5.382 -0.273  2.470

Random effects:
 Formula: list(lV ~ 1, lCl ~ 1)
 Level: Subject
 Structure: Diagonal
              lV   lCl Residual
StdDev: 4.43e-12 0.321     0.76


lV is confusing, since the book examples says it should be 0.31173.

Other question: is the source of nlme_one_comp_open (or similar) available?
I would like to learn how to do these models in c, but could not find the
code. (To avoid RTFM: I know about r-ext.pdf, but a special modelxXX example
would make life easier).

Dieter

---------------------------------------
Dr. Dieter Menne
Biomed Software
72074 T?bingen
Tel (49) (7071) 52176
FAX (49) (7071) 55 10 46
dieter.menne at menne-biomed.de
www.menne-biomed.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From s-luppescu at uchicago.edu  Sun Feb  4 22:35:12 2001
From: s-luppescu at uchicago.edu (s-luppescu@uchicago.edu)
Date: Sun, 04 Feb 2001 15:35:12 -0600 (CST)
Subject: [R] Rotated mtext
In-Reply-To: <3.0.32.20010202103751.008ffca0@162.38.183.200>
Message-ID: <XFMail.20010204153512.s-luppescu@uchicago.edu>

On 02-Feb-2001 Emmanuel Paradis wrote:
> At 10:02 01/02/01 -0600, you wrote:
>>I seem to remember this coming up before, but I can't find it any messages
> I've
>>saved or in the archives (searching by subject). I want to rotate mtext so
> that
>>it's perpendicular to the right side. I tried srt=90 and lots of other
> values,
>>but it seems to be ignored. Is there a way to do this?
>>______________________________________________________________________
>>Stuart Luppescu         -=-=-  University of Chicago
> 
> Try to change the graphical parameter "las" to:
> 
>       par(las=1)

I tried this, but whatever I put in for las I always got the text parallell to
the vertical axis. I put las=1 and las=2 both in the mtext call and in par()
with the same results each time.
______________________________________________________________________
Stuart Luppescu         -=-=-  University of Chicago
ºÍÊ¸ ¤ÈÃÒÆàÈþ¤ÎÉã(EUC)  -=-=-  s-luppescu at uchicago.edu
http://www.consortium-chicago.org/people/sl/sl.html
PGP public key: www.consortium-chicago.org/people/sl/pubkey.asc
       ICQ #21172047  AIM: psycho7070
"Ubi non accusator, ibi non judex."

(Where there is no police, there is no speed limit.)
                -- Roman Law, trans. Petr Beckmann (1971)
>> Sent on 04-Feb-2001 at 15:34:01 with xfmail
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gordon.harrington at uni.edu  Sun Feb  4 23:33:35 2001
From: gordon.harrington at uni.edu (gordon.harrington@uni.edu)
Date: Sun, 04 Feb 2001 16:33:35 -0600 (CST)
Subject: [R] R 1.2.1 - read.table - factors problem or is it  a data.frame
 problem
In-Reply-To: <Pine.GSO.4.31.0102020759140.24089-100000@auk.stats>
Message-ID: <ML-3.3.981326015.1541.gordon@rats.localdomain>

Brian Ripley notes:
> On Fri, 2 Feb 2001, Martin Maechler wrote:
> 
> > >>>>> "PD" == Peter Dalgaard BSA <p.dalgaard at biostat.ku.dk> writes:
> >
> >     PD> "Heberto Ghezzo" <Heberto at meakins.lan.mcgill.ca> writes:
> >     >> I have some problems with read.table and floats turning up as
> >     >> factors. In my case it was not a blank in the file but an unary
> >     >> minus!! so 3.24,-57.23,... the 3.24 is numeric but -57.23 is a
> >     >> factor. Yes I turned it into a numeric with
> >     >> as.numeric(as.character(.. but I think it will be better to modify
> >     >> somehow the read.table/read.csv code.
> >     >> Thanks anyway.
> >
> >     PD> That certainly sounds like a bug, but I can't reproduce it:
> >
> >     PD> $ cat > xx
> >     PD> -1,2,3
> >     PD> 1,-2,3
> >     PD> $ R
> >     PD> ...
> >     >> summary(read.csv('xx',head=F))
> >     PD> V1             V2           V3
> >     PD> Min.   :-1.0   Min.   :-2   Min.   :3
> >     PD> 1st Qu.:-0.5   1st Qu.:-1   1st Qu.:3
> >     PD> Median : 0.0   Median : 0   Median :3
> >     PD> Mean   : 0.0   Mean   : 0   Mean   :3
> >     PD> 3rd Qu.: 0.5   3rd Qu.: 1   3rd Qu.:3
> >     PD> Max.   : 1.0   Max.   : 2   Max.   :3
> >
> >     PD> Could you give us some further details on the setup that is
> >     causing PD> that effect?
> >
> > Heberto uses a Windoze mailer, hence probably ..
> >
> > It could be that the problem comes from the fact that some win users
> > use non-ASCII minus characters (i.e. not "minus", but these find them on
> > their keyboards when typing in the data ..):
> >
> > In iso_8859-1 aka "latin-1" (of which most European MSWin localizations
> > are    said to be a superset) there are three kinds of "-" :
> >
> >        Oct   Dec   Hex   Char   Description
> >       
> >        --------------------------------------------------------------------
055   45    2D     -     Minux  [The standard ASCII one]
> >
> >        255   173   AD     ­     SOFT HYPHEN
> >
> >        257   175   AF     ¯     MACRON
> 
> Actually, not as far as I can find out (and I have been working on
> encodings for the next releases of R). The first really is hyphen in both
> latin-1 and WinAnsi (the main Windows char set: the other, WinOEM, is not a
> superset of latin-1).  Minus is not in the WinAnsi char set, but it does
> have hyphen at 45 and 173 (it has two spaces too).
> 
> Unfortunately Adobe's ISOLatin1 encoding for postscript is not the same as
> latin-1. That does have minus at 45 and (real) hyphen at 173.
> 
> As Windows NT/2000 machines support Unicode, on those the set of
> possible inputs is much wider and I don't think R will cope with
> Unicode-encoded files.  In Unicode minus is at 138 (and hyphen at 45).
> 
> It's a possible explanation, but then I don't think
> as.numeric(as.character( would work.  My guess was that there was some
> other non-printing character in that field, but that has the same
> counter-argument.
> 
I had sought help a few days earlier for a problem with some similarities. In
my case I had failed to recognize the existence of some NA's. I had a data set
which originated in 1966. Some IBM statistical packages of the era encoded NA's
as binary negative zeros. These were propogated in passes through the SAS first
edition. I can't remember how they were then encoded in EBCDIC by different
FORTRAN compilers, nor ultimately in ASCII conversions. However they relied on
program filters and were otherwise invisible.

 

Gordon M. Harrington		Mail:	3720 Village Place, #6308
Professor Emeritus			Waterloo, IA 50702-5848
University of Northern Iowa 	Phone:	319-291-8535
gordon.harrington at uni.edu	Fax:	319-291-8491
dryfly at aya.yale.edu			319-291-8324

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bates at stat.wisc.edu  Mon Feb  5 03:45:33 2001
From: bates at stat.wisc.edu (Douglas Bates)
Date: 04 Feb 2001 20:45:33 -0600
Subject: [R] quinModel S != R
In-Reply-To: "Dieter Menne"'s message of "Sun, 4 Feb 2001 21:20:38 +0100"
References: <NBBBIJMBGLHMKHGCPFJKOECGCGAA.dieter.menne@menne-biomed.de>
Message-ID: <6rbsshetki.fsf@franz.stat.wisc.edu>

"Dieter Menne" <dieter.menne at menne-biomed.de> writes:


> Running quinModel (Pinheiro/Bates page 380) on R (current release, windows)
> gives:
> 
> Nonlinear mixed-effects model fit by maximum likelihood
>   Model: conc ~ quinModel(Subject, time, conc, dose, interval, lV, lKa,
> lCl)
>   Data: Quinidine
>   Log-likelihood: -497
>   Fixed: lV + lKa + lCl ~ 1
>     lV    lKa    lCl
>  5.382 -0.273  2.470
> 
> Random effects:
>  Formula: list(lV ~ 1, lCl ~ 1)
>  Level: Subject
>  Structure: Diagonal
>               lV   lCl Residual
> StdDev: 4.43e-12 0.321     0.76
> 
> lV is confusing, since the book examples says it should be 0.31173.

There are different optimization algorithms being used in R and S.
The value from S is more sensible.  Trying to prevent the optimization
algorithm in R from taking unreasonably large steps inside nlme is one
of the things we will work on.

> Other question: is the source of nlme_one_comp_open (or similar) available?
> I would like to learn how to do these models in c, but could not find the
> code. (To avoid RTFM: I know about r-ext.pdf, but a special modelxXX example
> would make life easier).

You will need the source for the nlme package, which is available from
the CRAN archives.  That routine is defined in nlme/src/nlme.c
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From paradis at isem.univ-montp2.fr  Mon Feb  5 11:46:05 2001
From: paradis at isem.univ-montp2.fr (Emmanuel Paradis)
Date: Mon, 05 Feb 2001 11:46:05 +0100
Subject: [R] Rotated mtext
Message-ID: <3.0.32.20010205114604.0090b820@162.38.183.200>

At 15:35 04/02/01 -0600, you wrote:
>On 02-Feb-2001 Emmanuel Paradis wrote:
>> At 10:02 01/02/01 -0600, you wrote:
>>>I seem to remember this coming up before, but I can't find it any messages
>> I've
>>>saved or in the archives (searching by subject). I want to rotate mtext so
>> that
>>>it's perpendicular to the right side. I tried srt=90 and lots of other
>> values,
>>>but it seems to be ignored. Is there a way to do this?
>>>______________________________________________________________________
>>>Stuart Luppescu         -=-=-  University of Chicago
>> 
>> Try to change the graphical parameter "las" to:
>> 
>>       par(las=1)
>
>I tried this, but whatever I put in for las I always got the text
parallell to
>the vertical axis. I put las=1 and las=2 both in the mtext call and in par()
>with the same results each time.

This works here both on Solaris 2.7 and WinNT 4.0 (R-1.2.1):

par(las=1)
plot(1:10)
mtext("top", side=3)     # the text is 
mtext("right", side=4)   # horizontal

par(las=2)
plot(1:10)
mtext("top", side=3)     # the text is 
mtext("right", side=4)   # perpendicular to the axis


Emmanuel Paradis
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bates at stat.wisc.edu  Mon Feb  5 03:45:33 2001
From: bates at stat.wisc.edu (Douglas Bates)
Date: 04 Feb 2001 20:45:33 -0600
Subject: [R] quinModel S != R
In-Reply-To: "Dieter Menne"'s message of "Sun, 4 Feb 2001 21:20:38 +0100"
References: <NBBBIJMBGLHMKHGCPFJKOECGCGAA.dieter.menne@menne-biomed.de>
Message-ID: <6rbsshetki.fsf@franz.stat.wisc.edu>

"Dieter Menne" <dieter.menne at menne-biomed.de> writes:


> Running quinModel (Pinheiro/Bates page 380) on R (current release, windows)
> gives:
> 
> Nonlinear mixed-effects model fit by maximum likelihood
>   Model: conc ~ quinModel(Subject, time, conc, dose, interval, lV, lKa,
> lCl)
>   Data: Quinidine
>   Log-likelihood: -497
>   Fixed: lV + lKa + lCl ~ 1
>     lV    lKa    lCl
>  5.382 -0.273  2.470
> 
> Random effects:
>  Formula: list(lV ~ 1, lCl ~ 1)
>  Level: Subject
>  Structure: Diagonal
>               lV   lCl Residual
> StdDev: 4.43e-12 0.321     0.76
> 
> lV is confusing, since the book examples says it should be 0.31173.

There are different optimization algorithms being used in R and S.
The value from S is more sensible.  Trying to prevent the optimization
algorithm in R from taking unreasonably large steps inside nlme is one
of the things we will work on.

> Other question: is the source of nlme_one_comp_open (or similar) available?
> I would like to learn how to do these models in c, but could not find the
> code. (To avoid RTFM: I know about r-ext.pdf, but a special modelxXX example
> would make life easier).

You will need the source for the nlme package, which is available from
the CRAN archives.  That routine is defined in nlme/src/nlme.c
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From petzoldt at rcs.urz.tu-dresden.de  Mon Feb  5 12:26:45 2001
From: petzoldt at rcs.urz.tu-dresden.de (Thomas Petzoldt)
Date: Mon, 05 Feb 2001 12:26:45 +0100
Subject: [R] get vector data from contour
Message-ID: <3A7E8DF5.2F737836@rcs.urz.tu-dresden.de>

I have carried out a spatial interpolation (Kriging) using surf.gls() 

The contour plot looks very plausible and the image plot is o.k too. 
The problem is, hovever, that I need the vectorized isoplethes, as in
contour().
Unfortunately, I found no solution to get the internal data from
contour().

Is there a possibility to extract contour lines as x-y-polygon from a
grid without hacking plot3d.c?

Thank you in advance!

Thomas P.


-- 
Thomas Petzoldt
Dresden University of Technology
Institute for Hydrobiology        
mailto:petzoldt at rcs.urz.tu-dresden.de  
01062 Dresden                      http://www.tu-dresden.de/fghhihb/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From petr.pikal at precheza.cz  Mon Feb  5 14:07:33 2001
From: petr.pikal at precheza.cz (Petr Pikal)
Date: Mon, 5 Feb 2001 14:07:33 +0100
Subject: [R] read.table("clipboard")
Message-ID: <3A7EB3A5.21291.33AAAC@localhost>

Hallo

Please I have a question regarding read.table. I wonder if there is any 
possibility to read a content of  'clipboard' directly  (let say as a copy 
from Excel like programs) or if it is always necessary to save a file in 
an appropropriate format.

I use 1.2.0 W version with W95.

Thank you very much.

Best regards
Petr Pikal
Precheza a.s.
Nabr.Dr.E.Benese 24
tel: 00420 641 25 2257
     +420 (0)724 008 364
     petr.pikal at precheza.cz
     p.pik at volny.cz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Feb  5 14:16:38 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 5 Feb 2001 13:16:38 +0000 (GMT)
Subject: [R] read.table("clipboard")
Message-ID: <200102051316.NAA27660@toucan.stats.ox.ac.uk>


> From: "Petr Pikal" <petr.pikal at precheza.cz>
> Date: Mon, 5 Feb 2001 14:07:33 +0100
> 
> Please I have a question regarding read.table. I wonder if there is any 
> possibility to read a content of  'clipboard' directly  (let say as a copy 
> from Excel like programs) or if it is always necessary to save a file in 
> an appropropriate format.

It's only possible to read text files with read.table.  (Even text-like
connections are buffered to a textConnection.)

It is possible to write code to do this, so if anyone wants to 
contribute it....

To read parts of Excel files I would recommend RODBC: you don't need
Excel itself as Windows ODBC has a text driver for .xls files.

> I use 1.2.0 W version with W95.

Please upgrade to 1.2.1.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Heberto at meakins.lan.mcgill.ca  Mon Feb  5 15:03:51 2001
From: Heberto at meakins.lan.mcgill.ca (Heberto Ghezzo)
Date: Mon, 5 Feb 2001 09:03:51 -0500
Subject: [R] Read.table
Message-ID: <200102051354.f15DsTs20830@water.cc.mcgill.ca>

After reading the comments on my problem of floats turned into 
factors i went back to my original file in Excell, save as csv, then 
reopen with a 'different' text editor to delete all spaces and now the 
files are read OK.
I assume that when I stripped all the spaces from the file a funny 
character, non printable, crept in.
Thanks to B.D.Ripley,M.Maechler,P.Dalgaard and T.Lumley for 
their comments. By the way I am using R1.2.1 on W98V2
R. Heberto Ghezzo  Ph.D.
Meakins-Christie Labs
McGill University
Montreal - Canada
heberto at meakins.lan.mcgill.ca
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From s-luppescu at uchicago.edu  Mon Feb  5 15:52:35 2001
From: s-luppescu at uchicago.edu (s-luppescu@uchicago.edu)
Date: Mon, 05 Feb 2001 08:52:35 -0600 (CST)
Subject: [R] Rotated mtext
In-Reply-To: <3.0.32.20010205113904.00907370@162.38.183.200>
Message-ID: <XFMail.20010205085235.s-luppescu@uchicago.edu>

On 05-Feb-2001 Emmanuel Paradis wrote:
> At 10:28 05/02/01 +0100, Uwe Ligges wrote:
>>s-luppescu at uchicago.edu wrote:
>>> On 02-Feb-2001 Emmanuel Paradis wrote:
>>> > Try to change the graphical parameter "las" to:
>>> >
>>> >       par(las=1)
>>> 
>>> I tried this, but whatever I put in for las I always got the text
> parallell to
>>> the vertical axis. I put las=1 and las=2 both in the mtext call and in
> par()
>>> with the same results each time.
>>
>>Works for me (R-1.2.1, NT4.0):
>>
>> par(las=1)
>> plot(1:10)
>> mtext("A", 4, line=1)
> 
> This works for me too on Solaris 2.7 (R-1.2.1):
> 
> par(las=1)
> plot(1:10)
> mtext("top", side=3)     # the text is 
> mtext("right", side=4)   # horizontal
> 
> par(las=2)
> plot(1:10)
> mtext("top", side=3)     # the text is 
> mtext("right", side=4)   # perpendicular to the axis

This simple example works for me, too. I think my problem is that I have some
other parameters on the line which prevents las or srt from working correctly.
Here's the line I'm trying to print:

>   mtext(rev(rownames(mdfname.2))[i], side=4,  outer=T, 
+  at=(((i-1) * 2 + 1) /(2* rowdim)), cex=0.7, las=2, srt=90)

Maybe it's the at that's preventing it from working. Is there a way around this?
______________________________________________________________________
Stuart Luppescu         -=-=-  University of Chicago
$(B:MJ8$HCRF`H~$NIc(B        -=-=-  s-luppescu at uchicago.edu
http://www.consortium-chicago.org/people/sl.html
http://musuko.uchicago.edu/pubkey.asc for PGP Public Key
ICQ #21172047  AIM: psycho7070
A soft answer turneth away wrath; but grievous words stir up anger.
                -- Proverbs 15:1
>> Sent on 05-Feb-2001 at 08:45:32 with xfmail
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hxue at stat.wvu.edu  Mon Feb  5 15:52:18 2001
From: hxue at stat.wvu.edu (Hengyi Xue)
Date: Mon, 5 Feb 2001 09:52:18 -0500
Subject: [R] Build R as a shared library
Message-ID: <001b01c08f83$3f24fbd0$5a6fb69d@ideal.wvu.edu>

Hi,

I am trying to use the Omegahat R-Java interface to call R functions from Java. The author said R need to be built as a shared library for that to work. Has anybody done this and how exactly can R be built as a shared library?

Any help will be appreciated.

Hengyi Xue
Research Associate
Department of Statistics
West Virginia University
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20010205/5d8f2db2/attachment.html

From christian.hoffmann at wsl.ch  Mon Feb  5 16:57:30 2001
From: christian.hoffmann at wsl.ch (Christian Hoffmann)
Date: Mon, 05 Feb 2001 16:57:30 +0100
Subject: [R] packages, help
Message-ID: <3.0.6.32.20010205165730.00980d20@mail.wsl.ch>

Hi,

Using help under help.start() is working fine (html)

Q1:
using  >  ?solve  results in the message

"sh: ~/R/tmp/R4f32S1cfb: cannot open"

displayed in the XEmacs buffer "help[R](solve)". BUT there exists a file

 R.R4f32S167e

in that directory. (not quite the same name). 

Does the "sh: " prefix suggest that the shell "sh" is run, although my
default shell is "csh" or even "tcsh"?

OR: do I lack the right permissions for this tmp file to be opened??


Q2:
What can I do to fix

> loadhistory
function (file = ".Rhistory") 
invisible(.Internal(loadhistory(file)))
> loadhistory()
Error in loadhistory(file) : no history mechanism available

".Rhistory" exists in my directory.


Q3:
I created a personal package "x" under R-1.2.1 on Solaris 2.5.1. Now I have
problems accessing it. I am new to this business and do have some problems.

I have  U:\R\Sources\chlib\  with subdirectories
  \data,  \man,  and \R
and in U:\R\Sources I executed

U:\R\Sources> R CMD build chlib .    and it said:

  building `chlib_0.1.tar.gz'

resulting in a file
  U:\R\Sources\chlib_0.1.tar.gz   5 050 kB

U:\R\Sources> R CMD check chlib .  did work.

Q3a:  
Trying
   library(chlib, lib.loc = "~/R/Sources" )
Warning message: 
Package  `chlib' contains no R code in: library(chlib, lib.loc =
"~/R/Sources") 

Q3b:
library(chlib, lib.loc = "~/R/Sources", logical.return = TRUE, keep.source
= T )
[1] TRUE
Warning message: 
Package  `chlib' contains no R code in: library(chlib, lib.loc =
"~/R/Sources", logical.return = TRUE,  
> 


SO much for now.


Thanks for help.
--christian


Dr.sc.math.Christian W. Hoffmann
Mathematics and Statistical Computing
Landscape Modeling and Web Applications
Swiss Federal Research Institute WSL 
Zuercherstrasse 111
CH-8903 Birmensdorf, Switzerland
phone: ++41-1-739 22 77    fax: ++41-1-739 22 15
e-mail: Hoffmann at WSL.CH
www: http://www.wsl.ch/staff/christian.hoffmann/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From b.stapley at icrf.icnet.uk  Mon Feb  5 16:52:39 2001
From: b.stapley at icrf.icnet.uk (Benjamin Stapley)
Date: Mon, 05 Feb 2001 15:52:39 +0000
Subject: [R] SVD of complex matrices
Message-ID: <3A7ECC47.ED4E1FB6@icrf.icnet.uk>

Is there a way to determine the SVD of a complex matrix using R?
(I'm using v1.0.1 and svd() won't do the trick).
I know LAPACK has a function to do this.

Thanks

--
Ben Stapley
Biomolecular Modelling Lab
Imperial Cancer Research

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From s-luppescu at uchicago.edu  Mon Feb  5 17:40:57 2001
From: s-luppescu at uchicago.edu (s-luppescu@uchicago.edu)
Date: Mon, 05 Feb 2001 10:40:57 -0600 (CST)
Subject: [R] Bar widths in barplots don't change
Message-ID: <XFMail.20010205104057.s-luppescu@uchicago.edu>

Is the width= parameter in barplot() supposed to work? I couldn't get it to
work in my plot, and even in the example,

data(VADeaths, package = "base")
barplot(VADeaths, width=rep(0.1, 4))

the plot looks identical regardless of what I put in for the width. I looked at
the source for barplot() and it looks like it SHOULD work (but what do I know).
Am I doing something wrong?
______________________________________________________________________
Stuart Luppescu         -=-=-  University of Chicago
$(B:MJ8$HCRF`H~$NIc(B        -=-=-  s-luppescu at uchicago.edu
http://www.consortium-chicago.org/people/sl.html
http://musuko.uchicago.edu/pubkey.asc for PGP Public Key
ICQ #21172047  AIM: psycho7070
I am not an Economist.  I am an honest man!
                -- Paul McCracken
>> Sent on 05-Feb-2001 at 09:36:49 with xfmail
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Mon Feb  5 17:52:17 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 5 Feb 2001 08:52:17 -0800 (PST)
Subject: [R] Bar widths in barplots don't change
In-Reply-To: <XFMail.20010205104057.s-luppescu@uchicago.edu>
Message-ID: <Pine.A41.4.21.0102050851300.90972-100000@homer07.u.washington.edu>

On Mon, 5 Feb 2001 s-luppescu at uchicago.edu wrote:

> Is the width= parameter in barplot() supposed to work? I couldn't get it to
> work in my plot, and even in the example,
> 
> data(VADeaths, package = "base")
> barplot(VADeaths, width=rep(0.1, 4))
> 
> the plot looks identical regardless of what I put in for the width. I looked at
> the source for barplot() and it looks like it SHOULD work (but what do I know).

width= controls relative widths of bars. You probably want space=

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle
	

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From s-luppescu at uchicago.edu  Mon Feb  5 18:30:38 2001
From: s-luppescu at uchicago.edu (s-luppescu@uchicago.edu)
Date: Mon, 05 Feb 2001 11:30:38 -0600 (CST)
Subject: [R] Bar widths in barplots don't change
In-Reply-To: <Pine.A41.4.21.0102050851300.90972-100000@homer07.u.washington.edu>
Message-ID: <XFMail.20010205113038.s-luppescu@uchicago.edu>

On 05-Feb-2001 Thomas Lumley wrote:
> On Mon, 5 Feb 2001 s-luppescu at uchicago.edu wrote:
> 
>> Is the width= parameter in barplot() supposed to work? I couldn't get it to
>> work in my plot, and even in the example,
>> 
>> data(VADeaths, package = "base")
>> barplot(VADeaths, width=rep(0.1, 4))
>> 
>> the plot looks identical regardless of what I put in for the width. I looked
>> at
>> the source for barplot() and it looks like it SHOULD work (but what do I
>> know).
> 
> width= controls relative widths of bars. You probably want space=

I set space=0 because I want no space BETWEEN bars. But I only have two bars
that are rather short, so I want to make the width of the bars narrower so the
bars don't look so squat. Isn't it width= I want to manipulate?
______________________________________________________________________
Stuart Luppescu         -=-=-  University of Chicago
$(B:MJ8$HCRF`H~$NIc(B        -=-=-  s-luppescu at uchicago.edu
http://www.consortium-chicago.org/people/sl.html
http://musuko.uchicago.edu/pubkey.asc for PGP Public Key
ICQ #21172047  AIM: psycho7070
There is no security on this earth.  There is only opportunity.
                -- General Douglas MacArthur
>> Sent on 05-Feb-2001 at 11:29:00 with xfmail
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Mon Feb  5 18:33:00 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 5 Feb 2001 09:33:00 -0800 (PST)
Subject: [R] Bar widths in barplots don't change
In-Reply-To: <XFMail.20010205113038.s-luppescu@uchicago.edu>
Message-ID: <Pine.A41.4.21.0102050932120.90972-100000@homer07.u.washington.edu>

On Mon, 5 Feb 2001 s-luppescu at uchicago.edu wrote:

> On 05-Feb-2001 Thomas Lumley wrote:
> > On Mon, 5 Feb 2001 s-luppescu at uchicago.edu wrote:
> > 
> >> Is the width= parameter in barplot() supposed to work? I couldn't get it to
> >> work in my plot, and even in the example,
> >> 
> >> data(VADeaths, package = "base")
> >> barplot(VADeaths, width=rep(0.1, 4))
> >> 
> >> the plot looks identical regardless of what I put in for the width. I looked
> >> at
> >> the source for barplot() and it looks like it SHOULD work (but what do I
> >> know).
> > 
> > width= controls relative widths of bars. You probably want space=
> 
> I set space=0 because I want no space BETWEEN bars. But I only have two bars
> that are rather short, so I want to make the width of the bars narrower so the
> bars don't look so squat. Isn't it width= I want to manipulate?

In that case you probably want to manipulate the aspect ratio of the
whole plot. If it's got two bars and there's no space between them they
must fill up the available width.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jan_seidel at gmx.de  Mon Feb  5 19:11:58 2001
From: jan_seidel at gmx.de (Jan Seidel)
Date: Mon, 05 Feb 2001 19:11:58 +0100
Subject: [R] variable pattern
Message-ID: <3A7EECEE.239F54@gmx.de>

Suppose I've got p vectors x1, ..., xp each of length n merged in a (n x
p)-matrix X. 
Now I want to calculate the number of distinct values of row-vectors
(x_i1, ..., x_ip).
Is there a way to do this in R? Thanks in advance,

Jan.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ligges at statistik.uni-dortmund.de  Mon Feb  5 19:32:24 2001
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 5 Feb 2001 19:32:24 +0100 (CET)
Subject: [R] Rotated mtext
In-Reply-To: <XFMail.20010205085235.s-luppescu@uchicago.edu>
Message-ID: <Pine.LNX.4.21.0102051930310.884-100000@rechenknecht.statistik.uni-dortmund.de>

On Mon, 5 Feb 2001 s-luppescu at uchicago.edu wrote:

> On 05-Feb-2001 Emmanuel Paradis wrote:
> > At 10:28 05/02/01 +0100, Uwe Ligges wrote:
> >>s-luppescu at uchicago.edu wrote:
> >>> On 02-Feb-2001 Emmanuel Paradis wrote:
> >>> > Try to change the graphical parameter "las" to:
> >>> >
> >>> >       par(las=1)
> >>> 
> >>> I tried this, but whatever I put in for las I always got the text
> > parallell to
> >>> the vertical axis. I put las=1 and las=2 both in the mtext call and in
> > par()
> >>> with the same results each time.
> >>
> >>Works for me (R-1.2.1, NT4.0):
> >>
> >> par(las=1)
> >> plot(1:10)
> >> mtext("A", 4, line=1)

[SNIP]

> This simple example works for me, too. I think my problem is that I have some
> other parameters on the line which prevents las or srt from working correctly.
> Here's the line I'm trying to print:
> 
> >   mtext(rev(rownames(mdfname.2))[i], side=4,  outer=T, 
> +  at=(((i-1) * 2 + 1) /(2* rowdim)), cex=0.7, las=2, srt=90)
> 
> Maybe it's the at that's preventing it from working. Is there a way around this?

I cannot reproduce your problem. Could you provide a complete example,
please?

Remark:
There are two open problem reports (PR#726, PR#823) related to mtext() and
las settings. But both do not decribe your problem, I think.

Regards,
Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Feb  5 19:38:45 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 5 Feb 2001 18:38:45 +0000 (GMT)
Subject: [R] variable pattern
In-Reply-To: <3A7EECEE.239F54@gmx.de>
Message-ID: <Pine.GSO.4.31.0102051834530.282-100000@auk.stats>

On Mon, 5 Feb 2001, Jan Seidel wrote:

> Suppose I've got p vectors x1, ..., xp each of length n merged in a (n x
> p)-matrix X.
> Now I want to calculate the number of distinct values of row-vectors
> (x_i1, ..., x_ip).
> Is there a way to do this in R? Thanks in advance,

Completely distinct row vectors?  Take a look at the code of
merge.data.frame.  Something like

    bx <- matrix(as.character(a), nrow(a))
    bx <- drop(apply(bx, 1, function(x) paste(x, collapse = "\r")))
    length(unique(bx))

This turns each row into a single character string, and counts the unique
ones.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ihaka at stat.auckland.ac.nz  Mon Feb  5 20:45:20 2001
From: ihaka at stat.auckland.ac.nz (Ross Ihaka)
Date: Tue, 6 Feb 2001 08:45:20 +1300
Subject: [R] get vector data from contour
In-Reply-To: <3A7E8DF5.2F737836@rcs.urz.tu-dresden.de>; from petzoldt@Rcs1.urz.tu-dresden.de on Tue, Feb 06, 2001 at 00:26:45 +1300
References: <3A7E8DF5.2F737836@rcs.urz.tu-dresden.de>
Message-ID: <20010206084520.A309@arche.ihaka>


On 2001.02.06 00:26:45 +1300 Thomas Petzoldt wrote:

> I have carried out a spatial interpolation (Kriging) using surf.gls() 
> 
> The contour plot looks very plausible and the image plot is o.k too. 
> The problem is, hovever, that I need the vectorized isoplethes, as in
> contour().
> Unfortunately, I found no solution to get the internal data from
> contour().
> 
> Is there a possibility to extract contour lines as x-y-polygon from a
> grid without hacking plot3d.c?


I can't offer another solution, but I would be very interested in anything
you come up with. I would like to see all R graphics code separated into
computation and drawing components. This would make a number of things
easier - eg. replacing the current drawing system with something better.

I the case of contour, I can see a couple of issues. (1) joining contour
lines which intersect the boundary by following the boundary (2) dealing
with missing values.

	Ross

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From feldesmanm at pdx.edu  Mon Feb  5 21:33:04 2001
From: feldesmanm at pdx.edu (Marc Feldesman)
Date: Mon, 05 Feb 2001 12:33:04 -0800
Subject: [R] Removing "row.names"
Message-ID: <5.0.2.1.2.20010205121238.00a73b70@127.0.0.1>

I need to completely remove row.names from a dataframe.  Are there other 
ways to remove them (and not anything else) besides:

mydataframe<-data.frame(mydataframe, row.names=NULL)

I realize that this doesn't really remove the row.names; it merely replaces 
the current row.names vector with the numbers 1..nrow (in quotes).









=====================
Dr. Marc R. Feldesman
Professor and Chairman
Anthropology Department
Portland State University
1721 SW Broadway
Portland, Oregon 97201
email:  feldesmanm at pdx.edu
phone:  503-725-3081
fax:    503-725-3905
http://web.pdx.edu/~h1mf
PGP Key Available On Request
======================

"Anyway, no drug, not even alcohol, causes the fundamental ills of society.
If we're looking for the source of our troubles, we shouldn't test people
for drugs, we should test them for stupidity, ignorance, greed and love of
power."   P.J. O'Rourke

Powered by Optiplochoerus and Windows 2000 (scary isn't it?)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From znmeb at aracnet.com  Mon Feb  5 22:53:20 2001
From: znmeb at aracnet.com (M. Edward (Ed) Borasky)
Date: Mon, 5 Feb 2001 13:53:20 -0800 (PST)
Subject: [R] Histogram questions
In-Reply-To: <5.0.2.1.2.20010205121238.00a73b70@127.0.0.1>
Message-ID: <Pine.LNX.4.31.0102051340410.26568-100000@shell1.aracnet.com>

Questions on histograms:

1. When I run "hist" on a data set, the histogram object produced has two
variables, "$density" and "$intensities". These appear to be the same:

$intensities
[1] 1.7619226436 0.0360495682 0.1967705595 0.0000000000 0.0037551633
[6] 0.0000000000 0.0007510327 0.0007510327

$density
[1] 1.7619226436 0.0360495682 0.1967705595 0.0000000000 0.0037551633
[6] 0.0000000000 0.0007510327 0.0007510327

Why are they the same? Are both necessary?

2. I want to plot histograms that are normalized -- that is, the sum of the
intensities or density is 1.0, so the bars represent probabilities. As it's set
up now, I have to do this calculation manually. Why can't R do this when it
calculates the values? If I specify "probability=TRUE", I expect probabilities,
not some arbitrarily scaled value.

3. What would be even nicer is to have "hist" and "density" *both* scale their
outputs as probabilities, so they could be overlaid on a plot together. How
difficult is this to do?
--
znmeb at aracnet.com (M. Edward Borasky) http://www.aracnet.com/~znmeb

If there's nothing to astrology, how come so many famous men were born
on holidays?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Mon Feb  5 23:10:00 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 5 Feb 2001 14:10:00 -0800 (PST)
Subject: [R] Histogram questions
In-Reply-To: <Pine.LNX.4.31.0102051340410.26568-100000@shell1.aracnet.com>
Message-ID: <Pine.A41.4.21.0102051403170.90972-100000@homer07.u.washington.edu>

On Mon, 5 Feb 2001, M. Edward (Ed) Borasky wrote:

> Questions on histograms:
> 
> 1. When I run "hist" on a data set, the histogram object produced has two
> variables, "$density" and "$intensities". These appear to be the same:
> 
> $intensities
> [1] 1.7619226436 0.0360495682 0.1967705595 0.0000000000 0.0037551633
> [6] 0.0000000000 0.0007510327 0.0007510327
> 
> $density
> [1] 1.7619226436 0.0360495682 0.1967705595 0.0000000000 0.0037551633
> [6] 0.0000000000 0.0007510327 0.0007510327
> 
> Why are they the same? Are both necessary?

It says in help(hist)

   intensities: same as `density'. Deprecated, but retained for
          compatibility.

 
> 2. I want to plot histograms that are normalized -- that is, the sum of the
> intensities or density is 1.0, so the bars represent probabilities. As it's set
> up now, I have to do this calculation manually. Why can't R do this when it
> calculates the values? If I specify "probability=TRUE", I expect probabilities,
> not some arbitrarily scaled value.

A histogram, like a kernel density, estimates the density, not the
probability.  The bar heights would only add to 1 if the bars all had
width 1.  If you want a barplot, use barplot().
 
> 3. What would be even nicer is to have "hist" and "density" *both* scale their
> outputs as probabilities, so they could be overlaid on a plot together. How
> difficult is this to do?

They both *do* scale their outputs as probability densities so they *can*
be overlaid. They couldn't be overlaid if the bar heights added up to 1,
since then the histogram wouldn't be a density estimate.

Eg
 data(faithful)
 hist(faithful$eruptions,prob=TRUE)
 lines(density(faithful$eruptions))


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pdenis2 at home.com  Tue Feb  6 01:07:15 2001
From: pdenis2 at home.com (peter denisevich)
Date: Mon, 05 Feb 2001 16:07:15 -0800
Subject: [R] RWin 1.2.1:  Can't access sample datasets, e.g. MASS
Message-ID: <5.0.2.1.0.20010205155059.00a26210@mail>

I'm pretty sure I'll feel like [more of] an idiot but...
Using Rgui working in a fresh, blank directory.


 > require(MASS)
Loading required package: MASS
[1] TRUE
 > data(cabbages)
Warning message:
======> Data set `cabbages' not found in: data(cabbages)  <=====
 > ls()
[1] "last.warning"
 > search()
[1] ".GlobalEnv"    "package:MASS"  "package:ctest" "Autoloads"
[5] "package:base"
 > .lib.loc
[1] "D:/R-WIN/RW1021/library"
 > Sys.getenv("R_HOME")
              R_HOME
"D:\\R-WIN\\RW1021"
 > dir("D:\\R-WIN\\RW1021\\library\\MASS\\data")
  [1] "00Index"         "abbey.rda"       "accdeaths.rda"   "Aids2.rda"
  [5] "Animals.rda"     "anorexia.rda"    "austres.rda"     "beav1.rda"
   <snip, 'cabbages' IS there>

Same result for any other dataset.

All packages were installed in RW1021/library/<pkg>, some by manual 
download/rinst some by install.packages().

Note that after installation, the library/MASS/data directory contained 
ONLY RData.zip, so I unzipped it; the same for the other data (and R-ex) 
directories in the tree.  Is this new behavior?

There are no .Renviron files on the system and the only .Rprofiles are the 
[#'d out] one in /etc and the original, unmodified 
"mother-of-all-Rprofiles" in /lib/R.  The latter, for some reason, loads 
ctest...

I'm obviously missing something since I didn't go thru any such gyrations 
using R<1.2.1 ?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Tue Feb  6 01:43:31 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 5 Feb 2001 16:43:31 -0800 (PST)
Subject: [R] RWin 1.2.1:  Can't access sample datasets, e.g. MASS
In-Reply-To: <5.0.2.1.0.20010205155059.00a26210@mail>
Message-ID: <Pine.A41.4.21.0102051636040.90972-100000@homer07.u.washington.edu>

On Mon, 5 Feb 2001, peter denisevich wrote:

> I'm pretty sure I'll feel like [more of] an idiot but...
> Using Rgui working in a fresh, blank directory.
> 
> 
>  > require(MASS)
> Loading required package: MASS
> [1] TRUE
>  > data(cabbages)
> Warning message:
> ======> Data set `cabbages' not found in: data(cabbages)  <=====
<snip>
> 
> Same result for any other dataset.

I get this for MASS only, not for other packages

 
> All packages were installed in RW1021/library/<pkg>, some by manual 
> download/rinst some by install.packages().
> 
> Note that after installation, the library/MASS/data directory contained 
> ONLY RData.zip, so I unzipped it; the same for the other data (and R-ex) 
> directories in the tree.  Is this new behavior?

Yes, RData.zip is deliberate. It saves space (particularly with a FAT16
disk, where little files are very inefficient). In general, if the
installer puts it there you should leave it there.

However, there does seem to be a bug in the packaging of the current MASS
version. The data/filelist file, which is supposed to give the contents of
RData.zip actually has the contents of the data/ directory. 
As a workaround If you edit this file to list the contents of RData.zip
(or just the files you want to load), data() will work.	

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From John.Strumila at team.telstra.com  Tue Feb  6 04:42:42 2001
From: John.Strumila at team.telstra.com (Strumila, John)
Date: Tue, 6 Feb 2001 14:42:42 +1100 
Subject: [R] corrupt data.frame
Message-ID: <61411576E951D211AF330008C7245DD907DFBCF8@ntmsg0005.corpmail.telstra.com.au>

gday R-friends,

could someone please help with my little corruption problem?  I know I can
recreate my dataframe but I would prefer to be able to identify my actual
problem and how to fix it.  

I tried a debug on "as.matrix.data.frame" but I cant find the error text.

> xx<-as.matrix(resources)
Error in as.matrix.data.frame(resources) : 
        dim<- length of dims do not match the length of object
> dim(resources)
[1] 5855  136
> sapply(dimnames(resources),length)
[1] 5855  136

thanks,
John Strumila


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From John.Strumila at team.telstra.com  Tue Feb  6 04:52:57 2001
From: John.Strumila at team.telstra.com (Strumila, John)
Date: Tue, 6 Feb 2001 14:52:57 +1100 
Subject: [R] RE: corrupt data.frame
Message-ID: <61411576E951D211AF330008C7245DD907DFBD01@ntmsg0005.corpmail.telstra.com.au>

whoop...  I see my problem:
> all(sapply(resources,length)==5855)
[1] FALSE

thanks,
John Strumila

> 
> -----Original Message-----
> From: Strumila, John 
> Sent: Tuesday, 6 February 2001 2:45 PM
> To: r-help at stat.math.ethz.ch
> Subject: corrupt data.frame
> 
> 
> gday R-friends,
> 
> could someone please help with my little corruption problem?  
> I know I can recreate my dataframe but I would prefer to be 
> able to identify my actual problem and how to fix it.  
> 
> I tried a debug on "as.matrix.data.frame" but I cant find the 
> error text.
> 
> > xx<-as.matrix(resources)
> Error in as.matrix.data.frame(resources) : 
>         dim<- length of dims do not match the length of object
> > dim(resources)
> [1] 5855  136
> > sapply(dimnames(resources),length)
> [1] 5855  136
> 
> thanks,
> John Strumila
> 
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From a.sone at worldnet.att.net  Tue Feb  6 05:38:14 2001
From: a.sone at worldnet.att.net (Akio Sone)
Date: Mon, 5 Feb 2001 23:38:14 -0500
Subject: [R] RWin 1.2.1:  Can't access sample datasets, e.g. MASS
In-Reply-To: <5.0.2.1.0.20010205155059.00a26210@mail>
Message-ID: <LMBBLAMPDFJFMCGOFGGGEENKCEAA.a.sone@worldnet.att.net>

I encountered the same problem.  However, after I added a command line
option such as -q or --verbose, I could read sample datasets of MASS
package; more specifically, I changed the target box of the Rgui shortcut

from
	C:\R\rw\bin\Rgui.exe
 to
	C:\R\rw\bin\Rgui.exe -q


Akio Sone
Harvard-MIT Data Center
e-mail: asone at latte.harvard.edu


> -----Original Message-----
> From: owner-r-help at stat.math.ethz.ch
> [mailto:owner-r-help at stat.math.ethz.ch]On Behalf Of peter denisevich
> Sent: Monday, February 05, 2001 7:07 PM
> To: r-help at stat.math.ethz.ch
> Subject: [R] RWin 1.2.1: Can't access sample datasets, e.g. MASS
>
>
> I'm pretty sure I'll feel like [more of] an idiot but...
> Using Rgui working in a fresh, blank directory.
>
>
>  > require(MASS)
> Loading required package: MASS
> [1] TRUE
>  > data(cabbages)
> Warning message:
> ======> Data set `cabbages' not found in: data(cabbages)  <=====
>  > ls()
> [1] "last.warning"
>  > search()
> [1] ".GlobalEnv"    "package:MASS"  "package:ctest" "Autoloads"
> [5] "package:base"
>  > .lib.loc
> [1] "D:/R-WIN/RW1021/library"
>  > Sys.getenv("R_HOME")
>               R_HOME
> "D:\\R-WIN\\RW1021"
>  > dir("D:\\R-WIN\\RW1021\\library\\MASS\\data")
>   [1] "00Index"         "abbey.rda"       "accdeaths.rda"   "Aids2.rda"
>   [5] "Animals.rda"     "anorexia.rda"    "austres.rda"     "beav1.rda"
>    <snip, 'cabbages' IS there>
>
> Same result for any other dataset.
>
> All packages were installed in RW1021/library/<pkg>, some by manual
> download/rinst some by install.packages().
>
> Note that after installation, the library/MASS/data directory contained
> ONLY RData.zip, so I unzipped it; the same for the other data (and R-ex)
> directories in the tree.  Is this new behavior?
>
> There are no .Renviron files on the system and the only
> .Rprofiles are the
> [#'d out] one in /etc and the original, unmodified
> "mother-of-all-Rprofiles" in /lib/R.  The latter, for some reason, loads
> ctest...
>
> I'm obviously missing something since I didn't go thru any such gyrations
> using R<1.2.1 ?
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rsyuen at students.wisc.edu  Tue Feb  6 06:03:50 2001
From: rsyuen at students.wisc.edu (Raymond Shiu Yung Yuen)
Date: Tue, 06 Feb 2001 13:03:50 +0800
Subject: [R] install packages to R ported to Windows
Message-ID: <4.1.20010206130126.00916d10@students.wisc.edu>

Hi, I have a question about installing packages to R ported to Windows. Can
you tell me how to install them or there're just no way for me to do so?

Thanks a lot in advance for your help.

Sincerely,

Raymond Yuen
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pdenis2 at home.com  Tue Feb  6 06:08:37 2001
From: pdenis2 at home.com (peter denisevich)
Date: Mon, 05 Feb 2001 21:08:37 -0800
Subject: Fwd: Re: [R] RWin 1.2.1:  Can't access sample datasets, e.g.
  MASS
Message-ID: <5.0.2.1.0.20010205210615.00a191b0@mail>

[I had intended to CC: this to r-help when I replied to Prof. Lumley...]
>Date: Mon, 05 Feb 2001 17:00:43 -0800
>To: Thomas Lumley <tlumley at u.washington.edu>
>From: peter denisevich <pdenis2 at home.com>
>Subject: Re: [R] RWin 1.2.1:  Can't access sample datasets, e.g. MASS
>
>Many thanks,
>I generated a correct filelist using (ugh) DOS's dir and then awk.  You 
>are correct, though, it's just MASS that's affected.  I was (in my 
>confusion) trying to load some .R scripts as data() for some other packages.
>
>-peter
>
>At 04:43 PM 2/5/01 -0800, you wrote:
>>On Mon, 5 Feb 2001, peter denisevich wrote:
>>
>> > I'm pretty sure I'll feel like [more of] an idiot but...
>> > Using Rgui working in a fresh, blank directory.
>> >
>> >
>> >  > require(MASS)
>> > Loading required package: MASS
>> > [1] TRUE
>> >  > data(cabbages)
>> > Warning message:
>> > ======> Data set `cabbages' not found in: data(cabbages)  <=====
>><snip>
>> >
>> > Same result for any other dataset.
>>
>>I get this for MASS only, not for other packages
>>
>>
>> > All packages were installed in RW1021/library/<pkg>, some by manual
>> > download/rinst some by install.packages().
>> >
>> > Note that after installation, the library/MASS/data directory contained
>> > ONLY RData.zip, so I unzipped it; the same for the other data (and R-ex)
>> > directories in the tree.  Is this new behavior?
>>
>>Yes, RData.zip is deliberate. It saves space (particularly with a FAT16
>>disk, where little files are very inefficient). In general, if the
>>installer puts it there you should leave it there.
>>
>>However, there does seem to be a bug in the packaging of the current MASS
>>version. The data/filelist file, which is supposed to give the contents of
>>RData.zip actually has the contents of the data/ directory.
>>As a workaround If you edit this file to list the contents of RData.zip
>>(or just the files you want to load), data() will work.
>>
>>         -thomas
>>
>>Thomas Lumley                   Asst. Professor, Biostatistics
>>tlumley at u.washington.edu        University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rsyuen at students.wisc.edu  Tue Feb  6 06:18:04 2001
From: rsyuen at students.wisc.edu (Raymond Shiu Yung Yuen)
Date: Tue, 06 Feb 2001 13:18:04 +0800
Subject: [R] follow-up
Message-ID: <4.1.20010206131628.00922180@students.wisc.edu>

Hi, I just found out the installer can do the trick for me. Thanks anyway.
Sorry for any inconvenience caused.

Sincerely,

Raymond Yuen
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tov at ece.cmu.edu  Tue Feb  6 07:32:24 2001
From: tov at ece.cmu.edu (Thomas Vogels)
Date: 06 Feb 2001 01:32:24 -0500
Subject: [R] Histogram questions
In-Reply-To: Thomas Lumley's message of "Mon, 5 Feb 2001 14:10:00 -0800 (PST)"
References: <Pine.A41.4.21.0102051403170.90972-100000@homer07.u.washington.edu>
Message-ID: <pxpugw8gp3.fsf@infiniti.ece.cmu.edu>


Thomas Lumley <tlumley at u.washington.edu> writes:

> On Mon, 5 Feb 2001, M. Edward (Ed) Borasky wrote:
> 
[snip]
> > 3. What would be even nicer is to have "hist" and "density" *both* scale their
> > outputs as probabilities, so they could be overlaid on a plot together. How
> > difficult is this to do?
> 
> They both *do* scale their outputs as probability densities so they *can*
> be overlaid. They couldn't be overlaid if the bar heights added up to 1,
> since then the histogram wouldn't be a density estimate.
> 
> Eg
>  data(faithful)
>  hist(faithful$eruptions,prob=TRUE)
>  lines(density(faithful$eruptions))

what appears to be working better for me in practice is to take care
of ylim:

> x <- rnorm(100)
> hh <- hist (x, prob=TRUE, plot=FALSE)
> dd <- density (x)
> hist (x, prob=TRUE, ylim=c(0, max(hh$intensities, dd$y)))
> lines (dd)

the reason I bring this up is that:

> hist (x, prob=TRUE)

is not the same as:

> plot (hh <- hist (x, prob=TRUE))

as one might naively expect...

Regards,
  -tom

-- 
mailto:tov at ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Feb  6 08:40:35 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 6 Feb 2001 07:40:35 +0000 (GMT)
Subject: [R] RWin 1.2.1:  Can't access sample datasets, e.g. MASS
In-Reply-To: <Pine.A41.4.21.0102051636040.90972-100000@homer07.u.washington.edu>
Message-ID: <Pine.GSO.4.31.0102060736170.4095-100000@auk.stats>

On Mon, 5 Feb 2001, Thomas Lumley wrote:

> On Mon, 5 Feb 2001, peter denisevich wrote:
>
> > I'm pretty sure I'll feel like [more of] an idiot but...
> > Using Rgui working in a fresh, blank directory.
> >
> >
> >  > require(MASS)
> > Loading required package: MASS
> > [1] TRUE
> >  > data(cabbages)
> > Warning message:
> > ======> Data set `cabbages' not found in: data(cabbages)  <=====
> <snip>
> >
> > Same result for any other dataset.
>
> I get this for MASS only, not for other packages
>
>
> > All packages were installed in RW1021/library/<pkg>, some by manual
> > download/rinst some by install.packages().
> >
> > Note that after installation, the library/MASS/data directory contained
> > ONLY RData.zip, so I unzipped it; the same for the other data (and R-ex)
> > directories in the tree.  Is this new behavior?
>
> Yes, RData.zip is deliberate. It saves space (particularly with a FAT16
> disk, where little files are very inefficient). In general, if the
> installer puts it there you should leave it there.

There must also be a `filelist' file there.

> However, there does seem to be a bug in the packaging of the current MASS
> version. The data/filelist file, which is supposed to give the contents of
> RData.zip actually has the contents of the data/ directory.
> As a workaround If you edit this file to list the contents of RData.zip
> (or just the files you want to load), data() will work.

The bug happened for a day or two in early January, but it's not current.
Look at the DESCRIPTION file. It ends

Built: R 1.2.0;  Win32;  2001-01-08 20:37:22

in the current version, which does have the correct files in MASS/data.



-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Bill.Venables at CMIS.CSIRO.AU  Tue Feb  6 09:45:50 2001
From: Bill.Venables at CMIS.CSIRO.AU (Bill.Venables@CMIS.CSIRO.AU)
Date: Tue, 6 Feb 2001 18:45:50 +1000 
Subject: [R] Spatial Analysis and Modelling job in Brisbane, Australia
Message-ID: <2B7F04539DAFD311B61D009027D0DDA20C3CB2@roper-cv.qld.cmis.CSIRO.AU>

We are looking for a relatively senior person with good statistical
modelling skills, preferably with experience in spatial analysis and ecology
or environmental statistics.  Full details are available on several web
pages, including the following.  

http://www.marine.csiro.au/employops/analyst.html  
(CSIRO Marine Employment page)

http://www.sciencejobs.com/bio/viewjob.jsp?id=scij1609  

http://www.employment.com.au/index.cfm?screen_id=59&ad_appearance_id=259603

The position was also advertised in "The Australian" last Saturday.  

The group (which I head) is based here in the Cleveland (Brisbane) marine
laboratories but we work on projects all over tropical Australia, the
Pacific and South-East Asia.

Bill Venables.
--
Bill Venables, CSIRO/CMIS Environmetrics Project
Email: Bill.Venables at cmis.csiro.au
Phone: +61 7 3826 7251
Fax:   +61 7 3826 7304
Postal: PO Box 120, Cleveland, Qld 4163, AUSTRALIA
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From yudi at stat.ucc.ie  Tue Feb  6 11:16:21 2001
From: yudi at stat.ucc.ie (Yudi Pawitan)
Date: Tue, 06 Feb 2001 10:16:21 +0000
Subject: [R] SVD of complex matrices
In-Reply-To: <3A7ECC47.ED4E1FB6@icrf.icnet.uk>
Message-ID: <3.0.1.32.20010206101621.006994f4@pop3.ucd.ie>

You can do this 'by hand' using eigen(), since it can take
complex matrices. If X is a complex matrix, the svd
computes the eigenvalue-eigenvectors of X^*X and XX^*,
where X^* is the conjugate-transpose of X. 
(Set sym=T in eigen()).

-YP-
PS. You probably want to check first how it works with a toy example.

At 03:52 PM 2/5/01 +0000, you wrote:
>Is there a way to determine the SVD of a complex matrix using R?
>(I'm using v1.0.1 and svd() won't do the trick).
>I know LAPACK has a function to do this.
>
>Thanks
>
>--
>Ben Stapley
>Biomolecular Modelling Lab
>Imperial Cancer Research
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._
>
Yudi Pawitan     yudi at stat.ucc.ie
Department of Statistics UCC
Cork, Ireland
Ph   353-21-490 2906
Fax 353-21-427 1040 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From christian.hoffmann at wsl.ch  Tue Feb  6 15:49:32 2001
From: christian.hoffmann at wsl.ch (Christian Hoffmann)
Date: Tue, 06 Feb 2001 15:49:32 +0100
Subject: [R] packages, help
Message-ID: <3.0.6.32.20010206154932.0098edb0@mail.wsl.ch>

Hi,

I am trying to create my first library.
> R CMD build chlib0 .

worked fine.

>R CMD check chlib0 .  

resulted in:
This is TeX, Version 3.14159 (C version 6.1)
(chlib0-manual.tex
LaTeX2e <1996/12/01> patch level 1
[clip]
(/usr/local/teTeX/texmf/tex/latex/tools/longtable.sty)
package hyperref not found
-> I found that on CTAN
 
! LaTeX Error: File `bm.sty' not found.
 
Q:
Where can I find    bm.sty ?  
On CTAN I only found sbbm.sty

Is it similar to bbm.sty which I have?
bbm produces:

! Missing $ inserted.
<inserted text> 
                $
l.4 \Header{datetime}{Compute_date_and_time}
                                            
?

My datetime.Rd starts like:
\name{datetime}
\alias{date}
\alias{time}
\title{Compute_date_and_time}



Thanks for help.
--christian

Dr.sc.math.Christian W. Hoffmann
Mathematics and Statistical Computing
Landscape Modeling and Web Applications
Swiss Federal Research Institute WSL 
Zuercherstrasse 111
CH-8903 Birmensdorf, Switzerland
phone: ++41-1-739 22 77    fax: ++41-1-739 22 15
e-mail: Hoffmann at WSL.CH
www: http://www.wsl.ch/staff/christian.hoffmann/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pflugshaupt at cirsium.ethz.ch  Tue Feb  6 17:36:51 2001
From: pflugshaupt at cirsium.ethz.ch (Kaspar Pflugshaupt)
Date: Tue, 6 Feb 2001 17:36:51 +0100
Subject: [R] packages, help
In-Reply-To: <3.0.6.32.20010206154932.0098edb0@mail.wsl.ch>
References: <3.0.6.32.20010206154932.0098edb0@mail.wsl.ch>
Message-ID: <01020617365103.00877@Aconitum>

On Tuesday 06 February 2001 15:49, Christian Hoffmann wrote:


> ! LaTeX Error: File `bm.sty' not found.
>
> Q:
> Where can I find    bm.sty ?

On my installation (SuSE Linux 7.0), it's at 

/usr/share/texmf/tex/latex/tools/bm.sty


Gruss

Kaspar 

P.S. Bis am Freitag :)


----

Kaspar Pflugshaupt
Geobotanical Institute
ETH Zurich, Switzerland

http://www.geobot.umnw.ethz.ch
mailto:pflugshaupt at geobot.umnw.ethz.ch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Feb  6 17:51:11 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 6 Feb 2001 16:51:11 +0000 (GMT)
Subject: [R] packages, help
In-Reply-To: <01020617365103.00877@Aconitum>
Message-ID: <Pine.GSO.4.31.0102061648270.1077-100000@toucan.stats>

On Tue, 6 Feb 2001, Kaspar Pflugshaupt wrote:

> On Tuesday 06 February 2001 15:49, Christian Hoffmann wrote:
>
>
> > ! LaTeX Error: File `bm.sty' not found.
> >
> > Q:
> > Where can I find    bm.sty ?
>
> On my installation (SuSE Linux 7.0), it's at
>
> /usr/share/texmf/tex/latex/tools/bm.sty

You should be aware that SuSe has re-distributed the teTeX distribution in
non-standard ways.  But any correctly installed latex installation has
bm.sty installed, as it is part of the compulsory core of latex.

The configure procedure checks for the optional latex packages.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From znmeb at aracnet.com  Tue Feb  6 18:24:59 2001
From: znmeb at aracnet.com (M. Edward (Ed) Borasky)
Date: Tue, 6 Feb 2001 09:24:59 -0800 (PST)
Subject: [R] Histogram questions
In-Reply-To: <pxpugw8gp3.fsf@infiniti.ece.cmu.edu>
Message-ID: <Pine.LNX.4.31.0102060908410.16049-100000@shell1.aracnet.com>

On 6 Feb 2001, Thomas Vogels wrote:

> > Eg
> >  data(faithful)
> >  hist(faithful$eruptions,prob=TRUE)
> >  lines(density(faithful$eruptions))
>
> what appears to be working better for me in practice is to take care
> of ylim:
>
> > x <- rnorm(100)
> > hh <- hist (x, prob=TRUE, plot=FALSE)
> > dd <- density (x)
> > hist (x, prob=TRUE, ylim=c(0, max(hh$intensities, dd$y)))
> > lines (dd)
>
> the reason I bring this up is that:
>
> > hist (x, prob=TRUE)
>
> is not the same as:
>
> > plot (hh <- hist (x, prob=TRUE))

Actually, there are two issues:

1. When you assign the output of "hist" to an object, it computes both the
frequencies and the densities. When you later plot the object, it will take
the default, which is frequencies, unless you specify "prob=TRUE" when you do
the plot.

2. There is nothing to guarantee that the kernel density and the histogram will
have the same scale.

The code I use is

	h <- hist(dataset,plot=FALSE)
	d <- density(dataset)

	# scale plot for both histogram and density
	plot (d, ylim=c(0, max(h$density,d$y)))
	lines.histogram (h, prob=TRUE)

In the "faithful" example, it just happened that the scale on the histogram was
higher than on the density. In my datasets, I was getting pretty much the
opposite, which is why my code plotted the density first, until I figured out
how to compute the correct scale for the two overlaid plots.
--
znmeb at aracnet.com (M. Edward Borasky) http://www.aracnet.com/~znmeb

There are three kinds of people: those who are good with mathematics and those
who aren't.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From faheem at email.unc.edu  Tue Feb  6 20:36:53 2001
From: faheem at email.unc.edu (Faheem Mitha)
Date: Tue, 6 Feb 2001 14:36:53 -0500 (EST)
Subject: [R] barplots with pictex
Message-ID: <Pine.LNX.4.21.0102061349080.429-100000@Chrestomanci.home.earth>

Dear R People, 

I want to include a barplot corresponding to a simple discrete probability
distribution in a LaTeX document. I decided to use the pictex
driver. After a certain amount of messing about, I came up the stuff
below. It does not look too bad, however, there is one very obvious piece
of weirdness, ie. the y axis terminates at 0.1 and does not extend down
further. I tried to adjust this by changing ylim to c(-0.1,0.5) but then
the labelling -3, -2 ... moves further down. Can anyone suggest how to
correct this problem?

I am not sure what significance xlim has in this situation. I set it equal
to c(-3,10) but then it cut off half the graph. So I just left it off.
Yes, I did look at the online help, but still had difficulties.

Two more comments: 1) If anyone can suggest a better way of doing this,
please let me know. 2) Are there any obvious advantages to using pictex
instead of say eps? I thought there might be an advantage to being able to
adjust parameters by hand, but the pictex code that is put out by the
driver is quite complicated, and in any case no documentation comes for
pictex (you have to buy the manual), so I don't know what I am doing
anyway.

pictex(file="barplot.tex",width=6,height=3, debug=FALSE,bg
="white",fg="black")
barplot(c(0.1,0.2,0.2,0.4,0,0,0,0,0,0,0,0,0,0.1),names.arg=
        c("-3","-2","-1","0","1","2","3","4","5","6","7","8","9","10"),
        ylim=c(0,0.5),xlab="Values of x",ylab="Probability
values",sub=NULL,
    style="old",main="Probability Histogram")
dev.off()

                  Sincerely, Faheem Mitha.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Feb  6 20:52:56 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 6 Feb 2001 19:52:56 +0000 (GMT)
Subject: [R] barplots with pictex
In-Reply-To: <Pine.LNX.4.21.0102061349080.429-100000@Chrestomanci.home.earth>
Message-ID: <Pine.GSO.4.31.0102061946050.6418-100000@auk.stats>

On Tue, 6 Feb 2001, Faheem Mitha wrote:

> Dear R People,
>
> I want to include a barplot corresponding to a simple discrete probability
> distribution in a LaTeX document. I decided to use the pictex
> driver. After a certain amount of messing about, I came up the stuff
> below. It does not look too bad, however, there is one very obvious piece
> of weirdness, ie. the y axis terminates at 0.1 and does not extend down
> further. I tried to adjust this by changing ylim to c(-0.1,0.5) but then
> the labelling -3, -2 ... moves further down. Can anyone suggest how to
> correct this problem?

Not so in my version (1.2.1, Solaris) with your code. What version are
*you* using?  This has been fixed a while ago (1.1.0, it looks like from
NEWS).

> I am not sure what significance xlim has in this situation. I set it equal
> to c(-3,10) but then it cut off half the graph. So I just left it off.
> Yes, I did look at the online help, but still had difficulties.
>
> Two more comments: 1) If anyone can suggest a better way of doing this,
> please let me know. 2) Are there any obvious advantages to using pictex
> instead of say eps?

None if your dvixx can handle eps.  The pictex driver has not been touched
for a long time and has no font metric support, for example.  These days
you can use TeX fonts with postscript(), anyway.

[ ... ]


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From faheem at email.unc.edu  Tue Feb  6 21:36:44 2001
From: faheem at email.unc.edu (Faheem Mitha)
Date: Tue, 6 Feb 2001 15:36:44 -0500 (EST)
Subject: [R] barplots with pictex
Message-ID: <Pine.LNX.4.21.0102061534380.429-100000@Chrestomanci.home.earth>

This didn't seem to go through (perhaps because of the capital R) so I am
resending it.                             Faheem.

---------- Forwarded message ----------
Date: Tue, 6 Feb 2001 14:36:53 -0500 (EST)
From: Faheem Mitha <faheem at email.unc.edu>
To: R-help at stat.math.ethz.ch
Subject: barplots with pictex

Dear R People, 

I want to include a barplot corresponding to a simple discrete probability
distribution in a LaTeX document. I decided to use the pictex
driver. After a certain amount of messing about, I came up the lines
below. It does not look too bad, however, there is one very obvious piece
of weirdness, ie. the y axis terminates at 0.1 and does not extend down
further. I tried to adjust this by changing ylim to c(-0.1,0.5) but then
the labelling -3, -2 ... moves further down. Can anyone suggest how to
correct this problem?

I am not sure what significance xlim has in this situation. I set it equal
to c(-3,10) but then it cut off half the graph. So I just left it off.
Yes, I did look at the online help, but still had difficulties.

Two more comments/questions: 

1) If anyone can suggest a better way of doing this, please let me know.

2) Are there any obvious advantages to using pictex instead of say eps? I
thought there might be an advantage to being able to adjust parameters by
hand, but the pictex code that is put out by the driver is quite
complicated, and in any case no documentation comes for pictex (you have
to buy the manual), so I don't know what I am doing anyway.

pictex(file="barplot.tex",width=6,height=3, debug=FALSE,bg
="white",fg="black")
barplot(c(0.1,0.2,0.2,0.4,0,0,0,0,0,0,0,0,0,0.1),names.arg=
        c("-3","-2","-1","0","1","2","3","4","5","6","7","8","9","10"),
        ylim=c(0,0.5),xlab="Values of x",ylab="Probability
values",sub=NULL,
    style="old",main="Probability Histogram")
dev.off()

Thanks in advance for any help.

                  Sincerely, Faheem Mitha.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pdenis2 at home.com  Tue Feb  6 19:13:28 2001
From: pdenis2 at home.com (peter denisevich)
Date: Tue, 06 Feb 2001 10:13:28 -0800
Subject: [R] RWin 1.2.1:  Can't access sample datasets, e.g. MASS
Message-ID: <5.0.2.1.0.20010206100725.00a29430@mail>

This is the description file from the version of pkg. VR/MASS that I just 
downloaded (Feb 6, 2001) from CRAN.  Looks as though the new build didn't 
get through to CRAN/Windows.

Package: MASS
Description: The main library.
Title: Main Library of Venables and Ripley's MASS
Bundle: VR
Version: 6.2-3
Date: 2000/11/30
Depends: R (>= 1.1)
Author: S original by Venables & Ripley.
   R port by Brian Ripley <ripley at stats.ox.ac.uk>, following earlier
   work by Kurt Hornik and Albrecht Gebhardt.
BundleDescription: Various functions from the libraries of Venables and
   Ripley, `Modern Applied Statistics with S-PLUS' (3rd edition).
License: GPL (version 2 or later)
URL: http://www.stats.ox.ac.uk/pub/MASS3/
Built: R 1.2.0;  Win32;  2001-01-04 08:51:17
                               ^^^^^


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Feb  6 23:05:13 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 6 Feb 2001 22:05:13 +0000 (GMT)
Subject: [R] RWin 1.2.1:  Can't access sample datasets, e.g. MASS
In-Reply-To: <5.0.2.1.0.20010206100725.00a29430@mail>
Message-ID: <Pine.GSO.4.31.0102062203200.1707-100000@toucan.stats>

On Tue, 6 Feb 2001, peter denisevich wrote:

> This is the description file from the version of pkg. VR/MASS that I just
> downloaded (Feb 6, 2001) from CRAN.  Looks as though the new build didn't
> get through to CRAN/Windows.
>
> Package: MASS
> Description: The main library.
> Title: Main Library of Venables and Ripley's MASS
> Bundle: VR
> Version: 6.2-3
> Date: 2000/11/30
> Depends: R (>= 1.1)
> Author: S original by Venables & Ripley.
>    R port by Brian Ripley <ripley at stats.ox.ac.uk>, following earlier
>    work by Kurt Hornik and Albrecht Gebhardt.
> BundleDescription: Various functions from the libraries of Venables and
>    Ripley, `Modern Applied Statistics with S-PLUS' (3rd edition).
> License: GPL (version 2 or later)
> URL: http://www.stats.ox.ac.uk/pub/MASS3/
> Built: R 1.2.0;  Win32;  2001-01-04 08:51:17
>                                ^^^^^

Well, nothing much I can do about that.  The site it supposedly mirrors,
http://www.stats.ox.ac.uk/pub/RWin,  has the Jan 8th version.
I'll touch it and see if that triggers a fetch.

BDR

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From faheem at email.unc.edu  Tue Feb  6 23:55:21 2001
From: faheem at email.unc.edu (Faheem Mitha)
Date: Tue, 6 Feb 2001 17:55:21 -0500 (EST)
Subject: [R] barplots with pictex
In-Reply-To: <Pine.GSO.4.31.0102061946050.6418-100000@auk.stats>
Message-ID: <Pine.LNX.4.21.0102061749240.429-100000@Chrestomanci.home.earth>



On Tue, 6 Feb 2001, Prof Brian D Ripley wrote:

> On Tue, 6 Feb 2001, Faheem Mitha wrote:
> 
> > Dear R People,
> >
> > I want to include a barplot corresponding to a simple discrete probability
> > distribution in a LaTeX document. I decided to use the pictex
> > driver. After a certain amount of messing about, I came up the stuff
> > below. It does not look too bad, however, there is one very obvious piece
> > of weirdness, ie. the y axis terminates at 0.1 and does not extend down
> > further. I tried to adjust this by changing ylim to c(-0.1,0.5) but then
> > the labelling -3, -2 ... moves further down. Can anyone suggest how to
> > correct this problem?
> 
> Not so in my version (1.2.1, Solaris) with your code. What version are
> *you* using?  This has been fixed a while ago (1.1.0, it looks like from
> NEWS).

1.0.0 (I haven't used R since last May). Perhaps it is time to upgrade to
1.2.1. So this is/was a bug, then?

> > 2) Are there any obvious advantages to using pictex
> > instead of say eps?
> 
> None if your dvixx can handle eps.  The pictex driver has not been touched
> for a long time and has no font metric support, for example.  These days
> you can use TeX fonts with postscript(), anyway.

Ok. I use dvips, so eps is no problem. Pictex makes tex work pretty
hard, and I don't have any documentation for it, so...

                                                     Faheem.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Kurt.Hornik at ci.tuwien.ac.at  Tue Feb  6 21:46:23 2001
From: Kurt.Hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 6 Feb 2001 21:46:23 +0100
Subject: [R] Removing "row.names"
In-Reply-To: <5.0.2.1.2.20010205121238.00a73b70@127.0.0.1>
References: <5.0.2.1.2.20010205121238.00a73b70@127.0.0.1>
Message-ID: <14976.25247.314483.31621@mithrandir.hornik.net>

>>>>> Marc Feldesman writes:

> I need to completely remove row.names from a dataframe.  Are there other 
> ways to remove them (and not anything else) besides:

> mydataframe<-data.frame(mydataframe, row.names=NULL)

> I realize that this doesn't really remove the row.names; it merely
> replaces the current row.names vector with the numbers 1..nrow (in
> quotes).

My understanding is that you cannot do that.  By definition, data frames
are lists all components of which have the same length, and have both
names and row.names attributes which must have the right length and no
duplicated elements.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben_reilly at mac.com  Wed Feb  7 02:36:28 2001
From: ben_reilly at mac.com (Ben Reilly)
Date: Wed, 7 Feb 2001 01:36:28 +0000
Subject: [R] R on MacOS X
Message-ID: <200102070137.BAA21073@pesto.st-andrews.ac.uk>

I'm just wondering if anyone has had any luck installing on X/Darwin?
I'd be very grateful if you could drop me a note if you've been successful. I've built the binaries, but the ./configure goes wrong towards the end, with lots of messages telling me about "unescaped new lines".
Cheers
Ben Reilly
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From P.Connolly at hortresearch.co.nz  Wed Feb  7 03:07:32 2001
From: P.Connolly at hortresearch.co.nz (Patrick Connolly)
Date: Wed, 7 Feb 2001 15:07:32 +1300 (NZDT)
Subject: [R] Removing "row.names"
In-Reply-To: <14976.25247.314483.31621@mithrandir.hornik.net> from "Kurt Hornik" at Feb 06, 2001 09:46:23 PM
Message-ID: <200102070207.f1727X501742@biomat1.marc.hort.cri.nz>

According to Kurt Hornik:
|> 
|> >>>>> Marc Feldesman writes:
|> 
|> > I need to completely remove row.names from a dataframe.  Are there other 
|> > ways to remove them (and not anything else) besides:
|> 
|> > mydataframe<-data.frame(mydataframe, row.names=NULL)
|> 
|> > I realize that this doesn't really remove the row.names; it merely
|> > replaces the current row.names vector with the numbers 1..nrow (in
|> > quotes).
|> 
|> My understanding is that you cannot do that.  By definition, data frames
|> are lists all components of which have the same length, and have both
|> names and row.names attributes which must have the right length and no
|> duplicated elements.

Interestingly, it IS possible to do it in Splus by converting your
dataframe to a matrix, changing the rownames of it to be a vector of
empty strings then converting it back to a data frame.  It seems as
though the normal checking doesn't happen and it's possible to do what
Marc wanted to do.  Character columns will mean that your resulting
dataframe will be all character columns, so it's likely more tinkering
is necessary.

I tried the same technique in R but it insisted on renumbering the
rows of the dataframe with the added bonus of making each column into
a factor.  

As if that is not strange enough, simply listing without assignment of
the as.data.frame(fudge.matrix) will return an error, complaining
about non-unique row names, but it will create another object without
much fuss.

The dataframe I used for my test had one factor column and 5 numeric
columns.  Things might be different again with other data.

best

-- 
*************************************************************
Patrick Connolly
HortResearch        
Mt Albert               It's better to do nothing than to waste time
Auckland                                      ..... Viktoras Kulvinskas
New Zealand                          
Ph: +64-9 815 4200 x 7188
*************************************************************
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From faheem at email.unc.edu  Wed Feb  7 06:04:35 2001
From: faheem at email.unc.edu (Faheem Mitha)
Date: Wed, 7 Feb 2001 00:04:35 -0500 (EST)
Subject: [R] failed rpm installation of R 1.2-1
Message-ID: <Pine.LNX.4.21.0102062359540.26067-100000@Chrestomanci.home.earth>

Dear People,

Just tried to compile an rpm for R 1.2-1 (using Albrecht Gebhardt's spec
file). The compile went successfully and produced a binary rpm, but when I
tried to install it, I got an error

error: failed dependencies:
        BEGIN is needed by R-base-1.2.1-1

I see this was also listed in the Requires list at the end of the rpm
compilation: 

Requires: /bin/sh /usr/bin/perl BEGIN ...

Of course I could force installation of the package, but I would like to
know what I am doing first. Albrecht does not say anything about BEGIN in
his spec file, so this must be some internal to R. Does anyone have any
idea what? I have no idea. 

                             Sincerely, Faheem Mitha.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From albrecht.gebhardt at uni-klu.ac.at  Wed Feb  7 07:52:23 2001
From: albrecht.gebhardt at uni-klu.ac.at (Albrecht Gebhardt)
Date: Wed, 7 Feb 2001 07:52:23 +0100 (MET)
Subject: [R] Re: failed rpm installation of R 1.2-1 (fwd)
In-Reply-To: <Pine.LNX.4.21.0102070007530.26067-100000@Chrestomanci.home.earth>
Message-ID: <Pine.OSF.4.21.0102070723210.8213-100000@zidsrv.sci.uni-klu.ac.at>

On Wed, 7 Feb 2001, Faheem Mitha wrote:

> Dear Albrecht,
> 
> Just sent the following message out to r-help. Have you any idea what this
> problem could be?
> 
>                          Sincerely, Faheem Mitha.
> 
> ---------- Forwarded message ----------
> Date: Wed, 7 Feb 2001 00:04:35 -0500 (EST)
> From: Faheem Mitha <faheem at email.unc.edu>
> To: r-help at stat.math.ethz.ch
> Subject: failed rpm installation of R 1.2-1
> 
> Dear People,
> 
> Just tried to compile an rpm for R 1.2-1 (using Albrecht Gebhardt's spec
> file). The compile went successfully and produced a binary rpm, but when I
> tried to install it, I got an error
> 
> error: failed dependencies:
>         BEGIN is needed by R-base-1.2.1-1
> 
> I see this was also listed in the Requires list at the end of the rpm
> compilation: 
> 
> Requires: /bin/sh /usr/bin/perl BEGIN ...
> 
> Of course I could force installation of the package, but I would like to
> know what I am doing first. Albrecht does not say anything about BEGIN in
> his spec file, so this must be somethin internal to R. Does anyone have
> any idea what? I have no idea.
>

I guess, there is some executable file (a snippet of some script with mode
755 or similar) which starts with a line "BEGIN". ....

Well, I just found it, it is an awk script:
find -type f -exec grep -l BEGIN {} \;
...
./bin/maketitle.awk

Clearly it doesn't need the executable bits so simply add

chmod 644 $RPM_BUILD_ROOT/%{prefix}/R/bin/maketitle.awk

to the end of the %install section of my spec file.


Albrecht

// Albrecht Gebhardt          Tel.: (++43 463) 2700/3118
// Institut fuer Mathematik   Fax : (++43 463) 2700/3198
// Universitaet Klagenfurt    mailto:albrecht.gebhardt at uni-klu.ac.at
// Universitaetsstr. 65       http://www-stat.uni-klu.ac.at/~agebhard
// A-9020 Klagenfurt, Austria 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Feb  7 07:56:32 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 7 Feb 2001 06:56:32 +0000 (GMT)
Subject: [R] barplots with pictex
In-Reply-To: <Pine.LNX.4.21.0102061749240.429-100000@Chrestomanci.home.earth>
Message-ID: <Pine.GSO.4.31.0102070653350.6815-100000@auk.stats>

On Tue, 6 Feb 2001, Faheem Mitha wrote:

>
>
> On Tue, 6 Feb 2001, Prof Brian D Ripley wrote:
>
> > On Tue, 6 Feb 2001, Faheem Mitha wrote:
> >
> > > Dear R People,
> > >
> > > I want to include a barplot corresponding to a simple discrete probability
> > > distribution in a LaTeX document. I decided to use the pictex
> > > driver. After a certain amount of messing about, I came up the stuff
> > > below. It does not look too bad, however, there is one very obvious piece
> > > of weirdness, ie. the y axis terminates at 0.1 and does not extend down
> > > further. I tried to adjust this by changing ylim to c(-0.1,0.5) but then
> > > the labelling -3, -2 ... moves further down. Can anyone suggest how to
> > > correct this problem?
> >
> > Not so in my version (1.2.1, Solaris) with your code. What version are
> > *you* using?  This has been fixed a while ago (1.1.0, it looks like from
> > NEWS).
>
> 1.0.0 (I haven't used R since last May). Perhaps it is time to upgrade to
> 1.2.1. So this is/was a bug, then?

A bug has been fixed, yes.  If you look at the bugs list in NEWS, you might
well want to upgrade, and there have been considerable performance and
feature advances too.

As a more general point, moving from 1.x.0 to 1.x.1 is definitely a good
idea, as the changes in 1.x releases often break a few other things.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Feb  7 08:12:20 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 7 Feb 2001 07:12:20 +0000 (GMT)
Subject: [R] Removing "row.names"
In-Reply-To: <14976.25247.314483.31621@mithrandir.hornik.net>
Message-ID: <Pine.GSO.4.31.0102070704120.6815-100000@auk.stats>

On Tue, 6 Feb 2001, Kurt Hornik wrote:

> >>>>> Marc Feldesman writes:
>
> > I need to completely remove row.names from a dataframe.  Are there other
> > ways to remove them (and not anything else) besides:
>
> > mydataframe<-data.frame(mydataframe, row.names=NULL)
>
> > I realize that this doesn't really remove the row.names; it merely
> > replaces the current row.names vector with the numbers 1..nrow (in
> > quotes).
>
> My understanding is that you cannot do that.  By definition, data frames
> are lists all components of which have the same length, and have both
> names and row.names attributes which must have the right length and no
> duplicated elements.

I read it that Marc is happy with that, just wants to set the row names to
the default. The simplest way to do that is

row.names(mydataframe)  <- seq(len=nrow(mydataframe))

In S there are examples where in manipulating data frames, the manipulation
of the row names takes up most of the time (as they have to be kept
unique).  I believe one is in bootstrapping, and as a result the latest
versions of S-PLUS allow duplicate row names in data frames.  I suspect
something similar migth apply to R, but re-defining a class after
several years in use is not I think a good idea.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Kurt.Hornik at ci.tuwien.ac.at  Wed Feb  7 08:52:57 2001
From: Kurt.Hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 7 Feb 2001 08:52:57 +0100
Subject: [R] R on MacOS X
In-Reply-To: <200102070137.BAA21073@pesto.st-andrews.ac.uk>
References: <200102070137.BAA21073@pesto.st-andrews.ac.uk>
Message-ID: <14976.65241.381021.323493@mithrandir.hornik.net>

>>>>> Ben Reilly writes:

> I'm just wondering if anyone has had any luck installing on X/Darwin?
> I'd be very grateful if you could drop me a note if you've been
> successful. I've built the binaries, but the ./configure goes wrong
> towards the end, with lots of messages telling me about "unescaped new
> lines".

I've had a similar problem report already.  I sort of located the
problem but it seems I cannot fix it without access to a Darwin system.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dieter.menne at menne-biomed.de  Wed Feb  7 09:38:24 2001
From: dieter.menne at menne-biomed.de (Dieter Menne)
Date: Wed, 7 Feb 2001 09:38:24 +0100
Subject: [R] nlme:  fixed=lKe+lKa+lV~1 fails,      fixed=lV+lKe+lKa~1, works
Message-ID: <NBBBIJMBGLHMKHGCPFJKIECNCGAA.dieter.menne@menne-biomed.de>

Dear Douglas Bates,

Looks like the success of nlme depends on the order of the fixed coefficients.
In a simple variation of your Quinidine-model (with simulated data,
result is known), using the following call give a reasonable result:

Orli12.nlme<-nlme(
     conc~orliModel(Pat,time,conc,dose,interval,lV,lKa,lKe),
     data=Orli12,
     fixed=lV+lKe+lKa~1,
     random=lV~1,
     groups=~Pat,
     start=list(fixed=c(log(V),log(Ka),log(Ke))),
     na.action=NULL,
     naPattern=~!is.na(conc)
     )

Nonlinear mixed-effects model fit by maximum likelihood
  Model: conc ~ orliModel(Pat, time, conc, dose, interval, lV, lKa, lKe)
  Data: Orli12
  Log-likelihood: -1016
  Fixed: lV + lKe + lKa ~ 1
    lV    lKe    lKa
-5.796 -1.628 -0.483

Random effects:
 Formula: lV ~ 1 | Pat
           lV Residual
StdDev: 0.097     20.3


With
     fixed=lKe+lKa+lV~1,

I get reproducably:

Error in nlme.formula(conc ~ orliModel(Pat, time, conc, dose, interval,  :
        Step halving factor reduced below minimum in PNLS step


---------------------------------------
Dr. Dieter Menne
Biomed Software
72074 T?bingen
Tel (49) (7071) 52176
FAX (49) (7071) 55 10 46
dieter.menne at menne-biomed.de
www.menne-biomed.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dieter.menne at menne-biomed.de  Wed Feb  7 09:52:53 2001
From: dieter.menne at menne-biomed.de (Dieter Menne)
Date: Wed, 7 Feb 2001 09:52:53 +0100
Subject: [R] My fault: nlme:  fixed=lKe+lKa+lV~1 fails,      fixed=lV+lKe+lKa~1, works
Message-ID: <NBBBIJMBGLHMKHGCPFJKOECNCGAA.dieter.menne@menne-biomed.de>

Sorry, Douglas,

     fixed=lV+Ke+lKa~1,

I forgot to swap the start values when swapping the parameters...


Mea culpa.

Dieter


---------------------------------------
Dr. Dieter Menne
Biomed Software
72074 T?bingen
Tel (49) (7071) 52176
FAX (49) (7071) 55 10 46
dieter.menne at menne-biomed.de
www.menne-biomed.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mark at myatt.demon.co.uk  Wed Feb  7 10:14:48 2001
From: mark at myatt.demon.co.uk (Mark Myatt)
Date: Wed, 7 Feb 2001 09:14:48 +0000
Subject: [R] Goodness of fit to Poisson / NegBinomial
Message-ID: <jNnwrHAIIRg6EwFr@myatt.demon.co.uk>

All,

I have some data on parasites on apple leaves and want to do a
goodness of fit test to a Poisson distribution. This seems to
do it:

  mites <- c(rep(0,70),
             rep(1,38),
             rep(2,17), 
             rep(3,10), 
             rep(4,9), 
             rep(5,3), 
             rep(6,2), 
             rep(7,1))

  tab <- table(mites)
  NSU <- length(mites)
  N <- sum(mites)
  NSU.Mean <- N / NSU
  exp <- dpois(as.numeric(dimnames(tab)[[1]]), NSU.Mean) *  NSU
  chi2 <- sum(((as.vector(tab) - exp)^2) / exp)

  tab
  exp
  chi2
  
I have some small expected values and so need to collapse some
categories. If anyone has code to do that already ... but my
question is how would I do the same for a negative binomial
distribution?

Mark

--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From james.lindsey at luc.ac.be  Wed Feb  7 10:55:27 2001
From: james.lindsey at luc.ac.be (Jim Lindsey)
Date: Wed, 7 Feb 2001 10:55:27 +0100 (MET)
Subject: [R] Goodness of fit to Poisson / NegBinomial
In-Reply-To: <jNnwrHAIIRg6EwFr@myatt.demon.co.uk> from "Mark Myatt" at Feb 07, 2001 09:14:48 AM
Message-ID: <200102070955.KAA10583@alpha.luc.ac.be>

> 
> All,
> 
> I have some data on parasites on apple leaves and want to do a
> goodness of fit test to a Poisson distribution. This seems to
> do it:
> 
>   mites <- c(rep(0,70),
>              rep(1,38),
>              rep(2,17), 
>              rep(3,10), 
>              rep(4,9), 
>              rep(5,3), 
>              rep(6,2), 
>              rep(7,1))
> 
>   tab <- table(mites)
>   NSU <- length(mites)
>   N <- sum(mites)
>   NSU.Mean <- N / NSU
>   exp <- dpois(as.numeric(dimnames(tab)[[1]]), NSU.Mean) *  NSU
>   chi2 <- sum(((as.vector(tab) - exp)^2) / exp)
> 
>   tab
>   exp
>   chi2
>   
> I have some small expected values and so need to collapse some
> categories. If anyone has code to do that already ... but my
> question is how would I do the same for a negative binomial
> distribution?

The negative binomial density function is available in my rmutil
library. (www.luc.ac.be/~jlindsey/rcode.html)
  Jim

> 
> Mark
> 
> --
> Mark Myatt
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dsweeney at nmrc.ucc.ie  Wed Feb  7 12:05:05 2001
From: dsweeney at nmrc.ucc.ie (Dermot MacSweeney)
Date: Wed, 7 Feb 2001 11:05:05 +0000 (GMT)
Subject: [R] Removing "row.names"
Message-ID: <200102071105.LAA08910@achill.nmrc.ucc.ie>

If a data.frame formed as follows:

sampled <- data.frame(sample(rnorm(100),2))

sampled
 
The output is:

  sample.rnorm.100...2.
1            -0.1124964
2            -1.4590381

What I would like to have is no column titles so I get this:

1            -0.1124964
2            -1.4590381

I don't have a lot of experience with R, so excuse me if this is a stupid 
question.

Best Regards,
Dermot MacSweeney.


**************************************************************

Dermot MacSweeney			NMRC, 
Email: dsweeney at nmrc.ucc.ie		Lee Maltings, 
Tel: +353 21 4904178			Prospect Row, 
Fax: +353 21 4270271			Cork, 
WWW: http://nmrc.ucc.ie			Ireland

**************************************************************


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Feb  7 12:26:02 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 7 Feb 2001 11:26:02 +0000 (GMT)
Subject: [R] Removing "row.names"
Message-ID: <200102071126.LAA03444@toucan.stats.ox.ac.uk>


> Date: Wed, 7 Feb 2001 11:05:05 +0000 (GMT)
> From: Dermot MacSweeney <dsweeney at nmrc.ucc.ie>
> Subject: Re: [R] Removing "row.names"
> To: r-help at stat.math.ethz.ch
> X-Virus-Scanned: by AMaViS at NMRC, Ireland
> 
> If a data.frame formed as follows:
> 
> sampled <- data.frame(sample(rnorm(100),2))
> 
> sampled
>  
> The output is:
> 
>   sample.rnorm.100...2.
> 1            -0.1124964
> 2            -1.4590381
> 
> What I would like to have is no column titles so I get this:
> 
> 1            -0.1124964
> 2            -1.4590381
> 
> I don't have a lot of experience with R, so excuse me if this is a stupid 
> question.

Certainly not, but there are two separate things going on you
need to keep separate.

1) A data frame has row names and column names.
You have sensible row names.
You can get better column names by

sampled <- data.frame(x = sample(rnorm(100),2))

or afterwards by

names(sampled) <- "x".

2) By default, a data frame is printed with row and column names.
You can change that.  The simplest way is probably (for 1.2.1)

zz <- as.matrix(format(sampled))
colnames(zz) <- rep("", ncol(zz))
print(zz, quote=FALSE)

or use

myprint <- function(df)
{
    zz <- as.matrix(format(df))
    colnames(zz) <- rep("", ncol(zz))
    print(zz, quote=FALSE)
    invisible(df) 
}
> myprint(sampled)
             
1 -0.76797637
2  0.08913408



-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cyg at sympatico.ca  Wed Feb  7 13:32:13 2001
From: cyg at sympatico.ca (Yves Gauvreau)
Date: Wed, 7 Feb 2001 07:32:13 -0500
Subject: [R] Removing "row.names"
In-Reply-To: <200102071105.LAA08910@achill.nmrc.ucc.ie>
Message-ID: <NEBBJKDJHEFCOOLFFAKKIEMFCAAA.cyg@sympatico.ca>

Try this

sampled <- data.frame(sample(rnorm(100),2))
colnames(sampled) <- " " # Or preferably something meaningful
sampled

1 1.777068
2 0.937161

Yves Gauvreau
B.E.F.P. Universite du Quebec a Montreal
cyg at sympatico.ca

> -----Message d'origine-----
> De : owner-r-help at stat.math.ethz.ch
> [mailto:owner-r-help at stat.math.ethz.ch]De la part de Dermot MacSweeney
> Envoye : Wednesday, February 07, 2001 6:05 AM
> A : r-help at stat.math.ethz.ch
> Objet : Re: [R] Removing "row.names"
>
>
> If a data.frame formed as follows:
>
> sampled <- data.frame(sample(rnorm(100),2))
>
> sampled
>
> The output is:
>
>   sample.rnorm.100...2.
> 1            -0.1124964
> 2            -1.4590381
>
> What I would like to have is no column titles so I get this:
>
> 1            -0.1124964
> 2            -1.4590381
>
> I don't have a lot of experience with R, so excuse me if this is a stupid
> question.
>
> Best Regards,
> Dermot MacSweeney.
>
>
> **************************************************************
>
> Dermot MacSweeney			NMRC,
> Email: dsweeney at nmrc.ucc.ie		Lee Maltings,
> Tel: +353 21 4904178			Prospect Row,
> Fax: +353 21 4270271			Cork,
> WWW: http://nmrc.ucc.ie			Ireland
>
> **************************************************************
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From petzoldt at rcs.urz.tu-dresden.de  Mon Feb  5 12:26:45 2001
From: petzoldt at rcs.urz.tu-dresden.de (Thomas Petzoldt)
Date: Mon, 05 Feb 2001 12:26:45 +0100
Subject: [R] get vector data from contour
Message-ID: <3A7E8DF5.2F737836@rcs.urz.tu-dresden.de>

I have carried out a spatial interpolation (Kriging) using surf.gls() 

The contour plot looks very plausible and the image plot is o.k too. 
The problem is, hovever, that I need the vectorized isoplethes, as in
contour().
Unfortunately, I found no solution to get the internal data from
contour().

Is there a possibility to extract contour lines as x-y-polygon from a
grid without hacking plot3d.c?

Thank you in advance!

Thomas P.


-- 
Thomas Petzoldt
Dresden University of Technology
Institute for Hydrobiology        
mailto:petzoldt at rcs.urz.tu-dresden.de  
01062 Dresden                      http://www.tu-dresden.de/fghhihb/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rbeer at uni-goettingen.de  Wed Feb  7 14:15:17 2001
From: rbeer at uni-goettingen.de (Ragnar Beer)
Date: Wed, 7 Feb 2001 14:15:17 +0100
Subject: [R] Literature needed
Message-ID: <p04330103b6a6f509c17c@[134.76.136.114]>

Howdy!

Could somebody point me to some good introductory readings about data 
mining and descriptive data analysis? I'm a psychologist and a couple 
of times I realized that some things just don't appear in 
psychological literature, e.g. I've never seen a box plot anywhere in 
psych journals so I'm not familiar with them. The R help function is 
great when it comes to explaining how to use a feature and I wonder 
if that would also be a good place for literature recommendations?

A second thing I need to find some information about is if there is 
anything special to correlating measures of change. In my case I have 
measured marital satisfaction and quality of communication at two 
points in time and want to look at the correlations between 
(satisfation t2 - satisfaction t1) and (communication t2 - 
communication t1). I always thought there's nothing to it but some 
psychologist discuss a lot about correlations between changes and now 
I'm afraid I've been missing something important.

Sorry for this a bit lengthy and slightly off topic posting. Any help 
appreciated!

Ragnar Beer
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Wed Feb  7 14:50:22 2001
From: ben at zoo.ufl.edu (ben@zoo.ufl.edu)
Date: Wed, 7 Feb 2001 08:50:22 -0500 (EST)
Subject: [R] Goodness of fit to Poisson / NegBinomial
In-Reply-To: <200102070955.KAA10583@alpha.luc.ac.be>
Message-ID: <Pine.LNX.4.30.0102070829280.15668-100000@bolker.zoo.ufl.edu>


  A couple of offhand comments (which may already have occurred to you):

 1. lumping categories is relatively straightforward but a little bit hard
to automate well (and maybe not worth automating) -- it sometimes requires
a judgement call.  For example, in this case I'd probably lump categories
5, 6, and 7, but if I had another category with 4 instances of 8 mites I'd
lump (5,6) and (7,8).  It's probably just worth looking at the category
and doing things manually ...

 [snip]

> >   tab <- table(mites)
> >   NSU <- length(mites)
> >   N <- sum(mites)
> >   NSU.Mean <- N / NSU
> >   exp <- dpois(as.numeric(dimnames(tab)[[1]]), NSU.Mean) *  NSU

 Lump and truncate both the expected and observed distributions:

  tab[6] <- sum(tab[6:8])
  tab <- tab[1:6]
  exp[6] <- sum(exp[6:8])
  exp <- exp[1:6]

> >   chi2 <- sum(((as.vector(tab) - exp)^2) / exp)
> >
> >   tab
> >   exp
> >   chi2


> > I have some small expected values and so need to collapse some
> > categories. If anyone has code to do that already ... but my
> > question is how would I do the same for a negative binomial
> > distribution?
>
> The negative binomial density function is available in my rmutil
> library. (www.luc.ac.be/~jlindsey/rcode.html)

  Two more comments:

 2. the negative binomial density is also available in the base R package
(dnbinom), although the parameterization is in terms of Bernoulli trials
(size/prob) rather than the mu/(k,theta) parameterization that most
ecologists are used to.  [Incidentally, I noticed the other day that
"rnegbin" in the MASS package appears to duplicate functionality that is
(now) available in R, namely that it can generate variates for non-integer
k/theta parameters.  In my own R libraries I've also extended the *nbinom
functions so that they can alternately take the mu/k parameters instead
of size/prob.]

 3. estimating the parameters of the neg. bin. is harder than estimating
that for the Poisson; you may want to check out theta.md, theta.ml,
theta.mm in the MASS package.

  Don't have time to do a more extended example at the moment.

  Hope this helps.


>   Jim
>
> >
> > Mark
> >
> > --
> > Mark Myatt
> >
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker at zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From murdoch at stats.uwo.ca  Wed Feb  7 15:32:43 2001
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Wed, 07 Feb 2001 09:32:43 -0500
Subject: Writing graphics code (was: [R] get vector data from contour)
In-Reply-To: <20010206084520.A309@arche.ihaka>
References: <3A7E8DF5.2F737836@rcs.urz.tu-dresden.de> <20010206084520.A309@arche.ihaka>
Message-ID: <osl28tsb5hu31fmhai252epfs3ojne9hgm@4ax.com>

On Tue, 6 Feb 2001 08:45:20 +1300, Ross Ihaka wrote in message
<20010206084520.A309 at arche.ihaka>:
> I would like to see all R graphics code separated into
>computation and drawing components. This would make a number of things
>easier - eg. replacing the current drawing system with something better.

An alternative to this would be to provide access to the internals of
graphics objects.  I'm not familiar with the current internals of
plots in R, but the model I'm trying to implement in a 3D package is
to make graphics objects completely open to manipulation.  Since the
3D renderer needs to redraw the image every time it moves anyways, why
not allow the user to change what gets redrawn?  But this would be
useful even in static 2D plots, for example to rescale when new data
is added.

My current implementation has all of the data residing outside of R's
memory space, with various external functions to read and write it.
It would be better to have it entirely internal (since I'm sure it's
easy to get memory leaks now), but I'm not ready to manipulate R
internal objects yet.

There are basically two types of objects to manipulate:  primitives
(which are represented as vectors of data) like points, lines and
polygons, and groups, which are lists of objects together with a
transformation matrix.  Since groups can contain both primitives and
other groups, there's a hierarchical structure.

The low level functions add a primitive to the currently active group,
and return a pointer to it.  Users can use that pointer to move points
around, change colours, etc.

The high level functions draw lots of primitives, and return a
structure with pointers to the outermost group, and sometimes pointers
to key elements within it, or other helpful things.  (The design
hasn't settled down yet!)

One issue that I don't know how to address if this was done entirely
with R objects is what to do about all those pointers.  

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From yudi at stat.ucc.ie  Wed Feb  7 16:14:06 2001
From: yudi at stat.ucc.ie (Yudi Pawitan)
Date: Wed, 07 Feb 2001 15:14:06 +0000
Subject: [R] Goodness of fit to Poisson / NegBinomial
In-Reply-To: <jNnwrHAIIRg6EwFr@myatt.demon.co.uk>
Message-ID: <3.0.1.32.20010207151406.006fdf68@pop3.ucd.ie>

I had a very similar example before. This is for Mark's data:
(the last frequency is for k>= 5). (Mark should be happy with
the neg-binomial fit.)

-YP-

x_ c(70, 38, 17, 10,  9, 6) 
kk_ 0:5
n_ sum(x)

fn_ function(p){
    r_ p[1]
    th_ p[2]
    ll _ -sum(x[1:max(kk)]*log(dnbinom(kk[-length(kk)],r,th))) -
          x[length(kk)]*log(1-pnbinom((max(kk)-1),r,th))
    return(ll)
}

a_ nlm(fn,p=c(.9,.5),hes=T)
est_ a$est

phat_ c(dnbinom(kk[-length(kk)],est[1],est[2]),
        1-pnbinom((max(kk)-1),est[1],est[2]))
E_ n*phat
chi2_ sum((x-E)^2/E)
cat('Chi2 goodness-of-fit = ',chi2,'\n')
cat('P-value=',1-pchisq(chi2,df=length(kk)-1-2),'\n')

print(cbind(O=x,E=round(E,1),err=round((x-E)^2/E,1)))




==========================

At 09:14 AM 2/7/01 +0000, Mark Myatt <mark at myatt.demon.co.uk> wrote:
>All,
>
>I have some data on parasites on apple leaves and want to do a
>goodness of fit test to a Poisson distribution. This seems to
>do it:
>
>  mites <- c(rep(0,70),
>             rep(1,38),
>             rep(2,17), 
>             rep(3,10), 
>             rep(4,9), 
>             rep(5,3), 
>             rep(6,2), 
>             rep(7,1))
>
>  tab <- table(mites)
>  NSU <- length(mites)
>  N <- sum(mites)
>  NSU.Mean <- N / NSU
>  exp <- dpois(as.numeric(dimnames(tab)[[1]]), NSU.Mean) *  NSU
>  chi2 <- sum(((as.vector(tab) - exp)^2) / exp)
>
>  tab
>  exp
>  chi2
>  
>I have some small expected values and so need to collapse some
>categories. If anyone has code to do that already ... but my
>question is how would I do the same for a negative binomial
>distribution?
>
>Mark
>
>--
>Mark Myatt
>
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._
>
Yudi Pawitan     yudi at stat.ucc.ie
Department of Statistics UCC
Cork, Ireland
Ph   353-21-490 2906
Fax 353-21-427 1040 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Georgina.Bermann at astrazeneca.com  Wed Feb  7 17:06:00 2001
From: Georgina.Bermann at astrazeneca.com (Georgina.Bermann@astrazeneca.com)
Date: Wed, 7 Feb 2001 17:06:00 +0100 
Subject: [R] zero inflated poisson and censored-continuous models
Message-ID: <972D4394D961D211978500805F155398020D188B@se-hsl-mail030.hassle.se.astra.com>

I wonder if there is a package that will estimate a Zero Inflated Poisson
Model (ZIP), and also if there is a package that will estimate what is
called the Tobit model: that is a combination of censored and observed
values in the same sample.

Georgina Bermann
Biostatistics
AstraZeneca R&D M?lndal
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Wed Feb  7 17:25:55 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Wed, 7 Feb 2001 08:25:55 -0800 (PST)
Subject: [R] zero inflated poisson and censored-continuous models
In-Reply-To: <972D4394D961D211978500805F155398020D188B@se-hsl-mail030.hassle.se.astra.com>
Message-ID: <Pine.A41.4.21.0102070823200.112748-100000@homer40.u.washington.edu>

On Wed, 7 Feb 2001 Georgina.Bermann at astrazeneca.com wrote:

> I wonder if there is a package that will estimate a Zero Inflated Poisson
> Model (ZIP), and also if there is a package that will estimate what is
> called the Tobit model: that is a combination of censored and observed
> values in the same sample.

I don't know about the ZIP, but I think tobit regression can be done with
survreg() in survival5. This allows observed and left- and right- censored
responses and one of the available distributions is "gaussian".

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dpowers at mail.la.utexas.edu  Wed Feb  7 19:27:33 2001
From: dpowers at mail.la.utexas.edu (Daniel A. Powers)
Date: Wed, 7 Feb 2001 12:27:33 -0600 (CST)
Subject: [R] zero inflated poisson and censored-continuous models
In-Reply-To: <972D4394D961D211978500805F155398020D188B@se-hsl-mail030.hassle.se.astra.com>
Message-ID: <Pine.GSO.4.05.10102071224440.26455-100000@dahlia.la.utexas.edu>

Georgina --

For the tobit you can try using the survival5 package with
dist="gaussian". Other options for dist make this attractive.

Cheers,
Dan
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Dan Powers
Associate Professor, Sociology  
University of Texas at Austin                    


On Wed, 7 Feb 2001 Georgina.Bermann at astrazeneca.com wrote:

> I wonder if there is a package that will estimate a Zero Inflated Poisson
> Model (ZIP), and also if there is a package that will estimate what is
> called the Tobit model: that is a combination of censored and observed
> values in the same sample.
> 
> Georgina Bermann
> Biostatistics
> AstraZeneca R&D Mölndal
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bm8 at st-andrews.ac.uk  Wed Feb  7 20:03:32 2001
From: bm8 at st-andrews.ac.uk (Bernie McConnell)
Date: Wed, 07 Feb 2001 19:03:32 +0000
Subject: [R] removing trailing spaces
Message-ID: <3.0.5.32.20010207190332.00967100@bute.st-and.ac.uk>

A non-text attachment was scrubbed...
Name: not available
Type: text/enriched
Size: 880 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-help/attachments/20010207/2dfab583/attachment.bin

From ripley at stats.ox.ac.uk  Wed Feb  7 20:48:22 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 7 Feb 2001 19:48:22 +0000 (GMT)
Subject: [R] removing trailing spaces
In-Reply-To: <3.0.5.32.20010207190332.00967100@bute.st-and.ac.uk>
Message-ID: <Pine.GSO.4.31.0102071944330.14212-100000@auk.stats>

On Wed, 7 Feb 2001, Bernie McConnell wrote:

> I'm sure there must be a simple (and documented) way of doing this, but it has me stumpted. I want to remove trailing spaces from character vector yy:
>
>
> yy <<- c("abc  ","def ","hij   ")

(Not sure you really wanted <<- there.  It is rarely correct.)

sub(" +$", "", yy)

is as good as any, I believe.  That says replace one or more spaces before
the end of the string (denoted by $) by nothing.

BDR

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From feldesmanm at pdx.edu  Wed Feb  7 22:08:29 2001
From: feldesmanm at pdx.edu (Marc Feldesman)
Date: Wed, 07 Feb 2001 13:08:29 -0800
Subject: [R] Summary:  Removing "row.names"
Message-ID: <5.0.2.1.2.20010207080103.00a7e260@127.0.0.1>

Thanks to all who offered suggestions for my question of how to "remove" 
row.names.  As Bill Venables patiently pointed out, row.names are part of 
the object-oriented design of the S language (all dialects).  As a result, 
there is no way to "literally" remove row.names and still have a 
data.frame.  This was a useful thing to have Bill point out.  In fact, my 
problem was not really one of removing row.names, but changing row names to 
the default, as Brian Ripley correctly deduced from my message.

The problem arose when I received a large (ca 28,000 row) data file in 
simple .csv format.  The first row of the data set had variable names - 
"ID", followed by the names of about 10 other variables.  The following ca. 
27999 rows contained the data - one row per case.  I read the data into R 
as follows:

monkeys<-read.table("monkey.txt", header=TRUE, sep=",")

The process occurred without incident until I actually looked at the data 
brought into R.  I had expected that the ID variable would come across as a 
simple character variable labelled "ID".  It didn't.  Because the ID was 
unique, R apparently took it to be the row.name, rather than defaulting to 
the "normal".   I wasn't expecting this to occur, and the help for 
read.table() didn't suggest to me that it would occur.   All I was trying 
to do, in effect, was to eliminate the ID variable as the row.name and 
replace it by the default.  I didn't explain this very well.  My approach 
accomplished what I intended to do.  Several suggested other approaches 
that would have achieved the same effect.

After looking really closely at the original data file, I can see quite 
clearly the its author omitted one of the variable names and so there were 
fewer variable names than there were columns.  When I added the missing 
variable name, R correctly read the file in as I had expected it would.

I don't know if this is a bug in R (i.e. is R supposed to default to using 
column 1 as row.names if there are fewer column names than columns *and* 
column 1 is unique), or if it is working as designed.











=====================
Dr. Marc R. Feldesman
Professor and Chairman
Anthropology Department
Portland State University
1721 SW Broadway
Portland, Oregon 97201
email:  feldesmanm at pdx.edu
phone:  503-725-3081
fax:    503-725-3905
http://web.pdx.edu/~h1mf
PGP Key Available On Request
======================

"Anyway, no drug, not even alcohol, causes the fundamental ills of society.
If we're looking for the source of our troubles, we shouldn't test people
for drugs, we should test them for stupidity, ignorance, greed and love of
power."   P.J. O'Rourke

Powered by Optiplochoerus and Windows 2000 (scary isn't it?)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From faheem at email.unc.edu  Wed Feb  7 22:25:55 2001
From: faheem at email.unc.edu (Faheem Mitha)
Date: Wed, 7 Feb 2001 16:25:55 -0500 (EST)
Subject: [R] Re: failed rpm installation of R 1.2-1 (fwd)
In-Reply-To: <Pine.OSF.4.21.0102070723210.8213-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <Pine.LNX.4.21.0102071620530.463-100000@Chrestomanci.home.earth>



On Wed, 7 Feb 2001, Albrecht Gebhardt wrote:

> On Wed, 7 Feb 2001, Faheem Mitha wrote:

> > error: failed dependencies:
> >         BEGIN is needed by R-base-1.2.1-1
[snip]

> I guess, there is some executable file (a snippet of some script with mode
> 755 or similar) which starts with a line "BEGIN". ....
> 
> Well, I just found it, it is an awk script:
> find -type f -exec grep -l BEGIN {} \;
> ...
> ./bin/maketitle.awk
> 
> Clearly it doesn't need the executable bits so simply add
> 
> chmod 644 $RPM_BUILD_ROOT/%{prefix}/R/bin/maketitle.awk
> 
> to the end of the %install section of my spec file.

Actually, I think this should be
$RPM_BUILD_ROOT%{prefix}/lib/R/bin/maketitle.awk

With this change, the rpm installs successfully. Thanks a lot, Albrecht!
By the way, your rpm spec file is one of the best-written I have seen.
Just one more thing: could you briefly explain to me for future reference
(off-list) why there was a problem, and the above fixed things?

                                Sincerely, Faheem Mitha.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Feb  7 23:01:01 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 7 Feb 2001 22:01:01 +0000 (GMT Standard Time)
Subject: [R] Summary:  Removing "row.names"
In-Reply-To: <5.0.2.1.2.20010207080103.00a7e260@127.0.0.1>
Message-ID: <Pine.WNT.4.31.0102072157110.250-100000@tern.stats>

On Wed, 7 Feb 2001, Marc Feldesman wrote:

[...]

> I don't know if this is a bug in R (i.e. is R supposed to default to using
> column 1 as row.names if there are fewer column names than columns *and*
> column 1 is unique), or if it is working as designed.

It is intentional (and used quite a lot). I think this is clear from the
description in the R Data Import/Export manual, but please let me
know (off line) if you can suggest any improvements.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Ko-Kang at xtra.co.nz  Wed Feb  7 23:19:06 2001
From: Ko-Kang at xtra.co.nz (Ko-Kang@xtra.co.nz)
Date: Thu, 8 Feb 2001 11:19:06 +1300
Subject: [R] Literature needed
References: <p04330103b6a6f509c17c@[134.76.136.114]>
Message-ID: <00b201c09153$fdc47e40$4bb337d2@KoKang>

Hi Ragnar,

A good place to start is the Two Crows Corporation,
http://www.twocrows.com/.  There are many links and resources on Data Mining
that you may find useful (at least I did).  You can also request to receive
a free pdf copy of the their DM tutorial, Introduction to Data Mining and
Knowledge Discovery (they'll send the copy to an e-mail address you
specified).  You may want to click on the hyperlink "About Data Mining"
first.

However, if you need the information urgently, I've got a copy of it at
http://www.stat.auckland.ac.nz/~kwan022/pub/DataMining/, which I just posted
up for you.  There are also a few other articles that I've collected from
varies places in the last few months, which may or may not be useful for
you.  However I put them up for you to have a look.

Hope this helps,

----------------------------------------------
Ko-Kang Wang
Undergraduate Student (Final Year)
Statistics Department
Science Faculty
University of Auckland



----- Original Message -----
From: "Ragnar Beer" <rbeer at uni-goettingen.de>
To: <r-help at stat.math.ethz.ch>
Sent: Thursday, February 08, 2001 2:15 AM
Subject: [R] Literature needed


> Howdy!
>
> Could somebody point me to some good introductory readings about data
> mining and descriptive data analysis? I'm a psychologist and a couple
> of times I realized that some things just don't appear in
> psychological literature, e.g. I've never seen a box plot anywhere in
> psych journals so I'm not familiar with them. The R help function is
> great when it comes to explaining how to use a feature and I wonder
> if that would also be a good place for literature recommendations?
>
> Sorry for this a bit lengthy and slightly off topic posting. Any help
> appreciated!
>
> Ragnar Beer
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Diego at kuonen.com  Thu Feb  8 00:58:26 2001
From: Diego at kuonen.com (Diego Kuonen)
Date: Thu, 08 Feb 2001 00:58:26 +0100
Subject: [R] Literature needed
References: <p04330103b6a6f509c17c@[134.76.136.114]> <00b201c09153$fdc47e40$4bb337d2@KoKang>
Message-ID: <3A81E122.A95EEDCE@Kuonen.com>

> > Could somebody point me to some good introductory readings about data
> > mining and descriptive data analysis? 

You may also want to check out my bookmarks on DM:

  http://bookmarks.kuonen.com/Statistics/Datamining/

or directly my list of interesting articles:

  http://bookmarks.kuonen.com/Statistics/Datamining/Articles/

Or the DM of Statoo.com:

  http://www.statoo.com/sections/Datamining/

Greets

  Diego

-- 
Diego Kuonen $\in$ Chairs of Statistics $\subset$ DMA \@ EPFL
http://stat.kuonen.com                  http://www.Statoo.com 
- How do I type "for i in *.dvi do xdvi $i done" in a GUI ? - 
/*      panic("esp: Aiee penguin on the SCSI-bus.");       */
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From faheem at email.unc.edu  Thu Feb  8 05:23:51 2001
From: faheem at email.unc.edu (Faheem Mitha)
Date: Wed, 7 Feb 2001 23:23:51 -0500 (EST)
Subject: [R] eps file not positioned properly in latex document
Message-ID: <Pine.LNX.4.21.0102072316290.463-100000@Chrestomanci.home.earth>

Dear People,

I am trying to include a barplot (see code below), in a latex document.
However, the plot appears in totally the wrong position. I know this is
not an R question as such, but the eps file is produced by R and I thought
that perhaps other people had had similar problems and could give me
pointers. Am I doing anything obviously wrong?

                   Sincerely, Faheem Mitha.

PS. the code I use to include the eps file is 

\begin{figure}  
\includegraphics[scale=0.7]{barplot.eps} 
\end{figure}

which seems harmless enough.             Faheem.

*************************************************************************

roy <- c("white","blue","yellow")
collen <- c(31,33,33)
fmcol <- rep(roy,collen)

postscript(file="barplot.eps",width=6.3,height=3,bg="white",
         horizontal=FALSE,paper="special",onefile=FALSE,fg="black")

barplot(c(0.1,0.2,0.2,0.4,0,0,0,0,0,0,0,0,0,0.1), col=fmcol,
names.arg=c("-3","-2","-1","0","1","2","3","4","5","6","7","8","9","10"),
ylim=c(0,0.5),xlab="Values of x",ylab="Probability values",sub=NULL,
style="old",main="Probability Histogram")

dev.off()

**************************************************************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Torsten.Hothorn at rzmail.uni-erlangen.de  Thu Feb  8 08:05:16 2001
From: Torsten.Hothorn at rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Thu, 8 Feb 2001 08:05:16 +0100 (MET)
Subject: [R] eps file not positioned properly in latex document
In-Reply-To: <Pine.LNX.4.21.0102072316290.463-100000@Chrestomanci.home.earth>
Message-ID: <Pine.LNX.4.21.0102080757320.6242-100000@artemis.imbe.med.uni-erlangen.de>

> Dear People,
> 
> I am trying to include a barplot (see code below), in a latex document.
> However, the plot appears in totally the wrong position. 

What means "totally the wrong position"?

> I know this is
> not an R question as such, but the eps file is produced by R and I thought
> that perhaps other people had had similar problems and could give me
> pointers. Am I doing anything obviously wrong?
> 
>                    Sincerely, Faheem Mitha.
> 
> PS. the code I use to include the eps file is 
> 
> \begin{figure}  
> \includegraphics[scale=0.7]{barplot.eps} 
> \end{figure}

I tried:

\usepackage{epsfig}

blablabla...

\begin{figure}[h]
\begin{center}
\epsfig{file=barplot.eps}
\end{center}
\end{figure}

with your code, which looks fine.

Note the waring messages:

>  roy <- c("white","blue","yellow")
>  collen <- c(31,33,33)
>  fmcol <- rep(roy,collen)
> 
>  postscript(file="barplot.eps",width=6.3,height=3,bg="white",
+           horizontal=FALSE,paper="special",onefile=FALSE,fg="black")
>  
>  barplot(c(0.1,0.2,0.2,0.4,0,0,0,0,0,0,0,0,0,0.1), col=fmcol,
+
names.arg=c("-3","-2","-1","0","1","2","3","4","5","6","7","8","9","10"),
+  ylim=c(0,0.5),xlab="Values of x",ylab="Probability values",sub=NULL,
+  style="old",main="Probability Histogram")
Warning messages: 
1: parameter "style" couldn't be set in high-level plot() function 
2: parameter "style" couldn't be set in high-level plot() function 
>  
>  dev.off()
null device 
          1 

Torsten

> 
> which seems harmless enough.             Faheem.
> 
> *************************************************************************
> 
> roy <- c("white","blue","yellow")
> collen <- c(31,33,33)
> fmcol <- rep(roy,collen)
> 
> postscript(file="barplot.eps",width=6.3,height=3,bg="white",
>          horizontal=FALSE,paper="special",onefile=FALSE,fg="black")
> 
> barplot(c(0.1,0.2,0.2,0.4,0,0,0,0,0,0,0,0,0,0.1), col=fmcol,
> names.arg=c("-3","-2","-1","0","1","2","3","4","5","6","7","8","9","10"),
> ylim=c(0,0.5),xlab="Values of x",ylab="Probability values",sub=NULL,
> style="old",main="Probability Histogram")
> 
> dev.off()
> 
> **************************************************************************
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gb at stat.umu.se  Thu Feb  8 08:11:25 2001
From: gb at stat.umu.se (gb)
Date: Thu, 8 Feb 2001 08:11:25 +0100 (CET)
Subject: [R] eps file not positioned properly in latex document
In-Reply-To: <Pine.LNX.4.21.0102072316290.463-100000@Chrestomanci.home.earth>
Message-ID: <Pine.LNX.4.30.0102080809220.6453-100000@tal.stat.umu.se>

On Wed, 7 Feb 2001, Faheem Mitha wrote:

> Dear People,
>
> I am trying to include a barplot (see code below), in a latex document.
> However, the plot appears in totally the wrong position. I know this is
> not an R question as such, but the eps file is produced by R and I thought
> that perhaps other people had had similar problems and could give me
> pointers. Am I doing anything obviously wrong?

Yes, you should read the LaTeX manuals, for instance the "LaTeX Companion"
LaTeX has its own preferences regarding placing of figures and tables.

G?ran
[...]
-- 
 G?ran Brostr?m                      tel: +46 90 786 5223
 professor                           fax: +46 90 786 6614
 Department of Statistics            http://www.stat.umu.se/egna/gb/
 Ume? University
 SE-90187 Ume?, Sweden             e-mail: gb at stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From theis at statistik.uni-dortmund.de  Thu Feb  8 08:29:06 2001
From: theis at statistik.uni-dortmund.de (Winfried Theis)
Date: Thu, 08 Feb 2001 08:29:06 +0100 (MET)
Subject: [R] eps file not positioned properly in latex document
In-Reply-To: <Pine.LNX.4.21.0102072316290.463-100000@Chrestomanci.home.earth>
Message-ID: <XFMail.010208082906.theis@statistik.uni-dortmund.de>

Hello!
On 08-Feb-01 Faheem Mitha wrote:
> Dear People,
> 
> I am trying to include a barplot (see code below), in a latex document.
> However, the plot appears in totally the wrong position. I know this is
> not an R question as such, but the eps file is produced by R and I thought
> that perhaps other people had had similar problems and could give me
> pointers. Am I doing anything obviously wrong?
> 
>                    Sincerely, Faheem Mitha.
Well, this has to do with R since  dev.print has landscape=TRUE as default,
which causes the graphics to appear turned by 90 degrees. So there are two
solutions: Setting landscape=FALSE in dev.print or adding angle=270 to your
includegraphics  line.

Winfried
> 
> PS. the code I use to include the eps file is 
> 
> \begin{figure}  
> \includegraphics[scale=0.7]{barplot.eps} 
> \end{figure}
> 
> which seems harmless enough.             Faheem.
> 
> *************************************************************************
> 
> roy <- c("white","blue","yellow")
> collen <- c(31,33,33)
> fmcol <- rep(roy,collen)
> 
> postscript(file="barplot.eps",width=6.3,height=3,bg="white",
>          horizontal=FALSE,paper="special",onefile=FALSE,fg="black")
> 
> barplot(c(0.1,0.2,0.2,0.4,0,0,0,0,0,0,0,0,0,0.1), col=fmcol,
> names.arg=c("-3","-2","-1","0","1","2","3","4","5","6","7","8","9","10"),
> ylim=c(0,0.5),xlab="Values of x",ylab="Probability values",sub=NULL,
> style="old",main="Probability Histogram")
> 
> dev.off()
> 
> **************************************************************************
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _

----------------------------------
E-Mail: Winfried Theis <theis at statistik.uni-dortmund.de>
Date: 08-Feb-01
Time: 08:15:48
Dipl.-Math. Winfried Theis, Fachbereich Statistik, Graduiertenkolleg
"Angewandte Statistik"
Universität Dortmund, 44221 Dortmund
Tel.: +49-231-755-5903  FAX: +49-231-755-4387
----------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mcbroom at stats.ox.ac.uk  Thu Feb  8 09:37:25 2001
From: mcbroom at stats.ox.ac.uk (James McBroom)
Date: Thu, 08 Feb 2001 08:37:25 +0000
Subject: [R] zero inflated poisson and censored-continuous models
References: <972D4394D961D211978500805F155398020D188B@se-hsl-mail030.hassle.se.astra.com>
Message-ID: <3A825AC5.4070506@stats.ox.ac.uk>

Georgina,

There are a few packages that estimate parameters of a ZIP model. Try 
Emma Podlich's site at

                         http://www.maths.uq.edu.au/~hmp

(and see the Snews archive:  http://lib.stat.cmu.edu/s-news/Burst/13939)

James.


Georgina.Bermann at astrazeneca.com wrote:

> I wonder if there is a package that will estimate a Zero Inflated Poisson
> Model (ZIP), and also if there is a package that will estimate what is
> called the Tobit model: that is a combination of censored and observed
> values in the same sample.
> 
> Georgina Bermann
> Biostatistics
> AstraZeneca R&D M?lndal
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
-- 
James McBroom :-)
Department of Statistics,     web: http://www.stats.ox.ac.uk/~mcbroom 
University of Oxford,         
1 South Parks Road,            ph: +44 (0)1865 272879
Oxford UK OX1 3TG.            fax: +44 (0)1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mcbroom at stats.ox.ac.uk  Thu Feb  8 09:50:33 2001
From: mcbroom at stats.ox.ac.uk (James McBroom)
Date: Thu, 08 Feb 2001 08:50:33 +0000
Subject: [R] zero inflated poisson and censored-continuous models
Message-ID: <3A825DD9.4010501@stats.ox.ac.uk>

James McBroom wrote:

> Georgina,
> 
> There are a few packages that estimate parameters of a ZIP model. Try  
> Emma Podlich's site at
> 
>                        http://www.maths.uq.edu.au/~hmp
> 
> (and see the Snews archive:  http://lib.stat.cmu.edu/s-news/Burst/13939)
> 
> James.


Apologies: That  should be Heather (not Emma) Podlich.

James.

-- 
James McBroom [:-)]
Department of Statistics,     web: http://www.stats.ox.ac.uk/~mcbroom
University of Oxford,        
1 South Parks Road,            ph: +44 (0)1865 272879
Oxford UK OX1 3TG.        fax: +44 (0)1865 272595



From ripley at stats.ox.ac.uk  Thu Feb  8 09:51:16 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 8 Feb 2001 08:51:16 +0000 (GMT)
Subject: [R] eps file not positioned properly in latex document
In-Reply-To: <XFMail.010208082906.theis@statistik.uni-dortmund.de>
Message-ID: <Pine.GSO.4.31.0102080840540.6211-100000@toucan.stats>

On Thu, 8 Feb 2001, Winfried Theis wrote:

> Hello!
> On 08-Feb-01 Faheem Mitha wrote:
> > Dear People,
> >
> > I am trying to include a barplot (see code below), in a latex document.
> > However, the plot appears in totally the wrong position. I know this is
> > not an R question as such, but the eps file is produced by R and I thought
> > that perhaps other people had had similar problems and could give me
> > pointers. Am I doing anything obviously wrong?
> >
> >                    Sincerely, Faheem Mitha.

> Well, this has to do with R since  dev.print has landscape=TRUE as default,

Actually, it uses the setting of horizontal give by ps.options.

> which causes the graphics to appear turned by 90 degrees. So there are two
> solutions: Setting landscape=FALSE in dev.print or adding angle=270 to your
> includegraphics  line.

Hoever, Faheem didn't use dev.print!  If you want to make a postscript
figure for inclusion, please use dev.copy2eps, which was written for that
purpose.

The options on postscript that Faheem used look correct to me, although
I think that with those sizes I would think about reducing the pointsize.

I believe the issue is with the latex.  Currently the preferred options
are packages graphics or graphicx.  Using graphicx, the example worked for
me, and it was included in the right place, but you need to understand
what LaTeX means by that.


>
> Winfried
> >
> > PS. the code I use to include the eps file is
> >
> > \begin{figure}
> > \includegraphics[scale=0.7]{barplot.eps}
> > \end{figure}
> >
> > which seems harmless enough.             Faheem.
> >
> > *************************************************************************
> >
> > roy <- c("white","blue","yellow")
> > collen <- c(31,33,33)
> > fmcol <- rep(roy,collen)
> >
> > postscript(file="barplot.eps",width=6.3,height=3,bg="white",
> >          horizontal=FALSE,paper="special",onefile=FALSE,fg="black")
> >
> > barplot(c(0.1,0.2,0.2,0.4,0,0,0,0,0,0,0,0,0,0.1), col=fmcol,
> > names.arg=c("-3","-2","-1","0","1","2","3","4","5","6","7","8","9","10"),
> > ylim=c(0,0.5),xlab="Values of x",ylab="Probability values",sub=NULL,
> > style="old",main="Probability Histogram")
> >
> > dev.off()
> >
> > **************************************************************************
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -
> > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _
>
> ----------------------------------
> E-Mail: Winfried Theis <theis at statistik.uni-dortmund.de>
> Date: 08-Feb-01
> Time: 08:15:48
> Dipl.-Math. Winfried Theis, Fachbereich Statistik, Graduiertenkolleg
> "Angewandte Statistik"
> Universität Dortmund, 44221 Dortmund
> Tel.: +49-231-755-5903  FAX: +49-231-755-4387
> ----------------------------------
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From james.lindsey at luc.ac.be  Thu Feb  8 10:06:21 2001
From: james.lindsey at luc.ac.be (Jim Lindsey)
Date: Thu, 8 Feb 2001 10:06:21 +0100 (MET)
Subject: [R] zero inflated poisson and censored-continuous models
In-Reply-To: <972D4394D961D211978500805F155398020D188B@se-hsl-mail030.hassle.se.astra.com> from "Georgina.Bermann@astrazeneca.com" at Feb 07, 2001 05:06:00 PM
Message-ID: <200102080906.KAA10752@alpha.luc.ac.be>


> 
> I wonder if there is a package that will estimate a Zero Inflated Poisson
> Model (ZIP), and also if there is a package that will estimate what is
> called the Tobit model: that is a combination of censored and observed
> values in the same sample.

My fmr function in my gnlm library will do zeo-inflated Poisson models
available at www.luc.ac.be/~jlindsey/rcode.html
  Jim

> 
> Georgina Bermann
> Biostatistics
> AstraZeneca R&D M?lndal
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mark at myatt.demon.co.uk  Thu Feb  8 11:13:09 2001
From: mark at myatt.demon.co.uk (Mark Myatt)
Date: Thu, 8 Feb 2001 10:13:09 +0000
Subject: [R] Goodness of fit to Poisson / NegBinomial
In-Reply-To: <200102071019.KAA03047@toucan.stats.ox.ac.uk>
References: <200102071019.KAA03047@toucan.stats.ox.ac.uk>
Message-ID: <vroTSEA1Eng6EwmJ@myatt.demon.co.uk>

I (Mark Myatt) wrote:

> > I have some data on parasites on apple leaves and want to do a
> > goodness of fit test to a Poisson distribution. This seems to
> > do it:
> > 
> >   mites <- c(rep(0,70),
> >              rep(1,38),
> >              rep(2,17), 
> >              rep(3,10), 
> >              rep(4,9), 
> >              rep(5,3), 
> >              rep(6,2), 
> >              rep(7,1))
> > 
> >   tab <- table(mites)
> >   NSU <- length(mites)
> >   N <- sum(mites)
> >   NSU.Mean <- N / NSU
> >   exp <- dpois(as.numeric(dimnames(tab)[[1]]), NSU.Mean) *  NSU
> >   chi2 <- sum(((as.vector(tab) - exp)^2) / exp)
> > 
> >   tab
> >   exp
> >   chi2
> >   
> > I have some small expected values and so need to collapse some
> > categories. If anyone has code to do that already ... but my
> > question is how would I do the same for a negative binomial
> > distribution?

Jim Lindsey wrote:

>> The negative binomial density function is available in my rmutil
>> library. (www.luc.ac.be/~jlindsey/rcode.html)

Brian Ripley wrote:

>It is in R too, dnbinom.

That was silly of me ... It is even there on the dpois() help page that
I had already visited. I have a further question ... I am not familiar
with the parameters required for dnbinom:

        dnbinom(x, size, prob, log = FALSE)

I am used to 'mu' and 'k'. The parameter 'prob' is I think the failure
probability:

        tab[[1]] / NSU

Is that right? I am unsure of how to specify the 'size' parameter in
this context.

I have a proto-function working without dnbinom():

neg.bin.gof <- function(data)
  {
  
  case.count <- vector(mode = "numeric", length = max(data) + 2)
  observed <- vector(mode = "numeric", length = max(data) + 2)
  neg.bin.expected <- vector(mode = "numeric", length = max(data) + 2)
  neg.bin.partial.chi.square <- vector(mode = "numeric", length = 
    max(data) + 2)
  
  #
  # calculate frequencies
  #
  for (i in 0:(max(data) + 1))
    {
    case.count[i + 1] <- i
    observed[i + 1] <- sum(data == i)
    }  
 
  #
  # calculate summary measures
  #
  N.SU <- length(data)
  cases <- sum(data)
  cases.per.SU.mean <- cases / N.SU
  cases.per.SU.var <- var(data)
  
  #
  # find negative parameter 'k' by successive approximation
  #
  delta.direction <- 0
  delta.difference <- 1
  k <- cases.per.SU.mean ^ 2 / (cases.per.SU.var - cases.per.SU.mean)
  repeat  
    { 
    difference <- log10(N.SU / observed[1]) - k * log10(1 + 
      (cases.per.SU.mean / k))
    if(abs(difference) < 0.0000001) break
    if (delta.direction != sign(difference)) delta.difference <- 
      delta.difference / 10
    delta.direction <- sign(difference)
    k <- k + delta.direction * delta.difference
    }  

  #
  # calculate expected number of sampling units with ZERO cases
  #
  neg.bin.expected[1]  <- (1 + (cases.per.SU.mean / k)) ^ (0 - k) * N.SU
  neg.bin.sum.expected <- neg.bin.expected[1]
  
  #
  # calculate expected number of sampling units with 1, 2, etc. cases 
  #
  for (i in 2:(max(data) + 1))
    {
    neg.bin.expected[i] <- (cases.per.SU.mean / (cases.per.SU.mean + k)) 
      * ((k + i - 1 - 1) / (i - 1)) * neg.bin.expected[i - 1]
    neg.bin.sum.expected <- neg.bin.sum.expected + neg.bin.expected[i]
    } 
  neg.bin.expected[max(data) + 2] <- N.SU - neg.bin.sum.expected  

  #
  # calculate chi-square statistic
  #
  neg.bin.partial.chi.square <- (observed - neg.bin.expected) ^ 2 / 
    neg.bin.expected
  neg.bin.chi.square.statistic <- sum(neg.bin.partial.chi.square)  

  #
  # some output ... punt out as a list when function debugged
  #
  output.table <- cbind(case.count, observed, neg.bin.expected,
    neg.bin.partial.chi.square)
  print(output.table)  
  print(neg.bin.chi.square.statistic)
  print(k)
}

But I really should plug a gap in my ignorance.

Mark


--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pflugshaupt at cirsium.ethz.ch  Thu Feb  8 14:52:15 2001
From: pflugshaupt at cirsium.ethz.ch (Kaspar Pflugshaupt)
Date: Thu, 8 Feb 2001 14:52:15 +0100
Subject: [R] Test for multiple contrasts?
Message-ID: <01020814521501.00878@Aconitum>

Hello,

I've fitted a parametric survival model by

> survreg(Surv(Week, Cens) ~ C(Treatment, srmod.contr), 
>    data = poll.surv.wo3)

where srmod.contr is the following matrix of contrasts:

     prep auto       poll self home
[1,]    1    1  1.0000000  0.0    0
[2,]   -1    0  0.0000000  0.0    0
[3,]    0   -1  0.0000000  0.0    0
[4,]    0    0 -0.3333333  1.0    0
[5,]    0    0 -0.3333333 -0.5    1
[6,]    0    0 -0.3333333 -0.5   -1

The summary of the model looks like this:

[snip]
                                Value Std. Error      z         p
(Intercept)                    1.4644     0.0552 26.536 3.68e-155
C(Treatment, srmod.contr)prep  0.2117     0.1268  1.669  9.50e-02
C(Treatment, srmod.contr)auto  0.1490     0.1265  1.178  2.39e-01
C(Treatment, srmod.contr)poll -0.7242     0.1639 -4.420  9.89e-06
C(Treatment, srmod.contr)self -0.2960     0.1141 -2.593  9.51e-03
C(Treatment, srmod.contr)home  0.0494     0.1068  0.462  6.44e-01
Log(scale)                    -0.4451     0.0517 -8.609  7.36e-18

[snip]

Now, I'd like to test which of my contrasts are significantly different from 
zero. I assume that the p values given by the summary are not corrected for 
multiple testing. Thus, I might correct them with p.adjust(). But since the 
contrasts are not independent, I'm not sure if the adjustment methods would 
work here.
On the other hand, I've come across a procedure called "Scheffe's multiple 
comparisons" (or S test), which is said to be appropriate for multiple 
contrasts like these. Before I try to implement it: Has anybody already done 
that, or are there good reasons not to use it?

BTW, I tried to extract the SEs of the contrasts by se.contrast(), but it 
would not work for survival models. Would they be the same that appear in the 
summary above? 

Thanks for any hints

Kaspar Pflugshaupt

-- 


Kaspar Pflugshaupt
Geobotanical Institute
ETH Zurich, Switzerland

http://www.geobot.umnw.ethz.ch
mailto:pflugshaupt at geobot.umnw.ethz.ch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mark at myatt.demon.co.uk  Thu Feb  8 15:31:32 2001
From: mark at myatt.demon.co.uk (Mark Myatt)
Date: Thu, 8 Feb 2001 14:31:32 +0000
Subject: [R] Goodness of fit to Poisson / NegBinomial
In-Reply-To: <3.0.1.32.20010207151406.006fdf68@pop3.ucd.ie>
References: <jNnwrHAIIRg6EwFr@myatt.demon.co.uk>
 <3.0.1.32.20010207151406.006fdf68@pop3.ucd.ie>
Message-ID: <Y2UOVXAE3qg6EwQG@myatt.demon.co.uk>

Yudi,

Thanks for this:

>x_ c(70, 38, 17, 10,  9, 6) 
>kk_ 0:5
>n_ sum(x)
>
>fn_ function(p){
>    r_ p[1]
>    th_ p[2]
>    ll _ -sum(x[1:max(kk)]*log(dnbinom(kk[-length(kk)],r,th))) -
>          x[length(kk)]*log(1-pnbinom((max(kk)-1),r,th))
>    return(ll)
>}
>
>a_ nlm(fn,p=c(.9,.5),hes=T)
>est_ a$est
>
>phat_ c(dnbinom(kk[-length(kk)],est[1],est[2]),
>        1-pnbinom((max(kk)-1),est[1],est[2]))
>E_ n*phat
>chi2_ sum((x-E)^2/E)
>cat('Chi2 goodness-of-fit = ',chi2,'\n')
>cat('P-value=',1-pchisq(chi2,df=length(kk)-1-2),'\n')
>
>print(cbind(O=x,E=round(E,1),err=round((x-E)^2/E,1)))

It is certainly more elegant than anything I would have come up with but
I just cannot get it to work (Rwin 1.21). The call to nlm() returns:

        Warning messages: 
        1: NA/Inf replaced by maximum positive value 
        2: NA/Inf replaced by maximum positive value 
        3: NA/Inf replaced by maximum positive value 
        4: NA/Inf replaced by maximum positive value 
        5: NA/Inf replaced by maximum positive value 
        6: NA/Inf replaced by maximum positive value 
        7: NA/Inf replaced by maximum positive value 
        8: NA/Inf replaced by maximum positive value 

est holds the starting parameters:

        [1] 0.9 0.5

E (from n*phat) holds:

        [1] 80.38301  0.00000  0.00000  0.00000  0.00000  3.90972

which gives a very big chi-square.

Sorry to be a nuisance.

Mark


--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mark at myatt.demon.co.uk  Thu Feb  8 15:07:07 2001
From: mark at myatt.demon.co.uk (Mark Myatt)
Date: Thu, 8 Feb 2001 14:07:07 +0000
Subject: [R] Goodness of fit to Poisson / NegBinomial
In-Reply-To: <Pine.LNX.4.30.0102070829280.15668-100000@bolker.zoo.ufl.edu>
References: <200102070955.KAA10583@alpha.luc.ac.be>
 <Pine.LNX.4.30.0102070829280.15668-100000@bolker.zoo.ufl.edu>
Message-ID: <OG3LpTALgqg6EwwC@myatt.demon.co.uk>

An embedded and charset-unspecified text was scrubbed...
Name: negbingof.r
Url: https://stat.ethz.ch/pipermail/r-help/attachments/20010208/8d4c527f/negbingof.pl

From p.dalgaard at biostat.ku.dk  Thu Feb  8 16:27:42 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Feb 2001 16:27:42 +0100
Subject: [R] Test for multiple contrasts?
In-Reply-To: Kaspar Pflugshaupt's message of "Thu, 8 Feb 2001 14:52:15 +0100"
References: <01020814521501.00878@Aconitum>
Message-ID: <x2vgqlfb4h.fsf@blueberry.kubism.ku.dk>

Kaspar Pflugshaupt <pflugshaupt at cirsium.ethz.ch> writes:

> Now, I'd like to test which of my contrasts are significantly different from 
> zero. I assume that the p values given by the summary are not corrected for 
> multiple testing. Thus, I might correct them with p.adjust(). But since the 
> contrasts are not independent, I'm not sure if the adjustment methods would 
> work here.
> On the other hand, I've come across a procedure called "Scheffe's multiple 
> comparisons" (or S test), which is said to be appropriate for multiple 
> contrasts like these. Before I try to implement it: Has anybody already done 
> that, or are there good reasons not to use it?

The p.adjust methods do work for correlated tests, at least the Holm
and Bonferroni tests where I can understand the theory. The Hochberg
test has some amount of handwaving associated with it, but it too is
intended to be applied to testing contrasts. 

Scheffe also works with correlated tests. It is more conservative than
the other tests because it protects against multiple testing on any
number of linear contrasts by projecting the (F-based) multivariate
confidence region onto the direction given by the contrast. This
argues both for and against its use...


> BTW, I tried to extract the SEs of the contrasts by se.contrast(), but it 
> would not work for survival models. Would they be the same that appear in the 
> summary above? 

se.contrast works for aov models only. You probably need to massage
the covariance matrix for the estimates.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Thu Feb  8 17:34:10 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Thu, 8 Feb 2001 08:34:10 -0800 (PST)
Subject: [R] Test for multiple contrasts?
In-Reply-To: <01020814521501.00878@Aconitum>
Message-ID: <Pine.A41.4.21.0102080826010.191392-100000@homer40.u.washington.edu>

On Thu, 8 Feb 2001, Kaspar Pflugshaupt wrote:

> Hello,
> 
> I've fitted a parametric survival model by
> 
> > survreg(Surv(Week, Cens) ~ C(Treatment, srmod.contr), 
> >    data = poll.surv.wo3)
> 
> where srmod.contr is the following matrix of contrasts:
> 
>      prep auto       poll self home
> [1,]    1    1  1.0000000  0.0    0
> [2,]   -1    0  0.0000000  0.0    0
> [3,]    0   -1  0.0000000  0.0    0
> [4,]    0    0 -0.3333333  1.0    0
> [5,]    0    0 -0.3333333 -0.5    1
> [6,]    0    0 -0.3333333 -0.5   -1
> 
> The summary of the model looks like this:
> 
> [snip]
>                                 Value Std. Error      z         p
> (Intercept)                    1.4644     0.0552 26.536 3.68e-155
> C(Treatment, srmod.contr)prep  0.2117     0.1268  1.669  9.50e-02
> C(Treatment, srmod.contr)auto  0.1490     0.1265  1.178  2.39e-01
> C(Treatment, srmod.contr)poll -0.7242     0.1639 -4.420  9.89e-06
> C(Treatment, srmod.contr)self -0.2960     0.1141 -2.593  9.51e-03
> C(Treatment, srmod.contr)home  0.0494     0.1068  0.462  6.44e-01
> Log(scale)                    -0.4451     0.0517 -8.609  7.36e-18
> 
> [snip]
> 
> Now, I'd like to test which of my contrasts are significantly different from 
> zero. I assume that the p values given by the summary are not corrected for 
> multiple testing. Thus, I might correct them with p.adjust(). But since the 
> contrasts are not independent, I'm not sure if the adjustment methods would 
> work here.

The adjustment procedures are valid for dependent p-values. They wouldn't
be much use otherwise.  To be precise, the Holm method is valid
universally, the Hochberg method can sometimes slightly exceed the nominal
type I error.

> On the other hand, I've come across a procedure called "Scheffe's multiple 
> comparisons" (or S test), which is said to be appropriate for multiple 
> contrasts like these. Before I try to implement it: Has anybody already done 
> that, or are there good reasons not to use it?

The Scheffe procedure maintains the Type I error over all possible
contrasts, making it more conservative. On the other hand, it uses the
estimated  covariance among the parameters, which might make it less
conservative.  


> BTW, I tried to extract the SEs of the contrasts by se.contrast(), but it 
> would not work for survival models. Would they be the same that appear in the 
> summary above? 

Yes, that's why they are there :)

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From faheem at email.unc.edu  Thu Feb  8 17:37:47 2001
From: faheem at email.unc.edu (Faheem Mitha)
Date: Thu, 8 Feb 2001 11:37:47 -0500 (EST)
Subject: [R] eps file not positioned properly in latex document
Message-ID: <Pine.LNX.4.21.0102081122520.502-100000@Chrestomanci.home.earth>

Dear People,

Thanks to everyone who replied. As several people pointed out, "in totally
the wrong position" is not very helpful, but it was late and I was tired.
Sorry about that.

What I have is a page of text, and I want the barplot inserted about
two-thirds of the way down the page, and it insisted on appearing at the
top of the page. Both Dennis Murphy and Torsten Hothorn pointed me the
solution, ie. the option h (here) to the figure environment, thus:

\begin{figure}[h]  
\includegraphics[scale=0.7]{barplot.eps} 
\end{figure}

I really don't understand why this isn't the default. (Apparently the
default is tbp [top bottom page], but I don't understand how several of
these options are applicable simultaneously. Perhaps this just means that
if one of these is not possible it moves on to the next in order of
preference?) As you can see, I am not really that experienced with these
things, or I would have known this already.

Sorry about cluttering up the list with irrelevant stuff. My Latex book
sort of misled me by implying (in the section on \includegraphics) that if
the figure did not appear in the right place, there might be something
wrong with the bounding-box information. It turned out that the section on
the figure environment was actually the relevant part.

                                  Sincerely, Faheem Mitha.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dieter.menne at menne-biomed.de  Sun Feb  4 21:20:38 2001
From: dieter.menne at menne-biomed.de (Dieter Menne)
Date: Sun, 04 Feb 2001 21:20:38 +0100
Subject: [R] quinModel S != R
Message-ID: <NBBBIJMBGLHMKHGCPFJKOECGCGAA.dieter.menne@menne-biomed.de>

Dear friends of nlme,

Running quinModel (Pinheiro/Bates page 380) on R (current release, windows)
gives:

Nonlinear mixed-effects model fit by maximum likelihood
  Model: conc ~ quinModel(Subject, time, conc, dose, interval, lV, lKa,
lCl)
  Data: Quinidine
  Log-likelihood: -497
  Fixed: lV + lKa + lCl ~ 1
    lV    lKa    lCl
 5.382 -0.273  2.470

Random effects:
 Formula: list(lV ~ 1, lCl ~ 1)
 Level: Subject
 Structure: Diagonal
              lV   lCl Residual
StdDev: 4.43e-12 0.321     0.76


lV is confusing, since the book examples says it should be 0.31173.

Other question: is the source of nlme_one_comp_open (or similar) available?
I would like to learn how to do these models in c, but could not find the
code. (To avoid RTFM: I know about r-ext.pdf, but a special modelxXX example
would make life easier).

Dieter

---------------------------------------
Dr. Dieter Menne
Biomed Software
72074 T?bingen
Tel (49) (7071) 52176
FAX (49) (7071) 55 10 46
dieter.menne at menne-biomed.de
www.menne-biomed.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-..-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz..ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.._._._._._



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From feldesmanm at pdx.edu  Thu Feb  8 18:43:33 2001
From: feldesmanm at pdx.edu (Marc R. Feldesman)
Date: Thu, 08 Feb 2001 09:43:33 -0800
Subject: [R] observed power
In-Reply-To: <2B7F04539DAFD311B61D009027D0DDA20C3C30@roper-cv.qld.cmis.C
 SIRO.AU>
Message-ID: <5.0.2.1.2.20010208093712.024820a0@127.0.0.1>

An article relevant to this discussion can be found in:

Hoenig JM and Heisey DM. 2001.  The abuse of power:  the pervasive fallacy 
of power calculations for data analysis.  American Statistician 55(1): 19 - 
24.   (This is the Feb 2001 issue, which I just received yesterday).

Abstract:

It is well known that statistical power calculations can be valuable in 
planning an experiment.  There is also a large literature advocating that 
power calculations be made whenever one performs a statistical test of a 
hypothesis and when one obtains a statistically non-significant 
result.  Advocates of such post-experiment power calculations claim the 
calculations should be used to aid in the interpretation of the 
experimental result.  This approach, which appears in various forms, is 
fundamentally flawed.  We document that the problem is extensive and 
present arguments to demonstrate the flaw in the logic.


There is a whole section on "Observed Power" listed under "Inappropriate 
uses of power analysis".







At 12:07 PM 1/27/01 +1000, Bill.Venables at CMIS.CSIRO.AU wrote:
 >
 >
 >Peter Dalgaard BSA [mailto:p.dalgaard at biostat.ku.dk] wonders:
 >
 >| Sent: Saturday, 27 January 2001 1:29
 >| To: Mark M. Span
 >| Cc: r-help at stat.math.ethz.ch
 >| Subject: Re: [R] observed power
 >|
 >|
 >| "Mark M. Span" <span at psy.uva.nl> writes:
 >|
 >| > Is there a way to obtain the observed power of an aov()?
 >| >
 >| > I perform an aov with one between and one within factor,
 >| > and would like to know the observed power of the tests,
 >| > both for the main effect and the interaction. I found the
 >| > package 'hpower', but sense there is a more convenient
 >| > possibility. Is there?
 >| >
 >| > thanks
 >| >
 >| > Mark M. Span
 >|
 >| What's "observed power"? If you mean the item that SPSS has by that
 >| name, I think you first have to convince us that that is a sensible
 >| thing to calculate...
 >
 >If you ever do find out, Peter, let me know too, please.  I was puzzled, but
 >a bit worried about showing my ignorance...   I can only imagine it means an
 >estimate of the non-centrality parameter in which case it is a sensible
 >thing to have available since it is essentially the signal-to-noise ratio.
 >Actually the MLE is the F-statistic but the maximum *marginal* likelihood
 >estimate (based on the marginal distribution of the F-statistic itself) is
 >of more interest as it is closer to unbiased.  In the case of the multiple
 >correlation coefficient, for example, this is (practically) what people call
 >the "adjusted R^2" statistic, where the adjustment is essentially a bias
 >correction.  You can come up with simple analogues for non-central
 >chi-squared and non-central F of course, but they are again just simple
 >linear adjustments, unless you really want to get flash.  (I wrote a couple
 >of papers on this stuff in the 70s so I have a kind of nostalgic affinity
 >for it...)
 >
 >I would be more interested in these quantities optionally appearing
 >routinely on summary tables than, for example, the cute 'significance
 >stars'.  But as for calling them the "observed power", I would definitely
 >caution against that.  It encourages entirely the wrong idea of what power
 >really is.  (For example, it is a function, not a quantity, and you don't
 >ever "observe" it in practice.)
 >
 >Bill Venables.
 >--
 >Bill Venables, CSIRO/CMIS Environmetrics Project
 >Email: Bill.Venables at cmis.csiro.au
 >Phone: +61 7 3826 7251
 >Fax:   +61 7 3826 7304
 >Postal: PO Box 120, Cleveland, Qld 4163, AUSTRALIA
 >
 >-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
 >r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
 >Send "info", "help", or "[un]subscribe"
 >(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
 >_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


Dr. Marc R. Feldesman
email:  feldesmanm at pdx.edu
email:  feldesman at attglobal.net
fax:    503-725-3905

"Don't know where I'm going.
Don't like where I've been.
There may be no exit.
But hell, I'm going in."  Jimmy Buffett

Powered by Superchoerus - the 700 MHz Coppermine Box

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hlai at whsun1.wh.whoi.edu  Thu Feb  8 21:53:25 2001
From: hlai at whsun1.wh.whoi.edu (Han Lai)
Date: Thu, 08 Feb 2001 12:53:25 -0800
Subject: [R] nstall.packages
Message-ID: <3A830745.EECCDE38@whsun1.wh.whoi.edu>

Hi!

I am new to R.  I want to install "packages" from Package Sources in the
web.  I follow the instruction and use the "install.packages" but no
luck.

Here is what I did:

> install.packages(gss,"C:/R/rw1021/library", CRAN = options("CRAN"),
                            contriburl =
contrib.url("http://cran.r-project.org"),
                            method = "auto", available = NULL,
                            destdir = "C:/R/rw1021/library")
The error message is:

'lynx' is not recognized as an internal or external command,
       operable program or batch file.
Error in download.file(url = paste(contriburl, "PACKAGES", sep = "/"),
:
        No download method found
In addition: Warning messages:
1: wget not found
2: cmd execution failed with error code 1 in: shell("lynx -help",
invisible = TRUE)

Could anybody show mw the correct script?

Thank you very much

cheers!
Han

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ligges at statistik.uni-dortmund.de  Thu Feb  8 19:35:19 2001
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 08 Feb 2001 19:35:19 +0100
Subject: [R] nstall.packages
References: <3A830745.EECCDE38@whsun1.wh.whoi.edu>
Message-ID: <3A82E6E7.957F6ED3@statistik.uni-dortmund.de>

Han Lai wrote:
> 
> Hi!
> 
> I am new to R.  I want to install "packages" from Package Sources in the
> web.  I follow the instruction and use the "install.packages" but no
> luck.
> 
> Here is what I did:
> 
> > install.packages(gss,"C:/R/rw1021/library", CRAN = options("CRAN"),
>                             contriburl =
> contrib.url("http://cran.r-project.org"),
>                             method = "auto", available = NULL,
>                             destdir = "C:/R/rw1021/library")
> The error message is:
> 
> 'lynx' is not recognized as an internal or external command,
>        operable program or batch file.
> Error in download.file(url = paste(contriburl, "PACKAGES", sep = "/"),
> :
>         No download method found
> In addition: Warning messages:
> 1: wget not found
> 2: cmd execution failed with error code 1 in: shell("lynx -help",
> invisible = TRUE)
> 
> Could anybody show mw the correct script?


The use of install.packages() is OK. But you are on windows, and you
don't have installed neither lynx nor wget, I think. From
?install.packages:

   Note
   wget.exe is available from
http://www.stats.ox.ac.uk/pub/Rtools/wget.zip.

Uwe

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From yudi at stat.ucc.ie  Thu Feb  8 18:10:23 2001
From: yudi at stat.ucc.ie (Yudi Pawitan)
Date: Thu, 08 Feb 2001 17:10:23 +0000
Subject: [R] Goodness of fit to Poisson / NegBinomial
In-Reply-To: <Y2UOVXAE3qg6EwQG@myatt.demon.co.uk>
References: <3.0.1.32.20010207151406.006fdf68@pop3.ucd.ie>
 <jNnwrHAIIRg6EwFr@myatt.demon.co.uk>
 <3.0.1.32.20010207151406.006fdf68@pop3.ucd.ie>
Message-ID: <3.0.1.32.20010208171023.006c1638@pop3.ucd.ie>

Sorry, Mark, the program worked for Rw1011, but this is
what happened in Rw1021:

> dnbinom(0:5,.9,.4)  
[1] 0.4383833 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000   #wrong!!

while, the correct result from Rw1011 is:
>  dnbinom(0:5,.9,.4)
[1] 0.43838329 0.23672698 0.13493438 0.07826194 0.04578323 0.02692054

I have added a corrected dnbinom() below, which makes the program
works  for Rw1021.

-YP-

x_ c(70, 38, 17, 10,  9, 6) 
kk_ 0:5
n_ sum(x)

dnbinom_ function(x,n,p){
         gamma(x+n)/gamma(n)/gamma(x+1)*p^n * (1-p)^x
}

fn_ function(p){
    r_ p[1]
    th_ p[2]
    ll _ -sum(x[1:max(kk)]*log(dnbinom(kk[-length(kk)],r,th))) -
          x[length(kk)]*log(1-pnbinom((max(kk)-1),r,th))
    return(ll)
}

a_ nlm(fn,p=c(.9,.5),hes=T)
est_ a$est

phat_ c(dnbinom(kk[-length(kk)],est[1],est[2]),
        1-pnbinom((max(kk)-1),est[1],est[2]))
E_ n*phat
chi2_ sum((x-E)^2/E)
cat('Chi2 goodness-of-fit = ',chi2,'\n')
cat('P-value=',1-pchisq(chi2,df=length(kk)-1-2),'\n')

print(cbind(O=x,E=round(E,1),err=round((x-E)^2/E,1)))


===========================================
At 02:31 PM 2/8/01 +0000, Mark Wyatt wrote:
>Yudi,
>
>Thanks for this:
>
>>x_ c(70, 38, 17, 10,  9, 6) 
>>kk_ 0:5
>>n_ sum(x)
>>
>>fn_ function(p){
>>    r_ p[1]
>>    th_ p[2]
>>    ll _ -sum(x[1:max(kk)]*log(dnbinom(kk[-length(kk)],r,th))) -
>>          x[length(kk)]*log(1-pnbinom((max(kk)-1),r,th))
>>    return(ll)
>>}
>>
>>a_ nlm(fn,p=c(.9,.5),hes=T)
>>est_ a$est
>>
>>phat_ c(dnbinom(kk[-length(kk)],est[1],est[2]),
>>        1-pnbinom((max(kk)-1),est[1],est[2]))
>>E_ n*phat
>>chi2_ sum((x-E)^2/E)
>>cat('Chi2 goodness-of-fit = ',chi2,'\n')
>>cat('P-value=',1-pchisq(chi2,df=length(kk)-1-2),'\n')
>>
>>print(cbind(O=x,E=round(E,1),err=round((x-E)^2/E,1)))
>
>It is certainly more elegant than anything I would have come up with but
>I just cannot get it to work (Rwin 1.21). The call to nlm() returns:
>
>        Warning messages: 
>        1: NA/Inf replaced by maximum positive value 
>        2: NA/Inf replaced by maximum positive value 
>        3: NA/Inf replaced by maximum positive value 
>        4: NA/Inf replaced by maximum positive value 
>        5: NA/Inf replaced by maximum positive value 
>        6: NA/Inf replaced by maximum positive value 
>        7: NA/Inf replaced by maximum positive value 
>        8: NA/Inf replaced by maximum positive value 
>
>est holds the starting parameters:
>
>        [1] 0.9 0.5
>
>E (from n*phat) holds:
>
>        [1] 80.38301  0.00000  0.00000  0.00000  0.00000  3.90972
>
>which gives a very big chi-square.
>
>Sorry to be a nuisance.
>
>Mark
>
>
>--
>Mark Myatt
>
>
>
Yudi Pawitan     yudi at stat.ucc.ie
Department of Statistics UCC
Cork, Ireland
Ph   353-21-490 2906
Fax 353-21-427 1040 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Diego at kuonen.com  Thu Feb  8 20:01:46 2001
From: Diego at kuonen.com (Diego Kuonen)
Date: Thu, 08 Feb 2001 20:01:46 +0100
Subject: [R] What is R?
Message-ID: <3A82ED1A.E2505E42@Kuonen.com>

Dear all

there's something. that puzzles me about what R is :-)

   "R is available as Free Software under the terms of the Free 
    Software Foundation's GNU General Public License in source 
    code form."

(Source: http://www.r-project.org/about.html)

But, looking at the second paragraph of the same site, you
see this:

   "... and R provides an Open Source route to participation in
    that activity."

As we all know the term "open source" means something close 
(but not identical) to "free software". 

So, what is R?

It clearly seems to be "free software" and not only "open source" 
software, or?


Finally, Let's have a look at the following:

   "... This article describes why using the term ``open source'' does 
    not solve any problems, and in fact creates some. These are the reasons 
    why it is better to stick with ``free software.'' ... "

(Source: http://www.gnu.org/philosophy/free-software-for-freedom.html )


I'm puzzled, are you?


Greets

  Diego


P.S.: What about "Omegahat"?


-- 
Diego Kuonen $\in$ Chairs of Statistics $\subset$ DMA \@ EPFL
http://stat.kuonen.com                  http://www.Statoo.com 
Q: How do I type "for i in *.dvi; do xdvi $i; done" in a GUI?  
/*      panic("esp: Aiee penguin on the SCSI-bus.");       */
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Thu Feb  8 20:17:20 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Thu, 8 Feb 2001 11:17:20 -0800 (PST)
Subject: [R] What is R?
In-Reply-To: <3A82ED1A.E2505E42@Kuonen.com>
Message-ID: <Pine.A41.4.21.0102081105420.191392-100000@homer40.u.washington.edu>

On Thu, 8 Feb 2001, Diego Kuonen wrote:

> Dear all
> 
> there's something. that puzzles me about what R is :-)
> 
>    "R is available as Free Software under the terms of the Free 
>     Software Foundation's GNU General Public License in source 
>     code form."
> 
> (Source: http://www.r-project.org/about.html)
> 
> But, looking at the second paragraph of the same site, you
> see this:
> 
>    "... and R provides an Open Source route to participation in
>     that activity."
> 
> As we all know the term "open source" means something close 
> (but not identical) to "free software". 
> 
> So, what is R?
> 
> It clearly seems to be "free software" and not only "open source" 
> software, or?


R is Open Source software in that it's license complies with the OSI
definition. It is "free software" by the Debian and Free Software
Foundation definitions, and is official GNU software.  No problems
here. 

As Richard Stallman and Eric Raymond (among others) have pointed out,
the difference between these concepts is one of philosophical and
marketing emphasis. The R developers, as far as I know, have no unified
view on "open source" vs "free", nor do they need one. 


	-thomas


Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jmarca at translab.its.uci.edu  Thu Feb  8 21:58:24 2001
From: jmarca at translab.its.uci.edu (James Edward Marca)
Date: Thu, 8 Feb 2001 12:58:24 -0800
Subject: [R] What is R?
In-Reply-To: <3A82ED1A.E2505E42@Kuonen.com>; from Diego@kuonen.com on Thu, Feb 08, 2001 at 08:01:46PM +0100
References: <3A82ED1A.E2505E42@Kuonen.com>
Message-ID: <20010208125824.A3865@papa>

It seems to me that your question can only be answered by the
various copyright holders listed in the file COPYRIGHTS.

In my opinion, if it is GPLed, it is GPLed.  While 
your comments point out inconsistencies between common usage of
open source and free software with the more technical usage,
frankly I think your message is just stirring up trouble.
It is clear that the GPL is the GPL.  Your message addresses
the documentation describing that license.  

There are plenty of holy wars splitting these hairs.  I don't think
we need one to start here.

james

>From Diego Kuonen, received Thu, Feb 08, 2001 at 08:01:46PM +0100:
> Dear all
> 
> there's something. that puzzles me about what R is :-)
> 
>    "R is available as Free Software under the terms of the Free 
>     Software Foundation's GNU General Public License in source 
>     code form."
> 
> (Source: http://www.r-project.org/about.html)
> 
> But, looking at the second paragraph of the same site, you
> see this:
> 
>    "... and R provides an Open Source route to participation in
>     that activity."
> 
> As we all know the term "open source" means something close 
> (but not identical) to "free software". 
> 
> So, what is R?
> 
> It clearly seems to be "free software" and not only "open source" 
> software, or?
> 
> 
> Finally, Let's have a look at the following:
> 
>    "... This article describes why using the term ``open source'' does 
>     not solve any problems, and in fact creates some. These are the reasons 
>     why it is better to stick with ``free software.'' ... "
> 
> (Source: http://www.gnu.org/philosophy/free-software-for-freedom.html )
> 
> 
> I'm puzzled, are you?
> 
> 
> Greets
> 
>   Diego
> 
> 
> P.S.: What about "Omegahat"?
> 
> 
> -- 
> Diego Kuonen $\in$ Chairs of Statistics $\subset$ DMA \@ EPFL
> http://stat.kuonen.com                  http://www.Statoo.com 
> Q: How do I type "for i in *.dvi; do xdvi $i; done" in a GUI?  
> /*      panic("esp: Aiee penguin on the SCSI-bus.");       */
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tov at ece.cmu.edu  Sun Feb  4 20:23:59 2001
From: tov at ece.cmu.edu (Thomas Vogels)
Date: Sun, 04 Feb 2001 14:23:59 -0500
Subject: [R] callback environment for Tk buttons
In-Reply-To: Peter Dalgaard BSA's message of
 "04 Feb 2001 00:45:08 +0100"
References: <200102032032.f13KWcW08772@muskrat.stat.umn.edu>
 <x2vgqrz5yz.fsf@blueberry.kubism.ku.dk>
Message-ID: <pxu26a6yls.fsf@infiniti.ece.cmu.edu>


Luke, Peter,

thanks for the explanation of how to generate the callbacks and how
the for-loop works.  This helped a lot to understand what was going
on.

Regards,
  -tom

-- 
mailto:tov at ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dpowers at mail.la.utexas.edu  Thu Feb  8 23:23:44 2001
From: dpowers at mail.la.utexas.edu (Daniel A. Powers)
Date: Thu, 8 Feb 2001 16:23:44 -0600 (CST)
Subject: [R] Install from source
Message-ID: <Pine.GSO.4.05.10102081618510.16345-100000@dahlia.la.utexas.edu>


R -users --
I am new to R and trying to create Jim Lindsay's Nonlinear Regression and
Repeated Measures libraries. I have tried

R CMD INSTALL file.tgz

R says...

ERROR: cannot extract package from file.tgz 

I have also tried build.

Any tips?

Cheers,
Dan
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Dan Powers
Associate Professor, Sociology  
University of Texas at Austin                    


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Thu Feb  8 23:29:26 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Thu, 8 Feb 2001 14:29:26 -0800 (PST)
Subject: [R] Install from source
In-Reply-To: <Pine.GSO.4.05.10102081618510.16345-100000@dahlia.la.utexas.edu>
Message-ID: <Pine.A41.4.21.0102081427180.191392-100000@homer40.u.washington.edu>

On Thu, 8 Feb 2001, Daniel A. Powers wrote:

> 
> R -users --
> I am new to R and trying to create Jim Lindsay's Nonlinear Regression and
> Repeated Measures libraries. I have tried
> 
> R CMD INSTALL file.tgz
> 
> R says...
> 
> ERROR: cannot extract package from file.tgz 
> 
> I have also tried build.
> 

It's 
  R INSTALL file.tgz
but at least some of Jim Lindsey's packages won't install in .tgz form, so
you may need to untar it first. 

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Fri Feb  9 00:28:23 2001
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Feb 2001 00:28:23 +0100
Subject: [R] Install from source
In-Reply-To: Thomas Lumley's message of "Thu, 8 Feb 2001 14:29:26 -0800 (PST)"
References: <Pine.A41.4.21.0102081427180.191392-100000@homer40.u.washington.edu>
Message-ID: <x23ddog3fs.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <tlumley at u.washington.edu> writes:

> On Thu, 8 Feb 2001, Daniel A. Powers wrote:
> 
> > 
> > R -users --
> > I am new to R and trying to create Jim Lindsay's Nonlinear Regression and
> > Repeated Measures libraries. I have tried
> > 
> > R CMD INSTALL file.tgz
> > 
> > R says...
> > 
> > ERROR: cannot extract package from file.tgz 
> > 
> > I have also tried build.
> > 
> 
> It's 
>   R INSTALL file.tgz
> but at least some of Jim Lindsey's packages won't install in .tgz form, so
> you may need to untar it first. 


Both forms should work, but:

The .tgz form relies on the name of the file, specifically through

pkgname=`echo "${pkgname}" | sed 's/_.*//'`

which is not going to isolate the package name unless it is
immediately followed by "_". To fix it, presumably it would suffice
just to strip off .tgz and .tar.gz endings.

A quick workaround (apart from manual untarring) could be

mv file.tgz file_
R INSTALL file_

The slow workaround is to persuade Jim to put version numbers on his
packages... 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Nicolas.Fauchereau at u-bourgogne.fr  Fri Feb  9 10:04:40 2001
From: Nicolas.Fauchereau at u-bourgogne.fr (Nicolas Fauchereau)
Date: Fri, 9 Feb 2001 10:04:40 +0100
Subject: [R] install R from RPM
Message-ID: <20010209100440.A88172@u-bourgogne.fr>

Hi everybody !

I'm new to R (used to Matlab ...) and I 'd like 
to use R at home ...  

I've installed it from RPM package (R-base-1.2.1-2.i386.rpm)
on a linux RedHat 7.0, succesfully ....however but I've got 
problems with running the demos, it says : 

"/usr/lib/R/bin/R.bin : error while loading shared libraries
 : /usr/lib/R/bin/R.bin : symbol __sysconf, version GLIBC_2.2
not defined in file libc.so.6 with link time reference.

and quit R. 

Does anybody have an idea of what it means - what I can do 
to fix it ?, is it annoying only for the demos or for runnning
other R functions as well ? 

another question : I have to deal with large Matrices (usually
1000*600 or more) is R suited for that ?   

thanks in advance 

Nicolas Fauchereau 



                    _\\|//_
                    ( O-O )
------------------ooO-(_)-Ooo-------------------
|                                              |
|            Nicolas FAUCHEREAU                |
------------------------------------------------
|   CENTRE DE RECHERCHES DE CLIMATOLOGIE       |
|----------------------------------------------|
| UMR 5080 CNRS - Universit? de Bourgogne      |
| Facult? des Sciences Gabriel                 |
| Batiment Sciences Gabriel BP138              |
| 21004 Dijon Cedex, France                    |
| T?l : (+33) 03 80 39 38 23                   |
| Fax : (+33) 03 80 39 57 41                   |
| e-mail : <nicolasf at u-bourgogne.fr>           |
| url : http://www.bourgogne.fr/climatologie   |	
------------------ooO-----Ooo-------------------

"the surest sign that intelligent life exists 
elsewhere in the Universe is that it has never 
tried to contact us...".Bill Watterson.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Nicolas.Fauchereau at u-bourgogne.fr  Fri Feb  9 10:37:46 2001
From: Nicolas.Fauchereau at u-bourgogne.fr (Nicolas Fauchereau)
Date: Fri, 9 Feb 2001 10:37:46 +0100
Subject: [R] installing R from RPMs
Message-ID: <20010209103743.A131488@u-bourgogne.fr>

Hi everybody !                                                                                     
                                                                                                   
I'm new to R (used to Matlab ...) and I 'd like                                                    
to use R at home ...                                                                               
                                                                                                   
I've installed it from RPM package (R-base-1.2.1-2.i386.rpm)                                       
on a linux RedHat 7.0, succesfully ....however but I've got                                        
problems with running the demos, it says :                                                         
                                                                                                   
"/usr/lib/R/bin/R.bin : error while loading shared libraries                                       
 : /usr/lib/R/bin/R.bin : symbol __sysconf, version GLIBC_2.2                                      
not defined in file libc.so.6 with link time reference.                                            
                                                                                                   
and quit R.                                                                                        
                                                                                                   
Does anybody have an idea of what it means - what I can do                                         
to fix it ?, is it annoying only for the demos or for runnning                                     
other R functions as well ?                                                                        
                                                                                                   
another question : I have to deal with large Matrices (usually                                     
1000*600 or more) is R suited for that ?                                                           
                                                                                                   
thanks in advance                                                                                  
                                                                                                   
Nicolas Fauchereau                                                                                 


                    _\\|//_
                    ( O-O )
------------------ooO-(_)-Ooo-------------------
|                                              |
|            Nicolas FAUCHEREAU                |
------------------------------------------------
|   CENTRE DE RECHERCHES DE CLIMATOLOGIE       |
|----------------------------------------------|
| UMR 5080 CNRS - Universit? de Bourgogne      |
| Facult? des Sciences Gabriel                 |
| Batiment Sciences Gabriel BP138              |
| 21004 Dijon Cedex, France                    |
| T?l : (+33) 03 80 39 38 23                   |
| Fax : (+33) 03 80 39 57 41                   |
| e-mail : <nicolasf at u-bourgogne.fr>           |
| url : http://www.bourgogne.fr/climatologie   |	
------------------ooO-----Ooo-------------------

"the surest sign that intelligent life exists 
elsewhere in the Universe is that it has never 
tried to contact us...".Bill Watterson.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From plummer at iarc.fr  Fri Feb  9 10:58:13 2001
From: plummer at iarc.fr (Martyn Plummer)
Date: Fri, 09 Feb 2001 10:58:13 +0100 (CET)
Subject: [R] install R from RPM
In-Reply-To: <20010209100440.A88172@u-bourgogne.fr>
Message-ID: <XFMail.010209105813.plummer@iarc.fr>

On 09-Feb-01 Nicolas Fauchereau wrote:
> Hi everybody !
> 
> I'm new to R (used to Matlab ...) and I 'd like 
> to use R at home ...  
> 
> I've installed it from RPM package (R-base-1.2.1-2.i386.rpm)
> on a linux RedHat 7.0, succesfully ....however but I've got 
> problems with running the demos, it says : 
> 
> "/usr/lib/R/bin/R.bin : error while loading shared libraries
>  : /usr/lib/R/bin/R.bin : symbol __sysconf, version GLIBC_2.2
> not defined in file libc.so.6 with link time reference.
> 
> and quit R. 
> 
> Does anybody have an idea of what it means - what I can do 
> to fix it ?, is it annoying only for the demos or for runnning
> other R functions as well ? 

I would say you need to upgrade glibc. Red Hat 7.0 comes with a 
pre-release version of glibc 2.2.  A full version is now available
and the latest release is glibc-2.2-9.i386.rpm.

http://www.redhat.com/support/errata/RHBA-2000-079.html

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mark at myatt.demon.co.uk  Fri Feb  9 11:20:47 2001
From: mark at myatt.demon.co.uk (Mark Myatt)
Date: Fri, 9 Feb 2001 10:20:47 +0000
Subject: [R] Is this a bug in R1.21? (was: Goodness of fit ... NegBinomial)
In-Reply-To: <3.0.1.32.20010208171023.006c1638@pop3.ucd.ie>
References: <3.0.1.32.20010207151406.006fdf68@pop3.ucd.ie>
 <jNnwrHAIIRg6EwFr@myatt.demon.co.uk>
 <3.0.1.32.20010207151406.006fdf68@pop3.ucd.ie>
 <Y2UOVXAE3qg6EwQG@myatt.demon.co.uk>
 <3.0.1.32.20010208171023.006c1638@pop3.ucd.ie>
Message-ID: <7Qqm8AA$R8g6Ew3$@myatt.demon.co.uk>

Yudi,

Writes:

>Sorry, Mark, the program worked for Rw1011, but this is
>what happened in Rw1021:
>
>> dnbinom(0:5,.9,.4)  
>[1] 0.4383833 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000   #wrong!!
>
>while, the correct result from Rw1011 is:
>>  dnbinom(0:5,.9,.4)
>[1] 0.43838329 0.23672698 0.13493438 0.07826194 0.04578323 0.02692054
>
>I have added a corrected dnbinom() below, which makes the program
>works  for Rw1021.

[Code and text of previous messages removed]

Thanks. That works a treat. Is this a bug in v1.21?


--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Diego at kuonen.com  Fri Feb  9 12:14:10 2001
From: Diego at kuonen.com (Diego Kuonen)
Date: Fri, 09 Feb 2001 12:14:10 +0100
Subject: [R] What is R?
References: <3A82ED1A.E2505E42@Kuonen.com> <20010208125824.A3865@papa>
Message-ID: <3A83D102.DE040C03@Kuonen.com>

James Edward Marca wrote:
> 
> There are plenty of holy wars splitting these hairs.  I don't think
> we need one to start here.

I do not want to start a "war" about it, it was only sth. that 
was not clear to me. I think that Thomas Lumley's posting (thanks 
for this) says it all:

    "As Richard Stallman and Eric Raymond (among others) have pointed out,
    the difference between these concepts is one of philosophical and
    marketing emphasis. The R developers, as far as I know, have no unified
    view on "open source" vs "free", nor do they need one." 

Now, I know what R is, and I can get on "promotting" it :-)

At the moment I'm writing an article (in french) for our school's
internal computer magazine titled "R - an example of the success of 
free software" - I want R to be installed on our school's servers
to enable everybody to use it and to enjoy it the way I do :-)

Greets

  Diego 

-- 
Diego Kuonen $\in$ Chairs of Statistics $\subset$ DMA \@ EPFL
http://stat.kuonen.com                  http://www.Statoo.com 
Q: How do I type "for i in *.dvi; do xdvi $i; done" in a GUI?  
/*      panic("esp: Aiee penguin on the SCSI-bus.");       */
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From catherine at research.bell-labs.com  Fri Feb  9 13:15:25 2001
From: catherine at research.bell-labs.com (Catherine Loader)
Date: Fri, 9 Feb 2001 07:15:25 -0500 (EST)
Subject: [R] Re: [Rd] dnbinom(,size<1,)=0 (PR#842)
Message-ID: <200102091215.HAA02012@jessie.research.bell-labs.com>

my current code for dnbinom.c has
  prob = dbinom_raw(n,x+n,p,1-p,give_log);
  f = ((double)n)/((double)(n+x));
  return((give_log) ? log(f) + prob : f*prob);
which should work for x>=0, n>=0, 0<=p<=1.

dbinom.raw(x,n,p) is intended to work for x>=0, n>=0, 0<=p<=1,
without integer checks. When necessary (ie. for x in the dnbinom case)
the checks should be done in the calling function.

--Catherine.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andy_liaw at merck.com  Fri Feb  9 13:33:17 2001
From: andy_liaw at merck.com (Liaw, Andy)
Date: Fri, 09 Feb 2001 07:33:17 -0500
Subject: [R] nstall.packages
Message-ID: <51F9C42DA15CD311BD220008C707D81901D0D755@usrymx10.merck.com>

Either install the pre-compiled packages for Windows (which can be handled
by rwinst.exe), or if you insist on installing from source, follow the
instructions in README.rw.

Andy

> -----Original Message-----
> From: Han Lai [mailto:hlai at whsun1.wh.whoi.edu]
> Sent: Thursday, February 08, 2001 3:53 PM
> To: r-help at stat.math.ethz.ch
> Subject: [R] nstall.packages
> 
> 
> Hi!
> 
> I am new to R.  I want to install "packages" from Package 
> Sources in the
> web.  I follow the instruction and use the "install.packages" but no
> luck.
> 
> Here is what I did:
> 
> > install.packages(gss,"C:/R/rw1021/library", CRAN = options("CRAN"),
>                             contriburl =
> contrib.url("http://cran.r-project.org"),
>                             method = "auto", available = NULL,
>                             destdir = "C:/R/rw1021/library")
> The error message is:
> 
> 'lynx' is not recognized as an internal or external command,
>        operable program or batch file.
> Error in download.file(url = paste(contriburl, "PACKAGES", sep = "/"),
> :
>         No download method found
> In addition: Warning messages:
> 1: wget not found
> 2: cmd execution failed with error code 1 in: shell("lynx -help",
> invisible = TRUE)
> 
> Could anybody show mw the correct script?
> 
> Thank you very much
> 
> cheers!
> Han
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Feb  9 13:57:42 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 9 Feb 2001 12:57:42 +0000 (GMT)
Subject: [R] What is R?
In-Reply-To: <3A83D102.DE040C03@Kuonen.com>
Message-ID: <Pine.GSO.4.31.0102091246330.17738-100000@toucan.stats>

On Fri, 9 Feb 2001, Diego Kuonen wrote:

> James Edward Marca wrote:
> >
> > There are plenty of holy wars splitting these hairs.  I don't think
> > we need one to start here.
>
> I do not want to start a "war" about it, it was only sth. that
> was not clear to me. I think that Thomas Lumley's posting (thanks
> for this) says it all:
>
>     "As Richard Stallman and Eric Raymond (among others) have pointed out,
>     the difference between these concepts is one of philosophical and
>     marketing emphasis. The R developers, as far as I know, have no unified
>     view on "open source" vs "free", nor do they need one."
>
> Now, I know what R is, and I can get on "promotting" it :-)
>
> At the moment I'm writing an article (in french) for our school's
> internal computer magazine titled "R - an example of the success of
> free software" - I want R to be installed on our school's servers
> to enable everybody to use it and to enjoy it the way I do :-)


One thing we do need to bear in mind.  R itself is under GPL.
Many of the packages that make it so useful are not.  Although more of
them are Open Source, quite a large subset have `no commercial' use
clauses, which is contrary to the Open Source definition. They are not
`free' in the Stallman sense.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dpowers at mail.la.utexas.edu  Fri Feb  9 16:59:02 2001
From: dpowers at mail.la.utexas.edu (Daniel A. Powers)
Date: Fri, 9 Feb 2001 09:59:02 -0600 (CST)
Subject: [R] Install from source
In-Reply-To: <x23ddog3fs.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10102090955520.17831-100000@dahlia.la.utexas.edu>

R-users --

I changed the file.tgz files to file_ and tryed the install (on my linux
5.2 and solaris boxes). Here's is what I get (solaris)

dahlia{dpowers}52: R CMD INSTALL gnlm_
Installing source package `gnlm' ...
 libs
gcc -I/home/soc/faculty/dpowers/R-1.2.1/include  -I/usr/local/include
-fPIC  -g -O2 -c dist.c -o dist.o
o gnlm. dist.o -lg2c -lm  -L/usr/ccs/lib -L/usr/lib
-L/usr/local/lib/gcc-lib/sparc-sun-solaris2.6/2.95.2
-L/usr/local/sparc-sun-solaris2.6/lib -L/usr/ccs/bin -L/usr/ccs/lib
-L/usr/local/lib -lm
make: o: Command not found
make: [gnlm.] Error 127 (ignored)
cp: *.so: No such file or directory
ERROR: Compilation failed for package `gnlm'

Any ideas?
THanks
Dan
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Dan Powers
Associate Professor, Sociology  
University of Texas at Austin                    



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bcooke at ualberta.ca  Fri Feb  9 17:06:28 2001
From: bcooke at ualberta.ca (Barry Cooke)
Date: Fri, 9 Feb 2001 11:06:28 -0500
Subject: [R] starting values for uniquenesses in factanal()
Message-ID: <LOBBLHDGJEPNIJEICNFLAEPDCBAA.bcooke@ualberta.ca>

Dear R-help,

Using R 1.2.1 on Windows98 to run a factor analysis on a 64x150 matrix of
data generated from a simulation model, factanal() reported that it failed
to find a solution.  Looking at the factanal code, I see the immediate
condition that triggered the result:

if (best == Inf)
        stop("Unable to optimize from these starting value(s)")

So I am sure factanal() is giving the intended result.  What I want to know
is what sort of data properties lead to this result, and how does one go
about choosing starting uniqueness values so that a (good) result can be
computed?  The factanal() help, in describing parameter "start", says it is:

NULL or a matrix of starting values, each column giving an initial set of
uniquenesses.

But (due to my own ignorance) this is a little sketchy.  Any references or
advice is appreciated.

I realize this is not strictly an R-question ... so far.  But because I did
not encounter the same problem using Minitab's factor analysis, I am curious
as to the reason for the different behaviour (and this is an R question).
Maybe the response I got from R's factanal() is actually more appropriate?
Is this another case of commercial software giving me an answer I want, even
if it's not a good one?  (I would prefer to use only R for the paper I am
writing.)  Any comments appreciated.  To spare bandwidth I don't post the
data here, but I can send it privately.

Barry J. Cooke
University of Alberta
Edmonton, AB, Canada
http://www.ualberta.ca/~bcooke

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Feb  9 17:30:34 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 9 Feb 2001 16:30:34 +0000 (GMT)
Subject: [R] starting values for uniquenesses in factanal()
In-Reply-To: <LOBBLHDGJEPNIJEICNFLAEPDCBAA.bcooke@ualberta.ca>
Message-ID: <Pine.GSO.4.31.0102091618460.18405-100000@toucan.stats>

On Fri, 9 Feb 2001, Barry Cooke wrote:

> Dear R-help,
>
> Using R 1.2.1 on Windows98 to run a factor analysis on a 64x150 matrix of
> data generated from a simulation model, factanal() reported that it failed

(I hope that's a typo.  You have 64 observations on 150 variables?
Then you have a singular sample correlation matrix. Factor analysis cannot
be appropriate, since a Heywood case is needed to get a singular matrix.)

> to find a solution.  Looking at the factanal code, I see the immediate
> condition that triggered the result:
>
> if (best == Inf)
>         stop("Unable to optimize from these starting value(s)")
>
> So I am sure factanal() is giving the intended result.  What I want to know
> is what sort of data properties lead to this result, and how does one go
> about choosing starting uniqueness values so that a (good) result can be
> computed?  The factanal() help, in describing parameter "start", says it is:
>
> NULL or a matrix of starting values, each column giving an initial set of
> uniquenesses.
>
> But (due to my own ignorance) this is a little sketchy.  Any references or
> advice is appreciated.

> I realize this is not strictly an R-question ... so far.  But because I did
> not encounter the same problem using Minitab's factor analysis,

Use Minitab's uniquenesses as the starting values: just give them as a
vector as the start argument.

> I am curious
> as to the reason for the different behaviour (and this is an R question).
> Maybe the response I got from R's factanal() is actually more appropriate?
> Is this another case of commercial software giving me an answer I want, even
> if it's not a good one?  (I would prefer to use only R for the paper I am
> writing.)  Any comments appreciated.  To spare bandwidth I don't post the
> data here, but I can send it privately.

I don't know about Minitab, but I do know that most commercial statistical
packages will happily quote non-optimal answers, and indeed have default
methods that are statistically suspect.

If your first para is correct, this is a case in point.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Fri Feb  9 17:32:46 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Fri, 9 Feb 2001 08:32:46 -0800 (PST)
Subject: [R] Is this a bug in R1.21? (was: Goodness of fit ... NegBinomial)
In-Reply-To: <7Qqm8AA$R8g6Ew3$@myatt.demon.co.uk>
Message-ID: <Pine.A41.4.21.0102090832120.7160-100000@homer14.u.washington.edu>

On Fri, 9 Feb 2001, Mark Myatt wrote:

> Yudi,
> 
> Writes:
> 
> >Sorry, Mark, the program worked for Rw1011, but this is
> >what happened in Rw1021:
> >
> >> dnbinom(0:5,.9,.4)  
> >[1] 0.4383833 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000   #wrong!!
> >
> >while, the correct result from Rw1011 is:
> >>  dnbinom(0:5,.9,.4)
> >[1] 0.43838329 0.23672698 0.13493438 0.07826194 0.04578323 0.02692054
> >
> >I have added a corrected dnbinom() below, which makes the program
> >works  for Rw1021.
> 
> [Code and text of previous messages removed]
> 
> Thanks. That works a treat. Is this a bug in v1.21?

Yes. However it's been filed and fixed since yesterday.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Fri Feb  9 17:31:49 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Fri, 9 Feb 2001 08:31:49 -0800 (PST)
Subject: [R] install R from RPM
In-Reply-To: <20010209100440.A88172@u-bourgogne.fr>
Message-ID: <Pine.A41.4.21.0102090828530.7160-100000@homer14.u.washington.edu>

On Fri, 9 Feb 2001, Nicolas Fauchereau wrote:

> Hi everybody !
> 
> I'm new to R (used to Matlab ...) and I 'd like 
> to use R at home ...  
> 
<snip>
> another question : I have to deal with large Matrices (usually
> 1000*600 or more) is R suited for that ?   

R isn't particularly good at large matrices, but 1000*600 may not qualify
as "large" any more. If you have enough memory then R handles matrices
reasonably efficiently.


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Fri Feb  9 17:41:08 2001
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 9 Feb 2001 17:41:08 +0100
Subject: [R] Install from source
In-Reply-To: <Pine.GSO.4.05.10102090955520.17831-100000@dahlia.la.utexas.edu>
References: <x23ddog3fs.fsf@blueberry.kubism.ku.dk>
	<Pine.GSO.4.05.10102090955520.17831-100000@dahlia.la.utexas.edu>
Message-ID: <14980.7588.186296.895855@gargle.gargle.HOWL>

>>>>> "Daniel" == Daniel A Powers <dpowers at mail.la.utexas.edu> writes:

    Daniel> R-users --
    Daniel> I changed the file.tgz files to file_ and tryed the install (on my linux
    Daniel> 5.2 and solaris boxes). Here's is what I get (solaris)

    Daniel> dahlia{dpowers}52: R CMD INSTALL gnlm_
    Daniel> Installing source package `gnlm' ...
    Daniel> libs
    Daniel> gcc -I/home/soc/faculty/dpowers/R-1.2.1/include  -I/usr/local/include
    Daniel> -fPIC  -g -O2 -c dist.c -o dist.o
    Daniel> o gnlm. dist.o -lg2c -lm  -L/usr/ccs/lib -L/usr/lib
    Daniel> -L/usr/local/lib/gcc-lib/sparc-sun-solaris2.6/2.95.2
    Daniel> -L/usr/local/sparc-sun-solaris2.6/lib -L/usr/ccs/bin -L/usr/ccs/lib
    Daniel> -L/usr/local/lib -lm
    Daniel> make: o: Command not found
    Daniel> make: [gnlm.] Error 127 (ignored)
    Daniel> cp: *.so: No such file or directory
    Daniel> ERROR: Compilation failed for package `gnlm'

    Daniel> Any ideas?

Yes.
It's again Lindsey's  nonstandard R packages (sorry Jim but its true)
AFAIK he still ships a <pkg>/src/Makefile 
which has been strongly discouraged for a least a year now.

Your solution :

# 1. Unpack
 tar xfvz gnlm.tgz

# 2. remove the garbate
 rm gnlm/src/Makefile

# 3. Install
 R INSTALL gnlm 


Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From james.lindsey at luc.ac.be  Fri Feb  9 18:30:22 2001
From: james.lindsey at luc.ac.be (Jim Lindsey)
Date: Fri, 9 Feb 2001 18:30:22 +0100 (MET)
Subject: [R] Install from source
In-Reply-To: <Pine.GSO.4.05.10102090955520.17831-100000@dahlia.la.utexas.edu> from "Daniel A. Powers" at Feb 09, 2001 09:59:02 AM
Message-ID: <200102091730.SAA24807@alpha.luc.ac.be>

> 
> R-users --
> 
> I changed the file.tgz files to file_ and tryed the install (on my linux
> 5.2 and solaris boxes). Here's is what I get (solaris)
> 
> dahlia{dpowers}52: R CMD INSTALL gnlm_
> Installing source package `gnlm' ...
>  libs
> gcc -I/home/soc/faculty/dpowers/R-1.2.1/include  -I/usr/local/include
> -fPIC  -g -O2 -c dist.c -o dist.o
> o gnlm. dist.o -lg2c -lm  -L/usr/ccs/lib -L/usr/lib
> -L/usr/local/lib/gcc-lib/sparc-sun-solaris2.6/2.95.2
> -L/usr/local/sparc-sun-solaris2.6/lib -L/usr/ccs/bin -L/usr/ccs/lib
> -L/usr/local/lib -lm
> make: o: Command not found
> make: [gnlm.] Error 127 (ignored)
> cp: *.so: No such file or directory
> ERROR: Compilation failed for package `gnlm'

If you are using v0.9 of my libraries, I suspect that you are not
using the latest version of R (i.e. you have a pre 1.2 version of R).
  Jim

> 
> Any ideas?
> THanks
> Dan
> =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> Dan Powers
> Associate Professor, Sociology  
> University of Texas at Austin                    
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From james.lindsey at luc.ac.be  Fri Feb  9 18:32:06 2001
From: james.lindsey at luc.ac.be (Jim Lindsey)
Date: Fri, 9 Feb 2001 18:32:06 +0100 (MET)
Subject: [R] Install from source
In-Reply-To: <Pine.GSO.4.05.10102090955520.17831-100000@dahlia.la.utexas.edu> from "Daniel A. Powers" at Feb 09, 2001 09:59:02 AM
Message-ID: <200102091732.SAA19013@alpha.luc.ac.be>

If you are using v0.9 of my libraries, I suspect that you are not
using the latest version of R (i.e. you have a pre 1.2 version of R).
  Jim
PS. If this is true, you will have other problems with my libraries as
well when you try to use them.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From apjaworski at mmm.com  Fri Feb  9 18:51:58 2001
From: apjaworski at mmm.com (apjaworski@mmm.com)
Date: Fri, 9 Feb 2001 11:51:58 -0600
Subject: [R] install R from RPM
Message-ID: <OF943762F1.ECDA22BB-ON862569EE.0061F97C@mmm.com>


Actually the latest official RH version of glibc is 2.2-12.

Cheers,

Andy





Martyn Plummer <plummer at iarc.fr> on 02/09/2001 03:58:13 AM


To:   Nicolas Fauchereau <Nicolas.Fauchereau at u-bourgogne.fr>
cc:   r-help at stat.math.ethz.ch (bcc: Andrzej P.
      Jaworski/US-Corporate/3M/US)
Subject:  RE: [R] install R from RPM



On 09-Feb-01 Nicolas Fauchereau wrote:
> Hi everybody !
>
> I'm new to R (used to Matlab ...) and I 'd like
> to use R at home ...
>
> I've installed it from RPM package (R-base-1.2.1-2.i386.rpm)
> on a linux RedHat 7.0, succesfully ....however but I've got
> problems with running the demos, it says :
>
> "/usr/lib/R/bin/R.bin : error while loading shared libraries
>  : /usr/lib/R/bin/R.bin : symbol __sysconf, version GLIBC_2.2
> not defined in file libc.so.6 with link time reference.
>
> and quit R.
>
> Does anybody have an idea of what it means - what I can do
> to fix it ?, is it annoying only for the demos or for runnning
> other R functions as well ?

I would say you need to upgrade glibc. Red Hat 7.0 comes with a
pre-release version of glibc 2.2.  A full version is now available
and the latest release is glibc-2.2-9.i386.rpm.

http://www.redhat.com/support/errata/RHBA-2000-079.html

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._._




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From yuling5 at yahoo.com  Fri Feb  9 22:27:00 2001
From: yuling5 at yahoo.com (Yu-Ling Wu)
Date: Fri, 9 Feb 2001 13:27:00 -0800 (PST)
Subject: [R] link R to VB
Message-ID: <20010209212700.30977.qmail@web11507.mail.yahoo.com>

Hi,

1. How to dynamic link the outputs from R to MS-Word
or MS-Excel?
2. I'd like to develop an VB application and use R as
the "backgroud calculator".
How do I call R and its function in VB?

Thanks,
Yu-Ling Wu

__________________________________________________
Do You Yahoo!?
Get personalized email addresses from Yahoo! Mail - only $35 
a year!  http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gfeeney at gfeeney.com  Fri Feb  9 22:54:39 2001
From: gfeeney at gfeeney.com (Griffith Feeney)
Date: Fri, 09 Feb 2001 11:54:39 -1000
Subject: [R] demo(tkttest) exits with error messages
Message-ID: <3.0.5.32.20010209115439.007c76b0@gfeeney.com>

I've just installed tcl version 8.3 for windows for use with rw1021,
running on win95 (4.00.950). demo(tkttest) gives the following error messages.

> require(tcltk) || stop("tcltk support is absent")
Loading required package: tcltk 
Error in firstlib(which.lib.loc, package) : 
        TCL_LIBRARY is not set
Error in eval.with.vis(expr, envir, enclos) : 
        tcltk support is absent

Can't find any explanation in the documentation (looked at refman chapter
11) or mailing list archives.  TCL_LIBRARY is a DOS environment variable,
presumably? What should it be set to? Tried setting it to
"C:\PROGRA~1\TCL\LIB" (where tcl is installed), this doesn't work.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From lhomer at teleport.com  Sat Feb 10 03:07:49 2001
From: lhomer at teleport.com (lhomer)
Date: Fri, 9 Feb 2001 18:07:49 -0800
Subject: [R] Test for multiple contrasts?
References: <01020814521501.00878@Aconitum> <x2vgqlfb4h.fsf@blueberry.kubism.ku.dk>
Message-ID: <003b01c09306$455d4080$97051ad8@oemcomputer>

The p.adjust methods "work" for correlated tests in the sense that the
inequalities one would normally write  should be correct. There is no option
for introducing correlations into my version of p.adjust and so no way of
adjusting p.adjust output when there are correlations among the p values. In
these cases the adjustments will often be excessive.

----- Original Message -----
From: Peter Dalgaard BSA <p.dalgaard at biostat.ku.dk>
To: <pflugshaupt at geobot.umnw.ethz.ch>
Cc: <r-help at stat.math.ethz.ch>
Sent: Thursday, February 08, 2001 7:27 AM
Subject: Re: [R] Test for multiple contrasts?


> Kaspar Pflugshaupt <pflugshaupt at cirsium.ethz.ch> writes:
>
> > Now, I'd like to test which of my contrasts are significantly different
from
> > zero. I assume that the p values given by the summary are not corrected
for
> > multiple testing. Thus, I might correct them with p.adjust(). But since
the
> > contrasts are not independent, I'm not sure if the adjustment methods
would
> > work here.
> > On the other hand, I've come across a procedure called "Scheffe's
multiple
> > comparisons" (or S test), which is said to be appropriate for multiple
> > contrasts like these. Before I try to implement it: Has anybody already
done
> > that, or are there good reasons not to use it?
>
> The p.adjust methods do work for correlated tests, at least the Holm
> and Bonferroni tests where I can understand the theory. The Hochberg
> test has some amount of handwaving associated with it, but it too is
> intended to be applied to testing contrasts.
>
> Scheffe also works with correlated tests. It is more conservative than
> the other tests because it protects against multiple testing on any
> number of linear contrasts by projecting the (F-based) multivariate
> confidence region onto the direction given by the contrast. This
> argues both for and against its use...
>
>
> > BTW, I tried to extract the SEs of the contrasts by se.contrast(), but
it
> > would not work for survival models. Would they be the same that appear
in the
> > summary above?
>
> se.contrast works for aov models only. You probably need to massage
> the covariance matrix for the estimates.
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mjpocern at ouray.cudenver.edu  Sat Feb 10 05:05:10 2001
From: mjpocern at ouray.cudenver.edu (Matt Pocernich)
Date: Fri, 9 Feb 2001 21:05:10 -0700
Subject: [R] Scatterplot - symbols coded by factor
Message-ID: <002e01c09316$a9898720$c4c8c284@cudenver.edu>

Hi - I would like to create a scatterplot with the symbols coded by a factor in each record.  Is their a better way than what I have used below?  I attempted to use the plot.factor, but cannot force it to make a scatterplot instead of boxplots.  I have considerd making a function with a 'for' statement for each level of the factor.  Is there a better way for when I am dealing with more levels of factors?

Thanks,  Matt Pocernich

Y <- c(40,38,30,47,25,32,13,35,27,24,20,13)
X<-c(110,75,93,97,60,75,38,140,62,90,45,59)
manuf <- factor(rep(LETTERS[1:3],c(4,4,4)))
data3 <- data.frame(X,Y,manuf)
attach(data3)

plot(X, Y, type="n")
points(X[manuf=="A"], Y[manuf=="A"], pch = "A")
points(X[manuf=="B"], Y[manuf=="B"], pch = "B")
points(X[manuf=="C"], Y[manuf=="B"], pch = "C")

-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20010209/5db1c70d/attachment.html

From jetton at pilot.msu.edu  Sat Feb 10 07:33:25 2001
From: jetton at pilot.msu.edu (James R Jetton)
Date: Sat, 10 Feb 2001 01:33:25 -0500
Subject: [R] Re: tutorial =?iso-8859-1?Q?=22R_pour_les_d=E9butants=22?=  is   
 available on CRAN
In-Reply-To: <3.0.32.19700101010000.0091a100@162.38.183.200>
References: <3.0.32.19700101010000.0091a100@162.38.183.200>
Message-ID: <p04330100b6aa8f402e07@[35.9.11.26]>

The correct link to the document appears to be

http://cran.r-project.org/doc/contrib/Rdebuts_fr.pdf

There is also already an English translation of it at

http://cran.r-project.org/doc/contrib/Rdebuts_en.pdf

James Jetton


Emmanuel Paradis wrote:

>Thanks to Friedrich Leisch, my document "R pour les d?butants" is available
>on CRAN in the contributed documentation section:
>http://cran.r-project.org/doc/contrib/Rdebuts.pdf.
>It is written in French. "R pour les d?butants" ("R for beginners") gives a
>starting point for people with no experience with R (or S). I tried to
>explain the basics in the simplest way, as well as giving useful details
>(mostly with tables). Any feed-back would be greatly appreciated. If some
>people think that an English translation would be useful, I would be ready
>to consider it.
>
>Chers utilisateurs de R,
>
>Gr?ce ? Friedrich Leisch, mon document "R pour les d?butants" est
>disponible sur CRAN dans la section "contributed documentation":
>http://cran.r-project.org/doc/contrib/Rdebuts.pdf.
>Le but de "R pour les d?butants" est de fournir un point de d?part pour les
>utilisateurs qui n'ont aucune exp?rience avec R (ou S). J'ai essay? de
>simplifier les explications, tout en donnant des d?tails utiles (le plus
>souvent sous forme de tableaux). Tout commentaire ou suggestion serait
>grandement appr?ci?. Si certaines personnes pensent qu'une tranduction en
>anglais serait utile, je serais pr?t ? examiner cette possibilit?.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pperkins at ucsd.edu  Sat Feb 10 08:11:46 2001
From: pperkins at ucsd.edu (Peter Perkins)
Date: Fri, 09 Feb 2001 23:11:46 -0800
Subject: [R] match.call() and do.call()
Message-ID: <3A84E9B2.2284B218@ucsd.edu>

hi all -

i have a function that needs to call glm() with a weights argument that
includes a variable whose name comes from the caller.  so instead of:

   fit <- glm(formula, poisson(), data, weights = 1-z, ...),

i do something like this:

   fit <- do.call("glm", list(formula=formula, family=poisson(),
      data=data, weights = call("-", 1, as.name(zname)), ...))

this works ok, but i find that the call component of the fit object
returned by glm() has taken things a bit too literally -- it has
literals for all of the args in the call, rather than variable and
function names as the object returned by the first form above would.  in
a simpler example, 

> fun <- function(x, f) print(match.call())
> xx <- 1:10
> fun(x, sum)
fun(x = x, f = sum)
> do.call("fun", list(x = xx, f = sum))
fun(x = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10), f = function (..., 
    na.rm = FALSE) 
.Internal(sum(..., na.rm = na.rm)))

this sure is ugly -- can anyone offer a way to get around it?  that is,
i'd like to have fit$call look like it would for a direct call to glm(),
with the user-supplied variable name nicely substituted into the
weights= arg.  as i understand it, i can't get around using do.call().

thanks for any help.

- peter
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Feb 10 09:42:41 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 10 Feb 2001 08:42:41 +0000 (GMT)
Subject: [R] demo(tkttest) exits with error messages
In-Reply-To: <3.0.5.32.20010209115439.007c76b0@gfeeney.com>
Message-ID: <Pine.GSO.4.31.0102100840040.466-100000@auk.stats>

On Fri, 9 Feb 2001, Griffith Feeney wrote:

> I've just installed tcl version 8.3 for windows for use with rw1021,
> running on win95 (4.00.950). demo(tkttest) gives the following error messages.
>
> > require(tcltk) || stop("tcltk support is absent")
> Loading required package: tcltk
> Error in firstlib(which.lib.loc, package) :
>         TCL_LIBRARY is not set
> Error in eval.with.vis(expr, envir, enclos) :
>         tcltk support is absent
>
> Can't find any explanation in the documentation (looked at refman chapter
> 11) or mailing list archives.  TCL_LIBRARY is a DOS environment variable,
> presumably? What should it be set to? Tried setting it to
> "C:\PROGRA~1\TCL\LIB" (where tcl is installed), this doesn't work.

Try the rw-faq question 3.6:

For package tcltk to work (try `demo(tkdensity)' or `demo(tkttest)')
you need to have Tcl installed.  Download `tcl832.exe' (or use
`tcl831.exe' if you already have it) from <dev.scriptics.com> and
install it. (That will put the `bin' directory containing the Tcl and
Tk DLLs in your path).  You then need to set the environment variable
`TCL_LIBRARY', to something like `c:/Program Files/Tcl/lib/tcl8.3'.
(The startup code for the package will warn you if this is unset, and
Q3.2 explains how to set them.  NB: do not quote the path, even if as
here it contains spaces.)


There has been discussion of this on the list several times, and the
information is also in CHANGES.  But I think it is precisely what FAQs are
for!


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Feb 10 09:51:34 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 10 Feb 2001 08:51:34 +0000 (GMT)
Subject: [R] Scatterplot - symbols coded by factor
In-Reply-To: <002e01c09316$a9898720$c4c8c284@cudenver.edu>
Message-ID: <Pine.GSO.4.31.0102100850210.466-100000@auk.stats>

On Fri, 9 Feb 2001, Matt Pocernich wrote:

> Hi - I would like to create a scatterplot with the symbols coded by a factor in each record.  Is their a better way than what I have used below?  I attempted to use the plot.factor, but cannot force it to make a scatterplot instead of boxplots.  I have considerd making a function with a 'for' statement for each level of the factor.  Is there a better way for when I am dealing with more levels of factors?
>
> Thanks,  Matt Pocernich
>
> Y <- c(40,38,30,47,25,32,13,35,27,24,20,13)
> X<-c(110,75,93,97,60,75,38,140,62,90,45,59)
> manuf <- factor(rep(LETTERS[1:3],c(4,4,4)))
> data3 <- data.frame(X,Y,manuf)
> attach(data3)
>
> plot(X, Y, type="n")
> points(X[manuf=="A"], Y[manuf=="A"], pch = "A")
> points(X[manuf=="B"], Y[manuf=="B"], pch = "B")
> points(X[manuf=="C"], Y[manuf=="B"], pch = "C")

You can use

> plot(X, Y, type="n")
> points(X, Y, pch=as.character(manuf))


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Feb 10 10:06:10 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 10 Feb 2001 09:06:10 +0000 (GMT)
Subject: [R] link R to VB
In-Reply-To: <20010209212700.30977.qmail@web11507.mail.yahoo.com>
Message-ID: <Pine.GSO.4.31.0102100859060.466-100000@auk.stats>

On Fri, 9 Feb 2001, Yu-Ling Wu wrote:

> Hi,
>
> 1. How to dynamic link the outputs from R to MS-Word
> or MS-Excel?

I am not sure what you mean here.  If you mean something like OLE, you
can't fo that with R (and why would you want to?).  What `output' did you
have in mind, anyway?  For matrices of data you can use RODBC from R to
link to Excel, and he R-Excel interface to link from Excel (which is based
on my answer to 2.).


> 2. I'd like to develop an VB application and use R as
> the "backgroud calculator".
> How do I call R and its function in VB?

Use the DCOM interface by Thomas Baier, on CRAN under

Software->Other->Non-standard Packages.


I should warn that none of this is plug-and-play and needs care to
follow the instructions exactly.  But the DCOM interface has been used by
many people, and very effectively.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Feb 10 10:26:27 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 10 Feb 2001 09:26:27 +0000 (GMT)
Subject: [R] match.call() and do.call()
In-Reply-To: <3A84E9B2.2284B218@ucsd.edu>
Message-ID: <Pine.GSO.4.31.0102100908570.466-100000@auk.stats>

On Fri, 9 Feb 2001, Peter Perkins wrote:

> hi all -
>
> i have a function that needs to call glm() with a weights argument that
> includes a variable whose name comes from the caller.  so instead of:
>
>    fit <- glm(formula, poisson(), data, weights = 1-z, ...),
>
> i do something like this:
>
>    fit <- do.call("glm", list(formula=formula, family=poisson(),
>       data=data, weights = call("-", 1, as.name(zname)), ...))
>
> this works ok, but i find that the call component of the fit object
> returned by glm() has taken things a bit too literally -- it has
> literals for all of the args in the call, rather than variable and
> function names as the object returned by the first form above would.  in
> a simpler example,
>
> > fun <- function(x, f) print(match.call())
> > xx <- 1:10
> > fun(x, sum)
> fun(x = x, f = sum)
> > do.call("fun", list(x = xx, f = sum))
> fun(x = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10), f = function (...,
>     na.rm = FALSE)
> .Internal(sum(..., na.rm = na.rm)))
>
> this sure is ugly -- can anyone offer a way to get around it?  that is,
> i'd like to have fit$call look like it would for a direct call to glm(),
> with the user-supplied variable name nicely substituted into the
> weights= arg.  as i understand it, i can't get around using do.call().

You need to quote the arguments you do not want literally in a call to
do.call, so

do.call("fun", list(x = quote(xx), f = quote(sum)))

works as you expected.


However, I think you are using the wrong tool.  Try substitute:

eval(substitute(glm(formula, poisson(), data, weights=1-w),
                list(w=as.name(zname))))

if zname is a character vector.

Also, one can construct a call as a character string and use
eval(parse(text=)), although substitute is usually cleaner.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From acosa at ubu.es  Sat Feb 10 11:50:25 2001
From: acosa at ubu.es (Alvaro Colina Santamaria)
Date: Sat, 10 Feb 2001 11:50:25 +0100
Subject: [R] Scatterplot - symbols coded by factor
Message-ID: <3A851CF1.B71F4F28@ubu.es>

Matt Pocernich wrote:

> Hi - I would like to create a scatterplot with the symbols
coded by a
> factor in each record.  Is their a better way than what I
have used
> below?  I attempted to use the plot.factor, but cannot force
it to
> make a scatterplot instead of boxplots.  I have considerd
making a
> function with a 'for' statement for each level of the factor.
Is
> there a better way for when I am dealing with more levels of
factors?
> Thanks,  Matt Pocernich
>

You can use the function text.
plot(X,Y,type='n')
text(X, Y, labels = as.character(manuf))

--
==============================================================
Alvaro Colina                   |-|o||o||o||o||o||o||o||o||o|-
Area de Quimica Analitica       | Pza. Misael Banuelos s/n
Facultad de Ciencias            | 09001. Burgos. Spain
Universidad de Burgos           | Phone: 34-947-258817
e-mail: acosa at ubu.es            | FAX:   34-947-258831
==============================================================



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Sat Feb 10 12:47:22 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 10 Feb 2001 12:47:22 +0100
Subject: [R] demo(tkttest) exits with error messages
In-Reply-To: Prof Brian D Ripley's message of "Sat, 10 Feb 2001 08:42:41 +0000 (GMT)"
References: <Pine.GSO.4.31.0102100840040.466-100000@auk.stats>
Message-ID: <x2pugqwyid.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley at stats.ox.ac.uk> writes:

...
> For package tcltk to work (try `demo(tkdensity)' or `demo(tkttest)')
> you need to have Tcl installed.  Download `tcl832.exe' (or use
> `tcl831.exe' if you already have it) from <dev.scriptics.com> and
> install it. (That will put the `bin' directory containing the Tcl and
> Tk DLLs in your path).  You then need to set the environment variable
> `TCL_LIBRARY', to something like `c:/Program Files/Tcl/lib/tcl8.3'.
> (The startup code for the package will warn you if this is unset, and
> Q3.2 explains how to set them.  NB: do not quote the path, even if as
> here it contains spaces.)
> 
> 
> There has been discussion of this on the list several times, and the
> information is also in CHANGES.  But I think it is precisely what FAQs are
> for!

BTW, last I played with this, I found that the following worked nicely
from inside R (can be useful if you have no access to the system
startup files).

Sys.putenv("TCL_LIBRARY"="c:/Program Files/Tcl/lib/tcl8.3")

What *is* the recommended way of setting environment variables on
Windows anyway?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From paradis at isem.univ-montp2.fr  Sat Feb 10 14:17:00 2001
From: paradis at isem.univ-montp2.fr (Emmanuel Paradis)
Date: Sat, 10 Feb 2001 14:17:00 +0100
Subject: [R] Scatterplot - symbols coded by factor
Message-ID: <3.0.32.20010210141700.00909d50@162.38.183.200>

At 08:51 10/02/01 +0000, Brian D Ripley wrote:
>On Fri, 9 Feb 2001, Matt Pocernich wrote:
>
>> Hi - I would like to create a scatterplot with the symbols coded by a
factor in each record.  Is their a better way than what I have used below?
I attempted to use the plot.factor, but cannot force it to make a
scatterplot instead of boxplots.  I have considerd making a function with a
'for' statement for each level of the factor.  Is there a better way for
when I am dealing with more levels of factors?
>>
>> Thanks,  Matt Pocernich
>>
>> Y <- c(40,38,30,47,25,32,13,35,27,24,20,13)
>> X<-c(110,75,93,97,60,75,38,140,62,90,45,59)
>> manuf <- factor(rep(LETTERS[1:3],c(4,4,4)))
>> data3 <- data.frame(X,Y,manuf)
>> attach(data3)
>>
>> plot(X, Y, type="n")
>> points(X[manuf=="A"], Y[manuf=="A"], pch = "A")
>> points(X[manuf=="B"], Y[manuf=="B"], pch = "B")
>> points(X[manuf=="C"], Y[manuf=="B"], pch = "C")
>
>You can use
>
>> plot(X, Y, type="n")
>> points(X, Y, pch=as.character(manuf))


The following (inspired from demo(graphics)) may also be useful:

	plot(X, Y, pch=levels(manuf)[codes(manuf)])

The example in demo(graphics) shows a case where the user wants different
colours for the symbols with respect to a factor (here the Iris species):

	pairs(iris[1:4], main = "Edgar Anderson's Iris Data", 
		pch = 21, bg = c("red", "green3", "blue")[codes(iris$Species)])


Emmanuel Paradis
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cyg at sympatico.ca  Sat Feb 10 14:36:07 2001
From: cyg at sympatico.ca (Yves Gauvreau)
Date: Sat, 10 Feb 2001 08:36:07 -0500
Subject: [R] demo(tkttest) exits with error messages
In-Reply-To: <x2pugqwyid.fsf@blueberry.kubism.ku.dk>
Message-ID: <NEBBJKDJHEFCOOLFFAKKMENFCAAA.cyg@sympatico.ca>


> -----Message d'origine-----
> De : owner-r-help at stat.math.ethz.ch
> [mailto:owner-r-help at stat.math.ethz.ch]De la part de Peter Dalgaard BSA
> Envoye : Saturday, February 10, 2001 6:47 AM
> A : Prof Brian D Ripley
> Cc : Griffith Feeney; r-help at stat.math.ethz.ch
> Objet : Re: [R] demo(tkttest) exits with error messages
>
>
> Prof Brian D Ripley <ripley at stats.ox.ac.uk> writes:
>
> ...
> > For package tcltk to work (try `demo(tkdensity)' or `demo(tkttest)')
> > you need to have Tcl installed.  Download `tcl832.exe' (or use
> > `tcl831.exe' if you already have it) from <dev.scriptics.com> and
> > install it. (That will put the `bin' directory containing the Tcl and
> > Tk DLLs in your path).  You then need to set the environment variable
> > `TCL_LIBRARY', to something like `c:/Program Files/Tcl/lib/tcl8.3'.
> > (The startup code for the package will warn you if this is unset, and
> > Q3.2 explains how to set them.  NB: do not quote the path, even if as
> > here it contains spaces.)
> >
> >
> > There has been discussion of this on the list several times, and the
> > information is also in CHANGES.  But I think it is precisely
> what FAQs are
> > for!
>
> BTW, last I played with this, I found that the following worked nicely
> from inside R (can be useful if you have no access to the system
> startup files).
>
> Sys.putenv("TCL_LIBRARY"="c:/Program Files/Tcl/lib/tcl8.3")
>
> What *is* the recommended way of setting environment variables on
> Windows anyway?

I notice that if one sets an environment variable from outside while R is
running it as no effect at least under NT. The same goes for cmd.exe for
example, if you set some environment variable via the control panel it will
not be visible to cmd.exe this time around. If you restart R you will get
the new environment setting.

I've managed to get some of the TclTk demos to run but some don't run to
good. At least not all of them:

> demo("tkttest")


        demo(tkttest)
        ---- ~~~~~~~

Type  <Return>   to start :

> require(tcltk) || stop("tcltk support is absent")
Loading required package: tcltk
[1] TRUE

> require(ctest)
[1] TRUE

> local({
    dialog.t.test <- function() {
        tt <- tktoplevel()
        tkwm.title(tt, "t test")
        x.entry <- tkentry(tt, textvariable = "xvar")
        y.entry <- tkentry(tt, textvariable = "yvar")
        reset <- function() {
           .... [TRUNCATED]
******************************************************
 The source for this demo can be found in the file:
 D:\R\rw1021/demos/tcltk/tkttest.R
******************************************************
### Command executed via Tk ###
t.test(Ozone[Month == 5], Ozone[Month == 8], alternative = "two.sided",
    var.equal = TRUE)
### -----

          Two Sample t-test

data:  Ozone[Month == 5] and Ozone[Month == 8]
t = -4.0749, df = 50, p-value = 0.0001645
alternative hypothesis: true difference in means is not equal to 0
95 percent confidence interval:
 -54.26163 -18.43068
sample estimates:
mean of x mean of y
 23.61538  59.96154

Warning message:
list.files: D:\R\rw1021\bin/data is not a readable directory
>


******************* I don't know if this is ok or not!
**************************

> demo("tkfaq")

Shows the window with the faq and starts complaining with errors as soon as
I try to scroll or close it. I had to quit R to close it!

> demo("tkdensity")

Seems to work fine.

> demo("tkfilefind") & demo("tkcanvas")

Seems to work fine also.


Just to make sure, I'm not complaining here, I just report what I observe.

Regards.


>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-help mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._
>

platform i386-pc-mingw32
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    2.1
year     2001
month    01
day      15
language R

Yves Gauvreau
B.E.F.P. Universite du Quebec a Montreal
cyg at sympatico.ca

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Feb 10 16:01:16 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 10 Feb 2001 15:01:16 +0000 (GMT)
Subject: [R] demo(tkttest) exits with error messages
In-Reply-To: <x2pugqwyid.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.31.0102101456380.20684-100000@toucan.stats>

On 10 Feb 2001, Peter Dalgaard BSA wrote:

> Prof Brian D Ripley <ripley at stats.ox.ac.uk> writes:
>
> ...
> > For package tcltk to work (try `demo(tkdensity)' or `demo(tkttest)')
> > you need to have Tcl installed.  Download `tcl832.exe' (or use
> > `tcl831.exe' if you already have it) from <dev.scriptics.com> and
> > install it. (That will put the `bin' directory containing the Tcl and
> > Tk DLLs in your path).  You then need to set the environment variable
> > `TCL_LIBRARY', to something like `c:/Program Files/Tcl/lib/tcl8.3'.
> > (The startup code for the package will warn you if this is unset, and
> > Q3.2 explains how to set them.  NB: do not quote the path, even if as
> > here it contains spaces.)
> >
> >
> > There has been discussion of this on the list several times, and the
> > information is also in CHANGES.  But I think it is precisely what FAQs are
> > for!
>
> BTW, last I played with this, I found that the following worked nicely
> from inside R (can be useful if you have no access to the system
> startup files).
>
> Sys.putenv("TCL_LIBRARY"="c:/Program Files/Tcl/lib/tcl8.3")
>
> What *is* the recommended way of setting environment variables on
> Windows anyway?

Well, that's in the rw-FAQ too!   You are advised to make a shortcut to
Rgui.exe, and add the setting to the end of the command line, or
use .Renviron.  Neither of those need any access to any system files.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Feb 10 16:05:58 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 10 Feb 2001 15:05:58 +0000 (GMT)
Subject: [R] demo(tkttest) exits with error messages
In-Reply-To: <NEBBJKDJHEFCOOLFFAKKMENFCAAA.cyg@sympatico.ca>
Message-ID: <Pine.GSO.4.31.0102101501280.20684-100000@toucan.stats>

On Sat, 10 Feb 2001, Yves Gauvreau wrote:

>
> > -----Message d'origine-----
> > De : owner-r-help at stat.math.ethz.ch
> > [mailto:owner-r-help at stat.math.ethz.ch]De la part de Peter Dalgaard BSA
> > Envoye : Saturday, February 10, 2001 6:47 AM
> > A : Prof Brian D Ripley
> > Cc : Griffith Feeney; r-help at stat.math.ethz.ch
> > Objet : Re: [R] demo(tkttest) exits with error messages
> >
> >
> > Prof Brian D Ripley <ripley at stats.ox.ac.uk> writes:
> >
> > ...
> > > For package tcltk to work (try `demo(tkdensity)' or `demo(tkttest)')
> > > you need to have Tcl installed.  Download `tcl832.exe' (or use
> > > `tcl831.exe' if you already have it) from <dev.scriptics.com> and
> > > install it. (That will put the `bin' directory containing the Tcl and
> > > Tk DLLs in your path).  You then need to set the environment variable
> > > `TCL_LIBRARY', to something like `c:/Program Files/Tcl/lib/tcl8.3'.
> > > (The startup code for the package will warn you if this is unset, and
> > > Q3.2 explains how to set them.  NB: do not quote the path, even if as
> > > here it contains spaces.)
> > >
> > >
> > > There has been discussion of this on the list several times, and the
> > > information is also in CHANGES.  But I think it is precisely
> > what FAQs are
> > > for!
> >
> > BTW, last I played with this, I found that the following worked nicely
> > from inside R (can be useful if you have no access to the system
> > startup files).
> >
> > Sys.putenv("TCL_LIBRARY"="c:/Program Files/Tcl/lib/tcl8.3")
> >
> > What *is* the recommended way of setting environment variables on
> > Windows anyway?
>
> I notice that if one sets an environment variable from outside while R is
> running it as no effect at least under NT. The same goes for cmd.exe for
> example, if you set some environment variable via the control panel it will
> not be visible to cmd.exe this time around. If you restart R you will get
> the new environment setting.

That's true for any OS: environment variables are inherited at startup.
The *only* was to set them on a running R process is via Sys.putenv (or C
code).

>
> I've managed to get some of the TclTk demos to run but some don't run to
> good. At least not all of them:
>
> > demo("tkttest")
>
>
>         demo(tkttest)
>         ---- ~~~~~~~
>
> Type  <Return>   to start :
>
> > require(tcltk) || stop("tcltk support is absent")
> Loading required package: tcltk
> [1] TRUE
>
> > require(ctest)
> [1] TRUE
>
> > local({
>     dialog.t.test <- function() {
>         tt <- tktoplevel()
>         tkwm.title(tt, "t test")
>         x.entry <- tkentry(tt, textvariable = "xvar")
>         y.entry <- tkentry(tt, textvariable = "yvar")
>         reset <- function() {
>            .... [TRUNCATED]
> ******************************************************
>  The source for this demo can be found in the file:
>  D:\R\rw1021/demos/tcltk/tkttest.R
> ******************************************************
> ### Command executed via Tk ###
> t.test(Ozone[Month == 5], Ozone[Month == 8], alternative = "two.sided",
>     var.equal = TRUE)
> ### -----
>
>           Two Sample t-test
>
> data:  Ozone[Month == 5] and Ozone[Month == 8]
> t = -4.0749, df = 50, p-value = 0.0001645
> alternative hypothesis: true difference in means is not equal to 0
> 95 percent confidence interval:
>  -54.26163 -18.43068
> sample estimates:
> mean of x mean of y
>  23.61538  59.96154
>
> Warning message:
> list.files: D:\R\rw1021\bin/data is not a readable directory
> >
>
>
> ******************* I don't know if this is ok or not!
> **************************

It should not be there.  I suspect you have not set the working directoy
in the shortcut you used to start R: see the rw-FAQ Q2.2.  Do set it to
somewhere which will not clobber the R installation, and remove the file
D:\R\rw1021\bin\data


> > demo("tkfaq")
>
> Shows the window with the faq and starts complaining with errors as soon as
> I try to scroll or close it. I had to quit R to close it!

Works for me.

> > demo("tkdensity")
>
> Seems to work fine.
>
> > demo("tkfilefind") & demo("tkcanvas")
>
> Seems to work fine also.
>
>
> Just to make sure, I'm not complaining here, I just report what I observe.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Feb 10 16:42:53 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 10 Feb 2001 15:42:53 +0000 (GMT)
Subject: [R] Scatterplot - symbols coded by factor
In-Reply-To: <3.0.32.20010210141700.00909d50@162.38.183.200>
Message-ID: <Pine.GSO.4.31.0102101533240.20810-100000@toucan.stats>

On Sat, 10 Feb 2001, Emmanuel Paradis wrote:

> At 08:51 10/02/01 +0000, Brian D Ripley wrote:
> >On Fri, 9 Feb 2001, Matt Pocernich wrote:
> >
> >> Hi - I would like to create a scatterplot with the symbols coded by a
> factor in each record.  Is their a better way than what I have used below?
> I attempted to use the plot.factor, but cannot force it to make a
> scatterplot instead of boxplots.  I have considerd making a function with a
> 'for' statement for each level of the factor.  Is there a better way for
> when I am dealing with more levels of factors?
> >>
> >> Thanks,  Matt Pocernich
> >>
> >> Y <- c(40,38,30,47,25,32,13,35,27,24,20,13)
> >> X<-c(110,75,93,97,60,75,38,140,62,90,45,59)
> >> manuf <- factor(rep(LETTERS[1:3],c(4,4,4)))
> >> data3 <- data.frame(X,Y,manuf)
> >> attach(data3)
> >>
> >> plot(X, Y, type="n")
> >> points(X[manuf=="A"], Y[manuf=="A"], pch = "A")
> >> points(X[manuf=="B"], Y[manuf=="B"], pch = "B")
> >> points(X[manuf=="C"], Y[manuf=="B"], pch = "C")
> >
> >You can use
> >
> >> plot(X, Y, type="n")
> >> points(X, Y, pch=as.character(manuf))
>
>
> The following (inspired from demo(graphics)) may also be useful:
>
> 	plot(X, Y, pch=levels(manuf)[codes(manuf)])

That will only work if the levels are alphabetical order. Best avoid
codes() unless you really need it. You could use
levels(manuf)[unclass(manuf)], but as.character(manif) is simpler (if
marginally slower).

See the warning on the help page:

     For an unordered factor, an alphabetical ordering of the levels is
     assumed, i.e the level that is coded 1 is the one whose name is
     sorted first according to the prevailing collating sequence.
     Warning: the sort order may well depend on the locale, and should
     not be assumed to be ASCII.

The reason for the warning is that in the C locale it is boBO, in the
en_UK locale on SunOS (and analogously on Windows)  bBoO, and one might
expect BbOo as in a book index.

> The example in demo(graphics) shows a case where the user wants different
> colours for the symbols with respect to a factor (here the Iris species):
>
> 	pairs(iris[1:4], main = "Edgar Anderson's Iris Data",
> 		pch = 21, bg = c("red", "green3", "blue")[codes(iris$Species)])

Yes, it does. Fortunately the levels are in alphabetical order.  I suspect
that example is so old that the meaning of codes() has changed since that
was written.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From poohtest at yahoo.com  Sat Feb 10 20:32:37 2001
From: poohtest at yahoo.com (pooh rondstr)
Date: Sat, 10 Feb 2001 11:32:37 -0800 (PST)
Subject: [R] How to compute the power of a two-sample t-test (one-sided)?
In-Reply-To: <20010210192232.22617.qmail@web12008.mail.yahoo.com>
Message-ID: <20010210193237.83086.qmail@web12002.mail.yahoo.com>


 
 
  Dear R users,
 
  I want to compute the power of a two-sample
 t-test (one-sided) as new R user!

  I would appreciate your help.
 
 Thanks,
 
Pooh 

__________________________________________________
Do You Yahoo!?
Get personalized email addresses from Yahoo! Mail - only $35 
a year!  http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rnassar at duke.edu  Sat Feb 10 22:26:04 2001
From: rnassar at duke.edu (Rashid Nassar)
Date: Sat, 10 Feb 2001 16:26:04 -0500 (EST)
Subject: [R] How to compute the power of a two-sample t-test (one-sided)?
In-Reply-To: <20010210193237.83086.qmail@web12002.mail.yahoo.com>
Message-ID: <Pine.SOL.3.91.1010210162442.220A-100000@godzilla1.acpub.duke.edu>

Use power.t.test() .  For syntax, see  help(power.t.test).


Rashid Nassar


>   Dear R users,
>  
>   I want to compute the power of a two-sample
>  t-test (one-sided) as new R user!
> 
>   I would appreciate your help.
>  
>  Thanks,
>  
> Pooh 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jasont at indigoindustrial.co.nz  Mon Feb 12 13:50:31 2001
From: jasont at indigoindustrial.co.nz (Jason Turner)
Date: Tue, 13 Feb 2001 01:50:31 +1300
Subject: [R] 3d plots?
Message-ID: <20010213015030.A1994@camille.indigoindustrial.co.nz>

Hi all

I'm trying to create a three-dimensional wireframe-type plot,
much like the screenshot shown at
http://www.r-project.org/screenshots/volcano-persp.jpg

In my case, I'm trying to show a density estimate of
two-variable system, using the GenKern package.  I've
used the image() and contour() to create a nice shaded plot,
but I've found a 3d plot is often easier for the audience
to absorb.

The session is simple enough; dfw is a data.frame of 
two variables, pressure and flow.

> library(GenKern)
> attach(dfw)
> ks<- KernSur(pressure,flow)
#now, make the shaded contour plot.
> image(ks$xvals,ks$yvals,ks$zden,col=terrain.colors(100), axes=TRUE)
> contour(ks$xvals,ks$yvals,ks$zden,add=TRUE)

Any ideas from here?

Cheers

Jason
-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont at indigoindustrial.co.nz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ligges at statistik.uni-dortmund.de  Sun Feb 11 11:03:34 2001
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Sun, 11 Feb 2001 11:03:34 +0100
Subject: [R] 3d plots?
References: <20010213015030.A1994@camille.indigoindustrial.co.nz>
Message-ID: <3A866376.1EEC528B@statistik.uni-dortmund.de>

Jason Turner wrote:
> 
> Hi all
> 
> I'm trying to create a three-dimensional wireframe-type plot,
> much like the screenshot shown at
> http://www.r-project.org/screenshots/volcano-persp.jpg
> 
> In my case, I'm trying to show a density estimate of
> two-variable system, using the GenKern package.  I've
> used the image() and contour() to create a nice shaded plot,
> but I've found a 3d plot is often easier for the audience
> to absorb.
> 
> The session is simple enough; dfw is a data.frame of
> two variables, pressure and flow.
> 
> > library(GenKern)
> > attach(dfw)
> > ks<- KernSur(pressure,flow)
> #now, make the shaded contour plot.
> > image(ks$xvals,ks$yvals,ks$zden,col=terrain.colors(100), axes=TRUE)
> > contour(ks$xvals,ks$yvals,ks$zden,add=TRUE)
> 
> Any ideas from here?

persp() ...

Uwe
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ajm6q at virginia.edu  Sun Feb 11 18:47:04 2001
From: ajm6q at virginia.edu (Aaron J Mackey)
Date: Sun, 11 Feb 2001 12:47:04 -0500 (EST)
Subject: [R] embedding R?
Message-ID: <Pine.OSF.4.30.0102111230130.25836-100000@alpha0.bioch.virginia.edu>


My apologies if this is a FAQ, I searched the mailing list archives before
posting.

Background: I am a long time user of SPlus, and a recent user of R.  My
work normally involves converting the raw output of something interesting
into data to be analyzed in S/R, for which I use Perl extensively.  I then
import the data into S/R, perform the analyses I need, dumping the values
into a new file, further Perl processing, eventual database storage.

I've recently become acquainted with a new Perl module called "Inline"
which allows you to embed C/C++/Python/etc code within your Perl program
and use those functions as part of your regular perl program.  Briefly,
Inline is taking care of all the code creation, compiling and dynamic
loading necessary to make this work "transparently".  I am hoping to write
a similar "filter" for R, and so have just begun to delve into the R api
(remember, I've only been a command-line/batch script user previously).

I see that I can write extensions in C/Fortran, which can be dynamically
loaded into R, and that the extension code can access R functions and
data.  But that's all still running under R.  What about a program that
dynamically loads R itself (trivial example follows):

#include <stdio.h>
#include <R.h>

#define MAXNUM = 100;

int main(int argc, char **argv) {

    int n;
    int i[MAXNUM];

    for(n = 1 ; n < argc && n <= MAXNUM ; n++) {
        i[n-1] = atoi(argv[n]);
    }

    printf("mean: %4.2f\n", R_mean(i, n - 1));
    exit(0);
}

% gcc -lR mean.c -o mean
% mean 4 5 6 7
mean: 5.5
% exit

Where "R_mean" is calling the R function mean() ???

Any help is appreciated.  And I'm not going to worry about graphical
functions just yet.  Just need a pointer or two into the right piece of
documentation.

-Aaron

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Sun Feb 11 19:52:43 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 11 Feb 2001 19:52:43 +0100
Subject: [R] embedding R?
In-Reply-To: Aaron J Mackey's message of "Sun, 11 Feb 2001 12:47:04 -0500 (EST)"
References: <Pine.OSF.4.30.0102111230130.25836-100000@alpha0.bioch.virginia.edu>
Message-ID: <x2lmrdt5l0.fsf@blueberry.kubism.ku.dk>

Aaron J Mackey <ajm6q at virginia.edu> writes:

> int main(int argc, char **argv) {
> 
>     int n;
>     int i[MAXNUM];
> 
>     for(n = 1 ; n < argc && n <= MAXNUM ; n++) {
>         i[n-1] = atoi(argv[n]);
>     }
> 
>     printf("mean: %4.2f\n", R_mean(i, n - 1));
>     exit(0);
> }
> 
> % gcc -lR mean.c -o mean
> % mean 4 5 6 7
> mean: 5.5
> % exit
> 
> Where "R_mean" is calling the R function mean() ???
> 
> Any help is appreciated.  And I'm not going to worry about graphical
> functions just yet.  Just need a pointer or two into the right piece of
> documentation.

This easily gets involved, but:

You can link R as a dynamic library. You'll need to convert C
structures to and from R internal storage form. Some of the
lower-level functions work on C structures directly. There's also the
possibility of building the standalone mathlib.

Much of R sits at the interpreted level, so you'd probably want to be
able to call the parser/evaluator rather than R's internal C code.
There's a rudimentary example of such a thing in the R_eval function
in tcltk.c. (This assumes that the variables you're dealing with are
already known to R, so you'd have to find a way of making that so...).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ajm6q at virginia.edu  Sun Feb 11 19:48:44 2001
From: ajm6q at virginia.edu (Aaron J Mackey)
Date: Sun, 11 Feb 2001 13:48:44 -0500 (EST)
Subject: [R] Re: embedding R?
In-Reply-To: <Pine.OSF.4.30.0102111230130.25836-100000@alpha0.bioch.virginia.edu>
Message-ID: <Pine.OSF.4.30.0102111343510.25836-100000@alpha0.bioch.virginia.edu>


Many have pointed me to www.omegahat.org, which provides the RSPerl
interface.  This looks great, but isn't exactly what I was looking for
(although it could be argued that perhaps I should change my mind about
what I'm looking for).  I do not wish to embed Perl within R, but the
opposite.  I'd like to have an R interpreter available to my Perl
interpreter, i.e. embed R in Perl.

But thank you all for flooding my inbox with valuable responses, I will
indeed investigate RSPerl further.  I will also investigate
http://developer.r-project.org/embedded.html further ...

-Aaron

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From edd at debian.org  Sun Feb 11 20:29:37 2001
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 11 Feb 2001 13:29:37 -0600 (CST)
Subject: [R] embedding R?
In-Reply-To: <Pine.OSF.4.30.0102111230130.25836-100000@alpha0.bioch.virginia.edu>
References: <Pine.OSF.4.30.0102111230130.25836-100000@alpha0.bioch.virginia.edu>
Message-ID: <14982.59425.409856.515717@sonny.eddelbuettel.com>


Have a look at www.omegahat.org where you can find, among other things, how
to embed Perl into R -- this way you keep you data acquisition 'as is'.
There are lots of other goodies on the omegahat page too...

Hope this helps,  Dirk

-- 
According to the latest figures, 43% of all statistics are totally worthless.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From znmeb at aracnet.com  Sun Feb 11 20:29:31 2001
From: znmeb at aracnet.com (M. Edward Borasky)
Date: Sun, 11 Feb 2001 11:29:31 -0800
Subject: [R] embedding R?
In-Reply-To: <Pine.OSF.4.30.0102111230130.25836-100000@alpha0.bioch.virginia.edu>
Message-ID: <HBEHIIBBKKNOBLMPKCBBCEJFDCAA.znmeb@aracnet.com>

> Background: I am a long time user of SPlus, and a recent user of R.  My
> work normally involves converting the raw output of something interesting
> into data to be analyzed in S/R, for which I use Perl extensively.  I then
> import the data into S/R, perform the analyses I need, dumping the values
> into a new file, further Perl processing, eventual database storage.

I have a similar modus operandi: I collect data with Perl, usually resulting
in either comma-separated value (.csv) or tab-separated value (.tab, .dat,
.txt or .tsv) format. Then, for *manual* analysis, I import the data into
either Excel, Minitab, or R directly, or, for larger data sets, import the
data into Microsoft Access and process in Excel or Minitab using ODBC
queries. In the near future I'll add "R-ODBC" to this collection of tools.

My outputs tend to be pictures rather than large amounts of processed data,
however, so mostly I'm interested in graphs that I can import into a Word
document which is the final report. I've made some attempts at automating
all of this, but there is a UNIX/Windows "seam" involved. It would be a big
help in some cases if UNIX "R" could act as an ODBC *server*; I can't use
the obvious choice, "mySQL", because of license restrictions.

The other thing I've done fairly recently in the *automated* analysis is
create the "R" code that does the plotting on the fly in the Perl script,
then execute the code with a Perl 'system' statement. I'm looking for a way
to make the "R" code *constant*, and pass such parameters as input and
output file names, variable names and graph labels to the "R" code, rather
than having the Perl code write an "R" code file for each graph I want to
plot. I think there's a way to do this with environment variables, but I
haven't dug into how "R" deals with environment variables yet. More elegant
would be the capability of passing parameters to the "R" command line just
like you pass parameters to any other UNIX or Windows command line.
--
Ed Borasky
http://www.aracnet.com/~znmeb
mailto:znmeb at aracnet.com

Q: What phrase will you never hear Candice Bergen use?
A: "My daddy didn't raise no dummies".

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jason at cs.rochester.edu  Sun Feb 11 23:15:22 2001
From: jason at cs.rochester.edu (Jason Eisner)
Date: Sun, 11 Feb 2001 17:15:22 -0500 (EST)
Subject: [R] splitting up optional args
Message-ID: <200102112215.RAA14199@heart.cs.rochester.edu>

Hi,

A question (& possible suggestion) about function calls.

Is there an R idiom to eliminate the redundancy in the
following common situation?

  foo <- function(x, control=ComplicatedDefault) { etc. }

  plotfoo <- function(x, foocontrol=ComplicatedDefault, ...) {
               y <- foo(x, control=foocontrol)
               lines(x,y,...) }

The idea is that there are MANY optional parameters to plotfoo().  
Any specified value for foocontrol should be passed to foo(), and the 
other options should be passed to lines() via "...".

The main trouble above is that the same default for foo()'s control
parameter has to be specified in two places.  This makes it hard to
maintain the code correctly.

Further trouble with the above example becomes clear if we elaborate
it a bit:

  plotfoo <- function(x, foocontrol=ComplicatedDefault, ...) {
               y <- foo(x, control=foocontrol)
               z <- foo(x+1, control=foocontrol)
               lines(x,y,...)    # respect lines()'s defaults
               par(col=3)        # change lines()'s defaults
               lines(x,z,...)    # respect new defaults 
               points(x,y+z,...) }  # respect points()'s defaults

When we call plotfoo(x), ComplicatedDefault is evaluated in plotfoo's
environment rather than foo's, and it is only evaluated once even
though we call foo twice.  This is not the same as if plotfoo simply
didn't specify a control parameter when calling foo.  It also
contrasts with the behavior of the unnamed optional arguments picked
up by "...".  For example, the default for the graphical parameter col
is evaluated in the environment of the callee (lines or points) and is
evaluated separately for each callee and on each call.

To eliminate the redundancy, I think one could write:

  plotfoo <- function(x, foocontrol=eval(formals(foo)$control), ...) {etc}

This is not terrible, but it is obscure for such a common situation,
and not mentioned in the documentation.  And it does not solve
the evaluation problems mentioned above.

Would it therefore make sense to extend R to allow the following?

  plotfoo <- function(x, foocontrol=, ...) {   # currently illegal
	y <- foo(x, control=foocontrol)
                plot(x,y,...) }

The rationale is that one can already call foo(x, control=) to request
the default control argument for foo.  Notionally, there is a special
"empty" value here that says "give me the default."  So it would be
nice to be able to pass that empty value down the call stack.  

The user presumably shouldn't be able to do much with this empty value
except to pass it as a parameter.  Indeed the empty value is
appropriately analogous to "..." in that it has such restricted use.

I do recognize that since the user can inspect (and construct?) code,
an expression for the empty value would be accessible as
formals(plotfoo)$foocontrol or as substitute(foocontrol) evaluated
within plotfoo(x).  

But this expression could be unevaluable, just as formals(plotfoo)$x
is unevaluable.  (Of course these two unevaluable expressions should
be different, so that the user of formals() can see that x is a
required argument and foocontrol isn't.)

An alternative is to make this expression evaluable.  Suppose we say
that it evaluates to a special object DEFAULT.  Then presumably
there would be no way to distinguish between
   foo(x, control=DEFAULT)
   foo(x, control=)
   foo(x)
but that seems okay to me.  An advantage to this approach is that
the user could write potentially useful expressions like 
   foo(x, control=ifelse(x==0, 3, DEFAULT))
and plotfoo could perhaps test its argument to find out whether
it was DEFAULT, i.e., not specified by the user.

By the way, another use for the proposed extension is as follows:
  plotfoo <- function(x, col=, lty=) { lines(x,foo(x),col=col,lty=lty) }
This is simply a version of
  plotfoo <- function(x, ...) { lines(x,foo(x), ...) }
that restricts the caller to certain named parameters, for safety.

I am an R novice and have undoubtedly have missed some considerations
here, so would be interested in any response from the experts.  Thanks!
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dyea002 at math.auckland.ac.nz  Sun Feb 11 23:33:21 2001
From: dyea002 at math.auckland.ac.nz (Daniel Yearsley)
Date: Mon, 12 Feb 2001 11:33:21 +1300
Subject: [R] Library MASS -- polr function
Message-ID: <3A871331.3DD97363@math.auckland.ac.nz>

I seem to be able to extract everything but the t value and Std.error
out of the summary function for polr.

Category <- factor(rep(c(-1,0,1),2))
Freq<-c(2,4,4,3,3,4)
Sample<-factor(rep(c("x","y"), rep(3,2)))
plr<-polr(Category~Sample,weights=Freq)
coefficients(summary(plr))     ???

Can anyone help

Cheers
Daniel Yearsley
dyea002 at math.auckland.ac.nz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dyea002 at math.auckland.ac.nz  Sun Feb 11 23:39:10 2001
From: dyea002 at math.auckland.ac.nz (Daniel Yearsley)
Date: Mon, 12 Feb 2001 11:39:10 +1300 (NZDT)
Subject: [R] library MASS -- polr function
Message-ID: <Pine.SOL.3.96.1010212113504.15471C-100000@aitken.scitec.auckland.ac.nz>

I seem to be able to extract everything but the t-value and std. error out
of the summary function for polr.

Category <- factor(rep(c(-1,0,1),2))
Freq <- c(2,4,4,3,3,4)
Sample <- factor(rep(c("x","y"), rep(3,2)))
plr <- polr(Category~Sample, weights = Freq)
coefficients(summary(plr))

Can anyone help??

Cheers
Daniel Yearsley
dyea002 at math.auckland.ac.nz


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Feb 12 00:26:19 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 11 Feb 2001 23:26:19 +0000 (GMT)
Subject: [R] Library MASS -- polr function
In-Reply-To: <3A871331.3DD97363@math.auckland.ac.nz>
Message-ID: <Pine.GSO.4.31.0102112319070.359-100000@toucan.stats>

On Mon, 12 Feb 2001, Daniel Yearsley wrote:

> I seem to be able to extract everything but the t value and Std.error
> out of the summary function for polr.
>
> Category <- factor(rep(c(-1,0,1),2))
> Freq<-c(2,4,4,3,3,4)
> Sample<-factor(rep(c("x","y"), rep(3,2)))
> plr<-polr(Category~Sample,weights=Freq)
> coefficients(summary(plr))     ???

You do it exactly as for lm. The t-values are

summary(plr)$coefficients[, "t value"]

and the standard errors are

summary(plr)$coefficients[, "Std. Error"]

These work for me in your example. (R 1.2.1, MASS from VR_6.2-3)

You can also use

vcov(plr)

to get the estimated covaraince matrix of the estimates.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Feb 12 00:38:49 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 11 Feb 2001 23:38:49 +0000 (GMT)
Subject: [R] splitting up optional args
In-Reply-To: <200102112215.RAA14199@heart.cs.rochester.edu>
Message-ID: <Pine.GSO.4.31.0102112328290.359-100000@toucan.stats>

If you look at some examples, I think that you will see that quite often
NULL is used to indicate your DEFAULT.

Also, missingness is passed down in R but not S, so

foo <- function(x, control)
{
   if(missing(control)) cat("using default control\n")
}
plotfoo <- function(x, foocontrol) { foo(x, control=foocontrol)}

> plotfoo(1:10)
using default control

does work, although you have to use an explicit test for missingness.


The more common version is

foo <- function(x, control=NULL)
{
   if(is.null(control)) cat("using default control\n")
}
plotfoo <- function(x, foocontrol=NULL) { foo(x, control=foocontrol)}

I have yet to see an example in which these did not suffice, and I've been
doing this for more than a decade.


On Sun, 11 Feb 2001, Jason Eisner wrote:

> A question (& possible suggestion) about function calls.
>
> Is there an R idiom to eliminate the redundancy in the
> following common situation?
>
>   foo <- function(x, control=ComplicatedDefault) { etc. }
>
>   plotfoo <- function(x, foocontrol=ComplicatedDefault, ...) {
>                y <- foo(x, control=foocontrol)
>                lines(x,y,...) }
>
> The idea is that there are MANY optional parameters to plotfoo().
> Any specified value for foocontrol should be passed to foo(), and the
> other options should be passed to lines() via "...".
>
> The main trouble above is that the same default for foo()'s control
> parameter has to be specified in two places.  This makes it hard to
> maintain the code correctly.
>
> Further trouble with the above example becomes clear if we elaborate
> it a bit:
>
>   plotfoo <- function(x, foocontrol=ComplicatedDefault, ...) {
>                y <- foo(x, control=foocontrol)
>                z <- foo(x+1, control=foocontrol)
>                lines(x,y,...)    # respect lines()'s defaults
>                par(col=3)        # change lines()'s defaults
>                lines(x,z,...)    # respect new defaults
>                points(x,y+z,...) }  # respect points()'s defaults
>
> When we call plotfoo(x), ComplicatedDefault is evaluated in plotfoo's
> environment rather than foo's, and it is only evaluated once even
> though we call foo twice.  This is not the same as if plotfoo simply
> didn't specify a control parameter when calling foo.  It also
> contrasts with the behavior of the unnamed optional arguments picked
> up by "...".  For example, the default for the graphical parameter col
> is evaluated in the environment of the callee (lines or points) and is
> evaluated separately for each callee and on each call.
>
> To eliminate the redundancy, I think one could write:
>
>   plotfoo <- function(x, foocontrol=eval(formals(foo)$control), ...) {etc}
>
> This is not terrible, but it is obscure for such a common situation,
> and not mentioned in the documentation.  And it does not solve
> the evaluation problems mentioned above.
>
> Would it therefore make sense to extend R to allow the following?
>
>   plotfoo <- function(x, foocontrol=, ...) {   # currently illegal
> 	y <- foo(x, control=foocontrol)
>                 plot(x,y,...) }
>
> The rationale is that one can already call foo(x, control=) to request
> the default control argument for foo.  Notionally, there is a special
> "empty" value here that says "give me the default."  So it would be
> nice to be able to pass that empty value down the call stack.
>
> The user presumably shouldn't be able to do much with this empty value
> except to pass it as a parameter.  Indeed the empty value is
> appropriately analogous to "..." in that it has such restricted use.
>
> I do recognize that since the user can inspect (and construct?) code,
> an expression for the empty value would be accessible as
> formals(plotfoo)$foocontrol or as substitute(foocontrol) evaluated
> within plotfoo(x).
>
> But this expression could be unevaluable, just as formals(plotfoo)$x
> is unevaluable.  (Of course these two unevaluable expressions should
> be different, so that the user of formals() can see that x is a
> required argument and foocontrol isn't.)
>
> An alternative is to make this expression evaluable.  Suppose we say
> that it evaluates to a special object DEFAULT.  Then presumably
> there would be no way to distinguish between
>    foo(x, control=DEFAULT)
>    foo(x, control=)
>    foo(x)
> but that seems okay to me.  An advantage to this approach is that
> the user could write potentially useful expressions like
>    foo(x, control=ifelse(x==0, 3, DEFAULT))
> and plotfoo could perhaps test its argument to find out whether
> it was DEFAULT, i.e., not specified by the user.
>
> By the way, another use for the proposed extension is as follows:
>   plotfoo <- function(x, col=, lty=) { lines(x,foo(x),col=col,lty=lty) }
> This is simply a version of
>   plotfoo <- function(x, ...) { lines(x,foo(x), ...) }
> that restricts the caller to certain named parameters, for safety.
>
> I am an R novice and have undoubtedly have missed some considerations
> here, so would be interested in any response from the experts.  Thanks!
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From feldesmanm at pdx.edu  Mon Feb 12 00:51:56 2001
From: feldesmanm at pdx.edu (Marc R. Feldesman)
Date: Sun, 11 Feb 2001 15:51:56 -0800
Subject: [R] library MASS -- polr function
In-Reply-To: <Pine.SOL.3.96.1010212113504.15471C-100000@aitken.scitec.au
 ckland.ac.nz>
Message-ID: <5.0.2.1.2.20010211154921.00ae32d0@127.0.0.1>

What version of R and what platform.  I just pasted your example code 
directly into R (1.2.1/Windows) and it ran without an error.  I get the 
t-values and the Std Errors with no problem.

It does precede the output by noting:

Re-fitting to get Hessian

              Value Std. Error    t value
Sampley -0.2056671  0.8285269 -0.2482322
-1|0    -1.1998700  0.6613101 -1.8143835
0|1      0.3079109  0.6023141  0.5112132

Was there something else you expected to happen?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From paul at stat.auckland.ac.nz  Mon Feb 12 03:07:38 2001
From: paul at stat.auckland.ac.nz (Paul Murrell)
Date: Mon, 12 Feb 2001 15:07:38 +1300
Subject: [R] Rotated mtext
References: <XFMail.20010205085235.s-luppescu@uchicago.edu>
Message-ID: <025b01c09498$92f910b0$175dd882@stat.auckland.ac.nz>

Hi


> >>Works for me (R-1.2.1, NT4.0):
> >>
> >> par(las=1)
> >> plot(1:10)
> >> mtext("A", 4, line=1)
> >
> > This works for me too on Solaris 2.7 (R-1.2.1):
> >
> > par(las=1)
> > plot(1:10)
> > mtext("top", side=3)     # the text is
> > mtext("right", side=4)   # horizontal
> >
> > par(las=2)
> > plot(1:10)
> > mtext("top", side=3)     # the text is
> > mtext("right", side=4)   # perpendicular to the axis
>
> This simple example works for me, too. I think my problem is that I have
some
> other parameters on the line which prevents las or srt from working
correctly.
> Here's the line I'm trying to print:
>
> >   mtext(rev(rownames(mdfname.2))[i], side=4,  outer=T,
> +  at=(((i-1) * 2 + 1) /(2* rowdim)), cex=0.7, las=2, srt=90)
>
> Maybe it's the at that's preventing it from working. Is there a way around
this?


The "problem" is that you have outer=T.   This is a bug in mtext() - it
basically ignores the setting of las.  I'm looking at some fixes to mtext()
and will include a change for this.  In the meantime, you might be able to
use mtext(..., outer=F, line=par("mar")[4], ...) to fake text in the outer
margin.  For example, try ...

plot(1:10)
box("inner", lty="dashed")
mtext(0:7, side=3, line=0:7)

Paul





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jason at cs.rochester.edu  Mon Feb 12 04:24:01 2001
From: jason at cs.rochester.edu (jason@cs.rochester.edu)
Date: Sun, 11 Feb 2001 22:24:01 -0500 (EST)
Subject: [R] splitting up optional args
Message-ID: <200102120324.WAA17610@heart.cs.rochester.edu>

Brian: Thanks for your clear and useful response.  The NULL trick is
essentially how it's done in Common Lisp (with nil instead of NULL).
And the missing() trick is even better because it makes it possible to
write generic functions that treat NULL as they would any other value.

I certainly don't question your experience that

> I have yet to see an example in which these did not suffice, and
> I've been doing this for more than a decade.

So the rest of this note is perhaps academic.  But so are we. :-)

My question is now entirely about elegance, not power.  Doesn't your
answer amount to discouraging people from using the variable=value
default syntax at all?  That syntax is part of R for a reason: it
makes code easier to write, read, and interrogate (via args()) than if
explicit tests for missingness are used.  But if the author of foo()
chooses to use that clean syntax, then she is apparently making it
impossible for outside callers of foo() to inherit its default (except
when "..." suffices).  I don't see what the author of fooplot() can do
in this case, short of modifying the source of foo() every time a new
version comes out.

This seems like an unhealthy tension between modular code and readable
code, so I'm still wondering if it can be resolved.  

My suggestions were about automatic binding of defaults, whereas you
suggest explicit binding.  But your answer makes it clear that my
suggestion is already almost entirely implemented in R!  There is
already a special unevaluable expression (unforceable promise) for a
missing parameter and this can already be passed down the call stack.
So my suggested
   plotfoo <- function(x, foocontrol=) { foo(x, control=foocontrol)}
is in fact equivalent to the existing
   plotfoo <- function(x, foocontrol) { foo(x, control=foocontrol)}
since (to my surprise) it's legal to omit parameters without defaults.

Indeed, the only sticking point is that when a function is called, it
doesn't automatically substitute defaults for all variables with
missing() values, only for those that were not supplied by the actual
call.  This is why, as you say, "you have to use an explicit test for
missingness."

Could this be changed?  It seems to require a mere check for top-level
missingness of actual arguments when binding them to formal arguments
that have defaults.  Nothing needs to be evaluated.  Are there strong
reasons against doing this (speed, compatibility, something else)?

Again, I'm making some guesses about how things work here, by
analogy from other languages, so I may be full of holes.

Thanks again - you evidently spend a great deal of time helping people
on this list!

> Also, missingness is passed down in R but not S, so
> 
> foo <- function(x, control)
> {
>    if(missing(control)) cat("using default control\n")
> }
> plotfoo <- function(x, foocontrol) { foo(x, control=foocontrol)}<
> 
> > plotfoo(1:10)
> using default control
> 
> does work, although you have to use an explicit test for missingness.
> 
> The more common version is
> 
> foo <- function(x, control=NULL)
> {
>    if(is.null(control)) cat("using default control\n")
> }
> plotfoo <- function(x, foocontrol=NULL) { foo(x, control=foocontrol)}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jingxu at students.wisc.edu  Mon Feb 12 04:55:13 2001
From: jingxu at students.wisc.edu (jingxu)
Date: Sun, 11 Feb 2001 21:55:13 -0600
Subject: [R] Where can I download the MASS package
Message-ID: <3A875EA1.A32E5176@students.wisc.edu>

Hi,

I tried to download the MASS package for windows, but I cannot find the
precompiled zip file on the home page. Please tell me how I can download
it. Thanks.

Jing Xu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Ko-Kang at xtra.co.nz  Mon Feb 12 07:14:11 2001
From: Ko-Kang at xtra.co.nz (Ko-Kang@xtra.co.nz)
Date: Mon, 12 Feb 2001 19:14:11 +1300
Subject: [R] Where can I download the MASS package
References: <3A875EA1.A32E5176@students.wisc.edu>
Message-ID: <000801c094bb$05349060$879037d2@KoKang>

Hi Jing,

I believe it is contained in the VR package...if you look in
http://cran.r-project.org/bin/windows/contrib/PACKAGES under VR package:
    Package: VR
    Contains: MASS class nnet spatial
    Version: 6.2-3
    Date: 2000/11/30
    .
    .
    .

Cheers,


Ko-Kang Wang


----- Original Message -----
From: "jingxu" <jingxu at students.wisc.edu>
To: <r-help at lists.R-project.org>
Sent: Monday, February 12, 2001 4:55 PM
Subject: [R] Where can I download the MASS package


> Hi,
>
> I tried to download the MASS package for windows, but I cannot find the
> precompiled zip file on the home page. Please tell me how I can download
> it. Thanks.
>
> Jing Xu
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Feb 12 08:24:54 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 12 Feb 2001 07:24:54 +0000 (GMT)
Subject: [R] Where can I download the MASS package
In-Reply-To: <3A875EA1.A32E5176@students.wisc.edu>
Message-ID: <Pine.GSO.4.31.0102120722100.994-100000@toucan.stats>

On Sun, 11 Feb 2001, jingxu wrote:

> Hi,
>
> I tried to download the MASS package for windows, but I cannot find the
> precompiled zip file on the home page. Please tell me how I can download
> it. Thanks.

Which home page?  MASS is part of the VR baundles, and you can download
the zip file from either the book's home page

http://www.stats.ox.ac.uk/pub/MASS3

or the R for Windows packages' master site

http://www.stats.ox.ac.uk/pub/RWin/VR.zip

or any CRAN mirror under bin/windows/contrib


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kari.ruohonen at rktl.fi  Mon Feb 12 09:25:17 2001
From: kari.ruohonen at rktl.fi (Kari Ruohonen)
Date: Mon, 12 Feb 2001 10:25:17 +0200
Subject: [R] no constant lm adjusted for overall mean
Message-ID: <200102121025.AA1381368040@rktl.fi>

I am analysing mixture experiments with Scheffe polynomials. These don't contain an intercept, which means that usual regression output sums-of-squares are not adjusted for the overall mean. I wonder if there is a way to achieve "overall mean adjusted sums-of-squares" somehow with lm()? I know the alternative is to reparameterise the Scheffe model to contain an intercept but it would be nice to be able to fit the models with Scheffe polynomials directly.

Thanking in advance,

Kari

---------------------------------------------
Kari Ruohonen
Finnish Game and Fisheries Research Institute
Evo Fisheries Research Station
16970 Evo, Finland
t. +358-20-5751430, +358-40-5238312 (mobile)
f. +358-20-5751429
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bitwrit at ozemail.com.au  Mon Feb 12 11:30:33 2001
From: bitwrit at ozemail.com.au (Jim Lemon)
Date: Mon, 12 Feb 2001 21:30:33 +1100
Subject: [R] Packaging
Message-ID: <3A87BB48.DD982AFA@ozemail.com.au>

I'm in the process of porting a set of routines from S to R (the
'asypow' package) and have struck one or two problems that I've been
unable to clear up with the documentation I have.  I may simply need a
pointer to the right docs.  I managed to get the code to run with
minimal changes, but in order to get it to load using library(), had to
run it through:

R CMD build  ...

and then

R INSTALL ...

This allowed the R code to be read - previously I was getting the
"library contains no R code" error message when loading with library()
even though I had set up things as described in "R-exts"..  However, the
shared library was not loading.  I found that the build/INSTALL sequence
had done two things:

1) concatenated all of the R code into one file, which is okay, but kind
of messy for anyone to edit.
2) compiled the FORTRAN source, but renamed the library so that it was
no longer recognized.  When I manually used dyn.load() to load the
library that I had previously compiled, everything seemed to work.

I've gone through what I think are the relevant parts of "R-exts" and
couldn't find a help page for the "build" command to sort out the
compiled library problem.  Any hints?  (Then I can try to write the man
pages - joy! )

Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From orp at intras.es  Mon Feb 12 12:21:50 2001
From: orp at intras.es (Oscar)
Date: Mon, 12 Feb 2001 12:21:50 +0100
Subject: [R] logistic regression with percentages
Message-ID: <002301c094e6$029ff440$0300a8c0@dominioides>

Hello

I've got some data and I want to fit a binomial glm. The problem is that I don't have the number of successes or failures, I have only the percentages. If I want to make all these numbers integers, I have to multiply them for 1000, because there are some low percentages (0.05%). Besides, I don't know if this is correct.
Any help?

Thanks in advance, and sorry for my english

Julio G?mez
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20010212/297a8f4d/attachment.html

From p.dalgaard at pubhealth.ku.dk  Mon Feb 12 13:16:56 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 12 Feb 2001 13:16:56 +0100
Subject: [R] logistic regression with percentages
In-Reply-To: "Oscar"'s message of "Mon, 12 Feb 2001 12:21:50 +0100"
References: <002301c094e6$029ff440$0300a8c0@dominioides>
Message-ID: <x2d7co9juv.fsf@blueberry.kubism.ku.dk>

"Oscar" <orp at intras.es> writes:


> Hello
> 
> I've got some data and I want to fit a binomial glm. The problem is that =
> I don't have the number of successes or failures, I have only the =
> percentages. If I want to make all these numbers integers, I have to =
> multiply them for 1000, because there are some low percentages (0.05%). =
> Besides, I don't know if this is correct.
> Any help?
> 
> Thanks in advance, and sorry for my english
> 
> Julio G=F3mez

If you really only have percentages, then your analysis will come out
wrong whatever you do: It makes a substantial difference whether 50%
means "1 of 2" or "316 of 632"!

If you can get the total number in each group, you should *divide* the
percentages by 100 to get probabilities and use the weight= argument
to glm with the number of cases.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From david.clayton at mrc-bsu.cam.ac.uk  Mon Feb 12 13:27:35 2001
From: david.clayton at mrc-bsu.cam.ac.uk (David Clayton)
Date: Mon, 12 Feb 2001 12:27:35 +0000
Subject: [R] logistic regression with percentages 
In-Reply-To: Message from Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk> 
   of "12 Feb 2001 13:16:56 +0100." <x2d7co9juv.fsf@blueberry.kubism.ku.dk> 
Message-ID: <E14SI4t-0001S7-00@bernstein.mrc-bsu.cam.ac.uk>

Peter is only partly right in his reply below. Certainly glm() will not give 
the right standard errors. However, you could use the gee() software, which 
includes "robust" (information sandwich) standard errors based upon empirical 
variances of residuals (rather than on a binomial assumption). I have my own 
code to calculate  information-sandwich standard errors after fitting a glm, 
but its somewhat untidy.

However, this suggestion will only work is you have a large number of units 
(otherwise there are insufficient df to estimate empirical variance).


> "Oscar" <orp at intras.es> writes:
> 
> 
> > Hello
> > 
> > I've got some data and I want to fit a binomial glm. The problem is that =
> > I don't have the number of successes or failures, I have only the =
> > percentages. If I want to make all these numbers integers, I have to =
> > multiply them for 1000, because there are some low percentages (0.05%). =
> > Besides, I don't know if this is correct.
> > Any help?
> > 
> > Thanks in advance, and sorry for my english
> > 
> > Julio G=F3mez
> 
> If you really only have percentages, then your analysis will come out
> wrong whatever you do: It makes a substantial difference whether 50%
> means "1 of 2" or "316 of 632"!
> 
> If you can get the total number in each group, you should *divide* the
> percentages by 100 to get probabilities and use the weight= argument
> to glm with the number of cases.
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Kurt.Hornik at ci.tuwien.ac.at  Mon Feb 12 13:31:00 2001
From: Kurt.Hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 12 Feb 2001 13:31:00 +0100
Subject: [R] Packaging
In-Reply-To: <3A87BB48.DD982AFA@ozemail.com.au>
References: <3A87BB48.DD982AFA@ozemail.com.au>
Message-ID: <14983.55172.220110.260854@mithrandir.hornik.net>

>>>>> Jim Lemon writes:

> I'm in the process of porting a set of routines from S to R (the
> 'asypow' package) and have struck one or two problems that I've been
> unable to clear up with the documentation I have.  I may simply need a
> pointer to the right docs.  I managed to get the code to run with
> minimal changes, but in order to get it to load using library(), had to
> run it through:

> R CMD build  ...

> and then

> R INSTALL ...

> This allowed the R code to be read - previously I was getting the
> "library contains no R code" error message when loading with library()
> even though I had set up things as described in "R-exts"..  However, the
> shared library was not loading.  I found that the build/INSTALL sequence
> had done two things:

> 1) concatenated all of the R code into one file, which is okay, but
> kind of messy for anyone to edit.

Why would you want to edit that?  Think of the installed version as
``object code'', the thing to edit would be the *sources*, i.e. the
files in PKGDIR/R.

> 2) compiled the FORTRAN source, but renamed the library so that it was
> no longer recognized.  When I manually used dyn.load() to load the
> library that I had previously compiled, everything seemed to work.

> I've gone through what I think are the relevant parts of "R-exts" and
> couldn't find a help page for the "build" command to sort out the
> compiled library problem.  Any hints?  (Then I can try to write the man
> pages - joy! )

I assume that somewhere in your R/S code you have a call to dyn.load or
library.dynam to load the shlib, and that code uses a name different
from the PKGNAME.$ext (where $ext is platform-specific) obtained by the
compilation?  The simplest solution is to put the following into a file
conventionally called zzz.R:

   .First.lib <- function(lib, pkg) library.dynam(PKGNAME, pkg, lib)

where PKGNAME is a character string naming your package.

`Writing R extensions' contains in section `Package subdirectories'

	If necessary, one of these files (historically `zzz.R') should
	use `library.dynam()' _inside_ `.First.lib()' to load compiled
	code.

Maybe this should be improved?

Hope this helps,
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fzoellne at TechFak.Uni-Bielefeld.DE  Mon Feb 12 15:31:22 2001
From: fzoellne at TechFak.Uni-Bielefeld.DE (Frank Gerrit Zoellner)
Date: Mon, 12 Feb 2001 15:31:22 +0100
Subject: [R] RODBC and connection parameters
Message-ID: <20010212153122.A6443@korngold.TechFak.Uni-Bielefeld.DE>

Hi!
   
I'm using the RODBC packages for connecting R and a mysql database.
To do this, i use the function odbcConnect(dsn,uid,pwd).
Is it possible to read the connection paramters from the odbc.ini file within R?
+Especially I'm interested in uid/pwd parameters because of security reasons.   

Thanks
--
Frank Gerrit Zoellner


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From lamkelr at yahoo.com  Mon Feb 12 16:50:47 2001
From: lamkelr at yahoo.com (Kel)
Date: Mon, 12 Feb 2001 07:50:47 -0800 (PST)
Subject: [R] CensorReg
Message-ID: <20010212155047.82117.qmail@web12715.mail.yahoo.com>

Hi Group,

I wonder if R has the function CensorReg which takes
care of left truncation.  I know it's in S.  Thank you
so much!

Kel

__________________________________________________
Do You Yahoo!?
Get personalized email addresses from Yahoo! Mail - only $35 
a year!  http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cyg at sympatico.ca  Mon Feb 12 17:20:22 2001
From: cyg at sympatico.ca (Yves Gauvreau)
Date: Mon, 12 Feb 2001 11:20:22 -0500
Subject: [R] RODBC and connection parameters
In-Reply-To: <20010212153122.A6443@korngold.TechFak.Uni-Bielefeld.DE>
Message-ID: <NEBBJKDJHEFCOOLFFAKKKENLCAAA.cyg@sympatico.ca>




> -----Message d'origine-----
> De : owner-r-help at stat.math.ethz.ch
> [mailto:owner-r-help at stat.math.ethz.ch]De la part de Frank Gerrit
> Zoellner
> Envoye : Monday, February 12, 2001 9:31 AM
> A : r-help at stat.math.ethz.ch
> Objet : [R] RODBC and connection parameters
>
>
> Hi!
>
> I'm using the RODBC packages for connecting R and a mysql database.
> To do this, i use the function odbcConnect(dsn,uid,pwd).
> Is it possible to read the connection paramters from the odbc.ini
> file within R?
> +Especially I'm interested in uid/pwd parameters because of
> security reasons.

No, it's not there at least under NT and I'm sure pwd are **coded** in the
registry somewhere. I think it would be pointless to have secured systems if
anyone can have access to uid and pwd reading some text file. But if you
have proper privilege to the DB you should be able to have a look at uid &
pwd.

I think what you want is more like the following. If you don't supply the
pwd when you make the connection, you will be prompted (under NT) to give
one. Which in turn allows the DBM to take care of security instead of you.

Regards

YG


>
> Thanks
> --
> Frank Gerrit Zoellner
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-help mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Mon Feb 12 17:41:33 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 12 Feb 2001 08:41:33 -0800 (PST)
Subject: [R] CensorReg
In-Reply-To: <20010212155047.82117.qmail@web12715.mail.yahoo.com>
Message-ID: <Pine.A41.4.21.0102120834300.179286-100000@homer06.u.washington.edu>

On Mon, 12 Feb 2001, Kel wrote:

> Hi Group,
> 
> I wonder if R has the function CensorReg which takes
> care of left truncation.  I know it's in S.  Thank you
> so much!

In R the survival analysis functions live in the 'survival5' package.
survreg() is the nearest equivalent to CensorReg. It fits parametric
survival models.  coxph() fits semiparametric proportional hazards models.
They both allow left-truncation. survreg() in addition allows
left-censoring and interval censoring.

	-thomas


PS: CensorReg() is not in S. It's in recent versions of S-PLUS.


Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pflugshaupt at cirsium.ethz.ch  Mon Feb 12 18:02:21 2001
From: pflugshaupt at cirsium.ethz.ch (Kaspar Pflugshaupt)
Date: Mon, 12 Feb 2001 18:02:21 +0100
Subject: [R] CensorReg
In-Reply-To: <20010212155047.82117.qmail@web12715.mail.yahoo.com>
References: <20010212155047.82117.qmail@web12715.mail.yahoo.com>
Message-ID: <01021218022100.00882@Aconitum>

On Monday 12 February 2001 16:50, Kel wrote:
> Hi Group,
>
> I wonder if R has the function CensorReg which takes
> care of left truncation.  I know it's in S.  Thank you
> so much!
>


Not exactly, but there's the function survreg in library survival5, which has 
equivalent functionality (CensorReg is, at least partly, based on it, as the 
S-Plus docs state). You can look at its help text, or the document 

http://www.mayo.edu/hsr/people/therneau/survival.ps

by the author of the survival5 library, Terry Therneau.


Cheers

Kaspar

-- 


Kaspar Pflugshaupt
Geobotanical Institute
ETH Zurich, Switzerland

http://www.geobot.umnw.ethz.ch
mailto:pflugshaupt at geobot.umnw.ethz.ch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ml at lapsley.ukshells.co.uk  Mon Feb 12 07:25:28 2001
From: ml at lapsley.ukshells.co.uk (Michael Lapsley)
Date: Mon, 12 Feb 2001 06:25:28 +0000
Subject: [R] RODBC and connection parameters
In-Reply-To: <20010212153122.A6443@korngold.TechFak.Uni-Bielefeld.DE>; from fzoellne@TechFak.Uni-Bielefeld.DE on Mon, Feb 12, 2001 at 03:31:22PM +0100
References: <20010212153122.A6443@korngold.TechFak.Uni-Bielefeld.DE>
Message-ID: <20010212062527.A1811@athome.lapsley>

AFAIR this is RDBMS (or rather the RDBMS ODBC driver implementation) dependant.
Oracle, for example, does allow the auth in the .ini.

As Yves implies this approach makes more sense in a *nix than
MS environment security-wise.

Michael

On Mon, Feb 12, 2001 at 03:31:22PM +0100, Frank Gerrit Zoellner wrote:
> Hi!
>    
> I'm using the RODBC packages for connecting R and a mysql database.
> To do this, i use the function odbcConnect(dsn,uid,pwd).
> Is it possible to read the connection paramters from the odbc.ini file within R?
> +Especially I'm interested in uid/pwd parameters because of security reasons.   
> 
> Thanks
> --
> Frank Gerrit Zoellner
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From myotis at cix.compulink.co.uk  Mon Feb 12 20:08:00 2001
From: myotis at cix.compulink.co.uk (Graham Smith)
Date: Mon, 12 Feb 2001 19:08 +0000 (GMT)
Subject: [R] Installation
Message-ID: <memo.154028@cix.compulink.co.uk>

I seem to have some problems installing the latest R-Windows. 

How do you know when the installer has completed its actions. On each 
occasion I tried to install, the installer has just stopped, but with 
no message saying "install complete" or something similar.

Although, I have R installed and some it seems to work The graphics 
demo doesn't do anything, though other demos seem to work and help() 
says it cannot find the file.

In the latter instance the zipped Rhelp file seems corrupt and I have 
now downloaded this three times, but on each occasion it has remained 
unopenable.

However, as the installer hasn't actually conformed that the install is 
complete, I am not sure whether I have a faulty install, or whether it 
is something else.

Can anyone give me a hand.

Many thanks,

graham S


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cbieri at med.mcgill.ca  Mon Feb 12 20:14:06 2001
From: cbieri at med.mcgill.ca (Christine Bieri)
Date: Mon, 12 Feb 2001 14:14:06 -0500
Subject: [R] What version to choose...
Message-ID: <4.2.0.58.20010212141127.00a822c0@castle.medcor.mcgill.ca>

Hello,

My statistical group would like to get R up and running.  Right now, we're 
deciding between putting it on a Solaris 2.6 Ultra 10 station or a Win2K 
server Intel box.

 From what I can tell about the package from the on-line documentation, it 
seems that the unix version would be the better one to go with - however, 
it does seem as though it would be better on a Linux box.  As for using it, 
the users have a mixed bunch of Ultra10's and PC's from which they can all 
X-window to the Solaris box or access the NT server.

Which way to you recommend going?

Thank you!

Christine.
============
Systems Administrator
Montreal Genome Center
McGill University Health Center
Livingston Hall L3-401.3
phone: 514-937-6011 ext. 2368
email: cbieri at med.mcgill.ca
fax: 514-934-8353 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dieter.menne at menne-biomed.de  Mon Feb 12 20:31:47 2001
From: dieter.menne at menne-biomed.de (Dieter Menne)
Date: Mon, 12 Feb 2001 20:31:47 +0100
Subject: [R] Minumum descent path between to peaks
Message-ID: <NBBBIJMBGLHMKHGCPFJKOEDGCGAA.dieter.menne@menne-biomed.de>

In a xyz-loess fit to a set of data data, I have two
distinct peaks with a saddle in between, but the
slopes of the two peaks are not colinear.

I have to find the path I would walk to get from one peak
to the other over the saddle to construct a profile for
it.

Can anybody give me a hint? I can start with two line
segments peak-saddle-peak and use optimization,
but what exactly should be minimized for this task?


Dieter Menne


---------------------------------------
Dr. Dieter Menne
Biomed Software
72074 T?bingen
Tel (49) (7071) 52176
FAX (49) (7071) 55 10 46
dieter.menne at menne-biomed.de
www.menne-biomed.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Mon Feb 12 20:56:27 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 12 Feb 2001 20:56:27 +0100
Subject: [R] What version to choose...
In-Reply-To: Christine Bieri's message of "Mon, 12 Feb 2001 14:14:06 -0500"
References: <4.2.0.58.20010212141127.00a822c0@castle.medcor.mcgill.ca>
Message-ID: <x2hf1z65g4.fsf@blueberry.kubism.ku.dk>

Christine Bieri <cbieri at med.mcgill.ca> writes:

> Hello,
> 
> My statistical group would like to get R up and running.  Right now, we're 
> deciding between putting it on a Solaris 2.6 Ultra 10 station or a Win2K 
> server Intel box.
> 
>  From what I can tell about the package from the on-line documentation, it 
> seems that the unix version would be the better one to go with - however, 
> it does seem as though it would be better on a Linux box.  As for using it, 
> the users have a mixed bunch of Ultra10's and PC's from which they can all 
> X-window to the Solaris box or access the NT server.
> 
> Which way to you recommend going?

Depends to some extent on what people plan to use it for. The Windows
version has menus and other GUI elements, but is a pain to develop
extension packages for. Vice versa with Unix plus that it integrates
with all the usual Unix tools. Installing on Solaris is quite easy if
you have the "standard" Open Source utilities (gcc, g77, gmake, perl -
did I forget one?), and Windows is trivial. Why not both?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From david.beede at mail.doc.gov  Mon Feb 12 21:30:10 2001
From: david.beede at mail.doc.gov (david.beede@mail.doc.gov)
Date: Mon, 12 Feb 2001 15:30:10 -0500
Subject: [R] supsmu vs. ppr
Message-ID: <OFF94412BF.227B32F1-ON852569F1.006FD45E@mail.doc.gov>

I used the supersmoother function in the modreg package as follows:

super <- supsmu(ilogemp,award)

Then I decided that I might want additional explanatory variables (other
than ilogemp) in my model.  The ppr function in modreg seemed a logical
extension of supsmu from univariate to multidimensional explanatory
variables.  As a "check" I ran the following:

pprest <- ppr(ilogemp,award,nterms=1),

figuring I'd get the same results.  I did not.  First, the fitted values
ppr output is not rescaled back to the original scale of award.
Eventually, I figured out that the ppr fitted values had mean zero and
variance=1, so I thought I needed to multiply ppr's fitted values by the
standard deviation of award (pprest$ys) and then add in the mean of award
(pprest$yb), but the result is still way off from the fitted values from
supsmu.

Does anyone have any thoughts about this?

Thanks,
David N. Beede
Economist
Office of Policy Development
Economics and Statistics Administration
U.S. Department of Commerce
Room 4858 HCHB
14th Street and Pennsylvania Avenue, N.W.
Washington, DC  20230
Voice:  202.482.1226
Fax:    202.482.0325
e-mail:  david.beede at mail.doc.gov

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fzoellne at techfak.uni-bielefeld.de  Mon Feb 12 21:32:25 2001
From: fzoellne at techfak.uni-bielefeld.de (Frank =?iso-8859-1?Q?Z=F6llner?=)
Date: Mon, 12 Feb 2001 21:32:25 +0100
Subject: [R] RODBC and connection parameters
References: <20010212153122.A6443@korngold.TechFak.Uni-Bielefeld.DE> <20010212062527.A1811@athome.lapsley>
Message-ID: <3A884859.6B2CF1F6@techfak.uni-bielefeld.de>

Michael Lapsley wrote:
> 
> AFAIR this is RDBMS (or rather the RDBMS ODBC driver implementation) dependant.
> Oracle, for example, does allow the auth in the .ini.

Ok, I'm using a mysql db. With the perl DBI Interface for example, auth
is possible. Maybe someone can port this to the RDBMS ODBC driver?



----
Frank Zoellner
http://www.fzoellner.de.vu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Feb 12 21:33:52 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 12 Feb 2001 20:33:52 +0000 (GMT)
Subject: [R] Installation
In-Reply-To: <memo.154028@cix.compulink.co.uk>
Message-ID: <Pine.GSO.4.31.0102122031150.7377-100000@auk.stats>

On Mon, 12 Feb 2001, Graham Smith wrote:

> I seem to have some problems installing the latest R-Windows.
>
> How do you know when the installer has completed its actions. On each
> occasion I tried to install, the installer has just stopped, but with
> no message saying "install complete" or something similar.

It says `installed' if complete.

> Although, I have R installed and some it seems to work The graphics
> demo doesn't do anything, though other demos seem to work and help()
> says it cannot find the file.
>
> In the latter instance the zipped Rhelp file seems corrupt and I have
> now downloaded this three times, but on each occasion it has remained
> unopenable.
>
> However, as the installer hasn't actually conformed that the install is
> complete, I am not sure whether I have a faulty install, or whether it
> is something else.
>
> Can anyone give me a hand.

I have no idea: works for me. Try unzipping manually.
Turn off any virus checking you may have in place (the most likely
culprit).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Mon Feb 12 22:04:18 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 12 Feb 2001 13:04:18 -0800 (PST)
Subject: [R] supsmu vs. ppr
In-Reply-To: <OFF94412BF.227B32F1-ON852569F1.006FD45E@mail.doc.gov>
Message-ID: <Pine.A41.4.21.0102121258180.179286-100000@homer06.u.washington.edu>

On Mon, 12 Feb 2001 david.beede at mail.doc.gov wrote:

> I used the supersmoother function in the modreg package as follows:
> 
> super <- supsmu(ilogemp,award)
> 
> Then I decided that I might want additional explanatory variables (other
> than ilogemp) in my model.  The ppr function in modreg seemed a logical
> extension of supsmu from univariate to multidimensional explanatory
> variables.  As a "check" I ran the following:
> 
> pprest <- ppr(ilogemp,award,nterms=1),
> 
> figuring I'd get the same results.  I did not.  First, the fitted values
> ppr output is not rescaled back to the original scale of award.
> Eventually, I figured out that the ppr fitted values had mean zero and
> variance=1, so I thought I needed to multiply ppr's fitted values by the
> standard deviation of award (pprest$ys) and then add in the mean of award
> (pprest$yb), but the result is still way off from the fitted values from
> supsmu.


I don't get this at all.  I used the rock data in example(ppr)
and did

 plot(perm~area1,data=rock)

 a.ppr<-ppr(perm~area1,data=rock,nterms=1)
 points(area1,fitted(a.ppr),col=2)
 lines(supsmu(rock$perm,rock$area1),col=3)
 b.ppr<-ppr(area1,rock$perm,nterms=1)
 points(area1,fitted(b.ppr),col=4)

The two ppr() sets of fitted values were identical, and the supsmu() line
followed them very closely.  In addition, the variance of the fitted
values is about 44000, not 1, and the mean is 415, not 0.

One difficulty in comparing the fitted values (which is I did it
graphically) is that supsmu() returns its results for the unique x values
sorted in increasing order and ppr() doesn't.


	-thomas


Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From david.beede at mail.doc.gov  Mon Feb 12 23:06:50 2001
From: david.beede at mail.doc.gov (david.beede@mail.doc.gov)
Date: Mon, 12 Feb 2001 17:06:50 -0500
Subject: [R] supsmu vs. ppr
Message-ID: <OF50683B47.1A4BE59D-ON852569F1.00794AAC@mail.doc.gov>


Thanks, Thomas.  I am still new to R, and I didn't know about the -fitted-
function.

One thing to note, however -- if you just do plot(a.ppr) in your example,
the predicted values will be standardized.




Thomas Lumley <tlumley at u.washington.edu> on 02/12/2001 04:04:18 PM

To:   david.beede at mail.doc.gov
cc:   r-help at hypatia.math.ethz.ch

Subject:  Re: [R] supsmu vs. ppr


On Mon, 12 Feb 2001 david.beede at mail.doc.gov wrote:

> I used the supersmoother function in the modreg package as follows:
>
> super <- supsmu(ilogemp,award)
>
> Then I decided that I might want additional explanatory variables (other
> than ilogemp) in my model.  The ppr function in modreg seemed a logical
> extension of supsmu from univariate to multidimensional explanatory
> variables.  As a "check" I ran the following:
>
> pprest <- ppr(ilogemp,award,nterms=1),
>
> figuring I'd get the same results.  I did not.  First, the fitted values
> ppr output is not rescaled back to the original scale of award.
> Eventually, I figured out that the ppr fitted values had mean zero and
> variance=1, so I thought I needed to multiply ppr's fitted values by the
> standard deviation of award (pprest$ys) and then add in the mean of award
> (pprest$yb), but the result is still way off from the fitted values from
> supsmu.


I don't get this at all.  I used the rock data in example(ppr)
and did

 plot(perm~area1,data=rock)

 a.ppr<-ppr(perm~area1,data=rock,nterms=1)
 points(area1,fitted(a.ppr),col=2)
 lines(supsmu(rock$perm,rock$area1),col=3)
 b.ppr<-ppr(area1,rock$perm,nterms=1)
 points(area1,fitted(b.ppr),col=4)

The two ppr() sets of fitted values were identical, and the supsmu() line
followed them very closely.  In addition, the variance of the fitted
values is about 44000, not 1, and the mean is 415, not 0.

One difficulty in comparing the fitted values (which is I did it
graphically) is that supsmu() returns its results for the unique x values
sorted in increasing order and ppr() doesn't.


     -thomas


Thomas Lumley            Asst. Professor, Biostatistics
tlumley at u.washington.edu University of Washington, Seattle





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From myotis at cix.compulink.co.uk  Mon Feb 12 23:59:00 2001
From: myotis at cix.compulink.co.uk (Graham Smith)
Date: Mon, 12 Feb 2001 22:59 +0000 (GMT)
Subject: [R] Installation
Message-ID: <memo.160567@cix.compulink.co.uk>

In-Reply-To: <Pine.GSO.4.31.0102122031150.7377-100000 at auk.stats>

Brian,

Thanks for prompt help.  I'm not sure what is going on, I've now downloaded 
it to two different machines at two different locations  (one NT and one 
WIN98) and I am having the same problems with both. 

Having said that, after re-running the install about five times, I now seem 
to have everything working even though it stalls while installing 
refman.pdf, which in fact has installed.

Virus checker was off during download and installation.

Any way, seems to be working.

Thanks again,

Cheers,

Graham S



> Date: Mon, 12 Feb 2001 20:33:52 +0000 (GMT)
> From: Prof Brian D Ripley <ripley at stats.ox.ac.uk>
> To: Graham Smith <myotis at cix.compulink.co.uk>
> cc: <r-help at stat.math.ethz.ch>
> Subject: Re: [R] Installation
> 
> On Mon, 12 Feb 2001, Graham Smith wrote:
> 
> > I seem to have some problems installing the latest R-Windows.
> >
> > How do you know when the installer has completed its actions. On each
> > occasion I tried to install, the installer has just stopped, but with
> > no message saying "install complete" or something similar.
> 
> It says `installed' if complete.
> 
> > Although, I have R installed and some it seems to work The graphics
> > demo doesn't do anything, though other demos seem to work and help()
> > says it cannot find the file.
> >
> > In the latter instance the zipped Rhelp file seems corrupt and I have
> > now downloaded this three times, but on each occasion it has remained
> > unopenable.
> >
> > However, as the installer hasn't actually conformed that the install is
> > complete, I am not sure whether I have a faulty install, or whether it
> > is something else.
> >
> > Can anyone give me a hand.
> 
> I have no idea: works for me. Try unzipping manually.
> Turn off any virus checking you may have in place (the most likely
> culprit).
>




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From znmeb at aracnet.com  Tue Feb 13 00:44:09 2001
From: znmeb at aracnet.com (M. Edward (Ed) Borasky)
Date: Mon, 12 Feb 2001 15:44:09 -0800 (PST)
Subject: [R] What version to choose...
In-Reply-To: <x2hf1z65g4.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.31.0102121540001.27031-100000@shell1.aracnet.com>

On 12 Feb 2001, Peter Dalgaard BSA wrote:

> Christine Bieri <cbieri at med.mcgill.ca> writes:
>
> > Hello,
> >
> > My statistical group would like to get R up and running.  Right now, we're
> > deciding between putting it on a Solaris 2.6 Ultra 10 station or a Win2K
> > server Intel box.
> >
> Depends to some extent on what people plan to use it for. The Windows
> version has menus and other GUI elements, but is a pain to develop
> extension packages for. Vice versa with Unix plus that it integrates
> with all the usual Unix tools. Installing on Solaris is quite easy if
> you have the "standard" Open Source utilities (gcc, g77, gmake, perl -
> did I forget one?), and Windows is trivial. Why not both?

I am currently using R 1.2.1 on both Windows 2000 Professional and Red Hat
Linux 7.0. I like the Windows 2000 GUI better than the X-Windows/KDE GUI, and
I haven't experienced extension development, so I can't comment there. I would
say "do both", but if you can only support one, pick the Windows version.

--
znmeb at aracnet.com (M. Edward Borasky) http://www.aracnet.com/~znmeb

What phrase will you *never* hear Candice Bergen use?
"My daddy didn't raise no dummies!"

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From henrik at stat.berkeley.edu  Tue Feb 13 01:21:07 2001
From: henrik at stat.berkeley.edu (HENRIK Bengtsson)
Date: Mon, 12 Feb 2001 16:21:07 -0800 (PST)
Subject: [R] How to get xlim & ylim afterwards...
Message-ID: <Pine.SOL.4.31.0102121611080.22052-100000@antares.Berkeley.EDU>

After plotting how can you get the x and y limits of the plot? I would
like to do something like:

  plot(x);
  plot.area <- plot.get.area();
  xlim <- plot.area$xlim;
  ylim <- plot.area$xlim;

Is there a "plot.get.area()" method? I need it to place my legends.

Thank you!

Henrik Bengtsson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Tue Feb 13 01:31:57 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 12 Feb 2001 16:31:57 -0800 (PST)
Subject: [R] How to get xlim & ylim afterwards...
In-Reply-To: <Pine.SOL.4.31.0102121611080.22052-100000@antares.Berkeley.EDU>
Message-ID: <Pine.A41.4.21.0102121630450.133498-100000@homer27.u.washington.edu>

On Mon, 12 Feb 2001, HENRIK Bengtsson wrote:

> After plotting how can you get the x and y limits of the plot? I would
> like to do something like:
> 
>   plot(x);
>   plot.area <- plot.get.area();
>   xlim <- plot.area$xlim;
>   ylim <- plot.area$xlim;
> 
> Is there a "plot.get.area()" method? I need it to place my legends.

par("usr")
returns a vector with the upper and low ylim and upper and lower xlim on
the current device.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jasont at indigoindustrial.co.nz  Wed Feb 14 04:33:35 2001
From: jasont at indigoindustrial.co.nz (Jason Turner)
Date: Wed, 14 Feb 2001 16:33:35 +1300
Subject: [R] silly question about spec
Message-ID: <20010214163335.C2042@camille.indigoindustrial.co.nz>

I'm using spec for multivariate time series, and have a 
question about "coh".  

This is probably a very silly question, but I'm a bit stumped.
>From the documentation: 

Column i + (j - 1) * (j - 2)/2 of coh contains the squared coherency 
between columns i and j of x, where i > j.

What's in column 1 of coh?

Cheers

Jason
-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont at indigoindustrial.co.nz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From e.catchpole at adfa.edu.au  Tue Feb 13 04:51:56 2001
From: e.catchpole at adfa.edu.au (e.catchpole@adfa.edu.au)
Date: Tue, 13 Feb 2001 14:51:56 +1100 (EST)
Subject: [R] xfig boxplot (polygon) bug??
Message-ID: <XFMail.010213145156.e.catchpole@adfa.edu.au>

There appears to be a bug in the R xfig() driver.

When I run a simple example, eg

> data(InsectSprays)
> boxplot(count ~ spray, data = InsectSprays, col = "lightgray")

the boxplot is fine. Doing the same thing after

> xfig(file='test.fig')

and then opening in Xfig (ver3.2 patchlevel 2) on my Linux box produces boxplots
where the boxes, although correctly shaded in, have
lost the vertical line that defines the left edge of the box. That is,
they look like

       |                         |    
       |                         |    
     -----                     -----  
          |                   |     | 
          |    instead of     |     | 
          |                   |     | 
     -----                     -----  
       |                         |    
       |                         |    

This doesn't sound serious, but I'm running the result through pdf
postprocessors (mpost, then ppower4), and the result comes out as
triangles instead of boxes!

A simple workaraound, I expect, would be to define the boxes as
5-point polygons rather than 4-point, to force closure (sorry if I'm
not using the right jargon here).

I tried to get a look at the boxplot code to check this out, but

> boxplot

just produces

function (x, ...) 
UseMethod("boxplot")

Is there any way I can get at the boxplot code? Or is there another
way out of my problem? I'd be very grateful for any help.

I'll post this as a bug if this is confirmed.

Thanks,
Ted.

Dr E.A. (Ted) Catchpole                 
School of Maths & Stats                Honorary Senior Research Fellow
University College, UNSW               Institute of Maths & Stats      
Australian Defence Force Academy       University of Kent at Canterbury
Canberra, ACT 2600, Australia          Canterbury CT2 7NF, England
e-catchpole at adfa.edu.au                E.A.Catchpole at ukc.ac.uk
www.ma.adfa.edu.au/~eac          
fax: +61 2 6268 8886
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Feb 13 08:13:28 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 13 Feb 2001 07:13:28 +0000 (GMT)
Subject: [R] supsmu vs. ppr
In-Reply-To: <OF50683B47.1A4BE59D-ON852569F1.00794AAC@mail.doc.gov>
Message-ID: <Pine.GSO.4.31.0102130710240.9532-100000@auk.stats>

On Mon, 12 Feb 2001 david.beede at mail.doc.gov wrote:

>
> Thanks, Thomas.  I am still new to R, and I didn't know about the -fitted-
> function.
>
> One thing to note, however -- if you just do plot(a.ppr) in your example,
> the predicted values will be standardized.

plot(a.ppr) does *not* plot predicted values, it plots a single term, the
ridge function used.  And that is clearly stated on the help page
for plot.ppr.  Different multiples of the ridge function are used for the
regression of the various components of y, so there is no way this could be
a `prediction'.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Feb 13 08:28:59 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 13 Feb 2001 07:28:59 +0000 (GMT)
Subject: [R] xfig boxplot (polygon) bug??
In-Reply-To: <XFMail.010213145156.e.catchpole@adfa.edu.au>
Message-ID: <Pine.GSO.4.31.0102130718110.9532-100000@auk.stats>

On Tue, 13 Feb 2001 e.catchpole at adfa.edu.au wrote:

> There appears to be a bug in the R xfig() driver.
>
> When I run a simple example, eg
>
> > data(InsectSprays)
> > boxplot(count ~ spray, data = InsectSprays, col = "lightgray")
>
> the boxplot is fine. Doing the same thing after
>
> > xfig(file='test.fig')
>
> and then opening in Xfig (ver3.2 patchlevel 2) on my Linux box produces boxplots
> where the boxes, although correctly shaded in, have
> lost the vertical line that defines the left edge of the box. That is,
> they look like
>
>        |                         |
>        |                         |
>      -----                     -----
>           |                   |     |
>           |    instead of     |     |
>           |                   |     |
>      -----                     -----
>        |                         |
>        |                         |
>
> This doesn't sound serious, but I'm running the result through pdf
> postprocessors (mpost, then ppower4), and the result comes out as
> triangles instead of boxes!

The bug is in the documentation of the drivers: their Polygon function is
documented as

        /* device_Polygon should have the side-effect that a    */
        /* polygon is drawn using the given x and y values      */
 ...

but as I discovered when writing the PDF driver, this actually
means `and closing the path'.   XFig interprets it differently.


> A simple workaraound, I expect, would be to define the boxes as
> 5-point polygons rather than 4-point, to force closure (sorry if I'm
> not using the right jargon here).

Yes.

> I tried to get a look at the boxplot code to check this out, but
>
> > boxplot
>
> just produces
>
> function (x, ...)
> UseMethod("boxplot")
>
> Is there any way I can get at the boxplot code? Or is there another
> way out of my problem? I'd be very grateful for any help.

Look at boxplot.default.  It will not help though, as it is buried in the
driver code.

> I'll post this as a bug if this is confirmed.

Don't trouble yourself: it is already fixed in R-patched and hence will be
in 1.2.2.

>
> Thanks,
> Ted.
>
> Dr E.A. (Ted) Catchpole
> School of Maths & Stats                Honorary Senior Research Fellow
> University College, UNSW               Institute of Maths & Stats
> Australian Defence Force Academy       University of Kent at Canterbury
> Canberra, ACT 2600, Australia          Canterbury CT2 7NF, England
> e-catchpole at adfa.edu.au                E.A.Catchpole at ukc.ac.uk
> www.ma.adfa.edu.au/~eac
> fax: +61 2 6268 8886
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cyg at sympatico.ca  Tue Feb 13 10:07:04 2001
From: cyg at sympatico.ca (Yves Gauvreau)
Date: Tue, 13 Feb 2001 04:07:04 -0500
Subject: [R] xfig boxplot (polygon) bug??
In-Reply-To: <XFMail.010213145156.e.catchpole@adfa.edu.au>
Message-ID: <NEBBJKDJHEFCOOLFFAKKCEOACAAA.cyg@sympatico.ca>

All I can help you with is for the code.

> boxplot.default


Yves Gauvreau
B.E.F.P. Universite du Quebec a Montreal
cyg at sympatico.ca

> -----Message d'origine-----
> De : owner-r-help at stat.math.ethz.ch
> [mailto:owner-r-help at stat.math.ethz.ch]De la part de
> e.catchpole at adfa.edu.au
> Envoye : Monday, February 12, 2001 10:52 PM
> A : r-help at stat.math.ethz.ch
> Objet : [R] xfig boxplot (polygon) bug??
> 
> 
> There appears to be a bug in the R xfig() driver.
> 
> When I run a simple example, eg
> 
> > data(InsectSprays)
> > boxplot(count ~ spray, data = InsectSprays, col = "lightgray")
> 
> the boxplot is fine. Doing the same thing after
> 
> > xfig(file='test.fig')
> 
> and then opening in Xfig (ver3.2 patchlevel 2) on my Linux box 
> produces boxplots
> where the boxes, although correctly shaded in, have
> lost the vertical line that defines the left edge of the box. That is,
> they look like
> 
>        |                         |    
>        |                         |    
>      -----                     -----  
>           |                   |     | 
>           |    instead of     |     | 
>           |                   |     | 
>      -----                     -----  
>        |                         |    
>        |                         |    
> 
> This doesn't sound serious, but I'm running the result through pdf
> postprocessors (mpost, then ppower4), and the result comes out as
> triangles instead of boxes!
> 
> A simple workaraound, I expect, would be to define the boxes as
> 5-point polygons rather than 4-point, to force closure (sorry if I'm
> not using the right jargon here).
> 
> I tried to get a look at the boxplot code to check this out, but
> 
> > boxplot
> 
> just produces
> 
> function (x, ...) 
> UseMethod("boxplot")
> 
> Is there any way I can get at the boxplot code? Or is there another
> way out of my problem? I'd be very grateful for any help.
> 
> I'll post this as a bug if this is confirmed.
> 
> Thanks,
> Ted.
> 
> Dr E.A. (Ted) Catchpole                 
> School of Maths & Stats                Honorary Senior Research Fellow
> University College, UNSW               Institute of Maths & Stats      
> Australian Defence Force Academy       University of Kent at Canterbury
> Canberra, ACT 2600, Australia          Canterbury CT2 7NF, England
> e-catchpole at adfa.edu.au                E.A.Catchpole at ukc.ac.uk
> www.ma.adfa.edu.au/~eac          
> fax: +61 2 6268 8886
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From plummer at iarc.fr  Tue Feb 13 12:20:53 2001
From: plummer at iarc.fr (Martyn Plummer)
Date: Tue, 13 Feb 2001 12:20:53 +0100 (CET)
Subject: [R] silly question about spec
In-Reply-To: <20010214163335.C2042@camille.indigoindustrial.co.nz>
Message-ID: <XFMail.010213122053.plummer@iarc.fr>

On 14-Feb-01 Jason Turner wrote:
> I'm using spec for multivariate time series, and have a 
> question about "coh".  
> 
> This is probably a very silly question, but I'm a bit stumped.
> From the documentation: 
> 
> Column i + (j - 1) * (j - 2)/2 of coh contains the squared coherency 
> between columns i and j of x, where i > j.
> 
> What's in column 1 of coh?

Not a silly question, but a silly typo in the help page.  In fact the
formula is valid for i < j not i > j, so column 1 gives the squared
coherency between columns 1 and 2:

1 + (2 - 1) * (2 - 2)/2 = 1

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From iosu at ucc.ie  Tue Feb 13 18:47:07 2001
From: iosu at ucc.ie (Jesus Maria Frias Celayeta)
Date: Tue, 13 Feb 2001 17:47:07 +0000
Subject: [R] Pareto Chart in R
Message-ID: <3A89731B.6E169380@ucc.ie>

Hi over there:
	I would like to know if there is a function to plot a Pareto chart of the
standardised effects of an aov() object, or an alternative to it.

my best regards,

IOsu

-- 

Jesus Maria Frias Celayeta, PhD.
Process Engineering Department
University College Cork,Cork
Ireland
phone: 353-21-903096
fax:   353-21-270249
http://www.ucc.ie/acad/departments/processeng/staff/friasj.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Don.Wingate at intellichem.com  Tue Feb 13 21:36:02 2001
From: Don.Wingate at intellichem.com (=?utf-8?B?RG9uIFdpbmdhdGU=?=)
Date: Tue, 13 Feb 2001 12:36:02 -0800
Subject: [R] =?utf-8?B?UkU6IFtSXSBQYXJldG8gQ2hhcnQgaW4gUg==?=
Message-ID: <ABB64B4C48ECD44CADC72FA840118B3B4FF6@athena.Bend.IntelliChem.com>

Try This:

############################################################################
#######################
# 
# pareto. Produces a Pareto plot of effects.
#
# Parameters:
#	effects	-	vector or matrix of effects to plot.
#	names		-	vector of names to label the effects.
# 	xlab		-	String to display as the x axis label.
# 	ylab		-	String to display as the y axis label.
#	perlab	-	Label for the cumulative percentage label.
#	heading	-	Vector of names for plot heading.
#
pareto <- function(effects, names=NULL, xlab=NULL, ylab="Magnitude of
Effect", indicate.percent=TRUE, 
				perlab="Cumulative Percentage",
heading=NULL)
{
	# set up graphics parameters, note: set las=2 for perpendicular
axis.
	oldpar <- par( mar=c(6, 4, 2, 4) + 0.1 , las=3)
	on.exit(par(oldpar))
	
	if( ! is.matrix(effects)) effects<-as.matrix( effects )
	
	for( i in 1:ncol(effects) )
	{
	
		if( i==2 ) oldpar$ask<-par(ask=TRUE)$ask
		# draw bar plot
		eff.ord <- rev(order(abs(effects[,i])))
		ef <- abs(effects[eff.ord,i])
		# plot barplot
		ylimit<-max(ef) + max(ef)*0.19
		ylimit<-c(0,ylimit)
		par( mar=c(6, 4, 2, 4) + 0.1 , las=3)
		x<-barplot(ef, names.arg=names[eff.ord], ylim=ylimit,
xlab=xlab, ylab=ylab, main=heading[i])

		if( indicate.percent == TRUE ){
			# get cumulative sum of effects
			sumeff <- cumsum(ef)
			m<-max(ef)
			sm<-sum(ef)
			sumeff <- m * sumeff/sm	

			# draws curve.
			lines(x, sumeff, lty="solid", lwd=2, col="purple")
			# draw 80% line
			lines( c(0,max(x)), rep(0.8*m,2) )
			# draw axis labling percentage.
			at <- c(0:5)* m/5
			axis(4, at=at,
labels=c("0","20","40","60","80","100"), pos=max(x)+.6)
			# add axis lables
			par(las=0)
			mtext(perlab, 4, line=2)		
		}
		
	} # end for each col 
}

Don Wingate

-----Original Message-----
From: owner-r-help at stat.math.ethz.ch
[mailto:owner-r-help at stat.math.ethz.ch]On Behalf Of Jesus Maria Frias
Celayeta
Sent: Tuesday, February 13, 2001 9:47 AM
To: R-help list
Subject: [R] Pareto Chart in R


Hi over there:
	I would like to know if there is a function to plot a Pareto chart
of the
standardised effects of an aov() object, or an alternative to it.

my best regards,

IOsu

-- 

Jesus Maria Frias Celayeta, PhD.
Process Engineering Department
University College Cork,Cork
Ireland
phone: 353-21-903096
fax:   353-21-270249
http://www.ucc.ie/acad/departments/processeng/staff/friasj.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From yuling5 at yahoo.com  Tue Feb 13 21:53:35 2001
From: yuling5 at yahoo.com (Yu-Ling Wu)
Date: Tue, 13 Feb 2001 12:53:35 -0800 (PST)
Subject: [R] pass a string to a function
Message-ID: <20010213205335.64936.qmail@web11508.mail.yahoo.com>

Hi,

I'd like to pass a string to a function as the value
of the argument.
Here is my code. However, it doesn't work. Please help
me with this.

Thanks,
Yu-Ling Wu
-----------------------------------------------------
library(RODBC)
odbcConnect("console") -> myConnect

fun1 <- function(dd1) {
h3 <- sqlQuery(myConnect, "select * from console where
byday = 'dd1'group by by hour")
}

fun1('010122')
print(summary(h3)

__________________________________________________
Do You Yahoo!?
Get personalized email addresses from Yahoo! Mail - only $35 
a year!  http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Tue Feb 13 22:14:05 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 13 Feb 2001 22:14:05 +0100
Subject: [R] pass a string to a function
In-Reply-To: Yu-Ling Wu's message of "Tue, 13 Feb 2001 12:53:35 -0800 (PST)"
References: <20010213205335.64936.qmail@web11508.mail.yahoo.com>
Message-ID: <x2hf1ymgki.fsf@blueberry.kubism.ku.dk>

Yu-Ling Wu <yuling5 at yahoo.com> writes:

> Hi,
> 
> I'd like to pass a string to a function as the value
> of the argument.
> Here is my code. However, it doesn't work. Please help
> me with this.
> 
> Thanks,
> Yu-Ling Wu
> -----------------------------------------------------
> library(RODBC)
> odbcConnect("console") -> myConnect
> 
> fun1 <- function(dd1) {
> h3 <- sqlQuery(myConnect, "select * from console where
> byday = 'dd1'group by by hour")
> }
> 
> fun1('010122')
> print(summary(h3)

Passing the string is not your problem. Getting it into the middle of
the select string is. Try something like.

paste("select * from console where byday =", dd1, "group by hour") 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From yuling5 at yahoo.com  Tue Feb 13 22:46:33 2001
From: yuling5 at yahoo.com (Yu-Ling Wu)
Date: Tue, 13 Feb 2001 13:46:33 -0800 (PST)
Subject: [R] handle date variables
In-Reply-To: <6r66ie9tp2.fsf@franz.stat.wisc.edu>
Message-ID: <20010213214633.29609.qmail@web11501.mail.yahoo.com>

Thanks! This is helpful.

Three more questions. 
1. How to convert a string into a numeric value. For
example, convert '20010122' to 20010122.

2. How to convert a string into a date value. For
example, convert 20010122
to 2001 Jan 22, and get its day of the week, i.e.
Monday?

3. How to handle date variables in a loop? How to make
the following codes work? And how users should pass
the date arguments to the function?

fun1 <- function(firstdate, lastdate) {
      for ( i in firstdate:lastdate) {
         do something....
      }
}

fun1(2001/01/22, 2001/01/27)


--- Douglas Bates <bates at stat.wisc.edu> wrote:
> Yu-Ling Wu <yuling5 at yahoo.com> writes:
> 
> > I'd like to pass a string to a function as the
> value
> > of the argument.
> > Here is my code. However, it doesn't work. Please
> help
> > me with this.
> > 
> > Thanks,
> > Yu-Ling Wu
> >
>
-----------------------------------------------------
> > library(RODBC)
> > odbcConnect("console") -> myConnect
> > 
> > fun1 <- function(dd1) {
> > h3 <- sqlQuery(myConnect, "select * from console
> where
> > byday = 'dd1'group by by hour")
> > }
> 
> Use paste to construct a string from multiple input
> strings.
> 
> sqlQuery(myConnect,
>          paste("select * from console where byday
> =",
>                dd1, "group by hour"))


__________________________________________________
Do You Yahoo!?
Get personalized email addresses from Yahoo! Mail - only $35 
a year!  http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jdb at young39.wi.mit.edu  Tue Feb 13 23:28:31 2001
From: jdb at young39.wi.mit.edu (John D. Barnett)
Date: Tue, 13 Feb 2001 17:28:31 -0500 (EST)
Subject: [R] embedding R?
In-Reply-To: <Pine.OSF.4.30.0102111230130.25836-100000@alpha0.bioch.virginia.edu>
Message-ID: <Pine.LNX.4.21.0102131651220.4843-100000@young39.wi.mit.edu>

On Sun, 11 Feb 2001, Aaron J Mackey wrote:

> ...  What about a program that
> dynamically loads R itself ...

Aaron-

I've been interested in this topic for a while, too, but haven't done much
with it yet.  I saw some of the replies, pointing to omegahat, the
directions for embedding R.

Another shortcut to perl <-> R interactivity is to use the Expect perl
module (I think expect was originally in tcl), which is basically a fancy
bi-directional pipe.  You're still faced with using perl to prepare R
input, and parse R output, but you can do so one call at a time.  Also,
expect just waits until it sees the next prompt or times out (though the
time-out can be disabled).  I tried to automatically convert R output into
perl data structures; this can be messy.

I'm interested in web application development that utilizes R.  Duncan
Temple Lang's RSPerl package, embedding perl in R, lets you access great
perl modules, like CGI.pm; a hack to R lets it handle scripts like

#!/usr/local/R-1.2.0/lib/R/bin/R.bin --source 
invisible(library(RSPerl));
foo <- .PerlExpr("use CGI;");
foo <- .PerlExpr("$q = new CGI; 1;");
a <- .PerlExpr("$q->param('a')");
cat(.PerlExpr("$q->header . $q->start_html . 'Hellooooo....';"),
    a,
    .PerlExpr("$q->end_html"));


Anyway, that's about all I did with it.  (OK, maybe that's exactly what
I did; proof of concept and no more.)  It has R functions for accessing
perl data structures, which might serve as a useful template for the
reverse process-- having perl functions to access R data structures, for R
embedded in perl.  I'm a little fuzzy on what the appropriate mapping is
for different data types.

A random aside-- there's a package for perl, PDL (perl data language),
that stores data in C arrays, and has optimized code for
computation.  This also provides methods for converting perl arrays to
and from pdl structures, as well as fast I/O routines for pdl
structures.  The icing on the perl-with-embedded-R cake would be
conversion methods directly between R arrays and pdl arrays.

I'm interested if you decide to pursue this further.

-John Barnett

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andrew.hoey1 at jcu.edu.au  Tue Feb 13 23:18:54 2001
From: andrew.hoey1 at jcu.edu.au (Andrew Hoey)
Date: Wed, 14 Feb 2001 09:18:54 +1100
Subject: [R] bootstrapping
Message-ID: <3.0.6.32.20010214091854.0079fc10@pop.jcu.edu.au>

Dear All,	
	I have a quick question about the bootstrap package for R and was hoping
that someone could help me. I have used the package previously and found it
extremely useful. I was wondering if the package has an option for
designating the number of samples that are taken from the source
distribution/array. For example, if I have a data set containing 100 values
is it possible for the bootstrap package to generate confidence limits for
5 values drawn at random from the original distribution of 100 values, with
say 200 bootstrap replications? If so, could someone please let me know how
to specify the number of random values sampled for each bootstrap
replicate. Any help with this matter would be greatly appreciated. 

Thank you for your time.
Andrew Hoey

***************************************************************************
Andrew Hoey
Department of Marine Biology
James Cook University			
Townsville, Q 4811				   
Australia				

Ph:	(61)(7) 4781 5729
Fax:  	(61)(7) 4725 1570
***************************************************************************
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From yuling5 at yahoo.com  Wed Feb 14 00:27:22 2001
From: yuling5 at yahoo.com (Yu-Ling Wu)
Date: Tue, 13 Feb 2001 15:27:22 -0800 (PST)
Subject: [R] run R under DOS prompt
Message-ID: <20010213232722.79625.qmail@web11508.mail.yahoo.com>

Hi,

I have a xxx.R file. In order to run this file, I have
to go to R, and type -- source("xxx.R").

Two questions:
1. How to run file xxx.R under DOS prompt instead of
entering R environment?
2. There are several functions in file xxx.R, how to
pass the arguments
to the function when I try to run this file via
source() function (or under DOS mode)?

Thanks,
Yu-Ling Wu

__________________________________________________
Do You Yahoo!?
Get personalized email addresses from Yahoo! Mail - only $35 
a year!  http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pjohnsto at mail.newcastle.edu.au  Wed Feb 14 00:59:46 2001
From: pjohnsto at mail.newcastle.edu.au (Pat Johnston)
Date: Wed, 14 Feb 2001 10:59:46 +1100
Subject: [R] bandpass filters in R
Message-ID: <3A89CA72.6AF03DD9@mail.newcastle.edu.au>



Hi,

does anybody have any ideas regarding the easiest and most efficient way
of implementing a bandpass filter in R ?
any help would be truly appreciated.

cheers,

Pat Johnston

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dmurdoch at pair.com  Wed Feb 14 02:18:25 2001
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Wed, 14 Feb 2001 01:18:25 GMT
Subject: [R] run R under DOS prompt
In-Reply-To: <20010213232722.79625.qmail@web11508.mail.yahoo.com>
References: <20010213232722.79625.qmail@web11508.mail.yahoo.com>
Message-ID: <3a8ddc04.115379041@smtp1.sympatico.ca>

On Tue, 13 Feb 2001 15:27:22 -0800 (PST), you wrote:

>Hi,
>
>I have a xxx.R file. In order to run this file, I have
>to go to R, and type -- source("xxx.R").
>
>Two questions:
>1. How to run file xxx.R under DOS prompt instead of
>entering R environment?

Try 

 Rterm --slave <xxx.R

Look in the R-intro manual for options other than --slave that you
might want to use.

>2. There are several functions in file xxx.R, how to
>pass the arguments
>to the function when I try to run this file via
>source() function (or under DOS mode)?

You can't, but you can add extra lines to the file with calls
containing the arguments.  For example, you might have

 myfunc <- function(x)
 { 
	print(x)
 }

in xxx.R.  If you want to call myfunc(34), then first source the file,
then execute myfunc(34).  If doing it in batch mode, copy the file to
a temp file, add the line "myfunc(34)" to the end, and execute the
temp file.

Duncan Murdoch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ewilliams at ucsd.edu  Tue Feb 13 22:22:15 2001
From: ewilliams at ucsd.edu (Elliot Williams)
Date: Tue, 13 Feb 2001 16:22:15 -0500
Subject: [R] Which.min bug?
Message-ID: <01021316200200.06978@ewilliam.ucsd.edu>

Hi,

I'm not sure this is a bug, so I thought I'd bounce it off the help group 
first.  

I had a dataset which I was subsetting, and occasionally I get an empty 
subset.  If I don't check for emptiness and go straight to a which.min call 
on the subset, the program gets a big negative number back.

One-line Example:
  
> which.max(NULL)
[1] -2147483647

This caused an indexing error which was hard(ish) to track down.  Should it 
just return NA or throw an error?  Should I re-submit to r-bugs?  Or is there 
some deep reason for this behavior that I don't understand?

Thanks.
			Elliot.
  
-- 
Elliot Williams (ewilliams at ucsd.edu)
Economics Department, UC San Diego

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dpowers at mail.la.utexas.edu  Wed Feb 14 06:48:03 2001
From: dpowers at mail.la.utexas.edu (Daniel A. Powers)
Date: Tue, 13 Feb 2001 23:48:03 -0600 (CST)
Subject: [R] agreg() function
Message-ID: <Pine.GSO.4.05.10102132345580.27892-100000@dahlia.la.utexas.edu>

R-Users --

Is there an R version of the S function agreg() used to split episode
data? 

Thanks,
Dan

=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Dan Powers
Associate Professor, Sociology  
University of Texas at Austin                    


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Feb 14 08:18:41 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 14 Feb 2001 07:18:41 +0000 (GMT)
Subject: [R] run R under DOS prompt
In-Reply-To: <20010213232722.79625.qmail@web11508.mail.yahoo.com>
Message-ID: <Pine.GSO.4.31.0102140716580.13930-100000@auk.stats>

On Tue, 13 Feb 2001, Yu-Ling Wu wrote:

> Hi,
>
> I have a xxx.R file. In order to run this file, I have
> to go to R, and type -- source("xxx.R").
>
> Two questions:
> 1. How to run file xxx.R under DOS prompt instead of
> entering R environment?

If you mean the Windows command line when running R under Windows,
see the README: there is a program Rterm.exe.  There is no version of R
that runs under DOS.

> 2. There are several functions in file xxx.R, how to
> pass the arguments
> to the function when I try to run this file via
> source() function (or under DOS mode)?

You call the functions with arguments in the file.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Feb 14 08:32:21 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 14 Feb 2001 07:32:21 +0000 (GMT)
Subject: [R] agreg() function
In-Reply-To: <Pine.GSO.4.05.10102132345580.27892-100000@dahlia.la.utexas.edu>
Message-ID: <Pine.GSO.4.31.0102140730010.13930-100000@auk.stats>

On Tue, 13 Feb 2001, Daniel A. Powers wrote:

> Is there an R version of the S function agreg() used to split episode
> data?

The function agreg() in my versions of S-PLUS is an `Extension of the Cox
regression model to multiple events' and has been superseded by the
functions in survival5, specifically coxph.  Survival5 is available for R
on CRAN.

This does not seem to match what you are looking of, though.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From christian.hoffmann at wsl.ch  Wed Feb 14 11:09:36 2001
From: christian.hoffmann at wsl.ch (Christian Hoffmann)
Date: Wed, 14 Feb 2001 11:09:36 +0100
Subject: [R] assignment function
Message-ID: <3.0.6.32.20010214110936.00929b30@mail.wsl.ch>

Hi,

I am trying to create the assignment function:
"substring<-" <- function(text, first, last=100000, sub) {
  if(is.character(first)) {
   if(!missing(last)) stop('wrong # arguments')
   return(sedit(text, first, sub))  
 }

  lf <- length(first)

  if(length(text)==1 && lf > 1) {
  	if(missing(last)) last <- nchar(text)
  	last <- rep(last, length=lf)
  	for(i in 1:lf) {
  	  text <- paste(if(first[i]>1) 
              substring(text, 1, first[i]-1), sub,
        	    substring(text, last[i]+1), sep='')
	    if(i < lf) {
	      j <- (i+1):lf
	      w <- nchar(sub) - (last[i]-first[i]+1)
	      first[j] <- first[j] + w  
	      last[j] <- last[j] +  w
	    }
   	}
  	return(text)
  }
  res <- paste(ifelse(first>1,substring(text, 1, first-1),''), sub,
              substring(text, last+1), sep='')
  res
}

Checking
> x <- 'this string'
> substring(x, 3, 4) <- 'IS'

will not result in
> x [1] "thIS string"

but will cry
Error in substr<-(*tmp*, 3, 4, value = "IS") : 
	unused argument(s) (value ...)

A cat(is.character(first),"\n") after the first line will not even be
executed.


Thanks for help.
--christian

Dr.sc.math.Christian W. Hoffmann
Mathematics and Statistical Computing
Landscape Modeling and Web Applications
Swiss Federal Research Institute WSL 
Zuercherstrasse 111
CH-8903 Birmensdorf, Switzerland
phone: ++41-1-739 22 77    fax: ++41-1-739 22 15
e-mail: Hoffmann at WSL.CH
www: http://www.wsl.ch/staff/christian.hoffmann/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Wed Feb 14 11:28:06 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 14 Feb 2001 11:28:06 +0100
Subject: [R] assignment function
In-Reply-To: Christian Hoffmann's message of "Wed, 14 Feb 2001 11:09:36 +0100"
References: <3.0.6.32.20010214110936.00929b30@mail.wsl.ch>
Message-ID: <x28zn9k18p.fsf@blueberry.kubism.ku.dk>

Christian Hoffmann <christian.hoffmann at wsl.ch> writes:

> Hi,
> 
> I am trying to create the assignment function:
> "substring<-" <- function(text, first, last=100000, sub) {
....
> Checking
> > x <- 'this string'
> > substring(x, 3, 4) <- 'IS'
> 
> will not result in
> > x [1] "thIS string"
> 
> but will cry
> Error in substr<-(*tmp*, 3, 4, value = "IS") : 
> 	unused argument(s) (value ...)
> 
> A cat(is.character(first),"\n") after the first line will not even be
> executed.

For reasons that I have forgotten, the value of an assignment function
is always passed using an argument called "value", so try changing
"sub" to "value".

(I haven't *completely* forgotten the reason. It is something with
assignment functions like "[<-.data.frame" taking a variable number of
arguments.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Feb 14 11:31:05 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 14 Feb 2001 10:31:05 +0000 (GMT)
Subject: [R] assignment function
Message-ID: <200102141031.KAA11144@toucan.stats.ox.ac.uk>

The last argument of any assignment function has to be named `value'.
This is different from S, and is in the FAQ, section 3.3.3.


> Date: Wed, 14 Feb 2001 11:09:36 +0100
> To: R Help list <r-help at stat.math.ethz.ch>
> From: Christian Hoffmann <christian.hoffmann at wsl.ch>
> Subject: [R] assignment function
> 
> Hi,
> 
> I am trying to create the assignment function:
> "substring<-" <- function(text, first, last=100000, sub) {
>   if(is.character(first)) {
>    if(!missing(last)) stop('wrong # arguments')
>    return(sedit(text, first, sub))  
>  }
> 
>   lf <- length(first)
> 
>   if(length(text)==1 && lf > 1) {
>   	if(missing(last)) last <- nchar(text)
>   	last <- rep(last, length=lf)
>   	for(i in 1:lf) {
>   	  text <- paste(if(first[i]>1) 
>               substring(text, 1, first[i]-1), sub,
>         	    substring(text, last[i]+1), sep='')
> 	    if(i < lf) {
> 	      j <- (i+1):lf
> 	      w <- nchar(sub) - (last[i]-first[i]+1)
> 	      first[j] <- first[j] + w  
> 	      last[j] <- last[j] +  w
> 	    }
>    	}
>   	return(text)
>   }
>   res <- paste(ifelse(first>1,substring(text, 1, first-1),''), sub,
>               substring(text, last+1), sep='')
>   res
> }
> 
> Checking
> > x <- 'this string'
> > substring(x, 3, 4) <- 'IS'
> 
> will not result in
> > x [1] "thIS string"
> 
> but will cry
> Error in substr<-(*tmp*, 3, 4, value = "IS") : 
> 	unused argument(s) (value ...)
> 
> A cat(is.character(first),"\n") after the first line will not even be
> executed.
> 
> 
> Thanks for help.
> --christian
> 
> Dr.sc.math.Christian W. Hoffmann
> Mathematics and Statistical Computing
> Landscape Modeling and Web Applications
> Swiss Federal Research Institute WSL 
> Zuercherstrasse 111
> CH-8903 Birmensdorf, Switzerland
> phone: ++41-1-739 22 77    fax: ++41-1-739 22 15
> e-mail: Hoffmann at WSL.CH
> www: http://www.wsl.ch/staff/christian.hoffmann/
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> 
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wsi at gcal.ac.uk  Wed Feb 14 11:33:46 2001
From: wsi at gcal.ac.uk (Bill Simpson)
Date: Wed, 14 Feb 2001 10:33:46 +0000 (GMT)
Subject: [R] bandpass filters in R
In-Reply-To: <3A89CA72.6AF03DD9@mail.newcastle.edu.au>
Message-ID: <Pine.LNX.4.10.10102141018080.2915-100000@localhost.localdomain>

> does anybody have any ideas regarding the easiest and most efficient way
> of implementing a bandpass filter in R ?
> any help would be truly appreciated.

Here is an example using lowpass filter.
 x<-seq(1,500)
 h<-dnorm(c(1:100), mean=50, sd=10)  #this is your lowpass filter 
 y<-ifelse(x<=250, 0, 1)
 plot(convolve(y,h, type="open")[101:500],type='l')   #100= filter length
abline(v=250-50)   # location of original step in the output
points(pnorm(c(1:400),mean=250-50,sd=10))

NOTE: if your filter is not symmetrical you need:
 plot(convolve(y,rev(h), type="open")[101:500],type='l')

You can consult some books to find a good bandpass filter. One simple idea
is to use a Gabor function, which is a Gaussian multiplied by a sinewave.
By varying the sd of the Gaussian you vary the bandwidth. The filter is
centred on whatever freq you use in your sinewave.
h<-dnorm((1:100), mean=50, sd=10)*cos(2*pi*5*(1:100)/100)
                                           ^
                                         freq
(In freq domain this filter is a Gaussian centred on freq)

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From christian.hoffmann at wsl.ch  Wed Feb 14 14:30:07 2001
From: christian.hoffmann at wsl.ch (Christian Hoffmann)
Date: Wed, 14 Feb 2001 14:30:07 +0100
Subject: No subject
Message-ID: <3.0.6.32.20010214143007.00920510@mail.wsl.ch>

Thanks for the tip to p.dalgaard and Prof Brian Ripley:

For reasons that I have forgotten, the value of an assignment function
is always passed using an argument called "value", so try changing
"sub" to "value".

The last argument of any assignment function has to be named `value'.
This is different from S, and is in the FAQ, section 3.3.3:

"In R, the last argument (which corresponds to the right hand side) of an
      assignment function must be named value. E.g., fun(a) <- b is
evaluated as
      (fun<-)(a, value = b)." 

The original question was

> I am trying to create the assignment function:
> "substring<-" <- function(text, first, last=100000, sub) {
[clip]
> Error in substr<-(*tmp*, 3, 4, value = "IS") : 
> 	unused argument(s) (value ...)

 
Question:
=======

Is there a reference to the obseravation, that in R, missing parameters of
a function can be "declared" using NULL, as in

xxx <- function (x, miss=NULL) {
  otherfunction <- function (x, missOther=NULL) { .. }
  otherfunction(x, miss)
}

The solution of R is preferable to S+3.4's, since it allows functions
within functions to have missing parameters without the (ugly) construct:

xxx <- function (x, miss) {
  otherfunction <- function (x, miss) { .. }
if (missing(miss)) otherfunction(x)
else otherfunction(x, miss)
}

Thanks again for your help
-christian
Dr.sc.math.Christian W. Hoffmann
Mathematics and Statistical Computing
Landscape Modeling and Web Applications
Swiss Federal Research Institute WSL 
Zuercherstrasse 111
CH-8903 Birmensdorf, Switzerland
phone: ++41-1-739 22 77    fax: ++41-1-739 22 15
e-mail: Hoffmann at WSL.CH
www: http://www.wsl.ch/staff/christian.hoffmann/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From znmeb at aracnet.com  Wed Feb 14 15:53:22 2001
From: znmeb at aracnet.com (M. Edward Borasky)
Date: Wed, 14 Feb 2001 06:53:22 -0800
Subject: [R] Good books for learning R?
In-Reply-To: <Pine.LNX.4.10.10102141018080.2915-100000@localhost.localdomain>
Message-ID: <HBEHIIBBKKNOBLMPKCBBGEKNDCAA.znmeb@aracnet.com>

I'm looking for some good books to help me get up to speed on R. I've
ordered "Modern Applied Statistics with S-Plus (Statistics and Computing)"
as a start, but I'm wondering if there are any others I should look at. I've
got all the documentation that comes with R, but I still am spending a lot
of time "figuring out" how to do simple things like getting confidence
limits for a mean, even with the search capability in the R on-line help.

--
Ed Borasky
http://www.aracnet.com/~znmeb
mailto:znmeb at aracnet.com

Q: What phrase will you never hear Candice Bergen use?
A: "My daddy didn't raise no dummies".

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fzoellne at TechFak.Uni-Bielefeld.DE  Wed Feb 14 16:54:30 2001
From: fzoellne at TechFak.Uni-Bielefeld.DE (Frank Gerrit Zoellner)
Date: Wed, 14 Feb 2001 16:54:30 +0100
Subject: [R] help with tcltk
Message-ID: <20010214165430.A10991@korngold.TechFak.Uni-Bielefeld.DE>

Hallo!

Can anyone explain to me how to add a vert. scrollbar to a listbox using tcltk please?

Thanks
-- 
Frank Gerrit Zoellner


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From baron at cattell.psych.upenn.edu  Wed Feb 14 17:08:01 2001
From: baron at cattell.psych.upenn.edu (Jonathan Baron)
Date: Wed, 14 Feb 2001 11:08:01 -0500 (EST)
Subject: [R] Good books for learning R?
Message-ID: <200102141608.LAA11506@cattell.psych.upenn.edu>

http://www.insightful.com/resources/doc/default.html
Splus guides - quite useful, I think, for general
approaches especially (free downloads)

http://www.insightful.com/resources/biblio.html
list of Splus books - too many!

http://hesweb1.med.virginia.edu/biostat/s/doc/splus.pdf
guide to Splus for SAS users (or anyone, really)

and the other documents in CRAN contributed documents

Jon


Jonathan Baron, Professor of Psychology, University of Pennsylvania
Home page: http://www.sas.upenn.edu/~jbaron
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From york at noaa.gov  Wed Feb 14 18:19:30 2001
From: york at noaa.gov (Anne York)
Date: Wed, 14 Feb 2001 09:19:30 -0800 (PST)
Subject: [R] .Renviron files win windows
Message-ID: <Pine.GSO.4.05.10102140913380.28290-100000@ofis450a.akctr.noaa.gov>

Are there any templates for .Renviron files. My installation of R did not
have one and I am curious about how other users make use of it. It is
mentioned in Appendix B.2 of the manual. 

Thanks,
Anne York

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Anne E. York
National Marine Mammal Laboratory
Seattle WA 98115-0070  USA
e-mail: anne.york at noaa.gov
Voice: +1 206-526-4039
Fax: +1 206-526-6615
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tov at ece.cmu.edu  Wed Feb 14 18:33:43 2001
From: tov at ece.cmu.edu (Thomas Vogels)
Date: 14 Feb 2001 12:33:43 -0500
Subject: [R] help with tcltk
In-Reply-To: Frank Gerrit Zoellner's message of "Wed, 14 Feb 2001 16:54:30 +0100"
References: <20010214165430.A10991@korngold.TechFak.Uni-Bielefeld.DE>
Message-ID: <pxn1bptbig.fsf@infiniti.ece.cmu.edu>

Frank Gerrit Zoellner <fzoellne at TechFak.Uni-Bielefeld.DE> writes:

> Hallo!
> 
> Can anyone explain to me how to add a vert. scrollbar to a listbox using tcltk please?

By add, to you mean link them so that the scrollbar, well, scrolls the
listbox?  The following works for me (patterned after demo(tkfaq)):

local({
        require(tcltk)
        tt <- tktoplevel()
        tkwm.title(tt,"Data sets in package 'base'")
        tlb <- tklistbox(tt,yscrollcommand=function(...)tkset(tscr,...),
                                width=40,height=10)
        tscr <- tkscrollbar(tt,orient="vert",
                                command=function(...)tkyview(tlb,...))
        tkpack(tscr,side="right",fill="y")
        tkpack(tlb,side="right",fill="both",expand=1)

        INDEX <- file.path (.Library, "base", "data", "00Index")
        for (jj in gsub ("\t.*$", "", readLines (INDEX, n=-1)))
                if (jj != "") tkinsert (tlb, "end", jj)
})

Enjoy,
  -tom

-- 
mailto:tov at ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Wed Feb 14 18:43:37 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 14 Feb 2001 18:43:37 +0100
Subject: [R] help with tcltk
In-Reply-To: Frank Gerrit Zoellner's message of "Wed, 14 Feb 2001 16:54:30 +0100"
References: <20010214165430.A10991@korngold.TechFak.Uni-Bielefeld.DE>
Message-ID: <x266idw46u.fsf@blueberry.kubism.ku.dk>

Frank Gerrit Zoellner <fzoellne at TechFak.Uni-Bielefeld.DE> writes:

> Hallo!
> 
> Can anyone explain to me how to add a vert. scrollbar to a listbox using tcltk please?

Haven't tried, but I'd expect it to work exactly as when you add a
scrollbar to a text window. See the code for the tkfaq demo, or tkpager.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dpowers at mail.la.utexas.edu  Wed Feb 14 19:01:46 2001
From: dpowers at mail.la.utexas.edu (Daniel A. Powers)
Date: Wed, 14 Feb 2001 12:01:46 -0600 (CST)
Subject: [R] Good books for learning R?
In-Reply-To: <HBEHIIBBKKNOBLMPKCBBGEKNDCAA.znmeb@aracnet.com>
Message-ID: <Pine.GSO.4.05.10102141144290.19300-100000@dahlia.la.utexas.edu>

Ed --

You might check the 

http://cran.r-project.org/other-docs.html

And things on John Maindonald's web page. 

Cheers,
Dan
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Dan Powers
Associate Professor, Sociology  
University of Texas at Austin                    


On Wed, 14 Feb 2001, M. Edward Borasky wrote:

> I'm looking for some good books to help me get up to speed on R. I've
> ordered "Modern Applied Statistics with S-Plus (Statistics and Computing)"
> as a start, but I'm wondering if there are any others I should look at. I've
> got all the documentation that comes with R, but I still am spending a lot
> of time "figuring out" how to do simple things like getting confidence
> limits for a mean, even with the search capability in the R on-line help.
> 
> --
> Ed Borasky
> http://www.aracnet.com/~znmeb
> mailto:znmeb at aracnet.com
> 
> Q: What phrase will you never hear Candice Bergen use?
> A: "My daddy didn't raise no dummies".
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Feb 14 19:39:43 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 14 Feb 2001 18:39:43 +0000 (GMT)
Subject: [R] .Renviron files win windows
In-Reply-To: <Pine.GSO.4.05.10102140913380.28290-100000@ofis450a.akctr.noaa.gov>
Message-ID: <Pine.GSO.4.31.0102141836460.17489-100000@auk.stats>

On Wed, 14 Feb 2001, Anne York wrote:

> Are there any templates for .Renviron files. My installation of R did not
> have one and I am curious about how other users make use of it. It is
> mentioned in Appendix B.2 of the manual.

Mine has

R_LIBS=c:/R/library

Under Windows one has a richesse of where to set such things. I tend to set
environmental variables on the command line for different projects,
but things I use across versions of R (I have at least three in use, now
1.2.1, 1.2.1-patched, pre-1.3.0) in %HOME%\.Renviron.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jpalomo at escet.urjc.es  Wed Feb 14 19:48:45 2001
From: jpalomo at escet.urjc.es (=?iso-8859-1?Q?Jes=FAs?= Palomo =?iso-8859-1?Q?Mart=EDnez?=)
Date: Wed, 14 Feb 2001 19:48:45 +0100
Subject: [R] Statistic web
Message-ID: <3A8AD30D.D9F46B52@escet.urjc.es>

Hi all,

 Is there any web site to send data to be solved (a regression for
example) at the server side (Apache,...) by R automatically.

Thanks in advance.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gfeeney at gfeeney.com  Wed Feb 14 20:02:34 2001
From: gfeeney at gfeeney.com (Griffith Feeney)
Date: Wed, 14 Feb 2001 09:02:34 -1000
Subject: [R] Good books for learning R?
In-Reply-To: <HBEHIIBBKKNOBLMPKCBBGEKNDCAA.znmeb@aracnet.com>
References: <Pine.LNX.4.10.10102141018080.2915-100000@localhost.localdomain>
Message-ID: <3.0.5.32.20010214090234.007eed40@gfeeney.com>

"S Poetry" is available online at http://www.seanet.com/%7Epburns/Spoetry/ .

At 06:53 AM 2/14/01 -0800, you wrote:
>I'm looking for some good books to help me get up to speed on R. I've
[snip]


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From partha_bagchi at hgsi.com  Wed Feb 14 20:22:18 2001
From: partha_bagchi at hgsi.com (partha_bagchi@hgsi.com)
Date: Wed, 14 Feb 2001 14:22:18 -0500
Subject: [R] Statistic web
Message-ID: <OF9B5F51F3.68BD3FF6-ON852569F3.006A47BB@hgsi.com>


Perhaps you are looking for Jeff Banfield's Rweb?
http://www.math.montana.edu/Rweb/



                                                                                                          
                    Jes?s Palomo                                                                          
                    Mart?nez                    To:     R-Help-List <r-help at stat.math.ethz.ch>            
                    <jpalomo at escet.urjc.        cc:                                                       
                    es>                         Subject:     [R] Statistic web                            
                    Sent by:                                                                              
                    owner-r-help at stat.ma                                                                  
                    th.ethz.ch                                                                            
                                                                                                          
                                                                                                          
                    02/14/2001 01:48 PM                                                                   
                                                                                                          
                                                                                                          




Hi all,

 Is there any web site to send data to be solved (a regression for
example) at the server side (Apache,...) by R automatically.

Thanks in advance.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._._



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From isabelc at cmat.edu.uy  Thu Feb 15 02:57:02 2001
From: isabelc at cmat.edu.uy (Isabel Canette)
Date: Wed, 14 Feb 2001 22:57:02 -0300 (UYT)
Subject: [R] R with multiple processors
Message-ID: <Pine.LNX.3.96.1010214225513.12238A-100000@troilo.cmat.edu.uy>

Hello.

The laboratory where I work has the possibility to get a Sun machine with 12
processors. My question is: can R be used to implememt parallel algorithms
which take into account the several processors? Is there a way to run *threads*
in R?

If this is possible, would somebody share his/her experiences?

Thanks.
	  
Isabel

--
Isabel Cañette           Iguá 4225
Centro de Matemática     11400 Montevideo
Facultad de Ciencias     Uruguay   
isabelc at cmat.edu.uy

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From znmeb at aracnet.com  Thu Feb 15 06:30:31 2001
From: znmeb at aracnet.com (M. Edward Borasky)
Date: Wed, 14 Feb 2001 21:30:31 -0800
Subject: [R] R with multiple processors
In-Reply-To: <Pine.LNX.3.96.1010214225513.12238A-100000@troilo.cmat.edu.uy>
Message-ID: <HBEHIIBBKKNOBLMPKCBBEELCDCAA.znmeb@aracnet.com>

I don't know much about the internals of R, but I would imagine that one
could at least get the large linear algebra problems to work with a
parallelized LINPACK or LAPACK. Do you have really large problems? If not,
the overhead might be so high that it isn't worth going parallel.
--
Ed Borasky
http://www.aracnet.com/~znmeb
mailto:znmeb at aracnet.com

Q: What phrase will you never hear Candice Bergen use?
A: "My daddy didn't raise no dummies".

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From christian.hoffmann at wsl.ch  Thu Feb 15 09:47:12 2001
From: christian.hoffmann at wsl.ch (Christian Hoffmann)
Date: Thu, 15 Feb 2001 09:47:12 +0100
Subject: [R]package dependence
Message-ID: <3.0.6.32.20010215094712.00929730@mail.wsl.ch>

Hi,

I want to create several packages, with package Aa depending on functions
in package A. My directories with .r and .Rd are organized as follows

./A/man/*.Rd
./A/R/*.r
./Aa/man/*.Rd
./Aa/R/*.r

Afre creatin package A with 

R CMD check A 
R CMD INSTALL --library=lib A

I then have
./lib/A/help  etc

If I try to do

R CMD check Aa 
R CMD INSTALL --library=lib Aa

I am getting

* checking examples ... ERROR
and in ./Aa.Rcheck/Aa-Ex.Rout

there is the error signalled

	couldn't find function "function.from.A"
Execution halted

Since I rather want to keep the packages separate, how can I deal with
dependences among packages?


Thanks for help.
--christian

Dr.sc.math.Christian W. Hoffmann
Mathematics and Statistical Computing
Landscape Modeling and Web Applications
Swiss Federal Research Institute WSL 
Zuercherstrasse 111
CH-8903 Birmensdorf, Switzerland
phone: ++41-1-739 22 77    fax: ++41-1-739 22 15
e-mail: Hoffmann at WSL.CH
www: http://www.wsl.ch/staff/christian.hoffmann/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Feb 15 10:02:13 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 15 Feb 2001 09:02:13 +0000 (GMT)
Subject: [R]package dependence
In-Reply-To: <3.0.6.32.20010215094712.00929730@mail.wsl.ch>
Message-ID: <Pine.GSO.4.31.0102150854470.13152-100000@toucan.stats>

On Thu, 15 Feb 2001, Christian Hoffmann wrote:

> Hi,
>
> I want to create several packages, with package Aa depending on functions
> in package A. My directories with .r and .Rd are organized as follows
>
> ./A/man/*.Rd
> ./A/R/*.r
> ./Aa/man/*.Rd
> ./Aa/R/*.r
>
> Afre creatin package A with
>
> R CMD check A
> R CMD INSTALL --library=lib A
>
> I then have
> ./lib/A/help  etc
>
> If I try to do
>
> R CMD check Aa
> R CMD INSTALL --library=lib Aa
>
> I am getting
>
> * checking examples ... ERROR
> and in ./Aa.Rcheck/Aa-Ex.Rout
>
> there is the error signalled
>
> 	couldn't find function "function.from.A"
> Execution halted
>
> Since I rather want to keep the packages separate, how can I deal with
> dependences among packages?

Does the function .First.lib in package Aa contain `require(A)'?  That is
how this is done.  (You can also put it in any of the code files of
package Aa, but it seems cleaner to use .First.lib.)

To use this with R CMD check you need to ensure that `lib' is used as a
library directory. As R CMD check uses --vanilla, you will need to set
R_LIBS=lib, in the calling environment as .Rprofile and .Renviron are
skipped.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Torsten.Hothorn at rzmail.uni-erlangen.de  Thu Feb 15 10:44:40 2001
From: Torsten.Hothorn at rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Thu, 15 Feb 2001 10:44:40 +0100 (MET)
Subject: [R]package dependence
In-Reply-To: <3.0.6.32.20010215094712.00929730@mail.wsl.ch>
Message-ID: <Pine.LNX.4.21.0102151042440.10127-100000@artemis.imbe.med.uni-erlangen.de>


> Hi,
> 
> I want to create several packages, with package Aa depending on functions
> in package A. My directories with .r and .Rd are organized as follows
> 
> ./A/man/*.Rd
> ./A/R/*.r
> ./Aa/man/*.Rd
> ./Aa/R/*.r
> 
> Afre creatin package A with 
> 
> R CMD check A 
> R CMD INSTALL --library=lib A
> 
> I then have
> ./lib/A/help  etc
> 
> If I try to do
> 
> R CMD check Aa 
> R CMD INSTALL --library=lib Aa
> 
> I am getting
> 
> * checking examples ... ERROR
> and in ./Aa.Rcheck/Aa-Ex.Rout
> 
> there is the error signalled
> 
> 	couldn't find function "function.from.A"
> Execution halted

as far as I know: use Aa/R/zzz.R to load A using

require(A)

Torsten

> 
> Since I rather want to keep the packages separate, how can I deal with
> dependences among packages?
> 
> 
> Thanks for help.
> --christian
> 
> Dr.sc.math.Christian W. Hoffmann
> Mathematics and Statistical Computing
> Landscape Modeling and Web Applications
> Swiss Federal Research Institute WSL 
> Zuercherstrasse 111
> CH-8903 Birmensdorf, Switzerland
> phone: ++41-1-739 22 77    fax: ++41-1-739 22 15
> e-mail: Hoffmann at WSL.CH
> www: http://www.wsl.ch/staff/christian.hoffmann/
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fzoellne at TechFak.Uni-Bielefeld.DE  Thu Feb 15 13:16:09 2001
From: fzoellne at TechFak.Uni-Bielefeld.DE (Frank Gerrit Zoellner)
Date: Thu, 15 Feb 2001 13:16:09 +0100
Subject: [R] Quoting Issues in RODBC SQL Queries
Message-ID: <20010215131609.B12375@korngold.TechFak.Uni-Bielefeld.DE>

Hi!

I've got a question about quoting in sql statements.
I'm using the RODBC package for connecting to the database(mysql).
I want to do the following select :

resultset<-sqlQuery(con,"select chi1,AVG(energytype) from amberenergy,rotamerlibrary where amberenergy.RId = rotamerlibrary.RId and res_id= as.selection group by chi1",as="matrix")

where energytype and as.selection are variables 
How do I have to quote the sql statement so that the values of the variables are placed in the sql statement? 

Thanks
-- 
Frank Gerrit Zoellner


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From duncan at research.bell-labs.com  Thu Feb 15 13:34:20 2001
From: duncan at research.bell-labs.com (Duncan Temple Lang)
Date: Thu, 15 Feb 2001 07:34:20 -0500 (EST)
Subject: [R] embedding R?
Message-ID: <200102151234.HAA19268@jessie.research.bell-labs.com>


As Luke once put it "This is a long one; you know what key to press if
you aren't interested...."


Apologies for coming into the R within Perl discussion late. (I have
been away from e-mail for several days.) 

The RSPerl package (http:://www.omegahat.org/RSPerl) is designed to be
symmetric in allowing the embedding in either direction. That is
embedding Perl within an R session or running R within a Perl session.
Either can be "in charge". The embedding R within Perl is less well
documented, to say the least.  I plan to release a version of the
package soon with more information about this and also more user-level
support for specifying converter functions. The very same model that
is used in the Java, CORBA, Python, JavaScript, etc. works for Perl
also. The Python package (of which there will be a new release within
the next day or two) might provide a useful place to see the setup
immediately.


The approach of using Expect perl works fine. However, using strings
can be very limiting for certain types of functionality and places a
lot of work on each programmer using it. They have to construct the R
command as a string and then send it to be evaluated.  Parsing R
output is very fragile and difficult to do in a flexible way (what if
the page width changes, etc.). It is hard to come up with general and
reusable ways to handle reading the results back in and hence one is
frequently coding context-specific approaches. Very time consuming.
(If one really wanted to do this, one might use XML to represent the R
values being returned and then read them into Perl. That is general
and extensible. Some of us (Vincent Carey, Robert Gentleman and I
currently) are working on this at present.) And perhaps the biggest
drawback to using strings to effect the inter-system interface is that
one end up programming in both languages and that also means debugging
the code for each but not necessarily in the easiest place. 

Basically, the overall problem is that the syntax of the other
language is being used and that breaks encapsulation. Suppose you are
using Perl from within R to read the contents of URLs. Then, you may
decide that Java or Python is better (say it handles firewalls or
SSL). Then you would have to rewrite your R code to generate
expressions in Omegahat or Python.

The approach we have been using in all the Omegahat inter-system
interface packages (the CORBA, Java, ....) is to allow one to call
functions and create objects and call their methods in the other
language. The functions look as if they are S functions. And so, it
fits naturally with the programming model, encapsulating what is
really happening.

Whatever approach one uses is good if it works for the problem at
hand. The important thing is to try to reduce the number of times one
has to hand-craft solutions. 

 I hope this helps explain what we are doing and how the S-Perl
connection is intended to work. 

  All the best.

   D.



> Date: Tue, 13 Feb 2001 17:28:31 -0500 (EST)
> From: "John D. Barnett" <jdb at young39.wi.mit.edu>
> cc: r-help at stat.math.ethz.ch
> 

> On Sun, 11 Feb 2001, Aaron J Mackey wrote:
> 
> > ...  What about a program that
> > dynamically loads R itself ...
> 
> Aaron-
> 
> I've been interested in this topic for a while, too, but haven't done much
> with it yet.  I saw some of the replies, pointing to omegahat, the
> directions for embedding R.
> 
> Another shortcut to perl <-> R interactivity is to use the Expect perl
> module (I think expect was originally in tcl), which is basically a fancy
> bi-directional pipe.  You're still faced with using perl to prepare R
> input, and parse R output, but you can do so one call at a time.  Also,
> expect just waits until it sees the next prompt or times out (though the
> time-out can be disabled).  I tried to automatically convert R output into
> perl data structures; this can be messy.
> 
> I'm interested in web application development that utilizes R.  Duncan
> Temple Lang's RSPerl package, embedding perl in R, lets you access great
> perl modules, like CGI.pm; a hack to R lets it handle scripts like
> 
> #!/usr/local/R-1.2.0/lib/R/bin/R.bin --source 
> invisible(library(RSPerl));
> foo <- .PerlExpr("use CGI;");
> foo <- .PerlExpr("$q = new CGI; 1;");
> a <- .PerlExpr("$q->param('a')");
> cat(.PerlExpr("$q->header . $q->start_html . 'Hellooooo....';"),
>     a,
>     .PerlExpr("$q->end_html"));
> 
> 
> Anyway, that's about all I did with it.  (OK, maybe that's exactly what
> I did; proof of concept and no more.)  It has R functions for accessing
> perl data structures, which might serve as a useful template for the
> reverse process-- having perl functions to access R data structures, for R
> embedded in perl.  I'm a little fuzzy on what the appropriate mapping is
> for different data types.
> 
> A random aside-- there's a package for perl, PDL (perl data language),
> that stores data in C arrays, and has optimized code for
> computation.  This also provides methods for converting perl arrays to
> and from pdl structures, as well as fast I/O routines for pdl
> structures.  The icing on the perl-with-embedded-R cake would be
> conversion methods directly between R arrays and pdl arrays.
> 
> I'm interested if you decide to pursue this further.
> 
> -John Barnett
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


-- 
_______________________________________________________________

Duncan Temple Lang                duncan at research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From remoteapl at obninsk.com  Thu Feb 15 14:19:08 2001
From: remoteapl at obninsk.com (RemoteAPL)
Date: Thu, 15 Feb 2001 16:19:08 +0300
Subject: [R] deviance vs entropy
Message-ID: <001e01c09751$e0f87ba0$0200a8c0@suse>

Hello,

The question looks like simple. It's probably even stupid. But I spent several hours
searching Internet, downloaded tons of papers, where deviance is mentioned and...
And haven't found an answer. 

Well, it is clear for me the using of entropy when I split some node of a classification tree.
The sense is clear, because entropy is an old good measure of how uniform is distribution.
And we want, for sure, the distribution to be uniform, represent one class only as the best.

Where deviance come from at all? I look at a formula and see that the only difference to
entropy is use of *number* of each class points, instead of *probability* as a multiplier
of log(Pik). So, it looks like the deviance and entropy differ by factor 1/N (or 2/N), where
N is total number of cases. Then WHY to say "deviance"? Any historical reason?
Or most likely I do not understand something very basic. Please, help.

Thanks,
Alexander Skomorokhov,

-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20010215/f5aa15a6/attachment.html

From marcus.eger at physik.uni-marburg.de  Thu Feb 15 14:23:25 2001
From: marcus.eger at physik.uni-marburg.de (Marcus Eger)
Date: Thu, 15 Feb 2001 14:23:25 +0100
Subject: [R] Re: Question "kill-buffer"
References: <dgk4rxwayoe.fsf@scs2.ncl.ac.uk>
Message-ID: <3A8BD84D.3DF4E5B8@physik.uni-marburg.de>

I would be very thankfull for such a solution, too ....

"R.E. Darnell" wrote:
> 
> Would introducing a "Are you sure?" question after kill the *R* ( or
> whatever) buffer with a hasty C-x k be a popular default
> "feature". How can I include this for my own use?
> 
> Thanks
> 
> Ross Darnell

-- 
+-------------------------------------------------------
| Marcus Eger
+-------- ><> -------------------------------------------
| E-Mail: eger.m at gmx.de (NEW)
|         marcus.eger at physik.uni-marburg.de (OLD)
| WWW:    http://neuro.physik.uni-marburg.de/~eger (NEW)
+--------------------------------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From christian.hoffmann at wsl.ch  Thu Feb 15 14:42:30 2001
From: christian.hoffmann at wsl.ch (Christian Hoffmann)
Date: Thu, 15 Feb 2001 14:42:30 +0100
Subject: [R] Problem with setenv R_LIBS
Message-ID: <3.0.6.32.20010215144230.00941720@mail.wsl.ch>

Hi all,



Not so long ago I had  "Package Index"
(file:/home/woodstock/hoffmann/.R/doc/html/packages.html) 

refusing to show my packages although $R_LIBS showed the correct path.

Now the solution was to use the full path:

/home/woodstock/hoffmann/R/Sources/lib

instead of

~/R/Sources/lib


Has anyone seen this behaiour before and is it documented in some FAQ?


-christian
Dr.sc.math.Christian W. Hoffmann
Mathematics and Statistical Computing
Landscape Modeling and Web Applications
Swiss Federal Research Institute WSL 
Zuercherstrasse 111
CH-8903 Birmensdorf, Switzerland
phone: ++41-1-739 22 77    fax: ++41-1-739 22 15
e-mail: Hoffmann at WSL.CH
www: http://www.wsl.ch/staff/christian.hoffmann/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mark at myatt.demon.co.uk  Thu Feb 15 15:03:43 2001
From: mark at myatt.demon.co.uk (Mark Myatt)
Date: Thu, 15 Feb 2001 14:03:43 +0000
Subject: [R] Updated introductory text
Message-ID: <sSYDcAA$G+i6Ewkk@myatt.demon.co.uk>


All,

I have updated my practical introduction to using R to analyse
epidemiological data for the March 2001 Computer Software in
Epidemiology course at the Nordic School of Public Health to include a
short section on object orientation. You can get this from:

        http://www.myatt.demon.co.uk

As a ZIP file containing MS Word '95 (DOC) and Adobe Acrobat v4.xx (PDF)
version of the document as well as the sample data files used in the
exercises.

I place this material in the public domain. Feel free to make use of it
as you will.

Mark Myatt



--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fberchtold at mail.bip.net  Thu Feb 15 15:48:38 2001
From: fberchtold at mail.bip.net (Fredrik Berchtold)
Date: Thu, 15 Feb 2001 15:48:38 +0100
Subject: [R] cointegrating regression
Message-ID: <LPBBKAOHICHGIHDHGMBAMEDNCEAA.fberchtold@mail.bip.net>

Hi all,
Can I run a cointegrating regression, for example
delta Xt=a1(Yt-1-cXt-1)+E1t
and
delta Yt=-b1(Yt-1-cXt-1)+E2t
with R were
Xt and Yt are non stationary time series at t
a,b,c are parameters and E1t and E2t are error terms at t.
Yt-Xt is stationary
Any suggestions are welcome.
Best regards,
/fb
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Thu Feb 15 15:51:34 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 15 Feb 2001 15:51:34 +0100
Subject: [R] Updated introductory text
In-Reply-To: Mark Myatt's message of "Thu, 15 Feb 2001 14:03:43 +0000"
References: <sSYDcAA$G+i6Ewkk@myatt.demon.co.uk>
Message-ID: <x21yt0q9s9.fsf@blueberry.kubism.ku.dk>

Mark Myatt <mark at myatt.demon.co.uk> writes:

> I have updated my practical introduction to using R to analyse
> epidemiological data for the March 2001 Computer Software in
> Epidemiology course at the Nordic School of Public Health to include a
> short section on object orientation. You can get this from:
> 
>         http://www.myatt.demon.co.uk
> 
> As a ZIP file containing MS Word '95 (DOC) and Adobe Acrobat v4.xx (PDF)
> version of the document as well as the sample data files used in the
> exercises.
> 
> I place this material in the public domain. Feel free to make use of it
> as you will.

Hey, this looks nice. I especially like the banquet data for logistic
regression. I suggest that we put it on CRAN, although probably
separate the .pdf and .doc files so they can be viewed directly.
Could you add a couple of words about the level of the intended
audience.

A bunch of minor corrections (non-exhaustive, just what caught my eye.
PDF page numbers)

p2:  (Exc.3) general*ized* linear models
p7:  ctest is automatically loaded nowadays
p33: Bill Venables misspelled in "S programming" entry 



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pgilbert at bank-banque-canada.ca  Thu Feb 15 16:56:27 2001
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 15 Feb 2001 10:56:27 -0500
Subject: [R]package dependence
References: <3.0.6.32.20010215094712.00929730@mail.wsl.ch>
Message-ID: <3A8BFC2B.D36DD5C7@bank-banque-canada.ca>

> I want to create several packages, with package Aa depending on functions
> in package A.

As Brian pointed out, your .First.lib for package Aa should have a statement
require(A), and also for  R CMD check  you need to install A in lib and set
R_LIBS=lib. I think if you check A first and then install it in R_HOME/library then
you do not need to set R_LIB. Typically I like to test A and Aa in a test lib and
make sure they are both working before installing in R_HOME/library.

There is a  problem to be careful about when you are in development mode. (Someone
please correct me if I am wrong.) If you install A in R_HOME/library and later make
changes to A, then a test of Aa may be comprimised by the fact that the old A is
installed in R_HOME/library. Even with R_LIBS  set,   .lib.loc still appends the
default library  in R_HOME.

If you only have the packages A and Aa then you can probably manage these
dependencies without too much difficulty. If you have a more complicated set of
dependencies then I have a Makefile which I am willing to share (and perhaps there is
enough other interest to develop this into a generic model). My situation is: I have
three bundles A, B, and C. Bundle A has packages a1, a2, a3, a4. Bundle B has
packages b1, b2, b3. Bundle C has packages c1, c2, c3. Package a4 depends on a3 which
depends on a2 which depends on a1. Packages in bundles B and C all depend on a3. I
don't think I have things set up in the best possible way yet, but my makefile (when
things are working correctly)  lets me test these all in both R and Splus.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetil.kjernsmo at astro.uio.no  Thu Feb 15 17:04:48 2001
From: kjetil.kjernsmo at astro.uio.no (Kjetil Kjernsmo)
Date: Thu, 15 Feb 2001 17:04:48 +0100 (MET)
Subject: [R] Reading single precision floats from binary file
Message-ID: <Pine.OSF.4.30.0102151620360.400-100000@alnair.uio.no>

Dear all,

I have a few files with binary data written by a C program a friend wrote.
I allready have program to read these files, Thomas Lumley and Prof Brian
D Ripley was kind enough to respond to a question to this list earlier
with some code that works perfectly, so this is really no problem, it is
more out curiousity.

Most of my files consists of 40000 single precision floats, and I figured
the new readBin() function exists for the purpose of reading such files,
so I tried to use it, but with no success.

Now, the docs say that what you can read is "numeric", "double",
"integer", "int", "logical", "complex", "character", and since "single" is
not on the list, is it simply not the right tool for the job?
I tried different things, among them, providing single as what,
changing the size, etc, but it always ends up with reading 20000 records,
indicating that it does read the file as double precision floats.

It is not clear to me what the last sentence in the notes for this
function means, and indeed not quite clear what the function does at all,
but I was hoping someone can enlighten me.

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj at astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster at skepsis.no




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Feb 15 17:11:23 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 15 Feb 2001 16:11:23 +0000 (GMT)
Subject: [R]package dependence
Message-ID: <200102151611.QAA28412@toucan.stats.ox.ac.uk>


> Date: Thu, 15 Feb 2001 10:56:27 -0500
> From: Paul Gilbert <pgilbert at bank-banque-canada.ca>
> 
> > I want to create several packages, with package Aa depending on functions
> > in package A.
> 
> As Brian pointed out, your .First.lib for package Aa should have a statement
> require(A), and also for  R CMD check  you need to install A in lib and set
> R_LIBS=lib. I think if you check A first and then install it in R_HOME/library 
then
> you do not need to set R_LIB. Typically I like to test A and Aa in a test lib 
and
> make sure they are both working before installing in R_HOME/library.

If you install in R_HOME/library then you do not need to set R_LIBS.
However, you may either not be allowed to install there, or choose not to.
(No mere user here has install rights in R_HOME/library.)

> There is a  problem to be careful about when you are in development mode. 
(Someone
> please correct me if I am wrong.) If you install A in R_HOME/library and later 
make
> changes to A, then a test of Aa may be comprimised by the fact that the old A 
is
> installed in R_HOME/library. Even with R_LIBS  set,   .lib.loc still appends 
the
> default library  in R_HOME.

The test of Aa will always use the installed version of A it finds first
in R_LIBS:R_HOME/library.  Only the test of A will use the sources of A.
So you need to make sure your current versions are installed.

I very rarely install in R_HOME/library.  For several reasons:

(1) As myself I have no rights to do so either in the dept nor on my own
machines. (R is owned by a separate account.)
(2) It makes changing versions of R very much easier.
(3) It is easy to exclude ones own libraries when it is convenient,
e.g. by --vanilla.

Brian

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Thu Feb 15 17:26:36 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Thu, 15 Feb 2001 08:26:36 -0800 (PST)
Subject: [R] R with multiple processors
In-Reply-To: <Pine.LNX.3.96.1010214225513.12238A-100000@troilo.cmat.edu.uy>
Message-ID: <Pine.A41.4.33.0102150806570.147150-100000@homer06.u.washington.edu>

On Wed, 14 Feb 2001, Isabel Canette wrote:

> Hello.
>
> The laboratory where I work has the possibility to get a Sun machine with 12
> processors. My question is: can R be used to implememt parallel algorithms
> which take into account the several processors? Is there a way to run *threads*
> in R?
>
> If this is possible, would somebody share his/her experiences?

It is not possible to run threads in R.  However, it is possible to call
other threaded code, as the R-Java and R-Tcl interfaces demonstrate.  You
could probably call parallel C or Fortran code. Alternatively, for a
problem with fairly low communication requirements you could control
multiple R processes from one central program and feed them each  bits of
computation.

I usually want to run any given computation lots of times, so the solution
is easy: instead of running it 1000 times on 1 processor, run it 80 times
on each of 12 processors.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Thu Feb 15 17:41:28 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Thu, 15 Feb 2001 08:41:28 -0800 (PST)
Subject: [R] deviance vs entropy
In-Reply-To: <001e01c09751$e0f87ba0$0200a8c0@suse>
Message-ID: <Pine.A41.4.33.0102150837420.147150-100000@homer06.u.washington.edu>

On Thu, 15 Feb 2001, RemoteAPL wrote:

> Hello,
>
> The question looks like simple. It's probably even stupid. But I spent several hours
> searching Internet, downloaded tons of papers, where deviance is mentioned and...
> And haven't found an answer.
>
> Well, it is clear for me the using of entropy when I split some node of a classification tree.
> The sense is clear, because entropy is an old good measure of how uniform is distribution.
> And we want, for sure, the distribution to be uniform, represent one class only as the best.
>
> Where deviance come from at all? I look at a formula and see that the only difference to
> entropy is use of *number* of each class points, instead of *probability* as a multiplier
> of log(Pik). So, it looks like the deviance and entropy differ by factor 1/N (or 2/N), where
> N is total number of cases. Then WHY to say "deviance"? Any historical reason?
> Or most likely I do not understand something very basic. Please, help.


Entropy is, as you say, a measure of non-uniformity. Deviance (which is
based on the loglikelihood function) is a measure of evidence.  A given
level of improvement in classification is much stronger evidence for a
split if it is based on a large number of points.  For example, with 2
points you can always find a split that gives perfect classification. With
2000 points it is very impressive to be able to get perfect classification
with one split.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From olivier.martin at inrialpes.fr  Thu Feb 15 19:09:01 2001
From: olivier.martin at inrialpes.fr (Olivier Martin)
Date: Thu, 15 Feb 2001 19:09:01 +0100
Subject: [R] ML for gamma distribution
Message-ID: <3A8C1B3D.5F909BAB@inrialpes.fr>

Dear  R users,

I would like to estimate the ML parameters of a gamma distribution .
Does anybody have a program to do this ?
Thanks

--
Olivier MARTIN
Projet IS2
INRIA Rhone-Alpes
655, Av. de l'Europe
Montbonnot
38334 Saint Ismier cedex

phone:(33) 04 76 61 53 55
           06 08 67 93 42
fax  :(33) 04 76 61 54 77


-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20010215/41e810c5/attachment.html

From greiff at mitre.org  Thu Feb 15 17:51:49 2001
From: greiff at mitre.org (Warren R. Greiff)
Date: Thu, 15 Feb 2001 11:51:49 -0500
Subject: [R] deviance vs entropy
References: <001e01c09751$e0f87ba0$0200a8c0@suse>
Message-ID: <3A8C0925.89FA0678@mitre.org>

> RemoteAPL wrote:
> 
> Hello,
> 
> The question looks like simple. It's probably even stupid. But I spent several hours
> searching Internet, downloaded tons of papers, where deviance is mentioned and...
> And haven't found an answer.
> 
> Well, it is clear for me the using of entropy when I split some node of a classification tree.
> The sense is clear, because entropy is an old good measure of how uniform is distribution.
> And we want, for sure, the distribution to be uniform, represent one class only as the best.
> 
> Where deviance come from at all? I look at a formula and see that the only difference to
> entropy is use of *number* of each class points, instead of *probability* as a multiplier
> of log(Pik). So, it looks like the deviance and entropy differ by factor 1/N (or 2/N), where
> N is total number of cases. Then WHY to say "deviance"? Any historical reason?
> Or most likely I do not understand something very basic. Please, help.
> 
> Thanks,
> Alexander Skomorokhov,
> 

I'm not quite sure what you have in mind, but I'm inferring from your comments that by "deviance"
you mean:

   -SUM p_i log (p_i/q_i)  (or -2 SUM p_i log (p_i/q_i))

In information theoretic terms this is:

   D(p_i||q_i) = - SUM p_i log p_i + SUM p_i log q_i = H(p) - H(p:q)

where H(p) is entropy of p, and H(p:q) is the cross entropy.  If q is the uniform distribution, then
the cross entropy reduces to:

   -SUM p_i log q_i = -SUM p_i log 1/N = log(N) SUM p_i = log(N)

If q_i is the uniform distribution, then you get:

   D(p||q) = H(p) + log(N).

I'm guessing that in the things you've read, when they are talking about deviance, q can (and
generally is) something other than the uniform distribution.  For example, p is often the empirical
distribution of a data sample, and q is the distribution corresponding to some induced model.  Then
D(p||q) is a measure of how far the model is from the observed data.

Note that the cross entropy corresponds to the likelihood, L(data;q), of the data (which has an
empirical distribution of p) having been produced by the induced model q.  The entropy corresponds
to the likelihood, L(data;p), of the data having been produced by a saturated model, one which fits
the empirical distribution of the data perfectly.  So the deviance:

   D(p||q) = log L(data;p) - log L(data;q) = log [L(data;p) / L(data;q)]

is a measure of how far the model is from being as good as it could be.  Statisticians tend to think
in terms of the ratio of likelihoods, Machine Learning folks tend to think in terms of relative
entropy (entropy - cross_entropy, or KL-divergence).  Statisticians are interested in deviance
because (with the factor of 2) it is asymptotically chi-square for many modeling families.  In
information theoretic terms it's nice to think of the deviance as the number of bits extra that it
would take to transmit the data for a system assuming the distribution q, relative to a system that
had assumed p, which is the best system for transmitting that particular data set.

Then again, maybe I've misunderstood you completely.  Please set me straight if I have.

-warren
-------------- next part --------------
A non-text attachment was scrubbed...
Name: greiff.vcf
Type: text/x-vcard
Size: 388 bytes
Desc: Card for Warren R. Greiff
Url : https://stat.ethz.ch/pipermail/r-help/attachments/20010215/81ad0780/greiff.vcf

From p.dalgaard at pubhealth.ku.dk  Thu Feb 15 18:12:27 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 15 Feb 2001 18:12:27 +0100
Subject: [R] Reading single precision floats from binary file
In-Reply-To: Kjetil Kjernsmo's message of "Thu, 15 Feb 2001 17:04:48 +0100 (MET)"
References: <Pine.OSF.4.30.0102151620360.400-100000@alnair.uio.no>
Message-ID: <x2itmbrhtw.fsf@blueberry.kubism.ku.dk>

Kjetil Kjernsmo <kjetil.kjernsmo at astro.uio.no> writes:

> Dear all,
> 
> I have a few files with binary data written by a C program a friend wrote.
> I allready have program to read these files, Thomas Lumley and Prof Brian
> D Ripley was kind enough to respond to a question to this list earlier
> with some code that works perfectly, so this is really no problem, it is
> more out curiousity.
> 
> Most of my files consists of 40000 single precision floats, and I figured
> the new readBin() function exists for the purpose of reading such files,
> so I tried to use it, but with no success.
> 
> Now, the docs say that what you can read is "numeric", "double",
> "integer", "int", "logical", "complex", "character", and since "single" is
> not on the list, is it simply not the right tool for the job?
> I tried different things, among them, providing single as what,
> changing the size, etc, but it always ends up with reading 20000 records,
> indicating that it does read the file as double precision floats.
> 
> It is not clear to me what the last sentence in the notes for this
> function means, and indeed not quite clear what the function does at all,
> but I was hoping someone can enlighten me.


Works OK for me with the current patch version, except that the n=
parameter to readBin seems to be misdocumented:

x<-rnorm(100)
zz <- file("testbin", "wb")
writeBin(x, zz, size=4)
close(zz)
system("ls -l testbin")

zz <- file("testbin", "rb")
xx <- readBin(zz, numeric(), n= 999999, size=4)
length(xx)
range(x - xx)
close(zz)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tdlong at uci.edu  Thu Feb 15 18:16:54 2001
From: tdlong at uci.edu (Tony Long)
Date: Thu, 15 Feb 2001 09:16:54 -0800
Subject: [R] R with multiple processors
In-Reply-To: 
 <Pine.A41.4.33.0102150806570.147150-100000@homer06.u.washington.edu>
References: 
 <Pine.A41.4.33.0102150806570.147150-100000@homer06.u.washington.edu>
Message-ID: <p05001905b6b1be9f0eb1@[128.200.28.179]>

R is inefficient enough that if you need 12 processors you may 
consider writing your function in C.  Alternatively you can identify 
the part of your R code where most your CPU cycles are being used and 
make that a function in C.  Porting large chucks of R code or even 
small routines that are gobbling up CPU cycles can give your orders 
of magnitude speed changes!   Once you learn how to do it, letting R 
call external compiled function is really very easy.



At 8:26 AM -0800 2/15/01, Thomas Lumley wrote:
>On Wed, 14 Feb 2001, Isabel Canette wrote:
>
>>  Hello.
>>
>>  The laboratory where I work has the possibility to get a Sun machine with 12
>>  processors. My question is: can R be used to implememt parallel algorithms
>>  which take into account the several processors? Is there a way to 
>>run *threads*
>>  in R?
>>
>>  If this is possible, would somebody share his/her experiences?
>
>It is not possible to run threads in R.  However, it is possible to call
>other threaded code, as the R-Java and R-Tcl interfaces demonstrate.  You
>could probably call parallel C or Fortran code. Alternatively, for a
>problem with fairly low communication requirements you could control
>multiple R processes from one central program and feed them each  bits of
>computation.
>
>I usually want to run any given computation lots of times, so the solution
>is easy: instead of running it 1000 times on 1 processor, run it 80 times
>on each of 12 processors.
>
>	-thomas
>
>Thomas Lumley			Asst. Professor, Biostatistics
>tlumley at u.washington.edu	University of Washington, Seattle
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Tony Long
Ecology and Evolutionary Biology
Steinhaus Hall
University of California at Irvine
Irvine, CA
92697-2525

Tel:  (949) 824-2562   (office)
Tel:  (949) 824-5994   (lab)
Fax: (949) 824-2181

email:  tdlong at uci.edu
http://hjmuller.bio.uci.edu/~labhome/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Thu Feb 15 18:26:12 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 15 Feb 2001 18:26:12 +0100
Subject: [R] R with multiple processors
In-Reply-To: Thomas Lumley's message of "Thu, 15 Feb 2001 08:26:36 -0800 (PST)"
References: <Pine.A41.4.33.0102150806570.147150-100000@homer06.u.washington.edu>
Message-ID: <x2g0hfrh6z.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <tlumley at u.washington.edu> writes:

> It is not possible to run threads in R.  However, it is possible to call
> other threaded code, as the R-Java and R-Tcl interfaces demonstrate.

Actually, R-Tcl is currently single-threaded...

Some of us do have hopes that R will gain multithreading some time in
the future, partly to harness multi-CPU machines, but also with the
hope that the general structuring of things like GUIs and other
event-driven progamming will be easier that way.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Feb 15 18:56:06 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 15 Feb 2001 17:56:06 +0000 (GMT)
Subject: [R] Reading single precision floats from binary file
Message-ID: <200102151756.RAA28539@toucan.stats.ox.ac.uk>


> Date: Thu, 15 Feb 2001 17:04:48 +0100 (MET)
> From: Kjetil Kjernsmo <kjetil.kjernsmo at astro.uio.no>
> To: R Help list <r-help at stat.math.ethz.ch>
> Subject: [R] Reading single precision floats from binary file
> 
> Dear all,
> 
> I have a few files with binary data written by a C program a friend wrote.
> I allready have program to read these files, Thomas Lumley and Prof Brian
> D Ripley was kind enough to respond to a question to this list earlier
> with some code that works perfectly, so this is really no problem, it is
> more out curiousity.
> 
> Most of my files consists of 40000 single precision floats, and I figured
> the new readBin() function exists for the purpose of reading such files,
> so I tried to use it, but with no success.
> 
> Now, the docs say that what you can read is "numeric", "double",
> "integer", "int", "logical", "complex", "character", and since "single" is
> not on the list, is it simply not the right tool for the job?

R does not have a "single" mode for vectors, and that is what it says you can
specify as `what'.

> I tried different things, among them, providing single as what,
> changing the size, etc, but it always ends up with reading 20000 records,
> indicating that it does read the file as double precision floats.
> 
> It is not clear to me what the last sentence in the notes for this
> function means, and indeed not quite clear what the function does at all,
> but I was hoping someone can enlighten me.

It is indeed what readBin is for, and for me

readBin(con, "double", n=40000, size=4)

works.  Indeed, there are examples of this in the help page for readBin.

Test:

zz <- file("testbin", "wb")
writeBin(rnorm(20000), zz, size=4)
close(zz)
system("ls -l testbin") # 80000
zz <- file("testbin", "rb")
a <- readBin(zz, numeric(), n = 20000, size=4)
length(a) # 20000
close(zz)


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetil.kjernsmo at astro.uio.no  Thu Feb 15 19:43:32 2001
From: kjetil.kjernsmo at astro.uio.no (Kjetil Kjernsmo)
Date: Thu, 15 Feb 2001 19:43:32 +0100 (MET)
Subject: [R] Reading single precision floats from binary file
In-Reply-To: <200102151756.RAA28539@toucan.stats.ox.ac.uk>
Message-ID: <Pine.OSF.4.30.0102151933300.400-100000@alnair.uio.no>

On Thu, 15 Feb 2001, Prof Brian Ripley wrote:

>> Now, the docs say that what you can read is "numeric", "double",
>> "integer", "int", "logical", "complex", "character", and since "single" is
>> not on the list, is it simply not the right tool for the job?
>
>R does not have a "single" mode for vectors,

I know.

>and that is what it says you can specify as `what'.

Ah, I see. I read it as "what kind of data you will read from file (or
connection)". Hm, I wonder if something along the lines of "the mode of
the resulting R vector" would be clearer?

>It is indeed what readBin is for, and for me
>
>readBin(con, "double", n=40000, size=4)
>
>works.

Wow! It works for me too.... :-) Strange I didn't try that one...

> Indeed, there are examples of this in the help page for readBin.

Yep, I guess I was confused about how many bytes makes up a single
precision float, thinking it could be different on 64 bit machine, or
whatever, anyway enough of my drivel. Thank you very much for clearing
this up!

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj at astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster at skepsis.no

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From yuling5 at yahoo.com  Thu Feb 15 20:20:28 2001
From: yuling5 at yahoo.com (Yu-Ling Wu)
Date: Thu, 15 Feb 2001 11:20:28 -0800 (PST)
Subject: [R] run R under DOS prompt
In-Reply-To: <3a8ddc04.115379041@smtp1.sympatico.ca>
Message-ID: <20010215192028.25952.qmail@web11502.mail.yahoo.com>

Thanks! This is helpful!

Another question. When I type "Rterm --slave < xxx.R"
under DOS prompt,
the output also shows on the screen. How to write the
output to a .txt file instead
of showing them on the screen?

Thanks,
Yu-Ling Wu

--- Duncan Murdoch <dmurdoch at pair.com> wrote:
> On Tue, 13 Feb 2001 15:27:22 -0800 (PST), you wrote:
> 
> >Hi,
> >
> >I have a xxx.R file. In order to run this file, I
> have
> >to go to R, and type -- source("xxx.R").
> >
> >Two questions:
> >1. How to run file xxx.R under DOS prompt instead
> of
> >entering R environment?
> 
> Try 
> 
>  Rterm --slave <xxx.R
> 
> Look in the R-intro manual for options other than
> --slave that you
> might want to use.
> 
> >2. There are several functions in file xxx.R, how
> to
> >pass the arguments
> >to the function when I try to run this file via
> >source() function (or under DOS mode)?
> 
> You can't, but you can add extra lines to the file
> with calls
> containing the arguments.  For example, you might
> have
> 
>  myfunc <- function(x)
>  { 
> 	print(x)
>  }
> 
> in xxx.R.  If you want to call myfunc(34), then
> first source the file,
> then execute myfunc(34).  If doing it in batch mode,
> copy the file to
> a temp file, add the line "myfunc(34)" to the end,
> and execute the
> temp file.
> 
> Duncan Murdoch
> 


__________________________________________________
Do You Yahoo!?
Get personalized email addresses from Yahoo! Mail - only $35 
a year!  http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Feb 15 20:19:01 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 15 Feb 2001 19:19:01 +0000 (GMT)
Subject: [R] Reading single precision floats from binary file
In-Reply-To: <Pine.OSF.4.30.0102151933300.400-100000@alnair.uio.no>
Message-ID: <Pine.GSO.4.31.0102151917580.25299-100000@auk.stats>

On Thu, 15 Feb 2001, Kjetil Kjernsmo wrote:

> On Thu, 15 Feb 2001, Prof Brian Ripley wrote:
>
> >> Now, the docs say that what you can read is "numeric", "double",
> >> "integer", "int", "logical", "complex", "character", and since "single" is
> >> not on the list, is it simply not the right tool for the job?
> >
> >R does not have a "single" mode for vectors,
>
> I know.
>
> >and that is what it says you can specify as `what'.
>
> Ah, I see. I read it as "what kind of data you will read from file (or
> connection)". Hm, I wonder if something along the lines of "the mode of
> the resulting R vector" would be clearer?

It says:

    what: Either an object whose mode will give the mode of the vector
          to be read, or a character vector of length one describing
          the mode: one of `"numeric", "double", "integer", "int",
          "logical", "complex", "character"'.

so `of the vector to be read' is in there already.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From remoteapl at obninsk.com  Fri Feb 16 00:53:14 2001
From: remoteapl at obninsk.com (RemoteAPL)
Date: Fri, 16 Feb 2001 02:53:14 +0300
Subject: [R] deviance vs entropy
References: <Pine.A41.4.33.0102150837420.147150-100000@homer06.u.washington.edu>
Message-ID: <007801c097aa$76144bd0$0200a8c0@suse>

----- Original Message -----
From: "Thomas Lumley" <tlumley at u.washington.edu>
To: "RemoteAPL" <remoteapl at obninsk.com>
Cc: <r-help at hypatia.math.ethz.ch>
Sent: Thursday, February 15, 2001 7:41 PM
Subject: Re: [R] deviance vs entropy


> On Thu, 15 Feb 2001, RemoteAPL wrote:
>
> > Hello,
> >
> > The question looks like simple. It's probably even stupid. But I spent
several hours
> > searching Internet, downloaded tons of papers, where deviance is
mentioned and...
> > And haven't found an answer.
> >
> > Well, it is clear for me the using of entropy when I split some node of
a classification tree.
> > The sense is clear, because entropy is an old good measure of how
uniform is distribution.
> > And we want, for sure, the distribution to be uniform, represent one
class only as the best.
> >
> > Where deviance come from at all? I look at a formula and see that the
only difference to
> > entropy is use of *number* of each class points, instead of
*probability* as a multiplier
> > of log(Pik). So, it looks like the deviance and entropy differ by factor
1/N (or 2/N), where
> > N is total number of cases. Then WHY to say "deviance"? Any historical
reason?
> > Or most likely I do not understand something very basic. Please, help.
>
>
> Entropy is, as you say, a measure of non-uniformity. Deviance (which is
> based on the loglikelihood function) is a measure of evidence.  A given
> level of improvement in classification is much stronger evidence for a
> split if it is based on a large number of points.  For example, with 2
> points you can always find a split that gives perfect classification. With
> 2000 points it is very impressive to be able to get perfect classification
> with one split.
>
> -thomas
>
> Thomas Lumley Asst. Professor, Biostatistics
> tlumley at u.washington.edu University of Washington, Seattle
>

Thomas,

Thanks a lot. I catch your explanation. My problem was that I thought on one
node, where it doesn't matter
if you calculate deviance or entropy. But when you compare the parent and
child nodes it does matter indeed.
Entropy shows the same improvement if you split perfectly a mixture of 2
classes of 10 or 1000 cases.
And deviance says that in the second case you may have more cake (or beer:-)
in the evening.
Also, now I understand, that while construction tree we have less and less
points at each split.
And deviance helps to see that the next split does add complexity, but
probably doesn't add much
of classification quality.

Well, now I read in a paper: "Other approaches for choosing future splits
involve entropy measures
and the Gini index". Why entropy is used any way? May you point me to some
paper on all these measures comparison?

Thanks again for your help.
Alexander.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From remoteapl at obninsk.com  Fri Feb 16 01:24:46 2001
From: remoteapl at obninsk.com (RemoteAPL)
Date: Fri, 16 Feb 2001 03:24:46 +0300
Subject: [R] deviance vs entropy
References: <001e01c09751$e0f87ba0$0200a8c0@suse> <3A8C0925.89FA0678@mitre.org>
Message-ID: <008201c097ae$ddb00d20$0200a8c0@suse>

Warren,

Thank you for your answer. It gave some food to my brain. Let me ask more...

> I'm not quite sure what you have in mind, but I'm inferring from your
comments that by "deviance"
> you mean:
>
>    -SUM p_i log (p_i/q_i)  (or -2 SUM p_i log (p_i/q_i))

I am sorry for my language. I meant in particular those deviance which is
calculated when
we select split of a node building classification tree. As far as I know it
should be:

 -2 SUM n_i log (p_i)

where n_i is number of points of class c_i at this node and p_i=n_i/N, where
N is total number
of cases at this node. Probably it refers some way to what you wrote above.
May you tell more
on p_i and q_i in your formula?

>    D(p_i||q_i) = - SUM p_i log p_i + SUM p_i log q_i = H(p) - H(p:q)
>
> where H(p) is entropy of p, and H(p:q) is the cross entropy.  If q is the
uniform distribution, then
> the cross entropy reduces to:

I probably understand this and the next statements if I understand the first
formula.

> I'm guessing that in the things you've read, when they are talking about
deviance, q can (and
> generally is) something other than the uniform distribution.  For example,
p is often the empirical
> distribution of a data sample, and q is the distribution corresponding to
some induced model.  Then
> D(p||q) is a measure of how far the model is from the observed data.

It sounds interesting. May you please repeat this in terms of classification
trees? I mean what is
"induced model" and "corresponding distribution" if we are speaking on CART?

> entropy (entropy - cross_entropy, or KL-divergence).  Statisticians are
interested in deviance
What "KL" stands for?

> because (with the factor of 2) it is asymptotically chi-square for many
modeling families.  In
That's probably the most important argument PRO.

> information theoretic terms it's nice to think of the deviance as the
number of bits extra that it
> would take to transmit the data for a system assuming the distribution q,
relative to a system that
> had assumed p, which is the best system for transmitting that particular
data set.
Very interesting! I must think over this more.

> Then again, maybe I've misunderstood you completely.  Please set me
straight if I have.
I see that you sit quite straight. I am afraid that I lie horizontally:-)

Regards,
Alexander.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From denis at mail.cor.epa.gov  Fri Feb 16 03:33:26 2001
From: denis at mail.cor.epa.gov (Denis White)
Date: Thu, 15 Feb 2001 18:33:26 -0800 (PST)
Subject: [R] polygon border colors
Message-ID: <Pine.SUN.3.91.1010215182945.10790A-100000@okapi.cor.epa.gov>

Simple question: is it true that 

  polygon (x, y, col=vec, border=vec, ...)

will cycle through the vec colors for fills but not for
the border colors when sending multiple polygons?

thanks,

Denis White
   US EPA, 200 SW 35th St, Corvallis, Oregon, 97333 USA
   voice: 541.754.4476, email: white.denis at epa.gov
   web: www.epa.gov/wed/pages/staff/white/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From adrian at olsen.ch  Fri Feb 16 09:33:36 2001
From: adrian at olsen.ch (Adrian Trapletti)
Date: Fri, 16 Feb 2001 09:33:36 +0100
Subject: [R] cointegrating regression
Message-ID: <3A8CE5E0.65EC90D5@olsen.ch>

> Date: Thu, 15 Feb 2001 15:48:38 +0100
> From: "Fredrik Berchtold"
> Subject: [R] cointegrating regression
>
> Hi all,
> Can I run a cointegrating regression, for example
> delta Xt=a1(Yt-1-cXt-1)+E1t
> and
> delta Yt=-b1(Yt-1-cXt-1)+E2t
> with R were
> Xt and Yt are non stationary time series at t
> a,b,c are parameters and E1t and E2t are error terms at t.
> Yt-Xt is stationary
> Any suggestions are welcome.
> Best regards,
> /fb
>

E.g., you can do that in three steps:
1. Test if x and y are cointegrated, e.g., using po.test() in tseries.
2. If cointegrated, run the regression r<-lm(y~x).
3. let z<-ts.union(diff(x),diff(y)) and xreg<-residuals(r),
xreg<-xreg[1:(length(xreg)-1)]
Run arima0(z,xreg=xreg,order=c(var.order,0,0)).

This corresponds to the so called Engle-Granger two-step procedure.

best
Adrian

--
Dr.  Adrian Trapletti,  Olsen  &  Associates Ltd.
Seefeldstrasse 233, CH-8008  Z?rich,  Switzerland
Phone: +41 (1) 386 48 47   Fax: +41 (1) 422 22 82
E-mail: adrian at olsen.ch  WWW: http://www.olsen.ch



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gb at stat.umu.se  Fri Feb 16 14:29:08 2001
From: gb at stat.umu.se (gb)
Date: Fri, 16 Feb 2001 14:29:08 +0100 (CET)
Subject: [R] Poisson regression with gamma random effects
In-Reply-To: <3A8C1B3D.5F909BAB@inrialpes.fr>
Message-ID: <Pine.LNX.4.30.0102161403080.7483-100000@tal.stat.umu.se>

I am looking for  R  code that performs poisson regression
with random effects, especially gamma distributed.
(What Lindsey's glmm does for normally distributed random effects.)

It is in fact easy to implement the EM algorithm in  R  for this
problem, I have written a prototype as an exercise, but before I
develop it further, I want to know if this already exists.

It also looks fairly straightforward to directly maximize the
marginal likelihood. Has anyone done that?

Thanks,

G?ran Brostr?m


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fornat at goldnet.ch  Fri Feb 16 14:40:29 2001
From: fornat at goldnet.ch (FORNAT)
Date: Fri, 16 Feb 2001 14:40:29 +0100
Subject: [R] vector heap is too small
Message-ID: <5.0.2.1.1.20010216143630.009f1a80@mail.goldnet.ch>

Ich habe eine dringende Frage!!!!!!!!

ch ben?tze das Rplus mit Windows 98 .
Wo kann ich die Vector heap von Rgui.exe erh?hen. Bei Eigenschaften kann 
ich das nicht machen.
Vielen Dank f?r Eure Bem?hungen
Nadine Brauchli, FORNAT
***************************************************************************
FORNAT
Forschungsstelle f?r angewandte ?kologie und Naturschutz
Asylstr. 46/48
Postfach
8708 M?nnedorf

Tel und Fax: 01 920 42 40
fornat at goldnet.ch

***************************************************************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Feb 16 15:23:52 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 16 Feb 2001 14:23:52 +0000 (GMT)
Subject: [R] vector heap is too small
In-Reply-To: <5.0.2.1.1.20010216143630.009f1a80@mail.goldnet.ch>
Message-ID: <Pine.GSO.4.31.0102161421560.29698-100000@toucan.stats>

(i) Tell us the version of R you are using if you need help.

(ii) Read the rw-FAQ for the answer: you need the version of the FAQ for
your version of R.

In this case the answer is different for <= 1.1.1 and >= 1.2.0.

On Fri, 16 Feb 2001, FORNAT wrote:

> Ich habe eine dringende Frage!!!!!!!!
>
> ch benütze das Rplus mit Windows 98 .
> Wo kann ich die Vector heap von Rgui.exe erhöhen. Bei Eigenschaften kann
> ich das nicht machen.

[...]

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ligges at statistik.uni-dortmund.de  Fri Feb 16 15:31:41 2001
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 16 Feb 2001 15:31:41 +0100
Subject: [R] vector heap is too small
References: <5.0.2.1.1.20010216143630.009f1a80@mail.goldnet.ch>
Message-ID: <3A8D39CD.AAE7EBE1@statistik.uni-dortmund.de>

FORNAT wrote:
> 
> Ich habe eine dringende Frage!!!!!!!!

Please in english ....
 
> ch ben?tze das Rplus mit Windows 98 .

What is Rplus?
--> R

> Wo kann ich die Vector heap von Rgui.exe erh?hen. Bei Eigenschaften kann
> ich das nicht machen.

Have a look at
  ?Memory
or read the FAQ

What version of R?
There is a different memory managment in
R < 1.2.0 and R >= 1.2.0

> Vielen Dank f?r Eure Bem?hungen
> Nadine Brauchli, FORNAT

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From chong at stat.purdue.edu  Fri Feb 16 18:09:52 2001
From: chong at stat.purdue.edu (Chong Gu)
Date: Fri, 16 Feb 2001 12:09:52 -0500
Subject: [R] bug in step()?
Message-ID: <200102161709.MAA136012@odds.stat.purdue.edu>


Folks,

There appears to be a bug(?) in step() when used to screen logistic
models.  The problem appears to be specific to 1.2.1 (or maybe also
1.2.0?), as the proper behavior was observed in earlier versions.  When
I did the same on the surrogate log linear model, everything seemed
okey.

The data involved was the detergent data found in earlier editions of
MASS, as given below,

   > detg1
      Temp M.user   Soft  M  X
   1   Low      N   Hard 42 68
   3  High      N   Hard 30 42
   5   Low      Y   Hard 52 37
   7  High      Y   Hard 43 24
   9   Low      N Medium 50 66
   11 High      N Medium 23 33
   13  Low      Y Medium 55 47
   15 High      Y Medium 47 23
   17  Low      N   Soft 53 63
   19 High      N   Soft 27 29
   21  Low      Y   Soft 49 57
   23 High      Y   Soft 29 19

A constant model was fit to the data

   > detg1.m0 <- glm(cbind(X,M)~1,binomial,detg1)
   > detg1.m0

   Call:  glm(formula = cbind(X, M) ~ 1, family = binomial, data = detg1) 

   Coefficients:
   (Intercept)  
       0.01587  

   Degrees of Freedom: 11 Total (i.e. Null);  11 Residual
   Null Deviance:      32.83 
   Residual Deviance: 32.83        AIC: 92.52 

The following was the results I got from R.1.2.1 on both AIX and FreeBSD,

   > step(detg1.m0,scope=list(upper=~M.user*Temp*Soft))
   Start:  AIC= 92.52 
    cbind(X, M) ~ 1 

            Df Deviance     AIC
   <none>         32.83   92.52
   + M.user  1  1059.98 1121.67
   + Temp    1  2236.57 2298.27
   + Soft    2  2565.93 2629.63

   Call:  glm(formula = cbind(X, M) ~ 1, family = binomial, data = detg1) 

   Coefficients:
   (Intercept)  
       0.01587  

   Degrees of Freedom: 11 Total (i.e. Null);  11 Residual
   Null Deviance:	    32.83 
   Residual Deviance: 32.83 	AIC: 92.52 

I then tried stepAIC() in the MASS package, although I was not sure
why it should be any different.  The following was the results,

   > stepAIC(detg1.m0,scope=list(lower=~.,upper=~.+M.user))
   Start:  AIC= 92.52 
    cbind(X, M) ~ 1 

            Df Deviance    AIC
   + M.user  1   12.244 73.942
   <none>        32.826 92.524

   Step:  AIC= 73.94 
    cbind(X, M) ~ M.user 

            Df Deviance    AIC
   - M.user  1    0.428 60.125
   <none>        12.244 73.942

   Step:  AIC= 92.52 
   cbind(X, M) ~ 1 


   Call:  glm(formula = cbind(X, M) ~ 1, family = binomial, data = detg1) 

   Coefficients:
   (Intercept)  
       0.01587  

   Degrees of Freedom: 11 Total (i.e. Null);  11 Residual
   Null Deviance:	    32.83 
   Residual Deviance: 32.83 	AIC: 92.52 
   Warning message: 
   non-integer #successes in a binomial glm! in: eval(expr, envir, enclos) 

The AIC obtained by stepAIC() appeared to be correct in the first step
add1() operation, but the drop1() screwed up in the next step and
brought me right back to the constant model.

Will check on my linux box tonight, but this one might not be
platform-specific as I was able to duplicate on two platforms so far.

Chong
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From YZhang at akamaitrading.com  Fri Feb 16 18:32:09 2001
From: YZhang at akamaitrading.com (Yan Zhang)
Date: Fri, 16 Feb 2001 11:32:09 -0600
Subject: [R] command line R; readline history
Message-ID: <NEBBJOFLGMLKFCPDFFFPIEDDCAAA.YZhang@akamaitrading.com>

Hello,

I need help now. I installed R in my Solaris 5.8 box. But two things I am
missing comparing to my old Splus.

1. I used to invoke a command edit Splus by type "Splus -e". So I can surfer
in Splus like ksh environment. Can I do the same in R?
2. I used BSD version of R, which I can use "up" key to call back last
command. But in Sun, I can't make it happened. I reinstalled the readline
from GNU, hoping it help. But it didn't.

Please help me, if anyone know the answer or workaround on above issues.

Yan Zhang
yzhang at akamaitrading.com




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Fri Feb 16 18:57:44 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 16 Feb 2001 18:57:44 +0100
Subject: [R] command line R; readline history
In-Reply-To: "Yan Zhang"'s message of "Fri, 16 Feb 2001 11:32:09 -0600"
References: <NEBBJOFLGMLKFCPDFFFPIEDDCAAA.YZhang@akamaitrading.com>
Message-ID: <x2g0hebjdz.fsf@blueberry.kubism.ku.dk>

"Yan Zhang" <YZhang at akamaitrading.com> writes:

> Hello,
> 
> I need help now. I installed R in my Solaris 5.8 box. But two things I am
> missing comparing to my old Splus.
> 
> 1. I used to invoke a command edit Splus by type "Splus -e". So I can surfer
> in Splus like ksh environment. Can I do the same in R?
> 2. I used BSD version of R, which I can use "up" key to call back last
> command. But in Sun, I can't make it happened. I reinstalled the readline
> from GNU, hoping it help. But it didn't.

It should, but you may need to say where it is during the configure
stage of the R build. Also, it should be a fairly recent version of
readline although I doubt that would be the problem.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dpowers at mail.la.utexas.edu  Fri Feb 16 19:42:41 2001
From: dpowers at mail.la.utexas.edu (Daniel A. Powers)
Date: Fri, 16 Feb 2001 12:42:41 -0600 (CST)
Subject: [R] Poisson regression with gamma random effects
In-Reply-To: <Pine.LNX.4.30.0102161403080.7483-100000@tal.stat.umu.se>
Message-ID: <Pine.GSO.4.05.10102161229590.26609-100000@dahlia.la.utexas.edu>

Goran -

(A convoluted solution...)

I coded a problem like this in gauss using an S-plus program by Naryan
Sastry at Rand (given below).  It is set up for piecewise constant hazard
models, but can easily be tricked to modeling counts as it calls a poisson
regression (glm) in the M-step. Note that I have not tested this in R, 
but the gauss code gives the same results as stata's xtpois on McCullough
and Nelder's ship data. 

Cheers,
Dan
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Dan Powers
Associate Professor, Sociology  
University of Texas at Austin                    


------------------------------------------------------------------------------

repwe <- function(formula, data, offset1=exposure, clust1=cluster,
         interv1=interval, alpha.start=1, eps=1e-07, maxit=250, maxit1=20) {

# S-plus program to estimate a hazard model with a single gamma-distributed
# random effect using the E-M algorithm
# Author: Narayan Sastry

# Make sure formula includes no constant or offset, and that the first G
# variables describe the baseline hazard. Exposure should be in months.

# Sample call:
# model.out <- repwe(event~-1+factor(interval)+urb,data=ps.dat,clust1=cl,
#			      alpha.start=.5)

if(!is.data.frame(data)) stop("Data must be a data frame")
off.col <- match(deparse(substitute(offset1)),names(data))
exposure <- names(data[off.col])
clus.col <- match(deparse(substitute(clust1)),names(data))
cluster <- data[,clus.col]
inter.col <- match(deparse(substitute(interv1)),names(data))
interval <- data[,inter.col]
form1 <- as.character(formula)
formula2 <- paste(form1[2],"~",form1[3],"+offset(log(",exposure,"/12))")
event.col <- match(form1[2],names(data))
event <- data[,event.col]
tot.event <- tot.integ.haz <- rep(0,nrow(data))
N <- length(unique(cluster))
mu.hat1 <- mu.hat <- xi.hat <- t.ev.cl <- t.i.h.cl <- rep(0,N)
G <- max(interval)
off.set <- data[,off.col]/12

for(i in 1:N){
	cl.num <- unique(cluster)[i]
	tot.event[cluster==cl.num] <- t.ev.cl[i] <- sum(event[cluster==cl.num])
	}

iter <- 0
phi.dif <- 1
cat("Iteration: ",format(iter)," alpha: ",format(alpha.start),"\n")

while((abs(phi.dif) > eps*10 | iter < 31) & iter <= maxit1) {
	if(iter>0) {
 	   old.coef <- haz.mod$coef 
	   data$mu.hat1 <- (alpha.new + tot.event)/(alpha.new + tot.integ.haz) }
	alpha <- if(iter==0) alpha.start else alpha.new 
	if(iter==1) formula2 <- paste(form1[2],"~",form1[3]," + 
		offset(log(",exposure,"/12) + log(mu.hat1))")
	haz.mod <- glm(formula2,poisson,data,x=T)
log.L <- N*(alpha*log(alpha)-log(gamma(alpha))) + sum(event*predict(haz.mod)) +
      sum(log(gamma(alpha+t.ev.cl))) - sum((alpha+t.ev.cl)*log(alpha+t.i.h.cl))
cat("logL = ",format(log.L),"\n")
	integ.haz <- exp(predict(haz.mod)) * off.set
	for(i in 1:N){
	    cl.num <- unique(cluster)[i]
	    tot.integ.haz[cluster==cl.num] <- t.i.h.cl[i] <-
	        sum(integ.haz[cluster==cl.num]) }
	xi.hat <- digamma(alpha + t.ev.cl) - log(alpha + t.i.h.cl)
	mu.hat <- (alpha + t.ev.cl)/(alpha + t.i.h.cl)
	xi.mu.dif <- sum(xi.hat - mu.hat)
	alpha.new <- newt.raph(alpha,xi.mu.dif,N,eps,maxit)
	phi.dif3 <- 1
	iter3 <- 0
	while(abs(phi.dif3) > eps*10 & iter3 <= maxit) {
	   xi.hat <- digamma(alpha.new + t.ev.cl) - log(alpha.new + t.i.h.cl)
	   mu.hat <- (alpha.new + t.ev.cl)/(alpha.new + t.i.h.cl)
	   xi.mu.dif <- sum(xi.hat - mu.hat)
	   alpha.old <- alpha.new
	   alpha.new <- newt.raph(alpha.old,xi.mu.dif,N,eps,maxit)
	   phi.dif3 <- 1/alpha.new - 1/alpha.old
	   iter3 <- iter3 + 1 
	   }

	phi.dif <- 1/alpha - 1/alpha.new
	iter <- iter + 1
	cat("Iteration: ",format(iter)," alpha: ",format(alpha.new),"\n")
	}

	xi.hat <- digamma(alpha + t.ev.cl) - log(alpha + t.i.h.cl)
	mu.hat <- (alpha + t.ev.cl)/(alpha + t.i.h.cl)
	d2Q.dtheta2 <- t(haz.mod$x * haz.mod$weights) %*% haz.mod$x
	p <- nrow(d2Q.dtheta2)
	E.w.D <- cbind(rbind(d2Q.dtheta2,rep(0,p)),rep(0,p+1))
	E.w.D[p+1,p+1] <- -N * (1/alpha - trigamma(alpha))
	var.w <- mu.hat / (alpha + t.i.h.cl)
	var.logw <- trigamma(alpha + t.ev.cl)
	cov.w.logw <- mu.hat * (digamma(alpha + t.ev.cl + 1) -
		digamma(alpha + t.ev.cl))
	var.logww <- var.logw + var.w - 2 * cov.w.logw
	cov.w.logww <- cov.w.logw - var.w
	A <- rep(0,p) 
	if(p-G!=0) dHAZ.dbeta <- haz.mod$x[,(G+1):p] * integ.haz 
	dHAZ.dgam <- integ.haz
	for(i in 1:N) {
	   cl.num <- unique(cluster)[i]
	   for(j in 1:p) {
	      A[j] <- if(j<=G) { sum(dHAZ.dgam[cluster==cl.num & interval==j]) }
			else { if(p-G>1) sum(dHAZ.dbeta[cluster==cl.num,(j-G)])
			else if(p-G==1) sum(dHAZ.dbeta[cluster==cl.num]) } }
	   T.i <- rbind(cbind(-A,rep(0,p)),c(0,1))
	   Var.W.i <- matrix(c(var.w[i],rep(cov.w.logww[i],2),var.logww[i]),2)
	   Var.U.i <- T.i %*% Var.W.i %*% t(T.i)
	   Var.U <- if(i==1) Var.U.i else Var.U + Var.U.i }
	SVD <- svd (E.w.D - Var.U)
	variances <- sqrt(diag( t(SVD$u %*% (t(SVD$v) * (1/SVD$d))) ))

log.L <- N*(alpha*log(alpha)-log(gamma(alpha))) + sum(event*predict(haz.mod)) +
      sum(log(gamma(alpha+t.ev.cl))) - sum((alpha+t.ev.cl)*log(alpha+t.i.h.cl))
cat("logL = ",format(log.L),"\n")
final.mod <- haz.mod 
final.mod$alpha <- alpha
cat("1/alpha: ",format(1/alpha),"\n")
cat("t(1/alpha):",format((1/alpha)/sqrt(alpha^(-4) * variances[p+1]^2)),"\n")
final.mod$alpha.se <- variances[p+1]
cat("s.e.(1/alpha): ",format(sqrt(alpha^(-4) * variances[p+1]^2)),"\n")
final.mod$phi.dif <- phi.dif
final.mod$iter <- iter
final.mod$std.errs <- variances[1:p]
cat("New t-values: ","\n")
cat(format(abs(haz.mod$coef/final.mod$std.errs)),"\n")
return(final.mod)
}






newt.raph <- function(alpha.old,xi.mu.dif,n,epsilon,maxit) {

iterations <- 0
phi.dif <- 1
alpha <- alpha.old
while(abs(phi.dif) > epsilon & iterations <= maxit) {
	dQ.dalpha <- xi.mu.dif + n*(1 + log(alpha) - digamma(alpha))
	d2Q.dalpha2 <- n*(1 / alpha - trigamma(alpha))
	alpha.new <- alpha - dQ.dalpha / d2Q.dalpha2
	phi.dif <- 1/alpha - 1/alpha.new
	iterations <- iterations + 1
	alpha <- alpha.new
	}
return(alpha)
}

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Feb 16 21:06:01 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 16 Feb 2001 20:06:01 +0000 (GMT)
Subject: [R] bug in step()?
In-Reply-To: <200102161709.MAA136012@odds.stat.purdue.edu>
Message-ID: <Pine.GSO.4.31.0102162000130.301-100000@toucan.stats>

On Fri, 16 Feb 2001, Chong Gu wrote:

> There appears to be a bug(?) in step() when used to screen logistic
> models.  The problem appears to be specific to 1.2.1 (or maybe also
> 1.2.0?), as the proper behavior was observed in earlier versions.  When
> I did the same on the surrogate log linear model, everything seemed
> okey.

The bug is in add1.glm.  It was intriduced in 1.2.0. It applies only to
binomial models specified in cbind(success, failure) form.

The problem is that what glm returns for the weights and y is in the
0 <= y <= 1 form, and that is not what model.extract gives.

I will commit a fix shortly.

stepAIC is wrong because of the same bug, but the factors come out
different.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From patfoley at csus.edu  Fri Feb 16 22:53:58 2001
From: patfoley at csus.edu (Patrick Foley)
Date: Fri, 16 Feb 2001 13:53:58 -0800
Subject: [R] canonical correspondence analysis
Message-ID: <3A8DA176.FD044E7E@csus.edu>

Is there an R function that does canonical correspondence analysis. Can
it be done using the VR function corresp()?
If not, how hard it be to write R code to do it? I am a population
biologist with long but patchy programming experience in C, Smalltalk,
Java and other languages.

Thanks,
Patrick Foley
patfoley at csus.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From roger at ysidro.econ.uiuc.edu  Sat Feb 17 00:31:52 2001
From: roger at ysidro.econ.uiuc.edu (Roger Koenker)
Date: Fri, 16 Feb 2001 17:31:52 -0600 (CST)
Subject: [R] wireframes
Message-ID: <Pine.SOL.3.96.1010216170633.10162M-100000@ysidro>


I'd like to have a wireframe plotting function for (piecewise linear)
surfaces defined on triangulations of the plane -- I've found some
references to commercial packages.  Does anyone know of something
non-commercial?


url:	http://www.econ.uiuc.edu		Roger Koenker	
email	roger at ysidro.econ.uiuc.edu		Department of Economics
vox: 	217-333-4558				University of Illinois
fax:   	217-244-6678				Champaign, IL 61820

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Feb 17 08:37:43 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 17 Feb 2001 07:37:43 +0000 (GMT)
Subject: [R] canonical correspondence analysis
In-Reply-To: <3A8DA176.FD044E7E@csus.edu>
Message-ID: <Pine.GSO.4.31.0102170733280.13118-100000@auk.stats>

On Fri, 16 Feb 2001, Patrick Foley wrote:

> Is there an R function that does canonical correspondence analysis. Can
> it be done using the VR function corresp()?

What is `canonical correspondence analysis'?  Correspondence analysis is
a variation on canonical correlation analysis.   None of my sources have
`canonical correspondence analysis', but my guess is that it is a
re-naming of something else.

> If not, how hard it be to write R code to do it? I am a population
> biologist with long but patchy programming experience in C, Smalltalk,
> Java and other languages.

Everything I have met so far in correspondence analysis is two or three
lines of R.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jaitchis at lisp.com.au  Sat Feb 17 09:50:24 2001
From: jaitchis at lisp.com.au (John Aitchison)
Date: Sat, 17 Feb 2001 19:50:24 +1100
Subject: [R] Code completion
In-Reply-To: <Pine.GSO.4.31.0102162000130.301-100000@toucan.stats>
References: <200102161709.MAA136012@odds.stat.purdue.edu>
Message-ID: <3A8ED600.15074.6153A22@localhost>


perhaps this should be directed to r-devel or somesuch, but I thought 
that others might wish to comment on the concept.

As a fairly new (and very enthusiastic and very appreciative) user of R I 
find myself frequently going to the help files, quite often just for some 
simple help on syntax or function arguments that I vaguely remember ..  
hist(), for instance, has a number of options some of which are to do with 
left and right boundaries of the cells that I sometimes need but not 
often.

Some form of "code completion" might be of assistance to users like me .. 
not exactly casual users or complete novices, but those who tend to use R 
in bursts perhaps separated by weeks or longer. Code completion is 
implemented in Delphi and perhaps in other languages that have a GUI IDE 
(integrated development environment).. essentially it comes down to the 
IDE prompting you with a function prototype after some delay or on 
pressing some special key (eg ctrl+?)

Could something similar be done in R and is it desirable? .. there perhaps 
might be some simple approximation  to code completion achievable by some 
modest changes to the syntax .. eg hist(?) might paste a full function 
prototype like 
     hist(x, breaks, freq = NULL, probability = !freq,
          include.lowest = TRUE,
          right = TRUE, col = NULL, border = par("fg"),
          main = paste("Histogram of" , xname),
          xlim = range(breaks), ylim = NULL,
          xlab = xname, ylab,
          axes = TRUE, plot = TRUE, labels = FALSE,
          nclass = NULL, ...)

 into the console window (or perhaps some special edit window)


well, something to ponder, fwiw.




John Aitchison
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Feb 17 10:20:15 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 17 Feb 2001 09:20:15 +0000 (GMT)
Subject: [R] Code completion
In-Reply-To: <3A8ED600.15074.6153A22@localhost>
Message-ID: <Pine.GSO.4.31.0102170901530.1839-100000@auk.stats>

On Sat, 17 Feb 2001, John Aitchison wrote:

> perhaps this should be directed to r-devel or somesuch, but I thought
> that others might wish to comment on the concept.
>
> As a fairly new (and very enthusiastic and very appreciative) user of R I
> find myself frequently going to the help files, quite often just for some
> simple help on syntax or function arguments that I vaguely remember ..
> hist(), for instance, has a number of options some of which are to do with
> left and right boundaries of the cells that I sometimes need but not
> often.
>
> Some form of "code completion" might be of assistance to users like me ..
> not exactly casual users or complete novices, but those who tend to use R
> in bursts perhaps separated by weeks or longer. Code completion is
> implemented in Delphi and perhaps in other languages that have a GUI IDE
> (integrated development environment).. essentially it comes down to the
> IDE prompting you with a function prototype after some delay or on
> pressing some special key (eg ctrl+?)

Yes, that's common on Windows IDEs (and I am pretty sure did not originate
in Delphi). However,

- R does not have an IDE
- R has dynamic scoping, so what function `hist' refers to is
  context-dependent.
- Most of the arguments in R can be omitted, so very rarely is a full
  function prototype useful.
- You still need a help page to understand the semantics.


> Could something similar be done in R and is it desirable? .. there perhaps
> might be some simple approximation  to code completion achievable by some
> modest changes to the syntax .. eg hist(?) might paste a full function
> prototype like
>      hist(x, breaks, freq = NULL, probability = !freq,
>           include.lowest = TRUE,
>           right = TRUE, col = NULL, border = par("fg"),
>           main = paste("Histogram of" , xname),
>           xlim = range(breaks), ylim = NULL,
>           xlab = xname, ylab,
>           axes = TRUE, plot = TRUE, labels = FALSE,
>           nclass = NULL, ...)
>
>  into the console window (or perhaps some special edit window)

That you mention `the console window' suggests that you are using a
specific version of R: in general R does not have a console.

On a console system one could envisage, for example, using F1 to bring up
help on the function name just entered.

> well, something to ponder, fwiw.

And after pondering, to contribute code to implement!

It looks to me as if you are using Windows (although you do not say so).
There will be no further Windows-specific development of R unless the user
community contributes it.  Remember R is a volunteer project, and (a)
none of the core developers use Windows for their own work and (b) we do
use R regularly.  Bells and whistles are what you pay money for in
commercial systems (like Delphi).

You might want to take a look at the ESS package for Emacs (runs on Windows
too) which is the nearest there is to an IDE for R.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jasont at indigoindustrial.co.nz  Sat Feb 17 12:09:39 2001
From: jasont at indigoindustrial.co.nz (Jason Turner)
Date: Sun, 18 Feb 2001 00:09:39 +1300
Subject: [R] Code completion
In-Reply-To: <3A8ED600.15074.6153A22@localhost>; from jaitchis@lisp.com.au on Sat, Feb 17, 2001 at 07:50:24PM +1100
References: <200102161709.MAA136012@odds.stat.purdue.edu> <Pine.GSO.4.31.0102162000130.301-100000@toucan.stats> <3A8ED600.15074.6153A22@localhost>
Message-ID: <20010218000938.A5477@camille.indigoindustrial.co.nz>

Hi John,

I'm also new and enthusiastic.

Have you tried the ESS package with emacs?  It's not quite what you're
describing here, but it's got some common features.  If you haven't 
used it, check it out at  
http://franz.stat.wisc.edu/pub/ESS/ 

ESS does provide command completion.  It's not sophisticated enough 
(as far as I can tell) to provide context-specific completion.  It 
does function and object name completion, but doesn't go so far as 
to trace options for the function you may be editing.  It makes the
help quite a bit easier to read and integrate into your work, though.

FWIW, I've been working on Unix systems for years now, where emacs is
widely available, and ESS is the first thing that made me like emacs.  
That's not a flame - I just happen to find emacs not suited to my taste 
in software.  ESS is helping me overcome this, as it makes R so much
more fun, easy, and useful.

Cheers

Jason
-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont at indigoindustrial.co.nz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From myotis at cix.compulink.co.uk  Sat Feb 17 12:18:00 2001
From: myotis at cix.compulink.co.uk (Graham Smith)
Date: Sat, 17 Feb 2001 11:18 +0000 (GMT)
Subject: [R] canonical correspondence analysis
Message-ID: <memo.308506@cix.compulink.co.uk>

In-Reply-To: <Pine.GSO.4.31.0102170733280.13118-100000 at auk.stats>

Brian,

As an ecologist, this is something I am also interested in. However, as 
I am more an ecologist than a statistician, I quote from the MVSP 
manual:

"Canonical Correspondence Analysis(CCA;   ter Braak, 1986,1987) is a 
multivariate direct gradient analysis method that has become widely 
used in ecology. As the name suggests, this method is derived from 
correspondence  analysis, but has been modified to allow environmental 
data to be incorporated into the analysis. It is calculated using 
reciprocal averaging form of correspondence analysis. However, at each 
cycle of the averaging process, a multiple regression is performed of 
the sample scores on the environmental variables. New site scores are 
calculated based on this regression, and then the process is repeated , 
continuing until the scores stabilise. The result  is that the axes of 
the final ordination, rather than simply reflecting dimensions of the 
greatest variability in the species data, are restricted to the linear 
combinations of the environmental variables and the species data. In 
this way these two sets of data are then directly related."

Ref 1: ter Braak, CJF (1986) Canonical correspondence analysis: A new 
eigenfactor technique for multivariate direct gradient analysis. 
Ecology, 67:1167-1179

Ref 2: ter Braak, CJF (1987) The analysis of vegetation-environment 
relationships by canonical correspondence analysis. Vegetatio, 64:69-77

More general references are:

Jongman, RHG., Ter Braak, CJF., and,  van Tongeren, OFR. (1995) Data 
analysis in community and landscape ecology. CUP.

Kent, M. & Coker, P. (1992) Vegetation description and analysis: A 
practical approach. Wiley.

As far as I am aware, only MVSP and Canoco carry out CCA.

I hope this is of some interest and it does raise the general point 
that programming literate  ecologists don't seem to have yet fully 
embraced S-Plus or R. Having only recently found S-Plus and R myself I 
had rather hoped that some of the common ecological statistical tools 
such as CCA, Twinspan and Decorana, plus the miscellaneous tools 
described in Krebs (1989) might have found there way into an R package.

Krebs, CJ (1989) Ecological Methodology, Harper & Row. Now as a 2nd 
edition 1995?)

Cheers,

Graham S


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rossini at blindglobe.net  Sat Feb 17 12:29:29 2001
From: rossini at blindglobe.net (A.J. Rossini)
Date: 17 Feb 2001 03:29:29 -0800
Subject: [R] Code completion
In-Reply-To: <20010218000938.A5477@camille.indigoindustrial.co.nz>
References: <200102161709.MAA136012@odds.stat.purdue.edu>
	<Pine.GSO.4.31.0102162000130.301-100000@toucan.stats>
	<3A8ED600.15074.6153A22@localhost>
	<20010218000938.A5477@camille.indigoindustrial.co.nz>
Message-ID: <87ae7l7dk6.fsf@jeeves.blindglobe.net>

>>>>> "JT" == Jason Turner <jasont at indigoindustrial.co.nz> writes:

    JT> ESS does provide command completion.  It's not sophisticated
    JT> enough (as far as I can tell) to provide context-specific
    JT> completion.

One issue here is (for ESS) is the mechanism for discovery.  Duncan,
Brian, et al, is there anyway to "discover" arguments in R, like you
can do for methods in Java/Python, etc?  (I'm thinking there was, but
can't seem to recall the exact function name, args()?)

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
UW Biostat/Center for AIDS Research	rossini at u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini at scharp.org
-------- (friday is unknown) --------
FHCRC: M--W : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy
CFAR:  ??   : 206-731-3647 (fax=3694)|Email is far better than phone
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cyg at sympatico.ca  Sat Feb 17 12:44:10 2001
From: cyg at sympatico.ca (Yves Gauvreau)
Date: Sat, 17 Feb 2001 06:44:10 -0500
Subject: [R] Code completion
In-Reply-To: <Pine.GSO.4.31.0102170901530.1839-100000@auk.stats>
Message-ID: <NEBBJKDJHEFCOOLFFAKKOEPACAAA.cyg@sympatico.ca>



[snip]
> There will be no further Windows-specific development of R unless the user
> community contributes it.  Remember R is a volunteer project, and (a)
> none of the core developers use Windows for their own work and (b) we do
> use R regularly.
[snip]

Would you be so kind as to explain a bit further the meaning of the first
phrase? Especially in terms of what are the implications for the future of R
on the Windows platform.

I'm sorry if the question sound silly, but I don't understand.

Regards

Yves Gauvreau
B.E.F.P. Universite du Quebec a Montreal
cyg at sympatico.ca

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rossini at blindglobe.net  Sat Feb 17 12:52:42 2001
From: rossini at blindglobe.net (A.J. Rossini)
Date: 17 Feb 2001 03:52:42 -0800
Subject: [R] Code completion
In-Reply-To: <NEBBJKDJHEFCOOLFFAKKOEPACAAA.cyg@sympatico.ca>
References: <NEBBJKDJHEFCOOLFFAKKOEPACAAA.cyg@sympatico.ca>
Message-ID: <8766i97chh.fsf@jeeves.blindglobe.net>

>>>>> "YG" == Yves Gauvreau <cyg at sympatico.ca> writes:


    YG> [snip]
    >> There will be no further Windows-specific development of R
    >> unless the user community contributes it.  Remember R is a
    >> volunteer project, and (a) none of the core developers use
    >> Windows for their own work and (b) we do use R regularly.
    YG> [snip]

    YG> Would you be so kind as to explain a bit further the meaning
    YG> of the first phrase? Especially in terms of what are the
    YG> implications for the future of R on the Windows platform.

I'm sure it just means that there won't be many changes that are
specific to only the windows platform.  (windows help files, and
similar, come to mind).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
UW Biostat/Center for AIDS Research	rossini at u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini at scharp.org
-------- (friday is unknown) --------
FHCRC: M--W : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy
CFAR:  ??   : 206-731-3647 (fax=3694)|Email is far better than phone
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Sat Feb 17 13:44:33 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 17 Feb 2001 13:44:33 +0100
Subject: [R] Code completion
In-Reply-To: rossini@blindglobe.net's message of "17 Feb 2001 03:29:29 -0800"
References: <200102161709.MAA136012@odds.stat.purdue.edu> <Pine.GSO.4.31.0102162000130.301-100000@toucan.stats> <3A8ED600.15074.6153A22@localhost> <20010218000938.A5477@camille.indigoindustrial.co.nz> <87ae7l7dk6.fsf@jeeves.blindglobe.net>
Message-ID: <x2r90x32dq.fsf@blueberry.kubism.ku.dk>

rossini at blindglobe.net (A.J. Rossini) writes:

> >>>>> "JT" == Jason Turner <jasont at indigoindustrial.co.nz> writes:
> 
>     JT> ESS does provide command completion.  It's not sophisticated
>     JT> enough (as far as I can tell) to provide context-specific
>     JT> completion.
> 
> One issue here is (for ESS) is the mechanism for discovery.  Duncan,
> Brian, et al, is there anyway to "discover" arguments in R, like you
> can do for methods in Java/Python, etc?  (I'm thinking there was, but
> can't seem to recall the exact function name, args()?)

One thing I remember from the Borland products was the very simple
mechanism of pressing a hotkey to get help on the function call you
were in the process of writing. 

That kind of thing would seem to be fairly easy to implement in ESS,
(now don't tell me it does so already...) e.g. user types

hist(x,

then realizes that he forgot how to set break values, hits C-F1 (say),
and the minibuffer says

help on [hist]:

press return and get the synopsis of hist in other-window, with a
"more..." entry to get you the rest of the help page (or maybe just
give the whole help page right away).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rossini at blindglobe.net  Sat Feb 17 14:03:13 2001
From: rossini at blindglobe.net (A.J. Rossini)
Date: 17 Feb 2001 05:03:13 -0800
Subject: [R] Code completion
In-Reply-To: <x2r90x32dq.fsf@blueberry.kubism.ku.dk>
References: <200102161709.MAA136012@odds.stat.purdue.edu>
	<Pine.GSO.4.31.0102162000130.301-100000@toucan.stats>
	<3A8ED600.15074.6153A22@localhost>
	<20010218000938.A5477@camille.indigoindustrial.co.nz>
	<87ae7l7dk6.fsf@jeeves.blindglobe.net>
	<x2r90x32dq.fsf@blueberry.kubism.ku.dk>
Message-ID: <871ysx797y.fsf@jeeves.blindglobe.net>

>>>>> "PD" == Peter Dalgaard <BSA <p.dalgaard at pubhealth.ku.dk>> writes:


    PD> rossini at blindglobe.net (A.J. Rossini) writes:
    >> >>>>> "JT" == Jason Turner <jasont at indigoindustrial.co.nz>
    >> writes:
    >> 
    JT> ESS does provide command completion.  It's not sophisticated
    JT> enough (as far as I can tell) to provide context-specific
    JT> completion.
    >> One issue here is (for ESS) is the mechanism for discovery.
    >> Duncan, Brian, et al, is there anyway to "discover" arguments
    >> in R, like you can do for methods in Java/Python, etc?  (I'm
    >> thinking there was, but can't seem to recall the exact function
    >> name, args()?)

    PD> One thing I remember from the Borland products was the very
    PD> simple mechanism of pressing a hotkey to get help on the
    PD> function call you were in the process of writing.

    PD> That kind of thing would seem to be fairly easy to implement
    PD> in ESS, (now don't tell me it does so already...) e.g. user
    PD> types

    PD> hist(x,

    PD> then realizes that he forgot how to set break values, hits
    PD> C-F1 (say), and the minibuffer says

    PD> help on [hist]:

    PD> press return and get the synopsis of hist in other-window,
    PD> with a "more..." entry to get you the rest of the help page
    PD> (or maybe just give the whole help page right away).

Emacs does this for emacs-lisp, so....

(anyway, I've got a preliminary version of what John A. suggested --
it brings up the results of "args" in a separate buffer.  Just need to
format, etc, so that it'll be a "fill in the blanks".  
        M-x ess-dump-args-and-go  
in the next version of ESS).

The other paradigm that would be nice would be like what PSGML mode
does for XML/SGML/HTML -- C-c C-a brings up a window for the tag
attributes.   This might be more like what John wants, where you can
use [tab] to move between fields, and defaults are specified.    For
this, I'd need a much better discovery mechanism than args().

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
UW Biostat/Center for AIDS Research	rossini at u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini at scharp.org
-------- (friday is unknown) --------
FHCRC: M--W : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy
CFAR:  ??   : 206-731-3647 (fax=3694)|Email is far better than phone
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rossini at blindglobe.net  Sat Feb 17 14:06:18 2001
From: rossini at blindglobe.net (A.J. Rossini)
Date: 17 Feb 2001 05:06:18 -0800
Subject: [R] Code completion
In-Reply-To: <x2r90x32dq.fsf@blueberry.kubism.ku.dk>
References: <200102161709.MAA136012@odds.stat.purdue.edu>
	<Pine.GSO.4.31.0102162000130.301-100000@toucan.stats>
	<3A8ED600.15074.6153A22@localhost>
	<20010218000938.A5477@camille.indigoindustrial.co.nz>
	<87ae7l7dk6.fsf@jeeves.blindglobe.net>
	<x2r90x32dq.fsf@blueberry.kubism.ku.dk>
Message-ID: <87wvap5uid.fsf@jeeves.blindglobe.net>

>>>>> "PD" == Peter Dalgaard <BSA <p.dalgaard at pubhealth.ku.dk>> writes:

    PD> One thing I remember from the Borland products was the very
    PD> simple mechanism of pressing a hotkey to get help on the
    PD> function call you were in the process of writing.

    PD> That kind of thing would seem to be fairly easy to implement
    PD> in ESS, (now don't tell me it does so already...) e.g. user
    PD> types

    PD> hist(x,

    PD> then realizes that he forgot how to set break values, hits
    PD> C-F1 (say), and the minibuffer says

Actually,  C-c C-v at that point will ask if you want help on hist,
and give it to you in the other window... 

But it's still not quite a "fill-in-the-blanks" template.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
UW Biostat/Center for AIDS Research	rossini at u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini at scharp.org
-------- (friday is unknown) --------
FHCRC: M--W : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy
CFAR:  ??   : 206-731-3647 (fax=3694)|Email is far better than phone
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Feb 17 15:05:31 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 17 Feb 2001 14:05:31 +0000 (GMT)
Subject: [R] Code completion
In-Reply-To: <87ae7l7dk6.fsf@jeeves.blindglobe.net>
Message-ID: <Pine.GSO.4.31.0102171403480.15764-100000@auk.stats>

On 17 Feb 2001, A.J. Rossini wrote:

> >>>>> "JT" == Jason Turner <jasont at indigoindustrial.co.nz> writes:
>
>     JT> ESS does provide command completion.  It's not sophisticated
>     JT> enough (as far as I can tell) to provide context-specific
>     JT> completion.
>
> One issue here is (for ESS) is the mechanism for discovery.  Duncan,
> Brian, et al, is there anyway to "discover" arguments in R, like you
> can do for methods in Java/Python, etc?  (I'm thinking there was, but
> can't seem to recall the exact function name, args()?)

args() indeed, *but* R functions are polymorphic in the sense that
different methods can take different argument sequences, so often
you discover `x, ...' for the generic.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Feb 17 15:33:12 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 17 Feb 2001 14:33:12 +0000 (GMT)
Subject: [R] Code completion
In-Reply-To: <8766i97chh.fsf@jeeves.blindglobe.net>
Message-ID: <Pine.GSO.4.31.0102171418580.15764-100000@auk.stats>

Tony: whatever did you do to make the Reply-to the Cc: list and not you?


On 17 Feb 2001, A.J. Rossini wrote:

> >>>>> "YG" == Yves Gauvreau <cyg at sympatico.ca> writes:
>
>
>     YG> [snip]
>     >> There will be no further Windows-specific development of R
>     >> unless the user community contributes it.  Remember R is a
>     >> volunteer project, and (a) none of the core developers use
>     >> Windows for their own work and (b) we do use R regularly.
>     YG> [snip]
>
>     YG> Would you be so kind as to explain a bit further the meaning
>     YG> of the first phrase? Especially in terms of what are the
>     YG> implications for the future of R on the Windows platform.
>
> I'm sure it just means that there won't be many changes that are
> specific to only the windows platform.  (windows help files, and
> similar, come to mind).

That's what it means, yes.  Windows-specific things (the help mechanisms,
the graphics device, the console, ...) are thought to be adequate for the
orginal intention, of having a version of R on Windows that works as
similarly as possible to that on Unix.  There are lots of Windows
mechanisms we don't have (drag-and-drop, DDE, OLE, reading Excel files,
...) and if Windows users want them, they are welcome to contribute them.

I intend to spend far less time on the Windows port of R in future.
If R developments can be ported easily to Windows, they will be.  On the
other hand, it has been discouraging to find that things that work
correctly on my NT4 box do not do so on Win2K, or some Win98 boxes, ...,
so `easily' is hard to gauge.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bcooke at gpu.srv.ualberta.ca  Sat Feb 17 16:28:02 2001
From: bcooke at gpu.srv.ualberta.ca (Barry Cooke)
Date: Sat, 17 Feb 2001 08:28:02 -0700 (MST)
Subject: Krebs for R (was Re: [R] canonical correspondence analysis)
Message-ID: <Pine.A41.4.10.10102170822370.31212-100000@gpu5.srv.ualberta.ca>

R-ecologists:

Anyone wanting to create a Krebs package for R can do so using the
C-source code avalaible at:

ftp://gause.biology.ualberta.ca/pub/jbrzusto/krebs/source.zip

Barry J. Cooke                      Current mailing address:
Ph.D. Candidate                     3971 NW 23 Circle 
Environmental Biology and Ecology   Gainesville, Florida, USA 
Department of Biological Sciences   32605 
University of Alberta
Edmonton, AB, T6G 2E9               http://www.ualberta.ca/~bcooke 
bcooke at ualberta.ca

---------- Forwarded message ----------
Date: Sat, 17 Feb 2001 11:18 +0000 (GMT)
From: Graham Smith <myotis at cix.compulink.co.uk>
To: R-help at stat.math.ethz.ch
Cc: myotis at cix.compulink.co.uk
Subject: Re: [R] canonical correspondence analysis

In-Reply-To: <Pine.GSO.4.31.0102170733280.13118-100000 at auk.stats>

Brian,

As an ecologist, this is something I am also interested in. However, as 
I am more an ecologist than a statistician, I quote from the MVSP 
manual:

"Canonical Correspondence Analysis(CCA;   ter Braak, 1986,1987) is a 
multivariate direct gradient analysis method that has become widely 
used in ecology. As the name suggests, this method is derived from 
correspondence  analysis, but has been modified to allow environmental 
data to be incorporated into the analysis. It is calculated using 
reciprocal averaging form of correspondence analysis. However, at each 
cycle of the averaging process, a multiple regression is performed of 
the sample scores on the environmental variables. New site scores are 
calculated based on this regression, and then the process is repeated , 
continuing until the scores stabilise. The result  is that the axes of 
the final ordination, rather than simply reflecting dimensions of the 
greatest variability in the species data, are restricted to the linear 
combinations of the environmental variables and the species data. In 
this way these two sets of data are then directly related."

Ref 1: ter Braak, CJF (1986) Canonical correspondence analysis: A new 
eigenfactor technique for multivariate direct gradient analysis. 
Ecology, 67:1167-1179

Ref 2: ter Braak, CJF (1987) The analysis of vegetation-environment 
relationships by canonical correspondence analysis. Vegetatio, 64:69-77

More general references are:

Jongman, RHG., Ter Braak, CJF., and,  van Tongeren, OFR. (1995) Data 
analysis in community and landscape ecology. CUP.

Kent, M. & Coker, P. (1992) Vegetation description and analysis: A 
practical approach. Wiley.

As far as I am aware, only MVSP and Canoco carry out CCA.

I hope this is of some interest and it does raise the general point 
that programming literate  ecologists don't seem to have yet fully 
embraced S-Plus or R. Having only recently found S-Plus and R myself I 
had rather hoped that some of the common ecological statistical tools 
such as CCA, Twinspan and Decorana, plus the miscellaneous tools 
described in Krebs (1989) might have found there way into an R package.

Krebs, CJ (1989) Ecological Methodology, Harper & Row. Now as a 2nd 
edition 1995?)

Cheers,

Graham S


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Kurt.Hornik at ci.tuwien.ac.at  Sat Feb 17 17:01:25 2001
From: Kurt.Hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 17 Feb 2001 17:01:25 +0100
Subject: [R] Updated introductory text
In-Reply-To: <x21yt0q9s9.fsf@blueberry.kubism.ku.dk>
References: <sSYDcAA$G+i6Ewkk@myatt.demon.co.uk>
	<x21yt0q9s9.fsf@blueberry.kubism.ku.dk>
Message-ID: <14990.41045.487921.881061@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> Mark Myatt <mark at myatt.demon.co.uk> writes:
>> I have updated my practical introduction to using R to analyse
>> epidemiological data for the March 2001 Computer Software in
>> Epidemiology course at the Nordic School of Public Health to include a
>> short section on object orientation. You can get this from:
>> 
>> http://www.myatt.demon.co.uk
>> 
>> As a ZIP file containing MS Word '95 (DOC) and Adobe Acrobat v4.xx (PDF)
>> version of the document as well as the sample data files used in the
>> exercises.
>> 
>> I place this material in the public domain. Feel free to make use of it
>> as you will.

> Hey, this looks nice. I especially like the banquet data for logistic
> regression. I suggest that we put it on CRAN, although probably
> separate the .pdf and .doc files so they can be viewed directly.
> Could you add a couple of words about the level of the intended
> audience.

> A bunch of minor corrections (non-exhaustive, just what caught my eye.
> PDF page numbers)

> p2:  (Exc.3) general*ized* linear models
> p7:  ctest is automatically loaded nowadays
> p33: Bill Venables misspelled in "S programming" entry

Yes, that looks *VERY NICE*, and I think we should definitely put this
on CRAN.  [I also like the banquet data ... the conclusion is that the
lattice was bad?]

I have three remarks.

* Technically one should refer to R add-ons as *packages* (and not as
  *libraries*).

* I'd prefer only putting up the .pdf file.

* Re scripts and data, one option is to the same as for Jim's ``Data
  Analysis and Graphics Using R'' who makes these available via his home
  page, and CRAN has a link to this.  Alternatively, we could set up a
  place in CRAN which holds ``packages'' which are really data and
  scripts and perhaps some extra code to be used along with docs.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From myotis at cix.compulink.co.uk  Sat Feb 17 17:45:00 2001
From: myotis at cix.compulink.co.uk (Graham Smith)
Date: Sat, 17 Feb 2001 16:45 +0000 (GMT)
Subject: [R] canonical correspondence analysis
Message-ID: <memo.312575@cix.compulink.co.uk>

In-Reply-To: <Pine.A41.4.10.10102170759570.18132-100000 at gpu2.srv.ualberta.ca>

Barry,

> If there is widespread interest in implementing Krebs as an R package,
> this shouldn't be too much work.

I'm not sure about wide spread interest, but as newcomer to the R/S fold 
I was struck that there were several  biologists/ecologists who were 
obviously very experienced users of R. As ecologists do tend to use some 
procedures that are not main stream, and not commonly found in 
statistical programs, I thought that some of these might have made it 
into a R package.

I would thought that the availability of a "Krebs package" or an 
"Ecology package" would have actually encouraged people to use R. 

I do know of someone who is currently looking for the equivalent of the 
negbinom but not limited to 180 samples. Would that restriction remain 
if ported to R.

My remarks were more of a general nature as R seems to lend itself, to 
those with the skills, to pull together the miscellany of ecological 
data analysis tools into a single program. 

So although, there may not be a widespread demand for a Krebs package, 
I'm sure you would gather a fair number of grateful users.

Cheers,

Graham S
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dmurdoch at pair.com  Sat Feb 17 18:35:07 2001
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Sat, 17 Feb 2001 12:35:07 -0500
Subject: [R] Code completion
In-Reply-To: <3A8ED600.15074.6153A22@localhost>
References: <200102161709.MAA136012@odds.stat.purdue.edu> <Pine.GSO.4.31.0102162000130.301-100000@toucan.stats> <3A8ED600.15074.6153A22@localhost>
Message-ID: <dbct8tc07b55kg3kra3miu2qihbf2mh6ud@4ax.com>

On Sat, 17 Feb 2001 19:50:24 +1100, you wrote:

>Some form of "code completion" might be of assistance to users like me .. 

I'm also a Delphi user, and I agree that what you're asking for would
be useful.  Last summer I spent a little time starting to write a
Delphi-based IDE for R, with the long-term aim being code completion,
etc.  I figured it would end up being portable to Linux at least,
since Borland had announced plans for a Linux version of Delphi (which
will be available later this month, by the way).

However, it's not at all an easy task.  From what I could see, R is
written to be in control of things; really what you need is for the
IDE to be in control, and R to act as a server.  The IDE needs to be
able to say things like "give me a string which represents how this
expression would be printed", or "show me the help file on this
token", or "show me a selection of help topics that might be
appropriate to this token", or "execute this expression".  Instead, as
far as I could see, the user interface operates by providing callback
functions to get user input and to print results, all under the
sequential control of some internal R loop. 

Presumably a server interface could be made (I think there's an R OCX
component, for example),  but it would take a pretty substantial
amount of work, and would have to be tied into the core code pretty
closely.  New R versions come out pretty frequently, and I would guess
that the internals change enough to break external code like an IDE.

If the IDE were written in Delphi (or anything else other than C),
things would be even worse, because you'd have to worry about header
translations with each new release.  On the other hand, while C does
have numerous good features, and is almost certainly the best choice
for the R source, writing the event driven object oriented code that
an IDE needs is not one of its strengths.  And I wouldn't expect a lot
of support from the R core team in writing it:  they don't use Delphi,
and they don't use Windows.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Sat Feb 17 19:02:59 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Sat, 17 Feb 2001 10:02:59 -0800 (PST)
Subject: [R] Code completion
In-Reply-To: <dbct8tc07b55kg3kra3miu2qihbf2mh6ud@4ax.com>
Message-ID: <Pine.A41.4.33.0102170954300.123816-100000@homer06.u.washington.edu>

On Sat, 17 Feb 2001, Duncan Murdoch wrote:

> On Sat, 17 Feb 2001 19:50:24 +1100, you wrote:
>
> >Some form of "code completion" might be of assistance to users like me ..
>
> I'm also a Delphi user, and I agree that what you're asking for would
> be useful.  Last summer I spent a little time starting to write a
> Delphi-based IDE for R, with the long-term aim being code completion,
> etc.  I figured it would end up being portable to Linux at least,
> since Borland had announced plans for a Linux version of Delphi (which
> will be available later this month, by the way).
>
> However, it's not at all an easy task.  From what I could see, R is
> written to be in control of things; really what you need is for the
> IDE to be in control, and R to act as a server.  The IDE needs to be
> able to say things like "give me a string which represents how this
> expression would be printed", or "show me the help file on this
> token", or "show me a selection of help topics that might be
> appropriate to this token", or "execute this expression".  Instead, as
> far as I could see, the user interface operates by providing callback
> functions to get user input and to print results, all under the
> sequential control of some internal R loop.

I agree it wouldn't be easy, but couldn't it be done more or less the way
ESS does?  That is, have a pipe to a copy of R and send commands and read
output through the pipe.  As Duncan Temple Lang keeps pointing out it
would be a bit of a pain to parse the output (and easier if we could get
it all in XML, use CORBA, &c, &c), but you would be parsing fairly
restricted output.

One really useful thing for both this and ESS that we don't have in
interpreted code is a way to return the name of the method that would be
invoked on an object. This would make it possible to do the args() lookup
for the right method:  args(WhichMethod(hist,x)) or
help(WhichMethod(hist,x)).

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From myotis at cix.compulink.co.uk  Sat Feb 17 19:13:00 2001
From: myotis at cix.compulink.co.uk (Graham Smith)
Date: Sat, 17 Feb 2001 18:13 +0000 (GMT)
Subject: Krebs for R (was [R] canonical correspondence analysis)
Message-ID: <memo.313756@cix.compulink.co.uk>

In-Reply-To: <Pine.A41.4.10.10102170822370.31212-100000 at gpu5.srv.ualberta.ca>

Barry,

If anyone follows up on this I would be interested in the outcome. I 
simply don't have the skills to take advantage of the source code being 
available.

Cheers,

Graham S



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From myotis at cix.compulink.co.uk  Sat Feb 17 19:16:00 2001
From: myotis at cix.compulink.co.uk (Graham Smith)
Date: Sat, 17 Feb 2001 18:16 +0000 (GMT)
Subject: Krebs for R (was [R] canonical correspondence analysis)
Message-ID: <memo.313800@cix.compulink.co.uk>

In-Reply-To: <Pine.A41.4.10.10102170822370.31212-100000 at gpu5.srv.ualberta.ca>

Barry,

If anyone follows up on this I would be interested in the outcome. I 
simply don't have the skills to take advantage of the source code being 
available.

Cheers,

Graham S



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From myotis at cix.compulink.co.uk  Sun Feb 18 01:39:00 2001
From: myotis at cix.compulink.co.uk (Graham Smith)
Date: Sun, 18 Feb 2001 00:39 +0000 (GMT)
Subject: [R] canonical correspondence analysis
Message-ID: <memo.318768@cix.compulink.co.uk>

In-Reply-To: <5.0.0.25.1.20010218094827.03c8d080 at pop.jcu.edu.au>

Richard,

>Brian McArdle and students at Auckland University are working on this 
>(i.e. a general ecological stats module for R).

That is good news, I look forward to it. I will be particularly 
interested  to see the "hallowed" techniques that don't make it. 

Thanks, for passing this on, it will spur me on to keep learning "R".

Cheers,

Graham S

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jaitchis at lisp.com.au  Sun Feb 18 03:27:05 2001
From: jaitchis at lisp.com.au (John Aitchison)
Date: Sun, 18 Feb 2001 13:27:05 +1100
Subject: [R] confused about names() 
Message-ID: <3A8FCDA9.4330.1056873@localhost>


Hi all .. there is no doubt a simple answer to this, but it eludes me.

In the first session below ( with jarque.bera.test)  you will see that 
p.value prints with a name of X-squared .

This is easily fixed by changing the source to assign a 
more appropriate name - no name is assigned in the source listing
below (the original source code of jarque.bera.test() from tseries).. but 
what I don't understand is how this (the name of X-squared) has arisen.

In the second session (with Box.test from ts) , p.value prints without
a name as I would expect .. the code looks superficially similar to me, so
obviously I am missing something.

wait a minute  .. names seem to be inherited!  yes. so this is really
more likely a minor glitch in jarque.bera.test due to assigning
    names(STATISTIC) <- "X-squared"
too early, or omitting to assign a name to PVAL

I think I have it now.

thanks 

> 
> jbt<-jarque.bera.test(rnorm(1000))
> jbt$statistic
X-squared 
 1.575782 
> jbt$p.value
X-squared 
0.4548029 
> jbt

         Jarque Bera Test 

data:  rnorm(1000) 
X-squared = 1.5758, df = 2, p-value = 0.4548 

> jarque.bera.test
function (x) 
{
    if (NCOL(x) > 1) 
        stop("x is not a vector or univariate time series")
    if (any(is.na(x))) 
        stop("NAs in x")
    DNAME <- deparse(substitute(x))
    n <- length(x)
    m1 <- sum(x)/n
    m2 <- sum((x - m1)^2)/n
    m3 <- sum((x - m1)^3)/n
    m4 <- sum((x - m1)^4)/n
    b1 <- (m3/m2^(3/2))^2
    b2 <- (m4/m2^2)
    STATISTIC <- n * b1/6 + n * (b2 - 3)^2/24
    names(STATISTIC) <- "X-squared"
    PARAMETER <- 2
    names(PARAMETER) <- "df"
    PVAL <- 1 - pchisq(STATISTIC, df = 2)
    METHOD <- "Jarque Bera Test"
    structure(list(statistic = STATISTIC, parameter = PARAMETER, 
        p.value = PVAL, method = METHOD, data.name = DNAME), 
        class = "htest")
}



================ Box.test session ======================= 
> 
> jbox<-Box.test(rnorm(1000))
> jbox$statistic
X-squared 
 3.609782 
> jbox$p.value
[1] 0.05744064
> jbox

         Box-Pierce test 

data:  rnorm(1000) 
X-squared = 3.6098, df = 1, p-value = 0.05744 

> Box.test
function (x, lag = 1, type = c("Box-Pierce", "Ljung-Box")) 
{
    if (NCOL(x) > 1) 
        stop("x is not a vector or univariate time series")
    DNAME <- deparse(substitute(x))
    type <- match.arg(type)
    cor <- acf(x, lag.max = lag, plot = FALSE)
    n <- length(x)
    PARAMETER <- lag
    obs <- cor$acf[2:(lag + 1)]
    if (type == "Box-Pierce") {
        METHOD <- "Box-Pierce test"
        STATISTIC <- n * sum(obs^2)
        PVAL <- 1 - pchisq(STATISTIC, lag)
    }
    else {
        METHOD <- "Box-Ljung test"
        STATISTIC <- n * (n + 2) * sum(1/seq(n - 1, n - lag) * 
            obs^2)
        PVAL <- 1 - pchisq(STATISTIC, lag)
    }
    names(STATISTIC) <- "X-squared"
    names(PARAMETER) <- "df"
    structure(list(statistic = STATISTIC, parameter = PARAMETER, 
        p.value = PVAL, method = METHOD, data.name = DNAME), 
        class = "htest")
}
> 

================== version info

> R.Version()
$platform
[1] "i386-pc-mingw32"

$arch
[1] "x86"

$os
[1] "Win32"

$system
[1] "x86, Win32"

$status
[1] ""

$major
[1] "1"

$minor
[1] "2.1"

$year
[1] "2001"

$month
[1] "01"

$day
[1] "15"

$language
[1] "R"


John Aitchison
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From valiere at biomserv.univ-lyon1.fr  Sun Feb 18 11:11:05 2001
From: valiere at biomserv.univ-lyon1.fr (VALIERE Nathaniel)
Date: Sun, 18 Feb 2001 11:11:05 +0100
Subject: No subject
Message-ID: <3.0.6.32.20010218111105.0079e990@biomserv.univ-lyon1.fr>

Hi,

How can we use the command BATCH (or where could I find help), there is not
enough help in the help command.
	-what the structure of infile ?
	-what can we do with BATCH ?
	-Is it possible to analyse with the same stat method many file or dataset ?

thanks in advance
N.VALIERE
************************************************

VALIERE Nathaniel
Laboratoire Biom?trie et Biologie Evolutive
UMR5558
43, boulevard du 11 Novembre 1918
F69622 VILLEURBANNE Cedex
FRANCE

************************************************
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Kurt.Hornik at ci.tuwien.ac.at  Sun Feb 18 11:28:02 2001
From: Kurt.Hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 18 Feb 2001 11:28:02 +0100
Subject: [R] confused about names() 
In-Reply-To: <3A8FCDA9.4330.1056873@localhost>
References: <3A8FCDA9.4330.1056873@localhost>
Message-ID: <14991.41906.565192.339552@mithrandir.hornik.net>

>>>>> John Aitchison writes:

> Hi all .. there is no doubt a simple answer to this, but it eludes me.

> In the first session below ( with jarque.bera.test)  you will see that 
> p.value prints with a name of X-squared .

> This is easily fixed by changing the source to assign a 
> more appropriate name - no name is assigned in the source listing
> below (the original source code of jarque.bera.test() from tseries).. but 
> what I don't understand is how this (the name of X-squared) has arisen.

> In the second session (with Box.test from ts) , p.value prints without
> a name as I would expect .. the code looks superficially similar to me, so
> obviously I am missing something.

> wait a minute  .. names seem to be inherited!  yes. so this is really
> more likely a minor glitch in jarque.bera.test due to assigning
>     names(STATISTIC) <- "X-squared"
> too early, or omitting to assign a name to PVAL

Interesting.  I think most of the ctest functions will actually come up
with a names attribute of the test statistic as eventually we do
	PVAL <- psomething(STATISTIC, PARAMS, ...)

For htest output this is not a problem because print.htest() actually
uses format.pval() for printing which gets rid of the names attribute.

The question is whether we think that this is a bug.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sun Feb 18 11:51:07 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 18 Feb 2001 10:51:07 +0000 (GMT)
Subject: [R] Re: your mail
In-Reply-To: <3.0.6.32.20010218111105.0079e990@biomserv.univ-lyon1.fr>
Message-ID: <Pine.GSO.4.31.0102181045300.2115-100000@toucan.stats>

On Sun, 18 Feb 2001, VALIERE Nathaniel wrote:

> Hi,
>
> How can we use the command BATCH (or where could I find help), there is not
> enough help in the help command.
> 	-what the structure of infile ?
> 	-what can we do with BATCH ?
> 	-Is it possible to analyse with the same stat method many file or dataset ?

You will need to tell us the version and platform of R you are using ...

If you mean R CMD BATCH (Unix/Linux) or Rcmd BATCH (Windows), infile be
any file of R commands, such as you type at the command prompt, and you
can do everything that does not need interaction from the user.

> -Is it possible to analyse with the same stat method many file or dataset

Yes.

If you want to find out more, look in Venables & Ripley's S Programming
(2000), for example.  If there is not enough help in ?BATCH then I suspect
the problem is not with the help page but with your preconceptions.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bwheeler at echip.com  Sun Feb 18 22:26:30 2001
From: bwheeler at echip.com (Bob Wheeler)
Date: Sun, 18 Feb 2001 16:26:30 -0500
Subject: [R] Rcmd
Message-ID: <3A903E06.C51A6CE4@echip.com>

I'm running Windows NT4. Rcmd does not seen to
read the command line. Rterm and other things work
well. For example "Rcmd check --help" fails with
the command interpreter trying to find a program
or file called "check." What have I missed?

-- 
Bob Wheeler --- (Reply to: bwheeler at echip.com)
        ECHIP, Inc.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From znmeb at aracnet.com  Sun Feb 18 23:49:28 2001
From: znmeb at aracnet.com (M. Edward Borasky)
Date: Sun, 18 Feb 2001 14:49:28 -0800
Subject: [R] Rcmd
In-Reply-To: <3A903E06.C51A6CE4@echip.com>
Message-ID: <HBEHIIBBKKNOBLMPKCBBEEMKDCAA.znmeb@aracnet.com>

What path settings do you have? Go to "Start -> Settings -> Control Panel ->
System" and select the "Advanced" tab (This is on Windows 2000; it might be
somewhere else on NT 4.0 -- my memory of NT 4.0 is a little dim after a year
with Win2K :-) Then select "Environment Variables". There are two, one for
"All Users" and one for whatever user you happen to be logged on as when you
do this. If you're a stand-alone user on a workstation, you'll probably want
to do it for "All Users", but if you're a user on a networked workstation,
you might need to get someone with Administrator privileges to do this for
you.

In any case, the variable you want to change is "path". Select "path" and
hit the "Edit" button. You will need to add whatever folder "check" resides
in to that path variable. Go to the end of the string and add a *semi-colon*
followed by the folder where "check" resides. Then hit the "OK" button,
which will save the new "path". Then hit "OK" to close out the next window
you get. You will get one more window; hit "OK" again.

If you're doing the "Rcmd" in a Command Prompt window, you will need to
close that window and open a new one to get the new definition of the
environment variable. As a check, type "set | more" in the Command Prompt
window. You will see the current definition of the "path" variable along
with all other variables that are defined.
--
Ed Borasky
http://www.aracnet.com/~znmeb
mailto:znmeb at aracnet.com

Q: What phrase will you never hear Candice Bergen use?
A: "My daddy didn't raise no dummies".

> -----Original Message-----
> From: owner-r-help at stat.math.ethz.ch
> [mailto:owner-r-help at stat.math.ethz.ch]On Behalf Of Bob Wheeler
> Sent: Sunday, February 18, 2001 1:27 PM
> To: R help
> Subject: [R] Rcmd
>
>
> I'm running Windows NT4. Rcmd does not seen to
> read the command line. Rterm and other things work
> well. For example "Rcmd check --help" fails with
> the command interpreter trying to find a program
> or file called "check." What have I missed?
>
> --
> Bob Wheeler --- (Reply to: bwheeler at echip.com)
>         ECHIP, Inc.
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-help mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._
>
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bwheeler at echip.com  Mon Feb 19 00:48:40 2001
From: bwheeler at echip.com (Bob Wheeler)
Date: Sun, 18 Feb 2001 18:48:40 -0500
Subject: [R] Rcmd
References: <HBEHIIBBKKNOBLMPKCBBEEMKDCAA.znmeb@aracnet.com>
Message-ID: <3A905F58.EC8EEF97@echip.com>

How do I say this politely? Thanks, for your
thought, but it isn't that simple.

The executable Rcmd.exe is not reading its command
line. I have no problem accessing it -- it just
isn't working the way I expect. I don't think its
my setup since other programs, such as Rgui take
command line input properly.

"M. Edward Borasky" wrote:
> 
> What path settings do you have? Go to "Start -> Settings -> Control Panel ->
> System" and select the "Advanced" tab (This is on Windows 2000; it might be
> somewhere else on NT 4.0 -- my memory of NT 4.0 is a little dim after a year
> with Win2K :-) Then select "Environment Variables". There are two, one for
> "All Users" and one for whatever user you happen to be logged on as when you
> do this. If you're a stand-alone user on a workstation, you'll probably want
> to do it for "All Users", but if you're a user on a networked workstation,
> you might need to get someone with Administrator privileges to do this for
> you.
> 
> In any case, the variable you want to change is "path". Select "path" and
> hit the "Edit" button. You will need to add whatever folder "check" resides
> in to that path variable. Go to the end of the string and add a *semi-colon*
> followed by the folder where "check" resides. Then hit the "OK" button,
> which will save the new "path". Then hit "OK" to close out the next window
> you get. You will get one more window; hit "OK" again.
> 
> If you're doing the "Rcmd" in a Command Prompt window, you will need to
> close that window and open a new one to get the new definition of the
> environment variable. As a check, type "set | more" in the Command Prompt
> window. You will see the current definition of the "path" variable along
> with all other variables that are defined.
> --
> Ed Borasky
> http://www.aracnet.com/~znmeb
> mailto:znmeb at aracnet.com
> 
> Q: What phrase will you never hear Candice Bergen use?
> A: "My daddy didn't raise no dummies".
> 
> > -----Original Message-----
> > From: owner-r-help at stat.math.ethz.ch
> > [mailto:owner-r-help at stat.math.ethz.ch]On Behalf Of Bob Wheeler
> > Sent: Sunday, February 18, 2001 1:27 PM
> > To: R help
> > Subject: [R] Rcmd
> >
> >
> > I'm running Windows NT4. Rcmd does not seen to
> > read the command line. Rterm and other things work
> > well. For example "Rcmd check --help" fails with
> > the command interpreter trying to find a program
> > or file called "check." What have I missed?
> >
> > --
> > Bob Wheeler --- (Reply to: bwheeler at echip.com)
> >         ECHIP, Inc.
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-.-.-.-.-.-
> > r-help mailing list -- Read
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._._._._._._
> >
> >

-- 
Bob Wheeler --- (Reply to: bwheeler at echip.com)
        ECHIP, Inc. --- (302) 239-6620, voice and
FAX
           724 Yorklyn Rd., Hockessin, DE 19707
              Randomness comes in bunches
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cyg at sympatico.ca  Mon Feb 19 02:45:12 2001
From: cyg at sympatico.ca (Yves Gauvreau)
Date: Sun, 18 Feb 2001 20:45:12 -0500
Subject: [R] Rcmd
In-Reply-To: <3A905F58.EC8EEF97@echip.com>
Message-ID: <NEBBJKDJHEFCOOLFFAKKGEPGCAAA.cyg@sympatico.ca>

If you have R version 1.2.0 then there is a problem with Rcmd for that
version.

If you have R version 1.2.1 then I would ask did you install Perl. The sub
command SHLIB, CHECK, ... are in fact Perl script and Rcmd passes this sub
command to perl amoung other things.

Yves Gauvreau
B.E.F.P. Universite du Quebec a Montreal
cyg at sympatico.ca

> -----Message d'origine-----
> De : owner-r-help at stat.math.ethz.ch
> [mailto:owner-r-help at stat.math.ethz.ch]De la part de Bob Wheeler
> Envoye : Sunday, February 18, 2001 6:49 PM
> A : M. Edward Borasky
> Cc : R help
> Objet : Re: [R] Rcmd
>
>
> How do I say this politely? Thanks, for your
> thought, but it isn't that simple.
>
> The executable Rcmd.exe is not reading its command
> line. I have no problem accessing it -- it just
> isn't working the way I expect. I don't think its
> my setup since other programs, such as Rgui take
> command line input properly.
>
> "M. Edward Borasky" wrote:
> >
> > What path settings do you have? Go to "Start -> Settings ->
> Control Panel ->
> > System" and select the "Advanced" tab (This is on Windows 2000;
> it might be
> > somewhere else on NT 4.0 -- my memory of NT 4.0 is a little dim
> after a year
> > with Win2K :-) Then select "Environment Variables". There are
> two, one for
> > "All Users" and one for whatever user you happen to be logged
> on as when you
> > do this. If you're a stand-alone user on a workstation, you'll
> probably want
> > to do it for "All Users", but if you're a user on a networked
> workstation,
> > you might need to get someone with Administrator privileges to
> do this for
> > you.
> >
> > In any case, the variable you want to change is "path". Select
> "path" and
> > hit the "Edit" button. You will need to add whatever folder
> "check" resides
> > in to that path variable. Go to the end of the string and add a
> *semi-colon*
> > followed by the folder where "check" resides. Then hit the "OK" button,
> > which will save the new "path". Then hit "OK" to close out the
> next window
> > you get. You will get one more window; hit "OK" again.
> >
> > If you're doing the "Rcmd" in a Command Prompt window, you will need to
> > close that window and open a new one to get the new definition of the
> > environment variable. As a check, type "set | more" in the
> Command Prompt
> > window. You will see the current definition of the "path" variable along
> > with all other variables that are defined.
> > --
> > Ed Borasky
> > http://www.aracnet.com/~znmeb
> > mailto:znmeb at aracnet.com
> >
> > Q: What phrase will you never hear Candice Bergen use?
> > A: "My daddy didn't raise no dummies".
> >
> > > -----Original Message-----
> > > From: owner-r-help at stat.math.ethz.ch
> > > [mailto:owner-r-help at stat.math.ethz.ch]On Behalf Of Bob Wheeler
> > > Sent: Sunday, February 18, 2001 1:27 PM
> > > To: R help
> > > Subject: [R] Rcmd
> > >
> > >
> > > I'm running Windows NT4. Rcmd does not seen to
> > > read the command line. Rterm and other things work
> > > well. For example "Rcmd check --help" fails with
> > > the command interpreter trying to find a program
> > > or file called "check." What have I missed?
> > >
> > > --
> > > Bob Wheeler --- (Reply to: bwheeler at echip.com)
> > >         ECHIP, Inc.
> > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > > -.-.-.-.-.-.-
> > > r-help mailing list -- Read
> > > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To:
> r-help-request at stat.math.ethz.ch
> > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > > _._._._._._._
> > >
> > >
>
> --
> Bob Wheeler --- (Reply to: bwheeler at echip.com)
>         ECHIP, Inc. --- (302) 239-6620, voice and
> FAX
>            724 Yorklyn Rd., Hockessin, DE 19707
>               Randomness comes in bunches
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From znmeb at aracnet.com  Mon Feb 19 03:10:11 2001
From: znmeb at aracnet.com (M. Edward Borasky)
Date: Sun, 18 Feb 2001 18:10:11 -0800
Subject: [R] Rcmd
In-Reply-To: <NEBBJKDJHEFCOOLFFAKKGEPGCAAA.cyg@sympatico.ca>
Message-ID: <HBEHIIBBKKNOBLMPKCBBIEMNDCAA.znmeb@aracnet.com>

I had ActiveState Perl 6.20 on my machine when I loaded R (now at 1.2.1).
Does R for Windows carry another version of Perl, or do parts of R (like
Rcmd) not work if you don't have your own Perl installed?

--
Ed Borasky
http://www.aracnet.com/~znmeb
mailto:znmeb at aracnet.com

Q: What phrase will you never hear Candice Bergen use?
A: "My daddy didn't raise no dummies".

> -----Original Message-----
> From: Yves Gauvreau [mailto:cyg at sympatico.ca]
> Sent: Sunday, February 18, 2001 5:45 PM
> To: Bob Wheeler; M. Edward Borasky
> Cc: R help
> Subject: RE: [R] Rcmd
>
>
> If you have R version 1.2.0 then there is a problem with Rcmd for that
> version.
>
> If you have R version 1.2.1 then I would ask did you install Perl. The sub
> command SHLIB, CHECK, ... are in fact Perl script and Rcmd passes this sub
> command to perl amoung other things.
>
> Yves Gauvreau
> B.E.F.P. Universite du Quebec a Montreal
> cyg at sympatico.ca

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cyg at sympatico.ca  Mon Feb 19 03:21:32 2001
From: cyg at sympatico.ca (Yves Gauvreau)
Date: Sun, 18 Feb 2001 21:21:32 -0500
Subject: [R] Rcmd
In-Reply-To: <HBEHIIBBKKNOBLMPKCBBIEMNDCAA.znmeb@aracnet.com>
Message-ID: <NEBBJKDJHEFCOOLFFAKKMEPGCAAA.cyg@sympatico.ca>

I have Active State version 6.23 and I only used SHLIB which works fine for
me. I don't wath else to say but maybe you should try the latest version!

Yves Gauvreau
B.E.F.P. Universite du Quebec a Montreal
cyg at sympatico.ca

> -----Message d'origine-----
> De : M. Edward Borasky [mailto:znmeb at aracnet.com]
> Envoye : Sunday, February 18, 2001 9:10 PM
> A : R help
> Cc : Bob Wheeler; Yves Gauvreau
> Objet : RE: [R] Rcmd
>
>
> I had ActiveState Perl 6.20 on my machine when I loaded R (now at 1.2.1).
> Does R for Windows carry another version of Perl, or do parts of R (like
> Rcmd) not work if you don't have your own Perl installed?
>
> --
> Ed Borasky
> http://www.aracnet.com/~znmeb
> mailto:znmeb at aracnet.com
>
> Q: What phrase will you never hear Candice Bergen use?
> A: "My daddy didn't raise no dummies".
>
> > -----Original Message-----
> > From: Yves Gauvreau [mailto:cyg at sympatico.ca]
> > Sent: Sunday, February 18, 2001 5:45 PM
> > To: Bob Wheeler; M. Edward Borasky
> > Cc: R help
> > Subject: RE: [R] Rcmd
> >
> >
> > If you have R version 1.2.0 then there is a problem with Rcmd for that
> > version.
> >
> > If you have R version 1.2.1 then I would ask did you install
> Perl. The sub
> > command SHLIB, CHECK, ... are in fact Perl script and Rcmd
> passes this sub
> > command to perl amoung other things.
> >
> > Yves Gauvreau
> > B.E.F.P. Universite du Quebec a Montreal
> > cyg at sympatico.ca
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From amorgan at linus.mitre.org  Mon Feb 19 05:16:30 2001
From: amorgan at linus.mitre.org (Alexander A. Morgan)
Date: Sun, 18 Feb 2001 23:16:30 -0500 (EST)
Subject: [R] Re: your mail
In-Reply-To: <3.0.6.32.20010218111105.0079e990@biomserv.univ-lyon1.fr>
Message-ID: <Pine.GSO.4.21.0102181159560.5316-100000@linus.mitre.org>

The infile has the structure of a set of commands given to R (like a shell
script).   You can use your .Rhistory file as a template (that is
something I do).  If you are using BATCH, one way to get it to process a
data file given as a argument is to use the commandArgs() function (@ARGV
from Perl basically).   Another thing that might be useful to you is
.Rprofile which is a local file, when you call R in its directory it
excecutes first (it also basically an 'R script').  Again, another nice
way of generating an .Rprofile is just to run your R session, saving your
history to .Rhistory.

On Sun, 18 Feb 2001, VALIERE Nathaniel wrote:

> Hi,
> 
> How can we use the command BATCH (or where could I find help), there is not
> enough help in the help command.
> 	-what the structure of infile ?
> 	-what can we do with BATCH ?
> 	-Is it possible to analyse with the same stat method many file or dataset ?
> 
> thanks in advance
> N.VALIERE
> ************************************************
> 
> VALIERE Nathaniel
> Laboratoire Biométrie et Biologie Evolutive
> UMR5558
> 43, boulevard du 11 Novembre 1918
> F69622 VILLEURBANNE Cedex
> FRANCE
> 
> ************************************************
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-Alex Morgan

Phone: 781-271-6306                       "They laughed at Newton.
Office: 3K-136                            They laughed at Einstein.
AOL Instant Messenger: HomeySage          But they also laughed at Groucho
                                          Marx."
                                                      --Carl Sagan

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bwheeler at echip.com  Mon Feb 19 05:29:04 2001
From: bwheeler at echip.com (Bob Wheeler)
Date: Sun, 18 Feb 2001 23:29:04 -0500
Subject: [R] Rcmd
References: <HBEHIIBBKKNOBLMPKCBBIEMNDCAA.znmeb@aracnet.com>
Message-ID: <3A90A110.DE482B6D@echip.com>

Thanks for all the help. It is appreciated.

As you indicated, Rcmd needs the name of a Perl
script on the command line. Windows' users
normally do not keep Perl on their machines. It's
no problem. I have ActiveState Perl on a CD, and
only need to install it. 

R for Windows has the required scripts, but
installing Perl is up to the user. Would that they
had told me -- but who can write documentation
that meets all needs, not me certainly.


"M. Edward Borasky" wrote:
> 
> I had ActiveState Perl 6.20 on my machine when I loaded R (now at 1.2.1).
> Does R for Windows carry another version of Perl, or do parts of R (like
> Rcmd) not work if you don't have your own Perl installed?
> 


-- 
Bob Wheeler --- (Reply to: bwheeler at echip.com)
        ECHIP, Inc.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From John.Strumila at team.telstra.com  Mon Feb 19 01:46:23 2001
From: John.Strumila at team.telstra.com (Strumila, John)
Date: Mon, 19 Feb 2001 11:46:23 +1100
Subject: [R] ghostscript errors
Message-ID: <61411576E951D211AF330008C7245DD90819DA7F@ntmsg0005.corpmail.telstra.com.au>

gday R friends,

Since I had random errors with ghostscript 6.01 I thought I'd upgrade.
After upgrading to gs6.5 I've had problems. Originally, gs failed
complaining about lack of "__sysconf" in glibc2.2 so I upgraded glibc. Now I
get this. Note that it used to work with gs6.01. 

I realise this is probably a ghostscript problem but you never know...

thanks,
John Strumila

> plot(hc, hang=-1)
Error: /invalidfont in findfont 
Operand stack: 
Helvetica Font Helvetica 236274 Helvetica --nostringval-- Courier
NimbusMonL-Regu (NimbusMonL-Regu) NimbusMonL-Regu (NimbusMonL-Regu)
NimbusMonL-Regu 
Execution stack: 
> %interp_exit .runexec2 --nostringval-- --nostringval-- --nostringval-- 2
%stopped_push --nostringval-- --nostringval-- --nostringval-- false 1
%stopped_push 1 3 %oparray_pop 1 3 %oparray_pop .runexec2 --nostringval--
--nostringval-- --nostringval-- 2 %stopped_push --nostringval-- 1 3
%oparray_pop 2 3 %oparray_pop --nostringval-- --nostringval--
--nostringval-- --nostringval-- --nostringval-- false 1 %stopped_push 5 4
%oparray_pop --nostringval-- --nostringval-- --nostringval-- 5 -1 1
--nostringval-- %for_neg_int_continue --nostringval-- --nostringval-- 
Dictionary stack: 
--dict:988/1476(ro)(G)-- --dict:0/20(G)-- --dict:90/200(L)--
--dict:17/17(ro)(G)-- --dict:988/1476(ro)(G)-- 
Current allocation mode is local 
Last OS error: 2 
AFPL Ghostscript 6.50: Unrecoverable error, exit code 1 
version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    1.0              
year     2000             
month    June             
day      15               
language R                
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From John.Strumila at team.telstra.com  Mon Feb 19 06:24:28 2001
From: John.Strumila at team.telstra.com (Strumila, John)
Date: Mon, 19 Feb 2001 16:24:28 +1100
Subject: [R] RE: ghostscript errors
Message-ID: <61411576E951D211AF330008C7245DD90819DAD9@ntmsg0005.corpmail.telstra.com.au>

Well, my fault as usual...

I didn't have an environment variable setup to point to the 'type1' fonts.
It looks like the old gs version probably had a hard coding for the font
path, but when I upgraded the fonts were put somewhere else.

thanks,
John Strumila

> -----Original Message-----
> From: Strumila, John 
> Sent: Monday, 19 February 2001 11:49 AM
> To: R help
> Subject: ghostscript errors
> 
> 
> gday R friends,
> 
> Since I had random errors with ghostscript 6.01 I thought I'd 
> upgrade.  After upgrading to gs6.5 I've had problems. 
> Originally, gs failed complaining about lack of "__sysconf" 
> in glibc2.2 so I upgraded glibc. Now I get this. Note that it 
> used to work with gs6.01. 
> 
> I realise this is probably a ghostscript problem but you never know...
> 
> thanks,
> John Strumila
> 
> > plot(hc, hang=-1)
> Error: /invalidfont in findfont 
> Operand stack: 
> Helvetica Font Helvetica 236274 Helvetica --nostringval-- 
> Courier NimbusMonL-Regu (NimbusMonL-Regu) NimbusMonL-Regu 
> (NimbusMonL-Regu) NimbusMonL-Regu 
> Execution stack: 
> > %interp_exit .runexec2 --nostringval-- --nostringval-- 
> --nostringval-- 2 %stopped_push --nostringval-- 
> --nostringval-- --nostringval-- false 1 %stopped_push 1 3 
> %oparray_pop 1 3 %oparray_pop .runexec2 --nostringval-- 
> --nostringval-- --nostringval-- 2 %stopped_push 
> --nostringval-- 1 3 %oparray_pop 2 3 %oparray_pop 
> --nostringval-- --nostringval-- --nostringval-- 
> --nostringval-- --nostringval-- false 1 %stopped_push 5 4 
> %oparray_pop --nostringval-- --nostringval-- --nostringval-- 
> 5 -1 1 --nostringval-- %for_neg_int_continue --nostringval-- 
> --nostringval-- 
> Dictionary stack: 
> --dict:988/1476(ro)(G)-- --dict:0/20(G)-- --dict:90/200(L)-- 
> --dict:17/17(ro)(G)-- --dict:988/1476(ro)(G)-- 
> Current allocation mode is local 
> Last OS error: 2 
> AFPL Ghostscript 6.50: Unrecoverable error, exit code 1 
> version
>          _                
> platform i686-pc-linux-gnu
> arch     i686             
> os       linux-gnu        
> system   i686, linux-gnu  
> status                    
> major    1                
> minor    1.0              
> year     2000             
> month    June             
> day      15               
> language R                
> > 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Feb 19 08:16:38 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 19 Feb 2001 07:16:38 +0000 (GMT)
Subject: [R] Rcmd
In-Reply-To: <3A90A110.DE482B6D@echip.com>
Message-ID: <Pine.GSO.4.31.0102190711030.26442-100000@auk.stats>

On Sun, 18 Feb 2001, Bob Wheeler wrote:

> Thanks for all the help. It is appreciated.
>
> As you indicated, Rcmd needs the name of a Perl
> script on the command line. Windows' users
> normally do not keep Perl on their machines. It's
> no problem. I have ActiveState Perl on a CD, and
> only need to install it.
>
> R for Windows has the required scripts, but
> installing Perl is up to the user. Would that they
> had told me -- but who can write documentation
> that meets all needs, not me certainly.

`They' did write documentation that told you that Perl was needed, but
`they' can't read it for you.  (See the files INSTALL and readme.packages
....)  Rcmd.exe and those scripts are in rw1021sp.zip, and readme.packages
is its README file.

For the record, Rcmd is a front end to more than just Perl scripts, for
example sh scripts.

This sort of response just discourages porting tools to Windows.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jaitchis at lisp.com.au  Mon Feb 19 09:22:55 2001
From: jaitchis at lisp.com.au (John Aitchison)
Date: Mon, 19 Feb 2001 19:22:55 +1100
Subject: [R] "locking" functions
Message-ID: <3A91728F.26846.EC3D89@localhost>



Hi .. another newbie question .. is it possible to "lock" a function
(or indeed any object), making it read-only until "unlocked"?

For example, should I inadvertently (or through sheer stupidity <g> ) 
override the definition of t

> t
function (x) 
UseMethod("t")

with
> t <- function(x){min(x)}

R raises no objection and uses this new version happily enough, as in

> t3
function(x){min(x)}
> t<-t3
> fred <- function(z){ t(z) }
> x<-1:10; dim(x)<-c(2,5); x
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    3    5    7    9
[2,]    2    4    6    8   10
> fred(x)
[1] 1

( I am guessing that I can still get at the original t somehow ? a sys 
function but I am not full bottle yet on environments and scoping)

Ending the session and saving the workspace works ok, 
and on restarting I get a message

Error in min(..., na.rm = na.rm) : invalid "mode" of argument

which is hopefully a clue that I have done something wrong, although it 
may not be immediately obvious just what..  

I am not sure of what is happening here .. R has loaded base by this time, 
presumably, and is comparing function headers in .Rdata with those in 
base?? or the other way around?


If I define a function (or any object) with a name which conflicts with 
that of an object in a package and I THEN load the package (or should I 
say library) with library(whatever) then .warn.conflicts kicks in and I 
get 
"
The following object(s) are masked _by_ .GlobalEnv :
"
so that is cool .. the problem (if you can describe it as such) comes with 
redefinition of a library function (and particularly base) AFTER the 
library is loaded. 

The t example above is obviously contrived and the need to override 
function and object definitions at will is understood, but I wonder if 
there is any language feature that can protect against accidental 
overrides. 

If not, is it worth considering an option for library? - in the spirit of 
warn.conflicts - say warn.redefinitions  ?? hmm, I guess the architectural 
implications would be significant, and it might be something that would 
need to be looked at at the class/object level. 

Perhaps a limited version of protection for builtins could be a start... 
there are ~ 1350 of them and it is a little hard to remember them all.


fwiw, thanks for any enlightment, and please no flames about me 
'suggesting' something that I am not willing to do myself.. working with 
the core of R would be way beyond my competence



oh, almost forgot

$platform
[1] "i386-pc-mingw32"
$arch
[1] "x86"
$os
[1] "Win32"
$system
[1] "x86, Win32"
$status
[1] ""
$major
[1] "1"
$minor
[1] "2.1"
$year
[1] "2001"
$month
[1] "01"
$day
[1] "15"
$language
[1] "R"

John Aitchison
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jaitchis at lisp.com.au  Mon Feb 19 09:22:55 2001
From: jaitchis at lisp.com.au (John Aitchison)
Date: Mon, 19 Feb 2001 19:22:55 +1100
Subject: [R] self documenting workspaces, and the proper role of the dot
Message-ID: <3A91728F.20169.EC3E64@localhost>


again I ask for some suggestions : I don't mind being told to RTFM as long 
as I get a few hints as to where to look <g>

suppose I want to document the set of functions and vectors that I have in 
a workspace, and I would like to make that workspace 'self documenting' .. 
so I could open up that particular workspace in a few months and know what 
xdiff contained ..etc. Essentially I want a listing of objects and their 
'descriptions'.

I could write a function to list each object and its 'description' easily 
enough, but names() does not quite fit the bill. For a 'scalar' I can use 
names(), but for a vector names() wants every element named - I guess I 
could just use the name of the first element but this is a bit kludgy. For 
a function I don't see any way of using names(), but I guess I could 
be disciplined about this and have every function that is specific to the 
workspace return some descriptive string.

One possibility that occurred to me is to have some 'documentation' 
objects

eg fred.doc<-"this is function fred and it does whatever" 

and write a function to list these (or the names of scalars) ..I suppose 
that is OK , if a little inelegant.

So this is less of a technical question than a housekeeping/procedural one 
.. if someone has a nice solution or if there are some features of R that 
I have overlooked that could be of assistance, I would be very interested.


thanks

somewhat separate topic : the dot

I'd also appreciate it if someone could clarify for me the proper role of 
the dot. It appears there are no semantic/syntactic restrictions on its 
use, as in

> .fred<-1
> .fred
[1] 1
> .fred.fred<-1
> .fred.fred
[1] 1
> .fred.fred.fred.fred.fred<-1
> .fred.fred.fred.fred.fred
[1] 1
> ...fred<-1
> ...fred
[1] 1
> ...fred.............................fred<-1
> ...fred.............................fred
[1] 1
> fred...fred.............................fred<-1
> fred...fred.............................fred
[1] 1

or even ....<-1:10

but I suspect there are some conventions at work, with which I am not
au fait. For instance I have noted that in ls()  .prefixed objects can be 
ignored, by option. 

So is an initial dot intended to denote 'internal' (or 'working') in 
function names?

What about  p.value ? is there some reason for this, as opposed to pvalue 
?

In the oo languages with which I am most familar, dot is used to denote
hierarchy eg text.font.style  .. is there a similar intention at work 
here?



John Aitchison
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Feb 19 09:35:40 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 19 Feb 2001 08:35:40 +0000 (GMT)
Subject: [R] "locking" functions
In-Reply-To: <3A91728F.26846.EC3D89@localhost>
Message-ID: <Pine.GSO.4.31.0102190829260.7012-100000@toucan.stats>

The ability of override functions in R is an important part of its
extensibility.  We certainly don't want it disabled, and indeed the
packages may well be using it, unseen to you.

You *can* change the actual definitions of system functions, but you would
work hard to do it, and the changes would not be saved.  Much more often
they are masked by functions higher in the search path, e.g. in the user's
workspace.

I think you need to be aware of (and make use of) the function
`conflicts'.

Description:

     `conflicts' reports on objects that exist with the same name in
     two or more places on the `search' path, usually because an object
     in the global environment or a package is masking a system object
     of the same name.  This helps discover unintentional masking.



On Mon, 19 Feb 2001, John Aitchison wrote:

>
>
> Hi .. another newbie question .. is it possible to "lock" a function
> (or indeed any object), making it read-only until "unlocked"?
>
> For example, should I inadvertently (or through sheer stupidity <g> )
> override the definition of t
>
> > t
> function (x)
> UseMethod("t")
>
> with
> > t <- function(x){min(x)}
>
> R raises no objection and uses this new version happily enough, as in
>
> > t3
> function(x){min(x)}
> > t<-t3
> > fred <- function(z){ t(z) }
> > x<-1:10; dim(x)<-c(2,5); x
>      [,1] [,2] [,3] [,4] [,5]
> [1,]    1    3    5    7    9
> [2,]    2    4    6    8   10
> > fred(x)
> [1] 1
>
> ( I am guessing that I can still get at the original t somehow ? a sys
> function but I am not full bottle yet on environments and scoping)
>
> Ending the session and saving the workspace works ok,
> and on restarting I get a message
>
> Error in min(..., na.rm = na.rm) : invalid "mode" of argument
>
> which is hopefully a clue that I have done something wrong, although it
> may not be immediately obvious just what..
>
> I am not sure of what is happening here .. R has loaded base by this time,
> presumably, and is comparing function headers in .Rdata with those in
> base?? or the other way around?
>
>
> If I define a function (or any object) with a name which conflicts with
> that of an object in a package and I THEN load the package (or should I
> say library) with library(whatever) then .warn.conflicts kicks in and I
> get
> "
> The following object(s) are masked _by_ .GlobalEnv :
> "
> so that is cool .. the problem (if you can describe it as such) comes with
> redefinition of a library function (and particularly base) AFTER the
> library is loaded.
>
> The t example above is obviously contrived and the need to override
> function and object definitions at will is understood, but I wonder if
> there is any language feature that can protect against accidental
> overrides.
>
> If not, is it worth considering an option for library? - in the spirit of
> warn.conflicts - say warn.redefinitions  ?? hmm, I guess the architectural
> implications would be significant, and it might be something that would
> need to be looked at at the class/object level.
>
> Perhaps a limited version of protection for builtins could be a start...
> there are ~ 1350 of them and it is a little hard to remember them all.
>
>
> fwiw, thanks for any enlightment, and please no flames about me
> 'suggesting' something that I am not willing to do myself.. working with
> the core of R would be way beyond my competence
>
>
>
> oh, almost forgot
>
> $platform
> [1] "i386-pc-mingw32"
> $arch
> [1] "x86"
> $os
> [1] "Win32"
> $system
> [1] "x86, Win32"
> $status
> [1] ""
> $major
> [1] "1"
> $minor
> [1] "2.1"
> $year
> [1] "2001"
> $month
> [1] "01"
> $day
> [1] "15"
> $language
> [1] "R"
>
> John Aitchison
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cyg at sympatico.ca  Mon Feb 19 10:21:12 2001
From: cyg at sympatico.ca (Yves Gauvreau)
Date: Mon, 19 Feb 2001 04:21:12 -0500
Subject: [R] Rcmd
In-Reply-To: <Pine.GSO.4.31.0102190711030.26442-100000@auk.stats>
Message-ID: <NEBBJKDJHEFCOOLFFAKKGEPICAAA.cyg@sympatico.ca>



> -----Message d'origine-----
> De : owner-r-help at stat.math.ethz.ch
> [mailto:owner-r-help at stat.math.ethz.ch]De la part de Prof Brian D Ripley
> Envoye : Monday, February 19, 2001 2:17 AM
> A : Bob Wheeler
> Cc : R help
> Objet : Re: [R] Rcmd
>
>
> On Sun, 18 Feb 2001, Bob Wheeler wrote:
>
> > Thanks for all the help. It is appreciated.
> >
> > As you indicated, Rcmd needs the name of a Perl
> > script on the command line. Windows' users
> > normally do not keep Perl on their machines. It's
> > no problem. I have ActiveState Perl on a CD, and
> > only need to install it.
> >
> > R for Windows has the required scripts, but
> > installing Perl is up to the user. Would that they
> > had told me -- but who can write documentation
> > that meets all needs, not me certainly.
>
> `They' did write documentation that told you that Perl was needed, but
> `they' can't read it for you.  (See the files INSTALL and readme.packages
> ....)  Rcmd.exe and those scripts are in rw1021sp.zip, and readme.packages
> is its README file.
>
> For the record, Rcmd is a front end to more than just Perl scripts, for
> example sh scripts.
>
> This sort of response just discourages porting tools to Windows.

A famous man ounce said: "Let the one who as never sin trow the first stone"

Probably a poor translation.

Yves Gauvreau

>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dray at biomserv.univ-lyon1.fr  Mon Feb 19 10:28:40 2001
From: dray at biomserv.univ-lyon1.fr (Stephane Dray)
Date: Mon, 19 Feb 2001 10:28:40 +0100
Subject: [R] canonical correspondence analysis
Message-ID: <a05010403b6b6943e2bb8@[134.214.93.44]>

Canonical Correspondence Analysis is an ordination method widely used 
among ecologists (ter Braak). This method allow to analyze two tables 
(L and E) which have the same number of rows. It is a correspondence 
analysis of table L with linear constraint from E (multiple linear 
regression) : the row score are linear combination of variables of E. 
The columns scores are obtained by weighting averaging. CCA finds 
linear combination of external variables (E) to obtain a row score 
which maximizes the between-variance of columns score (obtained by 
averaging) . Ter Braak called it "canonical" correspondence analysis 
because it analyses two tables (like canonical analysis) but we 
preferred the more explicit name of correspondence analysis with 
respect to instrumental variables".
But .... in a theoretical point of view, CCA could be considered as a 
canonical correlation analysis (the same links as between 
correspondence analysis and canonical correlation analysis). I m just 
writing a R function to perform Correspondence analysis with or 
without linear contstraints (CA, CCA on row or column, Double CCA on 
rows and columns) and to make the graphical representation (bi or 
triplot).
I will be happy to communicate this function to anyone which is intersted in.

Sincerly,
-- 
St?phane DRAY
---------------------------------------------------------------
Biom?trie et Biologie ?volutive - Equipe "?cologie Statistique"
Universite Lyon 1 - Bat 711 - 69622 Villeurbanne CEDEX - France

Tel : 04 72 43 27 56			   Fax : 04 78 89 27 19
       04 72 43 27 57 	   E-mail : dray at biomserv.univ-lyon1.fr 
---------------------------------------------------------------
ADE-4               http://pbil.univ-lyon1.fr/ADE-4/ADE-4F.html
---------------------------------------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Feb 19 10:52:01 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 19 Feb 2001 09:52:01 +0000 (GMT)
Subject: [R] canonical correspondence analysis
Message-ID: <200102190952.JAA07163@toucan.stats.ox.ac.uk>


> Date: Mon, 19 Feb 2001 10:28:40 +0100
> To: r-help at stat.math.ethz.ch
> From: Stephane Dray <dray at biomserv.univ-lyon1.fr>
> Subject: Re: [R] canonical correspondence analysis
> 
> Canonical Correspondence Analysis is an ordination method widely used 
> among ecologists (ter Braak). This method allow to analyze two tables 
> (L and E) which have the same number of rows. It is a correspondence 
> analysis of table L with linear constraint from E (multiple linear 
> regression) : the row score are linear combination of variables of E. 
> The columns scores are obtained by weighting averaging. CCA finds 
> linear combination of external variables (E) to obtain a row score 
> which maximizes the between-variance of columns score (obtained by 
> averaging) . Ter Braak called it "canonical" correspondence analysis 
> because it analyses two tables (like canonical analysis) but we 
> preferred the more explicit name of correspondence analysis with 
> respect to instrumental variables".
> But .... in a theoretical point of view, CCA could be considered as a 
> canonical correlation analysis (the same links as between 
> correspondence analysis and canonical correlation analysis). I m just 
> writing a R function to perform Correspondence analysis with or 
> without linear contstraints (CA, CCA on row or column, Double CCA on 
> rows and columns) and to make the graphical representation (bi or 
> triplot).
> I will be happy to communicate this function to anyone which is intersted in.

Can we encourage you to submit it as a package to CRAN?   Sounds
as if a number of people would be interested.

Just one point: please avoid CCA, as it is unclear if it is

canonical correspondence analysis
canonical correlation analysis


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mark at myatt.demon.co.uk  Mon Feb 19 11:14:04 2001
From: mark at myatt.demon.co.uk (Mark Myatt)
Date: Mon, 19 Feb 2001 10:14:04 +0000
Subject: [R] Updated introductory text
In-Reply-To: <14990.41045.487921.881061@mithrandir.hornik.net>
References: <sSYDcAA$G+i6Ewkk@myatt.demon.co.uk>
 <x21yt0q9s9.fsf@blueberry.kubism.ku.dk>
 <14990.41045.487921.881061@mithrandir.hornik.net>
Message-ID: <qT6S8cAsHPk6Ewlb@myatt.demon.co.uk>

Kurt Hornik <Kurt.Hornik at ci.tuwien.ac.at> writes:
>>>>>> Peter Dalgaard BSA writes:
>
>> Mark Myatt <mark at myatt.demon.co.uk> writes:
>>> I have updated my practical introduction to using R to analyse
>>> epidemiological data for the March 2001 Computer Software in
>>> Epidemiology course at the Nordic School of Public Health to include a
>>> short section on object orientation. You can get this from:
>>> 
>>> http://www.myatt.demon.co.uk
>>> 
>>> As a ZIP file containing MS Word '95 (DOC) and Adobe Acrobat v4.xx (PDF)
>>> version of the document as well as the sample data files used in the
>>> exercises.
>>> 
>>> I place this material in the public domain. Feel free to make use of it
>>> as you will.
>
>> Hey, this looks nice. I especially like the banquet data for logistic
>> regression. I suggest that we put it on CRAN, although probably
>> separate the .pdf and .doc files so they can be viewed directly.
>> Could you add a couple of words about the level of the intended
>> audience.
>
>> A bunch of minor corrections (non-exhaustive, just what caught my eye.
>> PDF page numbers)
>
>> p2:  (Exc.3) general*ized* linear models
>> p7:  ctest is automatically loaded nowadays
>> p33: Bill Venables misspelled in "S programming" entry
>
>Yes, that looks *VERY NICE*, and I think we should definitely put this
>on CRAN.  [I also like the banquet data ... the conclusion is that the
>lattice was bad?]
>
>I have three remarks.
>
>* Technically one should refer to R add-ons as *packages* (and not as
>  *libraries*).
>
>* I'd prefer only putting up the .pdf file.
>
>* Re scripts and data, one option is to the same as for Jim's ``Data
>  Analysis and Graphics Using R'' who makes these available via his home
>  page, and CRAN has a link to this.  Alternatively, we could set up a
>  place in CRAN which holds ``packages'' which are really data and
>  scripts and perhaps some extra code to be used along with docs.
>
>-k

Thanks. I will fix it up as you suggest and post a message to the list
when a new version is available.

Mark


--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mark at myatt.demon.co.uk  Mon Feb 19 11:12:01 2001
From: mark at myatt.demon.co.uk (Mark Myatt)
Date: Mon, 19 Feb 2001 10:12:01 +0000
Subject: [R] Updated introductory text
In-Reply-To: <x21yt0q9s9.fsf@blueberry.kubism.ku.dk>
References: <sSYDcAA$G+i6Ewkk@myatt.demon.co.uk>
 <x21yt0q9s9.fsf@blueberry.kubism.ku.dk>
Message-ID: <qD9SIVAxFPk6Ewkj@myatt.demon.co.uk>

Peter Dalgaard BSA <p.dalgaard at pubhealth.ku.dk> writes:
>Mark Myatt <mark at myatt.demon.co.uk> writes:
>
>> I have updated my practical introduction to using R to analyse
>> epidemiological data for the March 2001 Computer Software in
>> Epidemiology course at the Nordic School of Public Health to include a
>> short section on object orientation. You can get this from:
>> 
>>         http://www.myatt.demon.co.uk
>> 
>> As a ZIP file containing MS Word '95 (DOC) and Adobe Acrobat v4.xx (PDF)
>> version of the document as well as the sample data files used in the
>> exercises.
>> 
>> I place this material in the public domain. Feel free to make use of it
>> as you will.
>
>Hey, this looks nice. I especially like the banquet data for logistic
>regression. I suggest that we put it on CRAN, although probably
>separate the .pdf and .doc files so they can be viewed directly.
>Could you add a couple of words about the level of the intended
>audience.
>
>A bunch of minor corrections (non-exhaustive, just what caught my eye.
>PDF page numbers)
>
>p2:  (Exc.3) general*ized* linear models
>p7:  ctest is automatically loaded nowadays
>p33: Bill Venables misspelled in "S programming" entry 

Thanks. I will fix it up and post a message to the list when I have a
new version available.

Mark

--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From baron at cattell.psych.upenn.edu  Mon Feb 19 11:31:20 2001
From: baron at cattell.psych.upenn.edu (Jonathan Baron)
Date: Mon, 19 Feb 2001 05:31:20 -0500 (EST)
Subject: [R] self documenting workspaces, and the proper role of the dot
Message-ID: <200102191031.FAA29178@cattell.psych.upenn.edu>

The way I solve the problem of documentation is to write a
"program" (or "script") for everything, and include comments in
it (as outlined at the beginning of "Notes on the use of R for
psychology experiments..." in the "Contributed" section of CRAN).
The script has as many comments as I care to write (never
enough).  Then I run the script with "source()".  I do have to
copy, or "copy and paste", new ideas that I think up along the
way.  But the ratio of good ideas to bad ones is quite low, so I
would certainly not want to save everything I do, automatically.

This is roughtly the style used in the examples included with R.

Others in this list have recommended ESS for similar purposes
(Emacs Speaks Statistics), but I haven't tried it (for fear of
confusion, since I use Emacs for everything else).

As for dots, I don't know.  But it does seem that they are just
another character, in contrast to _, which is not.  They do not
have the meaning that they have in Perl or JavaScript.


Jonathan Baron, Professor of Psychology, University of Pennsylvania
Home page: http://www.sas.upenn.edu/~jbaron
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cyg at sympatico.ca  Mon Feb 19 11:41:34 2001
From: cyg at sympatico.ca (Yves Gauvreau)
Date: Mon, 19 Feb 2001 05:41:34 -0500
Subject: [R] Rcmd
In-Reply-To: <200102190947.JAA07159@toucan.stats.ox.ac.uk>
Message-ID: <NEBBJKDJHEFCOOLFFAKKKEPJCAAA.cyg@sympatico.ca>



> -----Message d'origine-----
> De : Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
> Envoye : Monday, February 19, 2001 4:48 AM
> A : cyg at sympatico.ca
> Objet : RE: [R] Rcmd
>
>
>
> > From: "Yves Gauvreau" <cyg at sympatico.ca>
> > To: "Prof Brian D Ripley" <ripley at stats.ox.ac.uk>
> > >

> This sort of response just discourages porting tools to Windows.

If you call this a statement of fact then we have a big problem. I think not
only it's incisive, it's offensive and yes I take it personally as a Windows
user and yes it's not the first time I see this coming from you.

But I don't want to start anything here, instead I would like to see the end
of it.

I think we and all other members of the list should avoid making comments
and state opinion about the world we live in and make our best effort to
honestly help each other. The rest we don't need. Isn't it the basic idea of
this help list.

I apologize to all.

Yves Gauvreau




> >
> > A famous man ounce said: "Let the one who as never sin trow the
> first stone"
> >
> > Probably a poor translation.
>
> And your point is?
>
> Mine was a statement of fact, not an accusation nor an opinion.  Are
> you disputing the fact?


>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Feb 19 11:59:58 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 19 Feb 2001 10:59:58 +0000 (GMT)
Subject: [R] Rcmd
Message-ID: <200102191059.KAA10665@toucan.stats.ox.ac.uk>


> From: "Yves Gauvreau" <cyg at sympatico.ca>
> To: "Prof Brian Ripley" <ripley at stats.ox.ac.uk>
> Cc: "R-help at lists. R-project. org" <R-help at stat.math.ethz.ch>

This was a public reply to a private email, a breach of copyright.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Hauke.Hildebrandt at iup.uni-heidelberg.de  Mon Feb 19 14:56:11 2001
From: Hauke.Hildebrandt at iup.uni-heidelberg.de (Hauke Hildebrandt)
Date: Mon, 19 Feb 2001 14:56:11 +0100
Subject: [R] Package installing
Message-ID: <3A9125FB.24B11B32@freitag.iup.uni-heidelberg.de>

Hi!

I have written a small package that consists just of some *.R source files

and the corresponding documentation (and nothing else). Building the package

using R CMD build works fine and produces a pkg.tar.gz file. But if I try to install

it (R INSTALL pkg), R tries to build a shared library and gcc doesn't find the required

source files (well, there aren't any):

Installing source package `ocean' ...
 libs
gcc -shared  -o ocean.so  -L/usr/local/lib
gcc: No input files
make: *** [ocean.so] Error 1
ERROR: Compilation failed for package `ocean'

What am I doing wrong??

Thanks in advance,

Hauke



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wsi at gcal.ac.uk  Mon Feb 19 15:22:38 2001
From: wsi at gcal.ac.uk (Bill Simpson)
Date: Mon, 19 Feb 2001 14:22:38 +0000 (GMT)
Subject: [R] problems sourcing in vs interactive
Message-ID: <Pine.LNX.4.10.10102191416060.1570-100000@localhost.localdomain>

If I source in the function (see below) calib(), I get:
> source("papers/helle/threshold.r")
> calib()
Error in eval(expr, envir, enclos) : Object "energy" not found

But if I cut and paste the code for calib() one line at a time into the R
window it works fine.

calib<-function()
{
contrast<-c(.01,.02,.0325,.055,.0775,.1,.125,.15,.175,.2)
energy<-c(3.53189e-5,.000141275,.000373056,.0010684,.00212134,.00353189,
.00551857,.00794675,.0108164,.0141275)
plot(contrast,energy)
fit<-nls(energy~a*contrast^2,start=list(a=.01))
contrastfit<-seq(min(contrast),max(contrast),length=40)
energyfit<-coef(fit)[[1]]*contrastfit^2
lines(spline(contrastfit,energyfit))
list(summary(fit))
#for these data, energy=.3532 * contrast^2 s deg^s
}

What is wrong and how to fix? The problem seems to originate in nls()
since the plot is produced OK: plot() can find the object "energy". I
think I have the nls() syntax right.

Thanks very much for any help.

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Mon Feb 19 15:54:52 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 19 Feb 2001 15:54:52 +0100
Subject: [R] problems sourcing in vs interactive
In-Reply-To: Bill Simpson's message of "Mon, 19 Feb 2001 14:22:38 +0000 (GMT)"
References: <Pine.LNX.4.10.10102191416060.1570-100000@localhost.localdomain>
Message-ID: <x27l2m4tab.fsf@blueberry.kubism.ku.dk>

Bill Simpson <wsi at gcal.ac.uk> writes:

> If I source in the function (see below) calib(), I get:
> > source("papers/helle/threshold.r")
> > calib()
> Error in eval(expr, envir, enclos) : Object "energy" not found
> 
> But if I cut and paste the code for calib() one line at a time into the R
> window it works fine.
> 
> calib<-function()
> {
> contrast<-c(.01,.02,.0325,.055,.0775,.1,.125,.15,.175,.2)
> energy<-c(3.53189e-5,.000141275,.000373056,.0010684,.00212134,.00353189,
> .00551857,.00794675,.0108164,.0141275)
> plot(contrast,energy)
> fit<-nls(energy~a*contrast^2,start=list(a=.01))
> contrastfit<-seq(min(contrast),max(contrast),length=40)
> energyfit<-coef(fit)[[1]]*contrastfit^2
> lines(spline(contrastfit,energyfit))
> list(summary(fit))
> #for these data, energy=.3532 * contrast^2 s deg^s
> }
> 
> What is wrong and how to fix? The problem seems to originate in nls()
> since the plot is produced OK: plot() can find the object "energy". I
> think I have the nls() syntax right.

That's a problem with functions vs. command line entry, source() never
gets into it.  It's the usual problem where a routine gets confused
about where it should get its variables from. Easiest way is to add an
explicit data= argument to the nls call:

fit<-nls(energy~a*contrast^2,start=list(a=.01),
   data=data.frame(contrast,energy))

[Surely you realize that that model is not really nonlinear at all?]

The default value for data= in nls() is list(), which gets in trouble
with

    varIndex <- sapply(varNames, function(varName, data, respLength) {
        length(eval(as.name(varName), data))%%respLength == 0
    }, data, length(eval(formula[[2]], data)))

since the eval(..., data) constructs will look in the list, then in
the *current* environment.

Defaulting to data=environment(formula) looks like it might work
better. Or maybe one should have eval(..., data, parent.frame()).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wsi at gcal.ac.uk  Mon Feb 19 16:58:52 2001
From: wsi at gcal.ac.uk (Bill Simpson)
Date: Mon, 19 Feb 2001 15:58:52 +0000 (GMT)
Subject: [R] problems sourcing in vs interactive
In-Reply-To: <x27l2m4tab.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10102191557150.1742-100000@localhost.localdomain>

Thanks a lot Peter for your help.

(Yes this example is not nonlinear, but sometimes I want to estimate the
exponent)

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Mon Feb 19 18:12:27 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 19 Feb 2001 09:12:27 -0800 (PST)
Subject: [R] self documenting workspaces, and the proper role of the dot
In-Reply-To: <3A91728F.20169.EC3E64@localhost>
Message-ID: <Pine.A41.4.33.0102190846030.137950-100000@homer31.u.washington.edu>

On Mon, 19 Feb 2001, John Aitchison wrote:

>
> again I ask for some suggestions : I don't mind being told to RTFM as long
> as I get a few hints as to where to look <g>
>
> suppose I want to document the set of functions and vectors that I have in
> a workspace, and I would like to make that workspace 'self documenting' ..
> so I could open up that particular workspace in a few months and know what
> xdiff contained ..etc. Essentially I want a listing of objects and their
> 'descriptions'.
>
> I could write a function to list each object and its 'description' easily
> enough, but names() does not quite fit the bill. For a 'scalar' I can use
> names(), but for a vector names() wants every element named - I guess I
> could just use the name of the first element but this is a bit kludgy. For
> a function I don't see any way of using names(), but I guess I could
> be disciplined about this and have every function that is specific to the
> workspace return some descriptive string.
>
> One possibility that occurred to me is to have some 'documentation'
> objects
>
> eg fred.doc<-"this is function fred and it does whatever"
>
> and write a function to list these (or the names of scalars) ..I suppose
> that is OK , if a little inelegant.
>
> So this is less of a technical question than a housekeeping/procedural one
> .. if someone has a nice solution or if there are some features of R that
> I have overlooked that could be of assistance, I would be very interested.


YOu could attach a "doc" attribute to everything. This has the
disadvantage that for objects with no special "print" method the attribute
would always be printed with the object.

attr(a,"doc")<-"A is for apple"

and you could write a function that listed objects and documentation using
something like
sapply(ls(),function(x) attr(x,"doc")



>
>
> thanks
>
> somewhat separate topic : the dot
>
> I'd also appreciate it if someone could clarify for me the proper role of
> the dot. It appears there are no semantic/syntactic restrictions on its
> use, as in
>
> > .fred<-1
> > .fred
> [1] 1
> > .fred.fred<-1
> > .fred.fred
> [1] 1
> > .fred.fred.fred.fred.fred<-1
> > .fred.fred.fred.fred.fred
> [1] 1
> > ...fred<-1
> > ...fred
> [1] 1
> > ...fred.............................fred<-1
> > ...fred.............................fred
> [1] 1
> > fred...fred.............................fred<-1
> > fred...fred.............................fred
> [1] 1
>
> or even ....<-1:10
>
> but I suspect there are some conventions at work, with which I am not
> au fait. For instance I have noted that in ls()  .prefixed objects can be
> ignored, by option.
>
> So is an initial dot intended to denote 'internal' (or 'working') in
> function names?
>
> What about  p.value ? is there some reason for this, as opposed to pvalue
> ?
>
> In the oo languages with which I am most familar, dot is used to denote
> hierarchy eg text.font.style  .. is there a similar intention at work
> here?


The dot is used in four different ways. It's almost always clear from
context which is intended.

1) Method separator
	print.default
	print.lm
	print.formula

are "print" methods for "default", "lm" and "formula"

2) Separating words: since the underscore can't be part of a variable name
we can separate words either by InternalCapitals
	NextMethod
	commandArgs
or by.dots
	data.frame
	lm.influence
	split.plot
	filled.contour
	p.value

3) As in Unix, we use a leading dot to hide global variables and functions
that people would be better off not knowing about.
	.packages
	.Options
	.Generic

4) The ellipsis ... is a special token used to represent extra function
arguments. These can be positionally matched by ..1, ..2

One of the complications in UseMethod/NextMethod is that dots can mean
more than one thing.  We need to know that as.data.frame.matrix is an
"as.data.frame" method for "matrix" arguments, but print.summary.lm.null
is a "print" method for "summary.lm.null" objects. If someone wrote a
function "as.data" with a method for objects of class "frame.matrix" we
would be in trouble, but it's no worse than what would happen if an
SAS ex-user wanted to write a function for the General Linear Model and
call it glm().


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Mon Feb 19 18:23:21 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 19 Feb 2001 18:23:21 +0100
Subject: [R] self documenting workspaces, and the proper role of the dot
In-Reply-To: Thomas Lumley's message of "Mon, 19 Feb 2001 09:12:27 -0800 (PST)"
References: <Pine.A41.4.33.0102190846030.137950-100000@homer31.u.washington.edu>
Message-ID: <x2puge37ue.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <tlumley at u.washington.edu> writes:

> YOu could attach a "doc" attribute to everything. This has the
> disadvantage that for objects with no special "print" method the attribute
> would always be printed with the object.
> 
> attr(a,"doc")<-"A is for apple"
> 
> and you could write a function that listed objects and documentation using
> something like
> sapply(ls(),function(x) attr(x,"doc")

Actually, once upon a time in the far East, Ross wrote comment(x) and
comment(x)<- to do just that. We're not very good at keeping them,
though - for instance, they don't survive a fix() of the object.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jasont at indigoindustrial.co.nz  Mon Feb 19 11:55:59 2001
From: jasont at indigoindustrial.co.nz (Jason Turner)
Date: Mon, 19 Feb 2001 23:55:59 +1300
Subject: [R] "locking" functions
In-Reply-To: <3A91728F.26846.EC3D89@localhost>; from jaitchis@lisp.com.au on Mon, Feb 19, 2001 at 07:22:55PM +1100
References: <3A91728F.26846.EC3D89@localhost>
Message-ID: <20010219235559.A1661@camille.indigoindustrial.co.nz>

> Hi .. another newbie question .. is it possible to "lock" a function
> (or indeed any object), making it read-only until "unlocked"?

I don't know.  But your example and further questions point to 
another answer.

> For example, should I inadvertently (or through sheer stupidity <g> ) 
> override the definition of t
> 
> > t
> function (x) 
> UseMethod("t")
[much stuff deleted]

The books "Modern Applied Statistics With S-Plus", and
"S Programming", both by Venables and Ripley, give a very good
treatment of this issue.

The short (and probably slightly flawed, but good enough) answer is that 
if you can understand how a search path works in an operating system, 
you can understand this.  Stuff you create is first on the search path. 
Next come the libraries you load, in the reverse order - the last library 
you loaded is the first searched (*after* the stuff you wrote yourself).

The order of the search path is shown with the "search()" command.
help(search).

For this reason, it's a pretty good idea to name your own functions
something distinctly yours:  my.t or ja.t are not bad.

> The t example above is obviously contrived and the need to override 
> function and object definitions at will is understood, but I wonder if 
> there is any language feature that can protect against accidental 
> overrides. 

Don't know.  I've assumed not; I'm not used to that sort of luxury, so 
it never occured to me to look for it ;-).  And it helps to remember
the programmer's mantra - "if it won't let you do the stupid things,
it won't let you do the clever things".  Sometimes, masking is deliberate,
and useful.

Most of the conflict you're describing seems pretty well serviced by 
the convention of picking names carefully, and sometimes adding the 
package name or initials to functions in the case of common names.

Cheers

Jason
-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont at indigoindustrial.co.nz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mac24 at humboldt.edu  Mon Feb 19 21:57:38 2001
From: mac24 at humboldt.edu (Michael Camann)
Date: Mon, 19 Feb 2001 12:57:38 -0800 (PST)
Subject: [R] canonical correspondence analysis
In-Reply-To: <memo.308506@cix.compulink.co.uk>
Message-ID: <200102192057.MAA28224@axe.humboldt.edu>

---Reply to mail from Graham Smith about [R] canonical correspondence analysis


> I hope this is of some interest and it does raise the general point 
> that programming literate  ecologists don't seem to have yet fully 
> embraced S-Plus or R. Having only recently found S-Plus and R myself I 
> had rather hoped that some of the common ecological statistical tools 
> such as CCA, Twinspan and Decorana, plus the miscellaneous tools 
> described in Krebs (1989) might have found there way into an R package.

This has been a general goal of mine for the last year or so.  I have
several working (but inelegant) R modules for analysing ecological
assemblage organization, but have not yet gotten around to implementing
some of the really useful multivariate stuff (ala' PC ORD) that is not in
R.  I'd like to discuss this further with interested ecologists, and of
course I'd be happy to share what I've already written.  I haven't
contributed it yet because it doesn't conform to R package standards.

I'm on sabbatical next year....

--Mike C.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Michael A. Camann                                  Voice: 707-826-3676
Assistant Professor of Zoology                       Fax: 707-826-3201
Institute for Forest Canopy Research     Email: mac24 at axe.humboldt.edu
Department of Biology                            ifcr at axe.humboldt.edu
Humboldt State University           
Arcata, CA 95521

                 URL:http://www.humboldt.edu/~mac24/
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From myotis at cix.compulink.co.uk  Mon Feb 19 23:42:00 2001
From: myotis at cix.compulink.co.uk (Graham Smith)
Date: Mon, 19 Feb 2001 22:42 +0000 (GMT)
Subject: [R] canonical correspondence analysis
Message-ID: <memo.363068@cix.compulink.co.uk>

In-Reply-To: <200102192057.MAA28224 at axe.humboldt.edu>

Michael,

> I haven't contributed it yet because it doesn't conform to R package 
> standards.


I suspect, that this might be the case with several people. That is 
those who can cobble together something good enough for their own use, 
but not up to the standard for general release. 

It will be interesting to see what Brian McArdle et al come up with. I 
am a long way off being able to develop any modules, but learning 
quickly.

Cheers,

Graham S
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From s.mcclatchie at niwa.cri.nz  Tue Feb 20 00:15:31 2001
From: s.mcclatchie at niwa.cri.nz (S.McClatchie)
Date: Tue, 20 Feb 2001 12:15:31 +1300
Subject: [R] means by column after split
Message-ID: <200102192315.f1JNFuQ85299@storm.niwa.cri.nz>

Colleagues

----------------------------------
System info:
R version rw1020 on NT
ESS using emacs ver. 20.4

----------------------------------

I need to get the means for each column of a dataframe in the list 
created by splitting a data frame. At present, I am getting the mean of all 
columns in aggregate.

The structure of the unsplit data is:

> shuttle.tr1[1:10,]
      juliandate       lat temp.degC
24892   305.9581 -43.18243  11.90729
24893   305.9581 -43.18258  11.90854
24894   305.9582 -43.18272  11.94356
24895   305.9582 -43.18286  11.95356
24896   305.9583 -43.18300  11.95544
24897   305.9583 -43.18315  11.97670
24898   305.9584 -43.18329  11.99171
24899   305.9584 -43.18343  11.99546
24900   305.9585 -43.18358  11.98546
24901   305.9585 -43.18372  11.98858

Now I split the data into 8 groups:

> fine <- 8
> fsh <- factor(cut(shuttle.tr1$juliandate, fine))
> b.shuttle.tr1 <- split.data.frame(shuttle.tr1, fsh)

Here's where i need help, in getting the mean by columns:

> b.shuttle.tr1 <-  data.frame(sapply(b.shuttle.tr1, mean))
> b.shuttle.tr1
                sapply.b.shuttle.tr1..mean.
(305.96,306.02]                    91.51870
(306.02,306.09]                    91.41042
(306.09,306.16]                    91.12872
(306.16,306.23]                    90.15020
(306.23,306.29]                    89.94670
(306.29,306.36]                    89.91251
(306.36,306.43]                    89.83651
(306.43,306.5]                     90.00933
> 

Help will be appreciated.
Thanks

Sam

Sam McClatchie, Research scientist (fisheries acoustics))))))))))
NIWA (National Institute of Water & Atmospheric Research Ltd)
PO Box 14 901, Kilbirnie, Wellington, New Zealand
s.mcclatchie at niwa.cri.nz 

                    /\
...>><xX(?> // \\
                 /// \\\   
                //// \\\\
               ///  <?)Xx><<
              /////  \\\\\\
        ><(((?>   
  >><(((?>   ...>><xX(?>O<?)Xx><<

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Kurt.Hornik at ci.tuwien.ac.at  Tue Feb 20 00:19:56 2001
From: Kurt.Hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 20 Feb 2001 00:19:56 +0100
Subject: [R] Package installing
In-Reply-To: <3A9125FB.24B11B32@freitag.iup.uni-heidelberg.de>
References: <3A9125FB.24B11B32@freitag.iup.uni-heidelberg.de>
Message-ID: <14993.43548.233509.15658@mithrandir.hornik.net>

>>>>> Hauke Hildebrandt writes:

> Hi!

> I have written a small package that consists just of some *.R source
> files

> and the corresponding documentation (and nothing else). Building the package

> using R CMD build works fine and produces a pkg.tar.gz file. But if I
> try to install

> it (R INSTALL pkg), R tries to build a shared library and gcc doesn't find the required

> source files (well, there aren't any):

> Installing source package `ocean' ...
>  libs
> gcc -shared  -o ocean.so  -L/usr/local/lib
> gcc: No input files
> make: *** [ocean.so] Error 1
> ERROR: Compilation failed for package `ocean'

> What am I doing wrong??

Do you have a `src' subdirectory?  Does this contain C or FORTRAN source
code?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jaitchis at lisp.com.au  Tue Feb 20 01:19:58 2001
From: jaitchis at lisp.com.au (John Aitchison)
Date: Tue, 20 Feb 2001 11:19:58 +1100
Subject: attr and comment - was Re: [R] self documenting workspaces 
In-Reply-To: <x2puge37ue.fsf@blueberry.kubism.ku.dk>
References: Thomas Lumley's message of "Mon, 19 Feb 2001 09:12:27 -0800 (PST)"
Message-ID: <3A9252DE.19895.94BFB3@localhost>


Hi

The suggestions below were to use attr()  and comment() ..
it seems from my tests that neither of these survive edit or fix , 
likewise attributes(). This is true of functions, but not of vectors.

---------------------------------
eg this works fine

> x<-1:10
> comment(x) <- 'this is a comment'
> attr(x,'creation')<-date()
> fix(x)
> x
[1]  1  9 10
attr(,"creation")
[1] "Mon Feb 19 23:55:55 2001"
> attributes(x)
$comment
[1] "this is a comment"
$creation
[1] "Mon Feb 19 23:55:55 2001"
----------------------------------------'
but this does not
 f<-function(x){attributes(x)}
> comment(f) <- 'function comment'
> attr(f,'creation')<-date()
> attributes(f)
$source
[1] "function(x){attributes(x)}"
$comment
[1] "function comment"
$creation
[1] "Tue Feb 20 00:00:15 2001"

> fix(f)
> attributes(f)
$source
[1] "function(x){print(attributes(x))" "}"                               
-------------------------------------------------------------

Is this a feature, a bug, an oversight? ??


It is easily 'fixed' apparently with

myfix<-function(f){s<-attributes(f);fix(f);attributes(f)<-s}

I cannot call myfix 'fix' here (ie override fix) because of infinite 
recursion .. what I am missing notation wise? (ie to call the 'ancestor'
of fix)

fix<-function(f){s<-attributes(f);base:fix(f);attributes(f)<-s} ? or 
somesuch

thanks again



On 19 Feb 2001, at 18:23, Peter Dalgaard BSA wrote:

> Thomas Lumley <tlumley at u.washington.edu> writes:
> 
> > YOu could attach a "doc" attribute to everything. This has the
> > disadvantage that for objects with no special "print" method the
> > attribute would always be printed with the object.
> > 
> > attr(a,"doc")<-"A is for apple"
> > 
> > and you could write a function that listed objects and documentation
> > using something like sapply(ls(),function(x) attr(x,"doc")
> 
> Actually, once upon a time in the far East, Ross wrote comment(x) and
> comment(x)<- to do just that. We're not very good at keeping them,
> though - for instance, they don't survive a fix() of the object.
> 

John Aitchison
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From znmeb at aracnet.com  Tue Feb 20 01:31:55 2001
From: znmeb at aracnet.com (M. Edward (Ed) Borasky)
Date: Mon, 19 Feb 2001 16:31:55 -0800 (PST)
Subject: [R] Holt-Winters code in R or S?
In-Reply-To: <200102192057.MAA28224@axe.humboldt.edu>
Message-ID: <Pine.LNX.4.31.0102191629130.2467-100000@shell1.aracnet.com>

Can someone point me to R (or S) code for Holt-Winters forecasting?
--
znmeb at aracnet.com (M. Edward Borasky) http://www.aracnet.com/~znmeb

Q. How do you tell when a pineapple is ready to eat?
A. It picks up its knife and fork.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jarioksa at cc.oulu.fi  Tue Feb 20 06:39:16 2001
From: jarioksa at cc.oulu.fi (Jari Oksanen)
Date: Tue, 20 Feb 2001 07:39:16 +0200
Subject: [R] canonical correspondence analysis 
In-Reply-To: Message from Michael Camann <mac24@humboldt.edu> 
   of "Mon, 19 Feb 2001 12:57:38 PST." <200102192057.MAA28224@axe.humboldt.edu>
Message-ID: <200102200539.HAA03024@pc112145.oulu.fi>


mac24 at humboldt.edu said:
> This has been a general goal of mine for the last year or so.  I have
> several working (but inelegant) R modules for analysing ecological
> assemblage organization, but have not yet gotten around to
> implementing some of the really useful multivariate stuff (ala' PC
> ORD) that is not in R.  I'd like to discuss this further with
> interested ecologists, and of course I'd be happy to share what I've
> already written.  I haven't contributed it yet because it doesn't
> conform to R package standards. 



I hope I qualify as an interested ecologist.  Perhaps the interested parties 
should form a working group to produce an ecology package (although 
competition and parallel packages are welcome as well)?  I have had plans, but 
not too much time, to write some community ecology pieces as well.  The R 
package standards aren't too difficult either: I have written one standard 
complying package for the ESA archives, and it is quite easy: the R 
documentation is good and there are some nice tools in R as well.

cheers, jari oksanen
-- 
Jari Oksanen -- Dept Biology, Univ Oulu, 90014 Oulu, Finland
Ph. +358 8 5531526 (job), mobile +358 40 5136529
email jari.oksanen at oulu.fi, homepage http://cc.oulu.fi/~jarioksa/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Feb 20 08:43:19 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 20 Feb 2001 07:43:19 +0000 (GMT)
Subject: [R] means by column after split
In-Reply-To: <200102192315.f1JNFuQ85299@storm.niwa.cri.nz>
Message-ID: <Pine.GSO.4.31.0102200732180.15461-100000@auk.stats>

On Tue, 20 Feb 2001, S.McClatchie wrote:

> Colleagues
>
> ----------------------------------
> System info:
> R version rw1020 on NT
> ESS using emacs ver. 20.4
>
> ----------------------------------
>
> I need to get the means for each column of a dataframe in the list
> created by splitting a data frame. At present, I am getting the mean of all
> columns in aggregate.
>
> The structure of the unsplit data is:
>
> > shuttle.tr1[1:10,]
>       juliandate       lat temp.degC
> 24892   305.9581 -43.18243  11.90729
> 24893   305.9581 -43.18258  11.90854
> 24894   305.9582 -43.18272  11.94356
> 24895   305.9582 -43.18286  11.95356
> 24896   305.9583 -43.18300  11.95544
> 24897   305.9583 -43.18315  11.97670
> 24898   305.9584 -43.18329  11.99171
> 24899   305.9584 -43.18343  11.99546
> 24900   305.9585 -43.18358  11.98546
> 24901   305.9585 -43.18372  11.98858
>
> Now I split the data into 8 groups:
>
> > fine <- 8
> > fsh <- factor(cut(shuttle.tr1$juliandate, fine))
> > b.shuttle.tr1 <- split.data.frame(shuttle.tr1, fsh)
>
> Here's where i need help, in getting the mean by columns:
>

Here b.shuttle.tr1 is a list of data frames.  You may find it easier to
use by(), BTW.  You don't want to apply mean to the data frame, but to
each column of it.  So something like

colmean <- function(x) sapply(x, mean)
by(shuttle.tr1, fsh, colmean)

should do what you want.


Let's try an example
data(iris)
by(iris[, -5], iris[, 5], colmean)
iris[, 5]: setosa
Sepal.Length  Sepal.Width Petal.Length  Petal.Width
       5.006        3.428        1.462        0.246
------------------------------------------------------------
iris[, 5]: versicolor
Sepal.Length  Sepal.Width Petal.Length  Petal.Width
       5.936        2.770        4.260        1.326
------------------------------------------------------------
iris[, 5]: virginica
Sepal.Length  Sepal.Width Petal.Length  Petal.Width
       6.588        2.974        5.552        2.026

zz <- by(iris[, -5], iris[, 5], colmean)
matrix(unlist(zz), 3, 4, byrow=T, dimnames=list(names(zz), names(zz[[1]])))
           Sepal.Length Sepal.Width Petal.Length Petal.Width
setosa            5.006       3.428        1.462       0.246
versicolor        5.936       2.770        4.260       1.326
virginica         6.588       2.974        5.552       2.026


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fzoellne at TechFak.Uni-Bielefeld.DE  Tue Feb 20 09:40:26 2001
From: fzoellne at TechFak.Uni-Bielefeld.DE (Frank Gerrit Zoellner)
Date: Tue, 20 Feb 2001 09:40:26 +0100
Subject: [R] tcltk: testing for widgets?
Message-ID: <20010220094026.A6577@puccini.TechFak.Uni-Bielefeld.DE>

Hallo!

I want to test if a widget exists. Using Perl/Tk i can call the function tkexists(). How can I realise this function with R/tclTk ?

Thanks
-- 
Frank Gerrit Zoellner


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wsi at gcal.ac.uk  Tue Feb 20 10:04:29 2001
From: wsi at gcal.ac.uk (Bill Simpson)
Date: Tue, 20 Feb 2001 09:04:29 +0000 (GMT)
Subject: [R] wait for user input
Message-ID: <Pine.LNX.4.10.10102200857500.2514-100000@localhost.localdomain>

I want to display a series of plots:

display plot 1
wait for user input (keypress or mouse click)
display plot 2
etc

How to do it? Thanks for any help.
(I have been using locator().)

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Feb 20 10:20:09 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 20 Feb 2001 09:20:09 +0000 (GMT)
Subject: [R] wait for user input
In-Reply-To: <Pine.LNX.4.10.10102200857500.2514-100000@localhost.localdomain>
Message-ID: <Pine.GSO.4.31.0102200912300.11918-100000@toucan.stats>

On Tue, 20 Feb 2001, Bill Simpson wrote:

> I want to display a series of plots:
>
> display plot 1
> wait for user input (keypress or mouse click)
> display plot 2
> etc
>
> How to do it? Thanks for any help.
> (I have been using locator().)

par(ask=TRUE)  seems what you need.
You can also use readline() to get text input from the user.

In general you can't wait on just a keypress (except Return: the input is
line-buffered) or on a mouse click (R is not handling GUI events) on
Linux, which I seem to recall is your platform.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From plummer at iarc.fr  Tue Feb 20 10:27:57 2001
From: plummer at iarc.fr (Martyn Plummer)
Date: Tue, 20 Feb 2001 10:27:57 +0100 (CET)
Subject: [R] wait for user input
In-Reply-To: <Pine.LNX.4.10.10102200857500.2514-100000@localhost.localdomain>
Message-ID: <XFMail.010220102757.plummer@iarc.fr>

On 20-Feb-01 Bill Simpson wrote:
> I want to display a series of plots:
> 
> display plot 1
> wait for user input (keypress or mouse click)
> display plot 2
> etc
> 
> How to do it? Thanks for any help.
> (I have been using locator().)

par(ask=TRUE)

You press return (at the console, not the graphics device window) to
see the next plot.
Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Tue Feb 20 11:01:05 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 20 Feb 2001 11:01:05 +0100
Subject: [R] tcltk: testing for widgets?
In-Reply-To: Frank Gerrit Zoellner's message of "Tue, 20 Feb 2001 09:40:26 +0100"
References: <20010220094026.A6577@puccini.TechFak.Uni-Bielefeld.DE>
Message-ID: <x24rxp8yhq.fsf@blueberry.kubism.ku.dk>

Frank Gerrit Zoellner <fzoellne at TechFak.Uni-Bielefeld.DE> writes:

> Hallo!
> 
> I want to test if a widget exists. Using Perl/Tk i can call the function tkexists(). How can I realise this function with R/tclTk ?

Not being familiar with Perl/Tk, I'm not really sure, but I'd
assume that tkexists() is the Tcl/Tk "winfo exists wname" which in
R/tcltk maps to tkwinfo("exists", window).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Ko-Kang at xtra.co.nz  Tue Feb 20 11:34:06 2001
From: Ko-Kang at xtra.co.nz (Ko-Kang@xtra.co.nz)
Date: Tue, 20 Feb 2001 23:34:06 +1300
Subject: [R] wait for user input
References: <Pine.LNX.4.10.10102200857500.2514-100000@localhost.localdomain>
Message-ID: <001301c09b28$a786cb80$827e37d2@KoKang>

Take a look at:
    demo(graphics)
when you are in R.

You'll find that it does exactly what you want.  Looking into graphics.R
code, which is usually in $R_HOME\demos\graphics\ (at least it is in Windows
machine), you can see:
    par(ask = interactive(), .... )
at the beginning.

In other words, the if you put "ask = interactive()" (without quotation
mark) it should do the job.

Ko-Kang Wang


----- Original Message -----
From: "Bill Simpson" <wsi at gcal.ac.uk>
To: <r-help at stat.math.ethz.ch>
Sent: Tuesday, February 20, 2001 10:04 PM
Subject: [R] wait for user input


> I want to display a series of plots:
>
> display plot 1
> wait for user input (keypress or mouse click)
> display plot 2
> etc
>
> How to do it? Thanks for any help.
> (I have been using locator().)
>
> Bill Simpson
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wsi at gcal.ac.uk  Tue Feb 20 12:33:08 2001
From: wsi at gcal.ac.uk (Bill Simpson)
Date: Tue, 20 Feb 2001 11:33:08 +0000 (GMT)
Subject: [R] wait for user input
In-Reply-To: <XFMail.010220102757.plummer@iarc.fr>
Message-ID: <Pine.LNX.4.10.10102201132350.2631-100000@localhost.localdomain>

Thanks Martyn and Brian for the pointer to par(ask=TRUE)

Bill


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jaitchis at lisp.com.au  Tue Feb 20 13:04:05 2001
From: jaitchis at lisp.com.au (John Aitchison)
Date: Tue, 20 Feb 2001 23:04:05 +1100
Subject: [R] Holt-Winters code in R or S?
In-Reply-To: <Pine.LNX.4.31.0102191629130.2467-100000@shell1.aracnet.com>
References: <200102192057.MAA28224@axe.humboldt.edu>
Message-ID: <3A92F7E5.18591.3197DD6@localhost>



On 19 Feb 2001, at 16:31, M. Edward (Ed) Borasky wrote:

> Can someone point me to R (or S) code for Holt-Winters forecasting?

dunno if there is any specifically as such, and a lot of the ad-hoc 
forecasting procedures can be implemented as special cases of  AR/MA
approaches which are variously implemented in ts, tseries, dse etc .. but 
fwiw I just implemented ewma as a programming exercise and will do 
discounted least squares/Holt Winters  in the next day or so .. I am 
following the notation and procedure of Harvey "Forecasting, structural 
time series models and the Kalman filter".. anyone who wants this code, 
rudimentary as it is,,just email me.

I have an interest in the "BATS" approach (Bayesian Analysis of Time 
Series.. as in Harrison, West, Pole ) and somewhere I have some skeleton S 
code that I think I could probably port to R

I am also working through "Non-linear time series models in empirical 
finance" (Franses & van Dijk) and slowly implementing some bits and pieces 
.. I'd be glad to contribute these as and when.


I think this raises the issue , attention BR and the core development 
team, as to whether there is a role for a repository of "slop code" .. use 
at your own risk, probably not a lot of documentation,  not a full fledged 
package, perhaps slightly "disreputable", a sort of relaxed and 
comfortable approach and hey, why not?... if there is no right answer to 
an ill-specified question, then maybe it is sensible to admit some other 
approaches.

For example, I have followed with interest the process of admitting 
factanal() into the fold. got varimax and promax rotations and caveats 
galore, as there should be. Personally,  I have always liked procedures 
along the lines of the 'iterative powered vector factor analysis'   
approach in Overall and Klett ~1972 and would be happy to implement such 
.. without having done it in R , I suspect that it is just a few tens of 
lines of code.

So, is there a role for //RLIB ?.. just R code, not interfaces to DLL's .. 
where people can easily upload simple R functions that can be used 
caveat emptor. 

fwiw

John Aitchison
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wsi at gcal.ac.uk  Tue Feb 20 14:40:29 2001
From: wsi at gcal.ac.uk (Bill Simpson)
Date: Tue, 20 Feb 2001 13:40:29 +0000 (GMT)
Subject: [R] can't get summary() in loop
Message-ID: <Pine.LNX.4.10.10102201333400.2815-100000@localhost.localdomain>

The problem is illustrated below:

line<-function(x,y)
{
fit<-lm(y~x)
fit
}

func<-function()
{
 x<-c(1,2,3,4)
 y<-c(1.1,2,3,4)

for(i in 1:2)
	{
	fit<-line(x,y)
 	summary(fit)
 	}
}

Why don't I get two printed summaries when I run func()? How to make it
work? (In reality I will be getting different summaries of different data
sets using this loop)

Thanks very much for any help.

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Tue Feb 20 14:56:53 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 20 Feb 2001 14:56:53 +0100
Subject: [R] can't get summary() in loop
In-Reply-To: Bill Simpson's message of "Tue, 20 Feb 2001 13:40:29 +0000 (GMT)"
References: <Pine.LNX.4.10.10102201333400.2815-100000@localhost.localdomain>
Message-ID: <x2vgq5790a.fsf@blueberry.kubism.ku.dk>

Bill Simpson <wsi at gcal.ac.uk> writes:

> The problem is illustrated below:
> 
> line<-function(x,y)
> {
> fit<-lm(y~x)
> fit
> }
> 
> func<-function()
> {
>  x<-c(1,2,3,4)
>  y<-c(1.1,2,3,4)
> 
> for(i in 1:2)
> 	{
> 	fit<-line(x,y)
>  	summary(fit)
>  	}
> }
> 
> Why don't I get two printed summaries when I run func()? How to make it
> work? (In reality I will be getting different summaries of different data
> sets using this loop)

You haven't asked to have them printed...
Use print(summary(fit))


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mlennert at club.worldonline.be  Tue Feb 20 15:05:17 2001
From: mlennert at club.worldonline.be (mlennert@club.worldonline.be)
Date: Tue, 20 Feb 2001 15:05:17 +0100
Subject: [R] interrupted plots
Message-ID: <E14VDPs-0005If-00@paf-linux.ulb.ac.be>

Hello,

I'm trying to plot simple data containing numbers/year.
I use plot(numbers~year, type="l"), but the problem is that there is no data 
for several years. S I would like the line to be interrupted for the period 
without data, and then continue afterwards. How can I do this ?

Also, I've been using par(new=TRUE) to put two curves (same years, different 
numbers) on the same plot. Is there a way to do this differently, i.e. easier, 
for example directly in the plot command ?

Moritz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From baron at cattell.psych.upenn.edu  Tue Feb 20 16:15:22 2001
From: baron at cattell.psych.upenn.edu (Jonathan Baron)
Date: Tue, 20 Feb 2001 10:15:22 -0500 (EST)
Subject: [R] interrupted (and multiple) plots
Message-ID: <200102201515.KAA29704@cattell.psych.upenn.edu>

The function matplot() is essentially designed for
putting more than one line on a plot.  It also works
for interrupted lines.  The trick is to have some
columns that have one line segment, and other columns
with the other segment.  Try, for example:

 m1 <- matrix(c(1,2,NA,NA,NA,NA,NA,NA,3,4),5,2)
 m1
 matplot(m1,type="l")

Jon
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From richards at pci.upmc.edu  Tue Feb 20 16:13:37 2001
From: richards at pci.upmc.edu (Richards, Tom)
Date: Tue, 20 Feb 2001 10:13:37 -0500
Subject: [R] dyn.load() and dyn.unload() under Windows
Message-ID: <5B9B19C8A522D411A8EC00A0C99D6A9A02E733@mail.nsabp.pitt.edu>

Hello:

	I am having some difficulty with a DLL, using

> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.1            
year     2001           
month    01             
day      15             
language R              

I have a library called "weaklink" that I am making, which has exactly one
dll called weaklink.dll, in directory D:\Rw1021\library\weaklink\libs.  I
have used mingw32/gcc 2.95.2-1 to make the dll, with these commands I got
from Professor Ripley a couple weeks ago (thanks for that, and any errors
are due to me!):

gcc -O2 -c weaklink.c -ID:\Rw1021\src\include
dlltool --export-all-symbols --output-def weaklink.def weaklink.o
gcc --shared -o ..\libs\weaklink.dll weaklink.def weaklink.o
-LD:/Rw1021/src/gnuwin32 -lR

The file weaklink.def made by mingw32 looks like this:

; dlltool --export-all-symbols --output-def weaklink.def weaklink.o
EXPORTS
	sann @ 1 ; 
	combn2 @ 2 ; 

In the file D:\Rw1021\library\weaklink\R\weaklink, I have this function:

.First.lib <- function(lib, pkg) {
	library.dynam("weaklink", pkg, lib)
	require(MASS)
}

In weaklink.c, there are two functions declared, as

__declspec (dllexport) SEXP sann(SEXP input);
__declspec (dllexport) SEXP combn2(SEXP input);

Shouldn't BOTH exported symbols exported be loaded into R?  Well, here is
what I get:

> library(weaklink)
Loading required package: MASS 

> is.loaded(symbol.C("sann"))
[1] TRUE
> is.loaded(symbol.C("combn2"))
[1] FALSE

and even if I use dyn.load(), I do not get what I want:

> dyn.load("D:\\Rw1021\\library\\weaklink\\libs\\weaklink.dll")
> is.loaded(symbol.C("sann"))
[1] TRUE
> is.loaded(symbol.C("combn2"))
[1] FALSE

I think that the arguments "symbol" and "name" to dyn.load(), on page 146 of
refman.pdf, have been deprecated, since they're not really there:

> args(dyn.load)
function (x, local = TRUE, now = TRUE) 
NULL

I must be missing something here, because MASS only has one dll file, and it
must have many exported symbols.  Can anyone tell me what I'm doing wrong
here?  Thanks in advnace for your help.

Tom


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pflugshaupt at cirsium.ethz.ch  Tue Feb 20 16:40:29 2001
From: pflugshaupt at cirsium.ethz.ch (Kaspar Pflugshaupt)
Date: Tue, 20 Feb 2001 16:40:29 +0100
Subject: [R] interrupted plots
In-Reply-To: <E14VDPs-0005If-00@paf-linux.ulb.ac.be>
References: <E14VDPs-0005If-00@paf-linux.ulb.ac.be>
Message-ID: <01022016402900.00870@Aconitum>

On Tuesday 20 February 2001 15:05, mlennert at club.worldonline.be wrote:

> Hello,
>
> I'm trying to plot simple data containing numbers/year.
> I use plot(numbers~year, type="l"), but the problem is that there is no
> data for several years. S I would like the line to be interrupted for the
> period without data, and then continue afterwards. How can I do this ?

I think this is easy: put NA entries into the data vector for those years

>
> Also, I've been using par(new=TRUE) to put two curves (same years,
> different numbers) on the same plot. Is there a way to do this differently,
> i.e. easier, for example directly in the plot command ?


You could use the matplot() command (see help(matplot))

Cheers

Kaspar

-- 


Kaspar Pflugshaupt
Geobotanical Institute
ETH Zurich, Switzerland

http://www.geobot.umnw.ethz.ch
mailto:pflugshaupt at geobot.umnw.ethz.ch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rijn at swi.psy.uva.nl  Tue Feb 20 17:01:35 2001
From: rijn at swi.psy.uva.nl (rijn@swi.psy.uva.nl)
Date: Tue, 20 Feb 2001 17:01:35 +0100 (CET)
Subject: [R] Re: Question "kill-buffer"
In-Reply-To: <3A8BD84D.3DF4E5B8@physik.uni-marburg.de>
Message-ID: <Pine.LNX.4.21.0102201659040.30991-100000@swipc30.swi.psy.uva.nl>


> I would be very thankfull for such a solution, too ....
> 
> > Would introducing a "Are you sure?" question after kill the *R* ( or
> > whatever) buffer with a hasty C-x k be a popular default
> > "feature". How can I include this for my own use?

Include the following code in your ~/.emacs:

-o-o-o-o-o-

(defun kill-buffer-ask-process (buffer)
  "A modified kill buffer, requires confirmation before killing a process buffer

See \\[kill-buffer]."
  (interactive "bKill buffer ")
  (if (or (not (get-buffer-process (buffer-name)))
	  (yes-or-no-p (format "Kill process associated with %s? " (buffer-name))))
      (kill-buffer buffer)))

(global-set-key [(control x)(k)] 'kill-buffer-ask-process)

-o-o-o-o-o-

Groet,
  Hedderik.

-- 
http://swipc30.swi.psy.uva.nl/~rijn

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From berengere.broche at chu-rennes.fr  Tue Feb 20 17:24:27 2001
From: berengere.broche at chu-rennes.fr (=?iso-8859-1?Q?B=E9reng=E8re?= BROCHE)
Date: Tue, 20 Feb 2001 17:24:27 +0100
Subject: [R] c++
Message-ID: <3A929A3B.2199CB54@chu-rennes.fr>


I am programming in c++ langage and I would like to call  some R
functions in my c++ code, is it possible ?
How could I do that ? I don't undersand very well the chapter " The R
api : entry points for C code"  in "writing R extensions"

Thank you for your help

B BROCHE



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bates at stat.wisc.edu  Tue Feb 20 18:34:01 2001
From: bates at stat.wisc.edu (Douglas Bates)
Date: 20 Feb 2001 11:34:01 -0600
Subject: [R] c++
In-Reply-To: =?iso-8859-1?q?B=E9reng=E8re?= BROCHE's message of "Tue, 20 Feb 2001 17:24:27 +0100"
References: <3A929A3B.2199CB54@chu-rennes.fr>
Message-ID: <6r1ystl0mu.fsf@franz.stat.wisc.edu>

B?reng?re BROCHE <berengere.broche at chu-rennes.fr> writes:

> I am programming in c++ langage and I would like to call  some R
> functions in my c++ code, is it possible ?
> How could I do that ? I don't undersand very well the chapter " The R
> api : entry points for C code"  in "writing R extensions"

Well you would need to protect any include directives for R include
files and any calls to C entry points in the R libraries with

extern "C" {
...
}

There are examples of this in the file src/R_LapackPP.cc from the
Matrix library but that is probably not the easiest code to understand
if you are just starting with this.  Perhaps if you gave us a more
specific example of what you are trying to do we could be of more
help.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From sway at tanox.com  Tue Feb 20 18:55:42 2001
From: sway at tanox.com (Shawn Way)
Date: Tue, 20 Feb 2001 11:55:42 -0600
Subject: [R] R for SPC
Message-ID: <0565F48FC373D411BE4D00B0D04960261BB3@nt40hou1.tanox.com>

Are their any plans to develop an SPC package for R (or port the one from
S-plus)?


Shawn WayTanox, Inc.
Process Engineer10301 Stella Link
sway at tanox.comHouston, TX 77025



Note: Any use, dissemination, forwarding, printing or copying of this e-mail
without consent of Tanox, Inc. is not authorized.  Further, this
communication may contain confidential information intended only for the
person to whom it is addressed, and any use, dissemination, forwarding,
printing or copying of such confidential information without the express
consent of Tanox or in violation of any agreements to which the recipient is
subject is prohibited.  If you have received this e-mail in error, please
immediately notify the sender and delete the original and all copies.  Any
views or opinions expressed may be solely those of the author and do not
necessarily represent the views or opinions of Tanox, Inc.  
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From murdoch at stats.uwo.ca  Tue Feb 20 21:43:16 2001
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue, 20 Feb 2001 15:43:16 -0500 (EST)
Subject: [R] "firstthat"?
Message-ID: <Pine.LNX.4.21.0102201533360.12998-100000@fisher.stats.uwo.ca>

I need a function that's probably already in R, but I can't find it.

What I want is a "firstthat" function.  This will look through a logical
vector and return the index of the first TRUE.  Typical use would be like
this:

x _ runif(100)
x[firstthat(x > 0.8)]

to find the first value in x that exceeds 0.8.  If there are none, it 
would give a zero length answer, or an NA, either would be fine.  I need
the index, not just the first x value, because I'll also be making use of
corresponding values of some other variables.

If that's not already there, any suggestions for how best to write it?

Duncan Murdoch


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Tue Feb 20 21:52:28 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue, 20 Feb 2001 12:52:28 -0800 (PST)
Subject: [R] "firstthat"?
In-Reply-To: <Pine.LNX.4.21.0102201533360.12998-100000@fisher.stats.uwo.ca>
Message-ID: <Pine.A41.4.33.0102201250110.167086-100000@homer34.u.washington.edu>

On Tue, 20 Feb 2001, Duncan Murdoch wrote:

> I need a function that's probably already in R, but I can't find it.
>
> What I want is a "firstthat" function.  This will look through a logical
> vector and return the index of the first TRUE.  Typical use would be like
> this:
>
> x _ runif(100)
> x[firstthat(x > 0.8)]
>

firstthat<-function(x) min(which(x))

does roughly what you want. It returns integer infinity if
there are no matches.

	-thomas




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From duncan at research.bell-labs.com  Wed Feb 21 00:02:55 2001
From: duncan at research.bell-labs.com (Duncan Temple Lang)
Date: Tue, 20 Feb 2001 18:02:55 -0500 (EST)
Subject: [R] R with multiple processors
Message-ID: <200102202302.SAA24492@jessie.research.bell-labs.com>



> Cc: Isabel Canette <isabelc at cmat.edu.uy>, <r-help at stat.math.ethz.ch>

This is a general response to some of the issues raised in the
discussion about utilizing multiple processors within R.  Sorry for
responding to this at such a late stage. Time seems to be passing me
by quicker than usual these days :-) 

(This is more suited to r-devel, but since the topic was on r-help,
it will hopefully conclude there.)


There are plans for multi-threading R, perhaps at the end of this
summer.  Doing this smoothly so that it doesn't break user-level code
and packages requires some planning and thought. I have a plan for
this and need to find time to implement it with anyone that is
interested.  The design I have in mind is much that same as John
Chambers and I implemented in S version 4, but implemented entirely
from scratch.  (See
http://cm.bell-labs.com/stat/doc/multi-threaded-S.ps. I'll make a
condensed version available when we get closer to implementing the
facilities.)

I am working on a several different packages that integrate R with
(potentially) threaded systems (e.g. Java, Perl, Python, Apache,
Netscape, XSLT, Postgres etc.) with the side effect of finding out
what support for threads is most urgently needed. Hopefully these will
stretch the model and show any deficiencies before we start.

Threads, connections, embedding R within databases, distributed
computing via CORBA/DCOM/SOAP/RMI, etc., all point to the fact that we
need to be working on parallel algorithms. It would be terrific to see
people exploring that.

* While threads do provide some simplification to the event loop
handling, it does so be merely formalizing the synchronization, not
removing it.

* Clustered or distributed computing is probably most efficient at
run-time for many statistical tasks, as Thomas (I believe) pointed
out. There are some facilities to do this for R and S-Plus.

* It would be good for developers of new C code to write it so that it
is thread-safe. There are some guidelines as to how to do this at
http://developer.r-project.org/RThreads/ (specifically in guide.html)

* From a practical perspective, there are a lot of pitfalls in loading
multi-threaded code into R. The order in which libraries are loaded,
interacting with the event loop if the multi-threaded code uses X11,
etc. are all important. One trick to simplify this is to embed R
within the multi-threaded application. This allows the multi-threaded
application to be (initially) in control and get its environment
appropriately organized before R enters the picture.



  Thanks for your time.
    D.

-- 
_______________________________________________________________

Duncan Temple Lang                duncan at research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Wed Feb 21 00:08:09 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 21 Feb 2001 00:08:09 +0100
Subject: [R] "firstthat"?
In-Reply-To: Thomas Lumley's message of "Tue, 20 Feb 2001 12:52:28 -0800 (PST)"
References: <Pine.A41.4.33.0102201250110.167086-100000@homer34.u.washington.edu>
Message-ID: <x2ae7hhs12.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <tlumley at u.washington.edu> writes:

> On Tue, 20 Feb 2001, Duncan Murdoch wrote:

> > x _ runif(100)
> > x[firstthat(x > 0.8)]
> >
> 
> firstthat<-function(x) min(which(x))
> 
> does roughly what you want. It returns integer infinity if
> there are no matches.

Um. The result of which() is sorted, so how about

firstthat<-function(x) which(x)[1]

(gives NA if no matches)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rossini at blindglobe.net  Wed Feb 21 01:09:48 2001
From: rossini at blindglobe.net (A.J. Rossini)
Date: 20 Feb 2001 16:09:48 -0800
Subject: [R] Editor-based Programming interfaces for R?
Message-ID: <87snl8aoc3.fsf@jeeves.blindglobe.net>


Can some provide me (personal email, I'll summarize if needed) with
pointers to editor-based interfaces for R, i.e. NVI, VIM, WinEDT, etc?

I obviously know about ESS...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
UW Biostat/Center for AIDS Research	rossini at u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini at scharp.org
-------- (friday is unknown) --------
FHCRC: M--W : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy
CFAR:  ??   : 206-731-3647 (fax=3694)|Email is far better than phone
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From s.mcclatchie at niwa.cri.nz  Wed Feb 21 04:01:20 2001
From: s.mcclatchie at niwa.cri.nz (S.McClatchie)
Date: Wed, 21 Feb 2001 16:01:20 +1300
Subject: [R] finding a contributed function
Message-ID: <200102210301.f1L31mQ96992@storm.niwa.cri.nz>

Colleagues

----------------------------------
System info:
R version rw1020 on NT
ESS using emacs ver. 20.4

----------------------------------

I want to find a contributed function in packages that I do not already 
have installed (if it were installed I would use  library(help=MASS) for 
example). 

Is there a way to search all contributed packages for a particular 
function? (other than paging into the read.me files on 
<http://www.cran.r-project.org/bin/windows/windows-NT/windows-
NT/contrib/?N=A>
or going through each packages index of contents on
<http://www.cran.r-project.org/>)

Help will be appreciated.

Thanks

Sam

Sam McClatchie, Research scientist (fisheries acoustics))))))))))
NIWA (National Institute of Water & Atmospheric Research Ltd)
PO Box 14 901, Kilbirnie, Wellington, New Zealand
s.mcclatchie at niwa.cri.nz 

                    /\
...>><xX(?> // \\
                 /// \\\   
                //// \\\\
               ///  <?)Xx><<
              /////  \\\\\\
        ><(((?>   
  >><(((?>   ...>><xX(?>O<?)Xx><<

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From christian.hoffmann at wsl.ch  Wed Feb 21 09:18:28 2001
From: christian.hoffmann at wsl.ch (Christian Hoffmann)
Date: Wed, 21 Feb 2001 09:18:28 +0100
Subject: [R] How to DataFrame[..==..] <- NA ?
Message-ID: <3.0.6.32.20010221091828.00946cb0@mail.wsl.ch>

Hi all,

I have a dat frame U2
> dim(U2) 
1442  174

I am stuck at a point which S-Plus3.4 went smoothly. In R-1.2.1 (compiled
on Solaris5) I am getting:

> U2[U2 == -9] <- NA
 Error in [<-.data.frame(*tmp*, U2 == -9, value = NA) : 
 matrix subscripts not allowed in replacement

I tried some work-arounds:

> U2[which(U2 == -9)] <- NA
  Error in [<-.data.frame(*tmp*, which(U2A == -9), value = NA) : 
 new columns would leave holes after existing columns

> U2[which(U2 == -9)] <- list(NA)  # the same error

With the function
> function (arr, func, ...) array(func(as.vector(arr), ...), dim(arr),
dimnames(arr))

> U2x <- vapply(U2,function(x)  ifelse(x == -9,NA,x))
 Error in rep(no, length = length(ans)) : Unimplemented feature in rep


By the way:
>length(which(U2 == -9))
5273
>length(which(is.na(U2)))
194

I would be glad to learnt what went wrong here.


-christian
Dr.sc.math.Christian W. Hoffmann
Mathematics and Statistical Computing
Landscape Modeling and Web Applications
Swiss Federal Research Institute WSL 
Zuercherstrasse 111
CH-8903 Birmensdorf, Switzerland
phone: ++41-1-739 22 77    fax: ++41-1-739 22 15
e-mail: Hoffmann at WSL.CH
www: http://www.wsl.ch/staff/christian.hoffmann/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Feb 21 09:44:35 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 21 Feb 2001 08:44:35 +0000 (GMT)
Subject: [R] How to DataFrame[..==..] <- NA ?
In-Reply-To: <3.0.6.32.20010221091828.00946cb0@mail.wsl.ch>
Message-ID: <Pine.GSO.4.31.0102210831320.2445-100000@toucan.stats>

On Wed, 21 Feb 2001, Christian Hoffmann wrote:

> Hi all,
>
> I have a dat frame U2
> > dim(U2)
> 1442  174
>
> I am stuck at a point which S-Plus3.4 went smoothly. In R-1.2.1 (compiled
> on Solaris5) I am getting:
>
> > U2[U2 == -9] <- NA
>  Error in [<-.data.frame(*tmp*, U2 == -9, value = NA) :
>  matrix subscripts not allowed in replacement

What do you actually want to do?  A single index to a data frame is
indexing the columns, not the entries.  Unlike a matrix, a data frame
cannot be indexed as if its entries were one long vectors (as they are
not).

If I guess that this is a data frame with only numeric entries and you
want to set any entry which is equal to -9 to NA, then you could

(1) convert it to a numeric matrix and do what you have been trying, then
convert back (if needed).

(2) process it a column at a time, something like

change9 <- function(x) ifelse(x==-9, NA, x)
for(i in 1:174) if(is.numeric(U2[[i]])) U2[[i]] <- change9(U2[[i]])

This will work for general data frames. (You could use lapply, chase up
the row names, ..., but it is unlikely to be appreciably faster.)

Given the sizes, I guess (1) is preferable.

Or

(3) do the conversion when you input the data, e.g. use na.strings in
read.table,

>
> I tried some work-arounds:
>
> > U2[which(U2 == -9)] <- NA
>   Error in [<-.data.frame(*tmp*, which(U2A == -9), value = NA) :
>  new columns would leave holes after existing columns
>
> > U2[which(U2 == -9)] <- list(NA)  # the same error
>
> With the function
> > function (arr, func, ...) array(func(as.vector(arr), ...), dim(arr),
> dimnames(arr))
>
> > U2x <- vapply(U2,function(x)  ifelse(x == -9,NA,x))
>  Error in rep(no, length = length(ans)) : Unimplemented feature in rep
>
>
> By the way:
> >length(which(U2 == -9))
> 5273
> >length(which(is.na(U2)))
> 194
>
> I would be glad to learnt what went wrong here.
>
>
> -christian
> Dr.sc.math.Christian W. Hoffmann
> Mathematics and Statistical Computing
> Landscape Modeling and Web Applications
> Swiss Federal Research Institute WSL
> Zuercherstrasse 111
> CH-8903 Birmensdorf, Switzerland
> phone: ++41-1-739 22 77    fax: ++41-1-739 22 15
> e-mail: Hoffmann at WSL.CH
> www: http://www.wsl.ch/staff/christian.hoffmann/
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dieter.menne at menne-biomed.de  Wed Feb 21 10:19:18 2001
From: dieter.menne at menne-biomed.de (Dieter Menne)
Date: Wed, 21 Feb 2001 10:19:18 +0100
Subject: [R] Gradient field from loess
Message-ID: <NBBBIJMBGLHMKHGCPFJKKEEMCGAA.dieter.menne@menne-biomed.de>

I have a two-dimensional loess fit, and need to calculate the
gradient field from it. Even after looking at loess.c and loess.f,
I don't understand the meaning of the returned polynomial coefficients.

Or is the brute force method of using a tangential approx
to the fitted values the way to go?

Dieter Menne


---------------------------------------
Dr. Dieter Menne
Biomed Software
72074 T?bingen
Tel (49) (7071) 52176
FAX (49) (7071) 55 10 46
dieter.menne at menne-biomed.de
www.menne-biomed.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Feb 21 10:30:21 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 21 Feb 2001 09:30:21 +0000 (GMT)
Subject: [R] Gradient field from loess
In-Reply-To: <NBBBIJMBGLHMKHGCPFJKKEEMCGAA.dieter.menne@menne-biomed.de>
Message-ID: <Pine.GSO.4.31.0102210921480.24307-100000@toucan.stats>

On Wed, 21 Feb 2001, Dieter Menne wrote:

> I have a two-dimensional loess fit, and need to calculate the
> gradient field from it. Even after looking at loess.c and loess.f,
> I don't understand the meaning of the returned polynomial coefficients.

You are not supposed to be able to.  The fitted object contains no
explicit description of the surface, only enough details for
predict.loess to construct it.

> Or is the brute force method of using a tangential approx
> to the fitted values the way to go?

Normally when using loess the fitted values are uninteresting: one wants
to smooth/interpolate irregular data to a grid, say.  Using some other
method to find the tangent field from the predicted values on the grid
seems to me to be the way to go.  One could use e.g. bicubic spline
interpolation, as the code in package akima does (but apparently only
internally).



-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From shethj at epi.wustl.edu  Wed Feb 21 14:53:21 2001
From: shethj at epi.wustl.edu (Jagat Sheth)
Date: Wed, 21 Feb 2001 07:53:21 -0600
Subject: [R] Validation set in nnet
Message-ID: <sa937413.084@EPI.WUSTL.EDU>

Dear R-users,

I am interested in conducting neural network analysis using R. Bishop (1995) describes a technique for cross-validation analysis of a neural network in which a dataset is divided into a training set, a validation set, and a testing set. It appears that by default, R uses a training set and a validation set to train a neural net. Is this correct? 
Thanks in advance.

Jagat K. Sheth
Department of Psychiatry
Washington University in St. Louis
St. Louis, MO 63108
USA
tel: 314-286-2253
fax: 314-286-2265
email: shethj at epi.wustl.edu


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rijn at swi.psy.uva.nl  Wed Feb 21 16:29:44 2001
From: rijn at swi.psy.uva.nl (rijn@swi.psy.uva.nl)
Date: Wed, 21 Feb 2001 16:29:44 +0100 (CET)
Subject: [R] Specification of factors in tapply
Message-ID: <Pine.LNX.4.21.0102211607280.5403-100000@swipc30.swi.psy.uva.nl>


After some fiddling around with the tapply command, I discovered that the
factors (the INDEX argument) given to tapply must be specified in
fastest-cycling first order. 

The following code shows how I discovered my error: (R version 1.2.1)

-o-o-o-o-o-

x <- as.data.frame(list(data=c(-9,0,3,1,-9,1,0,-9,0,3,1,-9,1,0),
                   subj=c(rep(1,7),rep(2,7)),
                   cond=rep(c(rep(1,4),rep(2,3)),2)))

x$first <- unlist(tapply(x$data,list(x$subj,x$cond),
                       function(x) {
                         retval<-rep(F,length(x));
                         if (length(x[x>=0])>0) {
                           retval[min(which(x>=0))]<-T;
                         }
                         print(cbind(x,retval)); # Print some debug info
                         retval}))

-o-o-o-o-

resulting in:

> x
   data subj cond first
1    -9    1    1 FALSE
2     0    1    1  TRUE
3     3    1    1 FALSE
4     1    1    1 FALSE
5    -9    1    2 FALSE
6     1    1    2  TRUE
7     0    1    2 FALSE
8    -9    2    1 FALSE
9     0    2    1 FALSE # <--
10    3    2    1  TRUE # <--
11    1    2    1 FALSE
12   -9    2    2 FALSE
13    1    2    2  TRUE
14    0    2    2 FALSE

I could not find any reference to this order in the tapply help file nor
in "An Introduction to R" (Version 1.2.1 (2001-01-15), PDF file p17), it
might prove useful to include some information about this. (Especially
since the help text for functions like order do include information how to
specify the factors: slowest-cycling first.)

Groet,
  Hedderik.

-- 
http://swipc30.swi.psy.uva.nl/~rijn

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Feb 21 17:13:54 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 21 Feb 2001 16:13:54 +0000 (GMT)
Subject: [R] Specification of factors in tapply
In-Reply-To: <Pine.LNX.4.21.0102211607280.5403-100000@swipc30.swi.psy.uva.nl>
Message-ID: <Pine.GSO.4.31.0102211559360.8886-100000@toucan.stats>

On Wed, 21 Feb 2001 rijn at swi.psy.uva.nl wrote:

>
> After some fiddling around with the tapply command, I discovered that the
> factors (the INDEX argument) given to tapply must be specified in
> fastest-cycling first order.

Wait a minute: the factors can be supplied in any order.  If you ignore
the structure of the result you will get confused, though.

There are two cases:

1) `FUN' returns a single atomic value. The result is a simple array, and
is specified on the help page.

2) FUN' does not return a single atomic value. The result is a list with a
dim attribute, so an array each of whose elements is a vector (and a list
is a vector).

I think you are just discovering that if you collapse an array to a
vector, you get the results in Fortran order.

>
> The following code shows how I discovered my error: (R version 1.2.1)
>
> -o-o-o-o-o-
>
> x <- as.data.frame(list(data=c(-9,0,3,1,-9,1,0,-9,0,3,1,-9,1,0),
>                    subj=c(rep(1,7),rep(2,7)),
>                    cond=rep(c(rep(1,4),rep(2,3)),2)))
>
> x$first <- unlist(tapply(x$data,list(x$subj,x$cond),
>                        function(x) {
>                          retval<-rep(F,length(x));
>                          if (length(x[x>=0])>0) {
>                            retval[min(which(x>=0))]<-T;
>                          }
>                          print(cbind(x,retval)); # Print some debug info
>                          retval}))

The order is only relevant because you unlisted an array.  Nobody
said that you could add the results to x after unlisting: that's an
assumption.

> -o-o-o-o-
>
> resulting in:
>
> > x
>    data subj cond first
> 1    -9    1    1 FALSE
> 2     0    1    1  TRUE
> 3     3    1    1 FALSE
> 4     1    1    1 FALSE
> 5    -9    1    2 FALSE
> 6     1    1    2  TRUE
> 7     0    1    2 FALSE
> 8    -9    2    1 FALSE
> 9     0    2    1 FALSE # <--
> 10    3    2    1  TRUE # <--
> 11    1    2    1 FALSE
> 12   -9    2    2 FALSE
> 13    1    2    2  TRUE
> 14    0    2    2 FALSE
>
> I could not find any reference to this order in the tapply help file nor
> in "An Introduction to R" (Version 1.2.1 (2001-01-15), PDF file p17), it
> might prove useful to include some information about this.

The ordering seems to me to be nothing to do with tapply: that returns an
array with dimnames referring to the cells used.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rijn at swi.psy.uva.nl  Wed Feb 21 18:14:56 2001
From: rijn at swi.psy.uva.nl (Hedderik van Rijn)
Date: Wed, 21 Feb 2001 18:14:56 +0100 (CET)
Subject: [R] Specification of factors in tapply
In-Reply-To: <Pine.GSO.4.31.0102211559360.8886-100000@toucan.stats>
Message-ID: <Pine.LNX.4.21.0102211732310.5403-100000@swipc30.swi.psy.uva.nl>


First of all, thanks for the helpful reply (also to Peter Dalgaard).

Ripley:

> I think you are just discovering that if you collapse an array to a
> vector, you get the results in Fortran order.

Dalgaard:

> tapply() gives a *table*, in this case each element is a vector of
> logicals. Tables are stored with first index varying the fastest. So
> where's the surprise?

Obviously, I overlooked the exact representation of the result of tapply.
A nice example of conformation bias as the unlist command seemed the right
function to use but clouded my the actual return structure. :-)

If I understand correctly, my code depends on the "accidental" order of
table representations. Browsing through of R scripts I wrote, it seems that
I've been very lucky not to stumble upon this earlier as I use this
"feature" quite often. 

So, two questions pop up. 

First, can I use this "feature" savely, or is should it be considered
"undocumented" and instable? (I do not like the idea of possible different
results if I ever happen to run the scripts using later versions of R.)

Second, what are the functions/methods I could use to get these results in a
more R-ish way? I quite often want to perform some function per subset of a
dataframe and include the results back into the frame. As in the example I
sent, finding the first value equal to or larger than 0 per
subject/condition combination.

Thanks a lot for all the help sofar,
   Hedderik.

(Just to be sure, I include the example again:)

x <- as.data.frame(list(data=c(-9,0,3,1,-9,1,0,-9,0,3,1,-9,1,0),
                   subj=c(rep(1,7),rep(2,7)),
                   cond=rep(c(rep(1,4),rep(2,3)),2)))

x$first <- unlist(tapply(x$data,list(x$subj,x$cond),
                       function(x) {
                         retval<-rep(F,length(x));
                         if (length(x[x>=0])>0) {
                           retval[min(which(x>=0))]<-T;
                         }
                         print(cbind(x,retval)); # Print some debug info
                         retval}))

--
http://swipc30.swi.psy.uva.nl/~rijn


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Feb 21 18:38:22 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 21 Feb 2001 17:38:22 +0000 (GMT)
Subject: [R] Specification of factors in tapply
In-Reply-To: <Pine.LNX.4.21.0102211732310.5403-100000@swipc30.swi.psy.uva.nl>
Message-ID: <Pine.GSO.4.31.0102211733300.21673-100000@toucan.stats>

On Wed, 21 Feb 2001, Hedderik van Rijn wrote:

>
> First of all, thanks for the helpful reply (also to Peter Dalgaard).
>
> Ripley:
>
> > I think you are just discovering that if you collapse an array to a
> > vector, you get the results in Fortran order.
>
> Dalgaard:
>
> > tapply() gives a *table*, in this case each element is a vector of
> > logicals. Tables are stored with first index varying the fastest. So
> > where's the surprise?
>
> Obviously, I overlooked the exact representation of the result of tapply.
> A nice example of conformation bias as the unlist command seemed the right
> function to use but clouded my the actual return structure. :-)
>
> If I understand correctly, my code depends on the "accidental" order of
> table representations. Browsing through of R scripts I wrote, it seems that
> I've been very lucky not to stumble upon this earlier as I use this
> "feature" quite often.
>
> So, two questions pop up.
>
> First, can I use this "feature" savely, or is should it be considered
> "undocumented" and instable? (I do not like the idea of possible different
> results if I ever happen to run the scripts using later versions of R.)

The `first index varying fastest' representation of an array is documented
and stable.

> Second, what are the functions/methods I could use to get these results in a
> more R-ish way? I quite often want to perform some function per subset of a
> dataframe and include the results back into the frame. As in the example I
> sent, finding the first value equal to or larger than 0 per
> subject/condition combination.

by() is a safer tool.  It gives you subsets labelled by the factors used
to generate them, and the results on those subsets.  It is a wrapper to
tapply, of course, and postdates some of the documentation.  (`An
Introduction to R' is still really Bill Venables' `Notes on S' from 1990.
We are well aware that it is not comprehensive, but are not attempting to
write R versions of existing S books, including two by Venables + ANO.)

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Wed Feb 21 19:12:50 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 21 Feb 2001 19:12:50 +0100
Subject: [R] Specification of factors in tapply
In-Reply-To: Hedderik van Rijn's message of "Wed, 21 Feb 2001 18:14:56 +0100 (CET)"
References: <Pine.LNX.4.21.0102211732310.5403-100000@swipc30.swi.psy.uva.nl>
Message-ID: <x266i3ucpp.fsf@blueberry.kubism.ku.dk>

Hedderik van Rijn <rijn at swi.psy.uva.nl> writes:

> Second, what are the functions/methods I could use to get these results in a
> more R-ish way? I quite often want to perform some function per subset of a
> dataframe and include the results back into the frame. As in the example I
> sent, finding the first value equal to or larger than 0 per
> subject/condition combination.
> 
> Thanks a lot for all the help sofar,
>    Hedderik.
> 
> (Just to be sure, I include the example again:)
> 
> x <- as.data.frame(list(data=c(-9,0,3,1,-9,1,0,-9,0,3,1,-9,1,0),
>                    subj=c(rep(1,7),rep(2,7)),
>                    cond=rep(c(rep(1,4),rep(2,3)),2)))
> 
> x$first <- unlist(tapply(x$data,list(x$subj,x$cond),
>                        function(x) {
>                          retval<-rep(F,length(x));
>                          if (length(x[x>=0])>0) {
>                            retval[min(which(x>=0))]<-T;
>                          }
>                          print(cbind(x,retval)); # Print some debug info
>                          retval}))

It looks a bit unsafe to rely on the storage order in x. I'd go for
brute force and ignorance:

tb <- tapply(x$data,list(x$subj,x$cond),
 function(x) {
      retval<-rep(F,length(x));
      if (any(x>=0)) {
          retval[which(x>=0)[1]]<-T;
      }
      retval
 }

x$first<-NA
for (i in 1:2) 
    for (j i 1:2)
	x$first[x$subj==i & x$cond==j] <- tb[i,j]


or maybe something like.

fct <- function(x) {
      retval<-rep(F,length(x));
      if (any(x>=0)) {
          retval[which(x>=0)[1]]<-T;
      }
      retval
 }

grp <- interaction(x$subj,x$cond)
x$first <- NA
for (i in levels(grp))
   x$first[grp==i] <- fct(x$first[grp==i])

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gpetris at definetti.uark.edu  Wed Feb 21 20:14:40 2001
From: gpetris at definetti.uark.edu (Giovanni Petris)
Date: Wed, 21 Feb 2001 13:14:40 -0600 (CST)
Subject: [R] title problem with postscript()  
Message-ID: <200102211914.NAA01193@definetti.uark.edu>


My problem is that with the following commands
I get the title of the plot printed within the plotting region. 
(everything works fine with x11()). Any suggestions?

Thanks in advance,
Giovanni


> postscript(file="Neyman-Scott.ps")
> plot(cardiff$poly, asp=1, type="n")
> pointmap(sim.events, add=T)
> polymap(cardiff$poly, add=T)
> title(substitute(list("Simulated Neyman-Scott Process", sigma^2==s2, rho==r),
+                  list(s2=round(exp(fit$par[1]),2), r=round(exp(fit$par[2]),3))))
> dev.off()

-- 

 __________________________________________________
[                                                  ]
[ Giovanni Petris                 GPetris at uark.edu ]
[ Department of Mathematical Sciences              ]
[ University of Arkansas - Fayetteville, AR 72701  ]
[ Ph: (501) 575-6324, 575-8630 (fax)               ]
[ http://definetti.uark.edu/~gpetris/              ]
[__________________________________________________]

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From york at noaa.gov  Wed Feb 21 23:48:44 2001
From: york at noaa.gov (Anne York)
Date: Wed, 21 Feb 2001 14:48:44 -0800 (PST)
Subject: [R] glm predict problem with type = "response"
Message-ID: <Pine.GSO.4.05.10102211413280.16005-100000@ofis450a.akctr.noaa.gov>

The standard errors produced by predict.glm with type = "response" seem
wrong. Here is an example using R 1.2 windows version along with the same
problem in Splus. The standard errors for type = "link" are the same in
both systems. 

R1.2> set.seed(10)

R1.2> ytest <- 100*.95^(0:9) + rnorm(10,sd = 5)

R1.2> ytest
 [1] 103.96964  97.60590  88.43220  85.90504  79.18262  76.05762  68.34566
 [8]  74.24119  66.80257  62.95880

R1.2> foo  <-  glm(ytest~I(0:9),family=quasi(link=log))

R1.2> predict(foo,type="link")
       1        2        3        4        5       
4.620614 4.565770 4.510925 4.456081 4.401236  ...

R1.2> predict(foo,type="link", se = TRUE)
$fit
       1        2        3        4        5
4.620614 4.565770 4.510925 4.456081 4.401236 ...

$se.fit
         1          2          3          4          5 
0.01913357 0.01602018 0.01350398 0.01196775 0.01180063 

$residual.scale
[1] 3.005757

R1.2> predict(foo,type="response", se = TRUE)
$fit
 [1] 101.55641  96.13657  91.00598  86.14920  81.55161 


$se.fit
           1            2            3            4            5 
2.438852e+42 9.041729e+39 4.506688e+37 3.105512e+35 3.085449e+33 

$residual.scale
[1] 3.005757

Comparison with Splus. First import ytest into splus

SPlus> ytest
 [1] 103.96964  97.60590  88.43220  85.90504  79.18262  76.05762  68.34566
 [8]  74.24119  66.80257  62.95880

SPlus>  predict(foo,type="link", se = TRUE)
$fit:
        1       2        3        4        5   
 4.620614 4.56577 4.510925 4.456081 4.401236  ...

$se.fit:
          1          2          3          4          5 
 0.01913357 0.01602018 0.01350398 0.01196775 0.01180063  ...

$residual.scale:
[1] 3.005757



SPlus> foo  <-  glm(ytest~I(0:9),family=quasi(link=log))
SPlus>  predict(foo,type="response", se = TRUE)
$fit:
        1        2        3       4        5 
 101.5564 96.13657 91.00598 86.1492 81.55161 ...

$se.fit:
        1        2        3        4       5 
 1.943136 1.540126 1.228943 1.031012 0.96236 ...
 
$residual.scale:
[1] 3.005757

$df:
[1] 8

SPlus>  predict(foo,type="link", se = TRUE)
$fit:
        1       2        3        4        5   
 4.620614 4.56577 4.510925 4.456081 4.401236  ...

$se.fit:
          1          2          3          4          5 
 0.01913357 0.01602018 0.01350398 0.01196775 0.01180063  ...

$residual.scale:
[1] 3.005757







~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Anne E. York
National Marine Mammal Laboratory
Seattle WA 98115-0070  USA
e-mail: anne.york at noaa.gov
Voice: +1 206-526-4039
Fax: +1 206-526-6615
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From s.mcclatchie at niwa.cri.nz  Thu Feb 22 00:46:12 2001
From: s.mcclatchie at niwa.cri.nz (S.McClatchie)
Date: Thu, 22 Feb 2001 12:46:12 +1300
Subject: [R] merging 2 lists by common variable
Message-ID: <200102212346.f1LNkiQ65732@storm.niwa.cri.nz>

Colleagues

----------------------------------
System info:
R version rw1020 on NT
ESS using emacs ver. 20.4

----------------------------------
I want to merge 2 lists by their common factor (which is a binned time 
interval). The lists were created using

 b.opc.tr1  <- by(opc.tr1, fopc, colmean)
 b.shuttle.tr1  <- by(shuttle.tr1, fsh, colmean)

where colmean is another function to estimate the column means. 

Both lists have this structure:

>  b.shuttle.tr1

fsh: (305.96,306.02]
juliandate        lat  temp.degC 
 305.99142  -43.28905   11.85373 
------------------------------------------------------------ 
fsh: (306.02,306.09]
juliandate        lat  temp.degC 
 306.05841  -43.50886   11.68171 
------------------------------------------------------------ 
fsh: (306.09,306.16]
juliandate        lat  temp.degC 
 306.12566  -43.73148   10.99198 
------------------------------------------------------------ 
fsh: (306.16,306.23]
juliandate        lat  temp.degC 
306.192905 -43.971203   8.228907 
------------------------------------------------------------ 
fsh: (306.23,306.29]
juliandate        lat  temp.degC 
306.260174 -44.209771   7.789692 
------------------------------------------------------------ 
fsh: (306.29,306.36]
juliandate        lat  temp.degC 
 306.32742  -44.44151    7.85163 
------------------------------------------------------------ 
fsh: (306.36,306.43]
juliandate        lat  temp.degC 
306.394664 -44.671002   7.785862 
------------------------------------------------------------ 
fsh: (306.43,306.5]
juliandate        lat  temp.degC 
306.460658 -44.891848   8.459184 
> 

> b.opc.tr1

fopc: (305.96,306.02]
       time diameter.um       count 
   305.9932    410.4535      1.0000 
------------------------------------------------------------ 
fopc: (306.02,306.09]
       time diameter.um       count 
   306.0586    398.0463      1.0000 
------------------------------------------------------------ 
fopc: (306.09,306.16]
       time diameter.um       count 
   306.1329    396.4840      1.0000 
------------------------------------------------------------ 
fopc: (306.16,306.23]
       time diameter.um       count 
   306.2036    351.0583      1.0000 
------------------------------------------------------------ 
fopc: (306.23,306.29]
       time diameter.um       count 
   306.2681    395.6310      1.0000 
------------------------------------------------------------ 
fopc: (306.29,306.36]
       time diameter.um       count 
   306.3271    361.0793      1.0000 
------------------------------------------------------------ 
fopc: (306.36,306.43]
       time diameter.um       count 
   306.3907    363.0411      1.0000 
------------------------------------------------------------ 
fopc: (306.43,306.5]
       time diameter.um       count 
   306.4664    380.3839      1.0000 
> 

Normally, I would use merge() but this works on data.frames and the 
output of by() apparently cannot be coerced to a dataframe (with 
as.dataframe() for example).

I can merge the list elements one by one by looping over them, but this 
seems inefficient. Do you know of a function to merge two lists like this 
without using looping?

Thanks

Sam

Sam McClatchie, Research scientist (fisheries acoustics))))))))))
NIWA (National Institute of Water & Atmospheric Research Ltd)
PO Box 14 901, Kilbirnie, Wellington, New Zealand
s.mcclatchie at niwa.cri.nz 

                    /\
...>><xX(?> // \\
                 /// \\\   
                //// \\\\
               ///  <?)Xx><<
              /////  \\\\\\
        ><(((?>   
  >><(((?>   ...>><xX(?>O<?)Xx><<

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Thu Feb 22 01:14:34 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Wed, 21 Feb 2001 16:14:34 -0800 (PST)
Subject: [R] glm predict problem with type = "response"
In-Reply-To: <Pine.GSO.4.05.10102211413280.16005-100000@ofis450a.akctr.noaa.gov>
Message-ID: <Pine.A41.4.33.0102211607510.70364-100000@homer08.u.washington.edu>

On Wed, 21 Feb 2001, Anne York wrote:

> The standard errors produced by predict.glm with type = "response" seem
> wrong. Here is an example using R 1.2 windows version along with the same
> problem in Splus. The standard errors for type = "link" are the same in
> both systems.
>

Yes, they're wrong (and they disagree with S-PLUS).

Two lines need to be interchanged in predict.glm: we transform the result
then use the transformed rather than untransformed result to compute the
derivative.

I'll send you the fixed version separately

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pperkins at ucsd.edu  Thu Feb 22 09:21:15 2001
From: pperkins at ucsd.edu (Peter Perkins)
Date: Thu, 22 Feb 2001 00:21:15 -0800
Subject: [R] cex= and plot(), title(), mtext()
Message-ID: <3A94CBFB.1A1CFBBF@ucsd.edu>

using R 1.2.1 under LinuxPPC, using the default X11 graphics device, i
can't get the cex= argument for plot() and title() to have any effect. 
works for text(), though.  the text size for plot() and title() _is_
correct if par(cex=size) is called first.  oddly, mtext() seems to pay
attention to cex=, but to ignore the value set by par().

for example, 

> plot(1:5, 1:5, main="Main", cex=2) # plots title/labels in std size
> mtext("mtext", side=1, at=1.5, line=1, cex=2) # large text here
>
> par(cex=2)
> plot(1:5, 1:5, main="Main") # large text now
> mtext("mtext", side=1, at=1.5, line=1) # but std size here

i don't find this problem in the either the archives or the bug list,
but i can't really believe that it's a bug and no one else has seen it
yet.  so perhaps i'm speaking R with an S accent? or doing something
else stupid?  help?

- peter
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From isabelle.zabalza-mezghani at ifp.fr  Thu Feb 22 09:37:08 2001
From: isabelle.zabalza-mezghani at ifp.fr (isabelle Zabalza-Mezghani)
Date: Thu, 22 Feb 2001 09:37:08 +0100
Subject: [R] Graphical parameters in perspective plot
Message-ID: <3A94CFB4.86D53B5D@ifp.fr>

Hello,

I've a problem for setting graphical parameters in perspective plot
(function persp).
I wonder if it's possible to add some text (function text) on an
existing persp plot USING the axis coordinates.
In fact I want to add some text on a persp plot according to x
coordinates.
I've tried to use text(xcoord,ycoord, label="toto") but the toto text
doesn't appear at (xcoord, ycoord) following the xy axis.
Maybe function text is not accurate for 3D plots ?

By the way, is it possible to modify the ticks length (separately for
each axis) since the arguments tcl and tck seem to be non efficient, and
to modify the box draw type to have a dotted box instead of a lined box
(the argument bty is non efficient).

Thanks in advance

Isabelle

--
Isabelle Zabalza-Mezghani          Tel : 01 47 52 61 99
Institut Fran?ais du P?trole       E-mail : isabelle.zabalza-mezghani at ifp.fr
1-4 Av. Bois Preau - Bat Lauriers
92852 Rueil Malmaison Cedex, France


-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20010222/e077eb8c/attachment.html

From ripley at stats.ox.ac.uk  Thu Feb 22 10:50:56 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 22 Feb 2001 09:50:56 +0000 (GMT)
Subject: [R] cex= and plot(), title(), mtext()
In-Reply-To: <3A94CBFB.1A1CFBBF@ucsd.edu>
Message-ID: <Pine.GSO.4.31.0102220933350.26209-100000@toucan.stats>

On Thu, 22 Feb 2001, Peter Perkins wrote:

> using R 1.2.1 under LinuxPPC, using the default X11 graphics device, i
> can't get the cex= argument for plot() and title() to have any effect.
> works for text(), though.  the text size for plot() and title() _is_
> correct if par(cex=size) is called first.  oddly, mtext() seems to pay
> attention to cex=, but to ignore the value set by par().

(The latter is a design feature, one that Paul Murrell is considering
changing. The default for cex in mtext is NA, not par("cex"). That is
documented on the help page.)

> for example,
>
> > plot(1:5, 1:5, main="Main", cex=2) # plots title/labels in std size

You need to use cex.main, cex.sub etc: see ?par.

> > mtext("mtext", side=1, at=1.5, line=1, cex=2) # large text here
> >
> > par(cex=2)
> > plot(1:5, 1:5, main="Main") # large text now
> > mtext("mtext", side=1, at=1.5, line=1) # but std size here
>
> i don't find this problem in the either the archives or the bug list,
> but i can't really believe that it's a bug and no one else has seen it
> yet.  so perhaps i'm speaking R with an S accent? or doing something
> else stupid?  help?

As far as plot() and title() are concerned, it works like this, I
believe.  (Also for axis().)

The global setting of cex is used to set the initial scale.
There is *additional* scaling of

main titles by cex.main
sub titles by cex.sub
axis annonation by cex.axis
xlab and ylab by cex.lab
plotted text and symbols by a cex argument.

So par(cex=2) and a local arg of cex=2 are different, deliberately.
As with many things in R graphics, I am not sure the documentation
is more than a sketch, though.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fzoellne at TechFak.Uni-Bielefeld.DE  Thu Feb 22 11:24:15 2001
From: fzoellne at TechFak.Uni-Bielefeld.DE (Frank Gerrit Zoellner)
Date: Thu, 22 Feb 2001 11:24:15 +0100
Subject: [R] Problem with tcltk listbox
Message-ID: <20010222112415.A21418@mozart.TechFak.Uni-Bielefeld.DE>

Hi!

I've got two problems with listboxes and selection:
I created a listbox, no problem. Then I bind the Button-1 of the mouse to the listbox to start some things by pressing the mousebutton. The proiblem is that as I click a item of the listbox this error occured:

Error in .Tcl(.Tcl.args(...)) : [tcl] bad listbox index "": must be active, anchor, end, @x,y, or a number.

Repaeting the selection, all works well. This looks quite strang to me.

The second thing is I have two listbox and I want to have the following action:
When I select a item in listbox A the corresponding item of listbox B should be highlited. Doing this, the event is one timestep behind. For example selecting first element in A, no slection in B becaus eof the error mentioned above. Then selecting the second item in A , the first of B is highlited.

Below the source fragments:

prot.listbox<-tklistbox(anzeigeframe,exportselection="0",selectmode="browse")
prot.yscroll<-tkscrollbar(anzeigeframe)

i <- 1
while (i <= length(resultset[,1]))
{
	tkinsert(prot.listbox,'end',paste(resultset[i,1],resultset[i,2],sep="."))
	i<- i+1
}
tkconfigure(prot.listbox,yscrollcommand=paste(.Tk.ID(prot.yscroll),"set"))
tkconfigure(prot.yscroll,command=paste(.Tk.ID(prot.listbox),"yview"))	
tkpack(prot.yscroll,prot.listbox,side="left",fill="y")
		
tkbind(prot.listbox,"<Button-1>",function()
{
  protas.listbox<-tklistbox(anzeigeframe,exportselection="0")
  protas.yscroll<-tkscrollbar(anzeigeframe)
  tkconfigure(protas.listbox,yscrollcommand=paste(.Tk.ID(protas.yscroll),"set"))
  tkconfigure(protas.yscroll,command=paste(.Tk.ID(protas.listbox),"yview"))
  sas.listbox<-tklistbox(anzeigeframe,exportselection="0")
  sas.yscroll<-tkscrollbar(anzeigeframe)
  tkconfigure(sas.listbox,yscrollcommand=paste(.Tk.ID(sas.yscroll),"set"))
  tkconfigure(sas.yscroll,command=paste(.Tk.ID(sas.listbox),"yview"))
  selection<- tkget(prot.listbox,tkcurselection(prot.listbox))
						  
  s1 <- substr(selection,1,4)
  s2 <- substr(selection,6,6)
 
	... doing something						  								  
	
										  i<-1
   while (i <= length(resultset[,1]))
   {
	tkinsert(protas.listbox,'end',paste(resultset[i,1],resultset[i,2],sep="."))
	tkinsert(sas.listbox,'end',resultset[i,3])
	i<-i+1
   }
						  	
   tkpack(protas.yscroll,protas.listbox,side="left",fill="y")
   tkpack(sas.yscroll,sas.listbox,side="left",fill="y")
						
   tkbind(protas.listbox,"<Button-1>",function()
	{
	  asselection<- tkcurselection(protas.listbox)
	  tkselection.clear(sas.listbox,0,"end")
          tksee(sas.listbox,asselection)                                 		  tkselection.set(sas.listbox,asselection)
	})
})


Thanks
-- 
Frank Gerrit Zoellner


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From christian.hoffmann at wsl.ch  Thu Feb 22 12:11:11 2001
From: christian.hoffmann at wsl.ch (Christian Hoffmann)
Date: Thu, 22 Feb 2001 12:11:11 +0100
Subject: [R] Setting elements in data frame
Message-ID: <3.0.6.32.20010222121111.00942100@mail.wsl.ch>

Hi all,

I have a problem which I am biting my teeth into unsuccessfully:

 (x <- data.frame(S1=c("a","b","d","F"),N1=c(2,4,6,9),N2=c(6,NA,0,6)))
  S1 N1 N2
1  a  2  6
2  b  4 NA
3  d  6  0
4  F  9  6
> is.na(x)
     S1    N1    N2
1 FALSE FALSE FALSE
2 FALSE FALSE  TRUE
3 FALSE FALSE FALSE
4 FALSE FALSE FALSE

No I want to be able to do:
1) Setting all elements == 6 to 6000
x[x == 6] <- 6000
Error in [<-.data.frame(*tmp*, x == 6, value = 6000) : 
	matrix subscripts not allowed in replacement

But just would solve the problem.
So I tried to work with which():
> (w <- which(x == 6,TRUE))
  row col
3   3   2
1   1   3
4   4   3

But
x[w[,1],w[,2]] <- 6000;x
  S1   N1   N2
1  a 2     6000
2  b    4   NA
3  d 6000 6000
4  F 6000 6000

and not
x[w[,1],w[,2]] <- 6000;x
  S1   N1   N2
1  a 6000 6000
2  b      4   NA
3  d 6000      
4  F      9 6000


2) Setting all elements == NA to -1000
x[is.na(x)] <- -1000


What am I missing?

Thanks for help,

-christian
Dr.sc.math.Christian W. Hoffmann
Mathematics and Statistical Computing
Landscape Modeling and Web Applications
Swiss Federal Research Institute WSL 
Zuercherstrasse 111
CH-8903 Birmensdorf, Switzerland
phone: ++41-1-739 22 77    fax: ++41-1-739 22 15
e-mail: Hoffmann at WSL.CH
www: http://www.wsl.ch/staff/christian.hoffmann/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Thu Feb 22 12:25:59 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 22 Feb 2001 12:25:59 +0100
Subject: [R] Problem with tcltk listbox
In-Reply-To: Frank Gerrit Zoellner's message of "Thu, 22 Feb 2001 11:24:15 +0100"
References: <20010222112415.A21418@mozart.TechFak.Uni-Bielefeld.DE>
Message-ID: <x2bsrvot6g.fsf@blueberry.kubism.ku.dk>

Frank Gerrit Zoellner <fzoellne at TechFak.Uni-Bielefeld.DE> writes:

> Hi!
> 
> I've got two problems with listboxes and selection: I created a
> listbox, no problem. Then I bind the Button-1 of the mouse to the
> listbox to start some things by pressing the mousebutton. The
> proiblem is that as I click a item of the listbox this error
> occured:
> 
> Error in .Tcl(.Tcl.args(...)) : [tcl] bad listbox index "": must be active, anchor, end, @x,y, or a number.
> 
> Repaeting the selection, all works well. This looks quite strang to me.
> 
> The second thing is I have two listbox and I want to have the
> following action: When I select a item in listbox A the
> corresponding item of listbox B should be highlited. Doing this, the
> event is one timestep behind. For example selecting first element in
> A, no slection in B becaus eof the error mentioned above. Then
> selecting the second item in A , the first of B is highlited. 

...

>    tkbind(protas.listbox,"<Button-1>",function()
> 	{
> 	  asselection<- tkcurselection(protas.listbox)
> 	  tkselection.clear(sas.listbox,0,"end")
>           tksee(sas.listbox,asselection)                                 		  tkselection.set(sas.listbox,asselection)
> 	})

I think you're getting exactly what you ask for... If you bind a query
to Button-1, which is also the button to make selections with, then
there's a question of the order in which the two things should happen.
As it happens, user bindings are handled before system bindings, so
your tkcurselection() gets the old selection. Binding to
<ButtonRelease-1> seems to work rather better. 

PS. You'd have done us all a service by creating a small *directly
executable* example of your problem. E.g.

library(tcltk)
tt<-tktoplevel()
tl<-tklistbox(tt)
tkpack(tl)

tkinsert(tl, "end", month.name)
tkbind(tl, "<Button-1>", function()print(tkcurselection(tl)))


# to fix:
tkbind(tl, "<Button-1>", "")
tkbind(tl, "<ButtonRelease-1>", function()print(tkcurselection(tl)))


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fzoellne at TechFak.Uni-Bielefeld.DE  Thu Feb 22 13:24:24 2001
From: fzoellne at TechFak.Uni-Bielefeld.DE (Frank Gerrit Zoellner)
Date: Thu, 22 Feb 2001 13:24:24 +0100
Subject: [R] Problem with tcltk listbox
In-Reply-To: <x2bsrvot6g.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@pubhealth.ku.dk on Thu, Feb 22, 2001 at 12:25:59PM +0100
References: <20010222112415.A21418@mozart.TechFak.Uni-Bielefeld.DE> <x2bsrvot6g.fsf@blueberry.kubism.ku.dk>
Message-ID: <20010222132424.B21272@mozart.TechFak.Uni-Bielefeld.DE>

No problem. This list is for helping all with R.

Mfg
-- 
Frank Gerrit Zoellner


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Joerg.Kindermann at gmd.de  Thu Feb 22 13:44:54 2001
From: Joerg.Kindermann at gmd.de (Joerg Kindermann)
Date: Thu, 22 Feb 2001 13:44:54 +0100 (MET)
Subject: [R] R-1.2.0: bug report on fn table
Message-ID: <200102221244.NAA04487@compute1.gmd.de>

> table("NA")
numeric(0)
> table("NaN")
numeric(0)


This should probably return something different, like in 

> table("nan")

nan 
  1 
> 

or do I misunderstand something?

regards

Joerg.

--  Dr. Joerg Kindermann                        Knowledge Discovery Team
    GMD   - German National Research Center for Information Technology -
    	       phone: +49 02241 142437 fax: +49 02241 142342
			   http://ais.gmd.de/KD/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fzoellne at TechFak.Uni-Bielefeld.DE  Thu Feb 22 13:44:32 2001
From: fzoellne at TechFak.Uni-Bielefeld.DE (Frank Gerrit Zoellner)
Date: Thu, 22 Feb 2001 13:44:32 +0100
Subject: [R] tcltk: testing for widgets?
In-Reply-To: <x24rxp8yhq.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@pubhealth.ku.dk on Tue, Feb 20, 2001 at 11:01:05AM +0100
References: <20010220094026.A6577@puccini.TechFak.Uni-Bielefeld.DE> <x24rxp8yhq.fsf@blueberry.kubism.ku.dk>
Message-ID: <20010222134432.C21272@mozart.TechFak.Uni-Bielefeld.DE>

Hi!

My last mail was wrong. The problem I encountered was because of variable scoping . The tkwinfo() command is the one i searched for. 

Thanks
-- 
Frank Gerrit Zoellner


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Thu Feb 22 14:07:29 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 22 Feb 2001 14:07:29 +0100
Subject: [R] R-1.2.0: bug report on fn table
In-Reply-To: Joerg Kindermann's message of "Thu, 22 Feb 2001 13:44:54 +0100 (MET)"
References: <200102221244.NAA04487@compute1.gmd.de>
Message-ID: <x27l2iq31q.fsf@blueberry.kubism.ku.dk>

Joerg Kindermann <Joerg.Kindermann at gmd.de> writes:

> > table("NA")
> numeric(0)
> > table("NaN")
> numeric(0)
> 
> 
> This should probably return something different, like in 
> 
> > table("nan")
> 
> nan 
>   1 
> > 
> 
> or do I misunderstand something?

Have a look at the help page for table() and notice the exclude=
argument (!!!)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Thu Feb 22 14:17:35 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 22 Feb 2001 14:17:35 +0100
Subject: [R] Setting elements in data frame
In-Reply-To: Christian Hoffmann's message of "Thu, 22 Feb 2001 12:11:11 +0100"
References: <3.0.6.32.20010222121111.00942100@mail.wsl.ch>
Message-ID: <x24rxmq2kw.fsf@blueberry.kubism.ku.dk>

Christian Hoffmann <christian.hoffmann at wsl.ch> writes:

> Hi all,
> 
> I have a problem which I am biting my teeth into unsuccessfully:
> 
>  (x <- data.frame(S1=c("a","b","d","F"),N1=c(2,4,6,9),N2=c(6,NA,0,6)))
>   S1 N1 N2
> 1  a  2  6
> 2  b  4 NA
> 3  d  6  0
> 4  F  9  6
> > is.na(x)
>      S1    N1    N2
> 1 FALSE FALSE FALSE
> 2 FALSE FALSE  TRUE
> 3 FALSE FALSE FALSE
> 4 FALSE FALSE FALSE
> 
> No I want to be able to do:
> 1) Setting all elements == 6 to 6000
> x[x == 6] <- 6000
> Error in [<-.data.frame(*tmp*, x == 6, value = 6000) : 
> 	matrix subscripts not allowed in replacement

This seems to work, save for a (sort of spurious) warning that 6000 is
not a valid replacement value for the factor column:

x[,]<-lapply(x,function(z){z[z==6]<-6000;z})

(Why the comma? Search me...)

> 2) Setting all elements == NA to -1000
> x[is.na(x)] <- -1000

Same story..

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pflugshaupt at cirsium.ethz.ch  Thu Feb 22 14:28:42 2001
From: pflugshaupt at cirsium.ethz.ch (Kaspar Pflugshaupt)
Date: Thu, 22 Feb 2001 14:28:42 +0100
Subject: [R] Setting elements in data frame
In-Reply-To: <3.0.6.32.20010222121111.00942100@mail.wsl.ch>
References: <3.0.6.32.20010222121111.00942100@mail.wsl.ch>
Message-ID: <01022214284200.00858@Aconitum>

On Thursday 22 February 2001 12:11, Christian Hoffmann wrote:
> Hi all,
>
> I have a problem which I am biting my teeth into unsuccessfully:
>
>  (x <- data.frame(S1=c("a","b","d","F"),N1=c(2,4,6,9),N2=c(6,NA,0,6)))
>   S1 N1 N2
> 1  a  2  6
> 2  b  4 NA
> 3  d  6  0
> 4  F  9  6
>
> > is.na(x)
>
>      S1    N1    N2
> 1 FALSE FALSE FALSE
> 2 FALSE FALSE  TRUE
> 3 FALSE FALSE FALSE
> 4 FALSE FALSE FALSE
>
> No I want to be able to do:
> 1) Setting all elements == 6 to 6000

Not elegant, nor fast, but works (old BASIC habits die hard):

 for (i in 1:nrow(x))
   for (j in 1:ncol(x))
     if (!is.na(x[i,j]) && x[i,j]==6)
        x[i,j] <- 6000

I'm sure there's a vectorized or otherwise much cleaner solution for this...


> 2) Setting all elements == NA to -1000
> x[is.na(x)] <- -1000

can be done equivalently.

>
>
> What am I missing?

The problem seems to be that you cannot do a matrix subscript (which you 
would do with [is.na(x)] ) on a data frame. This probably is reasonable, 
since it would only work for simple (matrix-like) data frames. You might try 
to work on the data frame column-wise, since columns have the same data.class



Kaspar Pflugshaupt



-- 


Kaspar Pflugshaupt
Geobotanical Institute
ETH Zurich, Switzerland

http://www.geobot.umnw.ethz.ch
mailto:pflugshaupt at geobot.umnw.ethz.ch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pflugshaupt at cirsium.ethz.ch  Thu Feb 22 14:34:15 2001
From: pflugshaupt at cirsium.ethz.ch (Kaspar Pflugshaupt)
Date: Thu, 22 Feb 2001 14:34:15 +0100
Subject: [R] Setting elements in data frame
In-Reply-To: <x24rxmq2kw.fsf@blueberry.kubism.ku.dk>
References: <3.0.6.32.20010222121111.00942100@mail.wsl.ch> <x24rxmq2kw.fsf@blueberry.kubism.ku.dk>
Message-ID: <01022214341501.00858@Aconitum>

On Thursday 22 February 2001 14:17, Peter Dalgaard BSA wrote:


> This seems to work, save for a (sort of spurious) warning that 6000 is
> not a valid replacement value for the factor column:
>
> x[,]<-lapply(x,function(z){z[z==6]<-6000;z})
>
> (Why the comma? Search me...)
>

Works also without the comma:

x <- data.frame(lapply(x,function(x) {x[x==6]<-6000;x}))

but still gives the warning.

Kaspar

-- 


Kaspar Pflugshaupt
Geobotanical Institute
ETH Zurich, Switzerland

http://www.geobot.umnw.ethz.ch
mailto:pflugshaupt at geobot.umnw.ethz.ch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jgoebel at diw.de  Thu Feb 22 14:46:53 2001
From: jgoebel at diw.de (Jan Goebel)
Date: Thu, 22 Feb 2001 14:46:53 +0100
Subject: [R] Setting elements in data frame
In-Reply-To: <3.0.6.32.20010222121111.00942100@mail.wsl.ch>; from christian.hoffmann@wsl.ch on Thu, Feb 22, 2001 at 12:11:11 +0100
References: <3.0.6.32.20010222121111.00942100@mail.wsl.ch>
Message-ID: <20010222144653.A1694@diw14093.diw.de>

Hello,

what about converting the data.frame to a matrix?

x <- data.matrix(x)
x[x==6] <- 6000
x <- as.data.frame(x)
x
  S1   N1   N2
1  2    2 6000
2  3    4   NA
3  4 6000    0
4  1    9 6000

best,

jan

On Thu, 22 Feb 2001, Christian Hoffmann wrote:

> Hi all,
> 
> I have a problem which I am biting my teeth into unsuccessfully:
> 
>  (x <- data.frame(S1=c("a","b","d","F"),N1=c(2,4,6,9),N2=c(6,NA,0,6)))
>   S1 N1 N2
> 1  a  2  6
> 2  b  4 NA
> 3  d  6  0
> 4  F  9  6
> > is.na(x)
>      S1    N1    N2
> 1 FALSE FALSE FALSE
> 2 FALSE FALSE  TRUE
> 3 FALSE FALSE FALSE
> 4 FALSE FALSE FALSE
> 
> No I want to be able to do:
> 1) Setting all elements == 6 to 6000
> x[x == 6] <- 6000
> Error in [<-.data.frame(*tmp*, x == 6, value = 6000) : 
> 	matrix subscripts not allowed in replacement

-- 
+-----------------------------------
 Jan Goebel (mailto:jgoebel at diw.de)

 DIW Berlin 
 Longitudinal Data and Microanalysis
 K?nigin-Luise-Str. 5
 D-14195 Berlin -- Germany --
 phone: 49 30 89789-377
+-----------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Thu Feb 22 15:29:47 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 22 Feb 2001 15:29:47 +0100
Subject: [R] Setting elements in data frame
In-Reply-To: Kaspar Pflugshaupt's message of "Thu, 22 Feb 2001 14:34:15 +0100"
References: <3.0.6.32.20010222121111.00942100@mail.wsl.ch> <x24rxmq2kw.fsf@blueberry.kubism.ku.dk> <01022214341501.00858@Aconitum>
Message-ID: <x21ysqpz8k.fsf@blueberry.kubism.ku.dk>

Kaspar Pflugshaupt <pflugshaupt at cirsium.ethz.ch> writes:

> On Thursday 22 February 2001 14:17, Peter Dalgaard BSA wrote:
> 
> 
> > This seems to work, save for a (sort of spurious) warning that 6000 is
> > not a valid replacement value for the factor column:
> >
> > x[,]<-lapply(x,function(z){z[z==6]<-6000;z})
> >
> > (Why the comma? Search me...)
> >
> 
> Works also without the comma:
> 
> x <- data.frame(lapply(x,function(x) {x[x==6]<-6000;x}))
> 
> but still gives the warning.

Yes. I was trying to avoid the data.frame step by assigning the list
coming out of lapply back to the original frame, thus keeping all
attributes and class info.

You can get rid of the warning with 

x[2:3]<-lapply(x[2:3],function(z){z[z==6]<-6000;z})

or generically

s <-sapply(x,is.numeric)
x[s] <- lapply(x[s],function(z){z[z==6]<-6000;z})

Hmmmm... How about

recode<-function(x,value,replacement){
	x[if (is.na(value)) is.na(x) else x==value] <- replacement
	x
}
s <-sapply(x,is.numeric)
x[s] <- lapply(x[s], recode, 6, 6000)
x[s] <- lapply(x[s], recode, NA, 1000)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pflugshaupt at cirsium.ethz.ch  Thu Feb 22 16:10:20 2001
From: pflugshaupt at cirsium.ethz.ch (Kaspar Pflugshaupt)
Date: Thu, 22 Feb 2001 16:10:20 +0100
Subject: [R] Setting elements in data frame
In-Reply-To: <x21ysqpz8k.fsf@blueberry.kubism.ku.dk>
References: <3.0.6.32.20010222121111.00942100@mail.wsl.ch> <01022214341501.00858@Aconitum> <x21ysqpz8k.fsf@blueberry.kubism.ku.dk>
Message-ID: <01022216102002.00858@Aconitum>

On Thursday 22 February 2001 15:29, Peter Dalgaard BSA wrote:


> Hmmmm... How about
>
> recode<-function(x,value,replacement){
> 	x[if (is.na(value)) is.na(x) else x==value] <- replacement
> 	x
> }
> s <-sapply(x,is.numeric)
> x[s] <- lapply(x[s], recode, 6, 6000)
> x[s] <- lapply(x[s], recode, NA, 1000)

Getting better and better!

While we're at it: Why would the following not work (it's the first version I 
tried):

  data.frame(lapply(x,function(z) ifelse(z==6,6000,z)))

It does the replacement all right, but the factor column gets converted to 
integer. Looking at ?ifelse, I find that 

     `ifelse' returns a value with the same shape as `test' which is
     filled with elements selected from either `yes' or `no' depending
     on whether the element of `test' is `TRUE' or `FALSE'. If `yes' or
     `no' are too short, their elements are recycled.

So could it be that because 6 (an integer) is present in the comparison, the 
result _will_ be integer no matter what class z is? The help doesn't say so, 
but I might overlook something basic. Still, checking this out:

> data.frame(lapply(x,function(x) ifelse(x==6.0,6000.0,x)))  
# would give float results, if above were true
  S1   N1   N2
1  2    2 6000
2  3    4   NA
3  4 6000    0
4  1    9 6000

still gives integer results. And the problem does not lie with the data.frame 
conversion: 

> str(lapply(x, function(x) ifelse(x==6,6000,x)))
List of 3
 $ S1: int [1:4] 2 3 4 1
 $ N1: num [1:4] 2 4 6000 9
 $ N2: num [1:4] 6000 NA 0 6000



puzzled-ly yours


Kaspar Pflugshaupt

-- 


Kaspar Pflugshaupt
Geobotanical Institute
ETH Zurich, Switzerland

http://www.geobot.umnw.ethz.ch
mailto:pflugshaupt at geobot.umnw.ethz.ch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Thu Feb 22 16:30:38 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 22 Feb 2001 16:30:38 +0100
Subject: [R] Setting elements in data frame
In-Reply-To: Kaspar Pflugshaupt's message of "Thu, 22 Feb 2001 16:10:20 +0100"
References: <3.0.6.32.20010222121111.00942100@mail.wsl.ch> <01022214341501.00858@Aconitum> <x21ysqpz8k.fsf@blueberry.kubism.ku.dk> <01022216102002.00858@Aconitum>
Message-ID: <x2y9uyohup.fsf@blueberry.kubism.ku.dk>

Kaspar Pflugshaupt <pflugshaupt at cirsium.ethz.ch> writes:

>      `ifelse' returns a value with the same shape as `test' which is
>      filled with elements selected from either `yes' or `no' depending
>      on whether the element of `test' is `TRUE' or `FALSE'. If `yes' or
>      `no' are too short, their elements are recycled.
> 
> So could it be that because 6 (an integer) is present in the comparison, the 
> result _will_ be integer no matter what class z is? The help doesn't say so, 
> but I might overlook something basic. Still, checking this out:

Yes, it coerces and drops all attributes, including class. So factors
invariably become integers. For an extreme example, try

> ifelse(1:12==0,factor(month.name),factor(month.name))
 [1]  5  4  8  1  9  7  6  2 12 11 10  3


> > data.frame(lapply(x,function(x) ifelse(x==6.0,6000.0,x)))  
> # would give float results, if above were true
>   S1   N1   N2
> 1  2    2 6000
> 2  3    4   NA
> 3  4 6000    0
> 4  1    9 6000
> 
> still gives integer results. And the problem does not lie with the data.frame 
> conversion: 

You are using the wrong tool to check it. Numerics close enough to
integers print like that independently of storage mode. Have a look at
this:


> storage.mode(ifelse(1:12==1,0,factor(month.name)))
[1] "double"
> storage.mode(ifelse(1:12==1,as.integer(0),factor(month.name)))
[1] "integer"

(notice that the default numeric storage mode is double, 0.0 and 0 is
the same).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bates at stat.wisc.edu  Thu Feb 22 16:40:29 2001
From: bates at stat.wisc.edu (Douglas Bates)
Date: 22 Feb 2001 09:40:29 -0600
Subject: [R] bic.logit
Message-ID: <6rhf1mpvyq.fsf@franz.stat.wisc.edu>

I have been contacted by a researcher who would like to use the
bic.logit function (http://lib.stat.cmu.edu/S/bic.logit) for S-PLUS
which applies Bayesian Model Averaging to variable selection for
logistic regression.  I can see that the S-PLUS function uses a call
to a Fortran "leaps" function, which does not seem to be available in
R.

Has this method or a similar method been ported to R?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Thu Feb 22 17:18:26 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Thu, 22 Feb 2001 08:18:26 -0800 (PST)
Subject: [R] bic.logit
In-Reply-To: <6rhf1mpvyq.fsf@franz.stat.wisc.edu>
Message-ID: <Pine.A41.4.33.0102220816460.229614-100000@homer06.u.washington.edu>

On 22 Feb 2001, Douglas Bates wrote:

> I have been contacted by a researcher who would like to use the
> bic.logit function (http://lib.stat.cmu.edu/S/bic.logit) for S-PLUS
> which applies Bayesian Model Averaging to variable selection for
> logistic regression.  I can see that the S-PLUS function uses a call
> to a Fortran "leaps" function, which does not seem to be available in
> R.
>
> Has this method or a similar method been ported to R?

I think the leaps package contains all the functionality of the Fortran
"leaps" function.  I have never quite got around to porting the bic.*
functions, but I have looked at the problem a few times and it didn't seem
that hard.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jl7001 at axe.humboldt.edu  Thu Feb 22 18:46:38 2001
From: jl7001 at axe.humboldt.edu (Jack Lewis)
Date: Thu, 22 Feb 2001 09:46:38 -0800
Subject: [R] Installing chron
References: <200006282113.XAA23403@aragorn.ci.tuwien.ac.at>
Message-ID: <3A95507D.C405CBF3@axe.humboldt.edu>

R folks:

What is the procedure for installing the chron package with R 1.2.1
for Windows?  I have downloaded chron_2_2-8_tar.gz from CRAN,
but the installer program (rwinst.exe) wants a .zip file and I was
unable to locate one at the CRAN site.

I also tried extracting the tar.gz file with winzip directly to the folder
C:\Program Files\R Language\rw1021\library.  However that results
in:

> library(chron)
Warning message:
Package  `chron' contains no R code in: library(chron)

Thanks for any advice.


Jack Lewis                           Redwood Sciences Laboratory
707-825-2929 voice                   Pacific Southwest Research Station
707-825-2901 fax                     USDA Forest Service
jl7001 at axe.humboldt.edu              http://www.rsl.psw.fs.fed.us
jlewis01 at fs.fed.us (alternate)

           --------------------------------------------
Thought must be divided against itself before it can come to any
knowledge of itself.                             (Aldous Huxley)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Feb 22 19:02:53 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 22 Feb 2001 18:02:53 +0000 (GMT)
Subject: [R] Installing chron
Message-ID: <200102221802.SAA29988@toucan.stats.ox.ac.uk>

> Date: Thu, 22 Feb 2001 09:46:38 -0800
> From: Jack Lewis <jl7001 at axe.humboldt.edu>
> 
> R folks:
> 
> What is the procedure for installing the chron package with R 1.2.1
> for Windows?  I have downloaded chron_2_2-8_tar.gz from CRAN,
> but the installer program (rwinst.exe) wants a .zip file and I was
> unable to locate one at the CRAN site.

It should be there in bin/windows/contrib (and seems to be at Vienna).
It is definitely at

http://www.stats.ox.ac.uk/pub/RWin/chron.zip

> I also tried extracting the tar.gz file with winzip directly to the folder
> C:\Program Files\R Language\rw1021\library.  However that results
> in:
> 
> > library(chron)
> Warning message:
> Package  `chron' contains no R code in: library(chron)
> 

That would need to be unpacked in src/library, then installed.  Please
remove library\chron before trying anything else.

> Thanks for any advice.

The simplest procedure is I believe

1) (Once only) get http://www.stats.ox.ac.uk/pub/Rtools/wget.zip and unzip it
somewhere in your PATH.

2) Start up R and run
   install.packages("chron")

Future versions of R may not need step 1).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bitwrit at ozemail.com.au  Thu Feb 22 20:09:56 2001
From: bitwrit at ozemail.com.au (Jim Lemon)
Date: Fri, 23 Feb 2001 06:09:56 +1100
Subject: [R] Daggy function page
Message-ID: <3A956404.54E5765E@ozemail.com.au>

May I second the call for a less-than-official list of useful
functions.  Something along the lines of the GPL, you know, "No
guarantees whatsoever, I'll be in Bermuda spending the money if it blows
up..."  There are a number of functions that I have written to solve
niggling problems.  I've even emailed them to others and not been
flamed!  While a mega-list by function name with a short description
might be messy, it also might encourage meaningful function names...

Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From paul at stat.auckland.ac.nz  Thu Feb 22 22:19:51 2001
From: paul at stat.auckland.ac.nz (Paul Murrell)
Date: Fri, 23 Feb 2001 10:19:51 +1300
Subject: [R] Graphical parameters in perspective plot
References: <3A94CFB4.86D53B5D@ifp.fr>
Message-ID: <010901c09d15$31c87a30$175dd882@stat.auckland.ac.nz>

Hi


> I've a problem for setting graphical parameters in perspective plot
> (function persp).
> I wonder if it's possible to add some text (function text) on an
> existing persp plot USING the axis coordinates.
> In fact I want to add some text on a persp plot according to x
> coordinates.
> I've tried to use text(xcoord,ycoord, label="toto") but the toto text
> doesn't appear at (xcoord, ycoord) following the xy axis.
> Maybe function text is not accurate for 3D plots ?


Unfortunately, all of the annotation functions -- text(), points(), lines(),
... -- only work in 2D.
In S-Plus, persp() returns a value that can be used to transform 3D
locations to 2D, but this sort of thing is not (yet) available in R.  If the
annotations you have in mind are _very_ simple then it might be enough to
make use of the value of par("usr").  For example, to stick a big ugly label
right in the middle of the persp plot you could do something like ...

    # one of the persp() examples
     x <- seq(-10, 10, length=50)
     y <- x
     f <- function(x,y)
     {
         r <- sqrt(x^2+y^2)
         10 * sin(r)/r
     }
     z <- outer(x, y, f)
     z[is.na(z)] <- 1
     par(bg = "white")
     persp(x, y, z, theta = 30, phi = 30, expand = 0.5, col = "lightblue",
           xlab = "X", ylab = "Y", zlab = "Z")

    # a very basic annotation
    text(mean(par("usr")[1:2]), mean(par("usr")[3:4]), "My Perspective Plot
!!", col="red", cex=3)

Again depending on what you want to do, Uwe Ligges' scatterplot3d package
might be useful because it appears to provide 3D to 2D transformations, .


> By the way, is it possible to modify the ticks length (separately for
> each axis) since the arguments tcl and tck seem to be non efficient, and
> to modify the box draw type to have a dotted box instead of a lined box
> (the argument bty is non efficient).


persp() allows normal par() arguments to be passed to it, but unfortunately
it ignores virtually all of them.  This will hopefully be fixed in the
future.

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From meles at free.fr  Thu Feb 22 23:25:38 2001
From: meles at free.fr (Meles MELES)
Date: Thu, 22 Feb 2001 23:25:38 +0100
Subject: [R] [newbie] Cox Baseline Hazard
Message-ID: <01022223253802.01489@meles>

Hello everybody.
First of all, I would like to present myself.
I'm a french student in public health and I like statistics though I'm 
not that good in mathematics (but I try to catch up). I've discovered R 
recently while trying to find a statistical program in order to avoid 
rebooting my computer under windows when I need to do some statistical 
work.

And here is my first question.
I'm actually trying to model a survival curve using a cox model.
But I need the baseline cumulative hazard. I've been looking around on 
the web and the archives, and I found that it as to do with the 
nelson-aalen estimation.
But I must not understand all the doc very well, because I can't get 
the baseline hazard.
Could you help me, please.

Best regards.

PS : I hope you'll forgive my poor english writing.
-- 
Blaise TRAMIER aka Meles.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Thu Feb 22 23:46:41 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Thu, 22 Feb 2001 14:46:41 -0800 (PST)
Subject: [R] [newbie] Cox Baseline Hazard
In-Reply-To: <01022223253802.01489@meles>
Message-ID: <Pine.A41.4.33.0102221437220.229614-100000@homer06.u.washington.edu>

On Thu, 22 Feb 2001, Meles MELES wrote:

> Hello everybody.
> First of all, I would like to present myself.
> I'm a french student in public health and I like statistics though I'm
> not that good in mathematics (but I try to catch up). I've discovered R
> recently while trying to find a statistical program in order to avoid
> rebooting my computer under windows when I need to do some statistical
> work.
>
> And here is my first question.
> I'm actually trying to model a survival curve using a cox model.
> But I need the baseline cumulative hazard. I've been looking around on
> the web and the archives, and I found that it as to do with the
> nelson-aalen estimation.
> But I must not understand all the doc very well, because I can't get
> the baseline hazard.
> Could you help me, please.


In the survival5 package the function survfit() will extract baseline
survival from a Cox model.

In order to get the baseline hazard you need to transform the baseline
survival.  There are two methods of calculating the baseline survival, the
default one gives the baseline hazard estimator you want. It is attributed
to Aalen, Breslow, or Peto, depending on who one asks.

Using the example from help(survfit)

    #fit a cox proportional hazards model and plot the
     #predicted survival curve
     data(ovarian)
     fit <- coxph( Surv(futime,fustat)~resid.ds+rx+ecog.ps,data=ovarian)

Compute the survival function
     ss<-survfit(fit)

Now you can graph the baseline cumulative hazard with
     plot(ss,fun="cumhaz")

or extract the information into a variable with
     cumulative.hazard<- -log(ss$surv)
     observation.times<-ss$time


The survival object "ss" also contains upper and lower confidence bounds
and other information about the survival curve


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Fri Feb 23 00:13:17 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 23 Feb 2001 00:13:17 +0100
Subject: [R] [newbie] Cox Baseline Hazard
In-Reply-To: Meles MELES's message of "Thu, 22 Feb 2001 23:25:38 +0100"
References: <01022223253802.01489@meles>
Message-ID: <x23dd61fci.fsf@blueberry.kubism.ku.dk>

Meles MELES <meles at free.fr> writes:

> And here is my first question.
> I'm actually trying to model a survival curve using a cox model.
> But I need the baseline cumulative hazard. I've been looking around on 
> the web and the archives, and I found that it as to do with the 
> nelson-aalen estimation.
> But I must not understand all the doc very well, because I can't get 
> the baseline hazard.
> Could you help me, please.

survfit(coxph(...)) gives you the baseline survival function, which by
default (type="aalen") is calculated as S(t) = exp(-Lambda(t))
where Lambda(t) is the cumulative hazard. So all you have to do is to
reverse the formula as Lambda(t) = -log(S(t))

The estimated S(t) is in the $surv component of the object returned by
survfit(). 

e.g.

example(survfit)
s <- survfit(fit)
plot(c(0,s$time),c(0,-log(s$surv)),type='s')

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From meles at free.fr  Fri Feb 23 00:35:03 2001
From: meles at free.fr (Meles MELES)
Date: Fri, 23 Feb 2001 00:35:03 +0100
Subject: [R] [newbie] Cox Baseline Hazard
In-Reply-To: <Pine.A41.4.33.0102221437220.229614-100000@homer06.u.washington.edu>
References: <Pine.A41.4.33.0102221437220.229614-100000@homer06.u.washington.edu>
Message-ID: <01022300350302.02844@meles>

I must have a vocabulary problem.
I've tryed the method you gave me and I get a Cumulative Hazard for my 
Data.
But, what I'm looking for is the Baseline Hazard (I don't know if the 
term is appropriate).

If I consider a cox model for the intantaneous risk of death:
h(t,Z)=h0(t)exp(b'Z), what I'm looking for is H0(t).

What I get with the surfit() methot is H(t).

I might be completly wrong, but when I compute my data in SPSS, I get a 
Cumulative Baseline Hazard of 0.062, in R, with the surfit way, I get 
0.33, which correspond in the SPSS result to the Cumulative Hazard.

I hope that what i'm writing is not too fuzzy.

I hope my questions are not too boring :-)
-- 
Blaise aka Meles
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maitra at math.umbc.edu  Fri Feb 23 04:37:40 2001
From: maitra at math.umbc.edu (Ranjan Maitra)
Date: Thu, 22 Feb 2001 22:37:40 -0500 (EST)
Subject: [R] hclust question
Message-ID: <Pine.LNX.4.30.0102222234280.20620-100000@param.math.umbc.edu>

Dear all,

I have a question with regard to the use of hclust. I would like to be
able to specify my own distance matrix instead of asking R to compute
the distance matrix for me. It is computationally easier for me this
way. My question is: How can I get hclust to accept this?

Thanks,
Ranjan

-- 
 ***************************************************************************
          Ranjan Maitra, Department of Mathematics and Statistics,
     University of Maryland, Baltimore County, Baltimore, MD 21250, USA.
 ***************************************************************************

  \|/         satyamevajayate         |      tamasomaajyotirgamaya      \|/
  -*-                                 |                                 -*-
  /|\       TRUTH SHALL PREVAIL       |      FROM DARKNESS TO LIGHT     /|\

 ***************************************************************************
   Ph: 410-455-2436   FAX: 410-455-1066   http://www.math.umbc.edu/~maitra
 ***************************************************************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dpowers at mail.la.utexas.edu  Fri Feb 23 04:53:15 2001
From: dpowers at mail.la.utexas.edu (Daniel A. Powers)
Date: Thu, 22 Feb 2001 21:53:15 -0600 (CST)
Subject: [R] [newbie] Cox Baseline Hazard
In-Reply-To: <01022223253802.01489@meles>
Message-ID: <Pine.GSO.4.05.10102222150230.7015-100000@dahlia.la.utexas.edu>

Meles --

Here are a couple of routines. One computes Aalen's estimate of the
cumulative hazard and the other a log-likelihood based on it

Cheers,
Dan
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Dan Powers
Associate Professor, Sociology  
University of Texas at Austin                    
--snip


aalen <- function(coxfit)
{
#calculate Aalen's estimate of cum hazard
if(!inherits(coxfit,"coxph")) stop(
"argument must be a proportional hazard's fit")
event <- coxfit$y[,"status"] == 1
time  <- coxfit$y[,"time"]
risk  <- exp(coxfit$linear.predictor)
   dt <- unique(time[event])
    k <- length(dt)
lambda <- rep(0,k)
for(i in 1:k) {
    lambda[i] <- sum(event[time==dt[i]])/sum(risk[time >= dt[i]])
}
data.frame(time=dt, lambda=lambda)
}



aalen.loglik <- function(coxfit)
{
# Calculate survival likelihood using Cox-Aalen Estimates 
#
      a <- aalen(coxfit)
  event <- coxfit$y[,"status"] == 1
   time <- coxfit$y[,"time"]
   risk <- exp(coxfit$linear.predictors)
 loglik <-0
   for(i in 1:length(event)) {
if (event[i]) {
             lambda <- risk[i] * a$lambda[a$time == time[i]]
             loglik <- loglik + log(lambda)
         }
      loglik <- loglik - risk[i] * sum(a$lambda[a$time <= time[i]])
     }
  loglik
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From faheem at email.unc.edu  Fri Feb 23 07:16:32 2001
From: faheem at email.unc.edu (Faheem Mitha)
Date: Fri, 23 Feb 2001 01:16:32 -0500 (EST)
Subject: [R] a couple of minor points about SHLIB
Message-ID: <Pine.LNX.4.21.0102230105460.542-100000@Chrestomanci.home.earth>

Dear People,

1) When I use the R search engine to find SHLIB (the text says "You can
search for keywords, function and data names and text in help page titles.
Usage: Enter a string in the text field below and hit RETURN"),

I get "no matches for "SHLIB" have been found!"

On the other hand, when I do 

>help(SHLIB) 

at the R command line, the help page for SHLIB immediately pops up (having
already activated browser help with help.start()). Is there some reason
for this?

2) On the online help page and in the document "Writing R Extensions" it
is recommended to use 

R CMD SHLIB foo.c

to create shared libraries to load into R. On the other hand, the Ripley
and Venables book "S Programming" have on pg 239

R SHLIB foo.c

Both of these work, and seem to work in exactly the same way. If CMD is
unnecessary, why use it? And what is the meaning of CMD?

                        Sincerely, Faheem Mitha.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From faheem at email.unc.edu  Fri Feb 23 07:35:11 2001
From: faheem at email.unc.edu (Faheem Mitha)
Date: Fri, 23 Feb 2001 01:35:11 -0500 (EST)
Subject: [R] using the .C interface to call compiled C code
Message-ID: <Pine.LNX.4.21.0102230133540.542-100000@Chrestomanci.home.earth>

Dear People,

I have been trying to learn how to use the .C interface. A friend gave me
a toy example, and I have been playing with it. It is 


(C code)

#ifdef USING_R
  typedef int Sint;
#else
  typedef long Sint;
#endif

void kosum(double *a, double *b, Sint *na) 
{
  int i, j, nab;
  double temp;
  nab=*na;
  temp=0.0;
  for(i=0;i < nab; i++)
  {
    temp=temp+a[i];
  }
   *b=temp;
}


And the calling code in R is 

test1<-
function(a, b)
{
        .C("kosum",
                as.double(a),
                b = double(1),
                as.integer(length(a)))[[2]]
}

Now, I noticed that if I change

for(i=0;i < nab; i++) to say for(i=0;i <= nab; i++) or even  
for(i=0;i <= nab + 1; i++)

everything seems happy, and I get the same answers. But I don't understand
why this is so. I am surely trying to read from nonexistent memory in this
case, and I should have some problems.

I may be missing the obvious, but I am neither very experienced in R or in
C.

Also, if anyone has a simple example of using .C that they would like to
share with me, or if they can point to me to (very) simple examples in the
source code that would be suitable for an beginner, I would be extremely
grateful.

                           Sincerely, Faheem Mitha.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gb at stat.umu.se  Fri Feb 23 09:17:03 2001
From: gb at stat.umu.se (gb)
Date: Fri, 23 Feb 2001 09:17:03 +0100 (CET)
Subject: [R] [newbie] Cox Baseline Hazard
In-Reply-To: <01022300350302.02844@meles>
Message-ID: <Pine.LNX.4.30.0102230912470.26460-100000@tal.stat.umu.se>

On Fri, 23 Feb 2001, Meles MELES wrote:

> I must have a vocabulary problem.
> I've tryed the method you gave me and I get a Cumulative Hazard for my
> Data.
> But, what I'm looking for is the Baseline Hazard (I don't know if the
> term is appropriate).
>
> If I consider a cox model for the intantaneous risk of death:
> h(t,Z)=h0(t)exp(b'Z), what I'm looking for is H0(t).
>
> What I get with the surfit() methot is H(t).
>
> I might be completly wrong, but when I compute my data in SPSS, I get a
> Cumulative Baseline Hazard of 0.062, in R, with the surfit way, I get
> 0.33, which correspond in the SPSS result to the Cumulative Hazard.
>
> I hope that what i'm writing is not too fuzzy.
>
> I hope my questions are not too boring :-)

Certainly not!
I think the problem here is that what Thomas and Peter call the
"baseline hazard" actually is calculated at the mean values of
the covariates. You can get what you want by using the "newdata"
parameter in  survfit. Try

  fit <- coxph( Surv(futime,fustat)~resid.ds+rx+ecog.ps,data=ovarian)
  base <- data.frame(age=0, resid.ds=0, rx = 0, ecog.ps = 0)
  ss <- survfit(fit)
  ss1 <- survfit(fit, newdata = base)
  par(mfrow = c(2, 1))
  plot(ss, fun = "cumhaz")
  plot(ss1, fun = "cumhaz")

and you see the difference.

G?ran
-- 
 G?ran Brostr?m                      tel: +46 90 786 5223
 professor                           fax: +46 90 786 6614
 Department of Statistics            http://www.stat.umu.se/egna/gb/
 Ume? University
 SE-90187 Ume?, Sweden             e-mail: gb at stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From meles at free.fr  Fri Feb 23 08:38:02 2001
From: meles at free.fr (Meles MELES)
Date: Fri, 23 Feb 2001 08:38:02 +0100
Subject: [R] Cox hazard
Message-ID: <01022308380200.01560@meles>

Thanks a lot for all your answers.
-- 
Blaise aka Meles
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Feb 23 08:37:42 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 23 Feb 2001 07:37:42 +0000 (GMT)
Subject: [R] using the .C interface to call compiled C code
In-Reply-To: <Pine.LNX.4.21.0102230133540.542-100000@Chrestomanci.home.earth>
Message-ID: <Pine.GSO.4.31.0102230727420.25600-100000@auk.stats>

On Fri, 23 Feb 2001, Faheem Mitha wrote:

> Dear People,
>
> I have been trying to learn how to use the .C interface. A friend gave me
> a toy example, and I have been playing with it. It is
>
>
> (C code)
>
> #ifdef USING_R
>   typedef int Sint;
> #else
>   typedef long Sint;
> #endif
>
> void kosum(double *a, double *b, Sint *na)
> {
>   int i, j, nab;
>   double temp;
>   nab=*na;
>   temp=0.0;
>   for(i=0;i < nab; i++)
>   {
>     temp=temp+a[i];
>   }
>    *b=temp;
> }
>
>
> And the calling code in R is
>
> test1<-
> function(a, b)
> {
>         .C("kosum",
>                 as.double(a),
>                 b = double(1),
>                 as.integer(length(a)))[[2]]
> }
>
> Now, I noticed that if I change
>
> for(i=0;i < nab; i++) to say for(i=0;i <= nab; i++) or even
> for(i=0;i <= nab + 1; i++)
>
> everything seems happy, and I get the same answers. But I don't understand
> why this is so. I am surely trying to read from nonexistent memory in this
> case, and I should have some problems.

The memory exists.  It is not allocated as part of your R object a.  It
happened to contain 0 on the system you tried this on, on the occasion on
which you tried it.   Reading outside arrays can give wrong answers, and
writing outside them can cause other calculations to give wrong answers or
even crash R.

It is important to write correct C.  Using your compiler's checking tools
(lint, -Wall, ...) will help.  But in this case the C code has no
indication of how large the array pointed to by `*a' is, so it is down to
the programmer to check that the two sides of the R/C interface are
consistent.

> I may be missing the obvious, but I am neither very experienced in R or in
> C.
>
> Also, if anyone has a simple example of using .C that they would like to
> share with me, or if they can point to me to (very) simple examples in the
> source code that would be suitable for an beginner, I would be extremely
> grateful.

`Writing R Extensions' has the official R examples.  There are many, many
more in packages, both shipped with R and on CRAN.  Look in
src/library/eda/src and src/library/mva/src for some really simple ones.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Feb 23 08:22:43 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 23 Feb 2001 07:22:43 +0000 (GMT)
Subject: [R] hclust question
In-Reply-To: <Pine.LNX.4.30.0102222234280.20620-100000@param.math.umbc.edu>
Message-ID: <Pine.GSO.4.31.0102230718350.25600-100000@auk.stats>

On Thu, 22 Feb 2001, Ranjan Maitra wrote:

> Dear all,
>
> I have a question with regard to the use of hclust. I would like to be
> able to specify my own distance matrix instead of asking R to compute
> the distance matrix for me. It is computationally easier for me this
> way. My question is: How can I get hclust to accept this?

I am puzzled:

?hclust

Arguments:

       d: a dissimilarity structure as produced by `dist'.

So hclust accepts a dissimilarity matrix as its first argument, and does
not compute a distance matrix.

Just supply `d'.  The `Value' section of ?dist tells you how to specify it.
For hclust only the `Size' and `Labels' attributes are needed, I believe.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Feb 23 08:13:39 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 23 Feb 2001 07:13:39 +0000 (GMT)
Subject: [R] a couple of minor points about SHLIB
In-Reply-To: <Pine.LNX.4.21.0102230105460.542-100000@Chrestomanci.home.earth>
Message-ID: <Pine.GSO.4.31.0102230705420.25600-100000@auk.stats>

On Fri, 23 Feb 2001, Faheem Mitha wrote:

> Dear People,
>
> 1) When I use the R search engine to find SHLIB (the text says "You can
> search for keywords, function and data names and text in help page titles.
> Usage: Enter a string in the text field below and hit RETURN"),
>
> I get "no matches for "SHLIB" have been found!"
>
> On the other hand, when I do
>
> >help(SHLIB)
>
> at the R command line, the help page for SHLIB immediately pops up (having
> already activated browser help with help.start()). Is there some reason
> for this?

SHLIB is in none of

keywords
function and data names  (but it is supposed to look like one of these)
text in help page titles

However, the real issue is that the platform-specific help files are
not being listed in the CONTENTS file used for indexing.  That's a bug
in Rd2contents (or its usage).


> 2) On the online help page and in the document "Writing R Extensions" it
> is recommended to use
>
> R CMD SHLIB foo.c
>
> to create shared libraries to load into R. On the other hand, the Ripley
> and Venables book "S Programming" have on pg 239
>
> R SHLIB foo.c
>
> Both of these work, and seem to work in exactly the same way. If CMD is
> unnecessary, why use it? And what is the meaning of CMD?

The preferred usage has changed since `S Programming' was written (in the
days of 0.91.0, well over a year ago).  One day, R SHLIB may no longer
work.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From theis at statistik.uni-dortmund.de  Fri Feb 23 10:06:02 2001
From: theis at statistik.uni-dortmund.de (Winfried Theis)
Date: Fri, 23 Feb 2001 10:06:02 +0100 (CET)
Subject: [R] hclust question
In-Reply-To: <Pine.LNX.4.30.0102222234280.20620-100000@param.math.umbc.edu>
Message-ID: <XFMail.010223100602.theis@statistik.uni-dortmund.de>

Dear Ranjan,
On 23-Feb-01 Ranjan Maitra wrote:
> Dear all,
> 
> I have a question with regard to the use of hclust. I would like to be
> able to specify my own distance matrix instead of asking R to compute
> the distance matrix for me. It is computationally easier for me this
> way. My question is: How can I get hclust to accept this?
Have a look at the help page of dist:
Value

An object of class "dist". 
The lower triangle of the distance matrix stored by columns in a single vector.
The vector has the attributes "Size", "Diag", "Upper", "Labels" and
"class" equal to "dist".

So you have to shape your result according to this, when you got your vector d
you can add the attributes & class by

 attr(d, "Size") <- N
    attr(d, "Labels") <- dimnames(x)[[1]]
    attr(d, "Diag") <- diag
    attr(d, "Upper") <- upper
    attr(d, "method") <- METHODS[method]
    attr(d, "call") <- match.call()
    class(d) <- "dist"
  
(cited from the code of dist)

Regards, Winfried

> 
> Thanks,
> Ranjan
> 
> -- 
>  ***************************************************************************
>           Ranjan Maitra, Department of Mathematics and Statistics,
>      University of Maryland, Baltimore County, Baltimore, MD 21250, USA.
>  ***************************************************************************
> 
>   \|/         satyamevajayate         |      tamasomaajyotirgamaya      \|/
>   -*-                                 |                                 -*-
>   /|\       TRUTH SHALL PREVAIL       |      FROM DARKNESS TO LIGHT     /|\
> 
>  ***************************************************************************
>    Ph: 410-455-2436   FAX: 410-455-1066   http://www.math.umbc.edu/~maitra
>  ***************************************************************************
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _

----------------------------------
E-Mail: Winfried Theis <theis at statistik.uni-dortmund.de>
Date: 23-Feb-01
Time: 09:58:31
Dipl.-Math. Winfried Theis, Fachbereich Statistik, Graduiertenkolleg
"Angewandte Statistik"
Universität Dortmund, 44221 Dortmund
Tel.: +49-231-755-5903  FAX: +49-231-755-4387
----------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From znmeb at aracnet.com  Tue Feb 20 18:20:09 2001
From: znmeb at aracnet.com (M. Edward (Ed) Borasky)
Date: Tue, 20 Feb 2001 09:20:09 -0800 (PST)
Subject: [R] Holt-Winters code in R or S?
In-Reply-To: <3A92F7E5.18591.3197DD6@localhost>
Message-ID: <Pine.LNX.4.31.0102200846530.17008-100000@shell1.aracnet.com>

On Tue, 20 Feb 2001, John Aitchison wrote:

> dunno if there is any specifically as such, and a lot of the ad-hoc
> forecasting procedures can be implemented as special cases of  AR/MA
> approaches which are variously implemented in ts, tseries, dse etc .. but
> fwiw I just implemented ewma as a programming exercise and will do
> discounted least squares/Holt Winters  in the next day or so .. I am
> following the notation and procedure of Harvey "Forecasting, structural
> time series models and the Kalman filter".. anyone who wants this code,
> rudimentary as it is,,just email me.

Do you have a web page? You could post it there. If not, sure, I'll take it.

>
> I have an interest in the "BATS" approach (Bayesian Analysis of Time
> Series.. as in Harrison, West, Pole ) and somewhere I have some skeleton S
> code that I think I could probably port to R
>
> I am also working through "Non-linear time series models in empirical
> finance" (Franses & van Dijk) and slowly implementing some bits and pieces
> .. I'd be glad to contribute these as and when.

Now how did you guess I was interested in computational finance? Did you peek
at my web page or something? :-)

> I think this raises the issue , attention BR and the core development
> team, as to whether there is a role for a repository of "slop code" .. use
> at your own risk, probably not a lot of documentation,  not a full fledged
> package, perhaps slightly "disreputable", a sort of relaxed and
> comfortable approach and hey, why not?... if there is no right answer to
> an ill-specified question, then maybe it is sensible to admit some other
> approaches.
>
> For example, I have followed with interest the process of admitting
> factanal() into the fold. got varimax and promax rotations and caveats
> galore, as there should be. Personally,  I have always liked procedures
> along the lines of the 'iterative powered vector factor analysis'
> approach in Overall and Klett ~1972 and would be happy to implement such
> .. without having done it in R , I suspect that it is just a few tens of
> lines of code.
>
> So, is there a role for //RLIB ?.. just R code, not interfaces to DLL's ..
> where people can easily upload simple R functions that can be used
> caveat emptor.

Well, I am planning a (more or less) finance-specific R code repository on *my*
web page, although it was intended only for my *own* creations in this area. I
only have 50 megabytes to work with, so it might not be feasible for me to
serve up *everyone's* R finance code. I was also planning R code and small
demo-sized datasets *only*; no attempt made to provide S compatibility (although
I do intend to test on both Windows and Linux), no packages, C or Fortran, etc.
The working title is "R foR tRadeRs" :-).

I guess my belief about more general repositories is that there are quite a few
already -- the UCLA XLISP-STAT archive, "statlib" at CMU, and many more -- that
we in the statistics game know about. My intent, as implied in the title, was
to provide a bridge to computational finance for traders, including pointers to
downloads of R for Windows, interesting statistical analyses on sample financial
datasets and references to the more readable literature. There are *some*
traders who use Holt-Winters, Kalman filters, ARIMA, neural nets and such, but
very few. A typical trader simulates trading systems over varying parameters,
using rather expensive ($3000 US is a typical price) trading-specific software,
then bases his or her trading decisions on very minimal and often quite non-
robust statistical analyses. I think R presents an opportunity to change this.
--
znmeb at aracnet.com (M. Edward Borasky) http://www.aracnet.com/~znmeb

Stand-up comedy -- because man does not live by dread alone.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Feb 23 10:59:41 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 23 Feb 2001 09:59:41 +0000 (GMT)
Subject: [R] Holt-Winters code in R or S?
In-Reply-To: <Pine.LNX.4.31.0102200846530.17008-100000@shell1.aracnet.com>
Message-ID: <Pine.GSO.4.31.0102230951490.5585-100000@toucan.stats>

On Tue, 20 Feb 2001, M. Edward (Ed) Borasky wrote:

> On Tue, 20 Feb 2001, John Aitchison wrote:
>
> > I think this raises the issue , attention BR and the core development
> > team, as to whether there is a role for a repository of "slop code" .. use
> > at your own risk, probably not a lot of documentation,  not a full fledged
> > package, perhaps slightly "disreputable", a sort of relaxed and
> > comfortable approach and hey, why not?... if there is no right answer to
> > an ill-specified question, then maybe it is sensible to admit some other
> > approaches.

This has been discussed (e.g. by Kurt and I last November) and will come
up again at the R-core meeting next month.  It's a delicate cost-benefit
analysis:  it would be useful, it has some administrative costs, and
also costs in encouraging `sloppy' coding practices.

On the specific point, I would be happy to add general Holt-Winters code
to package ts, if anyone has code they think suitable or near to suitable.
(Sorry, I have not been following this thread closely.)   In the plans for
ts are Harvey's structural models, which subsume this.  It is possible
that I can make use of some code written by expert econometricians to
short-circuit that.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Fri Feb 23 11:36:27 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 23 Feb 2001 11:36:27 +0100
Subject: [R] Holt-Winters code in R or S?
In-Reply-To: "M. Edward's message of "Tue, 20 Feb 2001 09:20:09 -0800 (PST)"
References: <Pine.LNX.4.31.0102200846530.17008-100000@shell1.aracnet.com>
Message-ID: <x2d7c9it3o.fsf@blueberry.kubism.ku.dk>

"M. Edward (Ed) Borasky" <znmeb at aracnet.com> writes:

> > So, is there a role for //RLIB ?.. just R code, not interfaces to DLL's ..
> > where people can easily upload simple R functions that can be used
> > caveat emptor.
> 
> Well, I am planning a (more or less) finance-specific R code
> repository on *my* web page, although it was intended only for my
> *own* creations in this area. I only have 50 megabytes to work with,
> so it might not be feasible for me to serve up *everyone's* R
> finance code. I was also planning R code and small demo-sized
> datasets *only*; no attempt made to provide S compatibility
> (although I do intend to test on both Windows and Linux), no
                                                            ^^
> packages, C or Fortran, etc.
  ^^^^^^^^

Um, just allow me to interject that the package mechanism is there for
good reasons. Even for code without shared libraries and such, it
provides mechanisms to ensure

- easy installation
- a minimum level of documentation
- some amount of quality assurance
- easy ways of checking that the code still works with new versions of R
                                                  
Please use it. I can see the temptation of an effortless "take it or
leave it repository", but such repositories all too easily become the
victim of bitrot. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bitwrit at ozemail.com.au  Fri Feb 23 11:56:56 2001
From: bitwrit at ozemail.com.au (Jim Lemon)
Date: Fri, 23 Feb 2001 21:56:56 +1100
Subject: [R] Stuck in the Rd
Message-ID: <3A9641F8.BB98B0FF@ozemail.com.au>

Having almost written a Tcl program to convert S help to Rd format, I
have one problem that I have failed to solve after reading 'R-exts'.  Is
there a tag something like '\item' that works in a similar way but
doesn't have to be after an '\arguments' or '\value' tag?  I'm trying to
include sections on 'MODEL PARAMETERS' and 'DESIGN PARAMETERS', but
Rdconv is dropping all the info after the section title when I convert
the result to HTML.  Other than that, the program appears to convert the
files with only a few whiffy bits where font commands appear, and I can
probably solve those.  Thanks for any suggestions from Rd gurus.

Jim


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rgentlem at jimmy.harvard.edu  Fri Feb 23 13:46:32 2001
From: rgentlem at jimmy.harvard.edu (Robert Gentleman)
Date: Fri, 23 Feb 2001 07:46:32 -0500
Subject: [R] Holt-Winters code in R or S?
In-Reply-To: <Pine.LNX.4.31.0102200846530.17008-100000@shell1.aracnet.com>; from znmeb@aracnet.com on Tue, Feb 20, 2001 at 09:20:09AM -0800
References: <3A92F7E5.18591.3197DD6@localhost> <Pine.LNX.4.31.0102200846530.17008-100000@shell1.aracnet.com>
Message-ID: <20010223074632.Y14178@jimmy.harvard.edu>

I just want to echo Peter's comments. The package facility in R is an
extremely useful tool. Not only does it provide one command
compatibility checks (once you have built it). But it also allows you
to work on your package and test that the new changes have not altered
the its ability to handle the previous examples.
  I strongly encourage anyone thinking of distributing R code to wrap
  it up in a package. It will save you time.

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem at jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Timothy.Keitt at sunysb.edu  Fri Feb 23 16:00:47 2001
From: Timothy.Keitt at sunysb.edu (Timothy H. Keitt)
Date: Fri, 23 Feb 2001 10:00:47 -0500
Subject: [R] Holt-Winters code in R or S?
References: <3A92F7E5.18591.3197DD6@localhost> <Pine.LNX.4.31.0102200846530.17008-100000@shell1.aracnet.com> <20010223074632.Y14178@jimmy.harvard.edu>
Message-ID: <3A967B1F.10009@SUNYSB.Edu>

I agree, packaging saves time, and the packaging tools are great.  The 
hard part is getting impatient people (all of us :-) past the first 15 
minutes to an hour of poking through the documentation, figuring out 
library paths, Rd format, etc.  If you've done it, you know its not very 
hard and the documentation is quite good.  However, I wonder if we 
couldn't get more people to contribute packages if we had a 
"create.package.skel()" command (and equivalent "R CMD" method) which 
would basically copy a package template to a local directory and echo 
some hints about how to install the package in a local library path and 
get R to search the local path.  The template needs commented examples 
for all the key files and "README.skel" files in each directory.  I find 
with examples, I can get going really quickly.

Tim

Robert Gentleman wrote:

> I just want to echo Peter's comments. The package facility in R is an
> extremely useful tool. Not only does it provide one command
> compatibility checks (once you have built it). But it also allows you
> to work on your package and test that the new changes have not altered
> the its ability to handle the previous examples.
>   I strongly encourage anyone thinking of distributing R code to wrap
>   it up in a package. It will save you time.


-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Olivier.Houix at ircam.fr  Fri Feb 23 16:03:56 2001
From: Olivier.Houix at ircam.fr (Olivier Houix)
Date: Fri, 23 Feb 2001 16:03:56 +0100
Subject: [R] hclust question
References: <Pine.LNX.4.30.0102222234280.20620-100000@param.math.umbc.edu>
Message-ID: <3A967BDC.D71C809@ircam.fr>

Dear Ranjan
You can just use this:

dissimilarity <- as.dist(your-own-distance-matrix)
h <- hclust(dissimilarity, method = "complete")

your own distance matrix must be a dissimilarity matrix

Olivier Houix
Ranjan Maitra wrote:
> 
> Dear all,
> 
> I have a question with regard to the use of hclust. I would like to be
> able to specify my own distance matrix instead of asking R to compute
> the distance matrix for me. It is computationally easier for me this
> way. My question is: How can I get hclust to accept this?
> 
> Thanks,
> Ranjan
> 
> --
>  ***************************************************************************
>           Ranjan Maitra, Department of Mathematics and Statistics,
>      University of Maryland, Baltimore County, Baltimore, MD 21250, USA.
>  ***************************************************************************
> 
>   \|/         satyamevajayate         |      tamasomaajyotirgamaya      \|/
>   -*-                                 |                                 -*-
>   /|\       TRUTH SHALL PREVAIL       |      FROM DARKNESS TO LIGHT     /|\
> 
>  ***************************************************************************
>    Ph: 410-455-2436   FAX: 410-455-1066   http://www.math.umbc.edu/~maitra
>  ***************************************************************************
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Olivier Houix  <houix at ircam.fr>             tel: 01 44 78 15 51
Equipe Perception et Cognition Musicales    http://www.ircam.fr/  
IRCAM   1 place Igor Stravinsky             75004         Paris
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jbowers at csm.berkeley.edu  Fri Feb 23 16:41:21 2001
From: jbowers at csm.berkeley.edu (Jacob W. Bowers)
Date: Fri, 23 Feb 2001 07:41:21 -0800 (PST)
Subject: [R] Postscript File Size
In-Reply-To: <3A9641F8.BB98B0FF@ozemail.com.au>
Message-ID: <Pine.SV4.3.96.1010223073341.13565J-100000@csm.Berkeley.EDU>

Hi.

Is there any way to reduce the size of postscript output from R?

I have just discovered that the same plot done on Splus 5.1 (on Solaris)
is about 900k compared to roughly 6.6mb on R-1.2.0 (on Solaris).

I produced this plot the same way on both platforms (except for "font=3"
on Splus and "family="Times"" on R):

postscript(file="file.eps",onefile=FALSE,horizontal=FALSE,paper="special",width=6,height=6,font=3)

.plot plot plot (lots of points (pch="."), roughly 30,000 per plot * 9
plots)....

dev.off()

I also tried using "dev.copy2eps()" on R, but that didn't change the size
of the resulting file.

I'd hate to email a such a huge file.

Any thoughts about what to do?

Thanks so much!

Jake

-----
Jake Bowers
Dept of Political Science
UC-Berkeley

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rijn at swi.psy.uva.nl  Fri Feb 23 16:44:11 2001
From: rijn at swi.psy.uva.nl (rijn@swi.psy.uva.nl)
Date: Fri, 23 Feb 2001 16:44:11 +0100 (CET)
Subject: [R] Specification of factors in tapply
In-Reply-To: <x266i3ucpp.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.21.0102231638100.21571-100000@swipc30.swi.psy.uva.nl>


> It looks a bit unsafe to rely on the storage order in x. I'd go for
> brute force and ignorance:

Thanks again for the useful hints. The problem is that the "safe" method
you suggested takes a long time to finish on a quite fast computer, and I
need to call this function a lot of times. So, I'll stick to the
unlist(tapply(...)) option for now. I'll keep the save version in the back
of my head for an interfacing C/R exercise. (A v.tapply function, or
something similar.)

Thanks,
  Hedderik.

-- 
http://swipc30.swi.psy.uva.nl/~rijn

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rijn at swi.psy.uva.nl  Fri Feb 23 16:53:48 2001
From: rijn at swi.psy.uva.nl (rijn@swi.psy.uva.nl)
Date: Fri, 23 Feb 2001 16:53:48 +0100 (CET)
Subject: [R] Prevent killing an ESS *R* buffer unintentionally
Message-ID: <Pine.LNX.4.21.0102231644150.21571-100000@swipc30.swi.psy.uva.nl>


A couple of days ago I posted some elisp code that asks the user for
confirmation before deleting a process buffer, e.g. the *R* buffer. However,
this code was only evaluated if a buffer was killed by means of [C-x k]. The
following code does not need to be bound to a particular key, it's
internally called by kill-buffer. (Also works if buffer is deleted in other
ways, e.g., [C-x C-c].)

(defun h-kill-buffer-query-function ()
  (or (not (get-buffer-process (buffer-name)))
      (yes-or-no-p (format "Kill process associated with %s? " (buffer-name)))))

(add-hook 'kill-buffer-query-functions
	  'h-kill-buffer-query-function)

Probably, this functionality already exists in emacs but after searching for
some time, it seemed faster to write it myself. (That is, I
copy-paste-and-adapted it from gnuserv.el.)

Groet,
  Hedderik.

-- 
http://swipc30.swi.psy.uva.nl/~rijn

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rod.chav at hsoft.es  Fri Feb 23 17:05:34 2001
From: rod.chav at hsoft.es (Antonio =?iso-8859-1?Q?Rodr=EDguez?= Verdugo)
Date: Fri, 23 Feb 2001 17:05:34 +0100
Subject: [R] statistical help
Message-ID: <3.0.6.32.20010223170534.007a2430@pop.hsoft.es>

Hi All,

Briefly, I belong to a fisheries research group. At this time I'm working
on my PhD  and I'm looking for some statistical help. My mathematical and
statistical skills are still scarce, I've gathered many different types of
data  (landings, climate and upwelling indexes, rains, etc) and I wonder
about what kind of statistical procedure use with them. I'm a little
confused about uni, bivariate, nonlinear, nonparametric, time series, etc
terms. I'm looking for someone or maybe a research group to afford the
implemantation of a statistical procedure to manage those data. Keeping
always on mind the possibility of publishing our results.

I choose to write this petition through the R list because as happens in
many other open source software (linux, grass, etc) lists, it is more easy
to find help from open minded people subscribed there.

Hope to find someone interested in developping some research in the
fisheries field.

Antonio Rodriguez
CICEM Agua del Pino
Oceanography PhD program, University of Huelva
Huelva, Spain
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Feb 23 17:09:15 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 23 Feb 2001 16:09:15 +0000 (GMT)
Subject: [R] Postscript File Size
Message-ID: <200102231609.QAA06365@toucan.stats.ox.ac.uk>


> Date: Fri, 23 Feb 2001 07:41:21 -0800 (PST)
> From: "Jacob W. Bowers" <jbowers at csm.berkeley.edu>
> To: R-help at stat.math.ethz.ch
> Subject: [R] Postscript File Size
> 
> Hi.
> 
> Is there any way to reduce the size of postscript output from R?
> 
> I have just discovered that the same plot done on Splus 5.1 (on Solaris)
> is about 900k compared to roughly 6.6mb on R-1.2.0 (on Solaris).

It is I suspect because you are using pch-".", which is special-cased
in the R code to be a small square, not an ASCII symbol, and so uses
quite a lot of space, a line like

106.49 114.85 107.49 115.85 r p2

S-PLUS uses 1/4 as much, in part because it rounds coords to the nearest
big point.  I cannot reproduce a factor of over 7.

> I produced this plot the same way on both platforms (except for "font=3"
> on Splus and "family="Times"" on R):
> 
> 
postscript(file="file.eps",onefile=FALSE,horizontal=FALSE,paper="special",width=
6,height=6,font=3)
> 
> .plot plot plot (lots of points (pch="."), roughly 30,000 per plot * 9
> plots)....
> 
> dev.off()
> 
> I also tried using "dev.copy2eps()" on R, but that didn't change the size
> of the resulting file.

(It would not: it just generates a call to postscript().)

> I'd hate to email a such a huge file.
> 
> Any thoughts about what to do?

Why does it matter?   You might want select fewer than 30,000 points to plot,
as you must have a large mass of black toner on your page.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From lzhang at uci.edu  Fri Feb 16 05:49:07 2001
From: lzhang at uci.edu (LIQING ZHANG)
Date: Thu, 15 Feb 2001 20:49:07 -0800
Subject: [R] Sub_scribe and a question
Message-ID: <3A8CB143.6A0D7517@uci.edu>

Dear all,

I am trying to get an estimate of the intercept for a linear model.  In
this case, I know the slope of the model, can anyone tell me how to
constrain the formula in lm() so that it only estimates the intercept
not the slope?  Many thanks in advance,

Sincerely,

Liqing Zhang
Dept. of Eco. Evol. Biol.
Univ. of CA, Irvine
email: lzhang at uci.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From patfoley at csus.edu  Sat Feb 17 16:47:47 2001
From: patfoley at csus.edu (Patrick Foley)
Date: Sat, 17 Feb 2001 07:47:47 -0800
Subject: [R] canonical correspondence analysis
Message-ID: <3A8E9D23.9A58A8E3@csus.edu>

     [Manually approved, since my filter had this looking like spam...  MM]


Here is some insight into the commercial value of ordination programs
including canonical correspondence analysis. And it shows why a graduate
student (working on bird distributions along a riparian gradient) at
CSUS came to me hoping to find something less costly.

Patrick Foley

http://www.ptinet.net/~mjm/canoco.htm
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20010217/73f6585c/canoco.htm

From Kurt.Hornik at ci.tuwien.ac.at  Fri Feb 23 14:38:39 2001
From: Kurt.Hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 23 Feb 2001 14:38:39 +0100
Subject: [R] Stuck in the Rd
In-Reply-To: <3A9641F8.BB98B0FF@ozemail.com.au>
References: <3A9641F8.BB98B0FF@ozemail.com.au>
Message-ID: <14998.26591.3603.4073@mithrandir.hornik.net>

>>>>> Jim Lemon writes:

> Having almost written a Tcl program to convert S help to Rd format, I
> have one problem that I have failed to solve after reading 'R-exts'.  Is
> there a tag something like '\item' that works in a similar way but
> doesn't have to be after an '\arguments' or '\value' tag?  I'm trying to
> include sections on 'MODEL PARAMETERS' and 'DESIGN PARAMETERS', but
> Rdconv is dropping all the info after the section title when I convert
> the result to HTML.  Other than that, the program appears to convert the
> files with only a few whiffy bits where font commands appear, and I can
> probably solve those.  Thanks for any suggestions from Rd gurus.

You can have all `standard' lists in Rd as well:

	\itemize	unnumbered lists
	\enumerate	numbered lists
	\describe	description lists

The R sources have several examples where these are used.

[The fact that \arguments and \value are specific \itemize lists, in
some sense, is mostly historical.]

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jyan at stat.wisc.edu  Fri Feb 23 17:30:33 2001
From: jyan at stat.wisc.edu (Jun Yan)
Date: Fri, 23 Feb 2001 10:30:33 -0600 (CST)
Subject: [R] cross building
Message-ID: <Pine.LNX.3.96L.1010223101438.7749K-100000@gstat04.stat.wisc.edu>

I was trying to learn cross building an R pcakage for windows on my linux
machine. I picked a relatively small library gee to test. I downloaded the
cross-tools and put them in my path,
 
jyan at ludwig:/a3/jyan/src/R-1.2.1/src/gnuwin32$ echo $PATH
/home/jyan/cross-tools/bin:/home/jyan/cross-tools/i386-mingw32msvc/bin:
/usr/lib:/usr/local/bin:/usr/bin:/bin:/usr/bin/X11:/usr/games

Following the instructions, I was able to go through the following:

jyan at ludwig:/a3/jyan/src/R-1.2.1/src/gnuwin32$ make PKGDIR=/home/jyan
RLIB=/home/jyan/Rwinlibs STAMP=NO pkg-gee
make DLLNM=  EXTRADOCS= \
  -C /home/jyan/gee PKG=gee RHOME=/a3/jyan/src/R-1.2.1
RLIB=/home/jyan/Rwinlibs \
  -f /a3/jyan/src/R-1.2.1/src/gnuwin32/MakePkg
make[1]: Entering directory `/a3/jyan/gee'
---------- Making package gee ------------
mkdir -p /home/jyan/Rwinlibs/gee
cp -r   ./DESCRIPTION  ./INDEX  ./TITLE ./COPYING ./PORTING ./README
./README.too ./blurb ./test /home/jyan/Rwinlibs/gee/
  making DLL
make[2]: Entering directory `/a3/jyan/gee/src'
make[3]: `libR.a' is up to date.
i386-mingw32msvc-windres --include-dir /a3/jyan/src/R-1.2.1/src/include
-i gee_res.rc -o gee_res.o
------- Building gee.dll from gee.a gee_res.o --------
echo LIBRARY gee > gee.def
echo EXPORTS >> gee.def
i386-mingw32msvc-nm gee.a gee_res.o > Defs
sed -n '/^........ [BCDRT] _/s/^........ [BCDRT] _/ /p' Defs >> gee.def
rm -f Defs
i386-mingw32msvc-gcc  --shared -s  -o gee.dll  gee.def gee.a gee_res.o
-L/a3/jyan/src/R-1.2.1/src/gnuwin32  -lg2c -lR 
make[2]: Leaving directory `/a3/jyan/gee/src'
mkdir -p /home/jyan/Rwinlibs/gee/libs
cp src/gee.dll /home/jyan/Rwinlibs/gee/libs/gee.dll
make[1]: Leaving directory `/a3/jyan/gee'
make -C ./help RHOME=/a3/jyan/src/R-1.2.1 PKGDIR=/a3/jyan
RLIB=/home/jyan/Rwinlibs help-gee
make[1]: Entering directory `/a3/jyan/src/R-1.2.1/src/gnuwin32/help'
PERL5LIB=/a3/jyan/src/R-1.2.1/share/perl perl build.help  -txt -html
-example -latex /a3/jyan/gee /home/jyan/Rwinlibs
 >>> Building/Updating help pages for package `gee'
     Formats: text html latex example 
make[1]: Leaving directory `/a3/jyan/src/R-1.2.1/src/gnuwin32/help'
make -C ./help RHOME=/a3/jyan/src/R-1.2.1 PKGDIR=/a3/jyan
RLIB=/home/jyan/Rwinlibs contents-gee
make[1]: Entering directory `/a3/jyan/src/R-1.2.1/src/gnuwin32/help'
perl Rd2contents /a3/jyan/gee /home/jyan/Rwinlibs/gee/CONTENTS
cat /a3/jyan/src/R-1.2.1/library/*/CONTENTS >
/a3/jyan/src/R-1.2.1/doc/html/search/index.txt
PERL5LIB=/a3/jyan/src/R-1.2.1/share/perl perl build.help  -htmllists
make[1]: Leaving directory `/a3/jyan/src/R-1.2.1/src/gnuwin32/help'


Then I zipped the package and installed it on a Win98 machine. But when I
load the library, I got an error message:

>library(gee)
Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library 
"C:/PROGRA~1/RWIN/RW1021/library/gee/libs/gee.dll":
  LoadLibrary failure:  A device attached to the system is not
functioning.
Error in library(gee) : .First.lib failed
>

What's the device not functioning? Was my cross-building missing
something? Thanks.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Fri Feb 23 17:55:56 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Fri, 23 Feb 2001 08:55:56 -0800 (PST)
Subject: [R] [newbie] Cox Baseline Hazard
In-Reply-To: <Pine.GSO.4.05.10102222150230.7015-100000@dahlia.la.utexas.edu>
Message-ID: <Pine.A41.4.33.0102230847050.163630-100000@homer03.u.washington.edu>

On Thu, 22 Feb 2001, Daniel A. Powers wrote:

> Meles --
>
> Here are a couple of routines. One computes Aalen's estimate of the
> cumulative hazard and the other a log-likelihood based on it
>

Yes, but if you do

aalen<-function(fit, remove.centering=FALSE){
	s<-survfit(fit)
	H<- -log(s$surv)
	if (remove.centering)
	    H<-H*exp(-coef(fit)*fit$means)
	data.frame(t=s$time,Lambda=H)
	}

you have the advantage that it still works for left-truncated data, and if
you want it at the mean rather than at zero it works for stratified models
as well.  In my experience it is extremely unusual that you want to do the
numerically unstable transformation to get the baseline hazard at Z=0.

Similarly, the loglikelihood is available in fit$loglik. This works for
left-truncated data, tied failure times, and stratified models and doesn't
require a quadratic-time algorithm.

Given the recent demand I'll add a cumulative hazard function for the next
release.


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pgilbert at bank-banque-canada.ca  Fri Feb 23 18:12:36 2001
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 23 Feb 2001 12:12:36 -0500
Subject: [R] Holt-Winters code / package
References: <200102192057.MAA28224@axe.humboldt.edu> <3A92F7E5.18591.3197DD6@localhost>
Message-ID: <3A969A04.479B47B8@bank-banque-canada.ca>

I also would like to echo Peter and Roberts comments about the usefulness of the R
package tool. With a little investment it saves an enormous amount of time when there
is a new release of R. It runs tests to make sure your examples still work, and also
provides a great mechanism for running more extensive tests by putting them in the
tests subdirectory. Not only all this, but if you package it up well enough to
contribute it, then the core team (at least so far) has been running the checks on
your package before any new release, so any bugs in R that affect your code will be
fixed before you even know about them and you will get advanced warning when new
features of R show up bugs in your code.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pgilbert at bank-banque-canada.ca  Fri Feb 23 18:15:32 2001
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 23 Feb 2001 12:15:32 -0500
Subject: [R] Holt-Winters code / time series
References: <200102192057.MAA28224@axe.humboldt.edu> <3A92F7E5.18591.3197DD6@localhost>
Message-ID: <3A969AB4.87F7B7BD@bank-banque-canada.ca>

John Aitchison wrote:
> I am also working through "Non-linear time series models in empirical
> finance" (Franses & van Dijk) and slowly implementing some bits and pieces
> .. I'd be glad to contribute these as and when.

R and S are great for cobbling together quick solutions, and for a small problems it
is often easier to just write code from scratch than it is to figure out someone
else's  code, even when that code is well documented. If you are thinking of putting
some effort into this development I would encourage you to look at my dse package.
As examples dse implements multivariate ARMA (ARMAX, ARIMA, VAR, ...) and state space
models, but more importantly there is a whole structure for dealing with time series,
time series databases (e.g. Fame), testing time series estimation techniques,
forecasting, and testing forecasting models. I have used the structures to implement
very different kinds of time series models (e.g. neural nets and  structural models
that run Troll). There is some overhead, so if you are thinking of a quick solution
to a small problem then I only recommend the library for the already implemented ARMA
and state space models, but if you have in mind something that is a substantial
programming effort then you will probably find there are many useful tools in the
package.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetil.kjernsmo at astro.uio.no  Fri Feb 23 18:45:44 2001
From: kjetil.kjernsmo at astro.uio.no (Kjetil Kjernsmo)
Date: Fri, 23 Feb 2001 18:45:44 +0100 (MET)
Subject: [OT] Emailing large files (Re: [R] Postscript File Size)
In-Reply-To: <Pine.SV4.3.96.1010223073341.13565J-100000@csm.Berkeley.EDU>
Message-ID: <Pine.OSF.4.30.0102231746010.16125-100000@alnair.uio.no>

On Fri, 23 Feb 2001, Jacob W. Bowers wrote:

>Is there any way to reduce the size of postscript output from R?

Brian D Ripley has responded to that, I'm just addressing another issue,
which is a bit off-topic.

>I'd hate to email a such a huge file.

Indeed, e-mailing such large files are not a Good Thing [tm], and e-mail
was never intended for this purpose. E-mails may be stored on a few
servers on it's way, and as rule of thumb is that no e-mail should be
larger 40 KB, anything larger than that is a waste of resources. 40 KB
isn't a lot, of course, so how should one distribute large files you may
ask.

On the web is (one of) the correct answer(s). You just save it to a file
that is accessible by a web server, and you send the URL. After the
recipient gets the file, you may delete it. If it's confidential
information (then, you should think twice about sending it in e-mail
anyway), you should put it on a server that encrypts the data. If it's
just that you'd like to make sure that nobody else sees it, you may put it
protected by a password which you only send to the intended recipient. For
most purposes, I think it is quite sufficient to make a general
username and password for all your contacts, which you give to everyone.
Finally, if the documents need no protection at all, you could just save
them an open directory, but beware that the best search engines may
well find something that is open within a couple weeks even if the
URL isn't broadcasted.

And, in fact, doing this is really easy, at least if you're on a system
with a well configured Apache server. Since configuration differs from
system to system, I shall not go into details, but with Apache server is
often configured to look for a directory called "www_docs" or
"public_html" in user's home directory. I'll recommend creating a
subdirectory called "tmp" for files that you plan to keep just a short
time. Then, you might protect this directory with a password by creating a
file called .htaccess in it, and creating passwords using the program
htpasswd. This is all described in
<URL:http://www.apacheweek.com/features/userauth>.

Most think about sending something to a recipient as an attachment as
fundamentally different from retrieving something from the web, but it is
not. For most, in the first case, you click on something to open in it,
and in the second case you click on something to open it. :-) The
difference is that in the first case, it will open fast because it has
allready been transported to you, in the second case it takes a bit
longer, but in the first case, the total time it has taken longer to be
transported to you than in the second case, and in the first case, you
have not had any chance to decide whether you want it to be transported
to you at all.

I'd like to encourage everyone who doesn't allready, to use the web
actively for purposes like this and encourage their IT departments to
provide tools that supports this use. Internally in the World Wide Web
Consortium, everything is distributed this way, their slogan is "if it's
not on the web, it doesn't exist". It should work very well for everyone,
I think.

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj at astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster at skepsis.no




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Fri Feb 23 18:55:51 2001
From: ben at zoo.ufl.edu (ben@zoo.ufl.edu)
Date: Fri, 23 Feb 2001 12:55:51 -0500 (EST)
Subject: [R] Postscript File Size
In-Reply-To: <200102231609.QAA06365@toucan.stats.ox.ac.uk>
Message-ID: <Pine.LNX.4.30.0102231254580.29154-100000@bolker.zoo.ufl.edu>

On Fri, 23 Feb 2001, Prof Brian Ripley wrote:

> > I'd hate to email a such a huge file.
> >
> > Any thoughts about what to do?

  Another thought would be to try compressing the file; if there's lots of
redundant information it ought to compress well ...

 Ben

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From meles at free.fr  Fri Feb 23 19:34:52 2001
From: meles at free.fr (Meles MELES)
Date: Fri, 23 Feb 2001 19:34:52 +0100
Subject: [R] [newbie] Cox Baseline Hazard
In-Reply-To: <Pine.LNX.4.30.0102230912470.26460-100000@tal.stat.umu.se>
References: <Pine.LNX.4.30.0102230912470.26460-100000@tal.stat.umu.se>
Message-ID: <01022319345200.00965@meles>

Le Vendredi 23 F?vrier 2001 09:17, gb a ?crit :
>   fit <- coxph( Surv(futime,fustat)~resid.ds+rx+ecog.ps,data=ovarian)
>   base <- data.frame(age=0, resid.ds=0, rx = 0, ecog.ps = 0)
>   ss <- survfit(fit)
>   ss1 <- survfit(fit, newdata = base)
>   par(mfrow = c(2, 1))
>   plot(ss, fun = "cumhaz")
>   plot(ss1, fun = "cumhaz")

Great, that was exactly what I needed.
Thanks a lot.

And I apologize for my question that seemed to be very confusing.
That could mean 3 things :
I must improve myself in english.
I must improve myself in R.
I must improve myself in statistics :-).

-- 
Blaise aka Meles
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Fri Feb 23 20:07:14 2001
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 23 Feb 2001 20:07:14 +0100
Subject: [R] Stuck in the Rd
In-Reply-To: <3A9641F8.BB98B0FF@ozemail.com.au>
References: <3A9641F8.BB98B0FF@ozemail.com.au>
Message-ID: <14998.46306.567044.862992@gargle.gargle.HOWL>

>>>>> "Jim" == Jim Lemon <bitwrit at ozemail.com.au> writes:

    Jim> Having almost written a Tcl program to convert S help to Rd
    Jim> format, I have one problem that I have failed to solve after
    Jim> reading 'R-exts'.  Is there a tag something like '\item' that
    Jim> works in a similar way but doesn't have to be after an
    Jim> '\arguments' or '\value' tag?  I'm trying to include sections on
    Jim> 'MODEL PARAMETERS' and 'DESIGN PARAMETERS', but Rdconv is dropping
    Jim> all the info after the section title when I convert the result to
    Jim> HTML.  Other than that, the program appears to convert the files
    Jim> with only a few whiffy bits where font commands appear, and I can
    Jim> probably solve those.  Thanks for any suggestions from Rd gurus.

Something like

  % I hate all capitals
  \section{Model Parameters}{
    These are one of the following
    \itemize{
     \item bla text
     \item blo more text
     \item blu still more
    }
  }

or rather 

  % I hate all capitals
  \section{Model Parameters}{
    These are one of the following
    \describe{
     \item{bla}{text about bla}
     \item{blo}{more text........}
     \item{blu}{still some about blu ...}
    }
  }


will work, I hope.

Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Fri Feb 23 20:31:03 2001
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 23 Feb 2001 20:31:03 +0100
Subject: Passing parameters to R command line (was "RE: [R] embedding R?")
In-Reply-To: <HBEHIIBBKKNOBLMPKCBBCEJFDCAA.znmeb@aracnet.com>
References: <Pine.OSF.4.30.0102111230130.25836-100000@alpha0.bioch.virginia.edu>
	<HBEHIIBBKKNOBLMPKCBBCEJFDCAA.znmeb@aracnet.com>
Message-ID: <14998.47735.768868.274158@gargle.gargle.HOWL>

>>>>> "M" == M Edward Borasky <znmeb at aracnet.com> writes:
(Feb.11)

    M> More elegant would be the capability of passing parameters to the
    M> "R" command line just like you pass parameters to any other UNIX or
    M> Windows command line. 

This has been working (in some way) for many months now:

 % R --vanilla --quiet   bli bla blo
 ARGUMENT 'bli' __ignored__
 ARGUMENT 'bla' __ignored__
 ARGUMENT 'blo' __ignored__

 > commandArgs()
 [1] "/u/maechler/R/r-release/Linux-inst/bin/R.bin"
 [2] "--vanilla"                                   
 [3] "--quiet"                                     
 [4] "bli"                                         
 [5] "bla"                                         
 [6] "blo"                                         
 > 

Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From znmeb at aracnet.com  Fri Feb 23 20:39:32 2001
From: znmeb at aracnet.com (M. Edward (Ed) Borasky)
Date: Fri, 23 Feb 2001 11:39:32 -0800 (PST)
Subject: [R] statistical help
In-Reply-To: <3.0.6.32.20010223170534.007a2430@pop.hsoft.es>
Message-ID: <Pine.LNX.4.31.0102231123420.15697-100000@shell1.aracnet.com>

On Fri, 23 Feb 2001, Antonio [iso-8859-1] Rodríguez Verdugo wrote:

> Briefly, I belong to a fisheries research group. At this time I'm working
> on my PhD  and I'm looking for some statistical help. My mathematical and
> statistical skills are still scarce, I've gathered many different types of
> data  (landings, climate and upwelling indexes, rains, etc) and I wonder
> about what kind of statistical procedure use with them. I'm a little
> confused about uni, bivariate, nonlinear, nonparametric, time series, etc
> terms. I'm looking for someone or maybe a research group to afford the
> implemantation of a statistical procedure to manage those data. Keeping
> always on mind the possibility of publishing our results.

Well, short of taking a "how to do research" course (which our Oregon Graduate
Institute has and *requires* its students to take), I have two recommendations:

1. Pick up a good book on "modern" exploratory data analysis. The classic, "EDA"
by Tukey, is very good, but I think there are better books on the subject.

2. Download R from CRAN (http://cran.r-project.org/), work through the
"Introduction to R" document, then look at some of the many example datasets.
There are many EDA tools built into R and I recommend exploring them first.

I've been doing computer performance analysis statistically for a little over
eight years now, and I still spend at least 80 percent of my time in exploratory
data analysis, looking at pictures. What I code and automate is the generation
of those pictures. Of course, this is a business situation and not a PhD
research situation -- the requirements are different.

Good luck with it!!
--
znmeb at aracnet.com (M. Edward Borasky) http://www.aracnet.com/~znmeb

I support the right to keep and arm bears.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dieter.menne at menne-biomed.de  Fri Feb 23 21:20:10 2001
From: dieter.menne at menne-biomed.de (Dieter Menne)
Date: Fri, 23 Feb 2001 21:20:10 +0100
Subject: [R] as.formula and lme ( Fixed effects: Error in as.vector(x, "list") : cannot coerce to vector)
Message-ID: <NBBBIJMBGLHMKHGCPFJKOEEPCGAA.dieter.menne@menne-biomed.de>

Using a formula converted with as.formula with lme leads
to an error message. Same works ok with lm, and with
lme and a fixed formula.

# demonstrates problems with lme and as.formula
demo<-data.frame(x=1:20,y=(1:20)+rnorm(20),subj=as.factor(rep(1:2,10)))
demo.lm1<-lme(y~x,data=demo,random=~1|subj)
print(summary(demo.lm1))
newframe<-data.frame(x=1:5,subj=rep(1,5))
predict(demo.lm1,newframe,level=0)

fma<-as.formula("y~x")
demo.lm<-lm(fma,data=demo)        # ok
predict(demo.lm,newframe,level=0) # ok
demo.lm2<-lme(fma,data=demo,random=~1|subj) # looks ok, but isn't
print(summary(demo.lm2))

#Fixed effects: Error in as.vector(x, "list") : cannot coerce to vector
#predict(demo.lm2,newframe,level=0) # does not work


---------------------------------------
Dr. Dieter Menne
Biomed Software
72074 T?bingen
Tel (49) (7071) 52176
FAX (49) (7071) 55 10 46
dieter.menne at menne-biomed.de
www.menne-biomed.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From myotis at cix.compulink.co.uk  Fri Feb 23 21:27:00 2001
From: myotis at cix.compulink.co.uk (Graham Smith)
Date: Fri, 23 Feb 2001 20:27 +0000 (GMT)
Subject: [R] canonical correspondence analysis
Message-ID: <memo.491123@cix.compulink.co.uk>

In-Reply-To: <3A8E9D23.9A58A8E3 at csus.edu>

Patrick,

For something a little less  costly, there is MVSP at www.kovcomp.co.uk

Cheers,

Graham S



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bates at stat.wisc.edu  Fri Feb 23 22:01:34 2001
From: bates at stat.wisc.edu (Douglas Bates)
Date: 23 Feb 2001 15:01:34 -0600
Subject: [R] as.formula and lme ( Fixed effects: Error in as.vector(x, "list") : cannot coerce to vector)
In-Reply-To: "Dieter Menne"'s message of "Fri, 23 Feb 2001 21:20:10 +0100"
References: <NBBBIJMBGLHMKHGCPFJKOEEPCGAA.dieter.menne@menne-biomed.de>
Message-ID: <6r7l2h5d1t.fsf@franz.stat.wisc.edu>

"Dieter Menne" <dieter.menne at menne-biomed.de> writes:

> Using a formula converted with as.formula with lme leads
> to an error message. Same works ok with lm, and with
> lme and a fixed formula.
> 
> # demonstrates problems with lme and as.formula
> demo<-data.frame(x=1:20,y=(1:20)+rnorm(20),subj=as.factor(rep(1:2,10)))
> demo.lm1<-lme(y~x,data=demo,random=~1|subj)
> print(summary(demo.lm1))
> newframe<-data.frame(x=1:5,subj=rep(1,5))
> predict(demo.lm1,newframe,level=0)
> 
> fma<-as.formula("y~x")
> demo.lm<-lm(fma,data=demo)        # ok
> predict(demo.lm,newframe,level=0) # ok
> demo.lm2<-lme(fma,data=demo,random=~1|subj) # looks ok, but isn't
> print(summary(demo.lm2))
> 
> #Fixed effects: Error in as.vector(x, "list") : cannot coerce to vector
> #predict(demo.lm2,newframe,level=0) # does not work

Thanks for the detailed report.  I can reproduce the problem.  It
appears that there needs to be an eval early in the lme function so it
stores the formula for the fixed effects, not the name of the formula.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Fri Feb 23 23:26:55 2001
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 23 Feb 2001 23:26:55 +0100
Subject: [R] Which.min bug?
In-Reply-To: <01021316200200.06978@ewilliam.ucsd.edu>
References: <01021316200200.06978@ewilliam.ucsd.edu>
Message-ID: <14998.58287.439464.145574@gargle.gargle.HOWL>

>>>>> "Elliot" == Elliot Williams <ewilliams at ucsd.edu> writes:

    Elliot> Hi, I'm not sure this is a bug, so I thought I'd bounce it off
    Elliot> the help group first.

    Elliot> I had a dataset which I was subsetting, and occasionally I get
    Elliot> an empty subset.  If I don't check for emptiness and go
    Elliot> straight to a which.min call on the subset, the program gets a
    Elliot> big negative number back.

    Elliot> One-line Example:
  
    >> which.max(NULL)
    Elliot> [1] -2147483647

(this happens in C code, by   "NA_INTEGER + 1"
 which unfortunately is *not* NA ..)

    Elliot> This caused an indexing error which was hard(ish) to track
    Elliot> down.  Should it just return NA or throw an error?  Should I
    Elliot> re-submit to r-bugs?  Or is there some deep reason for this
    Elliot> behavior that I don't understand?

Yes it is a bug (and I am the culprit), and the same for  which.max().
As I have been away for almost two weeks, I'm sorry that nobody else has
confirmed this. 

I believe, for consistency

  which.min(v)
		should return the same as
  which(min(v) == v)

and hence should return  

  integer(0)

here.  Returning NA instead is another intuitive possibility.
What do others think?

Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Richard.Rowe at jcu.edu.au  Sat Feb 24 00:32:51 2001
From: Richard.Rowe at jcu.edu.au (Richard Rowe)
Date: Sat, 24 Feb 2001 09:32:51 +1000
Subject: [R] commercial packages
In-Reply-To: <3A8E9D23.9A58A8E3@csus.edu>
Message-ID: <5.0.0.25.1.20010224091541.03d34c50@pop.jcu.edu.au>

At 07:47 17/02/01 -0800, Patrick Foley wrote:

>Here is some insight into the commercial value of ordination programs
>including canonical correspondence analysis. And it shows why a graduate
>student (working on bird distributions along a riparian gradient) at
>CSUS came to me hoping to find something less costly.

Actually I have more than a sneaking regard for PC-Ord. Bruce McCune turned 
out a very worthwhile, and at the time infinitely cheaper, package than was 
otherwise on the market.  Haven't got the original docs but the 1991 
version was with public domain programs freely copyable and a copyright 
manual with permission to distribute but not for profit.  At a time when 
others were demanding ~$500-1000 for distributing buggy versions of 
packages developed under public funding!

He was an original and never got due credit ...

Richard Rowe


Richard Rowe
Senior Lecturer
Department of Zoology and Tropical Ecology, James Cook University
Townsville, Queensland 4811, Australia
fax (61)7 47 25 1570
phone (61)7 47 81 4851
e-mail: Richard.Rowe at jcu.edu.au
http://www.jcu.edu.au/school/tbiol/zoology/homepage.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Sat Feb 24 00:31:59 2001
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Sat, 24 Feb 2001 00:31:59 +0100
Subject: [R] Which.min bug?
In-Reply-To: <14998.58287.439464.145574@gargle.gargle.HOWL>
References: <01021316200200.06978@ewilliam.ucsd.edu>
	<14998.58287.439464.145574@gargle.gargle.HOWL>
Message-ID: <14998.62191.60210.24092@gargle.gargle.HOWL>

>>>>> "MM" == Martin Maechler <maechler at stat.math.ethz.ch> writes:

>>>>> "Elliot" == Elliot Williams <ewilliams at ucsd.edu> writes:
    Elliot> Hi, I'm not sure this is a bug, so I thought I'd bounce it off
    Elliot> the help group first.

    Elliot> I had a dataset which I was subsetting, and occasionally I get
    Elliot> an empty subset.  If I don't check for emptiness and go
    Elliot> straight to a which.min call on the subset, the program gets a
    Elliot> big negative number back.

    Elliot> One-line Example:
  
    >>> which.max(NULL)
    Elliot> [1] -2147483647

    MM> (this happens in C code, by "NA_INTEGER + 1" which unfortunately is
    MM> *not* NA ..)

    Elliot> This caused an indexing error which was hard(ish) to track
    Elliot> down.  Should it just return NA or throw an error?  Should I
    Elliot> re-submit to r-bugs?  Or is there some deep reason for this
    Elliot> behavior that I don't understand?

    MM> Yes it is a bug (and I am the culprit), and the same for
    MM> which.max().  As I have been away for almost two weeks, I'm sorry
    MM> that nobody else has confirmed this.

    MM> I believe, for consistency

    MM>   which.min(v) should return the same as which(min(v) == v)

    MM> and hence should return

    MM>   integer(0)

which I have committed for "R-release", to be version 1.2.2 in a few days.

    MM> here.  Returning NA instead is another intuitive possibility.  What
    MM> do others think?

Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From myhuh at skku.ac.kr  Sat Feb 24 02:40:05 2001
From: myhuh at skku.ac.kr (myhuh)
Date: Sat, 24 Feb 2001 10:40:05 +0900
Subject: [R] mouse operation
Message-ID: <3A9710F5.46F42236@skku.ac.kr>

Hi,

Is it possible to handle mouse operation with the
current release of R?

--
Moon Yul Huh
Professor of Statistics, Sung Kyun Kwan University
Chongro-Ku, Myungryun-Dong, Seoul, Korea
Tel: 82 2 760 0463; Fax:82 2 764 0622;
myhuh at skku.ac.kr; mobile: 016 388 3362


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pperkins at ucsd.edu  Sat Feb 24 04:34:03 2001
From: pperkins at ucsd.edu (Peter Perkins)
Date: Fri, 23 Feb 2001 19:34:03 -0800
Subject: [R] Canonical Correspondence Analysis in R
Message-ID: <3A972BAB.2A51B9E1@ucsd.edu>

I think i mentioned this in private communication a while back, but in
case anyone else cares:

I have a version of canonical correspondence analysis (CCA) coded up in
R.  I based it on

   Ter Braak and Prentice (1988) Adv. Ecol. Res. 18:271-317,
   Ter Braak (1986) Ecol. 67(5):1167-1179, and
   Ter Braak (1995) Section 5.9 in Jongman, Ter Braak, and
      van Tongeren "Data Analysis in Community and Landscape
      Ecology".

Actually, there are two versions:  one which follows Ter Braak's
iterative method (slower, but feasible for large problems), the other
which directly uses an eigenanalysis (fast, but uses too much memory for
large datasets).  Although the code does spit out those funny-looking
tri-plots, etc., I don't really consider it "finished", because i found
the references that i had access to very ambiguous in their description
of the method, and the desired outputs seem to have changed subtly over
the years.  In particular, biologists at my lab who used CANOCO got
certain kinds of (eigenvectors) output that were not defined or indeed
even referred to in the literature.  As luck would have it, the CANOCO
manual had mysteriously disappeared, so all my confusion may well be a
function of not having read the right documentation.  And i'm sure that
if i had taken the time to communicate with the founding fathers of CCA,
i could have sorted out what i was missing.

At any rate, these two pretty-well-documented functions are free to a
good home, for anyone who wants to work on/with them.

I have a question for those of you who've used CCA:  do you use it to
determine habitat relationships absolutely, or do you use it to
determine differences in habitat relationships?

- Peter
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jaitchis at lisp.com.au  Sat Feb 24 09:55:07 2001
From: jaitchis at lisp.com.au (John Aitchison)
Date: Sat, 24 Feb 2001 19:55:07 +1100
Subject: [R] PMML- Predictive model markup language
Message-ID: <3A98119B.4040.5DB6E1C@localhost>



Hi all, 

I caught a passing reference to PMML on the WEKA list (I think) .. an XML 
way of communicating 'data mining models'.  I am of the opinion that XML 
is a 'good thing' and I would for instance like to see a standard XML way 
of communicating the content and context of datasets (eg of timeseries) 
but it has been a long day and my internet connection is slow and so I 
have not worked through the slideshow at
http://www.dmg.org/
but wonder if anyone else has examined PMML and can give an opinion as to 
whether this (PMML) is worthwhile opening up as a discussion thread.

If not, I will look at it in a day or so when I can get some energy and 
time and report back.

thanks

John Aitchison
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rossini at blindglobe.net  Sat Feb 24 19:38:12 2001
From: rossini at blindglobe.net (A.J. Rossini)
Date: 24 Feb 2001 10:38:12 -0800
Subject: [R] PMML- Predictive model markup language
In-Reply-To: <3A98119B.4040.5DB6E1C@localhost>
References: <3A98119B.4040.5DB6E1C@localhost>
Message-ID: <87lmqw2agb.fsf@jeeves.blindglobe.net>

>>>>> "JA" == John Aitchison <jaitchis at lisp.com.au> writes:

    JA> I caught a passing reference to PMML on the WEKA list (I
    JA> think) .. an XML way of communicating 'data mining models'.  I
    JA> am of the opinion that XML is a 'good thing' and I would for
    JA> instance like to see a standard XML way of communicating the
    JA> content and context of datasets (eg of timeseries) but it has
    JA> been a long day and my internet connection is slow and so I
    JA> have not worked through the slideshow at http://www.dmg.org/
    JA> but wonder if anyone else has examined PMML and can give an
    JA> opinion as to whether this (PMML) is worthwhile opening up as
    JA> a discussion thread.

I looked at it in the past, and it is quite intriguing -- it's similar
to some work people are doing on literate data/statistical analysis
(round-trip).  However, it's more specific and focused, and I'm not
sure that I agree with how they are communicating models (but that's a
small disagreement on specific implementations, not on the need for
this type of communication system for data analysis).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
UW Biostat/Center for AIDS Research	rossini at u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini at scharp.org
-------- (friday is unknown) --------
FHCRC: M--W : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy
CFAR:  ??   : 206-731-3647 (fax=3694)|Email is far better than phone
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From faheem at email.unc.edu  Sat Feb 24 21:59:51 2001
From: faheem at email.unc.edu (Faheem Mitha)
Date: Sat, 24 Feb 2001 15:59:51 -0500 (EST)
Subject: [R] testing for integer
Message-ID: <Pine.LNX.4.21.0102241549330.466-100000@Chrestomanci.home.earth>

Dear People,

Consider the following fragment of R code 

choose <- function(n,r)
{
  if( is.integer(n) && is.integer(r) && n > 0 && r >= 0 )
    {
      .C("choose",as.double(n),as.double(r),comb = double(1))$comb
    }
  else stop("n must be a positive integer and r a non-negative integer.")
}

This is a practice function (n choose r), which I wrote using a call to C
code. Unfortunately, there is the following problem. I thought I would put
in error checking for whether the arguments were integers. However,
is.integer(1), for example, returns FALSE. However is.numeric(1) returns
TRUE. It seems that explicit coercion is required for this ie.  
is.integer(as.integer(1)) returns true However, I can't use as.integer,
because it is too aggressive for just error checking: it rounds off the
value to the greatest integer less than. Can anyone suggest a suitable
method of checking for an integer in this case?

                                 Sincerely, Faheem Mitha.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bates at stat.wisc.edu  Sat Feb 24 23:03:41 2001
From: bates at stat.wisc.edu (Douglas Bates)
Date: 24 Feb 2001 16:03:41 -0600
Subject: [R] testing for integer
In-Reply-To: Faheem Mitha's message of "Sat, 24 Feb 2001 15:59:51 -0500 (EST)"
References: <Pine.LNX.4.21.0102241549330.466-100000@Chrestomanci.home.earth>
Message-ID: <6ru25jg2ma.fsf@franz.stat.wisc.edu>

Faheem Mitha <faheem at email.unc.edu> writes:

> Consider the following fragment of R code 
> 
> choose <- function(n,r)
> {
>   if( is.integer(n) && is.integer(r) && n > 0 && r >= 0 )
>     {
>       .C("choose",as.double(n),as.double(r),comb = double(1))$comb
>     }
>   else stop("n must be a positive integer and r a non-negative integer.")
> }
> 
> This is a practice function (n choose r), which I wrote using a call to C
> code. Unfortunately, there is the following problem. I thought I would put
> in error checking for whether the arguments were integers. However,
> is.integer(1), for example, returns FALSE. However is.numeric(1) returns
> TRUE. It seems that explicit coercion is required for this ie.  
> is.integer(as.integer(1)) returns true However, I can't use as.integer,
> because it is too aggressive for just error checking: it rounds off the
> value to the greatest integer less than. Can anyone suggest a suitable
> method of checking for an integer in this case?

Generally the S languages do not encourage distinguishing between
floating point and integer values at the level of S code.  The way the
values are stored should not be important to the user unless the user
is going to call C or Fortran code in which case you really do want to
use as.integer.  If you prefer not to get truncation then I would
suggest using as.integer(round(n)).

A more common way of writing the function would be

  n <- as.numeric(n)[1]
  r <- as.numeric(r)[1]
  if( n <= 0 || r < 0 ) stop("n must be positive and r non-negative")
  .C("choose", as.integer(round(n)), as.integer(round(r)), comb = double(1))$comb

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jfox at mcmaster.ca  Sun Feb 25 00:46:30 2001
From: jfox at mcmaster.ca (John Fox)
Date: Sat, 24 Feb 2001 18:46:30 -0500
Subject: [R] testing for integer
In-Reply-To: <Pine.LNX.4.21.0102241549330.466-100000@Chrestomanci.home.e
 arth>
Message-ID: <5.0.0.25.0.20010224183726.018bacd0@mcmail.cis.mcmaster.ca>

Dear Faheem,

The following function isn't infallible, but will work to the machine 
precision:

 > is.int <- function (x) .Machine$double.eps >= abs(x - floor(x))
 >
 > is.int(-1234.0000000000001)
[1] TRUE
 > is.int(-1234.000000000001)
[1] FALSE
 >

(Actually

   is.int <- function (x) 0 == x - floor(x)

   accomplishes the same thing.)

Does that help?

John

At 03:59 PM 24/02/2001 -0500, you wrote:
>Dear People,
>
>Consider the following fragment of R code
>
>choose <- function(n,r)
>{
>   if( is.integer(n) && is.integer(r) && n > 0 && r >= 0 )
>     {
>       .C("choose",as.double(n),as.double(r),comb = double(1))$comb
>     }
>   else stop("n must be a positive integer and r a non-negative integer.")
>}
>
>This is a practice function (n choose r), which I wrote using a call to C
>code. Unfortunately, there is the following problem. I thought I would put
>in error checking for whether the arguments were integers. However,
>is.integer(1), for example, returns FALSE. However is.numeric(1) returns
>TRUE. It seems that explicit coercion is required for this ie.
>is.integer(as.integer(1)) returns true However, I can't use as.integer,
>because it is too aggressive for just error checking: it rounds off the
>value to the greatest integer less than. Can anyone suggest a suitable
>method of checking for an integer in this case?
>
>                                  Sincerely, Faheem Mitha.


________________________________
  John Fox
  Department of Sociology
  McMaster University
  email: jfox at McMaster.ca
  web: www.socsci.mcmaster.ca/jfox
________________________________

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Bill.Venables at CMIS.CSIRO.AU  Sun Feb 25 00:54:04 2001
From: Bill.Venables at CMIS.CSIRO.AU (Bill.Venables@CMIS.CSIRO.AU)
Date: Sun, 25 Feb 2001 09:54:04 +1000
Subject: [R] testing for integer
Message-ID: <2B7F04539DAFD311B61D009027D0DDA20C3D4B@roper-cv.qld.cmis.CSIRO.AU>

Faheem Mitha writes:

>  -----Original Message-----
> From: 	 [mailto:faheem at email.unc.edu] 
> Sent:	Sunday, 25 February 2001 7:00
> To:	r-help at stat.math.ethz.ch
> Subject:	[R] testing for integer
> 
> Dear People,
> 
> Consider the following fragment of R code 
> 
> choose <- function(n,r)
> {
>   if( is.integer(n) && is.integer(r) && n > 0 && r >= 0 )
>     {
>       .C("choose",as.double(n),as.double(r),comb = double(1))$comb
>     }
>   else stop("n must be a positive integer and r a non-negative integer.")
> }
> 
> This is a practice function (n choose r), which I wrote using a call to C
> code. Unfortunately, there is the following problem. I thought I would put
> in error checking for whether the arguments were integers. However,
> is.integer(1), for example, returns FALSE. However is.numeric(1) returns
> TRUE. It seems that explicit coercion is required for this ie.  
> is.integer(as.integer(1)) returns true However, I can't use as.integer,
> because it is too aggressive for just error checking: it rounds off the
> value to the greatest integer less than. Can anyone suggest a suitable
> method of checking for an integer in this case?
> 
>                                  Sincerely, Faheem Mitha.

There is a slight confusion here between the mathematical notion of
"integer" (meaning a whole number) and the computing notion of "integer"
(meaning a quantity stored in a particular way).  is.integer is a test for
the latter, you want a test for the former.  Here is a pretty standard
one-liner to do that.  It handles vector arguments and tests if they are all
whole number values:

whole.number <- function(k) all((k %% 1) == 0)

You might use if(whole.number(c(n,r)) && ....

Bill Venables.

--
Bill Venables, CSIRO/CMIS Environmetrics Project
Email: Bill.Venables at cmis.csiro.au
Phone: +61 7 3826 7251
Fax:   +61 7 3826 7304
Postal: PO Box 120, Cleveland, Qld 4163, AUSTRALIA
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From faheem at email.unc.edu  Sun Feb 25 01:41:30 2001
From: faheem at email.unc.edu (Faheem Mitha)
Date: Sat, 24 Feb 2001 19:41:30 -0500 (EST)
Subject: [R] testing for integer
In-Reply-To: <Pine.LNX.4.21.0102241549330.466-100000@Chrestomanci.home.earth>
Message-ID: <Pine.LNX.4.21.0102241938190.466-100000@Chrestomanci.home.earth>



On Sat, 24 Feb 2001, Faheem Mitha wrote:

> Dear People,
> 
> Consider the following fragment of R code 
[snipped]

Thanks to everyone who replied. I now have two different tests! Sorry, I
didn't realise I needed to roll my own test for this...

                          Sincerely, Faheem Mitha.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bwheeler at echip.com  Sun Feb 25 03:13:33 2001
From: bwheeler at echip.com (Bob Wheeler)
Date: Sat, 24 Feb 2001 21:13:33 -0500
Subject: [R] testing for integer
References: <Pine.LNX.4.21.0102241549330.466-100000@Chrestomanci.home.earth>
Message-ID: <3A986A4D.34E7F2F8@echip.com>

Everything is double. You might try n==floor(n).

Faheem Mitha wrote:
> 
> Dear People,
> 
> Consider the following fragment of R code
> 
> choose <- function(n,r)
> {
>   if( is.integer(n) && is.integer(r) && n > 0 && r >= 0 )
>     {
>       .C("choose",as.double(n),as.double(r),comb = double(1))$comb
>     }
>   else stop("n must be a positive integer and r a non-negative integer.")
> }
> 
> This is a practice function (n choose r), which I wrote using a call to C
> code. Unfortunately, there is the following problem. I thought I would put
> in error checking for whether the arguments were integers. However,
> is.integer(1), for example, returns FALSE. However is.numeric(1) returns
> TRUE. It seems that explicit coercion is required for this ie.
> is.integer(as.integer(1)) returns true However, I can't use as.integer,
> because it is too aggressive for just error checking: it rounds off the
> value to the greatest integer less than. Can anyone suggest a suitable
> method of checking for an integer in this case?
> 
>                                  Sincerely, Faheem Mitha.
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Bob Wheeler --- (Reply to: bwheeler at echip.com)
        ECHIP, Inc.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From aperrin at socrates.berkeley.edu  Sun Feb 25 04:16:40 2001
From: aperrin at socrates.berkeley.edu (Andrew Perrin)
Date: Sat, 24 Feb 2001 22:16:40 -0500 (EST)
Subject: [R] Options to plot.mca ?
Message-ID: <Pine.LNX.4.21.0102242215170.6412-100000@nujoma.perrins>

Greetings. I'm using plot.mca (from MASS) to construct some correspondence
analyses of data drawn from focus-group transcripts. My question is simple
albeit rather open-ended: I'm wondering what options there might be to
plot.mca for tailoring the plots to my needs. The documentation to the
function is somewhat sparse.

Thanks-
Andy Perrin

----------------------------------------------------------------------
Andrew J Perrin - Ph.D. Candidate, UC Berkeley, Dept. of Sociology  
Chapel Hill, North Carolina, USA - http://demog.berkeley.edu/~aperrin
        aperrin at socrates.berkeley.edu - aperrin at igc.apc.org

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mac24 at humboldt.edu  Sun Feb 25 22:16:36 2001
From: mac24 at humboldt.edu (Michael Camann)
Date: Sun, 25 Feb 2001 13:16:36 -0800 (PST)
Subject: [R] Unattended printing under Windows
In-Reply-To: <3A986A4D.34E7F2F8@echip.com>
Message-ID: <200102252116.NAA31289@axe.humboldt.edu>

R-help list--

I need to process a BUNCH of data in a very repetitious way (literally
days of running the same simple analyses and producing summary graphics
over and over).  I can't face the mind-numbing boredom of this task!

I've written a brief function that automates the process and sink()'s the
text output of each analysis to a report file (it generates dozens of
the buggers) but can't figure out how to generate the graphical output,
save it to a Windows metafile (minimum requirement) and optionally print
it before moving on to the next iteration-- note that this needs to be
done from the command line, not the GUI.  The whole point is to let this
turkey run at night or some other time when I'm not there to click the
mouse.  I used to do something similar with S-plus under unix using ps()
and system() as I recall.  It's been a while, though, and I no longer have
that code.  Can anyone geve me hints as to how best to accomplish this
with R for windows?

Thanks in advance....

--Mike C.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Michael A. Camann                                  Voice: 707-826-3676
Assistant Professor of Zoology                       Fax: 707-826-3201
Institute for Forest Canopy Research     Email: mac24 at axe.humboldt.edu
Department of Biology                            ifcr at axe.humboldt.edu
Humboldt State University           
Arcata, CA 95521

                 URL:http://www.humboldt.edu/~mac24/
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From buoy at wp.pl  Mon Feb 26 00:55:00 2001
From: buoy at wp.pl (Michal Bojanowski)
Date: Mon, 26 Feb 2001 00:55:00 +0100
Subject: [R] newbie question
Message-ID: <MABBLGKPHGACBIAEKIILGEHDCAAA.buoy@wp.pl>

Hello to all.

My name is Michal Bojanowski, I'm a Sociology student at Unversity of
Warsaw. Recently I've started to learn R when I've found myself frustrated
because of inflexibility of SPSS and other "user-friendly" statistical
software. As I said, I'm new here, so my question is very simple:

I wanted to use a large data set stored in SPSS-format file. I used the
function READ.SPSS from FOREIGN contributed package. The package manual
stated, that the function returns the data as a list, in which every
variable is in different component...

What is the quickest way to convert it into a DATA.FRAME object?
(without specifying a (very long) list of variable names)


Thank you in advance for any help


PS.: Also I would be very grateful if anyone of You could give me a link to
some R introductory texts


MB

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From aperrin at socrates.berkeley.edu  Mon Feb 26 02:18:20 2001
From: aperrin at socrates.berkeley.edu (Andrew Perrin)
Date: Sun, 25 Feb 2001 20:18:20 -0500 (EST)
Subject: [R] R ignoring quantile() in source()d file
Message-ID: <Pine.LNX.4.21.0102252013560.8089-100000@nujoma.perrins>


Can anyone explain this behavior? Essentially, I've created a short file
to be read in via source() that gets some descriptive information on a
series of variables in a data frame.  For each variable, I do three
things:

print('last.hc.actors')
quantile(last.hc.actors,probs=seq(0,1,0.1),na.rm=T)
stem(last.hc.actors)

where the variable name is (in this case) last.hc.actors.  All that is
fine, except that R seems to quietly ignore all the quantile() steps.  I
narrowed it down to bare minimum, trying with a file, test.R, that
contains simply:

quantile(last.hc.actors,probs=seq(0,1,0.1),na.rm=T)

and here's the result:
> source('test.R')
> 

on the other hand, if I make test.R be simply:

stem(last.hc.actors)

here's the result:
> source('test.R')

  The decimal point is 1 digit(s) to the right of the |

   0 |
00000000000000000000000000000000000000000000000000000000000000000000+451
   1 |
00000000000000000000000000000000000000000111111111111111111111111111+298
   2 |
00000000000000000000000000000000011111111111111111111111111111111222+227
   3 |
00000000000000000000000000001111111111111111111111111111222222222222+175
   4 |
00000000000000000000001111111111111111111111222222222222222222222233+139
   5 |
00000000000000000000111111111111111111122222222222222222223333333333+109
   6 |
00000000000000000011111111111111111122222222222222222233333333333333+100
   7 |
00000000000000000011111111111111111122222222222222222233333333333333+100
   8 |
00000000000000001111111111111111222222222222222233333333333333344444+61
   9 |
00000000000001111111111111222222222223333333333444444444555555556666+14
  10 | 00000001111111222222233333334444444555555666666777777888888999999
  11 | 00000111112222233333444445555566667777888999
  12 | 000111222333444555666777888999
  13 | 0011223456789
  14 | 0123456789
  15 | 0123456789
  16 | 0123456789
  17 | 0123456789
  18 | 01

> 
 (sorry for the poor line wrapping)

Finally, the quantile() command works fine directly pasted onto the
command line:

> quantile(last.hc.actors,probs=seq(0,1,0.1),na.rm=T)
  0%  10%  20%  30%  40%  50%  60%  70%  80%  90% 100% 
   0    4   10   16   24   34   45   59   74   91  181 
> 

any ideas? Thanks.
 
----------------------------------------------------------------------
Andrew J Perrin - Ph.D. Candidate, UC Berkeley, Dept. of Sociology  
Chapel Hill, North Carolina, USA - http://demog.berkeley.edu/~aperrin
        aperrin at socrates.berkeley.edu - aperrin at igc.apc.org

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From aperrin at socrates.berkeley.edu  Mon Feb 26 02:27:01 2001
From: aperrin at socrates.berkeley.edu (Andrew Perrin)
Date: Sun, 25 Feb 2001 20:27:01 -0500 (EST)
Subject: [R] Re: R ignoring quantile() in source()d file
In-Reply-To: <Pine.LNX.4.21.0102252013560.8089-100000@nujoma.perrins>
Message-ID: <Pine.LNX.4.21.0102252026250.8089-100000@nujoma.perrins>

Even more strangeness - it works fine in batch mode:

R BATCH ../last.stemleaf.R last.stemleaf.out

gets the quantile() output just fine.

----------------------------------------------------------------------
Andrew J Perrin - Ph.D. Candidate, UC Berkeley, Dept. of Sociology  
Chapel Hill, North Carolina, USA - http://demog.berkeley.edu/~aperrin
        aperrin at socrates.berkeley.edu - aperrin at igc.apc.org
On Sun, 25 Feb 2001, Andrew Perrin wrote:

> 
> Can anyone explain this behavior? Essentially, I've created a short file
> to be read in via source() that gets some descriptive information on a
> series of variables in a data frame.  For each variable, I do three
> things:
> 
> print('last.hc.actors')
> quantile(last.hc.actors,probs=seq(0,1,0.1),na.rm=T)
> stem(last.hc.actors)
> 
> where the variable name is (in this case) last.hc.actors.  All that is
> fine, except that R seems to quietly ignore all the quantile() steps.  I
> narrowed it down to bare minimum, trying with a file, test.R, that
> contains simply:
> 
> quantile(last.hc.actors,probs=seq(0,1,0.1),na.rm=T)
> 
> and here's the result:
> > source('test.R')
> > 
> 
> on the other hand, if I make test.R be simply:
> 
> stem(last.hc.actors)
> 
> here's the result:
> > source('test.R')
> 
>   The decimal point is 1 digit(s) to the right of the |
> 
>    0 |
> 00000000000000000000000000000000000000000000000000000000000000000000+451
>    1 |
> 00000000000000000000000000000000000000000111111111111111111111111111+298
>    2 |
> 00000000000000000000000000000000011111111111111111111111111111111222+227
>    3 |
> 00000000000000000000000000001111111111111111111111111111222222222222+175
>    4 |
> 00000000000000000000001111111111111111111111222222222222222222222233+139
>    5 |
> 00000000000000000000111111111111111111122222222222222222223333333333+109
>    6 |
> 00000000000000000011111111111111111122222222222222222233333333333333+100
>    7 |
> 00000000000000000011111111111111111122222222222222222233333333333333+100
>    8 |
> 00000000000000001111111111111111222222222222222233333333333333344444+61
>    9 |
> 00000000000001111111111111222222222223333333333444444444555555556666+14
>   10 | 00000001111111222222233333334444444555555666666777777888888999999
>   11 | 00000111112222233333444445555566667777888999
>   12 | 000111222333444555666777888999
>   13 | 0011223456789
>   14 | 0123456789
>   15 | 0123456789
>   16 | 0123456789
>   17 | 0123456789
>   18 | 01
> 
> > 
>  (sorry for the poor line wrapping)
> 
> Finally, the quantile() command works fine directly pasted onto the
> command line:
> 
> > quantile(last.hc.actors,probs=seq(0,1,0.1),na.rm=T)
>   0%  10%  20%  30%  40%  50%  60%  70%  80%  90% 100% 
>    0    4   10   16   24   34   45   59   74   91  181 
> > 
> 
> any ideas? Thanks.
>  
> ----------------------------------------------------------------------
> Andrew J Perrin - Ph.D. Candidate, UC Berkeley, Dept. of Sociology  
> Chapel Hill, North Carolina, USA - http://demog.berkeley.edu/~aperrin
>         aperrin at socrates.berkeley.edu - aperrin at igc.apc.org
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Mon Feb 26 03:59:14 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Sun, 25 Feb 2001 18:59:14 -0800 (PST)
Subject: [R] newbie question
In-Reply-To: <MABBLGKPHGACBIAEKIILGEHDCAAA.buoy@wp.pl>
Message-ID: <Pine.A41.4.33.0102251858530.130926-100000@homer05.u.washington.edu>

On Mon, 26 Feb 2001, Michal Bojanowski wrote:

> Hello to all.
>
> My name is Michal Bojanowski, I'm a Sociology student at Unversity of
> Warsaw. Recently I've started to learn R when I've found myself frustrated
> because of inflexibility of SPSS and other "user-friendly" statistical
> software. As I said, I'm new here, so my question is very simple:
>
> I wanted to use a large data set stored in SPSS-format file. I used the
> function READ.SPSS from FOREIGN contributed package. The package manual
> stated, that the function returns the data as a list, in which every
> variable is in different component...
>
> What is the quickest way to convert it into a DATA.FRAME object?
> (without specifying a (very long) list of variable names)


as.data.frame()

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Mon Feb 26 04:08:30 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Sun, 25 Feb 2001 19:08:30 -0800 (PST)
Subject: [R] R ignoring quantile() in source()d file
In-Reply-To: <Pine.LNX.4.21.0102252013560.8089-100000@nujoma.perrins>
Message-ID: <Pine.A41.4.33.0102251859410.130926-100000@homer05.u.washington.edu>

On Sun, 25 Feb 2001, Andrew Perrin wrote:

>
> Can anyone explain this behavior? Essentially, I've created a short file
> to be read in via source() that gets some descriptive information on a
> series of variables in a data frame.  For each variable, I do three
> things:
>
> print('last.hc.actors')
> quantile(last.hc.actors,probs=seq(0,1,0.1),na.rm=T)
> stem(last.hc.actors)
>
> where the variable name is (in this case) last.hc.actors.  All that is
> fine, except that R seems to quietly ignore all the quantile() steps.


R is not ignoring quantile(), it simply isn't printing the results,
because you haven't asked it to.

Most R functions do not print their results: that's what print() is for.
They return their results so they can either be printed or used for
further calculations.

 This isn't always obvious to a new user, because if you invoke a function
at the command line the result is print()ed, so

> 1+1
[1] 2
looks just like
> print(1+1)
[1] 2

When source()ing a file, or inside a function, this doesn't happen. You
need to call print() or cat() explicitly to display things on the screen.
In you example you happened to have two other functions, print() and
stem(), that *do* explicitly display their results on the screen.

You probably wanted

print(quantile(last.hc.actors,probs=seq(0,1,0.1),na.rm=T) )

or alternatively, source(,echo=TRUE)

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Feb 26 08:52:23 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 26 Feb 2001 07:52:23 +0000 (GMT)
Subject: [R] Unattended printing under Windows
In-Reply-To: <200102252116.NAA31289@axe.humboldt.edu>
Message-ID: <Pine.GSO.4.31.0102260744150.15309-100000@auk.stats>

On Sun, 25 Feb 2001, Michael Camann wrote:

> R-help list--
>
> I need to process a BUNCH of data in a very repetitious way (literally
> days of running the same simple analyses and producing summary graphics
> over and over).  I can't face the mind-numbing boredom of this task!
>
> I've written a brief function that automates the process and sink()'s the
> text output of each analysis to a report file (it generates dozens of
> the buggers) but can't figure out how to generate the graphical output,
> save it to a Windows metafile (minimum requirement) and optionally print
> it before moving on to the next iteration-- note that this needs to be
> done from the command line, not the GUI.  The whole point is to let this
> turkey run at night or some other time when I'm not there to click the
> mouse.  I used to do something similar with S-plus under unix using ps()
> and system() as I recall.  It's been a while, though, and I no longer have
> that code.  Can anyone geve me hints as to how best to accomplish this
> with R for windows?

Well, I am none too clear on the blockage point here, but let me try some
pointers.  BTW, as far as I know everything you can do from the GUI in R
you can do equivalently from the command line (even replay plots, but that
is more cumbersome in the CLI).

win.metafile() allows you to produce graphics as a Windows metafile.  You
can either dev.copy the plot to win.printer() to print it (not sure if that
runs unattended: it may depend on your Windows settings) or use system()
to print the file or even file.copy() to copy it to PRN:

You may wish to make use of R-1.2.2 (due today) that creates metafiles that
some applications (e.g. Word) is happier with).

B

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mwang at mindspring.com  Mon Feb 26 09:23:53 2001
From: mwang at mindspring.com (Michael Wang)
Date: Mon, 26 Feb 2001 03:23:53 -0500 (EST)
Subject: [R] glm: family=exponential() or family=Gamma(alpha=1)?
Message-ID: <200102260823.DAA02738@julie.unixlabplus.com>

In glm, is there a way to specify the family
to be exponential, or Gamma but with alpha=1?

This is required by Dobson Exercise 4.3d, page 48.
But without specifying alpha=1, the asnwer is the same
as in the book.

If reply to the list, please cc me a copy. 

Thanks.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ligges at statistik.uni-dortmund.de  Mon Feb 26 09:54:02 2001
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 26 Feb 2001 09:54:02 +0100
Subject: [R] building packages in Windows under R 1.2.1
Message-ID: <3A9A19AA.EDAD65C9@statistik.uni-dortmund.de>

Prof Brian Ripley wrote [22.01.2001]:

> The code is new in 1.2.1, and identical code in Rcmd clean works. It looks 
> like a Windows Perl bug. On my machines under NT4 and 98 this works 
> because -d foo seems to be always true! It is probably different on 2000. 
>
> Try changing the line 
>
>        unless (-d $TMPDIR); 
>
> to 
>        unless (-e $tmpdir); 
>
> It may also depend on the Perl version. We know that system() is broken 
> in builds later than ca 619, for example. 
>
> It's strange that after years of problems with the make and shell, Perl 
> is now misbehaving. 

[OS: WinNT 4.0]

Looks like this is not the only problem: Since R-1.2.0 I didn't
installed packages from source in windows -- and I am sure, it worked
for me with R-1.2.0. But it didn't work with R-1.2.1 any more (see
output below). All the time (for R-1.2.0 and R-1.2.1) with the same
versions of the C-compiler, Perl (5.6.0, build 623), etc.

Here the output of a try with acepack (but the same with other
packages):

********************************************

C:\user\ligges\R>rcmd install acepack_1.2-2.tar.gz

make: Entering directory `/cygdrive/t/r/src/gnuwin32'
make DLLNM=  EXTRADOCS= \
  -C C:/user/ligges/R/R.INSTALL/acepack PKG=acepack RHOME=t:/r
RLIB=t:/r/library \
  -f t:/r/src/gnuwin32/MakePkg
make[1]: Entering directory `/user/ligges/R/R.INSTALL/acepack'
if [ ! -f ./TITLE -a -f ./DESCRIPTION ] ; then \
  gawk -f t:/r/src/gnuwin32/maketitle.awk ./DESCRIPTION > TITLE; \
fi
---------- Making package acepack ------------
mkdir -p t:/r/library/acepack
cp -r   ./DESCRIPTION  ./INDEX  ./TITLE ./README ./README.ace
./README.avas ./ace.doc t:/r/library/acepack/
   adding build stamp to DESCRIPTION
t:/r/bin/Rterm: not found
make[1]: *** [t:/r/library/acepack/zzzz] Error 127
make[1]: Leaving directory `/user/ligges/R/R.INSTALL/acepack'
make: *** [pkg-acepack] Error 2
make: Leaving directory `/cygdrive/t/r/src/gnuwin32'
*** Installation of acepack failed ***

*****************************************

Interesting:
The output says: "t:/r/bin/Rterm: not found". But Rterm.exe is in the
same directory with Rcmd.exe, and the path Uand R_HOME) is set
correctly.

Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ligges at statistik.uni-dortmund.de  Mon Feb 26 10:25:10 2001
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 26 Feb 2001 10:25:10 +0100
Subject: [R] building packages in Windows under R 1.2.1
References: <200102260857.IAA11305@toucan.stats.ox.ac.uk>
Message-ID: <3A9A20F6.CFA248A6@statistik.uni-dortmund.de>

Prof Brian Ripley wrote:
> 
> > Date: Mon, 26 Feb 2001 09:54:02 +0100
> > From: Uwe Ligges <ligges at statistik.uni-dortmund.de>
> > X-Accept-Language: en
> > To: "Brian D. Ripley" <ripley at stats.ox.ac.uk>
> > CC: r-help <r-help at stat.math.ethz.ch>
> > Subject: Re: [R] building packages in Windows under R 1.2.1
> >
> > Prof Brian Ripley wrote [22.01.2001]:
> >
> > > The code is new in 1.2.1, and identical code in Rcmd clean works. It looks
> > > like a Windows Perl bug. On my machines under NT4 and 98 this works
> > > because -d foo seems to be always true! It is probably different on 2000.
> > >
> > > Try changing the line
> > >
> > >        unless (-d $TMPDIR);
> > >
> > > to
> > >        unless (-e $tmpdir);
> > >
> > > It may also depend on the Perl version. We know that system() is broken
> > > in builds later than ca 619, for example.
> > >
> > > It's strange that after years of problems with the make and shell, Perl
> > > is now misbehaving.
> >
> > [OS: WinNT 4.0]
> >
> > Looks like this is not the only problem: Since R-1.2.0 I didn't
> > installed packages from source in windows -- and I am sure, it worked
> > for me with R-1.2.0. But it didn't work with R-1.2.1 any more (see
> > output below). All the time (for R-1.2.0 and R-1.2.1) with the same
> > versions of the C-compiler, Perl (5.6.0, build 623), etc.
> 
> Unless you can pin the problem down, I can't help.   I have
> more-or-less given up supporting R on Windows, anyway.

At first: Many thanks you for all your windows support in the last years
and all the time you spended!

Because I don't really speak perl, I hope there's anyone else on R-help
who can help. If not, I'll try to pin it down during the next few days.


> I suspect you may need to mount drive t: under cygwin.

No. Happens also when everything (also R) it installed on drive c:
After that I started in ...\bin with the *.tar.gz also in ...\bin ---
with the same result:

C:\user\ligges\r-1.2.1\bin>rcmd install strucchange_1.1-1.tar.gz

make: Entering directory `/user/ligges/r-1.2.1/src/gnuwin32'
... [SNIP] ...
C:/user/ligges/r-1.2.1/bin/Rterm: not found
make[1]: *** [C:/user/ligges/r-1.2.1/library/strucchange/zzzz] Error 127
... [SNIP] ...


Uwe
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Marwan.Khawaja at fafo.no  Mon Feb 26 10:54:56 2001
From: Marwan.Khawaja at fafo.no (Khawaja Marwan)
Date: Mon, 26 Feb 2001 10:54:56 +0100
Subject: [R] newbie question
Message-ID: <B5DEF8EC8E9D3444A94206C3C9949FC33A9B15@mailsrv01.Fafo.No>


	What is the quickest way to convert it into a DATA.FRAME object?
	(without specifying a (very long) list of variable names)

I usually read it in s-plus and then from s-splus to R.

Marwan Khawaja
Fafo Institute for Applied Social Science
Borggt. 2B, P.O.Box 2947 T?yen
N-0608 Oslo, Norway


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cribari at de.ufpe.br  Mon Feb 26 11:01:44 2001
From: cribari at de.ufpe.br (Francisco Cribari)
Date: Mon, 26 Feb 2001 07:01:44 -0300 (EST)
Subject: [R] Holt-Winters code / time series
Message-ID: <Pine.GSO.3.96.1010226065618.17605C-100000@bernoulli>


There is R code for Holt-Winters exponential smoothing in 

Janacek, Gareth (2000). Practical Time Series. London: Arnould 
   Publishers. 

See also 

  http://www.mth.uea.ac.uk/h200/tsbook/

It would be nice if the ts library could include this code
(this way, it would be packaged with the other time series 
functions in ts). 

Best regards, Francisco. 

-- 
   _                                                         _  
  (o-               Francisco Cribari-Neto                  -o)
  //\  Dept. de Estatistica, Univ. Federal de Pernambuco    /\\  
 .v_/_....................................................._\_v.
/      Phone: (+55-81) 3271-8420  Fax: (+55-81) 3271-8422       \
:      Email: cribari at de.ufpe.br  Web: www.de.ufpe.br/~cribari  :
:                                                               : 
:      Linux: more Unix than Unix.        http://www.linux.org  :
\.............................................................../


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From H.RINNER at TIROL.GV.AT  Mon Feb 26 12:38:37 2001
From: H.RINNER at TIROL.GV.AT (RINNER Heinrich)
Date: Mon, 26 Feb 2001 12:38:37 +0100
Subject: [R] "untable" function
Message-ID: <C4D44AB4CB62D311BA6500041202E886264140@xms1.tirol.gv.at>

Dear R-users!

I am using R1.2.0 under Windows NT4.0, and have data of the following form:

> #simple example of data structure:
> x <- data.frame(group=LETTERS[1:3], class1=1:3, class2=4:6)
> x
  group class1 class2
1     A      1        4
2     B      2        5
3     C      3        6

I would like to convert this to a data.frame y of the following form:
> y
 group class counts
1       A  class1  1
2       A  class2  4
3       B  class1  2
4       B  class2  5
5       C  class1  3
6       C  class2  6

So what I'm looking for is something like an "untable"-function. Is there a
simple "natural" way for this in R, or will I have to loop through rows and
columns somehow (my "real world" data set consists of 279 rows/groups and
100 columns/classes)?

Heinrich.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Feb 26 13:14:48 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 26 Feb 2001 12:14:48 +0000 (GMT)
Subject: [R] "untable" function
Message-ID: <200102261214.MAA11799@toucan.stats.ox.ac.uk>


> From: RINNER Heinrich <H.RINNER at TIROL.GV.AT>
> To: "'r-help at stat.math.ethz.ch'" <r-help at stat.math.ethz.ch>
> Subject: [R] "untable" function
> Date: Mon, 26 Feb 2001 12:38:37 +0100
> 
> Dear R-users!
> 
> I am using R1.2.0 under Windows NT4.0, and have data of the following form:
> 
> > #simple example of data structure:
> > x <- data.frame(group=LETTERS[1:3], class1=1:3, class2=4:6)
> > x
>   group class1 class2
> 1     A      1        4
> 2     B      2        5
> 3     C      3        6
> 
> I would like to convert this to a data.frame y of the following form:
> > y
>  group class counts
> 1       A  class1  1
> 2       A  class2  4
> 3       B  class1  2
> 4       B  class2  5
> 5       C  class1  3
> 6       C  class2  6
> 
> So what I'm looking for is something like an "untable"-function. Is there a
> simple "natural" way for this in R, or will I have to loop through rows and
> columns somehow (my "real world" data set consists of 279 rows/groups and
> 100 columns/classes)?

Look in the R-data manual, at functions stack and reshapeLong

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From paradis at isem.univ-montp2.fr  Mon Feb 26 13:18:57 2001
From: paradis at isem.univ-montp2.fr (Emmanuel Paradis)
Date: Mon, 26 Feb 2001 13:18:57 +0100
Subject: [R] mouse operation
Message-ID: <3.0.32.20010226131855.00900710@162.38.183.200>

At 10:40 24/02/01 +0900, you wrote:
>Hi,
>
>Is it possible to handle mouse operation with the
>current release of R?
>
>--
>Moon Yul Huh
>Professor of Statistics, Sung Kyun Kwan University
>Chongro-Ku, Myungryun-Dong, Seoul, Korea
>Tel: 82 2 760 0463; Fax:82 2 764 0622;
>myhuh at skku.ac.kr; mobile: 016 388 3362

Hi there!

Please mention which operating system(s) and which version(s) of R you are
using: this helps people to help you.

>From your mail header, I guess you are under Windows; I am under Windows
too and the mouse works fine for me.

Emmanuel Paradis
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jarioksa at cc.oulu.fi  Mon Feb 26 15:37:15 2001
From: jarioksa at cc.oulu.fi (Jari Oksanen)
Date: Mon, 26 Feb 2001 16:37:15 +0200
Subject: [R] canonical correspondence analysis 
In-Reply-To: Message from Patrick Foley <patfoley@csus.edu> 
   of "Sat, 17 Feb 2001 07:47:47 PST." <3A8E9D23.9A58A8E3@csus.edu> 
Message-ID: <200102261437.QAA01693@pc112145.oulu.fi>


>      [Manually approved, since my filter had this looking like spam...
>  MM] 
It was advertisement: no wonder it looked like a spam...

Seriously: there are numerous commercial ordination packages around; PC-Ord, 
Syn-Tax and Canoco being perhaps the most popular. Then there are some lesser 
known and more free packages, such as ADE-4 (http://pbil.univ-lyon1.fr/ADE-4/AD
E-4F.html) for Windows and Mac, and Pierre Legendre's rdacca for Mac, Windows 
and all platforms with gcc(!) -- I cannot get Legendre's URL now, since 
www.umontreal.ca is slow to respond, but you may look at there yourself.  The 
latter does many things that Canoco does, and ADE-4 is even more general (and 
obviously with a nicer GUI, although it doesn't run on my platform, so I don't 
know personally). The classic goodies Decorana and Twinspan are freeware, 
since they were funded by NFS, and can be get from many sources, including my 
homepages.  None of these is R, and so they are not relevant here.  However, 
most things that people do with ordination software, could be done in R, with 
major holes:

* CCA which is the canonical ordination method in community ecology nowadays: 
filling this gap would be really good (this is not my personal opinion, which 
is more sceptical, but the general opinion). I'd glad to see the functions, if 
they are available (and I think the eigenvector, or svd, version should be 
favoured instead of the original power algorithm look-alike).

* Decorana used to be the canonical method before CCA (obviously I use 
`canonical' in a different meaning than ter Braak). The method is sick, but 
the Fortran source code is freely available and could be easily plugged into R 
-- for those who want it.

* The most popular classificaton program in community ecology may be Twinspan 
(Two Way Indicator Species Analysis). It exists just in one incarnation which 
could be plugged into R, although the result object needs some thinking. For 
other clustering methods, R is superiour to many community analysis packages 
already.

* Venables' & Ripley's isoMDS (and perhaps even more interestingly: sammon) 
are already available, but they'd need some extra tools for community 
ecologists. Most importantly, an additional package to `dist' with 
ecologically more relevant distance measures: those that have a good 
rank-order correlation with ecological distances with unimodal species 
responses along ecological axes (`gradients').  By the way, the default 
practice of using metric scaling as the starting configuration in isoMDS is 
almost guaranteed to fall into local optima: I have tested with some data sets 
using random starting configurations and usually managed to find much lower 
stresses than the default (this is in common with most implementations of MDS 
in statistical packages).

* Then we might need an interface for data formats popular in ecology. This 
should be very easy (e.g., `read.CEP').

cheers, jari oksanen


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Feb 26 16:03:49 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 26 Feb 2001 15:03:49 +0000 (GMT)
Subject: [R] canonical correspondence analysis 
Message-ID: <200102261503.PAA17108@toucan.stats.ox.ac.uk>

> Date: Mon, 26 Feb 2001 16:37:15 +0200
> From: Jari Oksanen <jarioksa at sun3.oulu.fi>
> 
> 
[...]
> 
> * CCA which is the canonical ordination method in community ecology nowadays: 
> filling this gap would be really good (this is not my personal opinion, which 
> is more sceptical, but the general opinion). I'd glad to see the functions, if 
> they are available (and I think the eigenvector, or svd, version should be 
> favoured instead of the original power algorithm look-alike).

A package by Stephane Dray that covers CCA is in preparation and will
be on CRAN shortly.

[...]

> * Venables' & Ripley's isoMDS (and perhaps even more interestingly: sammon) 
> are already available, but they'd need some extra tools for community 
> ecologists. Most importantly, an additional package to `dist' with 
> ecologically more relevant distance measures: those that have a good 
> rank-order correlation with ecological distances with unimodal species 
> responses along ecological axes (`gradients').  By the way, the default 
> practice of using metric scaling as the starting configuration in isoMDS is 
> almost guaranteed to fall into local optima: I have tested with some data sets 
> using random starting configurations and usually managed to find much lower 
> stresses than the default (this is in common with most implementations of MDS 
> in statistical packages).

Sure, but that is a feature not a bug.  You search for a local minimum
near the starting point.  If you don't like cmdscale as a starting point
you can easily supply another.  There is no way to do other than
local minimization, and not much reason to suppose that the answer is
a particularly compelling one.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Mon Feb 26 17:05:33 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 26 Feb 2001 08:05:33 -0800 (PST)
Subject: [R] glm: family=exponential() or family=Gamma(alpha=1)?
In-Reply-To: <200102260823.DAA02738@julie.unixlabplus.com>
Message-ID: <Pine.A41.4.33.0102260757001.130774-100000@homer38.u.washington.edu>

On Mon, 26 Feb 2001, Michael Wang wrote:

> In glm, is there a way to specify the family
> to be exponential, or Gamma but with alpha=1?

Yes. You do it in summary(), not in glm().
  summary(fit)
estimates the dispersion
  summary(fit, dispersion=1)
sets it to 1 (exponential).

> This is required by Dobson Exercise 4.3d, page 48.
> But without specifying alpha=1, the asnwer is the same
> as in the book.

The estimated coefficients do not depend on alpha. That's why the family
object doesn't have to specify a value. The standard errors do, but if the
data are really exponential the estimated dispersion will be close to 1
with reasonable sample sizes (estimating the dispersion and fixing it at
the true value are asymptotically equivalent).

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From feldesmanm at pdx.edu  Mon Feb 26 17:12:04 2001
From: feldesmanm at pdx.edu (Marc Feldesman)
Date: Mon, 26 Feb 2001 08:12:04 -0800
Subject: [R] Difference between S-Plus & R 1.2.1 
Message-ID: <5.0.2.1.2.20010226080151.00a78118@127.0.0.1>

Sorry for the uninformative subject.

The following piece of code gives different output in S-Plus (2K & 6) vs R 
1.2.1 (Win)

apply(apehum[,6:15], 2, function(x) which(is.na(x)))

S-Plus results:

 > apply(apehum[,6:15], 2, function(x) which(is.na(x)))
$latsupri:
numeric(0)

$medepico:
numeric(0)

$pdhtcapi:
numeric(0)

$mlhtcapi:
numeric(0)

$aphttroc:
[1] 151 152

$mlhttroc:
numeric(0)

$antartbr:
numeric(0)

$olecrdep:
[1] 151

$humlengt:
[1] 105

$biepi:
numeric(0)

R 1.2.1 results:

$latsupri
numeric(0)

$medepico
numeric(0)

$pdhtcapi
numeric(0)

$mlhtcapi
numeric(0)

$aphttroc
151 152
151 152

$mlhttroc
numeric(0)

$antartbr
numeric(0)

$olecrdep
151
151

$humlengt
105
105

$biepi
numeric(0)

Why does the R output duplicate every entry where NA's are found?  I can 
eliminate this (in R) by changing the statement to:

apply(apehum[,6:15], 2, function(x) unique(which(is.na(x))))

I'm aware of the differences in the argument list for is.na() between 
S-Plus and R, but changing the default arguments doesn't avoid the 
duplicate entries.

I'm sure there is a simple explanation but it eludes me right now.

Thanks.







=====================
Dr. Marc R. Feldesman
Professor and Chairman
Anthropology Department
Portland State University
1721 SW Broadway
Portland, Oregon 97201
email:  feldesmanm at pdx.edu
phone:  503-725-3081
fax:    503-725-3905
http://web.pdx.edu/~h1mf
PGP Key Available On Request
======================

"Anyway, no drug, not even alcohol, causes the fundamental ills of society.
If we're looking for the source of our troubles, we shouldn't test people
for drugs, we should test them for stupidity, ignorance, greed and love of
power."   P.J. O'Rourke

Powered by Optiplochoerus and Windows 2000 (scary isn't it?)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Mon Feb 26 17:24:49 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 26 Feb 2001 08:24:49 -0800 (PST)
Subject: [R] Difference between S-Plus & R 1.2.1 
In-Reply-To: <5.0.2.1.2.20010226080151.00a78118@127.0.0.1>
Message-ID: <Pine.A41.4.33.0102260820330.130774-100000@homer38.u.washington.edu>

On Mon, 26 Feb 2001, Marc Feldesman wrote:

> Sorry for the uninformative subject.
>
> The following piece of code gives different output in S-Plus (2K & 6) vs R
> 1.2.1 (Win)
>
> apply(apehum[,6:15], 2, function(x) which(is.na(x)))
>
<snip>
>
> Why does the R output duplicate every entry where NA's are found?

It doesn't.  Try using length() if you don't believe it.  R has *labels*
(from the row names) on the non-empty vectors, S-PLUS apparently does not.

>							 I can
> eliminate this (in R) by changing the statement to:
>
> apply(apehum[,6:15], 2, function(x) unique(which(is.na(x))))

Yes, unique() strips the names.

> I'm aware of the differences in the argument list for is.na() between
> S-Plus and R, but changing the default arguments doesn't avoid the
> duplicate entries.
>
> I'm sure there is a simple explanation but it eludes me right now.

:-)

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From znmeb at aracnet.com  Mon Feb 26 17:50:01 2001
From: znmeb at aracnet.com (M. Edward (Ed) Borasky)
Date: Mon, 26 Feb 2001 08:50:01 -0800 (PST)
Subject: [R] building packages in Windows under R 1.2.1
In-Reply-To: <3A9A19AA.EDAD65C9@statistik.uni-dortmund.de>
Message-ID: <Pine.LNX.4.31.0102260840530.13239-100000@shell1.aracnet.com>

On Mon, 26 Feb 2001, Uwe Ligges wrote:

> Looks like this is not the only problem: Since R-1.2.0 I didn't
> installed packages from source in windows -- and I am sure, it worked
> for me with R-1.2.0. But it didn't work with R-1.2.1 any more (see

[snip]

> t:/r/bin/Rterm: not found
> make[1]: *** [t:/r/library/acepack/zzzz] Error 127
> make[1]: Leaving directory `/user/ligges/R/R.INSTALL/acepack'
> make: *** [pkg-acepack] Error 2
> make: Leaving directory `/cygdrive/t/r/src/gnuwin32'
> *** Installation of acepack failed ***

[snip]

Hmmm ... "t:" is a "drive letter", right? Is this a networked drive? I don't
usually see drive letters that far down in the alphabet for drives on the
machine where I'm running. Local drives are usually a: (the floppy), c: (the
main hard drive), etc. If it is a networked drive, check to see that it's
connected to the right share on the right server.

I have extensive experience with ActivePerl from ActiveState, but there is
another version. The two are supposed to be (more or less) the same, but there
may be one subtle difference that is enough to sink R. Which one do you have?
--
znmeb at aracnet.com (M. Edward Borasky) http://www.aracnet.com/~znmeb

How do you get an elephant out of a theatre?
You can't; it's in their blood!

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ligges at statistik.uni-dortmund.de  Mon Feb 26 19:38:45 2001
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 26 Feb 2001 19:38:45 +0100
Subject: [R] building packages in Windows under R 1.2.1
References: <Pine.LNX.4.31.0102260840530.13239-100000@shell1.aracnet.com>
Message-ID: <3A9AA2B5.E26F69C@statistik.uni-dortmund.de>

"M. Edward (Ed) Borasky" wrote:
> 
> On Mon, 26 Feb 2001, Uwe Ligges wrote:
> 
> > Looks like this is not the only problem: Since R-1.2.0 I didn't
> > installed packages from source in windows -- and I am sure, it worked
> > for me with R-1.2.0. But it didn't work with R-1.2.1 any more (see
> 
> [snip]
> 
> > t:/r/bin/Rterm: not found
> > make[1]: *** [t:/r/library/acepack/zzzz] Error 127
> > make[1]: Leaving directory `/user/ligges/R/R.INSTALL/acepack'
> > make: *** [pkg-acepack] Error 2
> > make: Leaving directory `/cygdrive/t/r/src/gnuwin32'
> > *** Installation of acepack failed ***
> 
> [snip]
> 
> Hmmm ... "t:" is a "drive letter", right? Is this a networked drive? I don't
> usually see drive letters that far down in the alphabet for drives on the
> machine where I'm running. Local drives are usually a: (the floppy), c: (the
> main hard drive), etc. If it is a networked drive, check to see that it's
> connected to the right share on the right server.

Right, a network connection. 
But the same happens if R is installed on drive c: 
(I already described that on R-help).


> I have extensive experience with ActivePerl from ActiveState, but there is
> another version. The two are supposed to be (more or less) the same, but there
> may be one subtle difference that is enough to sink R. Which one do you have?

C:\>perl --version

This is perl, v5.6.0 built for MSWin32-x86-multi-thread
(with 1 registered patch, see perl -V for more detail)

Copyright 1987-2000, Larry Wall

Binary build 623 provided by ActiveState Tool Corp.
http://www.ActiveState.com
Built 18:59:19 Dec 15 2000


Uwe
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From yuling5 at yahoo.com  Mon Feb 26 20:22:22 2001
From: yuling5 at yahoo.com (Yu-Ling Wu)
Date: Mon, 26 Feb 2001 11:22:22 -0800 (PST)
Subject: [R] output without labels and delimited by Tab
Message-ID: <20010226192222.94255.qmail@web11504.mail.yahoo.com>

Hi,

I have a set of data and when I run "summary(data)", I
got the following output:

    dstuser         dstmethod        numaction     
 Min.   : 0.000   Min.   : 0.000   Min.   :  0.00  
 1st Qu.: 1.000   1st Qu.: 1.000   1st Qu.:  2.00  
 Median : 3.000   Median : 6.500   Median : 33.00  
 Mean   : 4.894   Mean   : 6.565   Mean   : 59.32  
 3rd Qu.: 9.000   3rd Qu.:11.000   3rd Qu.: 94.25  
 Max.   :25.000   Max.   :19.000   Max.   :317.00  

Question (1): How to make the output look like this
(get rid of the "labels")?

dstuser dstmethod  numaction     
 0.000   0.000   0.00  
 1.000   1.000   2.00  
 3.000   6.500   33.00  
 4.894   6.565   59.32  
 9.000   11.000  94.25  
 25.000  19.000  317.00  

Question (2): How to make each column delimited by Tab
instead of white spaces?

Thanks,
Yu-Ling Wu

__________________________________________________
Do You Yahoo!?
Get email at your own domain with Yahoo! Mail. 
http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From poohtest at yahoo.com  Mon Feb 26 20:49:59 2001
From: poohtest at yahoo.com (pooh rondstr)
Date: Mon, 26 Feb 2001 11:49:59 -0800 (PST)
Subject: [R] t-test with indifference zone
Message-ID: <20010226194959.38454.qmail@web12003.mail.yahoo.com>

Hi R gurus,

I am looking for a t-test function with indifference
zone... or a reference.

Basically, I would like to have the following test:

Ho:   0 < u < 2
Ha:   u > 2 or u < 0

Any reference or a published paper for this type of
test is welcome.

Cheers,

Pooh

__________________________________________________
Do You Yahoo!?
Get email at your own domain with Yahoo! Mail. 
http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gb at stat.umu.se  Mon Feb 26 21:31:09 2001
From: gb at stat.umu.se (gb)
Date: Mon, 26 Feb 2001 21:31:09 +0100 (CET)
Subject: [R] survfit
In-Reply-To: <3A9AA2B5.E26F69C@statistik.uni-dortmund.de>
Message-ID: <Pine.LNX.4.30.0102262115400.4530-100000@tal.stat.umu.se>

I have two problems with 'survfit' in survival5; R-1.2.1, RH7.0:
------------------------------------------------------------
> ls()
character(0)
> tid <- c(1,2,3)
> eve <- c(1,1,1)
> x <- c(1,0,1)
> library(survival5)
> fit <- coxph(Surv(tid, eve) ~ x)
> s.fit <- survfit(fit)
Error in model.frame(formula, rownames, variables, varnames, extras,
extranames,  :
	variable lengths differ
-------------------------------------------------------------
Putting these statements in a function generates on the other hand:
'Error in Surv(tid, cens) : Object "cens" not found'
(from survfit) when executing the function.

What am I doing wrong?

G?ran
-- 
 G?ran Brostr?m                      tel: +46 90 786 5223
 professor                           fax: +46 90 786 6614
 Department of Statistics            http://www.stat.umu.se/egna/gb/
 Ume? University
 SE-90187 Ume?, Sweden             e-mail: gb at stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From s.mcclatchie at niwa.cri.nz  Mon Feb 26 21:36:02 2001
From: s.mcclatchie at niwa.cri.nz (S.McClatchie)
Date: Tue, 27 Feb 2001 09:36:02 +1300
Subject: [R] trying to find the function banking()
Message-ID: <200102262036.f1QKauI01317@storm.niwa.cri.nz>

Colleagues

----------------------------------
System info:
R version rw1020 on NT
ESS using emacs ver. 20.4

----------------------------------

Can anyone please tell me where to find the function "banking()" 
containing Cleveland's solution to optimising graph aspect ratio? It is 
mentioned in Venables and Riply 1994, pg. 112, Ex. 3.7, q. 3.5.

 I have not found it (or perhaps have missed it) in the R base package,  
nor in MASS,  nor in a quick check of contributed package contents (for 
Windows).

Thanks,

Sam

Sam McClatchie, Research scientist (fisheries acoustics))))))))))
NIWA (National Institute of Water & Atmospheric Research Ltd)
PO Box 14 901, Kilbirnie, Wellington, New Zealand
s.mcclatchie at niwa.cri.nz 

                    /\
...>><xX(?> // \\
                 /// \\\   
                //// \\\\
               ///  <?)Xx><<
              /////  \\\\\\
        ><(((?>   
  >><(((?>   ...>><xX(?>O<?)Xx><<

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gb at stat.umu.se  Mon Feb 26 22:07:01 2001
From: gb at stat.umu.se (gb)
Date: Mon, 26 Feb 2001 22:07:01 +0100 (CET)
Subject: [R] t-test with indifference zone
In-Reply-To: <20010226194959.38454.qmail@web12003.mail.yahoo.com>
Message-ID: <Pine.LNX.4.30.0102262204500.4699-100000@tal.stat.umu.se>

Hi Poo,

I think E.L. Lehmann wrote about this. You could e.g.
check his book "Testing Statistical Hypotheses".

G?ran

On Mon, 26 Feb 2001, pooh rondstr wrote:

> Hi R gurus,
>
> I am looking for a t-test function with indifference
> zone... or a reference.
>
> Basically, I would like to have the following test:
>
> Ho:   0 < u < 2
> Ha:   u > 2 or u < 0
>
> Any reference or a published paper for this type of
> test is welcome.
>
> Cheers,
>
> Pooh
>
> __________________________________________________
> Do You Yahoo!?
> Get email at your own domain with Yahoo! Mail.
> http://personal.mail.yahoo.com/
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.--.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
 G?ran Brostr?m                      tel: +46 90 786 5223
 professor                           fax: +46 90 786 6614
 Department of Statistics            http://www.stat.umu.se/egna/gb/
 Ume? University
 SE-90187 Ume?, Sweden             e-mail: gb at stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Mon Feb 26 22:09:51 2001
From: ben at zoo.ufl.edu (ben@zoo.ufl.edu)
Date: Mon, 26 Feb 2001 16:09:51 -0500 (EST)
Subject: [R] output without labels and delimited by Tab
In-Reply-To: <20010226192222.94255.qmail@web11504.mail.yahoo.com>
Message-ID: <Pine.LNX.4.30.0102261556590.1867-100000@bolker.zoo.ufl.edu>


  The main function driving the formatting here is summary.data.frame().
You can hack this function to get the formatting you want.

  Or (for a probably-quicker but less general solution) you can just write
your own function with less complication than summary.data.frame.

mysum <- function(x) {
  qq <- quantile(x,c(0.25,0.5,0.75))
  c(min(x),qq[1:2],mean(x),qq[3],max(x))
}

write.table(apply(x,2,mysum),sep="\t",quote=FALSE,row.names=FALSE)

Does more or less what you want, although there is a problem with the
column headers being shorter (and thus not tabbed over as far) as the
columns.  You could implement something with blank-padding, keeping the
same number of significant digits for all the numbers, etc., but
eventually you will find yourself rewriting summary.data.frame() from
scratch.

On Mon, 26 Feb 2001, Yu-Ling Wu wrote:

> Hi,
>
> I have a set of data and when I run "summary(data)", I
> got the following output:
>
>     dstuser         dstmethod        numaction
>  Min.   : 0.000   Min.   : 0.000   Min.   :  0.00
>  1st Qu.: 1.000   1st Qu.: 1.000   1st Qu.:  2.00
>  Median : 3.000   Median : 6.500   Median : 33.00
>  Mean   : 4.894   Mean   : 6.565   Mean   : 59.32
>  3rd Qu.: 9.000   3rd Qu.:11.000   3rd Qu.: 94.25
>  Max.   :25.000   Max.   :19.000   Max.   :317.00
>
> Question (1): How to make the output look like this
> (get rid of the "labels")?
>
> dstuser dstmethod  numaction
>  0.000   0.000   0.00
>  1.000   1.000   2.00
>  3.000   6.500   33.00
>  4.894   6.565   59.32
>  9.000   11.000  94.25
>  25.000  19.000  317.00
>
> Question (2): How to make each column delimited by Tab
> instead of white spaces?
>
> Thanks,
> Yu-Ling Wu
>
> __________________________________________________
> Do You Yahoo!?
> Get email at your own domain with Yahoo! Mail.
> http://personal.mail.yahoo.com/
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker at zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Feb 26 22:25:25 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 26 Feb 2001 21:25:25 +0000 (GMT Standard Time)
Subject: [R] trying to find the function banking()
In-Reply-To: <200102262036.f1QKauI01317@storm.niwa.cri.nz>
Message-ID: <Pine.WNT.4.31.0102262123090.165-100000@tern.stats>

On Tue, 27 Feb 2001, S.McClatchie wrote:

> Colleagues
>
> ----------------------------------
> System info:
> R version rw1020 on NT
> ESS using emacs ver. 20.4
>
> ----------------------------------
>
> Can anyone please tell me where to find the function "banking()"
> containing Cleveland's solution to optimising graph aspect ratio? It is
> mentioned in Venables and Riply 1994, pg. 112, Ex. 3.7, q. 3.5.

Ripley, 1997, q 3.4, I think!

>  I have not found it (or perhaps have missed it) in the R base package,
> nor in MASS,  nor in a quick check of contributed package contents (for
> Windows).

It is part of Trellis in S-PLUS.  You need the 1999 edition for use with R.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Mon Feb 26 22:42:38 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 26 Feb 2001 13:42:38 -0800 (PST)
Subject: [R] survfit
In-Reply-To: <Pine.LNX.4.30.0102262115400.4530-100000@tal.stat.umu.se>
Message-ID: <Pine.A41.4.33.0102261341040.130774-100000@homer38.u.washington.edu>

On Mon, 26 Feb 2001, gb wrote:

> I have two problems with 'survfit' in survival5; R-1.2.1, RH7.0:
> ------------------------------------------------------------
> > ls()
> character(0)
> > tid <- c(1,2,3)
> > eve <- c(1,1,1)
> > x <- c(1,0,1)
> > library(survival5)
> > fit <- coxph(Surv(tid, eve) ~ x)
> > s.fit <- survfit(fit)
> Error in model.frame(formula, rownames, variables, varnames, extras,
> extranames,  :
> 	variable lengths differ
> -------------------------------------------------------------
> Putting these statements in a function generates on the other hand:
> 'Error in Surv(tid, cens) : Object "cens" not found'
> (from survfit) when executing the function.
>
> What am I doing wrong?

There seems to be a problem with model.frame.coxph() and the (relatively)
new behaviour of model.frame using the environments of formulas. The
environment of a formula in a coxph() object is something strange.

A temporary work-around  is to always put your data in a dataframe.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From apeng at emmes.com  Tue Feb 27 00:14:10 2001
From: apeng at emmes.com (Amy C. Peng)
Date: Mon, 26 Feb 2001 18:14:10 -0500
Subject: [R] trimmed correlations
Message-ID: <3.0.5.32.20010226181410.00a04100@netgate.emmes.com>

Dear R users:

Does anyone know if there are any R library functions for computing trimmed
correlations, similar to the trim option in Splus's cor function?

Also, does anyone know if there are any R library functions for computing a
Euclidean distance matrix which can handle missing values, similar to
Splus's dist function?

Please reply directly to me, as I am not currently a list recipient.
Thanks very much for your advice.

Sincerely,
Amy Peng

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Friedrich.Leisch at ci.tuwien.ac.at  Fri Feb 23 08:23:15 2001
From: Friedrich.Leisch at ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 23 Feb 2001 17:53:15 +1030
Subject: [R] hclust question
In-Reply-To: <Pine.LNX.4.30.0102222234280.20620-100000@param.math.umbc.edu>
References: <Pine.LNX.4.30.0102222234280.20620-100000@param.math.umbc.edu>
Message-ID: <14998.4067.560299.321303@celeborn.at>

>>>>> On Thu, 22 Feb 2001 22:37:40 -0500 (EST),
>>>>> Ranjan Maitra (RM) wrote:

  > Dear all,
  > I have a question with regard to the use of hclust. I would like to be
  > able to specify my own distance matrix instead of asking R to compute
  > the distance matrix for me. It is computationally easier for me this
  > way. My question is: How can I get hclust to accept this?

simply use as.dist() to convert a matrix of distances to a distance
object.

e.g.:


## some arbitrary symmetric matrix x
R> x
          1         2         3         4         5
1 0.0000000 1.5705860 1.0434241 1.7699446 0.6694592
2 1.5705860 0.0000000 0.5271619 0.1993587 0.9011267
3 1.0434241 0.5271619 0.0000000 0.7265205 0.3739649
4 1.7699446 0.1993587 0.7265205 0.0000000 1.1004854
5 0.6694592 0.9011267 0.3739649 1.1004854 0.0000000
R> hclust(as.dist(x))

Call:
hclust(d = as.dist(x))

Cluster method   : complete 
Number of objects: 5 


hope this helps,

-- 
-------------------------------------------------------------------
                        Friedrich  Leisch 
Institut f?r Statistik                     Tel: (+43 1) 58801 10715
Technische Universit?t Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstra?e 8-10/1071      Friedrich.Leisch at ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hzi at uol.com.br  Tue Feb 27 15:03:00 2001
From: hzi at uol.com.br (hzi)
Date: Tue, 27 Feb 2001 11:03:00 -0300
Subject: [R] Newbie question: what are the advantages?
Message-ID: <004001c0a0c5$ff145d20$6fc7bfc8@jarnt>

Hi -

    I?m a medical graduate student. I?m totally new to R, although I had heard of S before. I read it was GNU free software, and since I also use Linux, I decide to check it out.
    But I have some doubts regarding R: how does using R differ from using software packages, like SPSS (which is the one I?m used to)? What are the advantages of using R when compared? Is flexibility an issue? What about the learning curve? Is it something that is awfully hard to learn? And the documentation seems to be rather sparse, unless you?re willling to buy a book (no, I?m not some "cheap" person, I?m a student from Brazil - things are not so cheap for me...which is one of the reasons free software is attractive to me).
    Thank you,
    Best regards to all.

    Henry 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20010227/ef0f77b2/attachment.html

From yuling5 at yahoo.com  Tue Feb 27 02:09:44 2001
From: yuling5 at yahoo.com (Yu-Ling Wu)
Date: Mon, 26 Feb 2001 17:09:44 -0800 (PST)
Subject: [R] output without labels and delimited by Tab
In-Reply-To: <Pine.LNX.4.30.0102261556590.1867-100000@bolker.zoo.ufl.edu>
Message-ID: <20010227010944.66985.qmail@web11501.mail.yahoo.com>

Thank you very much! This is helpful!
I'd like to know more about summary.data.frame but the
R-language reference is not quite detailed. Where I
can find a more detailed document about it?

Thanks,
Yu-Ling Wu

--- ben at zoo.ufl.edu wrote:
> 
>   The main function driving the formatting here is
> summary.data.frame().
> You can hack this function to get the formatting you
> want.
> 
>   Or (for a probably-quicker but less general
> solution) you can just write
> your own function with less complication than
> summary.data.frame.
> 
> mysum <- function(x) {
>   qq <- quantile(x,c(0.25,0.5,0.75))
>   c(min(x),qq[1:2],mean(x),qq[3],max(x))
> }
> 
>
write.table(apply(x,2,mysum),sep="\t",quote=FALSE,row.names=FALSE)
> 
> Does more or less what you want, although there is a
> problem with the
> column headers being shorter (and thus not tabbed
> over as far) as the
> columns.  You could implement something with
> blank-padding, keeping the
> same number of significant digits for all the
> numbers, etc., but
> eventually you will find yourself rewriting
> summary.data.frame() from
> scratch.
> 
> On Mon, 26 Feb 2001, Yu-Ling Wu wrote:
> 
> > Hi,
> >
> > I have a set of data and when I run
> "summary(data)", I
> > got the following output:
> >
> >     dstuser         dstmethod        numaction
> >  Min.   : 0.000   Min.   : 0.000   Min.   :  0.00
> >  1st Qu.: 1.000   1st Qu.: 1.000   1st Qu.:  2.00
> >  Median : 3.000   Median : 6.500   Median : 33.00
> >  Mean   : 4.894   Mean   : 6.565   Mean   : 59.32
> >  3rd Qu.: 9.000   3rd Qu.:11.000   3rd Qu.: 94.25
> >  Max.   :25.000   Max.   :19.000   Max.   :317.00
> >
> > Question (1): How to make the output look like
> this
> > (get rid of the "labels")?
> >
> > dstuser dstmethod  numaction
> >  0.000   0.000   0.00
> >  1.000   1.000   2.00
> >  3.000   6.500   33.00
> >  4.894   6.565   59.32
> >  9.000   11.000  94.25
> >  25.000  19.000  317.00
> >
> > Question (2): How to make each column delimited by
> Tab
> > instead of white spaces?
> >
> > Thanks,
> > Yu-Ling Wu
> >
> > __________________________________________________
> > Do You Yahoo!?
> > Get email at your own domain with Yahoo! Mail.
> > http://personal.mail.yahoo.com/
> >
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To:
> r-help-request at stat.math.ethz.ch
> >
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> 318 Carr Hall                               
> bolker at zoo.ufl.edu
> Zoology Department, University of Florida   
> http://www.zoo.ufl.edu/bolker
> Box 118525                                   (ph) 
> 352-392-5697
> Gainesville, FL 32611-8525                   (fax)
> 352-392-3704
> 


__________________________________________________
Do You Yahoo!?
Get email at your own domain with Yahoo! Mail. 
http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Tue Feb 27 02:25:34 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 26 Feb 2001 17:25:34 -0800 (PST)
Subject: [R] Newbie question: what are the advantages?
In-Reply-To: <004001c0a0c5$ff145d20$6fc7bfc8@jarnt>
Message-ID: <Pine.A41.4.33.0102261712300.130774-100000@homer38.u.washington.edu>

On Tue, 27 Feb 2001, hzi wrote:

> Hi -
>
>     I´m a medical graduate student. I´m totally new to R, although I
> had heard of S before. I read it was GNU free software, and since I
> also use Linux, I decide to check it out.
>     But I have some doubts regarding R: how does using R differ from
> using software packages, like SPSS (which is the one I´m used to)?
> What are the advantages of using R when compared? Is flexibility an
> issue? What about the learning curve? Is it something that is awfully
> hard to learn? And the documentation seems to be rather sparse, unless
> you´re willling to buy a book (no, I´m not some "cheap" person, I´m a
> student from Brazil - things are not so cheap for me...which is one of
> the reasons free software is attractive to me).


Flexibility is one major advantage of R over SPSS. It also has better
`publication-quality' graphics.  It's easier to do simple things in SPSS,
but probably harder to do complicated things.

The available documentation isn't that bad, if you start with
"Introduction to R" and then some of the contributed documentation on
cran.r-project.org.  Learning to use statistical procedures that you
understand fairly well is pretty straightforward. Learning to use
procedures you don't understand at all can be much harder, but that might
be regarded as a feature.  I'd say that if you can use Linux you should be
able to cope with R.


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From znmeb at aracnet.com  Tue Feb 27 03:56:47 2001
From: znmeb at aracnet.com (M. Edward (Ed) Borasky)
Date: Mon, 26 Feb 2001 18:56:47 -0800 (PST)
Subject: [R] Newbie question: what are the advantages?
In-Reply-To: <Pine.A41.4.33.0102261712300.130774-100000@homer38.u.washington.edu>
Message-ID: <Pine.LNX.4.31.0102261842490.32677-100000@shell1.aracnet.com>

On Mon, 26 Feb 2001, Thomas Lumley wrote:

> On Tue, 27 Feb 2001, hzi wrote:
>
> > What are the advantages of using R when compared? Is flexibility an
> > issue? What about the learning curve? Is it something that is awfully
> > hard to learn? And the documentation seems to be rather sparse, unless
> > you´re willling to buy a book (no, I´m not some "cheap" person, I´m a
> > student from Brazil - things are not so cheap for me...which is one of
> > the reasons free software is attractive to me).
> Flexibility is one major advantage of R over SPSS. It also has better
> `publication-quality' graphics.  It's easier to do simple things in SPSS,
> but probably harder to do complicated things.
>
> The available documentation isn't that bad, if you start with
> "Introduction to R" and then some of the contributed documentation on
> cran.r-project.org.  Learning to use statistical procedures that you
> understand fairly well is pretty straightforward. Learning to use
> procedures you don't understand at all can be much harder, but that might
> be regarded as a feature.  I'd say that if you can use Linux you should be
> able to cope with R.

I used to use Excel for the simple stuff (linear regression and histograms) and
Minitab for the complicated stuff (boxplots, mostly) at work (mostly having to
do with computer performance analysis), and Excel plus XLSTAT and ViSta for my
home projects, mostly having to do with computational finance. At work, I now
do almost everything in R, except for some things that require pre-processing of
massive datasets, which I do in Microsoft Access. Once I get RODBC up and
running, I'll be able to automate all of this. At home, I do everything in R.

It took me about a week to figure out how to do the histograms, kernel density
estimation, boxplots and lowess smoothing for the projects at work, and that
includes all the Perl code to collect the input data and drive R. The total
amount of R code for all this magic is less than 100 lines, including comments.
I never have been able to automate all of that with Minitab; the macro language
that comes with Minitab is virtually unreadable and not that much easier to
write.  I'm an extremely happy R user!
--
znmeb at aracnet.com (M. Edward Borasky) http://www.aracnet.com/~znmeb

Actually, for their size, elephants don't smell all that bad.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Tue Feb 27 04:24:19 2001
From: ben at zoo.ufl.edu (ben@zoo.ufl.edu)
Date: Mon, 26 Feb 2001 22:24:19 -0500 (EST)
Subject: [R] output without labels and delimited by Tab
In-Reply-To: <20010227010944.66985.qmail@web11501.mail.yahoo.com>
Message-ID: <Pine.LNX.4.30.0102262222160.2891-100000@bolker.zoo.ufl.edu>


  Once you get to this level, the best reference is the language itself
-- just type

summary.data.frame

for a listing of the function code.  (Luckily, this piece of R is written
in the R language and not in C or FORTRAN, so you don't have to go hunting
through source code.)

On Mon, 26 Feb 2001, Yu-Ling Wu wrote:

> Thank you very much! This is helpful!
> I'd like to know more about summary.data.frame but the
> R-language reference is not quite detailed. Where I
> can find a more detailed document about it?
>
> Thanks,
> Yu-Ling Wu
>
> --- ben at zoo.ufl.edu wrote:
> >
> >   The main function driving the formatting here is
> > summary.data.frame().
> > You can hack this function to get the formatting you
> > want.
> >
> >   Or (for a probably-quicker but less general
> > solution) you can just write
> > your own function with less complication than
> > summary.data.frame.
> >
> > mysum <- function(x) {
> >   qq <- quantile(x,c(0.25,0.5,0.75))
> >   c(min(x),qq[1:2],mean(x),qq[3],max(x))
> > }
> >
> >
> write.table(apply(x,2,mysum),sep="\t",quote=FALSE,row.names=FALSE)
> >
> > Does more or less what you want, although there is a
> > problem with the
> > column headers being shorter (and thus not tabbed
> > over as far) as the
> > columns.  You could implement something with
> > blank-padding, keeping the
> > same number of significant digits for all the
> > numbers, etc., but
> > eventually you will find yourself rewriting
> > summary.data.frame() from
> > scratch.
> >
> > On Mon, 26 Feb 2001, Yu-Ling Wu wrote:
> >
> > > Hi,
> > >
> > > I have a set of data and when I run
> > "summary(data)", I
> > > got the following output:
> > >
> > >     dstuser         dstmethod        numaction
> > >  Min.   : 0.000   Min.   : 0.000   Min.   :  0.00
> > >  1st Qu.: 1.000   1st Qu.: 1.000   1st Qu.:  2.00
> > >  Median : 3.000   Median : 6.500   Median : 33.00
> > >  Mean   : 4.894   Mean   : 6.565   Mean   : 59.32
> > >  3rd Qu.: 9.000   3rd Qu.:11.000   3rd Qu.: 94.25
> > >  Max.   :25.000   Max.   :19.000   Max.   :317.00
> > >
> > > Question (1): How to make the output look like
> > this
> > > (get rid of the "labels")?
> > >
> > > dstuser dstmethod  numaction
> > >  0.000   0.000   0.00
> > >  1.000   1.000   2.00
> > >  3.000   6.500   33.00
> > >  4.894   6.565   59.32
> > >  9.000   11.000  94.25
> > >  25.000  19.000  317.00
> > >
> > > Question (2): How to make each column delimited by
> > Tab
> > > instead of white spaces?
> > >
> > > Thanks,
> > > Yu-Ling Wu
> > >
> > > __________________________________________________
> > > Do You Yahoo!?
> > > Get email at your own domain with Yahoo! Mail.
> > > http://personal.mail.yahoo.com/
> > >
> >
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > > r-help mailing list -- Read
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To:
> > r-help-request at stat.math.ethz.ch
> > >
> >
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > >
> >
> > --
> > 318 Carr Hall
> > bolker at zoo.ufl.edu
> > Zoology Department, University of Florida
> > http://www.zoo.ufl.edu/bolker
> > Box 118525                                   (ph)
> > 352-392-5697
> > Gainesville, FL 32611-8525                   (fax)
> > 352-392-3704
> >
>
>
> __________________________________________________
> Do You Yahoo!?
> Get email at your own domain with Yahoo! Mail.
> http://personal.mail.yahoo.com/
>

-- 
318 Carr Hall                                bolker at zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From faheem at email.unc.edu  Tue Feb 27 04:41:50 2001
From: faheem at email.unc.edu (Faheem Mitha)
Date: Mon, 26 Feb 2001 22:41:50 -0500 (EST)
Subject: [R] minor error in "Writing R Extensions"?
Message-ID: <Pine.LNX.4.21.0102262236340.3061-100000@Chrestomanci.home.earth>


Dear People,

I just thought I would point out what looks like a minor error in "Writing
R Extensions", version 1.2.1. On pg 52 it lists

"double fmod (double x) Returns the absolute value of value of x."

The actual function in /src/nmath/fmod.c appears to be:

 *    double fmod(double x, double y);
 *
 *  DESCRIPTION
 *
 *    Floating-point remainder of x / y;

There does not seem to be another function by the same name. 

                                  Sincerely, Faheem Mitha.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From s.mcclatchie at niwa.cri.nz  Tue Feb 27 04:51:26 2001
From: s.mcclatchie at niwa.cri.nz (S.McClatchie)
Date: Tue, 27 Feb 2001 16:51:26 +1300
Subject: [R] Newbie question: re: the learning curve
In-Reply-To: <004001c0a0c5$ff145d20$6fc7bfc8@jarnt>
Message-ID: <200102270352.f1R3qMI47635@storm.niwa.cri.nz>

On 27 Feb 01,, hzi wrote (re: [R] Newbie question: what are the a): 

> Hi -
> 
>     I?m a medical graduate student. I?m totally new to R,.....What about the learning curve?
>     Is it something that is awfully hard to learn? 

Yes, it is something to consider, but well worth the effort if you do a lot of 
analysis.

I found one of the best books when you are learning the environment  is

Spector, P. 1994. "An introduction to S and S-PLUS". Duxbury Press.  

Although it is written for S, much of it is still very useful for R. 

Also see 

Maindonald, J.H. 2000. "Data analysis and graphics using R -- An 
introduction"

(available through the CRAN web site)

Sam


Sam McClatchie, Research scientist (fisheries acoustics))))))))))
NIWA (National Institute of Water & Atmospheric Research Ltd)
PO Box 14 901, Kilbirnie, Wellington, New Zealand
s.mcclatchie at niwa.cri.nz 

                    /\
...>><xX(?> // \\
                 /// \\\   
                //// \\\\
               ///  <?)Xx><<
              /////  \\\\\\
        ><(((?>   
  >><(((?>   ...>><xX(?>O<?)Xx><<

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From faheem at email.unc.edu  Tue Feb 27 05:57:10 2001
From: faheem at email.unc.edu (Faheem Mitha)
Date: Mon, 26 Feb 2001 23:57:10 -0500 (EST)
Subject: [R] using fmod in C code to be loaded into R
Message-ID: <Pine.LNX.4.21.0102262304440.3061-100000@Chrestomanci.home.earth>

Dear People,

I wrote the following bit of C code and (along with other bits) called it
mycode.c, and compiled the file into a shared library to load into R,
using R CMD SHLIB mycode.c. This was Ok, but when I tried to load this
into R using dyn.load("mycode.so") I got the error

> dyn.load("mycode.so")
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
	unable to load shared library "/home/faheem/research/mycode.so":
  /home/faheem/research/mycode.so: undefined symbol: Rf_fmod

"Writing R extension" says this function is available as an entry point.
I have only a vague undertstanding of entry points, but I understand this
to mean that if I am going to load the compiled code into R to be called
from R, then I can stick such a function in my code, and provided I have
the header Rmath.h included, everything will be Ok.

This works with rnorm, for example. What am I doing wrong here?

                     Sincerely, Faheem Mitha.

***************************************************************************

#include <R.h>
#include <Rinternals.h>
#include <Rmath.h>

 double absdiff(double *array, Sint *narray, Sint *lag, double
*diffarray)
{
 int i;
  for(i=0; i < *narray - *lag; i++)
    diffarray[i] = fmod(array[i + *lag] - array[i],1);
}

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jaitchis at lisp.com.au  Tue Feb 27 06:01:49 2001
From: jaitchis at lisp.com.au (John Aitchison)
Date: Tue, 27 Feb 2001 16:01:49 +1100
Subject: [R] Newbie question: what are the advantages?
In-Reply-To: <004001c0a0c5$ff145d20$6fc7bfc8@jarnt>
Message-ID: <3A9BCF6D.17665.DEDFF5@localhost>



On 27 Feb 2001, at 11:03, hzi wrote:

> Hi -
> 
>     I?m a medical graduate student. I?m totally new to R, although I had
>     heard of S before. I read it was GNU free software, and since I also
>     use Linux, I decide to check it out. But I have some doubts regarding
>     R: how does using R differ from using software packages, like SPSS

R is a language for doing data analysis (and other things) .. SPSS, last 
time I used it, was a collection of procedures. 


>     (which is the one I?m used to)? What are the advantages of using R when
>     compared? Is flexibility an issue?

?for R .. no, you can do anything you want .. I guess there are limits, 
but nothing obvious. 

 What about the learning curve? Is it
>     something that is awfully hard to learn?

it takes a bit of time, but there are plenty of examples. Just find the 
documentation on some procedure that you are interested in and run the 
examples .. you will learn a lot

 And the documentation seems to
>     be rather sparse, 

no, I would say the documentation is extensive. All functions are fully 
documented, there is extensive on line help accessible just by typing ?,
help files are searchable, come in a variety of formats, there is a 
reasonably extensive FAQ..

Apart from the manuals and on line help there is 'contributed 
documentation' at

http://cran.r-project.org/other-docs.html

and the mailing lists are archived and searchable.


unless you?re willling to buy a book (no, I?m not
>     some "cheap" person, I?m a student from Brazil - things are not so
>     cheap for me...which is one of the reasons free software is attractive
>     to me). Thank you, Best regards to all.

The 'book' you refer to is probably 'Modern Applied Statistics' which you 
may need if you need knowledge of the area .. have a look at
http://www.stats.ox.ac.uk/pub/MASS3/ .. don't be put off by the fact that 
it appears to be about S .. R being a better S


But if your statistical knowledge is adequate, you may not need to buy the 
book .. certainly you can do simple things simply in R (and complex things 
elegantly)


I'd encourage you to download R, and spend some time with it. You will 
like it.


John Aitchison
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Feb 27 08:14:46 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 27 Feb 2001 07:14:46 +0000 (GMT)
Subject: [R] using fmod in C code to be loaded into R
In-Reply-To: <Pine.LNX.4.21.0102262304440.3061-100000@Chrestomanci.home.earth>
Message-ID: <Pine.GSO.4.31.0102270706120.11880-100000@auk.stats>

On Mon, 26 Feb 2001, Faheem Mitha wrote:

> Dear People,
>
> I wrote the following bit of C code and (along with other bits) called it
> mycode.c, and compiled the file into a shared library to load into R,
> using R CMD SHLIB mycode.c. This was Ok, but when I tried to load this
> into R using dyn.load("mycode.so") I got the error
>
> > dyn.load("mycode.so")
> Error in dyn.load(x, as.logical(local), as.logical(now)) :
> 	unable to load shared library "/home/faheem/research/mycode.so":
>   /home/faheem/research/mycode.so: undefined symbol: Rf_fmod
>
> "Writing R extension" says this function is available as an entry point.
> I have only a vague undertstanding of entry points, but I understand this
> to mean that if I am going to load the compiled code into R to be called
> from R, then I can stick such a function in my code, and provided I have
> the header Rmath.h included, everything will be Ok.
>
> This works with rnorm, for example. What am I doing wrong here?

Nothing. The person who added it to the list in R-exts didn't check
it was included in the binary.  There is C code to do this, but as it is
unused in R itself, it is not included in the binary.

fmod is a standard C function of two arguments, so I have no idea why R has
an unused entry point aliased to fmod with one argument.

I suggest you #undef fmod after the headers, and use the standard form
in your code.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Feb 27 08:20:27 2001
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 27 Feb 2001 07:20:27 +0000 (GMT)
Subject: [R] trimmed correlations
In-Reply-To: <3.0.5.32.20010226181410.00a04100@netgate.emmes.com>
Message-ID: <Pine.GSO.4.31.0102270717220.11880-100000@auk.stats>

On Mon, 26 Feb 2001, Amy C. Peng wrote:

> Dear R users:
>
> Does anyone know if there are any R library functions for computing trimmed
> correlations, similar to the trim option in Splus's cor function?

I don't, but then I think that the robust covariance computations of
cov.rob (in package lqs) are much to be preferred.

> Also, does anyone know if there are any R library functions for computing a
> Euclidean distance matrix which can handle missing values, similar to
> Splus's dist function?

It looks to me as if the internal code can do this, and all that is needed
is to add NAOK=TRUE to the .C call in dist().

> Please reply directly to me, as I am not currently a list recipient.
> Thanks very much for your advice.
>
> Sincerely,
> Amy Peng
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From myotis at cix.compulink.co.uk  Tue Feb 27 08:36:00 2001
From: myotis at cix.compulink.co.uk (Graham Smith)
Date: Tue, 27 Feb 2001 07:36 +0000 (GMT)
Subject: [R] Post hoc tests
Message-ID: <memo.566039@cix.compulink.co.uk>

This is only partly an R question, but this seems a good place to ask.

Like many, if not most, statistics programs, R has no post hoc tests 
for Kruskal Wallis or Friedman, and as far as I can make out they are 
not available in any of the R packages. I would be grateful if someone 
could point me in the right direction if I am wrong.

As I said this is not uncommon. Parametric Anova procedures almost 
always, if not always, come with a post hoc procedure. Why is it not 
the same with non-parametric anovas.

I assume there is some reason for this, and would be very pleased to 
have it explained.

Many thanks,

Graham S


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Tue Feb 27 09:40:49 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 27 Feb 2001 09:40:49 +0100
Subject: [R] Post hoc tests
In-Reply-To: myotis@cix.compulink.co.uk's message of "Tue, 27 Feb 2001 07:36 +0000 (GMT)"
References: <memo.566039@cix.compulink.co.uk>
Message-ID: <x24rxgo6we.fsf@blueberry.kubism.ku.dk>

myotis at cix.compulink.co.uk (Graham Smith) writes:

> This is only partly an R question, but this seems a good place to ask.
> 
> Like many, if not most, statistics programs, R has no post hoc tests 
> for Kruskal Wallis or Friedman, and as far as I can make out they are 
> not available in any of the R packages. I would be grateful if someone 
> could point me in the right direction if I am wrong.

I think pairwise.wilcox.test is just about as close as one gets for
the KW case. 

> As I said this is not uncommon. Parametric Anova procedures almost 
> always, if not always, come with a post hoc procedure. Why is it not 
> the same with non-parametric anovas.

The math doesn't work out as neatly... E.g. the distribution of rank
sums with some groups different is largely unknown. Er, well, it can
be worked out as a permutation distribution I suppose, but it isn't
nice and to my knowledge there's nothing that corresponds to the
studentized range distribution. Then again, maybe there could be.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From karsten.bjerre at risoe.dk  Tue Feb 27 09:51:06 2001
From: karsten.bjerre at risoe.dk (karsten.bjerre@risoe.dk)
Date: Tue, 27 Feb 2001 09:51:06 +0100
Subject: [R] R question
Message-ID: <7F6BCF6B9307D311980C0090273C746C01FB4482@cssrv1>

To R-project help

I want to use the integrate package (for Windows NT) and but it was not
available at: /R/bin/windows/contrib;
Is it possible to get this package from another source?

Best wishes,
Karsten
Karsten Dalsgaard Bjerre, M.Sc. Agriculture
Risoe National Laboratory
Frederiksborgvej 399
P.O. 49
DK-4000 Roskilde
Tel: +45 4677 4115




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From john_hendrickx at yahoo.com  Tue Feb 27 10:03:30 2001
From: john_hendrickx at yahoo.com (John Hendrickx)
Date: Tue, 27 Feb 2001 01:03:30 -0800 (PST)
Subject: [R] Newbie question: what are the advantages?
In-Reply-To: <004001c0a0c5$ff145d20$6fc7bfc8@jarnt>
Message-ID: <20010227090330.17540.qmail@web1203.mail.yahoo.com>

I'm fairly new to R as well. I've found it has a much wider range of
statistical options than SPSS, which in my opinion is fairly limited
in this area. I especially like the flexibility in specifying models
and adding and removing terms. On the other hand, fairly basic things
like a table of percentages can be quite a hassle. The output is also
rather sparse, I've figured out how to add "value labels" but still
don't know how to add "variable labels".

But if you're interested in a comparison of R with Stata, another
statistical package, browse the Statalist archive for the last few
days at http://www.hsph.harvard.edu/statalist/. Several people there
felt that Stata and R complemented each other and even proposed a
stronger integration.

As someone else mentioned, there are some good introductory texts to
R in the "Contributed" section of Cran. I found "Kickstarting R" to
be quite useful, it shows how to do the elementary stuff like tables
and descriptive statistics. Be sure to check out the other texts as
well.

Good luck,
John Hendrickx

--- hzi <hzi at uol.com.br> wrote:
> Hi -
> 
>     I´m a medical graduate student. I´m totally new to R, although
> I had heard of S before. I read it was GNU free software, and since
> I also use Linux, I decide to check it out.
>     But I have some doubts regarding R: how does using R differ
> from using software packages, like SPSS (which is the one I´m used
> to)? What are the advantages of using R when compared? Is
> flexibility an issue? What about the learning curve? Is it
> something that is awfully hard to learn? And the documentation
> seems to be rather sparse, unless you´re willling to buy a book
> (no, I´m not some "cheap" person, I´m a student from Brazil -
> things are not so cheap for me...which is one of the reasons free
> software is attractive to me).
>     Thank you,
>     Best regards to all.
> 
>     Henry 
> 


__________________________________________________
Do You Yahoo!?
Get email at your own domain with Yahoo! Mail. 
http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hzi at uol.com.br  Tue Feb 27 23:13:15 2001
From: hzi at uol.com.br (hzi)
Date: Tue, 27 Feb 2001 19:13:15 -0300
Subject: [R] How to read a text table? A bit of trouble with Using R - An Introduction
Message-ID: <001f01c0a10a$7bd3d900$18c4bfc8@jarnt>

Hello everyone!

    Here?s a *truly newbie question*! (Oh, and BTW, I did read the
documentation and the mailing list archive)
    I?m having a bit of difficulty regarding J. Maindonald booklet (pdf)
"Data Analysis and Graphics Using R - An Introduction"). It starts off with
the task to get some data on a text file (austpop.txt).
    > austpop <- read.table("a:/austpop.txt", header=T)
    Ok...So I actually *typed* the table with WordPad, using the Tab button
in order to separate the columns, and saved it in rich text format. As you
might have guessed, it didn?t work. I got a:
    Error in count.fields(file, sep, quote, skip, blank.lines.skip) :
        string terminated by newline or EOF
    So I went back, read the R Data Import/Export documentation, and came to
the conclusion that the problem might be that other pieces of information
were missing. So I input:
    >  austpop <- read.table("C:/R/austpop.txt", header=T, row.names=1,
quote="", sep="\n", blank.lines.skip=TRUE)
    and then (when everything seemed OK, since I got no error message):
    > austpop
    and got:
    NULL data frame with 11 rows

    *Then* I visited JM?s page (http://room.anu.edu.au/~johnm/) and saw a
link that I thought might be just what I needed: Data sets for "Using R...".
    In a directory I found austpop.R which when clicked on led to the
following:
    "austpop" <-
structure(list(Year = c(1917, 1927, 1937, 1947, 1957, 1967, 1977,
1987, 1997), NSW = c(1904, 2402, 2693, 2985, 3625, 4295, 5002,
5617, 6274), Vic. = c(1409, 1727, 1853, 2055, 2656, 3274, 3837,
4210, 4605), Qld = c(683, 873, 993, 1106, 1413, 1700, 2130, 2675,
3401), SA = c(440, 565, 589, 646, 873, 1110, 1286, 1393, 1480
), WA = c(306, 392, 457, 502, 688, 879, 1204, 1496, 1798), Tas. = c(193,
211, 233, 257, 326, 375, 415, 449, 474), NT = c(5, 4, 6, 11,
21, 62, 104, 158, 187), ACT = c(3, 8, 11, 17, 38, 103, 214, 265,
310), Aust. = c(4941, 6182, 6836, 7579, 9640, 11799, 14192, 16264,
18532)), .Names = c("Year", "NSW", "Vic.", "Qld", "SA", "WA",
"Tas.", "NT", "ACT", "Aust."), class = "data.frame", row.names = c("1",
"2", "3", "4", "5", "6", "7", "8", "9"))

    In the site?s home page, there was something that read like this:

All data sets, other than those that are available from one of the R
libraries, are in the file dsets.R that is in the directory dsets.  Use a
command of the form source("dsets.R") to import them into the R working
directory.
    I cut and pasted austpop.R text content and saved it as...austpop.txt in
my working directory.
    Then, I went for the kill :-)
    > austpop <- read.table("C:/R/austpop.txt", header=T)
    but it read:

row.lens=
 [1]  9 11 11 12 12 15 14 15 11 14 15 16
Error in read.table("C:/R/austpop.txt", header = T) :
        all rows must have the same length.

    Ok, it seems I got all the pieces of the puzzle, right?
    How do I go about putting them together? What do I do with all of these?
    Help is *greatly* appreciated!
    Thank you,
    Best regards,

    Henry L., in ding-state (in dire need of guidance)





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Feb 27 10:24:09 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 27 Feb 2001 09:24:09 +0000 (GMT)
Subject: [R] R question
In-Reply-To: <7F6BCF6B9307D311980C0090273C746C01FB4482@cssrv1>
Message-ID: <Pine.GSO.4.31.0102270923030.4227-100000@toucan.stats>

On Tue, 27 Feb 2001 karsten.bjerre at risoe.dk wrote:

> To R-project help
>
> I want to use the integrate package (for Windows NT) and but it was not
> available at: /R/bin/windows/contrib;
> Is it possible to get this package from another source?

You can compile it from the sources.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dieter.menne at menne-biomed.de  Tue Feb 27 10:27:37 2001
From: dieter.menne at menne-biomed.de (Dieter Menne)
Date: Tue, 27 Feb 2001 10:27:37 +0100
Subject: [R] Remove columns by name data[-c("subj","drug")]
Message-ID: <NBBBIJMBGLHMKHGCPFJKKEFICGAA.dieter.menne@menne-biomed.de>

Is there an easy way to remove data frame columns
by name instead of by index? The following gives
the idea

remove<-c("subj","drug")
data[-remove]

I found a solution with a few evals and substitutes,
similar to that used in reshapeLong, but there must
be an easier way out.

Dieter


---------------------------------------
Dr. Dieter Menne
Biomed Software
72074 T?bingen
Tel (49) (7071) 52176
FAX (49) (7071) 55 10 46
dieter.menne at menne-biomed.de
www.menne-biomed.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Feb 27 10:33:32 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 27 Feb 2001 09:33:32 +0000 (GMT)
Subject: [R] Remove columns by name data[-c("subj","drug")]
In-Reply-To: <NBBBIJMBGLHMKHGCPFJKKEFICGAA.dieter.menne@menne-biomed.de>
Message-ID: <Pine.GSO.4.31.0102270932480.4227-100000@toucan.stats>

On Tue, 27 Feb 2001, Dieter Menne wrote:

> Is there an easy way to remove data frame columns
> by name instead of by index? The following gives
> the idea
>
> remove<-c("subj","drug")
> data[-remove]
>
> I found a solution with a few evals and substitutes,
> similar to that used in reshapeLong, but there must
> be an easier way out.

data[-match(remove, names(data))]

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From john_hendrickx at yahoo.com  Tue Feb 27 10:37:24 2001
From: john_hendrickx at yahoo.com (John Hendrickx)
Date: Tue, 27 Feb 2001 01:37:24 -0800 (PST)
Subject: [R] comments on documentation
Message-ID: <20010227093724.5372.qmail@web1201.mail.yahoo.com>

I've been experimenting with R during the last week and I thought I'd
pass on some comments on issues on the documentation that left me a
bit confused. To start with (literally), the ReadMe.rw1021 file says
that the easiest way to install R is to download the rwinst.exe
installer program. That gave me the impression that the program would
connect to an R download site, download the software and install it,
along the lines of the Internet Explorer installation program for
example. The Readme should be clearer on this and instruct newbies to
download the zipfiles to a folder first. I also found that the
installer didn't work if the files were downloaded to c:\, it worked
fine if everything was downloaded to a folder.

I also had a good deal of trouble trying to import an SPSS file. I
found and installed the foreign package without too much trouble but
didn't realize I had to load it before I could use it :-(. Reading
The Fine Manual helped eventually, but it would be useful to provide
a bit more information in the "R Import/Export" documentation. 

After reading an SPSS file, what data structure is it? It's not a
data frame. In any event, I found it useful to convert the SPSS data
to a data frame since that also handles invalid names, e.g.
containing underscores. You can analyze the SPSS data as read in, but
any names containing underscores cause an error. I also found that
the SPSS names are all upper case. Maybe that could be changed in new
versions of read.spss. A workaround is:

library(foreign)
indat <- read.spss("c:/data/ozs/eind.sav")
dat <- as.data.frame(indat)
names(dat) <- tolower(names(dat))
attach(dat)

An example along these lines would help newbies a lot, I think. I
also disagree with the import/export documentation, that importing
files from foreign packages should be avoided (chapter 3). This will
often be the starting point for new users who have most of their data
in a foreign format and will usually be the quickest and most
practical method in any case.

John Hendrickx


__________________________________________________
Do You Yahoo!?
Get email at your own domain with Yahoo! Mail. 
http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Tue Feb 27 10:41:51 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 27 Feb 2001 10:41:51 +0100
Subject: [R] Remove columns by name data[-c("subj","drug")]
In-Reply-To: "Dieter Menne"'s message of "Tue, 27 Feb 2001 10:27:37 +0100"
References: <NBBBIJMBGLHMKHGCPFJKKEFICGAA.dieter.menne@menne-biomed.de>
Message-ID: <x2r90kqx7k.fsf@blueberry.kubism.ku.dk>

"Dieter Menne" <dieter.menne at menne-biomed.de> writes:

> Is there an easy way to remove data frame columns
> by name instead of by index? The following gives
> the idea
> 
> remove<-c("subj","drug")
> data[-remove]
> 
> I found a solution with a few evals and substitutes,
> similar to that used in reshapeLong, but there must
> be an easier way out.

subset(data, select=-c(subj, drug))

or

remove<-c("subj","drug")
data[-match(remove, names(data))]
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mark at myatt.demon.co.uk  Tue Feb 27 10:51:44 2001
From: mark at myatt.demon.co.uk (Mark Myatt)
Date: Tue, 27 Feb 2001 09:51:44 +0000
Subject: [R] Updated introductory text (NEW VERSION)
In-Reply-To: <3A9252DE.19895.94BFB3@localhost>
References: <x2puge37ue.fsf@blueberry.kubism.ku.dk>
 <3A9252DE.19895.94BFB3@localhost>
Message-ID: <MrfbiRAwi3m6EwTv@myatt.demon.co.uk>


All,

Thanks to everyone who responded with comments and suggestions about my
introductory text on using R with epidemiological data. I have tried to
incorporate all of the suggestions that were made and have uploaded the
new version to:

        http://www.myatt.demon.co.uk/index.htm

This text is released under the GNU Free Documentation License. Feel
free to use this as you will. Feel free to mail me with any comments or
suggestions that you may have.

Best wishes,

Mark


--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Marwan.Khawaja at fafo.no  Tue Feb 27 10:57:54 2001
From: Marwan.Khawaja at fafo.no (Khawaja Marwan)
Date: Tue, 27 Feb 2001 10:57:54 +0100
Subject: [R] Newbie question: what are the advantages?
Message-ID: <B5DEF8EC8E9D3444A94206C3C9949FC33A9B7A@mailsrv01.Fafo.No>

    But I have some doubts regarding R: how does using R differ from using
software packages, like SPSS (which is the one I?m used to)? What are the
advantages of using R when compared? Is flexibility an issue? What about the
learning curve? Is it 

It depends on your purpose. I would still use spss to produce tables, but R
for statistical analysis.

Marwan Khawaja
Fafo Institute for Applied Social Science
>  
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From baron at cattell.psych.upenn.edu  Tue Feb 27 12:29:39 2001
From: baron at cattell.psych.upenn.edu (Jonathan Baron)
Date: Tue, 27 Feb 2001 06:29:39 -0500 (EST)
Subject: [R] How to read a text table? A bit of trouble with Using R - An Introduction
Message-ID: <200102271129.GAA07704@cattell.psych.upenn.edu>

>    Ok...So I actually *typed* the table with WordPad, using the Tab button
>in order to separate the columns, and saved it in rich text format. As you
>might have guessed, it didn´t work. I got a:
>    Error in count.fields(file, sep, quote, skip, blank.lines.skip) :
>        string terminated by newline or EOF

RTF is not what is meant by text.  What I am writing is text.
Your email is almost text (perhaps even legal).  Look at the RTF
file itself in an editor such as Emacs or (ugh) Notepad.  I don't
know if Wordpad can even make text, although I think it can.

>    I cut and pasted austpop.R text content and saved it as...austpop.txt in
>my working directory.
>    Then, I went for the kill :-)
>    > austpop <- read.table("C:/R/austpop.txt", header=T)
>    but it read:
>
>row.lens=
> [1]  9 11 11 12 12 15 14 15 11 14 15 16
>Error in read.table("C:/R/austpop.txt", header = T) :
>        all rows must have the same length.

The instructions you quoted said to use source() rather than
read.table().  I have not tried it, but that may be worth a try.

Jon
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wm at fl.sdu.dk  Tue Feb 27 13:17:36 2001
From: wm at fl.sdu.dk (Wenzel Matiaske)
Date: Tue, 27 Feb 2001 13:17:36 +0100
Subject: [R] Newbie question: what are the advantages?
In-Reply-To: <B5DEF8EC8E9D3444A94206C3C9949FC33A9B7A@mailsrv01.Fafo.No>
References: <B5DEF8EC8E9D3444A94206C3C9949FC33A9B7A@mailsrv01.Fafo.No>
Message-ID: <200102271217.f1RCHaP04158@hermes.sdu.dk>


The discussion on R and SPSS leads me to the question
wether it is planned to adopt crosstabulations in R
(like Splus or better with some enhancements: not only 
chi-square but also some measures of association)?
Best regards
//wenzel matiaske
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Feb 27 13:23:17 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 27 Feb 2001 12:23:17 +0000 (GMT)
Subject: Cross-tabulation (was [R] Newbie question: what are the advantages?)
Message-ID: <200102271223.MAA04701@toucan.stats.ox.ac.uk>


> Date: Tue, 27 Feb 2001 13:17:36 +0100
> From: Wenzel Matiaske <wm at fl.sdu.dk>
> 
> 
> The discussion on R and SPSS leads me to the question
> wether it is planned to adopt crosstabulations in R
> (like Splus or better with some enhancements: not only 
> chi-square but also some measures of association)?
> Best regards
> //wenzel matiaske

We already have xtabs....

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From john_hendrickx at yahoo.com  Tue Feb 27 13:47:01 2001
From: john_hendrickx at yahoo.com (John Hendrickx)
Date: Tue, 27 Feb 2001 04:47:01 -0800 (PST)
Subject: [R] How to read a text table? A bit of trouble with Using R - An Introduction
In-Reply-To: <200102271129.GAA07704@cattell.psych.upenn.edu>
Message-ID: <20010227124701.3073.qmail@web1206.mail.yahoo.com>

Try TextPad, http://www.textpad.com/. There's an add-on for syntax
colouring for Splus, works for R as well.

--- Jonathan Baron <baron at cattell.psych.upenn.edu> wrote:
> >    Ok...So I actually *typed* the table with WordPad, using the
> Tab button
> >in order to separate the columns, and saved it in rich text
> format. As you
> >might have guessed, it didn´t work. I got a:
> >    Error in count.fields(file, sep, quote, skip,
> blank.lines.skip) :
> >        string terminated by newline or EOF
> 
> RTF is not what is meant by text.  What I am writing is text.
> Your email is almost text (perhaps even legal).  Look at the RTF
> file itself in an editor such as Emacs or (ugh) Notepad.  I don't
> know if Wordpad can even make text, although I think it can.
> 
> >    I cut and pasted austpop.R text content and saved it
> as...austpop.txt in
> >my working directory.
> >    Then, I went for the kill :-)
> >    > austpop <- read.table("C:/R/austpop.txt", header=T)
> >    but it read:
> >
> >row.lens=
> > [1]  9 11 11 12 12 15 14 15 11 14 15 16
> >Error in read.table("C:/R/austpop.txt", header = T) :
> >        all rows must have the same length.
> 
> The instructions you quoted said to use source() rather than
> read.table().  I have not tried it, but that may be worth a try.
> 
> Jon
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:
> r-help-request at stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


__________________________________________________
Do You Yahoo!?
Get email at your own domain with Yahoo! Mail. 
http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fzoellne at TechFak.Uni-Bielefeld.DE  Tue Feb 27 14:12:36 2001
From: fzoellne at TechFak.Uni-Bielefeld.DE (Frank Gerrit Zoellner)
Date: Tue, 27 Feb 2001 14:12:36 +0100
Subject: [R] Plotting
Message-ID: <20010227141236.B3308@mozart.TechFak.Uni-Bielefeld.DE>

Hi!

I've got a problem with the plot command in R:
I have implemente a tcltk gui. By pressing a button 
an sql query is executed to fetch some data. After that the data
should be displayed by a plot command.
My problem is that, pressing the button the first time after the start of the program the data is collect and a graphic device is opened. But no graphs are displayed. Sometimes only parts of the coordinates system or the labels of the axes are shown. Pressing the button again, all works fine. 

Has anyone an Idea?

Thanks
-- 
Frank Gerrit Zoellner


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Tue Feb 27 14:38:14 2001
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Tue, 27 Feb 2001 14:38:14 +0100
Subject: [R] Newbie question: what are the advantages?
In-Reply-To: <200102271217.f1RCHaP04158@hermes.sdu.dk>
References: <B5DEF8EC8E9D3444A94206C3C9949FC33A9B7A@mailsrv01.Fafo.No>
	<200102271217.f1RCHaP04158@hermes.sdu.dk>
Message-ID: <15003.44486.848208.284973@gargle.gargle.HOWL>

>>>>> "Wenzel" == Wenzel Matiaske <wm at fl.sdu.dk> writes:

    Wenzel> The discussion on R and SPSS leads me to the question
    Wenzel> wether it is planned to adopt crosstabulations in R
    Wenzel> (like Splus or better with some enhancements: not only 
    Wenzel> chi-square but also some measures of association)?

there has been something like that for quite a long time :

 --> help(xtabs)

however, only \chi^2 at the moment.

Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From paradis at isem.univ-montp2.fr  Tue Feb 27 15:04:01 2001
From: paradis at isem.univ-montp2.fr (Emmanuel Paradis)
Date: Tue, 27 Feb 2001 15:04:01 +0100
Subject: [R] Newbie question: what are the advantages?
Message-ID: <3.0.32.20010227150401.008e4830@162.38.183.200>

>On Tue, 27 Feb 2001, hzi wrote:
>     I?m a medical graduate student. I?m totally new to R, although I
> had heard of S before. I read it was GNU free software, and since I
> also use Linux, I decide to check it out.
>     But I have some doubts regarding R: how does using R differ from
> using software packages, like SPSS (which is the one I?m used to)?
> What are the advantages of using R when compared? Is flexibility an
> issue? What about the learning curve? Is it something that is awfully
> hard to learn? And the documentation seems to be rather sparse, unless
> you?re willling to buy a book (no, I?m not some "cheap" person, I?m a
> student from Brazil - things are not so cheap for me...which is one of
> the reasons free software is attractive to me).

I would say that using free software is not only about money: as a graduate
student, you will surely have to work in another lab, and probably in
another country. How to be sure that your future employer has also SPSS (or
any other commercial package you have used during your PhD)? If you learn
R, and then go in a lab where they do not use R, you should easily convince
them at least to install it; if they use S-Plus, then you already have the
background. AFAIK, among the free statistical softwares, R has no competitor.

Emmanuel Paradis
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mark at myatt.demon.co.uk  Tue Feb 27 15:13:06 2001
From: mark at myatt.demon.co.uk (Mark Myatt)
Date: Tue, 27 Feb 2001 14:13:06 +0000
Subject: [R] How to read a text table? A bit of trouble with Using R - An Introduction
In-Reply-To: <001f01c0a10a$7bd3d900$18c4bfc8@jarnt>
References: <001f01c0a10a$7bd3d900$18c4bfc8@jarnt>
Message-ID: <8HfXpFAyX7m6Ew38@myatt.demon.co.uk>

Hzi Writes:


>Hello everyone!
>
>    Here?s a *truly newbie question*! (Oh, and BTW, I did read the
>documentation and the mailing list archive)

[Stuff deleted]

First ... you need to use a plain text editor. Use NotePad under Windows
if you have nothing else.

Type the file like this:

"Year" "NSW" "Vic." "Qld" "SA" "WA" "Tas." "NT" "ACT" "Aust."
1917 1904 1409  683  440  306 193   5   3  4941
1927 2402 1727  873  565  392 211   4   8  6182
1937 2693 1853  993  589  457 233   6  11  6836
1947 2985 2055 1106  646  502 257  11   4  1947
1957 3625 2656 1413  873  688 326  21  38  9640
1967 4295 3274 1700 1110  879 375  62 103 11799
1977 5002 3837 2130 1286 1204 415 104 214 14192
1987 5617 4210 2675 1393 1496 449 158 265 16264
1997 6274 4605 3401 1480 1798 474 187 310 18532

Note the double quotes round the column labels and the space (not TAB)
between each item of data. You can line them up with spaces (as above)
or just use a single space.

Save the file as 

        austpop.txt

Notepad is a truly awful program and will not allow you to add
extensions to file names so you will have to save it without the .txt
extension (which NotePad will add for you).

All should be well now.

Mark

--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tsumi at leo.auric.ne.jp  Tue Feb 27 16:07:27 2001
From: tsumi at leo.auric.ne.jp (Tsumiyama Isao)
Date: Wed, 28 Feb 2001 00:07:27 +0900
Subject: [R] RCMD Beginner
Message-ID: <200102271512.QAA13180@stat.math.ethz.ch>

Hi, R-users.

I tried to install the 'RODBC' package by input

C:\R>RCMD install RODBC_0_8-2_tar.tar

, but I got the message

'Error: cannot change to directory 'RODBC_0_8-2_tar.tar' '

and failed to install.
The file 'tar32.dll' lies in the system directory.
How can I install the package above mentioned?

OS:Win95
R_HOME:c:\R\rw1020

>From Kobe,

##################################
#  Tsumiyama Isao   
#  e-mail:tsumi at leo.auric.ne.jp
##################################
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From KINLEY_ROBERT at lilly.com  Tue Feb 27 16:14:58 2001
From: KINLEY_ROBERT at lilly.com (KINLEY_ROBERT@lilly.com)
Date: Tue, 27 Feb 2001 15:14:58 +0000
Subject: [R] How to read a text table? A bit of trouble with Using R - An
 Introduction
Message-ID: <OF70D68859.96C6023C-ON80256A00.00536BCC@D49.LILLY.COM>



> Notepad is a truly awful program

Much better  (free)  Windows  text editors are available

Try for example   pfe32  available via

     http://softseek.zdnet.com/Programming/Editors/

last time I looked.

          Bob Kinley






Mark Myatt <mark at myatt.demon.co.uk> on 27/02/2001 14:13:06


To:   hzi <hzi at uol.com.br>
cc:   r-help at stat.math.ethz.ch (bcc: Robert Kinley/EMA/LLY)
bcc:  Robert Kinley/EMA/LLY


Subject:  Re: [R] How to read a text table? A bit of trouble with Using R -
      An Introduction

Hzi Writes:


>Hello everyone!
>
>    Here?s a *truly newbie question*! (Oh, and BTW, I did read the
>documentation and the mailing list archive)

[Stuff deleted]

First ... you need to use a plain text editor. Use NotePad under Windows
if you have nothing else.

Type the file like this:

"Year" "NSW" "Vic." "Qld" "SA" "WA" "Tas." "NT" "ACT" "Aust."
1917 1904 1409  683  440  306 193   5   3  4941
1927 2402 1727  873  565  392 211   4   8  6182
1937 2693 1853  993  589  457 233   6  11  6836
1947 2985 2055 1106  646  502 257  11   4  1947
1957 3625 2656 1413  873  688 326  21  38  9640
1967 4295 3274 1700 1110  879 375  62 103 11799
1977 5002 3837 2130 1286 1204 415 104 214 14192
1987 5617 4210 2675 1393 1496 449 158 265 16264
1997 6274 4605 3401 1480 1798 474 187 310 18532

Note the double quotes round the column labels and the space (not TAB)
between each item of data. You can line them up with spaces (as above)
or just use a single space.

Save the file as

        austpop.txt

Notepad is a truly awful program and will not allow you to add
extensions to file names so you will have to save it without the .txt
extension (which NotePad will add for you).

All should be well now.

Mark

--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._._






-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From z.cseres-gergely at ucl.ac.uk  Tue Feb 27 16:37:31 2001
From: z.cseres-gergely at ucl.ac.uk (Zsombor Cseres-Gergely)
Date: Tue, 27 Feb 2001 15:37:31 +0000
Subject: [R] Generate temporary objects or not?
Message-ID: <20010227153730.A1106@caligola.econ.ucl.ac.uk>

Dear all,

Playing with a toy problem, I wondered how much it costs to generate
`internal' objects in a function that are not strictly needed. An example:

mean(apply(t(matrix(as.vector(x) - x0 / h, , nrow=nrow(x), ncol=ncol(x))), c(2) epakern, dim)) / h^dim

It would be more _readable_ if I defined the object inside the apply(), stick
it there and rm() after, but my feeling is that creating it and than removing
is costlier. (If the above structure is too simple, imagine something more
complicated) Am I right, it does not matter, since it is created inside anyway?

Another question is if apply() could feed the data into the nonfirst
argument of the function applied. I have clue just for the first.

Thank you,
Zsombor Cseres-Gergely


PS: The example is the most naive way for constructing a kernel density
estimator. But yes, I have VR[MASS] and locfit installed, and I know that this is
inefficient. Just a toy. :)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From baron at cattell.psych.upenn.edu  Tue Feb 27 17:18:02 2001
From: baron at cattell.psych.upenn.edu (Jonathan Baron)
Date: Tue, 27 Feb 2001 11:18:02 -0500 (EST)
Subject: [R] How to read a text table? A bit of trouble with Using R - An Introduction
Message-ID: <200102271618.LAA28106@cattell.psych.upenn.edu>

On the topic of editors, I have compiled a list at the bottom of
http://www.psych.upenn.edu/cattell/edit.html But the favorite
around here, for Windows afficionados, seems to be Nedit from
www.nedit.org - also free, cross-platform, and with default key
settings that are similar to Word, rather than Emacs.  Of course,
there is Emacs is great (especially with ESS).  But, once you
start using it, it is very hard to go back to anything set up
like Word.  You are at risk for serious mind-boggle (AKA
retroactive and proactive interference).

Jonathan Baron, Professor of Psychology, University of Pennsylvania
Home page: http://www.sas.upenn.edu/~jbaron
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tlumley at u.washington.edu  Tue Feb 27 17:32:31 2001
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue, 27 Feb 2001 08:32:31 -0800 (PST)
Subject: [R] Generate temporary objects or not?
In-Reply-To: <20010227153730.A1106@caligola.econ.ucl.ac.uk>
Message-ID: <Pine.A41.4.33.0102270822220.45320-100000@homer32.u.washington.edu>

On Tue, 27 Feb 2001, Zsombor Cseres-Gergely wrote:

> Dear all,
>
> Playing with a toy problem, I wondered how much it costs to generate
> `internal' objects in a function that are not strictly needed. An example:
>
> mean(apply(t(matrix(as.vector(x) - x0 / h, , nrow=nrow(x), ncol=ncol(x))), c(2) epakern, dim)) / h^dim
>
> It would be more _readable_ if I defined the object inside the apply(), stick
> it there and rm() after, but my feeling is that creating it and than removing
> is costlier. (If the above structure is too simple, imagine something more
> complicated) Am I right, it does not matter, since it is created inside anyway?

The simple way to answer questions about which way is slower/more memory
intensive is to try it and see.  Between Rprof(), unix.time() and gc(),
you have all the information you need. My guess is that it won't matter
much.

There are two fundamental principles of optimisation
1) Don't do it unless you need it
2) Measure, don't guess, about speed.

You probably don't need the t(), though. You should just be able to change
the MARGIN argument to apply()

> Another question is if apply() could feed the data into the nonfirst
> argument of the function applied. I have clue just for the first.

You may need to define a wrapper function
  apply(data,1, function(y)  f(x,y))
will do  f(x,data[1,]),  f(x,data[2,]) and so on, if that's what you mean.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Alexandre.Fayolle at logilab.fr  Tue Feb 27 17:58:38 2001
From: Alexandre.Fayolle at logilab.fr (Alexandre Fayolle)
Date: Tue, 27 Feb 2001 17:58:38 +0100 (CET)
Subject: (off topic) Re: [R] Notepad
In-Reply-To: <8HfXpFAyX7m6Ew38@myatt.demon.co.uk>
Message-ID: <Pine.LNX.4.21.0102271756290.15734-100000@leo.logilab.fr>

On Tue, 27 Feb 2001, Mark Myatt wrote:

> Notepad is a truly awful program and will not allow you to add
> extensions to file names so you will have to save it without the .txt
> extension (which NotePad will add for you).

Putting double quotes around your filename ("data.dat") should stop
Notepad from adding the .txt extensions. Selecting 'All files' in the file
type dropdown list should do the same thing.

Alexandre Fayolle
-- 
http://www.logilab.com 
Narval is the first software agent available as free software (GPL).
LOGILAB, Paris (France).

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From znmeb at aracnet.com  Tue Feb 27 17:46:40 2001
From: znmeb at aracnet.com (M. Edward (Ed) Borasky)
Date: Tue, 27 Feb 2001 08:46:40 -0800 (PST)
Subject: [R] How to read a text table? A bit of trouble with Using R -
 An Introduction
In-Reply-To: <OF70D68859.96C6023C-ON80256A00.00536BCC@D49.LILLY.COM>
Message-ID: <Pine.LNX.4.31.0102270844430.11511-100000@shell1.aracnet.com>

On Tue, 27 Feb 2001 KINLEY_ROBERT at lilly.com wrote:

>
>
> > Notepad is a truly awful program
>
> Much better  (free)  Windows  text editors are available
>
> Try for example   pfe32  available via
>
>      http://softseek.zdnet.com/Programming/Editors/
>
> last time I looked.
>
>           Bob Kinley

As long as we're on the subject of text editors, I use "gvim" on both Windows
and Linux. Try http://www.vim.org.
--
znmeb at aracnet.com (M. Edward Borasky) http://www.aracnet.com/~znmeb

"There's no fuel like an old fuel!" -- National Coal Institute

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Feb 27 18:47:42 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 27 Feb 2001 17:47:42 +0000 (GMT)
Subject: [R] RCMD Beginner
Message-ID: <200102271747.RAA15550@toucan.stats.ox.ac.uk>


> From: "Tsumiyama Isao" <tsumi at leo.auric.ne.jp>
> Date: Wed, 28 Feb 2001 00:07:27 +0900
> 
> Hi, R-users.
> 
> I tried to install the 'RODBC' package by input
> 
> C:\R>RCMD install RODBC_0_8-2_tar.tar
> 
> , but I got the message
> 
> 'Error: cannot change to directory 'RODBC_0_8-2_tar.tar' '
> 
> and failed to install.

The file name on CRAN is RODBC_0.8-2.tar.gz, so I suspect Netscape or
something has mangled it.  If you can get it downloaded with that
name, this should work (and did for me a few hours ago, see below).

BTW, on Windows it is Rcmd, on Unix/Linux R CMD, so I found `RCMD' 
a bit confusing.

Alternatively, I rebuilt that package on Windows this morning, and it
is now available pre-compiled as a zip file at

http://www.stats.ox.ac.uk/pub/RWin/RODBC.zip

Please use that in preference to a version on CRAN (it will get there
tomorrow), as the help will be in a better state (but older builds
do work).

BDR

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From myotis at cix.compulink.co.uk  Tue Feb 27 19:43:00 2001
From: myotis at cix.compulink.co.uk (Graham Smith)
Date: Tue, 27 Feb 2001 18:43 +0000 (GMT)
Subject: [R] Post hoc tests
Message-ID: <memo.585961@cix.compulink.co.uk>

In-Reply-To: <x24rxgo6we.fsf at blueberry.kubism.ku.dk>

Peter,

>The math doesn't work out as neatly..

But does that make them invalid, Conover and others certainly present 
post hoc tests for non-parametric anovas.

Cheers,

Graham S




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From john.maindonald at anu.edu.au  Tue Feb 27 22:36:57 2001
From: john.maindonald at anu.edu.au (John Maindonald)
Date: Wed, 28 Feb 2001 08:36:57 +1100
Subject: [R] How to read a text table? A bit of trouble with Using
  R - An Introduction
In-Reply-To: <8HfXpFAyX7m6Ew38@myatt.demon.co.uk>
References: <001f01c0a10a$7bd3d900$18c4bfc8@jarnt>
 <001f01c0a10a$7bd3d900$18c4bfc8@jarnt>
Message-ID: <5.0.2.1.1.20010228083404.00a92850@pophost.anu.edu.au>

Mark Myatt wrote

>Type the file like this:
>
>"Year" "NSW" "Vic." "Qld" "SA" "WA" "Tas." "NT" "ACT" "Aust."
>1917 1904 1409  683  440  306 193   5   3  4941
>1927 2402 1727  873  565  392 211   4   8  6182
>1937 2693 1853  993  589  457 233   6  11  6836
>1947 2985 2055 1106  646  502 257  11   4  1947
>1957 3625 2656 1413  873  688 326  21  38  9640
>1967 4295 3274 1700 1110  879 375  62 103 11799
>1977 5002 3837 2130 1286 1204 415 104 214 14192
>1987 5617 4210 2675 1393 1496 449 158 265 16264
>1997 6274 4605 3401 1480 1798 474 187 310 18532
>
>Note the double quotes round the column labels and the space (not TAB)
>between each item of data. You can line them up with spaces (as above)
>or just use a single space.

Actually the quotes around the column headers are not necessary,
unless the names contain spaces.

John Maindonald               email : john.maindonald at anu.edu.au
Statistical Consulting Unit,  phone : (6125)3998
c/o CMA, SMS,                 fax   : (6125)5549
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From john.maindonald at anu.edu.au  Tue Feb 27 23:01:28 2001
From: john.maindonald at anu.edu.au (John Maindonald)
Date: Wed, 28 Feb 2001 09:01:28 +1100
Subject: [R] Using R for Data ... (was "Data Analysis and ...")
Message-ID: <5.0.2.1.1.20010228085029.009fc080@pophost.anu.edu.au>

I have posted a new version of my document on R.
I have corrected a number of errors and moved much of the
detailed material on data structures to follow the chapter
on exploration of multivariate data. I have changed the name;
it is now:
   Using R for Data Analysis and Graphics - An Introduction

The new document lives at:
   wwwmaths.anu.edu.au/~johnm/r/usingR.pdf

My web page has information on where to find scripts
and data sets (in the directories scripts/ and dsets/).
There are now separate scripts for each chapter,
except that 1&2 have been combined and 3&4 are
combined.

I changed the name because John Braun and myself want
to use Data Analysis & Graphics Using R as the name for
the monograph that we are writing.

Thanks to those who responded to the recent question
re use of
   austpop <- read.table("austpop.txt", header=T)
and
   source("austpop.R")
I'll look at whether I can make my document clearer.

I am unsure what I need to do to get the "contributed
documentation" section on CRAN updated.  Do I upload
it to ftp://cran.r-project.org/incoming/
as for code contributions?

John Maindonald               email : john.maindonald at anu.edu.au
Statistical Consulting Unit,  phone : (6125)3998
c/o CMA, SMS,                 fax   : (6125)5549
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mac24 at humboldt.edu  Tue Feb 27 23:50:55 2001
From: mac24 at humboldt.edu (Michael Camann)
Date: Tue, 27 Feb 2001 14:50:55 -0800 (PST)
Subject: [R] Unattended printing under Windows
In-Reply-To: <200102252116.NAA31289@axe.humboldt.edu>
Message-ID: <200102272250.OAA27518@axe.humboldt.edu>


> R-help list--
> 
> I need to process a BUNCH of data in a very repetitious way (literally
> days of running the same simple analyses and producing summary graphics
> over and over).  I can't face the mind-numbing boredom of this task!


Thanks to all who responded.  I thought I'd post the solution that
(mostly) worked in case others need it.  I used sink() to trap the text
output of multiple ecological assemblage organization analyses into
individual files with sequential numbers paste()'d into the file names to
make them unique.  Nothing new here.  I haven't printed them all yet, but
that should be trivial.

The tough part was printing the graphical output of each analysis on the
fly without being present to click the mouse.  I also needed to save the
graphics for later re-use, so I used win.metafile() to save them to .emf
files whose names corresponded with the text output files.  Unfortunately,
the corresponding print command win.print() simply feeds images to the
windows print system, opening a dialog box on my system.  DOES ANYONE KNOW
HOW TO TURN OFF THIS ANNOYING WINDOWS BEHAVIOR?  The moral is that *every*
action should have a command line alternative.  OK, end of rant.  The
windows default behavior might still work in some situations because any
*subsequent* images print automatically after the first dialog box is
clicked, until the next call to dev.off().  In other words, you can do:

plot (something)
win.print()               # click OK to close the dialog box and print

plot (something.else)     # it prints
plot (something.else)     # and so on, without further dialog boxes...

dev.off()                 # resets default behavior

Unfortunately, this strategy would not work for my needs. Instead, I used
postscript() and gsprint for Windows.  The resultant quality was not quite
as good as printing directly to the windows driver without the
intermediary postscript layer, but it was good enough.  For each analysis,
I used:

postscript(file="a_unique_filename", width=7, height=7, family="Times"
    print.it=TRUE, command="c:/Ghostgum/gsview/gsprint")
par(set.plot.parameters)
plot(something)
dev.off()

This is esentially identical to the unix solution, differing only in the
need to call gsprint rather then lpr.  It's possible that a similar
solution exists for the text pages using system() calls to the DOS port of
a2ps and then gsprint (I'm having trouble finding the a2ps port, however).

It took most of a day to write and debug the analysis routines and the
meta-function that orchestrated everything, but that was FAR more
interesting than the several days I anticipated running all the analyses
manually and doing all the mouse clicking to produce the printed output. 
The automated analyses actually finished in a couple of hours-- 200
separate analysis runs producing 200 printed plots and 200 text pages,
with speed limited primarily by the print spooler, I assume.

Thanks once again to the R development team for a superb tool, and to
those who responded with specific suggestions for solutions.

--Mike C.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Michael A. Camann                                  Voice: 707-826-3676
Assistant Professor of Zoology                       Fax: 707-826-3201
Institute for Forest Canopy Research     Email: mac24 at axe.humboldt.edu
Department of Biology                            ifcr at axe.humboldt.edu
Humboldt State University           
Arcata, CA 95521

                 URL:http://www.humboldt.edu/~mac24/
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From aperrin at socrates.berkeley.edu  Wed Feb 28 01:58:03 2001
From: aperrin at socrates.berkeley.edu (Andrew Perrin)
Date: Tue, 27 Feb 2001 19:58:03 -0500 (EST)
Subject: [R] Unattended printing under Windows
In-Reply-To: <200102272250.OAA27518@axe.humboldt.edu>
Message-ID: <Pine.LNX.4.21.0102271956410.26975-100000@nujoma.perrins>

On Tue, 27 Feb 2001, Michael Camann wrote:

[snip]
> This is esentially identical to the unix solution, differing only in the
> need to call gsprint rather then lpr.  It's possible that a similar
> solution exists for the text pages using system() calls to the DOS port of
> a2ps and then gsprint (I'm having trouble finding the a2ps port, however).

I would think you could solve the command-line printing of text files
issue using something along the lines of (UNTESTED since I don't have a
Win/DOS machine around):

system('copy <filename> lpt1:')

or

system('print <filename')

both of which are DOS commands that, theoretically, should bypass the
dialog box.

Andy Perrin


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hzi at uol.com.br  Wed Feb 28 16:10:53 2001
From: hzi at uol.com.br (hzi)
Date: Wed, 28 Feb 2001 12:10:53 -0300
Subject: [R] comments on documentation
References: <20010227093724.5372.qmail@web1201.mail.yahoo.com>
Message-ID: <017701c0a19a$5bf21080$09c4bfc8@jarnt>

> I also had a good deal of trouble trying to import an SPSS file. I
> found and installed the foreign package without too much trouble but
> didn't realize I had to load it before I could use it :-(.

I hadn?t realized this unitl now :-) Very helpful.

 Reading
> The Fine Manual helped eventually, but it would be useful to provide
> a bit more information in the "R Import/Export" documentation.
>
I agree. Totally.

>
> An example along these lines would help newbies a lot, I think. I
> also disagree with the import/export documentation, that importing
> files from foreign packages should be avoided (chapter 3). This will
> often be the starting point for new users who have most of their data
> in a foreign format and will usually be the quickest and most
> practical method in any case.
>
You?ve got a very good point here, and I subscribe to that view "verbatim".

> John Hendrickx
>
So...Is there such a thing in the R community as a Documentation team (like
you have the LDP 0 Linux Documentation Project)?
You see, it?s like that japanese martial art Aikido: newbies give you a
rough ride, because they don?t know the movements by heart. Likewise, what
may seem like a clear explanation to "gurus" may actually be quite
unsatisfactory from a newbie?s view point. This is not to say that is poorly
written, it?s just that we don?t read the documentation with the same eyes
an "experienced" person does. All too often, it has been my experience with
the open-source community, the documentation lacks little tiny details that
are just so important...


Best reagards to all,
and thank you for all the replies,

Henry L.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rachel at stat.auckland.ac.nz  Wed Feb 28 04:12:51 2001
From: rachel at stat.auckland.ac.nz (Rachel Cunliffe)
Date: Wed, 28 Feb 2001 16:12:51 +1300
Subject: [R] windows() options
Message-ID: <016301c0a134$55b99190$0c5dd882@A4>

Hi

Just noticed that the windows() function doesn't seem to allow for decimals
in the width and height options.  For example, typing:

> windows(5,4,10)
> windows(5.2,4,10)
> windows(5.4,4.3,10)

produces three equally sized windows.  Is there a way to get around this and
create more accurately sized windows without having to resize by hand?

Thanks

Rachel Cunliffe

Department of Statistics
University of Auckland

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From markhall at gol.com  Wed Feb 28 04:55:10 2001
From: markhall at gol.com (markhall@gol.com)
Date: Wed, 28 Feb 2001 12:55:10 +0900
Subject: [R] Spider diagrams
Message-ID: <E14Xxhl-0005l8-00@smtp01.fields.gol.com>

Hi, I am trying to create what are called "spider diagrams" in the geochemical
literature using R.  A spider diagram is basically a plot of the atomic number 
versus the concentration on a log scale.  Lines are drawn from each atomic
number for each sample.

Right now, my data frame looks like:

     SAMPLE             SITE           V3   LA.NASC LAATNUM   CE.NASC CEATMNUM
1  1A:001    ICU Loc 1A       Kasori E     0.2708179      57 0.3285894       58
2  1A:002    ICU Loc 1A       Kasori E     0.4542450      57 0.5353200       58
3  1A:003    ICU Loc 1A       Kasori E     0.3020954      57 0.3330943       58
4  1A:004    ICU Loc 1A       Kasori E     0.4956085      57 0.5660766       58
5  1A:005    ICU Loc 1A       Kasori E     0.6821741      57 0.7434971       58
6  1A:006    ICU Loc 1A       Kasori E     0.2667235      57 0.3471334       58
7  1A:008    ICU Loc 1A       Kasori E     0.4072798      57 0.5160001       58
8  1A:011    ICU Loc 1A       Kasori E     0.2958622      57 0.4187263       58
9  1A:017    ICU Loc 1A       Kasori E     0.2479571      57 0.3287652       58
10 1A:018    ICU Loc 1A       Kasori E     0.1469086      57 0.1802292       58
11 1A:019    ICU Loc 1A       Kasori E     0.4560389      57 0.6020045       58
     ND.NASC NDATNUM   SM.NASC SMATNUM
1  0.3726716      60 0.3915657      62
2  0.6724895      60 0.6687707      62
3  0.4930570      60 0.4995848      62
4  0.6827095      60 0.6414732      62
5  1.1013142      60 1.3937307      62
6  0.4419258      60 0.3340616      62
7  0.6425135      60 0.4334365      62
8  0.4402632      60 0.2898625      62
9  0.3856467      60 0.2911848      62
10 0.1991619      60 0.1864905      62
11 0.7596844      60 0.7790251      62

My plotting commands:

plot(spider[,5],spider[,4],xlim=range(57,63),ylim=range
(0.1,10),log="y",pch=as.integer(spider[,1]))

points(spider[,7],spider[,6],pch=as.integer(spider[,1]))
points(spider[,9],spider[,8],pch=as.integer(spider[,1]))
points(spider[,11],spider[,10],pch=as.integer(spider[,1]))

Okay, sop far, so good.  the problem I am having is getting the points
connected properly (based on the sample number).  I need the lines going across
the plot, not parallel to the y-axis (which I have done all too easily).

Sorry to bother you folks with what is probably an easy question, but I've 
reached the point of not sure what to try next.  I have a suspicion this
is something readily done in R though...

Are there any people out there using R for geochemical data?

Best, Mark Hall
markhall at gol.com





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Feb 28 09:25:46 2001
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 28 Feb 2001 08:25:46 +0000 (GMT)
Subject: [R] windows() options
In-Reply-To: <016301c0a134$55b99190$0c5dd882@A4>
Message-ID: <Pine.GSO.4.31.0102280817320.17192-100000@toucan.stats>

On Wed, 28 Feb 2001, Rachel Cunliffe wrote:

> Hi
>
> Just noticed that the windows() function doesn't seem to allow for decimals
> in the width and height options.  For example, typing:
>
> > windows(5,4,10)
> > windows(5.2,4,10)
> > windows(5.4,4.3,10)
>
> produces three equally sized windows.  Is there a way to get around this and
> create more accurately sized windows without having to resize by hand?

It's a bug (or just possibly by design), so no.  I've found and changed it
in the sources.  Unfortunately as 1.2.2 was released a couple of days ago,
this will not appear until the next release (which may be some time).  It
will be in the R-patched sources as from tomorrow, so if you really need
this you could compile that from the sources.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mark at myatt.demon.co.uk  Wed Feb 28 10:48:42 2001
From: mark at myatt.demon.co.uk (Mark Myatt)
Date: Wed, 28 Feb 2001 09:48:42 +0000
Subject: (off topic) Re: [R] Notepad
In-Reply-To: <Pine.LNX.4.21.0102271756290.15734-100000@leo.logilab.fr>
References: <8HfXpFAyX7m6Ew38@myatt.demon.co.uk>
 <Pine.LNX.4.21.0102271756290.15734-100000@leo.logilab.fr>
Message-ID: <Ow8rUFA6lMn6EwLo@myatt.demon.co.uk>

Alexandre Fayolle <Alexandre.Fayolle at logilab.fr> writes:
>On Tue, 27 Feb 2001, Mark Myatt wrote:
>
>> Notepad is a truly awful program and will not allow you to add
>> extensions to file names so you will have to save it without the .txt
>> extension (which NotePad will add for you).
>
>Putting double quotes around your filename ("data.dat") should stop
>Notepad from adding the .txt extensions. Selecting 'All files' in the file
>type dropdown list should do the same thing.

Well, you live and learn. That tip might come in handy when I'm away
from the office. I use Visual SlickEdit as my main editor and have done
since version 1.0. If anyone is interested I have a VS lexer fro syntax
coding.

Mark

--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mark at myatt.demon.co.uk  Wed Feb 28 10:57:25 2001
From: mark at myatt.demon.co.uk (Mark Myatt)
Date: Wed, 28 Feb 2001 09:57:25 +0000
Subject: [R] Generate temporary objects or not?
In-Reply-To: <Pine.A41.4.33.0102270822220.45320-100000@homer32.u.washington.edu>
References: <20010227153730.A1106@caligola.econ.ucl.ac.uk>
 <Pine.A41.4.33.0102270822220.45320-100000@homer32.u.washington.edu>
Message-ID: <GAzpoKAFuMn6EwpO@myatt.demon.co.uk>

Thomas,

Wrote:

>There are two fundamental principles of optimisation
>1) Don't do it unless you need it
>2) Measure, don't guess, about speed.

I'd go along with that. Using temporary objects has the advantage of
readability (if you use descriptive object names) when you come back to
code several months later. It is scant comfort that you saved two hours
on a run of an unattended simulation last year when you are toiling over
a soup of $[][[]](((()))){}{}s trying to reconstruct last years
thinking. One thing I do is to write code for readability, test it for a
while and debug before optimising. I then have a readable version that
works should I ever need it. Of course there is always '#'.

Mark

--
Mark Myatt


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From janousek at cgu.cz  Wed Feb 28 12:57:02 2001
From: janousek at cgu.cz (Vojtech Janousek)
Date: Wed, 28 Feb 2001 12:57:02 +0100
Subject: [R] Spider diagrams
Message-ID: <5.0.0.25.0.20010228122012.02281dd0@193.85.184.2>

Dear Mark,
A friend of mine, who is on r-help disscusion group has forwarded me your 
querry regarding the spiderplots.

I am very much using R for geochemical calculations (mainly WR geochemistry 
of igneous rocks, plus radiogenic isotopes). OC I did need to solve the 
problem with spiderdiagrams and here are fragments of my code. I trust they 
will be of help:

# normalization (A,B)
# Normalizes data for a spiderdiagram
#
# Parameters:
#   sample analyses [A]
#   normalizing values [B]
#
normalization<-function(A,B){
         C<-matrix(rep(NA,nrow(A)*length(B)),ncol=length(B))
         for (i in 1:nrow(A)){
             C[i,]<-A[i,]/B
         }
         dimnames(C)<-dimnames(A)
         return(C)
     }


# spiderplot (A,B,model,ymin,ymax,add)
# Plots spiderdiagram
#
# Parameters:
#   normalized values [A]
#   normalizing values [B]
#   range of the diagram [ymin, ymax]
#   shall be the patterns unbroken even for missing values (join)

spiderplot<-function(A,B,ymin,ymax,join=T){
             if (ymin<=0) {ymin<-min(A,na.rm=TRUE)/10}
             if (ymax<=ymin) {ymax<-10*max(A,na.rm=TRUE)}
         windows(width = 8, height = 6.5, pointsize = 12)
         plot(A[1,],pch=1,xlab="",type="n",log="y",ylim=c(ymin,ymax),axes=FALSE,ylab="")
         axis(1, 1:length(B),labels=colnames(A))
         axis(2,)

         for (i in 1:nrow(A)){
                 points(A[i,],pch=i)
                 tempy<-A[i,][!is.na(A[i,])]
                 tempx<-(1:length(B))[!is.na(A[i,])]
                 if (join){
                         lines(tempx,tempy)}
                       else{
                         lines(1:length(B),A[i,])}
         }
}


#X is a numeric data matrix with data you need to normalize, samples in 
rows, elements in columns
# chondrit is a numeric vector with the normalizing values

Y<-normalization(X,chondrit)
spiderplot(Y,chondrit,1,1000)



My test data:
X:
         La    Ce   Pr    Nd Pm   Sm   Eu   Gd   Tb   Dy   Ho   Er   Tm   Yb
Sa-3 47.44 96.08   NA 45.15 NA 7.98 1.82   NA   NA 5.22 1.13 2.72   NA 2.95
Sa-4 21.67 71.78 6.94 29.71 NA 6.24 1.50 6.09 0.92 5.80 1.03 2.80 0.43 2.88
Sa-7 20.76 42.02 4.96 17.44 NA 3.76 1.77 3.76 0.56 2.70 0.56 1.64 0.24 1.52
        Lu
Sa-3 0.29
Sa-4 0.43
Sa-7 0.25


chondrit (REE in chondrites according to Boynton 1984)
     La     Ce     Pr     Nd     Pm     Sm     Eu     Gd     Tb     Dy     Ho
0.3100 0.8080 0.1220 0.6000 1.0000 0.1950 0.0735 0.2590 0.0474 0.3220 0.0718
     Er     Tm     Yb     Lu
0.2100 0.0324 0.2090 0.0322


I trust this will work for you. Please send any comments to my private 
email address since I am not on this discussion group (yet?).

                         Best regards,
                                                 Vojtech



                                               dr. Vojtech Janousek
------------------------------------------------------------------
Snail-mail:
          Czech Geological Survey   telephone: (420) (2) 510 85 308
          Klarov 3                  fax:       (420) (2) 581 87 48
          118 21 Prague 1
          Czech Republic

http://www.geocities.com/vjanousek.geo/
ICQ 32744555
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From vucli at tantalos.dev.matav.net  Wed Feb 28 14:30:07 2001
From: vucli at tantalos.dev.matav.net (vucli@tantalos.dev.matav.net)
Date: Wed, 28 Feb 2001 14:30:07 +0100
Subject: [R] axis fit to curve
Message-ID: <E14Y6gB-0004XQ-00@tantalos.nat.dev.matav.net>

Hello!

I'd like to make a graph with distorted axis (and grids). For example fit the x axis to a circle.
Is this possible in R (with any package) or not (only rectangle graph)?

Thanks!

ps: please, cc to me

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From knordstr at sun3.oulu.fi  Wed Feb 28 15:50:07 2001
From: knordstr at sun3.oulu.fi (Kenneth Nordstrom)
Date: Wed, 28 Feb 2001 16:50:07 +0200 (EET)
Subject: [R] re: Spatial stats: R vs. Splus
Message-ID: <200102281450.QAA15390@cc.oulu.fi>


Hello,

Could someone tell me whether the spatial statistics module of
Splus is worth the rather high price, or whether one could (with
reasonable effort) carry out the same things using R and some of
its contributed packages. 

Although we do have Splus (Windows and Unix), we definitely prefer 
to use R whenever feasible (both for research and teaching).

Thanks for developing a superb computing/programming environment.

Kenneth Nordstr?m

......................................................................

Kenneth Nordstr?m                      Kenneth.Nordstrom at oulu.fi
Professor of Statistics
Head of Statistics Division
Dept of Math Sciences                  Tel: +358-8-553 1829 
Univ of Oulu                                +358-8-553 1820 (secr) 
P.O. Box 3000                          Fax: +358-8-553 1848
FIN-90014 Univ of Oulu     
FINLAND                                http://stat.oulu.fi/nordstrom/
 
......................................................................  
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.ribeiro at lancaster.ac.uk  Wed Feb 28 16:18:10 2001
From: p.ribeiro at lancaster.ac.uk (Paulo Justiniano Ribeiro Jr)
Date: Wed, 28 Feb 2001 15:18:10 +0000 (GMT)
Subject: [R] re: Spatial stats: R vs. Splus
Message-ID: <Pine.GSO.4.21.0102281517590.9133-100000@unixb.lancs.ac.uk>

Hi Kenneth

Depends on what you are looking for, concerning methods for spatial data.

At CRAN you will find the packages:

1) spatial, by Venables & Ripley, as part of the bundle VR
This packages does some geostatistical and point process analysis

2) splancs by Rowlings, Diggle and ported by  Bivand
For point process

3) sgeostats by Majure and proted by Gedhardt
For geostatistics

And outside CRAN I know about:

4) geoR by Ribeiro and Diggle,
For (model-based) geostatistics
available at: www.maths.lancs.ac.uk/~ribeiro.geoR.html


=======================================================
Paulo Justiniano Ribeiro Jr
Dept Maths & Stats  -  Fylde College
Lancaster University
Lancaster LA1 4YF   -  U.K.

e-mail: paulojus at est.ufpr.br
http://www.maths.lancs.ac.uk/~ribeiro


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mac24 at humboldt.edu  Wed Feb 28 16:58:25 2001
From: mac24 at humboldt.edu (Michael Camann)
Date: Wed, 28 Feb 2001 07:58:25 -0800 (PST)
Subject: [R] Unattended printing under Windows
In-Reply-To: <Pine.LNX.4.21.0102271956410.26975-100000@nujoma.perrins>
Message-ID: <200102281558.HAA24141@axe.humboldt.edu>

> I would think you could solve the command-line printing of text files
> issue using something along the lines of (UNTESTED since I don't have a
> Win/DOS machine around):
> 
> system('copy <filename> lpt1:')
> 
> or
> 
> system('print <filename'

Andy is correct, of course.  What I failed to mention is that I needed
some formatting done to the raw ascii files to make the text and tables
print properly-- mainly a matter of reducing the default font size. 
There's certainly an HP printer command that will do this, so that's
another option as well.

--Mike C.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Michael A. Camann                                  Voice: 707-826-3676
Assistant Professor of Zoology                       Fax: 707-826-3201
Institute for Forest Canopy Research     Email: mac24 at axe.humboldt.edu
Department of Biology                            ifcr at axe.humboldt.edu
Humboldt State University           
Arcata, CA 95521

                 URL:http://www.humboldt.edu/~mac24/
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bitwrit at ozemail.com.au  Wed Feb 28 21:38:19 2001
From: bitwrit at ozemail.com.au (Jim Lemon)
Date: Thu, 01 Mar 2001 07:38:19 +1100
Subject: (off topic) Re: [R] Notepad
Message-ID: <3A9D61BB.90A57F54@ozemail.com.au>

The discussion on editors prompts the following comments.

1) One reason I put "Kickstarting R" together is that most people come
to R as migrants; they already have an editor, a browser, etc. that they
know how to use.  Learning one thing is easier than learning many (Jon
Baron's comment on interference is most relevant).

2) NotePad isn't a great editor, but it will serve for the prosaic tasks
that one encounters while learning R.  I don't use it myself, but R is
supposed to work under Windows and that is the editor that comes with
the system.

3) The usual number of responses spent a lot of time dissing NotePad and
advertising their favorite editor.  As various contributors noted,
NotePad actually does most of the things that some people said it
doesn't.  Positive advice (like the fact that NotePad _always_ saves in
plain text) is usually helpful.  Negative advice always reminds me of
the marketing practices of some software companies.

Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From parky at seas.gwu.edu  Wed Feb 28 21:51:33 2001
From: parky at seas.gwu.edu (Youngser Park)
Date: Wed, 28 Feb 2001 15:51:33 -0500
Subject: [R] Automating the job?
Message-ID: <B6C2CF03.5A58%parky@seas.gwu.edu>

Hi!

I just started to use R recently, and would like to ask a help about
automating the job.

I need to use "kmeans" function with my own 300 data files, and wonder if
it's possible to do it automatically. For example,

> library (mva)
> mydata <- read.table ("data1")
> cl <- kmeans(mydata, 5, 20)

and I just need to save "cl" info (i.e. the center info). Of course, I'll
have the data from "data1" to "data300".

Could someone please give me an advise how to do it, or any other
recommendation for this job? I'll run this either in Unix or Mac environment
using the version 1.2.1.

Thanks in advance.

- Youngser Park

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Wed Feb 28 21:57:50 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 28 Feb 2001 21:57:50 +0100
Subject: (off topic) Re: [R] Notepad
In-Reply-To: Jim Lemon's message of "Thu, 01 Mar 2001 07:38:19 +1100"
References: <3A9D61BB.90A57F54@ozemail.com.au>
Message-ID: <x2lmqqv835.fsf@blueberry.kubism.ku.dk>

Jim Lemon <bitwrit at ozemail.com.au> writes:

> 3) The usual number of responses spent a lot of time dissing NotePad and
> advertising their favorite editor.  As various contributors noted,
> NotePad actually does most of the things that some people said it
> doesn't.  Positive advice (like the fact that NotePad _always_ saves in
> plain text) is usually helpful.  Negative advice always reminds me of
> the marketing practices of some software companies.

Hmm, well, by your defs

negative x 2:
Notepad conks out at 64 K or thereabouts
Notepad doesn't do search and replace

positive x 3:
Wordpad takes larger files
Wordpad can do search and replace
Do remember to save as text...  

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From elmore at stat.psu.edu  Wed Feb 28 22:46:41 2001
From: elmore at stat.psu.edu (Ryan Elmore)
Date: Wed, 28 Feb 2001 16:46:41 -0500 (EST)
Subject: [R] redhat 7.0 trouble 
Message-ID: <Pine.GSO.4.10.10102281645190.15126-100000@mu.stat.psu.edu>

Hi.  I am running R 1.2.1 on an i686 (dell laptop).  I can do simple
things like defining vectors, plot, etc... however when I use the function
smooth.spline() or demo(lm.glm), I get the following error and it kicks me
out of R:
/usr/lib/R/bin/R.bin: error while loading shared libraries:
/usr/lib/R/bin/R.bin: symbol __sysconf, version GLIBC_2.2 not defined in
file libc.so.6 with link time reference

A few more facts...I have glib 1.2.8 installed and I don't even think
glibc 2.1.92 is installed but it is on the disks.  If I install glibc
2.1.92 from the disks (and then the updates on the redhat site) would this
resolve the issue?  Furthermore, I have updated the gcc-* from the redhat
site...could this be compounding the problem?  

I realize that this is probably my fault somehow...I am relatively new to
linux.  I checked the list archives and couldn't find the same problem.  
Any help is very much appreciated.  By the way, I have installed using the
rpm and source with the same result.  Thanks again,

Ryan Elmore
PhD candidate 
Dept of Statistics - PSU



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From yuling5 at yahoo.com  Wed Feb 28 23:10:39 2001
From: yuling5 at yahoo.com (Yu-Ling Wu)
Date: Wed, 28 Feb 2001 14:10:39 -0800 (PST)
Subject: [R] print() 
Message-ID: <20010228221039.26329.qmail@web11508.mail.yahoo.com>

Hi, I've two questions. Please help me. Thanks!

--- Question (1) ---
When I type:   print("School Name")
the output is: [1] "School Name"
How to get rid of the '[1]' and the double quotes "" 
and make the output like this: School Name

--- Question (2) ---
I got the following output by typing "summary(data)".

    dstuser        dstmethod        numaction    
 Min.   :1.000   Min.   : 1.000   Min.   : 5.00  
 1st Qu.:2.000   1st Qu.: 2.000   1st Qu.: 7.00  
 Median :2.000   Median : 7.000   Median :16.00  
 Mean   :2.667   Mean   : 5.222   Mean   :23.11  
 3rd Qu.:4.000   3rd Qu.: 7.000   3rd Qu.:24.00  
 Max.   :4.000   Max.   :10.000   Max.   :66.00  

How to make the output in grid and look like this:

+--------+---------+----------+-----------+
|        |dstuser  |dstmethod | numaction |  
+--------+---------+----------+-----------|
| Min.   |  1.000  |    1.000 |      5.00 |  
| 1st Qu.|  2.000  |    2.000 |      7.00 | 
| Median |  2.000  |    7.000 |     16.00 | 
| Mean   |  2.667  |    5.222 |     23.11 | 
| 3rd Qu.|  4.000  |    7.000 |     24.00 | 
| Max.   |  4.000  |   10.000 |     66.00 | 
+--------+---------+----------+-----------+


__________________________________________________
Do You Yahoo!?
Get email at your own domain with Yahoo! Mail. 
http://personal.mail.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jasont at indigoindustrial.co.nz  Wed Feb 28 23:17:07 2001
From: jasont at indigoindustrial.co.nz (Jason Turner)
Date: Thu, 1 Mar 2001 11:17:07 +1300
Subject: [R] print to file question
Message-ID: <20010301111707.A1727@camille.indigoindustrial.co.nz>

Probably doing something wrong here.  
I'm getting an empty file called "Rplot.ps" 
when I do this:

> foo<-rnorm(100)
> postscript()
> boxplot(foo)

System info:
Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 2.2
 year = 2001
 month = 02
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

I've checked the following:
  write permission in the directory (got it - it's my home directory ;-).
  disk isn't full.

Is there a call to flush a buffer I'm not aware of?
If not, any other ideas?
If it is a bug, the symptoms were identical in 1.2.1.

Cheers

Jason
-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont at indigoindustrial.co.nz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Wed Feb 28 23:26:43 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 28 Feb 2001 23:26:43 +0100
Subject: [R] redhat 7.0 trouble
In-Reply-To: Ryan Elmore's message of "Wed, 28 Feb 2001 16:46:41 -0500 (EST)"
References: <Pine.GSO.4.10.10102281645190.15126-100000@mu.stat.psu.edu>
Message-ID: <x2k86asau4.fsf@blueberry.kubism.ku.dk>

Ryan Elmore <elmore at stat.psu.edu> writes:

> Hi.  I am running R 1.2.1 on an i686 (dell laptop).  I can do simple
> things like defining vectors, plot, etc... however when I use the function
> smooth.spline() or demo(lm.glm), I get the following error and it kicks me
> out of R:
> /usr/lib/R/bin/R.bin: error while loading shared libraries:
> /usr/lib/R/bin/R.bin: symbol __sysconf, version GLIBC_2.2 not defined in
> file libc.so.6 with link time reference
> 
> A few more facts...I have glib 1.2.8 installed and I don't even think
> glibc 2.1.92 is installed but it is on the disks.  If I install glibc
> 2.1.92 from the disks (and then the updates on the redhat site) would this
> resolve the issue?  Furthermore, I have updated the gcc-* from the redhat
> site...could this be compounding the problem?  
> 
> I realize that this is probably my fault somehow...I am relatively new to
> linux.  I checked the list archives and couldn't find the same problem.  
> Any help is very much appreciated.  By the way, I have installed using the
> rpm and source with the same result.  Thanks again,

Not your fault. RedHat botched up rather badly with 7.0, so I believe
you need to get updates for glibc from their website too.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at pubhealth.ku.dk  Wed Feb 28 23:34:56 2001
From: p.dalgaard at pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 28 Feb 2001 23:34:56 +0100
Subject: [R] print to file question
In-Reply-To: Jason Turner's message of "Thu, 1 Mar 2001 11:17:07 +1300"
References: <20010301111707.A1727@camille.indigoindustrial.co.nz>
Message-ID: <x2hf1esagf.fsf@blueberry.kubism.ku.dk>

Jason Turner <jasont at indigoindustrial.co.nz> writes:

> Probably doing something wrong here.  
> I'm getting an empty file called "Rplot.ps" 
> when I do this:
> 
> > foo<-rnorm(100)
> > postscript()
> > boxplot(foo)
> 
....
> Is there a call to flush a buffer I'm not aware of?
> If not, any other ideas?
> If it is a bug, the symptoms were identical in 1.2.1.

dev.off() when you're finished writing to the file.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Wed Feb 28 23:44:45 2001
From: ben at zoo.ufl.edu (ben@zoo.ufl.edu)
Date: Wed, 28 Feb 2001 17:44:45 -0500 (EST)
Subject: [R] Automating the job?
In-Reply-To: <B6C2CF03.5A58%parky@seas.gwu.edu>
Message-ID: <Pine.LNX.4.30.0102281738330.4759-100000@bolker.zoo.ufl.edu>



On Wed, 28 Feb 2001, Youngser Park wrote:

> Hi!
>
> I just started to use R recently, and would like to ask a help about
> automating the job.
>
> I need to use "kmeans" function with my own 300 data files, and wonder if
> it's possible to do it automatically. For example,
>
> > library (mva)
> > mydata <- read.table ("data1")
> > cl <- kmeans(mydata, 5, 20)
>
> and I just need to save "cl" info (i.e. the center info). Of course, I'll
> have the data from "data1" to "data300".
>
> Could someone please give me an advise how to do it, or any other
> recommendation for this job? I'll run this either in Unix or Mac environment
> using the version 1.2.1.

  This should be pretty straightforward.

library(mva)
maxit <- 20
nclust <- 5
nvars <- 5
npts <- 100
ndata <- 300
## cluster identity of each point, center of each cluster, size of each
## cluster
result.len <- npts+nclust*nvars+nclust
results <- matrix(ncol=result.len,nrow=ndata)
for (i in 1:ndata) {
  mydata <- read.table(paste("data",i,sep=""))
  results[i,] <- unlist(kmeans(mydata,nclust,maxit))
}

does that help?

>
> Thanks in advance.
>
> - Youngser Park
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker at zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From lzhang at uci.edu  Fri Feb 16 05:49:07 2001
From: lzhang at uci.edu (LIQING ZHANG)
Date: Thu, 15 Feb 2001 20:49:07 -0800
Subject: [R] Sub_scribe and a question
Message-ID: <3A8CB143.6A0D7517@uci.edu>

Dear all,

I am trying to get an estimate of the intercept for a linear model.  In
this case, I know the slope of the model, can anyone tell me how to
constrain the formula in lm() so that it only estimates the intercept
not the slope?  Many thanks in advance,

Sincerely,

Liqing Zhang
Dept. of Eco. Evol. Biol.
Univ. of CA, Irvine
email: lzhang at uci.edu

>From VM Mon Apr 30 08:18:45 2001
X-VM-v5-Data: ([nil nil nil nil nil nil nil nil nil]
	["22492" "Saturday" "28" "April" "2001" "12:31:48" "+0200" "owner-r-help at stat.math.ethz.ch" "owner-r-help at stat.math.ethz.ch" "<200104281031.MAA29928 at stat.math.ethz.ch>" "642" "BOUNCE r-help at stat.math.ethz.ch:     global taboo body match \"/^Content-Type: *application\\/octet-stream/i\" at line 241  " "^From:" nil nil "4" "2001042812:31:48" "BOUNCE r-help at stat.math.ethz.ch: global taboo body match \"/^Content-Type: *application\\/octet-stream/i\" at line 241" nil nil nil]
	nil)
Received: by stat.math.ethz.ch (8.9.1/8.9.1) id MAA29928;
	Sat, 28 Apr 2001 12:31:48 +0200 (MET DST)
Message-Id: <200104281031.MAA29928 at stat.math.ethz.ch>
From: owner-r-help at stat.math.ethz.ch
To: owner-r-help at stat.math.ethz.ch
Subject: BOUNCE r-help at stat.math.ethz.ch:     global taboo body match "/^Content-Type: *application\/octet-stream/i" at line 241  
Date: Sat, 28 Apr 2001 12:31:48 +0200 (MET DST)

>From owner-r-help  Sat Apr 28 12:31:27 2001
Received: (from daemon at localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id MAA29894
	for <r-help at stat.math.ethz.ch>; Sat, 28 Apr 2001 12:31:26 +0200 (MET DST)
Received: from riker.skynet.be(195.238.3.132)
 via SMTP by hypatia, id smtpdAAAa007H.; Sat Apr 28 12:31:24 2001
Received: from NEMO (adsl-34755.turboline.skynet.be [217.136.7.195])
	by riker.skynet.be (8.11.2/8.11.2/Skynet-OUT-2.11) with SMTP id f3SAVC110474;
	Sat, 28 Apr 2001 12:31:12 +0200 (MET DST)
	(envelope-from <phgrosje at ulb.ac.be>)
From: "Philippe Grosjean" <phgrosje at ulb.ac.be>
To: "Prof Brian D Ripley" <ripley at stats.ox.ac.uk>
Cc: <r-help at stat.math.ethz.ch>
Subject: RE: [R] Benchmarking R, why sort() is so slow?
Date: Sat, 28 Apr 2001 12:32:12 +0200
Message-ID: <MABBLJDICACNFOLGIHJOIECICDAA.phgrosje at ulb.ac.be>
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_0025_01C0CFDF.3FCC3CA0"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400
Importance: Normal
In-Reply-To: <Pine.GSO.4.31.0104280911500.18385-100000 at auk.stats>

C'est un message de format MIME en plusieurs parties.

------=_NextPart_000_0025_01C0CFDF.3FCC3CA0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Well, I understand and share your point of view about benchmarks, including
the one I am working on. Much more can be said also: raw speed is not all,
and perhaps also doesn't tell much about usability and performance in real
use. Moreover, it is perhaps a little silly to compare packages like R or
Splus, mainly intended for statistics with Mathematica, for instance,
designed principally for symbolic mathematics. This is something I want to
think about before releasing this benchmark in public.

A point I must clarify: among the 11 tested packages, my favorite is R,...
by far. But I try to stay objective. I am just a bit puzzled about this
outlier in the results that is the sort() test in R. This is not
representative at all of the performances of R, which are very good, as
attested by the 14 other tests (see column F in the table hereunder).

Now, one can argue also that all these tests are just like random probes
that look for global performances, but also for homogeneity in the
performances of the various algorithms used. The question is not how useful
is it to sort 1e6 random numbers in a particular context. The question is,
from this point of view, sort() is one of the basic functions in these kind
of packages (but, I agree, there are many many other, and perhaps, more
important functions) and as such, it could be considered as an interesting
benchmark test... among others. Now, if you look at the results, you will
notice immediatelly that some packages are more homogeneous than others (as
a reminder, tests have been scaled so as to be done in about 1 sec +/- 10%
in the reference software -well, one can critisize this choice but...- that
is Matlab 6.0 R12).

The point also is not to say that 21 sec is too long, or long enough, or
what to sort 1e6 random numbers. The point is that various packages are
_compared_ on the same level (i.e.: same task to do on the same computer).
With 11 packages, which represent perhaps 60-80% of all available ones for
high-level language matrix calculation, it is possible to have a quite good
idea of overall performances. Again, R is an outlier for the sort test (see
row 3 of the table). Now, I decided to use trimmed means to get rid of such
outliers, so overall R results are not penalized by this test. However, I am
not the kind of guy to traw away outliers without asking if they have
something to tell us. That's what I am doing here.

I hope nobody feel agressed by my approach, because this is not my goal at
all. My current point of view is that sort() test in R could really be
considered as an outlier (I mean, to chose other tests would certainly
reveal this kind of conter-performances in other functions for other
packages). I think however that it is useful to signal it to the R core
team, and that it should be perhaps useful too to reconsider the sorting
algorithm used in R in a future version, in regard with these results. I am
not competent enough for that, or I would have gladly contributed myself in
working on this problem. OK, there are certainly many priorities on the "to
do list", but... what about using the same algorithm as Splus? or reusing
Scilab code which is GPL too? If there are good reasons to keep the current
sort() algorithm in R (better in other situations, I don't know, I haven't
tested so extensively), at least a second alternative could be proposed,
which could be welcome in situations like this (a ten times improvement is
not to be neglected, isn't it?).

Software released under a GPL license, like R, must be encouraged and I
don't want to have a bad influence in any way with this benchmark. One must
admit that Mathworks did an amazing job, both on the performances level
(compare column I, Matlab 5.3 R11 with column C, Matlab 6.0 R12) and on the
user interface in the recently released Matlab 6.0. Matlab is partly based
on public domain libraries... and Matlab is much too expensive, from my
point of view. The same could be said about Splus. In the opposite, R would
probably receive a first position in a top-quality/low price contest, in my
opinion. Freedom (in this case, to use, share, contribute to a software) is
a major quality... unfortunately not evaluated in such a raw benchmark. I
hope I could make just a little positive contribution to R in signaling this
weakness in sort() performances.

Now, I would gladly receive any other (good or bad, but constructive,
please) criticisms about this benchmark. I join in this mail the script I
used to test R. If someone would like to receive scripts for other packages,
I could give them too. They will be available soon, anyway, when my work
will be done.


Temporary version of a benchmark:
---------------------------------
Computer = Intel Celeron 500 Mhz with 256 Mb Ram under Windows 2000 sp1 (all
tests run 3 times)

Tested software: A = O-Matrix 5.1 (native mode), B = O-Matrix 5.1 (Matlab
mode), C = Matlab 6.0 R12, D = Ox 2.20, E = Mathematica 4.01, F = R 1.2.2, G
= Octave 2.1.31, H = Splus 2000 pro R3, I = Matlab 5.3 R11, J = Rlab 2.1, K
= Scilab 2.6, L = Axum 6.0 R2 (Splus mode)

Tests: 3 series (I. matrix calculation / II. preprogrammed matrix functions
/ III. programmation) of 5 tests each. A trimmed mean is considered for each
serie (best and worst scores eliminated). The tests are scaled to be done in
approx. 1 sec on the reference computer with the reference software being
Matlab 6.0 R12 (column C).

Serie I: Matrix calculation
1 = Creation, transposition, deformation of a 1200x1200 matrix, 2 =
1250x1250 normal distributed random matrix ^1000, 3 = Sorting of 1,100,000
random values, 4 = 550x550 cross-product matrix (b = a'  * a), 5 = Linear
regression over a 700x700 matrix (b = a \ b')

Serie II: Preprogrammed matrix functions
6 = FFT over 900,000 random values, 7 = Eigenvalues of a 220x220 random
matrix, 8 = Determinant of a 750x750 random matrix, 9 = Cholesky
decomposition of a 1000x1000 matrix, 10 = Inverse of a 500x500 random matrix

Serie II: programmation
11 = 225.000 Fibonacci numbers calculation (vector calc.), 12 = Creation of
a 1500x1500 Hilbert matrix (matrix calc.), 13 = Grand common divisors of
35,000 pairs (recursion), 14 = Creation of a 220x220 Toeplitz matrix
(loops), 15 = Escoufier's method on a 22x22 matrix (mixed)

Times are in sec.



Software   A     B     C     D     E     F(R)  G     H     I     J     K
L

Serie I.
--------
1         1.03  1.35  0.95  1.23  2.19  2.79  4.24  2.91  1.00  1.92  2.95
2.67
2         2.60  2.48  0.99  2.91  0.76  2.88  2.76  1.41  2.61  2.38  2.32
1.42
3         1.09  1.10  1.04  3.37  3.13 21.71  6.33  1.84  7.91  4.00  2.72
1.65
4         0.85  0.86  0.98  1.84  4.04  3.88  7.71  1.74  4.57  8.92 14.84
1.61
5         0.72  0.96  1.07  5.47  2.89  5.75  4.32 10.84  6.91  6.31  7.67
9.70
----------------------------------------------------------------------------
----
tr. mean  0.99  1.14  1.01  2.70  2.74  4.17  4.96  2.16  4.70  4.23  4.45
1.98

Serie II.
---------
6         2.21  2.16  0.99  3.83  1.94  2.67  2.70  4.81  4.04  2.23  4.06
4.17
7         0.42  0.42  0.90  1.11  0.95  1.49  2.46  1.68  1.41  3.09  2.94
2.19
8         0.88  0.92  1.06  3.31  5.90  5.98  5.19  2.04  7.96  7.50  9.14
117.0
9         0.96  0.96  1.29  3.74  4.30  3.65  6.54 11.38  4.59  6.64  7.81
8.98
10        0.75  0.76  1.10  2.94  5.24  5.83  3.92  2.48  6.18  7.65  7.61
11.04
----------------------------------------------------------------------------
----
tr.mean   0.75  0.88  1.05  3.33  3.83  4.05  3.94  3.48  4.93  5.74  6.49
8.06

Serie III.
----------
11        0.52  0.39  1.04  0.52  0.41  0.55  1.02  0.96  0.97  0.49  0.60
0.72
12        1.79  2.09  0.98  1.03  3.14  1.30  0.79  2.02  2.03  1.21  1.92
1.86
13        0.38  0.43  1.03  0.76   ?    1.33  0.87  0.71  0.92  6.03  1.23
0.93
14        0.20  0.26  0.92  0.13  1.50  2.56  6.89 14.49  0.78  0.63  4.52
13.46
15        0.22  0.24  1.00  0.13   ?    0.48  1.66 12.12  1.06  0.73  1.32
10.88
----------------------------------------------------------------------------
----
tr. mean  0.79  0.36  1.00  0.47  1.68  1.06  1.19  5.03  0.99  0.86  1.49
4.56
----------------------------------------------------------------------------
----
total    14.62 15.39 15.34 32.33 36.38 62.84 57.40 71.43 52.95 59.73 71.65
188.3
----------------------------------------------------------------------------
----
ovr. mean 0.84  0.79  1.02  2.17  2.75  3.09  3.36  3.44  3.54  3.61  4.14
4.87

Sorry for being so long.

Philippe


-----Message d'origine-----
De : ripley at auk.stats [mailto:ripley at auk.stats]De la part de Prof Brian
D Ripley
Envoye : samedi 28 avril 2001 10:27
A : Philippe Grosjean
Cc : Peter Dalgaard BSA; r-help at stat.math.ethz.ch
Objet : RE: [R] Benchmarking R, why sort() is so slow?


On Fri, 27 Apr 2001, Philippe Grosjean wrote:

> I suspect it should be a question of algorithm choice. May be sort() is
> important enough, including for large datasets, to place some improvement
in
> the "to do" list for a further version...?

I find it hard to believe that doing anything useful with a 1.1 million
length vector will not take very much longer than complete sorting, which
is a rare problem in statistics (not needed for quantiles, for example).
That's the problem with these benchmarks, they don't test realistic
problems because many of the packages concerned would need days of coding
to run one.

FWIW, there are O(n log n) sort algorithms, worst case, that are fairly
competitive on average too.  But testing random vectors is not
representation of real problems, and for many such (and even for
rnorm(1e6)) one can do even better by e.g radix sorting.  So if you know
something about the input you make your package look better. Again,
a problem with benchmarking.

>> Peter Dalgaard

> The internal algorithm is a shellsort, which is supposedly of
> complexity O(n^1.25) and has decent worst-case behaviour. Other
> algorithms like quicksort have typical performance of O(n log n) but
> extreme cases of O(n^2).
>
> For large vectors the O(n^.25/log(n)) relative complexity is going to
> make a difference, although the observed differences seem larger.

There are several shellsort variants.  I would need to look up the
known results for precisely this one.

> There are very likely better choices of sort algorithm...


--
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


------=_NextPart_000_0025_01C0CFDF.3FCC3CA0
Content-Type: application/octet-stream;
	name="R.R"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="R.R"

# R Benchmark (3 April 2001)
# Author : Philippe Grosjean
# eMail  : phgrosjean at sciviews.org
# Web    : http://www.sciviews.org
# License: GPL 2 or above at your convenience (see: http://www.gnu.org)
#
# Several tests are adapted from the Splus Benchmark Test V. 2
# by Stephan Steinhaus (stst at informatik.uni-frankfurt.de)                =
              #=20
# Reference for Escoufier's equivalents vectors (test III.5):
# Escoufier Y., 1970. Echantillonnage dans une population de variables
# aleatoires r=E9elles. Publ. Inst. Statis. Univ. Paris 19 Fasc 4, 1-47.
#
# Note that you need to install package 'Matrix' for this test
# Use also R >=3D 1.2, otherwise you will have to change -nsize and =
-vsize
# parameters at startup (R versions prior to 1.2 have a fixed amount of
# memory which is too low by default for some tests)
#
# type source("c:/<dir>/R.R") to start the test

runs <- 3			# Number of times the tests are executed
times <- rep(0, 15); dim(times) <- c(5,3)
require(Matrix)
options(object.size=3D100000000)

cat("   R Benchmark\n")
cat("   =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D\n")
cat(c("Number of times each test is run__________________________: ", =
runs))
cat("\n\n")


cat("   I. Matrix calculation\n")
cat("   ---------------------\n")
flush.console()

# (1)
cumulate <- 0; a <- 0; b <- 0
for (i in 1:runs) {
  timing <- system.time({
    a <- abs(matrix(rnorm(1200*1200, sd=3D0.1), ncol=3D1200, =
nrow=3D1200));
    b <- t(a);
    dim(b) <- c(600, 2400);
    a <- t(b)
  })[3]
  cumulate <- cumulate + timing
}
timing <- cumulate/runs
times[1, 1] <- timing
cat(c("Creation, transp., deformation of a 1200x1200 matrix (sec): ", =
timing, "\n"))
remove("a", "b")
flush.console()

# (2)
cumulate <- 0; b <- 0
for (i in 1:runs) {
  a <- abs(matrix(rnorm(1250*1250, sd=3D0.5), ncol=3D1250, =
nrow=3D1250));
  timing <- system.time({=20
    b <- a^1000=20
  })[3]
  cumulate <- cumulate + timing
}
timing <- cumulate/runs
times[2, 1] <- timing
cat(c("1250x1250 normal distributed random matrix ^1000____ (sec): ", =
timing, "\n"))
remove("a", "b")
flush.console()

# (3)
cumulate <- 0; b <- 0
for (i in 1:runs) {
  a <- rnorm(1100000)
  timing <- system.time({
    b <- sort(a)
  })[3]
  cumulate <- cumulate + timing
}
timing <- cumulate/runs
times[3, 1] <- timing
cat(c("Sorting of 1,100,000 random values__________________ (sec): ", =
timing, "\n"))
remove("a", "b")
flush.console()

# (4)
cumulate <- 0; b <- 0
for (i in 1:runs) {
  a <- rnorm(550*550); dim(a) <- c(550, 550)
  timing <- system.time({
    b <- crossprod(a, a)		# equivalent to: b <- t(a) %*% a
  })[3]
  cumulate <- cumulate + timing
}
timing <- cumulate/runs
times[4, 1] <- timing
cat(c("550x550 cross-product matrix (b =3D a' * a)___________ (sec): ", =
timing, "\n"))
remove("a", "b")
flush.console()

# (5)
cumulate <- 0; c <- 0; qra <-0
for (i in 1:runs) {
  a <- rnorm(700*700); dim(a) <- c(700,700)
  b <- 1:700
  timing <- system.time({
    qra <- qr(a, tol =3D 1e-10);
    c <- qr.coef(qra, b)
    #Rem: a little faster than c <- lsfit(a, b, inter=3DF)$coefficients
  })[3]
  cumulate <- cumulate + timing
}
timing <- cumulate/runs
times[5, 1] <- timing
cat(c("Linear regression over a 700x700 matrix (c =3D a \\ b') (sec): ", =
timing, "\n"))
remove("a", "b", "c", "qra")
flush.console()

times[ , 1] <- sort(times[ , 1])
cat("                      =
--------------------------------------------\n")
cat(c("                      Trimmed mean (2 extremes eliminated): ", =
mean(times[2:4, 1]), "\n\n"))

cat("   II. Matrix functions\n")
cat("   --------------------\n")
flush.console()

# (1)
cumulate <- 0; b <- 0
for (i in 1:runs) {
  a <- rnorm(900000)
  timing <- system.time({
    b <- fft(a)
  })[3]
  cumulate <- cumulate + timing
}
timing <- cumulate/runs
times[1, 2] <- timing
cat(c("FFT over 900,000 random values______________________ (sec): ", =
timing, "\n"))
remove("a", "b")
flush.console()

# (2)
cumulate <- 0; b <- 0
for (i in 1:runs) {
  a <- rnorm(220*220); dim(a) <- c(220, 220)
  Matrix.class(a)
  timing <- system.time({
    b <- eigen.Matrix(a, vectors =3D F)$Value
    # Rem: b <- eigen.default(a, vectors =3D F)$Value is slower!
  })[3]
  cumulate <- cumulate + timing
}
timing <- cumulate/runs
times[2, 2] <- timing
cat(c("Eigenvalues of a 220x220 random matrix______________ (sec): ", =
timing, "\n"))
remove("a", "b")
flush.console()

# (3)
cumulate <- 0; b <- 0
for (i in 1:runs) {
  a <- rnorm(750*750); dim(a) <- c(750, 750)
  Matrix.class(a)
  timing <- system.time({
    b <- det.Matrix(a, logarithm=3DF)
    # Rem: b <- det.default(a) is slower!
  })[3]
  cumulate <- cumulate + timing
}
timing <- cumulate/runs
times[3, 2] <- timing
cat(c("Determinant of a 750x750 random matrix______________ (sec): ", =
timing, "\n"))
remove("a", "b")
flush.console()

# (4)
cumulate <- 0; b <- 0
for (i in 1:runs) {
  a <- rnorm(1000*1000); dim(a) <- c(1000, 1000)
  a <- crossprod(a, a)
  timing <- system.time({
    b <- chol(a)
  })[3]
  cumulate <- cumulate + timing
}
timing <- cumulate/runs
times[4, 2] <- timing
cat(c("Cholesky decomposition of a 1000x1000 matrix________ (sec): ", =
timing, "\n"))
remove("a", "b")
flush.console()

# (5)
cumulate <- 0; b <- 0
for (i in 1:runs) {
  a <- rnorm(500*500); dim(a) <- c(500, 500)
  timing <- system.time({
    b <- qr.solve(a)
    # Rem: a little faster than b <- solve(a)
  })[3]
  cumulate <- cumulate + timing
}
timing <- cumulate/runs
times[5, 2] <- timing
cat(c("Inverse of a 500x500 random matrix__________________ (sec): ", =
timing, "\n"))
remove("a", "b")
flush.console()

times[ , 2] <- sort(times[ , 2])
cat("                      =
--------------------------------------------\n")
cat(c("                      Trimmed mean (2 extremes eliminated): ", =
mean(times[2:4, 2]), "\n\n"))

cat("   III. Programmation\n")
cat("   ------------------\n")
flush.console()

# (1)
cumulate <- 0; a <- 0; b <- 0; phi <- 1.6180339887498949
for (i in 1:runs) {
  a <- floor(runif(225000, max=3D1000))
  timing <- system.time({
    b <- (phi^a - (-phi)^(-a))/sqrt(5)
  })[3]
  cumulate <- cumulate + timing
}
timing <- cumulate/runs
times[1, 3] <- timing
cat(c("225,000 Fibonacci numbers calculation (vector calc)_ (sec): ", =
timing, "\n"))
remove("a", "b", "phi")
flush.console()

# (2)
cumulate <- 0; a <- 1500; b <- 0
for (i in 1:runs) {
  timing <- system.time({
    b <- rep(1:a, a); dim(b) <- c(a, a);
    b <- 1 / (t(b) + 0:(a-1))
    # Rem: this is twice as fast as the following code proposed by R =
programmers
    # a <- 1:a; b <- 1 / outer(a - 1, a, "+")
  })[3]
  cumulate <- cumulate + timing
}
timing <- cumulate/runs
times[2, 3] <- timing
cat(c("Creation of a 1500x1500 Hilbert matrix (matrix calc) (sec): ", =
timing, "\n"))
remove("a", "b")
flush.console()

# (3)
cumulate <- 0; c <- 0
gcd2 <- function(x, y) {if (sum(y > 1.0E-4) =3D=3D 0) x else {y[y =3D=3D =
0] <- x[y =3D=3D 0]; gcd2(y, x %% y)}}
for (i in 1:runs) {
  a <- ceiling(runif(35000, max=3D1000))
  b <- ceiling(runif(35000, max=3D1000))
  timing <- system.time({	 =20
    c <- gcd2(a, b)                            # gcd2 is a recursive =
function
  })[3]
  cumulate <- cumulate + timing
}
timing <- cumulate/runs
times[3, 3] <- timing
cat(c("Grand common divisors of 35,000 pairs (recursion)___ (sec): ", =
timing, "\n"))
remove("a", "b", "c", "gcd2")
flush.console()

# (4)
cumulate <- 0; b <- 0
for (i in 1:runs) {
  b <- rep(0, 220*220); dim(b) <- c(220, 220)
  timing <- system.time({
  	# Rem: there are faster ways to do this
  	# but here we want to time loops (220*220 'for' loops)!=20
    for (j in 1:220) {
      for (k in 1:220) {
        b[k,j] <- abs(j - k) + 1
      }
    }
  })[3]
  cumulate <- cumulate + timing
}
timing <- cumulate/runs
times[4, 3] <- timing
cat(c("Creation of a 220x220 Toeplitz matrix (loops)_______ (sec): ", =
timing, "\n"))
remove("b", "j", "k")
flush.console()

# (5)
cumulate <- 0; p <- 0; vt <- 0; vr <- 0; vrt <- 0; rvt <- 0; RV <- 0; j =
<- 0; k <- 0;
x2 <- 0; R <- 0; Rxx <- 0; Ryy <- 0; Rxy <- 0; Ryx <- 0; Rvmax <- 0
# Calculate the trace of a matrix (sum of its diagonal elements)
Trace <- function(y) {sum(c(y)[1 + 0:(min(dim(y)) - 1) * (dim(y)[1] + =
1)], na.rm=3DFALSE)}
for (i in 1:runs) {
  x <- abs(rnorm(22*22)); dim(x) <- c(22, 22)
  timing <- system.time({
    # Calculation of Escoufier's equivalent vectors
    p <- ncol(x)
    vt <- 1:p                                  # Variables to test
    vr <- NULL                                 # Result: ordered =
variables
    RV <- 1:p                                  # Result: correlations
    vrt <- NULL
    for (j in 1:p) {                           # loop on the variable =
number
      Rvmax <- 0
      for (k in 1:(p-j+1)) {                   # loop on the variables
        x2 <- cbind(x, x[,vr], x[,vt[k]])
        R <- cor(x2)                           # Correlations table
        Ryy <- R[1:p, 1:p]
        Rxx <- R[(p+1):(p+j), (p+1):(p+j)]
        Rxy <- R[(p+1):(p+j), 1:p]
        Ryx <- t(Rxy)
        rvt <- Trace(Ryx %*% Rxy) / sqrt(Trace(Ryy %*% Ryy) * Trace(Rxx =
%*% Rxx)) # RV calculation
        if (rvt > Rvmax) {
          Rvmax <- rvt                         # test of RV
          vrt <- vt[k]                         # temporary held variable
        }
      }
      vr[j] <- vrt                             # Result: variable
      RV[j] <- Rvmax                           # Result: correlation
      vt <- vt[vt!=3Dvr[j]]                      # reidentify variables =
to test
    }
  })[3]
  cumulate <- cumulate + timing
}
times[5, 3] <- timing
cat(c("Escoufier's method on a 22x22 matrix (mixed)________ (sec): ", =
timing, "\n"))
remove("x", "p", "vt", "vr", "vrt", "rvt", "RV", "j", "k")
remove("x2", "R", "Rxx", "Ryy", "Rxy", "Ryx", "Rvmax", "Trace")=20
flush.console()

times[ , 3] <- sort(times[ , 3])
cat("                      =
--------------------------------------------\n")
cat(c("                      Trimmed mean (2 extremes eliminated): ", =
mean(times[2:4, 3]), "\n\n\n"))

cat(c("Total time for all 15 tests_________________________ (sec): ", =
sum(times), "\n"))
cat(c("Overall mean (sum of I, II and III trimmed means/3)_ (sec): ", =
mean(times[2:4, ]), "\n"))
remove("cumulate", "timing", "times", "runs", "i")
cat("                      --- End of test ---\n\n")  =20

------=_NextPart_000_0025_01C0CFDF.3FCC3CA0--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


