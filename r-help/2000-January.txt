From maechler at stat.math.ethz.ch  Sat Jan  1 12:54:47 2000
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Sat, 1 Jan 2000 12:54:47 +0100 (MET)
Subject: [R] Re: Tests in linear regression
In-Reply-To: <386A0BE9.30EDE558@teleline.es>
References: <386A0BE9.30EDE558@teleline.es>
Message-ID: <14445.60167.231909.930472@gargle.gargle.HOWL>

>>>>> "FrSa" == SABIDO =?iso-8859-1?Q?MART=CDN?= <SABIDO> writes:

    FrSa> Hello. I am a student from Spain. We are working on 'R' (a
    FrSa> programming environment for data analysis and graphics). Our
    FrSa> teacher has told as to make a job about tests in non complet rank
    FrSa> linear regresion models (I hope you could understand this), and I
    FrSa> wonder if you could help us in any way (for example to find an
    FrSa> easy way to get the p-value (our test is b1=...=bq, where q is
    FrSa> less than number of parameters)). Anything you could do for us it
    FrSa> would be great. Thank you for everything, and merry christmas.
    FrSa> Best wishes, Francisco Sabido.

Dear Francisco,

I think everything you need is already part of R:

  summary(lm.sml <- lm(y ~ x1))
  summary(lm.big <- lm(y ~ x1 + x2 + x3 + x4))

  anova(lm.sml, lm.big)

now will do a test of   b2 = b3 = b4 = 0
if b_j is the coefficient of x_j.

Look at the online help  ?lm  and ?anova
and at 
    demo(lm.glm)
where models "l1" and "l0" are compared that way.

---------- ---------- ----------
   Happy new year to everyone!
---------- ---------- ----------

Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From BXC at novo.dk  Mon Jan  3 10:08:34 2000
From: BXC at novo.dk (BXC (Bendix Carstensen))
Date: Mon, 3 Jan 2000 10:08:34 +0100 
Subject: [R] Rounding in date.mdy from library(date)
Message-ID: <D5A7D734C9C5D211B9E30008C7892302DEE7FD@exdkba03.novo.dk>

The date library contains a function date.mdy that converts a number
D to the date (month,date,year as a list) at D days after 1 Jan 1960.
This a convention that fits in with SASs.

The logic would be that the result was the date at D days after
1 Jan 1960 00:00:00 (which is a POINT in time as opposed to a date which 
is an interval), so that any D with 2<=D<3 was rounded to 3 Jan 1960
and so on. This is because at any time D days (i.e. D*24h) after 
1.1.1960:00:00 with 2<=D<3 we would call the date "3 Jan 1960".

I cannot decipher the algorithm from the code in the function, but the 
rounding procedure certainly produces some funny results, as the following 
piece of clumsy code demonstrates:

dex <- function(jul.dat,N=1000)
       {
       # Functions that finds the fraction to add to a number
       # to make the date.mdy round upwards (should be 1) 
       (0:N)[(abs(diff(date.mdy(jul.dat+0:N/N)$day))>0.5)]/N
       }
jd <- 0:200 * 300
rf <- 0
for (i in 1:201) rf[i] <- dex(jd[i])
plot(jd,rf,pch=".")

The obvous workaround would be to mask date.mdy by:

real.date.mdy <- function(jd) date.mdy(floor(jd))

Is this an error or is there a feature somewhere that I am missing?

Bendix Carstensen

                      \\\|///
                     \\ - - /
                     (  @ @ )  
+------------------o00o-(_)-o00o-------------------------+
| Bendix Carstensen                 tel: +45 44 43 87 38 |
| Senior Statistician               SDC: +45 44 43 90 42 |
| Steno Diabetes Center             fax: +45 44 43 73 13 |
| Niels Steensens Vej 2              e-mail: bxc at novo.dk |
| DK - 2820 Gentofte       http://www.biostat.ku.dk/~bxc |
| Denmark                   Ooooo                        |
+------------------ooooO----(   )------------------------+
                   (   )     ) /
                    \ (     (_/
                     \_)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From BXC at novo.dk  Mon Jan  3 11:05:16 2000
From: BXC at novo.dk (BXC (Bendix Carstensen))
Date: Mon, 3 Jan 2000 11:05:16 +0100 
Subject: [R] Rounding in date.mdy from library(date)
Message-ID: <D5A7D734C9C5D211B9E30008C7892302DEE7FF@exdkba03.novo.dk>

> The date library contains a function date.mdy that converts a number
> D to the date (month,date,year as a list) at D days after 1 Jan 1960.
> This a convention that fits in with SASs.
> 
> The logic would be that the result was the date at D days after
> 1 Jan 1960 00:00:00 (which is a POINT in time as opposed to a date which 
> is an interval), so that any D with 2<=D<3 was rounded to 3 Jan 1960
> and so on. This is because at any time D days (i.e. D*24h) after 
> 1.1.1960:00:00 with 2<=D<3 we would call the date "3 Jan 1960".
> 
> I cannot decipher the algorithm from the code in the function, but the 
> rounding procedure certainly produces some funny results, as the following
> 
> piece of clumsy code demonstrates:
> 
> dex <- function(jul.dat,N=1000)
>        {
>        # Functions that finds the fraction to add to a number
>        # to make the date.mdy round upwards (should be 1) 
>        (0:N)[(abs(diff(date.mdy(jul.dat+0:N/N)$day))>0.5)]/N
>        }
> jd <- 0:200 * 300
> rf <- 0
> for (i in 1:201) rf[i] <- dex(jd[i])
> plot(jd,rf,pch=".")
> 
> The obvous workaround would be to mask date.mdy by:
> 
> real.date.mdy <- function(jd) date.mdy(floor(jd))
> 
> Is this an error or is there a feature somewhere that I am missing?
> 
> Bendix Carstensen
> 
>                       \\\|///
>                      \\ - - /
>                      (  @ @ )  
> +------------------o00o-(_)-o00o-------------------------+
> | Bendix Carstensen                 tel: +45 44 43 87 38 |
> | Senior Statistician               SDC: +45 44 43 90 42 |
> | Steno Diabetes Center             fax: +45 44 43 73 13 |
> | Niels Steensens Vej 2              e-mail: bxc at novo.dk |
> | DK - 2820 Gentofte       http://www.biostat.ku.dk/~bxc |
> | Denmark                   Ooooo                        |
> +------------------ooooO----(   )------------------------+
>                    (   )     ) /
>                     \ (     (_/
>                      \_)
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jens.oehlschlaegel-akiyoshi at mdfactory.de  Mon Jan  3 13:42:57 2000
From: jens.oehlschlaegel-akiyoshi at mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Mon, 3 Jan 2000 13:42:57 +0100
Subject: [R] scan empty strings or data without NAs??
Message-ID: <000901bf55e8$10c93a60$a9021aac@joelschlaegel>



I just discovered that it is not possible to read in data with scan() and to
have no na.strings at all

  scan(na.strings=NULL)

gives an error message "invalid na.strings value".

Furthermore it is not possible to read in empty strings, without automatic
conversion to 'NA', because of

    if (!missing(sep))
        na.strings <- c(na.strings, "")

within scan()

As scan() is a very basic function in R, I wish it would allow specifying
na.strings=NULL and importing empty strings. Is there any specific reason
not to allow this ?

Regards



--
Dr. Jens Oehlschl?gel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 M?nchen

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

Standard Disclaimers: Opinions expressed here are personal
and are not otherwise represented.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From partha_bagchi at hgsi.com  Mon Jan  3 16:15:04 2000
From: partha_bagchi at hgsi.com (partha_bagchi@hgsi.com)
Date: Mon, 3 Jan 2000 10:15:04 -0500
Subject: [R] Job Advertisement
Message-ID: <OF5F45C418.7B577E8A-ON8525685B.005399F9@hgsi.com>

Greetings and a Happy New Year!
Are there any restrictions on the list regarding job advertisements (there
does not seem to be one on the S+ list)?
TIA.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Jan  3 17:12:16 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 3 Jan 2000 16:12:16 +0000 (GMT)
Subject: [R] Job Advertisement
In-Reply-To: <OF5F45C418.7B577E8A-ON8525685B.005399F9@hgsi.com>
Message-ID: <Pine.GSO.4.05.10001031607390.14230-100000@auk.stats>

On Mon, 3 Jan 2000 partha_bagchi at hgsi.com wrote:

> Greetings and a Happy New Year!
> Are there any restrictions on the list regarding job advertisements (there
> does not seem to be one on the S+ list)?

There are restrictions on the S-news list. Job announcements are supposed
to be brief pointers to further information, and relevant (that is S-PLUS
skills are required), from memory (as the information page is unresponsive
right now).

I think something similar would be appropriate here.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From partha_bagchi at hgsi.com  Mon Jan  3 17:53:26 2000
From: partha_bagchi at hgsi.com (partha_bagchi@hgsi.com)
Date: Mon, 3 Jan 2000 11:53:26 -0500
Subject: [R] Job Advertisement
Message-ID: <OF3C58AF24.4477768A-ON8525685B.005C7D00@hgsi.com>


Thanks for the information. I have informed our people to be brief and to
indicate that we are looking for someone with R or Splus as well as SAS
experience.



                                                                                                       
                    Prof Brian D                                                                       
                    Ripley               To:     partha_bagchi at hgsi.com                                
                    <ripley at stats        cc:     r-help at stat.math.ethz.ch                              
                    .ox.ac.uk>           Subject:     Re: [R] Job Advertisement                        
                    Sent by:                                                                           
                    ripley at auk.st                                                                      
                    ats                                                                                
                                                                                                       
                                                                                                       
                    01/03/00                                                                           
                    11:12 AM                                                                           
                                                                                                       
                                                                                                       




On Mon, 3 Jan 2000 partha_bagchi at hgsi.com wrote:

> Greetings and a Happy New Year!
> Are there any restrictions on the list regarding job advertisements
(there
> does not seem to be one on the S+ list)?

There are restrictions on the S-news list. Job announcements are supposed
to be brief pointers to further information, and relevant (that is S-PLUS
skills are required), from memory (as the information page is unresponsive
right now).

I think something similar would be appropriate here.

--
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jbarnett at wi.mit.edu  Mon Jan  3 18:01:13 2000
From: jbarnett at wi.mit.edu (John D. Barnett)
Date: Mon, 03 Jan 2000 12:01:13 -0500
Subject: [R] read.table, input methods
Message-ID: <3870D5D9.389C870D@wi.mit.edu>

Hi-

I'm trying to read data into R that was exported from Excel, as
tab-delimited text.  There are some empty cells in the spreadsheet,
which I'd like to treat as missing values.

I'd like to specify to read.table to use a *single* tab character as the
record separator, but I can't seem to do this.  First of all, how can I
get a tab character in R?  Second, is it possible to force read.table
not to skip multiple separators?

I could preprocess the text, say in perl, to insert missing value
strings where needed; is this my only recourse?

Thanks for your help-- both now and for all my previous questions!  I'm
most appreciative.

-John

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Mon Jan  3 18:10:06 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Mon, 3 Jan 2000 17:10:06 +0000 (GMT)
Subject: [R] Rounding in date.mdy from library(date)
In-Reply-To: <D5A7D734C9C5D211B9E30008C7892302DEE7FD@exdkba03.novo.dk>
Message-ID: <Pine.LNX.4.10.10001031658160.22927-100000@gimel.biostat.washington.edu>

On Mon, 3 Jan 2000, BXC (Bendix Carstensen) wrote:

> The date library contains a function date.mdy that converts a number
> D to the date (month,date,year as a list) at D days after 1 Jan 1960.
> This a convention that fits in with SASs.
> 
> The logic would be that the result was the date at D days after
> 1 Jan 1960 00:00:00 (which is a POINT in time as opposed to a date which 
> is an interval), so that any D with 2<=D<3 was rounded to 3 Jan 1960
> and so on. This is because at any time D days (i.e. D*24h) after 
> 1.1.1960:00:00 with 2<=D<3 we would call the date "3 Jan 1960".

I think the date package is only intended to handle integers. This is
partly because date.mdy is _not_ a function for converting numbers to
dates, it is a function for converting dates to a printable form.
 
If you look at as.date() the truncation is already done there,

R> as.date(0)
[1] 1Jan60
R> as.date(0.9)
[1] 1Jan60

so a bona fide date object will always have an integer as the time since
1/1/1960. In that sense the workaround is to only use date.mdy on dates,
not on numbers.

I agree that it might be worth extending date to allow times in
addition to dates (in which case it probably would have to have
information on time zones as well).  The tricky part would be parsing
time information in character form, but there is probably GNU code for
this.

	-thomas	


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Mon Jan  3 18:16:21 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Mon, 3 Jan 2000 17:16:21 +0000 (GMT)
Subject: [R] read.table, input methods
In-Reply-To: <3870D5D9.389C870D@wi.mit.edu>
Message-ID: <Pine.LNX.4.10.10001031711290.22927-100000@gimel.biostat.washington.edu>

On Mon, 3 Jan 2000, John D. Barnett wrote:

> Hi-
> 
> I'm trying to read data into R that was exported from Excel, as
> tab-delimited text.  There are some empty cells in the spreadsheet,
> which I'd like to treat as missing values.
> 
> I'd like to specify to read.table to use a *single* tab character as the
> record separator, but I can't seem to do this.  First of all, how can I
> get a tab character in R?  Second, is it possible to force read.table
> not to skip multiple separators?

You can specify tabs in C format, with \t
eg
R> cat("a\tb\n")
a       b

read.table will generally skip multiple separators

I tried the following file (where the tabs are actually tabs)

1               2
3       4       5

R> read.table("/tmp/tmp",sep="\t")
  V1 V2 V3
1  1 NA  2
2  3  4  5



You might also be able to import data directly from Excel into R for
Windows using the COM server, but I haven't tried this.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From partha_bagchi at hgsi.com  Mon Jan  3 18:56:56 2000
From: partha_bagchi at hgsi.com (partha_bagchi@hgsi.com)
Date: Mon, 3 Jan 2000 12:56:56 -0500
Subject: [R] Job Advertisement
Message-ID: <OFFD6A68DB.00EBB493-ON8525685B.0062646A@hgsi.com>


Prof. Ripley,
Thanks for the information. I have informed our people to be brief and to
indicate that we are looking for someone with R or Splus as well as SAS
experience.

PS: I replied to you directly, but the email has bounced twice so far from
your server with user unknown.



                                                                                                              
                    Prof Brian D Ripley                                                                       
                    <ripley at stats.ox.ac.        To:     partha_bagchi at hgsi.com                                
                    uk>                         cc:     r-help at stat.math.ethz.ch                              
                    Sent by:                    Subject:     Re: [R] Job Advertisement                        
                    owner-r-help at stat.ma                                                                      
                    th.ethz.ch                                                                                
                                                                                                              
                                                                                                              
                    01/03/00 11:12 AM                                                                         
                                                                                                              
                                                                                                              




On Mon, 3 Jan 2000 partha_bagchi at hgsi.com wrote:

> Greetings and a Happy New Year!
> Are there any restrictions on the list regarding job advertisements
(there
> does not seem to be one on the S+ list)?

There are restrictions on the S-news list. Job announcements are supposed
to be brief pointers to further information, and relevant (that is S-PLUS
skills are required), from memory (as the information page is unresponsive
right now).

I think something similar would be appropriate here.

--
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._._



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kye at ams.sunysb.edu  Mon Jan  3 23:03:31 2000
From: kye at ams.sunysb.edu (Kenny Ye)
Date: Mon, 3 Jan 2000 17:03:31 -0500 (EST)
Subject: [R] leaps
Message-ID: <Pine.SO4.4.02.10001031700270.13387-100000@fisher>


Hi, there,

S+ has a function leaps which can be used for criterion based model
selection. Is there an equivalent function in R?

thanks in advance.

Kenny Ye
Assistant Professor
Department of Applied Math and Statistics
SUNY at  Stony Brook
Stony Brook, New York 11794-3600
(516)632 9344

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bates at stat.wisc.edu  Mon Jan  3 23:31:55 2000
From: bates at stat.wisc.edu (Douglas Bates)
Date: 03 Jan 2000 16:31:55 -0600
Subject: [R] leaps
In-Reply-To: Kenny Ye's message of "Mon, 3 Jan 2000 17:03:31 -0500 (EST)"
References: <Pine.SO4.4.02.10001031700270.13387-100000@fisher>
Message-ID: <6rg0welrc4.fsf@franz.stat.wisc.edu>

Kenny Ye <kye at ams.sunysb.edu> writes:

> S+ has a function leaps which can be used for criterion based model
> selection. Is there an equivalent function in R?

Yes.  It is in the `leaps' library.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Jan  3 23:38:46 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 3 Jan 2000 22:38:46 +0000 (GMT)
Subject: [R] leaps
In-Reply-To: <Pine.SO4.4.02.10001031700270.13387-100000@fisher>
Message-ID: <Pine.GSO.4.05.10001032235520.10029-100000@auk.stats>

On Mon, 3 Jan 2000, Kenny Ye wrote:

> S+ has a function leaps which can be used for criterion based model
> selection. Is there an equivalent function in R?

leaps, in package leaps by Thomas Lumley from CRAN. (Actually, all leaps
will do in either S or R is to find regression models of a given size(s)
with small RSS, which is a lot less than `criterion based model selection':
step() comes closer to that definition.)


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Mon Jan  3 23:45:01 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Mon, 3 Jan 2000 22:45:01 +0000 (GMT)
Subject: [R] leaps
In-Reply-To: <Pine.SO4.4.02.10001031700270.13387-100000@fisher>
Message-ID: <Pine.LNX.4.10.10001032244250.22927-100000@gimel.biostat.washington.edu>

On Mon, 3 Jan 2000, Kenny Ye wrote:

> 
> Hi, there,
> 
> S+ has a function leaps which can be used for criterion based model
> selection. Is there an equivalent function in R?

In package leaps.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jimrc at gauss.math.montana.edu  Tue Jan  4 00:59:04 2000
From: jimrc at gauss.math.montana.edu (Jim Robison-Cox)
Date: Mon, 3 Jan 2000 16:59:04 -0700 (MST)
Subject: [R] leaps
In-Reply-To: <Pine.SO4.4.02.10001031700270.13387-100000@fisher>
Message-ID: <Pine.GSO.4.02.10001031656310.29475-100000@gauss.math.montana.edu>

On Mon, 3 Jan 2000, Kenny Ye wrote:
> 
> Hi, there,
> 
> S+ has a function leaps which can be used for criterion based model
> selection. Is there an equivalent function in R?

  Yes.  It's in the latest version (and goes back to almost a year ago, if
I recall correctly).  You should check with help.start() before asking, to
avoid embarassment.  When you get the help, notice that subsets() is
another function with similar output.  

Jim 

Jim Robison-Cox               ____________    
Department of Math Sciences  |            |       phone: (406)994-5340
2-214 Wilson Hall             \   BZN, MT |       FAX:   (406)994-1789
Montana State University       |  *_______|
Bozeman, MT 59717-2400          \_|      e-mail: jimrc at math.montana.edu 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pete at seul.org  Tue Jan  4 05:10:07 2000
From: pete at seul.org (Pete St. Onge)
Date: Mon, 03 Jan 2000 23:10:07 -0500
Subject: [R] read.table, input methods
References: <3870D5D9.389C870D@wi.mit.edu>
Message-ID: <3871729F.1CF16DC6@seul.org>

John,

> I'm trying to read data into R that was exported from Excel, as
> tab-delimited text.  There are some empty cells in the spreadsheet,
> which I'd like to treat as missing values.

> I could preprocess the text, say in perl, to insert missing value
> strings where needed; is this my only recourse?

     Suggest you do it before you export the spreadsheet ...

     If you still have the original spreadsheet, block out the active
area containing your data, and search and replace empty cells with a
character you can later specify as being NA. Caveat: make sure that the
'find whole cell' option is checked in the find and replace dialog - you
could otherwise overwrite all of your data...
     Doing it this way means less headache for you, requiring only the
line with the read.table statement - and no post-import manipulations
should be needed.

     Hope this helps,

     Pete

--
Pete St. Onge
pete at seul.org
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pete at seul.org  Tue Jan  4 05:25:50 2000
From: pete at seul.org (Pete St. Onge)
Date: Mon, 03 Jan 2000 23:25:50 -0500
Subject: [R] correlation matricies: getting p-values?
Message-ID: <3871764E.9CBA2471@seul.org>

I have to admit that I'm at a bit of a loss here; any pointers would be
greatly appreciated.

I've been making correlation matricies from some of my datasets, and
have been instructed to get the probability values for each of these
correlations.

I've checked the online help for info on both the cor and cov functions,
but I was unable to find any relevant info on finding how to obtain
these probability values. 

[A quick search of the message bodies (for correlation) in email
messages to R-help over the last few months didn't turn up anything
relevant either, but I did find some neat posts on spatial
autocorrelation.]

Any suggestions would be most welcome.

Thanks in advance,

Pete

-- 
Pete St. Onge
pete at seul.org
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From William.Venables at cmis.CSIRO.AU  Tue Jan  4 06:05:39 2000
From: William.Venables at cmis.CSIRO.AU (Bill Venables)
Date: Tue, 04 Jan 2000 15:05:39 +1000
Subject: [R] correlation matricies: getting p-values? 
In-Reply-To: Your message of "Mon, 03 Jan 2000 23:25:50 EST."
             <3871764E.9CBA2471@seul.org> 
Message-ID: <200001040505.QAA15386@snowy.nsw.cmis.CSIRO.AU>

> I have to admit that I'm at a bit of a loss here; any pointers would be
> greatly appreciated.
> 
> I've been making correlation matricies from some of my datasets, and
> have been instructed to get the probability values for each of these
> correlations.

To be precise I take it this means the significance probability,
that is the chance of getting a value of the correlation as far
from zero in absolute value or more so as the one you got...

> 
> I've checked the online help for info on both the cor and cov functions,
> but I was unable to find any relevant info on finding how to obtain
> these probability values. 

The connexion between r and t is known to be

    t = r*sqrt(n - 2)/(1 - r^2)

that is, F = t^2 = r^2*(n-2)/(1 - r^2) ~ F(1, n-2)

This allows you to find the probabilities in a line or two of code.
Here is the calculation as a function that puts the correlations
below the diagonal and the significance probabilities above.

cor.prob <- function(X, dfr = nrow(X) - 2) {
	 R <- cor(X)
	 above <- row(R) < col(R)
	 r2 <- R[above]^2
	 Fstat <- r2 * dfr / (1 - r2)
	 R[above] <- 1 - pf(Fstat, 1, dfr)
	 R
}

> X <- matrix(rnorm(1000), 200, 5)
> cor.prob(X)
          [,1]      [,2]     [,3]      [,4]    [,5]
[1,]  1.000000  0.359702 0.872159  0.296850 0.07346
[2,] -0.065106  1.000000 0.111743  0.569198 0.41012
[3,] -0.011450  0.112807 1.000000  0.386409 0.47407
[4,]  0.074129  0.040488 0.061574  1.000000 0.40357
[5,]  0.126853 -0.058560 0.050906 -0.059382 1.00000

You can spot-check the results by regression, for example:

> X <- as.data.frame(X)
> names(X)
[1] "V1" "V2" "V3" "V4" "V5"
> summary(lm(V2 ~ V1, X))

....

Residual standard error: 1 on 198 degrees of freedom
Multiple R-Squared: 0.00424,	Adjusted R-squared: -0.00079 
F-statistic: 0.843 on 1 and 198 degrees of freedom,	p-value: 0.36 

-------

The final p-value compares with  0.359702 in the 1,2 position of
the matrix.

This assumes you have a common degrees of freedom (n-2) for all
correlations in the table.  If you are using something like
"pairwise deletion" of missing values you have a bit more work to
do (and I hope your matrix comes out as positive definite - there
is no guarantee it will).

-- 
-----------------------------------------------------------------
Bill Venables, Statistician, CMIS Environmetrics Project.

Physical address:                            Postal address:
CSIRO Marine Laboratories,                   PO Box 120,       
233 Middle St, Cleveland, Queensland         Cleveland, Qld, 4163
AUSTRALIA                                    AUSTRALIA

Telephone: +61 7 3826 7251     Email: Bill.Venables at cmis.csiro.au     
      Fax: +61 7 3826 7304
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Kurt.Hornik at ci.tuwien.ac.at  Tue Jan  4 09:22:38 2000
From: Kurt.Hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 4 Jan 2000 09:22:38 +0100 (CET)
Subject: [R] Rounding in date.mdy from library(date)
In-Reply-To: <Pine.LNX.4.10.10001031658160.22927-100000@gimel.biostat.washington.edu>
References: <D5A7D734C9C5D211B9E30008C7892302DEE7FD@exdkba03.novo.dk>
	<Pine.LNX.4.10.10001031658160.22927-100000@gimel.biostat.washington.edu>
Message-ID: <14449.44494.368290.472101@aragorn.ci.tuwien.ac.at>

>>>>> Thomas Lumley writes:

> On Mon, 3 Jan 2000, BXC (Bendix Carstensen) wrote:
>> The date library contains a function date.mdy that converts a number
>> D to the date (month,date,year as a list) at D days after 1 Jan 1960.
>> This a convention that fits in with SASs.
>> 
>> The logic would be that the result was the date at D days after
>> 1 Jan 1960 00:00:00 (which is a POINT in time as opposed to a date which 
>> is an interval), so that any D with 2<=D<3 was rounded to 3 Jan 1960
>> and so on. This is because at any time D days (i.e. D*24h) after 
>> 1.1.1960:00:00 with 2<=D<3 we would call the date "3 Jan 1960".

> I think the date package is only intended to handle integers. This is
> partly because date.mdy is _not_ a function for converting numbers to
> dates, it is a function for converting dates to a printable form.
 
> If you look at as.date() the truncation is already done there,

R> as.date(0)
> [1] 1Jan60
R> as.date(0.9)
> [1] 1Jan60

> so a bona fide date object will always have an integer as the time since
> 1/1/1960. In that sense the workaround is to only use date.mdy on dates,
> not on numbers.

> I agree that it might be worth extending date to allow times in
> addition to dates (in which case it probably would have to have
> information on time zones as well).  The tricky part would be parsing
> time information in character form, but there is probably GNU code for
> this.

If you want time information as well, you can use package chron (which
does not use time zones, however).

It would certainly be nice to have something for handling dates/times
which can use strftime(3) formats.  And of course, it would make sense
to build something around a data type modelled around struct tm.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jens.oehlschlaegel-akiyoshi at mdfactory.de  Tue Jan  4 11:17:16 2000
From: jens.oehlschlaegel-akiyoshi at mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Tue, 4 Jan 2000 11:17:16 +0100
Subject: [R] R memory requirements
Message-ID: <000601bf569c$e0df4a00$a9021aac@joelschlaegel>



Hi,

can anyone explain how to find out the maximum memory a certain function
call has needed at any time during execution?

Regards


--
Dr. Jens Oehlschl?gel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 M?nchen

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

Standard Disclaimers: Opinions expressed here are personal
and are not otherwise represented.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Jan  4 12:19:58 2000
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 4 Jan 2000 11:19:58 +0000 (GMT)
Subject: [R] R memory requirements
Message-ID: <200001041119.LAA22634@toucan.stats.ox.ac.uk>


> From: "Jens Oehlschl?gel-Akiyoshi" <jens.oehlschlaegel-akiyoshi at mdfactory.de>
> Subject: [R] R memory requirements
> Date: Tue, 4 Jan 2000 11:17:16 +0100
> 
> can anyone explain how to find out the maximum memory a certain function
> call has needed at any time during execution?

As far as I understand it, that's not really relevant, as garbage
collection is only invoked when needed. (In other words, a call may use
far more memory than it needs if the memory is there.)

Using gcinfo(TRUE) will tell you how much gets used when garbage
collection is invoked and so may give a rough idea, as the answer is
between the largest value that gives and the maximum available.

Brian

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From peter at esb.ucp.pt  Tue Jan  4 12:36:34 2000
From: peter at esb.ucp.pt (Peter Ho)
Date: Tue, 04 Jan 2000 11:36:34 +0000
Subject: [R] Stepwise logistic discrimination - II
Message-ID: <3871DB41.1AEC0BFB@esb.ucp.pt>

I apologise for writing again about the problem with using stepAIC +
multinom, but I think the reason why I had it in the first place is
perhaps there may be a bug in either stepAIC or multinom.
Just to repeat the problem, I have 126 variables and 99 cases. I don't
know if the large number of variables could be the problem. Of couse the
reason for doing a stepwise method is to reduce this number. Anyway,
after getting the error message : " arguments imply differing number of
rows: 1, 126", I decided to run the same procedure with just 21
variables. The results are in setp20.txt. This removed 3 variables. This
seemed to indicate that there was no problem with using  stepAIC +
multinom. I then repeated the procedure for the 126 variables by
replacing the "~" by the full list of variables "F25 +F26
+........+F150". StepAIC removed the first 2 variables then produced the
same error message as before. See setp126.txt

Is this a bug? Is there a maximum number of variables which stepAIC can
handle?



Peter
--------------------
Peter Ho
Escola Superior de Biotecnologia
Rua Dr. Ant?nio Bernardino de Almeida
4200 Porto
Tel: ++351-22-5580043

-------------- next part --------------
> nose20s.mu <- multinom(Spoilage ~ FRAG25 + FRAG26 + FRAG27 + FRAG28 + FRAG29 + FRAG30 + FRAG31 + FRAG32 + FRAG33 + FRAG34 + FRAG35 + FRAG36 + FRAG37 + FRAG38 + FRAG39 + FRAG40 + FRAG41 + FRAG42 + FRAG43 + FRAG44 + FRAG45 , nose126s)
# weights:  92 (66 variable)
> nose20s.mu
Call:
multinom(formula = Spoilage ~ FRAG25 + FRAG26 + FRAG27 + FRAG28 + 
    FRAG29 + FRAG30 + FRAG31 + FRAG32 + FRAG33 + FRAG34 + FRAG35 + 
    FRAG36 + FRAG37 + FRAG38 + FRAG39 + FRAG40 + FRAG41 + FRAG42 + 
    FRAG43 + FRAG44 + FRAG45, data = nose126s)

Coefficients:
        (Intercept)        FRAG25       FRAG26        FRAG27        FRAG28
week2 -5.875869e-09 -0.0002762473 0.0002939013 -5.006443e-05 -1.974740e-07
week3  1.746245e-08 -0.0001898158 0.0001851999  4.408521e-05  1.891675e-07
week4 -1.537005e-09 -0.0000875455 0.0003595600 -9.254731e-05  4.324163e-07
             FRAG29        FRAG30        FRAG31        FRAG32       FRAG33
week2 -1.490694e-07  2.315180e-06  9.758291e-05  3.165469e-07 3.952147e-06
week3  3.518809e-07 -2.465738e-06  5.035361e-05 -2.422289e-07 2.018635e-06
week4 -1.465070e-06 -5.844817e-06 -2.273580e-05 -4.492861e-07 8.629373e-07
             FRAG34        FRAG35        FRAG36        FRAG37        FRAG38
week2 -1.292201e-05 -1.299600e-04  0.0002157680 -1.403039e-06  1.563939e-04
week3  1.370027e-06 -8.570172e-05  0.0001604013  5.836834e-05 -6.640826e-05
week4  1.036472e-04 -1.074593e-05 -0.0001013518  1.537383e-04 -1.583539e-04
             FRAG39        FRAG40        FRAG41       FRAG42        FRAG43
week2 -0.0000797642 -2.390592e-06 -7.689589e-07 1.890469e-05 -1.097805e-05
week3 -0.0001937116 -1.416947e-06 -1.447538e-05 3.001617e-05 -1.331443e-05
week4  0.0000098747 -6.936876e-06 -3.986990e-05 4.132049e-05  5.652583e-06
            FRAG44        FRAG45
week2 1.293299e-06 -2.333693e-05
week3 7.904613e-07 -1.528914e-05
week4 4.329840e-07  2.801562e-06

Residual Deviance: 144.7702 
AIC: 276.7702 
> nose20s.step <- stepAIC(nose20s.mu)
Start:  AIC= 276.77 
 Spoilage ~ FRAG25 + FRAG26 + FRAG27 + FRAG28 + FRAG29 + FRAG30 +  
    FRAG31 + FRAG32 + FRAG33 + FRAG34 + FRAG35 + FRAG36 + FRAG37 +  
    FRAG38 + FRAG39 + FRAG40 + FRAG41 + FRAG42 + FRAG43 + FRAG44 +  
    FRAG45 

# weights:  88 (63 variable)
# weights:  88 (63 variable)
# weights:  88 (63 variable)
# weights:  88 (63 variable)
# weights:  88 (63 variable)
# weights:  88 (63 variable)
# weights:  88 (63 variable)
# weights:  88 (63 variable)
# weights:  88 (63 variable)
# weights:  88 (63 variable)
# weights:  88 (63 variable)
# weights:  88 (63 variable)
# weights:  88 (63 variable)
# weights:  88 (63 variable)
# weights:  88 (63 variable)
# weights:  88 (63 variable)
# weights:  88 (63 variable)
# weights:  88 (63 variable)
# weights:  88 (63 variable)
# weights:  88 (63 variable)
# weights:  88 (63 variable)
         Df    AIC
- FRAG41  3 270.37
- FRAG29  3 272.89
- FRAG27  3 273.41
- FRAG40  3 273.74
- FRAG34  3 273.79
- FRAG30  3 273.85
- FRAG37  3 274.16
- FRAG42  3 274.49
- FRAG25  3 274.98
- FRAG36  3 275.17
- FRAG35  3 275.49
- FRAG43  3 275.54
- FRAG28  3 275.69
<none>      276.77
- FRAG38  3 277.19
- FRAG32  3 277.37
- FRAG31  3 278.68
- FRAG39  3 278.83
- FRAG26  3 281.75
- FRAG45  3 282.08
- FRAG44  3 283.98
- FRAG33  3 287.36
# weights:  88 (63 variable)

Step:  AIC= 270.37 
 Spoilage ~ FRAG25 + FRAG26 + FRAG27 + FRAG28 + FRAG29 + FRAG30 +  
    FRAG31 + FRAG32 + FRAG33 + FRAG34 + FRAG35 + FRAG36 + FRAG37 +  
    FRAG38 + FRAG39 + FRAG40 + FRAG42 + FRAG43 + FRAG44 + FRAG45 

# weights:  84 (60 variable)
# weights:  84 (60 variable)
# weights:  84 (60 variable)
# weights:  84 (60 variable)
# weights:  84 (60 variable)
# weights:  84 (60 variable)
# weights:  84 (60 variable)
# weights:  84 (60 variable)
# weights:  84 (60 variable)
# weights:  84 (60 variable)
# weights:  84 (60 variable)
# weights:  84 (60 variable)
# weights:  84 (60 variable)
# weights:  84 (60 variable)
# weights:  84 (60 variable)
# weights:  84 (60 variable)
# weights:  84 (60 variable)
# weights:  84 (60 variable)
# weights:  84 (60 variable)
# weights:  84 (60 variable)
         Df    AIC
- FRAG29  3 263.70
- FRAG40  3 264.94
- FRAG31  3 266.53
- FRAG30  3 266.88
- FRAG34  3 267.49
- FRAG27  3 267.55
- FRAG37  3 267.68
- FRAG28  3 267.79
- FRAG42  3 268.13
- FRAG43  3 268.25
- FRAG25  3 269.08
- FRAG36  3 269.61
- FRAG35  3 269.73
- FRAG32  3 270.23
<none>      270.37
- FRAG38  3 270.46
- FRAG39  3 271.21
- FRAG26  3 274.42
- FRAG45  3 275.81
- FRAG44  3 277.14
- FRAG33  3 283.03
# weights:  84 (60 variable)

Step:  AIC= 263.7 
 Spoilage ~ FRAG25 + FRAG26 + FRAG27 + FRAG28 + FRAG30 + FRAG31 +  
    FRAG32 + FRAG33 + FRAG34 + FRAG35 + FRAG36 + FRAG37 + FRAG38 +  
    FRAG39 + FRAG40 + FRAG42 + FRAG43 + FRAG44 + FRAG45 

# weights:  80 (57 variable)
# weights:  80 (57 variable)
# weights:  80 (57 variable)
# weights:  80 (57 variable)
# weights:  80 (57 variable)
# weights:  80 (57 variable)
# weights:  80 (57 variable)
# weights:  80 (57 variable)
# weights:  80 (57 variable)
# weights:  80 (57 variable)
# weights:  80 (57 variable)
# weights:  80 (57 variable)
# weights:  80 (57 variable)
# weights:  80 (57 variable)
# weights:  80 (57 variable)
# weights:  80 (57 variable)
# weights:  80 (57 variable)
# weights:  80 (57 variable)
# weights:  80 (57 variable)
         Df    AIC
- FRAG38  3 257.68
- FRAG42  3 259.54
- FRAG37  3 261.83
- FRAG35  3 263.24
- FRAG34  3 263.48
- FRAG25  3 263.51
<none>      263.70
- FRAG36  3 263.76
- FRAG27  3 264.27
- FRAG40  3 264.63
- FRAG43  3 265.36
- FRAG31  3 266.72
- FRAG39  3 267.79
- FRAG32  3 267.95
- FRAG30  3 267.98
- FRAG44  3 269.59
- FRAG26  3 269.89
- FRAG28  3 271.38
- FRAG45  3 272.77
- FRAG33  3 280.81
# weights:  80 (57 variable)

Step:  AIC= 257.68 
 Spoilage ~ FRAG25 + FRAG26 + FRAG27 + FRAG28 + FRAG30 + FRAG31 +  
    FRAG32 + FRAG33 + FRAG34 + FRAG35 + FRAG36 + FRAG37 + FRAG39 +  
    FRAG40 + FRAG42 + FRAG43 + FRAG44 + FRAG45 

# weights:  76 (54 variable)
# weights:  76 (54 variable)
# weights:  76 (54 variable)
# weights:  76 (54 variable)
# weights:  76 (54 variable)
# weights:  76 (54 variable)
# weights:  76 (54 variable)
# weights:  76 (54 variable)
# weights:  76 (54 variable)
# weights:  76 (54 variable)
# weights:  76 (54 variable)
# weights:  76 (54 variable)
# weights:  76 (54 variable)
# weights:  76 (54 variable)
# weights:  76 (54 variable)
# weights:  76 (54 variable)
# weights:  76 (54 variable)
# weights:  76 (54 variable)
         Df    AIC
<none>      257.68
- FRAG36  3 258.67
- FRAG30  3 258.82
- FRAG25  3 262.90
- FRAG42  3 263.05
- FRAG35  3 264.37
- FRAG43  3 264.63
- FRAG32  3 264.89
- FRAG37  3 265.36
- FRAG27  3 266.09
- FRAG34  3 266.36
- FRAG40  3 266.79
- FRAG31  3 267.27
- FRAG28  3 267.89
- FRAG44  3 270.42
- FRAG26  3 270.91
- FRAG45  3 272.28
- FRAG39  3 275.62
- FRAG33  3 284.95
> nose20s.step
Call:
multinom(formula = Spoilage ~ FRAG25 + FRAG26 + FRAG27 + FRAG28 + 
    FRAG30 + FRAG31 + FRAG32 + FRAG33 + FRAG34 + FRAG35 + FRAG36 + 
    FRAG37 + FRAG39 + FRAG40 + FRAG42 + FRAG43 + FRAG44 + FRAG45, 
    data = nose126s)

Coefficients:
      (Intercept)        FRAG25       FRAG26        FRAG27        FRAG28
week2  -1.5157947 -0.0002194994 0.0002842470 -2.466799e-05 -1.014998e-07
week3  19.3060768 -0.0001738133 0.0001989165  2.272838e-05  2.140365e-07
week4  -0.3392685 -0.0017064852 0.0037632213 -1.446068e-03 -3.162564e-07
             FRAG30       FRAG31        FRAG32       FRAG33        FRAG34
week2  2.245144e-06 6.619727e-05  2.247694e-07 4.091580e-06 -2.227733e-05
week3 -1.331929e-06 4.628403e-05 -4.878292e-07 2.714806e-06  8.011659e-07
week4 -7.890984e-05 9.337661e-04  2.642356e-07 1.236701e-05  4.871116e-04
             FRAG35        FRAG36       FRAG37        FRAG39        FRAG40
week2 -1.007672e-04  0.0001646577 2.661853e-05 -7.502071e-05 -1.614241e-06
week3 -9.105109e-05  0.0001238630 6.857822e-05 -1.982485e-04 -9.625837e-07
week4 -7.025223e-04 -0.0019407329 1.566509e-03 -4.168799e-04 -3.021176e-05
            FRAG42        FRAG43       FRAG44        FRAG45
week2 1.782480e-05 -8.935123e-06 9.910160e-07 -1.808292e-05
week3 2.735904e-05 -1.151881e-05 7.413345e-07 -1.532306e-05
week4 4.880167e-04 -7.139705e-05 1.360150e-05 -2.548684e-04

Residual Deviance: 143.6754 
AIC: 257.6754 
-------------- next part --------------
> nose126s2.mu <- multinom(Spoilage ~ F25 + F26 + F27 + F28 + F29 + F30 + F31+ F32 + F33 + F34 + F35+ F36 + F37 + F38 + F39+ F40 + F41 + F42 +F43 + F44 + F45 + F46 + F47 + F48 + F49 + F50 + F51 + F52 + F53 + F54 + F55 + F56 + F57 + F58 + F59 + F60 + F61 + F62 + F63 + F64 + F65 + F66 + F67 + F68 + F69 + F70 + F71 + F72 + F73 + F74 + F75 + F76 + F77 + F78 + F79 + F80 + F81 + F82 + F83 + F84 + F85 + F86 + F87 + F88 + F89 + F90 + F91 + F92 + F93 + F94 + F95 + F96 + F97 + F98 + F99 + F100 + F101 + F102 + F103 + F104 + F105 + F106 + F107 + F108 + F109 + F110 + F111 + F112 + F113 + F114 + F115 + F116 + F117 + F118 + F119 + F120 + F121 + F122 + F123 + F124 + F125 + F126 + F127 + F128 + F129 + F130 + F131 + F132 + F133 + F134 + F135 + F136 + F137 + F138 + F139 + F140 + F141 + F142 + F143 + F144 + F145 + F146 + F147 + F148 + F149 + F150
+ , data = nose126s2)
# weights:  512 (381 variable)
> nose126s2.mu
Call:
multinom(formula = Spoilage ~ F25 + F26 + F27 + F28 + F29 + F30 + 
    F31 + F32 + F33 + F34 + F35 + F36 + F37 + F38 + F39 + F40 + 
    F41 + F42 + F43 + F44 + F45 + F46 + F47 + F48 + F49 + F50 + 
    F51 + F52 + F53 + F54 + F55 + F56 + F57 + F58 + F59 + F60 + 
    F61 + F62 + F63 + F64 + F65 + F66 + F67 + F68 + F69 + F70 + 
    F71 + F72 + F73 + F74 + F75 + F76 + F77 + F78 + F79 + F80 + 
    F81 + F82 + F83 + F84 + F85 + F86 + F87 + F88 + F89 + F90 + 
    F91 + F92 + F93 + F94 + F95 + F96 + F97 + F98 + F99 + F100 + 
    F101 + F102 + F103 + F104 + F105 + F106 + F107 + F108 + F109 + 
    F110 + F111 + F112 + F113 + F114 + F115 + F116 + F117 + F118 + 
    F119 + F120 + F121 + F122 + F123 + F124 + F125 + F126 + F127 + 
    F128 + F129 + F130 + F131 + F132 + F133 + F134 + F135 + F136 + 
    F137 + F138 + F139 + F140 + F141 + F142 + F143 + F144 + F145 + 
    F146 + F147 + F148 + F149 + F150, data = nose126s2)

Coefficients:
        (Intercept)           F25           F26          F27           F28
week2  1.219487e-09 -3.195595e-04  4.748949e-05 4.900736e-05 -8.570984e-08
week3 -1.660521e-09 -1.669241e-05 -1.557546e-04 1.422205e-04  1.666224e-06
week4 -3.602248e-10  6.105686e-06  2.218175e-04 6.301120e-06  1.859483e-07
               F29           F30          F31           F32          F33
week2 1.710885e-06 -9.045937e-07 8.003105e-05  2.222240e-07 4.309332e-07
week3 1.289507e-06  5.626157e-06 7.382627e-05 -1.914310e-06 8.075129e-07
week4 2.701291e-07  2.040672e-06 8.257451e-05  6.487177e-08 1.220925e-06
                F34           F35           F36          F37          F38
week2 -6.946838e-05 -1.036917e-04  0.0001346780 9.765023e-05 0.0001347326
week3 -1.407161e-04 -6.302338e-05  0.0000803148 1.562163e-04 0.0001995156
week4 -2.800638e-06 -3.653815e-05 -0.0001079454 1.269093e-04 0.0001865822
                F39           F40          F41           F42           F43
week2  5.939505e-05  1.994993e-07 3.684524e-07  1.351041e-05 -1.951654e-05
week3  1.253717e-04  7.369284e-06 6.813911e-05 -5.965207e-05  8.492853e-06
week4 -1.422959e-05 -3.035808e-06 7.185366e-06  3.684513e-06 -3.036853e-06
               F44           F45           F46           F47           F48
week2 8.864302e-07 -2.645466e-05  5.704703e-05 -9.009798e-05  2.884689e-05
week3 1.510644e-06 -3.532714e-05  7.309184e-05  1.310930e-04  2.479969e-04
week4 8.686075e-07 -1.896736e-05 -3.718972e-05  3.357612e-05 -8.155125e-05
               F49           F50           F51           F52           F53
week2 0.0001385802 -0.0004309755 -1.680142e-04 -1.362987e-04  1.969091e-04
week3 0.0001613050 -0.0004092794 -3.227822e-04  3.662302e-05 -2.208027e-04
week4 0.0001668033 -0.0002275217 -2.391445e-05 -1.015035e-04 -2.805235e-05
               F54           F55           F56           F57           F58
week2 0.0003869048 -4.882195e-05 -0.0001465853 -7.775261e-05  1.201297e-04
week3 0.0004646550  9.679303e-05 -0.0004167201  3.546621e-05 -2.678546e-05
week4 0.0001645254 -1.586859e-05 -0.0001048692  9.515473e-05  3.275785e-05
                F59           F60           F61          F62           F63
week2 -1.062365e-04 -1.441587e-04  1.746909e-04 2.770054e-04 -2.091082e-04
week3 -3.214771e-05 -4.001424e-04  2.314351e-05 4.745612e-05 -1.437427e-04
week4 -2.439799e-05 -4.225132e-05 -8.295949e-05 8.353129e-05 -3.177624e-05
                F64           F65           F66           F67          F68
week2 -2.811005e-05 -0.0002071163 -3.251519e-05  6.643846e-05 0.0001247540
week3 -1.472040e-04  0.0000729866  3.436884e-04 -2.141885e-04 0.0001807832
week4  9.373653e-05 -0.0001121832 -1.372773e-06 -1.445839e-04 0.0001170291
                F69           F70          F71          F72           F73
week2 -7.655736e-05 -0.0001213041 0.0003393180 9.103568e-05  1.335855e-05
week3  4.108082e-04 -0.0005591488 0.0001612363 8.649987e-05  3.386516e-06
week4 -3.781369e-05 -0.0002429615 0.0000732286 7.743961e-06 -5.235559e-06
                F74           F75          F76           F77           F78
week2 -1.489640e-05 -6.629044e-05 9.112797e-05 -1.468495e-04 -1.163437e-04
week3 -1.330108e-04 -9.652093e-05 2.581334e-04  6.659711e-06 -3.879176e-04
week4  9.679911e-05  1.254652e-06 6.564406e-05  1.026719e-04 -5.271073e-05
                F79           F80           F81          F82           F83
week2 -3.332732e-05 -0.0001736478  1.267276e-04 8.745587e-05  1.082721e-04
week3 -3.486963e-04 -0.0004537347  3.756661e-04 8.703546e-06 -3.513668e-05
week4  7.367455e-05 -0.0000673614 -2.290305e-05 2.131521e-04  7.431593e-06
                F84           F85           F86          F87           F88
week2 -1.790248e-05 -9.843397e-05 -2.360408e-05 3.892072e-04 -0.0001394700
week3 -2.039337e-04 -4.262150e-04  2.859180e-04 5.887645e-04  0.0003035760
week4 -3.319747e-04 -5.678564e-05  1.756806e-04 5.909675e-05  0.0001728799
                F89           F90           F91           F92          F93
week2 -1.087832e-04  9.825400e-05 -8.795629e-05  8.208226e-07 8.443821e-05
week3 -2.966860e-05 -2.180570e-04  8.121998e-05 -3.033707e-04 4.113564e-05
week4  5.669098e-05  2.352611e-05  1.240733e-04 -1.817354e-05 3.050886e-05
                F94           F95           F96           F97           F98
week2 -1.480021e-04 -0.0003813541  9.544601e-05  7.794559e-05  1.424058e-05
week3  2.200224e-04 -0.0002113889 -3.247726e-04  2.352040e-04  2.943059e-04
week4 -4.962679e-05 -0.0001025270 -7.479078e-05 -5.539545e-05 -3.965151e-05
                F99          F100         F101          F102          F103
week2  1.118326e-04 -4.596317e-05 0.0003021668 -3.353995e-04  4.018968e-06
week3 -7.145675e-05 -3.418465e-04 0.0001317142 -3.912184e-05 -8.535487e-05
week4  1.477765e-04 -9.313495e-05 0.0001375701 -1.195548e-04  4.737395e-05
               F104          F105          F106          F107         F108
week2  4.780841e-06  2.018494e-05 -5.748224e-05  4.053847e-04 9.594164e-05
week3 -3.984163e-05 -1.804153e-04 -3.193939e-04 -6.470191e-05 1.072822e-04
week4 -1.237422e-04 -5.280561e-07 -9.524986e-05  3.384964e-05 7.893730e-05
               F109          F110          F111          F112          F113
week2 -1.511568e-04 -1.138763e-04  6.152346e-05  0.0001636572 -1.529929e-05
week3 -5.743415e-05  3.705444e-04  5.051566e-05  0.0001233737 -3.204458e-04
week4 -1.519348e-04  2.992059e-05 -2.037970e-05 -0.0001748865  6.096422e-05
               F114         F115         F116          F117          F118
week2 -0.0004850277 5.368748e-05 0.0002063432 -0.0001378167 -6.175149e-05
week3 -0.0004078296 2.145279e-04 0.0003707961 -0.0004237074 -4.618330e-05
week4 -0.0001534238 7.073613e-05 0.0000475460 -0.0001967731 -1.482364e-04
               F119          F120          F121          F122         F123
week2 -5.695025e-05 -4.366846e-05  1.601291e-04 -2.511383e-05 0.0001466871
week3  2.767698e-04  8.503119e-05  3.332916e-05 -8.513142e-05 0.0003851340
week4 -9.814509e-05  3.783492e-05 -8.465943e-05  3.327701e-05 0.0000954519
               F124          F125          F126          F127         F128
week2  1.922263e-04 -1.454775e-04 -1.454383e-04  2.255451e-04 6.723274e-05
week3 -6.532567e-05  5.348111e-05 -2.057253e-04  4.687788e-04 9.922645e-05
week4  9.244874e-05  3.209590e-05 -3.067741e-05 -3.846402e-05 7.667765e-05
              F129          F130          F131          F132         F133
week2 0.0002331977 -0.0003061774  1.179456e-04 -2.249172e-05 3.924194e-05
week3 0.0006633887 -0.0002366577 -2.364009e-05  1.234181e-05 7.908068e-05
week4 0.0001358766 -0.0001467059  6.824760e-05  1.349611e-04 4.838422e-05
               F134          F135         F136          F137          F138
week2 -0.0001202145  1.869369e-04 0.0001476740 -1.766882e-05 -2.012973e-06
week3  0.0000895994 -4.322409e-04 0.0002233970 -3.691256e-04 -7.679695e-05
week4  0.0000615005 -2.045526e-06 0.0001425135 -1.045794e-04 -1.366160e-04
              F139          F140          F141          F142         F143
week2 6.063255e-05 -1.957020e-04  1.673815e-04 -1.483463e-04 1.256884e-04
week3 4.655877e-04  4.239508e-05  4.956891e-06 -5.923583e-05 1.864335e-04
week4 3.273633e-05 -2.237530e-05 -9.117080e-06 -1.795420e-04 9.587126e-05
               F144          F145          F146          F147         F148
week2 -0.0000979091 -1.490324e-04 -1.437660e-04 -3.893712e-06 4.606350e-05
week3  0.0002832077 -3.100981e-04 -1.878327e-04  1.254730e-04 4.905824e-06
week4  0.0001436083 -6.791397e-05  1.252013e-05  2.165160e-05 2.446709e-05
               F149          F150
week2 -0.0001381260 -2.165186e-05
week3 -0.0001115298 -1.141151e-04
week4 -0.0001030075  1.792253e-05

Residual Deviance: 19.53574 
AIC: 613.5357 
> nose126s2.step <- stepAIC(nose126s2.mu)
Start:  AIC= 613.54 
 Spoilage ~ F25 + F26 + F27 + F28 + F29 + F30 + F31 + F32 + F33 +  
    F34 + F35 + F36 + F37 + F38 + F39 + F40 + F41 + F42 + F43 +  
    F44 + F45 + F46 + F47 + F48 + F49 + F50 + F51 + F52 + F53 +  
    F54 + F55 + F56 + F57 + F58 + F59 + F60 + F61 + F62 + F63 +  
    F64 + F65 + F66 + F67 + F68 + F69 + F70 + F71 + F72 + F73 +  
    F74 + F75 + F76 + F77 + F78 + F79 + F80 + F81 + F82 + F83 +  
    F84 + F85 + F86 + F87 + F88 + F89 + F90 + F91 + F92 + F93 +  
    F94 + F95 + F96 + F97 + F98 + F99 + F100 + F101 + F102 +  
    F103 + F104 + F105 + F106 + F107 + F108 + F109 + F110 + F111 +  
    F112 + F113 + F114 + F115 + F116 + F117 + F118 + F119 + F120 +  
    F121 + F122 + F123 + F124 + F125 + F126 + F127 + F128 + F129 +  
    F130 + F131 + F132 + F133 + F134 + F135 + F136 + F137 + F138 +  
    F139 + F140 + F141 + F142 + F143 + F144 + F145 + F146 + F147 +  
    F148 + F149 + F150 

# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)
# weights:  508 (378 variable)

Step:  AIC= 613.31 
 Spoilage ~ F26 + F27 + F28 + F29 + F30 + F31 + F32 + F33 + F34 +  
    F35 + F36 + F37 + F38 + F39 + F40 + F41 + F42 + F43 + F44 +  
    F45 + F46 + F47 + F48 + F49 + F50 + F51 + F52 + F53 + F54 +  
    F55 + F56 + F57 + F58 + F59 + F60 + F61 + F62 + F63 + F64 +  
    F65 + F66 + F67 + F68 + F69 + F70 + F71 + F72 + F73 + F74 +  
    F75 + F76 + F77 + F78 + F79 + F80 + F81 + F82 + F83 + F84 +  
    F85 + F86 + F87 + F88 + F89 + F90 + F91 + F92 + F93 + F94 +  
    F95 + F96 + F97 + F98 + F99 + F100 + F101 + F102 + F103 +  
    F104 + F105 + F106 + F107 + F108 + F109 + F110 + F111 + F112 +  
    F113 + F114 + F115 + F116 + F117 + F118 + F119 + F120 + F121 +  
    F122 + F123 + F124 + F125 + F126 + F127 + F128 + F129 + F130 +  
    F131 + F132 + F133 + F134 + F135 + F136 + F137 + F138 + F139 +  
    F140 + F141 + F142 + F143 + F144 + F145 + F146 + F147 + F148 +  
    F149 + F150 

# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)
# weights:  504 (375 variable)

Step:  AIC= 613.77 
 Spoilage ~ F27 + F28 + F29 + F30 + F31 + F32 + F33 + F34 + F35 +  
    F36 + F37 + F38 + F39 + F40 + F41 + F42 + F43 + F44 + F45 +  
    F46 + F47 + F48 + F49 + F50 + F51 + F52 + F53 + F54 + F55 +  
    F56 + F57 + F58 + F59 + F60 + F61 + F62 + F63 + F64 + F65 +  
    F66 + F67 + F68 + F69 + F70 + F71 + F72 + F73 + F74 + F75 +  
    F76 + F77 + F78 + F79 + F80 + F81 + F82 + F83 + F84 + F85 +  
    F86 + F87 + F88 + F89 + F90 + F91 + F92 + F93 + F94 + F95 +  
    F96 + F97 + F98 + F99 + F100 + F101 + F102 + F103 + F104 +  
    F105 + F106 + F107 + F108 + F109 + F110 + F111 + F112 + F113 +  
    F114 + F115 + F116 + F117 + F118 + F119 + F120 + F121 + F122 +  
    F123 + F124 + F125 + F126 + F127 + F128 + F129 + F130 + F131 +  
    F132 + F133 + F134 + F135 + F136 + F137 + F138 + F139 + F140 +  
    F141 + F142 + F143 + F144 + F145 + F146 + F147 + F148 + F149 +  
    F150 

Error: arguments imply differing number of rows: 1, 126

From karen at gecko.biol.wits.ac.za  Tue Jan  4 16:16:10 2000
From: karen at gecko.biol.wits.ac.za (KAREN KOTSCHY)
Date: Thu, 4 Jan 2000 16:16:10 GMT+2
Subject: [R] generating a sequence
Message-ID: <6C37250E9@gecko.biol.wits.ac.za>

A non-text attachment was scrubbed...
Name: not available
Type: text/enriched
Size: 1105 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-help/attachments/20000104/3ba2cb4d/attachment.bin

From karen at gecko.biol.wits.ac.za  Tue Jan  4 16:28:54 2000
From: karen at gecko.biol.wits.ac.za (KAREN KOTSCHY)
Date: Thu, 4 Jan 2000 16:28:54 GMT+2
Subject: [R] multiple comparison function
Message-ID: <6F9972040@gecko.biol.wits.ac.za>

Hi

I asked a while ago about multiple comparison tests for use with 
multi--way ANOVAs. Thanks to all those who replied and gave me 
some ideas and functions.

What I ended up doing was writing my own function for Tukey's 
HSD test (ref: Zar's Biostatistics pg 186-190), as this was the 
procedure I could best understand.

I've included my function here for those who may be interested. I'm 
sure there are many things that can be improved, but it works!
When interpreting the results one does, however, have to check 
which mean is which, as they are numbered according to their 
ranked order, not the order in which they were originally input.

Cheers
Karen

# Tukey Multiple Comparison Test
# Caters for unequal sample sizes. Ref: ZAR pg   
# 186--190
# Arguments: x = vector of means to be compared 
#            ms = within-cells mean square (or   
#                 error MS for one-way ANOVA)
#            na, nb = total no. of data per      
#                     level of factor tested    
#                     (or sample sizes for one- 
#                      way)
#            df = within-cells degrees of        
#                 freedom (or overall df for one-
#                 way)

tukeymc <- function(x, ms, na, nb, df) {
   
   x <- sort(x)  # rank means
   se <- sqrt(ms/2 * (1/na + 1/nb))

   #
   # Generate index vectors a and b for          
   # sequential subtraction of means
   #
   y <- rev(1:length(x))
   y <- y[-length(x)]
   a <- rep(y, times = y-1)
   mb <- matrix(1, length(x)-1, length(x)-1)
   rb <- row(mb)
   b <- rb[rb + col(mb) <= length(x)]
   rm(y, mb, rb)

   #
   # Compare diffs bt means with value from      
   # tables; alpha=0.05
   #
   q <- (x[a] - x[b]) / se
   qt <- qtukey(0.95, length(x), df)
   results <- ifelse(q >= qt, "diff *", "same")

   #
   # Generate output
   #
   tab <- cbind(round(q, digits=4), results)
   rownames(tab) <- paste("mean", a, "vs",       
         "mean", b)
   rm(a, b)
   colnames(tab) <- c("q", "results")
   output <- list("Tukey's Multiple Comparison   
         Test","Ranked means" = x, "se" = se,    
      "qtables" = qt, tab)  
   
   return(noquote(output))
}

Karen Kotschy
Centre for Water in the Environment
University of the Witwatersrand
Johannesburg

Tel: 011 716-2218
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jens.oehlschlaegel-akiyoshi at mdfactory.de  Tue Jan  4 18:54:35 2000
From: jens.oehlschlaegel-akiyoshi at mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Tue, 4 Jan 2000 18:54:35 +0100
Subject: [R] RE: set functions
In-Reply-To: <x24sctg6bz.fsf@blueberry.kubism.ku.dk>
Message-ID: <000a01bf56dc$c37baf40$a9021aac@joelschlaegel>


> length(setdiff(x,y))==0 appears to be about twice as fast....

but isn't the same, is it?

> length(setdiff(1:10, 1:15))==0
[1] TRUE
> "equiv" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))
> equiv(1:10, 1:15)
[1] FALSE

or isn't setdiff expected to do

> setdiff(1:10, 1:15)
numeric(0)
> setdiff(1:15, 1:10)
[1] 11 12 13 14 15

what it currently does?


--
   O__  ---- Peter Dalgaard             Blegdamsvej 3
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rdiazuri at students.wisc.edu  Tue Jan  4 10:51:30 2000
From: rdiazuri at students.wisc.edu (Ramon Diaz-Uriarte)
Date: Tue, 4 Jan 2000 10:51:30 +0100
Subject: [R] Re: "process R is not running"
In-Reply-To: <99122520145400.03668@ligarto>
References: <99122520145400.03668@ligarto>
Message-ID: <00010410562103.03781@ligarto>

A while ago I posted the message:

> I am not getting ESS to work (as a regular user).  I am running XEmacs v. 21.1
> on a SuSE 6.3 Linux PC. (...) When I start Xemacs and do M-x R, I get
"Process R is not running" (...) However, everything works OK if I am root. 

It turns out the problem was related to the pty permissions being too 
restrictive in suse; see the article

http://sdb.suse.de/sdb/en/html/ke_devpts-63.html

Once I fixed it, everything worked OK.

Ramon

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From iosu at ensia.inra.fr  Wed Jan  5 00:10:53 2000
From: iosu at ensia.inra.fr (=?iso-8859-1?Q?Jes=FAs_Mar=EDa_Fr=EDas_Celayeta?=)
Date: Wed, 5 Jan 2000 00:10:53 +0100 (CET)
Subject: [R] Alternative to cxy in R
Message-ID: <Pine.LNX.3.96.1000104235553.7682B-100000@joxepa.ensia.inra.fr>

good morning to the R-help list!,

	I would like to ask if there is an alternative to the S ploting
parameter "cxy" in R. I am trying to port some S code to R that makes use
of this "cxy" parameter to scale the graphics, and I don't find this
parameter in help(par).

thank you,

IOsu
	

-------------------------------------------------------------------------------
Jes?s Mar?a Fr?as Celayeta		"Valeu a pena? Tudo vale a pena
ENSIA-INRA, Av. des Olympiades, 1	se a alma n?o ? pequena
91744, Massy. FRANCE			Quem quer passar al?m do Bojador
Fax:intl+33+1+69935185			Tem que passar al?m da dor.
Phone:intl+33+1+69935191		Deus ao mar o perigo e abismo deu,
					Mas nele ? que espelhou o c?u"
-------------------------------------------------------------------------------






-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Jan  5 11:11:08 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 5 Jan 2000 10:11:08 +0000 (GMT)
Subject: [R] Alternative to cxy in R
In-Reply-To: <Pine.LNX.3.96.1000104235553.7682B-100000@joxepa.ensia.inra.fr>
Message-ID: <Pine.GSO.4.05.10001051004400.10525-100000@auk.stats>

On Wed, 5 Jan 2000, [iso-8859-1] Jess Mara Fras Celayeta wrote:

> good morning to the R-help list!,
> 
> 	I would like to ask if there is an alternative to the S ploting
> parameter "cxy" in R. I am trying to port some S code to R that makes use
> of this "cxy" parameter to scale the graphics, and I don't find this
> parameter in help(par).

R has cin, which gives this in inches, and pin and usr will enable
you to convert these to user coordinates (I think those are the
right ones).

You can usually make use of csi, for example yinch(par("csi")) is a
reasonable replacement for par("cxy")[2], and by use of cra you
can rescale to the width.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Wed Jan  5 12:40:41 2000
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed, 5 Jan 2000 12:40:41 +0100 (MET)
Subject: [R] Alternative to cxy in R
In-Reply-To: <Pine.GSO.4.05.10001051004400.10525-100000@auk.stats>
References: <Pine.LNX.3.96.1000104235553.7682B-100000@joxepa.ensia.inra.fr>
	<Pine.GSO.4.05.10001051004400.10525-100000@auk.stats>
Message-ID: <14451.11705.511335.45210@gargle.gargle.HOWL>

>>>>> "BDR" == Prof Brian D Ripley <ripley at stats.ox.ac.uk> writes:

    BDR> On Wed, 5 Jan 2000, [iso-8859-1] Jess Mara Fras Celayeta wrote:
    >> good morning to the R-help list!,
    >> 
    >> I would like to ask if there is an alternative to the S ploting
    >> parameter "cxy" in R. I am trying to port some S code to R that makes use
    >> of this "cxy" parameter to scale the graphics, and I don't find this
    >> parameter in help(par).

    BDR> R has cin, which gives this in inches, and pin and usr will enable
    BDR> you to convert these to user coordinates (I think those are the
    BDR> right ones).

    BDR> You can usually make use of csi, for example yinch(par("csi")) is a
    BDR> reasonable replacement for par("cxy")[2], and by use of cra you
    BDR> can rescale to the width.

Last time this was a topic on R-help, your answer was a bit more
elaborated: 

>> From: Prof Brian D Ripley <ripley at stats.ox.ac.uk>
>> Sender: owner-r-help at stat.math.ethz.ch
>> To: John Maindonald <john.maindonald at anu.edu.au>
>> cc: r-help at stat.math.ethz.ch
>> Subject: Re: [R] Character height & width in user co-ordinates
>> Date: Mon, 17 May 1999 07:49:29 +0100 (BST)
>> 
>> On Mon, 17 May 1999, John Maindonald wrote:
>> 
>> > Is there an equivalent to the S-PLUS par()$cxy in R?
>> 
>> That is specified as giving:
>> 
>> cxy=c(x1,y1)    character size (width and height) in usr coordinates.
>> 
>> When I needed this (V&R2, p.74) I used for the height yinch(par("csi")).
>> The width is a lot less clearcut, since R (and indeed S-PLUS) allows
>> variable-width fonts. I would use strwidth() to find the actual width.
>> There is also strheight(), but I think that computes the actual
>> height rather than the nominal height given by par("cxy").
>> 
>> I think that  (0.57*xinch(par("csi")), yinch(par("csi"))) is a reasonable
>> substitute, 0.57 coming from some experiments I did when I first
>> encountered this.

In the mean time, the font width/height settings have undergone a few
patches; but I don't know how much your proposal above would be affected.

But anyway: I think   par.Rd (i.e.  help(par) )
should contain something like the above information.
Alternatively, we could introduce  par("cxy") (as "read_only") into R,
which would solve porting problems, 
but as you said we should tell users, rather to use strwidth() instead.

By the way, the following script is somewhat revealing:

  plot(1)##-- using x11()  {default fonts, ...}
  chs <- c(strsplit(" .,;:!'`|#@$%^&*()-_=+/\\<>",NULL)[[1]],
	   letters,LETTERS, paste(0:9))
  chs <- chs[chs != ""]# fix bug in R 0.99 (unreleased)
  wh <- t(sapply(chs, function(s)c(w = strwidth(s),h = strheight(s))))

  apply(round(10000 * wh,2), 2, table)
  ##- $w
  ##-  60.02  80.03 100.04 120.04 140.05 160.06 180.07 200.07 220.08 240.09 
  ##-     13      7      1      5     34      9     13      2      3      1 

  ##- $h
  ##- 201.45 
  ##-     88 

  summary(10000 * wh[,"w"])
  ##-    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  ##-   60.02  120.00  140.10  135.10  160.10  240.10 

  round(10000* wh[,"w"])
  ##-       .   ,   ;   :   !   '   `   |   #   @   $   %   ^   &   *   ( 
  ##-  80  60  80  60  60  60  60  60  60 140 240 140 220 120 180 100  80 
  ##-   )   -   _   =   +   /  \\   <   >   a   b   c   d   e   f   g   h 
  ##-  80 160 140 140 140  80  80 140 140 140 140 140 140 140  60 140 140 
  ##-   i   j   k   l   m   n   o   p   q   r   s   t   u   v   w   x   y 
  ##-  60  60 120  60 180 140 140 140 140  80 120  60 140 140 180 120 140 
  ##-   z   A   B   C   D   E   F   G   H   I   J   K   L   M   N   O   P 
  ##- 120 180 160 180 180 160 160 180 180  60 140 160 140 220 180 200 160 
  ##-   Q   R   S   T   U   V   W   X   Y   Z   0   1   2   3   4   5   6 
  ##- 200 160 160 140 160 180 220 180 180 180 140 140 140 140 140 140 140 
  ##-   7   8   9 
  ##- 140 140 140 


  10000* xyinch(par("csi")) #---- CONSIDERABLY larger (also for y !)
  ## 300.6317 335.7513


Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From busman at iki.fi  Wed Jan  5 13:25:45 2000
From: busman at iki.fi (=?ISO-8859-1?Q?Perttu_Muurim=E4ki?=)
Date: Wed, 5 Jan 2000 14:25:45 +0200 (EET)
Subject: [R] Ticks and annotation
Message-ID: <Pine.LNX.4.21.0001051414250.237-100000@tte1012.tte.vtt.fi>

All the documentation (that I've read so far) is about individual
figures or multiple figures tied together with 'mfg'. Unfortunately those
rules don't seem to apply to figures that are "melted" together like for
example scatterplots are and the picture like what you get when you use
"plot" to plot a timeseries. 

Is there any way to control the behavior of their ticks and
annotations? Especially scatterplots should do fine without any
annotation and ticking. 

-perttu-

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jens.oehlschlaegel-akiyoshi at mdfactory.de  Wed Jan  5 17:02:14 2000
From: jens.oehlschlaegel-akiyoshi at mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 5 Jan 2000 17:02:14 +0100
Subject: [R] RE: set functions
In-Reply-To: <Pine.GSO.4.20.0001051145270.21562-100000@laplace>
Message-ID: <000001bf5796$3b9f26a0$a9021aac@joelschlaegel>



two more:
setequal3 and setequal4 handle NAs, setequal4 (currently) is fastest

"setequal" <- function(x,y)
  length(x<-unique(x))==length(y<-unique(y)) && all(sort(x)==sort(y))

"setequal2" <- function(x, y) all(c(match(x, y, 0)>0, match(y, x, 0)>0))

"setequal3" <- function(x,y)
  length(x<-as.character(unique(x)))==length(y<-as.character(unique(y))) &&
    all(sort(x, na.last=TRUE)==sort(y, na.last=TRUE))

"setequal4" <- function(x,y){
  x <- unique(x)
  y <- unique(y)
  if (length(x)!=length(y)) return(FALSE)
  if (any(is.na(x))!=any(is.na(y))) return(FALSE)
  all(sort(x[!is.na(x)])==sort(y[!is.na(y)]))
}


setequal(c(NA, 1:4), c(1:4, NA))	# TRUE
setequal2(c(NA, 1:4), c(1:4, NA))	# TRUE
setequal3(c(NA, 1:4), c(1:4, NA))	# TRUE
setequal4(c(NA, 1:4), c(1:4, NA))	# TRUE

setequal(c(NA, 1:4), c(1:4, 5))		# FALSE plus warning message
setequal2(c(NA, 1:4), c(1:4, 5))	# FALSE
setequal3(c(NA, 1:4), c(1:4, 5))	# FALSE
setequal4(c(NA, 1:4), c(1:4, 5))	# FALSE


x<-1:50000
y<-x[order(runif(50000))]
system.time(setequal(x,y))
system.time(setequal2(x,y))
system.time(setequal3(x,y))
system.time(setequal4(x,y))

x <- rep(1:50, 1000)
y<-x[order(runif(50000))]
system.time(setequal(x,y))
system.time(setequal2(x,y))
system.time(setequal3(x,y))
system.time(setequal4(x,y))

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jmc at research.bell-labs.com  Wed Jan  5 17:03:58 2000
From: jmc at research.bell-labs.com (John Chambers)
Date: Wed, 5 Jan 2000 11:03:58 -0500 (EST)
Subject: [R] Statistical Software Prize
Message-ID: <200001051603.LAA08669@jessie.research.bell-labs.com>

Dear colleagues:

This summer, the ASA will award a new prize for statistical software.
This note is to encourage you to apply or nudge someone you know to
apply.

The award is for software that contributes to better use of computing
in statistical research and applications, written while the applicant
was a student.  There is a $1,000 prize plus the opportunity to give
an invited talk at the Joint Statistical Meetings.

The goal of the prize is to recognize software contributions that make
our use of the computer better.  This is interpreted broadly, so both
directly "statistical" contributions and other improvements in the
computing environment are eligible.  We want to recognize the good
work done in this area and to encourage students to contribute in the
future.

The work should have been done while the applicant was a student.  It
is not necessary that the applicant still be a student, and there is
no restriction on the level or the area of study.

In this first year of the prize, particularly, we are anxious to
encourage wide participation.

The prize originated from the ACM's Software System award which I
received in May, 1999; the money from that award was used to endow the
new prize (which is why my name is attached to it).  The ACM award was
a recognition by the computing profession of the contributions
statistical software has made, and so I hope the new prize will reward
and encourage such contributions.

Applications should go to Lionel Galway:


	Chambers Software Award
	c/o Lionel Galway
	The RAND Corporation
	1700 Main St.
	Santa Monica, CA 90407
	Lionel_Galway at rand.org

The announcement, with details of the requirements, is on my web site
(http://www.cs.bell-labs.com/~jmc/asaAward.html) and more information
is available from the ASA Computing Section web site
(http://www-stat.montclair.edu/asascs/).

The deadline for applications is February 24, so please act now!

Regards,
 John Chambers

-- 
John M. Chambers                  jmc at bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From 1hotinvestment at 4-charity.org  Wed Jan  5 18:57:32 2000
From: 1hotinvestment at 4-charity.org (1hotinvestment@4-charity.org)
Date: Wed, 05 Jan 2000 18:57:32
Subject: [R] investment idea dvdt
Message-ID: <200001052357.AAA11335@stat.math.ethz.ch>

An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20000105/6e97bfc6/attachment.html

From wendy4 at singnet.com.sg  Thu Jan  6 02:29:43 2000
From: wendy4 at singnet.com.sg (Wong Ee Hwee)
Date: Thu, 6 Jan 2000 09:29:43 +0800
Subject: [R] Help Files
Message-ID: <002a01bf57e5$847439c0$de3715a5@user>

Hi,

I've just downloaded rwinst.exe and ran the installer. Afterwhich I double-clicked the Rgui icon. However, when I clicked on any of the help options, for example, I clicked 'Help' then 'R Language (html)', there's a message saying: Error in help.start() : I can't find the html help. 

Please help. Thanks!

Wendy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20000106/24b6cf04/attachment.html

From karen at gecko.biol.wits.ac.za  Wed Jan  5 23:27:45 2000
From: karen at gecko.biol.wits.ac.za (karen@gecko.biol.wits.ac.za)
Date: Thu, 6 Jan 2000 00:27:45 +0200 (SAST)
Subject: [R] barplot axes
Message-ID: <Pine.LNX.4.10.10001052319140.31133-100000@euclea.sevenc.private>

Hi everyone

I seem to be having a problem with the y axis in barplot.

The default y axis produced by barplot begins at 0 and extends up to the
maximum value of y. I would like it to extend a little further so that I
can add error bars and a legend to my plot. 

Setting ylim=c(0,..) has the strange effect of removing the 0 from the
axis and changing the interval between tick marks without necessarily
making the axis extend to the upper value specified. It seems it is not
possible to make the axis start at 0 when using ylim.

I see that it's not yet possible to set yaxs = "s" or "e", which I thought
might help. Am I missing something? 

(I'm using R v 0.90)

Karen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Jan  6 09:35:25 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 6 Jan 2000 08:35:25 +0000 (GMT)
Subject: [R] Help Files
In-Reply-To: <002a01bf57e5$847439c0$de3715a5@user>
Message-ID: <Pine.GSO.4.05.10001060832260.6964-100000@auk.stats>

On Thu, 6 Jan 2000, Wong Ee Hwee wrote:

> Hi,
> 
> I've just downloaded rwinst.exe and ran the installer. 
Afterwhich I double-clicked the Rgui icon. However, when I 
clicked on any of the help options, for example, I clicked 
'Help' then 'R Language (html)', there's a message saying: 
Error in help.start() : I can't find the html help. 

You do need to install the HTML help to be able to use it.
It is in a separate zip file (rw0901w.zip)

>From the R for Windows FAQ:

1.1) Where can I find the latest version?

Go to any CRAN site (see http://cran.r-project.org/mirrors.html for a
list), navigate to the bin/windows/windows-NT/base directory and collect
the files you need. You will need at least the files

      rw0xxxb1.zip rw0xxxb2.zip
      rw0xxxh.zip (text help) or rw0xxxch.zip (Compiled HTML help)

and you may want rw0xxxwh.zip (the Windows help files) or rw0xxxw.zip
(the HTML format help files), rw0xxxl.zip (the LaTeX format help
files, used for offline printing), or rw0xxxd.zip (the draft manuals,
in PDF).


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Jan  6 10:30:23 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Jan 2000 10:30:23 +0100
Subject: [R] barplot axes
In-Reply-To: karen@gecko.biol.wits.ac.za's message of "Thu, 6 Jan 2000 00:27:45 +0200 (SAST)"
References: <Pine.LNX.4.10.10001052319140.31133-100000@euclea.sevenc.private>
Message-ID: <x27lhnk0nk.fsf@blueberry.kubism.ku.dk>

karen at gecko.biol.wits.ac.za writes:

> Setting ylim=c(0,..) has the strange effect of removing the 0 from the
> axis and changing the interval between tick marks without necessarily
> making the axis extend to the upper value specified. It seems it is not
> possible to make the axis start at 0 when using ylim.
> 
> I see that it's not yet possible to set yaxs = "s" or "e", which I thought
> might help. Am I missing something? 

A bugfix... axes with yaxs="i" doesn't include the endpoints. They do
in S+ and really should do it in R too. The easiest workaround is
along the lines of

  barplot(1:10,ylim=c(-.01,14.01))

(ylim does actually work for setting the plot area. Try adding a box()
to see it).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jlindsey at alpha.luc.ac.be  Thu Jan  6 16:44:59 2000
From: jlindsey at alpha.luc.ac.be (Jim Lindsey)
Date: Thu, 6 Jan 2000 16:44:59 +0100 (MET)
Subject: [R] nlme
Message-ID: <200001061545.QAA32570@alpha.luc.ac.be>

Among others, datam contains the columns: logconc, tm, dose, subj, bilirubin.
None of these are factor variables.

The following compartment models work (the first still has not
converged after 100 interations):

res1 <- nlme(logconc~p2+p3+log(dose/(exp(p1)-exp(p2))*
	(exp(-exp(p2)*tm)-exp(-exp(p1)*tm))),start=list(fixed=c(5,-2,-0.1)),
	fixed=list(p1+p2+p3~1),control=list(maxIter=100),
	groups=~subj,data=datam,verbose=T,method="ML")

res2 <- nlme(logconc~p2+p3+log(dose/(exp(p1)-exp(p2))*
	(exp(-exp(p2)*tm)-exp(-exp(p1)*tm))),start=list(fixed=c(5,-2,-0.1)),
	fixed=list(p1+p2+p3~1),random=pdDiag(p1+p2+p3~1),
	groups=~subj,data=datam,verbose=T,method="ML")

res3 <- nlme(logconc~p2+p3+log(dose/(exp(p1)-exp(p2))*
	(exp(-exp(p2)*tm)-exp(-exp(p1)*tm))),start=list(fixed=c(5,-2,-0.1,0)),
	fixed=list(p1+p2~1,p3~bilirubin),random=pdDiag(p1+p2+p3~1),
	groups=~subj,data=datam,verbose=T,method="ML")

However, when I add a second covariate,

res4 <- nlme(logconc~p2+p3+log(dose/(exp(p1)-exp(p2))*
	(exp(-exp(p2)*tm)-exp(-exp(p1)*tm))),
	start=list(fixed=c(5,-2,-0.1,0,0)),
	fixed=list(p1+p2~1,p3~bilirubin+age),random=pdDiag(p1+p2+p3~1),
	groups=~subj,data=datam,verbose=T,method="ML")

I get the error:

Error in fixed[[nm]][[3]] != "1" : comparison (2) is possible only for vector types

If I try instead

res4a <- nlme(logconc~p2+p3+p4*bilirubin+p5*age+log(dose/(exp(p1)-exp(p2))*
	(exp(-exp(p2)*tm)-exp(-exp(p1)*tm))),
	start=list(fixed=c(5,-2,-0.1,0,0)),
	fixed=list(p1+p2+p3+p4+p5~1),random=pdDiag(p1+p2+p3~1),
	groups=~subj,data=datam,verbose=T,method="ML")

it runs.

Can anyone explain to me what I am doing wrong?

Sorry but I cannot supply the data as I am under nondisclosure to a
pharmaceutical company.

  How does one make the variance depend on a function of the mean as
is usual in PK modelling? I can only find how to make it depend on
covariates in the docs?

  It would be nice if nls printed out the log likelihood so
that the fits could be compared with those from nlme.
  I also find it very annoying that nlme stops with an error when the
iteration limit is exceeded (as in res1 above), returning nothing so
that one cannot even inspect the partially converged results.

  Jim
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jmc at research.bell-labs.com  Thu Jan  6 15:30:46 2000
From: jmc at research.bell-labs.com (John Chambers)
Date: Thu, 6 Jan 2000 09:30:46 -0500 (EST)
Subject: [R] Re: Statistical Software Prize
Message-ID: <200001061430.JAA17647@jessie.research.bell-labs.com>

Tillmann Krahnke raised an important point I should have mentioned in
yesterday's mail:  Are non-US applicants eligible?

Definitely: Statistical computing is a very international activity and
should be encouraged everywhere.  That was always my intention, and
it's how I interpret the description of the award from ASA.

Regards, 
 John Chambers

-- 
John M. Chambers                  jmc at bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From datamanagement at email.com  Thu Jan  6 17:16:18 2000
From: datamanagement at email.com (a s)
Date: Thu, 6 Jan 2000 11:16:18 -0500 (EST)
Subject: No subject
Message-ID: <384160298.947175378891.JavaMail.root@web07.pub01>

I apologize in advance to those for who this wuestion may be too stupid.
Running R 0.091 on Windows 95 (a very old machine I'm afraid 486-66 16M)

When constructing a big matrix I get:

Error: heap memory (6144 Kb) exhausted [needed 7087 Kb more]
See "help(Memory)" on how to increase the heap size.

Help(Memory) tells me I must: (Quote)

Use command line options to set the memory available for R.

Usage

R --vsize v --nsize n

Simple, isn't it??

Since I am new to R and I do not know what is or how to access the "command
line options"
I looked for that using apropos and the windows help and even tried to
search old communications in the list, all with no success.
The closest I could find is options(), but it won't accept any "R --" nor it
does have any "vsize" value.
Trying any similar combination directly on the command line gives nothing
too.

I know you guys will give me this simple answer in 10 seconds, I would
prefer to find a more clear help and
not to use this list, which I am sure is intended to better discussions.

Thank you.
Alex Ahgarin

-----------------------------------------------
FREE! The World's Best Email Address @email.com
Reserve your name now at http://www.email.com


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rossini at biostat.washington.edu  Thu Jan  6 17:33:36 2000
From: rossini at biostat.washington.edu (A.J. Rossini)
Date: 06 Jan 2000 08:33:36 -0800
Subject: [R] anoncvs for R should work again
Message-ID: <871z7vyxb3.fsf@alpha.cfas.washington.edu>



anoncvs for R should work again.  If you use it, please try it.  If
you use it and don't particularly want it to go away (rsync gets you
the source w/o the logs, but if you particularly want the logs and the
ability to create diffs between revisions, like I sometimes want to
do...), you might say something.

If you don't know what I'm talking about, it's probably not
important. 

best,
-tony

-- 
A.J. Rossini		       Research Assistant Professor of Biostatistics 
Biostatistics/Univ. of Washington  (Th)	Box 357232   206-543-1044 (3286=fax)
Center for AIDS Research/HMC/UW	  (M/F)	Box 359931   206-731-3647 (3693=fax)
VTN/SCHARP/FHCRC		 (Tu/W)	Box 358080   206-667-7025 (4812=fax)
rossini@(biostat.washington.edu|u.washington.edu|hivnet.fhcrc.org)
http://www.biostat.washington.edu/~rossini

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bates at stat.wisc.edu  Thu Jan  6 17:41:10 2000
From: bates at stat.wisc.edu (Douglas Bates)
Date: 06 Jan 2000 10:41:10 -0600
Subject: [R] nlme
In-Reply-To: Jim Lindsey's message of "Thu, 6 Jan 2000 16:44:59 +0100 (MET)"
References: <200001061545.QAA32570@alpha.luc.ac.be>
Message-ID: <6rpuvfxie1.fsf@franz.stat.wisc.edu>

Jim Lindsey <jlindsey at alpha.luc.ac.be> writes:

> Among others, datam contains the columns: logconc, tm, dose, subj, bilirubin.
> None of these are factor variables.

You didn't list `age' in there.  Did you mean to have it listed?

I would have converted `subj' to a factor.  Actually, it will be
converted to a factor anyway before being used in groups = ~ subj.

> The following compartment models work (the first still has not
> converged after 100 interations):
> 
> res1 <- nlme(logconc~p2+p3+log(dose/(exp(p1)-exp(p2))*
> 	(exp(-exp(p2)*tm)-exp(-exp(p1)*tm))),start=list(fixed=c(5,-2,-0.1)),
> 	fixed=list(p1+p2+p3~1),control=list(maxIter=100),
> 	groups=~subj,data=datam,verbose=T,method="ML")
> 
> res2 <- nlme(logconc~p2+p3+log(dose/(exp(p1)-exp(p2))*
> 	(exp(-exp(p2)*tm)-exp(-exp(p1)*tm))),start=list(fixed=c(5,-2,-0.1)),
> 	fixed=list(p1+p2+p3~1),random=pdDiag(p1+p2+p3~1),
> 	groups=~subj,data=datam,verbose=T,method="ML")
> 
> res3 <- nlme(logconc~p2+p3+log(dose/(exp(p1)-exp(p2))*
> 	(exp(-exp(p2)*tm)-exp(-exp(p1)*tm))),start=list(fixed=c(5,-2,-0.1,0)),
> 	fixed=list(p1+p2~1,p3~bilirubin),random=pdDiag(p1+p2+p3~1),
> 	groups=~subj,data=datam,verbose=T,method="ML")
> 
> However, when I add a second covariate,
> 
> res4 <- nlme(logconc~p2+p3+log(dose/(exp(p1)-exp(p2))*
> 	(exp(-exp(p2)*tm)-exp(-exp(p1)*tm))),
> 	start=list(fixed=c(5,-2,-0.1,0,0)),
> 	fixed=list(p1+p2~1,p3~bilirubin+age),random=pdDiag(p1+p2+p3~1),
> 	groups=~subj,data=datam,verbose=T,method="ML")
> 
> I get the error:
> 
> Error in fixed[[nm]][[3]] != "1" : comparison (2) is possible only for vector types

Determining the order of the starting values is a tricky business.
I'll have to try it to figure out what is going on.

I think I know of a way of avoiding a lot of these problems but
haven't had the opportunity to code it up and try it out yet.

> If I try instead
> 
> res4a <- nlme(logconc~p2+p3+p4*bilirubin+p5*age+log(dose/(exp(p1)-exp(p2))*
> 	(exp(-exp(p2)*tm)-exp(-exp(p1)*tm))),
> 	start=list(fixed=c(5,-2,-0.1,0,0)),
> 	fixed=list(p1+p2+p3+p4+p5~1),random=pdDiag(p1+p2+p3~1),
> 	groups=~subj,data=datam,verbose=T,method="ML")
> 
> it runs.
> 
> Can anyone explain to me what I am doing wrong?
> 
> Sorry but I cannot supply the data as I am under nondisclosure to a
> pharmaceutical company.

I appreciate that you can't disclose the data you have but could you
at least send the output of
 str(datum)
so we can see exactly what it looks like?  Otherwise it will be hard
to debug the problem.  Also please report the system type, the version
of R, and the version of the nlme package.

If you wish you can blank out those few individual data values that
are printed by str(datum).  I just want to see exactly what the
structure is.

>   How does one make the variance depend on a function of the mean as
> is usual in PK modelling? I can only find how to make it depend on
> covariates in the docs?

Which docs?  According to the help page for `varPower', for example,
the default formula is `~ fitted(.)', which is what you are looking
for.

   Usage:

        varPower(value, form, fixed)

   Arguments:
    ... 

       form: an optional one-sided formula of the form `~ v',
             or `~ v | g', specifying a variance covariate `v'
             and, optionally, a grouping factor `g' for the
             coefficients. The variance covariate must evaluate
             to a numeric vector and may involve expressions
             using `"."', representing  a fitted model object
             from which fitted values (`fitted(.)') and residu-
             als (`resid(.)') can be extracted (this allows the
             variance covariate to be updated during the opti-
             mization of an object function). When a grouping
             factor is present in `form', a different coeffi-
             cient value is used for each of its levels. Sev-
             eral grouping variables may be simultaneously
             specified, separated by the `*' operator, like in
             `~ v | g1 * g2 * g3'. In this case, the levels of
             each grouping variable are pasted together and the
             resulting factor is used to group the observa-
             tions. Defaults to `~ fitted(.)'  representing a
             variance covariate given by the fitted values of a
             fitted model object and no grouping factor.


>   It would be nice if nls printed out the log likelihood so
> that the fits could be compared with those from nlme.

You can obtain the log-likelihood for the fitted nls model `fm' with
 logLik(fm)

> I also find it very annoying that nlme stops with an error when the
> iteration limit is exceeded (as in res1 above), returning nothing so
> that one cannot even inspect the partially converged results.

I'm afraid we disagree on the approach.  When you have not converged
you don't have estimates and you should not be doing analysis as if
you had estimates.  I have seen too many situations where people have
used PROC NLIN in SAS to fit a nonlinear regression model, had it fail
to converge giving one brief message to that effect and then carry on
to print several pages of results exactly as if it had converged.  The
user happily walks off with the results never noticing that they are
nonsense.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jfox at mcmaster.ca  Thu Jan  6 18:28:53 2000
From: jfox at mcmaster.ca (John Fox)
Date: Thu, 06 Jan 2000 12:28:53 -0500
Subject: [R] Re: memory options
In-Reply-To: <384160298.947175378891.JavaMail.root@web07.pub01>
Message-ID: <3.0.5.32.20000106122853.00a322f0@mcmail.cis.mcmaster.ca>

Dear Alex,

At 11:16 AM 1/6/2000 -0500, you wrote:
>
>Use command line options to set the memory available for R.
>
>Usage
>
>R --vsize v --nsize n
>
>Simple, isn't it??
>
>Since I am new to R and I do not know what is or how to access the "command
>line options"

One way to do this is as follows: Make a shortcut for Rgui.exe (e.g., on your desktop). Right-click the shortcut and select Properties. Go to the Shortcut tab; the Target field should contain something like C:\rw0901\bin\Rgui.exe. 
Add  --vsize v --nsize n  to this line, where v and n are your memory specifications. 

>From the R FAQ, "Boths options must either be integers or integers ending with M, K, or k meaning `Mega' (2^20), (computer) `Kilo' (2^10), or regular `kilo' (1000)."

I hope that this helps,
 John




|----------------------------------------------------|
| John Fox                          jfox at McMaster.ca |
| Department of Sociology        McMaster University |
|----------------------------------------------------|
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From yudi at stat.ucc.ie  Fri Jan  7 10:23:55 2000
From: yudi at stat.ucc.ie (yudi@stat.ucc.ie)
Date: Fri, 07 Jan 2000 09:23:55 +0000
Subject: [R] hazard smoothing
Message-ID: <01JKF2FK80TU000ICO@CCSERV.UCC.IE>

Hello R-Help,
did somebody ever implement some hazard smoothing
routine in R (that allows, say, some group comparison 
as for the Kaplan-Meier curves.) As far as I can tell it
is not in survival5 package. 

Thanks,
-Yudi-
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Jan  7 11:03:49 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 7 Jan 2000 10:03:49 +0000 (GMT)
Subject: [R] hazard smoothing
In-Reply-To: <01JKF2FK80TU000ICO@CCSERV.UCC.IE>
Message-ID: <Pine.GSO.4.05.10001071001380.28764-100000@auk.stats>

On Fri, 7 Jan 2000 yudi at stat.ucc.ie wrote:

> did somebody ever implement some hazard smoothing
> routine in R (that allows, say, some group comparison 
> as for the Kaplan-Meier curves.) As far as I can tell it
> is not in survival5 package. 

There is one in package logspline, and more on statlib that might be
easy to port. Details in the V&R3 on-line Statistics Complements.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jlindsey at alpha.luc.ac.be  Fri Jan  7 11:08:14 2000
From: jlindsey at alpha.luc.ac.be (Jim Lindsey)
Date: Fri, 7 Jan 2000 11:08:14 +0100 (MET)
Subject: [R] nlme
In-Reply-To: <6rpuvfxie1.fsf@franz.stat.wisc.edu> from "Douglas Bates" at Jan 06, 2000 10:41:10 AM
Message-ID: <200001071008.LAA19605@alpha.luc.ac.be>

The follow are variations on res2 from my first email.

When I try,

res2f <- nlme(logconc~p2+p3+log(dose/(exp(p1)-exp(p2))*
	(exp(-exp(p2)*tm)-exp(-exp(p1)*tm))),start=list(fixed=c(5,-2,-0.1)),
	fixed=list(p1+p2+p3~1),random=pdDiag(p1+p2+p3~1),weights=varPower(2),
	groups=~subj,data=datam,verbose=T,method="ML")

I immediately get

Error in logLik.reStruct(object, conLin) : Singular precision matrix in level -1, block 11

Unless I am badly mistaken (which is quite possible), this exact model
was fitted to these data with an earlier S-Plus version of nlme with
no problem. See below.

If I use varPower(), after 1 iteration, I get the same error. Recall
that res2, without weights specified, worked (converging after 8 iterations).

When I try,

res2bf <- nlme(logconc~p2+p3+log(dose/(exp(p1)-exp(p2))*
	(exp(-exp(p2)*tm)-exp(-exp(p1)*tm))),start=list(fixed=c(5,-2,-0.1)),
	fixed=list(p1+p2+p3~1),random=pdDiag(p3~1),weights=varPower(2),
	groups=~subj,data=datam,verbose=T,method="ML")

it does not converge after 50 iterations. I know that this is a
reasonable model as I can fit it with elliptic in a few seconds,
because p3 is in fact a random linear intercept. (The 50 iterations
with nlme take over 5 min - on a Pentium II 300.)

The same thing happens with varPower(1). If I use varPower(0.5), I get

Error in logLik.reStruct(object, conLin) : NA/NaN/Inf in foreign function call (arg 1)

after 17 iterations.

I should mention that I analyzed these data originally primarily using R in

Lindsey, J.K., Wang, J., Byrom, W.D., and Jones, B. (1999)
Modelling the covariance structure in pharmacokinetic cross-over
trials. Journal of Biopharmaceutical Statistics 9, 439--450.

with, I believe (if I have understood the current docs correctly) the
same models res, res2f, and res2bf that a (Chinese) colleague did
using S-Plus and nlme several years ago. At that time, he encountered
no problems of convergence or otherwise. Unfortunately, I have no way
of finding out the versions. The syntax of nlme has changed so much
that the old code is not of much help here. I thought it would be
useful in getting me into nlme, but such was not the case.

On Wednesday, I started teaching a nonlinear regression course using R
for the medical statistics M.Sc. I reach PK in a couple of weeks. If I
cannot get a bit further with this, I shall have difficulty explaining
to the students how to handle random nonlinear parameters! All the
rest, including autoregression (which is usually more important than
random effects in data rich PK) can be handled by my libraries.

  Thanks very much for your help. Jim

PS
  In my earlier tries with nlme, I ran into a lot of rather strange
error reports, most of which I eventually figured out. One that I
remember occurred when I put fixed=list(p1=~1,p2=~1,p3=~1)
giving

Error in fixed[[i]][[3]] : subscript out of bounds

which is not too helpful. (My excuse for that blunder is that my libraries
have that sort of syntax.)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From serres at valigene.com  Fri Jan  7 14:38:15 2000
From: serres at valigene.com (Christine Serres)
Date: Fri, 07 Jan 2000 13:38:15 +0000
Subject: [R] global variable
Message-ID: <3875EC47.23DD6557@valigene.com>

Hi,

I would like to know if it is possible to make global variables in R.
My problem is that I use the same data frame in many different functions
that I have written, but it implies a very big waste of time because it
slow down the program.
So I would use my data frame without need to copy it each time in
another function to have a faster program execution.
How can I do ??

Thanks for Help


************************************************
SERRES Christine
ValiGene
Tour Neptune - 92086 Paris-la-D?fense  - France

Tel: 33 (0)1 47 67 66 00
Fax: 33 (0)1 49 06 07 15
http://www.valigene.com

************************************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From y0004379 at tu-bs.de  Fri Jan  7 16:14:11 2000
From: y0004379 at tu-bs.de (Peter Malewski)
Date: Fri, 7 Jan 2000 16:14:11 +0100 (MET)
Subject: [R] global variable
In-Reply-To: <3875EC47.23DD6557@valigene.com>
Message-ID: <Pine.HPX.4.10.10001071610240.4851-100000@rzpool05.rz.tu-bs.de>

On Fri, 7 Jan 2000, Christine Serres wrote:

> Hi,
> 
> I would like to know if it is possible to make global variables in R.
> My problem is that I use the same data frame in many different functions
> that I have written, but it implies a very big waste of time because it
> slow down the program.
> So I would use my data frame without need to copy it each time in
> another function to have a faster program execution.
> How can I do ??

You can set 

options(xx=T)

and use 

option("xx")

in your functions, but make sure you don't use names which are already in
use. 

Pm





** To YOU I'm an atheist; to God, I'm the Loyal Opposition. Woody Allen **
P.Malewski					Tel.: 0531 500965
Maschplatz 8					Email: P.Malewski at tu-bs.de
************************38114 Braunschweig********************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From lecoutre at stat.ucl.ac.be  Fri Jan  7 16:44:10 2000
From: lecoutre at stat.ucl.ac.be (Eric Lecoutre)
Date: Fri, 07 Jan 2000 16:44:10 +0100
Subject: [R] R parser
Message-ID: <3.0.5.32.20000107164410.00915aa0@stat4ux.stat.ucl.ac.be>


Hello,

I am actually developping a libary under S+/NT in which I do modify the
.Program.
Is there any equivalent in R?
(the .Program is the command line parser, ie the function which is called
when you press enter and pass the commmand line to the internal program)
TIA

Eric

?-----------------------?--------------------------------------------------?
| Eric Lecoutre         |  DEA de Statistiques                             | 
| Rue de la Gare, 5/001 |  Chercheur ? mi-temps                            |
| 1348 Louvain-La-Neuve |  Universit? de Louvain-La-Neuve                  |
| Belgique              |  lecoutre at stat.ac.ucl.be                         |
|(0032) 10 45 20 32     |  http://www.stat.ucl.ac.be/ISpersonnel/lecoutre/ |
?-----------------------?--------------------------------------------------?
|La raison d'?tre des statistiques, c'est de vous donner raison. ABE BURROW|
?--------------------------------------------------------------------------?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From plummer at iarc.fr  Fri Jan  7 17:22:56 2000
From: plummer at iarc.fr (Martyn Plummer)
Date: Fri, 07 Jan 2000 17:22:56 +0100 (CET)
Subject: [R] global variable
In-Reply-To: <3875EC47.23DD6557@valigene.com>
Message-ID: <XFMail.000107172256.plummer@iarc.fr>

Variables in the global environment are visible from within all functions
(unless masked by a local variable of the same name).

> x <- 1:3
> foo <- function() {print(x)}
> foo()
[1] 1 2 3

You can write to the global environment from within a function using
the operator "<<-". Here for example x is written to the global
environment in foo() and read in bar() without being passed as an argument.

> bar <- function() {x <<- 1:5}
> bar()
> foo()
[1] 1 2 3 4 5

However, S is a functional language and this sort of thing is considered
bad form (I should also say that the behaviour of "<<-" is slightly more
complicated than this, see help("<<-")).

You can also use lexical scoping. In R, a function has access to the
variables in the environment in which it was defined:

baz <- function() {
   foo <- function() {print(x)}
   x <- 1:3
   foo()
}
> baz()
[1] 1 2 3

This won't work in S.

Martyn

On 07-Jan-00 Christine Serres wrote:
> Hi,
> 
> I would like to know if it is possible to make global variables in R.
> My problem is that I use the same data frame in many different functions
> that I have written, but it implies a very big waste of time because it
> slow down the program.
> So I would use my data frame without need to copy it each time in
> another function to have a faster program execution.
> How can I do ??
> 
> Thanks for Help
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hodgess at uhddx01.dt.uh.edu  Fri Jan  7 19:13:06 2000
From: hodgess at uhddx01.dt.uh.edu (Erin Hodgess)
Date: Fri, 7 Jan 2000 12:13:06 -0600
Subject: No subject
Message-ID: <200001071813.AA07698@uhddx01.dt.uh.edu>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hodgess at uhddx01.dt.uh.edu  Fri Jan  7 19:15:21 2000
From: hodgess at uhddx01.dt.uh.edu (Erin Hodgess)
Date: Fri, 7 Jan 2000 12:15:21 -0600
Subject: [R] Installing R on UNIX
Message-ID: <200001071815.AA07697@uhddx01.dt.uh.edu>

Hi R help!

Happy New Year!

I am trying to install R on a UNIX system V4.0D.

When I run the ./configure, I get the error
C compiler cannot make executables

What next, please?

Thanks in advance!

Erin Hodgess
University of Houston - Downtown
hodgess at uhddx01.dt.uh.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hodgess at uhddx01.dt.uh.edu  Fri Jan  7 19:18:11 2000
From: hodgess at uhddx01.dt.uh.edu (Erin Hodgess)
Date: Fri, 7 Jan 2000 12:18:11 -0600
Subject: [R] Installing R
Message-ID: <200001071818.AA07750@uhddx01.dt.uh.edu>

Whoops...I'm installing R Version 0.90.1

Sorry!

Erin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From niels.waller at vanderbilt.edu  Fri Jan  7 16:10:54 2000
From: niels.waller at vanderbilt.edu (Niels Waller)
Date: Fri, 7 Jan 2000 15:10:54 -0000
Subject: No subject
Message-ID: <NDBBLLOPOEMNNHONCHBFIEDGCBAA.niels.waller@vanderbilt.edu>


Hello,

I am trying to port an S-PLUS function to R and have run into some
difficulties.  Specifically, my S-PLUS function calls nlminb (nonlinear
minimization subject to boundary constraints). I have yet to find a similar
function in R.  Have I missed something?  Or has anyone translated the
S-PLUS function?

Many thanks for any and all help.

Niels Waller


0=================================================0
Dr. Niels G. Waller
Department of Psychology and Human Development
Box 512 Peabody College
Vanderbilt University
Nashville TN 37203
email:  niels.waller at vanderbilt.edu
fax:    615 343-9494
http://peabody.vanderbilt.edu/depts/psych_and_hd/faculty/wallern/
0=================================================0

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jhoksane at ecology.helsinki.fi  Sat Jan  8 12:15:49 2000
From: jhoksane at ecology.helsinki.fi (Jari Oksanen)
Date: Sat, 08 Jan 2000 13:15:49 +0200
Subject: [R] MASS glm.nb: Offset fails
Message-ID: <200001081115.NAA30376@khatkhat.ecology.helsinki.fi>

I came to R from GLIM and its glm. My data sets (ecological community data) 
are severely over-dispersed, and so I was delighted to find out that the MASS 
library has glm.nb which is an advancement from the GLIM macros I had used 
(N.E.Breslow, Applied Statistics 33, 38--44; 1984). However, I need to use 
offset, but that failed.

I am not (yet --- hopefully) fluent enough in R to be able to debug the code, 
but it seems that the problem comes in expanding `...' in the glm.nb call. The 
first time this goes smoothly:

  Call <- match.call()

expands to (formula = TFLO ~ poly(PH, 2), offset = log(TOT)) which was my 
exact call. However, the second time fails:

  m <- match.call(expand = FALSE)

expands to (formula = TFLO ~ poly(PH, 2), ... = list(offset = log(TOT))), and 
now the following commad will remove  `... = list(offset = log(TOT))':

  m$method <- m$model <- m$x <- m$y <- m$control <- m$contrasts <- 
m$init.theta <- m$link <- m$... <- NULL

leaving only (formula = TFLO ~ poly(PH, 2)). So the later 

  offset <- model.extract(m, offset)

fails (or offset is NULL). Finally, the actual fatal error comes from 
glm.control(), obviously via glm.fit:

Error in glm.control(...) : unused argument to function
 
So it seems that offset is still here, but glm.control did not know what to do 
with it.

My R is 0.90.0, running under Linux 2.0.36. During my trials, I upgraded to VR 
6.1-6, but the problem remained.

Regards, jari oksanen

-- 
Jari Oksanen - Dept Ecol Env Sci, Univ Helsinki, 15140 Lahti
Ph. +358 3 89220312, Fax -- 89220289, Mobile +358 40 5136529
jari.oksanen at helsinki.fi    http://www.helsinki.fi/~jhoksane
******************** Happy Year 0x7d0! *********************


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Jan  8 15:51:38 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 8 Jan 2000 14:51:38 +0000 (GMT)
Subject: [R] MASS glm.nb: Offset fails
In-Reply-To: <200001081115.NAA30376@khatkhat.ecology.helsinki.fi>
Message-ID: <Pine.GSO.4.05.10001081448400.24180-100000@auk.stats>

On Sat, 8 Jan 2000, Jari Oksanen wrote:

> I came to R from GLIM and its glm. My data sets (ecological community data) 
> are severely over-dispersed, and so I was delighted to find out that the MASS 
> library has glm.nb which is an advancement from the GLIM macros I had used 
> (N.E.Breslow, Applied Statistics 33, 38--44; 1984). However, I need to use 
> offset, but that failed.
> 
> I am not (yet --- hopefully) fluent enough in R to be able to debug the code, 
> but it seems that the problem comes in expanding `...' in the glm.nb call. The 
> first time this goes smoothly:
> 
>   Call <- match.call()
> 
> expands to (formula = TFLO ~ poly(PH, 2), offset = log(TOT)) which was my 
> exact call. However, the second time fails:

Can you please tell us exactly what you did (the precise call)? The correct
formula would have been

TFLO ~ poly(PH, 2) +  offset(log(TOT))

(V&R3, p. 217-8).


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From zha at merlin.engr.ucf.edu  Sun Jan  9 19:13:53 2000
From: zha at merlin.engr.ucf.edu (Tony Q. Zhang)
Date: Sun, 9 Jan 2000 13:13:53 -0500 (EST)
Subject: [R] using fix()
In-Reply-To: <Pine.GSO.4.05.9912202133210.2242-100000@auk.stats>
Message-ID: <Pine.GSO.3.96.1000109125524.9794C-100000@merlin>

  I guess this may be well-known question, but I did search through the
mail archive without finding the answer. so please forgive me asking.
  My problem is that I cannot use fix() to edit function. If I use
fix(my.fun), then, it will give a "object my.fun not found" error. I have
to use my.fun <- function() {} first whenever I want to start a new
function, which is annoying. How can I make the fix() behave like in
splus?

Thanks
Tony

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Sun Jan  9 21:22:17 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Jan 2000 21:22:17 +0100
Subject: [R] using fix()
In-Reply-To: "Tony Q. Zhang"'s message of "Sun, 9 Jan 2000 13:13:53 -0500 (EST)"
References: <Pine.GSO.3.96.1000109125524.9794C-100000@merlin>
Message-ID: <x2bt6vhu6e.fsf@blueberry.kubism.ku.dk>

"Tony Q. Zhang" <zha at merlin.engr.ucf.edu> writes:

>   I guess this may be well-known question, but I did search through the
> mail archive without finding the answer. so please forgive me asking.
>   My problem is that I cannot use fix() to edit function. If I use
> fix(my.fun), then, it will give a "object my.fun not found" error. I have
> to use my.fun <- function() {} first whenever I want to start a new
> function, which is annoying. How can I make the fix() behave like in
> splus?

Actually, I don't recall seeing others complaining about this...

However, you can just fix(fix) and change the else clause to be

x<-edit(function(){})

instead of giving off the error message.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Sun Jan  9 21:35:34 2000
From: ben at zoo.ufl.edu (Ben Bolker)
Date: Sun, 9 Jan 2000 15:35:34 -0500 (EST)
Subject: [R] using fix()
In-Reply-To: <Pine.GSO.3.96.1000109125524.9794C-100000@merlin>
Message-ID: <Pine.LNX.4.10.10001091527010.1120-100000@bolker.zoo.ufl.edu>


 1 function (x) 
 2 {
 3    subx <- substitute(x)
 4    if (is.name(subx)) 
 5        subx <- deparse(subx)
 6    if (!is.character(subx) || length(subx) != 1) 
 7        stop("fix requires a name")
 8    if (exists(subx, inherits = TRUE)) 
 9        x <- edit(get(subx))
10    else stop(paste("no object named \"", subx, "\" to edit", 
11        sep = ""))
12    assign(subx, x, env = .GlobalEnv)
13 }

You could edit fix() so that lines 8-11 read:

  if (!exists(subx, inherits = TRUE))
     assign(subx,function() {}, env=.GlobalEnv)
  x <- edit(get(subx))

  I don't know if there's a better/sneakier/more robust way to do this.

On Sun, 9 Jan 2000, Tony Q. Zhang wrote:

>   I guess this may be well-known question, but I did search through the
> mail archive without finding the answer. so please forgive me asking.
>   My problem is that I cannot use fix() to edit function. If I use
> fix(my.fun), then, it will give a "object my.fun not found" error. I have
> to use my.fun <- function() {} first whenever I want to start a new
> function, which is annoying. How can I make the fix() behave like in
> splus?
> 
> Thanks
> Tony
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
Ben Bolker                                  bolker at zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From zha at merlin.engr.ucf.edu  Mon Jan 10 00:09:56 2000
From: zha at merlin.engr.ucf.edu (Tony Q. Zhang)
Date: Sun, 9 Jan 2000 18:09:56 -0500 (EST)
Subject: [R] using fix()
In-Reply-To: <x2bt6vhu6e.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.3.96.1000109180026.10237B-100000@merlin>

  Thanks. I should have thought that way.
After building a local fix(), a few little things caught my attention:
 1. when local fix() _masked_ the global fix(), there's no warning
message given.
 2. though fix() functions like the local one, when I type fix without
(), it print out the global one.

em, I think still need more time to get used to R.

regards,
tony

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Mon Jan 10 00:53:46 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Jan 2000 00:53:46 +0100
Subject: [R] using fix()
In-Reply-To: "Tony Q. Zhang"'s message of "Sun, 9 Jan 2000 18:09:56 -0500 (EST)"
References: <Pine.GSO.3.96.1000109180026.10237B-100000@merlin>
Message-ID: <x2g0w6red1.fsf@blueberry.kubism.ku.dk>

"Tony Q. Zhang" <zha at merlin.engr.ucf.edu> writes:

>  1. when local fix() _masked_ the global fix(), there's no warning
> message given.

Well, basically we assume that the user knows what (s)he's doing...

>  2. though fix() functions like the local one, when I type fix without
> (), it print out the global one.

Er, are you *sure* of that?? Certainly doesn't happen here!

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From s084099 at stud.uni-goettingen.de  Mon Jan 10 05:07:21 2000
From: s084099 at stud.uni-goettingen.de (s084099@stud.uni-goettingen.de)
Date: Mon, 10 Jan 2000 04:07:21 +0000
Subject: [R] Re: Welcome to r-help
References: <200001100249.DAA03247@stat.math.ethz.ch>
Message-ID: <38795AF9.48580F37@stud.uni-goettingen.de>

hi,
if i want to execute R.X11 the error-message 'R home directory is not
defined.' appears.
how can i define it?
regards,
christoph gross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bitwrit at ozemail.com.au  Mon Jan 10 11:44:43 2000
From: bitwrit at ozemail.com.au (Jim Lemon)
Date: Mon, 10 Jan 2000 21:44:43 +1100
Subject: [R] using fix()
Message-ID: <3879B81B.5CEA11B3@ozemail.com.au>

Tony Q. Zhang wrote:

...
1. when local fix() _masked_ the global fix(), there's no warning
message given.
 2. though fix() functions like the local one, when I type fix without
(), it print out the global one....

I liked Ben's function so much I'll add it to my 'local' library of
handy functions which loads at startup.
However, if you use a new name ('hack'?),  it will avoid the
masking problem.
And I am so impressed by the new KDE setup that I have to
note that you can substitute either of their neat editors as the
default when using fix().

Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jlindsey at alpha.luc.ac.be  Mon Jan 10 14:19:59 2000
From: jlindsey at alpha.luc.ac.be (Jim Lindsey)
Date: Mon, 10 Jan 2000 14:19:59 +0100 (MET)
Subject: [R] MASS glm.nb: Offset fails
In-Reply-To: <200001081115.NAA30376@khatkhat.ecology.helsinki.fi> from "Jari Oksanen" at Jan 08, 2000 01:15:49 PM
Message-ID: <200001101319.OAA18105@alpha.luc.ac.be>


> 
> I came to R from GLIM and its glm. My data sets (ecological community data) 
> are severely over-dispersed, and so I was delighted to find out that the MASS 
> library has glm.nb which is an advancement from the GLIM macros I had used 
> (N.E.Breslow, Applied Statistics 33, 38--44; 1984). However, I need to use 
> offset, but that failed.
> 


You might like to look at the gnlr function in my gnlm library
(www.luc.ac.be/~jlindsey/rcode.html). It not only does negative
binomial but several other overdispersed count distributions as well
(double Poisson, multiplicative Poisson, gamma count, ...), works with
nonlinear as well as linear regression, and the dispersion parameter
can depend on covariates.
  Jim
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From zha at merlin.engr.ucf.edu  Mon Jan 10 16:54:00 2000
From: zha at merlin.engr.ucf.edu (Tony Q. Zhang)
Date: Mon, 10 Jan 2000 10:54:00 -0500 (EST)
Subject: [R] how to statically load a lib *.a
In-Reply-To: <x2g0w6red1.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.3.96.1000110104237.11501B-100000@merlin>

Hi, 

   I built a PORT library (libport.a) from NetLib, which contains lots of
Fortran subroutins. How can I statically load it into R? Or should I
recompile R with this library?

btw, all I'm trying to do is to port _constrained_ optimization routine
'nlregb' into R. It is based on the public routines from netlib. I don't
know exactly how difficult (or easy) it is. 

many thanks for any suggestion
Tony

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tom at ait-tech.com  Mon Jan 10 17:19:54 2000
From: tom at ait-tech.com (Tomislav Goles)
Date: 10 Jan 2000 11:19:54 -0500
Subject: [R] lm methods inconsistency?
Message-ID: <u9aemdj3v9.fsf@ait-tech.com>


I'm very new to R so maybe i'm doing something wrong so
please let me know it that is that case.
Here is an example where the summary() and residuals()
applied to lm object produce different results
(I think the residuals() results is correct since SAS produces
those numbers - the second residual corresponding to observation
with weight 4 is wrong in summary()).

x <- c( 10, 20, 30, 40 )
y <- c( 33.8, 62.2, 92.0, 122.4 )
w <- c( 1, 4, 1, 1 )
lm.obj <- lm( y ~ x, weights=w )
print( summary( lm.obj ) )
print( residuals( lm.obj ) )

Best regards,
Tomislav Goles

PS. my version or R is 0.64.2 on Linux.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Mon Jan 10 17:39:33 2000
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 10 Jan 2000 17:39:33 +0100 (MET)
Subject: [R] lm methods inconsistency?
In-Reply-To: <u9aemdj3v9.fsf@ait-tech.com>
References: <u9aemdj3v9.fsf@ait-tech.com>
Message-ID: <14458.2885.173300.295549@gargle.gargle.HOWL>

>>>>> "Tom" == Tomislav Goles <tom at ait-tech.com> writes:

    Tom> I'm very new to R so maybe i'm doing something wrong so
    Tom> please let me know it that is that case.
    Tom> Here is an example where the summary() and residuals()
    Tom> applied to lm object produce different results
    Tom> (I think the residuals() results is correct since SAS produces
    Tom> those numbers - the second residual corresponding to observation
    Tom> with weight 4 is wrong in summary()).

    Tom> x <- c( 10, 20, 30, 40 )
    Tom> y <- c( 33.8, 62.2, 92.0, 122.4 )
    Tom> w <- c( 1, 4, 1, 1 )
    Tom> lm.obj <- lm( y ~ x, weights=w )
    Tom> print( summary( lm.obj ) )
(showing the weighted residuals)

    Tom> print( residuals( lm.obj ) )
(showing the raw residuals)

No real bug here.
One could argue that summmary() should say 
"Weighted residuals:"  instead of
"Residuals:"

(but note that R's behavior here is really like S').

    Tom> Best regards,
    Tom> Tomislav Goles

    Tom> PS. my version or R is 0.64.2 on Linux.
which is *really* too old.
but it doesn't matter here...
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Mon Jan 10 17:54:22 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Mon, 10 Jan 2000 16:54:22 +0000 (GMT)
Subject: [R] how to statically load a lib *.a
In-Reply-To: <Pine.GSO.3.96.1000110104237.11501B-100000@merlin>
Message-ID: <Pine.LNX.4.10.10001101647270.7165-100000@gimel.biostat.washington.edu>

On Mon, 10 Jan 2000, Tony Q. Zhang wrote:

> Hi, 
> 
>    I built a PORT library (libport.a) from NetLib, which contains lots of
> Fortran subroutins. How can I statically load it into R? Or should I
> recompile R with this library?

You don't statically load things into R, you dynamically load them.  This
should be possible using R SHLIB to compile and link the code.

If your library needs to link system libraries that are not linked by R
you may need to write a Makefile as well. This is tricky if you want it to
be portable. 


> btw, all I'm trying to do is to port _constrained_ optimization routine
> 'nlregb' into R. It is based on the public routines from netlib. I don't
> know exactly how difficult (or easy) it is. 

As of a few days ago we have constrained optimisation in the development
version of R, which is a much easier solution.

	-thomas


	


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Jan 10 18:02:11 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 10 Jan 2000 17:02:11 +0000 (GMT)
Subject: [R] lm methods inconsistency?
In-Reply-To: <u9aemdj3v9.fsf@ait-tech.com>
Message-ID: <Pine.GSO.4.05.10001101653020.14260-100000@auk.stats>

On 10 Jan 2000, Tomislav Goles wrote:

> 
> I'm very new to R so maybe i'm doing something wrong so
> please let me know it that is that case.
> Here is an example where the summary() and residuals()
> applied to lm object produce different results
> (I think the residuals() results is correct since SAS produces
> those numbers - the second residual corresponding to observation
> with weight 4 is wrong in summary()).
> 
> x <- c( 10, 20, 30, 40 )
> y <- c( 33.8, 62.2, 92.0, 122.4 )
> w <- c( 1, 4, 1, 1 )
> lm.obj <- lm( y ~ x, weights=w )
> print( summary( lm.obj ) )
> print( residuals( lm.obj ) )

It's the documentation that is wrong. R follows S, which says for
summary.lm:

residuals:     the  model  residuals.   These  are  the  weighted
       residuals if weights were given in the model.

The function weighted.residuals gives those directly.

> PS. my version or R is 0.64.2 on Linux.

Well, we have had four versions since then, and many, many bugs have been
fixed.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Jan 10 18:11:43 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 10 Jan 2000 17:11:43 +0000 (GMT)
Subject: [R] how to statically load a lib *.a
In-Reply-To: <Pine.GSO.3.96.1000110104237.11501B-100000@merlin>
Message-ID: <Pine.GSO.4.05.10001101704390.14260-100000@auk.stats>

On Mon, 10 Jan 2000, Tony Q. Zhang wrote:

> Hi, 
> 
>    I built a PORT library (libport.a) from NetLib, which contains lots of
> Fortran subroutins. How can I statically load it into R? Or should I
> recompile R with this library?

You just need to dyn.load the code, which means you need to build a shared
library (libport.so).  You could add it by re-compiling, but this should
not be necessary, and you would need to declare the entry points
in src/appl/ROUTINES.

> btw, all I'm trying to do is to port _constrained_ optimization routine
> 'nlregb' into R. It is based on the public routines from netlib. I don't
> know exactly how difficult (or easy) it is. 

It's not at all easy, as you need to pass around and evaluate R expressions
in (in your case) Fortran code and that will require C glue layers.  There
is a function optim() in the development version of R (the basis for the
next release) which has a box-constrained optimizer like nlminb: that might
do what you want.  Alternatively, read the nlm interface code and see if
you really want to do this!

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Mon Jan 10 18:14:56 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Mon, 10 Jan 2000 17:14:56 +0000 (GMT)
Subject: [R] Re: Welcome to r-help
In-Reply-To: <38795AF9.48580F37@stud.uni-goettingen.de>
Message-ID: <Pine.LNX.4.10.10001101712540.7165-100000@gimel.biostat.washington.edu>

On Mon, 10 Jan 2000 s084099 at stud.uni-goettingen.de wrote:

> hi,
> if i want to execute R.X11 the error-message 'R home directory is not
> defined.' appears.
> how can i define it?

You don't want to execute R.X11, you want to execute R.  R is a shell
script that sets a number of environment variables and then calls R.X11.

If you did want to execute R.X11 you could look in the R script to see
what variables it defines and how.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ralf.herold at charite.de  Wed Jan 12 09:26:13 2000
From: ralf.herold at charite.de (ralf.herold@charite.de)
Date: Wed, 12 Jan 2000 09:26:13 +0100
Subject: [R] Usage of p/d/qnorm
Message-ID: <810F20AC3F77D311B4690090275514A7011D65@dc-poh-w.kin.charite.de>

Hello,

could You please help: I am looking for a way to formulate test accuracy
measures such as test sensitivity, specificity, predictive values, and
correct classification rate using p/d/qnorm. The tests' primary values
follow a bimodal distribution, which is modelled by a mixture of two normal
distributions:

     p  * dnorm ((x - u1) / s1) / s1 +
(1 - p) * dnorm ((x - u2) / s2) / s2)

{written like in Venables & Ripley, 2nd Ed., p. 288}. So, the first and
second summand would correspond to truly negative and positive status,
respectively, whereas the test would be termed negative or positive with
respect to a varying x cut off value.

How could one possibly formulate using p/d/qnorm e.g. the specificity:
f(x)= number of positive tests at cut off x / total number of truly
positives ?

Thank You,

Ralf Herold

# Charite Campus Virchow-Klinikum
# Medizinische Fakultaet der Humboldt-Universitaet
# Augustenburger Platz 1, D-13353 Berlin
# ralf.herold at charite.de  pgp welcome

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From loparic at student.fsa.ucl.ac.be  Wed Jan 12 13:05:21 2000
From: loparic at student.fsa.ucl.ac.be (Adriane Leal)
Date: Wed, 12 Jan 2000 13:05:21 +0100 (CET)
Subject: [R] Problems creating a random sample 
Message-ID: <Pine.LNX.3.96.1000112125916.282A-100000@18-76.campusnet.ucl.ac.be>

Hi!

I'm supposed to create a random sample bivariate normal variates of size
equal to 250 with  mean vector (-1,1) and cov matrix (1,0.95,0.95,1)

In S language I would write:

> mean<-c(-1,1)
> cov<-c(1,0.95,0.95,1)
> covmat<-matrix(cov,nrow=2,ncol=2)
> mvnorm<-rmvnorm(250,mean,covmat)
... and it should work

I've tried this in R, but it does not recognize "rmvnorm".

(Error: couldn't find function "rmvnorm")

Does anybody knows what function should I use in this case?

My best regards,

Adriane



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rosm at ufrima.imag.fr  Wed Jan 12 12:19:26 2000
From: rosm at ufrima.imag.fr (ros mathieu)
Date: Wed, 12 Jan 2000 12:19:26 +0100
Subject: [R] design()
Message-ID: <387C633E.D1F21D5F@ufrima.imag.fr>

hello all,
Is there an equivalent in R to S-plus design() function, which creates
an object of class "design"  ?
why this funcion isn't implemented (I mean, is there a special reason) ?

also, where can I find documentation about .Internal ?
thanks,
    Mathieu

--
----------------------------------------------------------------------
Mathieu Ros - 13 rue b?vi?re - 38000 GRENOBLE - 04 76 491 370
http://www.multimania.com/mathieuros/index2.html
DESS ing?nierie math?matique (biostatistiques)
Universite Joseph Fourier, Grenoble
----------------------------------------------------------------------
A single death is a tragedy; a million is a statistic. Joseph STALINE


-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20000112/c2c0efdc/attachment.html

From peter_r_hudson at yahoo.com  Wed Jan 12 12:30:48 2000
From: peter_r_hudson at yahoo.com (Peter Hudson)
Date: Wed, 12 Jan 2000 03:30:48 -0800 (PST)
Subject: [R] ROC curves
Message-ID: <20000112113048.12407.qmail@web308.mail.yahoo.com>

On the subject of sensitivity & specificity (mentioned
in a recent message on r-help)...is there any R code
available for the construction of ROC curves,
calculation of areas under the curve, comparisons of
curves etc.?

Peter Hudson
Principal Biochemist
Maelor Hospital
Wrexham, N.Wales
peter_r_hudson at yahoo.com
__________________________________________________
Do You Yahoo!?
Talk to your friends online with Yahoo! Messenger.
http://im.yahoo.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Jan 12 12:57:48 2000
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 12 Jan 2000 11:57:48 +0000 (GMT)
Subject: [R] Problems creating a random sample 
Message-ID: <200001121157.LAA29930@toucan.stats.ox.ac.uk>


> Date: Wed, 12 Jan 2000 13:05:21 +0100 (CET)
> From: Adriane Leal <loparic at student.fsa.ucl.ac.be>
> To: r-help at stat.math.ethz.ch
> Subject: [R] Problems creating a random sample 
> 
> Hi!
> 
> I'm supposed to create a random sample bivariate normal variates of size
> equal to 250 with  mean vector (-1,1) and cov matrix (1,0.95,0.95,1)
> 
> In S language I would write:
> 
> > mean<-c(-1,1)
> > cov<-c(1,0.95,0.95,1)
> > covmat<-matrix(cov,nrow=2,ncol=2)
> > mvnorm<-rmvnorm(250,mean,covmat)
> ... and it should work
> 
> I've tried this in R, but it does not recognize "rmvnorm".
> 
> (Error: couldn't find function "rmvnorm")

rmvnorm is an S-PLUS function, version 4.0 and later. It is not part of
S.  It is based on mvrnorm in package MASS (in the VR bundle), so try
that. Your example works for me.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Jan 12 13:31:41 2000
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 12 Jan 2000 12:31:41 +0000 (GMT)
Subject: [R] design()
Message-ID: <200001121231.MAA13532@toucan.stats.ox.ac.uk>


> Date: Wed, 12 Jan 2000 12:19:26 +0100
> From: ros mathieu <rosm at ufrima.imag.fr>
> X-Accept-Language: fr, en
> To: R-help <r-help at stat.math.ethz.ch>
> Subject: [R] design()
> 
> hello all,
> Is there an equivalent in R to S-plus design() function, which creates
> an object of class "design"  ?
> why this funcion isn't implemented (I mean, is there a special reason) ?

Class "design" is basically a data frame with all columns as factors.
It is little use without functions to generate designs such as oa.design.
I suspect it has not been implemented because no one had a need for it:
you are of course welcome to implement it and oa.design and ... and
submit a package to CRAN.

> also, where can I find documentation about .Internal ?

Well, at one level it is the same as .External, so in the R-exts.texi
manual with 0.90.1.  At another level, .Internal can only be used to
add code to base R, and you follow the examples in src/main/names.c.
There is a planned section on .Internal in the draft R Language manual.

So the answer depends what you want to know: if you want to understand the
internal code, R-exts.texi will help. If you want to add code, we suggest
you use .External instead, and again R-exts.texi will help.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wsi at gcal.ac.uk  Wed Jan 12 15:03:58 2000
From: wsi at gcal.ac.uk (Bill Simpson)
Date: Wed, 12 Jan 2000 14:03:58 +0000 (GMT)
Subject: [R] compilation problem on linuxppc
Message-ID: <Pine.LNX.4.10.10001121359030.1921-100000@localhost.localdomain>

I am trying to install R-.90 on a powermac (4400) running linuxppc-1999.
This is a variant of RedHat.

./configure goes OK
make goes OK until it gets to dataentry.h.
Then it reports that it can't find some .h files.
dataentry.h 22 X11/X.h
dataentry.h 22 X11/Xlib.h
dataentry.h 22 X11/Xutil.h
dataentry.h 22 X11/keysym.h
dataentry.h 22 X11/cursorfont.h

I have installed X, but this seems to indicate that something went wrong
in the X installation? Any help greatly appreciated.

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From partha_bagchi at hgsi.com  Wed Jan 12 14:24:24 2000
From: partha_bagchi at hgsi.com (partha_bagchi@hgsi.com)
Date: Wed, 12 Jan 2000 08:24:24 -0500
Subject: [R] design()
Message-ID: <OFC732759B.3A835A96-ON85256864.0049646C@hgsi.com>


If I am not mistaken, design is part of the Frank Harrell collection of
functions in Splus. His copyright notice specifically states:
------begin quote ------
COPYRIGHT NOTICE

You may not port code in the Hmisc library to R.
You may distribute these functions freely as long as you do so without
financial gain, that you acknowledge the source, and that you
communicate improvements to the author.

The author is willing to help with problems.  Send E-mail to
fharrell at virginia.edu.

-----end quote -----

Strange in my opinion.



                                                                                                              
                    ros mathieu                                                                               
                    <rosm at ufrima.imag.fr        To:     R-help <r-help at stat.math.ethz.ch>                     
                    >                           cc:                                                           
                    Sent by:                    Subject:     [R] design()                                     
                    owner-r-help at stat.ma                                                                      
                    th.ethz.ch                                                                                
                                                                                                              
                                                                                                              
                    01/12/00 06:19 AM                                                                         
                    Please respond to                                                                         
                    mathieuros                                                                                
                                                                                                              
                                                                                                              




hello all,
Is there an equivalent in R to S-plus design() function, which creates an
object of class "design"? ?
why this funcion isn't implemented (I mean, is there a special reason)??
also, where can I find documentation about .Internal ?
thanks,
??? Mathieu

--
----------------------------------------------------------------------
Mathieu Ros - 13 rue b?vi?re - 38000 GRENOBLE - 04 76 491 370
http://www.multimania.com/mathieuros/index2.htmlDESS ing?nierie
math?matique (biostatistiques)
Universite Joseph Fourier, Grenoble
----------------------------------------------------------------------
A single death is a tragedy; a million is a statistic. Joseph STALINE





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From chong at stat.purdue.edu  Wed Jan 12 15:44:38 2000
From: chong at stat.purdue.edu (Chong Gu)
Date: Wed, 12 Jan 2000 09:44:38 -0500
Subject: [R] Problems creating a random sample
In-Reply-To: 
	<Pine.LNX.3.96.1000112125916.282A-100000@18-76.campusnet.ucl.ac.be>
	(message from Adriane Leal on Wed, 12 Jan 2000 13:05:21 +0100 (CET))
Message-ID: <200001121444.JAA165470@odds.stat.purdue.edu>

   Date: Wed, 12 Jan 2000 13:05:21 +0100 (CET)
   From: Adriane Leal <loparic at student.fsa.ucl.ac.be>
   X-Sender: loparic at 18-76.campusnet.ucl.ac.be
   MIME-Version: 1.0
   Content-Type: TEXT/PLAIN; charset=US-ASCII
   Sender: owner-r-help at stat.math.ethz.ch
   Precedence: bulk

   Hi!

   I'm supposed to create a random sample bivariate normal variates of size
   equal to 250 with  mean vector (-1,1) and cov matrix (1,0.95,0.95,1)

   In S language I would write:

   > mean<-c(-1,1)
   > cov<-c(1,0.95,0.95,1)
   > covmat<-matrix(cov,nrow=2,ncol=2)
   > mvnorm<-rmvnorm(250,mean,covmat)
   ... and it should work

   I've tried this in R, but it does not recognize "rmvnorm".

   (Error: couldn't find function "rmvnorm")

   Does anybody knows what function should I use in this case?

   My best regards,

   Adriane


Here is one way to do it:

covsqrt<-chol(matrix(c(1,.95,.95,1),2,2))
mvnorm<-matrix(rnorm(500),250,2)%*%covsqrt+c(-1,1)

Chong
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From plummer at iarc.fr  Wed Jan 12 16:46:34 2000
From: plummer at iarc.fr (Martyn Plummer)
Date: Wed, 12 Jan 2000 16:46:34 +0100 (CET)
Subject: [R] compilation problem on linuxppc
In-Reply-To: <Pine.LNX.4.10.10001121359030.1921-100000@localhost.localdomain>
Message-ID: <XFMail.000112164634.plummer@iarc.fr>

Under RedHat, header files are provided in a separate "devel" package.
If Linuxppc is a RedHat derivative then they have probably kept
this convention.  Try looking for a package called "XFree86-devel"
or something like it.

Alex Buerkle kindly provides RPMS for Linuxppc 5.0, which you will find
on CRAN.  You might find this easier if you are having trouble rolling
your own. In particular, you don't need any "devel" packages installed.

Martyn

On 12-Jan-00 Bill Simpson wrote:
> I am trying to install R-.90 on a powermac (4400) running linuxppc-1999.
> This is a variant of RedHat.
> 
> ./configure goes OK
> make goes OK until it gets to dataentry.h.
> Then it reports that it can't find some .h files.
> dataentry.h 22 X11/X.h
> dataentry.h 22 X11/Xlib.h
> dataentry.h 22 X11/Xutil.h
> dataentry.h 22 X11/keysym.h
> dataentry.h 22 X11/cursorfont.h
> 
> I have installed X, but this seems to indicate that something went wrong
> in the X installation? Any help greatly appreciated.
> 
> Bill Simpson
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From chong at stat.purdue.edu  Wed Jan 12 17:00:33 2000
From: chong at stat.purdue.edu (Chong Gu)
Date: Wed, 12 Jan 2000 11:00:33 -0500
Subject: [R] Problems creating a random sample
In-Reply-To: <200001121444.JAA165470@odds.stat.purdue.edu> (message from Chong
	Gu on Wed, 12 Jan 2000 09:44:38 -0500)
Message-ID: <200001121600.LAA30408@odds.stat.purdue.edu>

   Date: Wed, 12 Jan 2000 09:44:38 -0500
   From: Chong Gu <chong at stat.purdue.edu>
   CC: r-help at stat.math.ethz.ch
   Sender: owner-r-help at stat.math.ethz.ch
   Precedence: bulk

   covsqrt<-chol(matrix(c(1,.95,.95,1),2,2))
   mvnorm<-matrix(rnorm(500),250,2)%*%covsqrt+c(-1,1)

   Chong

Sorry, a mistake here.  The second line should be 

mvnorm<-t(t(matrix(rnorm(500),250,2)%*%covsqrt)+c(-1,1))
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From plummer at iarc.fr  Wed Jan 12 17:35:32 2000
From: plummer at iarc.fr (Martyn Plummer)
Date: Wed, 12 Jan 2000 17:35:32 +0100 (CET)
Subject: [R] Usage of p/d/qnorm
In-Reply-To: <810F20AC3F77D311B4690090275514A7011D65@dc-poh-w.kin.charite.de>
Message-ID: <XFMail.000112173532.plummer@iarc.fr>

On 12-Jan-00 ralf.herold at charite.de wrote:
> Hello,
> 
> could You please help: I am looking for a way to formulate test accuracy
> measures such as test sensitivity, specificity, predictive values, and
> correct classification rate using p/d/qnorm. The tests' primary values
> follow a bimodal distribution, which is modelled by a mixture of two normal
> distributions:
> 
>      p  * dnorm ((x - u1) / s1) / s1 +
> (1 - p) * dnorm ((x - u2) / s2) / s2)
> 
> {written like in Venables & Ripley, 2nd Ed., p. 288}. So, the first and
> second summand would correspond to truly negative and positive status,
> respectively, whereas the test would be termed negative or positive with
> respect to a varying x cut off value.
> 
> How could one possibly formulate using p/d/qnorm e.g. the specificity:
> f(x)= number of positive tests at cut off x / total number of truly
> positives ?

That's not the specificity. It looks like (an estimate of) the 
sensitivity, except the numerator should be the number of truly positives
who test positive.

Sensitivity = Pr (Test status +ve | True status +ve)
            = 1 - pnorm((x-u2)/s2)

Specificity = Pr (Test status -ve | True status -ve)
            = pnorm((x-u1)/s1)

The mixture proportions are irrelevant, since you're conditioning
on true status. (I'm assuming that u2 > u1 and values above x are
considered positive.  This is true in every example I've seen).

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From michael.m.meyer at boeing.com  Wed Jan 12 17:32:10 2000
From: michael.m.meyer at boeing.com (Michael Meyer)
Date: Wed, 12 Jan 2000 08:32:10 -0800
Subject: [R] Is R-help gatewayed into usenet?
Message-ID: <200001121632.IAA02599@desire.rt.cs.boeing.com>

Does anyone know if the r-help mailing list is gatewayed into a usenet 
mailing list. (S-news is available as  aus.stats.s  and perhaps 
elsewhere).

Replies to me.  I'll summarize if there is any response.

Regards, --Mike

Mike Meyer, Applied Statistics, The Boeing Company




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From marcus.eger at physik.uni-marburg.de  Wed Jan 12 19:06:44 2000
From: marcus.eger at physik.uni-marburg.de (Eger)
Date: Wed, 12 Jan 2000 19:06:44 +0100
Subject: [R] anybody XEmacs AND ESS with working filename completion?
Message-ID: <387CC2B4.1A405338@physik.uni-marburg.de>

Hello,
I have been using ESS5.1.11 and have troubles when trying filename
completion. Under xemacs20.4 (debian) - when I press TAB inside a
(R)-string, the
message is "last thing matched was not a buffer".
Completion of objects works fine - and under gnu emacs there is no
problem either.

I get the same error as above when I call M-x comint-dynamic-complete.
But when I call M-x comint-dynamic-complete-filename - everything works
fine!
Does anybody know the solution?
Thanks
Marcus
-- 
+-------------------------------------------------------
| Marcus Eger
| Philipps Universitaet Marburg
| Fachbereich Physik AG Neurophysik
| Renthof 7
| 35032 Marburg
| Tel. +49 6421 282-4169
| Fax  +49 6421 282-7034
+-------------------------------------------------------
| E-Mail: marcus.eger at physik.uni-marburg.de
+-------------------------------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Michael.Wisnewski at t-online.de  Wed Jan 12 21:23:39 2000
From: Michael.Wisnewski at t-online.de (Mike)
Date: Wed, 12 Jan 2000 21:23:39 +0100
Subject: [R] Rweb
Message-ID: <128UIt-0z0elkC@fwd01.sul.t-online.de>

Hi folks,

Could you tell me (a) good newsgroup/s or mailing lists concerning

	(1) Rweb in general
	(2) Rweb and Java,			please.

Cheers,


Michael Wisnewski
	

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Thu Jan 13 11:02:31 2000
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Thu, 13 Jan 2000 11:02:31 +0100 (MET)
Subject: [R] Rweb
In-Reply-To: <128UIt-0z0elkC@fwd01.sul.t-online.de>
References: <128UIt-0z0elkC@fwd01.sul.t-online.de>
Message-ID: <14461.41655.216811.28930@gargle.gargle.HOWL>

>>>>> "Mike" == Mike  <Michael.Wisnewski at t-online.de> writes:

    Mike> Hi folks,
    Mike> Could you tell me (a) good newsgroup/s or mailing lists concerning

    Mike> (1) Rweb in general
    Mike> (2) Rweb and Java,			please.

(for those who don't know: Read about it (and find the URL) in the R-FAQ).

I think there's no such group.
You may start "mis"using (:-) R-help for it...

Also, Rweb has an author with an E-mail....

Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From barg at cs.tu-berlin.de  Thu Jan 13 11:19:05 2000
From: barg at cs.tu-berlin.de (Martin Barghoorn)
Date: Thu, 13 Jan 2000 11:19:05 +0100
Subject: [R] The Array Programming Languages Conference APL-Berlin-2000
Message-ID: <387DA699.176009CC@cs.tu-berlin.de>

Hello!
The Array Programming Languages Conference  will be from

24th - 27th July 2000

Please look at:

http://stat.cs.tu-berlin.de/APL-Berlin-2000/

Chairman's Address

APL Berlin 2000 will take place in a city which is worth a visit even
without array processing languages. There is a fortunate coincidence:
Much activity in scientific and commercial institutions is based on such

languages. Considering this and the ongoing construction of arrays for
living, working and governing the "Berlin Republic" gave rise to the
theme of the conference. I would like to invite you to contribute to the

success of the event by participating, submitting papers or short
communications, offering tutorials and workshops, presenting posters or
organising birds-of-a-feather sessions. I am looking forward to seeing
you, listening to your presentations or viewing your exhibitions.
We are calling for your contributions!

- Dieter Lattermann -

Topics

This conference seeks contributions which highlight the value and
importance of array processing languages in finding solutions to
problems and
in creating new strategies for programming. How do array processing
languages facilitate rapid development, prototyping and toolbox
creation?

Programming is a constantly evolving discipline. New and challenging
applications require more realistic simulations, stochastic methods,
massive data manipulation, and distributed computing. What is the role
played by array processing languages in these areas?

Computers are getting faster and faster, allowing larger and more
sophisticated problems to be solved within a reasonable period of time.
This opens the door to new applications of computers, in turn requiring
even more data to be managed and controlled. Are the concepts of today's

array processing languages able to meet these challenges?

Many programming languages and symbolic interpreters, including APL, R,
S-Plus,
Fortran 95, HPF, J, MATLAB, MAPLE, NIAL, SAC are becoming stronger array

processing languages. What features do these languages have in common?
How do they differ? Are they converging in terms of primitives,
parallelism,
functionality, data and control flow, interfaces to hardware and
software,
and in communication inside one computer and to the outer world?

The success of a language depends not only on its quality, but on the
development environment - profilers and debuggers - and on its toolboxes

and libraries. These permit people to attack a problem quickly and
successfully.

Topics of interest include, but are not restricted to:

    State of the art of array processing languages:
        Actual situation
        Forthcoming features
        Future expectations
    Array processing languages in computer sciences:
        Object-oriented programming
        Meta level programming
        Parallelism and Concurrency
        Interfaces and Communication
        Artificial Intelligence
        APLs and the World Wide Web
    Challenging applications solved with array processing languages:
        Finance and insurance
        Simulation of scientific, technical, economical and social
phenomena
        Control of processes and plants
        Knowledge acquisition
    Toolboxes for all varieties of applications:
        Data representation, graphics
        Graphical User Interfaces
        Neural networks, fuzzy logic
    Array processing languages in education:
        Teaching APLs
        Teaching with APLs
        APLs in school
        Student projects
    Theory and practice in array processing language design and
implementation:
        Optimization of APL programs
        Language design in APLs
        APLs and irregular data structures
        Shortcomings of today's APLs

Types of Contributions

  Paper:
               45 Min Presentation (+ 15 min discussion)
  Short communication:
               20 min presentation (+ 10 min discussion)
  Tutorial:
               90 min interactive session, several sessions may be
booked
  Workshop:
              2 h computer-equipped introduction into a tool box or a
              new technique, several connected or separate sessions
              may be booked.
  Poster:
                   presentation of achievements, ideas and topics to be
discussed
  Birds-of-a-feather



Submission

Abstracts are welcome now and should be submitted as plain ASCII files.
Drafts and final versions should be submitted as LaTeX2e or MS Word
files.
Templates and Style files will be available here.

Addresses for submission

All contributions are preferred to be received by e-mail.
Alternatively they may be sent by fax or standard mail.

E-mail:

    Dieter Kilsch: kilsch at fh-bingen.de
    Robert Bernecky: bernecky at acm.org
    Dieter Lattermann: Dieter_Lattermann at compuserve.com

Fax:

    Dieter Kilsch: +49 6721 409 104 (from February 1, 2000)

Mail addresses:

     Dieter Kilsch
     Rauschbergstra?e 1
     81825 M?nchen
     Germany

     (up to January 31, 2000)

                       Dieter Kilsch
                       FH Bingen
                       Berlinstra?e 109
                       55411 Bingen
                       Germany
                       (from February 1, 2000)


    Robert Bernecky
    Snake Island Research Inc
    18 Fifth Street, Ward's Island
    Toronto, Ontario M5J 2B9
    Canada

    Dieter Lattermann
    Rheinstr. 23
    69190 Walldorf
    Germany

Proceedings

Papers, short communications, tutorials and workshops will be published
in the Conference Proceedings which will be available at the conference.

Deadlines

  Papers
           January 31, 2000      1 page abstract indicating the category

of contribution

           February 29, 2000   First acceptance

           April 30, 2000        Draft

           May 20, 2000          Acceptance notification

           June 15, 2000          Final version

  Regards
  Martin B.
***********************************************************************
* Martin BARGHOORN, Computer Science, Technical University of Berlin  *
* Sekr. FR 6-9, Franklinstr. 28, D-10587 Berlin, Germany              *
* Mail: barg at cs.tu-berlin.de , Web: http://stat.cs.tu-berlin.de/~barg/*
* Telephon(TUB): 030 314 24 392/73571, Faksimile(TUB): 030 314 25 901 *
***********************************************************************



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jlindsey at alpha.luc.ac.be  Thu Jan 13 13:36:19 2000
From: jlindsey at alpha.luc.ac.be (Jim Lindsey)
Date: Thu, 13 Jan 2000 13:36:19 +0100 (MET)
Subject: [R] nlme
In-Reply-To: <6rpuvfxie1.fsf@franz.stat.wisc.edu> from "Douglas Bates" at Jan 06, 2000 10:41:10 AM
Message-ID: <200001131236.NAA18843@alpha.luc.ac.be>

After a lot of struggle and considerable help from my Chinese
colleague (who is on the R list), I have managed to fit a few models
with nlme.

I have discovered that nlme is extremely sensitive to starting
values. I have never experienced this with any other nonlinear
optimization involving nlm.

One of the reasons for some of the weird error messages was that the
default value of stepmax for nlm is far too large.

I still have not been able to fit more than one covariate in fixed:

fixed=list(p1+p2~1,p3~sex)

works but

fixed=list(p1+p2~1,p3~sex+bilirubin)

does not, as pointed out in my previous email, giving the error:

Error in fixed[[nm]][[3]] != "1" : comparison (2) is possible only for vector types

How can one easily tell from the summary() output exactly how many
parameters have been estimated by nlme (including all variances)
except by dividing the AIC by 2 and comparing to the -logLik?

I do not understand the following:

Without a random effect,

> print(summary(resmls <- nls(logconcm~p1-p3+log(dose/(exp(p1)-exp(p2))*
+       (exp(-exp(p2)*tm)-exp(-exp(p1)*tm))),
+ 	control=nls.control(minFactor=0.00001),
+ 	data=datam,start=list(p1=0.5,p2=-4,p3=4),trace=F)))

Formula: logconcm ~ p1 - p3 + log(dose/(exp(p1) - exp(p2)) * (exp(-exp(p2) * 
    tm) - exp(-exp(p1) * tm)))

Parameters:
   Estimate Std. Error  t value
p1  0.52120    0.05981    8.715
p2 -3.88560    0.03004 -129.342
p3  4.00112    0.02319  172.507

Residual standard error: 0.4604 on 856 degrees of freedom

Correlation of Parameter Estimates:
        p1      p2
p2 -0.3756        
p3  0.5583 -0.6538

the volume is estimated to be

> exp(4.00112)
[1] 54.65933

a reasonable value. However, when volume is random,

> print(summary(resm2bf <- nlme(logconcm~p2-p3+log(dose/(exp(p1)-exp(p2))*
+ 	(exp(-exp(p2)*tm)-exp(-exp(p1)*tm))),start=list(fixed=c(-0.3,-5,0)),
+ 	fixed=list(p1+p2+p3~1),random=pdDiag(p3~1),weights=varExp(2),
+ 	groups=~subj,data=datam,method="ML")))
Nonlinear mixed-effects model fit by maximum likelihood
  Model: logconcm ~ p2 - p3 + log(dose/(exp(p1) - exp(p2)) * (exp(-exp(p2) *      tm) - exp(-exp(p1) * tm))) 
 Data: datam 
       AIC      BIC    logLik
  511.0899 539.6245 -249.5449

Random effects:
 Formula: p3 ~ 1 | subj
               p3  Residual
StdDev: 0.1998116 0.2759416

Variance function:
 Structure: Exponential of variance covariate
 Formula: ~fitted(.) 
 Parameter estimates:
   expon 
-0.42927 
Fixed effects: list(p1 + p2 + p3 ~ 1) 
       Value  Std.Error  DF    t-value p-value
p1 -0.395378 0.03740172 839  -10.57110  <.0001
p2 -3.772868 0.02390463 839 -157.83002  <.0001
p3  0.488964 0.06350886 839    7.69914  <.0001
 Correlation: 
   p1     p2    
p2 -0.473       
p3 -0.608  0.499

Standardized Within-Group Residuals:
       Min         Q1        Med         Q3        Max 
-8.3650734 -0.3426087  0.1233143  0.6027582  3.2001694 

Number of Observations: 859
Number of Groups: 18 
Warning message: 
NA/Inf replaced by maximum positive value 

the volume is estimated to be

> exp(0.488964)
[1] 1.630626

which is medically meaningless. (Unfortunately, from summary() there
is no way to know that the second model does fit far better than the
first. These are not the same data as in previous emails: here
metabolite, previously parent drug.) This estimate does not change if
all three parameters are random. For comparison, non-normal
autoregression models fit better than these normal random coefficient
models and do not distort the estimate of the volume.
  Jim
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Jan 13 14:26:09 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 13 Jan 2000 13:26:09 +0000 (GMT)
Subject: [R] nlme
In-Reply-To: <200001131236.NAA18843@alpha.luc.ac.be>
Message-ID: <Pine.GSO.4.05.10001131319560.813-100000@auk.stats>

On Thu, 13 Jan 2000, Jim Lindsey wrote:

> After a lot of struggle and considerable help from my Chinese
> colleague (who is on the R list), I have managed to fit a few models
> with nlme.
> 
> I have discovered that nlme is extremely sensitive to starting
> values. I have never experienced this with any other nonlinear
> optimization involving nlm.

I have, much of the time, and not anything like so much with other
optimizers (such as those now added for the development version).

> One of the reasons for some of the weird error messages was that the
> default value of stepmax for nlm is far too large.

Well, it is an absolute value, and too large for some problems, too small
for others. We have changed the logic a bit for 0.99.0 so that nlm makes a
better job of finding an initial step, and have hopes of improving further.
nlme should probably set stepmax to ca 10.  The problem stems from the
assumptions nlm is making about the initial Hessian, without checking them.

Brian

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From holzer at stat.math.ethz.ch  Thu Jan 13 17:56:27 2000
From: holzer at stat.math.ethz.ch (Peter Holzer)
Date: Thu, 13 Jan 2000 17:56:27 +0100 (MET)
Subject: [R] problems with understanding behaviour of glm
Message-ID: <14462.955.118764.453848@gargle.gargle.HOWL>

Dear R users,

I don't understand, what happens in glm in the following example (note that
in S-Plus this example finishes with an almost perfect fit, but also 49
warnings):

> fit.small <- glm(SKR.ein.aus ~ ., family = binomial, data = daten, maxit=100)
Error in (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  : inner loop 2; can't correct step size
In addition: Warning messages: 
1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
2: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
3: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
4: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
5: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
6: Step size truncated due to divergence in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
7: Step size truncated: out of bounds. in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  

> fit.small <- glm(SKR.ein.aus ~ ., family = binomial, data = daten, maxit=10)
Warning messages: 
1: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
2: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
3: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
4: fitted probabilities of 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
5: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  

> cbind(daten$SKR.ein.aus, round(fit.small$fitted,2), fit.small$residuals, fit.small$weights)
    [,1] [,2]           [,3]          [,4]
117    0 0.20 -1.2277296e+00 1.6099564e-01
118    1 1.00  1.2428952e+18 1.4712258e-42
119    1 1.00 -1.2317261e+01 2.1354563e-06
120    1 1.00  2.6068644e+19 3.3443478e-45
121    1 1.00  4.4764781e+21 1.1341627e-49
122    1 1.00  2.4878180e+10 3.6720713e-27
123    1 1.00  2.1799904e+12 4.7823256e-31
124    1 1.00  4.5198826e+33 1.1124846e-73
125    1 1.00 -3.5677823e+01 1.6804826e-15
126    1 1.00 -3.4034938e+01 3.0461116e-14
127    1 1.00  8.1565287e+21 3.4161550e-50
128    1 1.00 -3.8083599e+01 1.4619518e-15
129    1 1.00 -1.6188633e+01 1.1443040e-07
130    1 0.66  1.4948301e+00 2.2939566e-01
131    1 0.40  2.5545963e+00 2.3628997e-01
132    1 1.00  8.2667708e+10 3.3256498e-28
133    0 0.00  8.2885334e+00 7.5863272e-04
134    0 0.62 -2.6994067e+00 2.2881359e-01
135    1 1.00 -3.4141496e+01 1.2481102e-14
136    1 1.00 -1.6016066e+01 7.4169082e-07
137    0 0.00  1.0315917e+00 1.6787319e-02
138    0 0.16 -1.4051577e+00 1.1015032e-01

It is somehow strange to me that e.g. the second observation fits almost
perfectly (actually it is 0.99999773), but that it has such a high
residual. Obviously this is somehow compensated by the extremely low
weight, but I don't understand actually what happens. Are the problems due
to the possible perfect fit as it results in S-Plus?

Thanks in advance for the assistance.

Peter

PS: The data is the following:

"daten" <-
structure(list(TAGNR = c(1, 2, 3, 4, 5, 6, 7, 8, 10, 11, 12, 
13, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24), FAC.A1 = c(4.945936343, 
0.757121179, 3.339849734, 0.446432497, -0.224455588, 0.786350506, 
0.466671197, -3.39436178, 0.8120849, 1.167138695, -1.049067864, 
0.628856055, 1.003535654, 1.970140467, 1.554729204, -1.35666524, 
1.165706939, 0.872892807, -1.031981412, 0.187765613, 1.115037792, 
0.800090304), FAC.A2 = c(1.051475524, 0.854196439, 1.622823744, 
-0.429025728, -2.763990226, -0.676443186, -1.805533411, 3.366224497, 
-0.290777149, -0.232696276, -1.508451163, -1.557580777, -1.124976767, 
0.804105173, -3.015786974, -0.979273314, -3.188779666, -2.008428463, 
-2.737199362, -2.623163019, -3.630011703, -3.843566947), MLDR = c(9687, 
9617, 9633, 9666, 9618, 9528, 9555, 9499, 9661, 9738, 9749, 9738, 
9649, 9696, 9604, 9580, 9508, 9605, 9674, 9726, 9703, 9705), 
    SKR.ein.aus = c(0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
    1, 1, 0, 0, 1, 1, 0, 0)), .Names = c("TAGNR", "FAC.A1", "FAC.A2", 
"MLDR", "SKR.ein.aus"), class = "data.frame", row.names = c("117", 
"118", "119", "120", "121", "122", "123", "124", "125", "126", 
"127", "128", "129", "130", "131", "132", "133", "134", "135", 
"136", "137", "138"))
____________________________________________________________

Peter Holzer                      phone: + 41 1 632 46 34
Seminar fuer Statistik, LEO C14   fax:   + 41 1 632 12 28
(Leonhardstr. 27)                  <holzer at stat.math.ethz.ch>
ETH (Federal Inst. Technology)
8092 Zurich                       http://www.stat.math.ethz.ch/~holzer/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jlindsey at alpha.luc.ac.be  Thu Jan 13 18:45:51 2000
From: jlindsey at alpha.luc.ac.be (Jim Lindsey)
Date: Thu, 13 Jan 2000 18:45:51 +0100 (MET)
Subject: [R] nlme
In-Reply-To: <Pine.GSO.4.05.10001131319560.813-100000@auk.stats> from "Prof Brian D Ripley" at Jan 13, 2000 01:26:09 PM
Message-ID: <200001131745.SAA01749@alpha.luc.ac.be>


> > I have discovered that nlme is extremely sensitive to starting
> > values. I have never experienced this with any other nonlinear
> > optimization involving nlm.
> 
> I have, much of the time, and not anything like so much with other
> optimizers (such as those now added for the development version).

The above statement is true even for models that I can fit with my
functions as well as nlme.

I am very much looking forward to the new optimizers. But I trust that
the original nlm algorithm will not disappear so that I can still
reproduce older consulting work and results in publications.

> 
> > One of the reasons for some of the weird error messages was that the
> > default value of stepmax for nlm is far too large.
> 
> Well, it is an absolute value, and too large for some problems, too small
> for others. We have changed the logic a bit for 0.99.0 so that nlm makes a
> better job of finding an initial step, and have hopes of improving further.
> nlme should probably set stepmax to ca 10.  The problem stems from the
> assumptions nlm is making about the initial Hessian, without checking them.
> 

I would agree with 10 if it has to be a fixed constant. In my
functions, all arguments to nlm have default values calculated from
the initial estimates supplied by the user, which may partially
explain why I have fewer problems with nlm.
  Jim
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Jan 13 18:57:13 2000
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 13 Jan 2000 17:57:13 +0000 (GMT)
Subject: [R] problems with understanding behaviour of glm
Message-ID: <200001131757.RAA23463@toucan.stats.ox.ac.uk>

> From: Peter Holzer <holzer at stat.math.ethz.ch>
> Date: Thu, 13 Jan 2000 17:56:27 +0100 (MET)
> 
> I don't understand, what happens in glm in the following example (note that
> in S-Plus this example finishes with an almost perfect fit, but also 49
> warnings):

Yes, this is known as linear (complete) separation, and means your
model is not at all appropriate (and IWLS does not fit it well).
There is a linear combination of the predictors which can give
all positive observations positive sign and all negative observations
negative sign. Then no MLE exists, but the likelihood has a supremum
corresponding to giving all observations fitted probabilities zero or one.
Most books do not cover this, but Santer & Duffy (1989) (for one) does.

> > fit.small <- glm(SKR.ein.aus ~ ., family = binomial, data = daten, 
maxit=100)
> Error in (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  : 
inner loop 2; can't correct step size

That's not what I get, but I guess the problem is the same: computations
on very large numbers are generating NaNs.  S-PLUS is much more careful
that R, and I will try to add some care to R.

> cbind(daten$SKR.ein.aus, round(fit.small$fitted,2), fit.small$residuals, 
fit.small$weights)
[...]

> It is somehow strange to me that e.g. the second observation fits almost
> perfectly (actually it is 0.99999773), but that it has such a high
> residual. Obviously this is somehow compensated by the extremely low
> weight, but I don't understand actually what happens. Are the problems due
> to the possible perfect fit as it results in S-Plus?

Yes. Actually, that is not a high residual, that is a large _working_
residual, and it is large precisely because it has been divided by the
weight.  Please do not assume that the $residual and $fitted components
are the residuals and fitted values, but use the extractor functions
provided. The help page for glm does not describe (in R) what the
components mean.  Look up what the IWLS algorithm does in the 
binomial(logit) case: it is quite simple to describe.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rosm at ufrima.imag.fr  Thu Jan 13 19:01:56 2000
From: rosm at ufrima.imag.fr (ros mathieu)
Date: Thu, 13 Jan 2000 19:01:56 +0100
Subject: [R] design()
References: <200001121231.MAA13532@toucan.stats.ox.ac.uk>
Message-ID: <387E1314.3648AA34@ufrima.imag.fr>

hello R-users,
As design() doesn't exists yet in R (thanks to prof Brian Ripley for pointing
me that out), I've decided to write a small (?) package. This one doesn't
contains many functions yet (design and oa.design) and I would be grateful to
people who want something specific or who know more (than me ;-) about
design() to send me a mail.
I'm asking myself questions about the opportunity of such a package so any
comments would be appreciated.
thanks,
    Mathieu

--
----------------------------------------------------------------------
Mathieu Ros - 13 rue b?vi?re - 38000 GRENOBLE - 04 76 491 370
http://www.multimania.com/mathieuros/index2.html
DESS ing?nierie math?matique (biostatistiques)
Universite Joseph Fourier, Grenoble
----------------------------------------------------------------------
A single death is a tragedy; a million is a statistic. Joseph STALINE


-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20000113/7f913a48/attachment.html

From cmf at kba.sks.au.dk  Fri Jan 14 15:26:22 2000
From: cmf at kba.sks.au.dk (Casper Frederiksen)
Date: Fri, 14 Jan 2000 15:26:22 +0100
Subject: [R] Error in dist command
Message-ID: <387F320E.EF7A5EB9@kba.sks.au.dk>

Can anybody tell me why I get the following error:

Error in dist(airquality) : NA/NaN/Inf in foreign function call (arg 1)


Thanks,

Casper Frederiksen



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Friedrich.Leisch at ci.tuwien.ac.at  Fri Jan 14 15:38:30 2000
From: Friedrich.Leisch at ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 14 Jan 2000 15:38:30 +0100 (CET)
Subject: [R] Error in dist command
In-Reply-To: <387F320E.EF7A5EB9@kba.sks.au.dk>
References: <387F320E.EF7A5EB9@kba.sks.au.dk>
Message-ID: <14463.13542.578133.927437@galadriel.ci.tuwien.ac.at>

>>>>> On Fri, 14 Jan 2000 15:26:22 +0100,
>>>>> Casper Frederiksen (CF) wrote:

CF> Can anybody tell me why I get the following error:
CF> Error in dist(airquality) : NA/NaN/Inf in foreign function call (arg 1)

This data set contains missing values as can be seen in:

R> summary(airquality)
     Ozone           Solar.R           Wind             Temp      
 Min.   :  1.00   Min.   :  7.0   Min.   : 1.700   Min.   :56.00  
 1st Qu.: 18.00   1st Qu.:115.8   1st Qu.: 7.400   1st Qu.:72.00  
 Median : 31.50   Median :205.0   Median : 9.700   Median :79.00  
 Mean   : 42.13   Mean   :185.9   Mean   : 9.958   Mean   :77.88  
 3rd Qu.: 63.25   3rd Qu.:258.8   3rd Qu.:11.500   3rd Qu.:85.00  
 Max.   :168.00   Max.   :334.0   Max.   :20.700   Max.   :97.00  
 NA's   : 37.00   NA's   :  7.0                                   
     Month            Day      
 Min.   :5.000   Min.   : 1.0  
 1st Qu.:6.000   1st Qu.: 8.0  
 Median :7.000   Median :16.0  
 Mean   :6.993   Mean   :15.8  
 3rd Qu.:8.000   3rd Qu.:23.0  
 Max.   :9.000   Max.   :31.0  
                               

(NA's in Ozone and Solar.R) which dist cannot handle.

Try something like

dist(airquality[complete.cases(airquality),])

to use only observations without missing values.

-- 
-------------------------------------------------------------------
                        Friedrich  Leisch 
Institut f?r Statistik                     Tel: (+43 1) 58801 10715
Technische Universit?t Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstra?e 8-10/1071      Friedrich.Leisch at ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From vogt at stat.math.ethz.ch  Fri Jan 14 15:47:49 2000
From: vogt at stat.math.ethz.ch (Josef Vogt)
Date: Fri, 14 Jan 2000 15:47:49 +0100 (MET)
Subject: [R] tree/rpart
Message-ID: <14463.14101.786557.378765@gargle.gargle.HOWL>

I try to implement the boosting algorithm from Schapire/Freund.

As weak learners I want to use trees with only two (stumps)  or four
terminal nodes. I tried in R with the package rpart and tree. With the
package tree I got some troubles with weights in a classification tree. And
with the rpart command I dont know how to produce a stump or a tree with a
certain number of terminal nodes.

My question: How can I produce with the command rpart such a tree, if the
tree sould be grown "best-first" without pruning, always using weights.

thanks,

josef vogt
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetil.kjernsmo at astro.uio.no  Fri Jan 14 16:59:08 2000
From: kjetil.kjernsmo at astro.uio.no (Kjetil Kjernsmo)
Date: Fri, 14 Jan 2000 16:59:08 +0100 (MET)
Subject: [R] Matrix output from drawing functions
Message-ID: <Pine.OSF.4.05.9912211739210.25023-100000@rasalhague>

Dear all,

I'm a bit confused about the output from functions that generates random
values, e.g. rpois. I'm using 0.65.1 on Digital UNIX alphaev6.

If I say
> rpois(10,5)
output is not unexpectedly:
 [1] 4 6 5 7 6 5 2 2 5 3

but I figured that if I go:
> rpois(10,1:10)
I would get a 10x10 matrix as output, with random values for each of
the vector elements in the row vectors, but I'm getting 
 [1]  3  4  3  4  6  9 10  6 11  9
so, that is obviously not the case... :-) BTW, what am I getting...?

So, I went on to thinking that 
> outer(10, 1:10, rpois)
would do the trick, but no.... Again, what am I getting?

So, is there a simple way of doing this...? If not, would it be reasonable
for me to request this as a feature in future releases?

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj at astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster at skepsis.no 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Fri Jan 14 17:15:42 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jan 2000 17:15:42 +0100
Subject: [R] Matrix output from drawing functions
In-Reply-To: Kjetil Kjernsmo's message of "Fri, 14 Jan 2000 16:59:08 +0100 (MET)"
References: <Pine.OSF.4.05.9912211739210.25023-100000@rasalhague>
Message-ID: <x27lhcr5n5.fsf@blueberry.kubism.ku.dk>

Kjetil Kjernsmo <kjetil.kjernsmo at astro.uio.no> writes:

> but I figured that if I go:
> > rpois(10,1:10)
> I would get a 10x10 matrix as output, with random values for each of
> the vector elements in the row vectors, but I'm getting 
>  [1]  3  4  3  4  6  9 10  6 11  9
> so, that is obviously not the case... :-) BTW, what am I getting...?

try plot(rpois(100,1:100)) and I think you'll see the light...

> So, is there a simple way of doing this...? If not, would it be reasonable
> for me to request this as a feature in future releases?

matrix(rpois(100,rep(1:10,10)),10,byrow=T) should do it. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Fri Jan 14 17:48:31 2000
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 14 Jan 2000 17:48:31 +0100 (MET)
Subject: [R] Matrix output from drawing functions
In-Reply-To: <Pine.OSF.4.05.9912211739210.25023-100000@rasalhague>
References: <Pine.OSF.4.05.9912211739210.25023-100000@rasalhague>
Message-ID: <14463.21343.595252.593795@gargle.gargle.HOWL>

>>>>> "Kjetil" == Kjetil Kjernsmo <kjetil.kjernsmo at astro.uio.no> writes:

    Kjetil> Dear all, I'm a bit confused about the output from functions
    Kjetil> that generates random values, e.g. rpois. I'm using 0.65.1 on
    Kjetil> Digital UNIX alphaev6.

    Kjetil> If I say
    >> rpois(10,5)
    Kjetil> output is not unexpectedly: [1] 4 6 5 7 6 5 2 2 5 3

    Kjetil> but I figured that if I go:
    >> rpois(10,1:10)
    Kjetil> I would get a 10x10 matrix as output, with random values for
    Kjetil> each of the vector elements in the row vectors, but I'm getting
    Kjetil> [1] 3 4 3 4 6 9 10 6 11 9 so, that is obviously not the
    Kjetil> case... :-) BTW, what am I getting...?
one for each lambda. 
There is argument "recycling"..
One could argue that R should issue a warning here, but
it *is* completely S compatible...

Maybe this shows better what happens:

 > round(rnorm(4, m=c(0,100), sd = c(1e-4,1,10)),2)
 [1]   0.00 100.77  10.80 100.00

 i.e. (m,s) are  (0,"0"), (100,1), (0,10), and (100,"0")

------

    Kjetil> So, I went on to thinking that
    >> outer(10, 1:10, rpois)
    Kjetil> would do the trick, but no.... Again, what am I getting?

This was almost correct:
    > outer(rep(10,10), 1:10, rpois)
would have done the job.
To see more clearly what happens, rather use

   outer( rep(10,8), 1+2*(0:9), rpois)


Note that AFAIK there are no (?) functions in R (or S) that inherently do
"outer".  The general principle rather is "recycling".

Regards: Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cmf at kba.sks.au.dk  Fri Jan 14 17:54:43 2000
From: cmf at kba.sks.au.dk (Casper Frederiksen)
Date: Fri, 14 Jan 2000 17:54:43 +0100
Subject: [R] Self-Organized Maps
Message-ID: <387F54D3.D138CC2@kba.sks.au.dk>

Does any code exist for the use of SOM's?

Casper Frederiksen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Jan 14 20:29:22 2000
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 14 Jan 2000 19:29:22 +0000 (GMT)
Subject: [R] Error in dist command
Message-ID: <200001141929.TAA05890@toucan.stats.ox.ac.uk>


> Date: Fri, 14 Jan 2000 15:26:22 +0100
> From: Casper Frederiksen <cmf at kba.sks.au.dk>
> X-Accept-Language: en
> To: r-help at stat.math.ethz.ch
> Subject: [R] Error in dist command
> 
> Can anybody tell me why I get the following error:
> 
> Error in dist(airquality) : NA/NaN/Inf in foreign function call (arg 1)

> summary(airquality)    
     Ozone           Solar.R           Wind             Temp      
 Min.   :  1.00   Min.   :  7.0   Min.   : 1.700   Min.   :56.00  
 1st Qu.: 18.00   1st Qu.:115.8   1st Qu.: 7.400   1st Qu.:72.00  
 Median : 31.50   Median :205.0   Median : 9.700   Median :79.00  
 Mean   : 42.13   Mean   :185.9   Mean   : 9.958   Mean   :77.88  
 3rd Qu.: 63.25   3rd Qu.:258.8   3rd Qu.:11.500   3rd Qu.:85.00  
 Max.   :168.00   Max.   :334.0   Max.   :20.700   Max.   :97.00  
 NA's   : 37.00   NA's   :  7.0                                   
     Month            Day      
 Min.   :5.000   Min.   : 1.0  
 1st Qu.:6.000   1st Qu.: 8.0  
 Median :7.000   Median :16.0  
 Mean   :6.993   Mean   :15.8  
 3rd Qu.:8.000   3rd Qu.:23.0  
 Max.   :9.000   Max.   :31.0  

Note the NAs!

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From holzer at stat.math.ethz.ch  Mon Jan 17 12:01:29 2000
From: holzer at stat.math.ethz.ch (Peter Holzer)
Date: Mon, 17 Jan 2000 12:01:29 +0100 (MET)
Subject: [R] How to change several elements of an array simultaneously?
Message-ID: <14466.63113.210936.420267@gargle.gargle.HOWL>

I have a matrix `m' and two vectors `rs' and `cs'. I want to change m at the
positions (rs[1], cs[1]), (rs[2], cs[2]), ... to 1. Obviously I can do that by

> m[rs + (cs-1) * dim(m)[1]] <- 1

but I would just be interested whether I am missing a more "intuitive" way
of doing that.

Thanks in advance, Peter

____________________________________________________________

Peter Holzer                      phone: + 41 1 632 46 34
Seminar fuer Statistik, LEO C14   fax:   + 41 1 632 12 28
(Leonhardstr. 27)                  <holzer at stat.math.ethz.ch>
ETH (Federal Inst. Technology)
8092 Zurich                       http://www.stat.math.ethz.ch/~holzer/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From iosu at ensia.inra.fr  Fri Jan 14 12:14:21 2000
From: iosu at ensia.inra.fr (=?iso-8859-1?Q?Jes=FAs_Mar=EDa_Fr=EDas_Celayeta?=)
Date: Fri, 14 Jan 2000 12:14:21 +0100 (CET)
Subject: [R] Help with contrast settings in glm and lm
Message-ID: <Pine.LNX.3.96.1000114115013.10892C-100000@joxepa.ensia.inra.fr>

Hi!

	I am trying to validate some R code that we have been porting from
S (ellipse library) and now we are on the step of trying with some
examples to see if the code gives the same results as in S. I have
received some results from S-PLUS 4.5 help examples and I have some
trouble reproducing them. Apparently S+ uses helbert contrasts in
categorical variables as a default and R uses contrasts based in
orthogonal polynomials. However, in R there exists contr.helmert and I
would like to actually set R in a way that a regression procedure will use
helmert type contrasts (as in S+), in order to have the same results. 

	Is there a way to change the default contrasts used in regression
(lm and glm) so that after it the regression uses those contrasts? I have
tried options() with no too much sucess. I am probably loosing some page
in the manual, so just in the case I excuse myself in advance. 


This is the detailed thing.

1.-My fit with cntr.poly (the default) is
> glmfit.R

Call:  glm(formula = skips ~ ., family = poisson, data = solder.balance) 

Coefficients:
(Intercept)    Opening.L    Opening.Q     Solder.L       MaskA3 MaskB3  
   -0.06267     -1.33890      0.56194     -0.77763      0.42819 1.20225  
     MaskB6    PadTypeD4    PadTypeL4    PadTypeD6    PadTypeL6 PadTypeD7  
    1.86648      0.11000      0.37237     -0.25865     -0.55845 0.01156  
  PadTypeL7    PadTypeL8    PadTypeW9    PadTypeL9       Panel2 Panel3  
   -0.38021     -0.16115     -1.32758     -0.52645      0.33352 0.25440  

Degrees of Freedom: 719 Total (i.e. Null);  702 Residual
Null Deviance:      6856 
Residual Deviance: 1130         AIC: 2749 

2.-When I change the options for the contrasts for contr.helmert to try to
emulate S+ results.

> options(contrasts=c("contr.treatment", "contr.helmert"))
> glmfit.R.2<- glm(formula = skips ~ ., family = poisson, data =
solder.balance) 
> glmfit.R.2

Call:  glm(formula = skips ~ ., family = poisson, data = solder.balance) 

Coefficients:
(Intercept)     Opening1     Opening2      Solder1       MaskA3 MaskB3  
   -0.06267     -0.81749     -0.35867     -0.54987      0.42819 1.20225  
     MaskB6    PadTypeD4    PadTypeL4    PadTypeD6    PadTypeL6 PadTypeD7  
    1.86648      0.11000      0.37237     -0.25865     -0.55845 0.01156  
  PadTypeL7    PadTypeL8    PadTypeW9    PadTypeL9       Panel2 Panel3  
   -0.38021     -0.16115     -1.32758     -0.52645      0.33352 0.25440  

Degrees of Freedom: 719 Total (i.e. Null);  702 Residual
Null Deviance:      6856 
Residual Deviance: 1130         AIC: 2749 

> options("contrasts") 
$contrasts
[1] "contr.treatment" "contr.helmert"  

	which is the same as in 1 

3.- This result does quite differ from the glm in S+ using helmert
contrasts: 

> glmfit
Call:
glm(formula = skips ~ ., family = poisson, data = solder.balance)

Coefficients:
 (Intercept) Opening.L Opening.Q     Solder     Mask1     Mask2 Mask3   PadType1  PadType2 
   0.7356797 -1.338898 0.5619403 -0.7776274 0.2140968 0.3293834 0.3307507 0.05500044 0.1057882
   PadType3   PadType4   PadType5    PadType6     PadType7   PadType8 PadType9    Panel1 
 -0.1048597 -0.1228765 0.01308473 -0.04662037 -0.007583584 -0.1355021 -0.02828819 0.1667612
     Panel2 
 0.02921374

Degrees of Freedom: 720 Total; 702 Residual
Residual Deviance: 1130.48 


Thanks in advance for any help,


IOsu

-------------------------------------------------------------------------------
Jes?s Mar?a Fr?as Celayeta		"Valeu a pena? Tudo vale a pena
ENSIA-INRA, Av. des Olympiades, 1	se a alma n?o ? pequena
91744, Massy. FRANCE			Quem quer passar al?m do Bojador
Fax:intl+33+1+69935185			Tem que passar al?m da dor.
Phone:intl+33+1+69935191		Deus ao mar o perigo e abismo deu,
					Mas nele ? que espelhou o c?u"
-------------------------------------------------------------------------------








-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Mon Jan 17 12:20:10 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 2000 12:20:10 +0100
Subject: [R] How to change several elements of an array simultaneously?
In-Reply-To: Peter Holzer's message of "Mon, 17 Jan 2000 12:01:29 +0100 (MET)"
References: <14466.63113.210936.420267@gargle.gargle.HOWL>
Message-ID: <x2k8l9x7v9.fsf@blueberry.kubism.ku.dk>

Peter Holzer <holzer at stat.math.ethz.ch> writes:

> I have a matrix `m' and two vectors `rs' and `cs'. I want to change m at the
> positions (rs[1], cs[1]), (rs[2], cs[2]), ... to 1. Obviously I can do that by
> 
> > m[rs + (cs-1) * dim(m)[1]] <- 1
> 
> but I would just be interested whether I am missing a more "intuitive" way
> of doing that.

This one is probably a candidate for the title of "most often
overlooked feature":

    m[cbind(rs,cs)] <- 1

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Jan 17 13:14:24 2000
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 17 Jan 2000 12:14:24 +0000 (GMT)
Subject: [R] Help with contrast settings in glm and lm
Message-ID: <200001171214.MAA00735@toucan.stats.ox.ac.uk>

> Date: Fri, 14 Jan 2000 12:14:21 +0100 (CET)
> From: Jes?s Mar?a Fr?as Celayeta <iosu at ensia.inra.fr>
> 	I am trying to validate some R code that we have been porting from
> S (ellipse library) and now we are on the step of trying with some
> examples to see if the code gives the same results as in S. I have
> received some results from S-PLUS 4.5 help examples and I have some
> trouble reproducing them. Apparently S+ uses helbert contrasts in
> categorical variables as a default and R uses contrasts based in
> orthogonal polynomials. However, in R there exists contr.helmert and I
> would like to actually set R in a way that a regression procedure will use
> helmert type contrasts (as in S+), in order to have the same results. 
> 
> 	Is there a way to change the default contrasts used in regression
> (lm and glm) so that after it the regression uses those contrasts? I have
> tried options() with no too much sucess. I am probably loosing some page
> in the manual, so just in the case I excuse myself in advance. 

You need

options(contrasts=c("contr.helmert", "contr.poly"))

but you have been changing the wrong one.  The first is for unordered
factors, the second for ordered factors. The R help page does not say so, and
should: I have altered it to give the details and include this example.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Joerg.Kindermann at gmd.de  Mon Jan 17 16:00:41 2000
From: Joerg.Kindermann at gmd.de (Joerg Kindermann)
Date: Mon, 17 Jan 2000 16:00:41 +0100 (MET)
Subject: [R] dyn.load problem
Message-ID: <200001171500.QAA00726@yeu.gmd.de>

Hi,

I'm trying to write modified versions of R save/load functions which read
from/write to a char array instead of a file pointer. I want to compile
my functions into a library and dyn.load them. Of course the new functions
mySave/Load will use some of the internal R functions used by save/load,
for example  "MarkSave" (to be found in .../src/main/saveload.c). I
declared them as

external  void MarkSave(SEXP s);
....

in my code. When I do dyn.load("myLib.so") I get the error

Error in dyn.load(x, as.logical(local), as.logical(now)): unable to load shared
 library "myLib.so":
  myLib.so: undefined symbol: MarkSave

Can't I use R internals other than those visible in $R_HOME/include?


Thanks for some clarifying hints

--  Dr. Joerg Kindermann             GMD - AiS
            German National Research Center for Information Technology
                Schloss Birlinghoven, D-53754 St. Augustin, Germany
                   phone: +49 02241 142437 fax: +49 02241 142342
 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From plummer at iarc.fr  Mon Jan 17 18:06:21 2000
From: plummer at iarc.fr (Martyn Plummer)
Date: Mon, 17 Jan 2000 18:06:21 +0100 (CET)
Subject: [R] dyn.load problem
In-Reply-To: <200001171500.QAA00726@yeu.gmd.de>
Message-ID: <XFMail.000117180621.plummer@iarc.fr>

On 17-Jan-00 Joerg Kindermann wrote:
> Hi,
> 
> I'm trying to write modified versions of R save/load functions which read
> from/write to a char array instead of a file pointer. I want to compile
> my functions into a library and dyn.load them. Of course the new functions
> mySave/Load will use some of the internal R functions used by save/load,
> for example  "MarkSave" (to be found in .../src/main/saveload.c). I
> declared them as
> 
> external  void MarkSave(SEXP s);
> ....
> 
> in my code. When I do dyn.load("myLib.so") I get the error
> 
> Error in dyn.load(x, as.logical(local), as.logical(now)): unable to load
> shared
>  library "myLib.so":
>   myLib.so: undefined symbol: MarkSave
> 
> Can't I use R internals other than those visible in $R_HOME/include?

MarkSave is declared static in saveload.c, so it's not surprising you
can't access it.  In general you are probably better off using only the
functions declared in, e.g., Rinternals.h, since this defines an interface
to R.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tony at asynctechnology.com  Tue Jan 18 02:09:55 2000
From: tony at asynctechnology.com (Tony Fagan)
Date: Mon, 17 Jan 2000 18:09:55 -0700
Subject: [R] irregular time series
Message-ID: <001b01bf6150$c5701c40$fc3c0e3f@hal>

Hello,

Does R have objects to handle irregular time series data? For example, Splus uses the "its" object. I suppose I could write my own "its" function in R.

Thank You,

Tony Fagan
ASYNC Technology, Inc.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20000117/b8302bf9/attachment.html

From ripley at stats.ox.ac.uk  Tue Jan 18 08:40:32 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 18 Jan 2000 07:40:32 +0000 (GMT)
Subject: [R] irregular time series
In-Reply-To: <001b01bf6150$c5701c40$fc3c0e3f@hal>
Message-ID: <Pine.GSO.4.05.10001180735060.3891-100000@auk.stats>

On Mon, 17 Jan 2000, Tony Fagan wrote:

[long line wrapped manually]
> Does R have objects to handle irregular time series data? 
> For example, Splus uses the "its" object. 
> I suppose I could write my own "its" function in R.

R has no such classes. S-PLUS has "its" and "cts" and now has other classes
for calendar time series.  It makes almost no use of those classes though,
except to plot them.  It is unlikely that we will be adding such classes to
R unless they go with something useful to do with them, and if we do they
will need more structure than "its".

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hubert at stat.ubc.ca  Wed Jan 19 06:44:04 2000
From: hubert at stat.ubc.ca (Hubert Wong)
Date: Tue, 18 Jan 2000 21:44:04 -0800 (PST)
Subject: [R] Segmentation fault using integrate()
Message-ID: <200001190544.VAA01716@hajek.stat.ubc.ca>

Hi all,

Running R 0.90.1 on a RH 6.1 system.  Installation of the
integrate_2.1-2 package went smoothly.  My code contains a loop 
in which integrate() is called several times in each pass.  
I get a segmentation fault after what seems to be a random number 
of calls to integrate().  Debug output shows:

  Program received signal SIGSEGV, Segmentation fault.
  promiseArgs (el=0x40276414, rho=0x402977a4) at eval.c:1018
  1018	eval.c: No such file or directory.

Does anyone have any idea what's going on?  Thanks.

Hubert

======================================================================
Hubert Wong                    Department of Statistics
E-mail: hubert at stat.ubc.ca     University of British Columbia
======================================================================
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Wed Jan 19 15:40:58 2000
From: ben at zoo.ufl.edu (Ben Bolker)
Date: Wed, 19 Jan 2000 09:40:58 -0500 (EST)
Subject: [R] Segmentation fault using integrate()
In-Reply-To: <200001190544.VAA01716@hajek.stat.ubc.ca>
Message-ID: <Pine.LNX.4.10.10001190937050.20052-100000@bolker.zoo.ufl.edu>


  I'm not sure what's going on, but I have had a similar problem, and a
workaround.  The following code will fairly reliably crash R:

library(integrate)

besfun <- function(v,minx=1e-99) {
  if (all(v==0))
     besfun(minx,minx)
  else
      besselK(sqrt(sum(v^2)),0)
}

sqval <- function(lim) {
 print(lim)
 4/(2*pi)*adapt(ndim=2,lower=c(0,0),upper=c(lim,lim),minpts=200,maxpts=NULL,functn=besfun,eps=1e-4)$value
#gc()
}

xvec <- seq(0,10,length=101)
sqvec <- sapply(xvec,sqval)

## crashes R
sqvec <- sapply(xvec,sqval)

  I think the problem may have to do with cleanup on return from an error:
if I exclude 0 from xvec above, so that I don't get the following warning
messages

   Warning message:
   Ifail=2, lenwrk was too small. -- fix adapt() !
   Check the returned relerr! in: adapt(ndim = 2, lower = c(0, 0), upper

then I don't get the crashes.

  The workaround is to call gc() every time after you call integrate() ...
you can see if it works for you.

  Ben Bolker

On Tue, 18 Jan 2000, Hubert Wong wrote:

> Hi all,
> 
> Running R 0.90.1 on a RH 6.1 system.  Installation of the
> integrate_2.1-2 package went smoothly.  My code contains a loop 
> in which integrate() is called several times in each pass.  
> I get a segmentation fault after what seems to be a random number 
> of calls to integrate().  Debug output shows:
> 
>   Program received signal SIGSEGV, Segmentation fault.
>   promiseArgs (el=0x40276414, rho=0x402977a4) at eval.c:1018
>   1018	eval.c: No such file or directory.
> 
> Does anyone have any idea what's going on?  Thanks.
> 
> Hubert
> 
> ======================================================================
> Hubert Wong                    Department of Statistics
> E-mail: hubert at stat.ubc.ca     University of British Columbia
> ======================================================================
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
Ben Bolker                                  bolker at zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From sergei at stams.strath.ac.uk  Wed Jan 19 19:36:05 2000
From: sergei at stams.strath.ac.uk (Sergei Zuyev)
Date: Wed, 19 Jan 2000 18:36:05 +0000
Subject: [R] indentation in Rd-help files
Message-ID: <38860415.A4ED2742@stams.strath.ac.uk>

Dear colleagues,
Happy New Millennium, first of all!
It would be very nice to be able to use indentation inside \code{ } as
well, not only in \examples{ } when writing Rd-help files. Such a
situation arrises, for instance, if one wishes to include a small piece
of code in the _main_ text but not in the end as \examples{ } command
does. The only way I know to put the next 3 lines

my.function <- function()
   {
     other.function()
   }

inside the text is the following:

\code{my.function <- function()  } \cr
 \code{ \{    }  \cr
 \code{    other.function() }  \cr
\code{  \}   }

I have tried all possible combinations of \t, \sp, \tab without success
- identation is lost. Probably, there is another way of doing this, say,
a command similar to \examples but without title printing text where it
is and how it is (\verbatim{} ???)

(please, answer to my email rather than to the newsgroup)

Thank you in advance
=================================================================
                           Dr. Sergei ZUYEV
Statistics and Modelling Science dept., University of Strathclyde
    Livingston Tower, 26 Richmond str., Glasgow, G1 1XH, U.K.
     Tel.: +44 (0)141 548 3663    Fax:  +44 (0)141 552 2079
sergei at stams.strath.ac.uk   http://www.stams.strath.ac.uk/~sergei
=================================================================



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From apeng at emmes.com  Wed Jan 19 23:50:13 2000
From: apeng at emmes.com (Amy C. Peng)
Date: Wed, 19 Jan 2000 17:50:13 -0500
Subject: [R] Four quick questions
Message-ID: <3.0.5.32.20000119175013.009a83b0@netgate.emmes.com>

I have four quick questions about R:

1)  Can R make a 3-dimensional rotating scatterplot?

2)  Does R have OLE capabilities?

3)  Is it possible to create a pop-up window in R to display a message and
allow for user input?  (I know I can use readline() from the command line,
but I just wondered if it was possible to use pop-up windows.)

4)  Once an RGui is opened, can I "send" a source file to the opened RGui
from outside the RGui (i.e., from a DOS command or something)?

I looked through the R documentation, and my guess is that the answer to
all four questions is "No", but I wanted to ask the "experts" to make sure
that I wasn't missing something!  Thanks for your help!

Sincerely,
Amy Peng

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Thu Jan 20 00:07:35 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Wed, 19 Jan 2000 23:07:35 +0000 (GMT)
Subject: [R] Segmentation fault using integrate()
In-Reply-To: <Pine.LNX.4.10.10001190937050.20052-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.LNX.4.10.10001191729370.18133-100000@gimel.biostat.washington.edu>

On Wed, 19 Jan 2000, Ben Bolker wrote:

> 
>   I'm not sure what's going on, but I have had a similar problem, and a
> workaround.  The following code will fairly reliably crash R:
> 
<snip>
> 
>   I think the problem may have to do with cleanup on return from an error:
> if I exclude 0 from xvec above, so that I don't get the following warning
> messages
> 
>    Warning message:
>    Ifail=2, lenwrk was too small. -- fix adapt() !
>    Check the returned relerr! in: adapt(ndim = 2, lower = c(0, 0), upper
> 
> then I don't get the crashes.
> 
>   The workaround is to call gc() every time after you call integrate() ...
> you can see if it works for you.


The problem is not to do with error recovery. Like most segfaults it is a
pointer protection bug, which is why using gc() at different times often
hides the bug.

The argument to eval() in adapt_callback.c was a temporary object created
but not protected. If garbage collection happened in exactly the wrong
place it gets clobbered. After fixing it I've run the example fifty times
without an error. I've sent a replacement to CRAN.


	-thomas




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cbrown at jhsph.edu  Thu Jan 20 00:19:48 2000
From: cbrown at jhsph.edu (Clayton Brown)
Date: Wed, 19 Jan 2000 18:19:48 -0500
Subject: [R] random number generator
Message-ID: <3.0.6.32.20000119181948.007cda30@jhsph.edu>


This question may not be specific to R, but I'm using R so here goes:

Since R is slow (as is Splus) I want to split a simulation and run it on
2 or 3 systems at once.  The simulations involve generating a large number
of random values.  How can I set .Random.seed so that the succession of
random values don't overlap across systems.

I see that when I invoke R and give command runif(1) a different .Random.seed
is created each time, but how do I know the stream of random values won't
overlap when I invoke R on different machines?

thanks much

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From john.maindonald at anu.edu.au  Thu Jan 20 07:03:38 2000
From: john.maindonald at anu.edu.au (John Maindonald)
Date: Thu, 20 Jan 2000 17:03:38 +1100 (EST)
Subject: [R] Tutorial Introduction to R
Message-ID: <200001200603.RAA05696@leonard.anu.edu.au>

I have placed my ~100 page document:

  Data Analysis and Graphics Using R - An Introduction

at http://www.maths.anu.edu.au/~johnm/r-notes/r-notes.pdf

The best way to access and print it is with Adobe Acroread
Reader.  I am making it available "for personal study and 
classroom use".

It is a pdf version of a Word 95 file.  A code that prints as ??,
and which I have been unable to remove, has insinuated itself
into the footer.

Data files, with one or two exceptions those not available from the
existing libraries, and ready for entering with source(), are in the
same directory as r-notes.pdf .  I will put the scripts up as a
separate file in a few days.

Details of mistakes, and comments, are of course welcome.  

John Maindonald               email : john.maindonald at anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Jan 20 08:22:27 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 20 Jan 2000 07:22:27 +0000 (GMT)
Subject: [R] Four quick questions
In-Reply-To: <3.0.5.32.20000119175013.009a83b0@netgate.emmes.com>
Message-ID: <Pine.GSO.4.05.10001200712170.6098-100000@auk.stats>

On Wed, 19 Jan 2000, Amy C. Peng wrote:

> I have four quick questions about R:

I think you mean R on Windows.

> 1)  Can R make a 3-dimensional rotating scatterplot?

Yes, via calls to XGobi: you need the xgobi package from CRAN and the
bits its mentions (most notably my port of XGobi itself to Windows).
Once you have done that you get a _lot_ more gra[hics capabilities.

> 2)  Does R have OLE capabilities?

Um. OLE went out of use as a term a long time ago. There is a DCOM
(Active X Automation) interface: see the contributed area on CRAN.

> 3)  Is it possible to create a pop-up window in R to display a message and
> allow for user input?  (I know I can use readline() from the command line,
> but I just wondered if it was possible to use pop-up windows.)

Yes, but you will need to write C code and compile it in.  That sort of
thing is coming, slowly.

> 4)  Once an RGui is opened, can I "send" a source file to the opened RGui
> from outside the RGui (i.e., from a DOS command or something)?

No, but you can do this sort of thing via DCOM (see 2). One day (but not
yet) you may be able to use DDE.
 
> I looked through the R documentation, and my guess is that the answer to
> all four questions is "No", but I wanted to ask the "experts" to make sure
> that I wasn't missing something!  Thanks for your help!

>From an overall view, your questions look as if you are looking for a
clone of S-PLUS 2000. It is not our intention to provide that, and if you
want those facilities you perhaps ought to be using S-PLUS 2000.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Jan 20 08:44:22 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 20 Jan 2000 07:44:22 +0000 (GMT)
Subject: [R] random number generator
In-Reply-To: <3.0.6.32.20000119181948.007cda30@jhsph.edu>
Message-ID: <Pine.GSO.4.05.10001200724100.6098-100000@auk.stats>

On Wed, 19 Jan 2000, Clayton Brown wrote:

> This question may not be specific to R, but I'm using R so here goes:
> 
> Since R is slow (as is Splus) I want to split a simulation and run it on
> 2 or 3 systems at once.  The simulations involve generating a large number
> of random values.  How can I set .Random.seed so that the succession of
> random values don't overlap across systems.
> 
> I see that when I invoke R and give command runif(1) a different .Random.seed
> is created each time, but how do I know the stream of random values won't
> overlap when I invoke R on different machines?

What does `overlap' mean?  Even if by chance you get the same part of the
random sequence, they would normally be used for different purposes. If you
use a decent generator (_not_ R's default generator) the seed has so long a
period that the chance of getting the same parts of the sequence are
extremely small.  You could choose starting seeds say 100,000 apart (and
people have published tables of such things), but that ignores a crucial
fact about PRNGs: values M (large) apart are often much less independent
than those close together.

Calculation: my machine can generate about 10^5 RNG per second. Suppose you
do something with them, so you use 10^4 per second (optimistic!)  Then in
24 hours you will use less than 10^9. Super-Duper and Marsaglia-Multicarry
have periods of over 10^18, so the chance of any overlap is less than
10^-9, and the chance of a damaging overlap are much less.

The next version of R will have a function set.seed that is set up in such
a way that calling it with different small integer values generates
quite different `random' (actually pseudo-random, of course) starting
seeds.  Calling that with different values on different machines would
suffice. Until then, just rely on the default startup mechanism. It is not
perfect (and will be improved for 0.99.0) but will suffice if you change
the RNGkind.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From isaia at econ.unito.it  Wed Jan 19 23:43:22 2000
From: isaia at econ.unito.it (E.D.Isaia)
Date: Wed, 19 Jan 2000 23:43:22 +0100
Subject: [R] R for the Mac
Message-ID: <38863E08.E4F38A3D@econ.unito.it>

Hello,
usually work with S-plus and/or with R, which I do prefer, on a Window
paltform.
Now I downloaded R for the Mac (I run it on a G4 at home) but I found
that many, too many functions are not available (svd, lm, glm and so
on... but still the lapply is missing...!).
I have ProFortran a C++ routine of my own but I can't pass them to that
version of R.
Is there anybody going to give a little help?
Thanks a lot, ennio.

____________________________________________________________

Ennio D.
Isaia
<isaia at econ.unit.it>
Dep. Stattstics & Mathematics
Piazza Arbarello, 8
10122 - Turin (Italy)

phone: + 39 11 670 62 26 fax:   + 39 11 670 62 39
____________________________________________________________


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wsi at gcal.ac.uk  Thu Jan 20 10:44:05 2000
From: wsi at gcal.ac.uk (Bill Simpson)
Date: Thu, 20 Jan 2000 09:44:05 +0000 (GMT)
Subject: [R] R for the Mac
In-Reply-To: <38863E08.E4F38A3D@econ.unito.it>
Message-ID: <Pine.LNX.4.10.10001200941440.9990-100000@localhost.localdomain>

I used to use a Mac but switched to Linux when I decided I'd had enough of
MS Word and a way-behind version of R.

If you have a PPC Mac, one idea is to install linuxppc on it. You can have
a Mac partition, if you still want to use MacOS sometimes.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From j.logsdon at lancaster.ac.uk  Thu Jan 20 10:58:42 2000
From: j.logsdon at lancaster.ac.uk (John Logsdon)
Date: Thu, 20 Jan 2000 09:58:42 +0000 (GMT)
Subject: [R] random number generator
In-Reply-To: <Pine.GSO.4.05.10001200724100.6098-100000@auk.stats>
Message-ID: <Pine.LNX.4.10.10001200940590.12338-100000@mercury.quantex>



On Thu, 20 Jan 2000, Prof Brian D Ripley wrote:

> On Wed, 19 Jan 2000, Clayton Brown wrote:
> 
> > This question may not be specific to R, but I'm using R so here goes:
> > 
> > Since R is slow (as is Splus) I want to split a simulation and run it on
> > 2 or 3 systems at once.  The simulations involve generating a large number
> > of random values.  How can I set .Random.seed so that the succession of
> > random values don't overlap across systems.
> > 

[snip]

> 
> Calculation: my machine can generate about 10^5 RNG per second. Suppose you
> do something with them, so you use 10^4 per second (optimistic!)  Then in
> 24 hours you will use less than 10^9. Super-Duper and Marsaglia-Multicarry
> have periods of over 10^18, so the chance of any overlap is less than
> 10^-9, and the chance of a damaging overlap are much less.
> 

Of course this assumes that you haven't used the same RNG to 'randomise'
the seeds!  You need to initialise these on different machines manually!
Fortunately .Random.seed can be written to as:

.Random.seed<-c(0,1111,3333,5555)

But you can change the random number generator by .Random.seed[1] - see
?RNG for details so you could well initialise each machine using one
generator but use another generator for the main sequence.  Perhaps you
could initialise them from the clock as well - this is a standard
procedure.  proc.time() returns the time in seconds that have been used
but this is not very refined - is there a millisecond or finer resolution
anywhere that picks up a system clock rather than timing a procedure?

John

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Jan 20 12:41:15 2000
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 20 Jan 2000 11:41:15 +0000 (GMT)
Subject: [R] random number generator
Message-ID: <200001201141.LAA29638@toucan.stats.ox.ac.uk>

> Date: Thu, 20 Jan 2000 09:58:42 +0000 (GMT)
> From: John Logsdon <j.logsdon at lancaster.ac.uk>
> 
> 
> 
> On Thu, 20 Jan 2000, Prof Brian D Ripley wrote:
> 
> > On Wed, 19 Jan 2000, Clayton Brown wrote:
> > 
> > > This question may not be specific to R, but I'm using R so here goes:
> > > 
> > > Since R is slow (as is Splus) I want to split a simulation and run it on
> > > 2 or 3 systems at once.  The simulations involve generating a large number
> > > of random values.  How can I set .Random.seed so that the succession of
> > > random values don't overlap across systems.
> > > 
> 
> [snip]
> 
> > 
> > Calculation: my machine can generate about 10^5 RNG per second. Suppose you
> > do something with them, so you use 10^4 per second (optimistic!)  Then in
> > 24 hours you will use less than 10^9. Super-Duper and Marsaglia-Multicarry
> > have periods of over 10^18, so the chance of any overlap is less than
> > 10^-9, and the chance of a damaging overlap are much less.
> > 
> 
> Of course this assumes that you haven't used the same RNG to 'randomise'
> the seeds!  You need to initialise these on different machines manually!

Not so in R. If you do not initialize them they pick up different seeds
from the time.

> But you can change the random number generator by .Random.seed[1] - see
> ?RNG for details so you could well initialise each machine using one
> generator but use another generator for the main sequence.  Perhaps you
> could initialise them from the clock as well - this is a standard
> procedure.  proc.time() returns the time in seconds that have been used
> but this is not very refined - is there a millisecond or finer resolution
> anywhere that picks up a system clock rather than timing a procedure?

Yes, it is the standard procedure, and what is done in R. The clock (in
seconds since 1/1/1970) is used to seed another generator, and that is then
used to seed the chosen generator. So unless you start at the same
second, you get a completely different seed.   (Well, in theory, but the
generators are reliable ones, especially the version for 0.99.0.)

If you only want to do two or three simulations you could just use the
three alternative generators.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From JMORRIS6 at OCDUS.JNJ.COM  Thu Jan 20 17:10:39 2000
From: JMORRIS6 at OCDUS.JNJ.COM (Morris, Jeffrey [OCDUS])
Date: Thu, 20 Jan 2000 11:10:39 -0500
Subject: [R] xgobi
Message-ID: <32D408AE6657D311B1B700508B10900C0EF0C7@jcdusroexs2.ocdus.jnj.com>

I have downloaded an installed the xgobi library and can plot(laser), but
when I try xgobi(laser), I get these messages in the MSDOS window...

Out of environment space
Out of environment space
Bad command or filename

and in the RGUI window it comes back with...

D:\RW0901/library/xgobi/scripts/xgobi.bat -vtitle 'laser'
C:/WINDOWS/TEMP/xgobi24464 

Any ideas what I need to do?  I am running Windows 95

Thanks!

Jeff

Jeff Morris
Ortho-Clinical Diagnostics
Rochester, NY
jdmorris at ocdus.jnj.com

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From use at eio.uva.es  Thu Jan 20 18:27:29 2000
From: use at eio.uva.es (=?iso-8859-1?Q?Eusebio_Arenal_Guti=E9rrez?=)
Date: Thu, 20 Jan 2000 18:27:29 +0100
Subject: [R] Which Linux distribution?
Message-ID: <004101bf636b$a1740910$6458589d@palent.etsiiaa.uva.es>

I'm an user of R for Windows (95/NT PENTIUM I and II) mostly for educational
purposes. I thinking of moving to Linux, is there any Linux distribution in
which R works better? or it would have to work fine in any Linux
distribution?

Thanks for any hint

*************************************************************
*                 Eusebio Arenal Guti?rrez                  *
*   Departamento de Estad?stica e Investigaci?n Operativa   *
*      _\|/_      Universidad de Valladolid                 *
*      (o o)               Espa?a                           *
*---oOO-(_)-OOo-----------------------------------,,,-------*
*                      use at eio.uva.es            (o o)      *
*---------------------------------------------oOO-(_)-OOo---*
*                 Eusebio Arenal Guti?rrez                  *
*     Department of Statistics and Operational Research     *
*                 University of Valladolid                  *
*                           Spain                           *
*************************************************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Jan 20 17:42:32 2000
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 20 Jan 2000 16:42:32 +0000 (GMT)
Subject: [R] xgobi
Message-ID: <200001201642.QAA02414@toucan.stats.ox.ac.uk>

> From: "Morris, Jeffrey [OCDUS]" <JMORRIS6 at OCDUS.JNJ.COM>
> Date: Thu, 20 Jan 2000 11:10:39 -0500
> 
> I have downloaded an installed the xgobi library and can plot(laser), but
> when I try xgobi(laser), I get these messages in the MSDOS window...
> 
> Out of environment space
> Out of environment space
> Bad command or filename
> 
> and in the RGUI window it comes back with...
> 
> D:\RW0901/library/xgobi/scripts/xgobi.bat -vtitle 'laser'
> C:/WINDOWS/TEMP/xgobi24464 
> 
> Any ideas what I need to do?  I am running Windows 95.

First, you probably need to install XGobi and get it working. Then you
need to customize the batch files.  Try reading the file INSTALL in the
xgobi package directory (and the XGobi for Windows distribution has one
too).  INSTALL starts:

   Xgobi for Windows can be obtained from
   
	   http://www.stats.ox.ac.uk/pub/SWin
   
   Install and test this first. This package was prepared for the 
   1999 December 1 version of Xgobi, and so may not work with a later version.
   
   
   You will need to customize the batch files in the scripts directory
   for your installation.  The example files there work for mine.
   You may need to set the path to a minimal path to work within 
   environment lengths on Win9x.

[It does work with 199 Dec 16 version too.]


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Thu Jan 20 17:47:06 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Thu, 20 Jan 2000 16:47:06 +0000 (GMT)
Subject: [R] Which Linux distribution?
In-Reply-To: <004101bf636b$a1740910$6458589d@palent.etsiiaa.uva.es>
Message-ID: <Pine.LNX.4.10.10001201643110.28672-100000@gimel.biostat.washington.edu>

On Thu, 20 Jan 2000, [iso-8859-1] Eusebio Arenal Gutirrez wrote:

> I'm an user of R for Windows (95/NT PENTIUM I and II) mostly for educational
> purposes. I thinking of moving to Linux, is there any Linux distribution in
> which R works better? or it would have to work fine in any Linux

It appears to work fine on all Linux distributions. We have reports of
success on at least Caldera OpenLinux, Red Hat, SUSE, Debian, and 
LinuxPPC for the Macintosh. 

Many Linux distributions do not install all the required header files by
default, in particular the X windows headers.  These are often in an
optional package called something like xfree86-dev.  These must be
installed to build R.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dmarche at nswc.navy.mil  Thu Jan 20 18:48:31 2000
From: dmarche at nswc.navy.mil (David Marchette)
Date: Thu, 20 Jan 2000 12:48:31 -0500
Subject: [R] plot.hclust
Message-ID: <38874A6F.AE4A8D77@nswc.navy.mil>

Does anyone have a version of plot.hclust that allows something
like a "horiz=T" flag that plots the tree horizontally instead of
vertically? Alternatively, is there a way to tell R to plot things
sideways?  I am using layout() to set up various plots of trees
and other things and want to be able to orient them in different
ways in the different figures. The idea is something like the
example from the layout man page showing a scatterplot
with marginal histograms, except I want to plot something
else with marginal cluster trees.

Thanks for any help.

dave


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bates at stat.wisc.edu  Thu Jan 20 20:44:25 2000
From: bates at stat.wisc.edu (Douglas Bates)
Date: 20 Jan 2000 13:44:25 -0600
Subject: [R] Which Linux distribution?
In-Reply-To: Thomas Lumley's message of "Thu, 20 Jan 2000 16:47:06 +0000 (GMT)"
References: <Pine.LNX.4.10.10001201643110.28672-100000@gimel.biostat.washington.edu>
Message-ID: <6r66wo7ckm.fsf@franz.stat.wisc.edu>

Thomas Lumley <thomas at biostat.washington.edu> writes:

> On Thu, 20 Jan 2000, [iso-8859-1] Eusebio Arenal Gutirrez wrote:
> 
> > I'm an user of R for Windows (95/NT PENTIUM I and II) mostly for educational
> > purposes. I thinking of moving to Linux, is there any Linux distribution in
> > which R works better? or it would have to work fine in any Linux
> 
> It appears to work fine on all Linux distributions. We have reports of
> success on at least Caldera OpenLinux, Red Hat, SUSE, Debian, and 
> LinuxPPC for the Macintosh. 

If you look on the CRAN sites, http://cran.r-project.org/ may be the
fastest for you, in the bin/linux directory, you will see that there
are precompiled versions of R for the Debian, LinuxPPC, RedHat and
SuSE distributions.  The packages make installation of R a lot easier
if you are using one of those distributions.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Jan 20 22:40:01 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Jan 2000 22:40:01 +0100
Subject: [R] Which Linux distribution?
In-Reply-To: Thomas Lumley's message of "Thu, 20 Jan 2000 16:47:06 +0000 (GMT)"
References: <Pine.LNX.4.10.10001201643110.28672-100000@gimel.biostat.washington.edu>
Message-ID: <x2bt6gs9qm.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas at biostat.washington.edu> writes:

> On Thu, 20 Jan 2000, [iso-8859-1] Eusebio Arenal Guti?rrez wrote:
> 
> > I'm an user of R for Windows (95/NT PENTIUM I and II) mostly for educational
> > purposes. I thinking of moving to Linux, is there any Linux distribution in
> > which R works better? or it would have to work fine in any Linux
> 
> It appears to work fine on all Linux distributions. We have reports of
> success on at least Caldera OpenLinux, Red Hat, SUSE, Debian, and 
> LinuxPPC for the Macintosh. 

We've seen some trouble with OpenLinux where parts of the Fortran
setup turned out to be absent, causing someone to comment that it
would seem to be a more user-friendly than developer-friendly
distribution. I'd suspect Corel to be of the same variety, but I'd be
happy to be proven wrong. 

RedHat and Debian are on several of the developers' machines so they
are a pretty safe bet, but SuSE and Mandrake would also be unlikely to
cause trouble.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From CHRISTOPHERLMARSHALL at yahoo.com  Thu Jan 20 23:36:16 2000
From: CHRISTOPHERLMARSHALL at yahoo.com (Christopher Marshall)
Date: Thu, 20 Jan 2000 14:36:16 -0800 (PST)
Subject: [R] installing R on slackware linux, another route
Message-ID: <20000120223616.19636.qmail@web1605.mail.yahoo.com>

I have been reading the archives of this list and
noticed a post from Murray Jorgensen asking about how
to install R under slackware.

The replies were all to the effect that he should
compile from the source.

There is another path that is better for some
purposes.

Download the red hat binary package, the .rpm file,
then run rpm2targz on it, a slackware program designed
to convert rpm packages to slackware packages.

For some strange reason, you then have to rename the
resulting file from *.tar.gz to *.tgz or pkgtool, the
native package management program for slackware, won't
like it.

In the same directory, run pkgtool.  pkgtool will then
ask you, for each *.tgz file it finds in the current
directory, if you want to install it or not.

Answer yes for the R tgz file (whatever the filename
winds up being at this point), and pkgtool will copy
all of the files where they need to be.

This is a better way of installin R, in my opinion,
because the package manager keeps track of all of the
files in the installed packages on your system and
lets you remove packages cleanly when you don't want
them anymore.

If you look in the directory /var/adm/packages, you
will find a bunch of plain text files, one for each
packaged installed on your system.  If you view one of
the files, it just consists of a few notes up top
describing the package, then a comprehensive list of
every directory and every file installed by the
package.

This list is used by pkgtool to pull off the
uninstall.  It deletes every file in the list that
does not appear in any other package listing.  This
package management scheme is so beautiful it brings
tears to my eyes just thinking about it.  You want to
know which package some owns some goofy file on your
system?  Just go to /var/adm/packages and type "grep
filename *" and viola!

I installed R two days ago using this very procedure
with only one hiccup.  When I tried to start R, is
complained that it couldn't find libncurses.so.4, a
library it is dynamically linked to.  I checked my
/lib directory and found that my version of slackware
(7.0) uses libncurses.so.5, a more recent version of
the library.

I simply added a symbolic link in the lib directory to
point from libncurses.so.4 to libncurses.so.5 so the
dynamic linker would link in the version 5 library
when version 4 was requested.  R seems to run fine and
never noticed the difference.

To add such a link, go to /lib as root and type

ln -sf libncurses.so.5 libncurses.so.4

That is the only tweaking I had to do.

Chris Marshall

__________________________________________________
Do You Yahoo!?
Talk to your friends online with Yahoo! Messenger.
http://im.yahoo.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From CHRISTOPHERLMARSHALL at yahoo.com  Thu Jan 20 23:45:48 2000
From: CHRISTOPHERLMARSHALL at yahoo.com (Christopher Marshall)
Date: Thu, 20 Jan 2000 14:45:48 -0800 (PST)
Subject: [R] primer on plot function
Message-ID: <20000120224548.14430.qmail@web1606.mail.yahoo.com>

Can anyone point me to a document explaining how to
use the plotting functions of R?

I just found R this week.  I have read "An
Introduction to R" and ordered "Programming with Data:
A Guide to the S Language" which should show up next
week.

Are there any documents on the web or other books I
should consider?

Thanks,

Chris Marshall
__________________________________________________
Do You Yahoo!?
Talk to your friends online with Yahoo! Messenger.
http://im.yahoo.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From srtcres at csi.com.ph  Fri Jan 21 00:07:58 2000
From: srtcres at csi.com.ph (Research Division)
Date: Fri, 21 Jan 2000 07:07:58 +0800
Subject: [R] factor analysis
References: <004101bf636b$a1740910$6458589d@palent.etsiiaa.uva.es>
Message-ID: <008001bf639b$47d84620$4298a4ca@csi.com.ph>

Is there some way of doing factor analysis on R?

Thanks.

Research Division
Statistical Research and Training Center
www.srtc.gov.ph 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hodgess at uhddx01.dt.uh.edu  Fri Jan 21 00:45:21 2000
From: hodgess at uhddx01.dt.uh.edu (Erin Hodgess)
Date: Thu, 20 Jan 2000 17:45:21 -0600
Subject: [R] C Source code
Message-ID: <200001202345.AA16574@uhddx01.dt.uh.edu>

Dear R People:

I have R Version 0.90.1 for UNIX (binary)
and the Windows version from a binary distribution as well.

I would like to look at the source code for the C
program setup_starma in the ts library.

How would I find that, please?

Thanks in advance.

Sincerely,
Erin M. Hodgess, Ph.D.
Assistant Professor
Department of Computer and Mathematical Sciences
University of Houston - Downtown
One Main Street 
Houston, TX 77002
e-mail: hodgess at uhddx01.dt.uh.edu



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Fri Jan 21 00:53:28 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Jan 2000 00:53:28 +0100
Subject: [R] C Source code
In-Reply-To: Erin Hodgess's message of "Thu, 20 Jan 2000 17:45:21 -0600"
References: <200001202345.AA16574@uhddx01.dt.uh.edu>
Message-ID: <x24sc8s3k7.fsf@blueberry.kubism.ku.dk>

Erin Hodgess <hodgess at uhddx01.dt.uh.edu> writes:

> I have R Version 0.90.1 for UNIX (binary)
> and the Windows version from a binary distribution as well.
> 
> I would like to look at the source code for the C
> program setup_starma in the ts library.
> 
> How would I find that, please?

http://cran.r-project.org/src/base/R-0.90.1.tgz

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From edd at debian.org  Fri Jan 21 01:28:16 2000
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 20 Jan 2000 19:28:16 -0500 (EST)
Subject: [R] Which Linux distribution?
In-Reply-To: <x2bt6gs9qm.fsf@blueberry.kubism.ku.dk>
References: <Pine.LNX.4.10.10001201643110.28672-100000@gimel.biostat.washington.edu>
	<x2bt6gs9qm.fsf@blueberry.kubism.ku.dk>
Message-ID: <14471.42955.426770.379986@sonny.nulle.part>


  Peter> I'd suspect Corel to be of the same variety, but I'd
  Peter> be happy to be proven wrong.

I have heard that the upgrade path from Corel (based Debian 2.1 plus their
work) to regular Debian is fine. You might even get away with a straight
installation of the .deb.  

-- 
According to the latest figures, 43% of all statistics are totally worthless.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From novo at uiuc.edu  Fri Jan 21 07:03:01 2000
From: novo at uiuc.edu (Alvaro A. Novo)
Date: Fri, 21 Jan 2000 00:03:01 -0600
Subject: [R] Compiling error R-0.90.1
Message-ID: <00012100221900.09320@friedman>

Hi,

I'm struggling to compile R-0.90.1 in a RedHat 6.1 machine. (I have the rpm,
but I would like to compile it, as I do under SuSE 6.3).  I have also installed
quite a few other libraries (not installed by default, in particular, *-devel-*
ones), but to no avail thus far.

Here's the compilation error after going through ./configure

[root at friedman R-0.90.1]# make
<snip>
make[3]: *** No rule to make target 
`/usr/lib/gcc-lib/i386-pc-linux/2.95.2/include/limits.h', needed by 
`Rsock.o'.  Stop.
make[3]: Leaving directory `/home/anovo/R-0.90.1/src/appl'
make[2]: *** [R] Error 2
make[2]: Leaving directory `/home/anovo/R-0.90.1/src/appl'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/home/anovo/R-0.90.1/src'
make: *** [R] Error 1

Any suggestion are greatly appreciated.

Alvaro Novo

ps. I am including here lines from ./configure output that I found
potentially "problematic" or informative:

checking whether the C compiler (gcc  ) is a cross-compiler... no
checking for sin in -lmoto... (cached) no
checking for main in -lhdf5... (cached) no
checking for main in -ldxml... (cached) no
checking for main in -lblas... (cached) no
checking for opendir in -ldir... (cached) no
checking for dl.h... (cached) no
checking for floatingpoint.h... (cached) no
checking for ieeefp.h... (cached) no
checking for blkcnt_t... (cached) no
checking for dnet_ntoa in -ldnet... (cached) no
checking for dnet_ntoa in -ldnet_stub... (cached) no

(And the last few lines)

src/include/Rconfig.h is unchanged

R is now configured for i586-unknown-linux

  Source directory:         .
  Installation directory:   /usr/local
  C compiler:               gcc  -mieee-fp -g -O2
  FORTRAN compiler:         g77  -g -O2
  Gnome support:            no

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Jan 21 08:52:26 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 21 Jan 2000 07:52:26 +0000 (GMT)
Subject: [R] primer on plot function
In-Reply-To: <20000120224548.14430.qmail@web1606.mail.yahoo.com>
Message-ID: <Pine.GSO.4.05.10001210747550.3778-100000@auk.stats>

On Thu, 20 Jan 2000, Christopher Marshall wrote:

> Can anyone point me to a document explaining how to
> use the plotting functions of R?

Well, the R-intro manual has a fairly detailed explanation.

> I just found R this week.  I have read "An
> Introduction to R" and ordered "Programming with Data:
> A Guide to the S Language" which should show up next
> week.

That is a guide to a (pre-release) version of version 4 of S: R is similar
to version 3 of S. I think it is likely to be quite misleading to a
beginner, as S4 is so different. In any case, on graphics it essentially
says graphical facilities exist and are described in Venables & Ripley and
Becker, Chambers & Wilks.

> Are there any documents on the web or other books I
> should consider?

Look at the documentation secion on CRAN.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Fri Jan 21 09:14:39 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Jan 2000 09:14:39 +0100
Subject: [R] Compiling error R-0.90.1
In-Reply-To: "Alvaro A. Novo"'s message of "Fri, 21 Jan 2000 00:03:01 -0600"
References: <00012100221900.09320@friedman>
Message-ID: <x2ln5j4z9s.fsf@blueberry.kubism.ku.dk>

"Alvaro A. Novo" <novo at uiuc.edu> writes:

> [root at friedman R-0.90.1]# make
> <snip>
> make[3]: *** No rule to make target 
> `/usr/lib/gcc-lib/i386-pc-linux/2.95.2/include/limits.h', needed by 
> `Rsock.o'.  Stop.

Um, that file is supposed to just be there. If not, it is a gcc
problem not an R one. Are you really using gcc 2.95.2? If you have
been switching compilers, R may need to be reconfigured (remove
config.cache in the build directory first).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Jonathan.Yuen at evp.slu.se  Fri Jan 21 09:47:15 2000
From: Jonathan.Yuen at evp.slu.se (Jonathan.Yuen@evp.slu.se)
Date: Fri, 21 Jan 2000 09:47:15 +0100 (MET)
Subject: [R] installing R on slackware linux, another route
In-Reply-To: <20000120223616.19636.qmail@web1605.mail.yahoo.com>
Message-ID: <Pine.A41.4.05.10001210936040.26246-100000@kilauea.evp.slu.se>

On Thu, 20 Jan 2000, Christopher Marshall wrote:

> I have been reading the archives of this list and
> noticed a post from Murray Jorgensen asking about how
> to install R under slackware.

Much interesting stuff about how to bypass the rpm stuff deleted...

> 
> To add such a link, go to /lib as root and type
> 
> ln -sf libncurses.so.5 libncurses.so.4
> 

Someone please correct me if I am wrong, but if my memory of how shared
objects and ldconfig function under linux, this may cause problems, maybe
not with R but with other programs!!

The differences between the so.4 and the so.5 are MAJOR changes, and the
major number was changed (from 4 to 5) because there are modifications in
the library that are not consistent between 4 and 5.  You can change the
minor numbers (which we don't see here), but usually ldconfig in linux
takes care of that.  On my (really hacked up) linux machines, I just
installed libncurses5.  When I type 

ldconfig -v | grep libncur

I get

libncurses.so.5 => libncurses.so.5.0

Here the minor number is 0, though a later version will be 1, or 2, etc.
When the people doing ncurses can't keep backwards compatibility, they
change the major number, and you get libncurses.so.6.0 (it doesn't exist,
does it?) which ldconfig will link to libncurses.so.6 and the whole thing
starts again.

ncurses 5 may handle some things different from ncurses 4.  The safest
thing is to get libncurses.4.? installed and let ldconfig make the links.

Jonathan

Jonathan Yuen, Professor in Plant Pathology     phone: 46 18 672369
Dept. of Ecology and Crop Production Sciences   fax:   46 18 672890
Swedish University of Agricultural Sciences     http://www.tvs.slu.se
Box 7043                                        email replies to
S 750 07 Uppsala, SWEDEN                        Jonathan.Yuen at evp.slu.se 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From plummer at iarc.fr  Fri Jan 21 10:42:29 2000
From: plummer at iarc.fr (Martyn Plummer)
Date: Fri, 21 Jan 2000 10:42:29 +0100 (CET)
Subject: [R] installing R on slackware linux, another route
In-Reply-To: <Pine.A41.4.05.10001210936040.26246-100000@kilauea.evp.slu.se>
Message-ID: <XFMail.000121104229.plummer@iarc.fr>

On 21-Jan-00 Jonathan.Yuen at evp.slu.se wrote:
> On Thu, 20 Jan 2000, Christopher Marshall wrote:
> 
>> I have been reading the archives of this list and
>> noticed a post from Murray Jorgensen asking about how
>> to install R under slackware.
> 
> Much interesting stuff about how to bypass the rpm stuff deleted...
> 
>> 
>> To add such a link, go to /lib as root and type
>> 
>> ln -sf libncurses.so.5 libncurses.so.4
>> 
> 
> Someone please correct me if I am wrong, but if my memory of how shared
> objects and ldconfig function under linux, this may cause problems, maybe
> not with R but with other programs!!
> 
> The differences between the so.4 and the so.5 are MAJOR changes, and the
> major number was changed (from 4 to 5) because there are modifications in
> the library that are not consistent between 4 and 5.  You can change the
> minor numbers (which we don't see here), but usually ldconfig in linux
> takes care of that.  On my (really hacked up) linux machines, I just
> installed libncurses5.  When I type 
> 
> ldconfig -v | grep libncur
> 
> I get
> 
> libncurses.so.5 => libncurses.so.5.0
> 
> Here the minor number is 0, though a later version will be 1, or 2, etc.
> When the people doing ncurses can't keep backwards compatibility, they
> change the major number, and you get libncurses.so.6.0 (it doesn't exist,
> does it?) which ldconfig will link to libncurses.so.6 and the whole thing
> starts again.
> 
> ncurses 5 may handle some things different from ncurses 4.  The safest
> thing is to get libncurses.4.? installed and let ldconfig make the links.
> 
> Jonathan

I agree, I don't think this is a very good idea. In fact it seems like a
lot of trouble to go to, when building R from source takes only three
command lines.  I maintain the RPM packages for R and I'd have to say I
think the benefits of this approach are outweighed by the disadvantages.

Martyn

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From CHRISTOPHERLMARSHALL at yahoo.com  Fri Jan 21 16:08:38 2000
From: CHRISTOPHERLMARSHALL at yahoo.com (Christopher Marshall)
Date: Fri, 21 Jan 2000 07:08:38 -0800 (PST)
Subject: [R] installing R on slackware linux, another route
Message-ID: <20000121150838.5159.qmail@web1605.mail.yahoo.com>

--- Jonathan.Yuen at evp.slu.se wrote:
> > 
> > To add such a link, go to /lib as root and type
> > 
> > ln -sf libncurses.so.5 libncurses.so.4
> > 
> 
> Someone please correct me if I am wrong, but if my
> memory of how shared
> objects and ldconfig function under linux, this may
> cause problems, maybe
> not with R but with other programs!!
> 
> The differences between the so.4 and the so.5 are
> MAJOR changes, and the
> major number was changed (from 4 to 5) because there
> are modifications in
> the library that are not consistent between 4 and 5.
>  You can change the
> minor numbers (which we don't see here), but usually
> ldconfig in linux
> takes care of that.  On my (really hacked up) linux
> machines, I just
> installed libncurses5.  When I type 
> 

That makes a lot of sense.

It would be better to find and install the version 4
library than to put a link from 4 to 5.

I realize it must seem like a lot of trouble to go to
when "make" and "make install" would compile R from
the source and install it.  When you do that, however,
how do you keep track of all of the files that were
installed?

Slackware and red-hat both conceive of source and
binary packages and must have considered the problem
of compiling, then installing, and keeping track of
where everything goes in the package database.

Perhaps rpm2targz, if run on a source rpm, would
produce a source .tgz in the slackware package format.
 I'll try to look into it.

Chris Marshall

__________________________________________________
Do You Yahoo!?
Talk to your friends online with Yahoo! Messenger.
http://im.yahoo.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mlamias at isr.umich.edu  Fri Jan 21 17:25:40 2000
From: mlamias at isr.umich.edu (Mark Lamias)
Date: Fri, 21 Jan 2000 11:25:40 -0500
Subject: [R] primer on plot function
Message-ID: <5D28BEE5CAE8D1119F5700A0C9B4268E02E5D0AF@isr.umich.edu>

See my comments below.

-----Original Message-----
From: Christopher Marshall [mailto:CHRISTOPHERLMARSHALL at yahoo.com]
Sent: Thursday, January 20, 2000 5:46 PM
To: r-help at stat.math.ethz.ch
Subject: [R] primer on plot function


Can anyone point me to a document explaining how to
use the plotting functions of R?

I just found R this week.  I have read "An
Introduction to R" and ordered "Programming with Data:
A Guide to the S Language" which should show up next
week.

Are there any documents on the web or other books I
should consider?

Thanks,

Chris Marshall
-----------------
REPLY:

There is a manual entitled "Data Analysis and Graphics Using R -- An
Introduction" written by John Maindonald available on the web which contains
a lot of information about plotting and R's graphics capabilities.  I also
find the "S-Plus User's Manual" and the "S-Plus Guide to Statistical &
Mathematical Analysis" good references.

The URL to Maindonald's manual is as follows:

http://www.maths.anu.edu.au/~johnm/r-notes/r-notes.pdf

--Mark

Mark J. Lamias
Department of Statistics
Department of Political Science
Survey Methodology Program/Survey Research Center
Institute for Social Research - University of Michigan
426 Thompson Street, Room 315
Ann Arbor, Michigan 48104-2321
(734) 647-5381


-----Original Message-----
From: Christopher Marshall [mailto:CHRISTOPHERLMARSHALL at yahoo.com]
Sent: Thursday, January 20, 2000 5:46 PM
To: r-help at stat.math.ethz.ch
Subject: [R] primer on plot function


Can anyone point me to a document explaining how to
use the plotting functions of R?

I just found R this week.  I have read "An
Introduction to R" and ordered "Programming with Data:
A Guide to the S Language" which should show up next
week.

Are there any documents on the web or other books I
should consider?

Thanks,

Chris Marshall
__________________________________________________
Do You Yahoo!?
Talk to your friends online with Yahoo! Messenger.
http://im.yahoo.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From russell-lenth at uiowa.edu  Fri Jan 21 21:40:21 2000
From: russell-lenth at uiowa.edu (Russ Lenth)
Date: Fri, 21 Jan 2000 14:40:21 -0600
Subject: [R] DLLs using Borland
Message-ID: <3888C435.EC139B41@uiowa.edu>

I wrote a DLL in C that does some MCMC stuff.  It is compiled using
Borland's C++ Builder, version 3.0 (build 3.70) on a Windows 98 machine.

The DLL loads and runs just fine.  But then if I subsequently call R's
plot() function, I get an illegal operation message and R crashes.  In
fact, I've found that this happens even if I merely load the DLL, don't
ever run it, and then try to plot something.  I do NOT have this problem
if I load the sample DLL that comes with R, so I know it's a problem
with the way my DLL is built.  The version and the error messages are
below.  

Does anybody have experience with building DLL's with Borland products? 
Or some other compiler -- I have no particular loyalties, I just used
what I had.  Any help would be appreciated.

Russ
-- 
Russell V. Lenth -- Department of Statistics & Actuarial Science
The University of Iowa -- Iowa City, IA 52242  USA
Tel (319)335-0814 -- FAX (319)335-3017
mailto:Russell-Lenth at uiowa.edu - http://www.stat.uiowa.edu/~rlenth/

===== Extra info =====
R : Copyright 1999, The R Development Core Team
Version 0.90.1  (December 15, 1999)

RGUI caused an exception 10H in module CRTDLL.DLL at 016f:7fc49ef3.
Registers:
EAX=00000420 CS=016f EIP=7fc49ef3 EFLGS=00000212
EBX=0253e3d8 SS=0177 ESP=0253e344 EBP=0253e354
ECX=0253e35c DS=0177 ESI=0253e65a FS=56a7
EDX=00000000 ES=0177 EDI=c0000090 GS=0000
Bytes at CS:EIP:
8b 45 08 83 c0 08 f6 00 10 74 03 80 23 fe f6 00 
Stack dump:
00000008 0253e642 0253e65a 0253e642 0253e3dc 7fc4a684 0253e380 0253e3d8
00000008 0000001b 0253e64a 0253e65a 0253e652 0253e6e0 7fc52e76 04660360 
=====
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Jan 21 22:15:51 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 21 Jan 2000 21:15:51 +0000 (GMT)
Subject: [R] DLLs using Borland
In-Reply-To: <3888C435.EC139B41@uiowa.edu>
Message-ID: <Pine.GSO.4.05.10001212113410.24048-100000@auk.stats>

On Fri, 21 Jan 2000, Russ Lenth wrote:

> I wrote a DLL in C that does some MCMC stuff.  It is compiled using
> Borland's C++ Builder, version 3.0 (build 3.70) on a Windows 98 machine.
> 
> The DLL loads and runs just fine.  But then if I subsequently call R's
> plot() function, I get an illegal operation message and R crashes.  In
> fact, I've found that this happens even if I merely load the DLL, don't
> ever run it, and then try to plot something.  I do NOT have this problem
> if I load the sample DLL that comes with R, so I know it's a problem
> with the way my DLL is built.  The version and the error messages are
> below.  
> 
> Does anybody have experience with building DLL's with Borland products? 

No. Looks like a symbol conflict between MathSoft and Borland libraries.

> Or some other compiler -- I have no particular loyalties, I just used
> what I had.  Any help would be appreciated.

The recommended compiler is free and of a very high quality. Do try it.
See INSTALL/readme.packages for details.

> R : Copyright 1999, The R Development Core Team
> Version 0.90.1  (December 15, 1999)
> 
> RGUI caused an exception 10H in module CRTDLL.DLL at 016f:7fc49ef3.
> Registers:
> EAX=00000420 CS=016f EIP=7fc49ef3 EFLGS=00000212
> EBX=0253e3d8 SS=0177 ESP=0253e344 EBP=0253e354
> ECX=0253e35c DS=0177 ESI=0253e65a FS=56a7
> EDX=00000000 ES=0177 EDI=c0000090 GS=0000
> Bytes at CS:EIP:
> 8b 45 08 83 c0 08 f6 00 10 74 03 80 23 fe f6 00 
> Stack dump:
> 00000008 0253e642 0253e65a 0253e642 0253e3dc 7fc4a684 0253e380 0253e3d8
> 00000008 0000001b 0253e64a 0253e65a 0253e652 0253e6e0 7fc52e76 04660360 

That is completely useless except on your machine.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hodgess at uhddx01.dt.uh.edu  Sat Jan 22 03:18:44 2000
From: hodgess at uhddx01.dt.uh.edu (Erin Hodgess)
Date: Fri, 21 Jan 2000 20:18:44 -0600
Subject: [R] FORTRAN DLL and new packages
Message-ID: <200001220218.AA01457@uhddx01.dt.uh.edu>

Hello R People!

I would like to create my own package in R.
I created my directories in the library directory.

I have a libs directory for my Fortran program.  I used
a WATCOM compiler and created a DLL in that directory.
(Note:  used the compile batch file, and used the wlink to
create the dll)

However, I put in the command "library(erin)"
my DLL does not get loaded.

I am using R Version 0.90.1 on a Windows 98 machine.
My FORTRAN compiler is WATCOM Vers. 10.6

Thanks in advance for any help!!!

Sincerely,
Erin M. Hodgess, Ph.D.
Assistant Professor
Department of Computer and Mathematical Sciences
University of Houston - Downtown
One Main Street 
Houston, TX 77002
e-mail: hodgess at uhddx01.dt.uh.edu





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hodgess at uhddx01.dt.uh.edu  Sun Jan 23 03:36:08 2000
From: hodgess at uhddx01.dt.uh.edu (Erin Hodgess)
Date: Sat, 22 Jan 2000 20:36:08 -0600
Subject: [R] Make Packages with R, DLL
Message-ID: <200001230236.AA09599@uhddx01.dt.uh.edu>

Hello again R People:

I'm still stuck on my packages and FORTRAN problem.

I made a directory called erin, (in the library tree)
I created a sub-directory called R, in which I put
my R source code.
I created a sub-directory called libs, in which I put 
my FORTRAN program, (compiled and made into a DLL).

Here is my output

> library(erin)
Warning there is no R source code in erin

I also get an error if I try to dyn.load my program
can't load shared library
 R Version 0.90.1 on Windows 98 (binary)
WATCOM FORTRAN compiler, Version 11.0 (I lied yesterday).

Any advice would be SO MUCH appreciated!!!!!!!

Erin
8
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sun Jan 23 07:29:36 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 23 Jan 2000 06:29:36 +0000 (GMT)
Subject: [R] Make Packages with R, DLL
In-Reply-To: <200001230236.AA09599@uhddx01.dt.uh.edu>
Message-ID: <Pine.GSO.4.05.10001230617240.17002-100000@auk.stats>

On Sat, 22 Jan 2000, Erin Hodgess wrote:

> Hello again R People:
> 
> I'm still stuck on my packages and FORTRAN problem.
> 
> I made a directory called erin, (in the library tree)
> I created a sub-directory called R, in which I put
> my R source code.

As what? It is looking for a single file called "erin".

> I created a sub-directory called libs, in which I put 
> my FORTRAN program, (compiled and made into a DLL).
> 
> Here is my output
> 
> > library(erin)
> Warning there is no R source code in erin

See above.

> I also get an error if I try to dyn.load my program
> can't load shared library

I think it should say `unable to load shared library' _and_ give a reason.

>  R Version 0.90.1 on Windows 98 (binary)
> WATCOM FORTRAN compiler, Version 11.0 (I lied yesterday).

Can you report the exact message?  It is likely that the DLL is invalid
or that it links to other DLLs that cannot be found (they must be on your
path).

I do think you would find it easier to use the standard procedure, that
is use the mingw32 compiler and make. It will get all those
tedious details right automatically.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jdm at xnet.com  Sun Jan 23 18:44:05 2000
From: jdm at xnet.com (Jeff Miller)
Date: Sun, 23 Jan 2000 09:44:05 -0800
Subject: [R] size limits 
Message-ID: <388B3DE5.F40A65E@xnet.com>



    Hi,

    I have a few questions about how to handle large data sets in R.

    What is the size of the largest matrix that R can comfortably deal with?
    Is this size limit imposed by R's software,  or is it a question
    of the machine that one runs on?
    How does one go about choosing reasonable values of   vsize
    and nsize?

    I have a data set with about 1,000,000 rows, and 30 columns (1 character,  29
numbers),
    stored in a flat file.
    When I run Splus-5 on a Solaris workstation I can read this file quite easily

    myData <- read.table(file = "mydata.dat")

    and manipulate the data without any problems.

    On the other hand, when I try to do the same on a PC (128 M RAM, 400MHz), running
    Linux (Redhat 6.1) , on R version 0.90.0, I find that it is
    impossible.

   When I allocate (what I believe to be) the maximum amount of vsize
    memory and a large amount of nsize memory

      R --vsize 200M --nsize 4000k,

    and then try to read the file in  using read.table() or scan()

     myData <- read.table(file = "mydata.dat")

     or

      myData <- scan(file = "myData.dat", what = list("",0,0,...,0))               (with
29 zeros)

     I get kicked out of R.

     More worrisome, I did succeed in reading in a subset of the data with 30,000 rows.
    However, when I tried to plot one of the columns, my monitor began blinking
    wildly, and the machine crashed. I had to reboot.

    I tried to read the R help page on memory, but wasn't able to understand much of
    what it was saying.

    Thanks much for any help,

            Jeff Miller



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Sun Jan 23 19:55:17 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Jan 2000 19:55:17 +0100
Subject: [R] size limits
In-Reply-To: Jeff Miller's message of "Sun, 23 Jan 2000 09:44:05 -0800"
References: <388B3DE5.F40A65E@xnet.com>
Message-ID: <x2g0vosjmy.fsf@blueberry.kubism.ku.dk>

Jeff Miller <jdm at xnet.com> writes:

>     On the other hand, when I try to do the same on a PC (128 M RAM, 400MHz), running
>     Linux (Redhat 6.1) , on R version 0.90.0, I find that it is
>     impossible.
> 
>    When I allocate (what I believe to be) the maximum amount of vsize
>     memory and a large amount of nsize memory
> 
>       R --vsize 200M --nsize 4000k,
> 
>     and then try to read the file in  using read.table() or scan()
> 
>      myData <- read.table(file = "mydata.dat")
> 
>      or
> 
>       myData <- scan(file = "myData.dat", what = list("",0,0,...,0))               (with
> 29 zeros)
> 
>      I get kicked out of R.
> 
>      More worrisome, I did succeed in reading in a subset of the data with 30,000 rows.
>     However, when I tried to plot one of the columns, my monitor began blinking
>     wildly, and the machine crashed. I had to reboot.
> 

You've probably come too close to the machine capacity there. Linuxen
are often run without user limits on process size so if you eat too
much memory, some random process will be killed and with a bit of bad
luck it will be something critical such as your X server... Notice
that 200M vsize + 4000k nodes (20 bytes each) is about 150M more
than your physical memory, and with system processes easily taking up
60M you'd need 200M swap to run. a quick calculation suggests that
your data alone takes ~240M, which suggests that you really need a
bigger machine. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mlamias at isr.umich.edu  Sun Jan 23 20:45:42 2000
From: mlamias at isr.umich.edu (Mark Lamias)
Date: Sun, 23 Jan 2000 14:45:42 -0500
Subject: [R] size limits 
Message-ID: <5D28BEE5CAE8D1119F5700A0C9B4268E02E5D0B6@isr.umich.edu>

See message below.

-----Original Message-----
From: Jeff Miller [mailto:jdm at xnet.com]
Sent: Sunday, January 23, 2000 12:44 PM
To: r-help at stat.math.ethz.ch
Subject: [R] size limits 

    Hi,

    I have a few questions about how to handle large data sets in R.

    What is the size of the largest matrix that R can comfortably deal with?
    Is this size limit imposed by R's software,  or is it a question
    of the machine that one runs on?
    How does one go about choosing reasonable values of   vsize
    and nsize?

    I have a data set with about 1,000,000 rows, and 30 columns (1
character,  29
numbers),
    stored in a flat file.
    When I run Splus-5 on a Solaris workstation I can read this file quite
easily

    myData <- read.table(file = "mydata.dat")

    and manipulate the data without any problems.

    On the other hand, when I try to do the same on a PC (128 M RAM,
400MHz), running
    Linux (Redhat 6.1) , on R version 0.90.0, I find that it is
    impossible.

   When I allocate (what I believe to be) the maximum amount of vsize
    memory and a large amount of nsize memory

      R --vsize 200M --nsize 4000k,

    and then try to read the file in  using read.table() or scan()

     myData <- read.table(file = "mydata.dat")

     or

      myData <- scan(file = "myData.dat", what = list("",0,0,...,0))
(with
29 zeros)

     I get kicked out of R.

     More worrisome, I did succeed in reading in a subset of the data with
30,000 rows.
    However, when I tried to plot one of the columns, my monitor began
blinking
    wildly, and the machine crashed. I had to reboot.

    I tried to read the R help page on memory, but wasn't able to understand
much of
    what it was saying.

    Thanks much for any help,

            Jeff Miller


NEW MESSAGE:

The following information (contained in the R documentation, which can be
found by typing help(Memory)) may help you with your problem.  Sounds to me
like you have a memory problem.

--Mark Lamias

Mark J. Lamias
Department of Statistics
Department of Political Science
Survey Methodology Program/Survey Research Center
Institute for Social Research - University of Michigan
426 Thompson Street, Room 315
Ann Arbor, Michigan 48104-2321
(734) 647-5381



   Memory(base)                                 R Documentation

   Memory Available for Data Storage

   Description:

        Use command line options to set the memory available
        for R.

   Usage:

        R --vsize v --nsize n

   Arguments:

          v: Use `v' bytes of heap memory

          n: Use `n' cons cells.

   Details:

        R (currently) uses a static memory model.  This means
        that when it starts up, it asks the operating system to
        reserve a fixed amount of memory for it.  The size of
        this chunk cannot be changed subsequently.  Hence, it
        can happen that not enough memory was allocated, e.g.,
        when trying to read large data sets into R.

        In these cases, you should restart R (after saving your
        current workspace) with more memory available, using
        the command line options `--nsize' and `--vsize'.  To
        understand these options, one needs to know that R
        maintains separate areas for fixed and variable sized
        objects.  The first of these is allocated as an array
        of ``cons cells'' (Lisp programmers will know what they
        are, others may think of them as the building blocks of
        the language itself, parse trees, etc.), and the second
        are thrown on a ``heap'' of ``Vcells'' (see
        `gc()["Vcells","total"]') of 8 bytes each.  Effec-
        tively, the input `v' is therefore truncated to the
        nearest multiple of 8.

        The `--nsize' option can be used to specify the number
        of cons cells (each occupying 16 bytes) which R is to
        use (the default is 250000), and the `--vsize' option
        to  specify the size of the vector heap in bytes (the
        default is 6 MB).  Both options must be integers or
        integers ending with `M', `K', or `k' meaning Mega (=
        2^{20} = 1048576), (computer) Kilo (= 2^{10} = 1024),
        or regular kilo (= 1000). (The minimum allowed values
        are 200000 and 2M.)

        E.g., to read in a table of 10000 observations on 40
        numeric variables, `R --vsize 10M' should do;  For
        `source()'ing a large file, you'd use `R --nsize 500k'.

        Note that the information on where to find vectors and
        strings on the heap is stored using cons cells.  Thus,
        it may also be necessary to allocate more space for
        cons cells in order to perform computations with very
        ``large'' variable-size objects.

        You can find out the current memory consumption (the
        proportion of heap and cons cells used) by typing
        `gc()' at the R prompt.  This may help you in finding
        out whether to increase `--vsize' or `--nsize'.  Note
        that following `gcinfo(TRUE)', automatic garbage col-
        lection always prints memory use statistics.

        R will tell you whether you ran out of cons or heap
        memory.

        The defaults for `--nsize' and `--vsize' can be changed
        by setting the environment variables `R_NSIZE' and
        `R_VSIZE' respectively, perhaps most conveniently on
        Unix in the file `~/.Renviron'.

        When using `read.table', the memory requirements are in
        fact higher than anticipated, because the file is first
        read in as one long string which is then split again.
        Use `scan' if possible in case you run out of memory
        when reading in a large table.

   See Also:

        `gc' for information on the garbage collector.

   Examples:

        # Start R with 15MB of heap memory and 1 million cons cells

        R --vsize 15M --nsize 1000k


Mark J. Lamias
Department of Statistics
Department of Political Science
Survey Methodology Program/Survey Research Center
Institute for Social Research - University of Michigan
426 Thompson Street, Room 315
Ann Arbor, Michigan 48104-2321
(734) 647-5381

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Mon Jan 24 09:29:27 2000
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 24 Jan 2000 09:29:27 +0100 (MET)
Subject: ulimits on Linux {Re: [R] size limits}
In-Reply-To: <x2g0vosjmy.fsf@blueberry.kubism.ku.dk>
References: <388B3DE5.F40A65E@xnet.com>
	<x2g0vosjmy.fsf@blueberry.kubism.ku.dk>
Message-ID: <14476.3431.288726.485492@gargle.gargle.HOWL>

{maybe somewhat technical; non R / Linux only}

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard at biostat.ku.dk> writes:

    PD> ..........
    PD> Linuxen are often run without user limits on process size so
    PD> if you eat too much memory, some random process will be killed and
    PD> with a bit of bad luck it will be something critical such as your X
    PD> server... 

Setting  ulimits on Linux seems to be only through  bash's builtin "ulimit"
or through the C API. 
Now, we are still "urged" to usually use the tcsh instead of the bash.

How would a linux sys.administrator limit the process size for all normal
user processes?   Sorry for my ignorance, but I assume that other R-help
readers are in the same boat...

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Mon Jan 24 09:58:53 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Jan 2000 09:58:53 +0100
Subject: ulimits on Linux {Re: [R] size limits}
In-Reply-To: Martin Maechler's message of "Mon, 24 Jan 2000 09:29:27 +0100 (MET)"
References: <388B3DE5.F40A65E@xnet.com> <x2g0vosjmy.fsf@blueberry.kubism.ku.dk> <14476.3431.288726.485492@gargle.gargle.HOWL>
Message-ID: <x2puurlub6.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler at stat.math.ethz.ch> writes:

> Setting  ulimits on Linux seems to be only through  bash's builtin "ulimit"
> or through the C API. 
> Now, we are still "urged" to usually use the tcsh instead of the bash.
> 
> How would a linux sys.administrator limit the process size for all normal
> user processes?   Sorry for my ignorance, but I assume that other R-help
> readers are in the same boat...

I think it goes via a  "ulimit -H something" in a startup file.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Jan 24 10:55:30 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 24 Jan 2000 09:55:30 +0000 (GMT)
Subject: ulimits on Linux {Re: [R] size limits}
In-Reply-To: <14476.3431.288726.485492@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.10001240953180.21578-100000@auk.stats>

On Mon, 24 Jan 2000, Martin Maechler wrote:

> {maybe somewhat technical; non R / Linux only}
> 
> >>>>> "PD" == Peter Dalgaard BSA <p.dalgaard at biostat.ku.dk> writes:
> 
>     PD> ..........
>     PD> Linuxen are often run without user limits on process size so
>     PD> if you eat too much memory, some random process will be killed and
>     PD> with a bit of bad luck it will be something critical such as your X
>     PD> server... 
> 
> Setting  ulimits on Linux seems to be only through  bash's builtin "ulimit"
> or through the C API. 
> Now, we are still "urged" to usually use the tcsh instead of the bash.

It is called `limit' on csh/tcsh, according to my systems. (And AFAIK it
works on RH6.0.)  There is also `unlimit'.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From polcicova at dcs.elf.stuba.sk  Mon Jan 24 15:30:35 2000
From: polcicova at dcs.elf.stuba.sk (Gabriela Polcicova)
Date: Mon, 24 Jan 2000 15:30:35 +0100
Subject: [R] binary files?
Message-ID: <388C620A.BC7305BA@dcs.elf.stuba.sk>

Hello,

I would like to ask you if there is a possibility to use binary data
files in R (something similar to binary files in C). Thank you in
advance.

Gabriela.

---------------------------------------
Gabriela Polcicova
Department of Computer Science and Engineering
Faculty of Electrical Engineering and Information Technology
Slovak University of Technology
Mlynska dolina
Ilkovicova 3
812 19 Bratislava
SLOVAKIA
phone: +421 7 60291 845
email: polcicova at dcs.elf.stuba.sk

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From amami at ma.man.ac.uk  Mon Jan 24 16:06:53 2000
From: amami at ma.man.ac.uk (Ahmed Mami)
Date: Mon, 24 Jan 2000 15:06:53 +0000
Subject: [R] help in fortran code
Message-ID: <388C6A8D.8AF@ma.man.ac.uk>

I would like to get the fortran code for the functions locpol and dpill
in the kernsmooth library , the purpose is to incorporate other
selection criterion for the bandwidth in which a varying bandwidths are
replaced instead of the constant bandwidth. I will send you back the
improved version as soon as I get the fortran code for the upper mention
functions. ((LOCPOLY and DPILL )))
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Mon Jan 24 16:42:45 2000
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 24 Jan 2000 16:42:45 +0100 (MET)
Subject: [R] help in fortran code
In-Reply-To: <388C6A8D.8AF@ma.man.ac.uk>
References: <388C6A8D.8AF@ma.man.ac.uk>
Message-ID: <14476.29429.926260.821809@gargle.gargle.HOWL>

>>>>> "Ahmed" == Ahmed Mami <amami at ma.man.ac.uk> writes:

    Ahmed> I would like to get the fortran code for the functions locpol
    Ahmed> and dpill in the kernsmooth library , the purpose is to
    Ahmed> incorporate other selection criterion for the bandwidth in which
    Ahmed> a varying bandwidths are replaced instead of the constant
    Ahmed> bandwidth. I will send you back the improved version as soon as
    Ahmed> I get the fortran code for the upper mention
    Ahmed> functions. ((LOCPOLY and DPILL )))

there's no Fortran routine  dpill() in Kernsmooth.
locpoly is
	KernSmooth/src/locpoly.f
out of the tar archive

    http://www.r-project.org/src/contrib/KernSmooth_2.22-3.tar.gz

Can you get it from there?
{Otherwise reply to me privately and I can send it to you.}

Note however that we would want patches for the *.R and *.Rd files in the
source as well..}
Can you try to work with a source version of R ?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bates at stat.wisc.edu  Mon Jan 24 16:44:57 2000
From: bates at stat.wisc.edu (Douglas Bates)
Date: 24 Jan 2000 09:44:57 -0600
Subject: [R] help in fortran code
In-Reply-To: Ahmed Mami's message of "Mon, 24 Jan 2000 15:06:53 +0000"
References: <388C6A8D.8AF@ma.man.ac.uk>
Message-ID: <6r3drnfp8m.fsf@franz.stat.wisc.edu>

Ahmed Mami <amami at ma.man.ac.uk> writes:

> I would like to get the fortran code for the functions locpol and dpill
> in the kernsmooth library , the purpose is to incorporate other
> selection criterion for the bandwidth in which a varying bandwidths are
> replaced instead of the constant bandwidth. I will send you back the
> improved version as soon as I get the fortran code for the upper mention
> functions. ((LOCPOLY and DPILL )))

Download
    http://cran.r-project.org/src/contrib/Kernsmooth_2.22-3.tar.gz
and expand it.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Jan 24 17:00:47 2000
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 24 Jan 2000 16:00:47 +0000 (GMT)
Subject: [R] help in fortran code
Message-ID: <200001241600.QAA09817@toucan.stats.ox.ac.uk>

> Date: Mon, 24 Jan 2000 15:06:53 +0000
> From: Ahmed Mami <amami at ma.man.ac.uk>
 
> I would like to get the fortran code for the functions locpol and dpill
> in the kernsmooth library , the purpose is to incorporate other
> selection criterion for the bandwidth in which a varying bandwidths are
> replaced instead of the constant bandwidth. I will send you back the
> improved version as soon as I get the fortran code for the upper mention
> functions. ((LOCPOLY and DPILL )))

The Fortran code is in the src directory of the package distribution,
on CRAN in src/contrib/KernSmooth_2.22-3.tar.gz.  I can only assume you
have downloaded a pre-compiled version.

Please send enhancements to Dr Wand and not to R-help.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dan.hagedorn at pnl.gov  Mon Jan 24 23:06:41 2000
From: dan.hagedorn at pnl.gov (Hagedorn, Dan N)
Date: Mon, 24 Jan 2000 14:06:41 -0800
Subject: [R] Help compiling R
Message-ID: <ECF0BF15FFD3D2119CCF0008C7A4E90A68563F@PNLMSE5.pnl.gov>

Hi,

I have just downloaded R (v. 0.90.1) and am trying to compile it on a Sun/UNIX
system running Solaris 2.6.  Needless to say, I have run into a problem, and
cannot find any info on it through the CRAN site, or searching the old
discussion files.

When I do the "make', after configuring, I get the message, "The current
directory must be set to the RSI directory.  Change the default to the RSI
directory and re-run this script.". repeatedly.  This message is generated from
running the Makefile.  I have saved the text (attached), in hopes someone can
help me do the install correctly.

Thanks in advance,
Dan Hagedorn
Battelle/PNNL
PO Box 999
MS K5-12
Richland, WA 99352
(509) 375-3658
dan.hagedorn at pnl.gov

 <<problems.txt>> 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: problems.txt
Url: https://stat.ethz.ch/pipermail/r-help/attachments/20000124/a3136614/problems.txt

From p.dalgaard at biostat.ku.dk  Mon Jan 24 23:57:36 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Jan 2000 23:57:36 +0100
Subject: [R] Help compiling R
In-Reply-To: "Hagedorn, Dan N"'s message of "Mon, 24 Jan 2000 14:06:41 -0800"
References: <ECF0BF15FFD3D2119CCF0008C7A4E90A68563F@PNLMSE5.pnl.gov>
Message-ID: <x2ogabgjrz.fsf@blueberry.kubism.ku.dk>

"Hagedorn, Dan N" <dan.hagedorn at pnl.gov> writes:

> I have just downloaded R (v. 0.90.1) and am trying to compile it on a Sun/UNIX
> system running Solaris 2.6.  Needless to say, I have run into a problem, and
> cannot find any info on it through the CRAN site, or searching the old
> discussion files.
> 
> When I do the "make', after configuring, I get the message, "The current
> directory must be set to the RSI directory.  Change the default to the RSI
> directory and re-run this script.". repeatedly.  This message is generated from
> running the Makefile.  I have saved the text (attached), in hopes someone can
> help me do the install correctly.

That's a new one... One should think that we'd seen all Solaris
problems by now, but no. My best guess is that something in the
makefile is catching the wrong script along your $PATH. Deja.com gives
only two matches on "RSI directory" and both have to do with IDL, does
that ring a bell?

You may want to try compiling as an ordinary user and only do the
final "make install" as root.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dan.hagedorn at pnl.gov  Tue Jan 25 00:24:02 2000
From: dan.hagedorn at pnl.gov (Hagedorn, Dan N)
Date: Mon, 24 Jan 2000 15:24:02 -0800
Subject: [R] Help compiling R
Message-ID: <ECF0BF15FFD3D2119CCF0008C7A4E90A685642@PNLMSE5.pnl.gov>

Peter,

Thank you.  I had forgotten that there was an old copy of IDL out there
(actually, I also forgot that it is an RSI product!).  For some unknown reason,
R wanted to do an install in the IDL directories.  I am not sure what component
or routine R picked up during the configure, from the IDL directories (they are
on a different disk), but the Makeconf file ended up with the line, "INSTALL =
/.../IDL/idl_5.2/bin/install -c".  Maybe if I had remembered that IDL was a RSI
product, I would have searched for "IDL"?  ...  Nah!  I would still be puzzled!

When I removed those directories from my $path, R compiled fine - just as easy
as on my PC.

Your help was invaluable.  I probably would have spent several hours, at least,
before I either found the culprit, or gave up!

Best,
Dan Hagedorn
Pacific Northwest National Laboratory
Richland, WA 
USA
(509) 375-3658
dan.hagedorn at pnl.gov

-----Original Message-----
From:	Peter Dalgaard BSA [SMTP:p.dalgaard at biostat.ku.dk]
Sent:	Monday, January 24, 2000 02:58 PM
To:	Hagedorn, Dan N
Cc:	'r-help at stat.math.ethz.ch'
Subject:	Re: [R] Help compiling R

"Hagedorn, Dan N" <dan.hagedorn at pnl.gov> writes:

> I have just downloaded R (v. 0.90.1) and am trying to compile it on a Sun/UNIX
> system running Solaris 2.6.  Needless to say, I have run into a problem, and
> cannot find any info on it through the CRAN site, or searching the old
> discussion files.
> 
> When I do the "make', after configuring, I get the message, "The current
> directory must be set to the RSI directory.  Change the default to the RSI
> directory and re-run this script.". repeatedly.  This message is generated
from
> running the Makefile.  I have saved the text (attached), in hopes someone can
> help me do the install correctly.

That's a new one... One should think that we'd seen all Solaris
problems by now, but no. My best guess is that something in the
makefile is catching the wrong script along your $PATH. Deja.com gives
only two matches on "RSI directory" and both have to do with IDL, does
that ring a bell?

You may want to try compiling as an ordinary user and only do the
final "make install" as root.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From apeng at emmes.com  Tue Jan 25 03:52:53 2000
From: apeng at emmes.com (Amy C. Peng)
Date: Mon, 24 Jan 2000 21:52:53 -0500
Subject: [R] Using (D)COM in Excel
In-Reply-To: <5D28BEE5CAE8D1119F5700A0C9B4268E02E5D0B6@isr.umich.edu>
Message-ID: <3.0.5.32.20000124215253.009b6ec0@netgate.emmes.com>

Dear Fellow R-Users:

I am trying to install the (D)COM server, version 0.91.  I followed the
installation instructions all the way through the command lines

       %R_HOME%\bin\StatConnectorSrv /RegServer
       regsvr32 %R_HOME%\bin\StatConnectorClnt.dll

and everything so far seemed okay.  Then I logged out, and ran
bin\vbtest.exe, and everything still seemed fine (it gave me a plot of a
straight line).

Then I went into Excel97, and I wrote the following macro into a module:

	Sub RunStatConnector()

	  Dim x As StatConnector
	  Set x = New StatConnector
  
	  On Error GoTo Error_Handler
	  x.Init ("R")
	  x.Close
  
	Error_Handler:
	  MsgBox x.GetErrorText, "R Server Error"
  
	End Sub

and I got a compiler error message that says that the StatConnector
user-defined type is not defined.

Does anybody know how I should go about defining the user-defined type
StatConnector?  Am I missing a step somewhere?  I thought maybe that by
registering it using the regsvr32 command that somehow I've "defined" it as
a type recognizable by Microsoft, but I am not sure.

Thanks for your help!

Amy Peng
The EMMES Corporation

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cyg at sympatico.ca  Tue Jan 25 07:24:19 2000
From: cyg at sympatico.ca (Yves Gauvreau)
Date: Tue, 25 Jan 2000 01:24:19 -0500
Subject: [R] Using (D)COM in Excel
References: <3.0.5.32.20000124215253.009b6ec0@netgate.emmes.com>
Message-ID: <001501bf66fc$d0468ee0$803c65cc@bertha>

You have to add a reference to StatConnectorSrv. To do so go to the tool
menu under which you'll find the reference menu. Click on it and a dlg will
appear, find the component (StatConnectorSrv) click on the check box and
then click ok and you should be in business.

Yves


----- Original Message -----
From: "Amy C. Peng" <apeng at emmes.com>
To: <r-help at stat.math.ethz.ch>
Sent: Monday, January 24, 2000 9:52 PM
Subject: [R] Using (D)COM in Excel


> Dear Fellow R-Users:
>
> I am trying to install the (D)COM server, version 0.91.  I followed the
> installation instructions all the way through the command lines
>
>        %R_HOME%\bin\StatConnectorSrv /RegServer
>        regsvr32 %R_HOME%\bin\StatConnectorClnt.dll
>
> and everything so far seemed okay.  Then I logged out, and ran
> bin\vbtest.exe, and everything still seemed fine (it gave me a plot of a
> straight line).
>
> Then I went into Excel97, and I wrote the following macro into a module:
>
> Sub RunStatConnector()
>
>   Dim x As StatConnector
>   Set x = New StatConnector
>
>   On Error GoTo Error_Handler
>   x.Init ("R")
>   x.Close
>
> Error_Handler:
>   MsgBox x.GetErrorText, "R Server Error"
>
> End Sub
>
> and I got a compiler error message that says that the StatConnector
> user-defined type is not defined.
>
> Does anybody know how I should go about defining the user-defined type
> StatConnector?  Am I missing a step somewhere?  I thought maybe that by
> registering it using the regsvr32 command that somehow I've "defined" it
as
> a type recognizable by Microsoft, but I am not sure.
>
> Thanks for your help!
>
> Amy Peng
> The EMMES Corporation
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Jan 25 08:18:25 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 25 Jan 2000 07:18:25 +0000 (GMT)
Subject: [R] Help compiling R
In-Reply-To: <ECF0BF15FFD3D2119CCF0008C7A4E90A685642@PNLMSE5.pnl.gov>
Message-ID: <Pine.GSO.4.05.10001250708520.987-100000@auk.stats>

On Mon, 24 Jan 2000, Hagedorn, Dan N wrote:

> Peter,
> 
> Thank you.  I had forgotten that there was an old copy of IDL out there
> (actually, I also forgot that it is an RSI product!).  For some unknown reason,
> R wanted to do an install in the IDL directories.  I am not sure what component
> or routine R picked up during the configure, from the IDL directories (they are
> on a different disk), but the Makeconf file ended up with the line, "INSTALL =
> /.../IDL/idl_5.2/bin/install -c".  Maybe if I had remembered that IDL was a RSI
> product, I would have searched for "IDL"?  ...  Nah!  I would still be puzzled!

Configure looks for a program that is called install and not 

# SysV /etc/install, /usr/sbin/install
# SunOS /usr/etc/install
# IRIX /sbin/install
# AIX /bin/install
# AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag
# AFS /usr/afsws/bin/install, which mishandles nonexistent args
# SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"

which rules out those on Solaris.  The last one would be a good choice
on Solaris, but the comment seems incorrect (`staff' does exist unless
removed, and in any case /usr/ucb/install -g somegroup would do).  But as
this is done by autoconf, I believe, we are stuck with it.  One can 
install GNU install to avoid this (and speed up installation that
otherwise uses a script).

> From:	Peter Dalgaard BSA [SMTP:p.dalgaard at biostat.ku.dk]
> 
> That's a new one... One should think that we'd seen all Solaris
> problems by now, but no. 

Not really a Solaris problem, I think.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fran at stat.berkeley.edu  Wed Jan 26 00:00:55 2000
From: fran at stat.berkeley.edu (Fran Rizzardi)
Date: Tue, 25 Jan 2000 15:00:55 -0800 (PST)
Subject: [R] windows() graphics driver on NT4.0
Message-ID: <200001252300.PAA15236@dvorak.Berkeley.EDU>

Dear R community,

I have spent a lot of time with the windows() driver in R 90.0 on NT4.0.  There
are a few odd behaviors I can't figure out, and wonder if they are bugs, or
"features" that I can't find documented:

1. I am mostly doing scatterplots.  If I resize the R window, or resize the
graphics window except with the resize button, the printed image shows 1-pixel
sized dots instead of circles.  I tried using cex= par() variable to increase
the symbol size, but it also increased the axis ticks, axis tick labels, and
axis labels as well.  Setting cex.lab= and cex.axis= explicitly didn't help.

2. If I have 12 scatterplots on a page, arranged in 4-by-3 matrix to fill an
8.5"x11" area, then if I increase the graphics window size using the resize
button and print the plots, the margins are changed to make the 12 plots
take up a space on the page that is roughly square.

These problems make it impossible to get decent printouts of my plots using
the windows() driver--I finally gave up and resorted to using the postscript()
driver and printing the file using ghostview.  (My printer is an HP OfficeJet
which I think is comparable to a HP BubbleJet printer--it's not PostScript.)

Any pointers or feedback is appreciated.  I checked the R bug archives but
found nothing about problems with windows().

Thanks very much,
Fran Rizzardi
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Jan 26 08:01:04 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 26 Jan 2000 07:01:04 +0000 (GMT)
Subject: [R] windows() graphics driver on NT4.0
In-Reply-To: <200001252300.PAA15236@dvorak.Berkeley.EDU>
Message-ID: <Pine.GSO.4.05.10001260656360.21696-100000@auk.stats>

On Tue, 25 Jan 2000, Fran Rizzardi wrote:

> Dear R community,
> 
> I have spent a lot of time with the windows() driver in R 90.0 on NT4.0.  There
> are a few odd behaviors I can't figure out, and wonder if they are bugs, or
> "features" that I can't find documented:

That is not the current version. Graphics sizes in R were altered quite
considerably in 0.90.0 (not 90.0!) and modified again in 0.90.1. Please
upgrade and try again.

> Any pointers or feedback is appreciated.  I checked the R bug archives but
> found nothing about problems with windows().

Similar things have been reported for other devices: I think this is not
actually to do with windows() except possibly that on some machines Windows
was lying about the screen and font dimensions.

If the problem persists, we need a reproducible example as a bug report,
please.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jens.oehlschlaegel-akiyoshi at mdfactory.de  Wed Jan 26 15:15:02 2000
From: jens.oehlschlaegel-akiyoshi at mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 26 Jan 2000 15:15:02 +0100
Subject: [R] paste with a matrix
Message-ID: <000901bf6807$bd298d60$a9021aac@joelschlaegel>



Hi,

below is a function which pastes a matrix, but uses parsing
(deparse(substitute()) and eval()).
Does anyone know a more standard solution to pasting a matrix?

Best


Jens



> paste.matrix(dd, sep=" ", collapse=NULL)
[1] "1 a" "2 b" "3 c"
> paste.matrix <- function(mtext, sep=" ", collapse=NULL){
+   rcode <- paste(
+       "paste("
+     , paste(deparse(substitute(mtext)), "[,", 1:ncol(mtext), "]", sep="",
collapse=",")
+     , ", sep=sep, collapse=collapse)"
+   , sep="")
+   eval(parse(text=rcode))
+ }

> dd <- data.frame(code=c(1:3), label=letters[1:3])

> paste.matrix(dd, sep=" ", collapse=NULL)
[1] "1 a" "2 b" "3 c"

> paste.matrix(t(dd), sep=" ", collapse=NULL)
[1] "1 2 3" "a b c"




--
Dr. Jens Oehlschl?gel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 M?nchen

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jens.oehlschlaegel-akiyoshi at mdfactory.de  Wed Jan 26 16:20:20 2000
From: jens.oehlschlaegel-akiyoshi at mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 26 Jan 2000 16:20:20 +0100
Subject: [R] subscript data.frame
Message-ID: <000a01bf6810$dc3ddb30$a9021aac@joelschlaegel>



Hi,

is the following difference intended?

> ddd <- data.frame(a=1:3, b=1:3)

# assignment of 'X' silently ignored
> ddd[1,1] <- 'X'
> is.factor(ddd[[1]])
[1] FALSE
> ddd
  a b
1 1 1
2 2 2
3 3 3

# assignment of 'X' not ignored
> ddd[[1]][1] <- 'X'
> is.factor(ddd[[1]])
[1] TRUE
> ddd
  a b
1 X 1
2 2 2
3 3 3


Regards


--
Dr. Jens Oehlschl?gel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 M?nchen

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From plummer at iarc.fr  Wed Jan 26 16:39:41 2000
From: plummer at iarc.fr (Martyn Plummer)
Date: Wed, 26 Jan 2000 16:39:41 +0100 (CET)
Subject: [R] paste with a matrix
In-Reply-To: <000901bf6807$bd298d60$a9021aac@joelschlaegel>
Message-ID: <XFMail.000126163941.plummer@iarc.fr>

On 26-Jan-00 Jens Oehlschlgel-Akiyoshi wrote:
> Hi,
> 
> below is a function which pastes a matrix, but uses parsing
> (deparse(substitute()) and eval()).
> Does anyone know a more standard solution to pasting a matrix?

Use apply:

R> dd <- data.frame(code=c(1:3), label=letters[1:3]) 
R> apply(dd, 1, paste, collapse=" ")   
    1     2     3 
"1 a" "2 b" "3 c" 
R> apply(dd, 2, paste, collapse=" ")
   code   label 
"1 2 3" "a b c" 

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Jan 26 16:56:32 2000
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 26 Jan 2000 15:56:32 +0000 (GMT)
Subject: [R] subscript data.frame
Message-ID: <200001261556.PAA07525@toucan.stats.ox.ac.uk>


> From: "Jens Oehlschl?gel-Akiyoshi" <jens.oehlschlaegel-akiyoshi at mdfactory.de>
> 
> is the following difference intended?
> 
> > ddd <- data.frame(a=1:3, b=1:3)
> 
> # assignment of 'X' silently ignored
> > ddd[1,1] <- 'X'
> > is.factor(ddd[[1]])
> [1] FALSE
> > ddd
>   a b
> 1 1 1
> 2 2 2
> 3 3 3
> 
> # assignment of 'X' not ignored
> > ddd[[1]][1] <- 'X'
> > is.factor(ddd[[1]])
> [1] TRUE
> > ddd
>   a b
> 1 X 1
> 2 2 2
> 3 3 3

It's a bug: the prototype has the second behaviour for both.  Could you put it
in as a bug report please?

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Wed Jan 26 17:27:45 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Jan 2000 17:27:45 +0100
Subject: [R] subscript data.frame
In-Reply-To: Prof Brian Ripley's message of "Wed, 26 Jan 2000 15:56:32 +0000 (GMT)"
References: <200001261556.PAA07525@toucan.stats.ox.ac.uk>
Message-ID: <x2vh4giyri.fsf@blueberry.kubism.ku.dk>

Prof Brian Ripley <ripley at stats.ox.ac.uk> writes:

> > From: "Jens Oehlschl?gel-Akiyoshi" <jens.oehlschlaegel-akiyoshi at mdfactory.de>
> > 
> > is the following difference intended?
> > 
> > > ddd <- data.frame(a=1:3, b=1:3)
> > 
> > # assignment of 'X' silently ignored
> > > ddd[1,1] <- 'X'
> > > is.factor(ddd[[1]])
> > [1] FALSE
> > > ddd
> >   a b
> > 1 1 1
> > 2 2 2
> > 3 3 3

....

> It's a bug: the prototype has the second behaviour for both.  Could you put it
> in as a bug report please?

I think we have it already, and it's worse than JOA thinks:

> ddd <- data.frame(a=1:3, b=1:3)
> ddd[2,1] <- 'X'
> ddd
  a b
1 1 1
2 1 2
3 3 3


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jens.oehlschlaegel-akiyoshi at mdfactory.de  Wed Jan 26 17:55:09 2000
From: jens.oehlschlaegel-akiyoshi at mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 26 Jan 2000 17:55:09 +0100
Subject: [R] Summary: paste with a matrix
In-Reply-To: <XFMail.000126163941.plummer@iarc.fr>
Message-ID: <000c01bf681e$1b3bba70$a9021aac@joelschlaegel>



I asked how to paste a matrix without using eval().
Thank you Martyn Plummer and Peter Malewski for reminding me of apply().

apply() is under certain conditions not as fast as eval(), but apply() seems
to use less memory and probably should be preferred.

Thanks also to Peter Dalgaard for warning me to rather not use eval() in
functions.

Functions and timings below.

Regards


Jens Oehlschl?gel-Akiyoshi


# Version with apply()
paste.matrix <- function(mtext, sep=" ", collapse=NULL){
  if (is.null(collapse))
     apply(mtext, 1, paste, collapse=sep)
  else
     paste(apply(mtext, 1, paste, collapse=sep), collapse=collapse)
}

# Version with eval() in function frame
paste.matrix2 <- function(mtext, sep=" ", collapse=NULL){
  rcode <- paste(
      "paste("
    , paste("mtext[,", 1:ncol(mtext), "]", sep="", collapse=",")
    , ", sep=sep, collapse=collapse)"
  , sep="")
  eval(parse(text=rcode))
}

# Version with eval() in parent frame
paste.matrix3 <- function(mtext, sep=" ", collapse=NULL){
  rcode <- paste(
      "paste("
    , paste(deparse(substitute(mtext)), "[,", 1:ncol(mtext), "]", sep="",
collapse=",")
    , ", sep="
    , if (is.null(sep)) "NULL" else if (sep=='"') quotate(sep, "'") else
quotate(sep, '"')
    , ", collapse="
    , if (is.null(collapse)) "NULL" else if (collapse=='"')
quotate(collapse, "'") else quotate(collapse, '"')
    , ")"
  , sep="")
  eval(parse(text=rcode), envir=parent.frame())
}


> system.time(paste.matrix(matrix(1:(10000), ncol=10)))
[1] 1.04 0.00 1.04   NA   NA
> system.time(paste.matrix2(matrix(1:(10000), ncol=10)))
[1] 0.07 0.00 0.07   NA   NA
> system.time(paste.matrix3(matrix(1:(10000), ncol=10)))
[1] 0.24 0.00 0.24   NA   NA
> system.time(paste.matrix(matrix(1:(10000), ncol=1000)))
[1] 0.09 0.00 0.09   NA   NA
> system.time(paste.matrix2(matrix(1:(10000), ncol=1000)))
[1] 0.61 0.00 0.61   NA   NA
> system.time(paste.matrix3(matrix(1:(10000), ncol=1000)))
[1] 7.74 0.00 7.74   NA   NA
> system.time(paste.matrix(matrix(1:(100000), ncol=10)))
[1] 11.44  0.04 11.48    NA    NA
> system.time(paste.matrix2(matrix(1:(100000), ncol=10)))
Error: cons memory (250000 cells) exhausted
       See "help(Memory)" on how to increase the number of cons cells.
> system.time(paste.matrix3(matrix(1:(100000), ncol=10)))
Error: cons memory (250000 cells) exhausted
       See "help(Memory)" on how to increase the number of cons cells.



> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    0
minor    90.1
year     1999
month    December
day      15
language R

> gc()
         free  total (Mb)
Ncells  73829 250000  4.8
Vcells 705159 786432  6.0

--
Dr. Jens Oehlschl?gel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 M?nchen

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fran at stat.berkeley.edu  Wed Jan 26 23:58:19 2000
From: fran at stat.berkeley.edu (Fran Rizzardi)
Date: Wed, 26 Jan 2000 14:58:19 -0800 (PST)
Subject: [R] windows() graphics driver on NT4.0
Message-ID: <200001262258.OAA17739@dvorak.Berkeley.EDU>

Thanks for the reply.  I have upgraded to 0.90.1 and the problem with cex=
being ignored has been fixed, but there seem to be different problems with
the windows() sizing.  I will follow up with a bug report when I am able to
articulate the problems.

Fran Rizzardi
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From john.maindonald at anu.edu.au  Thu Jan 27 07:28:27 2000
From: john.maindonald at anu.edu.au (John Maindonald)
Date: Thu, 27 Jan 2000 17:28:27 +1100 (EST)
Subject: [R] "Data Analysis and Graphics Using R"
Message-ID: <200001270628.RAA18775@leonard.anu.edu.au>

I have just put up a new version of this 109 page pdf document, at:
  http://wwwmaths.anu.edu.au/~johnm/r-notes/r-notes.pdf

The file containing the scripts (r-intro.dis) is in the same directory,
as are datasets [.R files; use source(<filename>)] that are not in the
current R libraries.

This replaces a version that had been posted earlier this week, in
which the final character (mostly an e) was missing from some words!
There was a fault in the Microsoft Word postscript driver that we
were using.

John Maindonald               email : john.maindonald at anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From john.maindonald at anu.edu.au  Thu Jan 27 23:12:44 2000
From: john.maindonald at anu.edu.au (John Maindonald)
Date: Fri, 28 Jan 2000 09:12:44 +1100 (EST)
Subject: [R] "Data Analysis and Graphics Using R"
Message-ID: <200001272212.JAA02706@leonard.anu.edu.au>

I wrote

> I have just put up a new version of this 109 page pdf document, at:
>   http://wwwmaths.anu.edu.au/~johnm/r-notes/r-notes.pdf
> 
> The file containing the scripts (r-intro.dis) is in the same directory,

Brian Ripley has alerted me that I in due course called the scripts file
r-notes.dis .  In the interim, it will be there under both names.



John Maindonald               email : john.maindonald at anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gfeeney at hawaii.edu  Thu Jan 27 22:48:45 2000
From: gfeeney at hawaii.edu (Griffith Feeney)
Date: Thu, 27 Jan 2000 11:48:45 -1000
Subject: [R] constructing lists
In-Reply-To: <200001270628.RAA18775@leonard.anu.edu.au>
Message-ID: <3.0.5.32.20000127114845.00855530@pop-server.hawaii.edu>

Constructing lists with

list(name1=name1, name2=name2, ...)

is tedious when there are many objects and names are long. Is there an R
function that takes a character vector of object names as an argument and
returns a list with each objected tagged by its name? Going in the other
direction, is there a function that takes such a list as an argument and
instantiates each object in the list under its name?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rossini at biostat.washington.edu  Thu Jan 27 23:46:29 2000
From: rossini at biostat.washington.edu (A.J. Rossini)
Date: 27 Jan 2000 14:46:29 -0800
Subject: [R] nlminb replacement/solution?
Message-ID: <87puun5e0q.fsf@alpha.cfas.washington.edu>



What's the current best approach to dealing with the nlminb problem?  

Are there other similar constrained optimizers, or is current wisdom
just to code it in C (or similar...)?

best,
-tony

-- 
A.J. Rossini		       Research Assistant Professor of Biostatistics 
Biostatistics/Univ. of Washington  (Th)	Box 357232   206-543-1044 (3286=fax)
Center for AIDS Research/HMC/UW	  (M/F)	Box 359931   206-731-3647 (3693=fax)
VTN/SCHARP/FHCRC		 (Tu/W)	Box 358080   206-667-7025 (4812=fax)
rossini@(biostat.washington.edu|u.washington.edu|hivnet.fhcrc.org)
http://www.biostat.washington.edu/~rossini

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Jan 28 00:10:48 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 27 Jan 2000 23:10:48 +0000 (GMT)
Subject: [R] nlminb replacement/solution?
In-Reply-To: <87puun5e0q.fsf@alpha.cfas.washington.edu>
Message-ID: <Pine.GSO.4.05.10001272309000.14980-100000@auk.stats>

On 27 Jan 2000, A.J. Rossini wrote:

 
> What's the current best approach to dealing with the nlminb problem?  
> 
> Are there other similar constrained optimizers, or is current wisdom
> just to code it in C (or similar...)?

I believe (as the R author):

Use optim(method="L-BFGS-B") in the development version. It is a more
modern algorithm for exactly the same job.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Fri Jan 28 00:18:47 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Jan 2000 00:18:47 +0100
Subject: [R] nlminb replacement/solution?
In-Reply-To: rossini@biostat.washington.edu's message of "27 Jan 2000 14:46:29 -0800"
References: <87puun5e0q.fsf@alpha.cfas.washington.edu>
Message-ID: <x2wvov9k88.fsf@blueberry.kubism.ku.dk>

rossini at biostat.washington.edu (A.J. Rossini) writes:

> What's the current best approach to dealing with the nlminb problem?  
> 
> Are there other similar constrained optimizers, or is current wisdom
> just to code it in C (or similar...)?

Sit back and wait for 0.99.0 (Feb 7) or get a current snapshot. Then
try optim().

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From barg at cs.tu-berlin.de  Fri Jan 28 15:55:21 2000
From: barg at cs.tu-berlin.de (Martin Barghoorn)
Date: Fri, 28 Jan 2000 15:55:21 +0100
Subject: [R] Deadline for Paper-abstracts "APL Berlin 2000"
Message-ID: <200001281456.PAA26921@mail.cs.tu-berlin.de>

Hello,
please remember deadline for
Paper-Abstracts  on 31.1.2000 for APL Berlin 2000 Conference.
Please send your Paper-Abstracts to:
    kilsch at fh-bingen.de
or
    bernecky at acm.org
or
    Dieter_Lattermann at compuserve.com

The limit for Short-Communications-Abstracts is
how it is announced on web page
      http://stat.cs.tu-berlin.de/APL-Berlin-2000/callpap.htm
at the end of next month (29.2.2000).
Regards
Martin

***********************************************************************
* Martin BARGHOORN, Computer Science, Technical University of Berlin  *
* Sekr. FR 6-9, Franklinstr. 28, D-10587 Berlin, Germany              *
* Mail: barg at cs.tu-berlin.de , Web: http://stat.cs.tu-berlin.de/~barg/*
* Telephon(TUB): 030 314 24 392/73571, Faksimile(TUB): 030 314 25 901 *
***********************************************************************


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jbarnett at wi.mit.edu  Fri Jan 28 16:43:39 2000
From: jbarnett at wi.mit.edu (John D. Barnett)
Date: Fri, 28 Jan 2000 10:43:39 -0500
Subject: [R] Memory woes
Message-ID: <3891B92B.83856D9B@wi.mit.edu>

Hello all-

I'm having some problems with memory consumption under R.  I've tried
increasing the appropriate memory values, but it keeps asking for more;
I've even upped the heap size to 600M, significantly eating into swap
(256M real, 500+M swap).  So, performance slows to a crawl.

What I'm trying to do is run isoMDS on a 4000x4000 matrix.

My first question is, how much memory should this matrix occupy?  Is it
~4000^2 * sizeof(double)?

I have an idea about what's going on, but I'm not sure; perhaps someone
could correct me if this interpretation is wrong.  Since R uses
call-by-value, all data structures are first duplicated, and then handed
off to the function called.  I was getting out of memory errors in
calling isoMDS; once I got around that, and waited to see what would
happen next (after about 5 minutes of swapping), I got an error saying
cmdscale not found.  Since isoMDS begins:

isoMDS <- function(d, y=cmdscale(d, 2), maxit=50, trace=TRUE)

this means that the whole time I was waiting, was spent in copying d.
Is this correct?

Since the global environment is actually accessible from within
functions, could I modify this to use call-by-reference?  Are there any
pitfalls I should watch out for?

In case this is relevant, here are my system particulars:

PII, 256M ram + ~500M swap
RedHat 6.1 Linux
R 0.65.1

Thanks in advance for your helpful replies!

-John Barnett


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Fri Jan 28 17:14:58 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Jan 2000 17:14:58 +0100
Subject: [R] Memory woes
In-Reply-To: "John D. Barnett"'s message of "Fri, 28 Jan 2000 10:43:39 -0500"
References: <3891B92B.83856D9B@wi.mit.edu>
Message-ID: <x23dritbp9.fsf@blueberry.kubism.ku.dk>

"John D. Barnett" <jbarnett at wi.mit.edu> writes:

> isoMDS <- function(d, y=cmdscale(d, 2), maxit=50, trace=TRUE)
> 
> this means that the whole time I was waiting, was spent in copying d.
> Is this correct?

No. R has lazy evaluation, so it means that it didn't actually need
the value y before the point where it stopped. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Jan 28 17:28:03 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 28 Jan 2000 16:28:03 +0000 (GMT)
Subject: [R] Memory woes
In-Reply-To: <3891B92B.83856D9B@wi.mit.edu>
Message-ID: <Pine.GSO.4.05.10001281616570.13636-100000@auk.stats>

On Fri, 28 Jan 2000, John D. Barnett wrote:

> Hello all-
> 
> I'm having some problems with memory consumption under R.  I've tried
> increasing the appropriate memory values, but it keeps asking for more;
> I've even upped the heap size to 600M, significantly eating into swap
> (256M real, 500+M swap).  So, performance slows to a crawl.
> 
> What I'm trying to do is run isoMDS on a 4000x4000 matrix.

Oops. That is an O(n^4) algorithm in n points. Forget it for more than a
few hundred points.

> My first question is, how much memory should this matrix occupy?  Is it
> ~4000^2 * sizeof(double)?

Yes, approximately 128Mb.
 
> I have an idea about what's going on, but I'm not sure; perhaps someone
> could correct me if this interpretation is wrong.  Since R uses
> call-by-value, all data structures are first duplicated, and then handed
> off to the function called.  I was getting out of memory errors in
> calling isoMDS; once I got around that, and waited to see what would
> happen next (after about 5 minutes of swapping), I got an error saying
> cmdscale not found.  Since isoMDS begins:
> 
> isoMDS <- function(d, y=cmdscale(d, 2), maxit=50, trace=TRUE)
> 
> this means that the whole time I was waiting, was spent in copying d.
> Is this correct?

No. It was also testing for any identical pairs of rows.

> Since the global environment is actually accessible from within
> functions, could I modify this to use call-by-reference?  Are there any
> pitfalls I should watch out for?

You could do that (just leave it out from the argument list), and
you could simplify the code, but the .C call would take for ever
(not literally).  I suspect you would never get that far (as cmdscale
is also slow: it needs an eigendecomposition, and that is O(n^3)
and by then you would have several versions of your 128Mb matrix around).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Jim.Ianelli at noaa.gov  Fri Jan 28 18:17:15 2000
From: Jim.Ianelli at noaa.gov (Jim Ianelli)
Date: Fri, 28 Jan 2000 09:17:15 -0800
Subject: [R] Activating Graphics History
Message-ID: <NCBBJFPIMHIOJIMGLNOEKEFBCFAA.jim.ianelli@noaa.gov>

I'm having trouble finding documentation on how
to activate the "record graphics history" option via 
a command line (as opposed to having to use the menu).  

I would like to store a series of graphics.  The readme says:

`The History menu allows the recording of plots. When plots have been
recorded they can be reviewed by PgUp and PgDn, saved and replaced.
Recording can be turned on automatically (the Recording item on the list) or
individual plots can be added (Add or the INS key). The whole plot history
can be saved to or retrieved from an R variable in the global environment. 

But I can't find anything about setting the recording of plots
without using the menu.

Any help would be greatly appreciated.

++++++++++++++++++++++++
James N. Ianelli       
Alaska Fisheries Science Center 
7600 Sand Point Way NE Bldg 4
BIN C15700               
Seattle, Wa 98115-0070      

phone 206-526-6510
fax   206-526-6723
e-mail jim.ianelli at noaa.gov
http://www.refm.noaa.gov
++++++++++++++++++++++++

-------------- next part --------------
A non-text attachment was scrubbed...
Name: winmail.dat
Type: application/ms-tnef
Size: 2180 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-help/attachments/20000128/f568fe50/winmail.bin

From apeng at emmes.com  Fri Jan 28 21:11:14 2000
From: apeng at emmes.com (Amy C. Peng)
Date: Fri, 28 Jan 2000 15:11:14 -0500
Subject: [R] (D)COM
In-Reply-To: <001501bf66fc$d0468ee0$803c65cc@bertha>
References: <3.0.5.32.20000124215253.009b6ec0@netgate.emmes.com>
Message-ID: <3.0.5.32.20000128151114.009c5820@netgate.emmes.com>

Here are two questions regarding use of (D)COM:

1)  In the documentation it says to fire up R using the Init member of
StatConnector, i.e., x.Init("R"), where x is an instance of StatConnector.
However, I need to increase the heap memory before I start up R.  Is there
any way to incorporate the "--vsize" command line options using Init?

2)  How do I use the AddGraphicsDevice member of StatConnector?  (I am
trying to use this in Excel).  I assume that AddGraphicsDevice will allow
me to open up an R graphics window while still in Excel?  I tried to create
an instance of IStatConnectorGraphicsDevice to use as input for
AddGraphicsDevice, but I got a compiler error message that said "Invalid
use of New keyword".

3)  I noticed that if I use the Evaluate member of StatConnector to create
a plot, such as x.Evaluate("plot(1:10,1:10"), where x as an instance of
StatConnector, it opens up an R graphics device for me, but the graphics
device disappears after a few seconds.  How can I control the graphics
device to make it stay awhile until I'm ready for it to go away?

By the way, is there more documentation available on the members used in
StatConnector?  I've been using the VBE Object Browser to look up
information on classes, types, subs and functions, but this still leaves me
a little confused ...

Thanks in advance for your help!

Sincerely,
Amy Peng

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From lorenmc at socrates.berkeley.edu  Fri Jan 28 22:58:15 2000
From: lorenmc at socrates.berkeley.edu (Loren M. McCarter)
Date: Fri, 28 Jan 2000 13:58:15 -0800 (PST)
Subject: [R] Archetypal Analysis in R
Message-ID: <20000128135815F.lorenmc@socrates.berkeley.edu>

Is a library available for R that includes algorithms for something
called "archetypal analysis," a method similar to principal components
analysis that is designed to find "archetypes" or "pure types" from
multidimensional data. I have contacted one of the authors who has
written about archetypal analysis but thought I'd check here
also. Thanks.

Loren

--------------------------------------------------
Loren McCarter
Graduate Student, Behavioral Neuroscience
University of California, Berkeley
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Jan 28 23:00:54 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 28 Jan 2000 22:00:54 +0000 (GMT)
Subject: [R] (D)COM
In-Reply-To: <3.0.5.32.20000128151114.009c5820@netgate.emmes.com>
Message-ID: <Pine.GSO.4.05.10001282157520.18401-100000@auk.stats>

On Fri, 28 Jan 2000, Amy C. Peng wrote:

> Here are two questions regarding use of (D)COM:
> 
> 1)  In the documentation it says to fire up R using the Init member of
> StatConnector, i.e., x.Init("R"), where x is an instance of StatConnector.
> However, I need to increase the heap memory before I start up R.  Is there
> any way to incorporate the "--vsize" command line options using Init?

Set them in the environment as usual (use R_VSIZE).

> By the way, is there more documentation available on the members used in
> StatConnector?  I've been using the VBE Object Browser to look up
> information on classes, types, subs and functions, but this still leaves me
> a little confused ...

The sources are there, otherwise no. (As for the rest, I think you need
Thomas Baier's help.)

BTW, I think it was you who asked: the next version of RGui will have
user-programmable dialogs and menus.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Jan 28 23:06:24 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 28 Jan 2000 22:06:24 +0000 (GMT)
Subject: [R] Activating Graphics History
In-Reply-To: <NCBBJFPIMHIOJIMGLNOEKEFBCFAA.jim.ianelli@noaa.gov>
Message-ID: <Pine.GSO.4.05.10001282201420.18401-100000@auk.stats>

On Fri, 28 Jan 2000, Jim Ianelli wrote:

> I'm having trouble finding documentation on how
> to activate the "record graphics history" option via 
> a command line (as opposed to having to use the menu).  
> 
> I would like to store a series of graphics.  The readme says:
> 
> `The History menu allows the recording of plots. When plots have been
> recorded they can be reviewed by PgUp and PgDn, saved and replaced.
> Recording can be turned on automatically (the Recording item on the list) or
> individual plots can be added (Add or the INS key). The whole plot history
> can be saved to or retrieved from an R variable in the global environment. 
> 
> But I can't find anything about setting the recording of plots
> without using the menu.

Crucially, you did not say you were doing this on Windows, and it is only
available on the windows() device on Windows.  I am not aware of any way to
do this.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From baier at ci.tuwien.ac.at  Fri Jan 28 23:45:06 2000
From: baier at ci.tuwien.ac.at (Thomas Baier)
Date: Fri, 28 Jan 2000 23:45:06 +0100
Subject: [R] Re: (D)COM
References: <3.0.5.32.20000124215253.009b6ec0@netgate.emmes.com> <3.0.5.32.20000128151114.009c5820@netgate.emmes.com>
Message-ID: <001f01bf69e3$26bfcd20$26eaecd4@saruman>


----- Original Message -----
From: Amy C. Peng <apeng at emmes.com>
To: <r-help at stat.math.ethz.ch>; <baier at ci.tuwien.ac.at>
Sent: Friday, January 28, 2000 21:11
Subject: (D)COM


> Here are two questions regarding use of (D)COM:
>
> 1)  In the documentation it says to fire up R using the Init member of
> StatConnector, i.e., x.Init("R"), where x is an instance of StatConnector.
> However, I need to increase the heap memory before I start up R.  Is there
> any way to incorporate the "--vsize" command line options using Init?
At the moment, you have to use environment settings for this purpose. Adding support for
startup paramters is planned for future releases.

> 2)  How do I use the AddGraphicsDevice member of StatConnector?  (I am
> trying to use this in Excel).  I assume that AddGraphicsDevice will allow
> me to open up an R graphics window while still in Excel?  I tried to create
> an instance of IStatConnectorGraphicsDevice to use as input for
> AddGraphicsDevice, but I got a compiler error message that said "Invalid
> use of New keyword".
The interface already contains functions like "AddGraphicsDevice" for future extensions.
At the moment only the Character device can be used (there is an active X control for this
purpose). An Active X control for graphics output will be available hopefully in the next
version.

> 3)  I noticed that if I use the Evaluate member of StatConnector to create
> a plot, such as x.Evaluate("plot(1:10,1:10"), where x as an instance of
> StatConnector, it opens up an R graphics device for me, but the graphics
> device disappears after a few seconds.  How can I control the graphics
> device to make it stay awhile until I'm ready for it to go away?
The sample shuts down the R server on completion without waiting. This will cause the
graphics device to disappear. Just keep the server alive as long as you want the window
open. It will stay open as long as the server is alive and the window is not closed
explicitly (either by user or program action).

> By the way, is there more documentation available on the members used in
> StatConnector?  I've been using the VBE Object Browser to look up
> information on classes, types, subs and functions, but this still leaves me
> a little confused ...
At the moment, there is no documentation but the readme in the distribution directory on
CRAN and the sample, but this sample covers everything possible at the moment. As for the
next version, some more documentation will be available.

Thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Sat Jan 29 10:36:32 2000
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Sat, 29 Jan 2000 10:36:32 +0100 (MET)
Subject: [R] using R development versions, i.e. compiling R for Windows:  tough!
In-Reply-To: <NDBBLLOPOEMNNHONCHBFGEKKCBAA.niels.waller@vanderbilt.edu>
References: <NDBBLLOPOEMNNHONCHBFGEKKCBAA.niels.waller@vanderbilt.edu>
Message-ID: <14482.46240.886892.90013@gargle.gargle.HOWL>


>>>>> "NielsW" == Niels Waller <niels.waller at vanderbilt.edu> writes

-  To: owner-R-help  
       instead of  R-help  which then only goes to me (list maintainer)
       instead of the list
- Please use a "Subject:" !

    NielsW> Dear friends, In a recent note on this list, Peter Dalgaard and
    NielsW> Brian Ripley suggested to someone that he download the most
    NielsW> recent snapshot of R to get the newest optimizer function.  I
    NielsW> also need to use bound constraints so I downloaded the
    NielsW> development release of R.  However, I cannot figure out how to
    NielsW> compile the numerous files for a windows (NT) machine.  The
    NielsW> instructions seems to be assuming that one is using Unix.

kind of "yes".

However, since you got the source,
read 
     - first the "R for Windows" FAQ =  src/gnuwin32/rw-faq 
     - then src/gnuwin32/INSTALL

which will tell you where to get all the tools you need before you can even
*think* of compiling R for windows.
It starts with the GNU C compiler suite of the  mingw32 tool box 
(again, see the INSTALL mentioned above).

Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gfeeney at hawaii.edu  Sun Jan 30 05:54:28 2000
From: gfeeney at hawaii.edu (Griffith Feeney)
Date: Sat, 29 Jan 2000 18:54:28 -1000
Subject: [R] character vectors not wrapping
Message-ID: <3.0.5.32.20000129185428.00838bb0@pop-server.hawaii.edu>

A character vector with a single component consisting of a long string gets
truncated with $ on the right side of the R console window.

The preceding sentence, for example, assigned to 'test' by cut and paste,
renders like this (window maximized, 17" monitor, 800x600, if this matters):

[1] "A character vector with a single component consisting of a long string
gets truncated with $

The point of truncation changes when the window is resized with the mouse.
options(width=[value]) seems to work for other objects (e.g., one and two
dimenional arrays).

I'm using R (Rgui.exe) 0.90.1 on Windows 95 original relase (4.00.950).
I've been through the documentation, can't find anything on this. It is a
nuisance because I often can't read R error messages. Is there a setting I
need to change, aside from options(width=...)? Thanks.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sun Jan 30 10:03:21 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 30 Jan 2000 09:03:21 +0000 (GMT)
Subject: [R] character vectors not wrapping
In-Reply-To: <3.0.5.32.20000129185428.00838bb0@pop-server.hawaii.edu>
Message-ID: <Pine.GSO.4.05.10001300852470.22522-100000@auk.stats>

On Sat, 29 Jan 2000, Griffith Feeney wrote:

> A character vector with a single component consisting of a long string gets
> truncated with $ on the right side of the R console window.

The $ indicates that there is more text to be scrolled to. This is a
fairly common convention in text-based systems (e.g. the pine mailer).

> The preceding sentence, for example, assigned to 'test' by cut and paste,
> renders like this (window maximized, 17" monitor, 800x600, if this matters):
> 
> [1] "A character vector with a single component consisting of a long string
> gets truncated with $
> 
> The point of truncation changes when the window is resized with the mouse.
> options(width=[value]) seems to work for other objects (e.g., one and two
> dimenional arrays).
> 
> I'm using R (Rgui.exe) 0.90.1 on Windows 95 original relase (4.00.950).
> I've been through the documentation, can't find anything on this. It is a
> nuisance because I often can't read R error messages. Is there a setting I
> need to change, aside from options(width=...)? Thanks.

You can scroll the window (try Help | Console for the instructions) by CRTL
+ left/right arrow.  The next version will have a horizontal scrollbar,
which will make this both easier to use and more obvious.  I would think of
putting something in the rw-FAQ if I did not think it would be obvious in
future.

Actually, there is a truncation point in the code, but it is at several
thousand characters.

(We always intended to have horizontal scrollbars, but Guido failed to get
them to work. I managed to do so recently, after finding design
errors in the toolkit we use and re-writing the scrollbar internals.)

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jens.oehlschlaegel-akiyoshi at mdfactory.de  Mon Jan 31 10:00:49 2000
From: jens.oehlschlaegel-akiyoshi at mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Mon, 31 Jan 2000 10:00:49 +0100
Subject: [R] long character data
Message-ID: <000601bf6bc9$ab4e09c0$a9021aac@joelschlaegel>




Hi,
When trying to generate very long strings, my R hangs without any error
message, even if given much memory.

# e.g.
x <- character(10)
for (i in 1:10) x[i] <- paste(1:1000, collapse="abc")
paste(x, collapse="")

# or directly
paste(1:10000, collapse="abc")

Am I violating any max(nchar(character())) or is this a bug?

Regards


Jens Oehlschl?gel-Akiyoshi



R --vanilla

> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    0
minor    90.1
year     1999
month    December
day      15
language R

> gc()
         free  total (Mb)
Ncells 123274 250000  4.8
Vcells 746486 786432  6.0


--
Dr. Jens Oehlschl?gel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 M?nchen

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Jan 31 10:54:42 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 31 Jan 2000 09:54:42 +0000 (GMT)
Subject: [R] long character data
In-Reply-To: <000601bf6bc9$ab4e09c0$a9021aac@joelschlaegel>
Message-ID: <Pine.GSO.4.05.10001310950460.28606-100000@auk.stats>

On Mon, 31 Jan 2000, [iso-8859-1] Jens Oehlschlgel-Akiyoshi wrote:

> When trying to generate very long strings, my R hangs without any error
> message, even if given much memory.

[R 0.90.1 on Windows, GUI console I presume.] 

> # e.g.
> x <- character(10)
> for (i in 1:10) x[i] <- paste(1:1000, collapse="abc")
> paste(x, collapse="")
> 
> # or directly
> paste(1:10000, collapse="abc")
> 
> Am I violating any max(nchar(character())) or is this a bug?

The problem is in displaying them on the Rgui console: this will work in
Rterm and other versions of R.

This is already fixed for rw0990.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Mon Jan 31 11:31:05 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Jan 2000 11:31:05 +0100
Subject: [R] long character data
In-Reply-To: Prof Brian D Ripley's message of "Mon, 31 Jan 2000 09:54:42 +0000 (GMT)"
References: <Pine.GSO.4.05.10001310950460.28606-100000@auk.stats>
Message-ID: <x24sbupm6u.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley at stats.ox.ac.uk> writes:

> On Mon, 31 Jan 2000, [iso-8859-1] Jens Oehlschl?gel-Akiyoshi wrote:
> 
> > When trying to generate very long strings, my R hangs without any error
> > message, even if given much memory.
> 
> [R 0.90.1 on Windows, GUI console I presume.] 
> 
> > # e.g.
> > x <- character(10)
> > for (i in 1:10) x[i] <- paste(1:1000, collapse="abc")
> > paste(x, collapse="")
> > 
> > # or directly
> > paste(1:10000, collapse="abc")
> > 
> > Am I violating any max(nchar(character())) or is this a bug?
> 
> The problem is in displaying them on the Rgui console: this will work in
> Rterm and other versions of R.
> 
> This is already fixed for rw0990.
 
Not quite! On RedHat 6.1, I can crash R with variants of this

If I do  the 2nd example first, and then try the 1st one, I get as far
as this:

...
abc9976abc9977abc9978abc9979abc9980abc9981abc9982abc9983abc9984abc9985abc9986abc9987abc9988abc9989abc9990abc9991abc9992abc9993abc9994abc9995abc9996abc9997abc9998abc9999abc10000"
> x <- character(10)
> for (i in 1:10) x[i]
Program received signal SIGSEGV, Segmentation fault.
0x401c5e79 in chunk_free (ar_ptr=0x4025a040, p=0xd7eef310) at malloc.c:3030
3030    malloc.c: No such file or directory.

which happens inside the readline library called from

#10 0x80db1e6 in R_ReadConsole (prompt=0x4091b0e8 "> ", 
    buf=0xbffff174 "x <- character(10)\n", len=1024, addtohistory=1)
    at ../../../R/src/unix/system.c:198
198                         rl_callback_read_char();
(gdb) 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From iosu at ensia.inra.fr  Fri Jan 28 16:31:50 2000
From: iosu at ensia.inra.fr (=?iso-8859-1?Q?Jes=FAs_Mar=EDa_Fr=EDas_Celayeta?=)
Date: Fri, 28 Jan 2000 16:31:50 +0100 (CET)
Subject: [R] Help with glm object ellipses.
In-Reply-To: <Pine.GSO.4.05.10001051004400.10525-100000@auk.stats>
Message-ID: <Pine.LNX.3.96.1000128155401.8441D-100000@joxepa.ensia.inra.fr>

Dear R-help users:

	I am in the work of porting (still) the ellipse library from S (to
plot joint confidence regions from the parameters of a fit) to R and I
have encountered a significant difference between the ellipses generated
for glm objects in R and S -they have the same shape but less area than in
S+. After I spent sometime, it seems that is something I am not able to
handle, given my (very)  reduced knowledge in this area therefore I would
like to ask for some kind help to solve this.

	In fact glm ellipses are the last thing I need to solve in order
to submit the library to CRAN.  Most of the other functions for
correlation matrix (plotcorr) lm (ellipse.lm) and nls (ellipse.nls,
ellipse.profile, pairs.profile) objects have already been ported.

	For anybody that would be interested in investing some time on
this, I prevent that the original S code is from Duncan Murdoch and for
the moment will be published with a only non-commertial use license
(unless I can convince him to GPL the library and allow me to continue
developing it). I also do not have a copy of S+.

with my best regards,

IOsu



---------------------------------------------------------------------------
Jes?s Mar?a Fr?as Celayeta		"Valeu a pena? Tudo vale a pena
ENSIA-INRA, Av. des Olympiades, 1	se a alma n?o ? pequena
91744, Massy. FRANCE			Quem quer passar al?m do Bojador
Fax:intl+33+1+69935185			Tem que passar al?m da dor.
Phone:intl+33+1+69935191		Deus ao mar o perigo e abismo deu,
					Mas nele ? que espelhou o c?u"
---------------------------------------------------------------------------







-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From garbade at mip.paed.uni-muenchen.de  Mon Jan 31 12:51:18 2000
From: garbade at mip.paed.uni-muenchen.de (Sven Garbade)
Date: Mon, 31 Jan 2000 12:51:18 +0100
Subject: [R] Is there a "by()" function in R like in S? 
Message-ID: <38957736.36A86782@mip.paed.uni-muenchen.de>

Hallo R-users,

I'm a R (release 0.65) novice, but have read some about S. Is there a
similar function in R like the S function "by()" ?
This function groups data typically from a matrix by a variable and
applies a function on the grouped data. Example in S:

  > by(data, year, summary)

where "data" is a matrix containing the variable "year". After grouping
the matrix to variable "year", the function "summary" is applied to each
group.

Thanks,
Sven

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Mon Jan 31 13:25:45 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Jan 2000 13:25:45 +0100
Subject: [R] Is there a "by()" function in R like in S?
In-Reply-To: Sven Garbade's message of "Mon, 31 Jan 2000 12:51:18 +0100"
References: <38957736.36A86782@mip.paed.uni-muenchen.de>
Message-ID: <x21z6ypgvq.fsf@blueberry.kubism.ku.dk>

Sven Garbade <garbade at mip.paed.uni-muenchen.de> writes:

>   > by(data, year, summary)
> 
> where "data" is a matrix containing the variable "year". After grouping
> the matrix to variable "year", the function "summary" is applied to each
> group.

It's not in there, but it shouldn't be too hard to write one. Here's
a start:

by <- function(data, INDICES, FUN, ...)
{
   ee <- substitute(tapply(1:nrow(data), INDICES, FUNx))
   FUNx <- function(x) FUN(data[x,], ...)
   ans <- eval(ee, data)
   class(ans)<-"by"
} 

Now go and write print.by ...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From worsley at math.mcgill.ca  Mon Jan 31 16:04:48 2000
From: worsley at math.mcgill.ca (Keith Worsley)
Date: Mon, 31 Jan 2000 10:04:48 -0500
Subject: [R] glm
Message-ID: <002201bf6bfc$849ee640$3a96ce84@math.mcgill.ca>

       I've downloaded R for windows (9.0.1) and it is great! I've
converted all my lecture notes for my GLM course to run on R (they are
available on my web page below). I must admit I particularly like the
default contrast options, which are identical to GLIM. Also I like the
gl function - very useful! I have a couple of questions/bugs:

1. predict.glm doesn't work, but predict.lm does - actually all I am
after is the equivalent of the GLIM

     $extract %vl

command, which I want to get from

     vl<-predict.glm(glm,se.fit=T)$se.fit^2

A bit clumsy - is there a better way? I'm using it to calculate
'deleted' residuals:

     resid(glm)/(1-vl/summary(glm)$dispersion)

2. What are you actually using as an estimator of the dispersion
parameter? Is it dev/df, or is it sum((Y-mu)^2/V(mu))/df?

3. It would be very nice to be able to fix the dispersion parameter in
advance, before using summary(glm). You might know that the data is
exponential, in which case you want to fix the gamma dispersion
parameter to 1, or you might have a previous value from another
analysis, or you might want to cope with extra-binomial/poisson
variation by using dev/df. Is there an easy way of doing this? In GLIM,
you just say $cal %sc= ...

4. I don't think AIC is stricly correct. My understanding of AIC is that
it is the log likelihood maximised over all the parameters, including
the dispersion parameter. Now the problem is that the mle of the
dispersion parameter for the gamma family (and the exponential family in
general) is really awkward - I think it has to be found by interative
methods, using the derivative of the gamma function - I see from a print
of Gamma that you are using dev/n, but I don't think this is the mle....

5. As a matter of interest, section 9.1 of my notes defines the
poisson-expoential family, with a variance function mu^(3/2), useful for
continuous data with exact zeros. I coded up the family by modifying the
poisson family - seems to work, giving the same values as GLIM, but
again I had to leave AIC blank because it's too awkward to estimate the
dispersion parameter....


Keith Worsley
Department of Mathematics and Statistics
McGill University                              office: BH 1232
805 ouest, rue Sherbrooke                  tel: (514)-398-3842
Montreal                                   fax: (514)-398-3899
Quebec                          e-mail: worsley at math.mcgill.ca
Canada  H3A 2K6           web: http://www.math.mcgill.ca/keith




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Mon Jan 31 18:01:32 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Mon, 31 Jan 2000 17:01:32 +0000 (GMT)
Subject: [R] glm
In-Reply-To: <002201bf6bfc$849ee640$3a96ce84@math.mcgill.ca>
Message-ID: <Pine.LNX.4.10.10001311616460.27547-100000@gimel.biostat.washington.edu>

On Mon, 31 Jan 2000, Keith Worsley wrote:

>        I've downloaded R for windows (9.0.1) and it is great! I've
> converted all my lecture notes for my GLM course to run on R (they are
> available on my web page below). I must admit I particularly like the
> default contrast options, which are identical to GLIM. Also I like the
> gl function - very useful! I have a couple of questions/bugs:
> 
> 1. predict.glm doesn't work, but predict.lm does - actually all I am
> after is the equivalent of the GLIM

More precisely, predict.glm(,se.fit=T) doesn't work.

On line 36, change from
	type=type
to
	type=ifelse(type=="link","response",type)


> 
>      $extract %vl
> 
> command, which I want to get from
> 
>      vl<-predict.glm(glm,se.fit=T)$se.fit^2
> 
> A bit clumsy - is there a better way? I'm using it to calculate
> 'deleted' residuals:
> 
>      resid(glm)/(1-vl/summary(glm)$dispersion)

I think rstudent() does what you want.

> 2. What are you actually using as an estimator of the dispersion
> parameter? Is it dev/df, or is it sum((Y-mu)^2/V(mu))/df?

It's the latter.  Look at summary.glm for the code

> 3. It would be very nice to be able to fix the dispersion parameter in
> advance, before using summary(glm). You might know that the data is
> exponential, in which case you want to fix the gamma dispersion
> parameter to 1, or you might have a previous value from another
> analysis, or you might want to cope with extra-binomial/poisson
> variation by using dev/df. Is there an easy way of doing this? In GLIM,
> you just say $cal %sc= ...

summary.glm() has a dispersion= option.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mlamias at isr.umich.edu  Mon Jan 31 20:20:20 2000
From: mlamias at isr.umich.edu (Mark Lamias)
Date: Mon, 31 Jan 2000 14:20:20 -0500
Subject: [R] Crosstabs?
Message-ID: <5D28BEE5CAE8D1119F5700A0C9B4268E02E5D0ED@isr.umich.edu>

Is there an equivalent in R to the crosstabs command S-Plus?  I've been
searching for a while and can't seem to find anything.

Thanks.

Mark J. Lamias
Department of Statistics
Department of Political Science
Survey Methodology Program/Survey Research Center
Institute for Social Research - University of Michigan
426 Thompson Street, Room 315
Ann Arbor, Michigan 48104-2321
(734) 647-5381

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Mon Jan 31 20:39:34 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Mon, 31 Jan 2000 19:39:34 +0000 (GMT)
Subject: [R] Crosstabs?
In-Reply-To: <5D28BEE5CAE8D1119F5700A0C9B4268E02E5D0ED@isr.umich.edu>
Message-ID: <Pine.LNX.4.10.10001311938250.27547-100000@gimel.biostat.washington.edu>

On Mon, 31 Jan 2000, Mark Lamias wrote:

> Is there an equivalent in R to the crosstabs command S-Plus?  I've been
> searching for a while and can't seem to find anything.
> 

The development version (due out as 0.99.0 next week) has ftable() for
producing formatted contingency tables

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From sgajera at hotpop.com  Sat Jan  8 19:44:15 2000
From: sgajera at hotpop.com (Shailesh Gajera)
Date: Sat, 8 Jan 2000 11:44:15 -0700
Subject: [R] Re: Typist/Data Entry Processor 
Message-ID: <025101bf5a08$e7811d60$218558cb@sgnet>

Dear Sir,
 
I'm very interested in receiving information on Typist/Data Entry jobs to work from home. I need to get started right away.  
 
Please send me the necessary information to get started.
 
Sincerely, 
Shailesh Gajera
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20000108/3bd26e31/attachment.html

