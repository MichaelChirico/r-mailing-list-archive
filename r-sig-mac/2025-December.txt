From bbo|ker @end|ng |rom gm@||@com  Wed Dec  3 01:10:24 2025
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 2 Dec 2025 19:10:24 -0500
Subject: [R-SIG-Mac] CRAN LaTeX infrastructure for packages
Message-ID: <243aee3f-ac5e-45c1-8a12-00fa7d4a932e@gmail.com>

   I'm not a regular reader of r-sig-mac, but have a question about CRAN 
LaTeX infrastructure for MacOS.

   This may be a question specifically for Simon Urbanek, but thought 
I'd check here first in case anyone has insights.

   I recently sent a new version of the lme4 package (1.1-38) to CRAN; 
it passed all the incoming tests, but I'm now seeing warnings (at 
https://cran.r-project.org/web/checks/check_results_lme4.html) from the 
r-release-macos-arm64  and r-oldrel-macos-arm64  (but *not* from the 
x86_64 platforms):

 >   ! LaTeX Error: File `blkarray.sty' not found.

This hasn't happened before.  Furthermore, when I go back in the git log 
for the package I see:

commit 3140cc0f1b394c6888d7704ee3d5de5f45df2886
Author: Ben Bolker <bbolker at gmail.com>
Date:   Thu Aug 10 10:28:55 2017 -0400

     .Rbuildignore blkarray.sty as per CRAN request

In particular, Kurt Hornik sent a mass e-mail in 2017 to many package 
maintainers saying:

 >  These [packages] contain copies of standard LaTeX .sty files which 
should be excluded from the package (as shipping these copies should not 
be necessary, and may even cause trouble in case the local copies become 
outdated [as just happened for a recent CRAN submission]).

   So my best guess is that this is an oversight/platform glitch on the 
arm64 platforms ...

   Thoughts?

   sincerely
    Ben Bolker


From pd@|gd @end|ng |rom gm@||@com  Wed Dec  3 14:20:54 2025
From: pd@|gd @end|ng |rom gm@||@com (Peter Dalgaard)
Date: Wed, 3 Dec 2025 14:20:54 +0100
Subject: [R-SIG-Mac] CRAN LaTeX infrastructure for packages
In-Reply-To: <243aee3f-ac5e-45c1-8a12-00fa7d4a932e@gmail.com>
References: <243aee3f-ac5e-45c1-8a12-00fa7d4a932e@gmail.com>
Message-ID: <C67F7EF3-5F3A-45E7-8FA6-C1206FFA6ADD@gmail.com>

Hi Ben,

For whatever is is worth, I do have (on an M4)

% find /usr/local -name blkarray.sty
/usr/local/texlive/2024/texmf-dist/tex/latex/blkarray/blkarray.sty

and I don't recall doing anything special to get it. So yes, most likely there's a glitch in the TeX install on the macos-arm64 builder.

-pd


> On 3 Dec 2025, at 01.10, Ben Bolker <bbolker at gmail.com> wrote:
> 
>  I'm not a regular reader of r-sig-mac, but have a question about CRAN LaTeX infrastructure for MacOS.
> 
>  This may be a question specifically for Simon Urbanek, but thought I'd check here first in case anyone has insights.
> 
>  I recently sent a new version of the lme4 package (1.1-38) to CRAN; it passed all the incoming tests, but I'm now seeing warnings (at https://cran.r-project.org/web/checks/check_results_lme4.html) from the r-release-macos-arm64  and r-oldrel-macos-arm64  (but *not* from the x86_64 platforms):
> 
> >   ! LaTeX Error: File `blkarray.sty' not found.
> 
> This hasn't happened before.  Furthermore, when I go back in the git log for the package I see:
> 
> commit 3140cc0f1b394c6888d7704ee3d5de5f45df2886
> Author: Ben Bolker <bbolker at gmail.com>
> Date:   Thu Aug 10 10:28:55 2017 -0400
> 
>    .Rbuildignore blkarray.sty as per CRAN request
> 
> In particular, Kurt Hornik sent a mass e-mail in 2017 to many package maintainers saying:
> 
> >  These [packages] contain copies of standard LaTeX .sty files which should be excluded from the package (as shipping these copies should not be necessary, and may even cause trouble in case the local copies become outdated [as just happened for a recent CRAN submission]).
> 
>  So my best guess is that this is an oversight/platform glitch on the arm64 platforms ...
> 
>  Thoughts?
> 
>  sincerely
>   Ben Bolker
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From m@rc_@chw@rtz @end|ng |rom me@com  Wed Dec  3 15:08:17 2025
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Wed, 3 Dec 2025 09:08:17 -0500
Subject: [R-SIG-Mac] CRAN LaTeX infrastructure for packages
In-Reply-To: <C67F7EF3-5F3A-45E7-8FA6-C1206FFA6ADD@gmail.com>
References: <243aee3f-ac5e-45c1-8a12-00fa7d4a932e@gmail.com>
 <C67F7EF3-5F3A-45E7-8FA6-C1206FFA6ADD@gmail.com>
Message-ID: <75648329-9637-48F8-9611-E7150E1103DB@me.com>

Hi,

As far as I know, that style file is part of the standard MacTeX distribution, which is built upon TeX Live, and includes the blkarray package by default. I have it installed on my MacBook and did not do anything other than a default install of the full MacTeX release:

 % find /usr/local -name blkarray.sty
/usr/local/texlive/2025/texmf-dist/tex/latex/blkarray/blkarray.sty

As Peter notes, I suspect that this is an issue on CRAN and would defer to Simon's interaction here.

Also, as an FYI to Peter, I note below from the file path that you have TeX Live 2024 installed. The distributions are updated annually, and 2025 was released this past spring (March/April time frame). I do not believe that a prior year distribution is maintained for updates once the current year distribution is released, even though you can have multiple annual releases installed in parallel.

Regards,

Marc

> On Dec 3, 2025, at 8:20?AM, Peter Dalgaard <pdalgd at gmail.com> wrote:
> 
> Hi Ben,
> 
> For whatever is is worth, I do have (on an M4)
> 
> % find /usr/local -name blkarray.sty
> /usr/local/texlive/2024/texmf-dist/tex/latex/blkarray/blkarray.sty
> 
> and I don't recall doing anything special to get it. So yes, most likely there's a glitch in the TeX install on the macos-arm64 builder.
> 
> -pd
> 
> 
>> On 3 Dec 2025, at 01.10, Ben Bolker <bbolker at gmail.com> wrote:
>> 
>> I'm not a regular reader of r-sig-mac, but have a question about CRAN LaTeX infrastructure for MacOS.
>> 
>> This may be a question specifically for Simon Urbanek, but thought I'd check here first in case anyone has insights.
>> 
>> I recently sent a new version of the lme4 package (1.1-38) to CRAN; it passed all the incoming tests, but I'm now seeing warnings (at https://cran.r-project.org/web/checks/check_results_lme4.html) from the r-release-macos-arm64  and r-oldrel-macos-arm64  (but *not* from the x86_64 platforms):
>> 
>>>  ! LaTeX Error: File `blkarray.sty' not found.
>> 
>> This hasn't happened before.  Furthermore, when I go back in the git log for the package I see:
>> 
>> commit 3140cc0f1b394c6888d7704ee3d5de5f45df2886
>> Author: Ben Bolker <bbolker at gmail.com>
>> Date:   Thu Aug 10 10:28:55 2017 -0400
>> 
>>   .Rbuildignore blkarray.sty as per CRAN request
>> 
>> In particular, Kurt Hornik sent a mass e-mail in 2017 to many package maintainers saying:
>> 
>>> These [packages] contain copies of standard LaTeX .sty files which should be excluded from the package (as shipping these copies should not be necessary, and may even cause trouble in case the local copies become outdated [as just happened for a recent CRAN submission]).
>> 
>> So my best guess is that this is an oversight/platform glitch on the arm64 platforms ...
>> 
>> Thoughts?
>> 
>> sincerely
>>  Ben Bolker
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From @|mon@urb@nek @end|ng |rom R-project@org  Wed Dec  3 20:33:52 2025
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Thu, 4 Dec 2025 08:33:52 +1300
Subject: [R-SIG-Mac] CRAN LaTeX infrastructure for packages
In-Reply-To: <243aee3f-ac5e-45c1-8a12-00fa7d4a932e@gmail.com>
References: <243aee3f-ac5e-45c1-8a12-00fa7d4a932e@gmail.com>
Message-ID: <1D5F002D-194F-403C-942C-A6DABB47468F@R-project.org>

Ben,

it is not an oversight in that I'm not aware of any agreed set of optional packages. I'm also not aware of the discussion you quote from 2017, but if there is anything that you need that is not in the standard set then all you need to do is tell me that you require it.

The change is that the most recent builds are now done on VMs that are now setup fully automatically (=no manual intervention) and use TinyTeX instead of MacTeX to make maintenance easier - FWIW  see
https://github.com/R-macos/vm-scripts-mini-r/blob/master/shared/setup.sh

If you need any packages that are not a part of the standard TinyTeX bundle then you just need to tell me (or you can ask TinyTeX to include it so it is available to others as well).

Cheers,
Simon


> On 3/12/2025, at 1:10 PM, Ben Bolker <bbolker at gmail.com> wrote:
> 
>  I'm not a regular reader of r-sig-mac, but have a question about CRAN LaTeX infrastructure for MacOS.
> 
>  This may be a question specifically for Simon Urbanek, but thought I'd check here first in case anyone has insights.
> 
>  I recently sent a new version of the lme4 package (1.1-38) to CRAN; it passed all the incoming tests, but I'm now seeing warnings (at https://cran.r-project.org/web/checks/check_results_lme4.html) from the r-release-macos-arm64  and r-oldrel-macos-arm64  (but *not* from the x86_64 platforms):
> 
> >   ! LaTeX Error: File `blkarray.sty' not found.
> 
> This hasn't happened before.  Furthermore, when I go back in the git log for the package I see:
> 
> commit 3140cc0f1b394c6888d7704ee3d5de5f45df2886
> Author: Ben Bolker <bbolker at gmail.com>
> Date:   Thu Aug 10 10:28:55 2017 -0400
> 
>    .Rbuildignore blkarray.sty as per CRAN request
> 
> In particular, Kurt Hornik sent a mass e-mail in 2017 to many package maintainers saying:
> 
> >  These [packages] contain copies of standard LaTeX .sty files which should be excluded from the package (as shipping these copies should not be necessary, and may even cause trouble in case the local copies become outdated [as just happened for a recent CRAN submission]).
> 
>  So my best guess is that this is an oversight/platform glitch on the arm64 platforms ...
> 
>  Thoughts?
> 
>  sincerely
>   Ben Bolker
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From bbo|ker @end|ng |rom gm@||@com  Wed Dec  3 21:05:03 2025
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Wed, 3 Dec 2025 15:05:03 -0500
Subject: [R-SIG-Mac] CRAN LaTeX infrastructure for packages
In-Reply-To: <1D5F002D-194F-403C-942C-A6DABB47468F@R-project.org>
References: <243aee3f-ac5e-45c1-8a12-00fa7d4a932e@gmail.com>
 <1D5F002D-194F-403C-942C-A6DABB47468F@R-project.org>
Message-ID: <ade3d997-2c21-4d9e-bb4d-bb44d4ea6810@gmail.com>

    OK, then this is my official request to include blkarray.sty in the 
set of available LaTeX style files on the arm64 platform ... (i.e. the 
blkarray LaTeX package, 
https://ctan.org/tex-archive/macros/latex/contrib/blkarray?lang=en )

  This is the list of 'unnecessary' style files that were included in 
Kurt Hornik's 2017 e-mail to maintainers.  I don't know if there's an 
easy way to diff against the set of files that TinyTeX provides ...


a4wide.sty
actuarialangle.sty
actuarialsymbol.sty
algorithm2e.sty
algorithmic.sty
amsmath.sty
amssymb.sty
authblk.sty
blkarray.sty
bm.sty
chicago.sty
enumitem.sty
environ.sty
fancyhdr.sty
fancyheadings.sty
fancyvrb.sty
float.sty
framed.sty
fullpage.sty
geometry.sty
inconsolata.sty
layout.sty
longtable.sty
natbib.sty
nicefrac.sty
placeins.sty
relsize.sty
shadethm.sty
siunitx.sty
srcltx.sty
subfigure.sty
svnkw.sty
svn-multi.sty
tabu.sty
titleps.sty
titlesec.sty
titletoc.sty
trimspaces.sty
upquote.sty
versions.sty
zi4.sty

   I don't know if you should try to provide all these, or wait for 
tests to fail and fix things one package at a time ...

   cheers
    Ben Bolker

On 12/3/25 14:33, Simon Urbanek wrote:
> Ben,
> 
> it is not an oversight in that I'm not aware of any agreed set of optional packages. I'm also not aware of the discussion you quote from 2017, but if there is anything that you need that is not in the standard set then all you need to do is tell me that you require it.
> 
> The change is that the most recent builds are now done on VMs that are now setup fully automatically (=no manual intervention) and use TinyTeX instead of MacTeX to make maintenance easier - FWIW  see
> https://github.com/R-macos/vm-scripts-mini-r/blob/master/shared/setup.sh
> 
> If you need any packages that are not a part of the standard TinyTeX bundle then you just need to tell me (or you can ask TinyTeX to include it so it is available to others as well).
> 
> Cheers,
> Simon
> 
> 
>> On 3/12/2025, at 1:10 PM, Ben Bolker <bbolker at gmail.com> wrote:
>>
>>   I'm not a regular reader of r-sig-mac, but have a question about CRAN LaTeX infrastructure for MacOS.
>>
>>   This may be a question specifically for Simon Urbanek, but thought I'd check here first in case anyone has insights.
>>
>>   I recently sent a new version of the lme4 package (1.1-38) to CRAN; it passed all the incoming tests, but I'm now seeing warnings (at https://cran.r-project.org/web/checks/check_results_lme4.html) from the r-release-macos-arm64  and r-oldrel-macos-arm64  (but *not* from the x86_64 platforms):
>>
>>>    ! LaTeX Error: File `blkarray.sty' not found.
>>
>> This hasn't happened before.  Furthermore, when I go back in the git log for the package I see:
>>
>> commit 3140cc0f1b394c6888d7704ee3d5de5f45df2886
>> Author: Ben Bolker <bbolker at gmail.com>
>> Date:   Thu Aug 10 10:28:55 2017 -0400
>>
>>     .Rbuildignore blkarray.sty as per CRAN request
>>
>> In particular, Kurt Hornik sent a mass e-mail in 2017 to many package maintainers saying:
>>
>>>   These [packages] contain copies of standard LaTeX .sty files which should be excluded from the package (as shipping these copies should not be necessary, and may even cause trouble in case the local copies become outdated [as just happened for a recent CRAN submission]).
>>
>>   So my best guess is that this is an oversight/platform glitch on the arm64 platforms ...
>>
>>   Thoughts?
>>
>>   sincerely
>>    Ben Bolker
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
> 

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Associate chair (graduate), Mathematics & Statistics
Director, School of Computational Science and Engineering
* E-mail is sent at my convenience; I don't expect replies outside of 
working hours.


From @|mon@urb@nek @end|ng |rom R-project@org  Wed Dec  3 21:12:37 2025
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Thu, 4 Dec 2025 09:12:37 +1300
Subject: [R-SIG-Mac] CRAN LaTeX infrastructure for packages
In-Reply-To: <ade3d997-2c21-4d9e-bb4d-bb44d4ea6810@gmail.com>
References: <243aee3f-ac5e-45c1-8a12-00fa7d4a932e@gmail.com>
 <1D5F002D-194F-403C-942C-A6DABB47468F@R-project.org>
 <ade3d997-2c21-4d9e-bb4d-bb44d4ea6810@gmail.com>
Message-ID: <CAAC2A32-4D00-4B69-9376-4DCEB947B8BB@R-project.org>

Ben,

thanks for the list! From those the following are missing from the standard TinyTex:

== actuarialangle.sty
== actuarialsymbol.sty
== algorithm2e.sty
== blkarray.sty
== chicago.sty
== relsize.sty
== shadethm.sty
== svnkw.sty
== svn-multi.sty
== versions.sty

So I'll set that they are included one way or another.

Thanks,
Simon



> On 4/12/2025, at 9:05 AM, Ben Bolker <bbolker at gmail.com> wrote:
> 
>   OK, then this is my official request to include blkarray.sty in the set of available LaTeX style files on the arm64 platform ... (i.e. the blkarray LaTeX package, https://ctan.org/tex-archive/macros/latex/contrib/blkarray?lang=en )
> 
> This is the list of 'unnecessary' style files that were included in Kurt Hornik's 2017 e-mail to maintainers.  I don't know if there's an easy way to diff against the set of files that TinyTeX provides ...
> 
> 
> a4wide.sty
> actuarialangle.sty
> actuarialsymbol.sty
> algorithm2e.sty
> algorithmic.sty
> amsmath.sty
> amssymb.sty
> authblk.sty
> blkarray.sty
> bm.sty
> chicago.sty
> enumitem.sty
> environ.sty
> fancyhdr.sty
> fancyheadings.sty
> fancyvrb.sty
> float.sty
> framed.sty
> fullpage.sty
> geometry.sty
> inconsolata.sty
> layout.sty
> longtable.sty
> natbib.sty
> nicefrac.sty
> placeins.sty
> relsize.sty
> shadethm.sty
> siunitx.sty
> srcltx.sty
> subfigure.sty
> svnkw.sty
> svn-multi.sty
> tabu.sty
> titleps.sty
> titlesec.sty
> titletoc.sty
> trimspaces.sty
> upquote.sty
> versions.sty
> zi4.sty
> 
>  I don't know if you should try to provide all these, or wait for tests to fail and fix things one package at a time ...
> 
>  cheers
>   Ben Bolker
> 
> On 12/3/25 14:33, Simon Urbanek wrote:
>> Ben,
>> it is not an oversight in that I'm not aware of any agreed set of optional packages. I'm also not aware of the discussion you quote from 2017, but if there is anything that you need that is not in the standard set then all you need to do is tell me that you require it.
>> The change is that the most recent builds are now done on VMs that are now setup fully automatically (=no manual intervention) and use TinyTeX instead of MacTeX to make maintenance easier - FWIW  see
>> https://github.com/R-macos/vm-scripts-mini-r/blob/master/shared/setup.sh
>> If you need any packages that are not a part of the standard TinyTeX bundle then you just need to tell me (or you can ask TinyTeX to include it so it is available to others as well).
>> Cheers,
>> Simon
>>> On 3/12/2025, at 1:10 PM, Ben Bolker <bbolker at gmail.com> wrote:
>>> 
>>>  I'm not a regular reader of r-sig-mac, but have a question about CRAN LaTeX infrastructure for MacOS.
>>> 
>>>  This may be a question specifically for Simon Urbanek, but thought I'd check here first in case anyone has insights.
>>> 
>>>  I recently sent a new version of the lme4 package (1.1-38) to CRAN; it passed all the incoming tests, but I'm now seeing warnings (at https://cran.r-project.org/web/checks/check_results_lme4.html) from the r-release-macos-arm64  and r-oldrel-macos-arm64  (but *not* from the x86_64 platforms):
>>> 
>>>>   ! LaTeX Error: File `blkarray.sty' not found.
>>> 
>>> This hasn't happened before.  Furthermore, when I go back in the git log for the package I see:
>>> 
>>> commit 3140cc0f1b394c6888d7704ee3d5de5f45df2886
>>> Author: Ben Bolker <bbolker at gmail.com>
>>> Date:   Thu Aug 10 10:28:55 2017 -0400
>>> 
>>>    .Rbuildignore blkarray.sty as per CRAN request
>>> 
>>> In particular, Kurt Hornik sent a mass e-mail in 2017 to many package maintainers saying:
>>> 
>>>>  These [packages] contain copies of standard LaTeX .sty files which should be excluded from the package (as shipping these copies should not be necessary, and may even cause trouble in case the local copies become outdated [as just happened for a recent CRAN submission]).
>>> 
>>>  So my best guess is that this is an oversight/platform glitch on the arm64 platforms ...
>>> 
>>>  Thoughts?
>>> 
>>>  sincerely
>>>   Ben Bolker
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
> 
> -- 
> Dr. Benjamin Bolker
> Professor, Mathematics & Statistics and Biology, McMaster University
> Associate chair (graduate), Mathematics & Statistics
> Director, School of Computational Science and Engineering
> * E-mail is sent at my convenience; I don't expect replies outside of working hours.
> 


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Dec 10 12:13:24 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 10 Dec 2025 06:13:24 -0500
Subject: [R-SIG-Mac] Using sanitizers in MacOS builds
Message-ID: <88d185ba-e1ac-44bc-8368-ed4bde4e9436@gmail.com>

I am making some large changes to rgl, and something I've done is 
causing crashes which I'm having trouble tracking down.  These are 
likely things that one of the sanitizers could detect, so I'd like to do 
a build using one.

The WRE manual gives partial instructions about how to enable them.  It 
first says to put these lines in ~/.R/Makevars:

   CC = gcc -std=gnu99 -fsanitize=address -fno-omit-frame-pointer
   CXX = g++ -fsanitize=address -fno-omit-frame-pointer
   FC = gfortran -fsanitize=address

These don't work for me on my Mac, generating lots of compile errors 
that I don't see with the default settings.

Later WRE gives other instructions for clang 18.  What's not clear to me 
is what I should do for the default compiler tools (including clang 16) 
from mac.r-project.org.  Can anyone suggest what I should do for this 
situation:

  - using the default build of R from CRAN
  - using the libs and tools from mac.r-project.org
  - trying to build rgl with the sanitizer options

Duncan Murdoch


From r|p|eybd @end|ng |rom |c|oud@com  Wed Dec 10 13:29:26 2025
From: r|p|eybd @end|ng |rom |c|oud@com (Prof Brian Ripley)
Date: Wed, 10 Dec 2025 12:29:26 +0000
Subject: [R-SIG-Mac] Using sanitizers in MacOS builds
In-Reply-To: <88d185ba-e1ac-44bc-8368-ed4bde4e9436@gmail.com>
References: <88d185ba-e1ac-44bc-8368-ed4bde4e9436@gmail.com>
Message-ID: <efcfd446-c237-4104-8a92-e883c56ace18@icloud.com>

On 10/12/2025 11:13, Duncan Murdoch wrote:
> I am making some large changes to rgl, and something I've done is 
> causing crashes which I'm having trouble tracking down.? These are 
> likely things that one of the sanitizers could detect, so I'd like to do 
> a build using one.
> 
> The WRE manual gives partial instructions about how to enable them.? It 
> first says to put these lines in ~/.R/Makevars:
> 
>  ? CC = gcc -std=gnu99 -fsanitize=address -fno-omit-frame-pointer
>  ? CXX = g++ -fsanitize=address -fno-omit-frame-pointer
>  ? FC = gfortran -fsanitize=address

Not for macOS ....

> These don't work for me on my Mac, generating lots of compile errors 
> that I don't see with the default settings.
> 
> Later WRE gives other instructions for clang 18.? What's not clear to me 
> is what I should do for the default compiler tools (including clang 16) 
> from mac.r-project.org.? Can anyone suggest what I should do for this 
> situation:
> 
>  ?- using the default build of R from CRAN

AFAIK you need to build R with sanitizers: it might be possible without 
but the issues often are partially in the way the package calls back into R.

>  ?- using the libs and tools from mac.r-project.org

In principle this might needs libs built against the sanitizers but I 
have only seen one instance over the years.  Normally you will get less 
(but still useful) information.

Anything built with sanitizers needs to be of the same compiler version 
as used for R (in Linux experience, even the same patch version).

>  ?- trying to build rgl with the sanitizer options

See

https://www.stats.ox.ac.uk/pub/bdr/M1-SAN/README.txt

which is tested daily, but only with up-to-date macOS and tools.

I don't think the gfortran used on macOS has sanitizer support, but it 
any case GCC's is not compatible with LLVM's.  So this is C/C++ only.

-- 
Brian D. Ripley,                  ripleybd at icloud.com
Emeritus Professor of Applied Statistics, University of Oxford


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Dec 10 15:24:37 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 10 Dec 2025 09:24:37 -0500
Subject: [R-SIG-Mac] Using sanitizers in MacOS builds
In-Reply-To: <efcfd446-c237-4104-8a92-e883c56ace18@icloud.com>
References: <88d185ba-e1ac-44bc-8368-ed4bde4e9436@gmail.com>
 <efcfd446-c237-4104-8a92-e883c56ace18@icloud.com>
Message-ID: <9eeb475c-a33d-4902-a067-2ea284e41a3c@gmail.com>

Thanks.  With any luck, these will show my error, and I can make some 
progress.

Duncan Murdoch

On 2025-12-10 7:29 a.m., Prof Brian Ripley wrote:
> On 10/12/2025 11:13, Duncan Murdoch wrote:
>> I am making some large changes to rgl, and something I've done is
>> causing crashes which I'm having trouble tracking down.? These are
>> likely things that one of the sanitizers could detect, so I'd like to do
>> a build using one.
>>
>> The WRE manual gives partial instructions about how to enable them.? It
>> first says to put these lines in ~/.R/Makevars:
>>
>>   ? CC = gcc -std=gnu99 -fsanitize=address -fno-omit-frame-pointer
>>   ? CXX = g++ -fsanitize=address -fno-omit-frame-pointer
>>   ? FC = gfortran -fsanitize=address
> 
> Not for macOS ....
> 
>> These don't work for me on my Mac, generating lots of compile errors
>> that I don't see with the default settings.
>>
>> Later WRE gives other instructions for clang 18.? What's not clear to me
>> is what I should do for the default compiler tools (including clang 16)
>> from mac.r-project.org.? Can anyone suggest what I should do for this
>> situation:
>>
>>   ?- using the default build of R from CRAN
> 
> AFAIK you need to build R with sanitizers: it might be possible without
> but the issues often are partially in the way the package calls back into R.
> 
>>   ?- using the libs and tools from mac.r-project.org
> 
> In principle this might needs libs built against the sanitizers but I
> have only seen one instance over the years.  Normally you will get less
> (but still useful) information.
> 
> Anything built with sanitizers needs to be of the same compiler version
> as used for R (in Linux experience, even the same patch version).
> 
>>   ?- trying to build rgl with the sanitizer options
> 
> See
> 
> https://www.stats.ox.ac.uk/pub/bdr/M1-SAN/README.txt
> 
> which is tested daily, but only with up-to-date macOS and tools.
> 
> I don't think the gfortran used on macOS has sanitizer support, but it
> any case GCC's is not compatible with LLVM's.  So this is C/C++ only.
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Dec 10 21:27:06 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 10 Dec 2025 15:27:06 -0500
Subject: [R-SIG-Mac] Using sanitizers in MacOS builds
In-Reply-To: <9eeb475c-a33d-4902-a067-2ea284e41a3c@gmail.com>
References: <88d185ba-e1ac-44bc-8368-ed4bde4e9436@gmail.com>
 <efcfd446-c237-4104-8a92-e883c56ace18@icloud.com>
 <9eeb475c-a33d-4902-a067-2ea284e41a3c@gmail.com>
Message-ID: <07729acf-04af-4770-9003-92508ca4fbe0@gmail.com>

This was very helpful.  Turns out one loop decremented using i-- when it 
should have had --i.  That overwrote element "-1" of a vector, and 
caused a later crash.  One of the sanitizers caught the out-of-bounds write.

Duncan Murdoch

On 2025-12-10 9:24 a.m., Duncan Murdoch wrote:
> Thanks.  With any luck, these will show my error, and I can make some
> progress.
> 
> Duncan Murdoch
> 
> On 2025-12-10 7:29 a.m., Prof Brian Ripley wrote:
>> On 10/12/2025 11:13, Duncan Murdoch wrote:
>>> I am making some large changes to rgl, and something I've done is
>>> causing crashes which I'm having trouble tracking down.? These are
>>> likely things that one of the sanitizers could detect, so I'd like to do
>>> a build using one.
>>>
>>> The WRE manual gives partial instructions about how to enable them.? It
>>> first says to put these lines in ~/.R/Makevars:
>>>
>>>    ? CC = gcc -std=gnu99 -fsanitize=address -fno-omit-frame-pointer
>>>    ? CXX = g++ -fsanitize=address -fno-omit-frame-pointer
>>>    ? FC = gfortran -fsanitize=address
>>
>> Not for macOS ....
>>
>>> These don't work for me on my Mac, generating lots of compile errors
>>> that I don't see with the default settings.
>>>
>>> Later WRE gives other instructions for clang 18.? What's not clear to me
>>> is what I should do for the default compiler tools (including clang 16)
>>> from mac.r-project.org.? Can anyone suggest what I should do for this
>>> situation:
>>>
>>>    ?- using the default build of R from CRAN
>>
>> AFAIK you need to build R with sanitizers: it might be possible without
>> but the issues often are partially in the way the package calls back into R.
>>
>>>    ?- using the libs and tools from mac.r-project.org
>>
>> In principle this might needs libs built against the sanitizers but I
>> have only seen one instance over the years.  Normally you will get less
>> (but still useful) information.
>>
>> Anything built with sanitizers needs to be of the same compiler version
>> as used for R (in Linux experience, even the same patch version).
>>
>>>    ?- trying to build rgl with the sanitizer options
>>
>> See
>>
>> https://www.stats.ox.ac.uk/pub/bdr/M1-SAN/README.txt
>>
>> which is tested daily, but only with up-to-date macOS and tools.
>>
>> I don't think the gfortran used on macOS has sanitizer support, but it
>> any case GCC's is not compatible with LLVM's.  So this is C/C++ only.
>>
>


From jeroenoom@ @end|ng |rom gm@||@com  Thu Dec 11 20:26:53 2025
From: jeroenoom@ @end|ng |rom gm@||@com (Jeroen Ooms)
Date: Thu, 11 Dec 2025 19:26:53 +0000
Subject: [R-SIG-Mac] MacOS binaries for R-4.6
In-Reply-To: <7BD2A703-B85D-4982-B3DD-795D4AC9BF23@R-project.org>
References: <CABFfbXvM9BUvz+hOUxOUwO+e5iHmsoKFRjg9BdJYsSNQWCaH+A@mail.gmail.com>
 <7BD2A703-B85D-4982-B3DD-795D4AC9BF23@R-project.org>
Message-ID: <CABFfbXtbpH5q3wFMkZ9OipZZVYF7bwZwaHeXPjk58rmrX_0gsw@mail.gmail.com>

Hello,

I was wondering if there is an update to what will be the SDKROOT and
MACOSX_DEPLOYMENT_TARGET for R-4.6-arm? This way we can match the
settings in R-universe and bioconductor.

I see binary packages are now uploaded to a new path:
https://cran.r-project.org/bin/macosx/sonoma-arm64/contrib/4.6/. Is
this likely to be the final decision for R-4.6?

Also It would be interesting to know which version of libomp.dylib
will be included with R-macos 4.6 :)

Thank you!





On Wed, Nov 12, 2025 at 9:07?PM Simon Urbanek
<simon.urbanek at r-project.org> wrote:
>
> Jeroen,
>
> the 4.6 binaries are available on CRAN since July. However note that they are experimental since they are built using the same build machine as 4.5. We are in the process of setting up a new VM for R-devel package builds so the target and toolchain will likely change for the arm64 build. With the performance framework updates on arm in macOS 14 it may be worth considering to increase the target correspondingly.
>
> Cheers,
> Simon
>
>
>
> > On 13 Nov 2025, at 01:36, Jeroen Ooms <jeroenooms at gmail.com> wrote:
> >
> > As every year, starting this month, the bioconductor development branch now targets R-4.6 for the planned release in April.
> >
> > Last year CRAN provided MacOS r-devel package binaries way ahead of the release, see
> > https://stat.ethz.ch/pipermail/r-sig-mac/2025-January/015106.html
> >
> > This was super helpful. It would be great if this can be done again early in the cycle, especially if there may be upgrades of clang / libomp planned.
> >
>


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu Dec 11 22:15:30 2025
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 11 Dec 2025 22:15:30 +0100
Subject: [R-SIG-Mac] CRAN metadata inconsistencies for macOS binaries
Message-ID: <CABtg=KmJqk1wGFFRdAF-5+2jy2fzkYfkE3EnvJ568nPa1k9_6g@mail.gmail.com>

This has been happening recently for newly published packages. The new
binary is built, the old one is removed, but the metadata is not
updated yet, at least not on the main CRAN server.

? install.packages("proxy", repos = "https://cran.r-project.org")
Installing package into ?/Users/gaborcsardi/Library/R/arm64/4.5/library?
(as ?lib? is unspecified)
trying URL 'https://cran.r-project.org/bin/macosx/big-sur-arm64/contrib/4.5/proxy_0.4-27.tgz'
Error in download.file(urls, destfiles, "libcurl", mode = "wb", ...) :
  cannot open URL
'https://cran.r-project.org/bin/macosx/big-sur-arm64/contrib/4.5/proxy_0.4-27.tgz'
In addition: Warning message:
In download.file(urls, destfiles, "libcurl", mode = "wb", ...) :
  cannot open URL
'https://cran.r-project.org/bin/macosx/big-sur-arm64/contrib/4.5/proxy_0.4-27.tgz':
HTTP status was '404 Not Found'
Warning in download.packages(pkgs, destdir = tmpd, available = available,  :
  download of package ?proxy? failed


From @|mon@urb@nek @end|ng |rom R-project@org  Fri Dec 12 03:16:10 2025
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Fri, 12 Dec 2025 15:16:10 +1300
Subject: [R-SIG-Mac] CRAN metadata inconsistencies for macOS binaries
In-Reply-To: <CABtg=KmJqk1wGFFRdAF-5+2jy2fzkYfkE3EnvJ568nPa1k9_6g@mail.gmail.com>
References: <CABtg=KmJqk1wGFFRdAF-5+2jy2fzkYfkE3EnvJ568nPa1k9_6g@mail.gmail.com>
Message-ID: <C67380D5-5DBD-4A8A-9A7A-01886A9370C4@R-project.org>

G?bor,

if the update is big enough then it is possible that the packages are synced before the index due to the time it takes to transfer all the content. If you have issues, please use the master server, i.e.,

install.packages("proxy", repos="https://mac.r-project.org")

since that one is guaranteed to be consistent: it is populated by first copying all new packages from the build machines and only then the index is updated and only after that the old versions are deleted. You can check if a mirror may be inconsistent by checking for the existence of the "00_COPYING?" file in the repository - that one is copied before the first package and is removed when the index is synced.

Cheers,
Simon


> On 12 Dec 2025, at 10:15, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> 
> This has been happening recently for newly published packages. The new
> binary is built, the old one is removed, but the metadata is not
> updated yet, at least not on the main CRAN server.
> 
> ? install.packages("proxy", repos = "https://cran.r-project.org")
> Installing package into ?/Users/gaborcsardi/Library/R/arm64/4.5/library?
> (as ?lib? is unspecified)
> trying URL 'https://cran.r-project.org/bin/macosx/big-sur-arm64/contrib/4.5/proxy_0.4-27.tgz'
> Error in download.file(urls, destfiles, "libcurl", mode = "wb", ...) :
>  cannot open URL
> 'https://cran.r-project.org/bin/macosx/big-sur-arm64/contrib/4.5/proxy_0.4-27.tgz'
> In addition: Warning message:
> In download.file(urls, destfiles, "libcurl", mode = "wb", ...) :
>  cannot open URL
> 'https://cran.r-project.org/bin/macosx/big-sur-arm64/contrib/4.5/proxy_0.4-27.tgz':
> HTTP status was '404 Not Found'
> Warning in download.packages(pkgs, destdir = tmpd, available = available,  :
>  download of package ?proxy? failed
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From @|mon@urb@nek @end|ng |rom R-project@org  Fri Dec 12 04:20:13 2025
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Fri, 12 Dec 2025 16:20:13 +1300
Subject: [R-SIG-Mac] Announcement: R-devel "sonoma-arm64" Mac builds
Message-ID: <119B1E53-F3A1-4221-92FD-BBF7E13705CD@R-project.org>

This email is mostly of interest to those that build Mac binaries or want to maintain binary compatibility with CRAN. Also if you are on an Apple Silicon Mac (M1,M2,?) and your macOS is *older* than macOS 14, please read the last paragraph at the bottom.

Our current Mac R release and package builds are targeting macOS 11 (Big Sur) for both Intel and arm64 to offer as wide coverage of users as possible. Unfortunately, Apple has removed hardware support for most Intel Macs from recent macOS versions which means that majority of Intel Mac users cannot upgrade their OS - which is reflected in our estimated macOS version user share and therefore we cannot change the target for x86_64 binaries without abandoning a large fraction of our users.

However, all arm64 (Apple Silicon) Mac hardware is supported by latest macOS versions so there is no practical obstacle for Apple Silicon users to upgrade their macOS. Therefore we are considering moving the minimum target for CRAN R binaries and packages to macOS 14 (Sonoma), because it allows us and packages to leverage several new technologies and tools. To that effect R-devel arm64 builds have been switched to a "sonoma-arm64" build target, with the corresponding repository URL of /bin/macosx/sonoma-arm64/contrib/4.6 (output of contrib.url("", type="binary") in those builds). The binaries will be built with the following setup/settings:

Host OS: macOS 15.7.1 (Sequoia)
Toolchain: Xcode/CLT 26.0, GNU Fortran 14.2 (from CRAN)
SDKROOT=/Library/Developer/CommandLineTools/SDKs/MacOSX14.4.sdk
MACOSX_DEPLOYMENT_TARGET=14.0

Accordingly, the recipes binaries are built using the same settings and are available in following repository:

https://mac.r-project.org/bin/darwin23/arm64/

Corresponding nightly R binaries are available as usual at

https://mac.r-project.org/sonoma/last-success/

The goal is to remove the existing big-sur-arm64 R-devel binaries in favor of the sonoma-arm64 R-devel build. Since we are still far away from the R-devel release, all this is considered experimental and may change in the future (possibly Fortran upgrade is in the cards), but given that this is not a minor change, I want to give others the opportunity to test the new setup and comment as appropriate. I would also like to hear from any Apple Silicon users that are unable to upgrade to macOS 14 or higher for whatever reason (corporate system management etc.).

Thanks,
Simon


From @|mon@urb@nek @end|ng |rom R-project@org  Fri Dec 12 04:25:13 2025
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Fri, 12 Dec 2025 16:25:13 +1300
Subject: [R-SIG-Mac] MacOS binaries for R-4.6
In-Reply-To: <CABFfbXtbpH5q3wFMkZ9OipZZVYF7bwZwaHeXPjk58rmrX_0gsw@mail.gmail.com>
References: <CABFfbXvM9BUvz+hOUxOUwO+e5iHmsoKFRjg9BdJYsSNQWCaH+A@mail.gmail.com>
 <7BD2A703-B85D-4982-B3DD-795D4AC9BF23@R-project.org>
 <CABFfbXtbpH5q3wFMkZ9OipZZVYF7bwZwaHeXPjk58rmrX_0gsw@mail.gmail.com>
Message-ID: <0B94956C-224A-41C9-95B4-F8FBB6E8B3B6@R-project.org>

Jeroen,

see the last announcement of the sonoma build which I think should answer most questions - one more detail below.


> On 12 Dec 2025, at 08:26, Jeroen Ooms <jeroenooms at gmail.com> wrote:
> 
> Hello,
> 
> I was wondering if there is an update to what will be the SDKROOT and
> MACOSX_DEPLOYMENT_TARGET for R-4.6-arm? This way we can match the
> settings in R-universe and bioconductor.
> 
> I see binary packages are now uploaded to a new path:
> https://cran.r-project.org/bin/macosx/sonoma-arm64/contrib/4.6/. Is
> this likely to be the final decision for R-4.6?
> 
> Also It would be interesting to know which version of libomp.dylib
> will be included with R-macos 4.6 :)
> 

LLVM 19.1.5 to match current Xcode 26.x, i.e. https://mac.r-project.org/openmp/openmp-19.1.5-darwin20-Release.tar.gz

FWIW the MacBuilder is currently offline for OS upgrade and will be setup to match the new sonoma VM builds.

Cheers,
Simon


From c@@rd|@g@bor @end|ng |rom gm@||@com  Fri Dec 12 08:50:57 2025
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Fri, 12 Dec 2025 08:50:57 +0100
Subject: [R-SIG-Mac] CRAN metadata inconsistencies for macOS binaries
In-Reply-To: <C67380D5-5DBD-4A8A-9A7A-01886A9370C4@R-project.org>
References: <CABtg=KmJqk1wGFFRdAF-5+2jy2fzkYfkE3EnvJ568nPa1k9_6g@mail.gmail.com>
 <C67380D5-5DBD-4A8A-9A7A-01886A9370C4@R-project.org>
Message-ID: <CABtg=KmLisJ3QJ0mC=-zU6z0eXTpCMjWsaP8cwKkgSDeKT0H4A@mail.gmail.com>

Are you fine with using the mac.r-project.org server as a default
mirror on macOS? E.g. in RStudio, on GitHub Actions, etc? That's a lot
of traffic.

mac.r-project.org is also not ideally located (i.e. much slower) for
most users, especially compared to the CDN at cloud.r-project.org.

Do you think it would be possible to keep the old binary packages
around for a day or so? That would not only help with the sync issue,
but also with potentially outdated metadata. AFAIR this is what
Debian/Ubuntu repositories do.

Thanks,
Gabor

On Fri, Dec 12, 2025 at 3:16?AM Simon Urbanek
<simon.urbanek at r-project.org> wrote:
>
> G?bor,
>
> if the update is big enough then it is possible that the packages are synced before the index due to the time it takes to transfer all the content. If you have issues, please use the master server, i.e.,
>
> install.packages("proxy", repos="https://mac.r-project.org")
>
> since that one is guaranteed to be consistent: it is populated by first copying all new packages from the build machines and only then the index is updated and only after that the old versions are deleted. You can check if a mirror may be inconsistent by checking for the existence of the "00_COPYING?" file in the repository - that one is copied before the first package and is removed when the index is synced.
>
> Cheers,
> Simon
>
>
> > On 12 Dec 2025, at 10:15, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> >
> > This has been happening recently for newly published packages. The new
> > binary is built, the old one is removed, but the metadata is not
> > updated yet, at least not on the main CRAN server.
> >
> > ? install.packages("proxy", repos = "https://cran.r-project.org")
> > Installing package into ?/Users/gaborcsardi/Library/R/arm64/4.5/library?
> > (as ?lib? is unspecified)
> > trying URL 'https://cran.r-project.org/bin/macosx/big-sur-arm64/contrib/4.5/proxy_0.4-27.tgz'
> > Error in download.file(urls, destfiles, "libcurl", mode = "wb", ...) :
> >  cannot open URL
> > 'https://cran.r-project.org/bin/macosx/big-sur-arm64/contrib/4.5/proxy_0.4-27.tgz'
> > In addition: Warning message:
> > In download.file(urls, destfiles, "libcurl", mode = "wb", ...) :
> >  cannot open URL
> > 'https://cran.r-project.org/bin/macosx/big-sur-arm64/contrib/4.5/proxy_0.4-27.tgz':
> > HTTP status was '404 Not Found'
> > Warning in download.packages(pkgs, destdir = tmpd, available = available,  :
> >  download of package ?proxy? failed
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac at r-project.org
> > https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> >
>


From @|mon@urb@nek @end|ng |rom R-project@org  Fri Dec 12 09:22:53 2025
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Fri, 12 Dec 2025 21:22:53 +1300
Subject: [R-SIG-Mac] CRAN metadata inconsistencies for macOS binaries
In-Reply-To: <CABtg=KmLisJ3QJ0mC=-zU6z0eXTpCMjWsaP8cwKkgSDeKT0H4A@mail.gmail.com>
References: <CABtg=KmJqk1wGFFRdAF-5+2jy2fzkYfkE3EnvJ568nPa1k9_6g@mail.gmail.com>
 <C67380D5-5DBD-4A8A-9A7A-01886A9370C4@R-project.org>
 <CABtg=KmLisJ3QJ0mC=-zU6z0eXTpCMjWsaP8cwKkgSDeKT0H4A@mail.gmail.com>
Message-ID: <757E5505-F1D0-4A9C-81E5-4E5DDDA4FB1F@R-project.org>


G?bor,

it is not a mirror, just the main source of Mac binaries, so what I was saying is that if you have a temporary problem with your regular mirror, then you can use it to circumvent that problem. It is ideally located for US users (it is in a Dallas data center), but clearly will be slower from other places - but it is certainly not intended as a CDN.

Anything beyond that source is not under my control, I don't actually know how the mirrors get populated, so that would be probably a discussion at CRAN level. I know that sources are handled by temporary symlinks to the archive for a short time so old versions work temporarily, but since binaries don't have an archive we don't have a provision for that. I guess it would be possible to not delete the old packages during the PACKAGES sync but keep them around longer if some additional sweep or delay was implemented.

Historically, Mac binaries have been built incrementally, so each sync is typically small so it is very unlikely for the problem to occur. My only guess is that with the R-devel re-builds they got larger than usual which may have possibly led to issue. The other possibility could be that some network issues could abort a sync which then only gets retried later and the repository is inconsistent in the meantime - but hat's beyond my control. All syncs are anonymous pulls so I don't have the logs so can't really tell.

Cheers,
Simon


> On 12/12/2025, at 8:50 PM, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> 
> Are you fine with using the mac.r-project.org server as a default mirror on macOS? E.g. in RStudio, on GitHub Actions, etc? That's a lot of traffic.
> 
> mac.r-project.org is also not ideally located (i.e. much slower) for most users, especially compared to the CDN at cloud.r-project.org.
> 
> Do you think it would be possible to keep the old binary packages around for a day or so? That would not only help with the sync issue, but also with potentially outdated metadata. AFAIR this is what Debian/Ubuntu repositories do.
> 
> Thanks,
> Gabor
> 
> On Fri, Dec 12, 2025 at 3:16?AM Simon Urbanek
> <simon.urbanek at r-project.org> wrote:
>> 
>> G?bor,
>> 
>> if the update is big enough then it is possible that the packages are synced before the index due to the time it takes to transfer all the content. If you have issues, please use the master server, i.e.,
>> 
>> install.packages("proxy", repos="https://mac.r-project.org")
>> 
>> since that one is guaranteed to be consistent: it is populated by first copying all new packages from the build machines and only then the index is updated and only after that the old versions are deleted. You can check if a mirror may be inconsistent by checking for the existence of the "00_COPYING?" file in the repository - that one is copied before the first package and is removed when the index is synced.
>> 
>> Cheers,
>> Simon
>> 
>> 
>>> On 12 Dec 2025, at 10:15, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>>> 
>>> This has been happening recently for newly published packages. The new
>>> binary is built, the old one is removed, but the metadata is not
>>> updated yet, at least not on the main CRAN server.
>>> 
>>> ? install.packages("proxy", repos = "https://cran.r-project.org")
>>> Installing package into ?/Users/gaborcsardi/Library/R/arm64/4.5/library?
>>> (as ?lib? is unspecified)
>>> trying URL 'https://cran.r-project.org/bin/macosx/big-sur-arm64/contrib/4.5/proxy_0.4-27.tgz'
>>> Error in download.file(urls, destfiles, "libcurl", mode = "wb", ...) :
>>> cannot open URL
>>> 'https://cran.r-project.org/bin/macosx/big-sur-arm64/contrib/4.5/proxy_0.4-27.tgz'
>>> In addition: Warning message:
>>> In download.file(urls, destfiles, "libcurl", mode = "wb", ...) :
>>> cannot open URL
>>> 'https://cran.r-project.org/bin/macosx/big-sur-arm64/contrib/4.5/proxy_0.4-27.tgz':
>>> HTTP status was '404 Not Found'
>>> Warning in download.packages(pkgs, destdir = tmpd, available = available,  :
>>> download of package ?proxy? failed
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>> 
>> 
> 


From jeroenoom@ @end|ng |rom gm@||@com  Sat Dec 13 23:24:00 2025
From: jeroenoom@ @end|ng |rom gm@||@com (Jeroen Ooms)
Date: Sat, 13 Dec 2025 22:24:00 +0000
Subject: [R-SIG-Mac] Announcement: R-devel "sonoma-arm64" Mac builds
In-Reply-To: <119B1E53-F3A1-4221-92FD-BBF7E13705CD@R-project.org>
References: <119B1E53-F3A1-4221-92FD-BBF7E13705CD@R-project.org>
Message-ID: <CABFfbXuGCZzRsHEnPkFmk0=BupkbfcFVz3pVbQG3mZ+sqcYFyg@mail.gmail.com>

On Fri, Dec 12, 2025 at 3:20?AM Simon Urbanek
<simon.urbanek at r-project.org> wrote:

> The goal is to remove the existing big-sur-arm64 R-devel binaries in favor of the sonoma-arm64 R-devel build. Since we are still far away from the R-devel release, all this is considered experimental and may change in the future (possibly Fortran upgrade is in the cards), but given that this is not a minor change, I want to give others the opportunity to test the new setup and comment as appropriate.

Thanks. Some quick observations:

The x86_64 build of r-devel on https://mac.r-project.org/ is almost 2
months old?

On arm64, using the latest R-devel-arm64.pkg on a machine with macOS
15 and Xcode_16.2, I get the following error for all packages with
compiled C code:

  error: invalid value 'gnu23' in '-std=gnu23'
  note: use 'c2x' for 'Working Draft for ISO C2x' standard
  note: use 'gnu2x' for 'Working Draft for ISO C2x with GNU extensions' standard


From @|mon@urb@nek @end|ng |rom R-project@org  Sat Dec 13 23:39:16 2025
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sun, 14 Dec 2025 11:39:16 +1300
Subject: [R-SIG-Mac] Announcement: R-devel "sonoma-arm64" Mac builds
In-Reply-To: <CABFfbXuGCZzRsHEnPkFmk0=BupkbfcFVz3pVbQG3mZ+sqcYFyg@mail.gmail.com>
References: <119B1E53-F3A1-4221-92FD-BBF7E13705CD@R-project.org>
 <CABFfbXuGCZzRsHEnPkFmk0=BupkbfcFVz3pVbQG3mZ+sqcYFyg@mail.gmail.com>
Message-ID: <9FC292A5-1C0D-4C11-B072-FD6CE8E6538F@R-project.org>



> On 14/12/2025, at 11:24 AM, Jeroen Ooms <jeroenooms at gmail.com> wrote:
> 
> On Fri, Dec 12, 2025 at 3:20?AM Simon Urbanek
> <simon.urbanek at r-project.org> wrote:
> 
>> The goal is to remove the existing big-sur-arm64 R-devel binaries in favor of the sonoma-arm64 R-devel build. Since we are still far away from the R-devel release, all this is considered experimental and may change in the future (possibly Fortran upgrade is in the cards), but given that this is not a minor change, I want to give others the opportunity to test the new setup and comment as appropriate.
> 
> Thanks. Some quick observations:
> 
> The x86_64 build of r-devel on https://mac.r-project.org/ is almost 2 months old?
> 

Should be fixed now.


> On arm64, using the latest R-devel-arm64.pkg on a machine with macOS 15 and Xcode_16.2, I get the following error for all packages with compiled C code:
> 
>  error: invalid value 'gnu23' in '-std=gnu23'
>  note: use 'c2x' for 'Working Draft for ISO C2x' standard
>  note: use 'gnu2x' for 'Working Draft for ISO C2x with GNU extensions' standard
> 


That is expected, you'll need at least Xcode 16.3 since 16.2 is LLVM 17 while 16.3 is LLVM 19 which, as has been discussed at length, was a big breaking jump. As noted, what is actually used is Xcode 26.x so that would be recommended (albeit not required).

It does raise an interesting point, though: macOS 15 is not an issue since you can install all the way to Xcode 26.3 without problems, but macOS 14 (which is our designed target) only runs Xcode 16.2. However, the whole point of moving the target forward was that we upgrade from Xcode 16.2 since that's what we used for the Big Sur build, so sticking with it would defeat the whole purpose. So, would anyone be unhappy if we simply declared macOS 14 as the run-time target, but development needs macOS 15 for the compiler support? It's not ideal, but the only other way would be to deliberately disable C23 support - it's doable, though.

Cheers,
Simon


From jeroenoom@ @end|ng |rom gm@||@com  Sun Dec 14 00:03:09 2025
From: jeroenoom@ @end|ng |rom gm@||@com (Jeroen Ooms)
Date: Sat, 13 Dec 2025 23:03:09 +0000
Subject: [R-SIG-Mac] Announcement: R-devel "sonoma-arm64" Mac builds
In-Reply-To: <9FC292A5-1C0D-4C11-B072-FD6CE8E6538F@R-project.org>
References: <119B1E53-F3A1-4221-92FD-BBF7E13705CD@R-project.org>
 <CABFfbXuGCZzRsHEnPkFmk0=BupkbfcFVz3pVbQG3mZ+sqcYFyg@mail.gmail.com>
 <9FC292A5-1C0D-4C11-B072-FD6CE8E6538F@R-project.org>
Message-ID: <CABFfbXufmqLTi-yuQZjNdwM-ZDbbEg_zApnZSAdDnmA0WnzTzg@mail.gmail.com>

On Sat, Dec 13, 2025 at 10:39?PM Simon Urbanek
<simon.urbanek at r-project.org> wrote:
>
>
>
> > On 14/12/2025, at 11:24 AM, Jeroen Ooms <jeroenooms at gmail.com> wrote:
> >
> > On Fri, Dec 12, 2025 at 3:20?AM Simon Urbanek
> > <simon.urbanek at r-project.org> wrote:
> >
> >> The goal is to remove the existing big-sur-arm64 R-devel binaries in favor of the sonoma-arm64 R-devel build. Since we are still far away from the R-devel release, all this is considered experimental and may change in the future (possibly Fortran upgrade is in the cards), but given that this is not a minor change, I want to give others the opportunity to test the new setup and comment as appropriate.
> >
> > Thanks. Some quick observations:
> >
> > The x86_64 build of r-devel on https://mac.r-project.org/ is almost 2 months old?
> >
>
> Should be fixed now.
>
>
> > On arm64, using the latest R-devel-arm64.pkg on a machine with macOS 15 and Xcode_16.2, I get the following error for all packages with compiled C code:
> >
> >  error: invalid value 'gnu23' in '-std=gnu23'
> >  note: use 'c2x' for 'Working Draft for ISO C2x' standard
> >  note: use 'gnu2x' for 'Working Draft for ISO C2x with GNU extensions' standard
> >
>
>
> That is expected, you'll need at least Xcode 16.3 since 16.2 is LLVM 17 while 16.3 is LLVM 19 which, as has been discussed at length, was a big breaking jump. As noted, what is actually used is Xcode 26.x so that would be recommended (albeit not required).

The reason we were using 16.2 is that newer xcode versions still do
not seem to work with the libomp.dylib included with base R. Has
libomp.dylib been updated yet? According to otool it is the same
version as before?

  otool -L lib/libomp.dylib
     /Library/Frameworks/R.framework/Versions/4.6/Resources/lib/libomp.dylib
(compatibility version 5.0.0, current version 5.0.0)
     /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current
version 1292.100.5)


From @|mon@urb@nek @end|ng |rom R-project@org  Sun Dec 14 01:29:14 2025
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sun, 14 Dec 2025 13:29:14 +1300
Subject: [R-SIG-Mac] Announcement: R-devel "sonoma-arm64" Mac builds
In-Reply-To: <CABFfbXufmqLTi-yuQZjNdwM-ZDbbEg_zApnZSAdDnmA0WnzTzg@mail.gmail.com>
References: <119B1E53-F3A1-4221-92FD-BBF7E13705CD@R-project.org>
 <CABFfbXuGCZzRsHEnPkFmk0=BupkbfcFVz3pVbQG3mZ+sqcYFyg@mail.gmail.com>
 <9FC292A5-1C0D-4C11-B072-FD6CE8E6538F@R-project.org>
 <CABFfbXufmqLTi-yuQZjNdwM-ZDbbEg_zApnZSAdDnmA0WnzTzg@mail.gmail.com>
Message-ID: <4F1BD255-0659-4E27-A68B-C0189BF240A7@R-project.org>



> On 14/12/2025, at 12:03 PM, Jeroen Ooms <jeroenooms at gmail.com> wrote:
> 
> On Sat, Dec 13, 2025 at 10:39?PM Simon Urbanek
> <simon.urbanek at r-project.org> wrote:
>> 
>> 
>> 
>>> On 14/12/2025, at 11:24 AM, Jeroen Ooms <jeroenooms at gmail.com> wrote:
>>> 
>>> On Fri, Dec 12, 2025 at 3:20?AM Simon Urbanek
>>> <simon.urbanek at r-project.org> wrote:
>>> 
>>>> The goal is to remove the existing big-sur-arm64 R-devel binaries in favor of the sonoma-arm64 R-devel build. Since we are still far away from the R-devel release, all this is considered experimental and may change in the future (possibly Fortran upgrade is in the cards), but given that this is not a minor change, I want to give others the opportunity to test the new setup and comment as appropriate.
>>> 
>>> Thanks. Some quick observations:
>>> 
>>> The x86_64 build of r-devel on https://mac.r-project.org/ is almost 2 months old?
>>> 
>> 
>> Should be fixed now.
>> 
>> 
>>> On arm64, using the latest R-devel-arm64.pkg on a machine with macOS 15 and Xcode_16.2, I get the following error for all packages with compiled C code:
>>> 
>>> error: invalid value 'gnu23' in '-std=gnu23'
>>> note: use 'c2x' for 'Working Draft for ISO C2x' standard
>>> note: use 'gnu2x' for 'Working Draft for ISO C2x with GNU extensions' standard
>>> 
>> 
>> 
>> That is expected, you'll need at least Xcode 16.3 since 16.2 is LLVM 17 while 16.3 is LLVM 19 which, as has been discussed at length, was a big breaking jump. As noted, what is actually used is Xcode 26.x so that would be recommended (albeit not required).
> 
> The reason we were using 16.2 is that newer xcode versions still do
> not seem to work with the libomp.dylib included with base R. Has
> libomp.dylib been updated yet?


Yes, it matches the Xcode - as noted:


> On 12/12/2025, at 4:25 PM, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
>> On 12 Dec 2025, at 08:26, Jeroen Ooms <jeroenooms at gmail.com> wrote:
>> [...]
>> Also It would be interesting to know which version of libomp.dylib will be included with R-macos 4.6 :)
>> 
> 
> LLVM 19.1.5 to match current Xcode 26.x, i.e. https://mac.r-project.org/openmp/openmp-19.1.5-darwin20-Release.tar.gz
> 



Again, that was the point of the tool upgrade :).



> According to otool it is the same version as before?
> 


otool shows the API version as declared by Intel OpenMP, but the LLVM team has never updated it despite breaking changes, unfortunately :/. It's really annoying since it means it is very hard to determine which LLVM it came from - even internally all of the them declare the same version 5.0.20140926 and API version 5.0.201611 - both being almost 10 years out of date.

Cheers,
Simon



>  otool -L lib/libomp.dylib
>     /Library/Frameworks/R.framework/Versions/4.6/Resources/lib/libomp.dylib
> (compatibility version 5.0.0, current version 5.0.0)
>     /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current
> version 1292.100.5)
> 


