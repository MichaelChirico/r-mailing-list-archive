From @|mon@urb@nek @end|ng |rom R-project@org  Mon Sep  1 01:58:28 2025
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Mon, 1 Sep 2025 11:58:28 +1200
Subject: [R-SIG-Mac] Which version of clang does CRAN's R build use?
In-Reply-To: <b91c8b60-8cc9-4661-8855-e351dff06cd7@gmail.com>
References: <e4aed540-30b3-4564-b241-3ba69254c6ba@gmail.com>
 <b91c8b60-8cc9-4661-8855-e351dff06cd7@gmail.com>
Message-ID: <93AADD1B-3F8D-42C2-8B8A-45A8C5A4B164@R-project.org>

Duncan,


> On 1/09/2025, at 08:25, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> On 2025-08-31 4:11 p.m., Duncan Murdoch wrote:
>> The instructions on https://mac.r-project.org/tools/ say to install
>> tools using `sudo xcode-select --install`.  Currently for me that installed
>>    Apple clang version 17.0.0 (clang-1700.0.13.5)
>> Is that the version of clang that is being used in the CRAN builds?  If
>> not, is there an advantage to matching what was used?
> 
> Just found on the download page for R 4.5.1 "This release uses Xcode 16.2(arm64)/14.2(x86_64) and GNU Fortran 14.2."  So that answers my first question, but leaves the second one.  Is it worth installing that version?
> 

It depends - if you want stability then, yes, since there were major breaking changes in Xcode 16.3 (Apple clang 1700). Xcode 16.2 was the best "stable" release before that. Similarly, if you want produce binaries for others then you want it for the same reason. However, if you want to test the cutting edge and test support for new standards then using the latest is ok. The fallout isn?t huge, it depends on what you will try to build.

Cheers,
Simon


From pd@|gd @end|ng |rom gm@||@com  Mon Sep  1 12:05:05 2025
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Mon, 1 Sep 2025 12:05:05 +0200
Subject: [R-SIG-Mac] Which version of clang does CRAN's R build use?
In-Reply-To: <93AADD1B-3F8D-42C2-8B8A-45A8C5A4B164@R-project.org>
References: <e4aed540-30b3-4564-b241-3ba69254c6ba@gmail.com>
 <b91c8b60-8cc9-4661-8855-e351dff06cd7@gmail.com>
 <93AADD1B-3F8D-42C2-8B8A-45A8C5A4B164@R-project.org>
Message-ID: <8E59E38C-B98B-4583-A92B-F0852A19A301@gmail.com>

For whatever it is worth, the nightly source tarballs are built with the latest xcode CLT (because I fell into Apple's 16.3 trap and didn't bother with downgrading to 16.2). 

Of course the resulting binaries don't get published anywhere, but they seem to pass all tests.

-pd

> On 1 Sep 2025, at 01:58 , Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> Duncan,
> 
> 
>> On 1/09/2025, at 08:25, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>> 
>> On 2025-08-31 4:11 p.m., Duncan Murdoch wrote:
>>> The instructions on https://mac.r-project.org/tools/ say to install
>>> tools using `sudo xcode-select --install`.  Currently for me that installed
>>>   Apple clang version 17.0.0 (clang-1700.0.13.5)
>>> Is that the version of clang that is being used in the CRAN builds?  If
>>> not, is there an advantage to matching what was used?
>> 
>> Just found on the download page for R 4.5.1 "This release uses Xcode 16.2(arm64)/14.2(x86_64) and GNU Fortran 14.2."  So that answers my first question, but leaves the second one.  Is it worth installing that version?
>> 
> 
> It depends - if you want stability then, yes, since there were major breaking changes in Xcode 16.3 (Apple clang 1700). Xcode 16.2 was the best "stable" release before that. Similarly, if you want produce binaries for others then you want it for the same reason. However, if you want to test the cutting edge and test support for new standards then using the latest is ok. The fallout isn?t huge, it depends on what you will try to build.
> 
> Cheers,
> Simon
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From pd@|gd @end|ng |rom gm@||@com  Mon Sep  1 15:23:36 2025
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Mon, 1 Sep 2025 15:23:36 +0200
Subject: [R-SIG-Mac] 'cmath' file not found
In-Reply-To: <56BA8EF8-1394-4460-B87D-1800A3A8FB2C@nhm.uio.no>
References: <56BA8EF8-1394-4460-B87D-1800A3A8FB2C@nhm.uio.no>
Message-ID: <9968D0B6-3CCE-4BAB-9D3F-C5DF131B096A@gmail.com>

Hmm, you seem not to be running the very latest xcode CLT, but that is a good thing, because 4.5.1 is built with 16.2 which uses clang 16 like you do.

You seem to have some sort of issue with the include path. You could start by checking that you actually have the cmath include file. I have

/Library/Developer/CommandLineTools/SDKs/MacOSX15.5.sdk/usr/include/c++/v1/cmath

so you should have the same thing with 15.2. 

You might also verify that you are actually running the C++ compiler and not the C compiler. And check that you can compile a simple C++ program.

-pd

> On 29 Aug 2025, at 20:09 , Lee Hsiang Liow <l.h.liow at nhm.uio.no> wrote:
> 
> New to the list.
> 
> Got a new laptop, running OS 15.5 Sequoia.
> R version 4.5.1 (2025-06-13) -- "Great Square Root"
> Have new Xcode, new gofortran
> 
> Trying to install an R package that runs C++, have the R dependencies, the error in installation is:
> 
> ** using staged installation
> ** libs
> using C++ compiler: ?Apple clang version 16.0.0 (clang-1600.0.26.6)?
> using SDK: ?MacOSX15.2.sdk?
> [??. Removing some non relevant info??]
> 
> fatal error: 'cmath' file not found
>   37 | #include <cmath>
>      |          ^~~~~~~
> 1 error generated.
> 
> Can any one advise? Thank you!
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From jeroenoom@ @end|ng |rom gm@||@com  Mon Sep  1 19:31:51 2025
From: jeroenoom@ @end|ng |rom gm@||@com (Jeroen Ooms)
Date: Mon, 1 Sep 2025 19:31:51 +0200
Subject: [R-SIG-Mac] 'cmath' file not found
In-Reply-To: <56BA8EF8-1394-4460-B87D-1800A3A8FB2C@nhm.uio.no>
References: <56BA8EF8-1394-4460-B87D-1800A3A8FB2C@nhm.uio.no>
Message-ID: <CABFfbXvvrRSbtd8+Qe2iDOTr3k0V+Z-Tj_sV0RYZiufOSd_f0w@mail.gmail.com>

Perhaps same as
https://stat.ethz.ch/pipermail/r-sig-mac/2024-September/015042.html

Try this:  sudo rm -rf /Library/Developer/CommandLineTools/usr/include/c++





On Fri, Aug 29, 2025 at 8:09?PM Lee Hsiang Liow <l.h.liow at nhm.uio.no> wrote:
>
> New to the list.
>
> Got a new laptop, running OS 15.5 Sequoia.
> R version 4.5.1 (2025-06-13) -- "Great Square Root"
> Have new Xcode, new gofortran
>
> Trying to install an R package that runs C++, have the R dependencies, the error in installation is:
>
> ** using staged installation
> ** libs
> using C++ compiler: ?Apple clang version 16.0.0 (clang-1600.0.26.6)?
> using SDK: ?MacOSX15.2.sdk?
> [??. Removing some non relevant info??]
>
> fatal error: 'cmath' file not found
>    37 | #include <cmath>
>       |          ^~~~~~~
> 1 error generated.
>
> Can any one advise? Thank you!
>
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


