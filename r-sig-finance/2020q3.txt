From bog@@o@chr|@to|er @end|ng |rom gm@||@com  Fri Jul  3 00:44:11 2020
From: bog@@o@chr|@to|er @end|ng |rom gm@||@com (Christofer Bogaso)
Date: Fri, 3 Jul 2020 04:14:11 +0530
Subject: [R-SIG-Finance] Applicable discount rate for coupon paying bond
Message-ID: <CA+dpOJmgnax_UJJqWY1HyshvJQSEBSsNOROKvUOuNNjwD9eoiA@mail.gmail.com>

Hi,

I have a small question on pricing a coupon paying bond.

Let say, I have a coupon paying bond issued by a top rated Govt bank
in UK. Coupon is payable semi-annually. To price the bond what
discount rate should be applied for each future coupon and principal
payment?

Should I use term structure of LIBOR? or LIBID? Or average of both? Or
something else?

Any pointer will be appreciated.

Thanks,


From @|ocheme@ @end|ng |rom gm@||@com  Fri Jul  3 17:55:28 2020
From: @|ocheme@ @end|ng |rom gm@||@com (Andrew Lochemes)
Date: Fri, 3 Jul 2020 11:55:28 -0400
Subject: [R-SIG-Finance] R-SIG-Finance Digest, Vol 194, Issue 1
In-Reply-To: <mailman.14949.3.1593770402.24982.r-sig-finance@r-project.org>
References: <mailman.14949.3.1593770402.24982.r-sig-finance@r-project.org>
Message-ID: <CAGHMogUAByWV9GnnizdenNGZjAZrK=EUo=sDZ2H8aJYdu0UaFg@mail.gmail.com>

Hi Christofer!

If you?re trying to price that specific bond, you could use different
items, but here are a few I use (work in finance, submitting application
for CFA charter this month)

1. Trying to see how it ?should be? priced versus the market?s price
- use the yield curve that it is priced in (L+550bps) + the spread across
each payment date.

2. How it?s priced relative to similar securities
- I would use an OAS spread over a risk free Rate of the same (or similar)
maturity
- use can use interpolation to create synthetic yield curves based on a
longer and shorter one.



On Friday, July 3, 2020, <r-sig-finance-request at r-project.org> wrote:

> Send R-SIG-Finance mailing list submissions to
>         r-sig-finance at r-project.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> or, via email, send a message with subject or body 'help' to
>         r-sig-finance-request at r-project.org
>
> You can reach the person managing the list at
>         r-sig-finance-owner at r-project.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of R-SIG-Finance digest..."
>
>
> Today's Topics:
>
>    1. Applicable discount rate for coupon paying bond
>       (Christofer Bogaso)
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Fri, 3 Jul 2020 04:14:11 +0530
> From: Christofer Bogaso <bogaso.christofer at gmail.com>
> To: r-sig-finance at r-project.org
> Subject: [R-SIG-Finance] Applicable discount rate for coupon paying
>         bond
> Message-ID:
>         <CA+dpOJmgnax_UJJqWY1HyshvJQSEBSsNOROKvUOuNN
> jwD9eoiA at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Hi,
>
> I have a small question on pricing a coupon paying bond.
>
> Let say, I have a coupon paying bond issued by a top rated Govt bank
> in UK. Coupon is payable semi-annually. To price the bond what
> discount rate should be applied for each future coupon and principal
> payment?
>
> Should I use term structure of LIBOR? or LIBID? Or average of both? Or
> something else?
>
> Any pointer will be appreciated.
>
> Thanks,
>
>
>
>
> ------------------------------
>
> Subject: Digest Footer
>
> _______________________________________________
> R-SIG-Finance mailing list
> R-SIG-Finance at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>
> ------------------------------
>
> End of R-SIG-Finance Digest, Vol 194, Issue 1
> *********************************************
>


-- 

Andrew Lochemes




This message is intended only for the use of the individual or entity to
which it is addressed, and may contain information that is privileged,
confidential and exempt from disclosure under applicable law.  If the
reader of the message is not the intended recipient, or the employee or
agent responsible for delivering the message to the intended recipient, you
are hereby notified that any dissemination, distribution or copying of this
communication is strictly prohibited.  If you have received this
communication in error, please notify the sender and destroy all copies of
the email.

	[[alternative HTML version deleted]]


From @@@e@re|nh@rdu@ @end|ng |rom @tudent@un|@g@ch  Sat Jul  4 11:39:09 2020
From: @@@e@re|nh@rdu@ @end|ng |rom @tudent@un|@g@ch (Reinhardus, Asse)
Date: Sat, 4 Jul 2020 09:39:09 +0000
Subject: [R-SIG-Finance] DCCroll - realGARCH(1,
 1) Estimation problem: Singularity
Message-ID: <GVAP278MB000764B5F641F653000A92FADD6B0@GVAP278MB0007.CHEP278.PROD.OUTLOOK.COM>

Hi,

I am currently trying to do a multivariate forecast using the DCCroll function for a portfolio of 15 stocks (Forecast length should be 400). I tried it two times (reduced the forecast length in the second run): After around 200-260 times the function broke down due to the fact that the "system is computationally singular". I understand that this results from linearly dependent columns , i.e. strongly correlated variables or more variables than observations (I have 1216 observations per stock and 15 stocks. So this should not be the problem, I assume.)
When I checked my return correlationmatrix and my realized volatilities correlation matrix, there were no indications that I face issues such as strong correlation.
Stock Return Correlation Matrix:
[cid:ac918639-6cc7-4a2d-8c0b-e239e374a1ba]
Stock RV Correlation Matrix:
[cid:9e25bd6c-6468-4444-90a2-ac12d38b0319]
Also what seems odd to me is that the forecast can be done  for the first 200-260 days and then it breaks down, as this suggests that the majority of the forecasting process is working.

Further I already forecast the univariate realGARCH time series with the same stocks before. So I know that the first stage of the DCC estimation should work.

What are possible solution strategies that I can follow?

Best,
Asse

This is the code I am using:
Creating the return and rv matrix:

stocks.comp <- list()
for (i in 1:length(ticker_names))
{
  stocks.comp[[i]]<-subset(data_sentivola, data_sentivola[,"ticker"] == paste(ticker_names[i]))
}


stocks.comp <- do.call(cbind, stocks.comp)

stocks.return<-as.data.frame(lapply("return", function(nm)
  stocks.comp[, colnames(stocks.comp) == nm, drop = FALSE])[[1]])
colnames(stocks.return)<-ticker_names
stocks.return<-as.xts(stocks.return, order.by=as.POSIXct(unique(data_sentivola[,"Date"]), format = "%m/%d/%Y"))
stocks.return <- stocks.return["2012-03-5/2016-12-30"]
#realized volatility
stocks.rv<-as.data.frame(lapply("rv", function(nm)
  stocks.comp[, colnames(stocks.comp) == nm, drop = FALSE])[[1]])
colnames(stocks.rv)<-ticker_names
stocks.rv<-as.xts(stocks.rv, order.by=as.POSIXct(unique(data_sentivola[,"Date"]), format = "%m/%d/%Y"))
stocks.rv<-as.xts(as.matrix(stocks.rv), order.by=as.POSIXct(unique(data_sentivola[,"Date"]), format = "%m/%d/%Y"))
stocks.rv<- stocks.rv["2012-03-5/2016-12-30"]
stocks.rv<- sqrt(stocks.rv)

This is a list of external regressors that I feed into the realGARCH spec:
ext_reg <- list(ext_reg1,ext_reg2, ext_reg3, ext_reg4) (only used in the first stage of estimation, hence this should not be a problem as I already did the univariate fitting)

This creates the different specifications that I want to use for the univariate realGARCH in the first stage estimation: data_sentivola is the initial dataset
spec.comp <- list()
for (m in 1:4) {
  for (i in 1:length(ticker_names))
  {
    data_sentivola_INT<-subset(data_sentivola, data_sentivola[,"ticker"] == paste(ticker_names[i]))
    xts_sentivola_ticker<- as.xts(data_sentivola_INT[,c("return","rv")], order.by=as.POSIXct(data_sentivola_INT[,"Date"], format = "%m/%d/%Y"))
    xts_sentivola_ticker <- xts_sentivola_ticker["2012-03-5/2016-12-30"]

    exter_reg <- subset(as.data.frame(ext_reg[[m]][,])
                        ,as.data.frame(ext_reg[[m]][,])[,"ticker"]==paste(ticker_names[i]))

    xts_external_regressors <- exter_reg[,2:ncol(exter_reg)]
    xts_external_regressors <- as.xts(xts_external_regressors,
                                      order.by=as.POSIXct(data_sentivola_INT[,"Date"], format = "%m/%d/%Y"))
    xts_external_regressors <-xts_external_regressors["2012-03-5/2016-12-30"]

    spec.comp[[(m-1)*15 + i]] <- ugarchspec(mean.model = list(armaOrder = c(1,0), include.mean = FALSE),
                             variance.model = list(model = 'realGARCH', garchOrder = c(1,1)
                                                   , external.regressors = xts_external_regressors)
                             , distribution.model = "sstd")
  }
}

This runs the DCCroll:
#run DCC

dccroll.comp <- list()
uspec.n = multispec(spec.comp[1:15])
dccspec.n = dccspec(uspec.n,  dccOrder = c(1,1), model = "DCC", distribution = "mvnorm")
cl = makePSOCKcluster(7)
clusterExport(cl,as.list(unique(c(ls(.GlobalEnv),ls(environment())))),envir=environment())

dccroll.comp[[1]]= dccroll(dccspec.n, data = stocks.return, n.ahead = 1, forecast.length = 285,
        solver = "solnp", refit.every = 1, refit.window = "moving",
        realizedVol = stocks.rv,
        cluster = cl,
        save.fit = TRUE,
        save.wdir = "C:/Users/asser/Documents/Master Thesis/R-Code/FitFolder")
stopCluster(cl)


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20200704/84f7b074/attachment.html>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Outlook-ifggg5na.png
Type: image/png
Size: 24161 bytes
Desc: Outlook-ifggg5na.png
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20200704/84f7b074/attachment.png>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Outlook-0xsugkjx.png
Type: image/png
Size: 23645 bytes
Desc: Outlook-0xsugkjx.png
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20200704/84f7b074/attachment-0001.png>

From percent||101 @end|ng |rom gm@||@com  Sat Jul 25 12:15:07 2020
From: percent||101 @end|ng |rom gm@||@com (=?UTF-8?Q?Pedro_p=C3=A1ramo?=)
Date: Sat, 25 Jul 2020 12:15:07 +0200
Subject: [R-SIG-Finance] Interanual Return
Message-ID: <CAB-TgNuUKhEp2nHhL_jfLPG1eRar2e2sQOGEQwLzXWKm8O4ULw@mail.gmail.com>

Hi all,

I want to calculate interanual (not year to date) variation of a stock, I
am able to obtain year to date with annualReturn, but no way to obtain the
interanual increase. It says me no numerical output.

Can anyone guide me to obtain it.

library(PerformanceAnalytics)
library(dplyr)
library(tibble)
library(lubridate)
library(PerformanceAnalytics)
library(quantmod)
library(ggplot2)
library(png)
library(RCurl)

fecha<-Sys.Date()-365 #with this I obtain one year back beginning
precio<-getSymbols("ACX.MC <http://acx.mc/>",from='fecha')
ret2<- na.omit(CalculateReturns(Cl(ACX.MC <http://acx.mc/>)))
g<-annualReturn(ACX.MC <http://acx.mc/>) #This is year to date
d<-CalculateReturns(Cl(ACX.MCC))
aaa<-getQuote('ACX.MC <http://acx.mc/>',from='fecha')
Lastprice<-aaa[1,2]

lo<-c(diff(log(aaa),250))  #With this I try  to obtain interanual year
variation but error


Hope you can help me

	[[alternative HTML version deleted]]


From d|egoperon|1971 @end|ng |rom gm@||@com  Tue Jul 28 19:40:16 2020
From: d|egoperon|1971 @end|ng |rom gm@||@com (diego peroni)
Date: Tue, 28 Jul 2020 19:40:16 +0200
Subject: [R-SIG-Finance] A Simple Estimation of Bid-Ask Spreads from Daily
 Close, High, and Low Prices
In-Reply-To: <mailman.14952.3.1595757601.4257.r-sig-finance@r-project.org>
References: <mailman.14952.3.1595757601.4257.r-sig-finance@r-project.org>
Message-ID: <981B0E9B-1019-4E2D-BD61-6416A0886D8F@gmail.com>

Hi All,

I?m looking for a function in R to estimate Bid/Ask Spreads of stocks using Daily candlesticks.

Can anyone suggest some implemetations?

Thanks
Diego

From br|@n @end|ng |rom br@verock@com  Tue Jul 28 20:09:03 2020
From: br|@n @end|ng |rom br@verock@com (Brian G. Peterson)
Date: Tue, 28 Jul 2020 13:09:03 -0500
Subject: [R-SIG-Finance] 
 A Simple Estimation of Bid-Ask Spreads from Daily
 Close, High, and Low Prices
In-Reply-To: <981B0E9B-1019-4E2D-BD61-6416A0886D8F@gmail.com>
References: <mailman.14952.3.1595757601.4257.r-sig-finance@r-project.org>
 <981B0E9B-1019-4E2D-BD61-6416A0886D8F@gmail.com>
Message-ID: <de9afd92e632ad1230388fc18e7366687c76d20f.camel@braverock.com>

On Tue, 2020-07-28 at 19:40 +0200, diego peroni wrote:
> I?m looking for a function in R to estimate Bid/Ask Spreads of stocks using Daily candlesticks.
> 
> Can anyone suggest some implemetations?


Diego,

I would like to help you, but what you are asking for is simply impossible.

Daily Range, Volume, and Volatility tells you nothing about the intraday numbers except their upper/lower bounds.

It certainly doesn't tell you anything about intraday spreads.

You can certainly *guess* that less liquid instruments have larger effective spreads, since this is usually the case, but you can't know *what* the spread is from daily data.

Brian


	[[alternative HTML version deleted]]


From hpr@mo@4 @end|ng |rom gm@||@com  Tue Jul 28 20:12:06 2020
From: hpr@mo@4 @end|ng |rom gm@||@com (Henrique Ramos)
Date: Tue, 28 Jul 2020 15:12:06 -0300
Subject: [R-SIG-Finance] 
 A Simple Estimation of Bid-Ask Spreads from Daily
 Close, High, and Low Prices
In-Reply-To: <981B0E9B-1019-4E2D-BD61-6416A0886D8F@gmail.com>
References: <mailman.14952.3.1595757601.4257.r-sig-finance@r-project.org>
 <981B0E9B-1019-4E2D-BD61-6416A0886D8F@gmail.com>
Message-ID: <CABHS13eFBGBLDnTrkEMH+sF4E8q6TF7Dsr+LgdygWJfTmBRhzA@mail.gmail.com>

Hi there,

You can calculate the Corwin-Schultz (CS) spread estimator.
https://onlinelibrary.wiley.com/doi/abs/10.1111/j.1540-6261.2012.01729.x

One of the authors provides spreadsheets with calculations in Excel. It
should not take much effort to put in R.

You should notice that low-frequency proxies are highly subject to
estimation errors.

Em ter., 28 de jul. de 2020 ?s 14:40, diego peroni <
diegoperoni1971 at gmail.com> escreveu:

> Hi All,
>
> I?m looking for a function in R to estimate Bid/Ask Spreads of stocks
> using Daily candlesticks.
>
> Can anyone suggest some implemetations?
>
> Thanks
> Diego
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


-- 
--
Henrique P. Ramos

	[[alternative HTML version deleted]]


From @d@mno227 @end|ng |rom gm@||@com  Tue Jul 28 20:12:42 2020
From: @d@mno227 @end|ng |rom gm@||@com (Adam Ginensky)
Date: Tue, 28 Jul 2020 13:12:42 -0500
Subject: [R-SIG-Finance] 
 A Simple Estimation of Bid-Ask Spreads from Daily
 Close, High, and Low Prices
In-Reply-To: <de9afd92e632ad1230388fc18e7366687c76d20f.camel@braverock.com>
References: <mailman.14952.3.1595757601.4257.r-sig-finance@r-project.org>
 <981B0E9B-1019-4E2D-BD61-6416A0886D8F@gmail.com>
 <de9afd92e632ad1230388fc18e7366687c76d20f.camel@braverock.com>
Message-ID: <CAEEj48=qf+zANu9cg2MYOXiKYPYBNRbA5=uvExRZH9eMm3nsAA@mail.gmail.com>

To expand on what Brian said, imagine a very illiquid stock that just
trades once on the bid.  No range, but probably a very wide bid/ask spread.
On the other hand imagine a very liquid stock highly correlated to the
market on a day with a large range- still will have a small bid/ask spread.

On Tue, Jul 28, 2020 at 1:09 PM Brian G. Peterson <brian at braverock.com>
wrote:

> On Tue, 2020-07-28 at 19:40 +0200, diego peroni wrote:
> > I?m looking for a function in R to estimate Bid/Ask Spreads of stocks
> using Daily candlesticks.
> >
> > Can anyone suggest some implemetations?
>
>
> Diego,
>
> I would like to help you, but what you are asking for is simply impossible.
>
> Daily Range, Volume, and Volatility tells you nothing about the intraday
> numbers except their upper/lower bounds.
>
> It certainly doesn't tell you anything about intraday spreads.
>
> You can certainly *guess* that less liquid instruments have larger
> effective spreads, since this is usually the case, but you can't know
> *what* the spread is from daily data.
>
> Brian
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From @j@y@h@h @end|ng |rom m@y|n@org  Tue Jul 28 20:20:02 2020
From: @j@y@h@h @end|ng |rom m@y|n@org (Ajay Shah)
Date: Tue, 28 Jul 2020 23:50:02 +0530
Subject: [R-SIG-Finance] 
 A Simple Estimation of Bid-Ask Spreads from Daily
 Close, High, and Low Prices
In-Reply-To: <981B0E9B-1019-4E2D-BD61-6416A0886D8F@gmail.com>
References: <mailman.14952.3.1595757601.4257.r-sig-finance@r-project.org>
 <981B0E9B-1019-4E2D-BD61-6416A0886D8F@gmail.com>
Message-ID: <CA++P4r04L5T=u0-O4cFYRdMQwR9CeR5RAJgZ85_uHN8MON6LqA@mail.gmail.com>

perhaps something like:

https://onlinelibrary.wiley.com/doi/full/10.1111/j.1540-6261.1984.tb03897.x

?

is easy to write.


On Tue, 28 Jul 2020 at 23:10, diego peroni <diegoperoni1971 at gmail.com>
wrote:

> Hi All,
>
> I?m looking for a function in R to estimate Bid/Ask Spreads of stocks
> using Daily candlesticks.
>
> Can anyone suggest some implemetations?
>
> Thanks
> Diego
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


-- 
Ajay Shah
ajayshah at mayin.org
http://www.mayin.org/ajayshah

	[[alternative HTML version deleted]]


From br|@n @end|ng |rom br@verock@com  Tue Jul 28 20:31:22 2020
From: br|@n @end|ng |rom br@verock@com (Brian G. Peterson)
Date: Tue, 28 Jul 2020 13:31:22 -0500
Subject: [R-SIG-Finance] 
 A Simple Estimation of Bid-Ask Spreads from Daily
 Close, High, and Low Prices
In-Reply-To: <CA++P4r04L5T=u0-O4cFYRdMQwR9CeR5RAJgZ85_uHN8MON6LqA@mail.gmail.com>
References: <mailman.14952.3.1595757601.4257.r-sig-finance@r-project.org>
 <981B0E9B-1019-4E2D-BD61-6416A0886D8F@gmail.com>
 <CA++P4r04L5T=u0-O4cFYRdMQwR9CeR5RAJgZ85_uHN8MON6LqA@mail.gmail.com>
Message-ID: <bbdf608250417cff539758e81f2eb6e835cfafe3.camel@braverock.com>

Ajay,
The method you are proposing is easy to write, the authors flat out say
that they didn't really bother to check how accurate their measure is,
but what little checking they do gives highly *implausible* results.
 They also say that it only makes sense for liquid instruments (for
which intraday data is readily available anyway).  So I'm not sure this
makes the impossible any more possible.
Brian
On Tue, 2020-07-28 at 23:50 +0530, Ajay Shah wrote:
> perhaps something like:
> https://onlinelibrary.wiley.com/doi/full/10.1111/j.1540-6261.1984.tb03897.x
> 
> ?
> is easy to write.
> 
> On Tue, 28 Jul 2020 at 23:10, diego peroni <diegoperoni1971 at gmail.com
> >wrote:
> > Hi All,
> > I?m looking for a function in R to estimate Bid/Ask Spreads of
> > stocksusing Daily candlesticks.
> > Can anyone suggest some implemetations?
> > ThanksDiego_______________________________________________R-SIG-
> > Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.--
> > Also note that this is not the r-help list where general R
> > questionsshould go.

	[[alternative HTML version deleted]]


From j@ymon0703 @end|ng |rom gm@||@com  Tue Jul 28 20:41:48 2020
From: j@ymon0703 @end|ng |rom gm@||@com (Jasen Mackie)
Date: Tue, 28 Jul 2020 14:41:48 -0400
Subject: [R-SIG-Finance] 
 A Simple Estimation of Bid-Ask Spreads from Daily
 Close, High, and Low Prices
In-Reply-To: <CA++P4r04L5T=u0-O4cFYRdMQwR9CeR5RAJgZ85_uHN8MON6LqA@mail.gmail.com>
References: <mailman.14952.3.1595757601.4257.r-sig-finance@r-project.org>
 <981B0E9B-1019-4E2D-BD61-6416A0886D8F@gmail.com>
 <CA++P4r04L5T=u0-O4cFYRdMQwR9CeR5RAJgZ85_uHN8MON6LqA@mail.gmail.com>
Message-ID: <CAE8+bE2pTq72jzGxktq-XzCTQZmdpu0S-b_ZjQd5guDNTFYdBg@mail.gmail.com>

I am not aware of any bid-ask spread estimators in R. I would be interested
to know the intention with estimated bid-ask spreads (and how they compare
with actual spreads) as they do sound dangerous if they were to be used in
any system/model. The quoted papers are quite old, one dating back to 1984.
The need for estimating bid-ask spreads was likely more necessary then than
it is now when you can easily extract and store this information if you
have access to the data.

On Tue, 28 Jul 2020 at 14:21, Ajay Shah <ajayshah at mayin.org> wrote:

> perhaps something like:
>
> https://onlinelibrary.wiley.com/doi/full/10.1111/j.1540-6261.1984.tb03897.x
>
> ?
>
> is easy to write.
>
>
> On Tue, 28 Jul 2020 at 23:10, diego peroni <diegoperoni1971 at gmail.com>
> wrote:
>
> > Hi All,
> >
> > I?m looking for a function in R to estimate Bid/Ask Spreads of stocks
> > using Daily candlesticks.
> >
> > Can anyone suggest some implemetations?
> >
> > Thanks
> > Diego
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions
> > should go.
> >
>
>
> --
> Ajay Shah
> ajayshah at mayin.org
> http://www.mayin.org/ajayshah
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From @@chm|d1 @end|ng |rom @teven@@edu  Tue Jul 28 21:10:34 2020
From: @@chm|d1 @end|ng |rom @teven@@edu (Alec Schmidt)
Date: Tue, 28 Jul 2020 19:10:34 +0000
Subject: [R-SIG-Finance] 
 A Simple Estimation of Bid-Ask Spreads from Daily
 Close, High, and Low Prices
In-Reply-To: <bbdf608250417cff539758e81f2eb6e835cfafe3.camel@braverock.com>
References: <mailman.14952.3.1595757601.4257.r-sig-finance@r-project.org>
 <981B0E9B-1019-4E2D-BD61-6416A0886D8F@gmail.com>
 <CA++P4r04L5T=u0-O4cFYRdMQwR9CeR5RAJgZ85_uHN8MON6LqA@mail.gmail.com>,
 <bbdf608250417cff539758e81f2eb6e835cfafe3.camel@braverock.com>
Message-ID: <MN2PR10MB4272CC9DE4578872D33A149284730@MN2PR10MB4272.namprd10.prod.outlook.com>

Brian,
You're right, of course. But the Roll's model was an influential work in 1980s when the bid/ask prices were not easily available (if at all). But the transactional prices were available ( 'time and sales' tapes). So, this model was a nice and useful theoretical exercise. ?
Alec

________________________________
From: R-SIG-Finance <r-sig-finance-bounces at r-project.org> on behalf of Brian G. Peterson <brian at braverock.com>
Sent: Tuesday, July 28, 2020 2:31 PM
To: Ajay Shah <ajayshah at mayin.org>; diego peroni <diegoperoni1971 at gmail.com>
Cc: r-sig-finance <r-sig-finance at r-project.org>
Subject: Re: [R-SIG-Finance] A Simple Estimation of Bid-Ask Spreads from Daily Close, High, and Low Prices

Ajay,
The method you are proposing is easy to write, the authors flat out say
that they didn't really bother to check how accurate their measure is,
but what little checking they do gives highly *implausible* results.
 They also say that it only makes sense for liquid instruments (for
which intraday data is readily available anyway).  So I'm not sure this
makes the impossible any more possible.
Brian
On Tue, 2020-07-28 at 23:50 +0530, Ajay Shah wrote:
> perhaps something like:
> https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fonlinelibrary.wiley.com%2Fdoi%2Ffull%2F10.1111%2Fj.1540-6261.1984.tb03897.x&amp;data=02%7C01%7Caschmid1%40stevens.edu%7C510e7fca5b744d24f84208d833286343%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637315595857504462&amp;sdata=JSCJrQC%2BusDDIDvf7eTfJVhSakzms4AprrQ4IqHxu2s%3D&amp;reserved=0
>
> ?
> is easy to write.
>
> On Tue, 28 Jul 2020 at 23:10, diego peroni <diegoperoni1971 at gmail.com
> >wrote:
> > Hi All,
> > I?m looking for a function in R to estimate Bid/Ask Spreads of
> > stocksusing Daily candlesticks.
> > Can anyone suggest some implemetations?
> > ThanksDiego_______________________________________________R-SIG-
> > Finance at r-project.org mailing list
> > https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-finance&amp;data=02%7C01%7Caschmid1%40stevens.edu%7C510e7fca5b744d24f84208d833286343%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637315595857504462&amp;sdata=4u%2BnhRnGdruFMjmzD9AosEgMVwFly7tyNsaaeERLmIM%3D&amp;reserved=0
> > -- Subscriber-posting only. If you want to post, subscribe first.--
> > Also note that this is not the r-help list where general R
> > questionsshould go.

        [[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-finance&amp;data=02%7C01%7Caschmid1%40stevens.edu%7C510e7fca5b744d24f84208d833286343%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637315595857504462&amp;sdata=4u%2BnhRnGdruFMjmzD9AosEgMVwFly7tyNsaaeERLmIM%3D&amp;reserved=0
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

	[[alternative HTML version deleted]]


From percent||101 @end|ng |rom gm@||@com  Tue Jul 28 22:46:04 2020
From: percent||101 @end|ng |rom gm@||@com (=?UTF-8?Q?Pedro_p=C3=A1ramo?=)
Date: Tue, 28 Jul 2020 22:46:04 +0200
Subject: [R-SIG-Finance] Save a plot
Message-ID: <CAB-TgNu+Ojto4N_tpjb_xhu=KuoCHqnpGcsFhC59JMdApzV0NQ@mail.gmail.com>

Hi all I want to save a code on a png but it saves me a png with 0k
(nothing on the plot) but I see it on R-Studio. No error is happening, what
should be happening?

Many thanks for your help

library(PerformanceAnalytics)
library(dplyr)
library(tibble)
library(lubridate)
library(PerformanceAnalytics)
library(quantmod)
library(ggplot2)
library(png)
library(grid)
library(RCurl)

Eurostoxx50<-getSymbols(src='yahoo',"^STOXX50E",  env =
parent.frame(),from="2019-12-31")
Ibex35<-getSymbols("^IBEX", env = parent.frame(),from="2019-12-31")
SP500<-getSymbols("^GSPC", env = parent.frame(),from="2019-12-31")
Nasdaq<-getSymbols("^IXIC", env = parent.frame(),from="2019-12-30")

ret <-
na.omit(CalculateReturns(cbind(Cl(IBEX),Cl(STOXX50E),Cl(GSPC),Cl(IXIC))) )
# same as Cl(AAPL)/lag(Cl(AAPL)) - 1))
chart.CumReturns(ret,wealth.index = TRUE,legend.loc = "bottomleft",
yaxis.pct=100)
title("SP500 reval", adj = 0, line = 3, cex.main=1.25)
title("Eco", adj = 0.75, line = -22)
png("plot-1.png", width=1000, height=600)

	[[alternative HTML version deleted]]


From br|@n @end|ng |rom br@verock@com  Tue Jul 28 22:54:05 2020
From: br|@n @end|ng |rom br@verock@com (Brian G. Peterson)
Date: Tue, 28 Jul 2020 15:54:05 -0500
Subject: [R-SIG-Finance] Save a plot
In-Reply-To: <CAB-TgNu+Ojto4N_tpjb_xhu=KuoCHqnpGcsFhC59JMdApzV0NQ@mail.gmail.com>
References: <CAB-TgNu+Ojto4N_tpjb_xhu=KuoCHqnpGcsFhC59JMdApzV0NQ@mail.gmail.com>
Message-ID: <728ceefb59f1beb0b9d46592c6a19ba844deac4a.camel@braverock.com>

The problem is that you need to open the png device, call your plots,
and then close the device.  You would do the same e.g. with a pdf.

Try something like this:

##########

library(PerformanceAnalytics)
library(quantmod)
library(png)


png("plot-1.png", width=1000, height=600)
chart.CumReturns(ret,wealth.index = TRUE,legend.loc = "bottomleft",
yaxis.pct=100)
title("SP500 reval", adj = 0, line = 3, cex.main=1.25)
title("Eco", adj = 0.75, line = -22)

dev.off()
##########
On Tue, 2020-07-28 at 22:46 +0200, Pedro p?ramo wrote:
> Hi all I want to save a code on a png but it saves me a png with
> 0k(nothing on the plot) but I see it on R-Studio. No error is
> happening, whatshould be happening?
> Many thanks for your help
> library(PerformanceAnalytics)library(dplyr)library(tibble)library(lub
> ridate)library(PerformanceAnalytics)library(quantmod)library(ggplot2)
> library(png)library(grid)library(RCurl)
> Eurostoxx50<-getSymbols(src='yahoo',"^STOXX50E",  env
> =parent.frame(),from="2019-12-31")Ibex35<-getSymbols("^IBEX", env =
> parent.frame(),from="2019-12-31")SP500<-getSymbols("^GSPC", env =
> parent.frame(),from="2019-12-31")Nasdaq<-getSymbols("^IXIC", env =
> parent.frame(),from="2019-12-30")
> ret <-
> na.omit(CalculateReturns(cbind(Cl(IBEX),Cl(STOXX50E),Cl(GSPC),Cl(IXIC
> ))) )# same as Cl(AAPL)/lag(Cl(AAPL)) -
> 1))chart.CumReturns(ret,wealth.index = TRUE,legend.loc =
> "bottomleft",yaxis.pct=100)title("SP500 reval", adj = 0, line = 3,
> cex.main=1.25)title("Eco", adj = 0.75, line = -22)png("plot-1.png",
> width=1000, height=600)
> 	[[alternative HTML version deleted]]
> _______________________________________________R-SIG-Finance at r-
> project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.--
> Also note that this is not the r-help list where general R questions
> should go.

I also wonder about the multiple calls to title().  chart.CumReturns has a title argument.
-- 
Brian G. Peterson
ph: +1.773.459.4973
im: bgpbraverock

	[[alternative HTML version deleted]]


From d|egoperon|1971 @end|ng |rom gm@||@com  Wed Jul 29 09:34:40 2020
From: d|egoperon|1971 @end|ng |rom gm@||@com (diego peroni)
Date: Wed, 29 Jul 2020 09:34:40 +0200
Subject: [R-SIG-Finance] 
 A Simple Estimation of Bid-Ask Spreads from Daily
 Close, High, and Low Prices
In-Reply-To: <MN2PR10MB4272CC9DE4578872D33A149284730@MN2PR10MB4272.namprd10.prod.outlook.com>
References: <mailman.14952.3.1595757601.4257.r-sig-finance@r-project.org>
 <981B0E9B-1019-4E2D-BD61-6416A0886D8F@gmail.com>
 <CA++P4r04L5T=u0-O4cFYRdMQwR9CeR5RAJgZ85_uHN8MON6LqA@mail.gmail.com>
 <bbdf608250417cff539758e81f2eb6e835cfafe3.camel@braverock.com>
 <MN2PR10MB4272CC9DE4578872D33A149284730@MN2PR10MB4272.namprd10.prod.outlook.com>
Message-ID: <7EA290A1-9E5B-4A1A-995D-CE83EF11469C@gmail.com>

Thanks Brian and others!

I?m convinced that it?s not accurate but it can give me an idea of the magnitude in particular trading many stocks (global mean).

I?ve found just this post:

https://stackoverflow.com/questions/45916124/estimate-bid-ask-spreads-from-daily-high-and-low-prices-corwin-schultz-2012 <https://stackoverflow.com/questions/45916124/estimate-bid-ask-spreads-from-daily-high-and-low-prices-corwin-schultz-2012>

Regards
Diego



> On 28 Jul 2020, at 21:10, Alec Schmidt <aschmid1 at stevens.edu> wrote:
> 
> Brian,
> You're right, of course. But the Roll's model was an influential work in 1980s when the bid/ask prices were not easily available (if at all). But the transactional prices were available ( 'time and sales' tapes). So, this model was a nice and useful theoretical exercise. ?
> Alec
> 
> From: R-SIG-Finance <r-sig-finance-bounces at r-project.org <mailto:r-sig-finance-bounces at r-project.org>> on behalf of Brian G. Peterson <brian at braverock.com <mailto:brian at braverock.com>>
> Sent: Tuesday, July 28, 2020 2:31 PM
> To: Ajay Shah <ajayshah at mayin.org <mailto:ajayshah at mayin.org>>; diego peroni <diegoperoni1971 at gmail.com <mailto:diegoperoni1971 at gmail.com>>
> Cc: r-sig-finance <r-sig-finance at r-project.org <mailto:r-sig-finance at r-project.org>>
> Subject: Re: [R-SIG-Finance] A Simple Estimation of Bid-Ask Spreads from Daily Close, High, and Low Prices
>  
> Ajay,
> The method you are proposing is easy to write, the authors flat out say
> that they didn't really bother to check how accurate their measure is,
> but what little checking they do gives highly *implausible* results.
>  They also say that it only makes sense for liquid instruments (for
> which intraday data is readily available anyway).  So I'm not sure this
> makes the impossible any more possible.
> Brian
> On Tue, 2020-07-28 at 23:50 +0530, Ajay Shah wrote:
> > perhaps something like:
> > https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fonlinelibrary.wiley.com%2Fdoi%2Ffull%2F10.1111%2Fj.1540-6261.1984.tb03897.x&amp;data=02%7C01%7Caschmid1%40stevens.edu%7C510e7fca5b744d24f84208d833286343%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637315595857504462&amp;sdata=JSCJrQC%2BusDDIDvf7eTfJVhSakzms4AprrQ4IqHxu2s%3D&amp;reserved=0 <https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fonlinelibrary.wiley.com%2Fdoi%2Ffull%2F10.1111%2Fj.1540-6261.1984.tb03897.x&amp;data=02%7C01%7Caschmid1%40stevens.edu%7C510e7fca5b744d24f84208d833286343%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637315595857504462&amp;sdata=JSCJrQC%2BusDDIDvf7eTfJVhSakzms4AprrQ4IqHxu2s%3D&amp;reserved=0>
> > 
> > ?
> > is easy to write.
> > 
> > On Tue, 28 Jul 2020 at 23:10, diego peroni <diegoperoni1971 at gmail.com <mailto:diegoperoni1971 at gmail.com>
> > >wrote:
> > > Hi All,
> > > I?m looking for a function in R to estimate Bid/Ask Spreads of
> > > stocksusing Daily candlesticks.
> > > Can anyone suggest some implemetations?
> > > ThanksDiego_______________________________________________R-SIG-
> > > Finance at r-project.org <mailto:Finance at r-project.org> mailing list
> > > https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-finance&amp;data=02%7C01%7Caschmid1%40stevens.edu%7C510e7fca5b744d24f84208d833286343%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637315595857504462&amp;sdata=4u%2BnhRnGdruFMjmzD9AosEgMVwFly7tyNsaaeERLmIM%3D&amp;reserved=0 <https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-finance&amp;data=02%7C01%7Caschmid1%40stevens.edu%7C510e7fca5b744d24f84208d833286343%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637315595857504462&amp;sdata=4u%2BnhRnGdruFMjmzD9AosEgMVwFly7tyNsaaeERLmIM%3D&amp;reserved=0>
> > > -- Subscriber-posting only. If you want to post, subscribe first.--
> > > Also note that this is not the r-help list where general R
> > > questionsshould go.
> 
>         [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org> mailing list
> https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-finance&amp;data=02%7C01%7Caschmid1%40stevens.edu%7C510e7fca5b744d24f84208d833286343%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637315595857504462&amp;sdata=4u%2BnhRnGdruFMjmzD9AosEgMVwFly7tyNsaaeERLmIM%3D&amp;reserved=0 <https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-finance&amp;data=02%7C01%7Caschmid1%40stevens.edu%7C510e7fca5b744d24f84208d833286343%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637315595857504462&amp;sdata=4u%2BnhRnGdruFMjmzD9AosEgMVwFly7tyNsaaeERLmIM%3D&amp;reserved=0>
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


	[[alternative HTML version deleted]]


From @j@y@h@h @end|ng |rom m@y|n@org  Wed Jul 29 10:43:04 2020
From: @j@y@h@h @end|ng |rom m@y|n@org (Ajay Shah)
Date: Wed, 29 Jul 2020 14:13:04 +0530
Subject: [R-SIG-Finance] 
 A Simple Estimation of Bid-Ask Spreads from Daily
 Close, High, and Low Prices
In-Reply-To: <7EA290A1-9E5B-4A1A-995D-CE83EF11469C@gmail.com>
References: <mailman.14952.3.1595757601.4257.r-sig-finance@r-project.org>
 <981B0E9B-1019-4E2D-BD61-6416A0886D8F@gmail.com>
 <CA++P4r04L5T=u0-O4cFYRdMQwR9CeR5RAJgZ85_uHN8MON6LqA@mail.gmail.com>
 <bbdf608250417cff539758e81f2eb6e835cfafe3.camel@braverock.com>
 <MN2PR10MB4272CC9DE4578872D33A149284730@MN2PR10MB4272.namprd10.prod.outlook.com>
 <7EA290A1-9E5B-4A1A-995D-CE83EF11469C@gmail.com>
Message-ID: <CA++P4r0hKe5gpb51Gtm=Ya5UhLr2DVLGGbJhty+r1tQv0goi-w@mail.gmail.com>

These methods are also useful in studying the past, where good datasets are
unavailable. As an example, when Corwin/Schultz first came out, I had
written
https://blog.theleapjournal.org/2012/04/new-insights-into-events-on-indian.html


On Wed, 29 Jul 2020 at 13:05, diego peroni <diegoperoni1971 at gmail.com>
wrote:

> Thanks Brian and others!
>
> I?m convinced that it?s not accurate but it can give me an idea of the
> magnitude in particular trading many stocks (global mean).
>
> I?ve found just this post:
>
>
> https://stackoverflow.com/questions/45916124/estimate-bid-ask-spreads-from-daily-high-and-low-prices-corwin-schultz-2012
> <
> https://stackoverflow.com/questions/45916124/estimate-bid-ask-spreads-from-daily-high-and-low-prices-corwin-schultz-2012
> >
>
> Regards
> Diego
>
>
>
> > On 28 Jul 2020, at 21:10, Alec Schmidt <aschmid1 at stevens.edu> wrote:
> >
> > Brian,
> > You're right, of course. But the Roll's model was an influential work in
> 1980s when the bid/ask prices were not easily available (if at all). But
> the transactional prices were available ( 'time and sales' tapes). So, this
> model was a nice and useful theoretical exercise. ?
> > Alec
> >
> > From: R-SIG-Finance <r-sig-finance-bounces at r-project.org <mailto:
> r-sig-finance-bounces at r-project.org>> on behalf of Brian G. Peterson <
> brian at braverock.com <mailto:brian at braverock.com>>
> > Sent: Tuesday, July 28, 2020 2:31 PM
> > To: Ajay Shah <ajayshah at mayin.org <mailto:ajayshah at mayin.org>>; diego
> peroni <diegoperoni1971 at gmail.com <mailto:diegoperoni1971 at gmail.com>>
> > Cc: r-sig-finance <r-sig-finance at r-project.org <mailto:
> r-sig-finance at r-project.org>>
> > Subject: Re: [R-SIG-Finance] A Simple Estimation of Bid-Ask Spreads from
> Daily Close, High, and Low Prices
> >
> > Ajay,
> > The method you are proposing is easy to write, the authors flat out say
> > that they didn't really bother to check how accurate their measure is,
> > but what little checking they do gives highly *implausible* results.
> >  They also say that it only makes sense for liquid instruments (for
> > which intraday data is readily available anyway).  So I'm not sure this
> > makes the impossible any more possible.
> > Brian
> > On Tue, 2020-07-28 at 23:50 +0530, Ajay Shah wrote:
> > > perhaps something like:
> > >
> https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fonlinelibrary.wiley.com%2Fdoi%2Ffull%2F10.1111%2Fj.1540-6261.1984.tb03897.x&amp;data=02%7C01%7Caschmid1%40stevens.edu%7C510e7fca5b744d24f84208d833286343%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637315595857504462&amp;sdata=JSCJrQC%2BusDDIDvf7eTfJVhSakzms4AprrQ4IqHxu2s%3D&amp;reserved=0
> <
> https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fonlinelibrary.wiley.com%2Fdoi%2Ffull%2F10.1111%2Fj.1540-6261.1984.tb03897.x&amp;data=02%7C01%7Caschmid1%40stevens.edu%7C510e7fca5b744d24f84208d833286343%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637315595857504462&amp;sdata=JSCJrQC%2BusDDIDvf7eTfJVhSakzms4AprrQ4IqHxu2s%3D&amp;reserved=0
> >
> > >
> > > ?
> > > is easy to write.
> > >
> > > On Tue, 28 Jul 2020 at 23:10, diego peroni <diegoperoni1971 at gmail.com
> <mailto:diegoperoni1971 at gmail.com>
> > > >wrote:
> > > > Hi All,
> > > > I?m looking for a function in R to estimate Bid/Ask Spreads of
> > > > stocksusing Daily candlesticks.
> > > > Can anyone suggest some implemetations?
> > > > ThanksDiego_______________________________________________R-SIG-
> > > > Finance at r-project.org <mailto:Finance at r-project.org> mailing list
> > > >
> https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-finance&amp;data=02%7C01%7Caschmid1%40stevens.edu%7C510e7fca5b744d24f84208d833286343%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637315595857504462&amp;sdata=4u%2BnhRnGdruFMjmzD9AosEgMVwFly7tyNsaaeERLmIM%3D&amp;reserved=0
> <
> https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-finance&amp;data=02%7C01%7Caschmid1%40stevens.edu%7C510e7fca5b744d24f84208d833286343%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637315595857504462&amp;sdata=4u%2BnhRnGdruFMjmzD9AosEgMVwFly7tyNsaaeERLmIM%3D&amp;reserved=0
> >
> > > > -- Subscriber-posting only. If you want to post, subscribe first.--
> > > > Also note that this is not the r-help list where general R
> > > > questionsshould go.
> >
> >         [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org>
> mailing list
> >
> https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-finance&amp;data=02%7C01%7Caschmid1%40stevens.edu%7C510e7fca5b744d24f84208d833286343%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637315595857504462&amp;sdata=4u%2BnhRnGdruFMjmzD9AosEgMVwFly7tyNsaaeERLmIM%3D&amp;reserved=0
> <
> https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-finance&amp;data=02%7C01%7Caschmid1%40stevens.edu%7C510e7fca5b744d24f84208d833286343%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637315595857504462&amp;sdata=4u%2BnhRnGdruFMjmzD9AosEgMVwFly7tyNsaaeERLmIM%3D&amp;reserved=0
> >
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions
> should go.
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


-- 
Ajay Shah
ajayshah at mayin.org
http://www.mayin.org/ajayshah

	[[alternative HTML version deleted]]


From percent||101 @end|ng |rom gm@||@com  Wed Jul 29 15:37:47 2020
From: percent||101 @end|ng |rom gm@||@com (=?UTF-8?Q?Pedro_p=C3=A1ramo?=)
Date: Wed, 29 Jul 2020 15:37:47 +0200
Subject: [R-SIG-Finance] Select best worst
Message-ID: <CAB-TgNvC=WPMVNnZWPROLw0byi12gUZmJ6jF1vWkDC1UycJAFg@mail.gmail.com>

Hi all,

I have differente stocks

AAcciona<- tq_get("ANA.MC",from = '2019-12-31',get = "stock.prices")
ACS<- tq_get("ACS.MC",from = '2019-12-31',get = "stock.prices")
Aena<- tq_get("AENA.MC",from = '2019-12-31',get = "stock.prices")
Amadeus<- tq_get("AMS.MC",from = '2019-12-31',get = "stock.prices")
ArcelorMittal<- tq_get("MTS.MC",from = '2019-12-31',get = "stock.prices")
BBVA<- tq_get("BBVA.MC",from = '2019-12-31',get = "stock.prices")
Sabadell<- tq_get("SAB.MC",from = '2019-12-31',get = "stock.prices")
Santander<- tq_get("SAN.MC",from = '2019-12-31',get = "stock.prices")
Bankinter<- tq_get("BKT.MC",from = '2019-12-31',get = "stock.prices")
  Indra<- tq_get("IDR.MC",from = '2019-12-31',get = "stock.prices")
And I have applied this code to know the year to date accumulated returns,
the thing is that I want to order them by the last observation (year to
date) and make a plot of the 3 best/worst (bigger/lower
accumulated returns).

?Is there a way to compare and order the last observation of
STOCKcum_return of each stock and select the 3 top and 3 bottom so I can
plot like worst/best without going manually?

Many thanks in advance

Hope I can explain


Indra_daily_returns <- Indra %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Indra_cum_returns <- Indra_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

AAcciona_daily_returns <- AAcciona %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
AAcciona_cum_returns <- AAcciona_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

ACS_daily_returns <- ACS %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
ACS_cum_returns <- ACS_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

AENA_daily_returns <- AENA %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Aena_cum_returns <- Aaena_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Amadeus_daily_returns <- Amadeus %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Amadeus_cum_returns <- Amadeus_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

ArcerlorMittal_daily_returns <- ArcerlorMittal %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
ArcerlorMittal_cum_returns <- ArcerlorMittal_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

BBVA_daily_returns <- BBVA %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
BBVA_cum_returns <- BBVA_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)


Sabadell_daily_returns <- Sabadell %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Sabadell_cum_returns <- Sabadell_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Santander_daily_returns <- Santander %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Santander_cum_returns <- Santander_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)


Bankinter_daily_returns <- Bankinter %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Bankinter_cum_returns <- Bankinter_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

	[[alternative HTML version deleted]]


From br|@n @end|ng |rom br@verock@com  Wed Jul 29 16:34:15 2020
From: br|@n @end|ng |rom br@verock@com (Brian G. Peterson)
Date: Wed, 29 Jul 2020 09:34:15 -0500
Subject: [R-SIG-Finance] Select best worst
In-Reply-To: <CAB-TgNvC=WPMVNnZWPROLw0byi12gUZmJ6jF1vWkDC1UycJAFg@mail.gmail.com>
References: <CAB-TgNvC=WPMVNnZWPROLw0byi12gUZmJ6jF1vWkDC1UycJAFg@mail.gmail.com>
Message-ID: <b35513e458d72a8b1f8e4e3078f99e5282c941b9.camel@braverock.com>

Try a *minimal* example...  

I'm not going to take the time to sort through your code, especially
with all the totally unnecessary mutates and pipes.


cret <- rnorm(10) # dummy cumulative returns
names(cret) <- c('a','b','c','d','e','f','g','h','i','j')
sort(cret)

You should be able to easily use this to get the order of the columns
that you want.

Regards,

Brian


-- 
Brian G. Peterson
ph: +1.773.459.4973
im: bgpbraverock

On Wed, 2020-07-29 at 15:37 +0200, Pedro p?ramo wrote:
> Hi all,
> 
> I have differente stocks
> 
> AAcciona<- tq_get("ANA.MC",from = '2019-12-31',get = "stock.prices")
> ACS<- tq_get("ACS.MC",from = '2019-12-31',get = "stock.prices")
> Aena<- tq_get("AENA.MC",from = '2019-12-31',get = "stock.prices")
> Amadeus<- tq_get("AMS.MC",from = '2019-12-31',get = "stock.prices")
> ArcelorMittal<- tq_get("MTS.MC",from = '2019-12-31',get =
> "stock.prices")
> BBVA<- tq_get("BBVA.MC",from = '2019-12-31',get = "stock.prices")
> Sabadell<- tq_get("SAB.MC",from = '2019-12-31',get = "stock.prices")
> Santander<- tq_get("SAN.MC",from = '2019-12-31',get = "stock.prices")
> Bankinter<- tq_get("BKT.MC",from = '2019-12-31',get = "stock.prices")
>   Indra<- tq_get("IDR.MC",from = '2019-12-31',get = "stock.prices")
> And I have applied this code to know the year to date accumulated
> returns,
> the thing is that I want to order them by the last observation (year
> to
> date) and make a plot of the 3 best/worst (bigger/lower
> accumulated returns).
> 
> ?Is there a way to compare and order the last observation of
> STOCKcum_return of each stock and select the 3 top and 3 bottom so I
> can
> plot like worst/best without going manually?
> 
> Many thanks in advance
> 
> Hope I can explain
> 
> 
> Indra_daily_returns <- Indra %>%
>   tq_transmute(select = adjusted,           # this specifies which
> column
> to select
>                mutate_fun = periodReturn,   # This specifies what to
> do
> with that column
>                period = "daily",      # This argument calculates
> Daily
> returns
>                col_rename = "idr_returns") # renames the column
> Indra_cum_returns <- Indra_daily_returns %>%
>   mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>   mutate(cumulative_returns = cr - 1)
> 
> AAcciona_daily_returns <- AAcciona %>%
>   tq_transmute(select = adjusted,           # this specifies which
> column
> to select
>                mutate_fun = periodReturn,   # This specifies what to
> do
> with that column
>                period = "daily",      # This argument calculates
> Daily
> returns
>                col_rename = "idr_returns") # renames the column
> AAcciona_cum_returns <- AAcciona_daily_returns %>%
>   mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>   mutate(cumulative_returns = cr - 1)
> 
> ACS_daily_returns <- ACS %>%
>   tq_transmute(select = adjusted,           # this specifies which
> column
> to select
>                mutate_fun = periodReturn,   # This specifies what to
> do
> with that column
>                period = "daily",      # This argument calculates
> Daily
> returns
>                col_rename = "idr_returns") # renames the column
> ACS_cum_returns <- ACS_daily_returns %>%
>   mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>   mutate(cumulative_returns = cr - 1)
> 
> AENA_daily_returns <- AENA %>%
>   tq_transmute(select = adjusted,           # this specifies which
> column
> to select
>                mutate_fun = periodReturn,   # This specifies what to
> do
> with that column
>                period = "daily",      # This argument calculates
> Daily
> returns
>                col_rename = "idr_returns") # renames the column
> Aena_cum_returns <- Aaena_daily_returns %>%
>   mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>   mutate(cumulative_returns = cr - 1)
> 
> Amadeus_daily_returns <- Amadeus %>%
>   tq_transmute(select = adjusted,           # this specifies which
> column
> to select
>                mutate_fun = periodReturn,   # This specifies what to
> do
> with that column
>                period = "daily",      # This argument calculates
> Daily
> returns
>                col_rename = "idr_returns") # renames the column
> Amadeus_cum_returns <- Amadeus_daily_returns %>%
>   mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>   mutate(cumulative_returns = cr - 1)
> 
> ArcerlorMittal_daily_returns <- ArcerlorMittal %>%
>   tq_transmute(select = adjusted,           # this specifies which
> column
> to select
>                mutate_fun = periodReturn,   # This specifies what to
> do
> with that column
>                period = "daily",      # This argument calculates
> Daily
> returns
>                col_rename = "idr_returns") # renames the column
> ArcerlorMittal_cum_returns <- ArcerlorMittal_daily_returns %>%
>   mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>   mutate(cumulative_returns = cr - 1)
> 
> BBVA_daily_returns <- BBVA %>%
>   tq_transmute(select = adjusted,           # this specifies which
> column
> to select
>                mutate_fun = periodReturn,   # This specifies what to
> do
> with that column
>                period = "daily",      # This argument calculates
> Daily
> returns
>                col_rename = "idr_returns") # renames the column
> BBVA_cum_returns <- BBVA_daily_returns %>%
>   mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>   mutate(cumulative_returns = cr - 1)
> 
> 
> Sabadell_daily_returns <- Sabadell %>%
>   tq_transmute(select = adjusted,           # this specifies which
> column
> to select
>                mutate_fun = periodReturn,   # This specifies what to
> do
> with that column
>                period = "daily",      # This argument calculates
> Daily
> returns
>                col_rename = "idr_returns") # renames the column
> Sabadell_cum_returns <- Sabadell_daily_returns %>%
>   mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>   mutate(cumulative_returns = cr - 1)
> 
> Santander_daily_returns <- Santander %>%
>   tq_transmute(select = adjusted,           # this specifies which
> column
> to select
>                mutate_fun = periodReturn,   # This specifies what to
> do
> with that column
>                period = "daily",      # This argument calculates
> Daily
> returns
>                col_rename = "idr_returns") # renames the column
> Santander_cum_returns <- Santander_daily_returns %>%
>   mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>   mutate(cumulative_returns = cr - 1)
> 
> 
> Bankinter_daily_returns <- Bankinter %>%
>   tq_transmute(select = adjusted,           # this specifies which
> column
> to select
>                mutate_fun = periodReturn,   # This specifies what to
> do
> with that column
>                period = "daily",      # This argument calculates
> Daily
> returns
>                col_rename = "idr_returns") # renames the column
> Bankinter_cum_returns <- Bankinter_daily_returns %>%
>   mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>   mutate(cumulative_returns = cr - 1)
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org
>  mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> 
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R
> questions should go.
> 
cret <- rnorm(10) # dummy data to represent your returns 
names(cret) <- c('a','b','c','d','e','f','g','h','i','j')

sort(cret, decreasing=TRUE)

You can use your column names to easily get the order you want to rearrange things.


From percent||101 @end|ng |rom gm@||@com  Thu Jul 30 18:00:38 2020
From: percent||101 @end|ng |rom gm@||@com (=?UTF-8?Q?Pedro_p=C3=A1ramo?=)
Date: Thu, 30 Jul 2020 18:00:38 +0200
Subject: [R-SIG-Finance] Extracting data from a web
Message-ID: <CAB-TgNv9t0F+GogGAfn9iegLoShKvh8fkG76Dd+OMz5e9K5ZhA@mail.gmail.com>

I want to folow a fund and I see I can obtain data from here but I have to
Mark the dates on the web previously, there is no a txt ir CSV, is there a
way to extract the values from a line in a .R on a web like this?


https://www.bankiafondos.es/es/fondos/bankia-banca-privada-selccion-fi##it-tab-4

	[[alternative HTML version deleted]]


From m@r|o@p|@@ @end|ng |rom gm@||@com  Thu Jul 30 18:12:00 2020
From: m@r|o@p|@@ @end|ng |rom gm@||@com (Mario Pisa)
Date: Thu, 30 Jul 2020 18:12:00 +0200
Subject: [R-SIG-Finance] Extracting data from a web
In-Reply-To: <CAB-TgNv9t0F+GogGAfn9iegLoShKvh8fkG76Dd+OMz5e9K5ZhA@mail.gmail.com>
References: <CAB-TgNv9t0F+GogGAfn9iegLoShKvh8fkG76Dd+OMz5e9K5ZhA@mail.gmail.com>
Message-ID: <002E6EAD-850F-4F08-8C5B-CB599A8142BD@gmail.com>

It?s a nice small project for web scraping.

Mario

> El 30 jul 2020, a las 18:01, Pedro p?ramo <percentil101 at gmail.com> escribi?:
> 
> ?I want to folow a fund and I see I can obtain data from here but I have to
> Mark the dates on the web previously, there is no a txt ir CSV, is there a
> way to extract the values from a line in a .R on a web like this?
> 
> 
> https://www.bankiafondos.es/es/fondos/bankia-banca-privada-selccion-fi##it-tab-4
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From percent||101 @end|ng |rom gm@||@com  Thu Jul 30 20:18:02 2020
From: percent||101 @end|ng |rom gm@||@com (=?UTF-8?Q?Pedro_p=C3=A1ramo?=)
Date: Thu, 30 Jul 2020 20:18:02 +0200
Subject: [R-SIG-Finance] hist from a data frame that is a list
Message-ID: <CAB-TgNssm1MjEh9OmGXB=wcKtk-nrAbLnxROEOSs5uCGMt6LYg@mail.gmail.com>

Hi all,

I have made some calculus and creating this:


bwfinal <- matrix(bestworst, nrow =35 , ncol = 1)
bwfinal2 <- matrix(namebw, nrow =35 , ncol = 1)

bwc<-cbind(bwfinal2,bwfinal)
colnames(bwc)=c("Accion","reval")
bwc <- as.data.frame(bwc)
colnames(bwchist)=c("Accion","reval")
bwchist <-as.data.frame(bwc[order(bwc$reval), ])

It is supposed thar bwchist is a data frame but when I try to make an hist
it says me

Error in hist.default(bwchist) : 'x' must be numeric

It looks like bwchist is a list but dont I have tried to use unnlist but
always appears the same error

My bwchist is like this when run on the command line How should I treat
this data frame to hist Accio on x axis and values of reval on Y axis?:

 bwchist
          Accion       reval
20           IAG  -0.6962448
7       Sabadell  -0.6788028
22         Melia  -0.5636132
26        Repsol  -0.4645528
23        Merlin  -0.4545645
8      Santander  -0.4368512
5  ArcelorMittal  -0.3847631
6           BBVA  -0.3774718
4        Amadeus  -0.3755909
28    Telefonica  -0.3598171
35         Indra   -0.358055
2            ACS   -0.354641
34      Almirall  -0.3510929
19      Colonial  -0.3501759
32           CIE   -0.315845
9      Bankinter  -0.2999523
21        Mapfre  -0.2913895
3           Aena  -0.2759459
31        Bankia   -0.262466
10     CaixaBank  -0.2539538
18       Inditex  -0.2505565
13          ENCE  -0.2414169
24       Naturgy  -0.2409723
30      Acerinox  -0.1881223
16       Grifols  -0.1819918
15     Ferrovial   -0.173434
12        Enagas  -0.0312891
25           REE 0.006016704
1        Acciona  0.04221062
14        Endesa  0.07195485
33      MasMovil   0.1120944
27       SGamesa   0.2178233
29      Viscofan    0.245229
17     Iberdrola   0.2585861
11       Cellnex    0.429028

	[[alternative HTML version deleted]]


From br|@n @end|ng |rom br@verock@com  Thu Jul 30 20:28:47 2020
From: br|@n @end|ng |rom br@verock@com (Brian G. Peterson)
Date: Thu, 30 Jul 2020 13:28:47 -0500
Subject: [R-SIG-Finance] hist from a data frame that is a list
In-Reply-To: <CAB-TgNssm1MjEh9OmGXB=wcKtk-nrAbLnxROEOSs5uCGMt6LYg@mail.gmail.com>
References: <CAB-TgNssm1MjEh9OmGXB=wcKtk-nrAbLnxROEOSs5uCGMt6LYg@mail.gmail.com>
Message-ID: <e0ea12733d892b0faae566bbb4e9086c15115a08.camel@braverock.com>

In the future, please direct general R questions to stack orverflow or
the general R-help list.  This question is for Finance and finance-
related packages.

try:

hist(bwchist$reval)

If that doesn't work, try 

class(bwchist)

I suspect that the long list of tidyverse packages in your prior emails
may have led you astray, and basic things won't work.

Regards,

Brian


On Thu, 2020-07-30 at 20:18 +0200, Pedro p?ramo wrote:
> Hi all,
> 
> I have made some calculus and creating this:
> 
> 
> bwfinal <- matrix(bestworst, nrow =35 , ncol = 1)
> bwfinal2 <- matrix(namebw, nrow =35 , ncol = 1)
> 
> bwc<-cbind(bwfinal2,bwfinal)
> colnames(bwc)=c("Accion","reval")
> bwc <- as.data.frame(bwc)
> colnames(bwchist)=c("Accion","reval")
> bwchist <-as.data.frame(bwc[order(bwc$reval), ])
> 
> It is supposed thar bwchist is a data frame but when I try to make an
> hist
> it says me
> 
> Error in hist.default(bwchist) : 'x' must be numeric
> 
> It looks like bwchist is a list but dont I have tried to use unnlist
> but
> always appears the same error
> 
> My bwchist is like this when run on the command line How should I
> treat
> this data frame to hist Accio on x axis and values of reval on Y
> axis?:
> 
>  bwchist
>           Accion       reval
> 20           IAG  -0.6962448
> 7       Sabadell  -0.6788028
> 22         Melia  -0.5636132
> 26        Repsol  -0.4645528
> 23        Merlin  -0.4545645
> 8      Santander  -0.4368512
> 5  ArcelorMittal  -0.3847631
> 6           BBVA  -0.3774718
> 4        Amadeus  -0.3755909
> 28    Telefonica  -0.3598171
> 35         Indra   -0.358055
> 2            ACS   -0.354641
> 34      Almirall  -0.3510929
> 19      Colonial  -0.3501759
> 32           CIE   -0.315845
> 9      Bankinter  -0.2999523
> 21        Mapfre  -0.2913895
> 3           Aena  -0.2759459
> 31        Bankia   -0.262466
> 10     CaixaBank  -0.2539538
> 18       Inditex  -0.2505565
> 13          ENCE  -0.2414169
> 24       Naturgy  -0.2409723
> 30      Acerinox  -0.1881223
> 16       Grifols  -0.1819918
> 15     Ferrovial   -0.173434
> 12        Enagas  -0.0312891
> 25           REE 0.006016704
> 1        Acciona  0.04221062
> 14        Endesa  0.07195485
> 33      MasMovil   0.1120944
> 27       SGamesa   0.2178233
> 29      Viscofan    0.245229
> 17     Iberdrola   0.2585861
> 11       Cellnex    0.429028
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org
>  mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> 
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R
> questions should go.
-- 
Brian G. Peterson
ph: +1.773.459.4973
im: bgpbraverock


From percent||101 @end|ng |rom gm@||@com  Thu Jul 30 22:03:03 2020
From: percent||101 @end|ng |rom gm@||@com (=?UTF-8?Q?Pedro_p=C3=A1ramo?=)
Date: Thu, 30 Jul 2020 22:03:03 +0200
Subject: [R-SIG-Finance] hist from a data frame that is a list
In-Reply-To: <e0ea12733d892b0faae566bbb4e9086c15115a08.camel@braverock.com>
References: <CAB-TgNssm1MjEh9OmGXB=wcKtk-nrAbLnxROEOSs5uCGMt6LYg@mail.gmail.com>
 <e0ea12733d892b0faae566bbb4e9086c15115a08.camel@braverock.com>
Message-ID: <CAB-TgNsTrUWa_D_wA_0eixnbcd1sDdR7Pkjbb_JPRGarjdmSYw@mail.gmail.com>

I have tried all, sorry because its true is not a finance question I
confused because its the treatment of the output of a finance question.

Sorry and many thanks in advance

Please receive my apologuises.

El jue., 30 jul. 2020 a las 20:28, Brian G. Peterson (<brian at braverock.com>)
escribi?:

> In the future, please direct general R questions to stack orverflow or
> the general R-help list.  This question is for Finance and finance-
> related packages.
>
> try:
>
> hist(bwchist$reval)
>
> If that doesn't work, try
>
> class(bwchist)
>
> I suspect that the long list of tidyverse packages in your prior emails
> may have led you astray, and basic things won't work.
>
> Regards,
>
> Brian
>
>
> On Thu, 2020-07-30 at 20:18 +0200, Pedro p?ramo wrote:
> > Hi all,
> >
> > I have made some calculus and creating this:
> >
> >
> > bwfinal <- matrix(bestworst, nrow =35 , ncol = 1)
> > bwfinal2 <- matrix(namebw, nrow =35 , ncol = 1)
> >
> > bwc<-cbind(bwfinal2,bwfinal)
> > colnames(bwc)=c("Accion","reval")
> > bwc <- as.data.frame(bwc)
> > colnames(bwchist)=c("Accion","reval")
> > bwchist <-as.data.frame(bwc[order(bwc$reval), ])
> >
> > It is supposed thar bwchist is a data frame but when I try to make an
> > hist
> > it says me
> >
> > Error in hist.default(bwchist) : 'x' must be numeric
> >
> > It looks like bwchist is a list but dont I have tried to use unnlist
> > but
> > always appears the same error
> >
> > My bwchist is like this when run on the command line How should I
> > treat
> > this data frame to hist Accio on x axis and values of reval on Y
> > axis?:
> >
> >  bwchist
> >           Accion       reval
> > 20           IAG  -0.6962448
> > 7       Sabadell  -0.6788028
> > 22         Melia  -0.5636132
> > 26        Repsol  -0.4645528
> > 23        Merlin  -0.4545645
> > 8      Santander  -0.4368512
> > 5  ArcelorMittal  -0.3847631
> > 6           BBVA  -0.3774718
> > 4        Amadeus  -0.3755909
> > 28    Telefonica  -0.3598171
> > 35         Indra   -0.358055
> > 2            ACS   -0.354641
> > 34      Almirall  -0.3510929
> > 19      Colonial  -0.3501759
> > 32           CIE   -0.315845
> > 9      Bankinter  -0.2999523
> > 21        Mapfre  -0.2913895
> > 3           Aena  -0.2759459
> > 31        Bankia   -0.262466
> > 10     CaixaBank  -0.2539538
> > 18       Inditex  -0.2505565
> > 13          ENCE  -0.2414169
> > 24       Naturgy  -0.2409723
> > 30      Acerinox  -0.1881223
> > 16       Grifols  -0.1819918
> > 15     Ferrovial   -0.173434
> > 12        Enagas  -0.0312891
> > 25           REE 0.006016704
> > 1        Acciona  0.04221062
> > 14        Endesa  0.07195485
> > 33      MasMovil   0.1120944
> > 27       SGamesa   0.2178233
> > 29      Viscofan    0.245229
> > 17     Iberdrola   0.2585861
> > 11       Cellnex    0.429028
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org
> >  mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R
> > questions should go.
> --
> Brian G. Peterson
> ph: +1.773.459.4973
> im: bgpbraverock
>
>

	[[alternative HTML version deleted]]


From @n@nd@ch|r@g @end|ng |rom gm@||@com  Fri Jul 31 09:53:08 2020
From: @n@nd@ch|r@g @end|ng |rom gm@||@com (Chirag Anand)
Date: Fri, 31 Jul 2020 13:23:08 +0530
Subject: [R-SIG-Finance] Extracting data from a web
In-Reply-To: <CAB-TgNv9t0F+GogGAfn9iegLoShKvh8fkG76Dd+OMz5e9K5ZhA@mail.gmail.com>
References: <CAB-TgNv9t0F+GogGAfn9iegLoShKvh8fkG76Dd+OMz5e9K5ZhA@mail.gmail.com>
Message-ID: <CAOS9=_-TtpkxtGsTXnpxkVeA8Z-J6FkfQ48MLP55pzPBfqg9Xg@mail.gmail.com>

On Thu, 30 Jul 2020 at 21:31, Pedro p?ramo <percentil101 at gmail.com> wrote:

> I want to folow a fund and I see I can obtain data from here but I have to
> Mark the dates on the web previously, there is no a txt ir CSV, is there a
> way to extract the values from a line in a .R on a web like this?
>

Try using XML::htmlTreeParse(). The line data seems to be coded very nicely
in a `<ul`>` and a few `<li>` with a tagged `class`.

	[[alternative HTML version deleted]]


From jo@h@m@u|r|ch @end|ng |rom gm@||@com  Fri Jul 31 17:21:25 2020
From: jo@h@m@u|r|ch @end|ng |rom gm@||@com (Joshua Ulrich)
Date: Fri, 31 Jul 2020 10:21:25 -0500
Subject: [R-SIG-Finance] Select best worst
In-Reply-To: <b35513e458d72a8b1f8e4e3078f99e5282c941b9.camel@braverock.com>
References: <CAB-TgNvC=WPMVNnZWPROLw0byi12gUZmJ6jF1vWkDC1UycJAFg@mail.gmail.com>
 <b35513e458d72a8b1f8e4e3078f99e5282c941b9.camel@braverock.com>
Message-ID: <CAPPM_gRmTQ8xP1LdG7F-05+XWjkjG9Rp_DPU0r3jTfg3vj8btQ@mail.gmail.com>

Note that this was also posted on R-help:
https://stat.ethz.ch/pipermail/r-help/2020-July/468145.html

I answered there, and I include my answer below for others' reference.

--------------------

I don't know how to do this in tidyquant, but here's how you can do it
with quantmod:

# all tickers
tk <- c("ANA.MC", "ACS.MC", "AENA.MC", "AMS.MC", "MTS.MC", "BBVA.MC", "SAB.MC",
  "SAN.MC", "BKT.MC", "CABK.MC", "CLNX.MC", "ENG.MC", "ENC.MC", "ELE.MC",
  "FER.MC", "GRF.MC", "IBE.MC", "ITX.MC", "COL.MC", "IAG.MC", "MAP.MC",
  "MEL.MC", "MRL.MC", "NTGY.MC", "REE.MC", "REP.MC", "SGRE.MC", "TEF.MC",
  "VIS.MC", "ACX.MC", "BKIA.MC", "CIE.MC", "MAS.MC", "ALM.MC", "IDR.MC")

# download them into an environment ('e')
require(quantmod)
getSymbols(tk, from = "2019-12-31", env = (e <- new.env()))

# extract adjusted close column
adj <- lapply(e, Ad)
# calculate daily returns from adjusted data,
# merge into a xts matrix, and fill NA with 0
ret <- do.call(merge, c(lapply(adj, dailyReturn), fill = 0))
# cumulative returns
cumret <- cumprod(1 + ret) - 1
# set names
colnames(cumret) <- names(adj)
last(cumret)
# calculate histogram for period-to-date returns
hist(drop(last(cumret)))

I'm not sure that's the histogram you're looking for, but I hope it
gives you a start toward a solution.

Best,
Josh


On Wed, Jul 29, 2020 at 9:34 AM Brian G. Peterson <brian at braverock.com> wrote:
>
> Try a *minimal* example...
>
> I'm not going to take the time to sort through your code, especially
> with all the totally unnecessary mutates and pipes.
>
>
> cret <- rnorm(10) # dummy cumulative returns
> names(cret) <- c('a','b','c','d','e','f','g','h','i','j')
> sort(cret)
>
> You should be able to easily use this to get the order of the columns
> that you want.
>
> Regards,
>
> Brian
>
>
> --
> Brian G. Peterson
> ph: +1.773.459.4973
> im: bgpbraverock
>
> On Wed, 2020-07-29 at 15:37 +0200, Pedro p?ramo wrote:
> > Hi all,
> >
> > I have differente stocks
> >
> > AAcciona<- tq_get("ANA.MC",from = '2019-12-31',get = "stock.prices")
> > ACS<- tq_get("ACS.MC",from = '2019-12-31',get = "stock.prices")
> > Aena<- tq_get("AENA.MC",from = '2019-12-31',get = "stock.prices")
> > Amadeus<- tq_get("AMS.MC",from = '2019-12-31',get = "stock.prices")
> > ArcelorMittal<- tq_get("MTS.MC",from = '2019-12-31',get =
> > "stock.prices")
> > BBVA<- tq_get("BBVA.MC",from = '2019-12-31',get = "stock.prices")
> > Sabadell<- tq_get("SAB.MC",from = '2019-12-31',get = "stock.prices")
> > Santander<- tq_get("SAN.MC",from = '2019-12-31',get = "stock.prices")
> > Bankinter<- tq_get("BKT.MC",from = '2019-12-31',get = "stock.prices")
> >   Indra<- tq_get("IDR.MC",from = '2019-12-31',get = "stock.prices")
> > And I have applied this code to know the year to date accumulated
> > returns,
> > the thing is that I want to order them by the last observation (year
> > to
> > date) and make a plot of the 3 best/worst (bigger/lower
> > accumulated returns).
> >
> > ?Is there a way to compare and order the last observation of
> > STOCKcum_return of each stock and select the 3 top and 3 bottom so I
> > can
> > plot like worst/best without going manually?
> >
> > Many thanks in advance
> >
> > Hope I can explain
> >
> >
> > Indra_daily_returns <- Indra %>%
> >   tq_transmute(select = adjusted,           # this specifies which
> > column
> > to select
> >                mutate_fun = periodReturn,   # This specifies what to
> > do
> > with that column
> >                period = "daily",      # This argument calculates
> > Daily
> > returns
> >                col_rename = "idr_returns") # renames the column
> > Indra_cum_returns <- Indra_daily_returns %>%
> >   mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> > function
> >   mutate(cumulative_returns = cr - 1)
> >
> > AAcciona_daily_returns <- AAcciona %>%
> >   tq_transmute(select = adjusted,           # this specifies which
> > column
> > to select
> >                mutate_fun = periodReturn,   # This specifies what to
> > do
> > with that column
> >                period = "daily",      # This argument calculates
> > Daily
> > returns
> >                col_rename = "idr_returns") # renames the column
> > AAcciona_cum_returns <- AAcciona_daily_returns %>%
> >   mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> > function
> >   mutate(cumulative_returns = cr - 1)
> >
> > ACS_daily_returns <- ACS %>%
> >   tq_transmute(select = adjusted,           # this specifies which
> > column
> > to select
> >                mutate_fun = periodReturn,   # This specifies what to
> > do
> > with that column
> >                period = "daily",      # This argument calculates
> > Daily
> > returns
> >                col_rename = "idr_returns") # renames the column
> > ACS_cum_returns <- ACS_daily_returns %>%
> >   mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> > function
> >   mutate(cumulative_returns = cr - 1)
> >
> > AENA_daily_returns <- AENA %>%
> >   tq_transmute(select = adjusted,           # this specifies which
> > column
> > to select
> >                mutate_fun = periodReturn,   # This specifies what to
> > do
> > with that column
> >                period = "daily",      # This argument calculates
> > Daily
> > returns
> >                col_rename = "idr_returns") # renames the column
> > Aena_cum_returns <- Aaena_daily_returns %>%
> >   mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> > function
> >   mutate(cumulative_returns = cr - 1)
> >
> > Amadeus_daily_returns <- Amadeus %>%
> >   tq_transmute(select = adjusted,           # this specifies which
> > column
> > to select
> >                mutate_fun = periodReturn,   # This specifies what to
> > do
> > with that column
> >                period = "daily",      # This argument calculates
> > Daily
> > returns
> >                col_rename = "idr_returns") # renames the column
> > Amadeus_cum_returns <- Amadeus_daily_returns %>%
> >   mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> > function
> >   mutate(cumulative_returns = cr - 1)
> >
> > ArcerlorMittal_daily_returns <- ArcerlorMittal %>%
> >   tq_transmute(select = adjusted,           # this specifies which
> > column
> > to select
> >                mutate_fun = periodReturn,   # This specifies what to
> > do
> > with that column
> >                period = "daily",      # This argument calculates
> > Daily
> > returns
> >                col_rename = "idr_returns") # renames the column
> > ArcerlorMittal_cum_returns <- ArcerlorMittal_daily_returns %>%
> >   mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> > function
> >   mutate(cumulative_returns = cr - 1)
> >
> > BBVA_daily_returns <- BBVA %>%
> >   tq_transmute(select = adjusted,           # this specifies which
> > column
> > to select
> >                mutate_fun = periodReturn,   # This specifies what to
> > do
> > with that column
> >                period = "daily",      # This argument calculates
> > Daily
> > returns
> >                col_rename = "idr_returns") # renames the column
> > BBVA_cum_returns <- BBVA_daily_returns %>%
> >   mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> > function
> >   mutate(cumulative_returns = cr - 1)
> >
> >
> > Sabadell_daily_returns <- Sabadell %>%
> >   tq_transmute(select = adjusted,           # this specifies which
> > column
> > to select
> >                mutate_fun = periodReturn,   # This specifies what to
> > do
> > with that column
> >                period = "daily",      # This argument calculates
> > Daily
> > returns
> >                col_rename = "idr_returns") # renames the column
> > Sabadell_cum_returns <- Sabadell_daily_returns %>%
> >   mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> > function
> >   mutate(cumulative_returns = cr - 1)
> >
> > Santander_daily_returns <- Santander %>%
> >   tq_transmute(select = adjusted,           # this specifies which
> > column
> > to select
> >                mutate_fun = periodReturn,   # This specifies what to
> > do
> > with that column
> >                period = "daily",      # This argument calculates
> > Daily
> > returns
> >                col_rename = "idr_returns") # renames the column
> > Santander_cum_returns <- Santander_daily_returns %>%
> >   mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> > function
> >   mutate(cumulative_returns = cr - 1)
> >
> >
> > Bankinter_daily_returns <- Bankinter %>%
> >   tq_transmute(select = adjusted,           # this specifies which
> > column
> > to select
> >                mutate_fun = periodReturn,   # This specifies what to
> > do
> > with that column
> >                period = "daily",      # This argument calculates
> > Daily
> > returns
> >                col_rename = "idr_returns") # renames the column
> > Bankinter_cum_returns <- Bankinter_daily_returns %>%
> >   mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> > function
> >   mutate(cumulative_returns = cr - 1)
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org
> >  mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R
> > questions should go.
> >
> cret <- rnorm(10) # dummy data to represent your returns
> names(cret) <- c('a','b','c','d','e','f','g','h','i','j')
>
> sort(cret, decreasing=TRUE)
>
> You can use your column names to easily get the order you want to rearrange things.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From @@m@hhh1 @end|ng |rom gm@||@com  Sun Aug  2 10:08:31 2020
From: @@m@hhh1 @end|ng |rom gm@||@com (Sam H)
Date: Sun, 2 Aug 2020 04:08:31 -0400
Subject: [R-SIG-Finance] Problem with PortfolioAnalytics
Message-ID: <CAEtT+h3xbeoN4ghpVtQ3CMMMWfvp4djaWy23qpB6Rsec901-ZA@mail.gmail.com>

Hi,

I have come across an issue in PortfolioAnalytics. It might be that my data
(downloaded from Yahoo Finance) simply has issues but I guess this should
not lead Portfolioanalytics to fail.

Error in max_sr_opt(R = R, constraints = constraints, moments = moments,  :
  Objective function failed with message
 Error in optimize(f = sharpe_obj_fun, R = R, constraints = constraints,  :
  'xmin' not less than 'xmax'

Is this the issue of POrtfolioAnalytics or ROI or is this the issue in my
data? What is the issue and how to solve it or create a workaround?

Below is reproducible code that shows the problem:
library(PortfolioAnalytics)

returnsText <- '
"date","NEAR","MINT"
"2014-07-01",0.000161110006774212,-9.86193284648884e-05
"2014-07-02",-0.000218949044995531,0.000197258111483523
"2014-07-03",-0.000378267533203247,9.86096047428386e-05
"2014-07-07",0,-9.85998818474609e-05
"2014-07-08",-0.000199163513616485,9.86096047428386e-05
"2014-07-09",0.000197211155088084,0.000197199763695144
"2014-07-10",0.000201155547844056,0
"2014-07-11",0.000203106333835912,0.000197160883615322
"2014-07-14",-0.000203065090029986,0
"2014-07-15",0.000509757069411476,0.000169524935917709
"2014-07-16",-0.000111452544867996,-0.00016949620208484
"2014-07-17",-0.000597133756883639,0.000394244036637348
"2014-07-18",0.000597490538653656,-0.000492610837184437
"2014-07-21",0,9.85707246621281e-05
"2014-07-22",-0.000199044586359554,0.000295683027205396
"2014-07-23",-3.78259998102815e-05,-0.000394127499825259
"2014-07-24",3.78274306707116e-05,0
"2014-07-25",-0.000597252636787449,-0.000197141449324145
"2014-07-28",0.000398406373049998,0.000295770482607871
"2014-07-29",0.00019912385541021,0.000295683027205396
"2014-07-30",0,-0.000197063750457582
"2014-07-31",0,0.000502611610304848
"2014-08-01",0.00054833764653095,0.000197122017793872
"2014-08-04",-0.000199123854866534,-0.000689791091990632
"2014-08-05",-0.000300736903335763,0.000493048023763265
"2014-08-06",-9.76194805905051e-05,0
"2014-08-07",0.000203227733818867,0
"2014-08-08",0.000195218346190407,-0.000394244037766889
"2014-08-11",-0.000131447918101602,0.000197199763714462
"2014-08-12",0.000131465198928149,0.000197160883634862
"2014-08-13",0.00019916351307292,0.000197122017793872
"2014-08-14",-1.99123714428318e-06,0
"2014-08-15",0.000199124251370142,-0.000492707922539193
"2014-08-18",-0.000197093764112588,9.85901608789863e-05
"2014-08-19",-0.000199123854866534,0
"2014-08-20",-0.000199163513073031,9.85804418176528e-05
"2014-08-21",0,0.000394282897597575
"2014-08-22",2.78884462789897e-05,-0.000394127499864894
"2014-08-25",-0.000426282932069477,-9.85707246720091e-05
"2014-08-26",0.000398565165061537,0.000394321766179928
"2014-08-27",0.000199203187079666,9.85415847256643e-05
"2014-08-28",-1.19498111355032e-05,-0.000295595624626332
"2014-08-29",0.000211115847003063,0.000413956238783486
"2014-09-02",-0.000876005574944494,-0.000492902208474866
"2014-09-03",0.000516553649691165,0.000197258111695131
"2014-09-04",0.00038073671596095,0.000295828814544263
"2014-09-05",-0.00029889409268935,3.5488959045038e-05
"2014-09-08",-0.000597966911962122,-3.5487699623471e-05
"2014-09-09",0.000398883126886407,-9.85804419127989e-05
"2014-09-10",5.58213729657808e-05,-0.000197180321948931
"2014-09-11",-0.000454520083608245,9.86096048480878e-05
"2014-09-12",0,9.85998819527101e-05
"2014-09-15",0,0.000394360642808511
"2014-09-16",-1.99441482195972e-06,0.000197102591354748
"2014-09-17",0.000201436380012687,-0.000183269286988752
"2014-09-18",-0.000398803588875118,0.000183302880776948
"2014-09-19",0.000797925393260623,-0.000197063749579174
"2014-09-22",-0.000797289215949459,-9.85512962219381e-05
"2014-09-23",0,0.000295683027522475
"2014-09-24",0.000797925393260623,-0.000394127500247143
"2014-09-25",-0.000199322303987337,0.000492853622747313
"2014-09-26",0.000398724082577573,-9.85221677600734e-05
"2014-09-29",0.00019928258471813,-9.85318742451335e-05
"2014-09-30",-6.37577209552376e-05,-0.000650374458294301
"2014-10-01",7.00981129100331e-05,0.000986679822432501
"2014-10-02",0.000388755980016198,-9.85707241716316e-05
"2014-10-03",-0.000189320340130417,-0.000690063092486648
"2014-10-06",-0.000346820809271176,0.000493242577261688
"2014-10-07",0.000346941135676682,0.000394399526516764
"2014-10-08",0.000201315527737389,-9.85610089417888e-05
"2014-10-09",3.38779711579473e-05,-0.000492853623035749
"2014-10-10",-0.000235145012875138,-0.000197238658130816
"2014-10-13",0.000199322305363792,0.000197277568893872
"2014-10-14",0.000398565165606435,0.000197238659219723
"2014-10-15",0.00119521912191933,0.000394399526516764
"2014-10-16",-0.00099482689953001,-0.000591366055827103
"2014-10-17",-0.000328619796307605,-0.000690335305635781
"2014-10-20",-0.000468188112956458,0.000789499655275971
"2014-10-21",0.00139525613096603,9.86096042523421e-05
"2014-10-22",-0.000199044587183228,-0.000492999408962524
"2014-10-23",-0.000597252637073331,-0.000394594061155717
"2014-10-24",0.000398406374703786,0.000394749827093088
"2014-10-27",0,0
"2014-10-28",-0.000388291518670814,0
"2014-10-29",0.000189241143167429,-0.000394594061155717
"2014-10-30",-0.000231029674647831,0.00029606237059232
"2014-10-31",-0.000167336011627328,-1.97316490654353e-05
"2014-11-03",-0.000122952778378926,0
"2014-11-04",0.000201396213098226,0
"2014-11-05",0.000199362042857754,-9.87166832120412e-05
"2014-11-06",-0.000199322305555638,-9.87264291576473e-05
"2014-11-07",-0.000199362040665285,0.000394944708111522
"2014-11-10",0.000199401793813836,9.86971960028615e-05
"2014-11-11",-0.000199362040665285,0
"2014-11-12",0,-0.000234876146634422
"2014-11-13",0.000187437687632297,0.000333641968091047
"2014-11-14",-0.000187402561329542,-0.000197355436238444
"2014-11-17",-6.38085750730433e-05,0.000394788787279277
"2014-11-18",0.000662056203570183,-0.000197316495844313
"2014-11-19",-0.000398565165992459,0.000197355437327573
"2014-11-20",0.000199362042857754,-0.000118389897071025
"2014-11-21",-0.000398644608919363,-0.000177605873436515
"2014-11-24",0,0.000157899931938488
"2014-11-25",0.000598205383634198,-0.000157875003486185
"2014-11-26",-0.000334794738732325,9.86874569168794e-05
"2014-11-28",0.000334906863788342,0.000197355437327573
"2014-12-01",0.000486389000651677,-9.87166831345476e-05
"2014-12-02",-0.000396652177151791,-9.87264290801537e-05
"2014-12-03",-0.000199401794614751,0
"2014-12-04",0,0.000296208530850661
"2014-12-05",-0.000598324690861629,-0.000493534695564235
"2014-12-08",0.000199560965873813,0
"2014-12-09",0,0.000296267035399866
"2014-12-10",-0.000251396648437763,0.000208727416499466
"2014-12-11",-0.00034725409780012,-0.000691562932129686
"2014-12-12",0.00016170892356282,0.000790904597333109
"2014-12-15",0.00036528331564889,-0.00138298923224633
"2014-12-16",-0.000127702709234789,0.000494608763774496
"2014-12-17",-0.000556775094721962,-9.88728487232304e-05
"2014-12-18",-0.000241603287466252,-0.000395530505390096
"2014-12-19",-0.000998601957253209,-0.000593530518055996
"2014-12-22",0.000399840063971757,0.000593883005743923
"2014-12-23",0.000399680255792623,-0.000197843506382078
"2014-12-24",3.72952466447529e-05,-0.000296823983180428
"2014-12-26",0,0.000197941408847546
"2014-12-29",0.000799520286848265,0.000949930734458038
"2014-12-30",0.000419412822907139,-0.000494608764139093
"2014-12-31",-0.00141742029524627,0.000197941409211477
"2015-01-02",0,9.89511180820024e-05
"2015-01-05",0.000599760094678548,9.89413277270312e-05
"2015-01-06",0.000965034964814926,-0.000197863078618354
"2015-01-07",-0.000864300783189664,0.000395804472327788
"2015-01-08",0.00089901108807422,-0.00108803165110805
"2015-01-09",0.000199600798706845,0.000495098524277537
"2015-01-12",0,-0.000197941409211366
"2015-01-13",0,0.000593941793309849
"2015-01-14",0.000399121930165558,-0.000296794617927421
"2015-01-15",-0.000398962695404403,9.89609103747568e-05
"2015-01-16",0.000399121930165558,-0.000692657826573684
"2015-01-20",-0.00099740674179738,0.00108921675341067
"2015-01-21",0.000796725239052831,-0.000791295746260245
"2015-01-22",-0.000995612520915179,0.000296970896654924
"2015-01-23",0.000599161175268037,0
"2015-01-26",0,0.000197921820749514
"2015-01-27",-0.000598802396120535,0
"2015-01-28",0.00032354703512727,0.000191946175833735
"2015-01-29",-0.000119793477545094,-9.29869996078025e-05
"2015-01-30",0.000539135227258791,0.000613375543934369
"2015-02-02",0.000305924098682908,-0.000395726156791842
"2015-02-03",0.000399281293311349,-0.000197941409533775
"2015-02-04",-0.000261424864042237,0.000296970897138538
"2015-02-05",6.18800764327077e-05,-9.89609105357392e-05
"2015-02-06",-0.000698602795423664,-0.0010886777513458
"2015-02-09",9.9870169238736e-05,0.00108986426232005
"2015-02-10",0.000399440782543614,0.000197941408444091
"2015-02-11",0.000199640647751131,-0.00029685335364027
"2015-02-12",0,0.0003959220026577
"2015-02-13",-0.000199600799318245,-9.89413278882356e-05
"2015-02-17",-0.000588939907798625,0.000197902236486414
"2015-02-18",0.000389528671218109,0.000296794618410701
"2015-02-19",0.000798722044007327,0.000296706557501025
"2015-02-20",-0.000458898644046579,-0.000148309274416336
"2015-02-23",0.000259496576516804,-4.94437577732709e-05
"2015-02-24",0.000199560966790413,0.000197784810317403
"2015-02-25",0.000399042298123486,-0.000296618548832561
"2015-02-26",-0.000199441562347635,0.000494510929168523
"2015-02-27",0.000199481347219033,-0.000237247924962269
"2015-03-02",-0.00101557638576522,-9.89315392826429e-05
"2015-03-03",0.000999000999640121,9.89413277003859e-05
"2015-03-04",0.000199600798092892,0
"2015-03-05",-8.78068262490928e-05,0.000296794618936502
"2015-03-06",-0.000327308723116593,-9.89021856461214e-05
"2015-03-09",0.000397291231692742,0.000989119682560435
"2015-03-10",-0.000161647285065403,9.88142302440487e-05
"2015-03-11",0.000578830761837512,-0.000592826796305901
"2015-03-12",-0.000398962696368299,-0.000197726149099076
"2015-03-13",0.000199560965565171,0.000395530504921915
"2015-03-16",0,-0.000247108827041043
"2015-03-17",0,0.000247169904906253
"2015-03-18",-0.000199521148931958,0.000395374123483005
"2015-03-19",0,-0.00069163126217564
"2015-03-20",-9.57892632084123e-05,9.88728494233371e-05
"2015-03-23",-0.000103781643523648,0.000790904597484321
"2015-03-24",0.000399201596186005,-0.000197569890164728
"2015-03-25",0,-9.88044669567589e-05
"2015-03-26",0.000399042297863694,-0.000494071145785369
"2015-03-27",-0.000199441563312086,0.000395452298198373
"2015-03-30",0.000199481348184039,0.000197647989834904
"2015-03-31",0.000199441563312197,-4.94022334783795e-05
"2015-04-01",-0.00011058823470167,0.000405342613665427
"2015-04-02",-0.000199560966330781,-9.88239946962954e-05
"2015-04-06",0.000399201597718113,0.000197667523686773
"2015-04-07",-0.000199521149697346,-0.000494071146310504
"2015-04-08",0,0.00019673751829985
"2015-04-09",0.000798243863135983,-0.000295542448883968
"2015-04-10",-0.000199401792886245,0.000296618548151217
"2015-04-13",-0.000199441564076919,0.00069190471536329
"2015-04-14",0.000797925393610566,-0.000197550375806266
"2015-04-15",-0.000364759816298466,0.000296384113416481
"2015-04-16",-3.38971572640956e-05,9.87654323292286e-05
"2015-04-17",-0.000598205383029238,-0.000493778392323452
"2015-04-20",0.000598563446905231,9.88044661922594e-05
"2015-04-21",0,-0.000395178818250796
"2015-04-22",-0.000199401792886245,9.98220990706677e-05
"2015-04-23",0,0.000493131245507206
"2015-04-24",0.000199441561891334,9.87751868171127e-05
"2015-04-27",-0.000199401792886245,-0.000197530863572326
"2015-04-28",0.000398883125968252,-9.87849454047174e-05
"2015-04-29",-0.000713716108378337,-0.000197589408582277
"2015-04-30",0.000714225862881612,0.0005928853747037
"2015-05-01",0.000282037480494379,-0.000988142292275507
"2015-05-04",-0.000199441562950597,0.000494559842176834
"2015-05-05",0.000359066425643206,0.000197726148371213
"2015-05-06",-0.000159527796745107,0
"2015-05-07",0.000199441562950486,0.000197687061556096
"2015-05-08",0,0.000395295978211863
"2015-05-11",9.97008969727542e-05,-0.000493924726307049
"2015-05-12",9.96909598782736e-05,0.000296501285100392
"2015-05-13",-0.000797448167551118,0.000790435728391659
"2015-05-14",-0.000399042297140717,0
"2015-05-15",0.000399201595462362,-0.000276434001625692
"2015-05-18",0,7.90029824320193e-05
"2015-05-19",-7.98084581170588e-05,0
"2015-05-20",0.000478888976833902,0.000789967413455273
"2015-05-21",0,-0.000690675875202995
"2015-05-22",0,9.87361770221629e-05
"2015-05-26",0.000199441562950486,0
"2015-05-27",0.000199401796128873,-9.87264291519852e-05
"2015-05-28",-0.000223285487700342,0.000394944707003964
"2015-05-29",2.39287876717675e-05,0.000138176075921148
"2015-06-01",0.000503649054035327,-0.000197491852779952
"2015-06-02",-0.000398883127633032,-0.000395061729201562
"2015-06-03",9.97605752641739e-05,-9.88044656212717e-05
"2015-06-04",-9.97506240845158e-05,0.000395256916718267
"2015-06-05",0,-0.000197550374664623
"2015-06-08",-0.000798084597746107,0.000493973522400326
"2015-06-09",0.000996405751629847,-0.000197491852779952
"2015-06-10",1.99481651663724e-06,9.87654317581299e-05
"2015-06-11",-0.000199481347597286,0
"2015-06-12",0.000199521148344761,-0.000395022713528315
"2015-06-15",-0.000598444044974777,0.000296384113874115
"2015-06-16",0.000598802394702114,0.00019753086351626
"2015-06-17",-0.000199481347597286,-0.00039498370664437
"2015-06-18",-0.00059856344721787,0
"2015-06-19",0.000798562585937024,0.000395139780419385
"2015-06-22",0.000199481349780317,-0.00039498370664437
"2015-06-23",-0.00059832469254073,-9.87849448337297e-05
"2015-06-24",-0.000399121929956281,0
"2015-06-25",-0.000199640648122834,-9.87947053479044e-05
"2015-06-26",0.000998402555793199,0.000197608932327231
"2015-06-29",-0.000173548771514542,9.87849448337297e-05
"2015-06-30",0.00037309487145154,-0.00018767285625676
'

returns <- as.xts(read.zoo(file=textConnection(returnsText),
index.column="date", read=read.csv))

portfolioSpec <- portfolio.spec(assets=colnames(returns))
portfolioSpec <- add.constraint(portfolio=portfolioSpec,
type="full_investment", enabled=TRUE)
portfolioSpec <- add.constraint(portfolio=portfolioSpec, type="box",
min=0.0, max=1.0, enabled=TRUE)
portfolioSpec <- add.objective(portfolio=portfolioSpec, type="return",
name="mean", enabled=TRUE, multiplier=-1)
portfolioSpec <- add.objective(portfolio=portfolioSpec, type="risk",
name="StdDev", enabled=TRUE, multiplier=1, risk_aversion=1e-9)

maxSROpt <- optimize.portfolio(R=returns,
  portfolio=portfolioSpec,
  optimize_method="ROI",
  maxSR=TRUE,
  trace=TRUE)
This is the output in R when I run the code above:
> library(PortfolioAnalytics)
Loading required package: zoo

Attaching package: ?zoo?

The following objects are masked from ?package:base?:

    as.Date, as.Date.numeric

Loading required package: xts
Loading required package: foreach
Loading required package: PerformanceAnalytics

Attaching package: ?PerformanceAnalytics?

The following object is masked from ?package:graphics?:

    legend

>
> returnsText <- '
+ "date","NEAR","MINT"
+ "2014-07-01",0.000161110006774212,-9.86193284648884e-05
+ "2014-07-02",-0.000218949044995531,0.000197258111483523
+ "2014-07-03",-0.000378267533203247,9.86096047428386e-05
+ "2014-07-07",0,-9.85998818474609e-05
+ "2014-07-08",-0.000199163513616485,9.86096047428386e-05
+ "2014-07-09",0.000197211155088084,0.000197199763695144
+ "2014-07-10",0.000201155547844056,0
+ "2014-07-11",0.000203106333835912,0.000197160883615322
+ "2014-07-14",-0.000203065090029986,0
+ "2014-07-15",0.000509757069411476,0.000169524935917709
+ "2014-07-16",-0.000111452544867996,-0.00016949620208484
+ "2014-07-17",-0.000597133756883639,0.000394244036637348
+ "2014-07-18",0.000597490538653656,-0.000492610837184437
+ "2014-07-21",0,9.85707246621281e-05
+ "2014-07-22",-0.000199044586359554,0.000295683027205396
+ "2014-07-23",-3.78259998102815e-05,-0.000394127499825259
+ "2014-07-24",3.78274306707116e-05,0
+ "2014-07-25",-0.000597252636787449,-0.000197141449324145
+ "2014-07-28",0.000398406373049998,0.000295770482607871
+ "2014-07-29",0.00019912385541021,0.000295683027205396
+ "2014-07-30",0,-0.000197063750457582
+ "2014-07-31",0,0.000502611610304848
+ "2014-08-01",0.00054833764653095,0.000197122017793872
+ "2014-08-04",-0.000199123854866534,-0.000689791091990632
+ "2014-08-05",-0.000300736903335763,0.000493048023763265
+ "2014-08-06",-9.76194805905051e-05,0
+ "2014-08-07",0.000203227733818867,0
+ "2014-08-08",0.000195218346190407,-0.000394244037766889
+ "2014-08-11",-0.000131447918101602,0.000197199763714462
+ "2014-08-12",0.000131465198928149,0.000197160883634862
+ "2014-08-13",0.00019916351307292,0.000197122017793872
+ "2014-08-14",-1.99123714428318e-06,0
+ "2014-08-15",0.000199124251370142,-0.000492707922539193
+ "2014-08-18",-0.000197093764112588,9.85901608789863e-05
+ "2014-08-19",-0.000199123854866534,0
+ "2014-08-20",-0.000199163513073031,9.85804418176528e-05
+ "2014-08-21",0,0.000394282897597575
+ "2014-08-22",2.78884462789897e-05,-0.000394127499864894
+ "2014-08-25",-0.000426282932069477,-9.85707246720091e-05
+ "2014-08-26",0.000398565165061537,0.000394321766179928
+ "2014-08-27",0.000199203187079666,9.85415847256643e-05
+ "2014-08-28",-1.19498111355032e-05,-0.000295595624626332
+ "2014-08-29",0.000211115847003063,0.000413956238783486
+ "2014-09-02",-0.000876005574944494,-0.000492902208474866
+ "2014-09-03",0.000516553649691165,0.000197258111695131
+ "2014-09-04",0.00038073671596095,0.000295828814544263
+ "2014-09-05",-0.00029889409268935,3.5488959045038e-05
+ "2014-09-08",-0.000597966911962122,-3.5487699623471e-05
+ "2014-09-09",0.000398883126886407,-9.85804419127989e-05
+ "2014-09-10",5.58213729657808e-05,-0.000197180321948931
+ "2014-09-11",-0.000454520083608245,9.86096048480878e-05
+ "2014-09-12",0,9.85998819527101e-05
+ "2014-09-15",0,0.000394360642808511
+ "2014-09-16",-1.99441482195972e-06,0.000197102591354748
+ "2014-09-17",0.000201436380012687,-0.000183269286988752
+ "2014-09-18",-0.000398803588875118,0.000183302880776948
+ "2014-09-19",0.000797925393260623,-0.000197063749579174
+ "2014-09-22",-0.000797289215949459,-9.85512962219381e-05
+ "2014-09-23",0,0.000295683027522475
+ "2014-09-24",0.000797925393260623,-0.000394127500247143
+ "2014-09-25",-0.000199322303987337,0.000492853622747313
+ "2014-09-26",0.000398724082577573,-9.85221677600734e-05
+ "2014-09-29",0.00019928258471813,-9.85318742451335e-05
+ "2014-09-30",-6.37577209552376e-05,-0.000650374458294301
+ "2014-10-01",7.00981129100331e-05,0.000986679822432501
+ "2014-10-02",0.000388755980016198,-9.85707241716316e-05
+ "2014-10-03",-0.000189320340130417,-0.000690063092486648
+ "2014-10-06",-0.000346820809271176,0.000493242577261688
+ "2014-10-07",0.000346941135676682,0.000394399526516764
+ "2014-10-08",0.000201315527737389,-9.85610089417888e-05
+ "2014-10-09",3.38779711579473e-05,-0.000492853623035749
+ "2014-10-10",-0.000235145012875138,-0.000197238658130816
+ "2014-10-13",0.000199322305363792,0.000197277568893872
+ "2014-10-14",0.000398565165606435,0.000197238659219723
+ "2014-10-15",0.00119521912191933,0.000394399526516764
+ "2014-10-16",-0.00099482689953001,-0.000591366055827103
+ "2014-10-17",-0.000328619796307605,-0.000690335305635781
+ "2014-10-20",-0.000468188112956458,0.000789499655275971
+ "2014-10-21",0.00139525613096603,9.86096042523421e-05
+ "2014-10-22",-0.000199044587183228,-0.000492999408962524
+ "2014-10-23",-0.000597252637073331,-0.000394594061155717
+ "2014-10-24",0.000398406374703786,0.000394749827093088
+ "2014-10-27",0,0
+ "2014-10-28",-0.000388291518670814,0
+ "2014-10-29",0.000189241143167429,-0.000394594061155717
+ "2014-10-30",-0.000231029674647831,0.00029606237059232
+ "2014-10-31",-0.000167336011627328,-1.97316490654353e-05
+ "2014-11-03",-0.000122952778378926,0
+ "2014-11-04",0.000201396213098226,0
+ "2014-11-05",0.000199362042857754,-9.87166832120412e-05
+ "2014-11-06",-0.000199322305555638,-9.87264291576473e-05
+ "2014-11-07",-0.000199362040665285,0.000394944708111522
+ "2014-11-10",0.000199401793813836,9.86971960028615e-05
+ "2014-11-11",-0.000199362040665285,0
+ "2014-11-12",0,-0.000234876146634422
+ "2014-11-13",0.000187437687632297,0.000333641968091047
+ "2014-11-14",-0.000187402561329542,-0.000197355436238444
+ "2014-11-17",-6.38085750730433e-05,0.000394788787279277
+ "2014-11-18",0.000662056203570183,-0.000197316495844313
+ "2014-11-19",-0.000398565165992459,0.000197355437327573
+ "2014-11-20",0.000199362042857754,-0.000118389897071025
+ "2014-11-21",-0.000398644608919363,-0.000177605873436515
+ "2014-11-24",0,0.000157899931938488
+ "2014-11-25",0.000598205383634198,-0.000157875003486185
+ "2014-11-26",-0.000334794738732325,9.86874569168794e-05
+ "2014-11-28",0.000334906863788342,0.000197355437327573
+ "2014-12-01",0.000486389000651677,-9.87166831345476e-05
+ "2014-12-02",-0.000396652177151791,-9.87264290801537e-05
+ "2014-12-03",-0.000199401794614751,0
+ "2014-12-04",0,0.000296208530850661
+ "2014-12-05",-0.000598324690861629,-0.000493534695564235
+ "2014-12-08",0.000199560965873813,0
+ "2014-12-09",0,0.000296267035399866
+ "2014-12-10",-0.000251396648437763,0.000208727416499466
+ "2014-12-11",-0.00034725409780012,-0.000691562932129686
+ "2014-12-12",0.00016170892356282,0.000790904597333109
+ "2014-12-15",0.00036528331564889,-0.00138298923224633
+ "2014-12-16",-0.000127702709234789,0.000494608763774496
+ "2014-12-17",-0.000556775094721962,-9.88728487232304e-05
+ "2014-12-18",-0.000241603287466252,-0.000395530505390096
+ "2014-12-19",-0.000998601957253209,-0.000593530518055996
+ "2014-12-22",0.000399840063971757,0.000593883005743923
+ "2014-12-23",0.000399680255792623,-0.000197843506382078
+ "2014-12-24",3.72952466447529e-05,-0.000296823983180428
+ "2014-12-26",0,0.000197941408847546
+ "2014-12-29",0.000799520286848265,0.000949930734458038
+ "2014-12-30",0.000419412822907139,-0.000494608764139093
+ "2014-12-31",-0.00141742029524627,0.000197941409211477
+ "2015-01-02",0,9.89511180820024e-05
+ "2015-01-05",0.000599760094678548,9.89413277270312e-05
+ "2015-01-06",0.000965034964814926,-0.000197863078618354
+ "2015-01-07",-0.000864300783189664,0.000395804472327788
+ "2015-01-08",0.00089901108807422,-0.00108803165110805
+ "2015-01-09",0.000199600798706845,0.000495098524277537
+ "2015-01-12",0,-0.000197941409211366
+ "2015-01-13",0,0.000593941793309849
+ "2015-01-14",0.000399121930165558,-0.000296794617927421
+ "2015-01-15",-0.000398962695404403,9.89609103747568e-05
+ "2015-01-16",0.000399121930165558,-0.000692657826573684
+ "2015-01-20",-0.00099740674179738,0.00108921675341067
+ "2015-01-21",0.000796725239052831,-0.000791295746260245
+ "2015-01-22",-0.000995612520915179,0.000296970896654924
+ "2015-01-23",0.000599161175268037,0
+ "2015-01-26",0,0.000197921820749514
+ "2015-01-27",-0.000598802396120535,0
+ "2015-01-28",0.00032354703512727,0.000191946175833735
+ "2015-01-29",-0.000119793477545094,-9.29869996078025e-05
+ "2015-01-30",0.000539135227258791,0.000613375543934369
+ "2015-02-02",0.000305924098682908,-0.000395726156791842
+ "2015-02-03",0.000399281293311349,-0.000197941409533775
+ "2015-02-04",-0.000261424864042237,0.000296970897138538
+ "2015-02-05",6.18800764327077e-05,-9.89609105357392e-05
+ "2015-02-06",-0.000698602795423664,-0.0010886777513458
+ "2015-02-09",9.9870169238736e-05,0.00108986426232005
+ "2015-02-10",0.000399440782543614,0.000197941408444091
+ "2015-02-11",0.000199640647751131,-0.00029685335364027
+ "2015-02-12",0,0.0003959220026577
+ "2015-02-13",-0.000199600799318245,-9.89413278882356e-05
+ "2015-02-17",-0.000588939907798625,0.000197902236486414
+ "2015-02-18",0.000389528671218109,0.000296794618410701
+ "2015-02-19",0.000798722044007327,0.000296706557501025
+ "2015-02-20",-0.000458898644046579,-0.000148309274416336
+ "2015-02-23",0.000259496576516804,-4.94437577732709e-05
+ "2015-02-24",0.000199560966790413,0.000197784810317403
+ "2015-02-25",0.000399042298123486,-0.000296618548832561
+ "2015-02-26",-0.000199441562347635,0.000494510929168523
+ "2015-02-27",0.000199481347219033,-0.000237247924962269
+ "2015-03-02",-0.00101557638576522,-9.89315392826429e-05
+ "2015-03-03",0.000999000999640121,9.89413277003859e-05
+ "2015-03-04",0.000199600798092892,0
+ "2015-03-05",-8.78068262490928e-05,0.000296794618936502
+ "2015-03-06",-0.000327308723116593,-9.89021856461214e-05
+ "2015-03-09",0.000397291231692742,0.000989119682560435
+ "2015-03-10",-0.000161647285065403,9.88142302440487e-05
+ "2015-03-11",0.000578830761837512,-0.000592826796305901
+ "2015-03-12",-0.000398962696368299,-0.000197726149099076
+ "2015-03-13",0.000199560965565171,0.000395530504921915
+ "2015-03-16",0,-0.000247108827041043
+ "2015-03-17",0,0.000247169904906253
+ "2015-03-18",-0.000199521148931958,0.000395374123483005
+ "2015-03-19",0,-0.00069163126217564
+ "2015-03-20",-9.57892632084123e-05,9.88728494233371e-05
+ "2015-03-23",-0.000103781643523648,0.000790904597484321
+ "2015-03-24",0.000399201596186005,-0.000197569890164728
+ "2015-03-25",0,-9.88044669567589e-05
+ "2015-03-26",0.000399042297863694,-0.000494071145785369
+ "2015-03-27",-0.000199441563312086,0.000395452298198373
+ "2015-03-30",0.000199481348184039,0.000197647989834904
+ "2015-03-31",0.000199441563312197,-4.94022334783795e-05
+ "2015-04-01",-0.00011058823470167,0.000405342613665427
+ "2015-04-02",-0.000199560966330781,-9.88239946962954e-05
+ "2015-04-06",0.000399201597718113,0.000197667523686773
+ "2015-04-07",-0.000199521149697346,-0.000494071146310504
+ "2015-04-08",0,0.00019673751829985
+ "2015-04-09",0.000798243863135983,-0.000295542448883968
+ "2015-04-10",-0.000199401792886245,0.000296618548151217
+ "2015-04-13",-0.000199441564076919,0.00069190471536329
+ "2015-04-14",0.000797925393610566,-0.000197550375806266
+ "2015-04-15",-0.000364759816298466,0.000296384113416481
+ "2015-04-16",-3.38971572640956e-05,9.87654323292286e-05
+ "2015-04-17",-0.000598205383029238,-0.000493778392323452
+ "2015-04-20",0.000598563446905231,9.88044661922594e-05
+ "2015-04-21",0,-0.000395178818250796
+ "2015-04-22",-0.000199401792886245,9.98220990706677e-05
+ "2015-04-23",0,0.000493131245507206
+ "2015-04-24",0.000199441561891334,9.87751868171127e-05
+ "2015-04-27",-0.000199401792886245,-0.000197530863572326
+ "2015-04-28",0.000398883125968252,-9.87849454047174e-05
+ "2015-04-29",-0.000713716108378337,-0.000197589408582277
+ "2015-04-30",0.000714225862881612,0.0005928853747037
+ "2015-05-01",0.000282037480494379,-0.000988142292275507
+ "2015-05-04",-0.000199441562950597,0.000494559842176834
+ "2015-05-05",0.000359066425643206,0.000197726148371213
+ "2015-05-06",-0.000159527796745107,0
+ "2015-05-07",0.000199441562950486,0.000197687061556096
+ "2015-05-08",0,0.000395295978211863
+ "2015-05-11",9.97008969727542e-05,-0.000493924726307049
+ "2015-05-12",9.96909598782736e-05,0.000296501285100392
+ "2015-05-13",-0.000797448167551118,0.000790435728391659
+ "2015-05-14",-0.000399042297140717,0
+ "2015-05-15",0.000399201595462362,-0.000276434001625692
+ "2015-05-18",0,7.90029824320193e-05
+ "2015-05-19",-7.98084581170588e-05,0
+ "2015-05-20",0.000478888976833902,0.000789967413455273
+ "2015-05-21",0,-0.000690675875202995
+ "2015-05-22",0,9.87361770221629e-05
+ "2015-05-26",0.000199441562950486,0
+ "2015-05-27",0.000199401796128873,-9.87264291519852e-05
+ "2015-05-28",-0.000223285487700342,0.000394944707003964
+ "2015-05-29",2.39287876717675e-05,0.000138176075921148
+ "2015-06-01",0.000503649054035327,-0.000197491852779952
+ "2015-06-02",-0.000398883127633032,-0.000395061729201562
+ "2015-06-03",9.97605752641739e-05,-9.88044656212717e-05
+ "2015-06-04",-9.97506240845158e-05,0.000395256916718267
+ "2015-06-05",0,-0.000197550374664623
+ "2015-06-08",-0.000798084597746107,0.000493973522400326
+ "2015-06-09",0.000996405751629847,-0.000197491852779952
+ "2015-06-10",1.99481651663724e-06,9.87654317581299e-05
+ "2015-06-11",-0.000199481347597286,0
+ "2015-06-12",0.000199521148344761,-0.000395022713528315
+ "2015-06-15",-0.000598444044974777,0.000296384113874115
+ "2015-06-16",0.000598802394702114,0.00019753086351626
+ "2015-06-17",-0.000199481347597286,-0.00039498370664437
+ "2015-06-18",-0.00059856344721787,0
+ "2015-06-19",0.000798562585937024,0.000395139780419385
+ "2015-06-22",0.000199481349780317,-0.00039498370664437
+ "2015-06-23",-0.00059832469254073,-9.87849448337297e-05
+ "2015-06-24",-0.000399121929956281,0
+ "2015-06-25",-0.000199640648122834,-9.87947053479044e-05
+ "2015-06-26",0.000998402555793199,0.000197608932327231
+ "2015-06-29",-0.000173548771514542,9.87849448337297e-05
+ "2015-06-30",0.00037309487145154,-0.00018767285625676
+ '
>
> returns <- as.xts(read.zoo(file=textConnection(returnsText),
index.column="date", read=read.csv))
>
> portfolioSpec <- portfolio.spec(assets=colnames(returns))
> portfolioSpec <- add.constraint(portfolio=portfolioSpec,
type="full_investment", enabled=TRUE)
> portfolioSpec <- add.constraint(portfolio=portfolioSpec, type="box",
min=0.0, max=1.0, enabled=TRUE)
> portfolioSpec <- add.objective(portfolio=portfolioSpec, type="return",
name="mean", enabled=TRUE, multiplier=-1)
> portfolioSpec <- add.objective(portfolio=portfolioSpec, type="risk",
name="StdDev", enabled=TRUE, multiplier=1, risk_aversion=1e-9)
>
> maxSROpt <- optimize.portfolio(R=returns,
+   portfolio=portfolioSpec,
+   optimize_method="ROI",
+   maxSR=TRUE,
+   trace=TRUE)
Registered S3 method overwritten by 'ROI':
  method           from
  print.constraint PortfolioAnalytics
Error in max_sr_opt(R = R, constraints = constraints, moments = moments,  :
  Objective function failed with message
 Error in optimize(f = sharpe_obj_fun, R = R, constraints = constraints,  :
  'xmin' not less than 'xmax'

My sessionInfo():
> sessionInfo()
R version 4.0.2 (2020-06-22)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 18.04.4 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
LAPACK: /usr/lib/x86_64-linux-gnu/openblas/liblapack.so.3

locale:
 [1] LC_CTYPE=en_US.UTF-8          LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8           LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8       LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8          LC_NAME=en_US.UTF-8
 [9] LC_ADDRESS=en_US.UTF-8        LC_TELEPHONE=en_US.UTF-8
[11] LC_MEASUREMENT=en_US.UTF-8    LC_IDENTIFICATION=en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] PortfolioAnalytics_1.1.0   PerformanceAnalytics_2.0.4
[3] foreach_1.5.0              xts_0.12-0.1
[5] zoo_1.8-8                  rj_4.0.1-4

loaded via a namespace (and not attached):
 [1] rj.gd_4.0.1-3         quadprog_1.5-8        lattice_0.20-41
 [4] codetools_0.2-16      slam_0.1-47           grid_4.0.2
 [7] ROI.plugin.glpk_0.3-0 registry_0.5-1        iterators_1.0.12
[10] tools_4.0.2           ROI_0.3-3             numDeriv_2016.8-1.1
[13] compiler_4.0.2        Rglpk_0.6-4

-- 
Best regards,
Sam

	[[alternative HTML version deleted]]


From percent||101 @end|ng |rom gm@||@com  Mon Aug  3 22:15:07 2020
From: percent||101 @end|ng |rom gm@||@com (=?UTF-8?Q?Pedro_p=C3=A1ramo?=)
Date: Mon, 3 Aug 2020 22:15:07 +0200
Subject: [R-SIG-Finance] Bollinger Band
Message-ID: <CAB-TgNsTegqvGmnL6dxaEqpaNehmviW2zWiZahMBNgparUE6OA@mail.gmail.com>

Hi all,

I have this code that plots BB, I want both this:
Add a main title specified by me up on the default title that adds IBEX and
the date.
On the other hand, I would like to omit the legend but extract Upper and
Lower bands in two different values to use latter and add like the title a
"row" below the plot to add a comment o "sub main title" just below the
plot and say "attention to the lower band" XXX (extracted value)

Last question, just below the graph there are some small boxes on a more or
less row, on grey color, up on the dates but below the graph ?What are this
grey boxes? ?Can I omit?

Many thanks in advance.
I attach and example of what I reffer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20200803/76c993de/attachment.html>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: mymain.PNG
Type: image/png
Size: 124631 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20200803/76c993de/attachment.png>

From |r@nkm60606 @end|ng |rom gm@||@com  Mon Aug  3 22:50:30 2020
From: |r@nkm60606 @end|ng |rom gm@||@com (Frank)
Date: Mon, 3 Aug 2020 15:50:30 -0500
Subject: [R-SIG-Finance] Bollinger Band
In-Reply-To: <CAB-TgNsTegqvGmnL6dxaEqpaNehmviW2zWiZahMBNgparUE6OA@mail.gmail.com>
References: <CAB-TgNsTegqvGmnL6dxaEqpaNehmviW2zWiZahMBNgparUE6OA@mail.gmail.com>
Message-ID: <000501d669d7$ba2f5e80$2e8e1b80$@gmail.com>

If you could post your data and plot code, I could make more suggestions. 

 

My  main title is created by 

 

main="SPY V(1) Parameters (V, V^2 & V^0.5) Unweighted",

 

in the below code. Yours might be 

 

main=?IBEX? 

 

pdf("V12_w_Scatter_Plot.pdf")

labels <- c(r2lm2l_label,r2lm2b_label)

labels

plot(VV12, Lambda12,  ylim=yrange, tck=1, main="SPY V(1) Parameters (V, V^2 & V^0.5) Unweighted", xlab="VV12", ylab="Lambda12 & Beta12",pch=19,col="red") 

{points(VV12, lm2.lforecast, pch=19, col="brown")

abline(lm2.lforecastline, col="brown", lty="longdash", lwd=2)

points(VV12, Beta12, pch=19, col="blue")

points(VV12, lm2.bforecast, pch=19, col="purple")

abline(lm2.bforecastline, col="purple", lty="longdash", lwd=2)

legend("topright", inset=.05, title="Parameters", labels, col=colors, lwd=2)

}

 

Frank

Chicago

From: R-SIG-Finance On Behalf Of Pedro p?ramo
Sent: Monday, August 03, 2020 3:15 PM
To: r-sig-finance at r-project.org
Subject: [R-SIG-Finance] Bollinger Band

 

Hi all,

 

I have this code that plots BB, I want both this:

Add a main title specified by me up on the default title that adds IBEX and the date.

On the other hand, I would like to omit the legend but extract Upper and Lower bands in two different values to use latter and add like the title a "row" below the plot to add a comment o "sub main title" just below the plot and say "attention to the lower band" XXX (extracted value)

 

Last question, just below the graph there are some small boxes on a more or less row, on grey color, up on the dates but below the graph ?What are this grey boxes? ?Can I omit?

 

Many thanks in advance.

I attach and example of what I reffer


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20200803/55b2a54f/attachment.html>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: V1_2_2_12_3_Scatter_Plot.pdf
Type: application/pdf
Size: 4965 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20200803/55b2a54f/attachment.pdf>

From percent||101 @end|ng |rom gm@||@com  Mon Aug  3 23:43:43 2020
From: percent||101 @end|ng |rom gm@||@com (=?UTF-8?Q?Pedro_p=C3=A1ramo?=)
Date: Mon, 3 Aug 2020 23:43:43 +0200
Subject: [R-SIG-Finance] Bollinger Band
In-Reply-To: <000501d669d7$ba2f5e80$2e8e1b80$@gmail.com>
References: <CAB-TgNsTegqvGmnL6dxaEqpaNehmviW2zWiZahMBNgparUE6OA@mail.gmail.com>
 <000501d669d7$ba2f5e80$2e8e1b80$@gmail.com>
Message-ID: <CAB-TgNtyNxwVecw7yDxtG3LvYq9VwwS8hOrZPoYJDWxCjL3+Jg@mail.gmail.com>

Sorry I fotgot to paste the code, sorry again:

library(PerformanceAnalytics)
library(dplyr)
library(tibble)
library(lubridate)
library(PerformanceAnalytics)
library(quantmod)
library(ggplot2)
library(png)
library(TTR)


Ibex35<-na.omit(getSymbols("^IBEX",from="2007-12-31"))

chartSeries(IBEX, TA="addBBands(n=200, sd=1.9)", theme="white")

El lun., 3 ago. 2020 a las 22:50, Frank (<frankm60606 at gmail.com>) escribi?:

> If you could post your data and plot code, I could make more suggestions.
>
>
>
> My  main title is created by
>
>
>
> main="SPY V(1) Parameters (V, V^2 & V^0.5) Unweighted",
>
>
>
> in the below code. Yours might be
>
>
>
> main=?IBEX?
>
>
>
> pdf("V12_w_Scatter_Plot.pdf")
>
> labels <- c(r2lm2l_label,r2lm2b_label)
>
> labels
>
> plot(VV12, Lambda12,  ylim=yrange, tck=1, main="SPY V(1) Parameters (V,
> V^2 & V^0.5) Unweighted", xlab="VV12", ylab="Lambda12 &
> Beta12",pch=19,col="red")
>
> {points(VV12, lm2.lforecast, pch=19, col="brown")
>
> abline(lm2.lforecastline, col="brown", lty="longdash", lwd=2)
>
> points(VV12, Beta12, pch=19, col="blue")
>
> points(VV12, lm2.bforecast, pch=19, col="purple")
>
> abline(lm2.bforecastline, col="purple", lty="longdash", lwd=2)
>
> legend("topright", inset=.05, title="Parameters", labels, col=colors,
> lwd=2)
>
> }
>
>
>
> Frank
>
> Chicago
>
> *From:* R-SIG-Finance *On Behalf Of *Pedro p?ramo
> *Sent:* Monday, August 03, 2020 3:15 PM
> *To:* r-sig-finance at r-project.org
> *Subject:* [R-SIG-Finance] Bollinger Band
>
>
>
> Hi all,
>
>
>
> I have this code that plots BB, I want both this:
>
> Add a main title specified by me up on the default title that adds IBEX
> and the date.
>
> On the other hand, I would like to omit the legend but extract Upper and
> Lower bands in two different values to use latter and add like the title a
> "row" below the plot to add a comment o "sub main title" just below the
> plot and say "attention to the lower band" XXX (extracted value)
>
>
>
> Last question, just below the graph there are some small boxes on a more
> or less row, on grey color, up on the dates but below the graph ?What are
> this grey boxes? ?Can I omit?
>
>
>
> Many thanks in advance.
>
> I attach and example of what I reffer
>

	[[alternative HTML version deleted]]


From |r@nkm60606 @end|ng |rom gm@||@com  Tue Aug  4 02:24:48 2020
From: |r@nkm60606 @end|ng |rom gm@||@com (Frank)
Date: Mon, 3 Aug 2020 19:24:48 -0500
Subject: [R-SIG-Finance] Bollinger Band
In-Reply-To: <CAB-TgNtyNxwVecw7yDxtG3LvYq9VwwS8hOrZPoYJDWxCjL3+Jg@mail.gmail.com>
References: <CAB-TgNsTegqvGmnL6dxaEqpaNehmviW2zWiZahMBNgparUE6OA@mail.gmail.com>
 <000501d669d7$ba2f5e80$2e8e1b80$@gmail.com>
 <CAB-TgNtyNxwVecw7yDxtG3LvYq9VwwS8hOrZPoYJDWxCjL3+Jg@mail.gmail.com>
Message-ID: <000001d669f5$a9fd6bb0$fdf84310$@gmail.com>

Thanks for the code. I?m not able to do what you want with chartSeries(). I use plot() but not with Bollinger Bands.

 

You can add

 

Pdf(IBEX35) 

 

Before your chartSeries call to change the file name you create from the default.

 

Frank

Chicago

 

From: Pedro p?ramo 
Sent: Monday, August 03, 2020 4:44 PM
To: Frank <frankm60606 at gmail.com>
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Bollinger Band

 

Sorry I fotgot to paste the code, sorry again:

 

library(PerformanceAnalytics)
library(dplyr)
library(tibble)
library(lubridate)
library(PerformanceAnalytics)
library(quantmod)
library(ggplot2)
library(png)
library(TTR)


Ibex35<-na.omit(getSymbols("^IBEX",from="2007-12-31"))

chartSeries(IBEX, TA="addBBands(n=200, sd=1.9)", theme="white")

 

El lun., 3 ago. 2020 a las 22:50, Frank (<frankm60606 at gmail.com <mailto:frankm60606 at gmail.com> >) escribi?:

If you could post your data and plot code, I could make more suggestions. 

 

My  main title is created by 

 

main="SPY V(1) Parameters (V, V^2 & V^0.5) Unweighted",

 

in the below code. Yours might be 

 

main=?IBEX? 

 

pdf("V12_w_Scatter_Plot.pdf")

labels <- c(r2lm2l_label,r2lm2b_label)

labels

plot(VV12, Lambda12,  ylim=yrange, tck=1, main="SPY V(1) Parameters (V, V^2 & V^0.5) Unweighted", xlab="VV12", ylab="Lambda12 & Beta12",pch=19,col="red") 

{points(VV12, lm2.lforecast, pch=19, col="brown")

abline(lm2.lforecastline, col="brown", lty="longdash", lwd=2)

points(VV12, Beta12, pch=19, col="blue")

points(VV12, lm2.bforecast, pch=19, col="purple")

abline(lm2.bforecastline, col="purple", lty="longdash", lwd=2)

legend("topright", inset=.05, title="Parameters", labels, col=colors, lwd=2)

}

 

Frank

Chicago

From: R-SIG-Finance On Behalf Of Pedro p?ramo
Sent: Monday, August 03, 2020 3:15 PM
To: r-sig-finance at r-project.org <mailto:r-sig-finance at r-project.org> 
Subject: [R-SIG-Finance] Bollinger Band

 

Hi all,

 

I have this code that plots BB, I want both this:

Add a main title specified by me up on the default title that adds IBEX and the date.

On the other hand, I would like to omit the legend but extract Upper and Lower bands in two different values to use latter and add like the title a "row" below the plot to add a comment o "sub main title" just below the plot and say "attention to the lower band" XXX (extracted value)

 

Last question, just below the graph there are some small boxes on a more or less row, on grey color, up on the dates but below the graph ?What are this grey boxes? ?Can I omit?

 

Many thanks in advance.

I attach and example of what I reffer


	[[alternative HTML version deleted]]


From percent||101 @end|ng |rom gm@||@com  Tue Aug  4 22:27:51 2020
From: percent||101 @end|ng |rom gm@||@com (=?UTF-8?Q?Pedro_p=C3=A1ramo?=)
Date: Tue, 4 Aug 2020 22:27:51 +0200
Subject: [R-SIG-Finance] [R] hist from a list
In-Reply-To: <ea46a48f-e9aa-8d89-aed5-0f7454b3da3b@sapo.pt>
References: <CAB-TgNv88YE29BkrXg9teFoMGXVOGfrYtDWy+Ltb8znRK9_OFQ@mail.gmail.com>
 <42a74b91-08ed-f5f2-b621-193e447dd824@dewey.myzen.co.uk>
 <70ef6db0-8a9d-d140-8347-b4e8b758f640@sapo.pt>
 <CAPPM_gQTOQwXdiMQtD_smhZDJ7uAjwyfT65TR_J-0Vhh+xhYqg@mail.gmail.com>
 <20200731162847.GB106339@posteo.no>
 <CAB-TgNucrY+Qxp=Nn6-FJ2rWkbdPL2g4QK+G5FNmON5EgujBjg@mail.gmail.com>
 <ea46a48f-e9aa-8d89-aed5-0f7454b3da3b@sapo.pt>
Message-ID: <CAB-TgNs5d6i3WtEnrP5LfmL3+aGp-dGF2nqtj_jgayUHjnOAnw@mail.gmail.com>

Many thanks Rui,

Base R graphic is working on R, on my pc. the other one, no working but the
output on first its perfect.
The question I answer asking you again (and giving again many thanks for
the help) is because I am trying to run "my code" also on a web, and it is
telling me "error in External(c_X11...unable to start device X11cairo
execution halted.

It seems X11 starts a window and because of linux it doesn?t work.

There is a way to plot a bar plot more basic without starting X11?  A most
simple barplot?

I am trying but no way for the moment, I will attach if I get it.

> str(bwch)
'data.frame': 35 obs. of  2 variables:
 $ Accion: Factor w/ 35 levels "Acciona","Acerinox",..: 20 31 26 30 32 27
10 6 34 3 ...
 $ reval : num  -0.728 -0.695 -0.61 -0.491 -0.478 ...

and if I show bwch it shows me:

bwch
          Accion       reval
20           IAG -0.72840710
7       Sabadell -0.69537488
22         Melia -0.61043257
26        Repsol -0.49057941
8      Santander -0.47802975
23        Merlin -0.44619155
6           BBVA -0.42222597
4        Amadeus -0.40382211
28    Telefonica -0.39731736
2            ACS -0.38902365
5  ArcelorMittal -0.38367478
35         Indra -0.35756385
34      Almirall -0.35348361
19      Colonial -0.34791954
13          ENCE -0.32316076
32           CIE -0.32168004
21        Mapfre -0.29317220
9      Bankinter -0.29175725
10     CaixaBank -0.29116305
3           Aena -0.29101729
18       Inditex -0.28585061
31        Bankia -0.26246599
24       Naturgy -0.25511571
30      Acerinox -0.22028220
15     Ferrovial -0.20837519
16       Grifols -0.20712695
12        Enagas -0.04890202
25           REE -0.02601443
1        Acciona  0.02695608
14        Endesa  0.06325043
33      MasMovil  0.11111111
17     Iberdrola  0.25801888
27       SGamesa  0.31594178
29      Viscofan  0.33694859
11       Cellnex  0.38261067

Could in some way to "save" bwch data as a plain matrix and "read" it from
zero and then could plot a barplot without x11?
Many thanks again for your help




El lun., 3 ago. 2020 a las 23:45, Rui Barradas (<ruipbarradas at sapo.pt>)
escribi?:

> Hello,
>
> Thanks for the data in dput format.
> If you run
>
> str(bwchist)
>
> you will see that what you have is a data.frame, yes, but, with columns of
> class "list", not vectors.
> So the first step is to make them vectors, to unlist the lists. I will do
> it applying function unlist() to each of the columns. Since lapply returns
> a list, I remake a data.frame. The original is kept unchanged, the new
> object is bwch.
>
> bwch <- lapply(bwchist, unlist, recursive = FALSE)
> bwch <- do.call(cbind.data.frame, bwch)
> str(bwch)
>
>
> Now that everything is as it should, here are two ways of plotting bar
> graphs.
>
> #--- base R
> x11(width = 11.5, height = 6)
> old_par <- par(mar =  par("mar") + c(1, 0, 0, 0))
> bp <- barplot(bwch$reval, yaxt = "n", ylim = c(-1, 0.4))
> axis(1, at = bp, labels = bwch$Accion, las = 2)
> axis(2, at = pretty(bwch$reval))
> par(old_par)
>
>
> #--- package ggplot2
> library(ggplot2)
>
> x11(width = 11.5, height = 6)
> ggplot(bwch, aes(factor(Accion, levels = Accion), reval)) +
>   geom_col() +
>   theme(axis.text.x = element_text(angle = 60, hjust = 1))
>
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 19:48 de 03/08/2020, Pedro p?ramo escreveu:
>
> Hi Rasmus, Josh and Rui,
>
> First of all many thanks in advance about your help.
>
> The first thig is sometimes you say " you are posting in HTML and that
> makes the
> post unreadable as this is a plain text list" how can I put the code in
> the correct way, not html (attaching in txt?)
>
> The second about the code:
>
> I have used this:
>
> bwc <- cbind(bwfinal2,bwfinal)
> colnames(bwc)=c("Accion","reval")
> df <- matrix(unlist(bwc), nrow=nrow(bwc), byrow=F)
> colnames(bwchist)=c("Accion","reval")
> bwchist <-as.data.frame(bwc[order(df[,2]), ])
>
> bwchist is the ordered cum stock returns in the year but because is a list
> it is not possible to plot and histogram with x (names of stocks) and the x
> axist the value of cum stocks (reval)
>
> when I put dput(bwchist) the console says:
>
> dput(bwchist)
> structure(list(Accion = list("REE", "Enagas", "Grifols", "Ferrovial",
>     "Acerinox", "Naturgy", "Inditex", "Bankia", "ENCE", "Aena",
>     "Bankinter", "Mapfre", "CaixaBank", "CIE", "Colonial", "Almirall",
>     "Indra", "ArcelorMittal", "ACS", "Telefonica", "Amadeus",
>     "BBVA", "Merlin", "Santander", "Repsol", "Melia", "Sabadell",
>     "IAG", "Acciona", "Endesa", "MasMovil", "Iberdrola", "SGamesa",
>     "Viscofan", "Cellnex"), reval = list(-0.0200827282700085,
>     -0.0590294115600855, -0.214126598790964, -0.220773677809979,
>     -0.229653300324357, -0.257944379583984, -0.283942789063822,
>     -0.285159347392533, -0.303814713896458, -0.30734460425763,
>     -0.309408155539818, -0.319912221435868, -0.322790949659181,
>     -0.344047579452905, -0.347919538415482, -0.356898907103825,
>     -0.374263261296661, -0.40147247119078, -0.405150043834815,
>     -0.406022775042175, -0.413786100987797, -0.440679109311707,
>     -0.442603156492871, -0.491634140733524, -0.499254932434042,
>     -0.6, -0.709737357505148, -0.724461258850966, 0.0220528711420083,
>     0.0462767672643172, 0.115044247787611, 0.238734548714937,
>     0.274578114644054, 0.343422896082666, 0.387826126094928)), class =
> "data.frame", row.names = c(NA,
> -35L))
>
> I try to make an hist or barplot but because it is a list no way to obtain
> the plot.
>
> Many thanks again for your help.
>
> I have printed two manuals to improve my level, but if you can help me, I
> would be very very gratefull.
>
>
>
> El vie., 31 jul. 2020 a las 18:28, Rasmus Liland (<jral at posteo.no>)
> escribi?:
>
>> On 2020-07-31 10:07 -0500, Joshua Ulrich wrote:
>> | On Fri, Jul 31, 2020 at 9:55 AM Rui Barradas wrote:
>> | | ?s 15:44 de 31/07/2020, Michael Dewey escreveu:
>> | | | Dear Pedro
>> | | |
>> | | | Some comments in-line
>> | | |
>> | | | On 30/07/2020 21:16, Pedro p?ramo wrote:
>> | | | | Hi all,
>> | | | |
>> | | | | I attach my code, the think is I
>> | | | | want to make a bar plot the last
>> | | | | variable called "bwchist" so the
>> | | | | X axis are "Accion" and the y
>> | | | | axis are "reval" values.
>> | | | |
>> | | | | I have prove class(bwchist) and
>> | | | | says dataframe but its still a
>> | | | | list because it says me I have
>> | | | | prove to unlist, but it doesnt
>> | | | | work
>> | | | |
>> | | | | hist(bwchist)
>> | | | | Error in hist.default(bwchist) : 'x' must be numeric
>> | | |
>> | | | So bwchist is not a numeric
>> | | | variable as hist needs. Aboce you
>> | | | said it is a data frame but data
>> | | | frames are not numeric.
>> | | |
>> | | | For future reference your example
>> | | | is way too long for anyone to go
>> | | | through and try to help you. Try
>> | | | next time to reduce it to the
>> | | | absolute minimum by removing
>> | | | sections while you still get the
>> | | | error.  It is also easier to get
>> | | | help if you can remove unnecessary
>> | | | packages.
>> | | |
>> | | | It is also unreadable because you
>> | | | are posting in HTML and that makes
>> | | | the post unreadable as this is a
>> | | | plain text list.
>> | |
>> | | Hello,
>> | |
>> | | I second Michael's opinion. When the
>> | | post's code is very long, there is a
>> | | tendency to have less answers.
>> | |
>> | | Please post the output of
>> | |
>> | |     dput(head(bwchist, 30))
>> | |
>> | | It's much shorter code and it
>> | | recreates the data so we will be
>> | | able to see what's wrong and try to
>> | | find a solution.
>> |
>> | Hi Pedro,
>> |
>> | Another 'best practice' and polite
>> | thing to do is link to other places
>> | you may have cross-posted.  That will
>> | give people the opportunity to see if
>> | your questions has been answered in
>> | another forum.
>> |
>> | I saw your post on R-SIG-Finance
>> | (https://stat.ethz.ch/pipermail/r-sig-finance/2020q3/014979.html),
>> | and started to work on a solution.
>> |
>> | I don't know how to do this in
>> | tidyquant, but here's how you can do
>> | it with quantmod:
>> |
>> | # all tickers
>> | tk <- c("ANA.MC", "ACS.MC", "AENA.MC", "AMS.MC", "MTS.MC", "BBVA.MC", "
>> SAB.MC",
>> |   "SAN.MC", "BKT.MC", "CABK.MC", "CLNX.MC", "ENG.MC", "ENC.MC", "ELE.MC
>> ",
>> |   "FER.MC", "GRF.MC", "IBE.MC", "ITX.MC", "COL.MC", "IAG.MC", "MAP.MC",
>> |   "MEL.MC", "MRL.MC", "NTGY.MC", "REE.MC", "REP.MC", "SGRE.MC", "TEF.MC
>> ",
>> |   "VIS.MC", "ACX.MC", "BKIA.MC", "CIE.MC", "MAS.MC", "ALM.MC", "IDR.MC
>> ")
>> |
>> | # download them into an environment ('e')
>> | require(quantmod)
>> | getSymbols(tk, from = "2019-12-31", env = (e <- new.env()))
>> |
>> | # extract adjusted close column
>> | adj <- lapply(e, Ad)
>> | # calculate daily returns from adjusted data,
>> | # merge into a xts matrix, and fill NA with 0
>> | ret <- do.call(merge, c(lapply(adj, dailyReturn), fill = 0))
>> | # cumulative returns
>> | cumret <- cumprod(1 + ret) - 1
>> | # set names
>> | colnames(cumret) <- names(adj)
>> | last(cumret)
>> | # calculate histogram for period-to-date returns
>> | hist(drop(last(cumret)))
>> |
>> | I'm not sure that's the histogram
>> | you're looking for, but I hope it
>> | gives you a start toward a solution.
>> |
>> | Best,
>> | Josh
>>
>> Wow Josh!  That's very elegant.
>>
>> Myself now, I just plowed through the
>> original code to make it simpler, but am
>> at a loss as to how this histogram looks
>> ...
>>
>>         x <- c("ANA.MC", "ACS.MC", "AENA.MC", "AMS.MC", "MTS.MC", "
>> BBVA.MC",
>>           "SAB.MC", "SAN.MC", "BKT.MC", "CABK.MC", "CLNX.MC", "ENG.MC",
>>           "ENC.MC", "ELE.MC", "FER.MC", "GRF.MC", "IBE.MC", "ITX.MC",
>>           "COL.MC", "IAG.MC", "MAP.MC", "MEL.MC", "MRL.MC", "NTGY.MC",
>>           "REE.MC", "REP.MC", "SGRE.MC", "TEF.MC", "VIS.MC", "ACX.MC",
>>           "BKIA.MC", "CIE.MC", "MAS.MC", "ALM.MC", "IDR.MC")
>>         stock.prices <-
>>           lapply(x, function(stock) {
>>             tidyquant::tq_get(x=stock,from = '2019-12-31',get =
>> "stock.prices")
>>           })
>>         names(stock.prices) <- x
>>
>>         library(tidyquant)
>>
>>         returns <- lapply(stock.prices, function(data) {
>>           tab <-
>>             tq_transmute(
>>               data = data,
>>               select = adjusted,           # this specifies which column
>> to select
>>               mutate_fun = periodReturn,   # This specifies what to do
>> with that column
>>               period = "daily",            # This argument calculates
>> Daily returns
>>               col_rename = "idr_returns")  # renames the column
>>           tab[,"cr"] <- cumprod(1 + tab[,"idr_returns"])
>>           tab[,"cumulative_returns"] <- tab[,"cr"] - 1
>>
>>           dplyr::pull(
>>             tab[nrow(tab[,"cumulative_returns"]),
>>                           "cumulative_returns"]
>>           )
>>         })
>>
>>         bestworst <- simplify2array(returns)
>>
>>         namebw <-
>>           c("Acciona", "ACS", "Aena", "Amadeus",
>>             "ArcelorMittal", "BBVA", "Sabadell",
>>             "Santander", "Bankinter",
>>             "CaixaBank", "Cellnex", "Enagas",
>>             "ENCE", "Endesa", "Ferrovial",
>>             "Grifols", "Iberdrola", "Inditex",
>>             "Colonial", "IAG", "Mapfre",
>>             "Melia", "Merlin", "Naturgy", "REE",
>>             "Repsol", "SGamesa", "Telefonica",
>>             "Viscofan", "Acerinox", "Bankia",
>>             "CIE", "MasMovil", "Almirall",
>>             "Indra")
>>
>>         bwc <- data.frame(
>>           symbol=names(bestworst),
>>           Accion=namebw,
>>           reval=bestworst)
>>
>> | | | | bwc<-cbind(bwfinal2,bwfinal)
>> | | | | colnames(bwc)=c("Accion","reval")
>> | | | | bwc <- as.data.frame(bwc)
>>
>> ... aaaand you know something's
>> happening between here (where bwchist is
>> created), but you don't know what it is,
>> do you, Mr p?ramo?
>>
>> | | | | colnames(bwchist)=c("Accion","reval")
>> | | | | bwchist <-as.data.frame(bwc[order(bwc$reval), ])
>>
>> Best,
>> Rasmus
>>
>
>
>
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient> Sem
> v?rus. www.avast.com
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient>
> <#m_-3158995779444775478_DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
>

	[[alternative HTML version deleted]]


From bog@@o@chr|@to|er @end|ng |rom gm@||@com  Wed Aug  5 19:57:41 2020
From: bog@@o@chr|@to|er @end|ng |rom gm@||@com (Christofer Bogaso)
Date: Wed, 5 Aug 2020 23:27:41 +0530
Subject: [R-SIG-Finance] Statistical Modelling of time series
Message-ID: <CA+dpOJmPa4dsNL-46SGp18GFZ4GwPZ0=kHgj=jhSeDpEZkX-Pg@mail.gmail.com>

Hi,

I am wondering if there is any significant difference in the approach
of statistical modelling of time series for typical FX and Equity
asset classes.

I am considering time series for both EoD and Intra day.

Any pointer will be highly appreciated.

Thanks,


From percent||101 @end|ng |rom gm@||@com  Mon Aug 10 20:22:12 2020
From: percent||101 @end|ng |rom gm@||@com (=?UTF-8?Q?Pedro_p=C3=A1ramo?=)
Date: Mon, 10 Aug 2020 20:22:12 +0200
Subject: [R-SIG-Finance] periodReturn at the acutual day
Message-ID: <CAB-TgNuk4i=11cnjL2DfPFcv+5bZUevutMALynFS_tzGp2bvgQ@mail.gmail.com>

Hi all,

I am using to make some statistical analysis this functions:

library(quantmod)
getSymbols("^IBEX",src="yahoo",from="1998-01-01")
MensualR = periodReturn(IBEX,period="monthly")
AnualR = periodReturn(IBEX,period="yearly")

The thing is that if I print MensualR or AnualR they "show" data to the
previous friday 07/08/2020

There is some way to obtain data to the actual date (not previous friday
close).

	[[alternative HTML version deleted]]


From percent||101 @end|ng |rom gm@||@com  Mon Aug 10 21:37:47 2020
From: percent||101 @end|ng |rom gm@||@com (=?UTF-8?Q?Pedro_p=C3=A1ramo?=)
Date: Mon, 10 Aug 2020 21:37:47 +0200
Subject: [R-SIG-Finance] periodReturn at the acutual day
In-Reply-To: <CY4PR0101MB30302CFDA7016E6DDF67A4DB8D440@CY4PR0101MB3030.prod.exchangelabs.com>
References: <CAB-TgNuk4i=11cnjL2DfPFcv+5bZUevutMALynFS_tzGp2bvgQ@mail.gmail.com>
 <CY4PR0101MB30302CFDA7016E6DDF67A4DB8D440@CY4PR0101MB3030.prod.exchangelabs.com>
Message-ID: <CAB-TgNtgmS6-HQKfFZdpssLNXzOvjF4czrp-8iyqfmQu9gvx2w@mail.gmail.com>

But I think there is a way to obtain last price, doesn?t it? With getQuote?
I have to look for it, so I see no way to use close, do you now another
function to know the historial return by frequency different to
periodReturn, to see if it is posible?




El lun., 10 ago. 2020 a las 20:40, Ethan Smith (<smith_ethan at hotmail.com>)
escribi?:

> Yahoo provides End of Day (EOD) data. You cannot get the current days
> closing price until the market closes for the day and the final closing
> price is captured
>
> In fact, many EOD data provider require additional time after the close
> before the current day?s prices are available
>
>
>
> *From: *Pedro p?ramo <percentil101 at gmail.com>
> *Sent: *Monday, August 10, 2020 12:23 PM
> *To: *r-sig-finance at r-project.org
> *Subject: *[R-SIG-Finance] periodReturn at the acutual day
>
>
>
> Hi all,
>
> I am using to make some statistical analysis this functions:
>
> library(quantmod)
> getSymbols("^IBEX",src="yahoo",from="1998-01-01")
> MensualR = periodReturn(IBEX,period="monthly")
> AnualR = periodReturn(IBEX,period="yearly")
>
> The thing is that if I print MensualR or AnualR they "show" data to the
> previous friday 07/08/2020
>
> There is some way to obtain data to the actual date (not previous friday
> close).
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
>
>

	[[alternative HTML version deleted]]


From d@n|e|@ceg|e|k@ @end|ng |rom gm@||@com  Mon Aug 10 22:53:09 2020
From: d@n|e|@ceg|e|k@ @end|ng |rom gm@||@com (=?utf-8?Q?Daniel_Cegie=C5=82ka?=)
Date: Mon, 10 Aug 2020 22:53:09 +0200
Subject: [R-SIG-Finance] periodReturn at the acutual day
In-Reply-To: <CAB-TgNuk4i=11cnjL2DfPFcv+5bZUevutMALynFS_tzGp2bvgQ@mail.gmail.com>
References: <CAB-TgNuk4i=11cnjL2DfPFcv+5bZUevutMALynFS_tzGp2bvgQ@mail.gmail.com>
Message-ID: <749BCB4C-BE32-419B-B405-B9F0024DC26F@gmail.com>



> On 10 Aug 2020, at 20:22, Pedro p?ramo <percentil101 at gmail.com> wrote:
> 
> Hi all,
> 
> I am using to make some statistical analysis this functions:
> 
> library(quantmod)
> getSymbols("^IBEX",src="yahoo",from="1998-01-01")
> MensualR = periodReturn(IBEX,period="monthly")
> AnualR = periodReturn(IBEX,period="yearly")
> 
> The thing is that if I print MensualR or AnualR they "show" data to the
> previous friday 07/08/2020
> 
> There is some way to obtain data to the actual date (not previous friday
> close).
> 


have you checked your data?

> last(IBEX, 3)
           IBEX.Open IBEX.High IBEX.Low IBEX.Close IBEX.Volume IBEX.Adjusted
2020-08-05    7073.2    7123.5   7027.7     7039.7   208795900        7039.7
2020-08-06    7022.1    7046.1   6917.0     6957.9   205847300        6957.9
2020-08-07    6929.1    6961.8   6876.7     6950.5   184151000        6950.5

so what result do you expect?


> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From percent||101 @end|ng |rom gm@||@com  Mon Aug 10 23:43:52 2020
From: percent||101 @end|ng |rom gm@||@com (=?UTF-8?Q?Pedro_p=C3=A1ramo?=)
Date: Mon, 10 Aug 2020 23:43:52 +0200
Subject: [R-SIG-Finance] periodReturn at the acutual day
In-Reply-To: <CAB-TgNtgmS6-HQKfFZdpssLNXzOvjF4czrp-8iyqfmQu9gvx2w@mail.gmail.com>
References: <CAB-TgNuk4i=11cnjL2DfPFcv+5bZUevutMALynFS_tzGp2bvgQ@mail.gmail.com>
 <CY4PR0101MB30302CFDA7016E6DDF67A4DB8D440@CY4PR0101MB3030.prod.exchangelabs.com>
 <CAB-TgNtgmS6-HQKfFZdpssLNXzOvjF4czrp-8iyqfmQu9gvx2w@mail.gmail.com>
Message-ID: <CAB-TgNvaewoN3FSY6dc50=78PLWU_EvAbbRSrqC5jHwdR_HjQw@mail.gmail.com>

I think,

getQuote("IBEX")
              Trade Time  Last Change % Change  Open High     Low
IBEX 2020-08-10 16:00:01 17.15   1.75 11.36364 15.65   18 15.0601
     Volume
IBEX 456965

> getQuote("IBEX")$Last

Is the final value for each periodReturn but the function
periodReturn(IBEX,period="monthly") dont use Last price,

Is there a way to obtain monthly return with Last Price?



El lun., 10 ago. 2020 a las 21:37, Pedro p?ramo (<percentil101 at gmail.com>)
escribi?:

> But I think there is a way to obtain last price, doesn?t it? With
> getQuote? I have to look for it, so I see no way to use close, do you now
> another function to know the historial return by frequency different to
> periodReturn, to see if it is posible?
>
>
>
>
> El lun., 10 ago. 2020 a las 20:40, Ethan Smith (<smith_ethan at hotmail.com>)
> escribi?:
>
>> Yahoo provides End of Day (EOD) data. You cannot get the current days
>> closing price until the market closes for the day and the final closing
>> price is captured
>>
>> In fact, many EOD data provider require additional time after the close
>> before the current day?s prices are available
>>
>>
>>
>> *From: *Pedro p?ramo <percentil101 at gmail.com>
>> *Sent: *Monday, August 10, 2020 12:23 PM
>> *To: *r-sig-finance at r-project.org
>> *Subject: *[R-SIG-Finance] periodReturn at the acutual day
>>
>>
>>
>> Hi all,
>>
>> I am using to make some statistical analysis this functions:
>>
>> library(quantmod)
>> getSymbols("^IBEX",src="yahoo",from="1998-01-01")
>> MensualR = periodReturn(IBEX,period="monthly")
>> AnualR = periodReturn(IBEX,period="yearly")
>>
>> The thing is that if I print MensualR or AnualR they "show" data to the
>> previous friday 07/08/2020
>>
>> There is some way to obtain data to the actual date (not previous friday
>> close).
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>>
>>
>

	[[alternative HTML version deleted]]


From br|@n @end|ng |rom br@verock@com  Mon Aug 10 23:49:32 2020
From: br|@n @end|ng |rom br@verock@com (Brian G. Peterson)
Date: Mon, 10 Aug 2020 16:49:32 -0500
Subject: [R-SIG-Finance] periodReturn at the acutual day
In-Reply-To: <CAB-TgNvaewoN3FSY6dc50=78PLWU_EvAbbRSrqC5jHwdR_HjQw@mail.gmail.com>
References: <CAB-TgNuk4i=11cnjL2DfPFcv+5bZUevutMALynFS_tzGp2bvgQ@mail.gmail.com>
 <CY4PR0101MB30302CFDA7016E6DDF67A4DB8D440@CY4PR0101MB3030.prod.exchangelabs.com>
 <CAB-TgNtgmS6-HQKfFZdpssLNXzOvjF4czrp-8iyqfmQu9gvx2w@mail.gmail.com>
 <CAB-TgNvaewoN3FSY6dc50=78PLWU_EvAbbRSrqC5jHwdR_HjQw@mail.gmail.com>
Message-ID: <126cc887a89883dc41b51399ec601e6c5b98a11a.camel@braverock.com>

getSymbols and getQuote are not the same thing.

getSymbols("^IBEX",src="yahoo",from="1998-01-01")
last(IBEX)
#     IBEX.Open IBEX.High IBEX.Low IBEX.Close IBEX.Volume IBEX.Adjusted
#2020-08-
#07    6929.1    6961.8   6876.7     6950.5   184151000        6950.5

The data returned is from Friday, the 7th's close, not from Monday, the
10th, for me.

I assume that Yahoo probably updates their data once a day, sometime
after the official close is published, and their vendor updates.

The joys of trying to use free data.

Brian

-- 
Brian G. Peterson
ph: +1.773.459.4973
im: bgpbraverock

On Mon, 2020-08-10 at 23:43 +0200, Pedro p?ramo wrote:
> I think,
> 
> getQuote("IBEX")
>               Trade Time  Last Change % Change  Open High     Low
> IBEX 2020-08-10 16:00:01 17.15   1.75 11.36364 15.65   18 15.0601
>      Volume
> IBEX 456965
> 
> > getQuote("IBEX")$Last
> 
> Is the final value for each periodReturn but the function
> periodReturn(IBEX,period="monthly") dont use Last price,
> 
> Is there a way to obtain monthly return with Last Price?
> 
> 
> 
> El lun., 10 ago. 2020 a las 21:37, Pedro p?ramo (<
> percentil101 at gmail.com
> >)
> escribi?:
> 
> > But I think there is a way to obtain last price, doesn?t it? With
> > getQuote? I have to look for it, so I see no way to use close, do
> > you now
> > another function to know the historial return by frequency
> > different to
> > periodReturn, to see if it is posible?
> > 
> > 
> > 
> > 
> > El lun., 10 ago. 2020 a las 20:40, Ethan Smith (<
> > smith_ethan at hotmail.com
> > >)
> > escribi?:
> > 
> > > Yahoo provides End of Day (EOD) data. You cannot get the current
> > > days
> > > closing price until the market closes for the day and the final
> > > closing
> > > price is captured
> > > 
> > > In fact, many EOD data provider require additional time after the
> > > close
> > > before the current day?s prices are available
> > > 
> > > 
> > > 
> > > *From: *Pedro p?ramo <
> > > percentil101 at gmail.com
> > > >
> > > *Sent: *Monday, August 10, 2020 12:23 PM
> > > *To: 
> > > *r-sig-finance at r-project.org
> > > 
> > > *Subject: *[R-SIG-Finance] periodReturn at the acutual day
> > > 
> > > 
> > > 
> > > Hi all,
> > > 
> > > I am using to make some statistical analysis this functions:
> > > 
> > > library(quantmod)
> > > getSymbols("^IBEX",src="yahoo",from="1998-01-01")
> > > MensualR = periodReturn(IBEX,period="monthly")
> > > AnualR = periodReturn(IBEX,period="yearly")
> > > 
> > > The thing is that if I print MensualR or AnualR they "show" data
> > > to the
> > > previous friday 07/08/2020
> > > 
> > > There is some way to obtain data to the actual date (not previous
> > > friday
> > > close).
> > > 
> > >         [[alternative HTML version deleted]]
> > > 
> > > _______________________________________________
> > > R-SIG-Finance at r-project.org
> > >  mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > > 
> > > -- Subscriber-posting only. If you want to post, subscribe first.
> > > -- Also note that this is not the r-help list where general R
> > > questions
> > > should go.
> > > 
> > > 
> > > 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org
>  mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> 
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R
> questions should go.
> 
>


From m|ke9 @end|ng |rom po@teo@n|  Mon Aug 17 04:07:10 2020
From: m|ke9 @end|ng |rom po@teo@n| (Mike)
Date: Mon, 17 Aug 2020 04:07:10 +0200
Subject: [R-SIG-Finance] Empty indicator / plot.window: need finite 'ylim'
 values
Message-ID: <20200817020710.GG1614@local>

I like to plot several charts to files with an identical layout
according to indicators so the charts can be browsed quickly. It is
normal for the indicators in some charts to be completely NA at least
in the range to be plotted. Generating those charts throws

Error in plot.window(c(1, 31), c(NaN, NaN)) : need finite 'ylim' values

To substitute NA by 0, -1 or similar is no option since these are
legal values.

Can I tell R to ignore such errors and simply generate an empty
region instead?

Mike



Minimal reproducible example:

library(quantmod)

data (sample_matrix)
sample.xts <- as.xts (sample_matrix[1:50,'Close'], dateFormat="POSIXct")
sample.xts <- cbind (sample.xts, NA)
sample.xts['2007-02-05::',2] <- 0
sample.xts['2007-02-11',2] <- 1
colnames (sample.xts) <- c('Close', 'Stops')

ta <- list ("add_TA(sample.xts[,2])")

# In the range to be plotted ta is completely NA 
subset <- '2007-01-10::2007-01-30'

plot (chart_Series (sample.xts[,1], subset=subset, TA=ta))


From jr@| @end|ng |rom po@teo@no  Mon Aug 17 04:55:22 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Mon, 17 Aug 2020 04:55:22 +0200
Subject: [R-SIG-Finance] 
 Empty indicator / plot.window: need finite 'ylim' values
In-Reply-To: <20200817020710.GG1614@local>
References: <20200817020710.GG1614@local>
Message-ID: <20200817025522.GD35031@posteo.no>

Dear Mike,

if I change this line

	plot (chart_Series (sample.xts[,1], subset=subset, TA=ta))

to 

	plot(chart_Series(sample.xts[subset,1], TA=ta))

A plot appears.  No errors.  Was this 
what you were looking for?

/Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20200817/9f2c4f9e/attachment.sig>

From d@n|e|@ceg|e|k@ @end|ng |rom gm@||@com  Mon Aug 17 19:32:54 2020
From: d@n|e|@ceg|e|k@ @end|ng |rom gm@||@com (=?utf-8?Q?Daniel_Cegie=C5=82ka?=)
Date: Mon, 17 Aug 2020 19:32:54 +0200
Subject: [R-SIG-Finance] 
 Empty indicator / plot.window: need finite 'ylim' values
In-Reply-To: <20200817025522.GD35031@posteo.no>
References: <20200817020710.GG1614@local> <20200817025522.GD35031@posteo.no>
Message-ID: <E78785C7-B03C-46EE-BD4C-5C1B476DF190@gmail.com>



> On 17 Aug 2020, at 04:55, Rasmus Liland <jral at posteo.no> wrote:
> 
> Dear Mike,
> 
> if I change this line
> 
> 	plot (chart_Series (sample.xts[,1], subset=subset, TA=ta))
> 
> to 
> 
> 	plot(chart_Series(sample.xts[subset,1], TA=ta))
> 
> A plot appears.  No errors.  Was this 
> what you were looking for?
> 


Guys :)

chart_Series() is a plot env/func, so plot(chart_Series()) make no sense :)


Try:

chart_Series(sample.xts[subset,1], TA=ta)

?chart_Series

But your problem is here:

sample.xts[subset, 2]


Best,
Daniel




> /Rasmus
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jo@h@m@u|r|ch @end|ng |rom gm@||@com  Mon Aug 17 19:37:42 2020
From: jo@h@m@u|r|ch @end|ng |rom gm@||@com (Joshua Ulrich)
Date: Mon, 17 Aug 2020 12:37:42 -0500
Subject: [R-SIG-Finance] 
 Empty indicator / plot.window: need finite 'ylim' values
In-Reply-To: <E78785C7-B03C-46EE-BD4C-5C1B476DF190@gmail.com>
References: <20200817020710.GG1614@local> <20200817025522.GD35031@posteo.no>
 <E78785C7-B03C-46EE-BD4C-5C1B476DF190@gmail.com>
Message-ID: <CAPPM_gSow3ZipNBXjhFmek+Tp0+wHfAmKH4tL+Erd4=6nGf6iw@mail.gmail.com>

On Mon, Aug 17, 2020 at 12:33 PM Daniel Cegie?ka
<daniel.cegielka at gmail.com> wrote:
>
>
>
> > On 17 Aug 2020, at 04:55, Rasmus Liland <jral at posteo.no> wrote:
> >
> > Dear Mike,
> >
> > if I change this line
> >
> >       plot (chart_Series (sample.xts[,1], subset=subset, TA=ta))
> >
> > to
> >
> >       plot(chart_Series(sample.xts[subset,1], TA=ta))
> >
> > A plot appears.  No errors.  Was this
> > what you were looking for?
> >
>
>
> Guys :)
>
> chart_Series() is a plot env/func, so plot(chart_Series()) make no sense :)
>
Except that it is necessary to wrap chart_Series() in a call to plot()
if you call it from within a function, for loop, or any other
situation where R's auto-printing is disabled.

Cheers,
Josh


>
> Try:
>
> chart_Series(sample.xts[subset,1], TA=ta)
>
> ?chart_Series
>
> But your problem is here:
>
> sample.xts[subset, 2]
>
>
> Best,
> Daniel
>
>
>
>
> > /Rasmus
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From d@n|e|@ceg|e|k@ @end|ng |rom gm@||@com  Mon Aug 17 20:02:04 2020
From: d@n|e|@ceg|e|k@ @end|ng |rom gm@||@com (=?utf-8?Q?Daniel_Cegie=C5=82ka?=)
Date: Mon, 17 Aug 2020 20:02:04 +0200
Subject: [R-SIG-Finance] 
 Empty indicator / plot.window: need finite 'ylim' values
In-Reply-To: <CAPPM_gSow3ZipNBXjhFmek+Tp0+wHfAmKH4tL+Erd4=6nGf6iw@mail.gmail.com>
References: <20200817020710.GG1614@local> <20200817025522.GD35031@posteo.no>
 <E78785C7-B03C-46EE-BD4C-5C1B476DF190@gmail.com>
 <CAPPM_gSow3ZipNBXjhFmek+Tp0+wHfAmKH4tL+Erd4=6nGf6iw@mail.gmail.com>
Message-ID: <DA32DC18-A881-4B56-B8DD-BD8ED28F83DD@gmail.com>



> On 17 Aug 2020, at 19:37, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> 
> On Mon, Aug 17, 2020 at 12:33 PM Daniel Cegie?ka
> <daniel.cegielka at gmail.com <mailto:daniel.cegielka at gmail.com>> wrote:
>> 
>> 
>> 
>>> On 17 Aug 2020, at 04:55, Rasmus Liland <jral at posteo.no> wrote:
>>> 
>>> Dear Mike,
>>> 
>>> if I change this line
>>> 
>>>      plot (chart_Series (sample.xts[,1], subset=subset, TA=ta))
>>> 
>>> to
>>> 
>>>      plot(chart_Series(sample.xts[subset,1], TA=ta))
>>> 
>>> A plot appears.  No errors.  Was this
>>> what you were looking for?
>>> 
>> 
>> 
>> Guys :)
>> 
>> chart_Series() is a plot env/func, so plot(chart_Series()) make no sense :)
>> 
> Except that it is necessary to wrap chart_Series() in a call to plot()
> if you call it from within a function, for loop, or any other
> situation where R's auto-printing is disabled.
> 

I agree, but in this example earlier it was pointless.

https://github.com/joshuaulrich/quantmod/blob/master/R/replot.R#L202

> c <- quantmod::current.chob()
> str(c)
Classes 'replot', 'environment' <environment: 0x7f9cbdaa8fd8> 

So print.replot() will call plot.replot() automatically.




> Cheers,
> Josh
> 
> 
>> 
>> Try:
>> 
>> chart_Series(sample.xts[subset,1], TA=ta)
>> 
>> ?chart_Series
>> 
>> But your problem is here:
>> 
>> sample.xts[subset, 2]
>> 
>> 
>> Best,
>> Daniel
>> 
>> 
>> 
>> 
>>> /Rasmus
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>> 
>> _______________________________________________
>> R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance <https://stat.ethz.ch/mailman/listinfo/r-sig-finance>
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
> 
> 
> 
> --
> Joshua Ulrich  |  about.me/joshuaulrich <http://about.me/joshuaulrich>
> FOSS Trading  |  www.fosstrading.com <http://www.fosstrading.com/>

	[[alternative HTML version deleted]]


From m|ke9 @end|ng |rom po@teo@n|  Mon Aug 17 22:42:56 2020
From: m|ke9 @end|ng |rom po@teo@n| (Mike)
Date: Mon, 17 Aug 2020 22:42:56 +0200
Subject: [R-SIG-Finance] 
 Empty indicator / plot.window: need finite 'ylim' values
In-Reply-To: <E78785C7-B03C-46EE-BD4C-5C1B476DF190@gmail.com>
References: <20200817020710.GG1614@local> <20200817025522.GD35031@posteo.no>
 <E78785C7-B03C-46EE-BD4C-5C1B476DF190@gmail.com>
Message-ID: <20200817204256.GB18076@local>

> > On 17 Aug 2020, at 04:55, Rasmus Liland <jral at posteo.no> wrote:

> >     plot(chart_Series(sample.xts[subset,1], TA=ta))
> > 
> > A plot appears.  No errors.

For now. But when you add an indicator like add_BBands() which is
calculated within chart_Series, this indicator will start at
observation 20, not from the beginning. This is because you call
chart_Series without lead time for calculation.


On 17.08. Daniel Cegie?ka wrote:

> chart_Series() is a plot env/func, so plot(chart_Series()) make no sense :)

Like Joshua wrote, indeed, I use chart_Series within a function.

> But your problem is here:
> 
> sample.xts[subset, 2]

Yes, not the main window is the issue, but the indicator is. So I
have to ask more specific:

Can I plot a subset of chart and indicator where the indicator's
subset is completely NA resulting in the indicator's plot region
being left blank?

Mike


The new minimal reproducible:

library(quantmod)

my_plot_function <- function () {
  data (sample_matrix)
  sample.xts <- as.xts (sample_matrix[1:50,'Close'], dateFormat="POSIXct")
  sample.xts <- cbind (sample.xts, NA)
  sample.xts[50,2] <- 0
  colnames (sample.xts) <- c('Close', 'Stops')

  ta <- list ("add_TA(sample.xts[,2])")

  # In the range to be plotted ta is completely NA 
  subset <- '2007-01-10::2007-01-30'

  plot (chart_Series (sample.xts[,1], subset=subset, TA=ta))
}

my_plot_function ()


From d@n|e|@ceg|e|k@ @end|ng |rom gm@||@com  Mon Aug 17 23:46:16 2020
From: d@n|e|@ceg|e|k@ @end|ng |rom gm@||@com (=?utf-8?Q?Daniel_Cegie=C5=82ka?=)
Date: Mon, 17 Aug 2020 23:46:16 +0200
Subject: [R-SIG-Finance] 
 Empty indicator / plot.window: need finite 'ylim' values
In-Reply-To: <20200817204256.GB18076@local>
References: <20200817020710.GG1614@local> <20200817025522.GD35031@posteo.no>
 <E78785C7-B03C-46EE-BD4C-5C1B476DF190@gmail.com>
 <20200817204256.GB18076@local>
Message-ID: <A1E01161-CCEB-4E0E-8676-81EDF4FA71D3@gmail.com>



> On 17 Aug 2020, at 22:42, Mike <mike9 at posteo.nl> wrote:

> Like Joshua wrote, indeed, I use chart_Series within a function.
> 
>> But your problem is here:
>> 
>> sample.xts[subset, 2]
> 
> Yes, not the main window is the issue, but the indicator is. So I
> have to ask more specific:
> 
> Can I plot a subset of chart and indicator where the indicator's
> subset is completely NA resulting in the indicator's plot region
> being left blank?
> 

you can try to force a value for ylim in the quantmod?s chart object:

x <- chart_Series (sample.xts[,1], subset=subset, TA=ta)

> x$Env$ylim
[[1]]
[1] 0 1
attr(,"fixed")
[1] FALSE

[[2]]
[1] 49.88096 50.67835
attr(,"fixed")
[1] FALSE

[[3]]
[1] 0 1
attr(,"fixed")
[1] FALSE

[[4]]
[1] -Inf  Inf
attr(,"fixed")
[1] FALSE


e.g.: 

> x$Env$ylim[[4]] <- structure(c(0, 1), 'fixed' = FALSE)
> 
> x$Env$ylim[[4]]
[1] 0 1
attr(,"fixed")
[1] FALSE

however, it is still overwritten:

> x  # or plot(x)
Error in plot.window(c(1, 21), c(NaN, NaN)) : need finite 'ylim' values
In addition: Warning messages:
1: In min(x) : no non-missing arguments to min; returning Inf
2: In max(x) : no non-missing arguments to max; returning -Inf
> x$Env$ylim[[4]]
[1] -Inf  Inf
attr(,"fixed")
[1] FALSE



> Mike
> 
> 
> The new minimal reproducible:
> 
> library(quantmod)
> 
> my_plot_function <- function () {
>  data (sample_matrix)
>  sample.xts <- as.xts (sample_matrix[1:50,'Close'], dateFormat="POSIXct")
>  sample.xts <- cbind (sample.xts, NA)
>  sample.xts[50,2] <- 0
>  colnames (sample.xts) <- c('Close', 'Stops')
> 
>  ta <- list ("add_TA(sample.xts[,2])")
> 
>  # In the range to be plotted ta is completely NA 
>  subset <- '2007-01-10::2007-01-30'
> 
>  plot (chart_Series (sample.xts[,1], subset=subset, TA=ta))
> }
> 
> my_plot_function ()
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jo@h@m@u|r|ch @end|ng |rom gm@||@com  Sun Aug 23 14:34:55 2020
From: jo@h@m@u|r|ch @end|ng |rom gm@||@com (Joshua Ulrich)
Date: Sun, 23 Aug 2020 07:34:55 -0500
Subject: [R-SIG-Finance] 
 Empty indicator / plot.window: need finite 'ylim' values
In-Reply-To: <A1E01161-CCEB-4E0E-8676-81EDF4FA71D3@gmail.com>
References: <20200817020710.GG1614@local> <20200817025522.GD35031@posteo.no>
 <E78785C7-B03C-46EE-BD4C-5C1B476DF190@gmail.com>
 <20200817204256.GB18076@local>
 <A1E01161-CCEB-4E0E-8676-81EDF4FA71D3@gmail.com>
Message-ID: <CAPPM_gTrMKBU6q0CLO9r8J-8Fg6kDJjx1+ejsSSZN2L6j8J6SA@mail.gmail.com>

I don't think this is possible with chart_Series() currently.

It looks similar to
https://github.com/joshuaulrich/quantmod/issues/81

Could you please file an issue on the GitHub tracker?  I'm not sure
when I'll have a chance to take a closer look, but the tracker issue
will make sure I don't lose track of it.

Best,
Josh

On Mon, Aug 17, 2020 at 4:46 PM Daniel Cegie?ka
<daniel.cegielka at gmail.com> wrote:
>
>
>
> > On 17 Aug 2020, at 22:42, Mike <mike9 at posteo.nl> wrote:
>
> > Like Joshua wrote, indeed, I use chart_Series within a function.
> >
> >> But your problem is here:
> >>
> >> sample.xts[subset, 2]
> >
> > Yes, not the main window is the issue, but the indicator is. So I
> > have to ask more specific:
> >
> > Can I plot a subset of chart and indicator where the indicator's
> > subset is completely NA resulting in the indicator's plot region
> > being left blank?
> >
>
> you can try to force a value for ylim in the quantmod?s chart object:
>
> x <- chart_Series (sample.xts[,1], subset=subset, TA=ta)
>
> > x$Env$ylim
> [[1]]
> [1] 0 1
> attr(,"fixed")
> [1] FALSE
>
> [[2]]
> [1] 49.88096 50.67835
> attr(,"fixed")
> [1] FALSE
>
> [[3]]
> [1] 0 1
> attr(,"fixed")
> [1] FALSE
>
> [[4]]
> [1] -Inf  Inf
> attr(,"fixed")
> [1] FALSE
>
>
> e.g.:
>
> > x$Env$ylim[[4]] <- structure(c(0, 1), 'fixed' = FALSE)
> >
> > x$Env$ylim[[4]]
> [1] 0 1
> attr(,"fixed")
> [1] FALSE
>
> however, it is still overwritten:
>
> > x  # or plot(x)
> Error in plot.window(c(1, 21), c(NaN, NaN)) : need finite 'ylim' values
> In addition: Warning messages:
> 1: In min(x) : no non-missing arguments to min; returning Inf
> 2: In max(x) : no non-missing arguments to max; returning -Inf
> > x$Env$ylim[[4]]
> [1] -Inf  Inf
> attr(,"fixed")
> [1] FALSE
>
>
>
> > Mike
> >
> >
> > The new minimal reproducible:
> >
> > library(quantmod)
> >
> > my_plot_function <- function () {
> >  data (sample_matrix)
> >  sample.xts <- as.xts (sample_matrix[1:50,'Close'], dateFormat="POSIXct")
> >  sample.xts <- cbind (sample.xts, NA)
> >  sample.xts[50,2] <- 0
> >  colnames (sample.xts) <- c('Close', 'Stops')
> >
> >  ta <- list ("add_TA(sample.xts[,2])")
> >
> >  # In the range to be plotted ta is completely NA
> >  subset <- '2007-01-10::2007-01-30'
> >
> >  plot (chart_Series (sample.xts[,1], subset=subset, TA=ta))
> > }
> >
> > my_plot_function ()
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From @@chm|d1 @end|ng |rom @teven@@edu  Mon Sep 21 22:38:29 2020
From: @@chm|d1 @end|ng |rom @teven@@edu (Alec Schmidt)
Date: Mon, 21 Sep 2020 20:38:29 +0000
Subject: [R-SIG-Finance] PairTrading package
Message-ID: <MN2PR10MB4272C11AF351B15FF7600CD4843A0@MN2PR10MB4272.namprd10.prod.outlook.com>

I used to have R version 3.6.0 and tried to install PairTrading but got a message that the package is not available for that version.
Now I've updated R to 4.0.2. but still have the message:

package ?PairTrading? is not available (for R version 4.0.2)

I wonder if anything can be done about it or there may be other packages with similar functionality.

Thanks! Alec

	[[alternative HTML version deleted]]


From d@n|e|@ceg|e|k@ @end|ng |rom gm@||@com  Mon Sep 21 23:01:39 2020
From: d@n|e|@ceg|e|k@ @end|ng |rom gm@||@com (=?utf-8?Q?Daniel_Cegie=C5=82ka?=)
Date: Mon, 21 Sep 2020 23:01:39 +0200
Subject: [R-SIG-Finance] PairTrading package
In-Reply-To: <MN2PR10MB4272C11AF351B15FF7600CD4843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
References: <MN2PR10MB4272C11AF351B15FF7600CD4843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
Message-ID: <8663828E-D007-4E97-AF72-1A1F7F4D07CB@gmail.com>

Hi Alec,

$ R --version
R version 4.0.0 (2020-04-24) -- "Arbor Day"
Copyright (C) 2020 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin17.0 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under the terms of the
GNU General Public License versions 2 or 3.
For more information about these matters see
https://www.gnu.org/licenses/.

$ git clone https://github.com/cran/PairTrading
Cloning into 'PairTrading'...
remote: Enumerating objects: 39, done.
remote: Counting objects: 100% (39/39), done.
remote: Compressing objects: 100% (24/24), done.
remote: Total 39 (delta 11), reused 39 (delta 11), pack-reused 0
Unpacking objects: 100% (39/39), done.

$ ls
PairTrading

$ R CMD INSTALL PairTrading/
* installing to library ?/Library/Frameworks/R.framework/Versions/4.0/Resources/library?
* installing *source* package ?PairTrading? ...

(?)

** building package indices
** testing if installed package can be loaded from temporary location
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (PairTrading)


Best regards,
Daniel


> On 21 Sep 2020, at 22:38, Alec Schmidt <aschmid1 at stevens.edu> wrote:
> 
> I used to have R version 3.6.0 and tried to install PairTrading but got a message that the package is not available for that version.
> Now I've updated R to 4.0.2. but still have the message:
> 
> package ?PairTrading? is not available (for R version 4.0.2)
> 
> I wonder if anything can be done about it or there may be other packages with similar functionality.
> 
> Thanks! Alec
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From j@ymon0703 @end|ng |rom gm@||@com  Mon Sep 21 23:08:01 2020
From: j@ymon0703 @end|ng |rom gm@||@com (Jasen Mackie)
Date: Mon, 21 Sep 2020 17:08:01 -0400
Subject: [R-SIG-Finance] PairTrading package
In-Reply-To: <8663828E-D007-4E97-AF72-1A1F7F4D07CB@gmail.com>
References: <MN2PR10MB4272C11AF351B15FF7600CD4843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
 <8663828E-D007-4E97-AF72-1A1F7F4D07CB@gmail.com>
Message-ID: <CAE8+bE0Km8+Ez1-L_DkKQ37gw2xhPAjYv-6DJk8FOg+qkSBG=Q@mail.gmail.com>

Hi Alec

Thanks Daniel. I will add assuming you are looking for something to merely
test a strategy as opposed to something specifically using cointegration to
build your signal, there is also quantstrat
<https://github.com/braverock/quantstrat> and you can find a pair trading
demo here
<https://github.com/braverock/quantstrat/blob/master/demo/pair_trade.R>.

Regards
Jasen

On Mon, 21 Sep 2020 at 17:01, Daniel Cegie?ka <daniel.cegielka at gmail.com>
wrote:

> Hi Alec,
>
> $ R --version
> R version 4.0.0 (2020-04-24) -- "Arbor Day"
> Copyright (C) 2020 The R Foundation for Statistical Computing
> Platform: x86_64-apple-darwin17.0 (64-bit)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under the terms of the
> GNU General Public License versions 2 or 3.
> For more information about these matters see
> https://www.gnu.org/licenses/.
>
> $ git clone https://github.com/cran/PairTrading
> Cloning into 'PairTrading'...
> remote: Enumerating objects: 39, done.
> remote: Counting objects: 100% (39/39), done.
> remote: Compressing objects: 100% (24/24), done.
> remote: Total 39 (delta 11), reused 39 (delta 11), pack-reused 0
> Unpacking objects: 100% (39/39), done.
>
> $ ls
> PairTrading
>
> $ R CMD INSTALL PairTrading/
> * installing to library
> ?/Library/Frameworks/R.framework/Versions/4.0/Resources/library?
> * installing *source* package ?PairTrading? ...
>
> (?)
>
> ** building package indices
> ** testing if installed package can be loaded from temporary location
> ** testing if installed package can be loaded from final location
> ** testing if installed package keeps a record of temporary installation
> path
> * DONE (PairTrading)
>
>
> Best regards,
> Daniel
>
>
> > On 21 Sep 2020, at 22:38, Alec Schmidt <aschmid1 at stevens.edu> wrote:
> >
> > I used to have R version 3.6.0 and tried to install PairTrading but got
> a message that the package is not available for that version.
> > Now I've updated R to 4.0.2. but still have the message:
> >
> > package ?PairTrading? is not available (for R version 4.0.2)
> >
> > I wonder if anything can be done about it or there may be other packages
> with similar functionality.
> >
> > Thanks! Alec
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions
> should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From @@chm|d1 @end|ng |rom @teven@@edu  Mon Sep 21 23:34:47 2020
From: @@chm|d1 @end|ng |rom @teven@@edu (Alec Schmidt)
Date: Mon, 21 Sep 2020 21:34:47 +0000
Subject: [R-SIG-Finance] PairTrading package
In-Reply-To: <8663828E-D007-4E97-AF72-1A1F7F4D07CB@gmail.com>
References: <MN2PR10MB4272C11AF351B15FF7600CD4843A0@MN2PR10MB4272.namprd10.prod.outlook.com>,
 <8663828E-D007-4E97-AF72-1A1F7F4D07CB@gmail.com>
Message-ID: <MN2PR10MB42725D3402175BE33B035262843A0@MN2PR10MB4272.namprd10.prod.outlook.com>

Daniel and Jasen, thanks much!

Daniel, sorry, I'm on Windows PC, so I used dir instead of ls and I do see PairTrading but your command
R CMD INSTALL PairTrading/ doesn't work:

'R' is not recognized as an internal or external command,operable program or batch file.

Thanks again, Alec

________________________________
From: Daniel Cegie?ka <daniel.cegielka at gmail.com>
Sent: Monday, September 21, 2020 5:01 PM
To: Alec Schmidt <aschmid1 at stevens.edu>
Cc: r-sig-finance at r-project.org <r-sig-finance at r-project.org>
Subject: Re: [R-SIG-Finance] PairTrading package

Hi Alec,

$ R --version
R version 4.0.0 (2020-04-24) -- "Arbor Day"
Copyright (C) 2020 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin17.0 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under the terms of the
GNU General Public License versions 2 or 3.
For more information about these matters see
https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.gnu.org%2Flicenses%2F&amp;data=02%7C01%7Caschmid1%40stevens.edu%7Ce85102d9ef0f4cea022e08d85e718b7e%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637363189046435726&amp;sdata=OfQqu78x4j3D6D1oHM4KrPcqTha0Y%2FMLVPUESTCQH4k%3D&amp;reserved=0.

$ git clone https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fcran%2FPairTrading&amp;data=02%7C01%7Caschmid1%40stevens.edu%7Ce85102d9ef0f4cea022e08d85e718b7e%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637363189046440727&amp;sdata=RqrpSGXxOiJgM5I05DV0fPmRFUmkBnYHD5kge1Id3AE%3D&amp;reserved=0
Cloning into 'PairTrading'...
remote: Enumerating objects: 39, done.
remote: Counting objects: 100% (39/39), done.
remote: Compressing objects: 100% (24/24), done.
remote: Total 39 (delta 11), reused 39 (delta 11), pack-reused 0
Unpacking objects: 100% (39/39), done.

$ ls
PairTrading

$ R CMD INSTALL PairTrading/
* installing to library ?/Library/Frameworks/R.framework/Versions/4.0/Resources/library?
* installing *source* package ?PairTrading? ...

(?)

** building package indices
** testing if installed package can be loaded from temporary location
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (PairTrading)


Best regards,
Daniel


> On 21 Sep 2020, at 22:38, Alec Schmidt <aschmid1 at stevens.edu> wrote:
>
> I used to have R version 3.6.0 and tried to install PairTrading but got a message that the package is not available for that version.
> Now I've updated R to 4.0.2. but still have the message:
>
> package ?PairTrading? is not available (for R version 4.0.2)
>
> I wonder if anything can be done about it or there may be other packages with similar functionality.
>
> Thanks! Alec
>
>        [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-sig-finance&amp;data=02%7C01%7Caschmid1%40stevens.edu%7Ce85102d9ef0f4cea022e08d85e718b7e%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637363189046440727&amp;sdata=yLrwHpI16stt%2F0aYnQjIJgSgIegnuOtmLHYlAe8DQkQ%3D&amp;reserved=0
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


	[[alternative HTML version deleted]]


From e@ @end|ng |rom enr|co@chum@nn@net  Tue Sep 22 07:29:27 2020
From: e@ @end|ng |rom enr|co@chum@nn@net (Enrico Schumann)
Date: Tue, 22 Sep 2020 07:29:27 +0200
Subject: [R-SIG-Finance] PairTrading package
In-Reply-To: <MN2PR10MB42725D3402175BE33B035262843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
 (Alec Schmidt's message of "Mon, 21 Sep 2020 21:34:47 +0000")
References: <MN2PR10MB4272C11AF351B15FF7600CD4843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
 <8663828E-D007-4E97-AF72-1A1F7F4D07CB@gmail.com>
 <MN2PR10MB42725D3402175BE33B035262843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
Message-ID: <87zh5inzuw.fsf@enricoschumann.net>

On Mon, 21 Sep 2020, Alec Schmidt writes:

> Daniel and Jasen, thanks much!
>
> Daniel, sorry, I'm on Windows PC, so I used dir instead of ls and I do see PairTrading but your command
> R CMD INSTALL PairTrading/ doesn't work:
>
> 'R' is not recognized as an internal or external command,operable program or batch file.
>
> Thanks again, Alec

It's more of a question for R-help, but:

If you follow the URL https://cran.r-project.org/package=PairTrading ,
you'll find that the package has been archived. You can still follow the
archive link, download the package and then install (on Windows) from
the R-GUI by selecting "install from local files" in the packages menu.
(Keep in mind that packages are archived for a reason, usually.)

If you want to try Daniel's suggestion: That 'R' is not found tells you
it's not in the search path.  You can set it on Windows in the
system/environment variable settings; just add 'C:/Program Files/R
<....>/bin ' (or whereever R is installed on your system) to the path.


kind regards
    Enrico

> ________________________________
> From: Daniel Cegie?ka <daniel.cegielka at gmail.com>
> Sent: Monday, September 21, 2020 5:01 PM
> To: Alec Schmidt <aschmid1 at stevens.edu>
> Cc: r-sig-finance at r-project.org <r-sig-finance at r-project.org>
> Subject: Re: [R-SIG-Finance] PairTrading package
>
> Hi Alec,
>
> $ R --version
> R version 4.0.0 (2020-04-24) -- "Arbor Day"
> Copyright (C) 2020 The R Foundation for Statistical Computing
> Platform: x86_64-apple-darwin17.0 (64-bit)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under the terms of the
> GNU General Public License versions 2 or 3.
> For more information about these matters see
> https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.gnu.org%2Flicenses%2F&amp;data=02%7C01%7Caschmid1%40stevens.edu%7Ce85102d9ef0f4cea022e08d85e718b7e%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637363189046435726&amp;sdata=OfQqu78x4j3D6D1oHM4KrPcqTha0Y%2FMLVPUESTCQH4k%3D&amp;reserved=0.
>
> $ git clone
> https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fcran%2FPairTrading&amp;data=02%7C01%7Caschmid1%40stevens.edu%7Ce85102d9ef0f4cea022e08d85e718b7e%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637363189046440727&amp;sdata=RqrpSGXxOiJgM5I05DV0fPmRFUmkBnYHD5kge1Id3AE%3D&amp;reserved=0
> Cloning into 'PairTrading'...
> remote: Enumerating objects: 39, done.
> remote: Counting objects: 100% (39/39), done.
> remote: Compressing objects: 100% (24/24), done.
> remote: Total 39 (delta 11), reused 39 (delta 11), pack-reused 0
> Unpacking objects: 100% (39/39), done.
>
> $ ls
> PairTrading
>
> $ R CMD INSTALL PairTrading/
> * installing to library ?/Library/Frameworks/R.framework/Versions/4.0/Resources/library?
> * installing *source* package ?PairTrading? ...
>
> (?)
>
> ** building package indices
> ** testing if installed package can be loaded from temporary location
> ** testing if installed package can be loaded from final location
> ** testing if installed package keeps a record of temporary installation path
> * DONE (PairTrading)
>
>
> Best regards,
> Daniel
>
>
>> On 21 Sep 2020, at 22:38, Alec Schmidt <aschmid1 at stevens.edu> wrote:
>>
>> I used to have R version 3.6.0 and tried to install PairTrading but got a message that the package is not available for that version.
>> Now I've updated R to 4.0.2. but still have the message:
>>
>> package ?PairTrading? is not available (for R version 4.0.2)
>>
>> I wonder if anything can be done about it or there may be other packages with similar functionality.
>>
>> Thanks! Alec
>>

[...]


-- 
Enrico Schumann
Lucerne, Switzerland
http://enricoschumann.net


From @@chm|d1 @end|ng |rom @teven@@edu  Tue Sep 22 15:42:23 2020
From: @@chm|d1 @end|ng |rom @teven@@edu (Alec Schmidt)
Date: Tue, 22 Sep 2020 13:42:23 +0000
Subject: [R-SIG-Finance] PairTrading package
In-Reply-To: <87zh5inzuw.fsf@enricoschumann.net>
References: <MN2PR10MB4272C11AF351B15FF7600CD4843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
 <8663828E-D007-4E97-AF72-1A1F7F4D07CB@gmail.com>
 <MN2PR10MB42725D3402175BE33B035262843A0@MN2PR10MB4272.namprd10.prod.outlook.com>,
 <87zh5inzuw.fsf@enricoschumann.net>
Message-ID: <MN2PR10MB4272D0E29765DE0D0C62F9D8843B0@MN2PR10MB4272.namprd10.prod.outlook.com>

Thanks a lot, Enrico.

________________________________
From: Enrico Schumann <es at enricoschumann.net>
Sent: Tuesday, September 22, 2020 1:29 AM
To: Alec Schmidt <aschmid1 at stevens.edu>
Cc: Daniel Cegie?ka <daniel.cegielka at gmail.com>; r-sig-finance at r-project.org <r-sig-finance at r-project.org>
Subject: Re: [R-SIG-Finance] PairTrading package

On Mon, 21 Sep 2020, Alec Schmidt writes:

> Daniel and Jasen, thanks much!
>
> Daniel, sorry, I'm on Windows PC, so I used dir instead of ls and I do see PairTrading but your command
> R CMD INSTALL PairTrading/ doesn't work:
>
> 'R' is not recognized as an internal or external command,operable program or batch file.
>
> Thanks again, Alec

It's more of a question for R-help, but:

If you follow the URL https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fpackage%3DPairTrading&amp;data=02%7C01%7Caschmid1%40stevens.edu%7Cc6a153bd55104ef7910208d85eb87a52%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637363493716373736&amp;sdata=bsmkUniLSnS6ofp73MaG0DYToVii7VEZbzIgzZcAjR8%3D&amp;reserved=0 ,
you'll find that the package has been archived. You can still follow the
archive link, download the package and then install (on Windows) from
the R-GUI by selecting "install from local files" in the packages menu.
(Keep in mind that packages are archived for a reason, usually.)

If you want to try Daniel's suggestion: That 'R' is not found tells you
it's not in the search path.  You can set it on Windows in the
system/environment variable settings; just add 'C:/Program Files/R
<....>/bin ' (or whereever R is installed on your system) to the path.


kind regards
    Enrico

> ________________________________
> From: Daniel Cegie?ka <daniel.cegielka at gmail.com>
> Sent: Monday, September 21, 2020 5:01 PM
> To: Alec Schmidt <aschmid1 at stevens.edu>
> Cc: r-sig-finance at r-project.org <r-sig-finance at r-project.org>
> Subject: Re: [R-SIG-Finance] PairTrading package
>
> Hi Alec,
>
> $ R --version
> R version 4.0.0 (2020-04-24) -- "Arbor Day"
> Copyright (C) 2020 The R Foundation for Statistical Computing
> Platform: x86_64-apple-darwin17.0 (64-bit)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under the terms of the
> GNU General Public License versions 2 or 3.
> For more information about these matters see
> https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.gnu.org%2Flicenses%2F&amp;data=02%7C01%7Caschmid1%40stevens.edu%7Cc6a153bd55104ef7910208d85eb87a52%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637363493716383730&amp;sdata=55EEnTvuJH429ccclZvkkx1%2BWWejUD5Qy2b17UzGAis%3D&amp;reserved=0.
>
> $ git clone
> https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fcran%2FPairTrading&amp;data=02%7C01%7Caschmid1%40stevens.edu%7Cc6a153bd55104ef7910208d85eb87a52%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637363493716383730&amp;sdata=erwDXdwA44XFD93I1vBXTtmm819Mb9PUQvGvo0kdm%2FM%3D&amp;reserved=0
> Cloning into 'PairTrading'...
> remote: Enumerating objects: 39, done.
> remote: Counting objects: 100% (39/39), done.
> remote: Compressing objects: 100% (24/24), done.
> remote: Total 39 (delta 11), reused 39 (delta 11), pack-reused 0
> Unpacking objects: 100% (39/39), done.
>
> $ ls
> PairTrading
>
> $ R CMD INSTALL PairTrading/
> * installing to library ?/Library/Frameworks/R.framework/Versions/4.0/Resources/library?
> * installing *source* package ?PairTrading? ...
>
> (?)
>
> ** building package indices
> ** testing if installed package can be loaded from temporary location
> ** testing if installed package can be loaded from final location
> ** testing if installed package keeps a record of temporary installation path
> * DONE (PairTrading)
>
>
> Best regards,
> Daniel
>
>
>> On 21 Sep 2020, at 22:38, Alec Schmidt <aschmid1 at stevens.edu> wrote:
>>
>> I used to have R version 3.6.0 and tried to install PairTrading but got a message that the package is not available for that version.
>> Now I've updated R to 4.0.2. but still have the message:
>>
>> package ?PairTrading? is not available (for R version 4.0.2)
>>
>> I wonder if anything can be done about it or there may be other packages with similar functionality.
>>
>> Thanks! Alec
>>

[...]


--
Enrico Schumann
Lucerne, Switzerland
https://nam02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fenricoschumann.net%2F&amp;data=02%7C01%7Caschmid1%40stevens.edu%7Cc6a153bd55104ef7910208d85eb87a52%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637363493716383730&amp;sdata=sEkds70iDxr5HsNMuTycpt5bLSVl%2BA35S7GNbheGi7Y%3D&amp;reserved=0

	[[alternative HTML version deleted]]


From @@chm|d1 @end|ng |rom @teven@@edu  Fri Sep 25 21:27:26 2020
From: @@chm|d1 @end|ng |rom @teven@@edu (Alec Schmidt)
Date: Fri, 25 Sep 2020 19:27:26 +0000
Subject: [R-SIG-Finance] PairTrading package
In-Reply-To: <87zh5inzuw.fsf@enricoschumann.net>
References: <MN2PR10MB4272C11AF351B15FF7600CD4843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
 <8663828E-D007-4E97-AF72-1A1F7F4D07CB@gmail.com>
 <MN2PR10MB42725D3402175BE33B035262843A0@MN2PR10MB4272.namprd10.prod.outlook.com>,
 <87zh5inzuw.fsf@enricoschumann.net>
Message-ID: <MN2PR10MB427217B6AB0F5A9829179CCF84360@MN2PR10MB4272.namprd10.prod.outlook.com>

I'm trying to reproduce the results described in
 https://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/inst/doc/IntroductionToPairTrading.pdf?revision=6&root=pairtrading&pathrev=6 [1]
(and in  https://www.r-bloggers.com/2011/10/pair-trading-strategy-how-to-use-pairtrading-package/)

I have some minor differences, eg
in [1]:
adf.test(as.numeric(reg$spread)) Augmented Dickey-Fuller Test data: as.numeric(reg$spread) Dickey-Fuller = -3.6462, Lag order = 8, p-value = 0.02825
and I have: Dickey-Fuller = -3.4033, Lag order = 8, p-value = 0.05288

Also, the commands
barplot(signal,col="blue",space = 0, border = "blue",xaxt="n",yaxt="n",xlab="",ylab="")
par(new=TRUE)
plot(params$spread, type="l", col = "red",lwd = 3, main = "Spread & Signal")

create in my environment two separate plots (bar and line) rather than one with superimposed bar and line charts like in [1].

Most importantly, I have all returns 'NA':
 > return.pairtrading
           [,1]
2009-01-04   NA
2009-01-05   NA
2009-01-06   NA
2009-01-07   NA

even though the parameters for the function
return.pairtrading <- Return(price.pair, lag(signal), lag(params$hedge.ratio))
look reasonable.

Thanks! Alec
[https://www.r-bloggers.com/wp-content/uploads/2016/08/R_single_01-200-1.png]<https://www.r-bloggers.com/2011/10/pair-trading-strategy-how-to-use-pairtrading-package/>
Pair trading strategy : how to use 'PairTrading' package<https://www.r-bloggers.com/2011/10/pair-trading-strategy-how-to-use-pairtrading-package/>
Mr.Ishikawa(my old friend) and I developed "PairTrading" package, and uploaded it on CRAN.This article shows you how you can use it.The pair trading is a market neutral trading strategy and gives traders a chance to profit regardless of market conditions. The idea of this strategy is ...
www.r-bloggers.com

Introduction to Pair Trading -Based on Cointegration-<https://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/inst/doc/IntroductionToPairTrading.pdf?revision=6&root=pairtrading&pathrev=6>
?Gerry Bamberger and Nunzio Tartaglia ?Quantitative group at Morgan Stanley ?Around 1980s ?D.E. Shaw & Co. is famous for this strategy Pair trading was pioneered by ? 4
r-forge.r-project.org

________________________________
From: Enrico Schumann <es at enricoschumann.net>
Sent: Tuesday, September 22, 2020 1:29 AM
To: Alec Schmidt <aschmid1 at stevens.edu>
Cc: Daniel Cegie?ka <daniel.cegielka at gmail.com>; r-sig-finance at r-project.org <r-sig-finance at r-project.org>
Subject: Re: [R-SIG-Finance] PairTrading package

On Mon, 21 Sep 2020, Alec Schmidt writes:

> Daniel and Jasen, thanks much!
>
> Daniel, sorry, I'm on Windows PC, so I used dir instead of ls and I do see PairTrading but your command
> R CMD INSTALL PairTrading/ doesn't work:
>
> 'R' is not recognized as an internal or external command,operable program or batch file.
>
> Thanks again, Alec

It's more of a question for R-help, but:

If you follow the URL https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fpackage%3DPairTrading&amp;data=02%7C01%7Caschmid1%40stevens.edu%7Cc6a153bd55104ef7910208d85eb87a52%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637363493716373736&amp;sdata=bsmkUniLSnS6ofp73MaG0DYToVii7VEZbzIgzZcAjR8%3D&amp;reserved=0 ,
you'll find that the package has been archived. You can still follow the
archive link, download the package and then install (on Windows) from
the R-GUI by selecting "install from local files" in the packages menu.
(Keep in mind that packages are archived for a reason, usually.)

If you want to try Daniel's suggestion: That 'R' is not found tells you
it's not in the search path.  You can set it on Windows in the
system/environment variable settings; just add 'C:/Program Files/R
<....>/bin ' (or whereever R is installed on your system) to the path.


kind regards
    Enrico

> ________________________________
> From: Daniel Cegie?ka <daniel.cegielka at gmail.com>
> Sent: Monday, September 21, 2020 5:01 PM
> To: Alec Schmidt <aschmid1 at stevens.edu>
> Cc: r-sig-finance at r-project.org <r-sig-finance at r-project.org>
> Subject: Re: [R-SIG-Finance] PairTrading package
>
> Hi Alec,
>
> $ R --version
> R version 4.0.0 (2020-04-24) -- "Arbor Day"
> Copyright (C) 2020 The R Foundation for Statistical Computing
> Platform: x86_64-apple-darwin17.0 (64-bit)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under the terms of the
> GNU General Public License versions 2 or 3.
> For more information about these matters see
> https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.gnu.org%2Flicenses%2F&amp;data=02%7C01%7Caschmid1%40stevens.edu%7Cc6a153bd55104ef7910208d85eb87a52%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637363493716383730&amp;sdata=55EEnTvuJH429ccclZvkkx1%2BWWejUD5Qy2b17UzGAis%3D&amp;reserved=0.
>
> $ git clone
> https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fcran%2FPairTrading&amp;data=02%7C01%7Caschmid1%40stevens.edu%7Cc6a153bd55104ef7910208d85eb87a52%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637363493716383730&amp;sdata=erwDXdwA44XFD93I1vBXTtmm819Mb9PUQvGvo0kdm%2FM%3D&amp;reserved=0
> Cloning into 'PairTrading'...
> remote: Enumerating objects: 39, done.
> remote: Counting objects: 100% (39/39), done.
> remote: Compressing objects: 100% (24/24), done.
> remote: Total 39 (delta 11), reused 39 (delta 11), pack-reused 0
> Unpacking objects: 100% (39/39), done.
>
> $ ls
> PairTrading
>
> $ R CMD INSTALL PairTrading/
> * installing to library ?/Library/Frameworks/R.framework/Versions/4.0/Resources/library?
> * installing *source* package ?PairTrading? ...
>
> (?)
>
> ** building package indices
> ** testing if installed package can be loaded from temporary location
> ** testing if installed package can be loaded from final location
> ** testing if installed package keeps a record of temporary installation path
> * DONE (PairTrading)
>
>
> Best regards,
> Daniel
>
>
>> On 21 Sep 2020, at 22:38, Alec Schmidt <aschmid1 at stevens.edu> wrote:
>>
>> I used to have R version 3.6.0 and tried to install PairTrading but got a message that the package is not available for that version.
>> Now I've updated R to 4.0.2. but still have the message:
>>
>> package ?PairTrading? is not available (for R version 4.0.2)
>>
>> I wonder if anything can be done about it or there may be other packages with similar functionality.
>>
>> Thanks! Alec
>>

[...]


--
Enrico Schumann
Lucerne, Switzerland
https://nam02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fenricoschumann.net%2F&amp;data=02%7C01%7Caschmid1%40stevens.edu%7Cc6a153bd55104ef7910208d85eb87a52%7C8d1a69ec03b54345ae21dad112f5fb4f%7C0%7C0%7C637363493716383730&amp;sdata=sEkds70iDxr5HsNMuTycpt5bLSVl%2BA35S7GNbheGi7Y%3D&amp;reserved=0

	[[alternative HTML version deleted]]


From gttg@2000 @end|ng |rom y@hoo@com  Fri Sep 25 22:12:24 2020
From: gttg@2000 @end|ng |rom y@hoo@com (AIE ATUMA)
Date: Fri, 25 Sep 2020 20:12:24 +0000 (UTC)
Subject: [R-SIG-Finance] Web Scraping of SPY Stocks
In-Reply-To: <MN2PR10MB427217B6AB0F5A9829179CCF84360@MN2PR10MB4272.namprd10.prod.outlook.com>
References: <MN2PR10MB4272C11AF351B15FF7600CD4843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
 <8663828E-D007-4E97-AF72-1A1F7F4D07CB@gmail.com>
 <MN2PR10MB42725D3402175BE33B035262843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
 <87zh5inzuw.fsf@enricoschumann.net>
 <MN2PR10MB427217B6AB0F5A9829179CCF84360@MN2PR10MB4272.namprd10.prod.outlook.com>
Message-ID: <1623712302.824412.1601064744435@mail.yahoo.com>

Dear All,
Please I need help. I ran the below function and got the highlighted error message. How can I correct it?
library(rvest)# Web-scrape SP500 stock listsp_500 <- read_html("https://en.wikipedia.org/wiki/List_of_S%26P_500_companies") %>%html_node("table.wikitable") %>%html_table() %>%select(`Ticker symbol`, Security, `GICS Sector`, `GICS Sub Industry`) %>%as_tibble()# Format namesnames(sp_500) <- sp_500 %>%names() %>%str_to_lower() %>%make.names()# Show resultssp_500
Error Message:
Error: Can't subset columns that don't exist.x Column `Ticker symbol` doesn't exist.Run `rlang::last_error()` to see where the error occurred.

The second function and the error is below:
get_stock_prices <- function(ticker), return_format = "tibble", ...) {? # Get stock prices? stock_prices_xts <- getSymbols(Symbols = ticker, auto.assign = FALSE, ...)? # Rename? names(stock_prices_xts) <- c("Open", "High", "Low", "Close", "Volume", "Adjusted")? # Return in xts format if tibble is not specified? if (return_format == "tibble") {? ? stock_prices <- stock_prices_xts %>%? ? ? as_tibble() %>%? ? ? rownames_to_column(var = "Date") %>%? ? ? mutate(Date = mdy(Date))? } else {? ? stock_prices <- stock_prices_xts? }? stock_prices}
"MA" %>%? get_stock_prices(return_format = 'tibble')%>%head()
ERROR MESSAGE:
Warning message:All formats failed to parse. No formats found.?


Thank You and Best Regards,?Emeka I. AtumaIntegrity - Walk Your Talk Don't Talk Your Work 

   
  
	[[alternative HTML version deleted]]


From jo@h@m@u|r|ch @end|ng |rom gm@||@com  Sat Sep 26 14:34:09 2020
From: jo@h@m@u|r|ch @end|ng |rom gm@||@com (Joshua Ulrich)
Date: Sat, 26 Sep 2020 07:34:09 -0500
Subject: [R-SIG-Finance] Web Scraping of SPY Stocks
In-Reply-To: <1623712302.824412.1601064744435@mail.yahoo.com>
References: <MN2PR10MB4272C11AF351B15FF7600CD4843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
 <8663828E-D007-4E97-AF72-1A1F7F4D07CB@gmail.com>
 <MN2PR10MB42725D3402175BE33B035262843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
 <87zh5inzuw.fsf@enricoschumann.net>
 <MN2PR10MB427217B6AB0F5A9829179CCF84360@MN2PR10MB4272.namprd10.prod.outlook.com>
 <1623712302.824412.1601064744435@mail.yahoo.com>
Message-ID: <CAPPM_gR1kppDZhQ61zm_pT4Q2DBGH3wA2R1KroPv9EmURzUgmw@mail.gmail.com>

Please repost your message in plain text (as the posting guide
requests).  As you can see below, your HTML message was mangled when
the list server converted it to plain text.

On Fri, Sep 25, 2020 at 3:12 PM AIE ATUMA via R-SIG-Finance
<r-sig-finance at r-project.org> wrote:
>
> Dear All,
> Please I need help. I ran the below function and got the highlighted error message. How can I correct it?
> library(rvest)# Web-scrape SP500 stock listsp_500 <- read_html("https://en.wikipedia.org/wiki/List_of_S%26P_500_companies") %>%html_node("table.wikitable") %>%html_table() %>%select(`Ticker symbol`, Security, `GICS Sector`, `GICS Sub Industry`) %>%as_tibble()# Format namesnames(sp_500) <- sp_500 %>%names() %>%str_to_lower() %>%make.names()# Show resultssp_500
> Error Message:
> Error: Can't subset columns that don't exist.x Column `Ticker symbol` doesn't exist.Run `rlang::last_error()` to see where the error occurred.
>
> The second function and the error is below:
> get_stock_prices <- function(ticker), return_format = "tibble", ...) {  # Get stock prices  stock_prices_xts <- getSymbols(Symbols = ticker, auto.assign = FALSE, ...)  # Rename  names(stock_prices_xts) <- c("Open", "High", "Low", "Close", "Volume", "Adjusted")  # Return in xts format if tibble is not specified  if (return_format == "tibble") {    stock_prices <- stock_prices_xts %>%      as_tibble() %>%      rownames_to_column(var = "Date") %>%      mutate(Date = mdy(Date))  } else {    stock_prices <- stock_prices_xts  }  stock_prices}
> "MA" %>%  get_stock_prices(return_format = 'tibble')%>%head()
> ERROR MESSAGE:
> Warning message:All formats failed to parse. No formats found.
>
>
> Thank You and Best Regards, Emeka I. AtumaIntegrity - Walk Your Talk Don't Talk Your Work
>
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From ezr@ @end|ng |rom |@ndtucker@com  Sat Sep 26 16:53:00 2020
From: ezr@ @end|ng |rom |@ndtucker@com (Ezra Tucker)
Date: Sat, 26 Sep 2020 14:53:00 +0000
Subject: [R-SIG-Finance] Web Scraping of SPY Stocks
In-Reply-To: <CAPPM_gR1kppDZhQ61zm_pT4Q2DBGH3wA2R1KroPv9EmURzUgmw@mail.gmail.com>
References: <MN2PR10MB4272C11AF351B15FF7600CD4843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
 <8663828E-D007-4E97-AF72-1A1F7F4D07CB@gmail.com>
 <MN2PR10MB42725D3402175BE33B035262843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
 <87zh5inzuw.fsf@enricoschumann.net>
 <MN2PR10MB427217B6AB0F5A9829179CCF84360@MN2PR10MB4272.namprd10.prod.outlook.com>
 <1623712302.824412.1601064744435@mail.yahoo.com>
 <CAPPM_gR1kppDZhQ61zm_pT4Q2DBGH3wA2R1KroPv9EmURzUgmw@mail.gmail.com>
Message-ID: <C-dauQyT4X64FWPDQXfVibChVagkPUPUu4L-DliJ6mPkHMVCNyig0VZJoJBBrkMvzabOFhhe7ep27SMHz73oD9JVSvm__4gqB6r3QiCdWPM=@landtucker.com>

Hey there,

The error message has it right, there is no column "Ticker Symbol" in that table. When you look at the wikipedia page, the column's name is simply "Symbol".

For general debugging when using magrittr pipes I find it useful to copy/paste each expression, adding one additional pipe at a time to see at which stage the error message. Also, please make sure to include all of the libraries you were using- in this case, appears to be rvest, magrittr, and stringr.

With regards to that function, agreed with Joshua- if the above doesn't resolve all your issues, please re-post without html formatting as it's tough to see what's going on.

Hope that helps!

-Ezra

--
ezra at landtucker.com
m:?818-203-0269
LinkedIn:?linkedin.com/in/ezztucker
Github:?github.com/minimenchmuncher

??????? Original Message ???????
On Saturday, September 26, 2020 8:34 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:

> Please repost your message in plain text (as the posting guide
> requests). As you can see below, your HTML message was mangled when
> the list server converted it to plain text.
>
> On Fri, Sep 25, 2020 at 3:12 PM AIE ATUMA via R-SIG-Finance
> r-sig-finance at r-project.org wrote:
>
> > Dear All,
> > Please I need help. I ran the below function and got the highlighted error message. How can I correct it?
> > library(rvest)# Web-scrape SP500 stock listsp_500 <- read_html("https://en.wikipedia.org/wiki/List_of_S%26P_500_companies") %>%html_node("table.wikitable") %>%html_table() %>%select(`Ticker symbol`, Security, `GICS Sector`, `GICS Sub Industry`) %>%as_tibble()# Format namesnames(sp_500) <- sp_500 %>%names() %>%str_to_lower() %>%make.names()# Show resultssp_500
> > Error Message:
> > Error: Can't subset columns that don't exist.x Column `Ticker symbol` doesn't exist.Run `rlang::last_error()` to see where the error occurred.
> > The second function and the error is below:
> > get_stock_prices <- function(ticker), return_format = "tibble", ...) { # Get stock prices stock_prices_xts <- getSymbols(Symbols = ticker, auto.assign = FALSE, ...) # Rename names(stock_prices_xts) <- c("Open", "High", "Low", "Close", "Volume", "Adjusted") # Return in xts format if tibble is not specified if (return_format == "tibble") { stock_prices <- stock_prices_xts %>% as_tibble() %>% rownames_to_column(var = "Date") %>% mutate(Date = mdy(Date)) } else { stock_prices <- stock_prices_xts } stock_prices}
> > "MA" %>% get_stock_prices(return_format = 'tibble')%>%head()
> > ERROR MESSAGE:
> > Warning message:All formats failed to parse. No formats found.
> > Thank You and Best Regards, Emeka I. AtumaIntegrity - Walk Your Talk Don't Talk Your Work
> >
> >         [[alternative HTML version deleted]]
> >
> >
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions should go.
>
> --
>
> Joshua Ulrich | about.me/joshuaulrich
> FOSS Trading | www.fosstrading.com
>
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gttg@2000 @end|ng |rom y@hoo@com  Sat Sep 26 19:09:25 2020
From: gttg@2000 @end|ng |rom y@hoo@com (AIE ATUMA)
Date: Sat, 26 Sep 2020 17:09:25 +0000 (UTC)
Subject: [R-SIG-Finance] Web Scraping of SPY Stocks
In-Reply-To: <1623712302.824412.1601064744435@mail.yahoo.com>
References: <MN2PR10MB4272C11AF351B15FF7600CD4843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
 <8663828E-D007-4E97-AF72-1A1F7F4D07CB@gmail.com>
 <MN2PR10MB42725D3402175BE33B035262843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
 <87zh5inzuw.fsf@enricoschumann.net>
 <MN2PR10MB427217B6AB0F5A9829179CCF84360@MN2PR10MB4272.namprd10.prod.outlook.com>
 <1623712302.824412.1601064744435@mail.yahoo.com>
Message-ID: <1251056444.1001144.1601140165975@mail.yahoo.com>

Dear All,

Please I need help. I ran the below function and got the highlighted error message. How can I correct it?

library(rvest)
library(rvest)
library(pbapply)
library(TTR)
library(dygraphs)
library(lubridate)
library(tidyquant)
library(timetk)
pacman::p_load(dygraphs,DT,quantmod)


# Web-scrape SP500 stock list
sp_500 <- read_html("https://en.wikipedia.org/wiki/List_of_S%26P_500_companies") %>%
html_node("table.wikitable") %>%
html_table() %>%
select(`Ticker symbol`, Security, `GICS Sector`, `GICS Sub Industry`) %>%
as_tibble()
# Format names
names(sp_500) <- sp_500 %>%
names() %>%
str_to_lower() %>%
make.names()
# Show results
sp_500

Error Message:

Error: Can't subset columns that don't exist.
x Column `Ticker symbol` doesn't exist.
Run `rlang::last_error()` to see where the error occurred.


The second function and the error is below:

get_stock_prices <- function(ticker), return_format = "tibble", ...) {
? # Get stock prices
? stock_prices_xts <- getSymbols(Symbols = ticker, auto.assign = FALSE, ...)
? # Rename
? names(stock_prices_xts) <- c("Open", "High", "Low", "Close", "Volume", "Adjusted")
? # Return in xts format if tibble is not specified
? if (return_format == "tibble") {
? ? stock_prices <- stock_prices_xts %>%
? ? ? as_tibble() %>%
? ? ? rownames_to_column(var = "Date") %>%
? ? ? mutate(Date = mdy(Date))
? } else {
? ? stock_prices <- stock_prices_xts
? }
? stock_prices
}

"MA" %>%
? get_stock_prices(return_format = 'tibble')%>%head()

ERROR MESSAGE:

Warning message:
All formats failed to parse. No formats found.?



Thank You and Best Regards,?
Emeka I. Atuma
Integrity - Walk Your Talk Don't Talk Your Work






On Friday, 25 September 2020, 21:12:24 GMT+1, AIE ATUMA <gttga2000 at yahoo.com> wrote: 





Dear All,

Please I need help. I ran the below function and got the highlighted error message. How can I correct it?

library(rvest)
# Web-scrape SP500 stock list
sp_500 <- read_html("https://en.wikipedia.org/wiki/List_of_S%26P_500_companies") %>%
html_node("table.wikitable") %>%
html_table() %>%
select(`Ticker symbol`, Security, `GICS Sector`, `GICS Sub Industry`) %>%
as_tibble()
# Format names
names(sp_500) <- sp_500 %>%
names() %>%
str_to_lower() %>%
make.names()
# Show results
sp_500

Error Message:

Error: Can't subset columns that don't exist.
x Column `Ticker symbol` doesn't exist.
Run `rlang::last_error()` to see where the error occurred.


The second function and the error is below:

get_stock_prices <- function(ticker), return_format = "tibble", ...) {
? # Get stock prices
? stock_prices_xts <- getSymbols(Symbols = ticker, auto.assign = FALSE, ...)
? # Rename
? names(stock_prices_xts) <- c("Open", "High", "Low", "Close", "Volume", "Adjusted")
? # Return in xts format if tibble is not specified
? if (return_format == "tibble") {
? ? stock_prices <- stock_prices_xts %>%
? ? ? as_tibble() %>%
? ? ? rownames_to_column(var = "Date") %>%
? ? ? mutate(Date = mdy(Date))
? } else {
? ? stock_prices <- stock_prices_xts
? }
? stock_prices
}

"MA" %>%
? get_stock_prices(return_format = 'tibble')%>%head()

ERROR MESSAGE:

Warning message:
All formats failed to parse. No formats found.?



Thank You and Best Regards,?
Emeka I. Atuma
Integrity - Walk Your Talk Don't Talk Your Work


From gttg@2000 @end|ng |rom y@hoo@com  Sat Sep 26 19:33:56 2020
From: gttg@2000 @end|ng |rom y@hoo@com (AIE ATUMA)
Date: Sat, 26 Sep 2020 17:33:56 +0000 (UTC)
Subject: [R-SIG-Finance] Web Scraping of SPY Stocks
In-Reply-To: <1251056444.1001144.1601140165975@mail.yahoo.com>
References: <MN2PR10MB4272C11AF351B15FF7600CD4843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
 <8663828E-D007-4E97-AF72-1A1F7F4D07CB@gmail.com>
 <MN2PR10MB42725D3402175BE33B035262843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
 <87zh5inzuw.fsf@enricoschumann.net>
 <MN2PR10MB427217B6AB0F5A9829179CCF84360@MN2PR10MB4272.namprd10.prod.outlook.com>
 <1623712302.824412.1601064744435@mail.yahoo.com>
 <1251056444.1001144.1601140165975@mail.yahoo.com>
Message-ID: <1142135970.1024063.1601141636714@mail.yahoo.com>

Update:

The second function and the error is below:

get_stock_prices <- function(ticker), return_format = "tibble", ...) {
? # Get stock prices
? stock_prices_xts <- getSymbols(Symbols = ticker, auto.assign = FALSE, ...)
? # Rename
? names(stock_prices_xts) <- c("Open", "High", "Low", "Close", "Volume", "Adjusted")
? # Return in xts format if tibble is not specified
? if (return_format == "tibble") {
? ? stock_prices <- stock_prices_xts %>%
? ? ? as_tibble() %>%
? ? ? rownames_to_column(var = "Date") %>%
? ? ? mutate(Date = mdy(Date))
? } else {
? ? stock_prices <- stock_prices_xts
? }
? stock_prices
}

"MA" %>%
? get_stock_prices(return_format = 'tibble')%>%head()

ERROR MESSAGE:

# A tibble: 6 x 7
? Date? ? ? ? Open? High? ?Low Close? ?Volume Adjusted
? <date>? ? ?<dbl> <dbl> <dbl> <dbl>? ? <dbl>? ? <dbl>
1 NA? ? ? ? ? 9.96? 9.97? 9.56? 9.64 26289000? ? ?8.98
2 NA? ? ? ? ? 9.69 10.2? ?9.53 10.1? 27024000? ? ?9.42
3 NA? ? ? ? ?10.1? 10.2? ?9.9? 10.1? 29632000? ? ?9.41
4 NA? ? ? ? ? 9.90 10.2? ?9.9? 10.1? 16006000? ? ?9.41
5 NA? ? ? ? ?10.1? 10.6? 10.1? 10.6? 36952000? ? ?9.85
6 NA? ? ? ? ?10.6? 10.6? 10.3? 10.5? 35099000? ? ?9.76
Warning message:
All formats failed to parse. No formats found.



Thank You and Best Regards,?
Emeka I. Atuma
Integrity - Walk Your Talk Don't Talk Your Work






On Saturday, 26 September 2020, 18:09:51 GMT+1, AIE ATUMA via R-SIG-Finance <r-sig-finance at r-project.org> wrote: 





Dear All,

Please I need help. I ran the below function and got the highlighted error message. How can I correct it?

library(rvest)
library(rvest)
library(pbapply)
library(TTR)
library(dygraphs)
library(lubridate)
library(tidyquant)
library(timetk)
pacman::p_load(dygraphs,DT,quantmod)


# Web-scrape SP500 stock list
sp_500 <- read_html("https://en.wikipedia.org/wiki/List_of_S%26P_500_companies") %>%
html_node("table.wikitable") %>%
html_table() %>%
select(`Ticker symbol`, Security, `GICS Sector`, `GICS Sub Industry`) %>%
as_tibble()
# Format names
names(sp_500) <- sp_500 %>%
names() %>%
str_to_lower() %>%
make.names()
# Show results
sp_500

Error Message:

Error: Can't subset columns that don't exist.
x Column `Ticker symbol` doesn't exist.
Run `rlang::last_error()` to see where the error occurred.


The second function and the error is below:

get_stock_prices <- function(ticker), return_format = "tibble", ...) {
? # Get stock prices
? stock_prices_xts <- getSymbols(Symbols = ticker, auto.assign = FALSE, ...)
? # Rename
? names(stock_prices_xts) <- c("Open", "High", "Low", "Close", "Volume", "Adjusted")
? # Return in xts format if tibble is not specified
? if (return_format == "tibble") {
? ? stock_prices <- stock_prices_xts %>%
? ? ? as_tibble() %>%
? ? ? rownames_to_column(var = "Date") %>%
? ? ? mutate(Date = mdy(Date))
? } else {
? ? stock_prices <- stock_prices_xts
? }
? stock_prices
}

"MA" %>%
? get_stock_prices(return_format = 'tibble')%>%head()

ERROR MESSAGE:

Warning message:
All formats failed to parse. No formats found.?



Thank You and Best Regards,?
Emeka I. Atuma
Integrity - Walk Your Talk Don't Talk Your Work






On Friday, 25 September 2020, 21:12:24 GMT+1, AIE ATUMA <gttga2000 at yahoo.com> wrote: 





Dear All,

Please I need help. I ran the below function and got the highlighted error message. How can I correct it?

library(rvest)
# Web-scrape SP500 stock list
sp_500 <- read_html("https://en.wikipedia.org/wiki/List_of_S%26P_500_companies") %>%
html_node("table.wikitable") %>%
html_table() %>%
select(`Ticker symbol`, Security, `GICS Sector`, `GICS Sub Industry`) %>%
as_tibble()
# Format names
names(sp_500) <- sp_500 %>%
names() %>%
str_to_lower() %>%
make.names()
# Show results
sp_500

Error Message:

Error: Can't subset columns that don't exist.
x Column `Ticker symbol` doesn't exist.
Run `rlang::last_error()` to see where the error occurred.


The second function and the error is below:

get_stock_prices <- function(ticker), return_format = "tibble", ...) {
? # Get stock prices
? stock_prices_xts <- getSymbols(Symbols = ticker, auto.assign = FALSE, ...)
? # Rename
? names(stock_prices_xts) <- c("Open", "High", "Low", "Close", "Volume", "Adjusted")
? # Return in xts format if tibble is not specified
? if (return_format == "tibble") {
? ? stock_prices <- stock_prices_xts %>%
? ? ? as_tibble() %>%
? ? ? rownames_to_column(var = "Date") %>%
? ? ? mutate(Date = mdy(Date))
? } else {
? ? stock_prices <- stock_prices_xts
? }
? stock_prices
}

"MA" %>%
? get_stock_prices(return_format = 'tibble')%>%head()

ERROR MESSAGE:

Warning message:
All formats failed to parse. No formats found.?



Thank You and Best Regards,?
Emeka I. Atuma
Integrity - Walk Your Talk Don't Talk Your Work


_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From mmc|e@ry6 @end|ng |rom gm@||@com  Sat Sep 26 20:19:14 2020
From: mmc|e@ry6 @end|ng |rom gm@||@com (Matt Cleary)
Date: Sat, 26 Sep 2020 14:19:14 -0400
Subject: [R-SIG-Finance] Web Scraping of SPY Stocks
In-Reply-To: <1142135970.1024063.1601141636714@mail.yahoo.com>
References: <MN2PR10MB4272C11AF351B15FF7600CD4843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
 <8663828E-D007-4E97-AF72-1A1F7F4D07CB@gmail.com>
 <MN2PR10MB42725D3402175BE33B035262843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
 <87zh5inzuw.fsf@enricoschumann.net>
 <MN2PR10MB427217B6AB0F5A9829179CCF84360@MN2PR10MB4272.namprd10.prod.outlook.com>
 <1623712302.824412.1601064744435@mail.yahoo.com>
 <1251056444.1001144.1601140165975@mail.yahoo.com>
 <1142135970.1024063.1601141636714@mail.yahoo.com>
Message-ID: <CADJ2ahKHsRrc8+CsqgfDPvauqkSiG8U1FnkoC4WX9xCVzW4Nzg@mail.gmail.com>

Hi Emeka,

When you convert the dataset to a tibble you are losing the date values
stored in the rownames. I'd recommend storing the dates externally in the
function before before making the conversion then adding them back with the
mutate function:

library(quantmod)
library(dplyr)
library(tibble)
library(rvest)
library(lubridate)

# Web-scrape SP500 stock list
sp_500 <- read_html("
https://en.wikipedia.org/wiki/List_of_S%26P_500_companies") %>%
  html_node("table.wikitable") %>%
  html_table() %>%
  select(`Symbol`, Security, `GICS Sector`, `GICS Sub Industry`) %>%
  as_tibble()

# Format names
names(sp_500) <- sp_500 %>%
  names() %>%
  str_to_lower() %>%
  make.names()

# Show results
sp_500

get_stock_prices <- function(ticker, return_format = "tibble", ...){

  # Get stock prices
  stock_prices_xts <- getSymbols(Symbols = ticker, auto.assign = FALSE, ...)

  dates <- as.Date(rownames(as.matrix(stock_prices_xts)))

  # Rename
  names(stock_prices_xts) <- c("Open", "High", "Low", "Close", "Volume",
"Adjusted")

  # Return in xts format if tibble is not specified
  if (return_format == "tibble") {
    stock_prices <- stock_prices_xts %>%
      as_tibble() %>%
      mutate(Date = dates)
  } else {
    stock_prices <- stock_prices_xts
  }
  stock_prices
}

"MA" %>%
  get_stock_prices(return_format = 'tibble') %>%
  head()

Best,

Matt

On Sat, Sep 26, 2020 at 1:34 PM AIE ATUMA via R-SIG-Finance <
r-sig-finance at r-project.org> wrote:

> Update:
>
> The second function and the error is below:
>
> get_stock_prices <- function(ticker), return_format = "tibble", ...) {
>   # Get stock prices
>   stock_prices_xts <- getSymbols(Symbols = ticker, auto.assign = FALSE,
> ...)
>   # Rename
>   names(stock_prices_xts) <- c("Open", "High", "Low", "Close", "Volume",
> "Adjusted")
>   # Return in xts format if tibble is not specified
>   if (return_format == "tibble") {
>     stock_prices <- stock_prices_xts %>%
>       as_tibble() %>%
>       rownames_to_column(var = "Date") %>%
>       mutate(Date = mdy(Date))
>   } else {
>     stock_prices <- stock_prices_xts
>   }
>   stock_prices
> }
>
> "MA" %>%
>   get_stock_prices(return_format = 'tibble')%>%head()
>
> ERROR MESSAGE:
>
> # A tibble: 6 x 7
>   Date        Open  High   Low Close   Volume Adjusted
>   <date>     <dbl> <dbl> <dbl> <dbl>    <dbl>    <dbl>
> 1 NA          9.96  9.97  9.56  9.64 26289000     8.98
> 2 NA          9.69 10.2   9.53 10.1  27024000     9.42
> 3 NA         10.1  10.2   9.9  10.1  29632000     9.41
> 4 NA          9.90 10.2   9.9  10.1  16006000     9.41
> 5 NA         10.1  10.6  10.1  10.6  36952000     9.85
> 6 NA         10.6  10.6  10.3  10.5  35099000     9.76
> Warning message:
> All formats failed to parse. No formats found.
>
>
>
> Thank You and Best Regards,
> Emeka I. Atuma
> Integrity - Walk Your Talk Don't Talk Your Work
>
>
>
>
>
>
> On Saturday, 26 September 2020, 18:09:51 GMT+1, AIE ATUMA via
> R-SIG-Finance <r-sig-finance at r-project.org> wrote:
>
>
>
>
>
> Dear All,
>
> Please I need help. I ran the below function and got the highlighted error
> message. How can I correct it?
>
> library(rvest)
> library(rvest)
> library(pbapply)
> library(TTR)
> library(dygraphs)
> library(lubridate)
> library(tidyquant)
> library(timetk)
> pacman::p_load(dygraphs,DT,quantmod)
>
>
> # Web-scrape SP500 stock list
> sp_500 <- read_html("
> https://en.wikipedia.org/wiki/List_of_S%26P_500_companies") %>%
> html_node("table.wikitable") %>%
> html_table() %>%
> select(`Ticker symbol`, Security, `GICS Sector`, `GICS Sub Industry`) %>%
> as_tibble()
> # Format names
> names(sp_500) <- sp_500 %>%
> names() %>%
> str_to_lower() %>%
> make.names()
> # Show results
> sp_500
>
> Error Message:
>
> Error: Can't subset columns that don't exist.
> x Column `Ticker symbol` doesn't exist.
> Run `rlang::last_error()` to see where the error occurred.
>
>
> The second function and the error is below:
>
> get_stock_prices <- function(ticker), return_format = "tibble", ...) {
>   # Get stock prices
>   stock_prices_xts <- getSymbols(Symbols = ticker, auto.assign = FALSE,
> ...)
>   # Rename
>   names(stock_prices_xts) <- c("Open", "High", "Low", "Close", "Volume",
> "Adjusted")
>   # Return in xts format if tibble is not specified
>   if (return_format == "tibble") {
>     stock_prices <- stock_prices_xts %>%
>       as_tibble() %>%
>       rownames_to_column(var = "Date") %>%
>       mutate(Date = mdy(Date))
>   } else {
>     stock_prices <- stock_prices_xts
>   }
>   stock_prices
> }
>
> "MA" %>%
>   get_stock_prices(return_format = 'tibble')%>%head()
>
> ERROR MESSAGE:
>
> Warning message:
> All formats failed to parse. No formats found.
>
>
>
> Thank You and Best Regards,
> Emeka I. Atuma
> Integrity - Walk Your Talk Don't Talk Your Work
>
>
>
>
>
>
> On Friday, 25 September 2020, 21:12:24 GMT+1, AIE ATUMA <
> gttga2000 at yahoo.com> wrote:
>
>
>
>
>
> Dear All,
>
> Please I need help. I ran the below function and got the highlighted error
> message. How can I correct it?
>
> library(rvest)
> # Web-scrape SP500 stock list
> sp_500 <- read_html("
> https://en.wikipedia.org/wiki/List_of_S%26P_500_companies") %>%
> html_node("table.wikitable") %>%
> html_table() %>%
> select(`Ticker symbol`, Security, `GICS Sector`, `GICS Sub Industry`) %>%
> as_tibble()
> # Format names
> names(sp_500) <- sp_500 %>%
> names() %>%
> str_to_lower() %>%
> make.names()
> # Show results
> sp_500
>
> Error Message:
>
> Error: Can't subset columns that don't exist.
> x Column `Ticker symbol` doesn't exist.
> Run `rlang::last_error()` to see where the error occurred.
>
>
> The second function and the error is below:
>
> get_stock_prices <- function(ticker), return_format = "tibble", ...) {
>   # Get stock prices
>   stock_prices_xts <- getSymbols(Symbols = ticker, auto.assign = FALSE,
> ...)
>   # Rename
>   names(stock_prices_xts) <- c("Open", "High", "Low", "Close", "Volume",
> "Adjusted")
>   # Return in xts format if tibble is not specified
>   if (return_format == "tibble") {
>     stock_prices <- stock_prices_xts %>%
>       as_tibble() %>%
>       rownames_to_column(var = "Date") %>%
>       mutate(Date = mdy(Date))
>   } else {
>     stock_prices <- stock_prices_xts
>   }
>   stock_prices
> }
>
> "MA" %>%
>   get_stock_prices(return_format = 'tibble')%>%head()
>
> ERROR MESSAGE:
>
> Warning message:
> All formats failed to parse. No formats found.
>
>
>
> Thank You and Best Regards,
> Emeka I. Atuma
> Integrity - Walk Your Talk Don't Talk Your Work
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From gttg@2000 @end|ng |rom y@hoo@com  Sat Sep 26 23:11:58 2020
From: gttg@2000 @end|ng |rom y@hoo@com (AIE ATUMA)
Date: Sat, 26 Sep 2020 21:11:58 +0000 (UTC)
Subject: [R-SIG-Finance] Web Scraping of SPY Stocks
In-Reply-To: <CADJ2ahKHsRrc8+CsqgfDPvauqkSiG8U1FnkoC4WX9xCVzW4Nzg@mail.gmail.com>
References: <MN2PR10MB4272C11AF351B15FF7600CD4843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
 <8663828E-D007-4E97-AF72-1A1F7F4D07CB@gmail.com>
 <MN2PR10MB42725D3402175BE33B035262843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
 <87zh5inzuw.fsf@enricoschumann.net>
 <MN2PR10MB427217B6AB0F5A9829179CCF84360@MN2PR10MB4272.namprd10.prod.outlook.com>
 <1623712302.824412.1601064744435@mail.yahoo.com>
 <1251056444.1001144.1601140165975@mail.yahoo.com>
 <1142135970.1024063.1601141636714@mail.yahoo.com>
 <CADJ2ahKHsRrc8+CsqgfDPvauqkSiG8U1FnkoC4WX9xCVzW4Nzg@mail.gmail.com>
Message-ID: <1706780681.1051313.1601154718363@mail.yahoo.com>

Dear Matt,

This worked but the Date column is presented as the last column as against the second column.

Thank You and Best Regards,?
Emeka I. Atuma
Integrity - Walk Your Talk Don't Talk Your Work






On Saturday, 26 September 2020, 19:19:28 GMT+1, Matt Cleary <mmcleary6 at gmail.com> wrote: 





Hi Emeka,

When you convert the dataset to a tibble you are losing the date values stored in the rownames. I'd recommend storing the dates externally in the function before before making the conversion then adding them back with the mutate function:

library(quantmod)
library(dplyr)
library(tibble)
library(rvest)
library(lubridate)

# Web-scrape SP500 stock list
sp_500 <- read_html("https://en.wikipedia.org/wiki/List_of_S%26P_500_companies") %>%
? html_node("table.wikitable") %>%
? html_table() %>%
? select(`Symbol`, Security, `GICS Sector`, `GICS Sub Industry`) %>%
? as_tibble()

# Format names
names(sp_500) <- sp_500 %>%
? names() %>%
? str_to_lower() %>%
? make.names()

# Show results
sp_500

get_stock_prices <- function(ticker, return_format = "tibble", ...){
? 
? # Get stock prices
? stock_prices_xts <- getSymbols(Symbols = ticker, auto.assign = FALSE, ...)
? 
? dates <- as.Date(rownames(as.matrix(stock_prices_xts)))
? 
? # Rename
? names(stock_prices_xts) <- c("Open", "High", "Low", "Close", "Volume", "Adjusted")
? 
? # Return in xts format if tibble is not specified
? if (return_format == "tibble") {
? ? stock_prices <- stock_prices_xts %>%
? ? ? as_tibble() %>%
? ? ? mutate(Date = dates)
? } else {
? ? stock_prices <- stock_prices_xts
? }
? stock_prices
}

"MA" %>%
? get_stock_prices(return_format = 'tibble') %>%
? head()

Best,?

Matt

On Sat, Sep 26, 2020 at 1:34 PM AIE ATUMA via R-SIG-Finance <r-sig-finance at r-project.org> wrote:
> Update:
> 
> The second function and the error is below:
> 
> get_stock_prices <- function(ticker), return_format = "tibble", ...) {
> ? # Get stock prices
> ? stock_prices_xts <- getSymbols(Symbols = ticker, auto.assign = FALSE, ...)
> ? # Rename
> ? names(stock_prices_xts) <- c("Open", "High", "Low", "Close", "Volume", "Adjusted")
> ? # Return in xts format if tibble is not specified
> ? if (return_format == "tibble") {
> ? ? stock_prices <- stock_prices_xts %>%
> ? ? ? as_tibble() %>%
> ? ? ? rownames_to_column(var = "Date") %>%
> ? ? ? mutate(Date = mdy(Date))
> ? } else {
> ? ? stock_prices <- stock_prices_xts
> ? }
> ? stock_prices
> }
> 
> "MA" %>%
> ? get_stock_prices(return_format = 'tibble')%>%head()
> 
> ERROR MESSAGE:
> 
> # A tibble: 6 x 7
> ? Date? ? ? ? Open? High? ?Low Close? ?Volume Adjusted
> ? <date>? ? ?<dbl> <dbl> <dbl> <dbl>? ? <dbl>? ? <dbl>
> 1 NA? ? ? ? ? 9.96? 9.97? 9.56? 9.64 26289000? ? ?8.98
> 2 NA? ? ? ? ? 9.69 10.2? ?9.53 10.1? 27024000? ? ?9.42
> 3 NA? ? ? ? ?10.1? 10.2? ?9.9? 10.1? 29632000? ? ?9.41
> 4 NA? ? ? ? ? 9.90 10.2? ?9.9? 10.1? 16006000? ? ?9.41
> 5 NA? ? ? ? ?10.1? 10.6? 10.1? 10.6? 36952000? ? ?9.85
> 6 NA? ? ? ? ?10.6? 10.6? 10.3? 10.5? 35099000? ? ?9.76
> Warning message:
> All formats failed to parse. No formats found.
> 
> 
> 
> Thank You and Best Regards,?
> Emeka I. Atuma
> Integrity - Walk Your Talk Don't Talk Your Work
> 
> 
> 
> 
> 
> 
> On Saturday, 26 September 2020, 18:09:51 GMT+1, AIE ATUMA via R-SIG-Finance <r-sig-finance at r-project.org> wrote: 
> 
> 
> 
> 
> 
> Dear All,
> 
> Please I need help. I ran the below function and got the highlighted error message. How can I correct it?
> 
> library(rvest)
> library(rvest)
> library(pbapply)
> library(TTR)
> library(dygraphs)
> library(lubridate)
> library(tidyquant)
> library(timetk)
> pacman::p_load(dygraphs,DT,quantmod)
> 
> 
> # Web-scrape SP500 stock list
> sp_500 <- read_html("https://en.wikipedia.org/wiki/List_of_S%26P_500_companies") %>%
> html_node("table.wikitable") %>%
> html_table() %>%
> select(`Ticker symbol`, Security, `GICS Sector`, `GICS Sub Industry`) %>%
> as_tibble()
> # Format names
> names(sp_500) <- sp_500 %>%
> names() %>%
> str_to_lower() %>%
> make.names()
> # Show results
> sp_500
> 
> Error Message:
> 
> Error: Can't subset columns that don't exist.
> x Column `Ticker symbol` doesn't exist.
> Run `rlang::last_error()` to see where the error occurred.
> 
> 
> The second function and the error is below:
> 
> get_stock_prices <- function(ticker), return_format = "tibble", ...) {
> ? # Get stock prices
> ? stock_prices_xts <- getSymbols(Symbols = ticker, auto.assign = FALSE, ...)
> ? # Rename
> ? names(stock_prices_xts) <- c("Open", "High", "Low", "Close", "Volume", "Adjusted")
> ? # Return in xts format if tibble is not specified
> ? if (return_format == "tibble") {
> ? ? stock_prices <- stock_prices_xts %>%
> ? ? ? as_tibble() %>%
> ? ? ? rownames_to_column(var = "Date") %>%
> ? ? ? mutate(Date = mdy(Date))
> ? } else {
> ? ? stock_prices <- stock_prices_xts
> ? }
> ? stock_prices
> }
> 
> "MA" %>%
> ? get_stock_prices(return_format = 'tibble')%>%head()
> 
> ERROR MESSAGE:
> 
> Warning message:
> All formats failed to parse. No formats found.?
> 
> 
> 
> Thank You and Best Regards,?
> Emeka I. Atuma
> Integrity - Walk Your Talk Don't Talk Your Work
> 
> 
> 
> 
> 
> 
> On Friday, 25 September 2020, 21:12:24 GMT+1, AIE ATUMA <gttga2000 at yahoo.com> wrote: 
> 
> 
> 
> 
> 
> Dear All,
> 
> Please I need help. I ran the below function and got the highlighted error message. How can I correct it?
> 
> library(rvest)
> # Web-scrape SP500 stock list
> sp_500 <- read_html("https://en.wikipedia.org/wiki/List_of_S%26P_500_companies") %>%
> html_node("table.wikitable") %>%
> html_table() %>%
> select(`Ticker symbol`, Security, `GICS Sector`, `GICS Sub Industry`) %>%
> as_tibble()
> # Format names
> names(sp_500) <- sp_500 %>%
> names() %>%
> str_to_lower() %>%
> make.names()
> # Show results
> sp_500
> 
> Error Message:
> 
> Error: Can't subset columns that don't exist.
> x Column `Ticker symbol` doesn't exist.
> Run `rlang::last_error()` to see where the error occurred.
> 
> 
> The second function and the error is below:
> 
> get_stock_prices <- function(ticker), return_format = "tibble", ...) {
> ? # Get stock prices
> ? stock_prices_xts <- getSymbols(Symbols = ticker, auto.assign = FALSE, ...)
> ? # Rename
> ? names(stock_prices_xts) <- c("Open", "High", "Low", "Close", "Volume", "Adjusted")
> ? # Return in xts format if tibble is not specified
> ? if (return_format == "tibble") {
> ? ? stock_prices <- stock_prices_xts %>%
> ? ? ? as_tibble() %>%
> ? ? ? rownames_to_column(var = "Date") %>%
> ? ? ? mutate(Date = mdy(Date))
> ? } else {
> ? ? stock_prices <- stock_prices_xts
> ? }
> ? stock_prices
> }
> 
> "MA" %>%
> ? get_stock_prices(return_format = 'tibble')%>%head()
> 
> ERROR MESSAGE:
> 
> Warning message:
> All formats failed to parse. No formats found.?
> 
> 
> 
> Thank You and Best Regards,?
> Emeka I. Atuma
> Integrity - Walk Your Talk Don't Talk Your Work
> 
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
> 


From mmc|e@ry6 @end|ng |rom gm@||@com  Sat Sep 26 23:16:07 2020
From: mmc|e@ry6 @end|ng |rom gm@||@com (Matt Cleary)
Date: Sat, 26 Sep 2020 17:16:07 -0400
Subject: [R-SIG-Finance] Web Scraping of SPY Stocks
In-Reply-To: <1706780681.1051313.1601154718363@mail.yahoo.com>
References: <MN2PR10MB4272C11AF351B15FF7600CD4843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
 <8663828E-D007-4E97-AF72-1A1F7F4D07CB@gmail.com>
 <MN2PR10MB42725D3402175BE33B035262843A0@MN2PR10MB4272.namprd10.prod.outlook.com>
 <87zh5inzuw.fsf@enricoschumann.net>
 <MN2PR10MB427217B6AB0F5A9829179CCF84360@MN2PR10MB4272.namprd10.prod.outlook.com>
 <1623712302.824412.1601064744435@mail.yahoo.com>
 <1251056444.1001144.1601140165975@mail.yahoo.com>
 <1142135970.1024063.1601141636714@mail.yahoo.com>
 <CADJ2ahKHsRrc8+CsqgfDPvauqkSiG8U1FnkoC4WX9xCVzW4Nzg@mail.gmail.com>
 <1706780681.1051313.1601154718363@mail.yahoo.com>
Message-ID: <CADJ2ahK99vjeGOYbCUGjc1J8bVGu-tBtFkaLmn8Jdb57e-We6A@mail.gmail.com>

You can use a select() function after the mutate function to rearrange the
columns if need be.

On Sat, Sep 26, 2020, 5:11 PM AIE ATUMA <gttga2000 at yahoo.com> wrote:

> Dear Matt,
>
> This worked but the Date column is presented as the last column as against
> the second column.
>
> Thank You and Best Regards,
> Emeka I. Atuma
> Integrity - Walk Your Talk Don't Talk Your Work
>
>
>
>
>
>
> On Saturday, 26 September 2020, 19:19:28 GMT+1, Matt Cleary <
> mmcleary6 at gmail.com> wrote:
>
>
>
>
>
> Hi Emeka,
>
> When you convert the dataset to a tibble you are losing the date values
> stored in the rownames. I'd recommend storing the dates externally in the
> function before before making the conversion then adding them back with the
> mutate function:
>
> library(quantmod)
> library(dplyr)
> library(tibble)
> library(rvest)
> library(lubridate)
>
> # Web-scrape SP500 stock list
> sp_500 <- read_html("
> https://en.wikipedia.org/wiki/List_of_S%26P_500_companies") %>%
>   html_node("table.wikitable") %>%
>   html_table() %>%
>   select(`Symbol`, Security, `GICS Sector`, `GICS Sub Industry`) %>%
>   as_tibble()
>
> # Format names
> names(sp_500) <- sp_500 %>%
>   names() %>%
>   str_to_lower() %>%
>   make.names()
>
> # Show results
> sp_500
>
> get_stock_prices <- function(ticker, return_format = "tibble", ...){
>
>   # Get stock prices
>   stock_prices_xts <- getSymbols(Symbols = ticker, auto.assign = FALSE,
> ...)
>
>   dates <- as.Date(rownames(as.matrix(stock_prices_xts)))
>
>   # Rename
>   names(stock_prices_xts) <- c("Open", "High", "Low", "Close", "Volume",
> "Adjusted")
>
>   # Return in xts format if tibble is not specified
>   if (return_format == "tibble") {
>     stock_prices <- stock_prices_xts %>%
>       as_tibble() %>%
>       mutate(Date = dates)
>   } else {
>     stock_prices <- stock_prices_xts
>   }
>   stock_prices
> }
>
> "MA" %>%
>   get_stock_prices(return_format = 'tibble') %>%
>   head()
>
> Best,
>
> Matt
>
> On Sat, Sep 26, 2020 at 1:34 PM AIE ATUMA via R-SIG-Finance <
> r-sig-finance at r-project.org> wrote:
> > Update:
> >
> > The second function and the error is below:
> >
> > get_stock_prices <- function(ticker), return_format = "tibble", ...) {
> >   # Get stock prices
> >   stock_prices_xts <- getSymbols(Symbols = ticker, auto.assign = FALSE,
> ...)
> >   # Rename
> >   names(stock_prices_xts) <- c("Open", "High", "Low", "Close", "Volume",
> "Adjusted")
> >   # Return in xts format if tibble is not specified
> >   if (return_format == "tibble") {
> >     stock_prices <- stock_prices_xts %>%
> >       as_tibble() %>%
> >       rownames_to_column(var = "Date") %>%
> >       mutate(Date = mdy(Date))
> >   } else {
> >     stock_prices <- stock_prices_xts
> >   }
> >   stock_prices
> > }
> >
> > "MA" %>%
> >   get_stock_prices(return_format = 'tibble')%>%head()
> >
> > ERROR MESSAGE:
> >
> > # A tibble: 6 x 7
> >   Date        Open  High   Low Close   Volume Adjusted
> >   <date>     <dbl> <dbl> <dbl> <dbl>    <dbl>    <dbl>
> > 1 NA          9.96  9.97  9.56  9.64 26289000     8.98
> > 2 NA          9.69 10.2   9.53 10.1  27024000     9.42
> > 3 NA         10.1  10.2   9.9  10.1  29632000     9.41
> > 4 NA          9.90 10.2   9.9  10.1  16006000     9.41
> > 5 NA         10.1  10.6  10.1  10.6  36952000     9.85
> > 6 NA         10.6  10.6  10.3  10.5  35099000     9.76
> > Warning message:
> > All formats failed to parse. No formats found.
> >
> >
> >
> > Thank You and Best Regards,
> > Emeka I. Atuma
> > Integrity - Walk Your Talk Don't Talk Your Work
> >
> >
> >
> >
> >
> >
> > On Saturday, 26 September 2020, 18:09:51 GMT+1, AIE ATUMA via
> R-SIG-Finance <r-sig-finance at r-project.org> wrote:
> >
> >
> >
> >
> >
> > Dear All,
> >
> > Please I need help. I ran the below function and got the highlighted
> error message. How can I correct it?
> >
> > library(rvest)
> > library(rvest)
> > library(pbapply)
> > library(TTR)
> > library(dygraphs)
> > library(lubridate)
> > library(tidyquant)
> > library(timetk)
> > pacman::p_load(dygraphs,DT,quantmod)
> >
> >
> > # Web-scrape SP500 stock list
> > sp_500 <- read_html("
> https://en.wikipedia.org/wiki/List_of_S%26P_500_companies") %>%
> > html_node("table.wikitable") %>%
> > html_table() %>%
> > select(`Ticker symbol`, Security, `GICS Sector`, `GICS Sub Industry`) %>%
> > as_tibble()
> > # Format names
> > names(sp_500) <- sp_500 %>%
> > names() %>%
> > str_to_lower() %>%
> > make.names()
> > # Show results
> > sp_500
> >
> > Error Message:
> >
> > Error: Can't subset columns that don't exist.
> > x Column `Ticker symbol` doesn't exist.
> > Run `rlang::last_error()` to see where the error occurred.
> >
> >
> > The second function and the error is below:
> >
> > get_stock_prices <- function(ticker), return_format = "tibble", ...) {
> >   # Get stock prices
> >   stock_prices_xts <- getSymbols(Symbols = ticker, auto.assign = FALSE,
> ...)
> >   # Rename
> >   names(stock_prices_xts) <- c("Open", "High", "Low", "Close", "Volume",
> "Adjusted")
> >   # Return in xts format if tibble is not specified
> >   if (return_format == "tibble") {
> >     stock_prices <- stock_prices_xts %>%
> >       as_tibble() %>%
> >       rownames_to_column(var = "Date") %>%
> >       mutate(Date = mdy(Date))
> >   } else {
> >     stock_prices <- stock_prices_xts
> >   }
> >   stock_prices
> > }
> >
> > "MA" %>%
> >   get_stock_prices(return_format = 'tibble')%>%head()
> >
> > ERROR MESSAGE:
> >
> > Warning message:
> > All formats failed to parse. No formats found.
> >
> >
> >
> > Thank You and Best Regards,
> > Emeka I. Atuma
> > Integrity - Walk Your Talk Don't Talk Your Work
> >
> >
> >
> >
> >
> >
> > On Friday, 25 September 2020, 21:12:24 GMT+1, AIE ATUMA <
> gttga2000 at yahoo.com> wrote:
> >
> >
> >
> >
> >
> > Dear All,
> >
> > Please I need help. I ran the below function and got the highlighted
> error message. How can I correct it?
> >
> > library(rvest)
> > # Web-scrape SP500 stock list
> > sp_500 <- read_html("
> https://en.wikipedia.org/wiki/List_of_S%26P_500_companies") %>%
> > html_node("table.wikitable") %>%
> > html_table() %>%
> > select(`Ticker symbol`, Security, `GICS Sector`, `GICS Sub Industry`) %>%
> > as_tibble()
> > # Format names
> > names(sp_500) <- sp_500 %>%
> > names() %>%
> > str_to_lower() %>%
> > make.names()
> > # Show results
> > sp_500
> >
> > Error Message:
> >
> > Error: Can't subset columns that don't exist.
> > x Column `Ticker symbol` doesn't exist.
> > Run `rlang::last_error()` to see where the error occurred.
> >
> >
> > The second function and the error is below:
> >
> > get_stock_prices <- function(ticker), return_format = "tibble", ...) {
> >   # Get stock prices
> >   stock_prices_xts <- getSymbols(Symbols = ticker, auto.assign = FALSE,
> ...)
> >   # Rename
> >   names(stock_prices_xts) <- c("Open", "High", "Low", "Close", "Volume",
> "Adjusted")
> >   # Return in xts format if tibble is not specified
> >   if (return_format == "tibble") {
> >     stock_prices <- stock_prices_xts %>%
> >       as_tibble() %>%
> >       rownames_to_column(var = "Date") %>%
> >       mutate(Date = mdy(Date))
> >   } else {
> >     stock_prices <- stock_prices_xts
> >   }
> >   stock_prices
> > }
> >
> > "MA" %>%
> >   get_stock_prices(return_format = 'tibble')%>%head()
> >
> > ERROR MESSAGE:
> >
> > Warning message:
> > All formats failed to parse. No formats found.
> >
> >
> >
> > Thank You and Best Regards,
> > Emeka I. Atuma
> > Integrity - Walk Your Talk Don't Talk Your Work
> >
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions
> should go.
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions
> should go.
> >
>

	[[alternative HTML version deleted]]


From gttg@2000 @end|ng |rom y@hoo@com  Sat Sep 26 23:16:56 2020
From: gttg@2000 @end|ng |rom y@hoo@com (AIE ATUMA)
Date: Sat, 26 Sep 2020 21:16:56 +0000 (UTC)
Subject: [R-SIG-Finance] GET LOG RETURNS FUNCTION
References: <1287057176.1052895.1601155016499.ref@mail.yahoo.com>
Message-ID: <1287057176.1052895.1601155016499@mail.yahoo.com>

Dear All,

Kindly help to resolve the below.

get_log_returns <- function(x, return_format = "tibble", period = 'daily', ...) {
# Convert tibble to xts
if (!is.xts(x)) {
x <- xts(x[,-1], order.by = x$Date)
}
# Get log returns
log_returns_xts <- periodReturn(x = x$Adjusted, type = 'log', period = period, ...)
# Rename
names(log_returns_xts) <- "Log.Returns"
# Return in xts format if tibble is not specified
if (return_format == "tibble") {
log_returns <- log_returns_xts %>%
as_tibble() %>%
rownames_to_column(var = "Date") %>%
mutate(Date = ymd(Date))
} else {
log_returns <- log_returns_xts
}
log_returns
}
"MA" %>%
get_stock_prices(return_format = 'tibble')%>%
get_log_returns(return_format = "tibble")%>%head()


ERROR MESSAGE:

Error in to_period(xx, period = on.opts[[period]], ...) :?
? unsupported type
Called from: to_period(xx, period = on.opts[[period]], ...)


Thank You and Best Regards,?
Emeka I. Atuma
Integrity - Walk Your Talk Don't Talk Your Work


From k|ebyn @end|ng |rom y@hoo@com@br  Sun Sep 27 13:41:19 2020
From: k|ebyn @end|ng |rom y@hoo@com@br (Cleber N.Borges)
Date: Sun, 27 Sep 2020 08:41:19 -0300
Subject: [R-SIG-Finance] collect data from the web
References: <0933a2a4-73f6-e94b-c1cd-0a84342b9499.ref@yahoo.com.br>
Message-ID: <0933a2a4-73f6-e94b-c1cd-0a84342b9499@yahoo.com.br>

Hello everyone! Good Morning...
I would like some tips on how to get data from a web page [1] within R.
I made a few attempts, but I was unsuccessful because I have little
knowledge of the http / https protocol.
If anyone can provide any guidance, I would appreciate it very much.

My difficulty is because this page appears to be a front end that 
outsources to several javascripts to the server that actually deliver 
the data.

Thank you in advance!

Cleber Borges

[1] - https://bbtc.cma.com.br/topchart/?&pagetitle=IBOVESPA





	[[alternative HTML version deleted]]


From ezr@ @end|ng |rom |@ndtucker@com  Sun Sep 27 15:09:19 2020
From: ezr@ @end|ng |rom |@ndtucker@com (Ezra Tucker)
Date: Sun, 27 Sep 2020 13:09:19 +0000
Subject: [R-SIG-Finance] collect data from the web
In-Reply-To: <0933a2a4-73f6-e94b-c1cd-0a84342b9499@yahoo.com.br>
References: <0933a2a4-73f6-e94b-c1cd-0a84342b9499.ref@yahoo.com.br>
 <0933a2a4-73f6-e94b-c1cd-0a84342b9499@yahoo.com.br>
Message-ID: <QVJ2mYzVnNZDySvDI0GGDKEWdz9fSqmoeFfFqHcUVcziXVTmez5eKiUp8o-EqUsNlyphQCpeOBZnUHs_FPyhvw9lVAtxfbNkQyd82Mp99fs=@landtucker.com>

Hm personally I can only give unhelpful help but I can give (1) some general pointers that have helped me, and (2) a possibly different approach.

What usually works for me when dealing with getting data from the web involves using the developer tools in a web browser. If you can see what requests your browser makes, and the server responses you get, you should be able to reproduce them using the httr package (or rcurl, etc) and parse the response using rvest.

That all being said, after a quick glance at this page, it looks like several iframes (web pages within web pages, basically) and a lot of javascript. Javascript can be tougher to get data out of in a programmatic kind of way, which leads me to option #2-- are there any other sources of these data that might be easier to deal with?

It *Looks* like you're trying to get stock price data for IBOVESPA - is this the same thing as ^BVSP ? if so, have you tried using the quantmod package?

library(quantmod)
getSymbols("^BVSP", src = "yahoo")  # this will automatically get the data, and assign it to a variable called "BVSP"
print(BVSP)

Hopefully that helps some.

--
ezra at landtucker.com
m:?818-203-0269
LinkedIn:?linkedin.com/in/ezztucker
Github:?github.com/minimenchmuncher

??????? Original Message ???????
On Sunday, September 27, 2020 7:41 AM, Cleber N.Borges via R-SIG-Finance <r-sig-finance at r-project.org> wrote:

> Hello everyone! Good Morning...
> I would like some tips on how to get data from a web page [1] within R.
> I made a few attempts, but I was unsuccessful because I have little
> knowledge of the http / https protocol.
> If anyone can provide any guidance, I would appreciate it very much.
>
> My difficulty is because this page appears to be a front end that
> outsources to several javascripts to the server that actually deliver
> the data.
>
> Thank you in advance!
>
> Cleber Borges
>
> [1] - https://bbtc.cma.com.br/topchart/?&pagetitle=IBOVESPA
>
> [[alternative HTML version deleted]]
>
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gttg@2000 @end|ng |rom y@hoo@com  Sun Sep 27 22:42:53 2020
From: gttg@2000 @end|ng |rom y@hoo@com (AIE ATUMA)
Date: Sun, 27 Sep 2020 20:42:53 +0000 (UTC)
Subject: [R-SIG-Finance] Please I need Help on the functions below
In-Reply-To: <1287057176.1052895.1601155016499@mail.yahoo.com>
References: <1287057176.1052895.1601155016499.ref@mail.yahoo.com>
 <1287057176.1052895.1601155016499@mail.yahoo.com>
Message-ID: <1939341067.1241991.1601239373714@mail.yahoo.com>

Dear All,
Please help a newbie.
?get_log_returns <- function(x, return_format = "tibble", period = 'daily', ...) {
+? ?# Convert tibble to xts
+? ?if (!is.xts(x)) {
+? ? ?x <- xts(x[,-1], order.by = x$Date)
+? ?}
+? ?# Get log returns
+? ?log_returns_xts <- periodReturn(x = x$Adjusted, type = 'log', period = period, ...)
+? ?# Rename
+? ?names(log_returns_xts) <- "Log.Returns"
+? ?# Return in xts format if tibble is not specified
+? ?if (return_format == "tibble") {
+? ? ?log_returns <- log_returns_xts %>%
+? ? ? ?as_tibble() %>%
+? ? ? ?rownames_to_column(var = "Date") %>%
+? ? ? ?mutate(Date = (Date))
+? ?} else {
+? ? ?log_returns <- log_returns_xts
+? ?}
+? ?log_returns
+ }
> "MA" %>%?
+? ?get_stock_prices(return_format = "tibble") %>%?
+? ?get_log_returns(return_format = "tibble")?


Error in xts(x[, -1], order.by = x$Date) :?
? 'order.by' cannot contain 'NA', 'NaN', or 'Inf'
In addition: Warning message:
All formats failed to parse. No formats found.


sp_500 <- sp_500[1:50,] %>%? mutate(? ? stock.prices = map('ticker.symbol',? ? ? ? ? ? ? ? ? ? ? ?function(.x) get_stock_prices(.x,? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?return_format = "tibble",? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?from = "2015-01-01",? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?to = "2018-01-01")? ? ),? ? log.returns = map(stock.prices,? ? ? ? ? ? ? ? ? ? ? function(.x) get_log_returns(.x, return_format = "tibble")),? ? mean.log.returns = map_dbl(log.returns, ~ mean(.$Log.Returns)),? ? sd.log.returns = map_dbl(log.returns, ~ sd(.$Log.Returns)),? ? n.trade.days = map_dbl(stock.prices, nrow)? )

Warning: ticker.symbol download failed; trying again.

Error in getSymbols.yahoo(Symbols = "ticker.symbol", env = <environment>,? :?? Unable to import ?ticker.symbol?.Send failure: Connection was resetCalled from: getSymbols.yahoo(Symbols = "ticker.symbol", env = <environment>,?? ? verbose = FALSE, warnings = TRUE, auto.assign = FALSE, from = "2015-01-01",?? ? to = "2018-01-01", .has1sym. = TRUE)








Thank You and Best Regards,?
Emeka I. Atuma
Integrity - Walk Your Talk Don't Talk Your Work





	[[alternative HTML version deleted]]


