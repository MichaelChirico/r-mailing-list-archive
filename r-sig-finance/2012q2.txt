From worik.stanton at gmail.com  Sun Apr  1 01:35:26 2012
From: worik.stanton at gmail.com (Worik Stanton)
Date: Sun, 01 Apr 2012 11:35:26 +1200
Subject: [R-SIG-Finance] Problems with chartSeries when called in a function
Message-ID: <4F7794BE.5010302@gmail.com>

Friends

I have the following sequence of commands that work as expected....

   S <- getSymbols("USD/NZD", src="oanda", auto.assign=FALSE)
   NZD.w <- to.weekly(S)
   chartSeries(NZD.w)
   po <- EMA(NZD.w)
   addTA(po)
   addCCI(n=14)

(I know I could use addEMA but I have some signal code that would be 
meaningless here in this context)


I get a three part graph:  The series as a candlestick chart and the two 
indicators each in a panel

If I use a function...


test <- function(PAIR="USD/NZD"){

   ## This function is different if called than if stepped through
   S <- getSymbols(PAIR, src="oanda", auto.assign=FALSE)
   NZD.w <- to.weekly(S)
   chartSeries(NZD.w)
   po <- EMA(NZD.w)
   addTA(po)
   addCCI(n=14)
}


and call test() I get a two part graph.

Why is it different?

cheers
Worik

-- 
Foo!


From josh.m.ulrich at gmail.com  Sun Apr  1 01:48:49 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sat, 31 Mar 2012 18:48:49 -0500
Subject: [R-SIG-Finance] Problems with chartSeries when called in a
	function
In-Reply-To: <4F7794BE.5010302@gmail.com>
References: <4F7794BE.5010302@gmail.com>
Message-ID: <CAPPM_gRY4mxBrEFpxSVt2nFv+u-_xHPaeZ=9YB+SiVsOTK-+2w@mail.gmail.com>

This question has been raised many times on-list.  Search for
"chartSeries plot from function" on rseek.org and look at the results
on the "Support Lists" tab.

You need to wrap your addTA calls in plot().  The reason you get
addCCI is because it's being returned from the function.

test <- function(PAIR="USD/NZD"){
 S <- getSymbols(PAIR, src="oanda", auto.assign=FALSE)
 NZD.w <- to.weekly(S)
 chartSeries(NZD.w)
 po <- EMA(NZD.w)
 plot(addTA(po))
 plot(addCCI(n=14))
}

Best,
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com



On Sat, Mar 31, 2012 at 6:35 PM, Worik Stanton <worik.stanton at gmail.com> wrote:
> Friends
>
> I have the following sequence of commands that work as expected....
>
> ?S <- getSymbols("USD/NZD", src="oanda", auto.assign=FALSE)
> ?NZD.w <- to.weekly(S)
> ?chartSeries(NZD.w)
> ?po <- EMA(NZD.w)
> ?addTA(po)
> ?addCCI(n=14)
>
> (I know I could use addEMA but I have some signal code that would be
> meaningless here in this context)
>
>
> I get a three part graph: ?The series as a candlestick chart and the two
> indicators each in a panel
>
> If I use a function...
>
>
> test <- function(PAIR="USD/NZD"){
>
> ?## This function is different if called than if stepped through
> ?S <- getSymbols(PAIR, src="oanda", auto.assign=FALSE)
> ?NZD.w <- to.weekly(S)
> ?chartSeries(NZD.w)
> ?po <- EMA(NZD.w)
> ?addTA(po)
> ?addCCI(n=14)
> }
>
>
> and call test() I get a two part graph.
>
> Why is it different?
>
> cheers
> Worik
>
> --
> Foo!
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.


From eric.thungstrom at gmail.com  Sun Apr  1 20:24:52 2012
From: eric.thungstrom at gmail.com (Eric Thungstom)
Date: Sun, 1 Apr 2012 14:24:52 -0400
Subject: [R-SIG-Finance] xts and sapply
Message-ID: <CACv3XEBG2YZ340LaKN8bPOcnbrSd9Y+3iwvHrQSrL8foyFWnLw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120401/37b3d161/attachment.pl>

From michael.weylandt at gmail.com  Sun Apr  1 20:34:47 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Sun, 1 Apr 2012 14:34:47 -0400
Subject: [R-SIG-Finance] xts and sapply
In-Reply-To: <CACv3XEBG2YZ340LaKN8bPOcnbrSd9Y+3iwvHrQSrL8foyFWnLw@mail.gmail.com>
References: <CACv3XEBG2YZ340LaKN8bPOcnbrSd9Y+3iwvHrQSrL8foyFWnLw@mail.gmail.com>
Message-ID: <CAAmySGOJXi8dqCLeK1hxXZUnYG5jXteyv5RSCucQOO8--+ox3A@mail.gmail.com>

Just a guess, but you are missing a comma in the GSPC part of the "y <- " line.

Your bigger problem is that you don't need sapply() in the first place
here (best I remember): I think this works:

y <- merge(Ad(FNMIX), Ad(DBLTX), Ad(AGG), Ad(GSPC))
ROC(y) # Note that you don't need sapply() because ROC handles
everything nicely for you.

Michael

On Sun, Apr 1, 2012 at 2:24 PM, Eric Thungstom
<eric.thungstrom at gmail.com> wrote:
> I have prices for several securities in a data frame. I'm wondering how to
> calculate returns for each of them in a vectorized fashion.
>
> require(quantmod)
> group <-c('FNMIX','DBLTX','AGG','^GSPC')
> getSymbols(group, src="yahoo", from="2012-01-01", to=Sys.Date())
> y <- merge(FNMIX[,4],DBLTX[,4],AGG[,4],GSPC[4])
> x <-sapply(y[,1:4], dailyReturn)
>
> When I execute the above code I get an "error in arrary" message that
> indicates that the "length of dim names [1] not equal to array extent".
>
> What am I doing wrong ?
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From algotr8der at gmail.com  Sun Apr  1 21:36:25 2012
From: algotr8der at gmail.com (algotr8der)
Date: Sun, 1 Apr 2012 12:36:25 -0700 (PDT)
Subject: [R-SIG-Finance] R Bloomberg for intraday prices
In-Reply-To: <DF1623355387884DB119F5C8AF0CA922114B3B17@TAC-CMS001.prod.ds.russell.com>
References: <DF1623355387884DB119F5C8AF0CA922114B3B17@TAC-CMS001.prod.ds.russell.com>
Message-ID: <1333308985316-4524206.post@n4.nabble.com>

Were you able to get an answer to this question?

The timestamp is in UTC time - so how does one convert this time to US
trading hours i.e 9:30 to 4pm? How does one handle the day light savings
hours etc...    

Appreciate the feedback.

--
View this message in context: http://r.789695.n4.nabble.com/R-Bloomberg-for-intraday-prices-tp4261687p4524206.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Sun Apr  1 21:45:00 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 01 Apr 2012 14:45:00 -0500
Subject: [R-SIG-Finance] R Bloomberg for intraday prices
In-Reply-To: <1333308985316-4524206.post@n4.nabble.com>
References: <DF1623355387884DB119F5C8AF0CA922114B3B17@TAC-CMS001.prod.ds.russell.com>
	<1333308985316-4524206.post@n4.nabble.com>
Message-ID: <04cb2f68-3573-4565-8418-ca5c08b8a108@email.android.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120401/93acfe0b/attachment.pl>

From Alain.Ledon at ally.com  Mon Apr  2 15:50:18 2012
From: Alain.Ledon at ally.com (Ledon, Alain)
Date: Mon, 2 Apr 2012 09:50:18 -0400
Subject: [R-SIG-Finance] R Bloomberg for intraday prices
In-Reply-To: <1333308985316-4524206.post@n4.nabble.com>
References: <DF1623355387884DB119F5C8AF0CA922114B3B17@TAC-CMS001.prod.ds.russell.com>
	<1333308985316-4524206.post@n4.nabble.com>
Message-ID: <AC7014A33F40A747946F6CA7BB5DF0A8016D8FF8BA@USABHEM0GNAO03.NAO.global.gmacfs.com>

Use the lubridate package. Here are some links

http://cran.r-project.org/web/packages/lubridate/index.html

http://www.jstatsoft.org/v40/i03/paper

http://www.r-statistics.com/2012/03/do-more-with-dates-and-times-in-r-with-lubridate-1-1-0/


Alain

(646)781-2698

-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of algotr8der
Sent: Sunday, April 01, 2012 3:36 PM
To: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] R Bloomberg for intraday prices

Were you able to get an answer to this question?

The timestamp is in UTC time - so how does one convert this time to US
trading hours i.e 9:30 to 4pm? How does one handle the day light savings
hours etc...    

Appreciate the feedback.

--
View this message in context: http://r.789695.n4.nabble.com/R-Bloomberg-for-intraday-prices-tp4261687p4524206.html
Sent from the Rmetrics mailing list archive at Nabble.com.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From comtech.usa at gmail.com  Mon Apr  2 21:36:36 2012
From: comtech.usa at gmail.com (Michael)
Date: Mon, 2 Apr 2012 14:36:36 -0500
Subject: [R-SIG-Finance] How to automatically extract test result from
 Johansen test?
In-Reply-To: <CAAmySGPO20kUP+Y7sPQWctaPAm368oj+HBvkoQBLO8r9k9c2uA@mail.gmail.com>
References: <CAPNjSFYBm+fQv-g7G7ftcXnvy9Px9hmSUd=tc+VXLfFEdabKTg@mail.gmail.com>
	<1333123239.27217.193.camel@brian-rcg>
	<CAAmySGP1Uctcu=282O8QbKx6hYv=VAay6DoC4U6xbthPmn09zA@mail.gmail.com>
	<CAPNjSFYbAFyo+ED=xo17bEzmdirDFygH=eYDa8X7iKnMNRz7Uw@mail.gmail.com>
	<CAAmySGPO20kUP+Y7sPQWctaPAm368oj+HBvkoQBLO8r9k9c2uA@mail.gmail.com>
Message-ID: <CAPNjSFaDwDee_Ad87Ms6C1LfYLBaBUN7SuOFTO2s49mrcHkhtg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120402/61569589/attachment.pl>

From comtech.usa at gmail.com  Mon Apr  2 22:08:38 2012
From: comtech.usa at gmail.com (Michael)
Date: Mon, 2 Apr 2012 15:08:38 -0500
Subject: [R-SIG-Finance] How to automatically extract test result from
 Johansen test?
In-Reply-To: <CAPNjSFaDwDee_Ad87Ms6C1LfYLBaBUN7SuOFTO2s49mrcHkhtg@mail.gmail.com>
References: <CAPNjSFYBm+fQv-g7G7ftcXnvy9Px9hmSUd=tc+VXLfFEdabKTg@mail.gmail.com>
	<1333123239.27217.193.camel@brian-rcg>
	<CAAmySGP1Uctcu=282O8QbKx6hYv=VAay6DoC4U6xbthPmn09zA@mail.gmail.com>
	<CAPNjSFYbAFyo+ED=xo17bEzmdirDFygH=eYDa8X7iKnMNRz7Uw@mail.gmail.com>
	<CAAmySGPO20kUP+Y7sPQWctaPAm368oj+HBvkoQBLO8r9k9c2uA@mail.gmail.com>
	<CAPNjSFaDwDee_Ad87Ms6C1LfYLBaBUN7SuOFTO2s49mrcHkhtg@mail.gmail.com>
Message-ID: <CAPNjSFaLQf_m29DDhfnpHTRji9h0JpGAm35ArZmDOnAOHnYN+A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120402/2e7cf0c4/attachment.pl>

From comtech.usa at gmail.com  Mon Apr  2 23:33:10 2012
From: comtech.usa at gmail.com (Michael)
Date: Mon, 2 Apr 2012 16:33:10 -0500
Subject: [R-SIG-Finance] Quick question: the parameter K in the Johansen
	Procedure for VAR?
Message-ID: <CAPNjSFb6twxBHyw=0-MT3_=zUQhZQUHX-DeEeCwD+4feJyE64g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120402/ab1dc0d7/attachment.pl>

From michael.weylandt at gmail.com  Mon Apr  2 23:43:52 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Mon, 2 Apr 2012 17:43:52 -0400
Subject: [R-SIG-Finance] Quick question: the parameter K in the Johansen
 Procedure for VAR?
In-Reply-To: <CAPNjSFb6twxBHyw=0-MT3_=zUQhZQUHX-DeEeCwD+4feJyE64g@mail.gmail.com>
References: <CAPNjSFb6twxBHyw=0-MT3_=zUQhZQUHX-DeEeCwD+4feJyE64g@mail.gmail.com>
Message-ID: <CAAmySGN6jrZbk08Uf-4DBS1YNx0zYxYE1wVGUZQNU5b0tEZANQ@mail.gmail.com>

As I said to you before, ca.jo is in the urca package.

It's defined in arguments: to wit,

K: The lag order of the series (levels) in the VAR.

It's also used in that manner throughout the details section.

Michael Weylandt

On Mon, Apr 2, 2012 at 5:33 PM, Michael <comtech.usa at gmail.com> wrote:
> Hi all,
>
> I have a quick question:
>
> In using "ca.jo" in "vars"...
>
>
> ca.jo(x, type = c("eigen", "trace"), ecdet = c("none", "const", "trend"), K = 2,
> spec=c("longrun", "transitory"), season = NULL, dumvar = NULL)
>
>
>
> There is a parameter "K".
>
> What does this "K" correspond to in the "Details" section? It doesn't
> appear anywhere in the fomulars...
>
> When I read into the book by Dr. Bernhard Pfaff, I couldn't find a
> corresponding one either...
>
> Please help me!
>
>
>
> Thank you!
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From comtech.usa at gmail.com  Tue Apr  3 00:01:30 2012
From: comtech.usa at gmail.com (Michael)
Date: Mon, 2 Apr 2012 17:01:30 -0500
Subject: [R-SIG-Finance] Quick question: the parameter K in the Johansen
 Procedure for VAR?
In-Reply-To: <CAAmySGN6jrZbk08Uf-4DBS1YNx0zYxYE1wVGUZQNU5b0tEZANQ@mail.gmail.com>
References: <CAPNjSFb6twxBHyw=0-MT3_=zUQhZQUHX-DeEeCwD+4feJyE64g@mail.gmail.com>
	<CAAmySGN6jrZbk08Uf-4DBS1YNx0zYxYE1wVGUZQNU5b0tEZANQ@mail.gmail.com>
Message-ID: <CAPNjSFao+U2oqviwbdyuZFAvWd3vngqPq5owB48NVQevq-6r0w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120402/44a5fbf1/attachment.pl>

From comtech.usa at gmail.com  Tue Apr  3 00:12:35 2012
From: comtech.usa at gmail.com (Michael)
Date: Mon, 2 Apr 2012 17:12:35 -0500
Subject: [R-SIG-Finance] How to select the lag K in Johansen co-integration
	test?
Message-ID: <CAPNjSFbtd92sTGLn4pw0COHizzZ8HmzO1ODhVwDkp_6YL7+_EA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120402/51a865c6/attachment.pl>

From comtech.usa at gmail.com  Tue Apr  3 00:33:27 2012
From: comtech.usa at gmail.com (Michael)
Date: Mon, 2 Apr 2012 17:33:27 -0500
Subject: [R-SIG-Finance] How to select the lag K in Johansen
	co-integration test?
In-Reply-To: <CAPNjSFbtd92sTGLn4pw0COHizzZ8HmzO1ODhVwDkp_6YL7+_EA@mail.gmail.com>
References: <CAPNjSFbtd92sTGLn4pw0COHizzZ8HmzO1ODhVwDkp_6YL7+_EA@mail.gmail.com>
Message-ID: <CAPNjSFaXYzgb5t=ZnQMta-ixzfoDhzPUy+DkE+o1nA=ejrzYLA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120402/036c9e96/attachment.pl>

From harrisonmark1 at gmail.com  Tue Apr  3 22:39:28 2012
From: harrisonmark1 at gmail.com (Mark Harrison)
Date: Tue, 3 Apr 2012 15:39:28 -0500
Subject: [R-SIG-Finance] GetSymbols & Weekend Data
Message-ID: <CAHFhaq-7KDp9ysQkDRQiQxZDrNtMH=dtTQ58+1PHzFk-fTWxiw@mail.gmail.com>

Running into an issue when trying to use hourly FX data from
Interactive Brokers with getSymbols.  I have R all setup with
iBrokers, Quantmod, FI, etc so that I can run a script to grab hourly
FX data and save it to a file.

The problem is that I see the weekend data in my dataset from IB and
when I save my data to file I see a data file for the weekend day -
e.g. 4/1/2012 - but when I retrieve the data using getSymbols the
weekend data is ignored.

Is ignoring weekend data just a design issue in getSymbols and if so
how do I get around it or is there another way I can load multiple rda
files into one object.  I have tried to figure out a different way to
load the data but am not finding any answers in the help archives or R
books I have.

Any help would be appreciated.

Thanks,
Mark



My info and code examples are below:

# Session Info

R version 2.14.0 (2011-10-31)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
States.1252
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

attached base packages:
[1] datasets  grDevices utils     graphics  stats     methods   base

other attached packages:
 [1] blotter_0.8.4              fTrading_2110.77
fBasics_2110.79
 [4] MASS_7.3-16                timeSeries_2140.93
timeDate_2150.95
 [7] twsInstrument_1.3-1        IBrokers_0.9-3             qmao_1.1.6
[10] FinancialInstrument_0.10.9 quantmod_0.3-17            TTR_0.21-0
[13] Defaults_1.1-1             xts_0.8-4                  zoo_1.7-7

loaded via a namespace (and not attached):
[1] grid_2.14.0      lattice_0.20-3   quantstrat_0.6.1 tools_2.14.0


# Hourly Data straight from IB for USDCHF
2012-03-30 14:00:00     0.902875     0.902950    0.902375      0.902725
2012-03-30 15:00:00     0.902725     0.902825    0.902225      0.902525
2012-04-01 16:15:00     0.901075     0.901275    0.900900      0.901175
2012-04-01 17:00:00     0.901175     0.901400    0.900375      0.900575
2012-04-01 18:00:00     0.900575     0.901475    0.900550      0.901400

# Save above data to disk
saveSymbols.days("USCHF", base_dir="~/Hour", extension='rda')

# Load data from disk
getSymbols.FI("USCHF", dir = "~/Hour"  )

# Hourly Date retrieved from disk - note the data goes from 3/30 to
4/2 skipping 4/1
2012-03-30 14:00:00     0.902875     0.902950    0.902375      0.902725
2012-03-30 15:00:00     0.902725     0.902825    0.902225      0.902525
2012-04-02 00:00:00     0.902650     0.902875    0.901975      0.902875
2012-04-02 01:00:00     0.902875     0.903125    0.901600      0.902350


From gsee000 at gmail.com  Tue Apr  3 22:42:09 2012
From: gsee000 at gmail.com (G See)
Date: Tue, 3 Apr 2012 15:42:09 -0500
Subject: [R-SIG-Finance] GetSymbols & Weekend Data
In-Reply-To: <CAHFhaq-7KDp9ysQkDRQiQxZDrNtMH=dtTQ58+1PHzFk-fTWxiw@mail.gmail.com>
References: <CAHFhaq-7KDp9ysQkDRQiQxZDrNtMH=dtTQ58+1PHzFk-fTWxiw@mail.gmail.com>
Message-ID: <CA+xi=qacZ0FOwFppn8hXaKjwtELQb25pAafcrunJx7=0EK4t6Q@mail.gmail.com>

Hi Mark,

Try
getSymbols.FI("USCHF", dir = "~/Hour" , days_to_omit=NULL)

see ?getSymbols.FI for more.

HTH,
Garrett

On Tue, Apr 3, 2012 at 3:39 PM, Mark Harrison <harrisonmark1 at gmail.com> wrote:
> Running into an issue when trying to use hourly FX data from
> Interactive Brokers with getSymbols. ?I have R all setup with
> iBrokers, Quantmod, FI, etc so that I can run a script to grab hourly
> FX data and save it to a file.
>
> The problem is that I see the weekend data in my dataset from IB and
> when I save my data to file I see a data file for the weekend day -
> e.g. 4/1/2012 - but when I retrieve the data using getSymbols the
> weekend data is ignored.
>
> Is ignoring weekend data just a design issue in getSymbols and if so
> how do I get around it or is there another way I can load multiple rda
> files into one object. ?I have tried to figure out a different way to
> load the data but am not finding any answers in the help archives or R
> books I have.
>
> Any help would be appreciated.
>
> Thanks,
> Mark
>
>
>
> My info and code examples are below:
>
> # Session Info
>
> R version 2.14.0 (2011-10-31)
> Platform: x86_64-pc-mingw32/x64 (64-bit)
>
> locale:
> [1] LC_COLLATE=English_United States.1252 ?LC_CTYPE=English_United
> States.1252
> [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
> [5] LC_TIME=English_United States.1252
>
> attached base packages:
> [1] datasets ?grDevices utils ? ? graphics ?stats ? ? methods ? base
>
> other attached packages:
> ?[1] blotter_0.8.4 ? ? ? ? ? ? ?fTrading_2110.77
> fBasics_2110.79
> ?[4] MASS_7.3-16 ? ? ? ? ? ? ? ?timeSeries_2140.93
> timeDate_2150.95
> ?[7] twsInstrument_1.3-1 ? ? ? ?IBrokers_0.9-3 ? ? ? ? ? ? qmao_1.1.6
> [10] FinancialInstrument_0.10.9 quantmod_0.3-17 ? ? ? ? ? ?TTR_0.21-0
> [13] Defaults_1.1-1 ? ? ? ? ? ? xts_0.8-4 ? ? ? ? ? ? ? ? ?zoo_1.7-7
>
> loaded via a namespace (and not attached):
> [1] grid_2.14.0 ? ? ?lattice_0.20-3 ? quantstrat_0.6.1 tools_2.14.0
>
>
> # Hourly Data straight from IB for USDCHF
> 2012-03-30 14:00:00 ? ? 0.902875 ? ? 0.902950 ? ?0.902375 ? ? ?0.902725
> 2012-03-30 15:00:00 ? ? 0.902725 ? ? 0.902825 ? ?0.902225 ? ? ?0.902525
> 2012-04-01 16:15:00 ? ? 0.901075 ? ? 0.901275 ? ?0.900900 ? ? ?0.901175
> 2012-04-01 17:00:00 ? ? 0.901175 ? ? 0.901400 ? ?0.900375 ? ? ?0.900575
> 2012-04-01 18:00:00 ? ? 0.900575 ? ? 0.901475 ? ?0.900550 ? ? ?0.901400
>
> # Save above data to disk
> saveSymbols.days("USCHF", base_dir="~/Hour", extension='rda')
>
> # Load data from disk
> getSymbols.FI("USCHF", dir = "~/Hour" ?)
>
> # Hourly Date retrieved from disk - note the data goes from 3/30 to
> 4/2 skipping 4/1
> 2012-03-30 14:00:00 ? ? 0.902875 ? ? 0.902950 ? ?0.902375 ? ? ?0.902725
> 2012-03-30 15:00:00 ? ? 0.902725 ? ? 0.902825 ? ?0.902225 ? ? ?0.902525
> 2012-04-02 00:00:00 ? ? 0.902650 ? ? 0.902875 ? ?0.901975 ? ? ?0.902875
> 2012-04-02 01:00:00 ? ? 0.902875 ? ? 0.903125 ? ?0.901600 ? ? ?0.902350
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Tue Apr  3 22:46:00 2012
From: gsee000 at gmail.com (G See)
Date: Tue, 3 Apr 2012 15:46:00 -0500
Subject: [R-SIG-Finance] GetSymbols & Weekend Data
In-Reply-To: <CA+xi=qacZ0FOwFppn8hXaKjwtELQb25pAafcrunJx7=0EK4t6Q@mail.gmail.com>
References: <CAHFhaq-7KDp9ysQkDRQiQxZDrNtMH=dtTQ58+1PHzFk-fTWxiw@mail.gmail.com>
	<CA+xi=qacZ0FOwFppn8hXaKjwtELQb25pAafcrunJx7=0EK4t6Q@mail.gmail.com>
Message-ID: <CA+xi=qbT5PH+FvhbT84KgKQ89QHvzP0RJaZ4b0aWPeP7V3Kg=Q@mail.gmail.com>

BTW, this syntax is probably preferable:

getSymbols("USCHF", src="FI", dir="~/Hour", days_to_omit=NULL)

On Tue, Apr 3, 2012 at 3:42 PM, G See <gsee000 at gmail.com> wrote:
> Hi Mark,
>
> Try
> getSymbols.FI("USCHF", dir = "~/Hour" , days_to_omit=NULL)
>
> see ?getSymbols.FI for more.
>
> HTH,
> Garrett
>
> On Tue, Apr 3, 2012 at 3:39 PM, Mark Harrison <harrisonmark1 at gmail.com> wrote:
>> Running into an issue when trying to use hourly FX data from
>> Interactive Brokers with getSymbols. ?I have R all setup with
>> iBrokers, Quantmod, FI, etc so that I can run a script to grab hourly
>> FX data and save it to a file.
>>
>> The problem is that I see the weekend data in my dataset from IB and
>> when I save my data to file I see a data file for the weekend day -
>> e.g. 4/1/2012 - but when I retrieve the data using getSymbols the
>> weekend data is ignored.
>>
>> Is ignoring weekend data just a design issue in getSymbols and if so
>> how do I get around it or is there another way I can load multiple rda
>> files into one object. ?I have tried to figure out a different way to
>> load the data but am not finding any answers in the help archives or R
>> books I have.
>>
>> Any help would be appreciated.
>>
>> Thanks,
>> Mark
>>
>>
>>
>> My info and code examples are below:
>>
>> # Session Info
>>
>> R version 2.14.0 (2011-10-31)
>> Platform: x86_64-pc-mingw32/x64 (64-bit)
>>
>> locale:
>> [1] LC_COLLATE=English_United States.1252 ?LC_CTYPE=English_United
>> States.1252
>> [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
>> [5] LC_TIME=English_United States.1252
>>
>> attached base packages:
>> [1] datasets ?grDevices utils ? ? graphics ?stats ? ? methods ? base
>>
>> other attached packages:
>> ?[1] blotter_0.8.4 ? ? ? ? ? ? ?fTrading_2110.77
>> fBasics_2110.79
>> ?[4] MASS_7.3-16 ? ? ? ? ? ? ? ?timeSeries_2140.93
>> timeDate_2150.95
>> ?[7] twsInstrument_1.3-1 ? ? ? ?IBrokers_0.9-3 ? ? ? ? ? ? qmao_1.1.6
>> [10] FinancialInstrument_0.10.9 quantmod_0.3-17 ? ? ? ? ? ?TTR_0.21-0
>> [13] Defaults_1.1-1 ? ? ? ? ? ? xts_0.8-4 ? ? ? ? ? ? ? ? ?zoo_1.7-7
>>
>> loaded via a namespace (and not attached):
>> [1] grid_2.14.0 ? ? ?lattice_0.20-3 ? quantstrat_0.6.1 tools_2.14.0
>>
>>
>> # Hourly Data straight from IB for USDCHF
>> 2012-03-30 14:00:00 ? ? 0.902875 ? ? 0.902950 ? ?0.902375 ? ? ?0.902725
>> 2012-03-30 15:00:00 ? ? 0.902725 ? ? 0.902825 ? ?0.902225 ? ? ?0.902525
>> 2012-04-01 16:15:00 ? ? 0.901075 ? ? 0.901275 ? ?0.900900 ? ? ?0.901175
>> 2012-04-01 17:00:00 ? ? 0.901175 ? ? 0.901400 ? ?0.900375 ? ? ?0.900575
>> 2012-04-01 18:00:00 ? ? 0.900575 ? ? 0.901475 ? ?0.900550 ? ? ?0.901400
>>
>> # Save above data to disk
>> saveSymbols.days("USCHF", base_dir="~/Hour", extension='rda')
>>
>> # Load data from disk
>> getSymbols.FI("USCHF", dir = "~/Hour" ?)
>>
>> # Hourly Date retrieved from disk - note the data goes from 3/30 to
>> 4/2 skipping 4/1
>> 2012-03-30 14:00:00 ? ? 0.902875 ? ? 0.902950 ? ?0.902375 ? ? ?0.902725
>> 2012-03-30 15:00:00 ? ? 0.902725 ? ? 0.902825 ? ?0.902225 ? ? ?0.902525
>> 2012-04-02 00:00:00 ? ? 0.902650 ? ? 0.902875 ? ?0.901975 ? ? ?0.902875
>> 2012-04-02 01:00:00 ? ? 0.902875 ? ? 0.903125 ? ?0.901600 ? ? ?0.902350
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.


From harrisonmark1 at gmail.com  Tue Apr  3 22:52:39 2012
From: harrisonmark1 at gmail.com (Mark Harrison)
Date: Tue, 3 Apr 2012 15:52:39 -0500
Subject: [R-SIG-Finance] GetSymbols & Weekend Data
In-Reply-To: <CA+xi=qbT5PH+FvhbT84KgKQ89QHvzP0RJaZ4b0aWPeP7V3Kg=Q@mail.gmail.com>
References: <CAHFhaq-7KDp9ysQkDRQiQxZDrNtMH=dtTQ58+1PHzFk-fTWxiw@mail.gmail.com>
	<CA+xi=qacZ0FOwFppn8hXaKjwtELQb25pAafcrunJx7=0EK4t6Q@mail.gmail.com>
	<CA+xi=qbT5PH+FvhbT84KgKQ89QHvzP0RJaZ4b0aWPeP7V3Kg=Q@mail.gmail.com>
Message-ID: <CAHFhaq_oNmCm9gwzPCOp2=oZ7V=r+PdYmg3MB_iJGforCOmE1w@mail.gmail.com>

Thanks Garrett..I will try that.

On Tue, Apr 3, 2012 at 3:46 PM, G See <gsee000 at gmail.com> wrote:
> BTW, this syntax is probably preferable:
>
> getSymbols("USCHF", src="FI", dir="~/Hour", days_to_omit=NULL)
>
> On Tue, Apr 3, 2012 at 3:42 PM, G See <gsee000 at gmail.com> wrote:
>> Hi Mark,
>>
>> Try
>> getSymbols.FI("USCHF", dir = "~/Hour" , days_to_omit=NULL)
>>
>> see ?getSymbols.FI for more.
>>
>> HTH,
>> Garrett
>>
>> On Tue, Apr 3, 2012 at 3:39 PM, Mark Harrison <harrisonmark1 at gmail.com> wrote:
>>> Running into an issue when trying to use hourly FX data from
>>> Interactive Brokers with getSymbols. ?I have R all setup with
>>> iBrokers, Quantmod, FI, etc so that I can run a script to grab hourly
>>> FX data and save it to a file.
>>>
>>> The problem is that I see the weekend data in my dataset from IB and
>>> when I save my data to file I see a data file for the weekend day -
>>> e.g. 4/1/2012 - but when I retrieve the data using getSymbols the
>>> weekend data is ignored.
>>>
>>> Is ignoring weekend data just a design issue in getSymbols and if so
>>> how do I get around it or is there another way I can load multiple rda
>>> files into one object. ?I have tried to figure out a different way to
>>> load the data but am not finding any answers in the help archives or R
>>> books I have.
>>>
>>> Any help would be appreciated.
>>>
>>> Thanks,
>>> Mark
>>>
>>>
>>>
>>> My info and code examples are below:
>>>
>>> # Session Info
>>>
>>> R version 2.14.0 (2011-10-31)
>>> Platform: x86_64-pc-mingw32/x64 (64-bit)
>>>
>>> locale:
>>> [1] LC_COLLATE=English_United States.1252 ?LC_CTYPE=English_United
>>> States.1252
>>> [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
>>> [5] LC_TIME=English_United States.1252
>>>
>>> attached base packages:
>>> [1] datasets ?grDevices utils ? ? graphics ?stats ? ? methods ? base
>>>
>>> other attached packages:
>>> ?[1] blotter_0.8.4 ? ? ? ? ? ? ?fTrading_2110.77
>>> fBasics_2110.79
>>> ?[4] MASS_7.3-16 ? ? ? ? ? ? ? ?timeSeries_2140.93
>>> timeDate_2150.95
>>> ?[7] twsInstrument_1.3-1 ? ? ? ?IBrokers_0.9-3 ? ? ? ? ? ? qmao_1.1.6
>>> [10] FinancialInstrument_0.10.9 quantmod_0.3-17 ? ? ? ? ? ?TTR_0.21-0
>>> [13] Defaults_1.1-1 ? ? ? ? ? ? xts_0.8-4 ? ? ? ? ? ? ? ? ?zoo_1.7-7
>>>
>>> loaded via a namespace (and not attached):
>>> [1] grid_2.14.0 ? ? ?lattice_0.20-3 ? quantstrat_0.6.1 tools_2.14.0
>>>
>>>
>>> # Hourly Data straight from IB for USDCHF
>>> 2012-03-30 14:00:00 ? ? 0.902875 ? ? 0.902950 ? ?0.902375 ? ? ?0.902725
>>> 2012-03-30 15:00:00 ? ? 0.902725 ? ? 0.902825 ? ?0.902225 ? ? ?0.902525
>>> 2012-04-01 16:15:00 ? ? 0.901075 ? ? 0.901275 ? ?0.900900 ? ? ?0.901175
>>> 2012-04-01 17:00:00 ? ? 0.901175 ? ? 0.901400 ? ?0.900375 ? ? ?0.900575
>>> 2012-04-01 18:00:00 ? ? 0.900575 ? ? 0.901475 ? ?0.900550 ? ? ?0.901400
>>>
>>> # Save above data to disk
>>> saveSymbols.days("USCHF", base_dir="~/Hour", extension='rda')
>>>
>>> # Load data from disk
>>> getSymbols.FI("USCHF", dir = "~/Hour" ?)
>>>
>>> # Hourly Date retrieved from disk - note the data goes from 3/30 to
>>> 4/2 skipping 4/1
>>> 2012-03-30 14:00:00 ? ? 0.902875 ? ? 0.902950 ? ?0.902375 ? ? ?0.902725
>>> 2012-03-30 15:00:00 ? ? 0.902725 ? ? 0.902825 ? ?0.902225 ? ? ?0.902525
>>> 2012-04-02 00:00:00 ? ? 0.902650 ? ? 0.902875 ? ?0.901975 ? ? ?0.902875
>>> 2012-04-02 01:00:00 ? ? 0.902875 ? ? 0.903125 ? ?0.901600 ? ? ?0.902350
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.


From algotr8der at gmail.com  Wed Apr  4 03:14:28 2012
From: algotr8der at gmail.com (algotr8der)
Date: Tue, 3 Apr 2012 18:14:28 -0700 (PDT)
Subject: [R-SIG-Finance] R Bloomberg for intraday prices
In-Reply-To: <AC7014A33F40A747946F6CA7BB5DF0A8016D8FF8BA@USABHEM0GNAO03.NAO.global.gmacfs.com>
References: <DF1623355387884DB119F5C8AF0CA922114B3B17@TAC-CMS001.prod.ds.russell.com>
	<1333308985316-4524206.post@n4.nabble.com>
	<AC7014A33F40A747946F6CA7BB5DF0A8016D8FF8BA@USABHEM0GNAO03.NAO.global.gmacfs.com>
Message-ID: <1333502068169-4530646.post@n4.nabble.com>

Hi Alain - thanks for the suggestion.

I tried to feed the first column of the data frame object created by
RBloomberg  to with_tz() and I got the following error:

> head(SMH)
                                           time  open   high    low close
numEvents volume
2011-09-19T13:30:00.000 2011-09-19T13:30:00.000 30.52 30.550 30.460 30.49      
319 105000
2011-09-19T13:31:00.000 2011-09-19T13:31:00.000 30.48 30.520 30.470 30.50      
198  63700
2011-09-19T13:32:00.000 2011-09-19T13:32:00.000 30.49 30.590 30.480 30.56      
260  98800
2011-09-19T13:33:00.000 2011-09-19T13:33:00.000 30.56 30.610 30.530 30.53      
106  20900
2011-09-19T13:34:00.000 2011-09-19T13:34:00.000 30.53 30.545 30.525 30.53       
89  24900
2011-09-19T13:35:00.000 2011-09-19T13:35:00.000 30.53 30.540 30.495 30.53      
648 159000

> with_tz(SMH[,1], "EST")
Error in UseMethod("reclass_date", orig) : 
  no applicable method for 'reclass_date' applied to an object of class
"character"

> with_tz(SMH[,1], tz="America/New_york")
Error in UseMethod("reclass_date", orig) : 
  no applicable method for 'reclass_date' applied to an object of class
"character"

Firstly, I'm not sure why RBloomberg creates the date/timestamp as follows:

2011-09-19T13:35:00.000

Why attach a 'T' between the date and the time? This type of format looks
very foreign to me and my guess is this is why with_tz returns an exception. 

Any thoughts would be greatly appreciated. Thank you.


--
View this message in context: http://r.789695.n4.nabble.com/R-Bloomberg-for-intraday-prices-tp4261687p4530646.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jeff.a.ryan at gmail.com  Wed Apr  4 03:29:15 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Tue, 3 Apr 2012 20:29:15 -0500
Subject: [R-SIG-Finance] R Bloomberg for intraday prices
In-Reply-To: <1333502068169-4530646.post@n4.nabble.com>
References: <DF1623355387884DB119F5C8AF0CA922114B3B17@TAC-CMS001.prod.ds.russell.com>
	<1333308985316-4524206.post@n4.nabble.com>
	<AC7014A33F40A747946F6CA7BB5DF0A8016D8FF8BA@USABHEM0GNAO03.NAO.global.gmacfs.com>
	<1333502068169-4530646.post@n4.nabble.com>
Message-ID: <D2CE883E-627C-448F-922B-1A3821B68D98@gmail.com>

TZ management in xts is widely used and very well tested. 

There isn't a need to use lubridate IMO. 

Recast as xts (a proper time series) and look at the vignettes associated as well as indexTZ documentation as Brian Peterson said. 

Best,
Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Apr 3, 2012, at 8:14 PM, algotr8der <algotr8der at gmail.com> wrote:

> Hi Alain - thanks for the suggestion.
> 
> I tried to feed the first column of the data frame object created by
> RBloomberg  to with_tz() and I got the following error:
> 
>> head(SMH)
>                                           time  open   high    low close
> numEvents volume
> 2011-09-19T13:30:00.000 2011-09-19T13:30:00.000 30.52 30.550 30.460 30.49      
> 319 105000
> 2011-09-19T13:31:00.000 2011-09-19T13:31:00.000 30.48 30.520 30.470 30.50      
> 198  63700
> 2011-09-19T13:32:00.000 2011-09-19T13:32:00.000 30.49 30.590 30.480 30.56      
> 260  98800
> 2011-09-19T13:33:00.000 2011-09-19T13:33:00.000 30.56 30.610 30.530 30.53      
> 106  20900
> 2011-09-19T13:34:00.000 2011-09-19T13:34:00.000 30.53 30.545 30.525 30.53       
> 89  24900
> 2011-09-19T13:35:00.000 2011-09-19T13:35:00.000 30.53 30.540 30.495 30.53      
> 648 159000
> 
>> with_tz(SMH[,1], "EST")
> Error in UseMethod("reclass_date", orig) : 
>  no applicable method for 'reclass_date' applied to an object of class
> "character"
> 
>> with_tz(SMH[,1], tz="America/New_york")
> Error in UseMethod("reclass_date", orig) : 
>  no applicable method for 'reclass_date' applied to an object of class
> "character"
> 
> Firstly, I'm not sure why RBloomberg creates the date/timestamp as follows:
> 
> 2011-09-19T13:35:00.000
> 
> Why attach a 'T' between the date and the time? This type of format looks
> very foreign to me and my guess is this is why with_tz returns an exception. 
> 
> Any thoughts would be greatly appreciated. Thank you.
> 
> 
> --
> View this message in context: http://r.789695.n4.nabble.com/R-Bloomberg-for-intraday-prices-tp4261687p4530646.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jeff.a.ryan at gmail.com  Wed Apr  4 03:34:12 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Tue, 3 Apr 2012 20:34:12 -0500
Subject: [R-SIG-Finance] R Bloomberg for intraday prices
In-Reply-To: <1333502068169-4530646.post@n4.nabble.com>
References: <DF1623355387884DB119F5C8AF0CA922114B3B17@TAC-CMS001.prod.ds.russell.com>
	<1333308985316-4524206.post@n4.nabble.com>
	<AC7014A33F40A747946F6CA7BB5DF0A8016D8FF8BA@USABHEM0GNAO03.NAO.global.gmacfs.com>
	<1333502068169-4530646.post@n4.nabble.com>
Message-ID: <2066E74E-2BAE-4BB0-AE5A-8BE9A4EC21CF@gmail.com>

To directly answer the question though, that format is ISO 8601, which is just the standard way of unambiguously representing dates and times. 

Best,
Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Apr 3, 2012, at 8:14 PM, algotr8der <algotr8der at gmail.com> wrote:

> Hi Alain - thanks for the suggestion.
> 
> I tried to feed the first column of the data frame object created by
> RBloomberg  to with_tz() and I got the following error:
> 
>> head(SMH)
>                                           time  open   high    low close
> numEvents volume
> 2011-09-19T13:30:00.000 2011-09-19T13:30:00.000 30.52 30.550 30.460 30.49      
> 319 105000
> 2011-09-19T13:31:00.000 2011-09-19T13:31:00.000 30.48 30.520 30.470 30.50      
> 198  63700
> 2011-09-19T13:32:00.000 2011-09-19T13:32:00.000 30.49 30.590 30.480 30.56      
> 260  98800
> 2011-09-19T13:33:00.000 2011-09-19T13:33:00.000 30.56 30.610 30.530 30.53      
> 106  20900
> 2011-09-19T13:34:00.000 2011-09-19T13:34:00.000 30.53 30.545 30.525 30.53       
> 89  24900
> 2011-09-19T13:35:00.000 2011-09-19T13:35:00.000 30.53 30.540 30.495 30.53      
> 648 159000
> 
>> with_tz(SMH[,1], "EST")
> Error in UseMethod("reclass_date", orig) : 
>  no applicable method for 'reclass_date' applied to an object of class
> "character"
> 
>> with_tz(SMH[,1], tz="America/New_york")
> Error in UseMethod("reclass_date", orig) : 
>  no applicable method for 'reclass_date' applied to an object of class
> "character"
> 
> Firstly, I'm not sure why RBloomberg creates the date/timestamp as follows:
> 
> 2011-09-19T13:35:00.000
> 
> Why attach a 'T' between the date and the time? This type of format looks
> very foreign to me and my guess is this is why with_tz returns an exception. 
> 
> Any thoughts would be greatly appreciated. Thank you.
> 
> 
> --
> View this message in context: http://r.789695.n4.nabble.com/R-Bloomberg-for-intraday-prices-tp4261687p4530646.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From bennfine at gmail.com  Wed Apr  4 07:52:43 2012
From: bennfine at gmail.com (benn fine)
Date: Wed, 4 Apr 2012 01:52:43 -0400
Subject: [R-SIG-Finance] error catching in getSymbols
Message-ID: <CALghxgR+COeFLdSuQURMzdeQN9gOkw7HRjrBgxVN0GoofSmG4g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120404/3eca8f00/attachment.pl>

From sebastian.steins at gmail.com  Wed Apr  4 09:52:02 2012
From: sebastian.steins at gmail.com (Sebastian Steins)
Date: Wed, 4 Apr 2012 09:52:02 +0200
Subject: [R-SIG-Finance] Data to start with?
Message-ID: <CALT4G4x2ok4P4ozVyphS16etH5JiHs54TAjs4_ib7YH+TbEwEg@mail.gmail.com>

Hi there,

does anybody know a reliable and affordable data stream for current
(delayed) and historical market data? Budget is, approx. 100 ?/$ per
month and as I am currently only trying to do some research I would
have non-professional status.
Would be nice, if Xetra was included.


Thanks for your hints!
Sebastian


From josh.m.ulrich at gmail.com  Wed Apr  4 15:04:55 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Wed, 4 Apr 2012 08:04:55 -0500
Subject: [R-SIG-Finance] error catching in getSymbols
In-Reply-To: <CALghxgR+COeFLdSuQURMzdeQN9gOkw7HRjrBgxVN0GoofSmG4g@mail.gmail.com>
References: <CALghxgR+COeFLdSuQURMzdeQN9gOkw7HRjrBgxVN0GoofSmG4g@mail.gmail.com>
Message-ID: <CAPPM_gS4pPn-Bp4N5uDYiqHuh5_-LnrbbH-cfE+dBXRQNYU+2Q@mail.gmail.com>

On Wed, Apr 4, 2012 at 12:52 AM, benn fine <bennfine at gmail.com> wrote:
> I've googled and found a similar question at
> http://stackoverflow.com/questions/8502512/quantmod-overriding-the-warning-message but
> no answer.........
>
There is an answer to that question.  Wrap your getSymbols call in try().

> When I loop over several stocks using getSymbols, yahoo will occasionally
> barf as if I have asked it for too many quotes.
> Is there a workaround for this? Using Sys.sleep doesn't seem to help:
>
It doesn't fail because you asked for too many quotes.  It tells you
exactly why it fails:
"cannot open: HTTP status was '404 Not Found'"
The Yahoo server can't find the page you requested.  I.e. historical
data doesn't exist for that symbol.

> sdvals=1:100
> for(i in 1:100) ?{
> Sys.sleep(2)
> cat("Getting Data for Stock ",nas100[i,1],"\n")
> foo=getSymbols(nas100[i,2],auto.assign=FALSE)
> rfoo=monthlyReturn(foo)
> sdvals[i]=sqrt(var(rfoo))
> }
>
> Getting Data for Stock ?Activision
> Getting Data for Stock ?Adobe
> Getting Data for Stock ?Akamai
> Getting Data for Stock ?Alexion
> Getting Data for Stock ?Altera
> Error in download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,
> :
> ?cannot open URL '
> http://chart.yahoo.com/table.csv?s=ALTR&a=0&b=01&c=2007&d=3&e=04&f=2012&g=d&q=q&y=0&z=ALTR&x=.csv
> '
> In addition: Warning message:
> In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m, ?:
> ?cannot open: HTTP status was '404 Not Found'
>
> Thanks!
>

--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com


From michael.weylandt at gmail.com  Wed Apr  4 15:16:08 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Wed, 4 Apr 2012 09:16:08 -0400
Subject: [R-SIG-Finance] Data to start with?
In-Reply-To: <CALT4G4x2ok4P4ozVyphS16etH5JiHs54TAjs4_ib7YH+TbEwEg@mail.gmail.com>
References: <CALT4G4x2ok4P4ozVyphS16etH5JiHs54TAjs4_ib7YH+TbEwEg@mail.gmail.com>
Message-ID: <CAAmySGOmLZMnLbpuNM+oJMAvXxzgscy12b0xiWdVKGTgGGpA5A@mail.gmail.com>

I know IBrokers is reasonable and it has top-notch R integration
thanks to Jeff Ryan
(http://cran.r-project.org/web/packages/IBrokers/index.html) -- here's
some of their pricing data:
http://individuals.interactivebrokers.com/en/p.php?f=marketData

Michael

On Wed, Apr 4, 2012 at 3:52 AM, Sebastian Steins
<sebastian.steins at gmail.com> wrote:
> Hi there,
>
> does anybody know a reliable and affordable data stream for current
> (delayed) and historical market data? Budget is, approx. 100 ?/$ per
> month and as I am currently only trying to do some research I would
> have non-professional status.
> Would be nice, if Xetra was included.
>
>
> Thanks for your hints!
> Sebastian
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From chicagobrownblue at hotmail.com  Wed Apr  4 15:18:54 2012
From: chicagobrownblue at hotmail.com (FJ M)
Date: Wed, 4 Apr 2012 13:18:54 +0000
Subject: [R-SIG-Finance] Data to start with?
In-Reply-To: <CALT4G4x2ok4P4ozVyphS16etH5JiHs54TAjs4_ib7YH+TbEwEg@mail.gmail.com>
References: <CALT4G4x2ok4P4ozVyphS16etH5JiHs54TAjs4_ib7YH+TbEwEg@mail.gmail.com>
Message-ID: <BLU161-W12C8EE335277EF011C6F8CDF320@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120404/1c8208c3/attachment.pl>

From andreas.mikkelsen at stud.hibo.no  Wed Apr  4 17:16:59 2012
From: andreas.mikkelsen at stud.hibo.no (Andreas Mikkelsen)
Date: Wed, 4 Apr 2012 08:16:59 -0700 (PDT)
Subject: [R-SIG-Finance] quantstrat - problems with ordersize function
Message-ID: <1333552619684-4532216.post@n4.nabble.com>

Hi everyone, 

I am currently writing my master thesis in finance . The scope of the thesis
is to backtest on historical data whether the pairs trading strategy is
profitable or not. 

I have a couple of questions regarding the pairs trading demo script in the
quantstrat package.  I managed to run it without any mishap, but as far as I
can see, there are at no time a long / short leg in the transactions.  I.e.
[1] "2009-03-03 SPY 1e+06 @ 67.1509470105226"
[1] "2009-03-09 SPY 1e+06 @ 65.2725988423961"
[1] "2009-03-03 DIA 1e+06 @ 63.717805901226"
[1] "2009-03-09 DIA 1e+06 @ 62.0397741136174"

>From what I can understand it goes long at the same time on both stocks?
Which would not equal a pairs trading strategy. In the summary page of
blotter I could not find a single date with entries on both the long and
short.  Has any one else experienced this? 

Further on I have tried to adjust the script from the package to our needs
with a fellow student and our prof. What we can?t seem to figure out is how
to adjust the orderqty with osFUN. 
What we are trying to do is to make every order a fixed amount with equal
dollar amount on either leg whenever the trade signal is activated. 
Attached is our efforts so far. 
http://r.789695.n4.nabble.com/file/n4532216/Quantstrat_PairTrade11.R
Quantstrat_PairTrade11.R 
Best regards, 
Andreas Mikkelsen


--
View this message in context: http://r.789695.n4.nabble.com/quantstrat-problems-with-ordersize-function-tp4532216p4532216.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From gsee000 at gmail.com  Wed Apr  4 17:28:44 2012
From: gsee000 at gmail.com (G See)
Date: Wed, 4 Apr 2012 10:28:44 -0500
Subject: [R-SIG-Finance] quantstrat - problems with ordersize function
In-Reply-To: <1333552619684-4532216.post@n4.nabble.com>
References: <1333552619684-4532216.post@n4.nabble.com>
Message-ID: <CA+xi=qbnP-cxFyZD=ySK-d0Kr+aRgm5EGj551hfS4b0qy4shYg@mail.gmail.com>

The pair_trade demo broke in revision 982.  We're aware of it and (and
working on it?).

Until it's fixed, you can checkout an older revision (981 or earlier)
and the pair_trade demo will hopefully work as advertised..

Best,
Garrett

On Wed, Apr 4, 2012 at 10:16 AM, Andreas Mikkelsen
<andreas.mikkelsen at stud.hibo.no> wrote:
> Hi everyone,
>
> I am currently writing my master thesis in finance . The scope of the thesis
> is to backtest on historical data whether the pairs trading strategy is
> profitable or not.
>
> I have a couple of questions regarding the pairs trading demo script in the
> quantstrat package. ?I managed to run it without any mishap, but as far as I
> can see, there are at no time a long / short leg in the transactions. ?I.e.
> [1] "2009-03-03 SPY 1e+06 @ 67.1509470105226"
> [1] "2009-03-09 SPY 1e+06 @ 65.2725988423961"
> [1] "2009-03-03 DIA 1e+06 @ 63.717805901226"
> [1] "2009-03-09 DIA 1e+06 @ 62.0397741136174"
>
> >From what I can understand it goes long at the same time on both stocks?
> Which would not equal a pairs trading strategy. In the summary page of
> blotter I could not find a single date with entries on both the long and
> short. ?Has any one else experienced this?
>
> Further on I have tried to adjust the script from the package to our needs
> with a fellow student and our prof. What we can?t seem to figure out is how
> to adjust the orderqty with osFUN.
> What we are trying to do is to make every order a fixed amount with equal
> dollar amount on either leg whenever the trade signal is activated.
> Attached is our efforts so far.
> http://r.789695.n4.nabble.com/file/n4532216/Quantstrat_PairTrade11.R
> Quantstrat_PairTrade11.R
> Best regards,
> Andreas Mikkelsen
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/quantstrat-problems-with-ordersize-function-tp4532216p4532216.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From brian at braverock.com  Wed Apr  4 17:33:07 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 04 Apr 2012 10:33:07 -0500
Subject: [R-SIG-Finance] quantstrat - problems with ordersize function
In-Reply-To: <1333552619684-4532216.post@n4.nabble.com>
References: <1333552619684-4532216.post@n4.nabble.com>
Message-ID: <1333553587.27217.469.camel@brian-rcg>

On Wed, 2012-04-04 at 08:16 -0700, Andreas Mikkelsen wrote:
> Hi everyone, 
> 
> I am currently writing my master thesis in finance . The scope of the thesis
> is to backtest on historical data whether the pairs trading strategy is
> profitable or not. 
> 
> I have a couple of questions regarding the pairs trading demo script in the
> quantstrat package.  I managed to run it without any mishap, but as far as I
> can see, there are at no time a long / short leg in the transactions.  I.e.
> [1] "2009-03-03 SPY 1e+06 @ 67.1509470105226"
> [1] "2009-03-09 SPY 1e+06 @ 65.2725988423961"
> [1] "2009-03-03 DIA 1e+06 @ 63.717805901226"
> [1] "2009-03-09 DIA 1e+06 @ 62.0397741136174"
> 
> >From what I can understand it goes long at the same time on both stocks?
> Which would not equal a pairs trading strategy. In the summary page of
> blotter I could not find a single date with entries on both the long and
> short.  Has any one else experienced this? 

Some recent changes in other parts of quantstrat (within the last week)
broke the pairs_trading example in quantstrat.

I haven't yet found where, specifically, the prolem was created, since
other code seems to have been improved by the same changes.  Please feel
free to either 1> roll back to svn r980, which didn't display this
problem in the pair trade example (but has other problems with specific
order types that may or may not impact what you are doing) or 2> contact
me off-list to help work through it and see if we can find precisely
where the error lies.  I currently suspect a missing as.numeric()
somewhere in the demo script, though I'm by no means certain of that.

I typically recommend trading a pairs strategy as a spread and using
entry and exit signals on a single spread synthetic instrument.  Legging
them in quantstrat seems like an awful lot of unnecessary trouble, since
when actually trading such a strategy, you would almost certainly use a
commercial spreader anyway for execution.

> Further on I have tried to adjust the script from the package to our needs
> with a fellow student and our prof. What we can?t seem to figure out is how
> to adjust the orderqty with osFUN. 
> What we are trying to do is to make every order a fixed amount with equal
> dollar amount on either leg whenever the trade signal is activated. 
> Attached is our efforts so far. 
> http://r.789695.n4.nabble.com/file/n4532216/Quantstrat_PairTrade11.R
> Quantstrat_PairTrade11.R 

Guy Yollin's slides here:
http://www.r-programming.org/papers

have a relatively large section in the second quatstrat presentation on
position sizing.  Hopefully those will help you until I have more time
to look at your code.

Regards,

   - Brian
 
-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From chicagobrownblue at hotmail.com  Thu Apr  5 00:49:20 2012
From: chicagobrownblue at hotmail.com (FJ M)
Date: Wed, 4 Apr 2012 22:49:20 +0000
Subject: [R-SIG-Finance] quantstrat - problems with ordersize function
In-Reply-To: <CA+xi=qbnP-cxFyZD=ySK-d0Kr+aRgm5EGj551hfS4b0qy4shYg@mail.gmail.com>
References: <1333552619684-4532216.post@n4.nabble.com>,
	<CA+xi=qbnP-cxFyZD=ySK-d0Kr+aRgm5EGj551hfS4b0qy4shYg@mail.gmail.com>
Message-ID: <BLU161-W399536C88F8BE51ED488E3DF320@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120404/9432d0f3/attachment.pl>

From jeff.a.ryan at gmail.com  Thu Apr  5 05:34:53 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Wed, 4 Apr 2012 22:34:53 -0500
Subject: [R-SIG-Finance] quantstrat - problems with ordersize function
In-Reply-To: <BLU161-W399536C88F8BE51ED488E3DF320@phx.gbl>
References: <1333552619684-4532216.post@n4.nabble.com>
	<CA+xi=qbnP-cxFyZD=ySK-d0Kr+aRgm5EGj551hfS4b0qy4shYg@mail.gmail.com>
	<BLU161-W399536C88F8BE51ED488E3DF320@phx.gbl>
Message-ID: <1B2EB812-A7ED-4DC2-A24A-A05FC580034A@gmail.com>

<shameless plug>

If you like the list, you should consider coming to the R/Finance conference here in Chicago May 11 and 12. This is our fourth year, and is looking to be the biggest yet - upwards of 250 of fellow list subscribers and others in R and finance. 

http://www.RinFinance.com

</shameless plug>

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Apr 4, 2012, at 5:49 PM, FJ M <chicagobrownblue at hotmail.com> wrote:

> 
> This mailing list is great. I just subscribed to find out more about the finance/trading part of R. Knowing that the pair trade demo broke let's me know about the pair trading functionality. I haven't used it but will put it on my to do list. A friend of mine is trading ETF pairs, so I will let him know about. 
> 
> 
>> Date: Wed, 4 Apr 2012 10:28:44 -0500
>> From: gsee000 at gmail.com
>> To: andreas.mikkelsen at stud.hibo.no
>> CC: r-sig-finance at r-project.org
>> Subject: Re: [R-SIG-Finance] quantstrat - problems with ordersize function
>> 
>> The pair_trade demo broke in revision 982. We're aware of it and (and
>> working on it?).
>> 
>> Until it's fixed, you can checkout an older revision (981 or earlier)
>> and the pair_trade demo will hopefully work as advertised..
>> 
>> Best,
>> Garrett
>> 
>> On Wed, Apr 4, 2012 at 10:16 AM, Andreas Mikkelsen
>> <andreas.mikkelsen at stud.hibo.no> wrote:
>>> Hi everyone,
>>> 
>>> I am currently writing my master thesis in finance . The scope of the thesis
>>> is to backtest on historical data whether the pairs trading strategy is
>>> profitable or not.
>>> 
>>> I have a couple of questions regarding the pairs trading demo script in the
>>> quantstrat package.  I managed to run it without any mishap, but as far as I
>>> can see, there are at no time a long / short leg in the transactions.  I.e.
>>> [1] "2009-03-03 SPY 1e+06 @ 67.1509470105226"
>>> [1] "2009-03-09 SPY 1e+06 @ 65.2725988423961"
>>> [1] "2009-03-03 DIA 1e+06 @ 63.717805901226"
>>> [1] "2009-03-09 DIA 1e+06 @ 62.0397741136174"
>>> 
>>>> From what I can understand it goes long at the same time on both stocks?
>>> Which would not equal a pairs trading strategy. In the summary page of
>>> blotter I could not find a single date with entries on both the long and
>>> short.  Has any one else experienced this?
>>> 
>>> Further on I have tried to adjust the script from the package to our needs
>>> with a fellow student and our prof. What we can?t seem to figure out is how
>>> to adjust the orderqty with osFUN.
>>> What we are trying to do is to make every order a fixed amount with equal
>>> dollar amount on either leg whenever the trade signal is activated.
>>> Attached is our efforts so far.
>>> http://r.789695.n4.nabble.com/file/n4532216/Quantstrat_PairTrade11.R
>>> Quantstrat_PairTrade11.R
>>> Best regards,
>>> Andreas Mikkelsen
>>> 
>>> 
>>> --
>>> View this message in context: http://r.789695.n4.nabble.com/quantstrat-problems-with-ordersize-function-tp4532216p4532216.html
>>> Sent from the Rmetrics mailing list archive at Nabble.com.
>>> 
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>> 
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
> 
>   [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From wotuzu17 at gmail.com  Thu Apr  5 15:11:48 2012
From: wotuzu17 at gmail.com (Andreas Voellenklee)
Date: Thu, 5 Apr 2012 15:11:48 +0200
Subject: [R-SIG-Finance] Donchian Channel in TTR
Message-ID: <CAKC0BhknWd7OA2PMAtnAAS9R9zDBTJ8y+E4Mr8osLTn3UcYN7g@mail.gmail.com>

Hi,

The DonchianChannel function in the package TTR calculates the highest
high and lowest low of the *current price* and the last (n-1) prices.
According to my sources, only the previous n prices should be
regarded, not the current price.

The following example shows that the current price is taken in the fifth line

getSymbols("YHOO", adjust=TRUE)
head(cbind((YHOO), DonchianChannel(cbind(Hi(YHOO),Lo(YHOO)),n=5)),n=10)

Possibly both methods are valid, but there should be a (optional)
parameter to the function so that users can choose whether they want
to include the current price or not. As in here:
http://www.linnsoft.com/tour/techind/donch.htm

Regards,
Andreas


From wotuzu17 at gmail.com  Thu Apr  5 15:43:18 2012
From: wotuzu17 at gmail.com (Andreas Voellenklee)
Date: Thu, 5 Apr 2012 15:43:18 +0200
Subject: [R-SIG-Finance] Data to start with?
In-Reply-To: <BLU161-W12C8EE335277EF011C6F8CDF320@phx.gbl>
References: <CALT4G4x2ok4P4ozVyphS16etH5JiHs54TAjs4_ib7YH+TbEwEg@mail.gmail.com>
	<BLU161-W12C8EE335277EF011C6F8CDF320@phx.gbl>
Message-ID: <CAKC0Bhk4ecBD=wCa5M904XYB7BLDKpKgOOeAuZ97soOr1ZoGkg@mail.gmail.com>

Hallo Sebastian,

I bought historical EOD data from 1991 to present from this vendor:
http://eoddata.com/. With a selfmade script I parsed the downloaded
files into a mysql database that I now use for research with R. To
access the data I wrote my own getSymbols function, based on the one
in quantmod.

As far as I know it doesn't have Xetra data. Stocks data are adjusted
for splits but not for dividends.

Look at the site for prices.

Viel Gl?ck,
Andreas


From jeff.a.ryan at gmail.com  Thu Apr  5 16:45:03 2012
From: jeff.a.ryan at gmail.com (Jeffrey Ryan)
Date: Thu, 05 Apr 2012 09:45:03 -0500
Subject: [R-SIG-Finance] Donchian Channel in TTR
In-Reply-To: <CAKC0BhknWd7OA2PMAtnAAS9R9zDBTJ8y+E4Mr8osLTn3UcYN7g@mail.gmail.com>
Message-ID: <CBA317F8.378A5%jeff.a.ryan@gmail.com>

As I think I am partly responsible for this code in TTR (at least the
initial rev), I'll explain my logic.

In general, more options/arguments that simply do what single functions
can do more explicitly isn't the best design strategy in many cases.
Secondly, most (all?) of the other functions in TTR behave by including
the 'current' price in the calculation.  In the case of DonchianChannel
the result of this is simply more obvious.

e.g. EMA, SMA, Bbands, runMax, cumsum (base R), cummin (base R), etc also
behave this way.

The fix, without any code changes in the related TTR functions is to use
the facility lag().  This is the canonical way to assure you aren't
introducing look-ahead bias in your results.

For what it is worth, this had been recently discussed in private.  Josh
may have a slightly different opinion, and I think the consensus was that
the documentation could be more explicit, but the behavior is consistent
with R and TTR as is.

HTH
Jeff

On 4/5/12 8:11 AM, "Andreas Voellenklee" <wotuzu17 at gmail.com> wrote:

>Hi,
>
>The DonchianChannel function in the package TTR calculates the highest
>high and lowest low of the *current price* and the last (n-1) prices.
>According to my sources, only the previous n prices should be
>regarded, not the current price.
>
>The following example shows that the current price is taken in the fifth
>line
>
>getSymbols("YHOO", adjust=TRUE)
>head(cbind((YHOO), DonchianChannel(cbind(Hi(YHOO),Lo(YHOO)),n=5)),n=10)
>
>Possibly both methods are valid, but there should be a (optional)
>parameter to the function so that users can choose whether they want
>to include the current price or not. As in here:
>http://www.linnsoft.com/tour/techind/donch.htm
>
>Regards,
>Andreas
>
>_______________________________________________
>R-SIG-Finance at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>-- Subscriber-posting only. If you want to post, subscribe first.
>-- Also note that this is not the r-help list where general R questions
>should go.


From guygreen at netvigator.com  Thu Apr  5 17:03:35 2012
From: guygreen at netvigator.com (Guy Green)
Date: Thu, 5 Apr 2012 08:03:35 -0700 (PDT)
Subject: [R-SIG-Finance] Data to start with?
In-Reply-To: <CAKC0Bhk4ecBD=wCa5M904XYB7BLDKpKgOOeAuZ97soOr1ZoGkg@mail.gmail.com>
References: <CALT4G4x2ok4P4ozVyphS16etH5JiHs54TAjs4_ib7YH+TbEwEg@mail.gmail.com>
	<BLU161-W12C8EE335277EF011C6F8CDF320@phx.gbl>
	<CAKC0Bhk4ecBD=wCa5M904XYB7BLDKpKgOOeAuZ97soOr1ZoGkg@mail.gmail.com>
Message-ID: <1333638215648-4535103.post@n4.nabble.com>

Hi Sebastian and Andreas,

You should also be aware that the eoddata.com adjustments for splits for
non-US stocks may not be reliable.

When I checked some of their Hong Kong data, I very quickly found splits
that they had not adjusted for.  They said that they normally depend on
customers to tell them about a split.  When I pointed them to a source for
splits and asked asked if/when they would be adjusting the data, they said
they would like to eventually, but were too busy for now.

Guy


Andreas Voellenklee wrote
> 
> Hallo Sebastian,
> 
> I bought historical EOD data from 1991 to present from this vendor:
> http://eoddata.com/.....
> 
> As far as I know it doesn't have Xetra data. Stocks data are adjusted
> for splits but not for dividends.
> 
> Viel Gl?ck,
> Andreas
> 


--
View this message in context: http://r.789695.n4.nabble.com/Data-to-start-with-tp4531185p4535103.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From stergios_marinopoulos at yahoo.com  Thu Apr  5 20:52:16 2012
From: stergios_marinopoulos at yahoo.com (Stergios Marinopoulos)
Date: Thu, 5 Apr 2012 11:52:16 -0700 (PDT)
Subject: [R-SIG-Finance] error catching in getSymbols
Message-ID: <1333651936.39040.YahooMailNeo@web162903.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120405/4458c0a4/attachment.pl>

From algotr8der at gmail.com  Thu Apr  5 21:29:15 2012
From: algotr8der at gmail.com (algotr8der)
Date: Thu, 5 Apr 2012 12:29:15 -0700 (PDT)
Subject: [R-SIG-Finance] R Bloomberg for intraday prices
In-Reply-To: <D2CE883E-627C-448F-922B-1A3821B68D98@gmail.com>
References: <DF1623355387884DB119F5C8AF0CA922114B3B17@TAC-CMS001.prod.ds.russell.com>
	<1333308985316-4524206.post@n4.nabble.com>
	<AC7014A33F40A747946F6CA7BB5DF0A8016D8FF8BA@USABHEM0GNAO03.NAO.global.gmacfs.com>
	<1333502068169-4530646.post@n4.nabble.com>
	<D2CE883E-627C-448F-922B-1A3821B68D98@gmail.com>
Message-ID: <1333654155470-4535793.post@n4.nabble.com>

Thanks Jeff and Brain!

I'm still having issues...    I did the following:

My starting object is SMH, which was created by result of a query of the bar
function in the RBloomberg package. My machine's timezone is EDT.

> Sys.timezone()
[1] "EDT"

> head(SMH)
                                           time  open   high    low close
2011-09-19T13:30:00.000 2011-09-19T13:30:00.000 30.52 30.550 30.460 30.49
2011-09-19T13:31:00.000 2011-09-19T13:31:00.000 30.48 30.520 30.470 30.50
2011-09-19T13:32:00.000 2011-09-19T13:32:00.000 30.49 30.590 30.480 30.56
2011-09-19T13:33:00.000 2011-09-19T13:33:00.000 30.56 30.610 30.530 30.53
2011-09-19T13:34:00.000 2011-09-19T13:34:00.000 30.53 30.545 30.525 30.53
2011-09-19T13:35:00.000 2011-09-19T13:35:00.000 30.53 30.540 30.495 30.53
                        numEvents volume
2011-09-19T13:30:00.000       319 105000
2011-09-19T13:31:00.000       198  63700
2011-09-19T13:32:00.000       260  98800
2011-09-19T13:33:00.000       106  20900
2011-09-19T13:34:00.000        89  24900
2011-09-19T13:35:00.000       648 159000

1) strptime(SMH[,1], format="%Y-%m-%dT%H:%M:%S")  -> date_time

2) rownames(SMH) <- date_time

3) now the row label is in the format YYYY-mm-dd H:M:S

> head(SMH)
                     open   high    low close numEvents volume
2011-09-19 13:30:00 30.52 30.550 30.460 30.49       319 105000
2011-09-19 13:31:00 30.48 30.520 30.470 30.50       198  63700
2011-09-19 13:32:00 30.49 30.590 30.480 30.56       260  98800
2011-09-19 13:33:00 30.56 30.610 30.530 30.53       106  20900
2011-09-19 13:34:00 30.53 30.545 30.525 30.53        89  24900
2011-09-19 13:35:00 30.53 30.540 30.495 30.53       648 159000

> str(SMH)
'data.frame':	48694 obs. of  6 variables:
 $ open     : num  30.5 30.5 30.5 30.6 30.5 ...
 $ high     : num  30.6 30.5 30.6 30.6 30.5 ...
 $ low      : num  30.5 30.5 30.5 30.5 30.5 ...
 $ close    : num  30.5 30.5 30.6 30.5 30.5 ...
 $ numEvents: num  319 198 260 106 89 648 190 171 221 255 ...
 $ volume   : num  105000 63700 98800 20900 24900 ...

4) Create an XTS object: 

as.xts(as.data.frame(SMH)) -> SMH.xts.1

Notice that the tzone = null. Also notice that the time has NOT changed

> str(SMH.xts.1)
An ?xts? object from 2011-09-19 13:30:00 to 2012-03-30 20:15:00 containing:
  Data: num [1:48694, 1:6] 30.5 30.5 30.5 30.6 30.5 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:6] "open" "high" "low" "close" ...
  Indexed by objects of class: [POSIXct,POSIXt] TZ: 
  xts Attributes:  
List of 2
 $ tclass: chr [1:2] "POSIXct" "POSIXt"
 $ tzone : chr ""

> head(SMH.xts.1)
                     open   high    low close numEvents volume
2011-09-19 13:30:00 30.52 30.550 30.460 30.49       319 105000
2011-09-19 13:31:00 30.48 30.520 30.470 30.50       198  63700
2011-09-19 13:32:00 30.49 30.590 30.480 30.56       260  98800
2011-09-19 13:33:00 30.56 30.610 30.530 30.53       106  20900
2011-09-19 13:34:00 30.53 30.545 30.525 30.53        89  24900
2011-09-19 13:35:00 30.53 30.540 30.495 30.53       648 159000

5) create another XTS but specify the tzone in the creation of the xts
object since as per RBloomberg documentation the time specified in the bar
function (used to extract the data in the first place) is in UTC:

--snippet from RBloomberg documentation ---
Period start and end times must be expressed as strings in UTC time.
bar <- function(conn, security, field, start_date_time, end_date_time,
interval)
--end snippet-------

as.xts(as.data.frame(SMH), tzone="UTC") -> SMH.xts.2

> head(SMH.xts.2)
                     open   high    low close numEvents volume
2011-09-19 17:30:00 30.52 30.550 30.460 30.49       319 105000
2011-09-19 17:31:00 30.48 30.520 30.470 30.50       198  63700
2011-09-19 17:32:00 30.49 30.590 30.480 30.56       260  98800
2011-09-19 17:33:00 30.56 30.610 30.530 30.53       106  20900
2011-09-19 17:34:00 30.53 30.545 30.525 30.53        89  24900
2011-09-19 17:35:00 30.53 30.540 30.495 30.53       648 159000
Warning message:
timezone of object (UTC) is different than current timezone (). 

Notice that the time changes.....     the PROBLEM I have - at least this is
what I believe the problem to be -  is that the time specified in the
original object is already UTC. This is why I want to force the tzone field
to UTC in my call to as.xts. But by doing so it actually performs a
conversion, which I believe is from EDT to UTC since my machine's timezone
is EDT.

The first data point in the original object occurred at 13:30. By forcing
UTC, the new time changes to 17:30 because it thinks I want to convert from
EDT to UTC when in fact I just want to tell R that the object is UTC time so
I can convert it to EDT regular trading hours.

Any thoughts on how I can achieve this without changing the timezone on my
machine? Greatly appreciate your help. 




--
View this message in context: http://r.789695.n4.nabble.com/R-Bloomberg-for-intraday-prices-tp4261687p4535793.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jeff.a.ryan at gmail.com  Thu Apr  5 21:58:56 2012
From: jeff.a.ryan at gmail.com (Jeffrey Ryan)
Date: Thu, 05 Apr 2012 14:58:56 -0500
Subject: [R-SIG-Finance] R Bloomberg for intraday prices
In-Reply-To: <1333654155470-4535793.post@n4.nabble.com>
Message-ID: <CBA3630E.38274%jeff.a.ryan@gmail.com>

Try

> strptime(t, format="%Y-%m-%dT%H:%M:%S", tz="UTC")  # note tz=  <<<<<<<<<

[1] "2011-09-19 13:30:00 UTC"

Then

> xts(1, strptime(t, format="%Y-%m-%dT%H:%M:%S", tz="UTC"),
>tzone="America/Chicago")
                    [,1]
2011-09-19 08:30:00    1


> xts(1, strptime(t, format="%Y-%m-%dT%H:%M:%S", tz="UTC"),
>tzone="America/New_York")
                    [,1]
2011-09-19 09:30:00    1
Warning message:
timezone of object (America/New_York) is different than current timezone
(America/Chicago).



Which looks right-ish to me.

You can store it in whatever TZ you want, the warning is just telling you
that something is different and you should be aware.  Probably need to
have a flag to disable that - or only show once...

HTH
Jeff


On 4/5/12 2:29 PM, "algotr8der" <algotr8der at gmail.com> wrote:

>%Y-%m-%dT%H:%M:%S"


From breman.mark at gmail.com  Fri Apr  6 08:16:38 2012
From: breman.mark at gmail.com (Mark Breman)
Date: Fri, 6 Apr 2012 08:16:38 +0200
Subject: [R-SIG-Finance] error catching in getSymbols
In-Reply-To: <CALghxgR+COeFLdSuQURMzdeQN9gOkw7HRjrBgxVN0GoofSmG4g@mail.gmail.com>
References: <CALghxgR+COeFLdSuQURMzdeQN9gOkw7HRjrBgxVN0GoofSmG4g@mail.gmail.com>
Message-ID: <CAEaVHo+AS5_oVechc0eCJd0G7+=jDpYJ3MPMx2Ft5nHi0+ZfdA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120406/9906b725/attachment.pl>

From comtech.usa at gmail.com  Sat Apr  7 16:41:26 2012
From: comtech.usa at gmail.com (Michael)
Date: Sat, 7 Apr 2012 09:41:26 -0500
Subject: [R-SIG-Finance] Real-world Pairs Trading?
Message-ID: <CAPNjSFbuuavfcQFJeaKKspgYF1TY4up=5MfeZgnrsDFqhJBUfA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120407/91eeacea/attachment.pl>

From gsee000 at gmail.com  Sat Apr  7 16:50:48 2012
From: gsee000 at gmail.com (G See)
Date: Sat, 7 Apr 2012 09:50:48 -0500
Subject: [R-SIG-Finance] Real-world Pairs Trading?
In-Reply-To: <CAPNjSFbuuavfcQFJeaKKspgYF1TY4up=5MfeZgnrsDFqhJBUfA@mail.gmail.com>
References: <CAPNjSFbuuavfcQFJeaKKspgYF1TY4up=5MfeZgnrsDFqhJBUfA@mail.gmail.com>
Message-ID: <CA+xi=qZenQx0TXg3bc9vKr7a8AtYvvU9aZOgOB+Zg_8cuwyXoQ@mail.gmail.com>

Michael,

This is not related to R.  I'm sure the good folks at NuclearPhynance
and Wilmott will be able to help.

crossposted:
http://www.nuclearphynance.com/Show%20Post.aspx?PostIDKey=159781
http://www.wilmott.com/messageview.cfm?catid=3&threadid=90072

Just to clear it up, crossposting is *discouraged*

Thanks,
Garrett

On Sat, Apr 7, 2012 at 9:41 AM, Michael <comtech.usa at gmail.com> wrote:
> Real-world Pairs Trading?
>
> Hi all,
>
> Happy holidays!
>
> I just had a question on pairs trading in real-world. How are pairs trading
> done in real-world?
>
> My understanding of the procedure:
>
> 1. Test stock A using ADF to decide whether A is I(0) or I(1).
> 2. Test stock B using ADF to decide whether B is I(0) or I(1).
> 3. Using Johansen or Granger-2-stage methods to decide if A and B are
> cointegrated.
> 4. Trade the pair if they are decided to be cointegrated.
>
> My questions are:
>
> 1. Are steps 1 and 2 neccessary?
>
> In real-world, most prices series are either I(0) or I(1). And if two stock
> prices series are I(0) and I(0), we can still do
>
> pairs trading on them, no?
>
> Do we really need both series to be I(1) to do the pairs trading?
>
> 2. In steps 1 and 2, there are different versions of the ADF tests: for
> example, in R, the function ur.df
>
> has "none", "const", "trend", "both" options.
>
> How can we select the best ADF options programatically and automatically,
> both cross-sectionally and along the time axis?
>
> For example, if we have a large universe of stocks and if we need to do
> rolling-window ADF tests, choosing the ADF options "automatically"
>
> and "programatically" become tricky...
>
> 3. In steps 1 and 2, does the option of "none", "const", "trend" and "both"
> matter?
>
> For example, if setting "trend" leads to the conclusion of stationary while
> setting to "const" leads to the conclusion of non-stationary,
>
> should this series be declared as "stationary" or "non-stationary" for
> trading purposes?
>
> 4. I read that cointegration is more or less a long term concept. How
> "long" is long term here?
>
> Suppose I am doing these tests on 15minute bars, how many data points shall
> I use in my rolling-window tests along the time axis? I am thinking of 500
> data points. But maybe that's too much, remember the markets are changing
> and we have to be a bit adaptive... Any thoughts on this?
>
>
> 5. Johansen has the advantage of being symmetical in A and B. But Johansen
> is not stable at all if we look at the rolling-window cointegrated
> vectors(the eigenvectors).
>
> It seems that to get the hedge ratio, still one needs to use linear
> regression since it's more stable.
>
> But then would you regress A onto B and regress B onto A? They do make a
> difference, from my experiment...
>
> Or does that matter?
>
>
> 6. Some literature also mentioned using returns to do all these.
>
> My understanding is that returns are used to find the hedge-ratios
> approximately.
>
> Ultimately we are still trading prices, those are the tradables. We arenot
> trading the returns.
>
> So after we do all the tests and obtained hedge ratios using returns or
> other series, we still come back to prices to form a pair and pairs-trade
> the price levels...
>
> The hedge-ratio obtained from regressing returns of A onto returns of B is
> an approximation to the hedge-ratio obtained from regressing prices of A
> onto prices of B.
>
> When the prices of A and B are I(1), regressing prices onto prices will
> lead to spurious regression, but the estimate of Beta (the hedge-ratio)
> itself shouldn't be a problem.
>
> It's the inference that is messed up.
>
> Am I understanding this correctly?
>
> Thanks a lot!
>
> [CPed on Willmot etal]
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From josh.m.ulrich at gmail.com  Sat Apr  7 17:13:14 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sat, 7 Apr 2012 10:13:14 -0500
Subject: [R-SIG-Finance] Real-world Pairs Trading?
In-Reply-To: <CAPNjSFbuuavfcQFJeaKKspgYF1TY4up=5MfeZgnrsDFqhJBUfA@mail.gmail.com>
References: <CAPNjSFbuuavfcQFJeaKKspgYF1TY4up=5MfeZgnrsDFqhJBUfA@mail.gmail.com>
Message-ID: <CAPPM_gS-xYG+C3DBXT7ski=WxfBGaUCbLz-iO=TkF6i6jn+krQ@mail.gmail.com>

Michael (aka Luna, losemind, Lucy, cfman, whatever),

Cross-posted on NuclearPhynance, Wilmott, et al?  How many lists are
you blasting with your shotgun approach?  Could you do us a favor and
remove us from your cross-hairs, _especially_ when it has _nothing_ to
do with R?

If you could make this your sole contribution to our community, I
would be extremely thankful.

Thanks,
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com



On Sat, Apr 7, 2012 at 9:41 AM, Michael <comtech.usa at gmail.com> wrote:
> Real-world Pairs Trading?
>
> Hi all,
>
> Happy holidays!
>
> I just had a question on pairs trading in real-world. How are pairs trading
> done in real-world?
>
> My understanding of the procedure:
>
> 1. Test stock A using ADF to decide whether A is I(0) or I(1).
> 2. Test stock B using ADF to decide whether B is I(0) or I(1).
> 3. Using Johansen or Granger-2-stage methods to decide if A and B are
> cointegrated.
> 4. Trade the pair if they are decided to be cointegrated.
>
> My questions are:
>
> 1. Are steps 1 and 2 neccessary?
>
> In real-world, most prices series are either I(0) or I(1). And if two stock
> prices series are I(0) and I(0), we can still do
>
> pairs trading on them, no?
>
> Do we really need both series to be I(1) to do the pairs trading?
>
> 2. In steps 1 and 2, there are different versions of the ADF tests: for
> example, in R, the function ur.df
>
> has "none", "const", "trend", "both" options.
>
> How can we select the best ADF options programatically and automatically,
> both cross-sectionally and along the time axis?
>
> For example, if we have a large universe of stocks and if we need to do
> rolling-window ADF tests, choosing the ADF options "automatically"
>
> and "programatically" become tricky...
>
> 3. In steps 1 and 2, does the option of "none", "const", "trend" and "both"
> matter?
>
> For example, if setting "trend" leads to the conclusion of stationary while
> setting to "const" leads to the conclusion of non-stationary,
>
> should this series be declared as "stationary" or "non-stationary" for
> trading purposes?
>
> 4. I read that cointegration is more or less a long term concept. How
> "long" is long term here?
>
> Suppose I am doing these tests on 15minute bars, how many data points shall
> I use in my rolling-window tests along the time axis? I am thinking of 500
> data points. But maybe that's too much, remember the markets are changing
> and we have to be a bit adaptive... Any thoughts on this?
>
>
> 5. Johansen has the advantage of being symmetical in A and B. But Johansen
> is not stable at all if we look at the rolling-window cointegrated
> vectors(the eigenvectors).
>
> It seems that to get the hedge ratio, still one needs to use linear
> regression since it's more stable.
>
> But then would you regress A onto B and regress B onto A? They do make a
> difference, from my experiment...
>
> Or does that matter?
>
>
> 6. Some literature also mentioned using returns to do all these.
>
> My understanding is that returns are used to find the hedge-ratios
> approximately.
>
> Ultimately we are still trading prices, those are the tradables. We arenot
> trading the returns.
>
> So after we do all the tests and obtained hedge ratios using returns or
> other series, we still come back to prices to form a pair and pairs-trade
> the price levels...
>
> The hedge-ratio obtained from regressing returns of A onto returns of B is
> an approximation to the hedge-ratio obtained from regressing prices of A
> onto prices of B.
>
> When the prices of A and B are I(1), regressing prices onto prices will
> lead to spurious regression, but the estimate of Beta (the hedge-ratio)
> itself shouldn't be a problem.
>
> It's the inference that is messed up.
>
> Am I understanding this correctly?
>
> Thanks a lot!
>
> [CPed on Willmot etal]
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From premhotm at hotmail.com  Sat Apr  7 19:36:14 2012
From: premhotm at hotmail.com (Premkumar Narasimhan)
Date: Sat, 7 Apr 2012 17:36:14 +0000
Subject: [R-SIG-Finance] Real-world Pairs Trading?
In-Reply-To: <CAPNjSFbuuavfcQFJeaKKspgYF1TY4up=5MfeZgnrsDFqhJBUfA@mail.gmail.com>
References: <CAPNjSFbuuavfcQFJeaKKspgYF1TY4up=5MfeZgnrsDFqhJBUfA@mail.gmail.com>
Message-ID: <SNT126-W12025507EE89E27C68D756DB310@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120407/e182e332/attachment.pl>

From markleeds2 at gmail.com  Sat Apr  7 20:27:25 2012
From: markleeds2 at gmail.com (Mark Leeds)
Date: Sat, 7 Apr 2012 14:27:25 -0400
Subject: [R-SIG-Finance] Real-world Pairs Trading?
In-Reply-To: <CAPNjSFbuuavfcQFJeaKKspgYF1TY4up=5MfeZgnrsDFqhJBUfA@mail.gmail.com>
References: <CAPNjSFbuuavfcQFJeaKKspgYF1TY4up=5MfeZgnrsDFqhJBUfA@mail.gmail.com>
Message-ID: <CAHz+bWZK=mjNNduTZYpaszE4U_9GGvsdYXBtrbsewPVNKKou4Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120407/036e83c4/attachment.pl>

From josh.m.ulrich at gmail.com  Sat Apr  7 20:55:30 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sat, 7 Apr 2012 13:55:30 -0500
Subject: [R-SIG-Finance] Real-world Pairs Trading?
In-Reply-To: <SNT126-W12025507EE89E27C68D756DB310@phx.gbl>
References: <CAPNjSFbuuavfcQFJeaKKspgYF1TY4up=5MfeZgnrsDFqhJBUfA@mail.gmail.com>
	<SNT126-W12025507EE89E27C68D756DB310@phx.gbl>
Message-ID: <CAPPM_gShsnx4ofJP=GHBJTv5MVVM5g2agY4wuh_27Omk=qpgqQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120407/b3de8bd5/attachment.pl>

From premhotm at hotmail.com  Sat Apr  7 23:12:06 2012
From: premhotm at hotmail.com (Premkumar Narasimhan)
Date: Sat, 7 Apr 2012 21:12:06 +0000
Subject: [R-SIG-Finance] Real-world Pairs Trading?
In-Reply-To: <CAPPM_gShsnx4ofJP=GHBJTv5MVVM5g2agY4wuh_27Omk=qpgqQ@mail.gmail.com>
References: <CAPNjSFbuuavfcQFJeaKKspgYF1TY4up=5MfeZgnrsDFqhJBUfA@mail.gmail.com>,
	<SNT126-W12025507EE89E27C68D756DB310@phx.gbl>,
	<CAPPM_gShsnx4ofJP=GHBJTv5MVVM5g2agY4wuh_27Omk=qpgqQ@mail.gmail.com>
Message-ID: <SNT126-W48062CD71E99C45C9252F8DB310@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120407/39864cf0/attachment.pl>

From worik.stanton at gmail.com  Sun Apr  8 04:10:45 2012
From: worik.stanton at gmail.com (Worik Stanton)
Date: Sun, 08 Apr 2012 14:10:45 +1200
Subject: [R-SIG-Finance] Using abline with chartSeries
Message-ID: <4F80F3A5.7000503@gmail.com>

Friends

I would like to be able to draw vertical lines on a chart resulting from 
chartSeries.

I can draw horrizontal lines but they do not apear in the correct place.

In the following example I draw a dotted white horizontal line, but not 
where I asked for it, and I get no vertical line using either of the two 
methods.  I cannot find an answer via Google.  I am stumped

library(quantstrat)
getSymbols("IBM")
IBM.m <- to.monthly(IBM)
chartSeries(IBM.m)
abline(h=140, lty=2, col="white")
QQ <- index(IBM.m[24,])
abline(v=QQ, col="white", lty=2)
abline(v=.index(IBM.m[24,]), col="white", lty=2)



-- 
Foo!


From josh.m.ulrich at gmail.com  Sun Apr  8 04:39:44 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sat, 7 Apr 2012 21:39:44 -0500
Subject: [R-SIG-Finance] Using abline with chartSeries
In-Reply-To: <4F80F3A5.7000503@gmail.com>
References: <4F80F3A5.7000503@gmail.com>
Message-ID: <CAPPM_gSDr-d-gAmkwjzGu_iye0nU6w=EXdhk1i3tGr8M4KhAFQ@mail.gmail.com>

Worik,

On Sat, Apr 7, 2012 at 9:10 PM, Worik Stanton <worik.stanton at gmail.com> wrote:
> Friends
>
> I would like to be able to draw vertical lines on a chart resulting from
> chartSeries.
>
> I can draw horrizontal lines but they do not apear in the correct place.
>
> In the following example I draw a dotted white horizontal line, but not
> where I asked for it, and I get no vertical line using either of the two
> methods. ?I cannot find an answer via Google. ?I am stumped
>
Use rseek.org instead of Google (it provides a custom Google search).
The answer to your question is the first result under "support lists"
when you search for "chartseries vertical line".

chartSeries(IBM.m)
addTA(.xts(TRUE,.index(IBM.m)[24]), on=1)

> library(quantstrat)
> getSymbols("IBM")
> IBM.m <- to.monthly(IBM)
> chartSeries(IBM.m)
> abline(h=140, lty=2, col="white")
> QQ <- index(IBM.m[24,])
> abline(v=QQ, col="white", lty=2)
> abline(v=.index(IBM.m[24,]), col="white", lty=2)
>

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com


From worik.stanton at gmail.com  Sun Apr  8 05:12:33 2012
From: worik.stanton at gmail.com (Worik Stanton)
Date: Sun, 08 Apr 2012 15:12:33 +1200
Subject: [R-SIG-Finance] Using abline with chartSeries
In-Reply-To: <CAPPM_gSDr-d-gAmkwjzGu_iye0nU6w=EXdhk1i3tGr8M4KhAFQ@mail.gmail.com>
References: <4F80F3A5.7000503@gmail.com>
	<CAPPM_gSDr-d-gAmkwjzGu_iye0nU6w=EXdhk1i3tGr8M4KhAFQ@mail.gmail.com>
Message-ID: <4F810221.9030106@gmail.com>


>> I would like to be able to draw vertical lines on a chart resulting from
>> chartSeries.
>>
>> I can draw horrizontal lines but they do not apear in the correct place.
>>
>> In the following example I draw a dotted white horizontal line, but not
>> where I asked for it, and I get no vertical line using either of the two
>> methods.  I cannot find an answer via Google.  I am stumped
>>
[snip]
> chartSeries(IBM.m)
> addTA(.xts(TRUE,.index(IBM.m)[24]), on=1).
That sort of works.  I was hoping to draw one vertical line but I get 
two, and the start and endof the candle.  If I specify a colour it 
overwrites the candle.  But I can use this, thanks very much

But what about horizontal lines?

I tried,
addTA(xts(rep(100, nrow(IBM.m)), index(IBM.m)), on=1)

to no avail.

cheers
W
>> library(quantstrat)
>> getSymbols("IBM")
>> IBM.m<- to.monthly(IBM)
>> chartSeries(IBM.m)
>> abline(h=140, lty=2, col="white")
>> QQ<- index(IBM.m[24,])
>> abline(v=QQ, col="white", lty=2)
>> abline(v=.index(IBM.m[24,]), col="white", lty=2)
>>
> Best,
> --
> Joshua Ulrich  |  FOSS Trading: www.fosstrading.com
>
> R/Finance 2012: Applied Finance with R
> www.RinFinance.com
>


-- 
Foo!


From wotuzu17 at gmail.com  Sun Apr  8 09:05:52 2012
From: wotuzu17 at gmail.com (Andreas Voellenklee)
Date: Sun, 8 Apr 2012 09:05:52 +0200
Subject: [R-SIG-Finance] Donchian Channel in TTR
In-Reply-To: <CBA317F8.378A5%jeff.a.ryan@gmail.com>
References: <CAKC0BhknWd7OA2PMAtnAAS9R9zDBTJ8y+E4Mr8osLTn3UcYN7g@mail.gmail.com>
	<CBA317F8.378A5%jeff.a.ryan@gmail.com>
Message-ID: <CAKC0Bh=8c1_zJ5mt0coSPBQHZH0yYRvsxirHSPC=MRs_tZKuSw@mail.gmail.com>

Ok, so the other implementation of Donchian Channel, where the current
price is not included in calculation would be:

> getSymbols("YHOO", adjust=TRUE)
> head(cbind((YHOO), lag(DonchianChannel(cbind(Hi(YHOO),Lo(YHOO)),n=5)),k=1),n=10)

Andreas


From aleksi at ideaario.net  Sun Apr  8 12:18:37 2012
From: aleksi at ideaario.net (Aleksi Mattila)
Date: Sun, 08 Apr 2012 12:18:37 +0200
Subject: [R-SIG-Finance] (no subject)
Message-ID: <k1iesygf7ls7417q8bpbr7rb.1333880317730@email.android.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120408/c248397a/attachment.pl>

From p_kouchtch at hotmail.com  Sun Apr  8 16:50:12 2012
From: p_kouchtch at hotmail.com (paul kouchtch)
Date: Sun, 8 Apr 2012 16:50:12 +0200
Subject: [R-SIG-Finance] How to determine the efficient frontier of
 Black-Litterman model (using BLCOP package) in fPortfolio package?
Message-ID: <SNT106-W321A0BE804FA2484F3D2ABE5360@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120408/88804a6b/attachment.pl>

From worik.stanton at gmail.com  Mon Apr  9 05:24:40 2012
From: worik.stanton at gmail.com (Worik Stanton)
Date: Mon, 09 Apr 2012 15:24:40 +1200
Subject: [R-SIG-Finance] Using abline with chartSeries
In-Reply-To: <CAPPM_gSDr-d-gAmkwjzGu_iye0nU6w=EXdhk1i3tGr8M4KhAFQ@mail.gmail.com>
References: <4F80F3A5.7000503@gmail.com>
	<CAPPM_gSDr-d-gAmkwjzGu_iye0nU6w=EXdhk1i3tGr8M4KhAFQ@mail.gmail.com>
Message-ID: <4F825678.9000206@gmail.com>

On 08/04/12 14:39, Joshua Ulrich wrote:
> Use rseek.org instead of Google (it provides a custom Google search).
> The answer to your question is the first result under "support lists"
> when you search for "chartseries vertical line".
>
> chartSeries(IBM.m)
> addTA(.xts(TRUE,.index(IBM.m)[24]), on=1)
>
Actually, no.  As an experiment I used your advice, on rseek.org,  and 
have not come across this.  "chartseries" matches "chart series" 
(without the quotes) so any useful advice is burried under a mountain of 
unhelpful advice.

Using google and looking for "chartSeries quantstrat abline" (again 
without quotes) I found 
http://www.r-bloggers.com/great-faj-article-on-statistical-measure-of-financial-turbulence-part-3/ 
that advised....

chartSeries(turbulence,theme="white",name="Correlation and % Change as 
Measure of Financial Turbulence")
abline(h=0.8)

So  again tried...

 > getSymbols("IBM")
[1] "IBM"
 > IBM.m <- to.monthly(IBM)
 > chartSeries(IBM.m, theme="white")
 > abline(h=160)

But the horizontal line is *not* at 160, unless the y-axis is wrong.

So how is it done?

cheers
Worik

-- 
Foo!


From acquitaine at gmail.com  Mon Apr  9 07:56:38 2012
From: acquitaine at gmail.com (acquitaine)
Date: Mon, 9 Apr 2012 15:56:38 +1000
Subject: [R-SIG-Finance] Using abline with chartSeries
In-Reply-To: <4F825678.9000206@gmail.com>
References: <4F80F3A5.7000503@gmail.com>
	<CAPPM_gSDr-d-gAmkwjzGu_iye0nU6w=EXdhk1i3tGr8M4KhAFQ@mail.gmail.com>
	<4F825678.9000206@gmail.com>
Message-ID: <CA+nL6QYmb6jsAemfn6Y-LVmm01KdNWVDSH4W-UjcXXNcmWbvHg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120409/1845eae8/attachment.pl>

From josh.m.ulrich at gmail.com  Mon Apr  9 07:58:24 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 9 Apr 2012 00:58:24 -0500
Subject: [R-SIG-Finance] Using abline with chartSeries
In-Reply-To: <4F825678.9000206@gmail.com>
References: <4F80F3A5.7000503@gmail.com>
	<CAPPM_gSDr-d-gAmkwjzGu_iye0nU6w=EXdhk1i3tGr8M4KhAFQ@mail.gmail.com>
	<4F825678.9000206@gmail.com>
Message-ID: <CAPPM_gS=N4Pys2q=Vv5M+Vst70g713K8pojNov2r3nBC8HMM0A@mail.gmail.com>

On Sun, Apr 8, 2012 at 10:24 PM, Worik Stanton <worik.stanton at gmail.com> wrote:
> On 08/04/12 14:39, Joshua Ulrich wrote:
>>
>> Use rseek.org instead of Google (it provides a custom Google search).
>> The answer to your question is the first result under "support lists"
>> when you search for "chartseries vertical line".
>>
>> chartSeries(IBM.m)
>> addTA(.xts(TRUE,.index(IBM.m)[24]), on=1)
>>
> Actually, no. ?As an experiment I used your advice, on rseek.org, ?and have
> not come across this. ?"chartseries" matches "chart series" (without the
> quotes) so any useful advice is burried under a mountain of unhelpful
> advice.
>
Then you're doing something wrong.  Here's the search:
http://www.rseek.org/?cx=010923144343702598753%3Aboaz1reyxd4&q=chartseries+vertical+line&sa=Search+functions%2C+lists%2C+and+more&cof=FORID%3A11&siteurl=rseek.org%2F&ref=

Click the "Support Lists" tab on the right section of the page.  The
first three results answer your original question.

> Using google and looking for "chartSeries quantstrat abline" (again without
> quotes) I found
> http://www.r-bloggers.com/great-faj-article-on-statistical-measure-of-financial-turbulence-part-3/
> that advised....
>
> chartSeries(turbulence,theme="white",name="Correlation and % Change as
> Measure of Financial Turbulence")
> abline(h=0.8)
>
> So ?again tried...
>
>> getSymbols("IBM")
> [1] "IBM"
>> IBM.m <- to.monthly(IBM)
>> chartSeries(IBM.m, theme="white")
>> abline(h=160)
>
> But the horizontal line is *not* at 160, unless the y-axis is wrong.
>
That's because his chart didn't have a lower graph; yours does.  Try:
chartSeries(IBM.m, TA=NULL)
abline(h=160)

Note that the line drawn by abline won't be kept if you make any
future call to an add* function because abline doesn't alter the
underlying chartSeries object (chob), so all changes will be lost if
the plot has to be re-drawn.

> So how is it done?
>
Nearly the same way as I showed you how to add a vertical line to a
chartSeries plot.

chartSeries(IBM.m)
addTA(.xts(rep(160,nrow(IBM.m)),.index(IBM.m)), on=1)

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com


From josh.m.ulrich at gmail.com  Mon Apr  9 08:01:00 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 9 Apr 2012 01:01:00 -0500
Subject: [R-SIG-Finance] Using abline with chartSeries
In-Reply-To: <CA+nL6QYmb6jsAemfn6Y-LVmm01KdNWVDSH4W-UjcXXNcmWbvHg@mail.gmail.com>
References: <4F80F3A5.7000503@gmail.com>
	<CAPPM_gSDr-d-gAmkwjzGu_iye0nU6w=EXdhk1i3tGr8M4KhAFQ@mail.gmail.com>
	<4F825678.9000206@gmail.com>
	<CA+nL6QYmb6jsAemfn6Y-LVmm01KdNWVDSH4W-UjcXXNcmWbvHg@mail.gmail.com>
Message-ID: <CAPPM_gQFqQ5555GLRcnN4YWMi6-HqGYgF12Rs5kmb4A+LARGRw@mail.gmail.com>

Hi Mark,

On Mon, Apr 9, 2012 at 12:56 AM, acquitaine <acquitaine at gmail.com> wrote:
>
> I do not think that sending someone to search using rseek is a step forward.
> Google is the better search tool primarily because of its advanced search
> operators.
>
As I said to Worik, rseek.org provides a custom Google search.

I just re-read my reply and my wording may have been unclear.  My apologies.

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com


From acquitaine at gmail.com  Mon Apr  9 08:10:56 2012
From: acquitaine at gmail.com (acquitaine)
Date: Mon, 9 Apr 2012 16:10:56 +1000
Subject: [R-SIG-Finance] Using abline with chartSeries
In-Reply-To: <CAPPM_gQFqQ5555GLRcnN4YWMi6-HqGYgF12Rs5kmb4A+LARGRw@mail.gmail.com>
References: <4F80F3A5.7000503@gmail.com>
	<CAPPM_gSDr-d-gAmkwjzGu_iye0nU6w=EXdhk1i3tGr8M4KhAFQ@mail.gmail.com>
	<4F825678.9000206@gmail.com>
	<CA+nL6QYmb6jsAemfn6Y-LVmm01KdNWVDSH4W-UjcXXNcmWbvHg@mail.gmail.com>
	<CAPPM_gQFqQ5555GLRcnN4YWMi6-HqGYgF12Rs5kmb4A+LARGRw@mail.gmail.com>
Message-ID: <CA+nL6QY54uYYyfaAToBTUwTMOTABzAR41YF4mZnpobWs-_dS6w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120409/4df5c6f5/attachment.pl>

From jefe_goode at yahoo.com  Mon Apr  9 19:40:49 2012
From: jefe_goode at yahoo.com (jefe goode)
Date: Mon, 9 Apr 2012 10:40:49 -0700
Subject: [R-SIG-Finance] fArma problem
Message-ID: <1333993249.40090.YahooMailNeo@web120706.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120409/cea6bcb4/attachment.pl>

From jefe_goode at yahoo.com  Mon Apr  9 19:46:14 2012
From: jefe_goode at yahoo.com (jefe goode)
Date: Mon, 9 Apr 2012 10:46:14 -0700
Subject: [R-SIG-Finance] fArma problem solved ...
Message-ID: <1333993574.61576.YahooMailNeo@web120701.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120409/55a5e160/attachment.pl>

From jeff.a.ryan at gmail.com  Mon Apr  9 19:46:16 2012
From: jeff.a.ryan at gmail.com (Jeffrey Ryan)
Date: Mon, 9 Apr 2012 12:46:16 -0500
Subject: [R-SIG-Finance] fArma problem
In-Reply-To: <1333993249.40090.YahooMailNeo@web120706.mail.ne1.yahoo.com>
Message-ID: <CBA88A80.388CB%jeff.a.ryan@gmail.com>

library(fArma)

Not "load"

Jeff

On 4/9/12 12:40 PM, "jefe goode" <jefe_goode at yahoo.com> wrote:

>Hi All
> 
>I just installed package fArma ( using R2.14.2) ... installed OK
> 
>then when I try to load and use the library I get an error message:
> 
>>load(fArma)
>error fArma not found?
> 
>how do we get to use this package?
> 
>NB I also tried direct use of the procedures:
>  x = armaSim(model = list(ar = c(0.5, -0.5), ma = 0.1), n = 1000)
> 
>but with the same result. ... armaSim( .. ) not found
> 
>Several other packages have installed fine, and do run ok, eg Hadley
>Wickham's ggPlot2 ...
> 
>So how do we get to use fArma?
> 
>Regards
> 
>Jefe
>	[[alternative HTML version deleted]]
>
>_______________________________________________
>R-SIG-Finance at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>-- Subscriber-posting only. If you want to post, subscribe first.
>-- Also note that this is not the r-help list where general R questions
>should go.


From stergios_marinopoulos at yahoo.com  Mon Apr  9 19:55:31 2012
From: stergios_marinopoulos at yahoo.com (Stergios Marinopoulos)
Date: Mon, 9 Apr 2012 10:55:31 -0700 (PDT)
Subject: [R-SIG-Finance] Using abline with chartSeries
In-Reply-To: <mailman.3.1333965601.24608.r-sig-finance@r-project.org>
References: <mailman.3.1333965601.24608.r-sig-finance@r-project.org>
Message-ID: <1333994131.79538.YahooMailNeo@web162902.mail.bf1.yahoo.com>

So how can I alter the?underlying chartSeries object so that my text annotations will not be lost when?the plot has to be re-drawn when I then call add* functions?


Here's how I currently add text to a chart:

chart_Series(SPY)
getSymbols("SPY", from="2012-01-01")

x <- SPY["2012-02-15", which.i=TRUE]

text(x, Lo(SPY)[x,], "2012-02-15", srt=90, c(1,0.5) )



And now when I add this TA the text disappears:

add_TA(Cl(SPY)<134,border=NA,col='#888888',on=-1)
--
sm

Stergios Marinopoulos




> So how is it done?
>
Nearly the same way as I showed you how to add a vertical line to a
chartSeries plot.

chartSeries(IBM.m)
addTA(.xts(rep(160,nrow(IBM.m)),.index(IBM.m)), on=1)


From sbarrios at bcra.gov.ar  Mon Apr  9 21:00:47 2012
From: sbarrios at bcra.gov.ar (Barrios, Sergio Julian)
Date: Mon, 9 Apr 2012 16:00:47 -0300
Subject: [R-SIG-Finance] Blotter and FinancialInstruments on multicurrency
	portfolios
Message-ID: <4FD09FCBEB8BA045888207790E882ACACE5F91@EXCHANGE2003CLU.bcra.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120409/761f1011/attachment.pl>

From brian at braverock.com  Mon Apr  9 21:21:02 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 09 Apr 2012 14:21:02 -0500
Subject: [R-SIG-Finance] Blotter and FinancialInstruments on
 multicurrency portfolios
In-Reply-To: <4FD09FCBEB8BA045888207790E882ACACE5F91@EXCHANGE2003CLU.bcra.net>
References: <4FD09FCBEB8BA045888207790E882ACACE5F91@EXCHANGE2003CLU.bcra.net>
Message-ID: <1333999262.25408.58.camel@brian-rcg>

On Mon, 2012-04-09 at 16:00 -0300, Barrios, Sergio Julian wrote:
> BIG ISSUE 1)
> 
> If I trade bonds, the mark to market is fine, but what if I do time
> deposits ? I need to mark to market using the accrued interest not the
> market price. Is there an elegant way to perform this end of day
> valuation?

No.  Mark to market is done on price.  

This is correct, as far as it goes, because the price is still important
in a bond portfolio.  It does not take accrued interest into account.
You'd need to add those as cash transactions.
> 
There are some functions for additions, withdrawals, and dividends, but
they are nowhere near complete.  Daily Accrued interest should be
handled in much the same way as dividends, I think. Patches welcome.

> BIG ISSUE 2)
> 
> I perform daily trades on currencies (Spot market). As these type of
> trades change my cash balances. How could I do that?. Even though I
> could think about using the forwards (as an Instrument) to perform
> these trades, Is there an elegant way perform these tasks?
> 
Yes, do transactions in the spot currency pairs, this should will work
fine.

> BIG ISSUE 3) 
> 
> This guy Wolfgang Wu wobwu22 at yahoo.de <mailto:r-sig-finance%
> 40stat.math.ethz.ch?Subject=Re%3A%20%5BR-SIG-Finance%5D%
> 20Multi-currency%20example%20for%20blotter&In-Reply-To=%
> 3C457073.5587.qm%40web23408.mail.ird.yahoo.com%3E> Fri Mar 26 14:52:43
> CET 2010  asked about how can be done the overall valuation of the
> investments in a certain numerarie (USD, but also I could think about
> a currency basket). The answer at that time, was "there is no answer".
> Is there any news regarding this topic?
> 
Yes, that functionality is, I believe, complete.  Portfolios each have a
currency, and so do accounts.  The 'summary' table in the portfolio,
which didn't exist at the time of the thread you mention, will mark all
the positions to the portfolio currency.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From worik.stanton at gmail.com  Tue Apr 10 00:49:37 2012
From: worik.stanton at gmail.com (Worik Stanton)
Date: Tue, 10 Apr 2012 10:49:37 +1200
Subject: [R-SIG-Finance] Using abline with chartSeries
In-Reply-To: <CAPPM_gS=N4Pys2q=Vv5M+Vst70g713K8pojNov2r3nBC8HMM0A@mail.gmail.com>
References: <4F80F3A5.7000503@gmail.com>
	<CAPPM_gSDr-d-gAmkwjzGu_iye0nU6w=EXdhk1i3tGr8M4KhAFQ@mail.gmail.com>
	<4F825678.9000206@gmail.com>
	<CAPPM_gS=N4Pys2q=Vv5M+Vst70g713K8pojNov2r3nBC8HMM0A@mail.gmail.com>
Message-ID: <4F836781.4040102@gmail.com>

On 09/04/12 17:58, Joshua Ulrich wrote:
> Click the "Support Lists" tab on the right section of the page.  The
> first three results answer your original question.
That is, although helpful, a little obscure!

Helpfully, to answer my own question:

> > getSymbols("IBM")
> [1] "IBM"
> > IBM.m <- to.monthly(IBM)
> > chartSeries(IBM.m, theme="white")
> > abline(h=160)
addLines(h=160, on=1)

does the trick.

But how do I get a dotted line?

 > addLines(h=100, lty=2)
Error in addLines(h = 100, lty = 2) : unused argument(s) (lty = 2)

The "col" argument works to set a colour.

Is there any documentation available?  Banging around google and mailing 
list archives is a very time consuming and frustrating process.

?addLines is not helpful.

cheers
Worik

-- 
Foo!


From noahsilverman at ucla.edu  Tue Apr 10 02:47:27 2012
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Mon, 9 Apr 2012 17:47:27 -0700
Subject: [R-SIG-Finance] Constraints on tangecyPortfolio in fPortfolio
Message-ID: <13162FC9-C4D3-4D74-A79B-86C95E6D69BC@ucla.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120409/7478f20f/attachment.pl>

From brian at braverock.com  Tue Apr 10 02:59:42 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 09 Apr 2012 19:59:42 -0500
Subject: [R-SIG-Finance] Constraints on tangecyPortfolio in fPortfolio
In-Reply-To: <13162FC9-C4D3-4D74-A79B-86C95E6D69BC@ucla.edu>
References: <13162FC9-C4D3-4D74-A79B-86C95E6D69BC@ucla.edu>
Message-ID: <1334019582.24441.401.camel@brian-desktop>

I don't really use fPortfolio much, except for comparison, and I never
use the function tangencyPortfolio, but the Portfolio Optimization with
R/Rmetrics book suggests that you should be using the
portfolioConstraints function.  It also seems that your use of the c()
operator is misplaced, creating a character vector of what should be a
string.


On Mon, 2012-04-09 at 17:47 -0700, Noah Silverman wrote:
> Hi,
> 
> I'm using fPortfolio to analyze some equities.  It works well.
> 
> mySpec <- portfolioSpec()
> myPort <- tangencyPortfolio(thisHist, mySpec)
> 
> 
> I was asked to include a constraint that each stock gets at least 1% of the allocation.
> 
> Following the documentation for fPortfolio fails
> 
> mySpec <- portfolioSpec()
> constraints <- c("minW[1:portSize]=0.01")
> myConst <- portfolioConstraints(thisHist, mySpec, constraints)
> myPort <- tangencyPortfolio(thisHist, mySpec, myConst)
> 
> The error is rather cryptic:
> 
> Error in as.character.default(x) : 
>   no method for coercing this S4 class to a vector
> 
> 
> Does anyone have any suggestions?
> 
> 
> 
> --
> Noah Silverman
> UCLA Department of Statistics
> 8208 Math Sciences Building
> Los Angeles, CA 90095
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From noahsilverman at ucla.edu  Tue Apr 10 03:07:38 2012
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Mon, 9 Apr 2012 18:07:38 -0700
Subject: [R-SIG-Finance] Constraints on tangecyPortfolio in fPortfolio
In-Reply-To: <1334019582.24441.401.camel@brian-desktop>
References: <13162FC9-C4D3-4D74-A79B-86C95E6D69BC@ucla.edu>
	<1334019582.24441.401.camel@brian-desktop>
Message-ID: <92DA947E-166A-40B5-AD83-CCF81F911D5E@ucla.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120409/65445f5f/attachment.pl>

From Alain.Ledon at ally.com  Tue Apr 10 22:11:15 2012
From: Alain.Ledon at ally.com (Ledon, Alain)
Date: Tue, 10 Apr 2012 16:11:15 -0400
Subject: [R-SIG-Finance] Constraints on tangecyPortfolio in fPortfolio
In-Reply-To: <92DA947E-166A-40B5-AD83-CCF81F911D5E@ucla.edu>
References: <13162FC9-C4D3-4D74-A79B-86C95E6D69BC@ucla.edu>
	<1334019582.24441.401.camel@brian-desktop>
	<92DA947E-166A-40B5-AD83-CCF81F911D5E@ucla.edu>
Message-ID: <AC7014A33F40A747946F6CA7BB5DF0A8016DBD624A@USABHEM0GNAO03.NAO.global.gmacfs.com>

Did you try passing the constraint directly into "tangencyPortfolio"?

> library(fPortfolio)
> lppData <- 100 * LPP2005.RET[, 1:6]
> tgSpec <- portfolioSpec()
> setRiskFreeRate(tgSpec) <- 0
> tgPortfolio <- tangencyPortfolio(data=lppData, spec=tgSpec, constraints="LongOnly")
> tgPortfolio)
> tgPortfolio <- tangencyPortfolio(data=lppData, spec=tgSpec, constraints="minW[1:6]=0.01")
> tgPortfolio

Alain

(646)781-2698


-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Noah Silverman
Sent: Monday, April 09, 2012 9:08 PM
To: Brian G. Peterson
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Constraints on tangecyPortfolio in fPortfolio

Brian,

I appreciate the suggests, however that isn't the issue.

The "c" is from the example in the rmetrics book.
Removing it doesn't change the results at all.

Additionally, I am using the portfolioConstraints function.

--
Noah Silverman
UCLA Department of Statistics
8208 Math Sciences Building
Los Angeles, CA 90095

On Apr 9, 2012, at 5:59 PM, Brian G. Peterson wrote:

> I don't really use fPortfolio much, except for comparison, and I never
> use the function tangencyPortfolio, but the Portfolio Optimization with
> R/Rmetrics book suggests that you should be using the
> portfolioConstraints function.  It also seems that your use of the c()
> operator is misplaced, creating a character vector of what should be a
> string.
> 
> 
> On Mon, 2012-04-09 at 17:47 -0700, Noah Silverman wrote:
>> Hi,
>> 
>> I'm using fPortfolio to analyze some equities.  It works well.
>> 
>> mySpec <- portfolioSpec()
>> myPort <- tangencyPortfolio(thisHist, mySpec)
>> 
>> 
>> I was asked to include a constraint that each stock gets at least 1% of the allocation.
>> 
>> Following the documentation for fPortfolio fails
>> 
>> mySpec <- portfolioSpec()
>> constraints <- c("minW[1:portSize]=0.01")
>> myConst <- portfolioConstraints(thisHist, mySpec, constraints)
>> myPort <- tangencyPortfolio(thisHist, mySpec, myConst)
>> 
>> The error is rather cryptic:
>> 
>> Error in as.character.default(x) : 
>>  no method for coercing this S4 class to a vector
>> 
>> 
>> Does anyone have any suggestions?
>> 
>> 
>> 
>> --
>> Noah Silverman
>> UCLA Department of Statistics
>> 8208 Math Sciences Building
>> Los Angeles, CA 90095
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
> 
> -- 
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
> 


	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From horstrwolf at msn.com  Tue Apr 10 22:22:39 2012
From: horstrwolf at msn.com (Horst R. Wolf)
Date: Tue, 10 Apr 2012 22:22:39 +0200
Subject: [R-SIG-Finance] PortfolioAnalytics / optimize.portfolio.parallel()
Message-ID: <DUB107-W308232F31B5181A2B272F5D7340@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120410/a682aee6/attachment.pl>

From brian at braverock.com  Tue Apr 10 22:28:43 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 10 Apr 2012 15:28:43 -0500
Subject: [R-SIG-Finance] PortfolioAnalytics /
 optimize.portfolio.parallel()
In-Reply-To: <DUB107-W308232F31B5181A2B272F5D7340@phx.gbl>
References: <DUB107-W308232F31B5181A2B272F5D7340@phx.gbl>
Message-ID: <1334089723.25408.161.camel@brian-rcg>

I don't see what Operating System you are on.

registerDoMC only works on linux, so I'll assume that.

Can you run the demos in the doMC vignette?

On Tue, 2012-04-10 at 22:22 +0200, Horst R. Wolf wrote:
> I tried to test optimize.portfolio.parallel(). Here is the result.What are "nodes"?
> 
> > registerDoMC()> > getDoParWorkers()[1] 4> getDoParName()[1] "doMC"> getDoParVersion()[1] "1.2.4"> data(indexes)> > ObjSpec <- constraint(assets=colnames(indexes[,1:4]), min=rep(0,4),max=rep(1,4),+                       min_sum=1,max_sum=1)assuming equal weighted seed portfolio> ObjSpec <- add.objective(constraints=ObjSpec,+                          type="risk_budget_objective", name="CVaR",+                          arguments=list(p=.95,clean="boudt"),+                          min_concentration=TRUE, enabled=TRUE)> set.seed(1234)> out <- optimize.portfolio.parallel(R=indexes[,1:4],constraints=ObjSpec,+             optimize_method=c("DEoptim"),search_size=5000,trace=FALSE,nodes=4)Fehler in eval(expr, envir, enclos) : Objekt 'nodes.' nicht gefunden> sessionInfo()R version 2.14.1 (2011-12-22)Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
> locale:[1] C/en_US.UTF-8/C/C/C/C
> attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   base     
> other attached packages: [1] doMC_1.2.4                   multicore_0.1-7              foreach_1.3.5                [4] codetools_0.2-8              iterators_1.0.5              DEoptim_2.2-0                [7] quantmod_0.3-17              TTR_0.21-1                   Defaults_1.1-1              [10] PortfolioAnalytics_0.6.1     PerformanceAnalytics_1.0.4.4 xts_0.8-6                   [13] zoo_1.7-7                   
> loaded via a namespace (and not attached):[1] blotter_0.8.4    grid_2.14.1      lattice_0.20-6   parallel_2.14.1  quantstrat_0.6.1[6] tools_2.14.1    
>   Horst R. Wolf
> e mail     horstrwolf at msn.com
> 
> 
> 
>  		 	   		  
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From edd at debian.org  Wed Apr 11 02:01:32 2012
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 10 Apr 2012 19:01:32 -0500
Subject: [R-SIG-Finance] R/Finance 2012 registrations going strong (Was:
	Registration Open, (Draft) Agenda Posted)
In-Reply-To: <20327.58740.398600.251335@max.nulle.part>
References: <20327.58740.398600.251335@max.nulle.part>
Message-ID: <20356.51676.813575.539682@max.nulle.part>


A quick update: R/Finance 2012 registration is going stronger than for any of
the three previous R/Finance conferences.  We just reached 100 registrations,
this took just three weeks and a day.

The different pre-conference seminars are filling fast as well, with the most
popular seminar already at 42% of capacity.  Similarly, the official
conference dinner is already 50% sold.

More details about the conference ad well as registrations information can be
found below in the earlier announcement.

For the committee,   Dirk


On 19 March 2012 at 21:03, Dirk Eddelbuettel wrote:
| 
| The registration for R/Finance 2012 -- which will take place May 11 and 12
| in Chicago -- is NOW OPEN!
|  
| Building on the success of the three previous conferences in 2009, 2010,
| and 2011, we expect more than 250 attendees from around the world.  R
| users from industry, academia, and government will join 40+ presenters
| covering all areas of finance with R.
| 
| This year's conference will start earlier in the day on Friday, to
| accommodate the tremendous line up of speakers for 2012, as well as to
| provide more time between talks for networking.
| 
| We are very excited about the four keynotes by Paul Gilbert, Blair
| Hull, Rob McCulloch, and Simon Urbanek.  The main agenda includes
| nineteen full presentations and eighteen shorter "lightning talks".
| We are also excited to offer six optional pre-conference seminars on
| Friday morning.
| 
| Once again, we are hosting the R/Finance conference dinner on Friday
| evening, where you can continue conversations while dining and
| drinking atop a West Loop restaurant overlooking the Chicago skyline.
| 
| More details of the agenda are available at:
| 
|    http://www.RinFinance.com/agenda/
| 
| Registration information is available at 
| 
|    http://www.RinFinance.com/register/
| 
| and can also be directly accessed by going to
| 
|    http://www.regonline.com/RFinance2012
| 
| 
| On behalf of the committee and sponsors, we look forward to seeing you
| in Chicago!
| 
|    Gib Bassett, Peter Carl, Dirk Eddelbuettel, Brian Peterson,
|    Dale Rosenthal, Jeffrey Ryan, Joshua Ulrich
| 
| 
| Our 2012 Sponsors:
| 
|    International Center for Futures and Derivatives at UIC
| 
|    Revolution Analytics
|    Sybase
|    MS-Computational Finance at University of Washington
| 
|    Google
|    lemnica
|    OpenGamma
|    OneTick
|    RStudio
|    Tick Data
| 
| 
| 
| -- 
| "Outside of a dog, a book is a man's best friend. Inside of a dog, it is too
| dark to read." -- Groucho Marx
| 
| _______________________________________________
| R-SIG-Finance at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-sig-finance
| -- Subscriber-posting only. If you want to post, subscribe first.
| -- Also note that this is not the r-help list where general R questions should go.

-- 
R/Finance 2012 Conference on May 11 and 12, 2012 at UIC in Chicago, IL
See agenda, registration details and more at http://www.RinFinance.com


From stergios_marinopoulos at yahoo.com  Wed Apr 11 18:31:15 2012
From: stergios_marinopoulos at yahoo.com (Stergios Marinopoulos)
Date: Wed, 11 Apr 2012 09:31:15 -0700 (PDT)
Subject: [R-SIG-Finance] Modify the chart object to save plotted text
Message-ID: <1334161875.4502.YahooMailNeo@web162901.mail.bf1.yahoo.com>


[I?originally?posed this question under a different thread regarding ablines, but I imagine the question was different enough that it went ignored, so I will try again using a new thread.]


How can I alter the?underlying chart object so that text annotations are not lost when?the plot is re-drawn, like for example when a call to addTA is made? ?(I am using the experimental versions of the charting api in quantmod)

Here's how I currently add text to a chart:

getSymbols("SPY", from="2012-01-01", to="2012-04-01")
chart_Series(SPY)
x <- SPY["2012-02-15", which.i=TRUE]
text(x, Lo(SPY)[x,], "2012-02-15", srt=90, adj=c(1,0.5) )


And now when I add this TA the text disappears:

add_TA(Cl(SPY)<134,border=NA,col='#888888',on=-1)

I think this probably requires going under the hood in the library, so a pointer on where to begin looking would be greatly appreciated.

Thanks,

sm
--
Stergios Marinopoulos


From wotuzu17 at gmail.com  Thu Apr 12 18:36:43 2012
From: wotuzu17 at gmail.com (Andreas Voellenklee)
Date: Thu, 12 Apr 2012 18:36:43 +0200
Subject: [R-SIG-Finance] question about subsetting xts, calculating returns
Message-ID: <CAKC0BhnhWGfmHAA7ibdMPoV5FpNi_yHCNK2tk0Tvccu=kNw8rw@mail.gmail.com>

Hello,

I would like to monitor short-term-returns on simple strategies like
donchian channel price outbreaks. That is, I would like to see the
returns at 1:10 periods after the breakout-event occurs.

For example:
getSymbols("NOK", adjust=TRUE)

# calculate donchian channel for NOK
DC <- DonchianChannel(lag(cbind(Hi(NOK),Lo(NOK))))

# mark days when price closes below the low band of DC
breakdown <- eval(Cl(NOK)<DC[,"low"])
colnames(breakdown) <- c("breakdown")

# how often did that condition occur?
colSums(breakdown, na.rm=TRUE)
#breakdown
#      135


Now I masked out all days when the price closed below the donchian channel.

- Is there a easy way to display only the (135) rows where
breakdown[,1] is TRUE?
- How to calculate the 1:10 days- returns after the breakdown-events then?

I would be grateful for some hints,

Andreas


From gsee000 at gmail.com  Thu Apr 12 19:38:38 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 12 Apr 2012 12:38:38 -0500
Subject: [R-SIG-Finance] question about subsetting xts,
	calculating returns
In-Reply-To: <CAKC0BhnhWGfmHAA7ibdMPoV5FpNi_yHCNK2tk0Tvccu=kNw8rw@mail.gmail.com>
References: <CAKC0BhnhWGfmHAA7ibdMPoV5FpNi_yHCNK2tk0Tvccu=kNw8rw@mail.gmail.com>
Message-ID: <CA+xi=qaDouZ_1mJq2=mdEpK2Z6WFwzd567E791s7645SrCTe8A@mail.gmail.com>

Hi Andreas,

Try something like below.  Make sure it's right though, because I
didn't really check my work.

On Thu, Apr 12, 2012 at 11:36 AM, Andreas Voellenklee
<wotuzu17 at gmail.com> wrote:
> - Is there a easy way to display only the (135) rows where
> breakdown[,1] is TRUE?

NOK[breakdown]

> - How to calculate the 1:10 days- returns after the breakdown-events then?

# 10 period return from the current period through 10 periods into the future
lag(ROC(Cl(NOK), 10), -10)[breakdown]

# 1:10 period return from the current period through 1:10 periods into
the future
do.call(cbind, lapply(1:10, function(i) {
    lag(ROC(Cl(NOK), i), -i)[breakdown]
}))


HTH,
Garrett


From cliffclive at gmail.com  Thu Apr 12 21:34:06 2012
From: cliffclive at gmail.com (Cliff Clive)
Date: Thu, 12 Apr 2012 12:34:06 -0700 (PDT)
Subject: [R-SIG-Finance] Trouble with RBloomberg on R 2.13.0
In-Reply-To: <BANLkTikzvui0Wz-s14t48+Bhuj13F5yXVQ@mail.gmail.com>
References: <2138811547.602262.1308852626379.JavaMail.open-xchange@oxusltgw07.schlund.de>
	<1309395329515-3634441.post@n4.nabble.com>
	<BANLkTikzvui0Wz-s14t48+Bhuj13F5yXVQ@mail.gmail.com>
Message-ID: <1334259246223-4552850.post@n4.nabble.com>

Hi, was this ever resolved?  I'm having the same problem.

--
View this message in context: http://r.789695.n4.nabble.com/Trouble-with-RBloomberg-on-R-2-13-0-tp3620596p4552850.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From cliffclive at gmail.com  Thu Apr 12 23:13:26 2012
From: cliffclive at gmail.com (Cliff Clive)
Date: Thu, 12 Apr 2012 14:13:26 -0700 (PDT)
Subject: [R-SIG-Finance] RBloomberg update on "Error in dimnames(x) <-
 dn : 'dimnames' applied to non-array"
In-Reply-To: <CAA3Wa=seL0rxS9Suo8aNR-fLXpzhmUs5JSgdkZTOmPFy4M1Fsw@mail.gmail.com>
References: <CAJOva6FDMY9ik=QT4MZ+z53Urcbg=+p1Hk0OJOXUMJ6aaBJTEg@mail.gmail.com>
	<1311090762818-3678480.post@n4.nabble.com>
	<1327600982179-4331214.post@n4.nabble.com>
	<CAA3Wa=seL0rxS9Suo8aNR-fLXpzhmUs5JSgdkZTOmPFy4M1Fsw@mail.gmail.com>
Message-ID: <1334265206117-4553100.post@n4.nabble.com>

Hi, I'm having a hard time installing rJava 0.8-8 on a Windows machine.

When I try installing from a .tar.gz file, I get this error:
Warning in install.packages :
  error 1 in extracting from zip file
Warning in install.packages :
  cannot open compressed file 'rJava_0.8-8.tar/DESCRIPTION', probable reason
'No such file or directory'

When I try installing from the .tar file, I get the same error.
I tried just extracting the rJava folder and putting it into the folder with
my other R files, and it didn't work.
I tried zipping the rJava folder and installing from the .zip file, which
seemed to work, but then when I tried to load library(rJava), it said that
it is not a valid installed package.

Obviously I'm not very good at this stuff.  Can anyone point me in the right
direction?

--
View this message in context: http://r.789695.n4.nabble.com/RBloomberg-update-on-Error-in-dimnames-x-dn-dimnames-applied-to-non-array-tp3660756p4553100.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From fibosworld at yahoo.com  Thu Apr 12 23:19:44 2012
From: fibosworld at yahoo.com (Techni X)
Date: Thu, 12 Apr 2012 14:19:44 -0700 (PDT)
Subject: [R-SIG-Finance] PerformanceAnalytics Return.calculate "simple" does
	not work
Message-ID: <1334265584.41515.YahooMailNeo@web130205.mail.mud.yahoo.com>



Dear,
I encounter a problem if I run the example from the PerformanceAnalytics package on Return.calculate:
require(tseries) prices = get.hist.quote("IBM", start = "1999-01-01", end = "2007-01-01", quote = "AdjClose", compression = "d") R.IBM = Return.calculate(prices, method="simple")

R.IBM is then a vector filled with zeros

Method="compound" however works:
R.IBM = Return.calculate(prices, method="compound").

Still I do need the "simple" method. Can anybody help and give me a hint?

Thanks
Stephan

> sessionInfo() R version 2.14.2 (2012-02-29)
Platform: i386-pc-mingw32/i386 (32-bit) locale:
[1] LC_COLLATE=German_Germany.1252  LC_CTYPE=German_Germany.1252   
[3] LC_MONETARY=German_Germany.1252 LC_NUMERIC=C                   
[5] LC_TIME=German_Germany.1252     attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base      other attached packages: [1] tseries_0.10-28              quadprog_1.5-4               [3] scales_0.2.0                 gdata_2.8.2                  [5] PerformanceAnalytics_1.0.4.4 ggplot2_0.9.0                [7] quantmod_0.3-17              TTR_0.21-1                   [9] xts_0.8-6                    zoo_1.7-7                   
[11] Defaults_1.1-1               plyr_1.7.1                  
[13] RColorBrewer_1.0-5           loaded via a namespace (and not attached): [1] colorspace_1.1-1 dichromat_1.2-4  digest_0.5.2     grid_2.14.2      [5] gtools_2.6.2     lattice_0.20-0   MASS_7.3-17      memoise_0.1      [9] munsell_0.3      proto_0.3-9.2    reshape2_1.2.1   stringr_0.6     
[13] tools_2.14.2


From brian at braverock.com  Thu Apr 12 23:41:21 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 12 Apr 2012 16:41:21 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics Return.calculate "simple"
 does not work
In-Reply-To: <1334265584.41515.YahooMailNeo@web130205.mail.mud.yahoo.com>
References: <1334265584.41515.YahooMailNeo@web130205.mail.mud.yahoo.com>
Message-ID: <1334266881.25408.327.camel@brian-rcg>

A regression bug slipped into the last release.
Fixed in svn r 1894

https://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/PerformanceAnalytics/R/Return.calculate.R?root=returnanalytics

On Thu, 2012-04-12 at 14:19 -0700, Techni X wrote:
> 
> Dear,
> I encounter a problem if I run the example from the PerformanceAnalytics package on Return.calculate:
> require(tseries) prices = get.hist.quote("IBM", start = "1999-01-01", end = "2007-01-01", quote = "AdjClose", compression = "d") R.IBM = Return.calculate(prices, method="simple")
> 
> R.IBM is then a vector filled with zeros
> 
> Method="compound" however works:
> R.IBM = Return.calculate(prices, method="compound").
> 
> Still I do need the "simple" method. Can anybody help and give me a hint?
> 
> Thanks
> Stephan
> 
> > sessionInfo() R version 2.14.2 (2012-02-29)
> Platform: i386-pc-mingw32/i386 (32-bit) locale:
> [1] LC_COLLATE=German_Germany.1252  LC_CTYPE=German_Germany.1252   
> [3] LC_MONETARY=German_Germany.1252 LC_NUMERIC=C                   
> [5] LC_TIME=German_Germany.1252     attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base      other attached packages: [1] tseries_0.10-28              quadprog_1.5-4               [3] scales_0.2.0                 gdata_2.8.2                  [5] PerformanceAnalytics_1.0.4.4 ggplot2_0.9.0                [7] quantmod_0.3-17              TTR_0.21-1                   [9] xts_0.8-6                    zoo_1.7-7                   
> [11] Defaults_1.1-1               plyr_1.7.1                  
> [13] RColorBrewer_1.0-5           loaded via a namespace (and not attached): [1] colorspace_1.1-1 dichromat_1.2-4  digest_0.5.2     grid_2.14.2      [5] gtools_2.6.2     lattice_0.20-0   MASS_7.3-17      memoise_0.1      [9] munsell_0.3      proto_0.3-9.2    reshape2_1.2.1   stringr_0.6     
> [13] tools_2.14.2
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From john.laing at gmail.com  Fri Apr 13 00:47:42 2012
From: john.laing at gmail.com (John Laing)
Date: Thu, 12 Apr 2012 18:47:42 -0400
Subject: [R-SIG-Finance] RBloomberg update on "Error in dimnames(x) <-
 dn : 'dimnames' applied to non-array"
In-Reply-To: <1334265206117-4553100.post@n4.nabble.com>
References: <CAJOva6FDMY9ik=QT4MZ+z53Urcbg=+p1Hk0OJOXUMJ6aaBJTEg@mail.gmail.com>
	<1311090762818-3678480.post@n4.nabble.com>
	<1327600982179-4331214.post@n4.nabble.com>
	<CAA3Wa=seL0rxS9Suo8aNR-fLXpzhmUs5JSgdkZTOmPFy4M1Fsw@mail.gmail.com>
	<1334265206117-4553100.post@n4.nabble.com>
Message-ID: <CAA3Wa=tp_6xTfiQ3Ya548tkDgVDQH6M5jsKQ02tsCJbpuA=TqQ@mail.gmail.com>

Cliff,

The current version of rJava is 0.9-3. If you're not familiar with
installing packages in R, your best bet is to use the install.packages
function.

Hope that helps,
John

On Thu, Apr 12, 2012 at 5:13 PM, Cliff Clive <cliffclive at gmail.com> wrote:
> Hi, I'm having a hard time installing rJava 0.8-8 on a Windows machine.
>
> When I try installing from a .tar.gz file, I get this error:
> Warning in install.packages :
> ?error 1 in extracting from zip file
> Warning in install.packages :
> ?cannot open compressed file 'rJava_0.8-8.tar/DESCRIPTION', probable reason
> 'No such file or directory'
>
> When I try installing from the .tar file, I get the same error.
> I tried just extracting the rJava folder and putting it into the folder with
> my other R files, and it didn't work.
> I tried zipping the rJava folder and installing from the .zip file, which
> seemed to work, but then when I tried to load library(rJava), it said that
> it is not a valid installed package.
>
> Obviously I'm not very good at this stuff. ?Can anyone point me in the right
> direction?
>
> --
> View this message in context: http://r.789695.n4.nabble.com/RBloomberg-update-on-Error-in-dimnames-x-dn-dimnames-applied-to-non-array-tp3660756p4553100.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From cliffclive at gmail.com  Fri Apr 13 02:49:12 2012
From: cliffclive at gmail.com (Cliff Clive)
Date: Thu, 12 Apr 2012 17:49:12 -0700 (PDT)
Subject: [R-SIG-Finance] RBloomberg update on "Error in dimnames(x) <-
 dn : 'dimnames' applied to non-array"
In-Reply-To: <CAA3Wa=tp_6xTfiQ3Ya548tkDgVDQH6M5jsKQ02tsCJbpuA=TqQ@mail.gmail.com>
References: <CAJOva6FDMY9ik=QT4MZ+z53Urcbg=+p1Hk0OJOXUMJ6aaBJTEg@mail.gmail.com>
	<1311090762818-3678480.post@n4.nabble.com>
	<1327600982179-4331214.post@n4.nabble.com>
	<CAA3Wa=seL0rxS9Suo8aNR-fLXpzhmUs5JSgdkZTOmPFy4M1Fsw@mail.gmail.com>
	<1334265206117-4553100.post@n4.nabble.com>
	<CAA3Wa=tp_6xTfiQ3Ya548tkDgVDQH6M5jsKQ02tsCJbpuA=TqQ@mail.gmail.com>
Message-ID: <1334278152339-4553486.post@n4.nabble.com>

Sorry, I should have been more specific.  I know how to install R packages in
general; I just don't know how to install the old version of rJava (0.8-8)
from a .tar.gz file on Windows 7.  For some reason the most recent version
of rJava is incompatible with RBloomberg, but other people have had success
with this one.

Thanks for the quick response, though.

--
View this message in context: http://r.789695.n4.nabble.com/RBloomberg-update-on-Error-in-dimnames-x-dn-dimnames-applied-to-non-array-tp3660756p4553486.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From kwong at fortress.com  Fri Apr 13 02:58:00 2012
From: kwong at fortress.com (KengOnn)
Date: Thu, 12 Apr 2012 17:58:00 -0700 (PDT)
Subject: [R-SIG-Finance] Trouble with RBloomberg on R 2.13.0
In-Reply-To: <1334259246223-4552850.post@n4.nabble.com>
References: <2138811547.602262.1308852626379.JavaMail.open-xchange@oxusltgw07.schlund.de>
	<1309395329515-3634441.post@n4.nabble.com>
	<BANLkTikzvui0Wz-s14t48+Bhuj13F5yXVQ@mail.gmail.com>
	<1334259246223-4552850.post@n4.nabble.com>
Message-ID: <3665A7E80056224FBA8FDDC99F3D1FF305C73D42@SG-EXCHMBX1.fortressinv.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120412/1041aa7e/attachment.pl>

From student.northwestern at gmail.com  Fri Apr 13 03:15:27 2012
From: student.northwestern at gmail.com (Jim Green)
Date: Thu, 12 Apr 2012 21:15:27 -0400
Subject: [R-SIG-Finance] Guy's example osFixedDollar not working in latest
	quantstrat
Message-ID: <CACAe89zekcm7Yu+0kT5gNqzGtqBjKha-V8wUd+qO7QkENq8gDw@mail.gmail.com>

Good Evening!

I was studying the Guy Yollin's presentation on quantstrat
http://www.r-programming.org/files/quantstrat-II.pdf  and can't
reproduce the result in latest quantstrat. Actually osFixedDollar was
not even called per my basic logging. I've attached the pdf chart and
the runnable code and the results on my machine. Hope someone could
help..

Thanks!
Jim.


### code ###

#!/usr/bin/env Rscript
library(quantstrat)
library(logging)
basicConfig()

# define stock list
stock.str=c("SPY")
# inz currency and stocks
dummy <- currency('USD')
for(symbol in stock.str){
         stock(symbol, currency="USD",multiplier=1)
}
# download stocks
start.date <- as.Date("2001-01-01")
initDate <- start.date-1
end.date <-as.Date("2011-08-06")
getSymbols(stock.str,from=start.date,to=end.date,adjust=T)

# inz portfolio, account, orders, strategy
strat.name <- "MAX"
initEq=1000000
trade.percent <- 0.01
tradeSize <- initEq * trade.percent
dummy <- initPortf(name=strat.name,symbols=stock.str, initDate=initDate)
dummy <- initAcct(name=strat.name,portfolios=strat.name,
initDate=initDate, initEq=initEq)
initOrders(portfolio=strat.name,initDate=initDate)
strat <- strategy(strat.name)

# indicators:
strat <- add.indicator(strategy = strat, name = "SMA", arguments =
list(x=quote(Cl(mktdata)), n=50),label= "ma50" )
strat <- add.indicator(strategy = strat, name = "SMA", arguments =
list(x=quote(Cl(mktdata)), n=200),label= "ma200")
# signals:
strat <- add.signal(strategy = strat,name="sigCrossover", arguments =
list(columns=c("ma50","ma200"), relationship="gte"),
label="ma50.gt.ma200")
strat <- add.signal(strategy = strat,name="sigCrossover", arguments =
list(column=c("ma50","ma200"),relationship="lt"),
label="ma50.lt.ma200")

osFixedDollar <- function(timestamp,orderqty, portfolio, symbol, ruletype, ...)
{
   logwarn("started osFixedDollar")
   ClosePrice <- as.numeric(Cl(mktdata[timestamp,]))
   orderqty <- sign(orderqty)*round(tradeSize/ClosePrice)
   return(orderqty)
}

# rules:
strat <- add.rule(
   strategy = strat,
   name='ruleSignal',
   arguments = list(sigcol="ma50.gt.ma200",sigval=TRUE, orderqty=100,
ordertype='market', orderside='long', osFUN='osFixedDollar'),
   type='enter'
)

strat <- add.rule(
   strategy = strat,
   name='ruleSignal',
   arguments = list(sigcol="ma50.lt.ma200",sigval=TRUE,
orderqty='all', ordertype='market', orderside='long'),
   type='exit'
)

out <- try(applyStrategy(strategy=strat , portfolios=strat.name, verbose=TRUE))
getTxns(Portfolio=strat.name, Symbol=stock.str)
getPortfolio(strat.name)$summary
dummy <- updatePortf(Portfolio=strat.name,
   Dates=paste('::',as.Date(Sys.time()),sep='')
)

pdf("quantstrat2_position_sizing_fixed.pdf")
chart.Posn(Portfolio=strat.name,Symbol=stock.str)
add_SMA(n=50 , on=1,col='blue',lwd=2)
add_SMA(n=200, on=1,col='red',lwd=2)

### output ###
[1] "SPY"
[1] "2002-04-24 SPY 100 @ 91.9933301492183"
[1] "2002-04-29 SPY -100 @ 89.8492574695683"
[1] "2002-04-30 SPY 100 @ 90.6900702851173"
[1] "2002-05-14 SPY -100 @ 92.674388529813"
[1] "2003-05-12 SPY 100 @ 81.1354076349475"
[1] "2004-08-25 SPY -100 @ 96.8566013672453"
[1] "2004-10-27 SPY 100 @ 98.8180303441752"
[1] "2006-07-25 SPY -100 @ 114.662711057191"
[1] "2006-08-29 SPY 100 @ 118.211406993905"
[1] "2007-12-28 SPY -100 @ 137.165700378348"
[1] "2009-06-18 SPY 100 @ 88.5716570825431"
[1] "2010-07-06 SPY -100 @ 100.84667390332"
[1] "2010-10-15 SPY 100 @ 116.002709490181"
                   Txn.Qty Txn.Price Txn.Fees  Txn.Value Txn.Avg.Cost
2000-12-30 19:00:00       0   0.00000        0      0.000      0.00000
2002-04-24 00:00:00     100  91.99333        0   9199.333     91.99333
2002-04-29 00:00:00    -100  89.84926        0  -8984.926     89.84926
2002-04-30 00:00:00     100  90.69007        0   9069.007     90.69007
2002-05-14 00:00:00    -100  92.67439        0  -9267.439     92.67439
2003-05-12 00:00:00     100  81.13541        0   8113.541     81.13541
2004-08-25 00:00:00    -100  96.85660        0  -9685.660     96.85660
2004-10-27 00:00:00     100  98.81803        0   9881.803     98.81803
2006-07-25 00:00:00    -100 114.66271        0 -11466.271    114.66271
2006-08-29 00:00:00     100 118.21141        0  11821.141    118.21141
2007-12-28 00:00:00    -100 137.16570        0 -13716.570    137.16570
2009-06-18 00:00:00     100  88.57166        0   8857.166     88.57166
2010-07-06 00:00:00    -100 100.84667        0 -10084.667    100.84667
2010-10-15 00:00:00     100 116.00271        0  11600.271    116.00271
                   Net.Txn.Realized.PL
2000-12-30 19:00:00              0.0000
2002-04-24 00:00:00              0.0000
2002-04-29 00:00:00           -214.4073
2002-04-30 00:00:00              0.0000
2002-05-14 00:00:00            198.4318
2003-05-12 00:00:00              0.0000
2004-08-25 00:00:00           1572.1194
2004-10-27 00:00:00              0.0000
2006-07-25 00:00:00           1584.4681
2006-08-29 00:00:00              0.0000
2007-12-28 00:00:00           1895.4293
2009-06-18 00:00:00              0.0000
2010-07-06 00:00:00           1227.5017
2010-10-15 00:00:00              0.0000
                   Long.Value Short.Value Net.Value Gross.Value Realized.PL
2000-12-30 19:00:00          0           0         0           0           0
                   Unrealized.PL Gross.Trading.PL Txn.Fees Net.Trading.PL
2000-12-30 19:00:00             0                0        0              0


### sessioninfo()###
> sessionInfo()
R version 2.14.2 (2012-02-29)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=C                 LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] graphics  grDevices utils     datasets  stats     methods   base

other attached packages:
 [1] PerformanceAnalytics_1.0.4.4 quantstrat_0.6.4
 [3] blotter_0.8.4                FinancialInstrument_0.13.6
 [5] RPostgreSQL_0.3-2            DBI_0.2-5
 [7] quantmod_0.3-17              TTR_0.21-1
 [9] Defaults_1.1-1               xts_0.8-6
[11] zoo_1.7-7

loaded via a namespace (and not attached):
[1] grid_2.14.2    lattice_0.20-0
-------------- next part --------------
A non-text attachment was scrubbed...
Name: quantstrat2_position_sizing_fixed.pdf
Type: application/pdf
Size: 351907 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120412/91c9678b/attachment.pdf>

From fibosworld at yahoo.com  Fri Apr 13 10:22:05 2012
From: fibosworld at yahoo.com (Techni X)
Date: Fri, 13 Apr 2012 01:22:05 -0700 (PDT)
Subject: [R-SIG-Finance] PerformanceAnalytics Return.calculate "simple"
	does not work
In-Reply-To: <1334266881.25408.327.camel@brian-rcg>
References: <1334265584.41515.YahooMailNeo@web130205.mail.mud.yahoo.com>
	<1334266881.25408.327.camel@brian-rcg>
Message-ID: <1334305325.22676.YahooMailNeo@web130201.mail.mud.yahoo.com>

@ Brian: Thanks! 

I copied the function for Return.calculate from the link you provided and it works!
And thanks to you and your co-authors for the brilliant package!

@ Worik: I think it does not work in Version 1.0.4.4, but it did in previous versions. Brian's hint however solves it, see above.

Best Regards
Stephan



----- Original Message -----
From: Brian G. Peterson <brian at braverock.com>
To: Techni X <fibosworld at yahoo.com>
Cc: "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
Sent: Thursday, April 12, 2012 11:41 PM
Subject: Re: [R-SIG-Finance] PerformanceAnalytics Return.calculate "simple" does not work

A regression bug slipped into the last release.
Fixed in svn r 1894

https://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/PerformanceAnalytics/R/Return.calculate.R?root=returnanalytics

On Thu, 2012-04-12 at 14:19 -0700, Techni X wrote:
> 
> Dear,
> I encounter a problem if I run the example from the PerformanceAnalytics package on Return.calculate:
> require(tseries) prices = get.hist.quote("IBM", start = "1999-01-01", end = "2007-01-01", quote = "AdjClose", compression = "d") R.IBM = Return.calculate(prices, method="simple")
> 
> R.IBM is then a vector filled with zeros
> 
> Method="compound" however works:
> R.IBM = Return.calculate(prices, method="compound").
> 
> Still I do need the "simple" method. Can anybody help and give me a hint?
> 
> Thanks
> Stephan
> 
> > sessionInfo() R version 2.14.2 (2012-02-29)
> Platform: i386-pc-mingw32/i386 (32-bit) locale:
> [1] LC_COLLATE=German_Germany.1252? LC_CTYPE=German_Germany.1252? 
> [3] LC_MONETARY=German_Germany.1252 LC_NUMERIC=C? ? ? ? ? ? ? ? ? 
> [5] LC_TIME=German_Germany.1252? ?  attached base packages:
> [1] stats? ?  graphics? grDevices utils? ?  datasets? methods?  base? ? ? other attached packages: [1] tseries_0.10-28? ? ? ? ? ? ? quadprog_1.5-4? ? ? ? ? ? ?  [3] scales_0.2.0? ? ? ? ? ? ? ?  gdata_2.8.2? ? ? ? ? ? ? ? ? [5] PerformanceAnalytics_1.0.4.4 ggplot2_0.9.0? ? ? ? ? ? ? ? [7] quantmod_0.3-17? ? ? ? ? ? ? TTR_0.21-1? ? ? ? ? ? ? ? ?  [9] xts_0.8-6? ? ? ? ? ? ? ? ? ? zoo_1.7-7? ? ? ? ? ? ? ? ? 
> [11] Defaults_1.1-1? ? ? ? ? ? ?  plyr_1.7.1? ? ? ? ? ? ? ? ? 
> [13] RColorBrewer_1.0-5? ? ? ? ?  loaded via a namespace (and not attached): [1] colorspace_1.1-1 dichromat_1.2-4? digest_0.5.2? ?  grid_2.14.2? ? ? [5] gtools_2.6.2? ?  lattice_0.20-0?  MASS_7.3-17? ? ? memoise_0.1? ? ? [9] munsell_0.3? ? ? proto_0.3-9.2? ? reshape2_1.2.1?  stringr_0.6? ? 
> [13] tools_2.14.2
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From cliffclive at gmail.com  Fri Apr 13 18:52:19 2012
From: cliffclive at gmail.com (Cliff Clive)
Date: Fri, 13 Apr 2012 09:52:19 -0700 (PDT)
Subject: [R-SIG-Finance] Trouble with RBloomberg on R 2.13.0
In-Reply-To: <3665A7E80056224FBA8FDDC99F3D1FF305C73D42@SG-EXCHMBX1.fortressinv.com>
References: <2138811547.602262.1308852626379.JavaMail.open-xchange@oxusltgw07.schlund.de>
	<1309395329515-3634441.post@n4.nabble.com>
	<BANLkTikzvui0Wz-s14t48+Bhuj13F5yXVQ@mail.gmail.com>
	<1334259246223-4552850.post@n4.nabble.com>
	<3665A7E80056224FBA8FDDC99F3D1FF305C73D42@SG-EXCHMBX1.fortressinv.com>
Message-ID: <1334335939189-4555406.post@n4.nabble.com>

Thanks, Kengg.  What version of rJava are you using?

--
View this message in context: http://r.789695.n4.nabble.com/Trouble-with-RBloomberg-on-R-2-13-0-tp3620596p4555406.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From bbands at gmail.com  Fri Apr 13 20:04:12 2012
From: bbands at gmail.com (BBands)
Date: Fri, 13 Apr 2012 11:04:12 -0700
Subject: [R-SIG-Finance] Donchian Channel in TTR
In-Reply-To: <CBA317F8.378A5%jeff.a.ryan@gmail.com>
References: <CAKC0BhknWd7OA2PMAtnAAS9R9zDBTJ8y+E4Mr8osLTn3UcYN7g@mail.gmail.com>
	<CBA317F8.378A5%jeff.a.ryan@gmail.com>
Message-ID: <CAGS5yBVMeVr5reqa8hueOsoUKqQ7pdASiVt3kV2FWoSyf+7=zA@mail.gmail.com>

Donchian channels are a sort of special case in which the channel
values should not include the current period. if I were to code this,
today's value would reflect the n-1 prior highs and lows. The reason
is that is that when the current high and low are used there can never
be a breakout. These channels are used almost exclusively for
breakouts and traders look to the prior period's values to determine
whether a breakout has occurred. I fully understand Jeff's concerns
and would be ok with a note in the docs advising the use of lag(), but
I would code it with the lag as the default.

Best,

John Bollinger

On Thu, Apr 5, 2012 at 7:45 AM, Jeffrey Ryan <jeff.a.ryan at gmail.com> wrote:
> As I think I am partly responsible for this code in TTR (at least the
> initial rev), I'll explain my logic.
>
> In general, more options/arguments that simply do what single functions
> can do more explicitly isn't the best design strategy in many cases.
> Secondly, most (all?) of the other functions in TTR behave by including
> the 'current' price in the calculation. ?In the case of DonchianChannel
> the result of this is simply more obvious.
>
> e.g. EMA, SMA, Bbands, runMax, cumsum (base R), cummin (base R), etc also
> behave this way.
>
> The fix, without any code changes in the related TTR functions is to use
> the facility lag(). ?This is the canonical way to assure you aren't
> introducing look-ahead bias in your results.
>
> For what it is worth, this had been recently discussed in private. ?Josh
> may have a slightly different opinion, and I think the consensus was that
> the documentation could be more explicit, but the behavior is consistent
> with R and TTR as is.


From bbands at gmail.com  Fri Apr 13 22:07:06 2012
From: bbands at gmail.com (BBands)
Date: Fri, 13 Apr 2012 13:07:06 -0700
Subject: [R-SIG-Finance] Interesting behaviour in BBands
In-Reply-To: <1329609176.75020.YahooMailNeo@web30808.mail.mud.yahoo.com>
References: <1329609176.75020.YahooMailNeo@web30808.mail.mud.yahoo.com>
Message-ID: <CAGS5yBVONfEf49kEU+Rac5dckeA+fJL0UQ4d4E9QAQPutftBsw@mail.gmail.com>

Sorry, missed this when it hit. I'd say that if standard deviation = 0
then Bollinger Bands and the derived indicators such as %b are not
defined for that period and NaN would be the correct treatment.

Best,

John Bollinger

On Sat, Feb 18, 2012 at 3:52 PM, Stergios Marinopoulos
<stergios_marinopoulos at yahoo.com> wrote:
> There's an interesting behavior in BBands when dn, mavg, and up are the same
> value.? Here's an example:
>
>
> library(quantmod);
>
> getSymbols("SPY", from="1993-01-31", to="1996-01-01" ) ;
> bb <- BBands(Cl(SPY), n=3, sd=0.3, maType=EMA) ;
>
>
> bb[bb$pctB==Inf,]
> ??????????????? dn???? mavg?????? up pctB
> 1993-04-16 44.92297 44.92297 44.92297? Inf
> 1995-02-09 48.25296 48.25296 48.25296? Inf
>
>
> And here's the graphic display for the fist Inf occurrence:
>
>
> chartSeries(SPY["1993-04-10::1993-04-20",])
> addTA(bb,on=1)
>
>
> Notice pctB is Inf when the dn & up are coincident with mavg.? I don't think
> Inf is the right interpretation here, as the mavg line is not Inf % between
> the up and down.? Would zero be a better interpretation here?
>
>
> Thanks for your thoughts.
>
> --
> Stergios Marinopoulos
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
John Bollinger, CFA, CMT
www.BollingerBands.com

If you advance far enough, you arrive at the beginning.


From kwong at fortress.com  Sat Apr 14 03:09:00 2012
From: kwong at fortress.com (KengOnn)
Date: Fri, 13 Apr 2012 18:09:00 -0700 (PDT)
Subject: [R-SIG-Finance] Trouble with RBloomberg on R 2.13.0
In-Reply-To: <1334335939189-4555406.post@n4.nabble.com>
References: <2138811547.602262.1308852626379.JavaMail.open-xchange@oxusltgw07.schlund.de>
	<1309395329515-3634441.post@n4.nabble.com>
	<BANLkTikzvui0Wz-s14t48+Bhuj13F5yXVQ@mail.gmail.com>
	<1334259246223-4552850.post@n4.nabble.com>
	<3665A7E80056224FBA8FDDC99F3D1FF305C73D42@SG-EXCHMBX1.fortressinv.com>
	<1334335939189-4555406.post@n4.nabble.com>
Message-ID: <3665A7E80056224FBA8FDDC99F3D1FF305C740DE@SG-EXCHMBX1.fortressinv.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120413/b331267c/attachment.pl>

From stergios_marinopoulos at yahoo.com  Sun Apr 15 01:38:36 2012
From: stergios_marinopoulos at yahoo.com (Stergios Marinopoulos)
Date: Sat, 14 Apr 2012 16:38:36 -0700 (PDT)
Subject: [R-SIG-Finance] Interesting behaviour in BBands
In-Reply-To: <mailman.3.1334397601.31629.r-sig-finance@r-project.org>
References: <mailman.3.1334397601.31629.r-sig-finance@r-project.org>
Message-ID: <1334446716.99259.YahooMailNeo@web162903.mail.bf1.yahoo.com>

Thanks for the reply. ?In this case, i.e. the absence of volatility, I chose to go with 0.5 for %B for my work. ?Assuming the function is?differentiable, if you approach from the left (could you even?approach?from the right a priori?), the limit is 0.5. ?I don't think there is a?discontinuity?in the definition, so I just kept 0.5. ?I suppose I could always work it out using L'Hopital's Rule, but that is best left as an exercise for?undergraduates!

--
Stergios Marinopoulos



Date: Fri, 13 Apr 2012 13:07:06 -0700
From: BBands <bbands at gmail.com>
To: R-sig-finance <r-sig-finance at stat.math.ethz.ch>
Subject: Re: [R-SIG-Finance] Interesting behaviour in BBands
Message-ID:
??? <CAGS5yBVONfEf49kEU+Rac5dckeA+fJL0UQ4d4E9QAQPutftBsw at mail.gmail.com>
Content-Type: text/plain; charset="ISO-8859-1"

Sorry, missed this when it hit. I'd say that if standard deviation = 0
then Bollinger Bands and the derived indicators such as %b are not
defined for that period and NaN would be the correct treatment.

Best,

John Bollinger

On Sat, Feb 18, 2012 at 3:52 PM, Stergios Marinopoulos
<stergios_marinopoulos at yahoo.com> wrote:
> There's an interesting behavior in BBands when dn, mavg, and up are the same
> value.? Here's an example:
>
>
> library(quantmod);
>
> getSymbols("SPY", from="1993-01-31", to="1996-01-01" ) ;
> bb <- BBands(Cl(SPY), n=3, sd=0.3, maType=EMA) ;
>
>
> bb[bb$pctB==Inf,]
> ??????????????? dn???? mavg?????? up pctB
> 1993-04-16 44.92297 44.92297 44.92297? Inf
> 1995-02-09 48.25296 48.25296 48.25296? Inf
>
>
> And here's the graphic display for the fist Inf occurrence:
>
>
> chartSeries(SPY["1993-04-10::1993-04-20",])
> addTA(bb,on=1)
>
>
> Notice pctB is Inf when the dn & up are coincident with mavg.? I don't think
> Inf is the right interpretation here, as the mavg line is not Inf % between
> the up and down.? Would zero be a better interpretation here?
>
>
> Thanks for your thoughts.
>
> --
> Stergios Marinopoulos
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
John Bollinger, CFA, CMT
www.BollingerBands.com

If you advance far enough, you arrive at the beginning.
*********************************************



From josh.m.ulrich at gmail.com  Sun Apr 15 19:54:10 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sun, 15 Apr 2012 12:54:10 -0500
Subject: [R-SIG-Finance] Donchian Channel in TTR
In-Reply-To: <CAGS5yBVMeVr5reqa8hueOsoUKqQ7pdASiVt3kV2FWoSyf+7=zA@mail.gmail.com>
References: <CAKC0BhknWd7OA2PMAtnAAS9R9zDBTJ8y+E4Mr8osLTn3UcYN7g@mail.gmail.com>
	<CBA317F8.378A5%jeff.a.ryan@gmail.com>
	<CAGS5yBVMeVr5reqa8hueOsoUKqQ7pdASiVt3kV2FWoSyf+7=zA@mail.gmail.com>
Message-ID: <CAPPM_gQ7MDc4QzSUwrxiBFws21JH0uDp4xyZpiH2_jOk3P-2xw@mail.gmail.com>

On Fri, Apr 13, 2012 at 1:04 PM, BBands <bbands at gmail.com> wrote:
> Donchian channels are a sort of special case in which the channel
> values should not include the current period. if I were to code this,
> today's value would reflect the n-1 prior highs and lows. The reason

So if n=10, you would only use 9 observations to calculate the
high/low channels?  That's not what I would expect with n=10.  Is that
the behavior Donchain intended?

> is that is that when the current high and low are used there can never
> be a breakout. These channels are used almost exclusively for
> breakouts and traders look to the prior period's values to determine
> whether a breakout has occurred. I fully understand Jeff's concerns
> and would be ok with a note in the docs advising the use of lag(), but
> I would code it with the lag as the default.
>
I'm considering adding an argument "include.lag" (with a default value
of FALSE, so existing functionality will not change) but the result at
time (t) will use observations from t-1 through t-n, not t-1 through
t-n+1.

Thanks,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com


> On Thu, Apr 5, 2012 at 7:45 AM, Jeffrey Ryan <jeff.a.ryan at gmail.com> wrote:
>> As I think I am partly responsible for this code in TTR (at least the
>> initial rev), I'll explain my logic.
>>
>> In general, more options/arguments that simply do what single functions
>> can do more explicitly isn't the best design strategy in many cases.
>> Secondly, most (all?) of the other functions in TTR behave by including
>> the 'current' price in the calculation. ?In the case of DonchianChannel
>> the result of this is simply more obvious.
>>
>> e.g. EMA, SMA, Bbands, runMax, cumsum (base R), cummin (base R), etc also
>> behave this way.
>>
>> The fix, without any code changes in the related TTR functions is to use
>> the facility lag(). ?This is the canonical way to assure you aren't
>> introducing look-ahead bias in your results.
>>
>> For what it is worth, this had been recently discussed in private. ?Josh
>> may have a slightly different opinion, and I think the consensus was that
>> the documentation could be more explicit, but the behavior is consistent
>> with R and TTR as is.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jefe_goode at yahoo.com  Sun Apr 15 21:06:04 2012
From: jefe_goode at yahoo.com (jefe goode)
Date: Sun, 15 Apr 2012 12:06:04 -0700 (PDT)
Subject: [R-SIG-Finance] R fArma package
Message-ID: <1334516764.82535.YahooMailNeo@web120702.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120415/b5c6967d/attachment.pl>

From osvald.wiklander at gmail.com  Mon Apr 16 09:54:17 2012
From: osvald.wiklander at gmail.com (osvald wiklander)
Date: Mon, 16 Apr 2012 09:54:17 +0200
Subject: [R-SIG-Finance] Help
Message-ID: <CA+ECOojXqwJwkT+GF2kj_kqy=bS9mV+EhqjgTcnF0kbZDNNV9w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120416/28d292b0/attachment.pl>

From osvald.wiklander at gmail.com  Mon Apr 16 09:55:39 2012
From: osvald.wiklander at gmail.com (osvald wiklander)
Date: Mon, 16 Apr 2012 09:55:39 +0200
Subject: [R-SIG-Finance] Help
In-Reply-To: <CA+ECOojXqwJwkT+GF2kj_kqy=bS9mV+EhqjgTcnF0kbZDNNV9w@mail.gmail.com>
References: <CA+ECOojXqwJwkT+GF2kj_kqy=bS9mV+EhqjgTcnF0kbZDNNV9w@mail.gmail.com>
Message-ID: <CA+ECOohdA_TJR0OTtPivO-p_2-uGXv49xS_doKSboFfAffZdbQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120416/9afb9466/attachment.pl>

From noahsilverman at ucla.edu  Mon Apr 16 20:50:10 2012
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Mon, 16 Apr 2012 11:50:10 -0700
Subject: [R-SIG-Finance] IBrokers order status
Message-ID: <E2204CAA-9C4B-41B8-93D8-CFD7E8CAA2F3@ucla.edu>

Hi,

When placing an order via IBrokers, how do we know if it filled?  Additionally, if it is a market order, how do we know what price it filled at?

Along the same lines, is there a proper structure for placing an OCA order (where one or more stop limit orders are placed simultaneously with the opening order.)

Currently, I place an order this way:  
orderID <- reqIds(tws)
order <- twsOrder(orderID, action="BUY", totalQuantity="1", orderType = "MKT")
myOrder <- placeOrder(tws, contract, order)
cat(orderID, "  ", price, "LONG-OPEN", "\n")


Thank You,


--
Noah Silverman
UCLA Department of Statistics
8208 Math Sciences Building
Los Angeles, CA 90095


From me at censix.com  Mon Apr 16 21:25:46 2012
From: me at censix.com (me)
Date: Mon, 16 Apr 2012 21:25:46 +0200
Subject: [R-SIG-Finance] IBrokers order status
In-Reply-To: <E2204CAA-9C4B-41B8-93D8-CFD7E8CAA2F3@ucla.edu>
References: <E2204CAA-9C4B-41B8-93D8-CFD7E8CAA2F3@ucla.edu>
Message-ID: <20120416212546.22b55bac@desktop1>

Dear Noah

one way to find out if your order was filled (and how much of it, and
at what price) is to use reqExecutions(). It is documented in the IB API
reference guide. The 'IBrokers' package implements it as a function, so
you can look at it's source there. An example of how to read execution
data from IB, albeit not in an easy on-liner, you can find in my
'qsiblive' paper trading demo which can be downloaded from my site
http://censix.com . You should have a look at the files 

IBexecuteStrategy-eod.r
IBplaceOrders.r
IBorderFill.r

in the 'source' directory.



Specifying OCA groups can be done easily if you have a look at the
sourcecode for placeOrder() in the 'IBrokers' package plus, again the IB
API refernce guide. (don't remember the link now. Just google it)

Cheers

Soren



On Mon, 16 Apr 2012 11:50:10 -0700
Noah Silverman <noahsilverman at ucla.edu> wrote:

> Hi,
> 
> When placing an order via IBrokers, how do we know if it filled?
> Additionally, if it is a market order, how do we know what price it
> filled at?
> 
> Along the same lines, is there a proper structure for placing an OCA
> order (where one or more stop limit orders are placed simultaneously
> with the opening order.)
> 
> Currently, I place an order this way:  
> orderID <- reqIds(tws)
> order <- twsOrder(orderID, action="BUY", totalQuantity="1", orderType
> = "MKT") myOrder <- placeOrder(tws, contract, order)
> cat(orderID, "  ", price, "LONG-OPEN", "\n")
> 
> 
> Thank You,
> 
> 
> --
> Noah Silverman
> UCLA Department of Statistics
> 8208 Math Sciences Building
> Los Angeles, CA 90095
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R
> questions should go.



-- 

http://censix.com


From andreas.mikkelsen at stud.hibo.no  Tue Apr 17 10:54:41 2012
From: andreas.mikkelsen at stud.hibo.no (Andreas Mikkelsen)
Date: Tue, 17 Apr 2012 01:54:41 -0700 (PDT)
Subject: [R-SIG-Finance] quantstrat - problems with ordersize function
In-Reply-To: <1333552619684-4532216.post@n4.nabble.com>
References: <1333552619684-4532216.post@n4.nabble.com>
Message-ID: <1334652881478-4564066.post@n4.nabble.com>

Hi,

First Brian and Garrett, thanks for your replies. We managed to modify the
script and get it to work for our needs as well as implementing a loop
function to add more than one pair at a time. 

I'm attaching the script in case it is something there is something you may
use. The last part is not very elegant, as I am a beginner R user. However
it seems to be doing what I want.

Best regards,

Andreas Mikkelsen http://r.789695.n4.nabble.com/file/n4564066/PairTrade-X.R
PairTrade-X.R 

--
View this message in context: http://r.789695.n4.nabble.com/quantstrat-problems-with-ordersize-function-tp4532216p4564066.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From papa.senyo at yahoo.it  Tue Apr 17 17:11:46 2012
From: papa.senyo at yahoo.it (Papa Senyo)
Date: Tue, 17 Apr 2012 16:11:46 +0100 (BST)
Subject: [R-SIG-Finance] bds test
Message-ID: <1334675506.40495.YahooMailNeo@web132303.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120417/a1335218/attachment.pl>

From comtech.usa at gmail.com  Tue Apr 17 17:42:17 2012
From: comtech.usa at gmail.com (Michael)
Date: Tue, 17 Apr 2012 10:42:17 -0500
Subject: [R-SIG-Finance] quadratically constrained quadratic programming
Message-ID: <CAPNjSFZazFDDwSpyinEXe4hK7-WVL52eHJpCzFXGKr1X2dSEkg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120417/d7a3ed61/attachment.pl>

From comtech.usa at gmail.com  Tue Apr 17 17:53:48 2012
From: comtech.usa at gmail.com (Michael)
Date: Tue, 17 Apr 2012 10:53:48 -0500
Subject: [R-SIG-Finance] quadratically constrained quadratic programming
In-Reply-To: <CAPNjSFZazFDDwSpyinEXe4hK7-WVL52eHJpCzFXGKr1X2dSEkg@mail.gmail.com>
References: <CAPNjSFZazFDDwSpyinEXe4hK7-WVL52eHJpCzFXGKr1X2dSEkg@mail.gmail.com>
Message-ID: <CAPNjSFboWd00YnV+-2F=kDZcZMLBhtdTAJnXM6dNB7ysgiSYPQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120417/02c6b691/attachment.pl>

From alexios at 4dscape.com  Tue Apr 17 18:02:02 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Tue, 17 Apr 2012 17:02:02 +0100
Subject: [R-SIG-Finance] bds test
In-Reply-To: <1334675506.40495.YahooMailNeo@web132303.mail.ird.yahoo.com>
References: <1334675506.40495.YahooMailNeo@web132303.mail.ird.yahoo.com>
Message-ID: <4F8D93FA.2060107@4dscape.com>

1. You did not bother to mention the function or package, but I assume 
you mean the bds.test from the tseries package.

2. I would think that the examples in the documentation of bds.test are 
VERY clear as to what the output means.
The Null is that the series is i.i.d. (so p-value of zero obviously 
rejects this).

3. The BDS test is not nuisance-parameter free, so if you have obtained 
the standardized residuals from some GARCH model for example, then the 
asymptotic distribution of the test statistic will likely be affected by 
this (if you are using a standard GARCH then you can apply the 
correction of De Lima (1996) and pass the log standardized squared 
residuals).
	
Regards,
Alexios


On 17/04/2012 16:11, Papa Senyo wrote:
>    Dear ALL,
> Please, I carried out the above test and got the output below: Csvar is a standardized residuals,
>
>
> BDS Test
>
> data:  Csvar
>
> Embedding dimension =  2 3
>
> Epsilon for close points =  0.5096 1.0192 1.5288 2.0385
>
> Standard Normal =
>        [ 0.5096 ] [ 1.0192 ] [ 1.5288 ] [ 2.0385 ]
> [ 2 ]     5.2955     5.2946     4.6749     4.2802
> [ 3 ]     4.5124     4.9592     4.7725     4.6660
>
> p-value =
>        [ 0.5096 ] [ 1.0192 ] [ 1.5288 ] [ 2.0385 ]
> [ 2 ]          0          0          0          0
> [ 3 ]          0          0          0          0
>
> The conclusion is unclear to me and would like to have some comments on the output from you all.
> Kind regards,
> Sen
>
> 	[[alternative HTML version deleted]]
>
>
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From costas.vorlow at gmail.com  Tue Apr 17 19:27:17 2012
From: costas.vorlow at gmail.com (Costas Vorlow)
Date: Tue, 17 Apr 2012 20:27:17 +0300
Subject: [R-SIG-Finance] timeSeries 2 zoo convert
Message-ID: <CABfqsR8auX6mDDLdYbKYBFAoJ0SphmUyh2bgA=_WxoM+25fNQA@mail.gmail.com>

Hello,

What is the "best"   way to convert an timeSeries object to .zoo?

Say I have  the following timeSeries object:

> is(x)
[1] "timeSeries" "structure"  "vector"
> head(x)
GMT
            DAAA
1983-01-03 11.77
1983-01-04 11.79
1983-01-05 11.79
1983-01-06 11.74
1983-01-07 11.74
1983-01-10 11.75
>

When I try to convert it to zoo, I can not retain the dates info. I tried:

	a<-as.Date(index( x ))
	xz<-as.zoo(x)
	index(xz)<-a
	
but dates change.

 head(xz)
            DAAA
1970-01-02 11.77
1970-01-03 11.79
1970-01-04 11.79
1970-01-05 11.74
1970-01-06 11.74
1970-01-07 11.75

This used to work with last year's libraries but it seems it doesn't anymore:

	        a<-index(as.zoo(x))
		xz<-as.zoo(x)
		xnew<-aggregate(xz, as.Date, identity)

Error in as.Date.default(index(x)) :
  do not know how to convert 'index(x)' to class "Date"


Any help, extremely welcome.

thanks in advance,
Costas


> sessionInfo()
R version 2.13.0 (2011-04-13)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
States.1252
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

attached base packages:
[1] graphics  grDevices datasets  stats     utils     methods   base

other attached packages:
 [1] fImport_2110.79              timeSeries_2130.92
 [3] timeDate_2130.93             fMarkovSwitching_1.0
 [5] Rdonlp2_0.3-1                rcom_2.2-3.1
 [7] rscproxy_1.3-1               quantmod_0.3-17
 [9] TTR_0.21-0                   Defaults_1.1-1
[11] PerformanceAnalytics_1.0.3.2 xts_0.8-2
[13] zoo_1.7-4

loaded via a namespace (and not attached):
[1] grid_2.13.0     lattice_0.19-33 tools_2.13.0
>


-- 

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|c|o|s|t|a|s|@|v|o|r|l|o|w|.|o|r|g|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


From josh.m.ulrich at gmail.com  Tue Apr 17 19:39:12 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 17 Apr 2012 12:39:12 -0500
Subject: [R-SIG-Finance] timeSeries 2 zoo convert
In-Reply-To: <CABfqsR8auX6mDDLdYbKYBFAoJ0SphmUyh2bgA=_WxoM+25fNQA@mail.gmail.com>
References: <CABfqsR8auX6mDDLdYbKYBFAoJ0SphmUyh2bgA=_WxoM+25fNQA@mail.gmail.com>
Message-ID: <CAPPM_gQUdH1R5L5qR02QF4h=NiBnTdJVQZxjjdDAJCMj8PP6TQ@mail.gmail.com>

On Tue, Apr 17, 2012 at 12:27 PM, Costas Vorlow <costas.vorlow at gmail.com> wrote:
> Hello,
>
> What is the "best" ? way to convert an timeSeries object to .zoo?
>
Generally, as.zoo is preferred.

> Say I have ?the following timeSeries object:
>
>> is(x)
> [1] "timeSeries" "structure" ?"vector"
>> head(x)
> GMT
> ? ? ? ? ? ?DAAA
> 1983-01-03 11.77
> 1983-01-04 11.79
> 1983-01-05 11.79
> 1983-01-06 11.74
> 1983-01-07 11.74
> 1983-01-10 11.75
>>
>
> When I try to convert it to zoo, I can not retain the dates info. I tried:
>
> ? ? ? ?a<-as.Date(index( x ))
> ? ? ? ?xz<-as.zoo(x)
> ? ? ? ?index(xz)<-a
>
> but dates change.
>
> ?head(xz)
> ? ? ? ? ? ?DAAA
> 1970-01-02 11.77
> 1970-01-03 11.79
> 1970-01-04 11.79
> 1970-01-05 11.74
> 1970-01-06 11.74
> 1970-01-07 11.75
>
That's because you changed the dates.  Look at the output of:

R> index(x)
 [1]  1  2  3  4  5  6  7  8  9 10

There's no index.timeSeries method, so index.default is dispatched.
xz <- as.zoo(x) should be sufficient.


> This used to work with last year's libraries but it seems it doesn't anymore:
>
> ? ? ? ? ? ? ? ?a<-index(as.zoo(x))
> ? ? ? ? ? ? ? ?xz<-as.zoo(x)
> ? ? ? ? ? ? ? ?xnew<-aggregate(xz, as.Date, identity)
>
> Error in as.Date.default(index(x)) :
> ?do not know how to convert 'index(x)' to class "Date"
>
This is different from your example above.  Further, this works for me
on R-2.15.0 with timeSeries_2130.92, timeDate_2131.00, and zoo_1.7-7.
Your R version is a year old and timeDate and zoo are a couple minor
versions behind.  Maybe updating will solve your problem?

>
> Any help, extremely welcome.
>
> thanks in advance,
> Costas
>
>
>> sessionInfo()
> R version 2.13.0 (2011-04-13)
> Platform: i386-pc-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=English_United States.1252 ?LC_CTYPE=English_United
> States.1252
> [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
> [5] LC_TIME=English_United States.1252
>
> attached base packages:
> [1] graphics ?grDevices datasets ?stats ? ? utils ? ? methods ? base
>
> other attached packages:
> ?[1] fImport_2110.79 ? ? ? ? ? ? ?timeSeries_2130.92
> ?[3] timeDate_2130.93 ? ? ? ? ? ? fMarkovSwitching_1.0
> ?[5] Rdonlp2_0.3-1 ? ? ? ? ? ? ? ?rcom_2.2-3.1
> ?[7] rscproxy_1.3-1 ? ? ? ? ? ? ? quantmod_0.3-17
> ?[9] TTR_0.21-0 ? ? ? ? ? ? ? ? ? Defaults_1.1-1
> [11] PerformanceAnalytics_1.0.3.2 xts_0.8-2
> [13] zoo_1.7-4
>
> loaded via a namespace (and not attached):
> [1] grid_2.13.0 ? ? lattice_0.19-33 tools_2.13.0
>>
>
>
> --
>
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
> |c|o|s|t|a|s|@|v|o|r|l|o|w|.|o|r|g|
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
>


--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com


From michael.weylandt at gmail.com  Tue Apr 17 19:43:36 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Tue, 17 Apr 2012 13:43:36 -0400
Subject: [R-SIG-Finance] timeSeries 2 zoo convert
In-Reply-To: <CAPPM_gQUdH1R5L5qR02QF4h=NiBnTdJVQZxjjdDAJCMj8PP6TQ@mail.gmail.com>
References: <CABfqsR8auX6mDDLdYbKYBFAoJ0SphmUyh2bgA=_WxoM+25fNQA@mail.gmail.com>
	<CAPPM_gQUdH1R5L5qR02QF4h=NiBnTdJVQZxjjdDAJCMj8PP6TQ@mail.gmail.com>
Message-ID: <CAAmySGNanNwJWZdxsz1m1OLKUTjLvcZ+rdropS8QpdRNv8x+nw@mail.gmail.com>

Following up on what Josh said, does it work with the built-in data
set MSFT provided by timeSeries?

library(xts)
library(timeSeries)

data(MSFT)

head(MSFT)
head(as.xts(MSFT))
head(as.zoo(MSFT))

all give the same dates for me.

Michael

On Tue, Apr 17, 2012 at 1:39 PM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> On Tue, Apr 17, 2012 at 12:27 PM, Costas Vorlow <costas.vorlow at gmail.com> wrote:
>> Hello,
>>
>> What is the "best" ? way to convert an timeSeries object to .zoo?
>>
> Generally, as.zoo is preferred.
>
>> Say I have ?the following timeSeries object:
>>
>>> is(x)
>> [1] "timeSeries" "structure" ?"vector"
>>> head(x)
>> GMT
>> ? ? ? ? ? ?DAAA
>> 1983-01-03 11.77
>> 1983-01-04 11.79
>> 1983-01-05 11.79
>> 1983-01-06 11.74
>> 1983-01-07 11.74
>> 1983-01-10 11.75
>>>
>>
>> When I try to convert it to zoo, I can not retain the dates info. I tried:
>>
>> ? ? ? ?a<-as.Date(index( x ))
>> ? ? ? ?xz<-as.zoo(x)
>> ? ? ? ?index(xz)<-a
>>
>> but dates change.
>>
>> ?head(xz)
>> ? ? ? ? ? ?DAAA
>> 1970-01-02 11.77
>> 1970-01-03 11.79
>> 1970-01-04 11.79
>> 1970-01-05 11.74
>> 1970-01-06 11.74
>> 1970-01-07 11.75
>>
> That's because you changed the dates. ?Look at the output of:
>
> R> index(x)
> ?[1] 1 2 3 4 5 6 7 8 9 10
>
> There's no index.timeSeries method, so index.default is dispatched.
> xz <- as.zoo(x) should be sufficient.
>
>
>> This used to work with last year's libraries but it seems it doesn't anymore:
>>
>> ? ? ? ? ? ? ? ?a<-index(as.zoo(x))
>> ? ? ? ? ? ? ? ?xz<-as.zoo(x)
>> ? ? ? ? ? ? ? ?xnew<-aggregate(xz, as.Date, identity)
>>
>> Error in as.Date.default(index(x)) :
>> ?do not know how to convert 'index(x)' to class "Date"
>>
> This is different from your example above. ?Further, this works for me
> on R-2.15.0 with timeSeries_2130.92, timeDate_2131.00, and zoo_1.7-7.
> Your R version is a year old and timeDate and zoo are a couple minor
> versions behind. ?Maybe updating will solve your problem?
>
>>
>> Any help, extremely welcome.
>>
>> thanks in advance,
>> Costas
>>
>>
>>> sessionInfo()
>> R version 2.13.0 (2011-04-13)
>> Platform: i386-pc-mingw32/i386 (32-bit)
>>
>> locale:
>> [1] LC_COLLATE=English_United States.1252 ?LC_CTYPE=English_United
>> States.1252
>> [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
>> [5] LC_TIME=English_United States.1252
>>
>> attached base packages:
>> [1] graphics ?grDevices datasets ?stats ? ? utils ? ? methods ? base
>>
>> other attached packages:
>> ?[1] fImport_2110.79 ? ? ? ? ? ? ?timeSeries_2130.92
>> ?[3] timeDate_2130.93 ? ? ? ? ? ? fMarkovSwitching_1.0
>> ?[5] Rdonlp2_0.3-1 ? ? ? ? ? ? ? ?rcom_2.2-3.1
>> ?[7] rscproxy_1.3-1 ? ? ? ? ? ? ? quantmod_0.3-17
>> ?[9] TTR_0.21-0 ? ? ? ? ? ? ? ? ? Defaults_1.1-1
>> [11] PerformanceAnalytics_1.0.3.2 xts_0.8-2
>> [13] zoo_1.7-4
>>
>> loaded via a namespace (and not attached):
>> [1] grid_2.13.0 ? ? lattice_0.19-33 tools_2.13.0
>>>
>>
>>
>> --
>>
>> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
>> |c|o|s|t|a|s|@|v|o|r|l|o|w|.|o|r|g|
>> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
>>
>
>
> --
> Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com
>
> R/Finance 2012: Applied Finance with R
> www.RinFinance.com
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From costas.vorlow at gmail.com  Tue Apr 17 19:46:07 2012
From: costas.vorlow at gmail.com (Costas Vorlow)
Date: Tue, 17 Apr 2012 20:46:07 +0300
Subject: [R-SIG-Finance] timeSeries 2 zoo convert
In-Reply-To: <CAPPM_gQUdH1R5L5qR02QF4h=NiBnTdJVQZxjjdDAJCMj8PP6TQ@mail.gmail.com>
References: <CABfqsR8auX6mDDLdYbKYBFAoJ0SphmUyh2bgA=_WxoM+25fNQA@mail.gmail.com>
	<CAPPM_gQUdH1R5L5qR02QF4h=NiBnTdJVQZxjjdDAJCMj8PP6TQ@mail.gmail.com>
Message-ID: <CABfqsR9Cz+PUfi7OiR22PE1Pn8M-zbUy4BBA4u3Ju2m7nGH-hw@mail.gmail.com>

Thanks for the reply.  The problem is that when I try to plot the zoo
object, I get numbers instead of dates on the x-axis. I manages to
correct it with the following function:



ConvertTimeFormat <- function(x) {
		require(zoo)
		require(timeDate)
		temp<-(as.zoo(as.timeSeries(x))
 		index(temp)<-as.Date(index(temp))
		return(temp)
}

Is this a "good" way to do it?



On 17 April 2012 20:39, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> On Tue, Apr 17, 2012 at 12:27 PM, Costas Vorlow <costas.vorlow at gmail.com> wrote:
>> Hello,
>>
>> What is the "best" ? way to convert an timeSeries object to .zoo?
>>
> Generally, as.zoo is preferred.
>
>> Say I have ?the following timeSeries object:
>>
>>> is(x)
>> [1] "timeSeries" "structure" ?"vector"
>>> head(x)
>> GMT
>> ? ? ? ? ? ?DAAA
>> 1983-01-03 11.77
>> 1983-01-04 11.79
>> 1983-01-05 11.79
>> 1983-01-06 11.74
>> 1983-01-07 11.74
>> 1983-01-10 11.75
>>>
>>
>> When I try to convert it to zoo, I can not retain the dates info. I tried:
>>
>> ? ? ? ?a<-as.Date(index( x ))
>> ? ? ? ?xz<-as.zoo(x)
>> ? ? ? ?index(xz)<-a
>>
>> but dates change.
>>
>> ?head(xz)
>> ? ? ? ? ? ?DAAA
>> 1970-01-02 11.77
>> 1970-01-03 11.79
>> 1970-01-04 11.79
>> 1970-01-05 11.74
>> 1970-01-06 11.74
>> 1970-01-07 11.75
>>
> That's because you changed the dates. ?Look at the output of:
>
> R> index(x)
> ?[1] ?1 ?2 ?3 ?4 ?5 ?6 ?7 ?8 ?9 10
>
> There's no index.timeSeries method, so index.default is dispatched.
> xz <- as.zoo(x) should be sufficient.
>
>
>> This used to work with last year's libraries but it seems it doesn't anymore:
>>
>> ? ? ? ? ? ? ? ?a<-index(as.zoo(x))
>> ? ? ? ? ? ? ? ?xz<-as.zoo(x)
>> ? ? ? ? ? ? ? ?xnew<-aggregate(xz, as.Date, identity)
>>
>> Error in as.Date.default(index(x)) :
>> ?do not know how to convert 'index(x)' to class "Date"
>>
> This is different from your example above. ?Further, this works for me
> on R-2.15.0 with timeSeries_2130.92, timeDate_2131.00, and zoo_1.7-7.
> Your R version is a year old and timeDate and zoo are a couple minor
> versions behind. ?Maybe updating will solve your problem?
>
>>
>> Any help, extremely welcome.
>>
>> thanks in advance,
>> Costas
>>
>>
>>> sessionInfo()
>> R version 2.13.0 (2011-04-13)
>> Platform: i386-pc-mingw32/i386 (32-bit)
>>
>> locale:
>> [1] LC_COLLATE=English_United States.1252 ?LC_CTYPE=English_United
>> States.1252
>> [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
>> [5] LC_TIME=English_United States.1252
>>
>> attached base packages:
>> [1] graphics ?grDevices datasets ?stats ? ? utils ? ? methods ? base
>>
>> other attached packages:
>> ?[1] fImport_2110.79 ? ? ? ? ? ? ?timeSeries_2130.92
>> ?[3] timeDate_2130.93 ? ? ? ? ? ? fMarkovSwitching_1.0
>> ?[5] Rdonlp2_0.3-1 ? ? ? ? ? ? ? ?rcom_2.2-3.1
>> ?[7] rscproxy_1.3-1 ? ? ? ? ? ? ? quantmod_0.3-17
>> ?[9] TTR_0.21-0 ? ? ? ? ? ? ? ? ? Defaults_1.1-1
>> [11] PerformanceAnalytics_1.0.3.2 xts_0.8-2
>> [13] zoo_1.7-4
>>
>> loaded via a namespace (and not attached):
>> [1] grid_2.13.0 ? ? lattice_0.19-33 tools_2.13.0
>>>
>>
>>
>> --
>>
>> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
>> |c|o|s|t|a|s|@|v|o|r|l|o|w|.|o|r|g|
>> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
>>
>
>
> --
> Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com
>
> R/Finance 2012: Applied Finance with R
> www.RinFinance.com



-- 

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|c|o|s|t|a|s|@|v|o|r|l|o|w|.|o|r|g|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


From josh.m.ulrich at gmail.com  Tue Apr 17 19:56:02 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 17 Apr 2012 12:56:02 -0500
Subject: [R-SIG-Finance] timeSeries 2 zoo convert
In-Reply-To: <CABfqsR9Cz+PUfi7OiR22PE1Pn8M-zbUy4BBA4u3Ju2m7nGH-hw@mail.gmail.com>
References: <CABfqsR8auX6mDDLdYbKYBFAoJ0SphmUyh2bgA=_WxoM+25fNQA@mail.gmail.com>
	<CAPPM_gQUdH1R5L5qR02QF4h=NiBnTdJVQZxjjdDAJCMj8PP6TQ@mail.gmail.com>
	<CABfqsR9Cz+PUfi7OiR22PE1Pn8M-zbUy4BBA4u3Ju2m7nGH-hw@mail.gmail.com>
Message-ID: <CAPPM_gS=0va+kxwSXhx1G2JJzkmjy42iSH_Zyy65eNWbXZ=9Lg@mail.gmail.com>

On Tue, Apr 17, 2012 at 12:46 PM, Costas Vorlow <costas.vorlow at gmail.com> wrote:
> Thanks for the reply. ?The problem is that when I try to plot the zoo
> object, I get numbers instead of dates on the x-axis. I manages to
> correct it with the following function:
>
> ConvertTimeFormat <- function(x) {
> ? ? ? ? ? ? ? ?require(zoo)
> ? ? ? ? ? ? ? ?require(timeDate)
> ? ? ? ? ? ? ? ?temp<-(as.zoo(as.timeSeries(x))
> ? ? ? ? ? ? ? ?index(temp)<-as.Date(index(temp))
> ? ? ? ? ? ? ? ?return(temp)
> }
>
> Is this a "good" way to do it?
>
You create a timeSeries object, only to convert it to zoo, then
convert the index from timeDate to Date.  Why convert to timeSeries at
all, when you essentially destroy all the timeSeries information with
later conversions?  Seems very unnecessary, but you didn't say what
type of object is being passed to your function...

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com



> On 17 April 2012 20:39, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
>> On Tue, Apr 17, 2012 at 12:27 PM, Costas Vorlow <costas.vorlow at gmail.com> wrote:
>>> Hello,
>>>
>>> What is the "best" ? way to convert an timeSeries object to .zoo?
>>>
>> Generally, as.zoo is preferred.
>>
>>> Say I have ?the following timeSeries object:
>>>
>>>> is(x)
>>> [1] "timeSeries" "structure" ?"vector"
>>>> head(x)
>>> GMT
>>> ? ? ? ? ? ?DAAA
>>> 1983-01-03 11.77
>>> 1983-01-04 11.79
>>> 1983-01-05 11.79
>>> 1983-01-06 11.74
>>> 1983-01-07 11.74
>>> 1983-01-10 11.75
>>>>
>>>
>>> When I try to convert it to zoo, I can not retain the dates info. I tried:
>>>
>>> ? ? ? ?a<-as.Date(index( x ))
>>> ? ? ? ?xz<-as.zoo(x)
>>> ? ? ? ?index(xz)<-a
>>>
>>> but dates change.
>>>
>>> ?head(xz)
>>> ? ? ? ? ? ?DAAA
>>> 1970-01-02 11.77
>>> 1970-01-03 11.79
>>> 1970-01-04 11.79
>>> 1970-01-05 11.74
>>> 1970-01-06 11.74
>>> 1970-01-07 11.75
>>>
>> That's because you changed the dates. ?Look at the output of:
>>
>> R> index(x)
>> ?[1] ?1 ?2 ?3 ?4 ?5 ?6 ?7 ?8 ?9 10
>>
>> There's no index.timeSeries method, so index.default is dispatched.
>> xz <- as.zoo(x) should be sufficient.
>>
>>
>>> This used to work with last year's libraries but it seems it doesn't anymore:
>>>
>>> ? ? ? ? ? ? ? ?a<-index(as.zoo(x))
>>> ? ? ? ? ? ? ? ?xz<-as.zoo(x)
>>> ? ? ? ? ? ? ? ?xnew<-aggregate(xz, as.Date, identity)
>>>
>>> Error in as.Date.default(index(x)) :
>>> ?do not know how to convert 'index(x)' to class "Date"
>>>
>> This is different from your example above. ?Further, this works for me
>> on R-2.15.0 with timeSeries_2130.92, timeDate_2131.00, and zoo_1.7-7.
>> Your R version is a year old and timeDate and zoo are a couple minor
>> versions behind. ?Maybe updating will solve your problem?
>>
>>>
>>> Any help, extremely welcome.
>>>
>>> thanks in advance,
>>> Costas
>>>
>>>
>>>> sessionInfo()
>>> R version 2.13.0 (2011-04-13)
>>> Platform: i386-pc-mingw32/i386 (32-bit)
>>>
>>> locale:
>>> [1] LC_COLLATE=English_United States.1252 ?LC_CTYPE=English_United
>>> States.1252
>>> [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
>>> [5] LC_TIME=English_United States.1252
>>>
>>> attached base packages:
>>> [1] graphics ?grDevices datasets ?stats ? ? utils ? ? methods ? base
>>>
>>> other attached packages:
>>> ?[1] fImport_2110.79 ? ? ? ? ? ? ?timeSeries_2130.92
>>> ?[3] timeDate_2130.93 ? ? ? ? ? ? fMarkovSwitching_1.0
>>> ?[5] Rdonlp2_0.3-1 ? ? ? ? ? ? ? ?rcom_2.2-3.1
>>> ?[7] rscproxy_1.3-1 ? ? ? ? ? ? ? quantmod_0.3-17
>>> ?[9] TTR_0.21-0 ? ? ? ? ? ? ? ? ? Defaults_1.1-1
>>> [11] PerformanceAnalytics_1.0.3.2 xts_0.8-2
>>> [13] zoo_1.7-4
>>>
>>> loaded via a namespace (and not attached):
>>> [1] grid_2.13.0 ? ? lattice_0.19-33 tools_2.13.0
>>>>
>>>
>>>
>>> --
>>>
>>> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
>>> |c|o|s|t|a|s|@|v|o|r|l|o|w|.|o|r|g|
>>> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
>>>
>>
>>
>> --
>> Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com
>>
>> R/Finance 2012: Applied Finance with R
>> www.RinFinance.com
>
>
>
> --
>
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
> |c|o|s|t|a|s|@|v|o|r|l|o|w|.|o|r|g|
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


From john.laing at gmail.com  Wed Apr 18 00:28:17 2012
From: john.laing at gmail.com (John Laing)
Date: Tue, 17 Apr 2012 18:28:17 -0400
Subject: [R-SIG-Finance] New RBloomberg builds
Message-ID: <CAA3Wa=uT3nGuubYh7LeP0R7rxmMWB0MD_1MbNnT+-R3reAGOrg@mail.gmail.com>

I have posted new RBloomberg builds to findata.org. There are now 32-
and 64-bit binaries for 2.13, 2.14, and 2.15.

The package can be installed like this: install.packages("RBloomberg",
repos = "http://r.findata.org")

There is only one small change in this version of the package: the
addition of a verbose flag to blpConnect, which suppresses printing.
Thanks to Gyan Sinha and Jacopo Anselmi for suggesting this change.

Happy coding,
John


From wotuzu17 at gmail.com  Wed Apr 18 10:58:23 2012
From: wotuzu17 at gmail.com (Andreas Voellenklee)
Date: Wed, 18 Apr 2012 10:58:23 +0200
Subject: [R-SIG-Finance] question about subsetting xts,
	calculating returns
In-Reply-To: <CA+xi=qaDouZ_1mJq2=mdEpK2Z6WFwzd567E791s7645SrCTe8A@mail.gmail.com>
References: <CAKC0BhnhWGfmHAA7ibdMPoV5FpNi_yHCNK2tk0Tvccu=kNw8rw@mail.gmail.com>
	<CA+xi=qaDouZ_1mJq2=mdEpK2Z6WFwzd567E791s7645SrCTe8A@mail.gmail.com>
Message-ID: <CAKC0BhnjnKVkuGB3BZg+DSJakUCoeHcjDaCbh1ub2ND8MijH0g@mail.gmail.com>

Thank you Sean and Garrett. Garrett's example worked fine. If anybody
is interested, I incorporated this in a function and wrote some more
to visualize the results.


calculateNPeriodReturns <- function (TS, Filter, n)
{
    returns <- do.call(cbind, lapply(1:n, function(i) {
        lag(ROC(Cl(TS), i), -i)[Filter]
    }))
    colnames(returns) <- 1:n
    return(returns)
}

returnsBoxplot <- function (returns)
{
    par(mfrow = c(1, 1))
    boxplot(as.matrix(returns), range = 0)
}

returnsHistogram <- function (returns)
{
    columns <- dim(returns)[2]/2
    par(mfrow = c(2, columns))
    for (i in 1:dim(returns)[2]) {
        hist(returns[, i], main = paste("t+", i, sep = ""), xlab = "",
            breaks = 20, col = "blue")
    }
}

returnsLinePlot <- function (returns)
{
    molten <- melt(t(as.data.frame(returns)))
    colnames(molten) <- c("period", "date", "return")
    ggplot(molten, aes(period, return)) + geom_line(aes(colour = date))
}

library(quantmod)
# try Nokia for this example
getSymbols("NOK", adjust=TRUE)

# calculate donchian channel for NOK
DC <- DonchianChannel(lag(cbind(Hi(NOK),Lo(NOK))))

# mark days when price closes below the low band of DC
breakdown <- eval(Cl(NOK)<DC[,"low"])
colnames(breakdown) <- c("breakdown")

# calculate returns from 1:10 periods after breakdown events
returns <- calculateNPeriodReturns(NOK, breakdown, 10)

# show a boxplot of returns
returnsBoxplot(returns)

# show a histogram of returns
returnsHistogram(returns)

# show a line diagram
library(ggplot2)
library(reshape)
returnsLinePlot(returns)


From papa.senyo at yahoo.it  Wed Apr 18 14:31:08 2012
From: papa.senyo at yahoo.it (Papa Senyo)
Date: Wed, 18 Apr 2012 13:31:08 +0100 (BST)
Subject: [R-SIG-Finance] bds test
In-Reply-To: <4F8D93FA.2060107@4dscape.com>
References: <1334675506.40495.YahooMailNeo@web132303.mail.ird.yahoo.com>
	<4F8D93FA.2060107@4dscape.com>
Message-ID: <1334752268.71576.YahooMailNeo@web132301.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120418/d1764729/attachment.pl>

From josh.m.ulrich at gmail.com  Thu Apr 19 02:45:11 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Wed, 18 Apr 2012 19:45:11 -0500
Subject: [R-SIG-Finance] Modify the chart object to save plotted text
In-Reply-To: <1334161875.4502.YahooMailNeo@web162901.mail.bf1.yahoo.com>
References: <1334161875.4502.YahooMailNeo@web162901.mail.bf1.yahoo.com>
Message-ID: <CAPPM_gTdrFfTj1jSjm+7i-KBrO8_H3DOzWdacdS5c0UpyEqjaQ@mail.gmail.com>

Stergios,

On Wed, Apr 11, 2012 at 11:31 AM, Stergios Marinopoulos
<stergios_marinopoulos at yahoo.com> wrote:
>
> [I?originally?posed this question under a different thread regarding ablines, but I imagine the question was different enough that it went ignored, so I will try again using a new thread.]
>
>
> How can I alter the?underlying chart object so that text annotations are not lost when?the plot is re-drawn, like for example when a call to addTA is made? ?(I am using the experimental versions of the charting api in quantmod)
>
> Here's how I currently add text to a chart:
>
> getSymbols("SPY", from="2012-01-01", to="2012-04-01")
> chart_Series(SPY)
> x <- SPY["2012-02-15", which.i=TRUE]
> text(x, Lo(SPY)[x,], "2012-02-15", srt=90, adj=c(1,0.5) )
>
>
> And now when I add this TA the text disappears:
>
> add_TA(Cl(SPY)<134,border=NA,col='#888888',on=-1)
>
> I think this probably requires going under the hood in the library, so a pointer on where to begin looking would be greatly appreciated.
>
I'm not familiar with the internals of chartSeries or chart_Series, so
I can only provide a pointer.  Look at add_TA to see how it gets the
current plot object and adds to it.

> Thanks,
>
> sm
> --
> Stergios Marinopoulos
>

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com


From brian at braverock.com  Thu Apr 19 02:55:59 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 18 Apr 2012 19:55:59 -0500
Subject: [R-SIG-Finance] Modify the chart object to save plotted text
In-Reply-To: <CAPPM_gTdrFfTj1jSjm+7i-KBrO8_H3DOzWdacdS5c0UpyEqjaQ@mail.gmail.com>
References: <1334161875.4502.YahooMailNeo@web162901.mail.bf1.yahoo.com>
	<CAPPM_gTdrFfTj1jSjm+7i-KBrO8_H3DOzWdacdS5c0UpyEqjaQ@mail.gmail.com>
Message-ID: <1334796959.17905.44.camel@brian-desktop>

On Wed, 2012-04-18 at 19:45 -0500, Joshua Ulrich wrote:
> > chart_Series(SPY)
> > x <- SPY["2012-02-15", which.i=TRUE]
> > text(x, Lo(SPY)[x,], "2012-02-15", srt=90, adj=c(1,0.5) )
> >
> >
> > And now when I add this TA the text disappears:
> >
> > add_TA(Cl(SPY)<134,border=NA,col='#888888',on=-1)
> >
> > I think this probably requires going under the hood in the library,
> so a pointer on where to begin looking would be greatly appreciated.
> >
> I'm not familiar with the internals of chartSeries or chart_Series, so
> I can only provide a pointer.  Look at add_TA to see how it gets the
> current plot object and adds to it.

chartSeries and chart_Series actually re-render the chart, and keep
internal state.  text() writes on top of the existing plot object, but
its state isn't maintained when the chart is re-drawn.

So, the simplest thing to do is to overplot your text *last* or plot it
into a persistent device like pdf().

Barring that, Josh is right, and you'd want to modify add_TA to create
an add_Text() function that would store its state with the chob.

Cheers,

    - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From josh.m.ulrich at gmail.com  Thu Apr 19 03:21:18 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Wed, 18 Apr 2012 20:21:18 -0500
Subject: [R-SIG-Finance] Using abline with chartSeries
In-Reply-To: <4F836781.4040102@gmail.com>
References: <4F80F3A5.7000503@gmail.com>
	<CAPPM_gSDr-d-gAmkwjzGu_iye0nU6w=EXdhk1i3tGr8M4KhAFQ@mail.gmail.com>
	<4F825678.9000206@gmail.com>
	<CAPPM_gS=N4Pys2q=Vv5M+Vst70g713K8pojNov2r3nBC8HMM0A@mail.gmail.com>
	<4F836781.4040102@gmail.com>
Message-ID: <CAPPM_gTu3w7dUJT2NZwjD9msd0e63hw8JDC4bbRxa-srxdGBBg@mail.gmail.com>

On Mon, Apr 9, 2012 at 5:49 PM, Worik Stanton <worik.stanton at gmail.com> wrote:
> On 09/04/12 17:58, Joshua Ulrich wrote:
>>
>> Click the "Support Lists" tab on the right section of the page. ?The
>> first three results answer your original question.
>
> That is, although helpful, a little obscure!
>
> Helpfully, to answer my own question:
>
>
>> > getSymbols("IBM")
>> [1] "IBM"
>> > IBM.m <- to.monthly(IBM)
>> > chartSeries(IBM.m, theme="white")
>> > abline(h=160)
>
> addLines(h=160, on=1)
>
> does the trick.
>
Nice find; even better than my suggestion.

> But how do I get a dotted line?
>
>> addLines(h=100, lty=2)
> Error in addLines(h = 100, lty = 2) : unused argument(s) (lty = 2)
>
> The "col" argument works to set a colour.
>
> Is there any documentation available? ?Banging around google and mailing
> list archives is a very time consuming and frustrating process.
>
> ?addLines is not helpful.
>
It looks like you want something that hasn't been implemented, so you
have an opportunity to contribute to the community.  The simplest
answer is to patch addLines to pass the lty argument to chobTA at params
and chartLines.

But what about other potential arguments that could be passed to
abline (lwd, xpd, reg, coef)?  I'm sure you'd agree that a more
general solution would be nice, so maybe you could investigate how to
pass '...' (or the equivalent) to chartLines?

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com


From daved at finatechnologies.com  Thu Apr 19 12:42:14 2012
From: daved at finatechnologies.com (Dave DeCaprio)
Date: Thu, 19 Apr 2012 06:42:14 -0400
Subject: [R-SIG-Finance] Career Opportunity at Fina Technologies
Message-ID: <3E61A43AABBB5C49A9850656FDA3821B628D46D86E@VMBX108.ihostexchange.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120419/2d84cbc6/attachment.pl>

From graizada at gmail.com  Thu Apr 19 14:43:36 2012
From: graizada at gmail.com (Gaurav Raizada)
Date: Thu, 19 Apr 2012 18:13:36 +0530
Subject: [R-SIG-Finance] Time Series Lead Lag Analysis
Message-ID: <CANazbfVSCRzQ8_OijCkLUvMPM-JdractyT8R4SOagVnOzCXP5Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120419/ae75180f/attachment.pl>

From samo.pahor at gmail.com  Thu Apr 19 14:53:58 2012
From: samo.pahor at gmail.com (Samo Pahor)
Date: Thu, 19 Apr 2012 14:53:58 +0200
Subject: [R-SIG-Finance] Using abline with chartSeries
Message-ID: <CAFNBy2kRYLaeqGph3ZREmUbAKcjPj=Mr6fW4WWMPZW5SuAKU6w@mail.gmail.com>

Hi,

I am following the conversation in "Using abline with chartSeries" and "
Modify the chart object to save plotted text" since I tried to do similar
things (adding proper functions for add_Text, add_Line, add_HorizontalLine
and add_VerticalLine that would use internal quantmod chob objects and
environment and handle all the parameters correctly).

I have chosen the path suggested by Joshua and Brian in this thread.
Attached please find my code (with commented "tests") as a result to add a
few extensions.

I failed with this task. There are three problems with my attempts and the
code produced does not work:
- scoping of variables (resulting in Error: object ... not found)
- plotting to correct frame (on= )
- shrinking of some technical indicator drawn with add_TA on frame > 1
after lines are added

Since Stergios and Worik are better at using/understanding R than I am and
they could get fixed what I tried to do since it also corresponds directly
to their requirements I am "sharing" this.

Any hint what to change in order to solve at least scoping variable problem
(resulting in Error: object ... not found) highly appreciated.

Best,
Samo

# Here are graphics (mainly quantmod::chart_Series related) extension
functions like:
#     - add_VerticalLine
#    - add_HorizontalLine
#    - add_Line
#    - add_Text
#
###############################################################################

require(quantmod)

# xCoordinateOfLine is an xts series containing only dates where vertical
lines should be drawn
add_VerticalLine<-function(xCoordinatesOfLines, on=1, belowBar=FALSE,
howMuchBelow=0.999, ...) {
    lenv <- new.env()
    lenv$add_verticalline <- function(x, xCoordinatesOfLines, belowBar,
howMuchBelow, ...) {
        xdata <- x$Env$xdata
        xsubset <- x$Env$xsubset
        xcoords <- seq(1:NROW(xdata[xsubset]))[index(xdata[xsubset]) %in%
index(xCoordinatesOfLines[xsubset])]
        if (NROW(xcoords) > 0) {
            if (belowBar) {
                segments(xcoords,
                         rep(min(Lo(xdata[xsubset])), NROW(xcoords)),
                         xcoords,

 howMuchBelow*Lo(xdata[xsubset])[index(xdata[xsubset]) %in%
index(xCoordinatesOfLines[xsubset])], ...) #rep(x$get_ylim()[[2]][2],
NROW(xcoords)), ...)
            } else {
                abline(v=xcoords, ...)
            }
        }
    }
    mapply(function(name, value) {assign(name,value,envir=lenv)},
names(list(xCoordinatesOfLines=xCoordinatesOfLines, belowBar=belowBar,
howMuchBelow=howMuchBelow,...)),
list(xCoordinatesOfLines=xCoordinatesOfLines, belowBar=belowBar,
howMuchBelow=howMuchBelow,...))
    exp <- parse(text=gsub("list","add_verticalline",
as.expression(substitute(list(x=current.chob(),

xCoordinatesOfLines=xCoordinatesOfLines, belowBar=belowBar,
howMuchBelow=howMuchBelow, ...)))), srcfile=NULL)
    plot_object <- current.chob()
    lenv$xdata <- plot_object$Env$xdata
    # TODO: what is correct frame number here?
    plot_object$set_frame(2*on)
#    plot_object$set_frame(sign(on)*abs(on)+1L)
    plot_object$add(exp,env=c(lenv, plot_object$Env),expr=TRUE)
    plot_object
}

#datesForLines <- c("2012-02-06", "2012-02-07")

#verticalLines <- xts(rep(1, length(datesForLines)), order.by
=as.Date(datesForLines))

#SPX <- getSymbols("^GSPC", from="2000-01-01", auto.assign=FALSE)
#chart_Series(SPX, subset="2012")
#abline(v=c((NROW(SPX["2012/"]) - 2), (NROW(SPX["2012/"]) - 1)), col='red',
lwd=2)
#add_VerticalLine(verticalLines, belowBar=TRUE, on=1, col=c('red', 'blue'),
lwd=2)

add_HorizontalLine<-function(yCoordinatesOfLines, on=1, ...) {
    lenv <- new.env()
    lenv$add_horizontalline <- function(x, yCoordinatesOfLines, ...) {
        xdata <- x$Env$xdata
        xsubset <- x$Env$xsubset

        x0coords <- rep(1, NROW(yCoordinatesOfLines))
        x1coords <- rep(NROW(xdata[xsubset]), NROW(yCoordinatesOfLines))

        if ((NROW(x0coords) > 0) & (NROW(x1coords) > 0)) {
            segments(x0coords,
                     yCoordinatesOfLines,
                     x1coords,
                     yCoordinatesOfLines, ...)
#            abline(h=yCoordinatesOfLines, ...)
        }
    }
    mapply(function(name, value) {assign(name,value,envir=lenv)},
names(list(yCoordinatesOfLines=yCoordinatesOfLines,...)),
list(yCoordinatesOfLines=yCoordinatesOfLines,...))
    exp <- parse(text=gsub("list","add_horizontalline",
as.expression(substitute(list(x=current.chob(),

yCoordinatesOfLines=yCoordinatesOfLines, ...)))), srcfile=NULL)
    plot_object <- current.chob()
    # TODO: what is correct frame number here?
    lenv$xdata <- plot_object$Env$xdata
#    plot_object$set_frame(sign(on)*abs(on)+1L)
    plot_object$set_frame(2*on)
    plot_object$add(exp,env=c(lenv, plot_object$Env),expr=TRUE)
    plot_object
}

#yCoordinatesForLines <- c(1270, 1320, 1350)
#
#SPX <- getSymbols("^GSPC", from="2000-01-01", auto.assign=FALSE)
#chart_Series(SPX, subset="2012/")
#add_HorizontalLine(yCoordinatesForLines, col=c('red', 'blue', 'green'),
lwd=2)

add_Line<-function(x0, y0, x1, y1, on=1, ...) {
    lenv <- new.env()
    lenv$add_line <- function(x, x0, y0, x1, y1, ...) {
        xdata <- x$Env$xdata
        xsubset <- x$Env$xsubset
        x0coords <- seq(1:NROW(xdata[xsubset]))[index(xdata[xsubset]) %in%
index(x0[xsubset])]
        x1coords <- seq(1:NROW(xdata[xsubset]))[index(xdata[xsubset]) %in%
index(x1[xsubset])]

        # TODO: make sure you truncate x1coords so that, if we have x0coord
line should be drawn to last bar in subset

        if ((NROW(x0coords) > 0) & (NROW(x1coords) > 0)) {
            segments(x0coords,
                    y0[xsubset],
                    x1coords,
                    y1[xsubset], ...)
        }
    }
    mapply(function(name, value) {assign(name,value,envir=lenv)},
names(list(x0=x0, y0=y0, x1=x1, y1=y1,...)), list(x0=x0, y0=y0, x1=x1,
y1=y1,...))
    exp <- parse(text=gsub("list","add_line",
as.expression(substitute(list(x=current.chob(),
                                            x0=x0, y0=y0, x1=x1, y1=y1,
...)))), srcfile=NULL)
    plot_object <- current.chob()
    lenv$xdata <- plot_object$Env$xdata
    # TODO: what is correct frame number here?
    plot_object$set_frame(sign(on)*abs(on)+1L)
    plot_object$add(exp,env=c(lenv, plot_object$Env),expr=TRUE)
    plot_object
}

#SPX <- getSymbols("^GSPC", from="2000-01-01", auto.assign=FALSE)
#
#x0Dates <- c("2012-01-05", "2012-01-18")
#x1Dates <- c("2012-01-10", "2012-01-24")
#x0 <- xts(rep(1, length(x0Dates)), order.by=as.Date(x0Dates))
#y0 <- Cl(SPX[x0Dates])
#x1 <- xts(rep(1, length(x1Dates)), order.by=as.Date(x1Dates))
#y1 <- Cl(SPX[x1Dates])
#
#subset <- "2012-01-06/2012-01-22"
#
#chart_Series(SPX, subset=subset)
#add_Line.primitive(x0, y0, x1, y1, col=c('red', 'green'), lwd=2)

add_Text<-function(xTextCoordinates, yTextCoordinates, text, on=1, ...) {
    lenv <- new.env()
    lenv$add_text <- function(x, xTextCoordinates, yTextCoordinates, text,
...) {
        xdata <- x$Env$xdata
        xsubset <- x$Env$xsubset
        xcoords <- seq(1:NROW(xdata[xsubset]))[index(xdata[xsubset]) %in%
index(xTextCoordinates[xsubset])]

        if (NROW(xcoords) > 0) {
            text(xcoords, yTextCoordinates[xsubset], text[subset], ...)
        }
    }
    mapply(function(name, value) {assign(name,value,envir=lenv)},
names(list(xTextCoordinates=xTextCoordinates,
yTextCoordinates=yTextCoordinates, text=text,...)),
list(xTextCoordinates=xTextCoordinates, yTextCoordinates=yTextCoordinates,
text=text,...))
    exp <- parse(text=gsub("list","add_text",
as.expression(substitute(list(x=current.chob(),

xTextCoordinates=xTextCoordinates, yTextCoordinates=yTextCoordinates,
text=text, ...)))), srcfile=NULL)
    plot_object <- current.chob()
    lenv$xdata <- plot_object$Env$xdata
    # TODO: what is correct frame number here?
    plot_object$set_frame(sign(on)*abs(on)+1L)
    plot_object$add(exp,env=c(lenv, plot_object$Env),expr=TRUE)
    plot_object
}

#textDates <- c("2012-01-05", "2012-01-18")
#textRaw <- c("Test 1", "Test 2")
#text <- xts(textRaw, order.by=as.Date(textDates))
#yTextCoordinates <- xts(Cl(SPX[textDates]), order.by=as.Date(textDates))
#
#subset <- "2012"
#
#SPX <- getSymbols("^GSPC", from="2000-01-01", auto.assign=FALSE)
#
#chart_Series(SPX, subset=subset)
#add_Text(text, yTextCoordinates, text, col=c('red', 'green'))
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120419/583008fb/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: quantmod_graphics_extesions.R
Type: application/octet-stream
Size: 6677 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120419/583008fb/attachment.obj>

From papa.senyo at yahoo.it  Thu Apr 19 15:42:34 2012
From: papa.senyo at yahoo.it (Papa sen)
Date: Thu, 19 Apr 2012 14:42:34 +0100 (BST)
Subject: [R-SIG-Finance] BDS TEST-PACKAGE tseries
Message-ID: <1334842954.59200.YahooMailNeo@web132306.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120419/44ab0c5f/attachment.pl>

From alexios at 4dscape.com  Thu Apr 19 18:34:37 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Thu, 19 Apr 2012 17:34:37 +0100
Subject: [R-SIG-Finance] BDS TEST-PACKAGE tseries
In-Reply-To: <1334842954.59200.YahooMailNeo@web132306.mail.ird.yahoo.com>
References: <1334842954.59200.YahooMailNeo@web132306.mail.ird.yahoo.com>
Message-ID: <4F903E9D.70908@4dscape.com>

Please don't post your question twice 
(https://stat.ethz.ch/pipermail/r-sig-finance/2012q2/009970.html).
There is no clear answer. The test may not have good size for other 
models, but it varies. You can do a monte carlo size test to gauge the 
degree of bias (if you don't know how, search for the terms and you 
should get some reasonable hits) for you model and set of parameters.

Regards,
Alexios

On 19/04/2012 14:42, Papa sen wrote:
> Dear Alexios,
> Thanks for the prompt response,Yes, it is tseries. I am using EGARCH,
> can I since pass the log transformation since this model cannot be
> transformed into a linear additive model?
> Hope to hearing from you soon.
> Kind regards,
> papa


From shantanusharma at gmail.com  Thu Apr 19 18:48:38 2012
From: shantanusharma at gmail.com (Shantanu Sharma)
Date: Thu, 19 Apr 2012 12:48:38 -0400
Subject: [R-SIG-Finance] Time Series Lead Lag Analysis
In-Reply-To: <CANazbfVSCRzQ8_OijCkLUvMPM-JdractyT8R4SOagVnOzCXP5Q@mail.gmail.com>
References: <CANazbfVSCRzQ8_OijCkLUvMPM-JdractyT8R4SOagVnOzCXP5Q@mail.gmail.com>
Message-ID: <CAKD23NmUDebOMyWmVudkEmDB6jcYzQ+AEoU_W6i3MoCRqWCDGQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120419/910c746a/attachment.pl>

From graizada at gmail.com  Fri Apr 20 09:34:57 2012
From: graizada at gmail.com (Gaurav Raizada)
Date: Fri, 20 Apr 2012 13:04:57 +0530
Subject: [R-SIG-Finance] Time Series Lead Lag Analysis
In-Reply-To: <CAKD23NmUDebOMyWmVudkEmDB6jcYzQ+AEoU_W6i3MoCRqWCDGQ@mail.gmail.com>
References: <CANazbfVSCRzQ8_OijCkLUvMPM-JdractyT8R4SOagVnOzCXP5Q@mail.gmail.com>
	<CAKD23NmUDebOMyWmVudkEmDB6jcYzQ+AEoU_W6i3MoCRqWCDGQ@mail.gmail.com>
Message-ID: <CANazbfXPTro1u4N5sPgswf5M1_rKZLqLjtmvTB2emfD0Okhb0Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120420/47603c0c/attachment.pl>

From sjansevanrensburg at gmail.com  Fri Apr 20 12:29:11 2012
From: sjansevanrensburg at gmail.com (Stefan Janse van Rensburg)
Date: Fri, 20 Apr 2012 12:29:11 +0200
Subject: [R-SIG-Finance] Time Series Lead Lag Analysis
In-Reply-To: <mailman.3.1334916001.12681.r-sig-finance@r-project.org>
References: <mailman.3.1334916001.12681.r-sig-finance@r-project.org>
Message-ID: <4F913A77.6070109@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120420/245dcdcf/attachment.pl>

From slzimine at gmail.com  Fri Apr 20 17:20:49 2012
From: slzimine at gmail.com (slava zimine)
Date: Fri, 20 Apr 2012 11:20:49 -0400
Subject: [R-SIG-Finance] quantmod calling barChart from a function ..
	problematic
Message-ID: <CAG=8LhqLE406zpN9zzV+pzxgnjSMtuCPuu1q2XFKS6Vczb3ocA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120420/f6b8544e/attachment.pl>

From slzimine at gmail.com  Fri Apr 20 17:59:41 2012
From: slzimine at gmail.com (slava zimine)
Date: Fri, 20 Apr 2012 11:59:41 -0400
Subject: [R-SIG-Finance] Using abline with chartSeries
In-Reply-To: <4F80F3A5.7000503@gmail.com>
References: <4F80F3A5.7000503@gmail.com>
Message-ID: <CAG=8LhoZMMYzje2K5VabeEza2Svdw9qxXcf7SMqifNK8UeTSEA@mail.gmail.com>

Hi

Please check  if the  functions attached  do what you wish.

functions currently set to work with xts  ohlc  with time frames   m1, m5,
m15, h1,d1, w1, mo1


regards.

SZ


> source('addVoep.R') ; source('addEp.R')

>loadSymbols('IBM')

>mg <- to.monthly(IBM)

barChart(mg, TA='addEp();addVoep()' )

On Sat, Apr 7, 2012 at 10:10 PM, Worik Stanton <worik.stanton at gmail.com>wrote:

> Friends
>
> I would like to be able to draw vertical lines on a chart resulting from
> chartSeries.
>
> I can draw horrizontal lines but they do not apear in the correct place.
>
> In the following example I draw a dotted white horizontal line, but not
> where I asked for it, and I get no vertical line using either of the two
> methods.  I cannot find an answer via Google.  I am stumped
>
> library(quantstrat)
> getSymbols("IBM")
> IBM.m <- to.monthly(IBM)
> chartSeries(IBM.m)
> abline(h=140, lty=2, col="white")
> QQ <- index(IBM.m[24,])
> abline(v=QQ, col="white", lty=2)
> abline(v=.index(IBM.m[24,]), col="white", lty=2)
>
>
>
> --
> Foo!
>
> ______________________________**_________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/**listinfo/r-sig-finance<https://stat.ethz.ch/mailman/listinfo/r-sig-finance>
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120420/647af3a9/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: addEp.R
Type: application/octet-stream
Size: 2630 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120420/647af3a9/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: addVoep.R
Type: application/octet-stream
Size: 6030 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120420/647af3a9/attachment-0001.obj>

From chicagobrownblue at hotmail.com  Fri Apr 20 19:40:02 2012
From: chicagobrownblue at hotmail.com (FJ M)
Date: Fri, 20 Apr 2012 17:40:02 +0000
Subject: [R-SIG-Finance] Graphing Dividends, Re-investing dividends,
	dividend pay date
Message-ID: <BLU161-W43A0A6AFB894B839BB795DDF220@phx.gbl>


Hi,

I want to do some work on dividends and thought I would ask here first instead of re-inventing the wheel. 

1) I wanted to do some work charting the current yield of stocks that pay dividends. This I can do, but I was wondering if this is already available.

2) Yahoo provides both daily prices and dividends on the ex-dividend date. Does anyone know of a source of dividend pay date? This impacts re-investing dividends. Some stocks like NLY pay quickly, about a month, after the ex-dividend date. Other stocks like VOD take a long time to pay, like 2 1/2 months. In particular with VOD, you have both a longer time period for price variation and the added risk of currency fluctuations if you are not a UK investor.

3) Is there an object for dividends already defined in a finance package? Something like ex-dividend date, dividend amount, currency, dividend frequency, dividend type? (Type would be 1 for single annual dividend like DIS, 2 for two usually equal dividends, 3 for three dividends, 4 for quarterly, 12 for monthly, prelim for a, typically, a European stock that pays a preliminary and final dividend, final, special for a one time dividend, stock for a stock dividend, ... In the meantime I'll populated pay date with ex-dividend date. 

4) With dividend reinvestment under control, I would want to graph a comparison of an investment of reinvested dividends on a stock to reinvested money market returns, 30- and 10-year US Treasury reinvested returns, gold. I can do the 10- and 30-year with TLH and TLT; gold with GLD. I actually do not have a good source for money market rates. Any suggestions?
 
Experienced C programmer. The basics of R (plotting, linear regression) under control. New to the finance part of R.
 
Thanks,
 
Frank 		 	   		  

From noreply+2463120916 at badoo.com  Sat Apr 21 03:47:19 2012
From: noreply+2463120916 at badoo.com (Badoo)
Date: Sat, 21 Apr 2012 01:47:19 +0000
Subject: [R-SIG-Finance] =?utf-8?q?Paulo_Sousa_deixou_uma_mensagem_para_vo?=
	=?utf-8?b?Y8OqLi4u?=
Message-ID: <201204210147.q3L1lNbk014627@hypatia.math.ethz.ch>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120421/656a1887/attachment.pl>

From slzimine at gmail.com  Sat Apr 21 08:19:45 2012
From: slzimine at gmail.com (slava zimine)
Date: Sat, 21 Apr 2012 02:19:45 -0400
Subject: [R-SIG-Finance] quantmod calling barChart from a function ..
	problematic
In-Reply-To: <CAG=8LhqLE406zpN9zzV+pzxgnjSMtuCPuu1q2XFKS6Vczb3ocA@mail.gmail.com>
References: <CAG=8LhqLE406zpN9zzV+pzxgnjSMtuCPuu1q2XFKS6Vczb3ocA@mail.gmail.com>
Message-ID: <CAG=8LhqWFAjpw4=F+N4xjZmyxe6CzAmb-zXG9NxDibpZbk2rPA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120421/25aada06/attachment.pl>

From brian at braverock.com  Sat Apr 21 11:34:48 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sat, 21 Apr 2012 04:34:48 -0500
Subject: [R-SIG-Finance] quantmod calling barChart from a function ..
 problematic
In-Reply-To: <CAG=8LhqWFAjpw4=F+N4xjZmyxe6CzAmb-zXG9NxDibpZbk2rPA@mail.gmail.com>
References: <CAG=8LhqLE406zpN9zzV+pzxgnjSMtuCPuu1q2XFKS6Vczb3ocA@mail.gmail.com>
	<CAG=8LhqWFAjpw4=F+N4xjZmyxe6CzAmb-zXG9NxDibpZbk2rPA@mail.gmail.com>
Message-ID: <1335000888.17905.84.camel@brian-desktop>

First, please don't repost.  We all got your first message, and someone
likely would have responded.

On Sat, 2012-04-21 at 02:19 -0400, slava zimine wrote:
> below is an example which shows a problem when barChart with complex  TA
>  argument is called from within a function, in this case chartingfoo()
<...>
> Rationale:   I wish to make a package  which contains some S4 Objects  and
> i would like to put charting functions inside S4 methods.

Really?  Why use S4.  They're a pain, don't work all that well, and
interfere with other code dispatch way too easily.  S3 and Reference
Classes both work better.

> The current workaround   is to  externalize  charting code in separate R
> files and requiring user to  source them at session start.

If you need to source files into an environment, you may be having
scoping issues, but these could always be worked around by not creating
naming collisions, or by scoping them explicitly using get() and
do.call()

> Any comments will be appreciated.

For you and all the other folks who keep commenting on chartSeries and
addTA and barChart and so-on, development has moved on to the new
chart_Series, add_TA, etc.  They're faster and the code is much more
manageable.  Basically no effort is going to be put into the old code by
anyone with commit access to quantmod and xts. This has been discussed
on this list before.  

Patches that are very well formed, well-demonstrated, and easy to test
and commit would likely still be accepted. However, I can count on one
hand the number of patches I've received over the last few years that
didn't need modification before committing (and one of the people who
sent *those* patches now has commit rights on the impacted packages). 

What does that mean?  It means that you should also move your energies
to the new functions.  

Regards,

     - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From slzimine at gmail.com  Sat Apr 21 15:05:16 2012
From: slzimine at gmail.com (slava zimine)
Date: Sat, 21 Apr 2012 09:05:16 -0400
Subject: [R-SIG-Finance] quantmod calling barChart from a function ..
	problematic
In-Reply-To: <CAG=8LhoJ3f25Gfxq48DD4Kn3CJkQBNdz3OZ3NgeQRq-pTcfhNw@mail.gmail.com>
References: <CAG=8LhqLE406zpN9zzV+pzxgnjSMtuCPuu1q2XFKS6Vczb3ocA@mail.gmail.com>
	<CAG=8LhqWFAjpw4=F+N4xjZmyxe6CzAmb-zXG9NxDibpZbk2rPA@mail.gmail.com>
	<1335000888.17905.84.camel@brian-desktop>
	<CAG=8LhoJ3f25Gfxq48DD4Kn3CJkQBNdz3OZ3NgeQRq-pTcfhNw@mail.gmail.com>
Message-ID: <CAG=8LhqSqZRs7Lp08n56j3eG6iC5vrnVqcFBh=xAKu5gN47asQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120421/1e141b3f/attachment.pl>

From n.j.apps22 at gmail.com  Sun Apr 22 14:28:36 2012
From: n.j.apps22 at gmail.com (N.j.apps22)
Date: Sun, 22 Apr 2012 13:28:36 +0100
Subject: [R-SIG-Finance] (no subject)
Message-ID: <un7q51sp40k0ho2w4unrli5s.1335097716927@email.android.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120422/eb08eef7/attachment.pl>

From gordon.erlebach at gmail.com  Sun Apr 22 16:08:39 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Sun, 22 Apr 2012 10:08:39 -0400
Subject: [R-SIG-Finance] Use of chart_Series
Message-ID: <CAELivk+VytFvnifC0B9GVjVVdEgwnCmxz9-p8tP7fPyVefA+fQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120422/bf4e7c10/attachment.pl>

From josh.m.ulrich at gmail.com  Sun Apr 22 16:34:41 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sun, 22 Apr 2012 09:34:41 -0500
Subject: [R-SIG-Finance] Use of chart_Series
In-Reply-To: <CAELivk+VytFvnifC0B9GVjVVdEgwnCmxz9-p8tP7fPyVefA+fQ@mail.gmail.com>
References: <CAELivk+VytFvnifC0B9GVjVVdEgwnCmxz9-p8tP7fPyVefA+fQ@mail.gmail.com>
Message-ID: <CAPPM_gSzTF8MtHbAUodEPmnf1fA4LkauW4bX+3rxREqoOmpn_g@mail.gmail.com>

You cannot mix chartSeries / addTA functions with chart_Series and
add_TA functions.
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com



On Sun, Apr 22, 2012 at 9:08 AM, Gordon Erlebacher
<gordon.erlebach at gmail.com> wrote:
> Hi,
>
> There is very little information about chart_Series. I tried the following:
>
>
>
> S = getSymbols("YHOO")
> chart_Series(S)
> addCCI(n=14)
>
>
>
> # I got the error:
> Error in get.current.chob() : improperly set or missing graphics device
>
>
> The code above works if I remove addCCI. Any suggestions?
>
> ? Thanks,
>
> ? ? ? Gordon
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gordon.erlebach at gmail.com  Sun Apr 22 19:42:48 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Sun, 22 Apr 2012 13:42:48 -0400
Subject: [R-SIG-Finance] creation of add_stoch
Message-ID: <CAELivkJG4B+qC_XubybkCQU+YPsYm079OG0YKr0p4p610-3_mg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120422/9741ced2/attachment.pl>

From gordon.erlebach at gmail.com  Sun Apr 22 20:21:47 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Sun, 22 Apr 2012 14:21:47 -0400
Subject: [R-SIG-Finance] creation of add_stoch
In-Reply-To: <CAELivkJG4B+qC_XubybkCQU+YPsYm079OG0YKr0p4p610-3_mg@mail.gmail.com>
References: <CAELivkJG4B+qC_XubybkCQU+YPsYm079OG0YKr0p4p610-3_mg@mail.gmail.com>
Message-ID: <CAELivkJ-DdTvP=W20y3_pqZJOJzCB8BfMkk_4hc3LJQ_aoP93w@mail.gmail.com>

Here is a function add_stoch that works, although it is heavy coding given
that one is adding a subframe which is a single line plot. Also, there
should be no need to call add_stoch more than once for efficiency. Finally,
the add_xxx() collection of routines  presumes that the underlying function
xxx() returns a single series, which is why I need to create the inner
function stoch1.

Surely there must be a simpler approach. I attach the code (I do not know
whether attachments work.)



add_stoch = function (nFastK = 10, nFastD=3, nSlowD=3, maType, bounded=T,
smooth=1, on = 1, ...)
{
stoch1 = function (HLC, nFastK = 10, nFastD=3, nSlowD=3, maType, bounded=T,
smooth=1, ...)
{
return(stoch(HLC, nFastK, nFastD, nSlowD, maType, bounded, smooth,
...)['2012'][,2])
}

    lenv <- new.env()
    lenv$add_stoch <- function(x, nFastK = 10, nFastD=3, nSlowD=3,
maType=SMA, bounded=T, smooth=1, ...) {
        xdata <- x$Env$xdata
        xsubset <- x$Env$xsubset
        sto <- stoch1(Cl(xdata),
nFastK=nFastK,nFastD=nFastD,nSlowD=nSlowD,maType=SMA, bounded=bounded,
smooth=smooth)[xsubset]
        lines(1:NROW(xdata[xsubset]), sto, ...)
    }
    mapply(function(name, value) {
        assign(name, value, envir = lenv)
    }, names(list(nFastK=nFastK,nFastD=nFastD,nSlowD=nSlowD,maType=SMA,
bounded=bounded, smooth=smooth, ...)),
list(nFastK=nFastK,nFastD=nFastD,nSlowD=nSlowD,maType=SMA, bounded=bounded,
smooth=smooth, ...))
    exp <- parse(text = gsub("list", "add_stoch",
as.expression(substitute(list(x = current.chob(),
        nFastK=nFastK,nFastD=nFastD,nSlowD=nSlowD,maType=SMA,
bounded=bounded, smooth=smooth, ...)))), srcfile = NULL)
    plot_object <- current.chob()
    lenv$xdata <-
stoch1(Cl(plot_object$Env$xdata),nFastK=nFastK,nFastD=nFastD,nSlowD=nSlowD,maType=SMA,
bounded=bounded, smooth=smooth)
    plot_object$set_frame(sign(on) * abs(on) + 1L)
    plot_object$add(exp, env = c(lenv, plot_object$Env), expr = TRUE)
    plot_object
}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120422/48319f33/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: add_stoch.r
Type: application/octet-stream
Size: 1646 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120422/48319f33/attachment.obj>

From wuertz at itp.phys.ethz.ch  Sun Apr 22 20:55:35 2012
From: wuertz at itp.phys.ethz.ch (Diethelm Wuertz)
Date: Sun, 22 Apr 2012 20:55:35 +0200
Subject: [R-SIG-Finance] Don't miss: 6th R/Rmetrics Meielisalp Workshop 2012,
	June 24-28
In-Reply-To: <CAELivkJ-DdTvP=W20y3_pqZJOJzCB8BfMkk_4hc3LJQ_aoP93w@mail.gmail.com>
References: <CAELivkJG4B+qC_XubybkCQU+YPsYm079OG0YKr0p4p610-3_mg@mail.gmail.com>
	<CAELivkJ-DdTvP=W20y3_pqZJOJzCB8BfMkk_4hc3LJQ_aoP93w@mail.gmail.com>
Message-ID: <5863E54D-4C10-4800-B9CF-1535C9CF1C12@itp.phys.ethz.ch>


1st Announcement

Computational Finance and Financial Engineering
6th R/Rmetrics Meielisalp Workshop and Summer School
Meielisalp, Lake Thune Switzerland, 24 June - 28 June 2012


                 *** R/Rmetrics 2012  -  Don't miss it !  ***

    
The workshop consists of Summer School-like tutorial sessions and a user/developer meeting. Both focus on topics from Computational Finance and Financial Engineering and on the use of R/Rmetrics in finance, insurance and related fields. The morning sessions have tutorials covering topics from multivariate data analysis, robust statistics, actuarial science and portfolio optimization. Some of the tutorials incorporate practical exercises

Key Note Speaker - After Dinner Speech:

    Bill Alpert, Barron?s - The Dow Jones Business and Financial Weekly, New York, USA
    Catching Wall Street Bad Guys with R

Tutorial Topics:

    * Professor Kurt Varmuza, Technical University of Vienna, Austria,
      Multivariate Data Analysis
    * Professor Andreas Ruckstuhl, ZHAW Zurich, and 
      Dr. Martin Maechler, ETH Zurich and R Core Team, Switzerland
      Robust Data Analysis and Statistics
    * Professor Arthur Charpentier, University of Montreal Canada, and University of Rennes, France,
      Actuarial Science with R
    * Professor Thierry Roncalli, University of Evry and Lyxor Asset Management, France
      From Portfolio Optimization to Risk Parity
    * Professor Manfred Gilli, University of Geneva and Swiss Banking Institute, Switzerland
      Heuristic Optimization in Finance

The afternoon sessions are dedicated to about 25 invited and contributed talks and presentations reflecting the wide range of fields in which R and Rmetrics are used in finance and insurance to analyze and model data. The goal is to bring together students, researchers, developers, practitioners, and users from finance and insurance providing a platform for common discussions and exchange of ideas. 

Call for Papers - Topics:
We invite the submission of abstracts presenting innovations or exciting applications covering the whole spectrum of computational topics in finance, insurance and related fields. To submit an abstract, email your pdf file to submissions [at] rmetrics.org. Please keep abstracts to one page. The abstracts will become available in an online abstract booklet. Submission will be considered on a rolling admission basis. 

Participation:
The workshop is limited to about 50 participants, therefore early registration is highly recommended. 

Scholarship for Students:
A limited number of scholarships are available for full-time Bachelor and Master students that include a reduction on the accommodation fees (total accommodation fees would be 100.00 CHF). Please send a letter of motivation and a recommendation letter from your supervisor to submissions [at] rmetrics.org. Note that only complete applications send from an email address affiliated to an university will be accepted.

Date:
The registration desk will be open on Sunday June 24, from 4:00 to 6:00 pm.
The event ends on Thursday June 28, after lunch about 2:00 pm.

Organization:
Organizier: Swiss Federal Institute of Technology, Zurich
Co-organizier: Rmetrics Association Zurich
Conference Chair: Diethelm Wuertz, Swiss Federal Institute of Technology, Zurich
Conference Office: Yohan Chalabi and Tobias Setz, Swiss Federal Institute of Technology, Zurich

Visit:
http://www.rmetrics.org/meielisalp2012
http://www.rmetrics.org/meielisalp2012-registration
    
We would very appreciate it to welcome you at the Meielisalp
best wishes and kind regards

Diethelm Wuertz


From haipinglan at gmail.com  Mon Apr 23 10:50:39 2012
From: haipinglan at gmail.com (Haiping LAN)
Date: Mon, 23 Apr 2012 16:50:39 +0800
Subject: [R-SIG-Finance] about an error of xts
Message-ID: <CAM4Kd2HPJjDpxQBsoMhS05G80Pi8A9ptBWE6YLTd1d_Utba5NQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120423/81a8444a/attachment.pl>

From krisanharia at gmail.com  Mon Apr 23 12:12:30 2012
From: krisanharia at gmail.com (krisan haria)
Date: Mon, 23 Apr 2012 11:12:30 +0100
Subject: [R-SIG-Finance] Problem with R bloomberg.
Message-ID: <CALHdMsU5R1PCCiGM5KOYmTgNV5UAM3ghWvU9aKcK0wr_ZzuzAw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120423/be212e1e/attachment.pl>

From satelena at hotmail.com  Mon Apr 23 12:22:42 2012
From: satelena at hotmail.com (Sergio Alvarez)
Date: Mon, 23 Apr 2012 12:22:42 +0200
Subject: [R-SIG-Finance] Problem with R bloomberg.
In-Reply-To: <CALHdMsU5R1PCCiGM5KOYmTgNV5UAM3ghWvU9aKcK0wr_ZzuzAw@mail.gmail.com>
References: <CALHdMsU5R1PCCiGM5KOYmTgNV5UAM3ghWvU9aKcK0wr_ZzuzAw@mail.gmail.com>
Message-ID: <COL108-W1486EF9934FF4419547C16CA210@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120423/23ef7c29/attachment.pl>

From krisanharia at gmail.com  Mon Apr 23 12:59:54 2012
From: krisanharia at gmail.com (krisan haria)
Date: Mon, 23 Apr 2012 11:59:54 +0100
Subject: [R-SIG-Finance] Problem with R bloomberg.
In-Reply-To: <COL108-W1486EF9934FF4419547C16CA210@phx.gbl>
References: <CALHdMsU5R1PCCiGM5KOYmTgNV5UAM3ghWvU9aKcK0wr_ZzuzAw@mail.gmail.com>
	<COL108-W1486EF9934FF4419547C16CA210@phx.gbl>
Message-ID: <CALHdMsWjUZzxsbgSScCDadaS69ogDAS0b4a05kocVH1sVTp7Gw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120423/8404913e/attachment.pl>

From bd10stats at googlemail.com  Mon Apr 23 13:42:50 2012
From: bd10stats at googlemail.com (Bernd Dittmann)
Date: Mon, 23 Apr 2012 12:42:50 +0100
Subject: [R-SIG-Finance] rollapply - error message - wrong sign in 'by'
	argument
Message-ID: <CAKdis6FDM56_B0ai=BCTGBKJPSwr5-UYV1uP1kEL6v-e0av=qQ@mail.gmail.com>

Hi group,

Having upgraded R and zoo & tseries, I am puzzled why the following
rollapply() script gives me this error:

"Error in seq.default(start.at, NROW(data), by = by) :
? wrong sign in 'by' argument"

Here's a worked example:

require(tseries)

# some price series
rr <- get.hist.quote(instrument="RR.L", start="2012-01-01", quote="AdjClose)
bp <- get.hist.quote(instrument="BP.L", start="2012-01-01", quote="AdjClose)

# convert to log returns:
rr.r <- diff(log(rr))
bp.r <- diff(log(bp))

data.set <- merge(rr.r, bp.r)

I am trying to calculate the correlation between rr.r and bp.r on a
rolling basis. For which I have defined the following function:


ROLCOR <- function(x){
??? # normalized returns
??? x1.norm <- (x[, 1] - mean(x[, 1])) / sd(x[, 1])
??? x2.norm <- (x[, 2] - mean(x[, 2])) / sd(x[, 2])

??? # 95 pct confidence interval
??? x2 <- as.numeric(coef(lm(x1.norm ~ 0 + x2.norm))[1])
??? x1 <- as.numeric(confint(lm(x1.norm ~ 0 + x2.norm), level = 0.95))[1]
??? x3 <- as.numeric(confint(lm(x1.norm ~ 0 + x2.norm), level = 0.95))[2]

??? # p-value
??? pval <- as.numeric(coef(summary(lm(x1.norm ~ 0 + x2.norm)))[4])

??? result <- c(x1, x2, x3, pval)
 ?? return(result)
}


Now, applying function ROLCOR over the whole set, it works just fine:

ROLCOR(data.set)
[1] 2.805971e-01 4.833686e-01 6.861401e-01 9.736237e-06


However, when running ROLCOR via rollapply(...), things get funny:

rollapply(data.set, width = 250, ROLCOR, by.column = FALSE, align = "right")

I am getting this error message:

"Error in seq.default(start.at, NROW(data), by = by) :
? wrong sign in 'by' argument"

What confuses me is that it worked before I updated R from 2.14.2 to
2.15. Even if I set "by = 1", it does not resolve things.

What am I doing wrong here? I am sure it's something trivial but I
sadly cannot see the forest before its trees.

Much obliged & kind regards,

Bernd


Last but not least, my session Info:

R version 2.15.0 (2012-03-30)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252? LC_CTYPE=English_United States.1252
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

attached base packages:
[1] stats???? graphics? grDevices utils???? datasets? methods?? base

other attached packages:
[1] tseries_0.10-28 zoo_1.7-7?????? quadprog_1.5-4

loaded via a namespace (and not attached):
[1] grid_2.15.0??? lattice_0.20-6 tools_2.15.0


From ggrothendieck at gmail.com  Mon Apr 23 14:09:00 2012
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 23 Apr 2012 08:09:00 -0400
Subject: [R-SIG-Finance] rollapply - error message - wrong sign in 'by'
	argument
In-Reply-To: <CAKdis6FDM56_B0ai=BCTGBKJPSwr5-UYV1uP1kEL6v-e0av=qQ@mail.gmail.com>
References: <CAKdis6FDM56_B0ai=BCTGBKJPSwr5-UYV1uP1kEL6v-e0av=qQ@mail.gmail.com>
Message-ID: <CAP01uRn+27_Gibm_j5vSwGhjpzJb=rKC3DOYJp7RjoU2x0f0DA@mail.gmail.com>

On Mon, Apr 23, 2012 at 7:42 AM, Bernd Dittmann
<bd10stats at googlemail.com> wrote:
> Hi group,
>
> Having upgraded R and zoo & tseries, I am puzzled why the following
> rollapply() script gives me this error:
>
> "Error in seq.default(start.at, NROW(data), by = by) :
> ? wrong sign in 'by' argument"
>
> Here's a worked example:
>
> require(tseries)
>
> # some price series
> rr <- get.hist.quote(instrument="RR.L", start="2012-01-01", quote="AdjClose)
> bp <- get.hist.quote(instrument="BP.L", start="2012-01-01", quote="AdjClose)
>
> # convert to log returns:
> rr.r <- diff(log(rr))
> bp.r <- diff(log(bp))
>
> data.set <- merge(rr.r, bp.r)
>
> I am trying to calculate the correlation between rr.r and bp.r on a
> rolling basis. For which I have defined the following function:
>
>
> ROLCOR <- function(x){
> ??? # normalized returns
> ??? x1.norm <- (x[, 1] - mean(x[, 1])) / sd(x[, 1])
> ??? x2.norm <- (x[, 2] - mean(x[, 2])) / sd(x[, 2])
>
> ??? # 95 pct confidence interval
> ??? x2 <- as.numeric(coef(lm(x1.norm ~ 0 + x2.norm))[1])
> ??? x1 <- as.numeric(confint(lm(x1.norm ~ 0 + x2.norm), level = 0.95))[1]
> ??? x3 <- as.numeric(confint(lm(x1.norm ~ 0 + x2.norm), level = 0.95))[2]
>
> ??? # p-value
> ??? pval <- as.numeric(coef(summary(lm(x1.norm ~ 0 + x2.norm)))[4])
>
> ??? result <- c(x1, x2, x3, pval)
> ??? return(result)
> }
>
>
> Now, applying function ROLCOR over the whole set, it works just fine:
>
> ROLCOR(data.set)
> [1] 2.805971e-01 4.833686e-01 6.861401e-01 9.736237e-06
>
>
> However, when running ROLCOR via rollapply(...), things get funny:
>
> rollapply(data.set, width = 250, ROLCOR, by.column = FALSE, align = "right")
>
> I am getting this error message:
>
> "Error in seq.default(start.at, NROW(data), by = by) :
> ? wrong sign in 'by' argument"
>
> What confuses me is that it worked before I updated R from 2.14.2 to
> 2.15. Even if I set "by = 1", it does not resolve things.
>
> What am I doing wrong here? I am sure it's something trivial but I
> sadly cannot see the forest before its trees.
>

The width, 250, in the example above is larger than the number of rows
in the data.set, 75:

> dim(data.set)
[1] 75  2

Admittedly this should be checked so that you get a better error message.

Also note that rollapplyr is available.

-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From satelena at hotmail.com  Mon Apr 23 14:51:39 2012
From: satelena at hotmail.com (Sergio Alvarez)
Date: Mon, 23 Apr 2012 14:51:39 +0200
Subject: [R-SIG-Finance] Problem with R bloomberg.
In-Reply-To: <CALHdMsWjUZzxsbgSScCDadaS69ogDAS0b4a05kocVH1sVTp7Gw@mail.gmail.com>
References: <CALHdMsU5R1PCCiGM5KOYmTgNV5UAM3ghWvU9aKcK0wr_ZzuzAw@mail.gmail.com>,
	<COL108-W1486EF9934FF4419547C16CA210@phx.gbl>,
	<CALHdMsWjUZzxsbgSScCDadaS69ogDAS0b4a05kocVH1sVTp7Gw@mail.gmail.com>
Message-ID: <COL108-W12C5CACA64E05FB7380CB6CA210@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120423/5717d863/attachment.pl>

From gordon.erlebach at gmail.com  Mon Apr 23 15:02:15 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Mon, 23 Apr 2012 09:02:15 -0400
Subject: [R-SIG-Finance] Annotations to chart_Series data
Message-ID: <CAELivk+m1XxM+si6-HXY-0MGmUEMEEiEuvLwkkSjcfHmbVd_qQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120423/9a4ddc77/attachment.pl>

From krisanharia at gmail.com  Mon Apr 23 15:08:19 2012
From: krisanharia at gmail.com (krisan haria)
Date: Mon, 23 Apr 2012 14:08:19 +0100
Subject: [R-SIG-Finance] Problem with R bloomberg.
In-Reply-To: <COL108-W12C5CACA64E05FB7380CB6CA210@phx.gbl>
References: <CALHdMsU5R1PCCiGM5KOYmTgNV5UAM3ghWvU9aKcK0wr_ZzuzAw@mail.gmail.com>
	<COL108-W1486EF9934FF4419547C16CA210@phx.gbl>
	<CALHdMsWjUZzxsbgSScCDadaS69ogDAS0b4a05kocVH1sVTp7Gw@mail.gmail.com>
	<COL108-W12C5CACA64E05FB7380CB6CA210@phx.gbl>
Message-ID: <CALHdMsUTOW3wK_i47wDHDuRaWL=GKTGJWvxkTEO7su74TxNRQg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120423/fee663b7/attachment.pl>

From brian at braverock.com  Mon Apr 23 15:23:52 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 23 Apr 2012 08:23:52 -0500
Subject: [R-SIG-Finance] Annotations to chart_Series data
In-Reply-To: <CAELivk+m1XxM+si6-HXY-0MGmUEMEEiEuvLwkkSjcfHmbVd_qQ@mail.gmail.com>
References: <CAELivk+m1XxM+si6-HXY-0MGmUEMEEiEuvLwkkSjcfHmbVd_qQ@mail.gmail.com>
Message-ID: <1335187432.31356.37.camel@brian-rcg>

On Mon, 2012-04-23 at 09:02 -0400, Gordon Erlebacher wrote:
> However, if I add the stochastic chart using "add_TA" (uncomment two
> lines in the above code), my text annotations disappear. Of course, I
> could probably create a special function to add them, similar to what
> is done with add_SMA, but is there another way?
> 
You need to either let the chob object know about your chart layer as
the add_* functions do, or you need to put your text or other overlays
on the chart *last*.

Each call to add_* function will rerender the chart, using the
information stored in the chob.  So, if you don't want to work wit hthe
chob, your overlay needs to be added later.

Regards,

  - Brian
> 
-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From gordon.erlebach at gmail.com  Mon Apr 23 16:05:58 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Mon, 23 Apr 2012 10:05:58 -0400
Subject: [R-SIG-Finance] Annotations to chart_Series data
In-Reply-To: <1335187432.31356.37.camel@brian-rcg>
References: <CAELivk+m1XxM+si6-HXY-0MGmUEMEEiEuvLwkkSjcfHmbVd_qQ@mail.gmail.com>
	<1335187432.31356.37.camel@brian-rcg>
Message-ID: <CAELivkJ75R5ViPnN2QqRWhtx5zjGS3cHW9fsOLLy=V+e_WZU4A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120423/c63dd470/attachment.pl>

From pict100 at gmail.com  Mon Apr 23 16:08:49 2012
From: pict100 at gmail.com (Db)
Date: Mon, 23 Apr 2012 07:08:49 -0700 (PDT)
Subject: [R-SIG-Finance] about an error of xts
In-Reply-To: <CAM4Kd2HPJjDpxQBsoMhS05G80Pi8A9ptBWE6YLTd1d_Utba5NQ@mail.gmail.com>
References: <CAM4Kd2HPJjDpxQBsoMhS05G80Pi8A9ptBWE6YLTd1d_Utba5NQ@mail.gmail.com>
Message-ID: <1335190129256-4580517.post@n4.nabble.com>


Your Cl(GSPC) returns a Close and AdjClose , just choose one:

Clx=Cl(GSPC)
Cly=Clx[,1]
ex.model <- specifyModel(T.ind(GSPC) ~ Delt(Cly,k=1:3))



--
View this message in context: http://r.789695.n4.nabble.com/about-an-error-of-xts-tp4579828p4580517.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From josh.m.ulrich at gmail.com  Mon Apr 23 16:46:49 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 23 Apr 2012 09:46:49 -0500
Subject: [R-SIG-Finance] Annotations to chart_Series data
In-Reply-To: <CAELivkJ75R5ViPnN2QqRWhtx5zjGS3cHW9fsOLLy=V+e_WZU4A@mail.gmail.com>
References: <CAELivk+m1XxM+si6-HXY-0MGmUEMEEiEuvLwkkSjcfHmbVd_qQ@mail.gmail.com>
	<1335187432.31356.37.camel@brian-rcg>
	<CAELivkJ75R5ViPnN2QqRWhtx5zjGS3cHW9fsOLLy=V+e_WZU4A@mail.gmail.com>
Message-ID: <CAPPM_gRu53PzJ5ArYR_N21HUYX=w0i9QT2i3xhxWYpFjg2oKNw@mail.gmail.com>

Gordon,

On Mon, Apr 23, 2012 at 9:05 AM, Gordon Erlebacher
<gordon.erlebach at gmail.com> wrote:
> Thanks Brian. I am surprised that each call to add_* rerenders. What
> command actually does the rerendering? Isn't it possible to rewrite the
> functions so that commands accumulate and rendering is done only once? R is
> already an inefficient language (everything is done via copies as opposed
> to references), and rerendering multiple times slows everything down
> further and likely unnecessarily.
>
> Thanks,
> ? Gordon
>
Use the TA= argument to chart_Series to add to the plot without
rendering.  For example:
# use this
chart_Series(SPY, TA="add_SMA(50); add_SMA(200)")
# instead of this
chart_Series(SPY); add_SMA(50); add_SMA(200)

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com


> On Mon, Apr 23, 2012 at 9:23 AM, Brian G. Peterson <brian at braverock.com>wrote:
>
>> On Mon, 2012-04-23 at 09:02 -0400, Gordon Erlebacher wrote:
>> > However, if I add the stochastic chart using "add_TA" (uncomment two
>> > lines in the above code), my text annotations disappear. Of course, I
>> > could probably create a special function to add them, similar to what
>> > is done with add_SMA, but is there another way?
>> >
>> You need to either let the chob object know about your chart layer as
>> the add_* functions do, or you need to put your text or other overlays
>> on the chart *last*.
>>
>> Each call to add_* function will rerender the chart, using the
>> information stored in the chob. ?So, if you don't want to work wit hthe
>> chob, your overlay needs to be added later.
>>
>> Regards,
>>
>> ?- Brian
>> >
>> --
>> Brian G. Peterson
>> http://braverock.com/brian/
>> Ph: 773-459-4973
>> IM: bgpbraverock
>>
>>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From michael.weylandt at gmail.com  Mon Apr 23 17:03:21 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Mon, 23 Apr 2012 11:03:21 -0400
Subject: [R-SIG-Finance] about an error of xts
In-Reply-To: <CAM4Kd2HPJjDpxQBsoMhS05G80Pi8A9ptBWE6YLTd1d_Utba5NQ@mail.gmail.com>
References: <CAM4Kd2HPJjDpxQBsoMhS05G80Pi8A9ptBWE6YLTd1d_Utba5NQ@mail.gmail.com>
Message-ID: <CAAmySGPaBG9SzB3uSi=+kt=mxZMNtL0HQiFTL+ihkzjcUrmQdQ@mail.gmail.com>

In addition to what's been said, you could much more easily write:

GSPC <- getSymbols("^GSPC", from = "2000-01-01", auto.assign = F)

which will give names that are (directly) compatible with other
quantmod functions and would seem to avoid your problem in the first
place.

Michael


On Mon, Apr 23, 2012 at 4:50 AM, Haiping LAN <haipinglan at gmail.com> wrote:
> *Hallo, lists:*
> *
> *
> * ?I came to an error for xts package : * "order.by requires an appropriate
> time-based object".
> * It seems there is no explicit solution to this problem, so would you
> please do me a favor and give me some further advice ?*
> *My current version for R is 2.14.0, and relevant codes are as follows :*
>
> library(tseries)
>
> library(quantmod)
>
> GSPC <- as.xts(get.hist.quote("^GSPC",start="2000-01-02",
> ? ? ? ? ?quote=c("Open", "High", "Low", "Close","Volume","AdjClose")))
>
> T.ind <- function(quotes,tgt.margin=0.025,n.days=10) {
> ?v <- apply(HLC(quotes),1,mean)
>
> ?r <- matrix(NA,ncol=n.days,nrow=NROW(quotes))
> ?for(x in 1:n.days) r[,x] <- Next(Delt(v,k=x),x)
>
> ?x <- apply(r,1,function(x) sum(x[x > tgt.margin | x < -tgt.margin]))
> ?if (is.xts(quotes)) xts(x,time(quotes)) else x
> }
>
> ex.model <- specifyModel(T.ind(GSPC) ~ Delt(Cl(GSPC),k=1:3))
>
> *
> *
> *Best,*
> *Haiping Lan /Guosen Securities Co.*
>
> *
> *
>
> --
> ?Haiping LAN
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From brian at braverock.com  Mon Apr 23 17:08:27 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 23 Apr 2012 10:08:27 -0500
Subject: [R-SIG-Finance] about an error of xts
In-Reply-To: <CAAmySGPaBG9SzB3uSi=+kt=mxZMNtL0HQiFTL+ihkzjcUrmQdQ@mail.gmail.com>
References: <CAM4Kd2HPJjDpxQBsoMhS05G80Pi8A9ptBWE6YLTd1d_Utba5NQ@mail.gmail.com>
	<CAAmySGPaBG9SzB3uSi=+kt=mxZMNtL0HQiFTL+ihkzjcUrmQdQ@mail.gmail.com>
Message-ID: <1335193707.31356.51.camel@brian-rcg>

On Mon, 2012-04-23 at 11:03 -0400, R. Michael Weylandt wrote:
> In addition to what's been said, you could much more easily write:
> 
> GSPC <- getSymbols("^GSPC", from = "2000-01-01", auto.assign = F) 

I'll make it simpler still...

getSymbols("^GSPC", from = "2000-01-01")

which will create object 'GSPC' and avoids the frowned upon use of 'F'
for FALSE (which can easily collide with a variable)

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From NKOTEY at calbank.net  Mon Apr 23 17:04:10 2012
From: NKOTEY at calbank.net (NIKOI KOTEY)
Date: Mon, 23 Apr 2012 15:04:10 +0000
Subject: [R-SIG-Finance] urgent
Message-ID: <4315F8EAD8B8BD44BEA2F38F23752C9380E85F@Mailbackup.CALBANKGH.COM>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120423/cd64bb9b/attachment.pl>

From josh.m.ulrich at gmail.com  Mon Apr 23 17:12:08 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 23 Apr 2012 10:12:08 -0500
Subject: [R-SIG-Finance] urgent
In-Reply-To: <4315F8EAD8B8BD44BEA2F38F23752C9380E85F@Mailbackup.CALBANKGH.COM>
References: <4315F8EAD8B8BD44BEA2F38F23752C9380E85F@Mailbackup.CALBANKGH.COM>
Message-ID: <CAPPM_gQW7KgpebD65fd9GmiYRQ34PXESsJ-Yfy4tJOZb2GjbTA@mail.gmail.com>

You have to unsubscribe yourself, using the link that's at the bottom
of _every_ message to the list.
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com


On Mon, Apr 23, 2012 at 10:04 AM, NIKOI KOTEY <NKOTEY at calbank.net> wrote:
> Hi
>
> Could you please take me off the mailing list.
>
> Thanks,
>
> Nikoi.
>
> DISCLAIMER\ \ ________________________________\ \ The in...{{dropped:25}}
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Mon Apr 23 17:12:51 2012
From: gsee000 at gmail.com (G See)
Date: Mon, 23 Apr 2012 10:12:51 -0500
Subject: [R-SIG-Finance] urgent
In-Reply-To: <4315F8EAD8B8BD44BEA2F38F23752C9380E85F@Mailbackup.CALBANKGH.COM>
References: <4315F8EAD8B8BD44BEA2F38F23752C9380E85F@Mailbackup.CALBANKGH.COM>
Message-ID: <CA+xi=qYy257zwrCfFKAs=T4FdOwMapLcouUj2dOcOd=JUkSBPw@mail.gmail.com>

Quick! before it's too late! Click this link:
https://stat.ethz.ch/mailman/listinfo/r-sig-finance

Then follow these instructions at the bottom of the page:
"To unsubscribe from R-SIG-Finance, get a password reminder, or change
your subscription options ..."

On Mon, Apr 23, 2012 at 10:04 AM, NIKOI KOTEY <NKOTEY at calbank.net> wrote:
> Hi
>
> Could you please take me off the mailing list.
>
> Thanks,
>
> Nikoi.
>
> DISCLAIMER\ \ ________________________________\ \ The in...{{dropped:25}}
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gordon.erlebach at gmail.com  Mon Apr 23 17:41:33 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Mon, 23 Apr 2012 11:41:33 -0400
Subject: [R-SIG-Finance] Annotations to chart_Series data
In-Reply-To: <CAPPM_gRu53PzJ5ArYR_N21HUYX=w0i9QT2i3xhxWYpFjg2oKNw@mail.gmail.com>
References: <CAELivk+m1XxM+si6-HXY-0MGmUEMEEiEuvLwkkSjcfHmbVd_qQ@mail.gmail.com>
	<1335187432.31356.37.camel@brian-rcg>
	<CAELivkJ75R5ViPnN2QqRWhtx5zjGS3cHW9fsOLLy=V+e_WZU4A@mail.gmail.com>
	<CAPPM_gRu53PzJ5ArYR_N21HUYX=w0i9QT2i3xhxWYpFjg2oKNw@mail.gmail.com>
Message-ID: <CAELivkK577Ph0frZmF43N2qNZcAEwAK=Uvycq+Nz7bWZtw8o8g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120423/467cb7fb/attachment.pl>

From enricoschumann at yahoo.de  Mon Apr 23 19:21:13 2012
From: enricoschumann at yahoo.de (Enrico Schumann)
Date: Mon, 23 Apr 2012 19:21:13 +0200
Subject: [R-SIG-Finance] Help request
In-Reply-To: <CAP3H-gQFPH+Kf26Zf3Vsv+9XfXzW+oReYRvu9kvie5MRZ2Mf7g@mail.gmail.com>
References: <CAP3H-gQFPH+Kf26Zf3Vsv+9XfXzW+oReYRvu9kvie5MRZ2Mf7g@mail.gmail.com>
Message-ID: <4F958F89.4010504@yahoo.de>


Hi Sameh,

there are many people on this list who are much more knowledgable than I 
am -- and not just when it comes to the IBrokers package :-) (whose 
author/maintainer also is very active on this list).

I don't use IBrokers for trading, but the culprit seems to be reqIds; it 
does not seem to return an ID...


Regards,
Enrico

Am 23.04.2012 12:05, schrieb Sameh Rezeq:
> Hello Enrico,
>       I am interested in using R for IB interface. I am currently running
> the demo version and wanted your insight regarding a problem I am having.
>      I have this small program that opens a TWS connection with IB and tries
> to execute a simple order of BUY to the contract "GBP.JPY". The connection
> gets established but the order doesn't get executed. I tried to run a
> simple "reqHistoricalData" command to make sure that the environment I am
> operating under is functional and it was fine. Even though it allows me to
> load only 2 days worth of data, which I think it might be a limit for the
> demo users.
>      I am attaching the program below, if you will be kind to look at it and
> give me your feedback.
>      Also, another small manner, when I execute the command "tws<-
> twsconnect()", I get a pop-up window asking my permission to allows the
> access. Do you think there is an automatic way to enable that connection
> without having the pop-up window popping everytime I try to make a
> connection with IB?
>
> Many thanks for your help!!
> Sameh
>
>   #************************************************
> library("IBrokers")
>
> contr<- twsCurrency(symbol = "GBP", currency = "JPY")
> tws<- twsConnect() #sample(1e6,1))
> #results<- reqHistoricalData(tws,
> #                             Contract = contr,
> #                             #endDateTime = "20120301 09:00:00",
> #                             barSize = "5 mins",
> #                             duration = "2 D",
> #                             useRTH = 0,
> #                             whatToShow = "MIDPOINT")
>
> idx<- reqIds(tws)
>
> twsO<-
> twsOrder(idx,action="BUY",totalQuantity="18000",orderType="MKT",transmit=TRUE)
>
> twsPO<- placeOrder(tws,contr,twsO)
>
> twsDisconnect(tws)
> #********************************************************
>

-- 
Enrico Schumann
Lucerne, Switzerland
http://nmof.net


From ezivot at u.washington.edu  Mon Apr 23 20:29:39 2012
From: ezivot at u.washington.edu (Eric Zivot)
Date: Mon, 23 Apr 2012 11:29:39 -0700
Subject: [R-SIG-Finance] UW Computational Finance Students
Message-ID: <008001cd217f$0b88a480$2299ed80$@washington.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120423/9166ab1f/attachment.pl>

From e.daadmehr at yahoo.com  Mon Apr 23 20:57:15 2012
From: e.daadmehr at yahoo.com (Elham Daadmehr)
Date: Mon, 23 Apr 2012 11:57:15 -0700 (PDT)
Subject: [R-SIG-Finance] GARCH
Message-ID: <1335207435.92864.YahooMailClassic@web121402.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120423/bf71eff4/attachment.pl>

From me at censix.com  Mon Apr 23 21:13:59 2012
From: me at censix.com (me)
Date: Mon, 23 Apr 2012 21:13:59 +0200
Subject: [R-SIG-Finance] Help request
In-Reply-To: <4F958F89.4010504@yahoo.de>
References: <CAP3H-gQFPH+Kf26Zf3Vsv+9XfXzW+oReYRvu9kvie5MRZ2Mf7g@mail.gmail.com>
	<4F958F89.4010504@yahoo.de>
Message-ID: <20120423211359.4150aec3@desktop1>

Sameh

I am not the author of the IBrokers package, but I use it quite a bit.

Concerning the pop-up window asking you to allow connections to the
tws, I think there is a IB TWS setting in 'Configuration | API' that
allows you to disable this dialog.

Your code snippet looks ok. The issue seems to be that
you are not monitoring the replies that you will get from the IB TWS
once you have submitted your order, so your won't know if you had a
fill or if the order was canceled, etc.
For handling that you could use the "eWrapper" class (just
type ?eWrapper)

A more complex example (all source) is "qsiblive", which aims at
connecting R directly to the IB TWS/IB Gateway
and makes extensive use of the IBrokers package. You can download
"qsiblive" from my website http://censix.com 

Cheers

Soren

On Mon, 23 Apr 2012 19:21:13 +0200
Enrico Schumann <enricoschumann at yahoo.de> wrote:

> 
> Hi Sameh,
> 
> there are many people on this list who are much more knowledgable
> than I am -- and not just when it comes to the IBrokers package :-)
> (whose author/maintainer also is very active on this list).
> 
> I don't use IBrokers for trading, but the culprit seems to be reqIds;
> it does not seem to return an ID...
> 
> 
> Regards,
> Enrico
> 
> Am 23.04.2012 12:05, schrieb Sameh Rezeq:
> > Hello Enrico,
> >       I am interested in using R for IB interface. I am currently
> > running the demo version and wanted your insight regarding a
> > problem I am having. I have this small program that opens a TWS
> > connection with IB and tries to execute a simple order of BUY to
> > the contract "GBP.JPY". The connection gets established but the
> > order doesn't get executed. I tried to run a simple
> > "reqHistoricalData" command to make sure that the environment I am
> > operating under is functional and it was fine. Even though it
> > allows me to load only 2 days worth of data, which I think it might
> > be a limit for the demo users. I am attaching the program below, if
> > you will be kind to look at it and give me your feedback.
> >      Also, another small manner, when I execute the command "tws<-
> > twsconnect()", I get a pop-up window asking my permission to allows
> > the access. Do you think there is an automatic way to enable that
> > connection without having the pop-up window popping everytime I try
> > to make a connection with IB?
> >
> > Many thanks for your help!!
> > Sameh
> >
> >   #************************************************
> > library("IBrokers")
> >
> > contr<- twsCurrency(symbol = "GBP", currency = "JPY")
> > tws<- twsConnect() #sample(1e6,1))
> > #results<- reqHistoricalData(tws,
> > #                             Contract = contr,
> > #                             #endDateTime = "20120301 09:00:00",
> > #                             barSize = "5 mins",
> > #                             duration = "2 D",
> > #                             useRTH = 0,
> > #                             whatToShow = "MIDPOINT")
> >
> > idx<- reqIds(tws)
> >
> > twsO<-
> > twsOrder(idx,action="BUY",totalQuantity="18000",orderType="MKT",transmit=TRUE)
> >
> > twsPO<- placeOrder(tws,contr,twsO)
> >
> > twsDisconnect(tws)
> > #********************************************************
> >
> 



-- 

http://censix.com


From kryp33 at yahoo.com  Tue Apr 24 05:50:28 2012
From: kryp33 at yahoo.com (SW)
Date: Mon, 23 Apr 2012 20:50:28 -0700 (PDT)
Subject: [R-SIG-Finance] tradeStats vs table.AnnualizedReturns discrepancy
Message-ID: <1335239428.66550.YahooMailClassic@web161206.mail.bf1.yahoo.com>

Hello All,

I am wondering if anybody can help me to understand why I have a strange discrepancy between tradeStats and AnnulaizedReturns output for my strategy.
Here is what I have. I made a simple quantstrat model and as result I've got an array of trades which I feed to  tradeStrats function like this:
tstats <- tradeStats(Portfolio=port.name, Symbol=ticker)
and printout output for tstats shows "Net Profit = 680" positive and probably correct number. Then, I run the following 
rets <- PortfReturns(acct.name)
table.AnnualizedReturns(rets)
As result I have "Annualized Return = -0.0053" and it is negative...

So here is the dilemma: PnL positive, Return negative

In strategy there is only one account with one ticker and commission is not set. No open positions in the end.  (Full code below runs at 04/23/2012 in case you want to rerun it. change the total_hist.end variable at the top of file to the appropriate date.)
I would be much obliged for any suggestions.

Thanks,
Sergey 


======================
        .~.      
        /v\      Sergey W. Andreyev
       // \\     kryp33 at yahoo.com
      /(   )\
       ^`~'^
======================
======================

rm(list=ls(all=T))

#clean subspaces
unloadNamespace("quantstrat")
unloadNamespace("blotter")


library(zoo)
library(tseries)
library(quantmod)
library(blotter)
library(quantstrat)
library(PerformanceAnalytics)


#####################   INSTRUMENT INITIALIZATION   #######################
ticker="GSPC"
tickerY="^GSPC"
total_hist.start = as.Date("2011-04-02")
total_hist.end   = Sys.Date()
total_hist = total_hist.end - total_hist.start

currency("USD")
stock(ticker,currency="USD",multiplier=1)

getSymbols(tickerY,from=total_hist.start,to=total_hist.end,to.assign=TRUE)


####################   INIT PORTFOLIO AND ACCTS  ########################
init.date = initDate=total_hist.start-1
strat.name<- "MyStrat"
port.name <- "MyPort"
acct.name <- "MyAcct"

TradeSize = 1000
initEq=as.numeric( TradeSize*max(Ad(get(ticker)) ) )

port <- initPortf(port.name,ticker,initDate=init.date)
acct <- initAcct(acct.name,portfolios=port.name, initDate=init.date, initEq=initEq)
ords <- initOrders(portfolio=port.name,initDate=init.date)
strat<- strategy(strat.name)

#################  CREATE INDICATORS            ##########################
strat<-add.indicator(strategy = strat,name ="SMA",arguments=list(x = quote(Ad(mktdata)), n=50), label="SMA50")
# summary(strat)
# out <- applyIndicators(strat,mktdata=get(ticker))
# tail(out)
###########################################################################

#################  CREATE SIGNALS            ##############################
strat <- add.signal(strat,name="sigCrossover",arguments = list(columns=c("Adjusted","SMA50"),relationship="gt"),label="px.gt.SMA50")
strat <- add.signal(strat,name="sigCrossover",arguments = list(columns=c("Adjusted","SMA50"),relationship="lt"),label="px.lt.SMA50")
#out   <- applySignals(strat,mktdata=mktdata)
#head(out)


#################  CREATE RULES            ##########################
# go long when px > MA50
strat <- add.rule(strategy = strat, name='ruleSignal', arguments = list(sigcol="px.gt.SMA50", sigval=TRUE, orderqty=TradeSize, ordertype='market', orderside='long', pricemethod='market'), type='enter', path.dep=TRUE ) 
#exit when px<SMA50
strat <- add.rule(strategy = strat, name='ruleSignal', arguments = list(sigcol="px.lt.SMA50", sigval=TRUE, orderqty='all', ordertype='market', orderside='long', pricemethod='market'), type='exit', path.dep=TRUE) 
#out<-applyRules(port.name, ticker, strat, mktdata = px)
#head(out,100)

out<-try(applyStrategy(strategy=strat, portfolios=port.name))

updatePortf(Portfolio=port.name,Dates=paste("::",as.Date(Sys.time()),sep=''))
updateAcct(acct.name,Dates=paste(total_hist.start,total_hist.end,sep="::")) 
updateEndEq(acct.name,Dates=paste(total_hist.start,total_hist.end,sep="::"))
getEndEq(acct.name,Sys.time())

chart.Posn(Portfolio=port.name,Symbol=ticker)
plot(add_SMA(n=50,col=4, on=1, lwd=2))

rets <- PortfReturns(acct.name)
charts.PerformanceSummary(rets,geometric=FALSE,wealth.index=TRUE,colorset = bluefocus)

PA1.tab <- table.Arbitrary(rets, metrics=c("Return.cumulative","Return.annualized",   "SharpeRatio.annualized", "CalmarRatio"),metricsNames=c("Cumulative Return", "Annualized Return","Annualized Sharpe Ratio", "Calmar Ratio"))
PA2.tab <- table.Arbitrary(rets, metrics=c("StdDev.annualized", "maxDrawdown","VaR", "ES"),metricsNames=c("Annualized StdDev", "Max DrawDown","Value-at-Risk", "Conditional VaR"))
tab1 <- data.frame(rownames(PA1.tab),PA1.tab[,1],rownames(PA2.tab),PA2.tab[,1])
tab1

tstats <- tradeStats(Portfolio=port.name, Symbol=ticker)
res.tab1 <- cbind(c("Trades","Win Percent","Loss Percent","W/L Ratio"),c((tstats[,"Num.Trades"]-1)/2,tstats[,c("Percent.Positive","Percent.Negative")],  tstats[,"Percent.Positive"]/tstats[,"Percent.Negative"]))
res.tab2 <- cbind(c("Net Profit","Gross Profits","Gross Losses","Profit Factor"),c(tstats[,c("Net.Trading.PL","Gross.Profits","Gross.Losses","Profit.Factor")]))
res.tab3 <- cbind(c("Avg Trade","Avg Win","Avg Loss","Avg W/L Ratio"),c(tstats[,c("Avg.Trade.PL","Avg.Win.Trade","Avg.Losing.Trade","Avg.WinLoss.Ratio")]))
tab2 <- data.frame(res.tab1,res.tab2,res.tab3)
tab2

tab3 <- table.AnnualizedReturns(rets)
tab1
tab2
tab3


From brian at braverock.com  Tue Apr 24 14:48:58 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 24 Apr 2012 07:48:58 -0500
Subject: [R-SIG-Finance] tradeStats vs table.AnnualizedReturns
 discrepancy
In-Reply-To: <1335239428.66550.YahooMailClassic@web161206.mail.bf1.yahoo.com>
References: <1335239428.66550.YahooMailClassic@web161206.mail.bf1.yahoo.com>
Message-ID: <1335271738.31356.88.camel@brian-rcg>

On Mon, 2012-04-23 at 20:50 -0700, SW wrote:
> I am wondering if anybody can help me to understand why I have a
> strange discrepancy between tradeStats and AnnulaizedReturns output
> for my strategy.
> Here is what I have. I made a simple quantstrat model and as result
> I've got an array of trades which I feed to  tradeStrats function like
> this:
> tstats <- tradeStats(Portfolio=port.name, Symbol=ticker)
> and printout output for tstats shows "Net Profit = 680" positive and
> probably correct number. Then, I run the following 
> rets <- PortfReturns(acct.name)
> table.AnnualizedReturns(rets)
> As result I have "Annualized Return = -0.0053" and it is negative...
> 
> So here is the dilemma: PnL positive, Return negative
> 
> In strategy there is only one account with one ticker and commission
> is not set. No open positions in the end.  (Full code below runs at
> 04/23/2012 in case you want to rerun it. change the total_hist.end
> variable at the top of file to the appropriate date.)
> I would be much obliged for any suggestions. 

You've run into the difference between geometric and simple returns.

> table.AnnualizedReturns(rets,geometric=FALSE)
                            GSPC
Annualized Return         0.0005
Annualized Std Dev        0.1076
Annualized Sharpe (Rf=0%) 0.0042
> 680/initEq
[1] 0.0004791972


So, this looks correct...

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From kryp33 at yahoo.com  Tue Apr 24 16:26:19 2012
From: kryp33 at yahoo.com (SW)
Date: Tue, 24 Apr 2012 07:26:19 -0700 (PDT)
Subject: [R-SIG-Finance] tradeStats vs table.AnnualizedReturns
	discrepancy
In-Reply-To: <1335271738.31356.88.camel@brian-rcg>
Message-ID: <1335277579.69067.YahooMailClassic@web161205.mail.bf1.yahoo.com>

Thanks, Brian;
Makes perfect sense.

Best Regards,
Sergey 

> 
> You've run into the difference between geometric and simple
> returns.
> 
> > table.AnnualizedReturns(rets,geometric=FALSE)
> ? ? ? ? ? ? ? ?
> ? ? ? ? ? ? GSPC
> Annualized Return? ? ?
> ???0.0005
> Annualized Std Dev? ? ? ? 0.1076
> Annualized Sharpe (Rf=0%) 0.0042
> > 680/initEq
> [1] 0.0004791972
> 
> 
> So, this looks correct...
> 
> Regards,
> 
> ???- Brian
> 
> -- 
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
> 
>


From kktrash.k at gmail.com  Wed Apr 25 05:08:10 2012
From: kktrash.k at gmail.com (Karim)
Date: Wed, 25 Apr 2012 05:08:10 +0200
Subject: [R-SIG-Finance] Information
Message-ID: <4f976aa6.e249b40a.6026.ffffc639@mx.google.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120425/702a3683/attachment.pl>

From michael.weylandt at gmail.com  Wed Apr 25 05:16:10 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Tue, 24 Apr 2012 23:16:10 -0400
Subject: [R-SIG-Finance] Information
In-Reply-To: <4f976aa6.e249b40a.6026.ffffc639@mx.google.com>
References: <4f976aa6.e249b40a.6026.ffffc639@mx.google.com>
Message-ID: <CAAmySGPDU5ZNCYAiv1W2d8R5BVmXPL8Bgqg_vowW1e6xxq=e=w@mail.gmail.com>

I'm no Jeff Ryan, but I'd be willing to put money on him wanting to
ask what you've tried and what error message(s) you got? (As well as
system config details you get from sessionInfo() )

I just installed it with no problems (well, none that I can check
since i don't have Berkeley DB) straight from CRAN.

Michael

On Tue, Apr 24, 2012 at 11:08 PM, Karim <kktrash.k at gmail.com> wrote:
> Hello,
>
>
>
> I?m an R user and I?ve a problem installing package RBerkeley from Jefferey
> Ryan.
>
> I?ve subscribed to the mailing list (I have an email and a password)
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
> And I?d like to post a message to the mailing list in order to get a
> response from Jeffrey Ryan.
>
>
>
> Exactly as did M. Golam Sakline below :
>
>
>
> -----Message d'origine-----
>
> De : r-sig-finance-bounces at r-project.org
> [mailto:r-sig-finance-bounces at r-project.org] De la part de Jeffrey Ryan
> Envoy? : lundi 26 mars 2012 16:25 ? : Golam Sakline;
> r-sig-finance at r-project.org Objet : Re: [R-SIG-Finance] Numeric to
> timeSeries help
>
>
>
> ?merge.xts is what you need.
>
>
>
> It will behave like you'd expect in R - requiring a vector of length == nrow
> of your object, or will be recycled as needed. e.g. cbind(x, NA) will
> recycle NA accordingly
>
>
>
> HTH
>
> Jeff
>
>
>
> On 3/26/12 7:59 AM, "Golam Sakline" <golam.sakline at gmail.com> wrote:
>
>
>
>>Hi,
>
>>
>
>>Can someone quickly help me with few lines of code or point me to a
>
>>site that shows how to merge a numeric class object column with time
>
>>column of getSymbol object and plot it in quantmod chartSeries.
>
>>Much appreciated.
>
>>
>
>>Thanks in advance
>
>
>
> Could you tell me how to send (should I send it to
> r-sig-finance at r-project.org ?) a question and how to be sure that M. Jeffrey
> Ryan will get it?
>
>
>
> Thank you very much.
>
>
>
> Karim Kanoun
>
>
>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gordon.erlebach at gmail.com  Wed Apr 25 13:45:23 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Wed, 25 Apr 2012 07:45:23 -0400
Subject: [R-SIG-Finance] the ZigZag function
Message-ID: <CAELivkLixS0YO46mY1ZgrozRWpk6ajz=JKwC02PS720Qn0v13A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120425/fe818144/attachment.pl>

From heshriti at gmail.com  Wed Apr 25 14:57:49 2012
From: heshriti at gmail.com (Mahesh Krishnan)
Date: Wed, 25 Apr 2012 08:57:49 -0400
Subject: [R-SIG-Finance] Fund holdings
Message-ID: <CALSZ9w2SddrCa6giCoMrh6-4+rdvJzJxKij6KL+xxYJ35Lb6ww@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120425/bf5f7e9b/attachment.pl>

From gsee000 at gmail.com  Wed Apr 25 15:10:53 2012
From: gsee000 at gmail.com (G See)
Date: Wed, 25 Apr 2012 08:10:53 -0500
Subject: [R-SIG-Finance] Fund holdings
In-Reply-To: <CALSZ9w2SddrCa6giCoMrh6-4+rdvJzJxKij6KL+xxYJ35Lb6ww@mail.gmail.com>
References: <CALSZ9w2SddrCa6giCoMrh6-4+rdvJzJxKij6KL+xxYJ35Lb6ww@mail.gmail.com>
Message-ID: <CA+xi=qYUgw-suShxY0stv9A=agNKZfEj1GGw86afwn9F9owF-A@mail.gmail.com>

Hi Mahesh,

I'm not aware of an R function that gets the holdings of mutual funds,
but in my "qmao" package
(https://r-forge.r-project.org/R/?group_id=1113), the getHoldings
function will get the holdings and weights of iShares and Select
Sector SPDRs ETFs.

I also have some code that I haven't yet committed to the public
domain that will get the holdings of SPDRs (e.g. SPY, DIA), and Van
Eck funds (e.g. GDX, OIH) as well as a function that will get
historical holdings of iShares.  If this is of interest to anyone, I'd
be happy to make that code available.

Best,
Garrett

On Wed, Apr 25, 2012 at 7:57 AM, Mahesh Krishnan <heshriti at gmail.com> wrote:
> Hi,
>
> Is there an R function and data source for retrieving all mutual fund
> holdings. The closest I got was Blomberg, but fund -> MHD does not get all
> data in one shot. ?Plus RBloomberg doesn't work with their internal
> functions.
> I appreciate any help/ pointers that you can provide.
>
> Thanks,
> Mahesh.
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From josh.m.ulrich at gmail.com  Wed Apr 25 15:40:11 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Wed, 25 Apr 2012 08:40:11 -0500
Subject: [R-SIG-Finance] the ZigZag function
In-Reply-To: <CAELivkLixS0YO46mY1ZgrozRWpk6ajz=JKwC02PS720Qn0v13A@mail.gmail.com>
References: <CAELivkLixS0YO46mY1ZgrozRWpk6ajz=JKwC02PS720Qn0v13A@mail.gmail.com>
Message-ID: <CAPPM_gSxiDzvm-4_Orn9Zm7gFSv-eLohgRAOJFM_tWMLKBJGgg@mail.gmail.com>

On Wed, Apr 25, 2012 at 6:45 AM, Gordon Erlebacher
<gordon.erlebach at gmail.com> wrote:
> Hi,
>
> I am using the ZigZag function (which is more elegant than the one I
> wrote), and wish to only get the extrema, not the linearly interpolated
> lines. In the function, I'd like to remove the line:
>
> ? ? ? zz <- approx(zz, xout = 1:nn)$y
>
> Is this possible? If yes, how? I tried copying the function and using mine,
> but then I get errors such as naCheck not defined,
> which is surely an environment issue.
>
Technically, it's a namespace issue.  Use TTR:::naCheck to access the
function in your copy.  You also might be able to use findPeaks and
findValleys from quantmod to find the points you want, rather than
creating another function.

> ?Thanks,
>
> ? ? Gordon
>

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com


From gsee000 at gmail.com  Wed Apr 25 15:54:07 2012
From: gsee000 at gmail.com (G See)
Date: Wed, 25 Apr 2012 08:54:07 -0500
Subject: [R-SIG-Finance] Fund holdings
In-Reply-To: <CA+xi=qYUgw-suShxY0stv9A=agNKZfEj1GGw86afwn9F9owF-A@mail.gmail.com>
References: <CALSZ9w2SddrCa6giCoMrh6-4+rdvJzJxKij6KL+xxYJ35Lb6ww@mail.gmail.com>
	<CA+xi=qYUgw-suShxY0stv9A=agNKZfEj1GGw86afwn9F9owF-A@mail.gmail.com>
Message-ID: <CA+xi=qb3J=_uFzjpe2ais0opNK3P5YmH-PkQ5PAatCTumvfB9Q@mail.gmail.com>

All,

The code I mentioned is attached.

Garrett

On Wed, Apr 25, 2012 at 8:10 AM, G See <gsee000 at gmail.com> wrote:
> Hi Mahesh,
>
> I'm not aware of an R function that gets the holdings of mutual funds,
> but in my "qmao" package
> (https://r-forge.r-project.org/R/?group_id=1113), the getHoldings
> function will get the holdings and weights of iShares and Select
> Sector SPDRs ETFs.
>
> I also have some code that I haven't yet committed to the public
> domain that will get the holdings of SPDRs (e.g. SPY, DIA), and Van
> Eck funds (e.g. GDX, OIH) as well as a function that will get
> historical holdings of iShares. ?If this is of interest to anyone, I'd
> be happy to make that code available.
>
> Best,
> Garrett
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: getHoldings.SPDR.R
Type: application/octet-stream
Size: 1852 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120425/db964bc8/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: getHoldings.vaneck.R
Type: application/octet-stream
Size: 2098 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120425/db964bc8/attachment-0001.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: getHoldingsHistory.R
Type: application/octet-stream
Size: 1739 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120425/db964bc8/attachment-0002.obj>

From weihanliu2002 at yahoo.com  Thu Apr 26 04:00:02 2012
From: weihanliu2002 at yahoo.com (Wei-han Liu)
Date: Wed, 25 Apr 2012 19:00:02 -0700 (PDT)
Subject: [R-SIG-Finance] to make the finance package running
Message-ID: <1335405602.80182.YahooMailNeo@web161303.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120425/14272c23/attachment.pl>

From michael.weylandt at gmail.com  Thu Apr 26 06:13:07 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt <michael.weylandt@gmail.com>)
Date: Thu, 26 Apr 2012 00:13:07 -0400
Subject: [R-SIG-Finance] to make the finance package running
In-Reply-To: <1335405602.80182.YahooMailNeo@web161303.mail.bf1.yahoo.com>
References: <1335405602.80182.YahooMailNeo@web161303.mail.bf1.yahoo.com>
Message-ID: <388C168C-1996-49B2-B5CC-735094CDE617@gmail.com>

This isn't really a finance question, but do you have the source code? If you do, just use install.packages() with type = "source" and point to the appropriate tarball. 

The only somewhat difficult step might be if you need to add a namespace. 

Michael 

On Apr 25, 2012, at 10:00 PM, Wei-han Liu <weihanliu2002 at yahoo.com> wrote:

> Hi R users:
> 
> I tried to install a R finance package in its beta version. I believe it was developed several years ago and no longer maintained. The error message I got is listed below:
>> library(XXX)
> Error: package 'XXX' was built before R
> 2.10.0: please re-install it
> 
> Could somebody share some advice to make the package running under the current version of R?
> 
> Thanks.
> 
> Wei-han
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From michael.weylandt at gmail.com  Thu Apr 26 07:21:04 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Thu, 26 Apr 2012 01:21:04 -0400
Subject: [R-SIG-Finance] Information
In-Reply-To: <4f98d952.0850b40a.68d8.ffffbb11@mx.google.com>
References: <CAAmySGPDU5ZNCYAiv1W2d8R5BVmXPL8Bgqg_vowW1e6xxq=e=w@mail.gmail.com>
	<4f98d952.0850b40a.68d8.ffffbb11@mx.google.com>
Message-ID: <CAAmySGP+nz5FaeMk7TptCxGrt5vJCDOvigR1BMXK8DDXtSrUHw@mail.gmail.com>

Please reply to the list and not just me so others can benefit/help.

http://cran.r-project.org/web/packages/RBerkeley/index.html (the
install link) suggests RBerkeley is not supported for Windows so
unless you're willing to help with the port (or someone has done it
without publishing it) I think you may be out of luck.

Michael

On Thu, Apr 26, 2012 at 1:12 AM, Karim <kktrash.k at gmail.com> wrote:
> Thank you for your reply.
>
> 1) My session info :
>
> R version 2.14.1 (2011-12-22)
> Platform: i386-pc-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=French_France.1252 ?LC_CTYPE=French_France.1252
> LC_MONETARY=French_France.1252
> [4] LC_NUMERIC=C ? ? ? ? ? ? ? ? ? LC_TIME=French_France.1252
>
> attached base packages:
> [1] splines ? datasets ?stats ? ? graphics ?grDevices utils ? ? methods
> base
>
> other attached packages:
> ?[1] Hmisc_3.9-3 ? ? ? ? ? ? ? ? ?survival_2.36-10 ? ? ? ? ? ? igraph_0.5.54
>
> ?[4] fGarch_2110.80 ? ? ? ? ? ? ? fBasics_2110.79
> timeSeries_2130.92
> ?[7] PerformanceAnalytics_1.0.4.4 RTAQ_0.1
> timeDate_2131.00
> [10] quantstrat_0.6.4 ? ? ? ? ? ? blotter_0.8.4
> FinancialInstrument_0.13.6
> [13] quantmod_0.3-17 ? ? ? ? ? ? ?TTR_0.21-0 ? ? ? ? ? ? ? ? ? xts_0.8-2
>
> [16] zoo_1.7-7 ? ? ? ? ? ? ? ? ? ?Defaults_1.1-1
> randomForest_4.6-6
> [19] RRF_1.1 ? ? ? ? ? ? ? ? ? ? ?fractal_1.1-1
> scatterplot3d_0.3-33
> [22] akima_0.5-7 ? ? ? ? ? ? ? ? ?wmtsa_1.1-1 ? ? ? ? ? ? ? ? ?sapa_1.1-0
>
> [25] ifultools_1.1-2 ? ? ? ? ? ? ?MASS_7.3-16 ? ? ? ? ? ? ? ? ?splus2R_1.1-0
>
> [28] RODBC_1.3-4
>
> loaded via a namespace (and not attached):
> [1] cluster_1.14.1 grid_2.14.1 ? ?lattice_0.20-0 tools_2.14.1
>
> 2) The command I use for installing RBerkeley (and the subsequent warning
> message) :
>> install.packages("RBerkeley")
> Installing package(s) into ?C:/Users/Karim/Documents/R/win-library/2.14?
> (as ?lib? is unspecified)
> Warning in install.packages :
> ?package ?RBerkeley? is not available (for R version 2.14.1)
>
> I've installed Berkeley DB11gR2
>
> Thank you to tell me how to install RBerkeley if you have some information.
>
>
>
> -----Message d'origine-----
> De?: R. Michael Weylandt [mailto:michael.weylandt at gmail.com]
> Envoy??: mercredi 25 avril 2012 05:16
> ??: Karim
> Cc?: r-sig-finance at r-project.org
> Objet?: Re: [R-SIG-Finance] Information
>
> I'm no Jeff Ryan, but I'd be willing to put money on him wanting to
> ask what you've tried and what error message(s) you got? (As well as
> system config details you get from sessionInfo() )
>
> I just installed it with no problems (well, none that I can check
> since i don't have Berkeley DB) straight from CRAN.
>
> Michael
>
> On Tue, Apr 24, 2012 at 11:08 PM, Karim <kktrash.k at gmail.com> wrote:
>> Hello,
>>
>>
>>
>> I?m an R user and I?ve a problem installing package RBerkeley from
> Jefferey
>> Ryan.
>>
>> I?ve subscribed to the mailing list (I have an email and a password)
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>
>> And I?d like to post a message to the mailing list in order to get a
>> response from Jeffrey Ryan.
>>
>>
>>
>> Exactly as did M. Golam Sakline below :
>>
>>
>>
>> -----Message d'origine-----
>>
>> De : r-sig-finance-bounces at r-project.org
>> [mailto:r-sig-finance-bounces at r-project.org] De la part de Jeffrey Ryan
>> Envoy? : lundi 26 mars 2012 16:25 ? : Golam Sakline;
>> r-sig-finance at r-project.org Objet : Re: [R-SIG-Finance] Numeric to
>> timeSeries help
>>
>>
>>
>> ?merge.xts is what you need.
>>
>>
>>
>> It will behave like you'd expect in R - requiring a vector of length ==
> nrow
>> of your object, or will be recycled as needed. e.g. cbind(x, NA) will
>> recycle NA accordingly
>>
>>
>>
>> HTH
>>
>> Jeff
>>
>>
>>
>> On 3/26/12 7:59 AM, "Golam Sakline" <golam.sakline at gmail.com> wrote:
>>
>>
>>
>>>Hi,
>>
>>>
>>
>>>Can someone quickly help me with few lines of code or point me to a
>>
>>>site that shows how to merge a numeric class object column with time
>>
>>>column of getSymbol object and plot it in quantmod chartSeries.
>>
>>>Much appreciated.
>>
>>>
>>
>>>Thanks in advance
>>
>>
>>
>> Could you tell me how to send (should I send it to
>> r-sig-finance at r-project.org ?) a question and how to be sure that M.
> Jeffrey
>> Ryan will get it?
>>
>>
>>
>> Thank you very much.
>>
>>
>>
>> Karim Kanoun
>>
>>
>>
>>
>> ? ? ? ?[[alternative HTML version deleted]]
>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
> should go.
> -----
> Aucun virus trouv? dans ce message.
> Analyse effectu?e par AVG - www.avg.fr
> Version: 2012.0.1913 / Base de donn?es virale: 2411/4957 - Date: 24/04/2012
>


From gordon.erlebach at gmail.com  Thu Apr 26 22:55:10 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Thu, 26 Apr 2012 16:55:10 -0400
Subject: [R-SIG-Finance] the ZigZag function
In-Reply-To: <CAELivkLixS0YO46mY1ZgrozRWpk6ajz=JKwC02PS720Qn0v13A@mail.gmail.com>
References: <CAELivkLixS0YO46mY1ZgrozRWpk6ajz=JKwC02PS720Qn0v13A@mail.gmail.com>
Message-ID: <CAELivkKmiifjdZGAoqQpjAmm1oH21y04KxJz2sPv6X8GFU-2eQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120426/e8d3bf01/attachment.pl>

From andres.susrud at gmail.com  Thu Apr 26 23:01:25 2012
From: andres.susrud at gmail.com (Andres Susrud)
Date: Thu, 26 Apr 2012 23:01:25 +0200
Subject: [R-SIG-Finance] trayport / Genium INET api
Message-ID: <CA+ZiApy0HVpPrggaDDOizcou4m7LrDgEnX74WtayB-3uzrDzbw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120426/55d40123/attachment.pl>

From gsee000 at gmail.com  Thu Apr 26 23:49:35 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 26 Apr 2012 16:49:35 -0500
Subject: [R-SIG-Finance] Using attachSymbols with non-default argument
	values (Was: the ZigZag function)
Message-ID: <CA+xi=qb911GvUwOUs3k0BuftY-OpRFNT_48YtBJtz28eLkLS4Q@mail.gmail.com>

Gordon,

The way I did it was by storing other arguments/values in the DDB object.

I did this for other getSymbols methods, but not for getSymbols.yahoo.
 Since you asked, I mashed together some code that will do what you
ask.  (see attached).

For this solution, I replaced create.binding, attachSymbols, and
DDB_Yahoo.  I don't know that all of that is necessary.  Anyway, if
you source the attached script, then you can do this.

> attachSymbols2(DB=DDB_Yahoo2(from=Sys.Date()-150))
> head(DIA)
DIA not in memory. fetching....
           DIA.Open DIA.High DIA.Low DIA.Close DIA.Volume DIA.Adjusted
2011-11-28   114.78   115.48  114.31    115.10    6666100       113.96
2011-11-29   115.32   116.18  115.11    115.56    5325400       114.41
2011-11-30   118.41   120.39  118.41    120.19   11581500       119.00
2011-12-01   120.01   120.55  119.66    120.13    5437700       118.94
2011-12-02   121.22   121.40  120.00    120.06    5584400       118.87
2011-12-05   121.77   121.85  120.21    120.95    6285400       119.75


Best,
Garrett

On Thu, Apr 26, 2012 at 3:55 PM, Gordon Erlebacher
<gordon.erlebach at gmail.com> wrote:
> Hi,
>
> I'd like to use attachSymbols() to create an on-demand database. I have two
> questions:
>
> 1) I'd like to restrict the stocks to the past 150 days. I found that
> quantmod:::create.binding ?uses the function "getSymbols", which allows a
> range. But how to change the function quantmod:::create.binding to use a
> version of getSymbols() with a different date range? Alternatively, how to
> replace "quantmod:::create.binding" with my own version such that any
> function in quantmod that uses create.binding will use my version. Thanks.
>
> Or there is an easier way to restrict the range of symbols retrieved on
> demand.
>
> Thanks!
>
> ? ?Gordon
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: attachSymbolsWithArgs.R
Type: application/octet-stream
Size: 5379 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120426/2745388d/attachment.obj>

From student.northwestern at gmail.com  Fri Apr 27 00:14:36 2012
From: student.northwestern at gmail.com (jim green)
Date: Thu, 26 Apr 2012 15:14:36 -0700 (PDT)
Subject: [R-SIG-Finance] Strange results from Quantstrat
In-Reply-To: <d2007c2a800092ec60c009eeee39640f@tweb07-2.nm>
References: <d2007c2a800092ec60c009eeee39640f@tweb07-2.nm>
Message-ID: <1335478476364-4591150.post@n4.nabble.com>

I was testing the attached code and I found that in the testSymbols file, it
contains duplicate timestamp rows, after I removed them, the strange
behavior goes away. 

Jim.



--
View this message in context: http://r.789695.n4.nabble.com/Strange-results-from-Quantstrat-tp4230979p4591150.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From gordon.erlebach at gmail.com  Fri Apr 27 00:22:28 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Thu, 26 Apr 2012 18:22:28 -0400
Subject: [R-SIG-Finance] Using attachSymbols with non-default argument
 values (Was: the ZigZag function)
In-Reply-To: <CA+xi=qb911GvUwOUs3k0BuftY-OpRFNT_48YtBJtz28eLkLS4Q@mail.gmail.com>
References: <CA+xi=qb911GvUwOUs3k0BuftY-OpRFNT_48YtBJtz28eLkLS4Q@mail.gmail.com>
Message-ID: <CAELivk+rWceQNfEKh7Gd5QKV=JO9EmLeUoCJwN7zmuoR_mZLkg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120426/a1e5da3a/attachment.pl>

From brian at braverock.com  Fri Apr 27 00:39:37 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 26 Apr 2012 17:39:37 -0500
Subject: [R-SIG-Finance] Using attachSymbols with non-default argument
 values (Was: the ZigZag function)
In-Reply-To: <CAELivk+rWceQNfEKh7Gd5QKV=JO9EmLeUoCJwN7zmuoR_mZLkg@mail.gmail.com>
References: <CA+xi=qb911GvUwOUs3k0BuftY-OpRFNT_48YtBJtz28eLkLS4Q@mail.gmail.com>
	<CAELivk+rWceQNfEKh7Gd5QKV=JO9EmLeUoCJwN7zmuoR_mZLkg@mail.gmail.com>
Message-ID: <1335479977.19734.20.camel@brian-rcg>

On Thu, 2012-04-26 at 18:22 -0400, Gordon Erlebacher wrote:
> I wish to keep the last 150 days of 7000 stocks on disk. Every day, I
> would like to run an update that removes the earliest entry of every
> stock, and stores the latest entry of every stock. So cache size
> remains constant, but contents change. 
> Any ideas? Am I clear?

Disk is cheap, and getSymbols supports from and to dates.

Buy more disk.


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From gsee000 at gmail.com  Fri Apr 27 00:40:32 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 26 Apr 2012 17:40:32 -0500
Subject: [R-SIG-Finance] Using attachSymbols with non-default argument
 values (Was: the ZigZag function)
In-Reply-To: <CAELivk+rWceQNfEKh7Gd5QKV=JO9EmLeUoCJwN7zmuoR_mZLkg@mail.gmail.com>
References: <CA+xi=qb911GvUwOUs3k0BuftY-OpRFNT_48YtBJtz28eLkLS4Q@mail.gmail.com>
	<CAELivk+rWceQNfEKh7Gd5QKV=JO9EmLeUoCJwN7zmuoR_mZLkg@mail.gmail.com>
Message-ID: <CA+xi=qZGdBRAqHLX5W47grk8MyQb_QJ1HmCbcyCw9wKv1mYYyA@mail.gmail.com>

I suggest re-downloading all 150 days each day instead of downloading
1 day, and deleting a day.

I doubt it will take any longer to download 150 days from yahoo than
it would to download 1 day.  To download 7,000 symbols, you'll most
likely have to add a Sys.sleep call between your calls to getSymbols.
You'll also probably want to wrap those calls in a while loop that
retries a number of times if there were errors downloading.  I don't
think you want to use attachSymbols for this.

Also, to delete the first day, you have to load all data from disk first.

Garrett

On Thu, Apr 26, 2012 at 5:22 PM, Gordon Erlebacher
<gordon.erlebach at gmail.com> wrote:
> Thanks Garrett. I thought about this solution on my way home from work. Glad
> I did not have to do it. So here is a harder problem, but one you might have
> solved, or might need to solve.
>
> I wish to keep the last 150 days of 7000 stocks on disk. Every day, I would
> like to run an update that removes the earliest entry of every stock, and
> stores the latest entry of every stock. So cache size remains constant, but
> contents change.
> Any ideas? Am I clear?
>
> ? ?thanks,
>
> ? ? Gordon


From gordon.erlebach at gmail.com  Fri Apr 27 00:46:13 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Thu, 26 Apr 2012 18:46:13 -0400
Subject: [R-SIG-Finance] Using attachSymbols with non-default argument
 values (Was: the ZigZag function)
In-Reply-To: <1335479977.19734.20.camel@brian-rcg>
References: <CA+xi=qb911GvUwOUs3k0BuftY-OpRFNT_48YtBJtz28eLkLS4Q@mail.gmail.com>
	<CAELivk+rWceQNfEKh7Gd5QKV=JO9EmLeUoCJwN7zmuoR_mZLkg@mail.gmail.com>
	<1335479977.19734.20.camel@brian-rcg>
Message-ID: <CAELivkJRyjE=BV6GLT5k0hbE8_z2zeLWVRJruV9g-BfbuvvqkA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120426/85b6d43e/attachment.pl>

From gsee000 at gmail.com  Fri Apr 27 00:49:46 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 26 Apr 2012 17:49:46 -0500
Subject: [R-SIG-Finance] Using attachSymbols with non-default argument
 values (Was: the ZigZag function)
In-Reply-To: <CAELivkJRyjE=BV6GLT5k0hbE8_z2zeLWVRJruV9g-BfbuvvqkA@mail.gmail.com>
References: <CA+xi=qb911GvUwOUs3k0BuftY-OpRFNT_48YtBJtz28eLkLS4Q@mail.gmail.com>
	<CAELivk+rWceQNfEKh7Gd5QKV=JO9EmLeUoCJwN7zmuoR_mZLkg@mail.gmail.com>
	<1335479977.19734.20.camel@brian-rcg>
	<CAELivkJRyjE=BV6GLT5k0hbE8_z2zeLWVRJruV9g-BfbuvvqkA@mail.gmail.com>
Message-ID: <CA+xi=qZtkUDpnQ9A7oF-CsXV7KWjFK8R-+3NHJQdvN0TgeaTMg@mail.gmail.com>

get("AAPL")

But, see my last e-mail about not using attachSymbols for this. ;-)

Garrett

On Thu, Apr 26, 2012 at 5:46 PM, Gordon Erlebacher
<gordon.erlebach at gmail.com> wrote:
> Hi Brian,
>
> I have huge amounts of disk. The issue is time efficiency. Why download 150
> days of 7000 stocks each day, when I need only download 1 day of each
> stock. Of course, I can write my own caching system, but why duplicate what
> somebody may have done already. I am relatively new to R, but I have done
> similar things in other computer languages (not in Finance though).
>
> On an aside, using attachSymbols, I can load on demand. I would like to
> cycle through the list of 7000 stocks. I can get the list, but given "AAPL"
> for example, I need to execute AAPL. I do not know how to do this yet.
>
> ? Thanks for the input!
>
> ? ? Gordon
>
>
>
>
> On Thu, Apr 26, 2012 at 6:39 PM, Brian G. Peterson <brian at braverock.com>wrote:
>
>> On Thu, 2012-04-26 at 18:22 -0400, Gordon Erlebacher wrote:
>> > I wish to keep the last 150 days of 7000 stocks on disk. Every day, I
>> > would like to run an update that removes the earliest entry of every
>> > stock, and stores the latest entry of every stock. So cache size
>> > remains constant, but contents change.
>> > Any ideas? Am I clear?
>>
>> Disk is cheap, and getSymbols supports from and to dates.
>>
>> Buy more disk.
>>
>>
>> --
>> Brian G. Peterson
>> http://braverock.com/brian/
>> Ph: 773-459-4973
>> IM: bgpbraverock
>>
>>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Fri Apr 27 01:00:15 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 26 Apr 2012 18:00:15 -0500
Subject: [R-SIG-Finance] Using attachSymbols with non-default argument
 values (Was: the ZigZag function)
In-Reply-To: <CA+xi=qZtkUDpnQ9A7oF-CsXV7KWjFK8R-+3NHJQdvN0TgeaTMg@mail.gmail.com>
References: <CA+xi=qb911GvUwOUs3k0BuftY-OpRFNT_48YtBJtz28eLkLS4Q@mail.gmail.com>
	<CAELivk+rWceQNfEKh7Gd5QKV=JO9EmLeUoCJwN7zmuoR_mZLkg@mail.gmail.com>
	<1335479977.19734.20.camel@brian-rcg>
	<CAELivkJRyjE=BV6GLT5k0hbE8_z2zeLWVRJruV9g-BfbuvvqkA@mail.gmail.com>
	<CA+xi=qZtkUDpnQ9A7oF-CsXV7KWjFK8R-+3NHJQdvN0TgeaTMg@mail.gmail.com>
Message-ID: <CA+xi=qZJV9sUobNh=XFHgOyXepuM4cnEKADc9nNiU57a37Nhhw@mail.gmail.com>

I'd do something like this, which is effectively the same as using
attachSymbols with a cache directory. (But I'm pretty sure this will
fail at some point in the data download process because of yahoo 404
errors)

library(FinancialInstrument)
library(quantmod)

s <- quantmod:::getSymbolsDB()
getSymbols(s, src='yahoo', from=Sys.Date()-150)
saveSymbols.common(s, "/path/to/storage/dir", extension='RData')

# Then, to load from disk:
getSymbols(s, src='FI', dir="/path/to/storage/dir/",
split_method='common', extension='RData')

Garrett

On Thu, Apr 26, 2012 at 5:49 PM, G See <gsee000 at gmail.com> wrote:
> get("AAPL")
>
> But, see my last e-mail about not using attachSymbols for this. ;-)
>
> Garrett
>
> On Thu, Apr 26, 2012 at 5:46 PM, Gordon Erlebacher
> <gordon.erlebach at gmail.com> wrote:
>> Hi Brian,
>>
>> I have huge amounts of disk. The issue is time efficiency. Why download 150
>> days of 7000 stocks each day, when I need only download 1 day of each
>> stock. Of course, I can write my own caching system, but why duplicate what
>> somebody may have done already. I am relatively new to R, but I have done
>> similar things in other computer languages (not in Finance though).
>>
>> On an aside, using attachSymbols, I can load on demand. I would like to
>> cycle through the list of 7000 stocks. I can get the list, but given "AAPL"
>> for example, I need to execute AAPL. I do not know how to do this yet.
>>
>> ? Thanks for the input!
>>
>> ? ? Gordon


From patrick at burns-stat.com  Fri Apr 27 09:54:27 2012
From: patrick at burns-stat.com (Patrick Burns)
Date: Fri, 27 Apr 2012 08:54:27 +0100
Subject: [R-SIG-Finance] Using attachSymbols with non-default argument
 values (Was: the ZigZag function)
In-Reply-To: <CAELivkJRyjE=BV6GLT5k0hbE8_z2zeLWVRJruV9g-BfbuvvqkA@mail.gmail.com>
References: <CA+xi=qb911GvUwOUs3k0BuftY-OpRFNT_48YtBJtz28eLkLS4Q@mail.gmail.com>
	<CAELivk+rWceQNfEKh7Gd5QKV=JO9EmLeUoCJwN7zmuoR_mZLkg@mail.gmail.com>
	<1335479977.19734.20.camel@brian-rcg>
	<CAELivkJRyjE=BV6GLT5k0hbE8_z2zeLWVRJruV9g-BfbuvvqkA@mail.gmail.com>
Message-ID: <4F9A50B3.8000402@burns-stat.com>

One reason to duplicate is adjustments --
the adjusted close changes over time for
the same day.

Pat

On 26/04/2012 23:46, Gordon Erlebacher wrote:
> Hi Brian,
>
> I have huge amounts of disk. The issue is time efficiency. Why download 150
> days of 7000 stocks each day, when I need only download 1 day of each
> stock. Of course, I can write my own caching system, but why duplicate what
> somebody may have done already. I am relatively new to R, but I have done
> similar things in other computer languages (not in Finance though).
>
> On an aside, using attachSymbols, I can load on demand. I would like to
> cycle through the list of 7000 stocks. I can get the list, but given "AAPL"
> for example, I need to execute AAPL. I do not know how to do this yet.
>
>     Thanks for the input!
>
>       Gordon
>
>
>
>
> On Thu, Apr 26, 2012 at 6:39 PM, Brian G. Peterson<brian at braverock.com>wrote:
>
>> On Thu, 2012-04-26 at 18:22 -0400, Gordon Erlebacher wrote:
>>> I wish to keep the last 150 days of 7000 stocks on disk. Every day, I
>>> would like to run an update that removes the earliest entry of every
>>> stock, and stores the latest entry of every stock. So cache size
>>> remains constant, but contents change.
>>> Any ideas? Am I clear?
>>
>> Disk is cheap, and getSymbols supports from and to dates.
>>
>> Buy more disk.
>>
>>
>> --
>> Brian G. Peterson
>> http://braverock.com/brian/
>> Ph: 773-459-4973
>> IM: bgpbraverock
>>
>>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From jpokman at gmail.com  Sat Apr 28 08:34:25 2012
From: jpokman at gmail.com (jpman)
Date: Fri, 27 Apr 2012 23:34:25 -0700 (PDT)
Subject: [R-SIG-Finance] Indexing Package
Message-ID: <1335594865372-4594298.post@n4.nabble.com>

Hi, does anyone know where I can download the "indexing" package created by
Jeff Ryan?  Thanks.

--
View this message in context: http://r.789695.n4.nabble.com/Indexing-Package-tp4594298p4594298.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From haipinglan at gmail.com  Sat Apr 28 10:14:59 2012
From: haipinglan at gmail.com (Haiping LAN)
Date: Sat, 28 Apr 2012 16:14:59 +0800
Subject: [R-SIG-Finance] about an error of xts
In-Reply-To: <1335193707.31356.51.camel@brian-rcg>
References: <CAM4Kd2HPJjDpxQBsoMhS05G80Pi8A9ptBWE6YLTd1d_Utba5NQ@mail.gmail.com>
	<CAAmySGPaBG9SzB3uSi=+kt=mxZMNtL0HQiFTL+ihkzjcUrmQdQ@mail.gmail.com>
	<1335193707.31356.51.camel@brian-rcg>
Message-ID: <CAM4Kd2F-ugWybG+=to3VCggFJ_enGvwzkB8NrW0x7CVC9h6rBw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120428/18ffe803/attachment.pl>

From patrick at burns-stat.com  Sat Apr 28 10:20:58 2012
From: patrick at burns-stat.com (Patrick Burns)
Date: Sat, 28 Apr 2012 09:20:58 +0100
Subject: [R-SIG-Finance] Indexing Package
In-Reply-To: <1335594865372-4594298.post@n4.nabble.com>
References: <1335594865372-4594298.post@n4.nabble.com>
Message-ID: <4F9BA86A.5000502@burns-stat.com>

I suspect you are looking for 'xts'.

Available at all good CRAN mirrors.

Pat

On 28/04/2012 07:34, jpman wrote:
> Hi, does anyone know where I can download the "indexing" package created by
> Jeff Ryan?  Thanks.
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Indexing-Package-tp4594298p4594298.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From josh.m.ulrich at gmail.com  Sat Apr 28 11:05:01 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sat, 28 Apr 2012 04:05:01 -0500
Subject: [R-SIG-Finance] Indexing Package
In-Reply-To: <1335594865372-4594298.post@n4.nabble.com>
References: <1335594865372-4594298.post@n4.nabble.com>
Message-ID: <CAPPM_gTJ3riz7R3X6J-38PF7RCo+OSYsc5XS4fmHp7UdRW_ihg@mail.gmail.com>

On Sat, Apr 28, 2012 at 1:34 AM, jpman <jpokman at gmail.com> wrote:
> Hi, does anyone know where I can download the "indexing" package created by
> Jeff Ryan? ?Thanks.
>
R-forge:
http://r-forge.r-project.org/projects/indexing/

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com


From jpokman at gmail.com  Sat Apr 28 11:41:25 2012
From: jpokman at gmail.com (jpman)
Date: Sat, 28 Apr 2012 02:41:25 -0700 (PDT)
Subject: [R-SIG-Finance] Indexing Package
In-Reply-To: <CAPPM_gTJ3riz7R3X6J-38PF7RCo+OSYsc5XS4fmHp7UdRW_ihg@mail.gmail.com>
References: <1335594865372-4594298.post@n4.nabble.com>
	<CAPPM_gTJ3riz7R3X6J-38PF7RCo+OSYsc5XS4fmHp7UdRW_ihg@mail.gmail.com>
Message-ID: <CAHmW4w6pvk0drb3JW1W4WstrFBEC9YNAGvJFBBB1hVnpX2QRTw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120428/bd5d7d25/attachment.pl>

From brian at braverock.com  Sat Apr 28 12:22:22 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sat, 28 Apr 2012 05:22:22 -0500
Subject: [R-SIG-Finance] Indexing Package
In-Reply-To: <CAHmW4w6pvk0drb3JW1W4WstrFBEC9YNAGvJFBBB1hVnpX2QRTw@mail.gmail.com>
References: <1335594865372-4594298.post@n4.nabble.com>
	<CAPPM_gTJ3riz7R3X6J-38PF7RCo+OSYsc5XS4fmHp7UdRW_ihg@mail.gmail.com>
	<CAHmW4w6pvk0drb3JW1W4WstrFBEC9YNAGvJFBBB1hVnpX2QRTw@mail.gmail.com>
Message-ID: <1335608542.11550.3.camel@brian-desktop>

R-Forge is where the code lives.  If you want to use bleeding-edge code,
you should probably sort out how to check it out and build the package
from source, rather than relying on R-Forge's notoriously finicky build
servers.  I recommend the R-Forge user's manual and 'Writing R
Extensions' for pointers. 

On Sat, 2012-04-28 at 02:41 -0700, jpman wrote:
> Hi Joshua,
> I clicked into your R-forge link, but the Build Status is "Failed to
> Build".  Do you know if there is another place I can download the package?
> Thanks.
> 
> On Sat, Apr 28, 2012 at 5:06 PM, Joshua Ulrich [via R] <
> ml-node+s789695n4594459h75 at n4.nabble.com> wrote:
> 
> > On Sat, Apr 28, 2012 at 1:34 AM, jpman <[hidden email]<http://user/SendEmail.jtp?type=node&node=4594459&i=0>>
> > wrote:
> > > Hi, does anyone know where I can download the "indexing" package created
> > by
> > > Jeff Ryan?  Thanks.
> > >
> > R-forge:
> > http://r-forge.r-project.org/projects/indexing/
> >
> > Best,
> > --
> > Joshua Ulrich  |  FOSS Trading: www.fosstrading.com
> >
> > R/Finance 2012: Applied Finance with R
> > www.RinFinance.com
> >
> > _______________________________________________
> > [hidden email] <http://user/SendEmail.jtp?type=node&node=4594459&i=1>mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions
> > should go.
> >
> >
> > ------------------------------
> >  If you reply to this email, your message will be added to the discussion
> > below:
> > http://r.789695.n4.nabble.com/Indexing-Package-tp4594298p4594459.html
> >  To unsubscribe from Indexing Package, click here<http://r.789695.n4.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=4594298&code=anBva21hbkBnbWFpbC5jb218NDU5NDI5OHwxMDA0MTU3ODEx>
> > .
> > NAML<http://r.789695.n4.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
> >
> 
> 
> --
> View this message in context: http://r.789695.n4.nabble.com/Indexing-Package-tp4594298p4594483.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From josh.m.ulrich at gmail.com  Sat Apr 28 12:28:25 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sat, 28 Apr 2012 05:28:25 -0500
Subject: [R-SIG-Finance] Indexing Package
In-Reply-To: <CAHmW4w6pvk0drb3JW1W4WstrFBEC9YNAGvJFBBB1hVnpX2QRTw@mail.gmail.com>
References: <1335594865372-4594298.post@n4.nabble.com>
	<CAPPM_gTJ3riz7R3X6J-38PF7RCo+OSYsc5XS4fmHp7UdRW_ihg@mail.gmail.com>
	<CAHmW4w6pvk0drb3JW1W4WstrFBEC9YNAGvJFBBB1hVnpX2QRTw@mail.gmail.com>
Message-ID: <CAPPM_gTVrxppuYzuRVVsoGVigJSr=_k81tzq+nEsBB+zYOV6Ow@mail.gmail.com>

On Sat, Apr 28, 2012 at 4:41 AM, jpman <jpokman at gmail.com> wrote:
> Hi Joshua,
> I clicked into your R-forge link, but the Build Status is "Failed to
> Build". ?Do you know if there is another place I can download the package?
>
"Failed to Build" means the R-forge build system couldn't build the
package.  This does not preclude you from checking out the source code
and building the package yourself.  R-forge != CRAN.  If you're using
code that is still in development, you really should make yourself
familiar with the package building/checking process.
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com


> On Sat, Apr 28, 2012 at 5:06 PM, Joshua Ulrich [via R] <
> ml-node+s789695n4594459h75 at n4.nabble.com> wrote:
>
>> On Sat, Apr 28, 2012 at 1:34 AM, jpman <[hidden email]<http://user/SendEmail.jtp?type=node&node=4594459&i=0>>
>> wrote:
>> > Hi, does anyone know where I can download the "indexing" package created
>> by
>> > Jeff Ryan? ?Thanks.
>> >
>> R-forge:
>> http://r-forge.r-project.org/projects/indexing/
>>
>> Best,
>> --
>> Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com
>>
>> R/Finance 2012: Applied Finance with R
>> www.RinFinance.com
>>


From brian at braverock.com  Sat Apr 28 12:31:56 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sat, 28 Apr 2012 05:31:56 -0500
Subject: [R-SIG-Finance] about an error of xts
In-Reply-To: <CAM4Kd2F-ugWybG+=to3VCggFJ_enGvwzkB8NrW0x7CVC9h6rBw@mail.gmail.com>
References: <CAM4Kd2HPJjDpxQBsoMhS05G80Pi8A9ptBWE6YLTd1d_Utba5NQ@mail.gmail.com>
	<CAAmySGPaBG9SzB3uSi=+kt=mxZMNtL0HQiFTL+ihkzjcUrmQdQ@mail.gmail.com>
	<1335193707.31356.51.camel@brian-rcg>
	<CAM4Kd2F-ugWybG+=to3VCggFJ_enGvwzkB8NrW0x7CVC9h6rBw@mail.gmail.com>
Message-ID: <1335609116.11550.10.camel@brian-desktop>

On Sat, 2012-04-28 at 16:14 +0800, Haiping LAN wrote:
> Dear Brian,  Michael  and Db.
> 
> Thanks for all your suggests.
> I tried all your hints. But i found the problem remains, and still shows "
> order.by requires an appropriate time-based object"
> 
> it sounds strange.

If you are going to persist in suggesting that a bug exists, then please
provide a reproducible example.  

>From your original message and the suggestions you've received, the
complete example would be:

#########
require(quantmod)
getSymbols('^GSPC')

ex.model <- specifyModel(T.ind(GSPC) ~ Delt(Cly,k=1:3))

T.ind <- function(quotes,tgt.margin=0.025,n.days=10) {
  v <- apply(HLC(quotes),1,mean)
  r <- matrix(NA,ncol=n.days,nrow=NROW(quotes))
  for(x in 1:n.days) r[,x] <- Next(Delt(v,k=x),x)
  x <- apply(r,1,function(x) sum(x[x > tgt.margin | x < -tgt.margin]))
  if (is.xts(quotes)) xts(x,time(quotes)) else x
}

ex.model.Cl <- specifyModel(T.ind(GSPC) ~ Delt(Cl(GSPC),k=1:3))
ex.model.Ad <- specifyModel(T.ind(GSPC) ~ Delt(Ad(GSPC),k=1:3))
#########

This works for me.  

Where, specifically, do you think there is still a problem?

I don't see any evidence of a bug here in quantmod, xts, or lm.

   - Brian

> On 23 April 2012 23:08, Brian G. Peterson <brian at braverock.com> wrote:
> 
> > On Mon, 2012-04-23 at 11:03 -0400, R. Michael Weylandt wrote:
> > > In addition to what's been said, you could much more easily write:
> > >
> > > GSPC <- getSymbols("^GSPC", from = "2000-01-01", auto.assign = F)
> >
> > I'll make it simpler still...
> >
> > getSymbols("^GSPC", from = "2000-01-01")
> >
> > which will create object 'GSPC' and avoids the frowned upon use of 'F'
> > for FALSE (which can easily collide with a variable)
> >
> > Regards,
> >
> >   - Brian


From lunamoonmoon at gmail.com  Sun Apr 29 03:46:48 2012
From: lunamoonmoon at gmail.com (Luna)
Date: Sat, 28 Apr 2012 20:46:48 -0500
Subject: [R-SIG-Finance] Help! NAs and errors in ugarchfit ...
Message-ID: <CAPNjSFYsy+TTkwycoOMJ5YhXXK9qzDgQHW8w0-9umcctwU_Eog@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120428/bac11b5b/attachment.pl>

From alexios at 4dscape.com  Sun Apr 29 06:52:35 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Sun, 29 Apr 2012 05:52:35 +0100
Subject: [R-SIG-Finance] Help! NAs and errors in ugarchfit ...
In-Reply-To: <CAPNjSFYsy+TTkwycoOMJ5YhXXK9qzDgQHW8w0-9umcctwU_Eog@mail.gmail.com>
References: <CAPNjSFYsy+TTkwycoOMJ5YhXXK9qzDgQHW8w0-9umcctwU_Eog@mail.gmail.com>
Message-ID: <4F9CC913.7060400@4dscape.com>

Looking at the log-likelihood the solver did not find a set of feasible 
starting points (and the default ones used by the model did not work).
Try:
1. Some different starting values using the setstart<- method on the spec.
2. A different solver (you have "solnp","nlminb", 10 subsolvers with 
"nloptr", "gosolnp"). Each solver has its own tuning parameters. Try to 
adjust them to suit your problem.
3. A more parsimonious/simple model first.
4. Check your data for cleanliness (NAs, lost of consecutive zeros etc).

In future, as mentioned multiple time on this forum, do have the 
courtesy of signing your email with your real name.

Regards,
Alexios


On 29/04/2012 02:46, Luna wrote:
> Hi all,
>
> Could you please help me?
>
> I am fitting the GJRGARCH model to 60000 data points of 15min bar
> log-return data... and I got the following error message... with lots of NA
> results...
>
> What shall I do?
>
> Thanks a lot!
>
>
>> spec = ugarchspec(variance.model = list(model = "gjrGARCH"),
> distribution.model = "sged")
>> fit = ugarchfit(data = dLogRets, spec = spec)
>>
>> fit
>
> *---------------------------------*
> *          GARCH Model Fit        *
> *---------------------------------*
>
> Conditional Variance Dynamics
> -----------------------------------
> GARCH Model : gjrGARCH(1,1)
> Mean Model : ARFIMA(1,0,1)
> Distribution : sged
>
> Optimal Parameters
> ------------------------------------
>          Estimate  Std. Error  t value Pr(>|t|)
> mu     -0.000012          NA       NA       NA
> ar1     0.038942          NA       NA       NA
> ma1     0.038334          NA       NA       NA
> omega   0.000000          NA       NA       NA
> alpha1  0.050000          NA       NA       NA
> beta1   0.900000          NA       NA       NA
> gamma1  0.050000          NA       NA       NA
> skew    1.000000          NA       NA       NA
> shape   2.000000          NA       NA       NA
>
> Robust Standard Errors:
>          Estimate  Std. Error  t value Pr(>|t|)
> mu     -0.000012          NA       NA       NA
> ar1     0.038942          NA       NA       NA
> ma1     0.038334          NA       NA       NA
> omega   0.000000          NA       NA       NA
> alpha1  0.050000          NA       NA       NA
> beta1   0.900000          NA       NA       NA
> gamma1  0.050000          NA       NA       NA
> skew    1.000000          NA       NA       NA
> shape   2.000000          NA       NA       NA
>
>   failed to invert hessian
> LogLikelihood : -1.1
>
> Information Criteria
> ------------------------------------
>
> Akaike       0.00037884
> Bayes        0.00187841
> Shibata      0.00037879
> Hannan-Quinn 0.00084718
>
> Q-Statistics on Standardized Residuals
> ------------------------------------
>        statistic   p-value
> Lag10     26.17 0.0009835
> Lag15     27.71 0.0099253
> Lag20     34.01 0.0125447
>
> H0 : No serial correlation
>
> Q-Statistics on Standardized Squared Residuals
> ------------------------------------
>        statistic p-value
> Lag10     11.53  0.1736
> Lag15     15.75  0.2630
> Lag20     20.97  0.2810
>
> ARCH LM Tests
> ------------------------------------
>               Statistic DoF P-Value
> ARCH Lag[2]      2.860   2  0.2394
> ARCH Lag[5]      6.334   5  0.2751
> ARCH Lag[10]    12.032  10  0.2829
> Error in t.default(grad) : argument is not a matrix
>
> Enter a frame number, or 0 to exit
>
> 1: function (object)
> 2: function (object)
> 3: .nyblomTest(object)
> 4: t(grad)
> 5: t.default(grad)
>
> Selection:
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From haipinglan at gmail.com  Sun Apr 29 07:29:38 2012
From: haipinglan at gmail.com (Haiping LAN)
Date: Sun, 29 Apr 2012 13:29:38 +0800
Subject: [R-SIG-Finance] about an error of xts
In-Reply-To: <1335609116.11550.10.camel@brian-desktop>
References: <CAM4Kd2HPJjDpxQBsoMhS05G80Pi8A9ptBWE6YLTd1d_Utba5NQ@mail.gmail.com>
	<CAAmySGPaBG9SzB3uSi=+kt=mxZMNtL0HQiFTL+ihkzjcUrmQdQ@mail.gmail.com>
	<1335193707.31356.51.camel@brian-rcg>
	<CAM4Kd2F-ugWybG+=to3VCggFJ_enGvwzkB8NrW0x7CVC9h6rBw@mail.gmail.com>
	<1335609116.11550.10.camel@brian-desktop>
Message-ID: <CAM4Kd2E6m7uWhTPHNo8bMRQyMsRr3iWyPyanjduaRWm99pU3BA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120429/a5b785a1/attachment.pl>

From krisanharia at gmail.com  Sun Apr 29 11:48:23 2012
From: krisanharia at gmail.com (krisan haria)
Date: Sun, 29 Apr 2012 10:48:23 +0100
Subject: [R-SIG-Finance] problem with import data
In-Reply-To: <CALHdMsXXPPt6Ji6W0OWL6XGskgM_RxCnKNmoBwxX8ZSD+yQyNw@mail.gmail.com>
References: <CALHdMsXXPPt6Ji6W0OWL6XGskgM_RxCnKNmoBwxX8ZSD+yQyNw@mail.gmail.com>
Message-ID: <CALHdMsUZPXVr2TTmj3ka3aHbp37myWKgq1KmTOBQppSm8amTEw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120429/6b499566/attachment.pl>

From brian at braverock.com  Sun Apr 29 13:20:05 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 29 Apr 2012 06:20:05 -0500
Subject: [R-SIG-Finance] problem with import data
In-Reply-To: <CALHdMsUZPXVr2TTmj3ka3aHbp37myWKgq1KmTOBQppSm8amTEw@mail.gmail.com>
References: <CALHdMsXXPPt6Ji6W0OWL6XGskgM_RxCnKNmoBwxX8ZSD+yQyNw@mail.gmail.com>
	<CALHdMsUZPXVr2TTmj3ka3aHbp37myWKgq1KmTOBQppSm8amTEw@mail.gmail.com>
Message-ID: <1335698405.17905.12.camel@brian-desktop>

Try:

require(quantmod)
?getSymbols

it will save you a lot of hassle.

On Sun, 2012-04-29 at 10:48 +0100, krisan haria wrote:
> >
> > Hi,
> >
> > Im trying to import data from yahoo into R. I downloaded the data from
> > yahoo into a csv file and then saved the csv file into a txt file (tab
> > delimited).
> >
> > From R I then call the function
> >
> > read.table("t1.txt")
> >
> > but I get the following error
> >
> > Error in scan(file, what, nmax, sep, dec, quote, skip, nlines,
> > na.strings,  :
> >   line 2 did not have 8 elements
> >
> > I tried
> >
> > read.table("t1.txt", header=T)
> >
> > but same error
> >
> > I suspect this is linked to the fact I seem to be importing an extra
> > column but I have no idea on how to get rid of this extra column.
> >
> > My R version is R 2.13.1
> >
> > Any ideas?
> >
> > Regards
> >
> > Krisan
> >
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From brian at braverock.com  Sun Apr 29 13:22:05 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 29 Apr 2012 06:22:05 -0500
Subject: [R-SIG-Finance] about an error of xts
In-Reply-To: <CAM4Kd2E6m7uWhTPHNo8bMRQyMsRr3iWyPyanjduaRWm99pU3BA@mail.gmail.com>
References: <CAM4Kd2HPJjDpxQBsoMhS05G80Pi8A9ptBWE6YLTd1d_Utba5NQ@mail.gmail.com>
	<CAAmySGPaBG9SzB3uSi=+kt=mxZMNtL0HQiFTL+ihkzjcUrmQdQ@mail.gmail.com>
	<1335193707.31356.51.camel@brian-rcg>
	<CAM4Kd2F-ugWybG+=to3VCggFJ_enGvwzkB8NrW0x7CVC9h6rBw@mail.gmail.com>
	<1335609116.11550.10.camel@brian-desktop>
	<CAM4Kd2E6m7uWhTPHNo8bMRQyMsRr3iWyPyanjduaRWm99pU3BA@mail.gmail.com>
Message-ID: <1335698525.17905.13.camel@brian-desktop>

Here's my sessionInfo on one machine.

> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods
base     

other attached packages:
[1] quantmod_0.3-17 TTR_0.20-3      xts_0.8-3       zoo_1.7-4      
[5] Defaults_1.1-1 

loaded via a namespace (and not attached):
[1] grid_2.15.0    lattice_0.20-0


So try upgrading to modern versions of everything.  I can't reproduce
under R 2.14.2 either.

On Sun, 2012-04-29 at 13:29 +0800, Haiping LAN wrote:
> *Dear Brian.*
> *That's why i feel strange for this issue.*
> *I know you cannot reproduce relevant error information, which is quite
> similar to some report in stackoverflow.*
> http://stackoverflow.com/questions/9757430/xts-error-order-by-requires-an-appropriate-time-based-object
> 
> 
> Probably,  you can give me other hints , such as release version, os, et al.
> 
> Thank you very much.
> 
> Best,
> 
> Haiping
> 
> 
> On 28 April 2012 18:31, Brian G. Peterson <brian at braverock.com> wrote:
> 
> > On Sat, 2012-04-28 at 16:14 +0800, Haiping LAN wrote:
> > > Dear Brian,  Michael  and Db.
> > >
> > > Thanks for all your suggests.
> > > I tried all your hints. But i found the problem remains, and still shows
> > "
> > > order.by requires an appropriate time-based object"
> > >
> > > it sounds strange.
> >
> > If you are going to persist in suggesting that a bug exists, then please
> > provide a reproducible example.
> >
> > >From your original message and the suggestions you've received, the
> > complete example would be:
> >
> > #########
> > require(quantmod)
> > getSymbols('^GSPC')
> >
> > ex.model <- specifyModel(T.ind(GSPC) ~ Delt(Cly,k=1:3))
> >
> > T.ind <- function(quotes,tgt.margin=0.025,n.days=10) {
> >  v <- apply(HLC(quotes),1,mean)
> >  r <- matrix(NA,ncol=n.days,nrow=NROW(quotes))
> >  for(x in 1:n.days) r[,x] <- Next(Delt(v,k=x),x)
> >  x <- apply(r,1,function(x) sum(x[x > tgt.margin | x < -tgt.margin]))
> >  if (is.xts(quotes)) xts(x,time(quotes)) else x
> > }
> >
> > ex.model.Cl <- specifyModel(T.ind(GSPC) ~ Delt(Cl(GSPC),k=1:3))
> > ex.model.Ad <- specifyModel(T.ind(GSPC) ~ Delt(Ad(GSPC),k=1:3))
> > #########
> >
> > This works for me.
> >
> > Where, specifically, do you think there is still a problem?
> >
> > I don't see any evidence of a bug here in quantmod, xts, or lm.
> >
> >   - Brian
> >
> > > On 23 April 2012 23:08, Brian G. Peterson <brian at braverock.com> wrote:
> > >
> > > > On Mon, 2012-04-23 at 11:03 -0400, R. Michael Weylandt wrote:
> > > > > In addition to what's been said, you could much more easily write:
> > > > >
> > > > > GSPC <- getSymbols("^GSPC", from = "2000-01-01", auto.assign = F)
> > > >
> > > > I'll make it simpler still...
> > > >
> > > > getSymbols("^GSPC", from = "2000-01-01")
> > > >
> > > > which will create object 'GSPC' and avoids the frowned upon use of 'F'
> > > > for FALSE (which can easily collide with a variable)
> > > >
> > > > Regards,
> > > >
> > > >   - Brian
> >
> >
> 
> 

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From matt at considine.net  Sun Apr 29 14:53:13 2012
From: matt at considine.net (Matt Considine)
Date: Sun, 29 Apr 2012 08:53:13 -0400
Subject: [R-SIG-Finance] about an error of xts
In-Reply-To: <mailman.2.1335693602.25084.r-sig-finance@r-project.org>
References: <mailman.2.1335693602.25084.r-sig-finance@r-project.org>
Message-ID: <4F9D39B9.2060402@considine.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120429/76907914/attachment.pl>

From gsee000 at gmail.com  Sun Apr 29 15:20:45 2012
From: gsee000 at gmail.com (G See)
Date: Sun, 29 Apr 2012 08:20:45 -0500
Subject: [R-SIG-Finance] problem with import data
In-Reply-To: <CALHdMsUZPXVr2TTmj3ka3aHbp37myWKgq1KmTOBQppSm8amTEw@mail.gmail.com>
References: <CALHdMsXXPPt6Ji6W0OWL6XGskgM_RxCnKNmoBwxX8ZSD+yQyNw@mail.gmail.com>
	<CALHdMsUZPXVr2TTmj3ka3aHbp37myWKgq1KmTOBQppSm8amTEw@mail.gmail.com>
Message-ID: <CA+xi=qYRc2nyJGemjU4qZQtapcBzw6cY=hbCY-=HUacwrzF3xA@mail.gmail.com>

Krisan,

As Brian mentioned, quantmod would make things easier for you, but to
answer your immediate question..

If it really is tab delimited, you could try
    read.table("t1.txt", header=TRUE, sep="\t")

If it's a CSV, then try
    read.table("t1.txt", header=TRUE, sep=",")
    # or
    read.csv("t1.txt")

For more, check this section of the R Data Import/Export manual:
http://cran.r-project.org/doc/manuals/R-data.html#Spreadsheet_002dlike-data

HTH,
Garrett

On Sun, Apr 29, 2012 at 4:48 AM, krisan haria <krisanharia at gmail.com> wrote:
>>
>> Hi,
>>
>> Im trying to import data from yahoo into R. I downloaded the data from
>> yahoo into a csv file and then saved the csv file into a txt file (tab
>> delimited).
>>
>> From R I then call the function
>>
>> read.table("t1.txt")
>>
>> but I get the following error
>>
>> Error in scan(file, what, nmax, sep, dec, quote, skip, nlines,
>> na.strings, ?:
>> ? line 2 did not have 8 elements
>>
>> I tried
>>
>> read.table("t1.txt", header=T)
>>
>> but same error
>>
>> I suspect this is linked to the fact I seem to be importing an extra
>> column but I have no idea on how to get rid of this extra column.
>>
>> My R version is R 2.13.1
>>
>> Any ideas?
>>
>> Regards
>>
>> Krisan
>>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From krisanharia at gmail.com  Sun Apr 29 16:16:21 2012
From: krisanharia at gmail.com (krisan haria)
Date: Sun, 29 Apr 2012 15:16:21 +0100
Subject: [R-SIG-Finance] problem with import data
In-Reply-To: <CA+xi=qYRc2nyJGemjU4qZQtapcBzw6cY=hbCY-=HUacwrzF3xA@mail.gmail.com>
References: <CALHdMsXXPPt6Ji6W0OWL6XGskgM_RxCnKNmoBwxX8ZSD+yQyNw@mail.gmail.com>
	<CALHdMsUZPXVr2TTmj3ka3aHbp37myWKgq1KmTOBQppSm8amTEw@mail.gmail.com>
	<CA+xi=qYRc2nyJGemjU4qZQtapcBzw6cY=hbCY-=HUacwrzF3xA@mail.gmail.com>
Message-ID: <CALHdMsWqG2SqZPXsu-Xrnt3BT3X_0zWA7yKFArk=bwBjjRmmig@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120429/b7092446/attachment.pl>

From chicagobrownblue at hotmail.com  Sun Apr 29 16:18:11 2012
From: chicagobrownblue at hotmail.com (FJ M)
Date: Sun, 29 Apr 2012 14:18:11 +0000
Subject: [R-SIG-Finance] problem with import data
In-Reply-To: <CALHdMsUZPXVr2TTmj3ka3aHbp37myWKgq1KmTOBQppSm8amTEw@mail.gmail.com>
References: <CALHdMsXXPPt6Ji6W0OWL6XGskgM_RxCnKNmoBwxX8ZSD+yQyNw@mail.gmail.com>,
	<CALHdMsUZPXVr2TTmj3ka3aHbp37myWKgq1KmTOBQppSm8amTEw@mail.gmail.com>
Message-ID: <BLU161-W4102ABCC274FF6D7DA9B2DDF2B0@phx.gbl>


Date,Open,High,Low,Close,Volume,Adj Close
 
I think your problem is Adj Close has a space in it. If you remove the space or replace it with underscore, I think you will be home free. You could also delete the Adj Close column -- I never use it. 
 
Good Luck
 
Frank
Chicago, IL
----------------------------------------
> Date: Sun, 29 Apr 2012 10:48:23 +0100
> From: krisanharia at gmail.com
> To: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] problem with import data
>
> >
> > Hi,
> >
> > Im trying to import data from yahoo into R. I downloaded the data from
> > yahoo into a csv file and then saved the csv file into a txt file (tab
> > delimited).
> >
> > From R I then call the function
> >
> > read.table("t1.txt")
> >
> > but I get the following error
> >
> > Error in scan(file, what, nmax, sep, dec, quote, skip, nlines,
> > na.strings, :
> > line 2 did not have 8 elements
> >
> > I tried
> >
> > read.table("t1.txt", header=T)
> >
> > but same error
> >
> > I suspect this is linked to the fact I seem to be importing an extra
> > column but I have no idea on how to get rid of this extra column.
> >
> > My R version is R 2.13.1
> >
> > Any ideas?
> >
> > Regards
> >
> > Krisan
> >
>
> [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go. 		 	   		  

From krisanharia at gmail.com  Sun Apr 29 16:37:44 2012
From: krisanharia at gmail.com (krisan haria)
Date: Sun, 29 Apr 2012 15:37:44 +0100
Subject: [R-SIG-Finance] problem with import data
In-Reply-To: <CALHdMsWqG2SqZPXsu-Xrnt3BT3X_0zWA7yKFArk=bwBjjRmmig@mail.gmail.com>
References: <CALHdMsXXPPt6Ji6W0OWL6XGskgM_RxCnKNmoBwxX8ZSD+yQyNw@mail.gmail.com>
	<CALHdMsUZPXVr2TTmj3ka3aHbp37myWKgq1KmTOBQppSm8amTEw@mail.gmail.com>
	<CA+xi=qYRc2nyJGemjU4qZQtapcBzw6cY=hbCY-=HUacwrzF3xA@mail.gmail.com>
	<CALHdMsWqG2SqZPXsu-Xrnt3BT3X_0zWA7yKFArk=bwBjjRmmig@mail.gmail.com>
Message-ID: <CALHdMsXm-AmnOjnB+v_c_0AWLK0KmZL9fqmJNaJ7t2KGFm28bg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120429/33037af6/attachment.pl>

From josh.m.ulrich at gmail.com  Sun Apr 29 23:37:35 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sun, 29 Apr 2012 16:37:35 -0500
Subject: [R-SIG-Finance] Help! NAs and errors in ugarchfit ...
In-Reply-To: <CAPNjSFYsy+TTkwycoOMJ5YhXXK9qzDgQHW8w0-9umcctwU_Eog@mail.gmail.com>
References: <CAPNjSFYsy+TTkwycoOMJ5YhXXK9qzDgQHW8w0-9umcctwU_Eog@mail.gmail.com>
Message-ID: <CAPPM_gSG0OoDdRW9rEiqtnZ8ZEVj1pmsmw4_LcJr3uvJOqAF0g@mail.gmail.com>

Cross-posted:
http://www.nuclearphynance.com/Show%20Post.aspx?PostIDKey=160122
http://stats.stackexchange.com/q/27319/1657
http://www.wilmott.com/messageview.cfm?catid=4&threadid=90440
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com


On Sat, Apr 28, 2012 at 8:46 PM, Luna <lunamoonmoon at gmail.com> wrote:
> Hi all,
>
> Could you please help me?
>
> I am fitting the GJRGARCH model to 60000 data points of 15min bar
> log-return data... and I got the following error message... with lots of NA
> results...
>
> What shall I do?
>
> Thanks a lot!
>
>
>> spec = ugarchspec(variance.model = list(model = "gjrGARCH"),
> distribution.model = "sged")
>> fit = ugarchfit(data = dLogRets, spec = spec)
>>
>> fit
>
> *---------------------------------*
> * ? ? ? ? ?GARCH Model Fit ? ? ? ?*
> *---------------------------------*
>
> Conditional Variance Dynamics
> -----------------------------------
> GARCH Model : gjrGARCH(1,1)
> Mean Model : ARFIMA(1,0,1)
> Distribution : sged
>
> Optimal Parameters
> ------------------------------------
> ? ? ? ?Estimate ?Std. Error ?t value Pr(>|t|)
> mu ? ? -0.000012 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
> ar1 ? ? 0.038942 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
> ma1 ? ? 0.038334 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
> omega ? 0.000000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
> alpha1 ?0.050000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
> beta1 ? 0.900000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
> gamma1 ?0.050000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
> skew ? ?1.000000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
> shape ? 2.000000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
>
> Robust Standard Errors:
> ? ? ? ?Estimate ?Std. Error ?t value Pr(>|t|)
> mu ? ? -0.000012 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
> ar1 ? ? 0.038942 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
> ma1 ? ? 0.038334 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
> omega ? 0.000000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
> alpha1 ?0.050000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
> beta1 ? 0.900000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
> gamma1 ?0.050000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
> skew ? ?1.000000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
> shape ? 2.000000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
>
> ?failed to invert hessian
> LogLikelihood : -1.1
>
> Information Criteria
> ------------------------------------
>
> Akaike ? ? ? 0.00037884
> Bayes ? ? ? ?0.00187841
> Shibata ? ? ?0.00037879
> Hannan-Quinn 0.00084718
>
> Q-Statistics on Standardized Residuals
> ------------------------------------
> ? ? ?statistic ? p-value
> Lag10 ? ? 26.17 0.0009835
> Lag15 ? ? 27.71 0.0099253
> Lag20 ? ? 34.01 0.0125447
>
> H0 : No serial correlation
>
> Q-Statistics on Standardized Squared Residuals
> ------------------------------------
> ? ? ?statistic p-value
> Lag10 ? ? 11.53 ?0.1736
> Lag15 ? ? 15.75 ?0.2630
> Lag20 ? ? 20.97 ?0.2810
>
> ARCH LM Tests
> ------------------------------------
> ? ? ? ? ? ? Statistic DoF P-Value
> ARCH Lag[2] ? ? ?2.860 ? 2 ?0.2394
> ARCH Lag[5] ? ? ?6.334 ? 5 ?0.2751
> ARCH Lag[10] ? ?12.032 ?10 ?0.2829
> Error in t.default(grad) : argument is not a matrix
>
> Enter a frame number, or 0 to exit
>
> 1: function (object)
> 2: function (object)
> 3: .nyblomTest(object)
> 4: t(grad)
> 5: t.default(grad)
>
> Selection:
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From lunamoonmoon at gmail.com  Mon Apr 30 02:45:37 2012
From: lunamoonmoon at gmail.com (Luna)
Date: Sun, 29 Apr 2012 19:45:37 -0500
Subject: [R-SIG-Finance] Help! NAs and errors in ugarchfit ...
In-Reply-To: <CAPPM_gSG0OoDdRW9rEiqtnZ8ZEVj1pmsmw4_LcJr3uvJOqAF0g@mail.gmail.com>
References: <CAPNjSFYsy+TTkwycoOMJ5YhXXK9qzDgQHW8w0-9umcctwU_Eog@mail.gmail.com>
	<CAPPM_gSG0OoDdRW9rEiqtnZ8ZEVj1pmsmw4_LcJr3uvJOqAF0g@mail.gmail.com>
Message-ID: <CAPNjSFa219BTLaELYCnYq2GA-9TjUBC3pdDYBGhtVFgap=sWfg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120429/2db1b179/attachment.pl>

From brian at braverock.com  Mon Apr 30 02:53:33 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 29 Apr 2012 19:53:33 -0500
Subject: [R-SIG-Finance] Help! NAs and errors in ugarchfit ...
In-Reply-To: <CAPNjSFa219BTLaELYCnYq2GA-9TjUBC3pdDYBGhtVFgap=sWfg@mail.gmail.com>
References: <CAPNjSFYsy+TTkwycoOMJ5YhXXK9qzDgQHW8w0-9umcctwU_Eog@mail.gmail.com>
	<CAPPM_gSG0OoDdRW9rEiqtnZ8ZEVj1pmsmw4_LcJr3uvJOqAF0g@mail.gmail.com>
	<CAPNjSFa219BTLaELYCnYq2GA-9TjUBC3pdDYBGhtVFgap=sWfg@mail.gmail.com>
Message-ID: <1335747213.31501.0.camel@brian-desktop>

On Sun, 2012-04-29 at 19:45 -0500, Luna wrote:
> Your behavior is annoying... are you having trouble in your real life?
> And you have lots of time to "spy" over what other people have posted
> in the past, persistently? And you are now a self-appointed Internet
> policeman?

No, really, your behavior continues to be annoying.  Please stop wasting
the time of the list.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From lunamoonmoon at gmail.com  Mon Apr 30 03:00:19 2012
From: lunamoonmoon at gmail.com (Luna)
Date: Sun, 29 Apr 2012 20:00:19 -0500
Subject: [R-SIG-Finance] Help! NAs and errors in ugarchfit ...
In-Reply-To: <1335747213.31501.0.camel@brian-desktop>
References: <CAPNjSFYsy+TTkwycoOMJ5YhXXK9qzDgQHW8w0-9umcctwU_Eog@mail.gmail.com>
	<CAPPM_gSG0OoDdRW9rEiqtnZ8ZEVj1pmsmw4_LcJr3uvJOqAF0g@mail.gmail.com>
	<CAPNjSFa219BTLaELYCnYq2GA-9TjUBC3pdDYBGhtVFgap=sWfg@mail.gmail.com>
	<1335747213.31501.0.camel@brian-desktop>
Message-ID: <CAPNjSFYWPFUK2Rnr9jg2JRbZ23bw7qzHG5AFGxyjOwO4C_fszA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120429/5d761eba/attachment.pl>

From josh.m.ulrich at gmail.com  Mon Apr 30 03:03:39 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sun, 29 Apr 2012 20:03:39 -0500
Subject: [R-SIG-Finance] Help! NAs and errors in ugarchfit ...
In-Reply-To: <CAPNjSFa219BTLaELYCnYq2GA-9TjUBC3pdDYBGhtVFgap=sWfg@mail.gmail.com>
References: <CAPNjSFYsy+TTkwycoOMJ5YhXXK9qzDgQHW8w0-9umcctwU_Eog@mail.gmail.com>
	<CAPPM_gSG0OoDdRW9rEiqtnZ8ZEVj1pmsmw4_LcJr3uvJOqAF0g@mail.gmail.com>
	<CAPNjSFa219BTLaELYCnYq2GA-9TjUBC3pdDYBGhtVFgap=sWfg@mail.gmail.com>
Message-ID: <CAPPM_gSUYojn+crpyFv9VOAQahTOSs=iFgZumJMu7rej3-JyTw@mail.gmail.com>

I monitor NP and CrossValidated via my RSS feed reader, and
R-SIG-Finance in my inbox.  Contrary to what you may think, I don't
look to see if you've cross-posted but it's easy to spot when I see
nearly the exact same question in several different places.  I point
out that you've cross-posted in order to help save people time if your
question has already been answered on another forum.

Actually, I have a filter that automatically deletes all your posts to
R-SIG-Finance and I'd do the same with my RSS reader if I could.  The
only way I know you've posted is if someone else responds to you.


On Sun, Apr 29, 2012 at 7:45 PM, Luna <lunamoonmoon at gmail.com> wrote:
> Josh,
>
> My god!
>
> Your behavior is annoying... are you having trouble in your real life? And
> you have lots of time to "spy" over what other people have posted in the
> past, persistently? And you are now a self-appointed?Internet policeman?
>
> And your contribution to the R-sig-finance community?becomes?catching people
> "cross-posting"? You are wasting our time honestly!
>
> And this is not your first time "spying" on us. You have repeatedly enjoyed
> peeking into other people's past and make accusations.
>
> If you look carefully, yes, the questions are related, because they are
> based on related dataset; but the questions are not the same at all.
>
> In fact, the question?on R-sig-finance?is merely about the "NA"s and
> rugarch... nothing else...
>
> What happened to you Josh?
>
>
>
>
> On Sun, Apr 29, 2012 at 4:37 PM, Joshua Ulrich <josh.m.ulrich at gmail.com>
> wrote:
>>
>> Cross-posted:
>> http://www.nuclearphynance.com/Show%20Post.aspx?PostIDKey=160122
>> http://stats.stackexchange.com/q/27319/1657
>> http://www.wilmott.com/messageview.cfm?catid=4&threadid=90440
>> --
>> Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com
>>
>> R/Finance 2012: Applied Finance with R
>> www.RinFinance.com
>>
>>
>> On Sat, Apr 28, 2012 at 8:46 PM, Luna <lunamoonmoon at gmail.com> wrote:
>> > Hi all,
>> >
>> > Could you please help me?
>> >
>> > I am fitting the GJRGARCH model to 60000 data points of 15min bar
>> > log-return data... and I got the following error message... with lots of
>> > NA
>> > results...
>> >
>> > What shall I do?
>> >
>> > Thanks a lot!
>> >
>> >
>> >> spec = ugarchspec(variance.model = list(model = "gjrGARCH"),
>> > distribution.model = "sged")
>> >> fit = ugarchfit(data = dLogRets, spec = spec)
>> >>
>> >> fit
>> >
>> > *---------------------------------*
>> > * ? ? ? ? ?GARCH Model Fit ? ? ? ?*
>> > *---------------------------------*
>> >
>> > Conditional Variance Dynamics
>> > -----------------------------------
>> > GARCH Model : gjrGARCH(1,1)
>> > Mean Model : ARFIMA(1,0,1)
>> > Distribution : sged
>> >
>> > Optimal Parameters
>> > ------------------------------------
>> > ? ? ? ?Estimate ?Std. Error ?t value Pr(>|t|)
>> > mu ? ? -0.000012 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
>> > ar1 ? ? 0.038942 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
>> > ma1 ? ? 0.038334 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
>> > omega ? 0.000000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
>> > alpha1 ?0.050000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
>> > beta1 ? 0.900000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
>> > gamma1 ?0.050000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
>> > skew ? ?1.000000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
>> > shape ? 2.000000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
>> >
>> > Robust Standard Errors:
>> > ? ? ? ?Estimate ?Std. Error ?t value Pr(>|t|)
>> > mu ? ? -0.000012 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
>> > ar1 ? ? 0.038942 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
>> > ma1 ? ? 0.038334 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
>> > omega ? 0.000000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
>> > alpha1 ?0.050000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
>> > beta1 ? 0.900000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
>> > gamma1 ?0.050000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
>> > skew ? ?1.000000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
>> > shape ? 2.000000 ? ? ? ? ?NA ? ? ? NA ? ? ? NA
>> >
>> > ?failed to invert hessian
>> > LogLikelihood : -1.1
>> >
>> > Information Criteria
>> > ------------------------------------
>> >
>> > Akaike ? ? ? 0.00037884
>> > Bayes ? ? ? ?0.00187841
>> > Shibata ? ? ?0.00037879
>> > Hannan-Quinn 0.00084718
>> >
>> > Q-Statistics on Standardized Residuals
>> > ------------------------------------
>> > ? ? ?statistic ? p-value
>> > Lag10 ? ? 26.17 0.0009835
>> > Lag15 ? ? 27.71 0.0099253
>> > Lag20 ? ? 34.01 0.0125447
>> >
>> > H0 : No serial correlation
>> >
>> > Q-Statistics on Standardized Squared Residuals
>> > ------------------------------------
>> > ? ? ?statistic p-value
>> > Lag10 ? ? 11.53 ?0.1736
>> > Lag15 ? ? 15.75 ?0.2630
>> > Lag20 ? ? 20.97 ?0.2810
>> >
>> > ARCH LM Tests
>> > ------------------------------------
>> > ? ? ? ? ? ? Statistic DoF P-Value
>> > ARCH Lag[2] ? ? ?2.860 ? 2 ?0.2394
>> > ARCH Lag[5] ? ? ?6.334 ? 5 ?0.2751
>> > ARCH Lag[10] ? ?12.032 ?10 ?0.2829
>> > Error in t.default(grad) : argument is not a matrix
>> >
>> > Enter a frame number, or 0 to exit
>> >
>> > 1: function (object)
>> > 2: function (object)
>> > 3: .nyblomTest(object)
>> > 4: t(grad)
>> > 5: t.default(grad)
>> >
>> > Selection:
>> >
>> > ? ? ? ?[[alternative HTML version deleted]]
>> >
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions
>> > should go.
>
>


From lunamoonmoon at gmail.com  Mon Apr 30 03:06:54 2012
From: lunamoonmoon at gmail.com (Luna)
Date: Sun, 29 Apr 2012 20:06:54 -0500
Subject: [R-SIG-Finance] Help! NAs and errors in ugarchfit ...
In-Reply-To: <CAPPM_gSUYojn+crpyFv9VOAQahTOSs=iFgZumJMu7rej3-JyTw@mail.gmail.com>
References: <CAPNjSFYsy+TTkwycoOMJ5YhXXK9qzDgQHW8w0-9umcctwU_Eog@mail.gmail.com>
	<CAPPM_gSG0OoDdRW9rEiqtnZ8ZEVj1pmsmw4_LcJr3uvJOqAF0g@mail.gmail.com>
	<CAPNjSFa219BTLaELYCnYq2GA-9TjUBC3pdDYBGhtVFgap=sWfg@mail.gmail.com>
	<CAPPM_gSUYojn+crpyFv9VOAQahTOSs=iFgZumJMu7rej3-JyTw@mail.gmail.com>
Message-ID: <CAPNjSFZrn8ZrsZx4C2i3LMM-LGAHiMp-d6V_-DPjio08SaXvxw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120429/595ff96c/attachment.pl>

From pict100 at gmail.com  Mon Apr 30 09:38:06 2012
From: pict100 at gmail.com (Db)
Date: Mon, 30 Apr 2012 00:38:06 -0700 (PDT)
Subject: [R-SIG-Finance] about an error of xts
In-Reply-To: <CAM4Kd2E6m7uWhTPHNo8bMRQyMsRr3iWyPyanjduaRWm99pU3BA@mail.gmail.com>
References: <CAM4Kd2HPJjDpxQBsoMhS05G80Pi8A9ptBWE6YLTd1d_Utba5NQ@mail.gmail.com>
	<CAAmySGPaBG9SzB3uSi=+kt=mxZMNtL0HQiFTL+ihkzjcUrmQdQ@mail.gmail.com>
	<1335193707.31356.51.camel@brian-rcg>
	<CAM4Kd2F-ugWybG+=to3VCggFJ_enGvwzkB8NrW0x7CVC9h6rBw@mail.gmail.com>
	<1335609116.11550.10.camel@brian-desktop>
	<CAM4Kd2E6m7uWhTPHNo8bMRQyMsRr3iWyPyanjduaRWm99pU3BA@mail.gmail.com>
Message-ID: <1335771486785-4597588.post@n4.nabble.com>

Just a wild guess. Could it be that your data is messed up either by an
invisible chinese unicode character or a certain firewall? Why not pop over
the border to Hongkong and test there.  

--
View this message in context: http://r.789695.n4.nabble.com/about-an-error-of-xts-tp4579828p4597588.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From swisdom at gmail.com  Mon Apr 30 16:01:20 2012
From: swisdom at gmail.com (Steve Wisdom)
Date: Mon, 30 Apr 2012 10:01:20 -0400
Subject: [R-SIG-Finance] Crossposting (was 'Help! NAs and errors in
	ugarchfit')
Message-ID: <CAJHYTCERrAmPjbz8waQkzvZp-8rCKUw1zrSnHFKJ83mBPBxLsA@mail.gmail.com>

Luna <lunamoonmoon at gmail.com> Sun, 29 Apr 20:00:19 -0500

> Will consider legal actions.

LOL!... Let me know how that works out for you.

But to the point -- I've noticed crossposters seldom/never take time
to summarize information gleaned in other forums and report it back to
R-Sig-Finance. If they did so, crossposting would be somewhat less
objectionable.


From gordon.erlebach at gmail.com  Mon Apr 30 17:11:13 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Mon, 30 Apr 2012 11:11:13 -0400
Subject: [R-SIG-Finance] question on charting
Message-ID: <CAELivkJHHbisJL55NxNeVRZjfEioi8hOUof4oDsmofZpEoEwMQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120430/d97159df/attachment.pl>

From noahsilverman at ucla.edu  Mon Apr 30 18:35:23 2012
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Mon, 30 Apr 2012 09:35:23 -0700
Subject: [R-SIG-Finance] Historical data for single dates
Message-ID: <3AFBD9DD-9605-4BAB-89CA-7F98465C7A9A@ucla.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120430/f78a3d39/attachment.pl>

From student.northwestern at gmail.com  Mon Apr 30 18:45:14 2012
From: student.northwestern at gmail.com (jim green)
Date: Mon, 30 Apr 2012 09:45:14 -0700 (PDT)
Subject: [R-SIG-Finance] Historical data for single dates
In-Reply-To: <3AFBD9DD-9605-4BAB-89CA-7F98465C7A9A@ucla.edu>
References: <3AFBD9DD-9605-4BAB-89CA-7F98465C7A9A@ucla.edu>
Message-ID: <1335804314486-4598701.post@n4.nabble.com>

your best bet would be beancounter package
http://dirk.eddelbuettel.com/code/beancounter.html from Dirk. It can store
yahoo data in database.

Jim.

--
View this message in context: http://r.789695.n4.nabble.com/Historical-data-for-single-dates-tp4598678p4598701.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From gordon.erlebach at gmail.com  Mon Apr 30 19:38:16 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Mon, 30 Apr 2012 13:38:16 -0400
Subject: [R-SIG-Finance] date to index
Message-ID: <CAELivkJu8=P5hMev=Qns_r_SyU=QbnaYMQQ2CezZVt-r1A5coA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120430/01b2f00c/attachment.pl>

From josh.m.ulrich at gmail.com  Mon Apr 30 19:42:11 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 30 Apr 2012 12:42:11 -0500
Subject: [R-SIG-Finance] date to index
In-Reply-To: <CAELivkJu8=P5hMev=Qns_r_SyU=QbnaYMQQ2CezZVt-r1A5coA@mail.gmail.com>
References: <CAELivkJu8=P5hMev=Qns_r_SyU=QbnaYMQQ2CezZVt-r1A5coA@mail.gmail.com>
Message-ID: <CAPPM_gSQAAV9OMAiw-6_Xd_-wq8c-LOvCtwaeThrUraJcNukZg@mail.gmail.com>

It's not clear to me what you're trying to do.  An example would help.

My guess is that you're looking for something like this:
x <- xts(1:10, Sys.Date()-10:1)
rbind(x, xts(NA_integer_,Sys.Date()-11))

Best,
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com


On Mon, Apr 30, 2012 at 12:38 PM, Gordon Erlebacher
<gordon.erlebach at gmail.com> wrote:
> Hi,
>
> I have a xts object. Given a date, how do I get the index into the array?
> Is there a pre-written function?
>
> Thanks,
>
> ?Gordon
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From me at censix.com  Mon Apr 30 20:22:01 2012
From: me at censix.com (me)
Date: Mon, 30 Apr 2012 20:22:01 +0200
Subject: [R-SIG-Finance] date to index
In-Reply-To: <CAPPM_gSQAAV9OMAiw-6_Xd_-wq8c-LOvCtwaeThrUraJcNukZg@mail.gmail.com>
References: <CAELivkJu8=P5hMev=Qns_r_SyU=QbnaYMQQ2CezZVt-r1A5coA@mail.gmail.com>
	<CAPPM_gSQAAV9OMAiw-6_Xd_-wq8c-LOvCtwaeThrUraJcNukZg@mail.gmail.com>
Message-ID: <20120430202201.6d1c4c19@desktop1>


#Assuming you are interested in the date '2007-01-08'
#and lets say GOOG is your series

require(quantmod)
getSymbols('GOOG')

#This would be one way to get the row(index)number corresponding to
your date

which( index(GOOG)==index(GOOG['2007-01-08']) )

#Cheers, Soren


On Mon, 30 Apr 2012 12:42:11 -0500
Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:

> It's not clear to me what you're trying to do.  An example would help.
> 
> My guess is that you're looking for something like this:
> x <- xts(1:10, Sys.Date()-10:1)
> rbind(x, xts(NA_integer_,Sys.Date()-11))
> 
> Best,
> --
> Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com
> 
> R/Finance 2012: Applied Finance with R
> www.RinFinance.com
> 
> 
> On Mon, Apr 30, 2012 at 12:38 PM, Gordon Erlebacher
> <gordon.erlebach at gmail.com> wrote:
> > Hi,
> >
> > I have a xts object. Given a date, how do I get the index into the
> > array? Is there a pre-written function?
> >
> > Thanks,
> >
> > ?Gordon
> >
> > ? ? ? ?[[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R
> > questions should go.
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R
> questions should go.



-- 

http://censix.com


From jeff.a.ryan at gmail.com  Mon Apr 30 20:31:23 2012
From: jeff.a.ryan at gmail.com (Jeffrey Ryan)
Date: Mon, 30 Apr 2012 13:31:23 -0500
Subject: [R-SIG-Finance] date to index
In-Reply-To: <CAELivkJu8=P5hMev=Qns_r_SyU=QbnaYMQQ2CezZVt-r1A5coA@mail.gmail.com>
Message-ID: <CBC4446C.3B314%jeff.a.ryan@gmail.com>

?index

i <- index(X['2010'] )  # gets you all the dates within 2010

See ?.parseISO8601 as well for more details on subsetting

Jeff

On 4/30/12 12:38 PM, "Gordon Erlebacher" <gordon.erlebach at gmail.com> wrote:

>Hi,
>
>I have a xts object. Given a date, how do I get the index into the array?
>Is there a pre-written function?
>
>Thanks,
>
>  Gordon
>
>	[[alternative HTML version deleted]]
>
>_______________________________________________
>R-SIG-Finance at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>-- Subscriber-posting only. If you want to post, subscribe first.
>-- Also note that this is not the r-help list where general R questions
>should go.


From josh.m.ulrich at gmail.com  Mon Apr 30 21:43:01 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 30 Apr 2012 14:43:01 -0500
Subject: [R-SIG-Finance] date to index
In-Reply-To: <CAPPM_gSQAAV9OMAiw-6_Xd_-wq8c-LOvCtwaeThrUraJcNukZg@mail.gmail.com>
References: <CAELivkJu8=P5hMev=Qns_r_SyU=QbnaYMQQ2CezZVt-r1A5coA@mail.gmail.com>
	<CAPPM_gSQAAV9OMAiw-6_Xd_-wq8c-LOvCtwaeThrUraJcNukZg@mail.gmail.com>
Message-ID: <CAPPM_gQvSmtHznotGabZ7AgiS2JZh0iA-n39yGxbvz_U6m+6ww@mail.gmail.com>

Please reply to the list, so others can benefit.

On Mon, Apr 30, 2012 at 1:07 PM, Gordon Erlebacher
<gordon.erlebach at gmail.com> wrote:
> Yes, I have used that technique. Do not like it because the cya structure
> must be copied, inefficient. I try to minimize copies. It is obvious to me
> that r maintains this index column, internally perhaps. I will adopt your
> approach then. Thanks.   Gordon.
>
Can you explain how would it be possible to insert a new element into
a sorted array without copying?  It's not clear to me how you could do
this in any language.

The index in xts/zoo objects is an attribute attached to an underlying
matrix object.  It is not possible for the index to have a different
number of elements than rows in the underlying matrix.

> On Apr 30, 2012 1:42 PM, "Joshua Ulrich" <josh.m.ulrich at gmail.com> wrote:
>>
>> It's not clear to me what you're trying to do.  An example would help.
>>
>> My guess is that you're looking for something like this:
>> x <- xts(1:10, Sys.Date()-10:1)
>> rbind(x, xts(NA_integer_,Sys.Date()-11))
>>
>> Best,
>> --
>> Joshua Ulrich  |  FOSS Trading: www.fosstrading.com
>>
>> R/Finance 2012: Applied Finance with R
>> www.RinFinance.com
>>
>>
>> On Mon, Apr 30, 2012 at 12:38 PM, Gordon Erlebacher
>> <gordon.erlebach at gmail.com> wrote:
>> > Hi,
>> >
>> > I have a xts object. Given a date, how do I get the index into the
>> > array?
>> > Is there a pre-written function?
>> >
>> > Thanks,
>> >
>> >  Gordon
>> >
>> >        [[alternative HTML version deleted]]
>> >
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions
>> > should go.


From gordon.erlebach at gmail.com  Mon Apr 30 21:45:15 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Mon, 30 Apr 2012 15:45:15 -0400
Subject: [R-SIG-Finance] date to index
In-Reply-To: <CAPPM_gQvSmtHznotGabZ7AgiS2JZh0iA-n39yGxbvz_U6m+6ww@mail.gmail.com>
References: <CAELivkJu8=P5hMev=Qns_r_SyU=QbnaYMQQ2CezZVt-r1A5coA@mail.gmail.com>
	<CAPPM_gSQAAV9OMAiw-6_Xd_-wq8c-LOvCtwaeThrUraJcNukZg@mail.gmail.com>
	<CAPPM_gQvSmtHznotGabZ7AgiS2JZh0iA-n39yGxbvz_U6m+6ww@mail.gmail.com>
Message-ID: <CAELivkKn3t5oFhPVuo1J3tnssKYVDL7LQnuuJnupnM6c2+RcRA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120430/3536f64a/attachment.pl>

From gordon.erlebach at gmail.com  Mon Apr 30 21:46:53 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Mon, 30 Apr 2012 15:46:53 -0400
Subject: [R-SIG-Finance] date to index
In-Reply-To: <CAELivkKn3t5oFhPVuo1J3tnssKYVDL7LQnuuJnupnM6c2+RcRA@mail.gmail.com>
References: <CAELivkJu8=P5hMev=Qns_r_SyU=QbnaYMQQ2CezZVt-r1A5coA@mail.gmail.com>
	<CAPPM_gSQAAV9OMAiw-6_Xd_-wq8c-LOvCtwaeThrUraJcNukZg@mail.gmail.com>
	<CAPPM_gQvSmtHznotGabZ7AgiS2JZh0iA-n39yGxbvz_U6m+6ww@mail.gmail.com>
	<CAELivkKn3t5oFhPVuo1J3tnssKYVDL7LQnuuJnupnM6c2+RcRA@mail.gmail.com>
Message-ID: <CAELivk+V=XEy5J-8OSVXNVe-ENMcwhP5pZHPfO_4Jt2fp63=Ww@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120430/190e2af3/attachment.pl>

From josh.m.ulrich at gmail.com  Mon Apr 30 21:56:29 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 30 Apr 2012 14:56:29 -0500
Subject: [R-SIG-Finance] date to index
In-Reply-To: <CAELivk+V=XEy5J-8OSVXNVe-ENMcwhP5pZHPfO_4Jt2fp63=Ww@mail.gmail.com>
References: <CAELivkJu8=P5hMev=Qns_r_SyU=QbnaYMQQ2CezZVt-r1A5coA@mail.gmail.com>
	<CAPPM_gSQAAV9OMAiw-6_Xd_-wq8c-LOvCtwaeThrUraJcNukZg@mail.gmail.com>
	<CAPPM_gQvSmtHznotGabZ7AgiS2JZh0iA-n39yGxbvz_U6m+6ww@mail.gmail.com>
	<CAELivkKn3t5oFhPVuo1J3tnssKYVDL7LQnuuJnupnM6c2+RcRA@mail.gmail.com>
	<CAELivk+V=XEy5J-8OSVXNVe-ENMcwhP5pZHPfO_4Jt2fp63=Ww@mail.gmail.com>
Message-ID: <CAPPM_gQruGKek4h3Yn0QuWkc5tRe+1WZHmYXiH5A=0tQ2YKusw@mail.gmail.com>

You are confusing many things.

1) You asked how to add an element to the middle of a sorted array
(the index of an xts object), not how to add a column to a data.frame.
2) xts objects are not related to data.frames at all.
3) As I explained in my previous email, the index on xts/zoo objects
is an *attribute* of the object not a column in the underlying matrix.

Perhaps we're speaking past each other a bit.  So I'll reiterate what
I said in my initial response to this thread: "An example would help."


On Mon, Apr 30, 2012 at 2:46 PM, Gordon Erlebacher
<gordon.erlebach at gmail.com> wrote:
> Adding a column to a data frame can be done without copying in several
> languages, since all one needs is to maintain a list of pointers to the
> columns. You suggested I add a column of integers (the indices), which is
> the logical approach, but for very large data frames, it is a waste of
> memory and time. However, it works.
>
> ? ? Gordon
>
>
> On Mon, Apr 30, 2012 at 3:45 PM, Gordon Erlebacher
> <gordon.erlebach at gmail.com> wrote:
>>
>> Hi Jeff,
>>
>> You cannot insert an element within an array without copying. But let us
>> do something simpler:
>>
>> df = data.frame(a=1:10, b=101:110)
>>
>> a = df[5:10]
>>
>> This can be done without copying in several languages. Not R (as far as I
>> know). In R, almost everything is done without copying, even when copying is
>> not really required. On the other hand, R has many nice properties.
>>
>> ? ? ?Gordon
>>
>>
>>
>> On Mon, Apr 30, 2012 at 3:43 PM, Joshua Ulrich <josh.m.ulrich at gmail.com>
>> wrote:
>>>
>>> Please reply to the list, so others can benefit.
>>>
>>> On Mon, Apr 30, 2012 at 1:07 PM, Gordon Erlebacher
>>> <gordon.erlebach at gmail.com> wrote:
>>> > Yes, I have used that technique. Do not like it because the cya
>>> > structure
>>> > must be copied, inefficient. I try to minimize copies. It is obvious to
>>> > me
>>> > that r maintains this index column, internally perhaps. I will adopt
>>> > your
>>> > approach then. Thanks. ? Gordon.
>>> >
>>> Can you explain how would it be possible to insert a new element into
>>> a sorted array without copying? ?It's not clear to me how you could do
>>> this in any language.
>>>
>>> The index in xts/zoo objects is an attribute attached to an underlying
>>> matrix object. ?It is not possible for the index to have a different
>>> number of elements than rows in the underlying matrix.
>>>
>>> > On Apr 30, 2012 1:42 PM, "Joshua Ulrich" <josh.m.ulrich at gmail.com>
>>> > wrote:
>>> >>
>>> >> It's not clear to me what you're trying to do. ?An example would help.
>>> >>
>>> >> My guess is that you're looking for something like this:
>>> >> x <- xts(1:10, Sys.Date()-10:1)
>>> >> rbind(x, xts(NA_integer_,Sys.Date()-11))
>>> >>
>>> >> Best,
>>> >> --
>>> >> Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com
>>> >>
>>> >> R/Finance 2012: Applied Finance with R
>>> >> www.RinFinance.com
>>> >>
>>> >>
>>> >> On Mon, Apr 30, 2012 at 12:38 PM, Gordon Erlebacher
>>> >> <gordon.erlebach at gmail.com> wrote:
>>> >> > Hi,
>>> >> >
>>> >> > I have a xts object. Given a date, how do I get the index into the
>>> >> > array?
>>> >> > Is there a pre-written function?
>>> >> >
>>> >> > Thanks,
>>> >> >
>>> >> > ?Gordon
>>> >> >
>>> >> > ? ? ? ?[[alternative HTML version deleted]]
>>> >> >
>>> >> > _______________________________________________
>>> >> > R-SIG-Finance at r-project.org mailing list
>>> >> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> >> > -- Subscriber-posting only. If you want to post, subscribe first.
>>> >> > -- Also note that this is not the r-help list where general R
>>> >> > questions
>>> >> > should go.
>>
>>
>


From gordon.erlebach at gmail.com  Mon Apr 30 22:15:22 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Mon, 30 Apr 2012 16:15:22 -0400
Subject: [R-SIG-Finance] date to index
In-Reply-To: <CAPPM_gQruGKek4h3Yn0QuWkc5tRe+1WZHmYXiH5A=0tQ2YKusw@mail.gmail.com>
References: <CAELivkJu8=P5hMev=Qns_r_SyU=QbnaYMQQ2CezZVt-r1A5coA@mail.gmail.com>
	<CAPPM_gSQAAV9OMAiw-6_Xd_-wq8c-LOvCtwaeThrUraJcNukZg@mail.gmail.com>
	<CAPPM_gQvSmtHznotGabZ7AgiS2JZh0iA-n39yGxbvz_U6m+6ww@mail.gmail.com>
	<CAELivkKn3t5oFhPVuo1J3tnssKYVDL7LQnuuJnupnM6c2+RcRA@mail.gmail.com>
	<CAELivk+V=XEy5J-8OSVXNVe-ENMcwhP5pZHPfO_4Jt2fp63=Ww@mail.gmail.com>
	<CAPPM_gQruGKek4h3Yn0QuWkc5tRe+1WZHmYXiH5A=0tQ2YKusw@mail.gmail.com>
Message-ID: <CAELivkJwKbP7fONpSh_jCjDmW7Yf5K0BaVwSwSuOBAW2p0A1bw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120430/480fc23d/attachment.pl>

From brian at braverock.com  Mon Apr 30 22:26:03 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 30 Apr 2012 15:26:03 -0500
Subject: [R-SIG-Finance] date to index
In-Reply-To: <CAELivkJwKbP7fONpSh_jCjDmW7Yf5K0BaVwSwSuOBAW2p0A1bw@mail.gmail.com>
References: <CAELivkJu8=P5hMev=Qns_r_SyU=QbnaYMQQ2CezZVt-r1A5coA@mail.gmail.com>
	<CAPPM_gSQAAV9OMAiw-6_Xd_-wq8c-LOvCtwaeThrUraJcNukZg@mail.gmail.com>
	<CAPPM_gQvSmtHznotGabZ7AgiS2JZh0iA-n39yGxbvz_U6m+6ww@mail.gmail.com>
	<CAELivkKn3t5oFhPVuo1J3tnssKYVDL7LQnuuJnupnM6c2+RcRA@mail.gmail.com>
	<CAELivk+V=XEy5J-8OSVXNVe-ENMcwhP5pZHPfO_4Jt2fp63=Ww@mail.gmail.com>
	<CAPPM_gQruGKek4h3Yn0QuWkc5tRe+1WZHmYXiH5A=0tQ2YKusw@mail.gmail.com>
	<CAELivkJwKbP7fONpSh_jCjDmW7Yf5K0BaVwSwSuOBAW2p0A1bw@mail.gmail.com>
Message-ID: <1335817563.19734.89.camel@brian-rcg>

On Mon, 2012-04-30 at 16:15 -0400, Gordon Erlebacher wrote:
> I would have assumed the existence of a function in R to accomplish
> this.After all, a data frame is a list of columns, each column is a
> vector,which is indexed. We are not dealing with hash tables. 

As Josh already told you, and xts object and a data.frame have *nothing*
to do with each other.

Your example first creates a data.frame of row numbers, which could be
easily found via which()

Part of the difficult here is that *usually* if you are referring to row
numbers in an xts object, you're doing it wrong.  For time series data,
refer to the timestamp (the actual index), not to a row number.  You can
reference row numbers in xts, you just usually shouldn't.

  
-- 
Brian


From jeff.a.ryan at gmail.com  Mon Apr 30 22:32:38 2012
From: jeff.a.ryan at gmail.com (Jeffrey Ryan)
Date: Mon, 30 Apr 2012 15:32:38 -0500
Subject: [R-SIG-Finance] date to index
In-Reply-To: <CAELivkJwKbP7fONpSh_jCjDmW7Yf5K0BaVwSwSuOBAW2p0A1bw@mail.gmail.com>
Message-ID: <CBC4606E.3B33C%jeff.a.ryan@gmail.com>

Terminology is confusing in your posts, but I think this is what you want:

> AAPL['2007-01-10', which.i=TRUE]
[1] 6

Basically will get you the index position, without the subset (and
copies).  Of course the index itself is new to R, so it involved a Malloc
within... But I am sure you are expecting that.


W.r.t to subsetting without copying... You want something more like a
'view', which isn't supported.

Jeff

On 4/30/12 3:15 PM, "Gordon Erlebacher" <gordon.erlebach at gmail.com> wrote:

>Thanks Joshua. I'll be clearer. By index into an array, I mean "array
>index".
>
>> library("quantmod")
>> getSymbols("AAPL")
>> head(AAPL)
>           AAPL.Open AAPL.High AAPL.Low AAPL.Close AAPL.Volume
>AAPL.Adjusted
>2007-01-03     86.29     86.58    81.90      83.80    44225700
>83.80
>2007-01-04     84.05     85.95    83.82      85.66    30259300
>85.66
>2007-01-05     85.77     86.20    84.40      85.05    29812200
>85.05
>2007-01-08     85.96     86.53    85.28      85.47    28468100
>85.47
>2007-01-09     86.45     92.98    85.15      92.57   119617800
>92.57
>2007-01-10     94.75     97.80    93.45      97.00   105460000
>97.00
>
>
>The array index that corresponds to the data '2007-01-03' is 1. The index
>that corresponds to index '2007-01-10' is 6.
>
>So one solution to my problem is:
>
>> AAPL <- cbind(AAPL, index=1:length(AAPL[,1]))
>
>>  idx <- function(x, date) { return(x[date]$index) }
>
>> idx(AAPL, '2007-01-10')
>           index
>2007-01-10     6
>
>
>
>************
>
>To accomplish this required a cbind, where I added a column. Doesn't this
>construct a new data.frame with an additional column?
>
>I would have assumed the existence of a function in R to accomplish this.
>After all, a data frame is a list of columns, each column is a vector,
>which is indexed. We are not dealing with hash tables.
>
>******************************
>
>thanks!
>
>     Gordon
>
>
>
>
>
>PROBLEM:
>
>
>> I have a xts object. Given a date, how do I get the index into the
>>>> >> > array?
>>>> >> > Is there a pre-written function?
>
>
>
>
>
>On Mon, Apr 30, 2012 at 3:56 PM, Joshua Ulrich
><josh.m.ulrich at gmail.com>wrote:
>
>> You are confusing many things.
>>
>> 1) You asked how to add an element to the middle of a sorted array
>> (the index of an xts object), not how to add a column to a data.frame.
>> 2) xts objects are not related to data.frames at all.
>> 3) As I explained in my previous email, the index on xts/zoo objects
>> is an *attribute* of the object not a column in the underlying matrix.
>>
>> Perhaps we're speaking past each other a bit.  So I'll reiterate what
>> I said in my initial response to this thread: "An example would help."
>>
>>
>> On Mon, Apr 30, 2012 at 2:46 PM, Gordon Erlebacher
>> <gordon.erlebach at gmail.com> wrote:
>> > Adding a column to a data frame can be done without copying in several
>> > languages, since all one needs is to maintain a list of pointers to
>>the
>> > columns. You suggested I add a column of integers (the indices),
>>which is
>> > the logical approach, but for very large data frames, it is a waste of
>> > memory and time. However, it works.
>> >
>> >     Gordon
>> >
>> >
>> > On Mon, Apr 30, 2012 at 3:45 PM, Gordon Erlebacher
>> > <gordon.erlebach at gmail.com> wrote:
>> >>
>> >> Hi Jeff,
>> >>
>> >> You cannot insert an element within an array without copying. But
>>let us
>> >> do something simpler:
>> >>
>> >> df = data.frame(a=1:10, b=101:110)
>> >>
>> >> a = df[5:10]
>> >>
>> >> This can be done without copying in several languages. Not R (as far
>>as
>> I
>> >> know). In R, almost everything is done without copying, even when
>> copying is
>> >> not really required. On the other hand, R has many nice properties.
>> >>
>> >>      Gordon
>> >>
>> >>
>> >>
>> >> On Mon, Apr 30, 2012 at 3:43 PM, Joshua Ulrich
>><josh.m.ulrich at gmail.com
>> >
>> >> wrote:
>> >>>
>> >>> Please reply to the list, so others can benefit.
>> >>>
>> >>> On Mon, Apr 30, 2012 at 1:07 PM, Gordon Erlebacher
>> >>> <gordon.erlebach at gmail.com> wrote:
>> >>> > Yes, I have used that technique. Do not like it because the cya
>> >>> > structure
>> >>> > must be copied, inefficient. I try to minimize copies. It is
>>obvious
>> to
>> >>> > me
>> >>> > that r maintains this index column, internally perhaps. I will
>>adopt
>> >>> > your
>> >>> > approach then. Thanks.   Gordon.
>> >>> >
>> >>> Can you explain how would it be possible to insert a new element
>>into
>> >>> a sorted array without copying?  It's not clear to me how you could
>>do
>> >>> this in any language.
>> >>>
>> >>> The index in xts/zoo objects is an attribute attached to an
>>underlying
>> >>> matrix object.  It is not possible for the index to have a different
>> >>> number of elements than rows in the underlying matrix.
>> >>>
>> >>> > On Apr 30, 2012 1:42 PM, "Joshua Ulrich" <josh.m.ulrich at gmail.com>
>> >>> > wrote:
>> >>> >>
>> >>> >> It's not clear to me what you're trying to do.  An example would
>> help.
>> >>> >>
>> >>> >> My guess is that you're looking for something like this:
>> >>> >> x <- xts(1:10, Sys.Date()-10:1)
>> >>> >> rbind(x, xts(NA_integer_,Sys.Date()-11))
>> >>> >>
>> >>> >> Best,
>> >>> >> --
>> >>> >> Joshua Ulrich  |  FOSS Trading: www.fosstrading.com
>> >>> >>
>> >>> >> R/Finance 2012: Applied Finance with R
>> >>> >> www.RinFinance.com
>> >>> >>
>> >>> >>
>> >>> >> On Mon, Apr 30, 2012 at 12:38 PM, Gordon Erlebacher
>> >>> >> <gordon.erlebach at gmail.com> wrote:
>> >>> >> > Hi,
>> >>> >> >
>> >>> >> > I have a xts object. Given a date, how do I get the index into
>>the
>> >>> >> > array?
>> >>> >> > Is there a pre-written function?
>> >>> >> >
>> >>> >> > Thanks,
>> >>> >> >
>> >>> >> >  Gordon
>> >>> >> >
>> >>> >> >        [[alternative HTML version deleted]]
>> >>> >> >
>> >>> >> > _______________________________________________
>> >>> >> > R-SIG-Finance at r-project.org mailing list
>> >>> >> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> >>> >> > -- Subscriber-posting only. If you want to post, subscribe
>>first.
>> >>> >> > -- Also note that this is not the r-help list where general R
>> >>> >> > questions
>> >>> >> > should go.
>> >>
>> >>
>> >
>>
>
>	[[alternative HTML version deleted]]
>
>_______________________________________________
>R-SIG-Finance at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>-- Subscriber-posting only. If you want to post, subscribe first.
>-- Also note that this is not the r-help list where general R questions
>should go.


From gordon.erlebach at gmail.com  Mon Apr 30 22:34:47 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Mon, 30 Apr 2012 16:34:47 -0400
Subject: [R-SIG-Finance] date to index
In-Reply-To: <1335817563.19734.89.camel@brian-rcg>
References: <CAELivkJu8=P5hMev=Qns_r_SyU=QbnaYMQQ2CezZVt-r1A5coA@mail.gmail.com>
	<CAPPM_gSQAAV9OMAiw-6_Xd_-wq8c-LOvCtwaeThrUraJcNukZg@mail.gmail.com>
	<CAPPM_gQvSmtHznotGabZ7AgiS2JZh0iA-n39yGxbvz_U6m+6ww@mail.gmail.com>
	<CAELivkKn3t5oFhPVuo1J3tnssKYVDL7LQnuuJnupnM6c2+RcRA@mail.gmail.com>
	<CAELivk+V=XEy5J-8OSVXNVe-ENMcwhP5pZHPfO_4Jt2fp63=Ww@mail.gmail.com>
	<CAPPM_gQruGKek4h3Yn0QuWkc5tRe+1WZHmYXiH5A=0tQ2YKusw@mail.gmail.com>
	<CAELivkJwKbP7fONpSh_jCjDmW7Yf5K0BaVwSwSuOBAW2p0A1bw@mail.gmail.com>
	<1335817563.19734.89.camel@brian-rcg>
Message-ID: <CAELivkKKTqw3AzM-Qt1Y=fjyzTNVC4cxTQuZkyvDRpx2SoqMnQ@mail.gmail.com>

ok, thanks. Now I'll tell you what I am working on. I wish to enhance
Chart_Series and add_Series to add annotations to charts. For example, I,
say I have identified 20 days which have candlestick gaps, and I wish to
annotate the underlying candlestick chart. I would like to pass this array
of dates to chart_Series and place a symbol next to each of the 20
associated candles. The difficulty is that the text() function takes as its
first argument the integer index (the row number of the xts structure).

In any case, regardless of whether I am expressing myself correctly or not,
I do understand the differences between xts and data.frame, and I still
believe that there must be a way to go from date to row number when dealing
with xts objects. In the meantime, I'll implement the inefficient solution.

I am quite surprised that chart_Series (which is quite powerful, thanks)
does not have a built in annotation functionality.

I attach two images. One that I have created, and one, close to what I
would like to create. The image with the "G" is what I have done by
changing chart_Series.

Thanks for all your help and comments.


          Gordon



On Mon, Apr 30, 2012 at 4:26 PM, Brian G. Peterson <brian at braverock.com>wrote:

> On Mon, 2012-04-30 at 16:15 -0400, Gordon Erlebacher wrote:
> > I would have assumed the existence of a function in R to accomplish
> > this.After all, a data frame is a list of columns, each column is a
> > vector,which is indexed. We are not dealing with hash tables.
>
> As Josh already told you, and xts object and a data.frame have *nothing*
> to do with each other.
>
> Your example first creates a data.frame of row numbers, which could be
> easily found via which()
>
> Part of the difficult here is that *usually* if you are referring to row
> numbers in an xts object, you're doing it wrong.  For time series data,
> refer to the timestamp (the actual index), not to a row number.  You can
> reference row numbers in xts, you just usually shouldn't.
>
>
> --
> Brian
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120430/08e99a0c/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: candle_annotation.pdf
Type: application/pdf
Size: 15412 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120430/08e99a0c/attachment.pdf>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gaps_prota.pdf
Type: application/pdf
Size: 17956 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120430/08e99a0c/attachment-0001.pdf>

From gordon.erlebach at gmail.com  Mon Apr 30 22:38:22 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Mon, 30 Apr 2012 16:38:22 -0400
Subject: [R-SIG-Finance] date to index
In-Reply-To: <CBC4606E.3B33C%jeff.a.ryan@gmail.com>
References: <CAELivkJwKbP7fONpSh_jCjDmW7Yf5K0BaVwSwSuOBAW2p0A1bw@mail.gmail.com>
	<CBC4606E.3B33C%jeff.a.ryan@gmail.com>
Message-ID: <CAELivk+4RqgCaCNw59h8dCFvr-t40grvPsASdffqPdgSrkUP7w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120430/27f32179/attachment.pl>

From jeff.a.ryan at gmail.com  Mon Apr 30 23:13:01 2012
From: jeff.a.ryan at gmail.com (Jeffrey Ryan)
Date: Mon, 30 Apr 2012 16:13:01 -0500
Subject: [R-SIG-Finance] date to index
In-Reply-To: <CAELivk+4RqgCaCNw59h8dCFvr-t40grvPsASdffqPdgSrkUP7w@mail.gmail.com>
Message-ID: <CBC4690E.3B346%jeff.a.ryan@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120430/59b6a762/attachment.pl>

From josh.m.ulrich at gmail.com  Mon Apr 30 23:19:02 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 30 Apr 2012 16:19:02 -0500
Subject: [R-SIG-Finance] date to index
In-Reply-To: <CAELivkKKTqw3AzM-Qt1Y=fjyzTNVC4cxTQuZkyvDRpx2SoqMnQ@mail.gmail.com>
References: <CAELivkJu8=P5hMev=Qns_r_SyU=QbnaYMQQ2CezZVt-r1A5coA@mail.gmail.com>
	<CAPPM_gSQAAV9OMAiw-6_Xd_-wq8c-LOvCtwaeThrUraJcNukZg@mail.gmail.com>
	<CAPPM_gQvSmtHznotGabZ7AgiS2JZh0iA-n39yGxbvz_U6m+6ww@mail.gmail.com>
	<CAELivkKn3t5oFhPVuo1J3tnssKYVDL7LQnuuJnupnM6c2+RcRA@mail.gmail.com>
	<CAELivk+V=XEy5J-8OSVXNVe-ENMcwhP5pZHPfO_4Jt2fp63=Ww@mail.gmail.com>
	<CAPPM_gQruGKek4h3Yn0QuWkc5tRe+1WZHmYXiH5A=0tQ2YKusw@mail.gmail.com>
	<CAELivkJwKbP7fONpSh_jCjDmW7Yf5K0BaVwSwSuOBAW2p0A1bw@mail.gmail.com>
	<1335817563.19734.89.camel@brian-rcg>
	<CAELivkKKTqw3AzM-Qt1Y=fjyzTNVC4cxTQuZkyvDRpx2SoqMnQ@mail.gmail.com>
Message-ID: <CAPPM_gR1J_fGXwvwv7oCcvjyQXfCQPuvfcXk1=YyTnUZC3nO_w@mail.gmail.com>

Gordon,

On Mon, Apr 30, 2012 at 3:34 PM, Gordon Erlebacher
<gordon.erlebach at gmail.com> wrote:
>
> In any case, regardless of whether I am expressing myself correctly or not,
> I do understand the differences between xts and data.frame, and I still
> believe that there must be a way to go from date to row number when dealing
> with xts objects. In the meantime, I'll implement the inefficient solution.
>
I'm not sure you actually do understand the difference between xts and
data.frame.  Here's the example you provided:

library("quantmod")
getSymbols("AAPL")
AAPL <- cbind(AAPL, index=1:length(AAPL[,1]))
idx <- function(x, date) { return(x[date]$index) }
idx(AAPL, '2007-01-10')

And then you commented:

************
To accomplish this required a cbind, where I added a column. Doesn't
this construct a new data.frame with an additional column?

I would have assumed the existence of a function in R to accomplish
this. After all, a data frame is a list of columns, each column is a
vector, which is indexed. We are not dealing with hash tables.
******************************

You refer to data.frames several times, even though there is no
data.frame in your example.  You ask, "Doesn't this [cbind] construct
a new data.frame with an additional column?"  No, it doesn't!  It
creates a new xts object with an additional column.

Your next comment about data.frames is correct, but completely
unrelated because xts objects are completely unrelated to data.frames.

Best,
Josh

>
> Thanks for all your help and comments.
>
Glad you were finally able to get what you needed...

>
> ? ? ? ? ? Gordon
>
>
>
>
> On Mon, Apr 30, 2012 at 4:26 PM, Brian G. Peterson <brian at braverock.com>
> wrote:
>>
>> On Mon, 2012-04-30 at 16:15 -0400, Gordon Erlebacher wrote:
>> > I would have assumed the existence of a function in R to accomplish
>> > this.After all, a data frame is a list of columns, each column is a
>> > vector,which is indexed. We are not dealing with hash tables.
>>
>> As Josh already told you, and xts object and a data.frame have *nothing*
>> to do with each other.
>>
>> Your example first creates a data.frame of row numbers, which could be
>> easily found via which()
>>
>> Part of the difficult here is that *usually* if you are referring to row
>> numbers in an xts object, you're doing it wrong. ?For time series data,
>> refer to the timestamp (the actual index), not to a row number. ?You can
>> reference row numbers in xts, you just usually shouldn't.
>>
>>
>> --
>> Brian
>>
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.


From gordon.erlebach at gmail.com  Mon Apr 30 23:25:39 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Mon, 30 Apr 2012 17:25:39 -0400
Subject: [R-SIG-Finance] date to index
In-Reply-To: <CAPPM_gR1J_fGXwvwv7oCcvjyQXfCQPuvfcXk1=YyTnUZC3nO_w@mail.gmail.com>
References: <CAELivkJu8=P5hMev=Qns_r_SyU=QbnaYMQQ2CezZVt-r1A5coA@mail.gmail.com>
	<CAPPM_gSQAAV9OMAiw-6_Xd_-wq8c-LOvCtwaeThrUraJcNukZg@mail.gmail.com>
	<CAPPM_gQvSmtHznotGabZ7AgiS2JZh0iA-n39yGxbvz_U6m+6ww@mail.gmail.com>
	<CAELivkKn3t5oFhPVuo1J3tnssKYVDL7LQnuuJnupnM6c2+RcRA@mail.gmail.com>
	<CAELivk+V=XEy5J-8OSVXNVe-ENMcwhP5pZHPfO_4Jt2fp63=Ww@mail.gmail.com>
	<CAPPM_gQruGKek4h3Yn0QuWkc5tRe+1WZHmYXiH5A=0tQ2YKusw@mail.gmail.com>
	<CAELivkJwKbP7fONpSh_jCjDmW7Yf5K0BaVwSwSuOBAW2p0A1bw@mail.gmail.com>
	<1335817563.19734.89.camel@brian-rcg>
	<CAELivkKKTqw3AzM-Qt1Y=fjyzTNVC4cxTQuZkyvDRpx2SoqMnQ@mail.gmail.com>
	<CAPPM_gR1J_fGXwvwv7oCcvjyQXfCQPuvfcXk1=YyTnUZC3nO_w@mail.gmail.com>
Message-ID: <CAELivkKkauD=TOGWpN=LX1Y7kagtz7xM5xn5MQGezGBLNPXPcg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120430/3fa7a1b0/attachment.pl>

From student.northwestern at gmail.com  Mon Apr 30 23:35:27 2012
From: student.northwestern at gmail.com (jim green)
Date: Mon, 30 Apr 2012 14:35:27 -0700 (PDT)
Subject: [R-SIG-Finance] Rolling correlations with zoo object
In-Reply-To: <971536df0605220844k5a296a9by2c11fffe9f2ceab4@mail.gmail.com>
References: <OF6B1C4695.AB33D324-ON85257176.004D477A-85257176.004F0C66@worldbank.org>
	<971536df0605220824h11a8cb00gb41c653c00cd85e2@mail.gmail.com>
	<971536df0605220844k5a296a9by2c11fffe9f2ceab4@mail.gmail.com>
Message-ID: <1335821727832-4599459.post@n4.nabble.com>

Hi Gabor, it seems I can't reproduce your calculation and had problem at

system.time(corr.rapply <- rapply(cbind(x,y), 30, cor, by.column =
FALSE)[,3])

Could you pls advise?

Thanks!
Jim.

---- code ----
> set.seed(1)
> n <- 10000
x <- zoo(rnorm(n))
> x <- zoo(rnorm(n))

system.time({
        x. <- rollmean(x, 30)
        y. <- rollmean(y, 30)

        xx. <- rollmean(x*x, 30)
        yy. <- rollmean(y*y, 30)

        xy. <- rollmean(x*y, 30)
> y <- zoo(rnorm(n))

        corr <- (xy. - x. * y.) / sqrt((xx. - x.^2) * (yy. - y.^2))
})

system.time(corr.rapply <- rapply(cbind(x,y), 30, cor, by.column =
FALSE)[,3])

all.equal(corr, corr.rapply)

>
> system.time({
+         x. <- rollmean(x, 30)
+         y. <- rollmean(y, 30)
+
+         xx. <- rollmean(x*x, 30)
+         yy. <- rollmean(y*y, 30)
+
+         xy. <- rollmean(x*y, 30)
+
+         corr <- (xy. - x. * y.) / sqrt((xx. - x.^2) * (yy. - y.^2))
+ })
   user  system elapsed
  0.427   0.000   0.427
>
> system.time(corr.rapply <- rapply(cbind(x,y), 30, cor, by.column =
> FALSE)[,3])
Error in rapply(cbind(x, y), 30, cor, by.column = FALSE) :
  'object' must be a list
Timing stopped at: 0.034 0 0.034
>
> all.equal(corr, corr.rapply)
Error in mode(current) : object 'corr.rapply' not found


---- session info -------
> sessionInfo()
R version 2.14.2 (2012-02-29)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
[1] C

attached base packages:
[1] graphics  grDevices utils     datasets  stats     methods   base

other attached packages:
 [1] PerformanceAnalytics_1.0.3.2 quantstrat_0.6.3
 [3] blotter_0.8.4                FinancialInstrument_0.13.1
 [5] RPostgreSQL_0.3-2            DBI_0.2-5
 [7] quantmod_0.3-17              TTR_0.21-0
 [9] Defaults_1.1-1               xts_0.8-6
[11] zoo_1.7-7

loaded via a namespace (and not attached):
[1] grid_2.14.2    lattice_0.20-0





--
View this message in context: http://r.789695.n4.nabble.com/Rolling-correlations-with-zoo-object-tp926073p4599459.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From noahsilverman at ucla.edu  Mon Apr 30 23:36:42 2012
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Mon, 30 Apr 2012 14:36:42 -0700
Subject: [R-SIG-Finance] Historical data for single dates
In-Reply-To: <3AFBD9DD-9605-4BAB-89CA-7F98465C7A9A@ucla.edu>
References: <3AFBD9DD-9605-4BAB-89CA-7F98465C7A9A@ucla.edu>
Message-ID: <200D7710-6C09-484A-802A-A66B9847FDBA@ucla.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120430/aec55044/attachment.pl>

From ggrothendieck at gmail.com  Mon Apr 30 23:46:38 2012
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 30 Apr 2012 17:46:38 -0400
Subject: [R-SIG-Finance] [R-sig-Finance] Rolling correlations with zoo
	object
In-Reply-To: <971536df0605220844k5a296a9by2c11fffe9f2ceab4@mail.gmail.com>
References: <OF6B1C4695.AB33D324-ON85257176.004D477A-85257176.004F0C66@worldbank.org>
	<971536df0605220824h11a8cb00gb41c653c00cd85e2@mail.gmail.com>
	<971536df0605220844k5a296a9by2c11fffe9f2ceab4@mail.gmail.com>
Message-ID: <CAP01uRnDBeX-OZvQ0niwqKa-_YhmqW-SgvwCRXjNFYYzqo3XxA@mail.gmail.com>

Hi, That's from 6 years ago and things have changed.  The core of R
introduced a rapply command not connected with time series so zoo
renamed its rapply command to rollapply.  Also there are some small
details that work differently now too.  Try this.  Regards.


set.seed(1)
n <- 10000
x <- zoo(rnorm(n))
y <- zoo(rnorm(n))

system.time({

       x. <- rollmean(x, 30)
       y. <- rollmean(y, 30)

       xx. <- rollmean(x*x, 30)
       yy. <- rollmean(y*y, 30)

       xy. <- rollmean(x*y, 30)

       corr <- (xy. - x. * y.) / sqrt((xx. - x.^2) * (yy. - y.^2))
})

kor <- function(x) cor(x)[3]
system.time(corr.rollapply <- rollapply(cbind(x,y), 30, kor, by.column = FALSE))

all.equal(corr, corr.rollapply)


On Mon, May 22, 2006 at 11:44 AM, Gabor Grothendieck
<ggrothendieck at gmail.com> wrote:
> Sorry. ?I did not enclose everything in system.time so the timing
> was incomplete. ?Here it is again. ?Doing it properly like this
> gives a 2.7x speedup.
>
>
>
> set.seed(1)
> n <- 10000
> x <- zoo(rnorm(n))
> y <- zoo(rnorm(n))
>
> system.time({
>
> ? ? ? ?x. <- rollmean(x, 30)
> ? ? ? ?y. <- rollmean(y, 30)
>
> ? ? ? ?xx. <- rollmean(x*x, 30)
> ? ? ? ?yy. <- rollmean(y*y, 30)
>
> ? ? ? ?xy. <- rollmean(x*y, 30)
>
> ? ? ? ?corr <- (xy. - x. * y.) / sqrt((xx. - x.^2) * (yy. - y.^2))
> })
>
> system.time(corr.rapply <- rapply(cbind(x,y), 30, cor, by.column =
> FALSE)[,3])
>
> all.equal(corr, corr.rapply)
>
>
>
>
>
> On 5/22/06, Gabor Grothendieck <ggrothendieck at gmail.com> wrote:
>>
>> rollmean is much faster than rapply so use the fact that we
>> can calculate correlations in terms of means, means of squares
>> and means of cross products. ? Doing this appears to be 4.6x
>> faster for this example:
>>
>> > library(zoo)
>> > set.seed(1)
>> > n <- 10000
>> > x <- zoo(rnorm(n))
>> > y <- zoo(rnorm(n))
>> >
>> > x. <- rollmean(x, 30)
>> > y. <- rollmean(y, 30)
>> >
>> > xx. <- rollmean(x*x, 30)
>> > yy. <- rollmean(y*y, 30)
>> >
>> > xy. <- rollmean(x*y, 30)
>> >
>> > system.time(out <- (xy. - x. * y.) / sqrt((xx. - x.^2) * (yy. - y.^2)))
>> [1] 0.94 0.12 1.45 ? NA ? NA
>> >
>> > system.time(out.rapply <- rapply(cbind(x,y), 30, cor, by.column =
>> > FALSE)[,3])
>> [1] ?4.35 ?0.34 16.21 ? ?NA ? ?NA
>> >
>> > all.equal(out, out.rapply)
>> [1] TRUE
>> >
>> > R.version.string # XP
>> [1] "R version 2.2.1, 2005-12-20"
>>
>>
>> On 5/22/06, jladekarl at worldbank.org <jladekarl at worldbank.org> wrote:
>> > I'm a novice user of R so, please, excuse me for asking a basic question
>> > I hope
>> > there is a basic answer to:
>> >
>> > I have tried to created a correlation matrix using a "zoo object". ?I
>> > don't have
>> > any issues using the cor("zoo data") function, but when I try to expand
>> > the
>> > process by introducing rolling correlations I run into problems. I have
>> > created
>> > a workaround using "rapply" specifying the exact variables to use,
>> > rather than
>> > the general zoo object, but it's not very practical solution for large
>> > matrixes.
>> > Any hints?
>> >
>> > Jeppe
>> >
>> > ##Connect to Bloomberg through session "conn"
>> > conn <- blpConnect ()
>> >
>> > ##download currency data for the last 3 years into a zoo object called
>> > "data"
>> > data <- blpGetData(conn, c("EUR Curncy", "CHF Curncy"), "PX Last",
>> > start=as.chron(Sys.time() - 86400 * (3*365)))
>> >
>> > ##End Bloomberg Session "conn"
>> > blpDisconnect(conn)
>> >
>> > #plot running correlation estimated by last 30 observations rolling by
>> > "1"
>> > EUR.chf.cor <- rapply(data[,c("EUR CURNCY", "CHF CURNCY")], 30,
>> > function(x) cor(x[,1], x[,2]), by = 1, by.column = FALSE)
>> > plot(EUR.chf.cor)
>> >
>> > _______________________________________________
>> > R-SIG-Finance at stat.math.ethz.ch mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> >
>>
>



-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From student.northwestern at gmail.com  Mon Apr 30 23:49:28 2012
From: student.northwestern at gmail.com (jim green)
Date: Mon, 30 Apr 2012 14:49:28 -0700 (PDT)
Subject: [R-SIG-Finance] [R-sig-Finance] Rolling correlations with zoo
	object
In-Reply-To: <CAP01uRnDBeX-OZvQ0niwqKa-_YhmqW-SgvwCRXjNFYYzqo3XxA@mail.gmail.com>
References: <OF6B1C4695.AB33D324-ON85257176.004D477A-85257176.004F0C66@worldbank.org>
	<971536df0605220824h11a8cb00gb41c653c00cd85e2@mail.gmail.com>
	<971536df0605220844k5a296a9by2c11fffe9f2ceab4@mail.gmail.com>
	<CAP01uRnDBeX-OZvQ0niwqKa-_YhmqW-SgvwCRXjNFYYzqo3XxA@mail.gmail.com>
Message-ID: <1335822568404-4599489.post@n4.nabble.com>

Thanks Gabor, it works great now!

Jim.

--
View this message in context: http://r.789695.n4.nabble.com/Rolling-correlations-with-zoo-object-tp926073p4599489.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From student.northwestern at gmail.com  Tue May  1 06:53:44 2012
From: student.northwestern at gmail.com (jim green)
Date: Mon, 30 Apr 2012 21:53:44 -0700 (PDT)
Subject: [R-SIG-Finance] Handling half hourly data from electricity
	markets
In-Reply-To: <BANLkTinhfX=Yo5KiP2Zs1Z6aUVpuxiX+ng@mail.gmail.com>
References: <42CD7E9FF8F8164CA3BBD8FD84D7C7210547611F@swhexprod.hydrotasmania.com.au>
	<BANLkTinhfX=Yo5KiP2Zs1Z6aUVpuxiX+ng@mail.gmail.com>
Message-ID: <1335848024511-4600106.post@n4.nabble.com>

Hi, 

I came across this message and found:

the years function doesn't work, actuall in zoo docomentation there is no
years function..

aggregate(cbind(X1, X2, X3) ~ peak + years(Date), DF, mean)


I tried 
aggregate(cbind(X1, X2, X3) ~ peak + as.numeric(format(Date,format='%Y')),
DF, mean)
aggregate(cbind(X1, X2, X3) ~ peak + as.POSIXlt(Date)$year+1900, DF, mean)

but both don't work either..

Could someone pls advise?

Thanks!
Jim.

--
View this message in context: http://r.789695.n4.nabble.com/Handling-half-hourly-data-from-electricity-markets-tp3616106p4600106.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From kktrash.k at gmail.com  Tue May  1 13:04:45 2012
From: kktrash.k at gmail.com (Karim)
Date: Tue, 1 May 2012 13:04:45 +0200
Subject: [R-SIG-Finance] Time indexation after selection in an xts object
Message-ID: <4f9fc35a.e950b40a.6b95.71a1@mx.google.com>

Hi,

 

My xts object : SP500TiSa

 

> head(SP500TiSa)

 

                        BID  OFR   PRICE SIZE
2012-01-23 06:00:58 1306.75 1307 1307.00    2
2012-01-23 06:00:58 1306.75 1307 1306.75    6
2012-01-23 06:00:58 1306.75 1307 1307.00    1
2012-01-23 06:00:58 1306.75 1307 1307.00    2
2012-01-23 06:00:59 1306.75 1307 1307.00    1
2012-01-23 06:00:59 1306.75 1307 1307.00    1

 

What I want to do is to calculate the cumulated sum of the column SIZE of
the records of day 2012-01-24 but I want the resulting selection to keep the
time information

 

> s=cumsum(SP500TiSa$SIZE['2012-01-24'])
 

 

When I plot s, that's ok, I have the time information on the x-axis of the
graph :

 

> plot(s,type="l")
 

 
But when I display s on the console :

 

> head(s)
           SIZE
2012-01-24    4
2012-01-24    5
2012-01-24    6
2012-01-24   16
2012-01-24   17
2012-01-24   32
 
We have only the day information on the index. The time info is lost, how to
keep it ?
 
Thank you

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120501/85b5ff0f/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 12714 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120501/85b5ff0f/attachment.jpe>

From josh.m.ulrich at gmail.com  Tue May  1 15:40:43 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 1 May 2012 08:40:43 -0500
Subject: [R-SIG-Finance] Time indexation after selection in an xts object
In-Reply-To: <4f9fc35a.e950b40a.6b95.71a1@mx.google.com>
References: <4f9fc35a.e950b40a.6b95.71a1@mx.google.com>
Message-ID: <CAPPM_gS4VVETFE-6OwA501NxHO6U7Q2brwXc29=T81iEcWTiHA@mail.gmail.com>

I cannot replicate this behavior.  Please provide a reproducible example.

> library(xts)
> set.seed(21)
> x <- .xts(trunc(runif(1e4)*10), 1:1e4, dimnames=list(NULL,"SIZE"))
> s <- cumsum(x$SIZE['1969-12-31'])
> head(s)
                    SIZE
1969-12-31 18:00:01    7
1969-12-31 18:00:02    9
1969-12-31 18:00:03   15
1969-12-31 18:00:04   16
1969-12-31 18:00:05   25
1969-12-31 18:00:06   34
> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252
[2] LC_CTYPE=English_United States.1252
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] xts_0.8-6 zoo_1.7-7

loaded via a namespace (and not attached):
[1] grid_2.15.0    lattice_0.20-6

Best,
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com


On Tue, May 1, 2012 at 6:04 AM, Karim <kktrash.k at gmail.com> wrote:
>
> Hi,
>
> My xts object?: SP500TiSa
>
> > head(SP500TiSa)
>
> ??????????????????????? BID? OFR?? PRICE SIZE
> 2012-01-23 06:00:58 1306.75 1307 1307.00??? 2
> 2012-01-23 06:00:58 1306.75 1307 1306.75??? 6
> 2012-01-23 06:00:58 1306.75 1307 1307.00??? 1
> 2012-01-23 06:00:58 1306.75 1307 1307.00??? 2
> 2012-01-23 06:00:59 1306.75 1307 1307.00??? 1
> 2012-01-23 06:00:59 1306.75 1307 1307.00??? 1
>
> What I want to do is to calculate the cumulated sum of the column SIZE of the records of day 2012-01-24 but I want the resulting selection to keep the time information
>
> > s=cumsum(SP500TiSa$SIZE['2012-01-24'])
>
>
> When I plot s, that?s ok, I have the time information on the x-axis of the graph :
>
> > plot(s,type="l")
>
>
> But when I display s on the console :
>
> > head(s)
> ?????????? SIZE
> 2012-01-24??? 4
> 2012-01-24??? 5
> 2012-01-24??? 6
> 2012-01-24?? 16
> 2012-01-24?? 17
> 2012-01-24?? 32
>
> We have only the day information on the index. The time info is lost, how to keep it ?
>
> Thank you
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From kktrash.k at gmail.com  Tue May  1 17:40:09 2012
From: kktrash.k at gmail.com (Karim)
Date: Tue, 1 May 2012 17:40:09 +0200
Subject: [R-SIG-Finance] Time indexation after selection in an xts object
In-Reply-To: <CAPPM_gS4VVETFE-6OwA501NxHO6U7Q2brwXc29=T81iEcWTiHA@mail.gmail.com>
Message-ID: <4fa003e8.6468b40a.5464.fffff2a0@mx.google.com>

I could send the file itself, but maybe that's because the index is not
unique? (yours is unique)
> sessionInfo() 
R version 2.14.1 (2011-12-22)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=French_France.1252  LC_CTYPE=French_France.1252
LC_MONETARY=French_France.1252 LC_NUMERIC=C                  
[5] LC_TIME=French_France.1252    

attached base packages:
[1] datasets  stats     graphics  grDevices utils     methods   base     

other attached packages:
 [1] RTAQ_0.1                   timeDate_2131.00           quantstrat_0.6.4
blotter_0.8.4             
 [5] FinancialInstrument_0.13.6 quantmod_0.3-17            TTR_0.21-0
xts_0.8-2                 
 [9] zoo_1.7-7                  Defaults_1.1-1
randomForest_4.6-6         RRF_1.1                   
[13] fractal_1.1-1              scatterplot3d_0.3-33       akima_0.5-7
wmtsa_1.1-1               
[17] sapa_1.1-0                 ifultools_1.1-2            MASS_7.3-16
splus2R_1.1-0             
[21] RODBC_1.3-4               

loaded via a namespace (and not attached):
[1] grid_2.14.1    lattice_0.20-0 tools_2.14.1

-----Message d'origine-----
De?: Joshua Ulrich [mailto:josh.m.ulrich at gmail.com] 
Envoy??: mardi 1 mai 2012 15:41
??: Karim
Cc?: r-sig-finance at r-project.org
Objet?: Re: [R-SIG-Finance] Time indexation after selection in an xts object

I cannot replicate this behavior.  Please provide a reproducible example.

> library(xts)
> set.seed(21)
> x <- .xts(trunc(runif(1e4)*10), 1:1e4, dimnames=list(NULL,"SIZE"))
> s <- cumsum(x$SIZE['1969-12-31'])
> head(s)
                    SIZE
1969-12-31 18:00:01    7
1969-12-31 18:00:02    9
1969-12-31 18:00:03   15
1969-12-31 18:00:04   16
1969-12-31 18:00:05   25
1969-12-31 18:00:06   34
> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252
[2] LC_CTYPE=English_United States.1252
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] xts_0.8-6 zoo_1.7-7

loaded via a namespace (and not attached):
[1] grid_2.15.0    lattice_0.20-6

Best,
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com


On Tue, May 1, 2012 at 6:04 AM, Karim <kktrash.k at gmail.com> wrote:
>
> Hi,
>
> My xts object?: SP500TiSa
>
> > head(SP500TiSa)
>
> ??????????????????????? BID? OFR?? PRICE SIZE
> 2012-01-23 06:00:58 1306.75 1307 1307.00??? 2
> 2012-01-23 06:00:58 1306.75 1307 1306.75??? 6
> 2012-01-23 06:00:58 1306.75 1307 1307.00??? 1
> 2012-01-23 06:00:58 1306.75 1307 1307.00??? 2
> 2012-01-23 06:00:59 1306.75 1307 1307.00??? 1
> 2012-01-23 06:00:59 1306.75 1307 1307.00??? 1
>
> What I want to do is to calculate the cumulated sum of the column SIZE of
the records of day 2012-01-24 but I want the resulting selection to keep the
time information
>
> > s=cumsum(SP500TiSa$SIZE['2012-01-24'])
>
>
> When I plot s, that?s ok, I have the time information on the x-axis of the
graph :
>
> > plot(s,type="l")
>
>
> But when I display s on the console :
>
> > head(s)
> ?????????? SIZE
> 2012-01-24??? 4
> 2012-01-24??? 5
> 2012-01-24??? 6
> 2012-01-24?? 16
> 2012-01-24?? 17
> 2012-01-24?? 32
>
> We have only the day information on the index. The time info is lost, how
to keep it ?
>
> Thank you
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
should go.
-----
Aucun virus trouv? dans ce message.
Analyse effectu?e par AVG - www.avg.fr
Version: 2012.0.1913 / Base de donn?es virale: 2411/4971 - Date: 01/05/2012


From michael.weylandt at gmail.com  Tue May  1 17:45:35 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Tue, 1 May 2012 11:45:35 -0400
Subject: [R-SIG-Finance] Time indexation after selection in an xts object
In-Reply-To: <4fa003e8.6468b40a.5464.fffff2a0@mx.google.com>
References: <CAPPM_gS4VVETFE-6OwA501NxHO6U7Q2brwXc29=T81iEcWTiHA@mail.gmail.com>
	<4fa003e8.6468b40a.5464.fffff2a0@mx.google.com>
Message-ID: <CAAmySGN3+Qucs1RT6=dTMf91JjfvaB9d4zbdHvfR8GG6-_fbVA@mail.gmail.com>

Your xts is a little out of date, I doubt that that's relevant but it
might not hurt to just go ahead and update.

But yes, sending the file (just a small sample thereof) would help --
the easiest way to do so would be to type

dput(head(x, 30)) # x is name of your object

and send us the textual output produced.

Michael

On Tue, May 1, 2012 at 11:40 AM, Karim <kktrash.k at gmail.com> wrote:
> I could send the file itself, but maybe that's because the index is not
> unique? (yours is unique)
>> sessionInfo()
> R version 2.14.1 (2011-12-22)
> Platform: i386-pc-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=French_France.1252 ?LC_CTYPE=French_France.1252
> LC_MONETARY=French_France.1252 LC_NUMERIC=C
> [5] LC_TIME=French_France.1252
>
> attached base packages:
> [1] datasets ?stats ? ? graphics ?grDevices utils ? ? methods ? base
>
> other attached packages:
> ?[1] RTAQ_0.1 ? ? ? ? ? ? ? ? ? timeDate_2131.00 ? ? ? ? ? quantstrat_0.6.4
> blotter_0.8.4
> ?[5] FinancialInstrument_0.13.6 quantmod_0.3-17 ? ? ? ? ? ?TTR_0.21-0
> xts_0.8-2
> ?[9] zoo_1.7-7 ? ? ? ? ? ? ? ? ?Defaults_1.1-1
> randomForest_4.6-6 ? ? ? ? RRF_1.1
> [13] fractal_1.1-1 ? ? ? ? ? ? ?scatterplot3d_0.3-33 ? ? ? akima_0.5-7
> wmtsa_1.1-1
> [17] sapa_1.1-0 ? ? ? ? ? ? ? ? ifultools_1.1-2 ? ? ? ? ? ?MASS_7.3-16
> splus2R_1.1-0
> [21] RODBC_1.3-4
>
> loaded via a namespace (and not attached):
> [1] grid_2.14.1 ? ?lattice_0.20-0 tools_2.14.1
>
> -----Message d'origine-----
> De?: Joshua Ulrich [mailto:josh.m.ulrich at gmail.com]
> Envoy??: mardi 1 mai 2012 15:41
> ??: Karim
> Cc?: r-sig-finance at r-project.org
> Objet?: Re: [R-SIG-Finance] Time indexation after selection in an xts object
>
> I cannot replicate this behavior. ?Please provide a reproducible example.
>
>> library(xts)
>> set.seed(21)
>> x <- .xts(trunc(runif(1e4)*10), 1:1e4, dimnames=list(NULL,"SIZE"))
>> s <- cumsum(x$SIZE['1969-12-31'])
>> head(s)
> ? ? ? ? ? ? ? ? ? ?SIZE
> 1969-12-31 18:00:01 ? ?7
> 1969-12-31 18:00:02 ? ?9
> 1969-12-31 18:00:03 ? 15
> 1969-12-31 18:00:04 ? 16
> 1969-12-31 18:00:05 ? 25
> 1969-12-31 18:00:06 ? 34
>> sessionInfo()
> R version 2.15.0 (2012-03-30)
> Platform: i386-pc-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=English_United States.1252
> [2] LC_CTYPE=English_United States.1252
> [3] LC_MONETARY=English_United States.1252
> [4] LC_NUMERIC=C
> [5] LC_TIME=English_United States.1252
>
> attached base packages:
> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>
> other attached packages:
> [1] xts_0.8-6 zoo_1.7-7
>
> loaded via a namespace (and not attached):
> [1] grid_2.15.0 ? ?lattice_0.20-6
>
> Best,
> --
> Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com
>
> R/Finance 2012: Applied Finance with R
> www.RinFinance.com
>
>
> On Tue, May 1, 2012 at 6:04 AM, Karim <kktrash.k at gmail.com> wrote:
>>
>> Hi,
>>
>> My xts object?: SP500TiSa
>>
>> > head(SP500TiSa)
>>
>> ??????????????????????? BID? OFR?? PRICE SIZE
>> 2012-01-23 06:00:58 1306.75 1307 1307.00??? 2
>> 2012-01-23 06:00:58 1306.75 1307 1306.75??? 6
>> 2012-01-23 06:00:58 1306.75 1307 1307.00??? 1
>> 2012-01-23 06:00:58 1306.75 1307 1307.00??? 2
>> 2012-01-23 06:00:59 1306.75 1307 1307.00??? 1
>> 2012-01-23 06:00:59 1306.75 1307 1307.00??? 1
>>
>> What I want to do is to calculate the cumulated sum of the column SIZE of
> the records of day 2012-01-24 but I want the resulting selection to keep the
> time information
>>
>> > s=cumsum(SP500TiSa$SIZE['2012-01-24'])
>>
>>
>> When I plot s, that?s ok, I have the time information on the x-axis of the
> graph :
>>
>> > plot(s,type="l")
>>
>>
>> But when I display s on the console :
>>
>> > head(s)
>> ?????????? SIZE
>> 2012-01-24??? 4
>> 2012-01-24??? 5
>> 2012-01-24??? 6
>> 2012-01-24?? 16
>> 2012-01-24?? 17
>> 2012-01-24?? 32
>>
>> We have only the day information on the index. The time info is lost, how
> to keep it ?
>>
>> Thank you
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
> should go.
> -----
> Aucun virus trouv? dans ce message.
> Analyse effectu?e par AVG - www.avg.fr
> Version: 2012.0.1913 / Base de donn?es virale: 2411/4971 - Date: 01/05/2012
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jeff.a.ryan at gmail.com  Tue May  1 17:46:25 2012
From: jeff.a.ryan at gmail.com (Jeffrey Ryan)
Date: Tue, 01 May 2012 10:46:25 -0500
Subject: [R-SIG-Finance] Time indexation after selection in an xts object
In-Reply-To: <4fa003e8.6468b40a.5464.fffff2a0@mx.google.com>
Message-ID: <CBC56EB2.3BA0A%jeff.a.ryan@gmail.com>

The point is not to guess.  We need a reproducible example to be able to
debug anything.  This is reiterated in posting guidelines and is the only
route apart from being psychic.

Don't send the file, rather try and create a minimal example that isolates
the issue.  Only xts and zoo on your search path to start, and only the
example data you are showing.  It is VERY likely that timeDate is an
issue, or something upstream.

Again, distill to the minimal code that can reproduce the error, or it is
simply not possible for anyone to take the time to guess.  It is free
software, not free support per se.  Though we are very inclined to help,
but you must show that you are helping as well, not just asking for help.

Thanks,
Jeff

On 5/1/12 10:40 AM, "Karim" <kktrash.k at gmail.com> wrote:

>I could send the file itself, but maybe that's because the index is not
>unique? (yours is unique)
>> sessionInfo() 
>R version 2.14.1 (2011-12-22)
>Platform: i386-pc-mingw32/i386 (32-bit)
>
>locale:
>[1] LC_COLLATE=French_France.1252  LC_CTYPE=French_France.1252
>LC_MONETARY=French_France.1252 LC_NUMERIC=C
>[5] LC_TIME=French_France.1252
>
>attached base packages:
>[1] datasets  stats     graphics  grDevices utils     methods   base
>
>other attached packages:
> [1] RTAQ_0.1                   timeDate_2131.00
>quantstrat_0.6.4
>blotter_0.8.4     
> [5] FinancialInstrument_0.13.6 quantmod_0.3-17            TTR_0.21-0
>xts_0.8-2         
> [9] zoo_1.7-7                  Defaults_1.1-1
>randomForest_4.6-6         RRF_1.1
>[13] fractal_1.1-1              scatterplot3d_0.3-33       akima_0.5-7
>wmtsa_1.1-1       
>[17] sapa_1.1-0                 ifultools_1.1-2            MASS_7.3-16
>splus2R_1.1-0     
>[21] RODBC_1.3-4  
>
>loaded via a namespace (and not attached):
>[1] grid_2.14.1    lattice_0.20-0 tools_2.14.1
>
>-----Message d'origine-----
>De : Joshua Ulrich [mailto:josh.m.ulrich at gmail.com]
>Envoy? : mardi 1 mai 2012 15:41
>? : Karim
>Cc : r-sig-finance at r-project.org
>Objet : Re: [R-SIG-Finance] Time indexation after selection in an xts
>object
>
>I cannot replicate this behavior.  Please provide a reproducible example.
>
>> library(xts)
>> set.seed(21)
>> x <- .xts(trunc(runif(1e4)*10), 1:1e4, dimnames=list(NULL,"SIZE"))
>> s <- cumsum(x$SIZE['1969-12-31'])
>> head(s)
>                    SIZE
>1969-12-31 18:00:01    7
>1969-12-31 18:00:02    9
>1969-12-31 18:00:03   15
>1969-12-31 18:00:04   16
>1969-12-31 18:00:05   25
>1969-12-31 18:00:06   34
>> sessionInfo()
>R version 2.15.0 (2012-03-30)
>Platform: i386-pc-mingw32/i386 (32-bit)
>
>locale:
>[1] LC_COLLATE=English_United States.1252
>[2] LC_CTYPE=English_United States.1252
>[3] LC_MONETARY=English_United States.1252
>[4] LC_NUMERIC=C
>[5] LC_TIME=English_United States.1252
>
>attached base packages:
>[1] stats     graphics  grDevices utils     datasets  methods   base
>
>other attached packages:
>[1] xts_0.8-6 zoo_1.7-7
>
>loaded via a namespace (and not attached):
>[1] grid_2.15.0    lattice_0.20-6
>
>Best,
>--
>Joshua Ulrich  |  FOSS Trading: www.fosstrading.com
>
>R/Finance 2012: Applied Finance with R
>www.RinFinance.com
>
>
>On Tue, May 1, 2012 at 6:04 AM, Karim <kktrash.k at gmail.com> wrote:
>>
>> Hi,
>>
>> My xts object : SP500TiSa
>>
>> > head(SP500TiSa)
>>
>>                         BID  OFR   PRICE SIZE
>> 2012-01-23 06:00:58 1306.75 1307 1307.00    2
>> 2012-01-23 06:00:58 1306.75 1307 1306.75    6
>> 2012-01-23 06:00:58 1306.75 1307 1307.00    1
>> 2012-01-23 06:00:58 1306.75 1307 1307.00    2
>> 2012-01-23 06:00:59 1306.75 1307 1307.00    1
>> 2012-01-23 06:00:59 1306.75 1307 1307.00    1
>>
>> What I want to do is to calculate the cumulated sum of the column SIZE
>>of
>the records of day 2012-01-24 but I want the resulting selection to keep
>the
>time information
>>
>> > s=cumsum(SP500TiSa$SIZE['2012-01-24'])
>>
>>
>> When I plot s, that?s ok, I have the time information on the x-axis of
>>the
>graph :
>>
>> > plot(s,type="l")
>>
>>
>> But when I display s on the console :
>>
>> > head(s)
>>            SIZE
>> 2012-01-24    4
>> 2012-01-24    5
>> 2012-01-24    6
>> 2012-01-24   16
>> 2012-01-24   17
>> 2012-01-24   32
>>
>> We have only the day information on the index. The time info is lost,
>>how
>to keep it ?
>>
>> Thank you
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>should go.
>-----
>Aucun virus trouv? dans ce message.
>Analyse effectu?e par AVG - www.avg.fr
>Version: 2012.0.1913 / Base de donn?es virale: 2411/4971 - Date:
>01/05/2012
>
>_______________________________________________
>R-SIG-Finance at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>-- Subscriber-posting only. If you want to post, subscribe first.
>-- Also note that this is not the r-help list where general R questions
>should go.


From josh.m.ulrich at gmail.com  Tue May  1 17:48:06 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 1 May 2012 10:48:06 -0500
Subject: [R-SIG-Finance] Time indexation after selection in an xts object
In-Reply-To: <4fa003e8.6468b40a.5464.fffff2a0@mx.google.com>
References: <CAPPM_gS4VVETFE-6OwA501NxHO6U7Q2brwXc29=T81iEcWTiHA@mail.gmail.com>
	<4fa003e8.6468b40a.5464.fffff2a0@mx.google.com>
Message-ID: <CAPPM_gT40bLtq=zTCUdEf5js3se-h6UWhkQS+hC+BztXP+M6+Q@mail.gmail.com>

It's not because the index isn't unique.

> set.seed(21)
> x <- .xts(trunc(runif(1e4)*10), 1:1e4, dimnames=list(NULL,"SIZE"))
> x <- rbind(x,x)
> s <- cumsum(x$SIZE['1969-12-31'])
> head(s)
                    SIZE
1969-12-31 18:00:01    7
1969-12-31 18:00:01   14
1969-12-31 18:00:02   16
1969-12-31 18:00:02   18
1969-12-31 18:00:03   24
1969-12-31 18:00:03   30

--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com


On Tue, May 1, 2012 at 10:40 AM, Karim <kktrash.k at gmail.com> wrote:
> I could send the file itself, but maybe that's because the index is not
> unique? (yours is unique)
>> sessionInfo()
> R version 2.14.1 (2011-12-22)
> Platform: i386-pc-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=French_France.1252 ?LC_CTYPE=French_France.1252
> LC_MONETARY=French_France.1252 LC_NUMERIC=C
> [5] LC_TIME=French_France.1252
>
> attached base packages:
> [1] datasets ?stats ? ? graphics ?grDevices utils ? ? methods ? base
>
> other attached packages:
> ?[1] RTAQ_0.1 ? ? ? ? ? ? ? ? ? timeDate_2131.00 ? ? ? ? ? quantstrat_0.6.4
> blotter_0.8.4
> ?[5] FinancialInstrument_0.13.6 quantmod_0.3-17 ? ? ? ? ? ?TTR_0.21-0
> xts_0.8-2
> ?[9] zoo_1.7-7 ? ? ? ? ? ? ? ? ?Defaults_1.1-1
> randomForest_4.6-6 ? ? ? ? RRF_1.1
> [13] fractal_1.1-1 ? ? ? ? ? ? ?scatterplot3d_0.3-33 ? ? ? akima_0.5-7
> wmtsa_1.1-1
> [17] sapa_1.1-0 ? ? ? ? ? ? ? ? ifultools_1.1-2 ? ? ? ? ? ?MASS_7.3-16
> splus2R_1.1-0
> [21] RODBC_1.3-4
>
> loaded via a namespace (and not attached):
> [1] grid_2.14.1 ? ?lattice_0.20-0 tools_2.14.1
>
> -----Message d'origine-----
> De?: Joshua Ulrich [mailto:josh.m.ulrich at gmail.com]
> Envoy??: mardi 1 mai 2012 15:41
> ??: Karim
> Cc?: r-sig-finance at r-project.org
> Objet?: Re: [R-SIG-Finance] Time indexation after selection in an xts object
>
> I cannot replicate this behavior. ?Please provide a reproducible example.
>
>> library(xts)
>> set.seed(21)
>> x <- .xts(trunc(runif(1e4)*10), 1:1e4, dimnames=list(NULL,"SIZE"))
>> s <- cumsum(x$SIZE['1969-12-31'])
>> head(s)
> ? ? ? ? ? ? ? ? ? ?SIZE
> 1969-12-31 18:00:01 ? ?7
> 1969-12-31 18:00:02 ? ?9
> 1969-12-31 18:00:03 ? 15
> 1969-12-31 18:00:04 ? 16
> 1969-12-31 18:00:05 ? 25
> 1969-12-31 18:00:06 ? 34
>> sessionInfo()
> R version 2.15.0 (2012-03-30)
> Platform: i386-pc-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=English_United States.1252
> [2] LC_CTYPE=English_United States.1252
> [3] LC_MONETARY=English_United States.1252
> [4] LC_NUMERIC=C
> [5] LC_TIME=English_United States.1252
>
> attached base packages:
> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>
> other attached packages:
> [1] xts_0.8-6 zoo_1.7-7
>
> loaded via a namespace (and not attached):
> [1] grid_2.15.0 ? ?lattice_0.20-6
>
> Best,
> --
> Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com
>
> R/Finance 2012: Applied Finance with R
> www.RinFinance.com
>
>
> On Tue, May 1, 2012 at 6:04 AM, Karim <kktrash.k at gmail.com> wrote:
>>
>> Hi,
>>
>> My xts object?: SP500TiSa
>>
>> > head(SP500TiSa)
>>
>> ??????????????????????? BID? OFR?? PRICE SIZE
>> 2012-01-23 06:00:58 1306.75 1307 1307.00??? 2
>> 2012-01-23 06:00:58 1306.75 1307 1306.75??? 6
>> 2012-01-23 06:00:58 1306.75 1307 1307.00??? 1
>> 2012-01-23 06:00:58 1306.75 1307 1307.00??? 2
>> 2012-01-23 06:00:59 1306.75 1307 1307.00??? 1
>> 2012-01-23 06:00:59 1306.75 1307 1307.00??? 1
>>
>> What I want to do is to calculate the cumulated sum of the column SIZE of
> the records of day 2012-01-24 but I want the resulting selection to keep the
> time information
>>
>> > s=cumsum(SP500TiSa$SIZE['2012-01-24'])
>>
>>
>> When I plot s, that?s ok, I have the time information on the x-axis of the
> graph :
>>
>> > plot(s,type="l")
>>
>>
>> But when I display s on the console :
>>
>> > head(s)
>> ?????????? SIZE
>> 2012-01-24??? 4
>> 2012-01-24??? 5
>> 2012-01-24??? 6
>> 2012-01-24?? 16
>> 2012-01-24?? 17
>> 2012-01-24?? 32
>>
>> We have only the day information on the index. The time info is lost, how
> to keep it ?
>>
>> Thank you
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
> should go.
> -----
> Aucun virus trouv? dans ce message.
> Analyse effectu?e par AVG - www.avg.fr
> Version: 2012.0.1913 / Base de donn?es virale: 2411/4971 - Date: 01/05/2012
>


From kktrash.k at gmail.com  Tue May  1 20:11:29 2012
From: kktrash.k at gmail.com (Karim)
Date: Tue, 1 May 2012 20:11:29 +0200
Subject: [R-SIG-Finance] Time indexation after selection in an xts object
In-Reply-To: <CAPPM_gT40bLtq=zTCUdEf5js3se-h6UWhkQS+hC+BztXP+M6+Q@mail.gmail.com>
Message-ID: <4fa02761.e967b40a.7866.ffffd9ab@mx.google.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120501/f570b314/attachment.pl>

From student.northwestern at gmail.com  Wed May  2 00:46:17 2012
From: student.northwestern at gmail.com (jim green)
Date: Tue, 1 May 2012 15:46:17 -0700 (PDT)
Subject: [R-SIG-Finance] Handling half hourly data from electricity
	markets
In-Reply-To: <1335883956647-4600905.post@n4.nabble.com>
References: <42CD7E9FF8F8164CA3BBD8FD84D7C7210547611F@swhexprod.hydrotasmania.com.au>
	<BANLkTinhfX=Yo5KiP2Zs1Z6aUVpuxiX+ng@mail.gmail.com>
	<1335848024511-4600106.post@n4.nabble.com>
	<1335883956647-4600905.post@n4.nabble.com>
Message-ID: <1335912377647-4601924.post@n4.nabble.com>


Rui Barradas wrote
> 
> Hello,
> 
> 
> jim green wrote
>> 
>> Hi, 
>> 
>> I came across this message and found:
>> 
>> the years function doesn't work, actuall in zoo docomentation there is no
>> years function..
>> 
>> aggregate(cbind(X1, X2, X3) ~ peak + years(Date), DF, mean)
>> 
>> 
>> I tried 
>> aggregate(cbind(X1, X2, X3) ~ peak +
>> as.numeric(format(Date,format='%Y')), DF, mean)
>> aggregate(cbind(X1, X2, X3) ~ peak + as.POSIXlt(Date)$year+1900, DF,
>> mean)
>> 
>> but both don't work either..
>> 
>> Could someone pls advise?
>> 
>> Thanks!
>> Jim.
>> 
> 
> Function years exists, but in package chron.
> 
> With DF as above, Gabor's solution works.
> 
> library(chron)
> aggregate(cbind(X1, X2, X3) ~ peak + years(Date), DF, mean)
>    peak years(Date)     X1     X2     X3
> 1 FALSE        2011 19.845 16.450 19.565
> 2  TRUE        2011 16.490 15.000 15.090
> 3  TRUE        2012  7.025  7.175  6.130
> 
> Hope this helps,
> 
> Rui Barradas
> 

Thanks Rui, it works now!
Jim.


--
View this message in context: http://r.789695.n4.nabble.com/Handling-half-hourly-data-from-electricity-markets-tp3616106p4601924.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From student.northwestern at gmail.com  Wed May  2 06:00:12 2012
From: student.northwestern at gmail.com (Jim Green)
Date: Wed, 2 May 2012 00:00:12 -0400
Subject: [R-SIG-Finance] quantstrat with intraday data
Message-ID: <CACAe89y6pTTDKOkXR+W1Pmwe6JiVZ3Ud8wGTazoC_MF7joPOGQ@mail.gmail.com>

Greetings!
Pls forgive me if this is an old topic. I have searched through list
archives extensively but I am just not sure if I am using quantstrat
correctly with intraday data.

I've attached sample minute ohlc data. after loading it, an xts object
spy.test would be populated as shown below:

> nrow(spy.test)
[1] 1074
> head(spy.test)
                    spy.Open spy.High spy.Low spy.Close spy.Volume
2012-03-29 07:32:00   140.14   140.15  140.14    140.15        800
2012-03-29 07:33:00   140.15   140.15  140.14    140.14       2700
2012-03-29 07:36:00   140.16   140.16  140.12    140.12       5105
2012-03-29 07:40:00   140.17   140.17  140.17    140.17        200
2012-03-29 07:41:00   140.15   140.16  140.15    140.16       1798
2012-03-29 07:42:00   140.16   140.16  140.16    140.16       2052
> tail(spy.test)
                    spy.Open spy.High spy.Low spy.Close spy.Volume
2012-03-30 16:26:00   140.86   140.87  140.85    140.87      10900
2012-03-30 16:27:00   140.86   140.86  140.79    140.79      27770
2012-03-30 16:28:00   140.84   140.86  140.84    140.86      20400
2012-03-30 16:29:00   140.85   140.86  140.84    140.86      18500
2012-03-30 16:30:00   140.86   140.86  140.85    140.85      11035
2012-03-30 16:31:00   140.85   140.86  140.85    140.85       1100


Currently I use something similar to attached test.R to do intraday
work. in the code I liquidate everything before close so that I don't
need to worry about splits and dividends. Is what I am doing the
correct way of using quantstrat with intraday data?

Also if in future I will hold overnight positions, How would I make
sure dividends and splits are correctly adjusted for pnl and summary
statistics? would underlying blotter be smart enough to handle all the
housekeeping?

Thanks!

Jim.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: spy.test.Rdata
Type: application/octet-stream
Size: 14694 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120502/2cddb991/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.R
Type: application/octet-stream
Size: 2994 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120502/2cddb991/attachment-0001.obj>

From stanley.neo at gmail.com  Wed May  2 07:28:03 2012
From: stanley.neo at gmail.com (Stanley Neo)
Date: Wed, 2 May 2012 13:28:03 +0800
Subject: [R-SIG-Finance] Help! NAs and errors in ugarchfit ...
Message-ID: <CACgTbns1uZRZdkpZmYgHRNKxOEiewtfKBgJmZ7W9Ljio1SX05g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120502/01fb4984/attachment.pl>

From krisanharia at gmail.com  Wed May  2 10:46:54 2012
From: krisanharia at gmail.com (krisan haria)
Date: Wed, 2 May 2012 09:46:54 +0100
Subject: [R-SIG-Finance] issue on data import to pgAdminIII
Message-ID: <CALHdMsW6VRSYE6jNGnfBTVMwinu6cerpwV9VPx=GZKYu410=9w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120502/18d40679/attachment.pl>

From brian at braverock.com  Wed May  2 11:26:44 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 02 May 2012 04:26:44 -0500
Subject: [R-SIG-Finance] issue on data import to pgAdminIII
In-Reply-To: <CALHdMsW6VRSYE6jNGnfBTVMwinu6cerpwV9VPx=GZKYu410=9w@mail.gmail.com>
References: <CALHdMsW6VRSYE6jNGnfBTVMwinu6cerpwV9VPx=GZKYu410=9w@mail.gmail.com>
Message-ID: <1335950804.31501.5.camel@brian-desktop>

On Wed, 2012-05-02 at 09:46 +0100, krisan haria wrote:
> 
> I trying to use the function dbWriteTable to write data from R into
> pgAdminIII
> 
> The table is called price and the column within in price is called
> pricelevel

While you may be trying to use the database to do finance, this question
has nothing to do with finance.

> Any idea on what I'm doing wrong?

1> you posted to the wrong mailing list.
R-SIG-DB or R-Help would have been more appropriate.

2> You did not follow the Posting guide:
http://www.r-project.org/posting-guide.html

3> (sub of 2)  you did not provide a minimal reproducible example

> The version of R is 2.13.1 

4> you're using a very old version of R

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From papa.senyo at yahoo.it  Wed May  2 14:03:45 2012
From: papa.senyo at yahoo.it (Papa sen)
Date: Wed, 2 May 2012 13:03:45 +0100 (BST)
Subject: [R-SIG-Finance] Back test report in Rugarch
Message-ID: <1335960225.15948.YahooMailNeo@web132304.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120502/37c1a2af/attachment.pl>

From brian at braverock.com  Wed May  2 14:14:30 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 02 May 2012 07:14:30 -0500
Subject: [R-SIG-Finance] Back test report in Rugarch
In-Reply-To: <1335960225.15948.YahooMailNeo@web132304.mail.ird.yahoo.com>
References: <1335960225.15948.YahooMailNeo@web132304.mail.ird.yahoo.com>
Message-ID: <1335960870.19734.121.camel@brian-rcg>

You have not followed the posting guid and provided a minimally
reproducible example.

On Wed, 2012-05-02 at 13:03 +0100, Papa sen wrote:
> Dear all,
> Please I did backtesting using rugarch and got the following. Finding it difficult to make sense of out of the result.
> Please any help would be appreciated. I need some few comments. Also it appears that the backtest length does not change (i may be wrong)Find the output below:
> VaR Backtest Report


From brian at braverock.com  Wed May  2 15:02:54 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 02 May 2012 08:02:54 -0500
Subject: [R-SIG-Finance] quantstrat with intraday data
In-Reply-To: <CACAe89y6pTTDKOkXR+W1Pmwe6JiVZ3Ud8wGTazoC_MF7joPOGQ@mail.gmail.com>
References: <CACAe89y6pTTDKOkXR+W1Pmwe6JiVZ3Ud8wGTazoC_MF7joPOGQ@mail.gmail.com>
Message-ID: <1335963774.19734.128.camel@brian-rcg>

On Wed, 2012-05-02 at 00:00 -0400, Jim Green wrote:
> Greetings!
> Pls forgive me if this is an old topic. I have searched through list
> archives extensively but I am just not sure if I am using quantstrat
> correctly with intraday data.
<...>
> Currently I use something similar to attached test.R to do intraday
> work. in the code I liquidate everything before close so that I don't
> need to worry about splits and dividends. Is what I am doing the
> correct way of using quantstrat with intraday data?

That's certainly the easiest answer.

blotter contains some support for dividends, but it is only lightly
tested, since I personally don't need that functionality.  Additional
testing, direct feedback, and patches are always welcome.  Participation
by users is one of the ways these packages grow over time.  (and feel
free to take those conversations off-list)

> Also if in future I will hold overnight positions, How would I make
> sure dividends and splits are correctly adjusted for pnl and summary
> statistics? would underlying blotter be smart enough to handle all the
> housekeeping?

No Guarantees (of course that's true of everything in R).

My recollection is that the addDiv function will add cash to your
account to cover dividends.  

I don't believe that there is a function for splits.  You'd likely need
to write that, we'd love the contribution.  It shouldn't be hard, as all
that needs to happen is that you add a transaction for the split with a
price of zero, adding more shares and lowering your average cost to
compensate for the split.

As xts gains support for differing column classes this summer as part of
the funded GSoC project, it will get easier to add additional
information to transactions that will definitely include transaction
type.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From john.kerpel at gmail.com  Wed May  2 15:09:21 2012
From: john.kerpel at gmail.com (John Kerpel)
Date: Wed, 2 May 2012 08:09:21 -0500
Subject: [R-SIG-Finance] Back test report in Rugarch
In-Reply-To: <1335960225.15948.YahooMailNeo@web132304.mail.ird.yahoo.com>
References: <1335960225.15948.YahooMailNeo@web132304.mail.ird.yahoo.com>
Message-ID: <CAALU2hsbmTThCKQnQrJ3YmQQ+Jy_cmpfJAQZhGywn+9N4Bnpmg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120502/74bdb04f/attachment.pl>

From papa.senyo at yahoo.it  Wed May  2 15:25:39 2012
From: papa.senyo at yahoo.it (Papa sen)
Date: Wed, 2 May 2012 14:25:39 +0100 (BST)
Subject: [R-SIG-Finance] Back test report in Rugarch
In-Reply-To: <CAALU2hsbmTThCKQnQrJ3YmQQ+Jy_cmpfJAQZhGywn+9N4Bnpmg@mail.gmail.com>
References: <1335960225.15948.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<CAALU2hsbmTThCKQnQrJ3YmQQ+Jy_cmpfJAQZhGywn+9N4Bnpmg@mail.gmail.com>
Message-ID: <1335965139.62709.YahooMailNeo@web132304.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120502/e97fbb7c/attachment.pl>

From alexios at 4dscape.com  Wed May  2 15:49:36 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Wed, 02 May 2012 14:49:36 +0100
Subject: [R-SIG-Finance] Back test report in Rugarch
In-Reply-To: <1335965139.62709.YahooMailNeo@web132304.mail.ird.yahoo.com>
References: <1335960225.15948.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<CAALU2hsbmTThCKQnQrJ3YmQQ+Jy_cmpfJAQZhGywn+9N4Bnpmg@mail.gmail.com>
	<1335965139.62709.YahooMailNeo@web132304.mail.ird.yahoo.com>
Message-ID: <4FA13B70.60609@4dscape.com>

What are you having trouble understanding? The Null Hypothesis is 
clearly stated and the test also provides the 'decision' on whether to 
reject the Null at the given confidence level.
Type ?VaRTest if you want a more detailed description of what each 
parameter means, or read the vignette for a description of what the test 
does with the literature reference.
As to the backtest length "not changing", you do not state under which 
circumstances you experienced such as an error. From your code you 
requested a forecast length of 500 which is what you got in the 
resulting output.

-Alexios

On 02/05/2012 14:25, Papa sen wrote:
> Please find some sample codes:
>   rollD = ugarchroll(spec4, data = as.numeric(ret), n.ahead = 1, forecast.length = 500,
>   refit.every = 25, refit.window = "recursive", parallel = TRUE,
>   parallel.control = list(pkg = "snowfall", cores = 10), solver = "solnp",
>   solver.control = list(tol = 1e-05, delta = 1e-06, trace = 0),
>   calculate.VaR = TRUE, VaR.alpha = c(0.010, 0.05))
>
> report(rollD, type = "VaR", n.ahead = 1, VaR.alpha = 0.01, conf.level = 0.95)
> report(rollD, type="fpm")
>
>
>
> ________________________________
>   Da: John Kerpel<john.kerpel at gmail.com>
>
> Cc: "r-sig-finance at r-project.org"<r-sig-finance at r-project.org>
> Inviato: Mercoled? 2 Maggio 2012 15:09
> Oggetto: Re: [R-SIG-Finance] Back test report in Rugarch
>
>
> Are you using the ugarchroll method?  Show some code...
>
>
>
>
> Dear all,
>> Please I did backtesting using rugarch and got the following. Finding it difficult to make sense of out of the result.
>> Please any help would be appreciated. I need some few comments.  Also it appears that the backtest length does not change (i may be wrong)Find the output below:
>> VaR Backtest Report
>> ===========================================
>> Model:                          fGARCH-std
>> Backtest Length:        500
>> Data:
>> ==========================================
>> alpha:                          1%
>> Expected Exceed:        5
>> Actual VaR Exceed:      4
>> Actual %:                       0.8%
>> Unconditional Coverage (Kupiec)
>> Null-Hypothesis:        Correct Exceedances
>> LR.uc Statistic:        0.217
>> LR.uc Critical:         3.841
>> LR.uc p-value:          0.641
>> Reject Null:            NO
>> Conditional Coverage (Christoffersen)
>> Null-Hypothesis:        Correct Exceedances&
>>                                          Independence of Failures
>> LR.cc Statistic:        0.282
>> LR.cc Critical:         5.991
>> LR.cc p-value:          0.869
>> Reject Null:            NO
>> kind regards,
>> paps
>>         [[alternative HTML version deleted]]
>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
> 	[[alternative HTML version deleted]]
>
>
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From john.kerpel at gmail.com  Wed May  2 16:01:53 2012
From: john.kerpel at gmail.com (John Kerpel)
Date: Wed, 2 May 2012 09:01:53 -0500
Subject: [R-SIG-Finance] Back test report in Rugarch
In-Reply-To: <1335965139.62709.YahooMailNeo@web132304.mail.ird.yahoo.com>
References: <1335960225.15948.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<CAALU2hsbmTThCKQnQrJ3YmQQ+Jy_cmpfJAQZhGywn+9N4Bnpmg@mail.gmail.com>
	<1335965139.62709.YahooMailNeo@web132304.mail.ird.yahoo.com>
Message-ID: <CAALU2hvrFjf28xbZH7M2eP01yUyQUx8K1xbuVASjRN3nuomiRA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120502/a674fef8/attachment.pl>

From papa.senyo at yahoo.it  Wed May  2 16:35:33 2012
From: papa.senyo at yahoo.it (Papa sen)
Date: Wed, 2 May 2012 15:35:33 +0100 (BST)
Subject: [R-SIG-Finance] Back test report in Rugarch
In-Reply-To: <4FA13B70.60609@4dscape.com>
References: <1335960225.15948.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<CAALU2hsbmTThCKQnQrJ3YmQQ+Jy_cmpfJAQZhGywn+9N4Bnpmg@mail.gmail.com>
	<1335965139.62709.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<4FA13B70.60609@4dscape.com>
Message-ID: <1335969333.40126.YahooMailNeo@web132303.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120502/4a3af813/attachment.pl>

From brian at braverock.com  Wed May  2 16:47:03 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 02 May 2012 09:47:03 -0500
Subject: [R-SIG-Finance] Back test report in Rugarch
In-Reply-To: <1335969333.40126.YahooMailNeo@web132303.mail.ird.yahoo.com>
References: <1335960225.15948.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<CAALU2hsbmTThCKQnQrJ3YmQQ+Jy_cmpfJAQZhGywn+9N4Bnpmg@mail.gmail.com>
	<1335965139.62709.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<4FA13B70.60609@4dscape.com>
	<1335969333.40126.YahooMailNeo@web132303.mail.ird.yahoo.com>
Message-ID: <1335970023.29163.7.camel@brian-rcg>

On Wed, 2012-05-02 at 15:35 +0100, Papa sen wrote:
> Thanks so much for your comments. However, Alexios, I used the same
> codes and changed the backtest length =875 and yet got a report of 500
> to be the backtest length.

without more information, I don't think we know how long your series
is....  There is a certain minimum amount of data to make the model.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From alexios at 4dscape.com  Wed May  2 16:51:00 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Wed, 02 May 2012 15:51:00 +0100
Subject: [R-SIG-Finance] Back test report in Rugarch
In-Reply-To: <1335969333.40126.YahooMailNeo@web132303.mail.ird.yahoo.com>
References: <1335960225.15948.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<CAALU2hsbmTThCKQnQrJ3YmQQ+Jy_cmpfJAQZhGywn+9N4Bnpmg@mail.gmail.com>
	<1335965139.62709.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<4FA13B70.60609@4dscape.com>
	<1335969333.40126.YahooMailNeo@web132303.mail.ird.yahoo.com>
Message-ID: <4FA149D4.1010708@4dscape.com>

Have you checked your data and code carefully?
e.g. Does your data have 975+ points (875 for forecast and 100 for 
initializing the rolling estimation)?

I can't replicate your error and it is likely that you have forgotten 
something:

library(rugarch)
data(sp500ret)
spec=ugarchspec()
rollD2 = ugarchroll(spec, data = as.numeric(sp500ret[1:975,1]), n.ahead 
= 1, forecast.length = 875,
refit.every = 25, refit.window = "recursive", parallel = TRUE,
parallel.control = list(pkg = "snowfall", cores = 10), solver = "solnp",
solver.control = list(tol = 1e-05, delta = 1e-06, trace = 0),
calculate.VaR = TRUE, VaR.alpha = c(0.010, 0.05))

report(rollD2, type = "VaR", n.ahead = 1, VaR.alpha = 0.01, conf.level = 
0.95)
################################
Backtest Length:        875
################################

Please check your code VERY carefully before submitting.

-Alexios



On 02/05/2012 15:35, Papa sen wrote:
> Dear alexios and kerpel,
> Thanks so much for your comments. However, Alexios, I used the same
> codes and changed the backtest length =875 and yet got a report of 500
> to be the backtest length.
> Kind regards,
> p.s
>
> ------------------------------------------------------------------------
> *Da:* alexios ghalanos <alexios at 4dscape.com>
> *A:* Papa sen <papa.senyo at yahoo.it>
> *Cc:* "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
> *Inviato:* Mercoled? 2 Maggio 2012 15:49
> *Oggetto:* Re: [R-SIG-Finance] Back test report in Rugarch
>
> What are you having trouble understanding? The Null Hypothesis is
> clearly stated and the test also provides the 'decision' on whether to
> reject the Null at the given confidence level.
> Type ?VaRTest if you want a more detailed description of what each
> parameter means, or read the vignette for a description of what the test
> does with the literature reference.
> As to the backtest length "not changing", you do not state under which
> circumstances you experienced such as an error. From your code you
> requested a forecast length of 500 which is what you got in the
> resulting output.
>
> -Alexios
>
> On 02/05/2012 14:25, Papa sen wrote:
>  > Please find some sample codes:
>  > rollD = ugarchroll(spec4, data = as.numeric(ret), n.ahead = 1,
> forecast.length = 500,
>  > refit.every = 25, refit.window = "recursive", parallel = TRUE,
>  > parallel.control = list(pkg = "snowfall", cores = 10), solver = "solnp",
>  > solver.control = list(tol = 1e-05, delta = 1e-06, trace = 0),
>  > calculate.VaR = TRUE, VaR.alpha = c(0.010, 0.05))
>  >
>  > report(rollD, type = "VaR", n.ahead = 1, VaR.alpha = 0.01, conf.level
> = 0.95)
>  > report(rollD, type="fpm")
>  >
>  >
>  >
>  > ________________________________
>  > Da: John Kerpel<john.kerpel at gmail.com <mailto:john.kerpel at gmail.com>>
>  >
>  > Cc: "r-sig-finance at r-project.org
> <mailto:r-sig-finance at r-project.org>"<r-sig-finance at r-project.org
> <mailto:r-sig-finance at r-project.org>>
>  > Inviato: Mercoled? 2 Maggio 2012 15:09
>  > Oggetto: Re: [R-SIG-Finance] Back test report in Rugarch
>  >
>  >
>  > Are you using the ugarchroll method? Show some code...
>  >
>  >
>  >
>  >
>  > Dear all,
>  >> Please I did backtesting using rugarch and got the following.
> Finding it difficult to make sense of out of the result.
>  >> Please any help would be appreciated. I need some few comments. Also
> it appears that the backtest length does not change (i may be wrong)Find
> the output below:
>  >> VaR Backtest Report
>  >> ===========================================
>  >> Model: fGARCH-std
>  >> Backtest Length: 500
>  >> Data:
>  >> ==========================================
>  >> alpha: 1%
>  >> Expected Exceed: 5
>  >> Actual VaR Exceed: 4
>  >> Actual %: 0.8%
>  >> Unconditional Coverage (Kupiec)
>  >> Null-Hypothesis: Correct Exceedances
>  >> LR.uc Statistic: 0.217
>  >> LR.uc Critical: 3.841
>  >> LR.uc p-value: 0.641
>  >> Reject Null: NO
>  >> Conditional Coverage (Christoffersen)
>  >> Null-Hypothesis: Correct Exceedances&
>  >> Independence of Failures
>  >> LR.cc Statistic: 0.282
>  >> LR.cc Critical: 5.991
>  >> LR.cc p-value: 0.869
>  >> Reject Null: NO
>  >> kind regards,
>  >> paps
>  >> [[alternative HTML version deleted]]
>  >>
>  >>
>  >> _______________________________________________
>  >> R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org>
> mailing list
>  >> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>  >> -- Subscriber-posting only. If you want to post, subscribe first.
>  >> -- Also note that this is not the r-help list where general R
> questions should go.
>  >>
>  > [[alternative HTML version deleted]]
>  >
>  >
>  >
>  >
>  > _______________________________________________
>  > R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org>
> mailing list
>  > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>  > -- Subscriber-posting only. If you want to post, subscribe first.
>  > -- Also note that this is not the r-help list where general R
> questions should go.
>
>
>


From papa.senyo at yahoo.it  Wed May  2 17:03:21 2012
From: papa.senyo at yahoo.it (Papa sen)
Date: Wed, 2 May 2012 16:03:21 +0100 (BST)
Subject: [R-SIG-Finance] Back test report in Rugarch
In-Reply-To: <4FA149D4.1010708@4dscape.com>
References: <1335960225.15948.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<CAALU2hsbmTThCKQnQrJ3YmQQ+Jy_cmpfJAQZhGywn+9N4Bnpmg@mail.gmail.com>
	<1335965139.62709.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<4FA13B70.60609@4dscape.com>
	<1335969333.40126.YahooMailNeo@web132303.mail.ird.yahoo.com>
	<4FA149D4.1010708@4dscape.com>
Message-ID: <1335971001.76056.YahooMailNeo@web132302.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120502/3b179b63/attachment.pl>

From gsee000 at gmail.com  Wed May  2 17:04:11 2012
From: gsee000 at gmail.com (G See)
Date: Wed, 2 May 2012 10:04:11 -0500
Subject: [R-SIG-Finance] quantstrat with intraday data
In-Reply-To: <1335963774.19734.128.camel@brian-rcg>
References: <CACAe89y6pTTDKOkXR+W1Pmwe6JiVZ3Ud8wGTazoC_MF7joPOGQ@mail.gmail.com>
	<1335963774.19734.128.camel@brian-rcg>
Message-ID: <CA+xi=qZ6pNtD9p7=pP7hsemUpHmCKQUakk+B+qVe2P-BNtPJrg@mail.gmail.com>

As an alternative to adjusting for dividends in quantstrat or blotter,
my qmao package (https://r-forge.r-project.org/R/?group_id=1113) has
two functions that adjust intraday data for dividends.

`adjustIntraday.yahoo` will download dividend data from yahoo and
calculate daily ratios.  Those ratios will then be applied to intraday
data.

`AddCumDiv` simply adds back all dividends to the price series.

With adjustIntraday.yahoo, the most recent observations will be the
same as the unadjusted data, but the older observations will be lower
than those that are unadjusted.

With AddCumDiv, the oldest observations will be the same for the
adjusted and unadjusted data, but the most recent observations will be
higher for AddCumDiv.

Although I believe these functions work like they're supposed to, they
have not been rigorously tested, so YMMV.  bug reports encouraged.

Since I just committed the AddCumDiv function a few minutes ago, it is
not yet in the R-Forge build (although it is in the repo if you know
how to svn checkout).  Since it's not in the build yet, I attached it.

Regards,
Garrett

On Wed, May 2, 2012 at 8:02 AM, Brian G. Peterson <brian at braverock.com> wrote:
> On Wed, 2012-05-02 at 00:00 -0400, Jim Green wrote:
>> Greetings!
>> Pls forgive me if this is an old topic. I have searched through list
>> archives extensively but I am just not sure if I am using quantstrat
>> correctly with intraday data.
> <...>
>> Currently I use something similar to attached test.R to do intraday
>> work. in the code I liquidate everything before close so that I don't
>> need to worry about splits and dividends. Is what I am doing the
>> correct way of using quantstrat with intraday data?
>
> That's certainly the easiest answer.
>
> blotter contains some support for dividends, but it is only lightly
> tested, since I personally don't need that functionality. ?Additional
> testing, direct feedback, and patches are always welcome. ?Participation
> by users is one of the ways these packages grow over time. ?(and feel
> free to take those conversations off-list)
>
>> Also if in future I will hold overnight positions, How would I make
>> sure dividends and splits are correctly adjusted for pnl and summary
>> statistics? would underlying blotter be smart enough to handle all the
>> housekeeping?
>
> No Guarantees (of course that's true of everything in R).
>
> My recollection is that the addDiv function will add cash to your
> account to cover dividends.
>
> I don't believe that there is a function for splits. ?You'd likely need
> to write that, we'd love the contribution. ?It shouldn't be hard, as all
> that needs to happen is that you add a transaction for the split with a
> price of zero, adding more shares and lowering your average cost to
> compensate for the split.
>
> As xts gains support for differing column classes this summer as part of
> the funded GSoC project, it will get easier to add additional
> information to transactions that will definitely include transaction
> type.
>
> Regards,
>
> ? - Brian
>
> --
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: AddCumDiv.R
Type: application/octet-stream
Size: 3461 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120502/e1c13821/attachment.obj>

From iva_mihaylova at mail.ru  Wed May  2 18:02:53 2012
From: iva_mihaylova at mail.ru (Ivette)
Date: Wed, 2 May 2012 09:02:53 -0700 (PDT)
Subject: [R-SIG-Finance] calibration of GARCH models to futures data
Message-ID: <1335974573779-4603646.post@n4.nabble.com>

 I have done the usual estimation of GARCH models with R, applied to my
historical dataset (commodities futures) with a maximum likelihood function
and selected the best model on the basis of information criteria (AIC, BIC). 

 Can somebody explain me  the calibration scheme for a GARCH model with
futures data? 

 I was not able to find a paper, dealing with exactly this algorithm for my
case. I only understood from the unrelated calibration literature that in
general I have to compare the performance of the best model (from the
estimation step), fitted to my historical dataset and a  simulation (let's
abbreviate this Squared Error difference to "E2"). 

 However, it is not clear to me: 
 - with what parameters' values to start this simulation, 
 - how many times it is normal to perform it, 
 - what to compare via E2 (maximum likelihood values, or parameter values) 
 - how to construct & assess E2 for the GARCH case. 

 Thank you in advance for your suggestions. 
 
 Ivette


--
View this message in context: http://r.789695.n4.nabble.com/calibration-of-GARCH-models-to-futures-data-tp4603646.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Wed May  2 18:05:01 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 02 May 2012 11:05:01 -0500
Subject: [R-SIG-Finance] One week to R/Finance
In-Reply-To: <20356.51676.813575.539682@max.nulle.part>
References: <20327.58740.398600.251335@max.nulle.part>
	<20356.51676.813575.539682@max.nulle.part>
Message-ID: <1335974701.29163.13.camel@brian-rcg>

We have a little over a week left till R/Finance Chicago, and it is
shaping up to be a full house as usual.  There is still a little room
left in all of the optional pre-conference seminars, so I expect those
to fill up soon.

Details and registration are in the links below.  
Looking forward to meeting you in Chicago,

 - Brian

> On 19 March 2012 at 21:03, Dirk Eddelbuettel wrote:
> | 
> | The registration for R/Finance 2012 -- which will take place May 11 and 12
> | in Chicago -- is NOW OPEN!
> |  
> | Building on the success of the three previous conferences in 2009, 2010,
> | and 2011, we expect more than 250 attendees from around the world.  R
> | users from industry, academia, and government will join 40+ presenters
> | covering all areas of finance with R.
> | 
> | This year's conference will start earlier in the day on Friday, to
> | accommodate the tremendous line up of speakers for 2012, as well as to
> | provide more time between talks for networking.
> | 
> | We are very excited about the four keynotes by Paul Gilbert, Blair
> | Hull, Rob McCulloch, and Simon Urbanek.  The main agenda includes
> | nineteen full presentations and eighteen shorter "lightning talks".
> | We are also excited to offer six optional pre-conference seminars on
> | Friday morning.
> | 
> | Once again, we are hosting the R/Finance conference dinner on Friday
> | evening, where you can continue conversations while dining and
> | drinking atop a West Loop restaurant overlooking the Chicago skyline.
> | 
> | More details of the agenda are available at:
> | 
> |    http://www.RinFinance.com/agenda/
> | 
> | Registration information is available at 
> | 
> |    http://www.RinFinance.com/register/
> | 
> | and can also be directly accessed by going to
> | 
> |    http://www.regonline.com/RFinance2012
> | 
> | 
> | On behalf of the committee and sponsors, we look forward to seeing you
> | in Chicago!
> | 
> |    Gib Bassett, Peter Carl, Dirk Eddelbuettel, Brian Peterson,
> |    Dale Rosenthal, Jeffrey Ryan, Joshua Ulrich
> | 
> | 
> | Our 2012 Sponsors:
> | 
> |    International Center for Futures and Derivatives at UIC
> | 
> |    Revolution Analytics
> |    MS-Computational Finance at University of Washington
> | 
> |    Google
> |    lemnica
> |    OpenGamma
> |    OneTick
> |    RStudio
> |    Tick Data


From marcus.b.felker at gmail.com  Wed May  2 18:10:08 2012
From: marcus.b.felker at gmail.com (Marcus Felker)
Date: Wed, 2 May 2012 12:10:08 -0400
Subject: [R-SIG-Finance] One week to R/Finance
In-Reply-To: <1335974701.29163.13.camel@brian-rcg>
References: <20327.58740.398600.251335@max.nulle.part>
	<20356.51676.813575.539682@max.nulle.part>
	<1335974701.29163.13.camel@brian-rcg>
Message-ID: <CAHKk6LbAuoxW0PitsJNb4SU_PGobp=FeDp1nRoiDAuU2TY9qFg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120502/e6b4303e/attachment.pl>

From gordon.erlebach at gmail.com  Wed May  2 23:18:46 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Wed, 2 May 2012 17:18:46 -0400
Subject: [R-SIG-Finance] Efficiency of data.frame to xts conversion
Message-ID: <CAELivkKQ2qB-8chU0zjsKg2H_AdE5Y60oh-=O69k+TE6CoLmQw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120502/3d1859bc/attachment.pl>

From edd at debian.org  Wed May  2 23:46:08 2012
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 2 May 2012 16:46:08 -0500
Subject: [R-SIG-Finance] Efficiency of data.frame to xts conversion
In-Reply-To: <CAELivkKQ2qB-8chU0zjsKg2H_AdE5Y60oh-=O69k+TE6CoLmQw@mail.gmail.com>
References: <CAELivkKQ2qB-8chU0zjsKg2H_AdE5Y60oh-=O69k+TE6CoLmQw@mail.gmail.com>
Message-ID: <20385.43808.310416.633867@max.nulle.part>


On 2 May 2012 at 17:18, Gordon Erlebacher wrote:
| Hi everybody,?
| 
| I have a MySQL database with stock information (using beancounter: thanks
| Kirk).?

Interesting off-by-one error...

| I return 30 stocks from the database (data.frame format by default)
| I am converting the data.frame to xts format. In the code below,?
| 
| 
| "df" ? is the data.frame returned from the database.?
| "data" is what I get after conversion of df to an xts object.?
| 
| 
| Here is the problem:?
| 
| Getting 30 stocks from the data.base and return a data.frame takes 0.14 seconds
| Including conversion to the more efficient xts structure, takes 2 seconds.?
| 
| If I had 3000 stocks, it is the difference between 14 sec and 3 min, which is
| quite large.?
| Is there a solution to this dilemma? Of course, I could recode the database
| access functions.?
| 
| One solution of course, is to convert to xts and save to a file, so that
| conversion is no longer necessary, and I might do that if nobody comes up with
| a more direct solution.

You are presumably getting killed by the as.Date which you don't need (I
think).  

With PostgreSQL, my preferred db backend, I know that the SQL date/datetime columns
come back as Date/Datetime in R.  Hence the timing increase it is not all
that big when I also convert to xts.

Twenty msec for the db access:

R> system.time(SPY <- dbGetQuery(con, "select date, day_close as price from stockprices where symbol='SPY' order by date"))
   user  system elapsed 
  0.020   0.000   0.039 
R> head(SPY)
        date   price
1 1993-01-29 37.8940
2 1993-02-01 38.1635
3 1993-02-02 38.2444
4 1993-02-03 38.6487
5 1993-02-04 38.8104
6 1993-02-05 38.7834

And around 100 msec for db access and xts conversion:

R> system.time({ SPY <- dbGetQuery(con, "select date, day_close as price from stockprices where symbol='SPY' order by date"); spy <- xts(SPY[,-1], order.by=SPY[,1]) })
   user  system elapsed 
  0.104   0.000   0.121 
R> head(spy)
              [,1]
1993-01-29 37.8940
1993-02-01 38.1635
1993-02-02 38.2444
1993-02-03 38.6487
1993-02-04 38.8104
1993-02-05 38.7834
R> 


To really know you should profile.  And none of this really is a finance
question yet...

Dirk

-- 
R/Finance 2012 Conference on May 11 and 12, 2012 at UIC in Chicago, IL
See agenda, registration details and more at http://www.RinFinance.com


From student.northwestern at gmail.com  Thu May  3 05:57:46 2012
From: student.northwestern at gmail.com (Jim Green)
Date: Wed, 2 May 2012 23:57:46 -0400
Subject: [R-SIG-Finance] quantstrat with intraday data
In-Reply-To: <CA+xi=qZ6pNtD9p7=pP7hsemUpHmCKQUakk+B+qVe2P-BNtPJrg@mail.gmail.com>
References: <CACAe89y6pTTDKOkXR+W1Pmwe6JiVZ3Ud8wGTazoC_MF7joPOGQ@mail.gmail.com>
	<1335963774.19734.128.camel@brian-rcg>
	<CA+xi=qZ6pNtD9p7=pP7hsemUpHmCKQUakk+B+qVe2P-BNtPJrg@mail.gmail.com>
Message-ID: <CACAe89wJqd341Ha8t0dAKq4qzqncPhr4ay1GGuyAOQJjmY=Zig@mail.gmail.com>

Thanks for the comment! personally I am hesitant to adjust intraday
prices for splits or dividends, and I prefer adjust positions to
account for the corp actions. Actually even for simplest technical
analysis on daily data, I am still not sure if using dividend/split
adjusted data is the right way to do.

Jim.

On 2 May 2012 11:04, G See <gsee000 at gmail.com> wrote:
> As an alternative to adjusting for dividends in quantstrat or blotter,
> my qmao package (https://r-forge.r-project.org/R/?group_id=1113) has
> two functions that adjust intraday data for dividends.
>
> `adjustIntraday.yahoo` will download dividend data from yahoo and
> calculate daily ratios. ?Those ratios will then be applied to intraday
> data.
>
> `AddCumDiv` simply adds back all dividends to the price series.
>
> With adjustIntraday.yahoo, the most recent observations will be the
> same as the unadjusted data, but the older observations will be lower
> than those that are unadjusted.
>
> With AddCumDiv, the oldest observations will be the same for the
> adjusted and unadjusted data, but the most recent observations will be
> higher for AddCumDiv.
>
> Although I believe these functions work like they're supposed to, they
> have not been rigorously tested, so YMMV. ?bug reports encouraged.
>
> Since I just committed the AddCumDiv function a few minutes ago, it is
> not yet in the R-Forge build (although it is in the repo if you know
> how to svn checkout). ?Since it's not in the build yet, I attached it.
>
> Regards,
> Garrett
>
> On Wed, May 2, 2012 at 8:02 AM, Brian G. Peterson <brian at braverock.com> wrote:
>> On Wed, 2012-05-02 at 00:00 -0400, Jim Green wrote:
>>> Greetings!
>>> Pls forgive me if this is an old topic. I have searched through list
>>> archives extensively but I am just not sure if I am using quantstrat
>>> correctly with intraday data.
>> <...>
>>> Currently I use something similar to attached test.R to do intraday
>>> work. in the code I liquidate everything before close so that I don't
>>> need to worry about splits and dividends. Is what I am doing the
>>> correct way of using quantstrat with intraday data?
>>
>> That's certainly the easiest answer.
>>
>> blotter contains some support for dividends, but it is only lightly
>> tested, since I personally don't need that functionality. ?Additional
>> testing, direct feedback, and patches are always welcome. ?Participation
>> by users is one of the ways these packages grow over time. ?(and feel
>> free to take those conversations off-list)
>>
>>> Also if in future I will hold overnight positions, How would I make
>>> sure dividends and splits are correctly adjusted for pnl and summary
>>> statistics? would underlying blotter be smart enough to handle all the
>>> housekeeping?
>>
>> No Guarantees (of course that's true of everything in R).
>>
>> My recollection is that the addDiv function will add cash to your
>> account to cover dividends.
>>
>> I don't believe that there is a function for splits. ?You'd likely need
>> to write that, we'd love the contribution. ?It shouldn't be hard, as all
>> that needs to happen is that you add a transaction for the split with a
>> price of zero, adding more shares and lowering your average cost to
>> compensate for the split.
>>
>> As xts gains support for differing column classes this summer as part of
>> the funded GSoC project, it will get easier to add additional
>> information to transactions that will definitely include transaction
>> type.
>>
>> Regards,
>>
>> ? - Brian
>>
>> --
>> Brian G. Peterson
>> http://braverock.com/brian/
>> Ph: 773-459-4973
>> IM: bgpbraverock
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Thu May  3 06:07:19 2012
From: gsee000 at gmail.com (G See)
Date: Wed, 2 May 2012 23:07:19 -0500
Subject: [R-SIG-Finance] quantstrat with intraday data
In-Reply-To: <CACAe89wJqd341Ha8t0dAKq4qzqncPhr4ay1GGuyAOQJjmY=Zig@mail.gmail.com>
References: <CACAe89y6pTTDKOkXR+W1Pmwe6JiVZ3Ud8wGTazoC_MF7joPOGQ@mail.gmail.com>
	<1335963774.19734.128.camel@brian-rcg>
	<CA+xi=qZ6pNtD9p7=pP7hsemUpHmCKQUakk+B+qVe2P-BNtPJrg@mail.gmail.com>
	<CACAe89wJqd341Ha8t0dAKq4qzqncPhr4ay1GGuyAOQJjmY=Zig@mail.gmail.com>
Message-ID: <CA+xi=qYUcuFmYL9Qrg0MdhW7+Khs2EjX93G5StbVF_E+8LBp-A@mail.gmail.com>

On Wed, May 2, 2012 at 10:57 PM, Jim Green
<student.northwestern at gmail.com> wrote:
> Thanks for the comment! personally I am hesitant to adjust intraday
> prices for splits or dividends, and I prefer adjust positions to
> account for the corp actions. Actually even for simplest technical
> analysis on daily data, I am still not sure if using dividend/split
> adjusted data is the right way to do.
>
> Jim.

If a stock splits in half, don't you think you should adjust for that
before performing technical analysis?  You'd treat that big jump in
price the same as a real price jump even though if you had a position
in the stock, your PnL would be unaffected by the split?


From student.northwestern at gmail.com  Thu May  3 06:19:28 2012
From: student.northwestern at gmail.com (Jim Green)
Date: Thu, 3 May 2012 00:19:28 -0400
Subject: [R-SIG-Finance] quantstrat with intraday data
In-Reply-To: <CA+xi=qYUcuFmYL9Qrg0MdhW7+Khs2EjX93G5StbVF_E+8LBp-A@mail.gmail.com>
References: <CACAe89y6pTTDKOkXR+W1Pmwe6JiVZ3Ud8wGTazoC_MF7joPOGQ@mail.gmail.com>
	<1335963774.19734.128.camel@brian-rcg>
	<CA+xi=qZ6pNtD9p7=pP7hsemUpHmCKQUakk+B+qVe2P-BNtPJrg@mail.gmail.com>
	<CACAe89wJqd341Ha8t0dAKq4qzqncPhr4ay1GGuyAOQJjmY=Zig@mail.gmail.com>
	<CA+xi=qYUcuFmYL9Qrg0MdhW7+Khs2EjX93G5StbVF_E+8LBp-A@mail.gmail.com>
Message-ID: <CACAe89y4TwJ8o4k+nOO1X-HhU9wMuwWRcYbVwDJW2JZ5XPfxUQ@mail.gmail.com>

On 3 May 2012 00:07, G See <gsee000 at gmail.com> wrote:
> If a stock splits in half, don't you think you should adjust for that
> before performing technical analysis? ?You'd treat that big jump in
> price the same as a real price jump even though if you had a position
> in the stock, your PnL would be unaffected by the split?

sorry I was unclear... that would generate wrong signals..  I think
the correct way to use split/dividend adjusted daily data for
technical analysis is:
1, for each day, generate signals using adjusted data till before that
day, in a walking forward fashion.
2, for pnl logistics, use trade based adjustments or position adjustments.

the above are not currently supported by quantstrat and underlying
blotter but is really a nice to have. is qmao addressing the them in
some way?

Jim.


From gordon.erlebach at gmail.com  Thu May  3 14:47:17 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Thu, 3 May 2012 08:47:17 -0400
Subject: [R-SIG-Finance] SMA and TTR
Message-ID: <CAELivkJvqNQuNeBzRg02_4d9xb9VBb5q_sK6WETF9nBw8bzATw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120503/2f007cb9/attachment.pl>

From brian at braverock.com  Thu May  3 15:03:28 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 03 May 2012 08:03:28 -0500
Subject: [R-SIG-Finance] SMA and TTR
In-Reply-To: <CAELivkJvqNQuNeBzRg02_4d9xb9VBb5q_sK6WETF9nBw8bzATw@mail.gmail.com>
References: <CAELivkJvqNQuNeBzRg02_4d9xb9VBb5q_sK6WETF9nBw8bzATw@mail.gmail.com>
Message-ID: <1336050208.29163.28.camel@brian-rcg>

On Thu, 2012-05-03 at 08:47 -0400, Gordon Erlebacher wrote:
> I wish to compute trading criteria only for past 10 days. That
> involves,
> say, a 50 day moving average. The SMA function does not allow me to
> only
> compute the 50 day moving average over the past 10 days, even if I
> have the
> symbol series for the past 200 days!
> 
> getSymbols("AAPL")
> SMA(AAPL, 10)
> 
> will compute the moving average for the entire series with 9 NAs. But
> that is more expensive than computing only the last 10 moving
> averages, necessary for my trading system. (this is just an example).
> 
> If I am mistaken, could you please let me know how? I believe that all
> the TTR functions should be amended to compute the time series between
> a from and to date.
> 
Yes, you are mistaken.  Please look for information on 'vectorization'
in R.

While it is sometimes true that TTR will not use a vectorized
calculation, you can always subset your data in xts to use a shorter
series.

the 'from' and 'to' date in this case would be represented like so:

from <- '2012-04-01'
to   <- '2012-05-02'
#assume x is my xts time series
SMA(x[paste(from,to,sep='/')],10)

Also note that you would need only 20 days of data, not 50, for get 10
periods of a ten day SMA.  The subset you need is easily computed from
the indices of the data, using e.g.

lt <- length(index(x))
lf <- lt-20
SMA(x[lf:lt,],10)


> 
-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From gsee000 at gmail.com  Thu May  3 15:54:14 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 3 May 2012 08:54:14 -0500
Subject: [R-SIG-Finance] quantstrat with intraday data
In-Reply-To: <CACAe89y4TwJ8o4k+nOO1X-HhU9wMuwWRcYbVwDJW2JZ5XPfxUQ@mail.gmail.com>
References: <CACAe89y6pTTDKOkXR+W1Pmwe6JiVZ3Ud8wGTazoC_MF7joPOGQ@mail.gmail.com>
	<1335963774.19734.128.camel@brian-rcg>
	<CA+xi=qZ6pNtD9p7=pP7hsemUpHmCKQUakk+B+qVe2P-BNtPJrg@mail.gmail.com>
	<CACAe89wJqd341Ha8t0dAKq4qzqncPhr4ay1GGuyAOQJjmY=Zig@mail.gmail.com>
	<CA+xi=qYUcuFmYL9Qrg0MdhW7+Khs2EjX93G5StbVF_E+8LBp-A@mail.gmail.com>
	<CACAe89y4TwJ8o4k+nOO1X-HhU9wMuwWRcYbVwDJW2JZ5XPfxUQ@mail.gmail.com>
Message-ID: <CA+xi=qYmxYuU8x_T1DOtKkk5=Gd75N5dbej2qa0NocCgJKjRog@mail.gmail.com>

Jim,

So, on any day that there is a dividend or a split, you want to back
adjust your data that you're using to calculate the next signal.
Every time you back-adjust, you have to recreate your signals.  If
that's how you want to do it, then I think that in quantstrat world,
you're better off running multiple backtests (e.g. 1 for each quarter
for a stock that pays quarterly dividends) and gluing them together
instead of adjusting on the fly.  i.e. try to let the quantstrat part
of it be as vectorized as possible.

If there were an addSplit function, it would adjust the quantity of
shares that you own, but last I looked, the order-sizing functionality
of quantstrat was still broken which means that you wouldn't be able
to adjust how many shares you trade going forward.

So, assuming you're using a fixed quantity of shares for your
transactions (which you are unless you patch quantstrat ;-)),
AddCumDiv is like a walk-forward adjustment of price (for dividends,
but you could pre-adjust your data, in a walk-forward manner, for
splits as well).  At the very least, it's pretty good proxy.

HTH,
Garrett

On Wed, May 2, 2012 at 11:19 PM, Jim Green
<student.northwestern at gmail.com> wrote:
> On 3 May 2012 00:07, G See <gsee000 at gmail.com> wrote:
>> If a stock splits in half, don't you think you should adjust for that
>> before performing technical analysis? ?You'd treat that big jump in
>> price the same as a real price jump even though if you had a position
>> in the stock, your PnL would be unaffected by the split?
>
> sorry I was unclear... that would generate wrong signals.. ?I think
> the correct way to use split/dividend adjusted daily data for
> technical analysis is:
> 1, for each day, generate signals using adjusted data till before that
> day, in a walking forward fashion.
> 2, for pnl logistics, use trade based adjustments or position adjustments.
>
> the above are not currently supported by quantstrat and underlying
> blotter but is really a nice to have. is qmao addressing the them in
> some way?
>
> Jim.


From gsee000 at gmail.com  Thu May  3 16:14:41 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 3 May 2012 09:14:41 -0500
Subject: [R-SIG-Finance] SMA and TTR
In-Reply-To: <1336050208.29163.28.camel@brian-rcg>
References: <CAELivkJvqNQuNeBzRg02_4d9xb9VBb5q_sK6WETF9nBw8bzATw@mail.gmail.com>
	<1336050208.29163.28.camel@brian-rcg>
Message-ID: <CA+xi=qboVhOkf6=EJYYm3i3XVDjMpVhBM5mJ6cfK1-N_avhPBA@mail.gmail.com>

Just a slightly different approach:

getSymbols("AAPL", src='yahoo')
# 50 day moving average for last 10 days
tail(SMA(tail(Ad(AAPL), 59), 50), 10)

Garrett

On Thu, May 3, 2012 at 8:03 AM, Brian G. Peterson <brian at braverock.com> wrote:
> On Thu, 2012-05-03 at 08:47 -0400, Gordon Erlebacher wrote:
>> I wish to compute trading criteria only for past 10 days. That
>> involves,
>> say, a 50 day moving average. The SMA function does not allow me to
>> only
>> compute the 50 day moving average over the past 10 days, even if I
>> have the
>> symbol series for the past 200 days!
>>
>> getSymbols("AAPL")
>> SMA(AAPL, 10)
>>
>> will compute the moving average for the entire series with 9 NAs. But
>> that is more expensive than computing only the last 10 moving
>> averages, necessary for my trading system. (this is just an example).
>>
>> If I am mistaken, could you please let me know how? I believe that all
>> the TTR functions should be amended to compute the time series between
>> a from and to date.
>>
> Yes, you are mistaken. ?Please look for information on 'vectorization'
> in R.
>
> While it is sometimes true that TTR will not use a vectorized
> calculation, you can always subset your data in xts to use a shorter
> series.
>
> the 'from' and 'to' date in this case would be represented like so:
>
> from <- '2012-04-01'
> to ? <- '2012-05-02'
> #assume x is my xts time series
> SMA(x[paste(from,to,sep='/')],10)
>
> Also note that you would need only 20 days of data, not 50, for get 10
> periods of a ten day SMA. ?The subset you need is easily computed from
> the indices of the data, using e.g.
>
> lt <- length(index(x))
> lf <- lt-20
> SMA(x[lf:lt,],10)
>
>
>>
> --
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From sduve at hotmail.com  Thu May  3 20:44:10 2012
From: sduve at hotmail.com (gussinsky)
Date: Thu, 3 May 2012 11:44:10 -0700 (PDT)
Subject: [R-SIG-Finance] Generating a front month only Time Series for
	Futures Prices
Message-ID: <1336070650152-4606794.post@n4.nabble.com>

Hello All,

I am struggeling to find a method which would enable me to generate a
historical time series which only contains a commodities front month price,
and after expiry automatically rolls over to the next month. 

I suspect one has to code the roll over rule from the respective exchange
into a function, and supply the function with the respective expired
historical data.

My aim is to backtest those data for delta 1 strategies, but also for
cointegration. One example would be heating oil futures vs. gasoil futures.

Many thanks


Gussinsky

--
View this message in context: http://r.789695.n4.nabble.com/Generating-a-front-month-only-Time-Series-for-Futures-Prices-tp4606794.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From gordon.erlebach at gmail.com  Thu May  3 21:01:18 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Thu, 3 May 2012 15:01:18 -0400
Subject: [R-SIG-Finance] question on add_TA
Message-ID: <CAELivkJG2VBqv4ypiS4jNOOsD4wTOJHr7-pCvr1U3YkYKjTyFg@mail.gmail.com>

Hi,

While I plan on researching this further, here is a slight problem I
encountered:

    st3 = "add_RSI(n=14)"
    st4 = "add_TA(RSI(Cl(stock),n=14), on=2)"
    print(chart_Series(stock, TA=paste(st3,st4,sep=";"), name=symbol))


The charting almost behaves as expected, except for the fact that the rsi
calculated using add_RSI and RSI
should be identical, so the TA argument should produced two curves exactly
superimposed on each other. The two curves, however, are not superimposed.
Any ideas would be appreciated. Thanks.

(I attached an example.) Perhaps something is done differently in add_TA
and add_RSI regarding the y axis.

Thanks!

      Gordon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120503/c8269777/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: bjk_rsi.pdf
Type: application/pdf
Size: 41825 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120503/c8269777/attachment.pdf>

From bbands at gmail.com  Thu May  3 21:02:55 2012
From: bbands at gmail.com (BBands)
Date: Thu, 3 May 2012 12:02:55 -0700
Subject: [R-SIG-Finance] Generating a front month only Time Series for
 Futures Prices
In-Reply-To: <1336070650152-4606794.post@n4.nabble.com>
References: <1336070650152-4606794.post@n4.nabble.com>
Message-ID: <CAGS5yBXQ91Nnyr2Q9hAWD=4qSAj42kYsUhnz=NgCV2XOMcp0JQ@mail.gmail.com>

Beware, this is a mine field! For example, one problem you will need
to deal with is that different commodities roll on different dates.
Then there is the nightmare quagmire of back adjusting, which is best
skipped altogether in my opinion. In short, there are many ways to get
hurt here. There is a large literature on the topic, starting with W.
D. Gann 80+ years ago. The writings of Bob Pelletier of CSI are a good
trail-head.

    John

On Thu, May 3, 2012 at 11:44 AM, gussinsky <sduve at hotmail.com> wrote:
> Hello All,
>
> I am struggeling to find a method which would enable me to generate a
> historical time series which only contains a commodities front month price,
> and after expiry automatically rolls over to the next month.
>
> I suspect one has to code the roll over rule from the respective exchange
> into a function, and supply the function with the respective expired
> historical data.
>
> My aim is to backtest those data for delta 1 strategies, but also for
> cointegration. One example would be heating oil futures vs. gasoil futures.


From gsee000 at gmail.com  Thu May  3 21:28:55 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 3 May 2012 14:28:55 -0500
Subject: [R-SIG-Finance] Generating a front month only Time Series for
 Futures Prices
In-Reply-To: <CAGS5yBXQ91Nnyr2Q9hAWD=4qSAj42kYsUhnz=NgCV2XOMcp0JQ@mail.gmail.com>
References: <1336070650152-4606794.post@n4.nabble.com>
	<CAGS5yBXQ91Nnyr2Q9hAWD=4qSAj42kYsUhnz=NgCV2XOMcp0JQ@mail.gmail.com>
Message-ID: <CA+xi=qazYQxYPL0mtBSnTeJSZ85-bDk2kBDnUj19d7nf7+ov_w@mail.gmail.com>

Gussinsky,

Since you are looking to test for cointegration, and you say you're
looking at energy products (which have liquidity in more than just the
front contract), I'd suggest creating a constant maturity future (CMF)
that is the interpolated price between the 2 lead contracts (see Carol
Alexander's stuff for more info).  CMFs don't require any back
adjusting, they just require that you partially roll your position
every day.

HTH,
Garrett

On Thu, May 3, 2012 at 2:02 PM, BBands <bbands at gmail.com> wrote:
> Beware, this is a mine field! For example, one problem you will need
> to deal with is that different commodities roll on different dates.
> Then there is the nightmare quagmire of back adjusting, which is best
> skipped altogether in my opinion. In short, there are many ways to get
> hurt here. There is a large literature on the topic, starting with W.
> D. Gann 80+ years ago. The writings of Bob Pelletier of CSI are a good
> trail-head.
>
> ? ?John
>
> On Thu, May 3, 2012 at 11:44 AM, gussinsky <sduve at hotmail.com> wrote:
>> Hello All,
>>
>> I am struggeling to find a method which would enable me to generate a
>> historical time series which only contains a commodities front month price,
>> and after expiry automatically rolls over to the next month.
>>
>> I suspect one has to code the roll over rule from the respective exchange
>> into a function, and supply the function with the respective expired
>> historical data.
>>
>> My aim is to backtest those data for delta 1 strategies, but also for
>> cointegration. One example would be heating oil futures vs. gasoil futures.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Thu May  3 21:35:43 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 3 May 2012 14:35:43 -0500
Subject: [R-SIG-Finance] Generating a front month only Time Series for
 Futures Prices
In-Reply-To: <CA+xi=qazYQxYPL0mtBSnTeJSZ85-bDk2kBDnUj19d7nf7+ov_w@mail.gmail.com>
References: <1336070650152-4606794.post@n4.nabble.com>
	<CAGS5yBXQ91Nnyr2Q9hAWD=4qSAj42kYsUhnz=NgCV2XOMcp0JQ@mail.gmail.com>
	<CA+xi=qazYQxYPL0mtBSnTeJSZ85-bDk2kBDnUj19d7nf7+ov_w@mail.gmail.com>
Message-ID: <CA+xi=qait6=_wC4pNZF+EGcxNUHEYP3_t5GpxX=yYpcK+=G+kw@mail.gmail.com>

I'm not sure if this link will work; if not, I'm trying to point you
to page 75 of "Market Risk Analysis: Pricing, Hedging and Trading
Financial Instruments"

http://books.google.com/books?id=3Xg4pO1PEpUC&pg=PR13&lpg=PR13&dq=carol+alexander+constant+maturity+future&source=bl&ots=ArlAbn7XPW&sig=1WGn8vNIVRy-FEYFhNyncd_WVU0&hl=en&sa=X&ei=O92iT46KEYPO9QTry7jeCA&ved=0CDkQ6AEwBA#v=onepage&q=constant%20maturity&f=false

Garrett

On Thu, May 3, 2012 at 2:28 PM, G See <gsee000 at gmail.com> wrote:
> Gussinsky,
>
> Since you are looking to test for cointegration, and you say you're
> looking at energy products (which have liquidity in more than just the
> front contract), I'd suggest creating a constant maturity future (CMF)
> that is the interpolated price between the 2 lead contracts (see Carol
> Alexander's stuff for more info). ?CMFs don't require any back
> adjusting, they just require that you partially roll your position
> every day.
>
> HTH,
> Garrett
>
> On Thu, May 3, 2012 at 2:02 PM, BBands <bbands at gmail.com> wrote:
>> Beware, this is a mine field! For example, one problem you will need
>> to deal with is that different commodities roll on different dates.
>> Then there is the nightmare quagmire of back adjusting, which is best
>> skipped altogether in my opinion. In short, there are many ways to get
>> hurt here. There is a large literature on the topic, starting with W.
>> D. Gann 80+ years ago. The writings of Bob Pelletier of CSI are a good
>> trail-head.
>>
>> ? ?John
>>
>> On Thu, May 3, 2012 at 11:44 AM, gussinsky <sduve at hotmail.com> wrote:
>>> Hello All,
>>>
>>> I am struggeling to find a method which would enable me to generate a
>>> historical time series which only contains a commodities front month price,
>>> and after expiry automatically rolls over to the next month.
>>>
>>> I suspect one has to code the roll over rule from the respective exchange
>>> into a function, and supply the function with the respective expired
>>> historical data.
>>>
>>> My aim is to backtest those data for delta 1 strategies, but also for
>>> cointegration. One example would be heating oil futures vs. gasoil futures.
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.


From sduve at hotmail.com  Thu May  3 22:07:11 2012
From: sduve at hotmail.com (gussinsky)
Date: Thu, 3 May 2012 13:07:11 -0700 (PDT)
Subject: [R-SIG-Finance] Generating a front month only Time Series for
	Futures Prices
In-Reply-To: <CA+xi=qait6=_wC4pNZF+EGcxNUHEYP3_t5GpxX=yYpcK+=G+kw@mail.gmail.com>
References: <1336070650152-4606794.post@n4.nabble.com>
	<CAGS5yBXQ91Nnyr2Q9hAWD=4qSAj42kYsUhnz=NgCV2XOMcp0JQ@mail.gmail.com>
	<CA+xi=qazYQxYPL0mtBSnTeJSZ85-bDk2kBDnUj19d7nf7+ov_w@mail.gmail.com>
	<CA+xi=qait6=_wC4pNZF+EGcxNUHEYP3_t5GpxX=yYpcK+=G+kw@mail.gmail.com>
Message-ID: <1336075631561-4606979.post@n4.nabble.com>

Hey Garrett, 

thank you for this, I had a read through this page in the book you
referenced. And looking at Agricultural Commodities this makes a lot of
sense. And if you look at Wheat and Corn on the CBOT, I think you only have
5 deliveries per year, hence the massive gaps when each contract rolls off.
So here the interpolation makes sense, and I think one could approach this
trade as a box.

But lets consider for example heating oil again, here you have monthly
deliveries, and the seasonality is far less nowadays, in Europe even less
due to the increased Diesel consumption on the roads. 

But lets consider this:

"Trading in a current month shall cease on the last business day of the
month preceding the delivery month."

This is the expiry rule for Heating Oil on the Nymex. I think this is
codeable without minefields isn't it. It would be terrific if anyone could
point me in the right direction on how to approach this.

I think it wont be possible to download this with one simple function. I
suspect one would have to store individual files for the respective expiry
contracts, and perhaps index the file names. And then perhaps through a loop
function could read out the corresponding 1:n values for each month, store
them in an array, and then run the next month with the same rule, and store
them again, etc....In the end one needs to connect all those arrays into one
big time series.

And here is my problem, I dont know how to code this, I know what I want....

Many thanks for the advice so far....


Best


Gussinsky


PS: Garrett, it is your Pair Trading code that brought this up my mind again
:-)

--
View this message in context: http://r.789695.n4.nabble.com/Generating-a-front-month-only-Time-Series-for-Futures-Prices-tp4606794p4606979.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From frickerthomas at googlemail.com  Thu May  3 22:23:58 2012
From: frickerthomas at googlemail.com (ThomasF)
Date: Thu, 3 May 2012 13:23:58 -0700 (PDT)
Subject: [R-SIG-Finance] Rugarch for EWMA/VaR
Message-ID: <1336076638952-4607011.post@n4.nabble.com>

Dear R-Users, dear Alexios,

I am trying to use rugarch to forecast volatiliy and do VaR-backtests using
the Exponentially weighted moving average.
To achieve this I used the iGarch, set omega to 0 and either estimate or fix
alpha1 and beta1. Example code is provided at the end of my post.

Some issues came up which I'd be glad to solve with your help:

1) Whenever i try to fit alpha1 and beta1, I always get 0.5 as result. I
tried this for different underlyings and time horizons. Any idea what the
reason could be?

2) I also get an error (I translated the error message to english) after the 
ARCH LM Test output:

ARCH LM Tests
------------------------------------
             Statistic DoF P-Value
ARCH Lag[2]      4.653   2 0.09765
ARCH Lag[5]      7.991   5 0.15672
ARCH Lag[10]    12.082  10 0.27959
Error in names(ans) = c("10%", "5%", "1%") : 
  Attribut 'names' [3] must have same length as the vector [0]

Is there something wrong with my code or the way i put the data into the
model? The other part of the outputs seems legit.

3) when I tried to do the same calculations with fixed alpha i get the
following error when i try to filter the model:

1: In doTryCatch(return(expr), name, parentenv, handler) :
  passing an object of type 'NULL' to .C (arg 8) is deprecated
2: In doTryCatch(return(expr), name, parentenv, handler) :
  passing an object of type 'NULL' to .C (arg 9) is deprecated

The ugarchfilter output seems reasonable again.

4)  I am not able to generate a rolling forecast and VaR Output when i fixed
alpha1. Could you please give me a hint on how to do this with filtered
data?

5) Does any of those issues arise of the use of the data as "zoo" object?


Thanks in advance for your effort to help me 

Sincerely

Thomas


-----------------Code----------


################
###Download Data & Compute Returns
################

library ("tseries")

#adjusted close price of sp500
sp500price=get.hist.quote(instrument="^gspc", start="2006-01-01",
end="2011-12-31", quote="AdjClose")

# returns
sp500returns=diff(log(sp500price))


library("rugarch")



##############
### Use iGarch for EWMA - fitted alpha and beta
##############


### Model spec
spec1= ugarchspec (variance.model = list(model = "iGARCH", garchOrder = c(1,
1)), mean.model=list(armaOrder=c(0,0),include.mean=FALSE),
distribution.model = "norm", fixed.pars = list(omega=0))

###Fit Model
fit1= ugarchfit(spec=spec1, data=sp500returns, out.sample=0, solver="solnp",
solver.control=list(trace=0))
show(fit1)

#### rolling forecast und VaR
roll1=ugarchroll(spec=spec1, data=sp500returns, n.ahead=1,
forecast.length=500, refit.every=25, refit.window="recursive",
solver="solnp", solver.control=list(tol=1e-05, delta=1e-06, trace=0),
calculate.VaR=TRUE, VaR.alpha=c(0.01, 0.05))

report(roll1, type="VaR", n.ahead=1, VaR.alpha=0.01, conf.level=0.95)
report(roll1, type="fpm")
plot(roll1, which="all")




##############
### Use iGarch for EWMA - fixed alpha and beta with lambda=0.94
##############


### Model spec
spec2= ugarchspec (variance.model = list(model = "iGARCH", garchOrder = c(1,
1)), mean.model=list(armaOrder=c(0,0),include.mean=FALSE),
distribution.model = "norm",  fixed.pars = list(omega=0, alpha1=0.06))

###Fit Model???

fit2= ugarchfit(spec=spec2, data=sp500returns, out.sample=0, solver="solnp",
solver.control=list(trace=0))
show(fit2)

### filter model
filt2= ugarchfilter(spec=spec2, data=sp500returns)
show(filt2)

#### rolling forecast und VaR

roll2=ugarchroll(spec=spec2, data=sp500returns, n.ahead=1,
forecast.length=500,   calculate.VaR=TRUE, VaR.alpha=c(0.01, 0.05))

report(roll2, type="VaR", n.ahead=1, VaR.alpha=0.01, conf.level=0.95)

report(roll2, type="fpm")
plot(roll2, which="all")

--
View this message in context: http://r.789695.n4.nabble.com/Rugarch-for-EWMA-VaR-tp4607011.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From gsee000 at gmail.com  Thu May  3 22:28:33 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 3 May 2012 15:28:33 -0500
Subject: [R-SIG-Finance] Generating a front month only Time Series for
 Futures Prices
In-Reply-To: <1336075631561-4606979.post@n4.nabble.com>
References: <1336070650152-4606794.post@n4.nabble.com>
	<CAGS5yBXQ91Nnyr2Q9hAWD=4qSAj42kYsUhnz=NgCV2XOMcp0JQ@mail.gmail.com>
	<CA+xi=qazYQxYPL0mtBSnTeJSZ85-bDk2kBDnUj19d7nf7+ov_w@mail.gmail.com>
	<CA+xi=qait6=_wC4pNZF+EGcxNUHEYP3_t5GpxX=yYpcK+=G+kw@mail.gmail.com>
	<1336075631561-4606979.post@n4.nabble.com>
Message-ID: <CA+xi=qbLn_1mkV9Wc9+5ZpQLG2ZDE6vb4FBbTuW-w6ViEhXXww@mail.gmail.com>

If you just want to combine 2 series together, no problem:  use rbind.
 But, then you'll have a gap in your data on the roll date, and you'll
be back asking how to adjust for it. ;-)  That's where the minefields
come into play.

I look at roll cost like a dividend (which is often negative).  You
can adjust for it a couple different way.  You could add the roll
costs back to the series, which may mean negative prices in the past.
Or, you could multiply by an adjustment ratio (treat it like a split).

If you don't adjust for the roll, you'll have big gaps in your data.
Imagine buying the front month VIX future and rolling it each month.
10 years later, the VIX may still be at the same price, but you'll
likely have lost way more than you started with.

If you do adjust for the roll, either the oldest prices or the newest
prices may not be reasonable.

To get this back to R, let's get some code involved.
This is laying in the FinancialInstrument sandbox; I haven't
personally looked at it, so I don't know how it works.  Ditto for
FinancialInstrument:::slice and FinancialInstrument:::splooth
https://r-forge.r-project.org/scm/viewvc.php/pkg/FinancialInstrument/sandbox/continuousSeries.R?view=markup&root=blotter

If you just want daily data that has already been adjusted for you,
look here for code to download data from trading blox (it has Heating
Oil.. not gasoil though):
https://r-forge.r-project.org/scm/viewvc.php/pkg/FinancialInstrument/inst/parser/download.tblox.R?view=markup&root=blotter

I believe Trading Blox simply adds back the roll cost.  And, I think
they roll when Open Interest rolls.

source("http://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/FinancialInstrument/inst/parser/download.tblox.R?root=blotter")

chartSeries(HO[, 8])  #unadjusted
addTA(HO[, 4], col='red', on=1) #adjusted

Or, are you looking for code to calculate the expiration dates of instruments?

What have you tried? ;-)

Garrett

On Thu, May 3, 2012 at 3:07 PM, gussinsky <sduve at hotmail.com> wrote:
> Hey Garrett,
>
> thank you for this, I had a read through this page in the book you
> referenced. And looking at Agricultural Commodities this makes a lot of
> sense. And if you look at Wheat and Corn on the CBOT, I think you only have
> 5 deliveries per year, hence the massive gaps when each contract rolls off.
> So here the interpolation makes sense, and I think one could approach this
> trade as a box.
>
> But lets consider for example heating oil again, here you have monthly
> deliveries, and the seasonality is far less nowadays, in Europe even less
> due to the increased Diesel consumption on the roads.
>
> But lets consider this:
>
> "Trading in a current month shall cease on the last business day of the
> month preceding the delivery month."
>
> This is the expiry rule for Heating Oil on the Nymex. I think this is
> codeable without minefields isn't it. It would be terrific if anyone could
> point me in the right direction on how to approach this.
>
> I think it wont be possible to download this with one simple function. I
> suspect one would have to store individual files for the respective expiry
> contracts, and perhaps index the file names. And then perhaps through a loop
> function could read out the corresponding 1:n values for each month, store
> them in an array, and then run the next month with the same rule, and store
> them again, etc....In the end one needs to connect all those arrays into one
> big time series.
>
> And here is my problem, I dont know how to code this, I know what I want....
>
> Many thanks for the advice so far....
>
>
> Best
>
>
> Gussinsky
>
>
> PS: Garrett, it is your Pair Trading code that brought this up my mind again
> :-)
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Generating-a-front-month-only-Time-Series-for-Futures-Prices-tp4606794p4606979.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Thu May  3 22:32:19 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 3 May 2012 15:32:19 -0500
Subject: [R-SIG-Finance] Generating a front month only Time Series for
 Futures Prices
In-Reply-To: <CA+xi=qbLn_1mkV9Wc9+5ZpQLG2ZDE6vb4FBbTuW-w6ViEhXXww@mail.gmail.com>
References: <1336070650152-4606794.post@n4.nabble.com>
	<CAGS5yBXQ91Nnyr2Q9hAWD=4qSAj42kYsUhnz=NgCV2XOMcp0JQ@mail.gmail.com>
	<CA+xi=qazYQxYPL0mtBSnTeJSZ85-bDk2kBDnUj19d7nf7+ov_w@mail.gmail.com>
	<CA+xi=qait6=_wC4pNZF+EGcxNUHEYP3_t5GpxX=yYpcK+=G+kw@mail.gmail.com>
	<1336075631561-4606979.post@n4.nabble.com>
	<CA+xi=qbLn_1mkV9Wc9+5ZpQLG2ZDE6vb4FBbTuW-w6ViEhXXww@mail.gmail.com>
Message-ID: <CA+xi=qYwoT-mkNDaSpZVg0Q+RCrS7mE+ryUQZj4uvC-=+798Pg@mail.gmail.com>

On Thu, May 3, 2012 at 3:28 PM, G See <gsee000 at gmail.com> wrote:
> If you just want to combine 2 series together, no problem: ?use rbind.
> ?But, then you'll have a gap in your data on the roll date, and you'll
> be back asking how to adjust for it. ;-) ?That's where the minefields
> come into play.
>
> I look at roll cost like a dividend (which is often negative). ?You
> can adjust for it a couple different way. ?You could add the roll
> costs back to the series, which may mean negative prices in the past.
> Or, you could multiply by an adjustment ratio (treat it like a split).
>
> If you don't adjust for the roll, you'll have big gaps in your data.
> Imagine buying the front month VIX future and rolling it each month.
> 10 years later, the VIX may still be at the same price, but you'll
> likely have lost way more than you started with.
>
> If you do adjust for the roll, either the oldest prices or the newest
> prices may not be reasonable.
>
> To get this back to R, let's get some code involved.
> This is laying in the FinancialInstrument sandbox; I haven't
> personally looked at it, so I don't know how it works. ?Ditto for
> FinancialInstrument:::slice and FinancialInstrument:::splooth
> https://r-forge.r-project.org/scm/viewvc.php/pkg/FinancialInstrument/sandbox/continuousSeries.R?view=markup&root=blotter
>
> If you just want daily data that has already been adjusted for you,
> look here for code to download data from trading blox (it has Heating
> Oil.. not gasoil though):
> https://r-forge.r-project.org/scm/viewvc.php/pkg/FinancialInstrument/inst/parser/download.tblox.R?view=markup&root=blotter
>
> I believe Trading Blox simply adds back the roll cost. ?And, I think
> they roll when Open Interest rolls.
>
> source("http://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/FinancialInstrument/inst/parser/download.tblox.R?root=blotter")
>

# oops. forgot this line
getSymbols("HO", src='tblox')

> chartSeries(HO[, 8]) ?#unadjusted
> addTA(HO[, 4], col='red', on=1) #adjusted
>
> Or, are you looking for code to calculate the expiration dates of instruments?
>
> What have you tried? ;-)
>
> Garrett
>
> On Thu, May 3, 2012 at 3:07 PM, gussinsky <sduve at hotmail.com> wrote:
>> Hey Garrett,
>>
>> thank you for this, I had a read through this page in the book you
>> referenced. And looking at Agricultural Commodities this makes a lot of
>> sense. And if you look at Wheat and Corn on the CBOT, I think you only have
>> 5 deliveries per year, hence the massive gaps when each contract rolls off.
>> So here the interpolation makes sense, and I think one could approach this
>> trade as a box.
>>
>> But lets consider for example heating oil again, here you have monthly
>> deliveries, and the seasonality is far less nowadays, in Europe even less
>> due to the increased Diesel consumption on the roads.
>>
>> But lets consider this:
>>
>> "Trading in a current month shall cease on the last business day of the
>> month preceding the delivery month."
>>
>> This is the expiry rule for Heating Oil on the Nymex. I think this is
>> codeable without minefields isn't it. It would be terrific if anyone could
>> point me in the right direction on how to approach this.
>>
>> I think it wont be possible to download this with one simple function. I
>> suspect one would have to store individual files for the respective expiry
>> contracts, and perhaps index the file names. And then perhaps through a loop
>> function could read out the corresponding 1:n values for each month, store
>> them in an array, and then run the next month with the same rule, and store
>> them again, etc....In the end one needs to connect all those arrays into one
>> big time series.
>>
>> And here is my problem, I dont know how to code this, I know what I want....
>>
>> Many thanks for the advice so far....
>>
>>
>> Best
>>
>>
>> Gussinsky
>>
>>
>> PS: Garrett, it is your Pair Trading code that brought this up my mind again
>> :-)
>>
>> --
>> View this message in context: http://r.789695.n4.nabble.com/Generating-a-front-month-only-Time-Series-for-Futures-Prices-tp4606794p4606979.html
>> Sent from the Rmetrics mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Thu May  3 22:47:27 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 3 May 2012 15:47:27 -0500
Subject: [R-SIG-Finance] Generating a front month only Time Series for
 Futures Prices
In-Reply-To: <CA+xi=qYwoT-mkNDaSpZVg0Q+RCrS7mE+ryUQZj4uvC-=+798Pg@mail.gmail.com>
References: <1336070650152-4606794.post@n4.nabble.com>
	<CAGS5yBXQ91Nnyr2Q9hAWD=4qSAj42kYsUhnz=NgCV2XOMcp0JQ@mail.gmail.com>
	<CA+xi=qazYQxYPL0mtBSnTeJSZ85-bDk2kBDnUj19d7nf7+ov_w@mail.gmail.com>
	<CA+xi=qait6=_wC4pNZF+EGcxNUHEYP3_t5GpxX=yYpcK+=G+kw@mail.gmail.com>
	<1336075631561-4606979.post@n4.nabble.com>
	<CA+xi=qbLn_1mkV9Wc9+5ZpQLG2ZDE6vb4FBbTuW-w6ViEhXXww@mail.gmail.com>
	<CA+xi=qYwoT-mkNDaSpZVg0Q+RCrS7mE+ryUQZj4uvC-=+798Pg@mail.gmail.com>
Message-ID: <CA+xi=qZy-jy8j5aeFY8OsEt0Vw4xHZQEzvZqcpNc6P1BinWuRA@mail.gmail.com>

note that if you adjust by adding back roll costs and then try to
calculate returns, your returns will be "off" (read:wrong)

On Thu, May 3, 2012 at 3:32 PM, G See <gsee000 at gmail.com> wrote:
> On Thu, May 3, 2012 at 3:28 PM, G See <gsee000 at gmail.com> wrote:
>> If you just want to combine 2 series together, no problem: ?use rbind.
>> ?But, then you'll have a gap in your data on the roll date, and you'll
>> be back asking how to adjust for it. ;-) ?That's where the minefields
>> come into play.
>>
>> I look at roll cost like a dividend (which is often negative). ?You
>> can adjust for it a couple different way. ?You could add the roll
>> costs back to the series, which may mean negative prices in the past.
>> Or, you could multiply by an adjustment ratio (treat it like a split).
>>
>> If you don't adjust for the roll, you'll have big gaps in your data.
>> Imagine buying the front month VIX future and rolling it each month.
>> 10 years later, the VIX may still be at the same price, but you'll
>> likely have lost way more than you started with.
>>
>> If you do adjust for the roll, either the oldest prices or the newest
>> prices may not be reasonable.
>>
>> To get this back to R, let's get some code involved.
>> This is laying in the FinancialInstrument sandbox; I haven't
>> personally looked at it, so I don't know how it works. ?Ditto for
>> FinancialInstrument:::slice and FinancialInstrument:::splooth
>> https://r-forge.r-project.org/scm/viewvc.php/pkg/FinancialInstrument/sandbox/continuousSeries.R?view=markup&root=blotter
>>
>> If you just want daily data that has already been adjusted for you,
>> look here for code to download data from trading blox (it has Heating
>> Oil.. not gasoil though):
>> https://r-forge.r-project.org/scm/viewvc.php/pkg/FinancialInstrument/inst/parser/download.tblox.R?view=markup&root=blotter
>>
>> I believe Trading Blox simply adds back the roll cost. ?And, I think
>> they roll when Open Interest rolls.
>>
>> source("http://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/FinancialInstrument/inst/parser/download.tblox.R?root=blotter")
>>
>
> # oops. forgot this line
> getSymbols("HO", src='tblox')
>
>> chartSeries(HO[, 8]) ?#unadjusted
>> addTA(HO[, 4], col='red', on=1) #adjusted
>>
>> Or, are you looking for code to calculate the expiration dates of instruments?
>>
>> What have you tried? ;-)
>>
>> Garrett
>>
>> On Thu, May 3, 2012 at 3:07 PM, gussinsky <sduve at hotmail.com> wrote:
>>> Hey Garrett,
>>>
>>> thank you for this, I had a read through this page in the book you
>>> referenced. And looking at Agricultural Commodities this makes a lot of
>>> sense. And if you look at Wheat and Corn on the CBOT, I think you only have
>>> 5 deliveries per year, hence the massive gaps when each contract rolls off.
>>> So here the interpolation makes sense, and I think one could approach this
>>> trade as a box.
>>>
>>> But lets consider for example heating oil again, here you have monthly
>>> deliveries, and the seasonality is far less nowadays, in Europe even less
>>> due to the increased Diesel consumption on the roads.
>>>
>>> But lets consider this:
>>>
>>> "Trading in a current month shall cease on the last business day of the
>>> month preceding the delivery month."
>>>
>>> This is the expiry rule for Heating Oil on the Nymex. I think this is
>>> codeable without minefields isn't it. It would be terrific if anyone could
>>> point me in the right direction on how to approach this.
>>>
>>> I think it wont be possible to download this with one simple function. I
>>> suspect one would have to store individual files for the respective expiry
>>> contracts, and perhaps index the file names. And then perhaps through a loop
>>> function could read out the corresponding 1:n values for each month, store
>>> them in an array, and then run the next month with the same rule, and store
>>> them again, etc....In the end one needs to connect all those arrays into one
>>> big time series.
>>>
>>> And here is my problem, I dont know how to code this, I know what I want....
>>>
>>> Many thanks for the advice so far....
>>>
>>>
>>> Best
>>>
>>>
>>> Gussinsky
>>>
>>>
>>> PS: Garrett, it is your Pair Trading code that brought this up my mind again
>>> :-)
>>>
>>> --
>>> View this message in context: http://r.789695.n4.nabble.com/Generating-a-front-month-only-Time-Series-for-Futures-Prices-tp4606794p4606979.html
>>> Sent from the Rmetrics mailing list archive at Nabble.com.
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.


From alexios at 4dscape.com  Thu May  3 22:48:22 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Thu, 03 May 2012 21:48:22 +0100
Subject: [R-SIG-Finance] Rugarch for EWMA/VaR
In-Reply-To: <1336076638952-4607011.post@n4.nabble.com>
References: <1336076638952-4607011.post@n4.nabble.com>
Message-ID: <4FA2EF16.8070709@4dscape.com>

Thomas,

1. The problem with the iGARCH model (related to a bad default setting) 
was fixed some time ago in the r-forge version (will be available on 
CRAN when I next update it there...since it is frowned upon to update a 
CRAN package more than 12 times in a year, you should look to r-forge 
for the 'newest' version at any time).
You have 2 options:
1. Download the latest version from r-forge OR,
2. In ugarchfit set the option "fit.control=list(stationarity=FALSE)"

2. That's definitely a problem in the summary method. Will investigate 
when I get a moment.

3. The error with the ugarchfilter C function, related to the newest 
version of R, was also fixed in the r-forge release.

4. You can't roll when all the parameters are fixed. It does not even 
make sense! Roll implies that you are fitting, forecasting, re-fitting.
Since you have all parameters fixed then just use the filter method on 
the data you want to forecast 1-ahead, else use the forecast method with 
a spec object and out of sample specified.

-Alexios

On 03/05/2012 21:23, ThomasF wrote:
> Dear R-Users, dear Alexios,
>
> I am trying to use rugarch to forecast volatiliy and do VaR-backtests using
> the Exponentially weighted moving average.
> To achieve this I used the iGarch, set omega to 0 and either estimate or fix
> alpha1 and beta1. Example code is provided at the end of my post.
>
> Some issues came up which I'd be glad to solve with your help:
>
> 1) Whenever i try to fit alpha1 and beta1, I always get 0.5 as result. I
> tried this for different underlyings and time horizons. Any idea what the
> reason could be?
>
> 2) I also get an error (I translated the error message to english) after the
> ARCH LM Test output:
>
> ARCH LM Tests
> ------------------------------------
>               Statistic DoF P-Value
> ARCH Lag[2]      4.653   2 0.09765
> ARCH Lag[5]      7.991   5 0.15672
> ARCH Lag[10]    12.082  10 0.27959
> Error in names(ans) = c("10%", "5%", "1%") :
>    Attribut 'names' [3] must have same length as the vector [0]
>
> Is there something wrong with my code or the way i put the data into the
> model? The other part of the outputs seems legit.
>
> 3) when I tried to do the same calculations with fixed alpha i get the
> following error when i try to filter the model:
>
> 1: In doTryCatch(return(expr), name, parentenv, handler) :
>    passing an object of type 'NULL' to .C (arg 8) is deprecated
> 2: In doTryCatch(return(expr), name, parentenv, handler) :
>    passing an object of type 'NULL' to .C (arg 9) is deprecated
>
> The ugarchfilter output seems reasonable again.
>
> 4)  I am not able to generate a rolling forecast and VaR Output when i fixed
> alpha1. Could you please give me a hint on how to do this with filtered
> data?
>
> 5) Does any of those issues arise of the use of the data as "zoo" object?
>
>
> Thanks in advance for your effort to help me
>
> Sincerely
>
> Thomas
>
>
> -----------------Code----------
>
>
> ################
> ###Download Data&  Compute Returns
> ################
>
> library ("tseries")
>
> #adjusted close price of sp500
> sp500price=get.hist.quote(instrument="^gspc", start="2006-01-01",
> end="2011-12-31", quote="AdjClose")
>
> # returns
> sp500returns=diff(log(sp500price))
>
>
> library("rugarch")
>
>
>
> ##############
> ### Use iGarch for EWMA - fitted alpha and beta
> ##############
>
>
> ### Model spec
> spec1= ugarchspec (variance.model = list(model = "iGARCH", garchOrder = c(1,
> 1)), mean.model=list(armaOrder=c(0,0),include.mean=FALSE),
> distribution.model = "norm", fixed.pars = list(omega=0))
>
> ###Fit Model
> fit1= ugarchfit(spec=spec1, data=sp500returns, out.sample=0, solver="solnp",
> solver.control=list(trace=0))
> show(fit1)
>
> #### rolling forecast und VaR
> roll1=ugarchroll(spec=spec1, data=sp500returns, n.ahead=1,
> forecast.length=500, refit.every=25, refit.window="recursive",
> solver="solnp", solver.control=list(tol=1e-05, delta=1e-06, trace=0),
> calculate.VaR=TRUE, VaR.alpha=c(0.01, 0.05))
>
> report(roll1, type="VaR", n.ahead=1, VaR.alpha=0.01, conf.level=0.95)
> report(roll1, type="fpm")
> plot(roll1, which="all")
>
>
>
>
> ##############
> ### Use iGarch for EWMA - fixed alpha and beta with lambda=0.94
> ##############
>
>
> ### Model spec
> spec2= ugarchspec (variance.model = list(model = "iGARCH", garchOrder = c(1,
> 1)), mean.model=list(armaOrder=c(0,0),include.mean=FALSE),
> distribution.model = "norm",  fixed.pars = list(omega=0, alpha1=0.06))
>
> ###Fit Model???
>
> fit2= ugarchfit(spec=spec2, data=sp500returns, out.sample=0, solver="solnp",
> solver.control=list(trace=0))
> show(fit2)
>
> ### filter model
> filt2= ugarchfilter(spec=spec2, data=sp500returns)
> show(filt2)
>
> #### rolling forecast und VaR
>
> roll2=ugarchroll(spec=spec2, data=sp500returns, n.ahead=1,
> forecast.length=500,   calculate.VaR=TRUE, VaR.alpha=c(0.01, 0.05))
>
> report(roll2, type="VaR", n.ahead=1, VaR.alpha=0.01, conf.level=0.95)
>
> report(roll2, type="fpm")
> plot(roll2, which="all")
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Rugarch-for-EWMA-VaR-tp4607011.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From frickerthomas at googlemail.com  Fri May  4 00:05:08 2012
From: frickerthomas at googlemail.com (ThomasF)
Date: Thu, 3 May 2012 15:05:08 -0700 (PDT)
Subject: [R-SIG-Finance] Rugarch for EWMA/VaR
In-Reply-To: <4FA2EF16.8070709@4dscape.com>
References: <1336076638952-4607011.post@n4.nabble.com>
	<4FA2EF16.8070709@4dscape.com>
Message-ID: <1336082708683-4607222.post@n4.nabble.com>

 Hello Alexios,

thank you for your quick reply. 

I'm going to download the newest version from R-Forge.

Concerning 4) I still have problems. 
I tried something like:
forc2=ugarchforecast(spec=spec2, data=sp500returns, n.ahead=1,
out.sample=500, calculate.VaR=TRUE, VaR.alpha=c(0.01, 0.05))  
and
forc2=ugarchforecast(spec=spec2, data=sp500returns, n.ahead=1,
out.sample=500)
what didn't work for me. 

I would like to be able to generate VaR-Backtesting Results and
VaR-exceedence-graphs like I did with the fitted model. 
Could you please help me out, maybe with some lines of code? I already
checked the example codes I could find on how to combine forecasting with
fixed parameters and getting the VaR-Output and still didn't manage to do
it.

Thomas





alexios wrote
> 
> Thomas,
> 
> 1. The problem with the iGARCH model (related to a bad default setting) 
> was fixed some time ago in the r-forge version (will be available on 
> CRAN when I next update it there...since it is frowned upon to update a 
> CRAN package more than 12 times in a year, you should look to r-forge 
> for the 'newest' version at any time).
> You have 2 options:
> 1. Download the latest version from r-forge OR,
> 2. In ugarchfit set the option "fit.control=list(stationarity=FALSE)"
> 
> 2. That's definitely a problem in the summary method. Will investigate 
> when I get a moment.
> 
> 3. The error with the ugarchfilter C function, related to the newest 
> version of R, was also fixed in the r-forge release.
> 
> 4. You can't roll when all the parameters are fixed. It does not even 
> make sense! Roll implies that you are fitting, forecasting, re-fitting.
> Since you have all parameters fixed then just use the filter method on 
> the data you want to forecast 1-ahead, else use the forecast method with 
> a spec object and out of sample specified.
> 
> -Alexios
> 
> On 03/05/2012 21:23, ThomasF wrote:
>> Dear R-Users, dear Alexios,
>>
>> I am trying to use rugarch to forecast volatiliy and do VaR-backtests
>> using
>> the Exponentially weighted moving average.
>> To achieve this I used the iGarch, set omega to 0 and either estimate or
>> fix
>> alpha1 and beta1. Example code is provided at the end of my post.
>>
>> Some issues came up which I'd be glad to solve with your help:
>>
>> 1) Whenever i try to fit alpha1 and beta1, I always get 0.5 as result. I
>> tried this for different underlyings and time horizons. Any idea what the
>> reason could be?
>>
>> 2) I also get an error (I translated the error message to english) after
>> the
>> ARCH LM Test output:
>>
>> ARCH LM Tests
>> ------------------------------------
>>               Statistic DoF P-Value
>> ARCH Lag[2]      4.653   2 0.09765
>> ARCH Lag[5]      7.991   5 0.15672
>> ARCH Lag[10]    12.082  10 0.27959
>> Error in names(ans) = c("10%", "5%", "1%") :
>>    Attribut 'names' [3] must have same length as the vector [0]
>>
>> Is there something wrong with my code or the way i put the data into the
>> model? The other part of the outputs seems legit.
>>
>> 3) when I tried to do the same calculations with fixed alpha i get the
>> following error when i try to filter the model:
>>
>> 1: In doTryCatch(return(expr), name, parentenv, handler) :
>>    passing an object of type 'NULL' to .C (arg 8) is deprecated
>> 2: In doTryCatch(return(expr), name, parentenv, handler) :
>>    passing an object of type 'NULL' to .C (arg 9) is deprecated
>>
>> The ugarchfilter output seems reasonable again.
>>
>> 4)  I am not able to generate a rolling forecast and VaR Output when i
>> fixed
>> alpha1. Could you please give me a hint on how to do this with filtered
>> data?
>>
>> 5) Does any of those issues arise of the use of the data as "zoo" object?
>>
>>
>> Thanks in advance for your effort to help me
>>
>> Sincerely
>>
>> Thomas
>>
>>
>> -----------------Code----------
>>
>>
>> ################
>> ###Download Data&  Compute Returns
>> ################
>>
>> library ("tseries")
>>
>> #adjusted close price of sp500
>> sp500price=get.hist.quote(instrument="^gspc", start="2006-01-01",
>> end="2011-12-31", quote="AdjClose")
>>
>> # returns
>> sp500returns=diff(log(sp500price))
>>
>>
>> library("rugarch")
>>
>>
>>
>> ##############
>> ### Use iGarch for EWMA - fitted alpha and beta
>> ##############
>>
>>
>> ### Model spec
>> spec1= ugarchspec (variance.model = list(model = "iGARCH", garchOrder =
>> c(1,
>> 1)), mean.model=list(armaOrder=c(0,0),include.mean=FALSE),
>> distribution.model = "norm", fixed.pars = list(omega=0))
>>
>> ###Fit Model
>> fit1= ugarchfit(spec=spec1, data=sp500returns, out.sample=0,
>> solver="solnp",
>> solver.control=list(trace=0))
>> show(fit1)
>>
>> #### rolling forecast und VaR
>> roll1=ugarchroll(spec=spec1, data=sp500returns, n.ahead=1,
>> forecast.length=500, refit.every=25, refit.window="recursive",
>> solver="solnp", solver.control=list(tol=1e-05, delta=1e-06, trace=0),
>> calculate.VaR=TRUE, VaR.alpha=c(0.01, 0.05))
>>
>> report(roll1, type="VaR", n.ahead=1, VaR.alpha=0.01, conf.level=0.95)
>> report(roll1, type="fpm")
>> plot(roll1, which="all")
>>
>>
>>
>>
>> ##############
>> ### Use iGarch for EWMA - fixed alpha and beta with lambda=0.94
>> ##############
>>
>>
>> ### Model spec
>> spec2= ugarchspec (variance.model = list(model = "iGARCH", garchOrder =
>> c(1,
>> 1)), mean.model=list(armaOrder=c(0,0),include.mean=FALSE),
>> distribution.model = "norm",  fixed.pars = list(omega=0, alpha1=0.06))
>>
>> ###Fit Model???
>>
>> fit2= ugarchfit(spec=spec2, data=sp500returns, out.sample=0,
>> solver="solnp",
>> solver.control=list(trace=0))
>> show(fit2)
>>
>> ### filter model
>> filt2= ugarchfilter(spec=spec2, data=sp500returns)
>> show(filt2)
>>
>> #### rolling forecast und VaR
>>
>> roll2=ugarchroll(spec=spec2, data=sp500returns, n.ahead=1,
>> forecast.length=500,   calculate.VaR=TRUE, VaR.alpha=c(0.01, 0.05))
>>
>> report(roll2, type="VaR", n.ahead=1, VaR.alpha=0.01, conf.level=0.95)
>>
>> report(roll2, type="fpm")
>> plot(roll2, which="all")
>>
>> --
>> View this message in context:
>> http://r.789695.n4.nabble.com/Rugarch-for-EWMA-VaR-tp4607011.html
>> Sent from the Rmetrics mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> R-SIG-Finance@ mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
> 
> _______________________________________________
> R-SIG-Finance@ mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
> 


--
View this message in context: http://r.789695.n4.nabble.com/Rugarch-for-EWMA-VaR-tp4607011p4607222.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Fri May  4 00:28:30 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Thu, 03 May 2012 23:28:30 +0100
Subject: [R-SIG-Finance] Rugarch for EWMA/VaR
In-Reply-To: <1336082708683-4607222.post@n4.nabble.com>
References: <1336076638952-4607011.post@n4.nabble.com>
	<4FA2EF16.8070709@4dscape.com>
	<1336082708683-4607222.post@n4.nabble.com>
Message-ID: <4FA3068E.5050206@4dscape.com>

Thomas,

You need to read the documentation more carefully (you forgot to declare 
the n.roll option).

Example:
library(rugarch)
data(sp500ret)

spec= ugarchspec (variance.model = list(model = "iGARCH", garchOrder =
c(1,1)), mean.model=list(armaOrder=c(0,0),include.mean=TRUE),
distribution.model = "norm",  fixed.pars = list(mu = 
mean(sp500ret[1:100,1]),omega=0, alpha1=0.06))

# forecast the model starting from t=101 to 1=1500
# forecast = 1-ahead x 1399 rolls = 1400 forecasts (includes the first # 
forecast as the 'zero' roll)

forecast = ugarchforecast(spec, sp500ret[1:1500,,drop=FALSE], n.roll = 
1399, n.ahead = 1, out.sample=1400)

# conditional mean (just a constant)
cmu = as.numeric(as.data.frame(forecast, which = "series", 
rollframe="all", aligned = FALSE))
# conditional sigma
csigma = as.numeric(as.data.frame(forecast, which = "sigma", 
rollframe="all", aligned = FALSE))

# use location+scaling transformation property of normal distribution:
VaR1 = qnorm(0.01)*csigma + cmu
VaR5 = qnorm(0.05)*csigma + cmu

dates = as.Date(rownames(sp500ret)[101:1500])
plot(dates, sp500ret[101:1500,1])
lines(dates, VaR1, col = "blue")
lines(dates, VaR5, col = "brown")

# VaR Exceedances Test
VaRTest(alpha = 0.01, actual = sp500ret[101:1500,1], VaR = VaR1)
VaRTest(alpha = 0.05, actual = sp500ret[101:1500,1], VaR = VaR5)

# VaR Duration Test
VaRDurTest(alpha = 0.01, actual = sp500ret[101:1500,1], VaR = VaR1)
VaRDurTest(alpha = 0.05, actual = sp500ret[101:1500,1], VaR = VaR5)



-Alexios


On 03/05/2012 23:05, ThomasF wrote:
>   Hello Alexios,
>
> thank you for your quick reply.
>
> I'm going to download the newest version from R-Forge.
>
> Concerning 4) I still have problems.
> I tried something like:
> forc2=ugarchforecast(spec=spec2, data=sp500returns, n.ahead=1,
> out.sample=500, calculate.VaR=TRUE, VaR.alpha=c(0.01, 0.05))
> and
> forc2=ugarchforecast(spec=spec2, data=sp500returns, n.ahead=1,
> out.sample=500)
> what didn't work for me.
>
> I would like to be able to generate VaR-Backtesting Results and
> VaR-exceedence-graphs like I did with the fitted model.
> Could you please help me out, maybe with some lines of code? I already
> checked the example codes I could find on how to combine forecasting with
> fixed parameters and getting the VaR-Output and still didn't manage to do
> it.
>
> Thomas
>
>
>
>
>
> alexios wrote
>>
>> Thomas,
>>
>> 1. The problem with the iGARCH model (related to a bad default setting)
>> was fixed some time ago in the r-forge version (will be available on
>> CRAN when I next update it there...since it is frowned upon to update a
>> CRAN package more than 12 times in a year, you should look to r-forge
>> for the 'newest' version at any time).
>> You have 2 options:
>> 1. Download the latest version from r-forge OR,
>> 2. In ugarchfit set the option "fit.control=list(stationarity=FALSE)"
>>
>> 2. That's definitely a problem in the summary method. Will investigate
>> when I get a moment.
>>
>> 3. The error with the ugarchfilter C function, related to the newest
>> version of R, was also fixed in the r-forge release.
>>
>> 4. You can't roll when all the parameters are fixed. It does not even
>> make sense! Roll implies that you are fitting, forecasting, re-fitting.
>> Since you have all parameters fixed then just use the filter method on
>> the data you want to forecast 1-ahead, else use the forecast method with
>> a spec object and out of sample specified.
>>
>> -Alexios
>>
>> On 03/05/2012 21:23, ThomasF wrote:
>>> Dear R-Users, dear Alexios,
>>>
>>> I am trying to use rugarch to forecast volatiliy and do VaR-backtests
>>> using
>>> the Exponentially weighted moving average.
>>> To achieve this I used the iGarch, set omega to 0 and either estimate or
>>> fix
>>> alpha1 and beta1. Example code is provided at the end of my post.
>>>
>>> Some issues came up which I'd be glad to solve with your help:
>>>
>>> 1) Whenever i try to fit alpha1 and beta1, I always get 0.5 as result. I
>>> tried this for different underlyings and time horizons. Any idea what the
>>> reason could be?
>>>
>>> 2) I also get an error (I translated the error message to english) after
>>> the
>>> ARCH LM Test output:
>>>
>>> ARCH LM Tests
>>> ------------------------------------
>>>                Statistic DoF P-Value
>>> ARCH Lag[2]      4.653   2 0.09765
>>> ARCH Lag[5]      7.991   5 0.15672
>>> ARCH Lag[10]    12.082  10 0.27959
>>> Error in names(ans) = c("10%", "5%", "1%") :
>>>     Attribut 'names' [3] must have same length as the vector [0]
>>>
>>> Is there something wrong with my code or the way i put the data into the
>>> model? The other part of the outputs seems legit.
>>>
>>> 3) when I tried to do the same calculations with fixed alpha i get the
>>> following error when i try to filter the model:
>>>
>>> 1: In doTryCatch(return(expr), name, parentenv, handler) :
>>>     passing an object of type 'NULL' to .C (arg 8) is deprecated
>>> 2: In doTryCatch(return(expr), name, parentenv, handler) :
>>>     passing an object of type 'NULL' to .C (arg 9) is deprecated
>>>
>>> The ugarchfilter output seems reasonable again.
>>>
>>> 4)  I am not able to generate a rolling forecast and VaR Output when i
>>> fixed
>>> alpha1. Could you please give me a hint on how to do this with filtered
>>> data?
>>>
>>> 5) Does any of those issues arise of the use of the data as "zoo" object?
>>>
>>>
>>> Thanks in advance for your effort to help me
>>>
>>> Sincerely
>>>
>>> Thomas
>>>
>>>
>>> -----------------Code----------
>>>
>>>
>>> ################
>>> ###Download Data&   Compute Returns
>>> ################
>>>
>>> library ("tseries")
>>>
>>> #adjusted close price of sp500
>>> sp500price=get.hist.quote(instrument="^gspc", start="2006-01-01",
>>> end="2011-12-31", quote="AdjClose")
>>>
>>> # returns
>>> sp500returns=diff(log(sp500price))
>>>
>>>
>>> library("rugarch")
>>>
>>>
>>>
>>> ##############
>>> ### Use iGarch for EWMA - fitted alpha and beta
>>> ##############
>>>
>>>
>>> ### Model spec
>>> spec1= ugarchspec (variance.model = list(model = "iGARCH", garchOrder =
>>> c(1,
>>> 1)), mean.model=list(armaOrder=c(0,0),include.mean=FALSE),
>>> distribution.model = "norm", fixed.pars = list(omega=0))
>>>
>>> ###Fit Model
>>> fit1= ugarchfit(spec=spec1, data=sp500returns, out.sample=0,
>>> solver="solnp",
>>> solver.control=list(trace=0))
>>> show(fit1)
>>>
>>> #### rolling forecast und VaR
>>> roll1=ugarchroll(spec=spec1, data=sp500returns, n.ahead=1,
>>> forecast.length=500, refit.every=25, refit.window="recursive",
>>> solver="solnp", solver.control=list(tol=1e-05, delta=1e-06, trace=0),
>>> calculate.VaR=TRUE, VaR.alpha=c(0.01, 0.05))
>>>
>>> report(roll1, type="VaR", n.ahead=1, VaR.alpha=0.01, conf.level=0.95)
>>> report(roll1, type="fpm")
>>> plot(roll1, which="all")
>>>
>>>
>>>
>>>
>>> ##############
>>> ### Use iGarch for EWMA - fixed alpha and beta with lambda=0.94
>>> ##############
>>>
>>>
>>> ### Model spec
>>> spec2= ugarchspec (variance.model = list(model = "iGARCH", garchOrder =
>>> c(1,
>>> 1)), mean.model=list(armaOrder=c(0,0),include.mean=FALSE),
>>> distribution.model = "norm",  fixed.pars = list(omega=0, alpha1=0.06))
>>>
>>> ###Fit Model???
>>>
>>> fit2= ugarchfit(spec=spec2, data=sp500returns, out.sample=0,
>>> solver="solnp",
>>> solver.control=list(trace=0))
>>> show(fit2)
>>>
>>> ### filter model
>>> filt2= ugarchfilter(spec=spec2, data=sp500returns)
>>> show(filt2)
>>>
>>> #### rolling forecast und VaR
>>>
>>> roll2=ugarchroll(spec=spec2, data=sp500returns, n.ahead=1,
>>> forecast.length=500,   calculate.VaR=TRUE, VaR.alpha=c(0.01, 0.05))
>>>
>>> report(roll2, type="VaR", n.ahead=1, VaR.alpha=0.01, conf.level=0.95)
>>>
>>> report(roll2, type="fpm")
>>> plot(roll2, which="all")
>>>
>>> --
>>> View this message in context:
>>> http://r.789695.n4.nabble.com/Rugarch-for-EWMA-VaR-tp4607011.html
>>> Sent from the Rmetrics mailing list archive at Nabble.com.
>>>
>>> _______________________________________________
>>> R-SIG-Finance@ mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>>
>> _______________________________________________
>> R-SIG-Finance@ mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Rugarch-for-EWMA-VaR-tp4607011p4607222.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From sduve at hotmail.com  Fri May  4 10:27:18 2012
From: sduve at hotmail.com (gussinsky)
Date: Fri, 4 May 2012 01:27:18 -0700 (PDT)
Subject: [R-SIG-Finance] Generating a front month only Time Series for
	Futures Prices
In-Reply-To: <CA+xi=qZy-jy8j5aeFY8OsEt0Vw4xHZQEzvZqcpNc6P1BinWuRA@mail.gmail.com>
References: <1336070650152-4606794.post@n4.nabble.com>
	<CAGS5yBXQ91Nnyr2Q9hAWD=4qSAj42kYsUhnz=NgCV2XOMcp0JQ@mail.gmail.com>
	<CA+xi=qazYQxYPL0mtBSnTeJSZ85-bDk2kBDnUj19d7nf7+ov_w@mail.gmail.com>
	<CA+xi=qait6=_wC4pNZF+EGcxNUHEYP3_t5GpxX=yYpcK+=G+kw@mail.gmail.com>
	<1336075631561-4606979.post@n4.nabble.com>
	<CA+xi=qbLn_1mkV9Wc9+5ZpQLG2ZDE6vb4FBbTuW-w6ViEhXXww@mail.gmail.com>
	<CA+xi=qYwoT-mkNDaSpZVg0Q+RCrS7mE+ryUQZj4uvC-=+798Pg@mail.gmail.com>
	<CA+xi=qZy-jy8j5aeFY8OsEt0Vw4xHZQEzvZqcpNc6P1BinWuRA@mail.gmail.com>
Message-ID: <1336120038765-4608088.post@n4.nabble.com>

Hey Garrett,

I think the ContinousSeriesCreator, is probably exactly what I am looking
for. Thanks, and how did you find this function?? I will have to find out
what the impact is on the location spreads, caused by different roll dates.
But I think Gasoil and Heating Oil are expiring similarly.

The Trade Blox adjusted series, are problaby very useful for long/short
Backtesting, so thanks for this as well. 

I was trying to find cointegrated pairs of future contracts, but therefore I
need to make these series comparable. Especially in Energy, there are
various relationships around, which are worth investigating.

HO vs. Gasoil, so location spread
Power vs. Gas, Spark Spread
Power vs. Coal, Dark Spread
Gas on one location, vs Gas on another location
WTI Crude vs. Brent
etc.

Although I must admit, many of these spreads are very commercially driven,
so its usually the smart money moving these spreads.

That's what I am trying to investigate a bit further.

Thanks Garrett!


Best


Sven



--
View this message in context: http://r.789695.n4.nabble.com/Generating-a-front-month-only-Time-Series-for-Futures-Prices-tp4606794p4608088.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From tallent_e at lycos.com  Fri May  4 13:14:16 2012
From: tallent_e at lycos.com (Edouard Tallent)
Date: Fri, 4 May 2012 11:14:16 +0000 (GMT)
Subject: [R-SIG-Finance] Generating a front month only Time Series
References: <mailman.3.1336125601.1096.r-sig-finance@r-project.org>
Message-ID: <1008339611.43119.1336130057004.JavaMail.mail@webmail03>

i wish there was a finite answer to this question. :-)

as regards automating the wheat-corn spread, you've to fully realize that these are agricultural commodities.
crop calendars are different, both cultivations respond differently to weather conditions, US wheat prices move with international commercial activity, ethanol market is a main driver of US corn prices, and so on ... and forces in actions are likely to vary from one year to the next.
i'm not saying i know much more than you do. no way. just a kind warning if you come from equities or forex.

good luck in your endeavors.

best
?douard

http://quantcorner.wordpress.com

===================

Message: 10
Date: Thu, 3 May 2012 13:07:11 -0700 (PDT)
From: gussinsky <sduve at hotmail.com>
To: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Generating a front month only Time Series
for	Futures Prices
Message-ID: <1336075631561-4606979.post at n4.nabble.com>
Content-Type: text/plain; charset=us-ascii

Hey Garrett, 

thank you for this, I had a read through this page in the book you
referenced. And looking at Agricultural Commodities this makes a lot of
sense. And if you look at Wheat and Corn on the CBOT, I think you only have
5 deliveries per year, hence the massive gaps when each contract rolls off.
So here the interpolation makes sense, and I think one could approach this
trade as a box.

But lets consider for example heating oil again, here you have monthly
deliveries, and the seasonality is far less nowadays, in Europe even less
due to the increased Diesel consumption on the roads. 

But lets consider this:

"Trading in a current month shall cease on the last business day of the
month preceding the delivery month."

This is the expiry rule for Heating Oil on the Nymex. I think this is
codeable without minefields isn't it. It would be terrific if anyone could
point me in the right direction on how to approach this.

I think it wont be possible to download this with one simple function. I
suspect one would have to store individual files for the respective expiry
contracts, and perhaps index the file names. And then perhaps through a loop
function could read out the corresponding 1:n values for each month, store
them in an array, and then run the next month with the same rule, and store
them again, etc....In the end one needs to connect all those arrays into one
big time series.

And here is my problem, I dont know how to code this, I know what I want....

Many thanks for the advice so far....


Best


Gussinsky


PS: Garrett, it is your Pair Trading code that brought this up my mind again
:-)


From gsee000 at gmail.com  Fri May  4 13:47:17 2012
From: gsee000 at gmail.com (G See)
Date: Fri, 4 May 2012 06:47:17 -0500
Subject: [R-SIG-Finance] Generating a front month only Time Series for
 Futures Prices
In-Reply-To: <1336120038765-4608088.post@n4.nabble.com>
References: <1336070650152-4606794.post@n4.nabble.com>
	<CAGS5yBXQ91Nnyr2Q9hAWD=4qSAj42kYsUhnz=NgCV2XOMcp0JQ@mail.gmail.com>
	<CA+xi=qazYQxYPL0mtBSnTeJSZ85-bDk2kBDnUj19d7nf7+ov_w@mail.gmail.com>
	<CA+xi=qait6=_wC4pNZF+EGcxNUHEYP3_t5GpxX=yYpcK+=G+kw@mail.gmail.com>
	<1336075631561-4606979.post@n4.nabble.com>
	<CA+xi=qbLn_1mkV9Wc9+5ZpQLG2ZDE6vb4FBbTuW-w6ViEhXXww@mail.gmail.com>
	<CA+xi=qYwoT-mkNDaSpZVg0Q+RCrS7mE+ryUQZj4uvC-=+798Pg@mail.gmail.com>
	<CA+xi=qZy-jy8j5aeFY8OsEt0Vw4xHZQEzvZqcpNc6P1BinWuRA@mail.gmail.com>
	<1336120038765-4608088.post@n4.nabble.com>
Message-ID: <CA+xi=qZb6TbTeinzJf9j3TsjNPoQ8fJ2a4p93LJqVdUKopisWw@mail.gmail.com>

On Fri, May 4, 2012 at 3:27 AM, gussinsky <sduve at hotmail.com> wrote:
> Hey Garrett,
>
> I think the ContinousSeriesCreator, is probably exactly what I am looking
> for. Thanks, and how did you find this function??

No special search skills, I just try to keep track of what code is in
packages I maintain. ;-)


From heypeterchan at yahoo.com  Fri May  4 18:35:47 2012
From: heypeterchan at yahoo.com (Peter Chan)
Date: Fri, 4 May 2012 09:35:47 -0700 (PDT)
Subject: [R-SIG-Finance] Blotter - failed to build
Message-ID: <1336149347.40815.YahooMailNeo@web161303.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120504/434f6414/attachment.pl>

From student.northwestern at gmail.com  Fri May  4 19:02:38 2012
From: student.northwestern at gmail.com (jim green)
Date: Fri, 4 May 2012 10:02:38 -0700 (PDT)
Subject: [R-SIG-Finance] Blotter - failed to build
In-Reply-To: <1336149347.40815.YahooMailNeo@web161303.mail.bf1.yahoo.com>
References: <1336149347.40815.YahooMailNeo@web161303.mail.bf1.yahoo.com>
Message-ID: <1336150958725-4609165.post@n4.nabble.com>

Hi, pls see this link:

http://r.789695.n4.nabble.com/quantstrat-package-td4501345.html
Jim.

--
View this message in context: http://r.789695.n4.nabble.com/Blotter-failed-to-build-tp4609116p4609165.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From sduve at hotmail.com  Fri May  4 20:33:26 2012
From: sduve at hotmail.com (gussinsky)
Date: Fri, 4 May 2012 11:33:26 -0700 (PDT)
Subject: [R-SIG-Finance] Cant get this Quantstrat going,
Message-ID: <1336156406470-4609350.post@n4.nabble.com>

Hello All,

#simple Long only Strategie basierend auf CCI Threshhold Entry und Exit

###
###
###

suppressWarnings(rm("order_book.RSI", pos=.strategy))
suppressWarnings(rm("account.RSI", "portfolio.RSI", pos=.blotter))
suppressWarnings(rm("account.st", "portfolio.st", "stock.str", "initDate",
"initEq", 'start_t', 'end_t'))

require(quantstrat)

#Define Instrument

x = "HO"
symbol = getSymbols(x, src='tblox')
names(HO) = c("Open", "High", "Low", "Close", "Volume", "OpenInterest",
"Month", "Else")

#Define Start Date

initDate = '2004-01-01'

#Define equity

initEq = 100000


#Strategy

stratCCI = strategy("CCI")


#Portfolio

port.st = 'CCI'
initPortf(port.st, symbols=symbol, initDate=initDate)

#Account

initAcct(port.st, portfolios=port.st, initDate=initDate)

#Orders

initOrders(portfolio=port.st, initDate=initDate)

#Indicator 

stratCCI = add.indicator(strategy = stratCCI, name = "CCI", arguments =
list(price = quote(getPrice(mktdata))), label="CCI")

#s
# CCI >  -100, relation gt= greater than, 
stratCCI = add.signal(strategy=stratCCI, name="sigCCI", arguments =
list(threshold=-100, column="CCI", relationship="gt", cross=TRUE),
label="CCI.gt.-100")
#CCI < 100, relation lt= lower than,
stratCCI = add.signal(strategy=stratCCI, name="sigCCI", arguments =
list(threshold=100, solumn="CCI", relationship="lt", cross=TRUE),
label="CCI.lt.100")

#RTrading Rules

stratCCI = add.rule(strategy=stratCCI, name='ruleSignal', arguments =
list(sigcol="CCI.gt.-100", sigval=TRUE, orderqty=1000, ordertype='market',
orderside='long', pricemethod='market', replace=FALSE), type='enter',
path.dep=TRUE)

stratCCI = add.rule(strategy=stratCCI, name='ruleSignal', arguments =
list(sigcol="CCI.lt.100", sigval=TRUE, orderqty=-1000, ordertype='market',
orderside='short', pricemethod='market', replace=FALSE), type='exit',
path.dep=TRUE)


currency("USD")

start_t = Sys.time()

out = try(applyStrategy(strategy=stratCCI, portfolios=port.st,
parameters=list(n=2)))

end_t = Sys.time()

print(end_t-start_t)

chart.Posn(Portfolio=port.st, Symbol=symbol)


this is the error i get:


out = try(applyStrategy(strategy=stratCCI, portfolios=port.st,
parameters=list(n=2)))
Error in inherits(x, "xts") : argument "HLC" is missing, with no default
In addition: Warning message:
In applyIndicators(strategy = strategy, mktdata = mktdata, parameters =
parameters,  :
  some arguments stored for CCI do not match


What could the problem be here?

Best


Sven



--
View this message in context: http://r.789695.n4.nabble.com/Cant-get-this-Quantstrat-going-tp4609350.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Fri May  4 20:57:30 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 04 May 2012 13:57:30 -0500
Subject: [R-SIG-Finance] Cant get this Quantstrat going,
In-Reply-To: <1336156406470-4609350.post@n4.nabble.com>
References: <1336156406470-4609350.post@n4.nabble.com>
Message-ID: <1336157850.29163.53.camel@brian-rcg>

The 'name' of a indicator, signal, or rule is the name of a function,
and will be found via match.fun.

Since there is no function called 'sigCCI', I can't imagine it would
work.

You probably want name='sigThreshold' and column='Close' or something
similar.  From what I see, you probably don't need an indicator at
all... the price is the indicator.

Also, please don't cross-post.  You posted ten minutes ago to the
blotter forum.

On Fri, 2012-05-04 at 11:33 -0700, gussinsky wrote:
> Hello All,
> 
> #simple Long only Strategie basierend auf CCI Threshhold Entry und Exit
> 
> ###
> ###
> ###
> 
> suppressWarnings(rm("order_book.RSI", pos=.strategy))
> suppressWarnings(rm("account.RSI", "portfolio.RSI", pos=.blotter))
> suppressWarnings(rm("account.st", "portfolio.st", "stock.str", "initDate",
> "initEq", 'start_t', 'end_t'))
> 
> require(quantstrat)
> 
> #Define Instrument
> 
> x = "HO"
> symbol = getSymbols(x, src='tblox')
> names(HO) = c("Open", "High", "Low", "Close", "Volume", "OpenInterest",
> "Month", "Else")
> 
> #Define Start Date
> 
> initDate = '2004-01-01'
> 
> #Define equity
> 
> initEq = 100000
> 
> 
> #Strategy
> 
> stratCCI = strategy("CCI")
> 
> 
> #Portfolio
> 
> port.st = 'CCI'
> initPortf(port.st, symbols=symbol, initDate=initDate)
> 
> #Account
> 
> initAcct(port.st, portfolios=port.st, initDate=initDate)
> 
> #Orders
> 
> initOrders(portfolio=port.st, initDate=initDate)
> 
> #Indicator 
> 
> stratCCI = add.indicator(strategy = stratCCI, name = "CCI", arguments =
> list(price = quote(getPrice(mktdata))), label="CCI")
> 
> #s
> # CCI >  -100, relation gt= greater than, 
> stratCCI = add.signal(strategy=stratCCI, name="sigCCI", arguments =
> list(threshold=-100, column="CCI", relationship="gt", cross=TRUE),
> label="CCI.gt.-100")
> #CCI < 100, relation lt= lower than,
> stratCCI = add.signal(strategy=stratCCI, name="sigCCI", arguments =
> list(threshold=100, solumn="CCI", relationship="lt", cross=TRUE),
> label="CCI.lt.100")
> 
> #RTrading Rules
> 
> stratCCI = add.rule(strategy=stratCCI, name='ruleSignal', arguments =
> list(sigcol="CCI.gt.-100", sigval=TRUE, orderqty=1000, ordertype='market',
> orderside='long', pricemethod='market', replace=FALSE), type='enter',
> path.dep=TRUE)
> 
> stratCCI = add.rule(strategy=stratCCI, name='ruleSignal', arguments =
> list(sigcol="CCI.lt.100", sigval=TRUE, orderqty=-1000, ordertype='market',
> orderside='short', pricemethod='market', replace=FALSE), type='exit',
> path.dep=TRUE)
> 
> 
> currency("USD")
> 
> start_t = Sys.time()
> 
> out = try(applyStrategy(strategy=stratCCI, portfolios=port.st,
> parameters=list(n=2)))
> 
> end_t = Sys.time()
> 
> print(end_t-start_t)
> 
> chart.Posn(Portfolio=port.st, Symbol=symbol)
> 
> 
> this is the error i get:
> 
> 
> out = try(applyStrategy(strategy=stratCCI, portfolios=port.st,
> parameters=list(n=2)))
> Error in inherits(x, "xts") : argument "HLC" is missing, with no default
> In addition: Warning message:
> In applyIndicators(strategy = strategy, mktdata = mktdata, parameters =
> parameters,  :
>   some arguments stored for CCI do not match
> 
> 
> What could the problem be here?
> 
> Best
> 
> 
> Sven
> 
> 
> 
> --
> View this message in context: http://r.789695.n4.nabble.com/Cant-get-this-Quantstrat-going-tp4609350.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From sduve at hotmail.com  Fri May  4 21:23:33 2012
From: sduve at hotmail.com (gussinsky)
Date: Fri, 4 May 2012 12:23:33 -0700 (PDT)
Subject: [R-SIG-Finance] Cant get this Quantstrat going,
In-Reply-To: <1336157850.29163.53.camel@brian-rcg>
References: <1336156406470-4609350.post@n4.nabble.com>
	<1336157850.29163.53.camel@brian-rcg>
Message-ID: <1336159413051-4609466.post@n4.nabble.com>

Apologies for cross posting didnt see the other one going through.

Even with your adjustments I dont get it going. Ill keep trying.


Thanks



Sven

--
View this message in context: http://r.789695.n4.nabble.com/Cant-get-this-Quantstrat-going-tp4609350p4609466.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexander.chernyakov at gmail.com  Sat May  5 00:30:37 2012
From: alexander.chernyakov at gmail.com (Alexander Chernyakov)
Date: Fri, 4 May 2012 18:30:37 -0400
Subject: [R-SIG-Finance] panel data in R
Message-ID: <CAP=rYLWKZtphA4HaaWmFvtDJiRzjMfyRbzmB-EEsxBof1yXjMg@mail.gmail.com>

Hi,
This question is of a general nature: How do people handle panel data
in R?  For example,  I have returns of firms and each firm has daily
observations.  One way is to use the plm package.. another is to use
plyr and just do the operations on (date, firmid) units using
something like zoo as a container for each firm so that lagging and
differencing can be done.  For regression it seems that plm might be
the better option?  Just curious if somebody has a well worked out
system for this.

Thanks
Alex


From bhavnarpj at gmail.com  Sat May  5 06:49:44 2012
From: bhavnarpj at gmail.com (bhavna)
Date: Fri, 4 May 2012 21:49:44 -0700 (PDT)
Subject: [R-SIG-Finance] Quantstrat - Error while applying strategy
In-Reply-To: <1327482055007-4326718.post@n4.nabble.com>
References: <1303695984905-3472438.post@n4.nabble.com>
	<1303733217149-3473009.post@n4.nabble.com>
	<1327407624493-4323625.post@n4.nabble.com>
	<1327482055007-4326718.post@n4.nabble.com>
Message-ID: <1336193384996-4610537.post@n4.nabble.com>

Hi,

I am facing similar issue and tried the workaround suggested by Soren, but
still does not seem to work.

My data is in below format with datetime as index since I am looking at 15
min bars:
> nseData[1,]
                                     Open   High     Low    Close
2011-07-26 09:15:00 5704 5708.8 5689.05  5693
> class(nseData)
[1] "xts" "zoo"

Attached is the custom indicator and strategy I am trying to run.
When I run the applyStrategy command
out<-try(applyStrategy(strategy=strat,portfolios=portfolio.st,mktdata=nseData))

R takes lot of time to run. Not sure what is wrong. Even though I am passing
an xts object to the T3 custom indicator I see errors like below when I do
not use the .function(i) method
(ncol(tmp_val) == 1) { : argument is of length zero

http://r.789695.n4.nabble.com/file/n4610537/TestStrat.txt TestStrat.txt 

Please advice.

Thanks,
Bhavna


--
View this message in context: http://r.789695.n4.nabble.com/Quantstrat-Error-while-applying-strategy-tp3472438p4610537.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From sduve at hotmail.com  Sat May  5 12:37:37 2012
From: sduve at hotmail.com (gussinsky)
Date: Sat, 5 May 2012 03:37:37 -0700 (PDT)
Subject: [R-SIG-Finance] Cant get this Quantstrat going,
In-Reply-To: <1336159413051-4609466.post@n4.nabble.com>
References: <1336156406470-4609350.post@n4.nabble.com>
	<1336157850.29163.53.camel@brian-rcg>
	<1336159413051-4609466.post@n4.nabble.com>
Message-ID: <1336214257508-4610898.post@n4.nabble.com>

Hello,

I am coming back to my example, and I was able to get rid of the initial
errors, but new ones came up, and I couldnt find any help in other threads
in the forum, my script is attached, here is the error:

> out = try(applyStrategy(strategy=stratCCI, portfolios=port.st,
> parameters=list(n=2)))
Error in .xts(e, .index(e1), .indexCLASS = indexClass(e1), .indexFORMAT =
indexFormat(e1),  : 
  index length must match number of observations

at the same time I checked what is in mktdata:

             Open   High    Low  Close Volume OpenInterest  Month   Else      
CCI CCI.gt..100 CCI.lt.100
1995-01-03 1.6476 1.6491 1.6331 1.6335  28835       127585 199502 0.4994       
NA          NA         NA
1995-01-04 1.6311 1.6366 1.6291 1.6305  30852       123757 199502 0.4964
-66.66667          NA         NA
1995-01-05 1.6266 1.6346 1.6266 1.6337  35708       126672 199502 0.4996
-66.66667           0          0
1995-01-06 1.6366 1.6391 1.6291 1.6293  35477       127964 199502 0.4952 
66.66667           0          0
1995-01-09 1.6261 1.6271 1.6161 1.6174  34237       129668 199502 0.4833
-66.66667           0          0

My question, does the above error have to do with the NA contained in
mktdata?

I also would like to point out, that the calculation of the CCI is wrong,
all through the mktdata it is either -66.66 or 66.66. Having performed a
manual calculation of the CCI with the underlying data from tblox, worked
just fine. 

Best

Sven

http://r.789695.n4.nabble.com/file/n4610898/TestBacktestCCI.R
TestBacktestCCI.R 

--
View this message in context: http://r.789695.n4.nabble.com/Cant-get-this-Quantstrat-going-tp4609350p4610898.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Sat May  5 12:44:22 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sat, 05 May 2012 05:44:22 -0500
Subject: [R-SIG-Finance] Quantstrat - Error while applying strategy
In-Reply-To: <1336193384996-4610537.post@n4.nabble.com>
References: <1303695984905-3472438.post@n4.nabble.com>
	<1303733217149-3473009.post@n4.nabble.com>
	<1327407624493-4323625.post@n4.nabble.com>
	<1327482055007-4326718.post@n4.nabble.com>
	<1336193384996-4610537.post@n4.nabble.com>
Message-ID: <1336214662.31501.145.camel@brian-desktop>

>From glancing at your code, it seems that your first major problem is
that your indicator function is not vectorized, and should be.  

Indicators, as described in the documentation, should use vectorized
operations whenever possible.

You are calling your .T3 function once for every row of your data
(ouch), rather than taking advantage of vectorized operations to act on
every row of the market data at once.  Your sapply loop will be
expensive in both time and memory, and appears completely unnecessary.  

You can and should test your indicator function on your market data
outside of quantstrat before trying to include it in a strategy.

Given how your function is constructed, it's also unclear whether you
even need to call it twice, or whether you would also be better off just
giving it both your fast.ma and the slow.ma at the same time, and only
going over the data once.

In short, R is 'taking a lot of time to run' because your indicator
function needs to be rewritten to be efficient.

Regards,

   - Brian

On Fri, 2012-05-04 at 21:49 -0700, bhavna wrote:
> Hi,
> 
> I am facing similar issue and tried the workaround suggested by Soren, but
> still does not seem to work.
> 
> My data is in below format with datetime as index since I am looking at 15
> min bars:
> > nseData[1,]
>                                      Open   High     Low    Close
> 2011-07-26 09:15:00 5704 5708.8 5689.05  5693
> > class(nseData)
> [1] "xts" "zoo"
> 
> Attached is the custom indicator and strategy I am trying to run.
> When I run the applyStrategy command
> out<-try(applyStrategy(strategy=strat,portfolios=portfolio.st,mktdata=nseData))
> 
> R takes lot of time to run. Not sure what is wrong. Even though I am passing
> an xts object to the T3 custom indicator I see errors like below when I do
> not use the .function(i) method
> (ncol(tmp_val) == 1) { : argument is of length zero
> 
> http://r.789695.n4.nabble.com/file/n4610537/TestStrat.txt TestStrat.txt 
> 
> Please advice.
> 
> Thanks,
> Bhavna
> 
> 
> --
> View this message in context: http://r.789695.n4.nabble.com/Quantstrat-Error-while-applying-strategy-tp3472438p4610537.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From brian at braverock.com  Sat May  5 12:51:22 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sat, 05 May 2012 05:51:22 -0500
Subject: [R-SIG-Finance] Cant get this Quantstrat going,
In-Reply-To: <1336214257508-4610898.post@n4.nabble.com>
References: <1336156406470-4609350.post@n4.nabble.com>
	<1336157850.29163.53.camel@brian-rcg>
	<1336159413051-4609466.post@n4.nabble.com>
	<1336214257508-4610898.post@n4.nabble.com>
Message-ID: <1336215082.31501.148.camel@brian-desktop>

On Sat, 2012-05-05 at 03:37 -0700, gussinsky wrote:
> I also would like to point out, that the calculation of the CCI is
> wrong,all through the mktdata it is either -66.66 or 66.66. Having
> performed a manual calculation of the CCI with the underlying data
> from tblox, worked just fine. 

Well then, your CCI function is broken.  

Fix that *first* and apply it to your market data before trying to
insert the indicator it into a strategy.

All that applyIndicators (as called by applyStrategy) does is call your
indicator function and pass it your market data.  You can and should
test your indicator function outside of quantstrat to make sur ethat you
can apply it to market data before trying to incorporate it  into a
strategy.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From sduve at hotmail.com  Sat May  5 12:55:53 2012
From: sduve at hotmail.com (gussinsky)
Date: Sat, 5 May 2012 03:55:53 -0700 (PDT)
Subject: [R-SIG-Finance] Cant get this Quantstrat going,
In-Reply-To: <1336215082.31501.148.camel@brian-desktop>
References: <1336156406470-4609350.post@n4.nabble.com>
	<1336157850.29163.53.camel@brian-rcg>
	<1336159413051-4609466.post@n4.nabble.com>
	<1336214257508-4610898.post@n4.nabble.com>
	<1336215082.31501.148.camel@brian-desktop>
Message-ID: <1336215353472-4610921.post@n4.nabble.com>

Not sure I understand, CCI is a function in TTR, I have tested it on the
mktdata and it works:

x = CCI(HLC(mktdata))

works fine.





--
View this message in context: http://r.789695.n4.nabble.com/Cant-get-this-Quantstrat-going-tp4609350p4610921.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Sat May  5 13:13:27 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sat, 05 May 2012 06:13:27 -0500
Subject: [R-SIG-Finance] Cant get this Quantstrat going,
In-Reply-To: <1336215353472-4610921.post@n4.nabble.com>
References: <1336156406470-4609350.post@n4.nabble.com>
	<1336157850.29163.53.camel@brian-rcg>
	<1336159413051-4609466.post@n4.nabble.com>
	<1336214257508-4610898.post@n4.nabble.com>
	<1336215082.31501.148.camel@brian-desktop>
	<1336215353472-4610921.post@n4.nabble.com>
Message-ID: <1336216407.31501.153.camel@brian-desktop>

On Sat, 2012-05-05 at 03:55 -0700, gussinsky wrote:
> Not sure I understand, CCI is a function in TTR, I have tested it on the
> mktdata and it works:
> 
> x = CCI(HLC(mktdata))
> 
> works fine.

CCI does put NA's at the beginning of the data series.  If that is a
problem for the rest of your logic, then you'll need to fix that.  As I
said already, all that applyIndicators does is call your indicator
function.  

This works:

require(quantstrat)
getSymbols('IBM')
CCI(HLC(IBM))
nrow(IBM) == nrow(CCI(HLC(IBM)))
#TRUE
strategy('test', store=TRUE)
add.indicator(strategy = 'test', name = "CCI", arguments = list(HLC =
quote(HLC(mktdata))), label="CCI")
applyIndicators('test',mktdata=IBM)
applyIndicators('test',mktdata=IBM)$CCI == CCI(HLC(IBM))
# TRUE for every row

I'm not going to debug your strategy for you.


-- 
Brian


From richard.c.herron at gmail.com  Sat May  5 14:43:20 2012
From: richard.c.herron at gmail.com (Richard Herron)
Date: Sat, 5 May 2012 08:43:20 -0400
Subject: [R-SIG-Finance] panel data in R
In-Reply-To: <CAP=rYLWKZtphA4HaaWmFvtDJiRzjMfyRbzmB-EEsxBof1yXjMg@mail.gmail.com>
References: <CAP=rYLWKZtphA4HaaWmFvtDJiRzjMfyRbzmB-EEsxBof1yXjMg@mail.gmail.com>
Message-ID: <CAL9ybL_1NHTX8Oicp8AahEKoncorfpk2_v6MvD2aVY1ANnC4SA@mail.gmail.com>

What kind of models do plan on using?

If you plan on using time series models, then I suggest generating a
list where each entry is one firm. This will make it easy to fit
models with lapply.

If you plan on using panel models, then I suggest using PLM. It is
easy enough to manually code within and between estimators, but if you
use clustered standard errors or dynamic panel models, then PLM will
make you life a lot easier.

Richard Herron


On Fri, May 4, 2012 at 6:30 PM, Alexander Chernyakov
<alexander.chernyakov at gmail.com> wrote:
>
> Hi,
> This question is of a general nature: How do people handle panel data
> in R? ?For example, ?I have returns of firms and each firm has daily
> observations. ?One way is to use the plm package.. another is to use
> plyr and just do the operations on (date, firmid) units using
> something like zoo as a container for each firm so that lagging and
> differencing can be done. ?For regression it seems that plm might be
> the better option? ?Just curious if somebody has a well worked out
> system for this.
>
> Thanks
> Alex
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From me at censix.com  Sat May  5 17:20:54 2012
From: me at censix.com (me)
Date: Sat, 5 May 2012 17:20:54 +0200
Subject: [R-SIG-Finance] Quantstrat - Error while applying strategy
In-Reply-To: <1336193384996-4610537.post@n4.nabble.com>
References: <1303695984905-3472438.post@n4.nabble.com>
	<1303733217149-3473009.post@n4.nabble.com>
	<1327407624493-4323625.post@n4.nabble.com>
	<1327482055007-4326718.post@n4.nabble.com>
	<1336193384996-4610537.post@n4.nabble.com>
Message-ID: <20120505172054.560c45d1@desktop1>

Dear Bhavna

I had quick look at your code. If you define your T3 function like
this (as Brian has already suggested), the whole thing runs fine (and
fast), as long as you also reduce your 'nseData' to a single column,
i.e. the Close. If you need all OHLC columns then you need to have a
closer look at what their names are and if you use those names
directly in another indicator/signal in your strategy. I remember there
was a tiny bug in quantstrat where the output of indicator or signal
functions would not get renamed as indicated in the 'label' argument.
But then again, maybe this has already been fixed.

nseData <- Cl(nseData)


`T3` <-
function(x, n=3) {

  # T3 indicator

  a <- 0.7
  alpha <- 2/(n+1)
  mavg1  <- EMA(x, n)
  mavg2  <- EMA( mavg1, n )
  mavg3  <- EMA( mavg2, n )
  mavg4  <- EMA( mavg3, n )
  mavg5  <- EMA( mavg4, n )
  mavg6  <- EMA( mavg5, n )
  
  res <-
  -(a*a*a)*mavg6+(3*a*a+3*a*a*a)*mavg5-(6*a*a+3*a+3*a*a*a)*mavg4+(1+3*a+a*a*a+3*a*a)*mavg3

  return(res)
}




Cheers

------------------------------------------------------------------
Soren Wilkening

http://censix.com


From alexander.chernyakov at gmail.com  Sat May  5 17:30:26 2012
From: alexander.chernyakov at gmail.com (Alexander Chernyakov)
Date: Sat, 5 May 2012 11:30:26 -0400
Subject: [R-SIG-Finance] panel data in R
In-Reply-To: <CAL9ybL_1NHTX8Oicp8AahEKoncorfpk2_v6MvD2aVY1ANnC4SA@mail.gmail.com>
References: <CAP=rYLWKZtphA4HaaWmFvtDJiRzjMfyRbzmB-EEsxBof1yXjMg@mail.gmail.com>
	<CAL9ybL_1NHTX8Oicp8AahEKoncorfpk2_v6MvD2aVY1ANnC4SA@mail.gmail.com>
Message-ID: <CAP=rYLWgf8W_PsBBgvRA80kMqFBDtdFwEY3Hgh_zDJ0Qq0LOgw@mail.gmail.com>

Hi Richard,
Thanks for your response.  One issue I have run into with PLM is it
seems to be fairly slow with large data sets (14 mil date, firm
points).  Any tricks with this? Also, it seems to not handle
irregularly spaced time points.. it fills in the missing ones with NA
so when doing lagging or differencing things don't work correctly.  Do
you have any advice on fixing this?

Thanks,
Alex

On Sat, May 5, 2012 at 8:43 AM, Richard Herron
<richard.c.herron at gmail.com> wrote:
> What kind of models do plan on using?
>
> If you plan on using time series models, then I suggest generating a
> list where each entry is one firm. This will make it easy to fit
> models with lapply.
>
> If you plan on using panel models, then I suggest using PLM. It is
> easy enough to manually code within and between estimators, but if you
> use clustered standard errors or dynamic panel models, then PLM will
> make you life a lot easier.
>
> Richard Herron
>
>
> On Fri, May 4, 2012 at 6:30 PM, Alexander Chernyakov
> <alexander.chernyakov at gmail.com> wrote:
>>
>> Hi,
>> This question is of a general nature: How do people handle panel data
>> in R? ?For example, ?I have returns of firms and each firm has daily
>> observations. ?One way is to use the plm package.. another is to use
>> plyr and just do the operations on (date, firmid) units using
>> something like zoo as a container for each firm so that lagging and
>> differencing can be done. ?For regression it seems that plm might be
>> the better option? ?Just curious if somebody has a well worked out
>> system for this.
>>
>> Thanks
>> Alex
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.


From bhavnarpj at gmail.com  Sat May  5 17:40:55 2012
From: bhavnarpj at gmail.com (bhavna)
Date: Sat, 5 May 2012 08:40:55 -0700 (PDT)
Subject: [R-SIG-Finance] Quantstrat - Error while applying strategy
In-Reply-To: <20120505172054.560c45d1@desktop1>
References: <1303695984905-3472438.post@n4.nabble.com>
	<1303733217149-3473009.post@n4.nabble.com>
	<1327407624493-4323625.post@n4.nabble.com>
	<1327482055007-4326718.post@n4.nabble.com>
	<1336193384996-4610537.post@n4.nabble.com>
	<20120505172054.560c45d1@desktop1>
Message-ID: <1336232455886-4611298.post@n4.nabble.com>

Thanks Soren and Brian!
I converted the data to xts correctly and that did the trick, am now using
the indicator as mentioned by Brian and it works fine.

Thanks,
Bhavna

--
View this message in context: http://r.789695.n4.nabble.com/Quantstrat-Error-while-applying-strategy-tp3472438p4611298.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From oxstones at hotmail.com  Sat May  5 20:12:37 2012
From: oxstones at hotmail.com (Julien Hambuckers)
Date: Sat, 5 May 2012 18:12:37 +0000
Subject: [R-SIG-Finance] Standardization of GH distribution
Message-ID: <BAY168-W14028BF809B703A01AFBD3C82D0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120505/54aca936/attachment.pl>

From alexios at 4dscape.com  Sat May  5 20:41:06 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Sat, 05 May 2012 19:41:06 +0100
Subject: [R-SIG-Finance] Standardization of GH distribution
In-Reply-To: <BAY168-W14028BF809B703A01AFBD3C82D0@phx.gbl>
References: <BAY168-W14028BF809B703A01AFBD3C82D0@phx.gbl>
Message-ID: <4FA57442.6070201@4dscape.com>

Hi Julien,

The GH distribution has a number of location and scale invariant 
parametrizations (this is the key thing to remember -- Prause 1999 is an 
excellent reference which you should read for more details).
The rugarch package uses \rho and \zeta, representing skew and shape 
respectively, in the estimation process. These are transformed, at each 
'iteration' of the solver, into the \alpha, \beta, \delta, \mu 
parameters of the standardized (0,1) GH distribution which is then used 
to compute the likelihood. The transformation is sequential as shown in
the document and proceeds with a number of substitutions. If you are 
worried you can check for yourself that the resulting parameters are
always the standardized (0,1) GH by looking at the transforming equation 
in rugarch:::.paramGH which was originally written by
Diethelm Wuertz.
The same goes for the GH Skew Student (GHST), but the transformation 
uses the \beta bar invariant parametrization which I wrote and included 
in the package in the latest version.

Here is an example:

library(rugarch)
library(fBasics)
rho = -0.9
zeta = 0.5
pars = rugarch:::.paramGH(rho = rho, zeta = zeta, -0.5)
ghMean(alpha=pars[1], beta=pars[2], delta=pars[3], mu=pars[4], lambda=-0.5)
ghVar(alpha=pars[1], beta=pars[2], delta=pars[3], mu=pars[4], lambda=-0.5)

Regards,

Alexios


On 05/05/2012 19:12, Julien Hambuckers wrote:
>
>
>
>
> Hello guys,
> I'm actually writting a code to compute the optimal parameters (alpha, beta, delta, mu) of sample for a gen. hyperbolic function. I need to set up the mean and the variance of the fitted distribution to 0 and 1. Using the rugarch package, this is made easily, but in a more theoretical way, I do not understand how it is done. For the mean, the solution is easy (as explained p. 15 of http://cran.r-project.org/web/packages/rugarch/vignettes/Introduction_to_the_rugarch_package.pdf ) but for the variance, it needs to use estimation of zeta and rho. But how do you compute those estimators ?
> Thanks for your help,
> Julien
>
> Julien HAMBUCKERSHEC - Ecole de gestion de l'Universit? de Li?geUER Op?rationRue Louvrex, 14 - B?timent 1 (310)t?l: +32 (0)4 232 7271mail: jhambuckers at ulg.ac.be
>   		 	   		
> 	[[alternative HTML version deleted]]
>
>
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From richard.c.herron at gmail.com  Sat May  5 21:08:12 2012
From: richard.c.herron at gmail.com (Richard Herron)
Date: Sat, 5 May 2012 15:08:12 -0400
Subject: [R-SIG-Finance] panel data in R
In-Reply-To: <CAP=rYLWgf8W_PsBBgvRA80kMqFBDtdFwEY3Hgh_zDJ0Qq0LOgw@mail.gmail.com>
References: <CAP=rYLWKZtphA4HaaWmFvtDJiRzjMfyRbzmB-EEsxBof1yXjMg@mail.gmail.com>
	<CAL9ybL_1NHTX8Oicp8AahEKoncorfpk2_v6MvD2aVY1ANnC4SA@mail.gmail.com>
	<CAP=rYLWgf8W_PsBBgvRA80kMqFBDtdFwEY3Hgh_zDJ0Qq0LOgw@mail.gmail.com>
Message-ID: <CAL9ybL-KouRRQWwz=WhHrRh6P5edPR3ZT3j5ODZBjPhGP9Xx2w@mail.gmail.com>

What kind of models are you estimating? I would use PLM if I were
doing models with firm fixed effects (FE). But I don't think I see
firm FE with daily observations. I usually see firm FE at the annual
level.

If you're either estimating time series models or aggregating daily
observations to the month-level for cross-sectional models, then a
list of firm-level time series would be best (or if you're only using
the return series you could put this in one wide xts or zoo object).

Re: missing data. xts has -na.locf- for carrying forward the last
non-missing observation. I tend to leave missing observations as
missing.

Could you provide an example of what you would like to estimate?

Richard Herron


On Sat, May 5, 2012 at 11:30 AM, Alexander Chernyakov
<alexander.chernyakov at gmail.com> wrote:
> Hi Richard,
> Thanks for your response. ?One issue I have run into with PLM is it
> seems to be fairly slow with large data sets (14 mil date, firm
> points). ?Any tricks with this? Also, it seems to not handle
> irregularly spaced time points.. it fills in the missing ones with NA
> so when doing lagging or differencing things don't work correctly. ?Do
> you have any advice on fixing this?
>
> Thanks,
> Alex
>
> On Sat, May 5, 2012 at 8:43 AM, Richard Herron
> <richard.c.herron at gmail.com> wrote:
>> What kind of models do plan on using?
>>
>> If you plan on using time series models, then I suggest generating a
>> list where each entry is one firm. This will make it easy to fit
>> models with lapply.
>>
>> If you plan on using panel models, then I suggest using PLM. It is
>> easy enough to manually code within and between estimators, but if you
>> use clustered standard errors or dynamic panel models, then PLM will
>> make you life a lot easier.
>>
>> Richard Herron
>>
>>
>> On Fri, May 4, 2012 at 6:30 PM, Alexander Chernyakov
>> <alexander.chernyakov at gmail.com> wrote:
>>>
>>> Hi,
>>> This question is of a general nature: How do people handle panel data
>>> in R? ?For example, ?I have returns of firms and each firm has daily
>>> observations. ?One way is to use the plm package.. another is to use
>>> plyr and just do the operations on (date, firmid) units using
>>> something like zoo as a container for each firm so that lagging and
>>> differencing can be done. ?For regression it seems that plm might be
>>> the better option? ?Just curious if somebody has a well worked out
>>> system for this.
>>>
>>> Thanks
>>> Alex
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.


From alexander.chernyakov at gmail.com  Sat May  5 21:14:32 2012
From: alexander.chernyakov at gmail.com (Alexander Chernyakov)
Date: Sat, 5 May 2012 15:14:32 -0400
Subject: [R-SIG-Finance] panel data in R
In-Reply-To: <CAL9ybL-KouRRQWwz=WhHrRh6P5edPR3ZT3j5ODZBjPhGP9Xx2w@mail.gmail.com>
References: <CAP=rYLWKZtphA4HaaWmFvtDJiRzjMfyRbzmB-EEsxBof1yXjMg@mail.gmail.com>
	<CAL9ybL_1NHTX8Oicp8AahEKoncorfpk2_v6MvD2aVY1ANnC4SA@mail.gmail.com>
	<CAP=rYLWgf8W_PsBBgvRA80kMqFBDtdFwEY3Hgh_zDJ0Qq0LOgw@mail.gmail.com>
	<CAL9ybL-KouRRQWwz=WhHrRh6P5edPR3ZT3j5ODZBjPhGP9Xx2w@mail.gmail.com>
Message-ID: <CAP=rYLU0D_fyx3j8bEMb6=_P3zE9oj2CnTnS-2ceMFOTvcKGOQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120505/9a927f29/attachment.pl>

From richard.c.herron at gmail.com  Sun May  6 00:47:52 2012
From: richard.c.herron at gmail.com (Richard Herron)
Date: Sat, 5 May 2012 18:47:52 -0400
Subject: [R-SIG-Finance] panel data in R
In-Reply-To: <CAP=rYLU0D_fyx3j8bEMb6=_P3zE9oj2CnTnS-2ceMFOTvcKGOQ@mail.gmail.com>
References: <CAP=rYLWKZtphA4HaaWmFvtDJiRzjMfyRbzmB-EEsxBof1yXjMg@mail.gmail.com>
	<CAL9ybL_1NHTX8Oicp8AahEKoncorfpk2_v6MvD2aVY1ANnC4SA@mail.gmail.com>
	<CAP=rYLWgf8W_PsBBgvRA80kMqFBDtdFwEY3Hgh_zDJ0Qq0LOgw@mail.gmail.com>
	<CAL9ybL-KouRRQWwz=WhHrRh6P5edPR3ZT3j5ODZBjPhGP9Xx2w@mail.gmail.com>
	<CAP=rYLU0D_fyx3j8bEMb6=_P3zE9oj2CnTnS-2ceMFOTvcKGOQ@mail.gmail.com>
Message-ID: <CAL9ybL85tjKyN6cX298CBh1CZj71BUVNG_Abe+nPdBb1BM0LUQ@mail.gmail.com>

I think I would work with the daily data in lists of xts objects (or
one wide xts if only return series), but once I aggregated to the
month/year level I would use plm. I don't know of a width limit for
xts or data.frame, but I never go close to 30,000. I put each security
as an xts object in a list.

I typically see people aggregate daily data to monthly data, requiring
that there are at least 15 or so daily observations (e.g., generating
idiosyncratic vol from a daily return series). This should generate a
(unbalanced) panel that you can feed to plm. You can specify formulas
with lags on the fly. If you try to lag a variable, but the lag isn't
there, plm drops the observation.

To use the time series operators in plm estimators you just have to
properly format your data (either i,t in the first two columns or use
-plm.data-).

Richard Herron


On Sat, May 5, 2012 at 3:14 PM, Alexander Chernyakov
<alexander.chernyakov at gmail.com> wrote:
> Sure. I will be using fixed effects for some things. ?I will mostly be
> running regressions (sometimes fixed effect but a lot of the time they will
> be fama-macbeth type) but the key thing I am looking for is the ability to
> lag things on the fly without having to run an apply statement to split
> everything up to a list and lag each firm individually, recombine the list
> and then run a regression.
>
> I currently use zoo but I was under the impression that there is some limit
> to the number of columns one can have, no? ?With 30k firms it might not be
> possible to have such a wide zoo object... am I incorrect about this?
>
>
> On Sat, May 5, 2012 at 3:08 PM, Richard Herron <richard.c.herron at gmail.com>
> wrote:
>>
>> What kind of models are you estimating? I would use PLM if I were
>> doing models with firm fixed effects (FE). But I don't think I see
>> firm FE with daily observations. I usually see firm FE at the annual
>> level.
>>
>> If you're either estimating time series models or aggregating daily
>> observations to the month-level for cross-sectional models, then a
>> list of firm-level time series would be best (or if you're only using
>> the return series you could put this in one wide xts or zoo object).
>>
>> Re: missing data. xts has -na.locf- for carrying forward the last
>> non-missing observation. I tend to leave missing observations as
>> missing.
>>
>> Could you provide an example of what you would like to estimate?
>>
>> Richard Herron
>>
>>
>> On Sat, May 5, 2012 at 11:30 AM, Alexander Chernyakov
>> <alexander.chernyakov at gmail.com> wrote:
>> > Hi Richard,
>> > Thanks for your response. ?One issue I have run into with PLM is it
>> > seems to be fairly slow with large data sets (14 mil date, firm
>> > points). ?Any tricks with this? Also, it seems to not handle
>> > irregularly spaced time points.. it fills in the missing ones with NA
>> > so when doing lagging or differencing things don't work correctly. ?Do
>> > you have any advice on fixing this?
>> >
>> > Thanks,
>> > Alex
>> >
>> > On Sat, May 5, 2012 at 8:43 AM, Richard Herron
>> > <richard.c.herron at gmail.com> wrote:
>> >> What kind of models do plan on using?
>> >>
>> >> If you plan on using time series models, then I suggest generating a
>> >> list where each entry is one firm. This will make it easy to fit
>> >> models with lapply.
>> >>
>> >> If you plan on using panel models, then I suggest using PLM. It is
>> >> easy enough to manually code within and between estimators, but if you
>> >> use clustered standard errors or dynamic panel models, then PLM will
>> >> make you life a lot easier.
>> >>
>> >> Richard Herron
>> >>
>> >>
>> >> On Fri, May 4, 2012 at 6:30 PM, Alexander Chernyakov
>> >> <alexander.chernyakov at gmail.com> wrote:
>> >>>
>> >>> Hi,
>> >>> This question is of a general nature: How do people handle panel data
>> >>> in R? ?For example, ?I have returns of firms and each firm has daily
>> >>> observations. ?One way is to use the plm package.. another is to use
>> >>> plyr and just do the operations on (date, firmid) units using
>> >>> something like zoo as a container for each firm so that lagging and
>> >>> differencing can be done. ?For regression it seems that plm might be
>> >>> the better option? ?Just curious if somebody has a well worked out
>> >>> system for this.
>> >>>
>> >>> Thanks
>> >>> Alex
>> >>>
>> >>> _______________________________________________
>> >>> R-SIG-Finance at r-project.org mailing list
>> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> >>> -- Subscriber-posting only. If you want to post, subscribe first.
>> >>> -- Also note that this is not the r-help list where general R
>> >>> questions should go.
>
>


From alexander.chernyakov at gmail.com  Sun May  6 01:06:09 2012
From: alexander.chernyakov at gmail.com (Alexander Chernyakov)
Date: Sat, 5 May 2012 19:06:09 -0400
Subject: [R-SIG-Finance] panel data in R
In-Reply-To: <CAL9ybL85tjKyN6cX298CBh1CZj71BUVNG_Abe+nPdBb1BM0LUQ@mail.gmail.com>
References: <CAP=rYLWKZtphA4HaaWmFvtDJiRzjMfyRbzmB-EEsxBof1yXjMg@mail.gmail.com>
	<CAL9ybL_1NHTX8Oicp8AahEKoncorfpk2_v6MvD2aVY1ANnC4SA@mail.gmail.com>
	<CAP=rYLWgf8W_PsBBgvRA80kMqFBDtdFwEY3Hgh_zDJ0Qq0LOgw@mail.gmail.com>
	<CAL9ybL-KouRRQWwz=WhHrRh6P5edPR3ZT3j5ODZBjPhGP9Xx2w@mail.gmail.com>
	<CAP=rYLU0D_fyx3j8bEMb6=_P3zE9oj2CnTnS-2ceMFOTvcKGOQ@mail.gmail.com>
	<CAL9ybL85tjKyN6cX298CBh1CZj71BUVNG_Abe+nPdBb1BM0LUQ@mail.gmail.com>
Message-ID: <CAP=rYLW3sVsCquWumowQqt4RTqAeO_q21MTTMRwDnvK+TbugPg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120505/1dd9c82c/attachment.pl>

From heypeterchan at yahoo.com  Sun May  6 08:23:07 2012
From: heypeterchan at yahoo.com (Peter Chan)
Date: Sat, 5 May 2012 23:23:07 -0700 (PDT)
Subject: [R-SIG-Finance] object .blotter not found
Message-ID: <1336285387.28677.YahooMailNeo@web161301.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120505/5cca4a48/attachment.pl>

From gordon.erlebach at gmail.com  Sun May  6 08:37:11 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Sun, 6 May 2012 02:37:11 -0400
Subject: [R-SIG-Finance] stoch function
Message-ID: <CAELivkLwM4n=tGA6MN3=oni3yPamQSkrjOXH7u16mWufnmLw-w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120506/cba0cf33/attachment.pl>

From gsee000 at gmail.com  Sun May  6 16:31:32 2012
From: gsee000 at gmail.com (G See)
Date: Sun, 6 May 2012 09:31:32 -0500
Subject: [R-SIG-Finance] object .blotter not found
In-Reply-To: <1336285387.28677.YahooMailNeo@web161301.mail.bf1.yahoo.com>
References: <1336285387.28677.YahooMailNeo@web161301.mail.bf1.yahoo.com>
Message-ID: <CA+xi=qYUcM0v9p5T1qnOoSHiyABHMaqPP_TCX_65dkJ+TAqzyw@mail.gmail.com>

My guess is that either you used a "clear workspace" button on your
GUI, or you did something to the effect of rm(list=ls(all=TRUE)).

.blotter is an environment that is stored under your .GlobalEnv when
you load the package.  If you delete it, you have to put it back with
something like this
    if (!exists('.blotter')) .blotter <- new.env()

Prior to 2012, the .instrument environment was also stored in the
.GlobalEnv, but with FinancialInstrument version 0.10.0, it was moved
to live in the top level of the package.  Therefore, the .instrument
environment doesn't get wiped out if the user clears their workspace.
But, it appears to be missing unless you know where to look.
This should work
    ls(FinancialInstrument:::.instrument)
But, it's not as robust as using
   ls_instruments()

.blotter should probably be moved out of the .GlobalEnv as well, but
for now, either don't clear your .GlobalEnv, or recreate a .blotter
environment after you do.

HTH,
Garrett

On Sun, May 6, 2012 at 1:23 AM, Peter Chan <heypeterchan at yahoo.com> wrote:
> Hi there
>
>
> I am running demo(longtrend) but it is failing on initPortf (although the blotter package is loaded):
>
>
>> ltportfolio='longtrend' > ltaccount='longtrend' > initPortf(ltportfolio,'GSPC', initDate=initDate) Error in exists(paste("portfolio", name, sep = "."), envir = .blotter, ?: ?object '.blotter' not found
>
> Any ideas? ?I also noticed that .instrument environment isn't found in my workspace, but I can use getInstrument!
>
>> ls(envir=.instrument) Error in ls(envir = .instrument) : object '.instrument' not found > getInstrument('USD') primary_id :"USD"
> currency ? :"USD"
> multiplier :1
> tick_size ?:0.01
> identifiers: list()
> type ? ? ? :"currency" > ls(envir=.blotter) Error in ls(envir = .blotter) : object '.blotter' not found
>
> Thanks
>
> Peter
>
>> sessionInfo() R version 2.15.0 (2012-03-30)
> Platform: x86_64-pc-mingw32/x64 (64-bit) locale:
> [1] LC_COLLATE=English_Singapore.1252 ?LC_CTYPE=English_Singapore.1252
> [3] LC_MONETARY=English_Singapore.1252 LC_NUMERIC=C
> [5] LC_TIME=English_Singapore.1252 ? ? attached base packages:
> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base ? ? ?other attached packages:
> [1] blotter_0.8.8 ? ? ? ? ? ? ?FinancialInstrument_0.14.2 quantmod_0.3-17
> [4] TTR_0.21-1 ? ? ? ? ? ? ? ? xts_0.8-6 ? ? ? ? ? ? ? ? ?zoo_1.7-7
> [7] Defaults_1.1-1 ? ? ? ? ? ? loaded via a namespace (and not attached):
> [1] grid_2.15.0 ? ?lattice_0.20-6 tools_2.15.0
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From heypeterchan at yahoo.com  Sun May  6 18:19:01 2012
From: heypeterchan at yahoo.com (Peter Chan)
Date: Sun, 6 May 2012 09:19:01 -0700 (PDT)
Subject: [R-SIG-Finance] object .blotter not found
In-Reply-To: <CA+xi=qYUcM0v9p5T1qnOoSHiyABHMaqPP_TCX_65dkJ+TAqzyw@mail.gmail.com>
References: <1336285387.28677.YahooMailNeo@web161301.mail.bf1.yahoo.com>
	<CA+xi=qYUcM0v9p5T1qnOoSHiyABHMaqPP_TCX_65dkJ+TAqzyw@mail.gmail.com>
Message-ID: <1336321141.50248.YahooMailNeo@web161305.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120506/1a69619d/attachment.pl>

From richard.c.herron at gmail.com  Mon May  7 00:01:15 2012
From: richard.c.herron at gmail.com (Richard Herron)
Date: Sun, 6 May 2012 18:01:15 -0400
Subject: [R-SIG-Finance] panel data in R
In-Reply-To: <CAP=rYLW3sVsCquWumowQqt4RTqAeO_q21MTTMRwDnvK+TbugPg@mail.gmail.com>
References: <CAP=rYLWKZtphA4HaaWmFvtDJiRzjMfyRbzmB-EEsxBof1yXjMg@mail.gmail.com>
	<CAL9ybL_1NHTX8Oicp8AahEKoncorfpk2_v6MvD2aVY1ANnC4SA@mail.gmail.com>
	<CAP=rYLWgf8W_PsBBgvRA80kMqFBDtdFwEY3Hgh_zDJ0Qq0LOgw@mail.gmail.com>
	<CAL9ybL-KouRRQWwz=WhHrRh6P5edPR3ZT3j5ODZBjPhGP9Xx2w@mail.gmail.com>
	<CAP=rYLU0D_fyx3j8bEMb6=_P3zE9oj2CnTnS-2ceMFOTvcKGOQ@mail.gmail.com>
	<CAL9ybL85tjKyN6cX298CBh1CZj71BUVNG_Abe+nPdBb1BM0LUQ@mail.gmail.com>
	<CAP=rYLW3sVsCquWumowQqt4RTqAeO_q21MTTMRwDnvK+TbugPg@mail.gmail.com>
Message-ID: <CAL9ybL-VjDjLD+4TDrJ5bF+tiAe4S+eowKhsZEjDNDXv1eguRg@mail.gmail.com>

I think the splitting is fairly expensive computationally (esp if you
have 14mm observations and 30k firms), so you probably want to
minimize the amount of splits and recombines that you do.

If you can wrap everything in one function (i.e., convert to xts/zoo
and do all transformations) that you can call from -ddply-, then the
two techniques should be roughly equivalent.

If you -ddply- over and over again, then you're better off creating a
list, then applying the functions to the list.

Richard Herron


On Sat, May 5, 2012 at 7:06 PM, Alexander Chernyakov
<alexander.chernyakov at gmail.com> wrote:
> Interesting, thank you! do you find it faster to do lists of xts objects or
> use plyr on dataframes (converting to a zoo, then doing what you want,
> converting back to a dataframe and returning which is what i currently do)?
>
> thanks
> alex
>
>
> On Sat, May 5, 2012 at 6:47 PM, Richard Herron <richard.c.herron at gmail.com>
> wrote:
>>
>> I think I would work with the daily data in lists of xts objects (or
>> one wide xts if only return series), but once I aggregated to the
>> month/year level I would use plm. I don't know of a width limit for
>> xts or data.frame, but I never go close to 30,000. I put each security
>> as an xts object in a list.
>>
>> I typically see people aggregate daily data to monthly data, requiring
>> that there are at least 15 or so daily observations (e.g., generating
>> idiosyncratic vol from a daily return series). This should generate a
>> (unbalanced) panel that you can feed to plm. You can specify formulas
>> with lags on the fly. If you try to lag a variable, but the lag isn't
>> there, plm drops the observation.
>>
>> To use the time series operators in plm estimators you just have to
>> properly format your data (either i,t in the first two columns or use
>> -plm.data-).
>>
>> Richard Herron
>>
>>
>> On Sat, May 5, 2012 at 3:14 PM, Alexander Chernyakov
>> <alexander.chernyakov at gmail.com> wrote:
>> > Sure. I will be using fixed effects for some things. ?I will mostly be
>> > running regressions (sometimes fixed effect but a lot of the time they
>> > will
>> > be fama-macbeth type) but the key thing I am looking for is the ability
>> > to
>> > lag things on the fly without having to run an apply statement to split
>> > everything up to a list and lag each firm individually, recombine the
>> > list
>> > and then run a regression.
>> >
>> > I currently use zoo but I was under the impression that there is some
>> > limit
>> > to the number of columns one can have, no? ?With 30k firms it might not
>> > be
>> > possible to have such a wide zoo object... am I incorrect about this?
>> >
>> >
>> > On Sat, May 5, 2012 at 3:08 PM, Richard Herron
>> > <richard.c.herron at gmail.com>
>> > wrote:
>> >>
>> >> What kind of models are you estimating? I would use PLM if I were
>> >> doing models with firm fixed effects (FE). But I don't think I see
>> >> firm FE with daily observations. I usually see firm FE at the annual
>> >> level.
>> >>
>> >> If you're either estimating time series models or aggregating daily
>> >> observations to the month-level for cross-sectional models, then a
>> >> list of firm-level time series would be best (or if you're only using
>> >> the return series you could put this in one wide xts or zoo object).
>> >>
>> >> Re: missing data. xts has -na.locf- for carrying forward the last
>> >> non-missing observation. I tend to leave missing observations as
>> >> missing.
>> >>
>> >> Could you provide an example of what you would like to estimate?
>> >>
>> >> Richard Herron
>> >>
>> >>
>> >> On Sat, May 5, 2012 at 11:30 AM, Alexander Chernyakov
>> >> <alexander.chernyakov at gmail.com> wrote:
>> >> > Hi Richard,
>> >> > Thanks for your response. ?One issue I have run into with PLM is it
>> >> > seems to be fairly slow with large data sets (14 mil date, firm
>> >> > points). ?Any tricks with this? Also, it seems to not handle
>> >> > irregularly spaced time points.. it fills in the missing ones with NA
>> >> > so when doing lagging or differencing things don't work correctly.
>> >> > ?Do
>> >> > you have any advice on fixing this?
>> >> >
>> >> > Thanks,
>> >> > Alex
>> >> >
>> >> > On Sat, May 5, 2012 at 8:43 AM, Richard Herron
>> >> > <richard.c.herron at gmail.com> wrote:
>> >> >> What kind of models do plan on using?
>> >> >>
>> >> >> If you plan on using time series models, then I suggest generating a
>> >> >> list where each entry is one firm. This will make it easy to fit
>> >> >> models with lapply.
>> >> >>
>> >> >> If you plan on using panel models, then I suggest using PLM. It is
>> >> >> easy enough to manually code within and between estimators, but if
>> >> >> you
>> >> >> use clustered standard errors or dynamic panel models, then PLM will
>> >> >> make you life a lot easier.
>> >> >>
>> >> >> Richard Herron
>> >> >>
>> >> >>
>> >> >> On Fri, May 4, 2012 at 6:30 PM, Alexander Chernyakov
>> >> >> <alexander.chernyakov at gmail.com> wrote:
>> >> >>>
>> >> >>> Hi,
>> >> >>> This question is of a general nature: How do people handle panel
>> >> >>> data
>> >> >>> in R? ?For example, ?I have returns of firms and each firm has
>> >> >>> daily
>> >> >>> observations. ?One way is to use the plm package.. another is to
>> >> >>> use
>> >> >>> plyr and just do the operations on (date, firmid) units using
>> >> >>> something like zoo as a container for each firm so that lagging and
>> >> >>> differencing can be done. ?For regression it seems that plm might
>> >> >>> be
>> >> >>> the better option? ?Just curious if somebody has a well worked out
>> >> >>> system for this.
>> >> >>>
>> >> >>> Thanks
>> >> >>> Alex
>> >> >>>
>> >> >>> _______________________________________________
>> >> >>> R-SIG-Finance at r-project.org mailing list
>> >> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> >> >>> -- Subscriber-posting only. If you want to post, subscribe first.
>> >> >>> -- Also note that this is not the r-help list where general R
>> >> >>> questions should go.
>> >
>> >
>
>


From harrisonmark1 at gmail.com  Mon May  7 01:12:13 2012
From: harrisonmark1 at gmail.com (Mark Harrison)
Date: Sun, 6 May 2012 18:12:13 -0500
Subject: [R-SIG-Finance] IBrokers and fill Price
Message-ID: <CAHFhaq-t-bz8xuv+CaihOy=q=P5m5R4fotgg9xf3hdOxCPAZgg@mail.gmail.com>

I have been trying to figure out how to use IBrokers and the API to
place orders, etc.? I have read through the support archives, google,
the docs, presentations, etc and I still can not figure out where I am
going wrong.

Specifically I am trying to place a market order, get my fill price,
and then put in a stop order higher/lower than the fill price.? I am
able to get ids, place the orders, and even seeing what my fill price
is via reqOpenOrders but I am not sure how to get the fill price from
IB in a way that lets me use it - i.e. not just 'cat' to the screen.

Any help would be appreciated.

# Session Info:

R version 2.14.0 (2011-10-31)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
States.1252
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

attached base packages:
[1] graphics  grDevices utils     datasets  stats     methods   base

other attached packages:
 [1] blotter_0.8.4              twsInstrument_1.4-0
IBrokers_0.9-3             qmao_1.2.1
 [5] FinancialInstrument_0.13.6 quantmod_0.3-17            TTR_0.21-1
               Defaults_1.1-1
 [9] xts_0.8-7                  zoo_1.7-7

loaded via a namespace (and not attached):
[1] grid_2.14.0    lattice_0.20-6 tools_2.14.0

# Code Examples
tws <- twsConnect(clientId=2)

symbol <- c("GC")
contract <- buildIBcontract(twsFUT(symbol, "NYMEX", '201206'))

id <- reqIds(tws)
a <- twsOrder(id, action = 'BUY', totalQuantity = '1', orderType = 'MKT')
placeOrder(tws, contract, a)
reqOpenOrders(tws)

TWS Message: 2 -1 2104 Market data farm connection is OK:cusfuture
TWS Message: 2 -1 2104 Market data farm connection is OK:usfuture
TWS Message: 2 -1 2104 Market data farm connection is OK:eurofarm
TWS Message: 2 -1 2104 Market data farm connection is OK:cashfarm
TWS Message: 2 -1 2104 Market data farm connection is OK:usopt
TWS Message: 2 -1 2104 Market data farm connection is OK:usfarm
TWS Message: 2 -1 2106 HMDS data farm connection is OK:ushmds
TWS Execution: orderId=1 time=2012-05-06 18:02:10 side=BOT shares=1
symbol=GC conId=45008148 price=1640.50
TWS OrderStatus: orderId=1 status=Filled filled=1 remaining=0
averageFillPrice=1640.50
TWS OrderStatus: orderId=1 status=Filled filled=1 remaining=0
averageFillPrice=1640.50
TWS OrderStatus: orderId=1 status=Filled filled=1 remaining=0
averageFillPrice=1640.50

twsDisconnect(tws)


From oxstones at hotmail.com  Mon May  7 11:58:35 2012
From: oxstones at hotmail.com (Julien Hambuckers)
Date: Mon, 7 May 2012 09:58:35 +0000
Subject: [R-SIG-Finance] Standardization of GH distribution
In-Reply-To: <4FA57442.6070201@4dscape.com>
References: <BAY168-W14028BF809B703A01AFBD3C82D0@phx.gbl>,
	<4FA57442.6070201@4dscape.com>
Message-ID: <BAY168-W1982685726A0DF998CEE03C8130@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120507/b2a98b4c/attachment.pl>

From golam.sakline at gmail.com  Mon May  7 13:36:40 2012
From: golam.sakline at gmail.com (golam sakline)
Date: Mon, 7 May 2012 12:36:40 +0100
Subject: [R-SIG-Finance] ChartSeries - Quantmod
Message-ID: <CAHmZ1ZvOAbN=SN5e4aEKnj80mwKRzk2OMMQ1NgK0EWCjaG8Tkw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120507/207f63a2/attachment.pl>

From me at censix.com  Mon May  7 13:46:50 2012
From: me at censix.com (soren wilkening)
Date: Mon, 7 May 2012 04:46:50 -0700 (PDT)
Subject: [R-SIG-Finance] IBrokers and fill Price
In-Reply-To: <CAHFhaq-t-bz8xuv+CaihOy=q=P5m5R4fotgg9xf3hdOxCPAZgg@mail.gmail.com>
References: <CAHFhaq-t-bz8xuv+CaihOy=q=P5m5R4fotgg9xf3hdOxCPAZgg@mail.gmail.com>
Message-ID: <1336391210414-4614595.post@n4.nabble.com>

For getting the actual fill price you should use

reqExecutions()

instead of

reqOpenOrders()

I am even surprised to hear that for a MKT order, there is price information
containted in the result of the reqOpenOrders() !

I am not anywhere near my R code right now but as a first step, you should
look at the sourcecode of the

eWrapper()

function/object. One of its purposes is to read events that come back from
the API and put the data containted in them (i.e. the execution price) into
a format that you can use. But the unmodified eWrapper will, by default only
'cat' the data to the console. I cannot verify this now but i think even
reqOpenOrders() may use an 'eWrapper' object to produce the output that you
have attached below. Just look at the source of reqOpenOrders by typing
'reqOpenOrders' at the R prompt, without the brackets.

hth

Soren

http://censix.com

-----
http://censix.com
--
View this message in context: http://r.789695.n4.nabble.com/IBrokers-and-fill-Price-tp4613710p4614595.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jeff.a.ryan at gmail.com  Mon May  7 16:59:15 2012
From: jeff.a.ryan at gmail.com (Jeffrey Ryan)
Date: Mon, 07 May 2012 09:59:15 -0500
Subject: [R-SIG-Finance] ChartSeries - Quantmod
In-Reply-To: <CAHmZ1ZvOAbN=SN5e4aEKnj80mwKRzk2OMMQ1NgK0EWCjaG8Tkw@mail.gmail.com>
Message-ID: <CBCD4CC8.3C583%jeff.a.ryan@gmail.com>

Take a look at add_TA with a logical time series (xts preferred). The TRUE
values/ranges will define the periods that get colored in.  You will
likely need to also utilize the on= argument to properly draw on the pane
you are intending - e.g. To shade the background of the main series use
on=-1 (that is a minus one).

HTH
Jeff

On 5/7/12 6:36 AM, "golam sakline" <golam.sakline at gmail.com> wrote:

>Hi,
>
>Is there a way to have a different colour background for a predefined
>period within the ChartSeries theme? I and trying to grey out the period
>that corresponds to recession in the US when looking at a US stock in
>ChartSeries
>
>Thanks
>
>Golam
>
>	[[alternative HTML version deleted]]
>
>_______________________________________________
>R-SIG-Finance at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>-- Subscriber-posting only. If you want to post, subscribe first.
>-- Also note that this is not the r-help list where general R questions
>should go.


From alec.fei at gmail.com  Tue May  8 02:13:35 2012
From: alec.fei at gmail.com (Alex Fei)
Date: Mon, 7 May 2012 17:13:35 -0700 (PDT)
Subject: [R-SIG-Finance] copula with rmgarch
Message-ID: <1336436015210-4616138.post@n4.nabble.com>

Hi 

I am trying to implement a typical GARCH-Copula with DCC for dynamic
correlations. Is there someone could give me an example codes how it can be
done? I have implemented  this in Matlab, but don't know how to get a start
in R. I have googled around and found rmgarch package can give it a go. 

Below is what I did:
> library(rmgarch)
> data(dji30ret)
> Data <- dji30ret[, 1:3, drop = FALSE]
> uspec <- ugarchspec(mean.model = list(armaOrder = c(0,0), include.mean =
> FALSE), variance.model = list(garchOrder = c(1,1), model = "sGARCH"),
> distribution.model = "std") 
> cspec <- cgarchspec(uspec = multispec( replicate(3, uspec) ), VAR = FALSE,
> robust = FALSE, lag = 1, lag.max = NULL,                  lag.criterion =
> c("AIC", "HQ", "SC", "FPE"), external.regressors = NULL, robust.control =
> list(gamma = 0.25, delta = 0.01, nc = 10, ns = 500), dccOrder = c(1, 1),
> asymmetric = FALSE, distribution.model = list(copula =  "mvt", method =
> "ML", time.varying = TRUE, transformation = "parametric"), start.pars =
> list(), fixed.pars = list()) 
> cfit <- cgarchfit(cspec, data =Data, spd.control = list(lower = 0.1, upper
> = 0.9, type = "pwm", kernel = "epanech"),fit.control = list(eval.se =
> TRUE, trace = TRUE, stationarity = TRUE),solver = "solnp", solver.control
> = list(), out.sample = 0, parallel = FALSE, parallel.control = list(pkg =
> c("multicore", "snowfall"), cores = 2), fit = NULL, VAR.fit = NULL) 

my questions are:
1) (very silly) how to get the estimated parameters (incl. s.e. p-value)?
2) how to plot the dynamics of correlation?
3) how to perform goodness-of-fit tests for marginal estimations? 
4) how to perform  goodness-of-fit tests for copula? 

I will appreciate for any help! Thank you 

--
View this message in context: http://r.789695.n4.nabble.com/copula-with-rmgarch-tp4616138.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Tue May  8 07:09:47 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Tue, 08 May 2012 06:09:47 +0100
Subject: [R-SIG-Finance] copula with rmgarch
In-Reply-To: <1336436015210-4616138.post@n4.nabble.com>
References: <1336436015210-4616138.post@n4.nabble.com>
Message-ID: <4FA8AA9B.9020808@4dscape.com>

1. The returned object is of class 'cGARCHfit'. Try getting help by 
typing ?'cGARCHfit-class'. This will bring up all the methods available 
to use on the object e.g. show(cfit), coef(cfit) and rcor(cfit).
2.rcor(cfit) returns an array of the conditional correlation.
3-4 Try searching first on http://www.rseek.org/.

Finally, the 'rmgarch.tests' folder in the installation directory of the 
package contains many examples which you might find helpful.

-Alexios

On 08/05/2012 01:13, Alex Fei wrote:
> Hi
>
> I am trying to implement a typical GARCH-Copula with DCC for dynamic
> correlations. Is there someone could give me an example codes how it can be
> done? I have implemented  this in Matlab, but don't know how to get a start
> in R. I have googled around and found rmgarch package can give it a go.
>
> Below is what I did:
>> library(rmgarch)
>> data(dji30ret)
>> Data<- dji30ret[, 1:3, drop = FALSE]
>> uspec<- ugarchspec(mean.model = list(armaOrder = c(0,0), include.mean =
>> FALSE), variance.model = list(garchOrder = c(1,1), model = "sGARCH"),
>> distribution.model = "std")
>> cspec<- cgarchspec(uspec = multispec( replicate(3, uspec) ), VAR = FALSE,
>> robust = FALSE, lag = 1, lag.max = NULL,                  lag.criterion =
>> c("AIC", "HQ", "SC", "FPE"), external.regressors = NULL, robust.control =
>> list(gamma = 0.25, delta = 0.01, nc = 10, ns = 500), dccOrder = c(1, 1),
>> asymmetric = FALSE, distribution.model = list(copula =  "mvt", method =
>> "ML", time.varying = TRUE, transformation = "parametric"), start.pars =
>> list(), fixed.pars = list())
>> cfit<- cgarchfit(cspec, data =Data, spd.control = list(lower = 0.1, upper
>> = 0.9, type = "pwm", kernel = "epanech"),fit.control = list(eval.se =
>> TRUE, trace = TRUE, stationarity = TRUE),solver = "solnp", solver.control
>> = list(), out.sample = 0, parallel = FALSE, parallel.control = list(pkg =
>> c("multicore", "snowfall"), cores = 2), fit = NULL, VAR.fit = NULL)
>
> my questions are:
> 1) (very silly) how to get the estimated parameters (incl. s.e. p-value)?
> 2) how to plot the dynamics of correlation?
> 3) how to perform goodness-of-fit tests for marginal estimations?
> 4) how to perform  goodness-of-fit tests for copula?
>
> I will appreciate for any help! Thank you
>
> --
> View this message in context: http://r.789695.n4.nabble.com/copula-with-rmgarch-tp4616138.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From alec.fei at gmail.com  Tue May  8 12:50:29 2012
From: alec.fei at gmail.com (Alex Fei)
Date: Tue, 8 May 2012 03:50:29 -0700 (PDT)
Subject: [R-SIG-Finance] copula with rmgarch
In-Reply-To: <4FA8AA9B.9020808@4dscape.com>
References: <1336436015210-4616138.post@n4.nabble.com>
	<4FA8AA9B.9020808@4dscape.com>
Message-ID: <1336474229699-4617153.post@n4.nabble.com>

Thank you Alexios! 

Now I can see how to do the first 2 Qs. Sorry, I am very new to R. Could you
tell me how to run  the files in the 'rmgarch.tests' folder? I typed 
> runtests
Error: object 'runtests' not found

--
View this message in context: http://r.789695.n4.nabble.com/copula-with-rmgarch-tp4616138p4617153.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Tue May  8 12:55:09 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Tue, 08 May 2012 11:55:09 +0100
Subject: [R-SIG-Finance] copula with rmgarch
In-Reply-To: <1336474229699-4617153.post@n4.nabble.com>
References: <1336436015210-4616138.post@n4.nabble.com>
	<4FA8AA9B.9020808@4dscape.com>
	<1336474229699-4617153.post@n4.nabble.com>
Message-ID: <4FA8FB8D.50900@4dscape.com>

You need to source the files to run them...but this is more for 
debugging and testing than for learning. If you want to learn how
to use the package and its functions you should run the code examples 
interactively line by line and understand what they do (the code is 
commented to help).

-Alexios

On 08/05/2012 11:50, Alex Fei wrote:
> Thank you Alexios!
>
> Now I can see how to do the first 2 Qs. Sorry, I am very new to R. Could you
> tell me how to run  the files in the 'rmgarch.tests' folder? I typed
>> runtests
> Error: object 'runtests' not found
>
> --
> View this message in context: http://r.789695.n4.nabble.com/copula-with-rmgarch-tp4616138p4617153.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From alec.fei at gmail.com  Tue May  8 18:53:51 2012
From: alec.fei at gmail.com (Alex Fei)
Date: Tue, 8 May 2012 09:53:51 -0700 (PDT)
Subject: [R-SIG-Finance] copula with rmgarch
In-Reply-To: <4FA8FB8D.50900@4dscape.com>
References: <1336436015210-4616138.post@n4.nabble.com>
	<4FA8AA9B.9020808@4dscape.com>
	<1336474229699-4617153.post@n4.nabble.com>
	<4FA8FB8D.50900@4dscape.com>
Message-ID: <1336496031885-4618054.post@n4.nabble.com>

Thank you Alexios for quick reply!! The files in the 'rmgarch.tests' folder
gave me a lot of help. 

Can I do 1-step ahead forecasting using GARCH-Copula with the help of
rmgarch package? for example I need to get the returns of each assets and
their covariance at T+1 based on the parameters estimated using in-sample
data until T?

I followed your Example in the help of cgarchsim. Please correct me if I am
wrong:
1) the (mean) forecast returns should be the simmean1 in your example
2) I think rcov(sim1) only report the 1st cov out of 3500 simulations. Then
how to get the mean forecast cov?  

I think the Example in ?cgarchsim has a copula of errors, although none of
them is serious:
> spec = cgarchspec(uspec = multispec( replicate(3, uspec) ), VAR = TRUE,
> VAR.opt = list(lag = 1, lag.max = 4, 
lag.criterion = c("AIC", "HQ", "SC", "FPE"), external.regressors = NULL), 
dccOrder = c(1,1), distribution.model = list(copula = c("mvnorm"), method =
c("ML"),
time.varying = TRUE, transformation = "parametric"), start.pars = list(),
fixed.pars = list())

VAR.opt = list(lag = 1, lag.max = 4,  lag.criterion = c("AIC", "HQ", "SC",
"FPE"), external.regressors = NULL) need to be lag = 1, lag.max = 4, 
lag.criterion = c("AIC", "HQ", "SC", "FPE"), external.regressors = NULL 

> sim1 = cgarchsim(fit1, n.sim = 1, n.start = 0, m.sim = 3500, presigma =
> tail(sigma(fit1), 1), 
startMethod = "sample", preR = preR, prereturns = tail( as.matrix(Dat), 4), 
preresiduals = tail(residuals(.fitlist), 1),rseed = 1:3500)

if I use prereturns = tail( as.matrix(Dat), 4) , it will report error. So
instead, I use prereturns = tail( as.matrix(Dat), 1)

> forcmean = round( rgarch:::varxforecast(X = Dat, Bcoef =
> fit1 at mfit$vrmodel$Bcoef, p = 4, 
				out.sample = 0, n.ahead = 1, n.roll = 0, mregfor = NULL), 5)

the rgarch package is offline. So can you suggest another way for this?

Thank you again!

--
View this message in context: http://r.789695.n4.nabble.com/copula-with-rmgarch-tp4616138p4618054.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From harrisonmark1 at gmail.com  Tue May  8 20:49:17 2012
From: harrisonmark1 at gmail.com (Mark Harrison)
Date: Tue, 8 May 2012 13:49:17 -0500
Subject: [R-SIG-Finance] IBrokers and fill Price
In-Reply-To: <1336391210414-4614595.post@n4.nabble.com>
References: <CAHFhaq-t-bz8xuv+CaihOy=q=P5m5R4fotgg9xf3hdOxCPAZgg@mail.gmail.com>
	<1336391210414-4614595.post@n4.nabble.com>
Message-ID: <CAHFhaq8e+6K-Jh5HWZaonEy6Hrgve0w0OS13QwSfNnNNyFC7AQ@mail.gmail.com>

Soren -

Thanks for the response.  I am not sure I have a good handle on the
'eWrapper' or what I should be doing with it so any more help there
would be appreciated.

Having said that I have been looking at code and trying reqExecutions.
 Is the reqExecutions supposed to return anything?  The IBrokers
reference seems to imply reqExecutions is not going to return
anything.  Is this a case of needing to run the below followed by a
twsCALLBACK?

# reqExecutions test

tmpExFilter <- twsExecutionFilter(clientId = '2', , symbol = symbol,
exchange = "NYMEX")
reqExecutions(tws, reqId = id, ExecutionFilter = tmpExFilter)

On Mon, May 7, 2012 at 6:46 AM, soren wilkening <me at censix.com> wrote:
> For getting the actual fill price you should use
>
> reqExecutions()
>
> instead of
>
> reqOpenOrders()
>
> I am even surprised to hear that for a MKT order, there is price information
> containted in the result of the reqOpenOrders() !
>
> I am not anywhere near my R code right now but as a first step, you should
> look at the sourcecode of the
>
> eWrapper()
>
> function/object. One of its purposes is to read events that come back from
> the API and put the data containted in them (i.e. the execution price) into
> a format that you can use. But the unmodified eWrapper will, by default only
> 'cat' the data to the console. I cannot verify this now but i think even
> reqOpenOrders() may use an 'eWrapper' object to produce the output that you
> have attached below. Just look at the source of reqOpenOrders by typing
> 'reqOpenOrders' at the R prompt, without the brackets.
>
> hth
>
> Soren
>
> http://censix.com
>
> -----
> http://censix.com
> --
> View this message in context: http://r.789695.n4.nabble.com/IBrokers-and-fill-Price-tp4613710p4614595.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From alexios at 4dscape.com  Tue May  8 23:08:24 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Tue, 08 May 2012 22:08:24 +0100
Subject: [R-SIG-Finance] copula with rmgarch
In-Reply-To: <1336496031885-4618054.post@n4.nabble.com>
References: <1336436015210-4616138.post@n4.nabble.com>
	<4FA8AA9B.9020808@4dscape.com>
	<1336474229699-4617153.post@n4.nabble.com>
	<4FA8FB8D.50900@4dscape.com>
	<1336496031885-4618054.post@n4.nabble.com>
Message-ID: <4FA98B48.3020808@4dscape.com>

1. The code in the rmgarch.tests folder is up to date. The code below 
that you quote is an outdated example and not from the rmgarch.tests 
folder but from the help page for cgarchsim (which I should update 
anyway when I find the time). Please only use the examples from the 
folder indicated (there are plenty!).

2. You are free to look inside the returned object or work with the 
extractor functions provided.
e.g.
slotNames(sim1)
names(sim1 at msim)

3. This is the 1-ahead simulation. Why would you expect the covariance 
and correlation to be uncertain? This is a non-bayesian setup which 
means that parameter uncertainty is not taken into account and hence the 
1-ahead conditional covariance is given by the GARCH type dynamics 
without recourse to any uncertainty etc.

-Alexios

On 08/05/2012 17:53, Alex Fei wrote:
> Thank you Alexios for quick reply!! The files in the 'rmgarch.tests' folder
> gave me a lot of help.
>
> Can I do 1-step ahead forecasting using GARCH-Copula with the help of
> rmgarch package? for example I need to get the returns of each assets and
> their covariance at T+1 based on the parameters estimated using in-sample
> data until T?
>
> I followed your Example in the help of cgarchsim. Please correct me if I am
> wrong:
> 1) the (mean) forecast returns should be the simmean1 in your example
> 2) I think rcov(sim1) only report the 1st cov out of 3500 simulations. Then
> how to get the mean forecast cov?
>
> I think the Example in ?cgarchsim has a copula of errors, although none of
> them is serious:
>> spec = cgarchspec(uspec = multispec( replicate(3, uspec) ), VAR = TRUE,
>> VAR.opt = list(lag = 1, lag.max = 4,
> lag.criterion = c("AIC", "HQ", "SC", "FPE"), external.regressors = NULL),
> dccOrder = c(1,1), distribution.model = list(copula = c("mvnorm"), method =
> c("ML"),
> time.varying = TRUE, transformation = "parametric"), start.pars = list(),
> fixed.pars = list())
>
> VAR.opt = list(lag = 1, lag.max = 4,  lag.criterion = c("AIC", "HQ", "SC",
> "FPE"), external.regressors = NULL) need to be lag = 1, lag.max = 4,
> lag.criterion = c("AIC", "HQ", "SC", "FPE"), external.regressors = NULL
>
>> sim1 = cgarchsim(fit1, n.sim = 1, n.start = 0, m.sim = 3500, presigma =
>> tail(sigma(fit1), 1),
> startMethod = "sample", preR = preR, prereturns = tail( as.matrix(Dat), 4),
> preresiduals = tail(residuals(.fitlist), 1),rseed = 1:3500)
>
> if I use prereturns = tail( as.matrix(Dat), 4) , it will report error. So
> instead, I use prereturns = tail( as.matrix(Dat), 1)
>
>> forcmean = round( rgarch:::varxforecast(X = Dat, Bcoef =
>> fit1 at mfit$vrmodel$Bcoef, p = 4,
> 				out.sample = 0, n.ahead = 1, n.roll = 0, mregfor = NULL), 5)
>
> the rgarch package is offline. So can you suggest another way for this?
>
> Thank you again!
>
> --
> View this message in context: http://r.789695.n4.nabble.com/copula-with-rmgarch-tp4616138p4618054.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From me at censix.com  Wed May  9 08:19:31 2012
From: me at censix.com (soren wilkening)
Date: Tue, 8 May 2012 23:19:31 -0700 (PDT)
Subject: [R-SIG-Finance] IBrokers and fill Price
In-Reply-To: <CAHFhaq8e+6K-Jh5HWZaonEy6Hrgve0w0OS13QwSfNnNNyFC7AQ@mail.gmail.com>
References: <CAHFhaq-t-bz8xuv+CaihOy=q=P5m5R4fotgg9xf3hdOxCPAZgg@mail.gmail.com>
	<1336391210414-4614595.post@n4.nabble.com>
	<CAHFhaq8e+6K-Jh5HWZaonEy6Hrgve0w0OS13QwSfNnNNyFC7AQ@mail.gmail.com>
Message-ID: <1336544371657-4619486.post@n4.nabble.com>

some sample code attached

http://r.789695.n4.nabble.com/file/n4619486/example.r example.r 

-----
http://censix.com
--
View this message in context: http://r.789695.n4.nabble.com/IBrokers-and-fill-Price-tp4613710p4619486.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From papa.senyo at yahoo.it  Wed May  9 12:17:05 2012
From: papa.senyo at yahoo.it (Papa sen)
Date: Wed, 9 May 2012 11:17:05 +0100 (BST)
Subject: [R-SIG-Finance] VaR output using rugarch via Bactest report
Message-ID: <1336558625.11020.YahooMailNeo@web132305.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120509/381eeeb8/attachment.pl>

From weihanliu2002 at yahoo.com  Wed May  9 14:01:53 2012
From: weihanliu2002 at yahoo.com (Wei-han Liu)
Date: Wed, 9 May 2012 05:01:53 -0700 (PDT)
Subject: [R-SIG-Finance] self-fulfilling prophecies in financial study
Message-ID: <1336564913.51435.YahooMailNeo@web161303.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120509/b9366307/attachment.pl>

From me at censix.com  Wed May  9 14:14:25 2012
From: me at censix.com (soren wilkening)
Date: Wed, 9 May 2012 05:14:25 -0700 (PDT)
Subject: [R-SIG-Finance] self-fulfilling prophecies in financial study
In-Reply-To: <1336564913.51435.YahooMailNeo@web161303.mail.bf1.yahoo.com>
References: <1336564913.51435.YahooMailNeo@web161303.mail.bf1.yahoo.com>
Message-ID: <1336565665628-4620254.post@n4.nabble.com>

I suppose you mean something along the lines of:

the more widespread the use of a certain financial model is, the better it
works ?

I would be interested in some concrete examples of that too and therefore
support your request :) [although this is not really a topic specific to R]

Soren

-----
http://censix.com
--
View this message in context: http://r.789695.n4.nabble.com/self-fulfilling-prophecies-in-financial-study-tp4620237p4620254.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From David.Reiner at xrtrading.com  Wed May  9 16:00:41 2012
From: David.Reiner at xrtrading.com (David Reiner)
Date: Wed, 9 May 2012 09:00:41 -0500
Subject: [R-SIG-Finance] [SPAM] - self-fulfilling prophecies in
 financial study - Email found in subject
In-Reply-To: <1336564913.51435.YahooMailNeo@web161303.mail.bf1.yahoo.com>
References: <1336564913.51435.YahooMailNeo@web161303.mail.bf1.yahoo.com>
Message-ID: <9DE405308A6AA24AA794B76282C6C00F0DEEE685DE@HQ-POST1>

This book has some good examples:
An Engine, Not a Camera: How Financial Models Shape Markets
by Donald Mackenzie

-- David

-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Wei-han Liu
Sent: Wednesday, May 09, 2012 7:02 AM
To: R-SIG-Finance at r-project.org
Subject: [SPAM] - [R-SIG-Finance] self-fulfilling prophecies in financial study - Email found in subject

Hi R users:

There are some possible candidates of self-fulfilling prophecies in financial study.

Could some people share some thoughts about the relevant theories, econometric tests, and R packages for implementation?

Thanks for your attention and sharing.

Wei-han
        [[alternative HTML version deleted]]



This e-mail and any materials attached hereto, including, without limitation, all content hereof and thereof (collectively, "XR Content") are confidential and proprietary to XR Trading, LLC ("XR") and/or its affiliates, and are protected by intellectual property laws.  Without the prior written consent of XR, the XR Content may not (i) be disclosed to any third party or (ii) be reproduced or otherwise used by anyone other than current employees of XR or its affiliates, on behalf of XR or its affiliates.

THE XR CONTENT IS PROVIDED AS IS, WITHOUT REPRESENTATIONS OR WARRANTIES OF ANY KIND.  TO THE MAXIMUM EXTENT PERMISSIBLE UNDER APPLICABLE LAW, XR HEREBY DISCLAIMS ANY AND ALL WARRANTIES, EXPRESS AND IMPLIED, RELATING TO THE XR CONTENT, AND NEITHER XR NOR ANY OF ITS AFFILIATES SHALL IN ANY EVENT BE LIABLE FOR ANY DAMAGES OF ANY NATURE WHATSOEVER, INCLUDING, BUT NOT LIMITED TO, DIRECT, INDIRECT, CONSEQUENTIAL, SPECIAL AND PUNITIVE DAMAGES, LOSS OF PROFITS AND TRADING LOSSES, RESULTING FROM ANY PERSON'S USE OR RELIANCE UPON, OR INABILITY TO USE, ANY XR CONTENT, EVEN IF XR IS ADVISED OF THE POSSIBILITY OF SUCH DAMAGES OR IF SUCH DAMAGES WERE FORESEEABLE.


From richard.c.herron at gmail.com  Wed May  9 16:04:06 2012
From: richard.c.herron at gmail.com (Richard Herron)
Date: Wed, 9 May 2012 10:04:06 -0400
Subject: [R-SIG-Finance] self-fulfilling prophecies in financial study
In-Reply-To: <1336564913.51435.YahooMailNeo@web161303.mail.bf1.yahoo.com>
References: <1336564913.51435.YahooMailNeo@web161303.mail.bf1.yahoo.com>
Message-ID: <CAL9ybL9hiVLnSt-yi9=CEfKDq7bYanJp6rN_TcWbZsDX_WC4ZA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120509/262e04cc/attachment.pl>

From nitish.ranjan at gmail.com  Wed May  9 16:49:04 2012
From: nitish.ranjan at gmail.com (Nitish Ranjan)
Date: Wed, 9 May 2012 09:49:04 -0500
Subject: [R-SIG-Finance] self-fulfilling prophecies in financial study
In-Reply-To: <CAL9ybL9hiVLnSt-yi9=CEfKDq7bYanJp6rN_TcWbZsDX_WC4ZA@mail.gmail.com>
References: <1336564913.51435.YahooMailNeo@web161303.mail.bf1.yahoo.com>
	<CAL9ybL9hiVLnSt-yi9=CEfKDq7bYanJp6rN_TcWbZsDX_WC4ZA@mail.gmail.com>
Message-ID: <CANQSzRx+KqasyaEbDcxcuuzdSvXc0oNmjwM_90RoTtdq=YYrgw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120509/d60a76ba/attachment.pl>

From gps at asu.edu  Wed May  9 16:53:35 2012
From: gps at asu.edu (Geoffrey Smith)
Date: Wed, 9 May 2012 07:53:35 -0700
Subject: [R-SIG-Finance] regression by ticker (panel data)
Message-ID: <CAGRravZeqYzJV-i=XigHy+9vcyDgV-u72BTLwy4RCXBAcS55zw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120509/c7438d88/attachment.pl>

From alec.fei at gmail.com  Wed May  9 17:47:58 2012
From: alec.fei at gmail.com (Alex Fei)
Date: Wed, 9 May 2012 08:47:58 -0700 (PDT)
Subject: [R-SIG-Finance] copula with rmgarch
In-Reply-To: <4FA98B48.3020808@4dscape.com>
References: <1336436015210-4616138.post@n4.nabble.com>
	<4FA8AA9B.9020808@4dscape.com>
	<1336474229699-4617153.post@n4.nabble.com>
	<4FA8FB8D.50900@4dscape.com>
	<1336496031885-4618054.post@n4.nabble.com>
	<4FA98B48.3020808@4dscape.com>
Message-ID: <1336578478814-4620878.post@n4.nabble.com>

Thank you Alexios for always prompt and patient reply!

Yes, you are right. It does not make sense to look at the simulated cov for
1-ahead. I was trying to do a portfolio allocation exercise. 

1) If the mean-variance approach is adopted, basically what I need is the
1-day-ahead return of each assets and their cov. I suppose the former should
come from the margin parts (e.g. ARMA(1,1)-GARCH(1,1)-ghst) given the
estimated marginal parameters and the latter should come from the copula
part (e.g. DCC(1,1)-t-copula) given the estimated copula parameters. In R,
*what shall I do?* for example I have the following:
> library(rmgarch)
> data(dji30ret)
> Dat = dji30ret[, 1:3, drop = FALSE]
> uspec = ugarchspec(mean.model = list(armaOrder = c(1,1)), variance.model =
> list(garchOrder = c(1,1), model = "sGARCH"), 
+                    distribution.model = "jsu")
> spec1 = cgarchspec(uspec = multispec( replicate(3, uspec) ), VAR = FALSE,
> robust = FALSE, lag = 2, lag.max = NULL, 
+                    lag.criterion = c("AIC", "HQ", "SC", "FPE"),
external.regressors = NULL,
+                    robust.control = list("gamma" = 0.25, "delta" = 0.01,
"nc" = 10, "ns" = 500), 
+                    dccOrder = c(1,1), asymmetric = FALSE,
distribution.model = list(copula = c("mvnorm", "mvt")[2], 
+                                                                                    
method = c("Kendall", "ML")[2], time.varying = TRUE, 
+                                                                                    
transformation = c("parametric", "empirical", "spd")[1]))
> fit1 = cgarchfit(spec1, data = Dat, parallel = parallel, parallel.control
> = parallel.control,
+                  fit.control = list(eval.se=TRUE))
> show(fit1)

*-------------------------------------------------*
*                  Copula GARCH Fit               *
*-------------------------------------------------*

Distribution		:  mvt
DCC Order			:  1 1
Asymmetric			:  FALSE
No. of Parameters	:  30
[VAR GARCH DCC UncQ]: [0+24+3+3]
No. of Series		:  3
No. of Observations	:  5521
Log-Likelihood		:  43676.18
Av.Log-Likelihood	:  7.911 

Optimal Parameters
---------------------------------------------------
               Estimate  Std. Error    t value Pr(>|t|)
[AA].mu        0.000531    0.000252   2.106962 0.035121
[AA].ar1      -0.582146    0.075357  -7.725139 0.000000
[AA].ma1       0.638169    0.069877   9.132792 0.000000
[AA].omega     0.000003    0.000001   2.046048 0.040752
[AA].alpha1    0.045806    0.008897   5.148264 0.000000
[AA].beta1     0.948470    0.012120  78.255127 0.000000
[AA].skew      0.141182    0.069022   2.045450 0.040810
[AA].shape     1.902134    0.111488  17.061336 0.000000
[AXP].mu       0.000627    0.000168   3.732932 0.000189
[AXP].ar1      0.730182    0.072262  10.104678 0.000000
[AXP].ma1     -0.784923    0.065556 -11.973334 0.000000
[AXP].omega    0.000001    0.000001   1.893198 0.058332
[AXP].alpha1   0.058253    0.012840   4.536872 0.000006
[AXP].beta1    0.940747    0.014063  66.893758 0.000000
[AXP].skew     0.131492    0.048365   2.718777 0.006552
[AXP].shape    1.868931    0.097636  19.141771 0.000000
[BA].mu        0.000586    0.001033   0.567440 0.570415
[BA].ar1      -0.385522    5.202037  -0.074110 0.940923
[BA].ma1       0.394759    5.336133   0.073978 0.941028
[BA].omega     0.000004    0.000005   0.729471 0.465714
[BA].alpha1    0.046706    0.056782   0.822551 0.410764
[BA].beta1     0.942283    0.066474  14.175183 0.000000
[BA].skew      0.072497    0.522772   0.138678 0.889705
[BA].shape     1.710008    0.085270  20.054081 0.000000
[Joint]dcca1   0.008234    0.001330   6.190368 0.000000
[Joint]dccb1   0.989416    0.002026 488.351900 0.000000
[Joint]mshape 13.574529    1.569377   8.649627 0.000000

Information Criteria
---------------------
                    
Akaike       -15.812
Bayes        -15.780
Shibata      -15.812
Hannan-Quinn -15.801


Elapsed time : 1.85734

ps. seems I can't use ghst for GH skew-t but use jsu instead. When I use
ghst in ugarchspec, the cgarchfit will report the following error message:
Error in if (!any(distribution == valid.distribution))
stop("\nugarchspec-->error: the cond.distribution does not appear to be a
valid choice.") : 
  missing value where TRUE/FALSE needed

2) If the mean-CVaR approach is adopted, I suppose to have a large number
(say, 10000) of 1-day-ahead return of each assets at different scenarios. I
think it can be done with sim1 = cgarchsim(fit1, n.sim = 1, m.sim = 10000,
startMethod = "sample"). *Am I right?*

3) for other exercises, i.e. fitting Archimedean copulas (seems like the
rmgarch package only support gaussian and t copula), I need transform the
standardised residuals to uniform via CDF or ecdf. I suppose the residuals
is standardised (*Am I right?*) by using rugarch, again assume
ARMA(1,1)-GARCG(1,1)-ghst, then *how can I do this transformation* to obtain
uniform pseudo-observations to start a fitting using copula package? Btw, do
you have any suggestion to do this exercise? 

--
View this message in context: http://r.789695.n4.nabble.com/copula-with-rmgarch-tp4616138p4620878.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Wed May  9 18:31:26 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Wed, 09 May 2012 17:31:26 +0100
Subject: [R-SIG-Finance] copula with rmgarch
In-Reply-To: <1336578478814-4620878.post@n4.nabble.com>
References: <1336436015210-4616138.post@n4.nabble.com>
	<4FA8AA9B.9020808@4dscape.com>
	<1336474229699-4617153.post@n4.nabble.com>
	<4FA8FB8D.50900@4dscape.com>
	<1336496031885-4618054.post@n4.nabble.com>
	<4FA98B48.3020808@4dscape.com>
	<1336578478814-4620878.post@n4.nabble.com>
Message-ID: <4FAA9BDE.8070208@4dscape.com>

1. GHST was added recently to rugarch and I have not updated the rmgarch 
package to accomodate this (I guess it is due for an update soon).
2. If you only want mean-covariance, you can recover the conditional 
mean forecast directly by using the 'varxforecast' function (if using 
VAR) else from the univariate model using the 'fitted' method on the 
'uGARCHfit' object (READ THE DOCUMENTATION).
If you want a 1-ahead "scenario", use the "m.sim" option.
3. Only THE Gaussian and Student copula are implemented.
4. 'residuals(fit)' is NOT standardized. You have to do that yourself by 
extracting the covariance and performing the appropriate 
decomposition/transformation in the multivariate case.
However, if you want to fit your own copula in a 2nd stage after GARCH, 
very briefly:
- Filter data with univariate GARCH (see also 'multifit').
- Extract and standardize residuals: 'residuals(fit)/sigma(fit)'.
- Transform into uniform (parametric approach) by extracting any 
conditional higher moment parameters from the GARCH fitted object and 
pass those with the standardized residuals to the "pdist" function of 
rugarch indicating the distribution used (read the documentation). For 
non-parametric or semi-parametric transformation you should look at the 
code in the cgarchfit function.

-Alexios

On 09/05/2012 16:47, Alex Fei wrote:
> Thank you Alexios for always prompt and patient reply!
>
> Yes, you are right. It does not make sense to look at the simulated cov for
> 1-ahead. I was trying to do a portfolio allocation exercise.
>
> 1) If the mean-variance approach is adopted, basically what I need is the
> 1-day-ahead return of each assets and their cov. I suppose the former should
> come from the margin parts (e.g. ARMA(1,1)-GARCH(1,1)-ghst) given the
> estimated marginal parameters and the latter should come from the copula
> part (e.g. DCC(1,1)-t-copula) given the estimated copula parameters. In R,
> *what shall I do?* for example I have the following:
>> library(rmgarch)
>> data(dji30ret)
>> Dat = dji30ret[, 1:3, drop = FALSE]
>> uspec = ugarchspec(mean.model = list(armaOrder = c(1,1)), variance.model =
>> list(garchOrder = c(1,1), model = "sGARCH"),
> +                    distribution.model = "jsu")
>> spec1 = cgarchspec(uspec = multispec( replicate(3, uspec) ), VAR = FALSE,
>> robust = FALSE, lag = 2, lag.max = NULL,
> +                    lag.criterion = c("AIC", "HQ", "SC", "FPE"),
> external.regressors = NULL,
> +                    robust.control = list("gamma" = 0.25, "delta" = 0.01,
> "nc" = 10, "ns" = 500),
> +                    dccOrder = c(1,1), asymmetric = FALSE,
> distribution.model = list(copula = c("mvnorm", "mvt")[2],
> +
> method = c("Kendall", "ML")[2], time.varying = TRUE,
> +
> transformation = c("parametric", "empirical", "spd")[1]))
>> fit1 = cgarchfit(spec1, data = Dat, parallel = parallel, parallel.control
>> = parallel.control,
> +                  fit.control = list(eval.se=TRUE))
>> show(fit1)
>
> *-------------------------------------------------*
> *                  Copula GARCH Fit               *
> *-------------------------------------------------*
>
> Distribution		:  mvt
> DCC Order			:  1 1
> Asymmetric			:  FALSE
> No. of Parameters	:  30
> [VAR GARCH DCC UncQ]: [0+24+3+3]
> No. of Series		:  3
> No. of Observations	:  5521
> Log-Likelihood		:  43676.18
> Av.Log-Likelihood	:  7.911
>
> Optimal Parameters
> ---------------------------------------------------
>                 Estimate  Std. Error    t value Pr(>|t|)
> [AA].mu        0.000531    0.000252   2.106962 0.035121
> [AA].ar1      -0.582146    0.075357  -7.725139 0.000000
> [AA].ma1       0.638169    0.069877   9.132792 0.000000
> [AA].omega     0.000003    0.000001   2.046048 0.040752
> [AA].alpha1    0.045806    0.008897   5.148264 0.000000
> [AA].beta1     0.948470    0.012120  78.255127 0.000000
> [AA].skew      0.141182    0.069022   2.045450 0.040810
> [AA].shape     1.902134    0.111488  17.061336 0.000000
> [AXP].mu       0.000627    0.000168   3.732932 0.000189
> [AXP].ar1      0.730182    0.072262  10.104678 0.000000
> [AXP].ma1     -0.784923    0.065556 -11.973334 0.000000
> [AXP].omega    0.000001    0.000001   1.893198 0.058332
> [AXP].alpha1   0.058253    0.012840   4.536872 0.000006
> [AXP].beta1    0.940747    0.014063  66.893758 0.000000
> [AXP].skew     0.131492    0.048365   2.718777 0.006552
> [AXP].shape    1.868931    0.097636  19.141771 0.000000
> [BA].mu        0.000586    0.001033   0.567440 0.570415
> [BA].ar1      -0.385522    5.202037  -0.074110 0.940923
> [BA].ma1       0.394759    5.336133   0.073978 0.941028
> [BA].omega     0.000004    0.000005   0.729471 0.465714
> [BA].alpha1    0.046706    0.056782   0.822551 0.410764
> [BA].beta1     0.942283    0.066474  14.175183 0.000000
> [BA].skew      0.072497    0.522772   0.138678 0.889705
> [BA].shape     1.710008    0.085270  20.054081 0.000000
> [Joint]dcca1   0.008234    0.001330   6.190368 0.000000
> [Joint]dccb1   0.989416    0.002026 488.351900 0.000000
> [Joint]mshape 13.574529    1.569377   8.649627 0.000000
>
> Information Criteria
> ---------------------
>
> Akaike       -15.812
> Bayes        -15.780
> Shibata      -15.812
> Hannan-Quinn -15.801
>
>
> Elapsed time : 1.85734
>
> ps. seems I can't use ghst for GH skew-t but use jsu instead. When I use
> ghst in ugarchspec, the cgarchfit will report the following error message:
> Error in if (!any(distribution == valid.distribution))
> stop("\nugarchspec-->error: the cond.distribution does not appear to be a
> valid choice.") :
>    missing value where TRUE/FALSE needed
>
> 2) If the mean-CVaR approach is adopted, I suppose to have a large number
> (say, 10000) of 1-day-ahead return of each assets at different scenarios. I
> think it can be done with sim1 = cgarchsim(fit1, n.sim = 1, m.sim = 10000,
> startMethod = "sample"). *Am I right?*
>
> 3) for other exercises, i.e. fitting Archimedean copulas (seems like the
> rmgarch package only support gaussian and t copula), I need transform the
> standardised residuals to uniform via CDF or ecdf. I suppose the residuals
> is standardised (*Am I right?*) by using rugarch, again assume
> ARMA(1,1)-GARCG(1,1)-ghst, then *how can I do this transformation* to obtain
> uniform pseudo-observations to start a fitting using copula package? Btw, do
> you have any suggestion to do this exercise?
>
> --
> View this message in context: http://r.789695.n4.nabble.com/copula-with-rmgarch-tp4616138p4620878.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From JHebertNguyen at cnid.ca  Wed May  9 18:50:16 2012
From: JHebertNguyen at cnid.ca (=?iso-8859-1?Q?Julien_H=E9bert-Nguyen?=)
Date: Wed, 9 May 2012 12:50:16 -0400
Subject: [R-SIG-Finance] Quantstrat macross demo - Stops/Reverse strategy
Message-ID: <F5F01FBFB688F14D83385064655B9A55730C5C3F@exchsv4.CNICAPITAL.COM>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120509/6c383e2f/attachment.pl>

From mimode_14 at hotmail.com  Wed May  9 20:17:29 2012
From: mimode_14 at hotmail.com (Minerva Mora)
Date: Wed, 9 May 2012 11:17:29 -0700 (PDT)
Subject: [R-SIG-Finance] What does mean MidTau in Nelson-Siegel's model?
Message-ID: <1336587449581-4621294.post@n4.nabble.com>

Hi!

I apologize for my english.
I'm working with the YieldCurve package in the estimation of the
Nelson-Siegel parameters. In this model, the arguments are: rate, maturity
and MidTau.

I don?t have problem with the rate and maturity, but i can?t understand the
MidTau, because the argument is: MidTau ------> vector which indicates
medium term maturity to maximize the beta_2 factor

My questions are:
1) What does mean medium term maturity int the MidTau? What does is this
argument for?
2) How many datas in the vector are good to obtain a good estimation? If i
have 77 datas of maturity. I asked this beacuse i sow in my several testing
that the results of the parameters changes if a put more datas or if i
remove datas from this vector, but sometimes the results doesn?t change.
3)If my maturity datas are since 0.03 months to 323 months, Which is the
best or the theorical month data to start in the vector of the midTau?

--
View this message in context: http://r.789695.n4.nabble.com/What-does-mean-MidTau-in-Nelson-Siegel-s-model-tp4621294.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From rbali at ufmg.br  Wed May  9 20:44:00 2012
From: rbali at ufmg.br (Robert Iquiapaza)
Date: Wed, 9 May 2012 15:44:00 -0300
Subject: [R-SIG-Finance] [SPAM] - self-fulfilling prophecies in
	financial study - Email found in subject
In-Reply-To: <9DE405308A6AA24AA794B76282C6C00F0DEEE685DE@HQ-POST1>
References: <1336564913.51435.YahooMailNeo@web161303.mail.bf1.yahoo.com>
	<9DE405308A6AA24AA794B76282C6C00F0DEEE685DE@HQ-POST1>
Message-ID: <B23A4B9CD7634AE9AAAD18B1F1C4E982@DellPC>

And there are several articles that cited this book, some  with more 
examples and tests
http://scholar.google.com/scholar?hl=en&sciodt=0%2C5&q=self-fulfilling+prophecies&btnG=Search&cites=5508630854283908327&scipsc=1&as_sdt=0%2C5&as_ylo=&as_vis=0

Robert

-----Mensagem Original----- 
From: David Reiner
Sent: Wednesday, May 09, 2012 11:00 AM
To: Wei-han Liu ; R-SIG-Finance at r-project.org
Subject: Re: [R-SIG-Finance] [SPAM] - self-fulfilling prophecies in 
financial study - Email found in subject

This book has some good examples:
An Engine, Not a Camera: How Financial Models Shape Markets
by Donald Mackenzie

-- David

-----Original Message-----
From: r-sig-finance-bounces at r-project.org 
[mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Wei-han Liu
Sent: Wednesday, May 09, 2012 7:02 AM
To: R-SIG-Finance at r-project.org
Subject: [SPAM] - [R-SIG-Finance] self-fulfilling prophecies in financial 
study - Email found in subject

Hi R users:

There are some possible candidates of self-fulfilling prophecies in 
financial study.

Could some people share some thoughts about the relevant theories, 
econometric tests, and R packages for implementation?

Thanks for your attention and sharing.

Wei-han
        [[alternative HTML version deleted]]


From dlincke at lincke.com  Wed May  9 21:33:07 2012
From: dlincke at lincke.com (David-Michael Lincke)
Date: Wed, 9 May 2012 19:33:07 +0000
Subject: [R-SIG-Finance] stripping holidays from timeSeries() class time
	series
Message-ID: <FED6DC763FCC7B428AD79346DBA943F44DCBAA03@ExDAG20-N1.hostallapps.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120509/726e2109/attachment.pl>

From richard.c.herron at gmail.com  Wed May  9 21:44:08 2012
From: richard.c.herron at gmail.com (Richard Herron)
Date: Wed, 9 May 2012 15:44:08 -0400
Subject: [R-SIG-Finance] self-fulfilling prophecies in financial study
In-Reply-To: <CANQSzRx+KqasyaEbDcxcuuzdSvXc0oNmjwM_90RoTtdq=YYrgw@mail.gmail.com>
References: <1336564913.51435.YahooMailNeo@web161303.mail.bf1.yahoo.com>
	<CAL9ybL9hiVLnSt-yi9=CEfKDq7bYanJp6rN_TcWbZsDX_WC4ZA@mail.gmail.com>
	<CANQSzRx+KqasyaEbDcxcuuzdSvXc0oNmjwM_90RoTtdq=YYrgw@mail.gmail.com>
Message-ID: <CAL9ybL9hng-A8CMjkNMYk568NHTUfiVMcmWPZKEXFTG_++AUFA@mail.gmail.com>

I don't want to argue semantics, but for your examples there is a
real, underlying change.

Inclusion in an index improves liquidity and information production
for the real reasons you discuss (e.g., increased trading by index
funds or an increase in capitalization that added the firm to the
index).

For the size effect the only thing that changed was that some
researchers said "I think that small stocks earn an abnormal return,"
and the effect diminished. I consider this a "prophecy" because there
is no real underlying change, just an idea planted by academic
research.

Richard Herron


On Wed, May 9, 2012 at 10:49 AM, Nitish Ranjan <nitish.ranjan at gmail.com> wrote:
> Disappearance of size effect will not be an example of self fulfilling
> prophesy (it disappeared rather than become stronger).
>
> In the stock market, possible examples are:
>
> 1. Index inclusion effect in returns
> 2. The tendency of traders to put in trades early in the day or later in
> the day but not in the middle of the day.
> 3. Most dispersion in returns during the earnings month.
>
> The second part of the email asked about R code/test which will test these
> effects for self fulfilling prophecy. The null for such test is "Are there
> any economic reasons why we would see self fulfilling prophecies to work."
> A general test is hard (probably impossible, see the following discussion)
> since different economic(or psychological) factors shape each of these
> examples. But we can formulate hypotheses for each one of these examples
> and write tests.
>
> Let me take the example of index inclusion effect. It is well known that
> after included in an index such as S&P 500, a stock performs well. Why? For
> one, there are many funds which are pegged to S&P 500 and many more which
> simply follow the index. Both these kind of funds will have demand for the
> newly inducted stock. Both these kind of funds will begin to buy the stock
> and
> move the prices up for the newly inducted stock. Since neither of these
> demands have any informational origins, we would expect the permanent
> impact to be small (close to zero) and a large temporary impact. See the
> survey paper http://www4.ncsu.edu/~rswarr/fm2006.pdf for further discussion.
>
> Another channel via which the effect might play out is through new
> information production. It is very possible that index inclusion actually
> brings a stock to the forefront of investors and produces new research for
> the stock which in turn should make the stock less volatile. A
> Campbell-Schiller type decomposition might help with matters here. You
> could also examine the actual production of information (number of news
> articles, analyst following, analyst dispersion etc). This line of
> reasoning suggests that we would see this effect most for stocks which come
> from relative anonymity to being famous. We would observe less of this
> effect for stocks which were famous before inclusion in an index (such as
> netflix for SP500 and any stock in Dow 30). But including such
> informational channels involve careful examination of multitude of data
> sources and ruling out the alternates one by one. It also involves
> understanding the various forces at play (or institutional knowledge).
>
> Regards
>
> Nitish
>
> p.s.: I think it is borderline not appropriate discussion for this list,
> but since it asked for an R code it deserves some consideration.
>
>
> On Wed, May 9, 2012 at 9:04 AM, Richard Herron
> <richard.c.herron at gmail.com>wrote:
>
>> Is this an R question?
>>
>> Are you taking about anomalies that disappear after we discover them? If we
>> discover an anomaly and it disappears, then we have to wonder if we priced
>> it right before or after. See the size effect.
>>
>> http://schwert.ssb.rochester.edu/hbfech15.pdf
>>
>> Richard Herron
>>
>>
>> On Wed, May 9, 2012 at 8:01 AM, Wei-han Liu <weihanliu2002 at yahoo.com>
>> wrote:
>>
>> > Hi R users:
>> >
>> > There are some possible candidates of self-fulfilling prophecies in
>> > financial study.
>> >
>> > Could some people share some thoughts about the relevant theories,
>> > econometric tests, and R packages for implementation?
>> >
>> > Thanks for your attention and sharing.
>> >
>> > Wei-han
>> > ? ? ? ?[[alternative HTML version deleted]]
>> >
>> >
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions
>> > should go.
>> >
>>
>> ? ? ? ?[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
>
>
> --
> Have fun.
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From nitish.ranjan at gmail.com  Wed May  9 21:56:04 2012
From: nitish.ranjan at gmail.com (Nitish Ranjan)
Date: Wed, 9 May 2012 14:56:04 -0500
Subject: [R-SIG-Finance] self-fulfilling prophecies in financial study
In-Reply-To: <CAL9ybL9hng-A8CMjkNMYk568NHTUfiVMcmWPZKEXFTG_++AUFA@mail.gmail.com>
References: <1336564913.51435.YahooMailNeo@web161303.mail.bf1.yahoo.com>
	<CAL9ybL9hiVLnSt-yi9=CEfKDq7bYanJp6rN_TcWbZsDX_WC4ZA@mail.gmail.com>
	<CANQSzRx+KqasyaEbDcxcuuzdSvXc0oNmjwM_90RoTtdq=YYrgw@mail.gmail.com>
	<CAL9ybL9hng-A8CMjkNMYk568NHTUfiVMcmWPZKEXFTG_++AUFA@mail.gmail.com>
Message-ID: <CANQSzRzz1NM7tb_qtfo65Vt1D4e+Mp=xOZm7VE7joU8VdAf0ug@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120509/b33d2e13/attachment.pl>

From alec.fei at gmail.com  Wed May  9 22:07:56 2012
From: alec.fei at gmail.com (Alex Fei)
Date: Wed, 9 May 2012 13:07:56 -0700 (PDT)
Subject: [R-SIG-Finance] copula with rmgarch
In-Reply-To: <4FAA9BDE.8070208@4dscape.com>
References: <1336436015210-4616138.post@n4.nabble.com>
	<4FA8AA9B.9020808@4dscape.com>
	<1336474229699-4617153.post@n4.nabble.com>
	<4FA8FB8D.50900@4dscape.com>
	<1336496031885-4618054.post@n4.nabble.com>
	<4FA98B48.3020808@4dscape.com>
	<1336578478814-4620878.post@n4.nabble.com>
	<4FAA9BDE.8070208@4dscape.com>
Message-ID: <1336594076622-4621613.post@n4.nabble.com>

Thank you!

I just found there is a name "stdresid" under slot "mfit", i.e. 
fit1 at mfit$stdresid. I guess it refers to standardised residuals (it looks
like in the plot), is it true? 

--
View this message in context: http://r.789695.n4.nabble.com/copula-with-rmgarch-tp4616138p4621613.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From dlincke at lincke.com  Wed May  9 22:15:55 2012
From: dlincke at lincke.com (David-Michael Lincke)
Date: Wed, 9 May 2012 20:15:55 +0000
Subject: [R-SIG-Finance] stripping holidays from timeSeries() class
	time	series
In-Reply-To: <FED6DC763FCC7B428AD79346DBA943F44DCBAA03@ExDAG20-N1.hostallapps.net>
References: <FED6DC763FCC7B428AD79346DBA943F44DCBAA03@ExDAG20-N1.hostallapps.net>
Message-ID: <FED6DC763FCC7B428AD79346DBA943F44DCBAE7A@ExDAG20-N1.hostallapps.net>

Turns out that the following accomplishes the same:

tsm[-which(as.Date(time(tsm)) %in% as.Date(index.holidays)),]

However, I still wonder if there is not a more elegant way to achieve this while remaining within the timeDate/timeSeries classes.

________________________________________
From: r-sig-finance-bounces at r-project.org [r-sig-finance-bounces at r-project.org] on behalf of David-Michael Lincke [dlincke at lincke.com]
Sent: Wednesday, May 09, 2012 21:33
To: r-sig-finance at r-project.org
Subject: [R-SIG-Finance] stripping holidays from timeSeries() class time        series

I have come up with the following expression to strip a time series tsm of class timeSeries from holidays contained in timeDate class object index.holidays. index.holidays covers a wider date range than time series tsm.

tsm[-na.omit(match(as.character(index.holidays),as.character(time(tsm)))),]

While this expression works as intended, I suspect that it is rather inefficient due to the data type conversions forced by match(). Is there a more elegant way to accomplish this?

Best regards,
David

        [[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From alexios at 4dscape.com  Wed May  9 22:43:05 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Wed, 09 May 2012 21:43:05 +0100
Subject: [R-SIG-Finance] copula with rmgarch
In-Reply-To: <1336594076622-4621613.post@n4.nabble.com>
References: <1336436015210-4616138.post@n4.nabble.com>
	<4FA8AA9B.9020808@4dscape.com>
	<1336474229699-4617153.post@n4.nabble.com>
	<4FA8FB8D.50900@4dscape.com>
	<1336496031885-4618054.post@n4.nabble.com>
	<4FA98B48.3020808@4dscape.com>
	<1336578478814-4620878.post@n4.nabble.com>
	<4FAA9BDE.8070208@4dscape.com>
	<1336594076622-4621613.post@n4.nabble.com>
Message-ID: <4FAAD6D9.2010601@4dscape.com>

True.
Details of the calculation are in the copula-postestimation.R.

-Alexios

On 09/05/2012 21:07, Alex Fei wrote:
> Thank you!
>
> I just found there is a name "stdresid" under slot "mfit", i.e.
> fit1 at mfit$stdresid. I guess it refers to standardised residuals (it looks
> like in the plot), is it true?
>
> --
> View this message in context: http://r.789695.n4.nabble.com/copula-with-rmgarch-tp4616138p4621613.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From josh.m.ulrich at gmail.com  Wed May  9 22:51:08 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Wed, 9 May 2012 15:51:08 -0500
Subject: [R-SIG-Finance] stripping holidays from timeSeries() class time
	series
In-Reply-To: <FED6DC763FCC7B428AD79346DBA943F44DCBAE7A@ExDAG20-N1.hostallapps.net>
References: <FED6DC763FCC7B428AD79346DBA943F44DCBAA03@ExDAG20-N1.hostallapps.net>
	<FED6DC763FCC7B428AD79346DBA943F44DCBAE7A@ExDAG20-N1.hostallapps.net>
Message-ID: <CAPPM_gQPs06S3fr_vbvt50BZQ_3GruvSGCopixXDmWaGoZAGFg@mail.gmail.com>

You don't need the call to which() and its results may confuse you if
there are no matches, in which case your code below will return
whatever tsm[integer(0)] returns.

Try this instead:
tsm[!(as.Date(time(tsm)) %in% as.Date(index.holidays)),]

Best,
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com


On Wed, May 9, 2012 at 3:15 PM, David-Michael Lincke <dlincke at lincke.com> wrote:
> Turns out that the following accomplishes the same:
>
> tsm[-which(as.Date(time(tsm)) %in% as.Date(index.holidays)),]
>
> However, I still wonder if there is not a more elegant way to achieve this while remaining within the timeDate/timeSeries classes.
>
> ________________________________________
> From: r-sig-finance-bounces at r-project.org [r-sig-finance-bounces at r-project.org] on behalf of David-Michael Lincke [dlincke at lincke.com]
> Sent: Wednesday, May 09, 2012 21:33
> To: r-sig-finance at r-project.org
> Subject: [R-SIG-Finance] stripping holidays from timeSeries() class time ? ? ? ?series
>
> I have come up with the following expression to strip a time series tsm of class timeSeries from holidays contained in timeDate class object index.holidays. index.holidays covers a wider date range than time series tsm.
>
> tsm[-na.omit(match(as.character(index.holidays),as.character(time(tsm)))),]
>
> While this expression works as intended, I suspect that it is rather inefficient due to the data type conversions forced by match(). Is there a more elegant way to accomplish this?
>
> Best regards,
> David
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jeff.a.ryan at gmail.com  Thu May 10 00:17:58 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Wed, 9 May 2012 17:17:58 -0500
Subject: [R-SIG-Finance] stripping holidays from timeSeries() class time
	series
In-Reply-To: <CAPPM_gQPs06S3fr_vbvt50BZQ_3GruvSGCopixXDmWaGoZAGFg@mail.gmail.com>
References: <FED6DC763FCC7B428AD79346DBA943F44DCBAA03@ExDAG20-N1.hostallapps.net>
	<FED6DC763FCC7B428AD79346DBA943F44DCBAE7A@ExDAG20-N1.hostallapps.net>
	<CAPPM_gQPs06S3fr_vbvt50BZQ_3GruvSGCopixXDmWaGoZAGFg@mail.gmail.com>
Message-ID: <3FB6A7DD-F31B-49FF-95C6-15A093E68A15@gmail.com>

There is a timeSeries equal to this, but you an also merge in xts against a known time series of valid dates (often easier to find) and only return the columns of interest. 

In xts you'd use:

merge(x,known, join="inner",retside=c(TRUE,FALSE))

That will be very fast. 

Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On May 9, 2012, at 3:51 PM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:

> You don't need the call to which() and its results may confuse you if
> there are no matches, in which case your code below will return
> whatever tsm[integer(0)] returns.
> 
> Try this instead:
> tsm[!(as.Date(time(tsm)) %in% as.Date(index.holidays)),]
> 
> Best,
> --
> Joshua Ulrich  |  FOSS Trading: www.fosstrading.com
> 
> R/Finance 2012: Applied Finance with R
> www.RinFinance.com
> 
> 
> On Wed, May 9, 2012 at 3:15 PM, David-Michael Lincke <dlincke at lincke.com> wrote:
>> Turns out that the following accomplishes the same:
>> 
>> tsm[-which(as.Date(time(tsm)) %in% as.Date(index.holidays)),]
>> 
>> However, I still wonder if there is not a more elegant way to achieve this while remaining within the timeDate/timeSeries classes.
>> 
>> ________________________________________
>> From: r-sig-finance-bounces at r-project.org [r-sig-finance-bounces at r-project.org] on behalf of David-Michael Lincke [dlincke at lincke.com]
>> Sent: Wednesday, May 09, 2012 21:33
>> To: r-sig-finance at r-project.org
>> Subject: [R-SIG-Finance] stripping holidays from timeSeries() class time        series
>> 
>> I have come up with the following expression to strip a time series tsm of class timeSeries from holidays contained in timeDate class object index.holidays. index.holidays covers a wider date range than time series tsm.
>> 
>> tsm[-na.omit(match(as.character(index.holidays),as.character(time(tsm)))),]
>> 
>> While this expression works as intended, I suspect that it is rather inefficient due to the data type conversions forced by match(). Is there a more elegant way to accomplish this?
>> 
>> Best regards,
>> David
>> 
>>        [[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>> 
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From daler at uic.edu  Thu May 10 18:14:56 2012
From: daler at uic.edu (=?utf-8?B?RGFsZSBXLlIuIFJvc2VudGhhbA==?=)
Date: Thu, 10 May 2012 11:14:56 -0500
Subject: [R-SIG-Finance]
	=?utf-8?q?R-SIG-Finance_Digest=2C_Vol_96=2C_Issue?= =?utf-8?q?_10?=
Message-ID: <201205101614.q4AGEtKe018435@mail-3.cc.uic.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120510/b57946b6/attachment.pl>

From gsee000 at gmail.com  Thu May 10 20:15:46 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 10 May 2012 13:15:46 -0500
Subject: [R-SIG-Finance] Generating a front month only Time Series for
 Futures Prices
In-Reply-To: <CAGS5yBV43xsRyMnOca+Ukbf5wSAr6EzTuVVZkgru4LNndEzPcA@mail.gmail.com>
References: <1336070650152-4606794.post@n4.nabble.com>
	<CAGS5yBXQ91Nnyr2Q9hAWD=4qSAj42kYsUhnz=NgCV2XOMcp0JQ@mail.gmail.com>
	<CA+xi=qazYQxYPL0mtBSnTeJSZ85-bDk2kBDnUj19d7nf7+ov_w@mail.gmail.com>
	<CA+xi=qait6=_wC4pNZF+EGcxNUHEYP3_t5GpxX=yYpcK+=G+kw@mail.gmail.com>
	<1336075631561-4606979.post@n4.nabble.com>
	<CA+xi=qbLn_1mkV9Wc9+5ZpQLG2ZDE6vb4FBbTuW-w6ViEhXXww@mail.gmail.com>
	<CA+xi=qYwoT-mkNDaSpZVg0Q+RCrS7mE+ryUQZj4uvC-=+798Pg@mail.gmail.com>
	<CA+xi=qZy-jy8j5aeFY8OsEt0Vw4xHZQEzvZqcpNc6P1BinWuRA@mail.gmail.com>
	<1336120038765-4608088.post@n4.nabble.com>
	<CA+xi=qZb6TbTeinzJf9j3TsjNPoQ8fJ2a4p93LJqVdUKopisWw@mail.gmail.com>
	<CAGS5yBV43xsRyMnOca+Ukbf5wSAr6EzTuVVZkgru4LNndEzPcA@mail.gmail.com>
Message-ID: <CA+xi=qbGLG90pCN7pMUn7eJq1+4sCn9gaXvGYeCpr+967JvSxA@mail.gmail.com>

John,

I think you probably meant to send this to the list instead of just
me; apologies if not.

I agree that when possible, you should avoid building continuous
series.  Nonetheless, that's what the OP asked for.

Sometimes, there is value in analyzing a long history of data (for
example when analyzing risk) and in such cases, a constant maturity
future makes sense.

Also, if your time-frame is short and you're careful about how you
adjust and how you use the adjusted data, I think it can be useful.

The OP wanted to combine and not adjust, which, IMO is more dangerous
than combining and adjusting.  If you're going to combine the price
series of 2 different expiration months, then you have to adjust for
the roll.  Otherwise, you may see a trend or mean-reversion where
there isn't one, or worse, the opposite is actually occurring.

Your point about this being a difficult thing to generalize (e.g.
different grades for different expirations, or first notice day being
different than expiration, etc.) is valid.

Regards,
Garrett

On Thu, May 10, 2012 at 12:48 PM, BBands <bbands at gmail.com> wrote:
> I feel that reiterating my prior warning is worthwhile. The proper way
> to do this is to analyze the actual contracts and roll just as you
> would have to if you were actually trading; exit the current contact
> when the crowd moves enter the new actively-traded front month and
> account for each separately. I coded this in Python and it works well,
> but I have yet to tackle futures in R. Some problems: In some
> commodities not all months actually trade actively. Backwardation and
> contango can impact the rolls dramatically. While analyzing months in
> delivery may seem OK, traders avoid them. None of the shortcuts that I
> know of comes even close to approximating the realities of the
> marketplace. Most analysts (including most of the tblox crowd) simply
> ignore these problems, analyze continuous contracts and are burned
> when they enter the marketable.
>
> Current example problem: Different crude contracts track different
> delivery venues and are priced differently. Think WTI versus Brent,
> spread truculently running tin the $10 range, which not too long ago
> was thought 'impossible".
>
> This is a very deep well.
>
> Best,
>
> John


From bbands at gmail.com  Thu May 10 23:59:49 2012
From: bbands at gmail.com (BBands)
Date: Thu, 10 May 2012 14:59:49 -0700
Subject: [R-SIG-Finance] Generating a front month only Time Series for
	Futures Prices
In-Reply-To: <CAGS5yBV43xsRyMnOca+Ukbf5wSAr6EzTuVVZkgru4LNndEzPcA@mail.gmail.com>
References: <1336070650152-4606794.post@n4.nabble.com>
	<CAGS5yBXQ91Nnyr2Q9hAWD=4qSAj42kYsUhnz=NgCV2XOMcp0JQ@mail.gmail.com>
	<CA+xi=qazYQxYPL0mtBSnTeJSZ85-bDk2kBDnUj19d7nf7+ov_w@mail.gmail.com>
	<CA+xi=qait6=_wC4pNZF+EGcxNUHEYP3_t5GpxX=yYpcK+=G+kw@mail.gmail.com>
	<1336075631561-4606979.post@n4.nabble.com>
	<CA+xi=qbLn_1mkV9Wc9+5ZpQLG2ZDE6vb4FBbTuW-w6ViEhXXww@mail.gmail.com>
	<CA+xi=qYwoT-mkNDaSpZVg0Q+RCrS7mE+ryUQZj4uvC-=+798Pg@mail.gmail.com>
	<CA+xi=qZy-jy8j5aeFY8OsEt0Vw4xHZQEzvZqcpNc6P1BinWuRA@mail.gmail.com>
	<1336120038765-4608088.post@n4.nabble.com>
	<CA+xi=qZb6TbTeinzJf9j3TsjNPoQ8fJ2a4p93LJqVdUKopisWw@mail.gmail.com>
	<CAGS5yBV43xsRyMnOca+Ukbf5wSAr6EzTuVVZkgru4LNndEzPcA@mail.gmail.com>
Message-ID: <CAGS5yBWjFhSUw=tvdFTwW2ok0YuoA67=Cw85+OdAGgt8Vt84RA@mail.gmail.com>

I feel that reiterating my prior warning is worthwhile. The proper way
to do this is to analyze the actual contracts and roll just as you
would have to if you were actually trading; exit the current contact
when the crowd moves enter the new actively-traded front month and
account for each separately. I coded this in Python and it works well,
but I have yet to tackle futures in R. Some problems: In some
commodities not all months actually trade actively. Backwardation and
contango can impact the rolls dramatically. While analyzing months in
delivery may seem OK, traders avoid them. None of the shortcuts that I
know of comes even close to approximating the realities of the
marketplace. Most analysts (including most of the tblox crowd) simply
ignore these problems, analyze continuous contracts and are burned
when they enter the marketable.

Current example problem: Different crude contracts track different
delivery venues and are priced differently. Think WTI versus Brent,
spread truculently running tin the $10 range, which not too long ago
was thought 'impossible".

This is a very deep well.

Best,

John


From gsee000 at gmail.com  Fri May 11 00:06:27 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 10 May 2012 17:06:27 -0500
Subject: [R-SIG-Finance] Generating a front month only Time Series for
 Futures Prices
In-Reply-To: <CAGS5yBWjFhSUw=tvdFTwW2ok0YuoA67=Cw85+OdAGgt8Vt84RA@mail.gmail.com>
References: <1336070650152-4606794.post@n4.nabble.com>
	<CAGS5yBXQ91Nnyr2Q9hAWD=4qSAj42kYsUhnz=NgCV2XOMcp0JQ@mail.gmail.com>
	<CA+xi=qazYQxYPL0mtBSnTeJSZ85-bDk2kBDnUj19d7nf7+ov_w@mail.gmail.com>
	<CA+xi=qait6=_wC4pNZF+EGcxNUHEYP3_t5GpxX=yYpcK+=G+kw@mail.gmail.com>
	<1336075631561-4606979.post@n4.nabble.com>
	<CA+xi=qbLn_1mkV9Wc9+5ZpQLG2ZDE6vb4FBbTuW-w6ViEhXXww@mail.gmail.com>
	<CA+xi=qYwoT-mkNDaSpZVg0Q+RCrS7mE+ryUQZj4uvC-=+798Pg@mail.gmail.com>
	<CA+xi=qZy-jy8j5aeFY8OsEt0Vw4xHZQEzvZqcpNc6P1BinWuRA@mail.gmail.com>
	<1336120038765-4608088.post@n4.nabble.com>
	<CA+xi=qZb6TbTeinzJf9j3TsjNPoQ8fJ2a4p93LJqVdUKopisWw@mail.gmail.com>
	<CAGS5yBV43xsRyMnOca+Ukbf5wSAr6EzTuVVZkgru4LNndEzPcA@mail.gmail.com>
	<CAGS5yBWjFhSUw=tvdFTwW2ok0YuoA67=Cw85+OdAGgt8Vt84RA@mail.gmail.com>
Message-ID: <CA+xi=qa=XoentoH7LFq4-gduqxD-Dv6oybpSHCsJxvD3LuRjtQ@mail.gmail.com>

repost for the archives:

I agree that when possible, you should avoid building continuous
series.  Nonetheless, that's what the OP asked for.

Sometimes, there is value in analyzing a long history of data (for
example when analyzing risk) and in such cases, a constant maturity
future makes sense.

Also, if your time-frame is short and you're careful about how you
adjust and how you use the adjusted data, I think it can be useful.

The OP wanted to combine and not adjust, which, IMO is more dangerous
than combining and adjusting.  If you're going to combine the price
series of 2 different expiration months, then you have to adjust for
the roll.  Otherwise, you may see a trend or mean-reversion where
there isn't one, or worse, the opposite is actually occurring.

Your point about this being a difficult thing to generalize (e.g.
different grades for different expirations, or first notice day being
different than expiration, etc.) is valid.

Regards,
Garrett


From student.northwestern at gmail.com  Fri May 11 03:11:08 2012
From: student.northwestern at gmail.com (Jim Green)
Date: Thu, 10 May 2012 21:11:08 -0400
Subject: [R-SIG-Finance] moving averages on specific interval and merge
Message-ID: <CACAe89zn8L+vVjuRk_ChG-ZBcPv_XhWyddXLp9o+NNz664C0jg@mail.gmail.com>

Greetings!

I am using quantstrat and xts to do some intraday work and come up
with this problem. the xts object temp in the following example is
attached as and rda file.

> head(temp)
                    A.Open A.High  A.Low A.Close A.Volume
2012-02-01 08:29:00  42.47  43.76 41.410   43.76     2071
2012-02-01 09:30:00  43.38  43.38 42.970   43.15    40300
2012-02-01 09:31:00  43.14  43.28 43.130   43.28    14990
2012-02-01 09:32:00  43.27  43.37 43.270   43.37     3300
2012-02-01 09:33:00  43.37  43.50 43.370   43.48     3056
2012-02-01 09:34:00  43.49  43.50 43.396   43.44    10968

> tail(temp)
                     A.Open  A.High   A.Low A.Close A.Volume
2012-03-27 16:07:00 45.6650 45.6650 45.6650 45.6650      170
2012-03-27 16:08:00 45.6710 45.6710 45.6710 45.6710      474
2012-03-27 16:10:00 45.9131 45.9131 45.9131 45.9131     1800
2012-03-27 16:13:00 45.6952 45.6952 45.6952 45.6952      300
2012-03-27 16:15:00 45.9368 45.9368 45.9368 45.9368      791
2012-03-27 16:21:00 45.7000 45.7000 45.7000 45.7000    22000


I would like to calculate moving averages of minute volume for
specific interval and merge with the original minute ohlc data.

take 09:40:00 for example, calculate the average previous 10 days
volume between 09:39:00 to 09:40:00 and merge with exiting data.

ultimately I want to get an xts object with columns

Open   High   Low   Close   Volume   Average.Volume.at.current.interval
2012-03-27 16:07:00 45.6650 45.6650 45.6650 45.6650      170   177
2012-03-27 16:08:00 45.6710 45.6710 45.6710 45.6710      474  500
...
...
..
2012-03-27 16:21:00 45.7000 45.7000 45.7000 45.7000    22000 1000

any pointers are appreciated!

Jim.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: a.rda
Type: application/octet-stream
Size: 163553 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120510/00a9c233/attachment.obj>

From student.northwestern at gmail.com  Fri May 11 03:13:19 2012
From: student.northwestern at gmail.com (Jim Green)
Date: Thu, 10 May 2012 21:13:19 -0400
Subject: [R-SIG-Finance] Guy's example osFixedDollar not working in
	latest quantstrat
In-Reply-To: <CACAe89zekcm7Yu+0kT5gNqzGtqBjKha-V8wUd+qO7QkENq8gDw@mail.gmail.com>
References: <CACAe89zekcm7Yu+0kT5gNqzGtqBjKha-V8wUd+qO7QkENq8gDw@mail.gmail.com>
Message-ID: <CACAe89xLmXbo_Ahof5o_eu3GeUWpqtdRNV=e-RhP_Hy5kH87mA@mail.gmail.com>

current svn version of quantstrat already fixed the order sizing
problem. Many thanks to Brian and the patch author!

Jim.

On 12 April 2012 21:15, Jim Green <student.northwestern at gmail.com> wrote:
> Good Evening!
>
> I was studying the Guy Yollin's presentation on quantstrat
> http://www.r-programming.org/files/quantstrat-II.pdf ?and can't
> reproduce the result in latest quantstrat. Actually osFixedDollar was
> not even called per my basic logging. I've attached the pdf chart and
> the runnable code and the results on my machine. Hope someone could
> help..
>
> Thanks!
> Jim.
>
>
> ### code ###
>
> #!/usr/bin/env Rscript
> library(quantstrat)
> library(logging)
> basicConfig()
>
> # define stock list
> stock.str=c("SPY")
> # inz currency and stocks
> dummy <- currency('USD')
> for(symbol in stock.str){
> ? ? ? ? stock(symbol, currency="USD",multiplier=1)
> }
> # download stocks
> start.date <- as.Date("2001-01-01")
> initDate <- start.date-1
> end.date <-as.Date("2011-08-06")
> getSymbols(stock.str,from=start.date,to=end.date,adjust=T)
>
> # inz portfolio, account, orders, strategy
> strat.name <- "MAX"
> initEq=1000000
> trade.percent <- 0.01
> tradeSize <- initEq * trade.percent
> dummy <- initPortf(name=strat.name,symbols=stock.str, initDate=initDate)
> dummy <- initAcct(name=strat.name,portfolios=strat.name,
> initDate=initDate, initEq=initEq)
> initOrders(portfolio=strat.name,initDate=initDate)
> strat <- strategy(strat.name)
>
> # indicators:
> strat <- add.indicator(strategy = strat, name = "SMA", arguments =
> list(x=quote(Cl(mktdata)), n=50),label= "ma50" )
> strat <- add.indicator(strategy = strat, name = "SMA", arguments =
> list(x=quote(Cl(mktdata)), n=200),label= "ma200")
> # signals:
> strat <- add.signal(strategy = strat,name="sigCrossover", arguments =
> list(columns=c("ma50","ma200"), relationship="gte"),
> label="ma50.gt.ma200")
> strat <- add.signal(strategy = strat,name="sigCrossover", arguments =
> list(column=c("ma50","ma200"),relationship="lt"),
> label="ma50.lt.ma200")
>
> osFixedDollar <- function(timestamp,orderqty, portfolio, symbol, ruletype, ...)
> {
> ? logwarn("started osFixedDollar")
> ? ClosePrice <- as.numeric(Cl(mktdata[timestamp,]))
> ? orderqty <- sign(orderqty)*round(tradeSize/ClosePrice)
> ? return(orderqty)
> }
>
> # rules:
> strat <- add.rule(
> ? strategy = strat,
> ? name='ruleSignal',
> ? arguments = list(sigcol="ma50.gt.ma200",sigval=TRUE, orderqty=100,
> ordertype='market', orderside='long', osFUN='osFixedDollar'),
> ? type='enter'
> )
>
> strat <- add.rule(
> ? strategy = strat,
> ? name='ruleSignal',
> ? arguments = list(sigcol="ma50.lt.ma200",sigval=TRUE,
> orderqty='all', ordertype='market', orderside='long'),
> ? type='exit'
> )
>
> out <- try(applyStrategy(strategy=strat , portfolios=strat.name, verbose=TRUE))
> getTxns(Portfolio=strat.name, Symbol=stock.str)
> getPortfolio(strat.name)$summary
> dummy <- updatePortf(Portfolio=strat.name,
> ? Dates=paste('::',as.Date(Sys.time()),sep='')
> )
>
> pdf("quantstrat2_position_sizing_fixed.pdf")
> chart.Posn(Portfolio=strat.name,Symbol=stock.str)
> add_SMA(n=50 , on=1,col='blue',lwd=2)
> add_SMA(n=200, on=1,col='red',lwd=2)
>
> ### output ###
> [1] "SPY"
> [1] "2002-04-24 SPY 100 @ 91.9933301492183"
> [1] "2002-04-29 SPY -100 @ 89.8492574695683"
> [1] "2002-04-30 SPY 100 @ 90.6900702851173"
> [1] "2002-05-14 SPY -100 @ 92.674388529813"
> [1] "2003-05-12 SPY 100 @ 81.1354076349475"
> [1] "2004-08-25 SPY -100 @ 96.8566013672453"
> [1] "2004-10-27 SPY 100 @ 98.8180303441752"
> [1] "2006-07-25 SPY -100 @ 114.662711057191"
> [1] "2006-08-29 SPY 100 @ 118.211406993905"
> [1] "2007-12-28 SPY -100 @ 137.165700378348"
> [1] "2009-06-18 SPY 100 @ 88.5716570825431"
> [1] "2010-07-06 SPY -100 @ 100.84667390332"
> [1] "2010-10-15 SPY 100 @ 116.002709490181"
> ? ? ? ? ? ? ? ? ? Txn.Qty Txn.Price Txn.Fees ?Txn.Value Txn.Avg.Cost
> 2000-12-30 19:00:00 ? ? ? 0 ? 0.00000 ? ? ? ?0 ? ? ?0.000 ? ? ?0.00000
> 2002-04-24 00:00:00 ? ? 100 ?91.99333 ? ? ? ?0 ? 9199.333 ? ? 91.99333
> 2002-04-29 00:00:00 ? ?-100 ?89.84926 ? ? ? ?0 ?-8984.926 ? ? 89.84926
> 2002-04-30 00:00:00 ? ? 100 ?90.69007 ? ? ? ?0 ? 9069.007 ? ? 90.69007
> 2002-05-14 00:00:00 ? ?-100 ?92.67439 ? ? ? ?0 ?-9267.439 ? ? 92.67439
> 2003-05-12 00:00:00 ? ? 100 ?81.13541 ? ? ? ?0 ? 8113.541 ? ? 81.13541
> 2004-08-25 00:00:00 ? ?-100 ?96.85660 ? ? ? ?0 ?-9685.660 ? ? 96.85660
> 2004-10-27 00:00:00 ? ? 100 ?98.81803 ? ? ? ?0 ? 9881.803 ? ? 98.81803
> 2006-07-25 00:00:00 ? ?-100 114.66271 ? ? ? ?0 -11466.271 ? ?114.66271
> 2006-08-29 00:00:00 ? ? 100 118.21141 ? ? ? ?0 ?11821.141 ? ?118.21141
> 2007-12-28 00:00:00 ? ?-100 137.16570 ? ? ? ?0 -13716.570 ? ?137.16570
> 2009-06-18 00:00:00 ? ? 100 ?88.57166 ? ? ? ?0 ? 8857.166 ? ? 88.57166
> 2010-07-06 00:00:00 ? ?-100 100.84667 ? ? ? ?0 -10084.667 ? ?100.84667
> 2010-10-15 00:00:00 ? ? 100 116.00271 ? ? ? ?0 ?11600.271 ? ?116.00271
> ? ? ? ? ? ? ? ? ? Net.Txn.Realized.PL
> 2000-12-30 19:00:00 ? ? ? ? ? ? ?0.0000
> 2002-04-24 00:00:00 ? ? ? ? ? ? ?0.0000
> 2002-04-29 00:00:00 ? ? ? ? ? -214.4073
> 2002-04-30 00:00:00 ? ? ? ? ? ? ?0.0000
> 2002-05-14 00:00:00 ? ? ? ? ? ?198.4318
> 2003-05-12 00:00:00 ? ? ? ? ? ? ?0.0000
> 2004-08-25 00:00:00 ? ? ? ? ? 1572.1194
> 2004-10-27 00:00:00 ? ? ? ? ? ? ?0.0000
> 2006-07-25 00:00:00 ? ? ? ? ? 1584.4681
> 2006-08-29 00:00:00 ? ? ? ? ? ? ?0.0000
> 2007-12-28 00:00:00 ? ? ? ? ? 1895.4293
> 2009-06-18 00:00:00 ? ? ? ? ? ? ?0.0000
> 2010-07-06 00:00:00 ? ? ? ? ? 1227.5017
> 2010-10-15 00:00:00 ? ? ? ? ? ? ?0.0000
> ? ? ? ? ? ? ? ? ? Long.Value Short.Value Net.Value Gross.Value Realized.PL
> 2000-12-30 19:00:00 ? ? ? ? ?0 ? ? ? ? ? 0 ? ? ? ? 0 ? ? ? ? ? 0 ? ? ? ? ? 0
> ? ? ? ? ? ? ? ? ? Unrealized.PL Gross.Trading.PL Txn.Fees Net.Trading.PL
> 2000-12-30 19:00:00 ? ? ? ? ? ? 0 ? ? ? ? ? ? ? ?0 ? ? ? ?0 ? ? ? ? ? ? ?0
>
>
> ### sessioninfo()###
>> sessionInfo()
> R version 2.14.2 (2012-02-29)
> Platform: x86_64-unknown-linux-gnu (64-bit)
>
> locale:
> ?[1] LC_CTYPE=en_US.UTF-8 ? ? ? LC_NUMERIC=C
> ?[3] LC_TIME=en_US.UTF-8 ? ? ? ?LC_COLLATE=en_US.UTF-8
> ?[5] LC_MONETARY=en_US.UTF-8 ? ?LC_MESSAGES=en_US.UTF-8
> ?[7] LC_PAPER=C ? ? ? ? ? ? ? ? LC_NAME=C
> ?[9] LC_ADDRESS=C ? ? ? ? ? ? ? LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>
> attached base packages:
> [1] graphics ?grDevices utils ? ? datasets ?stats ? ? methods ? base
>
> other attached packages:
> ?[1] PerformanceAnalytics_1.0.4.4 quantstrat_0.6.4
> ?[3] blotter_0.8.4 ? ? ? ? ? ? ? ?FinancialInstrument_0.13.6
> ?[5] RPostgreSQL_0.3-2 ? ? ? ? ? ?DBI_0.2-5
> ?[7] quantmod_0.3-17 ? ? ? ? ? ? ?TTR_0.21-1
> ?[9] Defaults_1.1-1 ? ? ? ? ? ? ? xts_0.8-6
> [11] zoo_1.7-7
>
> loaded via a namespace (and not attached):
> [1] grid_2.14.2 ? ?lattice_0.20-0


From ccquant at gmail.com  Fri May 11 04:36:56 2012
From: ccquant at gmail.com (Ben quant)
Date: Thu, 10 May 2012 20:36:56 -0600
Subject: [R-SIG-Finance] quantmod, determine if ADR
Message-ID: <CAG2PC+fN788AO2wbG3sjwqeCsbf8W4OyQihFGvpQGx6oUNumqA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120510/9f9b0077/attachment.pl>

From johanna.slomp at gmail.com  Fri May 11 13:52:56 2012
From: johanna.slomp at gmail.com (Johanna Slomp)
Date: Fri, 11 May 2012 13:52:56 +0200
Subject: [R-SIG-Finance] power ewma
Message-ID: <CAJeDcBkTLK_to+g-9-SiePUq39AZxgThSv6cv1x-wa76J9tf0A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120511/c3e72f55/attachment.pl>

From omerle at laposte.net  Fri May 11 15:03:39 2012
From: omerle at laposte.net (omerle)
Date: Fri, 11 May 2012 15:03:39 +0200
Subject: [R-SIG-Finance] IBrokers - reqOpenOrders and placeOrder not working
 anymore
Message-ID: <1872225319.581556.1336741419502.JavaMail.www@wwinf8222>

Dear All,

First thanks to Jeff Ryan for the very interesting IBrokers package.

After looking for answers on Rseek without success, your are my last hope !

Here is my problem :

placeOrder & reqOpenOrders don't work on my trading accout but its working on my demo 
account !

For instance when I do

reqOpenOrders(twsconn) or IBrokers:::.reqOpenOrders(twsconn)
=> I get only the error message 53 (OPEN_ORDER_END) even if I have open order in my 
console.

OR

placeOrder
=> it doesnt do anything

=> But I can get TWS real time quotes or accountUpdate

(I think it was ok before at least for placeOrder)

I set the same parameter in configurationAPIs for both my demo account and trading account 
but trading account is still not working.

Do you have any idea what I did wrong and how I can use both placeOrder and reqOpenOrders 
?



Many Thanks,

Olivier Merle

Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
Je cr?e ma bo?te mail www.laposte.net


From matt at considine.net  Fri May 11 18:29:36 2012
From: matt at considine.net (matt at considine.net)
Date: Fri, 11 May 2012 11:29:36 -0500
Subject: [R-SIG-Finance] Q re: running the Workshop 2010 script
Message-ID: <20120511112936.18335rtv6isjp30g@webmail.considine.net>

I suspect I am overlooking something pretty straightforward, but for  
the life of me can't figure out what it is.  Apologies in advance if  
the answer should be obvious to me...

I am trying to run the 2010 Workshop script found here :
    
https://r-forge.r-project.org/scm/viewvc.php/pkg/PortfolioAnalytics/sandbox/script.workshop2010.R?view=markup&revision=1673&root=returnanalytics

but am getting this error as I step through it :
> table = as.matrix(ES(indexes[,1:4], weights=rep(1/4,4),  
> portfolio_method="component", p=(1-1/12))$pct_contrib_MES)

Error in ES(indexes[, 1:4], weights = rep(1/4, 4), portfolio_method =  
"component",  :
   could not find function "operES.CornishFisher.portfolio"

Now, I understand what that means.  Thinking that I was using a  
too-recent version of the code, I checked out and installed rev 1844  
(as an example), but got the same error.  When I look at the NAMESPACE  
file, I see that this is supposed to be an un-exported function.

My question is - how do I get this function recognized?  I really  
doubt it involves tinkering with the code itself, so I'm thinking that  
I have overlooked something pretty straightforward in my invoking
   library(PerformanceAnalytics)
   library(PortfolioAnalytics)

I am running R 2.14.2 on Windows (and dealing with doSNOW rather than  
doMC, though that's not relevant on this issue) and sessionInfo is  
below my sig.

I realize that the authors have a lot to do with this year's workshop,  
so any help - and patience in replying - would be greatly appreciated.

Regards,
Matt

> sessionInfo()
R version 2.14.2 (2012-02-29)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252
[2] LC_CTYPE=English_United States.1252
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

attached base packages:
[1] splines   stats     graphics  grDevices utils     datasets
[7] methods   base

other attached packages:
  [1] PApages_0.2                  sn_0.4-17
  [3] mnormt_1.4-5                 Hmisc_3.9-3
  [5] survival_2.36-14             gtools_2.6.2
  [7] FactorAnalytics_0.3          robustbase_0.8-1-1
  [9] TTR_0.21-1                   DEoptim_2.2-0
[11] PortfolioAnalytics_0.6.1     PerformanceAnalytics_1.0.3.3
[13] xts_0.8-6                    zoo_1.7-7

loaded via a namespace (and not attached):
[1] cluster_1.14.2 grid_2.14.2    lattice_0.20-6 tools_2.14.2
>


From gsee000 at gmail.com  Sat May 12 00:26:12 2012
From: gsee000 at gmail.com (G See)
Date: Fri, 11 May 2012 17:26:12 -0500
Subject: [R-SIG-Finance] IBrokers - reqOpenOrders and placeOrder not
 working anymore
In-Reply-To: <1872225319.581556.1336741419502.JavaMail.www@wwinf8222>
References: <1872225319.581556.1336741419502.JavaMail.www@wwinf8222>
Message-ID: <CA+xi=qbn5PU3MNwY9OZgaN=r2A6JyPA+03aG=CGXzDxpR9+P+w@mail.gmail.com>

FWIW, I have the opposite problem.  When connected with a live account, I see:

> tws <- twsConnect()
> tws$nextValidId
[1] "1"

But, with the demo account, the account number is being stored in nextValidId:

> tws <- twsConnect()
> tws$nextValidId
[1] "DU123456"

# But, I changed the actual account number

Best,
Garrett

On Fri, May 11, 2012 at 8:03 AM, omerle <omerle at laposte.net> wrote:
> Dear All,
>
> First thanks to Jeff Ryan for the very interesting IBrokers package.
>
> After looking for answers on Rseek without success, your are my last hope !
>
> Here is my problem :
>
> placeOrder & reqOpenOrders don't work on my trading accout but its working on my demo
> account !
>
> For instance when I do
>
> reqOpenOrders(twsconn) or IBrokers:::.reqOpenOrders(twsconn)
> => I get only the error message 53 (OPEN_ORDER_END) even if I have open order in my
> console.
>
> OR
>
> placeOrder
> => it doesnt do anything
>
> => But I can get TWS real time quotes or accountUpdate
>
> (I think it was ok before at least for placeOrder)
>
> I set the same parameter in configurationAPIs for both my demo account and trading account
> but trading account is still not working.
>
> Do you have any idea what I did wrong and how I can use both placeOrder and reqOpenOrders
> ?
>
>
>
> Many Thanks,
>
> Olivier Merle
>
> Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
> Je cr?e ma bo?te mail www.laposte.net
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Sat May 12 00:39:06 2012
From: gsee000 at gmail.com (G See)
Date: Fri, 11 May 2012 17:39:06 -0500
Subject: [R-SIG-Finance] IBrokers - reqOpenOrders and placeOrder not
 working anymore
In-Reply-To: <CA+xi=qbn5PU3MNwY9OZgaN=r2A6JyPA+03aG=CGXzDxpR9+P+w@mail.gmail.com>
References: <1872225319.581556.1336741419502.JavaMail.www@wwinf8222>
	<CA+xi=qbn5PU3MNwY9OZgaN=r2A6JyPA+03aG=CGXzDxpR9+P+w@mail.gmail.com>
Message-ID: <CA+xi=qZnrYAhGK_4gY9EAxq3zwB9wfAyNgLWPbhom-vB6D9Osg@mail.gmail.com>

Oops. I was on an old revision.  After updating to the version in the
repo (http://code.google.com/p/ibrokers), all is well.

Garrett

On Fri, May 11, 2012 at 5:26 PM, G See <gsee000 at gmail.com> wrote:
> FWIW, I have the opposite problem. ?When connected with a live account, I see:
>
>> tws <- twsConnect()
>> tws$nextValidId
> [1] "1"
>
> But, with the demo account, the account number is being stored in nextValidId:
>
>> tws <- twsConnect()
>> tws$nextValidId
> [1] "DU123456"
>
> # But, I changed the actual account number
>
> Best,
> Garrett
>
> On Fri, May 11, 2012 at 8:03 AM, omerle <omerle at laposte.net> wrote:
>> Dear All,
>>
>> First thanks to Jeff Ryan for the very interesting IBrokers package.
>>
>> After looking for answers on Rseek without success, your are my last hope !
>>
>> Here is my problem :
>>
>> placeOrder & reqOpenOrders don't work on my trading accout but its working on my demo
>> account !
>>
>> For instance when I do
>>
>> reqOpenOrders(twsconn) or IBrokers:::.reqOpenOrders(twsconn)
>> => I get only the error message 53 (OPEN_ORDER_END) even if I have open order in my
>> console.
>>
>> OR
>>
>> placeOrder
>> => it doesnt do anything
>>
>> => But I can get TWS real time quotes or accountUpdate
>>
>> (I think it was ok before at least for placeOrder)
>>
>> I set the same parameter in configurationAPIs for both my demo account and trading account
>> but trading account is still not working.
>>
>> Do you have any idea what I did wrong and how I can use both placeOrder and reqOpenOrders
>> ?
>>
>>
>>
>> Many Thanks,
>>
>> Olivier Merle
>>
>> Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
>> Je cr?e ma bo?te mail www.laposte.net
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.


From jeff.a.ryan at gmail.com  Sat May 12 04:37:01 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Fri, 11 May 2012 21:37:01 -0500
Subject: [R-SIG-Finance] IBrokers - reqOpenOrders and placeOrder not
	working anymore
In-Reply-To: <CA+xi=qbn5PU3MNwY9OZgaN=r2A6JyPA+03aG=CGXzDxpR9+P+w@mail.gmail.com>
References: <1872225319.581556.1336741419502.JavaMail.www@wwinf8222>
	<CA+xi=qbn5PU3MNwY9OZgaN=r2A6JyPA+03aG=CGXzDxpR9+P+w@mail.gmail.com>
Message-ID: <1F6F5F36-0FC5-44F6-BF9C-3C39D58EBCE2@gmail.com>

Try updating to the newest googlecode version.  A change in IB response. 

Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On May 11, 2012, at 5:26 PM, G See <gsee000 at gmail.com> wrote:

> FWIW, I have the opposite problem.  When connected with a live account, I see:
> 
>> tws <- twsConnect()
>> tws$nextValidId
> [1] "1"
> 
> But, with the demo account, the account number is being stored in nextValidId:
> 
>> tws <- twsConnect()
>> tws$nextValidId
> [1] "DU123456"
> 
> # But, I changed the actual account number
> 
> Best,
> Garrett
> 
> On Fri, May 11, 2012 at 8:03 AM, omerle <omerle at laposte.net> wrote:
>> Dear All,
>> 
>> First thanks to Jeff Ryan for the very interesting IBrokers package.
>> 
>> After looking for answers on Rseek without success, your are my last hope !
>> 
>> Here is my problem :
>> 
>> placeOrder & reqOpenOrders don't work on my trading accout but its working on my demo
>> account !
>> 
>> For instance when I do
>> 
>> reqOpenOrders(twsconn) or IBrokers:::.reqOpenOrders(twsconn)
>> => I get only the error message 53 (OPEN_ORDER_END) even if I have open order in my
>> console.
>> 
>> OR
>> 
>> placeOrder
>> => it doesnt do anything
>> 
>> => But I can get TWS real time quotes or accountUpdate
>> 
>> (I think it was ok before at least for placeOrder)
>> 
>> I set the same parameter in configurationAPIs for both my demo account and trading account
>> but trading account is still not working.
>> 
>> Do you have any idea what I did wrong and how I can use both placeOrder and reqOpenOrders
>> ?
>> 
>> 
>> 
>> Many Thanks,
>> 
>> Olivier Merle
>> 
>> Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
>> Je cr?e ma bo?te mail www.laposte.net
>> 
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From student.northwestern at gmail.com  Sat May 12 11:25:10 2012
From: student.northwestern at gmail.com (Jim Green)
Date: Sat, 12 May 2012 05:25:10 -0400
Subject: [R-SIG-Finance] moving averages on specific interval and merge
In-Reply-To: <CACAe89zn8L+vVjuRk_ChG-ZBcPv_XhWyddXLp9o+NNz664C0jg@mail.gmail.com>
References: <CACAe89zn8L+vVjuRk_ChG-ZBcPv_XhWyddXLp9o+NNz664C0jg@mail.gmail.com>
Message-ID: <CACAe89zQZ4N5_rWu=e3KiPfckDRCO+DbZWgoYz_7C2p1aW=0qw@mail.gmail.com>

the question is more of r-help on second thought. I'll post on r-help. sorry.

Jim.

On 10 May 2012 21:11, Jim Green <student.northwestern at gmail.com> wrote:
> Greetings!
>
> I am using quantstrat and xts to do some intraday work and come up
> with this problem. the xts object temp in the following example is
> attached as and rda file.
>
>> head(temp)
> ? ? ? ? ? ? ? ? ? ?A.Open A.High ?A.Low A.Close A.Volume
> 2012-02-01 08:29:00 ?42.47 ?43.76 41.410 ? 43.76 ? ? 2071
> 2012-02-01 09:30:00 ?43.38 ?43.38 42.970 ? 43.15 ? ?40300
> 2012-02-01 09:31:00 ?43.14 ?43.28 43.130 ? 43.28 ? ?14990
> 2012-02-01 09:32:00 ?43.27 ?43.37 43.270 ? 43.37 ? ? 3300
> 2012-02-01 09:33:00 ?43.37 ?43.50 43.370 ? 43.48 ? ? 3056
> 2012-02-01 09:34:00 ?43.49 ?43.50 43.396 ? 43.44 ? ?10968
>
>> tail(temp)
> ? ? ? ? ? ? ? ? ? ? A.Open ?A.High ? A.Low A.Close A.Volume
> 2012-03-27 16:07:00 45.6650 45.6650 45.6650 45.6650 ? ? ?170
> 2012-03-27 16:08:00 45.6710 45.6710 45.6710 45.6710 ? ? ?474
> 2012-03-27 16:10:00 45.9131 45.9131 45.9131 45.9131 ? ? 1800
> 2012-03-27 16:13:00 45.6952 45.6952 45.6952 45.6952 ? ? ?300
> 2012-03-27 16:15:00 45.9368 45.9368 45.9368 45.9368 ? ? ?791
> 2012-03-27 16:21:00 45.7000 45.7000 45.7000 45.7000 ? ?22000
>
>
> I would like to calculate moving averages of minute volume for
> specific interval and merge with the original minute ohlc data.
>
> take 09:40:00 for example, calculate the average previous 10 days
> volume between 09:39:00 to 09:40:00 and merge with exiting data.
>
> ultimately I want to get an xts object with columns
>
> Open ? High ? Low ? Close ? Volume ? Average.Volume.at.current.interval
> 2012-03-27 16:07:00 45.6650 45.6650 45.6650 45.6650 ? ? ?170 ? 177
> 2012-03-27 16:08:00 45.6710 45.6710 45.6710 45.6710 ? ? ?474 ?500
> ...
> ...
> ..
> 2012-03-27 16:21:00 45.7000 45.7000 45.7000 45.7000 ? ?22000 1000
>
> any pointers are appreciated!
>
> Jim.


From wotuzu17 at gmail.com  Sat May 12 14:02:43 2012
From: wotuzu17 at gmail.com (Andreas Voellenklee)
Date: Sat, 12 May 2012 14:02:43 +0200
Subject: [R-SIG-Finance] moving averages on specific interval and merge
In-Reply-To: <CACAe89zQZ4N5_rWu=e3KiPfckDRCO+DbZWgoYz_7C2p1aW=0qw@mail.gmail.com>
References: <CACAe89zn8L+vVjuRk_ChG-ZBcPv_XhWyddXLp9o+NNz664C0jg@mail.gmail.com>
	<CACAe89zQZ4N5_rWu=e3KiPfckDRCO+DbZWgoYz_7C2p1aW=0qw@mail.gmail.com>
Message-ID: <CAKC0BhmfrqYxGPOZX4+Y8TVh9gvYPtLfQg9Y3mTNjSioiSTjXg@mail.gmail.com>

Hi,

try this:

require ("TTR")
volumeSMA <- SMA(temp[,"A.Volume"], n=10)
colnames(volumeSMA) <- c("Volume.at.current.interval")
ultimateXTS <- cbind(temp, volumeSMA)

Andreas


2012/5/12 Jim Green <student.northwestern at gmail.com>:
> the question is more of r-help on second thought. I'll post on r-help. sorry.
>
> Jim.
>
> On 10 May 2012 21:11, Jim Green <student.northwestern at gmail.com> wrote:
>> Greetings!
>>
>> I am using quantstrat and xts to do some intraday work and come up
>> with this problem. the xts object temp in the following example is
>> attached as and rda file.
>>
>>> head(temp)
>> ? ? ? ? ? ? ? ? ? ?A.Open A.High ?A.Low A.Close A.Volume
>> 2012-02-01 08:29:00 ?42.47 ?43.76 41.410 ? 43.76 ? ? 2071
>> 2012-02-01 09:30:00 ?43.38 ?43.38 42.970 ? 43.15 ? ?40300
>> 2012-02-01 09:31:00 ?43.14 ?43.28 43.130 ? 43.28 ? ?14990
>> 2012-02-01 09:32:00 ?43.27 ?43.37 43.270 ? 43.37 ? ? 3300
>> 2012-02-01 09:33:00 ?43.37 ?43.50 43.370 ? 43.48 ? ? 3056
>> 2012-02-01 09:34:00 ?43.49 ?43.50 43.396 ? 43.44 ? ?10968
>>
>>> tail(temp)
>> ? ? ? ? ? ? ? ? ? ? A.Open ?A.High ? A.Low A.Close A.Volume
>> 2012-03-27 16:07:00 45.6650 45.6650 45.6650 45.6650 ? ? ?170
>> 2012-03-27 16:08:00 45.6710 45.6710 45.6710 45.6710 ? ? ?474
>> 2012-03-27 16:10:00 45.9131 45.9131 45.9131 45.9131 ? ? 1800
>> 2012-03-27 16:13:00 45.6952 45.6952 45.6952 45.6952 ? ? ?300
>> 2012-03-27 16:15:00 45.9368 45.9368 45.9368 45.9368 ? ? ?791
>> 2012-03-27 16:21:00 45.7000 45.7000 45.7000 45.7000 ? ?22000
>>
>>
>> I would like to calculate moving averages of minute volume for
>> specific interval and merge with the original minute ohlc data.
>>
>> take 09:40:00 for example, calculate the average previous 10 days
>> volume between 09:39:00 to 09:40:00 and merge with exiting data.
>>
>> ultimately I want to get an xts object with columns
>>
>> Open ? High ? Low ? Close ? Volume ? Average.Volume.at.current.interval
>> 2012-03-27 16:07:00 45.6650 45.6650 45.6650 45.6650 ? ? ?170 ? 177
>> 2012-03-27 16:08:00 45.6710 45.6710 45.6710 45.6710 ? ? ?474 ?500
>> ...
>> ...
>> ..
>> 2012-03-27 16:21:00 45.7000 45.7000 45.7000 45.7000 ? ?22000 1000
>>
>> any pointers are appreciated!
>>
>> Jim.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From josh.m.ulrich at gmail.com  Sat May 12 18:50:03 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sat, 12 May 2012 11:50:03 -0500
Subject: [R-SIG-Finance] What does mean MidTau in Nelson-Siegel's model?
In-Reply-To: <1336587449581-4621294.post@n4.nabble.com>
References: <1336587449581-4621294.post@n4.nabble.com>
Message-ID: <CAPPM_gSaKjp0DSiLQUzmLb8+NbfKZUEVurnVjvk3TqttnpUG1w@mail.gmail.com>

On Wed, May 9, 2012 at 1:17 PM, Minerva Mora <mimode_14 at hotmail.com> wrote:
> Hi!
>
> I apologize for my english.
> I'm working with the YieldCurve package in the estimation of the
> Nelson-Siegel parameters. In this model, the arguments are: rate, maturity
> and MidTau.
>
> I don?t have problem with the rate and maturity, but i can?t understand the
> MidTau, because the argument is: MidTau ------> vector which indicates
> medium term maturity to maximize the beta_2 factor
>
> My questions are:
> 1) What does mean medium term maturity int the MidTau? What does is this
> argument for?

MidTau is the maturity at which the Nelson Siegel estimated yield
curve will have the greatest amount of curvature.

> 2) How many datas in the vector are good to obtain a good estimation? If i
> have 77 datas of maturity. I asked this beacuse i sow in my several testing
> that the results of the parameters changes if a put more datas or if i
> remove datas from this vector, but sometimes the results doesn?t change.

I would guess that there are outliers on the dates where changing the
amount of data you use causes changes in the estimated parameters.
Also note that the model is over-specified for certain curves (if the
yield curve is approximately linear, for example), which would cause
the estimates to be very sensitive to changes in data.

> 3)If my maturity datas are since 0.03 months to 323 months, Which is the
> best or the theorical month data to start in the vector of the midTau?
>
This depends on the range of maturities at which the greatest amount
of curvature occurs.  If you look at YieldCurve::Nelson.Siegel, you'll
see this code:

    a1 <- mean(c(MidTau[1], MidTau[2]))
    a2 <- mean(c(MidTau[1], MidTau[3]))
    a3 <- mean(c(MidTau[2], MidTau[3]))
    lambdaValues <- c(MidTau, a1, a2, a3)

The optimization will then try all those lambdaValues and use the one
that provides the best fit.  So you need to look at the data you are
using for estimation and determine an appropriate range for MidTau.
Note that you must provide at least 3 values for MidTau, but you can
use as many values as you would like (more values will also mean
longer optimization times).

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com


From gsee000 at gmail.com  Sat May 12 18:54:36 2012
From: gsee000 at gmail.com (G See)
Date: Sat, 12 May 2012 11:54:36 -0500
Subject: [R-SIG-Finance] moving averages on specific interval and merge
In-Reply-To: <CACAe89zn8L+vVjuRk_ChG-ZBcPv_XhWyddXLp9o+NNz664C0jg@mail.gmail.com>
References: <CACAe89zn8L+vVjuRk_ChG-ZBcPv_XhWyddXLp9o+NNz664C0jg@mail.gmail.com>
Message-ID: <CA+xi=qbt2EPJCYF+WwKhe=2z1ToOtBurCH6YhBY6hr7+dUemXQ@mail.gmail.com>

Hi Jim,

We prefer if you share with us what you tried and what you've done to
attempt to solve the problem yourself.  Anyway here's one way to
start.

library(quantmod) # for the Vo function as well as xts and zoo
load("~/Downloads/a.rda")
CalcMinuteVolume <- function(x) {
    # This function will calculate the average of the volume for a given minute
    #of every day
    mvolm <- aggregate(Vo(x), format(index(x), "%H:%M"), mean)
    xts(coredata(mvolm), as.POSIXct(paste(as.Date(end(x)), index(mvolm)),
        format="%Y-%m-%d %H:%M"))
}
dtemp <- to.daily(temp)
index(dtemp) <- as.Date(index(dtemp)) # in case you have an old version of xts
# make strings to use to subset the data by 10 day periods
subsets <- rollapplyr(index(dtemp), 10, function(x)
                        paste0(first(x), "/", last(x)))
out <- lapply(subsets, function(ss) {
    CalcMinuteVolume(temp[ss])
})
names(out) <- index(dtemp)[-c(1:9)] # days 1:9 were burned to calculate 1st mean
# Now you have a list of days. e.g.
out[["2012-02-15"]]
# Now merge
temp$Average.Volume.at.current.interval <- do.call(rbind, out)
temp
########################################

Things to consider:
- You almost certainly want to throw a lag in there.
- You have a different number of rows for different days.

Also, see ?agrregate.zoo or ?tapply, ?rollapply, ?period.apply, and ?do.call

HTH,
Garrett


On Thu, May 10, 2012 at 8:11 PM, Jim Green
<student.northwestern at gmail.com> wrote:
> Greetings!
>
> I am using quantstrat and xts to do some intraday work and come up
> with this problem. the xts object temp in the following example is
> attached as and rda file.
>
>> head(temp)
> ? ? ? ? ? ? ? ? ? ?A.Open A.High ?A.Low A.Close A.Volume
> 2012-02-01 08:29:00 ?42.47 ?43.76 41.410 ? 43.76 ? ? 2071
> 2012-02-01 09:30:00 ?43.38 ?43.38 42.970 ? 43.15 ? ?40300
> 2012-02-01 09:31:00 ?43.14 ?43.28 43.130 ? 43.28 ? ?14990
> 2012-02-01 09:32:00 ?43.27 ?43.37 43.270 ? 43.37 ? ? 3300
> 2012-02-01 09:33:00 ?43.37 ?43.50 43.370 ? 43.48 ? ? 3056
> 2012-02-01 09:34:00 ?43.49 ?43.50 43.396 ? 43.44 ? ?10968
>
>> tail(temp)
> ? ? ? ? ? ? ? ? ? ? A.Open ?A.High ? A.Low A.Close A.Volume
> 2012-03-27 16:07:00 45.6650 45.6650 45.6650 45.6650 ? ? ?170
> 2012-03-27 16:08:00 45.6710 45.6710 45.6710 45.6710 ? ? ?474
> 2012-03-27 16:10:00 45.9131 45.9131 45.9131 45.9131 ? ? 1800
> 2012-03-27 16:13:00 45.6952 45.6952 45.6952 45.6952 ? ? ?300
> 2012-03-27 16:15:00 45.9368 45.9368 45.9368 45.9368 ? ? ?791
> 2012-03-27 16:21:00 45.7000 45.7000 45.7000 45.7000 ? ?22000
>
>
> I would like to calculate moving averages of minute volume for
> specific interval and merge with the original minute ohlc data.
>
> take 09:40:00 for example, calculate the average previous 10 days
> volume between 09:39:00 to 09:40:00 and merge with exiting data.
>
> ultimately I want to get an xts object with columns
>
> Open ? High ? Low ? Close ? Volume ? Average.Volume.at.current.interval
> 2012-03-27 16:07:00 45.6650 45.6650 45.6650 45.6650 ? ? ?170 ? 177
> 2012-03-27 16:08:00 45.6710 45.6710 45.6710 45.6710 ? ? ?474 ?500
> ...
> ...
> ..
> 2012-03-27 16:21:00 45.7000 45.7000 45.7000 45.7000 ? ?22000 1000
>
> any pointers are appreciated!
>
> Jim.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From ccquant at gmail.com  Sat May 12 19:56:36 2012
From: ccquant at gmail.com (Ben quant)
Date: Sat, 12 May 2012 11:56:36 -0600
Subject: [R-SIG-Finance] quantmod, determine if ADR
In-Reply-To: <CAG2PC+fN788AO2wbG3sjwqeCsbf8W4OyQihFGvpQGx6oUNumqA@mail.gmail.com>
References: <CAG2PC+fN788AO2wbG3sjwqeCsbf8W4OyQihFGvpQGx6oUNumqA@mail.gmail.com>
Message-ID: <CAG2PC+c8J++FO70dR6vFQmCNrYtdfAWZu+9uT603=qeaF8gDmg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120512/bbd754dd/attachment.pl>

From josh.m.ulrich at gmail.com  Sat May 12 20:56:31 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sat, 12 May 2012 13:56:31 -0500
Subject: [R-SIG-Finance] quantmod, determine if ADR
In-Reply-To: <CAG2PC+c8J++FO70dR6vFQmCNrYtdfAWZu+9uT603=qeaF8gDmg@mail.gmail.com>
References: <CAG2PC+fN788AO2wbG3sjwqeCsbf8W4OyQihFGvpQGx6oUNumqA@mail.gmail.com>
	<CAG2PC+c8J++FO70dR6vFQmCNrYtdfAWZu+9uT603=qeaF8gDmg@mail.gmail.com>
Message-ID: <CAPPM_gSbHccN7s5Xg1TLq+MsccqjNBNjZ6ZacNW95Lk19uxTaA@mail.gmail.com>

On Sat, May 12, 2012 at 12:56 PM, Ben quant <ccquant at gmail.com> wrote:
> Can anyone help with this? Reposting because I didn't get a reply last
> time... ?See below.
>
You posted this only yesterday.  Please allow a few days for someone
to reply before reposting / bumping.  Also note that a large portion
of the R-SIG-Finance community has been at the R/Finance conference
yesterday and today.

> thanks!
> Ben
>

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com


> On Thu, May 10, 2012 at 8:36 PM, Ben quant <ccquant at gmail.com> wrote:
>
>> Hello,
>>
>> Using R (probably quantmod), does anyone know how to determine if a ticker
>> trades as an ADR? Also, is there a way to determine what currency the
>> financials will be quoted in when using ?getFinancials() and
>> viewFinancials()?
>>
>> For example, TLK is an ADR and the tickers financials are quoted in
>> non-USD units.
>>
>> Thanks,
>>
>> ben
>>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From algotr8der at gmail.com  Sat May 12 23:45:39 2012
From: algotr8der at gmail.com (algotr8der)
Date: Sat, 12 May 2012 14:45:39 -0700 (PDT)
Subject: [R-SIG-Finance] quanstrat rule to exit same day close (using daily
	data)
Message-ID: <1336859139913-4629612.post@n4.nabble.com>

I am trying to backtest a strategy that requires an exit on the close (same
day as the entry).  I have searched through Rmetrics and stackoverflow and
found the following post:

http://stackoverflow.com/questions/10441614/quantstrat-in-r-setting-a-date-based-exit-signal

Brian Peterson said the following:

>quantstrat, as described in the manual, is a signals-based framework. It is
not designed for filters based trades really.

>You could do what you want by using the delay argument to your exit rule.
Set the delay to be one day, and the prefer
argument to prefer a different price column.

>I'm not going to write it for you, but that is enough information to solve
your problem.

Now this was a solution to exit at a future time stamp. I want to exit the
*same* day (I am using daily data for my test) which is why I'm not sure if
setting a delay really works for what I want to do. Is this at all possible?

Appreciate the direction.


--
View this message in context: http://r.789695.n4.nabble.com/quanstrat-rule-to-exit-same-day-close-using-daily-data-tp4629612.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jan at opentrades.nl  Sun May 13 21:46:42 2012
From: jan at opentrades.nl (OpenTrades)
Date: Sun, 13 May 2012 21:46:42 +0200
Subject: [R-SIG-Finance] quanstrat rule to exit same day close (using
 daily data)
In-Reply-To: <1336859139913-4629612.post@n4.nabble.com>
References: <1336859139913-4629612.post@n4.nabble.com>
Message-ID: <4FB00FA2.4040302@opentrades.nl>

In quantstrat, if your have a signal on bar t, the rule will be executed 
at bar t+1. In your case, this means that the order will be added for 
the next day.

Use the 'prefer'-argument to specify which of next day's rates (open, 
low, high, close) you want to use.


On 12-05-12 23:45, algotr8der wrote:
> I am trying to backtest a strategy that requires an exit on the close (same
> day as the entry).  I have searched through Rmetrics and stackoverflow and
> found the following post:
>
> http://stackoverflow.com/questions/10441614/quantstrat-in-r-setting-a-date-based-exit-signal
>
> Brian Peterson said the following:
>
>> quantstrat, as described in the manual, is a signals-based framework. It is
> not designed for filters based trades really.
>
>> You could do what you want by using the delay argument to your exit rule.
> Set the delay to be one day, and the prefer
> argument to prefer a different price column.
>
>> I'm not going to write it for you, but that is enough information to solve
> your problem.
>
> Now this was a solution to exit at a future time stamp. I want to exit the
> *same* day (I am using daily data for my test) which is why I'm not sure if
> setting a delay really works for what I want to do. Is this at all possible?
>
> Appreciate the direction.
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/quanstrat-rule-to-exit-same-day-close-using-daily-data-tp4629612.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


-- 
Jan Humme - OpenTrades

WWW:     http://www.opentrades.nl
Email:   jan at opentrades dot nl
Twitter: @opentrades


From algotr8der at gmail.com  Sun May 13 21:55:56 2012
From: algotr8der at gmail.com (s p)
Date: Sun, 13 May 2012 15:55:56 -0400
Subject: [R-SIG-Finance] quanstrat rule to exit same day close (using
 daily data)
In-Reply-To: <4FB00FA2.4040302@opentrades.nl>
References: <1336859139913-4629612.post@n4.nabble.com>
	<4FB00FA2.4040302@opentrades.nl>
Message-ID: <CAFVSEbzpX7HrY-AsRZeGjfnVSRujJPYdQhG=t4oG+g025pwhhA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120513/1c2a82af/attachment.pl>

From gsee000 at gmail.com  Sun May 13 22:02:07 2012
From: gsee000 at gmail.com (G See)
Date: Sun, 13 May 2012 15:02:07 -0500
Subject: [R-SIG-Finance] quanstrat rule to exit same day close (using
 daily data)
In-Reply-To: <CAFVSEbzpX7HrY-AsRZeGjfnVSRujJPYdQhG=t4oG+g025pwhhA@mail.gmail.com>
References: <1336859139913-4629612.post@n4.nabble.com>
	<4FB00FA2.4040302@opentrades.nl>
	<CAFVSEbzpX7HrY-AsRZeGjfnVSRujJPYdQhG=t4oG+g025pwhhA@mail.gmail.com>
Message-ID: <CA+xi=qbrjZs9Zxh9=BTKLOHh+FcEH0PEnvCXfjJR0608T+1eDg@mail.gmail.com>

Extending on what Jan said, perhaps you could add a "PrevClose" column
to your data and use prefer='PrevClose'

Garrett

On Sun, May 13, 2012 at 2:55 PM, s p <algotr8der at gmail.com> wrote:
> okay so that means I can't use quantstrat for strategies where the entry
> and exit are on the same bar (in this case daily bar).
>
> I can do this in blotter - which I guess is fine.
>
> Thanks for the feedback.
>
> On Sun, May 13, 2012 at 3:46 PM, OpenTrades <jan at opentrades.nl> wrote:
>
>> In quantstrat, if your have a signal on bar t, the rule will be executed
>> at bar t+1. In your case, this means that the order will be added for the
>> next day.
>>
>> Use the 'prefer'-argument to specify which of next day's rates (open, low,
>> high, close) you want to use.
>>
>>
>>


From brian at braverock.com  Sun May 13 22:20:32 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 13 May 2012 15:20:32 -0500
Subject: [R-SIG-Finance] quanstrat rule to exit same day close (using
 daily data)
In-Reply-To: <CAFVSEbzpX7HrY-AsRZeGjfnVSRujJPYdQhG=t4oG+g025pwhhA@mail.gmail.com>
References: <1336859139913-4629612.post@n4.nabble.com>
	<4FB00FA2.4040302@opentrades.nl>
	<CAFVSEbzpX7HrY-AsRZeGjfnVSRujJPYdQhG=t4oG+g025pwhhA@mail.gmail.com>
Message-ID: <1336940432.1999.4.camel@brian-desktop>

On Sun, 2012-05-13 at 15:55 -0400, s p wrote:
> okay so that means I can't use quantstrat for strategies where the
> entry and exit are on the same bar (in this case daily bar).

Sure you can, if the signal is on the same observation.  

I'm not sure how realistic a backtest of market on open and market on
close is going to be, of course, because of slippage, but it should
'work' in quantstrat.

Your entry rule would use prefer='Open' and your exit rule would use
prefer='Close'. 

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From gsee000 at gmail.com  Sun May 13 22:46:22 2012
From: gsee000 at gmail.com (G See)
Date: Sun, 13 May 2012 15:46:22 -0500
Subject: [R-SIG-Finance] quanstrat rule to exit same day close (using
 daily data)
In-Reply-To: <1336940432.1999.4.camel@brian-desktop>
References: <1336859139913-4629612.post@n4.nabble.com>
	<4FB00FA2.4040302@opentrades.nl>
	<CAFVSEbzpX7HrY-AsRZeGjfnVSRujJPYdQhG=t4oG+g025pwhhA@mail.gmail.com>
	<1336940432.1999.4.camel@brian-desktop>
Message-ID: <CA+xi=qbExky29czmaW_PBW-yhD9SW0mNtT4hkHpBHYvNCsQ-VA@mail.gmail.com>

Brian,

I can't get that to work.  It used to be that exit orders would fire
before enter orders and if you did not have a position, they were
effectively not sent.

I tried to test this by making a tiny change to the maCross.R demo.  I
changed the second add.signal call so that it had
    relationship="gte"
just like the first add.signal call.  In other words, you should get
an enter and exit at the same time.  So, you should never have a
position.  Nevertheless,  you end up with a position of short 600
shares.  If that's not right, then I doubt that adding prefer="Open"
to one and prefer="Close" to the other will work.

Garrett
On Sun, May 13, 2012 at 3:20 PM, Brian G. Peterson <brian at braverock.com> wrote:
> On Sun, 2012-05-13 at 15:55 -0400, s p wrote:
>> okay so that means I can't use quantstrat for strategies where the
>> entry and exit are on the same bar (in this case daily bar).
>
> Sure you can, if the signal is on the same observation.
>
> I'm not sure how realistic a backtest of market on open and market on
> close is going to be, of course, because of slippage, but it should
> 'work' in quantstrat.
>
> Your entry rule would use prefer='Open' and your exit rule would use
> prefer='Close'.
>
> --
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From brian at braverock.com  Sun May 13 23:18:30 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 13 May 2012 16:18:30 -0500
Subject: [R-SIG-Finance] quanstrat rule to exit same day close (using
 daily data)
In-Reply-To: <CA+xi=qbExky29czmaW_PBW-yhD9SW0mNtT4hkHpBHYvNCsQ-VA@mail.gmail.com>
References: <1336859139913-4629612.post@n4.nabble.com>
	<4FB00FA2.4040302@opentrades.nl>
	<CAFVSEbzpX7HrY-AsRZeGjfnVSRujJPYdQhG=t4oG+g025pwhhA@mail.gmail.com>
	<1336940432.1999.4.camel@brian-desktop>
	<CA+xi=qbExky29czmaW_PBW-yhD9SW0mNtT4hkHpBHYvNCsQ-VA@mail.gmail.com>
Message-ID: <1336943910.1999.9.camel@brian-desktop>

Garrett is correct, sorry, I'm still a little sleep-deprived from
R/Finance.  

Rule execution order is discussed in the documentation for add.rule, and
'enter' rules are processed last.

I wonder if we should consider moving 'rebalance' rules to the end of
the order, or adding a exit rule type that is specifically evaluated
after entry rules.   The code change would be trivial, as that is
processed in a switch statement.


On Sun, 2012-05-13 at 15:46 -0500, G See wrote:
> Brian,
> 
> I can't get that to work.  It used to be that exit orders would fire
> before enter orders and if you did not have a position, they were
> effectively not sent.
> 
> I tried to test this by making a tiny change to the maCross.R demo.  I
> changed the second add.signal call so that it had
>     relationship="gte"
> just like the first add.signal call.  In other words, you should get
> an enter and exit at the same time.  So, you should never have a
> position.  Nevertheless,  you end up with a position of short 600
> shares.  If that's not right, then I doubt that adding prefer="Open"
> to one and prefer="Close" to the other will work.
> 
> Garrett
> On Sun, May 13, 2012 at 3:20 PM, Brian G. Peterson <brian at braverock.com> wrote:
> > On Sun, 2012-05-13 at 15:55 -0400, s p wrote:
> >> okay so that means I can't use quantstrat for strategies where the
> >> entry and exit are on the same bar (in this case daily bar).
> >
> > Sure you can, if the signal is on the same observation.
> >
> > I'm not sure how realistic a backtest of market on open and market on
> > close is going to be, of course, because of slippage, but it should
> > 'work' in quantstrat.
> >
> > Your entry rule would use prefer='Open' and your exit rule would use
> > prefer='Close'.
> >
> > --
> > Brian G. Peterson
> > http://braverock.com/brian/
> > Ph: 773-459-4973
> > IM: bgpbraverock
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions should go.
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From harrisonmark1 at gmail.com  Mon May 14 06:14:45 2012
From: harrisonmark1 at gmail.com (Mark Harrison)
Date: Sun, 13 May 2012 23:14:45 -0500
Subject: [R-SIG-Finance] Linux and IBrokers
Message-ID: <CAHFhaq_8qP-aWb2-M7-FxjSW_iF5om4tc1mLsOMTU0jiYVgWdQ@mail.gmail.com>

I am having some trouble getting the IBrokers, TWS, and TWS API
running in linux.

I have a dual boot system running 64Bit Windows 7 and xubuntu 12.04.
I installed Oracle Java v7, TWS, and the TWS API.? I have an IBJts
directory off my home dir and I unpacked both the TWS and TWS API into
this directory.

I put the TWS start command into a small script and can run it, log
into TWS, and see everything working as it should - i.e. quotes show,
positions show, etc.

For the R I am running RStudio 95.265 and R 2.14.1.

I can connect to TWS from R & RStudio and but some of the commands
work some of the time while listening for messages tends to produce
errors every time.? I am running the same script in Windows as in
Linux and everything works in Windows.

This is running against the paper account.

# Session Info

R version 2.14.1 (2011-12-22)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=C                 LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] graphics  grDevices utils     datasets  stats     methods   base

other attached packages:
 [1] blotter_0.8.8              twsInstrument_1.4-3
 [3] IBrokers_0.9-3             qmao_1.2.4
 [5] FinancialInstrument_0.14.4 quantmod_0.3-18
 [7] TTR_0.21-1                 Defaults_1.1-1
 [9] xts_0.8-7                  zoo_1.7-7

loaded via a namespace (and not attached):
[1] grid_2.14.1    lattice_0.20-0 tools_2.14.1

# connect to IB TWS
tws <- twsConnect()

# Check Connection
isConnected(tws)

# Response from IB
[1] TRUE

# set symbol and build contract
symbol <- c("GC")
contract <- buildIBcontract(twsFUT(symbol, "NYMEX", '201206'))

# Response from IB
Connected with clientId 100.
Request complete: GC FUT USD.
Disconnected.

# Request ID, build Order
id <- reqIds(tws)
ord <- twsOrder(id, action = 'BUY', totalQuantity = '1', orderType = 'MKT')

# Place Order  - Sometimes the order goes through but most times nothing happens
placeOrder(tws, contract, ord)


# Listen for messages - this fails all the time
myWrapper <- eWrapper()
waiting <- TRUE
while (waiting) {

con <- tws[[1]]
socketSelect(list(con), FALSE, NULL)
curMsg <- readBin(con, character(), 1)

if (curMsg == .twsIncomingMSG$EXECUTION_DATA) {
  header <- readBin(con, character(), 25)
  waiting <- FALSE
} else
  processMsg(curMsg, con, myWrapper, format(Sys.time(),timestamp), file)
}


From krisanharia at gmail.com  Mon May 14 11:12:36 2012
From: krisanharia at gmail.com (krisan haria)
Date: Mon, 14 May 2012 10:12:36 +0100
Subject: [R-SIG-Finance] 1 minute time interval in Bloomberg
Message-ID: <CALHdMsWCdRU-sHWU=Tmr=o_wQ7Zei8DwwK3bQ5P2YDPJp+F+EQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120514/0fbd05c9/attachment.pl>

From matt at considine.net  Mon May 14 16:37:02 2012
From: matt at considine.net (matt at considine.net)
Date: Mon, 14 May 2012 09:37:02 -0500
Subject: [R-SIG-Finance] Q re: running Workshop 2010 script
Message-ID: <20120514093702.10811mb9g3w5bp1c@webmail.considine.net>

Invoking
   PerformanceAnalytics:::operES.CornishFisher.portfolio
gets me to it ...

Matt


From john.laing at gmail.com  Mon May 14 19:17:38 2012
From: john.laing at gmail.com (John Laing)
Date: Mon, 14 May 2012 13:17:38 -0400
Subject: [R-SIG-Finance] 1 minute time interval in Bloomberg
In-Reply-To: <CALHdMsWCdRU-sHWU=Tmr=o_wQ7Zei8DwwK3bQ5P2YDPJp+F+EQ@mail.gmail.com>
References: <CALHdMsWCdRU-sHWU=Tmr=o_wQ7Zei8DwwK3bQ5P2YDPJp+F+EQ@mail.gmail.com>
Message-ID: <CAA3Wa=sbM56rzpGROKW0Dve2W4dKQip=jZKY0tL-pRC1mhi-EA@mail.gmail.com>

Krisan,

I'm not aware of a way to get time periods back that have no data
associated. But this makes sense: what would you expect Bloomberg to
show you for OHLC in minutes when there were no trades?

You could get the set of all dates and diff it with the dates you
actually got back:
all.mins <- seq(as.POSIXct("2012-03-21 09:00:00"),
as.POSIXct("2012-03-21 15:00:00"), "1 min")
data.mins <- as.POSIXct(t_bar1$time, format = "%Y-%m-%dT%H:%M:%S")
missing.mins <- as.POSIXct(setdiff(all.mins, data.mins), origin =
as.Date("1970-01-01"))

What you do from there is up to you.

John


On Mon, May 14, 2012 at 5:12 AM, krisan haria <krisanharia at gmail.com> wrote:
> Hi
>
> I am trying to get data (open,high,low close) in 1 minute time intervals
> from Bloomberg.
>
> Currently I have the following
>
> library(RBloomberg)
> conn=blpConnect()
> t_bar1= bar(conn, "IUSA IM Equity", "TRADE", "2012-03-21 09:00:00.000",
> "2012-03-21 15:00:00.000", "1")
>
> head(t_ob1)
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? time ? ?open ? ?high ? ? low
> close numEvents volume
> 2012-03-21T09:01:00.000 2012-03-21T09:01:00.000 10.5825 10.5875 10.5825
> 10.5875 ? ? ? ? 2 ? ?295
> 2012-03-21T09:05:00.000 2012-03-21T09:05:00.000 10.5850 10.5850 10.5850
> 10.5850 ? ? ? ? 1 ? 3000
> 2012-03-21T09:07:00.000 2012-03-21T09:07:00.000 10.5850 10.5850 10.5850
> 10.5850 ? ? ? ? 1 ? 1352
> 2012-03-21T09:11:00.000 2012-03-21T09:11:00.000 10.5875 10.5875 10.5875
> 10.5875 ? ? ? ? 1 ? 3465
> 2012-03-21T09:18:00.000 2012-03-21T09:18:00.000 10.5850 10.5850 10.5850
> 10.5850 ? ? ? ? 1 ? 1314
> 2012-03-21T09:23:00.000 2012-03-21T09:23:00.000 10.5800 10.5800 10.5800
> 10.5800 ? ? ? ? 1 ? ?400
>
>
> As you can see, it only seems to get the data for when there was a trade.
> How do I get this data for the whole day inlcuding the 1 minute intervals
> when there were no trades
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From cedrickjohnson at me.com  Mon May 14 20:48:33 2012
From: cedrickjohnson at me.com (Cedrick Johnson)
Date: Mon, 14 May 2012 13:48:33 -0500
Subject: [R-SIG-Finance] Enhancements to getSymbols.MySQL
Message-ID: <4FB15381.4090803@me.com>

Hello-

Was upgrading my version of quantmod locally to the latest version on 
r-forge and noticed that there's a couple things that could be 
"improved" in the getSymbols.R file...

starting at line 418:

"getSymbols.MySQL" <- function(Symbols,env,return.class='xts', 
                      db.fields=c('date','o','h','l','c','v','a'), 
                          field.names = NULL, 
     user=NULL,password=NULL,dbname=NULL,...) {

is missing the ability to specify a remote host and port. Here's my fix 
(lines 418-422):

"getSymbols.MySQL" <- function(Symbols,env,return.class='xts', 
                      db.fields=c('date','o','h','l','c','v','a'), 
                          field.names = NULL, 
     user=NULL,password=NULL,dbname=NULL, 
host='localhost',port=3306,...) {

further down on line 443:

con <- dbConnect(MySQL(),user=user,password=password,dbname=dbname)

should be:

con <- 
dbConnect(MySQL(),user=user,password=password,dbname=dbname,host=host, 
port=port)

This fix enables me to specify (using setDefaults) hosts and port, as 
shown below:

setDefaults(getSymbols.MySQL, user="wee", password="wee", host="myhost", 
port=3306, dbname="histdata")

As it stands now, the setDefaults block above will generate a warning 
message:
?port? was not set, possibly not a formal arg for ?getSymbols.MySQL?
?host? was not set, possibly not a formal arg for ?getSymbols.MySQL?


Thanks,
CJ


From David.Reiner at xrtrading.com  Mon May 14 21:10:44 2012
From: David.Reiner at xrtrading.com (David Reiner)
Date: Mon, 14 May 2012 14:10:44 -0500
Subject: [R-SIG-Finance] [SPAM] - Re: 1 minute time interval in
 Bloomberg - Email found in subject
In-Reply-To: <CAA3Wa=sbM56rzpGROKW0Dve2W4dKQip=jZKY0tL-pRC1mhi-EA@mail.gmail.com>
References: <CALHdMsWCdRU-sHWU=Tmr=o_wQ7Zei8DwwK3bQ5P2YDPJp+F+EQ@mail.gmail.com>
	<CAA3Wa=sbM56rzpGROKW0Dve2W4dKQip=jZKY0tL-pRC1mhi-EA@mail.gmail.com>
Message-ID: <9DE405308A6AA24AA794B76282C6C00F0DEEE687C7@HQ-POST1>

My workaround would be similar to this, but the OP perhaps knows of the optional arguments available in the Bloomberg API
that allow one to specify how empty periods should be treated (e.g., previous value, nil.)
See pp. 115-116 in the API Version 3.x Developer's Guide (2041121.pdf).
It would be nice if these optional arguments were exposed in RBloomberg.
(If they are in fact exposed somewhere but not in the bars() function, perhaps a pointer to the relevant place would be helpful.)
HTH,
-- David


-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of John Laing
Sent: Monday, May 14, 2012 12:18 PM
To: krisan haria
Cc: r-sig-finance at r-project.org
Subject: [SPAM] - Re: [R-SIG-Finance] 1 minute time interval in Bloomberg - Email found in subject

Krisan,

I'm not aware of a way to get time periods back that have no data
associated. But this makes sense: what would you expect Bloomberg to
show you for OHLC in minutes when there were no trades?

You could get the set of all dates and diff it with the dates you
actually got back:
all.mins <- seq(as.POSIXct("2012-03-21 09:00:00"),
as.POSIXct("2012-03-21 15:00:00"), "1 min")
data.mins <- as.POSIXct(t_bar1$time, format = "%Y-%m-%dT%H:%M:%S")
missing.mins <- as.POSIXct(setdiff(all.mins, data.mins), origin =
as.Date("1970-01-01"))

What you do from there is up to you.

John


On Mon, May 14, 2012 at 5:12 AM, krisan haria <krisanharia at gmail.com> wrote:
> Hi
>
> I am trying to get data (open,high,low close) in 1 minute time intervals
> from Bloomberg.
>
> Currently I have the following
>
> library(RBloomberg)
> conn=blpConnect()
> t_bar1= bar(conn, "IUSA IM Equity", "TRADE", "2012-03-21 09:00:00.000",
> "2012-03-21 15:00:00.000", "1")
>
> head(t_ob1)
>                                           time    open    high     low
> close numEvents volume
> 2012-03-21T09:01:00.000 2012-03-21T09:01:00.000 10.5825 10.5875 10.5825
> 10.5875         2    295
> 2012-03-21T09:05:00.000 2012-03-21T09:05:00.000 10.5850 10.5850 10.5850
> 10.5850         1   3000
> 2012-03-21T09:07:00.000 2012-03-21T09:07:00.000 10.5850 10.5850 10.5850
> 10.5850         1   1352
> 2012-03-21T09:11:00.000 2012-03-21T09:11:00.000 10.5875 10.5875 10.5875
> 10.5875         1   3465
> 2012-03-21T09:18:00.000 2012-03-21T09:18:00.000 10.5850 10.5850 10.5850
> 10.5850         1   1314
> 2012-03-21T09:23:00.000 2012-03-21T09:23:00.000 10.5800 10.5800 10.5800
> 10.5800         1    400
>
>
> As you can see, it only seems to get the data for when there was a trade.
> How do I get this data for the whole day inlcuding the 1 minute intervals
> when there were no trades
>
>        [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


This e-mail and any materials attached hereto, including, without limitation, all content hereof and thereof (collectively, "XR Content") are confidential and proprietary to XR Trading, LLC ("XR") and/or its affiliates, and are protected by intellectual property laws.  Without the prior written consent of XR, the XR Content may not (i) be disclosed to any third party or (ii) be reproduced or otherwise used by anyone other than current employees of XR or its affiliates, on behalf of XR or its affiliates.

THE XR CONTENT IS PROVIDED AS IS, WITHOUT REPRESENTATIONS OR WARRANTIES OF ANY KIND.  TO THE MAXIMUM EXTENT PERMISSIBLE UNDER APPLICABLE LAW, XR HEREBY DISCLAIMS ANY AND ALL WARRANTIES, EXPRESS AND IMPLIED, RELATING TO THE XR CONTENT, AND NEITHER XR NOR ANY OF ITS AFFILIATES SHALL IN ANY EVENT BE LIABLE FOR ANY DAMAGES OF ANY NATURE WHATSOEVER, INCLUDING, BUT NOT LIMITED TO, DIRECT, INDIRECT, CONSEQUENTIAL, SPECIAL AND PUNITIVE DAMAGES, LOSS OF PROFITS AND TRADING LOSSES, RESULTING FROM ANY PERSON'S USE OR RELIANCE UPON, OR INABILITY TO USE, ANY XR CONTENT, EVEN IF XR IS ADVISED OF THE POSSIBILITY OF SUCH DAMAGES OR IF SUCH DAMAGES WERE FORESEEABLE.


From David.Reiner at xrtrading.com  Mon May 14 21:43:49 2012
From: David.Reiner at xrtrading.com (David Reiner)
Date: Mon, 14 May 2012 14:43:49 -0500
Subject: [R-SIG-Finance] [SPAM] - Re: [SPAM] - Re: 1 minute time
 interval in Bloomberg - Email found in subject - Email found in subject
In-Reply-To: <9DE405308A6AA24AA794B76282C6C00F0DEEE687C7@HQ-POST1>
References: <CALHdMsWCdRU-sHWU=Tmr=o_wQ7Zei8DwwK3bQ5P2YDPJp+F+EQ@mail.gmail.com><CAA3Wa=sbM56rzpGROKW0Dve2W4dKQip=jZKY0tL-pRC1mhi-EA@mail.gmail.com>
	<9DE405308A6AA24AA794B76282C6C00F0DEEE687C7@HQ-POST1>
Message-ID: <9DE405308A6AA24AA794B76282C6C00F0DEEE687D1@HQ-POST1>

Sorry for the noise and wrong page number.
It would have seemed that the parameter to set would be "gapFillInitialBar", but this fills only the first bar (if empty) with the previous values (and 0 volume).
So I guess Bloomberg doesn't provide this through the 3.x API; however, it is available through the Excel API. Go figure.

-- David


-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of David Reiner
Sent: Monday, May 14, 2012 2:11 PM
To: John Laing; krisan haria
Cc: r-sig-finance at r-project.org
Subject: [SPAM] - Re: [R-SIG-Finance] [SPAM] - Re: 1 minute time interval in Bloomberg - Email found in subject - Email found in subject

My workaround would be similar to this, but the OP perhaps knows of the optional arguments available in the Bloomberg API
that allow one to specify how empty periods should be treated (e.g., previous value, nil.)
See pp. 115-116 in the API Version 3.x Developer's Guide (2041121.pdf).
It would be nice if these optional arguments were exposed in RBloomberg.
(If they are in fact exposed somewhere but not in the bars() function, perhaps a pointer to the relevant place would be helpful.)
HTH,
-- David


-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of John Laing
Sent: Monday, May 14, 2012 12:18 PM
To: krisan haria
Cc: r-sig-finance at r-project.org
Subject: [SPAM] - Re: [R-SIG-Finance] 1 minute time interval in Bloomberg - Email found in subject

Krisan,

I'm not aware of a way to get time periods back that have no data
associated. But this makes sense: what would you expect Bloomberg to
show you for OHLC in minutes when there were no trades?

You could get the set of all dates and diff it with the dates you
actually got back:
all.mins <- seq(as.POSIXct("2012-03-21 09:00:00"),
as.POSIXct("2012-03-21 15:00:00"), "1 min")
data.mins <- as.POSIXct(t_bar1$time, format = "%Y-%m-%dT%H:%M:%S")
missing.mins <- as.POSIXct(setdiff(all.mins, data.mins), origin =
as.Date("1970-01-01"))

What you do from there is up to you.

John


On Mon, May 14, 2012 at 5:12 AM, krisan haria <krisanharia at gmail.com> wrote:
> Hi
>
> I am trying to get data (open,high,low close) in 1 minute time intervals
> from Bloomberg.
>
> Currently I have the following
>
> library(RBloomberg)
> conn=blpConnect()
> t_bar1= bar(conn, "IUSA IM Equity", "TRADE", "2012-03-21 09:00:00.000",
> "2012-03-21 15:00:00.000", "1")
>
> head(t_ob1)
>                                           time    open    high     low
> close numEvents volume
> 2012-03-21T09:01:00.000 2012-03-21T09:01:00.000 10.5825 10.5875 10.5825
> 10.5875         2    295
> 2012-03-21T09:05:00.000 2012-03-21T09:05:00.000 10.5850 10.5850 10.5850
> 10.5850         1   3000
> 2012-03-21T09:07:00.000 2012-03-21T09:07:00.000 10.5850 10.5850 10.5850
> 10.5850         1   1352
> 2012-03-21T09:11:00.000 2012-03-21T09:11:00.000 10.5875 10.5875 10.5875
> 10.5875         1   3465
> 2012-03-21T09:18:00.000 2012-03-21T09:18:00.000 10.5850 10.5850 10.5850
> 10.5850         1   1314
> 2012-03-21T09:23:00.000 2012-03-21T09:23:00.000 10.5800 10.5800 10.5800
> 10.5800         1    400
>
>
> As you can see, it only seems to get the data for when there was a trade.
> How do I get this data for the whole day inlcuding the 1 minute intervals
> when there were no trades
>
>        [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


This e-mail and any materials attached hereto, including, without limitation, all content hereof and thereof (collectively, "XR Content") are confidential and proprietary to XR Trading, LLC ("XR") and/or its affiliates, and are protected by intellectual property laws.  Without the prior written consent of XR, the XR Content may not (i) be disclosed to any third party or (ii) be reproduced or otherwise used by anyone other than current employees of XR or its affiliates, on behalf of XR or its affiliates.

THE XR CONTENT IS PROVIDED AS IS, WITHOUT REPRESENTATIONS OR WARRANTIES OF ANY KIND.  TO THE MAXIMUM EXTENT PERMISSIBLE UNDER APPLICABLE LAW, XR HEREBY DISCLAIMS ANY AND ALL WARRANTIES, EXPRESS AND IMPLIED, RELATING TO THE XR CONTENT, AND NEITHER XR NOR ANY OF ITS AFFILIATES SHALL IN ANY EVENT BE LIABLE FOR ANY DAMAGES OF ANY NATURE WHATSOEVER, INCLUDING, BUT NOT LIMITED TO, DIRECT, INDIRECT, CONSEQUENTIAL, SPECIAL AND PUNITIVE DAMAGES, LOSS OF PROFITS AND TRADING LOSSES, RESULTING FROM ANY PERSON'S USE OR RELIANCE UPON, OR INABILITY TO USE, ANY XR CONTENT, EVEN IF XR IS ADVISED OF THE POSSIBILITY OF SUCH DAMAGES OR IF SUCH DAMAGES WERE FORESEEABLE.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From ccquant at gmail.com  Tue May 15 02:46:27 2012
From: ccquant at gmail.com (Ben quant)
Date: Mon, 14 May 2012 18:46:27 -0600
Subject: [R-SIG-Finance] determine google financials currency
Message-ID: <CAG2PC+f=B1-0_=JK=whFdi-ykwu7+Rg9c8VpdF3naOHm5TSTnA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120514/0ed303ad/attachment.pl>

From jeff.a.ryan at gmail.com  Tue May 15 06:54:46 2012
From: jeff.a.ryan at gmail.com (Jeffrey Ryan)
Date: Mon, 14 May 2012 23:54:46 -0500
Subject: [R-SIG-Finance] Enhancements to getSymbols.MySQL
In-Reply-To: <4FB15381.4090803@me.com>
Message-ID: <CBD6D147.3D8A6%jeff.a.ryan@gmail.com>

In R-forge version 578 now.

Thanks,
Jeff

On 5/14/12 1:48 PM, "Cedrick Johnson" <cedrickjohnson at me.com> wrote:

>Hello-
>
>Was upgrading my version of quantmod locally to the latest version on
>r-forge and noticed that there's a couple things that could be
>"improved" in the getSymbols.R file...
>
>starting at line 418:
>
>"getSymbols.MySQL" <- function(Symbols,env,return.class='xts',
>                      db.fields=c('date','o','h','l','c','v','a'),
>                          field.names = NULL,
>     user=NULL,password=NULL,dbname=NULL,...) {
>
>is missing the ability to specify a remote host and port. Here's my fix
>(lines 418-422):
>
>"getSymbols.MySQL" <- function(Symbols,env,return.class='xts',
>                      db.fields=c('date','o','h','l','c','v','a'),
>                          field.names = NULL,
>     user=NULL,password=NULL,dbname=NULL,
>host='localhost',port=3306,...) {
>
>further down on line 443:
>
>con <- dbConnect(MySQL(),user=user,password=password,dbname=dbname)
>
>should be:
>
>con <- 
>dbConnect(MySQL(),user=user,password=password,dbname=dbname,host=host,
>port=port)
>
>This fix enables me to specify (using setDefaults) hosts and port, as
>shown below:
>
>setDefaults(getSymbols.MySQL, user="wee", password="wee", host="myhost",
>port=3306, dbname="histdata")
>
>As it stands now, the setDefaults block above will generate a warning
>message:
>?port? was not set, possibly not a formal arg for ?getSymbols.MySQL?
>?host? was not set, possibly not a formal arg for ?getSymbols.MySQL?
>
>
>Thanks,
>CJ


From matthieu.stigler at gmail.com  Tue May 15 10:03:10 2012
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Tue, 15 May 2012 10:03:10 +0200
Subject: [R-SIG-Finance] self-fulfilling prophecies in financial study
In-Reply-To: <CANQSzRzz1NM7tb_qtfo65Vt1D4e+Mp=xOZm7VE7joU8VdAf0ug@mail.gmail.com>
References: <1336564913.51435.YahooMailNeo@web161303.mail.bf1.yahoo.com>	<CAL9ybL9hiVLnSt-yi9=CEfKDq7bYanJp6rN_TcWbZsDX_WC4ZA@mail.gmail.com>	<CANQSzRx+KqasyaEbDcxcuuzdSvXc0oNmjwM_90RoTtdq=YYrgw@mail.gmail.com>	<CAL9ybL9hng-A8CMjkNMYk568NHTUfiVMcmWPZKEXFTG_++AUFA@mail.gmail.com>
	<CANQSzRzz1NM7tb_qtfo65Vt1D4e+Mp=xOZm7VE7joU8VdAf0ug@mail.gmail.com>
Message-ID: <4FB20DBE.3070406@gmail.com>

Hi

A little bit late to answer this maybe...

You could take a completely different point of view, and study the 
effects of "self-fullfilling" prophecies on the dynamics of the price 
time series. The idea is that a self-fullfilling prophecy would induce 
over-reaction of the market, a sort of "trend following" behaviour. 
Translated this into time series properties, it can be interpreted as a 
change in the persistence of the time series, i.e. its auto-regressive 
coefficients, which becomes higher than 1.

This is actually what is done in the economic literature of for 
"bubbles", where bubbles are defined as an explosive behaviour of the 
series, i.e. a \rho >1. PCB Philips has recently worked on it and 
developed econometric tests very simple to implement in practice. We 
used this in a paper, where you can find an illustration (box 14.3) and 
few references:
http://www.fao.org/docrep/013/i2107e/i2107e14.pdf

Best

Matthieu

Le 09/05/2012 21:56, Nitish Ranjan a ?crit :
> Sometimes, there is and sometimes there is not, which is why I was trying
> to make a distinction between real informational reason versus simple index
> benchmarking. Netflix was a very well known stock before S&P discovered it.
> Some other stocks are not so (Xilinx?). One would expect the index effect
> to be stronger among the later.
>
> Similarly, size effect could also be driven by economic forces. Small firms
> have typically more options embedded in them. To give an example from real
> life, any kid born in America has a higher probability for being a
> billionaire than any 65 year old American, that is the option value. Size
> effect may have a similar mechanism at play. The other way size effect is
> work could be through demand side. Imagine having a billion dollars to
> invest within 3 months. One is more likely to look for large investment
> opportunities. That would generate a bias away from small stocks. This in
> turn would generate a size effect is returns. Turns out size effect
> continues to exist, despite the claims in
> http://schwert.ssb.rochester.edu/hbfech15.pdf paper. We still have the
> anomaly that equally weighted index outperforms a value weighted index.
>
> Regards
>
> On Wed, May 9, 2012 at 2:44 PM, Richard Herron
> <richard.c.herron at gmail.com>wrote:
>
>> I don't want to argue semantics, but for your examples there is a
>> real, underlying change.
>>
>> Inclusion in an index improves liquidity and information production
>> for the real reasons you discuss (e.g., increased trading by index
>> funds or an increase in capitalization that added the firm to the
>> index).
>>
>> For the size effect the only thing that changed was that some
>> researchers said "I think that small stocks earn an abnormal return,"
>> and the effect diminished. I consider this a "prophecy" because there
>> is no real underlying change, just an idea planted by academic
>> research.
>>
>> Richard Herron
>>
>>
>> On Wed, May 9, 2012 at 10:49 AM, Nitish Ranjan<nitish.ranjan at gmail.com>
>> wrote:
>>> Disappearance of size effect will not be an example of self fulfilling
>>> prophesy (it disappeared rather than become stronger).
>>>
>>> In the stock market, possible examples are:
>>>
>>> 1. Index inclusion effect in returns
>>> 2. The tendency of traders to put in trades early in the day or later in
>>> the day but not in the middle of the day.
>>> 3. Most dispersion in returns during the earnings month.
>>>
>>> The second part of the email asked about R code/test which will test
>> these
>>> effects for self fulfilling prophecy. The null for such test is "Are
>> there
>>> any economic reasons why we would see self fulfilling prophecies to
>> work."
>>> A general test is hard (probably impossible, see the following
>> discussion)
>>> since different economic(or psychological) factors shape each of these
>>> examples. But we can formulate hypotheses for each one of these examples
>>> and write tests.
>>>
>>> Let me take the example of index inclusion effect. It is well known that
>>> after included in an index such as S&P 500, a stock performs well. Why?
>> For
>>> one, there are many funds which are pegged to S&P 500 and many more which
>>> simply follow the index. Both these kind of funds will have demand for
>> the
>>> newly inducted stock. Both these kind of funds will begin to buy the
>> stock
>>> and
>>> move the prices up for the newly inducted stock. Since neither of these
>>> demands have any informational origins, we would expect the permanent
>>> impact to be small (close to zero) and a large temporary impact. See the
>>> survey paper http://www4.ncsu.edu/~rswarr/fm2006.pdf for further
>> discussion.
>>> Another channel via which the effect might play out is through new
>>> information production. It is very possible that index inclusion actually
>>> brings a stock to the forefront of investors and produces new research
>> for
>>> the stock which in turn should make the stock less volatile. A
>>> Campbell-Schiller type decomposition might help with matters here. You
>>> could also examine the actual production of information (number of news
>>> articles, analyst following, analyst dispersion etc). This line of
>>> reasoning suggests that we would see this effect most for stocks which
>> come
>>> from relative anonymity to being famous. We would observe less of this
>>> effect for stocks which were famous before inclusion in an index (such as
>>> netflix for SP500 and any stock in Dow 30). But including such
>>> informational channels involve careful examination of multitude of data
>>> sources and ruling out the alternates one by one. It also involves
>>> understanding the various forces at play (or institutional knowledge).
>>>
>>> Regards
>>>
>>> Nitish
>>>
>>> p.s.: I think it is borderline not appropriate discussion for this list,
>>> but since it asked for an R code it deserves some consideration.
>>>
>>>
>>> On Wed, May 9, 2012 at 9:04 AM, Richard Herron
>>> <richard.c.herron at gmail.com>wrote:
>>>
>>>> Is this an R question?
>>>>
>>>> Are you taking about anomalies that disappear after we discover them?
>> If we
>>>> discover an anomaly and it disappears, then we have to wonder if we
>> priced
>>>> it right before or after. See the size effect.
>>>>
>>>> http://schwert.ssb.rochester.edu/hbfech15.pdf
>>>>
>>>> Richard Herron
>>>>
>>>>
>>>> On Wed, May 9, 2012 at 8:01 AM, Wei-han Liu<weihanliu2002 at yahoo.com>
>>>> wrote:
>>>>
>>>>> Hi R users:
>>>>>
>>>>> There are some possible candidates of self-fulfilling prophecies in
>>>>> financial study.
>>>>>
>>>>> Could some people share some thoughts about the relevant theories,
>>>>> econometric tests, and R packages for implementation?
>>>>>
>>>>> Thanks for your attention and sharing.
>>>>>
>>>>> Wei-han
>>>>>         [[alternative HTML version deleted]]
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> R-SIG-Finance at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>> -- Also note that this is not the r-help list where general R
>> questions
>>>>> should go.
>>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions
>>>> should go.
>>>>
>>>
>>>
>>> --
>>> Have fun.
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
>


From johanna.slomp at gmail.com  Tue May 15 11:51:25 2012
From: johanna.slomp at gmail.com (Johanna Slomp)
Date: Tue, 15 May 2012 11:51:25 +0200
Subject: [R-SIG-Finance] Power EWMA with R
Message-ID: <CAJeDcBmbpN-t4pDdz85w18yNVnfpXYU2g=tEmYb18VaVFuHA8g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120515/50c2cb2f/attachment.pl>

From algotr8der at gmail.com  Tue May 15 18:45:30 2012
From: algotr8der at gmail.com (algotr8der)
Date: Tue, 15 May 2012 09:45:30 -0700 (PDT)
Subject: [R-SIG-Finance] quanstrat rule to exit same day close (using
	daily data)
In-Reply-To: <1336943910.1999.9.camel@brian-desktop>
References: <1336859139913-4629612.post@n4.nabble.com>
	<4FB00FA2.4040302@opentrades.nl>
	<CAFVSEbzpX7HrY-AsRZeGjfnVSRujJPYdQhG=t4oG+g025pwhhA@mail.gmail.com>
	<1336940432.1999.4.camel@brian-desktop>
	<CA+xi=qbExky29czmaW_PBW-yhD9SW0mNtT4hkHpBHYvNCsQ-VA@mail.gmail.com>
	<1336943910.1999.9.camel@brian-desktop>
Message-ID: <1337100330035-4630141.post@n4.nabble.com>

Hi Brian - I think that change would be desirable. Not sure what everyone in
your development team thinks. 

--
View this message in context: http://r.789695.n4.nabble.com/quanstrat-rule-to-exit-same-day-close-using-daily-data-tp4629612p4630141.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Tue May 15 19:02:49 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 15 May 2012 12:02:49 -0500
Subject: [R-SIG-Finance] quanstrat rule to exit same day close (using
 daily data)
In-Reply-To: <1337100330035-4630141.post@n4.nabble.com>
References: <1336859139913-4629612.post@n4.nabble.com>
	<4FB00FA2.4040302@opentrades.nl>
	<CAFVSEbzpX7HrY-AsRZeGjfnVSRujJPYdQhG=t4oG+g025pwhhA@mail.gmail.com>
	<1336940432.1999.4.camel@brian-desktop>
	<CA+xi=qbExky29czmaW_PBW-yhD9SW0mNtT4hkHpBHYvNCsQ-VA@mail.gmail.com>
	<1336943910.1999.9.camel@brian-desktop>
	<1337100330035-4630141.post@n4.nabble.com>
Message-ID: <1337101369.7442.33.camel@brian-rcg>



On Tue, 2012-05-15 at 09:45 -0700, algotr8der wrote:
> Hi Brian - I think that change would be desirable. Not sure what everyone in
> your development team thinks. 

OK, it's a one or two line change (order of rule execution) , I'll work
on it.

Jan Humme (opentrades) has a patch basically completed that will allow
multiple trades on the same bar, though things may of course happen 'out
of order' depending on the order of rule evaluation operations.

Regards,

   - Brian 

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From algotr8der at gmail.com  Tue May 15 21:43:57 2012
From: algotr8der at gmail.com (algotr8der)
Date: Tue, 15 May 2012 12:43:57 -0700 (PDT)
Subject: [R-SIG-Finance] blotter: updatePortf Error in call to updatePosPL
 when instrument has no price
Message-ID: <1337111037556-4630176.post@n4.nabble.com>

I am backtesting an intraday strategy (using daily bars) that trades a list
of equities. The system begins testing on 1999-05-13 but not every equity
has a price for that date because some of the names listed at some point in
the future (i.e. GOOG for example).

The problem is updatePortf  pukes when it finds a stock that does not have a
price.

Error in if (is.na(tmpPL$Prices[1])) { : argument is of length zero
In addition: Warning messages:
1: In .updatePosPL(Portfolio = pname, Symbol = as.character(symbol),  :
  no Prices available for AKAM in 1999-05-12 23:59:59::1999-05-13 23:59:59 :
using last available price and marking to 1999-05-13 23:59:59
2: In is.na(tmpPL$Prices[1]) :
  is.na() applied to non-(list or vector) of type 'NULL'
> traceback()
2: .updatePosPL(Portfolio = pname, Symbol = as.character(symbol),
       Dates = Dates, Prices = Prices, ... = ...)
1: updatePortf(portfolio, Dates = CurrentDate) at #25

This is exactly the same issue as that found here:

http://r.789695.n4.nabble.com/quantstrat-getting-an-error-when-using-many-symbols-and-based-order-sizing-function-td4398323.html#a4427842

I don't think its desirable to cut the testing period to the shortest date
range because some of the stocks listed at a future date. I'm afraid I don't
quite understand the logic behind why updatePortf  *needs* to get a price
for a stock that has no Txns. It makes sense to me if there was a valid Txn
then updatePortf needs a price to perform a daily mark but in this case
trading can't begin on the stock in question until at least the date with
the first price.

Anyone have any interesting ways to circumvent this problem? Appreciate the
feedback. Thank you very much. 

--
View this message in context: http://r.789695.n4.nabble.com/blotter-updatePortf-Error-in-call-to-updatePosPL-when-instrument-has-no-price-tp4630176.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Tue May 15 22:03:22 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 15 May 2012 15:03:22 -0500
Subject: [R-SIG-Finance] blotter: updatePortf Error in call to
 updatePosPL when instrument has no price
In-Reply-To: <1337111037556-4630176.post@n4.nabble.com>
References: <1337111037556-4630176.post@n4.nabble.com>
Message-ID: <1337112202.7442.47.camel@brian-rcg>

On Tue, 2012-05-15 at 12:43 -0700, algotr8der wrote:
> I don't think its desirable to cut the testing period to the shortest
> date range because some of the stocks listed at a future date. I'm
> afraid I don't quite understand the logic behind why updatePortf
> *needs* to get a price for a stock that has no Txns. It makes sense to
> me if there was a valid Txn then updatePortf needs a price to perform
> a daily mark but in this case trading can't begin on the stock in
> question until at least the date with the first price. 

The startDate on your *portfolio* and *account* need to be before the
first trade in any instrument.

You need to have market data for *at least one observation* before the
first trade in that instrument, so that we have something to mark
against.

I'm not aware of any restriction that you need data for all the same
dates/times, in fact, it was designed to not need this.  We pretty
routinely include contracts that expire in a larger portfolio, for
example.

This error:

  no Prices available for AKAM in 1999-05-12 23:59:59::1999-05-13
23:59:59 :
using last available price and marking to 1999-05-13 23:59:59

suggests that you have a position for AKAM.

There is one simplification in the code that I am aware of that might
cause something similar.  You could make it go away by putting the
symbol that has the longest time series *first* in your portfolio.

If that doesn't work, I can work with you off-list to try to find and
fix the problem.

Regards,

   - Brian 

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From elz0rr0 at yahoo.com  Wed May 16 01:04:40 2012
From: elz0rr0 at yahoo.com (Jorge Nieves)
Date: Tue, 15 May 2012 16:04:40 -0700 (PDT)
Subject: [R-SIG-Finance] Is there a bug in Return.calculate function of the
	PerformanceAnalytics package?
Message-ID: <1337123080.99616.YahooMailNeo@web114712.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120515/9ee00f08/attachment.pl>

From brian at braverock.com  Wed May 16 01:39:22 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 15 May 2012 18:39:22 -0500
Subject: [R-SIG-Finance] Is there a bug in Return.calculate function of
 the PerformanceAnalytics package?
In-Reply-To: <1337123080.99616.YahooMailNeo@web114712.mail.gq1.yahoo.com>
References: <1337123080.99616.YahooMailNeo@web114712.mail.gq1.yahoo.com>
Message-ID: <1337125162.5288.1.camel@brian-desktop>

Please try with the latest from R-Forge.  There was a bug in the CRAN
release that could cause this behavior under certain circumstances.

I cannot reproduce with current code.

Regards,

   - Brian

On Tue, 2012-05-15 at 16:04 -0700, Jorge Nieves wrote:
> Hi,
> 
> I am running an example from the "help" provided in the Performance Analytics package. I would like to compute the returns with the choice method="simple". However, the result is a column of ZEROS. I checked to see if my decimal places were set to zero, but that is not the case. The result is zero.
> 
> 
> When I change form "simple" to "compound" the function seems to work. 
> 
> 
> Am I missing something? or is it a bug?
> 
> Thanks 
> 
> 
> Jorge
> 
> 
> 
> Here is the example.
> 
> 
> 
> library(PerformanceAnalytics)
> 
> library(xts)
>  ## Not run:
> require(tseries)
> prices = get.hist.quote("IBM", start = "1999-01-01", end = "2007-01-01", quote = "AdjClose", compression = "d")
> 
> ## End(Not run)
> 
> R.IBM = Return.calculate(prices, method="simple")
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From junluke at gmail.com  Wed May 16 05:42:54 2012
From: junluke at gmail.com (junluke)
Date: Tue, 15 May 2012 20:42:54 -0700 (PDT)
Subject: [R-SIG-Finance] rmgarch arguments
In-Reply-To: <1336436015210-4616138.post@n4.nabble.com>
References: <1336436015210-4616138.post@n4.nabble.com>
Message-ID: <1337139774589-4630216.post@n4.nabble.com>

Hi, all, 

I am doing some simulation studies using rmgarch package. I am using the
"dccfit" to estimate the dynamic conditional correlation. 

After each estimation, the "dccfit" gives me the following messages:

Iter: 1 fn: 185.1321     Pars:  0.008106 0.871192
Iter: 2 fn: 185.1321     Pars:  0.008106 0.871190
solnp--> Completed in 2 iterations

I was wondering how to turn off this message in the "dccfit" function. Here
is my code:

uspec = ugarchspec(variance.model = list(garchOrder = c(1,1), model =
"sGARCH"),
   distribution.model = "norm")
spec1 = dccspec(uspec = multispec( replicate(2, uspec) ), dccOrder = c(1,1),
   asymmetric = FALSE, distribution = "mvnorm")
fit1 = dccfit(spec1, data = return[2:n,], fit.control = list(eval.se=FALSE))
rc1=rcor(fit1)

Many thanks!

Jun

--
View this message in context: http://r.789695.n4.nabble.com/copula-with-rmgarch-tp4616138p4630216.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Wed May 16 09:22:08 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Wed, 16 May 2012 08:22:08 +0100
Subject: [R-SIG-Finance] rmgarch arguments
In-Reply-To: <1337139774589-4630216.post@n4.nabble.com>
References: <1336436015210-4616138.post@n4.nabble.com>
	<1337139774589-4630216.post@n4.nabble.com>
Message-ID: <4FB355A0.4060109@4dscape.com>

The documentation on 'dccfit' states that the option 'solver.control'
provides a:
  "Control arguments list passed to optimizer".
The 'solnp' solver which is used as the default (which you can see by 
typing 'args(dccfit)' or inspecting the documentation) has a control 
parameter called 'trace' which from its documentation states:
"The value of the objective function and the parameters is printed at 
every major iteration (default 1)."
Therefore, setting the option solver.control=list(trace=0) should do the 
trick...all of which could be deduced by careful reading of the 
documentation.

-Alexios


On 16/05/2012 04:42, junluke wrote:
> Hi, all,
>
> I am doing some simulation studies using rmgarch package. I am using the
> "dccfit" to estimate the dynamic conditional correlation.
>
> After each estimation, the "dccfit" gives me the following messages:
>
> Iter: 1 fn: 185.1321     Pars:  0.008106 0.871192
> Iter: 2 fn: 185.1321     Pars:  0.008106 0.871190
> solnp-->  Completed in 2 iterations
>
> I was wondering how to turn off this message in the "dccfit" function. Here
> is my code:
>
> uspec = ugarchspec(variance.model = list(garchOrder = c(1,1), model =
> "sGARCH"),
>     distribution.model = "norm")
> spec1 = dccspec(uspec = multispec( replicate(2, uspec) ), dccOrder = c(1,1),
>     asymmetric = FALSE, distribution = "mvnorm")
> fit1 = dccfit(spec1, data = return[2:n,], fit.control = list(eval.se=FALSE))
> rc1=rcor(fit1)
>
> Many thanks!
>
> Jun
>
> --
> View this message in context: http://r.789695.n4.nabble.com/copula-with-rmgarch-tp4616138p4630216.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From gps at asu.edu  Wed May 16 17:39:30 2012
From: gps at asu.edu (Geoffrey Smith)
Date: Wed, 16 May 2012 08:39:30 -0700
Subject: [R-SIG-Finance] writing a loop
Message-ID: <CAGRravZhhFmR8Wg5ciXdNsEDzXU9e8gOK5pH83fsfyLpYvj9=A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120516/a81ca0db/attachment.pl>

From jan at opentrades.nl  Wed May 16 21:25:04 2012
From: jan at opentrades.nl (OpenTrades)
Date: Wed, 16 May 2012 21:25:04 +0200
Subject: [R-SIG-Finance] quanstrat rule to exit same day close (using
 daily data)
In-Reply-To: <1337101369.7442.33.camel@brian-rcg>
References: <1336859139913-4629612.post@n4.nabble.com>
	<4FB00FA2.4040302@opentrades.nl>
	<CAFVSEbzpX7HrY-AsRZeGjfnVSRujJPYdQhG=t4oG+g025pwhhA@mail.gmail.com>
	<1336940432.1999.4.camel@brian-desktop>
	<CA+xi=qbExky29czmaW_PBW-yhD9SW0mNtT4hkHpBHYvNCsQ-VA@mail.gmail.com>
	<1336943910.1999.9.camel@brian-desktop>
	<1337100330035-4630141.post@n4.nabble.com>
	<1337101369.7442.33.camel@brian-rcg>
Message-ID: <4FB3FF10.2070809@opentrades.nl>

Garrett,

On 15-05-12 19:02, Brian G. Peterson wrote:
>
> On Tue, 2012-05-15 at 09:45 -0700, algotr8der wrote:
>> Hi Brian - I think that change would be desirable. Not sure what everyone in
>> your development team thinks.
> OK, it's a one or two line change (order of rule execution) , I'll work
> on it.
>
> Jan Humme (opentrades) has a patch basically completed that will allow
> multiple trades on the same bar, though things may of course happen 'out
> of order' depending on the order of rule evaluation operations.

Yep, patch committed now, rev 1025. There was a problem with the new 
orderset feature (committed a couple of weeks ago), causing the 
enter-orders to be canceled.

This leaves us with the following situation:

=> if you use a hard-coded order position for the exit-order (eg, -100) 
this will still be ruthlessly followed; the order size will not be 
adjusted to match the (max) current position. As a result, you will end 
up with a -100 position after the first exit order gets executed. 
However with your modification (lt changed to gte) the enter order will 
be executed at the same bar, leaving you with a 0-position again.
> [1] "2001-06-26 AAPL -100 @ 11.88"
> [1] "2001-06-26 AAPL 100 @ 11.88"

=> if you use the 'all'-argument for the exit-order, the first 
exit-order will be skipped due to the 0-position, but the first 
enter-order (on the same bar) will be executed. In this case you end up 
with a 100-position, which will be exited and immediately entered again 
at the next bar that has a signal.

> [1] "2001-06-26 AAPL 100 @ 11.88"
> [1] "2002-01-04 AAPL -100 @ 11.85"
> [1] "2002-01-04 AAPL 100 @ 11.85"
> [1] "2003-05-15 AAPL -100 @ 9.36"
> [1] "2003-05-15 AAPL 100 @ 9.36"

Best regards,

-- 
Jan Humme - OpenTrades

WWW:     http://www.opentrades.nl
Email:   jan at opentrades.nl
Twitter: @opentrades


From rharlow86 at gmail.com  Wed May 16 22:23:36 2012
From: rharlow86 at gmail.com (Robert Harlow)
Date: Wed, 16 May 2012 16:23:36 -0400
Subject: [R-SIG-Finance] writing a loop
In-Reply-To: <CAGRravZhhFmR8Wg5ciXdNsEDzXU9e8gOK5pH83fsfyLpYvj9=A@mail.gmail.com>
References: <CAGRravZhhFmR8Wg5ciXdNsEDzXU9e8gOK5pH83fsfyLpYvj9=A@mail.gmail.com>
Message-ID: <CAHdfS97bn95auz1H7UcHF1Aqo1hOg1dOjJ+jV_M8C0fMO6xSEw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120516/35ed9d58/attachment.pl>

From jaimie.villanueva at gmail.com  Thu May 17 10:36:01 2012
From: jaimie.villanueva at gmail.com (jaimie villanueva)
Date: Thu, 17 May 2012 10:36:01 +0200
Subject: [R-SIG-Finance] About rugarch (message to alexios)
Message-ID: <CAEXmNQAqozo=N=BOcjoBpsb5BUp7-zUEe+Qdie7NoqU8FDuEZw@mail.gmail.com>

First, I apologize because i`m not an expert using R. I'm not sure to
understand you when you say "The rugarch provide an added layer of
abstraction on top of the code".
you mean that i can access to that added layer?

Second is : How can i look at the source code?

regards

Jaimie


From alexios at 4dscape.com  Thu May 17 11:01:40 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Thu, 17 May 2012 10:01:40 +0100
Subject: [R-SIG-Finance] About rugarch (message to alexios)
In-Reply-To: <CAEXmNQAqozo=N=BOcjoBpsb5BUp7-zUEe+Qdie7NoqU8FDuEZw@mail.gmail.com>
References: <CAEXmNQAqozo=N=BOcjoBpsb5BUp7-zUEe+Qdie7NoqU8FDuEZw@mail.gmail.com>
Message-ID: <4FB4BE74.9070506@4dscape.com>

Jaimie,
1. This is a mailing list so do not start a message by addressing it to 
one individual.
2. Following from 1, your message has no context for anyone but myself 
which defeats the purpose of posting to a mailing list.

Your original question was:

 > My question is in line with function "ugarchsim". With the package
 > "fGarch" to be sure about what the simulation function is doing, i
 > used to use a function call "debug" wich allows you to make a step by 
 > step analysis. To me it's usefull to understand, for example, how de 
 > variance of a garch process are calculated, or the innovations, how
 > they have been calculated. The main purpose is to ensure that
 > functions are doing what i really want. The debug function allows you 
 > to see the formulas and you can type any variable and returns it's
 > value.
 > But when i try to do the same with the function "ugarchsim",  i
 > can't. I can't get into the formula to see the process of
 > calculating."

I mentioned that the package uses S4 methods and classes which add a 
layer of abstraction on top of the code. If  you do not know what these 
are, there are many resources online to learn about R, S3, S4 etc. The 
same goes about how to source the code or see under the hood (it is OPEN 
SOURCE).

Regards,
Alexios


On 17/05/2012 09:36, jaimie villanueva wrote:
> First, I apologize because i`m not an expert using R. I'm not sure to
> understand you when you say "The rugarch provide an added layer of
> abstraction on top of the code".
> you mean that i can access to that added layer?
>
> Second is : How can i look at the source code?
>
> regards
>
> Jaimie
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From wotuzu17 at gmail.com  Thu May 17 14:01:08 2012
From: wotuzu17 at gmail.com (Andreas Voellenklee)
Date: Thu, 17 May 2012 14:01:08 +0200
Subject: [R-SIG-Finance] mark random rows of xts object
Message-ID: <CAKC0BhmB2m1S_QL9T9RNuSd9Tr_0y0VLRmnwnV9+P04P7ALopA@mail.gmail.com>

Hi,

To compare results of a trading system against a
random-entry-benchmark, I'm trying to program a function that marks
random 5% of bars of a xts object.

The result should be a xts object with the same indexes as the OHLCV
object and one column "random_entry" that contains boolean values.

I tried this without success:


# returns true in 5% of calls
random <- function() {runif(1,0,1) >= .95}

getSymbols("MMM")

> as.xts(apply(MMM, 1, random))
Fehler in FUN(newX[, i], ...) : unbenutzte(s) Argument(e) (newX[, i])


Thanks for your help,
Andreas


From brian at braverock.com  Thu May 17 14:10:25 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 17 May 2012 07:10:25 -0500
Subject: [R-SIG-Finance] mark random rows of xts object
In-Reply-To: <CAKC0BhmB2m1S_QL9T9RNuSd9Tr_0y0VLRmnwnV9+P04P7ALopA@mail.gmail.com>
References: <CAKC0BhmB2m1S_QL9T9RNuSd9Tr_0y0VLRmnwnV9+P04P7ALopA@mail.gmail.com>
Message-ID: <1337256625.18928.0.camel@brian-rcg>

On Thu, 2012-05-17 at 14:01 +0200, Andreas Voellenklee wrote:
> To compare results of a trading system against a
> random-entry-benchmark, I'm trying to program a function that marks
> random 5% of bars of a xts object.
> 
> The result should be a xts object with the same indexes as the OHLCV
> object and one column "random_entry" that contains boolean values. 

getSymbols('MMM')
MMM$random<-0
MMM$random[sample(1:nrow(MMM),round(nrow(MMM)/20),replace=FALSE),]<-1

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From alainb978 at gmail.com  Thu May 17 19:03:11 2012
From: alainb978 at gmail.com (Alain Burt)
Date: Thu, 17 May 2012 18:03:11 +0100
Subject: [R-SIG-Finance] IBrokers: issues with combo contracts
Message-ID: <CACBekgu_mJGKDg_twv2gRhrS7rVvusFmE4ZUXah7gMqSFG3LXQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120517/95e907e4/attachment.pl>

From jeff.a.ryan at gmail.com  Thu May 17 19:21:44 2012
From: jeff.a.ryan at gmail.com (Jeffrey Ryan)
Date: Thu, 17 May 2012 12:21:44 -0500
Subject: [R-SIG-Finance] IBrokers: issues with combo contracts
In-Reply-To: <CACBekgu_mJGKDg_twv2gRhrS7rVvusFmE4ZUXah7gMqSFG3LXQ@mail.gmail.com>
Message-ID: <CBDA9CDF.3DE3F%jeff.a.ryan@gmail.com>

I don't think I've tried this, so I may be wrong, but twsBAG isn't a real
contract, it is for the order itself.  Therefore you can't get mktData on
it.

Additionally, snapshot= isn't in the documentation for reqMktData.

Read the docs,and then see if you can get further along.  It (API and
IBrokers) is intentionally tricky to prevent wide-spread self-inflicted
harm ;-)  And 'paper account' is a good step...

Best,
Jeff

On 5/17/12 12:03 PM, "Alain Burt" <alainb978 at gmail.com> wrote:

>Hi there,
>
>I am having some troubles with the use of the IBrokers package on my IB
>paper account. I am trying to get market data and an order execution for a
>combo contract, with no success in both cases. I wonder if anyone could
>help. Here is the code I tried
>
>
>
>  ibg <- ibgConnect()
>
>
>
>leg1 <- twsComboLeg( conId = "79265697",
>
>                                   ratio = 1,
>
>                                action = "BUY",
>
>                           exchange = "SMART")
>
>
>
>leg2 <- twsComboLeg( conId = "79265687",
>
>                                   ratio = 1,
>
>                                action = "SELL",
>
>                           exchange = "SMART")
>
>
>
> reqMktData(conn = ibg, Contract = twsBAG(leg1,leg2), tickGenerics = "",
>tickerId = "1", snapshot = T)
>
>
>
> placeOrder(ibg, twsBAG(leg1,leg2), twsOrder(reqIds(ibg),"BUY",1,"MKT"))
>
>
>
>About the market data, I am not getting anything, even by setting snapshot
>= F. As for the order, it is placed but never executed. Could it be a
>problem with contract objects created by twsBAG ? Does anyone know how to
>fix these issues ?
>
>
>
>Best regards,
>
>Alain
>
>	[[alternative HTML version deleted]]
>
>_______________________________________________
>R-SIG-Finance at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>-- Subscriber-posting only. If you want to post, subscribe first.
>-- Also note that this is not the r-help list where general R questions
>should go.


From jaimie.villanueva at gmail.com  Thu May 17 19:40:00 2012
From: jaimie.villanueva at gmail.com (jaimie villanueva)
Date: Thu, 17 May 2012 19:40:00 +0200
Subject: [R-SIG-Finance] look at the underlying source code
Message-ID: <CAEXmNQCiXJ2QQ7bDDppKWwG-=x+Dc0N+anL+3-UtE5j4FmhSVw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120517/25a69d73/attachment.pl>

From josh.m.ulrich at gmail.com  Thu May 17 19:45:34 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Thu, 17 May 2012 12:45:34 -0500
Subject: [R-SIG-Finance] look at the underlying source code
In-Reply-To: <CAEXmNQCiXJ2QQ7bDDppKWwG-=x+Dc0N+anL+3-UtE5j4FmhSVw@mail.gmail.com>
References: <CAEXmNQCiXJ2QQ7bDDppKWwG-=x+Dc0N+anL+3-UtE5j4FmhSVw@mail.gmail.com>
Message-ID: <CAPPM_gQCK5u1_JvXrx0R8fjwtZKcDH9o-Ft33eFoGV--N_Q9+A@mail.gmail.com>

On Thu, May 17, 2012 at 12:40 PM, jaimie villanueva
<jaimie.villanueva at gmail.com> wrote:
> hi
>
> someone can show me how can i get the source code of a function. Exactly,
> Function "ugarchsim" from library (rugarch).
> I need to know (in detailed ) how the variance and ?mean ecuation of a
> arma/garch process are calculated.
> With other packages like "fGarch" i used to invoked the function debug ()
> and allows me to step into the functions but with ugarchsim i can't use it.
>
> any suggestions are well received
>
I reiterate the suggestion Alexios already gave you, namely that you
use some of the, "many resources online to learn about R, S3, S4
etc.".  Also, "how do I look at source code?" is not a finance-related
question, even though you want to look at the source code of a
finance-related function.

> thanks
>
> Jamie
>

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com


From j_cuisinier at hotmail.com  Thu May 17 19:46:47 2012
From: j_cuisinier at hotmail.com (julien cuisinier)
Date: Thu, 17 May 2012 19:46:47 +0200
Subject: [R-SIG-Finance] look at the underlying source code
In-Reply-To: <CAEXmNQCiXJ2QQ7bDDppKWwG-=x+Dc0N+anL+3-UtE5j4FmhSVw@mail.gmail.com>
References: <CAEXmNQCiXJ2QQ7bDDppKWwG-=x+Dc0N+anL+3-UtE5j4FmhSVw@mail.gmail.com>
Message-ID: <COL102-W3994BC2E9358F4BBCEE4008F190@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120517/3808789f/attachment.pl>

From brian at braverock.com  Thu May 17 19:47:47 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 17 May 2012 12:47:47 -0500
Subject: [R-SIG-Finance] look at the underlying source code
In-Reply-To: <CAEXmNQCiXJ2QQ7bDDppKWwG-=x+Dc0N+anL+3-UtE5j4FmhSVw@mail.gmail.com>
References: <CAEXmNQCiXJ2QQ7bDDppKWwG-=x+Dc0N+anL+3-UtE5j4FmhSVw@mail.gmail.com>
Message-ID: <1337276867.18928.10.camel@brian-rcg>

On Thu, 2012-05-17 at 19:40 +0200, jaimie villanueva wrote:
> hi
> 
> someone can show me how can i get the source code of a function. Exactly,
> Function "ugarchsim" from library (rugarch).
> I need to know (in detailed ) how the variance and  mean ecuation of a
> arma/garch process are calculated.
> With other packages like "fGarch" i used to invoked the function debug ()
> and allows me to step into the functions but with ugarchsim i can't use it.
> 
> any suggestions are well received

1> this is not a finance question.  Please direct general R questions to
r-help, and/or follow the advice that Alexios already gave you to look
up the answer.

2> all the code is on R-Forge, download it and look.

3> much of the rugarch and rmgarch code is compiled, and other parts of
it are S4, these are not as easy to debug into as vanilla R code.  See
the answer to 1> above for details on how to do this, and pursue further
non-finance questions about it on r-help, not here.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From omerle at laposte.net  Thu May 17 22:15:59 2012
From: omerle at laposte.net (omerle)
Date: Thu, 17 May 2012 22:15:59 +0200
Subject: [R-SIG-Finance] IBrokers - reqOpenOrders and placeOrder not
 working anymore
Message-ID: <1889782025.1246795.1337285758243.JavaMail.www@wwinf8403>

Hi,

I just dowload IBrokers from http://code.google.com/p/ibrokers/downloads/detail?
name=IBrokers_0.9-0.tar.gz&can=2&q=
and install IBrokers with
install.packages("C:/IBrokers_0.9-0).tar.gz", repos = NULL, type="source")
but reqOpenOrders and placeOrders is not working anyway !

Any other advice ?

Thanks


Try updating to the newest googlecode version. A change in IB response. 

Jeff

Jeffrey Ryan | Founder | jeffrey.ryan at lemnica.com

www.lemnica.com

On May 11, 2012, at 5:26 PM, G See  wrote:

> FWIW, I have the opposite problem. When connected with a live account, I see:
>
>> tws <- twsConnect()
>> tws$nextValidId
> [1] "1"
>
> But, with the demo account, the account number is being stored in nextValidId:
>
>> tws <- twsConnect()
>> tws$nextValidId
> [1] "DU123456"
>
> # But, I changed the actual account number
>
> Best,
> Garrett
>
> On Fri, May 11, 2012 at 8:03 AM, omerle  wrote:
>> Dear All,
>>
>> First thanks to Jeff Ryan for the very interesting IBrokers package.
>>
>> After looking for answers on Rseek without success, your are my last hope !
>>
>> Here is my problem :
>>
>> placeOrder & reqOpenOrders don't work on my trading accout but its working on my demo
>> account !
>>
>> For instance when I do
>>
>> reqOpenOrders(twsconn) or IBrokers:::.reqOpenOrders(twsconn)
>> => I get only the error message 53 (OPEN_ORDER_END) even if I have open order in my
>> console.
>>
>> OR
>>
>> placeOrder
>> => it doesnt do anything
>>
>> => But I can get TWS real time quotes or accountUpdate
>>
>> (I think it was ok before at least for placeOrder)
>>
>> I set the same parameter in configurationAPIs for both my demo account and trading 
account
>> but trading account is still not working.
>>
>> Do you have any idea what I did wrong and how I can use both placeOrder and 
reqOpenOrders
>> ?
>>
>>
>>
>> Many Thanks,
>>
>> Olivier Merle
>>
>> Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
>> Je cr?e ma bo?te mail www.laposte.net
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
Je cr?e ma bo?te mail www.laposte.net


From gsee000 at gmail.com  Thu May 17 22:27:04 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 17 May 2012 15:27:04 -0500
Subject: [R-SIG-Finance] IBrokers - reqOpenOrders and placeOrder not
 working anymore
In-Reply-To: <1889782025.1246795.1337285758243.JavaMail.www@wwinf8403>
References: <1889782025.1246795.1337285758243.JavaMail.www@wwinf8403>
Message-ID: <CA+xi=qYShEpJ64Q97jr5kHGppeM5Mvp5wFo-nAfHBFQRz_tjKQ@mail.gmail.com>

Checkout the code with svn and build it yourself.  The current version is 0.9-7

On linux or mac, you'd do something like this

    svn checkout http://ibrokers.googlecode.com/svn/trunk/ ibrokers

That will checkout the code into a directory called ibrokers.  Then you can

    R --vanilla CMD INSTALL --build ibrokers

HTH,
Garrett

On Thu, May 17, 2012 at 3:15 PM, omerle <omerle at laposte.net> wrote:
> Hi,
>
> I just dowload IBrokers from http://code.google.com/p/ibrokers/downloads/detail?
> name=IBrokers_0.9-0.tar.gz&can=2&q=
> and install IBrokers with
> install.packages("C:/IBrokers_0.9-0).tar.gz", repos = NULL, type="source")
> but reqOpenOrders and placeOrders is not working anyway !
>
> Any other advice ?
>
> Thanks
>
>
> Try updating to the newest googlecode version. A change in IB response.
>
> Jeff
>
> Jeffrey Ryan | Founder | jeffrey.ryan at lemnica.com
>
> www.lemnica.com
>
> On May 11, 2012, at 5:26 PM, G See ?wrote:
>
>> FWIW, I have the opposite problem. When connected with a live account, I see:
>>
>>> tws <- twsConnect()
>>> tws$nextValidId
>> [1] "1"
>>
>> But, with the demo account, the account number is being stored in nextValidId:
>>
>>> tws <- twsConnect()
>>> tws$nextValidId
>> [1] "DU123456"
>>
>> # But, I changed the actual account number
>>
>> Best,
>> Garrett
>>
>> On Fri, May 11, 2012 at 8:03 AM, omerle ?wrote:
>>> Dear All,
>>>
>>> First thanks to Jeff Ryan for the very interesting IBrokers package.
>>>
>>> After looking for answers on Rseek without success, your are my last hope !
>>>
>>> Here is my problem :
>>>
>>> placeOrder & reqOpenOrders don't work on my trading accout but its working on my demo
>>> account !
>>>
>>> For instance when I do
>>>
>>> reqOpenOrders(twsconn) or IBrokers:::.reqOpenOrders(twsconn)
>>> => I get only the error message 53 (OPEN_ORDER_END) even if I have open order in my
>>> console.
>>>
>>> OR
>>>
>>> placeOrder
>>> => it doesnt do anything
>>>
>>> => But I can get TWS real time quotes or accountUpdate
>>>
>>> (I think it was ok before at least for placeOrder)
>>>
>>> I set the same parameter in configurationAPIs for both my demo account and trading
> account
>>> but trading account is still not working.
>>>
>>> Do you have any idea what I did wrong and how I can use both placeOrder and
> reqOpenOrders
>>> ?
>>>
>>>
>>>
>>> Many Thanks,
>>>
>>> Olivier Merle
>>>
>>> Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
>>> Je cr?e ma bo?te mail www.laposte.net
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>
>
> Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
> Je cr?e ma bo?te mail www.laposte.net
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From student.northwestern at gmail.com  Fri May 18 05:06:05 2012
From: student.northwestern at gmail.com (Jim Green)
Date: Thu, 17 May 2012 23:06:05 -0400
Subject: [R-SIG-Finance] moving averages on specific interval and merge
In-Reply-To: <CA+xi=qbt2EPJCYF+WwKhe=2z1ToOtBurCH6YhBY6hr7+dUemXQ@mail.gmail.com>
References: <CACAe89zn8L+vVjuRk_ChG-ZBcPv_XhWyddXLp9o+NNz664C0jg@mail.gmail.com>
	<CA+xi=qbt2EPJCYF+WwKhe=2z1ToOtBurCH6YhBY6hr7+dUemXQ@mail.gmail.com>
Message-ID: <CACAe89wLZYWd4CzQeeQMS62EAHc+DFnJn_b+L2tNxV-2CSm1NA@mail.gmail.com>

Thanks Garret, it worked  correctly.

I found a similar question here at
http://r.789695.n4.nabble.com/Speed-optimization-on-minutes-distribution-calculation-td929537.html
and Jeff gave a very fast solution. Just for the reference.

Now I am attempting to write a custom indicator doing what you showed
to be used in quantstrat.

Jim.


On 12 May 2012 12:54, G See <gsee000 at gmail.com> wrote:
> Hi Jim,
>
> We prefer if you share with us what you tried and what you've done to
> attempt to solve the problem yourself. ?Anyway here's one way to
> start.
>
> library(quantmod) # for the Vo function as well as xts and zoo
> load("~/Downloads/a.rda")
> CalcMinuteVolume <- function(x) {
> ? ?# This function will calculate the average of the volume for a given minute
> ? ?#of every day
> ? ?mvolm <- aggregate(Vo(x), format(index(x), "%H:%M"), mean)
> ? ?xts(coredata(mvolm), as.POSIXct(paste(as.Date(end(x)), index(mvolm)),
> ? ? ? ?format="%Y-%m-%d %H:%M"))
> }
> dtemp <- to.daily(temp)
> index(dtemp) <- as.Date(index(dtemp)) # in case you have an old version of xts
> # make strings to use to subset the data by 10 day periods
> subsets <- rollapplyr(index(dtemp), 10, function(x)
> ? ? ? ? ? ? ? ? ? ? ? ?paste0(first(x), "/", last(x)))
> out <- lapply(subsets, function(ss) {
> ? ?CalcMinuteVolume(temp[ss])
> })
> names(out) <- index(dtemp)[-c(1:9)] # days 1:9 were burned to calculate 1st mean
> # Now you have a list of days. e.g.
> out[["2012-02-15"]]
> # Now merge
> temp$Average.Volume.at.current.interval <- do.call(rbind, out)
> temp
> ########################################
>
> Things to consider:
> - You almost certainly want to throw a lag in there.
> - You have a different number of rows for different days.
>
> Also, see ?agrregate.zoo or ?tapply, ?rollapply, ?period.apply, and ?do.call
>
> HTH,
> Garrett
>
>
> On Thu, May 10, 2012 at 8:11 PM, Jim Green
> <student.northwestern at gmail.com> wrote:
>> Greetings!
>>
>> I am using quantstrat and xts to do some intraday work and come up
>> with this problem. the xts object temp in the following example is
>> attached as and rda file.
>>
>>> head(temp)
>> ? ? ? ? ? ? ? ? ? ?A.Open A.High ?A.Low A.Close A.Volume
>> 2012-02-01 08:29:00 ?42.47 ?43.76 41.410 ? 43.76 ? ? 2071
>> 2012-02-01 09:30:00 ?43.38 ?43.38 42.970 ? 43.15 ? ?40300
>> 2012-02-01 09:31:00 ?43.14 ?43.28 43.130 ? 43.28 ? ?14990
>> 2012-02-01 09:32:00 ?43.27 ?43.37 43.270 ? 43.37 ? ? 3300
>> 2012-02-01 09:33:00 ?43.37 ?43.50 43.370 ? 43.48 ? ? 3056
>> 2012-02-01 09:34:00 ?43.49 ?43.50 43.396 ? 43.44 ? ?10968
>>
>>> tail(temp)
>> ? ? ? ? ? ? ? ? ? ? A.Open ?A.High ? A.Low A.Close A.Volume
>> 2012-03-27 16:07:00 45.6650 45.6650 45.6650 45.6650 ? ? ?170
>> 2012-03-27 16:08:00 45.6710 45.6710 45.6710 45.6710 ? ? ?474
>> 2012-03-27 16:10:00 45.9131 45.9131 45.9131 45.9131 ? ? 1800
>> 2012-03-27 16:13:00 45.6952 45.6952 45.6952 45.6952 ? ? ?300
>> 2012-03-27 16:15:00 45.9368 45.9368 45.9368 45.9368 ? ? ?791
>> 2012-03-27 16:21:00 45.7000 45.7000 45.7000 45.7000 ? ?22000
>>
>>
>> I would like to calculate moving averages of minute volume for
>> specific interval and merge with the original minute ohlc data.
>>
>> take 09:40:00 for example, calculate the average previous 10 days
>> volume between 09:39:00 to 09:40:00 and merge with exiting data.
>>
>> ultimately I want to get an xts object with columns
>>
>> Open ? High ? Low ? Close ? Volume ? Average.Volume.at.current.interval
>> 2012-03-27 16:07:00 45.6650 45.6650 45.6650 45.6650 ? ? ?170 ? 177
>> 2012-03-27 16:08:00 45.6710 45.6710 45.6710 45.6710 ? ? ?474 ?500
>> ...
>> ...
>> ..
>> 2012-03-27 16:21:00 45.7000 45.7000 45.7000 45.7000 ? ?22000 1000
>>
>> any pointers are appreciated!
>>
>> Jim.
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.


From gottardo.zanvit at gmail.com  Sun May 20 01:19:17 2012
From: gottardo.zanvit at gmail.com (zazzo89)
Date: Sat, 19 May 2012 16:19:17 -0700 (PDT)
Subject: [R-SIG-Finance] AON corporation option pricing
Message-ID: <1337469557622-4630639.post@n4.nabble.com>

hi,
i wanna check the price of AON options traded on market using B&S.  i wanna
demonstrate that this model doesnt work, so that the vaule of the call/put
given by the model is not the same one traded on the market.

i've taken all the information from 
http://www.nasdaq.com/aspxcontent/options2.aspxsymbol=AON&selected=AON&qm_page=45689&qm_symbol=AOn

the option has an exipiration date on 2012 june 16. call price = $3.22 and
put price = $0.35
so if i'm not wrong:

K = 45
So = 46.14 -> last quotation of 2012 may 17
T = 22/252 -> from 2012 may 17 to 2012 june 15
r = 0.10 -> T bill 3 months
i've calculated the (historical) volatility  from 2010 to all 2011, so 2
years and the result given by R is 0.2394337

Can i use these data for B&S model with R code??
thanks a lot,
bye bye



--
View this message in context: http://r.789695.n4.nabble.com/AON-corporation-option-pricing-tp4630639.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From arun.kumar.saha at gmail.com  Sun May 20 07:41:34 2012
From: arun.kumar.saha at gmail.com (Arun Kumar Saha)
Date: Sun, 20 May 2012 11:26:34 +0545
Subject: [R-SIG-Finance] look at the underlying source code
Message-ID: <CAPVuaOeq1pL6ifh61UFAWYdCp3WUvCLp0nE-TXmo6CwWzMpq=Q@mail.gmail.com>

Hi Jaimie, there is an easier way to look into all the source-code
including method/class definitions etc. From the CRAN just download
the .tar file and open it using something like winzip (assuming you
are with windows system) etc. You will see all the code-works.

HTH,

Thanks and regards,
_____________________________________________________

Arun Kumar Saha, FRM
QUANTITATIVE RISK AND HEDGE CONSULTING SPECIALIST
Visit me at: http://in.linkedin.com/in/ArunFRM


From jaimie.villanueva at gmail.com  Sun May 20 19:40:13 2012
From: jaimie.villanueva at gmail.com (jaimie villanueva)
Date: Sun, 20 May 2012 19:40:13 +0200
Subject: [R-SIG-Finance] arfimafit issue
Message-ID: <CAEXmNQBASXed7sp+YD_iFa0tWPiguwPC=VY-c9RiYCYcZF7Omg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120520/cf35b7f1/attachment.pl>

From rahulsparx2009 at gmail.com  Mon May 21 07:40:47 2012
From: rahulsparx2009 at gmail.com (rahul deora)
Date: Mon, 21 May 2012 11:10:47 +0530
Subject: [R-SIG-Finance] Problem in convert function of RTAQ package for
	high frequency data
Message-ID: <CAHE54+K353SV+aNdpiQ7sfPnCmrrYtk6N_4jgSWenGA2KxoRsw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120521/57271277/attachment.pl>

From alexios at 4dscape.com  Mon May 21 09:30:43 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Mon, 21 May 2012 10:30:43 +0300
Subject: [R-SIG-Finance] arfimafit issue
In-Reply-To: <CAEXmNQBASXed7sp+YD_iFa0tWPiguwPC=VY-c9RiYCYcZF7Omg@mail.gmail.com>
References: <CAEXmNQBASXed7sp+YD_iFa0tWPiguwPC=VY-c9RiYCYcZF7Omg@mail.gmail.com>
Message-ID: <CALS06o3p4yi4ywChNbmz5YWWx3hZydq7649JVGW1ux+kC6tqKQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120521/b542b53c/attachment.pl>

From omerle at laposte.net  Mon May 21 14:48:59 2012
From: omerle at laposte.net (omerle)
Date: Mon, 21 May 2012 14:48:59 +0200
Subject: [R-SIG-Finance] IBrokers - reqOpenOrders and placeOrder not working
In-Reply-To: <CALS06o3p4yi4ywChNbmz5YWWx3hZydq7649JVGW1ux+kC6tqKQ@mail.gmail.com>
References: <CAEXmNQBASXed7sp+YD_iFa0tWPiguwPC=VY-c9RiYCYcZF7Omg@mail.gmail.com>
	<CALS06o3p4yi4ywChNbmz5YWWx3hZydq7649JVGW1ux+kC6tqKQ@mail.gmail.com>
Message-ID: <1764287670.3446352.1337604538702.JavaMail.www@wwinf8229>

Hi,


1 - A friend under linux used svn linux http://ibrokers.googlecode.com/svn/trunk/ to 
make 
a IBrokers directory.
Then I zipped the file.
2 - And I installed by doing :
install.packages("C:/R/Software/IBrokers.zip", repos=NULL)
Installing package(s) into ?C:/R/R-last-version/library?
3 - 
library("IBrokers")
Error in library(IBrokers) : 'IBrokers' is not a valid installed package

(There is a IBrokers directory in my library)

Does the IBrokers 0.9-7 version is not working or I made something wrong ?

Thanks

----------------------------------------------

Checkout the code with svn and build it yourself. The current version is 0.9-7

On linux or mac, you'd do something like this

svn checkout http://ibrokers.googlecode.com/svn/trunk/ ibrokers

That will checkout the code into a directory called ibrokers. Then you can

R --vanilla CMD INSTALL --build ibrokers

HTH,
Garrett

On Thu, May 17, 2012 at 3:15 PM, omerle  wrote:
> Hi,
>
> I just dowload IBrokers from http://code.google.com/p/ibrokers/downloads/detail?
> name=IBrokers_0.9-0.tar.gz&can=2&q=
> and install IBrokers with
> install.packages("C:/IBrokers_0.9-0).tar.gz", repos = NULL, type="source")
> but reqOpenOrders and placeOrders is not working anyway !
>
> Any other advice ?
>
> Thanks
>
>
> Try updating to the newest googlecode version. A change in IB response.
>
> Jeff
>
> Jeffrey Ryan | Founder | jeffrey.ryan at lemnica.com
>
> www.lemnica.com
>
> On May 11, 2012, at 5:26 PM, G See wrote:
>
>> FWIW, I have the opposite problem. When connected with a live account, I see:
>>
>>> tws <- twsConnect()
>>> tws$nextValidId
>> [1] "1"
>>
>> But, with the demo account, the account number is being stored in nextValidId:
>>
>>> tws <- twsConnect()
>>> tws$nextValidId
>> [1] "DU123456"
>>
>> # But, I changed the actual account number
>>
>> Best,
>> Garrett
>>
>> On Fri, May 11, 2012 at 8:03 AM, omerle wrote:
>>> Dear All,
>>>
>>> First thanks to Jeff Ryan for the very interesting IBrokers package.
>>>
>>> After looking for answers on Rseek without success, your are my last hope !
>>>
>>> Here is my problem :
>>>
>>> placeOrder & reqOpenOrders don't work on my trading accout but its working on my 
demo
>>> account !
>>>
>>> For instance when I do
>>>
>>> reqOpenOrders(twsconn) or IBrokers:::.reqOpenOrders(twsconn)
>>> => I get only the error message 53 (OPEN_ORDER_END) even if I have open order in 
my
>>> console.
>>>
>>> OR
>>>
>>> placeOrder
>>> => it doesnt do anything
>>>
>>> => But I can get TWS real time quotes or accountUpdate
>>>
>>> (I think it was ok before at least for placeOrder)
>>>
>>> I set the same parameter in configurationAPIs for both my demo account and trading
> account
>>> but trading account is still not working.
>>>
>>> Do you have any idea what I did wrong and how I can use both placeOrder and
> reqOpenOrders
>>> ?
>>>
>>>
>>>
>>> Many Thanks,
>>>
>>> Olivier Merle
>>>
>>> Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
>>> Je cr?e ma bo?te mail www.laposte.net
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>
>
> Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
> Je cr?e ma bo?te mail www.laposte.net
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
Je cr?e ma bo?te mail www.laposte.net


From josh.m.ulrich at gmail.com  Mon May 21 15:02:40 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 21 May 2012 08:02:40 -0500
Subject: [R-SIG-Finance] IBrokers - reqOpenOrders and placeOrder not
	working
In-Reply-To: <1764287670.3446352.1337604538702.JavaMail.www@wwinf8229>
References: <CAEXmNQBASXed7sp+YD_iFa0tWPiguwPC=VY-c9RiYCYcZF7Omg@mail.gmail.com>
	<CALS06o3p4yi4ywChNbmz5YWWx3hZydq7649JVGW1ux+kC6tqKQ@mail.gmail.com>
	<1764287670.3446352.1337604538702.JavaMail.www@wwinf8229>
Message-ID: <CAPPM_gTzAp__hR5OGee3ceJ_9pLyhvEFZJOiXbj2BW0a9GQ=-w@mail.gmail.com>

On Mon, May 21, 2012 at 7:48 AM, omerle <omerle at laposte.net> wrote:
> Hi,
>
>
> 1 - A friend under linux used svn linux http://ibrokers.googlecode.com/svn/trunk/ to
> make
> a IBrokers directory.
> Then I zipped the file.
> 2 - And I installed by doing :
> install.packages("C:/R/Software/IBrokers.zip", repos=NULL)
> Installing package(s) into ?C:/R/R-last-version/library?
> 3 -
> library("IBrokers")
> Error in library(IBrokers) : 'IBrokers' is not a valid installed package
>
> (There is a IBrokers directory in my library)
>
> Does the IBrokers 0.9-7 version is not working or I made something wrong ?
>
You did something very wrong.  You assumed you knew what to do instead
of reading the manual:
http://cran.r-project.org/doc/manuals/R-exts.html

The fourth paragraph of the first section of the manual above has a link to:
http://cran.r-project.org/doc/manuals/R-admin.html#Add_002don-packages

And make sure to read:
http://cran.r-project.org/doc/manuals/R-admin.html#Installing-R-under-Windows

Note that this has nothing to do with finance, and is therefore
off-topic for this list.

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com


>
> ----------------------------------------------
>
> Checkout the code with svn and build it yourself. The current version is 0.9-7
>
> On linux or mac, you'd do something like this
>
> svn checkout http://ibrokers.googlecode.com/svn/trunk/ ibrokers
>
> That will checkout the code into a directory called ibrokers. Then you can
>
> R --vanilla CMD INSTALL --build ibrokers
>
> HTH,
> Garrett
>
> On Thu, May 17, 2012 at 3:15 PM, omerle ?wrote:
>> Hi,
>>
>> I just dowload IBrokers from http://code.google.com/p/ibrokers/downloads/detail?
>> name=IBrokers_0.9-0.tar.gz&can=2&q=
>> and install IBrokers with
>> install.packages("C:/IBrokers_0.9-0).tar.gz", repos = NULL, type="source")
>> but reqOpenOrders and placeOrders is not working anyway !
>>
>> Any other advice ?
>>
>> Thanks
>>
>>
>> Try updating to the newest googlecode version. A change in IB response.
>>
>> Jeff
>>
>> Jeffrey Ryan | Founder | jeffrey.ryan at lemnica.com
>>
>> www.lemnica.com
>>
>> On May 11, 2012, at 5:26 PM, G See wrote:
>>
>>> FWIW, I have the opposite problem. When connected with a live account, I see:
>>>
>>>> tws <- twsConnect()
>>>> tws$nextValidId
>>> [1] "1"
>>>
>>> But, with the demo account, the account number is being stored in nextValidId:
>>>
>>>> tws <- twsConnect()
>>>> tws$nextValidId
>>> [1] "DU123456"
>>>
>>> # But, I changed the actual account number
>>>
>>> Best,
>>> Garrett
>>>
>>> On Fri, May 11, 2012 at 8:03 AM, omerle wrote:
>>>> Dear All,
>>>>
>>>> First thanks to Jeff Ryan for the very interesting IBrokers package.
>>>>
>>>> After looking for answers on Rseek without success, your are my last hope !
>>>>
>>>> Here is my problem :
>>>>
>>>> placeOrder & reqOpenOrders don't work on my trading accout but its working on my
> demo
>>>> account !
>>>>
>>>> For instance when I do
>>>>
>>>> reqOpenOrders(twsconn) or IBrokers:::.reqOpenOrders(twsconn)
>>>> => I get only the error message 53 (OPEN_ORDER_END) even if I have open order in
> my
>>>> console.
>>>>
>>>> OR
>>>>
>>>> placeOrder
>>>> => it doesnt do anything
>>>>
>>>> => But I can get TWS real time quotes or accountUpdate
>>>>
>>>> (I think it was ok before at least for placeOrder)
>>>>
>>>> I set the same parameter in configurationAPIs for both my demo account and trading
>> account
>>>> but trading account is still not working.
>>>>
>>>> Do you have any idea what I did wrong and how I can use both placeOrder and
>> reqOpenOrders
>>>> ?
>>>>
>>>>
>>>>
>>>> Many Thanks,
>>>>
>>>> Olivier Merle
>>>>
>>>> Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
>>>> Je cr?e ma bo?te mail www.laposte.net
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions should go.
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>
>>
>> Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
>> Je cr?e ma bo?te mail www.laposte.net
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>
> Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
> Je cr?e ma bo?te mail www.laposte.net
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From brian at braverock.com  Mon May 21 15:03:24 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 21 May 2012 08:03:24 -0500
Subject: [R-SIG-Finance] IBrokers - reqOpenOrders and placeOrder not
 working
In-Reply-To: <1764287670.3446352.1337604538702.JavaMail.www@wwinf8229>
References: <CAEXmNQBASXed7sp+YD_iFa0tWPiguwPC=VY-c9RiYCYcZF7Omg@mail.gmail.com>
	<CALS06o3p4yi4ywChNbmz5YWWx3hZydq7649JVGW1ux+kC6tqKQ@mail.gmail.com>
	<1764287670.3446352.1337604538702.JavaMail.www@wwinf8229>
Message-ID: <1337605404.1820.23.camel@brian-rcg>

On Mon, 2012-05-21 at 14:48 +0200, omerle wrote:
> 1 - A friend under linux used svn linux
> http://ibrokers.googlecode.com/svn/trunk/ to 
> make a IBrokers directory.
> Then I zipped the file.

Simply zipping the source directory won't get you a Windows R binary.

You need the 'Rtools' utilities to build the windows binary.
http://cran.r-project.org/bin/windows/Rtools/
 
-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From omerle at laposte.net  Mon May 21 16:02:57 2012
From: omerle at laposte.net (omerle)
Date: Mon, 21 May 2012 16:02:57 +0200
Subject: [R-SIG-Finance] IBrokers - reqOpenOrders and placeOrder not
 working
In-Reply-To: <CAPPM_gTzAp__hR5OGee3ceJ_9pLyhvEFZJOiXbj2BW0a9GQ=-w@mail.gmail.com>
References: <CAEXmNQBASXed7sp+YD_iFa0tWPiguwPC=VY-c9RiYCYcZF7Omg@mail.gmail.com>
	<CALS06o3p4yi4ywChNbmz5YWWx3hZydq7649JVGW1ux+kC6tqKQ@mail.gmail.com>
	<1764287670.3446352.1337604538702.JavaMail.www@wwinf8229>
	<CAPPM_gTzAp__hR5OGee3ceJ_9pLyhvEFZJOiXbj2BW0a9GQ=-w@mail.gmail.com>
Message-ID: <1323679683.62103.1337608976947.JavaMail.www@wwinf8306>

Thanks Joshua !

It works now !

But I didn't assume anything. I just didn't know that I was building binary packages. 
Without the right keyword I couldn't find any useful documentation and even with what 
you sent to me its quite hard for me to remember the consol thing with cd.. and so 
forth.

Again thanks for your help Joshua.


> Message du 21/05/12 15:03
> De : "Joshua Ulrich" 
> A : "omerle" 
> Copie ? : R-SIG-Finance at r-project.org
> Objet : Re: [R-SIG-Finance] IBrokers - reqOpenOrders and placeOrder not working
>
> On Mon, May 21, 2012 at 7:48 AM, omerle  wrote:
> > Hi,
> >
> >
> > 1 - A friend under linux used svn linux http://ibrokers.googlecode.com/svn/trunk/ 
to
> > make
> > a IBrokers directory.
> > Then I zipped the file.
> > 2 - And I installed by doing :
> > install.packages("C:/R/Software/IBrokers.zip", repos=NULL)
> > Installing package(s) into ?C:/R/R-last-version/library?
> > 3 -
> > library("IBrokers")
> > Error in library(IBrokers) : 'IBrokers' is not a valid installed package
> >
> > (There is a IBrokers directory in my library)
> >
> > Does the IBrokers 0.9-7 version is not working or I made something wrong ?
> >
> You did something very wrong. You assumed you knew what to do instead
> of reading the manual:
> http://cran.r-project.org/doc/manuals/R-exts.html
> 
> The fourth paragraph of the first section of the manual above has a link to:
> http://cran.r-project.org/doc/manuals/R-admin.html#Add_002don-packages
> 
> And make sure to read:
> http://cran.r-project.org/doc/manuals/R-admin.html#Installing-R-under-Windows
> 
> Note that this has nothing to do with finance, and is therefore
> off-topic for this list.
> 
> Best,
> --
> Joshua Ulrich | FOSS Trading: www.fosstrading.com
> 
> 
> >
> > ----------------------------------------------
> >
> > Checkout the code with svn and build it yourself. The current version is 0.9-7
> >
> > On linux or mac, you'd do something like this
> >
> > svn checkout http://ibrokers.googlecode.com/svn/trunk/ ibrokers
> >
> > That will checkout the code into a directory called ibrokers. Then you can
> >
> > R --vanilla CMD INSTALL --build ibrokers
> >
> > HTH,
> > Garrett
> >
> > On Thu, May 17, 2012 at 3:15 PM, omerle ?wrote:
> >> Hi,
> >>
> >> I just dowload IBrokers from http://code.google.com/p/ibrokers/downloads/detail?
> >> name=IBrokers_0.9-0.tar.gz&can=2&q=
> >> and install IBrokers with
> >> install.packages("C:/IBrokers_0.9-0).tar.gz", repos = NULL, type="source")
> >> but reqOpenOrders and placeOrders is not working anyway !
> >>
> >> Any other advice ?
> >>
> >> Thanks
> >>
> >>
> >> Try updating to the newest googlecode version. A change in IB response.
> >>
> >> Jeff
> >>
> >> Jeffrey Ryan | Founder | jeffrey.ryan at lemnica.com
> >>
> >> www.lemnica.com
> >>
> >> On May 11, 2012, at 5:26 PM, G See wrote:
> >>
> >>> FWIW, I have the opposite problem. When connected with a live account, I see:
> >>>
> >>>> tws <- twsConnect()
> >>>> tws$nextValidId
> >>> [1] "1"
> >>>
> >>> But, with the demo account, the account number is being stored in nextValidId:
> >>>
> >>>> tws <- twsConnect()
> >>>> tws$nextValidId
> >>> [1] "DU123456"
> >>>
> >>> # But, I changed the actual account number
> >>>
> >>> Best,
> >>> Garrett
> >>>
> >>> On Fri, May 11, 2012 at 8:03 AM, omerle wrote:
> >>>> Dear All,
> >>>>
> >>>> First thanks to Jeff Ryan for the very interesting IBrokers package.
> >>>>
> >>>> After looking for answers on Rseek without success, your are my last hope !
> >>>>
> >>>> Here is my problem :
> >>>>
> >>>> placeOrder & reqOpenOrders don't work on my trading accout but its working on 
my
> > demo
> >>>> account !
> >>>>
> >>>> For instance when I do
> >>>>
> >>>> reqOpenOrders(twsconn) or IBrokers:::.reqOpenOrders(twsconn)
> >>>> => I get only the error message 53 (OPEN_ORDER_END) even if I have open order 
in
> > my
> >>>> console.
> >>>>
> >>>> OR
> >>>>
> >>>> placeOrder
> >>>> => it doesnt do anything
> >>>>
> >>>> => But I can get TWS real time quotes or accountUpdate
> >>>>
> >>>> (I think it was ok before at least for placeOrder)
> >>>>
> >>>> I set the same parameter in configurationAPIs for both my demo account and 
trading
> >> account
> >>>> but trading account is still not working.
> >>>>
> >>>> Do you have any idea what I did wrong and how I can use both placeOrder and
> >> reqOpenOrders
> >>>> ?
> >>>>
> >>>>
> >>>>
> >>>> Many Thanks,
> >>>>
> >>>> Olivier Merle
> >>>>
> >>>> Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente 
?
> >>>> Je cr?e ma bo?te mail www.laposte.net
> >>>>
> >>>> _______________________________________________
> >>>> R-SIG-Finance at r-project.org mailing list
> >>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >>>> -- Subscriber-posting only. If you want to post, subscribe first.
> >>>> -- Also note that this is not the r-help list where general R questions should 
go.
> >>> _______________________________________________
> >>> R-SIG-Finance at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >>> -- Subscriber-posting only. If you want to post, subscribe first.
> >>> -- Also note that this is not the r-help list where general R questions should 
go.
> >>
> >>
> >> Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
> >> Je cr?e ma bo?te mail www.laposte.net
> >>
> >> _______________________________________________
> >> R-SIG-Finance at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >> -- Subscriber-posting only. If you want to post, subscribe first.
> >> -- Also note that this is not the r-help list where general R questions should 
go.
> >
> > Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
> > Je cr?e ma bo?te mail www.laposte.net
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions should go.
> 

Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
Je cr?e ma bo?te mail www.laposte.net


From john.laing at gmail.com  Mon May 21 17:08:00 2012
From: john.laing at gmail.com (John Laing)
Date: Mon, 21 May 2012 11:08:00 -0400
Subject: [R-SIG-Finance] RBloomberg package rename
Message-ID: <CAA3Wa=s-Y5xeTCq6DpEBZP1+Cavod4ZrDH_LzK6e5d19JykAcw@mail.gmail.com>

The package formerly known as RBloomberg has been renamed Rbbg. As
this package is not formally affiliated with or endorsed by Bloomberg,
their lawyers have requested that we not reference the company by
name.

The existing package will continue to work, but its binaries are no
longer publicly available and all updates/bug fixes/new features will
be rolled into the new package. The new Rbbg can be installed like
this:
install.packages("Rbbg", repos = "http://r.findata.org")

Apologies for any inconvenience.

-John


From jctoll at gmail.com  Mon May 21 18:32:48 2012
From: jctoll at gmail.com (J Toll)
Date: Mon, 21 May 2012 11:32:48 -0500
Subject: [R-SIG-Finance] error in yang.zhang volatility{TTR}
Message-ID: <CA+nJqYOAb8AX7ECciPs+jsUnumOaDcgBxzDsoCKL7XxUp8X4Rw@mail.gmail.com>

Hi,

I've been going through the code for the yang.zhang calculation method
of volatility in the TTR package and believe I've found the same error
as the one from last year on the Close to Close volatility estimator.

https://stat.ethz.ch/pipermail/r-sig-finance/2011q2/007989.html

Like the previous error, one of the first clues that there was a
problem was an excessive number of NA values generated at the
beginning of the output (e.g. 40 NA's for n = 20).

I believe the errors are in these two calculations:

        s2o <- N/(n - 1) * runSum((log(OHLC[, 1]/Cl1) - 1/n *
            runSum(log(OHLC[, 1]/Cl1), n))^2, n)
        s2c <- N/(n - 1) * runSum((log(OHLC[, 4]/OHLC[, 1]) -
            1/n * runSum(log(OHLC[, 4]/OHLC[, 1]), n))^2, n)

Basically, s2o is just supposed to be the variance of the normalized open,
    log(OHLC[, 1]/Cl1

and s2c is the variance of the normalized close.
    log(OHLC[, 4]/OHLC[, 1]

The problem in both formula is, as in Close to Close, that you have
two nested runSum calculations being used to calculate variance.  For
example, if n = 20, the first 20 values should be differenced against
the same mean.  That's not happening here.  The first value is being
differenced against the first mean, the second value is being
differenced against the second mean, and so on.

As a simple fix, I would suggest these corrections:

        s2o <- N * runVar(log(OHLC[, 1] / Cl1), n)
        s2c <- N * runVar(log(OHLC[, 4] / OHLC[, 1]), n)

I would welcome the input of someone with reference data that could
double-check this against a known value.

Thanks,


James


From jctoll at gmail.com  Mon May 21 19:40:29 2012
From: jctoll at gmail.com (J Toll)
Date: Mon, 21 May 2012 12:40:29 -0500
Subject: [R-SIG-Finance] error in yang.zhang volatility{TTR}
In-Reply-To: <CA+nJqYOAb8AX7ECciPs+jsUnumOaDcgBxzDsoCKL7XxUp8X4Rw@mail.gmail.com>
References: <CA+nJqYOAb8AX7ECciPs+jsUnumOaDcgBxzDsoCKL7XxUp8X4Rw@mail.gmail.com>
Message-ID: <CA+nJqYPevesSZJAWRNEeyXoLr7tSAgDJOc4S9fVe26xOy23onA@mail.gmail.com>

On Mon, May 21, 2012 at 11:32 AM, J Toll <jctoll at gmail.com> wrote:
> Hi,
>
> I've been going through the code for the yang.zhang calculation method
> of volatility in the TTR package and believe I've found the same error
> as the one from last year on the Close to Close volatility estimator.
>
> https://stat.ethz.ch/pipermail/r-sig-finance/2011q2/007989.html
>
> Like the previous error, one of the first clues that there was a
> problem was an excessive number of NA values generated at the
> beginning of the output (e.g. 40 NA's for n = 20).
>
> I believe the errors are in these two calculations:
>
> ? ? ? ?s2o <- N/(n - 1) * runSum((log(OHLC[, 1]/Cl1) - 1/n *
> ? ? ? ? ? ?runSum(log(OHLC[, 1]/Cl1), n))^2, n)
> ? ? ? ?s2c <- N/(n - 1) * runSum((log(OHLC[, 4]/OHLC[, 1]) -
> ? ? ? ? ? ?1/n * runSum(log(OHLC[, 4]/OHLC[, 1]), n))^2, n)
>
> Basically, s2o is just supposed to be the variance of the normalized open,
> ? ?log(OHLC[, 1]/Cl1
>
> and s2c is the variance of the normalized close.
> ? ?log(OHLC[, 4]/OHLC[, 1]
>
> The problem in both formula is, as in Close to Close, that you have
> two nested runSum calculations being used to calculate variance. ?For
> example, if n = 20, the first 20 values should be differenced against
> the same mean. ?That's not happening here. ?The first value is being
> differenced against the first mean, the second value is being
> differenced against the second mean, and so on.
>
> As a simple fix, I would suggest these corrections:
>
> ? ? ? ?s2o <- N * runVar(log(OHLC[, 1] / Cl1), n)
> ? ? ? ?s2c <- N * runVar(log(OHLC[, 4] / OHLC[, 1]), n)


Sorry, to get that to work, it should actually be:

        s2o <- N * runVar(log(OHLC[, 1] / Cl1), n = n)
        s2c <- N * runVar(log(OHLC[, 4] / OHLC[, 1]), n = n)

It needs to be "n = n", otherwise runVar confuses n for y.


James


From hideyoshi.maeda at gmail.com  Tue May 22 04:20:21 2012
From: hideyoshi.maeda at gmail.com (Hideyoshi Maeda)
Date: Tue, 22 May 2012 12:20:21 +1000
Subject: [R-SIG-Finance] error in yang.zhang volatility{TTR}
Message-ID: <EA05DDAC-C2CB-40D4-8D54-5093D63C6B71@gmail.com>

Hi,

Doing a quick comparison of the difference in code for the volatility estimate in using 'yang.zhang' as a calculation method, on S&P 500 data, going back from the beginning of 2001 till today (22 May 2012). These were the results from the following lines of code:

N.B. volatility.new is the edited code with the suggestion of using runVar instead  of runSum, as suggested by James
N.B SPX.ohlc is an xts object of that contains OHLC data for the Bloomberg ticker "SPX Index"

> original.vol.code <- volatility(SPX.ohlc, calc="yang.zhang")
> new.vol.code <- volatility.new(SPX.ohlc, calc="yang.zhang")
> plot((new.vol.code-original.vol.code)*100/original.vol.code, main="% difference in volatility esitimates 
+      when comparing new and old code")


Some quite significant percentage differences getting up to approx. -10% viewing it as a histogram in terms of differences, you get...

> hist((new.vol.code-original.vol.code)*100/original.vol.code, breaks="Scott", main="Histogram of the same data")




Hopefully that gives some indication of the differences...

Hideyoshi


> 
> -------- Original Message --------
> Subject:
> Re: [R-SIG-Finance] error in yang.zhang volatility{TTR}
> Date:
> Mon, 21 May 2012 12:40:29 -0500
> From:
> J Toll <jctoll at gmail.com>
> To:
> r-sig-finance at r-project.org
>  
> On Mon, May 21, 2012 at 11:32 AM, J Toll <jctoll at gmail.com> wrote:
> > Hi,
> > 
> > I've been going through the code for the yang.zhang calculation method
> > of volatility in the TTR package and believe I've found the same error
> > as the one from last year on the Close to Close volatility estimator.
> > 
> > https://stat.ethz.ch/pipermail/r-sig-finance/2011q2/007989.html
> > 
> > Like the previous error, one of the first clues that there was a
> > problem was an excessive number of NA values generated at the
> > beginning of the output (e.g. 40 NA's for n = 20).
> > 
> > I believe the errors are in these two calculations:
> > 
> >        s2o <- N/(n - 1) * runSum((log(OHLC[, 1]/Cl1) - 1/n *
> >            runSum(log(OHLC[, 1]/Cl1), n))^2, n)
> >        s2c <- N/(n - 1) * runSum((log(OHLC[, 4]/OHLC[, 1]) -
> >            1/n * runSum(log(OHLC[, 4]/OHLC[, 1]), n))^2, n)
> > 
> > Basically, s2o is just supposed to be the variance of the normalized open,
> >    log(OHLC[, 1]/Cl1
> > 
> > and s2c is the variance of the normalized close.
> >    log(OHLC[, 4]/OHLC[, 1]
> > 
> > The problem in both formula is, as in Close to Close, that you have
> > two nested runSum calculations being used to calculate variance.  For
> > example, if n = 20, the first 20 values should be differenced against
> > the same mean.  That's not happening here.  The first value is being
> > differenced against the first mean, the second value is being
> > differenced against the second mean, and so on.
> > 
> > As a simple fix, I would suggest these corrections:
> > 
> >        s2o <- N * runVar(log(OHLC[, 1] / Cl1), n)
> >        s2c <- N * runVar(log(OHLC[, 4] / OHLC[, 1]), n)
>  
>  
> Sorry, to get that to work, it should actually be:
>  
>         s2o <- N * runVar(log(OHLC[, 1] / Cl1), n = n)
>         s2c <- N * runVar(log(OHLC[, 4] / OHLC[, 1]), n = n)
>  
> It needs to be "n = n", otherwise runVar confuses n for y.
>  
>  
> James
>  
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
> 
> This email is confidential. If you have received it in error, please destroy this email and any/all attached documents immediately. Please also notify the sender. This message is not a solicitation and, without express information to the contrary, does not take into account the investment objectives (or otherwise) of each client, or prospective client. The information herein is for the private information of the recipient and is not to be construed as an offer to sell or solicitation to buy any interest in particular funds or securities which are referred to herein. Any simulated historic/statistical analyses that are provided in connection with explanations of the potential returns of the Product use simulated analysis and hypothetical circumstances to estimate how the Product may have performed prior to their actual existence. Neither the provision nor the content of this email creates any obligations or liability of White & Co. towards the users. White & Co. does not make any representations, warranties, express or implied, as to the quality, accuracy, timeliness, continued availability or completeness of the information contained herein, including, but not limited to, the contents of any private placement memorandum or fund fact sheet. White & Co. accepts no liability relating to direct or indirect losses, immaterial damage or consequential damage including loss of profit (even where White & Co. has been made aware of the possibility of such damages). This limitation of liability also holds for directors and employees of White & Co. The information in this email has been prepared on information deemed to be reliable. White & Co. Pty Ltd does not represent that this material is accurate, complete or current, and accepts no liability if it is not. White & Co, its subsidiaries and partners may have positions in - and buy or sell - any of the securities mentioned in this e-mail without notice. White & Co. Pty. Ltd. is regulated by the CFTC and ASIC.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120522/122f59a4/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: vol estimate pct diff n10.png
Type: image/png
Size: 14423 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120522/122f59a4/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: histogram.png
Type: image/png
Size: 5186 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120522/122f59a4/attachment-0001.png>

From mail at chrisbird.com  Tue May 22 09:40:56 2012
From: mail at chrisbird.com (mail at chrisbird.com)
Date: Tue, 22 May 2012 08:40:56 +0100 (BST)
Subject: [R-SIG-Finance] Spread discovery and backtester code
In-Reply-To: <mailman.3.1337508002.25621.r-sig-finance@r-project.org>
References: <mailman.3.1337508002.25621.r-sig-finance@r-project.org>
Message-ID: <114526472.457136.1337672456593.JavaMail.open-xchange@webmail.easily.co.uk>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120522/e7424b92/attachment.pl>

From jaimie.villanueva at gmail.com  Tue May 22 12:45:20 2012
From: jaimie.villanueva at gmail.com (jaimie villanueva)
Date: Tue, 22 May 2012 12:45:20 +0200
Subject: [R-SIG-Finance] garchFit issue
Message-ID: <CAEXmNQBq8hrT3OW5E6k0=i80QHKUVV_eP=3-f3MimeEvBaSA-g@mail.gmail.com>

Hi

i'm trying to fit a garch model to my time series data whit the
function garchFit of package "fGarch"and i found that many times the
model fitted don't satisfy the constraint of (beta+alpha) <1. the
persistance
Could be a problem with the optimization algorithm?

I thought that if the function  returned a result, it always be agree
with constraints.

any help are well received.

best
Jaimie


From jeffrey.ryan at lemnica.com  Tue May 22 13:52:48 2012
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Tue, 22 May 2012 06:52:48 -0500
Subject: [R-SIG-Finance] Spread discovery and backtester code
In-Reply-To: <114526472.457136.1337672456593.JavaMail.open-xchange@webmail.easily.co.uk>
References: <mailman.3.1337508002.25621.r-sig-finance@r-project.org>
	<114526472.457136.1337672456593.JavaMail.open-xchange@webmail.easily.co.uk>
Message-ID: <CABDUZc9_C3Zfc+o7MfpGJuKoMo-veZfAP5W-QjcL60yBbW6K1Q@mail.gmail.com>

I'll be the first.

Did you just spam R-sig-finance with closed source code, distributed
as a binary, that USES the community's hard work, without giving back
anything?  That requires a password???!

This is a (very) likely a violation of the GPL in letter and, and
certainly in spirit.

As someone who works rather hard for this community, I will be the
first to request you take your efforts elsewhere. Not a single person
here has 'time' to look at it.

Jeff

On Tue, May 22, 2012 at 2:40 AM, mail at chrisbird.com <mail at chrisbird.com> wrote:
> I have developed a spread/strategy backtester, which takes a list of input
> contracts and creates an N-dimensional output of spread combinations, performs
> backtesting and outputs results.
>
> Spread combinations are deduced by correlation & cointegration measures,
> combined with graph reduction to create a manageable result set to backtest.
>
>
>
> Its here:
>
> http://www7.zippyshare.com/v/11292047/file.html
> <http://www7.zippyshare.com/v/11292047/file.html>
>
> Email me for the password (just to keep track of who is interested, so I can
> decide if to tidy it up & comment it more in future).
>
>
>
> The code relies upon my trade netting library:
>
> http://www7.zippyshare.com/v/11292047/file.html
> <http://www7.zippyshare.com/v/11292047/file.html>
>
> (Only built for win64 - however if you email me I can supply source if you want
> to build it yourself)
>
>
>
> Please don't ask me how the code works, I haven't got time to comment it or give
> support. If enough interest is shown - i.e people requesting password and
> telling me they like it, then I will try and make an effort to tidy it up & get
> it using the new parallel functions within latest R build.
>
>
>
> Kind Regards,
>
>
>
> Chris.
>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com

R/Finance 2012: Applied Finance with R
www.RinFinance.com

See you in Chicago!!!!


From mail at chrisbird.com  Tue May 22 14:34:43 2012
From: mail at chrisbird.com (mail at chrisbird.com)
Date: Tue, 22 May 2012 13:34:43 +0100 (BST)
Subject: [R-SIG-Finance] Spread discovery and backtester code
In-Reply-To: <CABDUZc9_C3Zfc+o7MfpGJuKoMo-veZfAP5W-QjcL60yBbW6K1Q@mail.gmail.com>
References: <mailman.3.1337508002.25621.r-sig-finance@r-project.org>
	<114526472.457136.1337672456593.JavaMail.open-xchange@webmail.easily.co.uk>
	<CABDUZc9_C3Zfc+o7MfpGJuKoMo-veZfAP5W-QjcL60yBbW6K1Q@mail.gmail.com>
Message-ID: <608991102.487557.1337690083804.JavaMail.open-xchange@webmail.easily.co.uk>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120522/53cf001a/attachment.pl>

From mail at chrisbird.com  Tue May 22 14:46:33 2012
From: mail at chrisbird.com (mail at chrisbird.com)
Date: Tue, 22 May 2012 13:46:33 +0100 (BST)
Subject: [R-SIG-Finance] Spread discovery and backtester code
In-Reply-To: <CABDUZc9_C3Zfc+o7MfpGJuKoMo-veZfAP5W-QjcL60yBbW6K1Q@mail.gmail.com>
References: <mailman.3.1337508002.25621.r-sig-finance@r-project.org>
	<114526472.457136.1337672456593.JavaMail.open-xchange@webmail.easily.co.uk>
	<CABDUZc9_C3Zfc+o7MfpGJuKoMo-veZfAP5W-QjcL60yBbW6K1Q@mail.gmail.com>
Message-ID: <839902838.488742.1337690793449.JavaMail.open-xchange@webmail.easily.co.uk>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120522/776365f7/attachment.pl>

From armstrong.whit at gmail.com  Tue May 22 14:52:21 2012
From: armstrong.whit at gmail.com (Whit Armstrong)
Date: Tue, 22 May 2012 08:52:21 -0400
Subject: [R-SIG-Finance] Spread discovery and backtester code
In-Reply-To: <839902838.488742.1337690793449.JavaMail.open-xchange@webmail.easily.co.uk>
References: <mailman.3.1337508002.25621.r-sig-finance@r-project.org>
	<114526472.457136.1337672456593.JavaMail.open-xchange@webmail.easily.co.uk>
	<CABDUZc9_C3Zfc+o7MfpGJuKoMo-veZfAP5W-QjcL60yBbW6K1Q@mail.gmail.com>
	<839902838.488742.1337690793449.JavaMail.open-xchange@webmail.easily.co.uk>
Message-ID: <CAMi=pg5zb3cmfWp3Z+5++t6rB=S8D8keM8v35T=gAEtCXicmpg@mail.gmail.com>

Why don't you throw this up on github.

You'll get more respect from the community that way.

Most people will be reluctant to run code that they cannot inspect for
themselves (myself included).

Also, nice move on the tslib submodules!

-Whit


On Tue, May 22, 2012 at 8:46 AM, mail at chrisbird.com <mail at chrisbird.com> wrote:
> Just to clarify a few points:
>
> (THE TRADE NETTING LIBRARY)
>
> Any code was distributed as a binary - simply so I knew it was in a form
> immediately usable by at least some people. Source code is available (and was
> stated as such) and it is not closed source - I simply have not had the time to
> present it in a professional manner. A question that needs to be asked is would
> you prefer that I try and release something to the community or I don't at all.
> Neither the binary nor the source had any password.
>
> (THE SPREAD DISCOVERY & BACKTESTER)
> R code, no binary. Wrapped in a .zip simply because it makes it easy.
> Password was simply used as a means of tracking interest. Due to the rude
> response I received, I was almost tempted to not publish this in any manner.
> However, as mentioned, the password is algotickbacktesterpassword
>
> Chris.
>
>
>
>
>
> On 22 May 2012 at 12:52 Jeffrey Ryan <jeffrey.ryan at lemnica.com> wrote:
>
>> I'll be the first.
>>
>> Did you just spam R-sig-finance with closed source code, distributed
>> as a binary, that USES the community's hard work, without giving back
>> anything? ?That requires a password???!
>>
>> This is a (very) likely a violation of the GPL in letter and, and
>> certainly in spirit.
>>
>> As someone who works rather hard for this community, I will be the
>> first to request you take your efforts elsewhere. Not a single person
>> here has 'time' to look at it.
>>
>> Jeff
>>
>> On Tue, May 22, 2012 at 2:40 AM, mail at chrisbird.com <mail at chrisbird.com>
>> wrote:
>> > I have developed a spread/strategy backtester, which takes a list of input
>> > contracts and creates an N-dimensional output of spread combinations,
>> > performs
>> > backtesting and outputs results.
>> >
>> > Spread combinations are deduced by correlation & cointegration measures,
>> > combined with graph reduction to create a manageable result set to backtest.
>> >
>> >
>> >
>> > Its here:
>> >
>> > http://www7.zippyshare.com/v/11292047/file.html
>> > <http://www7.zippyshare.com/v/11292047/file.html>
>> >
>> > Email me for the password (just to keep track of who is interested, so I can
>> > decide if to tidy it up & comment it more in future).
>> >
>> >
>> >
>> > The code relies upon my trade netting library:
>> >
>> > http://www7.zippyshare.com/v/11292047/file.html
>> > <http://www7.zippyshare.com/v/11292047/file.html>
>> >
>> > (Only built for win64 - however if you email me I can supply source if you
>> > want
>> > to build it yourself)
>> >
>> >
>> >
>> > Please don't ask me how the code works, I haven't got time to comment it or
>> > give
>> > support. If enough interest is shown - i.e people requesting password and
>> > telling me they like it, then I will try and make an effort to tidy it up &
>> > get
>> > it using the new parallel functions within latest R build.
>> >
>> >
>> >
>> > Kind Regards,
>> >
>> >
>> >
>> > Chris.
>> >
>> >
>> > ? ? ? ?[[alternative HTML version deleted]]
>> >
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions
>> > should go.
>>
>>
>>
>> --
>> Jeffrey Ryan
>> jeffrey.ryan at lemnica.com
>>
>> www.lemnica.com
>> www.esotericR.com
>>
>> R/Finance 2012: Applied Finance with R
>> www.RinFinance.com
>>
>> See you in Chicago!!!!
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From daniel.cegielka at gmail.com  Tue May 22 14:54:56 2012
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Tue, 22 May 2012 14:54:56 +0200
Subject: [R-SIG-Finance] Spread discovery and backtester code
In-Reply-To: <CAMi=pg5zb3cmfWp3Z+5++t6rB=S8D8keM8v35T=gAEtCXicmpg@mail.gmail.com>
References: <mailman.3.1337508002.25621.r-sig-finance@r-project.org>
	<114526472.457136.1337672456593.JavaMail.open-xchange@webmail.easily.co.uk>
	<CABDUZc9_C3Zfc+o7MfpGJuKoMo-veZfAP5W-QjcL60yBbW6K1Q@mail.gmail.com>
	<839902838.488742.1337690793449.JavaMail.open-xchange@webmail.easily.co.uk>
	<CAMi=pg5zb3cmfWp3Z+5++t6rB=S8D8keM8v35T=gAEtCXicmpg@mail.gmail.com>
Message-ID: <CAPLrYET9YjVo2n4h91AAU2X_vtORPgAQV6jvgGnJvumMbK6g8w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120522/33f28f95/attachment.pl>

From josh.m.ulrich at gmail.com  Tue May 22 15:40:01 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 22 May 2012 08:40:01 -0500
Subject: [R-SIG-Finance] Spread discovery and backtester code
In-Reply-To: <608991102.487557.1337690083804.JavaMail.open-xchange@webmail.easily.co.uk>
References: <mailman.3.1337508002.25621.r-sig-finance@r-project.org>
	<114526472.457136.1337672456593.JavaMail.open-xchange@webmail.easily.co.uk>
	<CABDUZc9_C3Zfc+o7MfpGJuKoMo-veZfAP5W-QjcL60yBbW6K1Q@mail.gmail.com>
	<608991102.487557.1337690083804.JavaMail.open-xchange@webmail.easily.co.uk>
Message-ID: <CAPPM_gREisqoe_h40wO00FWVJ3+NFMMckP0X-QFf5K9dYnwXPQ@mail.gmail.com>

Wearing my devil's advocate hat...

On Tue, May 22, 2012 at 7:34 AM, mail at chrisbird.com <mail at chrisbird.com> wrote:
<snip>
>
> I would please ask anyone who is interested to let me know, so that I can
> develop these further if there is enough interest. If I don't get any comments,
> I wont bother.
>
> Also any licensing comments/banners within the source should be ignored - it is
> not in a "release" form yet, and was another reservation I had releasing it in
> such a form. Please assume that any of this software agrees with and is
> compliant with any GNU R licensing requirements.
>
I hope you can understand how some people may be reluctant to make
this assumption. "Chris told me to ignore the license and assume it is
GPL" probably isn't a strong legal argument.  It could be different
now that you've said it in a public forum, but I'm not a lawyer.

> Rather than responding in a rude or obnoxious manner to people who try and
> contribute to the group it is probably better to respond in a softer manner. This is not
> the first time that I have seen certain people respond to myself and others in a a manner
> which deters people from making a contribution.
>
While Jeff's response may have seemed inappropriate, your post was
highly unorthodox and it wasn't immediately clear you were trying to
contribute to the open source community.  The "requires password" and
the ".zip" (binary) extension were red flags.  I hope you can see how
this could give people the wrong impression.

If you're looking for feedback on your code, you really need to supply
the code, not just the program/package.  github, R-Forge, or
code.google.com are good for this.

I could only find one other instance where you thought someone
responded to you "in a manner which deters people from making a
contribution" and it seemed like you were very quick to assume that
Daniel was being rude when he was just being brief (and English isn't
his native language).

> Chris.
>

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com


>
>
> On 22 May 2012 at 12:52 Jeffrey Ryan <jeffrey.ryan at lemnica.com> wrote:
>
>> I'll be the first.
>>
>> Did you just spam R-sig-finance with closed source code, distributed
>> as a binary, that USES the community's hard work, without giving back
>> anything? ?That requires a password???!
>>
>> This is a (very) likely a violation of the GPL in letter and, and
>> certainly in spirit.
>>
>> As someone who works rather hard for this community, I will be the
>> first to request you take your efforts elsewhere. Not a single person
>> here has 'time' to look at it.
>>
>> Jeff
>>
>> On Tue, May 22, 2012 at 2:40 AM, mail at chrisbird.com <mail at chrisbird.com>
>> wrote:
>> > I have developed a spread/strategy backtester, which takes a list of input
>> > contracts and creates an N-dimensional output of spread combinations,
>> > performs
>> > backtesting and outputs results.
>> >
>> > Spread combinations are deduced by correlation & cointegration measures,
>> > combined with graph reduction to create a manageable result set to backtest.
>> >
>> >
>> >
>> > Its here:
>> >
>> > http://www7.zippyshare.com/v/11292047/file.html
>> > <http://www7.zippyshare.com/v/11292047/file.html>
>> >
>> > Email me for the password (just to keep track of who is interested, so I can
>> > decide if to tidy it up & comment it more in future).
>> >
>> >
>> >
>> > The code relies upon my trade netting library:
>> >
>> > http://www7.zippyshare.com/v/11292047/file.html
>> > <http://www7.zippyshare.com/v/11292047/file.html>
>> >
>> > (Only built for win64 - however if you email me I can supply source if you
>> > want
>> > to build it yourself)
>> >
>> >
>> >
>> > Please don't ask me how the code works, I haven't got time to comment it or
>> > give
>> > support. If enough interest is shown - i.e people requesting password and
>> > telling me they like it, then I will try and make an effort to tidy it up &
>> > get
>> > it using the new parallel functions within latest R build.
>> >
>> >
>> >
>> > Kind Regards,
>> >
>> >
>> >
>> > Chris.
>> >
>> >
>> > ? ? ? ?[[alternative HTML version deleted]]
>> >
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions
>> > should go.
>>
>>
>>
>> --
>> Jeffrey Ryan
>> jeffrey.ryan at lemnica.com
>>
>> www.lemnica.com
>> www.esotericR.com
>>
>> R/Finance 2012: Applied Finance with R
>> www.RinFinance.com
>>
>> See you in Chicago!!!!
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jctoll at gmail.com  Tue May 22 16:54:29 2012
From: jctoll at gmail.com (J Toll)
Date: Tue, 22 May 2012 09:54:29 -0500
Subject: [R-SIG-Finance] error in yang.zhang volatility{TTR}
In-Reply-To: <EA05DDAC-C2CB-40D4-8D54-5093D63C6B71@gmail.com>
References: <EA05DDAC-C2CB-40D4-8D54-5093D63C6B71@gmail.com>
Message-ID: <CA+nJqYM2p-3SWy5uV5N_zEmhSGwG8j-VTinb=kPDxELDSEs=gw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120522/9ebcaf12/attachment.pl>

From daniel.cegielka at gmail.com  Tue May 22 17:18:48 2012
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Tue, 22 May 2012 17:18:48 +0200
Subject: [R-SIG-Finance] Spread discovery and backtester code
In-Reply-To: <CAPPM_gREisqoe_h40wO00FWVJ3+NFMMckP0X-QFf5K9dYnwXPQ@mail.gmail.com>
References: <mailman.3.1337508002.25621.r-sig-finance@r-project.org>
	<114526472.457136.1337672456593.JavaMail.open-xchange@webmail.easily.co.uk>
	<CABDUZc9_C3Zfc+o7MfpGJuKoMo-veZfAP5W-QjcL60yBbW6K1Q@mail.gmail.com>
	<608991102.487557.1337690083804.JavaMail.open-xchange@webmail.easily.co.uk>
	<CAPPM_gREisqoe_h40wO00FWVJ3+NFMMckP0X-QFf5K9dYnwXPQ@mail.gmail.com>
Message-ID: <CAPLrYESErNe8G_VbM-BgRr+GG5bLP_OvBBPtLY01NmSXGXaEfg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120522/d64b0c0d/attachment.pl>

From me at censix.com  Tue May 22 17:47:50 2012
From: me at censix.com (soren wilkening)
Date: Tue, 22 May 2012 08:47:50 -0700 (PDT)
Subject: [R-SIG-Finance] Spread discovery and backtester code
In-Reply-To: <CAPLrYESErNe8G_VbM-BgRr+GG5bLP_OvBBPtLY01NmSXGXaEfg@mail.gmail.com>
References: <114526472.457136.1337672456593.JavaMail.open-xchange@webmail.easily.co.uk>
	<CABDUZc9_C3Zfc+o7MfpGJuKoMo-veZfAP5W-QjcL60yBbW6K1Q@mail.gmail.com>
	<608991102.487557.1337690083804.JavaMail.open-xchange@webmail.easily.co.uk>
	<CAPPM_gREisqoe_h40wO00FWVJ3+NFMMckP0X-QFf5K9dYnwXPQ@mail.gmail.com>
	<CAPLrYESErNe8G_VbM-BgRr+GG5bLP_OvBBPtLY01NmSXGXaEfg@mail.gmail.com>
Message-ID: <1337701670464-4630919.post@n4.nabble.com>

I have not looked at chris's code in detail, but I downloaded the .zip and
there was no password protection and the R package it contains  consists of
a dll (his source i would presume, but not shared here) which has been
wrapped up in R functions.

Lets assume for a moment that the sourcecode on which the dll is based is
completely Chris's brainchild and work. In that case, wrapping it up in R
and making it available here, or anwhere else, is certainly NOT a violation
of GPL, because the dll is (assumption) not a *derivative* work of a GPL
product (xts, other packages, C source that is GPL, etc...) but his own.  In
that sense, i don't understand the rather frosty reception.

However, as has also been pointed out, distributing binary version of
something is not going to earn anyone any kudos in an open source community.
as simple as that.

Now if my assumption is wrong and the dll is indeed a *derivative* work of
something that itself is licensed under GPL, then and only then this whole
thing would be problematic and violate GPL. But the easiest fix would be to
include the dll's source in the package and voila! you are good to go.

The author would know best ...

-----
http://censix.com
--
View this message in context: http://r.789695.n4.nabble.com/Spread-discovery-and-backtester-code-tp4630831p4630919.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jeff.a.ryan at gmail.com  Tue May 22 18:10:45 2012
From: jeff.a.ryan at gmail.com (Jeffrey Ryan)
Date: Tue, 22 May 2012 11:10:45 -0500
Subject: [R-SIG-Finance] Spread discovery and backtester code
In-Reply-To: <1337701670464-4630919.post@n4.nabble.com>
Message-ID: <CBE12207.3DFD8%jeff.a.ryan@gmail.com>

My apologies for starting this.

I didn't mean to imply that Chris was intending to do anything wrong.  In
fact, from a technical GPL perspective, I don't really care too much.  My
focus, and my immediate reaction was for one reason only, discourage
future use of the list to distribute opaque code.  Binaries, passwords,
etc are that - no question about it.

Chris has done a great job in responding to my somewhat less than friendly
initial reply, in terms of passing along more details as well as
explaining his position, and fixing some of the issues that weren't so
clear at the start.

The point of this list, community, et al, is open source finance, within
an R context.  It seems (now) that that is exactly what Chris is doing.
For that, I want to chime in with the others and say thanks for making the
effort in sharing your code and ideas here, and I think many would be
willing to help in the process of getting it into more hands and in front
of more eyeballs.

Jeff

On 5/22/12 10:47 AM, "soren wilkening" <me at censix.com> wrote:

>I have not looked at chris's code in detail, but I downloaded the .zip and
>there was no password protection and the R package it contains  consists
>of
>a dll (his source i would presume, but not shared here) which has been
>wrapped up in R functions.
>
>Lets assume for a moment that the sourcecode on which the dll is based is
>completely Chris's brainchild and work. In that case, wrapping it up in R
>and making it available here, or anwhere else, is certainly NOT a
>violation
>of GPL, because the dll is (assumption) not a *derivative* work of a GPL
>product (xts, other packages, C source that is GPL, etc...) but his own.
>In
>that sense, i don't understand the rather frosty reception.
>
>However, as has also been pointed out, distributing binary version of
>something is not going to earn anyone any kudos in an open source
>community.
>as simple as that.
>
>Now if my assumption is wrong and the dll is indeed a *derivative* work of
>something that itself is licensed under GPL, then and only then this whole
>thing would be problematic and violate GPL. But the easiest fix would be
>to
>include the dll's source in the package and voila! you are good to go.
>
>The author would know best ...
>
>-----
>http://censix.com
>--
>View this message in context:
>http://r.789695.n4.nabble.com/Spread-discovery-and-backtester-code-tp46308
>31p4630919.html
>Sent from the Rmetrics mailing list archive at Nabble.com.
>
>_______________________________________________
>R-SIG-Finance at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>-- Subscriber-posting only. If you want to post, subscribe first.
>-- Also note that this is not the r-help list where general R questions
>should go.


From mimode_14 at hotmail.com  Tue May 22 22:51:18 2012
From: mimode_14 at hotmail.com (Minerva Mora)
Date: Tue, 22 May 2012 13:51:18 -0700 (PDT)
Subject: [R-SIG-Finance] What does mean MidTau in Nelson-Siegel's model?
In-Reply-To: <CAPPM_gSaKjp0DSiLQUzmLb8+NbfKZUEVurnVjvk3TqttnpUG1w@mail.gmail.com>
References: <1336587449581-4621294.post@n4.nabble.com>
	<CAPPM_gSaKjp0DSiLQUzmLb8+NbfKZUEVurnVjvk3TqttnpUG1w@mail.gmail.com>
Message-ID: <1337719877999-4630993.post@n4.nabble.com>

Thank you!!!


--
View this message in context: http://r.789695.n4.nabble.com/What-does-mean-MidTau-in-Nelson-Siegel-s-model-tp4621294p4630993.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From savio.debian at gmail.com  Wed May 23 04:58:18 2012
From: savio.debian at gmail.com (=?UTF-8?B?U8Ohdmlv?= M. Ramos)
Date: Tue, 22 May 2012 23:58:18 -0300
Subject: [R-SIG-Finance] Can't addMACD(). Is it a bug?
Message-ID: <20120522235818.24e76852@papai>

Hi,

addMACD don't work. I am doing something wrong or it is a bug.

The code:

require(quantmod)
lista <- c("PETR4.csv", "VALE3.csv")   
for (i in lista){
x <- as.xts(read.zoo(i, sep=",", format="%Y-%m-%d", header=TRUE))
y <- to.weekly(x)
chartSeries(y, type="candlesticks", multi.col=TRUE, theme="white", subset='last 54 months', name=i) 
addMACD(fast = 12, slow = 26, signal = 9, type = "EMA", histogram = TRUE)
saveChart('pdf',width=25,height=13)


The two files is attached.

[]'s 
-- 
S?vio M Ramos
Arquiteto, Rio, RJ
S? uso Linux desde 2000
www.debian.org

-------------- next part --------------
A non-text attachment was scrubbed...
Name: PETR4.csv
Type: text/csv
Size: 114072 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120522/609015e3/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: VALE3.csv
Type: text/csv
Size: 114072 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120522/609015e3/attachment-0001.bin>

From michael.weylandt at gmail.com  Wed May 23 05:15:15 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Tue, 22 May 2012 23:15:15 -0400
Subject: [R-SIG-Finance] Can't addMACD(). Is it a bug?
In-Reply-To: <20120522235818.24e76852@papai>
References: <20120522235818.24e76852@papai>
Message-ID: <CAAmySGMNb-VSFOFLg4PMTkk=_U5G1Dv2sHfPbGOYb7sURziQSg@mail.gmail.com>

Not runnable exactly as is.... where does the for loop have its close brace?

This works fine for me:

getSymbols("SPY", from = "1990-01-01")
y <- to.weekly(SPY)
chartSeries(y, type = "candlesticks", multi.col = TRUE, theme =
"white", subset = 'last 54 months', name = "SPY")
addMACD(fast = 12, slow = 26, signal = 9, type = "EMA", histogram = TRUE)
saveChart('pdf',width=25,height=13)

so try it for you.

Your data seems to work for me if I close the loop after MACD. Can you
display the error message or say more about why you think it doesn't
work?

Michael

On Tue, May 22, 2012 at 10:58 PM, S?vio M. Ramos <savio.debian at gmail.com> wrote:
> Hi,
>
> addMACD don't work. I am doing something wrong or it is a bug.
>
> The code:
>
> require(quantmod)
> lista <- c("PETR4.csv", "VALE3.csv")
> for (i in lista){
> x <- as.xts(read.zoo(i, sep=",", format="%Y-%m-%d", header=TRUE))
> y <- to.weekly(x)
> chartSeries(y, type="candlesticks", multi.col=TRUE, theme="white", subset='last 54 months', name=i)
> addMACD(fast = 12, slow = 26, signal = 9, type = "EMA", histogram = TRUE)
> saveChart('pdf',width=25,height=13)
>
>
> The two files is attached.
>
> []'s
> --
> S?vio M Ramos
> Arquiteto, Rio, RJ
> S? uso Linux desde 2000
> www.debian.org
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jaimie.villanueva at gmail.com  Wed May 23 08:07:10 2012
From: jaimie.villanueva at gmail.com (jaimie villanueva)
Date: Wed, 23 May 2012 08:07:10 +0200
Subject: [R-SIG-Finance] Help with armaFit function
In-Reply-To: <CAEXmNQAhGNYkkRbHjyHh5+0oUZxCqn8VyEuhsrmZTv5dWf2=LA@mail.gmail.com>
References: <CAEXmNQAhGNYkkRbHjyHh5+0oUZxCqn8VyEuhsrmZTv5dWf2=LA@mail.gmail.com>
Message-ID: <CAEXmNQBirxXg5788bAdwW=GebwfMpTrDK2CCF0MXQ2V5K8v47g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120523/25a08089/attachment.pl>

From linpack at 163.com  Wed May 23 20:54:49 2012
From: linpack at 163.com (linpack)
Date: Thu, 24 May 2012 02:54:49 +0800 (CST)
Subject: [R-SIG-Finance] =?utf-8?q?estimation_difference_between_ugarchrol?=
	=?utf-8?q?l_and_ugarchfit=E2=80=8F?=
Message-ID: <4a8c0431.13e74.1377b0d2c1b.Coremail.linpack@163.com>

 Hi there,

I have two questions (which might be related).
I am trying to predict mean and variance of monthly stock excess return using dividend price ratio with a eGarch model.

Data format is the following
column 1                column 2                column 3
gross S&P return   gross t-bill return    lagged dividend price ratio
#data dimension is nrow=750 and ncolumns =3 and the "redp.dat" file is attached.

code is following
library(rugarch);
dat=read.csv('C:\\redp.dat',header=F);

logexr=log(dat$V1)-log(dat$V2); # log of gross excess return
as.matrix(logexr);
dp=log(dat$V3); #log of dividend price ratio
as.matrix(dp);

spec = ugarchspec(variance.model = list(model = "eGARCH", garchOrder = c(1,1), external.regressors = as.matrix(dp)),
mean.model = list(armaOrder=c(0,0), include.mean = T, external.regressors = as.matrix(dp)), distribution.model = "norm");
# dividend price ratio are used as external regressor in both mean and variance equation

test=ugarchroll(spec, n.ahead=1, data=logexr, forecast.length=400, refit.every=1, refit.window="moving");
as.data.frame(test, which='LLH')
# where I did a rolling window forecast and display all the likelyhood

#then I did a double check on the rolling estimation by doing
for (j in 1:10) # I am justing printing the first ten loop step
myfit = ugarchfit(spec, logexr[j:349+j]);
likelihood(myfit)
end

# Question 1: the first likelihood from ugarchfit exactly equals that in ugarchroll, while the values are different from then on.
# When I modify the spec to exclude any external regressor, the two sets of likelihood are then exactly the same.
# reducing the forecast length (and therefore increase the length of the estimation window) seems to mitigate the estimation difference.

# Question 2: I then compare the density forecast
as.data.frame(test, which='density')
# this seem to produce
for (j in 1:10) # I am justing printing the first ten loop step
ugarchforecast(myfit, n.ahead=1); # and again when the likelihood are different, the forecast is different.
end
# however, I am a bit confused since I thought it should produce
for (j in 1:10)
ugarchforecast(myfit, n.ahead=1,external.forecasts = list(mregfor = dp[350+j], vregfor = dp[350+j] ));
end

looking forward to your help.


Guoshi

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120524/f914775e/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: redp.dat
Type: application/octet-stream
Size: 17280 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120524/f914775e/attachment.obj>

From alexios at 4dscape.com  Wed May 23 22:05:55 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Wed, 23 May 2012 21:05:55 +0100
Subject: [R-SIG-Finance]
 =?utf-8?q?estimation_difference_between_ugarchrol?=
 =?utf-8?q?l_and_ugarchfit=E2=80=8F?=
In-Reply-To: <4a8c0431.13e74.1377b0d2c1b.Coremail.linpack@163.com>
References: <4a8c0431.13e74.1377b0d2c1b.Coremail.linpack@163.com>
Message-ID: <4FBD4323.1070503@4dscape.com>

Hi Guoshi,

1.
#################################
# part of the code is straight out of the 'rugarch-rolling.R' file
# which I suggest you take a closer look at.
forecast.length = 400
refit.every = 1
n.ahead = 1
# your data size
T = 750
fwindex = t(rugarch:::.embed((T - forecast.length - n.ahead + 2):T, 
refit.every, by = refit.every, TRUE ) )
fitindx.start = c(fwindex[1,]-1)
fwindex.end = fwindex[refit.every,]
nf = length(fwindex.end)
forecast.length = floor(forecast.length/refit.every) * refit.every
####################################

# Do 10 fits to convince yourself it is the same:

lik = rep(0, 10)
for(i in 1:10){
dpx =  matrix(dp[(i*refit.every):(fitindx.start[i]+refit.every)], ncol=1)
spec = ugarchspec(variance.model = list(model = "eGARCH", garchOrder = 
c(1,1),
external.regressors =dpx ),
mean.model = list(armaOrder=c(0,0), include.mean = T, 
external.regressors = dpx), distribution.model = "norm");
myfit = ugarchfit(spec, 
logexr[(i*refit.every):(fitindx.start[i]+refit.every)], out.sample = 
refit.every, solver.control=list())
lik[i] = likelihood(myfit)
}

# use your the 'uGARCHroll' object to compare:
all.equal(lik, test at roll$LLH[1:10])
[1] TRUE


2. Correct. The rolling method does not take into account the presence 
of external regressors...most likely an omission on my part which I'll 
look to rectify during the next release. Do keep in mind that the 
ugarchroll method is just a convenience wrapper for fitting/forecasting 
with the existing methods.


-Alexios



On 23/05/2012 19:54, linpack wrote:
> Hi there,
>
> I have two questions (which might be related).
> I am trying to predict mean and variance of monthly stock excess return
> using dividend price ratio with a eGarch model.
>
> Data format is the following
> column 1 column 2 column 3
> gross S&P return gross t-bill return lagged dividend price ratio
> #data dimension is nrow=750 and ncolumns =3 and the "redp.dat" file is
> attached.
>
> code is following
> library(rugarch);
> dat=read.csv('C:\\redp.dat',header=F);
>
> logexr=log(dat$V1)-log(dat$V2); # log of gross excess return
> as.matrix(logexr);
> dp=log(dat$V3); #log of dividend price ratio
> as.matrix(dp);
>
> spec = ugarchspec(variance.model = li! st(model = "eGARCH", garchOrder =
> c(1,1), external.regressors = as.matrix(dp)),
> mean.model = list(armaOrder=c(0,0), include.mean = T,
> external.regressors = as.matrix(dp)), distribution.model = "norm");
> # dividend price ratio are used as external regressor in both mean and
> variance equation
>
> test=ugarchroll(spec, n.ahead=1, data=logexr, forecast.length=400,
> refit.every=1, refit.window="moving");
> as.data.frame(test, which='LLH')
> # where I did a rolling window forecast and display all the likelyhood
>
> #then I did a double check on the rolling estimation by doing
> for (j in 1:10) # I am justing printing the first ten loop step
> myfit = ugarchfit(spec, logexr[j:349+j]);
> likelihood(myfit)
> end
>
> # Question 1: the first likelihood from ugarchfit exactly equals that in
> ugarchroll, while the values are different from then on.
> # When I modify the spec to exclude any external regressor, the two sets
> of likelihood are then exactly the same.
> # reducing the forecast length (and therefore increase the length of the
> estimation window) seems to mitigate the estimation difference.
>
> # Question 2: I then compare the density forecast
> as.data.frame(test, which='density')
> # this seem to produce
> for (j in 1:10) # I am justing printing the first ten loop step
> ugarchforecast(myfit, n.ahead=1); # and again when the likelihood are
> different, the forecast is different.
> end
> # however, I am a bit confused since I thought it should produce
> for (j in 1:10)
> ugarchforecast(myfit, n.ahead=1,external.forecasts = list(mregfor =
> dp[350+j], vregfor = dp[350+j] ));
> end
>
> looking forward to your help.
>
>
> Guoshi
>
>
>
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From linpack at 163.com  Thu May 24 01:18:11 2012
From: linpack at 163.com (linpack)
Date: Thu, 24 May 2012 07:18:11 +0800 (CST)
Subject: [R-SIG-Finance]
 =?utf-8?q?estimation_difference_between_ugarchrol?=
 =?utf-8?q?l_and_ugarchfit=E2=80=8F?=
In-Reply-To: <4FBD4323.1070503@4dscape.com>
References: <4a8c0431.13e74.1377b0d2c1b.Coremail.linpack@163.com>
	<4FBD4323.1070503@4dscape.com>
Message-ID: <1d0b6837.13e8d.1377bfe4a68.Coremail.linpack@163.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120524/9087bd40/attachment.pl>

From alexios at 4dscape.com  Thu May 24 01:36:17 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Thu, 24 May 2012 00:36:17 +0100
Subject: [R-SIG-Finance]
 =?utf-8?q?estimation_difference_between_ugarchrol?=
 =?utf-8?q?l_and_ugarchfit=E2=80=8F?=
In-Reply-To: <1d0b6837.13e8d.1377bfe4a68.Coremail.linpack@163.com>
References: <4a8c0431.13e74.1377b0d2c1b.Coremail.linpack@163.com>
	<4FBD4323.1070503@4dscape.com>
	<1d0b6837.13e8d.1377bfe4a68.Coremail.linpack@163.com>
Message-ID: <4FBD7471.2000306@4dscape.com>

Hi Guoshi,

I've posted a fix on r-forge:
(see https://r-forge.r-project.org/projects/rgarch/).

Its version 1.0-9 revision 401,  and should be available to download 
once the check/build cycle completes.

Regards,
Alexios

On 24/05/2012 00:18, linpack wrote:
> Hi Alexios,
>
> Thanks a lot for your reply and also your enormous effort on the
> development of this pakage.
>
> 1. I see the reason now: I forgot to reset the specification in each
> step of the loop.
> Hope others who see this wont make such mistake anymore.
>
> 2. Really appreciate that, I guess I should just use
> myfit = ugarchfit(spec,
> logexr[(i*refit.every):(fitindx.start[i]+refit.every)], out.sample =
> refit.every, solver.control=list())
> ldpx=length(dpx)
> ugarchforecast(myfit, n.ahead=1, external.forecasts = list(mregfor =
> dpx[ ldpx], vregfor = dpx[ ldpx ]) )
> # where dpx[ldpx] is the last element of dpx which is already supplied
> to R when out.sample =1
>
> Thank you again.
>
> Best regards
> Guoshi
>
>
> At  2012-05-24  04:05:55,"alexios  ghalanos"  <alexios at 4dscape.com>  wrote:
>>Hi  Guoshi,
>>
>>1.
>>#################################
>>#  part  of  the  code  is  straight  out  of  the  'rugarch-rolling.R'  file
>>#  which  I  suggest  you  take  a  closer  look  at.
>>forecast.length  =  400
>>refit.every  =  1
>>n.ahead  =  1
>>#  your  data  size
>>T  =  750
>>fwindex  =  t(rugarch:::.embed((T  -  forecast.length  -  n.ahead  +  2):T,
>>refit.every,  by  =  refit.every,  TRUE  )  )
>>fitindx.start  =  c(fwindex[1,]-1)
>>fwindex.end  =  fwindex[refit.every,]
>>nf  =  length(fwindex.end)
>>forecast.length  =  floor(forecast.length/refit.every)  *  refit.every
>>####################################
>>
>>#  Do  10  fits  to  convince  yourself  it  is  the  same:
>>
>>lik  =  rep(0,  10)
>>for(i  in  1:10){
>>dpx  =    matrix(dp[(i*refit.every):(fitindx.start[i]+refit.every)],  ncol=1)
>>spec  =  ugarchspec(variance.model  =  list(model  =  "eGARCH",  garchOrder  =
>>c(1,1),
>>external.regressors  =dpx  ),
>>mean.model  =  list(armaOrder=c(0,0),  include.mean  =  T,
>>external.regressors  =  dpx),  distribution.model  =  "norm");
>>myfit  =  ugarchfit(spec,
>>logexr[(i*refit.every):(fitindx.start[i]+refit.every)],  out.sample  =
>>refit.every,  solver.control=list())
>>lik[i]  =  likelihood(myfit)
>>}
>>
>>#  use  your  the  'uGARCHroll'  object  to  compare:
>>all.equal(lik,  test at roll$LLH[1:10])
>>[1]  TRUE
>>
>>
>>2.  Correct.  The  rolling  method  does  not  take  into  account  the  presence
>>of  external  regressors...most  likely  an  omission  on  my  part  which  I'll
>>look  to  rectify  during  the  next  release.  Do  keep  in  mind  that  the
>>ugarchroll  method  is  just  a  convenience  wrapper  for  fitting/forecasting
>>with  the  existing  methods.
>>
>>
>>-Alexios
>>
>>
>>
>>On  23/05/2012  19:54,  linpack  wrote:
>>>  Hi  there,
>>>
>>>  I  have  two  questions  (which  might  be  related).
>>>  I  am  trying  to  predict  mean  and  variance  of  monthly  stock  excess  return
>>>  using  dividend  price  ratio  with  a  eGarch  model.
>>>
>>>  Data  format  is  the  following
>>>  column  1  column  2  column  3
>>>  gross  S&P  return  gross  t-bill  return  lagged  dividend  price  ratio
>>>  #data  dimension  is  nrow=750  and  ncolumns  =3  and  the  "redp.dat"  file  is
>>>  attached.
>>>
>>>  code  is  following
>>>  library(rugarch);
>>>  dat=read.csv('C:\\redp.dat',header=F);
>>>
>>>  logexr=log(dat$V1)-log(dat$V2);  #  log  of  gross  excess  return
>>>  as.matrix(logexr);
>>>  dp=log(dat$V3);  #log  of  dividend  price  ratio
>>>  as.matrix(dp);
>>>
>>>  spec  =  ugarchspec(variance.model  =  li!  st(model  =  "eGARCH",  garchOrder  =
>>>  c(1,1),  external.regressors  =  as.matrix(dp)),
>>>  mean.model  =  list(armaOrder=c(0,0),  include.mean  =  T,
>>>  external.regressors  =  as.matrix(dp)),  distribution.model  =  "norm");
>>>  #  dividend  price  ratio  are  used  as  external  regressor  in  both  mean  and
>>>  variance  equation
>>>
>>>  test=ugarchroll(spec,  n.ahead=1,  data=logexr,  forecast.length=400,
>>>  refit.every=1,  refit.window="moving");
>>>  as.data.frame(test,  which='LLH')
>>>  #  where  I  did  a  rolling  window  forecast  and  display  all  the  likelyhood
>>>
>>>  #then  I  did  a  double  check  on  the  rolling  estimation  by  doing
>>>  for  (j  in  1:10)  #  I  am  justing  printing  the  first  ten  loop  step
>>>  myfit  =  ugarchfit(spec,  logexr[j:349+j]);
>>>  likelihood(myfit)
>>>  end
>>>
>>>  #  Question  1:  the  first  likelihood  from  ugarchfit  exactly  equals  that  in
>>>  ugarchroll,  while  the  values  are  different  from  then  on.
>>>  #  When  I  modify  the  spec  to  exclude  any  external  regressor,  the  two  sets
>>>  of  likelihood  are  then  exactly  the  same.
>>>  #  reducing  the  forecast  length  (and  therefore  increase  the  length  of  the
>>>  estimation  window)  seems  to  mitigate  the  estimation  difference.
>>>
>>>  #  Question  2:  I  then  compare  the  density  forecast
>>>  as.data.frame(test,  which='density')
>>>  #  this  seem  to  produce
>>>  for  (j  in  1:10)  #  I  am  justing  printing  the  first  ten  loop  step
>>>  ugarchforecast(myfit,  n.ahead=1);  #  and  again  when  the  likelihood  are
>>>  different,  the  forecast  is  different.
>>>  end
>>>  #  however,  I  am  a  bit  confused  since  I  thought  it  should  produce
>>>  for  (j  in  1:10)
>>>  ugarchforecast(myfit,  n.ahead=1,external.forecasts  =  list(mregfor  =
>>>  dp[350+j],  vregfor  =  dp[350+j]  ));
>>>  end
>>>
>>>  looking  forward  to  your  help.
>>>
>>>
>>>  Guoshi
>>>
>>>
>>>
>>>
>>>
>>>  _______________________________________________
>>>  R-SIG-Finance at r-project.org  mailing  list
>>>  https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>  --  Subscriber-posting  only.  If  you  want  to  post,  subscribe  first.
>>>  --  Also  note  that  this  is  not  the  r-help  list  where  general  R  questions  should  go.
>>
>
>
>


From savio.debian at gmail.com  Thu May 24 04:32:54 2012
From: savio.debian at gmail.com (=?ISO-8859-1?Q?S=E1vio_Ramos?=)
Date: Wed, 23 May 2012 23:32:54 -0300
Subject: [R-SIG-Finance] Can't addMACD(). Is it a bug?
In-Reply-To: <CAAmySGMNb-VSFOFLg4PMTkk=_U5G1Dv2sHfPbGOYb7sURziQSg@mail.gmail.com>
References: <20120522235818.24e76852@papai>
	<CAAmySGMNb-VSFOFLg4PMTkk=_U5G1Dv2sHfPbGOYb7sURziQSg@mail.gmail.com>
Message-ID: <CADYnR6O8qRxvgb0sxsOjrU3hS4zc3gskB+sp0hmYMxj3FR6Fug@mail.gmail.com>

2012/5/23 R. Michael Weylandt <michael.weylandt at gmail.com>

> Not runnable exactly as is.... where does the for loop have its close
> brace?
>
> This works fine for me:
>
> getSymbols("SPY", from = "1990-01-01")
> y <- to.weekly(SPY)
> chartSeries(y, type = "candlesticks", multi.col = TRUE, theme =
> "white", subset = 'last 54 months', name = "SPY")
> addMACD(fast = 12, slow = 26, signal = 9, type = "EMA", histogram = TRUE)
> saveChart('pdf',width=25,height=13)
>
> so try it for you.
>
> I tried the code above and it works fine.


> Your data seems to work for me if I close the loop after MACD. Can you
> display the error message or say more about why you think it doesn't
> work?
>
> You can see in the next file attached that MACD is not added to graphic.

There is a warning message saying this:

1: In last.xts(c(86.99, 81.46, 82.11, 67.7, 75.02, 78.95, 82.59, 84.3,  :
  requested length is greater than original
2: In last.xts(c(59.25, 56.48, 56.1, 48, 49.01, 53.17, 53.4, 58.99,  :
  requested length is greater than original


P.S. I pasted the code missing the close of the loop. In the original code
the loop is closed.



> Michael
>
> On Tue, May 22, 2012 at 10:58 PM, S?vio M. Ramos <savio.debian at gmail.com>
> wrote:
> > Hi,
> >
> > addMACD don't work. I am doing something wrong or it is a bug.
> >
> > The code:
> >
> > require(quantmod)
> > lista <- c("PETR4.csv", "VALE3.csv")
> > for (i in lista){
> > x <- as.xts(read.zoo(i, sep=",", format="%Y-%m-%d", header=TRUE))
> > y <- to.weekly(x)
> > chartSeries(y, type="candlesticks", multi.col=TRUE, theme="white",
> subset='last 54 months', name=i)
> > addMACD(fast = 12, slow = 26, signal = 9, type = "EMA", histogram = TRUE)
> > saveChart('pdf',width=25,height=13)
> >
> >
> > The two files is attached.
> >
> > []'s
> > --
> > S?vio M Ramos
> > Arquiteto, Rio, RJ
> > S? uso Linux desde 2000
> > www.debian.org
> >
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions
> should go.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120523/7b00939e/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PETR4.csv.pdf
Type: application/pdf
Size: 16726 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120523/7b00939e/attachment.pdf>

From gsee000 at gmail.com  Thu May 24 04:47:56 2012
From: gsee000 at gmail.com (G See)
Date: Wed, 23 May 2012 21:47:56 -0500
Subject: [R-SIG-Finance] Can't addMACD(). Is it a bug?
In-Reply-To: <CADYnR6O8qRxvgb0sxsOjrU3hS4zc3gskB+sp0hmYMxj3FR6Fug@mail.gmail.com>
References: <20120522235818.24e76852@papai>
	<CAAmySGMNb-VSFOFLg4PMTkk=_U5G1Dv2sHfPbGOYb7sURziQSg@mail.gmail.com>
	<CADYnR6O8qRxvgb0sxsOjrU3hS4zc3gskB+sp0hmYMxj3FR6Fug@mail.gmail.com>
Message-ID: <CA+xi=qY3Z-AdH2vkMEvo65AkP6sco1-KUK6WkvP0xLdOS9LjVg@mail.gmail.com>

On Wed, May 23, 2012 at 9:32 PM, S?vio Ramos <savio.debian at gmail.com> wrote:
>
> You can see in the next file attached that MACD is not added to graphic.

S?vio,

Try wrapping plot around addMACD.  So, your code would look like this:

require(quantmod)
lista <- c("PETR4.csv", "VALE3.csv")
for (i in lista){
    x <- as.xts(read.zoo(i, sep=",", format="%Y-%m-%d", header=TRUE))
    y <- to.weekly(x)
    chartSeries(y, type="candlesticks", multi.col=TRUE, theme="white",
subset='last 54 months', name=i)
    plot(addMACD(fast = 12, slow = 26, signal = 9, type = "EMA",
histogram = TRUE))
}

HTH,
Garrett


From alec.fei at gmail.com  Thu May 24 16:58:14 2012
From: alec.fei at gmail.com (Alex Fei)
Date: Thu, 24 May 2012 07:58:14 -0700 (PDT)
Subject: [R-SIG-Finance] rugarchsim / garchsim with a user-defined time
 series matrix of standardized i.i.d. disturbances
Message-ID: <1337871494500-4631206.post@n4.nabble.com>

Hi (Alexios)

Is it possible to simulate garch paths with a user-defined time series
matrix of standardized i.i.d. disturbances, like the 
http://www.mathworks.co.uk/help/toolbox/econ/garchsim.html option input
'State' of garchsim  in Matlab? 

In Matlab, I can run

[forecastInnovations, forecastSigmas, forecastSeries] = garchsim(Spec,
NumSamples, NumPaths, *State*, [], [], PreInnovations, PreSigmas, PreSeries)

I expect to do the same task in R but it seems rugarchsim does not have the
option input: 

ugarchsim(fit, n.sim = 1000, n.start = 0, m.sim = 1,startMethod =
c("unconditional", "sample"), presigma = NA, prereturns = NA, preresiduals =
NA, rseed = NA, custom.dist = list(name = NA, distfit = NA), mexsimdata =
NULL, vexsimdata = NULL)

any help please. Thank you

 

--
View this message in context: http://r.789695.n4.nabble.com/rugarchsim-garchsim-with-a-user-defined-time-series-matrix-of-standardized-i-i-d-disturbances-tp4631206.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Thu May 24 17:58:01 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Thu, 24 May 2012 16:58:01 +0100
Subject: [R-SIG-Finance] rugarchsim / garchsim with a user-defined time
 series matrix of standardized i.i.d. disturbances
In-Reply-To: <1337871494500-4631206.post@n4.nabble.com>
References: <1337871494500-4631206.post@n4.nabble.com>
Message-ID: <4FBE5A89.80002@4dscape.com>

See help on the "custom.dist" option i.e. effectively pass a matrix of 
standardized innovations to 'distfit' and set name='sample'. See 
'rugarch.test1g' in the rugarch.tests folder for such an example.

-Alexios


On 24/05/2012 15:58, Alex Fei wrote:
> Hi (Alexios)
>
> Is it possible to simulate garch paths with a user-defined time series
> matrix of standardized i.i.d. disturbances, like the
> http://www.mathworks.co.uk/help/toolbox/econ/garchsim.html option input
> 'State' of garchsim  in Matlab?
>
> In Matlab, I can run
>
> [forecastInnovations, forecastSigmas, forecastSeries] = garchsim(Spec,
> NumSamples, NumPaths, *State*, [], [], PreInnovations, PreSigmas, PreSeries)
>
> I expect to do the same task in R but it seems rugarchsim does not have the
> option input:
>
> ugarchsim(fit, n.sim = 1000, n.start = 0, m.sim = 1,startMethod =
> c("unconditional", "sample"), presigma = NA, prereturns = NA, preresiduals =
> NA, rseed = NA, custom.dist = list(name = NA, distfit = NA), mexsimdata =
> NULL, vexsimdata = NULL)
>
> any help please. Thank you
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/rugarchsim-garchsim-with-a-user-defined-time-series-matrix-of-standardized-i-i-d-disturbances-tp4631206.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From gordon.erlebach at gmail.com  Thu May 24 20:46:44 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Thu, 24 May 2012 14:46:44 -0400
Subject: [R-SIG-Finance] candle charting on MacosX Lion
Message-ID: <CAELivkLLKYj_Sp6mtXfa=JM_8=wicPC++7-+hNRKnKCC-WCxGA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120524/4d8c85b6/attachment.pl>

From alec.fei at gmail.com  Fri May 25 00:01:36 2012
From: alec.fei at gmail.com (Alex Fei)
Date: Thu, 24 May 2012 15:01:36 -0700 (PDT)
Subject: [R-SIG-Finance] rugarchsim / garchsim with a user-defined time
 series matrix of standardized i.i.d. disturbances
In-Reply-To: <4FBE5A89.80002@4dscape.com>
References: <1337871494500-4631206.post@n4.nabble.com>
	<4FBE5A89.80002@4dscape.com>
Message-ID: <1337896896425-4631257.post@n4.nabble.com>

Thank you.

I have a 30*1000 dim iid standardized time series, saved as Z, and I want to
simulate 30 paths with 1000 simulations each path. I am a bit confused with
the below two:

sim1<- ugarchsim(fit.sged, n.sim = 30, m.sim = 1000, *startMethod =
"sample"*, custom.dist = list(name = "sample", distfit = Z, type = "z")) 

sim2<- ugarchsim(fit.sged, n.sim = 30, m.sim = 1000, presigma =
fit at fit.sigma[length(Data)], prereturns = Data[length(Data)],  preresiduals
= fit at fit.residuals[length(Data)], custom.dist = list(name = "sample",
distfit = Z, type = "z")) 

In help doc, it says that if startMethod = "sample", the starting values for
the simulation will be the ending values of the actual data from the ?t
object. So, does it means the starting value of sim1 and sim2 are same? What
is the meaning of name = "sample" in sim2?




--
View this message in context: http://r.789695.n4.nabble.com/rugarchsim-garchsim-with-a-user-defined-time-series-matrix-of-standardized-i-i-d-disturbances-tp4631206p4631257.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Fri May 25 00:35:57 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Thu, 24 May 2012 23:35:57 +0100
Subject: [R-SIG-Finance] rugarchsim / garchsim with a user-defined time
 series matrix of standardized i.i.d. disturbances
In-Reply-To: <1337896896425-4631257.post@n4.nabble.com>
References: <1337871494500-4631206.post@n4.nabble.com>
	<4FBE5A89.80002@4dscape.com>
	<1337896896425-4631257.post@n4.nabble.com>
Message-ID: <4FBEB7CD.7040802@4dscape.com>

1. if you want 30 paths with each path of length 1000 then set 
n.sim=1000, m.sim=30.

2. Yes.
# Example:
library(rugarch)
data(sp500ret)
spec=ugarchspec()
z = matrix(rnorm(1000*30), ncol = 30)
Data = sp500ret[,1]
fit = ugarchfit(spec, Data)

sim1<- ugarchsim(fit, n.sim = 1000, m.sim = 30, startMethod = "sample", 
custom.dist = list(name = "sample", distfit = z, type = "z"))

sim2<- ugarchsim(fit, n.sim = 1000, m.sim = 30, presigma = 
fit at fit$sigma[length(Data)], prereturns = Data[length(Data)], 
preresiduals = fit at fit$residuals[length(Data)],
custom.dist = list(name = "sample", distfit = z, type = "z"))

all.equal(sim1 at simulation$seriesSim[1:10,1:10],sim2 at simulation$seriesSim[1:10,1:10])
[1] TRUE

3. name="sample" simply indicates that you are passing a sample matrix. 
You could have also passed, as per the documentation, the name of a 
distribution function (whose random number function precedes the name 
with the letter "r" as is the practice) and an object containing the 
parameters of the distribution:
# Example:
obj = list(mu = 0, sd=1)
# assume the distribution is called "f" so that "rf" denotes
# the random number function of "f"

rf = function(n, obj){
rnorm(n, mean = obj$mu, sd = obj$sd)
}
sim3<- ugarchsim(fit, n.sim = 1000, m.sim = 30, presigma = 
fit at fit$sigma[length(Data)],
prereturns = Data[length(Data)],  preresiduals = 
fit at fit$residuals[length(Data)],
custom.dist = list(name = "f", distfit = obj))

sim3 at simulation$seriesSim[1:10,1:10]

At present there seems to be a problem with the function passing the 
"rseed" argument to the generator (so that you have reproducible 
results). However, if you set the seed before calling the function each 
time it will work:

set.seed(2)
sim3<- ugarchsim(fit, n.sim = 1000, m.sim = 30, presigma = 
fit at fit$sigma[length(Data)],
prereturns = Data[length(Data)],  preresiduals = 
fit at fit$residuals[length(Data)],
custom.dist = list(name = "f", distfit = obj))
set.seed(2)
sim4<- ugarchsim(fit, n.sim = 1000, m.sim = 30, presigma = 
fit at fit$sigma[length(Data)],
prereturns = Data[length(Data)],  preresiduals = 
fit at fit$residuals[length(Data)],
custom.dist = list(name = "f", distfit = obj))

all.equal(sim3 at simulation$seriesSim[1:10,1:10], 
sim3 at simulation$seriesSim[1:10,1:10])
[1] TRUE

-Alexios


On 24/05/2012 23:01, Alex Fei wrote:
> Thank you.
>
> I have a 30*1000 dim iid standardized time series, saved as Z, and I want to
> simulate 30 paths with 1000 simulations each path. I am a bit confused with
> the below two:
>
> sim1<- ugarchsim(fit.sged, n.sim = 30, m.sim = 1000, *startMethod =
> "sample"*, custom.dist = list(name = "sample", distfit = Z, type = "z"))
>
> sim2<- ugarchsim(fit.sged, n.sim = 30, m.sim = 1000, presigma =
> fit at fit.sigma[length(Data)], prereturns = Data[length(Data)],  preresiduals
> = fit at fit.residuals[length(Data)], custom.dist = list(name = "sample",
> distfit = Z, type = "z"))
>
> In help doc, it says that if startMethod = "sample", the starting values for
> the simulation will be the ending values of the actual data from the ?t
> object. So, does it means the starting value of sim1 and sim2 are same? What
> is the meaning of name = "sample" in sim2?
>
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/rugarchsim-garchsim-with-a-user-defined-time-series-matrix-of-standardized-i-i-d-disturbances-tp4631206p4631257.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From costas.vorlow at gmail.com  Fri May 25 18:35:31 2012
From: costas.vorlow at gmail.com (Costas Vorlow)
Date: Fri, 25 May 2012 19:35:31 +0300
Subject: [R-SIG-Finance] 2 time/date columns to one
Message-ID: <CABfqsR_=X-fvrz=Bx02GfXSNUJ+_MER_UjiBfQ7NnAWrgx97GQ@mail.gmail.com>

Hello,

I have trouble connecting times with dates to create a "proper" time sequence:

5/22/2012	1640	318295
5/22/2012	1641	432517
5/22/2012	1642	328233
5/22/2012	1643	444692
5/22/2012	1644	217440
5/22/2012	1645	650593
5/22/2012	1646	207366
5/22/2012	1647	334881
5/22/2012	1648	133929
5/22/2012	1649	267117
5/22/2012	1650	179423
5/22/2012	1651	259668
5/22/2012	1652	341661


The table above is a time sequence. The 1st column on the left is the
date and the next column contains the time of day (1640= 4:40pm). The
3rd column is the price of a variable at that point in time. Hence, I
want to convert the above table to a time series variable (xts, zoo,
etc) of some sort. Any pointer extremely welcome ( I know this is a
lame question)...

Many thanks in advance,

Costas

-- 

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|c|o|s|t|a|s|@|v|o|r|l|o|w|.|o|r|g|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


From xiao.x.shi at gmail.com  Fri May 25 18:48:37 2012
From: xiao.x.shi at gmail.com (Xiaoxiao Shi)
Date: Fri, 25 May 2012 11:48:37 -0500
Subject: [R-SIG-Finance] 2 time/date columns to one
In-Reply-To: <CABfqsR_=X-fvrz=Bx02GfXSNUJ+_MER_UjiBfQ7NnAWrgx97GQ@mail.gmail.com>
References: <CABfqsR_=X-fvrz=Bx02GfXSNUJ+_MER_UjiBfQ7NnAWrgx97GQ@mail.gmail.com>
Message-ID: <CAFsTYug+JwEhDPO3=rRmSN0Z8FWcn4OvuBTE5_3efUANrrpG2w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120525/a37d5843/attachment.pl>

From michael.weylandt at gmail.com  Fri May 25 18:49:09 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Fri, 25 May 2012 12:49:09 -0400
Subject: [R-SIG-Finance] 2 time/date columns to one
In-Reply-To: <CABfqsR_=X-fvrz=Bx02GfXSNUJ+_MER_UjiBfQ7NnAWrgx97GQ@mail.gmail.com>
References: <CABfqsR_=X-fvrz=Bx02GfXSNUJ+_MER_UjiBfQ7NnAWrgx97GQ@mail.gmail.com>
Message-ID: <CAAmySGOd0q3jyczOAG_cfGLr+-F9ai0TXpK-+tVjitxyLj=i0Q@mail.gmail.com>

Use xts (always use xts!) and do something like this:

Suppose your data is in three columns called "dat"

xts(dat[,3], as.POSIXct(paste(dat[,1], dat[,2], format = "%m/%d/%Y %H%M"))

This will make an xts of your data taking the third column as the
data-bit and using the first two to make a POSIXct (time) object
converting them using the format specification.

Hope that helps,

Michael

On Fri, May 25, 2012 at 12:35 PM, Costas Vorlow <costas.vorlow at gmail.com> wrote:
> Hello,
>
> I have trouble connecting times with dates to create a "proper" time sequence:
>
> 5/22/2012 ? ? ? 1640 ? ?318295
> 5/22/2012 ? ? ? 1641 ? ?432517
> 5/22/2012 ? ? ? 1642 ? ?328233
> 5/22/2012 ? ? ? 1643 ? ?444692
> 5/22/2012 ? ? ? 1644 ? ?217440
> 5/22/2012 ? ? ? 1645 ? ?650593
> 5/22/2012 ? ? ? 1646 ? ?207366
> 5/22/2012 ? ? ? 1647 ? ?334881
> 5/22/2012 ? ? ? 1648 ? ?133929
> 5/22/2012 ? ? ? 1649 ? ?267117
> 5/22/2012 ? ? ? 1650 ? ?179423
> 5/22/2012 ? ? ? 1651 ? ?259668
> 5/22/2012 ? ? ? 1652 ? ?341661
>
>
> The table above is a time sequence. The 1st column on the left is the
> date and the next column contains the time of day (1640= 4:40pm). The
> 3rd column is the price of a variable at that point in time. Hence, I
> want to convert the above table to a time series variable (xts, zoo,
> etc) of some sort. Any pointer extremely welcome ( I know this is a
> lame question)...
>
> Many thanks in advance,
>
> Costas
>
> --
>
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
> |c|o|s|t|a|s|@|v|o|r|l|o|w|.|o|r|g|
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From cfriedem at gmail.com  Fri May 25 18:58:34 2012
From: cfriedem at gmail.com (chuck)
Date: Fri, 25 May 2012 09:58:34 -0700 (PDT)
Subject: [R-SIG-Finance] 2 time/date columns to one
In-Reply-To: <CABfqsR_=X-fvrz=Bx02GfXSNUJ+_MER_UjiBfQ7NnAWrgx97GQ@mail.gmail.com>
References: <CABfqsR_=X-fvrz=Bx02GfXSNUJ+_MER_UjiBfQ7NnAWrgx97GQ@mail.gmail.com>
Message-ID: <1337965114572-4631359.post@n4.nabble.com>

In order to create a zoo or xts object, you need to provide a time-like index
to the xts/zoo object constructor. Something like the following may work for
you:

# make dummy data
dates <- rep("5/22/2012",10)
times <- 1640 + 0:9
prices <- rnorm(10,20000,10000)

# now use data to build xts object
series <- xts(prices, as.POSIXct(paste(dates,times), format="%m/%d/%Y
%H%M"))

If these columns are coming from a csv file, you can use read.zoo's index
function argument to do it all in one step:

# say your dates are column 1, and times are column 2, prices are column 3
of your csv file...
index.func <- function(dd,tt) as.POSIXct(paste(dd,tt), format="%m/%d/%Y
%H%M")
series <- read.zoo(file = "file.csv", colClasses =
c("character","character","numeric"), index.column=list(1,2),
FUN=index.func)

I hope that makes sense.

--
View this message in context: http://r.789695.n4.nabble.com/2-time-date-columns-to-one-tp4631353p4631359.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From costas.vorlow at gmail.com  Fri May 25 19:00:46 2012
From: costas.vorlow at gmail.com (Costas Vorlow)
Date: Fri, 25 May 2012 20:00:46 +0300
Subject: [R-SIG-Finance] 2 time/date columns to one
In-Reply-To: <CAAmySGOd0q3jyczOAG_cfGLr+-F9ai0TXpK-+tVjitxyLj=i0Q@mail.gmail.com>
References: <CABfqsR_=X-fvrz=Bx02GfXSNUJ+_MER_UjiBfQ7NnAWrgx97GQ@mail.gmail.com>
	<CAAmySGOd0q3jyczOAG_cfGLr+-F9ai0TXpK-+tVjitxyLj=i0Q@mail.gmail.com>
Message-ID: <CABfqsR-fqR7CXFWtkaFVPSjKVBnafRJc1eWqxuH1K8-pSW_oOA@mail.gmail.com>

Hi,

I am getting:

Error in as.POSIXlt.character(x, tz, ...) :
  character string is not in a standard unambiguous format

I am also using:

Sys.setenv(TZ="GMT")

just in case.

Any thoughts?

On 25 May 2012 19:49, R. Michael Weylandt <michael.weylandt at gmail.com> wrote:
> Use xts (always use xts!) and do something like this:
>
> Suppose your data is in three columns called "dat"
>
> xts(dat[,3], as.POSIXct(paste(dat[,1], dat[,2], format = "%m/%d/%Y %H%M"))
>
> This will make an xts of your data taking the third column as the
> data-bit and using the first two to make a POSIXct (time) object
> converting them using the format specification.
>
> Hope that helps,
>
> Michael
>
> On Fri, May 25, 2012 at 12:35 PM, Costas Vorlow <costas.vorlow at gmail.com> wrote:
>> Hello,
>>
>> I have trouble connecting times with dates to create a "proper" time sequence:
>>
>> 5/22/2012 ? ? ? 1640 ? ?318295
>> 5/22/2012 ? ? ? 1641 ? ?432517
>> 5/22/2012 ? ? ? 1642 ? ?328233
>> 5/22/2012 ? ? ? 1643 ? ?444692
>> 5/22/2012 ? ? ? 1644 ? ?217440
>> 5/22/2012 ? ? ? 1645 ? ?650593
>> 5/22/2012 ? ? ? 1646 ? ?207366
>> 5/22/2012 ? ? ? 1647 ? ?334881
>> 5/22/2012 ? ? ? 1648 ? ?133929
>> 5/22/2012 ? ? ? 1649 ? ?267117
>> 5/22/2012 ? ? ? 1650 ? ?179423
>> 5/22/2012 ? ? ? 1651 ? ?259668
>> 5/22/2012 ? ? ? 1652 ? ?341661
>>
>>
>> The table above is a time sequence. The 1st column on the left is the
>> date and the next column contains the time of day (1640= 4:40pm). The
>> 3rd column is the price of a variable at that point in time. Hence, I
>> want to convert the above table to a time series variable (xts, zoo,
>> etc) of some sort. Any pointer extremely welcome ( I know this is a
>> lame question)...
>>
>> Many thanks in advance,
>>
>> Costas
>>
>> --
>>
>> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
>> |c|o|s|t|a|s|@|v|o|r|l|o|w|.|o|r|g|
>> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.



-- 

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|c|o|s|t|a|s|@|v|o|r|l|o|w|.|o|r|g|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


From michael.weylandt at gmail.com  Fri May 25 19:05:23 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Fri, 25 May 2012 13:05:23 -0400
Subject: [R-SIG-Finance] 2 time/date columns to one
In-Reply-To: <CABfqsR-fqR7CXFWtkaFVPSjKVBnafRJc1eWqxuH1K8-pSW_oOA@mail.gmail.com>
References: <CABfqsR_=X-fvrz=Bx02GfXSNUJ+_MER_UjiBfQ7NnAWrgx97GQ@mail.gmail.com>
	<CAAmySGOd0q3jyczOAG_cfGLr+-F9ai0TXpK-+tVjitxyLj=i0Q@mail.gmail.com>
	<CABfqsR-fqR7CXFWtkaFVPSjKVBnafRJc1eWqxuH1K8-pSW_oOA@mail.gmail.com>
Message-ID: <CAAmySGOaWQ6V51U3p00vE+jSOQJoN-z-0DaSz7Vx06xbmPtiPg@mail.gmail.com>

Oh.... my mistake... parenthesis in the wrong spot -- format should be
an argument to as.POSIXct, not paste -- try this:

xts(dat[,3], as.POSIXct(paste(dat[,1], dat[,2]), format = "%m/%d/%Y %H%M"))

Best,
Michael

On Fri, May 25, 2012 at 1:00 PM, Costas Vorlow <costas.vorlow at gmail.com> wrote:
> Hi,
>
> I am getting:
>
> Error in as.POSIXlt.character(x, tz, ...) :
> ?character string is not in a standard unambiguous format
>
> I am also using:
>
> Sys.setenv(TZ="GMT")
>
> just in case.
>
> Any thoughts?
>
> On 25 May 2012 19:49, R. Michael Weylandt <michael.weylandt at gmail.com> wrote:
>> Use xts (always use xts!) and do something like this:
>>
>> Suppose your data is in three columns called "dat"
>>
>> xts(dat[,3], as.POSIXct(paste(dat[,1], dat[,2], format = "%m/%d/%Y %H%M"))
>>
>> This will make an xts of your data taking the third column as the
>> data-bit and using the first two to make a POSIXct (time) object
>> converting them using the format specification.
>>
>> Hope that helps,
>>
>> Michael
>>
>> On Fri, May 25, 2012 at 12:35 PM, Costas Vorlow <costas.vorlow at gmail.com> wrote:
>>> Hello,
>>>
>>> I have trouble connecting times with dates to create a "proper" time sequence:
>>>
>>> 5/22/2012 ? ? ? 1640 ? ?318295
>>> 5/22/2012 ? ? ? 1641 ? ?432517
>>> 5/22/2012 ? ? ? 1642 ? ?328233
>>> 5/22/2012 ? ? ? 1643 ? ?444692
>>> 5/22/2012 ? ? ? 1644 ? ?217440
>>> 5/22/2012 ? ? ? 1645 ? ?650593
>>> 5/22/2012 ? ? ? 1646 ? ?207366
>>> 5/22/2012 ? ? ? 1647 ? ?334881
>>> 5/22/2012 ? ? ? 1648 ? ?133929
>>> 5/22/2012 ? ? ? 1649 ? ?267117
>>> 5/22/2012 ? ? ? 1650 ? ?179423
>>> 5/22/2012 ? ? ? 1651 ? ?259668
>>> 5/22/2012 ? ? ? 1652 ? ?341661
>>>
>>>
>>> The table above is a time sequence. The 1st column on the left is the
>>> date and the next column contains the time of day (1640= 4:40pm). The
>>> 3rd column is the price of a variable at that point in time. Hence, I
>>> want to convert the above table to a time series variable (xts, zoo,
>>> etc) of some sort. Any pointer extremely welcome ( I know this is a
>>> lame question)...
>>>
>>> Many thanks in advance,
>>>
>>> Costas
>>>
>>> --
>>>
>>> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
>>> |c|o|s|t|a|s|@|v|o|r|l|o|w|.|o|r|g|
>>> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>
>
>
> --
>
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
> |c|o|s|t|a|s|@|v|o|r|l|o|w|.|o|r|g|
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


From eric.thungstrom at gmail.com  Sat May 26 20:51:54 2012
From: eric.thungstrom at gmail.com (Eric Thungstom)
Date: Sat, 26 May 2012 14:51:54 -0400
Subject: [R-SIG-Finance] plotting with dates
Message-ID: <CACv3XEAQB3fZSsqPs+Q5gR1etw9PSA-bkeqwe=UokhoFFKgK2A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120526/70b760ef/attachment.pl>

From kent.russell at live.com  Sat May 26 21:47:13 2012
From: kent.russell at live.com (Kenton Russell)
Date: Sat, 26 May 2012 14:47:13 -0500
Subject: [R-SIG-Finance] plotting with dates
In-Reply-To: <CACv3XEAQB3fZSsqPs+Q5gR1etw9PSA-bkeqwe=UokhoFFKgK2A@mail.gmail.com>
References: <CACv3XEAQB3fZSsqPs+Q5gR1etw9PSA-bkeqwe=UokhoFFKgK2A@mail.gmail.com>
Message-ID: <COL124-W529B971E690C7F1E601EFFB060@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120526/d65e452b/attachment.pl>

From brian at braverock.com  Sat May 26 22:23:05 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sat, 26 May 2012 15:23:05 -0500
Subject: [R-SIG-Finance] plotting with dates
In-Reply-To: <CACv3XEAQB3fZSsqPs+Q5gR1etw9PSA-bkeqwe=UokhoFFKgK2A@mail.gmail.com>
References: <CACv3XEAQB3fZSsqPs+Q5gR1etw9PSA-bkeqwe=UokhoFFKgK2A@mail.gmail.com>
Message-ID: <4FC13BA9.1030107@braverock.com>

On 05/26/2012 01:51 PM, Eric Thungstom wrote:
> How do I get this to plot with dates ? The x-axis is coming through with
> numbers.
>
> require(quantmod)
> require(forecast)
> getSymbols("^GSPC", from='2006-01-06', to=Sys.Date())
> z<- Ad(GSPC)
> y<-forecast(z)
> summary(y)
> plot(y)

The forecast object is indexed to the same data, they're just a mess.

I suggest extracting the slots you want from the forecast object.

e.g.

z$fitted<-as.vector(y$fitted)
chart_Series(z$fitted)
require(PerformanceAnalytics)
chart.TimeSeries(z)
chart.TimeSeries(z$fitted)


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From johanna.slomp at gmail.com  Sun May 27 16:21:26 2012
From: johanna.slomp at gmail.com (Johanna Slomp)
Date: Sun, 27 May 2012 16:21:26 +0200
Subject: [R-SIG-Finance] ugarchforecast
Message-ID: <CAJeDcBmM++ZJZAYWxmEZTKP7Y=j09MF3pDwEBXk2+XrTWPQymw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120527/7e9837c0/attachment.pl>

From alexios at 4dscape.com  Sun May 27 16:34:57 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Sun, 27 May 2012 15:34:57 +0100
Subject: [R-SIG-Finance] ugarchforecast
In-Reply-To: <CAJeDcBmM++ZJZAYWxmEZTKP7Y=j09MF3pDwEBXk2+XrTWPQymw@mail.gmail.com>
References: <CAJeDcBmM++ZJZAYWxmEZTKP7Y=j09MF3pDwEBXk2+XrTWPQymw@mail.gmail.com>
Message-ID: <4FC23B91.7030506@4dscape.com>

Since you've not said what the class of share1 is ('class(share1)'), 
your best bet is to pass the "share1" as an unnamed numeric vector to 
the fit routine.
-Alexios

On 27/05/2012 15:21, Johanna Slomp wrote:
> Hi R users
> I have some problems getting the t+1 variance using rugarch package
> the simplest model is:
>
> spec1<-
> ugarchspec(variance.model=list(model="sGARCH",garchOrder=c(1,1),submodel=NULL),
> mean.model=list(armaOrder=c(0,0)), distribution.model="norm")
> fit1<- ugarchfit(data=share1,spec=spec1)
> sgarch.pred2 = ugarchforecast(fit1, n.ahead = 1)
>
>   the forecast gives me the error:
>
> *Errore in format.default(*
>
> *Dates[n], "%m/%d/%y") :
>    argomento 'trim' non valido*
>
>
>
> The file share1 have just the daily log return of a share.
>
> How can i fix it?
>
> Regards
>
> Jo
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From alexios at 4dscape.com  Sun May 27 17:58:51 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Sun, 27 May 2012 16:58:51 +0100
Subject: [R-SIG-Finance] ugarchforecast
In-Reply-To: <CAJeDcB=5rMs_dcsRBrKt80zLxoXOYVkhU4NoKYUjQmaDGd4iuw@mail.gmail.com>
References: <CAJeDcBmM++ZJZAYWxmEZTKP7Y=j09MF3pDwEBXk2+XrTWPQymw@mail.gmail.com>
	<4FC23B91.7030506@4dscape.com>
	<CAJeDcBm5czas6sqkaP7+EHsgt7dA4jMZurnM1MZMHbSwgXRVLw@mail.gmail.com>
	<4FC247AE.3050801@4dscape.com>
	<CAJeDcB=5rMs_dcsRBrKt80zLxoXOYVkhU4NoKYUjQmaDGd4iuw@mail.gmail.com>
Message-ID: <4FC24F3B.8050908@4dscape.com>

I really don't understand what you mean about the eGARCH model.
See the comparison against the Bollerslev-Ghysels published benchmark
by running the benchmarking code:
ugarchbench( benchmark = "published" )

Also, I do not benchmark against S-PLUS nor do I consider it to be the 
standard for benchmarking of GARCH models. The code in rugarch is open 
source so feel free to look under the hood and decide on whether it 
meets, or not, your requirements.

-Alexios

On 27/05/2012 16:40, Johanna Slomp wrote:
> it works thanks!!
> for the egarch, i have doubt if it work as the model used in S-plus, in
> the book it is defined as an alternative model, if the model is just
> like in the manual every explanaition is like in the books!
> thanks again
> Jo
>
> 2012/5/27 alexios ghalanos <alexios at 4dscape.com
> <mailto:alexios at 4dscape.com>>
>
>     1. unname(as.numeric(share1))
>     2. What more information do you want than is in the vignette?
>     The formula for calculating EGARCH is clearly defined.
>
>     -Alexios
>
>
>     On 27/05/2012 16:05, Johanna Slomp wrote:
>
>         1. thanks for the reply, the file is a matrix 1x1000. How I pass
>         it as
>         an unnamed numeric vector? should I specify it in the routine?
>         2. Does exist another manual different than Introduction to rugarch
>         package version 1.0-8? I would like to have more information
>         about the
>         egarch formula and parameters (model form used in R).
>         Thanks
>         Jo
>
>         2012/5/27 alexios ghalanos <alexios at 4dscape.com
>         <mailto:alexios at 4dscape.com>
>         <mailto:alexios at 4dscape.com <mailto:alexios at 4dscape.com>>>
>
>
>             Since you've not said what the class of share1 is
>         ('class(share1)'),
>             your best bet is to pass the "share1" as an unnamed numeric
>         vector
>             to the fit routine.
>             -Alexios
>
>
>             On 27/05/2012 15:21, Johanna Slomp wrote:
>
>                 Hi R users
>                 I have some problems getting the t+1 variance using
>         rugarch package
>                 the simplest model is:
>
>                 spec1<-
>
>           ugarchspec(variance.model=____list(model="sGARCH",____garchOrder=c(1,1),submodel=____NULL),
>                 mean.model=list(armaOrder=c(0,____0)),
>         distribution.model="norm")
>                 fit1<- ugarchfit(data=share1,spec=____spec1)
>
>                 sgarch.pred2 = ugarchforecast(fit1, n.ahead = 1)
>
>                   the forecast gives me the error:
>
>                 *Errore in format.default(*
>
>                 *Dates[n], "%m/%d/%y") :
>                    argomento 'trim' non valido*
>
>
>
>
>                 The file share1 have just the daily log return of a share.
>
>                 How can i fix it?
>
>                 Regards
>
>                 Jo
>
>                         [[alternative HTML version deleted]]
>
>                 ___________________________________________________
>         R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org>
>         <mailto:R-SIG-Finance at r-__project.org
>         <mailto:R-SIG-Finance at r-project.org>>
>                 mailing list
>         https://stat.ethz.ch/mailman/____listinfo/r-sig-finance
>         <https://stat.ethz.ch/mailman/__listinfo/r-sig-finance>
>
>         <https://stat.ethz.ch/mailman/__listinfo/r-sig-finance
>         <https://stat.ethz.ch/mailman/listinfo/r-sig-finance>>
>                 -- Subscriber-posting only. If you want to post,
>         subscribe first.
>                 -- Also note that this is not the r-help list where
>         general R
>                 questions should go.
>
>
>
>
>


From worik.stanton at gmail.com  Mon May 28 01:22:41 2012
From: worik.stanton at gmail.com (Worik Stanton)
Date: Mon, 28 May 2012 11:22:41 +1200
Subject: [R-SIG-Finance] Methods of installing R on Linux
Message-ID: <4FC2B741.1090501@gmail.com>

Excuse me that this is slightly off topic for this list. But I see a lot 
of interesting pieces of code go by on this list that I cannot use as I 
use the R installed by my distribution (mint, essentially Ubuntu ).

For instance:

> > install.packages("forecast")
> Installing package(s) into 
> ?/home/worik/R/x86_64-pc-linux-gnu-library/2.13?
> (as ?lib? is unspecified)
> --- Please select a CRAN mirror for use in this session ---
> Loading Tcl/Tk interface ... done
> Warning message:
> In getDependencies(pkgs, dependencies, available, lib) :
> package ?forecast? is not available (for R version 2.13.1)
> >

So I plan to install the best R I can to run code and test ideas from 
this list. So what is the best way to proceed? By default I would 
compile the latest source from https://github.com/SurajGupta/r-source. 
But as this is where I lurk to to find R goodness so what is the 
standard way people here install R?

cheers
Worik

-- 
it does not matter                      I think that I shall never see
how much I dig and dig                    A billboard lovely as a tree
this hole just                      Indeed, unless the billboards fall
keeps getting deeper                      I'll never see a tree at all


From cjohnson at backstopsolutions.com  Mon May 28 02:52:44 2012
From: cjohnson at backstopsolutions.com (Cedrick Johnson)
Date: Mon, 28 May 2012 00:52:44 +0000
Subject: [R-SIG-Finance] Methods of installing R on Linux
In-Reply-To: <4FC2B741.1090501@gmail.com>
References: <4FC2B741.1090501@gmail.com>
Message-ID: <A84CD574-3CCC-4E65-B8F5-72C4F7C2FE02@backstopsolutions.com>

The latest version is 2.15 now... You can upgrade using Ubuntu (mint) deb entries (also check out the r-sig-Debian list)..

instructions for installing the CRAN apt entries and upgrading via apt is here: http://cran.r-project.org/bin/linux/ubuntu/

On May 27, 2012, at 6:23 PM, "Worik Stanton" <worik.stanton at gmail.com> wrote:

> Excuse me that this is slightly off topic for this list. But I see a lot of interesting pieces of code go by on this list that I cannot use as I use the R installed by my distribution (mint, essentially Ubuntu ).
> 
> For instance:
> 
>> > install.packages("forecast")
>> Installing package(s) into ?/home/worik/R/x86_64-pc-linux-gnu-library/2.13?
>> (as ?lib? is unspecified)
>> --- Please select a CRAN mirror for use in this session ---
>> Loading Tcl/Tk interface ... done
>> Warning message:
>> In getDependencies(pkgs, dependencies, available, lib) :
>> package ?forecast? is not available (for R version 2.13.1)
>> >
> 
> So I plan to install the best R I can to run code and test ideas from this list. So what is the best way to proceed? By default I would compile the latest source from https://github.com/SurajGupta/r-source. But as this is where I lurk to to find R goodness so what is the standard way people here install R?
> 
> cheers
> Worik
> 
> -- 
> it does not matter                      I think that I shall never see
> how much I dig and dig                    A billboard lovely as a tree
> this hole just                      Indeed, unless the billboards fall
> keeps getting deeper                      I'll never see a tree at all
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jjfgarcia at renta4.es  Mon May 28 15:56:04 2012
From: jjfgarcia at renta4.es (=?iso-8859-1?Q?Juan_Jos=E9_Fern=E1ndez_Garc=EDa?=)
Date: Mon, 28 May 2012 13:56:04 +0000
Subject: [R-SIG-Finance] RBLOOMBERG--conn=blpConnect(iface="COM") PROBLEMS
Message-ID: <F148DC98BC2E614AA82FC8457CA5BCBF741828@BONNIE.domail.local>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120528/36302c0e/attachment.pl>

From j_cuisinier at hotmail.com  Mon May 28 16:19:20 2012
From: j_cuisinier at hotmail.com (julien cuisinier)
Date: Mon, 28 May 2012 16:19:20 +0200
Subject: [R-SIG-Finance] RBLOOMBERG--conn=blpConnect(iface="COM")
 PROBLEMS
In-Reply-To: <F148DC98BC2E614AA82FC8457CA5BCBF741828@BONNIE.domail.local>
References: <F148DC98BC2E614AA82FC8457CA5BCBF741828@BONNIE.domail.local>
Message-ID: <COL102-W57A2199AE8094A42CA8CDC8F040@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120528/815d5b26/attachment.pl>

From jjfgarcia at renta4.es  Mon May 28 16:47:34 2012
From: jjfgarcia at renta4.es (=?iso-8859-1?Q?Juan_Jos=E9_Fern=E1ndez_Garc=EDa?=)
Date: Mon, 28 May 2012 14:47:34 +0000
Subject: [R-SIG-Finance] RBLOOMBERG--conn=blpConnect(iface="COM")
 PROBLEMS
In-Reply-To: <COL102-W57A2199AE8094A42CA8CDC8F040@phx.gbl>
References: <F148DC98BC2E614AA82FC8457CA5BCBF741828@BONNIE.domail.local>
	<COL102-W57A2199AE8094A42CA8CDC8F040@phx.gbl>
Message-ID: <F148DC98BC2E614AA82FC8457CA5BCBF7418F3@BONNIE.domail.local>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120528/156f2416/attachment.pl>

From michael.weylandt at gmail.com  Mon May 28 16:56:16 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Mon, 28 May 2012 10:56:16 -0400
Subject: [R-SIG-Finance] RBLOOMBERG--conn=blpConnect(iface="COM")
	PROBLEMS
In-Reply-To: <F148DC98BC2E614AA82FC8457CA5BCBF7418F3@BONNIE.domail.local>
References: <F148DC98BC2E614AA82FC8457CA5BCBF741828@BONNIE.domail.local>
	<COL102-W57A2199AE8094A42CA8CDC8F040@phx.gbl>
	<F148DC98BC2E614AA82FC8457CA5BCBF7418F3@BONNIE.domail.local>
Message-ID: <CAAmySGNym-OwZ28655aF7YCRNaRpKAZgJPSdf5sg+uoHg1U=Kg@mail.gmail.com>

Note also that you're probably using a somewhat outdated version -- as
of a few days ago the package is no longer called "RBloomberg" (see
John's posting here:
https://stat.ethz.ch/pipermail/r-sig-finance/2012q2/010275.html) --
you might try updating to Rbbg and seeing what happens.

[In addition to going the Java route instead of the COM route, but I'm
not at a computer with a bbg terminal to verify that]

Best,
Michael

On Mon, May 28, 2012 at 10:47 AM, Juan Jos? Fern?ndez Garc?a
<jjfgarcia at renta4.es> wrote:
> Julien
>
> Thnkx very much. Actually the full code is this
>
> blpConnect(iface="COM",
> na.action="na", periodicity="daily")
>
> I think this is the proper way to use the function (I am a R beginner), that's why I used it
>
> When I type help(blpConnect) I get this:
>
> No documentation for 'blpConnect' in specified packages and libraries:
> you could try '??blpConnect'
>
> I followed the manual instructions and installed Java Version 3 API,
> rJava package and I also downloaded Jave from the Java website.
>
> Thanks again
>
> JJ
>
> De: julien cuisinier [mailto:j_cuisinier at hotmail.com]
> Enviado el: Monday, May 28, 2012 4:17 PM
> Para: Juan Jos? Fern?ndez Garc?a; r-sig-finance at r-project.org
> Asunto: RE: [R-SIG-Finance] RBLOOMBERG--conn=blpConnect(iface="COM") PROBLEMS
>
> Hi,
>
> when I type help(blpConnect) in R, I read this:
>
> "
> Arguments
> iface
>
> character. Which Bloomberg interface? (only "Java" currently supported).
>
> "
>
> why do you try to give the "COM" value to iface argument?
>
> after the :
>
> "conn <- blpConnect()" you are connected as far as I know?
>
>
>
> If I said something stupid, sure the package owner will contradict me
>
>
>
> Rgds,
>
> Julien
>
>
> From: jjfgarcia at renta4.es
> To: r-sig-finance at r-project.org
> Date: Mon, 28 May 2012 13:56:04 +0000
> Subject: [R-SIG-Finance] RBLOOMBERG--conn=blpConnect(iface="COM") PROBLEMS
>
> Dear All,
>
>
>
> In the first place I would like to thank you for your contribution to R.
>
>
>
> I am having this problem with Rbloomberg.
>
>
>
> I followed the manual and downloaded the API from bloomberg. However, when I run
>
> ?conn=blpConnect(iface="COM") I got the error message below . ?do you know why this might happen?
>
> Thanks very much
>
>
>
>> library(RBloomberg)
>
> Loading required package: rJava
>
>> conn <- blpConnect()
>
> R version 2.15.0 (2012-03-30)
>
> rJava Version 0.9-3
>
> RBloomberg Version 0.4-151
>
> Java environment initialized successfully.
>
> Looking for most recent blpapi3.jar file...
>
> Adding C:\blp\API\APIv3\JavaAPI\v3.4.6.6\lib\blpapi3.jar to Java classpath
>
> Bloomberg API Version 3.4.6.6
>
>> conn=blpConnect(iface="COM")
>
> Error en blpConnect(iface = "COM") :
>
> ?Requsted interface COM is not valid! Valid interfaces are ?Java
>
>
>
>
>
> SessionInfo
>
>
>
> R version 2.15.0 (2012-03-30)
>
> Platform: i386-pc-mingw32/i386 (32-bit)
>
>
>
> locale:
>
> [1] LC_COLLATE=Spanish_Spain.1252 ?LC_CTYPE=Spanish_Spain.1252
>
> [3] LC_MONETARY=Spanish_Spain.1252 LC_NUMERIC=C
>
> [5] LC_TIME=Spanish_Spain.1252
>
>
>
> attached base packages:
>
> [1] stats ? ? graphics ?grDevices datasets ?utils ? ? methods ? base
>
>
>
> other attached packages:
>
> [1] RBloomberg_0.4-151 rJava_0.9-3 ? ? ? ?rcom_2.2-5 ? ? ? ? rscproxy_2.0-5
>
>
>
> loaded via a namespace (and not attached):
>
> [1] tools_2.15.0
>
>
>
>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
>
> _______________________________________________ R-SIG-Finance at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance -- Subscriber-posting only. If you want to post, subscribe first. -- Also note that this is not the r-help list where general R questions should go.
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From j_cuisinier at hotmail.com  Mon May 28 17:32:22 2012
From: j_cuisinier at hotmail.com (julien cuisinier)
Date: Mon, 28 May 2012 17:32:22 +0200
Subject: [R-SIG-Finance] RBLOOMBERG--conn=blpConnect(iface="COM")
 PROBLEMS
In-Reply-To: <F148DC98BC2E614AA82FC8457CA5BCBF7418F3@BONNIE.domail.local>
References: <F148DC98BC2E614AA82FC8457CA5BCBF741828@BONNIE.domail.local>,
	<COL102-W57A2199AE8094A42CA8CDC8F040@phx.gbl>,
	<F148DC98BC2E614AA82FC8457CA5BCBF7418F3@BONNIE.domail.local>
Message-ID: <COL102-W533F676BEA135BCF75216C8F040@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120528/3c002978/attachment.pl>

From jjfgarcia at renta4.es  Mon May 28 17:57:43 2012
From: jjfgarcia at renta4.es (=?iso-8859-1?Q?Juan_Jos=E9_Fern=E1ndez_Garc=EDa?=)
Date: Mon, 28 May 2012 15:57:43 +0000
Subject: [R-SIG-Finance] RBLOOMBERG--conn=blpConnect(iface="COM")
 PROBLEMS
In-Reply-To: <COL102-W533F676BEA135BCF75216C8F040@phx.gbl>
References: <F148DC98BC2E614AA82FC8457CA5BCBF741828@BONNIE.domail.local>,
	<COL102-W57A2199AE8094A42CA8CDC8F040@phx.gbl>,
	<F148DC98BC2E614AA82FC8457CA5BCBF7418F3@BONNIE.domail.local>
	<COL102-W533F676BEA135BCF75216C8F040@phx.gbl>
Message-ID: <F148DC98BC2E614AA82FC8457CA5BCBF741C81@BONNIE.domail.local>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120528/646593d0/attachment.pl>

From j_cuisinier at hotmail.com  Mon May 28 18:18:56 2012
From: j_cuisinier at hotmail.com (julien cuisinier)
Date: Mon, 28 May 2012 18:18:56 +0200
Subject: [R-SIG-Finance] RBLOOMBERG--conn=blpConnect(iface="COM")
 PROBLEMS
In-Reply-To: <F148DC98BC2E614AA82FC8457CA5BCBF741C81@BONNIE.domail.local>
References: <F148DC98BC2E614AA82FC8457CA5BCBF741828@BONNIE.domail.local>,
	<COL102-W57A2199AE8094A42CA8CDC8F040@phx.gbl>,
	<F148DC98BC2E614AA82FC8457CA5BCBF7418F3@BONNIE.domail.local>,
	<COL102-W533F676BEA135BCF75216C8F040@phx.gbl>,
	<F148DC98BC2E614AA82FC8457CA5BCBF741C81@BONNIE.domail.local>
Message-ID: <COL102-W581FBF08358EA2B93058348F040@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120528/e048b2a8/attachment.pl>

From n-e-w at qtradr.net  Tue May 29 01:14:55 2012
From: n-e-w at qtradr.net (Nick)
Date: Tue, 29 May 2012 09:14:55 +1000
Subject: [R-SIG-Finance] RBLOOMBERG--conn=blpConnect(iface="COM")
	PROBLEMS
In-Reply-To: <COL102-W533F676BEA135BCF75216C8F040@phx.gbl>
References: <F148DC98BC2E614AA82FC8457CA5BCBF741828@BONNIE.domail.local>,
	<COL102-W57A2199AE8094A42CA8CDC8F040@phx.gbl>,
	<F148DC98BC2E614AA82FC8457CA5BCBF7418F3@BONNIE.domail.local>
	<COL102-W533F676BEA135BCF75216C8F040@phx.gbl>
Message-ID: <4FC406EF.6060908@qtradr.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120529/a4bfa207/attachment.pl>

From mikko.kauppila at gmail.com  Tue May 29 14:36:14 2012
From: mikko.kauppila at gmail.com (Mikko Kauppila)
Date: Tue, 29 May 2012 15:36:14 +0300
Subject: [R-SIG-Finance] Rbbg Java out-of-heap-space error (potential cause:
	response_cache)
Message-ID: <CAKoDX+-_7XC5d8HyoY3Uyg1+cZ9cPVmQV_XzJJVqVVz8Ui3=sw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120529/1424c82c/attachment.pl>

From pict100 at gmail.com  Wed May 30 01:29:24 2012
From: pict100 at gmail.com (Db)
Date: Tue, 29 May 2012 16:29:24 -0700 (PDT)
Subject: [R-SIG-Finance] quantmod, mfrow, plot question
In-Reply-To: <1338263704407-4631656.post@n4.nabble.com>
References: <1338263704407-4631656.post@n4.nabble.com>
Message-ID: <1338334164745-4631779.post@n4.nabble.com>

require(quantmod)
sym <-c("^GSPC", "TIP")
getSymbols(sym, from='2009-01-06', to=Sys.Date())
z <-to.monthly(TIP)
z <-z[,6]
z1 <-z-mean(z)
par(mfrow=c(3,1))
plot(z)
# acf,pacf are plotting already 
acf(ts(z1))
pacf(ts(z1))

--
View this message in context: http://r.789695.n4.nabble.com/quantmod-mfrow-plot-question-tp4631656p4631779.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From josh.m.ulrich at gmail.com  Wed May 30 05:08:44 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 29 May 2012 22:08:44 -0500
Subject: [R-SIG-Finance] error in yang.zhang volatility{TTR}
In-Reply-To: <CA+nJqYPevesSZJAWRNEeyXoLr7tSAgDJOc4S9fVe26xOy23onA@mail.gmail.com>
References: <CA+nJqYOAb8AX7ECciPs+jsUnumOaDcgBxzDsoCKL7XxUp8X4Rw@mail.gmail.com>
	<CA+nJqYPevesSZJAWRNEeyXoLr7tSAgDJOc4S9fVe26xOy23onA@mail.gmail.com>
Message-ID: <CAPPM_gRh4jKR=A=MDWHieL4AR_bZZxWFG0mwre+ZxE4A_Oj-Pw@mail.gmail.com>

Hi James,

On Mon, May 21, 2012 at 12:40 PM, J Toll <jctoll at gmail.com> wrote:
> On Mon, May 21, 2012 at 11:32 AM, J Toll <jctoll at gmail.com> wrote:
>> Hi,
>>
>> I've been going through the code for the yang.zhang calculation method
>> of volatility in the TTR package and believe I've found the same error
>> as the one from last year on the Close to Close volatility estimator.
>>
>> https://stat.ethz.ch/pipermail/r-sig-finance/2011q2/007989.html
>>
>> Like the previous error, one of the first clues that there was a
>> problem was an excessive number of NA values generated at the
>> beginning of the output (e.g. 40 NA's for n = 20).
>>
>> I believe the errors are in these two calculations:
>>
>> ? ? ? ?s2o <- N/(n - 1) * runSum((log(OHLC[, 1]/Cl1) - 1/n *
>> ? ? ? ? ? ?runSum(log(OHLC[, 1]/Cl1), n))^2, n)
>> ? ? ? ?s2c <- N/(n - 1) * runSum((log(OHLC[, 4]/OHLC[, 1]) -
>> ? ? ? ? ? ?1/n * runSum(log(OHLC[, 4]/OHLC[, 1]), n))^2, n)
>>
<snip>
>>
>> As a simple fix, I would suggest these corrections:
>>
>> ? ? ? ?s2o <- N * runVar(log(OHLC[, 1] / Cl1), n)
>> ? ? ? ?s2c <- N * runVar(log(OHLC[, 4] / OHLC[, 1]), n)
>
>
> Sorry, to get that to work, it should actually be:
>
> ? ? ? ?s2o <- N * runVar(log(OHLC[, 1] / Cl1), n = n)
> ? ? ? ?s2c <- N * runVar(log(OHLC[, 4] / OHLC[, 1]), n = n)
>
> It needs to be "n = n", otherwise runVar confuses n for y.
>
>
> James
>
Thank you for another very helpful patch.  From looking at the svn
log, it looks like I got more things wrong than right with this
calculation. :)

I also added the ability for users to specify alpha via '...' (the
default value is 1.34).

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com


From jctoll at gmail.com  Wed May 30 17:16:39 2012
From: jctoll at gmail.com (J Toll)
Date: Wed, 30 May 2012 10:16:39 -0500
Subject: [R-SIG-Finance] error in yang.zhang volatility{TTR}
In-Reply-To: <CAPPM_gRh4jKR=A=MDWHieL4AR_bZZxWFG0mwre+ZxE4A_Oj-Pw@mail.gmail.com>
References: <CA+nJqYOAb8AX7ECciPs+jsUnumOaDcgBxzDsoCKL7XxUp8X4Rw@mail.gmail.com>
	<CA+nJqYPevesSZJAWRNEeyXoLr7tSAgDJOc4S9fVe26xOy23onA@mail.gmail.com>
	<CAPPM_gRh4jKR=A=MDWHieL4AR_bZZxWFG0mwre+ZxE4A_Oj-Pw@mail.gmail.com>
Message-ID: <CA+nJqYPN_9PS9bKfAdxEwTQP=J+h_Zj9FhJA0EFUCVJZtNnmCw@mail.gmail.com>

On Tue, May 29, 2012 at 10:08 PM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
>> Sorry, to get that to work, it should actually be:
>>
>> ? ? ? ?s2o <- N * runVar(log(OHLC[, 1] / Cl1), n = n)
>> ? ? ? ?s2c <- N * runVar(log(OHLC[, 4] / OHLC[, 1]), n = n)
>>
>> It needs to be "n = n", otherwise runVar confuses n for y.
>>
> Thank you for another very helpful patch. ?From looking at the svn
> log, it looks like I got more things wrong than right with this
> calculation. :)
>
> I also added the ability for users to specify alpha via '...' (the
> default value is 1.34).
>
> Best,
> --
> Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com


Joshua,

Thanks for taking a look at that.  I know you were joking about
getting "more things wrong than right", but I think I partially melted
my brain thinking through the vectorization.  One stand-alone
calculation may be fairly easy, but then vectorizing the whole thing
can be tricky.

I think the patches all look good on r-forge.  Thanks again.

Best,

James


From st.helldiver at googlemail.com  Wed May 30 19:02:50 2012
From: st.helldiver at googlemail.com (Alex Grund)
Date: Wed, 30 May 2012 19:02:50 +0200
Subject: [R-SIG-Finance] Question about Linear Models, Machine Learning
Message-ID: <CACjun4LRJ1fO1W+mQjuBmi-iM9itHb9QgdUbskXokB19dyTrxw@mail.gmail.com>

Hi @all,

I would like to conduct a research about the impact of macroeconomic
variables to stock market returns, similar to APT.

APT suggests a linear model

r = a + b1 F1 + b2 F2 + ... + epsilon

where r is the return, and F1,... are factors, the rest follows a linear model.

However, when putting macroeconomic factors in such a model, chances
are high, that the model is over- or underfitted, i.e. having too less
or too much factors in it.
The next thing is that each factor has to be transformed, for example:
Factor 1 may be the GDP of USA, but in order to come into the model,
it needs to be diff(log())ed and lagged by 1 or 4 or whatever.

In machine learning there are many suggestions for unsupervised learning.

So, imagine, I have a bunch of indicators and "next month returns" of
some stock market index as dependent variable. I want to fit a linear
model, not knowing the causalities behind it. And I want R to estimate
the transformations and lags to find the model itself, not only its
coefficients. Which machine learning technique is for that? And is
there an easy to use introduction to it and maybe even some R modules?

What should I search for?


Thanks for any hints
--A


From zhangchao at gmail.com  Thu May 31 02:57:08 2012
From: zhangchao at gmail.com (Chao Zhang)
Date: Wed, 30 May 2012 20:57:08 -0400
Subject: [R-SIG-Finance] Rbbg/RBloomberg Having Trouble to Downloan Tick Data
Message-ID: <CAL4MF2jdqbXgjAUY13q13QLnRFwqDPpPRgWb1fv48oBGkQZrHw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120530/dbce930a/attachment.pl>

From john.laing at gmail.com  Thu May 31 04:21:46 2012
From: john.laing at gmail.com (John Laing)
Date: Wed, 30 May 2012 22:21:46 -0400
Subject: [R-SIG-Finance] Rbbg/RBloomberg Having Trouble to Downloan Tick
	Data
In-Reply-To: <CAL4MF2jdqbXgjAUY13q13QLnRFwqDPpPRgWb1fv48oBGkQZrHw@mail.gmail.com>
References: <CAL4MF2jdqbXgjAUY13q13QLnRFwqDPpPRgWb1fv48oBGkQZrHw@mail.gmail.com>
Message-ID: <CAA3Wa=szyZz-bbd1JBjKSJ5pNEmpC8PrAO8=+YLNDMdoe8-g8Q@mail.gmail.com>

Hi Chao,

I think the error you're seeing is due to Bloomberg not providing tick
data back to 2010. Try rolling the dates forward to something more
recent and it should work for you.

-John

On Wed, May 30, 2012 at 8:57 PM, Chao Zhang <zhangchao at gmail.com> wrote:
> Dear all,
>
> I have been trying to use RBloomberg to download tick data but am having
> some issues. I am confident that my settings are probably correct because I
> am able to get correct results for other types of Bloomberg data requests.
> I just can NOT get the tick function working even with the examples
> provided by RBloomberg manual.
>
> Please take a look at the below R session to see details. You can also see
> what versions I am using.
>
>> conn <- blpConnect()
> R version 2.15.0 (2012-03-30)
> rJava Version 0.9-3
> Rbbg Version 0.4-153
> Java environment initialized successfully.
> Looking for most recent blpapi3.jar file...
> Adding C:\blp\API\APIv3\JavaAPI\v3.4.5.5\lib\blpapi3.jar to Java classpath
> Bloomberg API Version 3.4.5.5
>> bdh(conn, "GOLDS Comdty", "PX_LAST", "20090101", "20090107")
> #This bdh call works.
> ? ? ? ? ? ? ? ? date PX_LAST
> 2009-01-01 2009-01-01 ?879.45
> 2009-01-02 2009-01-02 ?875.40
> 2009-01-05 2009-01-05 ?859.50
> 2009-01-06 2009-01-06 ?863.90
> 2009-01-07 2009-01-07 ?842.95
>
>> tick(conn, "RYA ID Equity", "TRADE", "2010-09-21 09:00:00.000",
> "2010-09-21 09:10:00.000")
> #This tick call is provided by on Page 13 of RBloomberg manual.
> Error in `colnames<-`(`*tmp*`, value = c("time", "type", "value", "size" :
> ?length of 'dimnames' [2] not equal to array extent
>
> The last line above is the error.
>
> I want to thank findata for developing and maintaining Rbbg. It has been
> crucial to my daily technical life now and is the most important tool I
> have in R. Please help me to figure our what is wrong with tick. Thanks!
>
> - Chao
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From n-e-w at qtradr.net  Thu May 31 04:29:29 2012
From: n-e-w at qtradr.net (Nick White)
Date: Thu, 31 May 2012 12:29:29 +1000
Subject: [R-SIG-Finance] Rbbg/RBloomberg Having Trouble to Downloan Tick
	Data
In-Reply-To: <CAA3Wa=szyZz-bbd1JBjKSJ5pNEmpC8PrAO8=+YLNDMdoe8-g8Q@mail.gmail.com>
References: <CAL4MF2jdqbXgjAUY13q13QLnRFwqDPpPRgWb1fv48oBGkQZrHw@mail.gmail.com>
	<CAA3Wa=szyZz-bbd1JBjKSJ5pNEmpC8PrAO8=+YLNDMdoe8-g8Q@mail.gmail.com>
Message-ID: <-853928159339118904@unknownmsgid>

Bloomberg only provides ticks / intraday history going back 60 days on
the desktop API



On 31/05/2012, at 12:22, John Laing <john.laing at gmail.com> wrote:

> Hi Chao,
>
> I think the error you're seeing is due to Bloomberg not providing tick
> data back to 2010. Try rolling the dates forward to something more
> recent and it should work for you.
>
> -John
>
> On Wed, May 30, 2012 at 8:57 PM, Chao Zhang <zhangchao at gmail.com> wrote:
>> Dear all,
>>
>> I have been trying to use RBloomberg to download tick data but am having
>> some issues. I am confident that my settings are probably correct because I
>> am able to get correct results for other types of Bloomberg data requests.
>> I just can NOT get the tick function working even with the examples
>> provided by RBloomberg manual.
>>
>> Please take a look at the below R session to see details. You can also see
>> what versions I am using.
>>
>>> conn <- blpConnect()
>> R version 2.15.0 (2012-03-30)
>> rJava Version 0.9-3
>> Rbbg Version 0.4-153
>> Java environment initialized successfully.
>> Looking for most recent blpapi3.jar file...
>> Adding C:\blp\API\APIv3\JavaAPI\v3.4.5.5\lib\blpapi3.jar to Java classpath
>> Bloomberg API Version 3.4.5.5
>>> bdh(conn, "GOLDS Comdty", "PX_LAST", "20090101", "20090107")
>> #This bdh call works.
>>                 date PX_LAST
>> 2009-01-01 2009-01-01  879.45
>> 2009-01-02 2009-01-02  875.40
>> 2009-01-05 2009-01-05  859.50
>> 2009-01-06 2009-01-06  863.90
>> 2009-01-07 2009-01-07  842.95
>>
>>> tick(conn, "RYA ID Equity", "TRADE", "2010-09-21 09:00:00.000",
>> "2010-09-21 09:10:00.000")
>> #This tick call is provided by on Page 13 of RBloomberg manual.
>> Error in `colnames<-`(`*tmp*`, value = c("time", "type", "value", "size" :
>>  length of 'dimnames' [2] not equal to array extent
>>
>> The last line above is the error.
>>
>> I want to thank findata for developing and maintaining Rbbg. It has been
>> crucial to my daily technical life now and is the most important tool I
>> have in R. Please help me to figure our what is wrong with tick. Thanks!
>>
>> - Chao
>>
>>        [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jjfgarcia at renta4.es  Thu May 31 14:09:03 2012
From: jjfgarcia at renta4.es (=?iso-8859-1?Q?Juan_Jos=E9_Fern=E1ndez_Garc=EDa?=)
Date: Thu, 31 May 2012 12:09:03 +0000
Subject: [R-SIG-Finance] RBLOOMBERG--conn=blpConnect(iface="COM")
 PROBLEMS
In-Reply-To: <COL102-W581FBF08358EA2B93058348F040@phx.gbl>
References: <F148DC98BC2E614AA82FC8457CA5BCBF741828@BONNIE.domail.local>,
	<COL102-W57A2199AE8094A42CA8CDC8F040@phx.gbl>,
	<F148DC98BC2E614AA82FC8457CA5BCBF7418F3@BONNIE.domail.local>,
	<COL102-W533F676BEA135BCF75216C8F040@phx.gbl>,
	<F148DC98BC2E614AA82FC8457CA5BCBF741C81@BONNIE.domail.local>
	<COL102-W581FBF08358EA2B93058348F040@phx.gbl>
Message-ID: <F148DC98BC2E614AA82FC8457CA5BCBF74803C@BONNIE.domail.local>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120531/cd2fc959/attachment.pl>

From jjfgarcia at renta4.es  Thu May 31 14:22:15 2012
From: jjfgarcia at renta4.es (=?iso-8859-1?Q?Juan_Jos=E9_Fern=E1ndez_Garc=EDa?=)
Date: Thu, 31 May 2012 12:22:15 +0000
Subject: [R-SIG-Finance]
	RBLOOMBERG--conn=blpConnect(iface="COM")	PROBLEMS
In-Reply-To: <4FC406EF.6060908@qtradr.net>
References: <F148DC98BC2E614AA82FC8457CA5BCBF741828@BONNIE.domail.local>,
	<COL102-W57A2199AE8094A42CA8CDC8F040@phx.gbl>,
	<F148DC98BC2E614AA82FC8457CA5BCBF7418F3@BONNIE.domail.local>
	<COL102-W533F676BEA135BCF75216C8F040@phx.gbl>
	<4FC406EF.6060908@qtradr.net>
Message-ID: <F148DC98BC2E614AA82FC8457CA5BCBF74805D@BONNIE.domail.local>

Hi Nick
Sorry, i have been out of office for two days

I tried what you suggested

conn <- blpConnect()

bdp(conn,"ES1 Index","PX_LAST")

Everything works fine and R downloaded the last price

I don't have any particular preference for the CONN interface, it is just that this code is working fine in another computer. Also I need to set up two parameters (daily data for open market days), parameters that I can set up using the function as defined in 
http://rgm2.lab.nig.ac.jp/RGM2/func.php?rd_id=RBloomberg:blpConnect

but parameters that I cant use using the Java configuration

One stupid question

The functions I used in the link above require Package RBloomberg version 0.1-10 

But I downloaded the RBloomberg Version 0.4-151

Could this be the problem?

Thanks for your patience and help

JJ




-----Mensaje original-----
De: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] En nombre de Nick
Enviado el: Tuesday, May 29, 2012 1:15 AM
Para: r-sig-finance at r-project.org
Asunto: Re: [R-SIG-Finance] RBLOOMBERG--conn=blpConnect(iface="COM") PROBLEMS

You can't simultaneously use COM and Java. Rbbg only supports Java (as has been noted).

Why do you want to use the COM interface?

Make sure you have correctly installed RBloomberg / Rbbg from findata.org

Once it is installed, make sure you have your session correctly initialized:

conn <- blpConnect()

then try a request:

bdp(conn,"ES1 Index","PX_LAST")

if that doesn't work, can you please paste any error messages?

thanks

On 05/29/2012 01:32 AM, julien cuisinier wrote:
> Juan,
>
>
> No problem, I thik my point is that the blpConnect function does 
> accept only iface="Java" as argument, hhence trying iface="COM" you 
> get the error msge
>
> Weird the help() does not work - did you have the RBloomberg package loaded when trying the help(blpConnect)? 
>
> May be you did not install the help file alongside R? If so I would recomment to do so.
>
>
> I found this which might help, google is your friend ;-):
> http://rgm2.lab.nig.ac.jp/RGM2/func.php?rd_id=RBloomberg:blpConnect
>
>
>
> HTH,
> Julien
>
>
>
>  
>
>
>
>
>
> From: jjfgarcia at renta4.es
> To: j_cuisinier at hotmail.com; r-sig-finance at r-project.org
> Subject: RE: [R-SIG-Finance] RBLOOMBERG--conn=blpConnect(iface="COM") 
> PROBLEMS
> Date: Mon, 28 May 2012 14:47:34 +0000
>
>
>
>
>
>
>
>
>
> Julien
>  
> Thnkx very much. Actually the full code is this
>  
> blpConnect(iface="COM",
>
> na.action="na", periodicity="daily")
>  
> I think this is the proper way to use the function (I am a R 
> beginner), that's why I used it
>  
> When I type help(blpConnect) I get this:
>  
> No documentation for 'blpConnect' in specified packages and libraries:
> you could try '??blpConnect'
>  
> I followed the manual instructions and installed Java Version 3 API,
>
> rJava package and I also downloaded Jave from the Java website.
>  
> Thanks again
>  
> JJ
>  
>
>
> De: julien cuisinier [mailto:j_cuisinier at hotmail.com]
>
>
> Enviado el: Monday, May 28, 2012 4:17 PM
>
> Para: Juan Jos? Fern?ndez Garc?a; r-sig-finance at r-project.org
>
> Asunto: RE: [R-SIG-Finance] RBLOOMBERG--conn=blpConnect(iface="COM") 
> PROBLEMS
>
>
>  
>
> Hi,
>
>
>
> when I type help(blpConnect) in R, I read this:
>
>
>
> "
> Arguments
>
>
>
>
> iface
>
>
> character. Which Bloomberg interface? (only "Java" currently supported).
>
>
>
>
> "
>
>
>
> why do you try to give the "COM" value to iface argument? 
>
>
>
> after the :
> "conn <- blpConnect()" you are connected as far as I know? 
>
>
>
> If I said something stupid, sure the package owner will contradict me
>
>
>
> Rgds,
>
> Julien
>
>
>
>
>
>
> From: jjfgarcia at renta4.es
>
> To: r-sig-finance at r-project.org
>
> Date: Mon, 28 May 2012 13:56:04 +0000
>
> Subject: [R-SIG-Finance] RBLOOMBERG--conn=blpConnect(iface="COM") 
> PROBLEMS Dear All,
>
>  
>
> In the first place I would like to thank you for your contribution to R.
>
>  
>
> I am having this problem with Rbloomberg.
>
>  
>
> I followed the manual and downloaded the API from bloomberg. However, 
> when I run
>
>  conn=blpConnect(iface="COM") I got the error message below . ?do you know why this might happen?
>
> Thanks very much
>
>  
>
>> library(RBloomberg)
> Loading required package: rJava
>
>> conn <- blpConnect()
> R version 2.15.0 (2012-03-30)
>
> rJava Version 0.9-3
>
> RBloomberg Version 0.4-151
>
> Java environment initialized successfully.
>
> Looking for most recent blpapi3.jar file...
>
> Adding C:\blp\API\APIv3\JavaAPI\v3.4.6.6\lib\blpapi3.jar to Java 
> classpath
>
> Bloomberg API Version 3.4.6.6
>
>> conn=blpConnect(iface="COM")
> Error en blpConnect(iface = "COM") :
>
>   Requsted interface COM is not valid! Valid interfaces are  Java
>
>  
>
>  
>
> SessionInfo
>
>  
>
> R version 2.15.0 (2012-03-30)
>
> Platform: i386-pc-mingw32/i386 (32-bit)
>
>  
>
> locale:
>
> [1] LC_COLLATE=Spanish_Spain.1252  LC_CTYPE=Spanish_Spain.1252
>
> [3] LC_MONETARY=Spanish_Spain.1252 LC_NUMERIC=C
>
> [5] LC_TIME=Spanish_Spain.1252
>
>  
>
> attached base packages:
>
> [1] stats     graphics  grDevices datasets  utils     methods   base
>
>  
>
> other attached packages:
>
> [1] RBloomberg_0.4-151 rJava_0.9-3        rcom_2.2-5         rscproxy_2.0-5
>
>  
>
> loaded via a namespace (and not attached):
>
> [1] tools_2.15.0
>
>  
>
>  
>
>         [[alternative HTML version deleted]]
>
>  
>
>
> _______________________________________________ 
> R-SIG-Finance at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance -- Subscriber-posting only. If you want to post, subscribe first. -- Also note that this is not the r-help list where  general R questions should go.
>
>
>  		 	   		  
> 	[[alternative HTML version deleted]]
>
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


	[[alternative HTML version deleted]]


From j_cuisinier at hotmail.com  Thu May 31 14:45:12 2012
From: j_cuisinier at hotmail.com (julien cuisinier)
Date: Thu, 31 May 2012 14:45:12 +0200
Subject: [R-SIG-Finance] RBLOOMBERG--conn=blpConnect(iface="COM")
 PROBLEMS
In-Reply-To: <F148DC98BC2E614AA82FC8457CA5BCBF74805D@BONNIE.domail.local>
References: <F148DC98BC2E614AA82FC8457CA5BCBF741828@BONNIE.domail.local>, ,
	<COL102-W57A2199AE8094A42CA8CDC8F040@phx.gbl>, ,
	<F148DC98BC2E614AA82FC8457CA5BCBF7418F3@BONNIE.domail.local>,
	<COL102-W533F676BEA135BCF75216C8F040@phx.gbl>,
	<4FC406EF.6060908@qtradr.net>,
	<F148DC98BC2E614AA82FC8457CA5BCBF74805D@BONNIE.domail.local>
Message-ID: <COL102-W45EAC7030BA19E5B611FA48F0B0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120531/0ef47e28/attachment.pl>

From jjfgarcia at renta4.es  Thu May 31 14:48:05 2012
From: jjfgarcia at renta4.es (=?iso-8859-1?Q?Juan_Jos=E9_Fern=E1ndez_Garc=EDa?=)
Date: Thu, 31 May 2012 12:48:05 +0000
Subject: [R-SIG-Finance] RBLOOMBERG--conn=blpConnect(iface="COM")
 PROBLEMS
In-Reply-To: <COL102-W45EAC7030BA19E5B611FA48F0B0@phx.gbl>
References: <F148DC98BC2E614AA82FC8457CA5BCBF741828@BONNIE.domail.local>, ,
	<COL102-W57A2199AE8094A42CA8CDC8F040@phx.gbl>, ,
	<F148DC98BC2E614AA82FC8457CA5BCBF7418F3@BONNIE.domail.local>,
	<COL102-W533F676BEA135BCF75216C8F040@phx.gbl>,
	<4FC406EF.6060908@qtradr.net>,
	<F148DC98BC2E614AA82FC8457CA5BCBF74805D@BONNIE.domail.local>
	<COL102-W45EAC7030BA19E5B611FA48F0B0@phx.gbl>
Message-ID: <F148DC98BC2E614AA82FC8457CA5BCBF748112@BONNIE.domail.local>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120531/2b3d8f4e/attachment.pl>

From gordon.erlebach at gmail.com  Thu May 31 17:26:24 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Thu, 31 May 2012 11:26:24 -0400
Subject: [R-SIG-Finance] Vertical lines in chart_Series
Message-ID: <CAELivkK9ooKcB8vQ6M0W6=khudtU+R9xBJbOREzpHbR5nMtmiw@mail.gmail.com>

Hi,

Here is my solution to horizontal lines (which work) and vertical
lines (which do not work) in chart_Series (I added an argument, ...)
(I attach the full code).
Here is a snippet. Vertical lines do not work using segments() with
arguments x0,y0, y1. On the other hand, vertical lines work with all
four arguments (x0,y0,x1=x0,y1). STRANGE NO?
On the other hand, horizontal lines work perfectly fine using segments
(with x0, y0, x1 as arguments)

myChart_Series = function (x, name = deparse(substitute(x)), type =
"candlesticks",
    subset = "", TA = "", pars = chart_pars(), theme = chart_theme(),
    clev = 0, ...)
{
    cs <- new.replot()

 # ? additional code ?

    ylim = cs$get_ylim()[[2]]
    xlim = cs$get_xlim()

 #Horizontal lines
    if (!is.null(y.coords)) {
        cs$Env$x0 = xlim[1]
        cs$Env$y0 = y.coords
        cs$Env$x1 = xlim[2]
        seg.exp = c(expression(segments(x0,y0,x1,col='blue')))
        cs$add(seg.exp, env=cs$Env, expr = TRUE)
    }


    # vertical lines
    # x0 <- x; y0 <- ymin; y1 <- ymax
    if (!is.null(x.coords)) {
        cs$Env$x0 = x.coords
        cs$Env$y0 = ylim[1]  # does not work when I replace with numbers
        cs$Env$y1 = ylim[2]
        cs$Env$x1 = cs$Env$x0
        # VERTICAL LINES DO NOT WORK with segments!!
        # unless I add x1 to the argument list (should not be required)
        seg.exp = c(expression(segments(x0,y0,x1,y1,col='red')))
        # line through the plot
        #seg.exp = c(expression(abline(v=x0,col='red')))  #***WORKS
        cs$add(seg.exp, env=cs$Env, expr = TRUE)  # *** DOES NOT WORK
    }
-------------- next part --------------
A non-text attachment was scrubbed...
Name: myChart_Series.r
Type: application/octet-stream
Size: 9244 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120531/5077cb4d/attachment.obj>

From gordon.erlebach at gmail.com  Thu May 31 19:25:09 2012
From: gordon.erlebach at gmail.com (Gordon Erlebacher)
Date: Thu, 31 May 2012 13:25:09 -0400
Subject: [R-SIG-Finance] contribution: chart_Series with vertical/horizontal
	lines
Message-ID: <CAELivkKwk9UFsW9HVN7icQ+tDYQgPFcWKyhDXGDx0mDc5YOa7A@mail.gmail.com>

My programming approach seems much simpler than what I have seen. I do
not use substitute, grep, parse etc., commands,
that I pretty much don't understand. I attach the source code.

The following draws two horizontal lines and two vertical lines.
Inside the function I create two additional functions:

  horizontal.lines = function(y.coords, xmin, xmax, col='red')
  vertical.lines = function(x.coords, ymin, ymax, col='red')

Enjoy!  Feedback is appreciated.


    myChart_Series(BAS,x.coords=c(1000,1200),y.coords=c(28.,29.))


     gordon
-------------- next part --------------
A non-text attachment was scrubbed...
Name: myChart_Series.r
Type: application/octet-stream
Size: 9391 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120531/b86c668a/attachment.obj>

From felice.bruno at live.it  Sat Jun  2 18:02:25 2012
From: felice.bruno at live.it (Felice Bruno)
Date: Sat, 2 Jun 2012 18:02:25 +0200
Subject: [R-SIG-Finance] Problems using blotter and R-2.15
Message-ID: <DUB116-W137B0B019CF01B792E8D5D95090@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120602/1d66c602/attachment.pl>

From josh.m.ulrich at gmail.com  Sat Jun  2 22:58:27 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sat, 2 Jun 2012 15:58:27 -0500
Subject: [R-SIG-Finance] Problems using blotter and R-2.15
In-Reply-To: <DUB116-W137B0B019CF01B792E8D5D95090@phx.gbl>
References: <DUB116-W137B0B019CF01B792E8D5D95090@phx.gbl>
Message-ID: <CAPPM_gSZ-TgAK4G_jqHBHSyeo82mbHChozS5VyEDU1Wq259bTg@mail.gmail.com>

Hi Felice,

I was able to run the code you provided below without error.  What
versions of blotter / xts are you using?  Upgrading may help; if it
does not, please provide the output from sessionInfo().  My output is
below.

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com


R> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=C                 LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] PerformanceAnalytics_1.0.4 blotter_0.8.4
[3] FinancialInstrument_0.14.2 quantmod_0.3-17
[5] TTR_0.21-1                 xts_0.8-7
[7] zoo_1.7-7                  Defaults_1.1-1

loaded via a namespace (and not attached):
[1] grid_2.15.0    lattice_0.20-6



On Sat, Jun 2, 2012 at 11:02 AM, Felice Bruno <felice.bruno at live.it> wrote:
>
> Hi
>
> I'm using blotter to make strategy backtesting.
>
> some days ago, I migrate to R-2.15, and tried to run the Faber example found on FOSS Trading blog.
>
> When I run the code, I receive the following message:
>
>
> Error in if (.parseISO8601(Dates)$first.time < first(index(Prices)) ||
>
>
> I found the origin of problem is the istruction:
>
>
> updatePortf(Portfolio='default', Dates=CurrentDate)
>
>
> To be sure, I tried to run using the R-2.14 version, and all was ok.
>
> Following is reported the code I use:
>
>
> # This code implements the strategy found in:
> # Faber, Mebane T., "A Quantitative Approach to Tactical Asset Allocation."
> # Journal of Risk Management (Spring 2007).
>
> # The article implements a simpler version of the 200-day SMA, opting for a
> # 10-month SMA because monthly data are more easily available in earlier
> # periods and lower granularity should translate to lower transaction costs.
>
> # The rules of the system are relatively simple:
> # - Buy when monthly price > 10-month SMA
> # - Sell and move to cash when monthly price < 10-month SMA
>
> # 1. All entry and exit prices are on the day of the signal at the close.
> # 2. All data series are total return series including dividends, updated monthly.
> # NOTE: For the purposes of this demo, we only use price returns.
> # 3. Cash returns are estimated with 90-day commercial paper. Margin rates for
> # leveraged models are estimated with the broker call rate.
> # NOTE: For the purposes of this demo, we ignore interest and leverage.
> # 4. Taxes, commissions, and slippage are excluded.
>
> # Data:
> # This demo uses monthly data downloaded from Yahoo Finance for two ETFs: SPY and
> # IEF. These were chosen to illustrate the classic stock/bond asset portfolio.
> # Though longer serires would be preferred, data for IEF begin in mid-2002.
>
> # Load required libraries
> library(quantmod)
> library(TTR)
> library(blotter) # r-forge revision 193
> library(PerformanceAnalytics)
>
> # Set initial values
> initDate='2006-07-31'
> endDate='2008-01-31'
> initEq=100000
>
> # Set currency and instruments
> currency("USD")
> stock("IEF",currency="USD",multiplier=1)
> stock("SPY",currency="USD",multiplier=1)
>
> # Load data with quantmod
> print("Loading data")
> symbols = c("IEF", "SPY")
> getSymbols(symbols, from=initDate, to=endDate, index.class=c("POSIXt","POSIXct"))
>
> # Adjust prices for splits/dividends (thanks pg)
> #IEF = adjustOHLC(IEF)
> #SPY = adjustOHLC(SPY)
>
> # Convert data to monthly frequency (to.weekly() needs drop.time=FALSE)
> IEF = to.monthly(IEF, indexAt='endof')
> SPY = to.monthly(SPY, indexAt='endof')
>
> # Set up indicators with TTR
> print("Setting up indicators")
> IEF$SMA = SMA(Cl(IEF), 10)
> SPY$SMA = SMA(Cl(SPY), 10)
>
> # Set up a portfolio object and an account object in blotter
> initPortf(name='default', symbols=symbols, initDate=initDate)
> initAcct(name='default', portfolios='default', initDate=initDate, initEq=initEq)
> verbose = TRUE
>
> # Create trades
> for( i in 10:NROW(SPY) ) {
> ?CurrentDate=time(SPY)[i]
> ?equity = getEndEq(Account='default', CurrentDate)
>
> ?for( symbol in symbols ) {
> ? ?sym = get(symbol)
> ? ?ClosePrice = as.numeric(Cl(sym[i,]))
> ? ?Posn = getPosQty(Portfolio='default', Symbol=symbol, Date=CurrentDate)
> ? ?UnitSize = as.numeric(trunc((equity/NROW(symbols))/ClosePrice))
>
> ? ?# Position Entry (assume fill at close)
> ? ?if( Posn == 0 ) {
> ? ?# No position, so test to initiate Long position
> ? ? ?if( Cl(sym[i,]) > sym[i,'SMA'] ) {
> ? ? ? ?# Store trade with blotter
> ? ? ? ?addTxn('default', Symbol=symbol, TxnDate=CurrentDate,
> ? ? ? ? ?TxnPrice=ClosePrice, TxnQty=UnitSize, TxnFees=0, verbose=verbose)
> ? ? ?}
> ? ?} else {
> ? ? ?# Have a position, so check exit
> ? ? ?if( Cl(sym[i,]) < sym[i,'SMA'] ) {
> ? ? ? ?# Store trade with blotter
> ? ? ? ?addTxn(Portfolio='default', Symbol=symbol, TxnDate=CurrentDate,
> ? ? ? ? ?TxnPrice=ClosePrice, TxnQty=-Posn, TxnFees=0, verbose=verbose)
> ? ? ?}
> ? ?}
> ?} # End symbols loop
>
> ?# Calculate P&L and resulting equity with blotter
> ?updatePortf(Portfolio='default', Dates=CurrentDate)
> ?updateAcct(name='default', Dates=CurrentDate)
> ?updateEndEq(Account='default', Dates=CurrentDate)
>
> } # End dates loop
>
> # Buy and Hold cumulative equity
> buyhold = exp(cumsum( ( 0.5*ROC(Cl(IEF)) + 0.5*ROC(Cl(SPY)) )[-1] ))
>
> # Final values
> cat('Tactical Asset Allocation Return: ',(getEndEq(Account='default', Date=CurrentDate)-initEq)/initEq,'\n')
> cat('Buy and Hold Return: ',tail(buyhold,1)-1,'\n')
>
> # Plot Strategy Summary
> png(filename="20091118_blotter_strategy.png", 720, 720)
> #charts.PerformanceSummary(ROC(getAccount('default')$TOTAL$End.Eq)[-1],main="Tactical Asset Allocation")
> charts.PerformanceSummary(ROC(getAccount('default')$summary$End.Eq)[-1],main="Tactical Asset Allocation")
> dev.off()
>
> # Plot Buy and Hold Summary
> png(filename="20091118_blotter_buyhold.png", 720, 720)
> charts.PerformanceSummary(ROC(buyhold)[-1],main="Buy & Hold")
> dev.off()
>
>
> Thank you for your attention.
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From felice.bruno at live.it  Sun Jun  3 16:36:10 2012
From: felice.bruno at live.it (Felice Bruno)
Date: Sun, 3 Jun 2012 16:36:10 +0200
Subject: [R-SIG-Finance] Problems using blotter and R-2.15
In-Reply-To: <CAPPM_gSZ-TgAK4G_jqHBHSyeo82mbHChozS5VyEDU1Wq259bTg@mail.gmail.com>
References: <DUB116-W137B0B019CF01B792E8D5D95090@phx.gbl>,
	<CAPPM_gSZ-TgAK4G_jqHBHSyeo82mbHChozS5VyEDU1Wq259bTg@mail.gmail.com>
Message-ID: <DUB116-W5593261FAC1CD57FDAD1AB950E0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120603/db80e4f1/attachment.pl>

From josh.m.ulrich at gmail.com  Sun Jun  3 17:38:23 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sun, 3 Jun 2012 10:38:23 -0500
Subject: [R-SIG-Finance] Problems using blotter and R-2.15
In-Reply-To: <DUB116-W5593261FAC1CD57FDAD1AB950E0@phx.gbl>
References: <DUB116-W137B0B019CF01B792E8D5D95090@phx.gbl>
	<CAPPM_gSZ-TgAK4G_jqHBHSyeo82mbHChozS5VyEDU1Wq259bTg@mail.gmail.com>
	<DUB116-W5593261FAC1CD57FDAD1AB950E0@phx.gbl>
Message-ID: <CAPPM_gTx28fGTq=AcCFnznxPQm9JsEGKB3P5aCLNYVybGnSyJw@mail.gmail.com>

Hi Felice,

It looks like there was a tiny bug (a typo) in .updatePosPL, which is
now corrected on R-forge.  Please check out the source, then
build/INSTALL; or wait a day or two for the R-forge process to build
the package for you.

Best,
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com


On Sun, Jun 3, 2012 at 9:36 AM, Felice Bruno <felice.bruno at live.it> wrote:
> Hi Joshua
>
> when I run the code I have the following message error:
>
>
> "Errore in if (.parseISO8601(Dates)$first.time < first(index(Prices)) || :
>
> valore mancante dove ? richiesto TRUE/FALSE"Sorry, it is in Italian, and I
> don't know the exact English translation, but it should be something like:
>
>
> "Error in if (.parseISO8601(Dates)$first.time < first(index(Prices)) || :
>
> ??missing value where TRUE/FALSE is required"
>
>
> My sessionInfo message is the following:
>
>
>
> R version 2.15.0 (2012-03-30)
>
> Platform: x86_64-pc-mingw32/x64 (64-bit)
> locale:
> [1] LC_COLLATE=Italian_Italy.1252 LC_CTYPE=Italian_Italy.1252
> [3] LC_MONETARY=Italian_Italy.1252 LC_NUMERIC=C
> [5] LC_TIME=Italian_Italy.1252
>
> attached base packages:
> [1] stats graphics grDevices utils datasets methods base
>
> other attached packages:
>
> [1] PerformanceAnalytics_1.0.4.4 blotter_0.8.9
> [3] FinancialInstrument_0.14.4 quantmod_0.3-17
> [5] TTR_0.21-1 xts_0.8-7
> [7] zoo_1.7-7 Defaults_1.1-1
> [9] rj_1.1.0-4
>
> loaded via a namespace (and not attached):
>
> [1] grid_2.15.0 lattice_0.20-6 rj.gd_1.1.0-1 tools_2.15.0
>
>
> I hope it can help.
>
> Thank you for your attention.
>
>
> Felice Bruno
>
>
>
>> From: josh.m.ulrich at gmail.com
>> Date: Sat, 2 Jun 2012 15:58:27 -0500
>> Subject: Re: [R-SIG-Finance] Problems using blotter and R-2.15
>> To: felice.bruno at live.it
>> CC: r-sig-finance at r-project.org
>
>>
>> Hi Felice,
>>
>> I was able to run the code you provided below without error. What
>> versions of blotter / xts are you using? Upgrading may help; if it
>> does not, please provide the output from sessionInfo(). My output is
>> below.
>>
>> Best,
>> --
>> Joshua Ulrich | FOSS Trading: www.fosstrading.com
>>
>>
>> R> sessionInfo()
>> R version 2.15.0 (2012-03-30)
>> Platform: x86_64-pc-linux-gnu (64-bit)
>>
>> locale:
>> [1] LC_CTYPE=en_US.UTF-8 LC_NUMERIC=C
>> [3] LC_TIME=en_US.UTF-8 LC_COLLATE=en_US.UTF-8
>> [5] LC_MONETARY=en_US.UTF-8 LC_MESSAGES=en_US.UTF-8
>> [7] LC_PAPER=C LC_NAME=C
>> [9] LC_ADDRESS=C LC_TELEPHONE=C
>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>
>> attached base packages:
>> [1] stats graphics grDevices utils datasets methods base
>>
>> other attached packages:
>> [1] PerformanceAnalytics_1.0.4 blotter_0.8.4
>> [3] FinancialInstrument_0.14.2 quantmod_0.3-17
>> [5] TTR_0.21-1 xts_0.8-7
>> [7] zoo_1.7-7 Defaults_1.1-1
>>
>> loaded via a namespace (and not attached):
>> [1] grid_2.15.0 lattice_0.20-6
>>
>>
>>
>> On Sat, Jun 2, 2012 at 11:02 AM, Felice Bruno <felice.bruno at live.it>
>> wrote:
>> >
>> > Hi
>> >
>> > I'm using blotter to make strategy backtesting.
>> >
>> > some days ago, I migrate to R-2.15, and tried to run the Faber example
>> > found on FOSS Trading blog.
>> >
>> > When I run the code, I receive the following message:
>> >
>> >
>> > Error in if (.parseISO8601(Dates)$first.time < first(index(Prices)) ||
>> >
>> >
>> > I found the origin of problem is the istruction:
>> >
>> >
>> > updatePortf(Portfolio='default', Dates=CurrentDate)
>> >
>> >
>> > To be sure, I tried to run using the R-2.14 version, and all was ok.
>> >
>> > Following is reported the code I use:
>> >
>> >
>> > # This code implements the strategy found in:
>> > # Faber, Mebane T., "A Quantitative Approach to Tactical Asset
>> > Allocation."
>> > # Journal of Risk Management (Spring 2007).
>> >
>> > # The article implements a simpler version of the 200-day SMA, opting
>> > for a
>> > # 10-month SMA because monthly data are more easily available in earlier
>> > # periods and lower granularity should translate to lower transaction
>> > costs.
>> >
>> > # The rules of the system are relatively simple:
>> > # - Buy when monthly price > 10-month SMA
>> > # - Sell and move to cash when monthly price < 10-month SMA
>> >
>> > # 1. All entry and exit prices are on the day of the signal at the
>> > close.
>> > # 2. All data series are total return series including dividends,
>> > updated monthly.
>> > # NOTE: For the purposes of this demo, we only use price returns.
>> > # 3. Cash returns are estimated with 90-day commercial paper. Margin
>> > rates for
>> > # leveraged models are estimated with the broker call rate.
>> > # NOTE: For the purposes of this demo, we ignore interest and leverage.
>> > # 4. Taxes, commissions, and slippage are excluded.
>> >
>> > # Data:
>> > # This demo uses monthly data downloaded from Yahoo Finance for two
>> > ETFs: SPY and
>> > # IEF. These were chosen to illustrate the classic stock/bond asset
>> > portfolio.
>> > # Though longer serires would be preferred, data for IEF begin in
>> > mid-2002.
>> >
>> > # Load required libraries
>> > library(quantmod)
>> > library(TTR)
>> > library(blotter) # r-forge revision 193
>> > library(PerformanceAnalytics)
>> >
>> > # Set initial values
>> > initDate='2006-07-31'
>> > endDate='2008-01-31'
>> > initEq=100000
>> >
>> > # Set currency and instruments
>> > currency("USD")
>> > stock("IEF",currency="USD",multiplier=1)
>> > stock("SPY",currency="USD",multiplier=1)
>> >
>> > # Load data with quantmod
>> > print("Loading data")
>> > symbols = c("IEF", "SPY")
>> > getSymbols(symbols, from=initDate, to=endDate,
>> > index.class=c("POSIXt","POSIXct"))
>> >
>> > # Adjust prices for splits/dividends (thanks pg)
>> > #IEF = adjustOHLC(IEF)
>> > #SPY = adjustOHLC(SPY)
>> >
>> > # Convert data to monthly frequency (to.weekly() needs drop.time=FALSE)
>> > IEF = to.monthly(IEF, indexAt='endof')
>> > SPY = to.monthly(SPY, indexAt='endof')
>> >
>> > # Set up indicators with TTR
>> > print("Setting up indicators")
>> > IEF$SMA = SMA(Cl(IEF), 10)
>> > SPY$SMA = SMA(Cl(SPY), 10)
>> >
>> > # Set up a portfolio object and an account object in blotter
>> > initPortf(name='default', symbols=symbols, initDate=initDate)
>> > initAcct(name='default', portfolios='default', initDate=initDate,
>> > initEq=initEq)
>> > verbose = TRUE
>> >
>> > # Create trades
>> > for( i in 10:NROW(SPY) ) {
>> > ?CurrentDate=time(SPY)[i]
>> > ?equity = getEndEq(Account='default', CurrentDate)
>> >
>> > ?for( symbol in symbols ) {
>> > ? ?sym = get(symbol)
>> > ? ?ClosePrice = as.numeric(Cl(sym[i,]))
>> > ? ?Posn = getPosQty(Portfolio='default', Symbol=symbol,
>> > Date=CurrentDate)
>> > ? ?UnitSize = as.numeric(trunc((equity/NROW(symbols))/ClosePrice))
>> >
>> > ? ?# Position Entry (assume fill at close)
>> > ? ?if( Posn == 0 ) {
>> > ? ?# No position, so test to initiate Long position
>> > ? ? ?if( Cl(sym[i,]) > sym[i,'SMA'] ) {
>> > ? ? ? ?# Store trade with blotter
>> > ? ? ? ?addTxn('default', Symbol=symbol, TxnDate=CurrentDate,
>> > ? ? ? ? ?TxnPrice=ClosePrice, TxnQty=UnitSize, TxnFees=0,
>> > verbose=verbose)
>> > ? ? ?}
>> > ? ?} else {
>> > ? ? ?# Have a position, so check exit
>> > ? ? ?if( Cl(sym[i,]) < sym[i,'SMA'] ) {
>> > ? ? ? ?# Store trade with blotter
>> > ? ? ? ?addTxn(Portfolio='default', Symbol=symbol, TxnDate=CurrentDate,
>> > ? ? ? ? ?TxnPrice=ClosePrice, TxnQty=-Posn, TxnFees=0, verbose=verbose)
>> > ? ? ?}
>> > ? ?}
>> > ?} # End symbols loop
>> >
>> > ?# Calculate P&L and resulting equity with blotter
>> > ?updatePortf(Portfolio='default', Dates=CurrentDate)
>> > ?updateAcct(name='default', Dates=CurrentDate)
>> > ?updateEndEq(Account='default', Dates=CurrentDate)
>> >
>> > } # End dates loop
>> >
>> > # Buy and Hold cumulative equity
>> > buyhold = exp(cumsum( ( 0.5*ROC(Cl(IEF)) + 0.5*ROC(Cl(SPY)) )[-1] ))
>> >
>> > # Final values
>> > cat('Tactical Asset Allocation Return: ',(getEndEq(Account='default',
>> > Date=CurrentDate)-initEq)/initEq,'\n')
>> > cat('Buy and Hold Return: ',tail(buyhold,1)-1,'\n')
>> >
>> > # Plot Strategy Summary
>> > png(filename="20091118_blotter_strategy.png", 720, 720)
>> >
>> > #charts.PerformanceSummary(ROC(getAccount('default')$TOTAL$End.Eq)[-1],main="Tactical
>> > Asset Allocation")
>> >
>> > charts.PerformanceSummary(ROC(getAccount('default')$summary$End.Eq)[-1],main="Tactical
>> > Asset Allocation")
>> > dev.off()
>> >
>> > # Plot Buy and Hold Summary
>> > png(filename="20091118_blotter_buyhold.png", 720, 720)
>> > charts.PerformanceSummary(ROC(buyhold)[-1],main="Buy & Hold")
>> > dev.off()
>> >
>> >
>> > Thank you for your attention.
>> >
>> > ? ? ? ?[[alternative HTML version deleted]]
>> >
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions
>> > should go.


From felice.bruno at live.it  Sun Jun  3 17:49:36 2012
From: felice.bruno at live.it (Felice Bruno)
Date: Sun, 3 Jun 2012 17:49:36 +0200
Subject: [R-SIG-Finance] Problems using blotter and R-2.15
In-Reply-To: <CAPPM_gTx28fGTq=AcCFnznxPQm9JsEGKB3P5aCLNYVybGnSyJw@mail.gmail.com>
References: <DUB116-W137B0B019CF01B792E8D5D95090@phx.gbl>
	<CAPPM_gSZ-TgAK4G_jqHBHSyeo82mbHChozS5VyEDU1Wq259bTg@mail.gmail.com>,
	<DUB116-W5593261FAC1CD57FDAD1AB950E0@phx.gbl>,
	<CAPPM_gTx28fGTq=AcCFnznxPQm9JsEGKB3P5aCLNYVybGnSyJw@mail.gmail.com>
Message-ID: <DUB116-W645E27D6F704AED8BAA705950E0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120603/0748280b/attachment.pl>

From dougedmunds at gmail.com  Mon Jun  4 02:09:29 2012
From: dougedmunds at gmail.com (Doug Edmunds)
Date: Sun, 03 Jun 2012 17:09:29 -0700
Subject: [R-SIG-Finance] a concern about blotter (and RStudio)
Message-ID: <4FCBFCB9.8050504@gmail.com>

Checking the box in RStudio next to blotter
runs this code:
library(blotter) and also creates a hidden object,
.blotter

.blotter is reported as something like this
<environment: 0x0000000009811058>   #numbers will vary

RStudio's "clear all" button removes the .blotter object.
It calls rm(list=ls(all.names=TRUE)).

Without .blotter, the blotter demo's won't work.

But detaching and reattaching the blotter package
(by unchecking/rechecking the box) does not re-generate
the .blotter object. Unchecking the box calls
detach("package:blotter") with a default of unload=FALSE.

In order to create a NEW .blotter object you need
to call detach("package:blotter", unload=TRUE).
Then if there was no .blotter object, a new one will
be generated with library(blotter).

However, library(blotter) will NOT create a new .blotter object unless 
the previous one has been removed.  This is not a concern so long
as the namespace has not been unloaded, but it is a concern if
the namespace has been unloaded.

Concern:
If the namespace is unloaded, and the old .blotter object
is NOT removed, when library(blotter) is again called, it
will create a new namespace, but it does not update
the .blotter object.  The memory location, e.g.,
<environment: 0x0000000009811058> will not change, even
though there is a different namespace.

What is the .blotter object is used for?
If it is intended to point to the namespace, then there is
a concern that it will corrupt data, by pointing to an
area of memory that was freed when the old namespace was
unloaded.

-dae


From brian at braverock.com  Mon Jun  4 02:32:04 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 03 Jun 2012 19:32:04 -0500
Subject: [R-SIG-Finance] a concern about blotter (and RStudio)
In-Reply-To: <4FCBFCB9.8050504@gmail.com>
References: <4FCBFCB9.8050504@gmail.com>
Message-ID: <4FCC0204.1020804@braverock.com>

On 06/03/2012 07:09 PM, Doug Edmunds wrote:
> Checking the box in RStudio next to blotter
> runs this code:
> library(blotter) and also creates a hidden object,
> .blotter
>
> .blotter is reported as something like this
> <environment: 0x0000000009811058>   #numbers will vary
>
> RStudio's "clear all" button removes the .blotter object.
> It calls rm(list=ls(all.names=TRUE)).
>
> Without .blotter, the blotter demo's won't work.

<...>


> What is the .blotter object is used for?
> If it is intended to point to the namespace, then there is
> a concern that it will corrupt data, by pointing to an
> area of memory that was freed when the old namespace was
> unloaded.

I'm really *not* a fan of 'Clear all' in RStudio.  It's definitely not 
recommended good R programming practice, and is the equivalent of

rm(list = ls(all.names=TRUE))

even

rm(list = ls())

would be better, if still quite distasteful.

the .blotter environment is a storage container for transactions, 
portfolios, and account data.  All the 'tables' (data.frames, lists, and 
xts objects) needed by the blotter functions to keep track of everything 
are stored in this environment.

You can recreate an (empty) .blotter environment with this code:

.blotter <- new.env()

I just wish that RStudio would drop the sloppy 'Clear All' button 
(*especially* now that RStudio supports projects in separate directories 
and repositories), or at least allow a user option for whether to also 
clear hidden objects.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From dougedmunds at gmail.com  Mon Jun  4 03:13:34 2012
From: dougedmunds at gmail.com (dae)
Date: Sun, 3 Jun 2012 18:13:34 -0700 (PDT)
Subject: [R-SIG-Finance] a concern about blotter (and RStudio)
In-Reply-To: <4FCC0204.1020804@braverock.com>
References: <4FCBFCB9.8050504@gmail.com> <4FCC0204.1020804@braverock.com>
Message-ID: <1338772414947-4632270.post@n4.nabble.com>


braverock wrote
> 
> You can recreate an (empty) .blotter environment with this code:
> 
> .blotter <- new.env()
> 
> 

How does new.env()  relate to the namespace?  

library(blotter) won't create .blotter 
unless the old namespace is unloaded when 
it's detached.
    detach("package:blotter", unload=TRUE)
[and if  .blotter does not exist]



--
View this message in context: http://r.789695.n4.nabble.com/a-concern-about-blotter-and-RStudio-tp4632267p4632270.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Mon Jun  4 12:39:24 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 04 Jun 2012 05:39:24 -0500
Subject: [R-SIG-Finance] a concern about blotter (and RStudio)
In-Reply-To: <1338772414947-4632270.post@n4.nabble.com>
References: <4FCBFCB9.8050504@gmail.com> <4FCC0204.1020804@braverock.com>
	<1338772414947-4632270.post@n4.nabble.com>
Message-ID: <4FCC905C.4040501@braverock.com>

On 06/03/2012 08:13 PM, dae wrote:
>
> braverock wrote
>>
>> You can recreate an (empty) .blotter environment with this code:
>>
>> .blotter<- new.env()
>>
>>
>
> How does new.env()  relate to the namespace?
>
> library(blotter) won't create .blotter
> unless the old namespace is unloaded when
> it's detached.
>      detach("package:blotter", unload=TRUE)
> [and if  .blotter does not exist]

the .blotter environment is created initially for the user (if it does 
not already exist) in the .onLoad function of the package.

If you are using project directories (as supported by RStudio and 
recommended in many texts on best practices for programming in R), you 
can then leave the .blotter environment for your project in a known 
state and come back to it to work on later.

One example is incrementally adding production or simulated transactions 
as more data becomes available in subsequent days.

I suspect that if detach is called without unload=TRUE, that .onLoad may 
not get called when the package is reloaded.  This would suggest a 
possible unintended behavior in RStudio.

Another option is that the .onLoad function in blotter isn't 'smart' 
enough to figure out that it needs to recreate a new.env() .blotter for 
the user in the user's .GlobalEnv

To directly answer your question, new.env() has nothing to do with the 
blotter package namespace.  As I said before, it is a workaround that 
recreates it.  if a .blotter environment already existed, calling

.blotter<- new.env()

would unceremoniously clobber it.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From dougedmunds at gmail.com  Tue Jun  5 17:40:45 2012
From: dougedmunds at gmail.com (dae)
Date: Tue, 5 Jun 2012 08:40:45 -0700 (PDT)
Subject: [R-SIG-Finance] Determining optional parameters
Message-ID: <1338910845581-4632413.post@n4.nabble.com>

Is there a systematic way to determine optional  parameters for a function? 
By optional, I am referring to those which are in the "..." portion of the 
function definition.  

For example, quantmod's getSymbols help file shows this:

getSymbols(Symbols = NULL, 
           env = .GlobalEnv,
           reload.Symbols = FALSE,
           verbose = FALSE,
           warnings = TRUE,
           src = "yahoo",
           symbol.lookup = TRUE,
           auto.assign = TRUE,
           ...)

In /library/blotter/demo/turtles.R,   it uses getSymbols
in this way:

getSymbols(symbols, index.class="POSIXct", from=initDate, source="yahoo")

"symbols" is created earlier in the code:
symbols = c("XLF", "XLP", "XLE")
and due to it's position in the parameter list, is presumably equivalent to: 

getSymbols(Symbols=symbols, index.class="POSIXct", from=initDate,
source="yahoo")

but index.class, from, and source are not in the function definition.  How
do I
systematically explore a function's optional parameters?




--
View this message in context: http://r.789695.n4.nabble.com/Determining-optional-parameters-tp4632413.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Tue Jun  5 18:42:38 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 05 Jun 2012 11:42:38 -0500
Subject: [R-SIG-Finance] Determining optional parameters
In-Reply-To: <1338910845581-4632413.post@n4.nabble.com>
References: <1338910845581-4632413.post@n4.nabble.com>
Message-ID: <1338914558.2639.21.camel@brian-rcg>

On Tue, 2012-06-05 at 08:40 -0700, dae wrote:
> Is there a systematic way to determine optional  parameters for a function? 
> By optional, I am referring to those which are in the "..." portion of the 
> function definition.  
> 
> For example, quantmod's getSymbols help file shows this:
> 
> getSymbols(Symbols = NULL, 
>            env = .GlobalEnv,
>            reload.Symbols = FALSE,
>            verbose = FALSE,
>            warnings = TRUE,
>            src = "yahoo",
>            symbol.lookup = TRUE,
>            auto.assign = TRUE,
>            ...)
> 
> In /library/blotter/demo/turtles.R,   it uses getSymbols
> in this way:
> 
> getSymbols(symbols, index.class="POSIXct", from=initDate, source="yahoo")
> 
> "symbols" is created earlier in the code:
> symbols = c("XLF", "XLP", "XLE")
> and due to it's position in the parameter list, is presumably equivalent to: 
> 
> getSymbols(Symbols=symbols, index.class="POSIXct", from=initDate,
> source="yahoo")
> 
> but index.class, from, and source are not in the function definition.  How
> do I systematically explore a function's optional parameters?

In this case, what's happening is that getSymbols is dispatching to the
function getSymbols.yahoo identified by the 'src' argument.

If you do

?getSymbols.yahoo

you can see the documentation for the underlying function.

dots ... are typically used, as in this case, to pass things to other
lower-level functions.  Typical examples would include things like plot
functions, other encapsulated analytics (TTR functions, lm, etc.), or
similar.  Typically, they will not be used for direct arguments to the
function you've called.

HTH,

 - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From noblenav68 at gmail.com  Tue Jun  5 19:27:45 2012
From: noblenav68 at gmail.com (Jonathan Noble)
Date: Tue, 5 Jun 2012 12:27:45 -0500
Subject: [R-SIG-Finance] quantstrat Stop Loss Modeling help request
Message-ID: <CAN8nWja6NVZxcWsS84HazEEdMMx8Dm48ge3mAdc6VRV1XJqQ4Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120605/7c460c94/attachment.pl>

From weihanliu2002 at yahoo.com  Wed Jun  6 02:10:03 2012
From: weihanliu2002 at yahoo.com (Wei-han Liu)
Date: Tue, 5 Jun 2012 17:10:03 -0700 (PDT)
Subject: [R-SIG-Finance] Error in midnightStandard(charvec, format)
Message-ID: <1338941403.39299.YahooMailNeo@web161303.mail.bf1.yahoo.com>

Hi R users:
?
I am trying some functions in QRMlib
package and applying to my own trial dataset but encountered the following
error message when dealing with time series data.?
?
Error in
midnightStandard(charvec, format) : 
? 'charvec' has non-NA entries of different
number of characters


I have googled
for some solution but the discussions are not clear enough to me if the issue
can be solved or not. I suppose it is due to the data type conflict.

Listed below is the coding and dataset is attached:
dataset <-
read.csv("D:/stockindex.csv", header=TRUE, sep = ",");
tsData <-
as.timeSeries(dataset);
Date <-
tsData[,1];
SP500ts <-
tsData[,2];


SP500.nreturns
<- -mk.returns(SP500ts);
tD <-
timeDate("05/16/1992","%m/%d/%Y");
window <-
(seriesPositions(SP500.nreturns) > tD);SP500.nreturns <-
SP500.nreturns[window];


Thanks for your attention and assistance.

Wei-han
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120605/76639a71/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: stockindex.csv
Type: application/octet-stream
Size: 4342 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120605/76639a71/attachment.obj>

From gsee000 at gmail.com  Wed Jun  6 02:45:08 2012
From: gsee000 at gmail.com (G See)
Date: Tue, 5 Jun 2012 19:45:08 -0500
Subject: [R-SIG-Finance] Error in midnightStandard(charvec, format)
In-Reply-To: <1338941403.39299.YahooMailNeo@web161303.mail.bf1.yahoo.com>
References: <1338941403.39299.YahooMailNeo@web161303.mail.bf1.yahoo.com>
Message-ID: <CA+xi=qZTkTcGG3y6xkCazqiZznExCQu9e=T+npSYh0RM1ziPWA@mail.gmail.com>

Hi Wei-han,

The problem is that your csv has tabs in the date.  One solution would
be to remove the tabs with gsub like this

    dataset$Date <- gsub("\t", "", dataset$Date)

That should get rid of the error.

A more elegant solution might be to use read.zoo from the zoo package
to read your csv.

HTH,
Garrett

On Tue, Jun 5, 2012 at 7:10 PM, Wei-han Liu <weihanliu2002 at yahoo.com> wrote:
> Hi R users:
>
> I am trying some functions in QRMlib package and applying to my own trial
> dataset but encountered the following error message when dealing with time
> series data.
>
> Error in midnightStandard(charvec, format) :
> ? 'charvec' has non-NA entries of different number of characters
>
>
> I have googled for some solution but the discussions are not clear enough to
> me if the issue can be solved or not. I suppose it is due to the data type
> conflict.
>
> Listed below is the coding and dataset is attached:
> dataset <- read.csv("D:/stockindex.csv", header=TRUE, sep = ",");
> tsData <- as.timeSeries(dataset);
> Date <- tsData[,1];
> SP500ts <- tsData[,2];
>
> SP500.nreturns <- -mk.returns(SP500ts);
> tD <- timeDate("05/16/1992","%m/%d/%Y");
> window <- (seriesPositions(SP500.nreturns) > tD);
> SP500.nreturns <- SP500.nreturns[window];
>
> Thanks for your attention and assistance.
>
> Wei-han
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.


From j_cuisinier at hotmail.com  Wed Jun  6 10:01:35 2012
From: j_cuisinier at hotmail.com (julien cuisinier)
Date: Wed, 6 Jun 2012 10:01:35 +0200
Subject: [R-SIG-Finance] RBloomberg package rename
In-Reply-To: <CAA3Wa=s-Y5xeTCq6DpEBZP1+Cavod4ZrDH_LzK6e5d19JykAcw@mail.gmail.com>
References: <CAA3Wa=s-Y5xeTCq6DpEBZP1+Cavod4ZrDH_LzK6e5d19JykAcw@mail.gmail.com>
Message-ID: <COL102-W46D1C77A47EFE8B27DB5998F0D0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120606/60337735/attachment.pl>

From n-e-w at qtradr.net  Wed Jun  6 10:06:39 2012
From: n-e-w at qtradr.net (Nick)
Date: Wed, 06 Jun 2012 18:06:39 +1000
Subject: [R-SIG-Finance] RBloomberg package rename
In-Reply-To: <COL102-W46D1C77A47EFE8B27DB5998F0D0@phx.gbl>
References: <CAA3Wa=s-Y5xeTCq6DpEBZP1+Cavod4ZrDH_LzK6e5d19JykAcw@mail.gmail.com>
	<COL102-W46D1C77A47EFE8B27DB5998F0D0@phx.gbl>
Message-ID: <4FCF0F8F.7020700@qtradr.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120606/1fd61c1e/attachment.pl>

From j_cuisinier at hotmail.com  Wed Jun  6 10:37:03 2012
From: j_cuisinier at hotmail.com (julien cuisinier)
Date: Wed, 6 Jun 2012 10:37:03 +0200
Subject: [R-SIG-Finance] RBloomberg package rename
In-Reply-To: <4FCF0F8F.7020700@qtradr.net>
References: <CAA3Wa=s-Y5xeTCq6DpEBZP1+Cavod4ZrDH_LzK6e5d19JykAcw@mail.gmail.com>,
	<COL102-W46D1C77A47EFE8B27DB5998F0D0@phx.gbl>,
	<4FCF0F8F.7020700@qtradr.net>
Message-ID: <COL102-W65AD49F2F570852A590C798F0D0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120606/54172d86/attachment.pl>

From john.laing at gmail.com  Wed Jun  6 13:10:16 2012
From: john.laing at gmail.com (John Laing)
Date: Wed, 6 Jun 2012 07:10:16 -0400
Subject: [R-SIG-Finance] RBloomberg package rename
In-Reply-To: <COL102-W65AD49F2F570852A590C798F0D0@phx.gbl>
References: <CAA3Wa=s-Y5xeTCq6DpEBZP1+Cavod4ZrDH_LzK6e5d19JykAcw@mail.gmail.com>
	<COL102-W46D1C77A47EFE8B27DB5998F0D0@phx.gbl>
	<4FCF0F8F.7020700@qtradr.net>
	<COL102-W65AD49F2F570852A590C798F0D0@phx.gbl>
Message-ID: <CAA3Wa=uYm_U1gROeuGV7++Bi8w5W9zZdBjuCm=k0o+cVZ7NDZQ@mail.gmail.com>

Hi Julien,

This behavior can happen if you do not have an up-to-date version of
the Java v3 API. Did you download the Java version of the SDK from the
WAPI function?

-John

On Wed, Jun 6, 2012 at 4:37 AM, julien cuisinier
<j_cuisinier at hotmail.com> wrote:
>
> Thanks Nick, does not change a thing unfortunately.
>
> Trying to specify the location of the jar file does not work either:
>> conn <- blpConnect(blpapi.jar.file="C:\\blp\\API\\blpapi3.jar")
>
> R stop responding & I need to kill the process everytime...
>
> any idea most welcome
>
> Thanks,
> Julien
>
>
>
>> Date: Wed, 6 Jun 2012 18:06:39 +1000
>> From: n-e-w at qtradr.net
>> To: r-sig-finance at r-project.org
>> Subject: Re: [R-SIG-Finance] RBloomberg package rename
>>
>> Julien,
>>
>> Perhaps try uninstalling RBloomberg now that you have Rbbg installed.
>> That *might* cause a conflict. I haven't tried this though.
>>
>> Just seems like a good first step before diving into the filesystem /
>> debugging the Java issue (if there is one)
>>
>>
>>
>> On 06/06/2012 06:01 PM, julien cuisinier wrote:
>> > Hi John / List,
>> >
>> >
>> >
>> > Many thanks for keeping us posted on the below.
>> >
>> > When trying to install Rbbg (Or RBloomberg before name switch) It does not find the blpapi3.jar file - which in my PC after the install of the BBG SDK I have in the folder "C:\blp\API" and not into "C:\blp\API\APIv3\JavaAPI" that the package is looking in...Probably me doing something? or any way to change the folder where it looks for the .jar file? ?Any feedback appreciated...
>> >
>> >
>> > Many thanks,
>> > Julien
>> >
>> >
>> >
>> >
>> > Below some session infos after running the BLPSDKInstaller.EXE downloaded from BBG desktop:
>> >
>> >> sessionInfo()
>> > R version 2.15.0 (2012-03-30)
>> > Platform: i386-pc-mingw32/i386 (32-bit)
>> >
>> > locale:
>> > [1] LC_COLLATE=English_United Kingdom.1252 ?LC_CTYPE=English_United Kingdom.1252 ? ?LC_MONETARY=English_United Kingdom.1252
>> > [4] LC_NUMERIC=C ? ? ? ? ? ? ? ? ? ? ? ? ? ?LC_TIME=English_United Kingdom.1252
>> >
>> > attached base packages:
>> > [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>> >
>> > other attached packages:
>> > [1] Rbbg_0.4-153 ? ? ? ? ? ? ? ? RBloomberg_0.4-151 ? ? ? ? ? rJava_0.9-3 ? ? ? ? ? ? ? ? ?PerformanceAnalytics_1.0.4.4
>> > [5] xts_0.8-6 ? ? ? ? ? ? ? ? ? ?zoo_1.7-7
>> >
>> > loaded via a namespace (and not attached):
>> > [1] grid_2.15.0 ? ?lattice_0.20-6 tools_2.15.0
>> >
>> >> library(Rbbg)
>> > Attaching package: 'Rbbg'
>> >
>> > The following object(s) are masked from 'package:RBloomberg':
>> >
>> > ? ? allBloombergTests, bar, bdh, bdp, bds, blp, blpConnect, blpConnect.Java, blpDisconnect, blpFieldInfo,
>> > ? ? blpGetData, convert.data.to.type, convert.to.type, field.description, process.result,
>> > ? ? runAllBloombergTests, tick
>> >
>> >> conn <- blpConnect()
>> > R version 2.15.0 (2012-03-30)
>> > rJava Version 0.9-3
>> > Rbbg Version 0.4-153
>> > Java environment initialized successfully.
>> > Looking for most recent blpapi3.jar file...
>> > Error in blpConnect.Java("warning", NULL, TRUE, NULL, TRUE) :
>> > ? Can't find C:\blp\API\APIv3\JavaAPI please confirm you have Bloomberg Version 3 Java API installed. If it's in a different location, please report this to Rbbg package maintainer.
>> >
>> >> setwd("C:\\blp\\API")
>> >> getwd()
>> > [1] "C:/blp/API"
>> >
>> >> list.files()
>> > ?[1] "activex" ? ? ? ? ? ? ? "ARDJFieldsMapping.xml" "bbapi.dll" ? ? ? ? ? ? "bbcomm.exe"
>> > ?[5] "bbconfig.exe" ? ? ? ? ?"Bbfields.ext" ? ? ? ? ?"Bbfields.ovr" ? ? ? ? ?"Bbfields.tbl"
>> > ?[9] "Bbfieldsj.tbl" ? ? ? ? "bbloaderv3.dll" ? ? ? ?"bbstop.exe" ? ? ? ? ? ?"bbtstapi.exe"
>> > [13] "blpapi3.jar" ? ? ? ? ? "blpapi3_32.dll" ? ? ? ?"blpapi32.dll" ? ? ? ? ?"blpapicom.dll"
>> > [17] "blpapicom2.dll" ? ? ? ?"blpdapisup.dll" ? ? ? ?"blpsend" ? ? ? ? ? ? ? "Bny00003.ico"
>> > [21] "Bny00004.ico" ? ? ? ? ?"Ccylist.tbl" ? ? ? ? ? "cdrlist.tbl" ? ? ? ? ? "dde"
>> > [25] "IBESFieldMapping.tbl" ?"MeterTrayTool.exe" ? ? "Office Tools"
>> >
>> >
>> >
>> >
>> >
>> >
>> >
>> >> Date: Mon, 21 May 2012 11:08:00 -0400
>> >> From: john.laing at gmail.com
>> >> To: r-sig-finance at r-project.org
>> >> Subject: [R-SIG-Finance] RBloomberg package rename
>> >>
>> >> The package formerly known as RBloomberg has been renamed Rbbg. As
>> >> this package is not formally affiliated with or endorsed by Bloomberg,
>> >> their lawyers have requested that we not reference the company by
>> >> name.
>> >>
>> >> The existing package will continue to work, but its binaries are no
>> >> longer publicly available and all updates/bug fixes/new features will
>> >> be rolled into the new package. The new Rbbg can be installed like
>> >> this:
>> >> install.packages("Rbbg", repos = "http://r.findata.org")
>> >>
>> >> Apologies for any inconvenience.
>> >>
>> >> -John
>> >>
>> >> _______________________________________________
>> >> R-SIG-Finance at r-project.org mailing list
>> >> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> >> -- Subscriber-posting only. If you want to post, subscribe first.
>> >> -- Also note that this is not the r-help list where general R questions should go.
>> >
>> > ? ? [[alternative HTML version deleted]]
>> >
>> >
>> >
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions should go.
>>
>>
>> ? ? ? [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From j_cuisinier at hotmail.com  Wed Jun  6 14:13:05 2012
From: j_cuisinier at hotmail.com (julien cuisinier)
Date: Wed, 6 Jun 2012 14:13:05 +0200
Subject: [R-SIG-Finance] RBloomberg package rename
In-Reply-To: <CAA3Wa=uYm_U1gROeuGV7++Bi8w5W9zZdBjuCm=k0o+cVZ7NDZQ@mail.gmail.com>
References: <CAA3Wa=s-Y5xeTCq6DpEBZP1+Cavod4ZrDH_LzK6e5d19JykAcw@mail.gmail.com>,
	<COL102-W46D1C77A47EFE8B27DB5998F0D0@phx.gbl>,
	<4FCF0F8F.7020700@qtradr.net>,
	<COL102-W65AD49F2F570852A590C798F0D0@phx.gbl>,
	<CAA3Wa=uYm_U1gROeuGV7++Bi8w5W9zZdBjuCm=k0o+cVZ7NDZQ@mail.gmail.com>
Message-ID: <COL102-W12DE35A72D49376A8BCBCA8F0D0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120606/f9776d8e/attachment.pl>

From petrovaa at gmail.com  Thu Jun  7 11:30:30 2012
From: petrovaa at gmail.com (tonyp)
Date: Thu, 7 Jun 2012 02:30:30 -0700 (PDT)
Subject: [R-SIG-Finance] multiple columns with time series dates
Message-ID: <1339061430112-4632660.post@n4.nabble.com>

Hi folks, 

I have data that I read in from excel. It is a multivariate asset classes
download i.e. not equal time lengths. 
So it is still a data frame. It looks something like that:

t.r<-read.csv('momdata.csv',header=T, fill=T)  #read table

        Date   UKX.P        UKX.R     Date.1   SMI.P        SMI.R     Date.2
1 07/05/2009 4398.68           NA 07/05/2009 5325.63           NA 07/05/2009
2 08/05/2009 4462.09  0.014415688 08/05/2009 5391.01  0.012276482 08/05/2009
3 11/05/2009 4435.50 -0.005959091 11/05/2009 5358.94 -0.005948793 11/05/2009
4 12/05/2009 4425.54 -0.002245519 12/05/2009 5346.03 -0.002409059 12/05/2009
5 13/05/2009 4331.37 -0.021278759 13/05/2009 5277.37 -0.012843175 13/05/2009
6 14/05/2009 4362.58  0.007205572 14/05/2009 5360.00  0.015657420 14/05/2009
   SX5E.P       SX5E.R     Date.3 FTSEMIB.P    FTSEMIB.R     Date.4  RTY.P
1 2406.08           NA 07/05/2009  19814.21           NA 07/05/2009 492.94
2 2462.39  0.023403212 08/05/2009  20508.55  0.035042528 08/05/2009 511.82
3 2433.59 -0.011695954 11/05/2009  20200.28 -0.015031292 11/05/2009 501.94
4 2424.34 -0.003800969 12/05/2009  20337.15  0.006775649 12/05/2009 495.18
5 2357.30 -0.027652887 13/05/2009  19380.88 -0.047020846 13/05/2009 471.82
6 2353.53 -0.001599287 14/05/2009  19271.42 -0.005647834 14/05/2009 480.71
        RTY.R     Date.5  OMX.P       OMX.R     Date.6   NDX.P        NDX.R
1          NA 07/05/2009 792.47          NA 07/05/2009 1389.83           NA
2  0.03830081 08/05/2009 802.03  0.01206355 08/05/2009 1394.16  0.003115489
3 -0.01930366 11/05/2009 783.38 -0.02325349 11/05/2009 1395.79  0.001169163
4 -0.01346774 12/05/2009 769.34 -0.01792234 12/05/2009 1377.40 -0.013175334
5 -0.04717477 13/05/2009 748.10 -0.02760808 13/05/2009 1339.83 -0.027276027
6  0.01884193 14/05/2009 757.66  0.01277904 14/05/2009 1359.67  0.014807849


I am trying to combine all these assets in one xts object aligned based on a
first date (because there is a discrepancy between dates). How do I do that?
If you can help, I would totally appreciate it. Thanks in advance, you quant
wizards.

Best of luck.



--
View this message in context: http://r.789695.n4.nabble.com/multiple-columns-with-time-series-dates-tp4632660.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From omerle at laposte.net  Thu Jun  7 13:09:57 2012
From: omerle at laposte.net (omerle)
Date: Thu, 07 Jun 2012 13:09:57 +0200
Subject: [R-SIG-Finance] IBrokers: combo contracts = spread contract ?
Message-ID: <238190251.2429786.1339067396744.JavaMail.www@wwinf8222>

Hi,

In mail below, I understand that twsBAG isn't a real contract and that there is no quotes 
for twsBAG.
I thought that twsBAG could allow us to make spread trade like in the spread trader (you 
can find the spread trader in trading tools). 
And as far as I know, there is specific quotes for spreads. 

1 - Can I use twsBAG to make spread trade ?

2 - If answer to 1 is yes, could you tell me what is the wrong in the following code :

(I try to make a spread trader between futures)
tws <- twsConnect(1)
orderID <- reqIds(tws) # orderID <- "125"
id1="83617918" # Futures ECO AUG12
id2="87689647" # Futures ECO NOV12
leg1=twsComboLeg(id1, ratio = 1, action = "BUY",exchange = "MATIF") #"SMART")
leg2=twsComboLeg(id2, ratio = 1, action = "SELL",exchange = "MATIF") #"SMART")
order <- twsOrder(orderID, action="BUY", totalQuantity="1", orderType= "LMT",lmtPrice = 
"-5")
bag <- twsContract(conId=as.real(orderID), symbol="ECO", sectype="BAG", "MATIF", 
"", expiry="", strike="0.0","EUR", cv1$right, local="", 
"50", combo_legs_desc=NULL, comboleg=list(leg1,leg2), 
include_expired="0", secIdType = "", secId = "") 
IBrokers::.placeOrder(tws,Contract=bag,Order=order)

Thanks a lot,

placeOrder/resAllOpenOrders is now working on my paper account following your advices on 
IBrokers version !

________________________________________________________

I don't think I've tried this, so I may be wrong, but twsBAG isn't a real
contract, it is for the order itself. Therefore you can't get mktData on
it.

Additionally, snapshot= isn't in the documentation for reqMktData.

Read the docs,and then see if you can get further along. It (API and
IBrokers) is intentionally tricky to prevent wide-spread self-inflicted
harm And 'paper account' is a good step...

Best,
Jeff

On 5/17/12 12:03 PM, "Alain Burt"  wrote:

> Hi there,
>
> I am having some troubles with the use of the IBrokers package on my IB
> paper account. I am trying to get market data and an order execution for a
> combo contract, with no success in both cases. I wonder if anyone could
> help. Here is the code I tried
>
>
>
> ibg <- ibgConnect()
>
>
>
> leg1 <- twsComboLeg( conId = "79265697",
>
> ratio = 1,
>
> action = "BUY",
>
> exchange = "SMART")
>
>
>
> leg2 <- twsComboLeg( conId = "79265687",
>
> ratio = 1,
>
> action = "SELL",
>
> exchange = "SMART")
>
>
>
> reqMktData(conn = ibg, Contract = twsBAG(leg1,leg2), tickGenerics = "",
> tickerId = "1", snapshot = T)
>
>
>
> placeOrder(ibg, twsBAG(leg1,leg2), twsOrder(reqIds(ibg),"BUY",1,"MKT"))
>
>
>
> About the market data, I am not getting anything, even by setting snapshot
> = F. As for the order, it is placed but never executed. Could it be a
> problem with contract objects created by twsBAG ? Does anyone know how to
> fix these issues ?
>
>
>
> Best regards,
>
> Alain
>
> [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
Je cr?e ma bo?te mail www.laposte.net


From omerle at laposte.net  Thu Jun  7 13:45:40 2012
From: omerle at laposte.net (omerle)
Date: Thu, 07 Jun 2012 13:45:40 +0200
Subject: [R-SIG-Finance] IBrokers: combo contracts = spread contract ?
 (Solved)
Message-ID: <812159526.292444.1339069540121.JavaMail.www@wwinf8309>

Dmaned, I wasn't watching in the right thing.
The twsBAG is indeed currently working but it doesn't display the order in the spread 
trader but in the API !

Sorry for loosing your time !


> Message du 07/06/12 13:11
> De : "omerle" 
> A : r-sig-finance at r-project.org
> Copie ? : 
> Objet : [R-SIG-Finance] IBrokers: combo contracts = spread contract ?
>
> Hi,
> 
> In mail below, I understand that twsBAG isn't a real contract and that there is no 
quotes 
> for twsBAG.
> I thought that twsBAG could allow us to make spread trade like in the spread trader (you 
> can find the spread trader in trading tools). 
> And as far as I know, there is specific quotes for spreads. 
> 
> 1 - Can I use twsBAG to make spread trade ?
> 
> 2 - If answer to 1 is yes, could you tell me what is the wrong in the following code :
> 
> (I try to make a spread trader between futures)
> tws <- twsConnect(1)
> orderID <- reqIds(tws) # orderID <- "125"
> id1="83617918" # Futures ECO AUG12
> id2="87689647" # Futures ECO NOV12
> leg1=twsComboLeg(id1, ratio = 1, action = "BUY",exchange = "MATIF") #"SMART")
> leg2=twsComboLeg(id2, ratio = 1, action = "SELL",exchange = "MATIF") #"SMART")
> order <- twsOrder(orderID, action="BUY", totalQuantity="1", orderType= "LMT",lmtPrice = 
> "-5")
> bag <- twsContract(conId=as.real(orderID), symbol="ECO", sectype="BAG", "MATIF", 
> "", expiry="", strike="0.0","EUR", cv1$right, local="", 
> "50", combo_legs_desc=NULL, comboleg=list(leg1,leg2), 
> include_expired="0", secIdType = "", secId = "") 
> IBrokers::.placeOrder(tws,Contract=bag,Order=order)
> 
> Thanks a lot,
> 
> placeOrder/resAllOpenOrders is now working on my paper account following your advices on 
> IBrokers version !
> 
> ________________________________________________________
> 
> I don't think I've tried this, so I may be wrong, but twsBAG isn't a real
> contract, it is for the order itself. Therefore you can't get mktData on
> it.
> 
> Additionally, snapshot= isn't in the documentation for reqMktData.
> 
> Read the docs,and then see if you can get further along. It (API and
> IBrokers) is intentionally tricky to prevent wide-spread self-inflicted
> harm And 'paper account' is a good step...
> 
> Best,
> Jeff
> 
> On 5/17/12 12:03 PM, "Alain Burt" wrote:
> 
> > Hi there,
> >
> > I am having some troubles with the use of the IBrokers package on my IB
> > paper account. I am trying to get market data and an order execution for a
> > combo contract, with no success in both cases. I wonder if anyone could
> > help. Here is the code I tried
> >
> >
> >
> > ibg <- ibgConnect()
> >
> >
> >
> > leg1 <- twsComboLeg( conId = "79265697",
> >
> > ratio = 1,
> >
> > action = "BUY",
> >
> > exchange = "SMART")
> >
> >
> >
> > leg2 <- twsComboLeg( conId = "79265687",
> >
> > ratio = 1,
> >
> > action = "SELL",
> >
> > exchange = "SMART")
> >
> >
> >
> > reqMktData(conn = ibg, Contract = twsBAG(leg1,leg2), tickGenerics = "",
> > tickerId = "1", snapshot = T)
> >
> >
> >
> > placeOrder(ibg, twsBAG(leg1,leg2), twsOrder(reqIds(ibg),"BUY",1,"MKT"))
> >
> >
> >
> > About the market data, I am not getting anything, even by setting snapshot
> > = F. As for the order, it is placed but never executed. Could it be a
> > problem with contract objects created by twsBAG ? Does anyone know how to
> > fix these issues ?
> >
> >
> >
> > Best regards,
> >
> > Alain
> >
> > [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions
> > should go.
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
> 
> 
> Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
> Je cr?e ma bo?te mail www.laposte.net
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
Je cr?e ma bo?te mail www.laposte.net


From guillaume.horel at gmail.com  Fri Jun  8 00:07:02 2012
From: guillaume.horel at gmail.com (Guillaume Horel)
Date: Thu, 7 Jun 2012 18:07:02 -0400
Subject: [R-SIG-Finance] RQuantLib possible bug in yearFraction and dayCount
Message-ID: <CAJ-0prALJ8g-jaYjG1x6UJsQckpvY=o_REOORY=0wmQwTs19NA@mail.gmail.com>

Hello,

I'm trying to use the yearFraction function from the RQuantLib
library. However the function behaves strangely. This small example
should make the problem clear:

> yearFraction(Sys.Date(),Sys.Date()+10,0)
> dt <- yearFraction(Sys.Date(),Sys.Date()+10,0)
> dt
[1] 0.02777778
> dtvec <- yearFraction(Sys.Date(),Sys.Date()+10:20,0)
> dtvec
[1] 0.02777778

The first issue is that just calling yearFraction alone doesn't return
anything. However the output is just hidden, because if I store the
result to a variable it works fine.
However this trick doesn't work if you want to apply it to a vector as
shown with the dtvec variable.

This is the output from example(yearFraction), which shows that
dayCount also exhibits the same issue (no output).

yrFrct>   startDates <- seq(from=as.Date("2009-04-07"),
to=as.Date("2009-04-14"),by=1)

yrFrct>   endDates <- seq(from=as.Date("2009-11-07"),
to=as.Date("2009-11-14"), by=1)

yrFrct>   dayCounters <- c(0,1,2,3,4,5,6,1)

yrFrct>   dayCount(startDates, endDates, dayCounters)

yrFrct>   yearFraction(startDates, endDates, dayCounters)


Can anybody else reproduce this? I'm trying to figure out if there is
something wrong with my setup or if it's an actual bug in
yearFraction.

Thanks,
Guillaume


From michael.weylandt at gmail.com  Fri Jun  8 04:57:30 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Thu, 7 Jun 2012 21:57:30 -0500
Subject: [R-SIG-Finance] RQuantLib possible bug in yearFraction and
	dayCount
In-Reply-To: <CAJ-0prALJ8g-jaYjG1x6UJsQckpvY=o_REOORY=0wmQwTs19NA@mail.gmail.com>
References: <CAJ-0prALJ8g-jaYjG1x6UJsQckpvY=o_REOORY=0wmQwTs19NA@mail.gmail.com>
Message-ID: <CAAmySGNS2YN5ZpK+kxkJGf7hCv0MH5rrSuz+UMEc52Rw88s++g@mail.gmail.com>

Hmmmm... looking at the source code, you see the return value is
wrapped in invisible() so it won't auto-print but it is returned
--it's not a bug, but I don't know exactly why Dirk would have done
that. There are other functions that return invisibly (e.g., most plot
functions) but those are usually side-effect functions.

The invisible() was added not too long ago in r322 it seems, but the
log doesn't quite explain why. Perhaps Dirk can chime in?

Michael

On Thu, Jun 7, 2012 at 5:07 PM, Guillaume Horel
<guillaume.horel at gmail.com> wrote:
> Hello,
>
> I'm trying to use the yearFraction function from the RQuantLib
> library. However the function behaves strangely. This small example
> should make the problem clear:
>
>> yearFraction(Sys.Date(),Sys.Date()+10,0)
>> dt <- yearFraction(Sys.Date(),Sys.Date()+10,0)
>> dt
> [1] 0.02777778
>> dtvec <- yearFraction(Sys.Date(),Sys.Date()+10:20,0)
>> dtvec
> [1] 0.02777778
>
> The first issue is that just calling yearFraction alone doesn't return
> anything. However the output is just hidden, because if I store the
> result to a variable it works fine.
> However this trick doesn't work if you want to apply it to a vector as
> shown with the dtvec variable.
>
> This is the output from example(yearFraction), which shows that
> dayCount also exhibits the same issue (no output).
>
> yrFrct> ? startDates <- seq(from=as.Date("2009-04-07"),
> to=as.Date("2009-04-14"),by=1)
>
> yrFrct> ? endDates <- seq(from=as.Date("2009-11-07"),
> to=as.Date("2009-11-14"), by=1)
>
> yrFrct> ? dayCounters <- c(0,1,2,3,4,5,6,1)
>
> yrFrct> ? dayCount(startDates, endDates, dayCounters)
>
> yrFrct> ? yearFraction(startDates, endDates, dayCounters)
>
>
> Can anybody else reproduce this? I'm trying to figure out if there is
> something wrong with my setup or if it's an actual bug in
> yearFraction.
>
> Thanks,
> Guillaume
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From guillaume.horel at gmail.com  Fri Jun  8 16:38:46 2012
From: guillaume.horel at gmail.com (Guillaume Horel)
Date: Fri, 8 Jun 2012 10:38:46 -0400
Subject: [R-SIG-Finance] RQuantLib possible bug in yearFraction and
	dayCount
In-Reply-To: <CAAmySGNS2YN5ZpK+kxkJGf7hCv0MH5rrSuz+UMEc52Rw88s++g@mail.gmail.com>
References: <CAJ-0prALJ8g-jaYjG1x6UJsQckpvY=o_REOORY=0wmQwTs19NA@mail.gmail.com>
	<CAAmySGNS2YN5ZpK+kxkJGf7hCv0MH5rrSuz+UMEc52Rw88s++g@mail.gmail.com>
Message-ID: <CAJ-0prABg1A0S-UKLL-U+F+zio5MY=LcApJRTRCKctBQvxVJDg@mail.gmail.com>

Ok thanks, this makes sense. Any way to make it work with a vector?
The example from the doc with startDates, endDates makes clear that it
should return a vector but I can only get a single value.

Guillaume

On Thu, Jun 7, 2012 at 10:57 PM, R. Michael Weylandt
<michael.weylandt at gmail.com> wrote:
> Hmmmm... looking at the source code, you see the return value is
> wrapped in invisible() so it won't auto-print but it is returned
> --it's not a bug, but I don't know exactly why Dirk would have done
> that. There are other functions that return invisibly (e.g., most plot
> functions) but those are usually side-effect functions.
>
> The invisible() was added not too long ago in r322 it seems, but the
> log doesn't quite explain why. Perhaps Dirk can chime in?
>
> Michael
>
> On Thu, Jun 7, 2012 at 5:07 PM, Guillaume Horel
> <guillaume.horel at gmail.com> wrote:
>> Hello,
>>
>> I'm trying to use the yearFraction function from the RQuantLib
>> library. However the function behaves strangely. This small example
>> should make the problem clear:
>>
>>> yearFraction(Sys.Date(),Sys.Date()+10,0)
>>> dt <- yearFraction(Sys.Date(),Sys.Date()+10,0)
>>> dt
>> [1] 0.02777778
>>> dtvec <- yearFraction(Sys.Date(),Sys.Date()+10:20,0)
>>> dtvec
>> [1] 0.02777778
>>
>> The first issue is that just calling yearFraction alone doesn't return
>> anything. However the output is just hidden, because if I store the
>> result to a variable it works fine.
>> However this trick doesn't work if you want to apply it to a vector as
>> shown with the dtvec variable.
>>
>> This is the output from example(yearFraction), which shows that
>> dayCount also exhibits the same issue (no output).
>>
>> yrFrct> ? startDates <- seq(from=as.Date("2009-04-07"),
>> to=as.Date("2009-04-14"),by=1)
>>
>> yrFrct> ? endDates <- seq(from=as.Date("2009-11-07"),
>> to=as.Date("2009-11-14"), by=1)
>>
>> yrFrct> ? dayCounters <- c(0,1,2,3,4,5,6,1)
>>
>> yrFrct> ? dayCount(startDates, endDates, dayCounters)
>>
>> yrFrct> ? yearFraction(startDates, endDates, dayCounters)
>>
>>
>> Can anybody else reproduce this? I'm trying to figure out if there is
>> something wrong with my setup or if it's an actual bug in
>> yearFraction.
>>
>> Thanks,
>> Guillaume
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.


From michael.weylandt at gmail.com  Fri Jun  8 16:44:16 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Fri, 8 Jun 2012 09:44:16 -0500
Subject: [R-SIG-Finance] RQuantLib possible bug in yearFraction and
	dayCount
In-Reply-To: <CAJ-0prABg1A0S-UKLL-U+F+zio5MY=LcApJRTRCKctBQvxVJDg@mail.gmail.com>
References: <CAJ-0prALJ8g-jaYjG1x6UJsQckpvY=o_REOORY=0wmQwTs19NA@mail.gmail.com>
	<CAAmySGNS2YN5ZpK+kxkJGf7hCv0MH5rrSuz+UMEc52Rw88s++g@mail.gmail.com>
	<CAJ-0prABg1A0S-UKLL-U+F+zio5MY=LcApJRTRCKctBQvxVJDg@mail.gmail.com>
Message-ID: <CAAmySGPMp976ykiwqYAGCcm1Gx0RDVQFGTA6U=GL8SA5-PswJQ@mail.gmail.com>

Well, I don't really know what you're doing wrong: it works just fine
to give me a vector so please provide a reproducible example of it not
doing so:

# From the examples
startDates <- structure(c(14341, 14342, 14343, 14344, 14345, 14346, 14347,
14348), class = "Date")

endDates structure(c(14555, 14556, 14557, 14558, 14559, 14560, 14561,
14562), class = "Date")

dayCounters <- c(0,1,2,3,4,5,6,1)

print(yearFraction(startDates, endDates, dayCounters))
print(yearFraction(startDates[1:4], endDates[rep(1,4)], rep(0, 4)))

I haven't really played with it, but it seems that you'll only get as
many outputs as you provide "dayCounter"s so that might be part of
your problem.

Best,
Michael

On Fri, Jun 8, 2012 at 9:38 AM, Guillaume Horel
<guillaume.horel at gmail.com> wrote:
> Ok thanks, this makes sense. Any way to make it work with a vector?
> The example from the doc with startDates, endDates makes clear that it
> should return a vector but I can only get a single value.
>
> Guillaume
>
> On Thu, Jun 7, 2012 at 10:57 PM, R. Michael Weylandt
> <michael.weylandt at gmail.com> wrote:
>> Hmmmm... looking at the source code, you see the return value is
>> wrapped in invisible() so it won't auto-print but it is returned
>> --it's not a bug, but I don't know exactly why Dirk would have done
>> that. There are other functions that return invisibly (e.g., most plot
>> functions) but those are usually side-effect functions.
>>
>> The invisible() was added not too long ago in r322 it seems, but the
>> log doesn't quite explain why. Perhaps Dirk can chime in?
>>
>> Michael
>>
>> On Thu, Jun 7, 2012 at 5:07 PM, Guillaume Horel
>> <guillaume.horel at gmail.com> wrote:
>>> Hello,
>>>
>>> I'm trying to use the yearFraction function from the RQuantLib
>>> library. However the function behaves strangely. This small example
>>> should make the problem clear:
>>>
>>>> yearFraction(Sys.Date(),Sys.Date()+10,0)
>>>> dt <- yearFraction(Sys.Date(),Sys.Date()+10,0)
>>>> dt
>>> [1] 0.02777778
>>>> dtvec <- yearFraction(Sys.Date(),Sys.Date()+10:20,0)
>>>> dtvec
>>> [1] 0.02777778
>>>
>>> The first issue is that just calling yearFraction alone doesn't return
>>> anything. However the output is just hidden, because if I store the
>>> result to a variable it works fine.
>>> However this trick doesn't work if you want to apply it to a vector as
>>> shown with the dtvec variable.
>>>
>>> This is the output from example(yearFraction), which shows that
>>> dayCount also exhibits the same issue (no output).
>>>
>>> yrFrct> ? startDates <- seq(from=as.Date("2009-04-07"),
>>> to=as.Date("2009-04-14"),by=1)
>>>
>>> yrFrct> ? endDates <- seq(from=as.Date("2009-11-07"),
>>> to=as.Date("2009-11-14"), by=1)
>>>
>>> yrFrct> ? dayCounters <- c(0,1,2,3,4,5,6,1)
>>>
>>> yrFrct> ? dayCount(startDates, endDates, dayCounters)
>>>
>>> yrFrct> ? yearFraction(startDates, endDates, dayCounters)
>>>
>>>
>>> Can anybody else reproduce this? I'm trying to figure out if there is
>>> something wrong with my setup or if it's an actual bug in
>>> yearFraction.
>>>
>>> Thanks,
>>> Guillaume
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.


From guillaume.horel at gmail.com  Fri Jun  8 16:52:34 2012
From: guillaume.horel at gmail.com (Guillaume Horel)
Date: Fri, 8 Jun 2012 10:52:34 -0400
Subject: [R-SIG-Finance] RQuantLib possible bug in yearFraction and
	dayCount
In-Reply-To: <CAAmySGPMp976ykiwqYAGCcm1Gx0RDVQFGTA6U=GL8SA5-PswJQ@mail.gmail.com>
References: <CAJ-0prALJ8g-jaYjG1x6UJsQckpvY=o_REOORY=0wmQwTs19NA@mail.gmail.com>
	<CAAmySGNS2YN5ZpK+kxkJGf7hCv0MH5rrSuz+UMEc52Rw88s++g@mail.gmail.com>
	<CAJ-0prABg1A0S-UKLL-U+F+zio5MY=LcApJRTRCKctBQvxVJDg@mail.gmail.com>
	<CAAmySGPMp976ykiwqYAGCcm1Gx0RDVQFGTA6U=GL8SA5-PswJQ@mail.gmail.com>
Message-ID: <CAJ-0prCP_ZnG25bdef-FTVC5CDSgQGTNwpRB4Rr4d08Mc_mK3g@mail.gmail.com>

Thanks, it works here too. The reason was indeed that I only provided
one dayCounter.

On Fri, Jun 8, 2012 at 10:44 AM, R. Michael Weylandt
<michael.weylandt at gmail.com> wrote:
> Well, I don't really know what you're doing wrong: it works just fine
> to give me a vector so please provide a reproducible example of it not
> doing so:
>
> # From the examples
> startDates <- structure(c(14341, 14342, 14343, 14344, 14345, 14346, 14347,
> 14348), class = "Date")
>
> endDates structure(c(14555, 14556, 14557, 14558, 14559, 14560, 14561,
> 14562), class = "Date")
>
> dayCounters <- c(0,1,2,3,4,5,6,1)
>
> print(yearFraction(startDates, endDates, dayCounters))
> print(yearFraction(startDates[1:4], endDates[rep(1,4)], rep(0, 4)))
>
> I haven't really played with it, but it seems that you'll only get as
> many outputs as you provide "dayCounter"s so that might be part of
> your problem.
>
> Best,
> Michael
>
> On Fri, Jun 8, 2012 at 9:38 AM, Guillaume Horel
> <guillaume.horel at gmail.com> wrote:
>> Ok thanks, this makes sense. Any way to make it work with a vector?
>> The example from the doc with startDates, endDates makes clear that it
>> should return a vector but I can only get a single value.
>>
>> Guillaume
>>
>> On Thu, Jun 7, 2012 at 10:57 PM, R. Michael Weylandt
>> <michael.weylandt at gmail.com> wrote:
>>> Hmmmm... looking at the source code, you see the return value is
>>> wrapped in invisible() so it won't auto-print but it is returned
>>> --it's not a bug, but I don't know exactly why Dirk would have done
>>> that. There are other functions that return invisibly (e.g., most plot
>>> functions) but those are usually side-effect functions.
>>>
>>> The invisible() was added not too long ago in r322 it seems, but the
>>> log doesn't quite explain why. Perhaps Dirk can chime in?
>>>
>>> Michael
>>>
>>> On Thu, Jun 7, 2012 at 5:07 PM, Guillaume Horel
>>> <guillaume.horel at gmail.com> wrote:
>>>> Hello,
>>>>
>>>> I'm trying to use the yearFraction function from the RQuantLib
>>>> library. However the function behaves strangely. This small example
>>>> should make the problem clear:
>>>>
>>>>> yearFraction(Sys.Date(),Sys.Date()+10,0)
>>>>> dt <- yearFraction(Sys.Date(),Sys.Date()+10,0)
>>>>> dt
>>>> [1] 0.02777778
>>>>> dtvec <- yearFraction(Sys.Date(),Sys.Date()+10:20,0)
>>>>> dtvec
>>>> [1] 0.02777778
>>>>
>>>> The first issue is that just calling yearFraction alone doesn't return
>>>> anything. However the output is just hidden, because if I store the
>>>> result to a variable it works fine.
>>>> However this trick doesn't work if you want to apply it to a vector as
>>>> shown with the dtvec variable.
>>>>
>>>> This is the output from example(yearFraction), which shows that
>>>> dayCount also exhibits the same issue (no output).
>>>>
>>>> yrFrct> ? startDates <- seq(from=as.Date("2009-04-07"),
>>>> to=as.Date("2009-04-14"),by=1)
>>>>
>>>> yrFrct> ? endDates <- seq(from=as.Date("2009-11-07"),
>>>> to=as.Date("2009-11-14"), by=1)
>>>>
>>>> yrFrct> ? dayCounters <- c(0,1,2,3,4,5,6,1)
>>>>
>>>> yrFrct> ? dayCount(startDates, endDates, dayCounters)
>>>>
>>>> yrFrct> ? yearFraction(startDates, endDates, dayCounters)
>>>>
>>>>
>>>> Can anybody else reproduce this? I'm trying to figure out if there is
>>>> something wrong with my setup or if it's an actual bug in
>>>> yearFraction.
>>>>
>>>> Thanks,
>>>> Guillaume
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions should go.


From michael.weylandt at gmail.com  Fri Jun  8 21:08:12 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Fri, 8 Jun 2012 14:08:12 -0500
Subject: [R-SIG-Finance] multiple columns with time series dates
In-Reply-To: <1339061430112-4632660.post@n4.nabble.com>
References: <1339061430112-4632660.post@n4.nabble.com>
Message-ID: <CAAmySGOUa9s8Eqi12FjduedPvrmZ4h9vyzRPgyUYSkqmd2EwkQ@mail.gmail.com>

Untested [because I'm not quite sure what you mean about the date
discrepancy -- I don't see it], I'd try something like this:

xts(t.r[, c(FALSE,TRUE,TRUE)], t.r[,1])

You might need to adjust some factors to dates depending on what
read.csv did with them.

Best,
Michael

On Thu, Jun 7, 2012 at 4:30 AM, tonyp <petrovaa at gmail.com> wrote:
> Hi folks,
>
> I have data that I read in from excel. It is a multivariate asset classes
> download i.e. not equal time lengths.
> So it is still a data frame. It looks something like that:
>
> t.r<-read.csv('momdata.csv',header=T, fill=T) ?#read table
>
> ? ? ? ?Date ? UKX.P ? ? ? ?UKX.R ? ? Date.1 ? SMI.P ? ? ? ?SMI.R ? ? Date.2
> 1 07/05/2009 4398.68 ? ? ? ? ? NA 07/05/2009 5325.63 ? ? ? ? ? NA 07/05/2009
> 2 08/05/2009 4462.09 ?0.014415688 08/05/2009 5391.01 ?0.012276482 08/05/2009
> 3 11/05/2009 4435.50 -0.005959091 11/05/2009 5358.94 -0.005948793 11/05/2009
> 4 12/05/2009 4425.54 -0.002245519 12/05/2009 5346.03 -0.002409059 12/05/2009
> 5 13/05/2009 4331.37 -0.021278759 13/05/2009 5277.37 -0.012843175 13/05/2009
> 6 14/05/2009 4362.58 ?0.007205572 14/05/2009 5360.00 ?0.015657420 14/05/2009
> ? SX5E.P ? ? ? SX5E.R ? ? Date.3 FTSEMIB.P ? ?FTSEMIB.R ? ? Date.4 ?RTY.P
> 1 2406.08 ? ? ? ? ? NA 07/05/2009 ?19814.21 ? ? ? ? ? NA 07/05/2009 492.94
> 2 2462.39 ?0.023403212 08/05/2009 ?20508.55 ?0.035042528 08/05/2009 511.82
> 3 2433.59 -0.011695954 11/05/2009 ?20200.28 -0.015031292 11/05/2009 501.94
> 4 2424.34 -0.003800969 12/05/2009 ?20337.15 ?0.006775649 12/05/2009 495.18
> 5 2357.30 -0.027652887 13/05/2009 ?19380.88 -0.047020846 13/05/2009 471.82
> 6 2353.53 -0.001599287 14/05/2009 ?19271.42 -0.005647834 14/05/2009 480.71
> ? ? ? ?RTY.R ? ? Date.5 ?OMX.P ? ? ? OMX.R ? ? Date.6 ? NDX.P ? ? ? ?NDX.R
> 1 ? ? ? ? ?NA 07/05/2009 792.47 ? ? ? ? ?NA 07/05/2009 1389.83 ? ? ? ? ? NA
> 2 ?0.03830081 08/05/2009 802.03 ?0.01206355 08/05/2009 1394.16 ?0.003115489
> 3 -0.01930366 11/05/2009 783.38 -0.02325349 11/05/2009 1395.79 ?0.001169163
> 4 -0.01346774 12/05/2009 769.34 -0.01792234 12/05/2009 1377.40 -0.013175334
> 5 -0.04717477 13/05/2009 748.10 -0.02760808 13/05/2009 1339.83 -0.027276027
> 6 ?0.01884193 14/05/2009 757.66 ?0.01277904 14/05/2009 1359.67 ?0.014807849
>
>
> I am trying to combine all these assets in one xts object aligned based on a
> first date (because there is a discrepancy between dates). How do I do that?
> If you can help, I would totally appreciate it. Thanks in advance, you quant
> wizards.
>
> Best of luck.
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/multiple-columns-with-time-series-dates-tp4632660.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From papa.senyo at yahoo.it  Sun Jun 10 19:11:31 2012
From: papa.senyo at yahoo.it (Papa sen)
Date: Sun, 10 Jun 2012 18:11:31 +0100 (BST)
Subject: [R-SIG-Finance] Rugarch
Message-ID: <1339348291.19066.YahooMailNeo@web132304.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120610/9b63f8b6/attachment.pl>

From alexios at 4dscape.com  Sun Jun 10 19:22:23 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Sun, 10 Jun 2012 18:22:23 +0100
Subject: [R-SIG-Finance] Rugarch
In-Reply-To: <1339348291.19066.YahooMailNeo@web132304.mail.ird.yahoo.com>
References: <1339348291.19066.YahooMailNeo@web132304.mail.ird.yahoo.com>
Message-ID: <4FD4D7CF.1090501@4dscape.com>

If you are referring to equation 9 in the vignette, that is the 
coefficient(s) on the external regressor(s) in the variance
equation (whose name in the spec, summary etc is 'vxreg1', 
'vxreg2'....'vxregm' as detailed in bottom of P.6 of vignette on
naming conventions used).

-Alexios

On 10/06/2012 18:11, Papa sen wrote:
> Dear all,
> I would like to confirm this in the standard GARCH equation used in Rugarch . Please what does \zeta standards for
> in the formulation. However in the documentation \omega is the intercept, which i think is the mean, but not sure.
> kind regards,
> Sen
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From n-e-w at qtradr.net  Mon Jun 11 09:03:58 2012
From: n-e-w at qtradr.net (Nick)
Date: Mon, 11 Jun 2012 17:03:58 +1000
Subject: [R-SIG-Finance] Automatically sending .Rmd -> html files
Message-ID: <4FD5985E.2000503@qtradr.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120611/e9c1cb1d/attachment.ksh>

From man_9753 at yahoo.com  Mon Jun 11 18:45:13 2012
From: man_9753 at yahoo.com (v mande)
Date: Mon, 11 Jun 2012 09:45:13 -0700 (PDT)
Subject: [R-SIG-Finance] Timestamped hex type conversions
Message-ID: <1339433113.47375.YahooMailNeo@web125704.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120611/5bb8c02b/attachment.pl>

From jeff.a.ryan at gmail.com  Mon Jun 11 20:53:14 2012
From: jeff.a.ryan at gmail.com (Jeffrey Ryan)
Date: Mon, 11 Jun 2012 13:53:14 -0500
Subject: [R-SIG-Finance] Timestamped hex type conversions
In-Reply-To: <1339433113.47375.YahooMailNeo@web125704.mail.ne1.yahoo.com>
Message-ID: <CBFBA814.3F31B%jeff.a.ryan@gmail.com>

You'll need more information.  Are the timestamps originally doubles?
int64? Endianess?

Your problem isn't xts per se, it is reading in binary and/or hex chars
(really chars???) into R.  xts uses R's native numerical representations,
double() or integer().  It also supports most of the rest, but that is
even more off topic than this.

?readBin

Reproducible example is recommended, and non-html (i.e. Text) is preferred.

Best,
Jeff

On 6/11/12 11:45 AM, "v mande" <man_9753 at yahoo.com> wrote:

>I have 8 8-bit bytes (16 HEX characters) followed by 4 8-bit bytes (8 HEX
>characters)  that I want to convert to an xts data frame.  Not being an
>expert at type conversions, I was wondering if anyone can help me out or
>point me in the right direction.
>Thanks 
>
>Victor
>
>
>Below is the data from AAPL - The first 8 are a millisecond timestamp
>since January 1, 1970 (00 00 01 37 ca 3f ae 00)
>the next 4 are the closing price (44 11 14 7b).
>
>00 00 01 37 ca 3f ae 00 44 11 14 7b
>00 00 01 37 c5 19 52 00 44 0e ee 14
>	[[alternative HTML version deleted]]
>
>_______________________________________________
>R-SIG-Finance at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>-- Subscriber-posting only. If you want to post, subscribe first.
>-- Also note that this is not the r-help list where general R questions
>should go.


From marco.cora at googlemail.com  Tue Jun 12 09:49:39 2012
From: marco.cora at googlemail.com (Belgarath)
Date: Tue, 12 Jun 2012 00:49:39 -0700 (PDT)
Subject: [R-SIG-Finance] rugarch and fGarch
Message-ID: <1339487379101-4633077.post@n4.nabble.com>

Dear All, 

first of all thanks for the great package!

I'm trying to get volatility forecasts. So I tried a couple of packages and
I really like the roll functionality provided within the rugarch package but
am finding inconsistencies with the results from two garch packages:

1)
I run 

GA3=garchFit(formula=~arma(1,0)+aparch(1,1),data=SPX.log.ret,cond.dist="sstd")

modeltofit=ugarchspec(variance.model = list(model = "apARCH", garchOrder =
c(1, 1), 
  submodel = NULL, external.regressors = NULL, variance.targeting = FALSE),
  mean.model = list(armaOrder = c(1, 0), include.mean = TRUE, archm = FALSE, 
  archpow = 1, arfima = FALSE, external.regressors = NULL, archex = FALSE), 
  distribution.model = "sstd", start.pars = list(), fixed.pars = list())
GAA3=ugarchfit(spec=modeltofit,data=SPX.log.ret)

As you can see from the results below the parameter coefficients are
different but similar but the significance is much lower for rugarch. Do you
know why?

2)
I then run 

volforecast=ugarchroll(spec=modeltofit, data = last(SPX.log.ret,550),
n.ahead = 42, 
                       forecast.length = 100, refit.every = 25)
sigma=as.data.frame(volforecast)
sigmat <- as.POSIXct(strptime(sigma[,1],format="%Y-%m-%d"))
sigma2 <- xts(sigma[,3],order.by=sigmat)*100*sqrt(252)

And the results seems to me too low to represent the expected vol in 21
days. Could you please point me in the right direction?

Thank you!



**********************
RESULTS
**********************


fGarch----------------------
> summary(GA3)

Title:
 GARCH Modelling 

Call:
 garchFit(formula = ~arma(1, 0) + aparch(1, 1), data = SPX.log.ret, 
    cond.dist = "sstd") 

Mean and Variance Equation:
 data ~ arma(1, 0) + aparch(1, 1)
<environment: 0x000000000c09f038>
 [data = SPX.log.ret]

Conditional Distribution:
 sstd 

Coefficient(s):
         mu          ar1        omega       alpha1       gamma1        beta1  
 0.00025599  -0.06942414   0.00011829   0.08504516   0.99999999   0.91557956  
      delta         skew        shape  
 1.11700143   0.86337982   5.35586013  

Std. Errors:
 based on Hessian 

Error Analysis:
         Estimate  Std. Error  t value Pr(>|t|)    
mu      2.560e-04   2.023e-04    1.266 0.205659    
ar1    -6.942e-02   2.332e-02   -2.977 0.002907 ** 
omega   1.183e-04   3.481e-05    3.399 0.000677 ***
alpha1  8.505e-02   1.285e-02    6.616 3.69e-11 ***
gamma1  1.000e+00   1.441e-02   69.414  < 2e-16 ***
beta1   9.156e-01   1.006e-02   91.041  < 2e-16 ***
delta   1.117e+00   1.962e-01    5.693 1.25e-08 ***
skew    8.634e-01   2.755e-02   31.337  < 2e-16 ***
shape   5.356e+00   8.347e-01    6.416 1.40e-10 ***
---
Signif. codes:  0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1 

Log Likelihood:
 5271.315    normalized:  3.1433 

Description:
 Tue Jun 12 09:02:05 2012 by user: cora 


Standardised Residuals Tests:
                                Statistic p-Value     
 Jarque-Bera Test   R    Chi^2  2459.58   0           
 Shapiro-Wilk Test  R    W      0.9528365 0           
 Ljung-Box Test     R    Q(10)  11.72432  0.3039307   
 Ljung-Box Test     R    Q(15)  15.45374  0.4192542   
 Ljung-Box Test     R    Q(20)  21.50983  0.3676896   
 Ljung-Box Test     R^2  Q(10)  90.12559  5.107026e-15
 Ljung-Box Test     R^2  Q(15)  91.15075  6.047385e-13
 Ljung-Box Test     R^2  Q(20)  91.74618  3.664247e-11
 LM Arch Test       R    TR^2   26.18211  0.01011463  

Information Criterion Statistics:
      AIC       BIC       SIC      HQIC 
-6.275867 -6.246754 -6.275924 -6.265082 

******************************+
******************************


rugarch--------------------
> show(GAA3)

*---------------------------------*
*          GARCH Model Fit        *
*---------------------------------*

Conditional Variance Dynamics 	
-----------------------------------
GARCH Model	: apARCH(1,1)
Mean Model	: ARFIMA(1,0,0)
Distribution	: sstd 

Optimal Parameters
------------------------------------
        Estimate  Std. Error     t value Pr(>|t|)
mu      0.000237    0.000190  1.2474e+00 0.212265
ar1    -0.069601    0.024100 -2.8881e+00 0.003876
omega   0.000175    0.000148  1.1823e+00 0.237092
alpha1  0.084114    0.011113  7.5687e+00 0.000000
beta1   0.920963    0.009835  9.3640e+01 0.000000
gamma1  1.000000    0.000000  2.6926e+06 0.000000
delta   1.025983    0.159330  6.4393e+00 0.000000
skew    0.860581    0.027580  3.1203e+01 0.000000
shape   5.561683    0.875725  6.3509e+00 0.000000

Robust Standard Errors:
        Estimate  Std. Error  t value Pr(>|t|)
mu      0.000237         NaN      NaN      NaN
ar1    -0.069601         NaN      NaN      NaN
omega   0.000175         NaN      NaN      NaN
alpha1  0.084114         NaN      NaN      NaN
beta1   0.920963         NaN      NaN      NaN
gamma1  1.000000         NaN      NaN      NaN
delta   1.025983         NaN      NaN      NaN
skew    0.860581         NaN      NaN      NaN
shape   5.561683         NaN      NaN      NaN

LogLikelihood : 5291.85 

Information Criteria
------------------------------------
                    
Akaike       -6.3004
Bayes        -6.2712
Shibata      -6.3004
Hannan-Quinn -6.2896

Q-Statistics on Standardized Residuals
------------------------------------
      statistic p-value
Lag10     8.594  0.4756
Lag15    13.965  0.4523
Lag20    20.967  0.3386

H0 : No serial correlation

Q-Statistics on Standardized Squared Residuals
------------------------------------
      statistic   p-value
Lag10     28.13 0.0009072
Lag15     31.84 0.0042245
Lag20     35.40 0.0124798

ARCH LM Tests
------------------------------------
             Statistic DoF  P-Value
ARCH Lag[2]      12.84   2 0.001630
ARCH Lag[5]      14.26   5 0.014050
ARCH Lag[10]     28.19  10 0.001683

Nyblom stability test
------------------------------------
Joint Statistic:  NA
Individual Statistics:              
mu     0.90793
ar1    0.11145
omega  0.91076
alpha1 0.53714
beta1  0.60241
gamma1      NA
delta  0.84958
skew   0.06079
shape  0.50963

Asymptotic Critical Values (10% 5% 1%)
Joint Statistic:     	 2.1 2.32 2.82
Individual Statistic:	 0.35 0.47 0.75

Sign Bias Test
------------------------------------
                   t-value     prob sig
Sign Bias           0.7081 0.478964    
Negative Sign Bias  2.7958 0.005236 ***
Positive Sign Bias  2.7352 0.006301 ***
Joint Effect       15.8663 0.001208 ***


Adjusted Pearson Goodness-of-Fit Test:
------------------------------------
  group statistic p-value(g-1)
1    20     53.65    3.733e-05
2    30     62.55    2.942e-04
3    40     67.52    3.081e-03
4    50     86.60    7.431e-04


Elapsed time : 4.712 

--
View this message in context: http://r.789695.n4.nabble.com/rugarch-and-fGarch-tp4633077.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Tue Jun 12 11:07:40 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Tue, 12 Jun 2012 10:07:40 +0100
Subject: [R-SIG-Finance] rugarch and fGarch
In-Reply-To: <1339487379101-4633077.post@n4.nabble.com>
References: <1339487379101-4633077.post@n4.nabble.com>
Message-ID: <4FD706DC.1090603@4dscape.com>

1. Please examples with reproducible data for such a detailed question. 
SPX.log.ret is not a commom data object found in any of the packages I 
know of.

2. How is the significance much lower? Looking at the Pr(>|t|) column 
they both look very significant across all parameters. The fact that the 
robust s.e. have NaN means that the robust hessian could not be 
calculated indicating that you need to tune the solver/use scaling (set 
'fit.control=list(scale=1)'). Looking at the results, this is likely 
because of the 'gamma' parameter hitting its upper limit.

3. This is a rolling out of sample forecast which means that  you are 
getting rolling estimates using 100 out of sample data points from the 
end of your dataset. As to the "expected" vol in 21 days ROLLING 1 day 
at a time, 'n.ahead=21', you need to pass this argument to the 
as.data.frame method or better still use:
'sigma=as.data.frame(volforecast, which = "sigma")'. This will be 
reverting to its long run mean. I really don't know what you expect as 
being reasonable or not.

-Alexios

On 12/06/2012 08:49, Belgarath wrote:
> Dear All,
>
> first of all thanks for the great package!
>
> I'm trying to get volatility forecasts. So I tried a couple of packages and
> I really like the roll functionality provided within the rugarch package but
> am finding inconsistencies with the results from two garch packages:
>
> 1)
> I run
>
> GA3=garchFit(formula=~arma(1,0)+aparch(1,1),data=SPX.log.ret,cond.dist="sstd")
>
> modeltofit=ugarchspec(variance.model = list(model = "apARCH", garchOrder =
> c(1, 1),
>    submodel = NULL, external.regressors = NULL, variance.targeting = FALSE),
>    mean.model = list(armaOrder = c(1, 0), include.mean = TRUE, archm = FALSE,
>    archpow = 1, arfima = FALSE, external.regressors = NULL, archex = FALSE),
>    distribution.model = "sstd", start.pars = list(), fixed.pars = list())
> GAA3=ugarchfit(spec=modeltofit,data=SPX.log.ret)
>
> As you can see from the results below the parameter coefficients are
> different but similar but the significance is much lower for rugarch. Do you
> know why?
>
> 2)
> I then run
>
> volforecast=ugarchroll(spec=modeltofit, data = last(SPX.log.ret,550),
> n.ahead = 42,
>                         forecast.length = 100, refit.every = 25)
> sigma=as.data.frame(volforecast)
> sigmat<- as.POSIXct(strptime(sigma[,1],format="%Y-%m-%d"))
> sigma2<- xts(sigma[,3],order.by=sigmat)*100*sqrt(252)
>
> And the results seems to me too low to represent the expected vol in 21
> days. Could you please point me in the right direction?
>
> Thank you!
>
>
>
> **********************
> RESULTS
> **********************
>
>
> fGarch----------------------
>> summary(GA3)
>
> Title:
>   GARCH Modelling
>
> Call:
>   garchFit(formula = ~arma(1, 0) + aparch(1, 1), data = SPX.log.ret,
>      cond.dist = "sstd")
>
> Mean and Variance Equation:
>   data ~ arma(1, 0) + aparch(1, 1)
> <environment: 0x000000000c09f038>
>   [data = SPX.log.ret]
>
> Conditional Distribution:
>   sstd
>
> Coefficient(s):
>           mu          ar1        omega       alpha1       gamma1        beta1
>   0.00025599  -0.06942414   0.00011829   0.08504516   0.99999999   0.91557956
>        delta         skew        shape
>   1.11700143   0.86337982   5.35586013
>
> Std. Errors:
>   based on Hessian
>
> Error Analysis:
>           Estimate  Std. Error  t value Pr(>|t|)
> mu      2.560e-04   2.023e-04    1.266 0.205659
> ar1    -6.942e-02   2.332e-02   -2.977 0.002907 **
> omega   1.183e-04   3.481e-05    3.399 0.000677 ***
> alpha1  8.505e-02   1.285e-02    6.616 3.69e-11 ***
> gamma1  1.000e+00   1.441e-02   69.414<  2e-16 ***
> beta1   9.156e-01   1.006e-02   91.041<  2e-16 ***
> delta   1.117e+00   1.962e-01    5.693 1.25e-08 ***
> skew    8.634e-01   2.755e-02   31.337<  2e-16 ***
> shape   5.356e+00   8.347e-01    6.416 1.40e-10 ***
> ---
> Signif. codes:  0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1
>
> Log Likelihood:
>   5271.315    normalized:  3.1433
>
> Description:
>   Tue Jun 12 09:02:05 2012 by user: cora
>
>
> Standardised Residuals Tests:
>                                  Statistic p-Value
>   Jarque-Bera Test   R    Chi^2  2459.58   0
>   Shapiro-Wilk Test  R    W      0.9528365 0
>   Ljung-Box Test     R    Q(10)  11.72432  0.3039307
>   Ljung-Box Test     R    Q(15)  15.45374  0.4192542
>   Ljung-Box Test     R    Q(20)  21.50983  0.3676896
>   Ljung-Box Test     R^2  Q(10)  90.12559  5.107026e-15
>   Ljung-Box Test     R^2  Q(15)  91.15075  6.047385e-13
>   Ljung-Box Test     R^2  Q(20)  91.74618  3.664247e-11
>   LM Arch Test       R    TR^2   26.18211  0.01011463
>
> Information Criterion Statistics:
>        AIC       BIC       SIC      HQIC
> -6.275867 -6.246754 -6.275924 -6.265082
>
> ******************************+
> ******************************
>
>
> rugarch--------------------
>> show(GAA3)
>
> *---------------------------------*
> *          GARCH Model Fit        *
> *---------------------------------*
>
> Conditional Variance Dynamics 	
> -----------------------------------
> GARCH Model	: apARCH(1,1)
> Mean Model	: ARFIMA(1,0,0)
> Distribution	: sstd
>
> Optimal Parameters
> ------------------------------------
>          Estimate  Std. Error     t value Pr(>|t|)
> mu      0.000237    0.000190  1.2474e+00 0.212265
> ar1    -0.069601    0.024100 -2.8881e+00 0.003876
> omega   0.000175    0.000148  1.1823e+00 0.237092
> alpha1  0.084114    0.011113  7.5687e+00 0.000000
> beta1   0.920963    0.009835  9.3640e+01 0.000000
> gamma1  1.000000    0.000000  2.6926e+06 0.000000
> delta   1.025983    0.159330  6.4393e+00 0.000000
> skew    0.860581    0.027580  3.1203e+01 0.000000
> shape   5.561683    0.875725  6.3509e+00 0.000000
>
> Robust Standard Errors:
>          Estimate  Std. Error  t value Pr(>|t|)
> mu      0.000237         NaN      NaN      NaN
> ar1    -0.069601         NaN      NaN      NaN
> omega   0.000175         NaN      NaN      NaN
> alpha1  0.084114         NaN      NaN      NaN
> beta1   0.920963         NaN      NaN      NaN
> gamma1  1.000000         NaN      NaN      NaN
> delta   1.025983         NaN      NaN      NaN
> skew    0.860581         NaN      NaN      NaN
> shape   5.561683         NaN      NaN      NaN
>
> LogLikelihood : 5291.85
>
> Information Criteria
> ------------------------------------
>
> Akaike       -6.3004
> Bayes        -6.2712
> Shibata      -6.3004
> Hannan-Quinn -6.2896
>
> Q-Statistics on Standardized Residuals
> ------------------------------------
>        statistic p-value
> Lag10     8.594  0.4756
> Lag15    13.965  0.4523
> Lag20    20.967  0.3386
>
> H0 : No serial correlation
>
> Q-Statistics on Standardized Squared Residuals
> ------------------------------------
>        statistic   p-value
> Lag10     28.13 0.0009072
> Lag15     31.84 0.0042245
> Lag20     35.40 0.0124798
>
> ARCH LM Tests
> ------------------------------------
>               Statistic DoF  P-Value
> ARCH Lag[2]      12.84   2 0.001630
> ARCH Lag[5]      14.26   5 0.014050
> ARCH Lag[10]     28.19  10 0.001683
>
> Nyblom stability test
> ------------------------------------
> Joint Statistic:  NA
> Individual Statistics:
> mu     0.90793
> ar1    0.11145
> omega  0.91076
> alpha1 0.53714
> beta1  0.60241
> gamma1      NA
> delta  0.84958
> skew   0.06079
> shape  0.50963
>
> Asymptotic Critical Values (10% 5% 1%)
> Joint Statistic:     	 2.1 2.32 2.82
> Individual Statistic:	 0.35 0.47 0.75
>
> Sign Bias Test
> ------------------------------------
>                     t-value     prob sig
> Sign Bias           0.7081 0.478964
> Negative Sign Bias  2.7958 0.005236 ***
> Positive Sign Bias  2.7352 0.006301 ***
> Joint Effect       15.8663 0.001208 ***
>
>
> Adjusted Pearson Goodness-of-Fit Test:
> ------------------------------------
>    group statistic p-value(g-1)
> 1    20     53.65    3.733e-05
> 2    30     62.55    2.942e-04
> 3    40     67.52    3.081e-03
> 4    50     86.60    7.431e-04
>
>
> Elapsed time : 4.712
>
> --
> View this message in context: http://r.789695.n4.nabble.com/rugarch-and-fGarch-tp4633077.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From enricoschumann at yahoo.de  Tue Jun 12 11:26:33 2012
From: enricoschumann at yahoo.de (Enrico Schumann)
Date: Tue, 12 Jun 2012 11:26:33 +0200
Subject: [R-SIG-Finance] Automatically sending .Rmd -> html files
In-Reply-To: <4FD5985E.2000503@qtradr.net>
References: <4FD5985E.2000503@qtradr.net>
Message-ID: <4FD70B49.8080005@yahoo.de>


Hi,

>
> With all the buzz around R Markdown, has anyone yet experimented with
> getting  R Markdown files to automatically run, convert to html as usual
> and then attach / run in-line on an email and send it?

I wasn't aware of any buzz :-) But seriously, as you mentioned yourself, 
this is not really a finance question. So you may get better answers on 
R-help.

I don't use Markdown; but still, some thoughts/pointers:

(1) To borrow Perl's slogan, there is more than one way to do it. And 
this is definitely the rule here: just find some setup that works for 
you. In the end, you will anyway collect all pieces in a script, ie, a 
batch file on Windows. The Task Scheduler accepts such batch files. (If 
you want complete automation, you will also want to think about 
error-handling: "Hm, you want me to send this file, but it is more than 
24h old.")

I wouldn't expect to do everything in R; there are many 
incredibly-useful tools that can be run from the command line, even on 
Windows (as an example, I use Sweave to automatically create tex-files; 
tex-files could be transformed into HTML via tools like Pandoc).

You may also want to have a look at the CRAN Task View for Reproducible 
Research.

(2) You will run R non-interactively, so have a look at the 
documentation of RScript and R CMD BATCH.

(3) You can send e-mails from the command line on Windows with 
programmes like Blat ( http://www.blat.net/ ). This may also allow you 
to send HTML mails, but I wouldn't know: I only send and read plain-text 
mails, ie, the format that this mailing list expects.


Regards,
Enrico

>
> I think I can put this together with a cron job, but i'd be interested
> in thoughts on running this via task Scheduler on Win 7; so far I've not
> found a way of getting Task Scheduler to associate .Rmd files with R.
>
> Ideally, what I'm trying to achieve is, at a given time of day (say 6am):
>
>    * Launch R
>    * Run `xyz.Rmd`
>    * Take the standard output (`xyz.html') and use in the body of an
>      email (or, at least, have an attachment of the html)
>    * Send the email
>
> Any thoughts very much appreciated. I know this isn't strictly finance,
> but I can imagine the finance community probably has the most amount of
> use for something like this on a daily basis (emailing automated
> analysis to yourself / desk etc)
>
> n.
>

-- 
Enrico Schumann
Lucerne, Switzerland
http://nmof.net


From marco.cora at googlemail.com  Wed Jun 13 15:13:16 2012
From: marco.cora at googlemail.com (Belgarath)
Date: Wed, 13 Jun 2012 06:13:16 -0700 (PDT)
Subject: [R-SIG-Finance] rugarch and fGarch
In-Reply-To: <4FD706DC.1090603@4dscape.com>
References: <1339487379101-4633077.post@n4.nabble.com>
	<4FD706DC.1090603@4dscape.com>
Message-ID: <1339593196552-4633253.post@n4.nabble.com>

Hello Alexios, 

thank you for the quick reply! Apologies but yesterday yahoo finance was not
working so could not follow up with an appropriate reproducible example:

1)
----
getSymbols("^GSPC", src="yahoo")
SPY.log.ret=ClCl(GSPC)
GA3=garchFit(formula=~arma(1,0)+aparch(1,1),data=last(SPY.log.ret,1371),cond.dist="sstd")
summary(GA3)
modeltofit=ugarchspec(variance.model = list(model = "apARCH", garchOrder =
c(1, 1), 
                    submodel = NULL, external.regressors = NULL,
variance.targeting = FALSE),
                    mean.model = list(armaOrder = c(1, 0), include.mean =
TRUE, archm = FALSE, 
                    archpow = 1, arfima = FALSE, external.regressors = NULL,
archex = FALSE), 
                    distribution.model = "sstd", start.pars = list(),
fixed.pars = list())

GAA3=ugarchfit(spec=modeltofit,data=last(SPY.log.ret,1371))
show(GAA3)
volforecast=ugarchroll(spec=modeltofit,data=last(SPY.log.ret,1371), n.ahead
= 21, 
                       forecast.length = 420, refit.every = 21)
sigma=as.data.frame(volforecast,which="density",n.ahead=21)
sigmat <- as.POSIXct(strptime(sigma[,1],format="%Y-%m-%d"))
sigma2 <- xts(sigma[,3],order.by=sigmat)*100*sqrt(252)
plot(sigma2)
---

Detailed results are below, but to reply to your points:
2) rugarch omega   is 0.000618    t:1.5062e+00 p:0.132023 while fGarch omega
is 3.922e-04   t:3.970  p:7.19e-05 which is more significant.

3) Is the code above usage correct to extract the forecasts? I tried to use
the sigma=as.data.frame(volforecast, which = "sigma") but it only return the
first 21 forecasts. How do I extract the long term mean of the st dev?

4) I have one more question: the dates in the
sigma=as.data.frame(volforecast,which="density",n.ahead=21) are alligned
with the date the forecast refers to no the date the forcast is made (ie. it
will be delayed by 21 days in a chart) correct?

Thank you again for the help and the package!
Marco



*****************
> show(GAA3)

*---------------------------------*
*          GARCH Model Fit        *
*---------------------------------*

Conditional Variance Dynamics 	
-----------------------------------
GARCH Model	: apARCH(1,1)
Mean Model	: ARFIMA(1,0,0)
Distribution	: sstd 

Optimal Parameters
------------------------------------
        Estimate  Std. Error     t value Pr(>|t|)
mu      0.000197    0.000007  2.7154e+01 0.000000
ar1    -0.086149    0.000122 -7.0664e+02 0.000000
omega   0.000618    0.000411  1.5062e+00 0.132023
alpha1  0.090424    0.010405  8.6908e+00 0.000000
beta1   0.916128    0.010687  8.5724e+01 0.000000
gamma1  1.000000    0.000000  2.5738e+06 0.000000
delta   0.844145    0.130924  6.4476e+00 0.000000
skew    0.833679    0.028852  2.8895e+01 0.000000
shape   7.325115    1.542399  4.7492e+00 0.000002

Robust Standard Errors:
        Estimate  Std. Error  t value Pr(>|t|)
mu      0.000197         NaN      NaN      NaN
ar1    -0.086149         NaN      NaN      NaN
omega   0.000618         NaN      NaN      NaN
alpha1  0.090424         NaN      NaN      NaN
beta1   0.916128         NaN      NaN      NaN
gamma1  1.000000         NaN      NaN      NaN
delta   0.844145         NaN      NaN      NaN
skew    0.833679         NaN      NaN      NaN
shape   7.325115         NaN      NaN      NaN

LogLikelihood : 4133.434 

Information Criteria
------------------------------------
                    
Akaike       -6.0167
Bayes        -5.9824
Shibata      -6.0168
Hannan-Quinn -6.0038

Q-Statistics on Standardized Residuals
------------------------------------
      statistic p-value
Lag10     11.45  0.2459
Lag15     16.60  0.2780
Lag20     18.74  0.4737

H0 : No serial correlation

Q-Statistics on Standardized Squared Residuals
------------------------------------
      statistic   p-value
Lag10     29.72 0.0004892
Lag15     33.15 0.0027369
Lag20     36.37 0.0094979

ARCH LM Tests
------------------------------------
             Statistic DoF   P-Value
ARCH Lag[2]      15.81   2 0.0003695
ARCH Lag[5]      16.98   5 0.0045286
ARCH Lag[10]     30.99  10 0.0005890

Nyblom stability test
------------------------------------
Joint Statistic:  NA
Individual Statistics:             
mu     0.2380
ar1    0.2163
omega  0.1923
alpha1 0.1939
beta1  0.2190
gamma1     NA
delta  0.2084
skew   0.1054
shape  0.2543

Asymptotic Critical Values (10% 5% 1%)
Joint Statistic:     	 2.1 2.32 2.82
Individual Statistic:	 0.35 0.47 0.75

Sign Bias Test
------------------------------------
                   t-value     prob sig
Sign Bias           0.3575 0.720737    
Negative Sign Bias  2.5732 0.010180  **
Positive Sign Bias  2.7813 0.005489 ***
Joint Effect       14.4861 0.002313 ***


Adjusted Pearson Goodness-of-Fit Test:
------------------------------------
  group statistic p-value(g-1)
1    20     30.47     0.046075
2    30     40.31     0.078949
3    40     54.67     0.049050
4    50     74.99     0.009861


Elapsed time : 5.466 

> summary(GA3)

Title:
 GARCH Modelling 

Call:
 garchFit(formula = ~arma(1, 0) + aparch(1, 1), data = last(SPY.log.ret, 
    1371), cond.dist = "sstd") 

Mean and Variance Equation:
 data ~ arma(1, 0) + aparch(1, 1)
<environment: 0x000000000e8e8e68>
 [data = last(SPY.log.ret, 1371)]

Conditional Distribution:
 sstd 

Coefficient(s):
         mu          ar1        omega       alpha1       gamma1        beta1  
 0.00022015  -0.08726888   0.00039220   0.09300673   0.99999999   0.90917036  
      delta         skew        shape  
 0.95108469   0.83598044   7.13436954  

Std. Errors:
 based on Hessian 

Error Analysis:
         Estimate  Std. Error  t value Pr(>|t|)    
mu      2.202e-04   2.702e-04    0.815 0.415301    
ar1    -8.727e-02   2.557e-02   -3.413 0.000643 ***
omega   3.922e-04   9.879e-05    3.970 7.19e-05 ***
alpha1  9.301e-02   1.157e-02    8.035 8.88e-16 ***
gamma1  1.000e+00   1.085e-02   92.183  < 2e-16 ***
beta1   9.092e-01   1.112e-02   81.759  < 2e-16 ***
delta   9.511e-01   1.667e-01    5.705 1.16e-08 ***
skew    8.360e-01   3.064e-02   27.284  < 2e-16 ***
shape   7.134e+00   1.543e+00    4.625 3.75e-06 ***
---
Signif. codes:  0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1 

Log Likelihood:
 4131.182    normalized:  3.013262 

Description:
 Wed Jun 13 14:57:49 2012 by user: cora 


Standardised Residuals Tests:
                                Statistic p-Value    
 Jarque-Bera Test   R    Chi^2  1584.761  0          
 Shapiro-Wilk Test  R    W      0.9597795 0          
 Ljung-Box Test     R    Q(10)  12.32339  0.2639963  
 Ljung-Box Test     R    Q(15)  16.8469   0.3280988  
 Ljung-Box Test     R    Q(20)  18.48151  0.5557211  
 Ljung-Box Test     R^2  Q(10)  9.478356  0.4873852  
 Ljung-Box Test     R^2  Q(15)  12.33782  0.6532996  
 Ljung-Box Test     R^2  Q(20)  13.34997  0.8618686  
 LM Arch Test       R    TR^2   29.52316  0.003292551

Information Criterion Statistics:
      AIC       BIC       SIC      HQIC 
-6.013395 -5.979106 -6.013480 -6.000563



--
View this message in context: http://r.789695.n4.nabble.com/rugarch-and-fGarch-tp4633077p4633253.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Wed Jun 13 21:41:34 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Wed, 13 Jun 2012 20:41:34 +0100
Subject: [R-SIG-Finance] rugarch and fGarch
In-Reply-To: <1339593196552-4633253.post@n4.nabble.com>
References: <1339487379101-4633077.post@n4.nabble.com>
	<4FD706DC.1090603@4dscape.com>
	<1339593196552-4633253.post@n4.nabble.com>
Message-ID: <4FD8ECEE.2020204@4dscape.com>

Marco,

1. Use:
GAA3=ugarchfit(spec=modeltofit,data=last(SPY.log.ret,1371), 
fit.control=list(scale=1))
This should get a better result so that the evaluation of the robust
estimates does not fail.

2. Likelihoods are very close but omega and their s.e. is somewhat 
different.

To better compare the results use the coefficients from the 2 fits in 
rugarch:

spec1 = modeltofit
setfixed(spec1)<-as.list(coef(GA3))
spec2 = modeltofit
setfixed(spec2)<-as.list(coef(GAA3))

fit1 = ugarchfit(spec1, last(SPY.log.ret,1371), 
fit.control=list(fixed.se=1))

fit2 = ugarchfit(spec2, last(SPY.log.ret,1371), 
fit.control=list(fixed.se=1))


round(cbind(coef(fit1), coef(fit2)),4)
          fGarch rugarch
mu      0.0002  0.0002
ar1    -0.0873 -0.0861
omega   0.0004  0.0006
alpha1  0.0930  0.0904
beta1   0.9092  0.9161
gamma1  1.0000  1.0000
delta   0.9511  0.8431
skew    0.8360  0.8337
shape   7.1344  7.3343

Look at their long run sigma:
sqrt(uncvariance(fit1))
0.01391264

sqrt(uncvariance(fit2))
0.01378647

As i said in the earlier email, differences are likely related to the 
gamma parameter hitting its limit, but will investigate some alternate
strategies for the omega coefficient scaling when time permits.

3. I don't really understand what you want to do. If you just want the 
long run unconditional forecast then extract the coefficients from each fit:

cf = as.data.frame(volforecast, which = "coefmat", refit=2)
cfnames = rownames(cf)
cf = cf[,1]
names(cf)=cfnames
spec = modeltofit
setfixed(spec)<-as.list(cf)
uncvariance(spec)



sigma=as.data.frame(volforecast,which="sigma")

Is correct. It returns a n.ahead x n.roll matrix.
For the time being, it only support n.ahead<=refit.every.

If you want to create long run custom type forecasts just wrap your own 
ugarchfit+ugarchforecast function (after all that is all that ugarchroll 
does). Read the documentation on the proper use of the "out.sample" option.

4. NO. The forecast date shown is the ACTUAL future forecast date (since 
this is an out.of sample rolling forecast for which dates exists). In 
the ugarchforecast method, when there are no out.sample dates to draw 
from, the program generates actual future forecast dates (not taking 
into account holidays etc).

-Alexios


On 13/06/2012 14:13, Belgarath wrote:
> Hello Alexios,
>
> thank you for the quick reply! Apologies but yesterday yahoo finance was not
> working so could not follow up with an appropriate reproducible example:
>
> 1)
> ----
> getSymbols("^GSPC", src="yahoo")
> SPY.log.ret=ClCl(GSPC)
> GA3=garchFit(formula=~arma(1,0)+aparch(1,1),data=last(SPY.log.ret,1371),cond.dist="sstd")
> summary(GA3)
> modeltofit=ugarchspec(variance.model = list(model = "apARCH", garchOrder =
> c(1, 1),
>                      submodel = NULL, external.regressors = NULL,
> variance.targeting = FALSE),
>                      mean.model = list(armaOrder = c(1, 0), include.mean =
> TRUE, archm = FALSE,
>                      archpow = 1, arfima = FALSE, external.regressors = NULL,
> archex = FALSE),
>                      distribution.model = "sstd", start.pars = list(),
> fixed.pars = list())
>
> GAA3=ugarchfit(spec=modeltofit,data=last(SPY.log.ret,1371))
> show(GAA3)
> volforecast=ugarchroll(spec=modeltofit,data=last(SPY.log.ret,1371), n.ahead
> = 21,
>                         forecast.length = 420, refit.every = 21)
> sigma=as.data.frame(volforecast,which="density",n.ahead=21)
> sigmat <- as.POSIXct(strptime(sigma[,1],format="%Y-%m-%d"))
> sigma2 <- xts(sigma[,3],order.by=sigmat)*100*sqrt(252)
> plot(sigma2)
> ---
>
> Detailed results are below, but to reply to your points:
> 2) rugarch omega   is 0.000618    t:1.5062e+00 p:0.132023 while fGarch omega
> is 3.922e-04   t:3.970  p:7.19e-05 which is more significant.
>
> 3) Is the code above usage correct to extract the forecasts? I tried to use
> the sigma=as.data.frame(volforecast, which = "sigma") but it only return the
> first 21 forecasts. How do I extract the long term mean of the st dev?
>
> 4) I have one more question: the dates in the
> sigma=as.data.frame(volforecast,which="density",n.ahead=21) are alligned
> with the date the forecast refers to no the date the forcast is made (ie. it
> will be delayed by 21 days in a chart) correct?
>
> Thank you again for the help and the package!
> Marco
>
>
>
> *****************
>> show(GAA3)
>
> *---------------------------------*
> *          GARCH Model Fit        *
> *---------------------------------*
>
> Conditional Variance Dynamics 	
> -----------------------------------
> GARCH Model	: apARCH(1,1)
> Mean Model	: ARFIMA(1,0,0)
> Distribution	: sstd
>
> Optimal Parameters
> ------------------------------------
>          Estimate  Std. Error     t value Pr(>|t|)
> mu      0.000197    0.000007  2.7154e+01 0.000000
> ar1    -0.086149    0.000122 -7.0664e+02 0.000000
> omega   0.000618    0.000411  1.5062e+00 0.132023
> alpha1  0.090424    0.010405  8.6908e+00 0.000000
> beta1   0.916128    0.010687  8.5724e+01 0.000000
> gamma1  1.000000    0.000000  2.5738e+06 0.000000
> delta   0.844145    0.130924  6.4476e+00 0.000000
> skew    0.833679    0.028852  2.8895e+01 0.000000
> shape   7.325115    1.542399  4.7492e+00 0.000002
>
> Robust Standard Errors:
>          Estimate  Std. Error  t value Pr(>|t|)
> mu      0.000197         NaN      NaN      NaN
> ar1    -0.086149         NaN      NaN      NaN
> omega   0.000618         NaN      NaN      NaN
> alpha1  0.090424         NaN      NaN      NaN
> beta1   0.916128         NaN      NaN      NaN
> gamma1  1.000000         NaN      NaN      NaN
> delta   0.844145         NaN      NaN      NaN
> skew    0.833679         NaN      NaN      NaN
> shape   7.325115         NaN      NaN      NaN
>
> LogLikelihood : 4133.434
>
> Information Criteria
> ------------------------------------
>
> Akaike       -6.0167
> Bayes        -5.9824
> Shibata      -6.0168
> Hannan-Quinn -6.0038
>
> Q-Statistics on Standardized Residuals
> ------------------------------------
>        statistic p-value
> Lag10     11.45  0.2459
> Lag15     16.60  0.2780
> Lag20     18.74  0.4737
>
> H0 : No serial correlation
>
> Q-Statistics on Standardized Squared Residuals
> ------------------------------------
>        statistic   p-value
> Lag10     29.72 0.0004892
> Lag15     33.15 0.0027369
> Lag20     36.37 0.0094979
>
> ARCH LM Tests
> ------------------------------------
>               Statistic DoF   P-Value
> ARCH Lag[2]      15.81   2 0.0003695
> ARCH Lag[5]      16.98   5 0.0045286
> ARCH Lag[10]     30.99  10 0.0005890
>
> Nyblom stability test
> ------------------------------------
> Joint Statistic:  NA
> Individual Statistics:
> mu     0.2380
> ar1    0.2163
> omega  0.1923
> alpha1 0.1939
> beta1  0.2190
> gamma1     NA
> delta  0.2084
> skew   0.1054
> shape  0.2543
>
> Asymptotic Critical Values (10% 5% 1%)
> Joint Statistic:     	 2.1 2.32 2.82
> Individual Statistic:	 0.35 0.47 0.75
>
> Sign Bias Test
> ------------------------------------
>                     t-value     prob sig
> Sign Bias           0.3575 0.720737
> Negative Sign Bias  2.5732 0.010180  **
> Positive Sign Bias  2.7813 0.005489 ***
> Joint Effect       14.4861 0.002313 ***
>
>
> Adjusted Pearson Goodness-of-Fit Test:
> ------------------------------------
>    group statistic p-value(g-1)
> 1    20     30.47     0.046075
> 2    30     40.31     0.078949
> 3    40     54.67     0.049050
> 4    50     74.99     0.009861
>
>
> Elapsed time : 5.466
>
>> summary(GA3)
>
> Title:
>   GARCH Modelling
>
> Call:
>   garchFit(formula = ~arma(1, 0) + aparch(1, 1), data = last(SPY.log.ret,
>      1371), cond.dist = "sstd")
>
> Mean and Variance Equation:
>   data ~ arma(1, 0) + aparch(1, 1)
> <environment: 0x000000000e8e8e68>
>   [data = last(SPY.log.ret, 1371)]
>
> Conditional Distribution:
>   sstd
>
> Coefficient(s):
>           mu          ar1        omega       alpha1       gamma1        beta1
>   0.00022015  -0.08726888   0.00039220   0.09300673   0.99999999   0.90917036
>        delta         skew        shape
>   0.95108469   0.83598044   7.13436954
>
> Std. Errors:
>   based on Hessian
>
> Error Analysis:
>           Estimate  Std. Error  t value Pr(>|t|)
> mu      2.202e-04   2.702e-04    0.815 0.415301
> ar1    -8.727e-02   2.557e-02   -3.413 0.000643 ***
> omega   3.922e-04   9.879e-05    3.970 7.19e-05 ***
> alpha1  9.301e-02   1.157e-02    8.035 8.88e-16 ***
> gamma1  1.000e+00   1.085e-02   92.183  < 2e-16 ***
> beta1   9.092e-01   1.112e-02   81.759  < 2e-16 ***
> delta   9.511e-01   1.667e-01    5.705 1.16e-08 ***
> skew    8.360e-01   3.064e-02   27.284  < 2e-16 ***
> shape   7.134e+00   1.543e+00    4.625 3.75e-06 ***
> ---
> Signif. codes:  0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1
>
> Log Likelihood:
>   4131.182    normalized:  3.013262
>
> Description:
>   Wed Jun 13 14:57:49 2012 by user: cora
>
>
> Standardised Residuals Tests:
>                                  Statistic p-Value
>   Jarque-Bera Test   R    Chi^2  1584.761  0
>   Shapiro-Wilk Test  R    W      0.9597795 0
>   Ljung-Box Test     R    Q(10)  12.32339  0.2639963
>   Ljung-Box Test     R    Q(15)  16.8469   0.3280988
>   Ljung-Box Test     R    Q(20)  18.48151  0.5557211
>   Ljung-Box Test     R^2  Q(10)  9.478356  0.4873852
>   Ljung-Box Test     R^2  Q(15)  12.33782  0.6532996
>   Ljung-Box Test     R^2  Q(20)  13.34997  0.8618686
>   LM Arch Test       R    TR^2   29.52316  0.003292551
>
> Information Criterion Statistics:
>        AIC       BIC       SIC      HQIC
> -6.013395 -5.979106 -6.013480 -6.000563
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/rugarch-and-fGarch-tp4633077p4633253.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From marco.cora at googlemail.com  Thu Jun 14 14:23:26 2012
From: marco.cora at googlemail.com (Belgarath)
Date: Thu, 14 Jun 2012 05:23:26 -0700 (PDT)
Subject: [R-SIG-Finance] rugarch and fGarch
In-Reply-To: <4FD8ECEE.2020204@4dscape.com>
References: <1339487379101-4633077.post@n4.nabble.com>
	<4FD706DC.1090603@4dscape.com>
	<1339593196552-4633253.post@n4.nabble.com>
	<4FD8ECEE.2020204@4dscape.com>
Message-ID: <1339676606136-4633368.post@n4.nabble.com>

Hello Alexios, 

thank you very much! 

With the fit.control=list(scale=1) is also much faster. 

I also added the multi-core support, is there any other way to improve the
performance?

Thank you very much!
Marco

--
View this message in context: http://r.789695.n4.nabble.com/rugarch-and-fGarch-tp4633077p4633368.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Thu Jun 14 15:06:43 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Thu, 14 Jun 2012 14:06:43 +0100
Subject: [R-SIG-Finance] rugarch and fGarch
In-Reply-To: <1339676606136-4633368.post@n4.nabble.com>
References: <1339487379101-4633077.post@n4.nabble.com>
	<4FD706DC.1090603@4dscape.com>
	<1339593196552-4633253.post@n4.nabble.com>
	<4FD8ECEE.2020204@4dscape.com>
	<1339676606136-4633368.post@n4.nabble.com>
Message-ID: <4FD9E1E3.7040805@4dscape.com>

Marco,

All models (more precisely their filters which are used in the 
estimation process) in the rugarch package are already coded in C for speed.
The "apARCH" is an omnibus model and as such carries a penalty for such 
flexibility, as does the use of the 'sstd' distribution.
There is also a small penalty for the 1-stage estimation of 
ARFIMA-GARCH, rather than the marginally faster 2 stage estimation which 
I do not make use of in the package (but you can control for that by 
passing an arima filtered residual series using an appropriate 
specification and reconstituting later with fixed parameters in the spec 
for doing forecasting).
For the rolling estimation, you can make use of the parallel option to 
evaluate in parallel the rolling estimations/forecasts. See the FAQ 
section of the vignette for some comments on the tradeoff between the 
number of cores to use versus the size of the problem for the snowfall 
package. I have personally found that running things on linux with the 
multicore package is quite faster, but that may be because I do not have 
any optimized setup for windows R.

-Alexios

On 14/06/2012 13:23, Belgarath wrote:
> Hello Alexios,
>
> thank you very much!
>
> With the fit.control=list(scale=1) is also much faster.
>
> I also added the multi-core support, is there any other way to improve the
> performance?
>
> Thank you very much!
> Marco
>
> --
> View this message in context: http://r.789695.n4.nabble.com/rugarch-and-fGarch-tp4633077p4633368.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From shivamsingh at gmail.com  Thu Jun 14 15:55:38 2012
From: shivamsingh at gmail.com (Shivam)
Date: Thu, 14 Jun 2012 19:25:38 +0530
Subject: [R-SIG-Finance] [R-SIG-FINANCE] Query about Two Scale Realized
	Volatility (TSRV)
Message-ID: <CAGaLYZrU8qJ6v6LdiX7OC0mOyh9KLROLBPY9JBr_=pQq_YAz0g@mail.gmail.com>

Hi All,

I have a basic query about TSRV and was hoping you all can shed some
light on the issue.

I have 22500 records for each day. So if I take the slow frequency as
5 mins I can have 75 subgrids. An estimate of the 5-minute realized
volatility can be obtained by selecting the first observation from
each of the 75 five-minute periods (each containing 300 observations).
Another estimate can be made by selecting the second price observation
from each of the 75 sets. Similarly, 298 additional estimates can be
obtained from the remaining data. Thus, 300 estimates of realized
volatility can be obtained for a 5-minute sampling interval. The
average of these 300 estimates is the low frequency volatility.

If P1,P2,...P301,P302,...P22500 are the prices at each timestamp, then
we are effectively doing the below (using simple returns for
illustration only):

(P301/P1)^2 + (P601/P301)^2 + (P901/P601)^2 + .... + (P22201/P21901)^2  = V1

(P302/P2)^2 + (P602/P302)^2 + (P902/P602)^2 + .... + (P22202/P21902)^2 = V2

(P303/P3)^2 + (P603/P303)^2 + (P903/P603)^2 + .... + (P22203/P21903)^2 = V3
....
....
....
(P600/P300)^2 + (P900/P600)^2 + (P1200/P900)^2 + .... + (P22500/P22200)^2 = V300

Then we average the Vi's (V1+V2+....+V300)/300. This gives us the 5
min realized volatility.

Please correct me if I've made a mistake somewhere. As I think this
was the approach suggested by Zhang et al in their paper.

What my question is, is the intermediate step of calculating V1,V2....
etc necessary? Cant we simply calculate returns at a lag of 300 for
the entire day and then divide it by 300 to achieve the same result.
What am I missing here? Can anyone point out please.

Thanks and regards,
Shivam


-- 
*Victoria Concordia Crescit*


From marco.cora at googlemail.com  Thu Jun 14 16:35:23 2012
From: marco.cora at googlemail.com (Belgarath)
Date: Thu, 14 Jun 2012 07:35:23 -0700 (PDT)
Subject: [R-SIG-Finance] create a new variable in a loop - Rbbg, RBloomberg
Message-ID: <1339684523878-4633384.post@n4.nabble.com>

Hello Everyone, 

I have the following code:

-----
securities <- c("SPGLOB", "SPX Index", "SPE Index", "SPTPX Index",
            "SPTSX60 Index", "AS31 Index", "SPA50 Index", "SPLAC Index")
fields <- c("PX_OPEN", "PX_HIGH", "PX_LOW", "PX_LAST", "PX_VOLUME")
startdate <- as.Date("2005-11-16")
enddate <- as.Date(Sys.Date())
BBGData <- bdh(conn, paste(securities[1],"Index",sep=" "), 
               fields, startdate, enddate,
               option_names = c("nonTradingDayFillOption",
"nonTradingDayFillMethod"), 
               option_values = c("NON_TRADING_WEEKDAYS", "PREVIOUS_VALUE"))
BBGData$date=NULL
BBGData2 <- as.xts(BBGData, order.by =as.Date(rownames(BBGData)))

----

I would like to assign BBGData2 to a new variable with the name as
securities[1] in order to be able to package it in a loop and download all
the info for all the securities and create new variables for each. 

More generally how do I create new r variables in a Loop, sort of:

name(securities[1]) <- BBGData2

Alternatively how do I change a variable name, how to change the name of
BBGData2 into SPGLOB for instance; at the next run of the loop the BBGData2
would be recreated anyway.

Thank you.
Regards,
Marco



--
View this message in context: http://r.789695.n4.nabble.com/create-a-new-variable-in-a-loop-Rbbg-RBloomberg-tp4633384.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From john.laing at gmail.com  Thu Jun 14 19:09:34 2012
From: john.laing at gmail.com (John Laing)
Date: Thu, 14 Jun 2012 13:09:34 -0400
Subject: [R-SIG-Finance] create a new variable in a loop - Rbbg,
	RBloomberg
In-Reply-To: <1339684523878-4633384.post@n4.nabble.com>
References: <1339684523878-4633384.post@n4.nabble.com>
Message-ID: <CAA3Wa=svh2_i9H1EMDrFZex6Ea7SS87G-3Yn44HdNXTY+1S8Nw@mail.gmail.com>

Marco,

I would recommend against this approach of creating and renaming many
environment variables in a loop. Some packages (e.g.
quantmod::getSymbols) do exactly that, but I prefer to use a list.
This feels more consistent with the R idiom of applying a function to
a vector:

securities <- c("SPGLOB Index", "SPX Index", "SPE Index", "SPTPX
Index", "SPTSX60 Index", "AS31 Index", "SPA50 Index", "SPLAC Index")
fields <- c("PX_OPEN", "PX_HIGH", "PX_LOW", "PX_LAST", "PX_VOLUME")
startdate <- as.Date("2005-11-16")
enddate <- as.Date(Sys.Date())

bbg2xts <- function(security, ...) {
    bbg <- bdh(conn, security, ...)
    bbg$date <- NULL
    as.xts(bbg, order.by = as.Date(rownames(bbg)))
}

BBGData <- lapply(securities, bbg2xts, fields, startdate, enddate,
    option_names = c("nonTradingDayFillOption", "nonTradingDayFillMethod"),
    option_values = c("NON_TRADING_WEEKDAYS", "PREVIOUS_VALUE"))
names(BBGData) <- securities

You get back is a list of XTS objects, with elements named appropriately.

-John

On Thu, Jun 14, 2012 at 10:35 AM, Belgarath <marco.cora at googlemail.com> wrote:
> Hello Everyone,
>
> I have the following code:
>
> -----
> securities <- c("SPGLOB", "SPX Index", "SPE Index", "SPTPX Index",
> ? ? ? ? ? ?"SPTSX60 Index", "AS31 Index", "SPA50 Index", "SPLAC Index")
> fields <- c("PX_OPEN", "PX_HIGH", "PX_LOW", "PX_LAST", "PX_VOLUME")
> startdate <- as.Date("2005-11-16")
> enddate <- as.Date(Sys.Date())
> BBGData <- bdh(conn, paste(securities[1],"Index",sep=" "),
> ? ? ? ? ? ? ? fields, startdate, enddate,
> ? ? ? ? ? ? ? option_names = c("nonTradingDayFillOption",
> "nonTradingDayFillMethod"),
> ? ? ? ? ? ? ? option_values = c("NON_TRADING_WEEKDAYS", "PREVIOUS_VALUE"))
> BBGData$date=NULL
> BBGData2 <- as.xts(BBGData, order.by =as.Date(rownames(BBGData)))
>
> ----
>
> I would like to assign BBGData2 to a new variable with the name as
> securities[1] in order to be able to package it in a loop and download all
> the info for all the securities and create new variables for each.
>
> More generally how do I create new r variables in a Loop, sort of:
>
> name(securities[1]) <- BBGData2
>
> Alternatively how do I change a variable name, how to change the name of
> BBGData2 into SPGLOB for instance; at the next run of the loop the BBGData2
> would be recreated anyway.
>
> Thank you.
> Regards,
> Marco
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/create-a-new-variable-in-a-loop-Rbbg-RBloomberg-tp4633384.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From marco.cora at googlemail.com  Thu Jun 14 20:07:55 2012
From: marco.cora at googlemail.com (Belgarath)
Date: Thu, 14 Jun 2012 11:07:55 -0700 (PDT)
Subject: [R-SIG-Finance] rugarch and fGarch
In-Reply-To: <4FD9E1E3.7040805@4dscape.com>
References: <1339487379101-4633077.post@n4.nabble.com>
	<4FD706DC.1090603@4dscape.com>
	<1339593196552-4633253.post@n4.nabble.com>
	<4FD8ECEE.2020204@4dscape.com>
	<1339676606136-4633368.post@n4.nabble.com>
	<4FD9E1E3.7040805@4dscape.com>
Message-ID: <1339697275554-4633432.post@n4.nabble.com>

Thank you very much Alexios.

One more question, related to my point (4) two messages above, where I
probably have not been very clear. Please see the following code.

---
getSymbols("^GSPC", src="yahoo")
getSymbols("^VIX", src="yahoo")
SPY.log.ret=ClCl(GSPC)
#GA3=garchFit(formula=~arma(1,0)+aparch(1,1),data=last(SPY.log.ret,1371),cond.dist="sstd")
#summary(GA3)
modeltofit=ugarchspec(variance.model = list(model = "apARCH", garchOrder =
c(1, 1), 
                    submodel = NULL, external.regressors = NULL,
variance.targeting = FALSE),
                    mean.model = list(armaOrder = c(1, 0), include.mean =
TRUE, archm = FALSE, 
                    archpow = 1, arfima = FALSE, external.regressors = NULL,
archex = FALSE), 
                    distribution.model = "sstd", start.pars = list(),
fixed.pars = list())

#GAA3=ugarchfit(spec=modeltofit,data=last(SPY.log.ret,1371),fit.control=list(scale=1))
#show(GAA3)
volforecast=ugarchroll(spec=modeltofit,data=last(SPY.log.ret,1371), n.ahead
= 21, 
                       forecast.length = 420, refit.every = 21,
                       fit.control=list(scale=1))
sigma=as.data.frame(volforecast,which="density",n.ahead=21)
sigmat <- as.Date(strptime(sigma[,1],format="%Y-%m-%d"))
sigma2 <- xts(sigma[,3],order.by=sigmat)*100*sqrt(252)
plot(sigma2)
lines(Cl(VIX), col="red")

sigmat <- as.Date(index(first(last(GSPC,420+21),420)))
sigma2 <- xts(sigma[,3],order.by=sigmat)*100*sqrt(252)

plot(sigma2)
lines(Cl(VIX), col="red")

---

As you can see the two are very distant: I think the dates that are passed
by the as.data.frame(volforecast,which="density",n.ahead=21) refers to the
forecast date (i.e. 2012-05-07     20.7   means the vol is forecasted to be
20.7 on the 2012-05-07) not the date in which the forecast is made (i.e. the
forecast for the 21d vol made on the 2012-05-07 is 20.7). I realise I was
not very clear in my previous question...

So if I instead use

---
sigmat2 <- as.Date(index(first(last(GSPC,420+21),420)))
sigma3 <- xts(sigma[,3],order.by=sigmat)*100*sqrt(252)

plot(sigma3)
lines(Cl(VIX), col="red")

----

they are now aligned. 

So if I want the 21d forecast aligned with the date they have been made I
have to go for the second version, correct?

In this way thou I missed the last 21 days in the sample, do you think there
is a way to get them back?

Thank you very much for all the help!
Rgds,
marco








--
View this message in context: http://r.789695.n4.nabble.com/rugarch-and-fGarch-tp4633077p4633432.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jeff.a.ryan at gmail.com  Thu Jun 14 20:42:17 2012
From: jeff.a.ryan at gmail.com (Jeffrey Ryan)
Date: Thu, 14 Jun 2012 13:42:17 -0500
Subject: [R-SIG-Finance] create a new variable in a loop - Rbbg,
 RBloomberg
In-Reply-To: <CAA3Wa=svh2_i9H1EMDrFZex6Ea7SS87G-3Yn44HdNXTY+1S8Nw@mail.gmail.com>
Message-ID: <CBFF993C.3F481%jeff.a.ryan@gmail.com>

getSymbols follows the R paradigm of load(), albeit possibly confusingly
named.  I.e. Load data from an external source into an environment.  The
getSymbols call also includes an envir= argument that defaults to
GlobalEnv, but is settable to any environment object.

Environments are far more useful in R than most people recognize, since
they are _never_ copied - meaning lots of objects in a 'container' don't
need to be copied when used for arguments, etc.

You can of of course use lists, but when dealing with many symbols,
new.env(hash=TRUE) is a very memory and search friendly [O(1) symbol
lookup] option that should really be used far more often than it is in
typical R code/examples.

Jeff

On 6/14/12 12:09 PM, "John Laing" <john.laing at gmail.com> wrote:

>Marco,
>
>I would recommend against this approach of creating and renaming many
>environment variables in a loop. Some packages (e.g.
>quantmod::getSymbols) do exactly that, but I prefer to use a list.
>This feels more consistent with the R idiom of applying a function to
>a vector:
>
>securities <- c("SPGLOB Index", "SPX Index", "SPE Index", "SPTPX
>Index", "SPTSX60 Index", "AS31 Index", "SPA50 Index", "SPLAC Index")
>fields <- c("PX_OPEN", "PX_HIGH", "PX_LOW", "PX_LAST", "PX_VOLUME")
>startdate <- as.Date("2005-11-16")
>enddate <- as.Date(Sys.Date())
>
>bbg2xts <- function(security, ...) {
>    bbg <- bdh(conn, security, ...)
>    bbg$date <- NULL
>    as.xts(bbg, order.by = as.Date(rownames(bbg)))
>}
>
>BBGData <- lapply(securities, bbg2xts, fields, startdate, enddate,
>    option_names = c("nonTradingDayFillOption",
>"nonTradingDayFillMethod"),
>    option_values = c("NON_TRADING_WEEKDAYS", "PREVIOUS_VALUE"))
>names(BBGData) <- securities
>
>You get back is a list of XTS objects, with elements named appropriately.
>
>-John
>
>On Thu, Jun 14, 2012 at 10:35 AM, Belgarath <marco.cora at googlemail.com>
>wrote:
>> Hello Everyone,
>>
>> I have the following code:
>>
>> -----
>> securities <- c("SPGLOB", "SPX Index", "SPE Index", "SPTPX Index",
>>            "SPTSX60 Index", "AS31 Index", "SPA50 Index", "SPLAC Index")
>> fields <- c("PX_OPEN", "PX_HIGH", "PX_LOW", "PX_LAST", "PX_VOLUME")
>> startdate <- as.Date("2005-11-16")
>> enddate <- as.Date(Sys.Date())
>> BBGData <- bdh(conn, paste(securities[1],"Index",sep=" "),
>>               fields, startdate, enddate,
>>               option_names = c("nonTradingDayFillOption",
>> "nonTradingDayFillMethod"),
>>               option_values = c("NON_TRADING_WEEKDAYS",
>>"PREVIOUS_VALUE"))
>> BBGData$date=NULL
>> BBGData2 <- as.xts(BBGData, order.by =as.Date(rownames(BBGData)))
>>
>> ----
>>
>> I would like to assign BBGData2 to a new variable with the name as
>> securities[1] in order to be able to package it in a loop and download
>>all
>> the info for all the securities and create new variables for each.
>>
>> More generally how do I create new r variables in a Loop, sort of:
>>
>> name(securities[1]) <- BBGData2
>>
>> Alternatively how do I change a variable name, how to change the name of
>> BBGData2 into SPGLOB for instance; at the next run of the loop the
>>BBGData2
>> would be recreated anyway.
>>
>> Thank you.
>> Regards,
>> Marco
>>
>>
>>
>> --
>> View this message in context:
>>http://r.789695.n4.nabble.com/create-a-new-variable-in-a-loop-Rbbg-RBloom
>>berg-tp4633384.html
>> Sent from the Rmetrics mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>>should go.
>
>_______________________________________________
>R-SIG-Finance at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>-- Subscriber-posting only. If you want to post, subscribe first.
>-- Also note that this is not the r-help list where general R questions
>should go.


From alexios at 4dscape.com  Thu Jun 14 21:36:37 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Thu, 14 Jun 2012 20:36:37 +0100
Subject: [R-SIG-Finance] rugarch and fGarch
In-Reply-To: <1339697275554-4633432.post@n4.nabble.com>
References: <1339487379101-4633077.post@n4.nabble.com>
	<4FD706DC.1090603@4dscape.com>
	<1339593196552-4633253.post@n4.nabble.com>
	<4FD8ECEE.2020204@4dscape.com>
	<1339676606136-4633368.post@n4.nabble.com>
	<4FD9E1E3.7040805@4dscape.com>
	<1339697275554-4633432.post@n4.nabble.com>
Message-ID: <4FDA3D45.3070109@4dscape.com>

Please try to make the reproducible examples a little more compact.

As I said in the previous email the dates shown are the dates aligned to 
the n.ahead forecast. The fact that you do not get the last 21 days is 
because the rolling method uses only out.sample data i.e. forecasts only 
up to the available out.sample (see the ugarchforecast function).
I also mentioned that n.ahead MUST BE <= refit.every (i.e. 
n.ahead<=out.sample per refit), and that a change to accommodate the 
case of n.ahead>refit.every might come in due course.
The point of using the rolling function is for backtesting models for 
which you need realized (i.e. out.sample) data to do so. I will again 
urge you to wrap your own function which makes use of the 
ugarchfit+ugarchforecast functions if you want more customization.

-Alexios

On 14/06/2012 19:07, Belgarath wrote:
> Thank you very much Alexios.
>
> One more question, related to my point (4) two messages above, where I
> probably have not been very clear. Please see the following code.
>
> ---
> getSymbols("^GSPC", src="yahoo")
> getSymbols("^VIX", src="yahoo")
> SPY.log.ret=ClCl(GSPC)
> #GA3=garchFit(formula=~arma(1,0)+aparch(1,1),data=last(SPY.log.ret,1371),cond.dist="sstd")
> #summary(GA3)
> modeltofit=ugarchspec(variance.model = list(model = "apARCH", garchOrder =
> c(1, 1),
>                      submodel = NULL, external.regressors = NULL,
> variance.targeting = FALSE),
>                      mean.model = list(armaOrder = c(1, 0), include.mean =
> TRUE, archm = FALSE,
>                      archpow = 1, arfima = FALSE, external.regressors = NULL,
> archex = FALSE),
>                      distribution.model = "sstd", start.pars = list(),
> fixed.pars = list())
>
> #GAA3=ugarchfit(spec=modeltofit,data=last(SPY.log.ret,1371),fit.control=list(scale=1))
> #show(GAA3)
> volforecast=ugarchroll(spec=modeltofit,data=last(SPY.log.ret,1371), n.ahead
> = 21,
>                         forecast.length = 420, refit.every = 21,
>                         fit.control=list(scale=1))
> sigma=as.data.frame(volforecast,which="density",n.ahead=21)
> sigmat <- as.Date(strptime(sigma[,1],format="%Y-%m-%d"))
> sigma2 <- xts(sigma[,3],order.by=sigmat)*100*sqrt(252)
> plot(sigma2)
> lines(Cl(VIX), col="red")
>
> sigmat <- as.Date(index(first(last(GSPC,420+21),420)))
> sigma2 <- xts(sigma[,3],order.by=sigmat)*100*sqrt(252)
>
> plot(sigma2)
> lines(Cl(VIX), col="red")
>
> ---
>
> As you can see the two are very distant: I think the dates that are passed
> by the as.data.frame(volforecast,which="density",n.ahead=21) refers to the
> forecast date (i.e. 2012-05-07     20.7   means the vol is forecasted to be
> 20.7 on the 2012-05-07) not the date in which the forecast is made (i.e. the
> forecast for the 21d vol made on the 2012-05-07 is 20.7). I realise I was
> not very clear in my previous question...
>
> So if I instead use
>
> ---
> sigmat2 <- as.Date(index(first(last(GSPC,420+21),420)))
> sigma3 <- xts(sigma[,3],order.by=sigmat)*100*sqrt(252)
>
> plot(sigma3)
> lines(Cl(VIX), col="red")
>
> ----
>
> they are now aligned.
>
> So if I want the 21d forecast aligned with the date they have been made I
> have to go for the second version, correct?
>
> In this way thou I missed the last 21 days in the sample, do you think there
> is a way to get them back?
>
> Thank you very much for all the help!
> Rgds,
> marco
>
>
>
>
>
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/rugarch-and-fGarch-tp4633077p4633432.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From dlincke at lincke.com  Mon Jun 18 19:02:32 2012
From: dlincke at lincke.com (David-Michael Lincke)
Date: Mon, 18 Jun 2012 17:02:32 +0000
Subject: [R-SIG-Finance] Where to obtain version of PortfolioAnalytics
 package installable on R 2.15
Message-ID: <FED6DC763FCC7B428AD79346DBA943F456C643F5@ExDAG20-N2.hostallapps.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120618/c1674ba2/attachment.pl>

From caolan.harvey6 at mail.dcu.ie  Mon Jun 18 21:16:59 2012
From: caolan.harvey6 at mail.dcu.ie (Caolan Harvey)
Date: Mon, 18 Jun 2012 20:16:59 +0100
Subject: [R-SIG-Finance] Compute jump test statistic
Message-ID: <CAE0VOJVZ7h3OK-Vyxgcmx=SjC6ZO0fBeiw_8-TP1jZJAPiVFWQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120618/ad44128a/attachment.pl>

From gsee000 at gmail.com  Mon Jun 18 21:34:00 2012
From: gsee000 at gmail.com (G See)
Date: Mon, 18 Jun 2012 14:34:00 -0500
Subject: [R-SIG-Finance] Where to obtain version of PortfolioAnalytics
 package installable on R 2.15
In-Reply-To: <FED6DC763FCC7B428AD79346DBA943F456C643F5@ExDAG20-N2.hostallapps.net>
References: <FED6DC763FCC7B428AD79346DBA943F456C643F5@ExDAG20-N2.hostallapps.net>
Message-ID: <CA+xi=qbdw8HaLRdwNXpt8rHv4Et4ThYRXWnWYPR6i-P7wTWVRg@mail.gmail.com>

I wish there were an R-Forge FAQ I could point to.

You need to use svn to checkout the code. (tortoise svn is popular for Windows)
    svn checkout svn://svn.r-forge.r-project.org/svnroot/returnanalytics/

Navigate to the pkg directory of what you just checked out
    cd returnanalytics/pkg

Then build and install it.  Since you're on Windows, you'll need
http://cran.r-project.org/bin/windows/Rtools/
   R CMD INSTALL --build PortfolioAnalytics

As you noticed, that package has some problems that prevent it from
passing R CMD check, so don't hold your breath waiting for R-Forge to
build it.  (Also, don't expect the documentation to match the code)

If you're going to use code that is under development, you need to
learn to use svn and how to build packages from source.  If you have
trouble building from source, follow up on R-help.

HTH,
Garrett

On Mon, Jun 18, 2012 at 12:02 PM, David-Michael Lincke
<dlincke at lincke.com> wrote:
> Could somebody please point me to where I can obtain a version of package PortfolioAnalytics that can be installed on R 2.15 (x86 32 bit) on Windows?
>
> The obvious approach fails:
>
>> install.packages("PortfolioAnalytics",repos="http://r-forge.r-project.org")
> Warning message: package ?PortfolioAnalytics? is not available (for R version 2.15.0)
>
> A closer look on R-Forge shows that the package has not been building successfully for some time due to issues with compiling the documentation into pdf.
>
> Thanks,
> David
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Mon Jun 18 21:55:33 2012
From: gsee000 at gmail.com (G See)
Date: Mon, 18 Jun 2012 14:55:33 -0500
Subject: [R-SIG-Finance] Compute jump test statistic
In-Reply-To: <CAE0VOJVZ7h3OK-Vyxgcmx=SjC6ZO0fBeiw_8-TP1jZJAPiVFWQ@mail.gmail.com>
References: <CAE0VOJVZ7h3OK-Vyxgcmx=SjC6ZO0fBeiw_8-TP1jZJAPiVFWQ@mail.gmail.com>
Message-ID: <CA+xi=qZz1DR+NVED3O0jPyg5gfJNKUsW_89qY=tG6_GW-dEVOA@mail.gmail.com>

We don't have your data, so we can't get past
    numr = 1 - (outads$medrv/outads$rv)
    Error: object 'outads' not found

Please see:
tinyurl.com/reproducible-000
and
http://www.r-project.org/posting-guide.html

Also, it wouldn't hurt to explain what you're doing, what all those
terms are in your formula, and what the notation means.

Finally, only send text e-mails to the list; no HTML.

Garrett

On Mon, Jun 18, 2012 at 2:16 PM, Caolan Harvey
<caolan.harvey6 at mail.dcu.ie> wrote:
> ?Im trying to compute the following statistic testing for jumps in high
> frequecy asset prices,
> J t,M ?= ?(1 ? MedRVt,M / RVt,M) /(sqrt*( 0.96 * 1/M * max(1, MedRQt,M/
> MedRV2t,M ))
>
>
> I have in R:
>
> ## ADS Test Statistic
>
>> numr = 1 - (outads$medrv/outads$rv)> outads$medrq/(outads$medrv^2) -> denom2> fix(denom2)
>
>
>
> But when I ?try to run the max(1, MedRQt,M/ MedRV2t,M)) part I get:
>
>
>
>> max(1, denom2)[1] NA
>
>
> I guess this is returned because I am tryin to maximise a time series /
> sequence against a constant but I am not sure how to run this?
>
> Any advice?
> Thanks
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From caolan.harvey6 at mail.dcu.ie  Mon Jun 18 22:24:30 2012
From: caolan.harvey6 at mail.dcu.ie (cursethiscure)
Date: Mon, 18 Jun 2012 13:24:30 -0700 (PDT)
Subject: [R-SIG-Finance] Compute jump test statistic
In-Reply-To: <CAE0VOJVZ7h3OK-Vyxgcmx=SjC6ZO0fBeiw_8-TP1jZJAPiVFWQ@mail.gmail.com>
References: <CAE0VOJVZ7h3OK-Vyxgcmx=SjC6ZO0fBeiw_8-TP1jZJAPiVFWQ@mail.gmail.com>
Message-ID: <1340051070035-4633741.post@n4.nabble.com>

Sorry please find the outads data attached as a csv file.

 For the max(1, MedRQ/MedRV^2))

 where MedRQ/MedRV is: `outads$medrq/(outads$medrv^2) -> outads$denom2`
 in the csv file.

 I am trying to return the maximum of either 1 or MedRQ/MedRV^2 (i'm
 aware all values are greater than 1, but this needs to be applied to
 other data sets) but I do not know how to maximise a constant against
 time-series sequence. Everything else is ok. I just dont know how to
 return this argument http://r.789695.n4.nabble.com/file/n4633741/outads.csv
outads.csv 

--
View this message in context: http://r.789695.n4.nabble.com/Compute-jump-test-statistic-tp4633731p4633741.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From gsee000 at gmail.com  Mon Jun 18 23:29:48 2012
From: gsee000 at gmail.com (G See)
Date: Mon, 18 Jun 2012 16:29:48 -0500
Subject: [R-SIG-Finance] Compute jump test statistic
In-Reply-To: <1340051070035-4633741.post@n4.nabble.com>
References: <CAE0VOJVZ7h3OK-Vyxgcmx=SjC6ZO0fBeiw_8-TP1jZJAPiVFWQ@mail.gmail.com>
	<1340051070035-4633741.post@n4.nabble.com>
Message-ID: <CA+xi=qYfS4jDsKc5ZdgXntOoH5y=zDUNFryqv8hFHGzVLMYW7A@mail.gmail.com>

A csv does not contain R objects.  How did you read the csv into R?


On Mon, Jun 18, 2012 at 3:24 PM, cursethiscure
<caolan.harvey6 at mail.dcu.ie> wrote:
> Sorry please find the outads data attached as a csv file.
>
> ?For the max(1, MedRQ/MedRV^2))
>
> ?where MedRQ/MedRV is: `outads$medrq/(outads$medrv^2) -> outads$denom2`
> ?in the csv file.
>
> ?I am trying to return the maximum of either 1 or MedRQ/MedRV^2 (i'm
> ?aware all values are greater than 1, but this needs to be applied to
> ?other data sets) but I do not know how to maximise a constant against
> ?time-series sequence. Everything else is ok. I just dont know how to
> ?return this argument http://r.789695.n4.nabble.com/file/n4633741/outads.csv
> outads.csv
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Compute-jump-test-statistic-tp4633731p4633741.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Mon Jun 18 23:38:41 2012
From: gsee000 at gmail.com (G See)
Date: Mon, 18 Jun 2012 16:38:41 -0500
Subject: [R-SIG-Finance] Compute jump test statistic
In-Reply-To: <CA+xi=qYfS4jDsKc5ZdgXntOoH5y=zDUNFryqv8hFHGzVLMYW7A@mail.gmail.com>
References: <CAE0VOJVZ7h3OK-Vyxgcmx=SjC6ZO0fBeiw_8-TP1jZJAPiVFWQ@mail.gmail.com>
	<1340051070035-4633741.post@n4.nabble.com>
	<CA+xi=qYfS4jDsKc5ZdgXntOoH5y=zDUNFryqv8hFHGzVLMYW7A@mail.gmail.com>
Message-ID: <CA+xi=qb4oBdxSTmDuGKkBVJ9QQ4Fy7zfb_fVzYYxmbFANu15ug@mail.gmail.com>

What do you want to do with all of the NAs in your data.  You can't
apply functions like max to data with NA

> max(0, 1)
[1] 1
> max(NA, 1)
[1] NA

Maybe you want to use na.omit?

> max(na.omit(c(NA, 0)), 1)
[1] 1

HTH,
Garrett

On Mon, Jun 18, 2012 at 4:29 PM, G See <gsee000 at gmail.com> wrote:
> A csv does not contain R objects. ?How did you read the csv into R?
>
>
> On Mon, Jun 18, 2012 at 3:24 PM, cursethiscure
> <caolan.harvey6 at mail.dcu.ie> wrote:
>> Sorry please find the outads data attached as a csv file.
>>
>> ?For the max(1, MedRQ/MedRV^2))
>>
>> ?where MedRQ/MedRV is: `outads$medrq/(outads$medrv^2) -> outads$denom2`
>> ?in the csv file.
>>
>> ?I am trying to return the maximum of either 1 or MedRQ/MedRV^2 (i'm
>> ?aware all values are greater than 1, but this needs to be applied to
>> ?other data sets) but I do not know how to maximise a constant against
>> ?time-series sequence. Everything else is ok. I just dont know how to
>> ?return this argument http://r.789695.n4.nabble.com/file/n4633741/outads.csv
>> outads.csv
>>
>> --
>> View this message in context: http://r.789695.n4.nabble.com/Compute-jump-test-statistic-tp4633731p4633741.html
>> Sent from the Rmetrics mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Mon Jun 18 23:40:29 2012
From: gsee000 at gmail.com (G See)
Date: Mon, 18 Jun 2012 16:40:29 -0500
Subject: [R-SIG-Finance] Compute jump test statistic
In-Reply-To: <CA+xi=qb4oBdxSTmDuGKkBVJ9QQ4Fy7zfb_fVzYYxmbFANu15ug@mail.gmail.com>
References: <CAE0VOJVZ7h3OK-Vyxgcmx=SjC6ZO0fBeiw_8-TP1jZJAPiVFWQ@mail.gmail.com>
	<1340051070035-4633741.post@n4.nabble.com>
	<CA+xi=qYfS4jDsKc5ZdgXntOoH5y=zDUNFryqv8hFHGzVLMYW7A@mail.gmail.com>
	<CA+xi=qb4oBdxSTmDuGKkBVJ9QQ4Fy7zfb_fVzYYxmbFANu15ug@mail.gmail.com>
Message-ID: <CA+xi=qbBB00tGeEbXORsNSfqESw0WghidL6nj7Ov2w2OOsBrQA@mail.gmail.com>

On Mon, Jun 18, 2012 at 4:38 PM, G See <gsee000 at gmail.com> wrote:
> What do you want to do with all of the NAs in your data. ?You can't
> apply functions like max to data with NA
>
>> max(0, 1)
> [1] 1
>> max(NA, 1)
> [1] NA
>
> Maybe you want to use na.omit?
>
>> max(na.omit(c(NA, 0)), 1)
> [1] 1

or use `na.rm=TRUE`
> max(c(NA, 1), na.rm=TRUE)
[1] 1

> HTH,
> Garrett
>


From e065c8515d206cb0e190 at gmail.com  Tue Jun 19 04:40:03 2012
From: e065c8515d206cb0e190 at gmail.com (E D)
Date: Mon, 18 Jun 2012 22:40:03 -0400
Subject: [R-SIG-Finance] xts objects and speed
Message-ID: <CAGDBHChmLSd+dA082afVN1HWbGQxcEjfZ_uPgCY+OhWeeRH9eg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120618/58ca4b76/attachment.pl>

From michael.weylandt at gmail.com  Tue Jun 19 04:49:29 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt <michael.weylandt@gmail.com>)
Date: Mon, 18 Jun 2012 21:49:29 -0500
Subject: [R-SIG-Finance] xts objects and speed
In-Reply-To: <CAGDBHChmLSd+dA082afVN1HWbGQxcEjfZ_uPgCY+OhWeeRH9eg@mail.gmail.com>
References: <CAGDBHChmLSd+dA082afVN1HWbGQxcEjfZ_uPgCY+OhWeeRH9eg@mail.gmail.com>
Message-ID: <941CE976-A6D8-4F6F-ABDB-748F451F3179@gmail.com>

If I understand you, it might take a little jerry-rigging (sp?) but I think you could use the to.period() functions and pull out the "High"s and "Low"s. 

Hope this gets you going in the right direction,

Michael

On Jun 18, 2012, at 9:40 PM, E D <e065c8515d206cb0e190 at gmail.com> wrote:

> Hi everyone,
> 
> I'm trying to use R to do some analysis of intraday data.
> Currently I have quotes for one symbol (every 1 min, from 930am to 4pm) and
> about a month and a half of data, and I'm computing things such as the
> trailing 1 hour and 3 hour maximums and minimums for that ticker.
> I'm making use of commands such as max(last(myXTS[1:t],'3 hours')) for
> every t, and I'm finding it rather slow as it takes about 60s to run for
> 12500 observations on a modern workstation.
> 
> Am I making improper or unoptimized use of the xts functions? Could someone
> give me a few points to speed up that kind of calculation? (If the answer
> is "I know this great time series library in C"... that's ok.)
> 
> Thanks in advance.
> 
> ED
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From brian at braverock.com  Tue Jun 19 11:46:03 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 19 Jun 2012 04:46:03 -0500
Subject: [R-SIG-Finance] xts objects and speed
In-Reply-To: <CAGDBHChmLSd+dA082afVN1HWbGQxcEjfZ_uPgCY+OhWeeRH9eg@mail.gmail.com>
References: <CAGDBHChmLSd+dA082afVN1HWbGQxcEjfZ_uPgCY+OhWeeRH9eg@mail.gmail.com>
Message-ID: <4FE04A5B.3080002@braverock.com>

On 06/18/2012 09:40 PM, E D wrote:
> Hi everyone,
>
> I'm trying to use R to do some analysis of intraday data.
> Currently I have quotes for one symbol (every 1 min, from 930am to 4pm) and
> about a month and a half of data, and I'm computing things such as the
> trailing 1 hour and 3 hour maximums and minimums for that ticker.
> I'm making use of commands such as max(last(myXTS[1:t],'3 hours')) for
> every t, and I'm finding it rather slow as it takes about 60s to run for
> 12500 observations on a modern workstation.
>
> Am I making improper or unoptimized use of the xts functions? Could someone
> give me a few points to speed up that kind of calculation? (If the answer
> is "I know this great time series library in C"... that's ok.)
>
> Thanks in advance.

You didn't provide a reproducible example, so you run the risk

Your email suggests that you are doing something like:

for (t in 180:nrow(myXTS)) {
	out<-max(last(myXTS[1:t],'3 hours'))
}

which will indeed be painfully slow.

In the hopes of eliciting a little more detail, here's a reproducible 
example...

#######################

# on a very slow web browsing desktop at home
# (as opposed to a 'modern workstation'
# on which I do real work):


require(TTR)

#?runMax

# construct a one-minute index
idx<-seq.POSIXt(from=as.POSIXct('2012-05-01'),
		to=as.POSIXct('2012-06-18'),by='min')

# construct a fake time series
myXTS<-xts(cumsum(rnorm(length(idx))),order.by=idx)

myXTS<-myXTS['T09:30/T16:00'] #subset by time

outs<-vector(length=nrow(myXTS))
system.time(
   for (t in 180:nrow(myXTS)) {
      outs[t]<-max(last(myXTS[1:t],'3 hours'))
   }
)

#    user  system elapsed
# 127.092   0.020 127.137

system.time(
	outf<-runMax(myXTS,180)
)

#   user  system elapsed
#  0.032   0.000   0.032

######################

Cheers,

    - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From gsee000 at gmail.com  Tue Jun 19 18:31:08 2012
From: gsee000 at gmail.com (G See)
Date: Tue, 19 Jun 2012 11:31:08 -0500
Subject: [R-SIG-Finance] Where to obtain version of PortfolioAnalytics
 package installable on R 2.15
In-Reply-To: <CA+xi=qbdw8HaLRdwNXpt8rHv4Et4ThYRXWnWYPR6i-P7wTWVRg@mail.gmail.com>
References: <FED6DC763FCC7B428AD79346DBA943F456C643F5@ExDAG20-N2.hostallapps.net>
	<CA+xi=qbdw8HaLRdwNXpt8rHv4Et4ThYRXWnWYPR6i-P7wTWVRg@mail.gmail.com>
Message-ID: <CA+xi=qatCJEm+GDZB3zLU5k4geJN2nH9daE5FC9h-kJqAa75uA@mail.gmail.com>

On Mon, Jun 18, 2012 at 2:34 PM, G See <gsee000 at gmail.com> wrote:
> I wish there were an R-Forge FAQ I could point to.
>
Now we can direct these types of question to this post:
http://stackoverflow.com/questions/11105131/cannot-install-r-forge-package-using-install-packages

Garrett


From susan22 at mail.com  Tue Jun 19 20:43:30 2012
From: susan22 at mail.com (susan22 at mail.com)
Date: Tue, 19 Jun 2012 14:43:30 -0400
Subject: [R-SIG-Finance] issue with xts affectin Return.calculate in
	PerformanceAnalytics
Message-ID: <20120619184330.39920@gmx.com>

I came across the issue below trying to calculate simple returns of an xts object using Return.calculate() in PerformanceAnalytics. This returns a series of all zeros. The root of the problem, however, seems to be with xts for which division seems to be a challenge. What am I missing? Coercion to numeric is not really a reasonable solution.

> p <- to.monthly(as.xts(s.ts), OHLC = FALSE)
> head(aap)
 ? ? ? ? ? ? ? ? ? s1 ? ? ? ? ? s2
Dec 1999 ? ? ?1000.00 ? ? ?1000.00
Jan 2000 ? ? ?1021.27 ? ? ? 959.85
Feb 2000 ? ? ?1017.30 ? ? ? 962.06
Mar 2000 ? ? ?1022.99 ? ? ?1008.44
Apr 2000 ? ? ?1015.95 ? ? ? 980.95
May 2000 ? ? ?1044.30 ? ? ? 963.79

> r <- Return.calculate(aap, method = "simple")
> head(r)
 ? ? ? ? ? ? ? ? ? s1 ? ? ? ? ? s2
Dec 1999 ? ? ? ? ? ?0 ? ? ? ? ? ?0
Jan 2000 ? ? ? ? ? ?0 ? ? ? ? ? ?0
Feb 2000 ? ? ? ? ? ?0 ? ? ? ? ? ?0
Mar 2000 ? ? ? ? ? ?0 ? ? ? ? ? ?0
Apr 2000 ? ? ? ? ? ?0 ? ? ? ? ? ?0
May 2000 ? ? ? ? ? ?0 ? ? ? ? ? ?0

> lr <- Return.calculate(aap, method = "compound")
> head(lr)
 ? ? ? ? ? ? ? ? ? ? ? ?s1 ? ? ? ? ? ? ? ?s2
Dec 1999 ? ? ? ? ? ? ? ?NA ? ? ? ? ? ? ? ?NA
Jan 2000 ?0.02104695084364 -0.04097825672856
Feb 2000 -0.00389489202608 ?0.00229979652957
Mar 2000 ?0.00557765293308 ?0.04708304254280
Apr 2000 -0.00690557640376 -0.02763837145911
May 2000 ?0.02752266915648 -0.01764806131103

> p[2]/p[1]-1
Data:
numeric(0)

Index:
NULL

> as.numeric(p[2])/as.numeric(p[1])-1
[1] ?0.02127 -0.04015


From optionsraghu at gmail.com  Wed Jun 20 00:54:14 2012
From: optionsraghu at gmail.com (Raghuraman Ramachandran)
Date: Tue, 19 Jun 2012 23:54:14 +0100
Subject: [R-SIG-Finance] Profit calculation
Message-ID: <CADgEnD=UY_hns-J8_QiE75+YPKRiN2ms4MADZfXNzChv6g114Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120619/6e373fa2/attachment.pl>

From josh.m.ulrich at gmail.com  Wed Jun 20 01:18:12 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 19 Jun 2012 18:18:12 -0500
Subject: [R-SIG-Finance] [R] Profit calculation
In-Reply-To: <CACk-te33khmi7_TYJ1=gz_PDuRdpCr+gnfgSTrguparTHwaGhw@mail.gmail.com>
References: <CADgEnD=UY_hns-J8_QiE75+YPKRiN2ms4MADZfXNzChv6g114Q@mail.gmail.com>
	<CACk-te33khmi7_TYJ1=gz_PDuRdpCr+gnfgSTrguparTHwaGhw@mail.gmail.com>
Message-ID: <CAPPM_gQMBfQuvCvwDUK5Kd-15b3=b6hQZkzL_qRVePJMN5=jwA@mail.gmail.com>

On Tue, Jun 19, 2012 at 6:07 PM, Bert Gunter <gunter.berton at gene.com> wrote:
> 1. Don't double post. (obviously belongs on finance list)
> 2. Homework? (we don't do homework on r-help)
>
We don't do homework on R-SIG-Finance either...

> -- Bert
>

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com


> On Tue, Jun 19, 2012 at 3:54 PM, Raghuraman Ramachandran <
> optionsraghu at gmail.com> wrote:
>
>> Dear guRus
>>
>> Say I have a price vector, P which is P = c(20,50,40,50) for four
>> consecutive days.
>>
>> My initial equity is say $100 and I re-invest the profits made in each
>> transaction so my equity curve increases.
>>
>> If I go Long on day 1, short and short on day 2, long and long on day 3 and
>> finally short on day 4, how do I calculate the total profits using R?
>> Basically I stay invested at all times.
>>
>> I have simplified a larger problem by giving a small example.
>>
>> Thanks for your kind guidance in advance.
>>
>> Raghu
>>
>> ? ? ? ?[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>
>
> --
>
> Bert Gunter
> Genentech Nonclinical Biostatistics
>
> Internal Contact Info:
> Phone: 467-7374
> Website:
> http://pharmadevelopment.roche.com/index/pdb/pdb-functional-groups/pdb-biostatistics/pdb-ncb-home.htm
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From alexandre.cesari at gmail.com  Wed Jun 20 10:23:43 2012
From: alexandre.cesari at gmail.com (Alexandre CESARI)
Date: Wed, 20 Jun 2012 10:23:43 +0200
Subject: [R-SIG-Finance] Rbbg Java out-of-heap-space error (potential cause:
	response_cache)
Message-ID: <CAA6bQ61bgXm=+iXeUPmASHueEShk1qO+xuPU0uPxd4cXjLRsxw@mail.gmail.com>

Hi,

I have been getting out of memory errors with RBloomberg and now Rbbg.
I'd like to manually fix the package but I cannot get my hand on the
source code, except on an old fork found on github. Could someone
point me where I can the latest source? Standard package download
within R with type source is not working and findata.org seems to be
dead following the package name change.

Regards,

Alexandre


From jjfgarcia at renta4.es  Wed Jun 20 11:14:10 2012
From: jjfgarcia at renta4.es (=?iso-8859-1?Q?Juan_Jos=E9_Fern=E1ndez_Garc=EDa?=)
Date: Wed, 20 Jun 2012 09:14:10 +0000
Subject: [R-SIG-Finance] RExcel -> 3.2.1.0
In-Reply-To: <CAA6bQ61bgXm=+iXeUPmASHueEShk1qO+xuPU0uPxd4cXjLRsxw@mail.gmail.com>
References: <CAA6bQ61bgXm=+iXeUPmASHueEShk1qO+xuPU0uPxd4cXjLRsxw@mail.gmail.com>
Message-ID: <F148DC98BC2E614AA82FC8457CA5BCBF01100F0A@BONNIE.domail.local>

Dear all,

Does anyone have the RExcel 3.2.1.0 file? I tried to download from internet but I could only get a .tar file, which I don't know how to install.

Thanks very much

JJ 


From john.laing at gmail.com  Wed Jun 20 13:39:41 2012
From: john.laing at gmail.com (John Laing)
Date: Wed, 20 Jun 2012 07:39:41 -0400
Subject: [R-SIG-Finance] Rbbg Java out-of-heap-space error (potential
 cause: response_cache)
In-Reply-To: <CAA6bQ61bgXm=+iXeUPmASHueEShk1qO+xuPU0uPxd4cXjLRsxw@mail.gmail.com>
References: <CAA6bQ61bgXm=+iXeUPmASHueEShk1qO+xuPU0uPxd4cXjLRsxw@mail.gmail.com>
Message-ID: <CAA3Wa=vmvDyZFiEsdtBnwF_ZDdzH-yC9RgYRcYEE-K=Fa-QejA@mail.gmail.com>

Alexandre,

The Java side of the Rbbg package caches all data responses during a
session. That's probably what's responsible for the memory issues
you're experiencing. This is a known bug that I haven't had a chance
to fix, but if you'd like to submit a patch I would happily accept.
The latest source is on my github at
http://github.com/johnlaing/blpwrapper. (I assume the "old fork" you
refer to is Jeff Davis's version, tweaked to work on Linux.)

The findata.org site hosts Windows binaries, so you should not specify
type = "source" from within R. This works just fine:
install.packages("Rbbg", repos = "http://r.findata.org")

-John

On Wed, Jun 20, 2012 at 4:23 AM, Alexandre CESARI
<alexandre.cesari at gmail.com> wrote:
> Hi,
>
> I have been getting out of memory errors with RBloomberg and now Rbbg.
> I'd like to manually fix the package but I cannot get my hand on the
> source code, except on an old fork found on github. Could someone
> point me where I can the latest source? Standard package download
> within R with type source is not working and findata.org seems to be
> dead following the package name change.
>
> Regards,
>
> Alexandre
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From matt at considine.net  Wed Jun 20 14:44:00 2012
From: matt at considine.net (Matt Considine)
Date: Wed, 20 Jun 2012 08:44:00 -0400
Subject: [R-SIG-Finance] Where to obtain version of PortfolioAnalytics
 package installable on R 2.15
In-Reply-To: <CA+xi=qatCJEm+GDZB3zLU5k4geJN2nH9daE5FC9h-kJqAa75uA@mail.gmail.com>
References: <CA+xi=qatCJEm+GDZB3zLU5k4geJN2nH9daE5FC9h-kJqAa75uA@mail.gmail.com>
Message-ID: <4FE1C590.1050604@considine.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120620/17610adc/attachment.pl>

From josh.m.ulrich at gmail.com  Wed Jun 20 21:52:28 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Wed, 20 Jun 2012 14:52:28 -0500
Subject: [R-SIG-Finance] issue with xts affectin Return.calculate in
	PerformanceAnalytics
In-Reply-To: <20120619184330.39920@gmx.com>
References: <20120619184330.39920@gmx.com>
Message-ID: <CAPPM_gSg0g+RcLc8dLzeDVLKYx7hJrv-Rnuuzwp_66gxCLt8MQ@mail.gmail.com>

On Tue, Jun 19, 2012 at 1:43 PM, ?<susan22 at mail.com> wrote:
> I came across the issue below trying to calculate simple returns of an xts
> object using Return.calculate() in PerformanceAnalytics. This returns a
> series of all zeros. The root of the problem, however, seems to be with xts
> for which division seems to be a challenge. What am I missing? Coercion to
> numeric is not really a reasonable solution.
>
Return.calculate was fixed on R-Forge on April 4, 2012.  Please see
this SO question about installing from R-Forge:
http://stackoverflow.com/q/11105131/271616

Division is only a challenge when you try to divide two objects that
do not have any index values in common.  Use lag() to align the index
instead.

>> p <- to.monthly(as.xts(s.ts), OHLC = FALSE)
>> head(aap)
> ?? ? ? ? ? ? ? ? ? s1 ? ? ? ? ? s2
> Dec 1999 ? ? ?1000.00 ? ? ?1000.00
> Jan 2000 ? ? ?1021.27 ? ? ? 959.85
> Feb 2000 ? ? ?1017.30 ? ? ? 962.06
> Mar 2000 ? ? ?1022.99 ? ? ?1008.44
> Apr 2000 ? ? ?1015.95 ? ? ? 980.95
> May 2000 ? ? ?1044.30 ? ? ? 963.79
>
>> r <- Return.calculate(aap, method = "simple")
>> head(r)
> ?? ? ? ? ? ? ? ? ? s1 ? ? ? ? ? s2
> Dec 1999 ? ? ? ? ? ?0 ? ? ? ? ? ?0
> Jan 2000 ? ? ? ? ? ?0 ? ? ? ? ? ?0
> Feb 2000 ? ? ? ? ? ?0 ? ? ? ? ? ?0
> Mar 2000 ? ? ? ? ? ?0 ? ? ? ? ? ?0
> Apr 2000 ? ? ? ? ? ?0 ? ? ? ? ? ?0
> May 2000 ? ? ? ? ? ?0 ? ? ? ? ? ?0
>
>> lr <- Return.calculate(aap, method = "compound")
>> head(lr)
> ?? ? ? ? ? ? ? ? ? ? ? ?s1 ? ? ? ? ? ? ? ?s2
> Dec 1999 ? ? ? ? ? ? ? ?NA ? ? ? ? ? ? ? ?NA
> Jan 2000 ?0.02104695084364 -0.04097825672856
> Feb 2000 -0.00389489202608 ?0.00229979652957
> Mar 2000 ?0.00557765293308 ?0.04708304254280
> Apr 2000 -0.00690557640376 -0.02763837145911
> May 2000 ?0.02752266915648 -0.01764806131103
>
>> p[2]/p[1]-1
> Data:
> numeric(0)
>
> Index:
> NULL
>
>> as.numeric(p[2])/as.numeric(p[1])-1
> [1] ?0.02127 -0.04015
>

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com


From alex.chaoxiong at gmail.com  Thu Jun 21 00:56:31 2012
From: alex.chaoxiong at gmail.com (Chao Xiong)
Date: Wed, 20 Jun 2012 15:56:31 -0700
Subject: [R-SIG-Finance] contradiction between rugarch package and fracdiff
	package
Message-ID: <CAHRLNfXQmJmARvCgfioaFFnGQ1c=NkGEY7wwrS1VKg0R-ewpTg@mail.gmail.com>

Hi, I am new in using rugarch. It is fabulous. But I need some help on
fitting the ARFIMA model.

using rugarch

spec = arfimaspec(mean.model = list(armaOrder=c(1,1), include.mean =
F, arfima = T,
external.regressors=NULL)
, distribution.model = "norm")

res = arfimafit(spec, dat$daysp^2*10000);

in fracdiff package, there are two functions (Sperio Estimate and
Geweke and Porter-Hudak Estimator) providing an estimate of d, or
"arfima" in rugarch

fdGPH(dat$daysp^2*10000, bandw.exp = 0.5)
fdSperio(dat$daysp^2*10000, bandw.exp = 0.5, beta = 0.9)

in this particular data set, it will give a value of 0.37. However,
using rugarch package, the value is -0.03. Is it becuase rugarch will
estimate an additional parameter sigma? I highly doubt that. You can
also try any other data set.

I don't know which one is correct. In addition, the speed for using
rugarch is much slower.

Thanks.
-- 
Chao Xiong


From e065c8515d206cb0e190 at gmail.com  Thu Jun 21 01:58:56 2012
From: e065c8515d206cb0e190 at gmail.com (E D)
Date: Wed, 20 Jun 2012 19:58:56 -0400
Subject: [R-SIG-Finance] xts objects and speed
In-Reply-To: <4FE04A5B.3080002@braverock.com>
References: <CAGDBHChmLSd+dA082afVN1HWbGQxcEjfZ_uPgCY+OhWeeRH9eg@mail.gmail.com>
	<4FE04A5B.3080002@braverock.com>
Message-ID: <CAGDBHCg3+mgi4Aj7aEWi3AiKMeq3W8+mnVfg8cpJXf2myDwHpw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120620/98ae6741/attachment.pl>

From alexios at 4dscape.com  Thu Jun 21 03:01:23 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Thu, 21 Jun 2012 02:01:23 +0100
Subject: [R-SIG-Finance] contradiction between rugarch package and
	fracdiff package
In-Reply-To: <CAHRLNfXQmJmARvCgfioaFFnGQ1c=NkGEY7wwrS1VKg0R-ewpTg@mail.gmail.com>
References: <CAHRLNfXQmJmARvCgfioaFFnGQ1c=NkGEY7wwrS1VKg0R-ewpTg@mail.gmail.com>
Message-ID: <4FE27263.90000@4dscape.com>

Please follow the guidelines and provide a reproducible example. The way 
to do that is to put some thought in the question and read the 
documentation in both packages i.e. they both offer simulation functions 
from which you can test for yourself the results using either 
fracdiff.sim or arfimasim.

1. Simulate a large number of scenarios (e.g. 1000 (n.points) x 500 
independent 'scenarios').
2. Fit with arfimasim and whatever other function you want.
3. Look at the distribution of the fitted parameters.
4. Consider that one is ML based (rugarch) which is where that 
"additional paramater sigma" comes from .
5. Consider what happens when n.points is small (100 vs 1000) by 
simulating and fitting small 'scenarios'...but this is an issue already 
covered in the literature and the difficulty in getting a good estimate 
of the fractional parameter with small datasets.

- Finally, the correct spec to use in order to compare in your example 
would have been to set armaOrder=c(0,0), since you defined the fdGPH and 
fdSperio without ar and ma terms.
e.g.

# reproducible example (by setting the seed)!
set.seed(100)
# simulator:
memory.long <- fracdiff.sim(1500, d = 0.3)

spec = arfimaspec(mean.model = list(armaOrder=c(0,0), include.mean =
F, arfima = T,external.regressors=NULL), distribution.model = "norm")

coef(arfimafit(spec, memory.long$series))["arfima"]

fdGPH(memory.long$series, bandw.exp = 0.5)$d

fdSperio(memory.long$series, bandw.exp = 0.5, beta = 0.9)$d

###########################
# d=parameter (TRUE = 0.3)
# rugarch fdGPH fdSperio
0.2658 0.3833562 0.2811597
###########################

-Alexios

On 20/06/2012 23:56, Chao Xiong wrote:
> Hi, I am new in using rugarch. It is fabulous. But I need some help on
> fitting the ARFIMA model.
>
> using rugarch
>
> spec = arfimaspec(mean.model = list(armaOrder=c(1,1), include.mean =
> F, arfima = T,
> external.regressors=NULL)
> , distribution.model = "norm")
>
> res = arfimafit(spec, dat$daysp^2*10000);
>
> in fracdiff package, there are two functions (Sperio Estimate and
> Geweke and Porter-Hudak Estimator) providing an estimate of d, or
> "arfima" in rugarch
>
> fdGPH(dat$daysp^2*10000, bandw.exp = 0.5)
> fdSperio(dat$daysp^2*10000, bandw.exp = 0.5, beta = 0.9)
>
> in this particular data set, it will give a value of 0.37. However,
> using rugarch package, the value is -0.03. Is it becuase rugarch will
> estimate an additional parameter sigma? I highly doubt that. You can
> also try any other data set.
>
> I don't know which one is correct. In addition, the speed for using
> rugarch is much slower.
>
> Thanks.
>


From susan22 at mail.com  Thu Jun 21 09:22:53 2012
From: susan22 at mail.com (susan22 at mail.com)
Date: Thu, 21 Jun 2012 03:22:53 -0400
Subject: [R-SIG-Finance] Return.portfolio() in PerformanceAnalytics and
	discrete returns
Message-ID: <20120621072253.39920@gmx.com>

Thanks Joshua,
 
 in the meantime, I have taken a closer look at function Return.portfolio() in package PerformanceAnalytics and something seems quite odd. I hope I am not making a basic mistake here in my thinking, but it seems that this function does not handle discrete returns properly.
 
 Things start out fine with a weighted wealth index being constructed by geometrically linking discrete period returns:
 
 ????? wealthindex.assets=cumprod(1+R[,colnames(weights)])
 
 ????? wealthindex.weighted = matrix(nrow=nrow(R),ncol=ncol(R[,colnames(weights)]))
 ????? colnames(wealthindex.weighted)=colnames(wealthindex.assets)
 ????? rownames(wealthindex.weighted)=as.character(index(wealthindex.assets))
 ????? # weight the results
 ????? for (col in colnames(weights)){
 ????????? wealthindex.weighted[,col]=weights[,col]*wealthindex.assets[,col]
 ????? }
 ????? wealthindex=apply(wealthindex.weighted,1,sum)
 
 But then after line 181 the function stops in its tracks, abandons its results so far except for the unweighted individual gross cumulative returns and instead of doing something along the lines of the following to decompose wealthindex into discrete portfolio period returns
 
 result <- as-matrix(c(wealthindex[1]-1, wealthindex[2]/wealthindex[1]-1,? wealthindex[3]/wealthindex[2]-1, ... ), ncol = 1)
 
 the returns are treated as if they were additive log returns
 
 ????? # weighted cumulative returns
 ????? weightedcumcont=t(apply (wealthindex.assets,1, function(x,weights){ as.vector((x-1)* weights)},weights=weights))
 ????? weightedreturns=diff(rbind(0,weightedcumcont)) # compound returns
 ????? colnames(weightedreturns)=colnames(wealthindex.assets)
 ????? if (!wealth.index){
 ??????? result=as.matrix(apply(weightedreturns,1,sum),ncol=1)
 ????? } else {
 ??????? wealthindex=matrix(cumprod(1 + as.matrix(apply(weightedreturns,1, sum), ncol = 1)),ncol=1)
 ????? }


 
 ?----- Original Message -----
 ?From: Joshua Ulrich
 ?Sent: 06/20/12 09:52 PM
 ?To: susan22 at mail.com
 ?Subject: Re: [R-SIG-Finance] issue with xts affectin Return.calculate in PerformanceAnalytics
 
 ? 
On Tue, Jun 19, 2012 at 1:43 PM, ?<susan22 at mail.com> wrote:
> I came across the issue below trying to calculate simple returns of an xts
> object using Return.calculate() in PerformanceAnalytics. This returns a
> series of all zeros. The root of the problem, however, seems to be with xts
> for which division seems to be a challenge. What am I missing? Coercion to
> numeric is not really a reasonable solution.
>
Return.calculate was fixed on R-Forge on April 4, 2012. Please see
this SO question about installing from R-Forge:
http://stackoverflow.com/q/11105131/271616

Division is only a challenge when you try to divide two objects that
do not have any index values in common. Use lag() to align the index
instead.

>> p <- to.monthly(as.xts(s.ts), OHLC = FALSE)
>> head(aap)
> ?? ? ? ? ? ? ? ? ? s1 ? ? ? ? ? s2
> Dec 1999 ? ? ?1000.00 ? ? ?1000.00
> Jan 2000 ? ? ?1021.27 ? ? ? 959.85
> Feb 2000 ? ? ?1017.30 ? ? ? 962.06
> Mar 2000 ? ? ?1022.99 ? ? ?1008.44
> Apr 2000 ? ? ?1015.95 ? ? ? 980.95
> May 2000 ? ? ?1044.30 ? ? ? 963.79
>
>> r <- Return.calculate(aap, method = "simple")
>> head(r)
> ?? ? ? ? ? ? ? ? ? s1 ? ? ? ? ? s2
> Dec 1999 ? ? ? ? ? ?0 ? ? ? ? ? ?0
> Jan 2000 ? ? ? ? ? ?0 ? ? ? ? ? ?0
> Feb 2000 ? ? ? ? ? ?0 ? ? ? ? ? ?0
> Mar 2000 ? ? ? ? ? ?0 ? ? ? ? ? ?0
> Apr 2000 ? ? ? ? ? ?0 ? ? ? ? ? ?0
> May 2000 ? ? ? ? ? ?0 ? ? ? ? ? ?0
>
>> lr <- Return.calculate(aap, method = "compound")
>> head(lr)
> ?? ? ? ? ? ? ? ? ? ? ? ?s1 ? ? ? ? ? ? ? ?s2
> Dec 1999 ? ? ? ? ? ? ? ?NA ? ? ? ? ? ? ? ?NA
> Jan 2000 ?0.02104695084364 -0.04097825672856
> Feb 2000 -0.00389489202608 ?0.00229979652957
> Mar 2000 ?0.00557765293308 ?0.04708304254280
> Apr 2000 -0.00690557640376 -0.02763837145911
> May 2000 ?0.02752266915648 -0.01764806131103
>
>> p[2]/p[1]-1
> Data:
> numeric(0)
>
> Index:
> NULL
>
>> as.numeric(p[2])/as.numeric(p[1])-1
> [1] ?0.02127 -0.04015
>

Best,
--
Joshua Ulrich | FOSS Trading: www.fosstrading.com
 ? 

 

?


From navalv at iimahd.ernet.in  Thu Jun 21 11:31:13 2012
From: navalv at iimahd.ernet.in (naval)
Date: Thu, 21 Jun 2012 02:31:13 -0700 (PDT)
Subject: [R-SIG-Finance] forecasting with expanding window
Message-ID: <1340271073273-4634076.post@n4.nabble.com>

Dear alexios and other R users,

I have the returns data on a firm named "ret" having 2767 observations
total. I want the one day ahead rollingt forecasts starting from 1001th day
and model is to be refit every 5 days.
So my first 5 forecasts (i.e., for the 1001,1002,1003,1004 nd 1005th day)
will be based on first 1000 observations, next 5 forecasts(i.e., for the
1006 to 1010'th day) will be based on first 1005 observations and then next
5 days forecast will be based on first 1010 observations and this process
continues.
I used following code

spec= ugarchspec(variance.model= list(model = 'gjrGARCH')
,mean.model=list(armaOrder= c(0,0),include.mean= FALSE, archpow=2))
forecast<-ugarchroll(spec=spec,data=mkt_ret,forecast.length=1767,refit.every=5,
refit.window="recursive")
 mkt_fcst<- as.data.frame(forecast)

My questions are
1)
I suppose the f_sigma in mkt_fcst dataframe is forecasted volatality  but is
this the true forecast which I need according to above description of my
needed forecast

2) If this f_sigma is the right forecasted vol then why i got only the
forecasts till 2765 days because next two days forecasts could be based on
the data till 2765 observations.

3) Please suggest me how to formulate the right code for my needed forecast

4) I will do assymetric DCC also using second series on market index
(mkt_ret) nd would need the DCC forecasts too in the same manner using
rmgarch. 




--
View this message in context: http://r.789695.n4.nabble.com/forecasting-with-expanding-window-tp4634076.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From p.desmazis at gmail.com  Thu Jun 21 12:42:09 2012
From: p.desmazis at gmail.com (Pierre-Alexandr des Mazis)
Date: Thu, 21 Jun 2012 11:42:09 +0100
Subject: [R-SIG-Finance] PortfolioAnalytics
In-Reply-To: <CAGDBHCg3+mgi4Aj7aEWi3AiKMeq3W8+mnVfg8cpJXf2myDwHpw@mail.gmail.com>
References: <CAGDBHChmLSd+dA082afVN1HWbGQxcEjfZ_uPgCY+OhWeeRH9eg@mail.gmail.com>
	<4FE04A5B.3080002@braverock.com>
	<CAGDBHCg3+mgi4Aj7aEWi3AiKMeq3W8+mnVfg8cpJXf2myDwHpw@mail.gmail.com>
Message-ID: <8D279160-9D01-4DC9-8522-352682BDDF2F@gmail.com>

Hi

I was looking for PortfolioAnalytics package zip but could not find it on the web. 

Can you please help on that

Thank you

From j_cuisinier at hotmail.com  Thu Jun 21 13:04:37 2012
From: j_cuisinier at hotmail.com (julien cuisinier)
Date: Thu, 21 Jun 2012 13:04:37 +0200
Subject: [R-SIG-Finance] PortfolioAnalytics
In-Reply-To: <8D279160-9D01-4DC9-8522-352682BDDF2F@gmail.com>
References: <CAGDBHChmLSd+dA082afVN1HWbGQxcEjfZ_uPgCY+OhWeeRH9eg@mail.gmail.com>,
	<4FE04A5B.3080002@braverock.com>,
	<CAGDBHCg3+mgi4Aj7aEWi3AiKMeq3W8+mnVfg8cpJXf2myDwHpw@mail.gmail.com>,
	<8D279160-9D01-4DC9-8522-352682BDDF2F@gmail.com>
Message-ID: <COL102-W345B9DD6A7A326EA5242198FFD0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120621/8bde2510/attachment.pl>

From p.desmazis at gmail.com  Thu Jun 21 14:21:17 2012
From: p.desmazis at gmail.com (Pierre-Alexandr des Mazis)
Date: Thu, 21 Jun 2012 13:21:17 +0100
Subject: [R-SIG-Finance] PortfolioAnalytics
In-Reply-To: <COL102-W345B9DD6A7A326EA5242198FFD0@phx.gbl>
References: <CAGDBHChmLSd+dA082afVN1HWbGQxcEjfZ_uPgCY+OhWeeRH9eg@mail.gmail.com>
	<4FE04A5B.3080002@braverock.com>
	<CAGDBHCg3+mgi4Aj7aEWi3AiKMeq3W8+mnVfg8cpJXf2myDwHpw@mail.gmail.com>
	<8D279160-9D01-4DC9-8522-352682BDDF2F@gmail.com>
	<COL102-W345B9DD6A7A326EA5242198FFD0@phx.gbl>
Message-ID: <7A9A87DD-D31B-42D7-9567-43FD4EC086C5@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120621/2b52ed9a/attachment.pl>

From gsee000 at gmail.com  Thu Jun 21 14:59:01 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 21 Jun 2012 07:59:01 -0500
Subject: [R-SIG-Finance] PortfolioAnalytics
In-Reply-To: <7A9A87DD-D31B-42D7-9567-43FD4EC086C5@gmail.com>
References: <CAGDBHChmLSd+dA082afVN1HWbGQxcEjfZ_uPgCY+OhWeeRH9eg@mail.gmail.com>
	<4FE04A5B.3080002@braverock.com>
	<CAGDBHCg3+mgi4Aj7aEWi3AiKMeq3W8+mnVfg8cpJXf2myDwHpw@mail.gmail.com>
	<8D279160-9D01-4DC9-8522-352682BDDF2F@gmail.com>
	<COL102-W345B9DD6A7A326EA5242198FFD0@phx.gbl>
	<7A9A87DD-D31B-42D7-9567-43FD4EC086C5@gmail.com>
Message-ID: <CA+xi=qbyk+pFK6OMFk_oTcsiy7tDVSXvy_M6ceNUCtQFRzh2Jg@mail.gmail.com>

Precisely what do you mean by "the SVN is not working?"  When you read
the thread that Julien provided, did you follow this link that I
provided in that thread?
http://stackoverflow.com/questions/11105131/cannot-install-r-forge-package-using-install-packages

R-Forge does not build packages for old versions of R.  You have to
build it yourself.
If it really is an SVN problem, then R-sig-finance is not the best place to ask.

HTH,
Garrett

On Thu, Jun 21, 2012 at 7:21 AM, Pierre-Alexandr des Mazis
<p.desmazis at gmail.com> wrote:
> The SVN is not working on my side.
>
> Do you think I could find any Orr package zip for R 2.12?
>
> I am not very familiar with the building process .
>
> Regards
>
> Pierre-Alexandre des Mazis
> + 447 779 171 499
>
> On 21 Jun 2012, at 12:04, julien cuisinier <j_cuisinier at hotmail.com> wrote:
>
>> Please do some research before posting:
>> http://r.789695.n4.nabble.com/Where-to-obtain-version-of-PortfolioAnalytics-package-installable-on-R-2-15-td4633724.html
>>
>> Same comment would be valid for Juan's post yesterday asking about the RExcel, half a minute googling would have told him how to extract a tar.gz file, even on Windows
>>
>> seems there have been some issues with the build as Garret mentioned, you might have to build it yourself. If you do please share with the list
>>
>> Rgds,
>> Julien
>>
>>
>>
>>
>>
>> > From: p.desmazis at gmail.com
>> > Date: Thu, 21 Jun 2012 11:42:09 +0100
>> > To: r-sig-finance at r-project.org
>> > Subject: [R-SIG-Finance] PortfolioAnalytics
>> >
>> > Hi
>> >
>> > I was looking for PortfolioAnalytics package zip but could not find it on the web.
>> >
>> > Can you please help on that
>> >
>> > Thank you
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions should go.
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From p.desmazis at gmail.com  Thu Jun 21 15:19:01 2012
From: p.desmazis at gmail.com (Pierre-Alexandr des Mazis)
Date: Thu, 21 Jun 2012 14:19:01 +0100
Subject: [R-SIG-Finance] PortfolioAnalytics
In-Reply-To: <CA+xi=qbyk+pFK6OMFk_oTcsiy7tDVSXvy_M6ceNUCtQFRzh2Jg@mail.gmail.com>
References: <CAGDBHChmLSd+dA082afVN1HWbGQxcEjfZ_uPgCY+OhWeeRH9eg@mail.gmail.com>
	<4FE04A5B.3080002@braverock.com>
	<CAGDBHCg3+mgi4Aj7aEWi3AiKMeq3W8+mnVfg8cpJXf2myDwHpw@mail.gmail.com>
	<8D279160-9D01-4DC9-8522-352682BDDF2F@gmail.com>
	<COL102-W345B9DD6A7A326EA5242198FFD0@phx.gbl>
	<7A9A87DD-D31B-42D7-9567-43FD4EC086C5@gmail.com>
	<CA+xi=qbyk+pFK6OMFk_oTcsiy7tDVSXvy_M6ceNUCtQFRzh2Jg@mail.gmail.com>
Message-ID: <BEC69270-AA8F-4217-8C25-6637E35D8A4C@gmail.com>

Hi

I used SVN with Cygwin to checkout the project but host name could not be "reached".


Regards

Pierre-Alexandre des Mazis
+ 447 779 171 499

On 21 Jun 2012, at 13:59, G See <gsee000 at gmail.com> wrote:

> Precisely what do you mean by "the SVN is not working?"  When you read
> the thread that Julien provided, did you follow this link that I
> provided in that thread?
> http://stackoverflow.com/questions/11105131/cannot-install-r-forge-package-using-install-packages
> 
> R-Forge does not build packages for old versions of R.  You have to
> build it yourself.
> If it really is an SVN problem, then R-sig-finance is not the best place to ask.
> 
> HTH,
> Garrett
> 
> On Thu, Jun 21, 2012 at 7:21 AM, Pierre-Alexandr des Mazis
> <p.desmazis at gmail.com> wrote:
>> The SVN is not working on my side.
>> 
>> Do you think I could find any Orr package zip for R 2.12?
>> 
>> I am not very familiar with the building process .
>> 
>> Regards
>> 
>> Pierre-Alexandre des Mazis
>> + 447 779 171 499
>> 
>> On 21 Jun 2012, at 12:04, julien cuisinier <j_cuisinier at hotmail.com> wrote:
>> 
>>> Please do some research before posting:
>>> http://r.789695.n4.nabble.com/Where-to-obtain-version-of-PortfolioAnalytics-package-installable-on-R-2-15-td4633724.html
>>> 
>>> Same comment would be valid for Juan's post yesterday asking about the RExcel, half a minute googling would have told him how to extract a tar.gz file, even on Windows
>>> 
>>> seems there have been some issues with the build as Garret mentioned, you might have to build it yourself. If you do please share with the list
>>> 
>>> Rgds,
>>> Julien
>>> 
>>> 
>>> 
>>> 
>>> 
>>>> From: p.desmazis at gmail.com
>>>> Date: Thu, 21 Jun 2012 11:42:09 +0100
>>>> To: r-sig-finance at r-project.org
>>>> Subject: [R-SIG-Finance] PortfolioAnalytics
>>>> 
>>>> Hi
>>>> 
>>>> I was looking for PortfolioAnalytics package zip but could not find it on the web.
>>>> 
>>>> Can you please help on that
>>>> 
>>>> Thank you
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions should go.
>> 
>>        [[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Thu Jun 21 16:13:09 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 21 Jun 2012 09:13:09 -0500
Subject: [R-SIG-Finance] PortfolioAnalytics
In-Reply-To: <BEC69270-AA8F-4217-8C25-6637E35D8A4C@gmail.com>
References: <CAGDBHChmLSd+dA082afVN1HWbGQxcEjfZ_uPgCY+OhWeeRH9eg@mail.gmail.com>
	<4FE04A5B.3080002@braverock.com>
	<CAGDBHCg3+mgi4Aj7aEWi3AiKMeq3W8+mnVfg8cpJXf2myDwHpw@mail.gmail.com>
	<8D279160-9D01-4DC9-8522-352682BDDF2F@gmail.com>
	<COL102-W345B9DD6A7A326EA5242198FFD0@phx.gbl>
	<7A9A87DD-D31B-42D7-9567-43FD4EC086C5@gmail.com>
	<CA+xi=qbyk+pFK6OMFk_oTcsiy7tDVSXvy_M6ceNUCtQFRzh2Jg@mail.gmail.com>
	<BEC69270-AA8F-4217-8C25-6637E35D8A4C@gmail.com>
Message-ID: <CA+xi=qZOj8TRHFrXxRwVM_f=PV_nydJY8WPEoYv5WZFTVE5FqA@mail.gmail.com>

I suggest that when you take this up on a Cygwin SVN list you show
*exactly* what commands you entered, and *exactly* what errors you
saw.

Or, you could just use TortoiseSVN.

On Thu, Jun 21, 2012 at 8:19 AM, Pierre-Alexandr des Mazis
<p.desmazis at gmail.com> wrote:
> Hi
>
> I used SVN with Cygwin to checkout the project but host name could not be "reached".
>
>
> Regards
>
> Pierre-Alexandre des Mazis
> + 447 779 171 499
>
> On 21 Jun 2012, at 13:59, G See <gsee000 at gmail.com> wrote:
>
>> Precisely what do you mean by "the SVN is not working?" ?When you read
>> the thread that Julien provided, did you follow this link that I
>> provided in that thread?
>> http://stackoverflow.com/questions/11105131/cannot-install-r-forge-package-using-install-packages
>>
>> R-Forge does not build packages for old versions of R. ?You have to
>> build it yourself.
>> If it really is an SVN problem, then R-sig-finance is not the best place to ask.
>>
>> HTH,
>> Garrett
>>
>> On Thu, Jun 21, 2012 at 7:21 AM, Pierre-Alexandr des Mazis
>> <p.desmazis at gmail.com> wrote:
>>> The SVN is not working on my side.
>>>
>>> Do you think I could find any Orr package zip for R 2.12?
>>>
>>> I am not very familiar with the building process .
>>>
>>> Regards
>>>
>>> Pierre-Alexandre des Mazis
>>> + 447 779 171 499
>>>
>>> On 21 Jun 2012, at 12:04, julien cuisinier <j_cuisinier at hotmail.com> wrote:
>>>
>>>> Please do some research before posting:
>>>> http://r.789695.n4.nabble.com/Where-to-obtain-version-of-PortfolioAnalytics-package-installable-on-R-2-15-td4633724.html
>>>>
>>>> Same comment would be valid for Juan's post yesterday asking about the RExcel, half a minute googling would have told him how to extract a tar.gz file, even on Windows
>>>>
>>>> seems there have been some issues with the build as Garret mentioned, you might have to build it yourself. If you do please share with the list
>>>>
>>>> Rgds,
>>>> Julien
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>> From: p.desmazis at gmail.com
>>>>> Date: Thu, 21 Jun 2012 11:42:09 +0100
>>>>> To: r-sig-finance at r-project.org
>>>>> Subject: [R-SIG-Finance] PortfolioAnalytics
>>>>>
>>>>> Hi
>>>>>
>>>>> I was looking for PortfolioAnalytics package zip but could not find it on the web.
>>>>>
>>>>> Can you please help on that
>>>>>
>>>>> Thank you
>>>>> _______________________________________________
>>>>> R-SIG-Finance at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>
>>> ? ? ? ?[[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.


From navalv at iimahd.ernet.in  Thu Jun 21 18:10:25 2012
From: navalv at iimahd.ernet.in (naval)
Date: Thu, 21 Jun 2012 09:10:25 -0700 (PDT)
Subject: [R-SIG-Finance] expanding window forecasting by rugarch nd rmgarch
Message-ID: <1340295025938-4634118.post@n4.nabble.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120621/55d357b3/attachment.pl>

From navalv at iimahd.ernet.in  Thu Jun 21 18:11:14 2012
From: navalv at iimahd.ernet.in (naval)
Date: Thu, 21 Jun 2012 09:11:14 -0700 (PDT)
Subject: [R-SIG-Finance] expanding window forecasting by rugarch nd rmgarch
Message-ID: <1340295074653-4634119.post@n4.nabble.com>

Dear alexios and other R users, 

I have the returns data on a firm named "ret" having 2767 observations
total. I want the one day ahead rollingt forecasts starting from 1001th day
and model is to be refit every 5 days. 
So my first 5 forecasts (i.e., for the 1001,1002,1003,1004 nd 1005th day)
will be based on first 1000 observations, next 5 forecasts(i.e., for the
1006 to 1010'th day) will be based on first 1005 observations and then next
5 days forecast will be based on first 1010 observations and this process
continues. 
I used following code 

spec= ugarchspec(variance.model= list(model = 'gjrGARCH')
,mean.model=list(armaOrder= c(0,0),include.mean= FALSE, archpow=2)) 
forecast<-ugarchroll(spec=spec,data=mkt_ret,forecast.length=1767,refit.every=5,
refit.window="recursive") 
 mkt_fcst<- as.data.frame(forecast) 

My questions are 
1) 
I suppose the f_sigma in mkt_fcst dataframe is forecasted volatality  but is
this the true forecast which I need according to above description of my
needed forecast 

2) If this f_sigma is the right forecasted vol then why i got only the
forecasts till 2765 days because next two days forecasts could be based on
the data till 2765 observations. 

3) Please suggest me how to formulate the right code for my needed forecast 

4) I will do assymetric DCC also using second series on market index
(mkt_ret) nd would need the DCC forecasts too in the same manner using
rmgarch. 


--
View this message in context: http://r.789695.n4.nabble.com/expanding-window-forecasting-by-rugarch-nd-rmgarch-tp4634119.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From p.desmazis at gmail.com  Thu Jun 21 18:25:44 2012
From: p.desmazis at gmail.com (Pierre-Alexandr des Mazis)
Date: Thu, 21 Jun 2012 17:25:44 +0100
Subject: [R-SIG-Finance] PortfolioAnalytics
In-Reply-To: <CA+xi=qZOj8TRHFrXxRwVM_f=PV_nydJY8WPEoYv5WZFTVE5FqA@mail.gmail.com>
References: <CAGDBHChmLSd+dA082afVN1HWbGQxcEjfZ_uPgCY+OhWeeRH9eg@mail.gmail.com>
	<4FE04A5B.3080002@braverock.com>
	<CAGDBHCg3+mgi4Aj7aEWi3AiKMeq3W8+mnVfg8cpJXf2myDwHpw@mail.gmail.com>
	<8D279160-9D01-4DC9-8522-352682BDDF2F@gmail.com>
	<COL102-W345B9DD6A7A326EA5242198FFD0@phx.gbl>
	<7A9A87DD-D31B-42D7-9567-43FD4EC086C5@gmail.com>
	<CA+xi=qbyk+pFK6OMFk_oTcsiy7tDVSXvy_M6ceNUCtQFRzh2Jg@mail.gmail.com>
	<BEC69270-AA8F-4217-8C25-6637E35D8A4C@gmail.com>
	<CA+xi=qZOj8TRHFrXxRwVM_f=PV_nydJY8WPEoYv5WZFTVE5FqA@mail.gmail.com>
Message-ID: <58539512-D54F-46FF-BB6A-BCFB0FC4B40F@gmail.com>

G,

I was just wondering if there is any alternative solution to the r-forge website. I must admit I am not too sure about how to build a package. I will code my own script to do the job.

Thanks anyway

Regards,






 

Pierre-Alexandre des Mazis
+ 447 779 171 499

On 21 Jun 2012, at 15:13, G See <gsee000 at gmail.com> wrote:

> I suggest that when you take this up on a Cygwin SVN list you show
> *exactly* what commands you entered, and *exactly* what errors you
> saw.
> 
> Or, you could just use TortoiseSVN.
> 
> On Thu, Jun 21, 2012 at 8:19 AM, Pierre-Alexandr des Mazis
> <p.desmazis at gmail.com> wrote:
>> Hi
>> 
>> I used SVN with Cygwin to checkout the project but host name could not be "reached".
>> 
>> 
>> Regards
>> 
>> Pierre-Alexandre des Mazis
>> + 447 779 171 499
>> 
>> On 21 Jun 2012, at 13:59, G See <gsee000 at gmail.com> wrote:
>> 
>>> Precisely what do you mean by "the SVN is not working?"  When you read
>>> the thread that Julien provided, did you follow this link that I
>>> provided in that thread?
>>> http://stackoverflow.com/questions/11105131/cannot-install-r-forge-package-using-install-packages
>>> 
>>> R-Forge does not build packages for old versions of R.  You have to
>>> build it yourself.
>>> If it really is an SVN problem, then R-sig-finance is not the best place to ask.
>>> 
>>> HTH,
>>> Garrett
>>> 
>>> On Thu, Jun 21, 2012 at 7:21 AM, Pierre-Alexandr des Mazis
>>> <p.desmazis at gmail.com> wrote:
>>>> The SVN is not working on my side.
>>>> 
>>>> Do you think I could find any Orr package zip for R 2.12?
>>>> 
>>>> I am not very familiar with the building process .
>>>> 
>>>> Regards
>>>> 
>>>> Pierre-Alexandre des Mazis
>>>> + 447 779 171 499
>>>> 
>>>> On 21 Jun 2012, at 12:04, julien cuisinier <j_cuisinier at hotmail.com> wrote:
>>>> 
>>>>> Please do some research before posting:
>>>>> http://r.789695.n4.nabble.com/Where-to-obtain-version-of-PortfolioAnalytics-package-installable-on-R-2-15-td4633724.html
>>>>> 
>>>>> Same comment would be valid for Juan's post yesterday asking about the RExcel, half a minute googling would have told him how to extract a tar.gz file, even on Windows
>>>>> 
>>>>> seems there have been some issues with the build as Garret mentioned, you might have to build it yourself. If you do please share with the list
>>>>> 
>>>>> Rgds,
>>>>> Julien
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>>> From: p.desmazis at gmail.com
>>>>>> Date: Thu, 21 Jun 2012 11:42:09 +0100
>>>>>> To: r-sig-finance at r-project.org
>>>>>> Subject: [R-SIG-Finance] PortfolioAnalytics
>>>>>> 
>>>>>> Hi
>>>>>> 
>>>>>> I was looking for PortfolioAnalytics package zip but could not find it on the web.
>>>>>> 
>>>>>> Can you please help on that
>>>>>> 
>>>>>> Thank you
>>>>>> _______________________________________________
>>>>>> R-SIG-Finance at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>> 
>>>>        [[alternative HTML version deleted]]
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Thu Jun 21 18:50:38 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 21 Jun 2012 11:50:38 -0500
Subject: [R-SIG-Finance] PortfolioAnalytics
In-Reply-To: <58539512-D54F-46FF-BB6A-BCFB0FC4B40F@gmail.com>
References: <CAGDBHChmLSd+dA082afVN1HWbGQxcEjfZ_uPgCY+OhWeeRH9eg@mail.gmail.com>
	<4FE04A5B.3080002@braverock.com>
	<CAGDBHCg3+mgi4Aj7aEWi3AiKMeq3W8+mnVfg8cpJXf2myDwHpw@mail.gmail.com>
	<8D279160-9D01-4DC9-8522-352682BDDF2F@gmail.com>
	<COL102-W345B9DD6A7A326EA5242198FFD0@phx.gbl>
	<7A9A87DD-D31B-42D7-9567-43FD4EC086C5@gmail.com>
	<CA+xi=qbyk+pFK6OMFk_oTcsiy7tDVSXvy_M6ceNUCtQFRzh2Jg@mail.gmail.com>
	<BEC69270-AA8F-4217-8C25-6637E35D8A4C@gmail.com>
	<CA+xi=qZOj8TRHFrXxRwVM_f=PV_nydJY8WPEoYv5WZFTVE5FqA@mail.gmail.com>
	<58539512-D54F-46FF-BB6A-BCFB0FC4B40F@gmail.com>
Message-ID: <CA+xi=qYSW6DESy+pzRGE7ROqhJmv0uryhEvO2d7VMMfwPj1eFw@mail.gmail.com>

The alternative to the r-forge *website* is SVN.  If you're going to
try to source files instead of building the package, you're on your
own.

I guess you could browse through the repository here,
https://r-forge.r-project.org/scm/viewvc.php/pkg/PortfolioAnalytics/?root=returnanalytics,
and click the "download" link for files you're interested in.  For
example, suppose you want the "charts.DE.R" file.  You can browse to
it, and click the download link which will bring you here
http://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/PortfolioAnalytics/R/charts.DE.R?root=returnanalytics

You can source that directly
source("http://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/PortfolioAnalytics/R/charts.DE.R?root=returnanalytics")

(You may have to replace https with http in the link)

Gooood luck with that,
Garrett

On Thu, Jun 21, 2012 at 11:25 AM, Pierre-Alexandr des Mazis
<p.desmazis at gmail.com> wrote:
> G,
>
> I was just wondering if there is any alternative solution to the r-forge website. I must admit I am not too sure about how to build a package. I will code my own script to do the job.
>
> Thanks anyway
>
> Regards,
>
>
>
>
>
>
>
>
> Pierre-Alexandre des Mazis
> + 447 779 171 499
>
> On 21 Jun 2012, at 15:13, G See <gsee000 at gmail.com> wrote:
>
>> I suggest that when you take this up on a Cygwin SVN list you show
>> *exactly* what commands you entered, and *exactly* what errors you
>> saw.
>>
>> Or, you could just use TortoiseSVN.
>>
>> On Thu, Jun 21, 2012 at 8:19 AM, Pierre-Alexandr des Mazis
>> <p.desmazis at gmail.com> wrote:
>>> Hi
>>>
>>> I used SVN with Cygwin to checkout the project but host name could not be "reached".
>>>
>>>
>>> Regards
>>>
>>> Pierre-Alexandre des Mazis
>>> + 447 779 171 499
>>>
>>> On 21 Jun 2012, at 13:59, G See <gsee000 at gmail.com> wrote:
>>>
>>>> Precisely what do you mean by "the SVN is not working?" ?When you read
>>>> the thread that Julien provided, did you follow this link that I
>>>> provided in that thread?
>>>> http://stackoverflow.com/questions/11105131/cannot-install-r-forge-package-using-install-packages
>>>>
>>>> R-Forge does not build packages for old versions of R. ?You have to
>>>> build it yourself.
>>>> If it really is an SVN problem, then R-sig-finance is not the best place to ask.
>>>>
>>>> HTH,
>>>> Garrett
>>>>
>>>> On Thu, Jun 21, 2012 at 7:21 AM, Pierre-Alexandr des Mazis
>>>> <p.desmazis at gmail.com> wrote:
>>>>> The SVN is not working on my side.
>>>>>
>>>>> Do you think I could find any Orr package zip for R 2.12?
>>>>>
>>>>> I am not very familiar with the building process .
>>>>>
>>>>> Regards
>>>>>
>>>>> Pierre-Alexandre des Mazis
>>>>> + 447 779 171 499
>>>>>
>>>>> On 21 Jun 2012, at 12:04, julien cuisinier <j_cuisinier at hotmail.com> wrote:
>>>>>
>>>>>> Please do some research before posting:
>>>>>> http://r.789695.n4.nabble.com/Where-to-obtain-version-of-PortfolioAnalytics-package-installable-on-R-2-15-td4633724.html
>>>>>>
>>>>>> Same comment would be valid for Juan's post yesterday asking about the RExcel, half a minute googling would have told him how to extract a tar.gz file, even on Windows
>>>>>>
>>>>>> seems there have been some issues with the build as Garret mentioned, you might have to build it yourself. If you do please share with the list
>>>>>>
>>>>>> Rgds,
>>>>>> Julien
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>> From: p.desmazis at gmail.com
>>>>>>> Date: Thu, 21 Jun 2012 11:42:09 +0100
>>>>>>> To: r-sig-finance at r-project.org
>>>>>>> Subject: [R-SIG-Finance] PortfolioAnalytics
>>>>>>>
>>>>>>> Hi
>>>>>>>
>>>>>>> I was looking for PortfolioAnalytics package zip but could not find it on the web.
>>>>>>>
>>>>>>> Can you please help on that
>>>>>>>
>>>>>>> Thank you
>>>>>>> _______________________________________________
>>>>>>> R-SIG-Finance at r-project.org mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>>>
>>>>> ? ? ? ?[[alternative HTML version deleted]]
>>>>>
>>>>> _______________________________________________
>>>>> R-SIG-Finance at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>> -- Also note that this is not the r-help list where general R questions should go.


From p.desmazis at gmail.com  Thu Jun 21 19:03:29 2012
From: p.desmazis at gmail.com (Pierre-Alexandr des Mazis)
Date: Thu, 21 Jun 2012 18:03:29 +0100
Subject: [R-SIG-Finance] PortfolioAnalytics
In-Reply-To: <CA+xi=qYSW6DESy+pzRGE7ROqhJmv0uryhEvO2d7VMMfwPj1eFw@mail.gmail.com>
References: <CAGDBHChmLSd+dA082afVN1HWbGQxcEjfZ_uPgCY+OhWeeRH9eg@mail.gmail.com>
	<4FE04A5B.3080002@braverock.com>
	<CAGDBHCg3+mgi4Aj7aEWi3AiKMeq3W8+mnVfg8cpJXf2myDwHpw@mail.gmail.com>
	<8D279160-9D01-4DC9-8522-352682BDDF2F@gmail.com>
	<COL102-W345B9DD6A7A326EA5242198FFD0@phx.gbl>
	<7A9A87DD-D31B-42D7-9567-43FD4EC086C5@gmail.com>
	<CA+xi=qbyk+pFK6OMFk_oTcsiy7tDVSXvy_M6ceNUCtQFRzh2Jg@mail.gmail.com>
	<BEC69270-AA8F-4217-8C25-6637E35D8A4C@gmail.com>
	<CA+xi=qZOj8TRHFrXxRwVM_f=PV_nydJY8WPEoYv5WZFTVE5FqA@mail.gmail.com>
	<58539512-D54F-46FF-BB6A-BCFB0FC4B40F@gmail.com>
	<CA+xi=qYSW6DESy+pzRGE7ROqhJmv0uryhEvO2d7VMMfwPj1eFw@mail.gmail.com>
Message-ID: <041D958F-EB8F-40DD-BB1A-04A75B952E65@gmail.com>

Thank you very much G see 

I will dig into the subject once home and hopefully will be able to find a solution. 

regards

Pierre-Alexandre des Mazis
+ 447 779 171 499

On 21 Jun 2012, at 17:50, G See <gsee000 at gmail.com> wrote:

> The alternative to the r-forge *website* is SVN.  If you're going to
> try to source files instead of building the package, you're on your
> own.
> 
> I guess you could browse through the repository here,
> https://r-forge.r-project.org/scm/viewvc.php/pkg/PortfolioAnalytics/?root=returnanalytics,
> and click the "download" link for files you're interested in.  For
> example, suppose you want the "charts.DE.R" file.  You can browse to
> it, and click the download link which will bring you here
> http://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/PortfolioAnalytics/R/charts.DE.R?root=returnanalytics
> 
> You can source that directly
> source("http://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/PortfolioAnalytics/R/charts.DE.R?root=returnanalytics")
> 
> (You may have to replace https with http in the link)
> 
> Gooood luck with that,
> Garrett
> 
> On Thu, Jun 21, 2012 at 11:25 AM, Pierre-Alexandr des Mazis
> <p.desmazis at gmail.com> wrote:
>> G,
>> 
>> I was just wondering if there is any alternative solution to the r-forge website. I must admit I am not too sure about how to build a package. I will code my own script to do the job.
>> 
>> Thanks anyway
>> 
>> Regards,
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> Pierre-Alexandre des Mazis
>> + 447 779 171 499
>> 
>> On 21 Jun 2012, at 15:13, G See <gsee000 at gmail.com> wrote:
>> 
>>> I suggest that when you take this up on a Cygwin SVN list you show
>>> *exactly* what commands you entered, and *exactly* what errors you
>>> saw.
>>> 
>>> Or, you could just use TortoiseSVN.
>>> 
>>> On Thu, Jun 21, 2012 at 8:19 AM, Pierre-Alexandr des Mazis
>>> <p.desmazis at gmail.com> wrote:
>>>> Hi
>>>> 
>>>> I used SVN with Cygwin to checkout the project but host name could not be "reached".
>>>> 
>>>> 
>>>> Regards
>>>> 
>>>> Pierre-Alexandre des Mazis
>>>> + 447 779 171 499
>>>> 
>>>> On 21 Jun 2012, at 13:59, G See <gsee000 at gmail.com> wrote:
>>>> 
>>>>> Precisely what do you mean by "the SVN is not working?"  When you read
>>>>> the thread that Julien provided, did you follow this link that I
>>>>> provided in that thread?
>>>>> http://stackoverflow.com/questions/11105131/cannot-install-r-forge-package-using-install-packages
>>>>> 
>>>>> R-Forge does not build packages for old versions of R.  You have to
>>>>> build it yourself.
>>>>> If it really is an SVN problem, then R-sig-finance is not the best place to ask.
>>>>> 
>>>>> HTH,
>>>>> Garrett
>>>>> 
>>>>> On Thu, Jun 21, 2012 at 7:21 AM, Pierre-Alexandr des Mazis
>>>>> <p.desmazis at gmail.com> wrote:
>>>>>> The SVN is not working on my side.
>>>>>> 
>>>>>> Do you think I could find any Orr package zip for R 2.12?
>>>>>> 
>>>>>> I am not very familiar with the building process .
>>>>>> 
>>>>>> Regards
>>>>>> 
>>>>>> Pierre-Alexandre des Mazis
>>>>>> + 447 779 171 499
>>>>>> 
>>>>>> On 21 Jun 2012, at 12:04, julien cuisinier <j_cuisinier at hotmail.com> wrote:
>>>>>> 
>>>>>>> Please do some research before posting:
>>>>>>> http://r.789695.n4.nabble.com/Where-to-obtain-version-of-PortfolioAnalytics-package-installable-on-R-2-15-td4633724.html
>>>>>>> 
>>>>>>> Same comment would be valid for Juan's post yesterday asking about the RExcel, half a minute googling would have told him how to extract a tar.gz file, even on Windows
>>>>>>> 
>>>>>>> seems there have been some issues with the build as Garret mentioned, you might have to build it yourself. If you do please share with the list
>>>>>>> 
>>>>>>> Rgds,
>>>>>>> Julien
>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>>>> From: p.desmazis at gmail.com
>>>>>>>> Date: Thu, 21 Jun 2012 11:42:09 +0100
>>>>>>>> To: r-sig-finance at r-project.org
>>>>>>>> Subject: [R-SIG-Finance] PortfolioAnalytics
>>>>>>>> 
>>>>>>>> Hi
>>>>>>>> 
>>>>>>>> I was looking for PortfolioAnalytics package zip but could not find it on the web.
>>>>>>>> 
>>>>>>>> Can you please help on that
>>>>>>>> 
>>>>>>>> Thank you
>>>>>>>> _______________________________________________
>>>>>>>> R-SIG-Finance at r-project.org mailing list
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>>>> 
>>>>>>        [[alternative HTML version deleted]]
>>>>>> 
>>>>>> _______________________________________________
>>>>>> R-SIG-Finance at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>>> -- Also note that this is not the r-help list where general R questions should go.


From alexios at 4dscape.com  Thu Jun 21 22:22:07 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Thu, 21 Jun 2012 21:22:07 +0100
Subject: [R-SIG-Finance] expanding window forecasting by rugarch nd
	rmgarch
In-Reply-To: <1340295074653-4634119.post@n4.nabble.com>
References: <1340295074653-4634119.post@n4.nabble.com>
Message-ID: <4FE3826F.8040903@4dscape.com>

Please do not post more than once (this is your 3rd duplicate post in 24 
hours). Your original email was received this morning and this is an 
open source software mailing list...someone MIGHT reply when they have 
the time and inclination.

If you read the documentation on ugarchrolll (the 'Details' section) it 
explains how the number of periods to forecast are calculated (i.e. 
since 2767 is not divisible by 5 it takes the nearest number divisible 
by 5 less than 2767). If you search previous posts to the mailing list 
you will also find hints as to how to use the function and that it only 
produces forecast to the extend of available out of sample data. For 
more complex setups use ugarchfit+ugarchforecast based on your own 
loop/rolling scheme.

-Alexios

PS Do have the courtesy of signing your emails with your name.

On 21/06/2012 17:11, naval wrote:
> Dear alexios and other R users,
>
> I have the returns data on a firm named "ret" having 2767 observations
> total. I want the one day ahead rollingt forecasts starting from 1001th day
> and model is to be refit every 5 days.
> So my first 5 forecasts (i.e., for the 1001,1002,1003,1004 nd 1005th day)
> will be based on first 1000 observations, next 5 forecasts(i.e., for the
> 1006 to 1010'th day) will be based on first 1005 observations and then next
> 5 days forecast will be based on first 1010 observations and this process
> continues.
> I used following code
>
> spec= ugarchspec(variance.model= list(model = 'gjrGARCH')
> ,mean.model=list(armaOrder= c(0,0),include.mean= FALSE, archpow=2))
> forecast<-ugarchroll(spec=spec,data=mkt_ret,forecast.length=1767,refit.every=5,
> refit.window="recursive")
>   mkt_fcst<- as.data.frame(forecast)
>
> My questions are
> 1)
> I suppose the f_sigma in mkt_fcst dataframe is forecasted volatality  but is
> this the true forecast which I need according to above description of my
> needed forecast
>
> 2) If this f_sigma is the right forecasted vol then why i got only the
> forecasts till 2765 days because next two days forecasts could be based on
> the data till 2765 observations.
>
> 3) Please suggest me how to formulate the right code for my needed forecast
>
> 4) I will do assymetric DCC also using second series on market index
> (mkt_ret) nd would need the DCC forecasts too in the same manner using
> rmgarch.
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/expanding-window-forecasting-by-rugarch-nd-rmgarch-tp4634119.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From zhaodong.wang at fiotion.com  Fri Jun 22 05:47:21 2012
From: zhaodong.wang at fiotion.com (Fiotion Richard)
Date: Thu, 21 Jun 2012 22:47:21 -0500
Subject: [R-SIG-Finance] a problem about using quantstrat: add.Indicators
	and applySignals in BBband
Message-ID: <4fe3eacb.64ad320a.50f2.ffffc02e@mx.google.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120621/14bb968c/attachment.pl>

From alexandre.cesari at gmail.com  Fri Jun 22 11:20:55 2012
From: alexandre.cesari at gmail.com (Alexandre CESARI)
Date: Fri, 22 Jun 2012 11:20:55 +0200
Subject: [R-SIG-Finance] Rbbg Java out-of-heap-space error (potential
 cause: response_cache)
In-Reply-To: <CAA3Wa=vmvDyZFiEsdtBnwF_ZDdzH-yC9RgYRcYEE-K=Fa-QejA@mail.gmail.com>
References: <CAA6bQ61bgXm=+iXeUPmASHueEShk1qO+xuPU0uPxd4cXjLRsxw@mail.gmail.com>
	<CAA3Wa=vmvDyZFiEsdtBnwF_ZDdzH-yC9RgYRcYEE-K=Fa-QejA@mail.gmail.com>
Message-ID: <CAA6bQ62XpZH4LBLmQVJBjkNWzMYfq7QgWPZ25x3c0VJasYUaPA@mail.gmail.com>

John,

Thanks for the info. I tested a slightly different version and that
seems to work for me. I don't know much about the BBG api but what I
did was simply to store the last reponse rather than adding it into an
array. Given the code, I'm not sure that caching is all that useful.

Alexandre


On Wed, Jun 20, 2012 at 1:39 PM, John Laing <john.laing at gmail.com> wrote:
> Alexandre,
>
> The Java side of the Rbbg package caches all data responses during a
> session. That's probably what's responsible for the memory issues
> you're experiencing. This is a known bug that I haven't had a chance
> to fix, but if you'd like to submit a patch I would happily accept.
> The latest source is on my github at
> http://github.com/johnlaing/blpwrapper. (I assume the "old fork" you
> refer to is Jeff Davis's version, tweaked to work on Linux.)
>
> The findata.org site hosts Windows binaries, so you should not specify
> type = "source" from within R. This works just fine:
> install.packages("Rbbg", repos = "http://r.findata.org")
>
> -John
>
> On Wed, Jun 20, 2012 at 4:23 AM, Alexandre CESARI
> <alexandre.cesari at gmail.com> wrote:
>> Hi,
>>
>> I have been getting out of memory errors with RBloomberg and now Rbbg.
>> I'd like to manually fix the package but I cannot get my hand on the
>> source code, except on an old fork found on github. Could someone
>> point me where I can the latest source? Standard package download
>> within R with type source is not working and findata.org seems to be
>> dead following the package name change.
>>
>> Regards,
>>
>> Alexandre
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.


From pierrelap at gmail.com  Fri Jun 22 11:48:37 2012
From: pierrelap at gmail.com (Pierre Lapointe)
Date: Fri, 22 Jun 2012 05:48:37 -0400
Subject: [R-SIG-Finance] Rbbg Java out-of-heap-space error (potential
 cause: response_cache)
In-Reply-To: <CAA6bQ62XpZH4LBLmQVJBjkNWzMYfq7QgWPZ25x3c0VJasYUaPA@mail.gmail.com>
References: <CAA6bQ61bgXm=+iXeUPmASHueEShk1qO+xuPU0uPxd4cXjLRsxw@mail.gmail.com>
	<CAA3Wa=vmvDyZFiEsdtBnwF_ZDdzH-yC9RgYRcYEE-K=Fa-QejA@mail.gmail.com>
	<CAA6bQ62XpZH4LBLmQVJBjkNWzMYfq7QgWPZ25x3c0VJasYUaPA@mail.gmail.com>
Message-ID: <CAHjr2U_LxKf9oymm2-3ih3ZmU=STFCNeGQstwRUuviRqUVPWDg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120622/d7915912/attachment.pl>

From s.n.stoyanov at gmail.com  Fri Jun 22 16:02:48 2012
From: s.n.stoyanov at gmail.com (stoyan.stoyanov)
Date: Fri, 22 Jun 2012 07:02:48 -0700 (PDT)
Subject: [R-SIG-Finance] RUGARCH rolling forecast using external regressors
Message-ID: <1340373768511-4634210.post@n4.nabble.com>

Hi there,

First of all, thanks for an amazing package! This is cutting edge and it
really does wonders.
*3 questions:*
1. I am using the rugarch package to fit a TARCH model to high frequency
single stock returns data (2000 obs in the example below), and forecast
conditional variance. Everything works fine until the moment when I try to
do a rolling forecast using external regressors. Examples of regressors I
have tried are implied volatility and an earnings event dummy variable. I
noticed that someone else on the forum had a similar issue and was wondering
whether there might be a glitch in the package or am I doing something
wrong?
Below are the relevant parts of the code, sample dataset and error message.
Hope someone can help!

2. I am not convinced whether the fact that my TARCH alpha, beta and eta
coefficients sum up to more than 1 means that I could get a non-stationary
process. I know that with GARCH the coefficients sum should be restricted to
<= 1 but am confused when it comes to the eta coefficient. (fit output at
the bottom)

3. What exactly does variance targeting do. (Feel free to ignore this
question)
Thank you in advance.

*#Code *
spec<-ugarchspec(variance.model = list(model = "fGARCH", garchOrder =
c(1,1),
                        submodel = "TGARCH", external.regressors =
regressors, variance.targeting = TRUE),
                 mean.model = list (armaOrder = c(1,1), include.mean = TRUE,
archm = FALSE, 
                        archpow = 1, arfima = FALSE, external.regressors =
NULL, archex = FALSE),
                 distribution.model = "std", start.pars = list(), fixed.pars
= list())

fit<-ugarchfit(spec, data, out.sample = 0, solver = "solnp", solver.control
= list(), 
               fit.control = list(stationarity = 1, fixed.se = 0, scale =
0))

roll=ugarchroll(spec, data, n.ahead = 1, forecast.length = 200, refit.every
= 25,
           refit.window = "moving", parallel = FALSE,
           parallel.control = list(pkg = c("multicore", "snowfall"), cores =
2), solver = "solnp",
           fit.control = list(), solver.control = list(), calculate.VaR =
TRUE,
           VaR.alpha = c(0.01, 0.05))

*#Error message*
...estimating refit windows...

Done!...all converged.
Error in fmexdata[[i]] : subscript out of bounds

#Again, my suspicion is that the rolling forecast function messes up because
of the external regressors. It works perfectly fine without them...

*---------------------------------*
*          GARCH Model Fit        *
*---------------------------------*

Conditional Variance Dynamics 	
-----------------------------------
GARCH Model	: fGARCH(1,1)
fGARCH Sub-Model	: TGARCH
Mean Model	: ARFIMA(1,0,1)
Distribution	: std 

Optimal Parameters
------------------------------------
        Estimate  Std. Error   t value Pr(>|t|)
mu      0.000015    0.000002   7.59458   0.0000
ar1     0.183552    0.008229  22.30584   0.0000
ma1    -0.223085    0.008187 -27.24730   0.0000
alpha1  0.079457    0.003750  21.18601   0.0000
beta1   0.931504    0.003484 267.37350   0.0000
eta11   0.030469    0.005535   5.50526   0.0000
vxreg1  0.000000    0.000007   0.00226   0.9982
shape   6.453012    0.280138  23.03508   0.0000
omega   0.000002          NA        NA       NA

Robust Standard Errors:
        Estimate  Std. Error    t value Pr(>|t|)
mu      0.000015    0.000003   4.317851 0.000016
ar1     0.183552    0.023880   7.686537 0.000000
ma1    -0.223085    0.023552  -9.472028 0.000000
alpha1  0.079457    0.005819  13.654150 0.000000
beta1   0.931504    0.005007 186.045420 0.000000
eta11   0.030469    0.003464   8.796946 0.000000
vxreg1  0.000000    0.000010   0.001628 0.998701
shape   6.453012    0.360340  17.908115 0.000000
omega   0.000002          NA         NA       NA

LogLikelihood : 127062.8 

http://r.789695.n4.nabble.com/file/n4634210/regressors.csv regressors.csv
http://r.789695.n4.nabble.com/file/n4634210/data.csv data.csv 

--
View this message in context: http://r.789695.n4.nabble.com/RUGARCH-rolling-forecast-using-external-regressors-tp4634210.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From s.n.stoyanov at gmail.com  Fri Jun 22 16:04:34 2012
From: s.n.stoyanov at gmail.com (stoyan.stoyanov)
Date: Fri, 22 Jun 2012 07:04:34 -0700 (PDT)
Subject: [R-SIG-Finance] RUGARCH rolling forecast using external
	regressors
In-Reply-To: <1340373768511-4634210.post@n4.nabble.com>
References: <1340373768511-4634210.post@n4.nabble.com>
Message-ID: <1340373874534-4634211.post@n4.nabble.com>

Make that 19220 obs.

--
View this message in context: http://r.789695.n4.nabble.com/RUGARCH-rolling-forecast-using-external-regressors-tp4634210p4634211.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Fri Jun 22 16:52:11 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Fri, 22 Jun 2012 15:52:11 +0100
Subject: [R-SIG-Finance] RUGARCH rolling forecast using external
	regressors
In-Reply-To: <1340373768511-4634210.post@n4.nabble.com>
References: <1340373768511-4634210.post@n4.nabble.com>
Message-ID: <4FE4869B.9080904@4dscape.com>

Hi Stoyan,

1. Yes, that was definitely a bug, thanks for reporting. I have uploaded 
a fix to R-Forge (rev.423)...should be available to download in the next 
check/build.

2. Use the  "persistence" method on the fitted object:
 >persistence(fit)
persistence
    0.991474
The TARCH model persistence is NOT \alpha+\beta+\eta. See the vignette 
for the details (from the fGARCH model equation on persistence). Note 
that in all models of the rugarch package, the persistence constraint is 
turned ON by default (via the fit.control option).

3. Again, please read the vignette which clearly explains variance 
targeting (e.g. see page 6 equation 10 and the reference to the Engle 
and Mezrich (1995) paper on page 5).


HTH.

Regards,

Alexios


On 22/06/2012 15:02, stoyan.stoyanov wrote:
> Hi there,
>
> First of all, thanks for an amazing package! This is cutting edge and it
> really does wonders.
> *3 questions:*
> 1. I am using the rugarch package to fit a TARCH model to high frequency
> single stock returns data (2000 obs in the example below), and forecast
> conditional variance. Everything works fine until the moment when I try to
> do a rolling forecast using external regressors. Examples of regressors I
> have tried are implied volatility and an earnings event dummy variable. I
> noticed that someone else on the forum had a similar issue and was wondering
> whether there might be a glitch in the package or am I doing something
> wrong?
> Below are the relevant parts of the code, sample dataset and error message.
> Hope someone can help!
>
> 2. I am not convinced whether the fact that my TARCH alpha, beta and eta
> coefficients sum up to more than 1 means that I could get a non-stationary
> process. I know that with GARCH the coefficients sum should be restricted to
> <= 1 but am confused when it comes to the eta coefficient. (fit output at
> the bottom)
>
> 3. What exactly does variance targeting do. (Feel free to ignore this
> question)
> Thank you in advance.
>
> *#Code *
> spec<-ugarchspec(variance.model = list(model = "fGARCH", garchOrder =
> c(1,1),
>                          submodel = "TGARCH", external.regressors =
> regressors, variance.targeting = TRUE),
>                   mean.model = list (armaOrder = c(1,1), include.mean = TRUE,
> archm = FALSE,
>                          archpow = 1, arfima = FALSE, external.regressors =
> NULL, archex = FALSE),
>                   distribution.model = "std", start.pars = list(), fixed.pars
> = list())
>
> fit<-ugarchfit(spec, data, out.sample = 0, solver = "solnp", solver.control
> = list(),
>                 fit.control = list(stationarity = 1, fixed.se = 0, scale =
> 0))
>
> roll=ugarchroll(spec, data, n.ahead = 1, forecast.length = 200, refit.every
> = 25,
>             refit.window = "moving", parallel = FALSE,
>             parallel.control = list(pkg = c("multicore", "snowfall"), cores =
> 2), solver = "solnp",
>             fit.control = list(), solver.control = list(), calculate.VaR =
> TRUE,
>             VaR.alpha = c(0.01, 0.05))
>
> *#Error message*
> ...estimating refit windows...
>
> Done!...all converged.
> Error in fmexdata[[i]] : subscript out of bounds
>
> #Again, my suspicion is that the rolling forecast function messes up because
> of the external regressors. It works perfectly fine without them...
>
> *---------------------------------*
> *          GARCH Model Fit        *
> *---------------------------------*
>
> Conditional Variance Dynamics 	
> -----------------------------------
> GARCH Model	: fGARCH(1,1)
> fGARCH Sub-Model	: TGARCH
> Mean Model	: ARFIMA(1,0,1)
> Distribution	: std
>
> Optimal Parameters
> ------------------------------------
>          Estimate  Std. Error   t value Pr(>|t|)
> mu      0.000015    0.000002   7.59458   0.0000
> ar1     0.183552    0.008229  22.30584   0.0000
> ma1    -0.223085    0.008187 -27.24730   0.0000
> alpha1  0.079457    0.003750  21.18601   0.0000
> beta1   0.931504    0.003484 267.37350   0.0000
> eta11   0.030469    0.005535   5.50526   0.0000
> vxreg1  0.000000    0.000007   0.00226   0.9982
> shape   6.453012    0.280138  23.03508   0.0000
> omega   0.000002          NA        NA       NA
>
> Robust Standard Errors:
>          Estimate  Std. Error    t value Pr(>|t|)
> mu      0.000015    0.000003   4.317851 0.000016
> ar1     0.183552    0.023880   7.686537 0.000000
> ma1    -0.223085    0.023552  -9.472028 0.000000
> alpha1  0.079457    0.005819  13.654150 0.000000
> beta1   0.931504    0.005007 186.045420 0.000000
> eta11   0.030469    0.003464   8.796946 0.000000
> vxreg1  0.000000    0.000010   0.001628 0.998701
> shape   6.453012    0.360340  17.908115 0.000000
> omega   0.000002          NA         NA       NA
>
> LogLikelihood : 127062.8
>
> http://r.789695.n4.nabble.com/file/n4634210/regressors.csv regressors.csv
> http://r.789695.n4.nabble.com/file/n4634210/data.csv data.csv
>
> --
> View this message in context: http://r.789695.n4.nabble.com/RUGARCH-rolling-forecast-using-external-regressors-tp4634210.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From wlmr at zhaw.ch  Sat Jun 23 15:54:18 2012
From: wlmr at zhaw.ch (Wildi Marc (wlmr))
Date: Sat, 23 Jun 2012 13:54:18 +0000
Subject: [R-SIG-Finance] RUGARCH rolling forecast using external
 regressors
In-Reply-To: <1340373768511-4634210.post@n4.nabble.com>
References: <1340373768511-4634210.post@n4.nabble.com>
Message-ID: <E2339A3600811248AB525B8FAB3A1BCE7B53B4A9@srv-mail-101.zhaw.ch>

Off topic but nevertheless potentially useful: Look at your ARMA model parameters: AR and MA cancel on both sides of the equation. Typically t-tests (variances) are totally spurious in such a case. Try a white noise model: forecasts will look less sexy but it's likely that they'll be more accurate (in a mean-square perspective).

Marc

________________________________________
Von: r-sig-finance-bounces at r-project.org [r-sig-finance-bounces at r-project.org]&quot; im Auftrag von &quot;stoyan.stoyanov [s.n.stoyanov at gmail.com]
Gesendet: Freitag, 22. Juni 2012 16:02
An: r-sig-finance at r-project.org
Betreff: [R-SIG-Finance] RUGARCH rolling forecast using external regressors

Hi there,

First of all, thanks for an amazing package! This is cutting edge and it
really does wonders.
*3 questions:*
1. I am using the rugarch package to fit a TARCH model to high frequency
single stock returns data (2000 obs in the example below), and forecast
conditional variance. Everything works fine until the moment when I try to
do a rolling forecast using external regressors. Examples of regressors I
have tried are implied volatility and an earnings event dummy variable. I
noticed that someone else on the forum had a similar issue and was wondering
whether there might be a glitch in the package or am I doing something
wrong?
Below are the relevant parts of the code, sample dataset and error message.
Hope someone can help!

2. I am not convinced whether the fact that my TARCH alpha, beta and eta
coefficients sum up to more than 1 means that I could get a non-stationary
process. I know that with GARCH the coefficients sum should be restricted to
<= 1 but am confused when it comes to the eta coefficient. (fit output at
the bottom)

3. What exactly does variance targeting do. (Feel free to ignore this
question)
Thank you in advance.

*#Code *
spec<-ugarchspec(variance.model = list(model = "fGARCH", garchOrder =
c(1,1),
                        submodel = "TGARCH", external.regressors =
regressors, variance.targeting = TRUE),
                 mean.model = list (armaOrder = c(1,1), include.mean = TRUE,
archm = FALSE,
                        archpow = 1, arfima = FALSE, external.regressors =
NULL, archex = FALSE),
                 distribution.model = "std", start.pars = list(), fixed.pars
= list())

fit<-ugarchfit(spec, data, out.sample = 0, solver = "solnp", solver.control
= list(),
               fit.control = list(stationarity = 1, fixed.se = 0, scale =
0))

roll=ugarchroll(spec, data, n.ahead = 1, forecast.length = 200, refit.every
= 25,
           refit.window = "moving", parallel = FALSE,
           parallel.control = list(pkg = c("multicore", "snowfall"), cores =
2), solver = "solnp",
           fit.control = list(), solver.control = list(), calculate.VaR =
TRUE,
           VaR.alpha = c(0.01, 0.05))

*#Error message*
...estimating refit windows...

Done!...all converged.
Error in fmexdata[[i]] : subscript out of bounds

#Again, my suspicion is that the rolling forecast function messes up because
of the external regressors. It works perfectly fine without them...

*---------------------------------*
*          GARCH Model Fit        *
*---------------------------------*

Conditional Variance Dynamics
-----------------------------------
GARCH Model     : fGARCH(1,1)
fGARCH Sub-Model        : TGARCH
Mean Model      : ARFIMA(1,0,1)
Distribution    : std

Optimal Parameters
------------------------------------
        Estimate  Std. Error   t value Pr(>|t|)
mu      0.000015    0.000002   7.59458   0.0000
ar1     0.183552    0.008229  22.30584   0.0000
ma1    -0.223085    0.008187 -27.24730   0.0000
alpha1  0.079457    0.003750  21.18601   0.0000
beta1   0.931504    0.003484 267.37350   0.0000
eta11   0.030469    0.005535   5.50526   0.0000
vxreg1  0.000000    0.000007   0.00226   0.9982
shape   6.453012    0.280138  23.03508   0.0000
omega   0.000002          NA        NA       NA

Robust Standard Errors:
        Estimate  Std. Error    t value Pr(>|t|)
mu      0.000015    0.000003   4.317851 0.000016
ar1     0.183552    0.023880   7.686537 0.000000
ma1    -0.223085    0.023552  -9.472028 0.000000
alpha1  0.079457    0.005819  13.654150 0.000000
beta1   0.931504    0.005007 186.045420 0.000000
eta11   0.030469    0.003464   8.796946 0.000000
vxreg1  0.000000    0.000010   0.001628 0.998701
shape   6.453012    0.360340  17.908115 0.000000
omega   0.000002          NA         NA       NA

LogLikelihood : 127062.8

http://r.789695.n4.nabble.com/file/n4634210/regressors.csv regressors.csv
http://r.789695.n4.nabble.com/file/n4634210/data.csv data.csv

--
View this message in context: http://r.789695.n4.nabble.com/RUGARCH-rolling-forecast-using-external-regressors-tp4634210.html
Sent from the Rmetrics mailing list archive at Nabble.com.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

From e.daadmehr at yahoo.com  Sat Jun 23 22:29:13 2012
From: e.daadmehr at yahoo.com (Elham Daadmehr)
Date: Sat, 23 Jun 2012 13:29:13 -0700 (PDT)
Subject: [R-SIG-Finance] Compare forecasts
Message-ID: <1340483353.87029.YahooMailNeo@web121401.mail.ne1.yahoo.com>

Hi every body,
a)
I?should compare the forecast of three model below. Could you help me?
?
?
>m1=garchFit(z1~garch(1,1),data=z1,trace=F)
>f1=predict(m1,n.ahead=6)
>m2=garchFit(z1~garch(1,1),data=z1,cond.dist='std',trace=F)
>f2=predict(m2,n.ahead=6)
>n=ugarchspec(variance.model = list(model = "eGARCH",garchOrder = c(1,1)),mean.model = list(armaOrder = c(0,0), include.mean = TRUE,arfima = F),distribution.model='std')? #same as arfima = F 
>m3=ugarchfit(spec=n, data=z1)
>f3=ugarchforecast(m3,n.ahead=6)

?
b)
Also, I want calculateing forecasts for GARCH-M model and then compare to the other. What should I do? (I fitted this model with Tsay' function. I attached it)
Please help me.
?
?
Thank you?so much,
Good luck
E. Daadmehr
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120623/3785f600/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: garchM.R
Type: application/octet-stream
Size: 5351 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120623/3785f600/attachment.obj>

From jaeyoung.ahn at gmail.com  Sat Jun 23 23:02:48 2012
From: jaeyoung.ahn at gmail.com (JaeYoung Ahn)
Date: Sat, 23 Jun 2012 14:02:48 -0700
Subject: [R-SIG-Finance] install RBloomberg on R 2.14.0
Message-ID: <CAHJa21BqiVFPWB6DOf9vt+fAPd1DhcMLCq_DuArTwnpjj2sbHw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120623/35016af8/attachment.pl>

From e.daadmehr at yahoo.com  Sun Jun 24 05:52:50 2012
From: e.daadmehr at yahoo.com (Elham Daadmehr)
Date: Sat, 23 Jun 2012 20:52:50 -0700 (PDT)
Subject: [R-SIG-Finance] TAR
Message-ID: <1340509970.72302.YahooMailNeo@web121402.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120623/70463d09/attachment.pl>

From eric.thungstrom at gmail.com  Mon Jun 25 05:20:21 2012
From: eric.thungstrom at gmail.com (Eric Thungstom)
Date: Sun, 24 Jun 2012 23:20:21 -0400
Subject: [R-SIG-Finance] quantmod and forecast
Message-ID: <CACv3XEAxaLBBt25Stgr2-kFawS7TiqhKCdtiS8TsBRCBPZ1EsA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120624/2e38bf9f/attachment.pl>

From john.laing at gmail.com  Mon Jun 25 05:25:43 2012
From: john.laing at gmail.com (John Laing)
Date: Sun, 24 Jun 2012 23:25:43 -0400
Subject: [R-SIG-Finance] install RBloomberg on R 2.14.0
In-Reply-To: <CAHJa21BqiVFPWB6DOf9vt+fAPd1DhcMLCq_DuArTwnpjj2sbHw@mail.gmail.com>
References: <CAHJa21BqiVFPWB6DOf9vt+fAPd1DhcMLCq_DuArTwnpjj2sbHw@mail.gmail.com>
Message-ID: <CAA3Wa=u294Re0P15+euByC2YJDP_AjC60Lmr+8d-VrTJ0h+y-A@mail.gmail.com>

Jaeyoung,

Due to a legal dispute the package formerly known as RBloomberg is now
Rbbg. Additionally, the project has not been hosted at R-forge in
quite some time. Try this:

install.packages("Rbbg", repos = "http://r.findata.org")

-John

On Sat, Jun 23, 2012 at 5:02 PM, JaeYoung Ahn <jaeyoung.ahn at gmail.com> wrote:
> Hello,
> I was trying to install RBloomberg, but kept failing.
> I ?am using Windows 7 with R 2.14.0 and got the following messages..
> I tried with 2.15.0 as well but no luck. Could someone help me with this?
>
>> install.packages("RBloomberg", repos="http://R-Forge.R-project.org")
> Installing package(s) into ?C:/Users/aj/Documents/R/win-library/2.14?
> (as ?lib? is unspecified)
> Warning: unable to access index for repository
> http://R-Forge.R-project.org/bin/windows/contrib/2.14
> Warning message:
> In getDependencies(pkgs, dependencies, available, lib) :
> ?package ?RBloomberg? is not available (for R version 2.14.0)
>
>
> Best Regards,
>
> Jaeyoung Ahn
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jaeyoung.ahn at gmail.com  Mon Jun 25 07:54:38 2012
From: jaeyoung.ahn at gmail.com (JaeYoung Ahn)
Date: Sun, 24 Jun 2012 22:54:38 -0700
Subject: [R-SIG-Finance] install RBloomberg on R 2.14.0
In-Reply-To: <CAA3Wa=u294Re0P15+euByC2YJDP_AjC60Lmr+8d-VrTJ0h+y-A@mail.gmail.com>
References: <CAHJa21BqiVFPWB6DOf9vt+fAPd1DhcMLCq_DuArTwnpjj2sbHw@mail.gmail.com>
	<CAA3Wa=u294Re0P15+euByC2YJDP_AjC60Lmr+8d-VrTJ0h+y-A@mail.gmail.com>
Message-ID: <CAHJa21Awc6dODrDqaGYTBCRb7nw6KWCpeRN4OA308DVrvcyMJA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120624/06cda2c4/attachment.pl>

From brian at braverock.com  Mon Jun 25 12:00:14 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 25 Jun 2012 05:00:14 -0500
Subject: [R-SIG-Finance] quantmod and forecast
In-Reply-To: <CACv3XEAxaLBBt25Stgr2-kFawS7TiqhKCdtiS8TsBRCBPZ1EsA@mail.gmail.com>
References: <CACv3XEAxaLBBt25Stgr2-kFawS7TiqhKCdtiS8TsBRCBPZ1EsA@mail.gmail.com>
Message-ID: <4FE836AE.2070900@braverock.com>

On 06/24/2012 10:20 PM, Eric Thungstom wrote:
> Trying to get quantmod and the forecast package working together but having
> some trouble with just the simple stuff. Any ideas on why this code doesn't
> work ?
>
> require(quantmod)
> require(forecast)
>
>
> getSymbols('^GSPC', from='1950-01-06', to=Sys.Date())
> z<-to.monthly(GSPC)[,6]
> names(z)<-"GSPC"
>
> train<-z['::2009-01']
> test<-z['2009-02::2012-01']
>
> train.model<-rwf(train, drift=TRUE,h=1)
> acc.train<-accuracy(train.model)
> acc.test<-accuracy(train.model,test)
>
> Seems to work all the way through the acc.train statement but then gets
> hung up at acc.test. I get the following error:
>
>
> Error in `[.xts`((c(xx[2:n])/c(xx[1:(n - 1)]) - 1), test - 1) :
>    subscript out of bounds

 From the documentation for ?accuracy :

     test: Indicator of which elements of x and f to test. If
           ?test=="all"?, all elements are used. Otherwise test is a
           numeric vector containing the indices of the elements to use
           in the test.

your 'test' is an xts object, the entire time series, not a numeric 
vector of indices.

Also, since your dates don't line up, this can never work.

rwf makes a number of forecasts specified by 'h'.  You only make one, 
for Feb 2009.

Try summary(train.model), and try some more documentation reading and 
examples.  From here, it looks like everything is fine so far.

GSPC.model <-rwf(z, drift=TRUE,h=20)
summary(GSPC.model)


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From matthieu.stigler at gmail.com  Mon Jun 25 13:56:34 2012
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Mon, 25 Jun 2012 13:56:34 +0200
Subject: [R-SIG-Finance] TAR
In-Reply-To: <1340509970.72302.YahooMailNeo@web121402.mail.ne1.yahoo.com>
References: <1340509970.72302.YahooMailNeo@web121402.mail.ne1.yahoo.com>
Message-ID: <CAEYvigJaGwHa7ONjDGwHQX9ceMo+tg3ZL3EKcSTa5+OHvbhk6g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120625/fb0af0b2/attachment.pl>

From rramachandran at jefferies.com  Mon Jun 25 14:07:14 2012
From: rramachandran at jefferies.com (Raghuraman Ramachandran)
Date: Mon, 25 Jun 2012 12:07:14 +0000
Subject: [R-SIG-Finance] Help in subsetting a vector incrementally
Message-ID: <508891886423B14295C13A4BF7CF2161D9CA94@EXJSQUSDAG02.ad.jefco.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120625/d7415817/attachment.pl>

From e.daadmehr at yahoo.com  Mon Jun 25 17:33:56 2012
From: e.daadmehr at yahoo.com (Elham Daadmehr)
Date: Mon, 25 Jun 2012 08:33:56 -0700 (PDT)
Subject: [R-SIG-Finance] fitting TAR model
Message-ID: <1340638436.81761.YahooMailNeo@web121405.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120625/016c8d91/attachment.pl>

From optionsraghu at gmail.com  Mon Jun 25 21:53:15 2012
From: optionsraghu at gmail.com (Raghuraman Ramachandran)
Date: Mon, 25 Jun 2012 20:53:15 +0100
Subject: [R-SIG-Finance] Help in rolling calculation
Message-ID: <CADgEnD=V1foUcscLGEXUFOxk9Hn8Ci9OfEfSk8EJdgPdWcjOUw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120625/d90f7f87/attachment.pl>

From zach.mayer at gmail.com  Mon Jun 25 22:02:11 2012
From: zach.mayer at gmail.com (Zachary Mayer)
Date: Mon, 25 Jun 2012 16:02:11 -0400
Subject: [R-SIG-Finance] Help in rolling calculation
In-Reply-To: <CADgEnD=V1foUcscLGEXUFOxk9Hn8Ci9OfEfSk8EJdgPdWcjOUw@mail.gmail.com>
References: <CADgEnD=V1foUcscLGEXUFOxk9Hn8Ci9OfEfSk8EJdgPdWcjOUw@mail.gmail.com>
Message-ID: <CAEr64e-b4e3GedT2EOasq54-qH9-QJWPOh7fOpUMRVAE3NL=_Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120625/81344eb1/attachment.pl>

From optionsraghu at gmail.com  Mon Jun 25 22:13:41 2012
From: optionsraghu at gmail.com (Raghuraman Ramachandran)
Date: Mon, 25 Jun 2012 21:13:41 +0100
Subject: [R-SIG-Finance] Help in rolling calculation
In-Reply-To: <CAEr64e-b4e3GedT2EOasq54-qH9-QJWPOh7fOpUMRVAE3NL=_Q@mail.gmail.com>
References: <CADgEnD=V1foUcscLGEXUFOxk9Hn8Ci9OfEfSk8EJdgPdWcjOUw@mail.gmail.com>
	<CAEr64e-b4e3GedT2EOasq54-qH9-QJWPOh7fOpUMRVAE3NL=_Q@mail.gmail.com>
Message-ID: <CADgEnDmuuv_SHsoNFSdocHtsXf=M_ziwfXR5ZPrpUZCV7NVZYw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120625/7c87c462/attachment.pl>

From brian at braverock.com  Mon Jun 25 22:28:49 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 25 Jun 2012 15:28:49 -0500
Subject: [R-SIG-Finance] Help in rolling calculation
In-Reply-To: <CADgEnDmuuv_SHsoNFSdocHtsXf=M_ziwfXR5ZPrpUZCV7NVZYw@mail.gmail.com>
References: <CADgEnD=V1foUcscLGEXUFOxk9Hn8Ci9OfEfSk8EJdgPdWcjOUw@mail.gmail.com>
	<CAEr64e-b4e3GedT2EOasq54-qH9-QJWPOh7fOpUMRVAE3NL=_Q@mail.gmail.com>
	<CADgEnDmuuv_SHsoNFSdocHtsXf=M_ziwfXR5ZPrpUZCV7NVZYw@mail.gmail.com>
Message-ID: <1340656129.26641.27.camel@brian-rcg>

On Mon, 2012-06-25 at 21:13 +0100, Raghuraman Ramachandran wrote:
> Do you think there exists any other elegant solution?
> 
It doesn't get much simpler or more 'elegant' than that.

This is of course too simple to handle nuanced transaction ordering,
commissions, etc.

> Also do you think rollapply or apply.fromstart etc could also be used
> to solve such problems?
> 
Yes, but cumprod is written in C underneath,so it's faster to use it if
you can.
> 
-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From optionsraghu at gmail.com  Mon Jun 25 22:32:44 2012
From: optionsraghu at gmail.com (Raghuraman Ramachandran)
Date: Mon, 25 Jun 2012 21:32:44 +0100
Subject: [R-SIG-Finance] Help in rolling calculation
In-Reply-To: <1340656129.26641.27.camel@brian-rcg>
References: <CADgEnD=V1foUcscLGEXUFOxk9Hn8Ci9OfEfSk8EJdgPdWcjOUw@mail.gmail.com>
	<CAEr64e-b4e3GedT2EOasq54-qH9-QJWPOh7fOpUMRVAE3NL=_Q@mail.gmail.com>
	<CADgEnDmuuv_SHsoNFSdocHtsXf=M_ziwfXR5ZPrpUZCV7NVZYw@mail.gmail.com>
	<1340656129.26641.27.camel@brian-rcg>
Message-ID: <CADgEnD=dC=Hr5Hx2EQeNdEJXL8q=ybQ60OHaeoO1HK+mn0N+aw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120625/8d2636b9/attachment.pl>

From s.n.stoyanov at gmail.com  Mon Jun 25 23:58:30 2012
From: s.n.stoyanov at gmail.com (stoyan.stoyanov)
Date: Mon, 25 Jun 2012 14:58:30 -0700 (PDT)
Subject: [R-SIG-Finance] RUGARCH bootstrap fitting error - presigma length
Message-ID: <1340661510932-4634470.post@n4.nabble.com>

Hi all,

While trying to bootstrap a TGARCH model of orders (1,1), using the rugarch
package, I get the following error:

.fgarchsim2(fit = fit, n.sim = n.sim, n.start = n.start, m.sim = m.sim,  : 
ugarchsim-->error: presigma must be of length 2

I only get the error when my ARMA model for the mean is of order 2 or higher
(in p, q or both). Curious whether this is a bug that anyone has documented
before. If not, I would be happy to provide my code and data sample. It
could also be a mis-specification in my model and/or an error in the code of
course.

Best,
Stoyan

--
View this message in context: http://r.789695.n4.nabble.com/RUGARCH-bootstrap-fitting-error-presigma-length-tp4634470.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From s.n.stoyanov at gmail.com  Mon Jun 25 23:59:52 2012
From: s.n.stoyanov at gmail.com (stoyan.stoyanov)
Date: Mon, 25 Jun 2012 14:59:52 -0700 (PDT)
Subject: [R-SIG-Finance] RUGARCH rolling forecast using external
	regressors
In-Reply-To: <1340373768511-4634210.post@n4.nabble.com>
References: <1340373768511-4634210.post@n4.nabble.com>
Message-ID: <1340661592341-4634471.post@n4.nabble.com>

Thank you both for the quick replies. Much appreciated.

Stoyan

--
View this message in context: http://r.789695.n4.nabble.com/RUGARCH-rolling-forecast-using-external-regressors-tp4634210p4634471.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Tue Jun 26 04:55:18 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Tue, 26 Jun 2012 03:55:18 +0100
Subject: [R-SIG-Finance] RUGARCH bootstrap fitting error - presigma
	length
In-Reply-To: <1340661510932-4634470.post@n4.nabble.com>
References: <1340661510932-4634470.post@n4.nabble.com>
Message-ID: <4FE92496.8040608@4dscape.com>

Hi Stoyan,

You need to provide at a minimum the code you used. When you say 
bootstrap which function are you referring to (ugarchsim or ugarchboot)?

In any case I cannot replicate the error under the following set of 
assumptions:

library(rugarch)
data(sp500ret)
spec = ugarchspec(mean.model=list(armaOrder=c(3,2)),
variance.model=list(model="fGARCH",submodel="TGARCH"))
fit=ugarchfit(spec, sp500ret)

# These all work:
sim = ugarchsim(fit, n.sim = 1, m.sim=200, startMethod="unconditional")
sim = ugarchsim(fit, n.sim = 1, m.sim=200, startMethod="sample")
bt=ugarchboot(fit, method = "Partial", n.bootfit = 200)

(the use of .fgarchsim2 means that (n.sim+n.start) < 100 && m.sim > 
100...this makes use of C++ code whereas the opposite case is based on C 
code).

Regards,
Alexios

On 25/06/2012 22:58, stoyan.stoyanov wrote:
> Hi all,
>
> While trying to bootstrap a TGARCH model of orders (1,1), using the rugarch
> package, I get the following error:
>
> .fgarchsim2(fit = fit, n.sim = n.sim, n.start = n.start, m.sim = m.sim,  :
> ugarchsim-->error: presigma must be of length 2
>
> I only get the error when my ARMA model for the mean is of order 2 or higher
> (in p, q or both). Curious whether this is a bug that anyone has documented
> before. If not, I would be happy to provide my code and data sample. It
> could also be a mis-specification in my model and/or an error in the code of
> course.
>
> Best,
> Stoyan
>
> --
> View this message in context: http://r.789695.n4.nabble.com/RUGARCH-bootstrap-fitting-error-presigma-length-tp4634470.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From s.n.stoyanov at gmail.com  Tue Jun 26 14:53:49 2012
From: s.n.stoyanov at gmail.com (stoyan.stoyanov)
Date: Tue, 26 Jun 2012 05:53:49 -0700 (PDT)
Subject: [R-SIG-Finance] RUGARCH bootstrap fitting error - presigma
	length
In-Reply-To: <1340661510932-4634470.post@n4.nabble.com>
References: <1340661510932-4634470.post@n4.nabble.com>
Message-ID: <1340715229775-4634505.post@n4.nabble.com>

Hi Alexios,

I am using 1372 daily adjusted returns on IBM (csv attached).

*Code:*
spec=ugarchspec(variance.model = list(model = "fGARCH", garchOrder = c(3,3),
                        submodel = "TGARCH", external.regressors = NULL,
variance.targeting = TRUE),
                 mean.model = list (armaOrder = c(best.p,best.q),
include.mean = mean, archm = FALSE, 
                        archpow = 1, arfima = FALSE, external.regressors =
NULL, archex = FALSE),
                 distribution.model = "std", start.pars = list(), fixed.pars
= list())

fit=ugarchfit(spec, data, out.sample = 0, solver = "solnp", solver.control =
list(), 
               fit.control = list(stationarity = 1, fixed.se = 0, scale =
0))

boot.pred=ugarchboot(fit, data = NULL, method = "full", n.ahead = 5, 
                n.bootfit = 5, n.bootpred = 500, out.sample = 0, rseed = NA,
solver = "solnp", 
                solver.control = list(), fit.control = list(), 
                external.forecasts = list(mregfor = NULL, vregfor = NULL),
parallel = FALSE, 
                parallel.control = list(pkg = c("multicore", "snowfall"),
cores = 2))

*Error:*
fitting stage...done!

prediction stage...
Error in .fgarchsim2(fit = fit, n.sim = n.sim, n.start = n.start, m.sim =
m.sim,  : 
  
ugarchsim-->error: presigma must be of length 2

Again, I get the error with anything higher than an ARMA(1,1). Hope this
information is sufficient. I get the same error with a different data set
too.

*Data:*
http://r.789695.n4.nabble.com/file/n4634505/data.csv data.csv 

Thanks,
Stoyan

--
View this message in context: http://r.789695.n4.nabble.com/RUGARCH-bootstrap-fitting-error-presigma-length-tp4634470p4634505.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Tue Jun 26 17:19:50 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Tue, 26 Jun 2012 16:19:50 +0100
Subject: [R-SIG-Finance] RUGARCH bootstrap fitting error - presigma
	length
In-Reply-To: <1340715229775-4634505.post@n4.nabble.com>
References: <1340661510932-4634470.post@n4.nabble.com>
	<1340715229775-4634505.post@n4.nabble.com>
Message-ID: <4FE9D316.3080905@4dscape.com>

Thanks,

That's another bug caught and fixed (revision 424).

Regards,
Alexios

On 26/06/2012 13:53, stoyan.stoyanov wrote:
> Hi Alexios,
>
> I am using 1372 daily adjusted returns on IBM (csv attached).
>
> *Code:*
> spec=ugarchspec(variance.model = list(model = "fGARCH", garchOrder = c(3,3),
>                          submodel = "TGARCH", external.regressors = NULL,
> variance.targeting = TRUE),
>                   mean.model = list (armaOrder = c(best.p,best.q),
> include.mean = mean, archm = FALSE,
>                          archpow = 1, arfima = FALSE, external.regressors =
> NULL, archex = FALSE),
>                   distribution.model = "std", start.pars = list(), fixed.pars
> = list())
>
> fit=ugarchfit(spec, data, out.sample = 0, solver = "solnp", solver.control =
> list(),
>                 fit.control = list(stationarity = 1, fixed.se = 0, scale =
> 0))
>
> boot.pred=ugarchboot(fit, data = NULL, method = "full", n.ahead = 5,
>                  n.bootfit = 5, n.bootpred = 500, out.sample = 0, rseed = NA,
> solver = "solnp",
>                  solver.control = list(), fit.control = list(),
>                  external.forecasts = list(mregfor = NULL, vregfor = NULL),
> parallel = FALSE,
>                  parallel.control = list(pkg = c("multicore", "snowfall"),
> cores = 2))
>
> *Error:*
> fitting stage...done!
>
> prediction stage...
> Error in .fgarchsim2(fit = fit, n.sim = n.sim, n.start = n.start, m.sim =
> m.sim,  :
>
> ugarchsim-->error: presigma must be of length 2
>
> Again, I get the error with anything higher than an ARMA(1,1). Hope this
> information is sufficient. I get the same error with a different data set
> too.
>
> *Data:*
> http://r.789695.n4.nabble.com/file/n4634505/data.csv data.csv
>
> Thanks,
> Stoyan
>
> --
> View this message in context: http://r.789695.n4.nabble.com/RUGARCH-bootstrap-fitting-error-presigma-length-tp4634470p4634505.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From s.n.stoyanov at gmail.com  Wed Jun 27 16:50:56 2012
From: s.n.stoyanov at gmail.com (stoyan.stoyanov)
Date: Wed, 27 Jun 2012 07:50:56 -0700 (PDT)
Subject: [R-SIG-Finance] RUGARCH variance targeting issue
Message-ID: <1340808656407-4634631.post@n4.nabble.com>

Hi again,

I am running a TGARCH(1,1) model on a series of adjusted daily stock returns
and get significantly different forecasts when using variance targeting and
when not. However, I feel that the forecast should not be that different.
Could it be that the model is "targeting" the wrong variable (omega instead
of unconditional variance)? Again it could well be a problem with my data or
model, but I do not see anything obviously wrong with either. That's why I'm
attaching the output under both scenarios, as well as my data. The relevant
parts of the code are below. Hopefully you can help. I just don't think that
my long term prediction of sigma should be going to 0...

*Code:*

spec=ugarchspec(variance.model = list(model = "fGARCH", garchOrder = c(1,1),
                        submodel = "TGARCH", external.regressors =
regressors, variance.targeting = TRUE/FALSE),
                 mean.model = list (armaOrder = c(3,3), include.mean = mean,
archm = FALSE, 
                        archpow = 1, arfima = FALSE, external.regressors =
NULL, archex = FALSE),
                 distribution.model = "std", start.pars = list(), fixed.pars
= list())

fit=ugarchfit(spec, data, out.sample = 100, solver = "solnp", solver.control
= list(), 
               fit.control = list(stationarity = 1, fixed.se = 0, scale =
0))

forecast=ugarchforecast(fit, data = NULL, n.ahead = 100, n.roll = 50,
out.sample = 0, 
               external.forecasts = list(mregfor = NULL, vregfor = NULL))

boot.pred=ugarchboot(fit, data = NULL, method = "partial", n.ahead = 10, 
                n.bootfit = 100, n.bootpred = 500, out.sample = 0, rseed =
NA, solver = "solnp", 
                solver.control = list(), fit.control = list(), 
                external.forecasts = list(mregfor = NULL, vregfor = NULL),
parallel = FALSE, 
                parallel.control = list(pkg = c("multicore", "snowfall"),
cores = 2))

P.S. I know that I probably don't need an ARMA(3,3).

*Data + Ouput files:*
http://r.789695.n4.nabble.com/file/n4634631/var.targeting.conditional.forecast.jpeg
var.targeting.conditional.forecast.jpeg 
http://r.789695.n4.nabble.com/file/n4634631/var.targeting.bootstrap.output.jpg.jpeg
var.targeting.bootstrap.output.jpg.jpeg 
http://r.789695.n4.nabble.com/file/n4634631/no.var_targeting.conditional_forecast.jpeg
no.var_targeting.conditional_forecast.jpeg 
http://r.789695.n4.nabble.com/file/n4634631/no.var.targeting.bootstrap.output.jpg
no.var.targeting.bootstrap.output.jpg 
http://r.789695.n4.nabble.com/file/n4634631/var.targeting.fit.txt
var.targeting.fit.txt 
http://r.789695.n4.nabble.com/file/n4634631/no.var.targeting.fit.txt
no.var.targeting.fit.txt 

Thanks,
Stoyan

-----
Stoyan Stoyanov
The University of Chicago Booth School of Business
MBA Class of 2013
(312) 532-0120 | stoyanov at chicagobooth.edu
--
View this message in context: http://r.789695.n4.nabble.com/RUGARCH-variance-targeting-issue-tp4634631.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From s.n.stoyanov at gmail.com  Wed Jun 27 16:51:38 2012
From: s.n.stoyanov at gmail.com (stoyan.stoyanov)
Date: Wed, 27 Jun 2012 07:51:38 -0700 (PDT)
Subject: [R-SIG-Finance] RUGARCH variance targeting issue
In-Reply-To: <1340808656407-4634631.post@n4.nabble.com>
References: <1340808656407-4634631.post@n4.nabble.com>
Message-ID: <1340808698279-4634632.post@n4.nabble.com>

*Data file:*
http://r.789695.n4.nabble.com/file/n4634632/data.csv data.csv 

-----
Stoyan Stoyanov
The University of Chicago Booth School of Business
MBA Class of 2013
(312) 532-0120 | stoyanov at chicagobooth.edu
--
View this message in context: http://r.789695.n4.nabble.com/RUGARCH-variance-targeting-issue-tp4634631p4634632.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Wed Jun 27 17:16:14 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Wed, 27 Jun 2012 16:16:14 +0100
Subject: [R-SIG-Finance] RUGARCH variance targeting issue
In-Reply-To: <1340808656407-4634631.post@n4.nabble.com>
References: <1340808656407-4634631.post@n4.nabble.com>
Message-ID: <4FEB23BE.6070606@4dscape.com>

Hi Stoyan and thanks for catching another one.

Bug quashed (rev.427)

You can also submit bug reports directly to the rugarch bug forum list:
https://r-forge.r-project.org/forum/forum.php?forum_id=1117

Regards,

Alexios

PS if you want the unconditional variance this can be correctly 
recovered by using the "uncvariance" method on the fitted object.

On 27/06/2012 15:50, stoyan.stoyanov wrote:
> Hi again,
>
> I am running a TGARCH(1,1) model on a series of adjusted daily stock returns
> and get significantly different forecasts when using variance targeting and
> when not. However, I feel that the forecast should not be that different.
> Could it be that the model is "targeting" the wrong variable (omega instead
> of unconditional variance)? Again it could well be a problem with my data or
> model, but I do not see anything obviously wrong with either. That's why I'm
> attaching the output under both scenarios, as well as my data. The relevant
> parts of the code are below. Hopefully you can help. I just don't think that
> my long term prediction of sigma should be going to 0...
>
> *Code:*
>
> spec=ugarchspec(variance.model = list(model = "fGARCH", garchOrder = c(1,1),
>                          submodel = "TGARCH", external.regressors =
> regressors, variance.targeting = TRUE/FALSE),
>                   mean.model = list (armaOrder = c(3,3), include.mean = mean,
> archm = FALSE,
>                          archpow = 1, arfima = FALSE, external.regressors =
> NULL, archex = FALSE),
>                   distribution.model = "std", start.pars = list(), fixed.pars
> = list())
>
> fit=ugarchfit(spec, data, out.sample = 100, solver = "solnp", solver.control
> = list(),
>                 fit.control = list(stationarity = 1, fixed.se = 0, scale =
> 0))
>
> forecast=ugarchforecast(fit, data = NULL, n.ahead = 100, n.roll = 50,
> out.sample = 0,
>                 external.forecasts = list(mregfor = NULL, vregfor = NULL))
>
> boot.pred=ugarchboot(fit, data = NULL, method = "partial", n.ahead = 10,
>                  n.bootfit = 100, n.bootpred = 500, out.sample = 0, rseed =
> NA, solver = "solnp",
>                  solver.control = list(), fit.control = list(),
>                  external.forecasts = list(mregfor = NULL, vregfor = NULL),
> parallel = FALSE,
>                  parallel.control = list(pkg = c("multicore", "snowfall"),
> cores = 2))
>
> P.S. I know that I probably don't need an ARMA(3,3).
>
> *Data + Ouput files:*
> http://r.789695.n4.nabble.com/file/n4634631/var.targeting.conditional.forecast.jpeg
> var.targeting.conditional.forecast.jpeg
> http://r.789695.n4.nabble.com/file/n4634631/var.targeting.bootstrap.output.jpg.jpeg
> var.targeting.bootstrap.output.jpg.jpeg
> http://r.789695.n4.nabble.com/file/n4634631/no.var_targeting.conditional_forecast.jpeg
> no.var_targeting.conditional_forecast.jpeg
> http://r.789695.n4.nabble.com/file/n4634631/no.var.targeting.bootstrap.output.jpg
> no.var.targeting.bootstrap.output.jpg
> http://r.789695.n4.nabble.com/file/n4634631/var.targeting.fit.txt
> var.targeting.fit.txt
> http://r.789695.n4.nabble.com/file/n4634631/no.var.targeting.fit.txt
> no.var.targeting.fit.txt
>
> Thanks,
> Stoyan
>
> -----
> Stoyan Stoyanov
> The University of Chicago Booth School of Business
> MBA Class of 2013
> (312) 532-0120 | stoyanov at chicagobooth.edu
> --
> View this message in context: http://r.789695.n4.nabble.com/RUGARCH-variance-targeting-issue-tp4634631.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From s.n.stoyanov at gmail.com  Wed Jun 27 17:32:59 2012
From: s.n.stoyanov at gmail.com (stoyan.stoyanov)
Date: Wed, 27 Jun 2012 08:32:59 -0700 (PDT)
Subject: [R-SIG-Finance] RUGARCH variance targeting issue
In-Reply-To: <1340808656407-4634631.post@n4.nabble.com>
References: <1340808656407-4634631.post@n4.nabble.com>
Message-ID: <1340811178982-4634643.post@n4.nabble.com>

No worries. Does this mean that I should just not use variance targeting
until the revision is out? I am actually trying to build something quite
applied using the package, so I would be very happy if I could get my hands
on a recent revision. Is one available anywhere?

Thank you,
Stoyan

-----
Stoyan Stoyanov
The University of Chicago Booth School of Business
MBA Class of 2013
(312) 532-0120 | stoyanov at chicagobooth.edu
--
View this message in context: http://r.789695.n4.nabble.com/RUGARCH-variance-targeting-issue-tp4634631p4634643.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From michael.weylandt at gmail.com  Wed Jun 27 17:44:07 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt <michael.weylandt@gmail.com>)
Date: Wed, 27 Jun 2012 10:44:07 -0500
Subject: [R-SIG-Finance] RUGARCH variance targeting issue
In-Reply-To: <1340811178982-4634643.post@n4.nabble.com>
References: <1340808656407-4634631.post@n4.nabble.com>
	<1340811178982-4634643.post@n4.nabble.com>
Message-ID: <039CCFEC-A1AA-4B5D-A9F0-66799867D9C6@gmail.com>

It's on R-forge: googling r-forge and rugarch should get you there, but you might need to build from source to get the bleeding edge. It usually takes r-forge about a day to build, but it can be unpredictable. Details in another recent thread on this list. 

Best,
Michael

On Jun 27, 2012, at 10:32 AM, "stoyan.stoyanov" <s.n.stoyanov at gmail.com> wrote:

> No worries. Does this mean that I should just not use variance targeting
> until the revision is out? I am actually trying to build something quite
> applied using the package, so I would be very happy if I could get my hands
> on a recent revision. Is one available anywhere?
> 
> Thank you,
> Stoyan
> 
> -----
> Stoyan Stoyanov
> The University of Chicago Booth School of Business
> MBA Class of 2013
> (312) 532-0120 | stoyanov at chicagobooth.edu
> --
> View this message in context: http://r.789695.n4.nabble.com/RUGARCH-variance-targeting-issue-tp4634631p4634643.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From alexios at 4dscape.com  Wed Jun 27 17:47:14 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Wed, 27 Jun 2012 16:47:14 +0100
Subject: [R-SIG-Finance] RUGARCH variance targeting issue
In-Reply-To: <1340811178982-4634643.post@n4.nabble.com>
References: <1340808656407-4634631.post@n4.nabble.com>
	<1340811178982-4634643.post@n4.nabble.com>
Message-ID: <4FEB2B02.40705@4dscape.com>

You should really be able to checkout the latest version from the svn 
repository and built it. If you don't know how and are in a hurry, email 
me off list your O/S and I  will send you a pre-built version.

-Alexios

On 27/06/2012 16:32, stoyan.stoyanov wrote:
> No worries. Does this mean that I should just not use variance targeting
> until the revision is out? I am actually trying to build something quite
> applied using the package, so I would be very happy if I could get my hands
> on a recent revision. Is one available anywhere?
>
> Thank you,
> Stoyan
>
> -----
> Stoyan Stoyanov
> The University of Chicago Booth School of Business
> MBA Class of 2013
> (312) 532-0120 | stoyanov at chicagobooth.edu
> --
> View this message in context: http://r.789695.n4.nabble.com/RUGARCH-variance-targeting-issue-tp4634631p4634643.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From Robert.McGehee at geodecapital.com  Thu Jun 28 00:31:04 2012
From: Robert.McGehee at geodecapital.com (McGehee, Robert)
Date: Wed, 27 Jun 2012 18:31:04 -0400
Subject: [R-SIG-Finance] Incorrect SVD Calculation
Message-ID: <17B09E7789D3104E8F5EEB0582A8D66FDF9A36FF81@MSGRTPCCRF2WIN.DMN1.FMR.COM>

R-Financiers,
For any of you who, like us, use SVD for risk modeling and stat arb trading, we've discovered what I think is a very serious bug in R/LAPACK's SVD calculation. Since this bug has the potential to create bogus risk models, I thought this audience might be interested in this post.

Specifically, for many matrices that are not full rank and have a few small eigenvalues (much like covariance from stock returns!), SVD may return completely bogus and impossible results: for a correlation matrix the sum of the singular values will be many times too large and the 'u' and 'v' matrix will not be even close to orthonormal. For a random matrix with certain distributions of eigenvalues (first discovered using a covariance from 1-minute bar stock returns), SVD produces bogus results 20%-50% of the time.

I've posted the bug report with an example here:
https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=14962

For any of you using risk models or stat arb that use SVD, you may want to see if this error affects you.

Also, (selfishly) I wanted to post this out to fellow practitioners already knew about this problem and were using a better algorithm (I noticed there are more than one LAPACK svd algorithm). The slow method of SVD calculation by eigen(crossprod(x)) and eigen(tcrossprod(x)) still works fine (but it's very slow).

Last, here's a simple 'svd' replacement function that performs a rudimentary check on the output of svd. It fails if 'u' is not orthonormal. Generally 'u', 'd', and 'v' all seem to give wrong answers at the same time, but no guarantees that problems with 'v' and 'd' won't slip through.

svd <- function(...) {
    x <- base::svd(...)
    if (!is.complex(x$u) && any(abs(colSums(x$u^2)-1) > 1e-3))
        stop("svd gave incorrect result")
    x
}

Suggestions, comments appreciated.
--Robert

Robert McGehee, CFA
Geode Capital Management, LLC
One Post Office Square, 28th Floor | Boston, MA | 02109
Direct: (617)392-8396

This e-mail, and any attachments hereto, are intended fo...{{dropped:11}}


From jctoll at gmail.com  Thu Jun 28 05:27:53 2012
From: jctoll at gmail.com (J Toll)
Date: Wed, 27 Jun 2012 22:27:53 -0500
Subject: [R-SIG-Finance] Help in subsetting a vector incrementally
In-Reply-To: <508891886423B14295C13A4BF7CF2161D9CA94@EXJSQUSDAG02.ad.jefco.com>
References: <508891886423B14295C13A4BF7CF2161D9CA94@EXJSQUSDAG02.ad.jefco.com>
Message-ID: <CA+nJqYMfzPmGzCV-Gj9Ywk0Lh3VLJfLntH27f_c_wvg375d2yA@mail.gmail.com>

On Mon, Jun 25, 2012 at 7:07 AM, Raghuraman Ramachandran
<rramachandran at jefferies.com> wrote:
> I have an array a, and I am running a formula which is simply 1+Delt(a)
>
> Is it possible to get an output vector which will have sequential values of 1+Delt(a) please?
>
> I tried 1+Delt(a[1: (length(a)-1)]) and it works. But then every time I need the previous value I need to write this which is not ideal.

Raman,

I think it would help if you could provide a bit more information.
For example, some sample data showing the input and expected output.
Additionally, some clarification of whether you are using the Delt
function from quantmod.

For example:

> library(quantmod)
> a <- 1:10
> 1 + Delt(a)
      Delt.1.arithmetic
 [1,]                NA
 [2,]          2.000000
 [3,]          1.500000
 [4,]          1.333333
 [5,]          1.250000
 [6,]          1.200000
 [7,]          1.166667
 [8,]          1.142857
 [9,]          1.125000
[10,]          1.111111
> 1 + Delt(a[1:(length(a) - 1)])
      Delt.1.arithmetic
 [1,]                NA
 [2,]          2.000000
 [3,]          1.500000
 [4,]          1.333333
 [5,]          1.250000
 [6,]          1.200000
 [7,]          1.166667
 [8,]          1.142857
 [9,]          1.125000

What should the desired output be?


James


From sjansevanrensburg at gmail.com  Thu Jun 28 08:59:46 2012
From: sjansevanrensburg at gmail.com (Stefan Janse van Rensburg)
Date: Thu, 28 Jun 2012 08:59:46 +0200
Subject: [R-SIG-Finance] runMyCode
Message-ID: <4FEC00E2.2090907@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120628/5e9c706a/attachment.pl>

From rharlow86 at gmail.com  Thu Jun 28 17:52:03 2012
From: rharlow86 at gmail.com (Robert Harlow)
Date: Thu, 28 Jun 2012 11:52:03 -0400
Subject: [R-SIG-Finance] Incorrect SVD Calculation
In-Reply-To: <17B09E7789D3104E8F5EEB0582A8D66FDF9A36FF81@MSGRTPCCRF2WIN.DMN1.FMR.COM>
References: <17B09E7789D3104E8F5EEB0582A8D66FDF9A36FF81@MSGRTPCCRF2WIN.DMN1.FMR.COM>
Message-ID: <CAHdfS96VuZ4FP-R3Tg_LUEGAPqop975Ss+E-TYRUQzzCOOwCVg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120628/d445fa95/attachment.pl>

From patrick at burns-stat.com  Thu Jun 28 17:58:41 2012
From: patrick at burns-stat.com (Patrick Burns)
Date: Thu, 28 Jun 2012 16:58:41 +0100
Subject: [R-SIG-Finance] Incorrect SVD Calculation
In-Reply-To: <CAHdfS96VuZ4FP-R3Tg_LUEGAPqop975Ss+E-TYRUQzzCOOwCVg@mail.gmail.com>
References: <17B09E7789D3104E8F5EEB0582A8D66FDF9A36FF81@MSGRTPCCRF2WIN.DMN1.FMR.COM>
	<CAHdfS96VuZ4FP-R3Tg_LUEGAPqop975Ss+E-TYRUQzzCOOwCVg@mail.gmail.com>
Message-ID: <4FEC7F31.5@burns-stat.com>

Thanks for highlighting that there is risk where
I hadn't expected any.

I've seen a different weird phenomenon in which
R's 'svd' throws an error because of non-convergence
in the algorithm.  Changing the order of the rows
makes it go away.

Pat

On 28/06/2012 16:52, Robert Harlow wrote:
> Robert,
>      First off, this is a pretty interesting phenomenon, and let me start
> off by saying that I have not figured out what is going on.  However, I do
> have some more information to contribute:
> I am unable to recreate the bug in MATLAB, which uses a different
> subroutine from LAPACK: DGESVD whereas R uses DGESDD
>
> I then tried to see if I exported the same random matrix and tried to run
> it through the MATLAB svd function what would happen.  However, if I write
> the offending matrix to a csv file, then load it back into R and calculate
> the svd over again, it works and we get sum(sv) ~ 600.
>
> I know this doesn't help, but I guess its more information..
> I'll let you know if I find anything else,
> -Bob
>
> for (i in 1:10) {
>      set.seed(i)
>      R <- matrix(rnorm(x1*x2), x1, x2)
>      ee <- eigen(tcrossprod(R))
>
>      ## 'cx' is a positive semi-definite matrix with eigenvalues of 'ev'
>      D <- ee$vectors
>      cx <- ee$vectors[, 1:x2] %*% tcrossprod(diag(ev), ee$vectors[,1:x2])
>
>      ## Scale 'cx' to the corresponding correlation matrix and verify diag=1
>      cx <- cov2cor(cx)
>      stopifnot(all(diag(cx)==1))
>
>      ## Calculate sum of singular values (should be 'x1')
>      sv <- sum(svd(cx)$d)
>      print(abs(sv - x1))
>      if (abs(sv-x1) > 1e-2) {
>          write.table(R, "svd.csv", sep = ",", row.names = FALSE, col.names =
> FALSE)
>          x.R <- read.table("svd.csv", sep = ",")
>          x.R <- as.matrix(x.R)
>          R.old <- R
>          R <- x.R
>          ee <- eigen(tcrossprod(R))
>          ## 'cx' is a positive semi-definite matrix with eigenvalues of 'ev'
>          D <- ee$vectors
>          cx <- ee$vectors[, 1:x2] %*% tcrossprod(diag(ev), ee$vectors[,1:x2])
>
>          ## Scale 'cx' to the corresponding correlation matrix and verify
> diag=1
>          cx <- cov2cor(cx)
>          stopifnot(all(diag(cx)==1))
>
>          ## Calculate sum of singular values (should be 'x1')
>          sv <- sum(svd(cx)$d)
>          browser()
>          cat("Seed=", i, "\n")
>          stop("Average singular value of correlation matrix is ", round(sv,
> 3),
> ". Should be ", x1)
>      }
> }
>
>
>
> On Wed, Jun 27, 2012 at 6:31 PM, McGehee, Robert <
> Robert.McGehee at geodecapital.com> wrote:
>
>> R-Financiers,
>> For any of you who, like us, use SVD for risk modeling and stat arb
>> trading, we've discovered what I think is a very serious bug in R/LAPACK's
>> SVD calculation. Since this bug has the potential to create bogus risk
>> models, I thought this audience might be interested in this post.
>>
>> Specifically, for many matrices that are not full rank and have a few
>> small eigenvalues (much like covariance from stock returns!), SVD may
>> return completely bogus and impossible results: for a correlation matrix
>> the sum of the singular values will be many times too large and the 'u' and
>> 'v' matrix will not be even close to orthonormal. For a random matrix with
>> certain distributions of eigenvalues (first discovered using a covariance
>> from 1-minute bar stock returns), SVD produces bogus results 20%-50% of the
>> time.
>>
>> I've posted the bug report with an example here:
>> https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=14962
>>
>> For any of you using risk models or stat arb that use SVD, you may want to
>> see if this error affects you.
>>
>> Also, (selfishly) I wanted to post this out to fellow practitioners
>> already knew about this problem and were using a better algorithm (I
>> noticed there are more than one LAPACK svd algorithm). The slow method of
>> SVD calculation by eigen(crossprod(x)) and eigen(tcrossprod(x)) still works
>> fine (but it's very slow).
>>
>> Last, here's a simple 'svd' replacement function that performs a
>> rudimentary check on the output of svd. It fails if 'u' is not orthonormal.
>> Generally 'u', 'd', and 'v' all seem to give wrong answers at the same
>> time, but no guarantees that problems with 'v' and 'd' won't slip through.
>>
>> svd <- function(...) {
>>     x <- base::svd(...)
>>     if (!is.complex(x$u) && any(abs(colSums(x$u^2)-1) > 1e-3))
>>         stop("svd gave incorrect result")
>>     x
>> }
>>
>> Suggestions, comments appreciated.
>> --Robert
>>
>> Robert McGehee, CFA
>> Geode Capital Management, LLC
>> One Post Office Square, 28th Floor | Boston, MA | 02109
>> Direct: (617)392-8396
>>
>> This e-mail, and any attachments hereto, are intended fo...{{dropped:11}}
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From pierrelap at gmail.com  Thu Jun 28 18:07:38 2012
From: pierrelap at gmail.com (Pierre Lapointe)
Date: Thu, 28 Jun 2012 12:07:38 -0400
Subject: [R-SIG-Finance] Incorrect SVD Calculation
In-Reply-To: <4FEC7F31.5@burns-stat.com>
References: <17B09E7789D3104E8F5EEB0582A8D66FDF9A36FF81@MSGRTPCCRF2WIN.DMN1.FMR.COM>
	<CAHdfS96VuZ4FP-R3Tg_LUEGAPqop975Ss+E-TYRUQzzCOOwCVg@mail.gmail.com>
	<4FEC7F31.5@burns-stat.com>
Message-ID: <CAHjr2U-RSJ3Od_ZTjY=ECo-_w2OmMWivGJofmKf2tNMP-k1MtA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120628/acc22001/attachment.pl>

From s.n.stoyanov at gmail.com  Thu Jun 28 18:14:32 2012
From: s.n.stoyanov at gmail.com (stoyan.stoyanov)
Date: Thu, 28 Jun 2012 09:14:32 -0700 (PDT)
Subject: [R-SIG-Finance] RUGARCH distribution selection
Message-ID: <1340900072182-4634792.post@n4.nabble.com>

Hi all,

I am wondering whether there is a way to modify the distributions used by
the distribution.model method in rugarch. Specifically, how can I change the
kurtosis of the distribution used (change the degrees of freedom in the
student distribution)? My goal is to fit a model with slightly fatter tails.

Thanks in advance,
Stoyan

-----
Stoyan Stoyanov
The University of Chicago Booth School of Business
MBA Class of 2013
(312) 532-0120 | stoyanov at chicagobooth.edu
--
View this message in context: http://r.789695.n4.nabble.com/RUGARCH-distribution-selection-tp4634792.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Thu Jun 28 18:42:05 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Thu, 28 Jun 2012 17:42:05 +0100
Subject: [R-SIG-Finance] RUGARCH distribution selection
In-Reply-To: <1340900072182-4634792.post@n4.nabble.com>
References: <1340900072182-4634792.post@n4.nabble.com>
Message-ID: <4FEC895D.7050506@4dscape.com>

If you do not want the conditional excess kurtosis of the student 
distribution (equal to 6/(shape-4)) to be calculated by maximum 
likelihood, then you can fix the shape parameter (shape a.k.a. "d.o.f" 
in Student) using the fixed.pars option, subject to it being >2.

e.g. ugarchspec(distribution.model="std", fixed.pars=list(shape=4.1))

-Alexios

PS see also the 'dkurtosis' and 'dskewness' functions to help you 
translate distributional parameters to higher moments.

On 28/06/2012 17:14, stoyan.stoyanov wrote:
> Hi all,
>
> I am wondering whether there is a way to modify the distributions used by
> the distribution.model method in rugarch. Specifically, how can I change the
> kurtosis of the distribution used (change the degrees of freedom in the
> student distribution)? My goal is to fit a model with slightly fatter tails.
>
> Thanks in advance,
> Stoyan
>
> -----
> Stoyan Stoyanov
> The University of Chicago Booth School of Business
> MBA Class of 2013
> (312) 532-0120 | stoyanov at chicagobooth.edu
> --
> View this message in context: http://r.789695.n4.nabble.com/RUGARCH-distribution-selection-tp4634792.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From ccquant at gmail.com  Thu Jun 28 18:42:20 2012
From: ccquant at gmail.com (Ben quant)
Date: Thu, 28 Jun 2012 10:42:20 -0600
Subject: [R-SIG-Finance] financial data on flat matrix
Message-ID: <CAG2PC+e_YC=aW2me_RE2MfOt8MEoZQk_s6htcW2-3ZNDiwwjOQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120628/c68da30d/attachment.pl>

From rharlow86 at gmail.com  Thu Jun 28 19:25:01 2012
From: rharlow86 at gmail.com (Robert Harlow)
Date: Thu, 28 Jun 2012 13:25:01 -0400
Subject: [R-SIG-Finance] Incorrect SVD Calculation
In-Reply-To: <CAHjr2U-RSJ3Od_ZTjY=ECo-_w2OmMWivGJofmKf2tNMP-k1MtA@mail.gmail.com>
References: <17B09E7789D3104E8F5EEB0582A8D66FDF9A36FF81@MSGRTPCCRF2WIN.DMN1.FMR.COM>
	<CAHdfS96VuZ4FP-R3Tg_LUEGAPqop975Ss+E-TYRUQzzCOOwCVg@mail.gmail.com>
	<4FEC7F31.5@burns-stat.com>
	<CAHjr2U-RSJ3Od_ZTjY=ECo-_w2OmMWivGJofmKf2tNMP-k1MtA@mail.gmail.com>
Message-ID: <CAHdfS97ytzhBdAPa6xQJN11xc3HGoE-sxhj32bqDjz7yxvkxwQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120628/35cb6b52/attachment.pl>

From Robert.McGehee at geodecapital.com  Thu Jun 28 21:22:47 2012
From: Robert.McGehee at geodecapital.com (McGehee, Robert)
Date: Thu, 28 Jun 2012 15:22:47 -0400
Subject: [R-SIG-Finance] Incorrect SVD Calculation
In-Reply-To: <CAHjr2U-RSJ3Od_ZTjY=ECo-_w2OmMWivGJofmKf2tNMP-k1MtA@mail.gmail.com>
References: <17B09E7789D3104E8F5EEB0582A8D66FDF9A36FF81@MSGRTPCCRF2WIN.DMN1.FMR.COM>
	<CAHdfS96VuZ4FP-R3Tg_LUEGAPqop975Ss+E-TYRUQzzCOOwCVg@mail.gmail.com>
	<4FEC7F31.5@burns-stat.com>
	<CAHjr2U-RSJ3Od_ZTjY=ECo-_w2OmMWivGJofmKf2tNMP-k1MtA@mail.gmail.com>
Message-ID: <17B09E7789D3104E8F5EEB0582A8D66FDF9A370802@MSGRTPCCRF2WIN.DMN1.FMR.COM>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120628/afd1313d/attachment.ksh>

From drew.harris.nz at gmail.com  Fri Jun 29 07:56:42 2012
From: drew.harris.nz at gmail.com (Drew Harris)
Date: Thu, 28 Jun 2012 22:56:42 -0700 (PDT)
Subject: [R-SIG-Finance] Calculating Hasbrouck's information share and
 Gonzalo-Granger weights on R
In-Reply-To: <1321261736804-4038866.post@n4.nabble.com>
References: <AANLkTinWNEvAVUjk8TYVd_28mEUS_dKnezCPtX64v4Lo@mail.gmail.com>
	<1320790767748-4017779.post@n4.nabble.com>
	<1321183293280-4036386.post@n4.nabble.com>
	<1321211518522-4037279.post@n4.nabble.com>
	<CAP48nPYK-+=d7UCGeBA2t-U4tj4+0TxkKs_E+eyqVETzmLdPRQ@mail.gmail.com>
	<1321261736804-4038866.post@n4.nabble.com>
Message-ID: <1340949402913-4634812.post@n4.nabble.com>

Hi Samit,

I am attempting to create a program to calculate Information Share and
Gonzalo Granger Weights on a 3 or more markets. I was wondering if you had
any luck from Baillie et al. I have read it but I am a novice R programmer
and am a little stumped where to start???

Thanks,

Drew

--
View this message in context: http://r.789695.n4.nabble.com/Calculating-Hasbrouck-s-information-share-and-Gonzalo-Granger-weights-on-R-tp2395838p4634812.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From s.n.stoyanov at gmail.com  Fri Jun 29 17:24:09 2012
From: s.n.stoyanov at gmail.com (stoyan.stoyanov)
Date: Fri, 29 Jun 2012 08:24:09 -0700 (PDT)
Subject: [R-SIG-Finance] RUGARCH eGARCH and variance targeting
Message-ID: <1340983449860-4634896.post@n4.nabble.com>

Hi all,

Again, I am using the rugarch package to fit a GARCH model to an adjusted
daily returns series. I am currently experimenting using an eGARCH instead
of the TGARCH that I have been working with. However, once I use the
variance targeting option with an eGARCH model my *unconditional* variance
estimates just don't make sense - they take on values >1. I am curious
whether this is caused by model mis-specification (eGARCH should not be used
together with variance targeting), or whether it might be a bug in rugarch.
Any thoughts?
As always, code, data and output are below.

*Code:*
spec=ugarchspec(variance.model=list(model=eGARCH, garchOrder=c(1,1),
                                      submodel=NULL,
external.regressors=NULL, variance.targeting=TRUE),
                mean.model=list(armaOrder=c(2,2), include.mean=TRUE,
archm=TRUE, 
                                   archpow=1, arfima=FALSE,
external.regressors=NULL, archex=FALSE),
                distribution.model = "std", start.pars=list(),
fixed.pars=list())

 fit=ugarchfit(spec, data, out.sample=252, solver="solnp",
solver.control=list(), 
               fit.control=list(stationarity=1, fixed.se=0, scale=0))

print(uncvariance(fit))

*Output:*
unconditional 
     1.000259 

*Data:*
http://r.789695.n4.nabble.com/file/n4634896/data.csv data.csv 

Thank you,
Stoyan

-----
Stoyan Stoyanov
The University of Chicago Booth School of Business
MBA Class of 2013
(312) 532-0120 | stoyanov at chicagobooth.edu
--
View this message in context: http://r.789695.n4.nabble.com/RUGARCH-eGARCH-and-variance-targeting-tp4634896.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Fri Jun 29 17:44:43 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Fri, 29 Jun 2012 16:44:43 +0100
Subject: [R-SIG-Finance] RUGARCH eGARCH and variance targeting
In-Reply-To: <1340983449860-4634896.post@n4.nabble.com>
References: <1340983449860-4634896.post@n4.nabble.com>
Message-ID: <4FEDCD6B.2020405@4dscape.com>

Some of the bugs with variance.targeting options are still present in 
some of the methods. Until that is fixed (in the next update) read the 
vignette on how the unconditional variance is calculated for the eGARCH 
model (omega/(1-sum(beta))) which you can easily do using the extracted 
coefficients.
Also please do not keep attaching datasets to the mailing list. 
Bugs/Examples can easily be reproduced using the available pkg datasets 
or some randomly generated one.

-Alexios

On 29/06/2012 16:24, stoyan.stoyanov wrote:
> Hi all,
>
> Again, I am using the rugarch package to fit a GARCH model to an adjusted
> daily returns series. I am currently experimenting using an eGARCH instead
> of the TGARCH that I have been working with. However, once I use the
> variance targeting option with an eGARCH model my *unconditional* variance
> estimates just don't make sense - they take on values >1. I am curious
> whether this is caused by model mis-specification (eGARCH should not be used
> together with variance targeting), or whether it might be a bug in rugarch.
> Any thoughts?
> As always, code, data and output are below.
>
> *Code:*
> spec=ugarchspec(variance.model=list(model=eGARCH, garchOrder=c(1,1),
>                                        submodel=NULL,
> external.regressors=NULL, variance.targeting=TRUE),
>                  mean.model=list(armaOrder=c(2,2), include.mean=TRUE,
> archm=TRUE,
>                                     archpow=1, arfima=FALSE,
> external.regressors=NULL, archex=FALSE),
>                  distribution.model = "std", start.pars=list(),
> fixed.pars=list())
>
>   fit=ugarchfit(spec, data, out.sample=252, solver="solnp",
> solver.control=list(),
>                 fit.control=list(stationarity=1, fixed.se=0, scale=0))
>
> print(uncvariance(fit))
>
> *Output:*
> unconditional
>       1.000259
>
> *Data:*
> http://r.789695.n4.nabble.com/file/n4634896/data.csv data.csv
>
> Thank you,
> Stoyan
>
> -----
> Stoyan Stoyanov
> The University of Chicago Booth School of Business
> MBA Class of 2013
> (312) 532-0120 | stoyanov at chicagobooth.edu
> --
> View this message in context: http://r.789695.n4.nabble.com/RUGARCH-eGARCH-and-variance-targeting-tp4634896.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From s.n.stoyanov at gmail.com  Fri Jun 29 19:45:31 2012
From: s.n.stoyanov at gmail.com (stoyan.stoyanov)
Date: Fri, 29 Jun 2012 10:45:31 -0700 (PDT)
Subject: [R-SIG-Finance] RUGARCH eGARCH and variance targeting
In-Reply-To: <4FEDCD6B.2020405@4dscape.com>
References: <1340983449860-4634896.post@n4.nabble.com>
	<4FEDCD6B.2020405@4dscape.com>
Message-ID: <1340991931973-4634911.post@n4.nabble.com>

Thank you, Alexios. 
I will wait for the revision then. Also, a bit off-topic, but it's not
really worth a separate thread:
There is a "filtered" series that can be included in the Sigma Standard
Error Plots generated by ugarchboot (the green line). My understanding is
that this is simply the realized volatility of the out-of-sample
observations. I am curious how I can get the filtered series values
generating the plot. I assumed it would be simply the standard deviation of
returns but my numbers seem different from what is being graphed. Could you
please confirm that I am reading the series correctly and advise me on how
to get the values?

Thanks,
Stoyan

PS Noted about attaching sample data.

-----
Stoyan Stoyanov
The University of Chicago Booth School of Business
MBA Class of 2013
(312) 532-0120 | stoyanov at chicagobooth.edu
--
View this message in context: http://r.789695.n4.nabble.com/RUGARCH-eGARCH-and-variance-targeting-tp4634896p4634911.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Fri Jun 29 20:21:05 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Fri, 29 Jun 2012 19:21:05 +0100
Subject: [R-SIG-Finance] RUGARCH eGARCH and variance targeting
In-Reply-To: <1340991931973-4634911.post@n4.nabble.com>
References: <1340983449860-4634896.post@n4.nabble.com>
	<4FEDCD6B.2020405@4dscape.com>
	<1340991931973-4634911.post@n4.nabble.com>
Message-ID: <4FEDF211.4020305@4dscape.com>

Stoyan,

On looking more closely at the variance targeting (VT) for eGARCH models 
it is quite problematic. VT-Omega is theoretically supposed to be the 
log(mean(residuals^2)) but this does not work at all well in the 
optimization problem and instead I have simply used the 
mean(residuals^2). Because the uncvariance for eGARCH returns the 
exp(...), the value you get when using VT is wrong. The quick fix is to 
take the log(...) of what is returned (only when using VT...correct in 
all other cases). It is not likely that I will release a fix for this 
anytime soon so you should apply this manual 'fix' else do not use 
variance targeting with eGARCH. Suggestions welcome.

As for the plot, please take the time to look at the underlying code and 
figure out for yourself what it is you need. It is after all open source.

-Alexios

PS There is no 'realized vol' simply filtered vol based on out-of-sample 
data and the model.

On 29/06/2012 18:45, stoyan.stoyanov wrote:
> Thank you, Alexios.
> I will wait for the revision then. Also, a bit off-topic, but it's not
> really worth a separate thread:
> There is a "filtered" series that can be included in the Sigma Standard
> Error Plots generated by ugarchboot (the green line). My understanding is
> that this is simply the realized volatility of the out-of-sample
> observations. I am curious how I can get the filtered series values
> generating the plot. I assumed it would be simply the standard deviation of
> returns but my numbers seem different from what is being graphed. Could you
> please confirm that I am reading the series correctly and advise me on how
> to get the values?
>
> Thanks,
> Stoyan
>
> PS Noted about attaching sample data.
>
> -----
> Stoyan Stoyanov
> The University of Chicago Booth School of Business
> MBA Class of 2013
> (312) 532-0120 | stoyanov at chicagobooth.edu
> --
> View this message in context: http://r.789695.n4.nabble.com/RUGARCH-eGARCH-and-variance-targeting-tp4634896p4634911.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From eric.thungstrom at gmail.com  Sat Jun 30 20:21:03 2012
From: eric.thungstrom at gmail.com (Eric Thungstom)
Date: Sat, 30 Jun 2012 14:21:03 -0400
Subject: [R-SIG-Finance] aligning dates from different sources
Message-ID: <CACv3XECuBFFZXU2AV2Kc_TStHwz6eiGjT3KProj1=dPPoGTaGg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120630/f1aece33/attachment.pl>

From josh.m.ulrich at gmail.com  Sat Jun 30 20:39:58 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sat, 30 Jun 2012 13:39:58 -0500
Subject: [R-SIG-Finance] aligning dates from different sources
In-Reply-To: <CACv3XECuBFFZXU2AV2Kc_TStHwz6eiGjT3KProj1=dPPoGTaGg@mail.gmail.com>
References: <CACv3XECuBFFZXU2AV2Kc_TStHwz6eiGjT3KProj1=dPPoGTaGg@mail.gmail.com>
Message-ID: <CAPPM_gQwYK0Uw9xrrbtimE3erJNAvG5H9Q3e4UAHqr_ZwyVCOw@mail.gmail.com>

On Sat, Jun 30, 2012 at 1:21 PM, Eric Thungstom
<eric.thungstrom at gmail.com> wrote:
> I've downloaded some FRED data (ICSA) using quantmod and I'm trying to
> align it with weekly GSPC data. I'm running into trouble because the ICSA
> data seems to come out on Saturdays and weekly closes of GSPC are usually
> on Friday. I tried a simple fix of subtracting 1 from the ICSA dates but I
> still run into problems around holidays. ?For example, the market was
> closed on April 6, 2012 so I can't align the data for that week.
>
> Any suggestions how I get the dates lined up so I can do some further
> analysis ? ?I know I could use a brute force method of doing a simple cbind
> (combined <-cbind(sp,ICSA[,1])) ?instead of merge but wondering if there's
> a better way that takes holidays into account.
>
cbind.xts simply calls merge.xts, so I'm not sure why you would expect
different results.

You could merge the two raw series, use na.locf to fill in the missing
values, then use apply.weekly to get the last value for each week:

x <- merge(ICSA,Ad(GSPC))
x <- na.locf(x)
y <- apply.weekly(x, last)

> require(quantmod)
> getSymbols('ICSA', src='FRED')
> getSymbols('^GSPC', from='1967-01-01', to=Sys.Date())
> index(ICSA) <-index(ICSA)-1
> sp <-to.weekly(GSPC)[,6]
> names(sp) <-'GSPC'
> combined <-merge(ICSA,sp)
> tail(combined, 15)
<snip>

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com


From jeffrey.ryan at lemnica.com  Sat Jun 30 20:51:28 2012
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Sat, 30 Jun 2012 13:51:28 -0500
Subject: [R-SIG-Finance] aligning dates from different sources
In-Reply-To: <CAPPM_gQwYK0Uw9xrrbtimE3erJNAvG5H9Q3e4UAHqr_ZwyVCOw@mail.gmail.com>
References: <CACv3XECuBFFZXU2AV2Kc_TStHwz6eiGjT3KProj1=dPPoGTaGg@mail.gmail.com>
	<CAPPM_gQwYK0Uw9xrrbtimE3erJNAvG5H9Q3e4UAHqr_ZwyVCOw@mail.gmail.com>
Message-ID: <CABDUZc-MtT4LSb6f4LXOYoDpBrYG6LXV45iV2EXzXbJT57g-pw@mail.gmail.com>

Or you could simply change the index explicitly:

> indexFormat(ICSA) <- "%a"
> head(ICSA)
      ICSA
Sat 208000
Sat 207000
Sat 217000
Sat 204000
Sat 216000
Sat 229000
> index(ICSA) <- as.Date(index(ICSA))-1
> head(ICSA)
      ICSA
Fri 208000
Fri 207000
Fri 217000
Fri 204000
Fri 216000
Fri 229000
> indexFormat(ICSA) <- NULL  # use the default
> head(ICSA)
             ICSA
1967-01-06 208000
1967-01-13 207000
1967-01-20 217000
1967-01-27 204000
1967-02-03 216000
1967-02-10 229000
>

HTH
Jeff



On Sat, Jun 30, 2012 at 1:39 PM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> On Sat, Jun 30, 2012 at 1:21 PM, Eric Thungstom
> <eric.thungstrom at gmail.com> wrote:
>> I've downloaded some FRED data (ICSA) using quantmod and I'm trying to
>> align it with weekly GSPC data. I'm running into trouble because the ICSA
>> data seems to come out on Saturdays and weekly closes of GSPC are usually
>> on Friday. I tried a simple fix of subtracting 1 from the ICSA dates but I
>> still run into problems around holidays.  For example, the market was
>> closed on April 6, 2012 so I can't align the data for that week.
>>
>> Any suggestions how I get the dates lined up so I can do some further
>> analysis ?  I know I could use a brute force method of doing a simple cbind
>> (combined <-cbind(sp,ICSA[,1]))  instead of merge but wondering if there's
>> a better way that takes holidays into account.
>>
> cbind.xts simply calls merge.xts, so I'm not sure why you would expect
> different results.
>
> You could merge the two raw series, use na.locf to fill in the missing
> values, then use apply.weekly to get the last value for each week:
>
> x <- merge(ICSA,Ad(GSPC))
> x <- na.locf(x)
> y <- apply.weekly(x, last)
>
>> require(quantmod)
>> getSymbols('ICSA', src='FRED')
>> getSymbols('^GSPC', from='1967-01-01', to=Sys.Date())
>> index(ICSA) <-index(ICSA)-1
>> sp <-to.weekly(GSPC)[,6]
>> names(sp) <-'GSPC'
>> combined <-merge(ICSA,sp)
>> tail(combined, 15)
> <snip>
>
> Best,
> --
> Joshua Ulrich  |  FOSS Trading: www.fosstrading.com
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From jeffrey.ryan at lemnica.com  Sat Jun 30 21:10:23 2012
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Sat, 30 Jun 2012 14:10:23 -0500
Subject: [R-SIG-Finance] financial data on flat matrix
In-Reply-To: <CAG2PC+e_YC=aW2me_RE2MfOt8MEoZQk_s6htcW2-3ZNDiwwjOQ@mail.gmail.com>
References: <CAG2PC+e_YC=aW2me_RE2MfOt8MEoZQk_s6htcW2-3ZNDiwwjOQ@mail.gmail.com>
Message-ID: <CABDUZc99hyt3QSU6Q0MqzGD_hR-vW0viyPanK8-cBUwLJjrOdA@mail.gmail.com>

You can look into ?endpoints in xts, but you haven't exactly provided
a _reproducible_ example as requested in the posting guidelines.  Not
personally sure what "flat matrix" is for instance.

Also likely why no one has responded thus far.  If you make it _easy_
to answer (simple examples which we can try and run), people tend to
answer.

Jeff

On Thu, Jun 28, 2012 at 11:42 AM, Ben quant <ccquant at gmail.com> wrote:
> Hello,
>
> I'm using the Rbbg package (please suggest an alternative that is faster if
> you know of one). I'd like to get my data into a flat matrix where row
> names are found like this for quarterly data:
>
> get_dates <- function(Start, End,end_of,every)
> {
>   Vec <- as.Date(levels(cut(seq.Date(Start, End, by = end_of),breaks =
> every)))
>   Vec[-1] - 1
> }
> qtrs = get_dates(from_date, to_date,end_of= "month",every = "quarter")
> qtrs = qtrs[length(qtrs):1]
>> qtrs
> [1] "2012-03-31" "2011-12-31" "2011-09-30" "2011-06-30" "2011-03-31"
> "2010-12-31" "2010-09-30" "2010-06-30" "2010-03-31" "2009-12-31"
> [11] "2009-09-30" "2009-06-30" "2009-03-31" "2008-12-31" "2008-09-30"
> "2008-06-30" "2008-03-31" "2007-12-31" "2007-09-30" "2007-06-30"
>
> ...and all companies that report after the quarter end date (above) and
> before the next one are moved back one. For example, if a company reporting
> period ended in Jan. 2012, those values would be on the 2011-12-31 row.
> (These are then adjusted for look-ahead using the actual report date.)
>
> Is there a function that will do this in zoo or another package?
>
> Thanks!
>
> Ben
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From chicagobrownblue at hotmail.com  Sat Jun 30 22:07:24 2012
From: chicagobrownblue at hotmail.com (FJ M)
Date: Sat, 30 Jun 2012 20:07:24 +0000
Subject: [R-SIG-Finance] aligning dates from different sources
In-Reply-To: <CACv3XECuBFFZXU2AV2Kc_TStHwz6eiGjT3KProj1=dPPoGTaGg@mail.gmail.com>
References: <CACv3XECuBFFZXU2AV2Kc_TStHwz6eiGjT3KProj1=dPPoGTaGg@mail.gmail.com>
Message-ID: <BLU161-W62B055E3DE6150378E4865DFE40@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120630/95b6cad5/attachment.pl>

