From shakes108 at gmail.com  Tue Oct  2 09:39:08 2012
From: shakes108 at gmail.com (Shekhar Gupta)
Date: Tue, 2 Oct 2012 13:09:08 +0530
Subject: [R-SIG-Finance] HFT market data/colo sharing
Message-ID: <CAFYMtrDAyM-xj-ohfN13ZvVGYp4VhG+r25djHscbfne3UXR2eg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121002/93e33cc6/attachment.pl>

From rvince99 at gmail.com  Tue Oct  2 19:50:31 2012
From: rvince99 at gmail.com (Ralph Vince)
Date: Tue, 2 Oct 2012 13:50:31 -0400
Subject: [R-SIG-Finance] Dividend-adjusted data
Message-ID: <CAAHNhKVFH=oiBCzNQsogOyLjMF+Zc+Tr3JUPDCfWbc0q2u5kjg@mail.gmail.com>

How do you guys get dividend-adjusted data (from, say, yahoo) ? In
other words, if a stock goes ex-div today, on a 50 cent/share dividend
today, how do I obtain that data with  it 50 cents less each day
prior? Is there a way to get yahoo or google data like that ? Thanks


From zach.mayer at gmail.com  Tue Oct  2 19:54:48 2012
From: zach.mayer at gmail.com (Zachary Mayer)
Date: Tue, 2 Oct 2012 13:54:48 -0400
Subject: [R-SIG-Finance] Dividend-adjusted data
In-Reply-To: <CAAHNhKVFH=oiBCzNQsogOyLjMF+Zc+Tr3JUPDCfWbc0q2u5kjg@mail.gmail.com>
References: <CAAHNhKVFH=oiBCzNQsogOyLjMF+Zc+Tr3JUPDCfWbc0q2u5kjg@mail.gmail.com>
Message-ID: <CAEr64e8X32iq07tSZjzeTymFkBXRUcMv_+gYtQx-rxukkxy=ow@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121002/6b5216ad/attachment.pl>

From rvince99 at gmail.com  Tue Oct  2 20:02:11 2012
From: rvince99 at gmail.com (Ralph Vince)
Date: Tue, 2 Oct 2012 14:02:11 -0400
Subject: [R-SIG-Finance] Dividend-adjusted data
In-Reply-To: <CAEr64e8X32iq07tSZjzeTymFkBXRUcMv_+gYtQx-rxukkxy=ow@mail.gmail.com>
References: <CAAHNhKVFH=oiBCzNQsogOyLjMF+Zc+Tr3JUPDCfWbc0q2u5kjg@mail.gmail.com>
	<CAEr64e8X32iq07tSZjzeTymFkBXRUcMv_+gYtQx-rxukkxy=ow@mail.gmail.com>
Message-ID: <CAAHNhKV3jjjYQh2nimvg7oO8yir0Fx0DrCO80Vc3f5x1sU04eg@mail.gmail.com>

Ah right right. Exactly what I am looking for, thank you.

On Tue, Oct 2, 2012 at 1:54 PM, Zachary Mayer <zach.mayer at gmail.com> wrote:
> I use quantmod::adjustOHLC to adjust for splits and dividends, based on
> yahoo:
> http://rgm2.lab.nig.ac.jp/RGM2/func.php?rd_id=quantmod:adjustOHLC
>
> On Tue, Oct 2, 2012 at 1:50 PM, Ralph Vince <rvince99 at gmail.com> wrote:
>>
>> How do you guys get dividend-adjusted data (from, say, yahoo) ? In
>> other words, if a stock goes ex-div today, on a 50 cent/share dividend
>> today, how do I obtain that data with  it 50 cents less each day
>> prior? Is there a way to get yahoo or google data like that ? Thanks
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>
>


From markknecht at gmail.com  Tue Oct  2 21:13:35 2012
From: markknecht at gmail.com (Mark Knecht)
Date: Tue, 2 Oct 2012 12:13:35 -0700
Subject: [R-SIG-Finance] Read some data from TradeStation to display using
	barChart
Message-ID: <CAK2H+eeyfGrqSduTcVa_kE3H2sSZujRDH0qL0gjMjjnw3dJcJQ@mail.gmail.com>

Hi,
   I haven't done any R programming in maybe 2 years but I got
interested recently in looking at something and quantmod seems like it
would be good for a basic start. As a first step I'm trying to get
some price data saved in a running strategy on TradeStation into a
barChart using quantmod.

   The following code seems to read my data file successfully and
produces reasonable looking (to me anyway) data.  I think I need to
convert the data to xts to get barChart to work but I cannot quite get
there. Is there a straightforward way to do this? Maybe the date
format isn't right for use with xts?

   Can someone point out how to do this?

Thanks in advance,
Mark


require(reshape)
require(TTR)
require(ggplot2)
require(chron)
require(quantmod)

### Requires MWKFunctions.R be loaded first
source("C:/Documents and Settings/Mark/My
Documents/R/MWKFunctions/MWKFunctions.R")

SystemTable = read.table("C:\\Test1.csv",sep=",",header=TRUE)
SystemTable[,1] = TStoDate(SystemTable[,1])
typeof(SystemTable)

SystemTable[1:4,1:7]

SystemXTS = as.xts(SystemTable[,1:7])

barChart(SystemTable)



<SNIP>
>
> ### Requires MWKFunctions.R be loaded first
> source("C:/Documents and Settings/Mark/My Documents/R/MWKFunctions/MWKFunctions.R")
>
> SystemTable = read.table("C:\\Test1.csv",sep=",",header=TRUE)
> SystemTable[,1] = TStoDate(SystemTable[,1])
> typeof(SystemTable)
[1] "list"
>
> SystemTable[1:4,1:7]
        Date Time   Open    High     Low   Close Volume
1 2011-09-20 2225 1175.5 1176.00 1174.25 1174.50    102
2 2011-09-20 2230 1174.5 1175.50 1174.25 1175.25    267
3 2011-09-20 2235 1175.5 1175.75 1174.00 1175.00    248
4 2011-09-20 2240 1175.0 1175.50 1175.00 1175.25    135
>
> SystemXTS = as.xts(SystemTable[,1:7])
Error in as.POSIXlt.character(x, tz, ...) :
  character string is not in a standard unambiguous format
>
> barChart(SystemTable)
Error in try.xts(x, error = "chartSeries requires an xtsible object") :
  chartSeries requires an xtsible object
>


From michael.weylandt at gmail.com  Tue Oct  2 22:09:31 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Tue, 2 Oct 2012 21:09:31 +0100
Subject: [R-SIG-Finance] Read some data from TradeStation to display
	using barChart
In-Reply-To: <CAK2H+eeyfGrqSduTcVa_kE3H2sSZujRDH0qL0gjMjjnw3dJcJQ@mail.gmail.com>
References: <CAK2H+eeyfGrqSduTcVa_kE3H2sSZujRDH0qL0gjMjjnw3dJcJQ@mail.gmail.com>
Message-ID: <CAAmySGPcnysP40mje+2JNJPcoJgrDo4Fv0h+awHzB7ZNxF1FxA@mail.gmail.com>

On Tue, Oct 2, 2012 at 8:13 PM, Mark Knecht <markknecht at gmail.com> wrote:
> Hi,
>    I haven't done any R programming in maybe 2 years but I got
> interested recently in looking at something and quantmod seems like it
> would be good for a basic start. As a first step I'm trying to get
> some price data saved in a running strategy on TradeStation into a
> barChart using quantmod.
>
>    The following code seems to read my data file successfully and
> produces reasonable looking (to me anyway) data.  I think I need to
> convert the data to xts to get barChart to work but I cannot quite get
> there. Is there a straightforward way to do this? Maybe the date
> format isn't right for use with xts?
>
>    Can someone point out how to do this?
>
> Thanks in advance,
> Mark
>
>
> require(reshape)
> require(TTR)
> require(ggplot2)
> require(chron)
> require(quantmod)
>
> ### Requires MWKFunctions.R be loaded first
> source("C:/Documents and Settings/Mark/My
> Documents/R/MWKFunctions/MWKFunctions.R")
>

Hi Mark,

We don't have any of these functions, so we can't actually debug your
code. If you want real help, try whipping up a reproducible example:

http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

That said,

> SystemTable = read.table("C:\\Test1.csv",sep=",",header=TRUE)
> SystemTable[,1] = TStoDate(SystemTable[,1])
> typeof(SystemTable)
>
> SystemTable[1:4,1:7]
>
> SystemXTS = as.xts(SystemTable[,1:7])
>

What does SystemTable wind up looking like? You might need to do
something like this instead:

SystemXTS <- xts(SystemTable[,2:7], as.POSIXct(SystemTable[,1], format
= "XXXXX"))

where you put in the appropriate format string for as.POSIXct(). See
?strptime for the details.

What might also be easier is simply:

SystemXTS <- as.xts(read.zoo("C:\\Test1.csv"))

Cheers,
Michael

> barChart(SystemTable)
>
>
>
> <SNIP>
>>
>> ### Requires MWKFunctions.R be loaded first
>> source("C:/Documents and Settings/Mark/My Documents/R/MWKFunctions/MWKFunctions.R")
>>
>> SystemTable = read.table("C:\\Test1.csv",sep=",",header=TRUE)
>> SystemTable[,1] = TStoDate(SystemTable[,1])
>> typeof(SystemTable)
> [1] "list"
>>
>> SystemTable[1:4,1:7]
>         Date Time   Open    High     Low   Close Volume
> 1 2011-09-20 2225 1175.5 1176.00 1174.25 1174.50    102
> 2 2011-09-20 2230 1174.5 1175.50 1174.25 1175.25    267
> 3 2011-09-20 2235 1175.5 1175.75 1174.00 1175.00    248
> 4 2011-09-20 2240 1175.0 1175.50 1175.00 1175.25    135
>>
>> SystemXTS = as.xts(SystemTable[,1:7])
> Error in as.POSIXlt.character(x, tz, ...) :
>   character string is not in a standard unambiguous format
>>
>> barChart(SystemTable)
> Error in try.xts(x, error = "chartSeries requires an xtsible object") :
>   chartSeries requires an xtsible object
>>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gyollin at r-programming.org  Tue Oct  2 23:28:50 2012
From: gyollin at r-programming.org (Guy Yollin)
Date: Tue, 02 Oct 2012 14:28:50 -0700
Subject: [R-SIG-Finance] Read some data from TradeStation to display
 using barChart
In-Reply-To: <CAK2H+eeyfGrqSduTcVa_kE3H2sSZujRDH0qL0gjMjjnw3dJcJQ@mail.gmail.com>
References: <CAK2H+eeyfGrqSduTcVa_kE3H2sSZujRDH0qL0gjMjjnw3dJcJQ@mail.gmail.com>
Message-ID: <506B5C92.5000005@r-programming.org>

Mark,

Here's a code snippet that I had that reads a file exported from 
TradeStation, creates an xts object, and then generates a barChart.

See if you can make this work for what you want to do.

G



fn1 <- "GBPUSD.txt"
dat <- read.table(file=fn1,sep=",",header=T,as.is=T)
tm <- strptime(
   paste(dat[,"Date"], sprintf("%04d",dat[,"Time"])),
   format="%m/%d/%Y %H%M")


GBP <- xts(x=dat[,c("Open","High","Low","Close")],order.by=tm)
barChart(GBP,TA='addSMA(n = 7, col = "red");addSMA(n = 44, col = "blue")',
   theme="white",name="GBPUSD")

On 10/2/2012 12:13 PM, Mark Knecht wrote:
> Hi,
>     I haven't done any R programming in maybe 2 years but I got
> interested recently in looking at something and quantmod seems like it
> would be good for a basic start. As a first step I'm trying to get
> some price data saved in a running strategy on TradeStation into a
> barChart using quantmod.
>
>     The following code seems to read my data file successfully and
> produces reasonable looking (to me anyway) data.  I think I need to
> convert the data to xts to get barChart to work but I cannot quite get
> there. Is there a straightforward way to do this? Maybe the date
> format isn't right for use with xts?
>
>     Can someone point out how to do this?
>
> Thanks in advance,
> Mark
>
>
> require(reshape)
> require(TTR)
> require(ggplot2)
> require(chron)
> require(quantmod)
>
> ### Requires MWKFunctions.R be loaded first
> source("C:/Documents and Settings/Mark/My
> Documents/R/MWKFunctions/MWKFunctions.R")
>
> SystemTable = read.table("C:\\Test1.csv",sep=",",header=TRUE)
> SystemTable[,1] = TStoDate(SystemTable[,1])
> typeof(SystemTable)
>
> SystemTable[1:4,1:7]
>
> SystemXTS = as.xts(SystemTable[,1:7])
>
> barChart(SystemTable)
>
>
>
> <SNIP>
>> ### Requires MWKFunctions.R be loaded first
>> source("C:/Documents and Settings/Mark/My Documents/R/MWKFunctions/MWKFunctions.R")
>>
>> SystemTable = read.table("C:\\Test1.csv",sep=",",header=TRUE)
>> SystemTable[,1] = TStoDate(SystemTable[,1])
>> typeof(SystemTable)
> [1] "list"
>> SystemTable[1:4,1:7]
>          Date Time   Open    High     Low   Close Volume
> 1 2011-09-20 2225 1175.5 1176.00 1174.25 1174.50    102
> 2 2011-09-20 2230 1174.5 1175.50 1174.25 1175.25    267
> 3 2011-09-20 2235 1175.5 1175.75 1174.00 1175.00    248
> 4 2011-09-20 2240 1175.0 1175.50 1175.00 1175.25    135
>> SystemXTS = as.xts(SystemTable[,1:7])
> Error in as.POSIXlt.character(x, tz, ...) :
>    character string is not in a standard unambiguous format
>> barChart(SystemTable)
> Error in try.xts(x, error = "chartSeries requires an xtsible object") :
>    chartSeries requires an xtsible object
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>


From nitin.juneja at gmail.com  Wed Oct  3 01:21:14 2012
From: nitin.juneja at gmail.com (Nitin Juneja)
Date: Tue, 2 Oct 2012 16:21:14 -0700
Subject: [R-SIG-Finance] Calculating FV of a Uniform Stream using TVM
Message-ID: <CAJFk3=xXMXoF2e1Q0hbwf-rpu8fY3O2zty7f4NW0UZB51VGRRw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121002/9ba1f1ab/attachment.pl>

From michael.weylandt at gmail.com  Wed Oct  3 01:31:49 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Wed, 3 Oct 2012 00:31:49 +0100
Subject: [R-SIG-Finance] Calculating FV of a Uniform Stream using TVM
In-Reply-To: <CAJFk3=xXMXoF2e1Q0hbwf-rpu8fY3O2zty7f4NW0UZB51VGRRw@mail.gmail.com>
References: <CAJFk3=xXMXoF2e1Q0hbwf-rpu8fY3O2zty7f4NW0UZB51VGRRw@mail.gmail.com>
Message-ID: <CAAmySGOr4u-_Nw50d-1Bno520bCSKSBeMXGo6R2GQy--S5VPww@mail.gmail.com>

On Wed, Oct 3, 2012 at 12:21 AM, Nitin Juneja <nitin.juneja at gmail.com> wrote:
> I am perplexed. The problem I am working is,
>
> Question : How much money must Carol deposit every year starting 1 year
> from now at 5.5 % per year in order to accumulate $6000 seven years from
> now?
>
> My correct solution is :
>
>> 6000/usfv(5.5,7)
> [1] 725.7865
>
> I think this should also work... but does not:
>> tvm(i=5.5,n=7,fv=-6000,pmt=NA,pyr=1)
>
> Time Value of Money model
>
>    I% #N PV    FV    PMT Days #Adv P/YR C/YR
> 1 5.5  7  0 -6000 687.95  360    0    1    1
>
> I am getting a difference PMT amount. Does anyone have an insight in why I
> a getting the difference
>

Hi Nitin,

This is the feel of a homework assignment and this --  and all the
R-help lists -- have a no homework policy (too many academics involved
I suppose! R was, after all, originally teaching software) so we can't
really give you too much help here.

To answer your question properly, we'd need to see a reproducible example

http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

In particular giving the origin of the functions tvm() and usfv().

Without those, things which immediately come to mind: i) simple vs.
compounding; ii) frequency of compounding; iii) arithmetic vs
geometric returns. (These are all of course related in some sense)
I've played with the numbers a bit and the discrepancy is likely in
that vein.

Cheers,
Michael


From josh.m.ulrich at gmail.com  Wed Oct  3 01:50:53 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 2 Oct 2012 18:50:53 -0500
Subject: [R-SIG-Finance] Calculating FV of a Uniform Stream using TVM
In-Reply-To: <CAJFk3=xXMXoF2e1Q0hbwf-rpu8fY3O2zty7f4NW0UZB51VGRRw@mail.gmail.com>
References: <CAJFk3=xXMXoF2e1Q0hbwf-rpu8fY3O2zty7f4NW0UZB51VGRRw@mail.gmail.com>
Message-ID: <CAPPM_gSSD=AkkaKicrDHOKk2q+96iVtFroULA02RJAriOa1ifA@mail.gmail.com>

Please don't cross post: http://stackoverflow.com/q/12699891/271616
--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


On Tue, Oct 2, 2012 at 6:21 PM, Nitin Juneja <nitin.juneja at gmail.com> wrote:
> I am perplexed. The problem I am working is,
>
> Question : How much money must Carol deposit every year starting 1 year
> from now at 5.5 % per year in order to accumulate $6000 seven years from
> now?
>
> My correct solution is :
>
>> 6000/usfv(5.5,7)
> [1] 725.7865
>
> I think this should also work... but does not:
>> tvm(i=5.5,n=7,fv=-6000,pmt=NA,pyr=1)
>
> Time Value of Money model
>
>    I% #N PV    FV    PMT Days #Adv P/YR C/YR
> 1 5.5  7  0 -6000 687.95  360    0    1    1
>
> I am getting a difference PMT amount. Does anyone have an insight in why I
> a getting the difference
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From 8nabarns at iimahd.ernet.in  Wed Oct  3 10:42:23 2012
From: 8nabarns at iimahd.ernet.in (Nisseem Nabar)
Date: Wed, 3 Oct 2012 14:12:23 +0530
Subject: [R-SIG-Finance] Quasi-Turtle Strategy Implementation in quantstrat
Message-ID: <CAAhmNyUS4er3=sjaZwZdpVhHh1ngGVUHcFc4dg2_k52ho4Xauw@mail.gmail.com>

Hi,

I would first like to thank the creators of quantstrat and related packages
for their excellent work. It is so much easier to backtest strategies using
these as compared to MATLAB/Excel.

I have been working on creating a simple backtest for the Turtle rules
using quantstrat based on the blotter demo and have had excellent guidance
and great help from Joshua Ulrich.

I am currently facing the problem that my backtest does not seem to take
all the trades that it should. I have changed the parameters a little bit
and wonder if that is what is causing the problems.

e.g: If the rule is to go long above the 10-day high, my backtest misses
the first time the asset class crosses the appropriate level. I am
wondering if this is happening in multiple places because I have backtested
the same strategy in MATLAB and the results are almost mirror images of
each other. I am attaching my code, one data set and a portion of the
mktdata variable. There should be a long trade on day 14 in mktdata that is
missed.

My code is currently missing Turtle like position sizing.

Would love to have feedback.

Thanks,

Nisseem S. Nabar
http://in.linkedin.com/in/nissimnabar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121003/cde6d4e4/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: funTurtles_qsDemo.R
Type: application/octet-stream
Size: 10938 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121003/cde6d4e4/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Crude.csv
Type: text/csv
Size: 112810 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121003/cde6d4e4/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: CrudeMktData.csv
Type: text/csv
Size: 21884 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121003/cde6d4e4/attachment-0001.bin>

From elephann at gmail.com  Wed Oct  3 19:02:39 2012
From: elephann at gmail.com (elephann)
Date: Wed, 3 Oct 2012 10:02:39 -0700 (PDT)
Subject: [R-SIG-Finance] computing the actual/realized efficient
 frontier points and extracting frontier return and covariance data points
In-Reply-To: <1332957820878-4513142.post@n4.nabble.com>
References: <1332957820878-4513142.post@n4.nabble.com>
Message-ID: <1349283759030-4644905.post@n4.nabble.com>

the efficient frontier data stored in "Frontier" which is a fPORTFOLIO class
with different slots,
>Frontier  # enter you can see all data
you can see the slots name via 
getslots(Frontier) # here comes
  call          data          spec   constraints     portfolio         title  
description 
       "call" "fPFOLIODATA" "fPFOLIOSPEC"  "fPFOLIOCON"  "fPFOLIOVAL"  
"character"   "character" 
you can get the data for return, weight,or risks with following code:
getTargetReturn(Frontier at portfolio)
getTargetRisk(Frontier at portfolio)
getWeights(Frontier at portfolio)





--
View this message in context: http://r.789695.n4.nabble.com/computing-the-actual-realized-efficient-frontier-points-and-extracting-frontier-return-and-covariancs-tp4513142p4644905.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From markknecht at gmail.com  Thu Oct  4 01:12:27 2012
From: markknecht at gmail.com (Mark Knecht)
Date: Wed, 3 Oct 2012 16:12:27 -0700
Subject: [R-SIG-Finance] Test for new event and save data in new data.frame
Message-ID: <CAK2H+eeZE-cU-DYXqTsRAdpP=_L0TqmZ2P2xUZM4jy9u91dpNQ@mail.gmail.com>

Hi again,
   Again, I haven't touched R in a couple of years and am just getting
going on a little idea. Thanks in advance.

   If you all think this is better done somewhere else like
StackOverflow let me know and I'll post there instead.

   The following very simplified code is meant to represent reading
through price data (PriceData) to extract what is happening with
prices after a trade has started and as it progresses. The column MP
(MarketPosition) is lagged. When MP switches from 0 to 1 a new long
trade is entered. I'd like to collect the next 5 bars of data for that
trade in a data.frame called TradeData. Each new trade gets a new
column. In this example there are 4 trades occurring at bars 3, 8, 11
& 15. The results for this data are a data.frame with 5 rows and 4
columns. (The real one will be much larger...)

QUESTIONS:

1) How do I do a logical test something like ((c3 = 1) AND (c4 = 0))
for each row in PriceData to determine when a trade started?

2) If the test above is true, how do I copy c2[row:(row+4)] into a
element an add it to TradeData?

I'm guessing this might be a job for one of the apply functions but
I'm not sure which one or how to do it. The couple of R books I've got
aren't making it clear yet,

   In the code below EVERYTHING below the comment block is only to
show what I want to create.  It will all go away when the questions
above turn into R code.

   I hope this is reasonably clear. Let me know if it isn't.

Thanks,
Mark




MyLag <- function(x, k) c(rep(NA, k), x[1:(length(x)-k)] )

c1 = 1:20
c2 = c(5,6,7,8,1,2,3,4,7,2,3,4,5,7,8,9,1,2,1,1)
c3 = c(0,0,1,1,1,0,0,1,0,0,1,1,0,0,1,1,1,0,0,0)
c4 = MyLag(c3, 1)


PriceData = data.frame(cbind(c1,c2,c3,c4))
colnames(PriceData) = c("BarNum","Price", "MP","LagMP")

PriceData

# This represents the data.frame I'd like to create -> (TradeData)
#
# When ((c3 = 1) AND (c4 = 0)) then copy c2[row:row+4] and
# put it in a new column in the data frame
# Eventually there is one column in the data.frame for
# each trade

t1 = c(7,8,1,2,3)
t2 = c(4,7,2,3,4)
t3 = c(3,4,5,7,8)
t4 = c(8,9,1,2,1)

TradeData = data.frame(cbind(t1,t2,t3,t4))

TradeData


From michael.weylandt at gmail.com  Thu Oct  4 16:49:43 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Thu, 4 Oct 2012 15:49:43 +0100
Subject: [R-SIG-Finance] Test for new event and save data in new
	data.frame
In-Reply-To: <CAK2H+eeZE-cU-DYXqTsRAdpP=_L0TqmZ2P2xUZM4jy9u91dpNQ@mail.gmail.com>
References: <CAK2H+eeZE-cU-DYXqTsRAdpP=_L0TqmZ2P2xUZM4jy9u91dpNQ@mail.gmail.com>
Message-ID: <CAAmySGMm1h-K1rFOrR9vdvAGTDOUmiG730wHcy2F8rycWUwfBQ@mail.gmail.com>

On Thu, Oct 4, 2012 at 12:12 AM, Mark Knecht <markknecht at gmail.com> wrote:
> Hi again,
>    Again, I haven't touched R in a couple of years and am just getting
> going on a little idea. Thanks in advance.
>
>    If you all think this is better done somewhere else like
> StackOverflow let me know and I'll post there instead.
>
>    The following very simplified code is meant to represent reading
> through price data (PriceData) to extract what is happening with
> prices after a trade has started and as it progresses. The column MP
> (MarketPosition) is lagged. When MP switches from 0 to 1 a new long
> trade is entered. I'd like to collect the next 5 bars of data for that
> trade in a data.frame called TradeData. Each new trade gets a new
> column. In this example there are 4 trades occurring at bars 3, 8, 11
> & 15. The results for this data are a data.frame with 5 rows and 4
> columns. (The real one will be much larger...)
>
> QUESTIONS:
>
> 1) How do I do a logical test something like ((c3 = 1) AND (c4 = 0))
> for each row in PriceData to determine when a trade started?
>
> 2) If the test above is true, how do I copy c2[row:(row+4)] into a
> element an add it to TradeData?
>
> I'm guessing this might be a job for one of the apply functions but
> I'm not sure which one or how to do it. The couple of R books I've got
> aren't making it clear yet,
>
>    In the code below EVERYTHING below the comment block is only to
> show what I want to create.  It will all go away when the questions
> above turn into R code.
>
>    I hope this is reasonably clear. Let me know if it isn't.
>
> Thanks,
> Mark
>
>
>
>
> MyLag <- function(x, k) c(rep(NA, k), x[1:(length(x)-k)] )
>
> c1 = 1:20
> c2 = c(5,6,7,8,1,2,3,4,7,2,3,4,5,7,8,9,1,2,1,1)
> c3 = c(0,0,1,1,1,0,0,1,0,0,1,1,0,0,1,1,1,0,0,0)
> c4 = MyLag(c3, 1)
>
>
> PriceData = data.frame(cbind(c1,c2,c3,c4))
> colnames(PriceData) = c("BarNum","Price", "MP","LagMP")
>
> PriceData
>
> # This represents the data.frame I'd like to create -> (TradeData)
> #
> # When ((c3 = 1) AND (c4 = 0)) then copy c2[row:row+4] and
> # put it in a new column in the data frame
> # Eventually there is one column in the data.frame for
> # each trade
>
> t1 = c(7,8,1,2,3)
> t2 = c(4,7,2,3,4)
> t3 = c(3,4,5,7,8)
> t4 = c(8,9,1,2,1)
>
> TradeData = data.frame(cbind(t1,t2,t3,t4))

This is a terrible awful and altogether wretched idiom. Instead just
do data.frame(t1, t2, t3, t4). cbind()-ing completely invalidates the
entire point of a data.frame() by coercing all its inputs to a common
class.  [Don't take it personally: we've just been working to stamp it
out every where we see it on the main R-help list for a few months
now]

>
> TradeData
>

Best advice: don't use a data.frame() for this sort of data. Instead,
use a proper time series object, like xts or zoo. These also provide a
lag function for you:

library(xts)

PriceData <- xts(cbind(BarNum = 1:20, Price =
c(5,6,7,8,1,2,3,4,7,2,3,4,5,7,8,9,1,2,1,1), MP =
c(0,0,1,1,1,0,0,1,0,0,1,1,0,0,1,1,1,0,0,0)), Sys.Date() + 1:20)

print(PriceData)

# Now we can add on the lag column:

PriceData <- cbind(PriceData, LagMP = lag(PriceData[,3], 3))

with(PriceData, (MP == 1) & (MP.1== 0)) # Gives you the rows you want
to manipulate

Cheers,
Michael


From singletonthebest at msn.com  Thu Oct  4 18:23:10 2012
From: singletonthebest at msn.com (Simone Gogna)
Date: Thu, 4 Oct 2012 18:23:10 +0200
Subject: [R-SIG-Finance] agent-based model
Message-ID: <DUB107-ds94886B8BB04FC22479EA7D3840@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121004/493be4fe/attachment.pl>

From markleeds2 at gmail.com  Thu Oct  4 18:45:05 2012
From: markleeds2 at gmail.com (Mark Leeds)
Date: Thu, 4 Oct 2012 12:45:05 -0400
Subject: [R-SIG-Finance] agent-based model
In-Reply-To: <DUB107-ds94886B8BB04FC22479EA7D3840@phx.gbl>
References: <DUB107-ds94886B8BB04FC22479EA7D3840@phx.gbl>
Message-ID: <CAHz+bWZts=hdxewSQq+cFGk2++owJ4o4XywOFkFu-Fw4q5=qhw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121004/870ea273/attachment.pl>

From jeff.a.ryan at gmail.com  Thu Oct  4 18:54:14 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Thu, 4 Oct 2012 11:54:14 -0500
Subject: [R-SIG-Finance] agent-based model
In-Reply-To: <CAHz+bWZts=hdxewSQq+cFGk2++owJ4o4XywOFkFu-Fw4q5=qhw@mail.gmail.com>
References: <DUB107-ds94886B8BB04FC22479EA7D3840@phx.gbl>
	<CAHz+bWZts=hdxewSQq+cFGk2++owJ4o4XywOFkFu-Fw4q5=qhw@mail.gmail.com>
Message-ID: <CABDUZc9QqfODFti4tWVRxTaAfc6NQ245ztc_gzZdeJ4O3+qgsQ@mail.gmail.com>

>From R/Finance 2010 (and 2011), Michael North gave a few talks.

http://www.rinfinance.com/agenda/2010/MichaelNorth.pdf

Repast Simphony (he is the lead dev on the project from Argonne) is
what he uses and has connectors to/from R.

I have no personal experience with this package though.

Jeff

On Thu, Oct 4, 2012 at 11:45 AM, Mark Leeds <markleeds2 at gmail.com> wrote:
> hi: marcos lopzx deprado has a book "advances in HF strategies".
> In the first chapter, he gives a reasonably straightforward example of
> an agent based model. He doesn't show the code and I doubt he used  R but
> it seems like R coujld be definitely used to recreate what he did there. I
> don't know of R packages that do it ( there are
> too many variations that are not generalizable but who knows.
> maybe there is one ) but R can be used to program his agent based approach.
> I assume by agent based, you are referring to a market microstructure type
> model where  you have buyers and sellers entering the book at different
> rates etc.
>
> I'm not recommending marcos's  book only because I haven't gone through it
> completely but I did read the first chapter and thought his  example was
> interesting. It's a re-illustration of a model developed by ohara and
> easley, I think. you can email marcos also. He's
> a very knowledgable, generous and helpful person. if you need his email
> addresss, ask me offline and I'll send it to you.
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> On Thu, Oct 4, 2012 at 12:23 PM, Simone Gogna <singletonthebest at msn.com>wrote:
>
>> Hi all,
>> is there anyone able to give me some indications about R and agent-based
>> modeling?
>> I am looking forward to build an agent-based model of a simple stock
>> market for my master thesis to evaluate the effect of high-frequency
>> trading activity.
>>
>> In  very general terms  it may go as follows:
>>
>> 1) create two different kind of agent, i.e. high-frequency traders and
>> value-investors, each one with its own trading strategy
>>
>> 2) the two category of agents interact and this provoke stock price
>> fluctuations
>>
>> Since I took a course on R and I am quite familiar with it (at least to
>> make time series analysis), I was wondering whether it could be possible to
>> use R to this purpose.
>> If, to your knowledge, there exist some specific book or some already
>> existing model that use R to create agent-based model of financial markets,
>> I will be very willing to take a look at them.
>>
>> I am really sorry if this is not the right place to ask for this kind of
>> question.
>> I am not able at this very moment of my work to give you any reproducible
>> code for example since I don?t even know if it is possible to use R for
>> this kind of work.
>>
>> thanks and best regards,
>> Simone Gogna
>>         [[alternative HTML version deleted]]
>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
>         [[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com


From geoff at wrightville.org  Thu Oct  4 19:48:05 2012
From: geoff at wrightville.org (geoff at wrightville.org)
Date: Thu, 4 Oct 2012 10:48:05 -0700
Subject: [R-SIG-Finance] agent-based model
In-Reply-To: <DUB107-ds94886B8BB04FC22479EA7D3840@phx.gbl>
References: <DUB107-ds94886B8BB04FC22479EA7D3840@phx.gbl>
Message-ID: <118dd40a970f8336d4ac2b353c15c0a8.squirrel@webmail.wrightville.org>

Simone,

Interesting topic for a master's thesis. There is a lot of information out
there but for a simple introduction and an example that you can get
working in a couple of hours, try reading the article:

R as a Simulation Platform in Ecological Modelling

http://cran.r-project.org/doc/Rnews/Rnews_2003-3.pdf

It is not a financial market but it will give you the necessary tools to
build one. I personally found this article to be one of the more intuitive
explanations out there.

Geoff


 > Hi all,
> is there anyone able to give me some indications about R and agent-based
> modeling?
> I am looking forward to build an agent-based model of a simple stock
> market for my master thesis to evaluate the effect of high-frequency
> trading activity.
>
> In  very general terms  it may go as follows:
>
> 1) create two different kind of agent, i.e. high-frequency traders and
> value-investors, each one with its own trading strategy
>
> 2) the two category of agents interact and this provoke stock price
> fluctuations
>
> Since I took a course on R and I am quite familiar with it (at least to
> make time series analysis), I was wondering whether it could be possible
> to use R to this purpose.
> If, to your knowledge, there exist some specific book or some already
> existing model that use R to create agent-based model of financial
> markets, I will be very willing to take a look at them.
>
> I am really sorry if this is not the right place to ask for this kind of
> question.
> I am not able at this very moment of my work to give you any reproducible
> code for example since I don???t even know if it is possible to use R for
> this kind of work.
>
> thanks and best regards,
> Simone Gogna
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.


From markknecht at gmail.com  Thu Oct  4 20:11:03 2012
From: markknecht at gmail.com (Mark Knecht)
Date: Thu, 4 Oct 2012 11:11:03 -0700
Subject: [R-SIG-Finance] Test for new event and save data in new
	data.frame
In-Reply-To: <CAAmySGMm1h-K1rFOrR9vdvAGTDOUmiG730wHcy2F8rycWUwfBQ@mail.gmail.com>
References: <CAK2H+eeZE-cU-DYXqTsRAdpP=_L0TqmZ2P2xUZM4jy9u91dpNQ@mail.gmail.com>
	<CAAmySGMm1h-K1rFOrR9vdvAGTDOUmiG730wHcy2F8rycWUwfBQ@mail.gmail.com>
Message-ID: <CAK2H+edMnr+YN6E=Le8n7GE4KbnAyi_nkDx=VbNeJq08YZz9AA@mail.gmail.com>

On Thu, Oct 4, 2012 at 7:49 AM, R. Michael Weylandt
<michael.weylandt at gmail.com> wrote:
> On Thu, Oct 4, 2012 at 12:12 AM, Mark Knecht <markknecht at gmail.com> wrote:
<SNIP>
>> TradeData = data.frame(cbind(t1,t2,t3,t4))
>
> This is a terrible awful and altogether wretched idiom. Instead just
> do data.frame(t1, t2, t3, t4). cbind()-ing completely invalidates the
> entire point of a data.frame() by coercing all its inputs to a common
> class.  [Don't take it personally: we've just been working to stamp it
> out every where we see it on the main R-help list for a few months
> now]
>

Hi Michael,

Not in the least insulted or anything like that. I'm just trying to
learn. Thanks for alluding to reasons it's not preferred. I'll try to
keep that in mind.

>
> Best advice: don't use a data.frame() for this sort of data. Instead,
> use a proper time series object, like xts or zoo. These also provide a
> lag function for you:
>
> library(xts)
>
> PriceData <- xts(cbind(BarNum = 1:20, Price =
> c(5,6,7,8,1,2,3,4,7,2,3,4,5,7,8,9,1,2,1,1), MP =
> c(0,0,1,1,1,0,0,1,0,0,1,1,0,0,1,1,1,0,0,0)), Sys.Date() + 1:20)
>
> print(PriceData)
>
> # Now we can add on the lag column:
>
> PriceData <- cbind(PriceData, LagMP = lag(PriceData[,3], 3))
>
> with(PriceData, (MP == 1) & (MP.1== 0)) # Gives you the rows you want
> to manipulate
>
> Cheers,
> Michael

OK, that all works pretty well including the with(PriceData, ... part.
Thanks. One question though - Is the 'LagMP' inside the cbind supposed
to give me the name LagMP in the result? The columns are named MP.1 &
MP.2 so I renamed it explicitly like this:

colnames(PriceData) = c(colnames(PriceData[,1:3]),"LagMP","LongEntry")

Maybe there's a cbind option to get the name in but I couldn't find it.


> library(xts)
>
> PriceData <- xts(cbind(BarNum = 1:20,
+ Price = c(5,6,7,8,1,2,3,4,7,2,3,4,5,7,8,9,1,2,1,1),
+ MP = c(0,0,1,1,1,0,0,1,0,0,1,1,0,0,1,1,1,0,0,0)),
+ Sys.Date() + 1:20)
>
> # Now we can add on the lag column:
> PriceData <- cbind(PriceData, LagMP = lag(PriceData[,3], 1))
> PriceData <- cbind(PriceData, LongEntry = with(PriceData,(MP == 1) & (MP.1 == 0)))
>
> print(PriceData[1:5,])
           BarNum Price MP MP.1 MP.2
2012-10-05      1     5  0   NA    0
2012-10-06      2     6  0    0    0
2012-10-07      3     7  1    0    1
2012-10-08      4     8  1    1    0
2012-10-09      5     1  1    1    0
>
> colnames(PriceData) = c(colnames(PriceData[,1:3]),"LagMP","LongEntry")
>
> print(PriceData[1:5,])
           BarNum Price MP LagMP LongEntry
2012-10-05      1     5  0    NA         0
2012-10-06      2     6  0     0         0
2012-10-07      3     7  1     0         1
2012-10-08      4     8  1     1         0
2012-10-09      5     1  1     1         0



Next step is, I think, to use the LongEntry value to create a new
data.frame, or maybe a matrix instead, to hold the actual trades as
they progress. I think that's done with some form of apply? Reading my
'Data Manipulation in R' book but haven't found an example of anything
similar yet.

Thanks,
Mark


From michael.weylandt at gmail.com  Fri Oct  5 00:32:24 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Thu, 4 Oct 2012 23:32:24 +0100
Subject: [R-SIG-Finance] Test for new event and save data in new
	data.frame
In-Reply-To: <CAK2H+edMnr+YN6E=Le8n7GE4KbnAyi_nkDx=VbNeJq08YZz9AA@mail.gmail.com>
References: <CAK2H+eeZE-cU-DYXqTsRAdpP=_L0TqmZ2P2xUZM4jy9u91dpNQ@mail.gmail.com>
	<CAAmySGMm1h-K1rFOrR9vdvAGTDOUmiG730wHcy2F8rycWUwfBQ@mail.gmail.com>
	<CAK2H+edMnr+YN6E=Le8n7GE4KbnAyi_nkDx=VbNeJq08YZz9AA@mail.gmail.com>
Message-ID: <CAAmySGMPFGt--hcZmdecRM0TdxAQ9-U2mh12Qv=SQdtmRyUAmA@mail.gmail.com>

On Thu, Oct 4, 2012 at 7:11 PM, Mark Knecht <markknecht at gmail.com> wrote:
> On Thu, Oct 4, 2012 at 7:49 AM, R. Michael Weylandt
> <michael.weylandt at gmail.com> wrote:
>> On Thu, Oct 4, 2012 at 12:12 AM, Mark Knecht <markknecht at gmail.com> wrote:
> <SNIP>
>>> TradeData = data.frame(cbind(t1,t2,t3,t4))
>>
>> This is a terrible awful and altogether wretched idiom. Instead just
>> do data.frame(t1, t2, t3, t4). cbind()-ing completely invalidates the
>> entire point of a data.frame() by coercing all its inputs to a common
>> class.  [Don't take it personally: we've just been working to stamp it
>> out every where we see it on the main R-help list for a few months
>> now]
>>
>
> Hi Michael,
>
> Not in the least insulted or anything like that. I'm just trying to
> learn. Thanks for alluding to reasons it's not preferred. I'll try to
> keep that in mind.
>
>>
>> Best advice: don't use a data.frame() for this sort of data. Instead,
>> use a proper time series object, like xts or zoo. These also provide a
>> lag function for you:
>>
>> library(xts)
>>
>> PriceData <- xts(cbind(BarNum = 1:20, Price =
>> c(5,6,7,8,1,2,3,4,7,2,3,4,5,7,8,9,1,2,1,1), MP =
>> c(0,0,1,1,1,0,0,1,0,0,1,1,0,0,1,1,1,0,0,0)), Sys.Date() + 1:20)
>>
>> print(PriceData)
>>
>> # Now we can add on the lag column:
>>
>> PriceData <- cbind(PriceData, LagMP = lag(PriceData[,3], 3))
>>
>> with(PriceData, (MP == 1) & (MP.1== 0)) # Gives you the rows you want
>> to manipulate
>>
>> Cheers,
>> Michael
>
> OK, that all works pretty well including the with(PriceData, ... part.
> Thanks. One question though - Is the 'LagMP' inside the cbind supposed
> to give me the name LagMP in the result?

Oops -- I would have assumed it did. Nevermind there...

> The columns are named MP.1 &
> MP.2 so I renamed it explicitly like this:
>
> colnames(PriceData) = c(colnames(PriceData[,1:3]),"LagMP","LongEntry")
>
> Maybe there's a cbind option to get the name in but I couldn't find it.
>
>
>> library(xts)
>>
>> PriceData <- xts(cbind(BarNum = 1:20,
> + Price = c(5,6,7,8,1,2,3,4,7,2,3,4,5,7,8,9,1,2,1,1),
> + MP = c(0,0,1,1,1,0,0,1,0,0,1,1,0,0,1,1,1,0,0,0)),
> + Sys.Date() + 1:20)
>>
>> # Now we can add on the lag column:
>> PriceData <- cbind(PriceData, LagMP = lag(PriceData[,3], 1))
>> PriceData <- cbind(PriceData, LongEntry = with(PriceData,(MP == 1) & (MP.1 == 0)))
>>
>> print(PriceData[1:5,])
>            BarNum Price MP MP.1 MP.2
> 2012-10-05      1     5  0   NA    0
> 2012-10-06      2     6  0    0    0
> 2012-10-07      3     7  1    0    1
> 2012-10-08      4     8  1    1    0
> 2012-10-09      5     1  1    1    0
>>
>> colnames(PriceData) = c(colnames(PriceData[,1:3]),"LagMP","LongEntry")
>>
>> print(PriceData[1:5,])
>            BarNum Price MP LagMP LongEntry
> 2012-10-05      1     5  0    NA         0
> 2012-10-06      2     6  0     0         0
> 2012-10-07      3     7  1     0         1
> 2012-10-08      4     8  1     1         0
> 2012-10-09      5     1  1     1         0
>
>
>
> Next step is, I think, to use the LongEntry value to create a new
> data.frame, or maybe a matrix instead, to hold the actual trades as
> they progress.

No data.frame()s! They're slow so use them only if absolutely needed!

>I think that's done with some form of apply? Reading my
> 'Data Manipulation in R' book but haven't found an example of anything
> similar yet.

There are a few ways to do it, but I'd do something like

# Set rows <- the rows you want (possibly with the with() construction above)

do.call(cbind, lapply(rows, function(r) PriceData[seq(r, r+4), ]))

It's a little hard to parse, but basically:

lapply() goes over the elements of rows one by one and selects
PriceData[r:(r+4), ] from them: then it constructs a list from them
and passes that as the argument to cbind which should stick the
columns together.

I didn't test that so it might need some fiddling, but it's a start.

Cheers,
M

>
> Thanks,
> Mark


From worik.stanton at gmail.com  Fri Oct  5 01:06:03 2012
From: worik.stanton at gmail.com (Worik Stanton)
Date: Fri, 05 Oct 2012 12:06:03 +1300
Subject: [R-SIG-Finance] agent-based model
In-Reply-To: <DUB107-ds94886B8BB04FC22479EA7D3840@phx.gbl>
References: <DUB107-ds94886B8BB04FC22479EA7D3840@phx.gbl>
Message-ID: <506E165B.3070304@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121005/3b6ba21f/attachment.pl>

From worik.stanton at gmail.com  Fri Oct  5 02:39:06 2012
From: worik.stanton at gmail.com (Worik Stanton)
Date: Fri, 05 Oct 2012 13:39:06 +1300
Subject: [R-SIG-Finance] Accounting in blotter query
Message-ID: <506E2C2A.8080207@gmail.com>

I am not sure I quite understand how blotter keeps its running totals.

Using the attached code I simulate some trading in IBM.  (The trades are
basically random)

I have three transactions with quantity==1 at the closing price then a
transaction with quantity ==  -3

I do this twice and get this output (via getTxns(..)):

                    Txn.Qty Txn.Value Net.Txn.Realized.PL
2007-01-02 13:00:00       0      0.00                0.00
2007-01-03 00:00:00       1     97.27                0.00
2008-02-28 00:00:00       1    115.24                0.00
2009-04-23 00:00:00       1    101.42                0.00
2009-04-23 00:00:00      -3   -304.26               -9.67
2010-06-17 00:00:00       1    130.98                0.00
2011-08-10 00:00:00       1    162.54                0.00
2012-10-04 00:00:00       1    210.39                0.00
2012-10-04 00:00:00      -3   -631.17              127.26
>

The signs are not what I expect.  For Txn.Value is -1 x the flow in and
out of the portfolio.  OK. 

Net.Txn.Realized.PL seems correct to me, recording the changes in equity
when the position of the portfolio goes to zero.

So I would expect the equity in the account to be the initial equity
plus (127.26 - 9.67) == 1,000,000 + 117.59 == 1,000,117.59

But getEndEq(account, end(IBM)) == 999813.3

what am I missing here?

cheers
Worik

-- 
it does not matter                      I think that I shall never see
how much I dig and dig                    A billboard lovely as a tree
this hole just                      Indeed, unless the billboards fall
keeps getting deeper                      I'll never see a tree at all

-------------- next part --------------

## required libraries
require(quantmod)
require(TTR)
##install.packages(c("blotter_0.8.12.tar.gz"), repos=NULL)
require(blotter)

symbols <- c("IBM")
rm("portfolio.testy", pos=.blotter)
rm("account.testy", pos=.blotter)

## Portfolio Parameters
getSymbols("IBM")
## Make this the same every day
IBM <- IBM["2007-01-03::2012-10-04",]


initDate <- start(IBM)-1
initEq <- 1000000
## Set up a portfolio object and an account object
portfolio = "testy" 
assign("portfolio", portfolio, pos=1)
currency("USD")

stock("IBM", currency="USD",multiplier=1)


initPortf(name=portfolio, c("IBM"), initDate=initDate, currency="USD")
account = "testy"
assign("account", account, pos=1)
initAcct(name=account,portfolios="testy", initDate=initDate, initEq=initEq)

  
count <- 0
limit <- 3
## Create trades
idx <- trunc(seq(1, nrow(IBM), length.out = limit*2))
for( i in idx) {

  ClosePrice <- Cl(IBM[i,])
  CurrentDate <- index(IBM[i,])
  TxnQty <- 1
  count <- count+1
  addTxn(Portfolio=portfolio, Symbol="IBM", TxnDate=CurrentDate,
         TxnPrice=ClosePrice, TxnQty = TxnQty,
         TxnFees=0, verbose=TRUE)
  updatePortf(Portfolio = portfolio, Dates = CurrentDate)
  updateAcct(account, Dates = CurrentDate)
  updateEndEq(account, Dates = CurrentDate)


  if(count==limit) {
    ## Close trades
    ClosePrice <- Cl(IBM[i,])
    CurrentDate <- index(IBM[i,])
    Posn <- getPosQty(Portfolio=portfolio, Symbol="IBM", Date=CurrentDate)
    addTxn(Portfolio=portfolio, Symbol=symbol, TxnDate=CurrentDate,
           TxnPrice=ClosePrice, TxnQty = -Posn,
           TxnFees=0, verbose=TRUE)
    count <- 0
  }
}
## Final values

XX <-  getTxns(portfolio, "IBM")
XX[, c(1, 4, 6)]
Ret <- (getEndEq(Account=account, Date=end(IBM))-initEq)/initEq
cat('Return: ', Ret,'\n')
getEndEq(account, end(IBM))
initEq + sum(XX[,6])
sum(XX[,6])

From brian at braverock.com  Fri Oct  5 02:50:45 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 04 Oct 2012 19:50:45 -0500
Subject: [R-SIG-Finance] Accounting in blotter query
In-Reply-To: <506E2C2A.8080207@gmail.com>
References: <506E2C2A.8080207@gmail.com>
Message-ID: <506E2EE5.70206@braverock.com>

On 10/04/2012 07:39 PM, Worik Stanton wrote:
> 2012-10-04 00:00:00       1    210.39                0.00
> 2012-10-04 00:00:00      -3   -631.17              127.26
<...>
> So I would expect the equity in the account to be the initial equity
> plus (127.26 - 9.67) == 1,000,000 + 117.59 == 1,000,117.59
>
> But getEndEq(account, end(IBM)) == 999813.3
>
> what am I missing here?

you have non-unique timestamps.  The xts documentation, and the blotter 
documentation, make it clear that non-unique timestamps will cause 
undefined and incorrect behavior, that's why the make.unique.index 
command exists.

-- 
Brian


From worik.stanton at gmail.com  Fri Oct  5 06:38:55 2012
From: worik.stanton at gmail.com (Worik Stanton)
Date: Fri, 05 Oct 2012 17:38:55 +1300
Subject: [R-SIG-Finance] Accounting in blotter query
In-Reply-To: <506E2EE5.70206@braverock.com>
References: <506E2C2A.8080207@gmail.com> <506E2EE5.70206@braverock.com>
Message-ID: <506E645F.4000006@gmail.com>

On 05/10/12 13:50, Brian G. Peterson wrote:
> On 10/04/2012 07:39 PM, Worik Stanton wrote:
>> 2012-10-04 00:00:00       1    210.39                0.00
>> 2012-10-04 00:00:00      -3   -631.17              127.26
> <...>
>> So I would expect the equity in the account to be the initial equity
>> plus (127.26 - 9.67) == 1,000,000 + 117.59 == 1,000,117.59
>>
>> But getEndEq(account, end(IBM)) == 999813.3
>>
>> what am I missing here?
>
> you have non-unique timestamps.  The xts documentation, and the
> blotter documentation, make it clear that non-unique timestamps will
> cause undefined and incorrect behavior, that's why the
> make.unique.index command exists.
>
Thank you.  My mistake and I fixed that.

Now I have the following list of transactions:

                    Txn.Qty Txn.Value Net.Txn.Realized.PL
2007-01-02 13:00:00       0      0.00                0.00
2007-01-03 00:00:00       1     97.27                0.00
2008-02-28 00:00:00       1    115.24                0.00
2009-04-23 00:00:00      -2   -202.84               -9.67
2010-06-17 00:00:00       1    130.98                0.00
2011-08-10 00:00:00       1    162.54                0.00
2012-10-04 00:00:00      -2   -420.78              127.26
> Ret <- (getEndEq(Account=account, Date=end(IBM))-initEq)/initEq
> cat('Return: ', Ret,'\n')
Return:  -0.00018095
> getEndEq(account, end(IBM))
[1] 999819.1
> initEq + sum(XX[,6])
[1] 1000118
> sum(XX[,6])
[1] 117.59
>

The trading made a 117.59 profit, but the equity at the end is less than
at the start, as reported by getEndEq

I am still missing something.

Worik

-- 
it does not matter                      I think that I shall never see
how much I dig and dig                    A billboard lovely as a tree
this hole just                      Indeed, unless the billboards fall
keeps getting deeper                      I'll never see a tree at all

-------------- next part --------------

## required libraries
require(quantmod)
require(TTR)
##install.packages(c("blotter_0.8.12.tar.gz"), repos=NULL)
require(blotter)

symbols <- c("IBM")
rm("portfolio.testy", pos=.blotter)
rm("account.testy", pos=.blotter)

## Portfolio Parameters
getSymbols("IBM")
## Make this the same every day
IBM <- IBM["2007-01-03::2012-10-04",]


initDate <- start(IBM)-1
initEq <- 1000000
## Set up a portfolio object and an account object
portfolio = "testy" 
assign("portfolio", portfolio, pos=1)
currency("USD")

stock("IBM", currency="USD",multiplier=1)


initPortf(name=portfolio, c("IBM"), initDate=initDate, currency="USD")
account = "testy"
assign("account", account, pos=1)
initAcct(name=account,portfolios="testy", initDate=initDate, initEq=initEq)

  
count <- 0
limit <- 3
## Create trades
idx <- trunc(seq(1, nrow(IBM), length.out = limit*2))
for( i in idx) {

  ClosePrice <- Cl(IBM[i,])
  CurrentDate <- index(IBM[i,])
  TxnQty <- 1
  count <- count+1

  if(count==limit) {
    ## Close trades
    ClosePrice <- Cl(IBM[i,])
    CurrentDate <- index(IBM[i,])
    Posn <- getPosQty(Portfolio=portfolio, Symbol="IBM", Date=CurrentDate)
    addTxn(Portfolio=portfolio, Symbol=symbol, TxnDate=CurrentDate,
           TxnPrice=ClosePrice, TxnQty = -Posn,
           TxnFees=0, verbose=TRUE)
    count <- 0
  }else{

    addTxn(Portfolio=portfolio, Symbol="IBM", TxnDate=CurrentDate,
           TxnPrice=ClosePrice, TxnQty = TxnQty,
           TxnFees=0, verbose=TRUE)
    updatePortf(Portfolio = portfolio, Dates = CurrentDate)
    updateAcct(account, Dates = CurrentDate)
    updateEndEq(account, Dates = CurrentDate)

  }
}
## Final values

XX <-  getTxns(portfolio, "IBM")
XX[, c(1, 4, 6)]
Ret <- (getEndEq(Account=account, Date=end(IBM))-initEq)/initEq
cat('Return: ', Ret,'\n')
getEndEq(account, end(IBM))
initEq + sum(XX[,6])
sum(XX[,6])

From patrick at burns-stat.com  Fri Oct  5 09:28:45 2012
From: patrick at burns-stat.com (Patrick Burns)
Date: Fri, 05 Oct 2012 08:28:45 +0100
Subject: [R-SIG-Finance] agent-based model
In-Reply-To: <506E165B.3070304@gmail.com>
References: <DUB107-ds94886B8BB04FC22479EA7D3840@phx.gbl>
	<506E165B.3070304@gmail.com>
Message-ID: <506E8C2D.9000502@burns-stat.com>


On 05/10/2012 00:06, Worik Stanton wrote:
> On 05/10/12 05:23, Simone Gogna wrote:
>> Hi all,
>> is there anyone able to give me some indications about R and agent-based modeling?
>> I am looking forward to build an agent-based model of a simple stock market for my master thesis to evaluate the effect of high-frequency trading activity.
>
> FWIW I do not think R is well suited to this task
>
> I only have a little experience with agent based modelling, but  IMO a
> language with better support for data structures would be more suited.
> I would lean to C++ (as I know it) but I am sure Java would be a fine
> language for your needs.

I both agree with this and disagree with it.

If you are in the just playing around stage
and don't know what you want to do, then R
is a very good place to do it.  Once you do
know what you are doing, then another language
(such as C++) will be better.  But I would
say the binding constraint would be speed
rather than data structures.

Of course if what Jeff pointed to fits the bill,
then even better.

>
> R is ideal for processing the output of such a model.

Wholly agree.

Pat

>
> cheers
> Worik
>
>
>> In  very general terms  it may go as follows:
>>
>> 1) create two different kind of agent, i.e. high-frequency traders and value-investors, each one with its own trading strategy
>>
>> 2) the two category of agents interact and this provoke stock price fluctuations
>>
>> Since I took a course on R and I am quite familiar with it (at least to make time series analysis), I was wondering whether it could be possible to use R to this purpose.
>> If, to your knowledge, there exist some specific book or some already existing model that use R to create agent-based model of financial markets, I will be very willing to take a look at them.
>>
>> I am really sorry if this is not the right place to ask for this kind of question.
>> I am not able at this very moment of my work to give you any reproducible code for example since I don?EUR^(TM)t even know if it is possible to use R for this kind of work.
>>
>> thanks and best regards,
>> Simone Gogna
>> 	[[alternative HTML version deleted]]
>>
>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>
>
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From brian at braverock.com  Fri Oct  5 12:01:31 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 05 Oct 2012 05:01:31 -0500
Subject: [R-SIG-Finance] Accounting in blotter query
In-Reply-To: <506E645F.4000006@gmail.com>
References: <506E2C2A.8080207@gmail.com> <506E2EE5.70206@braverock.com>
	<506E645F.4000006@gmail.com>
Message-ID: <506EAFFB.7000105@braverock.com>

On 10/04/2012 11:38 PM, Worik Stanton wrote:
> On 05/10/12 13:50, Brian G. Peterson wrote:
>> On 10/04/2012 07:39 PM, Worik Stanton wrote:
>>> 2012-10-04 00:00:00       1    210.39                0.00
>>> 2012-10-04 00:00:00      -3   -631.17              127.26
>> <...>
>>> So I would expect the equity in the account to be the initial equity
>>> plus (127.26 - 9.67) == 1,000,000 + 117.59 == 1,000,117.59
>>>
>>> But getEndEq(account, end(IBM)) == 999813.3
>>>
>>> what am I missing here?
>>
>> you have non-unique timestamps.  The xts documentation, and the
>> blotter documentation, make it clear that non-unique timestamps will
>> cause undefined and incorrect behavior, that's why the
>> make.unique.index command exists.
>>
> Thank you.  My mistake and I fixed that.
>
> Now I have the following list of transactions:
>
>                      Txn.Qty Txn.Value Net.Txn.Realized.PL
> 2007-01-02 13:00:00       0      0.00                0.00
> 2007-01-03 00:00:00       1     97.27                0.00
> 2008-02-28 00:00:00       1    115.24                0.00
> 2009-04-23 00:00:00      -2   -202.84               -9.67
> 2010-06-17 00:00:00       1    130.98                0.00
> 2011-08-10 00:00:00       1    162.54                0.00
> 2012-10-04 00:00:00      -2   -420.78              127.26
>> Ret <- (getEndEq(Account=account, Date=end(IBM))-initEq)/initEq
>> cat('Return: ', Ret,'\n')
> Return:  -0.00018095
>> getEndEq(account, end(IBM))
> [1] 999819.1
>> initEq + sum(XX[,6])
> [1] 1000118
>> sum(XX[,6])
> [1] 117.59
>>
>
> The trading made a 117.59 profit, but the equity at the end is less than
> at the start, as reported by getEndEq
>
> I am still missing something.

The lines:

     updatePortf(Portfolio = portfolio, Dates = CurrentDate)
     updateAcct(account, Dates = CurrentDate)
     updateEndEq(account, Dates = CurrentDate)

should be outside your loop.  You never call them after making the last 
closing trade, so the ending equity that you are requesting shows 
(correctly) a loss as of the date of the last time you updated it.

Calling this:

     updatePortf(Portfolio = portfolio)
     updateAcct(account)
     updateEndEq(account)

after your loop will return the correct ending equity.

These update* functions don't need to be called every time, or even 
every transaction.  You're doing more processing than you need to do.

That is true in a general sense as well.  You need to loop over 
*Transactions*, because these are path dependent, and need to be entered 
in order to get meaningful P&L.  Your script loops over every index of 
IBM, and will be very slow.

We make use of vectorization and path-independent processes wherever 
possible.  Using loops when you don't need to only leads to bad performance.

-- 
Brian


From roger.bos at rothschild.com  Fri Oct  5 21:04:41 2012
From: roger.bos at rothschild.com (Bos, Roger)
Date: Fri, 5 Oct 2012 19:04:41 +0000
Subject: [R-SIG-Finance] PerformanceAnalytics seems to break rollapply
Message-ID: <0765308CD028654885F30322557308D8372D0F@NYCSM0208.rth.ad.rothschild.com>

Unless I am making a user error, it seems that rollapply stops working with some functions after the PerformanceAnalytics packages has been loaded.  I provide reproducible code below:

test <- xts(1:10, order.by=Sys.time()+(1:10))
"w" <- function(x) {
                                                z <- scale(x)
       attributes(z) <- NULL
       z
}
rollapply(data=test, width=3, FUN=mean)
rollapply(data=test, width=3, FUN=scale)
rollapply(data=test, width=3, FUN=w)
require("PerformanceAnalytics")
rollapply(data=test, width=3, FUN=mean)
rollapply(data=test, width=3, FUN=scale)
rollapply(data=test, width=3, FUN=w)

The first three calls to rollapply work fine.  Then once the PerformanceAnalytics packages had been loaded "mean" still works but "scale" does not.  I suspect it is because of the attributes which scale creates, but I tried creating a function (called "w") which removes the attributes, but rollapply still does not work.

Here is the error I get:

> rollapply(data=test, width=3, FUN=w)
Error in xts(xx, tt, if (by == 1) attr(data, "frequency")) :
  NROW(x) must match length(order.by)
>


Thanks for any help or advice you can provide!

Roger J. Bos, CFA
Rothschild Asset Management, Inc.
Tel   +1 (212) 403-5471
Email roger.bos at rothschild.com
1251 Avenue of the Americas, NY, NY 10020

***************************************************************
This message is for the named person's use only. It may\...{{dropped:11}}


From gsee000 at gmail.com  Fri Oct  5 21:08:09 2012
From: gsee000 at gmail.com (G See)
Date: Fri, 5 Oct 2012 14:08:09 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics seems to break rollapply
In-Reply-To: <0765308CD028654885F30322557308D8372D0F@NYCSM0208.rth.ad.rothschild.com>
References: <0765308CD028654885F30322557308D8372D0F@NYCSM0208.rth.ad.rothschild.com>
Message-ID: <CA+xi=qaqaGyWYU1gGFVU_R1c77WgfjBPR=DuQza-hWOEY3ghew@mail.gmail.com>

There should be a GIANT WARNING when loading PerformanceAnalytics to
let users know that their code will no longer be reproducible.

The problem comes from the zzz.R that does these nasty things:

mean.xts <- function(x,...) {
    if(is.vector(x) ||is.null(ncol(x))  || ncol(x)==1){
        x<-as.numeric(x)
        mean(x,...)
    } else apply(x,2,mean.xts,...)
}
mean.matrix <- function(x,...) {apply(x,2,mean,...)}

sd.xts <- function(x,na.rm=FALSE) {
    if(is.vector(x) || is.null(ncol(x)) || ncol(x)==1){
        x<-as.numeric(x)
        sd(x,na.rm=na.rm)
    } else apply(x,2,sd,na.rm=na.rm)
}
sd.matrix <- function(x,na.rm=FALSE) {apply(x,2,sd,na.rm=na.rm)}

rollapply.xts <- xts:::rollapply.xts


HTH,
Garrett

On Fri, Oct 5, 2012 at 2:04 PM, Bos, Roger <roger.bos at rothschild.com> wrote:
> Unless I am making a user error, it seems that rollapply stops working with some functions after the PerformanceAnalytics packages has been loaded.  I provide reproducible code below:
>
> test <- xts(1:10, order.by=Sys.time()+(1:10))
> "w" <- function(x) {
>                                                 z <- scale(x)
>        attributes(z) <- NULL
>        z
> }
> rollapply(data=test, width=3, FUN=mean)
> rollapply(data=test, width=3, FUN=scale)
> rollapply(data=test, width=3, FUN=w)
> require("PerformanceAnalytics")
> rollapply(data=test, width=3, FUN=mean)
> rollapply(data=test, width=3, FUN=scale)
> rollapply(data=test, width=3, FUN=w)
>
> The first three calls to rollapply work fine.  Then once the PerformanceAnalytics packages had been loaded "mean" still works but "scale" does not.  I suspect it is because of the attributes which scale creates, but I tried creating a function (called "w") which removes the attributes, but rollapply still does not work.
>
> Here is the error I get:
>
>> rollapply(data=test, width=3, FUN=w)
> Error in xts(xx, tt, if (by == 1) attr(data, "frequency")) :
>   NROW(x) must match length(order.by)
>>
>
>
> Thanks for any help or advice you can provide!
>
> Roger J. Bos, CFA
> Rothschild Asset Management, Inc.
> Tel   +1 (212) 403-5471
> Email roger.bos at rothschild.com
> 1251 Avenue of the Americas, NY, NY 10020
>
> ***************************************************************
> This message is for the named person's use only. It may\...{{dropped:11}}
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From josh.m.ulrich at gmail.com  Sat Oct  6 20:49:14 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sat, 6 Oct 2012 13:49:14 -0500
Subject: [R-SIG-Finance] adjustOHLC discrepancy
In-Reply-To: <CACAe89wcX=P9j8AVtH--ZA-unVtD2HNZg=Lx+Y6Y4dHmsLxOBw@mail.gmail.com>
References: <CACAe89zcfG5fJSnjtvLGESLUpRT8iQpW_f=g0hGecNeOKTFrDw@mail.gmail.com>
	<CAPPM_gRdcoA4sqOXMyC+B=dbpkFP_FTQ=zO_=H-PG9hOR0CYpg@mail.gmail.com>
	<CACAe89wJoQ5jwJdS54K_CSsVO8ubk27hu1Wav1O1KNtoP3NjFA@mail.gmail.com>
	<CACAe89wcX=P9j8AVtH--ZA-unVtD2HNZg=Lx+Y6Y4dHmsLxOBw@mail.gmail.com>
Message-ID: <CAPPM_gQB9_UHwmvkGmj2CFxdkWuMdBPNn=24JkeW7sfcE2kXfw@mail.gmail.com>

Jim,

Looks like the issue was that dividends provided by Yahoo are
back-adjusted for splits.  I knew this (see TTR::getYahooData), but
that knowledge didn't find its way into adjustOHLC (until now).

I've updated adjustOHLC on R-Forge (r583) to un-adjust the dividends
before calculating the total adjustment ratio.  Please advise if you
(or anyone) notice any issues.

Best,
--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


On Wed, Sep 19, 2012 at 5:23 PM, Jim Green
<student.northwestern at gmail.com> wrote:
> On 19 September 2012 04:00, Jim Green <student.northwestern at gmail.com> wrote:
>> Thanks Josh. I'll dig a little more with your clues and post back if I
>> find anything.
>
> Checked Bloomberg, many of the cacs from are wrong before 2009... some
> even don't make sense..
>
> Nasdaq, on the other hand, seems to have correct historical dividend data
>
> http://www.nasdaq.com/symbol/c/dividend-history
>
> adjusted close provided by yahoo seems reasonable. but need more time to test.
>
>
> Thanks to Josh again for looking into the issue!  Hope this post
> answers some potential questions regarding adjustOHLC.
>
>>
>> Jim.


From pedro_albuquerque at ig.com.br  Sun Oct  7 15:48:59 2012
From: pedro_albuquerque at ig.com.br (PedroBSB)
Date: Sun, 7 Oct 2012 06:48:59 -0700 (PDT)
Subject: [R-SIG-Finance] Variance intercept parameter.
Message-ID: <1349617739997-4645328.post@n4.nabble.com>

Greetings, 

I am using the rugarch library and I am trying to use the ugarchspec command
without the  Variance Intercept Parameter (omega).

Does someone known how can I formulate a Garch Specification without the
Variance Intercept Parameter   ?

Thank you, 

Pedro




--
View this message in context: http://r.789695.n4.nabble.com/Variance-intercept-parameter-tp4645328.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Sun Oct  7 16:59:18 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Sun, 07 Oct 2012 15:59:18 +0100
Subject: [R-SIG-Finance] Variance intercept parameter.
In-Reply-To: <1349617739997-4645328.post@n4.nabble.com>
References: <1349617739997-4645328.post@n4.nabble.com>
Message-ID: <507198C6.7010601@4dscape.com>

Have you considered fixing it to zero?

spec = ugarchspec(fixed.pars=list(omega=0))
or equivalently:
spec = ugarchspec()
setfixed(spec)<-list(omega=0)

All methods for the uGARCHspec class are documented (try 
?'uGARCHspec-class').

Regards,

Alexios

On 07/10/2012 14:48, PedroBSB wrote:
> Greetings,
>
> I am using the rugarch library and I am trying to use the ugarchspec command
> without the  Variance Intercept Parameter (omega).
>
> Does someone known how can I formulate a Garch Specification without the
> Variance Intercept Parameter   ?
>
> Thank you,
>
> Pedro
>
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Variance-intercept-parameter-tp4645328.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From eko.prakasa at yahoo.com  Sun Oct  7 19:49:39 2012
From: eko.prakasa at yahoo.com (Eko andryanto Prakasa)
Date: Mon, 8 Oct 2012 01:49:39 +0800 (SGT)
Subject: [R-SIG-Finance] Testing volatility cluster (heteroscedasticity) in
	stock return?
Message-ID: <1349632179.39668.YahooMailNeo@web190504.mail.sg3.yahoo.com>

Dear All,

i want to use garch model in return of stock. and the data should presence volatility cluster (Heteroscedasticity).
Do you know how to test volatility cluster?(the presence of heteroscedasticity) in series data of stock return in R?
Is it using Langrange Multiplier (LM)? ARCH test? what package i should use?

Thanks for the attention.


Eko A P????


From pedro_albuquerque at ig.com.br  Sun Oct  7 19:59:15 2012
From: pedro_albuquerque at ig.com.br (PedroBSB)
Date: Sun, 7 Oct 2012 10:59:15 -0700 (PDT)
Subject: [R-SIG-Finance] Variance intercept parameter.
In-Reply-To: <507198C6.7010601@4dscape.com>
References: <1349617739997-4645328.post@n4.nabble.com>
	<507198C6.7010601@4dscape.com>
Message-ID: <1349632755367-4645345.post@n4.nabble.com>

Alexios ,
Thank you for your reply.
I will try your solution.
Best regards.
Pedro



--
View this message in context: http://r.789695.n4.nabble.com/Variance-intercept-parameter-tp4645328p4645345.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From worik.stanton at gmail.com  Sun Oct  7 22:50:02 2012
From: worik.stanton at gmail.com (Worik Stanton)
Date: Mon, 08 Oct 2012 09:50:02 +1300
Subject: [R-SIG-Finance] Accounting in blotter query
In-Reply-To: <506EAFFB.7000105@braverock.com>
References: <506E2C2A.8080207@gmail.com> <506E2EE5.70206@braverock.com>
	<506E645F.4000006@gmail.com> <506EAFFB.7000105@braverock.com>
Message-ID: <5071EAFA.3000206@gmail.com>

On 05/10/12 23:01, Brian G. Peterson wrote:

> should be outside your loop.  You never call them after making the
> last closing trade, so the ending equity that you are requesting shows
> (correctly) a loss as of the date of the last time you updated it. 

Silly me.  Thank you.

> These update* functions don't need to be called every time, or even
> every transaction.  You're doing more processing than you need to do. 

I do want to call the update functions every time step that contains a
transaction.  Is there a way of asking the portfolio if it has had a
transaction since the last update call?  Or do I have to track it in my
code?

cheers
Worik


-- 
it does not matter                      I think that I shall never see
how much I dig and dig                    A billboard lovely as a tree
this hole just                      Indeed, unless the billboards fall
keeps getting deeper                      I'll never see a tree at all


From brian at braverock.com  Sun Oct  7 23:26:02 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 07 Oct 2012 16:26:02 -0500
Subject: [R-SIG-Finance] Accounting in blotter query
In-Reply-To: <5071EAFA.3000206@gmail.com>
References: <506E2C2A.8080207@gmail.com> <506E2EE5.70206@braverock.com>
	<506E645F.4000006@gmail.com> <506EAFFB.7000105@braverock.com>
	<5071EAFA.3000206@gmail.com>
Message-ID: <5071F36A.8050007@braverock.com>

On 10/07/2012 03:50 PM, Worik Stanton wrote:
>> should be outside your loop.  You never call them after making the
>> >last closing trade, so the ending equity that you are requesting shows
>> >(correctly) a loss as of the date of the last time you updated it.
> Silly me.  Thank you.

You're welcome.

>> >These update* functions don't need to be called every time, or even
>> >every transaction.  You're doing more processing than you need to do.
> I do want to call the update functions every time step that contains a
> transaction.  Is there a way of asking the portfolio if it has had a
> transaction since the last update call?  Or do I have to track it in my
> code?

We typically run all the transactions, and then call updatePortf only 
once, at the end. This is the most efficient approach, and minimizes 
processing.  When reconciling production transactions, we run the 
update* functions once per day.

You haven't said *why* you want to do this, but I'll presume that it is 
so that you can do some rebalancing, or something similar. You can 
approximate from the current positions and the value of each position 
without marking the portfolio against all the market data.

You can also getTxns, and check the last one, but this will still be 
rather inefficient.  You'd be better off calling the update* functions 
every time you do a transaction, though this too will be less efficient 
than you likely need.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From worik.stanton at gmail.com  Mon Oct  8 01:22:47 2012
From: worik.stanton at gmail.com (Worik Stanton)
Date: Mon, 08 Oct 2012 12:22:47 +1300
Subject: [R-SIG-Finance] Accounting in blotter query
In-Reply-To: <5071F36A.8050007@braverock.com>
References: <506E2C2A.8080207@gmail.com> <506E2EE5.70206@braverock.com>
	<506E645F.4000006@gmail.com> <506EAFFB.7000105@braverock.com>
	<5071EAFA.3000206@gmail.com> <5071F36A.8050007@braverock.com>
Message-ID: <50720EC7.5020608@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121008/c539e5c6/attachment.pl>

From grgkumar4 at gmail.com  Tue Oct  9 05:18:07 2012
From: grgkumar4 at gmail.com (George Kumar)
Date: Mon, 8 Oct 2012 20:18:07 -0700 (PDT)
Subject: [R-SIG-Finance] sapply on a dataframe column of 30000 entries
	killed R session
Message-ID: <1349752687920-4645524.post@n4.nabble.com>

Hi,

I have a data frame of 6 columns of 25000 entries each whose 4th column is
of type character with numbers in a format like 2.43B, 3.13M. These are
numbers and I would like to change this column to numeric. So that I can put
this data in SQL. So I wrote the following code:

 fun=function(x)
{
    if (is.na(x)) {
        return (NA)
    }     
    if (length(grep("M", x))) {
        x=unlist(strsplit(x,"M"))
        x = as.numeric(x)  
        return (x*1000000)
    } 
    if (length(grep("B", x))) {
        x=unlist(strsplit(x,"B"))
        x = as.numeric(x)
        return (x*1000000000)
    }
}   
df=read.table("MYFILE", header=TRUE, sep="\t", as.is=TRUE)
df[,4] = sapply(df[, 4], fun)

But this never came back. The OS killed the R session. I saw using "free' in
Linux that system ran out of memory.

Any suggestions on how to handle this problem.

Thanks in advance.
George




--
View this message in context: http://r.789695.n4.nabble.com/sapply-on-a-dataframe-column-of-30000-entries-killed-R-session-tp4645524.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From rvince99 at gmail.com  Tue Oct  9 18:26:24 2012
From: rvince99 at gmail.com (Ralph Vince)
Date: Tue, 9 Oct 2012 12:26:24 -0400
Subject: [R-SIG-Finance] Slow data EOD
Message-ID: <CAAHNhKXdp8KM+fwPb0TJEE4F89L0_uZgYOOyLPB_dMWcSpuveg@mail.gmail.com>

I'm downloading certain equity data from yahoo on an eod basis, using
the code, below. It works wonderfully, formatting the data and dates
precisely as I am looking for EXCEPT often the data is late. Often,
the latest market day's data is not up until 10, 11 pm that night.

Is there something I am doing wrong here? Surely, yahoo must have the
data by the close. is the way I am invoking calling the file, below,
causing this? Or is there a way to obtain it from google earlier? I;d
be very grateful for any help along these lines. Ralph Vince

require(quantmod)
library(plan)
brsym <- c(
"AAPL",
"ABT",
...
"WMT",
"XOM"
);
for (i in 1:length(brsym)) {
tryCatch({
j <- paste("http://table.finance.yahoo.com/table.csv?s=",brsym[[i]],sep="");
j <- paste(j,"&g=d&ignore=.csv",sep="");
print(j);
X <- read.csv(j, header=TRUE);
# Convert the "Date" column from a factor class to a Date class
X$Date <- as.Date(X$Date)
# Sort the X object by the Date column -- order(-X$Date) will sort it
in the other direction
X <- X[order(X$Date),]
# Format the date column as you want
X$Date <- format(as.Date(X$Date),"%Y%m%d");
X <- X[,1:6]
kk <- trim.whitespace(brsym[[i]]);
k <- paste("/home/oracle/broadbaseddata/", kk, sep="");
k <- trim.whitespace(k);
k <- paste(k,".csv", sep="");
write.table(X, k, append = FALSE, quote = FALSE, sep = ",",
            eol = "\n", na = "NA", dec = ".", row.names = FALSE,
            col.names = FALSE, qmethod = c("escape", "double"));
print(k);
ko <- paste(X$Date[1], "-",X$Date[length(X$Date)]);
print(ko);
}, interrupt = function(ex) {
cat("An interrupt was detected.\n");
print(ex);
}, error = function(ex) {
cat("An error was detected.\n");
print(ex);
}, finally = {
cat("done\n");
})
}


From gsee000 at gmail.com  Tue Oct  9 18:40:54 2012
From: gsee000 at gmail.com (G See)
Date: Tue, 9 Oct 2012 11:40:54 -0500
Subject: [R-SIG-Finance] Slow data EOD
In-Reply-To: <CAAHNhKXdp8KM+fwPb0TJEE4F89L0_uZgYOOyLPB_dMWcSpuveg@mail.gmail.com>
References: <CAAHNhKXdp8KM+fwPb0TJEE4F89L0_uZgYOOyLPB_dMWcSpuveg@mail.gmail.com>
Message-ID: <CA+xi=qZAv+vAUY=jhEYfD-M3vD=vRrvNcUngw6VcdVj+20W7iA@mail.gmail.com>

Hi Ralph,

You can get real time intraday data from yahoo or google:
http://www.quantshare.com/sa-426-6-ways-to-download-free-intraday-and-tick-data-for-the-us-stock-market

Or you can get delayed data with quantmod::getQuote.

Maybe that will work better for you.

I'm not sure about your particular issue, but one of the issues with
yahoo's daily data is that sometimes it has duplicate timestamps (and
different volume) for the most recent observation.

HTH,
Garrett

On Tue, Oct 9, 2012 at 11:26 AM, Ralph Vince <rvince99 at gmail.com> wrote:
> I'm downloading certain equity data from yahoo on an eod basis, using
> the code, below. It works wonderfully, formatting the data and dates
> precisely as I am looking for EXCEPT often the data is late. Often,
> the latest market day's data is not up until 10, 11 pm that night.
>
> Is there something I am doing wrong here? Surely, yahoo must have the
> data by the close. is the way I am invoking calling the file, below,
> causing this? Or is there a way to obtain it from google earlier? I;d
> be very grateful for any help along these lines. Ralph Vince
>
> require(quantmod)
> library(plan)
> brsym <- c(
> "AAPL",
> "ABT",
> ...
> "WMT",
> "XOM"
> );
> for (i in 1:length(brsym)) {
> tryCatch({
> j <- paste("http://table.finance.yahoo.com/table.csv?s=",brsym[[i]],sep="");
> j <- paste(j,"&g=d&ignore=.csv",sep="");
> print(j);
> X <- read.csv(j, header=TRUE);
> # Convert the "Date" column from a factor class to a Date class
> X$Date <- as.Date(X$Date)
> # Sort the X object by the Date column -- order(-X$Date) will sort it
> in the other direction
> X <- X[order(X$Date),]
> # Format the date column as you want
> X$Date <- format(as.Date(X$Date),"%Y%m%d");
> X <- X[,1:6]
> kk <- trim.whitespace(brsym[[i]]);
> k <- paste("/home/oracle/broadbaseddata/", kk, sep="");
> k <- trim.whitespace(k);
> k <- paste(k,".csv", sep="");
> write.table(X, k, append = FALSE, quote = FALSE, sep = ",",
>             eol = "\n", na = "NA", dec = ".", row.names = FALSE,
>             col.names = FALSE, qmethod = c("escape", "double"));
> print(k);
> ko <- paste(X$Date[1], "-",X$Date[length(X$Date)]);
> print(ko);
> }, interrupt = function(ex) {
> cat("An interrupt was detected.\n");
> print(ex);
> }, error = function(ex) {
> cat("An error was detected.\n");
> print(ex);
> }, finally = {
> cat("done\n");
> })
> }
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From rvince99 at gmail.com  Tue Oct  9 18:58:53 2012
From: rvince99 at gmail.com (Ralph Vince)
Date: Tue, 9 Oct 2012 12:58:53 -0400
Subject: [R-SIG-Finance] Slow data EOD
In-Reply-To: <CA+xi=qZAv+vAUY=jhEYfD-M3vD=vRrvNcUngw6VcdVj+20W7iA@mail.gmail.com>
References: <CAAHNhKXdp8KM+fwPb0TJEE4F89L0_uZgYOOyLPB_dMWcSpuveg@mail.gmail.com>
	<CA+xi=qZAv+vAUY=jhEYfD-M3vD=vRrvNcUngw6VcdVj+20W7iA@mail.gmail.com>
Message-ID: <CAAHNhKVuKSzxp=jA5NT_3-26qzE1vH4xWoTnO+8RRpBPz8jQmg@mail.gmail.com>

Thanks Garrett, Im really just looking for timely end-of-day data on
this though. Ralph

On Tue, Oct 9, 2012 at 12:40 PM, G See <gsee000 at gmail.com> wrote:
> Hi Ralph,
>
> You can get real time intraday data from yahoo or google:
> http://www.quantshare.com/sa-426-6-ways-to-download-free-intraday-and-tick-data-for-the-us-stock-market
>
> Or you can get delayed data with quantmod::getQuote.
>
> Maybe that will work better for you.
>
> I'm not sure about your particular issue, but one of the issues with
> yahoo's daily data is that sometimes it has duplicate timestamps (and
> different volume) for the most recent observation.
>
> HTH,
> Garrett
>
> On Tue, Oct 9, 2012 at 11:26 AM, Ralph Vince <rvince99 at gmail.com> wrote:
>> I'm downloading certain equity data from yahoo on an eod basis, using
>> the code, below. It works wonderfully, formatting the data and dates
>> precisely as I am looking for EXCEPT often the data is late. Often,
>> the latest market day's data is not up until 10, 11 pm that night.
>>
>> Is there something I am doing wrong here? Surely, yahoo must have the
>> data by the close. is the way I am invoking calling the file, below,
>> causing this? Or is there a way to obtain it from google earlier? I;d
>> be very grateful for any help along these lines. Ralph Vince
>>
>> require(quantmod)
>> library(plan)
>> brsym <- c(
>> "AAPL",
>> "ABT",
>> ...
>> "WMT",
>> "XOM"
>> );
>> for (i in 1:length(brsym)) {
>> tryCatch({
>> j <- paste("http://table.finance.yahoo.com/table.csv?s=",brsym[[i]],sep="");
>> j <- paste(j,"&g=d&ignore=.csv",sep="");
>> print(j);
>> X <- read.csv(j, header=TRUE);
>> # Convert the "Date" column from a factor class to a Date class
>> X$Date <- as.Date(X$Date)
>> # Sort the X object by the Date column -- order(-X$Date) will sort it
>> in the other direction
>> X <- X[order(X$Date),]
>> # Format the date column as you want
>> X$Date <- format(as.Date(X$Date),"%Y%m%d");
>> X <- X[,1:6]
>> kk <- trim.whitespace(brsym[[i]]);
>> k <- paste("/home/oracle/broadbaseddata/", kk, sep="");
>> k <- trim.whitespace(k);
>> k <- paste(k,".csv", sep="");
>> write.table(X, k, append = FALSE, quote = FALSE, sep = ",",
>>             eol = "\n", na = "NA", dec = ".", row.names = FALSE,
>>             col.names = FALSE, qmethod = c("escape", "double"));
>> print(k);
>> ko <- paste(X$Date[1], "-",X$Date[length(X$Date)]);
>> print(ko);
>> }, interrupt = function(ex) {
>> cat("An interrupt was detected.\n");
>> print(ex);
>> }, error = function(ex) {
>> cat("An error was detected.\n");
>> print(ex);
>> }, finally = {
>> cat("done\n");
>> })
>> }
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Tue Oct  9 19:02:20 2012
From: gsee000 at gmail.com (G See)
Date: Tue, 9 Oct 2012 12:02:20 -0500
Subject: [R-SIG-Finance] Slow data EOD
In-Reply-To: <CAAHNhKVuKSzxp=jA5NT_3-26qzE1vH4xWoTnO+8RRpBPz8jQmg@mail.gmail.com>
References: <CAAHNhKXdp8KM+fwPb0TJEE4F89L0_uZgYOOyLPB_dMWcSpuveg@mail.gmail.com>
	<CA+xi=qZAv+vAUY=jhEYfD-M3vD=vRrvNcUngw6VcdVj+20W7iA@mail.gmail.com>
	<CAAHNhKVuKSzxp=jA5NT_3-26qzE1vH4xWoTnO+8RRpBPz8jQmg@mail.gmail.com>
Message-ID: <CA+xi=qYkargVdYS3y4WYMnhnO_UUH5JQLDCnDCVfCW2tP-VOtw@mail.gmail.com>

On Tue, Oct 9, 2012 at 11:58 AM, Ralph Vince <rvince99 at gmail.com> wrote:
> Thanks Garrett, Im really just looking for timely end-of-day data on
> this though. Ralph

For example, getQuote("SPY"), will return end of day data if you call
it late in the afternoon ;-)


From rvince99 at gmail.com  Tue Oct  9 19:04:04 2012
From: rvince99 at gmail.com (Ralph Vince)
Date: Tue, 9 Oct 2012 13:04:04 -0400
Subject: [R-SIG-Finance] Slow data EOD
In-Reply-To: <CA+xi=qYkargVdYS3y4WYMnhnO_UUH5JQLDCnDCVfCW2tP-VOtw@mail.gmail.com>
References: <CAAHNhKXdp8KM+fwPb0TJEE4F89L0_uZgYOOyLPB_dMWcSpuveg@mail.gmail.com>
	<CA+xi=qZAv+vAUY=jhEYfD-M3vD=vRrvNcUngw6VcdVj+20W7iA@mail.gmail.com>
	<CAAHNhKVuKSzxp=jA5NT_3-26qzE1vH4xWoTnO+8RRpBPz8jQmg@mail.gmail.com>
	<CA+xi=qYkargVdYS3y4WYMnhnO_UUH5JQLDCnDCVfCW2tP-VOtw@mail.gmail.com>
Message-ID: <CAAHNhKV1PQ9ex6y9C79GJh0GQnDjyBmTeBWb4ONXDbJN+ftKCw@mail.gmail.com>

Ah, ok....then I can create a function to perhaps append it onto the
file I am downloading entirely end of day or something like that.

On Tue, Oct 9, 2012 at 1:02 PM, G See <gsee000 at gmail.com> wrote:
> On Tue, Oct 9, 2012 at 11:58 AM, Ralph Vince <rvince99 at gmail.com> wrote:
>> Thanks Garrett, Im really just looking for timely end-of-day data on
>> this though. Ralph
>
> For example, getQuote("SPY"), will return end of day data if you call
> it late in the afternoon ;-)


From tkhan1 at isrt.ac.bd  Tue Oct  9 20:58:12 2012
From: tkhan1 at isrt.ac.bd (Tanvir Khan)
Date: Wed, 10 Oct 2012 00:58:12 +0600
Subject: [R-SIG-Finance] "ugarchfit" function of "rugarch" package needs at
	least 100 data points.
Message-ID: <CACNkFKPf=GCjQ4_eTa-KVTv+sCwrkGByDh_vwyYn+jr3Bz8-3g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121010/3f19d626/attachment.pl>

From alexios at 4dscape.com  Tue Oct  9 21:59:03 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Tue, 09 Oct 2012 20:59:03 +0100
Subject: [R-SIG-Finance] "ugarchfit" function of "rugarch" package needs
 at least 100 data points.
In-Reply-To: <CACNkFKPf=GCjQ4_eTa-KVTv+sCwrkGByDh_vwyYn+jr3Bz8-3g@mail.gmail.com>
References: <CACNkFKPf=GCjQ4_eTa-KVTv+sCwrkGByDh_vwyYn+jr3Bz8-3g@mail.gmail.com>
Message-ID: <50748207.4030200@4dscape.com>

Dear Tanvir,

To have an 'accurate' estimate of the persistence of a GARCH process you 
really do need more than 100 datapoints, and anything less than this is 
not likely to be informative or accurate, and might even fail to 
converge. More generally, in the approach adopted by the rugarch package 
(frequentist), the question of determining the presence of GARCH 
dynamics is difficult to answer with very few datapoints. Instead, if 
you insist on using GARCH, with limited history monthly data, my 
suggestion is to try one of the Bayesian packages (try the bayesGARCH 
package or LaplacesDemon, the latter has extensive examples including 
how to fit a number of GARCH models).

Regards,

Alexios


On 09/10/2012 19:58, Tanvir Khan wrote:
> Right now I'm trying to fit a GJR Garch model on the inflation rate of my
> country, Bangladesh, but the problem is the function "ugarchfit" of the
> "rugarch" package requires at least 100 data points to run. I have yearly
> (12 months average) data and my country is not even 50 years old! So, is
> there any way to use this function to fit a data with less than 100
> observations? Any type of suggestion will be extremely helpful.
>


From patrick at burns-stat.com  Tue Oct  9 22:04:47 2012
From: patrick at burns-stat.com (Patrick Burns)
Date: Tue, 09 Oct 2012 21:04:47 +0100
Subject: [R-SIG-Finance] "ugarchfit" function of "rugarch" package needs
 at least 100 data points.
In-Reply-To: <CACNkFKPf=GCjQ4_eTa-KVTv+sCwrkGByDh_vwyYn+jr3Bz8-3g@mail.gmail.com>
References: <CACNkFKPf=GCjQ4_eTa-KVTv+sCwrkGByDh_vwyYn+jr3Bz8-3g@mail.gmail.com>
Message-ID: <5074835F.6080704@burns-stat.com>

The blog post:

http://www.portfolioprobe.com/2012/09/17/variability-of-garch-estimates/

shows how variable garch results are using
2000 daily observations.

Even if there is a way to get your model fit,
I doubt that it would mean very much.

If you do find a way, I would suggest that you
create multiple datasets that are simulations of
the model the same size as your data.  Then estimate
the model on the simulations and see how variable
those model estimates are.  They will be very
variable, I predict.

Pat

On 09/10/2012 19:58, Tanvir Khan wrote:
> Right now I'm trying to fit a GJR Garch model on the inflation rate of my
> country, Bangladesh, but the problem is the function "ugarchfit" of the
> "rugarch" package requires at least 100 data points to run. I have yearly
> (12 months average) data and my country is not even 50 years old! So, is
> there any way to use this function to fit a data with less than 100
> observations? Any type of suggestion will be extremely helpful.
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From ezivot at u.washington.edu  Tue Oct  9 22:22:41 2012
From: ezivot at u.washington.edu (Eric Zivot)
Date: Tue, 9 Oct 2012 13:22:41 -0700
Subject: [R-SIG-Finance] "ugarchfit" function of "rugarch" package needs
	at least 100 data points.
In-Reply-To: <5074835F.6080704@burns-stat.com>
References: <CACNkFKPf=GCjQ4_eTa-KVTv+sCwrkGByDh_vwyYn+jr3Bz8-3g@mail.gmail.com>
	<5074835F.6080704@burns-stat.com>
Message-ID: <024d01cda65b$d5f63690$81e2a3b0$@washington.edu>

While GARCH parameter estimates can be quite variable (as Pat has nicely
shown), the resulting volatility forecasts tend to be much more stable (at
least in the short term). If the goal is short-term vol forecasting then one
doesn't really care too much about the GARCH point estimates. The important
long-term parameters are the unconditional vol and the persistence of the
GARCH process as these dictate where and how fast the vol forecasts evolve.
For the short term, most GARCH forecasts look a lot like simple EWMAs. So if
you only have 100 obvs and want to get a simple short-term forecast, use an
EWMA. That's the riskMetrics approach.

-----Original Message-----
From: r-sig-finance-bounces at r-project.org
[mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Patrick Burns
Sent: Tuesday, October 09, 2012 1:05 PM
To: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] "ugarchfit" function of "rugarch" package needs
at least 100 data points.

The blog post:

http://www.portfolioprobe.com/2012/09/17/variability-of-garch-estimates/

shows how variable garch results are using
2000 daily observations.

Even if there is a way to get your model fit, I doubt that it would mean
very much.

If you do find a way, I would suggest that you create multiple datasets that
are simulations of the model the same size as your data.  Then estimate the
model on the simulations and see how variable those model estimates are.
They will be very variable, I predict.

Pat

On 09/10/2012 19:58, Tanvir Khan wrote:
> Right now I'm trying to fit a GJR Garch model on the inflation rate of 
> my country, Bangladesh, but the problem is the function "ugarchfit" of 
> the "rugarch" package requires at least 100 data points to run. I have 
> yearly
> (12 months average) data and my country is not even 50 years old! So, 
> is there any way to use this function to fit a data with less than 100 
> observations? Any type of suggestion will be extremely helpful.
>

--
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.


From snes1982 at hotmail.com  Wed Oct 10 01:24:08 2012
From: snes1982 at hotmail.com (nserdar)
Date: Tue, 9 Oct 2012 16:24:08 -0700 (PDT)
Subject: [R-SIG-Finance] Higher Order Moment Portfolio
Message-ID: <1349825048681-4645636.post@n4.nabble.com>


Please let me know any codes about "higher Order Moment Portfolio
Optimisation" in R

Regards,
Serdar



--
View this message in context: http://r.789695.n4.nabble.com/Higher-Order-Moment-Portfolio-tp4645636.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Wed Oct 10 01:32:42 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 09 Oct 2012 18:32:42 -0500
Subject: [R-SIG-Finance] Higher Order Moment Portfolio
In-Reply-To: <1349825048681-4645636.post@n4.nabble.com>
References: <1349825048681-4645636.post@n4.nabble.com>
Message-ID: <5074B41A.5070701@braverock.com>

On 10/09/2012 06:24 PM, nserdar wrote:
> Please let me know any codes about "higher Order Moment Portfolio
> Optimisation" in R

R package 'PerformanceAnalytics' can calculate all the higher order 
moments and co-moments.

packages 'PortfolioAnalytics' and 'Meucci' can optimize arbitrary 
objective functions using these higher moments.

Regards,

    - Brian


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From worik.stanton at gmail.com  Wed Oct 10 02:52:26 2012
From: worik.stanton at gmail.com (Worik Stanton)
Date: Wed, 10 Oct 2012 13:52:26 +1300
Subject: [R-SIG-Finance] Naming conventions for merged XTS columns
Message-ID: <5074C6CA.2010303@gmail.com>

When I merge two xts with the same column names a '.1' is appended...

Where does this convention come from and can it be firmly relied on?

Sorry if this is a general 'R' question... But merge acts differently
for data.frames

cheers
Worik

> M <- xts(trunc(3*runif(3)), seq(as.Date(1), as.Date(3), by=1))
> M
           [,1]
1970-01-02    0
1970-01-03    2
1970-01-04    1
> colnames(M) <- 'a'
> N <- xts(trunc(3*runif(3)), seq(as.Date(1), as.Date(3), by=1))
> colnames(N) <- 'a'
> merge(N,M)
           a a.1
1970-01-02 2   0
1970-01-03 1   2
1970-01-04 2   1
>

> merge(as.data.frame(M), as.data.frame(N) )
  a
1 1
2 2
3 2
>


-- 
it does not matter                      I think that I shall never see
how much I dig and dig                    A billboard lovely as a tree
this hole just                      Indeed, unless the billboards fall
keeps getting deeper                      I'll never see a tree at all


From jeff.a.ryan at gmail.com  Wed Oct 10 03:08:09 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Tue, 9 Oct 2012 20:08:09 -0500
Subject: [R-SIG-Finance] Naming conventions for merged XTS columns
In-Reply-To: <5074C6CA.2010303@gmail.com>
References: <5074C6CA.2010303@gmail.com>
Message-ID: <BC952719-219D-4F1C-A548-3A89287804C2@gmail.com>

I'm not in front of the relevant bits of code, but it would likely be in make.unique.names or something like that within merge.xts at the R level. 

That said, relied upon seems unwise. The pattern is meant to match zoo behavior which in turn is meant to match matrix IIRC. But inconsistencies at the R level are pretty common around the edges, so xts matches "inconsistent" behavior to be most correct :-)

It very much depends on what the colnames are (defined, unique, etc) on the incoming objects and the order of the calls. Even as far as merge() vs merge.xts() vs cbind() vs cbind.xts() vs do.call(merge vs do.call(merge.xts. ...

You get the idea. Plus there are very real performance issues when trying to match native R or zoo behaviors in all cases. 

Best to use colnames explicitly would be my advice. 

Best
Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Oct 9, 2012, at 7:52 PM, Worik Stanton <worik.stanton at gmail.com> wrote:

> When I merge two xts with the same column names a '.1' is appended...
> 
> Where does this convention come from and can it be firmly relied on?
> 
> Sorry if this is a general 'R' question... But merge acts differently
> for data.frames
> 
> cheers
> Worik
> 
>> M <- xts(trunc(3*runif(3)), seq(as.Date(1), as.Date(3), by=1))
>> M
>           [,1]
> 1970-01-02    0
> 1970-01-03    2
> 1970-01-04    1
>> colnames(M) <- 'a'
>> N <- xts(trunc(3*runif(3)), seq(as.Date(1), as.Date(3), by=1))
>> colnames(N) <- 'a'
>> merge(N,M)
>           a a.1
> 1970-01-02 2   0
> 1970-01-03 1   2
> 1970-01-04 2   1
>> 
> 
>> merge(as.data.frame(M), as.data.frame(N) )
>  a
> 1 1
> 2 2
> 3 2
>> 
> 
> 
> -- 
> it does not matter                      I think that I shall never see
> how much I dig and dig                    A billboard lovely as a tree
> this hole just                      Indeed, unless the billboards fall
> keeps getting deeper                      I'll never see a tree at all
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jeff.a.ryan at gmail.com  Wed Oct 10 05:38:52 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Tue, 9 Oct 2012 22:38:52 -0500
Subject: [R-SIG-Finance] Naming conventions for merged XTS columns
In-Reply-To: <5074C6CA.2010303@gmail.com>
References: <5074C6CA.2010303@gmail.com>
Message-ID: <CABDUZc__n2sVN6EAMCYzaB5FLpTwquLnxXrc76-i74ONnAWrTQ@mail.gmail.com>

To provide some additional clarity now that I've been able to look into it:

Firstly, merge on data.frames is quite different than merge in
xts/zoo.  merge in zoo/xts is cbind.  Which using your objects gets
you something different:

> cbind(as.data.frame(M), as.data.frame(N) )
           a a
1970-01-02 1 2
1970-01-03 2 1
1970-01-04 2 2

>From there, xts is indeed different than both matrix and zoo.  The
matrix class doesn't care about non-unique column names.  zoo appends
the object symbol to the column, though can behave differently
depending on options passed.

Most of these variations are too expensive for xts in general, but to
keep column names unique we employ the R function make.names( ..
unique=TRUE).  This happens in the C code technically, but when the
columns are named, the results you see are a result of this call.

What gets more interesting is when names are not defined.  You can
peruse below and see what happens in at least a few cases.

In general, xts tries to make sure you have unique column names.
Which is oddly consistent with the data.frame constructor itself:

data.frame(a=1,a=3)
  a a.1
1 1   3

So, if you have colnames defined, make.names(colnames(x),unique=TRUE)
is the behavior you can expect.  If not, it depends on how you call
the related bind functions:

> x
                    [,1]
1970-01-01 00:00:01    1
1970-01-01 00:00:02    2
1970-01-01 00:00:03    3

> merge(x,x,x)
                    x x.1 x.2
1970-01-01 00:00:01 1   1   1
1970-01-01 00:00:02 2   2   2
1970-01-01 00:00:03 3   3   3

> cbind(x,x,x)
                    ..1 ..2 ..3
1970-01-01 00:00:01   1   1   1
1970-01-01 00:00:02   2   2   2
1970-01-01 00:00:03   3   3   3

> do.call(merge,list(x,x,x))
                    X1.3 X1.3.1 X1.3.2
1970-01-01 00:00:01    1      1      1
1970-01-01 00:00:02    2      2      2
1970-01-01 00:00:03    3      3      3

HTH
Jeff

On Tue, Oct 9, 2012 at 7:52 PM, Worik Stanton <worik.stanton at gmail.com> wrote:
> When I merge two xts with the same column names a '.1' is appended...
>
> Where does this convention come from and can it be firmly relied on?
>
> Sorry if this is a general 'R' question... But merge acts differently
> for data.frames
>
> cheers
> Worik
>
>> M <- xts(trunc(3*runif(3)), seq(as.Date(1), as.Date(3), by=1))
>> M
>            [,1]
> 1970-01-02    0
> 1970-01-03    2
> 1970-01-04    1
>> colnames(M) <- 'a'
>> N <- xts(trunc(3*runif(3)), seq(as.Date(1), as.Date(3), by=1))
>> colnames(N) <- 'a'
>> merge(N,M)
>            a a.1
> 1970-01-02 2   0
> 1970-01-03 1   2
> 1970-01-04 2   1
>>
>
>> merge(as.data.frame(M), as.data.frame(N) )
>   a
> 1 1
> 2 2
> 3 2
>>
>
>
> --
> it does not matter                      I think that I shall never see
> how much I dig and dig                    A billboard lovely as a tree
> this hole just                      Indeed, unless the billboards fall
> keeps getting deeper                      I'll never see a tree at all
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com


From snes1982 at hotmail.com  Wed Oct 10 09:54:04 2012
From: snes1982 at hotmail.com (nserdar)
Date: Wed, 10 Oct 2012 00:54:04 -0700 (PDT)
Subject: [R-SIG-Finance] "Optimx" help
Message-ID: <1349855644939-4645666.post@n4.nabble.com>

Error Message:

fn is  Linn 
Function has  10  arguments
par[ 1 ]:  0   <? 0   <? 1     In Bounds           
par[ 2 ]:  0   <? 0   <? 1     In Bounds   In Bounds          
par[ 3 ]:  0   <? 0   <? 1     In Bounds   In Bounds   In Bounds         
par[ 4 ]:  -Inf   <? 1.001   <? Inf     In Bounds   In Bounds   In Bounds  
In Bounds        
par[ 5 ]:  -Inf   <? 1.001   <? Inf     In Bounds   In Bounds   In Bounds  
In Bounds   In Bounds       
par[ 6 ]:  -Inf   <? 1.001   <? Inf     In Bounds   In Bounds   In Bounds  
In Bounds   In Bounds   In Bounds      
par[ 7 ]:  -Inf   <? 1.001   <? Inf     In Bounds   In Bounds   In Bounds  
In Bounds   In Bounds   In Bounds   In Bounds     
par[ 8 ]:  -Inf   <? 1   <? Inf     In Bounds   In Bounds   In Bounds   In
Bounds   In Bounds   In Bounds   In Bounds   In Bounds    
par[ 9 ]:  -Inf   <? 1   <? Inf     In Bounds   In Bounds   In Bounds   In
Bounds   In Bounds   In Bounds   In Bounds   In Bounds   In Bounds   
par[ 10 ]:  -Inf   <? 1   <? Inf     In Bounds   In Bounds   In Bounds   In
Bounds   In Bounds   In Bounds   In Bounds   In Bounds   In Bounds   In
Bounds  
Error in optimx(init.par, Linn, gr = NULL, method = "L-BFGS-B", hessian =
TRUE,  : 
  Cannot evaluate function at initial parameters

My function:
 optimx(init.par,Linn,gr=NULL,method= "L-BFGS-B", hessian=TRUE, control =
list(trace=1,factr=1e3),lower=c(0,0,0,-Inf,-Inf,-Inf,-Inf,-Inf,-Inf,-Inf),upper=c(1,1,1,Inf,Inf,Inf,Inf,Inf,Inf,Inf))

How to solve this problem ?

Regards,
Serdar



--
View this message in context: http://r.789695.n4.nabble.com/Optimx-help-tp4645666.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From patrick at burns-stat.com  Wed Oct 10 10:01:38 2012
From: patrick at burns-stat.com (Patrick Burns)
Date: Wed, 10 Oct 2012 09:01:38 +0100
Subject: [R-SIG-Finance] "ugarchfit" function of "rugarch" package needs
 at least 100 data points.
In-Reply-To: <024d01cda65b$d5f63690$81e2a3b0$@washington.edu>
References: <CACNkFKPf=GCjQ4_eTa-KVTv+sCwrkGByDh_vwyYn+jr3Bz8-3g@mail.gmail.com>
	<5074835F.6080704@burns-stat.com>
	<024d01cda65b$d5f63690$81e2a3b0$@washington.edu>
Message-ID: <50752B62.7020109@burns-stat.com>

I agree with Eric.  His suggestion is simple
and likely to give about as good of an answer
as possible.

On 09/10/2012 21:22, Eric Zivot wrote:
> While GARCH parameter estimates can be quite variable (as Pat has nicely
> shown), the resulting volatility forecasts tend to be much more stable (at
> least in the short term). If the goal is short-term vol forecasting then one
> doesn't really care too much about the GARCH point estimates. The important
> long-term parameters are the unconditional vol and the persistence of the
> GARCH process as these dictate where and how fast the vol forecasts evolve.
> For the short term, most GARCH forecasts look a lot like simple EWMAs. So if
> you only have 100 obvs and want to get a simple short-term forecast, use an
> EWMA. That's the riskMetrics approach.
>
> -----Original Message-----
> From: r-sig-finance-bounces at r-project.org
> [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Patrick Burns
> Sent: Tuesday, October 09, 2012 1:05 PM
> To: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] "ugarchfit" function of "rugarch" package needs
> at least 100 data points.
>
> The blog post:
>
> http://www.portfolioprobe.com/2012/09/17/variability-of-garch-estimates/
>
> shows how variable garch results are using
> 2000 daily observations.
>
> Even if there is a way to get your model fit, I doubt that it would mean
> very much.
>
> If you do find a way, I would suggest that you create multiple datasets that
> are simulations of the model the same size as your data.  Then estimate the
> model on the simulations and see how variable those model estimates are.
> They will be very variable, I predict.
>
> Pat
>
> On 09/10/2012 19:58, Tanvir Khan wrote:
>> Right now I'm trying to fit a GJR Garch model on the inflation rate of
>> my country, Bangladesh, but the problem is the function "ugarchfit" of
>> the "rugarch" package requires at least 100 data points to run. I have
>> yearly
>> (12 months average) data and my country is not even 50 years old! So,
>> is there any way to use this function to fit a data with less than 100
>> observations? Any type of suggestion will be extremely helpful.
>>
>
> --
> Patrick Burns
> patrick at burns-stat.com
> http://www.burns-stat.com
> http://www.portfolioprobe.com/blog
> twitter: @portfolioprobe
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From michael.weylandt at gmail.com  Wed Oct 10 14:31:05 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Wed, 10 Oct 2012 13:31:05 +0100
Subject: [R-SIG-Finance] "Optimx" help
In-Reply-To: <1349855644939-4645666.post@n4.nabble.com>
References: <1349855644939-4645666.post@n4.nabble.com>
Message-ID: <CAAmySGPfNGzJFjep_pbj--SK0KhbA2MAGkHx_9jN3UzNCvn09A@mail.gmail.com>

Please don't cross-post to both R-SIG-Finance and the general R-help
list, where you've already received a response.

Michael

On Wed, Oct 10, 2012 at 8:54 AM, nserdar <snes1982 at hotmail.com> wrote:
> Error Message:
>
> fn is  Linn
> Function has  10  arguments
> par[ 1 ]:  0   <? 0   <? 1     In Bounds
> par[ 2 ]:  0   <? 0   <? 1     In Bounds   In Bounds
> par[ 3 ]:  0   <? 0   <? 1     In Bounds   In Bounds   In Bounds
> par[ 4 ]:  -Inf   <? 1.001   <? Inf     In Bounds   In Bounds   In Bounds
> In Bounds
> par[ 5 ]:  -Inf   <? 1.001   <? Inf     In Bounds   In Bounds   In Bounds
> In Bounds   In Bounds
> par[ 6 ]:  -Inf   <? 1.001   <? Inf     In Bounds   In Bounds   In Bounds
> In Bounds   In Bounds   In Bounds
> par[ 7 ]:  -Inf   <? 1.001   <? Inf     In Bounds   In Bounds   In Bounds
> In Bounds   In Bounds   In Bounds   In Bounds
> par[ 8 ]:  -Inf   <? 1   <? Inf     In Bounds   In Bounds   In Bounds   In
> Bounds   In Bounds   In Bounds   In Bounds   In Bounds
> par[ 9 ]:  -Inf   <? 1   <? Inf     In Bounds   In Bounds   In Bounds   In
> Bounds   In Bounds   In Bounds   In Bounds   In Bounds   In Bounds
> par[ 10 ]:  -Inf   <? 1   <? Inf     In Bounds   In Bounds   In Bounds   In
> Bounds   In Bounds   In Bounds   In Bounds   In Bounds   In Bounds   In
> Bounds
> Error in optimx(init.par, Linn, gr = NULL, method = "L-BFGS-B", hessian =
> TRUE,  :
>   Cannot evaluate function at initial parameters
>
> My function:
>  optimx(init.par,Linn,gr=NULL,method= "L-BFGS-B", hessian=TRUE, control =
> list(trace=1,factr=1e3),lower=c(0,0,0,-Inf,-Inf,-Inf,-Inf,-Inf,-Inf,-Inf),upper=c(1,1,1,Inf,Inf,Inf,Inf,Inf,Inf,Inf))
>
> How to solve this problem ?
>
> Regards,
> Serdar
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Optimx-help-tp4645666.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From snes1982 at hotmail.com  Wed Oct 10 17:37:54 2012
From: snes1982 at hotmail.com (nserdar)
Date: Wed, 10 Oct 2012 08:37:54 -0700 (PDT)
Subject: [R-SIG-Finance] "Optimx" help
In-Reply-To: <CAAmySGPfNGzJFjep_pbj--SK0KhbA2MAGkHx_9jN3UzNCvn09A@mail.gmail.com>
References: <1349855644939-4645666.post@n4.nabble.com>
	<CAAmySGPfNGzJFjep_pbj--SK0KhbA2MAGkHx_9jN3UzNCvn09A@mail.gmail.com>
Message-ID: <1349883474690-4645723.post@n4.nabble.com>

I do not understand what other guy mentioned about my problem. So I asked in
this part. 

Please explain other guy opinion about my problem.

Regards,
Serdar



--
View this message in context: http://r.789695.n4.nabble.com/Optimx-help-tp4645666p4645723.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From gsee000 at gmail.com  Wed Oct 10 17:42:08 2012
From: gsee000 at gmail.com (G See)
Date: Wed, 10 Oct 2012 10:42:08 -0500
Subject: [R-SIG-Finance] "Optimx" help
In-Reply-To: <1349883474690-4645723.post@n4.nabble.com>
References: <1349855644939-4645666.post@n4.nabble.com>
	<CAAmySGPfNGzJFjep_pbj--SK0KhbA2MAGkHx_9jN3UzNCvn09A@mail.gmail.com>
	<1349883474690-4645723.post@n4.nabble.com>
Message-ID: <CA+xi=qafgitnpLZZ+Y=GNeg6rfJhgAJGvK9xZNz7-YMtQLbDHg@mail.gmail.com>

Please don't crosspost.  Ask "other guy" for clarification, not us.

On Wed, Oct 10, 2012 at 10:37 AM, nserdar <snes1982 at hotmail.com> wrote:
> I do not understand what other guy mentioned about my problem. So I asked in
> this part.
>
> Please explain other guy opinion about my problem.
>
> Regards,
> Serdar
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Optimx-help-tp4645666p4645723.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From roger.bos at rothschild.com  Wed Oct 10 19:38:30 2012
From: roger.bos at rothschild.com (Bos, Roger)
Date: Wed, 10 Oct 2012 17:38:30 +0000
Subject: [R-SIG-Finance] MACD crash problem
Message-ID: <0765308CD028654885F30322557308D8379B0E@NYCSM0208.rth.ad.rothschild.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121010/b5917566/attachment.pl>

From brian at braverock.com  Wed Oct 10 19:47:24 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 10 Oct 2012 12:47:24 -0500
Subject: [R-SIG-Finance] MACD crash problem
In-Reply-To: <0765308CD028654885F30322557308D8379B0E@NYCSM0208.rth.ad.rothschild.com>
References: <0765308CD028654885F30322557308D8379B0E@NYCSM0208.rth.ad.rothschild.com>
Message-ID: <5075B4AC.6010006@braverock.com>

On 10/10/2012 12:38 PM, Bos, Roger wrote:
> Here is some reproducible code that causes R to crash while running the MACD function in the TTR library.  The problem seems to be when the nSlow and nSig parameters are so large that the function is not able to calculate the moving average length denoted by nSig.  Now that I know what the problem is I can avoid it, but it would be nice if the MACD function returned an error instead of crashing R (unless its just my setup-R 2.15.1 64-bit win7).  Maybe someone can confirm for me by testing out the code below.
>
> The first call to MACD should work as many times as you call it, as expected.  However the second one causes problems because the data in temp is too short to product a moving average over 22 data points.  This crashes R almost always, but occasionally it does work once or twice.  That's why I used for loops to make my point.  First lets see if other people have the same results that I do.  If so, it would be nice if MACD produced an error instead of crashing R.
>
> Thanks,
>
> Roger
>
>
> library(TTR)
> temp <- 1:60
> for (i in 1:10) x <- MACD(temp, nFast=15, nSlow=40, nSig=21) # Works fine
> print("okay so far")
> for (i in 1:10) x <- MACD(temp, nFast=15, nSlow=40, nSig=22) # Crashes R
> print("bet you don't see this")

This is reproducible for me with TTR-0.21-1 on 64 bit linux, and with 
svn r135 from R-Forge.

Regards,

    - Brian


From michael.weylandt at gmail.com  Wed Oct 10 22:04:18 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Wed, 10 Oct 2012 21:04:18 +0100
Subject: [R-SIG-Finance] [R] NA When Setting Options to See Fractions of
	Seconds
In-Reply-To: <1349808569.20347.YahooMailNeo@web114013.mail.gq1.yahoo.com>
References: <1349808569.20347.YahooMailNeo@web114013.mail.gq1.yahoo.com>
Message-ID: <CAAmySGNGTLx6OKVT9z93BnnMTY8y0144ocppeNzVcjabtRLOOw@mail.gmail.com>

I've moved this to R-SIG-Finance thinking there might be a more
relevant audience.

RMW

On Tue, Oct 9, 2012 at 7:49 PM, Alex Zhang <alex.zhang at ymail.com> wrote:
> Dear all,
>
> I just found a weird behavior of the timeDate related functions Sys.timeDate() and as.timeDate().
> Both of them take place when showing fractions of seconds and I think they might have the same source.
>
> Do you know if it should be considered a bug of Sys.timeDate()? Also, what is a good way to generate timeDate with fractions of seconds from strings? I know I can just get the whole part of seconds and add fractions to it. That is a little bit unnecessarily awkward IMO. Thanks!
>
> - Alex
>
> Below is my whole session:
>
> R version 2.15.1 (2012-06-22) -- "Roasted Marshmallows"
> Platform: i386-pc-mingw32/i386 (32-bit)
>
>> require(timeDate)
>> Sys.timeDate()
> New_York
> [1] [2012-10-09 14:35:21]
>> options("digits.secs"=3)
>> Sys.timeDate()
> New_York
> [1] [NA]
> Warning message
>> Sys.time()
> [1] "2012-10-09 14:43:45.303 EDT"
>> as.timeDate("2012-10-09 14:43:45.303 EDT")
> New_York
> [1] [NA]
> Warning message
>> as.timeDate("2012-10-09 14:43:45.303")
> New_York
> [1] [NA]
> Warning message
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From rex at nosyntax.net  Wed Oct 10 23:37:21 2012
From: rex at nosyntax.net (rex)
Date: Wed, 10 Oct 2012 14:37:21 -0700
Subject: [R-SIG-Finance] quantmod::getOptionChain() errors
Message-ID: <20121010213721.GG2984@ninja.nosyntax.net>

getOptionChain("F")
Error in puts[, 2] : incorrect number of dimensions
getOptionChain("MNT")
Error in strsplit(opt, "<tr")[[1]] : subscript out of bounds

> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
  [7] LC_PAPER=C                 LC_NAME=C                 
  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] plyr_1.7.1      XML_3.9-4       RCurl_1.95-0.1  bitops_1.0-4.1 
[5] quantmod_0.3-20 TTR_0.21-1      xts_0.8-6       zoo_1.7-7      
[9] Defaults_1.1-1 

loaded via a namespace (and not attached):
[1] grid_2.15.1    lattice_0.20-6 tcltk_2.15.1   tools_2.15.1  

-rex


From jeff.a.ryan at gmail.com  Wed Oct 10 23:57:58 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Wed, 10 Oct 2012 16:57:58 -0500
Subject: [R-SIG-Finance] quantmod::getOptionChain() errors
In-Reply-To: <20121010213721.GG2984@ninja.nosyntax.net>
References: <20121010213721.GG2984@ninja.nosyntax.net>
Message-ID: <CABDUZc_SD3AC1O67B8Lt7NWTQNCwXv-uk=kovZrzbqS2wt-VoA@mail.gmail.com>

> getOptionChain("F")
$calls
                 Strike Last   Chg  Bid  Ask  Vol    OI
F121020C00001000    1.0 9.07  0.00 8.90 9.20    2     1
F121020C00006000    6.0 4.30  0.00 3.95 4.00    5   182
F121020C00007000    7.0 3.00  0.00 2.97 3.00   10   753
F121020C00008000    8.0 1.98 -0.13 1.97 2.00  145  1781
F121020C00009000    9.0 0.98 -0.11 0.98 1.00 2489 16158
F121012C00009500    9.5 0.56  0.01 0.47 0.50  177  1164
F121012C00010000   10.0 0.06 -0.08 0.06 0.08 1029  3054
F121020C00010000   10.0 0.14 -0.07 0.13 0.14 2539 77492
F121012C00010500   10.5 0.01  0.00   NA 0.01  155  7191
F121012C00011000   11.0 0.01  0.00   NA 0.02    1   250
F121020C00011000   11.0 0.01  0.00 0.01 0.02  823 68043
F121012C00011500   11.5 0.01  0.00   NA 0.01    8     8
F121020C00012000   12.0 0.01  0.00   NA 0.02    2  5342
F121020C00013000   13.0 0.01  0.00   NA 0.01    2  3035
F121020C00014000   14.0 0.02  0.00   NA 0.01    1   161

$puts
                 Strike Last  Chg  Bid  Ask  Vol    OI
F121020P00005000    5.0 0.03 0.00   NA 0.01  329   329
F121020P00007000    7.0 0.01 0.00   NA 0.02   50  1382
F121020P00008000    8.0 0.01 0.00   NA 0.02    1 16347
F121020P00009000    9.0 0.01 0.00 0.01 0.02   20 24760
F121012P00009500    9.5 0.01 0.00   NA 0.01  125   162
F121012P00010000   10.0 0.10 0.04 0.07 0.09 2250 10813
F121020P00010000   10.0 0.17 0.06 0.14 0.16 3249 25705
F121012P00010500   10.5 0.53 0.14 0.50 0.53    8  1079
F121012P00011000   11.0 1.03 0.10 1.00 1.02   89     5
F121020P00011000   11.0 1.03 0.10 1.01 1.04  148 11512
F121020P00012000   12.0 2.03 0.11 2.01 2.03   94  1271
F121020P00013000   13.0 3.17 0.00 3.00 3.05    1   941
F121020P00014000   14.0 4.10 0.00 4.00 4.05    1    30
F121020P00015000   15.0 4.95 0.00 5.00 5.05    4     4
F121020P00016000   16.0 6.55 0.00 5.65 6.10    1    39

$symbol
[1] "F"

> packageVersion("quantmod")
[1] ?0.3.20?
> Sys.time()
[1] "2012-10-10 16:53:41 CDT"

Works for me, at the moment.

Make sure the data is really coming back. You may have some other
issue in the connection. Or just bad luck in terms of which Yahoo
server that got hit.

Also, MNT isn't valid in Yahoo land.  So that is failing for other reasons.

http://finance.yahoo.com/lookup?s=mnt

Jeff



On Wed, Oct 10, 2012 at 4:37 PM, rex <rex at nosyntax.net> wrote:
> getOptionChain("F")
> Error in puts[, 2] : incorrect number of dimensions
> getOptionChain("MNT")
> Error in strsplit(opt, "<tr")[[1]] : subscript out of bounds
>
>> sessionInfo()
>
> R version 2.15.1 (2012-06-22)
> Platform: x86_64-pc-linux-gnu (64-bit)
>
> locale:
>  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               [3]
> LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8     [5]
> LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8    [7] LC_PAPER=C
> LC_NAME=C                  [9] LC_ADDRESS=C               LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> other attached packages:
> [1] plyr_1.7.1      XML_3.9-4       RCurl_1.95-0.1  bitops_1.0-4.1 [5]
> quantmod_0.3-20 TTR_0.21-1      xts_0.8-6       zoo_1.7-7      [9]
> Defaults_1.1-1
> loaded via a namespace (and not attached):
> [1] grid_2.15.1    lattice_0.20-6 tcltk_2.15.1   tools_2.15.1
> -rex
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com


From rex at nosyntax.net  Thu Oct 11 00:20:01 2012
From: rex at nosyntax.net (rex)
Date: Wed, 10 Oct 2012 15:20:01 -0700
Subject: [R-SIG-Finance] quantmod::getOptionChain() errors
In-Reply-To: <CABDUZc_SD3AC1O67B8Lt7NWTQNCwXv-uk=kovZrzbqS2wt-VoA@mail.gmail.com>
References: <20121010213721.GG2984@ninja.nosyntax.net>
	<CABDUZc_SD3AC1O67B8Lt7NWTQNCwXv-uk=kovZrzbqS2wt-VoA@mail.gmail.com>
Message-ID: <20121010222001.GH2984@ninja.nosyntax.net>

Jeff Ryan <jeff.a.ryan at gmail.com> [2012-10-10 14:56]:
>> getOptionChain("F")
>$calls
>                 Strike Last   Chg  Bid  Ask  Vol    OI
>F121020C00001000    1.0 9.07  0.00 8.90 9.20    2     1
>F121020C00006000    6.0 4.30  0.00 3.95 4.00    5   182
[...]
>
>$puts
>                 Strike Last  Chg  Bid  Ask  Vol    OI
>F121020P00005000    5.0 0.03 0.00   NA 0.01  329   329
>F121020P00007000    7.0 0.01 0.00   NA 0.02   50  1382
>F121020P00008000    8.0 0.01 0.00   NA 0.02    1 16347
[...]
>
>Works for me, at the moment.
>
>Make sure the data is really coming back. You may have some other
>issue in the connection. Or just bad luck in terms of which Yahoo
>server that got hit.

I started another R session and it works. Still didn't work in
the other session. Exited R, reloaded and now it works. 

Sorry for the false alarm. :(

>Also, MNT isn't valid in Yahoo land.  So that is failing for other reasons.

Ah, that was a typo. It was MNTA that I was looking at in the browser.

Thanks for the quick response and the extremely useful quantmod package!

-rex


From pgcristi at yahoo.com  Thu Oct 11 08:45:10 2012
From: pgcristi at yahoo.com (Cristi Popescu)
Date: Wed, 10 Oct 2012 23:45:10 -0700 (PDT)
Subject: [R-SIG-Finance] Error with applyStrategy
Message-ID: <1349937910.97669.YahooMailNeo@web162503.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121010/57828b4e/attachment.pl>

From j_cuisinier at hotmail.com  Thu Oct 11 09:45:51 2012
From: j_cuisinier at hotmail.com (julien cuisinier)
Date: Thu, 11 Oct 2012 09:45:51 +0200
Subject: [R-SIG-Finance] MACD crash problem
In-Reply-To: <5075B4AC.6010006@braverock.com>
References: <0765308CD028654885F30322557308D8379B0E@NYCSM0208.rth.ad.rothschild.com>,
	<5075B4AC.6010006@braverock.com>
Message-ID: <COL102-W480C99C7AD36AFC4D95BD68F8D0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121011/9c34e56e/attachment.pl>

From josh.m.ulrich at gmail.com  Thu Oct 11 14:28:58 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Thu, 11 Oct 2012 07:28:58 -0500
Subject: [R-SIG-Finance] MACD crash problem
In-Reply-To: <0765308CD028654885F30322557308D8379B0E@NYCSM0208.rth.ad.rothschild.com>
References: <0765308CD028654885F30322557308D8379B0E@NYCSM0208.rth.ad.rothschild.com>
Message-ID: <CAPPM_gRn1YmdOHgnMSwMibz8YMvvAXxz1h9T9EgtD_R05e1fYQ@mail.gmail.com>

Hi Roger,

Thanks for the report.  The problem was in the EMA function, which is
now fixed on R-Forge (revision 136).  It now throws an error if there
are not enough non-NA values to calculate a n-period EMA.

Best,
--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


On Wed, Oct 10, 2012 at 12:38 PM, Bos, Roger <roger.bos at rothschild.com> wrote:
> All,
>
> Here is some reproducible code that causes R to crash while running the MACD function in the TTR library.  The problem seems to be when the nSlow and nSig parameters are so large that the function is not able to calculate the moving average length denoted by nSig.  Now that I know what the problem is I can avoid it, but it would be nice if the MACD function returned an error instead of crashing R (unless its just my setup-R 2.15.1 64-bit win7).  Maybe someone can confirm for me by testing out the code below.
>
> The first call to MACD should work as many times as you call it, as expected.  However the second one causes problems because the data in temp is too short to product a moving average over 22 data points.  This crashes R almost always, but occasionally it does work once or twice.  That's why I used for loops to make my point.  First lets see if other people have the same results that I do.  If so, it would be nice if MACD produced an error instead of crashing R.
>
> Thanks,
>
> Roger
>
>
> library(TTR)
> temp <- 1:60
> for (i in 1:10) x <- MACD(temp, nFast=15, nSlow=40, nSig=21) # Works fine
> print("okay so far")
> for (i in 1:10) x <- MACD(temp, nFast=15, nSlow=40, nSig=22) # Crashes R
> print("bet you don't see this")
>
>
> Roger J. Bos, CFA
> Rothschild Asset Management, Inc.
> Tel     +1 (212) 403-5471
> Email roger.bos at rothschild.com<mailto:roger.bos at rothschild.com>
> 1251 Avenue of the Americas, NY, NY  10020
>
>
> ***************************************************************
>
> This message is for the named person's use only. It may\...{{dropped:15}}
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jan at opentrades.nl  Thu Oct 11 15:11:01 2012
From: jan at opentrades.nl (OpenTrades)
Date: Thu, 11 Oct 2012 15:11:01 +0200
Subject: [R-SIG-Finance] Error with applyStrategy
In-Reply-To: <1349937910.97669.YahooMailNeo@web162503.mail.bf1.yahoo.com>
References: <1349937910.97669.YahooMailNeo@web162503.mail.bf1.yahoo.com>
Message-ID: <5076C565.2090703@opentrades.nl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121011/408db92d/attachment.pl>

From worik.stanton at gmail.com  Fri Oct 12 05:15:06 2012
From: worik.stanton at gmail.com (Worik Stanton)
Date: Fri, 12 Oct 2012 16:15:06 +1300
Subject: [R-SIG-Finance] Problem with portfolio/blotter and base currencies
Message-ID: <50778B3A.5060104@gmail.com>

Friends

Running the attached code gives the following output:

> go(baseCur="AAA")
[1] "1970-01-02 00:00:00 AAABBB 100 @ 1.075"
[1] "1970-01-03 00:00:00 AAABBB -100 @ 1.4802"
Return:  -1.421085e-16
getEndEq: 100
curEq 140.52
> go(baseCur="BBB")
[1] "1970-01-02 00:00:00 AAABBB 100 @ 1.075"
[1] "1970-01-03 00:00:00 AAABBB -100 @ 1.4802"
Return:  0.4052
getEndEq: 140.52
curEq 140.52

The initial equity is set to 100.  When baseCur is "AAA" the endEq
should have moved, surly?

Switching the base currency of the Account and Portfolio objects has a
huge effect. 

I need to clear my head and re-examine how I am defining my curEq, not
sure I have that one corrrect in the case of baseCur == "BBB", but when
baseCur=="AAA" given the transactions, the equity should move.

Am I loosing my mind or is there a bug somewhere in blotter?  (I suspect
in .updatePosPL(..))

cheers
Worik

-- 
it does not matter                      I think that I shall never see
how much I dig and dig                    A billboard lovely as a tree
this hole just                      Indeed, unless the billboards fall
keeps getting deeper                      I'll never see a tree at all

-------------- next part --------------
## required libraries
require(quantmod)
require(TTR)
require(blotter)

go(baseCur="AAA")
go(baseCur="BBB")

go <- function(baseCur="BBB"){

  suppressWarnings(try(rm("account.testy","portfolio.testy",pos=.blotter),silent=TRUE))
  suppressWarnings(rm_exchange_rates("AAABBB"))
  suppressWarnings(rm_currencies("AAA"))
  suppressWarnings(rm_currencies("BBB"))
  suppressWarnings(try(rm("portfolio","account","N","symbol",
                          "ClosePrice", AAABBB, 
                          "CurrentDate","equity","Units",
                          "maxUnits","size","Stop",
                          "equity","TxnPrice","initDate",
                          "initEq","Posn","verbose"),silent=TRUE)
                   )

  idx <- as.Date(1:2)
  AAABBB <- xts(c(1.075, 1.4802), order.by=idx)
  names(AAABBB) <- "Close"
  assign("AAABBB", AAABBB, pos=1)

  currency("AAA")
  currency("BBB")
  exchange_rate("AAABBB", "BBB", "AAA", 0.00001)  
  ## Set up a portfolio object and an account object

  initEq <- 100
  curEq <- initEq
  initDate <- start(AAABBB)-1
  portfolio = "testy" 
  assign("portfolio", portfolio, pos=1)
  initPortf(name=portfolio, "AAABBB", initDate=initDate, currency=baseCur)
  account = "testy"
  assign("account", account, pos=1)
  initAcct(name=account,portfolios="testy", initDate=initDate,
           initEq=initEq, currency=baseCur)

  TxnDate <- idx[1]
  TxnPrice <- as.numeric(Cl(AAABBB[TxnDate,]))
  TxnQty <- 100
  curEq <- curEq - (TxnQty * TxnPrice)
  addTxn(Portfolio=portfolio,
         TxnDate=TxnDate,
         TxnQty = TxnQty,
         Symbol="AAABBB",
         TxnPrice=TxnPrice,
         TxnFees=0, verbose=TRUE)

  updatePortf(Portfolio = portfolio, Dates = TxnDate)
  updateAcct(account, Dates = TxnDate)
  updateEndEq(account, Dates = TxnDate)
  
  TxnDate <- idx[2]
  TxnPrice <- as.numeric(Cl(AAABBB[TxnDate,]))
  TxnQty <- -100
  curEq <- curEq - (TxnQty * TxnPrice)
  addTxn(Portfolio=portfolio,
         TxnDate=TxnDate,
         TxnQty = TxnQty,
         Symbol="AAABBB",
         TxnPrice=TxnPrice,
         TxnFees=0, verbose=TRUE)

  updatePortf(Portfolio = portfolio, Dates = TxnDate)
  updateAcct(account, Dates = TxnDate)
  updateEndEq(account, Dates = TxnDate)

  endDate <- end(AAABBB)
  cat('Return: ',
      (getEndEq(Account=account, Date=endDate)-initEq)/initEq,'\n')

  cat("getEndEq:", getEndEq(account, endDate), "\n")
  cat("curEq", curEq, "\n")
  
}#go()


From pgcristi at yahoo.com  Fri Oct 12 12:22:47 2012
From: pgcristi at yahoo.com (Cristi Popescu)
Date: Fri, 12 Oct 2012 03:22:47 -0700 (PDT)
Subject: [R-SIG-Finance] Fw:  Error with applyStrategy
In-Reply-To: <5076C565.2090703@opentrades.nl>
References: <1349937910.97669.YahooMailNeo@web162503.mail.bf1.yahoo.com>
	<5076C565.2090703@opentrades.nl>
Message-ID: <1350037367.16058.YahooMailNeo@web162506.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121012/84804af9/attachment.pl>

From bmresearch at mac.com  Fri Oct 12 16:43:29 2012
From: bmresearch at mac.com (Brian Moretta)
Date: Fri, 12 Oct 2012 15:43:29 +0100
Subject: [R-SIG-Finance] quanstrat: stop trailing with variable
	stops	size
In-Reply-To: <16797B88-74CC-4574-8B9B-30C8FD3BC686@mac.com>
References: <AA155081-4572-42FA-A6A3-04FC75B084F8@mac.com>
	<505D1BA1.7040400@braverock.com>
	<8FC313E7-3BA9-4797-A013-9572C7A23841@mac.com>
	<50638CB1.20909@opentrades.nl>
	<1E2E1159-24C7-4965-9DE4-DA21C439B0A3@mac.com>
	<16797B88-74CC-4574-8B9B-30C8FD3BC686@mac.com>
Message-ID: <60BECF68-E3BA-4227-9DF0-424FC0E87FC7@mac.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121012/dc5ad523/attachment.pl>

From bmresearch at mac.com  Fri Oct 12 16:46:38 2012
From: bmresearch at mac.com (Brian Moretta)
Date: Fri, 12 Oct 2012 15:46:38 +0100
Subject: [R-SIG-Finance] quanstrat: stop trailing with
	variable	stops	size
In-Reply-To: <60BECF68-E3BA-4227-9DF0-424FC0E87FC7@mac.com>
References: <AA155081-4572-42FA-A6A3-04FC75B084F8@mac.com>
	<505D1BA1.7040400@braverock.com>
	<8FC313E7-3BA9-4797-A013-9572C7A23841@mac.com>
	<50638CB1.20909@opentrades.nl>
	<1E2E1159-24C7-4965-9DE4-DA21C439B0A3@mac.com>
	<16797B88-74CC-4574-8B9B-30C8FD3BC686@mac.com>
	<60BECF68-E3BA-4227-9DF0-424FC0E87FC7@mac.com>
Message-ID: <19E58DD8-43E4-430F-8D7D-3592BFBBD5F2@mac.com>

Didn't attach file properly.

Unfortunately I think I closed this topic too soon. I've had problems getting this to work in another example so returned to this one to check. I see now that although it is operating a some sort of stop its not quite as I'd expect. e.g. first 4 trades in example are:
[1] "2007-04-04 00:00:00 GSPC 100 @ 1439.37"
[1] "2007-08-01 00:00:00 GSPC -100 @ 1465.81"
[1] "2007-09-19 00:00:00 GSPC 100 @ 1529.03"
[1] "2007-11-08 00:00:00 GSPC -100 @ 1493.63743174521"
If I go through mktdata from 2007/9/19 and track (highest price - 2*ATR) then the trade should close either 10/18 or 10/22 (depends on how high calculated). Actually 1493 is higher than Hi(GSPC) on 8/11/2007. Am I implementing wrong or is there something else amiss? Full code attached.

Brian

-------------- next part --------------
A non-text attachment was scrubbed...
Name: macd copy.R
Type: application/octet-stream
Size: 4653 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121012/c8ef16cc/attachment.obj>
-------------- next part --------------


On 12 Oct 2012, at 15:43, Brian Moretta wrote:

> Unfortunately I think I closed this topic too soon. I've had problems getting this to work in another example so returned to this one to check. I see now that although it is operating a some sort of stop its not quite as I'd expect. e.g. first 4 trades in example are:
> [1] "2007-04-04 00:00:00 GSPC 100 @ 1439.37"
> [1] "2007-08-01 00:00:00 GSPC -100 @ 1465.81"
> [1] "2007-09-19 00:00:00 GSPC 100 @ 1529.03"
> [1] "2007-11-08 00:00:00 GSPC -100 @ 1493.63743174521"
> If I go through mktdata from 2007/9/19 and track (highest price - 2*ATR) then the trade should close either 10/18 or 10/22 (depends on how high calculated). Actually 1493 is higher than Hi(GSPC) on 8/11/2007. Am I implementing wrong or is there something else amiss? Full code attached.
> 
> Brian
> 
> <macd copy.R>
> 
> On 27 Sep 2012, at 17:31, Brian Moretta wrote:
> 
>> Jan
>> 
>> That seems to working now. Thanks for your help.
>> 
>> Brian
>> 
>> PS saw on one of the forums you may be interested in an example of Donchian breakouts for the package. Have coded one so if you are still interested let me know & I'll tidy it up & forward it.
>> 
>> On 27 Sep 2012, at 00:16, OpenTrades wrote:
>> 
>>> Hi Brian,
>>> 
>>> We have now implemented support for using an indicator column in the mktdata object as threshold values. So in your source code, I suggest that you use:
>>>> add.indicator(strat.st, name = "stopATR", arguments = list(HLC=quote(HLC(mktdata)), n=14, maType="SMA", noATR=2) )
>>> to add your ATR values, and then refer to these in the rule:
>>>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty='all', ordertype='stoptrailing', orderside='long', threshold='stopATR.ind.atr', tmult=FALSE, orderset='exit2'), type='risk',label='trailingexit')
>>> 
>>> Please note that you cannot pass a column of threshold values as a vector. You can also not pass the name of a function: use the indicator method instead (see above).
>>> 
>>> Hope this helps,
>>> 
>>> Jan Humme.
>>> 
>>> 
>>> 
>>> On 25-09-12 16:10, Brian Moretta wrote:
>>>> Thanks for the suggestion. Now I'm getting interesting differences.
>>>> 
>>>> If I redefine my stopATR function (below) and use quote(mktdata$stopATR) as you suggest then I get an error message:
>>>> Error in if (order.side == "long" && as.numeric(Lo(mktdataTimestamp)) <  :
>>>> missing value where TRUE/FALSE needed
>>>> This followed by two identical warnings : In max(i) : no non-missing arguments to max; returning -Inf
>>>> This is the same error as if I used quote(mktdata$stopATR.ind.atr) with my original function.
>>>> stopATR <- function(HLC, n=14, maType, noATR=2){
>>>> 	stop.atr <- -noATR * ATR(HLC=HLC, n=n, maType=maType)$atr
>>>> 	colnames(stop.atr) <- c("stopATR")
>>>> 	stop.atr
>>>> }
>>>> 
>>>> If I'm lazy & use my original stopATR function then using quote(mktdata$atr) in the add.rule runs without any error messages. However the trailing stop doesn't seem to affect anything. Even using an ATR multiple of .1 (not realistic but gives a threshold of 2-3 points on the GSPC data) gives exactly the same transactions as with the add.rule for the stop commented out. Have checked the data and some should be affected but such a tight stop.
>>>> add.indicator(strat.st, name = "stopATR", arguments = list(HLC=quote(HLC(mktdata)), n=14, maType="SMA", noATR=.1) )
>>>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty='all', ordertype='stoptrailing', orderside='long', threshold=quote(mktdata$atr), tmult=FALSE, orderset='exit2'), type='risk',label='trailingexit')
>>>> 
>>>> I've also tried the following definition for stopATR with quote(mktdata$atr) as in the second case and I get the same error as in the first example.
>>>> stopATR <- function(HLC, n=14, maType, noATR=2){
>>>> 	stop.atr <- -noATR * ATR(HLC=HLC, n=n, maType=maType)$atr
>>>> }
>>>> 
>>>> Not sure if I'm missing something obvious or if there is something else going on.
>>>> 
>>>> Thanks
>>>> 
>>>> Brian
>>>> 
>>>> On 22 Sep 2012, at 03:00, Brian G. Peterson wrote:
>>>> 
>>>>> why not label your stopATR indicator ouput and set the threshold to that?
>>>>> 
>>>>> quote(mktdata$stopATR)
>>>>> 
>>>>> ?
>>>>> 
>>>>> 
>>>>> On 09/21/2012 02:07 PM, Brian Moretta wrote:
>>>>>> Hi
>>>>>> 
>>>>>> I've been trying to modify the MACD example with trailing stop so that it uses a 2ATR stop rather than a fixed value or proportion. Key seems to be the threshold value. Help says
>>>>>> 
>>>>>> If threshold is not numeric or NULL it should be the character string describing a function that can calculate a threshold. Ideally this will be a column lookup on a non-path-dependent indicator calculated in advance.
>>>>>> 
>>>>>> I keep getting errors with the threshold set to something that uses a vector whether text or not. The add.rule line is (full code at end)
>>>>>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty='all', ordertype='stoptrailing', orderside='long', threshold=stopvalue, tmult=FALSE, orderset='exit2'), type='risk',label='trailing exit')
>>>>>> 
>>>>>> With stopvalue set to -20 it works fine. Tried stop.atr$atr, as a vector, inside quotes (help says character string) and inside quote() but to no avail. Tried similar for indicator mktdata$stopATR.ind.atr. Going through previous questions in this area I'm not sure if I'm just doing it wrong or pushing the limits of quanstrat's development, but any suggestions are welcome.
>>>>>> 
>>>>>> Thanks
>>>>>> 
>>>>>> Brian
>>>>>> 
>>>>>> require(quantstrat)
>>>>>> suppressWarnings(rm("order_book.macd",pos=.strategy))
>>>>>> suppressWarnings(rm("account.macd","portfolio.macd",pos=.blotter))
>>>>>> suppressWarnings(rm("account.st","portfolio.st","stock.str","stratMACD","initDate","initEq",'start_t','end_t'))
>>>>>> 
>>>>>> #stock.str='AAPL' # what are we trying it on
>>>>>> stock.str='GSPC'
>>>>>> getSymbols("^GSPC", src='yahoo', index.class=c("POSIXt","POSIXct"), from='2007-01-01')
>>>>>> 
>>>>>> stopATR <- function(HLC, n=14, maType, noATR=2){
>>>>>> 	stop.atr <- -noATR * ATR(HLC=HLC, n=n, maType=maType)
>>>>>> }
>>>>>> stop.atr <- -2 * ATR(HLC(get(stock.str)), n=14, maType='SMA')
>>>>>> stopvalue <- -20
>>>>>> 
>>>>>> #MA parameters for MACD
>>>>>> fastMA = 12
>>>>>> slowMA = 26
>>>>>> signalMA = 9
>>>>>> maType="EMA"
>>>>>> 
>>>>>> currency('USD')
>>>>>> stock(stock.str,currency='USD',multiplier=1)
>>>>>> 
>>>>>> initDate='2006-12-31'
>>>>>> initEq=1000000
>>>>>> portfolio.st='macd'
>>>>>> account.st='macd'
>>>>>> 
>>>>>> initPortf(portfolio.st,symbols=stock.str, initDate=initDate)
>>>>>> initAcct(account.st,portfolios=portfolio.st, initDate=initDate)
>>>>>> initOrders(portfolio=portfolio.st,initDate=initDate)
>>>>>> 
>>>>>> strat.st<-portfolio.st
>>>>>> # define the strategy
>>>>>> strategy(strat.st, store=TRUE)
>>>>>> 
>>>>>> #one indicator
>>>>>> add.indicator(strat.st, name = "MACD", arguments = list(x=quote(Cl(mktdata))) )
>>>>>> add.indicator(strat.st, name = "stopATR", arguments = list(HLC=quote(HLC(mktdata)), n=14, maType="SMA", noATR=2) )
>>>>>> 
>>>>>> #two signals
>>>>>> add.signal(strat.st,name="sigThreshold",arguments = list(column="signal",relationship="gt",threshold=0,cross=TRUE),label="signal.gt.zero")
>>>>>> add.signal(strat.st,name="sigThreshold",arguments = list(column="signal",relationship="lt",threshold=0,cross=TRUE),label="signal.lt.zero")
>>>>>> 
>>>>>> ####
>>>>>> # add rules
>>>>>> 
>>>>>> # entry
>>>>>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty=100, ordertype='market', orderside='long', threshold=NULL),type='enter',label='enter',storefun=FALSE)
>>>>>> 
>>>>>> #alternatives for risk stops:
>>>>>> # alternately, use a trailing order, with 2ATR stop
>>>>>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty='all', ordertype='stoptrailing', orderside='long', threshold=stop.atr$atr, tmult=FALSE, orderset='exit2'), type='risk',label='trailingexit')
>>>>>> 
>>>>>> # exit
>>>>>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.lt.zero",sigval=TRUE, orderqty='all', ordertype='market', orderside='long', threshold=NULL,orderset='exit2'),type='exit',label='exit')
>>>>>> 
>>>>>> #end rules
>>>>>> ####
>>>>>> 
>>>>>> start_t<-Sys.time()
>>>>>> out<-try(applyStrategy(strat.st , portfolios=portfolio.st,parameters=list(nFast=fastMA, nSlow=slowMA, nSig=signalMA,maType=maType)))
>>>>>> end_t<-Sys.time()
>>>>>> print(end_t-start_t)
>>>>>> 
>>>>>> start_t<-Sys.time()
>>>>>> updatePortf(Portfolio=portfolio.st,Dates=paste('::',as.Date(Sys.time()),sep=''))
>>>>>> end_t<-Sys.time()
>>>>>> print("trade blotter portfolio update:")
>>>>>> print(end_t-start_t)
>>>>>> 
>>>>>> chart.Posn(Portfolio=portfolio.st,Symbol=stock.str)
>>>>>> plot(add_MACD(fast=fastMA, slow=slowMA, signal=signalMA,maType="EMA"))
>>>>>> 
>>>>>> 	[[alternative HTML version deleted]]
>>>>>> 
>>>>>> _______________________________________________
>>>>>> R-SIG-Finance at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>>>> 
>>>>> 
>>>>> -- 
>>>>> Brian G. Peterson
>>>>> http://braverock.com/brian/
>>>>> Ph: 773-459-4973
>>>>> IM: bgpbraverock
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Finance at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>> 
>>>> 	[[alternative HTML version deleted]]
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>> 
>>> 
>>> 
>>> -- 
>>> Jan Humme - OpenTrades
>>> 
>>> WWW:     http://www.opentrades.nl
>>> Email:   jan at opentrades.nl
>>> Twitter: @opentrades
>>> 
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>> 
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jan at opentrades.nl  Fri Oct 12 18:11:20 2012
From: jan at opentrades.nl (OpenTrades)
Date: Fri, 12 Oct 2012 18:11:20 +0200
Subject: [R-SIG-Finance] Fw:  Error with applyStrategy
In-Reply-To: <1350037367.16058.YahooMailNeo@web162506.mail.bf1.yahoo.com>
References: <1349937910.97669.YahooMailNeo@web162503.mail.bf1.yahoo.com>
	<5076C565.2090703@opentrades.nl>
	<1350037367.16058.YahooMailNeo@web162506.mail.bf1.yahoo.com>
Message-ID: <50784128.20100@opentrades.nl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121012/097f8074/attachment.pl>

From michael.weylandt at gmail.com  Fri Oct 12 22:52:22 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Fri, 12 Oct 2012 21:52:22 +0100
Subject: [R-SIG-Finance] [R] RTAQ - convert function: warning causes
	incorrect loading of data
In-Reply-To: <1350064873691-4646025.post@n4.nabble.com>
References: <1350064873691-4646025.post@n4.nabble.com>
Message-ID: <CAAmySGMU4cgTLCTrC+8tH1WBRCSsLcDxgVGScbFZi0CUtLozLA@mail.gmail.com>

I'm forwarding this to the R-SIG-Finance list, where ou'll have a more
specialized audience.

In the meanwhile, you may wish to look at
http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

Finally, I note you're posting from Nabble. Please do include context in
your reply -- I don't believe Nabble does this automatically, so
you'll need to manually include it. Most of the regular respondents on
these lists don't use Nabble -- it is a _mailing list_ after all -- so
we don't get the forum view you do, only emails of the individual
posts. Combine that with the high volume of posts, and it's quite
difficult to trace a discussion if we all don't make sure to include
context.

Cheers,
Michael

On Fri, Oct 12, 2012 at 7:01 PM, caprarn9 <caprarn9 at cs.man.ac.uk> wrote:
> Hello,
>
> I am closely following the RTAQ documentation in order to load my dataset
> into R, however I get this warning when running the convert function in the
> following way:
>
> convert(from="2010-11-01", to="2010-11-01",datasource=datasource,
> datadestination=datadestination,trades=T,quotes=T,ticker="BAC",dir=T,
> extention="csv", header=T, tradecolnames=c("SYMBOL", "DATE", "TIME",
> "PRICE", "SIZE", "G127", "CORR", "COND", "EX"), quotecolnames=c("SYMBOL",
> "DATE", "TIME", "BID", "OFR", "BIDSIZ", "OFRSIZ", "MODE", "EX"))
>
> The only warning returned is:
> In `[<-.factor`(`*tmp*`, is.na(tdata$G127), value = c(1L, 1L, 1L,  :
>   invalid factor level, NAs generated
>
> As it is a warning, the .RData files still get created and I can use TAQLoad
> to load them:
>
> x <-
> TAQLoad("BAC",from="2010-11-01",to="2010-11-01",datasource=datadestination,
> trades=T,quotes=T)
>
> The PROBLEM:
> head(x)
>      SYMBOL EX  PRICE     SIZE    COND CORR G127
> <NA> "BAC"  "B" "11.4900" "  500" "@"  "0"  "0"
> ...
>
> This is the same for the quotes objects, but different headers obviously. I
> get a <NA> instead of the expected YYY-MM-DD HH:MM:SS format for each
> observation.
>
> I've spent a fair number of hours on trying to get this right, no success.
> Can you please provide me with some guidance?
>
> Thank you.
>
> A sample from the CSV files I use:
>
> SYMBOL,DATE,TIME,BID,OFR,BIDSIZ,OFRSIZ,MODE,EX
> BAC,20101101,9:30:00,11.5,11.51,5,116,12,P
> ...
>
> SYMBOL,DATE,TIME,PRICE,SIZE,G127,CORR,COND,EX
> BAC,20101101,10:30:00,11.49,500,0,0,@,B
> ...
>
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/RTAQ-convert-function-warning-causes-incorrect-loading-of-data-tp4646025.html
> Sent from the R help mailing list archive at Nabble.com.
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From michael.weylandt at gmail.com  Sat Oct 13 11:51:16 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Sat, 13 Oct 2012 10:51:16 +0100
Subject: [R-SIG-Finance] [R] DCC help
In-Reply-To: <1350103015052-4646061.post@n4.nabble.com>
References: <1350103015052-4646061.post@n4.nabble.com>
Message-ID: <CAAmySGPWsMwF1KEM_WowgLLhiYYh8a_PH-XYx86+ntP06h-gkA@mail.gmail.com>

Forwarding to R-SIG-Finance where I believe you're likely to get more help:

In the meanwhile, I think you may wish to look at
http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

Finally, I note you're posting from Nabble. Please include context in
your follow-ups -- I don't believe Nabble does this automatically, so
you'll need to manually include it. Most of the regular respondents on
these lists don't use Nabble -- it is a _mailing list_ after all -- so
we don't get the forum view you do, only emails of the individual
posts. Combine that with the high volume of posts, and it's quite
difficult to trace a discussion if we all don't make sure to include
context.

Cheers,
Michael

On Sat, Oct 13, 2012 at 5:36 AM, australiastudent
<martin.ding at student.adelaide.edu.au> wrote:
> hi all,
>
> i am using a dcc model for my senior thesis, it looks at stock returns
> during times of market uncertainty.
>
> my current rfile is below.
>
> library(SparseM)
> library(quantreg)
> library(zoo)
> library(nortest)
> library(MASS)
> library(fEcofin)
> library(mvtnorm)
> library(ccgarch)
> library(stats)
> library(foreign)
>
> #dataset<-read.csv(file="xxxx",header=FALSE)
> attach(dataset);
>
> vardata=data.frame(dataset[,2],dataset[,4])
>
> ### DCC ###
>
> #initial values
> a1 <- c(0.003, 0.001, 0.001)
> A1 <- diag(c(0.1,0.1,0.1))
> B1 <- diag(c(0.1, 0.1, 0.1))
> dcc.para <- c(0.01,0.98)
>
> # Estimating a DCC-GARCH(1,1) model
> dcc.results <- dcc.estimation(inia=a, iniA=A, iniB=B, ini.dcc=dcc.para,
> dvar=vardata, model="diagonal")
> # Parameter estimates and their robust standard errors
> dcc.results$out
>
> DCC_corr<-dcc.results$DCC[,2]
>
> plot(DCC_corr)
>
> this gives me the output results and a plot.
>
> the questions i have are
>
> 1. how do i get a plot with lines instead of dots
>
> 2. in my file i have two types of dummy variables - the first are quantiles
> where it is 1 if stock returns are in the lowest 5% quantile and the second
> dummy variable are specific events in the world economy where it is 1 if the
> stock return for that day happens to lie within the date range i specified
> for each event.
>
> i have fun the dcc without my dummy variables, but how can i incorporate my
> dummies into my results as i cannot find a user guide to help me
>
> any help would be greatly appreciated!
>
> thank you all!
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/DCC-help-tp4646061.html
> Sent from the R help mailing list archive at Nabble.com.
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From caprarn9 at cs.man.ac.uk  Sat Oct 13 17:33:03 2012
From: caprarn9 at cs.man.ac.uk (Nicolae Caprarescu)
Date: Sat, 13 Oct 2012 16:33:03 +0100
Subject: [R-SIG-Finance] [R] RTAQ - convert function: warning causes
	incorrect loading of data
In-Reply-To: <CAAmySGMU4cgTLCTrC+8tH1WBRCSsLcDxgVGScbFZi0CUtLozLA@mail.gmail.com>
References: <1350064873691-4646025.post@n4.nabble.com>
	<CAAmySGMU4cgTLCTrC+8tH1WBRCSsLcDxgVGScbFZi0CUtLozLA@mail.gmail.com>
Message-ID: <889e7c0ae479d2759dad92ba4455b150@cs.man.ac.uk>

Hi Michael,

Thank you for pointing me in the right direction, I'm now using an email
client rather than Nabble.

Related to the issue I described below, it's resolved now, I have managed
to fix it myself. However, I believe this might be a bug, or at least
something that needs improving; I have described both how to reproduce this
issue and its solution in the below 4 steps:
1) library(RTAQ)
2) Create XXX_trades.csv file with the contents below using a relative
path like [somewhere]/TAQData/2010-11-01/XXX_trades.csv
SYMBOL,DATE,TIME,PRICE,SIZE,G127,CORR,COND,EX
XXX,20101101,10:30:00,11.49,500,0,0,@,B
XXX,20101101,10:30:02,11.49,322,0,0,0,B
XXX,20101101,10:30:02,11.49,178,0,0,@,B
XXX,20101101,10:30:03,11.49,500,0,0,@,B
XXX,20101101,10:30:03,11.49,187,0,0,@,D
3) 
#convert does not generate any errors/warnings, however it does not work
properly
convert(from="2010-11-01",
to="2010-11-01",datasource="[somewhere]/TAQData/",
datadestination="[somewhere]/TAQDataRData/",trades=T,quotes=F,ticker="XXX",dir=T,
extention="csv", header=T, tradecolnames=c("SYMBOL", "DATE", "TIME",
"PRICE", "SIZE", "G127", "CORR", "COND", "EX"))
#loading the RData created by convert
TAQLoad("XXX",from="2010-11-01",to="2010-11-01",datasource="[somewhere]TAQDataRData/",
trades=T,quotes=F)
#output of TAQLoad 
     SYMBOL EX  PRICE   SIZE  COND CORR G127
<NA> "XXX"  "B" "11.49" "500" "@"  "0"  "0" 
<NA> "XXX"  "B" "11.49" "322" "0"  "0"  "0" 
<NA> "XXX"  "B" "11.49" "178" "@"  "0"  "0" 
<NA> "XXX"  "B" "11.49" "500" "@"  "0"  "0" 
<NA> "XXX"  "D" "11.49" "187" "@"  "0"  "0" 
Warning message:
timezone of object (GMT) is different than current timezone (). 

Problem are the <NA>s. If one does not supply the format of date and time
to the convert function, it is assumed that the standard NYSE format is
used, and therefore RTAQ internally (convert_to_RData.r line 32) represents
this as "Y%M%D %H:%M:%S". Whilst this works fine for some things, when a
timeDate is initialised using this format (convert_to_RData.r line 102), it
does not work. timeDate expects a correct format like "%Y%m%d %H:%M:%S"
format rather than "Y%M%D %H:%M:%S".
Run the below two to confirm: 
tdobject=timeDate:::timeDate(paste(as.vector("2010-10-11"),
as.vector("10:30:30")), format="%Y%M%D
%H:%M:%S",FinCenter="GMT",zone="GMT")
#tdobject is GMT [1] [NA]
tdobject=timeDate:::timeDate(paste(as.vector("20101011"),
as.vector("10:30:30")), format="%Y%m%d
%H:%M:%S",FinCenter="GMT",zone="GMT")
#tdobject is now GMT [1] [2010-10-11 10:30:30]

Therefore, if one explicitly includes format="%Y%m%d %H:%M:%S" in the
convert function, everything works fine and the <NA> problem above is
solved; this is my solution. Can I please suggest that, once you
investigate this and provided that you confirm my understanding,
convert_to_RData.r is changed in order to use "%Y%m%d %H:%M:%S" as the
default format? 

4) My environment:
R version 2.15.1 (2012-06-22)
Platform: i686-pc-linux-gnu (32-bit)

locale:
 [1] LC_CTYPE=en_GB       LC_NUMERIC=C         LC_TIME=en_GB       
 [4] LC_COLLATE=C         LC_MONETARY=en_GB    LC_MESSAGES=en_GB   
 [7] LC_PAPER=C           LC_NAME=C            LC_ADDRESS=C        
[10] LC_TELEPHONE=C       LC_MEASUREMENT=en_GB LC_IDENTIFICATION=C 

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] RTAQ_0.2         timeDate_2160.97 xts_0.8-6        zoo_1.7-8       

loaded via a namespace (and not attached):
[1] grid_2.15.1    lattice_0.20-6


Best wishes,
Nicolae



On Fri, 12 Oct 2012 21:52:22 +0100, "R. Michael Weylandt"
<michael.weylandt at gmail.com> wrote:
> I'm forwarding this to the R-SIG-Finance list, where ou'll have a more
> specialized audience.
> 
> In the meanwhile, you may wish to look at
>
http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example
> 
> Finally, I note you're posting from Nabble. Please do include context in
> your reply -- I don't believe Nabble does this automatically, so
> you'll need to manually include it. Most of the regular respondents on
> these lists don't use Nabble -- it is a _mailing list_ after all -- so
> we don't get the forum view you do, only emails of the individual
> posts. Combine that with the high volume of posts, and it's quite
> difficult to trace a discussion if we all don't make sure to include
> context.
> 
> Cheers,
> Michael
> 
> On Fri, Oct 12, 2012 at 7:01 PM, caprarn9 <caprarn9 at cs.man.ac.uk> wrote:
>> Hello,
>>
>> I am closely following the RTAQ documentation in order to load my
dataset
>> into R, however I get this warning when running the convert function in
>> the
>> following way:
>>
>> convert(from="2010-11-01", to="2010-11-01",datasource=datasource,
>> datadestination=datadestination,trades=T,quotes=T,ticker="BAC",dir=T,
>> extention="csv", header=T, tradecolnames=c("SYMBOL", "DATE", "TIME",
>> "PRICE", "SIZE", "G127", "CORR", "COND", "EX"),
quotecolnames=c("SYMBOL",
>> "DATE", "TIME", "BID", "OFR", "BIDSIZ", "OFRSIZ", "MODE", "EX"))
>>
>> The only warning returned is:
>> In `[<-.factor`(`*tmp*`, is.na(tdata$G127), value = c(1L, 1L, 1L,  :
>>   invalid factor level, NAs generated
>>
>> As it is a warning, the .RData files still get created and I can use
>> TAQLoad
>> to load them:
>>
>> x <-
>>
TAQLoad("BAC",from="2010-11-01",to="2010-11-01",datasource=datadestination,
>> trades=T,quotes=T)
>>
>> The PROBLEM:
>> head(x)
>>      SYMBOL EX  PRICE     SIZE    COND CORR G127
>> <NA> "BAC"  "B" "11.4900" "  500" "@"  "0"  "0"
>> ...
>>
>> This is the same for the quotes objects, but different headers
>> obviously. I
>> get a <NA> instead of the expected YYY-MM-DD HH:MM:SS format for each
>> observation.
>>
>> I've spent a fair number of hours on trying to get this right, no
>> success.
>> Can you please provide me with some guidance?
>>
>> Thank you.
>>
>> A sample from the CSV files I use:
>>
>> SYMBOL,DATE,TIME,BID,OFR,BIDSIZ,OFRSIZ,MODE,EX
>> BAC,20101101,9:30:00,11.5,11.51,5,116,12,P
>> ...
>>
>> SYMBOL,DATE,TIME,PRICE,SIZE,G127,CORR,COND,EX
>> BAC,20101101,10:30:00,11.49,500,0,0,@,B
>> ...
>>
>>
>>
>>
>> --
>> View this message in context:
>>
http://r.789695.n4.nabble.com/RTAQ-convert-function-warning-causes-incorrect-loading-of-data-tp4646025.html
>> Sent from the R help mailing list archive at Nabble.com.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From jeff.a.ryan at gmail.com  Sat Oct 13 19:33:01 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Sat, 13 Oct 2012 12:33:01 -0500
Subject: [R-SIG-Finance] [R] RTAQ - convert function: warning causes
	incorrect loading of data
In-Reply-To: <889e7c0ae479d2759dad92ba4455b150@cs.man.ac.uk>
References: <1350064873691-4646025.post@n4.nabble.com>
	<CAAmySGMU4cgTLCTrC+8tH1WBRCSsLcDxgVGScbFZi0CUtLozLA@mail.gmail.com>
	<889e7c0ae479d2759dad92ba4455b150@cs.man.ac.uk>
Message-ID: <3C52CE1C-1013-4534-966B-D1CA0ADD6213@gmail.com>

FWIW %m is the proper conversion for months. %M is minutes. 

Looks like a bug. 

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Oct 13, 2012, at 10:33 AM, Nicolae Caprarescu <caprarn9 at cs.man.ac.uk> wrote:

> Hi Michael,
> 
> Thank you for pointing me in the right direction, I'm now using an email
> client rather than Nabble.
> 
> Related to the issue I described below, it's resolved now, I have managed
> to fix it myself. However, I believe this might be a bug, or at least
> something that needs improving; I have described both how to reproduce this
> issue and its solution in the below 4 steps:
> 1) library(RTAQ)
> 2) Create XXX_trades.csv file with the contents below using a relative
> path like [somewhere]/TAQData/2010-11-01/XXX_trades.csv
> SYMBOL,DATE,TIME,PRICE,SIZE,G127,CORR,COND,EX
> XXX,20101101,10:30:00,11.49,500,0,0,@,B
> XXX,20101101,10:30:02,11.49,322,0,0,0,B
> XXX,20101101,10:30:02,11.49,178,0,0,@,B
> XXX,20101101,10:30:03,11.49,500,0,0,@,B
> XXX,20101101,10:30:03,11.49,187,0,0,@,D
> 3) 
> #convert does not generate any errors/warnings, however it does not work
> properly
> convert(from="2010-11-01",
> to="2010-11-01",datasource="[somewhere]/TAQData/",
> datadestination="[somewhere]/TAQDataRData/",trades=T,quotes=F,ticker="XXX",dir=T,
> extention="csv", header=T, tradecolnames=c("SYMBOL", "DATE", "TIME",
> "PRICE", "SIZE", "G127", "CORR", "COND", "EX"))
> #loading the RData created by convert
> TAQLoad("XXX",from="2010-11-01",to="2010-11-01",datasource="[somewhere]TAQDataRData/",
> trades=T,quotes=F)
> #output of TAQLoad 
>     SYMBOL EX  PRICE   SIZE  COND CORR G127
> <NA> "XXX"  "B" "11.49" "500" "@"  "0"  "0" 
> <NA> "XXX"  "B" "11.49" "322" "0"  "0"  "0" 
> <NA> "XXX"  "B" "11.49" "178" "@"  "0"  "0" 
> <NA> "XXX"  "B" "11.49" "500" "@"  "0"  "0" 
> <NA> "XXX"  "D" "11.49" "187" "@"  "0"  "0" 
> Warning message:
> timezone of object (GMT) is different than current timezone (). 
> 
> Problem are the <NA>s. If one does not supply the format of date and time
> to the convert function, it is assumed that the standard NYSE format is
> used, and therefore RTAQ internally (convert_to_RData.r line 32) represents
> this as "Y%M%D %H:%M:%S". Whilst this works fine for some things, when a
> timeDate is initialised using this format (convert_to_RData.r line 102), it
> does not work. timeDate expects a correct format like "%Y%m%d %H:%M:%S"
> format rather than "Y%M%D %H:%M:%S".
> Run the below two to confirm: 
> tdobject=timeDate:::timeDate(paste(as.vector("2010-10-11"),
> as.vector("10:30:30")), format="%Y%M%D
> %H:%M:%S",FinCenter="GMT",zone="GMT")
> #tdobject is GMT [1] [NA]
> tdobject=timeDate:::timeDate(paste(as.vector("20101011"),
> as.vector("10:30:30")), format="%Y%m%d
> %H:%M:%S",FinCenter="GMT",zone="GMT")
> #tdobject is now GMT [1] [2010-10-11 10:30:30]
> 
> Therefore, if one explicitly includes format="%Y%m%d %H:%M:%S" in the
> convert function, everything works fine and the <NA> problem above is
> solved; this is my solution. Can I please suggest that, once you
> investigate this and provided that you confirm my understanding,
> convert_to_RData.r is changed in order to use "%Y%m%d %H:%M:%S" as the
> default format? 
> 
> 4) My environment:
> R version 2.15.1 (2012-06-22)
> Platform: i686-pc-linux-gnu (32-bit)
> 
> locale:
> [1] LC_CTYPE=en_GB       LC_NUMERIC=C         LC_TIME=en_GB       
> [4] LC_COLLATE=C         LC_MONETARY=en_GB    LC_MESSAGES=en_GB   
> [7] LC_PAPER=C           LC_NAME=C            LC_ADDRESS=C        
> [10] LC_TELEPHONE=C       LC_MEASUREMENT=en_GB LC_IDENTIFICATION=C 
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base     
> 
> other attached packages:
> [1] RTAQ_0.2         timeDate_2160.97 xts_0.8-6        zoo_1.7-8       
> 
> loaded via a namespace (and not attached):
> [1] grid_2.15.1    lattice_0.20-6
> 
> 
> Best wishes,
> Nicolae
> 
> 
> 
> On Fri, 12 Oct 2012 21:52:22 +0100, "R. Michael Weylandt"
> <michael.weylandt at gmail.com> wrote:
>> I'm forwarding this to the R-SIG-Finance list, where ou'll have a more
>> specialized audience.
>> 
>> In the meanwhile, you may wish to look at
>> 
> http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example
>> 
>> Finally, I note you're posting from Nabble. Please do include context in
>> your reply -- I don't believe Nabble does this automatically, so
>> you'll need to manually include it. Most of the regular respondents on
>> these lists don't use Nabble -- it is a _mailing list_ after all -- so
>> we don't get the forum view you do, only emails of the individual
>> posts. Combine that with the high volume of posts, and it's quite
>> difficult to trace a discussion if we all don't make sure to include
>> context.
>> 
>> Cheers,
>> Michael
>> 
>> On Fri, Oct 12, 2012 at 7:01 PM, caprarn9 <caprarn9 at cs.man.ac.uk> wrote:
>>> Hello,
>>> 
>>> I am closely following the RTAQ documentation in order to load my
> dataset
>>> into R, however I get this warning when running the convert function in
>>> the
>>> following way:
>>> 
>>> convert(from="2010-11-01", to="2010-11-01",datasource=datasource,
>>> datadestination=datadestination,trades=T,quotes=T,ticker="BAC",dir=T,
>>> extention="csv", header=T, tradecolnames=c("SYMBOL", "DATE", "TIME",
>>> "PRICE", "SIZE", "G127", "CORR", "COND", "EX"),
> quotecolnames=c("SYMBOL",
>>> "DATE", "TIME", "BID", "OFR", "BIDSIZ", "OFRSIZ", "MODE", "EX"))
>>> 
>>> The only warning returned is:
>>> In `[<-.factor`(`*tmp*`, is.na(tdata$G127), value = c(1L, 1L, 1L,  :
>>>  invalid factor level, NAs generated
>>> 
>>> As it is a warning, the .RData files still get created and I can use
>>> TAQLoad
>>> to load them:
>>> 
>>> x <-
>>> 
> TAQLoad("BAC",from="2010-11-01",to="2010-11-01",datasource=datadestination,
>>> trades=T,quotes=T)
>>> 
>>> The PROBLEM:
>>> head(x)
>>>     SYMBOL EX  PRICE     SIZE    COND CORR G127
>>> <NA> "BAC"  "B" "11.4900" "  500" "@"  "0"  "0"
>>> ...
>>> 
>>> This is the same for the quotes objects, but different headers
>>> obviously. I
>>> get a <NA> instead of the expected YYY-MM-DD HH:MM:SS format for each
>>> observation.
>>> 
>>> I've spent a fair number of hours on trying to get this right, no
>>> success.
>>> Can you please provide me with some guidance?
>>> 
>>> Thank you.
>>> 
>>> A sample from the CSV files I use:
>>> 
>>> SYMBOL,DATE,TIME,BID,OFR,BIDSIZ,OFRSIZ,MODE,EX
>>> BAC,20101101,9:30:00,11.5,11.51,5,116,12,P
>>> ...
>>> 
>>> SYMBOL,DATE,TIME,PRICE,SIZE,G127,CORR,COND,EX
>>> BAC,20101101,10:30:00,11.49,500,0,0,@,B
>>> ...
>>> 
>>> 
>>> 
>>> 
>>> --
>>> View this message in context:
>>> 
> http://r.789695.n4.nabble.com/RTAQ-convert-function-warning-causes-incorrect-loading-of-data-tp4646025.html
>>> Sent from the R help mailing list archive at Nabble.com.
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Sat Oct 13 19:40:56 2012
From: gsee000 at gmail.com (G See)
Date: Sat, 13 Oct 2012 12:40:56 -0500
Subject: [R-SIG-Finance] Slow data EOD
In-Reply-To: <CAAHNhKV1PQ9ex6y9C79GJh0GQnDjyBmTeBWb4ONXDbJN+ftKCw@mail.gmail.com>
References: <CAAHNhKXdp8KM+fwPb0TJEE4F89L0_uZgYOOyLPB_dMWcSpuveg@mail.gmail.com>
	<CA+xi=qZAv+vAUY=jhEYfD-M3vD=vRrvNcUngw6VcdVj+20W7iA@mail.gmail.com>
	<CAAHNhKVuKSzxp=jA5NT_3-26qzE1vH4xWoTnO+8RRpBPz8jQmg@mail.gmail.com>
	<CA+xi=qYkargVdYS3y4WYMnhnO_UUH5JQLDCnDCVfCW2tP-VOtw@mail.gmail.com>
	<CAAHNhKV1PQ9ex6y9C79GJh0GQnDjyBmTeBWb4ONXDbJN+ftKCw@mail.gmail.com>
Message-ID: <CA+xi=qaaCTS5L4XHL8zcgosJjVo-oQx4z7fM7mLamf-JzN07CQ@mail.gmail.com>

And Jeff's already provided a quoteFormat (which I had forgotten
about) so that you don't have to rearrange columns.

> getQuote("SPY", what=yahooQuote.EOD)
             Trade Time   Open   High    Low  Close    Volume
SPY 2012-10-12 04:00:00 143.46 143.95 142.58 142.89 124181904


On Tue, Oct 9, 2012 at 12:04 PM, Ralph Vince <rvince99 at gmail.com> wrote:
> Ah, ok....then I can create a function to perhaps append it onto the
> file I am downloading entirely end of day or something like that.
>
> On Tue, Oct 9, 2012 at 1:02 PM, G See <gsee000 at gmail.com> wrote:
>> On Tue, Oct 9, 2012 at 11:58 AM, Ralph Vince <rvince99 at gmail.com> wrote:
>>> Thanks Garrett, Im really just looking for timely end-of-day data on
>>> this though. Ralph
>>
>> For example, getQuote("SPY"), will return end of day data if you call
>> it late in the afternoon ;-)


From noahsilverman at ucla.edu  Sun Oct 14 00:53:09 2012
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Sat, 13 Oct 2012 15:53:09 -0700
Subject: [R-SIG-Finance] Errors with updatePortf in blotter package
Message-ID: <9C040636-96DE-48C6-8C83-81C9FE719CCB@ucla.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121013/cc4baa34/attachment.pl>

From chicagobrownblue at hotmail.com  Sun Oct 14 05:29:28 2012
From: chicagobrownblue at hotmail.com (FJ M)
Date: Sun, 14 Oct 2012 03:29:28 +0000
Subject: [R-SIG-Finance] Daily dividend yield
Message-ID: <BLU161-W52A48352F141F265C7AAE8DF720@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121014/c3a5435c/attachment.pl>

From gsee000 at gmail.com  Mon Oct 15 04:39:26 2012
From: gsee000 at gmail.com (G See)
Date: Sun, 14 Oct 2012 21:39:26 -0500
Subject: [R-SIG-Finance] Daily dividend yield
In-Reply-To: <BLU161-W52A48352F141F265C7AAE8DF720@phx.gbl>
References: <BLU161-W52A48352F141F265C7AAE8DF720@phx.gbl>
Message-ID: <CA+xi=qY0nUi_A8gOdGQv4MJXRuKBqdhaGL8bqSNTJUaPQsixYg@mail.gmail.com>

Hi Frank,

> 1) I have downloaded both the dividends and the OHLCVAdjC data successfully. When I merge the data with fill=0.0 and export the merged data with write.csv, the date is replaced with the index from 1 to 52, first few lines:

I suggest using write.zoo().  But, you can also consult ?write.table
and the R Data Import/Export manual
(http://cran.r-project.org/doc/manuals/R-data.html)

> 2) Divs contains the dividend date and the 1 dividend 0.20. Stock contains theOHLVAdjC data for Microsoft. I can print the dates using Divs[1,0] and Stock[1,0] but a comparison of those dates always results in an error:

What looks like Dates to you is actually a zero-width xts object.

This is the line that's giving you trouble

    if ((Stock[i,0]) == (Divs[j,0]))  Current_Div <- Divs[j,1]

If you are trying to compare indexes, maybe something along these
lines would work better.

    index(Stock[i]) == index(Divs[j])

#----
> if (Stock[i, 0] == Divs[1, 0]) print("equal")
Error in if (Stock[i, 0] == Divs[1, 0]) print("equal") :
  argument is of length zero
> Divs[1, 0]

2012-08-14
> length(Divs[1, 0])
[1] 0
> index(Divs[1])
[1] "2012-08-14"
> if (index(Stock[i]) == index(Divs[1])) print("equal") # no error
#----

That said, I'm fairly confident that you should not use a (double) for
loop for this.  I can't quite tell from your code what you're trying
to do, but if you provide your desired output, I'm sure we can come up
with a vectorized solution.

For example, if you want to multiply the last quarterly dividend
amount by 4 and use that value every day until the next dividend, you
can do the following:

    # Setup based on original question
    Divs_Per_Year<-4
    startDate=as.Date("2012-05-01")
    endDate=as.Date("2012-10-13")
    Divs<-getDividends(ticker, from = startDate, to = endDate)
    Stock <- getSymbols(ticker, from=startDate, to=endDate, src='yahoo',
                                   auto.assign=FALSE)
    # End setup

    na.locf(merge(Stock, Divs * Divs_Per_Year, retside=c(FALSE, TRUE)))

Or, if you want to do basically the same thing, but divide the current
estimate for the annual dividend amount by the most recent price in
order to calculate the current yield, you can do this:

    with(na.locf(merge(Stock, AnnDiv=Divs * Divs_Per_Year)), AnnDiv /
MSFT.Adjusted)

HTH,
Garrett

On Sat, Oct 13, 2012 at 10:29 PM, FJ M <chicagobrownblue at hotmail.com> wrote:
>
> I'm trying to calculate the current yield for MSFT using the most recent dividend and daily closing price of MSFT. I've tried a couple of approaches that don't work, any suggestions would be appreciated.


From rahluwalia at gmail.com  Mon Oct 15 13:53:06 2012
From: rahluwalia at gmail.com (Ram Ahluwalia)
Date: Mon, 15 Oct 2012 07:53:06 -0400
Subject: [R-SIG-Finance] R-SIG-Finance Digest, Vol 101, Issue 14
In-Reply-To: <mailman.1.1350295202.9286.r-sig-finance@r-project.org>
References: <mailman.1.1350295202.9286.r-sig-finance@r-project.org>
Message-ID: <CAPwnOYYcM-8jh4QFcuqxp2hABBcZ6EE=_R7pnBj1LVZitCt1qA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121015/983673b7/attachment.pl>

From josh.m.ulrich at gmail.com  Mon Oct 15 16:05:12 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 15 Oct 2012 09:05:12 -0500
Subject: [R-SIG-Finance] R-SIG-Finance Digest, Vol 101, Issue 14
In-Reply-To: <CAPwnOYYcM-8jh4QFcuqxp2hABBcZ6EE=_R7pnBj1LVZitCt1qA@mail.gmail.com>
References: <mailman.1.1350295202.9286.r-sig-finance@r-project.org>
	<CAPwnOYYcM-8jh4QFcuqxp2hABBcZ6EE=_R7pnBj1LVZitCt1qA@mail.gmail.com>
Message-ID: <CAPPM_gQp+pFn58WcLsD9H+5CTHuUGTMR7=h=D63m9dJSncVOsw@mail.gmail.com>

At the very top of the email you just replied to, it says:
> To subscribe or unsubscribe via the World Wide Web, visit
>         https://stat.ethz.ch/mailman/listinfo/r-sig-finance
--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


On Mon, Oct 15, 2012 at 6:53 AM, Ram Ahluwalia <rahluwalia at gmail.com> wrote:
> unsubscribe
>
> On Mon, Oct 15, 2012 at 6:00 AM, <r-sig-finance-request at r-project.org>wrote:
>
>> Send R-SIG-Finance mailing list submissions to
>>         r-sig-finance at r-project.org
>>
>> To subscribe or unsubscribe via the World Wide Web, visit
>>         https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> or, via email, send a message with subject or body 'help' to
>>         r-sig-finance-request at r-project.org
>>
>> You can reach the person managing the list at
>>         r-sig-finance-owner at r-project.org
>>
>> When replying, please edit your Subject line so it is more specific
>> than "Re: Contents of R-SIG-Finance digest..."
>>
>>
>> Today's Topics:
>>
>>    1. Re: Daily dividend yield (G See)
>>
>>
>> ----------------------------------------------------------------------
>>
>> Message: 1
>> Date: Sun, 14 Oct 2012 21:39:26 -0500
>> From: G See <gsee000 at gmail.com>
>> To: FJ M <chicagobrownblue at hotmail.com>
>> Cc: r-sig <r-sig-finance at r-project.org>
>> Subject: Re: [R-SIG-Finance] Daily dividend yield
>> Message-ID:
>>         <CA+xi=
>> qY0nUi_A8gOdGQv4MJXRuKBqdhaGL8bqSNTJUaPQsixYg at mail.gmail.com>
>> Content-Type: text/plain; charset=ISO-8859-1
>>
>> Hi Frank,
>>
>> > 1) I have downloaded both the dividends and the OHLCVAdjC data
>> successfully. When I merge the data with fill=0.0 and export the merged
>> data with write.csv, the date is replaced with the index from 1 to 52,
>> first few lines:
>>
>> I suggest using write.zoo().  But, you can also consult ?write.table
>> and the R Data Import/Export manual
>> (http://cran.r-project.org/doc/manuals/R-data.html)
>>
>> > 2) Divs contains the dividend date and the 1 dividend 0.20. Stock
>> contains theOHLVAdjC data for Microsoft. I can print the dates using
>> Divs[1,0] and Stock[1,0] but a comparison of those dates always results in
>> an error:
>>
>> What looks like Dates to you is actually a zero-width xts object.
>>
>> This is the line that's giving you trouble
>>
>>     if ((Stock[i,0]) == (Divs[j,0]))  Current_Div <- Divs[j,1]
>>
>> If you are trying to compare indexes, maybe something along these
>> lines would work better.
>>
>>     index(Stock[i]) == index(Divs[j])
>>
>> #----
>> > if (Stock[i, 0] == Divs[1, 0]) print("equal")
>> Error in if (Stock[i, 0] == Divs[1, 0]) print("equal") :
>>   argument is of length zero
>> > Divs[1, 0]
>>
>> 2012-08-14
>> > length(Divs[1, 0])
>> [1] 0
>> > index(Divs[1])
>> [1] "2012-08-14"
>> > if (index(Stock[i]) == index(Divs[1])) print("equal") # no error
>> #----
>>
>> That said, I'm fairly confident that you should not use a (double) for
>> loop for this.  I can't quite tell from your code what you're trying
>> to do, but if you provide your desired output, I'm sure we can come up
>> with a vectorized solution.
>>
>> For example, if you want to multiply the last quarterly dividend
>> amount by 4 and use that value every day until the next dividend, you
>> can do the following:
>>
>>     # Setup based on original question
>>     Divs_Per_Year<-4
>>     startDate=as.Date("2012-05-01")
>>     endDate=as.Date("2012-10-13")
>>     Divs<-getDividends(ticker, from = startDate, to = endDate)
>>     Stock <- getSymbols(ticker, from=startDate, to=endDate, src='yahoo',
>>                                    auto.assign=FALSE)
>>     # End setup
>>
>>     na.locf(merge(Stock, Divs * Divs_Per_Year, retside=c(FALSE, TRUE)))
>>
>> Or, if you want to do basically the same thing, but divide the current
>> estimate for the annual dividend amount by the most recent price in
>> order to calculate the current yield, you can do this:
>>
>>     with(na.locf(merge(Stock, AnnDiv=Divs * Divs_Per_Year)), AnnDiv /
>> MSFT.Adjusted)
>>
>> HTH,
>> Garrett
>>
>> On Sat, Oct 13, 2012 at 10:29 PM, FJ M <chicagobrownblue at hotmail.com>
>> wrote:
>> >
>> > I'm trying to calculate the current yield for MSFT using the most recent
>> dividend and daily closing price of MSFT. I've tried a couple of approaches
>> that don't work, any suggestions would be appreciated.
>>
>>
>>
>> ------------------------------
>>
>> _______________________________________________
>> R-SIG-Finance mailing list
>> R-SIG-Finance at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>
>>
>> End of R-SIG-Finance Digest, Vol 101, Issue 14
>> **********************************************
>>
>
>
>
> --
> Ram Ahluwalia
> 917.363.3747
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From chicagobrownblue at hotmail.com  Mon Oct 15 19:48:19 2012
From: chicagobrownblue at hotmail.com (FJ M)
Date: Mon, 15 Oct 2012 17:48:19 +0000
Subject: [R-SIG-Finance] Daily dividend yield
In-Reply-To: <CA+xi=qY0nUi_A8gOdGQv4MJXRuKBqdhaGL8bqSNTJUaPQsixYg@mail.gmail.com>
References: <BLU161-W52A48352F141F265C7AAE8DF720@phx.gbl>,
	<CA+xi=qY0nUi_A8gOdGQv4MJXRuKBqdhaGL8bqSNTJUaPQsixYg@mail.gmail.com>
Message-ID: <BLU161-W65DAA9E9446D68EA82CCDEDF710@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121015/b73f5b82/attachment.pl>

From caprarn9 at cs.man.ac.uk  Mon Oct 15 22:30:50 2012
From: caprarn9 at cs.man.ac.uk (Nicolae Caprarescu)
Date: Mon, 15 Oct 2012 21:30:50 +0100
Subject: [R-SIG-Finance] [R] RTAQ - convert function: warning causes
 incorrect loading of data
In-Reply-To: <3C52CE1C-1013-4534-966B-D1CA0ADD6213@gmail.com>
References: <1350064873691-4646025.post@n4.nabble.com>
	<CAAmySGMU4cgTLCTrC+8tH1WBRCSsLcDxgVGScbFZi0CUtLozLA@mail.gmail.com>
	<889e7c0ae479d2759dad92ba4455b150@cs.man.ac.uk>
	<3C52CE1C-1013-4534-966B-D1CA0ADD6213@gmail.com>
Message-ID: <bdddd6bdf4d84240a0e5f42231d61b68@cs.man.ac.uk>

Hello,

Thanks for looking into it. What process do people usually follow to fix
bugs in RTAQ? I took me a while to realise what's wrong with it, therefore
it would be great if we can address it so others won't have to encounter
it.

Best,
Nicolae

On Sat, 13 Oct 2012 12:33:01 -0500, Jeff Ryan <jeff.a.ryan at gmail.com>
wrote:
> FWIW %m is the proper conversion for months. %M is minutes. 
> 
> Looks like a bug. 
> 
> Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com
> 
> www.lemnica.com
> 
> On Oct 13, 2012, at 10:33 AM, Nicolae Caprarescu <caprarn9 at cs.man.ac.uk>
> wrote:
> 
>> Hi Michael,
>> 
>> Thank you for pointing me in the right direction, I'm now using an
email
>> client rather than Nabble.
>> 
>> Related to the issue I described below, it's resolved now, I have
managed
>> to fix it myself. However, I believe this might be a bug, or at least
>> something that needs improving; I have described both how to reproduce
>> this
>> issue and its solution in the below 4 steps:
>> 1) library(RTAQ)
>> 2) Create XXX_trades.csv file with the contents below using a relative
>> path like [somewhere]/TAQData/2010-11-01/XXX_trades.csv
>> SYMBOL,DATE,TIME,PRICE,SIZE,G127,CORR,COND,EX
>> XXX,20101101,10:30:00,11.49,500,0,0,@,B
>> XXX,20101101,10:30:02,11.49,322,0,0,0,B
>> XXX,20101101,10:30:02,11.49,178,0,0,@,B
>> XXX,20101101,10:30:03,11.49,500,0,0,@,B
>> XXX,20101101,10:30:03,11.49,187,0,0,@,D
>> 3) 
>> #convert does not generate any errors/warnings, however it does not
work
>> properly
>> convert(from="2010-11-01",
>> to="2010-11-01",datasource="[somewhere]/TAQData/",
>>
datadestination="[somewhere]/TAQDataRData/",trades=T,quotes=F,ticker="XXX",dir=T,
>> extention="csv", header=T, tradecolnames=c("SYMBOL", "DATE", "TIME",
>> "PRICE", "SIZE", "G127", "CORR", "COND", "EX"))
>> #loading the RData created by convert
>>
TAQLoad("XXX",from="2010-11-01",to="2010-11-01",datasource="[somewhere]TAQDataRData/",
>> trades=T,quotes=F)
>> #output of TAQLoad 
>>     SYMBOL EX  PRICE   SIZE  COND CORR G127
>> <NA> "XXX"  "B" "11.49" "500" "@"  "0"  "0" 
>> <NA> "XXX"  "B" "11.49" "322" "0"  "0"  "0" 
>> <NA> "XXX"  "B" "11.49" "178" "@"  "0"  "0" 
>> <NA> "XXX"  "B" "11.49" "500" "@"  "0"  "0" 
>> <NA> "XXX"  "D" "11.49" "187" "@"  "0"  "0" 
>> Warning message:
>> timezone of object (GMT) is different than current timezone (). 
>> 
>> Problem are the <NA>s. If one does not supply the format of date and
time
>> to the convert function, it is assumed that the standard NYSE format is
>> used, and therefore RTAQ internally (convert_to_RData.r line 32)
>> represents
>> this as "Y%M%D %H:%M:%S". Whilst this works fine for some things, when
a
>> timeDate is initialised using this format (convert_to_RData.r line
102),
>> it
>> does not work. timeDate expects a correct format like "%Y%m%d %H:%M:%S"
>> format rather than "Y%M%D %H:%M:%S".
>> Run the below two to confirm: 
>> tdobject=timeDate:::timeDate(paste(as.vector("2010-10-11"),
>> as.vector("10:30:30")), format="%Y%M%D
>> %H:%M:%S",FinCenter="GMT",zone="GMT")
>> #tdobject is GMT [1] [NA]
>> tdobject=timeDate:::timeDate(paste(as.vector("20101011"),
>> as.vector("10:30:30")), format="%Y%m%d
>> %H:%M:%S",FinCenter="GMT",zone="GMT")
>> #tdobject is now GMT [1] [2010-10-11 10:30:30]
>> 
>> Therefore, if one explicitly includes format="%Y%m%d %H:%M:%S" in the
>> convert function, everything works fine and the <NA> problem above is
>> solved; this is my solution. Can I please suggest that, once you
>> investigate this and provided that you confirm my understanding,
>> convert_to_RData.r is changed in order to use "%Y%m%d %H:%M:%S" as the
>> default format? 
>> 
>> 4) My environment:
>> R version 2.15.1 (2012-06-22)
>> Platform: i686-pc-linux-gnu (32-bit)
>> 
>> locale:
>> [1] LC_CTYPE=en_GB       LC_NUMERIC=C         LC_TIME=en_GB       
>> [4] LC_COLLATE=C         LC_MONETARY=en_GB    LC_MESSAGES=en_GB   
>> [7] LC_PAPER=C           LC_NAME=C            LC_ADDRESS=C        
>> [10] LC_TELEPHONE=C       LC_MEASUREMENT=en_GB LC_IDENTIFICATION=C 
>> 
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base   

>> 
>> other attached packages:
>> [1] RTAQ_0.2         timeDate_2160.97 xts_0.8-6        zoo_1.7-8       
>> 
>> loaded via a namespace (and not attached):
>> [1] grid_2.15.1    lattice_0.20-6
>> 
>> 
>> Best wishes,
>> Nicolae
>> 
>> 
>> 
>> On Fri, 12 Oct 2012 21:52:22 +0100, "R. Michael Weylandt"
>> <michael.weylandt at gmail.com> wrote:
>>> I'm forwarding this to the R-SIG-Finance list, where ou'll have a more
>>> specialized audience.
>>> 
>>> In the meanwhile, you may wish to look at
>>> 
>>
http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example
>>> 
>>> Finally, I note you're posting from Nabble. Please do include context
in
>>> your reply -- I don't believe Nabble does this automatically, so
>>> you'll need to manually include it. Most of the regular respondents on
>>> these lists don't use Nabble -- it is a _mailing list_ after all -- so
>>> we don't get the forum view you do, only emails of the individual
>>> posts. Combine that with the high volume of posts, and it's quite
>>> difficult to trace a discussion if we all don't make sure to include
>>> context.
>>> 
>>> Cheers,
>>> Michael
>>> 
>>> On Fri, Oct 12, 2012 at 7:01 PM, caprarn9 <caprarn9 at cs.man.ac.uk>
wrote:
>>>> Hello,
>>>> 
>>>> I am closely following the RTAQ documentation in order to load my
>> dataset
>>>> into R, however I get this warning when running the convert function
in
>>>> the
>>>> following way:
>>>> 
>>>> convert(from="2010-11-01", to="2010-11-01",datasource=datasource,
>>>> datadestination=datadestination,trades=T,quotes=T,ticker="BAC",dir=T,
>>>> extention="csv", header=T, tradecolnames=c("SYMBOL", "DATE", "TIME",
>>>> "PRICE", "SIZE", "G127", "CORR", "COND", "EX"),
>> quotecolnames=c("SYMBOL",
>>>> "DATE", "TIME", "BID", "OFR", "BIDSIZ", "OFRSIZ", "MODE", "EX"))
>>>> 
>>>> The only warning returned is:
>>>> In `[<-.factor`(`*tmp*`, is.na(tdata$G127), value = c(1L, 1L, 1L,  :
>>>>  invalid factor level, NAs generated
>>>> 
>>>> As it is a warning, the .RData files still get created and I can use
>>>> TAQLoad
>>>> to load them:
>>>> 
>>>> x <-
>>>> 
>>
TAQLoad("BAC",from="2010-11-01",to="2010-11-01",datasource=datadestination,
>>>> trades=T,quotes=T)
>>>> 
>>>> The PROBLEM:
>>>> head(x)
>>>>     SYMBOL EX  PRICE     SIZE    COND CORR G127
>>>> <NA> "BAC"  "B" "11.4900" "  500" "@"  "0"  "0"
>>>> ...
>>>> 
>>>> This is the same for the quotes objects, but different headers
>>>> obviously. I
>>>> get a <NA> instead of the expected YYY-MM-DD HH:MM:SS format for each
>>>> observation.
>>>> 
>>>> I've spent a fair number of hours on trying to get this right, no
>>>> success.
>>>> Can you please provide me with some guidance?
>>>> 
>>>> Thank you.
>>>> 
>>>> A sample from the CSV files I use:
>>>> 
>>>> SYMBOL,DATE,TIME,BID,OFR,BIDSIZ,OFRSIZ,MODE,EX
>>>> BAC,20101101,9:30:00,11.5,11.51,5,116,12,P
>>>> ...
>>>> 
>>>> SYMBOL,DATE,TIME,PRICE,SIZE,G127,CORR,COND,EX
>>>> BAC,20101101,10:30:00,11.49,500,0,0,@,B
>>>> ...
>>>> 
>>>> 
>>>> 
>>>> 
>>>> --
>>>> View this message in context:
>>>> 
>>
http://r.789695.n4.nabble.com/RTAQ-convert-function-warning-causes-incorrect-loading-of-data-tp4646025.html
>>>> Sent from the R help mailing list archive at Nabble.com.
>>>> 
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.


From chicagobrownblue at hotmail.com  Wed Oct 17 19:12:45 2012
From: chicagobrownblue at hotmail.com (FJ M)
Date: Wed, 17 Oct 2012 17:12:45 +0000
Subject: [R-SIG-Finance] Recursively retrieve Date OHLC Adj Close and
 dividends, adjust some dividends, then calculate current yield two problems
Message-ID: <BLU161-W13A4D6EF7A562C75B46C32DF770@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121017/2f02208a/attachment.pl>

From josh.m.ulrich at gmail.com  Wed Oct 17 19:20:49 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Wed, 17 Oct 2012 12:20:49 -0500
Subject: [R-SIG-Finance] Recursively retrieve Date OHLC Adj Close and
 dividends, adjust some dividends, then calculate current yield two problems
In-Reply-To: <BLU161-W13A4D6EF7A562C75B46C32DF770@phx.gbl>
References: <BLU161-W13A4D6EF7A562C75B46C32DF770@phx.gbl>
Message-ID: <CAPPM_gQjHvn6rddqjVidyUPHTUuNDPeZme2tJ55r19Np28dDpw@mail.gmail.com>

As it says in the posting guide and the general instructions to the
mailing lists, please don't send HTML mail.
http://www.r-project.org/posting-guide.html
http://www.r-project.org/mail.html#instructions

The mess below was produced in an attempt to "un-HTML" your email.
People are unlikely to spend time cleaning up your prose and code in
order to help.

Best,
--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


On Wed, Oct 17, 2012 at 12:12 PM, FJ M <chicagobrownblue at hotmail.com> wrote:
>
>
>
>
> I successfully retrieve Date OHLCAdjC and dividends for two stocks, code at the end.  1) I am unable to replace the MSFT $3.08 dividend with $0.08 (the ongoing dividend without the $3 special dividend) using: if (ticker[i]=="MSFT") {print(Divs[4]); Divs[4] <= 0.08; print(Divs[4])} ## $3 special dividend, $0.08 regular dividend           [,1]
> 2004-11-15 3.08
>            [,1]
> 2004-11-15 3.08 2) I am only able to calculate the current yield for the first ticker using explicity MSFT.Close which works, but when I load data for the next symbol, KMI, MSFT.Close does not exist. How do I refer to the properly refer to the close when looping through multiple symbols? Current_Yield<-with(na.locf(merge(Stock, Annual_Div=Divs * Divs_Per_Year)), Annual_Div / MSFT.Close) Thanks, FrankChicago library(quantmod)##
> ## Merge Date OHLC with dividend on ex-dividend date
> ##
> ticker<-c("MSFT","KMI")
> Divs_Per_Year<-4for (i in 1:2)
> {
> file_name<- paste0(ticker[i],"_Divs.csv")
> Divs<-getDividends(ticker[i])
> print(Divs)
> Stock<-getSymbols.yahoo(ticker[i], from = start(Divs), src = "yahoo", verbose=TRUE, auto.assign=FALSE)
> Stock_Divs<-merge(Stock,Divs,fill=0.0)
> write.zoo(Stock_Divs, file = file_name, append = FALSE, quote = TRUE, sep = ",")##
> ## Calcuate current annual dividend and write it out for each date to a file
> ##if (ticker[i]=="MSFT") {print(Divs[4]); Divs[4] <= 0.08; print(Divs[4])} ## $3 special dividend, $0.08 regular dividend
> if (ticker[i]=="KMI")  {print(Divs[1]); Divs[1] <= 0.29; print(Divs[1])} ## First dividend was 0.14 but based on a full quarter payout of 0.29
> file_name<- paste0(ticker[i],"_Annual_Divs.csv")
> print(file_name)
> print(Divs)
> Annual_Div<-Divs * Divs_Per_Year
> Stock_Annual_Dividend<-na.locf(merge(Stock, Annual_Div, retside=c(TRUE, TRUE)))
> write.zoo(Stock_Annual_Dividend, file = file_name, append = FALSE, quote = TRUE, sep = ",")
> ##
> ## Calcuate current annual dividend yield for each date and write it out to a file
> ##file_name<- paste0(ticker[i],"_Current_Yield.csv")
> print(file_name)
> Current_Yield<-with(na.locf(merge(Stock, Annual_Div=Divs * Divs_Per_Year)), Annual_Div / MSFT.Close)
> Stock_Current_Yield<-na.locf((merge(Stock_Annual_Dividend, Current_Yield, retside=c(TRUE, TRUE))))
> write.zoo(Stock_Current_Yield, file = file_name, append = FALSE, quote = TRUE, sep = ",")
> }quit()
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From zhangchao at gmail.com  Thu Oct 18 16:10:54 2012
From: zhangchao at gmail.com (Chao Zhang)
Date: Thu, 18 Oct 2012 10:10:54 -0400
Subject: [R-SIG-Finance] Mystery In Creating data.frame w timeDate
Message-ID: <CAL4MF2j-hP_sZWsxVycKohhzQ7V5Uj8S1QqC4Zwb2ef7C_7J+Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121018/cda0bb5f/attachment.pl>

From drie at portfoliointelligence.com  Thu Oct 18 21:59:40 2012
From: drie at portfoliointelligence.com (Dan Rie)
Date: Thu, 18 Oct 2012 15:59:40 -0400
Subject: [R-SIG-Finance] beyond GPU support, 16+ cores, low power consumption,
	under $100  (64 cores for $200)?
Message-ID: <assp.8638c3c689.C8ECFF0D08DC4808B186B9CD42A9782B@MightyMini>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121018/16d919ab/attachment.pl>

From daniel.cegielka at gmail.com  Fri Oct 19 11:20:30 2012
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Fri, 19 Oct 2012 11:20:30 +0200
Subject: [R-SIG-Finance] beyond GPU support, 16+ cores,
 low power consumption, under $100 (64 cores for $200)?
In-Reply-To: <assp.8638c3c689.C8ECFF0D08DC4808B186B9CD42A9782B@MightyMini>
References: <assp.8638c3c689.C8ECFF0D08DC4808B186B9CD42A9782B@MightyMini>
Message-ID: <CAPLrYET5spjWe-KLu+5e4AvioJPLg1NJvYbk_d=FOEDNVEEBxg@mail.gmail.com>

2012/10/18 Dan Rie <drie at portfoliointelligence.com>:
> This may not be DIRECTLY relevant to r-sig-finance, but I'm sure that it's of interest to some of us.

Hi Dan,
I heard about this project before and I'm sure that it great platform
for R and finance. See, for example, Redline InRush Accelerated Ticker
Plant:

http://www.redlinetrading.com/products/ticker_plant/

this is the Cell processor specializing in parallel processing of
market data. Parallella also can be used in such an applications etc.

Put this information on Linkedin's finance groups. I hope that this
project will succeed.

Best regards,
Daniel


From jaimie.villanueva at gmail.com  Sat Oct 20 17:04:37 2012
From: jaimie.villanueva at gmail.com (jaimie villanueva)
Date: Sat, 20 Oct 2012 17:04:37 +0200
Subject: [R-SIG-Finance] A good backtesting package ??
Message-ID: <CAEXmNQAo5CKocGUh7CEUnDiUyxAymxnaYSbpF34p4jJT_4ZtOA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121020/b1aa3282/attachment.pl>

From n-e-w at qtradr.net  Sat Oct 20 18:51:52 2012
From: n-e-w at qtradr.net (Nick White)
Date: Sat, 20 Oct 2012 12:51:52 -0400
Subject: [R-SIG-Finance] A good backtesting package ??
In-Reply-To: <CAEXmNQAo5CKocGUh7CEUnDiUyxAymxnaYSbpF34p4jJT_4ZtOA@mail.gmail.com>
References: <CAEXmNQAo5CKocGUh7CEUnDiUyxAymxnaYSbpF34p4jJT_4ZtOA@mail.gmail.com>
Message-ID: <5761538035782626560@unknownmsgid>

A degree in computational statistics should be a helpful start.

On Oct 20, 2012, at 11:06, jaimie villanueva
<jaimie.villanueva at gmail.com> wrote:

> Hi R users
>
> I'm running simulations of an index's returns (lets say S&P 500) and I
> wonder of how good are the simulations.
> I thought that a good way to check It is performing a backtesting but I'm
> a begginer in this issue so I don't know how to do it?
>
> Could anyone recommend me a good backtesting function (or package) ??
>
> Thanks in advanced.
>
> Jaimie
>
>    [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From michael.weylandt at gmail.com  Sat Oct 20 19:01:53 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Sat, 20 Oct 2012 18:01:53 +0100
Subject: [R-SIG-Finance] A good backtesting package ??
In-Reply-To: <CAEXmNQAo5CKocGUh7CEUnDiUyxAymxnaYSbpF34p4jJT_4ZtOA@mail.gmail.com>
References: <CAEXmNQAo5CKocGUh7CEUnDiUyxAymxnaYSbpF34p4jJT_4ZtOA@mail.gmail.com>
Message-ID: <CAAmySGPov8-p8v89U-1McWzMebpWg+MYmFsC=+HhgU4w5wi1Yg@mail.gmail.com>

On Sat, Oct 20, 2012 at 4:04 PM, jaimie villanueva
<jaimie.villanueva at gmail.com> wrote:
>
> Could anyone recommend me a good backtesting function (or package) ??
>

Google around for quanstrat

RMW


From dewinn at gmail.com  Sun Oct 21 20:22:06 2012
From: dewinn at gmail.com (David Winn)
Date: Sun, 21 Oct 2012 19:22:06 +0100
Subject: [R-SIG-Finance] Quantstrat creating signals on two or more
	conditions
Message-ID: <CAPWqPChr9=aqD5zCO=EWiozjBAK3sAArqTgTNCdBXhY28=p8+Q@mail.gmail.com>

Dear all,

I'm fairly new to quantstrat but I have been playing around with it
and I think I am starting to get a feel for how to use it.

I have what I thought was a seemingly trivial issue, but can't find
anyone else with the same problem. My question is:

How do you have a signal based on two or more conditions e.g. buy if
MA50 > MA200 AND price hasn't changed by more than 10%, for example?

Is this an obvious thing to achieve and I've missed it entirely?

Thanks and best wishes,

David


From gunjan_narulkar at yahoo.com  Sun Oct 21 20:26:22 2012
From: gunjan_narulkar at yahoo.com (gunjan narulkar)
Date: Sun, 21 Oct 2012 11:26:22 -0700 (PDT)
Subject: [R-SIG-Finance] Regarding availability of TTR/Quantmod etc for
	RV2.15.1
Message-ID: <1350843982.89876.YahooMailNeo@web162401.mail.bf1.yahoo.com>

Hello,

I'm new to both - R as well as it's usage in trading - and I'm trying me best to learn things myself. So kindly excuse me if my question is very basic. I've installed R V2.15.1 and been trying to install TTR/Quantmod packages on my machine using the usual install.packages command, but I keep getting that these packages are not available in CRAN (which indeed is that case as I could not found them listed on the webpage.). So any idea when would they be available? Also, is the only work-around is to do away with RV2.15.1 and go for some older version or there are any other ways to go about it?

I'm desperate to start my practice using above packages, so please suggest me the alternatives.

Thanks & Regards,
Gunjan Narulkar,
Student,
Indian Institute of Science
LinkedIn: in.linkedin.com/pub/gunjan-narulkar/19/a3b/521


From maximeabonnements at gmail.com  Sun Oct 21 20:54:26 2012
From: maximeabonnements at gmail.com (Maxime Maxime)
Date: Sun, 21 Oct 2012 14:54:26 -0400
Subject: [R-SIG-Finance] Breadth Indicators
Message-ID: <CADz3f_DszBPqY+rUJuoA+XGfwDc7G9aU76h+czetGR5stWsMeA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121021/2f63aa80/attachment.pl>

From nk at fennoturvapalvelut.com  Sun Oct 21 21:01:46 2012
From: nk at fennoturvapalvelut.com (Niklas K)
Date: Sun, 21 Oct 2012 22:01:46 +0300
Subject: [R-SIG-Finance] Quantstrat creating signals on two or more
	conditions
In-Reply-To: <CAPWqPChr9=aqD5zCO=EWiozjBAK3sAArqTgTNCdBXhY28=p8+Q@mail.gmail.com>
References: <CAPWqPChr9=aqD5zCO=EWiozjBAK3sAArqTgTNCdBXhY28=p8+Q@mail.gmail.com>
Message-ID: <5084469A.1070105@fennoturvapalvelut.com>

Hi!

For this you can use the signal function sigFormula or have a custom 
signal function.

BR,
Niklas

On 21.10.2012 21:22, David Winn wrote:
> Dear all,
>
> I'm fairly new to quantstrat but I have been playing around with it
> and I think I am starting to get a feel for how to use it.
>
> I have what I thought was a seemingly trivial issue, but can't find
> anyone else with the same problem. My question is:
>
> How do you have a signal based on two or more conditions e.g. buy if
> MA50 > MA200 AND price hasn't changed by more than 10%, for example?
>
> Is this an obvious thing to achieve and I've missed it entirely?
>
> Thanks and best wishes,
>
> David
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From jeff.a.ryan at gmail.com  Sun Oct 21 21:25:04 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Sun, 21 Oct 2012 12:25:04 -0700
Subject: [R-SIG-Finance] Regarding availability of TTR/Quantmod etc for
	RV2.15.1
In-Reply-To: <1350843982.89876.YahooMailNeo@web162401.mail.bf1.yahoo.com>
References: <1350843982.89876.YahooMailNeo@web162401.mail.bf1.yahoo.com>
Message-ID: <472093C6-0E29-44F1-9781-B327F119C68F@gmail.com>

They are on CRAN

http://cran.r-project.org/web/packages/quantmod/index.html

Please provide exact errors you are encountering as well as sessionInfo() output. 

Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Oct 21, 2012, at 11:26 AM, gunjan narulkar <gunjan_narulkar at yahoo.com> wrote:

> Hello,
> 
> I'm new to both - R as well as it's usage in trading - and I'm trying me best to learn things myself. So kindly excuse me if my question is very basic. I've installed R V2.15.1 and been trying to install TTR/Quantmod packages on my machine using the usual install.packages command, but I keep getting that these packages are not available in CRAN (which indeed is that case as I could not found them listed on the webpage.). So any idea when would they be available? Also, is the only work-around is to do away with RV2.15.1 and go for some older version or there are any other ways to go about it?
> 
> I'm desperate to start my practice using above packages, so please suggest me the alternatives.
> 
> Thanks & Regards,
> Gunjan Narulkar,
> Student,
> Indian Institute of Science
> LinkedIn: in.linkedin.com/pub/gunjan-narulkar/19/a3b/521
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gunjan_narulkar at yahoo.com  Mon Oct 22 10:46:36 2012
From: gunjan_narulkar at yahoo.com (gunjan narulkar)
Date: Mon, 22 Oct 2012 01:46:36 -0700 (PDT)
Subject: [R-SIG-Finance] Regarding availability of TTR/Quantmod etc for
	RV2.15.1
In-Reply-To: <472093C6-0E29-44F1-9781-B327F119C68F@gmail.com>
References: <1350843982.89876.YahooMailNeo@web162401.mail.bf1.yahoo.com>
	<472093C6-0E29-44F1-9781-B327F119C68F@gmail.com>
Message-ID: <1350895596.91096.YahooMailNeo@web162406.mail.bf1.yahoo.com>

My apologies. I should have given that information to start with. 

Command used: install.packages("quantmod")

Error: package ?quantmod? is not available (for R version 2.15.1) 

sessionInfo() output:
R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_India.1252? LC_CTYPE=English_India.1252?? 
[3] LC_MONETARY=English_India.1252 LC_NUMERIC=C????????????????? 
[5] LC_TIME=English_India.1252??? 

attached base packages:
[1] stats???? graphics? grDevices utils???? datasets? methods?? base???? 

loaded via a namespace (and not attached):
[1] tools_2.15.1


Please let me know if there is any other detail that I've left out.


Thanks a lot,

Regards,
Gunjan



----- Original Message -----
From: Jeff Ryan <jeff.a.ryan at gmail.com>
To: gunjan narulkar <gunjan_narulkar at yahoo.com>
Cc: R-SIG-Finance <R-SIG-Finance at r-project.org>
Sent: Monday, October 22, 2012 12:55 AM
Subject: Re: [R-SIG-Finance] Regarding availability of TTR/Quantmod etc for RV2.15.1

They are on CRAN

http://cran.r-project.org/web/packages/quantmod/index.html

Please provide exact errors you are encountering as well as sessionInfo() output. 

Jeff

Jeffrey Ryan? ? |? ? Founder? ? |? ? jeffrey.ryan at lemnica.com

www.lemnica.com

On Oct 21, 2012, at 11:26 AM, gunjan narulkar <gunjan_narulkar at yahoo.com> wrote:

> Hello,
> 
> I'm new to both - R as well as it's usage in trading - and I'm trying me best to learn things myself. So kindly excuse me if my question is very basic. I've installed R V2.15.1 and been trying to install TTR/Quantmod packages on my machine using the usual install.packages command, but I keep getting that these packages are not available in CRAN (which indeed is that case as I could not found them listed on the webpage.). So any idea when would they be available? Also, is the only work-around is to do away with RV2.15.1 and go for some older version or there are any other ways to go about it?
> 
> I'm desperate to start my practice using above packages, so please suggest me the alternatives.
> 
> Thanks & Regards,
> Gunjan Narulkar,
> Student,
> Indian Institute of Science
> LinkedIn: in.linkedin.com/pub/gunjan-narulkar/19/a3b/521
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



From josh.m.ulrich at gmail.com  Mon Oct 22 13:21:38 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 22 Oct 2012 06:21:38 -0500
Subject: [R-SIG-Finance] Regarding availability of TTR/Quantmod etc for
	RV2.15.1
In-Reply-To: <1350895596.91096.YahooMailNeo@web162406.mail.bf1.yahoo.com>
References: <1350843982.89876.YahooMailNeo@web162401.mail.bf1.yahoo.com>
	<472093C6-0E29-44F1-9781-B327F119C68F@gmail.com>
	<1350895596.91096.YahooMailNeo@web162406.mail.bf1.yahoo.com>
Message-ID: <CAPPM_gRGpL0JrA-gnKa2wTEAbqeuVt=dn-KC6AHzOVbnGfdH=Q@mail.gmail.com>

On Mon, Oct 22, 2012 at 3:46 AM, gunjan narulkar
<gunjan_narulkar at yahoo.com> wrote:
> My apologies. I should have given that information to start with.
>
> Command used: install.packages("quantmod")
>
> Error: package ?quantmod? is not available (for R version 2.15.1)
>
> sessionInfo() output:
> R version 2.15.1 (2012-06-22)
> Platform: x86_64-pc-mingw32/x64 (64-bit)
>
> locale:
> [1] LC_COLLATE=English_India.1252  LC_CTYPE=English_India.1252
> [3] LC_MONETARY=English_India.1252 LC_NUMERIC=C
> [5] LC_TIME=English_India.1252
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> loaded via a namespace (and not attached):
> [1] tools_2.15.1
>
>
> Please let me know if there is any other detail that I've left out.
>
As Jeff said, quantmod is on CRAN and the Windows binary is available,
so the problem is likely with your local mirror.

>
> Thanks a lot,
>
> Regards,
> Gunjan
>
>
>
> ----- Original Message -----
> From: Jeff Ryan <jeff.a.ryan at gmail.com>
> To: gunjan narulkar <gunjan_narulkar at yahoo.com>
> Cc: R-SIG-Finance <R-SIG-Finance at r-project.org>
> Sent: Monday, October 22, 2012 12:55 AM
> Subject: Re: [R-SIG-Finance] Regarding availability of TTR/Quantmod etc for RV2.15.1
>
> They are on CRAN
>
> http://cran.r-project.org/web/packages/quantmod/index.html
>
> Please provide exact errors you are encountering as well as sessionInfo() output.
>
> Jeff
>
> Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com
>
> www.lemnica.com
>
> On Oct 21, 2012, at 11:26 AM, gunjan narulkar <gunjan_narulkar at yahoo.com> wrote:
>
>> Hello,
>>
>> I'm new to both - R as well as it's usage in trading - and I'm trying me best to learn things myself. So kindly excuse me if my question is very basic. I've installed R V2.15.1 and been trying to install TTR/Quantmod packages on my machine using the usual install.packages command, but I keep getting that these packages are not available in CRAN (which indeed is that case as I could not found them listed on the webpage.). So any idea when would they be available? Also, is the only work-around is to do away with RV2.15.1 and go for some older version or there are any other ways to go about it?
>>
>> I'm desperate to start my practice using above packages, so please suggest me the alternatives.
>>
>> Thanks & Regards,
>> Gunjan Narulkar,
>> Student,
>> Indian Institute of Science
>> LinkedIn: in.linkedin.com/pub/gunjan-narulkar/19/a3b/521
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gunjan_narulkar at yahoo.com  Mon Oct 22 17:46:35 2012
From: gunjan_narulkar at yahoo.com (gunjan narulkar)
Date: Mon, 22 Oct 2012 08:46:35 -0700 (PDT)
Subject: [R-SIG-Finance] Regarding availability of TTR/Quantmod etc for
	RV2.15.1
In-Reply-To: <CAPPM_gRGpL0JrA-gnKa2wTEAbqeuVt=dn-KC6AHzOVbnGfdH=Q@mail.gmail.com>
References: <1350843982.89876.YahooMailNeo@web162401.mail.bf1.yahoo.com>
	<472093C6-0E29-44F1-9781-B327F119C68F@gmail.com>
	<1350895596.91096.YahooMailNeo@web162406.mail.bf1.yahoo.com>
	<CAPPM_gRGpL0JrA-gnKa2wTEAbqeuVt=dn-KC6AHzOVbnGfdH=Q@mail.gmail.com>
Message-ID: <1350920795.43530.YahooMailNeo@web162401.mail.bf1.yahoo.com>

Thanks for the explanation! OK, so probably I can not change that. But then probable workaround might be to start installing all the dependencies manually (by downloading the Window Binaries) and then try again for the main package? Will it work?


Thanks a lot!

Regards,
Gunjan



----- Original Message -----
From: Joshua Ulrich <josh.m.ulrich at gmail.com>
To: gunjan narulkar <gunjan_narulkar at yahoo.com>
Cc: Jeff Ryan <jeff.a.ryan at gmail.com>; R-SIG-Finance <R-SIG-Finance at r-project.org>
Sent: Monday, October 22, 2012 4:51 PM
Subject: Re: [R-SIG-Finance] Regarding availability of TTR/Quantmod etc for RV2.15.1

On Mon, Oct 22, 2012 at 3:46 AM, gunjan narulkar
<gunjan_narulkar at yahoo.com> wrote:
> My apologies. I should have given that information to start with.
>
> Command used: install.packages("quantmod")
>
> Error: package ?quantmod? is not available (for R version 2.15.1)
>
> sessionInfo() output:
> R version 2.15.1 (2012-06-22)
> Platform: x86_64-pc-mingw32/x64 (64-bit)
>
> locale:
> [1] LC_COLLATE=English_India.1252? LC_CTYPE=English_India.1252
> [3] LC_MONETARY=English_India.1252 LC_NUMERIC=C
> [5] LC_TIME=English_India.1252
>
> attached base packages:
> [1] stats? ?  graphics? grDevices utils? ?  datasets? methods?  base
>
> loaded via a namespace (and not attached):
> [1] tools_2.15.1
>
>
> Please let me know if there is any other detail that I've left out.
>
As Jeff said, quantmod is on CRAN and the Windows binary is available,
so the problem is likely with your local mirror.

>
> Thanks a lot,
>
> Regards,
> Gunjan
>
>
>
> ----- Original Message -----
> From: Jeff Ryan <jeff.a.ryan at gmail.com>
> To: gunjan narulkar <gunjan_narulkar at yahoo.com>
> Cc: R-SIG-Finance <R-SIG-Finance at r-project.org>
> Sent: Monday, October 22, 2012 12:55 AM
> Subject: Re: [R-SIG-Finance] Regarding availability of TTR/Quantmod etc for RV2.15.1
>
> They are on CRAN
>
> http://cran.r-project.org/web/packages/quantmod/index.html
>
> Please provide exact errors you are encountering as well as sessionInfo() output.
>
> Jeff
>
> Jeffrey Ryan? ? |? ? Founder? ? |? ? jeffrey.ryan at lemnica.com
>
> www.lemnica.com
>
> On Oct 21, 2012, at 11:26 AM, gunjan narulkar <gunjan_narulkar at yahoo.com> wrote:
>
>> Hello,
>>
>> I'm new to both - R as well as it's usage in trading - and I'm trying me best to learn things myself. So kindly excuse me if my question is very basic. I've installed R V2.15.1 and been trying to install TTR/Quantmod packages on my machine using the usual install.packages command, but I keep getting that these packages are not available in CRAN (which indeed is that case as I could not found them listed on the webpage.). So any idea when would they be available? Also, is the only work-around is to do away with RV2.15.1 and go for some older version or there are any other ways to go about it?
>>
>> I'm desperate to start my practice using above packages, so please suggest me the alternatives.
>>
>> Thanks & Regards,
>> Gunjan Narulkar,
>> Student,
>> Indian Institute of Science
>> LinkedIn: in.linkedin.com/pub/gunjan-narulkar/19/a3b/521
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



From jeff.a.ryan at gmail.com  Mon Oct 22 17:49:15 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Mon, 22 Oct 2012 10:49:15 -0500
Subject: [R-SIG-Finance] Regarding availability of TTR/Quantmod etc for
	RV2.15.1
In-Reply-To: <1350920795.43530.YahooMailNeo@web162401.mail.bf1.yahoo.com>
References: <1350843982.89876.YahooMailNeo@web162401.mail.bf1.yahoo.com>
	<472093C6-0E29-44F1-9781-B327F119C68F@gmail.com>
	<1350895596.91096.YahooMailNeo@web162406.mail.bf1.yahoo.com>
	<CAPPM_gRGpL0JrA-gnKa2wTEAbqeuVt=dn-KC6AHzOVbnGfdH=Q@mail.gmail.com>
	<1350920795.43530.YahooMailNeo@web162401.mail.bf1.yahoo.com>
Message-ID: <CABDUZc8oO0RxCRArp-mQM88Le5XO5M5jAKi7m-O-bnuNhprN5Q@mail.gmail.com>

You can easily change your mirror, see

?utils::chooseCRANmirror

Jeff

On Mon, Oct 22, 2012 at 10:46 AM, gunjan narulkar
<gunjan_narulkar at yahoo.com> wrote:
> Thanks for the explanation! OK, so probably I can not change that. But then probable workaround might be to start installing all the dependencies manually (by downloading the Window Binaries) and then try again for the main package? Will it work?
>
>
> Thanks a lot!
>
> Regards,
> Gunjan
>
>
>
> ----- Original Message -----
> From: Joshua Ulrich <josh.m.ulrich at gmail.com>
> To: gunjan narulkar <gunjan_narulkar at yahoo.com>
> Cc: Jeff Ryan <jeff.a.ryan at gmail.com>; R-SIG-Finance <R-SIG-Finance at r-project.org>
> Sent: Monday, October 22, 2012 4:51 PM
> Subject: Re: [R-SIG-Finance] Regarding availability of TTR/Quantmod etc for RV2.15.1
>
> On Mon, Oct 22, 2012 at 3:46 AM, gunjan narulkar
> <gunjan_narulkar at yahoo.com> wrote:
>> My apologies. I should have given that information to start with.
>>
>> Command used: install.packages("quantmod")
>>
>> Error: package ?quantmod? is not available (for R version 2.15.1)
>>
>> sessionInfo() output:
>> R version 2.15.1 (2012-06-22)
>> Platform: x86_64-pc-mingw32/x64 (64-bit)
>>
>> locale:
>> [1] LC_COLLATE=English_India.1252  LC_CTYPE=English_India.1252
>> [3] LC_MONETARY=English_India.1252 LC_NUMERIC=C
>> [5] LC_TIME=English_India.1252
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>> loaded via a namespace (and not attached):
>> [1] tools_2.15.1
>>
>>
>> Please let me know if there is any other detail that I've left out.
>>
> As Jeff said, quantmod is on CRAN and the Windows binary is available,
> so the problem is likely with your local mirror.
>
>>
>> Thanks a lot,
>>
>> Regards,
>> Gunjan
>>
>>
>>
>> ----- Original Message -----
>> From: Jeff Ryan <jeff.a.ryan at gmail.com>
>> To: gunjan narulkar <gunjan_narulkar at yahoo.com>
>> Cc: R-SIG-Finance <R-SIG-Finance at r-project.org>
>> Sent: Monday, October 22, 2012 12:55 AM
>> Subject: Re: [R-SIG-Finance] Regarding availability of TTR/Quantmod etc for RV2.15.1
>>
>> They are on CRAN
>>
>> http://cran.r-project.org/web/packages/quantmod/index.html
>>
>> Please provide exact errors you are encountering as well as sessionInfo() output.
>>
>> Jeff
>>
>> Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com
>>
>> www.lemnica.com
>>
>> On Oct 21, 2012, at 11:26 AM, gunjan narulkar <gunjan_narulkar at yahoo.com> wrote:
>>
>>> Hello,
>>>
>>> I'm new to both - R as well as it's usage in trading - and I'm trying me best to learn things myself. So kindly excuse me if my question is very basic. I've installed R V2.15.1 and been trying to install TTR/Quantmod packages on my machine using the usual install.packages command, but I keep getting that these packages are not available in CRAN (which indeed is that case as I could not found them listed on the webpage.). So any idea when would they be available? Also, is the only work-around is to do away with RV2.15.1 and go for some older version or there are any other ways to go about it?
>>>
>>> I'm desperate to start my practice using above packages, so please suggest me the alternatives.
>>>
>>> Thanks & Regards,
>>> Gunjan Narulkar,
>>> Student,
>>> Indian Institute of Science
>>> LinkedIn: in.linkedin.com/pub/gunjan-narulkar/19/a3b/521
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com


From ilya.kipnis at gmail.com  Mon Oct 22 21:48:50 2012
From: ilya.kipnis at gmail.com (Ilya Kipnis)
Date: Mon, 22 Oct 2012 15:48:50 -0400
Subject: [R-SIG-Finance] To Dr. Eric Zivot: Coursera servers went down.
Message-ID: <CA+oJuEF-x3vh2aS4-GXKMb=nmgkWe_4T8GybYgC=7wE64cWyCA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121022/7dbb61c3/attachment.pl>

From michael.weylandt at gmail.com  Mon Oct 22 22:13:02 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Mon, 22 Oct 2012 21:13:02 +0100
Subject: [R-SIG-Finance] To Dr. Eric Zivot: Coursera servers went down.
In-Reply-To: <CA+oJuEF-x3vh2aS4-GXKMb=nmgkWe_4T8GybYgC=7wE64cWyCA@mail.gmail.com>
References: <CA+oJuEF-x3vh2aS4-GXKMb=nmgkWe_4T8GybYgC=7wE64cWyCA@mail.gmail.com>
Message-ID: <CAAmySGPxg7g35YjP6eZ83JQ2+DPW=G1HxoJbU6RDVVSMZG4vWQ@mail.gmail.com>

Hi Ilya,

I think this is rather off-topic for this list. While Dr Zivot is an
occasional and valued poster to this forum, this is not his personal
email and you've just spammed a large number of subscribers who have
little to do with Dr Zivot or his teaching. His email is, however,
readily accessible with a simple googling should you need to reach him
again.

Best,
Michael

On Mon, Oct 22, 2012 at 8:48 PM, Ilya Kipnis <ilya.kipnis at gmail.com> wrote:
> Exam deadline may need to be extended.
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From rvince99 at gmail.com  Mon Oct 22 22:43:12 2012
From: rvince99 at gmail.com (Ralph Vince)
Date: Mon, 22 Oct 2012 16:43:12 -0400
Subject: [R-SIG-Finance] Linux Commandline and Packages
Message-ID: <CAAHNhKWcS_pZVGyn0D2PWe-_jZpMgPmMFKtH_C-OWM_=U9kFmQ@mail.gmail.com>

I frequently use RKWard IDE. However, Ive been trying to run a script
from the command line (in either Centos 6, or Ubuntu 10,10). I have
all of my packages installed in ~/R/Packages, and am invoking

~/R/>R CMD BATCH ~/R/Work/myscript.R

and, in doing so, it doesn't seem to find the installed packages ( in
this case, quantmod and plan) as seen in the output:

How do I get the comandline to recognize my installed packages?
Thanks, Ralph VInce

R version 2.11.1 (2010-05-31)
Copyright (C) 2010 The R Foundation for Statistical Computing
ISBN 3-900051-07-0

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

[Previously saved workspace restored]

> require(quantmod)
Loading required package: quantmod
Warning message:
In library(package, lib.loc = lib.loc, character.only = TRUE,
logical.return = TRUE,  :
  there is no package called 'quantmod'
> library(plan)
Error in library(plan) : there is no package called 'plan'
Execution halted


From edd at debian.org  Mon Oct 22 23:06:58 2012
From: edd at debian.org (Dirk Eddelbuettel)
Date: Mon, 22 Oct 2012 16:06:58 -0500
Subject: [R-SIG-Finance] Linux Commandline and Packages
In-Reply-To: <CAAHNhKWcS_pZVGyn0D2PWe-_jZpMgPmMFKtH_C-OWM_=U9kFmQ@mail.gmail.com>
References: <CAAHNhKWcS_pZVGyn0D2PWe-_jZpMgPmMFKtH_C-OWM_=U9kFmQ@mail.gmail.com>
Message-ID: <20613.46450.227694.845330@max.nulle.part>


Ralph,

On 22 October 2012 at 16:43, Ralph Vince wrote:
| I frequently use RKWard IDE. However, Ive been trying to run a script
| from the command line (in either Centos 6, or Ubuntu 10,10). I have
| all of my packages installed in ~/R/Packages, and am invoking
| 
| ~/R/>R CMD BATCH ~/R/Work/myscript.R
| 
| and, in doing so, it doesn't seem to find the installed packages ( in
| this case, quantmod and plan) as seen in the output:
| 
| How do I get the comandline to recognize my installed packages?

One way is to use a file ~/.Rprofile where you can have commands:

   ## add local library path
  .libPaths(c("~/R/Packages", .libPaths()))

which prepends the path to the default settings.

See help(Startup) for more alomgh tjese lines.

| Thanks, Ralph VInce
| 
| R version 2.11.1 (2010-05-31)
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

That is very dated. You may miss a number of recent / relevant packages.

Hth, Dirk

| Copyright (C) 2010 The R Foundation for Statistical Computing
| ISBN 3-900051-07-0
| 
| R is free software and comes with ABSOLUTELY NO WARRANTY.
| You are welcome to redistribute it under certain conditions.
| Type 'license()' or 'licence()' for distribution details.
| 
|   Natural language support but running in an English locale
| 
| R is a collaborative project with many contributors.
| Type 'contributors()' for more information and
| 'citation()' on how to cite R or R packages in publications.
| 
| Type 'demo()' for some demos, 'help()' for on-line help, or
| 'help.start()' for an HTML browser interface to help.
| Type 'q()' to quit R.
| 
| [Previously saved workspace restored]
| 
| > require(quantmod)
| Loading required package: quantmod
| Warning message:
| In library(package, lib.loc = lib.loc, character.only = TRUE,
| logical.return = TRUE,  :
|   there is no package called 'quantmod'
| > library(plan)
| Error in library(plan) : there is no package called 'plan'
| Execution halted
| 
| _______________________________________________
| R-SIG-Finance at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-sig-finance
| -- Subscriber-posting only. If you want to post, subscribe first.
| -- Also note that this is not the r-help list where general R questions should go.

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From research at awabacapital.com  Tue Oct 23 10:13:30 2012
From: research at awabacapital.com (research)
Date: Tue, 23 Oct 2012 09:13:30 +0100
Subject: [R-SIG-Finance] Analyst (Intern) position - R user
Message-ID: <508651AA.80609@awabacapital.com>

We have a newly created analyst role using R.

You will be an experienced R user and thus familiar with its available 
libraries for analysing/modelling different data-types.

Familiarity with LaTeX, Subversion, Emacs or Eclipse an advantage.

Economic and finance knowledge helpful, but academic experience using R 
in other disciplines readily considered.

We emphasise this is an intern position (circa ?30K) lasting 12 months. 
However there is potential to extend this position into a full-time 
quant-strategist role depending upon your performance and management's 
willingness to accept R as a commercially viable alternative to its 
competitors.


From jaimie.villanueva at gmail.com  Tue Oct 23 17:47:50 2012
From: jaimie.villanueva at gmail.com (jaimie villanueva)
Date: Tue, 23 Oct 2012 17:47:50 +0200
Subject: [R-SIG-Finance] Backtesting with ugarchroll( )
Message-ID: <CAEXmNQANH-RF+Ezpwut07bkxM6Bw0oAoQmzN+jDT3onR9N2kCw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121023/7abf81f5/attachment.pl>

From alexios at 4dscape.com  Tue Oct 23 19:42:39 2012
From: alexios at 4dscape.com (Alexios Ghalanos)
Date: Tue, 23 Oct 2012 20:42:39 +0300
Subject: [R-SIG-Finance] Backtesting with ugarchroll( )
In-Reply-To: <CAEXmNQANH-RF+Ezpwut07bkxM6Bw0oAoQmzN+jDT3onR9N2kCw@mail.gmail.com>
References: <CAEXmNQANH-RF+Ezpwut07bkxM6Bw0oAoQmzN+jDT3onR9N2kCw@mail.gmail.com>
Message-ID: <AEC68718-939B-4D08-AE3A-5BB3F7BD9B99@4dscape.com>

Since version 1.0-11, the ugarchroll function only allows a rolling 1 ahead forecast (see Changelog). The alternative had become too complicated to accommodate in this function...you can however wrap your own rolling n-ahead function by combining ugarchfit and ugarchforecast.

-Alexios

Sent from my iPhone

On Oct 23, 2012, at 18:47, jaimie villanueva <jaimie.villanueva at gmail.com> wrote:

> Hi R users,
> 
> I've been trying to perform a backtesting procedure to check the goodness
> of the estimates of a Garch(1,1) model, over a series of daily log returns.
> 
> The Function I've been using is ugarchroll( ) from rugarch package.
> 
> The code is:
> 
> spec = ugarchspec(variance.model = list(model = "sGARCH", garchOrder =
> c(1,1)),mean.model = list(armaOrder = c(0,0), include.mean =
> F),distribution.model = "norm")
> bktest = ugarchroll(spec, data = Ut, n.ahead = 1,forecast.length = 10,
> refit.every = 1, refit.window = "moving",solver = "solnp", calculate.VaR =
> TRUE, VaR.alpha = c(0.005, 0.01, 0.05))
> 
> 
> What I've been trying to run is a moving window backtesting, with 1 day
> ahead forecast, with 10 windows and re-fitting the model every day.
> Up to here, everything is Ok and the results I obtained,  make sense to me.
> But,  what If I would like to check, the goodness of a 1 year (250 days)
> ahead forecast. (all the settings remain equal), instead of a 1 day ahead
> forecast.
> 
> When I run this, I obtained the following Error:
> 
> Done!...all converged.
> Error en `row.names<-.data.frame`(`*tmp*`, value = value) :
>  invalid 'row.names' length
> Adem?s: Mensajes de aviso perdidos
> 1: In doTryCatch(return(expr), name, parentenv, handler) :
>  passing an object of type 'NULL' to .C (arg 8) is deprecated
> 2: In doTryCatch(return(expr), name, parentenv, handler) :
>  passing an object of type 'NULL' to .C (arg 9) is deprecated
> 3: In doTryCatch(return(expr), name, parentenv, handler) :
>  passing an object of type 'NULL' to .C (arg 8) is deprecated
> 4: In doTryCatch(return(expr), name, parentenv, handler) :
>  passing an object of type 'NULL' to .C (arg 9) is deprecated
> 
> 
> What does It really mean. It isn't possible to check the goodness of a 1
> year (250 days) ahead forecast ??
> 
> Any opinion would be greatful.
> 
> Thanks in advanced
> 
> Jaimie
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From ezivot at u.washington.edu  Tue Oct 23 20:19:31 2012
From: ezivot at u.washington.edu (Eric Zivot)
Date: Tue, 23 Oct 2012 11:19:31 -0700
Subject: [R-SIG-Finance] Backtesting with ugarchroll( )
In-Reply-To: <AEC68718-939B-4D08-AE3A-5BB3F7BD9B99@4dscape.com>
References: <CAEXmNQANH-RF+Ezpwut07bkxM6Bw0oAoQmzN+jDT3onR9N2kCw@mail.gmail.com>
	<AEC68718-939B-4D08-AE3A-5BB3F7BD9B99@4dscape.com>
Message-ID: <02a801cdb14a$f23eca70$d6bc5f50$@washington.edu>

I've found this quite easy to do with the zoo function rollapply() (for moving window forecasts) and the PerformanceAnalytics function apply.fromstart() (for recursive - expanding window -  forecasts)

-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Alexios Ghalanos
Sent: Tuesday, October 23, 2012 10:43 AM
To: jaimie villanueva
Cc: R-SIG-Finance
Subject: Re: [R-SIG-Finance] Backtesting with ugarchroll( )

Since version 1.0-11, the ugarchroll function only allows a rolling 1 ahead forecast (see Changelog). The alternative had become too complicated to accommodate in this function...you can however wrap your own rolling n-ahead function by combining ugarchfit and ugarchforecast.

-Alexios

Sent from my iPhone

On Oct 23, 2012, at 18:47, jaimie villanueva <jaimie.villanueva at gmail.com> wrote:

> Hi R users,
> 
> I've been trying to perform a backtesting procedure to check the 
> goodness of the estimates of a Garch(1,1) model, over a series of daily log returns.
> 
> The Function I've been using is ugarchroll( ) from rugarch package.
> 
> The code is:
> 
> spec = ugarchspec(variance.model = list(model = "sGARCH", garchOrder = 
> c(1,1)),mean.model = list(armaOrder = c(0,0), include.mean = 
> F),distribution.model = "norm") bktest = ugarchroll(spec, data = Ut, 
> n.ahead = 1,forecast.length = 10, refit.every = 1, refit.window = 
> "moving",solver = "solnp", calculate.VaR = TRUE, VaR.alpha = c(0.005, 
> 0.01, 0.05))
> 
> 
> What I've been trying to run is a moving window backtesting, with 1 
> day ahead forecast, with 10 windows and re-fitting the model every day.
> Up to here, everything is Ok and the results I obtained,  make sense to me.
> But,  what If I would like to check, the goodness of a 1 year (250 
> days) ahead forecast. (all the settings remain equal), instead of a 1 
> day ahead forecast.
> 
> When I run this, I obtained the following Error:
> 
> Done!...all converged.
> Error en `row.names<-.data.frame`(`*tmp*`, value = value) :
>  invalid 'row.names' length
> Adem?s: Mensajes de aviso perdidos
> 1: In doTryCatch(return(expr), name, parentenv, handler) :
>  passing an object of type 'NULL' to .C (arg 8) is deprecated
> 2: In doTryCatch(return(expr), name, parentenv, handler) :
>  passing an object of type 'NULL' to .C (arg 9) is deprecated
> 3: In doTryCatch(return(expr), name, parentenv, handler) :
>  passing an object of type 'NULL' to .C (arg 8) is deprecated
> 4: In doTryCatch(return(expr), name, parentenv, handler) :
>  passing an object of type 'NULL' to .C (arg 9) is deprecated
> 
> 
> What does It really mean. It isn't possible to check the goodness of a 
> 1 year (250 days) ahead forecast ??
> 
> Any opinion would be greatful.
> 
> Thanks in advanced
> 
> Jaimie
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

_______________________________________________
R-SIG-Finance at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From henry.bee at gmail.com  Wed Oct 24 08:25:36 2012
From: henry.bee at gmail.com (henry.bee at gmail.com)
Date: Tue, 23 Oct 2012 23:25:36 -0700 (PDT)
Subject: [R-SIG-Finance] adjustOHLC discrepancy
In-Reply-To: <CAPPM_gQB9_UHwmvkGmj2CFxdkWuMdBPNn=24JkeW7sfcE2kXfw@mail.gmail.com>
References: <CACAe89zcfG5fJSnjtvLGESLUpRT8iQpW_f=g0hGecNeOKTFrDw@mail.gmail.com>
	<CAPPM_gRdcoA4sqOXMyC+B=dbpkFP_FTQ=zO_=H-PG9hOR0CYpg@mail.gmail.com>
	<CACAe89wJoQ5jwJdS54K_CSsVO8ubk27hu1Wav1O1KNtoP3NjFA@mail.gmail.com>
	<CACAe89wcX=P9j8AVtH--ZA-unVtD2HNZg=Lx+Y6Y4dHmsLxOBw@mail.gmail.com>
	<CAPPM_gQB9_UHwmvkGmj2CFxdkWuMdBPNn=24JkeW7sfcE2kXfw@mail.gmail.com>
Message-ID: <1351059936476-4647268.post@n4.nabble.com>

Hi Josh, 

If you recall in one of our recent exchanges you suggested a way to load
multiple symbols for adjustOHLC. This worked fine until I updated the
adjustOHLC to the latest version a couple of days ago to r583.

For example, now when using 

for (s in symbols) {
  assign(tolower(s), adjustOHLC(get(s), symbol.name=s))
}

Gives the following error:

Error in try.xts(splits, error = stop("\"as.xts(splits)\" failed")) : 
  "as.xts(splits)" failed

I'm wondering if it's your update that's causing the error? In the meantime
I'll revert to the previous version. 

Best,

Henry




--
View this message in context: http://r.789695.n4.nabble.com/adjustOHLC-discrepancy-tp4643567p4647268.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From ludovic.theate at gmail.com  Wed Oct 24 13:14:07 2012
From: ludovic.theate at gmail.com (Ludovic Theate)
Date: Wed, 24 Oct 2012 13:14:07 +0200
Subject: [R-SIG-Finance] rugarch and copulas
Message-ID: <CA+TVX6td_AEC-tQ=Ne8d6p27xd3uZf4Eo=nrvye49PNa4FVRYw@mail.gmail.com>

Hi everybody,

I recently discovered the rugarch package and I have some questions
about how I could use it for the model I am interested in.

In fact, we develop a currency model, using in a first step, some
garch models in order to fit a basket of currencies change rates. Then
we try to account the correlation between each of them using a copula.
A first version of this model has been developped using the fGarch
package.

Question 1 : If I have correctly understood the use of the fGarch
package, I have to fit the model to the data using the garchFit
method. Then in order to simulate some trajectories, I need to use the
garchSim method which needs a model specification created by the
garchSpec method (which requires to extract all the coefficients from
the fit object and to specify them inside the garchSpec function). So
there is no direct link between the fit method and the simulation one.
Did I miss something ? If not, I clearly prefer the spec >- fit ->
simulation workflow from rugarch.

Question 2 : After fitting the arma-garch models to the various
series, I compute a residulas matrix and I compute the rank of each of
them within the original series. Then I fit a student copula using the
fitCopula function. The next step is to simulate "correlated
trajectories". To do so, I simulate realisations of the student copula
using the rmvdc function, then I directly inject these innovations
inside the garchSim method (this is easy to do by modifying the
function, there is just a parameter to add and a little modification
inside the body to do.)

If I want to do the same job with the rugarch package, how should I
provide to the function the innovations which were previously
generated ?

Thanks for your help,

Ludo


From alexios at 4dscape.com  Wed Oct 24 13:18:48 2012
From: alexios at 4dscape.com (Alexios Ghalanos)
Date: Wed, 24 Oct 2012 14:18:48 +0300
Subject: [R-SIG-Finance] rugarch and copulas
In-Reply-To: <CA+TVX6td_AEC-tQ=Ne8d6p27xd3uZf4Eo=nrvye49PNa4FVRYw@mail.gmail.com>
References: <CA+TVX6td_AEC-tQ=Ne8d6p27xd3uZf4Eo=nrvye49PNa4FVRYw@mail.gmail.com>
Message-ID: <D053C44A-294D-4EF5-98CF-287361C75340@4dscape.com>

Try the rmgarch package on r-forge (see in particular the cgarchfit function and related methods). The package's vignette has details on the implementation of each model.

-Alexios

Sent from my iPhone

On Oct 24, 2012, at 14:14, Ludovic Theate <ludovic.theate at gmail.com> wrote:

> Hi everybody,
> 
> I recently discovered the rugarch package and I have some questions
> about how I could use it for the model I am interested in.
> 
> In fact, we develop a currency model, using in a first step, some
> garch models in order to fit a basket of currencies change rates. Then
> we try to account the correlation between each of them using a copula.
> A first version of this model has been developped using the fGarch
> package.
> 
> Question 1 : If I have correctly understood the use of the fGarch
> package, I have to fit the model to the data using the garchFit
> method. Then in order to simulate some trajectories, I need to use the
> garchSim method which needs a model specification created by the
> garchSpec method (which requires to extract all the coefficients from
> the fit object and to specify them inside the garchSpec function). So
> there is no direct link between the fit method and the simulation one.
> Did I miss something ? If not, I clearly prefer the spec >- fit ->
> simulation workflow from rugarch.
> 
> Question 2 : After fitting the arma-garch models to the various
> series, I compute a residulas matrix and I compute the rank of each of
> them within the original series. Then I fit a student copula using the
> fitCopula function. The next step is to simulate "correlated
> trajectories". To do so, I simulate realisations of the student copula
> using the rmvdc function, then I directly inject these innovations
> inside the garchSim method (this is easy to do by modifying the
> function, there is just a parameter to add and a little modification
> inside the body to do.)
> 
> If I want to do the same job with the rugarch package, how should I
> provide to the function the innovations which were previously
> generated ?
> 
> Thanks for your help,
> 
> Ludo
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From g.f.danon at keele.ac.uk  Wed Oct 24 14:32:36 2012
From: g.f.danon at keele.ac.uk (Gohou Danon)
Date: Wed, 24 Oct 2012 13:32:36 +0100
Subject: [R-SIG-Finance] Vector Smooth Transition models (LSTAR and ESTAR)
Message-ID: <CAHZ8CZ+1aYv72ALhXBdqCgBnFvhofuSO+GzQxCRvGU-Lju2_iw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121024/5cbfdac6/attachment.pl>

From evelynpax at yahoo.com  Wed Oct 24 16:50:43 2012
From: evelynpax at yahoo.com (Evelyn Nyamadi)
Date: Wed, 24 Oct 2012 07:50:43 -0700 (PDT)
Subject: [R-SIG-Finance] RUGARCH:EGARCH
Message-ID: <1351090243.28204.YahooMailNeo@web39401.mail.mud.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121024/c20a5631/attachment.pl>

From evelynpax at yahoo.com  Thu Oct 25 13:40:45 2012
From: evelynpax at yahoo.com (Evelyn Nyamadi)
Date: Thu, 25 Oct 2012 04:40:45 -0700 (PDT)
Subject: [R-SIG-Finance] Rugarch: volatility models
Message-ID: <1351165245.20585.YahooMailNeo@web39406.mail.mud.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121025/e6661937/attachment.pl>

From Dheeraj.Pandey at thesmartcube.com  Thu Oct 25 15:49:09 2012
From: Dheeraj.Pandey at thesmartcube.com (Dheeraj Pandey)
Date: Thu, 25 Oct 2012 13:49:09 +0000
Subject: [R-SIG-Finance] Egarch model using RExcel and VBA
Message-ID: <4AE683F38CA9C44E86AB54F76DC7C64C0FFED7D2@SIXPRD0410MB360.apcprd04.prod.outlook.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121025/e1636e72/attachment.pl>

From snes1982 at hotmail.com  Fri Oct 26 00:03:20 2012
From: snes1982 at hotmail.com (nserdar)
Date: Thu, 25 Oct 2012 15:03:20 -0700 (PDT)
Subject: [R-SIG-Finance] Kalman Filter + DLM Package in R
Message-ID: <1351202600714-4647470.post@n4.nabble.com>

Hi

I plan to estimate time varying model with DLM package in R, but I can not
modified
DLM package for Kalman Filter Mean Reverting  Model. 

For example: 

R(it)= Alpha(it)+ Beta(it)R(mt)+ V(it) 
  
KF Mean Reverting 

Alpha(it)= Alphabar(i)+ phi* (Alpha(it-1)-Alphabar(i))+W(i1t) 
Beta(it)= Betabar(i)+ phi* (Beta(it-1)-Betahabar(i))+W(i2t) 

Please let me know how to do that.

Regards,
Serdar



--
View this message in context: http://r.789695.n4.nabble.com/Kalman-Filter-DLM-Package-in-R-tp4647470.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From snes1982 at hotmail.com  Fri Oct 26 01:22:02 2012
From: snes1982 at hotmail.com (nserdar)
Date: Thu, 25 Oct 2012 16:22:02 -0700 (PDT)
Subject: [R-SIG-Finance] Kalman Filter + DLM Package in R
In-Reply-To: <1351202600714-4647470.post@n4.nabble.com>
References: <1351202600714-4647470.post@n4.nabble.com>
Message-ID: <1351207322585-4647474.post@n4.nabble.com>

This is Kalman Filter random walk process code :

library(dlm)

buildCAPM<-function(u){

	dlmModReg(rm,dV=exp(u[1]),dW=exp(u[2:3]))  # rm market

}

outMLE<-dlmMLE(rt,parm=rep(0,3),buildCAPM)  # rt return of indusrty

mod<-buildCAPM(outMLE$par)

outFilter<-dlmFilter(rt,mod)

mae<-mean(abs(outFilter$f)-rt)   # MAE

mse<-mean(((outFilter$f)-rt)^2) #MSE

What I am asking how to modify this code as Kalman Filter Mean Reverting

For example: 

R(it)= Alpha(it)+ Beta(it)R(mt)+ V(it) 

KF Mean Reverting 

Alpha(it)= Alphabar(i)+ phi* (Alpha(it-1)-Alphabar(i))+W(i1t) 
Beta(it)= Betabar(i)+ phi* (Beta(it-1)-Betahabar(i))+W(i2t) 

Regards,
Serdar





--
View this message in context: http://r.789695.n4.nabble.com/Kalman-Filter-DLM-Package-in-R-tp4647470p4647474.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From mjenko at yahoo.com  Fri Oct 26 21:01:09 2012
From: mjenko at yahoo.com (Martin Jenkins)
Date: Fri, 26 Oct 2012 20:01:09 +0100 (BST)
Subject: [R-SIG-Finance] [R-SIG-FINANCE] Low Priority - market component
	list and general coding help
Message-ID: <1351278069.20964.YahooMailNeo@web133117.mail.ir2.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121026/32975540/attachment.pl>

From mjenko at yahoo.com  Fri Oct 26 21:04:08 2012
From: mjenko at yahoo.com (Martin Jenkins)
Date: Fri, 26 Oct 2012 20:04:08 +0100 (BST)
Subject: [R-SIG-Finance] [R-SIG-FINANCE] Low Priority - market component
	list and general coding help
In-Reply-To: <1351278069.20964.YahooMailNeo@web133117.mail.ir2.yahoo.com>
References: <1351278069.20964.YahooMailNeo@web133117.mail.ir2.yahoo.com>
Message-ID: <1351278248.95137.YahooMailNeo@web133104.mail.ir2.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121026/470ba956/attachment.pl>

From gsee000 at gmail.com  Fri Oct 26 21:32:07 2012
From: gsee000 at gmail.com (G See)
Date: Fri, 26 Oct 2012 14:32:07 -0500
Subject: [R-SIG-Finance] [R-SIG-FINANCE] Low Priority - market component
 list and general coding help
In-Reply-To: <1351278069.20964.YahooMailNeo@web133117.mail.ir2.yahoo.com>
References: <1351278069.20964.YahooMailNeo@web133117.mail.ir2.yahoo.com>
Message-ID: <CA+xi=qaP+yOGnp8Qb81g7Mx323ND6XZ6GAZc+siFVoND4vyzuA@mail.gmail.com>

Hi Martin,

comments in-line.

On Fri, Oct 26, 2012 at 2:01 PM, Martin Jenkins <mjenko at yahoo.com> wrote:
> Hi,
>
> I've searched around and not found anything to help on this, even though it's not the first time it's been asked, so was wondering if anyone had any new ideas.
>
> I really like the device output of the chartSeries function and so have used it to output a bitmap of the stock chart.  What I'm using it for is to get an entire market index component list, however to get that I've had to create my own flat file called masterlist.csv in the below code.  Ideally I'd like to have a function do the same job so I don't have to create the file manually.  This way I can quickly and easily get graphs for an entire stock market.
>
> Rather frustratingly Yahoo! have stopped allowing the component list for an index to be downloaded.

If you just want a list of most stocks, use TTR::stockSymbols()

    R> head(stockSymbols()$Symbol)
    Fetching AMEX symbols...
    Fetching NASDAQ symbols...
    Fetching NYSE symbols...
    [1] "AA-P" "AAU"  "ACU"  "ACY"  "ADGE" "ADK"

If the holdings of ETFs will suffice, you can use getHoldings from my
qmao package on R-Forge
(https://r-forge.r-project.org/R/?group_id=1113)

    R> #install.packages("qmao", repos='http://r-forge.r-project.org')
    R> library(qmao)
    R> rownames(getHoldings("SPY", auto.assign=FALSE))

If you want components of specific indexes, you might look through the
code from systematic investor
https://github.com/systematicinvestor/SIT/blob/master/R/data.r

I haven't used any of that code, but the file I linked to above
appears to get the Symbols of stocks for different indexes.

> Also as you can see my coding skills are restricted by my procedural background, so whilst the below works fine, I'm sure it can be written more efficiently.
>
> One last thing, I'm using the auto.assign = FALSE so that I can use a variable in chartseries, this leaves me with the name of my variable, in this case 'x', on the bitmap, which isn't ideal, meaning I have to refer to the filename for the epic.
>

You can simply provide a "name" argument to chartSeries()

    R> s <- "AAPL"
    R> chartSeries(getSymbols(s, src='google', auto.assign=FALSE), name=s)

Just curious, why use src='google' ?  I've found yahoo's data to be
slightly more reliable.

HTH,
Garrett

> Many thanks,
> Martin
>
> library(quantmod)
>
> masterfile <- "C:/Users/Admin/Documents/Programming/R/current/FTSE100/masterlist.csv"
> path <- "C:/Users/Admin/Documents/Programming/R/ftse100bmps/"
> epicstable <- read.table(masterfile, header=FALSE, sep=",")
>
> i <- 1
> while(is.na(epicstable$V1[i]) == "FALSE")
> {
>   epic_char <- as.character(epicstable$V1[i])
>   x <- try(getSymbols(epic_char, auto.assign=FALSE))
>
>   if (length(x)==1)
>   {
>     x <- try(getSymbols(epic_char, src = "google", auto.assign=FALSE))
>   }
>
>   if (length(x) > 1)
>   {
>     outputfile <- paste(path, epicstable$V1[i], '.bmp')
>     chartSeries(x,subset='2011-01::2012',TA="addVo();addMACD()")
>     bmp(file=outputfile, bg = "transparent", width = 1024, height = 768)
>     dev.off()
>   }
>   i = i + 1
> }
>         [[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jeff.a.ryan at gmail.com  Fri Oct 26 21:33:15 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Fri, 26 Oct 2012 14:33:15 -0500
Subject: [R-SIG-Finance] [R-SIG-FINANCE] Low Priority - market component
 list and general coding help
In-Reply-To: <1351278069.20964.YahooMailNeo@web133117.mail.ir2.yahoo.com>
References: <1351278069.20964.YahooMailNeo@web133117.mail.ir2.yahoo.com>
Message-ID: <CABDUZc_p7D1+S8LZ9mhn3tT97fNOzR2j0WHJ3qpnWKbXcEiinw@mail.gmail.com>

Somewhat contrary to common sense, index components are usually
legally controlled by its respective owner/creator.  The result is
that it becomes illegal to make the list 'available'.

Obviously this varies, and I am not a lawyer, but that is the likely
reason behind the inability to download.  There are likely ways around
this of course...

With respect to chartSeries, I am working on getting chart_Series and
it's related add_ functionality 'complete', that is so one can
transition from chartSeries to the new version (which during the
transition will be called chart_Series, note the underscore)

Since you are only using addVo and addMACD here, you can do
chart_Series and add_Vo, add_MACD and will get much prettier graphics.
 They will also be able to be embedded in standard layout() and
pars(mfcol= type layouts. i.e. the full graphic with panels etc
becomes one graphic object (like plot()).  Again, prettier and more
useful.

W.r.t the name of the chart, try name=

HTH
Jeff

On Fri, Oct 26, 2012 at 2:01 PM, Martin Jenkins <mjenko at yahoo.com> wrote:
> Hi,
>
> I've searched around and not found anything to help on this, even though it's not the first time it's been asked, so was wondering if anyone had any new ideas.
>
> I really like the device output of the chartSeries function and so have used it to output a bitmap of the stock chart.  What I'm using it for is to get an entire market index component list, however to get that I've had to create my own flat file called masterlist.csv in the below code.  Ideally I'd like to have a function do the same job so I don't have to create the file manually.  This way I can quickly and easily get graphs for an entire stock market.
>
> Rather frustratingly Yahoo! have stopped allowing the component list for an index to be downloaded.
>
> Also as you can see my coding skills are restricted by my procedural background, so whilst the below works fine, I'm sure it can be written more efficiently.
>
> One last thing, I'm using the auto.assign = FALSE so that I can use a variable in chartseries, this leaves me with the name of my variable, in this case 'x', on the bitmap, which isn't ideal, meaning I have to refer to the filename for the epic.
>
> Many thanks,
> Martin
>
> library(quantmod)
>
> masterfile <- "C:/Users/Admin/Documents/Programming/R/current/FTSE100/masterlist.csv"
> path <- "C:/Users/Admin/Documents/Programming/R/ftse100bmps/"
> epicstable <- read.table(masterfile, header=FALSE, sep=",")
>
> i <- 1
> while(is.na(epicstable$V1[i]) == "FALSE")
> {
>   epic_char <- as.character(epicstable$V1[i])
>   x <- try(getSymbols(epic_char, auto.assign=FALSE))
>
>   if (length(x)==1)
>   {
>     x <- try(getSymbols(epic_char, src = "google", auto.assign=FALSE))
>   }
>
>   if (length(x) > 1)
>   {
>     outputfile <- paste(path, epicstable$V1[i], '.bmp')
>     chartSeries(x,subset='2011-01::2012',TA="addVo();addMACD()")
>     bmp(file=outputfile, bg = "transparent", width = 1024, height = 768)
>     dev.off()
>   }
>   i = i + 1
> }
>         [[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com


From mjenko at yahoo.com  Fri Oct 26 22:15:11 2012
From: mjenko at yahoo.com (Martin Jenkins)
Date: Fri, 26 Oct 2012 21:15:11 +0100 (BST)
Subject: [R-SIG-Finance] [R-SIG-FINANCE] Low Priority - market component
	list and general coding help
In-Reply-To: <CA+xi=qaP+yOGnp8Qb81g7Mx323ND6XZ6GAZc+siFVoND4vyzuA@mail.gmail.com>
References: <1351278069.20964.YahooMailNeo@web133117.mail.ir2.yahoo.com>
	<CA+xi=qaP+yOGnp8Qb81g7Mx323ND6XZ6GAZc+siFVoND4vyzuA@mail.gmail.com>
Message-ID: <1351282511.60525.YahooMailNeo@web133106.mail.ir2.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121026/96833bac/attachment.pl>

From mjenko at yahoo.com  Fri Oct 26 22:31:03 2012
From: mjenko at yahoo.com (Martin Jenkins)
Date: Fri, 26 Oct 2012 21:31:03 +0100 (BST)
Subject: [R-SIG-Finance] [R-SIG-FINANCE] Low Priority - market component
	list and general coding help
In-Reply-To: <CABDUZc_p7D1+S8LZ9mhn3tT97fNOzR2j0WHJ3qpnWKbXcEiinw@mail.gmail.com>
References: <1351278069.20964.YahooMailNeo@web133117.mail.ir2.yahoo.com>
	<CABDUZc_p7D1+S8LZ9mhn3tT97fNOzR2j0WHJ3qpnWKbXcEiinw@mail.gmail.com>
Message-ID: <1351283463.70805.YahooMailNeo@web133104.mail.ir2.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121026/14e91626/attachment.pl>

From jaimie.villanueva at gmail.com  Sat Oct 27 15:04:23 2012
From: jaimie.villanueva at gmail.com (jaimie villanueva)
Date: Sat, 27 Oct 2012 15:04:23 +0200
Subject: [R-SIG-Finance] Get forecasted sigmas of ugarchforecast() functions
Message-ID: <CAEXmNQCr3sDMVJMvRiuyrcP-hBaeogHa4JFQpeDjNWnEiTqfyw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121027/a8f523ff/attachment.pl>

From alexios at 4dscape.com  Sat Oct 27 15:52:32 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Sat, 27 Oct 2012 16:52:32 +0300
Subject: [R-SIG-Finance] Get forecasted sigmas of ugarchforecast()
	functions
In-Reply-To: <CAEXmNQCr3sDMVJMvRiuyrcP-hBaeogHa4JFQpeDjNWnEiTqfyw@mail.gmail.com>
References: <CAEXmNQCr3sDMVJMvRiuyrcP-hBaeogHa4JFQpeDjNWnEiTqfyw@mail.gmail.com>
Message-ID: <508BE720.10005@4dscape.com>

Read the documentation on the available methods to work with the 
returned object of class uGARCHforecast:
?'uGARCHforecast-class'

In particular, the "as.data.frame" method which takes additional 
arguments e.g. as.data.frame(forecast, which = "sigma").
Also available for more complicated forecast setups is the "as.array" 
and "as.list" methods.

-Alexios

On 27/10/12 16:04, jaimie villanueva wrote:
> Dear ALL,
>
> I'm using ugarchforecast() to make predictions of a Garch1.1 model.
> I'm just interesting in 1 day ahead prediction so I have run this lines:
>
> *spec=ugarchspec(variance.model = list(model = "sGARCH", garchOrder =
> c(1,1)),mean.model = list(armaOrder = c(0,0), include.mean =
> F),distribution.model = "norm")*
> *model=ugarchfit(spec,sample,solver = "solnp")*
> *forecast=ugarchforecast(model, data = sample, n.ahead = 1, n.roll =
> 0,out.sample =0)*
>
> The code works properly and when I ask to see forecast results, I obtain
> the following:
>
> **------------------------------------*
> **       GARCH Model Forecast         *
> **------------------------------------*
> *Model: sGARCH*
> *Horizon: 1*
> *Roll Steps: 0*
> *Out of Sample: 0*
> *
> *
> *0-roll forecast: *
> *       sigma series*
> *6436 0.01436      0*
>
>
> My question is: How can I get the sigma value= 0.01436 ??
>
> I've tried to accessing to " forecast at forecast$forecasts " but I obtained
> the following:
>
> forecast at forecast$forecasts
> [[1]]
>               sigma        series
> 6436  0.01435821      0
>
> The output are this 3 figures but I just want the sigma and I'm not able to
> choose it.
>
> I've also tried "forecast at forecast$forecasts[1] "  without success.
>
> I guess I'm pretty close to get It but I can't.
>
> Any idea would be greatful.
>
> Thanks in advanced and have a good weekend All of You.
>
> Jaimie
> *
> *
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From mjenko at yahoo.com  Sat Oct 27 21:10:33 2012
From: mjenko at yahoo.com (Martin Jenkins)
Date: Sat, 27 Oct 2012 20:10:33 +0100 (BST)
Subject: [R-SIG-Finance] [R-SIG-FINANCE] Low Priority - market component
	list and general coding help
In-Reply-To: <1351283463.70805.YahooMailNeo@web133104.mail.ir2.yahoo.com>
References: <1351278069.20964.YahooMailNeo@web133117.mail.ir2.yahoo.com>
	<CABDUZc_p7D1+S8LZ9mhn3tT97fNOzR2j0WHJ3qpnWKbXcEiinw@mail.gmail.com>
	<1351283463.70805.YahooMailNeo@web133104.mail.ir2.yahoo.com>
Message-ID: <1351365033.69261.YahooMailNeo@web133102.mail.ir2.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121027/d8b59024/attachment.pl>

From henry.bee at gmail.com  Sun Oct 28 10:49:09 2012
From: henry.bee at gmail.com (Henry Bee)
Date: Sun, 28 Oct 2012 02:49:09 -0700 (PDT)
Subject: [R-SIG-Finance] adjustOHLC discrepancy
In-Reply-To: <1351059936476-4647268.post@n4.nabble.com>
References: <CACAe89zcfG5fJSnjtvLGESLUpRT8iQpW_f=g0hGecNeOKTFrDw@mail.gmail.com>
	<CAPPM_gRdcoA4sqOXMyC+B=dbpkFP_FTQ=zO_=H-PG9hOR0CYpg@mail.gmail.com>
	<CACAe89wJoQ5jwJdS54K_CSsVO8ubk27hu1Wav1O1KNtoP3NjFA@mail.gmail.com>
	<CACAe89wcX=P9j8AVtH--ZA-unVtD2HNZg=Lx+Y6Y4dHmsLxOBw@mail.gmail.com>
	<CAPPM_gQB9_UHwmvkGmj2CFxdkWuMdBPNn=24JkeW7sfcE2kXfw@mail.gmail.com>
	<1351059936476-4647268.post@n4.nabble.com>
Message-ID: <1351417749343-4647683.post@n4.nabble.com>

Hi Josh, I've fixed it. Please see file attached.

adjustOHLC.R <http://r.789695.n4.nabble.com/file/n4647683/adjustOHLC.R>  



--
View this message in context: http://r.789695.n4.nabble.com/adjustOHLC-discrepancy-tp4643567p4647683.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From henry.bee at gmail.com  Sun Oct 28 12:14:20 2012
From: henry.bee at gmail.com (Henry Bee)
Date: Sun, 28 Oct 2012 04:14:20 -0700 (PDT)
Subject: [R-SIG-Finance] adjustOHLC discrepancy
In-Reply-To: <1351417749343-4647683.post@n4.nabble.com>
References: <CACAe89zcfG5fJSnjtvLGESLUpRT8iQpW_f=g0hGecNeOKTFrDw@mail.gmail.com>
	<CAPPM_gRdcoA4sqOXMyC+B=dbpkFP_FTQ=zO_=H-PG9hOR0CYpg@mail.gmail.com>
	<CACAe89wJoQ5jwJdS54K_CSsVO8ubk27hu1Wav1O1KNtoP3NjFA@mail.gmail.com>
	<CACAe89wcX=P9j8AVtH--ZA-unVtD2HNZg=Lx+Y6Y4dHmsLxOBw@mail.gmail.com>
	<CAPPM_gQB9_UHwmvkGmj2CFxdkWuMdBPNn=24JkeW7sfcE2kXfw@mail.gmail.com>
	<1351059936476-4647268.post@n4.nabble.com>
	<1351417749343-4647683.post@n4.nabble.com>
Message-ID: <1351422860001-4647688.post@n4.nabble.com>

Fixed another problem. There must be also be a dividend to unadjust.  Updated
file attached.

adjustOHLC.R <http://r.789695.n4.nabble.com/file/n4647688/adjustOHLC.R>  



--
View this message in context: http://r.789695.n4.nabble.com/adjustOHLC-discrepancy-tp4643567p4647688.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From st.helldiver at googlemail.com  Sun Oct 28 13:21:12 2012
From: st.helldiver at googlemail.com (Alex Grund)
Date: Sun, 28 Oct 2012 13:21:12 +0100
Subject: [R-SIG-Finance] statistical features of equity time series
Message-ID: <CACjun4LRanmF4mq-yoDzAhfhRG2GG+GzBnMK+-LZh1rsnUzmng@mail.gmail.com>

Hi,

I would like to explore some basic investment "behaviors" (not real
quant "strategies"), such like the cost average effect.

Therefore, I would like to create artificial time series with similar
statistical features as real stock price time series.


1) How could I create them? What is a common distribution function to
get returns from? (Without having reference data)

2) How can I create a time series with similar features as a given time series?

3) How can I create a time series with statistical features that are
similar to most of the data from a set of given time series?

4) Is there anything valuable which could make given data more
exhaustible? Something like bootstrapping?


Thanks

--a


From edd at debian.org  Sun Oct 28 13:41:17 2012
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 28 Oct 2012 07:41:17 -0500
Subject: [R-SIG-Finance] statistical features of equity time series
In-Reply-To: <CACjun4LRanmF4mq-yoDzAhfhRG2GG+GzBnMK+-LZh1rsnUzmng@mail.gmail.com>
References: <CACjun4LRanmF4mq-yoDzAhfhRG2GG+GzBnMK+-LZh1rsnUzmng@mail.gmail.com>
Message-ID: <20621.10221.253426.225948@max.nulle.part>


On 28 October 2012 at 13:21, Alex Grund wrote:
| Hi,
| 
| I would like to explore some basic investment "behaviors" (not real
| quant "strategies"), such like the cost average effect.
| 
| Therefore, I would like to create artificial time series with similar
| statistical features as real stock price time series.
| 
| 
| 1) How could I create them? What is a common distribution function to
| get returns from? (Without having reference data)

There are libraries full of papers and dissertations on this.

You first need to establish _which properties_ you actually want to model /
recreate.  And at which time frame.  Eg for daily data you may use a normal
mixture, maybe add a jump, overlay some sort of Garch or SV...  but those are
"still wrong".

I'd (carefully) resample as per 4).

| 2) How can I create a time series with similar features as a given time series?

See 1). Which features?
 
| 3) How can I create a time series with statistical features that are
| similar to most of the data from a set of given time series?

See 1) and 2). Seriously :) The last paper presentation I saw was Diebold who
showed how to regenerate trade duration data, as well as high frequency vol,
from a "simple" four parameter model.  And simple is a relative term -- he
recaptured the features of his (SP100 equity TAQ) data set, but its not a
model you can code up in just a few lines.
 
| 4) Is there anything valuable which could make given data more
| exhaustible? Something like bootstrapping?

Block bootstrap for time series is pretty well established, and the tseries
package even had a tsbootstrap() function for over a decade.  You can (fairly
easily) extend similar schemes.

Dirk

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From st.helldiver at googlemail.com  Sun Oct 28 14:22:42 2012
From: st.helldiver at googlemail.com (Alex Grund)
Date: Sun, 28 Oct 2012 14:22:42 +0100
Subject: [R-SIG-Finance] statistical features of equity time series
In-Reply-To: <20621.10221.253426.225948@max.nulle.part>
References: <CACjun4LRanmF4mq-yoDzAhfhRG2GG+GzBnMK+-LZh1rsnUzmng@mail.gmail.com>
	<20621.10221.253426.225948@max.nulle.part>
Message-ID: <CACjun4KM5LLxTjoO=qnsEcDsmn+rRE-Y7WZQjqRusupd20if5g@mail.gmail.com>

Hi Dirk,

thanks for your reply.

2012/10/28 Dirk Eddelbuettel <edd at debian.org>:

> There are libraries full of papers and dissertations on this.

Okay, could you please mention a few valuable papers? So that I can search more?

> See 1). Which features?

Basically, I started from the naive question: "How to create a time
series that "looks" like a stock price process over time".
So, the basic features I came through has been a) the distribution of
the (daily) returns, b) their auto-correl features and c) binominal
features.
To explain what I mean by c):
Imagine you create normal-distributed (N(0,1)) returns. Then the
generated time series of prices (price[i] = price[i-1]*(returns[i]+1))
will slightly tend to fall. This is obviously because of this: Imagine
you have three returns generated, [-.5; 0; .5], then the series will
fall. It should be [-.5;0;1] for the series to hold it's level,
however P(X<-.5) > P(X>1), X~N(0,1), so the series with returns mean 0
is obviously to fall.

Additionally, one could think of volatility features (such as
suggested by GARCH).

> | 3) How can I create a time series with statistical features that are
> | similar to most of the data from a set of given time series?
>
> See 1) and 2). Seriously :) The last paper presentation I saw was Diebold who
> showed how to regenerate trade duration data, as well as high frequency vol,
> from a "simple" four parameter model.  And simple is a relative term -- he
> recaptured the features of his (SP100 equity TAQ) data set, but its not a
> model you can code up in just a few lines.

Okay, are there models to start with? They don't need to be perfect,
because I want to use them for learning...

> | 4) Is there anything valuable which could make given data more
> | exhaustible? Something like bootstrapping?
>
> Block bootstrap for time series is pretty well established, and the tseries
> package even had a tsbootstrap() function for over a decade.  You can (fairly
> easily) extend similar schemes.

Ok, thanks


--a


From matthew.douglas.gilbert at gmail.com  Sun Oct 28 14:43:37 2012
From: matthew.douglas.gilbert at gmail.com (Matthew Gilbert)
Date: Sun, 28 Oct 2012 09:43:37 -0400
Subject: [R-SIG-Finance] statistical features of equity time series
In-Reply-To: <CACjun4KM5LLxTjoO=qnsEcDsmn+rRE-Y7WZQjqRusupd20if5g@mail.gmail.com>
References: <CACjun4LRanmF4mq-yoDzAhfhRG2GG+GzBnMK+-LZh1rsnUzmng@mail.gmail.com>
	<20621.10221.253426.225948@max.nulle.part>
	<CACjun4KM5LLxTjoO=qnsEcDsmn+rRE-Y7WZQjqRusupd20if5g@mail.gmail.com>
Message-ID: <508D3689.5080600@gmail.com>

The books "Analysis of Financial Time Series" by Ruey Tsay and 
"Statistics of Financial Markets" by Franke, Hardle and Hafner are both 
good references.

But ultimately if the end goal is to test a trading strategy why 
simulate your own data? It seems like a lot of work and the end result 
would be to generate a profitable strategy on fictitious data?

On 10/28/2012 09:22 AM, Alex Grund wrote:
> Hi Dirk,
>
> thanks for your reply.
>
> 2012/10/28 Dirk Eddelbuettel <edd at debian.org>:
>
>> There are libraries full of papers and dissertations on this.
> Okay, could you please mention a few valuable papers? So that I can search more
>
>> See 1). Which features?
> Basically, I started from the naive question: "How to create a time
> series that "looks" like a stock price process over time".
> So, the basic features I came through has been a) the distribution of
> the (daily) returns, b) their auto-correl features and c) binominal
> features.
> To explain what I mean by c):
> Imagine you create normal-distributed (N(0,1)) returns. Then the
> generated time series of prices (price[i] = price[i-1]*(returns[i]+1))
> will slightly tend to fall. This is obviously because of this: Imagine
> you have three returns generated, [-.5; 0; .5], then the series will
> fall. It should be [-.5;0;1] for the series to hold it's level,
> however P(X<-.5) > P(X>1), X~N(0,1), so the series with returns mean 0
> is obviously to fall.
>
> Additionally, one could think of volatility features (such as
> suggested by GARCH).
>
>> | 3) How can I create a time series with statistical features that are
>> | similar to most of the data from a set of given time series?
>>
>> See 1) and 2). Seriously :) The last paper presentation I saw was Diebold who
>> showed how to regenerate trade duration data, as well as high frequency vol,
>> from a "simple" four parameter model.  And simple is a relative term -- he
>> recaptured the features of his (SP100 equity TAQ) data set, but its not a
>> model you can code up in just a few lines.
> Okay, are there models to start with? They don't need to be perfect,
> because I want to use them for learning...
>
>> | 4) Is there anything valuable which could make given data more
>> | exhaustible? Something like bootstrapping?
>>
>> Block bootstrap for time series is pretty well established, and the tseries
>> package even had a tsbootstrap() function for over a decade.  You can (fairly
>> easily) extend similar schemes.
> Ok, thanks
>
>
> --a
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From st.helldiver at googlemail.com  Sun Oct 28 15:24:49 2012
From: st.helldiver at googlemail.com (Alex Grund)
Date: Sun, 28 Oct 2012 15:24:49 +0100
Subject: [R-SIG-Finance] statistical features of equity time series
In-Reply-To: <508D3689.5080600@gmail.com>
References: <CACjun4LRanmF4mq-yoDzAhfhRG2GG+GzBnMK+-LZh1rsnUzmng@mail.gmail.com>
	<20621.10221.253426.225948@max.nulle.part>
	<CACjun4KM5LLxTjoO=qnsEcDsmn+rRE-Y7WZQjqRusupd20if5g@mail.gmail.com>
	<508D3689.5080600@gmail.com>
Message-ID: <CACjun4LvaC+L==MJBQcUzmeUAu_=4bZC+Err24HNKJunJiSOhA@mail.gmail.com>

Hi Matthew,

2012/10/28 Matthew Gilbert <matthew.douglas.gilbert at gmail.com>:
> The books "Analysis of Financial Time Series" by Ruey Tsay and "Statistics
> of Financial Markets" by Franke, Hardle and Hafner are both good references.

Thank your for this hints!

> But ultimately if the end goal is to test a trading strategy why simulate
> your own data? It seems like a lot of work and the end result would be to
> generate a profitable strategy on fictitious data?

No, the goal should NOT be to have a trading strategy. The goal is to
find some rational bahaviors.
For example: Given special characteristics of prcing data, is it
rational to invest 300000 $ directly or to invest 100000 $ at each
month's first trading day for three month. What will the result likely
be in 12 months?
Is it rational to take some profits?
...

That is not the same as a strategy "buy if MA crosses price" or
something like that. It is rather an market condition independent
bahavior. If one cannot "predict" the market, is it possible to reduce
risk or gain extra returns if one does other things like buy and hold,
but not with any information influence, only by bhavioral patterns.

That's why I called it "bahavior" rather than "strategy".

Why not on live data?
I could run simulations on 500 stocks (e.g. from SP500). But to
eliminate survivorship bias etc. and to run much more tests (1000s to
10000s) it sounds more suitable to run against artificial market data.
Maybe special characteristics are revealed which gives an insight to
"black swans" which are not obvious from real data.


--a


From alexios at 4dscape.com  Sun Oct 28 15:36:58 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Sun, 28 Oct 2012 16:36:58 +0200
Subject: [R-SIG-Finance] statistical features of equity time series
In-Reply-To: <CACjun4LvaC+L==MJBQcUzmeUAu_=4bZC+Err24HNKJunJiSOhA@mail.gmail.com>
References: <CACjun4LRanmF4mq-yoDzAhfhRG2GG+GzBnMK+-LZh1rsnUzmng@mail.gmail.com>
	<20621.10221.253426.225948@max.nulle.part>
	<CACjun4KM5LLxTjoO=qnsEcDsmn+rRE-Y7WZQjqRusupd20if5g@mail.gmail.com>
	<508D3689.5080600@gmail.com>
	<CACjun4LvaC+L==MJBQcUzmeUAu_=4bZC+Err24HNKJunJiSOhA@mail.gmail.com>
Message-ID: <508D430A.4080808@4dscape.com>

You might find an agent based modelling approach useful - one 
interesting implementation of which can be found here:
http://fimas.sourceforge.net/project_info.htm

-Alexios
On 28/10/12 16:24, Alex Grund wrote:
> Hi Matthew,
>
> 2012/10/28 Matthew Gilbert <matthew.douglas.gilbert at gmail.com>:
>> The books "Analysis of Financial Time Series" by Ruey Tsay and "Statistics
>> of Financial Markets" by Franke, Hardle and Hafner are both good references.
>
> Thank your for this hints!
>
>> But ultimately if the end goal is to test a trading strategy why simulate
>> your own data? It seems like a lot of work and the end result would be to
>> generate a profitable strategy on fictitious data?
>
> No, the goal should NOT be to have a trading strategy. The goal is to
> find some rational bahaviors.
> For example: Given special characteristics of prcing data, is it
> rational to invest 300000 $ directly or to invest 100000 $ at each
> month's first trading day for three month. What will the result likely
> be in 12 months?
> Is it rational to take some profits?
> ...
>
> That is not the same as a strategy "buy if MA crosses price" or
> something like that. It is rather an market condition independent
> bahavior. If one cannot "predict" the market, is it possible to reduce
> risk or gain extra returns if one does other things like buy and hold,
> but not with any information influence, only by bhavioral patterns.
>
> That's why I called it "bahavior" rather than "strategy".
>
> Why not on live data?
> I could run simulations on 500 stocks (e.g. from SP500). But to
> eliminate survivorship bias etc. and to run much more tests (1000s to
> 10000s) it sounds more suitable to run against artificial market data.
> Maybe special characteristics are revealed which gives an insight to
> "black swans" which are not obvious from real data.
>
>
> --a
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From st.helldiver at googlemail.com  Sun Oct 28 15:41:24 2012
From: st.helldiver at googlemail.com (Alex Grund)
Date: Sun, 28 Oct 2012 15:41:24 +0100
Subject: [R-SIG-Finance] statistical features of equity time series
In-Reply-To: <508D430A.4080808@4dscape.com>
References: <CACjun4LRanmF4mq-yoDzAhfhRG2GG+GzBnMK+-LZh1rsnUzmng@mail.gmail.com>
	<20621.10221.253426.225948@max.nulle.part>
	<CACjun4KM5LLxTjoO=qnsEcDsmn+rRE-Y7WZQjqRusupd20if5g@mail.gmail.com>
	<508D3689.5080600@gmail.com>
	<CACjun4LvaC+L==MJBQcUzmeUAu_=4bZC+Err24HNKJunJiSOhA@mail.gmail.com>
	<508D430A.4080808@4dscape.com>
Message-ID: <CACjun4+7XVQUWJY3iM3MTRA8ew+rE0k4+xoFxsNi+cVwi7wR3A@mail.gmail.com>

looks nice, thank you very much for the link, I'll have a more
detailled look soon and will come back with my thoughts on this. --a

2012/10/28 alexios ghalanos <alexios at 4dscape.com>:
> You might find an agent based modelling approach useful - one interesting
> implementation of which can be found here:
> http://fimas.sourceforge.net/project_info.htm
>
> -Alexios
>
> On 28/10/12 16:24, Alex Grund wrote:
>>
>> Hi Matthew,
>>
>> 2012/10/28 Matthew Gilbert <matthew.douglas.gilbert at gmail.com>:
>>>
>>> The books "Analysis of Financial Time Series" by Ruey Tsay and
>>> "Statistics
>>> of Financial Markets" by Franke, Hardle and Hafner are both good
>>> references.
>>
>>
>> Thank your for this hints!
>>
>>> But ultimately if the end goal is to test a trading strategy why simulate
>>> your own data? It seems like a lot of work and the end result would be to
>>> generate a profitable strategy on fictitious data?
>>
>>
>> No, the goal should NOT be to have a trading strategy. The goal is to
>> find some rational bahaviors.
>> For example: Given special characteristics of prcing data, is it
>> rational to invest 300000 $ directly or to invest 100000 $ at each
>> month's first trading day for three month. What will the result likely
>> be in 12 months?
>> Is it rational to take some profits?
>> ...
>>
>> That is not the same as a strategy "buy if MA crosses price" or
>> something like that. It is rather an market condition independent
>> bahavior. If one cannot "predict" the market, is it possible to reduce
>> risk or gain extra returns if one does other things like buy and hold,
>> but not with any information influence, only by bhavioral patterns.
>>
>> That's why I called it "bahavior" rather than "strategy".
>>
>> Why not on live data?
>> I could run simulations on 500 stocks (e.g. from SP500). But to
>> eliminate survivorship bias etc. and to run much more tests (1000s to
>> 10000s) it sounds more suitable to run against artificial market data.
>> Maybe special characteristics are revealed which gives an insight to
>> "black swans" which are not obvious from real data.
>>
>>
>> --a
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>


From patrick at burns-stat.com  Sun Oct 28 16:19:35 2012
From: patrick at burns-stat.com (Patrick Burns)
Date: Sun, 28 Oct 2012 15:19:35 +0000
Subject: [R-SIG-Finance] statistical features of equity time series
In-Reply-To: <CACjun4KM5LLxTjoO=qnsEcDsmn+rRE-Y7WZQjqRusupd20if5g@mail.gmail.com>
References: <CACjun4LRanmF4mq-yoDzAhfhRG2GG+GzBnMK+-LZh1rsnUzmng@mail.gmail.com>
	<20621.10221.253426.225948@max.nulle.part>
	<CACjun4KM5LLxTjoO=qnsEcDsmn+rRE-Y7WZQjqRusupd20if5g@mail.gmail.com>
Message-ID: <508D4D07.7030707@burns-stat.com>

If you are assuming a normal (or other
symmetric) distribution for returns,
then those will be log returns rather
than simple returns*.  So the price series
will be generated by:

initialPrice * exp(c(0, cumsum(returnVector)))

I would suggest garch** simulations as a starting
point.  The most obvious feature of market returns
not being IID is volatility clustering.  If what
you care about depends on autocorrelation, then
you could include non-zero ARMA in your model.

But I think you should keep Dirk's caution in mind.
The best models will depend on the question.

* http://www.portfolioprobe.com/2010/10/04/a-tale-of-two-returns/

** 
http://www.portfolioprobe.com/2012/07/06/a-practical-introduction-to-garch-modeling/

Pat


On 28/10/2012 13:22, Alex Grund wrote:
> Hi Dirk,
>
> thanks for your reply.
>
> 2012/10/28 Dirk Eddelbuettel <edd at debian.org>:
>
>> There are libraries full of papers and dissertations on this.
>
> Okay, could you please mention a few valuable papers? So that I can search more?
>
>> See 1). Which features?
>
> Basically, I started from the naive question: "How to create a time
> series that "looks" like a stock price process over time".
> So, the basic features I came through has been a) the distribution of
> the (daily) returns, b) their auto-correl features and c) binominal
> features.
> To explain what I mean by c):
> Imagine you create normal-distributed (N(0,1)) returns. Then the
> generated time series of prices (price[i] = price[i-1]*(returns[i]+1))
> will slightly tend to fall. This is obviously because of this: Imagine
> you have three returns generated, [-.5; 0; .5], then the series will
> fall. It should be [-.5;0;1] for the series to hold it's level,
> however P(X<-.5) > P(X>1), X~N(0,1), so the series with returns mean 0
> is obviously to fall.
>
> Additionally, one could think of volatility features (such as
> suggested by GARCH).
>
>> | 3) How can I create a time series with statistical features that are
>> | similar to most of the data from a set of given time series?
>>
>> See 1) and 2). Seriously :) The last paper presentation I saw was Diebold who
>> showed how to regenerate trade duration data, as well as high frequency vol,
>> from a "simple" four parameter model.  And simple is a relative term -- he
>> recaptured the features of his (SP100 equity TAQ) data set, but its not a
>> model you can code up in just a few lines.
>
> Okay, are there models to start with? They don't need to be perfect,
> because I want to use them for learning...
>
>> | 4) Is there anything valuable which could make given data more
>> | exhaustible? Something like bootstrapping?
>>
>> Block bootstrap for time series is pretty well established, and the tseries
>> package even had a tsbootstrap() function for over a decade.  You can (fairly
>> easily) extend similar schemes.
>
> Ok, thanks
>
>
> --a
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From markleeds2 at gmail.com  Sun Oct 28 17:23:46 2012
From: markleeds2 at gmail.com (Mark Leeds)
Date: Sun, 28 Oct 2012 12:23:46 -0400
Subject: [R-SIG-Finance] statistical features of equity time series
In-Reply-To: <CACjun4LRanmF4mq-yoDzAhfhRG2GG+GzBnMK+-LZh1rsnUzmng@mail.gmail.com>
References: <CACjun4LRanmF4mq-yoDzAhfhRG2GG+GzBnMK+-LZh1rsnUzmng@mail.gmail.com>
Message-ID: <CAHz+bWaOC4tm=w8wzrYLozYitT4obG0HNiqAD6R7=OFcy5HzRA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121028/658b4e3e/attachment.pl>

From jeff.a.ryan at gmail.com  Sun Oct 28 17:42:00 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Sun, 28 Oct 2012 11:42:00 -0500
Subject: [R-SIG-Finance] statistical features of equity time series
In-Reply-To: <CAHz+bWaOC4tm=w8wzrYLozYitT4obG0HNiqAD6R7=OFcy5HzRA@mail.gmail.com>
References: <CACjun4LRanmF4mq-yoDzAhfhRG2GG+GzBnMK+-LZh1rsnUzmng@mail.gmail.com>
	<CAHz+bWaOC4tm=w8wzrYLozYitT4obG0HNiqAD6R7=OFcy5HzRA@mail.gmail.com>
Message-ID: <CABDUZc-sQp6=nTi9HcK-ZMZO1CdRzFpbKwX_oYBT1b1LNJgRmA@mail.gmail.com>

And in the spirit of OSS, share your code (if you get that far) with the list!

Jeff

On Sun, Oct 28, 2012 at 11:23 AM, Mark Leeds <markleeds2 at gmail.com> wrote:
> Hi Alex: The paper below explains how Mandelbrot did what you're
> describing.  There's no pseudo-code so programming what he describes could
> be an interesting  challenge. If you use it and get anywhere with it, let
> me know. Good luck.
>
> jamesgoulding.com/Research_II/Mandelbrot/Mandelbrot (MMAR, Multifractal
> Model of Asset Returns).pdf
>
> On Sun, Oct 28, 2012 at 8:21 AM, Alex Grund <st.helldiver at googlemail.com>wrote:
>
>> Hi,
>>
>> I would like to explore some basic investment "behaviors" (not real
>> quant "strategies"), such like the cost average effect.
>>
>> Therefore, I would like to create artificial time series with similar
>> statistical features as real stock price time series.
>>
>>
>> 1) How could I create them? What is a common distribution function to
>> get returns from? (Without having reference data)
>>
>> 2) How can I create a time series with similar features as a given time
>> series?
>>
>> 3) How can I create a time series with statistical features that are
>> similar to most of the data from a set of given time series?
>>
>> 4) Is there anything valuable which could make given data more
>> exhaustible? Something like bootstrapping?
>>
>>
>> Thanks
>>
>> --a
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com


From pict100 at gmail.com  Mon Oct 29 12:50:23 2012
From: pict100 at gmail.com (Db)
Date: Mon, 29 Oct 2012 04:50:23 -0700 (PDT)
Subject: [R-SIG-Finance] [R-SIG-FINANCE] Low Priority - market component
 list and general coding help
In-Reply-To: <1351278069.20964.YahooMailNeo@web133117.mail.ir2.yahoo.com>
References: <1351278069.20964.YahooMailNeo@web133117.mail.ir2.yahoo.com>
Message-ID: <1351511423030-4647752.post@n4.nabble.com>

Here is some code to get all listed stocks on the Hongkong StockExchange
Mainboard 
with stock codes ready to be fed into quantmod :

http://pastebin.com/mt1gfyvy

Db





--
View this message in context: http://r.789695.n4.nabble.com/R-SIG-FINANCE-Low-Priority-market-component-list-and-general-coding-help-tp4647589p4647752.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From snes1982 at hotmail.com  Tue Oct 30 11:36:42 2012
From: snes1982 at hotmail.com (nserdar)
Date: Tue, 30 Oct 2012 03:36:42 -0700 (PDT)
Subject: [R-SIG-Finance] State Space Model +   DLM Package in R
Message-ID: <1351593402653-4647838.post@n4.nabble.com>

Kalman filter approach is a special specification of  state space model.

This is Kalman Filter random walk process code in DLM packages: 

library(dlm) 

buildCAPM<-function(u){ 

        dlmModReg(rm,dV=exp(u[1]),dW=exp(u[2:3]))  # rm market 

} 

outMLE<-dlmMLE(rt,parm=rep(0,3),buildCAPM)  # rt return of indusrty 

mod<-buildCAPM(outMLE$par) 

outFilter<-dlmFilter(rt,mod) 

mae<-mean(abs(outFilter$f)-rt)   # MAE 

mse<-mean(((outFilter$f)-rt)^2) #MSE 

What I am asking how to modify this code as Kalman Filter Mean Reverting 

For example: 

R(it)= Alpha(it)+ Beta(it)R(mt)+ V(it) 

KF Mean Reverting 

Alpha(it)= Alphabar(i)+ phi* (Alpha(it-1)-Alphabar(i))+W(i1t) 
Beta(it)= Betabar(i)+ phi* (Beta(it-1)-Betahabar(i))+W(i2t) 

Please let me know if there is an any packages or codes  how to employ
Kalman Filter with Mean Reverting.

Regards, 
Serdar 



--
View this message in context: http://r.789695.n4.nabble.com/State-Space-Model-DLM-Package-in-R-tp4647838.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From paulteetor at yahoo.com  Wed Oct 31 02:37:44 2012
From: paulteetor at yahoo.com (Paul Teetor)
Date: Tue, 30 Oct 2012 18:37:44 -0700 (PDT)
Subject: [R-SIG-Finance] Kalman Filter + DLM Package in R
References: <1351202600714-4647470.post@n4.nabble.com>
	<1351207322585-4647474.post@n4.nabble.com> 
Message-ID: <1351647464.77923.YahooMailNeo@web160903.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121030/0e833317/attachment.pl>

From markleeds2 at gmail.com  Wed Oct 31 04:00:21 2012
From: markleeds2 at gmail.com (Mark Leeds)
Date: Tue, 30 Oct 2012 23:00:21 -0400
Subject: [R-SIG-Finance] Kalman Filter + DLM Package in R
In-Reply-To: <1351647464.77923.YahooMailNeo@web160903.mail.bf1.yahoo.com>
References: <1351202600714-4647470.post@n4.nabble.com>
	<1351207322585-4647474.post@n4.nabble.com>
	<1351647464.77923.YahooMailNeo@web160903.mail.bf1.yahoo.com>
Message-ID: <CAHz+bWb85gSa44RK=LABO2Q74W4C-b+3qiTzMvH=_JSU5YZ8mQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121030/f4f9e89c/attachment.pl>

From snes1982 at hotmail.com  Wed Oct 31 09:36:01 2012
From: snes1982 at hotmail.com (nserdar)
Date: Wed, 31 Oct 2012 01:36:01 -0700 (PDT)
Subject: [R-SIG-Finance] Kalman Filter + DLM Package in R
In-Reply-To: <1351647464.77923.YahooMailNeo@web160903.mail.bf1.yahoo.com>
References: <1351202600714-4647470.post@n4.nabble.com>
	<1351207322585-4647474.post@n4.nabble.com>
	<1351647464.77923.YahooMailNeo@web160903.mail.bf1.yahoo.com>
Message-ID: <1351672561341-4647970.post@n4.nabble.com>

Thanks for your response 

Model: 

R(it)= Alpha(it)+ Beta(it)R(mt)+ V(it) 

KF Mean Reverting 

Alpha(it)= Alphabar(i)+ phi* (Alpha(it-1)-Alphabar(i))+W(i1t) 
Beta(it)= Betabar(i)+ phi* (Beta(it-1)-Betahabar(i))+W(i2t) 

Parameters are  estimated in  MLE function, these are 

Phi_1, Phi_2 ,  Alpha_bar, Beta_bar, Variance(Wi1t), Variance(Wi2t) and 
Variance (Vit)

Some restrictions I need in this process: 

0 <=  Phi_1  and Phi_2  < =1

Variances >0 

Alpha_bar and Beta_bar  are close to least square results. 

But some resources suggest Alpha is constant, otherwise multicollinearity
problem can be raised.

Regards,
Serdar






--
View this message in context: http://r.789695.n4.nabble.com/Kalman-Filter-DLM-Package-in-R-tp4647470p4647970.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From paulteetor at yahoo.com  Wed Oct 31 12:04:15 2012
From: paulteetor at yahoo.com (Paul Teetor)
Date: Wed, 31 Oct 2012 04:04:15 -0700 (PDT)
Subject: [R-SIG-Finance] Kalman Filter + DLM Package in R
In-Reply-To: <1351672561341-4647970.post@n4.nabble.com>
References: <1351202600714-4647470.post@n4.nabble.com>
	<1351207322585-4647474.post@n4.nabble.com>
	<1351647464.77923.YahooMailNeo@web160903.mail.bf1.yahoo.com>
	<1351672561341-4647970.post@n4.nabble.com>
Message-ID: <1351681455.72480.YahooMailNeo@web160902.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121031/1252f8e2/attachment.pl>

From snes1982 at hotmail.com  Wed Oct 31 12:32:35 2012
From: snes1982 at hotmail.com (nserdar)
Date: Wed, 31 Oct 2012 04:32:35 -0700 (PDT)
Subject: [R-SIG-Finance] Kalman Filter + DLM Package in R
In-Reply-To: <1351681455.72480.YahooMailNeo@web160902.mail.bf1.yahoo.com>
References: <1351202600714-4647470.post@n4.nabble.com>
	<1351207322585-4647474.post@n4.nabble.com>
	<1351647464.77923.YahooMailNeo@web160903.mail.bf1.yahoo.com>
	<1351672561341-4647970.post@n4.nabble.com>
	<1351681455.72480.YahooMailNeo@web160902.mail.bf1.yahoo.com>
Message-ID: <1351683155178-4647985.post@n4.nabble.com>

Thanks,

i is defined as each industries, sectors etc.

I defined initial values for those parameters,

phi_1 = 0.5
Phi_2 = 0.5 

Alpha_bar=  OLS  regression results  (intercept) from first 10 observation
Beta_bar= OLS    regression results  (beta) from first 10 observation

Var(Wi1t) = 1.001
Var(Wi2t) = 1.001
Var(Vit) = 1.001

DLM and other packages just only focus on KF Random Walk process, none of
those does not provide any ideas about KF mean reverting. 

Regards,
Ser




--
View this message in context: http://r.789695.n4.nabble.com/Kalman-Filter-DLM-Package-in-R-tp4647470p4647985.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From markleeds2 at gmail.com  Wed Oct 31 15:06:48 2012
From: markleeds2 at gmail.com (Mark Leeds)
Date: Wed, 31 Oct 2012 10:06:48 -0400
Subject: [R-SIG-Finance] Kalman Filter + DLM Package in R
In-Reply-To: <1351681455.72480.YahooMailNeo@web160902.mail.bf1.yahoo.com>
References: <1351202600714-4647470.post@n4.nabble.com>
	<1351207322585-4647474.post@n4.nabble.com>
	<1351647464.77923.YahooMailNeo@web160903.mail.bf1.yahoo.com>
	<1351672561341-4647970.post@n4.nabble.com>
	<1351681455.72480.YahooMailNeo@web160902.mail.bf1.yahoo.com>
Message-ID: <CAHz+bWbh3vFjWoyKbkK=HSzAmYcC8Vgsn=DRLmFHdZf-+YKE_A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121031/e67af658/attachment.pl>

From noahsilverman at ucla.edu  Thu Nov  1 23:02:04 2012
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Thu, 1 Nov 2012 15:02:04 -0700
Subject: [R-SIG-Finance] Using Margin in Blotter package
Message-ID: <ACCD816C-F041-459E-90E8-E746E003BE50@ucla.edu>

 I've run into an issue with the blotter package that may be significant.

When buying and selling futures, the full contract value is NEVER paid.  It is normal practice to simply pay the margin.  For example, a single contract of corn is for 5,000 bushels.  At $5.00 per bushel, that is a $25,000 contract.  However, the amount actually paid to a broker is around $2,000.  

This is an issue when designing and testing trading systems.  If I have a fictional fund of $1,000,000 and want to buy 20 contracts of corn, real life cash outflow would be around $40,000.  However, with blotter it would be $500,000, which is 1/2 of my portfolio. That quickly kills a lot of trading strategies and testing.

Is there a way to account for margin size in blotter?
If not, can you think of a way to "cheat" that into the current system?  


--
Noah Silverman, M.S.
UCLA Department of Statistics
8117 Math Sciences Building
Los Angeles, CA 90095


From peter at braverock.com  Thu Nov  1 23:45:12 2012
From: peter at braverock.com (Peter Carl)
Date: Thu, 1 Nov 2012 17:45:12 -0500
Subject: [R-SIG-Finance] Using Margin in Blotter package
Message-ID: <d9f45b844c0a236a6ce850bbac129492.squirrel@mail.braverock.com>

> Is there a way to account for margin size in blotter?
No, although it isn't outside the realm of possibilities some day. 
Finding an enthusiastic author of such code has been, well, difficult.

> If not, can you think of a way to "cheat" that into the current system?
As a quick but perhaps impractical solution, you could export your
positions to an external span engine.  Barring that possibility, I'd say
that you can do some back of the envelope calculations based on positions
and transactions kept in blotter to estimate margin use if you need.

Contributions would be welcome, of course.

pcc
-- 
Peter Carl
http://www.braverock.com/peter

>  I've run into an issue with the blotter package that may be significant.
>
> When buying and selling futures, the full contract value is NEVER paid.
It is normal practice to simply pay the margin.  For example, a single
contract of corn is for 5,000 bushels.  At $5.00 per bushel, that is a
$25,000 contract.  However, the amount actually paid to a broker is
around $2,000.
>
> This is an issue when designing and testing trading systems.  If I have
a fictional fund of $1,000,000 and want to buy 20 contracts of corn,
real life cash outflow would be around $40,000.  However, with blotter
it would be $500,000, which is 1/2 of my portfolio. That quickly kills a
lot of trading strategies and testing.
>
> Is there a way to account for margin size in blotter?
> If not, can you think of a way to "cheat" that into the current system?
>
>
> --
> Noah Silverman, M.S.
> UCLA Department of Statistics
> 8117 Math Sciences Building
> Los Angeles, CA 90095
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first. --
Also note that this is not the r-help list where general R questions
should go.
>


From ustaudinger at activequant.com  Fri Nov  2 00:17:22 2012
From: ustaudinger at activequant.com (Ulrich Staudinger)
Date: Fri, 2 Nov 2012 00:17:22 +0100
Subject: [R-SIG-Finance] Using Margin in Blotter package
In-Reply-To: <d9f45b844c0a236a6ce850bbac129492.squirrel@mail.braverock.com>
References: <d9f45b844c0a236a6ce850bbac129492.squirrel@mail.braverock.com>
Message-ID: <CAMrz3D0J4EWwbqYO95Yo-WXOcXHvkuybUiipVr2gLvVCC7SMFg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121102/f2f34fa4/attachment.pl>

From ustaudinger at gmail.com  Fri Nov  2 00:19:31 2012
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Fri, 2 Nov 2012 00:19:31 +0100
Subject: [R-SIG-Finance] Using Margin in Blotter package
In-Reply-To: <d9f45b844c0a236a6ce850bbac129492.squirrel@mail.braverock.com>
References: <d9f45b844c0a236a6ce850bbac129492.squirrel@mail.braverock.com>
Message-ID: <CAMrz3D0qK=rVfcc=Wwu6R_NuEzzGj=s89oH973OMGSc_RUowTw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121102/e8fd0434/attachment.pl>

From brian at braverock.com  Fri Nov  2 02:49:50 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 01 Nov 2012 20:49:50 -0500
Subject: [R-SIG-Finance] Using Margin in Blotter package
In-Reply-To: <CAMrz3D0qK=rVfcc=Wwu6R_NuEzzGj=s89oH973OMGSc_RUowTw@mail.gmail.com>
References: <d9f45b844c0a236a6ce850bbac129492.squirrel@mail.braverock.com>
	<CAMrz3D0qK=rVfcc=Wwu6R_NuEzzGj=s89oH973OMGSc_RUowTw@mail.gmail.com>
Message-ID: <509326BE.7080800@braverock.com>


Margin depends on both the instrument and the position.  Most exchanges 
use SPAN, and certified SPAN engines are extremely expensive.  Beyond 
exchange margin, your broker often charges additional margin, and may or 
may not cross-margin using SPAN.

Ulrich is right that you could add a field to your instrument data (in 
the FinancialInstrument package) to describe minimum initial and 
maintenance margin: that's trivial as the instrument model is 
deliberately extensible, but it's also useless because it doesn't cover 
cross-margining, and the only accounts that don't get cross-margin are 
typically retail.

Even funds that use leverage in the futures space typically tell their 
investors that they will invest a certain *notional* amount from equity. 
  While they usually report margin/equity, this has nothing to do with 
most backtests, you backtest on notional exposure, and your reported 
leverage to your investor is usually based on notional as well.

While efficient use of margin is obviously very important, I don't 
really see this as having anything to do with blotter, since we're not 
going to license and write a SPAN engine.

Regards,

    - Brian

On 11/01/2012 06:19 PM, Ulrich Staudinger wrote:
> To make it really precise is an art, though. I don't know the internals of
> the blotter package, but as far as I understood, quantstrat has an
> instrument class (or was it blotter?), this instrument class would be the
> right place to add a function "cashUse" or something like that.
>
> A function could cater for the different characteristics of contracts. As
> an example, the actual margin use for FDAX futures depends on volatility
> and price - it's not a plain price dependency.
>
> 'my two cent.
>
>
>
> On Thu, Nov 1, 2012 at 11:45 PM, Peter Carl <peter at braverock.com> wrote:
>
>>> Is there a way to account for margin size in blotter?
>> No, although it isn't outside the realm of possibilities some day.
>> Finding an enthusiastic author of such code has been, well, difficult.
>>
>>> If not, can you think of a way to "cheat" that into the current system?
>> As a quick but perhaps impractical solution, you could export your
>> positions to an external span engine.  Barring that possibility, I'd say
>> that you can do some back of the envelope calculations based on positions
>> and transactions kept in blotter to estimate margin use if you need.
>>
>> Contributions would be welcome, of course.
>>
>> pcc
>> --
>> Peter Carl
>> http://www.braverock.com/peter
>>
>>>   I've run into an issue with the blotter package that may be significant.
>>>
>>> When buying and selling futures, the full contract value is NEVER paid.
>> It is normal practice to simply pay the margin.  For example, a single
>> contract of corn is for 5,000 bushels.  At $5.00 per bushel, that is a
>> $25,000 contract.  However, the amount actually paid to a broker is
>> around $2,000.
>>>
>>> This is an issue when designing and testing trading systems.  If I have
>> a fictional fund of $1,000,000 and want to buy 20 contracts of corn,
>> real life cash outflow would be around $40,000.  However, with blotter
>> it would be $500,000, which is 1/2 of my portfolio. That quickly kills a
>> lot of trading strategies and testing.
>>>
>>> Is there a way to account for margin size in blotter?
>>> If not, can you think of a way to "cheat" that into the current system?
>>>
>>>
>>> --
>>> Noah Silverman, M.S.
>>> UCLA Department of Statistics
>>> 8117 Math Sciences Building
>>> Los Angeles, CA 90095
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first. --
>> Also note that this is not the r-help list where general R questions
>> should go.
>>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
>
>


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From noahsilverman at ucla.edu  Fri Nov  2 03:06:00 2012
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Thu, 1 Nov 2012 19:06:00 -0700
Subject: [R-SIG-Finance] Using Margin in Blotter package
In-Reply-To: <509326BE.7080800@braverock.com>
References: <d9f45b844c0a236a6ce850bbac129492.squirrel@mail.braverock.com>
	<CAMrz3D0qK=rVfcc=Wwu6R_NuEzzGj=s89oH973OMGSc_RUowTw@mail.gmail.com>
	<509326BE.7080800@braverock.com>
Message-ID: <5FBE1FAD-5772-47A8-A898-03D8B60B2998@ucla.edu>

Brian,

All very good points.

For this particular project, I'm looking at commodity futures. (i.e., corn, wheat, etc.)  So, for those assets, there is a fixed "deposit" per contract amount.

For example, each corn future contract requires a margin deposit of $2,700


So, I'd love to find a way to extend the financial instrument or blotter to use that instead of the notional value.

Thoughts?


--
Noah Silverman, M.S.
UCLA Department of Statistics
8117 Math Sciences Building
Los Angeles, CA 90095



On Nov 1, 2012, at 6:49 PM, "Brian G. Peterson" <brian at braverock.com> wrote:

> 
> Margin depends on both the instrument and the position.  Most exchanges use SPAN, and certified SPAN engines are extremely expensive.  Beyond exchange margin, your broker often charges additional margin, and may or may not cross-margin using SPAN.
> 
> Ulrich is right that you could add a field to your instrument data (in the FinancialInstrument package) to describe minimum initial and maintenance margin: that's trivial as the instrument model is deliberately extensible, but it's also useless because it doesn't cover cross-margining, and the only accounts that don't get cross-margin are typically retail.
> 
> Even funds that use leverage in the futures space typically tell their investors that they will invest a certain *notional* amount from equity.  While they usually report margin/equity, this has nothing to do with most backtests, you backtest on notional exposure, and your reported leverage to your investor is usually based on notional as well.
> 
> While efficient use of margin is obviously very important, I don't really see this as having anything to do with blotter, since we're not going to license and write a SPAN engine.
> 
> Regards,
> 
>   - Brian
> 
> On 11/01/2012 06:19 PM, Ulrich Staudinger wrote:
>> To make it really precise is an art, though. I don't know the internals of
>> the blotter package, but as far as I understood, quantstrat has an
>> instrument class (or was it blotter?), this instrument class would be the
>> right place to add a function "cashUse" or something like that.
>> 
>> A function could cater for the different characteristics of contracts. As
>> an example, the actual margin use for FDAX futures depends on volatility
>> and price - it's not a plain price dependency.
>> 
>> 'my two cent.
>> 
>> 
>> 
>> On Thu, Nov 1, 2012 at 11:45 PM, Peter Carl <peter at braverock.com> wrote:
>> 
>>>> Is there a way to account for margin size in blotter?
>>> No, although it isn't outside the realm of possibilities some day.
>>> Finding an enthusiastic author of such code has been, well, difficult.
>>> 
>>>> If not, can you think of a way to "cheat" that into the current system?
>>> As a quick but perhaps impractical solution, you could export your
>>> positions to an external span engine.  Barring that possibility, I'd say
>>> that you can do some back of the envelope calculations based on positions
>>> and transactions kept in blotter to estimate margin use if you need.
>>> 
>>> Contributions would be welcome, of course.
>>> 
>>> pcc
>>> --
>>> Peter Carl
>>> http://www.braverock.com/peter
>>> 
>>>>  I've run into an issue with the blotter package that may be significant.
>>>> 
>>>> When buying and selling futures, the full contract value is NEVER paid.
>>> It is normal practice to simply pay the margin.  For example, a single
>>> contract of corn is for 5,000 bushels.  At $5.00 per bushel, that is a
>>> $25,000 contract.  However, the amount actually paid to a broker is
>>> around $2,000.
>>>> 
>>>> This is an issue when designing and testing trading systems.  If I have
>>> a fictional fund of $1,000,000 and want to buy 20 contracts of corn,
>>> real life cash outflow would be around $40,000.  However, with blotter
>>> it would be $500,000, which is 1/2 of my portfolio. That quickly kills a
>>> lot of trading strategies and testing.
>>>> 
>>>> Is there a way to account for margin size in blotter?
>>>> If not, can you think of a way to "cheat" that into the current system?
>>>> 
>>>> 
>>>> --
>>>> Noah Silverman, M.S.
>>>> UCLA Department of Statistics
>>>> 8117 Math Sciences Building
>>>> Los Angeles, CA 90095
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first. --
>>> Also note that this is not the r-help list where general R questions
>>> should go.
>>>> 
>>> 
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>> 
>> 
>> 
>> 
> 
> 
> -- 
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From brian at braverock.com  Fri Nov  2 03:27:55 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 01 Nov 2012 21:27:55 -0500
Subject: [R-SIG-Finance] Using Margin in Blotter package
In-Reply-To: <5FBE1FAD-5772-47A8-A898-03D8B60B2998@ucla.edu>
References: <d9f45b844c0a236a6ce850bbac129492.squirrel@mail.braverock.com>
	<CAMrz3D0qK=rVfcc=Wwu6R_NuEzzGj=s89oH973OMGSc_RUowTw@mail.gmail.com>
	<509326BE.7080800@braverock.com>
	<5FBE1FAD-5772-47A8-A898-03D8B60B2998@ucla.edu>
Message-ID: <50932FAB.1040109@braverock.com>

Noah,

I already told you that you can add initial and maintenance margin to 
the instrument definition, but your gains and losses are based on the 
notional value of the contract and its multiplier, just as in real markets.

Also, your description of how margin works just isn't true.  commodity 
futures *are* subject to SPAN.  Initial and maintenance margin are for 
single contracts, and don't take SPAN into account. Corn and soybeans 
are even used in the base examples on the CME's pages about SPAN.

http://www.cmegroup.com/clearing/margins/spread-calc.html

Physical commodities are subject both to 'basing' and to 'inter-spread' 
margin via SPAN.

Regards,

    - Brian


On 11/01/2012 09:06 PM, Noah Silverman wrote:
> Brian,
>
> All very good points.
>
> For this particular project, I'm looking at commodity futures. (i.e., corn, wheat, etc.)  So, for those assets, there is a fixed "deposit" per contract amount.
>
> For example, each corn future contract requires a margin deposit of $2,700
>
>
> So, I'd love to find a way to extend the financial instrument or blotter to use that instead of the notional value.
>
> Thoughts?
>
>
> --
> Noah Silverman, M.S.
> UCLA Department of Statistics
> 8117 Math Sciences Building
> Los Angeles, CA 90095
>
>
>
> On Nov 1, 2012, at 6:49 PM, "Brian G. Peterson" <brian at braverock.com> wrote:
>
>>
>> Margin depends on both the instrument and the position.  Most exchanges use SPAN, and certified SPAN engines are extremely expensive.  Beyond exchange margin, your broker often charges additional margin, and may or may not cross-margin using SPAN.
>>
>> Ulrich is right that you could add a field to your instrument data (in the FinancialInstrument package) to describe minimum initial and maintenance margin: that's trivial as the instrument model is deliberately extensible, but it's also useless because it doesn't cover cross-margining, and the only accounts that don't get cross-margin are typically retail.
>>
>> Even funds that use leverage in the futures space typically tell their investors that they will invest a certain *notional* amount from equity.  While they usually report margin/equity, this has nothing to do with most backtests, you backtest on notional exposure, and your reported leverage to your investor is usually based on notional as well.
>>
>> While efficient use of margin is obviously very important, I don't really see this as having anything to do with blotter, since we're not going to license and write a SPAN engine.
>>
>> Regards,
>>
>>    - Brian
>>
>> On 11/01/2012 06:19 PM, Ulrich Staudinger wrote:
>>> To make it really precise is an art, though. I don't know the internals of
>>> the blotter package, but as far as I understood, quantstrat has an
>>> instrument class (or was it blotter?), this instrument class would be the
>>> right place to add a function "cashUse" or something like that.
>>>
>>> A function could cater for the different characteristics of contracts. As
>>> an example, the actual margin use for FDAX futures depends on volatility
>>> and price - it's not a plain price dependency.
>>>
>>> 'my two cent.
>>>
>>>
>>>
>>> On Thu, Nov 1, 2012 at 11:45 PM, Peter Carl <peter at braverock.com> wrote:
>>>
>>>>> Is there a way to account for margin size in blotter?
>>>> No, although it isn't outside the realm of possibilities some day.
>>>> Finding an enthusiastic author of such code has been, well, difficult.
>>>>
>>>>> If not, can you think of a way to "cheat" that into the current system?
>>>> As a quick but perhaps impractical solution, you could export your
>>>> positions to an external span engine.  Barring that possibility, I'd say
>>>> that you can do some back of the envelope calculations based on positions
>>>> and transactions kept in blotter to estimate margin use if you need.
>>>>
>>>> Contributions would be welcome, of course.
>>>>
>>>> pcc
>>>> --
>>>> Peter Carl
>>>> http://www.braverock.com/peter
>>>>
>>>>>   I've run into an issue with the blotter package that may be significant.
>>>>>
>>>>> When buying and selling futures, the full contract value is NEVER paid.
>>>> It is normal practice to simply pay the margin.  For example, a single
>>>> contract of corn is for 5,000 bushels.  At $5.00 per bushel, that is a
>>>> $25,000 contract.  However, the amount actually paid to a broker is
>>>> around $2,000.
>>>>>
>>>>> This is an issue when designing and testing trading systems.  If I have
>>>> a fictional fund of $1,000,000 and want to buy 20 contracts of corn,
>>>> real life cash outflow would be around $40,000.  However, with blotter
>>>> it would be $500,000, which is 1/2 of my portfolio. That quickly kills a
>>>> lot of trading strategies and testing.
>>>>>
>>>>> Is there a way to account for margin size in blotter?
>>>>> If not, can you think of a way to "cheat" that into the current system?
>>>>>
>>>>>
>>>>> --
>>>>> Noah Silverman, M.S.
>>>>> UCLA Department of Statistics
>>>>> 8117 Math Sciences Building
>>>>> Los Angeles, CA 90095
>>>>>
>>>>> _______________________________________________
>>>>> R-SIG-Finance at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>> -- Subscriber-posting only. If you want to post, subscribe first. --
>>>> Also note that this is not the r-help list where general R questions
>>>> should go.
>>>>>
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions
>>>> should go.
>>>>
>>>
>>>
>>>
>>
>>
>> --
>> Brian G. Peterson
>> http://braverock.com/brian/
>> Ph: 773-459-4973
>> IM: bgpbraverock
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From jaimie.villanueva at gmail.com  Fri Nov  2 11:56:48 2012
From: jaimie.villanueva at gmail.com (jaimie villanueva)
Date: Fri, 2 Nov 2012 11:56:48 +0100
Subject: [R-SIG-Finance] Regime Switching models
Message-ID: <CAEXmNQAFc2-y_tpY6-RDiEKvbqtHk7bp7WrUmoo1uxr5OYRD2Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121102/6f5772d9/attachment.pl>

From ben.schreiber58 at gmail.com  Fri Nov  2 12:20:19 2012
From: ben.schreiber58 at gmail.com (ben schreiber)
Date: Fri, 2 Nov 2012 13:20:19 +0200
Subject: [R-SIG-Finance] stochastic volatility and jumps
Message-ID: <CAMK0RkvTaS4F8PqFTD1_RAG9o5CWx7RQD8bGduJkURxLNsGgQw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121102/20645931/attachment.pl>

From rharlow86 at gmail.com  Fri Nov  2 12:28:55 2012
From: rharlow86 at gmail.com (Robert Harlow)
Date: Fri, 2 Nov 2012 07:28:55 -0400
Subject: [R-SIG-Finance] Regime Switching models
In-Reply-To: <CAEXmNQAFc2-y_tpY6-RDiEKvbqtHk7bp7WrUmoo1uxr5OYRD2Q@mail.gmail.com>
References: <CAEXmNQAFc2-y_tpY6-RDiEKvbqtHk7bp7WrUmoo1uxr5OYRD2Q@mail.gmail.com>
Message-ID: <CAHdfS97wcsCDe3JKHko8Pq8=gygU-QheMGWVz3+7BRRxaWgcmw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121102/06160362/attachment.pl>

From zfyuan at mail.ustc.edu.cn  Fri Nov  2 13:59:42 2012
From: zfyuan at mail.ustc.edu.cn (=?GBK?B?1KzV8bfJ?=)
Date: Fri, 2 Nov 2012 20:59:42 +0800 (CST)
Subject: [R-SIG-Finance] smoothing quarterly data and extract data on each
	day
Message-ID: <21036538.1716801351861182511.JavaMail.coremail@mailweb>

Hi,?everybody

I?have?a?quarterly?zoo?object?named "dat1" as below.?xyplot(dat1)?and?xyplot(dat1,type="smooth")?may?
obtain?both?original?and?smoothed?plot,?and?these?two?plots?are?just?what?I?need,?however?I?also
need?those?smoothed?values?on?each?day,?and?I?have?no?idea?how?to?extract?from?the?smoothed?curve.
I?think?there?must?be?some?convinent?way?to?deal?with?this?kind?of?problem. Anyone knows about it?

Thanks a lot!

>?dat1
X1???????X2???????X3???????X4????????X5
2008?Q1?3482.858?1250.236?3548.769?4931.883??497.3590
2008?Q2?3531.582?1355.288?3645.622?5054.060??524.8273
2008?Q3?3783.050?1380.224?3719.840?4827.296??626.0529
2008?Q4?4372.995?1565.386?3827.486?5014.124??769.9170
2009?Q1?4485.311?1778.264?4486.163?5759.063??891.0500
2009?Q2?4506.971?1920.969?4704.324?6026.117??934.0728
2009?Q3?4791.432?1904.100?4837.732?6101.084??884.6493
2009?Q4?5393.146?1917.826?4971.702?6178.358??888.6124
2010?Q1?5377.333?2034.175?5222.298?6620.797??918.8237
2010?Q2?5651.565?2117.686?5273.992?6789.510??964.9723
2010?Q3?5905.428?2138.144?5382.343?6959.202?1107.4141
2010?Q4?6420.900?2248.762?5485.862?7003.115?1228.2340
2011?Q1?6595.900?2328.679?5745.658?7567.216?1284.2346
2011?Q2?6679.854?2474.070?5973.663?7920.905?1430.5884
2011?Q3?6523.676?2473.112?6016.118?8057.043?1479.7814
2011?Q4?7195.303?2632.994?6337.770?8259.334?1582.4205
2012?Q1?7137.809?2824.209?6950.471?8969.470?1647.5123
2012?Q2?7084.198?2989.912?6997.699?9314.090?1798.0352



------------
Zhenfei Yuan <zfyuan at mail.ustc.edu.cn>


From ggrothendieck at gmail.com  Fri Nov  2 15:33:59 2012
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 2 Nov 2012 10:33:59 -0400
Subject: [R-SIG-Finance] smoothing quarterly data and extract data on
	each day
In-Reply-To: <21036538.1716801351861182511.JavaMail.coremail@mailweb>
References: <21036538.1716801351861182511.JavaMail.coremail@mailweb>
Message-ID: <CAP01uR=5CyufcwEeCKg7W7XTmuDzNe3pYnDQh6DVS6Jqz1+5+Q@mail.gmail.com>

On Fri, Nov 2, 2012 at 8:59 AM, ??? <zfyuan at mail.ustc.edu.cn> wrote:
> Hi, everybody
>
> I have a quarterly zoo object named "dat1" as below. xyplot(dat1) and xyplot(dat1,type="smooth") may
> obtain both original and smoothed plot, and these two plots are just what I need, however I also
> need those smoothed values on each day, and I have no idea how to extract from the smoothed curve.
> I think there must be some convinent way to deal with this kind of problem. Anyone knows about it?
>
> Thanks a lot!
>
>> dat1
> X1       X2       X3       X4        X5
> 2008 Q1 3482.858 1250.236 3548.769 4931.883  497.3590
> 2008 Q2 3531.582 1355.288 3645.622 5054.060  524.8273
> 2008 Q3 3783.050 1380.224 3719.840 4827.296  626.0529
> 2008 Q4 4372.995 1565.386 3827.486 5014.124  769.9170
> 2009 Q1 4485.311 1778.264 4486.163 5759.063  891.0500
> 2009 Q2 4506.971 1920.969 4704.324 6026.117  934.0728
> 2009 Q3 4791.432 1904.100 4837.732 6101.084  884.6493
> 2009 Q4 5393.146 1917.826 4971.702 6178.358  888.6124
> 2010 Q1 5377.333 2034.175 5222.298 6620.797  918.8237
> 2010 Q2 5651.565 2117.686 5273.992 6789.510  964.9723
> 2010 Q3 5905.428 2138.144 5382.343 6959.202 1107.4141
> 2010 Q4 6420.900 2248.762 5485.862 7003.115 1228.2340
> 2011 Q1 6595.900 2328.679 5745.658 7567.216 1284.2346
> 2011 Q2 6679.854 2474.070 5973.663 7920.905 1430.5884
> 2011 Q3 6523.676 2473.112 6016.118 8057.043 1479.7814
> 2011 Q4 7195.303 2632.994 6337.770 8259.334 1582.4205
> 2012 Q1 7137.809 2824.209 6950.471 8969.470 1647.5123
> 2012 Q2 7084.198 2989.912 6997.699 9314.090 1798.0352
>

Try this:

library(zoo)
library(lattice)
set.seed(123)
z <- zooreg(matrix(rnorm(50), 10), as.yearqtr(2008), freq = 4)

tt <- time(z)
zoo(sapply(z, function(z) loess.smooth(tt, z, eval = length(tt))$y), tt)

-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From pietrader at gmail.com  Sun Nov  4 07:20:25 2012
From: pietrader at gmail.com (Pie T)
Date: Sat, 3 Nov 2012 23:20:25 -0700
Subject: [R-SIG-Finance] Question regarding PerformanceAnalytics - "endof"
 and "lastof" in to.weekly(..) function
Message-ID: <CAG5Ec03+irT_8drqc-GOwfXAKLge-uwJ4jgqmygfjNz3YbfmAw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121103/7365214c/attachment.pl>

From brian at braverock.com  Sun Nov  4 13:32:20 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 04 Nov 2012 06:32:20 -0600
Subject: [R-SIG-Finance] Question regarding PerformanceAnalytics -
 "endof" and "lastof" in to.weekly(..) function
In-Reply-To: <CAG5Ec03+irT_8drqc-GOwfXAKLge-uwJ4jgqmygfjNz3YbfmAw@mail.gmail.com>
References: <CAG5Ec03+irT_8drqc-GOwfXAKLge-uwJ4jgqmygfjNz3YbfmAw@mail.gmail.com>
Message-ID: <50966054.6040707@braverock.com>

On 11/04/2012 01:20 AM, Pie T wrote:
> Hi,
> What is the difference between "endof" and "lastof" keywords in to.weekly()
> and to.monthly functions?

to.period (and the wrappers to.weekly and to.monthly) are provided by 
xts, not PerformanceAnalytics.

While 'startof' and 'endof' are discussed at the beginning of to.period, 
it looks from the code like only 'firstof' and 'lastof' are actually 
*used*.  So, until we sort out the discrepancy, just use 'firstof' and 
'lastof' if you absolutely need to pass a value here (but it's not clear 
that you do, see below).

> example: SPY = to.weekly(SPY, indexAt='endof', drop.time=FALSE)
>
> Context:
> I was getting duplicate index values in blotter account object for summary
> i.e., getAccount(..)$summary. The source of the error finally turned out to
> be  usage of "lastof" in to.weekly(..) function in PerformanceAnalytics. If
> I use "endof" that seems to take care of the problem.

to.period, by default, will take the last observation in the period, so 
these extra options shouldn't be necessary in most cases anyway.  That 
is, you shouldn't have to pass an indexAt argument at all for the 
application you're describing.

> On another note, currently to simulate equal asset weighting,  I track the
> account capital and compute the quantity for each transaction in my program
> before adding to portfolio. I am  wondering is there any API in
> blotter/performance analytics where I can just provide weights for each
> asset, initial capital and list of  transactions with quantity as 1 and the
> rest is taken care automatically by an R package?

You're kind of mixing two paradigms.

If you're dealing with weights and returns, then the 
PerformanceAnalytics function Return.portfolio can do periodic 
rebalancing, skipping the 'transactions' and 'prices' steps entirely. 
If all you want to do is sort out the net return of a periodically 
rebalanced equal weight portfolio (or any periodically rebalanced 
portfolio), then using Return.portfolio will be the simplest thing.

If you want to deal with transactions in blotter and get cash results by 
performing rebalancing trades to adjust the portfolio, then there is 
currently no function for doing this in blotter (which deals with 
transaction accounting).  If you've already written code to extract 
weights from blotter and generate difference transactions to get to a 
new target weight, it would be nice if you would contribute that code to 
the dev team.  It's been on my list, but hasn't gotten anywhere near the 
top of that list.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From pietrader at gmail.com  Sun Nov  4 19:18:32 2012
From: pietrader at gmail.com (Pie T)
Date: Sun, 4 Nov 2012 10:18:32 -0800
Subject: [R-SIG-Finance] Question regarding PerformanceAnalytics -
 "endof" and "lastof" in to.weekly(..) function
Message-ID: <CAG5Ec03yn4sRi9MUmyoPHmOTp5CwPtg1qRAJSWkOfnzaGRGKqA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121104/7eeba01c/attachment.pl>

From evelynpax at yahoo.com  Tue Nov  6 15:45:10 2012
From: evelynpax at yahoo.com (Evelyn Nyamadi)
Date: Tue, 6 Nov 2012 06:45:10 -0800 (PST)
Subject: [R-SIG-Finance] Rugarch
Message-ID: <1352213110.57027.YahooMailNeo@web39406.mail.mud.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121106/db537964/attachment.pl>

From evelynpax at yahoo.com  Wed Nov  7 16:32:52 2012
From: evelynpax at yahoo.com (Evelyn Nyamadi)
Date: Wed, 7 Nov 2012 07:32:52 -0800 (PST)
Subject: [R-SIG-Finance] Rugarch:garch estimates
Message-ID: <1352302372.42493.YahooMailNeo@web39405.mail.mud.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121107/85455ae4/attachment.pl>

From alexios at 4dscape.com  Wed Nov  7 17:08:46 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Wed, 07 Nov 2012 16:08:46 +0000
Subject: [R-SIG-Finance] Rugarch:garch estimates
In-Reply-To: <1352302372.42493.YahooMailNeo@web39405.mail.mud.yahoo.com>
References: <1352302372.42493.YahooMailNeo@web39405.mail.mud.yahoo.com>
Message-ID: <509A878E.8040000@4dscape.com>

Any probability model is unlikely to be the true DGP, but rather an 
approximation to it...which is why White (1982) suggested the use
of the "robust" standard errors since they give asymptotically valid
confidence intervals for the 'approximate-model' parameters, minimizing
the information distance between the true probability measure and the
quasi-likelihood...all of which is available in any standard 
econometrics textbook...as to what to consider, it depends on what
you want to do. There are a host of other tests which are displayed
in the summary which should provide further guidance about which model
to choose (e.g. sign bias) or distribution (gof test).

Note that h/w questions should not be posted to this forum, and
posting the same message more than once is considered rude.

-Alexios


On 07/11/2012 15:32, Evelyn Nyamadi wrote:
> Dear All,
> Please, I am using the rugarch package for a univariate garch
> estimation. I learnt the optimal parameter estimation is based on MLE
> and the Robust standard error is based on QMLE. However, I have problem
> with choice of model since the MLE yields significant estimates and the
> QMLE yields insignificant estimates for some models but not all.
> Actually, I consider sGARCH, EGARCH and TGARCH.
> Please, any assistance as to how to proceed further to select the best
> models? Should I consider the result based on the MLE only or QMLE.
> Hope to hear from you all
> regards,
> Evelyn


From costas.vorlow at gmail.com  Thu Nov  8 11:46:02 2012
From: costas.vorlow at gmail.com (Costas Vorlow)
Date: Thu, 8 Nov 2012 12:46:02 +0200
Subject: [R-SIG-Finance] RGoogleTrends vs Google
Message-ID: <CABfqsR-1edjsU0-DjsOFXOwjoUo5v6oacmYbhZOFHnyKGCBy5Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121108/8598452a/attachment.pl>

From brian at braverock.com  Thu Nov  8 12:03:32 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 08 Nov 2012 05:03:32 -0600
Subject: [R-SIG-Finance] RGoogleTrends vs Google
In-Reply-To: <CABfqsR-1edjsU0-DjsOFXOwjoUo5v6oacmYbhZOFHnyKGCBy5Q@mail.gmail.com>
References: <CABfqsR-1edjsU0-DjsOFXOwjoUo5v6oacmYbhZOFHnyKGCBy5Q@mail.gmail.com>
Message-ID: <509B9184.4010606@braverock.com>

On 11/08/2012 04:46 AM, Costas Vorlow wrote:
> I am getting entirely different data from the website of google trends and
> the RGoogleTrends for R.

What, if anything, does this have to do with finance?

As far as I know, Duncan (the author of RGoogleTrends) is not on this list.

The 'example' you posted in your query was also unintelligible.

I'd recommend creating a fully reproducible example, per the posting 
guide, and finding a more appropriate venue for your question.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From ludovic.theate at gmail.com  Thu Nov  8 14:43:00 2012
From: ludovic.theate at gmail.com (ludovic.theate)
Date: Thu, 8 Nov 2012 05:43:00 -0800 (PST)
Subject: [R-SIG-Finance] rugarch and copulas
In-Reply-To: <D053C44A-294D-4EF5-98CF-287361C75340@4dscape.com>
References: <CA+TVX6td_AEC-tQ=Ne8d6p27xd3uZf4Eo=nrvye49PNa4FVRYw@mail.gmail.com>
	<D053C44A-294D-4EF5-98CF-287361C75340@4dscape.com>
Message-ID: <1352382180344-4648880.post@n4.nabble.com>

Thanks for your answer, and sorry for the long delay.

OK, I am now giving a try to this cgarchfit function. However, as I can see,
it works only (for the moment) with Gaussian and t-copulas. But I would like
to have access to a more complete panoply of copulas models, including
nested-archimedean copulas (even vines if time permits). So I am still
interested to know how I could specify the innovations in the Garch
prediction function of the rugarch package ?

Thanks for your help.



--
View this message in context: http://r.789695.n4.nabble.com/rugarch-and-copulas-tp4647300p4648880.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Thu Nov  8 16:07:30 2012
From: alexios at 4dscape.com (Alexios Ghalanos)
Date: Thu, 8 Nov 2012 15:07:30 +0000
Subject: [R-SIG-Finance] rugarch and copulas
In-Reply-To: <1352382180344-4648880.post@n4.nabble.com>
References: <CA+TVX6td_AEC-tQ=Ne8d6p27xd3uZf4Eo=nrvye49PNa4FVRYw@mail.gmail.com>
	<D053C44A-294D-4EF5-98CF-287361C75340@4dscape.com>
	<1352382180344-4648880.post@n4.nabble.com>
Message-ID: <E62E5268-0C99-49DF-AFFA-969AF78563D5@4dscape.com>

1. Open the source package and see how the normal and student models are used in combination with GARCH...that should provide you with an idea of how to combine the two.
2. Read the vignette which contains additional details on the models with additional references.
3. Search this forum for an old reply to a similar question.

-Alexios

Sent from my iPhone

On Nov 8, 2012, at 13:43, "ludovic.theate" <ludovic.theate at gmail.com> wrote:

> Thanks for your answer, and sorry for the long delay.
> 
> OK, I am now giving a try to this cgarchfit function. However, as I can see,
> it works only (for the moment) with Gaussian and t-copulas. But I would like
> to have access to a more complete panoply of copulas models, including
> nested-archimedean copulas (even vines if time permits). So I am still
> interested to know how I could specify the innovations in the Garch
> prediction function of the rugarch package ?
> 
> Thanks for your help.
> 
> 
> 
> --
> View this message in context: http://r.789695.n4.nabble.com/rugarch-and-copulas-tp4647300p4648880.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From ludovic.theate at gmail.com  Thu Nov  8 16:33:04 2012
From: ludovic.theate at gmail.com (ludovic.theate)
Date: Thu, 8 Nov 2012 07:33:04 -0800 (PST)
Subject: [R-SIG-Finance] rugarch and copulas
In-Reply-To: <E62E5268-0C99-49DF-AFFA-969AF78563D5@4dscape.com>
References: <CA+TVX6td_AEC-tQ=Ne8d6p27xd3uZf4Eo=nrvye49PNa4FVRYw@mail.gmail.com>
	<D053C44A-294D-4EF5-98CF-287361C75340@4dscape.com>
	<1352382180344-4648880.post@n4.nabble.com>
	<E62E5268-0C99-49DF-AFFA-969AF78563D5@4dscape.com>
Message-ID: <1352388784479-4648902.post@n4.nabble.com>

Alexios,

Thanks for your reply.

Unfortunately, I do not have so much time to spend on this problem and as I
see, the rmgarch package has become quite complex. So I think I will
continue for the moment using the fgarch package which is more accessible
and would provide me an easier way to deal with other copulas than the
elliptic one.

However, I will of course keep an eye on your package and I am looking
forward to being able to use the cgarchsim function with other copulas, e.g.
archimedean copulas.

Thanks again,

Regards,

Ludovic



--
View this message in context: http://r.789695.n4.nabble.com/rugarch-and-copulas-tp4647300p4648902.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From ludovic.theate at gmail.com  Fri Nov  9 11:29:38 2012
From: ludovic.theate at gmail.com (ludovic.theate)
Date: Fri, 9 Nov 2012 02:29:38 -0800 (PST)
Subject: [R-SIG-Finance] rugarch and copulas
In-Reply-To: <1352388784479-4648902.post@n4.nabble.com>
References: <CA+TVX6td_AEC-tQ=Ne8d6p27xd3uZf4Eo=nrvye49PNa4FVRYw@mail.gmail.com>
	<D053C44A-294D-4EF5-98CF-287361C75340@4dscape.com>
	<1352382180344-4648880.post@n4.nabble.com>
	<E62E5268-0C99-49DF-AFFA-969AF78563D5@4dscape.com>
	<1352388784479-4648902.post@n4.nabble.com>
Message-ID: <1352456978625-4649023.post@n4.nabble.com>

Hi Alexios,

Things are often clearer in the morning, and I think I changed a little bit
my mind about what I said yesterday. I really do not like the fgarch
package, since there is no well defined link between the fit and the
simulation methods. I clearly prefer the architecture spec -> fit -> sim you
use in rugarch.

So I decided to give another try, and I just would like to ask to you (and
of course the other people following this list) if you could approve/amend
the following approach :

1)	I filter the data using an univariate rugarch model for each currency I
am modelling.
2)	I evaluate the standardized residuals using ?residuals(fit)/sigma(fit)?
as explained in a previous threat.
3)	I transform them into uniform using either the ranks, or using a
parametric approach you described in the thread I was talking about.
Unfortunately, I am not sure I understand your explanation (?extracting any
conditional higher moment parameters from the GARCH fitted object and pass
those with the standardized residuals to the "pdist" function of rugarch
indicating the distribution used?). Could you explain with a little more
details please ?
4)	With this matrix of uniform marginals, I am able to fit the copulas I am
interested in (even nested, or vine ones), compare them, make tests, and
choose the most appropriate one.
5)	Using this copula, I can generate a random n_currencies x n_simulations x
n_horizon matrix containing the innovations.
6)	Then, if I?ve correctly understood, I can simply plug each row (for each
currency) of this matrix inside the ? custom.dist = list(name = NA, distfit
= NA) ? option of ugarchsim and simulate the trajectories. Is it correct ?
If I made this for each currencies, I will get correlated sample
trajectories.

Do you think this kind of algorithm is correct ? Once again, thanks for your
help.

Regards,

Ludovic




--
View this message in context: http://r.789695.n4.nabble.com/rugarch-and-copulas-tp4647300p4649023.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Fri Nov  9 12:12:33 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Fri, 09 Nov 2012 11:12:33 +0000
Subject: [R-SIG-Finance] rugarch and copulas
In-Reply-To: <1352456978625-4649023.post@n4.nabble.com>
References: <CA+TVX6td_AEC-tQ=Ne8d6p27xd3uZf4Eo=nrvye49PNa4FVRYw@mail.gmail.com>
	<D053C44A-294D-4EF5-98CF-287361C75340@4dscape.com>
	<1352382180344-4648880.post@n4.nabble.com>
	<E62E5268-0C99-49DF-AFFA-969AF78563D5@4dscape.com>
	<1352388784479-4648902.post@n4.nabble.com>
	<1352456978625-4649023.post@n4.nabble.com>
Message-ID: <509CE521.1000205@4dscape.com>

Hi,

1. ok, you fit a GARCH model to each series (filter in rugarch means
you supply a pre-defined set of parameters without fitting).

2. Since version 1.0-12., you can use residuals(fit, standardize = 
TRUE). R-forge has 1.0-13 which is more up to date.

3. You have 3 choices for the transformation:
a. Empirical (ranks) -> Genest 1985 (Pseudo-Likelihood),
b. Semi-Parametric -> Davison and Smith (1990) (e.g. spd package),
c. Parametric -> Joe (1987) (Inference-Functions-for-Margins).
The rmgarch vignette contains details on the methods and relevant 
references.

 >args(pdist)
function(distribution = "norm", q, mu = 0, sigma = 1, lambda = -0.5,
     skew = 1, shape = 5)

Since you are passing (0,1) residuals, mu=0 and sigma = 1, but depending 
on what conditional distribution you used to fit the univariate GARCH 
models you will need to provide the additional parameters
e.g. from the "coef(fit)" you will have a shape and skew parameter if 
you fitted a distribution which has these parameters.

You will likely also find the code below useful once you have 
transformed your residuals into uniform variates:

# make tail adjustments in order to avoid problem with the quantile
# functions in optimization
if(any(UniformResiduals > 0.99999)){
ix = which(UniformResiduals > 0.99999)
UniformResiduals [ix] = 0.99999
}
if(any(UniformResiduals < .Machine$double.eps)){
ix = which(UniformResiduals < (1.5*.Machine$double.eps))
UniformResiduals [ix] = .Machine$double.eps
}


4./5 Correct

6. Incorrect. You first need to do a "reverse-transform" of the copula 
simulated values by using the qdist (quantile) function. THEN you plug 
in to the custom.dist function. These are now dependent (in the cross 
section) standardized residuals.

Note that this topic was also covered here:
http://r.789695.n4.nabble.com/Copula-in-R-td928826.html

As to the correctness of this approach, I would say it is a valid 
method, which adopts a 2/3 stage compromise rather than a full 1-stage 
ML approach which would be computationally forbidding. In the rmgarch
package, things are done slightly differently since the focus is on
using DCC based modelling with elliptical copulas (although the non-DCC
approach is also allowed).

Hope that clarifies.

-Alexios

On 09/11/2012 10:29, ludovic.theate wrote:
> Hi Alexios,
>
> Things are often clearer in the morning, and I think I changed a little bit
> my mind about what I said yesterday. I really do not like the fgarch
> package, since there is no well defined link between the fit and the
> simulation methods. I clearly prefer the architecture spec -> fit -> sim you
> use in rugarch.
>
> So I decided to give another try, and I just would like to ask to you (and
> of course the other people following this list) if you could approve/amend
> the following approach :
>
> 1)	I filter the data using an univariate rugarch model for each currency I
> am modelling.
> 2)	I evaluate the standardized residuals using ?residuals(fit)/sigma(fit)?
> as explained in a previous threat.
> 3)	I transform them into uniform using either the ranks, or using a
> parametric approach you described in the thread I was talking about.
> Unfortunately, I am not sure I understand your explanation (?extracting any
> conditional higher moment parameters from the GARCH fitted object and pass
> those with the standardized residuals to the "pdist" function of rugarch
> indicating the distribution used?). Could you explain with a little more
> details please ?
> 4)	With this matrix of uniform marginals, I am able to fit the copulas I am
> interested in (even nested, or vine ones), compare them, make tests, and
> choose the most appropriate one.
> 5)	Using this copula, I can generate a random n_currencies x n_simulations x
> n_horizon matrix containing the innovations.
> 6)	Then, if I?ve correctly understood, I can simply plug each row (for each
> currency) of this matrix inside the ? custom.dist = list(name = NA, distfit
> = NA) ? option of ugarchsim and simulate the trajectories. Is it correct ?
> If I made this for each currencies, I will get correlated sample
> trajectories.
>
> Do you think this kind of algorithm is correct ? Once again, thanks for your
> help.
>
> Regards,
>
> Ludovic
>
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/rugarch-and-copulas-tp4647300p4649023.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From ludovic.theate at gmail.com  Fri Nov  9 13:24:26 2012
From: ludovic.theate at gmail.com (ludovic.theate)
Date: Fri, 9 Nov 2012 04:24:26 -0800 (PST)
Subject: [R-SIG-Finance] rugarch and copulas
In-Reply-To: <509CE521.1000205@4dscape.com>
References: <CA+TVX6td_AEC-tQ=Ne8d6p27xd3uZf4Eo=nrvye49PNa4FVRYw@mail.gmail.com>
	<D053C44A-294D-4EF5-98CF-287361C75340@4dscape.com>
	<1352382180344-4648880.post@n4.nabble.com>
	<E62E5268-0C99-49DF-AFFA-969AF78563D5@4dscape.com>
	<1352388784479-4648902.post@n4.nabble.com>
	<1352456978625-4649023.post@n4.nabble.com>
	<509CE521.1000205@4dscape.com>
Message-ID: <1352463866884-4649042.post@n4.nabble.com>

Hi Alexios,

It is really better than just clarification, your help is really precious
and appreciated. Thanks.

Just a remark concerning point 5. It was just a lack of precision from my
side, since in the actual version of the model, I am already using the
command

copulaSpec <- mvdc(calibration$t.copula, calibration$models,sstdSpec)

to do what you call the "reverse-transform".

In a (near ?) future, I plan to try to understand all these multivariate
models you are providing in your rmgarch package (especially the DCC ones),
but for the moment, I will deal only with copula-garch models.

Once again, thank you very much, and have a nice weekend,

Ludovic



--
View this message in context: http://r.789695.n4.nabble.com/rugarch-and-copulas-tp4647300p4649042.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From michael.weylandt at gmail.com  Fri Nov  9 15:39:29 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Fri, 9 Nov 2012 14:39:29 +0000
Subject: [R-SIG-Finance] [R] (no subject)
In-Reply-To: <CAHXA6ruNt_RW8SgxeqNA0_7+Phz3TXMugn-KVrz9gCD_YMqMPA@mail.gmail.com>
References: <CAHXA6ruNt_RW8SgxeqNA0_7+Phz3TXMugn-KVrz9gCD_YMqMPA@mail.gmail.com>
Message-ID: <CAAmySGMo-aA_PbYiDZZgdwkhXzZCLWdPeL1-4R5pVth8J7JjkQ@mail.gmail.com>

Forwarding to the relevant list.

MW

On Fri, Nov 9, 2012 at 9:01 AM, Manasvi Dobhal <manasvidobhal at gmail.com> wrote:
> Hi all,
> The TWS on my system is unable to connect to my R session. Here is the
> error that I'm getting:
>
> *> tws<-twsConnect()
> Error in socketConnection(host = host, port = port, open = "ab", blocking =
> blocking) :
> cannot open the connection
> In addition: Warning message:
> In socketConnection(host = host, port = port, open = "ab", blocking =
> blocking) :
> localhost:7496 cannot be opened*
>
> Here is the session info for the R session:
>
> *R version 2.15.1 (2012-06-22)*
> **
>
> *Platform: x86_64-pc-linux-gnu (64-bit)*
>
> **
>
> *locale:*
>
> * [1] LC_CTYPE=en_IN.UTF-8LC_NUMERIC=C*
>
> * [3] LC_TIME=en_IN.UTF-8LC_COLLATE=en_IN.UTF-8*
>
> * [5] LC_MONETARY=en_IN.UTF-8LC_MESSAGES=en_IN.UTF-8*
>
> * [7] LC_PAPER=CLC_NAME=C*
>
> * [9] LC_ADDRESS=CLC_TELEPHONE=C*
>
> *[11] LC_MEASUREMENT=en_IN.UTF-8 LC_IDENTIFICATION=C*
>
> * *
>
> *attached base packages:*
>
> *[1] statsgraphicsgrDevices utilsdatasets *
>
> *[6] methodsbase*
>
> * *
>
> *other attached packages:*
>
> *[1] IBrokers_0.9-10 xts_0.8-6zoo_1.7-8*
>
> * *
>
> *loaded via a namespace (and not attached):*
>
> *[1] grid_2.15.1lattice_0.20-0 tools_2.15.1*
>
> **
>
>
>
> I have checked the "Enable Activex and Socket clients"  but it hasn't
> helped. Since I'm running on an Ubuntu machine, I even tried changing the
> parameter *blocking *in the command *twsConnect() *to
>
> 1. *blocking = FALSE*
>
> 2. According to the one mentioned here
> http://code.google.com/p/ibrokers/source/detail?r=84&path=/trunk/R/twsConnect.R
>
> but nothing has helped.
>
>
>
> Please let me know what I should do.
>
>
>
> Thanks.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From gsee000 at gmail.com  Fri Nov  9 16:34:46 2012
From: gsee000 at gmail.com (G See)
Date: Fri, 9 Nov 2012 09:34:46 -0600
Subject: [R-SIG-Finance] [R] (no subject)
In-Reply-To: <CAAmySGMo-aA_PbYiDZZgdwkhXzZCLWdPeL1-4R5pVth8J7JjkQ@mail.gmail.com>
References: <CAHXA6ruNt_RW8SgxeqNA0_7+Phz3TXMugn-KVrz9gCD_YMqMPA@mail.gmail.com>
	<CAAmySGMo-aA_PbYiDZZgdwkhXzZCLWdPeL1-4R5pVth8J7JjkQ@mail.gmail.com>
Message-ID: <CA+xi=qZmWx=moJ34ApfZaGGR_ebP7xAQCAhH87ouBeXB9cgzbw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121109/94d72a9c/attachment.pl>

From michael.weylandt at gmail.com  Sat Nov 10 08:44:56 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Sat, 10 Nov 2012 07:44:56 +0000
Subject: [R-SIG-Finance] [R] (no subject)
In-Reply-To: <CAHXA6rvh=XMhknM817T1Z4KEKH3iMLG+PTfCACRjNDfTBDE45A@mail.gmail.com>
References: <CAHXA6ruNt_RW8SgxeqNA0_7+Phz3TXMugn-KVrz9gCD_YMqMPA@mail.gmail.com>
	<CAAmySGMo-aA_PbYiDZZgdwkhXzZCLWdPeL1-4R5pVth8J7JjkQ@mail.gmail.com>
	<CAHXA6rvh=XMhknM817T1Z4KEKH3iMLG+PTfCACRjNDfTBDE45A@mail.gmail.com>
Message-ID: <CAAmySGNXhDkUgw-ccYKoYYzz9-TUd=EO0ZV512b6J7pHNUp0Hg@mail.gmail.com>

Hi Manasvi,

Please keep your replies on the mailing list, or at least direct them
to the person with whom you're conversing should you have a good
reason to go off list.

It's also good form to include context in emails, so I've reassembled
your discussion with G.

When in doubt, use the "reply all" feature of your mail client.

Michael

On Sat, Nov 10, 2012 at 6:33 AM, Manasvi Dobhal <manasvidobhal at gmail.com> wrote:
> Yes, I did.

On Fri, Nov 9, 2012 at 3:34 PM, G See <gsee000 at gmail.com> wrote:
> Manasvi,
>
> Did you add 127.0.0.1 to "Trusted IP Addresses"?
>
> -Garrett
>
>

>> On Fri, Nov 9, 2012 at 9:01 AM, Manasvi Dobhal <manasvidobhal at gmail.com>
>> wrote:
>> > Hi all,
>> > The TWS on my system is unable to connect to my R session. Here is the
>> > error that I'm getting:
>> >
>> > *> tws<-twsConnect()
>> > Error in socketConnection(host = host, port = port, open = "ab",
>> > blocking =
>> > blocking) :
>> > cannot open the connection
>> > In addition: Warning message:
>> > In socketConnection(host = host, port = port, open = "ab", blocking =
>> > blocking) :
>> > localhost:7496 cannot be opened*
>> >
>> > Here is the session info for the R session:
>> >
>> > *R version 2.15.1 (2012-06-22)*
>> > **
>> >
>> > *Platform: x86_64-pc-linux-gnu (64-bit)*
>> >
>> > **
>> >
>> > *locale:*
>> >
>> > * [1] LC_CTYPE=en_IN.UTF-8LC_NUMERIC=C*
>> >
>> > * [3] LC_TIME=en_IN.UTF-8LC_COLLATE=en_IN.UTF-8*
>> >
>> > * [5] LC_MONETARY=en_IN.UTF-8LC_MESSAGES=en_IN.UTF-8*
>> >
>> > * [7] LC_PAPER=CLC_NAME=C*
>> >
>> > * [9] LC_ADDRESS=CLC_TELEPHONE=C*
>> >
>> > *[11] LC_MEASUREMENT=en_IN.UTF-8 LC_IDENTIFICATION=C*
>> >
>> > * *
>> >
>> > *attached base packages:*
>> >
>> > *[1] statsgraphicsgrDevices utilsdatasets *
>> >
>> > *[6] methodsbase*
>> >
>> > * *
>> >
>> > *other attached packages:*
>> >
>> > *[1] IBrokers_0.9-10 xts_0.8-6zoo_1.7-8*
>> >
>> > * *
>> >
>> > *loaded via a namespace (and not attached):*
>> >
>> > *[1] grid_2.15.1lattice_0.20-0 tools_2.15.1*
>> >
>> > **
>> >
>> >
>> >
>> > I have checked the "Enable Activex and Socket clients"  but it hasn't
>> > helped. Since I'm running on an Ubuntu machine, I even tried changing
>> > the
>> > parameter *blocking *in the command *twsConnect() *to
>> >
>> > 1. *blocking = FALSE*
>> >
>> > 2. According to the one mentioned here
>> >
>> > http://code.google.com/p/ibrokers/source/detail?r=84&path=/trunk/R/twsConnect.R
>> >
>> > but nothing has helped.


From ustaudinger at activequant.com  Sat Nov 10 10:22:39 2012
From: ustaudinger at activequant.com (Ulrich Staudinger)
Date: Sat, 10 Nov 2012 10:22:39 +0100
Subject: [R-SIG-Finance] AQ-R 0.1 available
Message-ID: <CAMrz3D3BJBb4Pt5XJ-vcFVrbvrccijjmQfyBxUgo0an-JNjd3g@mail.gmail.com>

Hi everyone,

I have the great pleasure to announce the release of AQ-R 0.1 [1].


Why is it relevant for R-SIG-Finance:

- Computational Finance deals a lot with time series data
- Computational Finance is also about storing and managing plenty of
reference data
- R-Sig-Finance is all about the intersect of R and Finance


What does AQ-R in principle do:
- it provides interfaces to the Open Source ActiveQuant Master Server
(a server based on HBase, HSQLDB, ActiveMQ - deployable in two
minutes)


What's the motivation behind AQ-R (and AQMS):

- several existing R extensions provide vendor specific solutions to
very similar issues
- very little extensions permit an easy way to trade from within R

- AQ-R (will) brings a complete solution to fetch and store time
series and reference data, to receive a live feed from an AQMS and to
issue and manage trades from within R

- The AQMS provides a unified view on this information, based on the
best technology available right now.
- AQMS is built on vendor neutral open source frameworks.
- AQMS bridges the language gap between C#, Java, R, Matlab, etc. by
providing unified language agnostic ways to store and share this
information, building on well established, easy-to-comprehend
communication protocols such as SOAP, CSV, HTTP, JMS.


Currently implemented features:
- Fetching and storing time series data into the AQMS (going
underneath to an HBase/Hadoop setup, etc.pp.)
    - this allows for example replicating or sharing data between two
AQMS instances [2]
- initializing the AQMS connection


Future plans:
- I am investigating how to to process live data in R, for getting the
live feeds and order events from an AQMS into R
   - for those like buzzwords, AQMS is of course a CEP ...
- The SOAP facade of AQMS will be made accessible from within AQ-R, so
that trades can be issued and maintained



I hope one or another on this list may find this useful.



Kind regards,
Ulrich



References:
[1] AQ-R, Available from:
http://cran.at.r-project.org/web/packages/aqr/index.html
[2] Accessing two AQMS at the same time, Available from:
http://activequant.org/r.html


--
Ulrich Staudinger

E: ustaudinger at activequant.com
http://www.activequant.com


From evelynpax at yahoo.com  Sat Nov 10 10:45:44 2012
From: evelynpax at yahoo.com (Evelyn Nyamadi)
Date: Sat, 10 Nov 2012 01:45:44 -0800 (PST)
Subject: [R-SIG-Finance] BDS TEST
Message-ID: <1352540744.88852.YahooMailNeo@web39402.mail.mud.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121110/5a632cee/attachment.pl>

From rbali at ufmg.br  Sat Nov 10 18:28:11 2012
From: rbali at ufmg.br (Robert Iquiapaza)
Date: Sat, 10 Nov 2012 15:28:11 -0200
Subject: [R-SIG-Finance] BDS TEST
In-Reply-To: <1352540744.88852.YahooMailNeo@web39402.mail.mud.yahoo.com>
References: <1352540744.88852.YahooMailNeo@web39402.mail.mud.yahoo.com>
Message-ID: <6F672475D03B48059A77AAD38D776BC9@DXPSPC>

?bds.test
http://bit.ly/QwCvgd
regards


-----Mensagem Original----- 
From: Evelyn Nyamadi
Sent: Saturday, November 10, 2012 7:45 AM
To: r-sig-finance at r-project.org
Subject: [R-SIG-Finance] BDS TEST

   Dear All,

Please, I carried out a bds test. Any references to help interpret this 
results.
regards,
Eve


     BDS Test

data:  Csvar

Embedding dimension =  2 3 4 5

Epsilon for close points =  0.1648 0.3297 0.4945 0.6594

Standard Normal =
      [ 0.1648 ] [ 0.3297 ] [ 0.4945 ] [ 0.6594 ]
[ 2 ]     3.3148     2.9082     2.5521     2.4263
[ 3 ]     2.3626     2.2866     2.3850     2.6955
[ 4 ]     2.6418     2.4784     2.5628     2.8879
[ 5 ]     2.8075     2.7720     2.7625     2.8041

p-value =
      [ 0.1648 ] [ 0.3297 ] [ 0.4945 ] [ 0.6594 ]
[ 2 ]     0.0009     0.0036     0.0107     0.0153
[ 3 ]     0.0181     0.0222     0.0171     0.0070
[ 4 ]     0.0082     0.0132     0.0104     0.0039
[ 5 ]     0.0050     0.0056     0.0057     0.0050
[[alternative HTML version deleted]]







_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions 
should go.


From bastian2507hk at yahoo.co.uk  Sat Nov 10 21:05:55 2012
From: bastian2507hk at yahoo.co.uk (Bastian Offermann)
Date: Sat, 10 Nov 2012 15:05:55 -0500
Subject: [R-SIG-Finance] DCC composite likelihood
Message-ID: <509EB3A3.9070503@yahoo.co.uk>


Hi everyone,

I want to estimate a standard DCC model by maximizing a composite 
likelihood function by optimizing over the function "comp" as shown in 
the code below. I want to get the optimal parameters alpha and beta for 
a set of 29 assets, i.e. 406 pairwise correlations. Each asset has 1019 
observations.

So what I am trying is basically the double for-loop in the function. 
Calculating the pairwise rho for each point in time and for each pair. 
CL here denotes the composite likelihood. I only want to have one alpha 
and one beta. The functional form is shown in eq. 2.8 on page 9/44 in 
the following paper: http://fic.wharton.upenn.edu/fic/papers/11/11-20.pdf

I guess it must be the for-loop since my optimization does not come to 
an end.

Thanks in advance.


----------------------------------------------------------------------------------------------------------------

library("stats")
library("rugarch")
library("moments")
library("tseries")
library("fGarch")
library("nlme")
library("fOptions")
library("NMOF")

res <- matrix(rnorm(1019*29, 1019, 29)   ## artificial data

comb <- combn(1:29, 2, FUN = NULL, simplify = TRUE)
comb.sq <- matrix(,1019,406)
comb.cr <- matrix(,1019,406)
for(j in 1:406) { comb.sq[,j] <- res[,comb[1,j]]^2 + res[,comb[2,j]]^2
                   comb.cr[,j] <- res[,comb[1,j]]*res[,comb[2,j]] 
}         ## only data manipulation

comp <- function(pars) {

alpha <- pars[1]
beta <- pars[2]
q11 <- matrix(,1019,406)
q12 <- matrix(,1019,406)
q22 <- matrix(,1019,406)
rho <- matrix(,1019,406)
rho12b <- matrix(,1,406)
like <- matrix(, 1019, 406)
CL <- NULL
comb <- combn(1:29, 2, FUN = NULL, simplify = TRUE)

q11[1,] <- 1         ## starting values for each qii, qij
q22[1,] <- 1
q12[1,] <- apply(comb.cr, 2, mean)
rho12b[1,] <- apply(comb.cr, 2, mean)
rho[1,] <- q12[1,]/sqrt(q11[1,]*q22[1,])

for(j in 1:406)  {     ## calculating time-varying pairwise correlation 
for each pair j and each point in time i
for(i in 2:1019) {


q11[i,j] <-  1 + alpha*(res[i-1,comb[1,j]]^2-1)+beta*(q11[i-1,j]-1)

q12[i,j] <- rho12b[1,j] + alpha*(comb.cr[i-1,j]-rho12b[1,j]) + 
beta*(q12[i-1,j]-rho12b[1,j])

q22[i,j] <- 1 + alpha*(res[i-1,comb[2,j]]^2-1) + beta*(q22[i-1,j]-1)

rho[i,j] <- q12[i,j]/sqrt(q11[i,j]*q22[i,j])

CL <- c(CL, 0.5*(log(1-rho[i,j]^2) + (comb.sq[i,j] - 
2*rho[i,j]*comb.cr[i,j])/(1-rho[i,j]^2)))

                   }
                   }
CL <- sum(CL)
return(CL)
                    }



const1 <- matrix(c(1,0,-1,0,1,-1), 3, 2)   # constraints for nonlinear 
optimization
const2 <- c(0.0001, 0.0001, -0.999)
constrOptim(c(0.1, 0.85), comp, NULL, ui=const1, ci=const2)


---------------------------------------------------------------------------------------------------

R version 2.14.1 (2011-12-22)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United 
States.1252    LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                           LC_TIME=English_United 
States.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods base

other attached packages:
  [1] NMOF_0.25-4           fOptions_2160.81 nlme_3.1-104          
fGarch_2110.80        fBasics_2160.85
  [6] MASS_7.3-16           timeSeries_2160.95 timeDate_2160.95      
tseries_0.10-29       zoo_1.7-7
[11] quadprog_1.5-4        moments_0.13 rugarch_1.0-11        
Rsolnp_1.12           truncnorm_1.0-5
[16] chron_2.3-42          numDeriv_2012.3-1 RcppArmadillo_0.3.4.0 
Rcpp_0.9.10           R.utils_1.16.2
[21] R.oo_1.9.9            R.methodsS3_1.4.2

loaded via a namespace (and not attached):
[1] grid_2.14.1      lattice_0.20-10  stabledist_0.6-4 tools_2.14.1


From josh.m.ulrich at gmail.com  Mon Nov 12 17:34:11 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 12 Nov 2012 10:34:11 -0600
Subject: [R-SIG-Finance] adjustOHLC discrepancy
In-Reply-To: <1351422860001-4647688.post@n4.nabble.com>
References: <CACAe89zcfG5fJSnjtvLGESLUpRT8iQpW_f=g0hGecNeOKTFrDw@mail.gmail.com>
	<CAPPM_gRdcoA4sqOXMyC+B=dbpkFP_FTQ=zO_=H-PG9hOR0CYpg@mail.gmail.com>
	<CACAe89wJoQ5jwJdS54K_CSsVO8ubk27hu1Wav1O1KNtoP3NjFA@mail.gmail.com>
	<CACAe89wcX=P9j8AVtH--ZA-unVtD2HNZg=Lx+Y6Y4dHmsLxOBw@mail.gmail.com>
	<CAPPM_gQB9_UHwmvkGmj2CFxdkWuMdBPNn=24JkeW7sfcE2kXfw@mail.gmail.com>
	<1351059936476-4647268.post@n4.nabble.com>
	<1351417749343-4647683.post@n4.nabble.com>
	<1351422860001-4647688.post@n4.nabble.com>
Message-ID: <CAPPM_gSV3BkmyjxNSCY=raGyKw0n+B6HCe1MnoKL3+a6J2t=wg@mail.gmail.com>

Hi Henry,

I've incorporated your patch(es) into quantmod, revision 585 on R-Forge.

Also, please note that R-SIG-Finance is a mailing list and Nabble does
not include the context of the discussion in your replies, which may
be frustrating for people who follow the list in their mail client and
not on Nabble.

Best,
--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


On Sun, Oct 28, 2012 at 6:14 AM, Henry Bee <henry.bee at gmail.com> wrote:
> Fixed another problem. There must be also be a dividend to unadjust.  Updated
> file attached.
>
> adjustOHLC.R <http://r.789695.n4.nabble.com/file/n4647688/adjustOHLC.R>
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/adjustOHLC-discrepancy-tp4643567p4647688.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From sethy.anmol at gmail.com  Wed Nov 14 04:44:59 2012
From: sethy.anmol at gmail.com (anmol sethy)
Date: Wed, 14 Nov 2012 11:44:59 +0800
Subject: [R-SIG-Finance] Date duplication while using Rbbg/Bdh
Message-ID: <CAMRMz7Kb7LSSXA3AJqFUcdaVpxEiSwUXan8Eh=upYTBO9py1Cg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121114/55606aa9/attachment.pl>

From jefe_goode at yahoo.com  Thu Nov 15 02:23:20 2012
From: jefe_goode at yahoo.com (jefe goode)
Date: Wed, 14 Nov 2012 17:23:20 -0800
Subject: [R-SIG-Finance] ggplot2 and equity timeseries plot.
Message-ID: <1352942600.45313.YahooMailNeo@web163406.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121114/7d1d4409/attachment.pl>

From josh.m.ulrich at gmail.com  Thu Nov 15 02:29:20 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Wed, 14 Nov 2012 19:29:20 -0600
Subject: [R-SIG-Finance] ggplot2 and equity timeseries plot.
In-Reply-To: <1352942600.45313.YahooMailNeo@web163406.mail.gq1.yahoo.com>
References: <1352942600.45313.YahooMailNeo@web163406.mail.gq1.yahoo.com>
Message-ID: <CAPPM_gS9JgCgpa4fS8nAiVMvhYGAEs4n7zOUpveS3sM516hFsQ@mail.gmail.com>

chartSeries (and chart_Series) in quantmod do this.  For example:

require(quantmod)
getSymbols("SPY")
chartSeries(SPY, subset="last 2 weeks")

Hope that helps,
--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


On Wed, Nov 14, 2012 at 7:23 PM, jefe goode <jefe_goode at yahoo.com> wrote:
> I have tried using ggplot2 and I cannot seem to obtain an adequate finance timeseries.
>
> What I need is the standard plot of, say S&P500 over say a two week period, which would contain 10 datapoints. But ggplot2 is including the weekends on the plot whereas I want to have the weekdays only plotted and still retain dates as the x-axis labels.
>
> There are a multitude of examples in the various manuals and R-blog's for non-finance style graphs, but none comment on the usual need to exclude days on which the exchanges are closed.
>
> Has anyone an example of a plot that does this?
>
> Thanks
>
> Jefe
>         [[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jefe_goode at yahoo.com  Thu Nov 15 03:25:34 2012
From: jefe_goode at yahoo.com (jefe goode)
Date: Wed, 14 Nov 2012 18:25:34 -0800
Subject: [R-SIG-Finance] ggplot2 and equity timeseries plot.
In-Reply-To: <CAPPM_gS9JgCgpa4fS8nAiVMvhYGAEs4n7zOUpveS3sM516hFsQ@mail.gmail.com>
References: <1352942600.45313.YahooMailNeo@web163406.mail.gq1.yahoo.com>
	<CAPPM_gS9JgCgpa4fS8nAiVMvhYGAEs4n7zOUpveS3sM516hFsQ@mail.gmail.com>
Message-ID: <1352946334.53477.YahooMailNeo@web163401.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121114/84183f99/attachment.pl>

From josh.m.ulrich at gmail.com  Thu Nov 15 03:32:27 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Wed, 14 Nov 2012 20:32:27 -0600
Subject: [R-SIG-Finance] ggplot2 and equity timeseries plot.
In-Reply-To: <1352946334.53477.YahooMailNeo@web163401.mail.gq1.yahoo.com>
References: <1352942600.45313.YahooMailNeo@web163406.mail.gq1.yahoo.com>
	<CAPPM_gS9JgCgpa4fS8nAiVMvhYGAEs4n7zOUpveS3sM516hFsQ@mail.gmail.com>
	<1352946334.53477.YahooMailNeo@web163401.mail.gq1.yahoo.com>
Message-ID: <CAPPM_gTdXp_CP2_Z0MJ=xcfQwC+ZPhhsyqmssPaTzn5aUScysg@mail.gmail.com>

On Wed, Nov 14, 2012 at 8:25 PM, jefe goode <jefe_goode at yahoo.com> wrote:
> Thanks Joshua, I do like quantmod, but I need to get this working in ggplot2
> for now.
>
Then I would recommend you ask on the ggplot2 mailing list.

> Jefe
> PS Can we get pdf output with quantmod?
>
You can plot to any device with chartSeries.  See ?pdf.

> From: Joshua Ulrich <josh.m.ulrich at gmail.com>
> To: jefe goode <jefe_goode at yahoo.com>
> Cc: r-sig-finance <r-sig-finance at stat.math.ethz.ch>
> Sent: Thursday, 15 November 2012, 1:29
> Subject: Re: [R-SIG-Finance] ggplot2 and equity timeseries plot.
>
> chartSeries (and chart_Series) in quantmod do this.  For example:
>
> require(quantmod)
> getSymbols("SPY")
> chartSeries(SPY, subset="last 2 weeks")
>
> Hope that helps,
> --
> Joshua Ulrich  |  about.me/joshuaulrich
> FOSS Trading  |  www.fosstrading.com
>
>
> On Wed, Nov 14, 2012 at 7:23 PM, jefe goode <jefe_goode at yahoo.com> wrote:
>> I have tried using ggplot2 and I cannot seem to obtain an adequate finance
>> timeseries.
>>
>> What I need is the standard plot of, say S&P500 over say a two week
>> period, which would contain 10 datapoints. But ggplot2 is including the
>> weekends on the plot whereas I want to have the weekdays only plotted and
>> still retain dates as the x-axis labels.
>>
>> There are a multitude of examples in the various manuals and R-blog's for
>> non-finance style graphs, but none comment on the usual need to exclude days
>> on which the exchanges are closed.
>>
>> Has anyone an example of a plot that does this?
>>
>> Thanks
>>
>> Jefe
>>        [[alternative HTML version deleted]]
>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>
>


From bonyoken at gmail.com  Thu Nov 15 13:22:16 2012
From: bonyoken at gmail.com (Kennedy Bonyo)
Date: Thu, 15 Nov 2012 15:22:16 +0300
Subject: [R-SIG-Finance] Obtaining finance data from live.mystocks.co.ke
Message-ID: <CACYrn42hBN5dhc=-OfG0XrOpBjPCE06V6cdjtHg-GT0ZcWpCHw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121115/806eee36/attachment.pl>

From mjenko at yahoo.com  Thu Nov 15 21:36:29 2012
From: mjenko at yahoo.com (Martin Jenkins)
Date: Thu, 15 Nov 2012 20:36:29 +0000 (GMT)
Subject: [R-SIG-Finance] Creating options call/put ratio indictor
Message-ID: <1353011789.71673.YahooMailNeo@web133106.mail.ir2.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121115/bbe407a9/attachment.pl>

From john.laing at gmail.com  Thu Nov 15 21:52:21 2012
From: john.laing at gmail.com (John Laing)
Date: Thu, 15 Nov 2012 15:52:21 -0500
Subject: [R-SIG-Finance] Date duplication while using Rbbg/Bdh
In-Reply-To: <CAMRMz7Kb7LSSXA3AJqFUcdaVpxEiSwUXan8Eh=upYTBO9py1Cg@mail.gmail.com>
References: <CAMRMz7Kb7LSSXA3AJqFUcdaVpxEiSwUXan8Eh=upYTBO9py1Cg@mail.gmail.com>
Message-ID: <CAA3Wa=sPgn44mObGzvmUb+KEzD6qeuMaLYkj1yEg=4MVvTNQmw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121115/f62ba7bd/attachment.pl>

From suzen at acm.org  Fri Nov 16 09:42:03 2012
From: suzen at acm.org (Suzen, Mehmet)
Date: Fri, 16 Nov 2012 09:42:03 +0100
Subject: [R-SIG-Finance] Obtaining finance data from live.mystocks.co.ke
In-Reply-To: <CACYrn42hBN5dhc=-OfG0XrOpBjPCE06V6cdjtHg-GT0ZcWpCHw@mail.gmail.com>
References: <CACYrn42hBN5dhc=-OfG0XrOpBjPCE06V6cdjtHg-GT0ZcWpCHw@mail.gmail.com>
Message-ID: <CAH=qh3MybHNFU34oO2uZMh9qFiWnROsrDsNPA+puS5RdLS_ogg@mail.gmail.com>

On Thu, Nov 15, 2012 at 1:22 PM, Kennedy Bonyo <bonyoken at gmail.com> wrote:
> Is it possible to obtain stock data from live.mystocks.co.ke using R?


Try RCurl


From ludovic.theate at gmail.com  Fri Nov 16 15:32:08 2012
From: ludovic.theate at gmail.com (ludovic.theate)
Date: Fri, 16 Nov 2012 06:32:08 -0800 (PST)
Subject: [R-SIG-Finance] PML and CML
Message-ID: <1353076328306-4649740.post@n4.nabble.com>

Hi everybody,

I am still dealing with Garch-Copula models, and I was wondering about the
difference between the Canonical Maximum Likelihood (CML) method and the
Pseudo Maximum Likelihood (PML) method. I think that these are two terms for
the same method, namely the method which firstly transform the marginal
distributions into uniform ones using the empirical cumulative distribution
function of each of them and then plugs these estimators into the
log-likelihood function which has to be maximized.

Could you confirm there is no difference between CML and PML ? Thanks.

Regards,

Ludovic



--
View this message in context: http://r.789695.n4.nabble.com/PML-and-CML-tp4649740.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From eric.thungstrom at gmail.com  Sun Nov 18 00:53:08 2012
From: eric.thungstrom at gmail.com (Eric Thungstom)
Date: Sat, 17 Nov 2012 18:53:08 -0500
Subject: [R-SIG-Finance] xtsExtra
Message-ID: <CACv3XEBVz-vmEB_xpqzVy=Y8H9MwBeaWdeJq7cgas=V6eyfLBw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121117/7e10c8d8/attachment.pl>

From gsee000 at gmail.com  Sun Nov 18 00:57:46 2012
From: gsee000 at gmail.com (G See)
Date: Sat, 17 Nov 2012 17:57:46 -0600
Subject: [R-SIG-Finance] xtsExtra
In-Reply-To: <CACv3XEBVz-vmEB_xpqzVy=Y8H9MwBeaWdeJq7cgas=V6eyfLBw@mail.gmail.com>
References: <CACv3XEBVz-vmEB_xpqzVy=Y8H9MwBeaWdeJq7cgas=V6eyfLBw@mail.gmail.com>
Message-ID: <CA+xi=qbTgDs5-4g=Xhdv6+AU07xPBAEuzzPdh_majoL80abx0Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121117/1b89ecb9/attachment.pl>

From michael.weylandt at gmail.com  Sun Nov 18 00:59:20 2012
From: michael.weylandt at gmail.com (Michael Weylandt)
Date: Sat, 17 Nov 2012 23:59:20 +0000
Subject: [R-SIG-Finance] xtsExtra
In-Reply-To: <CACv3XEBVz-vmEB_xpqzVy=Y8H9MwBeaWdeJq7cgas=V6eyfLBw@mail.gmail.com>
References: <CACv3XEBVz-vmEB_xpqzVy=Y8H9MwBeaWdeJq7cgas=V6eyfLBw@mail.gmail.com>
Message-ID: <D89AC770-AFC4-4A59-B981-BB2E7E3B9838@gmail.com>



On Nov 17, 2012, at 11:53 PM, Eric Thungstom <eric.thungstrom at gmail.com> wrote:

> Getting this message when I try to install xtsExtra.
> 
>> install.packages('xtsExtra', source = "http://r-forge.r-project.org")
> Installing package(s) into ?C:/PROGRA~1/R/R-212~1.0/library?
> (as ?lib? is unspecified)
> Warning in install.packages :
>  package ?xtsExtra? is not available
> 

I think the command is install.packages("xtsExtra", repos = " http://r-forge.r-project.org")

Cheers,
RMW

> Is there a problem with this package to where it's no longer available ?
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jefe_goode at yahoo.com  Mon Nov 19 01:17:17 2012
From: jefe_goode at yahoo.com (jefe goode)
Date: Sun, 18 Nov 2012 16:17:17 -0800 (PST)
Subject: [R-SIG-Finance] Yahoo data download
Message-ID: <1353284237.49075.YahooMailNeo@web163402.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121118/4a114bd7/attachment.pl>

From n-e-w at qtradr.net  Mon Nov 19 01:23:59 2012
From: n-e-w at qtradr.net (Nick)
Date: Mon, 19 Nov 2012 11:23:59 +1100
Subject: [R-SIG-Finance] Yahoo data download
In-Reply-To: <1353284237.49075.YahooMailNeo@web163402.mail.gq1.yahoo.com>
References: <1353284237.49075.YahooMailNeo@web163402.mail.gq1.yahoo.com>
Message-ID: <50A97C1F.5010302@qtradr.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121119/c2bd1a5c/attachment.pl>

From chicagobrownblue at hotmail.com  Mon Nov 19 14:02:14 2012
From: chicagobrownblue at hotmail.com (FJ M)
Date: Mon, 19 Nov 2012 13:02:14 +0000
Subject: [R-SIG-Finance] Yahoo data download
In-Reply-To: <1353284237.49075.YahooMailNeo@web163402.mail.gq1.yahoo.com>
References: <1353284237.49075.YahooMailNeo@web163402.mail.gq1.yahoo.com>
Message-ID: <BLU161-W4606D0047A7D0C81D7DC38DF560@phx.gbl>


Auto Manuf-Major (^YHOh735) on the Yahoo Finance website has no historical data. You should probably check Yahoo Finance for known issues. If it does not exist, report the problem to Yahoo Finance. 
For what it's worth, index MSCI does show historical data. S&P 500 cash index was also working this weekend. So it does seem like it is narrowly related to the sector indices. 
GL
Frank
Chicago
Date: Sun, 18 Nov 2012 16:17:17 -0800
From: jefe_goode at yahoo.com
To: R-SIG-Finance at r-project.org
Subject: [R-SIG-Finance] Yahoo data download
I have tried downloading stocks and Index data from Yahoo using R and it works fine. But, some sector indexes seem to have disappeared from Yahoo, though I am sure they used to be available: for eg:Auto Manufacturers - Major Communication Equipment Biotechnology Industrial Metals & Minerals Major Airlines Electric Utilities and so on, there are maybe 50 or 60 sector indices , plus I recall a whole range of international sector indices that Yahoo provided, such as the MSCI European banks, MSCI Airlines, Dow Jones Utility sector etc etc. I have spend ages trying to find all these and I just cannot find any that are currently available. Have Yahoo discontinued these? Am I looking in the wrong place? Is anyone aware of where I can get this data from Yahoo or anywhere else? Thanks Jefe [[alternative HTML version deleted]] 
_______________________________________________ R-SIG-Finance at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance -- Subscriber-posting only. If you want to post, subscribe first. -- Also note that this is not the r-help list where general R questions should go. 		 	   		  

From michael.weylandt at gmail.com  Mon Nov 19 23:55:48 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Mon, 19 Nov 2012 22:55:48 +0000
Subject: [R-SIG-Finance] [R] RQuantlib - Convertible Bond Pricing
In-Reply-To: <1353323202519-4650027.post@n4.nabble.com>
References: <1353323202519-4650027.post@n4.nabble.com>
Message-ID: <CAAmySGPbun971QAaGmAhOssevDipM6Wfo1rsQYXgCc3x4BZ1rQ@mail.gmail.com>

Forwarding to the appropriate mailing list.

RMW

---------- Forwarded message ----------
From: colaiutachambers <gabriele.carrarini at gmail.com>
Date: Mon, Nov 19, 2012 at 11:06 AM
Subject: [R] RQuantlib - Convertible Bond Pricing
To: r-help at r-project.org


Hi everyone,
I?m working on my Master?s Degree thesis about the pricing of C.B. trying to
do that with ?R?.
I read the paper ?RQuantLib: Interfacing QuantLib from R? and now I?m
matching several market price (taken from Bloomberg or Deutsche Bank
database) with ?R? output.
Could you help me to understand the parameters within these functions?
Let me show you one of the problem that I met in the attached files.
As you could see in the image, just shifting the Conv.Ratio from 1 to 10 all
the curves in the plot get flattened.

First <http://imageshack.us/photo/my-images/19/cr10plot.png/>
Second <http://imageshack.us/photo/my-images/641/cr1plot.png/>
Script <http://imageshack.us/photo/my-images/801/cr1m.png/>


Best regards.

Gabriele Carrarini
BTG Pactual
London Berkeley Square House





--
View this message in context:
http://r.789695.n4.nabble.com/RQuantlib-Convertible-Bond-Pricing-tp4650027.html
Sent from the R help mailing list archive at Nabble.com.

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From radek.maciaszek at gmail.com  Tue Nov 20 15:48:23 2012
From: radek.maciaszek at gmail.com (radek)
Date: Tue, 20 Nov 2012 06:48:23 -0800 (PST)
Subject: [R-SIG-Finance] Sullivan, Timmerman and White 1999: TA rules,
	and R
In-Reply-To: <4D91CD49.4070203@braverock.com>
References: <4D90FEA1.2030800@gmail.com>
	<AANLkTikuLF=h-hzxrKrFPcmWJ7MSVke7zPLZBk9nLZ3A@mail.gmail.com>
	<4D91CD49.4070203@braverock.com>
Message-ID: <1353422903536-4650167.post@n4.nabble.com>

Hi Brian,

Apologies for necromancing such an old topic but I was wondering if this
work has been added in the end to the TTR (or perhaps some other package)? I
am facing a similar issue and would like to calculate when the volume is
(pivoting) breaking the channel.

Thanks,
Radek


braverock wrote
> OK, so Josh actually reviewed the paper rather than relying on hazy 
> recollection (my bad).
> 
> Based on this, you'd apply the relevant indicators for MA periods, 
> DonchianChannel, or OBV, es needed.  Channel Break-outs are also often 
> called pivots.  We have some code for this, and will endeavor to 
> document it and get it into TTR.
> 
> After any indicators are applied, as required, you'll then generate 
> signals as I described in my prior email.
> 
> Regards,
> 
>    - Brian
> 
> On 03/29/2011 01:24 AM, Joshua Ulrich wrote:
>> Hi Worik,
>>
>> There are 5 types of rules: filter rules, moving averages, support and
>> resistance, channel break-outs, and on-balance volume averages.  TTR
>> contains what you need for moving averages, channel break-outs
>> (DonchianChannel) and on-balance volume (OBV).
>>
>> I coded filter rules in another language a few years ago, so I could
>> help you write them in R.  I don't understand how the support and
>> resistance rules differ from the channel break-outs, but that could be
>> due to the time of day and my lack of sleep.  Regardless, I doubt they
>> would be difficult to code.
>>
>> Best,
>> --
>> Joshua Ulrich  |  FOSS Trading: www.fosstrading.com
>>
>>
>>
>> On Mon, Mar 28, 2011 at 4:33 PM, Worik&lt;

> worik.stanton@

> &gt;  wrote:
>>> [Apologies if I have sent this multiple times.  I have been struggling
>>> with
>>> SMTP sewrvers and I have not seen my message appear on the list]
>>>
>>> Friends
>>>
>>> I am trying to save myself some tedious work.
>>>
>>> I am processing a paper from  "The Journal Of Finance * Vol. LIV, No. 5
>>>   October 1999" by Sullivan,  Timmerman and  White.  "Data-Snooping,
>>> Technical Trading Rule Performance, and the Bootstrap"
>>>
>>> I am aiming to reproduce their results using the same  TA rules as they
>>> used.
>>>
>>> They describe the rules they use in English and I am in the process of
>>> trying to programme them into R.  But if some one has already done this
>>> it
>>> would save me a pile of work.
>>>
>>> It would be nice to just grab some rules from the TTR package, but
>>> because
>>> of the way STW describe the rules it is quite a lot of work to calculate
>>> what parameters to use.
>>>
>>> So I am clutching at a straw here:  If anybody could point me in a
>>> better
>>> direction than slogging through the English text and trying to match
>>> that
>>> with the TTR docs I would be grateful
>>>
>>> cheers
>>> Worik
>>>
>>> PS Here is an example of their text.  Not that it is bad, just quite a
>>> bit
>>> of work....
>>>
>>>     A. Filter Rules
>>> Filter rules are used in Alexander (1961) to assess the efficiency of
>>> stock
>>> price movements. Fama and Blume (1966) explain the standard filter rule:
>>> An x per cent filter is defined as follows: If the daily closing price
>>> of a
>>> particular security moves up at least x per cent, buy and hold the se-
>>> curity until its price moves down at least x per cent from a subsequent
>>> high, at which time simultaneously sell and go short. The short position
>>> is maintained until the daily closing price rises at least x per cent
>>> above
>>> a subsequent low at which time one covers and buys. Moves less than x
>>> per cent in either direction are ignored. (p. 227)
>>> The first item of consideration is how to define subsequent lows and
>>> highs.
>>> We will do this in two ways. As the above excerpt suggests, a subsequent
>>> high is the highest closing price achieved while holding a particular
>>> long
>>> position. Likewise, a subsequent low is the lowest closing price
>>> achieved
>>> while holding a particular short position. Alternatively, a low (high)
>>> can
>>> be
>>> defined as the most recent closing price that is less (greater) than the
>>> e
>>> previous closing prices. Next, we will expand the universe of filter
>>> rules
>>> by
>>> allowing a neutral position to be imposed. This is accomplished by
>>> liquidat-
>>> ing a long position when the price decreases y percent from the previous
>>> high, and covering a short position when the price increases y percent
>>> from
>>> the previous low. Following BLL, we also consider holding a given long
>>> or
>>> short position for a prespecified number of days, c, effectively
>>> ignoring
>>> all
>>> other signals generated during that time.
> 
> _______________________________________________

> R-SIG-Finance@

>  mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.





--
View this message in context: http://r.789695.n4.nabble.com/Sullivan-Timmerman-and-White-1999-TA-rules-and-R-tp3413144p4650167.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Tue Nov 20 15:58:24 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 20 Nov 2012 08:58:24 -0600
Subject: [R-SIG-Finance] Sullivan, Timmerman and White 1999: TA rules,
 and R
In-Reply-To: <1353422903536-4650167.post@n4.nabble.com>
References: <4D90FEA1.2030800@gmail.com>
	<AANLkTikuLF=h-hzxrKrFPcmWJ7MSVke7zPLZBk9nLZ3A@mail.gmail.com>
	<4D91CD49.4070203@braverock.com>
	<1353422903536-4650167.post@n4.nabble.com>
Message-ID: <50AB9A90.6070907@braverock.com>

support and resistance been in TTR function 'pivots' since svn r122 on 
2012-03-31, I wrote them and Josh checked them in.

On 11/20/2012 08:48 AM, radek wrote:
> Hi Brian,
>
> Apologies for necromancing such an old topic but I was wondering if this
> work has been added in the end to the TTR (or perhaps some other package)? I
> am facing a similar issue and would like to calculate when the volume is
> (pivoting) breaking the channel.
>
> Thanks,
> Radek
>
>
> braverock wrote
>> OK, so Josh actually reviewed the paper rather than relying on hazy
>> recollection (my bad).
>>
>> Based on this, you'd apply the relevant indicators for MA periods,
>> DonchianChannel, or OBV, es needed.  Channel Break-outs are also often
>> called pivots.  We have some code for this, and will endeavor to
>> document it and get it into TTR.
>>
>> After any indicators are applied, as required, you'll then generate
>> signals as I described in my prior email.
>>
>> Regards,
>>
>>     - Brian
>>
>> On 03/29/2011 01:24 AM, Joshua Ulrich wrote:
>>> Hi Worik,
>>>
>>> There are 5 types of rules: filter rules, moving averages, support and
>>> resistance, channel break-outs, and on-balance volume averages.  TTR
>>> contains what you need for moving averages, channel break-outs
>>> (DonchianChannel) and on-balance volume (OBV).
>>>
>>> I coded filter rules in another language a few years ago, so I could
>>> help you write them in R.  I don't understand how the support and
>>> resistance rules differ from the channel break-outs, but that could be
>>> due to the time of day and my lack of sleep.  Regardless, I doubt they
>>> would be difficult to code.
>>>
>>> Best,
>>> --
>>> Joshua Ulrich  |  FOSS Trading: www.fosstrading.com
>>>
>>>
>>>
>>> On Mon, Mar 28, 2011 at 4:33 PM, Worik&lt;
>> worik.stanton@
>> &gt;  wrote:
>>>> [Apologies if I have sent this multiple times.  I have been struggling
>>>> with
>>>> SMTP sewrvers and I have not seen my message appear on the list]
>>>>
>>>> Friends
>>>>
>>>> I am trying to save myself some tedious work.
>>>>
>>>> I am processing a paper from  "The Journal Of Finance * Vol. LIV, No. 5
>>>>    October 1999" by Sullivan,  Timmerman and  White.  "Data-Snooping,
>>>> Technical Trading Rule Performance, and the Bootstrap"
>>>>
>>>> I am aiming to reproduce their results using the same  TA rules as they
>>>> used.
>>>>
>>>> They describe the rules they use in English and I am in the process of
>>>> trying to programme them into R.  But if some one has already done this
>>>> it
>>>> would save me a pile of work.
>>>>
>>>> It would be nice to just grab some rules from the TTR package, but
>>>> because
>>>> of the way STW describe the rules it is quite a lot of work to calculate
>>>> what parameters to use.
>>>>
>>>> So I am clutching at a straw here:  If anybody could point me in a
>>>> better
>>>> direction than slogging through the English text and trying to match
>>>> that
>>>> with the TTR docs I would be grateful
>>>>
>>>> cheers
>>>> Worik
>>>>
>>>> PS Here is an example of their text.  Not that it is bad, just quite a
>>>> bit
>>>> of work....
>>>>
>>>>      A. Filter Rules
>>>> Filter rules are used in Alexander (1961) to assess the efficiency of
>>>> stock
>>>> price movements. Fama and Blume (1966) explain the standard filter rule:
>>>> An x per cent filter is defined as follows: If the daily closing price
>>>> of a
>>>> particular security moves up at least x per cent, buy and hold the se-
>>>> curity until its price moves down at least x per cent from a subsequent
>>>> high, at which time simultaneously sell and go short. The short position
>>>> is maintained until the daily closing price rises at least x per cent
>>>> above
>>>> a subsequent low at which time one covers and buys. Moves less than x
>>>> per cent in either direction are ignored. (p. 227)
>>>> The first item of consideration is how to define subsequent lows and
>>>> highs.
>>>> We will do this in two ways. As the above excerpt suggests, a subsequent
>>>> high is the highest closing price achieved while holding a particular
>>>> long
>>>> position. Likewise, a subsequent low is the lowest closing price
>>>> achieved
>>>> while holding a particular short position. Alternatively, a low (high)
>>>> can
>>>> be
>>>> defined as the most recent closing price that is less (greater) than the
>>>> e
>>>> previous closing prices. Next, we will expand the universe of filter
>>>> rules
>>>> by
>>>> allowing a neutral position to be imposed. This is accomplished by
>>>> liquidat-
>>>> ing a long position when the price decreases y percent from the previous
>>>> high, and covering a short position when the price increases y percent
>>>> from
>>>> the previous low. Following BLL, we also consider holding a given long
>>>> or
>>>> short position for a prespecified number of days, c, effectively
>>>> ignoring
>>>> all
>>>> other signals generated during that time.
>> _______________________________________________
>> R-SIG-Finance@
>>   mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Sullivan-Timmerman-and-White-1999-TA-rules-and-R-tp3413144p4650167.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From radek.maciaszek at gmail.com  Tue Nov 20 16:22:09 2012
From: radek.maciaszek at gmail.com (radek)
Date: Tue, 20 Nov 2012 07:22:09 -0800 (PST)
Subject: [R-SIG-Finance] Sullivan, Timmerman and White 1999: TA rules,
	and R
In-Reply-To: <50AB9A90.6070907@braverock.com>
References: <4D90FEA1.2030800@gmail.com>
	<AANLkTikuLF=h-hzxrKrFPcmWJ7MSVke7zPLZBk9nLZ3A@mail.gmail.com>
	<4D91CD49.4070203@braverock.com>
	<1353422903536-4650167.post@n4.nabble.com>
	<50AB9A90.6070907@braverock.com>
Message-ID: <1353424929520-4650169.post@n4.nabble.com>

Nice and thank you for a quick reaction! Before posting I scanned TTR
documentation for any mention of "pivot", "break", etc but couldn't find
anything but I just noticed this function is undocumented.

I found this nice example of using pivot in the wild:
http://stackoverflow.com/questions/11070629/r-support-resistance-levels-as-probability-distribution

Thanks,
Radek



--
View this message in context: http://r.789695.n4.nabble.com/Sullivan-Timmerman-and-White-1999-TA-rules-and-R-tp3413144p4650169.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From michael.newell.uk at gmail.com  Tue Nov 20 21:44:27 2012
From: michael.newell.uk at gmail.com (Michael Newell)
Date: Tue, 20 Nov 2012 20:44:27 +0000
Subject: [R-SIG-Finance] Possible tradeStats() issue
Message-ID: <CAEhfj-XE7fpSSuWoDohyxuEneANSBPcXaUiEg_d2kZ97q-mHsw@mail.gmail.com>

I have recently come across an issue using the tradeStats() function
which was exposed by setting txnFees.  Looking at the tradeStats()
codes it attempts to determine the number of trades based on the
following logic:

PL.gt0 <- txn$Net.Txn.Realized.PL[txn$Net.Txn.Realized.PL > 0]
PL.lt0 <- txn$Net.Txn.Realized.PL[txn$Net.Txn.Realized.PL < 0]
PL.ne0 <- txn$Net.Txn.Realized.PL[txn$Net.Txn.Realized.PL != 0]
....
NumberOfTrades <- nrow(PL.ne0)

When not using txnFees your opening transaction of a trade have a PL
of 0 and hence this number does indeed match up with the number of
trades.  However as soon as you set a txnFees amount it means your
opening transaction has a PL equal to your txnFees (e.g. spread cost
of -0.0002).  This now doubles the "NumberOfTrades" as all opening
transactions have a PNL != 0 as shown below under PL column.

                    Txn.Qty Txn.Price Txn.Fees Txn.Value Txn.Avg.Cost
Net.Txn.Realized.PL
1990-01-01 00:00:00       0   0.00000    0e+00   0.00000      0.00000
           0.00000
2010-01-22 13:59:00       1   1.61112   -2e-04   1.61112      1.61112
          -0.00020
2010-01-25 15:59:00      -1   1.61837    0e+00  -1.61837      1.61837
           0.00725
2010-01-28 09:59:00      -1   1.62732   -2e-04  -1.62732      1.62732
          -0.00020
2010-01-28 16:59:00       1   1.61347    0e+00   1.61347      1.61347
           0.01385


There are a number of statistics in tradeStats() which use the PL.gt0,
PL.lt0 and PL.ne0 variables and therefore produce incorrect results
when txnFees>0.  This is easily recreated using any demo with txnFees
present and not present and reviewing the tradeStats() results.

--

Regards,

Michael Newell


From jan at opentrades.nl  Tue Nov 20 22:14:27 2012
From: jan at opentrades.nl (OpenTrades)
Date: Tue, 20 Nov 2012 22:14:27 +0100
Subject: [R-SIG-Finance] Possible tradeStats() issue
In-Reply-To: <CAEhfj-XE7fpSSuWoDohyxuEneANSBPcXaUiEg_d2kZ97q-mHsw@mail.gmail.com>
References: <CAEhfj-XE7fpSSuWoDohyxuEneANSBPcXaUiEg_d2kZ97q-mHsw@mail.gmail.com>
Message-ID: <50ABF2B3.2050303@opentrades.nl>

Your observations are totally correct Michael.

Using txnFees != 0 is in fact a hack to be able to discern individual 
trades, but of course it only works under the conditions mentioned. In 
my strategies I usually specify 0 for entry transaction costs, then 
double the transaction costs for exits, but that will only work in 
certain strategies, true.

I am not aware of any plans to fix this at this point; patches (as 
always) welcome :-)



On 20-11-12 21:44, Michael Newell wrote:
> I have recently come across an issue using the tradeStats() function
> which was exposed by setting txnFees.  Looking at the tradeStats()
> codes it attempts to determine the number of trades based on the
> following logic:
>
> PL.gt0 <- txn$Net.Txn.Realized.PL[txn$Net.Txn.Realized.PL > 0]
> PL.lt0 <- txn$Net.Txn.Realized.PL[txn$Net.Txn.Realized.PL < 0]
> PL.ne0 <- txn$Net.Txn.Realized.PL[txn$Net.Txn.Realized.PL != 0]
> ....
> NumberOfTrades <- nrow(PL.ne0)
>
> When not using txnFees your opening transaction of a trade have a PL
> of 0 and hence this number does indeed match up with the number of
> trades.  However as soon as you set a txnFees amount it means your
> opening transaction has a PL equal to your txnFees (e.g. spread cost
> of -0.0002).  This now doubles the "NumberOfTrades" as all opening
> transactions have a PNL != 0 as shown below under PL column.
>
>                      Txn.Qty Txn.Price Txn.Fees Txn.Value Txn.Avg.Cost
> Net.Txn.Realized.PL
> 1990-01-01 00:00:00       0   0.00000    0e+00   0.00000      0.00000
>             0.00000
> 2010-01-22 13:59:00       1   1.61112   -2e-04   1.61112      1.61112
>            -0.00020
> 2010-01-25 15:59:00      -1   1.61837    0e+00  -1.61837      1.61837
>             0.00725
> 2010-01-28 09:59:00      -1   1.62732   -2e-04  -1.62732      1.62732
>            -0.00020
> 2010-01-28 16:59:00       1   1.61347    0e+00   1.61347      1.61347
>             0.01385
>
>
> There are a number of statistics in tradeStats() which use the PL.gt0,
> PL.lt0 and PL.ne0 variables and therefore produce incorrect results
> when txnFees>0.  This is easily recreated using any demo with txnFees
> present and not present and reviewing the tradeStats() results.
>
> --
>
> Regards,
>
> Michael Newell
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


-- 
Jan Humme - OpenTrades

WWW:     http://www.opentrades.nl
Email:   jan at opentrades.nl
Twitter: @opentrades


From brian at braverock.com  Tue Nov 20 22:20:47 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 20 Nov 2012 15:20:47 -0600
Subject: [R-SIG-Finance] Possible tradeStats() issue
In-Reply-To: <CAEhfj-XE7fpSSuWoDohyxuEneANSBPcXaUiEg_d2kZ97q-mHsw@mail.gmail.com>
References: <CAEhfj-XE7fpSSuWoDohyxuEneANSBPcXaUiEg_d2kZ97q-mHsw@mail.gmail.com>
Message-ID: <50ABF42F.1010305@braverock.com>

On 11/20/2012 02:44 PM, Michael Newell wrote:
> There are a number of statistics in tradeStats() which use the PL.gt0,
> PL.lt0 and PL.ne0 variables and therefore produce incorrect results
> when txnFees>0.  This is easily recreated using any demo with txnFees
> present and not present and reviewing the tradeStats() results.
In the presence of transaction fees, you cannot really have a 
transaction with no P&L, can you?  (leaving aside a gain that precisely 
offsets the fees) so the count of transactions is indeed true.

There are three ways I can think of around this:
- one is to place the fees only on your flattening transactions, 
pretending that you only realize the fees when you exit the position...  
this isn't exactly true, but gets you what you seem to want.
- another would be to patch the function to allow a user-specified 
option to to use Gross rather than Net.
- or use perTradeStats instead, which uses position rather than P&L to 
separate 'trades'.  This function is newer than tradeStats, so perhaps 
the tradeStats function could be modified to use these instead of the 
simple PL>0 method.

Either of the latter two options shouldn't be a large change to the 
code, but I'm not likely to get to it any time soon. Patches Welcome.

Regards,

     - Brian


From michael.newell.uk at gmail.com  Tue Nov 20 23:41:31 2012
From: michael.newell.uk at gmail.com (Michael Newell)
Date: Tue, 20 Nov 2012 22:41:31 +0000
Subject: [R-SIG-Finance] Possible tradeStats() issue
Message-ID: <CAEhfj-WJxj8dGoJOQVoQ=hGercpMtmchTaWYnk1u_45AxJLc4g@mail.gmail.com>

Jan/Brian thank you very much for your suggestion of adding this to
the exit of the trade rather than the open.  I am new to using the
package so am still finding my way around, as you note this does look
to solve my immediate issue.

Brian I agree with your comment on transactions and the way
tradeStats() calculates transactions seems to work fine (NumberOfTxns
<- nrow(txn) - 1), it was just the calculation of 'NumberOfTrades'
which I had issue with.  I've had a quick look at perTradeStats which
would also appear to give me a lot of what I need so thank you for the
suggestion.

Myself and a colleague only came across the Quanstrat package a couple
of weeks ago having previously developed a custom parallel testing
framework for a specific strategy using Quantmod as a base.  I am only
sorry we did not come across Quantstrat earlier!  As we get to grips
with this fabulous package I hope that we can contribute patches and
such where appropriate.

--
Regards,

Michael Newell


From weihanliu2002 at yahoo.com  Wed Nov 21 00:52:27 2012
From: weihanliu2002 at yahoo.com (Wei-han Liu)
Date: Tue, 20 Nov 2012 15:52:27 -0800 (PST)
Subject: [R-SIG-Finance] Listed below is my coding and error message:
Message-ID: <1353455547.54574.YahooMailNeo@web163802.mail.gq1.yahoo.com>

Hi R users:

I am applying the package plm to attached high-frequency financial data for panel data analysis. Listed below is my coding and error message:

rm(list=ls())
library("plm")
toydata?<-
read.csv("D:/............./toydata.csv",header=TRUE,sep =
",");
summary(toydata)
#?toydata?<-
pdata.frame(toydata, index = c("SECCODE",
"TDATE"), drop.index = TRUE, row.names = TRUE)
?
# estimation of the error components
toydata.out?<-
plm(data=toydata, RETURN ~ IOB + IOBS, random.method="walhus",
effect="twoways", model='random')

ERROR MESSAGE:
duplicate couples (time-id)
error in pdim.default(index[[1]], index[[2]]) : 
?
Please help and advise what I should do to
fix this problem about index. Do I need to pre-process the data or else??

Thanks for your kind attention.

Wei-han
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121120/35e1687a/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: toydata.csv
Type: application/octet-stream
Size: 76442 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121120/35e1687a/attachment.obj>

From ludovic.theate at gmail.com  Wed Nov 21 10:27:20 2012
From: ludovic.theate at gmail.com (ludovic.theate)
Date: Wed, 21 Nov 2012 01:27:20 -0800 (PST)
Subject: [R-SIG-Finance] rugarch and copulas
In-Reply-To: <1352463866884-4649042.post@n4.nabble.com>
References: <CA+TVX6td_AEC-tQ=Ne8d6p27xd3uZf4Eo=nrvye49PNa4FVRYw@mail.gmail.com>
	<D053C44A-294D-4EF5-98CF-287361C75340@4dscape.com>
	<1352382180344-4648880.post@n4.nabble.com>
	<E62E5268-0C99-49DF-AFFA-969AF78563D5@4dscape.com>
	<1352388784479-4648902.post@n4.nabble.com>
	<1352456978625-4649023.post@n4.nabble.com>
	<509CE521.1000205@4dscape.com>
	<1352463866884-4649042.post@n4.nabble.com>
Message-ID: <1353490040413-4650268.post@n4.nabble.com>

Alexios,

Sorry but I've got a last problem.

I firstly simulated independant trajectories of my processes, and I find
acceptable results.

Then I tried to simulate correlated trajectories using the following
function (as we discussed last week) :

##########################
# Sim_Cop_Garch Function #
##########################


sim_cop_garch <- function(mfit,cop,nsim,horizon){
ncur = length(mfit)

result <- NULL
for(j in 1:nsim){

# Simulation of nsim random values of the copulas: these are uniform
#uni_res <- rCopula(horizon,cop)  # FIRST TRY
uni_res <- matrix(runif(horizon*ncur),ncol=ncur,nrow=horizon)  # SECOND TRY

# Inverse-transform : uniform values are transformed into appropriate values
(e.g. norm, sstd,...)
innov = matrix(NA, ncol = ncur, nrow = horizon)
for(i in 1:ncur){
	gdist = mfit[[i]]@model$modeldesc$distribution
	lambda = ifelse(mfit[[i]]@model$modelinc[18]>0,
mfit[[i]]@fit$ipars["ghlambda",1], 0)
	skew = ifelse(mfit[[i]]@model$modelinc[16]>0,
mfit[[i]]@fit$ipars["skew",1],  0)
	shape = ifelse(mfit[[i]]@model$modelinc[17]>0,
mfit[[i]]@fit$ipars["shape",1],  0)
	innov[,i] = qdist(gdist,uni_res[,i] , mu = 0, sigma = 1, lambda = lambda,
skew = skew, shape = shape)}

# Simulation of the ARIMA-GARCH model using the previously generated
innovations

one_simul <- matrix(NA,ncol=ncur,nrow=1)
for(i in 1:ncur){

test <- ugarchsim(mfit[[i]],n.sim=horizon,m.sim=1,
custom.dist=list(name="sample",distfit=matrix(innov[,i],ncol=1,nrow=horizon)))@simulation$seriesSim[horizon,1] 

one_simul[,i] <- exp(diffinv(test))[2] }

result <- rbind(result,one_simul)
}
return(result)
}


The results I got for a Gaussian copula were clearly incorrect. So I
modified the function to skip the copula-generated uniform random numbers
(with the "first try" comment ) and I used the runif method instead. (with
the "second try" comment)  Even when I do this, I find impossible results,
so the problem doesn't come from the copula.

I think I have maybe misunderstood the behavior of the custom.dist option in
the ugarchsim method. Could you please have a look and tell me if you see
something wrong ? Thanks a lot.

Kind regards,

Ludovic



--
View this message in context: http://r.789695.n4.nabble.com/rugarch-and-copulas-tp4647300p4650268.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Wed Nov 21 10:50:36 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Wed, 21 Nov 2012 09:50:36 +0000
Subject: [R-SIG-Finance] rugarch and copulas
In-Reply-To: <1353490040413-4650268.post@n4.nabble.com>
References: <CA+TVX6td_AEC-tQ=Ne8d6p27xd3uZf4Eo=nrvye49PNa4FVRYw@mail.gmail.com>
	<D053C44A-294D-4EF5-98CF-287361C75340@4dscape.com>
	<1352382180344-4648880.post@n4.nabble.com>
	<E62E5268-0C99-49DF-AFFA-969AF78563D5@4dscape.com>
	<1352388784479-4648902.post@n4.nabble.com>
	<1352456978625-4649023.post@n4.nabble.com>
	<509CE521.1000205@4dscape.com>
	<1352463866884-4649042.post@n4.nabble.com>
	<1353490040413-4650268.post@n4.nabble.com>
Message-ID: <50ACA3EC.6050606@4dscape.com>

This is not really a reproducible example...nevertheless, I am guessing 
you are trying to generate the final point of the path at 
simulation_time "horizon".
What you are forgetting is that the values in "simulation$seriesSim" are 
returns, so doing "exp(diffinv(test))[2]" on the last value (horizon) is 
meaningless. What you want (probably) is:

... at simulation$seriesSim[1:horizon,1]
one_simul[,i] <- tail(exp(diffinv(test)), 1)

-Alexios

On 21/11/2012 09:27, ludovic.theate wrote:
> Alexios,
>
> Sorry but I've got a last problem.
>
> I firstly simulated independant trajectories of my processes, and I find
> acceptable results.
>
> Then I tried to simulate correlated trajectories using the following
> function (as we discussed last week) :
>
> ##########################
> # Sim_Cop_Garch Function #
> ##########################
>
>
> sim_cop_garch <- function(mfit,cop,nsim,horizon){
> ncur = length(mfit)
>
> result <- NULL
> for(j in 1:nsim){
>
> # Simulation of nsim random values of the copulas: these are uniform
> #uni_res <- rCopula(horizon,cop)  # FIRST TRY
> uni_res <- matrix(runif(horizon*ncur),ncol=ncur,nrow=horizon)  # SECOND TRY
>
> # Inverse-transform : uniform values are transformed into appropriate values
> (e.g. norm, sstd,...)
> innov = matrix(NA, ncol = ncur, nrow = horizon)
> for(i in 1:ncur){
> 	gdist = mfit[[i]]@model$modeldesc$distribution
> 	lambda = ifelse(mfit[[i]]@model$modelinc[18]>0,
> mfit[[i]]@fit$ipars["ghlambda",1], 0)
> 	skew = ifelse(mfit[[i]]@model$modelinc[16]>0,
> mfit[[i]]@fit$ipars["skew",1],  0)
> 	shape = ifelse(mfit[[i]]@model$modelinc[17]>0,
> mfit[[i]]@fit$ipars["shape",1],  0)
> 	innov[,i] = qdist(gdist,uni_res[,i] , mu = 0, sigma = 1, lambda = lambda,
> skew = skew, shape = shape)}
>
> # Simulation of the ARIMA-GARCH model using the previously generated
> innovations
>
> one_simul <- matrix(NA,ncol=ncur,nrow=1)
> for(i in 1:ncur){
>
> test <- ugarchsim(mfit[[i]],n.sim=horizon,m.sim=1,
> custom.dist=list(name="sample",distfit=matrix(innov[,i],ncol=1,nrow=horizon)))@simulation$seriesSim[horizon,1]
>
> one_simul[,i] <- exp(diffinv(test))[2] }
>
> result <- rbind(result,one_simul)
> }
> return(result)
> }
>
>
> The results I got for a Gaussian copula were clearly incorrect. So I
> modified the function to skip the copula-generated uniform random numbers
> (with the "first try" comment ) and I used the runif method instead. (with
> the "second try" comment)  Even when I do this, I find impossible results,
> so the problem doesn't come from the copula.
>
> I think I have maybe misunderstood the behavior of the custom.dist option in
> the ugarchsim method. Could you please have a look and tell me if you see
> something wrong ? Thanks a lot.
>
> Kind regards,
>
> Ludovic
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/rugarch-and-copulas-tp4647300p4650268.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From ludovic.theate at gmail.com  Wed Nov 21 11:03:42 2012
From: ludovic.theate at gmail.com (ludovic.theate)
Date: Wed, 21 Nov 2012 02:03:42 -0800 (PST)
Subject: [R-SIG-Finance] rugarch and copulas
In-Reply-To: <50ACA3EC.6050606@4dscape.com>
References: <CA+TVX6td_AEC-tQ=Ne8d6p27xd3uZf4Eo=nrvye49PNa4FVRYw@mail.gmail.com>
	<D053C44A-294D-4EF5-98CF-287361C75340@4dscape.com>
	<1352382180344-4648880.post@n4.nabble.com>
	<E62E5268-0C99-49DF-AFFA-969AF78563D5@4dscape.com>
	<1352388784479-4648902.post@n4.nabble.com>
	<1352456978625-4649023.post@n4.nabble.com>
	<509CE521.1000205@4dscape.com>
	<1352463866884-4649042.post@n4.nabble.com>
	<1353490040413-4650268.post@n4.nabble.com>
	<50ACA3EC.6050606@4dscape.com>
Message-ID: <1353492222598-4650274.post@n4.nabble.com>

Yes. Clearly a stupid question for a stupid mistake. I made a try, and I get
now correct results.

Thanks and have a nice day.

Ludovic



--
View this message in context: http://r.789695.n4.nabble.com/rugarch-and-copulas-tp4647300p4650274.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From weihanliu2002 at yahoo.com  Wed Nov 21 12:51:35 2012
From: weihanliu2002 at yahoo.com (Wei-han Liu)
Date: Wed, 21 Nov 2012 03:51:35 -0800 (PST)
Subject: [R-SIG-Finance] question on package plm
Message-ID: <1353498695.20006.YahooMailNeo@web163804.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121121/354b4b11/attachment.pl>

From m.lyszczek at firstny.com  Wed Nov 21 19:16:13 2012
From: m.lyszczek at firstny.com (Michael Lyszczek)
Date: Wed, 21 Nov 2012 18:16:13 +0000
Subject: [R-SIG-Finance] Millisecond timestamp from PgSql using DBI /
 RPostgreSQL ? Anyway to set up a default timeseries format for the
 timestamp type?
Message-ID: <3B2222DFBE50384FB4415F72FDF4BEBD01035D@NY1PPEXMBX01.fnysllc.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121121/3400f40b/attachment.pl>

From markknecht at gmail.com  Wed Nov 21 20:38:12 2012
From: markknecht at gmail.com (Mark Knecht)
Date: Wed, 21 Nov 2012 11:38:12 -0800
Subject: [R-SIG-Finance] [OT] Day-to-day bar size modification
Message-ID: <CAK2H+ecszDV=fecMNJqLXXzMdQkaWtkBQ162dWpTmxx9Q7tBew@mail.gmail.com>

Hi all,
   This is a bit off-topic for R so for that I apologize up front
however I couldn't think of a better place to ask a quick question.
Thanks in advance.

   I must admit I've been a bit surprised and skeptical about this but
in three different venues recently I've seen people touting trading
systems where they use a proprietary indicator to determine what bar
size to run each day. The value is consistent for the day. One day 273
ticks, the next day 410 ticks, the next day 330 ticks, etc.

   Again, I'm skeptical of the value of this, and it certainly
complicates testing, but I wondered if there are any papers to read or
R packages that might specifically address this sort of idea?

Thanks,
Mark


From khoxsey at gmail.com  Wed Nov 21 21:02:35 2012
From: khoxsey at gmail.com (Kent Hoxsey)
Date: Wed, 21 Nov 2012 12:02:35 -0800
Subject: [R-SIG-Finance] Millisecond timestamp from PgSql using DBI /
	RPostgreSQL ? Anyway to set up a default timeseries format
	for the timestamp type?
In-Reply-To: <3B2222DFBE50384FB4415F72FDF4BEBD01035D@NY1PPEXMBX01.fnysllc.com>
References: <3B2222DFBE50384FB4415F72FDF4BEBD01035D@NY1PPEXMBX01.fnysllc.com>
Message-ID: <087EF541-5FB7-4860-A0E6-C4F262EDE214@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121121/05a829b0/attachment.pl>

From m.lyszczek at firstny.com  Wed Nov 21 21:22:47 2012
From: m.lyszczek at firstny.com (Michael Lyszczek)
Date: Wed, 21 Nov 2012 20:22:47 +0000
Subject: [R-SIG-Finance] Millisecond timestamp from PgSql using DBI
	/	RPostgreSQL ? Anyway to set up a default timeseries
	format	for the timestamp type?
In-Reply-To: <087EF541-5FB7-4860-A0E6-C4F262EDE214@gmail.com>
References: <3B2222DFBE50384FB4415F72FDF4BEBD01035D@NY1PPEXMBX01.fnysllc.com>
	<087EF541-5FB7-4860-A0E6-C4F262EDE214@gmail.com>
Message-ID: <3B2222DFBE50384FB4415F72FDF4BEBD0103A9@NY1PPEXMBX01.fnysllc.com>

Kent,

Thanks for the response.

I am now doing this : 

select cast(extract(epoch from timestamp) as float) from trades order by timestamp;

this gives me a list that looks like .....
1353381185.089
 1353381185.089
  1353381189.96
  1353381189.96
  1353381189.96
 1353381190.353
 1353381190.353
 1353381190.353
 1353381191.139
 1353381191.139
 1353381191.139
  1353381256.04
 1353381855.805
  1353381864.52
 1353384140.324

Etc....

I try to bring it into R the same way, so new query:

NGZ2zoo <- dbGetQuery(con, "select cast(extract(epoch from timestamp) as float), instrument_id, trade_size, trade_price, exchange_generated_price, trade_id, agressor_side_isbuy from trades where trades.instrument_id = (select CAST(max(securities.\"UnderlyingSymbol\") as INT) from securities where securities.\"FNYShortName\" = 'iNGZ2')");
Summary(NGZ2zoo)
   date_part        instrument_id      trade_size     trade_price  
 Min.   :1.35e+09   Min.   :584445   Min.   : 2500   Min.   :3708  
 1st Qu.:1.35e+09   1st Qu.:584445   1st Qu.: 2500   1st Qu.:3742  
 Median :1.35e+09   Median :584445   Median : 2500   Median :3760  
 Mean   :1.35e+09   Mean   :584445   Mean   : 3070   Mean   :3759  
 3rd Qu.:1.35e+09   3rd Qu.:584445   3rd Qu.: 2500   3rd Qu.:3776  
 Max.   :1.35e+09   Max.   :584445   Max.   :70000   Max.   :3833  
 exchange_generated_price    trade_id        agressor_side_isbuy
 Mode :logical            Min.   :65001155   Min.   :-1.000     
 FALSE:2761               1st Qu.:65767044   1st Qu.:-1.000     
 TRUE :474                Median :66313346   Median : 0.000     
 NA's :0                  Mean   :66306294   Mean   :-0.068     
                          3rd Qu.:66880936   3rd Qu.: 1.000     
                          Max.   :67377417   Max.   : 1.000     

as.POSIXct(NGZ2zoo$date_part, origin="1970-01-01")
yields:
[3199] "2012-11-20 02:12:29 EST" "2012-11-20 00:29:30 EST"
[3201] "2012-11-20 02:15:27 EST" "2012-11-20 00:29:31 EST"
[3203] "2012-11-20 00:29:31 EST" "2012-11-20 00:29:33 EST"
[3205] "2012-11-20 02:15:28 EST" "2012-11-20 02:15:33 EST"
[3207] "2012-11-20 02:15:33 EST" "2012-11-20 02:16:11 EST"
[3209] "2012-11-20 02:18:21 EST" "2012-11-20 02:18:58 EST"
[3211] "2012-11-20 00:29:33 EST" "2012-11-20 00:29:34 EST"
[3213] "2012-11-20 00:29:40 EST" "2012-11-20 02:22:04 EST"
[3215] "2012-11-20 00:29:43 EST" "2012-11-20 02:22:31 EST"
[3217] "2012-11-20 02:22:33 EST" "2012-11-20 02:26:23 EST"
[3219] "2012-11-20 02:26:23 EST" "2012-11-20 02:27:53 EST"
[3221] "2012-11-20 02:29:30 EST" "2012-11-20 02:29:36 EST"
[3223] "2012-11-20 02:29:39 EST" "2012-11-20 02:47:05 EST"
[3225] "2012-11-20 02:47:05 EST" "2012-11-20 02:47:05 EST"
[3227] "2012-11-20 02:51:25 EST" "2012-11-20 02:53:37 EST"
[3229] "2012-11-20 02:53:44 EST" "2012-11-20 02:55:53 EST"
[3231] "2012-11-20 02:58:20 EST" "2012-11-20 03:14:16 EST"
[3233] "2012-11-20 03:24:15 EST" "2012-11-20 03:24:24 EST"
[3235] "2012-11-20 04:02:20 EST"


Even if I just do the system time:
> as.POSIXct(Sys.time(),  format = "%Y-%m-%d %H:%M:%OS")
[1] "2012-11-21 15:07:59 EST"


Is it just stored as a float? Or numeric? 

Any way you can see the actual value, not scientific notation?

Thanks so much,

Mike

-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Kent Hoxsey
Sent: Wednesday, November 21, 2012 3:03 PM
To: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Millisecond timestamp from PgSql using DBI / RPostgreSQL ? Anyway to set up a default timeseries format for the timestamp type?

After working through a similar set of issues a while back, I discovered this very useful web page:

http://www.epochconverter.com/

Short summary: use your RDBMS to do the conversion to epoch time, and hand that number to R. Do not write SQL to write text to parse in R.

In my experience, the task of converting from a string representation to POSIXct representation in R can be quite, erm, tedious when you're working with a lot of data. In contrast, doing the conversion in a source database (Oracle for me) is really fast, as are the downstream operations in R.

Caveat: I have not attempted to preserve or work with the millis, so you might need to do some prototyping to get your conversion right coming out Postgres, but that web site includes quite a bit of discussion about the topic.

HTH.
On Nov 21, 2012, at 10:16 AM, Michael Lyszczek wrote:

> Hi,
> 
> I am new to R and have been really having a great time dealing with millisecond timestamps in financial data.
> 
> I can get them to work in R using read.csv() then then converting the time stamp column using  as.POSIXct(DATA$TIMESTAMP, format = "%Y-%m-%d %H:%M:%OS");
> 
> However, when I use DBI and PgSql to query a table for ticks / bbo I have no idea how to specify not to drop off the trailing millisecond.
> <code>
> 
> options(digs.secs = 3);
> 
> library("DBI")
> library("RPostgreSQL")
> 
> drv <- dbDriver("PostgreSQL")
> con <- dbConnect(drv, dbname="market_data", host="host", user="user", password="password")
> NGZ2 <- dbGetQuery(con, "select * from trades blah blah blah");
> 
> </code>
> 
> Summary(NGZ2) yields:
>> summary(NGZ2zoo)
> instrument_id    table_trade_id      trade_size     trade_price
> Min.   :584445   Min.   :2786130   Min.   : 2500   Min.   :3708
> 1st Qu.:584445   1st Qu.:2790335   1st Qu.: 2500   1st Qu.:3742
> Median :584445   Median :2795493   Median : 2500   Median :3760
> Mean   :584445   Mean   :2795617   Mean   : 3070   Mean   :3759
> 3rd Qu.:584445   3rd Qu.:2800727   3rd Qu.: 2500   3rd Qu.:3776
> Max.   :584445   Max.   :2806760   Max.   :70000   Max.   :3833
> exchange_generated_price    trade_id          timestamp
> Mode :logical            Min.   :65001155   Min.   :2012-11-19 00:49:07
> FALSE:2761               1st Qu.:65767044   1st Qu.:2012-11-19 14:25:28
> TRUE :474                Median :66313346   Median :2012-11-19 16:25:25
> NA's :0                  Mean   :66306294   Mean   :2012-11-19 16:23:35
>                          3rd Qu.:66880936   3rd Qu.:2012-11-19 18:50:35
>                          Max.   :67377417   Max.   :2012-11-19 23:02:20
> agressor_side_isbuy
> Min.   :-1.00000
> 1st Qu.:-1.00000
> Median : 0.00000
> Mean   :-0.06801
> 3rd Qu.: 1.00000
> Max.   : 1.00000
> 
> 
> Meanwhile using a read.csv() for a similar dataset yields:
> 
> 
> NGX2  <- read.csv("iNGCal1310-12-2012.csv", header=TRUE)
> 
> 
> 
>> summary(NGX2)
> 
>                   TIMESTAMP         BID_SIZE          BID
> 
> 2012-10-22 16:04:19.561:    12   Min.   : 2500   Min.   :3.795
> 
> 2012-10-22 13:21:33.533:    11   1st Qu.: 2500   1st Qu.:3.911
> 
> 2012-10-22 13:54:06.927:    11   Median : 2500   Median :3.927
> 
> 2012-10-22 14:44:43.331:    11   Mean   : 4356   Mean   :3.929
> 
> 2012-10-22 15:50:03.755:    11   3rd Qu.: 5000   3rd Qu.:3.943
> 
> 2012-10-22 16:09:08.757:    11   Max.   :15000   Max.   :3.989
> 
> (Other)                :119621
> 
>      ASK           ASK_SIZE
> 
> Min.   :3.904   Min.   : 2500
> 
> 1st Qu.:3.919   1st Qu.: 2500
> 
> Median :3.935   Median : 5000
> 
> Mean   :3.938   Mean   : 4667
> 
> 3rd Qu.:3.950   3rd Qu.: 7500
> 
> Max.   :4.007   Max.   :15000
> 
> 
> 
> After processing with as.PosixCT:
> 
> 
> 
>> NGX2$TS <-as.POSIXct(NGX2$TIMESTAMP, format = "%Y-%m-%d %H:%M:%OS");
> 
>> summary(NGX2)
> 
>                   TIMESTAMP         BID_SIZE          BID
> 
> 2012-10-22 16:04:19.561:    12   Min.   : 2500   Min.   :3.795
> 
> 2012-10-22 13:21:33.533:    11   1st Qu.: 2500   1st Qu.:3.911
> 
> 2012-10-22 13:54:06.927:    11   Median : 2500   Median :3.927
> 
> 2012-10-22 14:44:43.331:    11   Mean   : 4356   Mean   :3.929
> 
> 2012-10-22 15:50:03.755:    11   3rd Qu.: 5000   3rd Qu.:3.943
> 
> 2012-10-22 16:09:08.757:    11   Max.   :15000   Max.   :3.989
> 
> (Other)                :119621
> 
>      ASK           ASK_SIZE           TS
> 
> Min.   :3.904   Min.   : 2500   Min.   :2012-10-22 00:00:00
> 
> 1st Qu.:3.919   1st Qu.: 2500   1st Qu.:2012-10-22 13:59:36
> 
> Median :3.935   Median : 5000   Median :2012-10-22 14:56:57
> 
> Mean   :3.938   Mean   : 4667   Mean   :2012-10-22 14:52:21
> 
> 3rd Qu.:3.950   3rd Qu.: 7500   3rd Qu.:2012-10-22 16:04:16
> 
> Max.   :4.007   Max.   :15000   Max.   :2012-10-22 16:52:08
> 
> 
> 
> 
> Is there any way to specify date format for a dbGetQuery () ?
> 
> 
> Straight from SQL:
> instrument_id |         timestamp          | best_bid_size | best_bid | best_offer | best_offer_size | data_id
> ---------------+----------------------------+---------------+----------+------------+-----------------+----------
>        592802 | 2012-11-19 13:39:52.855-05 |          5000 |    3.864 |      3.872 |            7500 | 17632624
>       1461673 | 2012-11-19 13:39:52.855-05 |          5000 |    -0.26 |     -0.237 |            2500 | 17632625
>        592790 | 2012-11-19 13:39:52.855-05 |          5000 |    3.951 |       3.96 |            2500 | 17632626
>        595724 | 2012-11-19 13:39:52.855-05 |          7500 |   -0.404 |      -0.37 |            2500 | 17632627
>        592792 | 2012-11-19 13:39:52.855-05 |          7500 |    3.897 |        3.9 |           10000 | 17632628
>        592796 | 2012-11-19 13:39:52.855-05 |          2500 |    3.865 |      3.868 |           10000 | 17632629
>        592792 | 2012-11-19 13:39:52.855-05 |         10000 |    3.897 |        3.9 |           10000 | 17632630
>        592796 | 2012-11-19 13:39:52.855-05 |          5000 |    3.865 |      3.868 |           10000 | 17632631
>        592787 | 2012-11-19 13:39:52.856-05 |         10000 |    3.837 |      3.842 |           10000 | 17632632
>        592792 | 2012-11-19 13:39:52.856-05 |          2500 |    3.898 |        3.9 |           10000 | 17632633
>        592793 | 2012-11-19 13:39:52.856-05 |         10000 |    3.887 |      3.891 |           10000 | 17632634
>        592796 | 2012-11-19 13:39:52.856-05 |          7500 |    3.865 |      3.868 |           10000 | 17632635
>        592787 | 2012-11-19 13:39:52.856-05 |         12500 |    3.837 |      3.842 |           10000 | 17632636
>        592792 | 2012-11-19 13:39:52.856-05 |          5000 |    3.898 |        3.9 |           10000 | 17632637
>        592793 | 2012-11-19 13:39:52.856-05 |         12500 |    3.887 |      3.891 |           10000 | 17632638
>        592796 | 2012-11-19 13:39:52.856-05 |         10000 |    3.865 |      3.868 |           10000 | 17632639
>        592787 | 2012-11-19 13:39:52.856-05 |          2500 |    3.838 |      3.842 |           10000 | 17632640
> 
> 
> **********************************************************************
> This e-mail is confidential and for the individual or entity named above and may contain privileged information. If you are not the intended recipient, please notify us immediately by return e-mail or telephone and destroy this message. This communication is for informational purp...{{dropped:22}}
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From khoxsey at gmail.com  Wed Nov 21 21:28:40 2012
From: khoxsey at gmail.com (Kent Hoxsey)
Date: Wed, 21 Nov 2012 12:28:40 -0800
Subject: [R-SIG-Finance] Millisecond timestamp from PgSql using DBI /
	RPostgreSQL ? Anyway to set up a default timeseries
	format	for the timestamp type?
In-Reply-To: <3B2222DFBE50384FB4415F72FDF4BEBD0103A9@NY1PPEXMBX01.fnysllc.com>
References: <3B2222DFBE50384FB4415F72FDF4BEBD01035D@NY1PPEXMBX01.fnysllc.com>
	<087EF541-5FB7-4860-A0E6-C4F262EDE214@gmail.com>
	<3B2222DFBE50384FB4415F72FDF4BEBD0103A9@NY1PPEXMBX01.fnysllc.com>
Message-ID: <F9F95C8E-A7E7-4A58-BDA3-005AF6EDA25A@gmail.com>

Ah, now it would appear you are asking simple R questions (rather than complicated finance questions) so I am going to point you toward some good sources. You will definitely want to do a little spelunking in the help, and there's a ton of good stuff (including examples) for working with time series on Stack Overflow (esp search for topics tagged with "r" and "xts").

Display of the number of digits is controlled by the options() function, read about it with help(options) and set it with something like: options(digits=10). You will want to read up on POSIXct(), particularly the "Sub-second Accuracy" section.

Your SQL  is most likely coming back into R as a dataframe (help(data.frame)) which you can look at using head() or tail() or str(). In combination with the digits settings, you will likely be able to see all of the digits you seek.

On Nov 21, 2012, at 12:22 PM, Michael Lyszczek wrote:

> I am now doing this : 
> 
> select cast(extract(epoch from timestamp) as float) from trades order by timestamp;
> 
> this gives me a list that looks like .....
> 1353381185.089
> 1353381185.089
>  1353381189.96
>  1353381189.96
>  1353381189.96
> 1353381190.353
> 1353381190.353
> 1353381190.353
> 1353381191.139
> 1353381191.139
> 1353381191.139
>  1353381256.04
> 1353381855.805
>  1353381864.52
> 1353384140.324
> 
> Etc....
> 
> I try to bring it into R the same way, so new query:
> 
> NGZ2zoo <- dbGetQuery(con, "select cast(extract(epoch from timestamp) as float), instrument_id, trade_size, trade_price, exchange_generated_price, trade_id, agressor_side_isbuy from trades where trades.instrument_id = (select CAST(max(securities.\"UnderlyingSymbol\") as INT) from securities where securities.\"FNYShortName\" = 'iNGZ2')");
> Summary(NGZ2zoo)
>   date_part        instrument_id      trade_size     trade_price  
> Min.   :1.35e+09   Min.   :584445   Min.   : 2500   Min.   :3708  
> 1st Qu.:1.35e+09   1st Qu.:584445   1st Qu.: 2500   1st Qu.:3742  
> Median :1.35e+09   Median :584445   Median : 2500   Median :3760  
> Mean   :1.35e+09   Mean   :584445   Mean   : 3070   Mean   :3759  
> 3rd Qu.:1.35e+09   3rd Qu.:584445   3rd Qu.: 2500   3rd Qu.:3776  
> Max.   :1.35e+09   Max.   :584445   Max.   :70000   Max.   :3833  
> exchange_generated_price    trade_id        agressor_side_isbuy
> Mode :logical            Min.   :65001155   Min.   :-1.000     
> FALSE:2761               1st Qu.:65767044   1st Qu.:-1.000     
> TRUE :474                Median :66313346   Median : 0.000     
> NA's :0                  Mean   :66306294   Mean   :-0.068     
>                          3rd Qu.:66880936   3rd Qu.: 1.000     
>                          Max.   :67377417   Max.   : 1.000     
> 
> as.POSIXct(NGZ2zoo$date_part, origin="1970-01-01")
> yields:
> [3199] "2012-11-20 02:12:29 EST" "2012-11-20 00:29:30 EST"
> [3201] "2012-11-20 02:15:27 EST" "2012-11-20 00:29:31 EST"
> [3203] "2012-11-20 00:29:31 EST" "2012-11-20 00:29:33 EST"
> [3205] "2012-11-20 02:15:28 EST" "2012-11-20 02:15:33 EST"
> [3207] "2012-11-20 02:15:33 EST" "2012-11-20 02:16:11 EST"
> [3209] "2012-11-20 02:18:21 EST" "2012-11-20 02:18:58 EST"
> [3211] "2012-11-20 00:29:33 EST" "2012-11-20 00:29:34 EST"
> [3213] "2012-11-20 00:29:40 EST" "2012-11-20 02:22:04 EST"
> [3215] "2012-11-20 00:29:43 EST" "2012-11-20 02:22:31 EST"
> [3217] "2012-11-20 02:22:33 EST" "2012-11-20 02:26:23 EST"
> [3219] "2012-11-20 02:26:23 EST" "2012-11-20 02:27:53 EST"
> [3221] "2012-11-20 02:29:30 EST" "2012-11-20 02:29:36 EST"
> [3223] "2012-11-20 02:29:39 EST" "2012-11-20 02:47:05 EST"
> [3225] "2012-11-20 02:47:05 EST" "2012-11-20 02:47:05 EST"
> [3227] "2012-11-20 02:51:25 EST" "2012-11-20 02:53:37 EST"
> [3229] "2012-11-20 02:53:44 EST" "2012-11-20 02:55:53 EST"
> [3231] "2012-11-20 02:58:20 EST" "2012-11-20 03:14:16 EST"
> [3233] "2012-11-20 03:24:15 EST" "2012-11-20 03:24:24 EST"
> [3235] "2012-11-20 04:02:20 EST"
> 
> 
> Even if I just do the system time:
>> as.POSIXct(Sys.time(),  format = "%Y-%m-%d %H:%M:%OS")
> [1] "2012-11-21 15:07:59 EST"
> 
> 
> Is it just stored as a float? Or numeric? 
> 
> Any way you can see the actual value, not scientific notation?
> 
> Thanks so much,
> 
> Mike
> 
> -----Original Message-----
> From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Kent Hoxsey
> Sent: Wednesday, November 21, 2012 3:03 PM
> To: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] Millisecond timestamp from PgSql using DBI / RPostgreSQL ? Anyway to set up a default timeseries format for the timestamp type?
> 
> After working through a similar set of issues a while back, I discovered this very useful web page:
> 
> http://www.epochconverter.com/
> 
> Short summary: use your RDBMS to do the conversion to epoch time, and hand that number to R. Do not write SQL to write text to parse in R.
> 
> In my experience, the task of converting from a string representation to POSIXct representation in R can be quite, erm, tedious when you're working with a lot of data. In contrast, doing the conversion in a source database (Oracle for me) is really fast, as are the downstream operations in R.
> 
> Caveat: I have not attempted to preserve or work with the millis, so you might need to do some prototyping to get your conversion right coming out Postgres, but that web site includes quite a bit of discussion about the topic.
> 
> HTH.
> On Nov 21, 2012, at 10:16 AM, Michael Lyszczek wrote:
> 
>> Hi,
>> 
>> I am new to R and have been really having a great time dealing with millisecond timestamps in financial data.
>> 
>> I can get them to work in R using read.csv() then then converting the time stamp column using  as.POSIXct(DATA$TIMESTAMP, format = "%Y-%m-%d %H:%M:%OS");
>> 
>> However, when I use DBI and PgSql to query a table for ticks / bbo I have no idea how to specify not to drop off the trailing millisecond.
>> <code>
>> 
>> options(digs.secs = 3);
>> 
>> library("DBI")
>> library("RPostgreSQL")
>> 
>> drv <- dbDriver("PostgreSQL")
>> con <- dbConnect(drv, dbname="market_data", host="host", user="user", password="password")
>> NGZ2 <- dbGetQuery(con, "select * from trades blah blah blah");
>> 
>> </code>
>> 
>> Summary(NGZ2) yields:
>>> summary(NGZ2zoo)
>> instrument_id    table_trade_id      trade_size     trade_price
>> Min.   :584445   Min.   :2786130   Min.   : 2500   Min.   :3708
>> 1st Qu.:584445   1st Qu.:2790335   1st Qu.: 2500   1st Qu.:3742
>> Median :584445   Median :2795493   Median : 2500   Median :3760
>> Mean   :584445   Mean   :2795617   Mean   : 3070   Mean   :3759
>> 3rd Qu.:584445   3rd Qu.:2800727   3rd Qu.: 2500   3rd Qu.:3776
>> Max.   :584445   Max.   :2806760   Max.   :70000   Max.   :3833
>> exchange_generated_price    trade_id          timestamp
>> Mode :logical            Min.   :65001155   Min.   :2012-11-19 00:49:07
>> FALSE:2761               1st Qu.:65767044   1st Qu.:2012-11-19 14:25:28
>> TRUE :474                Median :66313346   Median :2012-11-19 16:25:25
>> NA's :0                  Mean   :66306294   Mean   :2012-11-19 16:23:35
>>                         3rd Qu.:66880936   3rd Qu.:2012-11-19 18:50:35
>>                         Max.   :67377417   Max.   :2012-11-19 23:02:20
>> agressor_side_isbuy
>> Min.   :-1.00000
>> 1st Qu.:-1.00000
>> Median : 0.00000
>> Mean   :-0.06801
>> 3rd Qu.: 1.00000
>> Max.   : 1.00000
>> 
>> 
>> Meanwhile using a read.csv() for a similar dataset yields:
>> 
>> 
>> NGX2  <- read.csv("iNGCal1310-12-2012.csv", header=TRUE)
>> 
>> 
>> 
>>> summary(NGX2)
>> 
>>                  TIMESTAMP         BID_SIZE          BID
>> 
>> 2012-10-22 16:04:19.561:    12   Min.   : 2500   Min.   :3.795
>> 
>> 2012-10-22 13:21:33.533:    11   1st Qu.: 2500   1st Qu.:3.911
>> 
>> 2012-10-22 13:54:06.927:    11   Median : 2500   Median :3.927
>> 
>> 2012-10-22 14:44:43.331:    11   Mean   : 4356   Mean   :3.929
>> 
>> 2012-10-22 15:50:03.755:    11   3rd Qu.: 5000   3rd Qu.:3.943
>> 
>> 2012-10-22 16:09:08.757:    11   Max.   :15000   Max.   :3.989
>> 
>> (Other)                :119621
>> 
>>     ASK           ASK_SIZE
>> 
>> Min.   :3.904   Min.   : 2500
>> 
>> 1st Qu.:3.919   1st Qu.: 2500
>> 
>> Median :3.935   Median : 5000
>> 
>> Mean   :3.938   Mean   : 4667
>> 
>> 3rd Qu.:3.950   3rd Qu.: 7500
>> 
>> Max.   :4.007   Max.   :15000
>> 
>> 
>> 
>> After processing with as.PosixCT:
>> 
>> 
>> 
>>> NGX2$TS <-as.POSIXct(NGX2$TIMESTAMP, format = "%Y-%m-%d %H:%M:%OS");
>> 
>>> summary(NGX2)
>> 
>>                  TIMESTAMP         BID_SIZE          BID
>> 
>> 2012-10-22 16:04:19.561:    12   Min.   : 2500   Min.   :3.795
>> 
>> 2012-10-22 13:21:33.533:    11   1st Qu.: 2500   1st Qu.:3.911
>> 
>> 2012-10-22 13:54:06.927:    11   Median : 2500   Median :3.927
>> 
>> 2012-10-22 14:44:43.331:    11   Mean   : 4356   Mean   :3.929
>> 
>> 2012-10-22 15:50:03.755:    11   3rd Qu.: 5000   3rd Qu.:3.943
>> 
>> 2012-10-22 16:09:08.757:    11   Max.   :15000   Max.   :3.989
>> 
>> (Other)                :119621
>> 
>>     ASK           ASK_SIZE           TS
>> 
>> Min.   :3.904   Min.   : 2500   Min.   :2012-10-22 00:00:00
>> 
>> 1st Qu.:3.919   1st Qu.: 2500   1st Qu.:2012-10-22 13:59:36
>> 
>> Median :3.935   Median : 5000   Median :2012-10-22 14:56:57
>> 
>> Mean   :3.938   Mean   : 4667   Mean   :2012-10-22 14:52:21
>> 
>> 3rd Qu.:3.950   3rd Qu.: 7500   3rd Qu.:2012-10-22 16:04:16
>> 
>> Max.   :4.007   Max.   :15000   Max.   :2012-10-22 16:52:08
>> 
>> 
>> 
>> 
>> Is there any way to specify date format for a dbGetQuery () ?
>> 
>> 
>> Straight from SQL:
>> instrument_id |         timestamp          | best_bid_size | best_bid | best_offer | best_offer_size | data_id
>> ---------------+----------------------------+---------------+----------+------------+-----------------+----------
>>       592802 | 2012-11-19 13:39:52.855-05 |          5000 |    3.864 |      3.872 |            7500 | 17632624
>>      1461673 | 2012-11-19 13:39:52.855-05 |          5000 |    -0.26 |     -0.237 |            2500 | 17632625
>>       592790 | 2012-11-19 13:39:52.855-05 |          5000 |    3.951 |       3.96 |            2500 | 17632626
>>       595724 | 2012-11-19 13:39:52.855-05 |          7500 |   -0.404 |      -0.37 |            2500 | 17632627
>>       592792 | 2012-11-19 13:39:52.855-05 |          7500 |    3.897 |        3.9 |           10000 | 17632628
>>       592796 | 2012-11-19 13:39:52.855-05 |          2500 |    3.865 |      3.868 |           10000 | 17632629
>>       592792 | 2012-11-19 13:39:52.855-05 |         10000 |    3.897 |        3.9 |           10000 | 17632630
>>       592796 | 2012-11-19 13:39:52.855-05 |          5000 |    3.865 |      3.868 |           10000 | 17632631
>>       592787 | 2012-11-19 13:39:52.856-05 |         10000 |    3.837 |      3.842 |           10000 | 17632632
>>       592792 | 2012-11-19 13:39:52.856-05 |          2500 |    3.898 |        3.9 |           10000 | 17632633
>>       592793 | 2012-11-19 13:39:52.856-05 |         10000 |    3.887 |      3.891 |           10000 | 17632634
>>       592796 | 2012-11-19 13:39:52.856-05 |          7500 |    3.865 |      3.868 |           10000 | 17632635
>>       592787 | 2012-11-19 13:39:52.856-05 |         12500 |    3.837 |      3.842 |           10000 | 17632636
>>       592792 | 2012-11-19 13:39:52.856-05 |          5000 |    3.898 |        3.9 |           10000 | 17632637
>>       592793 | 2012-11-19 13:39:52.856-05 |         12500 |    3.887 |      3.891 |           10000 | 17632638
>>       592796 | 2012-11-19 13:39:52.856-05 |         10000 |    3.865 |      3.868 |           10000 | 17632639
>>       592787 | 2012-11-19 13:39:52.856-05 |          2500 |    3.838 |      3.842 |           10000 | 17632640
>> 
>> 
>> **********************************************************************
>> This e-mail is confidential and for the individual or entity named above and may contain privileged information. If you are not the intended recipient, please notify us immediately by return e-mail or telephone and destroy this message. This communication is for informational purp...{{dropped:22}}
>> 
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jeff.a.ryan at gmail.com  Wed Nov 21 22:33:56 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Wed, 21 Nov 2012 15:33:56 -0600
Subject: [R-SIG-Finance] Millisecond timestamp from PgSql using DBI /
 RPostgreSQL ? Anyway to set up a default timeseries format for the
 timestamp type?
In-Reply-To: <F9F95C8E-A7E7-4A58-BDA3-005AF6EDA25A@gmail.com>
References: <3B2222DFBE50384FB4415F72FDF4BEBD01035D@NY1PPEXMBX01.fnysllc.com>
	<087EF541-5FB7-4860-A0E6-C4F262EDE214@gmail.com>
	<3B2222DFBE50384FB4415F72FDF4BEBD0103A9@NY1PPEXMBX01.fnysllc.com>
	<F9F95C8E-A7E7-4A58-BDA3-005AF6EDA25A@gmail.com>
Message-ID: <CABDUZc_nkRBB-OOi+gSpoUok8gjVtx7nOijB+BQ6gtg8z_vHKw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121121/49775d21/attachment.pl>

From matthieu.stigler at gmail.com  Thu Nov 22 16:56:32 2012
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Thu, 22 Nov 2012 16:56:32 +0100
Subject: [R-SIG-Finance] question on package plm
In-Reply-To: <1353498695.20006.YahooMailNeo@web163804.mail.gq1.yahoo.com>
References: <1353498695.20006.YahooMailNeo@web163804.mail.gq1.yahoo.com>
Message-ID: <CAEYvig+8VHvXxT+V_56VYRqmExQ3hnWZa+n0-OrYsfshX1GCDw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121122/0f443cf5/attachment.pl>

From gsee000 at gmail.com  Sun Nov 25 16:03:08 2012
From: gsee000 at gmail.com (G See)
Date: Sun, 25 Nov 2012 09:03:08 -0600
Subject: [R-SIG-Finance] chart_Series with knitr markdown
Message-ID: <CA+xi=qZFWQwD623732fWQ9P6c4WECpmWfePse0rZK-=8RVPN6Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121125/141c738d/attachment.pl>

From n-e-w at qtradr.net  Sun Nov 25 21:53:23 2012
From: n-e-w at qtradr.net (Nick White)
Date: Mon, 26 Nov 2012 07:53:23 +1100
Subject: [R-SIG-Finance] chart_Series with knitr markdown
In-Reply-To: <CA+xi=qZFWQwD623732fWQ9P6c4WECpmWfePse0rZK-=8RVPN6Q@mail.gmail.com>
References: <CA+xi=qZFWQwD623732fWQ9P6c4WECpmWfePse0rZK-=8RVPN6Q@mail.gmail.com>
Message-ID: <CAH+4RFvNvypzcZu=PEHfyoHLP7-dwe2WR+yQm6s0Hnsnt_4kkQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121126/a3c34d7d/attachment.pl>

From gsee000 at gmail.com  Sun Nov 25 22:13:33 2012
From: gsee000 at gmail.com (G See)
Date: Sun, 25 Nov 2012 15:13:33 -0600
Subject: [R-SIG-Finance] chart_Series with knitr markdown
In-Reply-To: <CAH+4RFvNvypzcZu=PEHfyoHLP7-dwe2WR+yQm6s0Hnsnt_4kkQ@mail.gmail.com>
References: <CA+xi=qZFWQwD623732fWQ9P6c4WECpmWfePse0rZK-=8RVPN6Q@mail.gmail.com>
	<CAH+4RFvNvypzcZu=PEHfyoHLP7-dwe2WR+yQm6s0Hnsnt_4kkQ@mail.gmail.com>
Message-ID: <CA+xi=qadb-=tewPSwHjo1NWd=vEvPi5bebPkiz3uFa+h2P9k4A@mail.gmail.com>

Hi Nick,

Thanks for the suggestion.  Unfortunately it doesn't help.  The
problem seems to occur when new.replot() is called after chartSeries()
(NO underscore)

Here is a new RPub to demostrate the same issue.

http://rpubs.com/gsee/chart_Series_knit2

And the markdown for that is:

Zeroing in on chart_Series issue
========================================================

```{r message=FALSE}
library(quantmod)
getSymbols("SPY", src='yahoo')
```
This looks fine
----

```{r figwidth=7, fig.height=6}
chartSeries(SPY)
```

This looks wrong
----

```{r}
cs <- new.replot()
```


Garrett

On Sun, Nov 25, 2012 at 2:53 PM, Nick White <n-e-w at qtradr.net> wrote:
> I've not seen this issue before.
>
> Try passing the ` fig.align="left" ` argument...ie:
>
> {r fig.width=7, fig.height=6, fig.align='left'}
>
>
> On Mon, Nov 26, 2012 at 2:03 AM, G See <gsee000 at gmail.com> wrote:
>>
>> I'm having trouble getting chart_Series to render properly with markdown
>> to
>> html.  Are others using chart_Series with markdown?  What am I doing
>> wrong?
>>
>> The Pub at this link should be self explanatory:
>> http://rpubs.com/gsee/chart_Series_knit
>>
>> The .Rmd file used to produce it is below.
>>
>> Thanks,
>> Garrett
>>
>> Why doesn't chart_Series look right?
>> ========================================================
>>
>> ```{r message=FALSE}
>> library(quantmod)
>> getSymbols("SPY", src='yahoo')
>> ```
>> This looks fine
>> ----
>> ```{r fig.width=7, fig.height=6}
>> chartSeries(SPY)
>> ```
>> But, why does this look wrong? i.e. instead of being aligned at the left
>> margin,
>> there is a box with a question mark.
>> ```{r fig.width=7, fig.height=6}
>> chart_Series(SPY)
>> ```
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>
>


From pgcristi at yahoo.com  Tue Nov 27 21:20:51 2012
From: pgcristi at yahoo.com (Cristian Popescu)
Date: Tue, 27 Nov 2012 22:20:51 +0200
Subject: [R-SIG-Finance] Quantstrat optimal portfolio & dynamic
	core-satellite strategy
Message-ID: <F04DB5B8-05ED-4E60-9D20-AE5A3AD408B1@yahoo.com>

Dear all,

I am trying to create a dynamic core-satellite strategy and backtest it in R. So far, I think that the best solution to be able to "migrate" capital/equity from the core to a satellite and back is to create 1 account but have 2 different portfolios for the account, each with its specific symbols allocated to it: 
core.symbols <- c('SPY', 'BWX')
satellite.symbols <-c('JNK', 'GLD')
Thus using one of the 2 above for its designated portfolio, I think would be easier to assign symbols to the specific part of the strategy. 

My questions are:
1) how can i assign capital to one of the portfolios and be able to analyze and possibly change it after each day/week/month or whatever the time step will be?
2) how can i optimize my portfolio on a rolling time frame (tried to use fPortfolio but I need to change to classes back and forth from xts & zoo to timeSeries and back). Shoult i recreate an optimization function?


Looking forward to your responses, and if you have any comments regarding the possible ways to do this, do not hesitate to do so.
Thank you in advance.

Best regards,

Cristian Popescu


From brian at braverock.com  Wed Nov 28 01:20:43 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 27 Nov 2012 18:20:43 -0600
Subject: [R-SIG-Finance] Quantstrat optimal portfolio & dynamic
 core-satellite strategy
In-Reply-To: <F04DB5B8-05ED-4E60-9D20-AE5A3AD408B1@yahoo.com>
References: <F04DB5B8-05ED-4E60-9D20-AE5A3AD408B1@yahoo.com>
Message-ID: <50B558DB.3090301@braverock.com>

On 11/27/2012 02:20 PM, Cristian Popescu wrote:
> Dear all,
>
> I am trying to create a dynamic core-satellite strategy and backtest it in R. So far, I think that the best solution to be able to "migrate" capital/equity from the core to a satellite and back is to create 1 account but have 2 different portfolios for the account, each with its specific symbols allocated to it:
> core.symbols <- c('SPY', 'BWX')
> satellite.symbols <-c('JNK', 'GLD')
> Thus using one of the 2 above for its designated portfolio, I think would be easier to assign symbols to the specific part of the strategy.
>
> My questions are:
> 1) how can i assign capital to one of the portfolios and be able to analyze and possibly change it after each day/week/month or whatever the time step will be?
> 2) how can i optimize my portfolio on a rolling time frame (tried to use fPortfolio but I need to change to classes back and forth from xts & zoo to timeSeries and back). Shoult i recreate an optimization function?
>
>
> Looking forward to your responses, and if you have any comments regarding the possible ways to do this, do not hesitate to do so.
> Thank you in advance.

I'll try to make a longer answer sometime tomorrow, but I wanted to give 
you the short answer now.

The short answer is 'rebalance' rules.  These currently only work on one 
portfolio, but I don't think that will be a problem, as you can simply 
have different rules for 'core' and 'satellite' in the single portfolio.

See the 'faber' demo for one without rebalance rules, and 'faber_rebal' 
for the same strategy with a quarterly rebalance rule.  As with 
everything in quantstrat, it is modular, and you can write a custom 
rebalance rule that will be aware of the current state of the portfolio 
at the time the rebalance rule(s) is evaluated.

Regards,

    - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From maxlklweryc at gmail.com  Wed Nov 28 14:29:03 2012
From: maxlklweryc at gmail.com (Maximilian Lklweryc)
Date: Wed, 28 Nov 2012 14:29:03 +0100
Subject: [R-SIG-Finance] Plot GBM density in a 3 d plot
Message-ID: <CAK-iY6OjDC7+poskOTw-51woS6sq1-MeBP3KCFjNGUTsHHAeNA@mail.gmail.com>

Hi,
I have the following problem:
I simulated a lot of final values of stock prices. So for example when
I use Geometric Brownian Motion the final values should be lognormal
distributet, this plot can be seen here:

http://de.wikipedia.org/wiki/Datei:GBM_density_develop.png


I want to recreate the plot. I have adjusted color and so, but I do
not know how to do this? My example with a wrong formula is:

sigma<- 0.1
mu<-0.1

farbe<-rgb(85, 141, 85, maxColorValue=255)

x <- seq(-40, 40, length= 10)
y <- c(1:22)
f <- function(x,y) { r <-
1/(sqrt(2*pi)*sigma*y*x)*exp(-(log(x)-mu*y)^2/2*(sigma*y)^2); r }
z <- outer(x, y, f)

z[is.na(z)] <- 1
op <- par(bg = "gray80")
persp(z, theta = -60, phi = 30, expand = 0.5, col = farbe,
     ticktype = "detailed",
      xlab = "X", ylab = "Y", zlab = "Z"
)

First of all I want to have the theoretical 3d density. Later on I
want to create a second plot with the empirical 3d density. I have the
simulated values but I do not know how to plot this?

Thanks a lot for your help!


From daniel.cegielka at gmail.com  Wed Nov 28 14:39:58 2012
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Wed, 28 Nov 2012 14:39:58 +0100
Subject: [R-SIG-Finance] Plot GBM density in a 3 d plot
In-Reply-To: <CAK-iY6OjDC7+poskOTw-51woS6sq1-MeBP3KCFjNGUTsHHAeNA@mail.gmail.com>
References: <CAK-iY6OjDC7+poskOTw-51woS6sq1-MeBP3KCFjNGUTsHHAeNA@mail.gmail.com>
Message-ID: <CAPLrYETORATcoROD5St=VsPT1_rpme-D8n0MqO4_867+2MjEVw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121128/e918b643/attachment.pl>

From Gordon.Morrison at ftse.com  Wed Nov 28 15:39:29 2012
From: Gordon.Morrison at ftse.com (Gordon Morrison)
Date: Wed, 28 Nov 2012 14:39:29 +0000
Subject: [R-SIG-Finance] java.lang.OutOfMemoryError: unable to create new
	native thread
Message-ID: <887B4B788BA1F0429670B96750DA450401D9836B2B@EXCH07B.ftse.com>

Hi

I am having a problem connecting to Bloomberg.

Here are the symptoms ....

> library(Rbbg)
Loading required package: rJava
> conName <- blpConnect()
R version 2.15.0 (2012-03-30) 
rJava Version 0.9-3 
Rbbg Version 0.4-153 
Java environment initialized successfully.
Looking for most recent blpapi3.jar file...
Adding C:\blp\API\APIv3\JavaAPI\v3.4.8.1\lib\blpapi3.jar to Java classpath
Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) : 
  java.lang.OutOfMemoryError: unable to create new native thread

> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United Kingdom.1252  LC_CTYPE=English_United Kingdom.1252   
[3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C                           
[5] LC_TIME=English_United Kingdom.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] gdata_2.12.0 Rbbg_0.4-153 rJava_0.9-3 

loaded via a namespace (and not attached):
[1] gtools_2.7.0 tools_2.15.0

I am running Java version "1.6.0_16"

I can connect to Bloomberg via the API

Does anyone have any ideas?


Gordon Morrison



______________________________________________________________________
This e-mail and any attachments may contain confidential...{{dropped:22}}


From j_cuisinier at hotmail.com  Wed Nov 28 16:20:59 2012
From: j_cuisinier at hotmail.com (julien cuisinier)
Date: Wed, 28 Nov 2012 16:20:59 +0100
Subject: [R-SIG-Finance] java.lang.OutOfMemoryError: unable to create
 new native thread
In-Reply-To: <887B4B788BA1F0429670B96750DA450401D9836B2B@EXCH07B.ftse.com>
References: <887B4B788BA1F0429670B96750DA450401D9836B2B@EXCH07B.ftse.com>
Message-ID: <COL125-W15B7B632F422A37EC4DA568F5D0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121128/ecd63de8/attachment.pl>

From sf99167 at yahoo.com  Wed Nov 28 16:50:49 2012
From: sf99167 at yahoo.com (sean fallon)
Date: Wed, 28 Nov 2012 07:50:49 -0800 (PST)
Subject: [R-SIG-Finance] Plot GBM density in a 3 d plot
In-Reply-To: <CAPLrYETORATcoROD5St=VsPT1_rpme-D8n0MqO4_867+2MjEVw@mail.gmail.com>
References: <CAK-iY6OjDC7+poskOTw-51woS6sq1-MeBP3KCFjNGUTsHHAeNA@mail.gmail.com>
	<CAPLrYETORATcoROD5St=VsPT1_rpme-D8n0MqO4_867+2MjEVw@mail.gmail.com>
Message-ID: <1354117849.43149.YahooMailNeo@web163805.mail.gq1.yahoo.com>

Hi Daniel,
?
Am trying to replicate the 3D chart but the URL for US treasuries has been changed. Have tried getting the latest URL into the code but coming up short. Where am I going wrong. 
?
The new URL?is http://www.treasury.gov/resource-center/data-chart-center/interest-rates/Pages/TextView.aspx?data=yieldYear&year=2008

I have tried putting it into the code but come up with the following error
?
> TR<-getUSTreasuries("2008")
http://www.treasury.gov/resource-center/data-chart-center/interest-rates/Pages/TextView.aspx_2008.shtml 
> chartSeries3d0(TR)
Error in if (on == "years") { : missing value where TRUE/FALSE needed

I am attaching the R code for your perusal/review/correction. Please do let me know where I am going wrong.?Any advise/constructive criticism highly appreciated.
?
regards
?
Sean? 

________________________________
 From: Daniel Cegie?ka <daniel.cegielka at gmail.com>
To: Maximilian Lklweryc <maxlklweryc at gmail.com> 
Cc: r-sig-finance at r-project.org 
Sent: Wednesday, November 28, 2012 7:09 PM
Subject: Re: [R-SIG-Finance] Plot GBM density in a 3 d plot
  
Hi, this may be useful as an example:

http://www.quantmod.com/examples/chartSeries3d/
http://www.quantmod.com/examples/chartSeries3d/chartSeries3d.alpha.R

Best regards,
Daniel

??? [[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121128/9ba43791/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: chartSeries3d.alpha.R
Type: application/octet-stream
Size: 4280 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121128/9ba43791/attachment.obj>

From georgepfoster at gmail.com  Wed Nov 28 18:11:24 2012
From: georgepfoster at gmail.com (George Foster)
Date: Wed, 28 Nov 2012 11:11:24 -0600
Subject: [R-SIG-Finance] java.lang.OutOfMemoryError: unable to create
 new native thread
In-Reply-To: <COL125-W15B7B632F422A37EC4DA568F5D0@phx.gbl>
References: <887B4B788BA1F0429670B96750DA450401D9836B2B@EXCH07B.ftse.com>
	<COL125-W15B7B632F422A37EC4DA568F5D0@phx.gbl>
Message-ID: <CAB+a1w7xTAw+GhzQQk4_kvf=Q0qURCNwipGK3bEKBf-BvJKJBQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121128/3a79d2d2/attachment.pl>

From jeff.a.ryan at gmail.com  Wed Nov 28 18:40:39 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Wed, 28 Nov 2012 11:40:39 -0600
Subject: [R-SIG-Finance] Plot GBM density in a 3 d plot
In-Reply-To: <1354117849.43149.YahooMailNeo@web163805.mail.gq1.yahoo.com>
References: <CAK-iY6OjDC7+poskOTw-51woS6sq1-MeBP3KCFjNGUTsHHAeNA@mail.gmail.com>
	<CAPLrYETORATcoROD5St=VsPT1_rpme-D8n0MqO4_867+2MjEVw@mail.gmail.com>
	<1354117849.43149.YahooMailNeo@web163805.mail.gq1.yahoo.com>
Message-ID: <701C7BEB-D1EA-4572-A458-BE9E38CBE597@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121128/9ccc8a2a/attachment.pl>

From a.efremov at javasmith.org  Wed Nov 28 19:09:31 2012
From: a.efremov at javasmith.org (Alexander Efremov)
Date: Wed, 28 Nov 2012 19:09:31 +0100
Subject: [R-SIG-Finance] java.lang.OutOfMemoryError: unable to create
 new	native thread
In-Reply-To: <887B4B788BA1F0429670B96750DA450401D9836B2B@EXCH07B.ftse.com>
References: <887B4B788BA1F0429670B96750DA450401D9836B2B@EXCH07B.ftse.com>
Message-ID: <50B6535B.6090608@javasmith.org>

hello,

as always you should check the limit of file handles. soft and hard 
limit on linux box. On windowz I have no idea where to look for limit 
settings.

well, close all your windows applications and try again.

alexander

On 11/28/2012 03:39 PM, Gordon Morrison wrote:
> Hi
>
> I am having a problem connecting to Bloomberg.
>
> Here are the symptoms ....
>
>> library(Rbbg)
> Loading required package: rJava
>> conName<- blpConnect()
> R version 2.15.0 (2012-03-30)
> rJava Version 0.9-3
> Rbbg Version 0.4-153
> Java environment initialized successfully.
> Looking for most recent blpapi3.jar file...
> Adding C:\blp\API\APIv3\JavaAPI\v3.4.8.1\lib\blpapi3.jar to Java classpath
> Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) :
>    java.lang.OutOfMemoryError: unable to create new native thread
>
>> sessionInfo()
> R version 2.15.0 (2012-03-30)
> Platform: i386-pc-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=English_United Kingdom.1252  LC_CTYPE=English_United Kingdom.1252
> [3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C
> [5] LC_TIME=English_United Kingdom.1252
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] gdata_2.12.0 Rbbg_0.4-153 rJava_0.9-3
>
> loaded via a namespace (and not attached):
> [1] gtools_2.7.0 tools_2.15.0
>
> I am running Java version "1.6.0_16"
>
> I can connect to Bloomberg via the API
>
> Does anyone have any ideas?
>
>
> Gordon Morrison
>
>
>
> ______________________________________________________________________
> This e-mail and any attachments may contain confidential...{{dropped:22}}
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From tausagi at gmail.com  Thu Nov 29 04:54:36 2012
From: tausagi at gmail.com (Tausagi)
Date: Wed, 28 Nov 2012 19:54:36 -0800 (PST)
Subject: [R-SIG-Finance] java.lang.OutOfMemoryError: unable to create
	new native thread
In-Reply-To: <887B4B788BA1F0429670B96750DA450401D9836B2B@EXCH07B.ftse.com>
References: <887B4B788BA1F0429670B96750DA450401D9836B2B@EXCH07B.ftse.com>
Message-ID: <1354161276674-4651247.post@n4.nabble.com>

I ran into the same problem today. Couldn't figure out how to fix it yet.
Your help will be much appreciated. Thx



--
View this message in context: http://r.789695.n4.nabble.com/java-lang-OutOfMemoryError-unable-to-create-new-native-thread-tp4651150p4651247.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From n-e-w at qtradr.net  Thu Nov 29 07:53:18 2012
From: n-e-w at qtradr.net (Nick White)
Date: Thu, 29 Nov 2012 17:53:18 +1100
Subject: [R-SIG-Finance] java.lang.OutOfMemoryError: unable to create
 new native thread
In-Reply-To: <887B4B788BA1F0429670B96750DA450401D9836B2B@EXCH07B.ftse.com>
References: <887B4B788BA1F0429670B96750DA450401D9836B2B@EXCH07B.ftse.com>
Message-ID: <8382309712264952799@unknownmsgid>

Can you please clarify if this happens with a cold booted machine with
nothing else but R and Bloomberg running -- or if you've already run
other commands.

On Nov 29, 2012, at 1:40, Gordon Morrison <Gordon.Morrison at ftse.com> wrote:

> Hi
>
> I am having a problem connecting to Bloomberg.
>
> Here are the symptoms ....
>
>> library(Rbbg)
> Loading required package: rJava
>> conName <- blpConnect()
> R version 2.15.0 (2012-03-30)
> rJava Version 0.9-3
> Rbbg Version 0.4-153
> Java environment initialized successfully.
> Looking for most recent blpapi3.jar file...
> Adding C:\blp\API\APIv3\JavaAPI\v3.4.8.1\lib\blpapi3.jar to Java classpath
> Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) :
>  java.lang.OutOfMemoryError: unable to create new native thread
>
>> sessionInfo()
> R version 2.15.0 (2012-03-30)
> Platform: i386-pc-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=English_United Kingdom.1252  LC_CTYPE=English_United Kingdom.1252
> [3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C
> [5] LC_TIME=English_United Kingdom.1252
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] gdata_2.12.0 Rbbg_0.4-153 rJava_0.9-3
>
> loaded via a namespace (and not attached):
> [1] gtools_2.7.0 tools_2.15.0
>
> I am running Java version "1.6.0_16"
>
> I can connect to Bloomberg via the API
>
> Does anyone have any ideas?
>
>
> Gordon Morrison
>
>
>
> ______________________________________________________________________
> This e-mail and any attachments may contain confidential...{{dropped:22}}
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From sethy.anmol at gmail.com  Thu Nov 29 08:18:23 2012
From: sethy.anmol at gmail.com (anmol sethy)
Date: Thu, 29 Nov 2012 15:18:23 +0800
Subject: [R-SIG-Finance] java.lang.OutOfMemoryError: unable to create
 new native thread
In-Reply-To: <8382309712264952799@unknownmsgid>
References: <887B4B788BA1F0429670B96750DA450401D9836B2B@EXCH07B.ftse.com>
	<8382309712264952799@unknownmsgid>
Message-ID: <CAMRMz7Jbym-sjtmcuyyDNn01NBcV_XwkaGG0B3_667dK63MZsA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121129/6a584282/attachment.pl>

From Gordon.Morrison at ftse.com  Thu Nov 29 11:21:01 2012
From: Gordon.Morrison at ftse.com (Gordon Morrison)
Date: Thu, 29 Nov 2012 10:21:01 +0000
Subject: [R-SIG-Finance] java.lang.OutOfMemoryError: unable to create
 new native thread
In-Reply-To: <CAMRMz7Jbym-sjtmcuyyDNn01NBcV_XwkaGG0B3_667dK63MZsA@mail.gmail.com>
References: <887B4B788BA1F0429670B96750DA450401D9836B2B@EXCH07B.ftse.com>
	<8382309712264952799@unknownmsgid>
	<CAMRMz7Jbym-sjtmcuyyDNn01NBcV_XwkaGG0B3_667dK63MZsA@mail.gmail.com>
Message-ID: <887B4B788BA1F0429670B96750DA450401D9836EF8@EXCH07B.ftse.com>

It happens with a cold booted machine as well

> library(Rbbg)
Loading required package: rJava
> conName <- blpConnect()
R version 2.15.0 (2012-03-30) 
rJava Version 0.9-3 
Rbbg Version 0.4-153 
Java environment initialized successfully.
Looking for most recent blpapi3.jar file...
Adding C:\blp\API\APIv3\JavaAPI\v3.4.8.1\lib\blpapi3.jar to Java classpath
Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) : 
  java.lang.OutOfMemoryError: unable to create new native thread
> conName <- blpConnect(jvm.params = "-Xmx1024m")
R version 2.15.0 (2012-03-30) 
rJava Version 0.9-3 
Rbbg Version 0.4-153 
Using JVM parameters -Xmx1024m 
Java environment initialized successfully.
Looking for most recent blpapi3.jar file...
Adding C:\blp\API\APIv3\JavaAPI\v3.4.8.1\lib\blpapi3.jar to Java classpath
Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) : 
  java.lang.OutOfMemoryError: unable to create new native thread



Gordon

From: anmol sethy [mailto:sethy.anmol at gmail.com] 
Sent: 29 November 2012 07:18
To: Nick White
Cc: Gordon Morrison; r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] java.lang.OutOfMemoryError: unable to create new native thread

I am having this problem occasionally as well.?
Solution is either a gc() or restart of r terminal . I also notice that it occurs when I am trying to open up fourth or fifth instance of the connection without closing earlier ones.


On Thu, Nov 29, 2012 at 2:53 PM, Nick White <n-e-w at qtradr.net> wrote:
Can you please clarify if this happens with a cold booted machine with
nothing else but R and Bloomberg running -- or if you've already run
other commands.

On Nov 29, 2012, at 1:40, Gordon Morrison <Gordon.Morrison at ftse.com> wrote:

> Hi
>
> I am having a problem connecting to Bloomberg.
>
> Here are the symptoms ....
>
>> library(Rbbg)
> Loading required package: rJava
>> conName <- blpConnect()
> R version 2.15.0 (2012-03-30)
> rJava Version 0.9-3
> Rbbg Version 0.4-153
> Java environment initialized successfully.
> Looking for most recent blpapi3.jar file...
> Adding C:\blp\API\APIv3\JavaAPI\v3.4.8.1\lib\blpapi3.jar to Java classpath
> Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) :
> ?java.lang.OutOfMemoryError: unable to create new native thread
>
>> sessionInfo()
> R version 2.15.0 (2012-03-30)
> Platform: i386-pc-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=English_United Kingdom.1252 ?LC_CTYPE=English_United Kingdom.1252
> [3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C
> [5] LC_TIME=English_United Kingdom.1252
>
> attached base packages:
> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>
> other attached packages:
> [1] gdata_2.12.0 Rbbg_0.4-153 rJava_0.9-3
>
> loaded via a namespace (and not attached):
> [1] gtools_2.7.0 tools_2.15.0
>
> I am running Java version "1.6.0_16"
>
> I can connect to Bloomberg via the API
>
> Does anyone have any ideas?
>
>
> Gordon Morrison
>
>
>
> ______________________________________________________________________
> This e-mail and any attachments may contain confidential...{{dropped:22}}
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

______________________________________________________________________
This e-mail and any attachments may contain confidential or privileged
information. It is intended solely for the ordinary user of the e-mail
address to which it is addressed. If you are not the intended
recipient, please contact the sender immediately and delete this
message. Any unauthorised use or dissemination of this message in
whole or in part is strictly prohibited. Unless otherwise stated, any
views expressed are those of the individual sender and not of FTSE. FTSE does not guarantee
that the integrity of this communication has been maintained nor that
this communication is free of viruses, interceptions or interference.

FTSE is a limited liability company registered
in England and Wales under registered number 03108236 with its
registered office at 12th Floor, 10 Upper Bank Street, Canary Wharf,
London, E14 5NP.

FTSE's VAT number is: GB 740 4594 35.

For further information about FTSE visit
http://www.ftse.com


From Gordon.Morrison at ftse.com  Thu Nov 29 11:26:02 2012
From: Gordon.Morrison at ftse.com (Gordon Morrison)
Date: Thu, 29 Nov 2012 10:26:02 +0000
Subject: [R-SIG-Finance] java.lang.OutOfMemoryError: unable to create
 new native thread
In-Reply-To: <887B4B788BA1F0429670B96750DA450401D9836EF8@EXCH07B.ftse.com>
References: <887B4B788BA1F0429670B96750DA450401D9836B2B@EXCH07B.ftse.com>
	<8382309712264952799@unknownmsgid>
	<CAMRMz7Jbym-sjtmcuyyDNn01NBcV_XwkaGG0B3_667dK63MZsA@mail.gmail.com>
	<887B4B788BA1F0429670B96750DA450401D9836EF8@EXCH07B.ftse.com>
Message-ID: <887B4B788BA1F0429670B96750DA450401D9836F07@EXCH07B.ftse.com>

Sorry, perhaps some more information.

If I run the code from RStudio, I get the errors already mentioned. But if I run it just from the RGui, the connection is made and data can be downloaded.

Gordon



-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Gordon Morrison
Sent: 29 November 2012 10:21
To: 'anmol sethy'; 'Nick White'
Cc: 'r-sig-finance at r-project.org'
Subject: Re: [R-SIG-Finance] java.lang.OutOfMemoryError: unable to create new native thread

It happens with a cold booted machine as well

> library(Rbbg)
Loading required package: rJava
> conName <- blpConnect()
R version 2.15.0 (2012-03-30) 
rJava Version 0.9-3 
Rbbg Version 0.4-153 
Java environment initialized successfully.
Looking for most recent blpapi3.jar file...
Adding C:\blp\API\APIv3\JavaAPI\v3.4.8.1\lib\blpapi3.jar to Java classpath
Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) : 
  java.lang.OutOfMemoryError: unable to create new native thread
> conName <- blpConnect(jvm.params = "-Xmx1024m")
R version 2.15.0 (2012-03-30) 
rJava Version 0.9-3 
Rbbg Version 0.4-153 
Using JVM parameters -Xmx1024m 
Java environment initialized successfully.
Looking for most recent blpapi3.jar file...
Adding C:\blp\API\APIv3\JavaAPI\v3.4.8.1\lib\blpapi3.jar to Java classpath
Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) : 
  java.lang.OutOfMemoryError: unable to create new native thread



Gordon

From: anmol sethy [mailto:sethy.anmol at gmail.com] 
Sent: 29 November 2012 07:18
To: Nick White
Cc: Gordon Morrison; r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] java.lang.OutOfMemoryError: unable to create new native thread

I am having this problem occasionally as well.?
Solution is either a gc() or restart of r terminal . I also notice that it occurs when I am trying to open up fourth or fifth instance of the connection without closing earlier ones.


On Thu, Nov 29, 2012 at 2:53 PM, Nick White <n-e-w at qtradr.net> wrote:
Can you please clarify if this happens with a cold booted machine with
nothing else but R and Bloomberg running -- or if you've already run
other commands.

On Nov 29, 2012, at 1:40, Gordon Morrison <Gordon.Morrison at ftse.com> wrote:

> Hi
>
> I am having a problem connecting to Bloomberg.
>
> Here are the symptoms ....
>
>> library(Rbbg)
> Loading required package: rJava
>> conName <- blpConnect()
> R version 2.15.0 (2012-03-30)
> rJava Version 0.9-3
> Rbbg Version 0.4-153
> Java environment initialized successfully.
> Looking for most recent blpapi3.jar file...
> Adding C:\blp\API\APIv3\JavaAPI\v3.4.8.1\lib\blpapi3.jar to Java classpath
> Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) :
> ?java.lang.OutOfMemoryError: unable to create new native thread
>
>> sessionInfo()
> R version 2.15.0 (2012-03-30)
> Platform: i386-pc-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=English_United Kingdom.1252 ?LC_CTYPE=English_United Kingdom.1252
> [3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C
> [5] LC_TIME=English_United Kingdom.1252
>
> attached base packages:
> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>
> other attached packages:
> [1] gdata_2.12.0 Rbbg_0.4-153 rJava_0.9-3
>
> loaded via a namespace (and not attached):
> [1] gtools_2.7.0 tools_2.15.0
>
> I am running Java version "1.6.0_16"
>
> I can connect to Bloomberg via the API
>
> Does anyone have any ideas?
>
>
> Gordon Morrison
>
>
>
> ______________________________________________________________________
> This e-mail and any attachments may contain confidential...{{dropped:22}}
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

______________________________________________________________________
This e-mail and any attachments may contain confidential or privileged
information. It is intended solely for the ordinary user of the e-mail
address to which it is addressed. If you are not the intended
recipient, please contact the sender immediately and delete this
message. Any unauthorised use or dissemination of this message in
whole or in part is strictly prohibited. Unless otherwise stated, any
views expressed are those of the individual sender and not of FTSE. FTSE does not guarantee
that the integrity of this communication has been maintained nor that
this communication is free of viruses, interceptions or interference.

FTSE is a limited liability company registered
in England and Wales under registered number 03108236 with its
registered office at 12th Floor, 10 Upper Bank Street, Canary Wharf,
London, E14 5NP.

FTSE's VAT number is: GB 740 4594 35.

For further information about FTSE visit
http://www.ftse.com

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

______________________________________________________________________
This e-mail and any attachments may contain confidential or privileged
information. It is intended solely for the ordinary user of the e-mail
address to which it is addressed. If you are not the intended
recipient, please contact the sender immediately and delete this
message. Any unauthorised use or dissemination of this message in
whole or in part is strictly prohibited. Unless otherwise stated, any
views expressed are those of the individual sender and not of FTSE. FTSE does not guarantee
that the integrity of this communication has been maintained nor that
this communication is free of viruses, interceptions or interference.

FTSE is a limited liability company registered
in England and Wales under registered number 03108236 with its
registered office at 12th Floor, 10 Upper Bank Street, Canary Wharf,
London, E14 5NP.

FTSE's VAT number is: GB 740 4594 35.

For further information about FTSE visit
http://www.ftse.com


From john.laing at gmail.com  Thu Nov 29 14:06:09 2012
From: john.laing at gmail.com (John Laing)
Date: Thu, 29 Nov 2012 08:06:09 -0500
Subject: [R-SIG-Finance] java.lang.OutOfMemoryError: unable to create
 new native thread
In-Reply-To: <887B4B788BA1F0429670B96750DA450401D9836F07@EXCH07B.ftse.com>
References: <887B4B788BA1F0429670B96750DA450401D9836B2B@EXCH07B.ftse.com>
	<8382309712264952799@unknownmsgid>
	<CAMRMz7Jbym-sjtmcuyyDNn01NBcV_XwkaGG0B3_667dK63MZsA@mail.gmail.com>
	<887B4B788BA1F0429670B96750DA450401D9836EF8@EXCH07B.ftse.com>
	<887B4B788BA1F0429670B96750DA450401D9836F07@EXCH07B.ftse.com>
Message-ID: <CAA3Wa=v7eU+i_wtMfZScgtvr4r0ou1L5reeoGkP+kTGOxKO41w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121129/eecd9635/attachment.pl>

From Gordon.Morrison at ftse.com  Thu Nov 29 14:25:11 2012
From: Gordon.Morrison at ftse.com (Gordon Morrison)
Date: Thu, 29 Nov 2012 13:25:11 +0000
Subject: [R-SIG-Finance] java.lang.OutOfMemoryError: unable to create
 new native thread
In-Reply-To: <CAA3Wa=v7eU+i_wtMfZScgtvr4r0ou1L5reeoGkP+kTGOxKO41w@mail.gmail.com>
References: <887B4B788BA1F0429670B96750DA450401D9836B2B@EXCH07B.ftse.com>
	<8382309712264952799@unknownmsgid>
	<CAMRMz7Jbym-sjtmcuyyDNn01NBcV_XwkaGG0B3_667dK63MZsA@mail.gmail.com>
	<887B4B788BA1F0429670B96750DA450401D9836EF8@EXCH07B.ftse.com>
	<887B4B788BA1F0429670B96750DA450401D9836F07@EXCH07B.ftse.com>
	<CAA3Wa=v7eU+i_wtMfZScgtvr4r0ou1L5reeoGkP+kTGOxKO41w@mail.gmail.com>
Message-ID: <887B4B788BA1F0429670B96750DA450401D983707D@EXCH07B.ftse.com>

Thanks to all who responded to my problem.

An interim update. I am still not sure what has been happening but Rbbg is now working. 

I use RStudio and recently upgraded to the latest version. It appears that the upgrade did not work as smoothly as it should have done since when I uninstalled and went back to the earlier version of RStudio it started to work again.

I have opened up a discussion thread on RStudio to see if any reader can shed any light on the problem.

When I hear something, I will post again here.

Thanks again

Gordon



From: John Laing [mailto:john.laing at gmail.com] 
Sent: 29 November 2012 13:06
To: Gordon Morrison
Cc: anmol sethy; Nick White; r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] java.lang.OutOfMemoryError: unable to create new native thread

Unfortunately, I don't have much insight into JVM issues. But I found a SO question (http://stackoverflow.com/questions/6754628/eclipse-crashes-with-unable-to-create-new-native-thread-any-ideas-my-setti)?indicating that the thread stack size could be a problem.?What happens if you try this?
conn <- blpConnect(jvm.params="-Xss1024k")

-John

On Thu, Nov 29, 2012 at 5:26 AM, Gordon Morrison <Gordon.Morrison at ftse.com> wrote:
Sorry, perhaps some more information.

If I run the code from RStudio, I get the errors already mentioned. But if I run it just from the RGui, the connection is made and data can be downloaded.

Gordon



-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Gordon Morrison
Sent: 29 November 2012 10:21
To: 'anmol sethy'; 'Nick White'
Cc: 'r-sig-finance at r-project.org'
Subject: Re: [R-SIG-Finance] java.lang.OutOfMemoryError: unable to create new native thread

It happens with a cold booted machine as well

> library(Rbbg)
Loading required package: rJava
> conName <- blpConnect()
R version 2.15.0 (2012-03-30)
rJava Version 0.9-3
Rbbg Version 0.4-153
Java environment initialized successfully.
Looking for most recent blpapi3.jar file...
Adding C:\blp\API\APIv3\JavaAPI\v3.4.8.1\lib\blpapi3.jar to Java classpath
Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) :
? java.lang.OutOfMemoryError: unable to create new native thread
> conName <- blpConnect(jvm.params = "-Xmx1024m")
R version 2.15.0 (2012-03-30)
rJava Version 0.9-3
Rbbg Version 0.4-153
Using JVM parameters -Xmx1024m
Java environment initialized successfully.
Looking for most recent blpapi3.jar file...
Adding C:\blp\API\APIv3\JavaAPI\v3.4.8.1\lib\blpapi3.jar to Java classpath
Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) :
? java.lang.OutOfMemoryError: unable to create new native thread



Gordon

From: anmol sethy [mailto:sethy.anmol at gmail.com]
Sent: 29 November 2012 07:18
To: Nick White
Cc: Gordon Morrison; r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] java.lang.OutOfMemoryError: unable to create new native thread

I am having this problem occasionally as well.?
Solution is either a gc() or restart of r terminal . I also notice that it occurs when I am trying to open up fourth or fifth instance of the connection without closing earlier ones.


On Thu, Nov 29, 2012 at 2:53 PM, Nick White <n-e-w at qtradr.net> wrote:
Can you please clarify if this happens with a cold booted machine with
nothing else but R and Bloomberg running -- or if you've already run
other commands.

On Nov 29, 2012, at 1:40, Gordon Morrison <Gordon.Morrison at ftse.com> wrote:

> Hi
>
> I am having a problem connecting to Bloomberg.
>
> Here are the symptoms ....
>
>> library(Rbbg)
> Loading required package: rJava
>> conName <- blpConnect()
> R version 2.15.0 (2012-03-30)
> rJava Version 0.9-3
> Rbbg Version 0.4-153
> Java environment initialized successfully.
> Looking for most recent blpapi3.jar file...
> Adding C:\blp\API\APIv3\JavaAPI\v3.4.8.1\lib\blpapi3.jar to Java classpath
> Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) :
> ?java.lang.OutOfMemoryError: unable to create new native thread
>
>> sessionInfo()
> R version 2.15.0 (2012-03-30)
> Platform: i386-pc-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=English_United Kingdom.1252 ?LC_CTYPE=English_United Kingdom.1252
> [3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C
> [5] LC_TIME=English_United Kingdom.1252
>
> attached base packages:
> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>
> other attached packages:
> [1] gdata_2.12.0 Rbbg_0.4-153 rJava_0.9-3
>
> loaded via a namespace (and not attached):
> [1] gtools_2.7.0 tools_2.15.0
>
> I am running Java version "1.6.0_16"
>
> I can connect to Bloomberg via the API
>
> Does anyone have any ideas?
>
>
> Gordon Morrison
>
>
>
> ______________________________________________________________________
> This e-mail and any attachments may contain confidential...{{dropped:22}}
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

______________________________________________________________________
This e-mail and any attachments may contain confidential or privileged
information. It is intended solely for the ordinary user of the e-mail
address to which it is addressed. If you are not the intended
recipient, please contact the sender immediately and delete this
message. Any unauthorised use or dissemination of this message in
whole or in part is strictly prohibited. Unless otherwise stated, any
views expressed are those of the individual sender and not of FTSE. FTSE does not guarantee
that the integrity of this communication has been maintained nor that
this communication is free of viruses, interceptions or interference.

FTSE is a limited liability company registered
in England and Wales under registered number 03108236 with its
registered office at 12th Floor, 10 Upper Bank Street, Canary Wharf,
London, E14 5NP.

FTSE's VAT number is: GB 740 4594 35.

For further information about FTSE visit
http://www.ftse.com

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

______________________________________________________________________
This e-mail and any attachments may contain confidential or privileged
information. It is intended solely for the ordinary user of the e-mail
address to which it is addressed. If you are not the intended
recipient, please contact the sender immediately and delete this
message. Any unauthorised use or dissemination of this message in
whole or in part is strictly prohibited. Unless otherwise stated, any
views expressed are those of the individual sender and not of FTSE. FTSE does not guarantee
that the integrity of this communication has been maintained nor that
this communication is free of viruses, interceptions or interference.

FTSE is a limited liability company registered
in England and Wales under registered number 03108236 with its
registered office at 12th Floor, 10 Upper Bank Street, Canary Wharf,
London, E14 5NP.

FTSE's VAT number is: GB 740 4594 35.

For further information about FTSE visit
http://www.ftse.com

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

______________________________________________________________________
This e-mail and any attachments may contain confidential or privileged
information. It is intended solely for the ordinary user of the e-mail
address to which it is addressed. If you are not the intended
recipient, please contact the sender immediately and delete this
message. Any unauthorised use or dissemination of this message in
whole or in part is strictly prohibited. Unless otherwise stated, any
views expressed are those of the individual sender and not of FTSE. FTSE does not guarantee
that the integrity of this communication has been maintained nor that
this communication is free of viruses, interceptions or interference.

FTSE is a limited liability company registered
in England and Wales under registered number 03108236 with its
registered office at 12th Floor, 10 Upper Bank Street, Canary Wharf,
London, E14 5NP.

FTSE's VAT number is: GB 740 4594 35.

For further information about FTSE visit
http://www.ftse.com


From michael.weylandt at gmail.com  Fri Nov 30 15:01:36 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Fri, 30 Nov 2012 14:01:36 +0000
Subject: [R-SIG-Finance] [R] TSCov function from RTAQ package
In-Reply-To: <1354267848359-4651402.post@n4.nabble.com>
References: <1354267848359-4651402.post@n4.nabble.com>
Message-ID: <CAAmySGNz7jOdzMdRmQa+BDAv4-6GYhBMn+nGTT-63Ur5ASyamQ@mail.gmail.com>

Forwarding to the correct mailing list.

MW

On Fri, Nov 30, 2012 at 9:30 AM, billycorg <candilav at gmail.com> wrote:
> Hi R Users!
>
> I am having some difficulties in using the TSCov function from RTAQ package
> that should calculate the two time scale realized volatility (Zhang et al,
> 2005).
>
> Let's suppose I have tick by tick data, let's say "aaa" and "bbb".
>
> If I write in R:
>
> /stock1=aaa$PRICE
> stock2=bbb$PRICE
>
> TSCov(list(stock1,stock2))/
>
> The result is: /Error in var[i] : object of type 'closure' is not
> subsettable/
>
> Instead, if I write:
>
> /TSCov(stock1,stock2)/
>
> I obtain a single value and not a 2X2 matrix (one for each day).
>
> I would only want to obtain a 2x2 matrix per day.
>
> Where is my error? It would be sufficient an example of correct syntax! :)
>
> Thank you,
> Vincent
>
>
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/TSCov-function-from-RTAQ-package-tp4651402.html
> Sent from the R help mailing list archive at Nabble.com.
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From rharlow86 at gmail.com  Fri Nov 30 23:13:26 2012
From: rharlow86 at gmail.com (Robert Harlow)
Date: Fri, 30 Nov 2012 17:13:26 -0500
Subject: [R-SIG-Finance] Finding the Feasible Region of a Generic
	Mean-Variance Problem
Message-ID: <CAHdfS94ajv=XhkP-dKp5LL7m+YAe+gXPF0g-QiP7UW4TJ2Yyqw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121130/e44471e8/attachment.pl>

From skobayashi at dci.com  Sat Dec  1 00:07:07 2012
From: skobayashi at dci.com (eqsf)
Date: Fri, 30 Nov 2012 15:07:07 -0800 (PST)
Subject: [R-SIG-Finance] MonteCarloOption Questions
Message-ID: <1354316827371-4651509.post@n4.nabble.com>

First of all, let me preface by saying that I have very little experience
with R but am trying to get up to speed as quickly as possible.

I have been trying to do a Monte Carlo simulation of barrier down and out
options with a rebate when the option is knocked out.  Essentially, trying
to do a very crude Merton-type structural model.  To get my feet wet, I was
experimenting with the MonteCarloOption function in the foptions package. 
As a source of comparison, I also ran the Black-Scholes option valuation
function, GBSOption.  I am using rnorm.Sobol for the innovation and a Wiener
process for the path.  The thing is, the B-S value is always very different
(2-10%) from the MC value for the exact same input assumptions even for
mcSteps=500k.

Also, I'd like to use a non-normal innovation but couldn't find a RNG for
that.  Looked at the students T RNG rt but the output of that function is
just a large data set, not an mcSteps x pathLength matrix.  Also took a look
at fExoticOptions but it doesn't look like you can do anything with the
non-normal distributions with those functions.

Does anyone else out there have experience working with the MonteCarloOption
or fExoticOptions functions?  Is there a more flexible set of functions I'm
missing?

Thanks in advance for any help.



--
View this message in context: http://r.789695.n4.nabble.com/MonteCarloOption-Questions-tp4651509.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From matt at considine.net  Sat Dec  1 13:41:38 2012
From: matt at considine.net (Matt Considine)
Date: Sat, 01 Dec 2012 07:41:38 -0500
Subject: [R-SIG-Finance] Finding the Feasible Region of a
 Generic	Mean-Variance, Problem (Robert Harlow)
In-Reply-To: <mailman.2.1354359601.23898.r-sig-finance@r-project.org>
References: <mailman.2.1354359601.23898.r-sig-finance@r-project.org>
Message-ID: <50B9FB02.1040804@considine.net>

On 12/1/2012 6:00 AM, r-sig-finance-request at r-project.org wrote:
> Finding the Feasible Region of a Generic	Mean-Variance
>        Problem (Robert Harlow)

What you are looking for is in the rmetrics/fPortfolioAdvanced package.  
Look for the function called "feasibleSet".  A chart
similar to what you want would be generated by this

   >data = 100*LPP2005.RET[, 1:6]
   >set = feasibleSet(data)
   >attributes(set)
$names
[1] "data"          "weights"       "coords"        "positions" 
"targetReturns"
[6] "targetRisks"   "hull"

The weights of the portfolios in the set would be found in set$weights

Two other functions in that package may also help ...

Regards,
Matt


From ustaudinger at activequant.com  Sat Dec  1 22:59:17 2012
From: ustaudinger at activequant.com (Ulrich Staudinger)
Date: Sat, 1 Dec 2012 22:59:17 +0100
Subject: [R-SIG-Finance] quantstrat order execution
In-Reply-To: <50148D12.1050508@braverock.com>
References: <CAFNBy2k-F+w1kTB6GVmJGhp7O8cwnipHC8Z2+0m17JCaC8tUaw@mail.gmail.com>
	<500C9975.4020600@opentrades.nl>
	<CAFNBy2=MjOKHPrWySbrU4bCj6oqr2QL0oZR7x6tLfd=D+zwJ5A@mail.gmail.com>
	<50148D12.1050508@braverock.com>
Message-ID: <CAMrz3D3s=RxOAG-N4=iwx6dMcRoeV7pSbaFVEEEVHEKxOzoKBA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121201/23dcbf0a/attachment.pl>

From matt at considine.net  Sun Dec  2 01:00:27 2012
From: matt at considine.net (Matt Considine)
Date: Sat, 01 Dec 2012 19:00:27 -0500
Subject: [R-SIG-Finance] Tips on creating dummy data?
Message-ID: <50BA9A1B.1090100@considine.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121201/9e6d523f/attachment.pl>

From matt at considine.net  Sun Dec  2 15:04:41 2012
From: matt at considine.net (Matt Considine)
Date: Sun, 02 Dec 2012 09:04:41 -0500
Subject: [R-SIG-Finance] Tips on creating dummy data?
Message-ID: <50BB5FF9.1030006@considine.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121202/089ef9f1/attachment.pl>

From weihanliu2002 at yahoo.com  Mon Dec  3 12:40:46 2012
From: weihanliu2002 at yahoo.com (Wei-han Liu)
Date: Mon, 3 Dec 2012 03:40:46 -0800 (PST)
Subject: [R-SIG-Finance] time index in high frequency data
Message-ID: <1354534846.85559.YahooMailNeo@web163803.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121203/bee48e06/attachment.pl>

From santosh.srinivas at gmail.com  Mon Dec  3 13:31:43 2012
From: santosh.srinivas at gmail.com (Santosh Srinivas)
Date: Mon, 3 Dec 2012 18:01:43 +0530
Subject: [R-SIG-Finance] time index in high frequency data
In-Reply-To: <1354534846.85559.YahooMailNeo@web163803.mail.gq1.yahoo.com>
References: <1354534846.85559.YahooMailNeo@web163803.mail.gq1.yahoo.com>
Message-ID: <CALtLFXQ3ZayzOSRQ8FoJ_Fva8UonO_14=ncVu1oow9o5=rCOqw@mail.gmail.com>

You could find more direction on the r-help list .. I remember using
help from that list

You can do something like this.  (Code pasted from my routine)

f2 <- function(d, t, format = "%Y%m%d %H:%M:%S") {
as.POSIXct(strptime(paste(d, t),format=format))
}

require(zoo)
optData.z <- read.zoo(optData.df.1[c(1:2,5:11)],index=list(1,2), FUN=f2)

The index columns refer to the date and time in your dataset.

zoo objects can be converted to xts using as.xts

I think you should be able to create xts directly using a similar approach


On Mon, Dec 3, 2012 at 5:10 PM, Wei-han Liu <weihanliu2002 at yahoo.com> wrote:
> Hi R users:
>
> I have a high frequency dataset with the following two time indexes: TDATE and TTIME. I would like to read in the following series in the specific data format: yyyy-mm-dd and hh-mm, and convert them as xts objects. Could any people can share some advice in this regard?
>
> Many thanks.
>
> Wei-han
>
> TDATE TTIME
> 20091009 930
> 20091009 1130
> 20091009 1500
> 20091012 930
> 20091012 1130
> 20091012 1500
> 20091013 930
> 20091013 1130
> 20091013 1500
> 20091014 930
> 20091014 1130
> 20091014 1500
> 20091015 930
> 20091015 1130
> 20091015 1500
> 20091016 930
> 20091016 1130
> 20091016 1500
> 20091019 930
> 20091019 1130
> 20091019 1500
> 20091020 930
> 20091020 1130
> 20091020 1500
> 20091021 930
> 20091021 1130
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Mon Dec  3 13:53:22 2012
From: gsee000 at gmail.com (G See)
Date: Mon, 3 Dec 2012 06:53:22 -0600
Subject: [R-SIG-Finance] Introducing TFX: An R Interface to the TrueFX Web
	API
In-Reply-To: <CA+xi=qYOMZmwgV+pgFGkPjiing4UKK=o6nAgUXw4aEK7j5gtMQ@mail.gmail.com>
References: <CA+xi=qYySj_TRCOewS7rZuFrhJQgX92dubKuwmT_jm2Rb5g6Dw@mail.gmail.com>
	<CA+xi=qaW4GV2bMxjxNPzV3ngC=RYV3aS3ho64K1VhY7fumsURw@mail.gmail.com>
	<CA+xi=qYOMZmwgV+pgFGkPjiing4UKK=o6nAgUXw4aEK7j5gtMQ@mail.gmail.com>
Message-ID: <CA+xi=qbttKH0_jEm3QLRdFoirmqx-xwxBtpOZRQ8fv9W_4936g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121203/31b05aab/attachment.pl>

From gsee000 at gmail.com  Mon Dec  3 13:57:17 2012
From: gsee000 at gmail.com (G See)
Date: Mon, 3 Dec 2012 06:57:17 -0600
Subject: [R-SIG-Finance] Introducing TFX: An R Interface to the TrueFX Web
	API
Message-ID: <CA+xi=qYT4DRheA_7LjHO3Foo1zz8S-iL7koHXJmOwB7JtA8t3A@mail.gmail.com>

[sorry for the previous HTML e-mail. Gmail seems to think that's what
I meant to do]

Hello all,

I'd like to introduce the TFX package which I recently published to CRAN.

It is a simple R interface to the free TrueFX Web API. You can use it
to get real-time quotes with millisecond resolution and fractional-pip
bid/ask spreads for 26 currency pairs.

There is an RPub overview of the TFX package available here:
http://rpubs.com/gsee/TFX

The shiny package (http://www.rstudio.com/shiny/) has made the TFX
package more relevant (at least to me). You can see a demo of using
TFX with shiny by running the following code which will open a browser
window and display FX quotes that update every 750 milliseconds:

# install.packages('shiny', repos=c('http://rstudio.org/_packages',
# getOption('repos'))
library(shiny)
runGist("4122626")
#--------------------------
The code for the above shiny app can be viewed or downloaded from
https://gist.github.com/4122626

I've also had a little bit of success creating real-time streaming
charts using svSockets, following the video
(http://www.youtube.com/watch?v=rvT8XThGA8o) on the data.table
homepage (http://datatable.r-forge.r-project.org/) as a template and
using TFX as the data source.

Finally, TrueFX provides historical tick data for 15 currency pairs
going back to May 2009 (http://truefx.com/?page=downloads). There is a
script in the inst/parser directory of the FinancialInstrument package
(www.tinyurl.com/DownloadTrueFX) that can be used to download all of
that data to disk in a format that FinancialInstrument::getSymbols.FI
can easily read. This script is not intended to be used on Windows.

I have no affiliation with TrueFX.

Hope it's useful,
Garrett

P.S. The RPub (http://rpubs.com/gsee/TFX) is also included as a
vignette in the R-Forge version (installable with
install.packages("TFX", repos="http://r-forge.r-project.org"). As
outlined in the NEWS file, the only updates in the R-Forge version are
aesthetic: there are better error messages, a print.TFXsession method,
and Reconnect and Disconnect no longer print the returned TFXsession
object.


From dennislwm at yahoo.com.au  Mon Dec  3 17:33:41 2012
From: dennislwm at yahoo.com.au (Dennis Lee)
Date: Mon, 3 Dec 2012 08:33:41 -0800 (PST)
Subject: [R-SIG-Finance] Introducing TFX: An R Interface to the TrueFX
	Web API
In-Reply-To: <CA+xi=qYT4DRheA_7LjHO3Foo1zz8S-iL7koHXJmOwB7JtA8t3A@mail.gmail.com>
References: <CA+xi=qYT4DRheA_7LjHO3Foo1zz8S-iL7koHXJmOwB7JtA8t3A@mail.gmail.com>
Message-ID: <1354552421.56729.YahooMailNeo@web163802.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121203/01e3b4f6/attachment.pl>

From gsee000 at gmail.com  Mon Dec  3 17:41:36 2012
From: gsee000 at gmail.com (G See)
Date: Mon, 3 Dec 2012 10:41:36 -0600
Subject: [R-SIG-Finance] Introducing TFX: An R Interface to the TrueFX
	Web API
In-Reply-To: <1354552421.56729.YahooMailNeo@web163802.mail.gq1.yahoo.com>
References: <CA+xi=qYT4DRheA_7LjHO3Foo1zz8S-iL7koHXJmOwB7JtA8t3A@mail.gmail.com>
	<1354552421.56729.YahooMailNeo@web163802.mail.gq1.yahoo.com>
Message-ID: <CA+xi=qYbzYsTWzn0nAyibvvGGt0AOTy7yraY-bxCWccyS9C_LA@mail.gmail.com>

Aw. That's a shame.  What version of shiny and websockets are you using?

Maybe try:
   devtools::install_github('shiny', 'rstudio')

It works for me on linux with the following sessionInfo

> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=C                 LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] bitops_1.0-4.1 TFX_0.1.1      shiny_0.1.12

loaded via a namespace (and not attached):
[1] caTools_1.13     digest_0.6.0     RJSONIO_1.0-1    tools_2.15.2
[5] websockets_1.1.6 XML_3.95-0.1     xtable_1.7-0


Garrett

On Mon, Dec 3, 2012 at 10:33 AM, Dennis Lee <dennislwm at yahoo.com.au> wrote:
>
>
> I copied and pasted the code for Shiny app, but it doesn't update the FX quotes
> every 750 ms. I tried it on Firefox and Chrome.
>
>
>
> ________________________________
>  From: G See <gsee000 at gmail.com>
> To: r-sig-finance <r-sig-finance at r-project.org>
> Sent: Monday, 3 December 2012 8:57 PM
> Subject: [R-SIG-Finance] Introducing TFX: An R Interface to the TrueFX Web API
>
> [sorry for the previous HTML e-mail. Gmail seems to think that's what
> I meant to do]
>
> Hello all,
>
> I'd like to introduce the TFX package which I recently published to CRAN.
>
> It is a simple R interface to the free TrueFX Web API. You can use it
> to get real-time quotes with millisecond resolution and fractional-pip
> bid/ask spreads for 26 currency pairs.
>
> There is an RPub overview of the TFX package available here:
> http://rpubs.com/gsee/TFX
>
> The shiny package (http://www.rstudio.com/shiny/) has made the TFX
> package more relevant (at least to me). You can see a demo of using
> TFX with shiny by running the following code which will open a browser
> window and display FX quotes that update every 750 milliseconds:
>
> # install.packages('shiny', repos=c('http://rstudio.org/_packages',
> # getOption('repos'))
> library(shiny)
> runGist("4122626")
> #--------------------------
> The code for the above shiny app can be viewed or downloaded from
> https://gist.github.com/4122626
>
> I've also had a little bit of success creating real-time streaming
> charts using svSockets, following the video
> (http://www.youtube.com/watch?v=rvT8XThGA8o) on the data.table
> homepage (http://datatable.r-forge.r-project.org/) as a template and
> using TFX as the data source.
>
> Finally, TrueFX provides historical tick data for 15 currency pairs
> going back to May 2009 (http://truefx.com/?page=downloads). There is a
> script in the inst/parser directory of the FinancialInstrument package
> (www.tinyurl.com/DownloadTrueFX) that can be used to download all of
> that data to disk in a format that FinancialInstrument::getSymbols.FI
> can easily read. This script is not intended to be used on Windows.
>
> I have no affiliation with TrueFX.
>
> Hope it's useful,
> Garrett
>
> P.S. The RPub (http://rpubs.com/gsee/TFX) is also included as a
> vignette in the R-Forge version (installable with
> install.packages("TFX", repos="http://r-forge.r-project.org"). As
> outlined in the NEWS file, the only updates in the R-Forge version are
> aesthetic: there are better error messages, a print.TFXsession method,
> and Reconnect and Disconnect no longer print the returned TFXsession
> object.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From edd at debian.org  Mon Dec  3 17:56:46 2012
From: edd at debian.org (Dirk Eddelbuettel)
Date: Mon, 3 Dec 2012 10:56:46 -0600
Subject: [R-SIG-Finance] Introducing TFX: An R Interface to the
	TrueFX	Web API
In-Reply-To: <1354552421.56729.YahooMailNeo@web163802.mail.gq1.yahoo.com>
References: <CA+xi=qYT4DRheA_7LjHO3Foo1zz8S-iL7koHXJmOwB7JtA8t3A@mail.gmail.com>
	<1354552421.56729.YahooMailNeo@web163802.mail.gq1.yahoo.com>
Message-ID: <20668.55758.877066.247001@max.nulle.part>


On 3 December 2012 at 08:33, Dennis Lee wrote:
| I copied and pasted the code for Shiny app, but it doesn't update the FX quotes
| every 750 ms. I tried it on Firefox and Chrome.

"I copied and paste" ? Maybe you did that the wrong way?  

What happens when you install the shiny and TFX packages, and execute

    library(shiny)
    runGist("4122626")

which has been very reliable for me on different machine (home/work/netbook/...) ?

Dirk

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From dennislwm at yahoo.com.au  Mon Dec  3 18:05:52 2012
From: dennislwm at yahoo.com.au (Dennis Lee)
Date: Mon, 3 Dec 2012 09:05:52 -0800 (PST)
Subject: [R-SIG-Finance] Introducing TFX: An R Interface to the TrueFX
	Web API
In-Reply-To: <20668.55758.877066.247001@max.nulle.part>
References: <CA+xi=qYT4DRheA_7LjHO3Foo1zz8S-iL7koHXJmOwB7JtA8t3A@mail.gmail.com>
	<1354552421.56729.YahooMailNeo@web163802.mail.gq1.yahoo.com>
	<20668.55758.877066.247001@max.nulle.part>
Message-ID: <1354554352.93682.YahooMailNeo@web163802.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121203/e3be1816/attachment.pl>

From jeff.a.ryan at gmail.com  Mon Dec  3 18:09:44 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Mon, 3 Dec 2012 11:09:44 -0600
Subject: [R-SIG-Finance] Introducing TFX: An R Interface to the TrueFX
	Web API
In-Reply-To: <1354554352.93682.YahooMailNeo@web163802.mail.gq1.yahoo.com>
References: <CA+xi=qYT4DRheA_7LjHO3Foo1zz8S-iL7koHXJmOwB7JtA8t3A@mail.gmail.com>
	<1354552421.56729.YahooMailNeo@web163802.mail.gq1.yahoo.com>
	<20668.55758.877066.247001@max.nulle.part>
	<1354554352.93682.YahooMailNeo@web163802.mail.gq1.yahoo.com>
Message-ID: <CABDUZc_bY2DwTH0V9KnELcuY80EhfN9hF4uiZjUB7wWX-Wy+Dg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121203/b13123dc/attachment.pl>

From gsee000 at gmail.com  Mon Dec  3 18:12:56 2012
From: gsee000 at gmail.com (G See)
Date: Mon, 3 Dec 2012 11:12:56 -0600
Subject: [R-SIG-Finance] Introducing TFX: An R Interface to the TrueFX
	Web API
In-Reply-To: <CABDUZc_bY2DwTH0V9KnELcuY80EhfN9hF4uiZjUB7wWX-Wy+Dg@mail.gmail.com>
References: <CA+xi=qYT4DRheA_7LjHO3Foo1zz8S-iL7koHXJmOwB7JtA8t3A@mail.gmail.com>
	<1354552421.56729.YahooMailNeo@web163802.mail.gq1.yahoo.com>
	<20668.55758.877066.247001@max.nulle.part>
	<1354554352.93682.YahooMailNeo@web163802.mail.gq1.yahoo.com>
	<CABDUZc_bY2DwTH0V9KnELcuY80EhfN9hF4uiZjUB7wWX-Wy+Dg@mail.gmail.com>
Message-ID: <CA+xi=qbi5Hz65c3TmKhMM-6ARxpzShmPpDSWGbvyt957zmiV4g@mail.gmail.com>

I just tried it on Windows and it works for me with the sessionInfo below.

Are you sure you have at least version 1.1.6 of websockets?

> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
States.1252    LC_MONETARY=English_United States.1252 LC_NUMERIC=C
                      LC_TIME=English_United States.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] bitops_1.0-5 TFX_0.1.0    shiny_0.2.3

loaded via a namespace (and not attached):
[1] caTools_1.13     digest_0.5.2     RJSONIO_1.0-1    tools_2.15.1
 websockets_1.1.6 XML_3.9-4.1      xtable_1.7-0

Garrett


On Mon, Dec 3, 2012 at 11:09 AM, Jeff Ryan <jeff.a.ryan at gmail.com> wrote:
> If the backend is using websockets, that is very new ground in the land of
> HTML.  M$ prides itself typically on being off by a decade w.r.t. adoption
> of such 'shiny' things.
>
> So... that may indeed be your issue.
>
> Jeff
>
>
> On Mon, Dec 3, 2012 at 11:05 AM, Dennis Lee <dennislwm at yahoo.com.au> wrote:
>
>> I am running it on Windows, maybe you didn't understand what I said.
>>
>> I did get the first quote displayed correctly, so it is not because of the
>> library.
>>
>> My problem is that it doesn't update periodically. I will try to figure it
>> out
>> when I have time, just too late now (its past midnight here) to solve this.
>>
>> > sessionInfo() R version 2.15.1 (2012-06-22)
>> Platform: i386-pc-mingw32/i386 (32-bit)
>>
>> It could be because of my R version (maybe not), but then again I have
>>
>> installed the CRAN version of shiny (and not the dev version on Github).
>>
>>
>>
>> ________________________________
>>  From: Dirk Eddelbuettel <edd at debian.org>
>>
>> Cc: r-sig-finance <r-sig-finance at r-project.org>
>> Sent: Tuesday, 4 December 2012 12:56 AM
>> Subject: Re: [R-SIG-Finance] Introducing TFX: An R Interface to the TrueFX
>> Web API
>>
>>
>> On 3 December 2012 at 08:33, Dennis Lee wrote:
>> | I copied and pasted the code for Shiny app, but it doesn't update the FX
>> quotes
>> | every 750 ms. I tried it on Firefox and Chrome.
>>
>> "I copied and paste" ? Maybe you did that the wrong way?
>>
>> What happens when you install the shiny and TFX packages, and execute
>>
>>     library(shiny)
>>     runGist("4122626")
>>
>> which has been very reliable for me on different machine
>> (home/work/netbook/...) ?
>>
>> Dirk
>>
>> --
>> Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com
>>         [[alternative HTML version deleted]]
>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
>
>
> --
> Jeffrey Ryan
> jeffrey.ryan at lemnica.com
>
> www.lemnica.com
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Mon Dec  3 18:16:47 2012
From: gsee000 at gmail.com (G See)
Date: Mon, 3 Dec 2012 11:16:47 -0600
Subject: [R-SIG-Finance] Introducing TFX: An R Interface to the TrueFX
	Web API
In-Reply-To: <CA+xi=qbi5Hz65c3TmKhMM-6ARxpzShmPpDSWGbvyt957zmiV4g@mail.gmail.com>
References: <CA+xi=qYT4DRheA_7LjHO3Foo1zz8S-iL7koHXJmOwB7JtA8t3A@mail.gmail.com>
	<1354552421.56729.YahooMailNeo@web163802.mail.gq1.yahoo.com>
	<20668.55758.877066.247001@max.nulle.part>
	<1354554352.93682.YahooMailNeo@web163802.mail.gq1.yahoo.com>
	<CABDUZc_bY2DwTH0V9KnELcuY80EhfN9hF4uiZjUB7wWX-Wy+Dg@mail.gmail.com>
	<CA+xi=qbi5Hz65c3TmKhMM-6ARxpzShmPpDSWGbvyt957zmiV4g@mail.gmail.com>
Message-ID: <CA+xi=qbqQpC5t_nTh+H1u6-em6iP9oYHKu7dvj-P4peO4fCkVg@mail.gmail.com>

Another possibililty, of course, is that you checked the "Pause
updates" check box at the bottom of the page.  When that is checked,
the quotes don't update.

Garrett

On Mon, Dec 3, 2012 at 11:12 AM, G See <gsee000 at gmail.com> wrote:
> I just tried it on Windows and it works for me with the sessionInfo below.
>
> Are you sure you have at least version 1.1.6 of websockets?
>
>> sessionInfo()
> R version 2.15.1 (2012-06-22)
> Platform: x86_64-pc-mingw32/x64 (64-bit)
>
> locale:
> [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
> States.1252    LC_MONETARY=English_United States.1252 LC_NUMERIC=C
>                       LC_TIME=English_United States.1252
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] bitops_1.0-5 TFX_0.1.0    shiny_0.2.3
>
> loaded via a namespace (and not attached):
> [1] caTools_1.13     digest_0.5.2     RJSONIO_1.0-1    tools_2.15.1
>  websockets_1.1.6 XML_3.9-4.1      xtable_1.7-0
>
> Garrett
>
>
> On Mon, Dec 3, 2012 at 11:09 AM, Jeff Ryan <jeff.a.ryan at gmail.com> wrote:
>> If the backend is using websockets, that is very new ground in the land of
>> HTML.  M$ prides itself typically on being off by a decade w.r.t. adoption
>> of such 'shiny' things.
>>
>> So... that may indeed be your issue.
>>
>> Jeff
>>
>>
>> On Mon, Dec 3, 2012 at 11:05 AM, Dennis Lee <dennislwm at yahoo.com.au> wrote:
>>
>>> I am running it on Windows, maybe you didn't understand what I said.
>>>
>>> I did get the first quote displayed correctly, so it is not because of the
>>> library.
>>>
>>> My problem is that it doesn't update periodically. I will try to figure it
>>> out
>>> when I have time, just too late now (its past midnight here) to solve this.
>>>
>>> > sessionInfo() R version 2.15.1 (2012-06-22)
>>> Platform: i386-pc-mingw32/i386 (32-bit)
>>>
>>> It could be because of my R version (maybe not), but then again I have
>>>
>>> installed the CRAN version of shiny (and not the dev version on Github).
>>>
>>>
>>>
>>> ________________________________
>>>  From: Dirk Eddelbuettel <edd at debian.org>
>>>
>>> Cc: r-sig-finance <r-sig-finance at r-project.org>
>>> Sent: Tuesday, 4 December 2012 12:56 AM
>>> Subject: Re: [R-SIG-Finance] Introducing TFX: An R Interface to the TrueFX
>>> Web API
>>>
>>>
>>> On 3 December 2012 at 08:33, Dennis Lee wrote:
>>> | I copied and pasted the code for Shiny app, but it doesn't update the FX
>>> quotes
>>> | every 750 ms. I tried it on Firefox and Chrome.
>>>
>>> "I copied and paste" ? Maybe you did that the wrong way?
>>>
>>> What happens when you install the shiny and TFX packages, and execute
>>>
>>>     library(shiny)
>>>     runGist("4122626")
>>>
>>> which has been very reliable for me on different machine
>>> (home/work/netbook/...) ?
>>>
>>> Dirk
>>>
>>> --
>>> Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com
>>>         [[alternative HTML version deleted]]
>>>
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>>
>>
>>
>> --
>> Jeffrey Ryan
>> jeffrey.ryan at lemnica.com
>>
>> www.lemnica.com
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.


From dennislwm at yahoo.com.au  Mon Dec  3 18:28:23 2012
From: dennislwm at yahoo.com.au (Dennis Lee)
Date: Mon, 3 Dec 2012 09:28:23 -0800 (PST)
Subject: [R-SIG-Finance] Introducing TFX: An R Interface to the TrueFX
	Web API
In-Reply-To: <CA+xi=qbi5Hz65c3TmKhMM-6ARxpzShmPpDSWGbvyt957zmiV4g@mail.gmail.com>
References: <CA+xi=qYT4DRheA_7LjHO3Foo1zz8S-iL7koHXJmOwB7JtA8t3A@mail.gmail.com>
	<1354552421.56729.YahooMailNeo@web163802.mail.gq1.yahoo.com>
	<20668.55758.877066.247001@max.nulle.part>
	<1354554352.93682.YahooMailNeo@web163802.mail.gq1.yahoo.com>
	<CABDUZc_bY2DwTH0V9KnELcuY80EhfN9hF4uiZjUB7wWX-Wy+Dg@mail.gmail.com>
	<CA+xi=qbi5Hz65c3TmKhMM-6ARxpzShmPpDSWGbvyt957zmiV4g@mail.gmail.com>
Message-ID: <1354555703.23397.YahooMailNeo@web163805.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121203/8d6e6648/attachment.pl>

From gsee000 at gmail.com  Mon Dec  3 18:40:39 2012
From: gsee000 at gmail.com (G See)
Date: Mon, 3 Dec 2012 11:40:39 -0600
Subject: [R-SIG-Finance] Introducing TFX: An R Interface to the TrueFX
	Web API
In-Reply-To: <1354555703.23397.YahooMailNeo@web163805.mail.gq1.yahoo.com>
References: <CA+xi=qYT4DRheA_7LjHO3Foo1zz8S-iL7koHXJmOwB7JtA8t3A@mail.gmail.com>
	<1354552421.56729.YahooMailNeo@web163802.mail.gq1.yahoo.com>
	<20668.55758.877066.247001@max.nulle.part>
	<1354554352.93682.YahooMailNeo@web163802.mail.gq1.yahoo.com>
	<CABDUZc_bY2DwTH0V9KnELcuY80EhfN9hF4uiZjUB7wWX-Wy+Dg@mail.gmail.com>
	<CA+xi=qbi5Hz65c3TmKhMM-6ARxpzShmPpDSWGbvyt957zmiV4g@mail.gmail.com>
	<1354555703.23397.YahooMailNeo@web163805.mail.gq1.yahoo.com>
Message-ID: <CA+xi=qah-gL5ReHC3yCzfsd61d_J5Rq_EcqN47t3jio8YuOFBQ@mail.gmail.com>

On Mon, Dec 3, 2012 at 11:28 AM, Dennis Lee <dennislwm at yahoo.com.au> wrote:
> I did get this warning when I ran the code:
>
>> runGist("4122626") Loading required package: TFX Warning: package ?TFX? was built under R version 2.15.2
>
> I have checked websockets:
>
>
> loaded via a namespace (and not attached): [1] bitops_1.0-5     caTools_1.13     devtools_0.8     [4] digest_0.6.0     evaluate_0.4.2   httr_0.2         [7] memoise_0.1      parallel_2.15.1  plyr_1.7.1
> [10] RCurl_1.95-3     RJSONIO_1.0-1    stringr_0.6.1
> [13] tools_2.15.1     websockets_1.1.6 whisker_0.1
> [16] xtable_1.7-0
>
> I have checked pause updates:
>
> Pause updates

This should be UNchecked!

>
> So, Windows is not the issue, I have to update R to version 2.15.2 then
> seems logical to me.
>

But, I ran it on R 2.15.1 and it worked fine.  See my sessionInfo in
the previous message.

So, I'm not sure what's not working for you.  Maybe some local
security settings?

Garrett


From jeff.a.ryan at gmail.com  Mon Dec  3 18:47:32 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Mon, 3 Dec 2012 11:47:32 -0600
Subject: [R-SIG-Finance] Introducing TFX: An R Interface to the TrueFX
	Web API
In-Reply-To: <CA+xi=qah-gL5ReHC3yCzfsd61d_J5Rq_EcqN47t3jio8YuOFBQ@mail.gmail.com>
References: <CA+xi=qYT4DRheA_7LjHO3Foo1zz8S-iL7koHXJmOwB7JtA8t3A@mail.gmail.com>
	<1354552421.56729.YahooMailNeo@web163802.mail.gq1.yahoo.com>
	<20668.55758.877066.247001@max.nulle.part>
	<1354554352.93682.YahooMailNeo@web163802.mail.gq1.yahoo.com>
	<CABDUZc_bY2DwTH0V9KnELcuY80EhfN9hF4uiZjUB7wWX-Wy+Dg@mail.gmail.com>
	<CA+xi=qbi5Hz65c3TmKhMM-6ARxpzShmPpDSWGbvyt957zmiV4g@mail.gmail.com>
	<1354555703.23397.YahooMailNeo@web163805.mail.gq1.yahoo.com>
	<CA+xi=qah-gL5ReHC3yCzfsd61d_J5Rq_EcqN47t3jio8YuOFBQ@mail.gmail.com>
Message-ID: <CABDUZc-CreY5H+TOQULE7rP5=5jSxzkA0hF+k8USv4Yx_Am26Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121203/3979c565/attachment.pl>

From rex at nosyntax.net  Mon Dec  3 19:30:27 2012
From: rex at nosyntax.net (rex)
Date: Mon, 3 Dec 2012 10:30:27 -0800
Subject: [R-SIG-Finance] Introducing TFX: An R Interface to the TrueFX
 Web API
In-Reply-To: <CA+xi=qYT4DRheA_7LjHO3Foo1zz8S-iL7koHXJmOwB7JtA8t3A@mail.gmail.com>
References: <CA+xi=qYT4DRheA_7LjHO3Foo1zz8S-iL7koHXJmOwB7JtA8t3A@mail.gmail.com>
Message-ID: <20121203183027.GI8190@ninja.nosyntax.net>

G See <gsee000 at gmail.com> [2012-12-03 04:57]:
>I'd like to introduce the TFX package which I recently published to CRAN.
>
>It is a simple R interface to the free TrueFX Web API. You can use it
>to get real-time quotes with millisecond resolution and fractional-pip
>bid/ask spreads for 26 currency pairs.
>
>There is an RPub overview of the TFX package available here:
>http://rpubs.com/gsee/TFX

Wow, this looks _very_ cool! Thank you for all the R work you do.

># install.packages('shiny', repos=c('http://rstudio.org/_packages',
># getOption('repos'))
>library(shiny)
>runGist("4122626")

Runs with no problems here. Starts a Chrome session on localhost:8100.

>#--------------------------
>The code for the above shiny app can be viewed or downloaded from
>https://gist.github.com/4122626

Did that, pasted server.R and ui.R into ~/R/gsee/, then within
an interactive R session, did:

> runApp(appDir = '~/R/gsee', port = 8100L)

It runs as before, and after opening up port 8100, the world can see
it. Amazing. Firefox 16.x and Chrome 20.0.1132.57 both work.

> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-linux-gnu (64-bit)

[...]

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] bitops_1.0-4.1 shiny_0.2.3    TFX_0.1.1     

loaded via a namespace (and not attached):
[1] caTools_1.13     digest_0.5.2     RJSONIO_0.98-1   tcltk_2.15.1    
[5] tools_2.15.1     websockets_1.1.6 XML_3.9-4        xtable_1.7-0 

>I've also had a little bit of success creating real-time streaming
>charts using svSockets, following the video
>(http://www.youtube.com/watch?v=rvT8XThGA8o) on the data.table
>homepage (http://datatable.r-forge.r-project.org/) as a template and
>using TFX as the data source.

Love to see this in action.

>Hope it's useful,

Looks as if it will be very useful indeed. :)

Thanks again,

-rex
-- 
All of us necessarily hold many casual opinions that are ludicrously
wrong simply because life is far too short for us to think through even
a small fraction of the topics that we come across.
                       --Julian Simon


From stino14 at gmail.com  Tue Dec  4 11:31:14 2012
From: stino14 at gmail.com (Justin Lilly)
Date: Tue, 4 Dec 2012 11:31:14 +0100
Subject: [R-SIG-Finance] problem with add.indicators and ATR function
Message-ID: <CAMszGiFXNqYd0My-BsipH19UjPOYp19Dxz5S17-Lcb7+-cYHmA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121204/971efe42/attachment.pl>

From brian at braverock.com  Tue Dec  4 13:54:57 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 04 Dec 2012 06:54:57 -0600
Subject: [R-SIG-Finance] problem with add.indicators and ATR function
In-Reply-To: <CAMszGiFXNqYd0My-BsipH19UjPOYp19Dxz5S17-Lcb7+-cYHmA@mail.gmail.com>
References: <CAMszGiFXNqYd0My-BsipH19UjPOYp19Dxz5S17-Lcb7+-cYHmA@mail.gmail.com>
Message-ID: <50BDF2A1.10200@braverock.com>

On 12/04/2012 04:31 AM, Justin Lilly wrote:
> My problem as stated in the subject, is that when I add two ATR indicators
> to a strategy, the second one has invalid output regardless of the
> arguments.  As an example, I have added two lines to the 0.7.7 maCross
> demo.  Directly after the second SMA indicator is added, I add these two
> lines at line 26:
>
> stratMACROSS <- add.indicator(strategy = stratMACROSS, name = "ATR",
> arguments = list(HLC=quote(HLC(mktdata)), n=20),label= "atr1" )
> stratMACROSS <- add.indicator(strategy = stratMACROSS, name = "ATR",
> arguments = list(HLC=quote(HLC(mktdata)), n=20),label= "atr2")
>
> note that the period (n) is identical.  This is to illustrate the problem.
>   Once ran my output is as follows:
>
<...snip different example...>
>
> I expect the output here to be identical and clearly its not.  Can someone
> please take a look?
>

The problem here is with the use of HLC() from quantmod.

It calls Hi(0, then Lo(), then Cl(), and can return multiple columns for 
each.  In the case here, it does exactly that, and returns trueHigh and 
trueLow when called for the second indicator.  You can see the problem 
by calling

head(HLC(mktdata))

after the script runs.

On current svn code, this small modification to you indicators produces 
the results that you are looking for:

add.indicator(strat.st, name = "ATR", arguments = 
list(HLC=quote(HLC(mktdata)[,1:3]), n=20),label= "atr1" )
add.indicator(strat.st, name = "ATR", arguments = 
list(HLC=quote(HLC(mktdata)[,c(1,3,5)]), n=20),label= "atr2")

note that I take columns 1,3,5 from the output of HLC to construct atr2, 
which will skip over the trueHigh and trueLow that you got from the 
first ATR indicator.

Regards,

    - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From stino14 at gmail.com  Tue Dec  4 14:45:56 2012
From: stino14 at gmail.com (Justin Lilly)
Date: Tue, 4 Dec 2012 14:45:56 +0100
Subject: [R-SIG-Finance] help writing quantstrat rule accessing pos/txn info
Message-ID: <CAMszGiEj5-ErXWt4QKEZQ-qe0WWa2CQedxedE-BN86+JUvKDaQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121204/b089bb5f/attachment.pl>

From stino14 at gmail.com  Tue Dec  4 14:51:02 2012
From: stino14 at gmail.com (Justin Lilly)
Date: Tue, 4 Dec 2012 14:51:02 +0100
Subject: [R-SIG-Finance] problem with add.indicators and ATR function
In-Reply-To: <50BDF2A1.10200@braverock.com>
References: <CAMszGiFXNqYd0My-BsipH19UjPOYp19Dxz5S17-Lcb7+-cYHmA@mail.gmail.com>
	<50BDF2A1.10200@braverock.com>
Message-ID: <CAMszGiGmRXdRHoAvSwUc-s8701pxXsbR3QtLMPo+J6DyFVSeLg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121204/3b980235/attachment.pl>

From jkaprich at gmail.com  Wed Dec  5 04:17:29 2012
From: jkaprich at gmail.com (jkaprich at gmail.com)
Date: Tue, 4 Dec 2012 21:17:29 -0600
Subject: [R-SIG-Finance] Finding the Feasible Region of a Generic
	Mean-Variance, Problem (Robert Harlow)
In-Reply-To: <50B9FB02.1040804@considine.net>
References: <mailman.2.1354359601.23898.r-sig-finance@r-project.org>
	<50B9FB02.1040804@considine.net>
Message-ID: <F703BD95-BFFA-494F-AEB4-8623BA3599B5@gmail.com>

I am new to fPortfolioAdvanced. Whenever I attempt to implement feasibleHull or feasibleSet I see the following ...

Compute pairwise frontier for ...
Pair: 1 2

## omit other pair listings and finish with ... ###

Pair: 7 9

Error in approx(coord[,2], coord[,1], xout = returns) :
Need at least two non-NA values to interpolate

Was hoping someone could help me trouble-shoot this error.

(My apologies if this is an overly simplistic or inappropriate question for this group.)




Sent from my iPhone

On Dec 1, 2012, at 6:41 AM, Matt Considine <matt at considine.net> wrote:

> On 12/1/2012 6:00 AM, r-sig-finance-request at r-project.org wrote:
>> Finding the Feasible Region of a Generic    Mean-Variance
>>       Problem (Robert Harlow)
> 
> What you are looking for is in the rmetrics/fPortfolioAdvanced package.  Look for the function called "feasibleSet".  A chart
> similar to what you want would be generated by this
> 
>  >data = 100*LPP2005.RET[, 1:6]
>  >set = feasibleSet(data)
>  >attributes(set)
> $names
> [1] "data"          "weights"       "coords"        "positions" "targetReturns"
> [6] "targetRisks"   "hull"
> 
> The weights of the portfolios in the set would be found in set$weights
> 
> Two other functions in that package may also help ...
> 
> Regards,
> Matt
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From brian at braverock.com  Wed Dec  5 04:30:09 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 04 Dec 2012 21:30:09 -0600
Subject: [R-SIG-Finance] Finding the Feasible Region of a Generic
 Mean-Variance, Problem (Robert Harlow)
In-Reply-To: <F703BD95-BFFA-494F-AEB4-8623BA3599B5@gmail.com>
References: <mailman.2.1354359601.23898.r-sig-finance@r-project.org>
	<50B9FB02.1040804@considine.net>
	<F703BD95-BFFA-494F-AEB4-8623BA3599B5@gmail.com>
Message-ID: <50BEBFC1.1020803@braverock.com>

On 12/04/2012 09:17 PM, jkaprich at gmail.com wrote:
> I am new to fPortfolioAdvanced. Whenever I attempt to implement feasibleHull or feasibleSet I see the following ...
>
> Compute pairwise frontier for ...
> Pair: 1 2
>
> ## omit other pair listings and finish with ... ###
>
> Pair: 7 9
>
> Error in approx(coord[,2], coord[,1], xout = returns) :
> Need at least two non-NA values to interpolate
>
> Was hoping someone could help me trouble-shoot this error.
>
> (My apologies if this is an overly simplistic or inappropriate question for this group.)

It's a perfectly appropriate question for the list, but you'll need to 
provide a fully reproducible example, per the posting guide, if you want 
someone to be able to help you.

Regards,

    - Brian


From uaruss at gmail.com  Thu Dec  6 14:57:19 2012
From: uaruss at gmail.com (Russell Miller)
Date: Thu, 6 Dec 2012 07:57:19 -0600
Subject: [R-SIG-Finance] duplicate column in mktdata, but don't see it
Message-ID: <CAC6sL=HK9KhPffBodro+bc80iVWf=No_UOPLzBoU_BdQsCfJiQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121206/4cee2224/attachment.pl>

From uaruss at gmail.com  Thu Dec  6 16:47:43 2012
From: uaruss at gmail.com (Russell Miller)
Date: Thu, 6 Dec 2012 09:47:43 -0600
Subject: [R-SIG-Finance] duplicate column in mktdata,
	but don't see it (R file attached)
Message-ID: <CAC6sL=HSyJ+QB1zYQ5RCVQs3XcUU-Qeo5Qa-qhMLx3Wm-7G+6g@mail.gmail.com>

I'm getting an error message that says I have a duplicate column in
mktdata, however, when I run "head(mktdata)", I don't see the
duplication...

Error Message:  Error in function (mktdata = mktdata, timestamp,
sigcol, sigval, orderqty = 0,  :
  more than one indicator column in mktdata matches threshold name
"test1.ind.tr"

In mktdata I see a "test1.ind.tr" column and a column named "tr".  Is
there a way to better reference the correct column, or rename one of
them from my function that created it? I've tried using quote(mktdata)
in the rule, mktdata$test1.ind.tr, and mktdata[,] to reference, but
have not been successful.

Code is attached and at the link below... Any ideas are very much appreciated.

http://pastebin.com/sj6ppuS0   (may need to toggle off text wrapping)

Thanks!
Russell
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ATR_try.R
Type: application/octet-stream
Size: 3709 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121206/080ab65b/attachment.obj>

From uaruss at gmail.com  Fri Dec  7 01:33:55 2012
From: uaruss at gmail.com (Russell Miller)
Date: Thu, 6 Dec 2012 18:33:55 -0600
Subject: [R-SIG-Finance] duplicate column in mktdata,
	but don't see it [SOLVED]
Message-ID: <CAC6sL=H6faQ32HzWYYueHk1xJOJbicP2UJG0mdZwkjBA=EG7jA@mail.gmail.com>

It seems I needed to reference test1.ind.atr and not test1.ind.tr

Upon making that change, things are moving again.

Regards -
Russell


From dominykasgrigonis at gmail.com  Sun Dec  9 09:59:10 2012
From: dominykasgrigonis at gmail.com (af2tr)
Date: Sun, 9 Dec 2012 00:59:10 -0800 (PST)
Subject: [R-SIG-Finance] qantstrat same period execution
Message-ID: <1355043550359-4652598.post@n4.nabble.com>

I know that there has already been several posts regarding this matter, but I
feel I still need clarification.

I understand that if the signal triggered at time n, then order will be
executed on tim n+1 if using daily of lower frequency data. It is possible
to change the price by prefer parameter, but it is not possible to execute
order at the same time as signal triggered. The lag parameter in ruleSignal
function is useful, but only on lower frequency data as it does not account
for weekends. The other option is to add a new column 'PervClose' and link
it via add.signal FUN. However this is not convenient if you have many
indicators and they depend not only on Closing price.

I could live with this but... I was watching yollin slides I replicated his
code. Outcome was that his orders executed 1 day earlier. Was this an
update? what is the execution time linked to?

Thanks to anyone who could help



--
View this message in context: http://r.789695.n4.nabble.com/qantstrat-same-period-execution-tp4652598.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Sun Dec  9 15:04:24 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 09 Dec 2012 08:04:24 -0600
Subject: [R-SIG-Finance] qantstrat same period execution
In-Reply-To: <1355043550359-4652598.post@n4.nabble.com>
References: <1355043550359-4652598.post@n4.nabble.com>
Message-ID: <50C49A68.8040009@braverock.com>

On 12/09/2012 02:59 AM, af2tr wrote:
> I know that there has already been several posts regarding this matter, but I
> feel I still need clarification.
>
> I understand that if the signal triggered at time n, then order will be
> executed on tim n+1 if using daily of lower frequency data. It is possible
> to change the price by prefer parameter, but it is not possible to execute
> order at the same time as signal triggered. The lag parameter in ruleSignal
> function is useful, but only on lower frequency data as it does not account
> for weekends. The other option is to add a new column 'PervClose' and link
> it via add.signal FUN. However this is not convenient if you have many
> indicators and they depend not only on Closing price.
>
> I could live with this but... I was watching yollin slides I replicated his
> code. Outcome was that his orders executed 1 day earlier. Was this an
> update? what is the execution time linked to?
>
> Thanks to anyone who could help

Guy Yollin's slides are rather dated at this point, and some of the 
quantstrat code has moved on.  Major examples of the latter are in order 
sizing, rebalancing, and parameter testing for strategies, which Guy 
used 'brute force' (and slow!) approaches to accomplish.  All of these 
are now supported in the package in much more efficient forms.

We've gone back and forth on whether to allow 'same bar' execution for 
daily OHLC data. It was in the code that way for a little while. I think 
it is intellectually dishonest, and leads to unreliable tests.  I really 
don't like to encourage magical thinking.

It is a physical impossibility to make a decision and act at the same 
time.  The price you used to make the decision doesn't exist anymore.

In a real trading environment, you make a decision, and then enter an 
order.  We've been discussing a version of a 'fill or kill' limit order 
that would execute on the next bar or not at all.  This may be the best 
solution, preserving accuracy (there is no such thing as instant 
execution) while giving people (most) of what they say they want.

Other alternatives include using higher frequency data.  1-min data is 
readily available through long histories, and can be easily processed to 
whatever frequency makes sense.  The speed of a quantstrat test is a 
nearly linear function of the number of signals, and is largely 
indifferent to the frequency of your data.

To your point about adding columns, this can easily be done 
automatically by your indicator function.  If you want to add look-ahead 
biases to your code, feel free. (I understand that a 'PrevClose' column 
would not introduce look-ahead bias, but most of the time when people 
here have asked for same bar execution, that's what they're asking for). 
  Also, you can calculate your indicators and signals using whatever 
data you want.  A PrevClose column would only be for pricing your orders 
using the prefer= argument to getPrice(), and shouldn't impact your 
signal generation process at all.

I have no intention of allowing instant execution in the code.  It's 
just flat out wrong, as I'm certain anyone who thinks about it for a 
moment will realize.

Regards,

     - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From dominykasgrigonis at gmail.com  Sun Dec  9 15:51:48 2012
From: dominykasgrigonis at gmail.com (af2tr)
Date: Sun, 9 Dec 2012 06:51:48 -0800 (PST)
Subject: [R-SIG-Finance] qantstrat same period execution
In-Reply-To: <50C49A68.8040009@braverock.com>
References: <1355043550359-4652598.post@n4.nabble.com>
	<50C49A68.8040009@braverock.com>
Message-ID: <1355064708581-4652604.post@n4.nabble.com>

<http://r.789695.n4.nabble.com/file/n4652604/Screen_Shot_2012-12-09_at_14.42.29.png> 

I agree it is not realistic for higher frequencies that daily, but on daily
data it sometimes is. Lets imagine we go short after downside cross.(vice
versa in image) you wake up and see a huge gap like this. You don't rlly
want to wait for the next day. Also in other cases you just wait until 4:45
and call your broker. Market price you get will be pretty close to same
day's close...

I'm not intending to persuade you to change it, just making a point. :)



--
View this message in context: http://r.789695.n4.nabble.com/qantstrat-same-period-execution-tp4652598p4652604.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From ustaudinger at gmail.com  Sun Dec  9 18:04:38 2012
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Sun, 9 Dec 2012 18:04:38 +0100
Subject: [R-SIG-Finance] qantstrat same period execution
In-Reply-To: <1355064708581-4652604.post@n4.nabble.com>
References: <1355043550359-4652598.post@n4.nabble.com>
	<50C49A68.8040009@braverock.com>
	<1355064708581-4652604.post@n4.nabble.com>
Message-ID: <630611424435708093@unknownmsgid>

hi there.

long story short, the only right thing is to allow execution at the
close of the current period if the current period is not the final
period in a day.

the really dirty aspects are timestamps- with which timestamp do you
want to tag an execution, for sure not with the beginning timestamp of
a priod, as it is misleading, but so is execution at the close price
of the next period (it is reported with the beginning timestamp of a
period).

clearly, data snooping and look ahead bias are to be ruled impossible,
therefore no execution at current bar's open price.

again. the key argument is that the open price of any bar is not
necessarily the actual market quote at the beginning of the bar.
technically and usually, it is the first new price in a period.

again, we have to have a look at how open/high/low/close bars are
built. this is data source specific. mind that most ohlc data sets are
built from actual trades and not quote midpoints, which makes things
even more dirty, as there might be only a few trades a day, but quotes
all daylong, particularly in options markets.

as i see the technical challenges and the work related to permitting
execution at current bars close, i came up with the work around to
overwrite the open values of the next bar with the former periods
close, thus dealing at the same price. obviously, this is a problem
for certain scenarios and obviously it works for others. i do not
think that the instant-execution-myth argument is valid, as no one
assumes instant execution.

we discussed this indeed, and i think it makes sense to add the
non-default behaviour to execute at current periods close.

best regards,
ulrich





--
Ulrich Staudinger
ActiveQuant GmbH

sent from my tablet.

On 09.12.2012, at 15:52, af2tr <dominykasgrigonis at gmail.com> wrote:

> <http://r.789695.n4.nabble.com/file/n4652604/Screen_Shot_2012-12-09_at_14.42.29.png>
>
> I agree it is not realistic for higher frequencies that daily, but on daily
> data it sometimes is. Lets imagine we go short after downside cross.(vice
> versa in image) you wake up and see a huge gap like this. You don't rlly
> want to wait for the next day. Also in other cases you just wait until 4:45
> and call your broker. Market price you get will be pretty close to same
> day's close...
>
> I'm not intending to persuade you to change it, just making a point. :)
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/qantstrat-same-period-execution-tp4652598p4652604.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From ustaudinger at gmail.com  Sun Dec  9 18:07:26 2012
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Sun, 9 Dec 2012 18:07:26 +0100
Subject: [R-SIG-Finance] qantstrat same period execution
In-Reply-To: <1355064708581-4652604.post@n4.nabble.com>
References: <1355043550359-4652598.post@n4.nabble.com>
	<50C49A68.8040009@braverock.com>
	<1355064708581-4652604.post@n4.nabble.com>
Message-ID: <-519194661619158491@unknownmsgid>

but in direct response to this mail, i think that assuming to get the
close price at days end is very dangerous. in some markets the
reported close price is calculated on an aveerage based on trades done
in the  last ten minutes. while this is just a stronger argument for
end of current period execution, it is also built on a highly specific
fact. and, when the market is closed it is closed, unlike intraday
periodicities.

--
Ulrich Staudinger
ActiveQuant GmbH

sent from my tablet.

On 09.12.2012, at 15:52, af2tr <dominykasgrigonis at gmail.com> wrote:

> <http://r.789695.n4.nabble.com/file/n4652604/Screen_Shot_2012-12-09_at_14.42.29.png>
>
> I agree it is not realistic for higher frequencies that daily, but on daily
> data it sometimes is. Lets imagine we go short after downside cross.(vice
> versa in image) you wake up and see a huge gap like this. You don't rlly
> want to wait for the next day. Also in other cases you just wait until 4:45
> and call your broker. Market price you get will be pretty close to same
> day's close...
>
> I'm not intending to persuade you to change it, just making a point. :)
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/qantstrat-same-period-execution-tp4652598p4652604.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From dominykasgrigonis at gmail.com  Sun Dec  9 18:19:36 2012
From: dominykasgrigonis at gmail.com (af2tr)
Date: Sun, 9 Dec 2012 09:19:36 -0800 (PST)
Subject: [R-SIG-Finance] qantstrat same period execution
In-Reply-To: <630611424435708093@unknownmsgid>
References: <1355043550359-4652598.post@n4.nabble.com>
	<50C49A68.8040009@braverock.com>
	<1355064708581-4652604.post@n4.nabble.com>
	<630611424435708093@unknownmsgid>
Message-ID: <1355073576690-4652610.post@n4.nabble.com>

Thank you for reply. I agree with all what you noted. In my opinion this
issue is only relevant for daily data and it is for you to decide whether it
is worth taking time to allow for this.
Thanks,
Dom



--
View this message in context: http://r.789695.n4.nabble.com/qantstrat-same-period-execution-tp4652598p4652610.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From matt at considine.net  Mon Dec 10 15:17:43 2012
From: matt at considine.net (matt at considine.net)
Date: Mon, 10 Dec 2012 08:17:43 -0600
Subject: [R-SIG-Finance] OAS vs Ledoit-Wolf covariance shrinkage?
In-Reply-To: <mailman.0.1355137202.7869.r-sig-finance@r-project.org>
References: <mailman.0.1355137202.7869.r-sig-finance@r-project.org>
Message-ID: <20121210081743.111019kl5h4pjlzb@webmail.considine.net>

Hi,
Is anyone here aware of an R implementation of the oracle  
approximating shrinkage technique (e.g.  
http://arxiv.org/pdf/0907.4698.pdf), which could be used instead of  
Ledoit-Wolf in the shrinkage of covariance routines?  I can't find any  
code implementations of this to use as a guide and would be interested  
in any pointers.
Thanks in advance,
Matt


From jctoll at gmail.com  Tue Dec 11 21:31:14 2012
From: jctoll at gmail.com (J Toll)
Date: Tue, 11 Dec 2012 14:31:14 -0600
Subject: [R-SIG-Finance] fOptions::CND versus pnorm
Message-ID: <CA+nJqYPHguwHMCKCeMLjbFfETJH2H=v_WDZUN1JB1xid2u0npg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121211/f1e68f24/attachment.pl>

From jctoll at gmail.com  Wed Dec 12 16:24:12 2012
From: jctoll at gmail.com (J Toll)
Date: Wed, 12 Dec 2012 09:24:12 -0600
Subject: [R-SIG-Finance] fOptions::CND versus pnorm
In-Reply-To: <CAGV1Wgj0640cGxAgVAtLvxYCB3whet3UJxMKHtnSye_QVx8kvA@mail.gmail.com>
References: <CA+nJqYPHguwHMCKCeMLjbFfETJH2H=v_WDZUN1JB1xid2u0npg@mail.gmail.com>
	<CAGV1Wgj0640cGxAgVAtLvxYCB3whet3UJxMKHtnSye_QVx8kvA@mail.gmail.com>
Message-ID: <CA+nJqYNP0Nxrvrv-hjR1Dw7wzsmsDtkRneyvQTHKeEXs4DRXBQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121212/4ea03391/attachment.pl>

From rhelpacc at gmail.com  Thu Dec 13 03:48:44 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Wed, 12 Dec 2012 21:48:44 -0500
Subject: [R-SIG-Finance] Quantstrat with TAQ data
Message-ID: <CAA7=MyXFqmpA-UWjZJfVu72UoBqM=pAp-61Go0NnsmJc_AT6-A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121212/c8b1237e/attachment.pl>

From aleksey.schukin at gmail.com  Thu Dec 13 03:54:39 2012
From: aleksey.schukin at gmail.com (Aleksey Schukin)
Date: Wed, 12 Dec 2012 21:54:39 -0500
Subject: [R-SIG-Finance] Quantstrat with TAQ data
In-Reply-To: <CAA7=MyXFqmpA-UWjZJfVu72UoBqM=pAp-61Go0NnsmJc_AT6-A@mail.gmail.com>
References: <CAA7=MyXFqmpA-UWjZJfVu72UoBqM=pAp-61Go0NnsmJc_AT6-A@mail.gmail.com>
Message-ID: <CA+0KAAYUT-r3y2eQzETGnRr+CgPK_OjHrgw7FVQpcJrTJ1-0Kg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121212/4dd5b0e1/attachment.pl>

From rhelpacc at gmail.com  Thu Dec 13 04:45:01 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Wed, 12 Dec 2012 22:45:01 -0500
Subject: [R-SIG-Finance] Quantstrat with TAQ data
In-Reply-To: <CA+0KAAYUT-r3y2eQzETGnRr+CgPK_OjHrgw7FVQpcJrTJ1-0Kg@mail.gmail.com>
References: <CAA7=MyXFqmpA-UWjZJfVu72UoBqM=pAp-61Go0NnsmJc_AT6-A@mail.gmail.com>
	<CA+0KAAYUT-r3y2eQzETGnRr+CgPK_OjHrgw7FVQpcJrTJ1-0Kg@mail.gmail.com>
Message-ID: <CAA7=MyUpzvH_uPwnAb4X20Fg-w0b6SZNWm+sio2pU3dQhz4eHQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121212/73412d0d/attachment.pl>

From aleksey.schukin at gmail.com  Thu Dec 13 04:48:41 2012
From: aleksey.schukin at gmail.com (Aleksey Schukin)
Date: Wed, 12 Dec 2012 22:48:41 -0500
Subject: [R-SIG-Finance] Quantstrat with TAQ data
In-Reply-To: <CAA7=MyUpzvH_uPwnAb4X20Fg-w0b6SZNWm+sio2pU3dQhz4eHQ@mail.gmail.com>
References: <CAA7=MyXFqmpA-UWjZJfVu72UoBqM=pAp-61Go0NnsmJc_AT6-A@mail.gmail.com>
	<CA+0KAAYUT-r3y2eQzETGnRr+CgPK_OjHrgw7FVQpcJrTJ1-0Kg@mail.gmail.com>
	<CAA7=MyUpzvH_uPwnAb4X20Fg-w0b6SZNWm+sio2pU3dQhz4eHQ@mail.gmail.com>
Message-ID: <CA+0KAAYizD_TOEwrXaa+eiS_tQqV0G7ad0Z7pa1rd6dzocCujw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121212/7c0d08bf/attachment.pl>

From chinmay.patil at gmail.com  Thu Dec 13 08:08:39 2012
From: chinmay.patil at gmail.com (Chinmay Patil)
Date: Thu, 13 Dec 2012 15:08:39 +0800
Subject: [R-SIG-Finance] Quantstrat with TAQ data
In-Reply-To: <CA+0KAAYizD_TOEwrXaa+eiS_tQqV0G7ad0Z7pa1rd6dzocCujw@mail.gmail.com>
References: <CAA7=MyXFqmpA-UWjZJfVu72UoBqM=pAp-61Go0NnsmJc_AT6-A@mail.gmail.com>
	<CA+0KAAYUT-r3y2eQzETGnRr+CgPK_OjHrgw7FVQpcJrTJ1-0Kg@mail.gmail.com>
	<CAA7=MyUpzvH_uPwnAb4X20Fg-w0b6SZNWm+sio2pU3dQhz4eHQ@mail.gmail.com>
	<CA+0KAAYizD_TOEwrXaa+eiS_tQqV0G7ad0Z7pa1rd6dzocCujw@mail.gmail.com>
Message-ID: <CA+kDFFXeJq312mfCO42xMdfLztCC05GOOhuMSS3pQvoLWdHCDA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121213/14ede602/attachment.pl>

From chinmay.patil at gmail.com  Thu Dec 13 08:12:07 2012
From: chinmay.patil at gmail.com (Chinmay Patil)
Date: Thu, 13 Dec 2012 15:12:07 +0800
Subject: [R-SIG-Finance] Quantstrat with TAQ data
In-Reply-To: <CA+kDFFXeJq312mfCO42xMdfLztCC05GOOhuMSS3pQvoLWdHCDA@mail.gmail.com>
References: <CAA7=MyXFqmpA-UWjZJfVu72UoBqM=pAp-61Go0NnsmJc_AT6-A@mail.gmail.com>
	<CA+0KAAYUT-r3y2eQzETGnRr+CgPK_OjHrgw7FVQpcJrTJ1-0Kg@mail.gmail.com>
	<CAA7=MyUpzvH_uPwnAb4X20Fg-w0b6SZNWm+sio2pU3dQhz4eHQ@mail.gmail.com>
	<CA+0KAAYizD_TOEwrXaa+eiS_tQqV0G7ad0Z7pa1rd6dzocCujw@mail.gmail.com>
	<CA+kDFFXeJq312mfCO42xMdfLztCC05GOOhuMSS3pQvoLWdHCDA@mail.gmail.com>
Message-ID: <CA+kDFFUgacuL6JneCmz_BvfrEDzSgqUa=GRGCsri0=mPYMELYA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121213/3be472e4/attachment.pl>

From brian at braverock.com  Thu Dec 13 13:52:59 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 13 Dec 2012 06:52:59 -0600
Subject: [R-SIG-Finance] Quantstrat with TAQ data
In-Reply-To: <CAA7=MyUpzvH_uPwnAb4X20Fg-w0b6SZNWm+sio2pU3dQhz4eHQ@mail.gmail.com>
References: <CAA7=MyXFqmpA-UWjZJfVu72UoBqM=pAp-61Go0NnsmJc_AT6-A@mail.gmail.com>
	<CA+0KAAYUT-r3y2eQzETGnRr+CgPK_OjHrgw7FVQpcJrTJ1-0Kg@mail.gmail.com>
	<CAA7=MyUpzvH_uPwnAb4X20Fg-w0b6SZNWm+sio2pU3dQhz4eHQ@mail.gmail.com>
Message-ID: <50C9CFAB.7040701@braverock.com>

On 12/12/2012 09:45 PM, Robert A'gata wrote:
> Thank you Aleksey. My doubt is less about whether it will be xts or zoo. My
> apology as I should be more precise. Says, I have an xts data with the
> following columns: TradePrice, TradeSize, Bid, Ask, HistoricalVolatility.
> Then my questions are:
>
> 1) How can I make this xts available to add.indicator? In most examples, I
> see that one has to create an instrument out of it. Then assign instrument
> ID to portfolio or strategy object. Finally rely on mktdata to look up.
> 2) For each tick, I'd like to access all the columns in the xts. A simplest
> example would be, I'd like to compute VWAP with 100-trade rolling window.
> Then compute the distance betwen current mid price and the running VWAP.
> How can I let my add.indicator know that I want a whole row and not only
> price? My understanding is that quote(mktData) will try to look for price
> only.
>

As is outlined in the documentation, you need instrument metadata that 
defines the instruments that you're trying to use.  For TAQ data from 
NYSE, these would be stock() instruments.

quantstrat, by default, assumes that you will have data named for each 
instrument, just as though you had called getSymbols.  Other approaches 
are possible, but harder, so we'll skip that.

If you use RTAQ (or the newer 'highfrequency' from R-Forge) to create 
xts objects from your TAQ CSV files, you can easily save these parsed 
xts objects to disk in a format suitable for getSymbols (specifically, 
getSymbols.FI) to go get them for you with from and to dates.  This will 
have the added advantage of making in faster and easier to get this data 
back into R for later analysis.

Let's assume you've done all that, and want to add a 100-trade VWAP 
indicator, as you've requested.  That would look like:

add.indicator(s, name="VWAP",
         arguments = list(
                 price = quote(mktdata$TradePrice)),
                 n = 100,
                 volume = quote(mktdata$TradeSize))
         ),
         label="VWAP"
)

As a side note, You could also easily create and add your 
HistoricalVolatility column as an indicator inside the strategy as well, 
encapsulating all the required analytical code in the strategy object.

Regards,

    - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From izzah100 at yahoo.com  Thu Dec 13 20:05:13 2012
From: izzah100 at yahoo.com (Muhammad Abuizzah)
Date: Thu, 13 Dec 2012 11:05:13 -0800 (PST)
Subject: [R-SIG-Finance] NA's in xts object index
Message-ID: <1355425513.19172.YahooMailNeo@web162402.mail.bf1.yahoo.com>

I created an xts object using POSIXct from tick market data. ?I have used this before without problems, but for some reason today I am getting all NAs in my xts object.
I had that problem before when I used package chron, but I am not using chron today.
Other things that caused similar results in the past was when there was?inconsistencies?with?timezone?or the original start date was not defined. ?I recreated the data defining the timezone, ?and origin = "1970-01-01"
but the issue was not resolved.

When I run this code:?head(.index(myxts)) i get NA NA NA NA NA. ?I run it without the dot head(index(myxts)) and I get the same results, 5 NAs

My understanding is that if you have an xts object, it must have an index made of time that is ordered. ?How can I have NAs then if class(myxts) shows xts


From lisas at salford-systems.com  Thu Dec 13 20:14:33 2012
From: lisas at salford-systems.com (Lisa Solomon)
Date: Thu, 13 Dec 2012 13:14:33 -0600
Subject: [R-SIG-Finance] Webinar: Advances in Gradient Boosting: the Power
 of Post-Processing. TOMORROW, 10-11 a.m., PST
Message-ID: <2732C804E2DBB04AA90A678D76FAF2CC047E0D597F@DFW1MBX02.mex07a.mlsrvr.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121213/dd21e7c5/attachment.pl>

From lisasolomon at alum.mit.edu  Thu Dec 13 21:24:52 2012
From: lisasolomon at alum.mit.edu (Lisa Solomon)
Date: Thu, 13 Dec 2012 15:24:52 -0500
Subject: [R-SIG-Finance] Webinar: Advances in Gradient Boosting: the Power
 of Post-Processing. TOMORROW, 10-11 a.m., PST
Message-ID: <1690400245.6066.1355430292846.JavaMail.help@alum.mit.edu>

Webinar: Advances in Gradient Boosting: the Power of Post-Processing
TOMORROW: December 14, 10-11 a.m., PST

Webinar Registration: http://2.salford-systems.com/gradientboosting-and-post-processing/ 
 
Course Outline: 
I. Gradient Boosting and Post-Processing: 
o What is missing from Gradient Boosting? 
o Why post-processing techniques are used? 

II. Applications Benefiting from Post-Processing: Examples from a variety of industries. 
o Financial Services 
o Biomedical 
o Environmental 
o Manufacturing 
o Adserving 

III. Typical Post-Processing Steps 

IV. Techniques: 
o Generalized Path Seeker (GPS): modern high-speed LASSO-style regularized regression. 
o Importance Sampled Learning Ensembles (ISLE): identify and reweight the most influential trees. 
o Rulefit: ISLE on ?steroids.? Identify the most influential nodes and rules. 

V. Case Study Example: 
o Output/Results without Post-Processing 
o Output/Results with Post-Processing 
o Demo

From rhelpacc at gmail.com  Fri Dec 14 03:31:13 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Thu, 13 Dec 2012 21:31:13 -0500
Subject: [R-SIG-Finance] Quantstrat with TAQ data
In-Reply-To: <50C9CFAB.7040701@braverock.com>
References: <CAA7=MyXFqmpA-UWjZJfVu72UoBqM=pAp-61Go0NnsmJc_AT6-A@mail.gmail.com>
	<CA+0KAAYUT-r3y2eQzETGnRr+CgPK_OjHrgw7FVQpcJrTJ1-0Kg@mail.gmail.com>
	<CAA7=MyUpzvH_uPwnAb4X20Fg-w0b6SZNWm+sio2pU3dQhz4eHQ@mail.gmail.com>
	<50C9CFAB.7040701@braverock.com>
Message-ID: <CAA7=MyWbAWtNCETE7d4UPE6MyTP=QrX+CzMrb0sa3fyxnfGO_A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121213/2d3a38c7/attachment.pl>

From rhelpacc at gmail.com  Fri Dec 14 03:47:11 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Thu, 13 Dec 2012 21:47:11 -0500
Subject: [R-SIG-Finance] Quantstrat with TAQ data
In-Reply-To: <CAA7=MyWbAWtNCETE7d4UPE6MyTP=QrX+CzMrb0sa3fyxnfGO_A@mail.gmail.com>
References: <CAA7=MyXFqmpA-UWjZJfVu72UoBqM=pAp-61Go0NnsmJc_AT6-A@mail.gmail.com>
	<CA+0KAAYUT-r3y2eQzETGnRr+CgPK_OjHrgw7FVQpcJrTJ1-0Kg@mail.gmail.com>
	<CAA7=MyUpzvH_uPwnAb4X20Fg-w0b6SZNWm+sio2pU3dQhz4eHQ@mail.gmail.com>
	<50C9CFAB.7040701@braverock.com>
	<CAA7=MyWbAWtNCETE7d4UPE6MyTP=QrX+CzMrb0sa3fyxnfGO_A@mail.gmail.com>
Message-ID: <CAA7=MyUSU-7ozFhEX=XDsY0YLkE7iWLcYkpoMuoAbG1EFwcR3w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121213/fb18f1df/attachment.pl>

From rhelpacc at gmail.com  Sat Dec 15 05:00:17 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Fri, 14 Dec 2012 23:00:17 -0500
Subject: [R-SIG-Finance] Quantstrat with TAQ data
In-Reply-To: <50C9CFAB.7040701@braverock.com>
References: <CAA7=MyXFqmpA-UWjZJfVu72UoBqM=pAp-61Go0NnsmJc_AT6-A@mail.gmail.com>
	<CA+0KAAYUT-r3y2eQzETGnRr+CgPK_OjHrgw7FVQpcJrTJ1-0Kg@mail.gmail.com>
	<CAA7=MyUpzvH_uPwnAb4X20Fg-w0b6SZNWm+sio2pU3dQhz4eHQ@mail.gmail.com>
	<50C9CFAB.7040701@braverock.com>
Message-ID: <CAA7=MyWMho5j7CBe_tHY7ZGJqh148WvoyErt36VCJ7Oaj7YDmA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121214/ea18f1c9/attachment.pl>

From rhelpacc at gmail.com  Sat Dec 15 05:56:08 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Fri, 14 Dec 2012 23:56:08 -0500
Subject: [R-SIG-Finance] Customized indicator for quantstrat
Message-ID: <CAA7=MyXSb-0n9wpy9bsjcG85-KH5QCxWPWmF-pF5_Fj1rdd9Fw@mail.gmail.com>

Hi,

I am trying to learn how to create customized indicator. Mostly I have my
own recipe which TTR does not cover. I only know that the indicator
function is supposed to return xts. But I couldn't get it to work on my
example. I attached the file here. The customized indicator function is
called "devCalc" which calculates deviation between current price and a
given VWAP. Then normalized with volatility. I named the indicator as "dev"
in add.indicator's label. R complains that no "dev" found when I try to use
it to define my signal. Any help would be appreciated. Thank you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121214/a26edd03/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: LearningQuantStrats.R
Type: application/octet-stream
Size: 3013 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121214/a26edd03/attachment.obj>

From me at censix.com  Sat Dec 15 11:26:42 2012
From: me at censix.com (me)
Date: Sat, 15 Dec 2012 11:26:42 +0100
Subject: [R-SIG-Finance] Customized indicator for quantstrat
In-Reply-To: <CAA7=MyXSb-0n9wpy9bsjcG85-KH5QCxWPWmF-pF5_Fj1rdd9Fw@mail.gmail.com>
References: <CAA7=MyXSb-0n9wpy9bsjcG85-KH5QCxWPWmF-pF5_Fj1rdd9Fw@mail.gmail.com>
Message-ID: <20121215112642.250eec6b@desktop1>

On Fri, 14 Dec 2012 23:56:08 -0500
"Robert A'gata" <rhelpacc at gmail.com> wrote:

> Hi,
> 
> I am trying to learn how to create customized indicator. Mostly I
> have my own recipe which TTR does not cover. I only know that the
> indicator function is supposed to return xts. But I couldn't get it
> to work on my example. I attached the file here. The customized
> indicator function is called "devCalc" which calculates deviation
> between current price and a given VWAP. Then normalized with
> volatility. I named the indicator as "dev" in add.indicator's label.
> R complains that no "dev" found when I try to use it to define my
> signal. Any help would be appreciated. Thank you.


Robert

I think I have encountered this problem before. For some reason, you
have to make sure that the 'devCalc' function that calculates your
indicator returns an xts object *with the correct column names*. In your
case, I think you should do something like this.

devCalc(...){
  ...
  colnames(res) <- 'dev'
  return(res)
}


For some reason, the label="dev" argument in the declaration below is
not enough.


stratVwap <- add.indicator(strategy=stratVwap,name="devCalc",
				arguments=list(price=quote(mktdata$price),
				vwap=quote(mktdata$vwap)),
				label="dev");


Cheers


------------------------------------------------------------------
Soren Wilkening

http://censix.com


From brian at braverock.com  Sat Dec 15 12:40:52 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sat, 15 Dec 2012 05:40:52 -0600
Subject: [R-SIG-Finance] Customized indicator for quantstrat
In-Reply-To: <20121215112642.250eec6b@desktop1>
References: <CAA7=MyXSb-0n9wpy9bsjcG85-KH5QCxWPWmF-pF5_Fj1rdd9Fw@mail.gmail.com>
	<20121215112642.250eec6b@desktop1>
Message-ID: <50CC61C4.1020000@braverock.com>

On 12/15/2012 04:26 AM, me wrote:
> On Fri, 14 Dec 2012 23:56:08 -0500
> "Robert A'gata" <rhelpacc at gmail.com> wrote:
>
>> Hi,
>>
>> I am trying to learn how to create customized indicator. Mostly I
>> have my own recipe which TTR does not cover. I only know that the
>> indicator function is supposed to return xts. But I couldn't get it
>> to work on my example. I attached the file here. The customized
>> indicator function is called "devCalc" which calculates deviation
>> between current price and a given VWAP. Then normalized with
>> volatility. I named the indicator as "dev" in add.indicator's label.
>> R complains that no "dev" found when I try to use it to define my
>> signal. Any help would be appreciated. Thank you.
>
>
> Robert
>
> I think I have encountered this problem before. For some reason, you
> have to make sure that the 'devCalc' function that calculates your
> indicator returns an xts object *with the correct column names*. In your
> case, I think you should do something like this.
>
> devCalc(...){
>    ...
>    colnames(res) <- 'dev'
>    return(res)
> }
>
>
> For some reason, the label="dev" argument in the declaration below is
> not enough.
>
>
> stratVwap <- add.indicator(strategy=stratVwap,name="devCalc",
> 				arguments=list(price=quote(mktdata$price),
> 				vwap=quote(mktdata$vwap)),
> 				label="dev");

applyIndicators will append the label in all cases, I believe.

It seemed from Robert's original post and reported error that he 
probably used name='dev' rather than name='devCalc', since R reported 
that it could not find a function *named* 'dev'.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From rhelpacc at gmail.com  Sat Dec 15 19:30:14 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Sat, 15 Dec 2012 13:30:14 -0500
Subject: [R-SIG-Finance] Customized indicator for quantstrat
In-Reply-To: <50CC61C4.1020000@braverock.com>
References: <CAA7=MyXSb-0n9wpy9bsjcG85-KH5QCxWPWmF-pF5_Fj1rdd9Fw@mail.gmail.com>
	<20121215112642.250eec6b@desktop1> <50CC61C4.1020000@braverock.com>
Message-ID: <CAA7=MyVUo79HKR0Q4J5pFF0Bxkso-Y2kMZ7QGaEu0kMizcPQYQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121215/27b593e5/attachment.pl>

From brian at braverock.com  Sat Dec 15 19:31:48 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sat, 15 Dec 2012 12:31:48 -0600
Subject: [R-SIG-Finance] Customized indicator for quantstrat
In-Reply-To: <CAA7=MyVUo79HKR0Q4J5pFF0Bxkso-Y2kMZ7QGaEu0kMizcPQYQ@mail.gmail.com>
References: <CAA7=MyXSb-0n9wpy9bsjcG85-KH5QCxWPWmF-pF5_Fj1rdd9Fw@mail.gmail.com>
	<20121215112642.250eec6b@desktop1> <50CC61C4.1020000@braverock.com>
	<CAA7=MyVUo79HKR0Q4J5pFF0Bxkso-Y2kMZ7QGaEu0kMizcPQYQ@mail.gmail.com>
Message-ID: <50CCC214.402@braverock.com>

On 12/15/2012 12:30 PM, Robert A'gata wrote:
> Thank you Soren and Brian. Explicitly renaming output column name of
> devCalc to "dev" seems to work. Now I can run applyStrategy until end of
> data. The problem now is that, after looking at transactions, it keeps
> buying whenever dev > 0.2. I would like to only buy 1 when there is no
> position. Likewise, when dev < -0.2, I would like to sell one only when
> there is no position. Do you know how to fix this? Thank you again.

See examples that make use of osMaxPos, e.g. bbands, luxor, rsi.

Brian


> On Sat, Dec 15, 2012 at 6:40 AM, Brian G. Peterson <brian at braverock.com>wrote:
>
>> On 12/15/2012 04:26 AM, me wrote:
>>
>>> On Fri, 14 Dec 2012 23:56:08 -0500
>>> "Robert A'gata" <rhelpacc at gmail.com> wrote:
>>>
>>>   Hi,
>>>>
>>>> I am trying to learn how to create customized indicator. Mostly I
>>>> have my own recipe which TTR does not cover. I only know that the
>>>> indicator function is supposed to return xts. But I couldn't get it
>>>> to work on my example. I attached the file here. The customized
>>>> indicator function is called "devCalc" which calculates deviation
>>>> between current price and a given VWAP. Then normalized with
>>>> volatility. I named the indicator as "dev" in add.indicator's label.
>>>> R complains that no "dev" found when I try to use it to define my
>>>> signal. Any help would be appreciated. Thank you.
>>>>
>>>
>>>
>>> Robert
>>>
>>> I think I have encountered this problem before. For some reason, you
>>> have to make sure that the 'devCalc' function that calculates your
>>> indicator returns an xts object *with the correct column names*. In your
>>> case, I think you should do something like this.
>>>
>>> devCalc(...){
>>>     ...
>>>     colnames(res) <- 'dev'
>>>     return(res)
>>> }
>>>
>>>
>>> For some reason, the label="dev" argument in the declaration below is
>>> not enough.
>>>
>>>
>>> stratVwap <- add.indicator(strategy=**stratVwap,name="devCalc",
>>>                                  arguments=list(price=quote(**
>>> mktdata$price),
>>>                                  vwap=quote(mktdata$vwap)),
>>>                                  label="dev");
>>>
>>
>> applyIndicators will append the label in all cases, I believe.
>>
>> It seemed from Robert's original post and reported error that he probably
>> used name='dev' rather than name='devCalc', since R reported that it could
>> not find a function *named* 'dev'.


From rhelpacc at gmail.com  Sat Dec 15 19:52:05 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Sat, 15 Dec 2012 13:52:05 -0500
Subject: [R-SIG-Finance] Customized indicator for quantstrat
In-Reply-To: <50CCC214.402@braverock.com>
References: <CAA7=MyXSb-0n9wpy9bsjcG85-KH5QCxWPWmF-pF5_Fj1rdd9Fw@mail.gmail.com>
	<20121215112642.250eec6b@desktop1> <50CC61C4.1020000@braverock.com>
	<CAA7=MyVUo79HKR0Q4J5pFF0Bxkso-Y2kMZ7QGaEu0kMizcPQYQ@mail.gmail.com>
	<50CCC214.402@braverock.com>
Message-ID: <CAA7=MyV9hNHS+dXZL-Tbx6ufHgjMUdAqN0cpxRzyLTSh0SFVwQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121215/c04b8dae/attachment.pl>

From brian at braverock.com  Sat Dec 15 19:54:59 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sat, 15 Dec 2012 12:54:59 -0600
Subject: [R-SIG-Finance] Customized indicator for quantstrat
In-Reply-To: <CAA7=MyV9hNHS+dXZL-Tbx6ufHgjMUdAqN0cpxRzyLTSh0SFVwQ@mail.gmail.com>
References: <CAA7=MyXSb-0n9wpy9bsjcG85-KH5QCxWPWmF-pF5_Fj1rdd9Fw@mail.gmail.com>
	<20121215112642.250eec6b@desktop1> <50CC61C4.1020000@braverock.com>
	<CAA7=MyVUo79HKR0Q4J5pFF0Bxkso-Y2kMZ7QGaEu0kMizcPQYQ@mail.gmail.com>
	<50CCC214.402@braverock.com>
	<CAA7=MyV9hNHS+dXZL-Tbx6ufHgjMUdAqN0cpxRzyLTSh0SFVwQ@mail.gmail.com>
Message-ID: <50CCC783.3000609@braverock.com>

On 12/15/2012 12:52 PM, Robert A'gata wrote:
> Thanks again Brian. I understand the example well. So if I were to flip my
> position when my price crosses local VWAP on the opposite side, I will need
> to set 2 rules, one is to enter into a new position and the other is to
> exit the previous position? If so, how do I know which rule will be fired
> first? This is important because says if I was longing and my price crosses
> VWAP from above the rule to enter a new short will get fired first. Then my
> total position is 0. Next my exit signal will fire an order of zero size.
> The right order I'd like the rules to be executed is to exit the existing
> long and then execute a new short.
>
> If there is any better way to do, I'd much appreciate your suggestion.
> Thank you.

Rules are fired in a particular order.  By default, exits fire first. 
So a stop and reverse approach will first stop, then reverse, because 
the exit rule will be processed before the entry.  You can see that 
several of the examples follow a stop and reverse approach.

You are correct that you are best served by having separate rules for 
all of the combinations.  the 'luxor' series of demos are the most 
rigorous in demonstrating various quantstrat features, and build them up 
successively over time, in much the way that strategy authors tend to 
start with a simple idea, and then add complexity incrementally.

Regards,

    - Brian


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From rhelpacc at gmail.com  Sun Dec 16 01:03:53 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Sat, 15 Dec 2012 19:03:53 -0500
Subject: [R-SIG-Finance] Customized indicator for quantstrat
In-Reply-To: <50CCC783.3000609@braverock.com>
References: <CAA7=MyXSb-0n9wpy9bsjcG85-KH5QCxWPWmF-pF5_Fj1rdd9Fw@mail.gmail.com>
	<20121215112642.250eec6b@desktop1> <50CC61C4.1020000@braverock.com>
	<CAA7=MyVUo79HKR0Q4J5pFF0Bxkso-Y2kMZ7QGaEu0kMizcPQYQ@mail.gmail.com>
	<50CCC214.402@braverock.com>
	<CAA7=MyV9hNHS+dXZL-Tbx6ufHgjMUdAqN0cpxRzyLTSh0SFVwQ@mail.gmail.com>
	<50CCC783.3000609@braverock.com>
Message-ID: <CAA7=MyWmCPSukos54dGXRBy5MhQTd564t9rrBxo2NLGfb3i3zQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121215/43d781d3/attachment.pl>

From rhelpacc at gmail.com  Sun Dec 16 04:39:10 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Sat, 15 Dec 2012 22:39:10 -0500
Subject: [R-SIG-Finance] Futures data
Message-ID: <CAA7=MyWDqxxw-1FTxu-YQuqNN+UiuLa9dx9GEPbTOqaU1r5mcg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121215/2ce0d39a/attachment.pl>

From gsee000 at gmail.com  Sun Dec 16 05:03:31 2012
From: gsee000 at gmail.com (G See)
Date: Sat, 15 Dec 2012 22:03:31 -0600
Subject: [R-SIG-Finance] Futures data
In-Reply-To: <CAA7=MyWDqxxw-1FTxu-YQuqNN+UiuLa9dx9GEPbTOqaU1r5mcg@mail.gmail.com>
References: <CAA7=MyWDqxxw-1FTxu-YQuqNN+UiuLa9dx9GEPbTOqaU1r5mcg@mail.gmail.com>
Message-ID: <CA+xi=qZA7vsK9rNdrKOyXriXJ6oV3V_1HD+AXyTFdkPj==-fnw@mail.gmail.com>

If you just want daily data, there is a script in the parser directory
of FinancialInstrument
(http://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/FinancialInstrument/inst/parser/download.tblox.R?root=blotter)
that will download free data since 1995 from tradingblox.

Try this,

library(FinancialInstrument)
source(paste0("http://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/",
             "FinancialInstrument/inst/parser/download.tblox.R?root=blotter"))
define_futures.tblox() # define meta data for available futures -- not
required to get data

buildHierarchy(ls_futures(), "description") # show the descriptions of
available futures

find.instrument("Eurodollar")
getInstrument("ED")

# this getSymbols.tblox method will download all data from tblox, but will only
# assign the symbols you give it.
getSymbols("ED", src='tblox')
tail(ED)

# this will download all tblox futures data and assign in your globalenv()
get_tblox()

tail(TY)
head(CL)

HTH,
Garrett

On Sat, Dec 15, 2012 at 9:39 PM, Robert A'gata <rhelpacc at gmail.com> wrote:
> Eurodollar, treasury, S&P500 e-mini, crude oil, natural gas,
> agricultural


From chinmay.patil at gmail.com  Sun Dec 16 05:07:04 2012
From: chinmay.patil at gmail.com (Chinmay Patil)
Date: Sun, 16 Dec 2012 12:07:04 +0800
Subject: [R-SIG-Finance] Futures data
In-Reply-To: <CAA7=MyWDqxxw-1FTxu-YQuqNN+UiuLa9dx9GEPbTOqaU1r5mcg@mail.gmail.com>
References: <CAA7=MyWDqxxw-1FTxu-YQuqNN+UiuLa9dx9GEPbTOqaU1r5mcg@mail.gmail.com>
Message-ID: <CA+kDFFXH4a-Ub+82_1-PFQbx3CBE=F8T+UVLje5Zd7T0U62H_g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121216/7c866ae6/attachment.pl>

From gsee000 at gmail.com  Sun Dec 16 05:11:50 2012
From: gsee000 at gmail.com (G See)
Date: Sat, 15 Dec 2012 22:11:50 -0600
Subject: [R-SIG-Finance] Futures data
In-Reply-To: <CA+xi=qZA7vsK9rNdrKOyXriXJ6oV3V_1HD+AXyTFdkPj==-fnw@mail.gmail.com>
References: <CAA7=MyWDqxxw-1FTxu-YQuqNN+UiuLa9dx9GEPbTOqaU1r5mcg@mail.gmail.com>
	<CA+xi=qZA7vsK9rNdrKOyXriXJ6oV3V_1HD+AXyTFdkPj==-fnw@mail.gmail.com>
Message-ID: <CA+xi=qYDgaz6Qawm1W+x-SvxSKuncCFcxo8oCj3tw24X1qJc8w@mail.gmail.com>

Also, for daily VIX futures data, there's a getSymbols.cfe method in
my qmao package on R-Forge

# install.packages("qmao", repos="http://r-forge.r-project.org")
library(qmao)
getSymbols("VX", src='cfe', Months=1:12, Years=2011:2012)

Garrett

On Sat, Dec 15, 2012 at 10:03 PM, G See <gsee000 at gmail.com> wrote:
> If you just want daily data, there is a script in the parser directory
> of FinancialInstrument
> (http://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/FinancialInstrument/inst/parser/download.tblox.R?root=blotter)
> that will download free data since 1995 from tradingblox.
>
> Try this,
>
> library(FinancialInstrument)
> source(paste0("http://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/",
>              "FinancialInstrument/inst/parser/download.tblox.R?root=blotter"))
> define_futures.tblox() # define meta data for available futures -- not
> required to get data
>
> buildHierarchy(ls_futures(), "description") # show the descriptions of
> available futures
>
> find.instrument("Eurodollar")
> getInstrument("ED")
>
> # this getSymbols.tblox method will download all data from tblox, but will only
> # assign the symbols you give it.
> getSymbols("ED", src='tblox')
> tail(ED)
>
> # this will download all tblox futures data and assign in your globalenv()
> get_tblox()
>
> tail(TY)
> head(CL)
>
> HTH,
> Garrett
>
> On Sat, Dec 15, 2012 at 9:39 PM, Robert A'gata <rhelpacc at gmail.com> wrote:
>> Eurodollar, treasury, S&P500 e-mini, crude oil, natural gas,
>> agricultural


From chinmay.patil at gmail.com  Sun Dec 16 05:13:23 2012
From: chinmay.patil at gmail.com (Chinmay Patil)
Date: Sun, 16 Dec 2012 12:13:23 +0800
Subject: [R-SIG-Finance] Futures data
In-Reply-To: <CA+xi=qZA7vsK9rNdrKOyXriXJ6oV3V_1HD+AXyTFdkPj==-fnw@mail.gmail.com>
References: <CAA7=MyWDqxxw-1FTxu-YQuqNN+UiuLa9dx9GEPbTOqaU1r5mcg@mail.gmail.com>
	<CA+xi=qZA7vsK9rNdrKOyXriXJ6oV3V_1HD+AXyTFdkPj==-fnw@mail.gmail.com>
Message-ID: <CA+kDFFUhC+qCWbu_V96mcmv9NM_LYRFHW3Fa1ciXSQ_7yBHYtQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121216/626d59fd/attachment.pl>

From gsee000 at gmail.com  Sun Dec 16 05:21:38 2012
From: gsee000 at gmail.com (G See)
Date: Sat, 15 Dec 2012 22:21:38 -0600
Subject: [R-SIG-Finance] Futures data
In-Reply-To: <CA+kDFFUhC+qCWbu_V96mcmv9NM_LYRFHW3Fa1ciXSQ_7yBHYtQ@mail.gmail.com>
References: <CAA7=MyWDqxxw-1FTxu-YQuqNN+UiuLa9dx9GEPbTOqaU1r5mcg@mail.gmail.com>
	<CA+xi=qZA7vsK9rNdrKOyXriXJ6oV3V_1HD+AXyTFdkPj==-fnw@mail.gmail.com>
	<CA+kDFFUhC+qCWbu_V96mcmv9NM_LYRFHW3Fa1ciXSQ_7yBHYtQ@mail.gmail.com>
Message-ID: <CA+xi=qawck5mXmM_w0tgLR7Y8U6uVBjxeaDDC5fjuyb7nR8xRA@mail.gmail.com>

Chinmay,

The trading blox data has a column called Unadjusted close.  The user
is free to use that column.  Also, it is trivial to un-adjust the
Open, High, and Low as well.  And, there is a column showing which
contract is being used for each row which makes it trivial to
re-adjust prices however you see fit, or not at all.

Garrett

On Sat, Dec 15, 2012 at 10:13 PM, Chinmay Patil <chinmay.patil at gmail.com> wrote:
> Hi Garret,
>
> Although a good solution, I would insist user to be careful with downloading
> data from TradingBlox.
> Any futures strategy backtesting especially on higher timeframes like daily
> and above will be very sensitive to method of construction of continous
> contract and if user is not aware of how such a continuos contract is
> created, they may lead themselves to reaching overly optimistic conclusions
> from that backtesting.
>
> TradingBlox data while good (they source the data CSIdata as well) is a
> continuous contract based on their rolling methodology and may not suite
> every user.
>
> Best Regards,
> Chinmay Patil
>
>
> On Sun, Dec 16, 2012 at 12:03 PM, G See <gsee000 at gmail.com> wrote:
>>
>> If you just want daily data, there is a script in the parser directory
>> of FinancialInstrument
>>
>> (http://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/FinancialInstrument/inst/parser/download.tblox.R?root=blotter)
>> that will download free data since 1995 from tradingblox.
>>
>> Try this,
>>
>> library(FinancialInstrument)
>>
>> source(paste0("http://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/",
>>
>> "FinancialInstrument/inst/parser/download.tblox.R?root=blotter"))
>> define_futures.tblox() # define meta data for available futures -- not
>> required to get data
>>
>> buildHierarchy(ls_futures(), "description") # show the descriptions of
>> available futures
>>
>> find.instrument("Eurodollar")
>> getInstrument("ED")
>>
>> # this getSymbols.tblox method will download all data from tblox, but will
>> only
>> # assign the symbols you give it.
>> getSymbols("ED", src='tblox')
>> tail(ED)
>>
>> # this will download all tblox futures data and assign in your globalenv()
>> get_tblox()
>>
>> tail(TY)
>> head(CL)
>>
>> HTH,
>> Garrett
>>
>> On Sat, Dec 15, 2012 at 9:39 PM, Robert A'gata <rhelpacc at gmail.com> wrote:
>> > Eurodollar, treasury, S&P500 e-mini, crude oil, natural gas,
>> > agricultural
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>
>


From gsee000 at gmail.com  Sun Dec 16 05:43:46 2012
From: gsee000 at gmail.com (G See)
Date: Sat, 15 Dec 2012 22:43:46 -0600
Subject: [R-SIG-Finance] Futures data
In-Reply-To: <CAA7=MyWDqxxw-1FTxu-YQuqNN+UiuLa9dx9GEPbTOqaU1r5mcg@mail.gmail.com>
References: <CAA7=MyWDqxxw-1FTxu-YQuqNN+UiuLa9dx9GEPbTOqaU1r5mcg@mail.gmail.com>
Message-ID: <CA+xi=qaG+OYyh7jjAfDYLzDqXSsJ+m_tZAMU1pOava29McTspw@mail.gmail.com>

Robert,

If you have an Interactive Brokers account -- which isn't free, but
pretty close to it -- you can get a year's worth of intraday data for
most futures with the IBrokers package (on CRAN).  See
?reqHistoricalData.  I also have some wrappers for IBrokers functions
for getting lots of data from Interactive Brokers in my twsInstrument
package on R-Forge. https://r-forge.r-project.org/R/?group_id=1113
(see ?reqTBBOhistory)

IB offers 1 second bars, but if you want to get a meaningful amount of
history, you're best off getting 1 minute bars because of their
historical data request pacing rules.

HTH,
Garrett

On Sat, Dec 15, 2012 at 9:39 PM, Robert A'gata <rhelpacc at gmail.com> wrote:
> Hi,
>
> I am wondering if there is any source that one can download futures data
> such as Eurodollar, treasury, S&P500 e-mini, crude oil, natural gas,
> agricultural, etc? Especially downloading from R. Of course, not bloomberg.
> Thank you.
>
> Robert
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From rhelpacc at gmail.com  Sun Dec 16 06:06:53 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Sun, 16 Dec 2012 00:06:53 -0500
Subject: [R-SIG-Finance] Combining instrument data into one xts
Message-ID: <CAA7=MyUK-euiqGt4T_JKRzgZ86HyRxiZSbs5qXHyE4R7PFchgg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121216/b614aaf2/attachment.pl>

From gsee000 at gmail.com  Sun Dec 16 06:28:31 2012
From: gsee000 at gmail.com (G See)
Date: Sat, 15 Dec 2012 23:28:31 -0600
Subject: [R-SIG-Finance] Combining instrument data into one xts
In-Reply-To: <CAA7=MyUK-euiqGt4T_JKRzgZ86HyRxiZSbs5qXHyE4R7PFchgg@mail.gmail.com>
References: <CAA7=MyUK-euiqGt4T_JKRzgZ86HyRxiZSbs5qXHyE4R7PFchgg@mail.gmail.com>
Message-ID: <CA+xi=qa6b_qk-b1eRPpiYpoyUDkoSBJuKsyMRf_8QqF4EuKM7A@mail.gmail.com>

A common way to do this is to store your data in its own environment.  Then,
use eapply to get a list of close prices.  Finally, construct a merge call
with do.call

    s <- c("SPY", "AAPL")
    myEnv <- new.env()
    getSymbols(s, src='yahoo', env=myEnv)
    p <- do.call(merge, eapply(myEnv, Cl))

this is like calling merge(Cl(SPY), Cl(AAPL)), but it will work for any number
of symbols.

Similarly, if your data are stored in your globalenv(), you can create a list
of Close prices and merge them together using do.call.

    s <- c("SPY", "AAPL")
    getSymbols(s, src="yahoo")
    p <- do.call(merge, lapply(s, function(x) Cl(get(x, pos=globalenv()))))

I also happen to have a function that does this for you in one line in my qmao
package on R-Forge. https://r-forge.r-project.org/R/?group_id=1113

    library(qmao)
    p <- PF(getSymbols(c("SPY", "AAPL")), silent=TRUE)

HTH,
Garrett


On Sat, Dec 15, 2012 at 11:06 PM, Robert A'gata <rhelpacc at gmail.com> wrote:
> Hi,
>
> 1) When I call getSymbols with multiple symbols, is there any way I can
> obtain everything into one xts. Says, I want only close data from google
> for c("SPY","AAPL"). Is there anyway I can get an xts with 2 columns
> corresponding to SPY and AAPL close prices?
> 2) Similar to #1, if I have all symbols loaded from files (.RData), is
> there any better way to combiing them than merging them one-by-one using
> xts?
>
> Thank you.
>
> Robert
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From rhelpacc at gmail.com  Sun Dec 16 06:33:45 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Sun, 16 Dec 2012 00:33:45 -0500
Subject: [R-SIG-Finance] Combining instrument data into one xts
In-Reply-To: <CA+xi=qa6b_qk-b1eRPpiYpoyUDkoSBJuKsyMRf_8QqF4EuKM7A@mail.gmail.com>
References: <CAA7=MyUK-euiqGt4T_JKRzgZ86HyRxiZSbs5qXHyE4R7PFchgg@mail.gmail.com>
	<CA+xi=qa6b_qk-b1eRPpiYpoyUDkoSBJuKsyMRf_8QqF4EuKM7A@mail.gmail.com>
Message-ID: <CAA7=MyXcZo2hexdSH9oGR6P0-JecNbiw66b-2VM4kU6wRM_9Ww@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121216/e3a62dd5/attachment.pl>

From rhelpacc at gmail.com  Sun Dec 16 06:51:11 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Sun, 16 Dec 2012 00:51:11 -0500
Subject: [R-SIG-Finance] Equity data from google
Message-ID: <CAA7=MyUAwam61XX_iL6eDhQ-d4tSTPjS4mPomYS5MP+GcJzYHQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121216/6ddb2993/attachment.pl>

From tallent_e at lycos.com  Sun Dec 16 14:20:19 2012
From: tallent_e at lycos.com (Edouard Tallent)
Date: Sun, 16 Dec 2012 13:20:19 +0000 (UTC)
Subject: [R-SIG-Finance] Futures data (G See)
References: <mailman.1.1355655601.22309.r-sig-finance@r-project.org>
Message-ID: <1398947725.80830.1355664019371.JavaMail.mail@webmail16>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121216/0567ddf2/attachment.html>

From jeff.a.ryan at gmail.com  Sun Dec 16 15:34:33 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Sun, 16 Dec 2012 08:34:33 -0600
Subject: [R-SIG-Finance] Equity data from google
In-Reply-To: <CAA7=MyUAwam61XX_iL6eDhQ-d4tSTPjS4mPomYS5MP+GcJzYHQ@mail.gmail.com>
References: <CAA7=MyUAwam61XX_iL6eDhQ-d4tSTPjS4mPomYS5MP+GcJzYHQ@mail.gmail.com>
Message-ID: <CABDUZc8J-HLZoG58YQfR85aQpUCKVhxeN=pN9S3+UOEB-WCPLw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121216/4937ef9c/attachment.pl>

From gsee000 at gmail.com  Sun Dec 16 16:40:06 2012
From: gsee000 at gmail.com (G See)
Date: Sun, 16 Dec 2012 09:40:06 -0600
Subject: [R-SIG-Finance] Futures data (G See)
In-Reply-To: <1398947725.80830.1355664019371.JavaMail.mail@webmail16>
References: <mailman.1.1355655601.22309.r-sig-finance@r-project.org>
	<1398947725.80830.1355664019371.JavaMail.mail@webmail16>
Message-ID: <CA+xi=qZGD7LVQibxp9zY33=pZmtHNgQpwgNhU1SXzhTuSK1LRA@mail.gmail.com>

Eduoard,

I like that site (and I like the subject of this e-mail :) ).  Have
you written anything or do you know of some open source code to pull
that data into R without having to manually download it?

Thanks,
Garrett

On Sun, Dec 16, 2012 at 7:20 AM, Edouard Tallent <tallent_e at lycos.com> wrote:
> Hi all.
>
> Please, have a look at wikiposit.org/p?futures
>
> Best,
> ?douard
> --
> http://quantcorner.wordpress.com
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.


From rhelpacc at gmail.com  Sun Dec 16 20:39:20 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Sun, 16 Dec 2012 14:39:20 -0500
Subject: [R-SIG-Finance] Equity data from google
In-Reply-To: <CABDUZc8J-HLZoG58YQfR85aQpUCKVhxeN=pN9S3+UOEB-WCPLw@mail.gmail.com>
References: <CAA7=MyUAwam61XX_iL6eDhQ-d4tSTPjS4mPomYS5MP+GcJzYHQ@mail.gmail.com>
	<CABDUZc8J-HLZoG58YQfR85aQpUCKVhxeN=pN9S3+UOEB-WCPLw@mail.gmail.com>
Message-ID: <CAA7=MyV-Aua+LQBq-vLrSDGu8VU0+e7UfGMegAuzK-TU_-2+dA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121216/cbadb676/attachment.pl>

From jeff.a.ryan at gmail.com  Sun Dec 16 21:24:14 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Sun, 16 Dec 2012 14:24:14 -0600
Subject: [R-SIG-Finance] Equity data from google
In-Reply-To: <CAA7=MyV-Aua+LQBq-vLrSDGu8VU0+e7UfGMegAuzK-TU_-2+dA@mail.gmail.com>
References: <CAA7=MyUAwam61XX_iL6eDhQ-d4tSTPjS4mPomYS5MP+GcJzYHQ@mail.gmail.com>
	<CABDUZc8J-HLZoG58YQfR85aQpUCKVhxeN=pN9S3+UOEB-WCPLw@mail.gmail.com>
	<CAA7=MyV-Aua+LQBq-vLrSDGu8VU0+e7UfGMegAuzK-TU_-2+dA@mail.gmail.com>
Message-ID: <CABDUZc9KtTUHeFYWjeqNT0V=QgFD5FBiwD95kUX7KZauGJp3WQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121216/f871f466/attachment.pl>

From rhelpacc at gmail.com  Mon Dec 17 00:52:30 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Sun, 16 Dec 2012 18:52:30 -0500
Subject: [R-SIG-Finance] Equity data from google
In-Reply-To: <CABDUZc9KtTUHeFYWjeqNT0V=QgFD5FBiwD95kUX7KZauGJp3WQ@mail.gmail.com>
References: <CAA7=MyUAwam61XX_iL6eDhQ-d4tSTPjS4mPomYS5MP+GcJzYHQ@mail.gmail.com>
	<CABDUZc8J-HLZoG58YQfR85aQpUCKVhxeN=pN9S3+UOEB-WCPLw@mail.gmail.com>
	<CAA7=MyV-Aua+LQBq-vLrSDGu8VU0+e7UfGMegAuzK-TU_-2+dA@mail.gmail.com>
	<CABDUZc9KtTUHeFYWjeqNT0V=QgFD5FBiwD95kUX7KZauGJp3WQ@mail.gmail.com>
Message-ID: <CAA7=MyURFZwzHPBeanK0XUTCdA6Hd+ZUD-pBDmKd3BV_ZbjKUg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121216/3b6864b6/attachment.pl>

From edd at debian.org  Tue Dec 18 02:52:02 2012
From: edd at debian.org (Dirk Eddelbuettel)
Date: Mon, 17 Dec 2012 19:52:02 -0600
Subject: [R-SIG-Finance] R/Finance 2013 -- Call for Papers
Message-ID: <20687.52290.592827.733200@max.nulle.part>


Call for Papers:

R/Finance 2013: Applied Finance with R
May 17 and 18, 2013
University of Illinois at Chicago

The fifth annual R/Finance conference for applied finance using R will be
held on May 17 and 18, 2013 in Chicago, IL, USA at the University of Illinois
at Chicago.  The conference is expected to cover topics including portfolio
management, time series analysis, advanced risk tools, high-performance
computing, market microstructure, and econometrics. All will be discussed
within the context of using R as a primary tool for financial risk
management, portfolio construction, and trading.

Over the past four years, R/Finance has included attendees from around the
world. It featured presentations from prominent academics and practitioners,
and we anticipate another exciting line-up for 2013.

We invite you to submit complete papers in pdf format for consideration. We
will also consider one-page abstracts (in txt or pdf format) although more
complete papers are preferred.  We welcome submissions for full talks and
abbreviated "lightning talks". Both academic and practitioner proposals
related to R are encouraged.

Presenters are strongly encouraged to provide working R code to accompany the
presentation/paper.  Data sets should also be made public for the purposes of
reproducibility (though we realize this may be limited due to contracts with
data vendors). Preference may be given to presenters who have released R
packages.

The conference will award two (or more) $1000 prizes for best papers. A
submission must be a full paper to be eligible for a best paper
award. Extended abstracts, even if a full paper is provided by conference
time, are not eligible for a best paper award.  Financial assistance for
travel and accommodation may be available to presenters at the discretion of
the conference committee. Requests for assistance should be made at the time
of submission.

Please send submissions to: committee <at> RinFinance.com.  The submission
deadline is February 15, 2013. Submitters will be notified of acceptance via
email by February 28, 2013. Notification of whether a presentation will be a
long presentation or a lightning talk will also be made at that time.

Additional details will be announced via the conference website 
 
   http://www.RinFinance.com/ 

as they become available. Information on previous years' presenters and their
presentations are also at the conference website.

For the program committee:
   Gib Bassett, Peter Carl, Dirk Eddelbuettel, Brian Peterson, 
   Dale Rosenthal, Jeffrey Ryan, Joshua Ulrich 


-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From rhelpacc at gmail.com  Tue Dec 18 05:12:35 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Mon, 17 Dec 2012 23:12:35 -0500
Subject: [R-SIG-Finance] Quantstrat summary of trades/transactions
Message-ID: <CAA7=MyV4TY0utq5bEaGTd-opR-5CsMcdtAyvZxyVzzZ8-6dD2w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121217/06e24e6d/attachment.pl>

From josh.m.ulrich at gmail.com  Tue Dec 18 05:14:56 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 17 Dec 2012 22:14:56 -0600
Subject: [R-SIG-Finance] Quantstrat summary of trades/transactions
In-Reply-To: <CAA7=MyV4TY0utq5bEaGTd-opR-5CsMcdtAyvZxyVzzZ8-6dD2w@mail.gmail.com>
References: <CAA7=MyV4TY0utq5bEaGTd-opR-5CsMcdtAyvZxyVzzZ8-6dD2w@mail.gmail.com>
Message-ID: <CAPPM_gT64TEBFWQwK=HypOOfR4pNydtvXXCcuvSdMRNGQq8+qw@mail.gmail.com>

See ?tradeStats in blotter.
--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


On Mon, Dec 17, 2012 at 10:12 PM, Robert A'gata <rhelpacc at gmail.com> wrote:
> Hi,
>
> I think there must be a function already in place to summarize trades and
> transaction fees after running backtesting in quantstrat. For example, I
> would like to know how many trades (long/short) I have done, number of
> winner/loser trades, average pnl per trade, etc.
>
> I am wondering if there is such a function. If any, would you please kindly
> point me to some example? I looked at tutorials online such as some blogs
> and pdfs. I couldn't come across one. Thank you.
>
> Robert
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From rhelpacc at gmail.com  Wed Dec 19 02:46:58 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Tue, 18 Dec 2012 20:46:58 -0500
Subject: [R-SIG-Finance] What does PortfReturns return?
Message-ID: <CAA7=MyVwLPGM+cCRbVddV-X6V1azJ=5HJ1rRbPhQ=SK-U=QWog@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121218/3f8679cb/attachment.pl>

From rhelpacc at gmail.com  Wed Dec 19 03:39:26 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Tue, 18 Dec 2012 21:39:26 -0500
Subject: [R-SIG-Finance] How to specify price column for add.rule?
Message-ID: <CAA7=MyWDosxutV9GSu0kSbpxNknVJyHugPApMZaw6g4Y=G4pFg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121218/9eea6af3/attachment.pl>

From brian at braverock.com  Wed Dec 19 04:12:57 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 18 Dec 2012 21:12:57 -0600
Subject: [R-SIG-Finance] How to specify price column for add.rule?
In-Reply-To: <CAA7=MyWDosxutV9GSu0kSbpxNknVJyHugPApMZaw6g4Y=G4pFg@mail.gmail.com>
References: <CAA7=MyWDosxutV9GSu0kSbpxNknVJyHugPApMZaw6g4Y=G4pFg@mail.gmail.com>
Message-ID: <50D130B9.5030201@braverock.com>

On 12/18/2012 08:39 PM, Robert A'gata wrote:
> I am wondering when I say pricemethod="market" in add.rule function which
> price column in mktdata is selected? I skimmed through the code. It seems
> that if mktdata is BBO, it will pick opposite side price. However, my
> mktdata contains only price, vwap, deviation. How do I tell add.rule to
> pick price as opposed to vwap? Thank you.

as is described in the documentation, quantstrat uses the quantmod 
function getPrice to 'guess' at a price column, or uses the prefer= 
argument to choose one.  if you don't have data identifiable as BBO or 
OHLC data by the is.BBO or is.OHLC methods, getPrice will try to get a 
rational price out of your data if you don't specify prefer.

Obviously, aggressive/passive have very little meaning if you're using a 
set of traded prices, and assume that you would have been able to get 
those prices, which seems a pretty shaky assumption.


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From brian at braverock.com  Wed Dec 19 04:23:17 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 18 Dec 2012 21:23:17 -0600
Subject: [R-SIG-Finance] What does PortfReturns return?
In-Reply-To: <CAA7=MyVwLPGM+cCRbVddV-X6V1azJ=5HJ1rRbPhQ=SK-U=QWog@mail.gmail.com>
References: <CAA7=MyVwLPGM+cCRbVddV-X6V1azJ=5HJ1rRbPhQ=SK-U=QWog@mail.gmail.com>
Message-ID: <50D13325.5080202@braverock.com>

On 12/18/2012 07:46 PM, Robert A'gata wrote:
> I also have another question about table.Arbitrary. What does it expect as
> input return series? A series of r(t) or 1+r(t)?

Either one.  The user is presumed to know how they want to chain their 
returns together, as is described repeatedly in the documentation.

For high frequency data, you probably want to use simple arithmetic 
returns rather than log returns, and you probably want to use arithmetic 
chaining rather than continuous geometric compounding, as geometric 
compounding with high frequency data will rapidly lead to nonsense +/- 
Inf numbers, especially with leverage or a long/short portfolio.

> Also when I put Sharpe ratio and Calmar ratio into table.Arbitrary, I get
> an error that periodicity is too high. My return time series is trade by
> trade time series which is a high frequency returns. Does that mean I
> should roll them up to daily returns first? The problem with this is that I
> cannot backtest it with too many days (says a year) using high frequency
> data because data amount becomes too large to store in memory for me. Is
> there any way to go around these issues? Thank you.

Trying to take intraday 'returns' and automagically turn them into 
longer periodicity for something like an annualized Sharpe is an 
exercise in mathematical futility.  If you have a whole year of returns, 
you know what your Sharpe was for the year, no need to annualized the 
number using silly approximations like the square root of time rule, 
with its associated Gaussian assumption.

You are, as you've guessed, best off aggregating into daily, as would 
your broker or investors, and using those numbers.  You don't need to 
have all the data in memory at once, you put your transactions into your 
P&L at a lower frequency than tick (you're not the entire market), and I 
would assume you would mark the portfolio at a lower frequency still. 
So the total volume of data goes down rapidly.  Holding a quarter or a 
year even of 1-second data n memory is quite simple, and you likely 
don't need or want to mark the portfolio every second if what you're 
ultimately looking for is some set of comparable numbers that will make 
sense to management or an investor.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From rhelpacc at gmail.com  Wed Dec 19 04:24:39 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Tue, 18 Dec 2012 22:24:39 -0500
Subject: [R-SIG-Finance] How to specify price column for add.rule?
In-Reply-To: <50D130B9.5030201@braverock.com>
References: <CAA7=MyWDosxutV9GSu0kSbpxNknVJyHugPApMZaw6g4Y=G4pFg@mail.gmail.com>
	<50D130B9.5030201@braverock.com>
Message-ID: <CAA7=MyXQQA486ed2EHkfyJCOYpmy_7439h1Yv76udeKDV2ALww@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121218/c9b9692b/attachment.pl>

From rhelpacc at gmail.com  Wed Dec 19 04:35:58 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Tue, 18 Dec 2012 22:35:58 -0500
Subject: [R-SIG-Finance] Adding transaction fee in bps (in quantstrat
	add.rule)
Message-ID: <CAA7=MyVXYNGNf-m1+J2JvP_1cyY2of2e3pFM9JEtHv-RH4=h7Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121218/2426c6f8/attachment.pl>

From jan at opentrades.nl  Wed Dec 19 12:32:07 2012
From: jan at opentrades.nl (OpenTrades)
Date: Wed, 19 Dec 2012 12:32:07 +0100
Subject: [R-SIG-Finance] Adding transaction fee in bps (in quantstrat
 add.rule)
In-Reply-To: <CAA7=MyVXYNGNf-m1+J2JvP_1cyY2of2e3pFM9JEtHv-RH4=h7Q@mail.gmail.com>
References: <CAA7=MyVXYNGNf-m1+J2JvP_1cyY2of2e3pFM9JEtHv-RH4=h7Q@mail.gmail.com>
Message-ID: <50D1A5B7.2090307@opentrades.nl>

Check the sources for addTxn() in blotter; you will see that if TxnFees 
is a function instead of a number, it will be used to calculate the txn 
fees.

Just type "addTxn<enter>" in your console to see the source for addTxn, 
and see ?addTxn for documentation.



On 19-12-12 04:35, Robert A'gata wrote:
> Hi,
>
> I see many examples illustrating how to add transaction fees as a fixed
> cost (per unit). I am wondering if there is any example of how to write
> customized cost function? I don't see any to my best knowledge besides
> pennyPerStock.
>
> I would like to describe cost in bps for example. In my mktdata, I always
> have current price. Therefore, my cost is (bps/10000) * price * quantity.
> Any simple example would be appreciated. Then I can go wild myself. Thank
> you.
>
> Robert
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


-- 
Jan Humme - OpenTrades

WWW:     http://www.opentrades.nl
Email:   jan at opentrades.nl
Twitter: @opentrades


From isaacm300 at gmail.com  Thu Dec 20 14:59:33 2012
From: isaacm300 at gmail.com (asfdoij asfoij)
Date: Thu, 20 Dec 2012 05:59:33 -0800
Subject: [R-SIG-Finance] Estimation of Markov Switching VECM in R.
Message-ID: <CALBLFAWOobw+hK54UYL_Kd0PuKvr7EA9peZUcAoL5S+5Er0RkQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121220/db2e3143/attachment.pl>

From matthieu.stigler at gmail.com  Thu Dec 20 16:50:34 2012
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Thu, 20 Dec 2012 16:50:34 +0100
Subject: [R-SIG-Finance] Estimation of Markov Switching VECM in R.
In-Reply-To: <CALBLFAWOobw+hK54UYL_Kd0PuKvr7EA9peZUcAoL5S+5Er0RkQ@mail.gmail.com>
References: <CALBLFAWOobw+hK54UYL_Kd0PuKvr7EA9peZUcAoL5S+5Er0RkQ@mail.gmail.com>
Message-ID: <CAEYvigLNmo4swf8ZtX0Y7dLXNLg68vusQMOcthJwoz+SYU_FCg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121220/d626e2a0/attachment.pl>

From rhelpacc at gmail.com  Fri Dec 21 01:00:45 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Thu, 20 Dec 2012 19:00:45 -0500
Subject: [R-SIG-Finance] Adding transaction fee in bps (in quantstrat
	add.rule)
In-Reply-To: <50D1A5B7.2090307@opentrades.nl>
References: <CAA7=MyVXYNGNf-m1+J2JvP_1cyY2of2e3pFM9JEtHv-RH4=h7Q@mail.gmail.com>
	<50D1A5B7.2090307@opentrades.nl>
Message-ID: <CAA7=MyUm=wiPRexjZUSSNcda76nOOR7+4OK4-ntnqFy1-EPAEA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121220/c0ff28a5/attachment.pl>

From junluke at gmail.com  Fri Dec 21 05:06:53 2012
From: junluke at gmail.com (jun wang)
Date: Thu, 20 Dec 2012 23:06:53 -0500
Subject: [R-SIG-Finance] ghyp package
Message-ID: <CAPD4hGBfRTQu0ap41yLvSa269jXwf4LTXQSzN3+xM76djL8zqw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121220/7f2dd66a/attachment.pl>

From louisinuq at yahoo.com.au  Fri Dec 21 08:26:42 2012
From: louisinuq at yahoo.com.au (intertodd)
Date: Thu, 20 Dec 2012 23:26:42 -0800 (PST)
Subject: [R-SIG-Finance] cant install Quantstrat package
Message-ID: <1356074802942-4653685.post@n4.nabble.com>

Hi, 
Im trying to install the quantstrat package to do some backtesting 
I tried: install.packages("quantstrat",
repos="http://R-Forge.R-project.org") 
warning:package ?quantstrat? is not available (for R version 2.15.0) 

I also tried: http://r-forge.r-project.org/R/?group_id=316
but it says: failed to build, and all the download links are invalid 

can anyone help me with this issue or maybe upload the package please 

thank you guys 
Best Regards 

Louis



--
View this message in context: http://r.789695.n4.nabble.com/cant-install-Quantstrat-package-tp4653685.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From louisinuq at yahoo.com.au  Fri Dec 21 08:27:41 2012
From: louisinuq at yahoo.com.au (intertodd)
Date: Thu, 20 Dec 2012 23:27:41 -0800 (PST)
Subject: [R-SIG-Finance] cant install Quantstrat package
In-Reply-To: <1356074802942-4653685.post@n4.nabble.com>
References: <1356074802942-4653685.post@n4.nabble.com>
Message-ID: <1356074861076-4653687.post@n4.nabble.com>

ANYONE? PLEASE HELP!!!



--
View this message in context: http://r.789695.n4.nabble.com/cant-install-Quantstrat-package-tp4653685p4653687.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From michael.newell.uk at gmail.com  Fri Dec 21 09:35:06 2012
From: michael.newell.uk at gmail.com (Michael Newell)
Date: Fri, 21 Dec 2012 08:35:06 +0000
Subject: [R-SIG-Finance] cant install Quantstrat package
In-Reply-To: <1356074861076-4653687.post@n4.nabble.com>
References: <1356074802942-4653685.post@n4.nabble.com>
	<1356074861076-4653687.post@n4.nabble.com>
Message-ID: <CAEhfj-UbCKz4Jep+D_-O_b05CgmWJLHH+yg6MAefamXGf0MbHQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121221/87a85513/attachment.pl>

From chinmay.patil at gmail.com  Fri Dec 21 09:39:53 2012
From: chinmay.patil at gmail.com (Chinmay Patil)
Date: Fri, 21 Dec 2012 16:39:53 +0800
Subject: [R-SIG-Finance] cant install Quantstrat package
In-Reply-To: <CAEhfj-UbCKz4Jep+D_-O_b05CgmWJLHH+yg6MAefamXGf0MbHQ@mail.gmail.com>
References: <1356074802942-4653685.post@n4.nabble.com>
	<1356074861076-4653687.post@n4.nabble.com>
	<CAEhfj-UbCKz4Jep+D_-O_b05CgmWJLHH+yg6MAefamXGf0MbHQ@mail.gmail.com>
Message-ID: <CA+kDFFUYsrKQV-7cUR78_pWRW-hgj8Kh5H6m4YgezkfYbKmqTQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121221/c2575dc8/attachment.pl>

From rharlow86 at gmail.com  Fri Dec 21 17:19:44 2012
From: rharlow86 at gmail.com (Robert Harlow)
Date: Fri, 21 Dec 2012 11:19:44 -0500
Subject: [R-SIG-Finance] RQuantLib AsianOption Function
Message-ID: <CAHdfS97vaBcQ1FWYzAggN6jDTHGXqE3aJvyWRnTn7cnRGpT7OQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121221/c303fe75/attachment.pl>

From rharlow86 at gmail.com  Fri Dec 21 17:24:58 2012
From: rharlow86 at gmail.com (Robert Harlow)
Date: Fri, 21 Dec 2012 11:24:58 -0500
Subject: [R-SIG-Finance] RQuantLib AsianOption Function
In-Reply-To: <CAHdfS97vaBcQ1FWYzAggN6jDTHGXqE3aJvyWRnTn7cnRGpT7OQ@mail.gmail.com>
References: <CAHdfS97vaBcQ1FWYzAggN6jDTHGXqE3aJvyWRnTn7cnRGpT7OQ@mail.gmail.com>
Message-ID: <CAHdfS96x2+0WMA4iNGN9SAfmiERcpXdduxp-JuDOPdM2O4H=aQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121221/eff6ddfc/attachment.pl>

From bastian2507hk at yahoo.co.uk  Fri Dec 21 18:03:53 2012
From: bastian2507hk at yahoo.co.uk (Bastian Offermann)
Date: Fri, 21 Dec 2012 18:03:53 +0100
Subject: [R-SIG-Finance] Highfrequency package - Error in if (length(c(year,
 month, day, hour, min, sec)) == 6 && c(year, :
Message-ID: <50D49679.7050803@yahoo.co.uk>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121221/de9951e1/attachment.pl>

From jan at opentrades.nl  Fri Dec 21 19:06:41 2012
From: jan at opentrades.nl (OpenTrades)
Date: Fri, 21 Dec 2012 19:06:41 +0100
Subject: [R-SIG-Finance] cant install Quantstrat package
In-Reply-To: <1356074802942-4653685.post@n4.nabble.com>
References: <1356074802942-4653685.post@n4.nabble.com>
Message-ID: <50D4A531.6020502@opentrades.nl>

It seems that there was a problem in the building of the quantstrat 
package, which has been fixed in the mean time.

So just try to download and install the package once more.

HTH,

Jan.

On 21-12-12 08:26, intertodd wrote:
> Hi,
> Im trying to install the quantstrat package to do some backtesting
> I tried: install.packages("quantstrat",
> repos="http://R-Forge.R-project.org")
> warning:package ?quantstrat? is not available (for R version 2.15.0)
>
> I also tried: http://r-forge.r-project.org/R/?group_id=316
> but it says: failed to build, and all the download links are invalid
>
> can anyone help me with this issue or maybe upload the package please
>
> thank you guys
> Best Regards
>
> Louis
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/cant-install-Quantstrat-package-tp4653685.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


-- 
Jan Humme - OpenTrades

WWW:     http://www.opentrades.nl
Email:   jan at opentrades.nl
Twitter: @opentrades


From Jonathan.Cornelissen at kuleuven.be  Fri Dec 21 19:17:19 2012
From: Jonathan.Cornelissen at kuleuven.be (Jonathan Cornelissen)
Date: Fri, 21 Dec 2012 18:17:19 +0000
Subject: [R-SIG-Finance] Highfrequency package - Error in if
 (length(c(year, month, day, hour, min, sec)) == 6 && c(year, :
In-Reply-To: <50D49679.7050803@yahoo.co.uk>
References: <50D49679.7050803@yahoo.co.uk>
Message-ID: <ACEA5BE967337148AF046E3B12962D3A0353CD9B@ICTS-S-MBX7.luna.kuleuven.be>

How about:
format <- "%Y%m%d %H:%M:%S"
?
Regards, 
Jonathan

On Dec 21, 2012, at 6:03 PM, Bastian Offermann wrote:

> Hi all,
> 
> I am currently trying to get acquainted with the "highfrequency" 
> package. I get my raw data from WRDS in .csv format. My data looks as 
> follows:
> 
> SYMBOL 	DATE 	TIME 	PRICE 	SIZE 	G127 	CORR 	COND 	EX
> AOL 	20000216 	9:30:31 	53.3125 	622300 	0 	0 	
> 	N
> AOL 	20000216 	9:30:33 	53.3125 	100 	0 	0 	Z 	C
> AOL 	20000216 	9:30:33 	53.3125 	200 	0 	0 	Z 	C
> AOL 	20000216 	9:30:33 	53.3125 	200 	0 	0 	
> 	X
> AOL 	20000216 	9:30:33 	53.3125 	100 	0 	0 	
> 	X
> AOL 	20000216 	9:30:33 	53.3125 	100 	0 	0 	
> 	M
> AOL 	20000216 	9:30:33 	53.3125 	300 	0 	0 	
> 	M
> AOL 	20000216 	9:30:33 	53.3125 	100 	0 	0 	
> 	M
> AOL 	20000216 	9:30:33 	53.3125 	100 	0 	0 	
> 	M
> 
> 
> I followed the steps outlined in the vignette to convert the .csv data 
> into xts and RData formats using the code below, but always get the 
> following error message:
> 
> ### Error in if (length(c(year, month, day, hour, min, sec)) == 6 && 
> c(year,  :
> ### missing value where TRUE/FALSE needed
> ### In addition: Warning messages:
> ### 1: In as_numeric(YYYY) : NAs introduced by coercion
> ### 2: In as_numeric(YYYY) : NAs introduced by coercion
> 
> I am wondering what causes the error? Could it be due to the date format 
> in the .csv file "20000216" versus "2000-02-16" ? Can anybody help out? 
> Thanks in advance!
> 
> 
> 
> 
> 
> ####################### R - CODE 
> ##################################################
> 
> library("highfrequency")
> library("xts")
> library("timeDate")
> library("quantmod")
> rm(list=ls(all=TRUE))
> 
> ### Loading raw data from working directory
> 
> from <- "2000-02-16"
> to <- "2000-02-17"
> datasource <- "C:/Users/User/Desktop/VWL/2013/high/data"
> datadestination <- "C:/Users/User/Desktop/VWL/2013/high/data"
> tradecolnames <- 
> c("SYMBOL","DATE","TIME","PRICE","SIZE","G127","CORR","COND","EX")
> format <- "%Y%M%D %H:%M:%S"
> 
>  convert(from=from, to=to, datasource=datasource, 
> datadestination=datadestination, trades = TRUE,
>                        quotes = FALSE, ticker="AOL", dir = TRUE, 
> extension = "csv", header = TRUE,
>                        tradecolnames = NULL, quotecolnames = NULL, 
> format = format, onefile = TRUE )
> 
> ###########################  SESSION INFO 
> ##########################################
> 
> 
> sessionInfo()
> R version 2.15.2 (2012-10-26)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> 
> locale:
> [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United 
> States.1252
> [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
> [5] LC_TIME=English_United States.1252
> 
> attached base packages:
> [1] parallel  stats     graphics  grDevices utils     datasets methods   
> base
> 
> other attached packages:
>  [1] quantmod_0.3-17       TTR_0.21-1 Defaults_1.1-1        
> timeDate_2160.97
>  [5] realized_1.0.1        highfrequency_0.1 xts_0.8-8             
> zoo_1.7-9
>  [9] rugarch_1.0-12        Rsolnp_1.14 truncnorm_1.0-6       chron_2.3-43
> [13] numDeriv_2012.9-1     RcppArmadillo_0.3.4.4 Rcpp_0.10.0           
> R.utils_1.18.0
> [17] R.oo_1.10.1           R.methodsS3_1.4.2
> 
> loaded via a namespace (and not attached):
> [1] grid_2.15.2     lattice_0.20-10 tools_2.15.2
> 
> 
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From bastian2507hk at yahoo.co.uk  Fri Dec 21 20:15:40 2012
From: bastian2507hk at yahoo.co.uk (Bastian Offermann)
Date: Fri, 21 Dec 2012 20:15:40 +0100
Subject: [R-SIG-Finance] Highfrequency package - Error in if
 (length(c(year, month, day, hour, min, sec)) == 6 && c(year, :
In-Reply-To: <ACEA5BE967337148AF046E3B12962D3A0353CD9B@ICTS-S-MBX7.luna.kuleuven.be>
References: <50D49679.7050803@yahoo.co.uk>
	<ACEA5BE967337148AF046E3B12962D3A0353CD9B@ICTS-S-MBX7.luna.kuleuven.be>
Message-ID: <50D4B55C.1070406@yahoo.co.uk>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121221/370f5a0b/attachment.pl>

From dhruv.maheshwari at blackrock.com  Fri Dec 21 20:20:29 2012
From: dhruv.maheshwari at blackrock.com (Maheshwari, Dhruv)
Date: Fri, 21 Dec 2012 19:20:29 +0000
Subject: [R-SIG-Finance] ghyp package
In-Reply-To: <CAPD4hGBfRTQu0ap41yLvSa269jXwf4LTXQSzN3+xM76djL8zqw@mail.gmail.com>
References: <CAPD4hGBfRTQu0ap41yLvSa269jXwf4LTXQSzN3+xM76djL8zqw@mail.gmail.com>
Message-ID: <771AE4FBFBCF204D819D8B346ACFCB74B43671@USPMSEXC110N02.na.blkint.com>

The return value is of type mle.ghyp and ghyp. You can extract parameters using the functions described here --
?'ghyp-class'

.. which basically just return slot values like @lambda etc.

ghyp.fit.info is another way to retrieve info specific to the fitting process.

- Dhruv

-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of jun wang
Sent: Thursday, December 20, 2012 23:07
To: r-sig-finance at r-project.org
Subject: [R-SIG-Finance] ghyp package

Hi,all,

Anyone knows how to get the fitted values in the 'fit.ghypuv' function of ghyp package? Really appreciate for any advice.

Jun

	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

THIS MESSAGE AND ANY ATTACHMENTS ARE CONFIDENTIAL, PROPRIETARY, AND MAY BE PRIVILEGED.  If this message was misdirected, BlackRock, Inc. and its subsidiaries, ("BlackRock") does not waive any confidentiality or privilege.  If you are not the intended recipient, please notify us immediately and destroy the message without disclosing its contents to anyone.  Any distribution, use or copying of this e-mail or the information it contains by other than an intended recipient is unauthorized.  The views and opinions expressed in this e-mail message are the author's own and may not reflect the views and opinions of BlackRock, unless the author is authorized by BlackRock to express such views or opinions on its behalf.  All email sent to or from this address is subject to electronic storage and review by BlackRock.  Although BlackRock operates anti-virus programs, it does not accept responsibility for any damage whatsoever caused by viruses being passed.


From ron_michael70 at yahoo.com  Sat Dec 22 19:49:02 2012
From: ron_michael70 at yahoo.com (Ron Michael)
Date: Sun, 23 Dec 2012 02:49:02 +0800 (SGT)
Subject: [R-SIG-Finance] Statistical analysis
Message-ID: <1356202142.35776.YahooMailNeo@web190504.mail.sg3.yahoo.com>

Hi all, I employed in a company which actively trades on various stocks, currency etc. Assuming those entire trading activities as a?single portfolio, this portfolio's components are fixed (i.e. the constituent assets)?however there are daily buy, sell happen on those assets.
?
I was asked to provide Statistical insight on this portfolio, over last month.
?
Can friends here give me some suggestions what should I put on such analysis? I am really looking for some bang therefore just do not want to create some mere time series of this portfolio's returns and VaR estimates!
?
Thanks for your inputs.


From rvince99 at gmail.com  Sat Dec 22 20:07:24 2012
From: rvince99 at gmail.com (Ralph Vince)
Date: Sat, 22 Dec 2012 14:07:24 -0500
Subject: [R-SIG-Finance] Statistical analysis
In-Reply-To: <1356202142.35776.YahooMailNeo@web190504.mail.sg3.yahoo.com>
References: <1356202142.35776.YahooMailNeo@web190504.mail.sg3.yahoo.com>
Message-ID: <CAAHNhKUFuCZQuy+MKGbk58B_Z4O=z0Z8n9Uqv_3epx=0wBFyew@mail.gmail.com>

Percentage of time at equity highs, within 1% of equity highs, 5%, 10%, 20%.

On Sat, Dec 22, 2012 at 1:49 PM, Ron Michael <ron_michael70 at yahoo.com> wrote:
> Hi all, I employed in a company which actively trades on various stocks, currency etc. Assuming those entire trading activities as a single portfolio, this portfolio's components are fixed (i.e. the constituent assets) however there are daily buy, sell happen on those assets.
>
> I was asked to provide Statistical insight on this portfolio, over last month.
>
> Can friends here give me some suggestions what should I put on such analysis? I am really looking for some bang therefore just do not want to create some mere time series of this portfolio's returns and VaR estimates!
>
> Thanks for your inputs.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From ron_michael70 at yahoo.com  Sat Dec 22 21:16:34 2012
From: ron_michael70 at yahoo.com (Ron Michael)
Date: Sun, 23 Dec 2012 04:16:34 +0800 (SGT)
Subject: [R-SIG-Finance] Statistical analysis
In-Reply-To: <CAAHNhKUFuCZQuy+MKGbk58B_Z4O=z0Z8n9Uqv_3epx=0wBFyew@mail.gmail.com>
References: <1356202142.35776.YahooMailNeo@web190504.mail.sg3.yahoo.com>
	<CAAHNhKUFuCZQuy+MKGbk58B_Z4O=z0Z8n9Uqv_3epx=0wBFyew@mail.gmail.com>
Message-ID: <1356207394.85244.YahooMailNeo@web190503.mail.sg3.yahoo.com>

Thanks Ralph for your input. This is great. However I need something from traders' point of views. What a trader might want to see?

Thanks and regards,
?
----- Original Message -----
From: Ralph Vince <rvince99 at gmail.com>
To: Ron Michael <ron_michael70 at yahoo.com>
Cc: "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
Sent: Sunday, 23 December 2012 12:52 AM
Subject: Re: [R-SIG-Finance] Statistical analysis

Percentage of time at equity highs, within 1% of equity highs, 5%, 10%, 20%.

On Sat, Dec 22, 2012 at 1:49 PM, Ron Michael <ron_michael70 at yahoo.com> wrote:
> Hi all, I employed in a company which actively trades on various stocks, currency etc. Assuming those entire trading activities as a single portfolio, this portfolio's components are fixed (i.e. the constituent assets) however there are daily buy, sell happen on those assets.
>
> I was asked to provide Statistical insight on this portfolio, over last month.
>
> Can friends here give me some suggestions what should I put on such analysis? I am really looking for some bang therefore just do not want to create some mere time series of this portfolio's returns and VaR estimates!
>
> Thanks for your inputs.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



From neil.gup at gmail.com  Sat Dec 22 21:29:52 2012
From: neil.gup at gmail.com (Neil Gupta)
Date: Sat, 22 Dec 2012 15:29:52 -0500
Subject: [R-SIG-Finance] Statistical analysis
In-Reply-To: <1356207394.85244.YahooMailNeo@web190503.mail.sg3.yahoo.com>
References: <1356202142.35776.YahooMailNeo@web190504.mail.sg3.yahoo.com>
	<CAAHNhKUFuCZQuy+MKGbk58B_Z4O=z0Z8n9Uqv_3epx=0wBFyew@mail.gmail.com>
	<1356207394.85244.YahooMailNeo@web190503.mail.sg3.yahoo.com>
Message-ID: <CACNE03c2G1oxgewgVSg5aQPiuRRxRdokki0aAH9jk=e5rh+-Kg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121222/0e695ced/attachment.pl>

From louisinuq at yahoo.com.au  Mon Dec 24 05:55:28 2012
From: louisinuq at yahoo.com.au (intertodd)
Date: Sun, 23 Dec 2012 20:55:28 -0800 (PST)
Subject: [R-SIG-Finance] cant install Quantstrat package
In-Reply-To: <50D4A531.6020502@opentrades.nl>
References: <1356074802942-4653685.post@n4.nabble.com>
	<50D4A531.6020502@opentrades.nl>
Message-ID: <1356324914.72643.YahooMailNeo@web165001.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121223/b27844ae/attachment.pl>

From samuelsangchy at hotmail.com  Wed Dec 26 08:14:29 2012
From: samuelsangchy at hotmail.com (SamuelS)
Date: Tue, 25 Dec 2012 23:14:29 -0800 (PST)
Subject: [R-SIG-Finance] Is it possible to import residuals of mean.model
 into variance.model in rugarch package or others?
Message-ID: <1356506069621-4653934.post@n4.nabble.com>

Hi,
  I try to build up a GARCH model in which i want to multiply pre-lagged
squared residuals of mean.model(RES(-1)^2) and several dummy variables(Fi,
i=1,2,3,?) and use the product RES(-1)^2*Fi as a variable in variance.model,
similar to but different from 'gjrGARCH'. 
  I am learning and trying to use the rugarch package to fit the model, but
it seems that the spec function can not contain a unknown variable RES(-1),
the residuals of mean.model.  Then I checked vignette(bottom of page4) and
found "the mean and variance equations in the maximization of the likelihood
is carried out jointly in a single step" insteading of 2-step method. Does
it imply it is impossible to use residuals of mean.model as a variable or
part of a variable in variance.model in rugarch package? 
   Please let me know if there is a solution by using rugarch package or
other packages. Thanks a lot.

Best regards,
Samuel
 



--
View this message in context: http://r.789695.n4.nabble.com/Is-it-possible-to-import-residuals-of-mean-model-into-variance-model-in-rugarch-package-or-others-tp4653934.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Wed Dec 26 09:13:24 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Wed, 26 Dec 2012 08:13:24 +0000
Subject: [R-SIG-Finance] Is it possible to import residuals of
 mean.model into variance.model in rugarch package or others?
In-Reply-To: <1356506069621-4653934.post@n4.nabble.com>
References: <1356506069621-4653934.post@n4.nabble.com>
Message-ID: <50DAB1A4.3020808@4dscape.com>

1. Estimate your conditional mean equation in a first stage (separately).
2. Pass the residuals from your model as the data in 'ugarchfit', having 
set 'ugarchspec' to have (0,0) 'armaOrder' and 'include.mean' set to 
FALSE. Pass any "external" variables for the GARCH model in the 
'external.regressors' slot in the ugarchspec variance.model list 
(appropriately lagged and in the form of a matrix). Provide some 
starting values for the regressors parameters ('setstart<-') and 
preferably define their upper and lower bounds (use 'setbounds<-' method 
on the spec - this is available starting from version 1.0-14).

-Alexios

On 26/12/2012 07:14, SamuelS wrote:
> Hi,
>    I try to build up a GARCH model in which i want to multiply pre-lagged
> squared residuals of mean.model(RES(-1)^2) and several dummy variables(Fi,
> i=1,2,3,?) and use the product RES(-1)^2*Fi as a variable in variance.model,
> similar to but different from 'gjrGARCH'.
>    I am learning and trying to use the rugarch package to fit the model, but
> it seems that the spec function can not contain a unknown variable RES(-1),
> the residuals of mean.model.  Then I checked vignette(bottom of page4) and
> found "the mean and variance equations in the maximization of the likelihood
> is carried out jointly in a single step" insteading of 2-step method. Does
> it imply it is impossible to use residuals of mean.model as a variable or
> part of a variable in variance.model in rugarch package?
>     Please let me know if there is a solution by using rugarch package or
> other packages. Thanks a lot.
>
> Best regards,
> Samuel
>
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Is-it-possible-to-import-residuals-of-mean-model-into-variance-model-in-rugarch-package-or-others-tp4653934.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From singletonthebest at msn.com  Wed Dec 26 12:02:48 2012
From: singletonthebest at msn.com (Simone Gogna)
Date: Wed, 26 Dec 2012 12:02:48 +0100
Subject: [R-SIG-Finance] help for a simulation
Message-ID: <DUB107-ds19642A6021948707398734D3390@phx.gbl>

Dear R users,
I am writing my master thesis and I need to simulate equations 12, 13 and 14 of the attached paper.
Pls forgive my ignorance but it is the first time I try something like that.
The code I came up with so far is presented below, but I think that it is very incorrect or, at least, doesn?t work.
If you have any idea on the approach that I?ve to take or on how to improve my code pls don?t hesitate to contact me.
I appreciate your patience.
Thanks
Simone Gogna

##general settings
c<-0.5
lambda<-0.3
a<-c/lambda
n<-500     

## Eq.12
V_init_cond<-0
Et<-ts(rnorm(n+100,mean=0,sd=1))
Vt<-Et*0
Vt[1]<-V_init_cond+Et[1]
for(i in 2:(n+100)) {
  Vt[i]<-Vt[i-1]+Et[i]
}
Vt<-ts(Vt[(length(Vt)-n+1):length(Vt)])
plot(Vt)


#Eq.13
Xt_init_cond<-0
Xt<-Xt_init_cond*0
Xt[2]<-c(Vt[1]-Pt[1])
for(i in 2:(n)){
  Xt[i]<-c(Vt[i-1]-Pt[i-1])
}
Xt<-ts(Xt[(length(Xt)-n+1):length(Xt)])
plot(Xt)




##Eq. 14
P_init_cond<-0
Pt<-Rt*0
Pt[1]<-P_init_cond+Rt[1]
for(i in 2:(n+100)) {
  Pt[i]<-Pt[i-1]+Rt[i]
}
Pt<-ts(Pt[(length(Pt)-n+1):length(Pt)])
plot(Pt)


epsilon<-ts(rnorm(n,mean=0,sd=1))
Rt_init_cond<-0
Rt<-Rt_init_cond*0
Rt[2]<- -a*Rt[1]+a*Et[1]+epsilon[2]
for(i in 2:(n)){
  Rt[i]<- -a*Rt[i-1]+a*Et[i-1]+epsilon[i]
}
Rt<-ts(Rt[(length(Rt)-n+1):length(Rt)])
plot(Rt)


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121226/123d4784/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: farmer joshi.pdf
Type: application/pdf
Size: 330634 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121226/123d4784/attachment.pdf>

From rbali at ufmg.br  Wed Dec 26 13:48:40 2012
From: rbali at ufmg.br (Robert Iquiapaza)
Date: Wed, 26 Dec 2012 10:48:40 -0200
Subject: [R-SIG-Finance] help for a simulation
In-Reply-To: <DUB107-ds19642A6021948707398734D3390@phx.gbl>
References: <DUB107-ds19642A6021948707398734D3390@phx.gbl>
Message-ID: <CAKW5Cfp-9o6kob58XyxP6+smgSbPGTmdRUXyX3Z80XpxXnkOYw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121226/84aa31b3/attachment.pl>

From rhelpacc at gmail.com  Wed Dec 26 18:35:05 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Wed, 26 Dec 2012 12:35:05 -0500
Subject: [R-SIG-Finance] ordertype="market" in add.rule
Message-ID: <CAA7=MyW1SM0JZXhyBncOrsipQM_07h7fG2cLx+BT1BUbNA7knw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121226/98e10b3b/attachment.pl>

From mwitt at belvederetrading.com  Wed Dec 26 18:48:46 2012
From: mwitt at belvederetrading.com (mattw30030)
Date: Wed, 26 Dec 2012 09:48:46 -0800 (PST)
Subject: [R-SIG-Finance] "stoplimit" orders for the "short" side
Message-ID: <1356544126158-4653968.post@n4.nabble.com>

I've been able to get 'stoplimit' orders to work on the "long" side of the
trade, however, quantstrat seems to be treating 'stoplimit'  orders
differently on the "short" side.  
 Looking through the orderbook, it appears 'stoplimit' orders on the "short"
side are not being "canceled", as the "short" trade exits but, but are be
"closed" , thus executing at the 'stoplimit' price rather  than the 'exit'
price generated by the 'exit' rule.  

Here is the code I am running on 60 minute data:

dummy <- currency('USD')
stock.str = c("spy15min")
for(symbol in stock.str)
  stock(symbol, currency="USD",multiplier=1)

start.data <- as.Date("2011-12-27")
end.data <- as.Date("2011-12-27")
initDate <- start.data-1

# inz portfolio, account, orders, strategy
 strat.name <- "MACD"
initEq=1000000

dummy <- initPortf(name=strat.name,symbols=stock.str, initDate=initDate)
dummy <- initAcct(name=strat.name,portfolios=strat.name,
                  initDate=initDate, initEq=initEq)
initOrders(portfolio=strat.name,initDate=initDate)
strat <- strategy(strat.name)
addPosLimit("MACD", "spy15min", timestamp=initDate, maxpos=100, minpos=-100)


# indicators:
 strat <- add.indicator(strategy = strat, name = "MACD",
                         arguments = list(x=quote(Cl(mktdata))) 

# signals:
strat <- add.signal(strategy = strat, name="sigThreshold",
            arguments =
list(column="signal",relationship="gt",threshold=0,cross=TRUE),
            label="signal.gt.zero")

strat <- add.signal(strategy = strat,name="sigThreshold",
                 arguments =
list(column="signal",relationship="lt",threshold=0,cross=TRUE),
                    label="signal.lt.zero")


# rules:

strat <- add.rule(strategy = strat,name='ruleSignal',
          arguments = list(sigcol="signal.gt.zero",sigval=TRUE,
orderqty=100,
            ordertype='market', orderside='long', osFUN=osMaxPos
),type='enter')

strat <- add.rule(strategy = strat,name='ruleSignal',
          arguments = list(sigcol="signal.lt.zero",sigval=TRUE,
orderqty=-100,
            ordertype='market', orderside='short',
osFUN=osMaxPos),type='enter')

strat <- add.rule(strategy = strat,name='ruleSignal', arguments =
list(sigcol="signal.gt.zero",sigval=TRUE, orderqty='all', 
            ordertype='stoplimit',orderside='long',  threshold=
-.1,tmult=TRUE, 
              orderset='exit2',replace=TRUE),type='exit',label='risk')

strat <- add.rule(strategy = strat,name='ruleSignal', arguments =
list(sigcol="signal.lt.zero",sigval=TRUE, orderqty='all', 
            ordertype='stoplimit',orderside='short',  threshold=
.1,tmult=TRUE, 
              orderset='exit2',replace=TRUE),type='exit',label='risk')


strat <- add.rule(strategy = strat,name='ruleSignal',
           arguments = list(sigcol="signal.lt.zero",sigval=TRUE,
orderqty='all',
             ordertype='market', orderside='long'),type='exit')

strat <- add.rule(strategy = strat,name='ruleSignal',
                  arguments = list(sigcol="signal.gt.zero",sigval=TRUE,
orderqty='all',
                    ordertype='market', orderside='short'),type='exit')


# parameters:

fastMA = 12
slowMA = 26
signalMA = 9
maType="EMA"

# apply strategy

out<-try(applyStrategy(strategy=strat, portfolios=strat.name,
        parameters=list(nFast=fastMA, nSlow=slowMA,
nSig=signalMA,maType=maType),
          verbose=F))

getTxns(Portfolio=strat.name, Symbol=stock.str)

getOrderBook('MACD')

############

And here is the output from the orderbook:

$MACD$spy15min
                    Order.Qty Order.Price Order.Type  Order.Side
Order.Threshold Order.Status
2011-12-25 18:00:00 "0"       NA          "init"      "long"     "0"            
"closed"    
2012-01-30 11:00:00 "all"     "143.803"   "stoplimit" "short"    "13.073"       
"closed"    
2012-01-30 11:00:00 "-100"    "130.73"    "market"    "short"    NA             
"closed"    
2012-02-01 12:00:00 "all"     "119.61"    "stoplimit" "long"     "-13.29"       
"canceled"  
2012-02-01 12:00:00 "100"     "132.9"     "market"    "long"     NA             
"closed"    
2012-03-05 12:00:00 "all"     "150.007"   "stoplimit" "short"    "13.637"       
"closed"    
2012-03-05 12:00:00 "-100"    "136.37"    "market"    "long"     NA             
"closed"    
2012-03-05 12:00:00 "-100"    "136.37"    "market"    "short"    NA             
"canceled"  
2012-03-09 09:00:00 "all"     "123.516"   "stoplimit" "long"     "-13.724"      
"canceled"  
2012-03-09 09:00:00 "100"     "137.24"    "market"    "short"    NA             
"closed"    
2012-03-09 09:00:00 "100"     "137.24"    "market"    "long"     NA             
"canceled"  
2012-03-22 12:00:00 "all"     "153.318"   "stoplimit" "short"    "13.938"       
"closed"    
2012-03-22 12:00:00 "-100"    "139.38"    "market"    "short"    NA             
"closed"    
2012-03-26 13:00:00 "all"     "126.9"     "stoplimit" "long"     "-14.1"        
"canceled"  
2012-03-26 13:00:00 "100"     "141"       "market"    "long"     NA             
"closed"    
2012-03-29 11:00:00 "all"     "153.142"   "stoplimit" "short"    "13.922"       
"closed"    
2012-03-29 11:00:00 "-100"    "139.22"    "market"    "long"     NA             
"closed"    
2012-03-29 11:00:00 "-100"    "139.22"    "market"    "short"    NA             
"canceled"  
2012-04-02 10:00:00 "all"     "127.107"   "stoplimit" "long"     "-14.123"      
"canceled"  
2012-04-02 10:00:00 "100"     "141.23"    "market"    "short"    NA             
"closed"    
2012-04-02 10:00:00 "100"     "141.23"    "market"    "long"     NA             
"canceled"  
2012-04-04 13:00:00 "all"     "153.725"   "stoplimit" "short"    "13.975"       
"closed"    
2012-04-04 13:00:00 "-100"    "139.75"    "market"    "short"    NA             
"closed"    
2012-04-17 14:00:00 "all"     "125.298"   "stoplimit" "long"     "-13.922"      
"canceled"  
2012-04-17 14:00:00 "100"     "139.22"    "market"    "long"     NA             
"closed"    
2012-04-23 09:00:00 "all"     "149.919"   "stoplimit" "short"    "13.629"       
"closed"    
2012-04-23 09:00:00 "-100"    "136.29"    "market"    "long"     NA             
"closed"    
2012-04-23 09:00:00 "-100"    "136.29"    "market"    "short"    NA             
"canceled"  
2012-04-25 14:00:00 "all"     "125.199"   "stoplimit" "long"     "-13.911"      
"canceled"  
2012-04-25 14:00:00 "100"     "139.11"    "market"    "short"    NA             
"closed"    
2012-04-25 14:00:00 "100"     "139.11"    "market"    "long"     NA             
"canceled"  
2012-05-04 09:00:00 "all"     "151.888"   "stoplimit" "short"    "13.808"       
"closed"    
2012-05-04 09:00:00 "-100"    "138.08"    "market"    "short"    NA             
"closed"    
2012-05-25 11:00:00 "all"     "119.376"   "stoplimit" "long"     "-13.264"      
"canceled"  
2012-05-25 11:00:00 "100"     "132.64"    "market"    "long"     NA             
"closed"    
2012-05-31 10:00:00 "all"     "143.682"   "stoplimit" "short"    "13.062"       
"closed"    
2012-05-31 10:00:00 "-100"    "130.62"    "market"    "long"     NA             
"closed"    
2012-05-31 10:00:00 "-100"    "130.62"    "market"    "short"    NA             
"canceled"  
2012-06-06 15:00:00 "all"     "118.818"   "stoplimit" "long"     "-13.202"      
"canceled"  
2012-06-06 15:00:00 "100"     "132.02"    "market"    "short"    NA             
"closed"    
2012-06-06 15:00:00 "100"     "132.02"    "market"    "long"     NA             
"canceled"  
2012-06-22 10:00:00 "all"     "146.168"   "stoplimit" "short"    "13.288"       
"closed"    
2012-06-22 10:00:00 "-100"    "132.88"    "market"    "short"    NA             
"closed"    
2012-06-29 11:00:00 "all"     "121.878"   "stoplimit" "long"     "-13.542"      
"canceled"  
2012-06-29 11:00:00 "100"     "135.42"    "market"    "long"     NA             
"closed"    
2012-07-09 13:00:00 "all"     "148.742"   "stoplimit" "short"    "13.522"       
"closed"    
2012-07-09 13:00:00 "-100"    "135.22"    "market"    "long"     NA             
"closed"    
2012-07-09 13:00:00 "-100"    "135.22"    "market"    "short"    NA             
"canceled"  
2012-07-16 10:00:00 "all"     "121.851"   "stoplimit" "long"     "-13.539"      
"canceled"  
2012-07-16 10:00:00 "100"     "135.39"    "market"    "short"    NA             
"closed"    
2012-07-16 10:00:00 "100"     "135.39"    "market"    "long"     NA             
"canceled"  
2012-07-23 12:00:00 "all"     "148.28"    "stoplimit" "short"    "13.48"        
"closed"    
2012-07-23 12:00:00 "-100"    "134.8"     "market"    "short"    NA             
"closed"    
2012-07-27 10:00:00 "all"     "123.786"   "stoplimit" "long"     "-13.754"      
"canceled"  
2012-07-27 10:00:00 "100"     "137.54"    "market"    "long"     NA             
"closed"    
2012-08-02 14:00:00 "all"     "149.798"   "stoplimit" "short"    "13.618"       
"closed"    
2012-08-02 14:00:00 "-100"    "136.18"    "market"    "long"     NA             
"closed"    
2012-08-02 14:00:00 "-100"    "136.18"    "market"    "short"    NA             
"canceled"  
2012-08-03 12:00:00 "all"     "125.487"   "stoplimit" "long"     "-13.943"      
"canceled"  
2012-08-03 12:00:00 "100"     "139.43"    "market"    "short"    NA             
"closed"    
2012-08-03 12:00:00 "100"     "139.43"    "market"    "long"     NA             
"canceled"  
2012-08-23 10:00:00 "all"     "155.298"   "stoplimit" "short"    "14.118"       
"closed"    
2012-08-23 10:00:00 "-100"    "141.18"    "market"    "short"    NA             
"closed"    
2012-08-28 09:00:00 "all"     "127.026"   "stoplimit" "long"     "-14.114"      
"canceled"  
2012-08-28 09:00:00 "100"     "141.14"    "market"    "long"     NA             
"closed"    
2012-08-30 10:00:00 "all"     "154.429"   "stoplimit" "short"    "14.039"       
"closed"    
2012-08-30 10:00:00 "-100"    "140.39"    "market"    "long"     NA             
"closed"    
2012-08-30 10:00:00 "-100"    "140.39"    "market"    "short"    NA             
"canceled"  
2012-09-06 10:00:00 "all"     "129.141"   "stoplimit" "long"     "-14.349"      
"canceled"  
2012-09-06 10:00:00 "100"     "143.49"    "market"    "short"    NA             
"closed"    
2012-09-06 10:00:00 "100"     "143.49"    "market"    "long"     NA             
"canceled"  
2012-09-24 09:00:00 "all"     "159.896"   "stoplimit" "short"    "14.536"       
"closed"    
2012-09-24 09:00:00 "-100"    "145.36"    "market"    "short"    NA             
"closed"    
2012-10-03 13:00:00 "all"     "130.446"   "stoplimit" "long"     "-14.494"      
"canceled"  
2012-10-03 13:00:00 "100"     "144.94"    "market"    "long"     NA             
"closed"    
2012-10-09 13:00:00 "all"     "158.983"   "stoplimit" "short"    "14.453"       
"closed"    
2012-10-09 13:00:00 "-100"    "144.53"    "market"    "long"     NA             
"closed"    
2012-10-09 13:00:00 "-100"    "144.53"    "market"    "short"    NA             
"canceled"  
2012-10-16 13:00:00 "all"     "130.986"   "stoplimit" "long"     "-14.554"      
"canceled"  
2012-10-16 13:00:00 "100"     "145.54"    "market"    "short"    NA             
"closed"    
2012-10-16 13:00:00 "100"     "145.54"    "market"    "long"     NA             
"canceled"  
2012-10-19 15:00:00 "all"     "157.674"   "stoplimit" "short"    "14.334"       
"closed"    
2012-10-19 15:00:00 "-100"    "143.34"    "market"    "short"    NA             
"closed"    
2012-11-01 14:00:00 "all"     "128.538"   "stoplimit" "long"     "-14.282"      
"canceled"  
2012-11-01 14:00:00 "100"     "142.82"    "market"    "long"     NA             
"closed"    
2012-11-05 14:00:00 "all"     "155.859"   "stoplimit" "short"    "14.169"       
"closed"    
2012-11-05 14:00:00 "-100"    "141.69"    "market"    "long"     NA             
"closed"    
2012-11-05 14:00:00 "-100"    "141.69"    "market"    "short"    NA             
"canceled"  
2012-11-06 11:00:00 "all"     "128.88"    "stoplimit" "long"     "-14.32"       
"canceled"  
2012-11-06 11:00:00 "100"     "143.2"     "market"    "short"    NA             
"closed"    
2012-11-06 11:00:00 "100"     "143.2"     "market"    "long"     NA             
"canceled"  
2012-11-07 12:00:00 "all"     "153.978"   "stoplimit" "short"    "13.998"       
"closed"    
2012-11-07 12:00:00 "-100"    "139.98"    "market"    "short"    NA             
"closed"    
2012-11-19 15:00:00 "all"     "125.199"   "stoplimit" "long"     "-13.911"      
"canceled"  
2012-11-19 15:00:00 "100"     "139.11"    "market"    "long"     NA             
"closed"    
2012-12-05 11:00:00 "all"     "155.826"   "stoplimit" "short"    "14.166"       
"closed"    
2012-12-05 11:00:00 "-100"    "141.66"    "market"    "long"     NA             
"closed"    
2012-12-05 11:00:00 "-100"    "141.66"    "market"    "short"    NA             
"canceled"  
2012-12-06 09:00:00 "all"     "127.314"   "stoplimit" "long"     "-14.146"      
"canceled"  
2012-12-06 09:00:00 "100"     "141.46"    "market"    "short"    NA             
"closed"    
2012-12-06 09:00:00 "100"     "141.46"    "market"    "long"     NA             
"canceled"  
2012-12-14 13:00:00 "all"     "156.662"   "stoplimit" "short"    "14.242"       
"closed"    
2012-12-14 13:00:00 "-100"    "142.42"    "market"    "short"    NA             
"closed"    
2012-12-18 09:00:00 "all"     "129.483"   "stoplimit" "long"     "-14.387"      
"canceled"  
2012-12-18 09:00:00 "100"     "143.87"    "market"    "long"     NA             
"closed"    
2012-12-21 13:00:00 "all"     "156.871"   "stoplimit" "short"    "14.261"       
"closed"    
2012-12-21 13:00:00 "-100"    "142.61"    "market"    "long"     NA             
"closed"    
2012-12-21 13:00:00 "-100"    "142.61"    "market"    "short"    NA             
"canceled"  


Any thoughts?

Thanks,

Matt




--
View this message in context: http://r.789695.n4.nabble.com/stoplimit-orders-for-the-short-side-tp4653968.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From josh.m.ulrich at gmail.com  Wed Dec 26 20:37:53 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Wed, 26 Dec 2012 13:37:53 -0600
Subject: [R-SIG-Finance] NA's in xts object index
In-Reply-To: <1355425513.19172.YahooMailNeo@web162402.mail.bf1.yahoo.com>
References: <1355425513.19172.YahooMailNeo@web162402.mail.bf1.yahoo.com>
Message-ID: <CAPPM_gSwDdpJQdpj9o8gq=3S6s2hEkUD9k+GYGc1j_AQ4dtjRQ@mail.gmail.com>

Hi Muhammad,

It is nearly impossible to help if you do not provide a minimal,
reproducible example that demonstrates this behavior.  This post on
Stackoverflow provides helpful instructions:
http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

It would also help if you follow the "Surprising behavior and bugs"
section of the posting guide:
http://www.r-project.org/posting-guide.html

Best,
--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


On Thu, Dec 13, 2012 at 1:05 PM, Muhammad Abuizzah <izzah100 at yahoo.com> wrote:
> I created an xts object using POSIXct from tick market data.  I have used this before without problems, but for some reason today I am getting all NAs in my xts object.
> I had that problem before when I used package chron, but I am not using chron today.
> Other things that caused similar results in the past was when there was inconsistencies with timezone or the original start date was not defined.  I recreated the data defining the timezone,  and origin = "1970-01-01"
> but the issue was not resolved.
>
> When I run this code: head(.index(myxts)) i get NA NA NA NA NA.  I run it without the dot head(index(myxts)) and I get the same results, 5 NAs
>
> My understanding is that if you have an xts object, it must have an index made of time that is ordered.  How can I have NAs then if class(myxts) shows xts
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From rhelpacc at gmail.com  Thu Dec 27 00:52:05 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Wed, 26 Dec 2012 18:52:05 -0500
Subject: [R-SIG-Finance] Reading xts data from csv
Message-ID: <CAA7=MyU2=QC6BsAsSwQds6BUTXfAUwqdEqb7fKReDMK9NY4xtg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121226/f2d9484e/attachment.pl>

From still.another.person at gmail.com  Thu Dec 27 01:03:01 2012
From: still.another.person at gmail.com (Olaf TNSB)
Date: Thu, 27 Dec 2012 11:03:01 +1100
Subject: [R-SIG-Finance] Reading xts data from csv
In-Reply-To: <CAA7=MyU2=QC6BsAsSwQds6BUTXfAUwqdEqb7fKReDMK9NY4xtg@mail.gmail.com>
References: <CAA7=MyU2=QC6BsAsSwQds6BUTXfAUwqdEqb7fKReDMK9NY4xtg@mail.gmail.com>
Message-ID: <CABDMPbqQ2C5Buz5cX5837L__z2C5Fx_7y0EjCLEejY7P-w3g8A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121227/9ae737c1/attachment.pl>

From rhelpacc at gmail.com  Thu Dec 27 01:07:45 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Wed, 26 Dec 2012 19:07:45 -0500
Subject: [R-SIG-Finance] ruleSignal doesn't want to open a position
Message-ID: <CAA7=MyWDjn8YLOr7GXbLHdPOxE5FJ3qZ08aZC0Y_dikBn-uOGQ@mail.gmail.com>

Hi,

I have a simple strategy that open a position when fast local vwap (vwap1)
crosses above the slow local vwap (vwap2). My mktdata looks like below.

> head(mktdata,2)
                           vwap2  price   vwap1    bid    ask rawsigma
sigma
2012-12-11 19:35:24.637 1710.874 1710.4 1710.58 1710.3 1710.5 56.19804
4.755039
2012-12-11 19:35:24.637 1710.873 1710.4 1710.58 1710.3 1710.5 56.19804
4.755039
                            devsig pvcx.gt pvcx.lt
2012-12-11 19:35:24.637 -0.3609031      NA      NA
2012-12-11 19:35:24.637 -0.3593325      NA      NA


In my code, whenever pvcx.gt=1, I will open a long position with 1 unit of
my stock. However, when running my code (attached with data), quantstrat
doesn't not want to create any order. I also checked that there are 17 rows
where pvcx.gt=1. I do not understand why none of them is triggered. Any
comment would be appreciated. Thank you.

> idx <- which(mktdata$pvcx.gt==1)
> length(idx)
[1] 17
> head(idx)
[1]  213 2363 4104 4241 5793 7054
> mktdata[idx[1],]
                           vwap2  price    vwap1    bid  ask rawsigma
sigma
2012-12-11 19:58:47.615 1710.612 1710.9 1710.614 1710.9 1711 58.92066
4.57865
                             devsig pvcx.gt pvcx.lt
2012-12-11 19:58:47.615 0.002908604       1      NA


Robert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121226/302cd3a7/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: CrossOverVwapRun.R
Type: application/octet-stream
Size: 7097 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121226/302cd3a7/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: GCv1.zip
Type: application/zip
Size: 195947 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121226/302cd3a7/attachment.zip>

From ggrothendieck at gmail.com  Thu Dec 27 01:19:57 2012
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 26 Dec 2012 19:19:57 -0500
Subject: [R-SIG-Finance] Reading xts data from csv
In-Reply-To: <CAA7=MyU2=QC6BsAsSwQds6BUTXfAUwqdEqb7fKReDMK9NY4xtg@mail.gmail.com>
References: <CAA7=MyU2=QC6BsAsSwQds6BUTXfAUwqdEqb7fKReDMK9NY4xtg@mail.gmail.com>
Message-ID: <CAP01uRnjA4xYMk3RPm18tuZefg0rrOph_wwvQctGy1QjS8eavA@mail.gmail.com>

On Wed, Dec 26, 2012 at 6:52 PM, Robert A'gata <rhelpacc at gmail.com> wrote:
> Hi,
>
> My understanding is that there is no read.xts allowing us to read xts
> directly from csv. A detour is to use read.zoo and then call as.xts.
> However, I don't know how to get by the case where my csv has multiple
> instances with the same timestamp. read.zoo will choke and

It does not give an error.  It only gives a warning.

> complain that
> duplicate row names is not allowed. I am wondering if there is anyway to
> circumvent this? Thank you.
>

In fact, it does work:

Lines <- "2000-10-01 1
2000-10-01 1"

library(xts)
z <- read.zoo(text = Lines)
x <- as.xts(z)


--
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From rhelpacc at gmail.com  Thu Dec 27 07:25:13 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Thu, 27 Dec 2012 01:25:13 -0500
Subject: [R-SIG-Finance] ruleSignal doesn't want to open a position
In-Reply-To: <CAA7=MyWDjn8YLOr7GXbLHdPOxE5FJ3qZ08aZC0Y_dikBn-uOGQ@mail.gmail.com>
References: <CAA7=MyWDjn8YLOr7GXbLHdPOxE5FJ3qZ08aZC0Y_dikBn-uOGQ@mail.gmail.com>
Message-ID: <CAA7=MyUqw=BZvPFiotbD94mjaf3mSEpt-bgGBA8EPfb_Gy1q8g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121227/8c78f901/attachment.pl>

From altaf.kassam at ubs.com  Thu Dec 27 10:40:26 2012
From: altaf.kassam at ubs.com (altaf)
Date: Thu, 27 Dec 2012 01:40:26 -0800 (PST)
Subject: [R-SIG-Finance] Rbbg package's CONNECTION_FAILURE
In-Reply-To: <CAA3Wa=seWG4VSxCbmsi9iZa6jYMFXBVVVFRFFaRsBX9DPjLfQA@mail.gmail.com>
References: <CAA7=MyVOMr1re0ZN=5D1hg6AqxgWQ5Ozx4XCmk+yaAdiVpfpyA@mail.gmail.com>
	<CAA3Wa=seWG4VSxCbmsi9iZa6jYMFXBVVVFRFFaRsBX9DPjLfQA@mail.gmail.com>
Message-ID: <1356601226217-4654022.post@n4.nabble.com>

Hi All, Happy Holidays!
I am getting this error in blpConnect():

"> blpConnect(blpapi.jar.file="C:\\Program
Files\\Bloomberg\\bloomberg\\API")
R version 2.15.2 (2012-10-26) 
rJava Version 0.9-3 
Rbbg Version 0.4-155 
Java environment initialized successfully.
Adding C:\Program Files\Bloomberg\bloomberg\API to Java classpath
Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) : 
  java.lang.NoClassDefFoundError: com/bloomberglp/blpapi/SessionOptions"

Any idea what is causing it?
Thanks a lot,

Altaf



--
View this message in context: http://r.789695.n4.nabble.com/Rbbg-package-s-CONNECTION-FAILURE-tp4642600p4654022.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From j_cuisinier at hotmail.com  Thu Dec 27 10:55:25 2012
From: j_cuisinier at hotmail.com (julien cuisinier)
Date: Thu, 27 Dec 2012 10:55:25 +0100
Subject: [R-SIG-Finance] Rbbg package's CONNECTION_FAILURE
In-Reply-To: <1356601226217-4654022.post@n4.nabble.com>
References: <CAA7=MyVOMr1re0ZN=5D1hg6AqxgWQ5Ozx4XCmk+yaAdiVpfpyA@mail.gmail.com>,
	<CAA3Wa=seWG4VSxCbmsi9iZa6jYMFXBVVVFRFFaRsBX9DPjLfQA@mail.gmail.com>,
	<1356601226217-4654022.post@n4.nabble.com>
Message-ID: <COL125-W699FA61C3EC6533CA22778F380@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121227/2a018eec/attachment.pl>

From altaf.kassam at ubs.com  Thu Dec 27 11:04:14 2012
From: altaf.kassam at ubs.com (altaf)
Date: Thu, 27 Dec 2012 02:04:14 -0800 (PST)
Subject: [R-SIG-Finance] Rbbg package's CONNECTION_FAILURE
In-Reply-To: <COL125-W699FA61C3EC6533CA22778F380@phx.gbl>
References: <CAA7=MyVOMr1re0ZN=5D1hg6AqxgWQ5Ozx4XCmk+yaAdiVpfpyA@mail.gmail.com>
	<CAA3Wa=seWG4VSxCbmsi9iZa6jYMFXBVVVFRFFaRsBX9DPjLfQA@mail.gmail.com>
	<1356601226217-4654022.post@n4.nabble.com>
	<COL125-W699FA61C3EC6533CA22778F380@phx.gbl>
Message-ID: <1356602654062-4654026.post@n4.nabble.com>

Hi Julien, thanks for the reply.  Using your simple command above I get the
error:

"> con.BBG<-blpConnect()
R version 2.15.2 (2012-10-26) 
rJava Version 0.9-3 
Rbbg Version 0.4-155 
Java environment initialized successfully.
Looking for most recent blpapi3.jar file...
Error in blpConnect.Java("warning", NULL, TRUE, NULL, TRUE, FALSE) : 
  Can't find C:\blp\API\APIv3\JavaAPI please confirm you have Bloomberg
Version 3 Java API installed. If it's in a different location, please report
this to Rbbg package maintainer.
> "

so that is why I thought I needed to specify the location of the blpapi3.jar
file but when I do (not just the path but the actual file) I get my original
error:

"> blpConnect(blpapi.jar.file="C:\\Program
Files\\Bloomberg\\bloomberg\\API\\blpapi3.jar")
R version 2.15.2 (2012-10-26) 
rJava Version 0.9-3 
Rbbg Version 0.4-155 
Java environment initialized successfully.
Adding C:\Program Files\Bloomberg\bloomberg\API\blpapi3.jar to Java
classpath
Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) : 
  java.lang.NoClassDefFoundError: com/bloomberglp/blpapi/SessionOptions"



--
View this message in context: http://r.789695.n4.nabble.com/Rbbg-package-s-CONNECTION-FAILURE-tp4642600p4654026.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From j_cuisinier at hotmail.com  Thu Dec 27 11:21:59 2012
From: j_cuisinier at hotmail.com (julien cuisinier)
Date: Thu, 27 Dec 2012 11:21:59 +0100
Subject: [R-SIG-Finance] Rbbg package's CONNECTION_FAILURE
In-Reply-To: <1356602654062-4654026.post@n4.nabble.com>
References: <CAA7=MyVOMr1re0ZN=5D1hg6AqxgWQ5Ozx4XCmk+yaAdiVpfpyA@mail.gmail.com>,
	<CAA3Wa=seWG4VSxCbmsi9iZa6jYMFXBVVVFRFFaRsBX9DPjLfQA@mail.gmail.com>,
	<1356601226217-4654022.post@n4.nabble.com>,
	<COL125-W699FA61C3EC6533CA22778F380@phx.gbl>,
	<1356602654062-4654026.post@n4.nabble.com>
Message-ID: <COL125-W1686437030E060DE8C85F18F380@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121227/13637036/attachment.pl>

From altaf.kassam at ubs.com  Thu Dec 27 11:35:11 2012
From: altaf.kassam at ubs.com (altaf)
Date: Thu, 27 Dec 2012 02:35:11 -0800 (PST)
Subject: [R-SIG-Finance] Rbbg package's CONNECTION_FAILURE
In-Reply-To: <COL125-W1686437030E060DE8C85F18F380@phx.gbl>
References: <CAA7=MyVOMr1re0ZN=5D1hg6AqxgWQ5Ozx4XCmk+yaAdiVpfpyA@mail.gmail.com>
	<CAA3Wa=seWG4VSxCbmsi9iZa6jYMFXBVVVFRFFaRsBX9DPjLfQA@mail.gmail.com>
	<1356601226217-4654022.post@n4.nabble.com>
	<COL125-W699FA61C3EC6533CA22778F380@phx.gbl>
	<1356602654062-4654026.post@n4.nabble.com>
	<COL125-W1686437030E060DE8C85F18F380@phx.gbl>
Message-ID: <1356604511937-4654031.post@n4.nabble.com>

Thanks again Julien.  The BBG isntallataion is centrally maintained from a
package by my company's IT support and so I don't really have any control
over it and Bloomberg is so essential to my work (more, even than R) that I
don't really want to reinstall any part of it.
I will alert the maintainer of this package as you suggest (John Laing?)
Thanks again and Happy Holidays!



--
View this message in context: http://r.789695.n4.nabble.com/Rbbg-package-s-CONNECTION-FAILURE-tp4642600p4654031.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From nunoramiro at gmail.com  Thu Dec 27 12:58:27 2012
From: nunoramiro at gmail.com (Nuno Ramiro)
Date: Thu, 27 Dec 2012 11:58:27 +0000
Subject: [R-SIG-Finance] Rbbg package's CONNECTION_FAILURE
In-Reply-To: <1356604511937-4654031.post@n4.nabble.com>
References: <CAA7=MyVOMr1re0ZN=5D1hg6AqxgWQ5Ozx4XCmk+yaAdiVpfpyA@mail.gmail.com>
	<CAA3Wa=seWG4VSxCbmsi9iZa6jYMFXBVVVFRFFaRsBX9DPjLfQA@mail.gmail.com>
	<1356601226217-4654022.post@n4.nabble.com>
	<COL125-W699FA61C3EC6533CA22778F380@phx.gbl>
	<1356602654062-4654026.post@n4.nabble.com>
	<COL125-W1686437030E060DE8C85F18F380@phx.gbl>
	<1356604511937-4654031.post@n4.nabble.com>
Message-ID: <CABM-keFdUmCx+daCJCzsFaz5+mB4aF=pvpYBVJahbC+V3Uh+hQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121227/4b17152b/attachment.pl>

From john.laing at gmail.com  Thu Dec 27 13:51:26 2012
From: john.laing at gmail.com (John Laing)
Date: Thu, 27 Dec 2012 07:51:26 -0500
Subject: [R-SIG-Finance] Rbbg package's CONNECTION_FAILURE
In-Reply-To: <CABM-keFdUmCx+daCJCzsFaz5+mB4aF=pvpYBVJahbC+V3Uh+hQ@mail.gmail.com>
References: <CAA7=MyVOMr1re0ZN=5D1hg6AqxgWQ5Ozx4XCmk+yaAdiVpfpyA@mail.gmail.com>
	<CAA3Wa=seWG4VSxCbmsi9iZa6jYMFXBVVVFRFFaRsBX9DPjLfQA@mail.gmail.com>
	<1356601226217-4654022.post@n4.nabble.com>
	<COL125-W699FA61C3EC6533CA22778F380@phx.gbl>
	<1356602654062-4654026.post@n4.nabble.com>
	<COL125-W1686437030E060DE8C85F18F380@phx.gbl>
	<1356604511937-4654031.post@n4.nabble.com>
	<CABM-keFdUmCx+daCJCzsFaz5+mB4aF=pvpYBVJahbC+V3Uh+hQ@mail.gmail.com>
Message-ID: <CAA3Wa=uOv=Yazoah5hTm7f6CQ03S+m_M8=jHwkBO4d4EpcVOkA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121227/9b37d720/attachment.pl>

From altaf.kassam at ubs.com  Thu Dec 27 14:00:27 2012
From: altaf.kassam at ubs.com (altaf)
Date: Thu, 27 Dec 2012 05:00:27 -0800 (PST)
Subject: [R-SIG-Finance] Rbbg package's CONNECTION_FAILURE
In-Reply-To: <CAA3Wa=uOv=Yazoah5hTm7f6CQ03S+m_M8=jHwkBO4d4EpcVOkA@mail.gmail.com>
References: <CAA7=MyVOMr1re0ZN=5D1hg6AqxgWQ5Ozx4XCmk+yaAdiVpfpyA@mail.gmail.com>
	<CAA3Wa=seWG4VSxCbmsi9iZa6jYMFXBVVVFRFFaRsBX9DPjLfQA@mail.gmail.com>
	<1356601226217-4654022.post@n4.nabble.com>
	<COL125-W699FA61C3EC6533CA22778F380@phx.gbl>
	<1356602654062-4654026.post@n4.nabble.com>
	<COL125-W1686437030E060DE8C85F18F380@phx.gbl>
	<1356604511937-4654031.post@n4.nabble.com>
	<CABM-keFdUmCx+daCJCzsFaz5+mB4aF=pvpYBVJahbC+V3Uh+hQ@mail.gmail.com>
	<CAA3Wa=uOv=Yazoah5hTm7f6CQ03S+m_M8=jHwkBO4d4EpcVOkA@mail.gmail.com>
Message-ID: <1356613227630-4654046.post@n4.nabble.com>

Thanks, John.  I found the other blpapi3.jar file and made sure I specified
that but then I got the following CONNECTION_FAILURE:

> con.BBG <-
> blpConnect(blpapi.jar.file="C:\\blp\\API\\APIv3\\JavaAPI\\v3.5.1.1\\lib\\blpapi3.jar")
R version 2.15.2 (2012-10-26) 
rJava Version 0.9-3 
Rbbg Version 0.4-155 
Java environment initialized successfully.
Adding C:\blp\API\APIv3\JavaAPI\v3.5.1.1\lib\blpapi3.jar to Java classpath
Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) : 
  org.findata.blpwrapper.WrapperException: Session not started because:
CONNECTION_FAILURE


John Laing wrote
> A typical Bloomberg SDK installation includes 2 blpapi3.jar files. They
> are
> not the same, and for use with Rbbg one is "right" and one is "wrong". On
> my Windows box I have:
> right file: C:\blp\API\APIv3\JavaAPI\v3.4.5.5\lib\blpapi3.jar
> wrong file: C:\blp\API\blpapi3.jar
> 
> I don't know the details of Altaf's installation, but I imagine it looks
> similar except that the root has been moved from C:\blp to C:\Program
> Files\Bloomberg\bloomberg. If you can find the other jar file buried in
> there you should be all set.
> 
> -John
> 
> 
> On Thu, Dec 27, 2012 at 6:58 AM, Nuno Ramiro &lt;

> nunoramiro@

> &gt; wrote:
> 
>> Hi,
>>
>> It looks like you might have a class path issue, i.e., Java is not able
>> to
>> find your WAPI jar/Java classes.
>>
>> I suggest that you double check that you have a blpapi3.jar file (or
>> similar) under C:\Program Files\Bloomberg\bloomberg\API, as that's the
>> required file.
>>
>> If you do, I would then suggest that you point the blpapi.jar.file
>> variable
>> to the correct jar, e.g.:
>>
>> blpConnect(blpapi.jar.file="C:\\Program
>> Files\\Bloomberg\\bloomberg\\API\\blpapi3.jar")
>>
>> Hope it helps.
>>
>> Nuno
>>
>>
>> On 27 December 2012 10:35, altaf &lt;

> altaf.kassam@

> &gt; wrote:
>>
>> > Thanks again Julien.  The BBG isntallataion is centrally maintained
>> from
>> a
>> > package by my company's IT support and so I don't really have any
>> control
>> > over it and Bloomberg is so essential to my work (more, even than R)
>> that I
>> > don't really want to reinstall any part of it.
>> > I will alert the maintainer of this package as you suggest (John
>> Laing?)
>> > Thanks again and Happy Holidays!
>> >
>> >
>> >
>> > --
>> > View this message in context:
>> >
>> http://r.789695.n4.nabble.com/Rbbg-package-s-CONNECTION-FAILURE-tp4642600p4654031.html
>> > Sent from the Rmetrics mailing list archive at Nabble.com.
>> >
>> > _______________________________________________
>> > 

> R-SIG-Finance@

>  mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions
>> > should go.
>> >
>>
>>
>>
>> --
>> Nuno Ramiro
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> 

> R-SIG-Finance@

>  mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________

> R-SIG-Finance@

>  mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.





--
View this message in context: http://r.789695.n4.nabble.com/Rbbg-package-s-CONNECTION-FAILURE-tp4642600p4654046.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From louisinuq at yahoo.com.au  Fri Dec 28 03:34:50 2012
From: louisinuq at yahoo.com.au (intertodd)
Date: Thu, 27 Dec 2012 18:34:50 -0800 (PST)
Subject: [R-SIG-Finance] Reading xts data from csv
In-Reply-To: <CAA7=MyU2=QC6BsAsSwQds6BUTXfAUwqdEqb7fKReDMK9NY4xtg@mail.gmail.com>
References: <CAA7=MyU2=QC6BsAsSwQds6BUTXfAUwqdEqb7fKReDMK9NY4xtg@mail.gmail.com>
Message-ID: <1356662090330-4654102.post@n4.nabble.com>

I had the same question before..what i did is:

first you put the data and date in two csv files before you run the code:

z=as.matrix(read.csv("data.csv",header=F))
x=as.matrix(read.csv("date.csv",header=F))
rownames(z)=c(x[,1])
y=as.xts(z)

the you will be able to have the y which is ts with date..

hope this helps



--
View this message in context: http://r.789695.n4.nabble.com/Reading-xts-data-from-csv-tp4653991p4654102.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From rhelpacc at gmail.com  Fri Dec 28 05:17:36 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Thu, 27 Dec 2012 23:17:36 -0500
Subject: [R-SIG-Finance] Fundamental question about backtesting in quantstrat
Message-ID: <CAA7=MyU-wQR_ofbX1jKCX+XHPB4Lvhq-CBpamnXQRwDPJJ9NUw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121227/acfe4b37/attachment.pl>

From michael.weylandt at gmail.com  Fri Dec 28 05:28:56 2012
From: michael.weylandt at gmail.com (Michael Weylandt)
Date: Fri, 28 Dec 2012 05:28:56 +0100
Subject: [R-SIG-Finance] Fundamental question about backtesting in
	quantstrat
In-Reply-To: <CAA7=MyU-wQR_ofbX1jKCX+XHPB4Lvhq-CBpamnXQRwDPJJ9NUw@mail.gmail.com>
References: <CAA7=MyU-wQR_ofbX1jKCX+XHPB4Lvhq-CBpamnXQRwDPJJ9NUw@mail.gmail.com>
Message-ID: <2626B68D-F374-4545-8552-8D630B06168F@gmail.com>



On Dec 28, 2012, at 5:17 AM, "Robert A'gata" <rhelpacc at gmail.com> wrote:

> Hi,
> 
> I would like to confirm my intuition about backtesting. My strategy is a
> simple moving average crossing over (something similar). I open a long
> position of 1 unit if fast line crosses above the slow one and vice versa.
> After seeing my equity curve being almost straight down, I decided to flip
> the rule such that I short 1 unit when fast line crosses above and vice
> versa. To my surprise, I do not seem to get a flip of pnl back. I got even
> worse pnl profile. This is puzzling for me.
> 
> My rules use market order to execute all orders. One might argue that it
> could be due to asymmetry in bid/ask when momentum is in place that causes
> this. However, I have more than ten thousands of transactions. I do not
> think bid/ask spread should be a dominant effect here. Any thought would be
> appreciated. Thank you.
> 

Transaction costs?

M

> Robert
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From samuelsangchy at hotmail.com  Fri Dec 28 08:31:36 2012
From: samuelsangchy at hotmail.com (SamuelS)
Date: Thu, 27 Dec 2012 23:31:36 -0800 (PST)
Subject: [R-SIG-Finance] Is it possible to import residuals of
 mean.model into variance.model in rugarch package or others?
In-Reply-To: <50DAB1A4.3020808@4dscape.com>
References: <1356506069621-4653934.post@n4.nabble.com>
	<50DAB1A4.3020808@4dscape.com>
Message-ID: <1356679896038-4654123.post@n4.nabble.com>

Hi, Alexios. Thanks a lot for your suggestions. I have tried the method and
successfully pass mean.model residuals to variance.model as data and part of
external.variable. Could you give me some further guidances for my several
new problems listed below? I ask for apology if some of them seem shalow. I
am a new fish for R and i am learning and trying hard.

Firstly, i don't understand how to use the 'setstart=' and 'setbounds'
methods on the spec as you had mentioned. I can only find them in
'uGARCHspec-class' in reference manual, yet it doesn't show how to put them
in spec correctly. When i put
'setbounds=list("alpha1"=c(0,1),"beta1"=c(0,1))' into spec and run it, R
reflects 'setbounds=list("alpha1"=c(0,1),"beta1"=c(0,1)) is of no use'. Does
'set.start' equals to 'start.pars=list()'? Is there a principle to follow
when i provide starting values for regressor parameters?

Secondly, i got 'ugarchfit-->warning: solver failer to converge' problems
when i use all solvers of rugarch package to fit my model. It has been
confusing me how to set the 'solver.control' or 'fix.control' options
properly to get a convergent result. 
In topic "rugarch package "Warning Message" for GARCH-Normal" presented by
nserdar, you provided seven suggestions to deal with 'warning: failed to
invert hessian' in order of likely importance. Though the warning i got is
different from his, i still want to ask some questions about several of the
suggestions:
1. Set  tol<delta (in solver.control).   
    Q:what are tol and delta, where can i find more details about
solver.control settings?
2. Use scaling (in fit.control).  
    Q:Is it correct to write 'scaling=1' or 'scaling=TRUE' to make scaling
function?
3. Set stationarity to FALSE (sometimes this creates problems with the
solver for some boundary cases). 
4. Use an alternate solver(s) (there are many now included). 
5. Change the default solver parameters. 
6. Use starting values.
    Q:How to change default solver parameters or use starting values
properly, is there a principle to follow or other papers or books i need to
read? 
7. Check your data for extreme outliers or numbers of zeros. 
    Q:In the matrix of my exteral.variable, there are quite a lot of zeros.
Does that affect the convergence?

Here is part of my code:

#external.regressors matrix 'DummyRessquaar' subdivide the asymetrique part
of 'gjrGARCH'#
spec=ugarchspec(variance.model=list(model=&quot;sGARCH&quot;,garchOrder=c(1,1),
submodel=NULL,external.regressors=DummyRessquar,variance.targeting=FALSE),
mean.model=list(armaOrder=c(0,0),include.mean=FALSE,archm=FALSE,archpow=1,arfima=FALSE,
external.regressors=NULL,archex=FALSE),distribution.model=&quot;std&quot;,start.pars=list(),fixed.pars=list())
fitSDummyRes=ugarchfit(spec,resar4,out.sample=0,solver=&quot;solnp&quot;,solver.control=list(),
fit.control=list(stationarity=1,fixed.se=0,scale=0))

(1: In .solnpsolver(pars, fun, Ifn, ILB, IUB, control, LB, UB, arglist) : 
rugarch-->warning: no convergence...)
2: In .sgarchfit(spec = spec, data = data, out.sample = out.sample,  : 
ugarchfit-->warning: solver failer to converge.

Thanks for your kind and patience.
Regards,
Samuel



--
View this message in context: http://r.789695.n4.nabble.com/Is-it-possible-to-import-residuals-of-mean-model-into-variance-model-in-rugarch-package-or-others-tp4653934p4654123.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Fri Dec 28 10:27:13 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Fri, 28 Dec 2012 09:27:13 +0000
Subject: [R-SIG-Finance] Is it possible to import residuals of
 mean.model into variance.model in rugarch package or others?
In-Reply-To: <1356679896038-4654123.post@n4.nabble.com>
References: <1356506069621-4653934.post@n4.nabble.com>
	<50DAB1A4.3020808@4dscape.com>
	<1356679896038-4654123.post@n4.nabble.com>
Message-ID: <50DD65F1.4000603@4dscape.com>

Hello,
On 28/12/2012 07:31, SamuelS wrote:
> Hi, Alexios. Thanks a lot for your suggestions. I have tried the method and
> successfully pass mean.model residuals to variance.model as data and part of
> external.variable. Could you give me some further guidances for my several
> new problems listed below? I ask for apology if some of them seem shalow. I
> am a new fish for R and i am learning and trying hard.
>
> Firstly, i don't understand how to use the 'setstart=' and 'setbounds'
> methods on the spec as you had mentioned. I can only find them in
> 'uGARCHspec-class' in reference manual, yet it doesn't show how to put them
> in spec correctly. When i put
> 'setbounds=list("alpha1"=c(0,1),"beta1"=c(0,1))' into spec and run it, R
> reflects 'setbounds=list("alpha1"=c(0,1),"beta1"=c(0,1)) is of no use'. Does
> 'set.start' equals to 'start.pars=list()'? Is there a principle to follow
> when i provide starting values for regressor parameters?
>
Example:
spec=ugarchspec()
setstart(spec)<-list(alpha1=0.04, beta1=0.9)
setbounds(spec)<-list(alpha1=c(0,0.5),beta1=c(0,1))

setstart is equivalent to set.start in the specification, as is setfixed 
to set.fixed.

In setting different bounds to the default ones for some of the 
parameters, particular care should be exercised as that may violate a 
model's stationarity conditions (e.g do not set beta1 >1).

The external regressor names for the variance equation are vxreg1, 
vxreg2, ...

The principle is that they should be sensible values in relation to the 
scale of your regressors vis-a-vis the typical variance range. Also 
note, that negative values may result in the variance if your regressors 
are not positive (you may therefore prefer to use the eGARCH model).

> Secondly, i got 'ugarchfit-->warning: solver failer to converge' problems
> when i use all solvers of rugarch package to fit my model. It has been
> confusing me how to set the 'solver.control' or 'fix.control' options
> properly to get a convergent result.
> In topic "rugarch package "Warning Message" for GARCH-Normal" presented by
> nserdar, you provided seven suggestions to deal with 'warning: failed to
> invert hessian' in order of likely importance. Though the warning i got is
> different from his, i still want to ask some questions about several of the
> suggestions:
> 1. Set  tol<delta (in solver.control).
>      Q:what are tol and delta, where can i find more details about
> solver.control settings?
In the documentation of each of the solvers used e.g. solnp in the 
Rsolnp package, nlminb in the stats package, nloptr in the nloptr 
package etc.
> 2. Use scaling (in fit.control).
>      Q:Is it correct to write 'scaling=1' or 'scaling=TRUE' to make scaling
> function?
Yes
> 3. Set stationarity to FALSE (sometimes this creates problems with the
> solver for some boundary cases).
This and scaling are BOTH off when using external regressors in the 
variance equation.

> 4. Use an alternate solver(s) (there are many now included).
Try "hybrid" (this follows a hybrid strategy of choosing another solver 
when the first one-solnp-fails)...for difficult problems try the gosolnp 
solver.

> 5. Change the default solver parameters.
> 6. Use starting values.
>      Q:How to change default solver parameters or use starting values
> properly, is there a principle to follow or other papers or books i need to
> read?
> 7. Check your data for extreme outliers or numbers of zeros.
>      Q:In the matrix of my exteral.variable, there are quite a lot of zeros.
> Does that affect the convergence?
Not for the external regressors, the zero problem is with the actual data.
>
> Here is part of my code:
>
> #external.regressors matrix 'DummyRessquaar' subdivide the asymetrique part
> of 'gjrGARCH'#
> spec=ugarchspec(variance.model=list(model=&quot;sGARCH&quot;,garchOrder=c(1,1),
> submodel=NULL,external.regressors=DummyRessquar,variance.targeting=FALSE),
> mean.model=list(armaOrder=c(0,0),include.mean=FALSE,archm=FALSE,archpow=1,arfima=FALSE,
> external.regressors=NULL,archex=FALSE),distribution.model=&quot;std&quot;,start.pars=list(),fixed.pars=list())
> fitSDummyRes=ugarchfit(spec,resar4,out.sample=0,solver=&quot;solnp&quot;,solver.control=list(),
> fit.control=list(stationarity=1,fixed.se=0,scale=0))
>
> (1: In .solnpsolver(pars, fun, Ifn, ILB, IUB, control, LB, UB, arglist) :
> rugarch-->warning: no convergence...)
> 2: In .sgarchfit(spec = spec, data = data, out.sample = out.sample,  :
> ugarchfit-->warning: solver failer to converge.
>
> Thanks for your kind and patience.
> Regards,
> Samuel
Finally, have a look in the inst folder of the package where there are 
numerous examples.

Please note that the development of rugarch & rmgarch has now been moved to:
https://www.assembla.com/spaces/rgarch/wiki

Regards,
Alexios
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Is-it-possible-to-import-residuals-of-mean-model-into-variance-model-in-rugarch-package-or-others-tp4653934p4654123.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From rhelpacc at gmail.com  Sat Dec 29 04:24:19 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Fri, 28 Dec 2012 22:24:19 -0500
Subject: [R-SIG-Finance] Quantstrat runs quite slow on large data
Message-ID: <CAA7=MyV=tQ4LaLwrnckimdNSRDMnqoQmv3rx1E8rNMtM73-gDw@mail.gmail.com>

Hi,

I am investigating what the issue behind slowness of quantstrat is when
dealing with large data. I have BBO-like data set for 1.5mio rows. The
strategy is simply moving average crossing over. For data generation, I
simulated an ARMA(1,1) process with appropriate volatility (see attached
code). There are 478 occurrences of cross-over (both long and short). It
took ~40min to run on AMD A6-3400M APU (quad-core) machine with 6GB of RAM.
The rule is rather simple in this case. My expectation is that if
quantstrat only acts on these 478 occurrences, it should take much less
time than this. I have attached my code (please ignore the lower part that
summarizes performance). I am wondering if there is any room for
improvement. Any help or advice would be greatly appreciated. Thank you.

Happy new year.

Robert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121228/bd538cbd/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: CrossOverVwapSim.R
Type: application/octet-stream
Size: 6445 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121228/bd538cbd/attachment.obj>

From singletonthebest at msn.com  Sat Dec 29 14:33:13 2012
From: singletonthebest at msn.com (Simone Gogna)
Date: Sat, 29 Dec 2012 14:33:13 +0100
Subject: [R-SIG-Finance] simulation
Message-ID: <DUB107-ds43064E72624627DAD6F08D33E0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121229/436c3ed5/attachment.pl>

From dominykasgrigonis at gmail.com  Sat Dec 29 16:12:49 2012
From: dominykasgrigonis at gmail.com (Dominykas Grigonis)
Date: Sat, 29 Dec 2012 15:12:49 +0000
Subject: [R-SIG-Finance] simulation
In-Reply-To: <DUB107-ds43064E72624627DAD6F08D33E0@phx.gbl>
References: <DUB107-ds43064E72624627DAD6F08D33E0@phx.gbl>
Message-ID: <F286DD04B90C4E5AA04B8C7B45F7E796@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121229/35085486/attachment.pl>

From dominykasgrigonis at gmail.com  Sat Dec 29 16:14:59 2012
From: dominykasgrigonis at gmail.com (Dominykas Grigonis)
Date: Sat, 29 Dec 2012 15:14:59 +0000
Subject: [R-SIG-Finance] simulation
In-Reply-To: <F286DD04B90C4E5AA04B8C7B45F7E796@gmail.com>
References: <DUB107-ds43064E72624627DAD6F08D33E0@phx.gbl>
	<F286DD04B90C4E5AA04B8C7B45F7E796@gmail.com>
Message-ID: <3145654BB0654DC0887B4E1CEC5C1F46@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121229/bf6d1fdb/attachment.pl>

From isaacm300 at gmail.com  Sun Dec 30 05:21:18 2012
From: isaacm300 at gmail.com (asfdoij asfoij)
Date: Sat, 29 Dec 2012 20:21:18 -0800
Subject: [R-SIG-Finance] Cointegration testing with multiple structural
	breaks
Message-ID: <CALBLFAVOm-c4esean4qyVmYTTVV-m7giF3rK=1VsBomj9U95pQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121229/40c5c813/attachment.pl>

From patrick at burns-stat.com  Sun Dec 30 10:30:39 2012
From: patrick at burns-stat.com (Patrick Burns)
Date: Sun, 30 Dec 2012 09:30:39 +0000
Subject: [R-SIG-Finance] simulation
In-Reply-To: <F286DD04B90C4E5AA04B8C7B45F7E796@gmail.com>
References: <DUB107-ds43064E72624627DAD6F08D33E0@phx.gbl>
	<F286DD04B90C4E5AA04B8C7B45F7E796@gmail.com>
Message-ID: <50E009BF.5000201@burns-stat.com>

Faster still will be:

rets <- cumsum(rnorm(n, sd=sd))

If you want to change that from returns to
prices, then do

init.price * c(0, exp(rets))

Pat

On 29/12/2012 15:12, Dominykas Grigonis wrote:
> Well the simplest but most inefficient approach is a "for" loop. However the best ant kinda sophisticated approach is to use "Reduce".
>
> I did not analyse your problem as it would take some time for dubious knowledge, but here is a simple random walk simulation presented in both ways.
>
> Reduce(function(x,eps) {x+eps},rnorm(100,sd=2.5),accumulate=TRUE)
>
> a=numeric();a[1]=1
> for (i in 2:100){a[i]=a[i-1]+rnorm(1,sd=2.5)}
>
> If you can present me with the paper I might be able to simulate the ones you need. As I am not going to analyse something what I doubt it will have any value to me.
>
> Also for efficiency:
> Unit: microseconds
>      expr      min       lq   median        uq      max
> 1  sim() 1074.634 1100.702 1120.667 1172.0290 4291.588
> 2 sim2()  499.730   507.990   527.797  582.7205 1516.850
>
>
> where sim2 is Reduce function.
>
>
>
> Kind regards,--
> Dominykas Grigonis
>
>
> On Saturday, 29 December 2012 at 13:33, Simone Gogna wrote:
>
>> Dear R users,
>> suppose we have a random walk such as:
>>
>> v_t+1 = v_t + e_t+1
>>
>> where e_t is a normal IID noise pocess with mean = m and standard deviation = sd and v_t is the fundamental value of a stock.
>>
>> Now suppose I want a trading strategy to be:
>>
>> x_t+1 = c(v_t ??? p_t)
>>
>> where c is a costant.
>> I know, from the paper where this equations come from (Farmer and Joshi, The price dynamics of common trading strategies, 2001) that the induced price dynamics is:
>>
>> r_t+1 = ???a*r_t + a*e_t + theta_t+1
>>
>> and
>>
>> p_t+1 = p_t +r_t+1
>>
>> where r_t = p_t ??? p_t-1 , e_t = v_t ??? v_t-1 and a = c/lambda (lambda is another constant).
>>
>> How can I simulate the equations I have just presented?
>> I have good confidence with R for statistical analysis, but not for simulation therefore I apologize for my ignorance.
>> What I came up with is the following:
>>
>> ##general settings
>> c<-0.5
>> lambda<-0.3
>> a<-c/lambda
>> n<-500
>>
>> ## Eq.12 (the v_t random walk)
>> V_init_cond<-0
>> Et<-ts(rnorm(n+100,mean=0,sd=1))
>> Vt<-Et*0
>> Vt[1]<-V_init_cond+Et[1]
>> for(i in 2:(n+100)) {
>> Vt[i]<-Vt[i-1]+Et[i]
>> }
>> Vt<-ts(Vt[(length(Vt)-n+1):length(Vt)])
>> plot(Vt)
>>
>> ## Eq.13 (the strategy)
>> Xt_init_cond<-0
>> Xt<-Xt_init_cond*0
>> Xt[2]<-c(Vt[1]-Pt[1])
>> for(i in 2:(n)){
>> Xt[i]<-c(Vt[i-1]-Pt[i-1])
>> }
>> Xt<-ts(Xt[(length(Xt)-n+1):length(Xt)])
>> plot(Xt)
>>
>> ## Eq. 14 (pice dynamics)
>> P_init_cond<-0
>> Pt<-Rt*0
>> Pt[1]<-P_init_cond+Rt[1]
>> for(i in 2:(n+100)) {
>> Pt[i]<-Pt[i-1]+Rt[i]
>> }
>> Pt<-ts(Pt[(length(Pt)-n+1):length(Pt)])
>> plot(Pt)
>> Rt_init_cond<-0
>> Rt<-Rt_init_cond*0
>> Rt[2]<- -a*Rt[1]+a*Et[1]+e[2]
>> for(i in 2:(n)){
>> Rt[i]<- -a*Rt[i-1]+a*Et[i-1]+e[i]
>> }
>> Rt<-ts(Rt[(length(Rt)-n+1):length(Rt)])
>> plot(Rt)
>>
>> I don???t think the code above is correct, and I don???t even know if this is the approach I have to take.
>> Any suggestion is warmly appreciated.
>>
>> thanks,
>> Simone Gogna
>> [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org (mailto:R-SIG-Finance at r-project.org) mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>>
>
>
>
> 	[[alternative HTML version deleted]]
>
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From patrick at burns-stat.com  Sun Dec 30 10:35:36 2012
From: patrick at burns-stat.com (Patrick Burns)
Date: Sun, 30 Dec 2012 09:35:36 +0000
Subject: [R-SIG-Finance] simulation
In-Reply-To: <50E009BF.5000201@burns-stat.com>
References: <DUB107-ds43064E72624627DAD6F08D33E0@phx.gbl>
	<F286DD04B90C4E5AA04B8C7B45F7E796@gmail.com>
	<50E009BF.5000201@burns-stat.com>
Message-ID: <50E00AE8.2080506@burns-stat.com>

Oops, not quite right:

On 30/12/2012 09:30, Patrick Burns wrote:
> Faster still will be:
>
> rets <- cumsum(rnorm(n, sd=sd))
>
> If you want to change that from returns to
> prices, then do
>
> init.price * c(0, exp(rets))

init.price * c(1, exp(rets))

or

init.price * exp(c(0, rets))

>
> Pat
>
> On 29/12/2012 15:12, Dominykas Grigonis wrote:
>> Well the simplest but most inefficient approach is a "for" loop.
>> However the best ant kinda sophisticated approach is to use "Reduce".
>>
>> I did not analyse your problem as it would take some time for dubious
>> knowledge, but here is a simple random walk simulation presented in
>> both ways.
>>
>> Reduce(function(x,eps) {x+eps},rnorm(100,sd=2.5),accumulate=TRUE)
>>
>> a=numeric();a[1]=1
>> for (i in 2:100){a[i]=a[i-1]+rnorm(1,sd=2.5)}
>>
>> If you can present me with the paper I might be able to simulate the
>> ones you need. As I am not going to analyse something what I doubt it
>> will have any value to me.
>>
>> Also for efficiency:
>> Unit: microseconds
>>      expr      min       lq   median        uq      max
>> 1  sim() 1074.634 1100.702 1120.667 1172.0290 4291.588
>> 2 sim2()  499.730   507.990   527.797  582.7205 1516.850
>>
>>
>> where sim2 is Reduce function.
>>
>>
>>
>> Kind regards,--
>> Dominykas Grigonis
>>
>>
>> On Saturday, 29 December 2012 at 13:33, Simone Gogna wrote:
>>
>>> Dear R users,
>>> suppose we have a random walk such as:
>>>
>>> v_t+1 = v_t + e_t+1
>>>
>>> where e_t is a normal IID noise pocess with mean = m and standard
>>> deviation = sd and v_t is the fundamental value of a stock.
>>>
>>> Now suppose I want a trading strategy to be:
>>>
>>> x_t+1 = c(v_t ??? p_t)
>>>
>>> where c is a costant.
>>> I know, from the paper where this equations come from (Farmer and
>>> Joshi, The price dynamics of common trading strategies, 2001) that
>>> the induced price dynamics is:
>>>
>>> r_t+1 = ???a*r_t + a*e_t + theta_t+1
>>>
>>> and
>>>
>>> p_t+1 = p_t +r_t+1
>>>
>>> where r_t = p_t ??? p_t-1 , e_t = v_t ??? v_t-1 and a = c/lambda
>>> (lambda is another constant).
>>>
>>> How can I simulate the equations I have just presented?
>>> I have good confidence with R for statistical analysis, but not for
>>> simulation therefore I apologize for my ignorance.
>>> What I came up with is the following:
>>>
>>> ##general settings
>>> c<-0.5
>>> lambda<-0.3
>>> a<-c/lambda
>>> n<-500
>>>
>>> ## Eq.12 (the v_t random walk)
>>> V_init_cond<-0
>>> Et<-ts(rnorm(n+100,mean=0,sd=1))
>>> Vt<-Et*0
>>> Vt[1]<-V_init_cond+Et[1]
>>> for(i in 2:(n+100)) {
>>> Vt[i]<-Vt[i-1]+Et[i]
>>> }
>>> Vt<-ts(Vt[(length(Vt)-n+1):length(Vt)])
>>> plot(Vt)
>>>
>>> ## Eq.13 (the strategy)
>>> Xt_init_cond<-0
>>> Xt<-Xt_init_cond*0
>>> Xt[2]<-c(Vt[1]-Pt[1])
>>> for(i in 2:(n)){
>>> Xt[i]<-c(Vt[i-1]-Pt[i-1])
>>> }
>>> Xt<-ts(Xt[(length(Xt)-n+1):length(Xt)])
>>> plot(Xt)
>>>
>>> ## Eq. 14 (pice dynamics)
>>> P_init_cond<-0
>>> Pt<-Rt*0
>>> Pt[1]<-P_init_cond+Rt[1]
>>> for(i in 2:(n+100)) {
>>> Pt[i]<-Pt[i-1]+Rt[i]
>>> }
>>> Pt<-ts(Pt[(length(Pt)-n+1):length(Pt)])
>>> plot(Pt)
>>> Rt_init_cond<-0
>>> Rt<-Rt_init_cond*0
>>> Rt[2]<- -a*Rt[1]+a*Et[1]+e[2]
>>> for(i in 2:(n)){
>>> Rt[i]<- -a*Rt[i-1]+a*Et[i-1]+e[i]
>>> }
>>> Rt<-ts(Rt[(length(Rt)-n+1):length(Rt)])
>>> plot(Rt)
>>>
>>> I don???t think the code above is correct, and I don???t even know if
>>> this is the approach I have to take.
>>> Any suggestion is warmly appreciated.
>>>
>>> thanks,
>>> Simone Gogna
>>> [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org (mailto:R-SIG-Finance at r-project.org)
>>> mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R
>>> questions should go.
>>>
>>>
>>
>>
>>
>>     [[alternative HTML version deleted]]
>>
>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R
>> questions should go.
>>
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From junluke at gmail.com  Sun Dec 30 19:02:55 2012
From: junluke at gmail.com (jun wang)
Date: Sun, 30 Dec 2012 13:02:55 -0500
Subject: [R-SIG-Finance] ghyp package
In-Reply-To: <771AE4FBFBCF204D819D8B346ACFCB74B43671@USPMSEXC110N02.na.blkint.com>
References: <CAPD4hGBfRTQu0ap41yLvSa269jXwf4LTXQSzN3+xM76djL8zqw@mail.gmail.com>
	<771AE4FBFBCF204D819D8B346ACFCB74B43671@USPMSEXC110N02.na.blkint.com>
Message-ID: <CAPD4hGD7wFHdNLL8zJ_O0R_ytgfe0tRGFcx141zZXFN5ATNpnw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121230/39bc9e2e/attachment.pl>

From azege at yahoo.com  Sun Dec 30 21:43:34 2012
From: azege at yahoo.com (Andre Zege)
Date: Sun, 30 Dec 2012 12:43:34 -0800
Subject: [R-SIG-Finance] Rbbg bar function -- doubts about data correctness
Message-ID: <1356900214.4487.YahooMailNeo@web39305.mail.mud.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121230/4f34bb0b/attachment.pl>

From dhruv.maheshwari at blackrock.com  Mon Dec 31 01:41:00 2012
From: dhruv.maheshwari at blackrock.com (Maheshwari, Dhruv)
Date: Mon, 31 Dec 2012 00:41:00 +0000
Subject: [R-SIG-Finance] ghyp package
In-Reply-To: <CAPD4hGD7wFHdNLL8zJ_O0R_ytgfe0tRGFcx141zZXFN5ATNpnw@mail.gmail.com>
References: <CAPD4hGBfRTQu0ap41yLvSa269jXwf4LTXQSzN3+xM76djL8zqw@mail.gmail.com>
	<771AE4FBFBCF204D819D8B346ACFCB74B43671@USPMSEXC110N02.na.blkint.com>,
	<CAPD4hGD7wFHdNLL8zJ_O0R_ytgfe0tRGFcx141zZXFN5ATNpnw@mail.gmail.com>
Message-ID: <771AE4FBFBCF204D819D8B346ACFCB74B44FFE@USPMSEXC110N02.na.blkint.com>

I don't think I fully understand what you are trying to do. The fit is performed by choosing distribution parameters that maximize a log-likelihood function, so there are no fitted values in the manner you might be expecting. The hist and qq functions just reuse the supplied data set (by calling ghyp.data on the mle.ghyp object), and plot the fitted distribution densities/quantiles by running dghyp/qghyp on the object. You can exactly what is going on by downloading the package source and looking at hist.ghyp in ghypGenericMethods.R and qqghyp in ghypMethods.R.

As this topic isn't directly finance-related, we can discuss further off-list or you can try R-help.

- Dhruv

From: jun wang [junluke at gmail.com]
Sent: Sunday, December 30, 2012 13:02
To: Maheshwari, Dhruv
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] ghyp package

Dhruv,  

Thanks for your help. What i really meant is how to export the fitted values used to do the qqplot or histogram in ghyp package, not the estimated parameters. Do you have any suggestions? 

Thanks a lot!! 

Jun


On Fri, Dec 21, 2012 at 2:20 PM, Maheshwari, Dhruv <dhruv.maheshwari at blackrock.com> wrote:

The return value is of type mle.ghyp and ghyp. You can extract parameters using the functions described here --
?'ghyp-class'

.. which basically just return slot values like @lambda etc.

ghyp.fit.info is another way to retrieve info specific to the fitting process.

- Dhruv


-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of jun wang
Sent: Thursday, December 20, 2012 23:07
To: r-sig-finance at r-project.org
Subject: [R-SIG-Finance] ghyp package

Hi,all,

Anyone knows how to get the fitted values in the 'fit.ghypuv' function of ghyp package? Really appreciate for any advice.

Jun


        [[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.
THIS MESSAGE AND ANY ATTACHMENTS ARE CONFIDENTIAL, PROPRIETARY, AND MAY BE PRIVILEGED.  If this message was misdirected, BlackRock, Inc. and its subsidiaries, ("BlackRock") does not waive any confidentiality or privilege.  If you are not the intended recipient, please notify us immediately and destroy the message without disclosing its contents to anyone.  Any distribution, use or copying of this e-mail or the information it contains by other than an intended recipient is unauthorized.  The views and opinions expressed in this e-mail message are the author's own and may not reflect the views and opinions of BlackRock, unless the author is authorized by BlackRock to express such views or opinions on its behalf.  All email sent to or from this address is subject to electronic storage and review by BlackRock.  Although BlackRock operates anti-virus programs, it does not accept responsibility for any damage whatsoever caused by viruses being passed.


From john.laing at gmail.com  Mon Dec 31 14:28:32 2012
From: john.laing at gmail.com (John Laing)
Date: Mon, 31 Dec 2012 08:28:32 -0500
Subject: [R-SIG-Finance] Rbbg bar function -- doubts about data
	correctness
In-Reply-To: <1356900214.4487.YahooMailNeo@web39305.mail.mud.yahoo.com>
References: <1356900214.4487.YahooMailNeo@web39305.mail.mud.yahoo.com>
Message-ID: <CAA3Wa=vm0AN_Biku2rpm-mZqE8MT=fa7=fgcYXaAxGHsuAGi4Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20121231/a0c356f6/attachment.pl>

