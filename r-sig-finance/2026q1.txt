From @@8098 @end|ng |rom nyu@edu  Sat Jan  3 23:00:25 2026
From: @@8098 @end|ng |rom nyu@edu (Anatoly Schmidt)
Date: Sat, 3 Jan 2026 17:00:25 -0500
Subject: [R-SIG-Finance] parallel rugarch run
Message-ID: <CAOTSzf=g6zSBhVcdnLYkf00iRtGWq1me1941ue3Yu3zEv+dALA@mail.gmail.com>

I implemented a parallel rugarch script by looping over 4 input parameters
and writing some output into two files for optimal AIC and BIC,
respectively. My PC has 4 cores.
I write output when the new AIC or BIC are  more negative than the current
ones (see the snippet below).  But now my question is: can the
parallel sessions be confused about which AIC/BIC are current? And could
ihtis implementation miss some parameter combos?
Thank you, Alec

result <- foreach(ka = ka0:kaa, .packages = 'rugarch')  %:%
  foreach(kb = kb0:kbb) %:%
  foreach(km = km0:kmm) %:%
  foreach(kn = kn0:knn) %dopar% {


#    print(c(ka, kb, km, kn))
    GARCHspec <- ugarchspec( variance.model = list(model = garchType,
garchOrder = c(km, kn)),
                             mean.model = list(armaOrder = c(ka, kb),
include.mean = TRUE),
                             distribution.model = dist)


    #fit
    aic <- infocriteria(fit)[1]  #AIC
    bic <- infocriteria(fit)[2]  #BIC
    if(aic < currAIC) {
      currAIC <- aic
      ka_aic <- ka
      kb_aic <-kb
      km_aic <- km
      kn_aic <- kn
      aic_sigma <- sigma(fit)[L]
      msg <- sprintf("%d %d %d %d %.3E %.3E\n",
                      ka, kb, km, kn, currAIC, aic_sigma)
      cat(msg, file = aic_garch_outfile, append = TRUE, sep=',')

    }
    if(bic < currBIC) {
      currBIC <- bic
      ka_bic <- ka
      kb_bic <-kb
      km_bic <- km
      kn_bic <- kn
      bic_sigma <- sigma(fit)[L]
      msg <- sprintf("%d %d %d %d %.3E %.3E\n",
                    ka, kb, km, kn, currBIC, bic_sigma)
      cat(msg, file = bic_garch_outfile, append = TRUE, sep=',')
    }

	[[alternative HTML version deleted]]


From o|eg@mub@r@k@h|n @end|ng |rom gm@||@com  Mon Jan  5 11:14:27 2026
From: o|eg@mub@r@k@h|n @end|ng |rom gm@||@com (Oleg Mubarakshin)
Date: Mon, 5 Jan 2026 10:14:27 +0000
Subject: [R-SIG-Finance] Rblpapi and Bloomberg Query Language support
Message-ID: <CABXq32vAYsmVP3zeC+R4zLthCeCbxJvqWV2hXwqknDoL15pvfw@mail.gmail.com>

Hi everyone,

Happy New Year!

Could you please clarify whether the Rblpapi library supports the use of
Bloomberg Query Language (BQL)?

In particular, I would like to understand whether BQL queries can be
executed via Rblpapi, or if the functionality is limited to standard
Bloomberg API requests.

Many thanks in advance.

Kind regards,
Oleg

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Mon Jan  5 14:35:34 2026
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 5 Jan 2026 07:35:34 -0600
Subject: [R-SIG-Finance] Rblpapi and Bloomberg Query Language support
In-Reply-To: <CABXq32vAYsmVP3zeC+R4zLthCeCbxJvqWV2hXwqknDoL15pvfw@mail.gmail.com>
References: <CABXq32vAYsmVP3zeC+R4zLthCeCbxJvqWV2hXwqknDoL15pvfw@mail.gmail.com>
Message-ID: <26971.48678.721240.830935@paul.eddelbuettel.com>


On 5 January 2026 at 10:14, Oleg Mubarakshin wrote:
| Happy New Year!

Thanks, same to you!

| Could you please clarify whether the Rblpapi library supports the use of
| Bloomberg Query Language (BQL)?
| 
| In particular, I would like to understand whether BQL queries can be
| executed via Rblpapi, or if the functionality is limited to standard
| Bloomberg API requests.

Questions for a particular package are frequently handled directly at the
package repository. For Rblpapi wwe can search GitHub Issues where, when
searching for the unique-enough string 'BQL' one finds one issue raised under
open queries:

  https://github.com/Rblp/Rblpapi/issues?q=is%3Aissue%20state%3Aopen%20bql

and three more (one clearly pertinent) under closed issues:

  https://github.com/Rblp/Rblpapi/issues?q=is%3Aissue%20state%3Aclosed%20bql

In short, and now speaking for the package: No, someone would have to write
BQL support into the package first. I have not looked at the API for it.

Hope this helps, regards,  Dirk

| Many thanks in advance.
| 
| Kind regards,
| Oleg

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From D@v|d-M|ch@e|@L|ncke @end|ng |rom ||ncke@com  Mon Jan  5 15:11:09 2026
From: D@v|d-M|ch@e|@L|ncke @end|ng |rom ||ncke@com (David-Michael Lincke)
Date: Mon, 5 Jan 2026 15:11:09 +0100
Subject: [R-SIG-Finance] Rblpapi and Bloomberg Query Language support
In-Reply-To: <26971.48678.721240.830935@paul.eddelbuettel.com>
References: <CABXq32vAYsmVP3zeC+R4zLthCeCbxJvqWV2hXwqknDoL15pvfw@mail.gmail.com>
 <26971.48678.721240.830935@paul.eddelbuettel.com>
Message-ID: <CAD1TdhutGwuE0hd-2oWarH1W4u1-rOv2b+8isTdaE1YJd5YLgQ@mail.gmail.com>

The Bloomberg API does not expose access to BQL. So there is no way to add
it, and beyond the Excel interface the only other officially supported
programmatic access is via Bloomberg's proprietary BQuant python solution.

Regards,
David


On Mon, 5 Jan 2026 at 14:35, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 5 January 2026 at 10:14, Oleg Mubarakshin wrote:
> | Happy New Year!
>
> Thanks, same to you!
>
> | Could you please clarify whether the Rblpapi library supports the use of
> | Bloomberg Query Language (BQL)?
> |
> | In particular, I would like to understand whether BQL queries can be
> | executed via Rblpapi, or if the functionality is limited to standard
> | Bloomberg API requests.
>
> Questions for a particular package are frequently handled directly at the
> package repository. For Rblpapi wwe can search GitHub Issues where, when
> searching for the unique-enough string 'BQL' one finds one issue raised
> under
> open queries:
>
>   https://github.com/Rblp/Rblpapi/issues?q=is%3Aissue%20state%3Aopen%20bql
>
> and three more (one clearly pertinent) under closed issues:
>
>
> https://github.com/Rblp/Rblpapi/issues?q=is%3Aissue%20state%3Aclosed%20bql
>
> In short, and now speaking for the package: No, someone would have to write
> BQL support into the package first. I have not looked at the API for it.
>
> Hope this helps, regards,  Dirk
>
> | Many thanks in advance.
> |
> | Kind regards,
> | Oleg
>
> --
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From @ndre|tr@mo@ @end|ng |rom gm@||@com  Sun Jan 11 11:07:49 2026
From: @ndre|tr@mo@ @end|ng |rom gm@||@com (Andre Luiz Tietbohl Ramos)
Date: Sun, 11 Jan 2026 07:07:49 -0300
Subject: [R-SIG-Finance] Darvas Box
Message-ID: <CAPZA_qLQVPqmuqdpwTtTH1dnVjTHP-_P5dSQ3sc3wvXgvUYBzA@mail.gmail.com>

Hello,

Would there be a Darvas Box library (or function) available for download?

TIA,

--
Andre Luiz Tietbohl Ramos, PhD

	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Sun Jan 11 17:46:32 2026
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Sun, 11 Jan 2026 09:46:32 -0700
Subject: [R-SIG-Finance] Darvas Box
In-Reply-To: <CAPZA_qLQVPqmuqdpwTtTH1dnVjTHP-_P5dSQ3sc3wvXgvUYBzA@mail.gmail.com>
References: <CAPZA_qLQVPqmuqdpwTtTH1dnVjTHP-_P5dSQ3sc3wvXgvUYBzA@mail.gmail.com>
Message-ID: <CACxE24=f1rqrEU1kecEUSVbx-EX29e=H4NPw13=ps0Aq6xXM2Q@mail.gmail.com>

Hi!

Here is a GitHub link:
https://github.com/vakilp/darvasBox


Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com


On Sun, Jan 11, 2026 at 3:08?AM Andre Luiz Tietbohl Ramos <
andreltramos at gmail.com> wrote:

> Hello,
>
> Would there be a Darvas Box library (or function) available for download?
>
> TIA,
>
> --
> Andre Luiz Tietbohl Ramos, PhD
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From @ndre|tr@mo@ @end|ng |rom gm@||@com  Wed Jan 14 18:06:10 2026
From: @ndre|tr@mo@ @end|ng |rom gm@||@com (Andre Luiz Tietbohl Ramos)
Date: Wed, 14 Jan 2026 14:06:10 -0300
Subject: [R-SIG-Finance] Custom theme with quantmod library
Message-ID: <CAPZA_qLF8+gFt7QHsff+fcMQfQuqjcMExDbpF+QeRXZQd0eAew@mail.gmail.com>

Hello,

Is there a way to customize quantmod theme colors?  This great library
works fine however I rather change its color theme.  So far, I have been
able to use both white and black themes.
I tried to use the chartSeries theme command described below to no avail.
I tried even without a theme name, e.g. white or black. An example is below,

stock.plot <- chartSeries(stock.time_interval,  ## ativo,
                          name = stock.name,
                          type = "candlestick",
                          subset='2025-07::2026-01',
                          theme = chartTheme("white", up.col='darkgreen',
dn.col='darkred',
                                             bg.col='gray',
selection.color='gray'),
                          TA = NULL
                          )

Could anyone help, please?

TIA,

--
Andre Luiz Tietbohl Ramos, PhD

	[[alternative HTML version deleted]]


From ||y@@k|pn|@ @end|ng |rom gm@||@com  Wed Jan 14 18:10:46 2026
From: ||y@@k|pn|@ @end|ng |rom gm@||@com (Ilya Kipnis)
Date: Wed, 14 Jan 2026 12:10:46 -0500
Subject: [R-SIG-Finance] Custom theme with quantmod library
In-Reply-To: <CAPZA_qLF8+gFt7QHsff+fcMQfQuqjcMExDbpF+QeRXZQd0eAew@mail.gmail.com>
References: <CAPZA_qLF8+gFt7QHsff+fcMQfQuqjcMExDbpF+QeRXZQd0eAew@mail.gmail.com>
Message-ID: <CA+oJuEF_MHSFuEgspJvdw1Aj571qeXNCwb7Za6dPyLRTCOpEWA@mail.gmail.com>

Sounds like this might be a setting in RStudio, if you're using that.

If in RStudio: tools -> global options -> appearance -> customize.

On Wed, Jan 14, 2026 at 12:06?PM Andre Luiz Tietbohl Ramos <
andreltramos at gmail.com> wrote:

> Hello,
>
> Is there a way to customize quantmod theme colors?  This great library
> works fine however I rather change its color theme.  So far, I have been
> able to use both white and black themes.
> I tried to use the chartSeries theme command described below to no avail.
> I tried even without a theme name, e.g. white or black. An example is
> below,
>
> stock.plot <- chartSeries(stock.time_interval,  ## ativo,
>                           name = stock.name,
>                           type = "candlestick",
>                           subset='2025-07::2026-01',
>                           theme = chartTheme("white", up.col='darkgreen',
> dn.col='darkred',
>                                              bg.col='gray',
> selection.color='gray'),
>                           TA = NULL
>                           )
>
> Could anyone help, please?
>
> TIA,
>
> --
> Andre Luiz Tietbohl Ramos, PhD
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From @ndre|tr@mo@ @end|ng |rom gm@||@com  Wed Jan 14 20:34:54 2026
From: @ndre|tr@mo@ @end|ng |rom gm@||@com (Andre Luiz Tietbohl Ramos)
Date: Wed, 14 Jan 2026 16:34:54 -0300
Subject: [R-SIG-Finance] Custom theme with quantmod library
In-Reply-To: <CA+oJuEF_MHSFuEgspJvdw1Aj571qeXNCwb7Za6dPyLRTCOpEWA@mail.gmail.com>
References: <CAPZA_qLF8+gFt7QHsff+fcMQfQuqjcMExDbpF+QeRXZQd0eAew@mail.gmail.com>
 <CA+oJuEF_MHSFuEgspJvdw1Aj571qeXNCwb7Za6dPyLRTCOpEWA@mail.gmail.com>
Message-ID: <CAPZA_qK2mutDNNFT_AQWic4Jj8xSr0kiiKUHwYr_KyTzfJpuXA@mail.gmail.com>

Dear Ilya,

Thanks for the reply!  However, I'm using emacs + ess + R in OSX.


Regards,

--
Andr? Luiz Tietbohl Ramos, PhD.


On Wed, Jan 14, 2026 at 2:10?PM Ilya Kipnis <ilya.kipnis at gmail.com> wrote:

> Sounds like this might be a setting in RStudio, if you're using that.
>
> If in RStudio: tools -> global options -> appearance -> customize.
>
> On Wed, Jan 14, 2026 at 12:06?PM Andre Luiz Tietbohl Ramos <
> andreltramos at gmail.com> wrote:
>
>> Hello,
>>
>> Is there a way to customize quantmod theme colors?  This great library
>> works fine however I rather change its color theme.  So far, I have been
>> able to use both white and black themes.
>> I tried to use the chartSeries theme command described below to no avail.
>> I tried even without a theme name, e.g. white or black. An example is
>> below,
>>
>> stock.plot <- chartSeries(stock.time_interval,  ## ativo,
>>                           name = stock.name,
>>                           type = "candlestick",
>>                           subset='2025-07::2026-01',
>>                           theme = chartTheme("white", up.col='darkgreen',
>> dn.col='darkred',
>>                                              bg.col='gray',
>> selection.color='gray'),
>>                           TA = NULL
>>                           )
>>
>> Could anyone help, please?
>>
>> TIA,
>>
>> --
>> Andre Luiz Tietbohl Ramos, PhD
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>

	[[alternative HTML version deleted]]


From e@ @end|ng |rom enr|co@chum@nn@net  Thu Jan 15 14:02:35 2026
From: e@ @end|ng |rom enr|co@chum@nn@net (Enrico Schumann)
Date: Thu, 15 Jan 2026 14:02:35 +0100
Subject: [R-SIG-Finance] Custom theme with quantmod library
In-Reply-To: <CAPZA_qLF8+gFt7QHsff+fcMQfQuqjcMExDbpF+QeRXZQd0eAew@mail.gmail.com>
 (Andre Luiz Tietbohl Ramos's message of "Wed, 14 Jan 2026 14:06:10
 -0300")
References: <CAPZA_qLF8+gFt7QHsff+fcMQfQuqjcMExDbpF+QeRXZQd0eAew@mail.gmail.com>
Message-ID: <87fr87owpg.fsf@enricoschumann.net>

On Wed, 14 Jan 2026, Andre Luiz Tietbohl Ramos writes:

> Hello,
>
> Is there a way to customize quantmod theme colors?  This great library
> works fine however I rather change its color theme.  So far, I have been
> able to use both white and black themes.
> I tried to use the chartSeries theme command described below to no avail.
> I tried even without a theme name, e.g. white or black. An example is below,
>
> stock.plot <- chartSeries(stock.time_interval,  ## ativo,
>                           name = stock.name,
>                           type = "candlestick",
>                           subset='2025-07::2026-01',
>                           theme = chartTheme("white", up.col='darkgreen',
> dn.col='darkred',
>                                              bg.col='gray',
> selection.color='gray'),
>                           TA = NULL
>                           )
>
> Could anyone help, please?
>
> TIA,
>
> --
> Andre Luiz Tietbohl Ramos, PhD
>

With quantmod 0.4.28 and R 4.5.2, and ESS (but on GNU/Linux),
I can change colours, e. g.

    library("quantmod")
    getSymbols("AAPL")
    
    chartSeries(
        AAPL,
        type = "candlestick",
        subset = '2025-07::2026-01',
        theme = chartTheme("black",
                           up.col = "blue"))

gives me "blue" up-bars.  The same example also works
when I run it from a terminal.

Could this be some Apple-specific thing?

-- 
Enrico Schumann
Lucerne, Switzerland
https://enricoschumann.net


From e@ @end|ng |rom enr|co@chum@nn@net  Thu Jan 15 14:11:22 2026
From: e@ @end|ng |rom enr|co@chum@nn@net (Enrico Schumann)
Date: Thu, 15 Jan 2026 14:11:22 +0100
Subject: [R-SIG-Finance] Custom theme with quantmod library
In-Reply-To: <87fr87owpg.fsf@enricoschumann.net> (Enrico Schumann's message of
 "Thu, 15 Jan 2026 14:02:35 +0100")
References: <CAPZA_qLF8+gFt7QHsff+fcMQfQuqjcMExDbpF+QeRXZQd0eAew@mail.gmail.com>
 <87fr87owpg.fsf@enricoschumann.net>
Message-ID: <875x93owat.fsf@enricoschumann.net>

On Thu, 15 Jan 2026, Enrico Schumann writes:

> On Wed, 14 Jan 2026, Andre Luiz Tietbohl Ramos writes:
>
>> Hello,
>>
>> Is there a way to customize quantmod theme colors?  This great library
>> works fine however I rather change its color theme.  So far, I have been
>> able to use both white and black themes.
>> I tried to use the chartSeries theme command described below to no avail.
>> I tried even without a theme name, e.g. white or black. An example is below,
>>
>> stock.plot <- chartSeries(stock.time_interval,  ## ativo,
>>                           name = stock.name,
>>                           type = "candlestick",
>>                           subset='2025-07::2026-01',
>>                           theme = chartTheme("white", up.col='darkgreen',
>> dn.col='darkred',
>>                                              bg.col='gray',
>> selection.color='gray'),
>>                           TA = NULL
>>                           )
>>
>> Could anyone help, please?
>>
>> TIA,
>>
>> --
>> Andre Luiz Tietbohl Ramos, PhD
>>
>
> With quantmod 0.4.28 and R 4.5.2, and ESS (but on GNU/Linux),
> I can change colours, e. g.
>
>     library("quantmod")
>     getSymbols("AAPL")
>     
>     chartSeries(
>         AAPL,
>         type = "candlestick",
>         subset = '2025-07::2026-01',
>         theme = chartTheme("black",
>                            up.col = "blue"))
>
> gives me "blue" up-bars.  The same example also works
> when I run it from a terminal.
>
> Could this be some Apple-specific thing?

What happens when you send the graphic to a PDF, e.g.:

    pdf("some-file-name.pdf")
    library("quantmod")
    getSymbols("AAPL")
    
    chartSeries(
        AAPL,
        type = "candlestick",
        subset = '2025-07::2026-01',
        theme = chartTheme("black",
                           up.col = "blue"))
    dev.off()

Does the colour show up?


-- 
Enrico Schumann
Lucerne, Switzerland
https://enricoschumann.net


From @ndre|tr@mo@ @end|ng |rom gm@||@com  Thu Jan 15 15:50:34 2026
From: @ndre|tr@mo@ @end|ng |rom gm@||@com (Andre Luiz Tietbohl Ramos)
Date: Thu, 15 Jan 2026 11:50:34 -0300
Subject: [R-SIG-Finance] Custom theme with quantmod library
In-Reply-To: <875x93owat.fsf@enricoschumann.net>
References: <CAPZA_qLF8+gFt7QHsff+fcMQfQuqjcMExDbpF+QeRXZQd0eAew@mail.gmail.com>
 <87fr87owpg.fsf@enricoschumann.net> <875x93owat.fsf@enricoschumann.net>
Message-ID: <CAPZA_qJkd9N_+yiBvkBq4jEbHyvw3O_UraizMmQd-vOVfTULGA@mail.gmail.com>

Hello everyone,

Thanks for the replies received so far.
The answer received is none with the output below,

> [1] "AAPL"
>> ... ... ... ... > null device
           1

I guess it may be related to one of the several libraries loaded by default
at startup via .Rprofile.  However,
at the same time, I don't know which one or even if that could be the issue.
My main interest is only to change the inner plot area background.  I can
change its color in the outer region
along the plot itself.

Regards,

--
Andr? Luiz Tietbohl Ramos, PhD


On Thu, Jan 15, 2026 at 10:11?AM Enrico Schumann <es at enricoschumann.net>
wrote:

> On Thu, 15 Jan 2026, Enrico Schumann writes:
>
> > On Wed, 14 Jan 2026, Andre Luiz Tietbohl Ramos writes:
> >
> >> Hello,
> >>
> >> Is there a way to customize quantmod theme colors?  This great library
> >> works fine however I rather change its color theme.  So far, I have been
> >> able to use both white and black themes.
> >> I tried to use the chartSeries theme command described below to no
> avail.
> >> I tried even without a theme name, e.g. white or black. An example is
> below,
> >>
> >> stock.plot <- chartSeries(stock.time_interval,  ## ativo,
> >>                           name = stock.name,
> >>                           type = "candlestick",
> >>                           subset='2025-07::2026-01',
> >>                           theme = chartTheme("white",
> up.col='darkgreen',
> >> dn.col='darkred',
> >>                                              bg.col='gray',
> >> selection.color='gray'),
> >>                           TA = NULL
> >>                           )
> >>
> >> Could anyone help, please?
> >>
> >> TIA,
> >>
> >> --
> >> Andre Luiz Tietbohl Ramos, PhD
> >>
> >
> > With quantmod 0.4.28 and R 4.5.2, and ESS (but on GNU/Linux),
> > I can change colours, e. g.
> >
> >     library("quantmod")
> >     getSymbols("AAPL")
> >
> >     chartSeries(
> >         AAPL,
> >         type = "candlestick",
> >         subset = '2025-07::2026-01',
> >         theme = chartTheme("black",
> >                            up.col = "blue"))
> >
> > gives me "blue" up-bars.  The same example also works
> > when I run it from a terminal.
> >
> > Could this be some Apple-specific thing?
>
> What happens when you send the graphic to a PDF, e.g.:
>
>     pdf("some-file-name.pdf")
>     library("quantmod")
>     getSymbols("AAPL")
>
>     chartSeries(
>         AAPL,
>         type = "candlestick",
>         subset = '2025-07::2026-01',
>         theme = chartTheme("black",
>                            up.col = "blue"))
>     dev.off()
>
> Does the colour show up?
>
>
> --
> Enrico Schumann
> Lucerne, Switzerland
> https://enricoschumann.net
>

	[[alternative HTML version deleted]]


From @ndre|tr@mo@ @end|ng |rom gm@||@com  Mon Feb  2 14:39:00 2026
From: @ndre|tr@mo@ @end|ng |rom gm@||@com (Andre Luiz Tietbohl Ramos)
Date: Mon, 2 Feb 2026 10:39:00 -0300
Subject: [R-SIG-Finance] Custom x-axis label in quantmod chartSeries
Message-ID: <CAPZA_qKjqcaWeysREUp+8XxHLecch=jxpinmy43zBNbha=KPyw@mail.gmail.com>

Hello,

Is it possible to customize the x-axis label? Using ggplot I have the
custom x-label described below,

stocks %>%
ggplot(aes(x = date, y = cum_ret)) +
    theme_gray() +
    theme(plot.background = element_rect(fill = "gray86")) +
    geom_line(color = "blue") +
    *theme(axis.text.x = element_text(angle = 50, hjust = 1))* +
    labs(x = 'Data',
         y = 'Cumulative Return',
         title = paste0('Portfolio Cumulative Return of ',
length(tickers.clean), ' stocks on ',
                        format(as.Date(end), format="%d/%m/%Y")),
         subtitle = paste0("Ativos: ", toString(tickers.clean), "\nWeights:
",
                           toString(percent(wts, accuracy = 0.1)))
         ) +




* scale_x_date(date_breaks = '2 weeks',
date_labels = '%d %b %y') +    scale_y_continuous(        breaks = seq(0,
10, 0.05),        labels = scales::percent_format(accuracy = 1)*
    )

TIA,

--
Andre Luiz Tietbohl Ramos, PhD

	[[alternative HTML version deleted]]


From ||y@@k|pn|@ @end|ng |rom gm@||@com  Mon Feb  2 16:56:33 2026
From: ||y@@k|pn|@ @end|ng |rom gm@||@com (Ilya Kipnis)
Date: Mon, 2 Feb 2026 10:56:33 -0500
Subject: [R-SIG-Finance] Custom x-axis label in quantmod chartSeries
In-Reply-To: <CAPZA_qKjqcaWeysREUp+8XxHLecch=jxpinmy43zBNbha=KPyw@mail.gmail.com>
References: <CAPZA_qKjqcaWeysREUp+8XxHLecch=jxpinmy43zBNbha=KPyw@mail.gmail.com>
Message-ID: <CA+oJuEHbjQTst2uAUbQq3-ub19NUV_afSa=B9SOR0nPXarD9CQ@mail.gmail.com>

This isn't a reproducible example--we don't have the stocks data frame.
Also, it is bad practice to use dplyr in the R/Finance stack as it
overrides multiple functions, such as lag and filter.

On Mon, Feb 2, 2026 at 8:39?AM Andre Luiz Tietbohl Ramos <
andreltramos at gmail.com> wrote:

> Hello,
>
> Is it possible to customize the x-axis label? Using ggplot I have the
> custom x-label described below,
>
> stocks %>%
> ggplot(aes(x = date, y = cum_ret)) +
>     theme_gray() +
>     theme(plot.background = element_rect(fill = "gray86")) +
>     geom_line(color = "blue") +
>     *theme(axis.text.x = element_text(angle = 50, hjust = 1))* +
>     labs(x = 'Data',
>          y = 'Cumulative Return',
>          title = paste0('Portfolio Cumulative Return of ',
> length(tickers.clean), ' stocks on ',
>                         format(as.Date(end), format="%d/%m/%Y")),
>          subtitle = paste0("Ativos: ", toString(tickers.clean), "\nWeights:
> ",
>                            toString(percent(wts, accuracy = 0.1)))
>          ) +
>
>
>
>
> * scale_x_date(date_breaks = '2 weeks',
> date_labels = '%d %b %y') +    scale_y_continuous(        breaks = seq(0,
> 10, 0.05),        labels = scales::percent_format(accuracy = 1)*
>     )
>
> TIA,
>
> --
> Andre Luiz Tietbohl Ramos, PhD
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From @ndre|tr@mo@ @end|ng |rom gm@||@com  Mon Feb  2 18:41:29 2026
From: @ndre|tr@mo@ @end|ng |rom gm@||@com (Andre Luiz Tietbohl Ramos)
Date: Mon, 2 Feb 2026 14:41:29 -0300
Subject: [R-SIG-Finance] Custom x-axis label in quantmod chartSeries
In-Reply-To: <CA+oJuEHbjQTst2uAUbQq3-ub19NUV_afSa=B9SOR0nPXarD9CQ@mail.gmail.com>
References: <CAPZA_qKjqcaWeysREUp+8XxHLecch=jxpinmy43zBNbha=KPyw@mail.gmail.com>
 <CA+oJuEHbjQTst2uAUbQq3-ub19NUV_afSa=B9SOR0nPXarD9CQ@mail.gmail.com>
Message-ID: <CAPZA_qLVFt3gbResgEpqmSMqq3vCFmO9mmfmXVCJyAWm58QE9g@mail.gmail.com>

Dear Ilya,

Thanks for the prompt reply!  The code from my previous message works and I
uploaded as an example so you could see what my intent is.  Your suggestion
will be considered, thank you! Its output is attached (which is in
Portuguese).

Thanks,

--
Andr? Luiz Tietbohl Ramos, PhD


On Mon, Feb 2, 2026 at 12:56?PM Ilya Kipnis <ilya.kipnis at gmail.com> wrote:

> This isn't a reproducible example--we don't have the stocks data frame.
> Also, it is bad practice to use dplyr in the R/Finance stack as it
> overrides multiple functions, such as lag and filter.
>
> On Mon, Feb 2, 2026 at 8:39?AM Andre Luiz Tietbohl Ramos <
> andreltramos at gmail.com> wrote:
>
>> Hello,
>>
>> Is it possible to customize the x-axis label? Using ggplot I have the
>> custom x-label described below,
>>
>> stocks %>%
>> ggplot(aes(x = date, y = cum_ret)) +
>>     theme_gray() +
>>     theme(plot.background = element_rect(fill = "gray86")) +
>>     geom_line(color = "blue") +
>>     *theme(axis.text.x = element_text(angle = 50, hjust = 1))* +
>>     labs(x = 'Data',
>>          y = 'Cumulative Return',
>>          title = paste0('Portfolio Cumulative Return of ',
>> length(tickers.clean), ' stocks on ',
>>                         format(as.Date(end), format="%d/%m/%Y")),
>>          subtitle = paste0("Ativos: ", toString(tickers.clean),
>> "\nWeights:
>> ",
>>                            toString(percent(wts, accuracy = 0.1)))
>>          ) +
>>
>>
>>
>>
>> * scale_x_date(date_breaks = '2 weeks',
>> date_labels = '%d %b %y') +    scale_y_continuous(        breaks = seq(0,
>> 10, 0.05),        labels = scales::percent_format(accuracy = 1)*
>>     )
>>
>> TIA,
>>
>> --
>> Andre Luiz Tietbohl Ramos, PhD
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20260202/7d3b1b8f/attachment.html>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Retorno_Acumulado_do_Portfolio_KNCA11,CRAA11,RURA11,XPCA11,HGAG11,IAGR11,RZAG11,LSAG11,VGIA11,MXRF11,VINO11_em_21-11-2025.pdf
Type: application/pdf
Size: 13548 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20260202/7d3b1b8f/attachment.pdf>

From ||y@@k|pn|@ @end|ng |rom gm@||@com  Mon Feb  2 18:43:31 2026
From: ||y@@k|pn|@ @end|ng |rom gm@||@com (Ilya Kipnis)
Date: Mon, 2 Feb 2026 12:43:31 -0500
Subject: [R-SIG-Finance] Custom x-axis label in quantmod chartSeries
In-Reply-To: <CAPZA_qLVFt3gbResgEpqmSMqq3vCFmO9mmfmXVCJyAWm58QE9g@mail.gmail.com>
References: <CAPZA_qKjqcaWeysREUp+8XxHLecch=jxpinmy43zBNbha=KPyw@mail.gmail.com>
 <CA+oJuEHbjQTst2uAUbQq3-ub19NUV_afSa=B9SOR0nPXarD9CQ@mail.gmail.com>
 <CAPZA_qLVFt3gbResgEpqmSMqq3vCFmO9mmfmXVCJyAWm58QE9g@mail.gmail.com>
Message-ID: <CA+oJuEFpe2qrYW830mEJdbdaVBk0gWDs1y_ucsnp-L9Y5gXP_Q@mail.gmail.com>

Andre,

I am saying that those of us that aren't *you* cannot run your code because
we don't know how you formulated the "stocks" object. Your code is not
reproducible to anybody else. Please include a minimum *reproducible*
 example.

-Ilya

On Mon, Feb 2, 2026 at 12:41?PM Andre Luiz Tietbohl Ramos <
andreltramos at gmail.com> wrote:

> Dear Ilya,
>
> Thanks for the prompt reply!  The code from my previous message works and
> I uploaded as an example so you could see what my intent is.  Your
> suggestion will be considered, thank you! Its output is attached (which is
> in Portuguese).
>
> Thanks,
>
> --
> Andr? Luiz Tietbohl Ramos, PhD
>
>
> On Mon, Feb 2, 2026 at 12:56?PM Ilya Kipnis <ilya.kipnis at gmail.com> wrote:
>
>> This isn't a reproducible example--we don't have the stocks data frame.
>> Also, it is bad practice to use dplyr in the R/Finance stack as it
>> overrides multiple functions, such as lag and filter.
>>
>> On Mon, Feb 2, 2026 at 8:39?AM Andre Luiz Tietbohl Ramos <
>> andreltramos at gmail.com> wrote:
>>
>>> Hello,
>>>
>>> Is it possible to customize the x-axis label? Using ggplot I have the
>>> custom x-label described below,
>>>
>>> stocks %>%
>>> ggplot(aes(x = date, y = cum_ret)) +
>>>     theme_gray() +
>>>     theme(plot.background = element_rect(fill = "gray86")) +
>>>     geom_line(color = "blue") +
>>>     *theme(axis.text.x = element_text(angle = 50, hjust = 1))* +
>>>     labs(x = 'Data',
>>>          y = 'Cumulative Return',
>>>          title = paste0('Portfolio Cumulative Return of ',
>>> length(tickers.clean), ' stocks on ',
>>>                         format(as.Date(end), format="%d/%m/%Y")),
>>>          subtitle = paste0("Ativos: ", toString(tickers.clean),
>>> "\nWeights:
>>> ",
>>>                            toString(percent(wts, accuracy = 0.1)))
>>>          ) +
>>>
>>>
>>>
>>>
>>> * scale_x_date(date_breaks = '2 weeks',
>>> date_labels = '%d %b %y') +    scale_y_continuous(        breaks = seq(0,
>>> 10, 0.05),        labels = scales::percent_format(accuracy = 1)*
>>>     )
>>>
>>> TIA,
>>>
>>> --
>>> Andre Luiz Tietbohl Ramos, PhD
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>>

	[[alternative HTML version deleted]]


From @ndre|tr@mo@ @end|ng |rom gm@||@com  Mon Feb  2 19:45:55 2026
From: @ndre|tr@mo@ @end|ng |rom gm@||@com (Andre Luiz Tietbohl Ramos)
Date: Mon, 2 Feb 2026 15:45:55 -0300
Subject: [R-SIG-Finance] Custom x-axis label in quantmod chartSeries
In-Reply-To: <CA+oJuEFpe2qrYW830mEJdbdaVBk0gWDs1y_ucsnp-L9Y5gXP_Q@mail.gmail.com>
References: <CAPZA_qKjqcaWeysREUp+8XxHLecch=jxpinmy43zBNbha=KPyw@mail.gmail.com>
 <CA+oJuEHbjQTst2uAUbQq3-ub19NUV_afSa=B9SOR0nPXarD9CQ@mail.gmail.com>
 <CAPZA_qLVFt3gbResgEpqmSMqq3vCFmO9mmfmXVCJyAWm58QE9g@mail.gmail.com>
 <CA+oJuEFpe2qrYW830mEJdbdaVBk0gWDs1y_ucsnp-L9Y5gXP_Q@mail.gmail.com>
Message-ID: <CAPZA_qKVoAt=NB+EFE3rMDvDsub6Ri6PftJG0tmtoV9ydoFnAA@mail.gmail.com>

Dear Ilya,

Thanks for the prompt reply once more! The code I used is below and its
output is attached (which is in Portuguese).

tickers <- c('UNIP6.SA', 'KLBN4.SA', 'CSAN3.SA', 'BBAS3.SA', 'PETR4.SA', '
SBSP3.SA')
tickers.clean <- str_replace_all(tickers,'.SA$', '')
## weights
wts = c(0.4, 0.15, 0.15, 0.05, 0.1, 0.15)

wts_tbl <- tibble(symbol = tickers,
                  wts = wts)
wts_percent <- wts_tbl
wts_percent$wts <- sapply(wts_percent$wts, function(x) percent(x, accuracy
= 0.01))
print(wts_percent)

## YF download
price_data <- tq_get(tickers,
                     from = start,
                     to = end,
                     get = 'stock.prices')

## Daily return for each stock
ret_data <- price_data %>% group_by(symbol) %>%
    tq_transmute(select = adjusted,
                 mutate_fun = periodReturn,
                 period = "daily",
                 col_rename = "ret",
                 relationship = "many-to-many")

## weights, returns join on a daily basis
ret_data <- left_join(ret_data, wts_tbl, by = 'symbol', relationship =
"many-to-many")

## weighted average
ret_data <- ret_data %>%
    mutate(wt_return = wts * ret)

## removal of the .SA suffix from Brazilian stocks via custom function
del.SA downloaded through tidyquant
ret_data <- del.SA(ret_data, "tq")

## total return on a given day is the sum of the prices weight of the
portfolio
port_ret <- ret_data %>%
    group_by(date) %>%
    summarise(port_ret = sum(wt_return))

## Portfolio cumulative return via cumprod()
port_cumulative_ret  <- port_ret %>%
    mutate(cum_ret = cumprod(1 + port_ret))

## filter for period of interest
port_cumulative_ret <- port_cumulative_ret[port_cumulative_ret$date >=
as.Date("2024-06-01") &

 port_cumulative_ret$date <= today(),]

posrtfolio.return <-
    port_cumulative_ret %>% ggplot(aes(x = date, y = cum_ret)) +
    theme_gray() +
    theme(plot.background = element_rect(fill = "gray86")) +
    geom_line(color = "blue") +
    theme(axis.text.x = element_text(angle = 50, hjust = 1)) +
    labs(x = 'Data',
         y = 'Retorno Acumulado',
         title = paste0('Retorno Acumulado do Portfolio de
',length(tickers.clean), ' ativo(s) em ',
                        format(as.Date(end), format="%d/%m/%Y")),
         subtitle = paste0("Ativos: ", toString(tickers.clean), "\nPesos: ",
                           toString(percent(wts, accuracy = 0.1)))
         ) +
    scale_x_date(date_breaks = '2 weeks',
                 date_labels = '%d %b %y') +
    scale_y_continuous(
         breaks = seq(0, 10, 0.05),
        labels = scales::percent_format(accuracy = 1)
    )

Code for saving it to pdf seems quite straight forward and simple thus it
isn't shown.
I hope this work for you.  If it doesn't let me know for it does for me
(OSX v11.7, R v4.1).

Regards,

--
Andr? Luiz Tietbohl Ramos, PhD


On Mon, Feb 2, 2026 at 2:43?PM Ilya Kipnis <ilya.kipnis at gmail.com> wrote:

> Andre,
>
> I am saying that those of us that aren't *you* cannot run your code
> because we don't know how you formulated the "stocks" object. Your code is
> not reproducible to anybody else. Please include a minimum *reproducible*
>  example.
>
> -Ilya
>
> On Mon, Feb 2, 2026 at 12:41?PM Andre Luiz Tietbohl Ramos <
> andreltramos at gmail.com> wrote:
>
>> Dear Ilya,
>>
>> Thanks for the prompt reply!  The code from my previous message works and
>> I uploaded as an example so you could see what my intent is.  Your
>> suggestion will be considered, thank you! Its output is attached (which is
>> in Portuguese).
>>
>> Thanks,
>>
>> --
>> Andr? Luiz Tietbohl Ramos, PhD
>>
>>
>> On Mon, Feb 2, 2026 at 12:56?PM Ilya Kipnis <ilya.kipnis at gmail.com>
>> wrote:
>>
>>> This isn't a reproducible example--we don't have the stocks data frame.
>>> Also, it is bad practice to use dplyr in the R/Finance stack as it
>>> overrides multiple functions, such as lag and filter.
>>>
>>> On Mon, Feb 2, 2026 at 8:39?AM Andre Luiz Tietbohl Ramos <
>>> andreltramos at gmail.com> wrote:
>>>
>>>> Hello,
>>>>
>>>> Is it possible to customize the x-axis label? Using ggplot I have the
>>>> custom x-label described below,
>>>>
>>>> stocks %>%
>>>> ggplot(aes(x = date, y = cum_ret)) +
>>>>     theme_gray() +
>>>>     theme(plot.background = element_rect(fill = "gray86")) +
>>>>     geom_line(color = "blue") +
>>>>     *theme(axis.text.x = element_text(angle = 50, hjust = 1))* +
>>>>     labs(x = 'Data',
>>>>          y = 'Cumulative Return',
>>>>          title = paste0('Portfolio Cumulative Return of ',
>>>> length(tickers.clean), ' stocks on ',
>>>>                         format(as.Date(end), format="%d/%m/%Y")),
>>>>          subtitle = paste0("Ativos: ", toString(tickers.clean),
>>>> "\nWeights:
>>>> ",
>>>>                            toString(percent(wts, accuracy = 0.1)))
>>>>          ) +
>>>>
>>>>
>>>>
>>>>
>>>> * scale_x_date(date_breaks = '2 weeks',
>>>> date_labels = '%d %b %y') +    scale_y_continuous(        breaks =
>>>> seq(0,
>>>> 10, 0.05),        labels = scales::percent_format(accuracy = 1)*
>>>>     )
>>>>
>>>> TIA,
>>>>
>>>> --
>>>> Andre Luiz Tietbohl Ramos, PhD
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions
>>>> should go.
>>>>
>>>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20260202/b557b56c/attachment.html>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Retorno_Acumulado_do_Portfolio_UNIP6,KLBN4,CSAN3,BBAS3,PETR4,SBSP3_em_02-02-2026.pdf
Type: application/pdf
Size: 9354 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20260202/b557b56c/attachment.pdf>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: port_cumulative_ret.Rdata
Type: application/octet-stream
Size: 7590 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20260202/b557b56c/attachment.obj>

From ||y@@k|pn|@ @end|ng |rom gm@||@com  Mon Feb  2 20:02:13 2026
From: ||y@@k|pn|@ @end|ng |rom gm@||@com (Ilya Kipnis)
Date: Mon, 2 Feb 2026 14:02:13 -0500
Subject: [R-SIG-Finance] Custom x-axis label in quantmod chartSeries
In-Reply-To: <CAPZA_qKVoAt=NB+EFE3rMDvDsub6Ri6PftJG0tmtoV9ydoFnAA@mail.gmail.com>
References: <CAPZA_qKjqcaWeysREUp+8XxHLecch=jxpinmy43zBNbha=KPyw@mail.gmail.com>
 <CA+oJuEHbjQTst2uAUbQq3-ub19NUV_afSa=B9SOR0nPXarD9CQ@mail.gmail.com>
 <CAPZA_qLVFt3gbResgEpqmSMqq3vCFmO9mmfmXVCJyAWm58QE9g@mail.gmail.com>
 <CA+oJuEFpe2qrYW830mEJdbdaVBk0gWDs1y_ucsnp-L9Y5gXP_Q@mail.gmail.com>
 <CAPZA_qKVoAt=NB+EFE3rMDvDsub6Ri6PftJG0tmtoV9ydoFnAA@mail.gmail.com>
Message-ID: <CA+oJuEGyWyt2=TqS=7q1daYJxgFX-kTEhsOmONx6VDwUZ5C2rw@mail.gmail.com>

Please include libraries used

On Mon, Feb 2, 2026 at 1:46?PM Andre Luiz Tietbohl Ramos <
andreltramos at gmail.com> wrote:

>
> Dear Ilya,
>
> Thanks for the prompt reply once more! The code I used is below and its
> output is attached (which is in Portuguese).
>
> tickers <- c('UNIP6.SA', 'KLBN4.SA', 'CSAN3.SA', 'BBAS3.SA', 'PETR4.SA', '
> SBSP3.SA')
> tickers.clean <- str_replace_all(tickers,'.SA$', '')
> ## weights
> wts = c(0.4, 0.15, 0.15, 0.05, 0.1, 0.15)
>
> wts_tbl <- tibble(symbol = tickers,
>                   wts = wts)
> wts_percent <- wts_tbl
> wts_percent$wts <- sapply(wts_percent$wts, function(x) percent(x, accuracy
> = 0.01))
> print(wts_percent)
>
> ## YF download
> price_data <- tq_get(tickers,
>                      from = start,
>                      to = end,
>                      get = 'stock.prices')
>
> ## Daily return for each stock
> ret_data <- price_data %>% group_by(symbol) %>%
>     tq_transmute(select = adjusted,
>                  mutate_fun = periodReturn,
>                  period = "daily",
>                  col_rename = "ret",
>                  relationship = "many-to-many")
>
> ## weights, returns join on a daily basis
> ret_data <- left_join(ret_data, wts_tbl, by = 'symbol', relationship =
> "many-to-many")
>
> ## weighted average
> ret_data <- ret_data %>%
>     mutate(wt_return = wts * ret)
>
> ## removal of the .SA suffix from Brazilian stocks via custom function
> del.SA downloaded through tidyquant
> ret_data <- del.SA(ret_data, "tq")
>
> ## total return on a given day is the sum of the prices weight of the
> portfolio
> port_ret <- ret_data %>%
>     group_by(date) %>%
>     summarise(port_ret = sum(wt_return))
>
> ## Portfolio cumulative return via cumprod()
> port_cumulative_ret  <- port_ret %>%
>     mutate(cum_ret = cumprod(1 + port_ret))
>
> ## filter for period of interest
> port_cumulative_ret <- port_cumulative_ret[port_cumulative_ret$date >=
> as.Date("2024-06-01") &
>
>  port_cumulative_ret$date <= today(),]
>
> posrtfolio.return <-
>     port_cumulative_ret %>% ggplot(aes(x = date, y = cum_ret)) +
>     theme_gray() +
>     theme(plot.background = element_rect(fill = "gray86")) +
>     geom_line(color = "blue") +
>     theme(axis.text.x = element_text(angle = 50, hjust = 1)) +
>     labs(x = 'Data',
>          y = 'Retorno Acumulado',
>          title = paste0('Retorno Acumulado do Portfolio de
> ',length(tickers.clean), ' ativo(s) em ',
>                         format(as.Date(end), format="%d/%m/%Y")),
>          subtitle = paste0("Ativos: ", toString(tickers.clean), "\nPesos:
> ",
>                            toString(percent(wts, accuracy = 0.1)))
>          ) +
>     scale_x_date(date_breaks = '2 weeks',
>                  date_labels = '%d %b %y') +
>     scale_y_continuous(
>          breaks = seq(0, 10, 0.05),
>         labels = scales::percent_format(accuracy = 1)
>     )
>
> Code for saving it to pdf seems quite straight forward and simple thus it
> isn't shown.
> I hope this work for you.  If it doesn't let me know for it does for me
> (OSX v11.7, R v4.1).
>
> Regards,
>
> --
> Andr? Luiz Tietbohl Ramos, PhD
>
>
> On Mon, Feb 2, 2026 at 2:43?PM Ilya Kipnis <ilya.kipnis at gmail.com> wrote:
>
>> Andre,
>>
>> I am saying that those of us that aren't *you* cannot run your code
>> because we don't know how you formulated the "stocks" object. Your code is
>> not reproducible to anybody else. Please include a minimum *reproducible*
>>  example.
>>
>> -Ilya
>>
>> On Mon, Feb 2, 2026 at 12:41?PM Andre Luiz Tietbohl Ramos <
>> andreltramos at gmail.com> wrote:
>>
>>> Dear Ilya,
>>>
>>> Thanks for the prompt reply!  The code from my previous message works
>>> and I uploaded as an example so you could see what my intent is.  Your
>>> suggestion will be considered, thank you! Its output is attached (which is
>>> in Portuguese).
>>>
>>> Thanks,
>>>
>>> --
>>> Andr? Luiz Tietbohl Ramos, PhD
>>>
>>>
>>> On Mon, Feb 2, 2026 at 12:56?PM Ilya Kipnis <ilya.kipnis at gmail.com>
>>> wrote:
>>>
>>>> This isn't a reproducible example--we don't have the stocks data frame.
>>>> Also, it is bad practice to use dplyr in the R/Finance stack as it
>>>> overrides multiple functions, such as lag and filter.
>>>>
>>>> On Mon, Feb 2, 2026 at 8:39?AM Andre Luiz Tietbohl Ramos <
>>>> andreltramos at gmail.com> wrote:
>>>>
>>>>> Hello,
>>>>>
>>>>> Is it possible to customize the x-axis label? Using ggplot I have the
>>>>> custom x-label described below,
>>>>>
>>>>> stocks %>%
>>>>> ggplot(aes(x = date, y = cum_ret)) +
>>>>>     theme_gray() +
>>>>>     theme(plot.background = element_rect(fill = "gray86")) +
>>>>>     geom_line(color = "blue") +
>>>>>     *theme(axis.text.x = element_text(angle = 50, hjust = 1))* +
>>>>>     labs(x = 'Data',
>>>>>          y = 'Cumulative Return',
>>>>>          title = paste0('Portfolio Cumulative Return of ',
>>>>> length(tickers.clean), ' stocks on ',
>>>>>                         format(as.Date(end), format="%d/%m/%Y")),
>>>>>          subtitle = paste0("Ativos: ", toString(tickers.clean),
>>>>> "\nWeights:
>>>>> ",
>>>>>                            toString(percent(wts, accuracy = 0.1)))
>>>>>          ) +
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> * scale_x_date(date_breaks = '2 weeks',
>>>>> date_labels = '%d %b %y') +    scale_y_continuous(        breaks =
>>>>> seq(0,
>>>>> 10, 0.05),        labels = scales::percent_format(accuracy = 1)*
>>>>>     )
>>>>>
>>>>> TIA,
>>>>>
>>>>> --
>>>>> Andre Luiz Tietbohl Ramos, PhD
>>>>>
>>>>>         [[alternative HTML version deleted]]
>>>>>
>>>>> _______________________________________________
>>>>> R-SIG-Finance at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>> -- Also note that this is not the r-help list where general R
>>>>> questions should go.
>>>>>
>>>>

	[[alternative HTML version deleted]]


From @ndre|tr@mo@ @end|ng |rom gm@||@com  Mon Feb  2 21:53:29 2026
From: @ndre|tr@mo@ @end|ng |rom gm@||@com (Andre Luiz Tietbohl Ramos)
Date: Mon, 2 Feb 2026 17:53:29 -0300
Subject: [R-SIG-Finance] Custom x-axis label in quantmod chartSeries
In-Reply-To: <CA+oJuEGyWyt2=TqS=7q1daYJxgFX-kTEhsOmONx6VDwUZ5C2rw@mail.gmail.com>
References: <CAPZA_qKjqcaWeysREUp+8XxHLecch=jxpinmy43zBNbha=KPyw@mail.gmail.com>
 <CA+oJuEHbjQTst2uAUbQq3-ub19NUV_afSa=B9SOR0nPXarD9CQ@mail.gmail.com>
 <CAPZA_qLVFt3gbResgEpqmSMqq3vCFmO9mmfmXVCJyAWm58QE9g@mail.gmail.com>
 <CA+oJuEFpe2qrYW830mEJdbdaVBk0gWDs1y_ucsnp-L9Y5gXP_Q@mail.gmail.com>
 <CAPZA_qKVoAt=NB+EFE3rMDvDsub6Ri6PftJG0tmtoV9ydoFnAA@mail.gmail.com>
 <CA+oJuEGyWyt2=TqS=7q1daYJxgFX-kTEhsOmONx6VDwUZ5C2rw@mail.gmail.com>
Message-ID: <CAPZA_qLNAHrudFKS+FBicGqX0JNsAY1sR81K2FGp00L0vs493Q@mail.gmail.com>

Hello,

The libraries loaded during startup in the .First section of my .Rprofile
file are in the attached file.

Regards,

--
Andr? Luiz Tietbohl Ramos, PhD


On Mon, Feb 2, 2026 at 4:02?PM Ilya Kipnis <ilya.kipnis at gmail.com> wrote:

> Please include libraries used
>
> On Mon, Feb 2, 2026 at 1:46?PM Andre Luiz Tietbohl Ramos <
> andreltramos at gmail.com> wrote:
>
>>
>> Dear Ilya,
>>
>> Thanks for the prompt reply once more! The code I used is below and its
>> output is attached (which is in Portuguese).
>>
>> tickers <- c('UNIP6.SA', 'KLBN4.SA', 'CSAN3.SA', 'BBAS3.SA', 'PETR4.SA',
>> 'SBSP3.SA')
>> tickers.clean <- str_replace_all(tickers,'.SA$', '')
>> ## weights
>> wts = c(0.4, 0.15, 0.15, 0.05, 0.1, 0.15)
>>
>> wts_tbl <- tibble(symbol = tickers,
>>                   wts = wts)
>> wts_percent <- wts_tbl
>> wts_percent$wts <- sapply(wts_percent$wts, function(x) percent(x,
>> accuracy = 0.01))
>> print(wts_percent)
>>
>> ## YF download
>> price_data <- tq_get(tickers,
>>                      from = start,
>>                      to = end,
>>                      get = 'stock.prices')
>>
>> ## Daily return for each stock
>> ret_data <- price_data %>% group_by(symbol) %>%
>>     tq_transmute(select = adjusted,
>>                  mutate_fun = periodReturn,
>>                  period = "daily",
>>                  col_rename = "ret",
>>                  relationship = "many-to-many")
>>
>> ## weights, returns join on a daily basis
>> ret_data <- left_join(ret_data, wts_tbl, by = 'symbol', relationship =
>> "many-to-many")
>>
>> ## weighted average
>> ret_data <- ret_data %>%
>>     mutate(wt_return = wts * ret)
>>
>> ## removal of the .SA suffix from Brazilian stocks via custom function
>> del.SA downloaded through tidyquant
>> ret_data <- del.SA(ret_data, "tq")
>>
>> ## total return on a given day is the sum of the prices weight of the
>> portfolio
>> port_ret <- ret_data %>%
>>     group_by(date) %>%
>>     summarise(port_ret = sum(wt_return))
>>
>> ## Portfolio cumulative return via cumprod()
>> port_cumulative_ret  <- port_ret %>%
>>     mutate(cum_ret = cumprod(1 + port_ret))
>>
>> ## filter for period of interest
>> port_cumulative_ret <- port_cumulative_ret[port_cumulative_ret$date >=
>> as.Date("2024-06-01") &
>>
>>  port_cumulative_ret$date <= today(),]
>>
>> posrtfolio.return <-
>>     port_cumulative_ret %>% ggplot(aes(x = date, y = cum_ret)) +
>>     theme_gray() +
>>     theme(plot.background = element_rect(fill = "gray86")) +
>>     geom_line(color = "blue") +
>>     theme(axis.text.x = element_text(angle = 50, hjust = 1)) +
>>     labs(x = 'Data',
>>          y = 'Retorno Acumulado',
>>          title = paste0('Retorno Acumulado do Portfolio de
>> ',length(tickers.clean), ' ativo(s) em ',
>>                         format(as.Date(end), format="%d/%m/%Y")),
>>          subtitle = paste0("Ativos: ", toString(tickers.clean), "\nPesos:
>> ",
>>                            toString(percent(wts, accuracy = 0.1)))
>>          ) +
>>     scale_x_date(date_breaks = '2 weeks',
>>                  date_labels = '%d %b %y') +
>>     scale_y_continuous(
>>          breaks = seq(0, 10, 0.05),
>>         labels = scales::percent_format(accuracy = 1)
>>     )
>>
>> Code for saving it to pdf seems quite straight forward and simple thus it
>> isn't shown.
>> I hope this work for you.  If it doesn't let me know for it does for me
>> (OSX v11.7, R v4.1).
>>
>> Regards,
>>
>> --
>> Andr? Luiz Tietbohl Ramos, PhD
>>
>>
>> On Mon, Feb 2, 2026 at 2:43?PM Ilya Kipnis <ilya.kipnis at gmail.com> wrote:
>>
>>> Andre,
>>>
>>> I am saying that those of us that aren't *you* cannot run your code
>>> because we don't know how you formulated the "stocks" object. Your code is
>>> not reproducible to anybody else. Please include a minimum
>>> *reproducible* example.
>>>
>>> -Ilya
>>>
>>> On Mon, Feb 2, 2026 at 12:41?PM Andre Luiz Tietbohl Ramos <
>>> andreltramos at gmail.com> wrote:
>>>
>>>> Dear Ilya,
>>>>
>>>> Thanks for the prompt reply!  The code from my previous message works
>>>> and I uploaded as an example so you could see what my intent is.  Your
>>>> suggestion will be considered, thank you! Its output is attached (which is
>>>> in Portuguese).
>>>>
>>>> Thanks,
>>>>
>>>> --
>>>> Andr? Luiz Tietbohl Ramos, PhD
>>>>
>>>>
>>>> On Mon, Feb 2, 2026 at 12:56?PM Ilya Kipnis <ilya.kipnis at gmail.com>
>>>> wrote:
>>>>
>>>>> This isn't a reproducible example--we don't have the stocks data
>>>>> frame. Also, it is bad practice to use dplyr in the R/Finance stack as it
>>>>> overrides multiple functions, such as lag and filter.
>>>>>
>>>>> On Mon, Feb 2, 2026 at 8:39?AM Andre Luiz Tietbohl Ramos <
>>>>> andreltramos at gmail.com> wrote:
>>>>>
>>>>>> Hello,
>>>>>>
>>>>>> Is it possible to customize the x-axis label? Using ggplot I have the
>>>>>> custom x-label described below,
>>>>>>
>>>>>> stocks %>%
>>>>>> ggplot(aes(x = date, y = cum_ret)) +
>>>>>>     theme_gray() +
>>>>>>     theme(plot.background = element_rect(fill = "gray86")) +
>>>>>>     geom_line(color = "blue") +
>>>>>>     *theme(axis.text.x = element_text(angle = 50, hjust = 1))* +
>>>>>>     labs(x = 'Data',
>>>>>>          y = 'Cumulative Return',
>>>>>>          title = paste0('Portfolio Cumulative Return of ',
>>>>>> length(tickers.clean), ' stocks on ',
>>>>>>                         format(as.Date(end), format="%d/%m/%Y")),
>>>>>>          subtitle = paste0("Ativos: ", toString(tickers.clean),
>>>>>> "\nWeights:
>>>>>> ",
>>>>>>                            toString(percent(wts, accuracy = 0.1)))
>>>>>>          ) +
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> * scale_x_date(date_breaks = '2 weeks',
>>>>>> date_labels = '%d %b %y') +    scale_y_continuous(        breaks =
>>>>>> seq(0,
>>>>>> 10, 0.05),        labels = scales::percent_format(accuracy = 1)*
>>>>>>     )
>>>>>>
>>>>>> TIA,
>>>>>>
>>>>>> --
>>>>>> Andre Luiz Tietbohl Ramos, PhD
>>>>>>
>>>>>>         [[alternative HTML version deleted]]
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-SIG-Finance at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>>> -- Also note that this is not the r-help list where general R
>>>>>> questions should go.
>>>>>>
>>>>>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20260202/4a147a25/attachment.html>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Rlibraries.r
Type: application/octet-stream
Size: 2853 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20260202/4a147a25/attachment.obj>

From @ndre|tr@mo@ @end|ng |rom gm@||@com  Wed Feb  4 19:25:35 2026
From: @ndre|tr@mo@ @end|ng |rom gm@||@com (Andre Luiz Tietbohl Ramos)
Date: Wed, 4 Feb 2026 15:25:35 -0300
Subject: [R-SIG-Finance] Quantmod: change color of bbands ma line
Message-ID: <CAPZA_qLHpBFCT7Va-XMSx=N54aMoJZCx7ZT_kChpF0DzKON6=g@mail.gmail.com>

Hello,

I wonder if the is a way to change the bbands ma line?

The chatSeries call I'm using is below,

stock <- PETR4.SA
full.window.color.bg <- '#D3D3D3'
chartSeries(stock,
                   name = "PETR4.SA",
                   type = "line",
                   lwd = 1,
                   theme = chartTheme("white",
                                                      up.col='darkgreen',
                                                      bbands.col.ma='blue',
                                                      bg.col=
full.window.color.bg,
                                                      area=
full.window.color.bg),
                                                      TA = list(addVo(),
                                                      addBBands(n = 20, sd
= 2, maType = EMA))
                                                    )

TIA,

--
Andre Luiz Tietbohl Ramos, PhD

	[[alternative HTML version deleted]]


From @ndre|tr@mo@ @end|ng |rom gm@||@com  Sat Feb  7 18:43:02 2026
From: @ndre|tr@mo@ @end|ng |rom gm@||@com (Andre Luiz Tietbohl Ramos)
Date: Sat, 7 Feb 2026 14:43:02 -0300
Subject: [R-SIG-Finance] List of lists in crypto
Message-ID: <CAPZA_qJ2OrhjCdCDey+2=FpbDyumPPyGMWEV8-O6SMbfDHJPPw@mail.gmail.com>

Hello,

This message isn't directly related to finance for it just uses the problem
at hand contextually under the crypto domain.  Thus, I have a data frame
made from exchanges' names and the intervals each exchange provides.  See
below, please.

exchanges.names <- c('binance', 'bitmart', 'bybit', 'crypto.com', 'huobi',
'kraken', 'kucoin', 'mexc')
intervals <- list(list('1s', '1m', '3m', '5m', '15m', '30m', '1h', '2h',
'4h', '6h', '8h', '12h', '1d', '3d', '1w', '1M'),
                  list('1m', '3m', '5m', '15m', '30m', '1h', '2h', '4h',
'6h', '12h', '1d', '3d', '1w'),
                  list('1m', '3m', '5m', '15m', '30m', '1h', '2h',
'4h','6h', '12h', '1d', '1M', '1w'),
                  list('1m', '5m', '15m', '30m', '1h', '2h', '4h', '12h',
'1d', '1w', '2w', '1M'),
                  list('1m', '5m', '15m', '30m', '1h', '4h', '1d', '1w',
'1M'),
                  list('1m', '5m', '15m', '30m', '1h', '4h', '12h', '1d',
'1w'),
                  list('1m', '5m', '15m', '30m', '1h', '2h', '4h', '8h',
'12h', '1d', '1w'),
                  list('1m', '5m', '15m', '30m', '1h', '4h', '8h', '1d',
'1w', '1M')
                  )
exchanges.intervals <- as.data.frame(cbind(exchanges.names, intervals))

exchanges.intervals

  exchanges.names         intervals
1         binance  1s, 1m, 3m, 5m, 15m, 30m, 1h, 2h, 4h, 6h, 8h, 12h, 1d,
3d, 1w, 1M
2         bitmart    1m, 3m, 5m, 15m, 30m, 1h, 2h, 4h, 6h, 12h, 1d, 3d, 1w
3           bybit      1m, 3m, 5m, 15m, 30m, 1h, 2h, 4h, 6h, 12h, 1d, 1M, 1w
4      crypto.com  1m, 5m, 15m, 30m, 1h, 2h, 4h, 12h, 1d, 1w, 2w, 1M
5           huobi      1m, 5m, 15m, 30m, 1h, 4h, 1d, 1w, 1M
6          kraken     1m, 5m, 15m, 30m, 1h, 4h, 12h, 1d, 1w
7          kucoin      1m, 5m, 15m, 30m, 1h, 2h, 4h, 8h, 12h, 1d, 1w
8            mexc      1m, 5m, 15m, 30m, 1h, 4h, 8h, 1d, 1w, 1M

Suppose now I want to get the 5m interval from the binance exchange.  While
I can filter the binance row with,

exchanges.intervals[exchanges.names == "binance", ]

 exchanges.names
 intervals
1         binance 1s, 1m, 3m, 5m, *15m*, 30m, 1h, 2h, 4h, 6h, 8h, 12h, 1d,
3d, 1w, 1M

I don't know how get the fourth element date from the filtered data frame
nested list.  I need to use its data content.
Any help appreciated!

TIA,

--
Andr? Luiz Tietbohl Ramos, PhD

	[[alternative HTML version deleted]]


From ||y@@k|pn|@ @end|ng |rom gm@||@com  Sat Feb  7 18:50:32 2026
From: ||y@@k|pn|@ @end|ng |rom gm@||@com (Ilya Kipnis)
Date: Sat, 7 Feb 2026 12:50:32 -0500
Subject: [R-SIG-Finance] List of lists in crypto
In-Reply-To: <CAPZA_qJ2OrhjCdCDey+2=FpbDyumPPyGMWEV8-O6SMbfDHJPPw@mail.gmail.com>
References: <CAPZA_qJ2OrhjCdCDey+2=FpbDyumPPyGMWEV8-O6SMbfDHJPPw@mail.gmail.com>
Message-ID: <CA+oJuEGeYwDeV9pARBFZcD7UfakZn1AseXosLT1_N4bOrJ4rug@mail.gmail.com>

If you have a list of lists, the way to access those elements is like this:

Answer <- object[[first_list_index]][[second_list_index]]

On Sat, Feb 7, 2026 at 12:43?PM Andre Luiz Tietbohl Ramos <
andreltramos at gmail.com> wrote:

> Hello,
>
> This message isn't directly related to finance for it just uses the problem
> at hand contextually under the crypto domain.  Thus, I have a data frame
> made from exchanges' names and the intervals each exchange provides.  See
> below, please.
>
> exchanges.names <- c('binance', 'bitmart', 'bybit', 'crypto.com', 'huobi',
> 'kraken', 'kucoin', 'mexc')
> intervals <- list(list('1s', '1m', '3m', '5m', '15m', '30m', '1h', '2h',
> '4h', '6h', '8h', '12h', '1d', '3d', '1w', '1M'),
>                   list('1m', '3m', '5m', '15m', '30m', '1h', '2h', '4h',
> '6h', '12h', '1d', '3d', '1w'),
>                   list('1m', '3m', '5m', '15m', '30m', '1h', '2h',
> '4h','6h', '12h', '1d', '1M', '1w'),
>                   list('1m', '5m', '15m', '30m', '1h', '2h', '4h', '12h',
> '1d', '1w', '2w', '1M'),
>                   list('1m', '5m', '15m', '30m', '1h', '4h', '1d', '1w',
> '1M'),
>                   list('1m', '5m', '15m', '30m', '1h', '4h', '12h', '1d',
> '1w'),
>                   list('1m', '5m', '15m', '30m', '1h', '2h', '4h', '8h',
> '12h', '1d', '1w'),
>                   list('1m', '5m', '15m', '30m', '1h', '4h', '8h', '1d',
> '1w', '1M')
>                   )
> exchanges.intervals <- as.data.frame(cbind(exchanges.names, intervals))
>
> exchanges.intervals
>
>   exchanges.names         intervals
> 1         binance  1s, 1m, 3m, 5m, 15m, 30m, 1h, 2h, 4h, 6h, 8h, 12h, 1d,
> 3d, 1w, 1M
> 2         bitmart    1m, 3m, 5m, 15m, 30m, 1h, 2h, 4h, 6h, 12h, 1d, 3d, 1w
> 3           bybit      1m, 3m, 5m, 15m, 30m, 1h, 2h, 4h, 6h, 12h, 1d, 1M,
> 1w
> 4      crypto.com  1m, 5m, 15m, 30m, 1h, 2h, 4h, 12h, 1d, 1w, 2w, 1M
> 5           huobi      1m, 5m, 15m, 30m, 1h, 4h, 1d, 1w, 1M
> 6          kraken     1m, 5m, 15m, 30m, 1h, 4h, 12h, 1d, 1w
> 7          kucoin      1m, 5m, 15m, 30m, 1h, 2h, 4h, 8h, 12h, 1d, 1w
> 8            mexc      1m, 5m, 15m, 30m, 1h, 4h, 8h, 1d, 1w, 1M
>
> Suppose now I want to get the 5m interval from the binance exchange.  While
> I can filter the binance row with,
>
> exchanges.intervals[exchanges.names == "binance", ]
>
>  exchanges.names
>  intervals
> 1         binance 1s, 1m, 3m, 5m, *15m*, 30m, 1h, 2h, 4h, 6h, 8h, 12h, 1d,
> 3d, 1w, 1M
>
> I don't know how get the fourth element date from the filtered data frame
> nested list.  I need to use its data content.
> Any help appreciated!
>
> TIA,
>
> --
> Andr? Luiz Tietbohl Ramos, PhD
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Sat Feb  7 18:52:51 2026
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sat, 7 Feb 2026 11:52:51 -0600
Subject: [R-SIG-Finance] List of lists in crypto
In-Reply-To: <CAPZA_qJ2OrhjCdCDey+2=FpbDyumPPyGMWEV8-O6SMbfDHJPPw@mail.gmail.com>
References: <CAPZA_qJ2OrhjCdCDey+2=FpbDyumPPyGMWEV8-O6SMbfDHJPPw@mail.gmail.com>
Message-ID: <27015.31731.304570.670345@paul.eddelbuettel.com>


Andre,

You may find that may you get better answers if you "improve" your questions.
One writeup on how to craft good 'minimally verifiable complete examples'
(aka MVCE) ones is

  https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

which you may want to read (fully).  A helpful command is `dput` as it allows
you send (minimal, toy, still representative) data set along with it.

C

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @ndre|tr@mo@ @end|ng |rom gm@||@com  Sun Feb  8 12:33:14 2026
From: @ndre|tr@mo@ @end|ng |rom gm@||@com (Andre Luiz Tietbohl Ramos)
Date: Sun, 8 Feb 2026 08:33:14 -0300
Subject: [R-SIG-Finance] List of lists in crypto
In-Reply-To: <27015.31731.304570.670345@paul.eddelbuettel.com>
References: <CAPZA_qJ2OrhjCdCDey+2=FpbDyumPPyGMWEV8-O6SMbfDHJPPw@mail.gmail.com>
 <27015.31731.304570.670345@paul.eddelbuettel.com>
Message-ID: <CAPZA_qJHdHvZ3nOWasDODdjduxQQCboKELpdqL8CEnVsZcgO-A@mail.gmail.com>

Hello everyone,

For starters, I want to thank Dirk and Ilya for helping me.  Following
Dirk's suggestion, I'll try to describe the objective better and post a MWE
next.
The main objective is to define a data frame that has all exchanges
available along with the intervals each one of them the provide.

Sys.setenv(TZ = "America/Sao_Paulo")
library(lubridate)
library(dplyr)
library(svDialogs)
library(stringr)
library(tidyverse)
library(rvest)
library(RCurl)
library(reprex)
library(tibble)
library(quantmod)

library(cryptoQuotes)
library(crypto2)
library(cryptotrackr)
library(coinmarketcapr)

exchanges.names <- c('binance', 'bitmart', 'bybit', 'crypto.com', 'huobi',
'kraken', 'kucoin', 'mexc')
intervals <- list(list('1s', '1m', '3m', '5m', '15m', '30m', '1h', '2h',
'4h', '6h', '8h', '12h', '1d', '3d', '1w', '1M'),
                  list('1m', '3m', '5m', '15m', '30m', '1h', '2h',
'4h', '6h', '12h', '1d', '3d', '1w'),
                  list('1m', '3m', '5m', '15m', '30m', '1h', '2h', '4h',
'6h', '12h', '1d', '1M', '1w'),
                  list('1m', '5m', '15m', '30m', '1h', '2h', '4h', '12h',
'1d', '1w', '2w', '1M'),
                  list('1m', '5m', '15m', '30m', '1h', '4h', '1d', '1w',
'1M'),
                  list('1m', '5m', '15m', '30m', '1h', '4h', '12h', '1d',
'1w'),
                  list('1m', '5m', '15m', '30m', '1h', '2h', '4h', '8h',
'12h', '1d', '1w'),
                  list('1m', '5m', '15m', '30m', '1h', '4h', '8h', '1d',
'1w', '1M') )
exchanges.intervals <- as.data.frame(cbind(exchanges.names, intervals))

## filtering for the binance exchange, for example:
selected <- exchanges.intervals[exchanges.names == "binance", ]

This data is below,

> exchanges.names
[1] "binance"    "bitmart"    "bybit"      "crypto.com" "huobi"
 "kraken"     "kucoin"     "mexc"
> intervals
[[1]]
[[1]][[1]]
[1] "1s"
...
[[8]]
[[8]][[1]]
[1] "1m"
...
[[8]][[10]]
[1] "1M"

> exchanges.intervals
  exchanges.names
intervals
1         binance 1s, 1m, 3m, 5m, 15m, 30m, 1h, 2h, 4h, 6h, 8h, 12h, 1d,
3d, 1w, 1M
2         bitmart             1m, 3m, 5m, 15m, 30m, 1h, 2h, 4h, 6h, 12h,
1d, 3d, 1w
3           bybit             1m, 3m, 5m, 15m, 30m, 1h, 2h, 4h, 6h, 12h,
1d, 1M, 1w
4      crypto.com                 1m, 5m, 15m, 30m, 1h, 2h, 4h, 12h, 1d,
1w, 2w, 1M
5           huobi                              1m, 5m, 15m, 30m, 1h, 4h,
1d, 1w, 1M
6          kraken                             1m, 5m, 15m, 30m, 1h, 4h,
12h, 1d, 1w
7          kucoin                     1m, 5m, 15m, 30m, 1h, 2h, 4h, 8h,
12h, 1d, 1w
8            mexc                          1m, 5m, 15m, 30m, 1h, 4h, 8h,
1d, 1w, 1M
>

> exchanges.intervals[[2]][[1]]
[[1]]
[1] "1s"
...
[[4]]
[1] "5m"
...
[[16]]
[1] "1M"
>

> exchanges.intervals[exchanges.names == "binance", ]
  exchanges.names
intervals
1         binance           1s, 1m, 3m, 5m, 15m, 30m, 1h, 2h, 4h, 6h, 8h,
12h, 1d, 3d, 1w, 1M

Assume I want the fourth interval from the binance exchange, which is 5
minutes or 5m.
How can I filter or select this data and assign it to a variable, please?
Of course it is quite easy to assign it result to a variable but I don't
know its first part.
I hope what I detailed above will help you.

--
Andr? Luiz Tietbohl Ramos, PhD


On Sat, Feb 7, 2026 at 2:52?PM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> Andre,
>
> You may find that may you get better answers if you "improve" your
> questions.
> One writeup on how to craft good 'minimally verifiable complete examples'
> (aka MVCE) ones is
>
>
> https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example
>
> which you may want to read (fully).  A helpful command is `dput` as it
> allows
> you send (minimal, toy, still representative) data set along with it.
>
> C
>
> --
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Sun Feb  8 14:15:45 2026
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sun, 8 Feb 2026 07:15:45 -0600
Subject: [R-SIG-Finance] List of lists in crypto
In-Reply-To: <CAPZA_qJHdHvZ3nOWasDODdjduxQQCboKELpdqL8CEnVsZcgO-A@mail.gmail.com>
References: <CAPZA_qJ2OrhjCdCDey+2=FpbDyumPPyGMWEV8-O6SMbfDHJPPw@mail.gmail.com>
 <27015.31731.304570.670345@paul.eddelbuettel.com>
 <CAPZA_qJHdHvZ3nOWasDODdjduxQQCboKELpdqL8CEnVsZcgO-A@mail.gmail.com>
Message-ID: <27016.35969.760210.576204@paul.eddelbuettel.com>


On 8 February 2026 at 08:33, Andre Luiz Tietbohl Ramos wrote:
| library(lubridate)
| library(dplyr)
| library(svDialogs)
| library(stringr)
| library(tidyverse)
| library(rvest)
| library(RCurl)
| library(reprex)
| library(tibble)
| library(quantmod)
| 
| library(cryptoQuotes)
| library(crypto2)
| library(cryptotrackr)
| library(coinmarketcapr)

So after I explain what a MCVE example is, and let's stress minimal here, you
post a snippet requiring 14 packages? And likely API keys? Interesting choice.

And if I may, sending 40% of the list traffic here

  > tb <- table(readLines(pipe("grep 'From: ' r-sig-finance | tail -50")))
  > tail(tb[order(tb)],1)

  From: Andre Luiz Tietbohl Ramos <andreltramos at gmail.com> 
                                                        20 
  >

may not get you where you want to go. I cannot speak for everybody here but I
think most are happy to 'help you learn to help yourself', but I don't you
can expect us to be your assistants doing custom programming for you.

For this question Ilya already explained to you how to peek into a nested 
list. I would start there.


Dirk

| 
| exchanges.names <- c('binance', 'bitmart', 'bybit', 'crypto.com', 'huobi',
| 'kraken', 'kucoin', 'mexc')
| intervals <- list(list('1s', '1m', '3m', '5m', '15m', '30m', '1h', '2h',
| '4h', '6h', '8h', '12h', '1d', '3d', '1w', '1M'),
|                   list('1m', '3m', '5m', '15m', '30m', '1h', '2h',
| '4h', '6h', '12h', '1d', '3d', '1w'),
|                   list('1m', '3m', '5m', '15m', '30m', '1h', '2h', '4h',
| '6h', '12h', '1d', '1M', '1w'),
|                   list('1m', '5m', '15m', '30m', '1h', '2h', '4h', '12h',
| '1d', '1w', '2w', '1M'),
|                   list('1m', '5m', '15m', '30m', '1h', '4h', '1d', '1w',
| '1M'),
|                   list('1m', '5m', '15m', '30m', '1h', '4h', '12h', '1d',
| '1w'),
|                   list('1m', '5m', '15m', '30m', '1h', '2h', '4h', '8h',
| '12h', '1d', '1w'),
|                   list('1m', '5m', '15m', '30m', '1h', '4h', '8h', '1d',
| '1w', '1M') )
| exchanges.intervals <- as.data.frame(cbind(exchanges.names, intervals))
| 
| ## filtering for the binance exchange, for example:
| selected <- exchanges.intervals[exchanges.names == "binance", ]
| 
| This data is below,
| 
| > exchanges.names
| [1] "binance"    "bitmart"    "bybit"      "crypto.com" "huobi"
|  "kraken"     "kucoin"     "mexc"
| > intervals
| [[1]]
| [[1]][[1]]
| [1] "1s"
| ...
| [[8]]
| [[8]][[1]]
| [1] "1m"
| ...
| [[8]][[10]]
| [1] "1M"
| 
| > exchanges.intervals
|   exchanges.names
| intervals
| 1         binance 1s, 1m, 3m, 5m, 15m, 30m, 1h, 2h, 4h, 6h, 8h, 12h, 1d,
| 3d, 1w, 1M
| 2         bitmart             1m, 3m, 5m, 15m, 30m, 1h, 2h, 4h, 6h, 12h,
| 1d, 3d, 1w
| 3           bybit             1m, 3m, 5m, 15m, 30m, 1h, 2h, 4h, 6h, 12h,
| 1d, 1M, 1w
| 4      crypto.com                 1m, 5m, 15m, 30m, 1h, 2h, 4h, 12h, 1d,
| 1w, 2w, 1M
| 5           huobi                              1m, 5m, 15m, 30m, 1h, 4h,
| 1d, 1w, 1M
| 6          kraken                             1m, 5m, 15m, 30m, 1h, 4h,
| 12h, 1d, 1w
| 7          kucoin                     1m, 5m, 15m, 30m, 1h, 2h, 4h, 8h,
| 12h, 1d, 1w
| 8            mexc                          1m, 5m, 15m, 30m, 1h, 4h, 8h,
| 1d, 1w, 1M
| >
| 
| > exchanges.intervals[[2]][[1]]
| [[1]]
| [1] "1s"
| ...
| [[4]]
| [1] "5m"
| ...
| [[16]]
| [1] "1M"
| >
| 
| > exchanges.intervals[exchanges.names == "binance", ]
|   exchanges.names
| intervals
| 1         binance           1s, 1m, 3m, 5m, 15m, 30m, 1h, 2h, 4h, 6h, 8h,
| 12h, 1d, 3d, 1w, 1M
| 
| Assume I want the fourth interval from the binance exchange, which is 5
| minutes or 5m.
| How can I filter or select this data and assign it to a variable, please?
| Of course it is quite easy to assign it result to a variable but I don't
| know its first part.
| I hope what I detailed above will help you.
| 
| --
| Andr? Luiz Tietbohl Ramos, PhD
| 
| 
| On Sat, Feb 7, 2026 at 2:52?PM Dirk Eddelbuettel <edd at debian.org> wrote:
| 
| >
| > Andre,
| >
| > You may find that may you get better answers if you "improve" your
| > questions.
| > One writeup on how to craft good 'minimally verifiable complete examples'
| > (aka MVCE) ones is
| >
| >
| > https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example
| >
| > which you may want to read (fully).  A helpful command is `dput` as it
| > allows
| > you send (minimal, toy, still representative) data set along with it.
| >
| > C
| >
| > --
| > dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
| >

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


