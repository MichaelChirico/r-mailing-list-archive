From L.Isella at myrealbox.com  Sun Jul 10 20:00:40 2005
From: L.Isella at myrealbox.com (L.Isella)
Date: Sun, 10 Jul 2005 18:00:40 +0000
Subject: [R-sig-finance] Solve.QP
Message-ID: <1121018440.8c47c59cL.Isella@myrealbox.com>

Dear All,
I am starting to use R for portfolio optimization.
I found the portfolio.optim package in tseries very useful, since it allows the user to use both the historical data to create the covariance matrix or to provide it directly.
However, I would like not to simply use it as a black box. Portfolio.optim relies on solve.QP.
Now, a typical problem in portfolio management is to minimize the variance of the portfolio: 
/frac{1}{2}W^T%*%CovMat%*%W,
where CovMat is the covariance matrix of my portfolio, W is the vector of the (unknown) weights.
The constraints are:
\sum_i W_i=1 (the portfolio is totally invested)
and 
\sum_i W_i\mu_i=\mu (\mu is the required variance of my portfolio, W_i and \mu_i the weight and the expected return of the i-th asset, respectively).
Then I could e.g. impose W_i>=0 for all i (no short-selling allowed).
Is it straightforward to implement these constraints on the weights as 
A%*%W>= b, where A is a matrix and b a vector?
Maybe it is a naive question and I am just trying to re-invent the wheel, but I will be grateful to anyone who can help clarify these issues to me.
Best Regards
Lorenzo


From hannu.kahra at mpsgr.it  Mon Jul 11 10:58:09 2005
From: hannu.kahra at mpsgr.it (KAHRA HANNU)
Date: Mon, 11 Jul 2005 10:58:09 +0200
Subject: [R-sig-finance] Solve.QP
Message-ID: <FFAAD1A807317540A06142D8CD168E9D54BC97@se000010010038.servinternet.local>

Lorenzo,

Have a look at the portfolio.optim R code and how it applies solve.QP. Download the tseries version 1.9 package and unzip it. The tseries folder contains a folder called R that contains the tseries file. Have a look at the portfolio.optim function in the file.

Regards,

Hannu Kahra
Progetti Speciali 
Monte Paschi Asset Management SGR S.p.A. 
Via San Vittore, 37
IT-20123 Milano, Italia 

Tel.: +39 02 43828 754
Mobile: +39 333 876 1558 
Fax: +39 02 43828 247 
E-mail: hannu.kahra at mpsgr.it 
Web: www.mpsam.it 

-----Original Message-----
From: r-sig-finance-bounces at stat.math.ethz.ch [mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of L.Isella
Sent: 10. hein?kuuta 2005 20:01
To: r-sig-finance at stat.math.ethz.ch
Subject: [R-sig-finance] Solve.QP

Dear All,
I am starting to use R for portfolio optimization.
I found the portfolio.optim package in tseries very useful, since it allows the user to use both the historical data to create the covariance matrix or to provide it directly.
However, I would like not to simply use it as a black box. Portfolio.optim relies on solve.QP.
Now, a typical problem in portfolio management is to minimize the variance of the portfolio: 
/frac{1}{2}W^T%*%CovMat%*%W,
where CovMat is the covariance matrix of my portfolio, W is the vector of the (unknown) weights.
The constraints are:
\sum_i W_i=1 (the portfolio is totally invested)
and 
\sum_i W_i\mu_i=\mu (\mu is the required variance of my portfolio, W_i and \mu_i the weight and the expected return of the i-th asset, respectively).
Then I could e.g. impose W_i>=0 for all i (no short-selling allowed).
Is it straightforward to implement these constraints on the weights as 
A%*%W>= b, where A is a matrix and b a vector?
Maybe it is a naive question and I am just trying to re-invent the wheel, but I will be grateful to anyone who can help clarify these issues to me.
Best Regards
Lorenzo

_______________________________________________
R-sig-finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance


From Jordi.Molins at drkw.com  Mon Jul 11 14:21:55 2005
From: Jordi.Molins at drkw.com (Molins, Jordi)
Date: Mon, 11 Jul 2005 14:21:55 +0200
Subject: [R-sig-finance] Markowitz with non-linear constraints
Message-ID: <C5A76BA0CA4D734CA725124C4D6397AC8BFDF4@ibfftce502.de.ad.drkw.net>

Dear all,

I am starting to use portfolio optimization with R. It seems pretty easy to
use Markowitz optimization with linear constraints, but I still have not
come up with a way to introduce non-linear constraints (e.g., \sum_i |w_i| =
1, to allow short positions to "burn" capital, or \sum_i w_i*w_i = constant,
in order not to have too much concentration in the portfolio). Is there an
easy way to introduce these non-linear constraints without resorting to
introduce lagrange multipliers, and then make these multipliers tend to
infinity? 

An additional question: is there a package that applies random matrix theory
to a correlation matrix? I would like to clean the correlation matrix from
spurious (low) eigenvalues, and not just deleting all small eigenvalues
without a clear-cut cut-off point.

Regards and thank you

Jordi



--------------------------------------------------------------------------------
The information contained herein is confidential and is inte...{{dropped}}


From roger.bos at gmail.com  Wed Jul 13 15:10:10 2005
From: roger.bos at gmail.com (roger bos)
Date: Wed, 13 Jul 2005 09:10:10 -0400
Subject: [R-sig-finance] Solve.QP
In-Reply-To: <FFAAD1A807317540A06142D8CD168E9D54BC97@se000010010038.servinternet.local>
References: <FFAAD1A807317540A06142D8CD168E9D54BC97@se000010010038.servinternet.local>
Message-ID: <1db7268005071306103614168b@mail.gmail.com>

I have went through this exercise and posted an answer to the email
list: search for "portfolio.optim" and "solved" and it will be the
first hit.  Anyway, I have pasted the code in this message.


library(quadprog) 
library(MASS) 
rm(sol) 

n<-100	 # number of assets
m<-200			 # number of states of the world

rho<-0.7 
sigma<-0.2 
mu<-.1 
Cov <- matrix(rho*sigma*sigma, ncol=n, nrow=n) diag(Cov) <- rep(sigma*sigma, n) 
S <- 1+matrix(mvrnorm(m, rep(mu, n), Sigma=Cov), ncol=n) 
Cov <- var(S) #gives same answer as cov(S) mu <- apply(S, 2, mean) 
mu.target <- mean(mu) 
bLo <- rep(0, n) 

Amat <- rbind(1, mu) 
dim(bLo) <- c(n,1) 

bvec <- t(rbind(1, mu.target, bLo))
zMat <- diag(n)
Amat <- t(rbind(Amat, zMat))


Dmat=Cov 
dvec=rep(0, nrow(Amat)) 

#The first two rows of Amat should be equality constraints (so weights
sum to 1) meq <- 2

sol <- solve.QP(Dmat=Dmat, dvec=dvec, Amat=Amat, bvec=bvec, meq) sol 
w.asset <- zapsmall(sol$solution) 
par(mfrow=c(1,2)) 
plot(w.asset, type="n") 
lines(w.asset, type="h") 
hist(w.asset) 

#test to see that we get the same result with portfolio.optim 
res<-portfolio.optim(S) 
wgt <- zapsmall(res$pw) 
cbind(w.asset, wgt) #shows both methods are equal 

Thanks,

Roger


On 7/11/05, KAHRA HANNU <hannu.kahra at mpsgr.it> wrote:
> Lorenzo,
> 
> Have a look at the portfolio.optim R code and how it applies solve.QP. Download the tseries version 1.9 package and unzip it. The tseries folder contains a folder called R that contains the tseries file. Have a look at the portfolio.optim function in the file.
> 
> Regards,
> 
> Hannu Kahra
> Progetti Speciali
> Monte Paschi Asset Management SGR S.p.A.
> Via San Vittore, 37
> IT-20123 Milano, Italia
> 
> Tel.: +39 02 43828 754
> Mobile: +39 333 876 1558
> Fax: +39 02 43828 247
> E-mail: hannu.kahra at mpsgr.it
> Web: www.mpsam.it
> 
> -----Original Message-----
> From: r-sig-finance-bounces at stat.math.ethz.ch [mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of L.Isella
> Sent: 10. hein?kuuta 2005 20:01
> To: r-sig-finance at stat.math.ethz.ch
> Subject: [R-sig-finance] Solve.QP
> 
> Dear All,
> I am starting to use R for portfolio optimization.
> I found the portfolio.optim package in tseries very useful, since it allows the user to use both the historical data to create the covariance matrix or to provide it directly.
> However, I would like not to simply use it as a black box. Portfolio.optim relies on solve.QP.
> Now, a typical problem in portfolio management is to minimize the variance of the portfolio:
> /frac{1}{2}W^T%*%CovMat%*%W,
> where CovMat is the covariance matrix of my portfolio, W is the vector of the (unknown) weights.
> The constraints are:
> \sum_i W_i=1 (the portfolio is totally invested)
> and
> \sum_i W_i\mu_i=\mu (\mu is the required variance of my portfolio, W_i and \mu_i the weight and the expected return of the i-th asset, respectively).
> Then I could e.g. impose W_i>=0 for all i (no short-selling allowed).
> Is it straightforward to implement these constraints on the weights as
> A%*%W>= b, where A is a matrix and b a vector?
> Maybe it is a naive question and I am just trying to re-invent the wheel, but I will be grateful to anyone who can help clarify these issues to me.
> Best Regards
> Lorenzo
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From janpaulr at yahoo.com  Thu Jul 14 16:44:50 2005
From: janpaulr at yahoo.com (Jan-Paul Roodbol)
Date: Thu, 14 Jul 2005 15:44:50 +0100 (BST)
Subject: [R-sig-finance] newbie
Message-ID: <20050714144450.36452.qmail@web40912.mail.yahoo.com>

Hi

I'm currently doing research into Industry Groupings
on Stock Exchanges.  Is R useful (and easy to use for
a non-programmer)?  

I have data of hundreds of shares, 5.5 years, monthly,
for 60 variables.  I want to investigate if the
industry groupings are indeed homogeneous
intra-groups, and heterogeneous between groups.  I
want to check this with some groupings before and
after reallocation of individual shares or regrouping
because of the International Classification Board
industry grouping roll-out.  I think I would compare
means and SDs.  Groupings are fairly small, most less
than 10 shares in each group.  

I have just started thinking about all of this - hope
it makes some sense at this stage?   

Is R the right tool for me?

Thank you in advance
jpr


From jgalt70 at yahoo.com  Thu Jul 14 20:41:32 2005
From: jgalt70 at yahoo.com (Andrew West)
Date: Thu, 14 Jul 2005 11:41:32 -0700 (PDT)
Subject: [R-sig-finance] newbie
In-Reply-To: <20050714144450.36452.qmail@web40912.mail.yahoo.com>
Message-ID: <20050714184132.36795.qmail@web60322.mail.yahoo.com>

Useful, yes. Easy for someone unable to learn any
code, probably not. However, if what you want to do
can be done using the R-commmander (Rcmdr) package (a
graphical user interface which does offer cluster
analysis and anova, among other things, from a drop
down menu), then you may not need to write any code.
And Rcmdr will write the underlying code for you, so
you can save it and reproduce your work the next day
without pointing and clicking another 30 times. Still,
even using Rcmdr, when I first started I had to do a
lot of reading and searching to figure out seemingly
simple tasks. It's worth the effort if you think you
will continue to do statistical analysis in the
future, and thus earn a return on you intitial
efforts.

--- Jan-Paul Roodbol <janpaulr at yahoo.com> wrote:

> Hi
> 
> I'm currently doing research into Industry Groupings
> on Stock Exchanges.  Is R useful (and easy to use
> for
> a non-programmer)?  
> 
> I have data of hundreds of shares, 5.5 years,
> monthly,
> for 60 variables.  I want to investigate if the
> industry groupings are indeed homogeneous
> intra-groups, and heterogeneous between groups.  I
> want to check this with some groupings before and
> after reallocation of individual shares or
> regrouping
> because of the International Classification Board
> industry grouping roll-out.  I think I would compare
> means and SDs.  Groupings are fairly small, most
> less
> than 10 shares in each group.  
> 
> I have just started thinking about all of this -
> hope
> it makes some sense at this stage?   
> 
> Is R the right tool for me?
> 
> Thank you in advance
> jpr
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From ilog at yoda.ing.unibs.it  Wed Jul 27 15:17:13 2005
From: ilog at yoda.ing.unibs.it (Nico)
Date: Wed, 27 Jul 2005 15:17:13 +0200
Subject: [R-sig-finance] Rmetrics Newbie
Message-ID: <42tuep$6u1os7@ibs01.interbusiness.it>

I'm very interested on Rmetrics for my university home-work: what I have to do is related to
time series analysis of interest rates.
With Rmetrics, can I compute the spot curve / forward rates starting from quoted instruments
(depos, futeres and swaps)? I don't find any references on this topics, so I hope in your
help...

Thanks in advance,
NC


From spencer.graves at pdf.com  Fri Jul 29 04:17:13 2005
From: spencer.graves at pdf.com (Spencer Graves)
Date: Thu, 28 Jul 2005 19:17:13 -0700
Subject: [R-sig-finance] Rmetrics Newbie
In-Reply-To: <42tuep$6u1os7@ibs01.interbusiness.it>
References: <42tuep$6u1os7@ibs01.interbusiness.it>
Message-ID: <42E991A9.9090008@pdf.com>

	  I can't answer your question directly, but a general problem solving 
method is provided in the posting guide, 
"http://www.R-project.org/posting-guide.html".  This describes many 
tools to help you find answers to your questions AND ways to formulate 
questions for r-help such that they are more likely to get a reply.  IF 
you more or less know the math involved, I encourage you to work through 
the posting guide with your question, and submit a restatement of your 
question to "r-help", preferably with some simple piece of code that you 
tried that didn't solve your problem, asking for help with the next 
step.  Please make your example small and completely self-contained, so 
someone can copy a few lines out of your email into R, try a few 
different things, and reply with what seemed to work for them.  (I 
suggest "r-help", since you already got zero response -- other than me 
-- from "R-sig-finance".)

	  I did a brief search for a couple of your key words and did not find 
anything.  However, I didn't try very hard, partly because it's not my 
problem and I have many other demands on my time, and partly because I 
didn't know enough to phrase your question in other terms that might 
produce an answer.

	  There may not be a function specifically designed to do exactly what 
you want.  However, R is a very flexible and powerful programming 
environment that should make it quite easy for you to write your own 
function to do what you want.  It is rapidly becoming the platform of 
choice for new statistical algorithm development internationally.  It 
has a moderately steep learning curve.  However, after you have a basic 
facility with the language -- and some skill in how to find things using 
"RSiteSearch", etc., you will have FREE access to some of the latest and 
greatest code for almost any statistical application.

	  spencer graves	

Nico wrote:

> I'm very interested on Rmetrics for my university home-work: what I have to do is related to
> time series analysis of interest rates.
> With Rmetrics, can I compute the spot curve / forward rates starting from quoted instruments
> (depos, futeres and swaps)? I don't find any references on this topics, so I hope in your
> help...
> 
> Thanks in advance,
> NC
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance

-- 
Spencer Graves, PhD
Senior Development Engineer
PDF Solutions, Inc.
333 West San Carlos Street Suite 700
San Jose, CA 95110, USA

spencer.graves at pdf.com
www.pdf.com <http://www.pdf.com>
Tel:  408-938-4420
Fax: 408-280-7915


From edd at debian.org  Fri Jul 29 04:46:04 2005
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 28 Jul 2005 21:46:04 -0500
Subject: [R-sig-finance] Rmetrics Newbie
In-Reply-To: <42E991A9.9090008@pdf.com>
References: <42tuep$6u1os7@ibs01.interbusiness.it> <42E991A9.9090008@pdf.com>
Message-ID: <17129.39020.4091.781554@basebud.nulle.part>


On 28 July 2005 at 19:17, Spencer Graves wrote:
| 	  There may not be a function specifically designed to do exactly what 
| you want.  However, R is a very flexible and powerful programming 

I think that is the case. However, Diethelm's Rmetrics project lists a module
'fBonds' as forthcoming so the situation may be improving in a little while.

| environment that should make it quite easy for you to write your own 
| function to do what you want.  It is rapidly becoming the platform of 
| choice for new statistical algorithm development internationally.  It 
| has a moderately steep learning curve.  However, after you have a basic 
| facility with the language -- and some skill in how to find things using 
| "RSiteSearch", etc., you will have FREE access to some of the latest and 
| greatest code for almost any statistical application.
| 
| 	  spencer graves	
| 
| Nico wrote:
| 
| > I'm very interested on Rmetrics for my university home-work: what I have to do is related to
| > time series analysis of interest rates.
| > With Rmetrics, can I compute the spot curve / forward rates starting from quoted instruments
| > (depos, futeres and swaps)? I don't find any references on this topics, so I hope in your
| > help...

fBonds should address. At the moment, I am not aware of any public code that
does that.

Regards, Dirk


-- 
Statistics: The (futile) attempt to offer certainty about uncertainty.
         -- Roger Koenker, 'Dictionary of Received Ideas of Statistics'


From ajayshah at mayin.org  Fri Jul 29 06:18:42 2005
From: ajayshah at mayin.org (Ajay Narottam Shah)
Date: Fri, 29 Jul 2005 09:48:42 +0530
Subject: [R-sig-finance] Rmetrics Newbie
In-Reply-To: <17129.39020.4091.781554@basebud.nulle.part>
References: <42tuep$6u1os7@ibs01.interbusiness.it> <42E991A9.9090008@pdf.com>
	<17129.39020.4091.781554@basebud.nulle.part>
Message-ID: <20050729041842.GN431@lubyanka.local>

> | > With Rmetrics, can I compute the spot curve / forward rates starting from quoted instruments
> | > (depos, futeres and swaps)? I don't find any references on this topics, so I hope in your
> | > help...
> 
> fBonds should address. At the moment, I am not aware of any public code that
> does that.

I have code which will estimate a zero-coupon yield curve of a given
functional form, by maximum-likelihood. It isn't the best of code, and
hence I have refrained from release. But if someone would like, I am
happy to share the code, and perhaps with some improvements it can be
ready for release.

-- 
Ajay Shah                                                   Consultant
ajayshah at mayin.org                      Department of Economic Affairs
http://www.mayin.org/ajayshah           Ministry of Finance, New Delhi


From L.Isella at myrealbox.com  Fri Jul 29 12:19:07 2005
From: L.Isella at myrealbox.com (L.Isella)
Date: Fri, 29 Jul 2005 10:19:07 +0000
Subject: [R-sig-finance] R and Prompt
Message-ID: <1122632347.8bdab8fcL.Isella@myrealbox.com>

Dear All,
I am starting to use R. I need to implement a script to do some basic portfolio optimization which can be used by people with no programming skills at all.
In order to do so, the user should be asked simply to input the name of the file containing the portfolio data (e.g. foo.dat), then R will read it, plus a few y/n as an answer to some questions about the contrains on the portfolio.
What is the syntax to do this in R? In the examples I found, the scripts always directly contained the names of the files to read.
Best Regards
Lorenzo


From ggrothendieck at gmail.com  Sat Jul 30 05:54:02 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 29 Jul 2005 23:54:02 -0400
Subject: [R-sig-finance] R and Prompt
In-Reply-To: <1122632347.8bdab8fcL.Isella@myrealbox.com>
References: <1122632347.8bdab8fcL.Isella@myrealbox.com>
Message-ID: <971536df05072920541c2b5779@mail.gmail.com>

Look at 

?file.choose
?select.list

On 7/29/05, L.Isella <L.Isella at myrealbox.com> wrote:
> Dear All,
> I am starting to use R. I need to implement a script to do some basic portfolio optimization which can be used by people with no programming skills at all.
> In order to do so, the user should be asked simply to input the name of the file containing the portfolio data (e.g. foo.dat), then R will read it, plus a few y/n as an answer to some questions about the contrains on the portfolio.
> What is the syntax to do this in R? In the examples I found, the scripts always directly contained the names of the files to read.
> Best Regards
> Lorenzo
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From august.petrillo at gmail.com  Sun Jul 31 21:07:37 2005
From: august.petrillo at gmail.com (August Petrillo)
Date: Sun, 31 Jul 2005 15:07:37 -0400
Subject: [R-sig-finance] Financial Beta calculation
Message-ID: <1f52c150507311207460c4df8@mail.gmail.com>

Hello all,

I am in the process of teaching myself R, for use in financial analysis.

I was wondering if anyone can point me towards an example R script or
towards example code to calculate beta.  I have read some of the R
documentation but I thought that being able to look at code that does
something I already understand would make it a lot easier to pick up
the R language.

Thanks for your time.

August


From ggrothendieck at gmail.com  Sun Jul 31 23:15:48 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sun, 31 Jul 2005 17:15:48 -0400
Subject: [R-sig-finance] Financial Beta calculation
In-Reply-To: <1f52c150507311207460c4df8@mail.gmail.com>
References: <1f52c150507311207460c4df8@mail.gmail.com>
Message-ID: <971536df05073114153c39086a@mail.gmail.com>

On 7/31/05, August Petrillo <august.petrillo at gmail.com> wrote:
> I was wondering if anyone can point me towards an example R script or
> towards example code to calculate beta.  I have read some of the R
> documentation but I thought that being able to look at code that does
> something I already understand would make it a lot easier to pick up
> the R language.


str(EuStockMarkets)  # describes data set included with R
summary(EuStockMarkets)  # summary statistics

logret <- diff(log(EuStockMarkets))  # log returns
logret[1:10,] # first 10 rows
euz.lm <- lm(DAX ~ FTSE, logret)  # regress logret of DAX wrt logret of FTSE
euz.lm  # beta is shown among output
summary(euz.lm) # more output
coef(euz.lm)[2]  # beta as a single number
cov(logret[,"DAX"], logret[,"FTSE"])/var(logret[,"FTSE"]) # another way

# graphics
plot(DAX ~ FTSE, logret)
abline(euz.lm, col = "red")
legend("topleft", c("data", "regression"), fill = c("black", "red"))


From roger.bos at gmail.com  Mon Aug  1 15:20:52 2005
From: roger.bos at gmail.com (roger bos)
Date: Mon, 1 Aug 2005 09:20:52 -0400
Subject: [R-sig-finance] R and Prompt
In-Reply-To: <971536df05072920541c2b5779@mail.gmail.com>
References: <1122632347.8bdab8fcL.Isella@myrealbox.com>
	<971536df05072920541c2b5779@mail.gmail.com>
Message-ID: <1db72680050801062044677999@mail.gmail.com>

Gabor suggestions will work, but I would also recommend looking at the
Rpad library.  Rpad allows a web page to communicate with R, so you
can design the page however you want and the users just puts in the
parameters and hits calculate.  In your approach, everyone who uses
the program would have to have R installed.  With Rpad, only the web
server has to have R and everyone else connects through the web page.

HTH,
Roger


On 7/29/05, Gabor Grothendieck <ggrothendieck at gmail.com> wrote:
> Look at
> 
> ?file.choose
> ?select.list
> 
> On 7/29/05, L.Isella <L.Isella at myrealbox.com> wrote:
> > Dear All,
> > I am starting to use R. I need to implement a script to do some basic portfolio optimization which can be used by people with no programming skills at all.
> > In order to do so, the user should be asked simply to input the name of the file containing the portfolio data (e.g. foo.dat), then R will read it, plus a few y/n as an answer to some questions about the contrains on the portfolio.
> > What is the syntax to do this in R? In the examples I found, the scripts always directly contained the names of the files to read.
> > Best Regards
> > Lorenzo
> >
> > _______________________________________________
> > R-sig-finance at stat.math.ethz.ch mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From spencer.graves at pdf.com  Fri Aug  5 17:42:17 2005
From: spencer.graves at pdf.com (Spencer Graves)
Date: Fri, 05 Aug 2005 08:42:17 -0700
Subject: [R-sig-finance] Set time zone environment variable to "GMT"?
Message-ID: <42F388D9.9090109@pdf.com>

	  How does one "set the time zone environment variable to 'GMT'" under 
Windows XP?  The fCalendar documentation says repeatedly that this is 
required, but Brian Ripley said it's impossible 
(http://finzi.psych.upenn.edu/R/Rhelp02a/archive/47054.html).

	  Thanks,
	  spencer graves
-- 
Spencer Graves, PhD
Senior Development Engineer
PDF Solutions, Inc.
333 West San Carlos Street Suite 700
San Jose, CA 95110, USA

spencer.graves at pdf.com
www.pdf.com <http://www.pdf.com>
Tel:  408-938-4420
Fax: 408-280-7915


From edd at debian.org  Fri Aug  5 19:30:33 2005
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri, 5 Aug 2005 17:30:33 +0000 (UTC)
Subject: [R-sig-finance] Set time zone environment variable to "GMT"?
References: <42F388D9.9090109@pdf.com>
Message-ID: <loom.20050805T192157-894@post.gmane.org>

Spencer Graves <spencer.graves <at> pdf.com> writes:

> 
> 	  How does one "set the time zone environment variable to 'GMT'" under 
> Windows XP?  The fCalendar documentation says repeatedly that this is 
> required, but Brian Ripley said it's impossible 
> (http://finzi.psych.upenn.edu/R/Rhelp02a/archive/47054.html).

One way is via 
   My Computer -> Properties -> Advanced -> Environment Variables
where you get to pick between User and System variables.

I tend to launch reasonable applications such as R from a bash shell in 
a Cygwin rxvt window.  In that case it works as it does on Unix/Linux:

~> echo 'print(Sys.getenv("TZ"))' | Rterm --slave
TZ 
"" 

~> export TZ="GMT"
~> echo 'print(Sys.getenv("TZ"))' | Rterm --slave
   TZ 
"GMT" 

Hth, Dirk


From ajayshah at mayin.org  Thu Aug 11 07:28:46 2005
From: ajayshah at mayin.org (Ajay Narottam Shah)
Date: Thu, 11 Aug 2005 10:58:46 +0530
Subject: [R-sig-finance] Puzzled on a granger causality situation
Message-ID: <20050811052846.GA5690@lubyanka.local>

This is not really an R question, but it will be great if someone can
help me understand the situation it will be great. :-)

I am doing a simple granger causality test in a bivariate setting,
with two variables named "fii" and "rM".

On one hand, when I use grangertest() from lmtest, I get:

      Model 1: fii ~ Lags(fii, 1:5) + Lags(rM, 1:5)
      Model 2: fii ~ Lags(fii, 1:5)
        Res.Df  Df      F  Pr(>F)  
      1    634                     
      2    639   5 2.5439 0.02718 *
  
      Model 1: rM ~ Lags(rM, 1:5) + Lags(fii, 1:5)
      Model 2: rM ~ Lags(rM, 1:5)
        Res.Df  Df      F Pr(>F)
      1    634                  
      2    639   5 1.2481 0.2850

which seems to suggest that `rM' does granger-cause `fii' but not the
over way around.

But, when I look at OLS estimates of a model explaining `rM', I get
something different. I am using the variable names like `rM.l2' for
"rM lagged by 2", and so on.

      Call:
      lm(formula = rM ~ rM.l1 + rM.l2 + rM.l3 + rM.l4 + rM.l5 + fii.l1 + 
          fii.l2 + fii.l3 + fii.l4 + fii.l5)
      
      Residuals:
           Min       1Q   Median       3Q      Max 
      -11.0345  -0.7043   0.1124   0.8122   8.1185 
      
      Coefficients:
                    Estimate Std. Error t value Pr(>|t|)    
      (Intercept)  8.914e-02  6.871e-02   1.297  0.19499    
      rM.l1        1.199e-01  4.034e-02   2.972  0.00307 ** 
      rM.l2       -1.618e-01  4.077e-02  -3.969 8.03e-05 ***
      rM.l3        5.857e-02  4.124e-02   1.420  0.15601    
      rM.l4        7.337e-02  4.070e-02   1.803  0.07192 .  
      rM.l5       -4.726e-02  4.065e-02  -1.163  0.24546    
      fii.l1       3.785e-04  1.874e-04   2.019  0.04389 *  
      fii.l2       8.979e-05  1.909e-04   0.470  0.63822    
      fii.l3      -6.184e-05  1.890e-04  -0.327  0.74366    
      fii.l4       1.075e-04  1.902e-04   0.565  0.57218    
      fii.l5      -2.272e-04  1.858e-04  -1.223  0.22186    
      ---
      Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 
      
      Residual standard error: 1.388 on 634 degrees of freedom
      Multiple R-Squared: 0.05906,	Adjusted R-squared: 0.04422 
      F-statistic:  3.98 on 10 and 634 DF,  p-value: 2.707e-05 

Here I see that the coefficient of fii.l1 is teetering on the edge of
significance (t=2.019).

My question is: Why is it that grangertest(), which is a joint test
of fii.l1=fii.l2=fii.l3=fii.l4=fii.l5=0, giving a different answer
from just looking at the coefficient fii.l1?

Finally, an R question: in the context of lm(), how does one do a test
of a set of general linear restrictions?

-- 
Ajay Shah                                                   Consultant
ajayshah at mayin.org                      Department of Economic Affairs
http://www.mayin.org/ajayshah           Ministry of Finance, New Delhi


From Achim.Zeileis at wu-wien.ac.at  Thu Aug 11 13:21:06 2005
From: Achim.Zeileis at wu-wien.ac.at (Achim Zeileis)
Date: Thu, 11 Aug 2005 13:21:06 +0200
Subject: [R-sig-finance] Puzzled on a granger causality situation
In-Reply-To: <20050811052846.GA5690@lubyanka.local>
References: <20050811052846.GA5690@lubyanka.local>
Message-ID: <20050811132106.37a366cb.Achim.Zeileis@wu-wien.ac.at>

On Thu, 11 Aug 2005 10:58:46 +0530 Ajay Narottam Shah wrote:

> This is not really an R question, but it will be great if someone can
> help me understand the situation it will be great. :-)
> 
> I am doing a simple granger causality test in a bivariate setting,
> with two variables named "fii" and "rM".
> 
> On one hand, when I use grangertest() from lmtest, I get:
> 
>       Model 1: fii ~ Lags(fii, 1:5) + Lags(rM, 1:5)
>       Model 2: fii ~ Lags(fii, 1:5)
>         Res.Df  Df      F  Pr(>F)  
>       1    634                     
>       2    639   5 2.5439 0.02718 *
>   
>       Model 1: rM ~ Lags(rM, 1:5) + Lags(fii, 1:5)
>       Model 2: rM ~ Lags(rM, 1:5)
>         Res.Df  Df      F Pr(>F)
>       1    634                  
>       2    639   5 1.2481 0.2850
> 
> which seems to suggest that `rM' does granger-cause `fii' but not the
> over way around.

Yap.
 
> But, when I look at OLS estimates of a model explaining `rM', I get
> something different. I am using the variable names like `rM.l2' for
> "rM lagged by 2", and so on.
> 
>       Call:
>       lm(formula = rM ~ rM.l1 + rM.l2 + rM.l3 + rM.l4 + rM.l5 + fii.l1
>       + 
>           fii.l2 + fii.l3 + fii.l4 + fii.l5)
>       
>       Residuals:
>            Min       1Q   Median       3Q      Max 
>       -11.0345  -0.7043   0.1124   0.8122   8.1185 
>       
>       Coefficients:
>                     Estimate Std. Error t value Pr(>|t|)    
>       (Intercept)  8.914e-02  6.871e-02   1.297  0.19499    
>       rM.l1        1.199e-01  4.034e-02   2.972  0.00307 ** 
>       rM.l2       -1.618e-01  4.077e-02  -3.969 8.03e-05 ***
>       rM.l3        5.857e-02  4.124e-02   1.420  0.15601    
>       rM.l4        7.337e-02  4.070e-02   1.803  0.07192 .  
>       rM.l5       -4.726e-02  4.065e-02  -1.163  0.24546    
>       fii.l1       3.785e-04  1.874e-04   2.019  0.04389 *  
>       fii.l2       8.979e-05  1.909e-04   0.470  0.63822    
>       fii.l3      -6.184e-05  1.890e-04  -0.327  0.74366    
>       fii.l4       1.075e-04  1.902e-04   0.565  0.57218    
>       fii.l5      -2.272e-04  1.858e-04  -1.223  0.22186    
>       ---
>       Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 
>       
>       Residual standard error: 1.388 on 634 degrees of freedom
>       Multiple R-Squared: 0.05906,	Adjusted R-squared: 0.04422 
>       F-statistic:  3.98 on 10 and 634 DF,  p-value: 2.707e-05 
> 
> Here I see that the coefficient of fii.l1 is teetering on the edge of
> significance (t=2.019).
> 
> My question is: Why is it that grangertest(), which is a joint test
> of fii.l1=fii.l2=fii.l3=fii.l4=fii.l5=0, giving a different answer
> from just looking at the coefficient fii.l1?

Because you ask a different question and you have to know whether this
question makes sense. In sloppy words: you want to know whether lag 1 is
significant given that lag 2-5 remain in the model even if they are
non-significant.
That lag 1-5 are not jointly significant is not very surprising given
that lag 2-5 seem to be clearly non-significant.

> Finally, an R question: in the context of lm(), how does one do a test
> of a set of general linear restrictions?

See linear.hypothesis() in package car.
Z


From snvk4u at gmail.com  Fri Aug 12 11:41:58 2005
From: snvk4u at gmail.com (Krishna)
Date: Fri, 12 Aug 2005 15:11:58 +0530
Subject: [R-sig-finance] help on optimal hedge variance ratio required
Message-ID: <139ef1c2050812024166ff597d@mail.gmail.com>

Hi everyone

I am trying to estimate the optimal hedge variance ratio for cross
hedging two commodities. the price levels are used (compared to price
change and % price change) and used the OLS with dummy variable for
estimating the co-efficients. the equation looks like this

Y = B + B1*D1 + B2*X + B3*(X*D1)

Where Y = Daily Cash market price
D1 = Dummy variable taking value 1 for period Oct-Mar and 0 for Apr-Sep
X = Daily futures market price on which cross hedging is done.
B,B1,B2,B3 are the slope co-efficients.

The results look like this
Regression Statistics
Multiple R              0.948702709
R Square                0.900036831
Adjusted R Square       0.89981135
Standard Error          25.52050965
Observations            1334


      Coefficients    Standard Error  t Stat  P-value
Intercept       53.817          4.375           12.300  0.000
X       0.986           0.012           80.283  0.000
D1      27.399          6.106           4.487   0.000
D1 * X  -0.100          0.017           -5.820  0.000

It is understood the slope co-efficients for different periods are
significant as indicated by t-table value. But I feel suspicious on
the reliability of this values.

I have used 5 years of daily price data for running the regression,
and I feel suscpicious becasue, the monthly correlations (pearson
correlation co-efficient) are highly varying between spot and futures
and some times even negative.

Can someone suggest me
a) the tests to judge the reliability of hedge-variance values
b) Is there any other better method than described here for estimating
the hedge-variance values

Thank you for the attention and look forward for an early reply

rgds

snvk


From a.trapletti at swissonline.ch  Fri Aug 12 13:16:42 2005
From: a.trapletti at swissonline.ch (Adrian Trapletti)
Date: Fri, 12 Aug 2005 13:16:42 +0200
Subject: [R-sig-finance] help on optimal hedge variance ratio required
Message-ID: <42FC851A.7080207@swissonline.ch>

>
>
>Hi everyone
>
>I am trying to estimate the optimal hedge variance ratio for cross
>hedging two commodities. the price levels are used (compared to price
>change and % price change) and used the OLS with dummy variable for
>estimating the co-efficients. the equation looks like this
>
>Y = B + B1*D1 + B2*X + B3*(X*D1)
>
>Where Y = Daily Cash market price
>D1 = Dummy variable taking value 1 for period Oct-Mar and 0 for Apr-Sep
>X = Daily futures market price on which cross hedging is done.
>B,B1,B2,B3 are the slope co-efficients.
>
>The results look like this
>Regression Statistics
>Multiple R              0.948702709
>R Square                0.900036831
>Adjusted R Square       0.89981135
>Standard Error          25.52050965
>Observations            1334
>
>
>      Coefficients    Standard Error  t Stat  P-value
>Intercept       53.817          4.375           12.300  0.000
>X       0.986           0.012           80.283  0.000
>D1      27.399          6.106           4.487   0.000
>D1 * X  -0.100          0.017           -5.820  0.000
>
>It is understood the slope co-efficients for different periods are
>significant as indicated by t-table value. But I feel suspicious on
>the reliability of this values.
>
>I have used 5 years of daily price data for running the regression,
>and I feel suscpicious becasue, the monthly correlations (pearson
>correlation co-efficient) are highly varying between spot and futures
>and some times even negative.
>
>Can someone suggest me
>a) the tests to judge the reliability of hedge-variance values
>b) Is there any other better method than described here for estimating
>the hedge-variance values
>
>Thank you for the attention and look forward for an early reply
>
>rgds
>
>snvk
>

I guess your results are highly affected by spurious regression. You 
should work with stationary variables such as the % price change and 
include knowledge about the relationship between spot and futures markets.

Best
Adrian

-- 
Adrian Trapletti
Wildsbergstrasse 31
8610 Uster
Switzerland

Phone :   +41 (0) 44 9945630
Mobile :  +41 (0) 76 3705631

Email :   a.trapletti at swissonline.ch


From snvk4u at gmail.com  Wed Aug 17 16:49:53 2005
From: snvk4u at gmail.com (Krishna)
Date: Wed, 17 Aug 2005 20:19:53 +0530
Subject: [R-sig-finance] optimal hedge variance ratio
Message-ID: <139ef1c205081707496cbd9db8@mail.gmail.com>

Hi All,

I am trying to finding out what could be an optimal hedge variance
ratio between spot and futures markets, between whose the degree of
correlation is highly varying.

For some reasons the hedge time period cannot extend for more than 1
month. So just to get an hint, I have calculated monthly correlation
coefficients which are highly varying. I am copying the frequency
distribution of monthly correlation coefficient values
(karl-pearsons') to indicating the degree of volatility.

Corre 
range	Frequency	
-0.7	0	0.00%
-0.5	2	3.08%
-0.3	3	4.62%
0	7	10.77%
0.3	7	10.77%
0.5	6	9.23%
0.7	16	24.62%
0.9	15	23.08%
1	9	13.85%

Can someone throw light on which model to use and how to approach for
desiging a hedge model (estimate hedge variance ratio) in such a
scenario. Help requested at the earliest.

thanks for the attention and best rgds

snvk


From gray.calhoun at gmail.com  Sun Aug 21 01:29:53 2005
From: gray.calhoun at gmail.com (Gray Calhoun)
Date: Sat, 20 Aug 2005 16:29:53 -0700
Subject: [R-sig-finance]  Generalized Method of Moments package for R?
Message-ID: <ff190454050820162967ead7b3@mail.gmail.com>

Hi,
  Are there R packages for Generalized Method of Moments?  I've
searched the help archives and help files without coming across
anything that looked appropriate, but I may have overlooked something.
 I know that there is Matlab software to do GMM, but I'm using Windows
so (I think) I can't use RMatlab.  I'd appreciate any suggestions
anyone might have.

Thanks,
Gray

-- 
Gray Calhoun

Economics Department
UC San Diego


From edd at debian.org  Sun Aug 21 03:22:12 2005
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 20 Aug 2005 20:22:12 -0500
Subject: [R-sig-finance] Generalized Method of Moments package for R?
In-Reply-To: <ff190454050820162967ead7b3@mail.gmail.com>
References: <ff190454050820162967ead7b3@mail.gmail.com>
Message-ID: <17159.55108.795412.332233@basebud.nulle.part>


Gray,

On 20 August 2005 at 16:29, Gray Calhoun wrote:
| Hi,
|   Are there R packages for Generalized Method of Moments?  I've
| searched the help archives and help files without coming across
| anything that looked appropriate, but I may have overlooked something.
|  I know that there is Matlab software to do GMM, but I'm using Windows
| so (I think) I can't use RMatlab.  I'd appreciate any suggestions
| anyone might have.

I am not aware of anything. It may be worthwhile putting a simple GMM package
together with some basic cases.

Regards, Dirk

-- 
Statistics: The (futile) attempt to offer certainty about uncertainty.
         -- Roger Koenker, 'Dictionary of Received Ideas of Statistics'


From jonathan.r.larkin at jpmorgan.com  Mon Aug 22 22:58:08 2005
From: jonathan.r.larkin at jpmorgan.com (jonathan.r.larkin@jpmorgan.com)
Date: Mon, 22 Aug 2005 16:58:08 -0400
Subject: [R-sig-finance] RDCOMClient libarary compatibility
Message-ID: <OFE2A7383A.88D37128-ON85257065.0072F045-85257065.00733024@jpmchase.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20050822/76a39b1c/attachment.pl

From AMurphy at russell.com  Tue Aug 23 01:35:16 2005
From: AMurphy at russell.com (Murphy, Aran (US-Inst_Research & Strategy))
Date: Mon, 22 Aug 2005 16:35:16 -0700
Subject: [R-sig-finance] RDCOMClient libarary compatibility
Message-ID: <7DF5E3A4B12E264DB4F2ECFA98E0FCBB71DEA7@MAIL001.prod.ds.russell.com>

Hello Jonathan,  I received the same error when loading RDCOMClient at
first but then I found and used a different source package - omegahat's
http://www.omegahat.org/RDCOMClient/ - this worked when loading it from
the Packages -> InstallPackage(s)FromLocal Zipfiles menu option.
Results: 

> require("RDCOMClient");
Loading required package: RDCOMClient
[1] TRUE
>  

Please post on how yours goes. Beyond this part I haven't gotten far. 

Cheers,
Aran Murphy

-----Original Message-----
From: r-sig-finance-bounces at stat.math.ethz.ch
[mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of
jonathan.r.larkin at jpmorgan.com
Sent: Monday, August 22, 2005 1:58 PM
To: r-sig-finance at stat.math.ethz.ch
Subject: [R-sig-finance] RDCOMClient libarary compatibility


I am using a v2.1.1 build of R on windows and am trying to use the 
RDCOMClient library to download data from Bloomberg. When I attempt to 
load the library I get the error message:

Error in library(RDCOMClient) : 'RDCOMClient' is not a valid package -- 
installed < 2.0.0?

Am I doing something completely stupid or is my RDCOMClient package 
outdated? Where can I get the latest package?

Thanks.
Jonathan

This communication is for informational purposes only. It is not
intended as an offer or solicitation for the purchase or sale of any
financial instrument or as an official confirmation of any transaction.
All market prices, data and other information are not warranted as to
completeness or accuracy and are subject to change without notice. Any
comments or statements made herein 
do not necessarily reflect those of JPMorgan Chase & Co., its
subsidiaries 
and affiliates.


	[[alternative HTML version deleted]]

_______________________________________________
R-sig-finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-------------- next part --------------
A non-text attachment was scrubbed...
Name: RDCOMClient_0.8-1.zip
Type: application/x-zip-compressed
Size: 223020 bytes
Desc: RDCOMClient_0.8-1.zip
Url : https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20050822/33d0bef1/RDCOMClient_0.8-1.bin

From jonathan.r.larkin at jpmorgan.com  Mon Aug 22 19:23:39 2005
From: jonathan.r.larkin at jpmorgan.com (jonathan.r.larkin@jpmorgan.com)
Date: Mon, 22 Aug 2005 13:23:39 -0400
Subject: [R-sig-finance]  Import from Bloomberg
Message-ID: <OFF5B65F8E.D2708EE6-ON85257065.0057BADA-85257065.005F8D43@jpmchase.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20050822/f6b73892/attachment.pl

From Jordi.Molins at drkw.com  Tue Aug 23 13:21:12 2005
From: Jordi.Molins at drkw.com (Molins, Jordi)
Date: Tue, 23 Aug 2005 13:21:12 +0200
Subject: [R-sig-finance] RDCOMClient libarary compatibility
Message-ID: <C5A76BA0CA4D734CA725124C4D6397AC8BFEB7@ibfftce502.de.ad.drkw.net>

Hi,

I have gone to  http://www.omegahat.org/RDCOMClient/, I have downloaded the
binary, and installed it through InstallPackage(s)FromLocal Zipfiles. but I
get the same error message as Jonathan. BTW, that web page was last modified
on 2003, and at least in the last minutes, the README.html and INSTALL.html
files are "not found".

Does anybody know what can we do about it? I also would like to learn how to
download data from Bloomberg using the RDCOMClient. Is there somebody else
who has tried that already?

Cheers

Jordi


> Message: 1
> Date: Mon, 22 Aug 2005 16:58:08 -0400
> From: jonathan.r.larkin at jpmorgan.com
> Subject: [R-sig-finance] RDCOMClient libarary compatibility
> To: r-sig-finance at stat.math.ethz.ch
> Message-ID:
> 	
> <OFE2A7383A.88D37128-ON85257065.0072F045-85257065.00733024 at jpm
> chase.com>
> 	
> Content-Type: text/plain
> 
> I am using a v2.1.1 build of R on windows and am trying to use the 
> RDCOMClient library to download data from Bloomberg. When I 
> attempt to 
> load the library I get the error message:
> 
> Error in library(RDCOMClient) : 'RDCOMClient' is not a valid 
> package -- 
> installed < 2.0.0?
> 
> Am I doing something completely stupid or is my RDCOMClient package 
> outdated? Where can I get the latest package?
> 
> Thanks.
> Jonathan
> 
> This communication is for informational purposes only. It is 
> not intended
> as an offer or solicitation for the purchase or sale of any financial
> instrument or as an official confirmation of any transaction. 
> All market prices,
> data and other information are not warranted as to 
> completeness or accuracy and
> are subject to change without notice. Any comments or 
> statements made herein 
> do not necessarily reflect those of JPMorgan Chase & Co., its 
> subsidiaries 
> and affiliates.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> 
> 
> ------------------------------
> 
> Message: 2
> Date: Mon, 22 Aug 2005 16:35:16 -0700
> From: "Murphy, Aran \(US-Inst_Research & Strategy\)"
> 	<AMurphy at russell.com>
> Subject: Re: [R-sig-finance] RDCOMClient libarary compatibility
> To: <jonathan.r.larkin at jpmorgan.com>
> Cc: r-sig-finance at stat.math.ethz.ch
> Message-ID:
> 	
> <7DF5E3A4B12E264DB4F2ECFA98E0FCBB71DEA7 at MAIL001.prod.ds.russell.com>
> Content-Type: text/plain; charset="us-ascii"
> 
> Hello Jonathan,  I received the same error when loading RDCOMClient at
> first but then I found and used a different source package - 
> omegahat's
> http://www.omegahat.org/RDCOMClient/ - this worked when 
> loading it from
> the Packages -> InstallPackage(s)FromLocal Zipfiles menu option.
> Results: 
> 
> > require("RDCOMClient");
> Loading required package: RDCOMClient
> [1] TRUE
> >  
> 
> Please post on how yours goes. Beyond this part I haven't gotten far. 
> 
> Cheers,
> Aran Murphy
> 
> -----Original Message-----
> From: r-sig-finance-bounces at stat.math.ethz.ch
> [mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of
> jonathan.r.larkin at jpmorgan.com
> Sent: Monday, August 22, 2005 1:58 PM
> To: r-sig-finance at stat.math.ethz.ch
> Subject: [R-sig-finance] RDCOMClient libarary compatibility
> 
> 
> I am using a v2.1.1 build of R on windows and am trying to use the 
> RDCOMClient library to download data from Bloomberg. When I 
> attempt to 
> load the library I get the error message:
> 
> Error in library(RDCOMClient) : 'RDCOMClient' is not a valid 
> package -- 
> installed < 2.0.0?
> 
> Am I doing something completely stupid or is my RDCOMClient package 
> outdated? Where can I get the latest package?
> 
> Thanks.
> Jonathan
> 
> This communication is for informational purposes only. It is not
> intended as an offer or solicitation for the purchase or sale of any
> financial instrument or as an official confirmation of any 
> transaction.
> All market prices, data and other information are not warranted as to
> completeness or accuracy and are subject to change without notice. Any
> comments or statements made herein 
> do not necessarily reflect those of JPMorgan Chase & Co., its
> subsidiaries 
> and affiliates.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -------------- next part --------------
> A non-text attachment was scrubbed...
> Name: RDCOMClient_0.8-1.zip
> Type: application/x-zip-compressed
> Size: 223020 bytes
> Desc: RDCOMClient_0.8-1.zip
> Url : 
> https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20050
822/33d0bef1/RDCOMClient_0.8-1-0001.bin

------------------------------

_______________________________________________
R-sig-finance mailing list
R-sig-finance at stat.math.ethz.ch
https://stat.ethz.ch/mailman/listinfo/r-sig-finance


End of R-sig-finance Digest, Vol 15, Issue 9
********************************************


--------------------------------------------------------------------------------
The information contained herein is confidential and is inte...{{dropped}}


From ggrothendieck at gmail.com  Tue Aug 23 13:39:11 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Tue, 23 Aug 2005 07:39:11 -0400
Subject: [R-sig-finance] RDCOMClient libarary compatibility
In-Reply-To: <C5A76BA0CA4D734CA725124C4D6397AC8BFEB7@ibfftce502.de.ad.drkw.net>
References: <C5A76BA0CA4D734CA725124C4D6397AC8BFEB7@ibfftce502.de.ad.drkw.net>
Message-ID: <971536df05082304392089ac06@mail.gmail.com>

If you include omegahat in your repository using the Package menu
at the top of RGui then you can just pick out RDCOMClient from
the list.  I do not use it with Bloomberg and have not seen this problem 
on my XP system but if you are stuck one possibility is to use the rcom
package instead.   The package and its mailing list are at the
following respectively:

http://sunsite.univie.ac.at/rcom/download/
http://mailman.csd.univie.ac.at/mailman/listinfo/rcom-l

There is a new version of rcom that only works on R 2.2+ which
has syntax that is very close to RDCOMClient and an older
version that works on R 2.1 but whose syntax differs somewhat.

On 8/23/05, Molins, Jordi <Jordi.Molins at drkw.com> wrote:
> Hi,
> 
> I have gone to  http://www.omegahat.org/RDCOMClient/, I have downloaded the
> binary, and installed it through InstallPackage(s)FromLocal Zipfiles. but I
> get the same error message as Jonathan. BTW, that web page was last modified
> on 2003, and at least in the last minutes, the README.html and INSTALL.html
> files are "not found".
> 
> Does anybody know what can we do about it? I also would like to learn how to
> download data from Bloomberg using the RDCOMClient. Is there somebody else
> who has tried that already?
> 
> Cheers
> 
> Jordi
> 
> 
> > Message: 1
> > Date: Mon, 22 Aug 2005 16:58:08 -0400
> > From: jonathan.r.larkin at jpmorgan.com
> > Subject: [R-sig-finance] RDCOMClient libarary compatibility
> > To: r-sig-finance at stat.math.ethz.ch
> > Message-ID:
> >
> > <OFE2A7383A.88D37128-ON85257065.0072F045-85257065.00733024 at jpm
> > chase.com>
> >
> > Content-Type: text/plain
> >
> > I am using a v2.1.1 build of R on windows and am trying to use the
> > RDCOMClient library to download data from Bloomberg. When I
> > attempt to
> > load the library I get the error message:
> >
> > Error in library(RDCOMClient) : 'RDCOMClient' is not a valid
> > package --
> > installed < 2.0.0?
> >
> > Am I doing something completely stupid or is my RDCOMClient package
> > outdated? Where can I get the latest package?
> >
> > Thanks.
> > Jonathan
> >
> > This communication is for informational purposes only. It is
> > not intended
> > as an offer or solicitation for the purchase or sale of any financial
> > instrument or as an official confirmation of any transaction.
> > All market prices,
> > data and other information are not warranted as to
> > completeness or accuracy and
> > are subject to change without notice. Any comments or
> > statements made herein
> > do not necessarily reflect those of JPMorgan Chase & Co., its
> > subsidiaries
> > and affiliates.
> >
> >
> >       [[alternative HTML version deleted]]
> >
> >
> >
> > ------------------------------
> >
> > Message: 2
> > Date: Mon, 22 Aug 2005 16:35:16 -0700
> > From: "Murphy, Aran \(US-Inst_Research & Strategy\)"
> >       <AMurphy at russell.com>
> > Subject: Re: [R-sig-finance] RDCOMClient libarary compatibility
> > To: <jonathan.r.larkin at jpmorgan.com>
> > Cc: r-sig-finance at stat.math.ethz.ch
> > Message-ID:
> >
> > <7DF5E3A4B12E264DB4F2ECFA98E0FCBB71DEA7 at MAIL001.prod.ds.russell.com>
> > Content-Type: text/plain; charset="us-ascii"
> >
> > Hello Jonathan,  I received the same error when loading RDCOMClient at
> > first but then I found and used a different source package -
> > omegahat's
> > http://www.omegahat.org/RDCOMClient/ - this worked when
> > loading it from
> > the Packages -> InstallPackage(s)FromLocal Zipfiles menu option.
> > Results:
> >
> > > require("RDCOMClient");
> > Loading required package: RDCOMClient
> > [1] TRUE
> > >
> >
> > Please post on how yours goes. Beyond this part I haven't gotten far.
> >
> > Cheers,
> > Aran Murphy
> >
> > -----Original Message-----
> > From: r-sig-finance-bounces at stat.math.ethz.ch
> > [mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of
> > jonathan.r.larkin at jpmorgan.com
> > Sent: Monday, August 22, 2005 1:58 PM
> > To: r-sig-finance at stat.math.ethz.ch
> > Subject: [R-sig-finance] RDCOMClient libarary compatibility
> >
> >
> > I am using a v2.1.1 build of R on windows and am trying to use the
> > RDCOMClient library to download data from Bloomberg. When I
> > attempt to
> > load the library I get the error message:
> >
> > Error in library(RDCOMClient) : 'RDCOMClient' is not a valid
> > package --
> > installed < 2.0.0?
> >
> > Am I doing something completely stupid or is my RDCOMClient package
> > outdated? Where can I get the latest package?
> >
> > Thanks.
> > Jonathan
> >
> > This communication is for informational purposes only. It is not
> > intended as an offer or solicitation for the purchase or sale of any
> > financial instrument or as an official confirmation of any
> > transaction.
> > All market prices, data and other information are not warranted as to
> > completeness or accuracy and are subject to change without notice. Any
> > comments or statements made herein
> > do not necessarily reflect those of JPMorgan Chase & Co., its
> > subsidiaries
> > and affiliates.
> >
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-finance at stat.math.ethz.ch mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -------------- next part --------------
> > A non-text attachment was scrubbed...
> > Name: RDCOMClient_0.8-1.zip
> > Type: application/x-zip-compressed
> > Size: 223020 bytes
> > Desc: RDCOMClient_0.8-1.zip
> > Url :
> > https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20050
> 822/33d0bef1/RDCOMClient_0.8-1-0001.bin
> 
> ------------------------------
> 
> _______________________________________________
> R-sig-finance mailing list
> R-sig-finance at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> 
> 
> End of R-sig-finance Digest, Vol 15, Issue 9
> ********************************************
> 
> 
> --------------------------------------------------------------------------------
> The information contained herein is confidential and is inte...{{dropped}}
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From jonathan.r.larkin at jpmorgan.com  Tue Aug 23 14:11:09 2005
From: jonathan.r.larkin at jpmorgan.com (jonathan.r.larkin@jpmorgan.com)
Date: Tue, 23 Aug 2005 08:11:09 -0400
Subject: [R-sig-finance] RDCOMClient libarary compatibility
Message-ID: <OFC6239AC4.045FEADF-ON85257066.004248A1-85257066.0042F0E4@jpmchase.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20050823/4104c8fd/attachment.pl

From ggrothendieck at gmail.com  Tue Aug 23 14:28:14 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Tue, 23 Aug 2005 08:28:14 -0400
Subject: [R-sig-finance] RDCOMClient libarary compatibility
In-Reply-To: <OFC6239AC4.045FEADF-ON85257066.004248A1-85257066.0042F0E4@jpmchase.com>
References: <OFC6239AC4.045FEADF-ON85257066.004248A1-85257066.0042F0E4@jpmchase.com>
Message-ID: <971536df050823052823174eda@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20050823/e3b7e095/attachment.pl

From mhirai at btm.com.br  Tue Aug 23 23:37:52 2005
From: mhirai at btm.com.br (Massato Hirai)
Date: Tue, 23 Aug 2005 18:37:52 -0300
Subject: [R-sig-finance] RDCOMClient libarary compatibility
In-Reply-To: <971536df050823052823174eda@mail.gmail.com>
Message-ID: <OF6138F374.F171472B-ON03257066.0076B07B-03257066.0076D2C0@btm.com.br>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20050823/6ddfe5ca/attachment.pl

From jgalt70 at yahoo.com  Thu Sep  1 20:24:31 2005
From: jgalt70 at yahoo.com (Andrew West)
Date: Thu, 1 Sep 2005 11:24:31 -0700 (PDT)
Subject: [R-sig-finance] function to calc Fama-French 3 factor model
Message-ID: <20050901182431.95328.qmail@web60324.mail.yahoo.com>

Hello,
I have written a function that downloads data from
Yahoo and Ken French's website to automatically
calculate a regular beta, a robust beta, and the betas
for the Fama-French 3-factor model, then using these
factor estimates to estimate various costs of equity
for the company. After pasting in the function, one
calls it by typing:
getffBeta("CSX") -for example to look at CSX

The function doesn't work however for companies whose
stock history doesn't go back to Jan 1991. I haven't
been able to figure out how to automatically set the
starts of the time series to adjust to short histories
in a get.hist.quote data download, mostly because I
cannot figure out how to connect dates from the
get.hist.quote data to the dating of ts objects. The
code also assumes a C: drive exists.

I am quite a novice programmer, and know that the code
is pretty poor, but may be still be worthwhile to
someone. Any improvements offered for the function's
code would be appreciated. It follows here:

getffBeta=function(tool) {
require(MASS);
require(tseries);
require(wle)
stock= (get.hist.quote(instrument = tool, quote =
c("Ad"),compression=?m?));
spx=(get.hist.quote(instrument = "^gspc", quote =
c("Ad"),compression=?m?));
today=Sys.Date()
seqmo=length(seq(as.Date("1926-07-01"),today,by="month"))-2
url=
?http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/ftp/F-F_Research_Data_Factors.zip?
destfile="C:\\F-F_Research_Data_Factors.zip"
dataff=download.file(url, destfile, mode=?wb?)
unzip=unz(destfile,"F-F_Research_Data_Factors.txt")
ff4 <- read.table(unzip, header=FALSE, sep="",
na.strings="NA", dec=".", strip.white=TRUE, skip=4,
nrows=seqmo)
ffdata <- ff4
attach(ffdata);
ffdata=ffdata/100
#find out starting year month for ffdata;
ffdatats=ts(ffdata, start=c(1926,7), frequency=12);
stock=ts(na.remove(stock), start=c(1991, 1),
frequency=12);
spx=ts(na.remove(spx), start=c(1991, 1),
frequency=12);
combined= na.remove(ts.union(stock,spx));
combreturn= na.remove(diff(log(combined)));
combreturn=ts(combreturn,
start=c(1991,2),frequency=12);
combined=na.remove(ts.intersect(combreturn,ffdatats),
names=c(?stockret?, ?spxret?, ?dates?,?ffmktret?,
?smb?,?hml?,?rf?));
combined[,1]=combined[,1]-combined[,7]
combined[,2]=combined[,2]-combined[,7]

simplereg=lm(combined[,1]~combined[,2]);
stockbeta=simplereg$coef[2];
textout=paste(?stock beta=?, stockbeta);
robustreg=wle.lm(combined[,1]~combined[,2]);
robstockbeta=robustreg$coef[2];
textout2=paste(?robust stock beta=?, robstockbeta);

plot(as.numeric(combined[,1])~as.numeric(combined[,2]),xlab=?S&P?,
ylab=tool)
title(main=textout, sub=list(textout2, col=?red?))
abline(coef(simplereg));
abline(coef(robustreg),col=?red?)
print(textout);
print(textout2);
ffreg=wle.lm(combined[,1]~combined[,4]+combined[,5]+combined[,6]);
ffbeta=ffreg$coef[2];
ffsmb=ffreg$coef[3];
ffhml=ffreg$coef[4] ;
textout3=paste(?robust ff beta=?,ffbeta) ;
textout4=paste(?robust ff smb=?,ffsmb) ;
textout5=paste(?robust ff hml=?,ffhml) ;
print(textout3) ;
print(textout4) ;
print(textout5) ;
rf=5
smb=1
hml=2
rm=5
ffcoe=rf+ffbeta*rm+ffsmb*smb+ffhml*hml
robcoe=rf+robstockbeta*rm
regcoe=rf+stockbeta*rm
textout6=paste(?regular coe=?,regcoe,? robustcoe=?,
robcoe)
textout7=paste(?Fama-French coe=?,ffcoe)
print(textout6)
print(textout7)
}


From edd at debian.org  Fri Sep  2 03:04:11 2005
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 1 Sep 2005 20:04:11 -0500
Subject: [R-sig-finance] function to calc Fama-French 3 factor model
In-Reply-To: <20050901182431.95328.qmail@web60324.mail.yahoo.com>
References: <20050901182431.95328.qmail@web60324.mail.yahoo.com>
Message-ID: <17175.42251.250660.170222@basebud.nulle.part>


On 1 September 2005 at 11:24, Andrew West wrote:
| Hello,
| I have written a function that downloads data from
| Yahoo and Ken French's website to automatically
| calculate a regular beta, a robust beta, and the betas
| for the Fama-French 3-factor model, then using these
| factor estimates to estimate various costs of equity
| for the company. After pasting in the function, one
| calls it by typing:
| getffBeta("CSX") -for example to look at CSX

Very nice, thanks for contributing that!

| The function doesn't work however for companies whose
| stock history doesn't go back to Jan 1991. I haven't
| been able to figure out how to automatically set the
| starts of the time series to adjust to short histories
| in a get.hist.quote data download, mostly because I
| cannot figure out how to connect dates from the
| get.hist.quote data to the dating of ts objects. The

I would use the zoo class as the container, and possibly (if you stick to the
montly resolution) use the zooreg class from the zoo package. There is ample
documentation in the zoo package, have a look and don't hesitate to ask here
if you need help.

| code also assumes a C: drive exists.

Naa, for that you want tempfile() which will also keep it portable and
cross-platform.  Moreover, you probably want to cache the Fama/French file to
not have to download it for each equity.
 
| I am quite a novice programmer, and know that the code
| is pretty poor, but may be still be worthwhile to
| someone. Any improvements offered for the function's
| code would be appreciated. It follows here:

And you may want to use a real R/S-aware editor such as ESS for Emacs (which
is happy on Windoze too) to get auto-indentation. And a lot more in the case
of ESS.

Time permitting, I may have a stab at your function. I can't promise that I
get to it, though.

Regards, Dirk

-- 
Statistics: The (futile) attempt to offer certainty about uncertainty.
         -- Roger Koenker, 'Dictionary of Received Ideas of Statistics'


From ggrothendieck at gmail.com  Fri Sep  2 17:00:10 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 2 Sep 2005 11:00:10 -0400
Subject: [R-sig-finance] function to calc Fama-French 3 factor model
In-Reply-To: <20050901182431.95328.qmail@web60324.mail.yahoo.com>
References: <20050901182431.95328.qmail@web60324.mail.yahoo.com>
Message-ID: <971536df050902080062a81935@mail.gmail.com>

First load the zoo package so that we can use some of its
date handling facilities: 

- zoo includes an extra as.Date method, not in base, that 
  will convert daily numeric series that are represented
  as the number of days since the Date class' origin
  to Date class

- zoo includes a new date class, yearmon, that represents
  monthly time series using the same internal representation
  that ts uses (for easy conversion)

First download the quotes specifying (1) monthly quotes and
that the origin is to be the Date class origin.

Now extract the data part from ibm.ts.0 using the coredata
function in zoo and omit the missing values.  To get the
start date convert the numeric ts start date to Date class
(which we can do since we specified the origin consistently)
and from that convert it to yearmon class.  Finally get the
numeric representation of the start date, which is what
ts uses.

library(tseries)
library(zoo) 
ibm.ts.0 <- get.hist.quote("cryp", compression = "m", origin = as.Date(0))
ibm.ts <- ts( na.omit(coredata(ibm.ts.0)), frequency = 12,
	start = as.numeric(as.yearmon(as.Date(start(ibm.ts.0)[1]))) )


On 9/1/05, Andrew West <jgalt70 at yahoo.com> wrote:
> Hello,
> I have written a function that downloads data from
> Yahoo and Ken French's website to automatically
> calculate a regular beta, a robust beta, and the betas
> for the Fama-French 3-factor model, then using these
> factor estimates to estimate various costs of equity
> for the company. After pasting in the function, one
> calls it by typing:
> getffBeta("CSX") -for example to look at CSX
> 
> The function doesn't work however for companies whose
> stock history doesn't go back to Jan 1991. I haven't
> been able to figure out how to automatically set the
> starts of the time series to adjust to short histories
> in a get.hist.quote data download, mostly because I
> cannot figure out how to connect dates from the
> get.hist.quote data to the dating of ts objects. The
> code also assumes a C: drive exists.
> 
> I am quite a novice programmer, and know that the code
> is pretty poor, but may be still be worthwhile to
> someone. Any improvements offered for the function's
> code would be appreciated. It follows here:
> 
> getffBeta=function(tool) {
> require(MASS);
> require(tseries);
> require(wle)
> stock= (get.hist.quote(instrument = tool, quote =
> c("Ad"),compression="m"));
> spx=(get.hist.quote(instrument = "^gspc", quote =
> c("Ad"),compression="m"));
> today=Sys.Date()
> seqmo=length(seq(as.Date("1926-07-01"),today,by="month"))-2
> url=
> "http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/ftp/F-F_Research_Data_Factors.zip"
> destfile="C:\\F-F_Research_Data_Factors.zip"
> dataff=download.file(url, destfile, mode='wb')
> unzip=unz(destfile,"F-F_Research_Data_Factors.txt")
> ff4 <- read.table(unzip, header=FALSE, sep="",
> na.strings="NA", dec=".", strip.white=TRUE, skip=4,
> nrows=seqmo)
> ffdata <- ff4
> attach(ffdata);
> ffdata=ffdata/100
> #find out starting year month for ffdata;
> ffdatats=ts(ffdata, start=c(1926,7), frequency=12);
> stock=ts(na.remove(stock), start=c(1991, 1),
> frequency=12);
> spx=ts(na.remove(spx), start=c(1991, 1),
> frequency=12);
> combined= na.remove(ts.union(stock,spx));
> combreturn= na.remove(diff(log(combined)));
> combreturn=ts(combreturn,
> start=c(1991,2),frequency=12);
> combined=na.remove(ts.intersect(combreturn,ffdatats),
> names=c("stockret", "spxret", "dates","ffmktret",
> "smb","hml","rf"));
> combined[,1]=combined[,1]-combined[,7]
> combined[,2]=combined[,2]-combined[,7]
> 
> simplereg=lm(combined[,1]~combined[,2]);
> stockbeta=simplereg$coef[2];
> textout=paste("stock beta=", stockbeta);
> robustreg=wle.lm(combined[,1]~combined[,2]);
> robstockbeta=robustreg$coef[2];
> textout2=paste("robust stock beta=", robstockbeta);
> 
> plot(as.numeric(combined[,1])~as.numeric(combined[,2]),xlab="S&P",
> ylab=tool)
> title(main=textout, sub=list(textout2, col="red"))
> abline(coef(simplereg));
> abline(coef(robustreg),col="red")
> print(textout);
> print(textout2);
> ffreg=wle.lm(combined[,1]~combined[,4]+combined[,5]+combined[,6]);
> ffbeta=ffreg$coef[2];
> ffsmb=ffreg$coef[3];
> ffhml=ffreg$coef[4] ;
> textout3=paste('robust ff beta=',ffbeta) ;
> textout4=paste('robust ff smb=',ffsmb) ;
> textout5=paste('robust ff hml=',ffhml) ;
> print(textout3) ;
> print(textout4) ;
> print(textout5) ;
> rf=5
> smb=1
> hml=2
> rm=5
> ffcoe=rf+ffbeta*rm+ffsmb*smb+ffhml*hml
> robcoe=rf+robstockbeta*rm
> regcoe=rf+stockbeta*rm
> textout6=paste('regular coe=',regcoe,' robustcoe=',
> robcoe)
> textout7=paste('Fama-French coe=',ffcoe)
> print(textout6)
> print(textout7)
> }
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From ajayshah at mayin.org  Mon Sep  5 08:29:50 2005
From: ajayshah at mayin.org (Ajay Narottam Shah)
Date: Mon, 5 Sep 2005 11:59:50 +0530
Subject: [R-sig-finance] Bug report for get.hist.quote()
Message-ID: <20050905062950.GS350@lubyanka.local>

I just installed the newest tseries package. I get one wrong error message:

> x <- get.hist.quote(instrument = "GBP/USD", provider = "oanda", start="1900-01-01", end="1900-12-31")
trying URL 'http://www.oanda.com/convert/fxhistory?lang=en&date1=01%2F01%2F1900&date=12%2F31%2F1900&date_fmt=us&exch=GBP&exch2=&expr=USD&expr2=&margin_fixed=0&&SUBMIT=Get+Table&format=ASCII&redirected=1'
Content type 'text/html' length unknown
opened URL
.......... .
downloaded 11Kb

Error in get.hist.quote(instrument = "GBP/USD", provider = "oanda", start = "1900-01-01",  : 
        time period is too big (maximum 2000 days can be downloaded)


-- 
Ajay Shah                                                   Consultant
ajayshah at mayin.org                      Department of Economic Affairs
http://www.mayin.org/ajayshah           Ministry of Finance, New Delhi


From mkeller at fam.tuwien.ac.at  Mon Sep  5 10:55:51 2005
From: mkeller at fam.tuwien.ac.at (Martin Keller-Ressel)
Date: Mon, 05 Sep 2005 08:55:51 -0000
Subject: [R-sig-finance] Bug report for get.hist.quote()
In-Reply-To: <20050905062950.GS350@lubyanka.local>
References: <20050905062950.GS350@lubyanka.local>
Message-ID: <op.swmgfddh0efqu7@neyman.fam.tuwien.ac.at>

Why should this be a bug?? The error message clearly says what the problem  
is:
"time period is too big (maximum 2000 days can be downloaded)"
I dont know whether this restriction is due to the data provider or to the  
package,
but why not try a shorter time period or download the data in chunks?

best regards,

Martin Keller-Ressel


On Mon, 05 Sep 2005 06:29:50 -0000, Ajay Narottam Shah  
<ajayshah at mayin.org> wrote:

> I just installed the newest tseries package. I get one wrong error  
> message:
>
>> x <- get.hist.quote(instrument = "GBP/USD", provider = "oanda",  
>> start="1900-01-01", end="1900-12-31")
> trying URL  
> 'http://www.oanda.com/convert/fxhistory?lang=en&date1=01%2F01%2F1900&date=12%2F31%2F1900&date_fmt=us&exch=GBP&exch2=&expr=USD&expr2=&margin_fixed=0&&SUBMIT=Get+Table&format=ASCII&redirected=1'
> Content type 'text/html' length unknown
> opened URL
> .......... .
> downloaded 11Kb
>
> Error in get.hist.quote(instrument = "GBP/USD", provider = "oanda",  
> start = "1900-01-01",  :
>         time period is too big (maximum 2000 days can be downloaded)
>
>



-- 
Martin Keller-Ressel
Research Unit of Financial and Actuarial Mathematics
TU Vienna


From ajayshah at mayin.org  Mon Sep  5 09:51:15 2005
From: ajayshah at mayin.org (Ajay Narottam Shah)
Date: Mon, 5 Sep 2005 13:21:15 +0530
Subject: [R-sig-finance] Bug report for get.hist.quote()
In-Reply-To: <op.swmgfddh0efqu7@neyman.fam.tuwien.ac.at>
References: <20050905062950.GS350@lubyanka.local>
	<op.swmgfddh0efqu7@neyman.fam.tuwien.ac.at>
Message-ID: <20050905075115.GA350@lubyanka.local>

On Mon, Sep 05, 2005 at 08:55:51AM -0000, Martin Keller-Ressel wrote:
> Why should this be a bug?? The error message clearly says what the problem  
> is:
> "time period is too big (maximum 2000 days can be downloaded)"
> I dont know whether this restriction is due to the data provider or to the  
> package,
> but why not try a shorter time period or download the data in chunks?

My dates were: From 1 Jan 1900 till 31 Jan 1900. So it's not 2000 days.

> >>x <- get.hist.quote(instrument = "GBP/USD", provider = "oanda",  
> >>start="1900-01-01", end="1900-12-31")
> >trying URL  
> >'http://www.oanda.com/convert/fxhistory?lang=en&date1=01%2F01%2F1900&date=12%2F31%2F1900&date_fmt=us&exch=GBP&exch2=&expr=USD&expr2=&margin_fixed=0&&SUBMIT=Get+Table&format=ASCII&redirected=1'
> >Content type 'text/html' length unknown
> >opened URL
> >.......... .
> >downloaded 11Kb
> >
> >Error in get.hist.quote(instrument = "GBP/USD", provider = "oanda",  
> >start = "1900-01-01",  :
> >        time period is too big (maximum 2000 days can be downloaded)

-- 
Ajay Shah                                                   Consultant
ajayshah at mayin.org                      Department of Economic Affairs
http://www.mayin.org/ajayshah           Ministry of Finance, New Delhi


From mkeller at fam.tuwien.ac.at  Mon Sep  5 11:15:26 2005
From: mkeller at fam.tuwien.ac.at (Martin Keller-Ressel)
Date: Mon, 05 Sep 2005 09:15:26 -0000
Subject: [R-sig-finance] Bug report for get.hist.quote()
In-Reply-To: <20050905075115.GA350@lubyanka.local>
References: <20050905062950.GS350@lubyanka.local>
	<op.swmgfddh0efqu7@neyman.fam.tuwien.ac.at>
	<20050905075115.GA350@lubyanka.local>
Message-ID: <op.swmhb0fz0efqu7@neyman.fam.tuwien.ac.at>

Sorry for my rash reply... you are right this is a bug.

regards,
Martin Keller-Ressl


On Mon, 05 Sep 2005 07:51:15 -0000, Ajay Narottam Shah  
<ajayshah at mayin.org> wrote:

> On Mon, Sep 05, 2005 at 08:55:51AM -0000, Martin Keller-Ressel wrote:
>> Why should this be a bug?? The error message clearly says what the  
>> problem
>> is:
>> "time period is too big (maximum 2000 days can be downloaded)"
>> I dont know whether this restriction is due to the data provider or to  
>> the
>> package,
>> but why not try a shorter time period or download the data in chunks?
>
> My dates were: From 1 Jan 1900 till 31 Jan 1900. So it's not 2000 days.
>
>> >>x <- get.hist.quote(instrument = "GBP/USD", provider = "oanda",
>> >>start="1900-01-01", end="1900-12-31")
>> >trying URL
>> >'http://www.oanda.com/convert/fxhistory?lang=en&date1=01%2F01%2F1900&date=12%2F31%2F1900&date_fmt=us&exch=GBP&exch2=&expr=USD&expr2=&margin_fixed=0&&SUBMIT=Get+Table&format=ASCII&redirected=1'
>> >Content type 'text/html' length unknown
>> >opened URL
>> >.......... .
>> >downloaded 11Kb
>> >
>> >Error in get.hist.quote(instrument = "GBP/USD", provider = "oanda",
>> >start = "1900-01-01",  :
>> >        time period is too big (maximum 2000 days can be downloaded)
>



-- 
Martin Keller-Ressel
Research Unit of Financial and Actuarial Mathematics
TU Vienna


From a.trapletti at swissonline.ch  Mon Sep  5 12:44:27 2005
From: a.trapletti at swissonline.ch (Adrian Trapletti)
Date: Mon, 05 Sep 2005 12:44:27 +0200
Subject: [R-sig-finance] Bug report for get.hist.quote()
Message-ID: <431C218B.9010801@swissonline.ch>

>
>
>Message: 1
>Date: Mon, 5 Sep 2005 11:59:50 +0530
>From: Ajay Narottam Shah <ajayshah at mayin.org>
>Subject: [R-sig-finance] Bug report for get.hist.quote()
>To: r-sig-finance <r-sig-finance at stat.math.ethz.ch>
>Message-ID: <20050905062950.GS350 at lubyanka.local>
>Content-Type: text/plain; charset=us-ascii
>
>I just installed the newest tseries package. I get one wrong error message:
>
>  
>
>>> x <- get.hist.quote(instrument = "GBP/USD", provider = "oanda", start="1900-01-01", end="1900-12-31")
>>    
>>
>trying URL 'http://www.oanda.com/convert/fxhistory?lang=en&date1=01%2F01%2F1900&date=12%2F31%2F1900&date_fmt=us&exch=GBP&exch2=&expr=USD&expr2=&margin_fixed=0&&SUBMIT=Get+Table&format=ASCII&redirected=1'
>Content type 'text/html' length unknown
>opened URL
>.......... .
>downloaded 11Kb
>
>Error in get.hist.quote(instrument = "GBP/USD", provider = "oanda", start = "1900-01-01",  : 
>        time period is too big (maximum 2000 days can be downloaded)
>
>
> -- Ajay Shah Consultant ajayshah at mayin.org Department of Economic 
> Affairs http://www.mayin.org/ajayshah Ministry of Finance, New Delhi
>
This is not a real bug, just a bit an unclear error message for this 
kind of situation. Retry with

start="1990-01-01", end="1990-12-31" 

for example.I will improve the error message. Thx for the report.

Best regards
Adrian


From jgalt70 at yahoo.com  Thu Sep  8 15:43:10 2005
From: jgalt70 at yahoo.com (Andrew West)
Date: Thu, 8 Sep 2005 06:43:10 -0700 (PDT)
Subject: [R-sig-finance] function to calc Fama-French 3 factor model
In-Reply-To: <971536df050902080062a81935@mail.gmail.com>
Message-ID: <20050908134310.90245.qmail@web60319.mail.yahoo.com>

Thanks to Gabor and Dirk, I think I fixed some of the
worst problems, but then continued on to add new
output, perhaps intoroducing new problems.

I added an extra plot showing fits vs. actual returns
for the 2 models (CAPM & FamaFrench), and added a test
of AIC scores for the 2 models, resulting in a
statement of which is the better model for the stock.

For a good example of why using Fama French for COE
estimation might be a good idea, try:
getffBeta("DUK")

Notes of minor frustrations: 
1.Couldn't figure out how to extract a single AIC for
a WLE model, or pull an Adj. R2 from a WLE summary.
(could get AIC in best subsets form, but that's not
the same thing, so had to do AIC comparisons on LM
models)

2. Couldn't figure out how to convince a "pairs" plot
to share a window with another plot (tried par,
split.screen).

3. Was hoping that the strucchange package could
automatically show me time-varying coefficients, but
somehow the plot outputs of efp(type="ME" or "RE",
functional=NULL) didn't correspond to what I thought
it might, (rolling window coefficient estimates, which
I've done before but which is another lengthy
procedure).

4. It would be nice to offer a choice of more verbose
output, e.g. with model summaries. 

5. It would be nice to only download the Fama-French
data once per session.

I also haven't acquired/learned a substitute for
MSWord for code editing, thus the function paste below
may need reformatting to avoid inappropriate line
breaks.

Here's the code:

getffBeta=function(tool) {
require(MASS);
require(tseries);
require(wle)
require(zoo)
stock= (get.hist.quote(instrument = tool, quote
=c("Ad"),compression="m",origin=as.Date(0)));
spx=(get.hist.quote(instrument = "^gspc", quote
=c("Ad"),compression="m",origin=as.Date(0)));
today=Sys.Date();
seqmo=length(seq(as.Date("1926-07-01"),today,by="month"))-2;
url="http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/ftp/F-F_Research_Data_Factors.zip";
destfile=tempfile();
dataff=download.file(url, destfile, mode='wb');
unzip=unz(destfile,"F-F_Research_Data_Factors.txt");
ff4 <- read.table(unzip, header=FALSE,
sep="",na.strings="NA", dec=".", strip.white=TRUE,
skip=4,nrows=seqmo)
ffdata <- ff4
attach(ffdata);
ffdata=ffdata/100
#find out starting year month for ffdata;
ffdatats=ts(ffdata, start=c(1926,7), frequency=12);
stock=ts(na.omit(coredata(stock)), start=
as.numeric(as.yearmon(as.Date(start(stock)[1]))),
frequency=12);
spx=ts(na.remove(spx), start=
as.numeric(as.yearmon(as.Date(start(spx)[1]))),
frequency=12);
combined= na.remove(ts.union(stock,spx));
combreturn= na.remove(diff(log(combined)));
combined=na.remove(ts.intersect(combreturn,ffdatats),
names=list("stockret", "spxret",
"dates","ffmktret","smb","hml","rf"));
combined[,1]=combined[,1]-combined[,7]
combined[,2]=combined[,2]-combined[,7]

simplereg=lm(combined[,1]~combined[,2]);
stockbeta=simplereg$coef[2];
textout=paste("CAPM beta=", stockbeta);
robustreg=wle.lm(combined[,1]~combined[,2]);
robstockbeta=robustreg$coef[2];
textout2=paste("robust stock beta=", robstockbeta);

plot(as.numeric(combined[,1])~as.numeric(combined[,2]),xlab="S&P",
ylab=tool)
title(main=textout, sub=list(textout2, col="red"))
abline(coef(simplereg));
abline(coef(robustreg),col="red")

print(textout);
print(textout2);
ffreg=wle.lm(combined[,1]~combined[,4]+combined[,5]+combined[,6]);
ffbeta=ffreg$coef[2];
ffsmb=ffreg$coef[3];
ffhml=ffreg$coef[4] ;
textout3=paste('robust ff beta=',ffbeta) ;
textout4=paste('robust ff smb=',ffsmb) ;
textout5=paste('robust ff hml=',ffhml) ;
print(textout3) ;
print(textout4) ;
print(textout5) ;
rf=5
smb=1
hml=2
rm=5
ffcoe=rf+ffbeta*rm+ffsmb*smb+ffhml*hml
robcoe=rf+robstockbeta*rm
regcoe=rf+stockbeta*rm
textout6=paste('regular coe=',regcoe,' robustcoe=',
robcoe)
textout7=paste('Fama-French coe=',ffcoe)
print(textout6)
print(textout7) ;
ffreg2=lm(combined[,1]~combined[,4]+combined[,5]+combined[,6]);

a1=as.vector(combined[,1])
b1=as.vector(ffreg2$fitted)
c1=as.vector(simplereg$fitted)
plot3= (data.frame(a1,b1,c1))
win.graph()
panel.cor <- function(x, y, digits=2, prefix="",
cex.cor)
      {
          usr <- par("usr"); on.exit(par(usr))
          par(usr = c(0, 1, 0, 1))
          r <- abs(cor(x, y))
          txt <- format(c(r, 0.123456789),
digits=digits)[1]
          txt <- paste(prefix, txt, sep="")
          if(missing(cex.cor)) cex <-
0.8/strwidth(txt)
          text(0.5, 0.5, txt, cex = cex * r)
      }
pairs(plot3, upper.panel=panel.cor,labels=c("stock
returns","FF fits","CAPM fits"))


ffreg2=lm(combined[,1]~combined[,4]+combined[,5]+combined[,6]);
if((AIC(simplereg))<(AIC(ffreg2))) "CAPM superior to
FF" else "FF superior to CAPM";
}


From janpaulr at yahoo.com  Sat Sep 10 20:10:06 2005
From: janpaulr at yahoo.com (Jan-Paul Roodbol)
Date: Sat, 10 Sep 2005 19:10:06 +0100 (BST)
Subject: [R-sig-finance] Missing
Message-ID: <20050910181006.79300.qmail@web36201.mail.mud.yahoo.com>

Does anyone know if randomForest in R can handle
dataset with missings?

Thank you

Kind regards

Jan-Paul


From spencer.graves at pdf.com  Sun Sep 11 02:34:26 2005
From: spencer.graves at pdf.com (Spencer Graves)
Date: Sat, 10 Sep 2005 17:34:26 -0700
Subject: [R-sig-finance] function to calc Fama-French 3 factor model
In-Reply-To: <20050908134310.90245.qmail@web60319.mail.yahoo.com>
References: <20050908134310.90245.qmail@web60319.mail.yahoo.com>
Message-ID: <43237B92.8040505@pdf.com>

(see comments inline)

Andrew West wrote:

> Thanks to Gabor and Dirk, I think I fixed some of the
> worst problems, but then continued on to add new
> output, perhaps intoroducing new problems.
> 
> I added an extra plot showing fits vs. actual returns
> for the 2 models (CAPM & FamaFrench), and added a test
> of AIC scores for the 2 models, resulting in a
> statement of which is the better model for the stock.
> 
> For a good example of why using Fama French for COE
> estimation might be a good idea, try:
> getffBeta("DUK")
> 
> Notes of minor frustrations: 
> 1.Couldn't figure out how to extract a single AIC for
> a WLE model, 

	  In the output from help.search("AIC"), I saw "wle.aic".  After your 
line 'robustreg=wle.lm(combined[,1]~combined[,2])', I tried the following:

 >   wle.aic(robustreg)

Call:
wle.aic(formula = robustreg)


Weighted Akaike Information Criterion (WAIC):
      (Intercept) combined[, 2]   waic
[1,]           1             1 -478.0
[2,]           1             0 -477.0
[3,]           0             1 -476.5

Printed the first  3  best models

or pull an Adj. R2 from a WLE summary.
> (could get AIC in best subsets form, but that's not
> the same thing, so had to do AIC comparisons on LM
> models)
> 
	  I'm not sure what you are asking here.  I did the following:

 > str(summary(robustreg))
List of 1
  $ :List of 10
   ..$ call         : language wle.lm(formula = combined[, 1] ~
<snip>
   ..$ adj.r.squared: num 0.0119
<snip>

	  This led me to the following:
 > summary(robustreg)[[1]]$adj.r.squared
[1] 0.01192491
 >
	  If this is not what you are asking, please provide a much smaller 
"toy" example to try to clarify your question.

> 2. Couldn't figure out how to convince a "pairs" plot
> to share a window with another plot (tried par,
> split.screen).
> 
	  A more specific toy example might produce a quick and effective 
solution.  Ditto for your other questions.

	  I know this doesn't answer all your questions, but I hope you some of 
it helpful.

	  spencer graves

> 3. Was hoping that the strucchange package could
> automatically show me time-varying coefficients, but
> somehow the plot outputs of efp(type="ME" or "RE",
> functional=NULL) didn't correspond to what I thought
> it might, (rolling window coefficient estimates, which
> I've done before but which is another lengthy
> procedure).
> 
> 4. It would be nice to offer a choice of more verbose
> output, e.g. with model summaries. 
> 
> 5. It would be nice to only download the Fama-French
> data once per session.
> 
> I also haven't acquired/learned a substitute for
> MSWord for code editing, thus the function paste below
> may need reformatting to avoid inappropriate line
> breaks.
> 
> Here's the code:
> 
> getffBeta=function(tool) {
> require(MASS);
> require(tseries);
> require(wle)
> require(zoo)
> stock= (get.hist.quote(instrument = tool, quote
> =c("Ad"),compression="m",origin=as.Date(0)));
> spx=(get.hist.quote(instrument = "^gspc", quote
> =c("Ad"),compression="m",origin=as.Date(0)));
> today=Sys.Date();
> seqmo=length(seq(as.Date("1926-07-01"),today,by="month"))-2;
> url="http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/ftp/F-F_Research_Data_Factors.zip";
> destfile=tempfile();
> dataff=download.file(url, destfile, mode='wb');
> unzip=unz(destfile,"F-F_Research_Data_Factors.txt");
> ff4 <- read.table(unzip, header=FALSE,
> sep="",na.strings="NA", dec=".", strip.white=TRUE,
> skip=4,nrows=seqmo)
> ffdata <- ff4
> attach(ffdata);
> ffdata=ffdata/100
> #find out starting year month for ffdata;
> ffdatats=ts(ffdata, start=c(1926,7), frequency=12);
> stock=ts(na.omit(coredata(stock)), start=
> as.numeric(as.yearmon(as.Date(start(stock)[1]))),
> frequency=12);
> spx=ts(na.remove(spx), start=
> as.numeric(as.yearmon(as.Date(start(spx)[1]))),
> frequency=12);
> combined= na.remove(ts.union(stock,spx));
> combreturn= na.remove(diff(log(combined)));
> combined=na.remove(ts.intersect(combreturn,ffdatats),
> names=list("stockret", "spxret",
> "dates","ffmktret","smb","hml","rf"));
> combined[,1]=combined[,1]-combined[,7]
> combined[,2]=combined[,2]-combined[,7]
> 
> simplereg=lm(combined[,1]~combined[,2]);
> stockbeta=simplereg$coef[2];
> textout=paste("CAPM beta=", stockbeta);
> robustreg=wle.lm(combined[,1]~combined[,2]);
> robstockbeta=robustreg$coef[2];
> textout2=paste("robust stock beta=", robstockbeta);
> 
> plot(as.numeric(combined[,1])~as.numeric(combined[,2]),xlab="S&P",
> ylab=tool)
> title(main=textout, sub=list(textout2, col="red"))
> abline(coef(simplereg));
> abline(coef(robustreg),col="red")
> 
> print(textout);
> print(textout2);
> ffreg=wle.lm(combined[,1]~combined[,4]+combined[,5]+combined[,6]);
> ffbeta=ffreg$coef[2];
> ffsmb=ffreg$coef[3];
> ffhml=ffreg$coef[4] ;
> textout3=paste('robust ff beta=',ffbeta) ;
> textout4=paste('robust ff smb=',ffsmb) ;
> textout5=paste('robust ff hml=',ffhml) ;
> print(textout3) ;
> print(textout4) ;
> print(textout5) ;
> rf=5
> smb=1
> hml=2
> rm=5
> ffcoe=rf+ffbeta*rm+ffsmb*smb+ffhml*hml
> robcoe=rf+robstockbeta*rm
> regcoe=rf+stockbeta*rm
> textout6=paste('regular coe=',regcoe,' robustcoe=',
> robcoe)
> textout7=paste('Fama-French coe=',ffcoe)
> print(textout6)
> print(textout7) ;
> ffreg2=lm(combined[,1]~combined[,4]+combined[,5]+combined[,6]);
> 
> a1=as.vector(combined[,1])
> b1=as.vector(ffreg2$fitted)
> c1=as.vector(simplereg$fitted)
> plot3= (data.frame(a1,b1,c1))
> win.graph()
> panel.cor <- function(x, y, digits=2, prefix="",
> cex.cor)
>       {
>           usr <- par("usr"); on.exit(par(usr))
>           par(usr = c(0, 1, 0, 1))
>           r <- abs(cor(x, y))
>           txt <- format(c(r, 0.123456789),
> digits=digits)[1]
>           txt <- paste(prefix, txt, sep="")
>           if(missing(cex.cor)) cex <-
> 0.8/strwidth(txt)
>           text(0.5, 0.5, txt, cex = cex * r)
>       }
> pairs(plot3, upper.panel=panel.cor,labels=c("stock
> returns","FF fits","CAPM fits"))
> 
> 
> ffreg2=lm(combined[,1]~combined[,4]+combined[,5]+combined[,6]);
> if((AIC(simplereg))<(AIC(ffreg2))) "CAPM superior to
> FF" else "FF superior to CAPM";
> }
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance

-- 
Spencer Graves, PhD
Senior Development Engineer
PDF Solutions, Inc.
333 West San Carlos Street Suite 700
San Jose, CA 95110, USA

spencer.graves at pdf.com
www.pdf.com <http://www.pdf.com>
Tel:  408-938-4420
Fax: 408-280-7915


From Marco.Salvini at sanpaoloam.com  Mon Sep 12 14:04:10 2005
From: Marco.Salvini at sanpaoloam.com (Marco Salvini)
Date: Mon, 12 Sep 2005 14:04:10 +0200
Subject: [R-sig-finance] Missing
In-Reply-To: <20050910181006.79300.qmail@web36201.mail.mud.yahoo.com>
Message-ID: <OF42DDB084.C5AF684D-ONC125707A.004234A5-C125707A.00424CEB@sanpaoloam.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20050912/e9129710/attachment.pl

From Marco.Salvini at sanpaoloam.com  Tue Sep 13 13:41:20 2005
From: Marco.Salvini at sanpaoloam.com (Marco Salvini)
Date: Tue, 13 Sep 2005 13:41:20 +0200
Subject: [R-sig-finance] Book
In-Reply-To: <20050908134310.90245.qmail@web60319.mail.yahoo.com>
Message-ID: <OF37614F44.F8A70BBF-ONC125707B.00400B27-C125707B.004035EF@sanpaoloam.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20050913/60b098a6/attachment.pl

From pcavatore at yahoo.it  Sun Sep 18 13:10:21 2005
From: pcavatore at yahoo.it (Paolo Cavatore)
Date: Sun, 18 Sep 2005 13:10:21 +0200
Subject: [R-sig-finance] Compatibility between Rmetrics and Finmetrics
Message-ID: <01fa01c5bc43$1d08bdb0$b5640a3e@paolodell>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20050918/86c1b2ac/attachment.pl

From snvk4u at gmail.com  Mon Sep 19 09:27:05 2005
From: snvk4u at gmail.com (Krishna)
Date: Mon, 19 Sep 2005 12:57:05 +0530
Subject: [R-sig-finance] minimum variance hedge ratio
Message-ID: <139ef1c20509190027693b235@mail.gmail.com>

Hi all

i have two data sets, spot and futures cash market prices. to estimate
the minimum variance hedge ratio, i first had a glance on the
correlation coefficient of relative price change (ln(St / St-1).
surprizingly the value is just 0.2 compared to actual price
correlation of 0.9. (i did regress the spot change on future change,
co-effi is 0.3, and R2 is only 0.025

a) in such scenario can someone help me in estimating the ratio which
are time varying.
b) is there a way to define the function as the correlation will work
at given level of basis (futures - spot).

thank u for the help and co-operation

rgds

snvk


From manojsw at gmail.com  Wed Sep 21 07:48:30 2005
From: manojsw at gmail.com (Manoj)
Date: Wed, 21 Sep 2005 14:48:30 +0900
Subject: [R-sig-finance] Portfolio Wgts Optimization
Message-ID: <829e6c8a05092022487e655439@mail.gmail.com>

Greeting,
     Apologies for the blank email...I am quite new to optim function
in R. I am trying to do the following:

     I am trying to optimize Portfolio wgts subjected to certain
constraints. The constraints are that individual weights can be either
0 or maximum 40% and that the sum of the weights should be 1.

      While I know that I can use L-BFGS-B method and specify the
lower & upper bound, How can I specify the constraint that the sum of
the weights should add up to 1?

     Thanks in advance for your help.

Cheers

Manoj


From patrick at burns-stat.com  Wed Sep 21 10:59:06 2005
From: patrick at burns-stat.com (Patrick Burns)
Date: Wed, 21 Sep 2005 09:59:06 +0100
Subject: [R-sig-finance] Portfolio Wgts Optimization
In-Reply-To: <829e6c8a05092022487e655439@mail.gmail.com>
References: <829e6c8a05092022487e655439@mail.gmail.com>
Message-ID: <433120DA.6060205@burns-stat.com>

To answer your immediate question, one approach
is to add a Lagrange multiplier to your function.  Another
is to rescale the weights before computing the utility
(this has the potential to confuse the optimizer, but often
works okay).

But if you are using mean-variance utility, then you should
investigate the 'quadprog' package.  If your requirements
are more complex and you are willing to spend money,
then POP from Burns Statistics is a possibility.

Patrick Burns
patrick at burns-stat.com
+44 (0)20 8525 0696
http://www.burns-stat.com
(home of S Poetry and "A Guide for the Unwilling S User")

Manoj wrote:

>Greeting,
>     Apologies for the blank email...I am quite new to optim function
>in R. I am trying to do the following:
>
>     I am trying to optimize Portfolio wgts subjected to certain
>constraints. The constraints are that individual weights can be either
>0 or maximum 40% and that the sum of the weights should be 1.
>
>      While I know that I can use L-BFGS-B method and specify the
>lower & upper bound, How can I specify the constraint that the sum of
>the weights should add up to 1?
>
>     Thanks in advance for your help.
>
>Cheers
>
>Manoj
>
>_______________________________________________
>R-sig-finance at stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>
>  
>


From L.Isella at myrealbox.com  Wed Sep 21 17:33:13 2005
From: L.Isella at myrealbox.com (L.Isella)
Date: Wed, 21 Sep 2005 15:33:13 +0000
Subject: [R-sig-finance] PTF Optimization Beyond Historical Data
Message-ID: <1127316793.c82bb77cL.Isella@myrealbox.com>

Dear All,
I am doing some portfolio optimization for a small financial company.
As a first step, I just solve Markowitz model based on historical data.
Now, the company trades above all European ETFs and  Japan equities.
We need to improve the historical returns and correlations of the assets for a portfolio made up of about 18 assets.
Since I am a bit drowning in the vast literature (time series, technical analysis, CAPM and so on), I would like to know if anyone can come forward with a bit of advice.
In order to start, the simpler the better. Finally, is there some sort of routine or standard method which is taken as a "benchmark" for the composition of the efficient portfolio?
If yes, is it implemented in R?
Lorenzo


From patrick.henaff at kermatheano.com  Thu Sep 22 21:33:37 2005
From: patrick.henaff at kermatheano.com (=?iso-8859-1?Q?P._H=E9naff?=)
Date: Thu, 22 Sep 2005 14:33:37 -0500
Subject: [R-sig-finance] Portfolio optimization
References: <mailman.19.1127383202.22046.r-sig-finance@stat.math.ethz.ch>
Message-ID: <000701c5bfac$88a91670$4501a8c0@DDG0MG21>

Hi Lorenzo

You might want to look at the Black-Litterman portfolio optimization model 
(google will give you links to relevent papers). The main advantage wrt 
Markowitz is that you do not have to provide return forecasts for all 
assets. You express your point of view in absolute term or in relative terms 
when you have one. Results are a lot more stable than Markowitz's model, and 
it is straight forward to implement.

Cheers

Patrick H?naff


From spencer.graves at pdf.com  Sat Sep 24 15:34:00 2005
From: spencer.graves at pdf.com (Spencer Graves)
Date: Sat, 24 Sep 2005 08:34:00 -0500
Subject: [R-sig-finance] Compatibility between Rmetrics and Finmetrics
In-Reply-To: <01fa01c5bc43$1d08bdb0$b5640a3e@paolodell>
References: <01fa01c5bc43$1d08bdb0$b5640a3e@paolodell>
Message-ID: <433555C8.80401@pdf.com>

	  The short answer is no:  I'm not familiar with FINmetrics, but I've 
been told that it has capabilites not (yet) available in R.  And I can't 
say anything about the compatibility (or lack thereof) of the 
capabilities that do exist.

	  Moreover, FINmetrics is a commericial product distributed by 
Insightful, and I don't know the status of what they consider 
proprietary.  I just got 12 hits from RSiteSearch("Rmetrics and 
FINmetrics"), but didn't learn much from that.  Googling for "Rmetrics 
and FINmetrics" seemed more profitable.

	  spencer graves

Paolo Cavatore wrote:

> I'm pretty new to the world of R and Rmetrics but I'm reading a book 
about portfolio optimization with S-plus and Finmetrics...I'm already
aware of the compatibility between S-plus and R languages so I was
wondering if it's the same with Rmetrics and Finmetrics.
> 
> Thanks,
> 
> pc
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance

-- 
Spencer Graves, PhD
Senior Development Engineer
PDF Solutions, Inc.
333 West San Carlos Street Suite 700
San Jose, CA 95110, USA

spencer.graves at pdf.com
www.pdf.com <http://www.pdf.com>
Tel:  408-938-4420
Fax: 408-280-7915


From sankalp.upadhyay at gmail.com  Tue Sep 27 13:23:20 2005
From: sankalp.upadhyay at gmail.com (Sankalp Upadhyay)
Date: Tue, 27 Sep 2005 16:53:20 +0530
Subject: [R-sig-finance] Portfolio performance metrics/ratios
Message-ID: <ff91746c0509270423719b396f@mail.gmail.com>

Hi,

I am looking for a package that can calculate portfolio performance
metrics and ratios from a time series of returns or asset values. Is
there such a package? one that can give comparison ratios with
benchmarks also?
The closest seems to be tseries that has maxdrawdown, sharpe and
sterling ratios. I have started writing own code based on that but
there are a lot of ratios and performance analysis metrics.
Am I missing some package that can help?

Thanks,

Sankalp


From katherine at sovereignwealth.com  Mon Sep 26 16:38:03 2005
From: katherine at sovereignwealth.com (Katherine Walton)
Date: Mon, 26 Sep 2005 08:38:03 -0600
Subject: [R-sig-finance] Creating a Price Series From a Returns Series Using
	R
Message-ID: <000501c5c2a7$e7190230$6300000a@headquarters.qes.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20050926/b391f5e2/attachment.pl

From patrick at burns-stat.com  Tue Sep 27 13:57:45 2005
From: patrick at burns-stat.com (Patrick Burns)
Date: Tue, 27 Sep 2005 12:57:45 +0100
Subject: [R-sig-finance] Creating a Price Series From a Returns Series
 Using	R
In-Reply-To: <000501c5c2a7$e7190230$6300000a@headquarters.qes.com>
References: <000501c5c2a7$e7190230$6300000a@headquarters.qes.com>
Message-ID: <433933B9.7060602@burns-stat.com>

It will depend on what type of returns you have, but
assuming you have log returns and your returns are in
'retvec', then:

pseudoprice <- orig.price * exp(cumsum(retvec))

Will give you a price series.  If you have simple returns,
one approach is to first transform them into log returns.


Patrick Burns
patrick at burns-stat.com
+44 (0)20 8525 0696
http://www.burns-stat.com
(home of S Poetry and "A Guide for the Unwilling S User")

Katherine Walton wrote:

>I was wondering if anyone had a simple way to make a price series (or
>Vami) from a return series using R (or S+).
> 
>Katherine Walton
>Mathematician
>QES: Quantitative Equity Strategies
>303-471-0244
> <mailto:katherine at qesinvest.com> katherine at qesinvest.com
> 
> 
>
>	[[alternative HTML version deleted]]
>
>_______________________________________________
>R-sig-finance at stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>
>  
>


From walmir-rodrigues at uol.com.br  Tue Sep 27 14:30:03 2005
From: walmir-rodrigues at uol.com.br (walmir-rodrigues)
Date: Tue, 27 Sep 2005 09:30:03 -0300
Subject: [R-sig-finance] Creating a Price Series From a Returns Series
	Using R
Message-ID: <INH6Q3$4A719CB2E467791ACE863DD6F6FDBFEA@uol.com.br>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20050927/a84d5de8/attachment.pl

From David.Brahm at geodecapital.com  Wed Sep 28 00:11:02 2005
From: David.Brahm at geodecapital.com (Brahm, David)
Date: Tue, 27 Sep 2005 18:11:02 -0400
Subject: [R-sig-finance] Creating a Price Series From a Returns Series
	Using R
Message-ID: <4DD6F8B8782D584FABF50BF3A32B03D802960992@MSGBOSCLF2WIN.DMN1.FMR.COM>

Katherine Walton wrote:
> a simple way to make a price series (or Vami) from a return series
using R

vami <- 1000 * cumprod(1 + r)

-- David Brahm (brahm at alum.mit.edu)


