From josh.m.ulrich at gmail.com  Thu Jan  1 18:48:23 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Thu, 1 Jan 2015 11:48:23 -0600
Subject: [R-SIG-Finance] RFC: quantmod::getSymbols.MySQL
In-Reply-To: <CAPPM_gQfMOasAbgNbNTWHrQ0uwgtqoxokT1EJa_v8ARp40n61g@mail.gmail.com>
References: <CAPPM_gQfMOasAbgNbNTWHrQ0uwgtqoxokT1EJa_v8ARp40n61g@mail.gmail.com>
Message-ID: <CAPPM_gTt=G_=gs3jBX7tT3Pd8BgHyV1Z56fC1M6E7htH75gLjQ@mail.gmail.com>

To follow up with the solution I adopted in quantmod_0.4-3 (on CRAN as
of 2014-12-15): I moved all the necessary Defaults functionality
directly to quantmod.  This did not include Defaults' ability to
modify other package's namespaces, since that was a big reason Jeff
requested Defaults be archived.

This means that getSymbols.MySQL should function as it did when
quantmod depended on Defaults.  Also, any packages that depend on
quantmod and use the ported Defaults functionality should be able to
use quantmod_0.4-3 without losing functionality.  Packages that use
Defaults' ability to modify other package's namespaces will need to be
patched to work without that functionality.

On Wed, Oct 29, 2014 at 7:25 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> As many of you know, the Defaults package was removed from CRAN on
> 2014-10-03 at Jeff's request.  This broke a fair bit of functionality
> in quantmod, most of which I have addressed in recent commits on
> R-Forge.
>
> One issue I have not resolved is how to adapt getSymbols.MySQL to the
> new no-Defaults paradigm.  I will be taking over as maintainer of
> quantmod, so I am soliciting input from getSymbols.MySQL users.
>
> My proposed solution to getSymbols.MySQL is to look for specific
> option()s if certain arguments are missing.  I think this is the
> cleanest and most obvious solution, but am open to alternatives.  I
> would use the option structure below, with only the three arguments
> listed.
>
> options(quantmod.defaults = list(
>   getSymbols.MySQL = list(
>     user="josh",
>     password="secret",
>     dbname="stocks")
>   )
> )
>
> Should I consider another option structure?  Should additional
> arguments be supported?  Anything else I'm missing?
>
> Thanks,
> --
> Joshua Ulrich  |  about.me/joshuaulrich
> FOSS Trading  |  www.fosstrading.com


-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From josh.m.ulrich at gmail.com  Fri Jan  2 01:22:24 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Thu, 1 Jan 2015 18:22:24 -0600
Subject: [R-SIG-Finance] RFinanceYJ and getSymbols for Yahoo Japan
In-Reply-To: <CACySJQURBdu52pZLj9QjUgHSngu8eR4Pi1ECYJyWmz2kY-AtLQ@mail.gmail.com>
References: <CACySJQURBdu52pZLj9QjUgHSngu8eR4Pi1ECYJyWmz2kY-AtLQ@mail.gmail.com>
Message-ID: <CAPPM_gS04PRn-x6cOMYYDVd6X5F1SN2Um1QACxDCnz4P6NJ4kg@mail.gmail.com>

Note that this has been added to quantmod on R-Forge as of revision 624:
https://r-forge.r-project.org/scm/viewvc.php/pkg/R/getSymbols.R?root=quantmod&r1=623&r2=624

Thanks for your contribution Wouter!


On Sat, Sep 27, 2014 at 6:47 AM, Wouter Thielen <wouter at morannon.org> wrote:
> Hello all,
>
> First of all, let me introduce myself as I am new here. I am Wouter
> Thielen, from the Netherlands, and living and working in Tokyo, Japan. I
> have recently enrolled as an online master's student at the University of
> Washington for the CFRM program.
>
> I have been trading stocks on the Japanese market for a year now, and have
> always wanted to be able to analyze them in R. I tried the RFinanceYJ
> package, but it did not work, and still does not as of yesterday, when I
> updated. They seem to be inactive for over a year.
>
> So with the newly acquired R skills (thanks prof. Yollin!) I set out to
> implement a getSymbols.yahooj function that would scrape HTML pages of
> price history from Yahoo Japan, and create an xts object. The code so far
> can be found on my Github account:
>
> https://github.com/wthielen/YJStocks/blob/master/getSymbols.yahooj.R
>
> It is based on getSymbols.yahoo.R from the quantmod package, and the only
> thing I changed are lines 46-108. So far it works for:
> - pricing data of stocks including volumes and adjusted closes
> - pricing data of indices (e.g. NI225) which does not have volumes or
> adjusted closes. The code for these indices end with ".O" from what I have
> seen. Please correct me if I'm wrong.
> - account for stock splits
>
> If there is anything else that this function should be able to do, please
> let me know.
>
> Hope to hear feedback from you!
>
> Wouter
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From josh.m.ulrich at gmail.com  Fri Jan  2 01:23:53 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Thu, 1 Jan 2015 18:23:53 -0600
Subject: [R-SIG-Finance] How can I get Japanese Stock Daily Data in R?
In-Reply-To: <CA+xi=qZXKPdaMdx3qYc29EjPKoZWYQW559iMqOWFdT6XwZhJjQ@mail.gmail.com>
References: <CAPpJ=Cx1hwLuXm3uRXFBmC0ErD8newx98M3JHbfEJ-vyvH6eHA@mail.gmail.com>
	<CABQr56XRzdy2Au7ypifUZ18=WWhqf0dv7B1tr6hzBDG3aH2H6Q@mail.gmail.com>
	<CA+xi=qZXKPdaMdx3qYc29EjPKoZWYQW559iMqOWFdT6XwZhJjQ@mail.gmail.com>
Message-ID: <CAPPM_gQ7RX3OZtYA3TnfVRRQDNYKyLLo-huOULaadTNFOnEvqA@mail.gmail.com>

Note that this functionality has been added to quantmod on R-Forge as
of revision 624, thanks to a contribution by Wouter Thielen:
https://r-forge.r-project.org/scm/viewvc.php/pkg/R/getSymbols.R?root=quantmod&r1=623&r2=624


On Fri, Oct 17, 2014 at 9:37 AM, G See <gsee000 at gmail.com> wrote:
> You can get intraday data for the past few days from here:
> http://k-db.com/stocks
>
> Sorry, I don't use R to download that, but it should be trivial.
>
> Hope this helps,
> Garrett
>
> On Fri, Oct 17, 2014 at 8:18 AM, Qi Li <qi.li22 at gmail.com> wrote:
>> Hi,
>>   I am also very interested in this data. Please also let me know if you
>> have a solution. Thanks.
>>
>> Qi
>>
>> On Fri, Oct 17, 2014 at 8:52 AM, Eric (YEN-LIN) CHIU <ndc24075 at gmail.com>
>> wrote:
>>
>>> As I know, RFinanceYJ cannot work properly since the format of Yahoo in
>>> Japan change the format of data.
>>>
>>> Every time I try to fetch data, it shows
>>> "Error in order(financial.data$date) : argument 1 is not a vector"
>>>
>>> The current solution I found is in here:
>>>
>>> http://rstudio-pubs-static.s3.amazonaws.com/6475_3034596b267b4a7587cefd3b8ed4ba25.html
>>>
>>> But it is not convenient to choose date or change the data into xts object.
>>> I notice google finance has Japanese stock data, but getSymbols cannot
>>> access the data either.
>>> I tried "getSymbols("TYO:4689")", but it cannot open the URL.
>>>
>>> Could anyone please give me some advice for this? Thanks.
>>>
>>> Eric
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From josh.m.ulrich at gmail.com  Fri Jan  2 01:26:39 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Thu, 1 Jan 2015 18:26:39 -0600
Subject: [R-SIG-Finance] Reply to: How can I get Japanese Stock Daily
 Data in R?
In-Reply-To: <CAPPM_gQ5+Tqm20ZWBZhBhKdgO21+Bg+EUTTeRS+GTDcuk3CBZQ@mail.gmail.com>
References: <CACySJQU1TsuSCHhKstc1u0DZKPachaLRh=qQ3pjxYjEtyktXfQ@mail.gmail.com>
	<CAPPM_gQ5+Tqm20ZWBZhBhKdgO21+Bg+EUTTeRS+GTDcuk3CBZQ@mail.gmail.com>
Message-ID: <CAPPM_gT5Zc4aRP80U1mP2jj_mXkQS6CFCgKVr-gRubycgqPq5w@mail.gmail.com>

On Sun, Dec 7, 2014 at 5:00 PM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> On Sun, Oct 19, 2014 at 6:30 AM, Wouter Thielen <wouter at morannon.org> wrote:
>> Sorry for not being able to reply directly to the related thread, because I
>> was getting mails in daily batches. I have updated my settings for this.
>>
>> I did make an R script to be included in the quantmod package, but I
>> haven't received any feedback from the community. The script can be found
>> here: https://github.com/wthielen/YJStocks/blob/master/getSymbols.yahooj.R
>>
>> To be able to use it in this shape, you need to do the following:
>> - Include the quantmod library first: library(quantmod)
>> - Load getSymbols.R file from the quantmod source, for some internal
>> dependencies
>> - Pass any "missing" arguments that would be coming from the main
>> getSymbols() call: verbose and auto.assign
>>
>> An example routine would be:
>>
>> library(quantmod)
>> source("/path/to/quantmodpackage/pkg/R/getSymbols.R")
>> source("/path/to/getSymbols.yahooj.R")
>> getSymbols.yahooj("3048.T", verbose=TRUE, auto.assign=TRUE)
>>
>> And then you will see it downloading daily stock data for Biccamera, and
>> assigning it to the "YJ3048.T" xts object.
>>
>> I hope it will be included into the getSymbols.R file from the quantmod
>> package, so that it becomes a standard function.
>>
> I think this is something that can be directly included in quantmod.
> But for that to happen, you also need a corresponding .Rd file.  It
> would be very helpful if you could also provide that file, and even
> more helpful if you ensure that quantmod still passes R CMD check
> after your incorporate your changes.
>
Thanks to Wouter, this functionality is now in quantmod on R-Forge as
of revision 624:
https://r-forge.r-project.org/scm/viewvc.php/pkg/R/getSymbols.R?root=quantmod&r1=623&r2=624

>> Hope this helps!
>>
>> --
>> Wouter Thielen
>>
>
> --
> Joshua Ulrich  |  about.me/joshuaulrich
> FOSS Trading  |  www.fosstrading.com



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From wouter at morannon.org  Sat Jan  3 07:01:53 2015
From: wouter at morannon.org (Wouter Thielen)
Date: Sat, 03 Jan 2015 06:01:53 +0000
Subject: [R-SIG-Finance] Reply to: How can I get Japanese Stock Daily
 Data in R?
References: <CACySJQU1TsuSCHhKstc1u0DZKPachaLRh=qQ3pjxYjEtyktXfQ@mail.gmail.com>
	<CAPPM_gQ5+Tqm20ZWBZhBhKdgO21+Bg+EUTTeRS+GTDcuk3CBZQ@mail.gmail.com>
	<CAPPM_gT5Zc4aRP80U1mP2jj_mXkQS6CFCgKVr-gRubycgqPq5w@mail.gmail.com>
Message-ID: <CACySJQUhj7zWHAG+4t6Gme-bfVtUQTKT4djscrK4uXbpjQ1jwg@mail.gmail.com>

Glad to see it included in quantmod! Thanks, Joshua!

Also, a Happy New Year to all!

Wouter
On Fri Jan 02 2015 at 9:27:12 AM Joshua Ulrich <josh.m.ulrich at gmail.com>
wrote:

> On Sun, Dec 7, 2014 at 5:00 PM, Joshua Ulrich <josh.m.ulrich at gmail.com>
> wrote:
> > On Sun, Oct 19, 2014 at 6:30 AM, Wouter Thielen <wouter at morannon.org>
> wrote:
> >> Sorry for not being able to reply directly to the related thread,
> because I
> >> was getting mails in daily batches. I have updated my settings for this.
> >>
> >> I did make an R script to be included in the quantmod package, but I
> >> haven't received any feedback from the community. The script can be
> found
> >> here: https://github.com/wthielen/YJStocks/blob/master/
> getSymbols.yahooj.R
> >>
> >> To be able to use it in this shape, you need to do the following:
> >> - Include the quantmod library first: library(quantmod)
> >> - Load getSymbols.R file from the quantmod source, for some internal
> >> dependencies
> >> - Pass any "missing" arguments that would be coming from the main
> >> getSymbols() call: verbose and auto.assign
> >>
> >> An example routine would be:
> >>
> >> library(quantmod)
> >> source("/path/to/quantmodpackage/pkg/R/getSymbols.R")
> >> source("/path/to/getSymbols.yahooj.R")
> >> getSymbols.yahooj("3048.T", verbose=TRUE, auto.assign=TRUE)
> >>
> >> And then you will see it downloading daily stock data for Biccamera, and
> >> assigning it to the "YJ3048.T" xts object.
> >>
> >> I hope it will be included into the getSymbols.R file from the quantmod
> >> package, so that it becomes a standard function.
> >>
> > I think this is something that can be directly included in quantmod.
> > But for that to happen, you also need a corresponding .Rd file.  It
> > would be very helpful if you could also provide that file, and even
> > more helpful if you ensure that quantmod still passes R CMD check
> > after your incorporate your changes.
> >
> Thanks to Wouter, this functionality is now in quantmod on R-Forge as
> of revision 624:
> https://r-forge.r-project.org/scm/viewvc.php/pkg/R/
> getSymbols.R?root=quantmod&r1=623&r2=624
>
> >> Hope this helps!
> >>
> >> --
> >> Wouter Thielen
> >>
> >
> > --
> > Joshua Ulrich  |  about.me/joshuaulrich
> > FOSS Trading  |  www.fosstrading.com
>
>
>
> --
> Joshua Ulrich  |  about.me/joshuaulrich
> FOSS Trading  |  www.fosstrading.com
>

	[[alternative HTML version deleted]]


From junluke at gmail.com  Sat Jan  3 22:45:59 2015
From: junluke at gmail.com (jun wang)
Date: Sat, 3 Jan 2015 16:45:59 -0500
Subject: [R-SIG-Finance] gogarch with multivariate t distribution
Message-ID: <CAPD4hGCzcgbHxgVEh9GPbzuSwKThkxsV--gzULYqxxtV2VynJw@mail.gmail.com>

Dear all,

Is there anyway to estimate the GOGARCH model with multivariate student t
distribution errors in the *rmgarch* package in R? The rmgarch package for
estimating gogarch model only covers "mvnorm",multivariate affine NIG
(?manig?) and GHYP (?magh?).

Any hints would be very appreciated.

Thanks,
Jun

	[[alternative HTML version deleted]]


From alexios at 4dscape.com  Sat Jan  3 23:36:22 2015
From: alexios at 4dscape.com (alexios ghalanos)
Date: Sat, 03 Jan 2015 22:36:22 +0000
Subject: [R-SIG-Finance] gogarch with multivariate t distribution
In-Reply-To: <CAPD4hGCzcgbHxgVEh9GPbzuSwKThkxsV--gzULYqxxtV2VynJw@mail.gmail.com>
References: <CAPD4hGCzcgbHxgVEh9GPbzuSwKThkxsV--gzULYqxxtV2VynJw@mail.gmail.com>
Message-ID: <54A86EE6.6020207@4dscape.com>

The short answer is NO.

The student and (gh) skew student are nested in the magh under 
appropriate parameter restrictions e.g. setting [gh]\lambda to 
-[student]shape/2 (with appropriate bounds on shape) and [gh]\beta->0 
(for student) or [gh]\beta->|[gh]\alpha| (for gh skew student)...search 
google for 'Prause Generalized Hyperbolic' for more details.

However, the representation in rmgarch is of the standardized magh 
([sgh]\rho,[sgh]\zeta parameterization) which means you'd need to amend 
the code for this particular case...given that it's open source, it 
should be a 'breeze'.

Alexios


On 03/01/2015 21:45, jun wang wrote:
> Dear all,
>
> Is there anyway to estimate the GOGARCH model with multivariate student t
> distribution errors in the *rmgarch* package in R? The rmgarch package for
> estimating gogarch model only covers "mvnorm",multivariate affine NIG
> (?manig?) and GHYP (?magh?).
>
> Any hints would be very appreciated.
>
> Thanks,
> Jun
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From junluke at gmail.com  Tue Jan  6 06:17:24 2015
From: junluke at gmail.com (jun wang)
Date: Tue, 6 Jan 2015 00:17:24 -0500
Subject: [R-SIG-Finance] gogarch with multivariate t distribution
In-Reply-To: <54A86EE6.6020207@4dscape.com>
References: <CAPD4hGCzcgbHxgVEh9GPbzuSwKThkxsV--gzULYqxxtV2VynJw@mail.gmail.com>
	<54A86EE6.6020207@4dscape.com>
Message-ID: <CAPD4hGC1p4RNh_8AHZ+Y3_F3GHKefG28gs1y3jLZiww3Hpk9qQ@mail.gmail.com>

Hi, Alexios,

Thanks for your quick response. I am still learning the DCC-GARCH model,
and i tried write the 2-stage estimation for the bi-variate DCC-GARCH(1,1)
and the estimates i got for the dcc parameters are different from the
"dccfit" function. I was wondering if you can give me any hints on what is
not right for my code.

Thanks!!!

data<-rv_indices[,2:3]
size1<-dim(data)
t<-size1[1]
k<-size1[2]

H<-matrix(0,nrow=size1[1]+1,ncol=size1[2])

fit1<-ugarchfit(model_base,data=data[,1]-mean(data[,1]))
fit2<-ugarchfit(model_base,data=data[,2]-mean(data[,2]))

res_1<-as.numeric(residuals(fit1))
res_2<-as.numeric(residuals(fit2))

vol_1<-as.numeric(sigma(fit1))
vol_2<-as.numeric(sigma(fit2))

res<-cbind(res_1,res_2)
vol<-cbind(vol_1,vol_2)
stdresid<-res/vol
Qbar=cov(stdresid);

stdresid=rbind(c(1,1),stdresid)

Qt<-array(0,c(2,2,t+1))
Rt<-array(0,c(2,2,t+1))
Qt[,,1]<-Qbar
Rt[,,1]<-Qbar
dcc_likhood_2<-function(startval){
a<-startval[1]
b<-startval[2]
logL=0;
likelihoods<-numeric(t+1)
for (j in 2:t+1){
  Qt[,,j]=Qbar*(1-a-b)
  Qt[,,j]=Qt[,,j]+a*(stdresid[j-1,]%*%t(stdresid[j-1,]));
  Qt[,,j]=Qt[,,j]+b*Qt[,,j-1]
  Rt[,,j]=Qt[,,j]/(sqrt(diag(Qt[,,j]))%*%sqrt(t(diag(Qt[,,j]))));

likelihoods[j]=log(det(Rt[,,j]))+t(stdresid[j,])%*%solve(Rt[,,j],tol=1e-21)%*%(stdresid[j,]);
  logL=logL+likelihoods[j]
}
return(logL)
}
startval<-c(0.04,0.93)
A <- matrix(c(-1, -1,1,0,0,1), 3, 2,byrow=TRUE)
B <- c(1,0,0)

llL<-maxBFGS(dcc_likhood_2,start=startval, constraints=list(ineqA=A,
ineqB=B))

On Sat, Jan 3, 2015 at 5:36 PM, alexios ghalanos <alexios at 4dscape.com>
wrote:

> The short answer is NO.
>
> The student and (gh) skew student are nested in the magh under appropriate
> parameter restrictions e.g. setting [gh]\lambda to -[student]shape/2 (with
> appropriate bounds on shape) and [gh]\beta->0 (for student) or
> [gh]\beta->|[gh]\alpha| (for gh skew student)...search google for 'Prause
> Generalized Hyperbolic' for more details.
>
> However, the representation in rmgarch is of the standardized magh
> ([sgh]\rho,[sgh]\zeta parameterization) which means you'd need to amend the
> code for this particular case...given that it's open source, it should be a
> 'breeze'.
>
> Alexios
>
>
> On 03/01/2015 21:45, jun wang wrote:
>
>> Dear all,
>>
>> Is there anyway to estimate the GOGARCH model with multivariate student t
>> distribution errors in the *rmgarch* package in R? The rmgarch package for
>> estimating gogarch model only covers "mvnorm",multivariate affine NIG
>> (?manig?) and GHYP (?magh?).
>>
>> Any hints would be very appreciated.
>>
>> Thanks,
>> Jun
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>>
>

	[[alternative HTML version deleted]]


From quinn.tf at gmail.com  Wed Jan  7 17:17:43 2015
From: quinn.tf at gmail.com (Thomas Quinn)
Date: Wed, 7 Jan 2015 10:17:43 -0600
Subject: [R-SIG-Finance] R-SIG-Finance Digest, Vol 128, Issue 5
In-Reply-To: <mailman.11.1420542004.32518.r-sig-finance@r-project.org>
References: <mailman.11.1420542004.32518.r-sig-finance@r-project.org>
Message-ID: <CAJFbZXdRkpvXz6Kkib5Fosu5und1DtrBo=J5zNrSFH7EWFjtbg@mail.gmail.com>

Unrelated to R here is a neat site I just found:
http://www.indexindicators.com/

Related to R:
The instructions to subscribe/unsubscribe are below.

Here is the site for R
http://www.r-project.org/

Here is a link to a nice IDE for R that I use:
http://www.rstudio.com/

Neural Nets, clustering, fractals, and plain old stats... you name

On Tue, Jan 6, 2015 at 5:00 AM, <r-sig-finance-request at r-project.org> wrote:

> Send R-SIG-Finance mailing list submissions to
>         r-sig-finance at r-project.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> or, via email, send a message with subject or body 'help' to
>         r-sig-finance-request at r-project.org
>
> You can reach the person managing the list at
>         r-sig-finance-owner at r-project.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of R-SIG-Finance digest..."
>
>
> Today's Topics:
>
>    1. Re: gogarch with multivariate t distribution (jun wang)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Tue, 6 Jan 2015 00:17:24 -0500
> From: jun wang <junluke at gmail.com>
> To: alexios ghalanos <alexios at 4dscape.com>
> Cc: "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
> Subject: Re: [R-SIG-Finance] gogarch with multivariate t distribution
> Message-ID:
>         <
> CAPD4hGC1p4RNh_8AHZ+Y3_F3GHKefG28gs1y3jLZiww3Hpk9qQ at mail.gmail.com>
> Content-Type: text/plain; charset="UTF-8"
>
> Hi, Alexios,
>
> Thanks for your quick response. I am still learning the DCC-GARCH model,
> and i tried write the 2-stage estimation for the bi-variate DCC-GARCH(1,1)
> and the estimates i got for the dcc parameters are different from the
> "dccfit" function. I was wondering if you can give me any hints on what is
> not right for my code.
>
> Thanks!!!
>
> data<-rv_indices[,2:3]
> size1<-dim(data)
> t<-size1[1]
> k<-size1[2]
>
> H<-matrix(0,nrow=size1[1]+1,ncol=size1[2])
>
> fit1<-ugarchfit(model_base,data=data[,1]-mean(data[,1]))
> fit2<-ugarchfit(model_base,data=data[,2]-mean(data[,2]))
>
> res_1<-as.numeric(residuals(fit1))
> res_2<-as.numeric(residuals(fit2))
>
> vol_1<-as.numeric(sigma(fit1))
> vol_2<-as.numeric(sigma(fit2))
>
> res<-cbind(res_1,res_2)
> vol<-cbind(vol_1,vol_2)
> stdresid<-res/vol
> Qbar=cov(stdresid);
>
> stdresid=rbind(c(1,1),stdresid)
>
> Qt<-array(0,c(2,2,t+1))
> Rt<-array(0,c(2,2,t+1))
> Qt[,,1]<-Qbar
> Rt[,,1]<-Qbar
> dcc_likhood_2<-function(startval){
> a<-startval[1]
> b<-startval[2]
> logL=0;
> likelihoods<-numeric(t+1)
> for (j in 2:t+1){
>   Qt[,,j]=Qbar*(1-a-b)
>   Qt[,,j]=Qt[,,j]+a*(stdresid[j-1,]%*%t(stdresid[j-1,]));
>   Qt[,,j]=Qt[,,j]+b*Qt[,,j-1]
>   Rt[,,j]=Qt[,,j]/(sqrt(diag(Qt[,,j]))%*%sqrt(t(diag(Qt[,,j]))));
>
>
> likelihoods[j]=log(det(Rt[,,j]))+t(stdresid[j,])%*%solve(Rt[,,j],tol=1e-21)%*%(stdresid[j,]);
>   logL=logL+likelihoods[j]
> }
> return(logL)
> }
> startval<-c(0.04,0.93)
> A <- matrix(c(-1, -1,1,0,0,1), 3, 2,byrow=TRUE)
> B <- c(1,0,0)
>
> llL<-maxBFGS(dcc_likhood_2,start=startval, constraints=list(ineqA=A,
> ineqB=B))
>
> On Sat, Jan 3, 2015 at 5:36 PM, alexios ghalanos <alexios at 4dscape.com>
> wrote:
>
> > The short answer is NO.
> >
> > The student and (gh) skew student are nested in the magh under
> appropriate
> > parameter restrictions e.g. setting [gh]\lambda to -[student]shape/2
> (with
> > appropriate bounds on shape) and [gh]\beta->0 (for student) or
> > [gh]\beta->|[gh]\alpha| (for gh skew student)...search google for 'Prause
> > Generalized Hyperbolic' for more details.
> >
> > However, the representation in rmgarch is of the standardized magh
> > ([sgh]\rho,[sgh]\zeta parameterization) which means you'd need to amend
> the
> > code for this particular case...given that it's open source, it should
> be a
> > 'breeze'.
> >
> > Alexios
> >
> >
> > On 03/01/2015 21:45, jun wang wrote:
> >
> >> Dear all,
> >>
> >> Is there anyway to estimate the GOGARCH model with multivariate student
> t
> >> distribution errors in the *rmgarch* package in R? The rmgarch package
> for
> >> estimating gogarch model only covers "mvnorm",multivariate affine NIG
> >> (?manig?) and GHYP (?magh?).
> >>
> >> Any hints would be very appreciated.
> >>
> >> Thanks,
> >> Jun
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> _______________________________________________
> >> R-SIG-Finance at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >> -- Subscriber-posting only. If you want to post, subscribe first.
> >> -- Also note that this is not the r-help list where general R questions
> >> should go.
> >>
> >>
> >
>
>         [[alternative HTML version deleted]]
>
>
>
> ------------------------------
>
> Subject: Digest Footer
>
> _______________________________________________
> R-SIG-Finance mailing list
> R-SIG-Finance at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>
> ------------------------------
>
> End of R-SIG-Finance Digest, Vol 128, Issue 5
> *********************************************
>



-- 
TQ

	[[alternative HTML version deleted]]


From Olivier.Martin at avignon.inra.fr  Sat Jan 10 19:24:29 2015
From: Olivier.Martin at avignon.inra.fr (Olivier MARTIN)
Date: Sat, 10 Jan 2015 19:24:29 +0100
Subject: [R-SIG-Finance] Help with quantstrat
Message-ID: <54B16E5D.2030501@avignon.inra.fr>

Hi all,

I am beginner with quantstrat. I would like to try a simple strategy but 
I have some
difficulties to program it. The strategy is based on two signals : the 
CCI and the RSI.
First, I compute RSI and CCI for period n=21. Let's denote them rsi21 
and cci21.
Secondly, I compute two moving average for rsi21 and cci21 with two
periodes : 8 and 14. I obtain four signals. Let's denote i3 and i4 for
rsi21, and i5 and i6 for cci21.
Finally, I  enter for a long position if (i3>i4)&(i5>i6)
I enter for a short position if (i3<i4)&(i5<i6)
I exit for a long or a short position when it is flat.

###
rsi21=RSI(Cl(mktdata),n=21)
cci21=RSI(Cl(mktdata),n=21)
i3 is equal to  SMA(rsi21,8)
i4 is equal to  SMA(rsi21,14)
i5 is equal to  SMA(cci21,8)
i6 is equal to  SMA(cci21,14)

up=(i3>i4)&(i5>i6)
dn=(i3<i4)&(i5<i6)
flat=!up | !dn
###


So I try to program these strategy but I don't know how to take
into account the different boolean conditions with the add.rule() function

#indicators
add.indicator(strategy =mystrategy, name = "SMA",arguments = list(x = 
quote(RSI(Cl(mktdata),n=8)), n=20), label="i3")
add.indicator(strategy =mystrategy, name = "SMA",arguments = list(x = 
quote(RSI(Cl(mktdata),n=14)), n=20), label="i4")
add.indicator(strategy =mystrategy, name = "SMA",arguments = list(x = 
quote(CCI(Cl(mktdata),n=8)), n=20), label="i5")
add.indicator(strategy =mystrategy, name = "SMA",arguments = list(x = 
quote(CCI(Cl(mktdata),n=14)), n=20), label="i6")

#signals
add.signal(mystrategy,name="sigCrossover",arguments = 
list(columns=c("i3","i4"),relationship="gt"),  label="i3.gt.i4")
add.signal(mystrategy,name="sigCrossover",  arguments = 
list(columns=c("i5","i6"),relationship="gt"),  label="i5.gt.i6")
add.signal(mystrategy,name="sigCrossover",  arguments = 
list(columns=c("i3","i4"),relationship="lt"),  label="i3.lt.i4")
add.signal(mystrategy,name="sigCrossover",  arguments = 
list(columns=c("i5","i6"),relationship="lt"),  label="i5.lt.i6")

#rules
  ???????




Could someone help me ?
Best regards,
Olivier.


From Olivier.Martin at avignon.inra.fr  Sat Jan 10 19:48:09 2015
From: Olivier.Martin at avignon.inra.fr (Olivier MARTIN)
Date: Sat, 10 Jan 2015 19:48:09 +0100
Subject: [R-SIG-Finance] Help with quantstrat.. correction
In-Reply-To: <54B16E5D.2030501@avignon.inra.fr>
References: <54B16E5D.2030501@avignon.inra.fr>
Message-ID: <54B173E9.3040709@avignon.inra.fr>

Sorry, I made a mistake in my preious mail...

flat=!up & !dn


Le 10/01/2015 19:24, Olivier MARTIN a ?crit :
> Hi all,
>
> I am beginner with quantstrat. I would like to try a simple strategy 
> but I have some
> difficulties to program it. The strategy is based on two signals : the 
> CCI and the RSI.
> First, I compute RSI and CCI for period n=21. Let's denote them rsi21 
> and cci21.
> Secondly, I compute two moving average for rsi21 and cci21 with two
> periodes : 8 and 14. I obtain four signals. Let's denote i3 and i4 for
> rsi21, and i5 and i6 for cci21.
> Finally, I  enter for a long position if (i3>i4)&(i5>i6)
> I enter for a short position if (i3<i4)&(i5<i6)
> I exit for a long or a short position when it is flat.
>
> ###
> rsi21=RSI(Cl(mktdata),n=21)
> cci21=RSI(Cl(mktdata),n=21)
> i3 is equal to  SMA(rsi21,8)
> i4 is equal to  SMA(rsi21,14)
> i5 is equal to  SMA(cci21,8)
> i6 is equal to  SMA(cci21,14)
>
> up=(i3>i4)&(i5>i6)
> dn=(i3<i4)&(i5<i6)
> flat=!up | !dn
> ###
>
>
> So I try to program these strategy but I don't know how to take
> into account the different boolean conditions with the add.rule() 
> function
>
> #indicators
> add.indicator(strategy =mystrategy, name = "SMA",arguments = list(x = 
> quote(RSI(Cl(mktdata),n=8)), n=20), label="i3")
> add.indicator(strategy =mystrategy, name = "SMA",arguments = list(x = 
> quote(RSI(Cl(mktdata),n=14)), n=20), label="i4")
> add.indicator(strategy =mystrategy, name = "SMA",arguments = list(x = 
> quote(CCI(Cl(mktdata),n=8)), n=20), label="i5")
> add.indicator(strategy =mystrategy, name = "SMA",arguments = list(x = 
> quote(CCI(Cl(mktdata),n=14)), n=20), label="i6")
>
> #signals
> add.signal(mystrategy,name="sigCrossover",arguments = 
> list(columns=c("i3","i4"),relationship="gt"),  label="i3.gt.i4")
> add.signal(mystrategy,name="sigCrossover",  arguments = 
> list(columns=c("i5","i6"),relationship="gt"),  label="i5.gt.i6")
> add.signal(mystrategy,name="sigCrossover",  arguments = 
> list(columns=c("i3","i4"),relationship="lt"),  label="i3.lt.i4")
> add.signal(mystrategy,name="sigCrossover",  arguments = 
> list(columns=c("i5","i6"),relationship="lt"),  label="i5.lt.i6")
>
> #rules
>  ???????
>
>
>
>
> Could someone help me ?
> Best regards,
> Olivier.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R 
> questions should go.


-- 
-------------------------------------------------------------
MARTIN Olivier
INRA-Centre de recherche PACA
228 route de l Aerodrome
Unit? Biostatistique & Processus Spatiaux
CS 40509
Domaine St Paul, Site Agroparc
84914 Avignon Cedex 9, France
Tel : 04 32 72 21 57


From frankm60606 at gmail.com  Sun Jan 11 20:57:09 2015
From: frankm60606 at gmail.com (Frank)
Date: Sun, 11 Jan 2015 13:57:09 -0600
Subject: [R-SIG-Finance] (no subject)
Message-ID: <21ACA5A0F73F4E929DBA97FB538178F0@Franki7PC>

Does anyone know where I can get the historical shares outstanding for the
GLD, the gold ETF and TLT the 20+ year Treasury ETF?

 

Thanks,

 

Frank

Chicago, IL

 


	[[alternative HTML version deleted]]


From hasan.diwan at gmail.com  Sun Jan 11 21:54:43 2015
From: hasan.diwan at gmail.com (Hasan Diwan)
Date: Sun, 11 Jan 2015 12:54:43 -0800
Subject: [R-SIG-Finance] (no subject)
In-Reply-To: <21ACA5A0F73F4E929DBA97FB538178F0@Franki7PC>
References: <21ACA5A0F73F4E929DBA97FB538178F0@Franki7PC>
Message-ID: <CAP+bYWBaVsDo7VtWxHTDZ=ChP4apQ8F7U0vmymCAogxUp6Ae4w@mail.gmail.com>

http://www.nasdaq.com/symbol/tlt/historical
http://www.nasdaq.com/symbol/gld/historical

Hope that helps.. -- H


On 11 January 2015 at 11:57, Frank <frankm60606 at gmail.com> wrote:

> Does anyone know where I can get the historical shares outstanding for the
> GLD, the gold ETF and TLT the 20+ year Treasury ETF?
>
>
>
> Thanks,
>
>
>
> Frank
>
> Chicago, IL
>
>
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>



-- 
OpenPGP: https://hasan.d8u.us/gpg.key
Sent from my mobile device
Envoy? de mon portable

	[[alternative HTML version deleted]]


From thomas.fuller at coherentlogic.com  Mon Jan 12 13:13:25 2015
From: thomas.fuller at coherentlogic.com (Thomas Fuller)
Date: Mon, 12 Jan 2015 07:13:25 -0500
Subject: [R-SIG-Finance] Thomson Reuters Eikon
Message-ID: <CAM0JZ3nnNZ4DL8gMer7X5F23ocY=krQGxo4qL2fGCC1WJqgBZg@mail.gmail.com>

Hi Folks,

I'd like to develop an extension to the Thomson Reuters Eikon product that
would allow users to work with time series and real-time market data in the
R Project.

I have a three-question survey below that is meant to help me get an
understanding of the demand for such a package, so if you're an Eikon user
and you're interested in this project, I'd appreciate it if you would let
me know by taking the survey.

Here's the link:

https://www.surveymonkey.com/r/MLQZ65K

Questions are welcomed.

Thanks in advance for your help,

Tom

	[[alternative HTML version deleted]]


From lisas at salford-systems.com  Mon Jan 12 21:19:09 2015
From: lisas at salford-systems.com (Lisa Solomon)
Date: Mon, 12 Jan 2015 14:19:09 -0600
Subject: [R-SIG-Finance] Tomorrow Webinar: Enter a KDD Cup or Kaggle
 Competition without being an expert!
Message-ID: <2732C804E2DBB04AA90A678D76FAF2CC6236EB606C@DFW1MBX02.mex07a.mlsrvr.com>

Webinar: Enter a KDD Cup or Kaggle Competition, You don't need to be an expert!

Tomorrow, January 13, 2015 from 10am-11am PDT

*         If inconvenient time, please register and we will send you a recording.

Click to Register: http://hubs.ly/y0q_jf0

Abstract:

*         Quickly achieve a place in the top 5: We will show you how Salford's TreeNet gradient boosting can be used for the 2009 KDD Cup competition to quickly achieve a place in the top 5.

*         Takeaway: At the end of this webinar, our goal is that you will be able to build a TreeNet model that can bring you within decimal places of a winning solution.

*         Starting Point for Kaggle, KDD and other data science competitions: Use this information as a starting point for Kaggle competitions and other KDD Cup competitions.

*         30-day software access: All attendees receive 30-day access to TreeNet gradient boosting, and other Salford Predictive Modeler technology.

Click to Register: http://hubs.ly/y0q_jf0

















	[[alternative HTML version deleted]]


From Josh-CH.Chien at nanshan.com.tw  Wed Jan 14 04:46:08 2015
From: Josh-CH.Chien at nanshan.com.tw (Chien, Josh-CH)
Date: Wed, 14 Jan 2015 11:46:08 +0800
Subject: [R-SIG-Finance] RQuantLib - Discount Curve Object
Message-ID: <A29A84E40742CB43BBAE51703694429A6EC53EC272@WNSP3NSLXMBV1.nsli.net>

Hi All,
In my case, I already have discount curve to price bond.
Don't build discount curve.
>From Tech Doc about RQuantlib, in pricing bond function, FixedRateBond(bond,coupon.rate,schedule,calc,discountCurve=curves)
I need a a object of DiscountCurve class, DiscountCurve, as input parameter.
DiscountCurve Object build from "DiscountCurve(params, tsQuotes, times)"
I don't have tsQuotes because I already have own discount curve.
How to get new Discountcurve object instead of old one for pricing bond function ?

Thanks a lot.


______________________________________
JOSH CHIEN
Risk Analytics & Projects
Enterprise Risk Management (ERM) Dept.
Nan Shan Life Insurance Co.
Email: Josh-CH.Chien at NANSHAN.com.tw<mailto:Matt-CM.Tsao at NANSHAN.com.tw>
DID: +886-2-8758-9522


________________________________
"NOTICE: The e-mail, and any attachments thereto, may co...{{dropped:12}}


From edd at debian.org  Wed Jan 14 05:01:39 2015
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 13 Jan 2015 22:01:39 -0600
Subject: [R-SIG-Finance] RQuantLib - Discount Curve Object
In-Reply-To: <A29A84E40742CB43BBAE51703694429A6EC53EC272@WNSP3NSLXMBV1.nsli.net>
References: <A29A84E40742CB43BBAE51703694429A6EC53EC272@WNSP3NSLXMBV1.nsli.net>
Message-ID: <21685.59939.559119.252044@max.nulle.part>


On 14 January 2015 at 11:46, Chien, Josh-CH wrote:
| Hi All,
| 
| In my case, I already have discount curve to price bond.
| 
| Don?t build discount curve.
| 
| From Tech Doc about RQuantlib, in pricing bond function, FixedRateBond
| (bond,coupon.rate,schedule,calc,discountCurve=curves)
| 
| I need a a object of DiscountCurve class, DiscountCurve, as input parameter.
| 
| DiscountCurve Object build from ?DiscountCurve(params, tsQuotes, times)?
| 
| I don?t have tsQuotes because I already have own discount curve.
| 
| How to get new Discountcurve object instead of old one for pricing bond
| function ?

You may have to resort to doing work in C++ (or use one of the other
interfaces to QL) as RQuantLib makes no claim to be full and complete.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From luyo13ab at student.cbs.dk  Sat Jan 17 16:29:49 2015
From: luyo13ab at student.cbs.dk (Ludovic Mbakop Yopa)
Date: Sat, 17 Jan 2015 15:29:49 +0000
Subject: [R-SIG-Finance] Fw: VaR with ARMA and Garch
In-Reply-To: <1421507564721.48169@student.cbs.dk>
References: <1421507564721.48169@student.cbs.dk>
Message-ID: <1421508589402.4955@student.cbs.dk>

________________________________
From: Ludovic Mbakop Yopa
Sent: Saturday, January 17, 2015 3:12 PM
To: r-sig-finance at r-project.org
Subject: VaR with ARMA and Garch


Good Evening,



I am Ludovic , please

I would like to compute the 1 day ahead VaR for a timeseries of returns. i would also like the innovations of the Arma and Garch to have a MNTS distributions .
 i know the first step looks like
t2= garchFit(formula = ~arma(1, 1) + garch(1, 1), data = RBK,
cond.dist = "")

Please what should the next steps be

should i use   t3=predict(t2, n.ahead = )?
 how do i specify the MNTS distribution into the the garchfit function
what is the difference between Predict and Fitted .

Please how do i get The 1?day ahead VaR
Thank you for your time
best Regards.
Ludovic       luyo13ab at student.cbs.dk<mailto:luyo13ab at student.cbs.dk>

	[[alternative HTML version deleted]]


From luyo13ab at student.cbs.dk  Sat Jan 17 19:10:29 2015
From: luyo13ab at student.cbs.dk (Ludovic Mbakop Yopa)
Date: Sat, 17 Jan 2015 18:10:29 +0000
Subject: [R-SIG-Finance] VaR with ARMA-GARCH innovations in fGarch
In-Reply-To: <1421508589402.4955@student.cbs.dk>
References: <1421507564721.48169@student.cbs.dk>,
	<1421508589402.4955@student.cbs.dk>
Message-ID: <1421518229279.2440@student.cbs.dk>

________________________________



Good Evening from Copenhagen ,



Hi my name is Ludovic please i have a quick question



I would like to compute the 1 day ahead VaR for a timeseries of returns with Arma(1,1)-Garch innovations the time series has 1510 observations .
 i know the first step looks like
t2= garchFit(formula = ~arma(1, 1) + garch(1, 1), data = RBK,
cond.dist = "")

Please what should the next steps be

should i use   t3=predict(t2, n.ahead = )?
what is the difference between Predict and Fitted in the Fgarch Package .

Please how do i get The 1?day ahead VaR
Thank you for your time
best Regards.
Ludovic       luyo13ab at student.cbs.dk<mailto:luyo13ab at student.cbs.dk>

	[[alternative HTML version deleted]]


From alex.badoi1 at gmail.com  Tue Jan 20 01:24:14 2015
From: alex.badoi1 at gmail.com (Alex Badoi)
Date: Tue, 20 Jan 2015 01:24:14 +0100
Subject: [R-SIG-Finance] Extract Fama and French coefficients at each t
	point in time on one asset
Message-ID: <CAM8W6CYX8cPM9s+dk6BV+MzJ=aUSa5wELR5k4b37CxCoL2D+Tg@mail.gmail.com>

Hello,

My name is Alex B, Financial Economics student. I am using R to write my
thesis i am in need of a bit of programming help. I have been using the
program for just over a month so i'm still not familiar with all the
functions and packages. I am trying to extract Fama and French coefficient
data to CSV for further analysis and factor portfolio formation.

I am using the package nlme with the following regression equation:

fund.xcess ~ rmrf + smb + hml + rmw + cma

What i am trying to do:
I have a time series of daily asset prices from 2009 to 2015 and i am
trying to estimate the regression coefficients at each period in time
starting with 2010 and using the last year for my first estimate such that
i have a time series of regression coefficients. The end result would
ideally be a .csv file with coefficient estimates  rmrf , smb , hml, rmw
and cma as columns and dates ranging from 2010 to 2015 as rows.

Here is what i have so far:

# Load data into R
setwd("/Users/alexbadoi/Desktop/College/Postgrad/Master/Seminar Pc/R")
ff_data = read.csv("ff5_bab_qmj.csv", header = TRUE, sep=",")
library(nlme)

# Assign Fama-French Factor Data

rmrf <- ff_data[,2]/100
rf <- ff_data[,7]/100
smb <- ff_data[,3]/100
hml <- ff_data[,4]/100
rmw <- ff_data[,5]/100
cma <- ff_data[,6]/100

#perform regression

i = nrow(ff_data)

for(i in 58){
fund <- ff_data[11,i+1]/100
fund.xcess <- fund - rf
ffgls <- gls(fund.xcess ~ rmrf + smb + hml + rmw + cma,
             correlation=corARMA(p=1, q=1), method='ML')

output <- data.frame(ffgls$coefficients)

write.table(output, file="test123.csv", sep=",", dec=".", col.names=FALSE,
append=TRUE)
print(summary(ffgls))
}


My asset returns are at [,11].
the ff5_bab_qmj.csv file contains Fama and French factor data, rf and
returns of asset a

Any help would be very much appreciated.
Thank you in advance.

	[[alternative HTML version deleted]]


From ilya.kipnis at gmail.com  Tue Jan 20 01:29:56 2015
From: ilya.kipnis at gmail.com (Ilya Kipnis)
Date: Mon, 19 Jan 2015 19:29:56 -0500
Subject: [R-SIG-Finance] Extract Fama and French coefficients at each t
 point in time on one asset
In-Reply-To: <CAM8W6CYX8cPM9s+dk6BV+MzJ=aUSa5wELR5k4b37CxCoL2D+Tg@mail.gmail.com>
References: <CAM8W6CYX8cPM9s+dk6BV+MzJ=aUSa5wELR5k4b37CxCoL2D+Tg@mail.gmail.com>
Message-ID: <CA+oJuEGr4HnZgOh5-3=p6Ne6E6J5+JPB_CNuNXAzzy=QON5=+A@mail.gmail.com>

I highly recommend you look into the xts package and its endpoints
functionality. That may solve a lot of your hassles. Furthermore, I also
recommend you use a list data structure and append to it at every iteration
before combining it into your output data frame and only writing it once.
Take note of the weights <- list(), weights[[i]] <- periodWeights, and
weights <- do.call(rbind, periodWeights) lines.

On Mon, Jan 19, 2015 at 7:24 PM, Alex Badoi <alex.badoi1 at gmail.com> wrote:

> Hello,
>
> My name is Alex B, Financial Economics student. I am using R to write my
> thesis i am in need of a bit of programming help. I have been using the
> program for just over a month so i'm still not familiar with all the
> functions and packages. I am trying to extract Fama and French coefficient
> data to CSV for further analysis and factor portfolio formation.
>
> I am using the package nlme with the following regression equation:
>
> fund.xcess ~ rmrf + smb + hml + rmw + cma
>
> What i am trying to do:
> I have a time series of daily asset prices from 2009 to 2015 and i am
> trying to estimate the regression coefficients at each period in time
> starting with 2010 and using the last year for my first estimate such that
> i have a time series of regression coefficients. The end result would
> ideally be a .csv file with coefficient estimates  rmrf , smb , hml, rmw
> and cma as columns and dates ranging from 2010 to 2015 as rows.
>
> Here is what i have so far:
>
> # Load data into R
> setwd("/Users/alexbadoi/Desktop/College/Postgrad/Master/Seminar Pc/R")
> ff_data = read.csv("ff5_bab_qmj.csv", header = TRUE, sep=",")
> library(nlme)
>
> # Assign Fama-French Factor Data
>
> rmrf <- ff_data[,2]/100
> rf <- ff_data[,7]/100
> smb <- ff_data[,3]/100
> hml <- ff_data[,4]/100
> rmw <- ff_data[,5]/100
> cma <- ff_data[,6]/100
>
> #perform regression
>
> i = nrow(ff_data)
>
> for(i in 58){
> fund <- ff_data[11,i+1]/100
> fund.xcess <- fund - rf
> ffgls <- gls(fund.xcess ~ rmrf + smb + hml + rmw + cma,
>              correlation=corARMA(p=1, q=1), method='ML')
>
> output <- data.frame(ffgls$coefficients)
>
> write.table(output, file="test123.csv", sep=",", dec=".", col.names=FALSE,
> append=TRUE)
> print(summary(ffgls))
> }
>
>
> My asset returns are at [,11].
> the ff5_bab_qmj.csv file contains Fama and French factor data, rf and
> returns of asset a
>
> Any help would be very much appreciated.
> Thank you in advance.
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From zadig_1 at excite.com  Tue Jan 20 02:38:21 2015
From: zadig_1 at excite.com (ce)
Date: Mon, 19 Jan 2015 20:38:21 -0500
Subject: [R-SIG-Finance] IBrokers Package: wrong Clientid returns ?
Message-ID: <20150119203821.5526@web003.roc2.bluetie.com>


Dear all,

I just upgraded TWS to Build 948.3c, Jan 5, 2015 5:12:23 PM 
My program that worked fine before started to return wrong clientid . I set client ID to 96. but after sending the order, In order status , or order execution events I get clientid 6  !!  Even I tried to set Master API Client ID to 96 in TWS -> Configuration -> API.  didn't work. 
If I set Clientid to 6,  TWS returns 0 as Clientid.

Here is some piece of code :

> ibClientId <- 96
> 
> 
> #global: create the connection to IB  (this can probably not be stored anywhere, so
> #we have to recreate it within "IBexecuteStrategy.r"
> ibConnection<-NULL
> if (!is.twsConnection(ibConnection)) {
+    ibConnection<- twsConnect(clientId=ibClientId, host="localhost",
+                                       port=7496, verbose=TRUE,
+                                       timeout=15, filename=NULL)
+ }
> print(ibConnection)
<twsConnection,96 @ 20150119 20:25:19 EST, nextId=4>

TWS OpenOrder: orderId=3 clientId=6 conId=12087807 symbol=EUR status=Submitted


From josh.m.ulrich at gmail.com  Tue Jan 20 16:37:53 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 20 Jan 2015 09:37:53 -0600
Subject: [R-SIG-Finance] R/Finance 2015 Call for Papers
In-Reply-To: <CAPPM_gStdyAJBr8E7SygQ-5WKCaXUYcB95Xajy063Z0WFRPd4A@mail.gmail.com>
References: <CAPPM_gStdyAJBr8E7SygQ-5WKCaXUYcB95Xajy063Z0WFRPd4A@mail.gmail.com>
Message-ID: <CAPPM_gS4wwCEU77BUtHf_uy01HZ-JYJ3go5hS35_z5xu_SKm6Q@mail.gmail.com>

A friendly reminder that the CFP deadline (Jan-31) is less than two weeks away!

For the committee,
Josh

On Tue, Nov 18, 2014 at 1:30 PM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> Call for Papers:
>
> R/Finance 2015: Applied Finance with R
> May 29 and 30, 2015
> University of Illinois at Chicago
>
> The seventh annual R/Finance conference for applied finance using R
> will be held on May 29 and 30, 2015 in Chicago, IL, USA at the
> University of Illinois at Chicago.  The conference will cover topics
> including portfolio management, time series analysis, advanced risk
> tools, high-performance computing, market microstructure, and
> econometrics. All will be discussed within the context of using R as a
> primary tool for financial risk management, portfolio construction,
> and trading.
>
> Over the past six years, R/Finance has included attendees from around
> the world. It has featured presentations from prominent academics and
> practitioners, and we anticipate another exciting line-up for 2015.
> This year will include invited keynote presentations by Emanuel
> Derman, Louis Marascio, Alexander McNeil, and Rishi Narang.
>
> We invite you to submit complete papers in pdf format for
> consideration. We will also consider one-page abstracts (in txt or pdf
> format) although more complete papers are preferred.  We welcome
> submissions for both full talks and abbreviated "lightning talks."
> Both academic and practitioner proposals related to R are encouraged.
>
> All slides will be made publicly available at conference time.
> Presenters are strongly encouraged to provide working R code to
> accompany the slides.  Data sets should also be made public for the
> purposes of reproducibility (though we realize this may be limited due
> to contracts with data vendors). Preference may be given to presenters
> who have released R packages.
>
> The conference will award two (or more) $1000 prizes for best papers.
> A submission must be a full paper to be eligible for a best paper
> award. Extended abstracts, even if a full paper is provided by
> conference time, are not eligible for a best paper award.  Financial
> assistance for travel and accommodation may be available to
> presenters, however requests must be made at the time of submission.
> Assistance will be granted at the discretion of the conference
> committee.
>
> Please make your submission online at: http://www.cvent.com/d/t4qy73.
>
> The submission deadline is January 31, 2015. Submitters will be
> notified via email by February 28, 2015 of acceptance, presentation
> length, and financial assistance (if requested).
>
> Additional details will be announced via the conference website
>
> http://www.RinFinance.com/
>
> as they become available. Information on previous years' presenters
> and their presentations are also at the conference website.
>
> For the program committee:
> Gib Bassett, Peter Carl, Dirk Eddelbuettel, Brian Peterson, Dale
> Rosenthal, Jeffrey Ryan, Joshua Ulrich


-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From censix0 at gmail.com  Tue Jan 20 21:04:00 2015
From: censix0 at gmail.com (cen six)
Date: Tue, 20 Jan 2015 21:04:00 +0100
Subject: [R-SIG-Finance] IBrokers Package: wrong Clientid returns ?
In-Reply-To: <20150119203821.5526@web003.roc2.bluetie.com>
References: <20150119203821.5526@web003.roc2.bluetie.com>
Message-ID: <CAOGDGTZHheGwHioxcEuCe_W6-9jLpeLneM+hM-oCtYdf4Hmx=w@mail.gmail.com>

Are you using the IBrokers package version 0.9-10  or higher ? (from
code.google.com)

cheers

On Tue, Jan 20, 2015 at 2:38 AM, ce <zadig_1 at excite.com> wrote:

>
> Dear all,
>
> I just upgraded TWS to Build 948.3c, Jan 5, 2015 5:12:23 PM
> My program that worked fine before started to return wrong clientid . I
> set client ID to 96. but after sending the order, In order status , or
> order execution events I get clientid 6  !!  Even I tried to set Master API
> Client ID to 96 in TWS -> Configuration -> API.  didn't work.
> If I set Clientid to 6,  TWS returns 0 as Clientid.
>
> Here is some piece of code :
>
> > ibClientId <- 96
> >
> >
> > #global: create the connection to IB  (this can probably not be stored
> anywhere, so
> > #we have to recreate it within "IBexecuteStrategy.r"
> > ibConnection<-NULL
> > if (!is.twsConnection(ibConnection)) {
> +    ibConnection<- twsConnect(clientId=ibClientId, host="localhost",
> +                                       port=7496, verbose=TRUE,
> +                                       timeout=15, filename=NULL)
> + }
> > print(ibConnection)
> <twsConnection,96 @ 20150119 20:25:19 EST, nextId=4>
>
> TWS OpenOrder: orderId=3 clientId=6 conId=12087807 symbol=EUR
> status=Submitted
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From zadig_1 at excite.com  Wed Jan 21 01:51:42 2015
From: zadig_1 at excite.com (ce)
Date: Tue, 20 Jan 2015 19:51:42 -0500
Subject: [R-SIG-Finance] IBrokers Package: wrong Clientid returns ?
Message-ID: <20150120195142.2084@web003.roc2.bluetie.com>


Hi Cen six,

I am using IBrokers 0.9.12 from cran r web site. 
In fact I was testing the demo program from you emailed me. It was working fine but one or two weeks ago event handler started to fail ( maybe after IBrokers update )  as I explained in : https://groups.yahoo.com/neo/groups/TWSAPI/conversations/messages/33071

then I upgraded TWS but now clientid returned by event handler is wrong. 
Maybe I should downgrade IBrokers or TWS ?

ce


-----Original Message-----
From: "cen six" [censix0 at gmail.com]
Date: 01/20/2015 03:04 PM
To: "ce" <zadig_1 at excite.com>
CC: "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
Subject: Re: [R-SIG-Finance] IBrokers Package: wrong Clientid returns ?

Are you using the IBrokers package version 0.9-10? or higher ? (from code.google.com)


cheers


On Tue, Jan 20, 2015 at 2:38 AM, ce <zadig_1 at excite.com> wrote:

Dear all,

I just upgraded TWS to Build 948.3c, Jan 5, 2015 5:12:23 PM
My program that worked fine before started to return wrong clientid . I set client ID to 96. but after sending the order, In order status , or order execution events I get clientid 6? !!? Even I tried to set Master API Client ID to 96 in TWS -> Configuration -> API.? didnt work.
If I set Clientid to 6,? TWS returns 0 as Clientid.

Here is some piece of code :

> ibClientId <- 96
>
>
> #global: create the connection to IB? (this can probably not be stored anywhere, so
> #we have to recreate it within "IBexecuteStrategy.r"
> ibConnection<-NULL
> if (!is.twsConnection(ibConnection)) {
+? ? ibConnection<- twsConnect(clientId=ibClientId, host="localhost",
+? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?port=7496, verbose=TRUE,
+? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?timeout=15, filename=NULL)
+ }
> print(ibConnection)
<twsConnection,96 @ 20150119 20:25:19 EST, nextId=4>

TWS OpenOrder: orderId=3 clientId=6 conId=12087807 symbol=EUR status=Submitted

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From zadig_1 at excite.com  Wed Jan 21 04:07:29 2015
From: zadig_1 at excite.com (ce)
Date: Tue, 20 Jan 2015 22:07:29 -0500
Subject: [R-SIG-Finance] IBrokers Package: wrong Clientid returns ?
Message-ID: <20150120220729.23483@web005.roc2.bluetie.com>


I downgraded IBrokers version to 0.9-10, while keeping TWS Build 948.3c, Jan 5, 2015 5:12:23 PM , 
still I got the wrong clientid from TWS. 

Then I downgraded TWS to  Build 945.2b, Jun 3, 2014 11:11:57 AM and it worked correctly with IBrokers 0.9-10

I see my clientid 96 is returned from TWS :

TWS OpenOrder: orderId=2 clientId=96 conId=14321015 symbol=GBP status=Filled 


-----Original Message-----
From: "ce" [zadig_1 at excite.com]
Date: 01/20/2015 07:52 PM
To: censix0 at gmail.com
CC: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] IBrokers Package: wrong Clientid returns ?


Hi Cen six,

I am using IBrokers 0.9.12 from cran r web site. 
In fact I was testing the demo program from you emailed me. It was working fine but one or two weeks ago event handler started to fail ( maybe after IBrokers update )  as I explained in : https://groups.yahoo.com/neo/groups/TWSAPI/conversations/messages/33071

then I upgraded TWS but now clientid returned by event handler is wrong. 
Maybe I should downgrade IBrokers or TWS ?

ce


-----Original Message-----
From: "cen six" [censix0 at gmail.com]
Date: 01/20/2015 03:04 PM
To: "ce" <zadig_1 at excite.com>
CC: "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
Subject: Re: [R-SIG-Finance] IBrokers Package: wrong Clientid returns ?

Are you using the IBrokers package version 0.9-10? or higher ? (from code.google.com)


cheers


On Tue, Jan 20, 2015 at 2:38 AM, ce <zadig_1 at excite.com> wrote:

Dear all,

I just upgraded TWS to Build 948.3c, Jan 5, 2015 5:12:23 PM
My program that worked fine before started to return wrong clientid . I set client ID to 96. but after sending the order, In order status , or order execution events I get clientid 6? !!? Even I tried to set Master API Client ID to 96 in TWS -> Configuration -> API.? didnt work.
If I set Clientid to 6,? TWS returns 0 as Clientid.

Here is some piece of code :

> ibClientId <- 96
>
>
> #global: create the connection to IB? (this can probably not be stored anywhere, so
> #we have to recreate it within "IBexecuteStrategy.r"
> ibConnection<-NULL
> if (!is.twsConnection(ibConnection)) {
+? ? ibConnection<- twsConnect(clientId=ibClientId, host="localhost",
+? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?port=7496, verbose=TRUE,
+? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?timeout=15, filename=NULL)
+ }
> print(ibConnection)
<twsConnection,96 @ 20150119 20:25:19 EST, nextId=4>

TWS OpenOrder: orderId=3 clientId=6 conId=12087807 symbol=EUR status=Submitted

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should g


From Olivier.Martin at avignon.inra.fr  Wed Jan 21 11:21:22 2015
From: Olivier.Martin at avignon.inra.fr (Olivier MARTIN)
Date: Wed, 21 Jan 2015 11:21:22 +0100
Subject: [R-SIG-Finance] Help with quantstrat
Message-ID: <54BF7DA2.2080602@avignon.inra.fr>

Hi all,

I am beginner with quantstrat. I would like to try a simple strategy but 
I have some
difficulties to program it. The strategy is based on two signals : the 
CCI and the RSI.
First, I compute RSI and CCI for period n=21. Let's denote them rsi21 
and cci21.
Secondly, I compute two moving average for rsi21 and cci21 with two
periodes : 8 and 14. I obtain four signals. Let's denote i3 and i4 for
rsi21, and i5 and i6 for cci21.
Finally, I  enter for a long position if (i3>i4)&(i5>i6)
I enter for a short position if (i3<i4)&(i5<i6)
I exit for a long or a short position when it is flat.

###
rsi21=RSI(Cl(mktdata),n=21)
cci21=RSI(Cl(mktdata),n=21)
i3 is equal to  SMA(rsi21,8)
i4 is equal to  SMA(rsi21,14)
i5 is equal to  SMA(cci21,8)
i6 is equal to  SMA(cci21,14)

up=(i3>i4)&(i5>i6)
dn=(i3<i4)&(i5<i6)
flat=!up & !dn
###


So I try to program these strategy but I don't know how to take
into account the different boolean conditions with the add.rule() function

#indicators
add.indicator(strategy =mystrategy, name = "SMA",arguments = list(x = 
quote(RSI(Cl(mktdata),n=8)), n=20), label="i3")
add.indicator(strategy =mystrategy, name = "SMA",arguments = list(x = 
quote(RSI(Cl(mktdata),n=14)), n=20), label="i4")
add.indicator(strategy =mystrategy, name = "SMA",arguments = list(x = 
quote(CCI(Cl(mktdata),n=8)), n=20), label="i5")
add.indicator(strategy =mystrategy, name = "SMA",arguments = list(x = 
quote(CCI(Cl(mktdata),n=14)), n=20), label="i6")

#signals
add.signal(mystrategy,name="sigCrossover",arguments = 
list(columns=c("i3","i4"),relationship="gt"),  label="i3.gt.i4")
add.signal(mystrategy,name="sigCrossover",  arguments = 
list(columns=c("i5","i6"),relationship="gt"),  label="i5.gt.i6")
add.signal(mystrategy,name="sigCrossover",  arguments = 
list(columns=c("i3","i4"),relationship="lt"),  label="i3.lt.i4")
add.signal(mystrategy,name="sigCrossover",  arguments = 
list(columns=c("i5","i6"),relationship="lt"),  label="i5.lt.i6")

#rules
  ???????




Could someone help me ?
Best regards,
Olivier.


From andreas.keller at gmail.com  Wed Jan 21 11:38:47 2015
From: andreas.keller at gmail.com (Andreas Keller Leth Laursen)
Date: Wed, 21 Jan 2015 11:38:47 +0100
Subject: [R-SIG-Finance] Passing optim.control arima arguments to ugarchfit
	in rugarch
Message-ID: <CAJ86KjMum4T2D8FPAJRQ0FvfuBLSkPMiD=wSufViOX_mnfvsCQ@mail.gmail.com>

Dear all

I am currently estimating a number of GARCH models using the excellent
rugarch package.

I am however having a small problem, as the mean equation has convergence
problems. It is a simple ARMA(6,5) model, that is being used as mean
equation.

When estimating the mean equation, I understand that ugarchfit() use the
standard arima() function. Is there a way to pass optim.control arguments
to the arima solver? A simple increase in the default maxit should solve
the problem, but I cannot figure out if there is a way to pass this
argument.

As a small hack I have tried to simply give the arma(6,5) estimates as
stating values to ugarchspec() using arima() with a higher maxit.
However, ugarchfit() still reports convergence problems in the mean
equation, when I attempt this.

Any help will be much appreciated.

Current code:

arima_start_val <- arima(input_series, order = c(6, 0, 5), optim.control =
list(maxit = 2000)) %>%
    coef %>%
    as.list

names(arima_start_val) <- c("ar1", "ar2", "ar3", "ar4", "ar5", "ar6",
"ma1", "ma2", "ma3", "ma4",     "ma5", "mu")

model <- ugarchspec(
    variance.model = list(model = "sGARCH",  garchOrder = c(1, 1)),
    mean.model = list(armaOrder = c(6, 5)),
    start.pars = arima_start_val,
    distribution = "norm")

ugarchfit(spec = model, data = input_series)

Best regards,
Andreas Keller

--
Andreas Keller

	[[alternative HTML version deleted]]


From pierre at lequeux.org  Wed Jan 21 12:13:20 2015
From: pierre at lequeux.org (Pierre Org)
Date: Wed, 21 Jan 2015 11:13:20 -0000
Subject: [R-SIG-Finance] Portfolio Optimisation as a function of targeted
	Risk rather than return.
Message-ID: <001401d0356b$4432b110$cc981330$@org>

I am currently working on a portfolio optimisation strategy that would
involves optimising  a portfolio so that it maximises the returns for a user
defined level of risk.   E.g. keeping the volatility of the portfolio at 10%
annualised whilst maximising the return for this level. For that purpose I
was hoping to use the function maxreturnPortfolio  in fPortfolio that should
return the portfolio with the maximal return for a fixed target risk.
Clearly  though showing in this great package the function has been/is  in
development by the authors of the package and currently does not work as
intended. This is confirmed  by various posts and answer to those by the
authors.   I wonder if anyone knows of another more up to date  package or
way of doing this in R ? 

 

Any help would be really appreciated.

 

 

 


	[[alternative HTML version deleted]]


From alexios at 4dscape.com  Wed Jan 21 12:19:21 2015
From: alexios at 4dscape.com (alexios)
Date: Wed, 21 Jan 2015 11:19:21 +0000
Subject: [R-SIG-Finance] Passing optim.control arima arguments to
 ugarchfit in rugarch
In-Reply-To: <CAJ86KjMum4T2D8FPAJRQ0FvfuBLSkPMiD=wSufViOX_mnfvsCQ@mail.gmail.com>
References: <CAJ86KjMum4T2D8FPAJRQ0FvfuBLSkPMiD=wSufViOX_mnfvsCQ@mail.gmail.com>
Message-ID: <54BF8B39.9010002@4dscape.com>

Hi,

arima is only used to obtain mean equation starting values for the joint 
recursion which is then ML based. Your best bet is to try using 
solver="gosolnp" which searches the parameter space for good starting 
values.
Also, try setting variance.targeting=TRUE (in variance.model), and 
fit.control=list(scale=1).

Ofcourse, this is all dependent on using a reasonable amount of data for 
the estimation (already discussed numerous times over the years).

Regards,

Alexios

On 21/01/2015 10:38, Andreas Keller Leth Laursen wrote:
> Dear all
>
> I am currently estimating a number of GARCH models using the excellent
> rugarch package.
>
> I am however having a small problem, as the mean equation has convergence
> problems. It is a simple ARMA(6,5) model, that is being used as mean
> equation.
>
> When estimating the mean equation, I understand that ugarchfit() use the
> standard arima() function. Is there a way to pass optim.control arguments
> to the arima solver? A simple increase in the default maxit should solve
> the problem, but I cannot figure out if there is a way to pass this
> argument.
>
> As a small hack I have tried to simply give the arma(6,5) estimates as
> stating values to ugarchspec() using arima() with a higher maxit.
> However, ugarchfit() still reports convergence problems in the mean
> equation, when I attempt this.
>
> Any help will be much appreciated.
>
> Current code:
>
> arima_start_val <- arima(input_series, order = c(6, 0, 5), optim.control =
> list(maxit = 2000)) %>%
>      coef %>%
>      as.list
>
> names(arima_start_val) <- c("ar1", "ar2", "ar3", "ar4", "ar5", "ar6",
> "ma1", "ma2", "ma3", "ma4",     "ma5", "mu")
>
> model <- ugarchspec(
>      variance.model = list(model = "sGARCH",  garchOrder = c(1, 1)),
>      mean.model = list(armaOrder = c(6, 5)),
>      start.pars = arima_start_val,
>      distribution = "norm")
>
> ugarchfit(spec = model, data = input_series)
>
> Best regards,
> Andreas Keller
>
> --
> Andreas Keller
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>


From andreas.keller at gmail.com  Wed Jan 21 13:55:32 2015
From: andreas.keller at gmail.com (Andreas Keller Leth Laursen)
Date: Wed, 21 Jan 2015 13:55:32 +0100
Subject: [R-SIG-Finance] Passing optim.control arima arguments to
 ugarchfit in rugarch
In-Reply-To: <54BF8B39.9010002@4dscape.com>
References: <CAJ86KjMum4T2D8FPAJRQ0FvfuBLSkPMiD=wSufViOX_mnfvsCQ@mail.gmail.com>
	<54BF8B39.9010002@4dscape.com>
Message-ID: <CAJ86KjNteLqd764br+mx_Hx=nwsRgf1JUq+MHS3a0mL6wHNF2A@mail.gmail.com>

Ah, a misunderstanding on my part. Of course it makes perfect sense that
they are jointly estimated.

Thanks for the suggestions and the swift response.

Best regards,

Andreas

--
Andreas Keller
M.Sc. student in Economics and Management

On Wed, Jan 21, 2015 at 12:19 PM, alexios <alexios at 4dscape.com> wrote:

> Hi,
>
> arima is only used to obtain mean equation starting values for the joint
> recursion which is then ML based. Your best bet is to try using
> solver="gosolnp" which searches the parameter space for good starting
> values.
> Also, try setting variance.targeting=TRUE (in variance.model), and
> fit.control=list(scale=1).
>
> Ofcourse, this is all dependent on using a reasonable amount of data for
> the estimation (already discussed numerous times over the years).
>
> Regards,
>
> Alexios
>
>
> On 21/01/2015 10:38, Andreas Keller Leth Laursen wrote:
>
>> Dear all
>>
>> I am currently estimating a number of GARCH models using the excellent
>> rugarch package.
>>
>> I am however having a small problem, as the mean equation has convergence
>> problems. It is a simple ARMA(6,5) model, that is being used as mean
>> equation.
>>
>> When estimating the mean equation, I understand that ugarchfit() use the
>> standard arima() function. Is there a way to pass optim.control arguments
>> to the arima solver? A simple increase in the default maxit should solve
>> the problem, but I cannot figure out if there is a way to pass this
>> argument.
>>
>> As a small hack I have tried to simply give the arma(6,5) estimates as
>> stating values to ugarchspec() using arima() with a higher maxit.
>> However, ugarchfit() still reports convergence problems in the mean
>> equation, when I attempt this.
>>
>> Any help will be much appreciated.
>>
>> Current code:
>>
>> arima_start_val <- arima(input_series, order = c(6, 0, 5), optim.control =
>> list(maxit = 2000)) %>%
>>      coef %>%
>>      as.list
>>
>> names(arima_start_val) <- c("ar1", "ar2", "ar3", "ar4", "ar5", "ar6",
>> "ma1", "ma2", "ma3", "ma4",     "ma5", "mu")
>>
>> model <- ugarchspec(
>>      variance.model = list(model = "sGARCH",  garchOrder = c(1, 1)),
>>      mean.model = list(armaOrder = c(6, 5)),
>>      start.pars = arima_start_val,
>>      distribution = "norm")
>>
>> ugarchfit(spec = model, data = input_series)
>>
>> Best regards,
>> Andreas Keller
>>
>> --
>> Andreas Keller
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>>
>>
>

	[[alternative HTML version deleted]]


From anshul.bits at gmail.com  Wed Jan 21 16:45:55 2015
From: anshul.bits at gmail.com (Anshul Pandey)
Date: Wed, 21 Jan 2015 21:15:55 +0530
Subject: [R-SIG-Finance] CUSIP Numbers
Message-ID: <CAFUr=9XSssswiQVdWxGNEaBEEKPc=cjKS3R+utj=3gmvSbLNZQ@mail.gmail.com>

Hi All,

I am moving some of my backtesting logics to CUSIP from tickers.
How do I download the CUSIP number of US stocks?

I know S&P has a paid subscription, but I read that CUSIP is publicly
available at a few resources.

Any suggestions are highly welcome.

Thanks
Anshul

	[[alternative HTML version deleted]]


From ilya.kipnis at gmail.com  Wed Jan 21 16:49:31 2015
From: ilya.kipnis at gmail.com (Ilya Kipnis)
Date: Wed, 21 Jan 2015 10:49:31 -0500
Subject: [R-SIG-Finance] Portfolio Optimisation as a function of
 targeted Risk rather than return.
In-Reply-To: <001401d0356b$4432b110$cc981330$@org>
References: <001401d0356b$4432b110$cc981330$@org>
Message-ID: <CA+oJuEGPT1CkYrU2dc-DHU9D6hQvJFGhr9Rag5k9-gGD9KBwMg@mail.gmail.com>

Check out the PortfolioAnalytics package.

On Wed, Jan 21, 2015 at 6:13 AM, Pierre Org <pierre at lequeux.org> wrote:

> I am currently working on a portfolio optimisation strategy that would
> involves optimising  a portfolio so that it maximises the returns for a
> user
> defined level of risk.   E.g. keeping the volatility of the portfolio at
> 10%
> annualised whilst maximising the return for this level. For that purpose I
> was hoping to use the function maxreturnPortfolio  in fPortfolio that
> should
> return the portfolio with the maximal return for a fixed target risk.
> Clearly  though showing in this great package the function has been/is  in
> development by the authors of the package and currently does not work as
> intended. This is confirmed  by various posts and answer to those by the
> authors.   I wonder if anyone knows of another more up to date  package or
> way of doing this in R ?
>
>
>
> Any help would be really appreciated.
>
>
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From pierre at lequeux.org  Wed Jan 21 17:01:05 2015
From: pierre at lequeux.org (Pierre Org)
Date: Wed, 21 Jan 2015 16:01:05 -0000
Subject: [R-SIG-Finance] Portfolio Optimisation as a function of
	targeted Risk rather than return.
In-Reply-To: <CA+oJuEGPT1CkYrU2dc-DHU9D6hQvJFGhr9Rag5k9-gGD9KBwMg@mail.gmail.com>
References: <001401d0356b$4432b110$cc981330$@org>
	<CA+oJuEGPT1CkYrU2dc-DHU9D6hQvJFGhr9Rag5k9-gGD9KBwMg@mail.gmail.com>
Message-ID: <000601d03593$76905720$63b10560$@org>

Thank you Ilya, much appreciated

 

 

 

From: Ilya Kipnis [mailto:ilya.kipnis at gmail.com] 
Sent: 21 January 2015 15:50
To: Pierre Org
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Portfolio Optimisation as a function of targeted Risk rather than return.

 

Check out the PortfolioAnalytics package.

 

On Wed, Jan 21, 2015 at 6:13 AM, Pierre Org <pierre at lequeux.org> wrote:

I am currently working on a portfolio optimisation strategy that would
involves optimising  a portfolio so that it maximises the returns for a user
defined level of risk.   E.g. keeping the volatility of the portfolio at 10%
annualised whilst maximising the return for this level. For that purpose I
was hoping to use the function maxreturnPortfolio  in fPortfolio that should
return the portfolio with the maximal return for a fixed target risk.
Clearly  though showing in this great package the function has been/is  in
development by the authors of the package and currently does not work as
intended. This is confirmed  by various posts and answer to those by the
authors.   I wonder if anyone knows of another more up to date  package or
way of doing this in R ?



Any help would be really appreciated.








        [[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.




	[[alternative HTML version deleted]]


From censix0 at gmail.com  Wed Jan 21 17:24:26 2015
From: censix0 at gmail.com (cen six)
Date: Wed, 21 Jan 2015 17:24:26 +0100
Subject: [R-SIG-Finance] IBrokers Package: wrong Clientid returns ?
In-Reply-To: <20150120220729.23483@web005.roc2.bluetie.com>
References: <20150120220729.23483@web005.roc2.bluetie.com>
Message-ID: <CAOGDGTbe6O+o501R8Q5aFOMQZLAAzT8TECT4vo=1d+TQFkukOg@mail.gmail.com>

Well, for sure a downgrade of the TWS would fix it, but it's obviously not
a long term solution. Are you using a beta TWS version or a stable release ?

On Wed, Jan 21, 2015 at 4:07 AM, ce <zadig_1 at excite.com> wrote:

>
> I downgraded IBrokers version to 0.9-10, while keeping TWS Build 948.3c,
> Jan 5, 2015 5:12:23 PM ,
> still I got the wrong clientid from TWS.
>
> Then I downgraded TWS to  Build 945.2b, Jun 3, 2014 11:11:57 AM and it
> worked correctly with IBrokers 0.9-10
>
> I see my clientid 96 is returned from TWS :
>
> TWS OpenOrder: orderId=2 clientId=96 conId=14321015 symbol=GBP
> status=Filled
>
>
> -----Original Message-----
> From: "ce" [zadig_1 at excite.com]
> Date: 01/20/2015 07:52 PM
> To: censix0 at gmail.com
> CC: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] IBrokers Package: wrong Clientid returns ?
>
>
> Hi Cen six,
>
> I am using IBrokers 0.9.12 from cran r web site.
> In fact I was testing the demo program from you emailed me. It was working
> fine but one or two weeks ago event handler started to fail ( maybe after
> IBrokers update )  as I explained in :
> https://groups.yahoo.com/neo/groups/TWSAPI/conversations/messages/33071
>
> then I upgraded TWS but now clientid returned by event handler is wrong.
> Maybe I should downgrade IBrokers or TWS ?
>
> ce
>
>
> -----Original Message-----
> From: "cen six" [censix0 at gmail.com]
> Date: 01/20/2015 03:04 PM
> To: "ce" <zadig_1 at excite.com>
> CC: "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
> Subject: Re: [R-SIG-Finance] IBrokers Package: wrong Clientid returns ?
>
> Are you using the IBrokers package version 0.9-10  or higher ? (from
> code.google.com)
>
>
> cheers
>
>
> On Tue, Jan 20, 2015 at 2:38 AM, ce <zadig_1 at excite.com> wrote:
>
> Dear all,
>
> I just upgraded TWS to Build 948.3c, Jan 5, 2015 5:12:23 PM
> My program that worked fine before started to return wrong clientid . I
> set client ID to 96. but after sending the order, In order status , or
> order execution events I get clientid 6  !!  Even I tried to set Master API
> Client ID to 96 in TWS -> Configuration -> API.  didnt work.
> If I set Clientid to 6,  TWS returns 0 as Clientid.
>
> Here is some piece of code :
>
> > ibClientId <- 96
> >
> >
> > #global: create the connection to IB  (this can probably not be stored
> anywhere, so
> > #we have to recreate it within "IBexecuteStrategy.r"
> > ibConnection<-NULL
> > if (!is.twsConnection(ibConnection)) {
> +    ibConnection<- twsConnect(clientId=ibClientId, host="localhost",
> +                                       port=7496, verbose=TRUE,
> +                                       timeout=15, filename=NULL)
> + }
> > print(ibConnection)
> <twsConnection,96 @ 20150119 20:25:19 EST, nextId=4>
>
> TWS OpenOrder: orderId=3 clientId=6 conId=12087807 symbol=EUR
> status=Submitted
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should g
>

	[[alternative HTML version deleted]]


From ho.james.cs at gmail.com  Wed Jan 21 19:03:15 2015
From: ho.james.cs at gmail.com (James Ho)
Date: Wed, 21 Jan 2015 10:03:15 -0800
Subject: [R-SIG-Finance] CUSIP Numbers
In-Reply-To: <CAFUr=9XSssswiQVdWxGNEaBEEKPc=cjKS3R+utj=3gmvSbLNZQ@mail.gmail.com>
References: <CAFUr=9XSssswiQVdWxGNEaBEEKPc=cjKS3R+utj=3gmvSbLNZQ@mail.gmail.com>
Message-ID: <CAP3ozfuD4zXTub-cjnEFojmWPNP81RcSi0K3vbrVJcbucZqZLw@mail.gmail.com>

Hi Anshul,

CUSIP's are owned by S&P so they aren't really public. Anyhow, you wont
want to use those to backtest as they are driven by the underlying
company's name (imagine what happens to a CUSIP when there is any M&A
activity). MSCI Barra & S&P's Compustat's Point-In-Time ID's are built for
this type of backtesting. If you have access to BBID's that would be a
decent alternative but looking for an open source identifier system is
going to be tough. Good luck sir.

~James

On Wed, Jan 21, 2015 at 7:45 AM, Anshul Pandey <anshul.bits at gmail.com>
wrote:

> Hi All,
>
> I am moving some of my backtesting logics to CUSIP from tickers.
> How do I download the CUSIP number of US stocks?
>
> I know S&P has a paid subscription, but I read that CUSIP is publicly
> available at a few resources.
>
> Any suggestions are highly welcome.
>
> Thanks
> Anshul
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From aschmid1 at stevens.edu  Wed Jan 21 19:14:50 2015
From: aschmid1 at stevens.edu (aschmid1)
Date: Wed, 21 Jan 2015 13:14:50 -0500
Subject: [R-SIG-Finance] CUSIP Numbers
In-Reply-To: <CAP3ozfuD4zXTub-cjnEFojmWPNP81RcSi0K3vbrVJcbucZqZLw@mail.gmail.com>
References: <CAFUr=9XSssswiQVdWxGNEaBEEKPc=cjKS3R+utj=3gmvSbLNZQ@mail.gmail.com>
	<CAP3ozfuD4zXTub-cjnEFojmWPNP81RcSi0K3vbrVJcbucZqZLw@mail.gmail.com>
Message-ID: <f4905c16872e59021a1f5289bf0f791d@stevens.edu>

Fidelity customers can find CUSIPs (one at a time):
  http://activequote.fidelity.com/mmnet/SymLookup.phtml

On 01/21/2015 1:03 PM, James Ho wrote:
> Hi Anshul,
> 
> CUSIP's are owned by S&P so they aren't really public. Anyhow, you wont
> want to use those to backtest as they are driven by the underlying
> company's name (imagine what happens to a CUSIP when there is any M&A
> activity). MSCI Barra & S&P's Compustat's Point-In-Time ID's are built 
> for
> this type of backtesting. If you have access to BBID's that would be a
> decent alternative but looking for an open source identifier system is
> going to be tough. Good luck sir.
> 
> ~James
> 
> On Wed, Jan 21, 2015 at 7:45 AM, Anshul Pandey <anshul.bits at gmail.com>
> wrote:
> 
>> Hi All,
>> 
>> I am moving some of my backtesting logics to CUSIP from tickers.
>> How do I download the CUSIP number of US stocks?
>> 
>> I know S&P has a paid subscription, but I read that CUSIP is publicly
>> available at a few resources.
>> 
>> Any suggestions are highly welcome.
>> 
>> Thanks
>> Anshul
>> 
>>         [[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R 
>> questions
>> should go.
>> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R
> questions should go.


From daniel.cegielka at gmail.com  Wed Jan 21 19:15:37 2015
From: daniel.cegielka at gmail.com (=?UTF-8?Q?Daniel_Cegie=C5=82ka?=)
Date: Wed, 21 Jan 2015 19:15:37 +0100
Subject: [R-SIG-Finance] CUSIP Numbers
In-Reply-To: <CAFUr=9XSssswiQVdWxGNEaBEEKPc=cjKS3R+utj=3gmvSbLNZQ@mail.gmail.com>
References: <CAFUr=9XSssswiQVdWxGNEaBEEKPc=cjKS3R+utj=3gmvSbLNZQ@mail.gmail.com>
Message-ID: <CAPLrYEQPv+kwdx8Q6vsywbhRLP_-_qB76bBNrMcvLUdmdztbQg@mail.gmail.com>

2015-01-21 16:45 GMT+01:00 Anshul Pandey <anshul.bits at gmail.com>:
> Hi All,
>
> I am moving some of my backtesting logics to CUSIP from tickers.
> How do I download the CUSIP number of US stocks?
>
> I know S&P has a paid subscription, but I read that CUSIP is publicly
> available at a few resources.
>
> Any suggestions are highly welcome.

You may be interested in Bloomberg Open Symbology, as an alternative to CUSIP.

http://bsym.bloomberg.com/sym/

Best regards,
Daniel

>
> Thanks
> Anshul
>


From gsee000 at gmail.com  Wed Jan 21 23:25:05 2015
From: gsee000 at gmail.com (G See)
Date: Wed, 21 Jan 2015 16:25:05 -0600
Subject: [R-SIG-Finance] CUSIP Numbers
In-Reply-To: <CAPLrYEQPv+kwdx8Q6vsywbhRLP_-_qB76bBNrMcvLUdmdztbQg@mail.gmail.com>
References: <CAFUr=9XSssswiQVdWxGNEaBEEKPc=cjKS3R+utj=3gmvSbLNZQ@mail.gmail.com>
	<CAPLrYEQPv+kwdx8Q6vsywbhRLP_-_qB76bBNrMcvLUdmdztbQg@mail.gmail.com>
Message-ID: <CA+xi=qZG0HX3QaKNQYtOkYW2nq9DhWz1i_obatsWjOxWV2a2ug@mail.gmail.com>

Since this is an R mailing list, I'll try to bring this thread back on
topic.  Unless you are willing to pay, the only free source that I am
aware of to get CUSIPs via R is TradeKing.
https://developers.tradeking.com/documentation/market-ext-quotes-get-post

You must have an account, but you can create an account for free and
you don't have to fund it in order to do this.


library(ROAuth) #importFrom(ROAuth, OAuthFactory)
library(RJSONIO) #importFrom(RJSONIO, fromJSON)

#' ## This part could go in your .Rprofile
#' # Set your application keys # https://developers.tradeking.com/applications
#' cKey <- '################'
#' cSecret <- '#################'
#' oKey <- '################'
#' oSecret <- '################'

# Set the API endpoint
tkURL <- "https://api.tradeking.com/v1/market/ext/quotes.json"

# Create the OAuth connection - this is straight from the ROAuth
documentation on CRAN
credentials <- OAuthFactory$new(consumerKey=cKey,
                                consumerSecret=cSecret,
                                oauthKey = oKey,
                                oauthSecret = oSecret,
                                needsVerifier=FALSE,
                                signMethod='HMAC')
# Update the connection so the handshake is TRUE
credentials$handshakeComplete <- TRUE

Symbols <- tolower(c("AAPL", "MSFT")) ## Whatever symbols you want
symbols <- paste(Symbols, collapse=",")

#what <- "datetime,bidsz,bid,ask,asksz,last,chg,pchg,opn,hi,lo,vl"
what <- "cusip"
what <- gsub(" ", "", tolower(paste(unlist(strsplit(what, ",")),
                                      collapse=",")))
tkURL <- "https://api.tradeking.com/v1/market/ext/quotes.json"
query <- list(symbols=symbols, fids=what)
response <- credentials$OAuthRequest(tkURL, query)
res <- fromJSON(response)
qt <- res$response$quotes$quote
qt

#[[1]]
#     cusip       exch     symbol
#"59491810"     "NASD"     "MSFT"
#
#[[2]]
#     cusip       exch     symbol
#"03783310"     "NASD"     "AAPL"

HTH,
Garrett


From zadig_1 at excite.com  Thu Jan 22 01:38:04 2015
From: zadig_1 at excite.com (ce)
Date: Wed, 21 Jan 2015 19:38:04 -0500
Subject: [R-SIG-Finance] IBrokers Package: wrong Clientid returns ?
Message-ID: <20150121193804.28843@web005.roc2.bluetie.com>


I use stable version. I tried latest beta too, didn't help.
Indeed downgrade fixed clientid problem but my main problem (https://groups.yahoo.com/neo/groups/TWSAPI/conversations/messages/33071 ) ,  event handler returns garbled data persists, instead of correct 2100 error I still get :

paraml[[1]]= -1 
paraml[[2]]= NA 
paraml[[3]]= PF1 
paraml[[4]]= API client has been unsubscribed from account data..NA 

I guess I need to contact IBrokers maintainer , I can't think of what else to do .
best
ce

-----Original Message-----
From: "cen six" [censix0 at gmail.com]
Date: 01/21/2015 11:24 AM
To: "ce" <zadig_1 at excite.com>
CC: "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
Subject: Re: [R-SIG-Finance] IBrokers Package: wrong Clientid returns ?

Well, for sure a downgrade of the TWS would fix it, but its obviously not a long term solution. Are you using a beta TWS version or a stable release ?


On Wed, Jan 21, 2015 at 4:07 AM, ce <zadig_1 at excite.com> wrote:

I downgraded IBrokers version to 0.9-10, while keeping TWS Build 948.3c, Jan 5, 2015 5:12:23 PM ,
still I got the wrong clientid from TWS.

Then I downgraded TWS to? Build 945.2b, Jun 3, 2014 11:11:57 AM and it worked correctly with IBrokers 0.9-10

I see my clientid 96 is returned from TWS :

TWS OpenOrder: orderId=2 clientId=96 conId=14321015 symbol=GBP status=Filled


-----Original Message-----
From: "ce" [zadig_1 at excite.com]
Date: 01/20/2015 07:52 PM
To: censix0 at gmail.com
CC: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] IBrokers Package: wrong Clientid returns ?


Hi Cen six,

I am using IBrokers 0.9.12 from cran r web site.
In fact I was testing the demo program from you emailed me. It was working fine but one or two weeks ago event handler started to fail ( maybe after IBrokers update )? as I explained in : https://groups.yahoo.com/neo/groups/TWSAPI/conversations/messages/33071

then I upgraded TWS but now clientid returned by event handler is wrong.
Maybe I should downgrade IBrokers or TWS ?

ce


-----Original Message-----
From: "cen six" [censix0 at gmail.com]
Date: 01/20/2015 03:04 PM
To: "ce" <zadig_1 at excite.com>
CC: "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
Subject: Re: [R-SIG-Finance] IBrokers Package: wrong Clientid returns ?

Are you using the IBrokers package version 0.9-10? or higher ? (from code.google.com)


cheers


On Tue, Jan 20, 2015 at 2:38 AM, ce <zadig_1 at excite.com> wrote:

Dear all,

I just upgraded TWS to Build 948.3c, Jan 5, 2015 5:12:23 PM
My program that worked fine before started to return wrong clientid . I set client ID to 96. but after sending the order, In order status , or order execution events I get clientid 6? !!? Even I tried to set Master API Client ID to 96 in TWS -> Configuration -> API.? didnt work.
If I set Clientid to 6,? TWS returns 0 as Clientid.

Here is some piece of code :

> ibClientId <- 96
>
>
> #global: create the connection to IB? (this can probably not be stored anywhere, so
> #we have to recreate it within "IBexecuteStrategy.r"
> ibConnection<-NULL
> if (!is.twsConnection(ibConnection)) {
+? ? ibConnection<- twsConnect(clientId=ibClientId, host="localhost",
+? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?port=7496, verbose=TRUE,
+? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?timeout=15, filename=NULL)
+ }
> print(ibConnection)
<twsConnection,96 @ 20150119 20:25:19 EST, nextId=4>

TWS OpenOrder: orderId=3 clientId=6 conId=12087807 symbol=EUR status=Submitted

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should g


From anshul.bits at gmail.com  Thu Jan 22 04:11:04 2015
From: anshul.bits at gmail.com (Anshul Pandey)
Date: Thu, 22 Jan 2015 08:41:04 +0530
Subject: [R-SIG-Finance] CUSIP Numbers
In-Reply-To: <CA+xi=qZG0HX3QaKNQYtOkYW2nq9DhWz1i_obatsWjOxWV2a2ug@mail.gmail.com>
References: <CAFUr=9XSssswiQVdWxGNEaBEEKPc=cjKS3R+utj=3gmvSbLNZQ@mail.gmail.com>
	<CAPLrYEQPv+kwdx8Q6vsywbhRLP_-_qB76bBNrMcvLUdmdztbQg@mail.gmail.com>
	<CA+xi=qZG0HX3QaKNQYtOkYW2nq9DhWz1i_obatsWjOxWV2a2ug@mail.gmail.com>
Message-ID: <CAFUr=9Uaw=sLdGDRi1jqP6rnO3yh7piArg770gRbLVi4Mkosow@mail.gmail.com>

Thank you all for the reply.
This is very helpful.

I am going through the Bloomberg Open Symbology. Looks like CUSIP and SEDOL
are becoming popular (the last 3 hedge funds I talked to mentioned one of
these two), so it would be nice to see what Bloomberg has to offer.

James, you raised a very valid concern. I will keep that in mind while
setting up my production system.

Best Regards
Anshul

On Thu, Jan 22, 2015 at 3:55 AM, G See <gsee000 at gmail.com> wrote:

> Since this is an R mailing list, I'll try to bring this thread back on
> topic.  Unless you are willing to pay, the only free source that I am
> aware of to get CUSIPs via R is TradeKing.
> https://developers.tradeking.com/documentation/market-ext-quotes-get-post
>
> You must have an account, but you can create an account for free and
> you don't have to fund it in order to do this.
>
>
> library(ROAuth) #importFrom(ROAuth, OAuthFactory)
> library(RJSONIO) #importFrom(RJSONIO, fromJSON)
>
> #' ## This part could go in your .Rprofile
> #' # Set your application keys #
> https://developers.tradeking.com/applications
> #' cKey <- '################'
> #' cSecret <- '#################'
> #' oKey <- '################'
> #' oSecret <- '################'
>
> # Set the API endpoint
> tkURL <- "https://api.tradeking.com/v1/market/ext/quotes.json"
>
> # Create the OAuth connection - this is straight from the ROAuth
> documentation on CRAN
> credentials <- OAuthFactory$new(consumerKey=cKey,
>                                 consumerSecret=cSecret,
>                                 oauthKey = oKey,
>                                 oauthSecret = oSecret,
>                                 needsVerifier=FALSE,
>                                 signMethod='HMAC')
> # Update the connection so the handshake is TRUE
> credentials$handshakeComplete <- TRUE
>
> Symbols <- tolower(c("AAPL", "MSFT")) ## Whatever symbols you want
> symbols <- paste(Symbols, collapse=",")
>
> #what <- "datetime,bidsz,bid,ask,asksz,last,chg,pchg,opn,hi,lo,vl"
> what <- "cusip"
> what <- gsub(" ", "", tolower(paste(unlist(strsplit(what, ",")),
>                                       collapse=",")))
> tkURL <- "https://api.tradeking.com/v1/market/ext/quotes.json"
> query <- list(symbols=symbols, fids=what)
> response <- credentials$OAuthRequest(tkURL, query)
> res <- fromJSON(response)
> qt <- res$response$quotes$quote
> qt
>
> #[[1]]
> #     cusip       exch     symbol
> #"59491810"     "NASD"     "MSFT"
> #
> #[[2]]
> #     cusip       exch     symbol
> #"03783310"     "NASD"     "AAPL"
>
> HTH,
> Garrett
>



-- 
Anshul Vikram Pandey
+1-929-231-6784
home: www.anshulvp.com
thoughts: www.anshulvp.com/blog
contact: anshul.bits at gmail.com, hello at anshulvp.com

	[[alternative HTML version deleted]]


From amos.elberg at gmail.com  Thu Jan 22 04:49:27 2015
From: amos.elberg at gmail.com (Amos B. Elberg)
Date: Wed, 21 Jan 2015 22:49:27 -0500
Subject: [R-SIG-Finance] CUSIP Numbers
In-Reply-To: <CAFUr=9XSssswiQVdWxGNEaBEEKPc=cjKS3R+utj=3gmvSbLNZQ@mail.gmail.com>
References: <CAFUr=9XSssswiQVdWxGNEaBEEKPc=cjKS3R+utj=3gmvSbLNZQ@mail.gmail.com>
Message-ID: <01D49417-0043-457E-BC96-4C8CC77CA743@gmail.com>

I've always gotten CUSIPs from the finra website. I haven't tried to scrape them, but it shouldn't be terribly difficult with Hadley's rvest package.


> On Jan 21, 2015, at 10:45 AM, Anshul Pandey <anshul.bits at gmail.com> wrote:
> 
> Hi All,
> 
> I am moving some of my backtesting logics to CUSIP from tickers.
> How do I download the CUSIP number of US stocks?
> 
> I know S&P has a paid subscription, but I read that CUSIP is publicly
> available at a few resources.
> 
> Any suggestions are highly welcome.
> 
> Thanks
> Anshul
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From amolgupta87 at gmail.com  Fri Jan 23 10:24:45 2015
From: amolgupta87 at gmail.com (amol gupta)
Date: Fri, 23 Jan 2015 14:54:45 +0530
Subject: [R-SIG-Finance] Number of data points required for Cointigration
Message-ID: <CAO7kh0HN5VXXJDKRgs+8sfw_v2DmvziOQy1Lmqakt11wR3tk=A@mail.gmail.com>

Hi

I need help in figuring out the length of historical data that I should
use. I took stock prices(daily close) for two tickers from yahoo(200
days).I tried finding regression coefficient using PCA and I use 150 points
for PCA. I find a coefficient Beta.

Now to see whether the spread is mean reverting or not I use ADF. If I use
150 point long spread, It comes out to be nonstationary. If I use 200
points data the outcome is stationary

I again used 200 points to do the PCA and find regression. The spread comes
out to be non stationary. From all these observation *I think* that this is
not a stable relationship.

So following are my questions

   - Is there a way to decide length of historical data to use?
   - Some relationship may be more stable than others. Is there away to
   quantify it?

Any other insight in this regard will be appreciated(time frame, pairs vs
basket). I have attached the plot and the script that was used to generate
the plot.


-- 
Regards
Amol

If all the seas were ink,
And all the reeds were pens,
And all the skies were parchment,
And all the men could write,
These would not suffice
To write down all the red tape
Of this Government.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20150123/a67a0136/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Rplot.png
Type: image/png
Size: 4475 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20150123/a67a0136/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test3.R
Type: application/octet-stream
Size: 2242 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20150123/a67a0136/attachment.obj>

From pierre at lequeux.org  Fri Jan 23 14:59:38 2015
From: pierre at lequeux.org (Pierre Org)
Date: Fri, 23 Jan 2015 13:59:38 -0000
Subject: [R-SIG-Finance] Portfolio Optimisation as a function of
	targeted Risk rather than return.
In-Reply-To: <CA+oJuEGPT1CkYrU2dc-DHU9D6hQvJFGhr9Rag5k9-gGD9KBwMg@mail.gmail.com>
References: <001401d0356b$4432b110$cc981330$@org>
	<CA+oJuEGPT1CkYrU2dc-DHU9D6hQvJFGhr9Rag5k9-gGD9KBwMg@mail.gmail.com>
Message-ID: <000601d03714$d42d0c20$7c872460$@org>

Hi Ilya

 

Many thanks for pointing me toward the PARMA package. I have tried to use it but  I seem to fail, I am not sure I am doing things right. When I optimise  for a given level of risk  (7% annualised) and then check what the portfolio volatility with the  in-sample weights  the level  risk does not seem to equate to the intended target risk.

 

                   Gilts World Ex UK Stocks     UK Stocks

2014-02-28  1.548142e-03       0.0279529433  4.838851e-02

2014-03-31  7.806639e-05       0.0105305699 -2.702980e-02

2014-04-30  7.377730e-03      -0.0052597245  3.158530e-02

2014-05-31  9.628424e-03       0.0282594842  1.481751e-02

2014-06-30 -5.580206e-03       0.0001037494 -1.283548e-02

2014-07-31  1.057991e-02      -0.0034606566 -3.263463e-05

2014-08-31  3.487462e-02       0.0404001701  2.027569e-02

2014-09-30 -6.982201e-03      -0.0005089251 -2.937074e-02

2014-10-31  1.384694e-02       0.0226491298 -1.050032e-02

2014-11-30  3.209176e-02       0.0427556870  2.914371e-02

 

I use the above data as an input (m) to the optimiser then force my monthly standard deviation to 0.07/sqrt(12)

 

spec   <- parmaspec(S = cov(m) ,riskB= 0.07/sqrt(12) ,risk="EV",riskType="maxreward", LB = rep(0,3), UB = rep(1,3), budget=1, forecast=colMeans(m))

parmasolve(spec, solver="SOCP")}

 

The annualised standard deviation of my series are : 

 

> apply(m,2,sd)*sqrt(12)

 

        Gilts World Ex UK Stocks          UK Stocks 

        0.04938711         0.06359545         0.09144821 

 

so a 7% target risk portfolio that maximise return should exist as a solution. Anyhow the resulting weights from the above dataseries are calculated as:

 

>  spec   <- parmaspec(S = cov(m) ,riskB= 0.07/sqrt(12) ,risk="EV",riskType="maxreward", LB = rep(0,3), UB = rep(1,3), budget=1, forecast=colMeans(m))

>  parmasolve(spec, solver="SOCP")}

 

 

+---------------------------------+

|        PARMA Portfolio          |

+---------------------------------+ 

No.Assets                           : 3

Problem                              : SOCP

Risk Measure                     : EV

Objective                            : maxreward

Risk                                      : 0.0005859

Reward                               : 0.0110454

 

                   Optimal_Weights

World Ex UK Stocks          0.9581

Gilts                                      0.0419

 

 

 

Now when I use the solution weights I do not get the same monthly targeted risk. I realise that the risk 

 

 

> w <- parmasolve(spec, solver="SOCP")@solution$weights

> sd(rowSums(t(apply(m,1,function(x) x*t(w)))))*sqrt(12)

[1] 0.0624795

> 

 

 

My portfolio do not have a standard deviation of 0.7 as I was expecting??

 

 

It is probably obvious to many of the PARMA users?but I can t  understand where I get it wrong as the portfolio is obviously feasible. What I want is the portfolio  that maximise return amongst all the possible portfolios with a 7% annualised vol.

Any idea ? 

 

 

From: Ilya Kipnis [mailto:ilya.kipnis at gmail.com] 
Sent: 21 January 2015 15:50
To: Pierre Org
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Portfolio Optimisation as a function of targeted Risk rather than return.

 

Check out the PortfolioAnalytics package.

 

On Wed, Jan 21, 2015 at 6:13 AM, Pierre Org <pierre at lequeux.org> wrote:

I am currently working on a portfolio optimisation strategy that would
involves optimising  a portfolio so that it maximises the returns for a user
defined level of risk.   E.g. keeping the volatility of the portfolio at 10%
annualised whilst maximising the return for this level. For that purpose I
was hoping to use the function maxreturnPortfolio  in fPortfolio that should
return the portfolio with the maximal return for a fixed target risk.
Clearly  though showing in this great package the function has been/is  in
development by the authors of the package and currently does not work as
intended. This is confirmed  by various posts and answer to those by the
authors.   I wonder if anyone knows of another more up to date  package or
way of doing this in R ?



Any help would be really appreciated.








        [[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.




	[[alternative HTML version deleted]]


From alexios at 4dscape.com  Fri Jan 23 15:47:55 2015
From: alexios at 4dscape.com (alexios)
Date: Fri, 23 Jan 2015 14:47:55 +0000
Subject: [R-SIG-Finance] Portfolio Optimisation as a function of
 targeted Risk rather than return.
In-Reply-To: <000601d03714$d42d0c20$7c872460$@org>
References: <001401d0356b$4432b110$cc981330$@org>	<CA+oJuEGPT1CkYrU2dc-DHU9D6hQvJFGhr9Rag5k9-gGD9KBwMg@mail.gmail.com>
	<000601d03714$d42d0c20$7c872460$@org>
Message-ID: <54C25F1B.70705@4dscape.com>

1. The risk is variance, NOT standard deviation.
2. From the manual:
"riskB:	 For the case that riskType is ?maxreward?, then riskB is the 
upper bound for the risk constraint."

_Note_ the "upper bound".

3. Because of the quality of the SOCP solver currently used, you should 
probably scale your data by 100.

Therefore:

m = m*100
riskB = (7^2)/12
spec   <- parmaspec(S = as.matrix(cov(m)), 
riskB=riskB,risk="EV",riskType="maxreward", LB = rep(0,3), UB = 
rep(1,3), budget=1, forecast=as.numeric(colMeans(m)))
port <- parmasolve(spec, solver="SOCP")

+---------------------------------+
|        PARMA Portfolio          |
+---------------------------------+
No.Assets               : 3
Problem                 : SOCP
Risk Measure    	: EV
Objective               : maxreward
Risk                    : 3.3703562
Reward                  : 1.634234

                    Optimal_Weights
World.Ex.UK.Stocks               1

 > sqrt(parmarisk(port))*sqrt(12)/100
[1] 0.06359581

 > parmareward(port)/100
[1] 0.01634234

But note:
 >port at solution$status
"Error (0)"

i.e. "probably" unreliable solution. A new SOCP solver will be available 
sometime this year (courtesy of Bernhard Pfaff)...until then, use with 
caution.

Regards,

Alexios


On 23/01/2015 13:59, Pierre Org wrote:
> Hi Ilya
>
>
>
> Many thanks for pointing me toward the PARMA package. I have tried to use it but  I seem to fail, I am not sure I am doing things right. When I optimise  for a given level of risk  (7% annualised) and then check what the portfolio volatility with the  in-sample weights  the level  risk does not seem to equate to the intended target risk.
>
>
>
>                     Gilts World Ex UK Stocks     UK Stocks
>
> 2014-02-28  1.548142e-03       0.0279529433  4.838851e-02
>
> 2014-03-31  7.806639e-05       0.0105305699 -2.702980e-02
>
> 2014-04-30  7.377730e-03      -0.0052597245  3.158530e-02
>
> 2014-05-31  9.628424e-03       0.0282594842  1.481751e-02
>
> 2014-06-30 -5.580206e-03       0.0001037494 -1.283548e-02
>
> 2014-07-31  1.057991e-02      -0.0034606566 -3.263463e-05
>
> 2014-08-31  3.487462e-02       0.0404001701  2.027569e-02
>
> 2014-09-30 -6.982201e-03      -0.0005089251 -2.937074e-02
>
> 2014-10-31  1.384694e-02       0.0226491298 -1.050032e-02
>
> 2014-11-30  3.209176e-02       0.0427556870  2.914371e-02
>
>
>
> I use the above data as an input (m) to the optimiser then force my monthly standard deviation to 0.07/sqrt(12)
>
>
>
> spec   <- parmaspec(S = cov(m) ,riskB= 0.07/sqrt(12) ,risk="EV",riskType="maxreward", LB = rep(0,3), UB = rep(1,3), budget=1, forecast=colMeans(m))
>
> parmasolve(spec, solver="SOCP")}
>
>
>
> The annualised standard deviation of my series are :
>
>
>
>> apply(m,2,sd)*sqrt(12)
>
>
>
>          Gilts World Ex UK Stocks          UK Stocks
>
>          0.04938711         0.06359545         0.09144821
>
>
>
> so a 7% target risk portfolio that maximise return should exist as a solution. Anyhow the resulting weights from the above dataseries are calculated as:
>
>
>
>>   spec   <- parmaspec(S = cov(m) ,riskB= 0.07/sqrt(12) ,risk="EV",riskType="maxreward", LB = rep(0,3), UB = rep(1,3), budget=1, forecast=colMeans(m))
>
>>   parmasolve(spec, solver="SOCP")}
>
>
>
>
>
> +---------------------------------+
>
> |        PARMA Portfolio          |
>
> +---------------------------------+
>
> No.Assets                           : 3
>
> Problem                              : SOCP
>
> Risk Measure                     : EV
>
> Objective                            : maxreward
>
> Risk                                      : 0.0005859
>
> Reward                               : 0.0110454
>
>
>
>                     Optimal_Weights
>
> World Ex UK Stocks          0.9581
>
> Gilts                                      0.0419
>
>
>
>
>
>
>
> Now when I use the solution weights I do not get the same monthly targeted risk. I realise that the risk
>
>
>
>
>
>> w <- parmasolve(spec, solver="SOCP")@solution$weights
>
>> sd(rowSums(t(apply(m,1,function(x) x*t(w)))))*sqrt(12)
>
> [1] 0.0624795
>
>>
>
>
>
>
>
> My portfolio do not have a standard deviation of 0.7 as I was expecting??
>
>
>
>
>
> It is probably obvious to many of the PARMA users?but I can t  understand where I get it wrong as the portfolio is obviously feasible. What I want is the portfolio  that maximise return amongst all the possible portfolios with a 7% annualised vol.
>
> Any idea ?
>
>
>
>
>
> From: Ilya Kipnis [mailto:ilya.kipnis at gmail.com]
> Sent: 21 January 2015 15:50
> To: Pierre Org
> Cc: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] Portfolio Optimisation as a function of targeted Risk rather than return.
>
>
>
> Check out the PortfolioAnalytics package.
>
>
>
> On Wed, Jan 21, 2015 at 6:13 AM, Pierre Org <pierre at lequeux.org> wrote:
>
> I am currently working on a portfolio optimisation strategy that would
> involves optimising  a portfolio so that it maximises the returns for a user
> defined level of risk.   E.g. keeping the volatility of the portfolio at 10%
> annualised whilst maximising the return for this level. For that purpose I
> was hoping to use the function maxreturnPortfolio  in fPortfolio that should
> return the portfolio with the maximal return for a fixed target risk.
> Clearly  though showing in this great package the function has been/is  in
> development by the authors of the package and currently does not work as
> intended. This is confirmed  by various posts and answer to those by the
> authors.   I wonder if anyone knows of another more up to date  package or
> way of doing this in R ?
>
>
>
> Any help would be really appreciated.
>
>
>
>
>
>
>
>
>          [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From isak.engdahl at gmail.com  Fri Jan 23 15:49:15 2015
From: isak.engdahl at gmail.com (Isak Engdahl)
Date: Fri, 23 Jan 2015 15:49:15 +0100
Subject: [R-SIG-Finance] Signal and Rule question in Quantstrat
Message-ID: <CAO77-6s8qvf5OMYkfATnQ_iLnC+YFTEL=52Nx-Y3HmZJyfHAmw@mail.gmail.com>

Dear members,

I have a questions how to set up the signals and rules correct for this
stategy in Quantstrat.

Price must be above SMA=250 and below the 20 line in the Slow Stochastic
indicator.

The trigger for a buy signal is when the signal line of the stochastic
indicator close above the 20 line.

Enter trade
PRICE > SMA=250
Slow Stochastic < 20 and crossing above the 20 line

Exit trade
PRICE < SMA=250
Slow Stoch > 80 and closes below the 80 line

The rules and examples can be found here:
http://stockcharts.com/public/1107832

Here is the code I have come up with now. Please help!

//Isak

#parameters
nFastK <- 5
nSlowD <- 1
nSMA <- 250
buyThresh <- 20
sellThresh <- 80

######################################################################################
#indicator
add.indicator(strategy.st, name="stoch",
              arguments=list(HLC=quote(HLC(mktdata)), nFastK=nFastK,
nSlowD=nSlowD),
              label="stoch")

add.indicator(strategy.st, name="SMA",
              arguments=list(x=quote(Cl(mktdata)), n=nSMA),
              label="sma")
###############################################################################
#signals
add.signal(strategy.st, name="sigComparison",
           arguments=list(columns=c("Close", "sma"), relationship="gt"),
           label="filter")

add.signal(strategy.st, name="sigThreshold",
           arguments=list(column="stoch", threshold=buyThresh,
                          relationship="lt", cross=FALSE),
           label="stochLtThresh")

add.signal(strategy.st, name="sigAND",
           arguments=list(columns=c("filter", "stochLtThresh"), cross=TRUE),
           label="longEntry")
add.signal(strategy.st, name="sigThreshold",
           arguments=list(column="stoch", threshold=sellThresh,
                          relationship="gt", cross=TRUE),
           label="longExit")
###############################################################################
#rules

#Long entry rule
add.rule(strategy.st, name="ruleSignal",
         arguments=list(sigcol="longEntry",
                        sigval=TRUE,
                        replace=FALSE,
                        orderside="long",
                        ordertype="market",
                        orderqty=100,
                        osFUN="osFixedDollar",
                        orderset="ocolong"),
         type="enter",label="LE")

#Long exit rule
add.rule(strategy.st, name="ruleSignal",
         arguments=list(sigcol="longExit",
                        sigval=TRUE,
                        replace=FALSE,
                        orderside="long",
                        ordertype="market",
                        orderqty="all",
                        orderset="ocolong"),
         type="exit",label="LX")

	[[alternative HTML version deleted]]


From pierre at lequeux.org  Fri Jan 23 16:21:39 2015
From: pierre at lequeux.org (Pierre Org)
Date: Fri, 23 Jan 2015 15:21:39 -0000
Subject: [R-SIG-Finance] Portfolio Optimisation as a function of
	targeted Risk rather than return.
In-Reply-To: <54C25F1B.70705@4dscape.com>
References: <001401d0356b$4432b110$cc981330$@org>	<CA+oJuEGPT1CkYrU2dc-DHU9D6hQvJFGhr9Rag5k9-gGD9KBwMg@mail.gmail.com>
	<000601d03714$d42d0c20$7c872460$@org> <54C25F1B.70705@4dscape.com>
Message-ID: <000701d03720$49381e00$dba85a00$@org>

Hi Alexios

Many thanks for the below this is really useful to me (and hopefully others). Yes I understood since my previous post that the risk was expressed as variance rather than standard deviation. In respect of upper bound, I assume that you mean that the portfolio risk is constrained to a maximum of 7% rather than exactly 7%  during the optimisation (i.e the risk will end up being close to 7% rather than exactly equal)? Is there a way of having a strict equality by forcing the lower bound as well ?
I am really thankful for the time you spend on this. 

Kind regards

Pierre

-----Original Message-----
From: alexios [mailto:alexios at 4dscape.com] 
Sent: 23 January 2015 14:48
To: Pierre Org; 'Ilya Kipnis'
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Portfolio Optimisation as a function of targeted Risk rather than return.

1. The risk is variance, NOT standard deviation.
2. From the manual:
"riskB:	 For the case that riskType is ?maxreward?, then riskB is the 
upper bound for the risk constraint."

_Note_ the "upper bound".

3. Because of the quality of the SOCP solver currently used, you should probably scale your data by 100.

Therefore:

m = m*100
riskB = (7^2)/12
spec   <- parmaspec(S = as.matrix(cov(m)), 
riskB=riskB,risk="EV",riskType="maxreward", LB = rep(0,3), UB = rep(1,3), budget=1, forecast=as.numeric(colMeans(m))) port <- parmasolve(spec, solver="SOCP")

+---------------------------------+
|        PARMA Portfolio          |
+---------------------------------+
No.Assets               : 3
Problem                 : SOCP
Risk Measure    	: EV
Objective               : maxreward
Risk                    : 3.3703562
Reward                  : 1.634234

                    Optimal_Weights
World.Ex.UK.Stocks               1

 > sqrt(parmarisk(port))*sqrt(12)/100
[1] 0.06359581

 > parmareward(port)/100
[1] 0.01634234

But note:
 >port at solution$status
"Error (0)"

i.e. "probably" unreliable solution. A new SOCP solver will be available sometime this year (courtesy of Bernhard Pfaff)...until then, use with caution.

Regards,

Alexios


On 23/01/2015 13:59, Pierre Org wrote:
> Hi Ilya
>
>
>
> Many thanks for pointing me toward the PARMA package. I have tried to use it but  I seem to fail, I am not sure I am doing things right. When I optimise  for a given level of risk  (7% annualised) and then check what the portfolio volatility with the  in-sample weights  the level  risk does not seem to equate to the intended target risk.
>
>
>
>                     Gilts World Ex UK Stocks     UK Stocks
>
> 2014-02-28  1.548142e-03       0.0279529433  4.838851e-02
>
> 2014-03-31  7.806639e-05       0.0105305699 -2.702980e-02
>
> 2014-04-30  7.377730e-03      -0.0052597245  3.158530e-02
>
> 2014-05-31  9.628424e-03       0.0282594842  1.481751e-02
>
> 2014-06-30 -5.580206e-03       0.0001037494 -1.283548e-02
>
> 2014-07-31  1.057991e-02      -0.0034606566 -3.263463e-05
>
> 2014-08-31  3.487462e-02       0.0404001701  2.027569e-02
>
> 2014-09-30 -6.982201e-03      -0.0005089251 -2.937074e-02
>
> 2014-10-31  1.384694e-02       0.0226491298 -1.050032e-02
>
> 2014-11-30  3.209176e-02       0.0427556870  2.914371e-02
>
>
>
> I use the above data as an input (m) to the optimiser then force my 
> monthly standard deviation to 0.07/sqrt(12)
>
>
>
> spec   <- parmaspec(S = cov(m) ,riskB= 0.07/sqrt(12) ,risk="EV",riskType="maxreward", LB = rep(0,3), UB = rep(1,3), budget=1, forecast=colMeans(m))
>
> parmasolve(spec, solver="SOCP")}
>
>
>
> The annualised standard deviation of my series are :
>
>
>
>> apply(m,2,sd)*sqrt(12)
>
>
>
>          Gilts World Ex UK Stocks          UK Stocks
>
>          0.04938711         0.06359545         0.09144821
>
>
>
> so a 7% target risk portfolio that maximise return should exist as a solution. Anyhow the resulting weights from the above dataseries are calculated as:
>
>
>
>>   spec   <- parmaspec(S = cov(m) ,riskB= 0.07/sqrt(12) ,risk="EV",riskType="maxreward", LB = rep(0,3), UB = rep(1,3), budget=1, forecast=colMeans(m))
>
>>   parmasolve(spec, solver="SOCP")}
>
>
>
>
>
> +---------------------------------+
>
> |        PARMA Portfolio          |
>
> +---------------------------------+
>
> No.Assets                           : 3
>
> Problem                              : SOCP
>
> Risk Measure                     : EV
>
> Objective                            : maxreward
>
> Risk                                      : 0.0005859
>
> Reward                               : 0.0110454
>
>
>
>                     Optimal_Weights
>
> World Ex UK Stocks          0.9581
>
> Gilts                                      0.0419
>
>
>
>
>
>
>
> Now when I use the solution weights I do not get the same monthly 
> targeted risk. I realise that the risk
>
>
>
>
>
>> w <- parmasolve(spec, solver="SOCP")@solution$weights
>
>> sd(rowSums(t(apply(m,1,function(x) x*t(w)))))*sqrt(12)
>
> [1] 0.0624795
>
>>
>
>
>
>
>
> My portfolio do not have a standard deviation of 0.7 as I was 
> expecting??
>
>
>
>
>
> It is probably obvious to many of the PARMA users?but I can t  understand where I get it wrong as the portfolio is obviously feasible. What I want is the portfolio  that maximise return amongst all the possible portfolios with a 7% annualised vol.
>
> Any idea ?
>
>
>
>
>
> From: Ilya Kipnis [mailto:ilya.kipnis at gmail.com]
> Sent: 21 January 2015 15:50
> To: Pierre Org
> Cc: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] Portfolio Optimisation as a function of targeted Risk rather than return.
>
>
>
> Check out the PortfolioAnalytics package.
>
>
>
> On Wed, Jan 21, 2015 at 6:13 AM, Pierre Org <pierre at lequeux.org> wrote:
>
> I am currently working on a portfolio optimisation strategy that would 
> involves optimising  a portfolio so that it maximises the returns for a user
> defined level of risk.   E.g. keeping the volatility of the portfolio at 10%
> annualised whilst maximising the return for this level. For that 
> purpose I was hoping to use the function maxreturnPortfolio  in 
> fPortfolio that should return the portfolio with the maximal return for a fixed target risk.
> Clearly  though showing in this great package the function has been/is  
> in development by the authors of the package and currently does not 
> work as intended. This is confirmed  by various posts and answer to those by the
> authors.   I wonder if anyone knows of another more up to date  package or
> way of doing this in R ?
>
>
>
> Any help would be really appreciated.
>
>
>
>
>
>
>
>
>          [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From alexios at 4dscape.com  Fri Jan 23 17:10:28 2015
From: alexios at 4dscape.com (alexios)
Date: Fri, 23 Jan 2015 16:10:28 +0000
Subject: [R-SIG-Finance] Portfolio Optimisation as a function of
 targeted Risk rather than return.
In-Reply-To: <000701d03720$49381e00$dba85a00$@org>
References: <001401d0356b$4432b110$cc981330$@org>	<CA+oJuEGPT1CkYrU2dc-DHU9D6hQvJFGhr9Rag5k9-gGD9KBwMg@mail.gmail.com>
	<000601d03714$d42d0c20$7c872460$@org> <54C25F1B.70705@4dscape.com>
	<000701d03720$49381e00$dba85a00$@org>
Message-ID: <54C27274.1030909@4dscape.com>

Hi Pierre,

The inequality constraint 'cannot' be turned into an equality one with 
the solver currently in use...I tried this in the past using auxiliary 
variables, but it was really hit and miss..best to wait for the new 
solver to be plugged in.
Alternatively, if you have a commercial license to one of the solver(s) 
now interfacing with R, you should be able to represent and solve this 
type of problem much more confidently.

Regards,

Alexios

On 23/01/2015 15:21, Pierre Org wrote:
> Hi Alexios
>
> Many thanks for the below this is really useful to me (and hopefully others). Yes I understood since my previous post that the risk was expressed as variance rather than standard deviation. In respect of upper bound, I assume that you mean that the portfolio risk is constrained to a maximum of 7% rather than exactly 7%  during the optimisation (i.e the risk will end up being close to 7% rather than exactly equal)? Is there a way of having a strict equality by forcing the lower bound as well ?
> I am really thankful for the time you spend on this.
>
> Kind regards
>
> Pierre
>
> -----Original Message-----
> From: alexios [mailto:alexios at 4dscape.com]
> Sent: 23 January 2015 14:48
> To: Pierre Org; 'Ilya Kipnis'
> Cc: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] Portfolio Optimisation as a function of targeted Risk rather than return.
>
> 1. The risk is variance, NOT standard deviation.
> 2. From the manual:
> "riskB:	 For the case that riskType is ?maxreward?, then riskB is the
> upper bound for the risk constraint."
>
> _Note_ the "upper bound".
>
> 3. Because of the quality of the SOCP solver currently used, you should probably scale your data by 100.
>
> Therefore:
>
> m = m*100
> riskB = (7^2)/12
> spec   <- parmaspec(S = as.matrix(cov(m)),
> riskB=riskB,risk="EV",riskType="maxreward", LB = rep(0,3), UB = rep(1,3), budget=1, forecast=as.numeric(colMeans(m))) port <- parmasolve(spec, solver="SOCP")
>
> +---------------------------------+
> |        PARMA Portfolio          |
> +---------------------------------+
> No.Assets               : 3
> Problem                 : SOCP
> Risk Measure    	: EV
> Objective               : maxreward
> Risk                    : 3.3703562
> Reward                  : 1.634234
>
>                      Optimal_Weights
> World.Ex.UK.Stocks               1
>
>   > sqrt(parmarisk(port))*sqrt(12)/100
> [1] 0.06359581
>
>   > parmareward(port)/100
> [1] 0.01634234
>
> But note:
>   >port at solution$status
> "Error (0)"
>
> i.e. "probably" unreliable solution. A new SOCP solver will be available sometime this year (courtesy of Bernhard Pfaff)...until then, use with caution.
>
> Regards,
>
> Alexios
>
>
> On 23/01/2015 13:59, Pierre Org wrote:
>> Hi Ilya
>>
>>
>>
>> Many thanks for pointing me toward the PARMA package. I have tried to use it but  I seem to fail, I am not sure I am doing things right. When I optimise  for a given level of risk  (7% annualised) and then check what the portfolio volatility with the  in-sample weights  the level  risk does not seem to equate to the intended target risk.
>>
>>
>>
>>                      Gilts World Ex UK Stocks     UK Stocks
>>
>> 2014-02-28  1.548142e-03       0.0279529433  4.838851e-02
>>
>> 2014-03-31  7.806639e-05       0.0105305699 -2.702980e-02
>>
>> 2014-04-30  7.377730e-03      -0.0052597245  3.158530e-02
>>
>> 2014-05-31  9.628424e-03       0.0282594842  1.481751e-02
>>
>> 2014-06-30 -5.580206e-03       0.0001037494 -1.283548e-02
>>
>> 2014-07-31  1.057991e-02      -0.0034606566 -3.263463e-05
>>
>> 2014-08-31  3.487462e-02       0.0404001701  2.027569e-02
>>
>> 2014-09-30 -6.982201e-03      -0.0005089251 -2.937074e-02
>>
>> 2014-10-31  1.384694e-02       0.0226491298 -1.050032e-02
>>
>> 2014-11-30  3.209176e-02       0.0427556870  2.914371e-02
>>
>>
>>
>> I use the above data as an input (m) to the optimiser then force my
>> monthly standard deviation to 0.07/sqrt(12)
>>
>>
>>
>> spec   <- parmaspec(S = cov(m) ,riskB= 0.07/sqrt(12) ,risk="EV",riskType="maxreward", LB = rep(0,3), UB = rep(1,3), budget=1, forecast=colMeans(m))
>>
>> parmasolve(spec, solver="SOCP")}
>>
>>
>>
>> The annualised standard deviation of my series are :
>>
>>
>>
>>> apply(m,2,sd)*sqrt(12)
>>
>>
>>
>>           Gilts World Ex UK Stocks          UK Stocks
>>
>>           0.04938711         0.06359545         0.09144821
>>
>>
>>
>> so a 7% target risk portfolio that maximise return should exist as a solution. Anyhow the resulting weights from the above dataseries are calculated as:
>>
>>
>>
>>>    spec   <- parmaspec(S = cov(m) ,riskB= 0.07/sqrt(12) ,risk="EV",riskType="maxreward", LB = rep(0,3), UB = rep(1,3), budget=1, forecast=colMeans(m))
>>
>>>    parmasolve(spec, solver="SOCP")}
>>
>>
>>
>>
>>
>> +---------------------------------+
>>
>> |        PARMA Portfolio          |
>>
>> +---------------------------------+
>>
>> No.Assets                           : 3
>>
>> Problem                              : SOCP
>>
>> Risk Measure                     : EV
>>
>> Objective                            : maxreward
>>
>> Risk                                      : 0.0005859
>>
>> Reward                               : 0.0110454
>>
>>
>>
>>                      Optimal_Weights
>>
>> World Ex UK Stocks          0.9581
>>
>> Gilts                                      0.0419
>>
>>
>>
>>
>>
>>
>>
>> Now when I use the solution weights I do not get the same monthly
>> targeted risk. I realise that the risk
>>
>>
>>
>>
>>
>>> w <- parmasolve(spec, solver="SOCP")@solution$weights
>>
>>> sd(rowSums(t(apply(m,1,function(x) x*t(w)))))*sqrt(12)
>>
>> [1] 0.0624795
>>
>>>
>>
>>
>>
>>
>>
>> My portfolio do not have a standard deviation of 0.7 as I was
>> expecting??
>>
>>
>>
>>
>>
>> It is probably obvious to many of the PARMA users?but I can t  understand where I get it wrong as the portfolio is obviously feasible. What I want is the portfolio  that maximise return amongst all the possible portfolios with a 7% annualised vol.
>>
>> Any idea ?
>>
>>
>>
>>
>>
>> From: Ilya Kipnis [mailto:ilya.kipnis at gmail.com]
>> Sent: 21 January 2015 15:50
>> To: Pierre Org
>> Cc: r-sig-finance at r-project.org
>> Subject: Re: [R-SIG-Finance] Portfolio Optimisation as a function of targeted Risk rather than return.
>>
>>
>>
>> Check out the PortfolioAnalytics package.
>>
>>
>>
>> On Wed, Jan 21, 2015 at 6:13 AM, Pierre Org <pierre at lequeux.org> wrote:
>>
>> I am currently working on a portfolio optimisation strategy that would
>> involves optimising  a portfolio so that it maximises the returns for a user
>> defined level of risk.   E.g. keeping the volatility of the portfolio at 10%
>> annualised whilst maximising the return for this level. For that
>> purpose I was hoping to use the function maxreturnPortfolio  in
>> fPortfolio that should return the portfolio with the maximal return for a fixed target risk.
>> Clearly  though showing in this great package the function has been/is
>> in development by the authors of the package and currently does not
>> work as intended. This is confirmed  by various posts and answer to those by the
>> authors.   I wonder if anyone knows of another more up to date  package or
>> way of doing this in R ?
>>
>>
>>
>> Any help would be really appreciated.
>>
>>
>>
>>
>>
>>
>>
>>
>>           [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>>
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>
>
>


From pierre at lequeux.org  Fri Jan 23 17:13:22 2015
From: pierre at lequeux.org (Pierre Org)
Date: Fri, 23 Jan 2015 16:13:22 -0000
Subject: [R-SIG-Finance] Portfolio Optimisation as a function of
	targeted Risk rather than return.
In-Reply-To: <54C27274.1030909@4dscape.com>
References: <001401d0356b$4432b110$cc981330$@org>	<CA+oJuEGPT1CkYrU2dc-DHU9D6hQvJFGhr9Rag5k9-gGD9KBwMg@mail.gmail.com>
	<000601d03714$d42d0c20$7c872460$@org> <54C25F1B.70705@4dscape.com>
	<000701d03720$49381e00$dba85a00$@org>
	<54C27274.1030909@4dscape.com>
Message-ID: <000901d03727$82af6790$880e36b0$@org>

Hi Alexios,

Thank you for clarifying this...I guees I will have to be patient and wait for the new solver....
Many thanks again for your help.

Have a good week end

Pierre

-----Original Message-----
From: alexios [mailto:alexios at 4dscape.com] 
Sent: 23 January 2015 16:10
To: Pierre Org; 'Ilya Kipnis'
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Portfolio Optimisation as a function of targeted Risk rather than return.

Hi Pierre,

The inequality constraint 'cannot' be turned into an equality one with the solver currently in use...I tried this in the past using auxiliary variables, but it was really hit and miss..best to wait for the new solver to be plugged in.
Alternatively, if you have a commercial license to one of the solver(s) now interfacing with R, you should be able to represent and solve this type of problem much more confidently.

Regards,

Alexios

On 23/01/2015 15:21, Pierre Org wrote:
> Hi Alexios
>
> Many thanks for the below this is really useful to me (and hopefully others). Yes I understood since my previous post that the risk was expressed as variance rather than standard deviation. In respect of upper bound, I assume that you mean that the portfolio risk is constrained to a maximum of 7% rather than exactly 7%  during the optimisation (i.e the risk will end up being close to 7% rather than exactly equal)? Is there a way of having a strict equality by forcing the lower bound as well ?
> I am really thankful for the time you spend on this.
>
> Kind regards
>
> Pierre
>
> -----Original Message-----
> From: alexios [mailto:alexios at 4dscape.com]
> Sent: 23 January 2015 14:48
> To: Pierre Org; 'Ilya Kipnis'
> Cc: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] Portfolio Optimisation as a function of targeted Risk rather than return.
>
> 1. The risk is variance, NOT standard deviation.
> 2. From the manual:
> "riskB:	 For the case that riskType is ?maxreward?, then riskB is the
> upper bound for the risk constraint."
>
> _Note_ the "upper bound".
>
> 3. Because of the quality of the SOCP solver currently used, you should probably scale your data by 100.
>
> Therefore:
>
> m = m*100
> riskB = (7^2)/12
> spec   <- parmaspec(S = as.matrix(cov(m)),
> riskB=riskB,risk="EV",riskType="maxreward", LB = rep(0,3), UB = 
> rep(1,3), budget=1, forecast=as.numeric(colMeans(m))) port <- 
> parmasolve(spec, solver="SOCP")
>
> +---------------------------------+
> |        PARMA Portfolio          |
> +---------------------------------+
> No.Assets               : 3
> Problem                 : SOCP
> Risk Measure    	: EV
> Objective               : maxreward
> Risk                    : 3.3703562
> Reward                  : 1.634234
>
>                      Optimal_Weights
> World.Ex.UK.Stocks               1
>
>   > sqrt(parmarisk(port))*sqrt(12)/100
> [1] 0.06359581
>
>   > parmareward(port)/100
> [1] 0.01634234
>
> But note:
>   >port at solution$status
> "Error (0)"
>
> i.e. "probably" unreliable solution. A new SOCP solver will be available sometime this year (courtesy of Bernhard Pfaff)...until then, use with caution.
>
> Regards,
>
> Alexios
>
>
> On 23/01/2015 13:59, Pierre Org wrote:
>> Hi Ilya
>>
>>
>>
>> Many thanks for pointing me toward the PARMA package. I have tried to use it but  I seem to fail, I am not sure I am doing things right. When I optimise  for a given level of risk  (7% annualised) and then check what the portfolio volatility with the  in-sample weights  the level  risk does not seem to equate to the intended target risk.
>>
>>
>>
>>                      Gilts World Ex UK Stocks     UK Stocks
>>
>> 2014-02-28  1.548142e-03       0.0279529433  4.838851e-02
>>
>> 2014-03-31  7.806639e-05       0.0105305699 -2.702980e-02
>>
>> 2014-04-30  7.377730e-03      -0.0052597245  3.158530e-02
>>
>> 2014-05-31  9.628424e-03       0.0282594842  1.481751e-02
>>
>> 2014-06-30 -5.580206e-03       0.0001037494 -1.283548e-02
>>
>> 2014-07-31  1.057991e-02      -0.0034606566 -3.263463e-05
>>
>> 2014-08-31  3.487462e-02       0.0404001701  2.027569e-02
>>
>> 2014-09-30 -6.982201e-03      -0.0005089251 -2.937074e-02
>>
>> 2014-10-31  1.384694e-02       0.0226491298 -1.050032e-02
>>
>> 2014-11-30  3.209176e-02       0.0427556870  2.914371e-02
>>
>>
>>
>> I use the above data as an input (m) to the optimiser then force my 
>> monthly standard deviation to 0.07/sqrt(12)
>>
>>
>>
>> spec   <- parmaspec(S = cov(m) ,riskB= 0.07/sqrt(12) ,risk="EV",riskType="maxreward", LB = rep(0,3), UB = rep(1,3), budget=1, forecast=colMeans(m))
>>
>> parmasolve(spec, solver="SOCP")}
>>
>>
>>
>> The annualised standard deviation of my series are :
>>
>>
>>
>>> apply(m,2,sd)*sqrt(12)
>>
>>
>>
>>           Gilts World Ex UK Stocks          UK Stocks
>>
>>           0.04938711         0.06359545         0.09144821
>>
>>
>>
>> so a 7% target risk portfolio that maximise return should exist as a solution. Anyhow the resulting weights from the above dataseries are calculated as:
>>
>>
>>
>>>    spec   <- parmaspec(S = cov(m) ,riskB= 0.07/sqrt(12) ,risk="EV",riskType="maxreward", LB = rep(0,3), UB = rep(1,3), budget=1, forecast=colMeans(m))
>>
>>>    parmasolve(spec, solver="SOCP")}
>>
>>
>>
>>
>>
>> +---------------------------------+
>>
>> |        PARMA Portfolio          |
>>
>> +---------------------------------+
>>
>> No.Assets                           : 3
>>
>> Problem                              : SOCP
>>
>> Risk Measure                     : EV
>>
>> Objective                            : maxreward
>>
>> Risk                                      : 0.0005859
>>
>> Reward                               : 0.0110454
>>
>>
>>
>>                      Optimal_Weights
>>
>> World Ex UK Stocks          0.9581
>>
>> Gilts                                      0.0419
>>
>>
>>
>>
>>
>>
>>
>> Now when I use the solution weights I do not get the same monthly 
>> targeted risk. I realise that the risk
>>
>>
>>
>>
>>
>>> w <- parmasolve(spec, solver="SOCP")@solution$weights
>>
>>> sd(rowSums(t(apply(m,1,function(x) x*t(w)))))*sqrt(12)
>>
>> [1] 0.0624795
>>
>>>
>>
>>
>>
>>
>>
>> My portfolio do not have a standard deviation of 0.7 as I was 
>> expecting??
>>
>>
>>
>>
>>
>> It is probably obvious to many of the PARMA users?but I can t  understand where I get it wrong as the portfolio is obviously feasible. What I want is the portfolio  that maximise return amongst all the possible portfolios with a 7% annualised vol.
>>
>> Any idea ?
>>
>>
>>
>>
>>
>> From: Ilya Kipnis [mailto:ilya.kipnis at gmail.com]
>> Sent: 21 January 2015 15:50
>> To: Pierre Org
>> Cc: r-sig-finance at r-project.org
>> Subject: Re: [R-SIG-Finance] Portfolio Optimisation as a function of targeted Risk rather than return.
>>
>>
>>
>> Check out the PortfolioAnalytics package.
>>
>>
>>
>> On Wed, Jan 21, 2015 at 6:13 AM, Pierre Org <pierre at lequeux.org> wrote:
>>
>> I am currently working on a portfolio optimisation strategy that 
>> would involves optimising  a portfolio so that it maximises the returns for a user
>> defined level of risk.   E.g. keeping the volatility of the portfolio at 10%
>> annualised whilst maximising the return for this level. For that 
>> purpose I was hoping to use the function maxreturnPortfolio  in 
>> fPortfolio that should return the portfolio with the maximal return for a fixed target risk.
>> Clearly  though showing in this great package the function has 
>> been/is in development by the authors of the package and currently 
>> does not work as intended. This is confirmed  by various posts and answer to those by the
>> authors.   I wonder if anyone knows of another more up to date  package or
>> way of doing this in R ?
>>
>>
>>
>> Any help would be really appreciated.
>>
>>
>>
>>
>>
>>
>>
>>
>>           [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list 
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>>
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list 
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>
>
>


From samitpaulin at gmail.com  Sat Jan 24 18:54:23 2015
From: samitpaulin at gmail.com (Samit Paul)
Date: Sat, 24 Jan 2015 23:24:23 +0530
Subject: [R-SIG-Finance] racd package
Message-ID: <CALROeVE+a088CVn3-9cjabSGVGYBh9zeGVWrSMh2TmehCqCQYg@mail.gmail.com>

Hello Alexios and team,

I tried to install racd package in R-studio from bitbucket. I installed and
attached "devtools". But while I am trying to install "racd", I am getting
the following error comment. I would highly appreciate if you kindly advise
on the same.

> require("devtools")

> install_bitbucket("racd","alexiosg")
Downloading bitbucket repo alexiosg/racd at master
Installing racd
"C:/PROGRA~1/R/R-30~1.3/bin/i386/R" --vanilla CMD INSTALL  \

"C:/Users/Sumit/AppData/Local/Temp/RtmpQ3gpvM/devtools8ac319a4457/alexiosg-racd-45894f1c7ba3"
 \
  --library="C:/Users/Sumit/Documents/R/win-library/3.0" --install-tests

* installing *source* package 'racd' ...
** libs

*** arch - i386
Warning: running command 'make -f
"C:/PROGRA~1/R/R-30~1.3/etc/i386/Makeconf" -f
"C:/PROGRA~1/R/R-30~1.3/share/make/winshlib.mk" SHLIB="racd.dll"
OBJECTS="acd.o distributions.o filters.o gig.o nig.o racd.o"' had status 127
ERROR: compilation failed for package 'racd'
* removing 'C:/Users/Sumit/Documents/R/win-library/3.0/racd'
Error: Command failed (1)
In addition: Warning message:
Username parameter is deprecated. Please use alexiosg/racd

> build_vignettes=FALSE
> vignette(package="racd")

Error in find.package(package, lib.loc) :
  there is no package called ?racd?

Regards,

Samit

	[[alternative HTML version deleted]]


From alexios at 4dscape.com  Sat Jan 24 19:37:10 2015
From: alexios at 4dscape.com (alexios)
Date: Sat, 24 Jan 2015 18:37:10 +0000
Subject: [R-SIG-Finance] racd package
In-Reply-To: <CALROeVE+a088CVn3-9cjabSGVGYBh9zeGVWrSMh2TmehCqCQYg@mail.gmail.com>
References: <CALROeVE+a088CVn3-9cjabSGVGYBh9zeGVWrSMh2TmehCqCQYg@mail.gmail.com>
Message-ID: <54C3E656.6040505@4dscape.com>

You've not provided a sessionInfo(), but I can see that that you are on 
Windows and your R version is quite old now.

1. Do you have Rtools installed?
2. Have you tried building any other program from source?
3. On windows it is recommended that you have R installed under a 
directory without spaces (NOT 'Program Files').
4. There are additional dependencies which should probably also be 
installed (e.g. rugarch, xts, Rsolnp, ucminf, numDeriv, zoo, parma, Matrix).

I can't replicate this on R 3.1.2 so there is little else I can help you 
with beyond the hints above.

Alexios


On 24/01/2015 17:54, Samit Paul wrote:
> Hello Alexios and team,
>
> I tried to install racd package in R-studio from bitbucket. I installed and
> attached "devtools". But while I am trying to install "racd", I am getting
> the following error comment. I would highly appreciate if you kindly advise
> on the same.
>
>> require("devtools")
>
>> install_bitbucket("racd","alexiosg")
> Downloading bitbucket repo alexiosg/racd at master
> Installing racd
> "C:/PROGRA~1/R/R-30~1.3/bin/i386/R" --vanilla CMD INSTALL  \
>
> "C:/Users/Sumit/AppData/Local/Temp/RtmpQ3gpvM/devtools8ac319a4457/alexiosg-racd-45894f1c7ba3"
>   \
>    --library="C:/Users/Sumit/Documents/R/win-library/3.0" --install-tests
>
> * installing *source* package 'racd' ...
> ** libs
>
> *** arch - i386
> Warning: running command 'make -f
> "C:/PROGRA~1/R/R-30~1.3/etc/i386/Makeconf" -f
> "C:/PROGRA~1/R/R-30~1.3/share/make/winshlib.mk" SHLIB="racd.dll"
> OBJECTS="acd.o distributions.o filters.o gig.o nig.o racd.o"' had status 127
> ERROR: compilation failed for package 'racd'
> * removing 'C:/Users/Sumit/Documents/R/win-library/3.0/racd'
> Error: Command failed (1)
> In addition: Warning message:
> Username parameter is deprecated. Please use alexiosg/racd
>
>> build_vignettes=FALSE
>> vignette(package="racd")
>
> Error in find.package(package, lib.loc) :
>    there is no package called ?racd?
>
> Regards,
>
> Samit
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From samitpaulin at gmail.com  Sat Jan 24 20:17:09 2015
From: samitpaulin at gmail.com (Samit Paul)
Date: Sun, 25 Jan 2015 00:47:09 +0530
Subject: [R-SIG-Finance] racd package
In-Reply-To: <54C3E656.6040505@4dscape.com>
References: <CALROeVE+a088CVn3-9cjabSGVGYBh9zeGVWrSMh2TmehCqCQYg@mail.gmail.com>
	<54C3E656.6040505@4dscape.com>
Message-ID: <CALROeVG2QDa6r4reKnH5SKKAsJpwW7ZLodOu1F-gdc_AqYF_Og@mail.gmail.com>

Dear Alexios,

Thanks a lot for your time and such a prompt response. Let me answer your
queries one by one:

1) Yes, I had Rtools installed

2) I tried installing all six packages from the list. Out of them parma and
spd are successfully installed. Rest of them were unsuccessful. However, I
could install rugarch and rmgarch from CRAN. But racd and twinkle are not
yet installed.

3) I would definitely try to install a latest version of R under a
directory and run the code.

4) All additional dependencies  as per your list, were installed

Sorry for not providing you sessionInfo() in the earlier mail. Please find
the same. I will try to follow your suggestion as per point 3 and if you
have anything else as an advice.

> sessionInfo()
R version 3.0.3 (2014-03-06)
Platform: i386-w64-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_India.1252  LC_CTYPE=English_India.1252
[3] LC_MONETARY=English_India.1252 LC_NUMERIC=C
[5] LC_TIME=English_India.1252

attached base packages:
[1] parallel  stats     graphics  grDevices utils     datasets  methods
base

other attached packages:
 [1] spd_2.0-0                  parma_1.5-2                nloptr_1.0.0

 [4] Matrix_1.1-2               numDeriv_2012.9-1          ucminf_1.1-3

 [7] Rsolnp_1.15                truncnorm_1.0-7            pracma_1.6.4

[10] devtools_1.7.0             fArma_3010.79              rmgarch_1.2-8

[13] rbenchmark_1.0.0           psych_1.4.5                corrgram_1.5

[16] seriation_1.0-13           copula_0.999-8             sos_1.3-8

[19] brew_1.0-6                 ismev_1.39                 mgcv_1.7-28

[22] evir_1.7-3                 gPdtest_0.4                vars_1.5-2

[25] lmtest_0.9-31              strucchange_1.5-0          arfima_1.2-5

[28] ltsa_1.4.4                 moments_0.13               tseries_0.10-32

[31] POT_1.1-3                  plm_1.3-1                  sandwich_2.2-10

[34] Formula_1.1-1              nlme_3.1-113               bdsmatrix_1.3-1

[37] ggplot2_0.9.3.1            fracdiff_1.4-2
fExtremes_3010.81
[40] fTrading_2160.77           fGarch_3010.82
fUnitRoots_3010.78
[43] fBasics_3010.86            MASS_7.3-29
 timeSeries_3010.97
[46] urca_1.2-7                 forecast_5.3               timeDate_3010.98

[49] rugarch_1.3-1              quantmod_0.4-0             TTR_0.22-0

[52] Defaults_1.1-1             PerformanceAnalytics_1.1.0 xts_0.9-3

[55] zoo_1.7-9

loaded via a namespace (and not attached):
 [1] ADGofTest_0.3               Bessel_0.5-5                bit_1.1-12

 [4] bitops_1.0-6                cluster_1.14.4
 colorspace_1.2-4
 [7] corpcor_1.6.7               dichromat_2.0-0             digest_0.6.4

[10] DistributionUtils_0.5-1     expm_0.99-1.1               ff_2.2-13

[13] FRAPO_0.3-8                 gclus_1.3.1
GeneralizedHyperbolic_0.8-1
[16] grid_3.0.3                  gsl_1.9-10                  gtable_0.1.2

[19] httr_0.6.1                  KernSmooth_2.23-10          ks_1.9.0

[22] labeling_0.2                lattice_0.20-27             misc3d_0.8-4

[25] munsell_0.4.2               mvtnorm_0.9-9997            nnet_7.3-7

[28] pcaPP_1.9-49                plyr_1.8.1                  proto_0.3-10

[31] pspline_1.0-16              quadprog_1.5-5
 RColorBrewer_1.0-5
[34] Rcpp_0.11.1                 RCurl_1.95-4.5              reshape2_1.2.2

[37] rgl_0.93.996                Rglpk_0.6-0                 scales_0.2.3

[40] SkewHyperbolic_0.3-2        slam_0.1-32
stabledist_0.6-6
[43] stats4_3.0.3                stringr_0.6.2               tools_3.0.3

[46] TSP_1.0-9


Regards,

Samit

On Sun, Jan 25, 2015 at 12:07 AM, alexios <alexios at 4dscape.com> wrote:

> You've not provided a sessionInfo(), but I can see that that you are on
> Windows and your R version is quite old now.
>
> 1. Do you have Rtools installed?
> 2. Have you tried building any other program from source?
> 3. On windows it is recommended that you have R installed under a
> directory without spaces (NOT 'Program Files').
> 4. There are additional dependencies which should probably also be
> installed (e.g. rugarch, xts, Rsolnp, ucminf, numDeriv, zoo, parma, Matrix).
>
> I can't replicate this on R 3.1.2 so there is little else I can help you
> with beyond the hints above.
>
> Alexios
>
>
>
> On 24/01/2015 17:54, Samit Paul wrote:
>
>> Hello Alexios and team,
>>
>> I tried to install racd package in R-studio from bitbucket. I installed
>> and
>> attached "devtools". But while I am trying to install "racd", I am getting
>> the following error comment. I would highly appreciate if you kindly
>> advise
>> on the same.
>>
>>  require("devtools")
>>>
>>
>>  install_bitbucket("racd","alexiosg")
>>>
>> Downloading bitbucket repo alexiosg/racd at master
>> Installing racd
>> "C:/PROGRA~1/R/R-30~1.3/bin/i386/R" --vanilla CMD INSTALL  \
>>
>> "C:/Users/Sumit/AppData/Local/Temp/RtmpQ3gpvM/
>> devtools8ac319a4457/alexiosg-racd-45894f1c7ba3"
>>   \
>>    --library="C:/Users/Sumit/Documents/R/win-library/3.0" --install-tests
>>
>> * installing *source* package 'racd' ...
>> ** libs
>>
>> *** arch - i386
>> Warning: running command 'make -f
>> "C:/PROGRA~1/R/R-30~1.3/etc/i386/Makeconf" -f
>> "C:/PROGRA~1/R/R-30~1.3/share/make/winshlib.mk" SHLIB="racd.dll"
>> OBJECTS="acd.o distributions.o filters.o gig.o nig.o racd.o"' had status
>> 127
>> ERROR: compilation failed for package 'racd'
>> * removing 'C:/Users/Sumit/Documents/R/win-library/3.0/racd'
>> Error: Command failed (1)
>> In addition: Warning message:
>> Username parameter is deprecated. Please use alexiosg/racd
>>
>>  build_vignettes=FALSE
>>> vignette(package="racd")
>>>
>>
>> Error in find.package(package, lib.loc) :
>>    there is no package called ?racd?
>>
>> Regards,
>>
>> Samit
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>>
>

	[[alternative HTML version deleted]]


From juanjosefernandez19 at hotmail.com  Mon Jan 26 21:03:38 2015
From: juanjosefernandez19 at hotmail.com (Juanjo Fdez)
Date: Mon, 26 Jan 2015 21:03:38 +0100
Subject: [R-SIG-Finance] problems
Message-ID: <DUB120-W18FCABC789956DCC70BD9EAF350@phx.gbl>

Dear all,
 
i installed the R, and R Excel following these instructions
 
http://homepage.univie.ac.at/erich.neuwirth/php/rcomwiki/doku.php?id=wiki:how_to_install
 
then, I am trying to run this macro, but i get the message "compillation error   cant find the Project or library". Its running on exce 2010
 
the macro worked fine previously in other computer with Excel 2003 and R versi?n 2.15.2
 
what am i doing wrong? thx
 
Sub xxx()
 RInterface.StartRServer
 Menu.MultiPage1.Value = 0
 Menu.Show
 RInterface.StopRServer
 ActiveWorkbook.Save
End Sub 
 		 	   		  
	[[alternative HTML version deleted]]


From daniel.cegielka at gmail.com  Mon Jan 26 21:07:36 2015
From: daniel.cegielka at gmail.com (=?UTF-8?Q?Daniel_Cegie=C5=82ka?=)
Date: Mon, 26 Jan 2015 21:07:36 +0100
Subject: [R-SIG-Finance] problems
In-Reply-To: <DUB120-W18FCABC789956DCC70BD9EAF350@phx.gbl>
References: <DUB120-W18FCABC789956DCC70BD9EAF350@phx.gbl>
Message-ID: <CAPLrYETczkbXeu1GKEpzhLNK2C=H8fTJk+EY6GK7fwBSoV62FA@mail.gmail.com>

2015-01-26 21:03 GMT+01:00 Juanjo Fdez <juanjosefernandez19 at hotmail.com>:
> Dear all,
>
> i installed the R, and R Excel following these instructions
>
> http://homepage.univie.ac.at/erich.neuwirth/php/rcomwiki/doku.php?id=wiki:how_to_install
>
> then, I am trying to run this macro, but i get the message "compillation error   cant find the Project or library". Its running on exce 2010
>
> the macro worked fine previously in other computer with Excel 2003 and R versi?n 2.15.2
>
> what am i doing wrong? thx

"""
More information

There is a mailing list do discuss all the programs described above.
To subscribe, go to
http://mailman.csd.univie.ac.at/mailman/listinfo/rcom-l.
"""

http://homepage.univie.ac.at/erich.neuwirth/php/rcomwiki/doku.php?id=wiki:version_information_and_links

Best regards,
Daniel


From juanjosefernandez19 at hotmail.com  Mon Jan 26 21:23:17 2015
From: juanjosefernandez19 at hotmail.com (Juanjo Fdez)
Date: Mon, 26 Jan 2015 20:23:17 +0000
Subject: [R-SIG-Finance] =?utf-8?q?problems?=
Message-ID: <DUB405-EAS537A95AAD2DD9E18BF2ACEAF350@phx.gbl>

Thx Daniel for that link its not working






Enviado desde Surface





De: Daniel Cegie?ka
Enviado el: ?lunes?, ?26? de ?enero? de ?2015 ?21?:?07
Para: Juanjo Fdez
CC: r-sig-finance at r-project.org





2015-01-26 21:03 GMT+01:00 Juanjo Fdez <juanjosefernandez19 at hotmail.com>:
> Dear all,
>
> i installed the R, and R Excel following these instructions
>
> http://homepage.univie.ac.at/erich.neuwirth/php/rcomwiki/doku.php?id=wiki:how_to_install
>
> then, I am trying to run this macro, but i get the message "compillation error   cant find the Project or library". Its running on exce 2010
>
> the macro worked fine previously in other computer with Excel 2003 and R versi?n 2.15.2
>
> what am i doing wrong? thx

"""
More information

There is a mailing list do discuss all the programs described above.
To subscribe, go to
http://mailman.csd.univie.ac.at/mailman/listinfo/rcom-l.
"""

http://homepage.univie.ac.at/erich.neuwirth/php/rcomwiki/doku.php?id=wiki:version_information_and_links

Best regards,
Daniel
	[[alternative HTML version deleted]]


From daniel.cegielka at gmail.com  Mon Jan 26 21:28:53 2015
From: daniel.cegielka at gmail.com (=?UTF-8?Q?Daniel_Cegie=C5=82ka?=)
Date: Mon, 26 Jan 2015 21:28:53 +0100
Subject: [R-SIG-Finance] problems
In-Reply-To: <DUB405-EAS537A95AAD2DD9E18BF2ACEAF350@phx.gbl>
References: <DUB405-EAS537A95AAD2DD9E18BF2ACEAF350@phx.gbl>
Message-ID: <CAPLrYEQ5hxrHmuGs8ucJp6iDpveirMnwc+4rUpyn1oT3uEF+yA@mail.gmail.com>

2015-01-26 21:23 GMT+01:00 Juanjo Fdez <juanjosefernandez19 at hotmail.com>:
> Thx Daniel for that link its not working
>
> Enviado desde Surface

google... and bingo:

https://lists.univie.ac.at/mailman/listinfo/rcom-l

Daniel


From paulteetor at yahoo.com  Tue Jan 27 00:59:59 2015
From: paulteetor at yahoo.com (Paul Teetor)
Date: Mon, 26 Jan 2015 23:59:59 +0000 (UTC)
Subject: [R-SIG-Finance] Number of data points required for Cointigration
In-Reply-To: <CAO7kh0HN5VXXJDKRgs+8sfw_v2DmvziOQy1Lmqakt11wR3tk=A@mail.gmail.com>
References: <CAO7kh0HN5VXXJDKRgs+8sfw_v2DmvziOQy1Lmqakt11wR3tk=A@mail.gmail.com>
Message-ID: <867478.539411.1422316799586.JavaMail.yahoo@mail.yahoo.com>

Amol,
I don't have a formula or a guideline for determining the number of data points. But I can share two experiences.
First, when I traded mean-reverting spreads, I used 3 to 5 years of daily data. That's 750 to 1,250 data points. Less data did not work well for my spreads.
Second, in my experience, the ADF test was quite unstable. That is, it might fail to reject for a while, then start rejecting the null hypothesis when the market showed some trending back to the mean. Then it would fail to reject again as the market wandered away.
Perhaps smarter people than I have had better luck trading with the ADF, but for me, it did not provide a complete answer to the question of mean-reversion.
Paul?Paul Teetor, Elgin, IL USAhttp://quantdevel.com/public
      From: amol gupta <amolgupta87 at gmail.com>
 To: "r-sig-finance at r-project.org" <r-sig-finance at r-project.org> 
 Sent: Friday, January 23, 2015 3:24 AM
 Subject: [R-SIG-Finance] Number of data points required for Cointigration
   
Hi
I need help in figuring out the length of historical data that I should use. I took stock prices(daily close) for two tickers from yahoo(200 days).I tried finding regression coefficient using PCA and I use 150 points for PCA. I find a coefficient Beta.

Now to see whether the spread is mean reverting or not I use ADF. If I use 150 point long spread, It comes out to be nonstationary. If I use 200 points data the outcome is stationary
I again used 200 points to do the PCA and find regression. The spread comes out to be non stationary. From all these observation I think that this is not a stable relationship.
So following are my questions   
   - Is there a way to decide length of historical data to use?
   - Some relationship may be more stable than others. Is there away to quantify it?
Any other insight in this regard will be appreciated(time frame, pairs vs basket). I have attached the plot and the script that was used to generate the plot.

-- 
Regards
Amol

If all the seas were ink,
And all the reeds were pens,
And all the skies were parchment,
And all the men could write,
These would not suffice
To write down all the red tape
Of this Government.


_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

  
	[[alternative HTML version deleted]]


From samitpaulin at gmail.com  Tue Jan 27 07:45:24 2015
From: samitpaulin at gmail.com (Samit Paul)
Date: Tue, 27 Jan 2015 12:15:24 +0530
Subject: [R-SIG-Finance] racd package
In-Reply-To: <CALROeVG2QDa6r4reKnH5SKKAsJpwW7ZLodOu1F-gdc_AqYF_Og@mail.gmail.com>
References: <CALROeVE+a088CVn3-9cjabSGVGYBh9zeGVWrSMh2TmehCqCQYg@mail.gmail.com>
	<54C3E656.6040505@4dscape.com>
	<CALROeVG2QDa6r4reKnH5SKKAsJpwW7ZLodOu1F-gdc_AqYF_Og@mail.gmail.com>
Message-ID: <CALROeVHkMsWyqrd-Z3-ONnWn-VgH-wYrMRpTYoLxs6d+sUBh4g@mail.gmail.com>

Dear Alexios and Team,

Finally, I have successfully installed "racd" package after downloading
latest version of R and mapped to the new directory (instead of program
files) as per your advice. Thanks a lot for your guidance. I sincerely
appreciate it.

I ran the codes as per the package and found a problem in getting the
output in ".csv" format. The codes and the output are listed below.

*Codes:*

spec = acdspec(variance.model=list(variance.targeting = TRUE),

 mean.model=list(armaOrder=c(1,0)),distribution.model=list(model = "jsu",

 skewOrder=c(1,1,0), shapeOrder=c(1,1,0)))
roll = acdroll(spec, Hsidesret, n.ahead = 1, forecast.length = 2108,
                     n.start = NULL, refit.every = 1000, refit.window =
"moving",
                     window.size = NULL, solver = "msoptim", fit.control =
list(),
                     solver.control = list(), calculate.VaR = TRUE,
VaR.alpha = 0.05)
roll
as.data.frame(roll)
write.csv(as.data.frame(roll)),"as.data.frame(roll).csv")

*Output:*

*-------------------------------------*
*              ACD Roll               *
*-------------------------------------*
No.Refits : 3
Refit Horizon : 1000
No.Forecasts : 2108
GARCH Model : sGARCH(1,1)
Mean Model : ARFIMA(1,0,0)

ACD Skew Model : quad(1,1,0)
ACD Shape Model : quad(1,1,0)
Distribution : jsu

Forecast Density:
                         Mu  Sigma    Skew  Shape Shape(GIG) Realized
1991-10-15 05:30:00 -0.0456 0.8481  0.0626 1.4358          0  -0.7995
1991-10-16 05:30:00  0.0206 0.8544 -0.1891 1.4378          0   2.4770
1991-10-17 05:30:00 -0.1283 1.0273  0.3050 1.4333          0  -0.1631
1991-10-18 05:30:00 -0.0083 0.9953 -0.0544 1.4368          0   1.6249
1991-10-19 05:30:00 -0.0896 1.0432  0.1712 1.4348          0   1.1472
1991-10-20 05:30:00 -0.0679 1.0526  0.1148 1.4353          0  -1.4614

..........................
                         Mu  Sigma    Skew  Shape Shape(GIG) Realized
1997-07-17 05:30:00 -0.0165 0.9810 -0.0418 1.5033          0   0.3328
1997-07-18 05:30:00 -0.0258 0.9578  0.0091 1.4976          0   0.6218
1997-07-19 05:30:00 -0.0340 0.9466  0.0565 1.4923          0   0.8430
1997-07-20 05:30:00 -0.0402 0.9480  0.0931 1.4881          0  -0.7663
1997-07-21 05:30:00  0.0054 0.9414 -0.1620 1.5163          0  -0.4917
1997-07-22 05:30:00 -0.0024 0.9265 -0.1251 1.5123          0   1.5108

Elapsed: 47.21225 secs
> as.data.frame(roll)
Error in as.data.frame.default(roll) :
  cannot coerce class "structure("ACDroll", package = "racd")" to a
data.frame
> write.csv(as.data.frame(roll)),"as.data.frame(roll).csv")
Error: unexpected ',' in "write.csv(as.data.frame(roll)),"

As you may see, the codes are running fine. But I can't convert it into
data frame, hence cannot get an output in csv format. Could you please help
me on this.

Thanks and regards,

Samit Paul

On Sun, Jan 25, 2015 at 12:47 AM, Samit Paul <samitpaulin at gmail.com> wrote:

> Dear Alexios,
>
> Thanks a lot for your time and such a prompt response. Let me answer your
> queries one by one:
>
> 1) Yes, I had Rtools installed
>
> 2) I tried installing all six packages from the list. Out of them parma
> and spd are successfully installed. Rest of them were unsuccessful.
> However, I could install rugarch and rmgarch from CRAN. But racd and
> twinkle are not yet installed.
>
> 3) I would definitely try to install a latest version of R under a
> directory and run the code.
>
> 4) All additional dependencies  as per your list, were installed
>
> Sorry for not providing you sessionInfo() in the earlier mail. Please find
> the same. I will try to follow your suggestion as per point 3 and if you
> have anything else as an advice.
>
> > sessionInfo()
> R version 3.0.3 (2014-03-06)
> Platform: i386-w64-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=English_India.1252  LC_CTYPE=English_India.1252
> [3] LC_MONETARY=English_India.1252 LC_NUMERIC=C
> [5] LC_TIME=English_India.1252
>
> attached base packages:
> [1] parallel  stats     graphics  grDevices utils     datasets  methods
> base
>
> other attached packages:
>  [1] spd_2.0-0                  parma_1.5-2                nloptr_1.0.0
>
>  [4] Matrix_1.1-2               numDeriv_2012.9-1          ucminf_1.1-3
>
>  [7] Rsolnp_1.15                truncnorm_1.0-7            pracma_1.6.4
>
> [10] devtools_1.7.0             fArma_3010.79              rmgarch_1.2-8
>
> [13] rbenchmark_1.0.0           psych_1.4.5                corrgram_1.5
>
> [16] seriation_1.0-13           copula_0.999-8             sos_1.3-8
>
> [19] brew_1.0-6                 ismev_1.39                 mgcv_1.7-28
>
> [22] evir_1.7-3                 gPdtest_0.4                vars_1.5-2
>
> [25] lmtest_0.9-31              strucchange_1.5-0          arfima_1.2-5
>
> [28] ltsa_1.4.4                 moments_0.13               tseries_0.10-32
>
> [31] POT_1.1-3                  plm_1.3-1                  sandwich_2.2-10
>
> [34] Formula_1.1-1              nlme_3.1-113               bdsmatrix_1.3-1
>
> [37] ggplot2_0.9.3.1            fracdiff_1.4-2
> fExtremes_3010.81
> [40] fTrading_2160.77           fGarch_3010.82
> fUnitRoots_3010.78
> [43] fBasics_3010.86            MASS_7.3-29
>  timeSeries_3010.97
> [46] urca_1.2-7                 forecast_5.3
> timeDate_3010.98
> [49] rugarch_1.3-1              quantmod_0.4-0             TTR_0.22-0
>
> [52] Defaults_1.1-1             PerformanceAnalytics_1.1.0 xts_0.9-3
>
> [55] zoo_1.7-9
>
> loaded via a namespace (and not attached):
>  [1] ADGofTest_0.3               Bessel_0.5-5                bit_1.1-12
>
>  [4] bitops_1.0-6                cluster_1.14.4
>  colorspace_1.2-4
>  [7] corpcor_1.6.7               dichromat_2.0-0             digest_0.6.4
>
> [10] DistributionUtils_0.5-1     expm_0.99-1.1               ff_2.2-13
>
> [13] FRAPO_0.3-8                 gclus_1.3.1
> GeneralizedHyperbolic_0.8-1
> [16] grid_3.0.3                  gsl_1.9-10                  gtable_0.1.2
>
> [19] httr_0.6.1                  KernSmooth_2.23-10          ks_1.9.0
>
> [22] labeling_0.2                lattice_0.20-27             misc3d_0.8-4
>
> [25] munsell_0.4.2               mvtnorm_0.9-9997            nnet_7.3-7
>
> [28] pcaPP_1.9-49                plyr_1.8.1                  proto_0.3-10
>
> [31] pspline_1.0-16              quadprog_1.5-5
>  RColorBrewer_1.0-5
> [34] Rcpp_0.11.1                 RCurl_1.95-4.5
>  reshape2_1.2.2
> [37] rgl_0.93.996                Rglpk_0.6-0                 scales_0.2.3
>
> [40] SkewHyperbolic_0.3-2        slam_0.1-32
> stabledist_0.6-6
> [43] stats4_3.0.3                stringr_0.6.2               tools_3.0.3
>
> [46] TSP_1.0-9
>
>
> Regards,
>
> Samit
>
> On Sun, Jan 25, 2015 at 12:07 AM, alexios <alexios at 4dscape.com> wrote:
>
>> You've not provided a sessionInfo(), but I can see that that you are on
>> Windows and your R version is quite old now.
>>
>> 1. Do you have Rtools installed?
>> 2. Have you tried building any other program from source?
>> 3. On windows it is recommended that you have R installed under a
>> directory without spaces (NOT 'Program Files').
>> 4. There are additional dependencies which should probably also be
>> installed (e.g. rugarch, xts, Rsolnp, ucminf, numDeriv, zoo, parma, Matrix).
>>
>> I can't replicate this on R 3.1.2 so there is little else I can help you
>> with beyond the hints above.
>>
>> Alexios
>>
>>
>>
>> On 24/01/2015 17:54, Samit Paul wrote:
>>
>>> Hello Alexios and team,
>>>
>>> I tried to install racd package in R-studio from bitbucket. I installed
>>> and
>>> attached "devtools". But while I am trying to install "racd", I am
>>> getting
>>> the following error comment. I would highly appreciate if you kindly
>>> advise
>>> on the same.
>>>
>>>  require("devtools")
>>>>
>>>
>>>  install_bitbucket("racd","alexiosg")
>>>>
>>> Downloading bitbucket repo alexiosg/racd at master
>>> Installing racd
>>> "C:/PROGRA~1/R/R-30~1.3/bin/i386/R" --vanilla CMD INSTALL  \
>>>
>>> "C:/Users/Sumit/AppData/Local/Temp/RtmpQ3gpvM/
>>> devtools8ac319a4457/alexiosg-racd-45894f1c7ba3"
>>>   \
>>>    --library="C:/Users/Sumit/Documents/R/win-library/3.0"
>>> --install-tests
>>>
>>> * installing *source* package 'racd' ...
>>> ** libs
>>>
>>> *** arch - i386
>>> Warning: running command 'make -f
>>> "C:/PROGRA~1/R/R-30~1.3/etc/i386/Makeconf" -f
>>> "C:/PROGRA~1/R/R-30~1.3/share/make/winshlib.mk" SHLIB="racd.dll"
>>> OBJECTS="acd.o distributions.o filters.o gig.o nig.o racd.o"' had status
>>> 127
>>> ERROR: compilation failed for package 'racd'
>>> * removing 'C:/Users/Sumit/Documents/R/win-library/3.0/racd'
>>> Error: Command failed (1)
>>> In addition: Warning message:
>>> Username parameter is deprecated. Please use alexiosg/racd
>>>
>>>  build_vignettes=FALSE
>>>> vignette(package="racd")
>>>>
>>>
>>> Error in find.package(package, lib.loc) :
>>>    there is no package called ?racd?
>>>
>>> Regards,
>>>
>>> Samit
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>>>
>>
>

	[[alternative HTML version deleted]]


From frainj at tcd.ie  Tue Jan 27 14:50:24 2015
From: frainj at tcd.ie (John Frain)
Date: Tue, 27 Jan 2015 13:50:24 +0000
Subject: [R-SIG-Finance] Number of data points required for Cointigration
In-Reply-To: <CAO7kh0HN5VXXJDKRgs+8sfw_v2DmvziOQy1Lmqakt11wR3tk=A@mail.gmail.com>
References: <CAO7kh0HN5VXXJDKRgs+8sfw_v2DmvziOQy1Lmqakt11wR3tk=A@mail.gmail.com>
Message-ID: <CAJWf-122KcqQ286y96gfRbHDH1Pd+O2mmDn_ar9VvKKkN1f58w@mail.gmail.com>

On 23 January 2015 at 09:24, amol gupta <amolgupta87 at gmail.com> wrote:
> Hi
>
> I need help in figuring out the length of historical data that I should use.
> I took stock prices(daily close) for two tickers from yahoo(200 days).I
> tried finding regression coefficient using PCA and I use 150 points for PCA.
> I find a coefficient Beta.
>
> Now to see whether the spread is mean reverting or not I use ADF. If I use
> 150 point long spread, It comes out to be nonstationary. If I use 200 points
> data the outcome is stationary
>
> I again used 200 points to do the PCA and find regression. The spread comes
> out to be non stationary. From all these observation I think that this is
> not a stable relationship.
>
> So following are my questions
>
> Is there a way to decide length of historical data to use?

I don't think so. My involvement in cointegration was in the
macroeconometrics area. Here we liked to use at least 30 years of
data. For annual or quarterly data series such as spreads were
generally stationary about a constant level. The idea of a equilibrium
trend in a spread does not make sense to me. In such cases one would
draw a graph and look at the number of times the series crossed a
measure of the equilibrium spread. The more times the series crosses
the equilibrium the easier it is to assess stationarity. If there are
few crossings the either the series in non-stationary or you have not
got enough data.  You can also think about how long shocks will take
to work through the system. Your series should be a multiple of that
length. Increasing the periodicity of the data does not necessarily
may lengthen the series but it does not increase the time covered by
the series.

> Some relationship may be more stable than others. Is there away to quantify

Yes. If you fit an error correction mechanism by Engle-Granger or
Johannsen the coefficient on the error correction mechanism can be
used to get a half life for deviations from equilibrium. A small
coefficient means that the equilibrium is restored slowly.

> it?
>
> Any other insight in this regard will be appreciated(time frame, pairs vs
> basket). I have attached the plot and the script that was used to generate
> the plot.
>
>
> --
> Regards
> Amol
>
> If all the seas were ink,
> And all the reeds were pens,
> And all the skies were parchment,
> And all the men could write,
> These would not suffice
> To write down all the red tape
> Of this Government.
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.

John C Frain, Ph.D.

Economics Department             3 Aranleigh Park
Trinity College Dublin                 Rathfarnham
College Green                           Dublin 14
Dublin 2                                    Ireland
Ireland
www.tcd.ie/Economics/staff/frainj/home.htm
mailto:frainj at tcd.ie
mailto:frainj at gmail.com


From aidan.corcoran11 at gmail.com  Tue Jan 27 15:33:01 2015
From: aidan.corcoran11 at gmail.com (Aidan Corcoran)
Date: Tue, 27 Jan 2015 14:33:01 +0000
Subject: [R-SIG-Finance] rbbg connection issue: failed to connect server
Message-ID: <CADv5Py5F+MMy4n3knpLgyvSUzb4+yrweOG3vKwbUWDhoeJ=fDQ@mail.gmail.com>

Dear all,

I'm getting the below error when I try
conn <- blpConnect()

R version 3.1.2 (2014-10-31)
rJava Version 0.9-6
Rbbg Version 0.5.3
Java environment initialized successfully.
Looking for most recent blpapi3.jar file...
Adding C:\blp\API\blpapi3.jar to Java classpath
*Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) : *
*  org.findata.blpwrapper.WrapperException: Session not started because:
Failed to connect server: localhost/127.0.0.1:8194 <http://127.0.0.1:8194>*

this post from 2012 appears similar
http://stackoverflow.com/questions/11165357/connect-to-bloomberg-from-r
however the solution there (Re-installing the Java API) did not work for
me. I reinstalled the API and then also the Java SDK and the rJava package.
Excel connects to bloomberg fine. My desktop is  a virtual desktop in case
that is relevant. It's win7-64bit with R version 3.1.2 and latest versions
of all packages I believe.

If anyone could help me understand this error better or fix it that would
be very much appreciated!

thanks
Aidan.

	[[alternative HTML version deleted]]


From john.laing at gmail.com  Tue Jan 27 16:20:52 2015
From: john.laing at gmail.com (John Laing)
Date: Tue, 27 Jan 2015 10:20:52 -0500
Subject: [R-SIG-Finance] rbbg connection issue: failed to connect server
In-Reply-To: <CADv5Py5F+MMy4n3knpLgyvSUzb4+yrweOG3vKwbUWDhoeJ=fDQ@mail.gmail.com>
References: <CADv5Py5F+MMy4n3knpLgyvSUzb4+yrweOG3vKwbUWDhoeJ=fDQ@mail.gmail.com>
Message-ID: <CAA3Wa=sU11UdAefgici-vjDODt9=QpxAEtwHSsmYReGL=Qf2wg@mail.gmail.com>

Aidan,

This does appear to be an issue with your Java API. The jar file being
found in the top of the API never seems to work. The correct jar file
is usually buried a few levels down in a versioned directory. On my
machine, this is C:\blp\API\APIv3\JavaAPI\v3.4.5.5\lib\blpapi3.jar.

The function find.blpapi.jar.file contains the logic to search for
this file. It's only falling back to the jar file you're seeing
because it can't find one the right one elsewhere. (I should probably
throw an error here instead of falling back to a jar that never seems
to work.)

Re-installing the Bloomberg Java API in the default location should
fix your problem. If it's already installed elsewhere, you can pass
the location in the blpapi.jar.file argument.

HTH,
John

On Tue, Jan 27, 2015 at 9:33 AM, Aidan Corcoran
<aidan.corcoran11 at gmail.com> wrote:
> Dear all,
>
> I'm getting the below error when I try
> conn <- blpConnect()
>
> R version 3.1.2 (2014-10-31)
> rJava Version 0.9-6
> Rbbg Version 0.5.3
> Java environment initialized successfully.
> Looking for most recent blpapi3.jar file...
> Adding C:\blp\API\blpapi3.jar to Java classpath
> *Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) : *
> *  org.findata.blpwrapper.WrapperException: Session not started because:
> Failed to connect server: localhost/127.0.0.1:8194 <http://127.0.0.1:8194>*
>
> this post from 2012 appears similar
> http://stackoverflow.com/questions/11165357/connect-to-bloomberg-from-r
> however the solution there (Re-installing the Java API) did not work for
> me. I reinstalled the API and then also the Java SDK and the rJava package.
> Excel connects to bloomberg fine. My desktop is  a virtual desktop in case
> that is relevant. It's win7-64bit with R version 3.1.2 and latest versions
> of all packages I believe.
>
> If anyone could help me understand this error better or fix it that would
> be very much appreciated!
>
> thanks
> Aidan.
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From aidan.corcoran11 at gmail.com  Tue Jan 27 16:35:18 2015
From: aidan.corcoran11 at gmail.com (Aidan Corcoran)
Date: Tue, 27 Jan 2015 15:35:18 +0000
Subject: [R-SIG-Finance] rbbg connection issue: failed to connect server
In-Reply-To: <CAA3Wa=sU11UdAefgici-vjDODt9=QpxAEtwHSsmYReGL=Qf2wg@mail.gmail.com>
References: <CADv5Py5F+MMy4n3knpLgyvSUzb4+yrweOG3vKwbUWDhoeJ=fDQ@mail.gmail.com>
	<CAA3Wa=sU11UdAefgici-vjDODt9=QpxAEtwHSsmYReGL=Qf2wg@mail.gmail.com>
Message-ID: <CADv5Py4VAMcHqaZbLbya0357oX8+m17s5UahwZsyt8aWsZK86Q@mail.gmail.com>

indeed you are right, thanks John.

in case helpful to others, bloomberg no longer provides an installer for
its java API, so I manually placed the unzipped file they do provide into a
directory.
The directory structure I used had a mistake - the one John provides works
perfectly.

thanks again


On Tue, Jan 27, 2015 at 3:20 PM, John Laing <john.laing at gmail.com> wrote:

> Aidan,
>
> This does appear to be an issue with your Java API. The jar file being
> found in the top of the API never seems to work. The correct jar file
> is usually buried a few levels down in a versioned directory. On my
> machine, this is C:\blp\API\APIv3\JavaAPI\v3.4.5.5\lib\blpapi3.jar.
>
> The function find.blpapi.jar.file contains the logic to search for
> this file. It's only falling back to the jar file you're seeing
> because it can't find one the right one elsewhere. (I should probably
> throw an error here instead of falling back to a jar that never seems
> to work.)
>
> Re-installing the Bloomberg Java API in the default location should
> fix your problem. If it's already installed elsewhere, you can pass
> the location in the blpapi.jar.file argument.
>
> HTH,
> John
>
> On Tue, Jan 27, 2015 at 9:33 AM, Aidan Corcoran
> <aidan.corcoran11 at gmail.com> wrote:
> > Dear all,
> >
> > I'm getting the below error when I try
> > conn <- blpConnect()
> >
> > R version 3.1.2 (2014-10-31)
> > rJava Version 0.9-6
> > Rbbg Version 0.5.3
> > Java environment initialized successfully.
> > Looking for most recent blpapi3.jar file...
> > Adding C:\blp\API\blpapi3.jar to Java classpath
> > *Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) : *
> > *  org.findata.blpwrapper.WrapperException: Session not started because:
> > Failed to connect server: localhost/127.0.0.1:8194 <
> http://127.0.0.1:8194>*
> >
> > this post from 2012 appears similar
> > http://stackoverflow.com/questions/11165357/connect-to-bloomberg-from-r
> > however the solution there (Re-installing the Java API) did not work for
> > me. I reinstalled the API and then also the Java SDK and the rJava
> package.
> > Excel connects to bloomberg fine. My desktop is  a virtual desktop in
> case
> > that is relevant. It's win7-64bit with R version 3.1.2 and latest
> versions
> > of all packages I believe.
> >
> > If anyone could help me understand this error better or fix it that would
> > be very much appreciated!
> >
> > thanks
> > Aidan.
> >
> >         [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From amolgupta87 at gmail.com  Tue Jan 27 19:09:02 2015
From: amolgupta87 at gmail.com (amol gupta)
Date: Tue, 27 Jan 2015 23:39:02 +0530
Subject: [R-SIG-Finance] Number of data points required for Cointigration
In-Reply-To: <867478.539411.1422316799586.JavaMail.yahoo@mail.yahoo.com>
References: <CAO7kh0HN5VXXJDKRgs+8sfw_v2DmvziOQy1Lmqakt11wR3tk=A@mail.gmail.com>
	<867478.539411.1422316799586.JavaMail.yahoo@mail.yahoo.com>
Message-ID: <CAO7kh0EP9Y=82_Ux1hehz7uDkPdd+gT==gw0Fy-o0LU1hUR5Fg@mail.gmail.com>

Paul

You say that ADF is not really stable . I agree. Other options to explore
are

   - Use other unit root and stationarity  test.
   - Use other cointigration tests like johansen tests.
   - Finding PCA and choosing one of the lower variance portfolio and test
   for stationarity.(I need to understand PCA more.)

I will take some time and test these ideas. Have you tried anyone of these?
If yes, please share you experiences.

Thank you for your insights.

On Tue, Jan 27, 2015 at 5:29 AM, Paul Teetor <paulteetor at yahoo.com> wrote:

> Amol,
>
> I don't have a formula or a guideline for determining the number of data
> points. But I can share two experiences.
>
> First, when I traded mean-reverting spreads, I used 3 to 5 years of daily
> data. That's 750 to 1,250 data points. Less data did not work well for my
> spreads.
>
> Second, in my experience, the ADF test was quite unstable. That is, it
> might fail to reject for a while, then start rejecting the null hypothesis
> when the market showed some trending back to the mean. Then it would fail
> to reject again as the market wandered away.
>
> Perhaps smarter people than I have had better luck trading with the ADF,
> but for me, it did not provide a complete answer to the question of
> mean-reversion.
>
> Paul
>
> Paul Teetor, Elgin, IL USA
> http://quantdevel.com/public <http://quanttrader.info/public>
>
>   ------------------------------
>  *From:* amol gupta <amolgupta87 at gmail.com>
> *To:* "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
> *Sent:* Friday, January 23, 2015 3:24 AM
> *Subject:* [R-SIG-Finance] Number of data points required for
> Cointigration
>
> Hi
>
> I need help in figuring out the length of historical data that I should
> use. I took stock prices(daily close) for two tickers from yahoo(200
> days).I tried finding regression coefficient using PCA and I use 150 points
> for PCA. I find a coefficient Beta.
>
> Now to see whether the spread is mean reverting or not I use ADF. If I use
> 150 point long spread, It comes out to be nonstationary. If I use 200
> points data the outcome is stationary
>
> I again used 200 points to do the PCA and find regression. The spread
> comes out to be non stationary. From all these observation *I think* that
> this is not a stable relationship.
>
> So following are my questions
>
>    - Is there a way to decide length of historical data to use?
>    - Some relationship may be more stable than others. Is there away to
>    quantify it?
>
> Any other insight in this regard will be appreciated(time frame, pairs vs
> basket). I have attached the plot and the script that was used to generate
> the plot.
>
>
> --
> Regards
> Amol
>
> If all the seas were ink,
> And all the reeds were pens,
> And all the skies were parchment,
> And all the men could write,
> These would not suffice
> To write down all the red tape
> Of this Government.
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
>


-- 
Regards
Amol

If all the seas were ink,
And all the reeds were pens,
And all the skies were parchment,
And all the men could write,
These would not suffice
To write down all the red tape
Of this Government.

	[[alternative HTML version deleted]]


From ezivot at u.washington.edu  Tue Jan 27 19:41:11 2015
From: ezivot at u.washington.edu (Eric Zivot)
Date: Tue, 27 Jan 2015 10:41:11 -0800
Subject: [R-SIG-Finance] Number of data points required for Cointigration
In-Reply-To: <CAO7kh0EP9Y=82_Ux1hehz7uDkPdd+gT==gw0Fy-o0LU1hUR5Fg@mail.gmail.com>
References: <CAO7kh0HN5VXXJDKRgs+8sfw_v2DmvziOQy1Lmqakt11wR3tk=A@mail.gmail.com>	<867478.539411.1422316799586.JavaMail.yahoo@mail.yahoo.com>
	<CAO7kh0EP9Y=82_Ux1hehz7uDkPdd+gT==gw0Fy-o0LU1hUR5Fg@mail.gmail.com>
Message-ID: <004301d03a60$d2b78ba0$7826a2e0$@washington.edu>

Some quick comments on this issue. From a statistical point of view, the
phrase "how many data points are required for cointegration" is not well
defined. Technically speaking, if two series are cointegrated then they are
cointegrated for any number of observations. This issue is really about the
size (probability of rejecting the null hypothesis when the null is true)
and power (probability of rejecting the null when the alternative is true)
of tests for cointegration for a given sample size. In intermediate
statistics text books, the chapters on hypothesis testing usually have some
discussion of the relationship between sample size and power. In simple toy
examples you can work out the number of observations required to have power
equal to some specified value (e.g. 0.90). In this case, if the alternative
is true then you can say you can reject the null at the 5% level with
probability 0.90 if the sample size is n=75 (say). Unfortunately, this
exercise is extremely difficult to do with tests for cointegration (usually,
the null is no cointegration so rejecting the null is evidence of
cointegration). Why? Well there are only general asymptotic results (as
sample size goes to infinity) for tests for no cointegration (e.g.
Engle-granger two step, Johansen rank tests). There are no general finite
sample results (for fixed sample sizes) for power functions. Hence, you
cannot analytically compute a sample size that will give you a certain
power. What to do? Well, you can try to set up some Monte Carlo experiments
with fixed sample sizes to approximate power functions. The problem with
this is that the results are not general. They will depend on the parameters
used for the Monte Carlo set up (e.g. parameters for serial correlation,
volatility etc). The best you can do is to try to carefully characterize the
distributions of the series in question and try out some Monte Carlo
experiments for these data. My guess is that you will have the best results
when you use the class of tests that have been found to be optimal
asymptotic tests (where the asymptotic power curve is tangent to the
infeasible power curve of the optimal test at a set power). These tests have
been developed by Graham Elliot at UCSD and Michael Jansen at UCB.


-----Original Message-----
From: R-SIG-Finance [mailto:r-sig-finance-bounces at r-project.org] On Behalf
Of amol gupta
Sent: Tuesday, January 27, 2015 10:09 AM
To: Paul Teetor
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Number of data points required for
Cointigration

Paul

You say that ADF is not really stable . I agree. Other options to explore
are

   - Use other unit root and stationarity  test.
   - Use other cointigration tests like johansen tests.
   - Finding PCA and choosing one of the lower variance portfolio and test
   for stationarity.(I need to understand PCA more.)

I will take some time and test these ideas. Have you tried anyone of these?
If yes, please share you experiences.

Thank you for your insights.

On Tue, Jan 27, 2015 at 5:29 AM, Paul Teetor <paulteetor at yahoo.com> wrote:

> Amol,
>
> I don't have a formula or a guideline for determining the number of 
> data points. But I can share two experiences.
>
> First, when I traded mean-reverting spreads, I used 3 to 5 years of 
> daily data. That's 750 to 1,250 data points. Less data did not work 
> well for my spreads.
>
> Second, in my experience, the ADF test was quite unstable. That is, it 
> might fail to reject for a while, then start rejecting the null 
> hypothesis when the market showed some trending back to the mean. Then 
> it would fail to reject again as the market wandered away.
>
> Perhaps smarter people than I have had better luck trading with the 
> ADF, but for me, it did not provide a complete answer to the question 
> of mean-reversion.
>
> Paul
>
> Paul Teetor, Elgin, IL USA
> http://quantdevel.com/public <http://quanttrader.info/public>
>
>   ------------------------------
>  *From:* amol gupta <amolgupta87 at gmail.com>
> *To:* "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
> *Sent:* Friday, January 23, 2015 3:24 AM
> *Subject:* [R-SIG-Finance] Number of data points required for 
> Cointigration
>
> Hi
>
> I need help in figuring out the length of historical data that I 
> should use. I took stock prices(daily close) for two tickers from 
> yahoo(200 days).I tried finding regression coefficient using PCA and I 
> use 150 points for PCA. I find a coefficient Beta.
>
> Now to see whether the spread is mean reverting or not I use ADF. If I 
> use
> 150 point long spread, It comes out to be nonstationary. If I use 200 
> points data the outcome is stationary
>
> I again used 200 points to do the PCA and find regression. The spread 
> comes out to be non stationary. From all these observation *I think* 
> that this is not a stable relationship.
>
> So following are my questions
>
>    - Is there a way to decide length of historical data to use?
>    - Some relationship may be more stable than others. Is there away to
>    quantify it?
>
> Any other insight in this regard will be appreciated(time frame, pairs 
> vs basket). I have attached the plot and the script that was used to 
> generate the plot.
>
>
> --
> Regards
> Amol
>
> If all the seas were ink,
> And all the reeds were pens,
> And all the skies were parchment,
> And all the men could write,
> These would not suffice
> To write down all the red tape
> Of this Government.
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R 
> questions should go.
>
>


--
Regards
Amol

If all the seas were ink,
And all the reeds were pens,
And all the skies were parchment,
And all the men could write,
These would not suffice
To write down all the red tape
Of this Government.

	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.


From markleeds2 at gmail.com  Tue Jan 27 19:53:57 2015
From: markleeds2 at gmail.com (Mark Leeds)
Date: Tue, 27 Jan 2015 13:53:57 -0500
Subject: [R-SIG-Finance] Number of data points required for Cointigration
In-Reply-To: <004301d03a60$d2b78ba0$7826a2e0$@washington.edu>
References: <CAO7kh0HN5VXXJDKRgs+8sfw_v2DmvziOQy1Lmqakt11wR3tk=A@mail.gmail.com>
	<867478.539411.1422316799586.JavaMail.yahoo@mail.yahoo.com>
	<CAO7kh0EP9Y=82_Ux1hehz7uDkPdd+gT==gw0Fy-o0LU1hUR5Fg@mail.gmail.com>
	<004301d03a60$d2b78ba0$7826a2e0$@washington.edu>
Message-ID: <CAHz+bWbOkSHS3NZ73OQ42J-bz0nbxUZQdrk7y8_KkA_9Mhttng@mail.gmail.com>

Hi Eric: Thanks for the educational and thorough explanation. But I think
it's
worse than that. Any econometrics test, whether asymptotic or finite,
depends on a certain underlying DGP that often just doesn't hold. So, even
in the asymptotic case, cointegration tests will break down due to mergers,
buybacks, bankruptcies etc. There is no concept of cointegration or any DGP
that can take these things into account.

I'm not trying to start a flame-war and I use econometrics in finance so I
don't think
its bogus.  I'm  rather just pointing out that, particularly with respect
to cointegration testing,  things can go haywire in a hurry because the
underlying DGP assumption is just not true. So, any type of test is, to
some extent, useless.



Mark










On Tue, Jan 27, 2015 at 1:41 PM, Eric Zivot <ezivot at u.washington.edu> wrote:

> Some quick comments on this issue. From a statistical point of view, the
> phrase "how many data points are required for cointegration" is not well
> defined. Technically speaking, if two series are cointegrated then they are
> cointegrated for any number of observations. This issue is really about the
> size (probability of rejecting the null hypothesis when the null is true)
> and power (probability of rejecting the null when the alternative is true)
> of tests for cointegration for a given sample size. In intermediate
> statistics text books, the chapters on hypothesis testing usually have some
> discussion of the relationship between sample size and power. In simple toy
> examples you can work out the number of observations required to have power
> equal to some specified value (e.g. 0.90). In this case, if the alternative
> is true then you can say you can reject the null at the 5% level with
> probability 0.90 if the sample size is n=75 (say). Unfortunately, this
> exercise is extremely difficult to do with tests for cointegration
> (usually,
> the null is no cointegration so rejecting the null is evidence of
> cointegration). Why? Well there are only general asymptotic results (as
> sample size goes to infinity) for tests for no cointegration (e.g.
> Engle-granger two step, Johansen rank tests). There are no general finite
> sample results (for fixed sample sizes) for power functions. Hence, you
> cannot analytically compute a sample size that will give you a certain
> power. What to do? Well, you can try to set up some Monte Carlo experiments
> with fixed sample sizes to approximate power functions. The problem with
> this is that the results are not general. They will depend on the
> parameters
> used for the Monte Carlo set up (e.g. parameters for serial correlation,
> volatility etc). The best you can do is to try to carefully characterize
> the
> distributions of the series in question and try out some Monte Carlo
> experiments for these data. My guess is that you will have the best results
> when you use the class of tests that have been found to be optimal
> asymptotic tests (where the asymptotic power curve is tangent to the
> infeasible power curve of the optimal test at a set power). These tests
> have
> been developed by Graham Elliot at UCSD and Michael Jansen at UCB.
>
>
> -----Original Message-----
> From: R-SIG-Finance [mailto:r-sig-finance-bounces at r-project.org] On Behalf
> Of amol gupta
> Sent: Tuesday, January 27, 2015 10:09 AM
> To: Paul Teetor
> Cc: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] Number of data points required for
> Cointigration
>
> Paul
>
> You say that ADF is not really stable . I agree. Other options to explore
> are
>
>    - Use other unit root and stationarity  test.
>    - Use other cointigration tests like johansen tests.
>    - Finding PCA and choosing one of the lower variance portfolio and test
>    for stationarity.(I need to understand PCA more.)
>
> I will take some time and test these ideas. Have you tried anyone of these?
> If yes, please share you experiences.
>
> Thank you for your insights.
>
> On Tue, Jan 27, 2015 at 5:29 AM, Paul Teetor <paulteetor at yahoo.com> wrote:
>
> > Amol,
> >
> > I don't have a formula or a guideline for determining the number of
> > data points. But I can share two experiences.
> >
> > First, when I traded mean-reverting spreads, I used 3 to 5 years of
> > daily data. That's 750 to 1,250 data points. Less data did not work
> > well for my spreads.
> >
> > Second, in my experience, the ADF test was quite unstable. That is, it
> > might fail to reject for a while, then start rejecting the null
> > hypothesis when the market showed some trending back to the mean. Then
> > it would fail to reject again as the market wandered away.
> >
> > Perhaps smarter people than I have had better luck trading with the
> > ADF, but for me, it did not provide a complete answer to the question
> > of mean-reversion.
> >
> > Paul
> >
> > Paul Teetor, Elgin, IL USA
> > http://quantdevel.com/public <http://quanttrader.info/public>
> >
> >   ------------------------------
> >  *From:* amol gupta <amolgupta87 at gmail.com>
> > *To:* "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
> > *Sent:* Friday, January 23, 2015 3:24 AM
> > *Subject:* [R-SIG-Finance] Number of data points required for
> > Cointigration
> >
> > Hi
> >
> > I need help in figuring out the length of historical data that I
> > should use. I took stock prices(daily close) for two tickers from
> > yahoo(200 days).I tried finding regression coefficient using PCA and I
> > use 150 points for PCA. I find a coefficient Beta.
> >
> > Now to see whether the spread is mean reverting or not I use ADF. If I
> > use
> > 150 point long spread, It comes out to be nonstationary. If I use 200
> > points data the outcome is stationary
> >
> > I again used 200 points to do the PCA and find regression. The spread
> > comes out to be non stationary. From all these observation *I think*
> > that this is not a stable relationship.
> >
> > So following are my questions
> >
> >    - Is there a way to decide length of historical data to use?
> >    - Some relationship may be more stable than others. Is there away to
> >    quantify it?
> >
> > Any other insight in this regard will be appreciated(time frame, pairs
> > vs basket). I have attached the plot and the script that was used to
> > generate the plot.
> >
> >
> > --
> > Regards
> > Amol
> >
> > If all the seas were ink,
> > And all the reeds were pens,
> > And all the skies were parchment,
> > And all the men could write,
> > These would not suffice
> > To write down all the red tape
> > Of this Government.
> >
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R
> > questions should go.
> >
> >
>
>
> --
> Regards
> Amol
>
> If all the seas were ink,
> And all the reeds were pens,
> And all the skies were parchment,
> And all the men could write,
> These would not suffice
> To write down all the red tape
> Of this Government.
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From ezivot at u.washington.edu  Tue Jan 27 19:58:29 2015
From: ezivot at u.washington.edu (Eric Zivot)
Date: Tue, 27 Jan 2015 10:58:29 -0800
Subject: [R-SIG-Finance] Number of data points required for Cointigration
In-Reply-To: <CAHz+bWbOkSHS3NZ73OQ42J-bz0nbxUZQdrk7y8_KkA_9Mhttng@mail.gmail.com>
References: <CAO7kh0HN5VXXJDKRgs+8sfw_v2DmvziOQy1Lmqakt11wR3tk=A@mail.gmail.com>	<867478.539411.1422316799586.JavaMail.yahoo@mail.yahoo.com>	<CAO7kh0EP9Y=82_Ux1hehz7uDkPdd+gT==gw0Fy-o0LU1hUR5Fg@mail.gmail.com>	<004301d03a60$d2b78ba0$7826a2e0$@washington.edu>
	<CAHz+bWbOkSHS3NZ73OQ42J-bz0nbxUZQdrk7y8_KkA_9Mhttng@mail.gmail.com>
Message-ID: <006901d03a63$3d96ca10$b8c45e30$@washington.edu>

Mark

I completely agree with you. My comments were oriented to the "best case
scenario" . There are obviously many real world considerations that make the
issue very difficult as you point out. And, of course, you has to consider
the dreaded "multiple testing issue" if you are searching for the "best"
cointegrated pair of assets. 

 

From: Mark Leeds [mailto:markleeds2 at gmail.com] 
Sent: Tuesday, January 27, 2015 10:54 AM
To: Eric Zivot
Cc: amol gupta; Paul Teetor; r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Number of data points required for
Cointigration

 

Hi Eric: Thanks for the educational and thorough explanation. But I think
it's
worse than that. Any econometrics test, whether asymptotic or finite,
depends on a certain underlying DGP that often just doesn't hold. So, even
in the asymptotic case, cointegration tests will break down due to mergers,
buybacks, bankruptcies etc. There is no concept of cointegration or any DGP
that can take these things into account.

I'm not trying to start a flame-war and I use econometrics in finance so I
don't think
its bogus.  I'm  rather just pointing out that, particularly with respect to
cointegration testing,  things can go haywire in a hurry because the
underlying DGP assumption is just not true. So, any type of test is, to some
extent, useless.



 
Mark










 

 

On Tue, Jan 27, 2015 at 1:41 PM, Eric Zivot <ezivot at u.washington.edu> wrote:

Some quick comments on this issue. From a statistical point of view, the
phrase "how many data points are required for cointegration" is not well
defined. Technically speaking, if two series are cointegrated then they are
cointegrated for any number of observations. This issue is really about the
size (probability of rejecting the null hypothesis when the null is true)
and power (probability of rejecting the null when the alternative is true)
of tests for cointegration for a given sample size. In intermediate
statistics text books, the chapters on hypothesis testing usually have some
discussion of the relationship between sample size and power. In simple toy
examples you can work out the number of observations required to have power
equal to some specified value (e.g. 0.90). In this case, if the alternative
is true then you can say you can reject the null at the 5% level with
probability 0.90 if the sample size is n=75 (say). Unfortunately, this
exercise is extremely difficult to do with tests for cointegration (usually,
the null is no cointegration so rejecting the null is evidence of
cointegration). Why? Well there are only general asymptotic results (as
sample size goes to infinity) for tests for no cointegration (e.g.
Engle-granger two step, Johansen rank tests). There are no general finite
sample results (for fixed sample sizes) for power functions. Hence, you
cannot analytically compute a sample size that will give you a certain
power. What to do? Well, you can try to set up some Monte Carlo experiments
with fixed sample sizes to approximate power functions. The problem with
this is that the results are not general. They will depend on the parameters
used for the Monte Carlo set up (e.g. parameters for serial correlation,
volatility etc). The best you can do is to try to carefully characterize the
distributions of the series in question and try out some Monte Carlo
experiments for these data. My guess is that you will have the best results
when you use the class of tests that have been found to be optimal
asymptotic tests (where the asymptotic power curve is tangent to the
infeasible power curve of the optimal test at a set power). These tests have
been developed by Graham Elliot at UCSD and Michael Jansen at UCB.


-----Original Message-----
From: R-SIG-Finance [mailto:r-sig-finance-bounces at r-project.org] On Behalf
Of amol gupta
Sent: Tuesday, January 27, 2015 10:09 AM
To: Paul Teetor
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Number of data points required for
Cointigration

Paul

You say that ADF is not really stable . I agree. Other options to explore
are

   - Use other unit root and stationarity  test.
   - Use other cointigration tests like johansen tests.
   - Finding PCA and choosing one of the lower variance portfolio and test
   for stationarity.(I need to understand PCA more.)

I will take some time and test these ideas. Have you tried anyone of these?
If yes, please share you experiences.

Thank you for your insights.

On Tue, Jan 27, 2015 at 5:29 AM, Paul Teetor <paulteetor at yahoo.com> wrote:

> Amol,
>
> I don't have a formula or a guideline for determining the number of
> data points. But I can share two experiences.
>
> First, when I traded mean-reverting spreads, I used 3 to 5 years of
> daily data. That's 750 to 1,250 data points. Less data did not work
> well for my spreads.
>
> Second, in my experience, the ADF test was quite unstable. That is, it
> might fail to reject for a while, then start rejecting the null
> hypothesis when the market showed some trending back to the mean. Then
> it would fail to reject again as the market wandered away.
>
> Perhaps smarter people than I have had better luck trading with the
> ADF, but for me, it did not provide a complete answer to the question
> of mean-reversion.
>
> Paul
>
> Paul Teetor, Elgin, IL USA
> http://quantdevel.com/public <http://quanttrader.info/public>
>
>   ------------------------------
>  *From:* amol gupta <amolgupta87 at gmail.com>
> *To:* "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
> *Sent:* Friday, January 23, 2015 3:24 AM
> *Subject:* [R-SIG-Finance] Number of data points required for
> Cointigration
>
> Hi
>
> I need help in figuring out the length of historical data that I
> should use. I took stock prices(daily close) for two tickers from
> yahoo(200 days).I tried finding regression coefficient using PCA and I
> use 150 points for PCA. I find a coefficient Beta.
>
> Now to see whether the spread is mean reverting or not I use ADF. If I
> use
> 150 point long spread, It comes out to be nonstationary. If I use 200
> points data the outcome is stationary
>
> I again used 200 points to do the PCA and find regression. The spread
> comes out to be non stationary. From all these observation *I think*
> that this is not a stable relationship.
>
> So following are my questions
>
>    - Is there a way to decide length of historical data to use?
>    - Some relationship may be more stable than others. Is there away to
>    quantify it?
>
> Any other insight in this regard will be appreciated(time frame, pairs
> vs basket). I have attached the plot and the script that was used to
> generate the plot.
>
>
> --
> Regards
> Amol
>
> If all the seas were ink,
> And all the reeds were pens,
> And all the skies were parchment,
> And all the men could write,
> These would not suffice
> To write down all the red tape
> Of this Government.
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R
> questions should go.
>
>


--
Regards
Amol

If all the seas were ink,
And all the reeds were pens,
And all the skies were parchment,
And all the men could write,
These would not suffice
To write down all the red tape
Of this Government.

        [[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.

 


	[[alternative HTML version deleted]]


From markleeds2 at gmail.com  Tue Jan 27 20:05:50 2015
From: markleeds2 at gmail.com (Mark Leeds)
Date: Tue, 27 Jan 2015 14:05:50 -0500
Subject: [R-SIG-Finance] Number of data points required for Cointigration
In-Reply-To: <006901d03a63$3d96ca10$b8c45e30$@washington.edu>
References: <CAO7kh0HN5VXXJDKRgs+8sfw_v2DmvziOQy1Lmqakt11wR3tk=A@mail.gmail.com>
	<867478.539411.1422316799586.JavaMail.yahoo@mail.yahoo.com>
	<CAO7kh0EP9Y=82_Ux1hehz7uDkPdd+gT==gw0Fy-o0LU1hUR5Fg@mail.gmail.com>
	<004301d03a60$d2b78ba0$7826a2e0$@washington.edu>
	<CAHz+bWbOkSHS3NZ73OQ42J-bz0nbxUZQdrk7y8_KkA_9Mhttng@mail.gmail.com>
	<006901d03a63$3d96ca10$b8c45e30$@washington.edu>
Message-ID: <CAHz+bWaG394MJ=7e5V+b5sv9Z937xK1VgmyqRxHXkrfw2RNU5w@mail.gmail.com>

Hi Eric: yes, multiple testing-data mining is another problem. The whole
pairs
thing is a messy undertaking that I never cracked. I want to go back to it
someday. Paul has a paper that discusses a different statistical
methodology that looks interesting but I think, however one approaches it
statistically,  it also needs "heursticy" techniques to add robustness.
All the best and thanks again for your
comments.


Mark







On Tue, Jan 27, 2015 at 1:58 PM, Eric Zivot <ezivot at u.washington.edu> wrote:

> Mark
>
> I completely agree with you. My comments were oriented to the "best case
> scenario" . There are obviously many real world considerations that make
> the issue very difficult as you point out. And, of course, you has to
> consider the dreaded "multiple testing issue" if you are searching for the
> "best" cointegrated pair of assets.
>
>
>
> *From:* Mark Leeds [mailto:markleeds2 at gmail.com]
> *Sent:* Tuesday, January 27, 2015 10:54 AM
> *To:* Eric Zivot
> *Cc:* amol gupta; Paul Teetor; r-sig-finance at r-project.org
>
> *Subject:* Re: [R-SIG-Finance] Number of data points required for
> Cointigration
>
>
>
> Hi Eric: Thanks for the educational and thorough explanation. But I think
> it's
> worse than that. Any econometrics test, whether asymptotic or finite,
> depends on a certain underlying DGP that often just doesn't hold. So, even
> in the asymptotic case, cointegration tests will break down due to mergers,
> buybacks, bankruptcies etc. There is no concept of cointegration or any DGP
> that can take these things into account.
>
> I'm not trying to start a flame-war and I use econometrics in finance so I
> don't think
> its bogus.  I'm  rather just pointing out that, particularly with respect
> to cointegration testing,  things can go haywire in a hurry because the
> underlying DGP assumption is just not true. So, any type of test is, to
> some extent, useless.
>
>
> Mark
>
>
>
>
>
>
>
>
>
>
>
>
> On Tue, Jan 27, 2015 at 1:41 PM, Eric Zivot <ezivot at u.washington.edu>
> wrote:
>
> Some quick comments on this issue. From a statistical point of view, the
> phrase "how many data points are required for cointegration" is not well
> defined. Technically speaking, if two series are cointegrated then they are
> cointegrated for any number of observations. This issue is really about the
> size (probability of rejecting the null hypothesis when the null is true)
> and power (probability of rejecting the null when the alternative is true)
> of tests for cointegration for a given sample size. In intermediate
> statistics text books, the chapters on hypothesis testing usually have some
> discussion of the relationship between sample size and power. In simple toy
> examples you can work out the number of observations required to have power
> equal to some specified value (e.g. 0.90). In this case, if the alternative
> is true then you can say you can reject the null at the 5% level with
> probability 0.90 if the sample size is n=75 (say). Unfortunately, this
> exercise is extremely difficult to do with tests for cointegration
> (usually,
> the null is no cointegration so rejecting the null is evidence of
> cointegration). Why? Well there are only general asymptotic results (as
> sample size goes to infinity) for tests for no cointegration (e.g.
> Engle-granger two step, Johansen rank tests). There are no general finite
> sample results (for fixed sample sizes) for power functions. Hence, you
> cannot analytically compute a sample size that will give you a certain
> power. What to do? Well, you can try to set up some Monte Carlo experiments
> with fixed sample sizes to approximate power functions. The problem with
> this is that the results are not general. They will depend on the
> parameters
> used for the Monte Carlo set up (e.g. parameters for serial correlation,
> volatility etc). The best you can do is to try to carefully characterize
> the
> distributions of the series in question and try out some Monte Carlo
> experiments for these data. My guess is that you will have the best results
> when you use the class of tests that have been found to be optimal
> asymptotic tests (where the asymptotic power curve is tangent to the
> infeasible power curve of the optimal test at a set power). These tests
> have
> been developed by Graham Elliot at UCSD and Michael Jansen at UCB.
>
>
> -----Original Message-----
> From: R-SIG-Finance [mailto:r-sig-finance-bounces at r-project.org] On Behalf
> Of amol gupta
> Sent: Tuesday, January 27, 2015 10:09 AM
> To: Paul Teetor
> Cc: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] Number of data points required for
> Cointigration
>
> Paul
>
> You say that ADF is not really stable . I agree. Other options to explore
> are
>
>    - Use other unit root and stationarity  test.
>    - Use other cointigration tests like johansen tests.
>    - Finding PCA and choosing one of the lower variance portfolio and test
>    for stationarity.(I need to understand PCA more.)
>
> I will take some time and test these ideas. Have you tried anyone of these?
> If yes, please share you experiences.
>
> Thank you for your insights.
>
> On Tue, Jan 27, 2015 at 5:29 AM, Paul Teetor <paulteetor at yahoo.com> wrote:
>
> > Amol,
> >
> > I don't have a formula or a guideline for determining the number of
> > data points. But I can share two experiences.
> >
> > First, when I traded mean-reverting spreads, I used 3 to 5 years of
> > daily data. That's 750 to 1,250 data points. Less data did not work
> > well for my spreads.
> >
> > Second, in my experience, the ADF test was quite unstable. That is, it
> > might fail to reject for a while, then start rejecting the null
> > hypothesis when the market showed some trending back to the mean. Then
> > it would fail to reject again as the market wandered away.
> >
> > Perhaps smarter people than I have had better luck trading with the
> > ADF, but for me, it did not provide a complete answer to the question
> > of mean-reversion.
> >
> > Paul
> >
> > Paul Teetor, Elgin, IL USA
> > http://quantdevel.com/public <http://quanttrader.info/public>
> >
> >   ------------------------------
> >  *From:* amol gupta <amolgupta87 at gmail.com>
> > *To:* "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
> > *Sent:* Friday, January 23, 2015 3:24 AM
> > *Subject:* [R-SIG-Finance] Number of data points required for
> > Cointigration
> >
> > Hi
> >
> > I need help in figuring out the length of historical data that I
> > should use. I took stock prices(daily close) for two tickers from
> > yahoo(200 days).I tried finding regression coefficient using PCA and I
> > use 150 points for PCA. I find a coefficient Beta.
> >
> > Now to see whether the spread is mean reverting or not I use ADF. If I
> > use
> > 150 point long spread, It comes out to be nonstationary. If I use 200
> > points data the outcome is stationary
> >
> > I again used 200 points to do the PCA and find regression. The spread
> > comes out to be non stationary. From all these observation *I think*
> > that this is not a stable relationship.
> >
> > So following are my questions
> >
> >    - Is there a way to decide length of historical data to use?
> >    - Some relationship may be more stable than others. Is there away to
> >    quantify it?
> >
> > Any other insight in this regard will be appreciated(time frame, pairs
> > vs basket). I have attached the plot and the script that was used to
> > generate the plot.
> >
> >
> > --
> > Regards
> > Amol
> >
> > If all the seas were ink,
> > And all the reeds were pens,
> > And all the skies were parchment,
> > And all the men could write,
> > These would not suffice
> > To write down all the red tape
> > Of this Government.
> >
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R
> > questions should go.
> >
> >
>
>
> --
> Regards
> Amol
>
> If all the seas were ink,
> And all the reeds were pens,
> And all the skies were parchment,
> And all the men could write,
> These would not suffice
> To write down all the red tape
> Of this Government.
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
>
>

	[[alternative HTML version deleted]]


From paulteetor at yahoo.com  Wed Jan 28 13:41:56 2015
From: paulteetor at yahoo.com (Paul Teetor)
Date: Wed, 28 Jan 2015 12:41:56 +0000 (UTC)
Subject: [R-SIG-Finance] Number of data points required for Cointigration
In-Reply-To: <CAHz+bWaG394MJ=7e5V+b5sv9Z937xK1VgmyqRxHXkrfw2RNU5w@mail.gmail.com>
References: <CAHz+bWaG394MJ=7e5V+b5sv9Z937xK1VgmyqRxHXkrfw2RNU5w@mail.gmail.com>
Message-ID: <945165574.1076098.1422448916827.JavaMail.yahoo@mail.yahoo.com>

Many thanks to John, Eric, and Mark for their comments. This is a very useful discussion.
Amol, you asked about other methods for testing for mean reversion. At the risk of starting a flame war, I no longer believe in trading "mean reverting" spreads. My thoughts are based on John Bollinger's comments at the R/Finance conference.
In order to be profitably traded, the spread must alternate between moving towards the mean and moving away from the mean. Think about it. If it was always reverting to the mean, you'd have no trading opportunities. The opportunity arises when the market has wandered away from its usual, expected value. We profit by riding it back.
We want oscillating markets; that is, markets that alternate between "mean aversion" and mean reversion. Unfortunately, the ADF test is only for detecting mean reversion. It gets confused by markets that periodically "mean avert". Therefore, the test is not useful for trading purposes.
If someone knows a good statistical test to identify oscillating markets, I'd love to hear about it.
Paul?Paul Teetor, Elgin, IL USAhttp://quantdevel.com/public
      From: Mark Leeds <markleeds2 at gmail.com>
 To: Eric Zivot <ezivot at u.washington.edu> 
Cc: amol gupta <amolgupta87 at gmail.com>; Paul Teetor <paulteetor at yahoo.com>; "r-sig-finance at r-project.org" <r-sig-finance at r-project.org> 
 Sent: Tuesday, January 27, 2015 1:05 PM
 Subject: Re: [R-SIG-Finance] Number of data points required for Cointigration
   
Hi Eric: yes, multiple testing-data mining is another problem. The whole pairs
thing is a messy undertaking that I never cracked. I want to go back to it someday. Paul has a paper that discusses a different statistical methodology that looks interesting but I think, however one approaches it statistically,? it also needs "heursticy" techniques to add robustness.? All the best and thanks again for your
comments.

???????????????????????????????????????????????????????????????????????? Mark




???????????????????????????????????????????????????????? 




On Tue, Jan 27, 2015 at 1:58 PM, Eric Zivot <ezivot at u.washington.edu> wrote:

MarkI completely agree with you. My comments were oriented to the ?best case scenario? . There are obviously many real world considerations that make the issue very difficult as you point out. And, of course, you has to consider the dreaded ?multiple testing issue? if you are searching for the ?best? cointegrated pair of assets. ?From: Mark Leeds [mailto:markleeds2 at gmail.com] 
Sent: Tuesday, January 27, 2015 10:54 AM
To: Eric Zivot
Cc: amol gupta; Paul Teetor; r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Number of data points required for Cointigration?Hi Eric: Thanks for the educational and thorough explanation. But I think it's
worse than that. Any econometrics test, whether asymptotic or finite, depends on a certain underlying DGP that often just doesn't hold. So, even in the asymptotic case, cointegration tests will break down due to mergers, buybacks, bankruptcies etc. There is no concept of cointegration or any DGP that can take these things into account.I'm not trying to start a flame-war and I use econometrics in finance so I don't think
its bogus.? I'm? rather just pointing out that, particularly with respect to cointegration testing,? things can go haywire in a hurry because the underlying DGP assumption is just not true. So, any type of test is, to some extent, useless.

???????????????????????????????????????????????????????????????????????????????????? Mark






??On Tue, Jan 27, 2015 at 1:41 PM, Eric Zivot <ezivot at u.washington.edu> wrote:Some quick comments on this issue. From a statistical point of view, the
phrase "how many data points are required for cointegration" is not well
defined. Technically speaking, if two series are cointegrated then they are
cointegrated for any number of observations. This issue is really about the
size (probability of rejecting the null hypothesis when the null is true)
and power (probability of rejecting the null when the alternative is true)
of tests for cointegration for a given sample size. In intermediate
statistics text books, the chapters on hypothesis testing usually have some
discussion of the relationship between sample size and power. In simple toy
examples you can work out the number of observations required to have power
equal to some specified value (e.g. 0.90). In this case, if the alternative
is true then you can say you can reject the null at the 5% level with
probability 0.90 if the sample size is n=75 (say). Unfortunately, this
exercise is extremely difficult to do with tests for cointegration (usually,
the null is no cointegration so rejecting the null is evidence of
cointegration). Why? Well there are only general asymptotic results (as
sample size goes to infinity) for tests for no cointegration (e.g.
Engle-granger two step, Johansen rank tests). There are no general finite
sample results (for fixed sample sizes) for power functions. Hence, you
cannot analytically compute a sample size that will give you a certain
power. What to do? Well, you can try to set up some Monte Carlo experiments
with fixed sample sizes to approximate power functions. The problem with
this is that the results are not general. They will depend on the parameters
used for the Monte Carlo set up (e.g. parameters for serial correlation,
volatility etc). The best you can do is to try to carefully characterize the
distributions of the series in question and try out some Monte Carlo
experiments for these data. My guess is that you will have the best results
when you use the class of tests that have been found to be optimal
asymptotic tests (where the asymptotic power curve is tangent to the
infeasible power curve of the optimal test at a set power). These tests have
been developed by Graham Elliot at UCSD and Michael Jansen at UCB.


-----Original Message-----
From: R-SIG-Finance [mailto:r-sig-finance-bounces at r-project.org] On Behalf
Of amol gupta
Sent: Tuesday, January 27, 2015 10:09 AM
To: Paul Teetor
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Number of data points required for
Cointigration

Paul

You say that ADF is not really stable . I agree. Other options to explore
are

? ?- Use other unit root and stationarity? test.
? ?- Use other cointigration tests like johansen tests.
? ?- Finding PCA and choosing one of the lower variance portfolio and test
? ?for stationarity.(I need to understand PCA more.)

I will take some time and test these ideas. Have you tried anyone of these?
If yes, please share you experiences.

Thank you for your insights.

On Tue, Jan 27, 2015 at 5:29 AM, Paul Teetor <paulteetor at yahoo.com> wrote:

> Amol,
>
> I don't have a formula or a guideline for determining the number of
> data points. But I can share two experiences.
>
> First, when I traded mean-reverting spreads, I used 3 to 5 years of
> daily data. That's 750 to 1,250 data points. Less data did not work
> well for my spreads.
>
> Second, in my experience, the ADF test was quite unstable. That is, it
> might fail to reject for a while, then start rejecting the null
> hypothesis when the market showed some trending back to the mean. Then
> it would fail to reject again as the market wandered away.
>
> Perhaps smarter people than I have had better luck trading with the
> ADF, but for me, it did not provide a complete answer to the question
> of mean-reversion.
>
> Paul
>
> Paul Teetor, Elgin, IL USA
> http://quantdevel.com/public <http://quanttrader.info/public>
>
>? ?------------------------------
>? *From:* amol gupta <amolgupta87 at gmail.com>
> *To:* "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
> *Sent:* Friday, January 23, 2015 3:24 AM
> *Subject:* [R-SIG-Finance] Number of data points required for
> Cointigration
>
> Hi
>
> I need help in figuring out the length of historical data that I
> should use. I took stock prices(daily close) for two tickers from
> yahoo(200 days).I tried finding regression coefficient using PCA and I
> use 150 points for PCA. I find a coefficient Beta.
>
> Now to see whether the spread is mean reverting or not I use ADF. If I
> use
> 150 point long spread, It comes out to be nonstationary. If I use 200
> points data the outcome is stationary
>
> I again used 200 points to do the PCA and find regression. The spread
> comes out to be non stationary. From all these observation *I think*
> that this is not a stable relationship.
>
> So following are my questions
>
>? ? - Is there a way to decide length of historical data to use?
>? ? - Some relationship may be more stable than others. Is there away to
>? ? quantify it?
>
> Any other insight in this regard will be appreciated(time frame, pairs
> vs basket). I have attached the plot and the script that was used to
> generate the plot.
>
>
> --
> Regards
> Amol
>
> If all the seas were ink,
> And all the reeds were pens,
> And all the skies were parchment,
> And all the men could write,
> These would not suffice
> To write down all the red tape
> Of this Government.
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R
> questions should go.
>
>


--
Regards
Amol

If all the seas were ink,
And all the reeds were pens,
And all the skies were parchment,
And all the men could write,
These would not suffice
To write down all the red tape
Of this Government.

? ? ? ? [[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.?



  
	[[alternative HTML version deleted]]


From reech2.anil at yahoo.com  Wed Jan 28 14:20:50 2015
From: reech2.anil at yahoo.com (Anil Bishnoie)
Date: Wed, 28 Jan 2015 13:20:50 +0000 (UTC)
Subject: [R-SIG-Finance] Number of data points required for Cointigration
In-Reply-To: <945165574.1076098.1422448916827.JavaMail.yahoo@mail.yahoo.com>
References: <945165574.1076098.1422448916827.JavaMail.yahoo@mail.yahoo.com>
Message-ID: <323969285.1776854.1422451250438.JavaMail.yahoo@mail.yahoo.com>

Hi ,????????? If profit trading is goal,I guess Hidden Markov(HMM) with Baum Welch algos is more accurate /profitable alternative to jockey oscillating markets and am sure somebody must have tried with one of major market indexes.
Thanks to all for excellent inputs,
Anil Bishnoie

 

     On Wednesday, January 28, 2015 6:11 PM, Paul Teetor via R-SIG-Finance <r-sig-finance at r-project.org> wrote:
   

 Many thanks to John, Eric, and Mark for their comments. This is a very useful discussion.
Amol, you asked about other methods for testing for mean reversion. At the risk of starting a flame war, I no longer believe in trading "mean reverting" spreads. My thoughts are based on John Bollinger's comments at the R/Finance conference.
In order to be profitably traded, the spread must alternate between moving towards the mean and moving away from the mean. Think about it. If it was always reverting to the mean, you'd have no trading opportunities. The opportunity arises when the market has wandered away from its usual, expected value. We profit by riding it back.
We want oscillating markets; that is, markets that alternate between "mean aversion" and mean reversion. Unfortunately, the ADF test is only for detecting mean reversion. It gets confused by markets that periodically "mean avert". Therefore, the test is not useful for trading purposes.
If someone knows a good statistical test to identify oscillating markets, I'd love to hear about it.
Paul?Paul Teetor, Elgin, IL USAhttp://quantdevel.com/public
? ? ? From: Mark Leeds <markleeds2 at gmail.com>
 To: Eric Zivot <ezivot at u.washington.edu> 
Cc: amol gupta <amolgupta87 at gmail.com>; Paul Teetor <paulteetor at yahoo.com>; "r-sig-finance at r-project.org" <r-sig-finance at r-project.org> 
 Sent: Tuesday, January 27, 2015 1:05 PM
 Subject: Re: [R-SIG-Finance] Number of data points required for Cointigration
? 
Hi Eric: yes, multiple testing-data mining is another problem. The whole pairs
thing is a messy undertaking that I never cracked. I want to go back to it someday. Paul has a paper that discusses a different statistical methodology that looks interesting but I think, however one approaches it statistically,? it also needs "heursticy" techniques to add robustness.? All the best and thanks again for your
comments.

???????????????????????????????????????????????????????????????????????? Mark




???????????????????????????????????????????????????????? 




On Tue, Jan 27, 2015 at 1:58 PM, Eric Zivot <ezivot at u.washington.edu> wrote:

MarkI completely agree with you. My comments were oriented to the ?best case scenario? . There are obviously many real world considerations that make the issue very difficult as you point out. And, of course, you has to consider the dreaded ?multiple testing issue? if you are searching for the ?best? cointegrated pair of assets. ?From: Mark Leeds [mailto:markleeds2 at gmail.com] 
Sent: Tuesday, January 27, 2015 10:54 AM
To: Eric Zivot
Cc: amol gupta; Paul Teetor; r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Number of data points required for Cointigration?Hi Eric: Thanks for the educational and thorough explanation. But I think it's
worse than that. Any econometrics test, whether asymptotic or finite, depends on a certain underlying DGP that often just doesn't hold. So, even in the asymptotic case, cointegration tests will break down due to mergers, buybacks, bankruptcies etc. There is no concept of cointegration or any DGP that can take these things into account.I'm not trying to start a flame-war and I use econometrics in finance so I don't think
its bogus.? I'm? rather just pointing out that, particularly with respect to cointegration testing,? things can go haywire in a hurry because the underlying DGP assumption is just not true. So, any type of test is, to some extent, useless.

???????????????????????????????????????????????????????????????????????????????????? Mark






??On Tue, Jan 27, 2015 at 1:41 PM, Eric Zivot <ezivot at u.washington.edu> wrote:Some quick comments on this issue. From a statistical point of view, the
phrase "how many data points are required for cointegration" is not well
defined. Technically speaking, if two series are cointegrated then they are
cointegrated for any number of observations. This issue is really about the
size (probability of rejecting the null hypothesis when the null is true)
and power (probability of rejecting the null when the alternative is true)
of tests for cointegration for a given sample size. In intermediate
statistics text books, the chapters on hypothesis testing usually have some
discussion of the relationship between sample size and power. In simple toy
examples you can work out the number of observations required to have power
equal to some specified value (e.g. 0.90). In this case, if the alternative
is true then you can say you can reject the null at the 5% level with
probability 0.90 if the sample size is n=75 (say). Unfortunately, this
exercise is extremely difficult to do with tests for cointegration (usually,
the null is no cointegration so rejecting the null is evidence of
cointegration). Why? Well there are only general asymptotic results (as
sample size goes to infinity) for tests for no cointegration (e.g.
Engle-granger two step, Johansen rank tests). There are no general finite
sample results (for fixed sample sizes) for power functions. Hence, you
cannot analytically compute a sample size that will give you a certain
power. What to do? Well, you can try to set up some Monte Carlo experiments
with fixed sample sizes to approximate power functions. The problem with
this is that the results are not general. They will depend on the parameters
used for the Monte Carlo set up (e.g. parameters for serial correlation,
volatility etc). The best you can do is to try to carefully characterize the
distributions of the series in question and try out some Monte Carlo
experiments for these data. My guess is that you will have the best results
when you use the class of tests that have been found to be optimal
asymptotic tests (where the asymptotic power curve is tangent to the
infeasible power curve of the optimal test at a set power). These tests have
been developed by Graham Elliot at UCSD and Michael Jansen at UCB.


-----Original Message-----
From: R-SIG-Finance [mailto:r-sig-finance-bounces at r-project.org] On Behalf
Of amol gupta
Sent: Tuesday, January 27, 2015 10:09 AM
To: Paul Teetor
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Number of data points required for
Cointigration

Paul

You say that ADF is not really stable . I agree. Other options to explore
are

? ?- Use other unit root and stationarity? test.
? ?- Use other cointigration tests like johansen tests.
? ?- Finding PCA and choosing one of the lower variance portfolio and test
? ?for stationarity.(I need to understand PCA more.)

I will take some time and test these ideas. Have you tried anyone of these?
If yes, please share you experiences.

Thank you for your insights.

On Tue, Jan 27, 2015 at 5:29 AM, Paul Teetor <paulteetor at yahoo.com> wrote:

> Amol,
>
> I don't have a formula or a guideline for determining the number of
> data points. But I can share two experiences.
>
> First, when I traded mean-reverting spreads, I used 3 to 5 years of
> daily data. That's 750 to 1,250 data points. Less data did not work
> well for my spreads.
>
> Second, in my experience, the ADF test was quite unstable. That is, it
> might fail to reject for a while, then start rejecting the null
> hypothesis when the market showed some trending back to the mean. Then
> it would fail to reject again as the market wandered away.
>
> Perhaps smarter people than I have had better luck trading with the
> ADF, but for me, it did not provide a complete answer to the question
> of mean-reversion.
>
> Paul
>
> Paul Teetor, Elgin, IL USA
> http://quantdevel.com/public <http://quanttrader.info/public>
>
>? ?------------------------------
>? *From:* amol gupta <amolgupta87 at gmail.com>
> *To:* "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
> *Sent:* Friday, January 23, 2015 3:24 AM
> *Subject:* [R-SIG-Finance] Number of data points required for
> Cointigration
>
> Hi
>
> I need help in figuring out the length of historical data that I
> should use. I took stock prices(daily close) for two tickers from
> yahoo(200 days).I tried finding regression coefficient using PCA and I
> use 150 points for PCA. I find a coefficient Beta.
>
> Now to see whether the spread is mean reverting or not I use ADF. If I
> use
> 150 point long spread, It comes out to be nonstationary. If I use 200
> points data the outcome is stationary
>
> I again used 200 points to do the PCA and find regression. The spread
> comes out to be non stationary. From all these observation *I think*
> that this is not a stable relationship.
>
> So following are my questions
>
>? ? - Is there a way to decide length of historical data to use?
>? ? - Some relationship may be more stable than others. Is there away to
>? ? quantify it?
>
> Any other insight in this regard will be appreciated(time frame, pairs
> vs basket). I have attached the plot and the script that was used to
> generate the plot.
>
>
> --
> Regards
> Amol
>
> If all the seas were ink,
> And all the reeds were pens,
> And all the skies were parchment,
> And all the men could write,
> These would not suffice
> To write down all the red tape
> Of this Government.
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R
> questions should go.
>
>


--
Regards
Amol

If all the seas were ink,
And all the reeds were pens,
And all the skies were parchment,
And all the men could write,
These would not suffice
To write down all the red tape
Of this Government.

? ? ? ? [[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.?



? 
??? [[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

   
	[[alternative HTML version deleted]]


From amolgupta87 at gmail.com  Wed Jan 28 17:21:43 2015
From: amolgupta87 at gmail.com (amol gupta)
Date: Wed, 28 Jan 2015 21:51:43 +0530
Subject: [R-SIG-Finance] Number of data points required for Cointigration
In-Reply-To: <323969285.1776854.1422451250438.JavaMail.yahoo@mail.yahoo.com>
References: <945165574.1076098.1422448916827.JavaMail.yahoo@mail.yahoo.com>
	<323969285.1776854.1422451250438.JavaMail.yahoo@mail.yahoo.com>
Message-ID: <CAO7kh0H5DOBd6rPuNWhVzAwJUch-z6wvfJmTRq3rb86D9Q7pqg@mail.gmail.com>

Paul, Mark, Eric, Anil, John

Thank you all for your valuable inputs. This has been an enriching
discussion.

On Wed, Jan 28, 2015 at 6:50 PM, Anil Bishnoie via R-SIG-Finance <
r-sig-finance at r-project.org> wrote:

> Hi ,          If profit trading is goal,I guess Hidden Markov(HMM) with
> Baum Welch algos is more accurate /profitable alternative to jockey
> oscillating markets and am sure somebody must have tried with one of major
> market indexes.
> Thanks to all for excellent inputs,
> Anil Bishnoie
>
>
>
>      On Wednesday, January 28, 2015 6:11 PM, Paul Teetor via R-SIG-Finance
> <r-sig-finance at r-project.org> wrote:
>
>
>  Many thanks to John, Eric, and Mark for their comments. This is a very
> useful discussion.
> Amol, you asked about other methods for testing for mean reversion. At the
> risk of starting a flame war, I no longer believe in trading "mean
> reverting" spreads. My thoughts are based on John Bollinger's comments at
> the R/Finance conference.
> In order to be profitably traded, the spread must alternate between moving
> towards the mean and moving away from the mean. Think about it. If it was
> always reverting to the mean, you'd have no trading opportunities. The
> opportunity arises when the market has wandered away from its usual,
> expected value. We profit by riding it back.
> We want oscillating markets; that is, markets that alternate between "mean
> aversion" and mean reversion. Unfortunately, the ADF test is only for
> detecting mean reversion. It gets confused by markets that periodically
> "mean avert". Therefore, the test is not useful for trading purposes.
> If someone knows a good statistical test to identify oscillating markets,
> I'd love to hear about it.
> Paul Paul Teetor, Elgin, IL USAhttp://quantdevel.com/public
>       From: Mark Leeds <markleeds2 at gmail.com>
>  To: Eric Zivot <ezivot at u.washington.edu>
> Cc: amol gupta <amolgupta87 at gmail.com>; Paul Teetor <paulteetor at yahoo.com>;
> "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
>  Sent: Tuesday, January 27, 2015 1:05 PM
>  Subject: Re: [R-SIG-Finance] Number of data points required for
> Cointigration
>
> Hi Eric: yes, multiple testing-data mining is another problem. The whole
> pairs
> thing is a messy undertaking that I never cracked. I want to go back to it
> someday. Paul has a paper that discusses a different statistical
> methodology that looks interesting but I think, however one approaches it
> statistically,  it also needs "heursticy" techniques to add robustness.
> All the best and thanks again for your
> comments.
>
>
> Mark
>
>
>
>
>
>
>
>
>
> On Tue, Jan 27, 2015 at 1:58 PM, Eric Zivot <ezivot at u.washington.edu>
> wrote:
>
> MarkI completely agree with you. My comments were oriented to the ?best
> case scenario? . There are obviously many real world considerations that
> make the issue very difficult as you point out. And, of course, you has to
> consider the dreaded ?multiple testing issue? if you are searching for the
> ?best? cointegrated pair of assets.  From: Mark Leeds [mailto:
> markleeds2 at gmail.com]
> Sent: Tuesday, January 27, 2015 10:54 AM
> To: Eric Zivot
> Cc: amol gupta; Paul Teetor; r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] Number of data points required for
> Cointigration Hi Eric: Thanks for the educational and thorough explanation.
> But I think it's
> worse than that. Any econometrics test, whether asymptotic or finite,
> depends on a certain underlying DGP that often just doesn't hold. So, even
> in the asymptotic case, cointegration tests will break down due to mergers,
> buybacks, bankruptcies etc. There is no concept of cointegration or any DGP
> that can take these things into account.I'm not trying to start a flame-war
> and I use econometrics in finance so I don't think
> its bogus.  I'm  rather just pointing out that, particularly with respect
> to cointegration testing,  things can go haywire in a hurry because the
> underlying DGP assumption is just not true. So, any type of test is, to
> some extent, useless.
>
>
> Mark
>
>
>
>
>
>
>   On Tue, Jan 27, 2015 at 1:41 PM, Eric Zivot <ezivot at u.washington.edu>
> wrote:Some quick comments on this issue. From a statistical point of view,
> the
> phrase "how many data points are required for cointegration" is not well
> defined. Technically speaking, if two series are cointegrated then they are
> cointegrated for any number of observations. This issue is really about the
> size (probability of rejecting the null hypothesis when the null is true)
> and power (probability of rejecting the null when the alternative is true)
> of tests for cointegration for a given sample size. In intermediate
> statistics text books, the chapters on hypothesis testing usually have some
> discussion of the relationship between sample size and power. In simple toy
> examples you can work out the number of observations required to have power
> equal to some specified value (e.g. 0.90). In this case, if the alternative
> is true then you can say you can reject the null at the 5% level with
> probability 0.90 if the sample size is n=75 (say). Unfortunately, this
> exercise is extremely difficult to do with tests for cointegration
> (usually,
> the null is no cointegration so rejecting the null is evidence of
> cointegration). Why? Well there are only general asymptotic results (as
> sample size goes to infinity) for tests for no cointegration (e.g.
> Engle-granger two step, Johansen rank tests). There are no general finite
> sample results (for fixed sample sizes) for power functions. Hence, you
> cannot analytically compute a sample size that will give you a certain
> power. What to do? Well, you can try to set up some Monte Carlo experiments
> with fixed sample sizes to approximate power functions. The problem with
> this is that the results are not general. They will depend on the
> parameters
> used for the Monte Carlo set up (e.g. parameters for serial correlation,
> volatility etc). The best you can do is to try to carefully characterize
> the
> distributions of the series in question and try out some Monte Carlo
> experiments for these data. My guess is that you will have the best results
> when you use the class of tests that have been found to be optimal
> asymptotic tests (where the asymptotic power curve is tangent to the
> infeasible power curve of the optimal test at a set power). These tests
> have
> been developed by Graham Elliot at UCSD and Michael Jansen at UCB.
>
>
> -----Original Message-----
> From: R-SIG-Finance [mailto:r-sig-finance-bounces at r-project.org] On Behalf
> Of amol gupta
> Sent: Tuesday, January 27, 2015 10:09 AM
> To: Paul Teetor
> Cc: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] Number of data points required for
> Cointigration
>
> Paul
>
> You say that ADF is not really stable . I agree. Other options to explore
> are
>
>    - Use other unit root and stationarity  test.
>    - Use other cointigration tests like johansen tests.
>    - Finding PCA and choosing one of the lower variance portfolio and test
>    for stationarity.(I need to understand PCA more.)
>
> I will take some time and test these ideas. Have you tried anyone of these?
> If yes, please share you experiences.
>
> Thank you for your insights.
>
> On Tue, Jan 27, 2015 at 5:29 AM, Paul Teetor <paulteetor at yahoo.com> wrote:
>
> > Amol,
> >
> > I don't have a formula or a guideline for determining the number of
> > data points. But I can share two experiences.
> >
> > First, when I traded mean-reverting spreads, I used 3 to 5 years of
> > daily data. That's 750 to 1,250 data points. Less data did not work
> > well for my spreads.
> >
> > Second, in my experience, the ADF test was quite unstable. That is, it
> > might fail to reject for a while, then start rejecting the null
> > hypothesis when the market showed some trending back to the mean. Then
> > it would fail to reject again as the market wandered away.
> >
> > Perhaps smarter people than I have had better luck trading with the
> > ADF, but for me, it did not provide a complete answer to the question
> > of mean-reversion.
> >
> > Paul
> >
> > Paul Teetor, Elgin, IL USA
> > http://quantdevel.com/public <http://quanttrader.info/public>
> >
> >   ------------------------------
> >  *From:* amol gupta <amolgupta87 at gmail.com>
> > *To:* "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
> > *Sent:* Friday, January 23, 2015 3:24 AM
> > *Subject:* [R-SIG-Finance] Number of data points required for
> > Cointigration
> >
> > Hi
> >
> > I need help in figuring out the length of historical data that I
> > should use. I took stock prices(daily close) for two tickers from
> > yahoo(200 days).I tried finding regression coefficient using PCA and I
> > use 150 points for PCA. I find a coefficient Beta.
> >
> > Now to see whether the spread is mean reverting or not I use ADF. If I
> > use
> > 150 point long spread, It comes out to be nonstationary. If I use 200
> > points data the outcome is stationary
> >
> > I again used 200 points to do the PCA and find regression. The spread
> > comes out to be non stationary. From all these observation *I think*
> > that this is not a stable relationship.
> >
> > So following are my questions
> >
> >    - Is there a way to decide length of historical data to use?
> >    - Some relationship may be more stable than others. Is there away to
> >    quantify it?
> >
> > Any other insight in this regard will be appreciated(time frame, pairs
> > vs basket). I have attached the plot and the script that was used to
> > generate the plot.
> >
> >
> > --
> > Regards
> > Amol
> >
> > If all the seas were ink,
> > And all the reeds were pens,
> > And all the skies were parchment,
> > And all the men could write,
> > These would not suffice
> > To write down all the red tape
> > Of this Government.
> >
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R
> > questions should go.
> >
> >
>
>
> --
> Regards
> Amol
>
> If all the seas were ink,
> And all the reeds were pens,
> And all the skies were parchment,
> And all the men could write,
> These would not suffice
> To write down all the red tape
> Of this Government.
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
>
>
>
>     [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>



-- 
Regards
Amol

If all the seas were ink,
And all the reeds were pens,
And all the skies were parchment,
And all the men could write,
These would not suffice
To write down all the red tape
Of this Government.

	[[alternative HTML version deleted]]


From anshul.bits at gmail.com  Thu Jan 29 22:46:26 2015
From: anshul.bits at gmail.com (Anshul Pandey)
Date: Fri, 30 Jan 2015 03:16:26 +0530
Subject: [R-SIG-Finance] Resource for company relationship
Message-ID: <CAFUr=9UmMMgJqUDQmiZigvHhrCdNfWk=SU92H-_JdNWxupvxAg@mail.gmail.com>

Hello folks,

Is there an open source resource (or an R package) to get company
relationships, such as competition, supplier etc?
Hoover seems to provide this information.

What is the best approach to create a custom mapping?

Thanks
Anshul

	[[alternative HTML version deleted]]


From brian at braverock.com  Thu Jan 29 22:49:38 2015
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 29 Jan 2015 15:49:38 -0600
Subject: [R-SIG-Finance] Resource for company relationship
In-Reply-To: <CAFUr=9UmMMgJqUDQmiZigvHhrCdNfWk=SU92H-_JdNWxupvxAg@mail.gmail.com>
References: <CAFUr=9UmMMgJqUDQmiZigvHhrCdNfWk=SU92H-_JdNWxupvxAg@mail.gmail.com>
Message-ID: <54CAAAF2.4060303@braverock.com>

I can't speak to an open source for the *data*, but the 
FinancialInstrument package (on R-Forge) is extensible as to what 
attributes you choose to store, and can create hierarchies of any 
attributes that you apply to instruments.

Otherwise, probably build a database for your reference data.

Regards,

Brian

On 01/29/2015 03:46 PM, Anshul Pandey wrote:
> Hello folks,
>
> Is there an open source resource (or an R package) to get company
> relationships, such as competition, supplier etc?
> Hoover seems to provide this information.
>
> What is the best approach to create a custom mapping?
>
> Thanks
> Anshul


From ilya.kipnis at gmail.com  Thu Jan 29 22:49:55 2015
From: ilya.kipnis at gmail.com (Ilya Kipnis)
Date: Thu, 29 Jan 2015 16:49:55 -0500
Subject: [R-SIG-Finance] Resource for company relationship
In-Reply-To: <CAFUr=9UmMMgJqUDQmiZigvHhrCdNfWk=SU92H-_JdNWxupvxAg@mail.gmail.com>
References: <CAFUr=9UmMMgJqUDQmiZigvHhrCdNfWk=SU92H-_JdNWxupvxAg@mail.gmail.com>
Message-ID: <CA+oJuEHbA-PEO+yuL+JVyu4n8zE0Ar0+5kKCUTgJSFF=pVcMMw@mail.gmail.com>

I'm not sure if this is the correct mailing list for this information (I
suppose it has a tangential use if one is willing to look for fundamental
information as well, or do company vs. company comparisons), but it seems a
different mailing list might be better suited. As far as I understand, your
best bet would be to find a website with this information and write a web
scraper.

On Thu, Jan 29, 2015 at 4:46 PM, Anshul Pandey <anshul.bits at gmail.com>
wrote:

> Hello folks,
>
> Is there an open source resource (or an R package) to get company
> relationships, such as competition, supplier etc?
> Hoover seems to provide this information.
>
> What is the best approach to create a custom mapping?
>
> Thanks
> Anshul
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From anshul.bits at gmail.com  Thu Jan 29 22:53:58 2015
From: anshul.bits at gmail.com (Anshul Pandey)
Date: Fri, 30 Jan 2015 03:23:58 +0530
Subject: [R-SIG-Finance] Resource for company relationship
In-Reply-To: <CA+oJuEHbA-PEO+yuL+JVyu4n8zE0Ar0+5kKCUTgJSFF=pVcMMw@mail.gmail.com>
References: <CAFUr=9UmMMgJqUDQmiZigvHhrCdNfWk=SU92H-_JdNWxupvxAg@mail.gmail.com>
	<CA+oJuEHbA-PEO+yuL+JVyu4n8zE0Ar0+5kKCUTgJSFF=pVcMMw@mail.gmail.com>
Message-ID: <CAFUr=9WjjuHNzrW24Lg2UUh-JV1F4L49tUTH6oQrff_wxq7LJA@mail.gmail.com>

Yes Ilya, I just realized that this is probably not the best place for this
question.
Sorry about that. I have already scraped wikipedia and historical news
articles, but I ended up mismatching quite a few entities.

@Brian: I will look into that for sure.

Thanks both of you.



On Fri, Jan 30, 2015 at 3:19 AM, Ilya Kipnis <ilya.kipnis at gmail.com> wrote:

> I'm not sure if this is the correct mailing list for this information (I
> suppose it has a tangential use if one is willing to look for fundamental
> information as well, or do company vs. company comparisons), but it seems a
> different mailing list might be better suited. As far as I understand, your
> best bet would be to find a website with this information and write a web
> scraper.
>
> On Thu, Jan 29, 2015 at 4:46 PM, Anshul Pandey <anshul.bits at gmail.com>
> wrote:
>
>> Hello folks,
>>
>> Is there an open source resource (or an R package) to get company
>> relationships, such as competition, supplier etc?
>> Hoover seems to provide this information.
>>
>> What is the best approach to create a custom mapping?
>>
>> Thanks
>> Anshul
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
>

	[[alternative HTML version deleted]]


From harryp at gmail.com  Thu Jan 29 23:21:09 2015
From: harryp at gmail.com (Harry Prabandham)
Date: Thu, 29 Jan 2015 14:21:09 -0800
Subject: [R-SIG-Finance] Resource for company relationship
In-Reply-To: <CAFUr=9WjjuHNzrW24Lg2UUh-JV1F4L49tUTH6oQrff_wxq7LJA@mail.gmail.com>
References: <CAFUr=9UmMMgJqUDQmiZigvHhrCdNfWk=SU92H-_JdNWxupvxAg@mail.gmail.com>
	<CA+oJuEHbA-PEO+yuL+JVyu4n8zE0Ar0+5kKCUTgJSFF=pVcMMw@mail.gmail.com>
	<CAFUr=9WjjuHNzrW24Lg2UUh-JV1F4L49tUTH6oQrff_wxq7LJA@mail.gmail.com>
Message-ID: <CANmS35GNioeaHrf=sQFywm6X15Py4q1vfmE=3Dg++vFfttPqYw@mail.gmail.com>

There used to be a company called Revere Data that had this information.
They were recently acquired by factset.

-H

On Thu, Jan 29, 2015 at 1:53 PM, Anshul Pandey <anshul.bits at gmail.com>
wrote:

> Yes Ilya, I just realized that this is probably not the best place for this
> question.
> Sorry about that. I have already scraped wikipedia and historical news
> articles, but I ended up mismatching quite a few entities.
>
> @Brian: I will look into that for sure.
>
> Thanks both of you.
>
>
>
> On Fri, Jan 30, 2015 at 3:19 AM, Ilya Kipnis <ilya.kipnis at gmail.com>
> wrote:
>
> > I'm not sure if this is the correct mailing list for this information (I
> > suppose it has a tangential use if one is willing to look for fundamental
> > information as well, or do company vs. company comparisons), but it
> seems a
> > different mailing list might be better suited. As far as I understand,
> your
> > best bet would be to find a website with this information and write a web
> > scraper.
> >
> > On Thu, Jan 29, 2015 at 4:46 PM, Anshul Pandey <anshul.bits at gmail.com>
> > wrote:
> >
> >> Hello folks,
> >>
> >> Is there an open source resource (or an R package) to get company
> >> relationships, such as competition, supplier etc?
> >> Hoover seems to provide this information.
> >>
> >> What is the best approach to create a custom mapping?
> >>
> >> Thanks
> >> Anshul
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> _______________________________________________
> >> R-SIG-Finance at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >> -- Subscriber-posting only. If you want to post, subscribe first.
> >> -- Also note that this is not the r-help list where general R questions
> >> should go.
> >>
> >
> >
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From samitpaulin at gmail.com  Fri Jan 30 05:30:52 2015
From: samitpaulin at gmail.com (Samit Paul)
Date: Fri, 30 Jan 2015 10:00:52 +0530
Subject: [R-SIG-Finance] S4 Class Error in fitCopula
Message-ID: <CALROeVE2jvp3=G1ksKSMOicBBBDZL_dQS8-sxok-rV==djQWxQ@mail.gmail.com>

Hello folks,

I have used *ellipticalCopulaFit* function from "fCopulae package" for
copula fit and find it convenient as I can get the output as
'as.data.frame'. This is not possible for *fitCopula *function of "Copula"
package as I get an error stating *'no method for coercing this S4 class to
a vector'. *However, I am not sure whether "inference functions for margins
(IFM)" method can be implemented in *ellipticalCopulaFit* function as it
can be done in *fitCopula *function.

Can you please help me with the information and also on how to get the
output from *fitCopula *function as as.data.frame?

	[[alternative HTML version deleted]]


From samitpaulin at gmail.com  Fri Jan 30 05:36:26 2015
From: samitpaulin at gmail.com (Samit Paul)
Date: Fri, 30 Jan 2015 10:06:26 +0530
Subject: [R-SIG-Finance] S4 Class Error in fitCopula
In-Reply-To: <CALROeVE2jvp3=G1ksKSMOicBBBDZL_dQS8-sxok-rV==djQWxQ@mail.gmail.com>
References: <CALROeVE2jvp3=G1ksKSMOicBBBDZL_dQS8-sxok-rV==djQWxQ@mail.gmail.com>
Message-ID: <CALROeVEd3UEScUkWP-_10omhitQY1pm1N=anu-NLUiiLm6qouA@mail.gmail.com>

Hello folks,

I have used *ellipticalCopulaFit* function from "fCopulae package" for
copula fit and find it convenient as I can get the output as
'as.data.frame'. This is not possible for *fitCopula *function of "Copula"
package as I get an error stating *'no method for coercing this S4 class to
a vector'. *However, I am not sure whether "inference functions for margins
(IFM)" method can be implemented in *ellipticalCopulaFit* function as it
can be done in *fitCopula *function.

Can you please help me with the information and also on how to get the
output from *fitCopula *function as as.data.frame?

Regards,

Samit

On Fri, Jan 30, 2015 at 10:00 AM, Samit Paul <samitpaulin at gmail.com> wrote:

> Hello folks,
>
> I have used *ellipticalCopulaFit* function from "fCopulae package" for
> copula fit and find it convenient as I can get the output as
> 'as.data.frame'. This is not possible for *fitCopula *function of
> "Copula" package as I get an error stating *'no method for coercing this
> S4 class to a vector'. *However, I am not sure whether "inference
> functions for margins (IFM)" method can be implemented in
> *ellipticalCopulaFit* function as it can be done in *fitCopula *function.
>
> Can you please help me with the information and also on how to get the
> output from *fitCopula *function as as.data.frame?
>

	[[alternative HTML version deleted]]


From josh.m.ulrich at gmail.com  Sat Jan 31 18:48:54 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sat, 31 Jan 2015 11:48:54 -0600
Subject: [R-SIG-Finance] Help with quantstrat
In-Reply-To: <54BF7DA2.2080602@avignon.inra.fr>
References: <54BF7DA2.2080602@avignon.inra.fr>
Message-ID: <CAPPM_gQwtqH3GJWBRBgF1Xy=Kwcoq3QxSrL87EUfuN6jSN3Uog@mail.gmail.com>

On Wed, Jan 21, 2015 at 4:21 AM, Olivier MARTIN
<Olivier.Martin at avignon.inra.fr> wrote:
> Hi all,
>
> I am beginner with quantstrat. I would like to try a simple strategy but I
> have some
> difficulties to program it. The strategy is based on two signals : the CCI
> and the RSI.
> First, I compute RSI and CCI for period n=21. Let's denote them rsi21 and
> cci21.
> Secondly, I compute two moving average for rsi21 and cci21 with two
> periodes : 8 and 14. I obtain four signals. Let's denote i3 and i4 for
> rsi21, and i5 and i6 for cci21.
> Finally, I  enter for a long position if (i3>i4)&(i5>i6)
> I enter for a short position if (i3<i4)&(i5<i6)
> I exit for a long or a short position when it is flat.
>
> ###
> rsi21=RSI(Cl(mktdata),n=21)
> cci21=RSI(Cl(mktdata),n=21)
> i3 is equal to  SMA(rsi21,8)
> i4 is equal to  SMA(rsi21,14)
> i5 is equal to  SMA(cci21,8)
> i6 is equal to  SMA(cci21,14)
>
> up=(i3>i4)&(i5>i6)
> dn=(i3<i4)&(i5<i6)
> flat=!up & !dn
> ###
>
>
> So I try to program these strategy but I don't know how to take
> into account the different boolean conditions with the add.rule() function
>
> #indicators
> add.indicator(strategy =mystrategy, name = "SMA",arguments = list(x =
> quote(RSI(Cl(mktdata),n=8)), n=20), label="i3")
> add.indicator(strategy =mystrategy, name = "SMA",arguments = list(x =
> quote(RSI(Cl(mktdata),n=14)), n=20), label="i4")
> add.indicator(strategy =mystrategy, name = "SMA",arguments = list(x =
> quote(CCI(Cl(mktdata),n=8)), n=20), label="i5")
> add.indicator(strategy =mystrategy, name = "SMA",arguments = list(x =
> quote(CCI(Cl(mktdata),n=14)), n=20), label="i6")
>
> #signals
> add.signal(mystrategy,name="sigCrossover",arguments =
> list(columns=c("i3","i4"),relationship="gt"),  label="i3.gt.i4")
> add.signal(mystrategy,name="sigCrossover",  arguments =
> list(columns=c("i5","i6"),relationship="gt"),  label="i5.gt.i6")
> add.signal(mystrategy,name="sigCrossover",  arguments =
> list(columns=c("i3","i4"),relationship="lt"),  label="i3.lt.i4")
> add.signal(mystrategy,name="sigCrossover",  arguments =
> list(columns=c("i5","i6"),relationship="lt"),  label="i5.lt.i6")
>
You should be able to use sigFormula to define a signal based on the
combination of other signals.  For example:

add.signal(mystrategy, "sigFormula",
  arguments=list(formula="i3.gt.i4 & i5.gt.i6"),
  label="up")

> #rules
>  ???????
>
Then define your rules based on the column "up".

>
>
>
> Could someone help me ?
> Best regards,
> Olivier.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From josh.m.ulrich at gmail.com  Sun Feb  1 14:48:43 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sun, 1 Feb 2015 07:48:43 -0600
Subject: [R-SIG-Finance] Signal and Rule question in Quantstrat
In-Reply-To: <CAO77-6s8qvf5OMYkfATnQ_iLnC+YFTEL=52Nx-Y3HmZJyfHAmw@mail.gmail.com>
References: <CAO77-6s8qvf5OMYkfATnQ_iLnC+YFTEL=52Nx-Y3HmZJyfHAmw@mail.gmail.com>
Message-ID: <CAPPM_gQqEzTYasC8gDYzU2exnMSTd1m0GFcbCJvuoB-0+8koQw@mail.gmail.com>

On Fri, Jan 23, 2015 at 8:49 AM, Isak Engdahl <isak.engdahl at gmail.com> wrote:
> Dear members,
>
> I have a questions how to set up the signals and rules correct for this
> stategy in Quantstrat.
>
> Price must be above SMA=250 and below the 20 line in the Slow Stochastic
> indicator.
>
> The trigger for a buy signal is when the signal line of the stochastic
> indicator close above the 20 line.
>
> Enter trade
> PRICE > SMA=250
> Slow Stochastic < 20 and crossing above the 20 line
>
> Exit trade
> PRICE < SMA=250
> Slow Stoch > 80 and closes below the 80 line
>
> The rules and examples can be found here:
> http://stockcharts.com/public/1107832
>
> Here is the code I have come up with now. Please help!
>
Help with what?  You haven't stated any problem.

> //Isak
>
> #parameters
> nFastK <- 5
> nSlowD <- 1
> nSMA <- 250
> buyThresh <- 20
> sellThresh <- 80
>
> ######################################################################################
> #indicator
> add.indicator(strategy.st, name="stoch",
>               arguments=list(HLC=quote(HLC(mktdata)), nFastK=nFastK,
> nSlowD=nSlowD),
>               label="stoch")
>
> add.indicator(strategy.st, name="SMA",
>               arguments=list(x=quote(Cl(mktdata)), n=nSMA),
>               label="sma")
> ###############################################################################
> #signals
> add.signal(strategy.st, name="sigComparison",
>            arguments=list(columns=c("Close", "sma"), relationship="gt"),
>            label="filter")
>
> add.signal(strategy.st, name="sigThreshold",
>            arguments=list(column="stoch", threshold=buyThresh,
>                           relationship="lt", cross=FALSE),
>            label="stochLtThresh")
>
> add.signal(strategy.st, name="sigAND",
>            arguments=list(columns=c("filter", "stochLtThresh"), cross=TRUE),
>            label="longEntry")
> add.signal(strategy.st, name="sigThreshold",
>            arguments=list(column="stoch", threshold=sellThresh,
>                           relationship="gt", cross=TRUE),
>            label="longExit")
> ###############################################################################
> #rules
>
> #Long entry rule
> add.rule(strategy.st, name="ruleSignal",
>          arguments=list(sigcol="longEntry",
>                         sigval=TRUE,
>                         replace=FALSE,
>                         orderside="long",
>                         ordertype="market",
>                         orderqty=100,
>                         osFUN="osFixedDollar",
>                         orderset="ocolong"),
>          type="enter",label="LE")
>
> #Long exit rule
> add.rule(strategy.st, name="ruleSignal",
>          arguments=list(sigcol="longExit",
>                         sigval=TRUE,
>                         replace=FALSE,
>                         orderside="long",
>                         ordertype="market",
>                         orderqty="all",
>                         orderset="ocolong"),
>          type="exit",label="LX")
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From markknecht at gmail.com  Sun Feb  1 15:20:13 2015
From: markknecht at gmail.com (Mark Knecht)
Date: Sun, 1 Feb 2015 06:20:13 -0800
Subject: [R-SIG-Finance] Signal and Rule question in Quantstrat
In-Reply-To: <CAPPM_gQqEzTYasC8gDYzU2exnMSTd1m0GFcbCJvuoB-0+8koQw@mail.gmail.com>
References: <CAO77-6s8qvf5OMYkfATnQ_iLnC+YFTEL=52Nx-Y3HmZJyfHAmw@mail.gmail.com>
	<CAPPM_gQqEzTYasC8gDYzU2exnMSTd1m0GFcbCJvuoB-0+8koQw@mail.gmail.com>
Message-ID: <CAK2H+ed_zHOQJ3=6W_2TfD1=sXZn4z5PPLjPz16w6+hquzDAxw@mail.gmail.com>

On Sun, Feb 1, 2015 at 5:48 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> On Fri, Jan 23, 2015 at 8:49 AM, Isak Engdahl <isak.engdahl at gmail.com> wrote:
>> Dear members,
>>
>> I have a questions how to set up the signals and rules correct for this
>> stategy in Quantstrat.
>>
>> Price must be above SMA=250 and below the 20 line in the Slow Stochastic
>> indicator.
>>
>> The trigger for a buy signal is when the signal line of the stochastic
>> indicator close above the 20 line.
>>
>> Enter trade
>> PRICE > SMA=250
>> Slow Stochastic < 20 and crossing above the 20 line
>>
>> Exit trade
>> PRICE < SMA=250
>> Slow Stoch > 80 and closes below the 80 line
>>
>> The rules and examples can be found here:
>> http://stockcharts.com/public/1107832
>>
>> Here is the code I have come up with now. Please help!
>>
> Help with what?  You haven't stated any problem.
>

Joshua,
   I think Isak provided code and asked if it works, or what he has to
do to make it work. It didn't seem a wholly unreasonable question. (to
me...)
Mark


>> //Isak
>>
>> #parameters
>> nFastK <- 5
>> nSlowD <- 1
>> nSMA <- 250
>> buyThresh <- 20
>> sellThresh <- 80
>>
>> ######################################################################################
>> #indicator
>> add.indicator(strategy.st, name="stoch",
>>               arguments=list(HLC=quote(HLC(mktdata)), nFastK=nFastK,
>> nSlowD=nSlowD),
>>               label="stoch")
>>
>> add.indicator(strategy.st, name="SMA",
>>               arguments=list(x=quote(Cl(mktdata)), n=nSMA),
>>               label="sma")
>> ###############################################################################
>> #signals
>> add.signal(strategy.st, name="sigComparison",
>>            arguments=list(columns=c("Close", "sma"), relationship="gt"),
>>            label="filter")
>>
>> add.signal(strategy.st, name="sigThreshold",
>>            arguments=list(column="stoch", threshold=buyThresh,
>>                           relationship="lt", cross=FALSE),
>>            label="stochLtThresh")
>>
>> add.signal(strategy.st, name="sigAND",
>>            arguments=list(columns=c("filter", "stochLtThresh"), cross=TRUE),
>>            label="longEntry")
>> add.signal(strategy.st, name="sigThreshold",
>>            arguments=list(column="stoch", threshold=sellThresh,
>>                           relationship="gt", cross=TRUE),
>>            label="longExit")
>> ###############################################################################
>> #rules
>>
>> #Long entry rule
>> add.rule(strategy.st, name="ruleSignal",
>>          arguments=list(sigcol="longEntry",
>>                         sigval=TRUE,
>>                         replace=FALSE,
>>                         orderside="long",
>>                         ordertype="market",
>>                         orderqty=100,
>>                         osFUN="osFixedDollar",
>>                         orderset="ocolong"),
>>          type="enter",label="LE")
>>
>> #Long exit rule
>> add.rule(strategy.st, name="ruleSignal",
>>          arguments=list(sigcol="longExit",
>>                         sigval=TRUE,
>>                         replace=FALSE,
>>                         orderside="long",
>>                         ordertype="market",
>>                         orderqty="all",
>>                         orderset="ocolong"),
>>          type="exit",label="LX")
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>
>
>
> --
> Joshua Ulrich  |  about.me/joshuaulrich
> FOSS Trading  |  www.fosstrading.com
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From josh.m.ulrich at gmail.com  Sun Feb  1 15:31:55 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sun, 1 Feb 2015 08:31:55 -0600
Subject: [R-SIG-Finance] Signal and Rule question in Quantstrat
In-Reply-To: <CAK2H+ed_zHOQJ3=6W_2TfD1=sXZn4z5PPLjPz16w6+hquzDAxw@mail.gmail.com>
References: <CAO77-6s8qvf5OMYkfATnQ_iLnC+YFTEL=52Nx-Y3HmZJyfHAmw@mail.gmail.com>
	<CAPPM_gQqEzTYasC8gDYzU2exnMSTd1m0GFcbCJvuoB-0+8koQw@mail.gmail.com>
	<CAK2H+ed_zHOQJ3=6W_2TfD1=sXZn4z5PPLjPz16w6+hquzDAxw@mail.gmail.com>
Message-ID: <CAPPM_gRLJTcOMJUGUY9Bb9Ez0Yh_KPpjJRLAZc8m4eeK1yuy_w@mail.gmail.com>

On Sun, Feb 1, 2015 at 8:20 AM, Mark Knecht <markknecht at gmail.com> wrote:
> On Sun, Feb 1, 2015 at 5:48 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
>> On Fri, Jan 23, 2015 at 8:49 AM, Isak Engdahl <isak.engdahl at gmail.com> wrote:
>>> Dear members,
>>>
>>> I have a questions how to set up the signals and rules correct for this
>>> stategy in Quantstrat.
>>>
>>> Price must be above SMA=250 and below the 20 line in the Slow Stochastic
>>> indicator.
>>>
>>> The trigger for a buy signal is when the signal line of the stochastic
>>> indicator close above the 20 line.
>>>
>>> Enter trade
>>> PRICE > SMA=250
>>> Slow Stochastic < 20 and crossing above the 20 line
>>>
>>> Exit trade
>>> PRICE < SMA=250
>>> Slow Stoch > 80 and closes below the 80 line
>>>
>>> The rules and examples can be found here:
>>> http://stockcharts.com/public/1107832
>>>
>>> Here is the code I have come up with now. Please help!
>>>
>> Help with what?  You haven't stated any problem.
>>
>
> Joshua,
>    I think Isak provided code and asked if it works, or what he has to
> do to make it work. It didn't seem a wholly unreasonable question. (to
> me...)
> Mark
>
I don't know how to answer "does this code work?"  It doesn't do much.
It just defines a strategy, some indicators, signals, and rules.  I'm
not suggesting it's a wholly unreasonable question; but I doubt it's
going to result in anyone providing help to Isak.

I suspect most people are not going to take the time to run this
strategy, then ensure he set it up correctly, and make any necessary
fixes.  In short, Isak needs to put in more effort and come back when
he has a more specific question.

>
>>> //Isak
>>>
>>> #parameters
>>> nFastK <- 5
>>> nSlowD <- 1
>>> nSMA <- 250
>>> buyThresh <- 20
>>> sellThresh <- 80
>>>
>>> ######################################################################################
>>> #indicator
>>> add.indicator(strategy.st, name="stoch",
>>>               arguments=list(HLC=quote(HLC(mktdata)), nFastK=nFastK,
>>> nSlowD=nSlowD),
>>>               label="stoch")
>>>
>>> add.indicator(strategy.st, name="SMA",
>>>               arguments=list(x=quote(Cl(mktdata)), n=nSMA),
>>>               label="sma")
>>> ###############################################################################
>>> #signals
>>> add.signal(strategy.st, name="sigComparison",
>>>            arguments=list(columns=c("Close", "sma"), relationship="gt"),
>>>            label="filter")
>>>
>>> add.signal(strategy.st, name="sigThreshold",
>>>            arguments=list(column="stoch", threshold=buyThresh,
>>>                           relationship="lt", cross=FALSE),
>>>            label="stochLtThresh")
>>>
>>> add.signal(strategy.st, name="sigAND",
>>>            arguments=list(columns=c("filter", "stochLtThresh"), cross=TRUE),
>>>            label="longEntry")
>>> add.signal(strategy.st, name="sigThreshold",
>>>            arguments=list(column="stoch", threshold=sellThresh,
>>>                           relationship="gt", cross=TRUE),
>>>            label="longExit")
>>> ###############################################################################
>>> #rules
>>>
>>> #Long entry rule
>>> add.rule(strategy.st, name="ruleSignal",
>>>          arguments=list(sigcol="longEntry",
>>>                         sigval=TRUE,
>>>                         replace=FALSE,
>>>                         orderside="long",
>>>                         ordertype="market",
>>>                         orderqty=100,
>>>                         osFUN="osFixedDollar",
>>>                         orderset="ocolong"),
>>>          type="enter",label="LE")
>>>
>>> #Long exit rule
>>> add.rule(strategy.st, name="ruleSignal",
>>>          arguments=list(sigcol="longExit",
>>>                         sigval=TRUE,
>>>                         replace=FALSE,
>>>                         orderside="long",
>>>                         ordertype="market",
>>>                         orderqty="all",
>>>                         orderset="ocolong"),
>>>          type="exit",label="LX")
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>
>>
>>
>> --
>> Joshua Ulrich  |  about.me/joshuaulrich
>> FOSS Trading  |  www.fosstrading.com
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From markknecht at gmail.com  Sun Feb  1 16:12:12 2015
From: markknecht at gmail.com (Mark Knecht)
Date: Sun, 1 Feb 2015 07:12:12 -0800
Subject: [R-SIG-Finance] Signal and Rule question in Quantstrat
In-Reply-To: <CAPPM_gRLJTcOMJUGUY9Bb9Ez0Yh_KPpjJRLAZc8m4eeK1yuy_w@mail.gmail.com>
References: <CAO77-6s8qvf5OMYkfATnQ_iLnC+YFTEL=52Nx-Y3HmZJyfHAmw@mail.gmail.com>
	<CAPPM_gQqEzTYasC8gDYzU2exnMSTd1m0GFcbCJvuoB-0+8koQw@mail.gmail.com>
	<CAK2H+ed_zHOQJ3=6W_2TfD1=sXZn4z5PPLjPz16w6+hquzDAxw@mail.gmail.com>
	<CAPPM_gRLJTcOMJUGUY9Bb9Ez0Yh_KPpjJRLAZc8m4eeK1yuy_w@mail.gmail.com>
Message-ID: <CAK2H+edx=V2dpj0bY3YJTCJe81ZA+yC8wmxofjS2=doVRm3VSw@mail.gmail.com>

On Sun, Feb 1, 2015 at 6:31 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> On Sun, Feb 1, 2015 at 8:20 AM, Mark Knecht <markknecht at gmail.com> wrote:
>> On Sun, Feb 1, 2015 at 5:48 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
>>> On Fri, Jan 23, 2015 at 8:49 AM, Isak Engdahl <isak.engdahl at gmail.com> wrote:
>>>> Dear members,
>>>>
>>>> I have a questions how to set up the signals and rules correct for this
>>>> stategy in Quantstrat.
>>>>
>>>> Price must be above SMA=250 and below the 20 line in the Slow Stochastic
>>>> indicator.
>>>>
>>>> The trigger for a buy signal is when the signal line of the stochastic
>>>> indicator close above the 20 line.
>>>>
>>>> Enter trade
>>>> PRICE > SMA=250
>>>> Slow Stochastic < 20 and crossing above the 20 line
>>>>
>>>> Exit trade
>>>> PRICE < SMA=250
>>>> Slow Stoch > 80 and closes below the 80 line
>>>>
>>>> The rules and examples can be found here:
>>>> http://stockcharts.com/public/1107832
>>>>
>>>> Here is the code I have come up with now. Please help!
>>>>
>>> Help with what?  You haven't stated any problem.
>>>
>>
>> Joshua,
>>    I think Isak provided code and asked if it works, or what he has to
>> do to make it work. It didn't seem a wholly unreasonable question. (to
>> me...)
>> Mark
>>
> I don't know how to answer "does this code work?"  It doesn't do much.
> It just defines a strategy, some indicators, signals, and rules.  I'm
> not suggesting it's a wholly unreasonable question; but I doubt it's
> going to result in anyone providing help to Isak.
>
> I suspect most people are not going to take the time to run this
> strategy, then ensure he set it up correctly, and make any necessary
> fixes.  In short, Isak needs to put in more effort and come back when
> he has a more specific question.
>

OK, I see your point.

I'll likely go away and be quiet now but without running Isak's code
myself I will say I've been quiet on this list for months now as I
pretty much quit trying to understand how to do what I think is at the
root of Isak's question. (As I read it he's saying 'How to I combine
multiple indicators into a singlerule?') It's not hard in quantstrat
to write indicators, and it's not difficult to create a strategy based
on a single indicator - there are lots of provided examples. However,
as I remember it from months and months ago (I could be wrong, it
might have change, I don't know as I haven't looked) it seemed quite
difficult to turn groups of indicators into executable rules, such as
his entry rule:

PRICE > SMA=250
Slow Stochastic < 20 and crossing above the 20 line

so maybe you can point him to something that addresses just that issue.

For awhile I started creating custom indicator functions outside of
quantstrat such that my 'custom indicator' was pretty much the whole
rule so I didn't have to deal with figuring this out. To me it felt
like it was mostly a documentation/example file question but I got
tired of being a squeeky wheel and stopped working with quantstrat all
together. (I do this trading stuff for fun. To me it wasn't fun. I
bought a MatLab license and I have fun but I keep coming back to R
saying 'Can it be more fun now?')

Anyway, I totally get your point. His code won't run because (I think)
he cannot yet figure out how write a rule using multiple indicators
and in the general case completely inside of quantstrat neither could
I.

FOR CLARITY: I'm not complaining. OpenSource is what it is, it
wouldn't be there without folks like you and the other developers, and
then we user types all make different choices. That's really cool. I'm
only writing this for my own reasons to say why I haven't posted in
months. That said I may be back as my TradeStation/MatLab environment
is working pretty well and I'd like to look at using the R server to
augment things a bit more.

Cheers,
Mark


From ilya.kipnis at gmail.com  Sun Feb  1 16:25:00 2015
From: ilya.kipnis at gmail.com (Ilya Kipnis)
Date: Sun, 1 Feb 2015 10:25:00 -0500
Subject: [R-SIG-Finance] Signal and Rule question in Quantstrat
In-Reply-To: <CAK2H+edx=V2dpj0bY3YJTCJe81ZA+yC8wmxofjS2=doVRm3VSw@mail.gmail.com>
References: <CAO77-6s8qvf5OMYkfATnQ_iLnC+YFTEL=52Nx-Y3HmZJyfHAmw@mail.gmail.com>
	<CAPPM_gQqEzTYasC8gDYzU2exnMSTd1m0GFcbCJvuoB-0+8koQw@mail.gmail.com>
	<CAK2H+ed_zHOQJ3=6W_2TfD1=sXZn4z5PPLjPz16w6+hquzDAxw@mail.gmail.com>
	<CAPPM_gRLJTcOMJUGUY9Bb9Ez0Yh_KPpjJRLAZc8m4eeK1yuy_w@mail.gmail.com>
	<CAK2H+edx=V2dpj0bY3YJTCJe81ZA+yC8wmxofjS2=doVRm3VSw@mail.gmail.com>
Message-ID: <CA+oJuEFk1KZkvorDKvXWaJ8F65FwnwnaJ+9kw5eGW-v=hHYqig@mail.gmail.com>

Have you all forgotten about my sigAND function?

On Sun, Feb 1, 2015 at 10:12 AM, Mark Knecht <markknecht at gmail.com> wrote:

> On Sun, Feb 1, 2015 at 6:31 AM, Joshua Ulrich <josh.m.ulrich at gmail.com>
> wrote:
> > On Sun, Feb 1, 2015 at 8:20 AM, Mark Knecht <markknecht at gmail.com>
> wrote:
> >> On Sun, Feb 1, 2015 at 5:48 AM, Joshua Ulrich <josh.m.ulrich at gmail.com>
> wrote:
> >>> On Fri, Jan 23, 2015 at 8:49 AM, Isak Engdahl <isak.engdahl at gmail.com>
> wrote:
> >>>> Dear members,
> >>>>
> >>>> I have a questions how to set up the signals and rules correct for
> this
> >>>> stategy in Quantstrat.
> >>>>
> >>>> Price must be above SMA=250 and below the 20 line in the Slow
> Stochastic
> >>>> indicator.
> >>>>
> >>>> The trigger for a buy signal is when the signal line of the stochastic
> >>>> indicator close above the 20 line.
> >>>>
> >>>> Enter trade
> >>>> PRICE > SMA=250
> >>>> Slow Stochastic < 20 and crossing above the 20 line
> >>>>
> >>>> Exit trade
> >>>> PRICE < SMA=250
> >>>> Slow Stoch > 80 and closes below the 80 line
> >>>>
> >>>> The rules and examples can be found here:
> >>>> http://stockcharts.com/public/1107832
> >>>>
> >>>> Here is the code I have come up with now. Please help!
> >>>>
> >>> Help with what?  You haven't stated any problem.
> >>>
> >>
> >> Joshua,
> >>    I think Isak provided code and asked if it works, or what he has to
> >> do to make it work. It didn't seem a wholly unreasonable question. (to
> >> me...)
> >> Mark
> >>
> > I don't know how to answer "does this code work?"  It doesn't do much.
> > It just defines a strategy, some indicators, signals, and rules.  I'm
> > not suggesting it's a wholly unreasonable question; but I doubt it's
> > going to result in anyone providing help to Isak.
> >
> > I suspect most people are not going to take the time to run this
> > strategy, then ensure he set it up correctly, and make any necessary
> > fixes.  In short, Isak needs to put in more effort and come back when
> > he has a more specific question.
> >
>
> OK, I see your point.
>
> I'll likely go away and be quiet now but without running Isak's code
> myself I will say I've been quiet on this list for months now as I
> pretty much quit trying to understand how to do what I think is at the
> root of Isak's question. (As I read it he's saying 'How to I combine
> multiple indicators into a singlerule?') It's not hard in quantstrat
> to write indicators, and it's not difficult to create a strategy based
> on a single indicator - there are lots of provided examples. However,
> as I remember it from months and months ago (I could be wrong, it
> might have change, I don't know as I haven't looked) it seemed quite
> difficult to turn groups of indicators into executable rules, such as
> his entry rule:
>
> PRICE > SMA=250
> Slow Stochastic < 20 and crossing above the 20 line
>
> so maybe you can point him to something that addresses just that issue.
>
> For awhile I started creating custom indicator functions outside of
> quantstrat such that my 'custom indicator' was pretty much the whole
> rule so I didn't have to deal with figuring this out. To me it felt
> like it was mostly a documentation/example file question but I got
> tired of being a squeeky wheel and stopped working with quantstrat all
> together. (I do this trading stuff for fun. To me it wasn't fun. I
> bought a MatLab license and I have fun but I keep coming back to R
> saying 'Can it be more fun now?')
>
> Anyway, I totally get your point. His code won't run because (I think)
> he cannot yet figure out how write a rule using multiple indicators
> and in the general case completely inside of quantstrat neither could
> I.
>
> FOR CLARITY: I'm not complaining. OpenSource is what it is, it
> wouldn't be there without folks like you and the other developers, and
> then we user types all make different choices. That's really cool. I'm
> only writing this for my own reasons to say why I haven't posted in
> months. That said I may be back as my TradeStation/MatLab environment
> is working pretty well and I'd like to look at using the R server to
> augment things a bit more.
>
> Cheers,
> Mark
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From josh.m.ulrich at gmail.com  Sun Feb  1 16:33:12 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sun, 1 Feb 2015 09:33:12 -0600
Subject: [R-SIG-Finance] Signal and Rule question in Quantstrat
In-Reply-To: <CA+oJuEFk1KZkvorDKvXWaJ8F65FwnwnaJ+9kw5eGW-v=hHYqig@mail.gmail.com>
References: <CAO77-6s8qvf5OMYkfATnQ_iLnC+YFTEL=52Nx-Y3HmZJyfHAmw@mail.gmail.com>
	<CAPPM_gQqEzTYasC8gDYzU2exnMSTd1m0GFcbCJvuoB-0+8koQw@mail.gmail.com>
	<CAK2H+ed_zHOQJ3=6W_2TfD1=sXZn4z5PPLjPz16w6+hquzDAxw@mail.gmail.com>
	<CAPPM_gRLJTcOMJUGUY9Bb9Ez0Yh_KPpjJRLAZc8m4eeK1yuy_w@mail.gmail.com>
	<CAK2H+edx=V2dpj0bY3YJTCJe81ZA+yC8wmxofjS2=doVRm3VSw@mail.gmail.com>
	<CA+oJuEFk1KZkvorDKvXWaJ8F65FwnwnaJ+9kw5eGW-v=hHYqig@mail.gmail.com>
Message-ID: <CAPPM_gQdVsP8p1_XxpT8QgOanryTwCxwRU6p_7k20jjep1ZgnA@mail.gmail.com>

On Feb 1, 2015 9:25 AM, "Ilya Kipnis" <ilya.kipnis at gmail.com> wrote:
>
> Have you all forgotten about my sigAND function?
>
Isak used it. Similar functionality can be achieved with sigFormula.

> On Sun, Feb 1, 2015 at 10:12 AM, Mark Knecht <markknecht at gmail.com> wrote:
>>
>> On Sun, Feb 1, 2015 at 6:31 AM, Joshua Ulrich <josh.m.ulrich at gmail.com>
wrote:
>> > On Sun, Feb 1, 2015 at 8:20 AM, Mark Knecht <markknecht at gmail.com>
wrote:
>> >> On Sun, Feb 1, 2015 at 5:48 AM, Joshua Ulrich <josh.m.ulrich at gmail.com>
wrote:
>> >>> On Fri, Jan 23, 2015 at 8:49 AM, Isak Engdahl <isak.engdahl at gmail.com>
wrote:
>> >>>> Dear members,
>> >>>>
>> >>>> I have a questions how to set up the signals and rules correct for
this
>> >>>> stategy in Quantstrat.
>> >>>>
>> >>>> Price must be above SMA=250 and below the 20 line in the Slow
Stochastic
>> >>>> indicator.
>> >>>>
>> >>>> The trigger for a buy signal is when the signal line of the
stochastic
>> >>>> indicator close above the 20 line.
>> >>>>
>> >>>> Enter trade
>> >>>> PRICE > SMA=250
>> >>>> Slow Stochastic < 20 and crossing above the 20 line
>> >>>>
>> >>>> Exit trade
>> >>>> PRICE < SMA=250
>> >>>> Slow Stoch > 80 and closes below the 80 line
>> >>>>
>> >>>> The rules and examples can be found here:
>> >>>> http://stockcharts.com/public/1107832
>> >>>>
>> >>>> Here is the code I have come up with now. Please help!
>> >>>>
>> >>> Help with what?  You haven't stated any problem.
>> >>>
>> >>
>> >> Joshua,
>> >>    I think Isak provided code and asked if it works, or what he has to
>> >> do to make it work. It didn't seem a wholly unreasonable question. (to
>> >> me...)
>> >> Mark
>> >>
>> > I don't know how to answer "does this code work?"  It doesn't do much.
>> > It just defines a strategy, some indicators, signals, and rules.  I'm
>> > not suggesting it's a wholly unreasonable question; but I doubt it's
>> > going to result in anyone providing help to Isak.
>> >
>> > I suspect most people are not going to take the time to run this
>> > strategy, then ensure he set it up correctly, and make any necessary
>> > fixes.  In short, Isak needs to put in more effort and come back when
>> > he has a more specific question.
>> >
>>
>> OK, I see your point.
>>
>> I'll likely go away and be quiet now but without running Isak's code
>> myself I will say I've been quiet on this list for months now as I
>> pretty much quit trying to understand how to do what I think is at the
>> root of Isak's question. (As I read it he's saying 'How to I combine
>> multiple indicators into a singlerule?') It's not hard in quantstrat
>> to write indicators, and it's not difficult to create a strategy based
>> on a single indicator - there are lots of provided examples. However,
>> as I remember it from months and months ago (I could be wrong, it
>> might have change, I don't know as I haven't looked) it seemed quite
>> difficult to turn groups of indicators into executable rules, such as
>> his entry rule:
>>
>> PRICE > SMA=250
>> Slow Stochastic < 20 and crossing above the 20 line
>>
>> so maybe you can point him to something that addresses just that issue.
>>
>> For awhile I started creating custom indicator functions outside of
>> quantstrat such that my 'custom indicator' was pretty much the whole
>> rule so I didn't have to deal with figuring this out. To me it felt
>> like it was mostly a documentation/example file question but I got
>> tired of being a squeeky wheel and stopped working with quantstrat all
>> together. (I do this trading stuff for fun. To me it wasn't fun. I
>> bought a MatLab license and I have fun but I keep coming back to R
>> saying 'Can it be more fun now?')
>>
>> Anyway, I totally get your point. His code won't run because (I think)
>> he cannot yet figure out how write a rule using multiple indicators
>> and in the general case completely inside of quantstrat neither could
>> I.
>>
>> FOR CLARITY: I'm not complaining. OpenSource is what it is, it
>> wouldn't be there without folks like you and the other developers, and
>> then we user types all make different choices. That's really cool. I'm
>> only writing this for my own reasons to say why I haven't posted in
>> months. That said I may be back as my TradeStation/MatLab environment
>> is working pretty well and I'd like to look at using the R server to
>> augment things a bit more.
>>
>> Cheers,
>> Mark
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
should go.
>
>

	[[alternative HTML version deleted]]


From brian at braverock.com  Sun Feb  1 17:41:45 2015
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 01 Feb 2015 10:41:45 -0600
Subject: [R-SIG-Finance] Signal and Rule question in Quantstrat
In-Reply-To: <CAK2H+edx=V2dpj0bY3YJTCJe81ZA+yC8wmxofjS2=doVRm3VSw@mail.gmail.com>
References: <CAO77-6s8qvf5OMYkfATnQ_iLnC+YFTEL=52Nx-Y3HmZJyfHAmw@mail.gmail.com>	<CAPPM_gQqEzTYasC8gDYzU2exnMSTd1m0GFcbCJvuoB-0+8koQw@mail.gmail.com>	<CAK2H+ed_zHOQJ3=6W_2TfD1=sXZn4z5PPLjPz16w6+hquzDAxw@mail.gmail.com>	<CAPPM_gRLJTcOMJUGUY9Bb9Ez0Yh_KPpjJRLAZc8m4eeK1yuy_w@mail.gmail.com>
	<CAK2H+edx=V2dpj0bY3YJTCJe81ZA+yC8wmxofjS2=doVRm3VSw@mail.gmail.com>
Message-ID: <54CE5749.9070005@braverock.com>

On 02/01/2015 09:12 AM, Mark Knecht wrote:
> (As I read it he's saying 'How to I combine
> multiple indicators into a singlerule?') It's not hard in quantstrat
> to write indicators, and it's not difficult to create a strategy based
> on a single indicator - there are lots of provided examples. However,
> as I remember it from months and months ago (I could be wrong, it
> might have change, I don't know as I haven't looked) it seemed quite
> difficult to turn groups of indicators into executable rules, such as
> his entry rule:
>
> PRICE > SMA=250
> Slow Stochastic < 20 and crossing above the 20 line
>
> so maybe you can point him to something that addresses just that issue.

I think that this may make more sense if restated a bit

Multiple indicators have been defined, let's say that their labels are 
set as:

pc.gt.sma250 # for PRICE > SMA=250
stoch.lt.20 # Slow Stochastic < 20
stock.cross.20 # Slow Stochastic crossing above the 20 line

First, I'm not sure how condition Slow Stochastic < 20 and condition 
Slow Stochastic crossing above the 20 line can both be true. Let's skip 
that for now.

I believe that what you would be looking for is a sigFormula *signal*. 
The rule will likely be ruleSignal, as usual.

The formula argument for sigFormula in the above case might be stated:

formula='pc.gt.sma250 && stock.lt.20 && stoch.cross.20'

The rest of the strategy should be pretty straightforward stuff, only 
the sigFormula bit seems to confuse people.

If I have time in the next several days, I'll try to create a demo that 
does this (or we would gladly accept a demo from someone else that does 
this).

Regards,

Brian


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From isak.engdahl at gmail.com  Sun Feb  1 23:25:32 2015
From: isak.engdahl at gmail.com (Isak Engdahl)
Date: Sun, 1 Feb 2015 17:25:32 -0500
Subject: [R-SIG-Finance] Signal and Rule question in Quantstrat
In-Reply-To: <CA+oJuEFk1KZkvorDKvXWaJ8F65FwnwnaJ+9kw5eGW-v=hHYqig@mail.gmail.com>
References: <CAO77-6s8qvf5OMYkfATnQ_iLnC+YFTEL=52Nx-Y3HmZJyfHAmw@mail.gmail.com>
	<CAPPM_gQqEzTYasC8gDYzU2exnMSTd1m0GFcbCJvuoB-0+8koQw@mail.gmail.com>
	<CAK2H+ed_zHOQJ3=6W_2TfD1=sXZn4z5PPLjPz16w6+hquzDAxw@mail.gmail.com>
	<CAPPM_gRLJTcOMJUGUY9Bb9Ez0Yh_KPpjJRLAZc8m4eeK1yuy_w@mail.gmail.com>
	<CAK2H+edx=V2dpj0bY3YJTCJe81ZA+yC8wmxofjS2=doVRm3VSw@mail.gmail.com>
	<CA+oJuEFk1KZkvorDKvXWaJ8F65FwnwnaJ+9kw5eGW-v=hHYqig@mail.gmail.com>
Message-ID: <CAO77-6u2wUdZ4uBmNosNqE0QUQBKhYsj_2kChUVA292do+QAyg@mail.gmail.com>

Dear all,

Yes i'm trying to use function SigAnd, but I think I have the logic wrong...

Here are the rules:
1. Price > SMA 250
2. Stochastic signal line must be below 20 and cross above this level. Then
buy.

How do I write such a rule in quantstrat?

Kind Regards,
Isak Engdahl



On Sunday, February 1, 2015, Ilya Kipnis <ilya.kipnis at gmail.com> wrote:

> Have you all forgotten about my sigAND function?
>
> On Sun, Feb 1, 2015 at 10:12 AM, Mark Knecht <markknecht at gmail.com
> <javascript:_e(%7B%7D,'cvml','markknecht at gmail.com');>> wrote:
>
>> On Sun, Feb 1, 2015 at 6:31 AM, Joshua Ulrich <josh.m.ulrich at gmail.com
>> <javascript:_e(%7B%7D,'cvml','josh.m.ulrich at gmail.com');>> wrote:
>> > On Sun, Feb 1, 2015 at 8:20 AM, Mark Knecht <markknecht at gmail.com
>> <javascript:_e(%7B%7D,'cvml','markknecht at gmail.com');>> wrote:
>> >> On Sun, Feb 1, 2015 at 5:48 AM, Joshua Ulrich <josh.m.ulrich at gmail.com
>> <javascript:_e(%7B%7D,'cvml','josh.m.ulrich at gmail.com');>> wrote:
>> >>> On Fri, Jan 23, 2015 at 8:49 AM, Isak Engdahl <isak.engdahl at gmail.com
>> <javascript:_e(%7B%7D,'cvml','isak.engdahl at gmail.com');>> wrote:
>> >>>> Dear members,
>> >>>>
>> >>>> I have a questions how to set up the signals and rules correct for
>> this
>> >>>> stategy in Quantstrat.
>> >>>>
>> >>>> Price must be above SMA=250 and below the 20 line in the Slow
>> Stochastic
>> >>>> indicator.
>> >>>>
>> >>>> The trigger for a buy signal is when the signal line of the
>> stochastic
>> >>>> indicator close above the 20 line.
>> >>>>
>> >>>> Enter trade
>> >>>> PRICE > SMA=250
>> >>>> Slow Stochastic < 20 and crossing above the 20 line
>> >>>>
>> >>>> Exit trade
>> >>>> PRICE < SMA=250
>> >>>> Slow Stoch > 80 and closes below the 80 line
>> >>>>
>> >>>> The rules and examples can be found here:
>> >>>> http://stockcharts.com/public/1107832
>> >>>>
>> >>>> Here is the code I have come up with now. Please help!
>> >>>>
>> >>> Help with what?  You haven't stated any problem.
>> >>>
>> >>
>> >> Joshua,
>> >>    I think Isak provided code and asked if it works, or what he has to
>> >> do to make it work. It didn't seem a wholly unreasonable question. (to
>> >> me...)
>> >> Mark
>> >>
>> > I don't know how to answer "does this code work?"  It doesn't do much.
>> > It just defines a strategy, some indicators, signals, and rules.  I'm
>> > not suggesting it's a wholly unreasonable question; but I doubt it's
>> > going to result in anyone providing help to Isak.
>> >
>> > I suspect most people are not going to take the time to run this
>> > strategy, then ensure he set it up correctly, and make any necessary
>> > fixes.  In short, Isak needs to put in more effort and come back when
>> > he has a more specific question.
>> >
>>
>> OK, I see your point.
>>
>> I'll likely go away and be quiet now but without running Isak's code
>> myself I will say I've been quiet on this list for months now as I
>> pretty much quit trying to understand how to do what I think is at the
>> root of Isak's question. (As I read it he's saying 'How to I combine
>> multiple indicators into a singlerule?') It's not hard in quantstrat
>> to write indicators, and it's not difficult to create a strategy based
>> on a single indicator - there are lots of provided examples. However,
>> as I remember it from months and months ago (I could be wrong, it
>> might have change, I don't know as I haven't looked) it seemed quite
>> difficult to turn groups of indicators into executable rules, such as
>> his entry rule:
>>
>> PRICE > SMA=250
>> Slow Stochastic < 20 and crossing above the 20 line
>>
>> so maybe you can point him to something that addresses just that issue.
>>
>> For awhile I started creating custom indicator functions outside of
>> quantstrat such that my 'custom indicator' was pretty much the whole
>> rule so I didn't have to deal with figuring this out. To me it felt
>> like it was mostly a documentation/example file question but I got
>> tired of being a squeeky wheel and stopped working with quantstrat all
>> together. (I do this trading stuff for fun. To me it wasn't fun. I
>> bought a MatLab license and I have fun but I keep coming back to R
>> saying 'Can it be more fun now?')
>>
>> Anyway, I totally get your point. His code won't run because (I think)
>> he cannot yet figure out how write a rule using multiple indicators
>> and in the general case completely inside of quantstrat neither could
>> I.
>>
>> FOR CLARITY: I'm not complaining. OpenSource is what it is, it
>> wouldn't be there without folks like you and the other developers, and
>> then we user types all make different choices. That's really cool. I'm
>> only writing this for my own reasons to say why I haven't posted in
>> months. That said I may be back as my TradeStation/MatLab environment
>> is working pretty well and I'd like to look at using the R server to
>> augment things a bit more.
>>
>> Cheers,
>> Mark
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org
>> <javascript:_e(%7B%7D,'cvml','R-SIG-Finance at r-project.org');> mailing
>> list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
>

-- 


Kind Regards
Isak Engdahl

	[[alternative HTML version deleted]]


From ilya.kipnis at gmail.com  Sun Feb  1 23:27:08 2015
From: ilya.kipnis at gmail.com (Ilya Kipnis)
Date: Sun, 1 Feb 2015 17:27:08 -0500
Subject: [R-SIG-Finance] Signal and Rule question in Quantstrat
In-Reply-To: <CAO77-6u2wUdZ4uBmNosNqE0QUQBKhYsj_2kChUVA292do+QAyg@mail.gmail.com>
References: <CAO77-6s8qvf5OMYkfATnQ_iLnC+YFTEL=52Nx-Y3HmZJyfHAmw@mail.gmail.com>
	<CAPPM_gQqEzTYasC8gDYzU2exnMSTd1m0GFcbCJvuoB-0+8koQw@mail.gmail.com>
	<CAK2H+ed_zHOQJ3=6W_2TfD1=sXZn4z5PPLjPz16w6+hquzDAxw@mail.gmail.com>
	<CAPPM_gRLJTcOMJUGUY9Bb9Ez0Yh_KPpjJRLAZc8m4eeK1yuy_w@mail.gmail.com>
	<CAK2H+edx=V2dpj0bY3YJTCJe81ZA+yC8wmxofjS2=doVRm3VSw@mail.gmail.com>
	<CA+oJuEFk1KZkvorDKvXWaJ8F65FwnwnaJ+9kw5eGW-v=hHYqig@mail.gmail.com>
	<CAO77-6u2wUdZ4uBmNosNqE0QUQBKhYsj_2kChUVA292do+QAyg@mail.gmail.com>
Message-ID: <CA+oJuEEkJmzpMV2sX+VVc=Lg69VmLX6Jc=R3QuRTeOJDQ-8ULQ@mail.gmail.com>

sigComparison for price > SMA250. sigThreshold with stochastic with cross =
FALSE
sigAND with cross = TRUE

See some of my old posts on my blog.

On Sun, Feb 1, 2015 at 5:25 PM, Isak Engdahl <isak.engdahl at gmail.com> wrote:

> Dear all,
>
> Yes i'm trying to use function SigAnd, but I think I have the logic
> wrong...
>
> Here are the rules:
> 1. Price > SMA 250
> 2. Stochastic signal line must be below 20 and cross above this level.
> Then buy.
>
> How do I write such a rule in quantstrat?
>
> Kind Regards,
> Isak Engdahl
>
>
>
> On Sunday, February 1, 2015, Ilya Kipnis <ilya.kipnis at gmail.com> wrote:
>
>> Have you all forgotten about my sigAND function?
>>
>> On Sun, Feb 1, 2015 at 10:12 AM, Mark Knecht <markknecht at gmail.com>
>> wrote:
>>
>>> On Sun, Feb 1, 2015 at 6:31 AM, Joshua Ulrich <josh.m.ulrich at gmail.com>
>>> wrote:
>>> > On Sun, Feb 1, 2015 at 8:20 AM, Mark Knecht <markknecht at gmail.com>
>>> wrote:
>>> >> On Sun, Feb 1, 2015 at 5:48 AM, Joshua Ulrich <
>>> josh.m.ulrich at gmail.com> wrote:
>>> >>> On Fri, Jan 23, 2015 at 8:49 AM, Isak Engdahl <
>>> isak.engdahl at gmail.com> wrote:
>>> >>>> Dear members,
>>> >>>>
>>> >>>> I have a questions how to set up the signals and rules correct for
>>> this
>>> >>>> stategy in Quantstrat.
>>> >>>>
>>> >>>> Price must be above SMA=250 and below the 20 line in the Slow
>>> Stochastic
>>> >>>> indicator.
>>> >>>>
>>> >>>> The trigger for a buy signal is when the signal line of the
>>> stochastic
>>> >>>> indicator close above the 20 line.
>>> >>>>
>>> >>>> Enter trade
>>> >>>> PRICE > SMA=250
>>> >>>> Slow Stochastic < 20 and crossing above the 20 line
>>> >>>>
>>> >>>> Exit trade
>>> >>>> PRICE < SMA=250
>>> >>>> Slow Stoch > 80 and closes below the 80 line
>>> >>>>
>>> >>>> The rules and examples can be found here:
>>> >>>> http://stockcharts.com/public/1107832
>>> >>>>
>>> >>>> Here is the code I have come up with now. Please help!
>>> >>>>
>>> >>> Help with what?  You haven't stated any problem.
>>> >>>
>>> >>
>>> >> Joshua,
>>> >>    I think Isak provided code and asked if it works, or what he has to
>>> >> do to make it work. It didn't seem a wholly unreasonable question. (to
>>> >> me...)
>>> >> Mark
>>> >>
>>> > I don't know how to answer "does this code work?"  It doesn't do much.
>>> > It just defines a strategy, some indicators, signals, and rules.  I'm
>>> > not suggesting it's a wholly unreasonable question; but I doubt it's
>>> > going to result in anyone providing help to Isak.
>>> >
>>> > I suspect most people are not going to take the time to run this
>>> > strategy, then ensure he set it up correctly, and make any necessary
>>> > fixes.  In short, Isak needs to put in more effort and come back when
>>> > he has a more specific question.
>>> >
>>>
>>> OK, I see your point.
>>>
>>> I'll likely go away and be quiet now but without running Isak's code
>>> myself I will say I've been quiet on this list for months now as I
>>> pretty much quit trying to understand how to do what I think is at the
>>> root of Isak's question. (As I read it he's saying 'How to I combine
>>> multiple indicators into a singlerule?') It's not hard in quantstrat
>>> to write indicators, and it's not difficult to create a strategy based
>>> on a single indicator - there are lots of provided examples. However,
>>> as I remember it from months and months ago (I could be wrong, it
>>> might have change, I don't know as I haven't looked) it seemed quite
>>> difficult to turn groups of indicators into executable rules, such as
>>> his entry rule:
>>>
>>> PRICE > SMA=250
>>> Slow Stochastic < 20 and crossing above the 20 line
>>>
>>> so maybe you can point him to something that addresses just that issue.
>>>
>>> For awhile I started creating custom indicator functions outside of
>>> quantstrat such that my 'custom indicator' was pretty much the whole
>>> rule so I didn't have to deal with figuring this out. To me it felt
>>> like it was mostly a documentation/example file question but I got
>>> tired of being a squeeky wheel and stopped working with quantstrat all
>>> together. (I do this trading stuff for fun. To me it wasn't fun. I
>>> bought a MatLab license and I have fun but I keep coming back to R
>>> saying 'Can it be more fun now?')
>>>
>>> Anyway, I totally get your point. His code won't run because (I think)
>>> he cannot yet figure out how write a rule using multiple indicators
>>> and in the general case completely inside of quantstrat neither could
>>> I.
>>>
>>> FOR CLARITY: I'm not complaining. OpenSource is what it is, it
>>> wouldn't be there without folks like you and the other developers, and
>>> then we user types all make different choices. That's really cool. I'm
>>> only writing this for my own reasons to say why I haven't posted in
>>> months. That said I may be back as my TradeStation/MatLab environment
>>> is working pretty well and I'd like to look at using the R server to
>>> augment things a bit more.
>>>
>>> Cheers,
>>> Mark
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>>
>>
>
> --
>
>
> Kind Regards
> Isak Engdahl
>
>

	[[alternative HTML version deleted]]


From junluke at gmail.com  Mon Feb  2 05:40:30 2015
From: junluke at gmail.com (jun wang)
Date: Sun, 1 Feb 2015 23:40:30 -0500
Subject: [R-SIG-Finance] rmgarch package code
Message-ID: <CAPD4hGBQ7r0vzpYX0nmq=3B9momRwFCHVDwnG=HQi8GHSOV4ww@mail.gmail.com>

Dear Alexios,

I am looking at the source code of the rmgarch package and trying to find
the object "dccCopulaStudent" in this piece of code

ans = try(.Call("dccCopulaStudent", Qbar = Qbar, U = Qdata, Rbar = Rbar,
dcca = alpha, dccb = beta, tnu = nu, dccorder = c(1,1,1), dccsum = alpha +
beta,
PACKAGE="rmgarch"), silent = TRUE)

It seems this was wrote in C. Could you tell me how can i look at the
source code in R?

Many Thanks!!!
Jun

	[[alternative HTML version deleted]]


From alexios at 4dscape.com  Mon Feb  2 09:32:27 2015
From: alexios at 4dscape.com (alexios)
Date: Mon, 02 Feb 2015 08:32:27 +0000
Subject: [R-SIG-Finance] rmgarch package code
In-Reply-To: <CAPD4hGBQ7r0vzpYX0nmq=3B9momRwFCHVDwnG=HQi8GHSOV4ww@mail.gmail.com>
References: <CAPD4hGBQ7r0vzpYX0nmq=3B9momRwFCHVDwnG=HQi8GHSOV4ww@mail.gmail.com>
Message-ID: <54CF361B.6000600@4dscape.com>

Dear Jun,

This is an R finance mailing list so please address the list, not me 
directly.

The code is written in Rcpp and the source code can be found under the 
'src' folder in the source distribution in the copulas.cpp file.

Alexios


On 02/02/2015 04:40, jun wang wrote:
> Dear Alexios,
>
> I am looking at the source code of the rmgarch package and trying to find
> the object "dccCopulaStudent" in this piece of code
>
> ans = try(.Call("dccCopulaStudent", Qbar = Qbar, U = Qdata, Rbar = Rbar,
> dcca = alpha, dccb = beta, tnu = nu, dccorder = c(1,1,1), dccsum = alpha +
> beta,
> PACKAGE="rmgarch"), silent = TRUE)
>
> It seems this was wrote in C. Could you tell me how can i look at the
> source code in R?
>
> Many Thanks!!!
> Jun
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>


From josh.m.ulrich at gmail.com  Mon Feb  2 18:41:37 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 2 Feb 2015 11:41:37 -0600
Subject: [R-SIG-Finance] R/Finance 2015 Call for Papers
In-Reply-To: <CAPPM_gS4wwCEU77BUtHf_uy01HZ-JYJ3go5hS35_z5xu_SKm6Q@mail.gmail.com>
References: <CAPPM_gStdyAJBr8E7SygQ-5WKCaXUYcB95Xajy063Z0WFRPd4A@mail.gmail.com>
	<CAPPM_gS4wwCEU77BUtHf_uy01HZ-JYJ3go5hS35_z5xu_SKm6Q@mail.gmail.com>
Message-ID: <CAPPM_gR7EK3Soj3CcOLGt20N5-vKX_j-+--nE3p5egRFa_k9zA@mail.gmail.com>

The registration site closed earlier than expected (6pm Central on
Saturday).  If you tried to submit but received an error that
registration had closed, please send your submission to
committee at rinfinance.com by 5pm Central tomorrow (February 3rd).
Please include answers to the following questions in your email (the
fields with a preceding asterisk are required).  This will ensure your
submission is consistent with the other site-based submissions.

*First Name:
*Last Name:
*Email Address:
*Company:
*Title:
Work Address:

*Are you a current student?
*Does the submission contain a full paper?
*Please enter the title of your submission:
Insert link to R code:
If you have any additional information please enter it below:



For the committee,
Josh


On Tue, Jan 20, 2015 at 9:37 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> A friendly reminder that the CFP deadline (Jan-31) is less than two weeks away!
>
> For the committee,
> Josh
>
> On Tue, Nov 18, 2014 at 1:30 PM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
>> Call for Papers:
>>
>> R/Finance 2015: Applied Finance with R
>> May 29 and 30, 2015
>> University of Illinois at Chicago
>>
>> The seventh annual R/Finance conference for applied finance using R
>> will be held on May 29 and 30, 2015 in Chicago, IL, USA at the
>> University of Illinois at Chicago.  The conference will cover topics
>> including portfolio management, time series analysis, advanced risk
>> tools, high-performance computing, market microstructure, and
>> econometrics. All will be discussed within the context of using R as a
>> primary tool for financial risk management, portfolio construction,
>> and trading.
>>
>> Over the past six years, R/Finance has included attendees from around
>> the world. It has featured presentations from prominent academics and
>> practitioners, and we anticipate another exciting line-up for 2015.
>> This year will include invited keynote presentations by Emanuel
>> Derman, Louis Marascio, Alexander McNeil, and Rishi Narang.
>>
>> We invite you to submit complete papers in pdf format for
>> consideration. We will also consider one-page abstracts (in txt or pdf
>> format) although more complete papers are preferred.  We welcome
>> submissions for both full talks and abbreviated "lightning talks."
>> Both academic and practitioner proposals related to R are encouraged.
>>
>> All slides will be made publicly available at conference time.
>> Presenters are strongly encouraged to provide working R code to
>> accompany the slides.  Data sets should also be made public for the
>> purposes of reproducibility (though we realize this may be limited due
>> to contracts with data vendors). Preference may be given to presenters
>> who have released R packages.
>>
>> The conference will award two (or more) $1000 prizes for best papers.
>> A submission must be a full paper to be eligible for a best paper
>> award. Extended abstracts, even if a full paper is provided by
>> conference time, are not eligible for a best paper award.  Financial
>> assistance for travel and accommodation may be available to
>> presenters, however requests must be made at the time of submission.
>> Assistance will be granted at the discretion of the conference
>> committee.
>>
>> Please make your submission online at: http://www.cvent.com/d/t4qy73.
>>
>> The submission deadline is January 31, 2015. Submitters will be
>> notified via email by February 28, 2015 of acceptance, presentation
>> length, and financial assistance (if requested).
>>
>> Additional details will be announced via the conference website
>>
>> http://www.RinFinance.com/
>>
>> as they become available. Information on previous years' presenters
>> and their presentations are also at the conference website.
>>
>> For the program committee:
>> Gib Bassett, Peter Carl, Dirk Eddelbuettel, Brian Peterson, Dale
>> Rosenthal, Jeffrey Ryan, Joshua Ulrich
>
>
> --
> Joshua Ulrich  |  about.me/joshuaulrich
> FOSS Trading  |  www.fosstrading.com



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From Olivier.Martin at avignon.inra.fr  Tue Feb  3 11:43:32 2015
From: Olivier.Martin at avignon.inra.fr (Olivier MARTIN)
Date: Tue, 03 Feb 2015 11:43:32 +0100
Subject: [R-SIG-Finance] help with quantstrat
Message-ID: <54D0A654.3060807@avignon.inra.fr>

Hi all,

I try to program a simple strategy to learn with the package quantstrat.
Hereafter is the program, and the message I obtained when I applyed the 
strategy

Error in eval(expr, envir, enclos) : objet 'rsif' introuvable
Erreur dans `colnames<-`(`*tmp*`, value = seq(ncol(tmp_val))) :
   attempt to set 'colnames' on an object with less than two dimensions


Could you explain me what is wrong ?
Regards,
Olivier.



#-------------------------
currency("EUR")
Sys.setenv(TZ="UTC")
getSymbols('ACA.PA')
stock("ACA.PA",currency="EUR")

# system settings
initDate <- '2007-01-01'
endDate <-  '2014-12-30'
initEq <- 1

#strategy
mystrat <- "gg"
rm.strat(mystrat) # remove strategy
initPortf(mystrat,'ACA.PA', initDate=initDate)
initAcct(mystrat,portfolios=mystrat, initDate=initDate, initEq=initEq)
# initialize orders container
initOrders(portfolio=mystrat,initDate=initDate)
# instantiate a new strategy object
strategy(mystrat,store=TRUE)


myRSI=function(x,nrsi=8,m=20){
     r=SMA(RSI(x,n=nrsi),n=m)
     return(r)
     }
myCCI=function(x,ncci=8,m=20){
     r=SMA(CCI(x,n=ncci),n=m)
     return(r)
     }

#indicatros
mystrat=add.indicator(strategy =mystrat, name = "myRSI",arguments = 
list(x =quote(Cl(mktdata)),nrsi=8 ,m=20), label="rsif")
mystrat=add.indicator(strategy =mystrat, name = "myRSI",arguments = 
list(x =quote(Cl(mktdata)),nrsi=14,m=20), label="rsis")
mystrat=add.indicator(strategy =mystrat, name = "myCCI",arguments = 
list(x =quote(Cl(mktdata)),ncci=8 ,m=20), label="ccif")
mystrat=add.indicator(strategy =mystrat, name = "myCCI",arguments = 
list(x =quote(Cl(mktdata)),ncci=14,m=20), label="ccis")

#signals
mystrat=add.signal(mystrat,name="sigFormula",arguments = 
list(columns=c("rsif","rsis","ccif","ccis"),formula="rsif>rsis & 
ccif>ccis",cross=TRUE), label="up")
mystrat=add.signal(mystrat,name="sigFormula",arguments = 
list(columns=c("rsif","rsis","ccif","ccis"),formula="rsif<rsis & 
ccif<ccis",cross=TRUE), label="dn")
mystrat=add.signal(mystrat,name="sigFormula",arguments = 
list(columns=c("rsif","rsis","ccif","ccis"),formula="!(rsif>rsis & 
ccif>ccis ) | !(rsif<rsis & ccif<ccis)",cross=TRUE), label="ex")

# position rules
mystrat=add.rule(mystrat, name="ruleSignal",arguments = 
list(sigcol="up", sigval=TRUE, orderqty=1,ordertype='market', 
orderside='long'), type='enter')
mystrat=add.rule(mystrat, name="ruleSignal",arguments = 
list(sigcol="ex", sigval=TRUE, orderqty='all',ordertype='market', 
orderside='long'), type='exit')
mystrat=add.rule(mystrat, name="ruleSignal",arguments = 
list(sigcol="dn", sigval=TRUE, orderqty=1,ordertype='market', 
orderside='short'), type='enter')
mystrat=add.rule(mystrat, name="ruleSignal",arguments = 
list(sigcol="ex", sigval=TRUE, orderqty='all',ordertype='market', 
orderside='short'), type='exit')

## apply strategy
applyStrategy(strategy=mystrat , portfolios=mystrat)


This is the message I obtain :

Error in eval(expr, envir, enclos) : objet 'rsif' introuvable
Erreur dans `colnames<-`(`*tmp*`, value = seq(ncol(tmp_val))) :
   attempt to set 'colnames' on an object with less than two dimensions


From censix0 at gmail.com  Tue Feb  3 13:43:47 2015
From: censix0 at gmail.com (cen six)
Date: Tue, 3 Feb 2015 13:43:47 +0100
Subject: [R-SIG-Finance] help with quantstrat
In-Reply-To: <54D0A654.3060807@avignon.inra.fr>
References: <54D0A654.3060807@avignon.inra.fr>
Message-ID: <CAOGDGTaxx+8f_rmKx=O_-ew-X2Np3CeiKM=ZaqYwQkm4S4Fwiw@mail.gmail.com>

my guess is that your myRSI and myCCI functions probably need to explicitly
define the colnames 'rsif', ...

myRSI=function(x,nrsi=8,m=20){
    r=SMA(RSI(x,n=nrsi),n=m)
    colnames(r) <- 'rsif'
    return(r)
    }

Check if  the 'label=' argument is really being used to set column labels
in the "add.indicator" function definition ...


On Tue, Feb 3, 2015 at 11:43 AM, Olivier MARTIN <
Olivier.Martin at avignon.inra.fr> wrote:

> Hi all,
>
> I try to program a simple strategy to learn with the package quantstrat.
> Hereafter is the program, and the message I obtained when I applyed the
> strategy
>
> Error in eval(expr, envir, enclos) : objet 'rsif' introuvable
> Erreur dans `colnames<-`(`*tmp*`, value = seq(ncol(tmp_val))) :
>   attempt to set 'colnames' on an object with less than two dimensions
>
>
> Could you explain me what is wrong ?
> Regards,
> Olivier.
>
>
>
> #-------------------------
> currency("EUR")
> Sys.setenv(TZ="UTC")
> getSymbols('ACA.PA')
> stock("ACA.PA",currency="EUR")
>
> # system settings
> initDate <- '2007-01-01'
> endDate <-  '2014-12-30'
> initEq <- 1
>
> #strategy
> mystrat <- "gg"
> rm.strat(mystrat) # remove strategy
> initPortf(mystrat,'ACA.PA', initDate=initDate)
> initAcct(mystrat,portfolios=mystrat, initDate=initDate, initEq=initEq)
> # initialize orders container
> initOrders(portfolio=mystrat,initDate=initDate)
> # instantiate a new strategy object
> strategy(mystrat,store=TRUE)
>
>
> myRSI=function(x,nrsi=8,m=20){
>     r=SMA(RSI(x,n=nrsi),n=m)
>     return(r)
>     }
> myCCI=function(x,ncci=8,m=20){
>     r=SMA(CCI(x,n=ncci),n=m)
>     return(r)
>     }
>
> #indicatros
> mystrat=add.indicator(strategy =mystrat, name = "myRSI",arguments = list(x
> =quote(Cl(mktdata)),nrsi=8 ,m=20), label="rsif")
> mystrat=add.indicator(strategy =mystrat, name = "myRSI",arguments = list(x
> =quote(Cl(mktdata)),nrsi=14,m=20), label="rsis")
> mystrat=add.indicator(strategy =mystrat, name = "myCCI",arguments = list(x
> =quote(Cl(mktdata)),ncci=8 ,m=20), label="ccif")
> mystrat=add.indicator(strategy =mystrat, name = "myCCI",arguments = list(x
> =quote(Cl(mktdata)),ncci=14,m=20), label="ccis")
>
> #signals
> mystrat=add.signal(mystrat,name="sigFormula",arguments =
> list(columns=c("rsif","rsis","ccif","ccis"),formula="rsif>rsis &
> ccif>ccis",cross=TRUE), label="up")
> mystrat=add.signal(mystrat,name="sigFormula",arguments =
> list(columns=c("rsif","rsis","ccif","ccis"),formula="rsif<rsis &
> ccif<ccis",cross=TRUE), label="dn")
> mystrat=add.signal(mystrat,name="sigFormula",arguments =
> list(columns=c("rsif","rsis","ccif","ccis"),formula="!(rsif>rsis &
> ccif>ccis ) | !(rsif<rsis & ccif<ccis)",cross=TRUE), label="ex")
>
> # position rules
> mystrat=add.rule(mystrat, name="ruleSignal",arguments = list(sigcol="up",
> sigval=TRUE, orderqty=1,ordertype='market', orderside='long'), type='enter')
> mystrat=add.rule(mystrat, name="ruleSignal",arguments = list(sigcol="ex",
> sigval=TRUE, orderqty='all',ordertype='market', orderside='long'),
> type='exit')
> mystrat=add.rule(mystrat, name="ruleSignal",arguments = list(sigcol="dn",
> sigval=TRUE, orderqty=1,ordertype='market', orderside='short'),
> type='enter')
> mystrat=add.rule(mystrat, name="ruleSignal",arguments = list(sigcol="ex",
> sigval=TRUE, orderqty='all',ordertype='market', orderside='short'),
> type='exit')
>
> ## apply strategy
> applyStrategy(strategy=mystrat , portfolios=mystrat)
>
>
> This is the message I obtain :
>
> Error in eval(expr, envir, enclos) : objet 'rsif' introuvable
> Erreur dans `colnames<-`(`*tmp*`, value = seq(ncol(tmp_val))) :
>   attempt to set 'colnames' on an object with less than two dimensions
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From carloslewlew at gmail.com  Thu Feb  5 02:07:42 2015
From: carloslewlew at gmail.com (Liu)
Date: Wed, 4 Feb 2015 20:07:42 -0500
Subject: [R-SIG-Finance] Problems with xts and plotting charts in quantmod
Message-ID: <CAMLM=SDXx=bNM4Otchjdvij9YPAjrAg0LYDMztT2DgUpJDj7dQ@mail.gmail.com>

Hi all,
I'm trying to plot candle charts from OHLC data frame like this:
 V1V2V3V4V5
120150101 1801001184.131184.441184.041184.13
220150101 1802001184.121184.411184.121184.41
320150101 1803001184.531184.541184.321184.54
420150101 1804001184.601184.601184.431184.51
Tried to cast it to xts by using:

data<-read.csv(file path)
chartSeries(as.xts(data),type="candlesticks")

Then I have the error "

Error in as.POSIXlt.character(x, tz, ...) :
  character string is not in a standard unambiguous format

"
I am not sure what that means. Maybe it's saying that my date and time is
non standard string? What should I do?
Please help.

Thanks
Carlos

	[[alternative HTML version deleted]]


From wouter at morannon.org  Thu Feb  5 02:23:46 2015
From: wouter at morannon.org (Wouter Thielen)
Date: Thu, 05 Feb 2015 01:23:46 +0000
Subject: [R-SIG-Finance] Problems with xts and plotting charts in
	quantmod
References: <CAMLM=SDXx=bNM4Otchjdvij9YPAjrAg0LYDMztT2DgUpJDj7dQ@mail.gmail.com>
Message-ID: <CACySJQUC9os3BK8wYRSn5SfCjke9dAMkRyxvfvFWWhc7c=C3CQ@mail.gmail.com>

Hi Carlos,

I can not clearly see where the columns start or stop, but I hope that the
first character (1, 2, 3, 4) is a separate column, and that the date+time
is in the second column. If that is the case, try passing
"index=as.POSIXct(data$V2, format='%Y%m%d %H%M%S')" to your as.xts function:

as.xts(data, index=as.POSIXct(data$V2, format='%Y%m%d %H%M%S'))

You may want to skip the first column as it is not part of the OHLC
structure, so as.xts(data[, -1], index=...).

For more reference, see http://www.stat.berkeley.edu/~s133/dates.html and
http://stackoverflow.com/questions/18261160/convert-date-time-format-for-use-in-xts

Hope this helps.

Wouter

On Thu Feb 05 2015 at 10:09:38 AM Liu <carloslewlew at gmail.com> wrote:

> Hi all,
> I'm trying to plot candle charts from OHLC data frame like this:
>  V1V2V3V4V5
> 120150101 1801001184.131184.441184.041184.13
> 220150101 1802001184.121184.411184.121184.41
> 320150101 1803001184.531184.541184.321184.54
> 420150101 1804001184.601184.601184.431184.51
> Tried to cast it to xts by using:
>
> data<-read.csv(file path)
> chartSeries(as.xts(data),type="candlesticks")
>
> Then I have the error "
>
> Error in as.POSIXlt.character(x, tz, ...) :
>   character string is not in a standard unambiguous format
>
> "
> I am not sure what that means. Maybe it's saying that my date and time is
> non standard string? What should I do?
> Please help.
>
> Thanks
> Carlos
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From wouter at morannon.org  Thu Feb  5 05:30:58 2015
From: wouter at morannon.org (Wouter Thielen)
Date: Thu, 05 Feb 2015 04:30:58 +0000
Subject: [R-SIG-Finance] Problems with xts and plotting charts in
	quantmod
References: <CAMLM=SDXx=bNM4Otchjdvij9YPAjrAg0LYDMztT2DgUpJDj7dQ@mail.gmail.com>
	<CACySJQUC9os3BK8wYRSn5SfCjke9dAMkRyxvfvFWWhc7c=C3CQ@mail.gmail.com>
	<CAMLM=SBhTtyWFx0jAaM29BhocK4F8VYV36Rc_NH7ig6CYfm=Xg@mail.gmail.com>
Message-ID: <CACySJQXXiyu4v5u1qDZ-n6cmQtj25wMkXVotiA=A+u=-9m3qKg@mail.gmail.com>

Hi Carlos,

My explanation was incomplete sorry. You need to format the data correctly
first, and removing the first column is necessary. Also, naming the columns
Open, High, Low, Close also helps. Here is the code that should work (I
tested it):

data <- read.csv("file.csv", header=FALSE)
data.xts <- xts(data[, -1], order.by=as.POSIXct(data$V1, format="%Y%m%d
%H%M%S"))
colnames(data.xts) <- c("Open", "High", "Low", "Close")
chartSeries(data.xts, type="candlesticks")

Note, it is %Y%m%d, not %Y%h%m as in what you put in your example.

It is also good to do a head(data), head(data.xts) after each command to
see how the structure of the data and the xts object changes after each
command, to see it does what you want it to do.

Oh, and please also cc the list (reply-all) so that others can follow :)

Wouter

On Thu Feb 05 2015 at 1:12:17 PM Liu <carloslewlew at gmail.com> wrote:

> Hello Wouter,
> Thank you for your kind response.
> I should have pasted the data in plain text:
> V1                        V2        V3         V4        V5
> 20150101 180100 1184.13 1184.44 1184.04 1184.13
> 20150101 180200 1184.12 1184.41 1184.12 1184.41
> 20150101 180300 1184.53 1184.54 1184.32 1184.54
> 20150101 180400 1184.60 1184.60 1184.43 1184.51
>
> first column is date and time, then comes OHLC value. There used to be
> sixth column "Volume? but I removed it since it's just 0.
> I followed your help and casted it into an xts object:
> data<-xts(data,as.POSIXct(data$V1,format="%Y%h%m %H%M%S"))
>
> then I ran:
> chartSeries(data,type="candlesticks")
> and I got error:
> Error in na.omit.xts(x) : unsupported type
>
> The manual says chartSeries takes in an OHLC object, though the error
> before said"chartSeries requires an xtsible object". Where do I go from
> here, to convert the xts into an OHLC or something else?
> Please help.
>
> Thank you very much,
> Carlos
>
>
> On Wed, Feb 4, 2015 at 8:23 PM, Wouter Thielen <wouter at morannon.org>
> wrote:
>
>> Hi Carlos,
>>
>> I can not clearly see where the columns start or stop, but I hope that
>> the first character (1, 2, 3, 4) is a separate column, and that the
>> date+time is in the second column. If that is the case, try passing
>> "index=as.POSIXct(data$V2, format='%Y%m%d %H%M%S')" to your as.xts function:
>>
>> as.xts(data, index=as.POSIXct(data$V2, format='%Y%m%d %H%M%S'))
>>
>> You may want to skip the first column as it is not part of the OHLC
>> structure, so as.xts(data[, -1], index=...).
>>
>> For more reference, see http://www.stat.berkeley.edu/~s133/dates.html
>> and
>> http://stackoverflow.com/questions/18261160/convert-date-time-format-for-use-in-xts
>>
>> Hope this helps.
>>
>> Wouter
>>
>> On Thu Feb 05 2015 at 10:09:38 AM Liu <carloslewlew at gmail.com> wrote:
>>
>>> Hi all,
>>> I'm trying to plot candle charts from OHLC data frame like this:
>>>  V1V2V3V4V5
>>> 120150101 1801001184.131184.441184.041184.13
>>> 220150101 1802001184.121184.411184.121184.41
>>> 320150101 1803001184.531184.541184.321184.54
>>> 420150101 1804001184.601184.601184.431184.51
>>> Tried to cast it to xts by using:
>>>
>>> data<-read.csv(file path)
>>> chartSeries(as.xts(data),type="candlesticks")
>>>
>>> Then I have the error "
>>>
>>> Error in as.POSIXlt.character(x, tz, ...) :
>>>   character string is not in a standard unambiguous format
>>>
>>> "
>>> I am not sure what that means. Maybe it's saying that my date and time is
>>> non standard string? What should I do?
>>> Please help.
>>>
>>> Thanks
>>> Carlos
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>>
>

	[[alternative HTML version deleted]]


From carloslewlew at gmail.com  Thu Feb  5 17:44:25 2015
From: carloslewlew at gmail.com (Liu)
Date: Thu, 5 Feb 2015 11:44:25 -0500
Subject: [R-SIG-Finance] Problems with xts and plotting charts in
	quantmod
In-Reply-To: <CACySJQXXiyu4v5u1qDZ-n6cmQtj25wMkXVotiA=A+u=-9m3qKg@mail.gmail.com>
References: <CAMLM=SDXx=bNM4Otchjdvij9YPAjrAg0LYDMztT2DgUpJDj7dQ@mail.gmail.com>
	<CACySJQUC9os3BK8wYRSn5SfCjke9dAMkRyxvfvFWWhc7c=C3CQ@mail.gmail.com>
	<CAMLM=SBhTtyWFx0jAaM29BhocK4F8VYV36Rc_NH7ig6CYfm=Xg@mail.gmail.com>
	<CACySJQXXiyu4v5u1qDZ-n6cmQtj25wMkXVotiA=A+u=-9m3qKg@mail.gmail.com>
Message-ID: <CAMLM=SCapp7L6DjR+w=onKGvEMs8hPdvBapoRdxcibH+wnuUJg@mail.gmail.com>

Hi Wouter,
I appreciate your help and contribution. I followed the above codes and
encountered an error:
*Error in na.omit.xts(x) : unsupported type*

I found other's post on SO with my similar question but unfortunately no
solution yet:
http://stackoverflow.com/questions/28255994/error-in-na-omit-xtsx-unsupported-type-with-chartseries

Just post the output here to see if you can see the problem:

> chartSeries(data.xts,subset="2015-01",type="candlesticks")
*Error in na.omit.xts(x) : unsupported type*
> head(data.xts)
                    Date Time         Open      High      Low       Close

2009-03-15 17:00:00 "20090315 170000" " 929.60" " 929.60" " 929.60" "
929.60"
2009-03-15 18:00:00 "20090315 180000" " 925.85" " 927.00" " 925.80" "
926.05"
2009-03-15 18:01:00 "20090315 180100" " 925.80" " 927.30" " 925.80" "
925.90"
2009-03-15 18:02:00 "20090315 180200" " 925.90" " 926.45" " 925.90" "
925.90"
2009-03-15 18:03:00 "20090315 180300" " 925.85" " 926.95" " 925.85" "
926.95"
2009-03-15 18:04:00 "20090315 180400" " 927.20" " 927.20" " 925.65" "
925.80"

> str(data.xts)
An ?xts? object on 2009-03-15 17:00:00/2015-01-30 16:57:00 containing:
  Data: chr [1:2064753, 1:5] "20090315 170000" "20090315 180000" "20090315
180100" "20090315 180200" ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:5] "Date Time" "Open" "High" "Low" ...
  Indexed by objects of class: [POSIXct,POSIXt] TZ:
  xts Attributes:
 NULL



Thanks,
Carlos

On Wed, Feb 4, 2015 at 11:30 PM, Wouter Thielen <wouter at morannon.org> wrote:

> Hi Carlos,
>
> My explanation was incomplete sorry. You need to format the data correctly
> first, and removing the first column is necessary. Also, naming the columns
> Open, High, Low, Close also helps. Here is the code that should work (I
> tested it):
>
> data <- read.csv("file.csv", header=FALSE)
> data.xts <- xts(data[, -1], order.by=as.POSIXct(data$V1, format="%Y%m%d
> %H%M%S"))
> colnames(data.xts) <- c("Open", "High", "Low", "Close")
> chartSeries(data.xts, type="candlesticks")
>
> Note, it is %Y%m%d, not %Y%h%m as in what you put in your example.
>
> It is also good to do a head(data), head(data.xts) after each command to
> see how the structure of the data and the xts object changes after each
> command, to see it does what you want it to do.
>
> Oh, and please also cc the list (reply-all) so that others can follow :)
>
> Wouter
>
> On Thu Feb 05 2015 at 1:12:17 PM Liu <carloslewlew at gmail.com> wrote:
>
>> Hello Wouter,
>> Thank you for your kind response.
>> I should have pasted the data in plain text:
>> V1                        V2        V3         V4        V5
>> 20150101 180100 1184.13 1184.44 1184.04 1184.13
>> 20150101 180200 1184.12 1184.41 1184.12 1184.41
>> 20150101 180300 1184.53 1184.54 1184.32 1184.54
>> 20150101 180400 1184.60 1184.60 1184.43 1184.51
>>
>> first column is date and time, then comes OHLC value. There used to be
>> sixth column "Volume? but I removed it since it's just 0.
>> I followed your help and casted it into an xts object:
>> data<-xts(data,as.POSIXct(data$V1,format="%Y%h%m %H%M%S"))
>>
>> then I ran:
>> chartSeries(data,type="candlesticks")
>> and I got error:
>> Error in na.omit.xts(x) : unsupported type
>>
>> The manual says chartSeries takes in an OHLC object, though the error
>> before said"chartSeries requires an xtsible object". Where do I go from
>> here, to convert the xts into an OHLC or something else?
>> Please help.
>>
>> Thank you very much,
>> Carlos
>>
>>
>> On Wed, Feb 4, 2015 at 8:23 PM, Wouter Thielen <wouter at morannon.org>
>> wrote:
>>
>>> Hi Carlos,
>>>
>>> I can not clearly see where the columns start or stop, but I hope that
>>> the first character (1, 2, 3, 4) is a separate column, and that the
>>> date+time is in the second column. If that is the case, try passing
>>> "index=as.POSIXct(data$V2, format='%Y%m%d %H%M%S')" to your as.xts function:
>>>
>>> as.xts(data, index=as.POSIXct(data$V2, format='%Y%m%d %H%M%S'))
>>>
>>> You may want to skip the first column as it is not part of the OHLC
>>> structure, so as.xts(data[, -1], index=...).
>>>
>>> For more reference, see http://www.stat.berkeley.edu/~s133/dates.html
>>> and
>>> http://stackoverflow.com/questions/18261160/convert-date-time-format-for-use-in-xts
>>>
>>> Hope this helps.
>>>
>>> Wouter
>>>
>>> On Thu Feb 05 2015 at 10:09:38 AM Liu <carloslewlew at gmail.com> wrote:
>>>
>>>> Hi all,
>>>> I'm trying to plot candle charts from OHLC data frame like this:
>>>>  V1V2V3V4V5
>>>> 120150101 1801001184.131184.441184.041184.13
>>>> 220150101 1802001184.121184.411184.121184.41
>>>> 320150101 1803001184.531184.541184.321184.54
>>>> 420150101 1804001184.601184.601184.431184.51
>>>> Tried to cast it to xts by using:
>>>>
>>>> data<-read.csv(file path)
>>>> chartSeries(as.xts(data),type="candlesticks")
>>>>
>>>> Then I have the error "
>>>>
>>>> Error in as.POSIXlt.character(x, tz, ...) :
>>>>   character string is not in a standard unambiguous format
>>>>
>>>> "
>>>> I am not sure what that means. Maybe it's saying that my date and time
>>>> is
>>>> non standard string? What should I do?
>>>> Please help.
>>>>
>>>> Thanks
>>>> Carlos
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions
>>>> should go.
>>>>
>>>
>>

	[[alternative HTML version deleted]]


From brian at braverock.com  Thu Feb  5 19:24:48 2015
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 05 Feb 2015 12:24:48 -0600
Subject: [R-SIG-Finance] Problems with xts and plotting charts in
	quantmod
In-Reply-To: <CAMLM=SCapp7L6DjR+w=onKGvEMs8hPdvBapoRdxcibH+wnuUJg@mail.gmail.com>
References: <CAMLM=SDXx=bNM4Otchjdvij9YPAjrAg0LYDMztT2DgUpJDj7dQ@mail.gmail.com>	<CACySJQUC9os3BK8wYRSn5SfCjke9dAMkRyxvfvFWWhc7c=C3CQ@mail.gmail.com>	<CAMLM=SBhTtyWFx0jAaM29BhocK4F8VYV36Rc_NH7ig6CYfm=Xg@mail.gmail.com>	<CACySJQXXiyu4v5u1qDZ-n6cmQtj25wMkXVotiA=A+u=-9m3qKg@mail.gmail.com>
	<CAMLM=SCapp7L6DjR+w=onKGvEMs8hPdvBapoRdxcibH+wnuUJg@mail.gmail.com>
Message-ID: <54D3B570.5020203@braverock.com>

at least part of your problem now is that you're storing the data as 
character, rather than numeric.

in your as.xts call, you'll want to remove the first column in the 'x' 
argument,

e.g.

y <- as.xts(x[,-1], order.by=as.POSIXct(x[,1],...))
# the above is not reproducible, it is missing the format argument at least

I also see that you have spaces in your character data, so you may need 
an as.numeric in there too.

Another way to do it would be to make sure that read.csv sees the 
columns as numbers rather than character, which proably has to do with 
your choice of separator.

Regards,

Brian

On 02/05/2015 10:44 AM, Liu wrote:
> I appreciate your help and contribution. I followed the above codes and
> encountered an error:
> *Error in na.omit.xts(x) : unsupported type*
>
> I found other's post on SO with my similar question but unfortunately no
> solution yet:
> http://stackoverflow.com/questions/28255994/error-in-na-omit-xtsx-unsupported-type-with-chartseries
>
> Just post the output here to see if you can see the problem:
>
>> >chartSeries(data.xts,subset="2015-01",type="candlesticks")
> *Error in na.omit.xts(x) : unsupported type*
>> >head(data.xts)
>                      Date Time         Open      High      Low       Close
>
> 2009-03-15 17:00:00 "20090315 170000" " 929.60" " 929.60" " 929.60" "
> 929.60"

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From tjclifford at yahoo.com  Fri Feb  6 00:25:28 2015
From: tjclifford at yahoo.com (Tom Clifford)
Date: Thu, 5 Feb 2015 23:25:28 +0000 (UTC)
Subject: [R-SIG-Finance] Problems with xts and plotting charts
	in	quantmod
In-Reply-To: <54D3B570.5020203@braverock.com>
References: <54D3B570.5020203@braverock.com>
Message-ID: <1199921411.127436.1423178728457.JavaMail.yahoo@mail.yahoo.com>

I've been looking at this today, and I was able to get this working by using a csv file that 
I put the data into, and used the following data and code:
used a csv file:
DateTime,Open,High,Low,Close
20150101 180100,1184.13,1184.44,1184.04,1184.13
20150101 180200,1184.12,1184.41,1184.12,1184.41
20150101 180300,1184.53,1184.54,1184.32,1184.54
20150101 180400,1184.60,1184.60,1184.43,1184.51

code:

library(quantmod)
ColClasses = c("character", "numeric", "numeric", "numeric", "numeric")

ohlcdata <- read.zoo("./data-file.csv", 
???????????????????? index.column = 1, 
???????????????????? sep = ",",
???????????????????? tz='',
???????????????????? format="%Y%m%d %H%M%S", 
???????????????????? colClasses = ColClasses,
???????????????????? header=TRUE)
as.xts(ohlcdata)

chartSeries(ohlcdata,type="candlesticks")

It does produce the chart, and I hope it is what you're looking for.Let me know if you have trouble.
?Tom Clifford MBA '13
Lansing, Michigan 48912
tjclifford at yahoo.com
 

     On Thursday, February 5, 2015 1:25 PM, Brian G. Peterson <brian at braverock.com> wrote:
   

 at least part of your problem now is that you're storing the data as 
character, rather than numeric.

in your as.xts call, you'll want to remove the first column in the 'x' 
argument,

e.g.

y <- as.xts(x[,-1], order.by=as.POSIXct(x[,1],...))
# the above is not reproducible, it is missing the format argument at least

I also see that you have spaces in your character data, so you may need 
an as.numeric in there too.

Another way to do it would be to make sure that read.csv sees the 
columns as numbers rather than character, which proably has to do with 
your choice of separator.

Regards,

Brian

On 02/05/2015 10:44 AM, Liu wrote:
> I appreciate your help and contribution. I followed the above codes and
> encountered an error:
> *Error in na.omit.xts(x) : unsupported type*
>
> I found other's post on SO with my similar question but unfortunately no
> solution yet:
> http://stackoverflow.com/questions/28255994/error-in-na-omit-xtsx-unsupported-type-with-chartseries
>
> Just post the output here to see if you can see the problem:
>
>> >chartSeries(data.xts,subset="2015-01",type="candlesticks")
> *Error in na.omit.xts(x) : unsupported type*
>> >head(data.xts)
>? ? ? ? ? ? ? ? ? ? ? Date Time? ? ? ? Open? ? ? High? ? ? Low? ? ? Close
>
> 2009-03-15 17:00:00 "20090315 170000" " 929.60" " 929.60" " 929.60" "
> 929.60"

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


   
	[[alternative HTML version deleted]]


From carloslewlew at gmail.com  Fri Feb  6 02:20:28 2015
From: carloslewlew at gmail.com (Liu)
Date: Thu, 5 Feb 2015 20:20:28 -0500
Subject: [R-SIG-Finance] Problems with xts and plotting charts in
	quantmod
In-Reply-To: <1199921411.127436.1423178728457.JavaMail.yahoo@mail.yahoo.com>
References: <54D3B570.5020203@braverock.com>
	<1199921411.127436.1423178728457.JavaMail.yahoo@mail.yahoo.com>
Message-ID: <CAMLM=SAXbudcV8U6DKHZR4NqQjNdc_Txsxaiocpsr68Py6d88Q@mail.gmail.com>

Thanks to everyone,
I made the chart in the afternoon. In fact the xts obj is not numeric
because the data has been imported and treated "string as character". I
transferred the OHLC data into 4 columns of numeric values and cbind them
together. That solved the problem so I could do the as.xts cast afterwards.

Much appreciation and hope this would help someone in the future too.



On Thu, Feb 5, 2015 at 6:25 PM, Tom Clifford via R-SIG-Finance <
r-sig-finance at r-project.org> wrote:

> I've been looking at this today, and I was able to get this working by
> using a csv file that
> I put the data into, and used the following data and code:
> used a csv file:
> DateTime,Open,High,Low,Close
> 20150101 180100,1184.13,1184.44,1184.04,1184.13
> 20150101 180200,1184.12,1184.41,1184.12,1184.41
> 20150101 180300,1184.53,1184.54,1184.32,1184.54
> 20150101 180400,1184.60,1184.60,1184.43,1184.51
>
> code:
>
> library(quantmod)
> ColClasses = c("character", "numeric", "numeric", "numeric", "numeric")
>
> ohlcdata <- read.zoo("./data-file.csv",
>                      index.column = 1,
>                      sep = ",",
>                      tz='',
>                      format="%Y%m%d %H%M%S",
>                      colClasses = ColClasses,
>                      header=TRUE)
> as.xts(ohlcdata)
>
> chartSeries(ohlcdata,type="candlesticks")
>
> It does produce the chart, and I hope it is what you're looking for.Let me
> know if you have trouble.
>  Tom Clifford MBA '13
> Lansing, Michigan 48912
> tjclifford at yahoo.com
>
>
>      On Thursday, February 5, 2015 1:25 PM, Brian G. Peterson <
> brian at braverock.com> wrote:
>
>
>  at least part of your problem now is that you're storing the data as
> character, rather than numeric.
>
> in your as.xts call, you'll want to remove the first column in the 'x'
> argument,
>
> e.g.
>
> y <- as.xts(x[,-1], order.by=as.POSIXct(x[,1],...))
> # the above is not reproducible, it is missing the format argument at least
>
> I also see that you have spaces in your character data, so you may need
> an as.numeric in there too.
>
> Another way to do it would be to make sure that read.csv sees the
> columns as numbers rather than character, which proably has to do with
> your choice of separator.
>
> Regards,
>
> Brian
>
> On 02/05/2015 10:44 AM, Liu wrote:
> > I appreciate your help and contribution. I followed the above codes and
> > encountered an error:
> > *Error in na.omit.xts(x) : unsupported type*
> >
> > I found other's post on SO with my similar question but unfortunately no
> > solution yet:
> >
> http://stackoverflow.com/questions/28255994/error-in-na-omit-xtsx-unsupported-type-with-chartseries
> >
> > Just post the output here to see if you can see the problem:
> >
> >> >chartSeries(data.xts,subset="2015-01",type="candlesticks")
> > *Error in na.omit.xts(x) : unsupported type*
> >> >head(data.xts)
> >                      Date Time        Open      High      Low      Close
> >
> > 2009-03-15 17:00:00 "20090315 170000" " 929.60" " 929.60" " 929.60" "
> > 929.60"
>
> --
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From matt at considine.net  Fri Feb  6 16:33:50 2015
From: matt at considine.net (matt at considine.net)
Date: Fri, 06 Feb 2015 09:33:50 -0600
Subject: [R-SIG-Finance] =?utf-8?q?Backing_out_a_portfolio_snapshot=3F?=
Message-ID: <d1b23c4536829d7a87e0164cf837be2b@considine.net>

Hi,
Let's say I have a snapshot of a portfolio's holdings on a given day, as 
well as the trades covering the two years up to that date.  Does anyone 
know of an already-made module or toolchain that would allow me to back 
out the portfolio's holdings on any given day up to that point (but that 
is obviously covered by the trading data)?  While it is a pretty 
straightforward - and tedious - mechanical exercise, I can see that 
there might be a twist in that one needs to create the implied cash 
balance, as all the cash positions are not included (just the ending 
balance).

So I recognize that the result might only be a close approximation.  But 
under the assumption that the portfolio was always effectively fully 
invested I think the results would be robust.

If anyone is aware of a solution out there that is based in R, I'd be 
appreciative.

Regards,
Matt Considine


From ilya.kipnis at gmail.com  Fri Feb  6 16:41:43 2015
From: ilya.kipnis at gmail.com (Ilya Kipnis)
Date: Fri, 6 Feb 2015 10:41:43 -0500
Subject: [R-SIG-Finance] Backing out a portfolio snapshot?
In-Reply-To: <d1b23c4536829d7a87e0164cf837be2b@considine.net>
References: <d1b23c4536829d7a87e0164cf837be2b@considine.net>
Message-ID: <CA+oJuEE7deTCT+hKOS5qiXpE7pLXU+VezyQBSSuE34fLsMEODg@mail.gmail.com>

If it's a rebalancing date, then that's just the weights you have assigned
to it. Beyond that, I would suggest to take the cumulative product of the
returns of your holdings up to the day you're interested in, multiply by
your last allocation, and normalize. In regards to cash, shouldn't you be
using a separate security for that (EG SHY, TLT, some sort of futures from
Quandl, etc.), or at the least, just a column of zeroes in addition to the
rest of your assets to denote cash on the sidelines?

On Fri, Feb 6, 2015 at 10:33 AM, <matt at considine.net> wrote:

> Hi,
> Let's say I have a snapshot of a portfolio's holdings on a given day, as
> well as the trades covering the two years up to that date.  Does anyone
> know of an already-made module or toolchain that would allow me to back out
> the portfolio's holdings on any given day up to that point (but that is
> obviously covered by the trading data)?  While it is a pretty
> straightforward - and tedious - mechanical exercise, I can see that there
> might be a twist in that one needs to create the implied cash balance, as
> all the cash positions are not included (just the ending balance).
>
> So I recognize that the result might only be a close approximation.  But
> under the assumption that the portfolio was always effectively fully
> invested I think the results would be robust.
>
> If anyone is aware of a solution out there that is based in R, I'd be
> appreciative.
>
> Regards,
> Matt Considine
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From brian at braverock.com  Fri Feb  6 21:14:15 2015
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 06 Feb 2015 14:14:15 -0600
Subject: [R-SIG-Finance] Backing out a portfolio snapshot?
In-Reply-To: <d1b23c4536829d7a87e0164cf837be2b@considine.net>
References: <d1b23c4536829d7a87e0164cf837be2b@considine.net>
Message-ID: <54D52097.5030509@braverock.com>

Matt,

If you have all the trades, or at least the starting position and cost 
basis, and all the trades after that point, then blotter can do what you 
want.

see

?addTxns #loading everything in in one go

and

?getPos # for looking up positions as of a certain time

If you don't have the starting position and average cost, you can back 
into the starting position (but not average cost) by entering all the 
trades as though you started flat, and taking the difference to your 
ending position.

As to whether you could back out average cost, you'd have to tell us 
more about your inputs.

Regards,

Brian

On 02/06/2015 09:33 AM, matt at considine.net wrote:
> Hi,
> Let's say I have a snapshot of a portfolio's holdings on a given day, as
> well as the trades covering the two years up to that date.  Does anyone
> know of an already-made module or toolchain that would allow me to back
> out the portfolio's holdings on any given day up to that point (but that
> is obviously covered by the trading data)?  While it is a pretty
> straightforward - and tedious - mechanical exercise, I can see that
> there might be a twist in that one needs to create the implied cash
> balance, as all the cash positions are not included (just the ending
> balance).
>
> So I recognize that the result might only be a close approximation.  But
> under the assumption that the portfolio was always effectively fully
> invested I think the results would be robust.
>
> If anyone is aware of a solution out there that is based in R, I'd be
> appreciative.
>
> Regards,
> Matt Considine
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From matt at considine.net  Fri Feb  6 21:53:34 2015
From: matt at considine.net (matt at considine.net)
Date: Fri, 06 Feb 2015 14:53:34 -0600
Subject: [R-SIG-Finance] =?utf-8?q?Backing_out_a_portfolio_snapshot=3F?=
In-Reply-To: <54D52097.5030509@braverock.com>
References: <d1b23c4536829d7a87e0164cf837be2b@considine.net>
	<54D52097.5030509@braverock.com>
Message-ID: <e6590d1515f73e3c568837791659da1f@considine.net>

Thanks for the replies everyone.  I'm thinking blotter is what I want to 
look into.  What I have is ending portfolio positions with cash balance 
and trades for the two years up to that point.  What I'm trying to find 
is an easy way to either create a portfolio "snapshot" for any date 
given within those two years.  Or create a dataset that has all the 
portfolos in it from which I can select dates.  I'm indifferent as to 
the approach - just looking to leverage what's already there.
Thanks,
Matt

On 2015-02-06 14:14, Brian G. Peterson wrote:
> Matt,
> 
> If you have all the trades, or at least the starting position and cost
> basis, and all the trades after that point, then blotter can do what
> you want.
> 
> see
> 
> ?addTxns #loading everything in in one go
> 
> and
> 
> ?getPos # for looking up positions as of a certain time
> 
> If you don't have the starting position and average cost, you can back
> into the starting position (but not average cost) by entering all the
> trades as though you started flat, and taking the difference to your
> ending position.
> 
> As to whether you could back out average cost, you'd have to tell us
> more about your inputs.
> 
> Regards,
> 
> Brian
> 
> On 02/06/2015 09:33 AM, matt at considine.net wrote:
>> Hi,
>> Let's say I have a snapshot of a portfolio's holdings on a given day, 
>> as
>> well as the trades covering the two years up to that date.  Does 
>> anyone
>> know of an already-made module or toolchain that would allow me to 
>> back
>> out the portfolio's holdings on any given day up to that point (but 
>> that
>> is obviously covered by the trading data)?  While it is a pretty
>> straightforward - and tedious - mechanical exercise, I can see that
>> there might be a twist in that one needs to create the implied cash
>> balance, as all the cash positions are not included (just the ending
>> balance).
>> 
>> So I recognize that the result might only be a close approximation.  
>> But
>> under the assumption that the portfolio was always effectively fully
>> invested I think the results would be robust.
>> 
>> If anyone is aware of a solution out there that is based in R, I'd be
>> appreciative.
>> 
>> Regards,
>> Matt Considine
>> 
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R 
>> questions
>> should go.


From junluke at gmail.com  Mon Feb  9 04:29:17 2015
From: junluke at gmail.com (jun wang)
Date: Sun, 8 Feb 2015 22:29:17 -0500
Subject: [R-SIG-Finance] dccfit funtion in rmgarch
Message-ID: <CAPD4hGD3inNJKQ8GAG4o80D7WfR1bV8c_uTnTjSnjeM336Df5g@mail.gmail.com>

Dear R users,

I am using the dccfit function for my analysis, but keeping get the
following error:

Error in .sgarchfilter(spec = spec, data = data, out.sample = out.sample,
 :
  unused argument (realizedVol = NULL)

Here is my sample code:

library(rmgarch)
data(dji30retw)
data=dji30retw[,2:3]

xspec = ugarchspec(variance.model=list(model="sGARCH", garchOrder=c(1,1)),
                   mean.model=list(armaOrder=c(0,0), include.mean=FALSE),
                   distribution.model="norm")

uspec = multispec(replicate(2, xspec))

spec1 = dccspec(uspec = uspec, dccOrder = c(1, 1), distribution = 'mvnorm')

fit1 = dccfit(spec=spec1, data = data)


Can anyone help me figure it out? Thanks in advance.

Jun

	[[alternative HTML version deleted]]


From alexios at 4dscape.com  Mon Feb  9 13:02:57 2015
From: alexios at 4dscape.com (alexios)
Date: Mon, 09 Feb 2015 12:02:57 +0000
Subject: [R-SIG-Finance] dccfit funtion in rmgarch
In-Reply-To: <CAPD4hGD3inNJKQ8GAG4o80D7WfR1bV8c_uTnTjSnjeM336Df5g@mail.gmail.com>
References: <CAPD4hGD3inNJKQ8GAG4o80D7WfR1bV8c_uTnTjSnjeM336Df5g@mail.gmail.com>
Message-ID: <54D8A1F1.3010708@4dscape.com>

Please provide the output of sessionInfo(), or just update 
rugarch&rmgarch to their latest versions with R 3.1.2


Alexios

On 09/02/2015 03:29, jun wang wrote:
> Dear R users,
>
> I am using the dccfit function for my analysis, but keeping get the
> following error:
>
> Error in .sgarchfilter(spec = spec, data = data, out.sample = out.sample,
>   :
>    unused argument (realizedVol = NULL)
>
> Here is my sample code:
>
> library(rmgarch)
> data(dji30retw)
> data=dji30retw[,2:3]
>
> xspec = ugarchspec(variance.model=list(model="sGARCH", garchOrder=c(1,1)),
>                     mean.model=list(armaOrder=c(0,0), include.mean=FALSE),
>                     distribution.model="norm")
>
> uspec = multispec(replicate(2, xspec))
>
> spec1 = dccspec(uspec = uspec, dccOrder = c(1, 1), distribution = 'mvnorm')
>
> fit1 = dccfit(spec=spec1, data = data)
>
>
> Can anyone help me figure it out? Thanks in advance.
>
> Jun
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>


From zadig_1 at excite.com  Mon Feb  9 19:52:50 2015
From: zadig_1 at excite.com (ce)
Date: Mon, 09 Feb 2015 13:52:50 -0500
Subject: [R-SIG-Finance] quantmod can't get fx currencies ?
Message-ID: <20150209135250.26585@web007.roc2.bluetie.com>


Dear all,

Recently quantmod package can't get FX curries any more . I use R 3.1.2 , updated quantmod to latest. 

> library(quantmod)
Loading required package: xts
Loading required package: zoo

Attaching package: ?zoo?

The following objects are masked from ?package:base?:

    as.Date, as.Date.numeric

Loading required package: TTR
Version 0.4-0 included new data defaults. See ?getSymbols.

> getFX("EUR/USD",from="2015-01-01")
Error in download.file(paste(oanda.URL, from.date, to.date, "exch=", currency.pair[1],  :
  cannot open URL 'http://www.oanda.com/convert/fxhistory?lang=en&date1=01%2F01%2F15&date=02%2F09%2F15&date_fmt=us&exch=EUR&expr2=USD&margin_fixed=0&SUBMIT=Get+Table&format=CSV&redirected=1'

For stocks still works though :

> getSymbols('F')
[1] "F"


From josh.m.ulrich at gmail.com  Mon Feb  9 20:08:04 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 9 Feb 2015 13:08:04 -0600
Subject: [R-SIG-Finance] quantmod can't get fx currencies ?
In-Reply-To: <20150209135250.26585@web007.roc2.bluetie.com>
References: <20150209135250.26585@web007.roc2.bluetie.com>
Message-ID: <CAPPM_gRwgz1SLNspRW1RiL+Yj5jsxAXRW597Yr+6=BaBwuu7yA@mail.gmail.com>

Oanda changed their URL structure and file format. I fixed this over
the weekend:
https://github.com/joshuaulrich/quantmod/issues/36

On Mon, Feb 9, 2015 at 12:52 PM, ce <zadig_1 at excite.com> wrote:
>
> Dear all,
>
> Recently quantmod package can't get FX curries any more . I use R 3.1.2 , updated quantmod to latest.
>
>> library(quantmod)
> Loading required package: xts
> Loading required package: zoo
>
> Attaching package: ?zoo?
>
> The following objects are masked from ?package:base?:
>
>     as.Date, as.Date.numeric
>
> Loading required package: TTR
> Version 0.4-0 included new data defaults. See ?getSymbols.
>
>> getFX("EUR/USD",from="2015-01-01")
> Error in download.file(paste(oanda.URL, from.date, to.date, "exch=", currency.pair[1],  :
>   cannot open URL 'http://www.oanda.com/convert/fxhistory?lang=en&date1=01%2F01%2F15&date=02%2F09%2F15&date_fmt=us&exch=EUR&expr2=USD&margin_fixed=0&SUBMIT=Get+Table&format=CSV&redirected=1'
>
> For stocks still works though :
>
>> getSymbols('F')
> [1] "F"
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From rsherry8 at comcast.net  Sun Feb 15 23:54:54 2015
From: rsherry8 at comcast.net (Robert Sherry)
Date: Sun, 15 Feb 2015 17:54:54 -0500
Subject: [R-SIG-Finance] Gold
Message-ID: <54E123BE.1060908@comcast.net>


How do I get the current price of Gold using R?

I thank the group in advance for their responses.

Bob


From ilya.kipnis at gmail.com  Mon Feb 16 00:11:47 2015
From: ilya.kipnis at gmail.com (Ilya Kipnis)
Date: Sun, 15 Feb 2015 18:11:47 -0500
Subject: [R-SIG-Finance] Gold
In-Reply-To: <54E123BE.1060908@comcast.net>
References: <54E123BE.1060908@comcast.net>
Message-ID: <CA+oJuEE7_bEbP4pCNwYs10_LxQAfLKxq3nPaOqYhEfT3Ooyt8g@mail.gmail.com>

Robert,

You can get the GLD data from Yahoo Finance with:

require(quantmod)
getSymbols("GLD", from="1990-01-01")

Or, for the open-interest cross from quandl,

require(IKTrading)
CME_GC <- quandClean("CHRIS/CME_GC", start_date=from, end_date=to,
verbose=verbose) #Gold
Hope this helps.

-Ilya

On Sun, Feb 15, 2015 at 5:54 PM, Robert Sherry <rsherry8 at comcast.net> wrote:

>
> How do I get the current price of Gold using R?
>
> I thank the group in advance for their responses.
>
> Bob
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From rsherry8 at comcast.net  Mon Feb 16 01:32:09 2015
From: rsherry8 at comcast.net (Robert Sherry)
Date: Sun, 15 Feb 2015 19:32:09 -0500
Subject: [R-SIG-Finance] Gold
In-Reply-To: <CA+oJuEE7_bEbP4pCNwYs10_LxQAfLKxq3nPaOqYhEfT3Ooyt8g@mail.gmail.com>
References: <54E123BE.1060908@comcast.net>
	<CA+oJuEE7_bEbP4pCNwYs10_LxQAfLKxq3nPaOqYhEfT3Ooyt8g@mail.gmail.com>
Message-ID: <54E13A89.8080208@comcast.net>

Thank you for your response. The symbol GLD is not really going to work 
for me because it is my understanding how much gold GLF represents 
varies over time. Therefore,
I thought I would use IKTrading. However, when I try installing it, I 
run into the following problem:

devtools::install_github("IlyaKipnis/IKTrading")
Downloading github repo IlyaKipnis/IKTrading at master
Installing IKTrading
Installing dependencies for IKTrading:
quantstrat, quantstrat
Installing packages into ?C:/Users/Bob/Documents/R/win-library/3.1?
(as ?lib? is unspecified)
"C:/PROGRA~1/R/R-31~1.2/bin/x64/R" --vanilla CMD INSTALL  \
"C:/Users/Bob/AppData/Local/Temp/Rtmp0OTNpS/devtools1710548f5fb4/IlyaKipnis-IKTrading-0b4e0e5" 
\
   --library="C:/Users/Bob/Documents/R/win-library/3.1" --install-tests

ERROR: dependency 'quantstrat' is not available for package 'IKTrading'
* removing 'C:/Users/Bob/Documents/R/win-library/3.1/IKTrading'
Error: Command failed (1)
In addition: Warning message:
package ?quantstrat? is not available (for R version 3.1.2)

So, I thought I would install the package quantstrat. However, that does 
not work either.
 > install.packages("quantstrat")
Installing package into ?C:/Users/Bob/Documents/R/win-library/3.1?
(as ?lib? is unspecified)
Warning message:
package ?quantstrat? is not available (for R version 3.1.2)

I am using version 3.1.2 of R. What am I doing wrong?

Bob

On 2/15/2015 6:11 PM, Ilya Kipnis wrote:
> Robert,
>
> You can get the GLD data from Yahoo Finance with:
>
> require(quantmod)
> getSymbols("GLD", from="1990-01-01")
>
> Or, for the open-interest cross from quandl,
>
> require(IKTrading)
> |CME_GC <- ||quandClean||(||"CHRIS/CME_GC"||, start_date=from, 
> end_date=to, verbose=verbose) ||#Gold |
> Hope this helps.
>
> -Ilya
>
> On Sun, Feb 15, 2015 at 5:54 PM, Robert Sherry <rsherry8 at comcast.net 
> <mailto:rsherry8 at comcast.net>> wrote:
>
>
>     How do I get the current price of Gold using R?
>
>     I thank the group in advance for their responses.
>
>     Bob
>
>     _______________________________________________
>     R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org>
>     mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>     -- Subscriber-posting only. If you want to post, subscribe first.
>     -- Also note that this is not the r-help list where general R
>     questions should go.
>
>


	[[alternative HTML version deleted]]


From michael.weylandt at gmail.com  Mon Feb 16 01:47:23 2015
From: michael.weylandt at gmail.com (Michael Weylandt)
Date: Sun, 15 Feb 2015 19:47:23 -0500
Subject: [R-SIG-Finance] Gold
In-Reply-To: <54E13A89.8080208@comcast.net>
References: <54E123BE.1060908@comcast.net>
	<CA+oJuEE7_bEbP4pCNwYs10_LxQAfLKxq3nPaOqYhEfT3Ooyt8g@mail.gmail.com>
	<54E13A89.8080208@comcast.net>
Message-ID: <92C8457E-E5BF-4503-968F-66A6242589F9@gmail.com>



> On Feb 15, 2015, at 7:32 PM, Robert Sherry <rsherry8 at comcast.net> wrote:
> 
> Thank you for your response. The symbol GLD is not really going to work 
> for me because it is my understanding how much gold GLF represents 
> varies over time. Therefore,
> I thought I would use IKTrading. However, when I try installing it, I 
> run into the following problem:
> 
> devtools::install_github("IlyaKipnis/IKTrading")
> Downloading github repo IlyaKipnis/IKTrading at master
> Installing IKTrading
> Installing dependencies for IKTrading:
> quantstrat, quantstrat
> Installing packages into ?C:/Users/Bob/Documents/R/win-library/3.1?
> (as ?lib? is unspecified)
> "C:/PROGRA~1/R/R-31~1.2/bin/x64/R" --vanilla CMD INSTALL  \
> "C:/Users/Bob/AppData/Local/Temp/Rtmp0OTNpS/devtools1710548f5fb4/IlyaKipnis-IKTrading-0b4e0e5" 
> \
>   --library="C:/Users/Bob/Documents/R/win-library/3.1" --install-tests
> 
> ERROR: dependency 'quantstrat' is not available for package 'IKTrading'
> * removing 'C:/Users/Bob/Documents/R/win-library/3.1/IKTrading'
> Error: Command failed (1)
> In addition: Warning message:
> package ?quantstrat? is not available (for R version 3.1.2)
> 
> So, I thought I would install the package quantstrat. However, that does 
> not work either.
>> install.packages("quantstrat")
> Installing package into ?C:/Users/Bob/Documents/R/win-library/3.1?
> (as ?lib? is unspecified)
> Warning message:
> package ?quantstrat? is not available (for R version 3.1.2)
> 
> I am using version 3.1.2 of R. What am I doing wrong?

Not on CRAN. See https://r-forge.r-project.org/R/?group_id=316


> 
> Bob
> 
>> On 2/15/2015 6:11 PM, Ilya Kipnis wrote:
>> Robert,
>> 
>> You can get the GLD data from Yahoo Finance with:
>> 
>> require(quantmod)
>> getSymbols("GLD", from="1990-01-01")
>> 
>> Or, for the open-interest cross from quandl,
>> 
>> require(IKTrading)
>> |CME_GC <- ||quandClean||(||"CHRIS/CME_GC"||, start_date=from, 
>> end_date=to, verbose=verbose) ||#Gold |
>> Hope this helps.
>> 
>> -Ilya
>> 
>> On Sun, Feb 15, 2015 at 5:54 PM, Robert Sherry <rsherry8 at comcast.net 
>> <mailto:rsherry8 at comcast.net>> wrote:
>> 
>> 
>>    How do I get the current price of Gold using R?
>> 
>>    I thank the group in advance for their responses.
>> 
>>    Bob
>> 
>>    _______________________________________________
>>    R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org>
>>    mailing list
>>    https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>    -- Subscriber-posting only. If you want to post, subscribe first.
>>    -- Also note that this is not the r-help list where general R
>>    questions should go.
> 
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From matt at considine.net  Mon Feb 16 14:02:18 2015
From: matt at considine.net (Matt Considine)
Date: Mon, 16 Feb 2015 08:02:18 -0500
Subject: [R-SIG-Finance] Gold
In-Reply-To: <mailman.6.1424084404.7886.r-sig-finance@r-project.org>
References: <mailman.6.1424084404.7886.r-sig-finance@r-project.org>
Message-ID: <54E1EA5A.7040209@considine.net>

Do this first
   **|install.packages("quantstrat", repos="http://R-Forge.R-project.org")

The code provided before worked fine for me on R 3.1.2 on Vista
Matt
|**



---
This email has been checked for viruses by Avast antivirus software.


	[[alternative HTML version deleted]]


From geraldmorrison at gmail.com  Mon Feb 16 17:04:07 2015
From: geraldmorrison at gmail.com (Gerald Morrison)
Date: Mon, 16 Feb 2015 09:04:07 -0700
Subject: [R-SIG-Finance] How to install IKTrading and Quantstrat
Message-ID: <CAA7_VSinWGpbWU=t24LNmGiLSbewT4o2En3+3rt7YCPBd8ognw@mail.gmail.com>

In response to previous post on retrieving gold futures data, I thought I
would provide details on installing IKTrading and Quantstrat which are both
excellent resources. This is for the newbies to R (like myself) who find it
a bit confusing to get all the dependencies in place for packages not on
CRAN. Here are the steps:

install.packages("devtools")
require(devtools)
install.packages("FinancialInstrument", repos="http://R-Forge.R-project.org
<http://r-forge.r-project.org/>")
install.packages("blotter", repos="http://R-Forge.R-project.org
<http://r-forge.r-project.org/>")
install.packages("quantstrat", repos="http://R-Forge.R-project.org
<http://r-forge.r-project.org/>")
install.packages("foreach")
install_github("IlyaKipnis/IKTrading")

As a side note, quandClean is excellent for getting Quandl futures data -
including gold. Ilya Kipnis has kindly provided this functionality in his
IKTrading package and you see examples and code for retrieving daily
futures data from Ilya's blog post here:
https://quantstrattrader.wordpress.com/2014/07/22/intermission-a-data-file-for-futures-data-from-quandl/

For those working with ETF's like GLD who wish to extend the
data further back then the ETF's inception date (Gold and Bonds back to
1978!), Ilya also provides examples and code here:
https://quantstrattrader.wordpress.com/2014/11/02/its-amazing-how-well-dumb-things-get-marketed/

	[[alternative HTML version deleted]]


From isak.engdahl at gmail.com  Tue Feb 24 13:33:45 2015
From: isak.engdahl at gmail.com (Isak Engdahl)
Date: Tue, 24 Feb 2015 13:33:45 +0100
Subject: [R-SIG-Finance] Quantmod Yahoo ticker download error
Message-ID: <CAO77-6vJ+3geDZDTGodFxP-+nq51mAo+R-rZ7MksvwBstYuvmg@mail.gmail.com>

Hello,

Tickers with - get error when trying to download ZB-PA but not ZBK.

When I manually download it from Yahoo I get this link, that works.

http://real-chart.finance.yahoo.com/table.csv?s=ZB-PA&a=00&b=2&c=2015&d=01&e=23&f=2015&g=d&ignore=.csv

The Quantmod tried to download from this link, which does not exist.
http://ichart.finance.yahoo.com/table.csv?s=ZB-PA&a=0&b=01&c=2015&d=1&e=24&f=2015&g=d&
*q=q&y=0&z=ZB-PA&x*=.csv

If this part could be replaced "q=q&y=0&z=ZB-PA&x" with "d&ignore" and it
will work both with ZB-PA and ZBK.

Maybe this forum is not the correct place to suggest this improvement,
please point me in right direction.

Maybe someone can help me out to fix this script error?
My script stop writing to the database if one of these tickers get this
error described above (no data exist for symbol ZB-PA to be stored in the
database. Anyone know how to ignore tickers that get this error so the
script can continue to load all tickers that has downloaded data?

Please find attached scripts.

Error when trying to download ticker data from Yahoo Finance for ZB-PA.

=================================
*"Downloading ZB-PA*
*Error in download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,
 : *
*  cannot open URL
'http://ichart.finance.yahoo.com/table.csv?s=ZB-PA&a=0&b=01&c=2015&d=1&e=24&f=2015&g=d&q=q&y=0&z=ZB-PA&x=.csv
<http://ichart.finance.yahoo.com/table.csv?s=ZB-PA&a=0&b=01&c=2015&d=1&e=24&f=2015&g=d&q=q&y=0&z=ZB-PA&x=.csv>'*
*In addition: Warning message:*
*In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :*
*  InternetOpenUrl failed: 'The operation timed out'*
*, error - did not download (likely due to rate limiting*
*Downloading ZBK*
*Warning message:*
*In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :*
*  downloaded length 1653 != reported length 200*
*> View(clean.symbols)*
*> "*
=============================

========================================
> # Save data to MySQL
>
> library(RMySQL)
>
> con <- dbConnect(RMySQL::MySQL(), host="localhost",
user="donedge",password="p at ssw0rd", dbname= "daily")
>
> # Loop through each symbol
>
> for (i in 1:nrow(clean.symbols)){
+   symbol <- clean.symbols[i,]$Symbol
+   df = data.frame(Date=index(get(symbol)), coredata(get(symbol)))
+   setNames(df,c("Date","Open","High","Low","Close","Volume","Adjusted"))
+
+   cat("Storing",symbol,"\n")
+
+   if(dbExistsTable(con, symbol)){
+     dbRemoveTable(con, symbol)
+   }
+
+   dbWriteTable(con, name=symbol, value=df, row.names=FALSE, overwrite =
TRUE)
+
+ }
*Error in get(symbol) : object 'ZB-PA' not found*
>
========================================

Kind Regards
Isak
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20150224/2923030c/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: downloadData.R
Type: application/octet-stream
Size: 862 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20150224/2923030c/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mysqlData.R
Type: application/octet-stream
Size: 593 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20150224/2923030c/attachment-0001.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: init.R
Type: application/octet-stream
Size: 72 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20150224/2923030c/attachment-0002.obj>

From hs13322 at my.bristol.ac.uk  Tue Feb 24 14:55:22 2015
From: hs13322 at my.bristol.ac.uk (Marco Sun)
Date: Tue, 24 Feb 2015 21:55:22 +0800
Subject: [R-SIG-Finance] Quantmod Yahoo ticker download error
In-Reply-To: <CAO77-6vJ+3geDZDTGodFxP-+nq51mAo+R-rZ7MksvwBstYuvmg@mail.gmail.com>
References: <CAO77-6vJ+3geDZDTGodFxP-+nq51mAo+R-rZ7MksvwBstYuvmg@mail.gmail.com>
Message-ID: <BE4A6A4C-1626-4BD0-B07A-020A31EB96F6@my.bristol.ac.uk>

Hi Isak,

I have checked your scripts and there is no error reported on my platform. getSymbols correctly downloads historical prices for `ZB-PA`
> library(quantstrat)
> all.symbols <- stockSymbols(c("NYSE"),sort.by=c("MarketCap","Exchange"),quiet=TRUE)
> biggest.symbols <- tail(all.symbols,n=5)
> clean.symbols <- subset(biggest.symbols, select = c("Symbol","Name","LastSale","MarketCap","Sector"))
> row.names(clean.symbols) <- NULL
> i=1 #trying i=1 instead of doing the entire loop
> symbol <- clean.symbols[i,]$Symbol
> try (getSymbols(symbol, verbose=FALSE, warnings=FALSE, from='2015-01-01'))
[1] "ZB-PA?
And a dataframe named `df` can also be constructed via your script
> df = data.frame(Date=index(get(symbol)), coredata(get(symbol)))

I would recommend you to update `quantmod` package if it is not the latest released version on your console.

Best,
Marco

On 24 Feb 2015, at 08:33 pm, Isak Engdahl <isak.engdahl at gmail.com> wrote:

> Hello,
> 
> Tickers with - get error when trying to download ZB-PA but not ZBK.
> 
> When I manually download it from Yahoo I get this link, that works.
> 
> http://real-chart.finance.yahoo.com/table.csv?s=ZB-PA&a=00&b=2&c=2015&d=01&e=23&f=2015&g=d&ignore=.csv
> 
> The Quantmod tried to download from this link, which does not exist.
> http://ichart.finance.yahoo.com/table.csv?s=ZB-PA&a=0&b=01&c=2015&d=1&e=24&f=2015&g=d&q=q&y=0&z=ZB-PA&x=.csv
> 
> If this part could be replaced "q=q&y=0&z=ZB-PA&x" with "d&ignore" and it will work both with ZB-PA and ZBK.
> 
> Maybe this forum is not the correct place to suggest this improvement, please point me in right direction.
> 
> Maybe someone can help me out to fix this script error?
> My script stop writing to the database if one of these tickers get this error described above (no data exist for symbol ZB-PA to be stored in the database. Anyone know how to ignore tickers that get this error so the script can continue to load all tickers that has downloaded data?
> 
> Please find attached scripts.
> 
> Error when trying to download ticker data from Yahoo Finance for ZB-PA.
> 
> =================================
> "Downloading ZB-PA
> Error in download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  : 
>   cannot open URL 'http://ichart.finance.yahoo.com/table.csv?s=ZB-PA&a=0&b=01&c=2015&d=1&e=24&f=2015&g=d&q=q&y=0&z=ZB-PA&x=.csv'
> In addition: Warning message:
> In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
>   InternetOpenUrl failed: 'The operation timed out'
> , error - did not download (likely due to rate limiting
> Downloading ZBK
> Warning message:
> In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
>   downloaded length 1653 != reported length 200
> > View(clean.symbols)
> > "
> =============================
> 
> ========================================
> > # Save data to MySQL
> > 
> > library(RMySQL)
> > 
> > con <- dbConnect(RMySQL::MySQL(), host="localhost", user="donedge",password="p at ssw0rd", dbname= "daily")
> > 
> > # Loop through each symbol
> > 
> > for (i in 1:nrow(clean.symbols)){
> +   symbol <- clean.symbols[i,]$Symbol
> +   df = data.frame(Date=index(get(symbol)), coredata(get(symbol)))
> +   setNames(df,c("Date","Open","High","Low","Close","Volume","Adjusted"))
> +   
> +   cat("Storing",symbol,"\n")
> +   
> +   if(dbExistsTable(con, symbol)){
> +     dbRemoveTable(con, symbol)
> +   }
> +   
> +   dbWriteTable(con, name=symbol, value=df, row.names=FALSE, overwrite = TRUE)
> +   
> + }
> Error in get(symbol) : object 'ZB-PA' not found
> > 
> ========================================
> 
> Kind Regards
> Isak
> <downloadData.R><mysqlData.R><init.R>_______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


	[[alternative HTML version deleted]]


From hs13322 at my.bristol.ac.uk  Tue Feb 24 14:56:46 2015
From: hs13322 at my.bristol.ac.uk (Marco Sun)
Date: Tue, 24 Feb 2015 21:56:46 +0800
Subject: [R-SIG-Finance] Quantmod Yahoo ticker download error
In-Reply-To: <CAO77-6vJ+3geDZDTGodFxP-+nq51mAo+R-rZ7MksvwBstYuvmg@mail.gmail.com>
References: <CAO77-6vJ+3geDZDTGodFxP-+nq51mAo+R-rZ7MksvwBstYuvmg@mail.gmail.com>
Message-ID: <D96444E0-E1D1-4CDF-9625-04F42A5E3BB0@my.bristol.ac.uk>

Hi Isak,

I have checked your scripts and there is no error reported on my platform. getSymbols correctly downloads historical prices for `ZB-PA`
> library(quantstrat)
> all.symbols <- stockSymbols(c("NYSE"),sort.by=c("MarketCap","Exchange"),quiet=TRUE)
> biggest.symbols <- tail(all.symbols,n=5)
> clean.symbols <- subset(biggest.symbols, select = c("Symbol","Name","LastSale","MarketCap","Sector"))
> row.names(clean.symbols) <- NULL
> i=1 #trying i=1 instead of doing the entire loop
> symbol <- clean.symbols[i,]$Symbol
> try (getSymbols(symbol, verbose=FALSE, warnings=FALSE, from='2015-01-01'))
[1] "ZB-PA?
And a dataframe named `df` can also be constructed via your script
> df = data.frame(Date=index(get(symbol)), coredata(get(symbol)))

I would recommend you to update `quantmod` package if it is not the latest released version on your console.

Best,
Marco

On 24 Feb 2015, at 08:33 pm, Isak Engdahl <isak.engdahl at gmail.com> wrote:

> Hello,
> 
> Tickers with - get error when trying to download ZB-PA but not ZBK.
> 
> When I manually download it from Yahoo I get this link, that works.
> 
> http://real-chart.finance.yahoo.com/table.csv?s=ZB-PA&a=00&b=2&c=2015&d=01&e=23&f=2015&g=d&ignore=.csv
> 
> The Quantmod tried to download from this link, which does not exist.
> http://ichart.finance.yahoo.com/table.csv?s=ZB-PA&a=0&b=01&c=2015&d=1&e=24&f=2015&g=d&q=q&y=0&z=ZB-PA&x=.csv
> 
> If this part could be replaced "q=q&y=0&z=ZB-PA&x" with "d&ignore" and it will work both with ZB-PA and ZBK.
> 
> Maybe this forum is not the correct place to suggest this improvement, please point me in right direction.
> 
> Maybe someone can help me out to fix this script error?
> My script stop writing to the database if one of these tickers get this error described above (no data exist for symbol ZB-PA to be stored in the database. Anyone know how to ignore tickers that get this error so the script can continue to load all tickers that has downloaded data?
> 
> Please find attached scripts.
> 
> Error when trying to download ticker data from Yahoo Finance for ZB-PA.
> 
> =================================
> "Downloading ZB-PA
> Error in download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  : 
>   cannot open URL 'http://ichart.finance.yahoo.com/table.csv?s=ZB-PA&a=0&b=01&c=2015&d=1&e=24&f=2015&g=d&q=q&y=0&z=ZB-PA&x=.csv'
> In addition: Warning message:
> In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
>   InternetOpenUrl failed: 'The operation timed out'
> , error - did not download (likely due to rate limiting
> Downloading ZBK
> Warning message:
> In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
>   downloaded length 1653 != reported length 200
> > View(clean.symbols)
> > "
> =============================
> 
> ========================================
> > # Save data to MySQL
> > 
> > library(RMySQL)
> > 
> > con <- dbConnect(RMySQL::MySQL(), host="localhost", user="donedge",password="p at ssw0rd", dbname= "daily")
> > 
> > # Loop through each symbol
> > 
> > for (i in 1:nrow(clean.symbols)){
> +   symbol <- clean.symbols[i,]$Symbol
> +   df = data.frame(Date=index(get(symbol)), coredata(get(symbol)))
> +   setNames(df,c("Date","Open","High","Low","Close","Volume","Adjusted"))
> +   
> +   cat("Storing",symbol,"\n")
> +   
> +   if(dbExistsTable(con, symbol)){
> +     dbRemoveTable(con, symbol)
> +   }
> +   
> +   dbWriteTable(con, name=symbol, value=df, row.names=FALSE, overwrite = TRUE)
> +   
> + }
> Error in get(symbol) : object 'ZB-PA' not found
> > 
> ========================================
> 
> Kind Regards
> Isak
> <downloadData.R><mysqlData.R><init.R>_______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


	[[alternative HTML version deleted]]


From pierre at lequeux.org  Tue Feb 24 15:02:47 2015
From: pierre at lequeux.org (Pierre Org)
Date: Tue, 24 Feb 2015 14:02:47 -0000
Subject: [R-SIG-Finance] Quantmod Yahoo ticker download error
In-Reply-To: <BE4A6A4C-1626-4BD0-B07A-020A31EB96F6@my.bristol.ac.uk>
References: <CAO77-6vJ+3geDZDTGodFxP-+nq51mAo+R-rZ7MksvwBstYuvmg@mail.gmail.com>
	<BE4A6A4C-1626-4BD0-B07A-020A31EB96F6@my.bristol.ac.uk>
Message-ID: <000901d0503a$9213a2b0$b63ae810$@org>

Hi 

Thank you all for a great and very useful thread. Do you know if there is a package that can help to access the same type of information than stockSymbols fort the London stock exchange ? i.e download of price and market caps ? I am working on a Black & Litterman project and would like to somehow automatise a reverse optimisation of the expected returns for each sectors For this, I  need to download the market caps per stock/sector as well as the closing price...any help / pointer would be appreciated.


Thks

Pierre

-----Original Message-----
From: R-SIG-Finance [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Marco Sun
Sent: 24 February 2015 13:55
To: Isak Engdahl
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Quantmod Yahoo ticker download error

Hi Isak,

I have checked your scripts and there is no error reported on my platform. getSymbols correctly downloads historical prices for `ZB-PA`
> library(quantstrat)
> all.symbols <- 
> stockSymbols(c("NYSE"),sort.by=c("MarketCap","Exchange"),quiet=TRUE)
> biggest.symbols <- tail(all.symbols,n=5) clean.symbols <- 
> subset(biggest.symbols, select = 
> c("Symbol","Name","LastSale","MarketCap","Sector"))
> row.names(clean.symbols) <- NULL
> i=1 #trying i=1 instead of doing the entire loop symbol <- 
> clean.symbols[i,]$Symbol try (getSymbols(symbol, verbose=FALSE, 
> warnings=FALSE, from='2015-01-01'))
[1] "ZB-PA 
And a dataframe named `df` can also be constructed via your script
> df = data.frame(Date=index(get(symbol)), coredata(get(symbol)))

I would recommend you to update `quantmod` package if it is not the latest released version on your console.

Best,
Marco

On 24 Feb 2015, at 08:33 pm, Isak Engdahl <isak.engdahl at gmail.com> wrote:

> Hello,
> 
> Tickers with - get error when trying to download ZB-PA but not ZBK.
> 
> When I manually download it from Yahoo I get this link, that works.
> 
> http://real-chart.finance.yahoo.com/table.csv?s=ZB-PA&a=00&b=2&c=2015&
> d=01&e=23&f=2015&g=d&ignore=.csv
> 
> The Quantmod tried to download from this link, which does not exist.
> http://ichart.finance.yahoo.com/table.csv?s=ZB-PA&a=0&b=01&c=2015&d=1&
> e=24&f=2015&g=d&q=q&y=0&z=ZB-PA&x=.csv
> 
> If this part could be replaced "q=q&y=0&z=ZB-PA&x" with "d&ignore" and it will work both with ZB-PA and ZBK.
> 
> Maybe this forum is not the correct place to suggest this improvement, please point me in right direction.
> 
> Maybe someone can help me out to fix this script error?
> My script stop writing to the database if one of these tickers get this error described above (no data exist for symbol ZB-PA to be stored in the database. Anyone know how to ignore tickers that get this error so the script can continue to load all tickers that has downloaded data?
> 
> Please find attached scripts.
> 
> Error when trying to download ticker data from Yahoo Finance for ZB-PA.
> 
> =================================
> "Downloading ZB-PA
> Error in download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  : 
>   cannot open URL 'http://ichart.finance.yahoo.com/table.csv?s=ZB-PA&a=0&b=01&c=2015&d=1&e=24&f=2015&g=d&q=q&y=0&z=ZB-PA&x=.csv'
> In addition: Warning message:
> In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
>   InternetOpenUrl failed: 'The operation timed out'
> , error - did not download (likely due to rate limiting Downloading 
> ZBK Warning message:
> In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
>   downloaded length 1653 != reported length 200
> > View(clean.symbols)
> > "
> =============================
> 
> ========================================
> > # Save data to MySQL
> > 
> > library(RMySQL)
> > 
> > con <- dbConnect(RMySQL::MySQL(), host="localhost", 
> > user="donedge",password="p at ssw0rd", dbname= "daily")
> > 
> > # Loop through each symbol
> > 
> > for (i in 1:nrow(clean.symbols)){
> +   symbol <- clean.symbols[i,]$Symbol
> +   df = data.frame(Date=index(get(symbol)), coredata(get(symbol)))
> +   
> + setNames(df,c("Date","Open","High","Low","Close","Volume","Adjusted"
> + ))
> +   
> +   cat("Storing",symbol,"\n")
> +   
> +   if(dbExistsTable(con, symbol)){
> +     dbRemoveTable(con, symbol)
> +   }
> +   
> +   dbWriteTable(con, name=symbol, value=df, row.names=FALSE, 
> + overwrite = TRUE)
> +   
> + }
> Error in get(symbol) : object 'ZB-PA' not found
> > 
> ========================================
> 
> Kind Regards
> Isak
> <downloadData.R><mysqlData.R><init.R>_________________________________
> ______________ R-SIG-Finance at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


	[[alternative HTML version deleted]]


From isak.engdahl at gmail.com  Tue Feb 24 16:02:11 2015
From: isak.engdahl at gmail.com (Isak Engdahl)
Date: Tue, 24 Feb 2015 16:02:11 +0100
Subject: [R-SIG-Finance] Quantmod Yahoo ticker download error
In-Reply-To: <D96444E0-E1D1-4CDF-9625-04F42A5E3BB0@my.bristol.ac.uk>
References: <CAO77-6vJ+3geDZDTGodFxP-+nq51mAo+R-rZ7MksvwBstYuvmg@mail.gmail.com>
	<D96444E0-E1D1-4CDF-9625-04F42A5E3BB0@my.bristol.ac.uk>
Message-ID: <CAO77-6utH1mc5pEtkcANNKsLPW3epnt_BYEvUXrX+3vtW9c3aw@mail.gmail.com>

Hi Marco,

Very Strange! I update quantmod, still get this error...

Instead of downloading a lots of tickers, I tried to limit the list to
those tickers and tired to simplify the code. I get this error on the code
below:

*Error in 1:nrow(symbols) : argument of length 0*

I runned nrow(symbols) and get
nrow(symbols)
NULL

The symbols should not have any rows, right?

The For should look at the datasets for the tickers and store in to the
database, right?


*#Initialization*
*library(quantstrat)*
*library(TTR)*
*startDate <- "2010-01-01"*
*endDate <- "2013-07-31"*
*symbols = c("XLF","XLP","XLE","XLY","XLV","XLI","XLB","XLK","XLU")*
*Sys.setenv(TZ="UTC")*
*getSymbols(symbols, src="yahoo", from=startDate, to=endDate, adjust=TRUE)*

*# Save data to MySQL*

*library(RMySQL)*

*con <- dbConnect(RMySQL::MySQL(), host="localhost",
user="donedge",password="p at ssw0rd", dbname= "daily")*

*# Loop through each symbol*
*for (i in 1:nrow(symbols)){*
*  symbol <- symbols[i,]$Symbol*
*  df = data.frame(Date=index(get(symbol)), coredata(get(symbol)))*
*  setNames(df,c("Date","Open","High","Low","Close","Volume","Adjusted"))*

*  if(dbExistsTable(con, symbol)){*
*    dbRemoveTable(con, symbol)*
*  }*
*  dbWriteTable(con, name=symbol, value=df, row.names=FALSE, overwrite =
TRUE)*
*}*

On Tue, Feb 24, 2015 at 2:56 PM, Marco Sun <hs13322 at my.bristol.ac.uk> wrote:

> Hi Isak,
>
> I have checked your scripts and there is no error reported on my platform.
> getSymbols correctly downloads historical prices for `ZB-PA`
> > library(quantstrat)
> > all.symbols <- stockSymbols(c("NYSE"),sort.by
> =c("MarketCap","Exchange"),quiet=TRUE)
> > biggest.symbols <- tail(all.symbols,n=5)
> > clean.symbols <- subset(biggest.symbols, select =
> c("Symbol","Name","LastSale","MarketCap","Sector"))
> > row.names(clean.symbols) <- NULL
> > i=1 #trying i=1 instead of doing the entire loop
> > symbol <- clean.symbols[i,]$Symbol
> > try (getSymbols(symbol, verbose=FALSE, warnings=FALSE,
> from='2015-01-01'))
> [1] "ZB-PA?
> And a dataframe named `df` can also be constructed via your script
> > df = data.frame(Date=index(get(symbol)), coredata(get(symbol)))
>
> I would recommend you to update `quantmod` package if it is not the latest
> released version on your console.
>
> Best,
> Marco
>
> On 24 Feb 2015, at 08:33 pm, Isak Engdahl <isak.engdahl at gmail.com> wrote:
>
> Hello,
>
> Tickers with - get error when trying to download ZB-PA but not ZBK.
>
> When I manually download it from Yahoo I get this link, that works.
>
>
> http://real-chart.finance.yahoo.com/table.csv?s=ZB-PA&a=00&b=2&c=2015&d=01&e=23&f=2015&g=d&ignore=.csv
>
> The Quantmod tried to download from this link, which does not exist.
>
> http://ichart.finance.yahoo.com/table.csv?s=ZB-PA&a=0&b=01&c=2015&d=1&e=24&f=2015&g=d&
> *q=q&y=0&z=ZB-PA&x*=.csv
>
> If this part could be replaced "q=q&y=0&z=ZB-PA&x" with "d&ignore" and it
> will work both with ZB-PA and ZBK.
>
> Maybe this forum is not the correct place to suggest this improvement,
> please point me in right direction.
>
> Maybe someone can help me out to fix this script error?
> My script stop writing to the database if one of these tickers get this
> error described above (no data exist for symbol ZB-PA to be stored in the
> database. Anyone know how to ignore tickers that get this error so the
> script can continue to load all tickers that has downloaded data?
>
> Please find attached scripts.
>
> Error when trying to download ticker data from Yahoo Finance for ZB-PA.
>
> =================================
> *"Downloading ZB-PA*
> *Error in download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=",
> from.m,  : *
> *  cannot open URL
> 'http://ichart.finance.yahoo.com/table.csv?s=ZB-PA&a=0&b=01&c=2015&d=1&e=24&f=2015&g=d&q=q&y=0&z=ZB-PA&x=.csv
> <http://ichart.finance.yahoo.com/table.csv?s=ZB-PA&a=0&b=01&c=2015&d=1&e=24&f=2015&g=d&q=q&y=0&z=ZB-PA&x=.csv>'*
> *In addition: Warning message:*
> *In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :*
> *  InternetOpenUrl failed: 'The operation timed out'*
> *, error - did not download (likely due to rate limiting*
> *Downloading ZBK*
> *Warning message:*
> *In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :*
> *  downloaded length 1653 != reported length 200*
> *> View(clean.symbols)*
> *> "*
> =============================
>
> ========================================
> > # Save data to MySQL
> >
> > library(RMySQL)
> >
> > con <- dbConnect(RMySQL::MySQL(), host="localhost",
> user="donedge",password="p at ssw0rd", dbname= "daily")
> >
> > # Loop through each symbol
> >
> > for (i in 1:nrow(clean.symbols)){
> +   symbol <- clean.symbols[i,]$Symbol
> +   df = data.frame(Date=index(get(symbol)), coredata(get(symbol)))
> +   setNames(df,c("Date","Open","High","Low","Close","Volume","Adjusted"))
> +
> +   cat("Storing",symbol,"\n")
> +
> +   if(dbExistsTable(con, symbol)){
> +     dbRemoveTable(con, symbol)
> +   }
> +
> +   dbWriteTable(con, name=symbol, value=df, row.names=FALSE, overwrite =
> TRUE)
> +
> + }
> *Error in get(symbol) : object 'ZB-PA' not found*
> >
> ========================================
>
> Kind Regards
> Isak
> <downloadData.R><mysqlData.R><init.R>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
>
>


-- 


Kind Regards
Isak Engdahl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20150224/dbb24ada/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: load-data-mysql.R
Type: application/octet-stream
Size: 810 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20150224/dbb24ada/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: error.png
Type: image/png
Size: 147866 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20150224/dbb24ada/attachment.png>

From isak.engdahl at gmail.com  Tue Feb 24 16:11:49 2015
From: isak.engdahl at gmail.com (Isak Engdahl)
Date: Tue, 24 Feb 2015 16:11:49 +0100
Subject: [R-SIG-Finance] Quantmod Yahoo ticker download error
In-Reply-To: <000901d0503a$9213a2b0$b63ae810$@org>
References: <CAO77-6vJ+3geDZDTGodFxP-+nq51mAo+R-rZ7MksvwBstYuvmg@mail.gmail.com>
	<BE4A6A4C-1626-4BD0-B07A-020A31EB96F6@my.bristol.ac.uk>
	<000901d0503a$9213a2b0$b63ae810$@org>
Message-ID: <CAO77-6tWzAbmSxXvVjEY2isX+TgxwAyvjQ7B8j48Eu_SSXagyA@mail.gmail.com>

Hello Pierre,

https://github.com/cran/quantmod/blob/master/R/getSymbols.R

They have interface for Yahoo data and Yahoo have LSE Equity information so
I think you can query the symbols.

http://finance.yahoo.com/q;_ylt=AkquhlMP8R.OHhWpokxU7WvdgvME;_ylc=X1MDMjE0MjQ3ODk0OARfcgMyBGZyA3VoM19maW5hbmNlX3dlYl9ncwRmcjIDc2EtZ3AEZ3ByaWQDBG5fZ3BzAzEwBG9yaWdpbgNmaW5hbmNlLnlhaG9vLmNvbQRwb3MDMwRwcXN0cgMEcXVlcnkDQU1FQy5MLARzYWMDMQRzYW8DMQ--?p=http%3A%2F%2Ffinance.yahoo.com%2Fq%3Fs%3DAMEC.L%26ql%3D0&uhb=uhb2&fr=uh3_finance_vert_gs&s=AMEC.L


I still get this error

Error in download.file(paste(yahoo.URL, Symbol.name, "&a=", from.m, "&b=",
 :
  cannot open URL '
http://ichart.finance.yahoo.com/table.csv?s=AMEC.L&a=0&b=01&c=1900&d=1&e=24&f=2015&g=v&ignore=.csv
'
In addition: Warning messages:
1: In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
  downloaded length 51965 != reported length 200
2: In download.file(paste(yahoo.URL, Symbol.name, "&a=", from.m, "&b=",  :
  cannot open: HTTP status was '404 Not Found'

If I add AMEC.L in my vector in: symbols =
c("AMEC.L","XLF","XLP","XLE","XLY","XLV","XLI","XLB","XLK","XLU")

But I think this is something with my installation as Marco did not have
this issue.

Please let me know it works.

//Isak





On Tue, Feb 24, 2015 at 3:02 PM, Pierre Org <pierre at lequeux.org> wrote:

> Hi
>
> Thank you all for a great and very useful thread. Do you know if there is
> a package that can help to access the same type of information than
> stockSymbols fort the London stock exchange ? i.e download of price and
> market caps ? I am working on a Black & Litterman project and would like to
> somehow automatise a reverse optimisation of the expected returns for each
> sectors For this, I  need to download the market caps per stock/sector as
> well as the closing price...any help / pointer would be appreciated.
>
>
> Thks
>
> Pierre
>
> -----Original Message-----
> From: R-SIG-Finance [mailto:r-sig-finance-bounces at r-project.org] On
> Behalf Of Marco Sun
> Sent: 24 February 2015 13:55
> To: Isak Engdahl
> Cc: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] Quantmod Yahoo ticker download error
>
> Hi Isak,
>
> I have checked your scripts and there is no error reported on my platform.
> getSymbols correctly downloads historical prices for `ZB-PA`
> > library(quantstrat)
> > all.symbols <-
> > stockSymbols(c("NYSE"),sort.by=c("MarketCap","Exchange"),quiet=TRUE)
> > biggest.symbols <- tail(all.symbols,n=5) clean.symbols <-
> > subset(biggest.symbols, select =
> > c("Symbol","Name","LastSale","MarketCap","Sector"))
> > row.names(clean.symbols) <- NULL
> > i=1 #trying i=1 instead of doing the entire loop symbol <-
> > clean.symbols[i,]$Symbol try (getSymbols(symbol, verbose=FALSE,
> > warnings=FALSE, from='2015-01-01'))
> [1] "ZB-PA
> And a dataframe named `df` can also be constructed via your script
> > df = data.frame(Date=index(get(symbol)), coredata(get(symbol)))
>
> I would recommend you to update `quantmod` package if it is not the latest
> released version on your console.
>
> Best,
> Marco
>
> On 24 Feb 2015, at 08:33 pm, Isak Engdahl <isak.engdahl at gmail.com> wrote:
>
> > Hello,
> >
> > Tickers with - get error when trying to download ZB-PA but not ZBK.
> >
> > When I manually download it from Yahoo I get this link, that works.
> >
> > http://real-chart.finance.yahoo.com/table.csv?s=ZB-PA&a=00&b=2&c=2015&
> > d=01&e=23&f=2015&g=d&ignore=.csv
> >
> > The Quantmod tried to download from this link, which does not exist.
> > http://ichart.finance.yahoo.com/table.csv?s=ZB-PA&a=0&b=01&c=2015&d=1&
> > e=24&f=2015&g=d&q=q&y=0&z=ZB-PA&x=.csv
> >
> > If this part could be replaced "q=q&y=0&z=ZB-PA&x" with "d&ignore" and
> it will work both with ZB-PA and ZBK.
> >
> > Maybe this forum is not the correct place to suggest this improvement,
> please point me in right direction.
> >
> > Maybe someone can help me out to fix this script error?
> > My script stop writing to the database if one of these tickers get this
> error described above (no data exist for symbol ZB-PA to be stored in the
> database. Anyone know how to ignore tickers that get this error so the
> script can continue to load all tickers that has downloaded data?
> >
> > Please find attached scripts.
> >
> > Error when trying to download ticker data from Yahoo Finance for ZB-PA.
> >
> > =================================
> > "Downloading ZB-PA
> > Error in download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=",
> from.m,  :
> >   cannot open URL '
> http://ichart.finance.yahoo.com/table.csv?s=ZB-PA&a=0&b=01&c=2015&d=1&e=24&f=2015&g=d&q=q&y=0&z=ZB-PA&x=.csv
> '
> > In addition: Warning message:
> > In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
> >   InternetOpenUrl failed: 'The operation timed out'
> > , error - did not download (likely due to rate limiting Downloading
> > ZBK Warning message:
> > In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
> >   downloaded length 1653 != reported length 200
> > > View(clean.symbols)
> > > "
> > =============================
> >
> > ========================================
> > > # Save data to MySQL
> > >
> > > library(RMySQL)
> > >
> > > con <- dbConnect(RMySQL::MySQL(), host="localhost",
> > > user="donedge",password="p at ssw0rd", dbname= "daily")
> > >
> > > # Loop through each symbol
> > >
> > > for (i in 1:nrow(clean.symbols)){
> > +   symbol <- clean.symbols[i,]$Symbol
> > +   df = data.frame(Date=index(get(symbol)), coredata(get(symbol)))
> > +
> > + setNames(df,c("Date","Open","High","Low","Close","Volume","Adjusted"
> > + ))
> > +
> > +   cat("Storing",symbol,"\n")
> > +
> > +   if(dbExistsTable(con, symbol)){
> > +     dbRemoveTable(con, symbol)
> > +   }
> > +
> > +   dbWriteTable(con, name=symbol, value=df, row.names=FALSE,
> > + overwrite = TRUE)
> > +
> > + }
> > Error in get(symbol) : object 'ZB-PA' not found
> > >
> > ========================================
> >
> > Kind Regards
> > Isak
> > <downloadData.R><mysqlData.R><init.R>_________________________________
> > ______________ R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions
> should go.
>
>
>         [[alternative HTML version deleted]]
>
>
>


-- 


Kind Regards
Isak Engdahl

	[[alternative HTML version deleted]]


From isak.engdahl at gmail.com  Tue Feb 24 16:16:30 2015
From: isak.engdahl at gmail.com (Isak Engdahl)
Date: Tue, 24 Feb 2015 16:16:30 +0100
Subject: [R-SIG-Finance] Quantmod Yahoo ticker download error
In-Reply-To: <70C28E80655BFC46978030281154E85803CDC145@EXCHMBOX001P.optrust.local>
References: <CAO77-6vJ+3geDZDTGodFxP-+nq51mAo+R-rZ7MksvwBstYuvmg@mail.gmail.com>
	<D96444E0-E1D1-4CDF-9625-04F42A5E3BB0@my.bristol.ac.uk>
	<CAO77-6utH1mc5pEtkcANNKsLPW3epnt_BYEvUXrX+3vtW9c3aw@mail.gmail.com>
	<70C28E80655BFC46978030281154E85803CDC145@EXCHMBOX001P.optrust.local>
Message-ID: <CAO77-6tMkhAm5VK9Q=3LfXNViYSpWaBFMJZTUSFkScPeFWd-CA@mail.gmail.com>

Hello Erol,

Thank your for your help!

When I run it with lenght I get the below error:

*Error in symbols[i, ] : incorrect number of dimensions*
*> *

Any ideas?

//Isak

# Loop through each symbol
nrow(symbols)
for (i in 1:length(symbols)){
  symbol <- symbols[i,]$Symbol
  df = data.frame(Date=index(get(symbol)), coredata(get(symbol)))
  setNames(df,c("Date","Open","High","Low","Close","Volume","Adjusted"))

  if(dbExistsTable(con, symbol)){
    dbRemoveTable(con, symbol)
  }
  dbWriteTable(con, name=symbol, value=df, row.names=FALSE, overwrite =
TRUE)
}



On Tue, Feb 24, 2015 at 4:10 PM, Erol Biceroglu <EBiceroglu at optrust.com>
wrote:

>  I don?t think you can use ?nrow()? since it?s a character vector, you
> need ?length()?
>
>
>
> *Erol Biceroglu, MFin*
>
> Senior Risk Analyst
>
> *OPSEU Pension Trust*
>
> P: 416-681-2707   F: 416-681-6175
>
> e: EBiceroglu at OPTrust.com
>
>
>
> *From:* R-SIG-Finance [mailto:r-sig-finance-bounces at r-project.org] *On
> Behalf Of *Isak Engdahl
> *Sent:* Tuesday, February 24, 2015 10:02 AM
> *To:* Marco Sun
> *Cc:* r-sig-finance
> *Subject:* Re: [R-SIG-Finance] Quantmod Yahoo ticker download error
>
>
>
> Hi Marco,
>
>
>
> Very Strange! I update quantmod, still get this error...
>
>
>
> Instead of downloading a lots of tickers, I tried to limit the list to
> those tickers and tired to simplify the code. I get this error on the code
> below:
>
>
>
> *Error in 1:nrow(symbols) : argument of length 0*
>
>
>
> I runned nrow(symbols) and get
>
> nrow(symbols)
>
> NULL
>
>
>
> The symbols should not have any rows, right?
>
>
>
> The For should look at the datasets for the tickers and store in to the
> database, right?
>
>
>
>
>
> *#Initialization*
>
> *library(quantstrat)*
>
> *library(TTR)*
>
> *startDate <- "2010-01-01"*
>
> *endDate <- "2013-07-31"*
>
> *symbols = c("XLF","XLP","XLE","XLY","XLV","XLI","XLB","XLK","XLU")*
>
> *Sys.setenv(TZ="UTC")*
>
> *getSymbols(symbols, src="yahoo", from=startDate, to=endDate, adjust=TRUE)*
>
>
>
> *# Save data to MySQL*
>
>
>
> *library(RMySQL)*
>
>
>
> *con <- dbConnect(RMySQL::MySQL(), host="localhost",
> user="donedge",password="p at ssw0rd", dbname= "daily")*
>
>
>
> *# Loop through each symbol*
>
> *for (i in 1:nrow(symbols)){*
>
> *  symbol <- symbols[i,]$Symbol*
>
> *  df = data.frame(Date=index(get(symbol)), coredata(get(symbol)))*
>
> *  setNames(df,c("Date","Open","High","Low","Close","Volume","Adjusted"))*
>
>
>
> *  if(dbExistsTable(con, symbol)){*
>
> *    dbRemoveTable(con, symbol)*
>
> *  }*
>
> *  dbWriteTable(con, name=symbol, value=df, row.names=FALSE, overwrite =
> TRUE)*
>
> *}*
>
>
>
> On Tue, Feb 24, 2015 at 2:56 PM, Marco Sun <hs13322 at my.bristol.ac.uk>
> wrote:
>
> Hi Isak,
>
>
>
> I have checked your scripts and there is no error reported on my platform.
> getSymbols correctly downloads historical prices for `ZB-PA`
>
> > library(quantstrat)
>
> > all.symbols <- stockSymbols(c("NYSE"),sort.by
> =c("MarketCap","Exchange"),quiet=TRUE)
>
> > biggest.symbols <- tail(all.symbols,n=5)
>
> > clean.symbols <- subset(biggest.symbols, select =
> c("Symbol","Name","LastSale","MarketCap","Sector"))
>
> > row.names(clean.symbols) <- NULL
>
> > i=1 #trying i=1 instead of doing the entire loop
>
> > symbol <- clean.symbols[i,]$Symbol
>
> > try (getSymbols(symbol, verbose=FALSE, warnings=FALSE,
> from='2015-01-01'))
>
> [1] "ZB-PA?
>
> And a dataframe named `df` can also be constructed via your script
>
> > df = data.frame(Date=index(get(symbol)), coredata(get(symbol)))
>
>
>
> I would recommend you to update `quantmod` package if it is not the latest
> released version on your console.
>
>
>
> Best,
>
> Marco
>
>
>
> On 24 Feb 2015, at 08:33 pm, Isak Engdahl <isak.engdahl at gmail.com> wrote:
>
>
>
>   Hello,
>
>
>
> Tickers with - get error when trying to download ZB-PA but not ZBK.
>
>
>
> When I manually download it from Yahoo I get this link, that works.
>
>
>
>
> http://real-chart.finance.yahoo.com/table.csv?s=ZB-PA&a=00&b=2&c=2015&d=01&e=23&f=2015&g=d&ignore=.csv
>
>
>
> The Quantmod tried to download from this link, which does not exist.
>
>
> http://ichart.finance.yahoo.com/table.csv?s=ZB-PA&a=0&b=01&c=2015&d=1&e=24&f=2015&g=d&
> *q=q&y=0&z=ZB-PA&x*=.csv
>
>
>
> If this part could be replaced "q=q&y=0&z=ZB-PA&x" with "d&ignore" and it
> will work both with ZB-PA and ZBK.
>
>
>
> Maybe this forum is not the correct place to suggest this improvement,
> please point me in right direction.
>
>
>
> Maybe someone can help me out to fix this script error?
>
> My script stop writing to the database if one of these tickers get this
> error described above (no data exist for symbol ZB-PA to be stored in the
> database. Anyone know how to ignore tickers that get this error so the
> script can continue to load all tickers that has downloaded data?
>
>
>
> Please find attached scripts.
>
>
>
> Error when trying to download ticker data from Yahoo Finance for ZB-PA.
>
>
>
> =================================
>
> *"Downloading ZB-PA*
>
> *Error in download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=",
> from.m,  : *
>
> *  cannot open URL
> 'http://ichart.finance.yahoo.com/table.csv?s=ZB-PA&a=0&b=01&c=2015&d=1&e=24&f=2015&g=d&q=q&y=0&z=ZB-PA&x=.csv
> <http://ichart.finance.yahoo.com/table.csv?s=ZB-PA&a=0&b=01&c=2015&d=1&e=24&f=2015&g=d&q=q&y=0&z=ZB-PA&x=.csv>'*
>
> *In addition: Warning message:*
>
> *In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :*
>
> *  InternetOpenUrl failed: 'The operation timed out'*
>
> *, error - did not download (likely due to rate limiting*
>
> *Downloading ZBK*
>
> *Warning message:*
>
> *In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :*
>
> *  downloaded length 1653 != reported length 200*
>
> *> View(clean.symbols)*
>
> *> "*
>
> =============================
>
>
>
> ========================================
>
> > # Save data to MySQL
>
> >
>
> > library(RMySQL)
>
> >
>
> > con <- dbConnect(RMySQL::MySQL(), host="localhost",
> user="donedge",password="p at ssw0rd", dbname= "daily")
>
> >
>
> > # Loop through each symbol
>
> >
>
> > for (i in 1:nrow(clean.symbols)){
>
> +   symbol <- clean.symbols[i,]$Symbol
>
> +   df = data.frame(Date=index(get(symbol)), coredata(get(symbol)))
>
> +   setNames(df,c("Date","Open","High","Low","Close","Volume","Adjusted"))
>
> +
>
> +   cat("Storing",symbol,"\n")
>
> +
>
> +   if(dbExistsTable(con, symbol)){
>
> +     dbRemoveTable(con, symbol)
>
> +   }
>
> +
>
> +   dbWriteTable(con, name=symbol, value=df, row.names=FALSE, overwrite =
> TRUE)
>
> +
>
> + }
>
> *Error in get(symbol) : object 'ZB-PA' not found*
>
> >
>
> ========================================
>
>
>
> Kind Regards
>
> Isak
>
>
> <downloadData.R><mysqlData.R><init.R>_______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
>
>
>
>
>
>
> --
>
>
>
>
>
> Kind Regards
>
> Isak Engdahl
>
> ------------------------------
> Disclaimer
> ---------------
> This e-mail and files transmitted with it are confidential and intended
> solely for the use of the individual or entity to whom they are addressed.
> If you have received this in error, contact OPTrust by telephone toll free
> at 1-800-906-7738 and delete the email without making a paper or electronic
> copy. The recipient should check this e-mail and attachments for the
> presence of viruses. OPTrust accepts no liability for any damage caused by
> any virus transmitted by e-mail.
> Please consider the environment before printing this e-mail message.
>
> Avis de non-responsabilit?
> --------------------------------------
> Ce message et toutes les pi?ces jointes sont ?tablis ? l'intention
> exclusive de leur destinataire et sont confidentiels. Si vous recevez ce
> message par erreur, veuillez le d?truire sans produire de copie papier ou
> ?lectronique, et avertir imm?diatement OPTrust par t?l?phone ou sans frais
> au 1-800-906-7738. Le destinataire doit s?assurer que ce message et toutes
> les pi?ces jointes ne contiennent pas de virus. OPTrust n?accepte aucune
> responsabilit? pour les dommages caus?s par d??ventuels virus transmis par
> courriel.
> Pensez ? l?environnement avant d?imprimer ce message.
>
>


-- 


Kind Regards
Isak Engdahl

	[[alternative HTML version deleted]]


From pierre at lequeux.org  Tue Feb 24 16:21:51 2015
From: pierre at lequeux.org (Pierre Org)
Date: Tue, 24 Feb 2015 15:21:51 -0000
Subject: [R-SIG-Finance] Quantmod Yahoo ticker download error
In-Reply-To: <CAO77-6tWzAbmSxXvVjEY2isX+TgxwAyvjQ7B8j48Eu_SSXagyA@mail.gmail.com>
References: <CAO77-6vJ+3geDZDTGodFxP-+nq51mAo+R-rZ7MksvwBstYuvmg@mail.gmail.com>
	<BE4A6A4C-1626-4BD0-B07A-020A31EB96F6@my.bristol.ac.uk>
	<000901d0503a$9213a2b0$b63ae810$@org>
	<CAO77-6tWzAbmSxXvVjEY2isX+TgxwAyvjQ7B8j48Eu_SSXagyA@mail.gmail.com>
Message-ID: <000601d05045$9df59fb0$d9e0df10$@org>

Hi Isak,

 

Many thanks for this, it   should be  really useful  for my project

 

 

Kind regards

 

Pierre

                    

From: Isak Engdahl [mailto:isak.engdahl at gmail.com] 
Sent: 24 February 2015 15:12
To: Pierre Org
Cc: r-sig-finance
Subject: Re: [R-SIG-Finance] Quantmod Yahoo ticker download error

 

Hello Pierre,

 

https://github.com/cran/quantmod/blob/master/R/getSymbols.R

 

They have interface for Yahoo data and Yahoo have LSE Equity information so I think you can query the symbols.

 

http://finance.yahoo.com/q;_ylt=AkquhlMP8R.OHhWpokxU7WvdgvME;_ylc=X1MDMjE0MjQ3ODk0OARfcgMyBGZyA3VoM19maW5hbmNlX3dlYl9ncwRmcjIDc2EtZ3AEZ3ByaWQDBG5fZ3BzAzEwBG9yaWdpbgNmaW5hbmNlLnlhaG9vLmNvbQRwb3MDMwRwcXN0cgMEcXVlcnkDQU1FQy5MLARzYWMDMQRzYW8DMQ--?p=http%3A%2F%2Ffinance.yahoo.com%2Fq%3Fs%3DAMEC.L%26ql%3D0 <http://finance.yahoo.com/q;_ylt=AkquhlMP8R.OHhWpokxU7WvdgvME;_ylc=X1MDMjE0MjQ3ODk0OARfcgMyBGZyA3VoM19maW5hbmNlX3dlYl9ncwRmcjIDc2EtZ3AEZ3ByaWQDBG5fZ3BzAzEwBG9yaWdpbgNmaW5hbmNlLnlhaG9vLmNvbQRwb3MDMwRwcXN0cgMEcXVlcnkDQU1FQy5MLARzYWMDMQRzYW8DMQ--?p=http%3A%2F%2Ffinance.yahoo.com%2Fq%3Fs%3DAMEC.L%26ql%3D0&uhb=uhb2&fr=uh3_finance_vert_gs&s=AMEC.L> &uhb=uhb2&fr=uh3_finance_vert_gs&s=AMEC.L

 

 

I still get this error

 

Error in download.file(paste(yahoo.URL, Symbol.name, "&a=", from.m, "&b=",  : 

  cannot open URL 'http://ichart.finance.yahoo.com/table.csv?s=AMEC.L <http://ichart.finance.yahoo.com/table.csv?s=AMEC.L&a=0&b=01&c=1900&d=1&e=24&f=2015&g=v&ignore=.csv> &a=0&b=01&c=1900&d=1&e=24&f=2015&g=v&ignore=.csv'

In addition: Warning messages:

1: In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :

  downloaded length 51965 != reported length 200

2: In download.file(paste(yahoo.URL, Symbol.name, "&a=", from.m, "&b=",  :

  cannot open: HTTP status was '404 Not Found'

 

If I add AMEC.L in my vector in: symbols = c("AMEC.L","XLF","XLP","XLE","XLY","XLV","XLI","XLB","XLK","XLU")

 

But I think this is something with my installation as Marco did not have this issue.

 

Please let me know it works.

 

//Isak

 

 

 

 

 

On Tue, Feb 24, 2015 at 3:02 PM, Pierre Org <pierre at lequeux.org> wrote:

Hi

Thank you all for a great and very useful thread. Do you know if there is a package that can help to access the same type of information than stockSymbols fort the London stock exchange ? i.e download of price and market caps ? I am working on a Black & Litterman project and would like to somehow automatise a reverse optimisation of the expected returns for each sectors For this, I  need to download the market caps per stock/sector as well as the closing price...any help / pointer would be appreciated.


Thks

Pierre


-----Original Message-----
From: R-SIG-Finance [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Marco Sun
Sent: 24 February 2015 13:55
To: Isak Engdahl
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Quantmod Yahoo ticker download error

Hi Isak,

I have checked your scripts and there is no error reported on my platform. getSymbols correctly downloads historical prices for `ZB-PA`
> library(quantstrat)
> all.symbols <-
> stockSymbols(c("NYSE"),sort.by=c("MarketCap","Exchange"),quiet=TRUE)
> biggest.symbols <- tail(all.symbols,n=5) clean.symbols <-
> subset(biggest.symbols, select =
> c("Symbol","Name","LastSale","MarketCap","Sector"))
> row.names(clean.symbols) <- NULL
> i=1 #trying i=1 instead of doing the entire loop symbol <-
> clean.symbols[i,]$Symbol try (getSymbols(symbol, verbose=FALSE,
> warnings=FALSE, from='2015-01-01'))
[1] "ZB-PA
And a dataframe named `df` can also be constructed via your script
> df = data.frame(Date=index(get(symbol)), coredata(get(symbol)))

I would recommend you to update `quantmod` package if it is not the latest released version on your console.

Best,
Marco

On 24 Feb 2015, at 08:33 pm, Isak Engdahl <isak.engdahl at gmail.com> wrote:

> Hello,
>
> Tickers with - get error when trying to download ZB-PA but not ZBK.
>
> When I manually download it from Yahoo I get this link, that works.
>
> http://real-chart.finance.yahoo.com/table.csv?s=ZB-PA <http://real-chart.finance.yahoo.com/table.csv?s=ZB-PA&a=00&b=2&c=2015&> &a=00&b=2&c=2015&
> d=01&e=23&f=2015&g=d&ignore=.csv
>
> The Quantmod tried to download from this link, which does not exist.
> http://ichart.finance.yahoo.com/table.csv?s=ZB-PA <http://ichart.finance.yahoo.com/table.csv?s=ZB-PA&a=0&b=01&c=2015&d=1&> &a=0&b=01&c=2015&d=1&
> e=24&f=2015&g=d&q=q&y=0&z=ZB-PA&x=.csv
>
> If this part could be replaced "q=q&y=0&z=ZB-PA&x" with "d&ignore" and it will work both with ZB-PA and ZBK.
>
> Maybe this forum is not the correct place to suggest this improvement, please point me in right direction.
>
> Maybe someone can help me out to fix this script error?
> My script stop writing to the database if one of these tickers get this error described above (no data exist for symbol ZB-PA to be stored in the database. Anyone know how to ignore tickers that get this error so the script can continue to load all tickers that has downloaded data?
>
> Please find attached scripts.
>
> Error when trying to download ticker data from Yahoo Finance for ZB-PA.
>
> =================================
> "Downloading ZB-PA
> Error in download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
>   cannot open URL 'http://ichart.finance.yahoo.com/table.csv?s=ZB-PA <http://ichart.finance.yahoo.com/table.csv?s=ZB-PA&a=0&b=01&c=2015&d=1&e=24&f=2015&g=d&q=q&y=0&z=ZB-PA&x=.csv> &a=0&b=01&c=2015&d=1&e=24&f=2015&g=d&q=q&y=0&z=ZB-PA&x=.csv'
> In addition: Warning message:
> In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
>   InternetOpenUrl failed: 'The operation timed out'
> , error - did not download (likely due to rate limiting Downloading
> ZBK Warning message:
> In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
>   downloaded length 1653 != reported length 200
> > View(clean.symbols)
> > "
> =============================
>
> ========================================
> > # Save data to MySQL
> >
> > library(RMySQL)
> >
> > con <- dbConnect(RMySQL::MySQL(), host="localhost",
> > user="donedge",password="p at ssw0rd", dbname= "daily")
> >
> > # Loop through each symbol
> >
> > for (i in 1:nrow(clean.symbols)){
> +   symbol <- clean.symbols[i,]$Symbol
> +   df = data.frame(Date=index(get(symbol)), coredata(get(symbol)))
> +
> + setNames(df,c("Date","Open","High","Low","Close","Volume","Adjusted"

> + ))
> +
> +   cat("Storing",symbol,"\n")
> +
> +   if(dbExistsTable(con, symbol)){
> +     dbRemoveTable(con, symbol)
> +   }
> +
> +   dbWriteTable(con, name=symbol, value=df, row.names=FALSE,
> + overwrite = TRUE)
> +
> + }
> Error in get(symbol) : object 'ZB-PA' not found
> >
> ========================================
>
> Kind Regards
> Isak
> <downloadData.R><mysqlData.R><init.R>_________________________________
> ______________ R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


        [[alternative HTML version deleted]]







 

-- 

 

 

Kind Regards

Isak Engdahl


	[[alternative HTML version deleted]]


From josh.m.ulrich at gmail.com  Tue Feb 24 16:21:40 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 24 Feb 2015 09:21:40 -0600
Subject: [R-SIG-Finance] Quantmod Yahoo ticker download error
In-Reply-To: <CAO77-6tMkhAm5VK9Q=3LfXNViYSpWaBFMJZTUSFkScPeFWd-CA@mail.gmail.com>
References: <CAO77-6vJ+3geDZDTGodFxP-+nq51mAo+R-rZ7MksvwBstYuvmg@mail.gmail.com>
	<D96444E0-E1D1-4CDF-9625-04F42A5E3BB0@my.bristol.ac.uk>
	<CAO77-6utH1mc5pEtkcANNKsLPW3epnt_BYEvUXrX+3vtW9c3aw@mail.gmail.com>
	<70C28E80655BFC46978030281154E85803CDC145@EXCHMBOX001P.optrust.local>
	<CAO77-6tMkhAm5VK9Q=3LfXNViYSpWaBFMJZTUSFkScPeFWd-CA@mail.gmail.com>
Message-ID: <CAPPM_gSjKppb1GKpnWXz6Vy4RF20d9KKVo26T1D_MwdOxrOq-w@mail.gmail.com>

On Tue, Feb 24, 2015 at 9:16 AM, Isak Engdahl <isak.engdahl at gmail.com> wrote:
> Hello Erol,
>
> Thank your for your help!
>
> When I run it with lenght I get the below error:
>
> *Error in symbols[i, ] : incorrect number of dimensions*
> *> *
>
> Any ideas?
>
Read "An Introduction to R".  Your issue is the lack of a basic
understanding of core R data structures.  This is not the correct
forum to ask for help with this type of issue.  As the footer on every
message sent to this list says, in part, "Also note that this is not
the r-help list where general R questions should go."

> //Isak
>
> # Loop through each symbol
> nrow(symbols)
> for (i in 1:length(symbols)){
>   symbol <- symbols[i,]$Symbol
>   df = data.frame(Date=index(get(symbol)), coredata(get(symbol)))
>   setNames(df,c("Date","Open","High","Low","Close","Volume","Adjusted"))
>
>   if(dbExistsTable(con, symbol)){
>     dbRemoveTable(con, symbol)
>   }
>   dbWriteTable(con, name=symbol, value=df, row.names=FALSE, overwrite =
> TRUE)
> }
>
>
>
> On Tue, Feb 24, 2015 at 4:10 PM, Erol Biceroglu <EBiceroglu at optrust.com>
> wrote:
>
>>  I don?t think you can use ?nrow()? since it?s a character vector, you
>> need ?length()?
>>
>>
>>
>> *Erol Biceroglu, MFin*
>>
>> Senior Risk Analyst
>>
>> *OPSEU Pension Trust*
>>
>> P: 416-681-2707   F: 416-681-6175
>>
>> e: EBiceroglu at OPTrust.com
>>
<snip>
>
>
> --
>
>
> Kind Regards
> Isak Engdahl
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From mcewan.gareth at gmail.com  Wed Feb 25 19:28:19 2015
From: mcewan.gareth at gmail.com (Gareth McEwan)
Date: Wed, 25 Feb 2015 20:28:19 +0200
Subject: [R-SIG-Finance] help with ugarchsim error
Message-ID: <CALGfFMYsrCu7Pd5C4sj2Kr0ffXrwHWF_eEoVHNoCYze5iB5-gQ@mail.gmail.com>

Hi there

I was wondering if anyone can help me with an error that is thrown from the
ugarchsim() function in the rugarch package. I have used this function a
number of times in the past with success, so I am unsure of why it is
throwing an error now.

The error is:

"Error in .sgarchsim1(fit = fit, n.sim = n.sim, n.start = n.start, m.sim =
m.sim,  :
ugarchsim-->error: error in calling C function...."

I have loaded in:
library(rugarch)
library(Rcpp)
library(RcppArmadillo)

My code is:

sim.ALSI.SPD = ugarchsim(garchfit.ALSI, n.sim=1000000, m.sim=1,
startMethod="sample", n.start=0,
                         custom.dist=list(name="sample",
distfit=matrix(SPD.sim.1, ncol=1)))

where:
"garchfit.ALSI" is my variable from the ugarchfit(...) function;
SPD.sim.1 = qspd(u.SPD.1, fit.ALSI) - a set of standardized residuals;
with u.SPD.1 = pt(x.SPD.1, df=7.2137167865) - a set of uniform variates;
"x.SPD.1" a column of simulated data from a previous copula fit;
"fit.ALSI" is my fitted object from "spdfit( standardized GARCH residuals,
... )"

Any ideas for a solution, or why the function is now throwing an error?

Many thanks
Gareth

	[[alternative HTML version deleted]]


From alexios at 4dscape.com  Wed Feb 25 21:26:27 2015
From: alexios at 4dscape.com (alexios)
Date: Wed, 25 Feb 2015 20:26:27 +0000
Subject: [R-SIG-Finance] help with ugarchsim error
In-Reply-To: <CALGfFMYsrCu7Pd5C4sj2Kr0ffXrwHWF_eEoVHNoCYze5iB5-gQ@mail.gmail.com>
References: <CALGfFMYsrCu7Pd5C4sj2Kr0ffXrwHWF_eEoVHNoCYze5iB5-gQ@mail.gmail.com>
Message-ID: <54EE2FF3.1080906@4dscape.com>

This is likely related to the standardized data you are passing to the 
simulation function.

For instance, this _minimally reproducible example_ produces no problems:

data(sp500ret)
fit = ugarchfit(ugarchspec(), sp500ret)
simz = rnorm(1000000)

sim = ugarchsim(fit, n.sim=1000000, m.sim=1,
startMethod="sample", n.start=0, custom.dist=list(name="sample",
distfit=matrix(simz, ncol=1)))

So you need to check the values of your "SPD.sim.1" i.e. that they 
contain no NA's, Inf etc.

Alexios

On 25/02/2015 18:28, Gareth McEwan wrote:
> Hi there
>
> I was wondering if anyone can help me with an error that is thrown from the
> ugarchsim() function in the rugarch package. I have used this function a
> number of times in the past with success, so I am unsure of why it is
> throwing an error now.
>
> The error is:
>
> "Error in .sgarchsim1(fit = fit, n.sim = n.sim, n.start = n.start, m.sim =
> m.sim,  :
> ugarchsim-->error: error in calling C function...."
>
> I have loaded in:
> library(rugarch)
> library(Rcpp)
> library(RcppArmadillo)
>
> My code is:
>
> sim.ALSI.SPD = ugarchsim(garchfit.ALSI, n.sim=1000000, m.sim=1,
> startMethod="sample", n.start=0,
>                           custom.dist=list(name="sample",
> distfit=matrix(SPD.sim.1, ncol=1)))
>
> where:
> "garchfit.ALSI" is my variable from the ugarchfit(...) function;
> SPD.sim.1 = qspd(u.SPD.1, fit.ALSI) - a set of standardized residuals;
> with u.SPD.1 = pt(x.SPD.1, df=7.2137167865) - a set of uniform variates;
> "x.SPD.1" a column of simulated data from a previous copula fit;
> "fit.ALSI" is my fitted object from "spdfit( standardized GARCH residuals,
> ... )"
>
> Any ideas for a solution, or why the function is now throwing an error?
>
> Many thanks
> Gareth
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>


From alex.badoi1 at gmail.com  Tue Mar  3 19:55:42 2015
From: alex.badoi1 at gmail.com (Alex Badoi)
Date: Tue, 3 Mar 2015 19:55:42 +0100
Subject: [R-SIG-Finance] [Q] How to omit NA values in TTR package + Jeff
	Cooper's 5 day MOM
Message-ID: <CAM8W6CZJwFh49BtXOuUgS6K_fCT=TbNS0p-zTgPOanVznixo+Q@mail.gmail.com>

Hi everyone,

I am working on a trading system based on Jeff Cooper's 5 day Momentum.

http://www.maxdown.org/e-books-list/the-5-day-momentum-method-by-jeff-cooper_4fa8l.html

I am new to R and still familiarising myself with a lot of the functions
but i am slowly piecing it together. The code bellow contains all the
calculations necessary for the above strategy.

I have the following problems:

1. NA Values are making my code useless as it stops half way through. I
need to run this on a few hundred stocks. It works perfectly with no NA
values. I tried to use na.omit and na.rm=T.

Alternatively i am looking for a way through which i could search through
my stockData environment for vectors containing NA values and remove these
vectors entirely before running it through the following code.

Error:

Error in runSum(x, n) : NA/NaN/Inf in foreign function call (arg 1)
7 runSum(x, n)
6 runMean(x, n)
5 SMA(structure(c(NA, NA, NA, NA, NA, NA, NA, 29.75, 34.6666666666667,
22.75, 22.75, 26.25, 52.5, 45.5, 52.5, 45.5, 52.5, 52.5, 52.5,
59.5, 59.5, 59.5, 35, 35, 35, 35, 59, 59, 59, 59, 59, 66, 59,
66, 117, 117, 117, 117, 131, 117, 131, 131, 72.5, 43.25, 39.75,  ...
4 do.call(maType, c(list(fastK), list(n = nFastD, ...)))
3 stoch(try.xts(x[, c(2, 3, 6)], error = as.matrix), nFastK = 8,
    na.action = na.exclude)
2 FUN(X[[9L]], ...)
1 lapply(stockData, MOM)



Code:

stockData <- new.env()
getSymbols(ticker_names , env = stockData, src="yahoo")

"MOM" <- function(x){

# Price Adj.
price <- x[,c(6)]

# DIp      DIn       DX      ADX
adx <- ADX(try.xts(x[,c(2,3,6)], error=as.matrix), n =14)
    DIp <- adx$DIp
    DIn <- adx$DIn
    Adx <- adx$ADX
# dn     mavg       up      pctB
bbands <- BBands(try.xts(x[,c(2,3,6)], error=as.matrix), n =14, sd=1.8)
    down <- bbands$dn
    up <- bbands$up

sma <- SMA(try.xts(x[,c(6)], error=as.matrix), n = 20)

# rsi
rsi <- RSI(try.xts(x[,c(6)], error=as.matrix), n = 14)

# fastK     fastD     slowD
stochastics <- stoch(try.xts(x[,c(2,3,6)], error=as.matrix), nFastK = 8)
    fastK <- stochastics$fastK

# results
result <- cbind( price, DIp, DIn, Adx, down, up, sma, rsi, fastK )
lastresult <- do.call("rbind", list(last(result)))
write.table(lastresult, file = "MOM.csv", append = T, col.names = F, sep=
",")
print(last(result))
}

# Loop function on data #
lapply (stockData, MOM)

I spend the last few hours searching for a solution but with little
success. Thank you in advance if you can help.

Alex

	[[alternative HTML version deleted]]


From ilya.kipnis at gmail.com  Tue Mar  3 19:58:30 2015
From: ilya.kipnis at gmail.com (Ilya Kipnis)
Date: Tue, 3 Mar 2015 13:58:30 -0500
Subject: [R-SIG-Finance] [Q] How to omit NA values in TTR package + Jeff
 Cooper's 5 day MOM
In-Reply-To: <CAM8W6CZJwFh49BtXOuUgS6K_fCT=TbNS0p-zTgPOanVznixo+Q@mail.gmail.com>
References: <CAM8W6CZJwFh49BtXOuUgS6K_fCT=TbNS0p-zTgPOanVznixo+Q@mail.gmail.com>
Message-ID: <CA+oJuEHWe2CHoBJNnrz4Q-iE8vMFyk4=dCZdfAuZfZNO1Nw9_Q@mail.gmail.com>

Read my quantstrat posts.
On Mar 3, 2015 1:56 PM, "Alex Badoi" <alex.badoi1 at gmail.com> wrote:

> Hi everyone,
>
> I am working on a trading system based on Jeff Cooper's 5 day Momentum.
>
>
> http://www.maxdown.org/e-books-list/the-5-day-momentum-method-by-jeff-cooper_4fa8l.html
>
> I am new to R and still familiarising myself with a lot of the functions
> but i am slowly piecing it together. The code bellow contains all the
> calculations necessary for the above strategy.
>
> I have the following problems:
>
> 1. NA Values are making my code useless as it stops half way through. I
> need to run this on a few hundred stocks. It works perfectly with no NA
> values. I tried to use na.omit and na.rm=T.
>
> Alternatively i am looking for a way through which i could search through
> my stockData environment for vectors containing NA values and remove these
> vectors entirely before running it through the following code.
>
> Error:
>
> Error in runSum(x, n) : NA/NaN/Inf in foreign function call (arg 1)
> 7 runSum(x, n)
> 6 runMean(x, n)
> 5 SMA(structure(c(NA, NA, NA, NA, NA, NA, NA, 29.75, 34.6666666666667,
> 22.75, 22.75, 26.25, 52.5, 45.5, 52.5, 45.5, 52.5, 52.5, 52.5,
> 59.5, 59.5, 59.5, 35, 35, 35, 35, 59, 59, 59, 59, 59, 66, 59,
> 66, 117, 117, 117, 117, 131, 117, 131, 131, 72.5, 43.25, 39.75,  ...
> 4 do.call(maType, c(list(fastK), list(n = nFastD, ...)))
> 3 stoch(try.xts(x[, c(2, 3, 6)], error = as.matrix), nFastK = 8,
>     na.action = na.exclude)
> 2 FUN(X[[9L]], ...)
> 1 lapply(stockData, MOM)
>
>
>
> Code:
>
> stockData <- new.env()
> getSymbols(ticker_names , env = stockData, src="yahoo")
>
> "MOM" <- function(x){
>
> # Price Adj.
> price <- x[,c(6)]
>
> # DIp      DIn       DX      ADX
> adx <- ADX(try.xts(x[,c(2,3,6)], error=as.matrix), n =14)
>     DIp <- adx$DIp
>     DIn <- adx$DIn
>     Adx <- adx$ADX
> # dn     mavg       up      pctB
> bbands <- BBands(try.xts(x[,c(2,3,6)], error=as.matrix), n =14, sd=1.8)
>     down <- bbands$dn
>     up <- bbands$up
>
> sma <- SMA(try.xts(x[,c(6)], error=as.matrix), n = 20)
>
> # rsi
> rsi <- RSI(try.xts(x[,c(6)], error=as.matrix), n = 14)
>
> # fastK     fastD     slowD
> stochastics <- stoch(try.xts(x[,c(2,3,6)], error=as.matrix), nFastK = 8)
>     fastK <- stochastics$fastK
>
> # results
> result <- cbind( price, DIp, DIn, Adx, down, up, sma, rsi, fastK )
> lastresult <- do.call("rbind", list(last(result)))
> write.table(lastresult, file = "MOM.csv", append = T, col.names = F, sep=
> ",")
> print(last(result))
> }
>
> # Loop function on data #
> lapply (stockData, MOM)
>
> I spend the last few hours searching for a solution but with little
> success. Thank you in advance if you can help.
>
> Alex
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From brian at braverock.com  Tue Mar  3 20:10:44 2015
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 03 Mar 2015 13:10:44 -0600
Subject: [R-SIG-Finance] [Q] How to omit NA values in TTR package + Jeff
 Cooper's 5 day MOM
In-Reply-To: <CAM8W6CZJwFh49BtXOuUgS6K_fCT=TbNS0p-zTgPOanVznixo+Q@mail.gmail.com>
References: <CAM8W6CZJwFh49BtXOuUgS6K_fCT=TbNS0p-zTgPOanVznixo+Q@mail.gmail.com>
Message-ID: <54F60734.3030805@braverock.com>

On 03/03/2015 12:55 PM, Alex Badoi wrote:
> 1. NA Values are making my code useless as it stops half way through. I
> need to run this on a few hundred stocks. It works perfectly with no NA
> values. I tried to use na.omit and na.rm=T.

use try() in your MOM function, and return either an answer or an empty 
result.

> Alternatively i am looking for a way through which i could search through
> my stockData environment for vectors containing NA values and remove these
> vectors entirely before running it through the following code.

These aren't vectors, they're xts objects.

for a given xts object x

any(is.na(x))

will return TRUE or FALSE

So you could loop through the list something like this:

for (symbol in ls(pos=stockData)){
   if(any(is.na(stockData[[symbol]])) rm(symbol,pos=stockData)
}

but it seems that try() and making your MOM function more robust is 
likely to be a better answer.

Regards,

Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From josh.m.ulrich at gmail.com  Tue Mar  3 20:11:41 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 3 Mar 2015 13:11:41 -0600
Subject: [R-SIG-Finance] [Q] How to omit NA values in TTR package + Jeff
 Cooper's 5 day MOM
In-Reply-To: <CAM8W6CZJwFh49BtXOuUgS6K_fCT=TbNS0p-zTgPOanVznixo+Q@mail.gmail.com>
References: <CAM8W6CZJwFh49BtXOuUgS6K_fCT=TbNS0p-zTgPOanVznixo+Q@mail.gmail.com>
Message-ID: <CAPPM_gTVTy2DWxf9A7RD09c3kgdNS1pqH17A76CFfXNSY9ZpfQ@mail.gmail.com>

On Tue, Mar 3, 2015 at 12:55 PM, Alex Badoi <alex.badoi1 at gmail.com> wrote:
> Hi everyone,
>
> I am working on a trading system based on Jeff Cooper's 5 day Momentum.
>
> http://www.maxdown.org/e-books-list/the-5-day-momentum-method-by-jeff-cooper_4fa8l.html
>
> I am new to R and still familiarising myself with a lot of the functions
> but i am slowly piecing it together. The code bellow contains all the
> calculations necessary for the above strategy.
>
> I have the following problems:
>
> 1. NA Values are making my code useless as it stops half way through. I
> need to run this on a few hundred stocks. It works perfectly with no NA
> values. I tried to use na.omit and na.rm=T.
>
> Alternatively i am looking for a way through which i could search through
> my stockData environment for vectors containing NA values and remove these
> vectors entirely before running it through the following code.
>
> Error:
>
> Error in runSum(x, n) : NA/NaN/Inf in foreign function call (arg 1)
> 7 runSum(x, n)
> 6 runMean(x, n)
> 5 SMA(structure(c(NA, NA, NA, NA, NA, NA, NA, 29.75, 34.6666666666667,
> 22.75, 22.75, 26.25, 52.5, 45.5, 52.5, 45.5, 52.5, 52.5, 52.5,
> 59.5, 59.5, 59.5, 35, 35, 35, 35, 59, 59, 59, 59, 59, 66, 59,
> 66, 117, 117, 117, 117, 131, 117, 131, 131, 72.5, 43.25, 39.75,  ...
> 4 do.call(maType, c(list(fastK), list(n = nFastD, ...)))
> 3 stoch(try.xts(x[, c(2, 3, 6)], error = as.matrix), nFastK = 8,
>     na.action = na.exclude)
> 2 FUN(X[[9L]], ...)
> 1 lapply(stockData, MOM)
>
You say NA values are causing the problems, but the error says it's an
NA, NaN, or Inf.  na.omit will not remove Inf, so that's likely the
problem.  Use !is.finite to find non-finite values in your data.

>
>
> Code:
>
> stockData <- new.env()
> getSymbols(ticker_names , env = stockData, src="yahoo")
>
> "MOM" <- function(x){
>
> # Price Adj.
> price <- x[,c(6)]
>
> # DIp      DIn       DX      ADX
> adx <- ADX(try.xts(x[,c(2,3,6)], error=as.matrix), n =14)
>     DIp <- adx$DIp
>     DIn <- adx$DIn
>     Adx <- adx$ADX
> # dn     mavg       up      pctB
> bbands <- BBands(try.xts(x[,c(2,3,6)], error=as.matrix), n =14, sd=1.8)
>     down <- bbands$dn
>     up <- bbands$up
>
> sma <- SMA(try.xts(x[,c(6)], error=as.matrix), n = 20)
>
> # rsi
> rsi <- RSI(try.xts(x[,c(6)], error=as.matrix), n = 14)
>
> # fastK     fastD     slowD
> stochastics <- stoch(try.xts(x[,c(2,3,6)], error=as.matrix), nFastK = 8)
>     fastK <- stochastics$fastK
>
> # results
> result <- cbind( price, DIp, DIn, Adx, down, up, sma, rsi, fastK )
> lastresult <- do.call("rbind", list(last(result)))
> write.table(lastresult, file = "MOM.csv", append = T, col.names = F, sep=
> ",")
> print(last(result))
> }
>
> # Loop function on data #
> lapply (stockData, MOM)
>
There is no reason for you to call try.xts.  As ?try.xts says, it (and
reclass) are meant for developers... and TTR functions already call
try.xts internally, so you don't need to.

It's also really bad practice to subset columns by number.  Use column
names, or the convenience functions in quantmod (e.g. Cl(), Op(),
etc.)

> I spend the last few hours searching for a solution but with little
> success. Thank you in advance if you can help.
>
> Alex
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From mcewan.gareth at gmail.com  Wed Mar  4 15:58:43 2015
From: mcewan.gareth at gmail.com (Gareth McEwan)
Date: Wed, 4 Mar 2015 16:58:43 +0200
Subject: [R-SIG-Finance] Help specifying "ugarchsim" function
Message-ID: <CALGfFMZZ5ivyMSjXO1tVDe+0h8Zon5-jNQ2Ct3M5DBp4gOWGjw@mail.gmail.com>

Hi there

I was wondering if someone can help me correctly specify the "ugarchsim( )"
function?

I used an external regressor in the variance equation, and 2 external
regressors in the mean equation, as follows:

data <- diff(log(price series))

spec <- ugarchspec(variance.model = list(model = "gjrGARCH", garchOrder =
c(1,1),
          submodel = NULL, *external.regressors = matrix(c5, ncol = 1)*,
variance.targeting = T),
          mean.model = list(armaOrder = c(0,0), include.mean = T,
          *external.regressors = matrix(c(c1, c2), ncol = 2)*,
          arfima = F, archpow = 1, archm = F), distribution.model = "sstd")

*garchfit.GMC1* <- ugarchfit(spec = spec, data = data, solver = "hybrid")

I then work through SPD fitting to get the associated uniform variates.
They go through a copula fitting procedure, with
other variables, from which I later generate random variates (using
"rMvdc"). I then transform, say, column 4 of the
random variates matrix back to uniform variates to standardized residuals,
contained in a "qspd" object, *nf.SPD.sim.4*

I wish to correctly specify the "ugarchsim" function. I put the
pre-recorded innovations in the "custom.dist" slot, but I
am not sure how (or if) I should use "pre-sampled external regressor data
for use with models which were defined with
such (mexsimdata for conditional mean and vexsimdata for conditional
variance)".

nf.sim.GMC1.SPD.1 <- ugarchsim(*garchfit.GMC1*, n.sim = 100000, m.sim = 1,
          startMethod = "sample", n.start = 0,
          custom.dist = list(name = "sample", distfit = matrix(
*nf.SPD.sim.4*, ncol = 1), type = "z"))

Can anybody help me?

Also, please note: length(regressor data) = length(c5) = length(c1) =
length(c2) used in "ugarchspec" = 241, whereas the
number of observations I wish to simulate = 100,000.

Many thanks
Gareth

	[[alternative HTML version deleted]]


From martinsdiniz at gmail.com  Fri Mar  6 15:11:54 2015
From: martinsdiniz at gmail.com (Fernando Martins Diniz)
Date: Fri, 6 Mar 2015 11:11:54 -0300
Subject: [R-SIG-Finance] rmgarch - dccforecast function
Message-ID: <CA+xwsbswbo3952v0pa2uSZX2rL=J0MSPwxqTPi=cENaZnx=qoQ@mail.gmail.com>

Dear R users,

I am using the dccforecast function in the package rmgarch.
In the future I will the result to run a portfolio backtest.
For this reason I am doing the calculations in a loop.


rollingDCCmatrix <-
    function(data, eligibleAssets, from, to)
    {

        #Data is timeSeries of returns
        #eligibleAssets a list which contains for each loop i the assets
names
        #Time window : from and to

        DCCmatrix <- list()
        garch11.spec = ugarchspec(mean.model = list(armaOrder = c(0,0)),
                                  variance.model = list(garchOrder = c(1,1),
                                                        model = "sGARCH"),
                                  distribution.model = "norm")


        for (i in 1:length(from)) {

            #Separating the series
            assetsNames <- eligibleAssets[[i]]
            series <- window(data[, assetsNames], start = from[i], end =
to[i])

            #How many assets
            nAssets <- length(assetsNames)

            # The DCC specification - GARCH(1,1) for conditional
correlations
            dcc.garch11.spec = dccspec(uspec = multispec( replicate(nAssets,

garch11.spec) ),
                                       dccOrder = c(1,1),
                                       distribution = "mvnorm")
            # Estimating
            dcc.fit = dccfit(dcc.garch11.spec, series,
                             fit.control = list(eval.se = FALSE))
            dcc.fcst = dccforecast(dcc.fit, n.ahead=1)
            loopDCC <- rcov(dcc.fcst)
            DCCmatrix[[i]] <- loopDCC

            print(i)
        }

        # Compose Result:
        ans <- DCCmatrix

        # Return Value:
        invisible(ans)
    }

I run this function. After hundreds (690) loops I get the following  error
(and its traceback):

Error in last(rcor(fit, type = "Q"), mo) :
  error in the evaluation of the argument 'x' in the method of selection
for the function 'last': 'Error in 1:m : argument of length 0
'
6 last(rcor(fit, type = "Q"), mo)
5 .dccforecastm(fit, n.ahead = n.ahead, n.roll = n.roll, external.forecasts
= exf,
    cluster = cluster, realizedVol = fit at mfit$realizedVol, ...)
4 .dccforecast(fit, n.ahead = n.ahead, n.roll = n.roll, external.forecasts
= external.forecasts,
    cluster = cluster, ...)
3 dccforecast(dcc.fit, n.ahead = 1)
2 dccforecast(dcc.fit, n.ahead = 1)
1 rollingDCCmatrix(Brasil_returns, eligibleAssets, Brasil_from,
    Brasil_to)

I believe it is a strange error due to the fact I made daily windows and
the loop just behind worked fine. The eligible assets are the same and the
time window is the same size and have no NAs values. I looked in the source
code but sadly I am not very good programmer to see for myself where I got
it wrong.

I run the R-3.1.2 and the last update of rmgach.
Sorry for not providing a reproducible code. If it is necessary I may
provide the data used (need one authorization first).

Can anyone help me?
Thanks in advance.

Fernando Martins Diniz  - martinsdiniz at gmail.com

	[[alternative HTML version deleted]]


From alexios at 4dscape.com  Fri Mar  6 16:36:33 2015
From: alexios at 4dscape.com (alexios)
Date: Fri, 06 Mar 2015 15:36:33 +0000
Subject: [R-SIG-Finance] rmgarch - dccforecast function
In-Reply-To: <CA+xwsbswbo3952v0pa2uSZX2rL=J0MSPwxqTPi=cENaZnx=qoQ@mail.gmail.com>
References: <CA+xwsbswbo3952v0pa2uSZX2rL=J0MSPwxqTPi=cENaZnx=qoQ@mail.gmail.com>
Message-ID: <54F9C981.3040706@4dscape.com>

There is really not enough information to say what has happened.
It appears likely that on the window (690) you mention the model did not 
converge. You should take a look at the resulting fit object,
and possibly check for non-convergence (in which case, set solver
to "gosolnp")...assuming your returns data is of reasonable size, clean 
of NA's and does not have "huge" spikes/outliers.

Alexios

On 06/03/2015 14:11, Fernando Martins Diniz wrote:
> Dear R users,
>
> I am using the dccforecast function in the package rmgarch.
> In the future I will the result to run a portfolio backtest.
> For this reason I am doing the calculations in a loop.
>
>
> rollingDCCmatrix <-
>      function(data, eligibleAssets, from, to)
>      {
>
>          #Data is timeSeries of returns
>          #eligibleAssets a list which contains for each loop i the assets
> names
>          #Time window : from and to
>
>          DCCmatrix <- list()
>          garch11.spec = ugarchspec(mean.model = list(armaOrder = c(0,0)),
>                                    variance.model = list(garchOrder = c(1,1),
>                                                          model = "sGARCH"),
>                                    distribution.model = "norm")
>
>
>          for (i in 1:length(from)) {
>
>              #Separating the series
>              assetsNames <- eligibleAssets[[i]]
>              series <- window(data[, assetsNames], start = from[i], end =
> to[i])
>
>              #How many assets
>              nAssets <- length(assetsNames)
>
>              # The DCC specification - GARCH(1,1) for conditional
> correlations
>              dcc.garch11.spec = dccspec(uspec = multispec( replicate(nAssets,
>
> garch11.spec) ),
>                                         dccOrder = c(1,1),
>                                         distribution = "mvnorm")
>              # Estimating
>              dcc.fit = dccfit(dcc.garch11.spec, series,
>                               fit.control = list(eval.se = FALSE))
>              dcc.fcst = dccforecast(dcc.fit, n.ahead=1)
>              loopDCC <- rcov(dcc.fcst)
>              DCCmatrix[[i]] <- loopDCC
>
>              print(i)
>          }
>
>          # Compose Result:
>          ans <- DCCmatrix
>
>          # Return Value:
>          invisible(ans)
>      }
>
> I run this function. After hundreds (690) loops I get the following  error
> (and its traceback):
>
> Error in last(rcor(fit, type = "Q"), mo) :
>    error in the evaluation of the argument 'x' in the method of selection
> for the function 'last': 'Error in 1:m : argument of length 0
> '
> 6 last(rcor(fit, type = "Q"), mo)
> 5 .dccforecastm(fit, n.ahead = n.ahead, n.roll = n.roll, external.forecasts
> = exf,
>      cluster = cluster, realizedVol = fit at mfit$realizedVol, ...)
> 4 .dccforecast(fit, n.ahead = n.ahead, n.roll = n.roll, external.forecasts
> = external.forecasts,
>      cluster = cluster, ...)
> 3 dccforecast(dcc.fit, n.ahead = 1)
> 2 dccforecast(dcc.fit, n.ahead = 1)
> 1 rollingDCCmatrix(Brasil_returns, eligibleAssets, Brasil_from,
>      Brasil_to)
>
> I believe it is a strange error due to the fact I made daily windows and
> the loop just behind worked fine. The eligible assets are the same and the
> time window is the same size and have no NAs values. I looked in the source
> code but sadly I am not very good programmer to see for myself where I got
> it wrong.
>
> I run the R-3.1.2 and the last update of rmgach.
> Sorry for not providing a reproducible code. If it is necessary I may
> provide the data used (need one authorization first).
>
> Can anyone help me?
> Thanks in advance.
>
> Fernando Martins Diniz  - martinsdiniz at gmail.com
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>


From davidshanabrook at icloud.com  Sat Mar  7 15:56:44 2015
From: davidshanabrook at icloud.com (david hilton shanabrook)
Date: Sat, 07 Mar 2015 09:56:44 -0500
Subject: [R-SIG-Finance] Calculating ROI correctly and using
	chart.CumReturns()
Message-ID: <B5458590-D580-4A23-9615-BC1880F690EC@icloud.com>

I am trying to calculate return on investment for stocks. I think this is right, but don?t know how to test for accuracy. The code calculates several things: return on investment: (close to close), buy on close sell next day on open, short sell, short sell day trading. Maybe this will make it clearer:

          library(quantmod)
         library(PerformanceAnalytics)
        getSymbols('F', src='yahoo',from='2015-01-01')
        data <- get('F')
        adjD <- adjustOHLC(data, symbol.name='F')
        
        #calculate normal investment return
        clcl <- Delt(Lag(Cl(adjD)), Cl(adjD), type='log')
        chart.CumReturns(clcl)
        
        #then to calculate returns from previous day close to next day open
        clop <-  Delt(Lag(Cl(adjD)), Op(adjD), type='log')
        chart.CumReturns(clop)
        
        #then to calculate stock short
        clopSh <-  Delt(Cl(adjD), Lag(Cl(adjD)), type='log')
        chart.CumReturns(clopSh)
        
        #then to calculate day trade short, stock open to close
        opclSh <-  Delt(Cl(adjD), Op(adjD), type='log')
        chart.CumReturns(opclSh)

Suggestions? Especially concerned how I am calculating short sell.


	[[alternative HTML version deleted]]


From Olivier.Martin at avignon.inra.fr  Mon Mar  9 14:14:44 2015
From: Olivier.Martin at avignon.inra.fr (Olivier MARTIN)
Date: Mon, 09 Mar 2015 14:14:44 +0100
Subject: [R-SIG-Finance] quantmod EMA and SMA
Message-ID: <54FD9CC4.4080609@avignon.inra.fr>

Hi all,

I compare the serie from the function EMA() and the one from addEMA()

getSymbols("^FCHI")
M7=EMA(Cl(FCHI),7)
candleChart(FCHI,theme="white",subset="2015",TA=NULL)
addEMA(7)
addTA(M7,on=-1)

I don't understant why I don't obtain the same serie with the two 
functions...
Reagrds,
Olivier.


From josh.m.ulrich at gmail.com  Mon Mar  9 15:04:53 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 9 Mar 2015 09:04:53 -0500
Subject: [R-SIG-Finance] quantmod EMA and SMA
In-Reply-To: <54FD9CC4.4080609@avignon.inra.fr>
References: <54FD9CC4.4080609@avignon.inra.fr>
Message-ID: <CAPPM_gS5WVFY-04gCs4DEJ44gbGCzvPpLC0f6VEMXG9+wztgpA@mail.gmail.com>

On Mon, Mar 9, 2015 at 8:14 AM, Olivier MARTIN
<Olivier.Martin at avignon.inra.fr> wrote:
> Hi all,
>
> I compare the serie from the function EMA() and the one from addEMA()
>
>   getSymbols("^FCHI")
> M7=EMA(Cl(FCHI),7)
> candleChart(FCHI,theme="white",subset="2015",TA=NULL)
> addEMA(7)
> addTA(M7,on=-1)
>
> I don't understant why I don't obtain the same serie with the two
> functions...

M7 is calculated using the close price.  You didn't specify which
column to use in the addEMA call, so it used the first column--the
open.

> Reagrds,
> Olivier.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From thomas.fuller at coherentlogic.com  Wed Mar 11 14:01:32 2015
From: thomas.fuller at coherentlogic.com (Thomas Fuller)
Date: Wed, 11 Mar 2015 09:01:32 -0400
Subject: [R-SIG-Finance] CUSIP Data question and a sneak-peak at two packages
Message-ID: <CAM0JZ3=O0YSy8U3GqBiq27=wXXkJLPHY4X7Q9B2QvsX-8irNcA@mail.gmail.com>

Hi Folks,

I have been exploring the development of another package -- this one would
allow R users to acquire CUSIP data directly from CUSIP Global Services
(CGS) however, due to a number of business concerns, I'd like to see if
people actually want to use this package before progressing further with
this project.

I have a simple three-question survey below which will give you the
opportunity to register your interest:

https://www.surveymonkey.com/r/BVDJQPN

If anyone wants to use this package I encourage you to get in touch with me
and let me know.

Questions and comments are welcomed,

Tom

-----

PS. Below are links to two packages currently under development and both
are available under the LGPL license. I do welcome feedback if you find
either of these to be useful or interesting.

*R Package for the Infinispan API* -- this package is fairly well-developed:

https://coherentlogic.com/middleware-development/r-infinispan-api/

*R Package for the Groovy Scripting Language* -- this package works but I
need to simplify it in a few places:

https://coherentlogic.com/middleware-development/r-package-for-the-groovy-language/

	[[alternative HTML version deleted]]


From Josh-CH.Chien at nanshan.com.tw  Thu Mar 12 08:08:43 2015
From: Josh-CH.Chien at nanshan.com.tw (Chien, Josh-CH)
Date: Thu, 12 Mar 2015 15:08:43 +0800
Subject: [R-SIG-Finance] Kalman Filter Method in R library to Estimate and
 Forecast the Diebold-Li Yield Curve
Message-ID: <A29A84E40742CB43BBAE51703694429A702D3039E3@WNSP3NSLXMBV1.nsli.net>

Dear R users,
I'm working on this paper and need to implement model.
Choose R as my development tool.
Anyone know where I can find this library ?
Thanks a lot.


Ps. Diebold, F.X., Rudebusch, G.D. and Aruoba, B. (2006), "The Macroeconomy and the Yield Curve: A Dynamic Latent Factor Approach", Journal of Econometrics, 131, 309-338.

______________________________________
JOSH CHIEN
Risk Analytics & Projects
Enterprise Risk Management (ERM) Dept.
Nan Shan Life Insurance Co.
Email: Josh-CH.Chien at NANSHAN.com.tw<mailto:Matt-CM.Tsao at NANSHAN.com.tw>
DID: +886-2-8758-9522


________________________________
"NOTICE: The e-mail, and any attachments thereto, may co...{{dropped:12}}


From Tetsuro_Shimura at ssga.com  Thu Mar 12 08:36:47 2015
From: Tetsuro_Shimura at ssga.com (Shimura, Tetsuro)
Date: Thu, 12 Mar 2015 07:36:47 +0000
Subject: [R-SIG-Finance] Kalman Filter Method in R library to Estimate
 and Forecast the Diebold-Li Yield Curve
In-Reply-To: <A29A84E40742CB43BBAE51703694429A702D3039E3@WNSP3NSLXMBV1.nsli.net>
References: <A29A84E40742CB43BBAE51703694429A702D3039E3@WNSP3NSLXMBV1.nsli.net>
Message-ID: <B5BC21349ABA43469A96094854B1F776D934A145@GLSPW3217.corp.statestr.com>

Dear Josh-Ch,

I haven't applied for yield curve estimation, but you can find Kalman Filter Method in dlm package produced by Giovanni Petris.
He wrote a book titled "Dynamic Liner Models with R" with others and showed the use of the package for term structure estimation. In this section, he referred the paper you listed below.


Thanks,

Tetsuro Shimura



-----Original Message-----
From: R-SIG-Finance [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Chien, Josh-CH
Sent: Thursday, March 12, 2015 4:09 PM
To: r-sig-finance at r-project.org
Subject: [R-SIG-Finance] Kalman Filter Method in R library to Estimate and Forecast the Diebold-Li Yield Curve

Dear R users,
I'm working on this paper and need to implement model.
Choose R as my development tool.
Anyone know where I can find this library ?
Thanks a lot.


Ps. Diebold, F.X., Rudebusch, G.D. and Aruoba, B. (2006), "The Macroeconomy and the Yield Curve: A Dynamic Latent Factor Approach", Journal of Econometrics, 131, 309-338.

______________________________________
JOSH CHIEN
Risk Analytics & Projects
Enterprise Risk Management (ERM) Dept.
Nan Shan Life Insurance Co.
Email: Josh-CH.Chien at NANSHAN.com.tw<mailto:Matt-CM.Tsao at NANSHAN.com.tw>
DID: +886-2-8758-9522


________________________________
"NOTICE: The e-mail, and any attachments thereto, may co...{{dropped:9}}


From pankajsbi at yahoo.com  Thu Mar 12 11:29:34 2015
From: pankajsbi at yahoo.com (Pankaj K Agarwal)
Date: Thu, 12 Mar 2015 10:29:34 +0000 (UTC)
Subject: [R-SIG-Finance] [r-sig-finance] analyzing monthly portfolio
 holdings of 250 funds across 10 years.
Message-ID: <1102533779.402998.1426156174369.JavaMail.yahoo@mail.yahoo.com>

Dear all,I am working on monthly portfolio holdings data of about 250 Indian equity mutual funds. The analysis includes computing active share for each of these funds. Has someone handled this kind of analysis? Kindly suggest package and tips.?Thanks and Regards,Pankaj K Agarwal
+91-94153 97472http://in.linkedin.com/in/pankajkagarwal/
	[[alternative HTML version deleted]]


From n-e-w at qtradr.net  Thu Mar 12 11:42:22 2015
From: n-e-w at qtradr.net (Nick White)
Date: Thu, 12 Mar 2015 21:42:22 +1100
Subject: [R-SIG-Finance] [r-sig-finance] analyzing monthly portfolio
 holdings of 250 funds across 10 years.
In-Reply-To: <1102533779.402998.1426156174369.JavaMail.yahoo@mail.yahoo.com>
References: <1102533779.402998.1426156174369.JavaMail.yahoo@mail.yahoo.com>
Message-ID: <CAH+4RFt+E99dgdhaEp8gYpg8pa45oGCc48N3A43qZ+=CXq6=RA@mail.gmail.com>

Perhaps you might provide us with some more details of what it is you're
looking to accomplish exactly? Datasets you're working with...output format
you're working towards etc...

On Thu, Mar 12, 2015 at 9:29 PM, Pankaj K Agarwal via R-SIG-Finance <
r-sig-finance at r-project.org> wrote:

> Dear all,I am working on monthly portfolio holdings data of about 250
> Indian equity mutual funds. The analysis includes computing active share
> for each of these funds. Has someone handled this kind of analysis? Kindly
> suggest package and tips. Thanks and Regards,Pankaj K Agarwal
> +91-94153 97472http://in.linkedin.com/in/pankajkagarwal/
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.

	[[alternative HTML version deleted]]


From josh.m.ulrich at gmail.com  Sat Mar 14 17:22:12 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sat, 14 Mar 2015 11:22:12 -0500
Subject: [R-SIG-Finance] quantmod EMA and SMA
In-Reply-To: <CAPPM_gS5WVFY-04gCs4DEJ44gbGCzvPpLC0f6VEMXG9+wztgpA@mail.gmail.com>
References: <54FD9CC4.4080609@avignon.inra.fr>
	<CAPPM_gS5WVFY-04gCs4DEJ44gbGCzvPpLC0f6VEMXG9+wztgpA@mail.gmail.com>
Message-ID: <CAPPM_gQO0ty=RRRD6JH6f_r3vaa2DGuvbp7yYtDUrjNVx=9tbg@mail.gmail.com>

On Mon, Mar 9, 2015 at 9:04 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> On Mon, Mar 9, 2015 at 8:14 AM, Olivier MARTIN
> <Olivier.Martin at avignon.inra.fr> wrote:
>> Hi all,
>>
>> I compare the serie from the function EMA() and the one from addEMA()
>>
>>   getSymbols("^FCHI")
>> M7=EMA(Cl(FCHI),7)
>> candleChart(FCHI,theme="white",subset="2015",TA=NULL)
>> addEMA(7)
>> addTA(M7,on=-1)
>>
>> I don't understant why I don't obtain the same serie with the two
>> functions...
>
> M7 is calculated using the close price.  You didn't specify which
> column to use in the addEMA call, so it used the first column--the
> open.
>
It looks like this is a long-standing bug.  The current behavior
originated in 2008, so I checked with Jeff.  He confirmed that the
intention was to choose the Close if the data were OHLC and with.col
was not specified.

I have filed and fixed the issue.
https://github.com/joshuaulrich/quantmod/issues/41

Thanks for the report!

>> Reagrds,
>> Olivier.
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>
>
>
> --
> Joshua Ulrich  |  about.me/joshuaulrich
> FOSS Trading  |  www.fosstrading.com



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From wotuzu17 at gmail.com  Sun Mar 15 15:11:22 2015
From: wotuzu17 at gmail.com (Andreas Voellenklee)
Date: Sun, 15 Mar 2015 15:11:22 +0100
Subject: [R-SIG-Finance] Weird behavior of getSymbols for symbol PLL and PL
Message-ID: <CAKC0Bh=Dyb6_9U3DtSjDsR2FDY1Wf=yXXoRFwg8v_fj1cVj9Dg@mail.gmail.com>

Hi,

I am getting strange results when using getSymbols for the symbols "PLL"
and "PL". The prices are all over the place. See the output below. Can
anybody reproduce this?

Thanks,

Andreas



voellenk at nucd:~$ R --vanilla

R version 3.1.3 (2015-03-09) -- "Smooth Sidewalk"
Copyright (C) 2015 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library(quantmod)
Loading required package: Defaults
Loading required package: xts
Loading required package: zoo

Attaching package: ?zoo?

The following objects are masked from ?package:base?:

    as.Date, as.Date.numeric

Loading required package: TTR
Version 0.4-0 included new data defaults. See ?getSymbols.
> getSymbols("PLL")
    As of 0.4-0, ?getSymbols? uses env=parent.frame() and
 auto.assign=TRUE by default.

 This  behavior  will be  phased out in 0.5-0  when the call  will
 default to use auto.assign=FALSE. getOption("getSymbols.env") and
 getOptions("getSymbols.auto.assign") are now checked for alternate defaults

 This message is shown once per session and may be disabled by setting
 options("getSymbols.warning4.0"=FALSE). See ?getSymbol for more details
[1] "PLL"
> head(PLL)
           PLL.Open PLL.High PLL.Low PLL.Close PLL.Volume PLL.Adjusted
2007-01-02    63.90    65.81   63.90     63.90          0        28.21
2007-01-03    35.08    35.19   34.53     34.89     652000        15.40
2007-01-04    34.69    34.74   34.32     34.69     504800        15.32
2007-01-05    34.00    34.25   33.61     33.75    1135000        14.90
2007-01-08    33.72    33.74   33.23     33.71     578800        14.88
2007-01-09    33.90    34.27   33.67     34.21     743400        15.10
> tail(PLL)
           PLL.Open PLL.High PLL.Low PLL.Close PLL.Volume PLL.Adjusted
2015-03-06  1446.86  1446.86 1446.86   1446.86          0      1446.86
2015-03-09  1446.86  1446.86 1446.86   1446.86          0      1446.86
2015-03-10  1446.86  1446.86 1446.86   1446.86          0      1446.86
2015-03-11  1446.86  1446.86 1446.86   1446.86          0      1446.86
2015-03-12  1446.86  1446.86 1446.86   1446.86          0      1446.86
2015-03-13  1446.86  1446.86 1446.86   1446.86          0      1446.86
> getSymbols(PL)
Error in force(Symbols) : object 'PL' not found
> getSymbols("PL")
[1] "PL"
> chartSeries(PL)
> head(PL)
           PL.Open PL.High PL.Low PL.Close PL.Volume PL.Adjusted
2007-01-01    2.82    2.82   2.82     2.82         0        2.11
2007-01-02    2.82    2.82   2.82     2.82         0        2.11
2007-01-03   47.79   48.56  47.50    47.95    379100       35.86
2007-01-04   47.93   48.30  47.82    48.00    356300       35.90
2007-01-05   48.25   50.45  48.25    50.35   1092100       37.66
2007-01-08   50.17   50.45  49.62    49.76    647400       37.22
> tail(PL)
           PL.Open PL.High PL.Low PL.Close PL.Volume PL.Adjusted
2015-02-23    4.70    4.70   4.34     4.34   7398600        4.34
2015-02-24    4.44    4.44   4.34     4.34   2495400        4.34
2015-02-25    4.34    4.38   4.28     4.30   1065100        4.30
2015-02-26    4.28    4.30   4.26     4.28    618500        4.28
2015-02-27    4.28    4.32   4.26     4.28    868300        4.28
2015-03-02    4.28    4.38   4.28     4.38    536200        4.38
> sessionInfo()
R version 3.1.3 (2015-03-09)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 14.04.2 LTS

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=de_DE.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=de_DE.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=de_DE.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=de_DE.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] quantmod_0.4-1 TTR_0.22-0.1   xts_0.9-7      zoo_1.7-11
Defaults_1.1-1

loaded via a namespace (and not attached):
[1] grid_3.1.3      lattice_0.20-30

	[[alternative HTML version deleted]]


From gsee000 at gmail.com  Sun Mar 15 15:19:35 2015
From: gsee000 at gmail.com (G See)
Date: Sun, 15 Mar 2015 09:19:35 -0500
Subject: [R-SIG-Finance] Weird behavior of getSymbols for symbol PLL and
	PL
In-Reply-To: <CAKC0Bh=Dyb6_9U3DtSjDsR2FDY1Wf=yXXoRFwg8v_fj1cVj9Dg@mail.gmail.com>
References: <CAKC0Bh=Dyb6_9U3DtSjDsR2FDY1Wf=yXXoRFwg8v_fj1cVj9Dg@mail.gmail.com>
Message-ID: <CA+xi=qY8g40dLq+yk9LSA3vn9jvPHzHsm3B_RCdA7kZHrmaCCA@mail.gmail.com>

Not reproducible for me.  I've got an older version of R and a newer
version of quantmod

$ R --vanilla -q
> suppressMessages(library(quantmod))
> options("getSymbols.warning4.0"=FALSE)
> getSymbols(c("PLL", "PL"))
[1] "PLL" "PL"
> head(PLL)
           PLL.Open PLL.High PLL.Low PLL.Close PLL.Volume PLL.Adjusted
2007-01-03    35.08    35.19   34.53     34.89     668100        30.77
2007-01-04    34.69    34.74   34.32     34.69     521500        30.60
2007-01-05    34.00    34.25   33.61     33.75    1171600        29.77
2007-01-08    33.72    33.74   33.23     33.71     656700        29.73
2007-01-09    33.90    34.27   33.67     34.21     765000        30.17
2007-01-10    34.00    34.15   33.77     34.07     708000        30.05
> tail(PLL)
           PLL.Open PLL.High PLL.Low PLL.Close PLL.Volume PLL.Adjusted
2015-03-06   101.18   101.85   99.90    100.17     510200       100.17
2015-03-09   100.10   100.42  100.00    100.22     441700       100.22
2015-03-10    98.79    99.67   98.25     98.25     529600        98.25
2015-03-11    98.25    98.37   97.54     97.91     445700        97.91
2015-03-12    98.52    99.75   98.40     99.55     438600        99.55
2015-03-13    99.45    99.79   98.54     99.61     437300        99.61
> head(PL)
           PL.Open PL.High PL.Low PL.Close PL.Volume PL.Adjusted
2007-01-03   47.79   48.56  47.50    47.95    380100       39.01
2007-01-04   47.93   48.30  47.82    48.00    370300       39.05
2007-01-05   48.25   50.45  48.25    50.35   1108300       40.96
2007-01-08   50.17   50.45  49.62    49.76    656300       40.48
2007-01-09   49.74   49.74  49.23    49.61    473200       40.36
2007-01-10   49.48   50.06  49.43    49.67    467100       40.41
> tail(PL)
           PL.Open PL.High PL.Low PL.Close PL.Volume PL.Adjusted
2015-01-23   69.94   69.96  69.94    69.95   1111500       69.95
2015-01-26   69.95   69.95  69.94    69.95    630900       69.95
2015-01-27   69.95   69.98  69.95    69.96    643800       69.96
2015-01-28   69.98   69.98  69.95    69.95    975200       69.95
2015-01-29   69.98   69.98  69.96    69.96    915500       69.96
2015-01-30   69.99   70.01  69.95    69.95   9516700       69.95

> sessionInfo()
R version 3.1.2 (2014-10-31)
Platform: x86_64-apple-darwin13.4.0 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] quantmod_0.4-3 TTR_0.22-0     xts_0.9-7      zoo_1.7-11

loaded via a namespace (and not attached):
[1] grid_3.1.2      lattice_0.20-29

Garrett


From rhelpacc at gmail.com  Tue Mar 17 04:19:04 2015
From: rhelpacc at gmail.com (Robert A'gata)
Date: Mon, 16 Mar 2015 23:19:04 -0400
Subject: [R-SIG-Finance] Online Hayashi-Yoshida estimator
Message-ID: <CAA7=MyWO=uMuYgoHGfRgRT9KLf+ydiUGJCbUhh66jqkdsG4O1w@mail.gmail.com>

Hi,

Does anyone know of an on-line implementation of Hayashi Yoshida covariance
estimator? Let's say that we have to time series ticked asynchronously and
we would like to update the realized covariance once either ticks so that
we do not have to keep in memory all the tick history. Any idea please?
Thank you.

Best,

Robert

	[[alternative HTML version deleted]]


From hasan.diwan at gmail.com  Tue Mar 17 05:04:37 2015
From: hasan.diwan at gmail.com (Hasan Diwan)
Date: Mon, 16 Mar 2015 21:04:37 -0700
Subject: [R-SIG-Finance] Online Hayashi-Yoshida estimator
In-Reply-To: <CAA7=MyWO=uMuYgoHGfRgRT9KLf+ydiUGJCbUhh66jqkdsG4O1w@mail.gmail.com>
References: <CAA7=MyWO=uMuYgoHGfRgRT9KLf+ydiUGJCbUhh66jqkdsG4O1w@mail.gmail.com>
Message-ID: <CAP+bYWCYbU_SGCBi0EQhzKq9X1SxjCMki+_czGtN3GwBEbc=Gw@mail.gmail.com>

There is a yuima package that claims to have the Hayashi-Yoshida covariance
estimator since 2009. The link is
http://r-forge.r-project.org/projects/yuima/ and I hope it helps. -- H

On 16 March 2015 at 20:19, Robert A'gata <rhelpacc at gmail.com> wrote:

> Hi,
>
> Does anyone know of an on-line implementation of Hayashi Yoshida covariance
> estimator? Let's say that we have to time series ticked asynchronously and
> we would like to update the realized covariance once either ticks so that
> we do not have to keep in memory all the tick history. Any idea please?
> Thank you.
>
> Best,
>
> Robert
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>



-- 
OpenPGP: https://hasan.d8u.us/gpg.key
Sent from my mobile device
Envoy? de mon portable

	[[alternative HTML version deleted]]


From rhelpacc at gmail.com  Tue Mar 17 05:39:00 2015
From: rhelpacc at gmail.com (Robert A'gata)
Date: Tue, 17 Mar 2015 00:39:00 -0400
Subject: [R-SIG-Finance] Online Hayashi-Yoshida estimator
In-Reply-To: <CAP+bYWCYbU_SGCBi0EQhzKq9X1SxjCMki+_czGtN3GwBEbc=Gw@mail.gmail.com>
References: <CAA7=MyWO=uMuYgoHGfRgRT9KLf+ydiUGJCbUhh66jqkdsG4O1w@mail.gmail.com>
	<CAP+bYWCYbU_SGCBi0EQhzKq9X1SxjCMki+_czGtN3GwBEbc=Gw@mail.gmail.com>
Message-ID: <CAA7=MyVd8_O+MQir7ouiZi7d1OJmvD8twTHbfrOwZKKO5=a33g@mail.gmail.com>

Thank you Hasan. I looked into the c code of Yuima. It is an off-line
version, i.e. it passes in entire arrays of returns on both assets for
which you want to compute covariance. Rather, I'm looking for an idea to
implement the estimator in an on-line fashion.

On Tue, Mar 17, 2015 at 12:04 AM, Hasan Diwan <hasan.diwan at gmail.com> wrote:

> There is a yuima package that claims to have the Hayashi-Yoshida covariance
> estimator since 2009. The link is
> http://r-forge.r-project.org/projects/yuima/ and I hope it helps. -- H
>
> On 16 March 2015 at 20:19, Robert A'gata <rhelpacc at gmail.com> wrote:
>
> > Hi,
> >
> > Does anyone know of an on-line implementation of Hayashi Yoshida
> covariance
> > estimator? Let's say that we have to time series ticked asynchronously
> and
> > we would like to update the realized covariance once either ticks so that
> > we do not have to keep in memory all the tick history. Any idea please?
> > Thank you.
> >
> > Best,
> >
> > Robert
> >
> >         [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions
> > should go.
> >
>
>
>
> --
> OpenPGP: https://hasan.d8u.us/gpg.key
> Sent from my mobile device
> Envoy? de mon portable
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.

	[[alternative HTML version deleted]]


From caodingxian at 163.com  Tue Mar 17 08:31:33 2015
From: caodingxian at 163.com (=?GB2312?B?sty2ps/N?=)
Date: Tue, 17 Mar 2015 15:31:33 +0800
Subject: [R-SIG-Finance] Error when Using fPortfolio to plot the fitting
Message-ID: <3BD83179-ECB0-44E7-9170-F2DC730A77A1@163.com>

Dear All, 
    I was learning using the package fPortfolio by the ebook Portfolio Optimization. When I was using the function to print the fitting result which is completely the same as that in the book, there was an error report as follows:   

	>library(fPortfolio)
	> fit <- assetsFit(LPP2005.RET[, 1:3], method = "st")
	Warning Messages??
	In whichFormat(charvec[1]) :
  	  character string is not in a standard unambiguous format
	> plot(fit,1)
	Error at as.double(x) :
	  cannot coerce type 'S4' to vector of type ??double?? 
	 
  The correct result should be a group of picture to show the effect of fitting. Could anyone give me some instructions? THANK YOU.

Best Regards, 
Cao Dingxian
	[[alternative HTML version deleted]]


From brian at braverock.com  Tue Mar 17 09:29:54 2015
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 17 Mar 2015 03:29:54 -0500
Subject: [R-SIG-Finance] Online Hayashi-Yoshida estimator
In-Reply-To: <CAA7=MyVd8_O+MQir7ouiZi7d1OJmvD8twTHbfrOwZKKO5=a33g@mail.gmail.com>
References: <CAA7=MyWO=uMuYgoHGfRgRT9KLf+ydiUGJCbUhh66jqkdsG4O1w@mail.gmail.com>	<CAP+bYWCYbU_SGCBi0EQhzKq9X1SxjCMki+_czGtN3GwBEbc=Gw@mail.gmail.com>
	<CAA7=MyVd8_O+MQir7ouiZi7d1OJmvD8twTHbfrOwZKKO5=a33g@mail.gmail.com>
Message-ID: <5507E602.7080506@braverock.com>

Do you have a reference for the on-line version?  It generally helps 
others to help you if they can look at the paper(s) which describe the 
technique you wish to replicate.

Regards,

Brian

On 03/16/2015 11:39 PM, Robert A'gata wrote:
> Thank you Hasan. I looked into the c code of Yuima. It is an off-line
> version, i.e. it passes in entire arrays of returns on both assets for
> which you want to compute covariance. Rather, I'm looking for an idea to
> implement the estimator in an on-line fashion.
>
> On Tue, Mar 17, 2015 at 12:04 AM, Hasan Diwan <hasan.diwan at gmail.com> wrote:
>
>> There is a yuima package that claims to have the Hayashi-Yoshida covariance
>> estimator since 2009. The link is
>> http://r-forge.r-project.org/projects/yuima/ and I hope it helps. -- H
>>
>> On 16 March 2015 at 20:19, Robert A'gata <rhelpacc at gmail.com> wrote:
>>
>>> Hi,
>>>
>>> Does anyone know of an on-line implementation of Hayashi Yoshida
>> covariance
>>> estimator? Let's say that we have to time series ticked asynchronously
>> and
>>> we would like to update the realized covariance once either ticks so that
>>> we do not have to keep in memory all the tick history. Any idea please?
>>> Thank you.
>>>
>>> Best,
>>>
>>> Robert


From rhelpacc at gmail.com  Thu Mar 19 00:18:49 2015
From: rhelpacc at gmail.com (Robert A'gata)
Date: Wed, 18 Mar 2015 19:18:49 -0400
Subject: [R-SIG-Finance] Online Hayashi-Yoshida estimator
In-Reply-To: <5507E602.7080506@braverock.com>
References: <CAA7=MyWO=uMuYgoHGfRgRT9KLf+ydiUGJCbUhh66jqkdsG4O1w@mail.gmail.com>
	<CAP+bYWCYbU_SGCBi0EQhzKq9X1SxjCMki+_czGtN3GwBEbc=Gw@mail.gmail.com>
	<CAA7=MyVd8_O+MQir7ouiZi7d1OJmvD8twTHbfrOwZKKO5=a33g@mail.gmail.com>
	<5507E602.7080506@braverock.com>
Message-ID: <CAA7=MyUtDFFOvJF=-kQFk3dpKePrzT7G70mrY0NZyeKrFXY07g@mail.gmail.com>

Hi Brian - To the best of my knowledge, I don't know any literature that
describes an on-line estimation method for the HY covariance estimator. I
am raising this question on this forum to brainstorm and get some ideas.

Intuitively since the estimator is only caring about overlapping returns
between the two asynchronous tick streams, doing this online might not seem
to be a daunting task. I attempted a couple of times by trying to keep
tracking of last overlapping period and discard all the ticks that are
completely "overlapped or enveloped" in the past. But for some reason, it
didn't go so well. So I would like to pick some ideas if anybody has any.

Thank you.

Robert

On Tue, Mar 17, 2015 at 4:29 AM, Brian G. Peterson <brian at braverock.com>
wrote:

> Do you have a reference for the on-line version?  It generally helps
> others to help you if they can look at the paper(s) which describe the
> technique you wish to replicate.
>
> Regards,
>
> Brian
>
> On 03/16/2015 11:39 PM, Robert A'gata wrote:
>
>> Thank you Hasan. I looked into the c code of Yuima. It is an off-line
>> version, i.e. it passes in entire arrays of returns on both assets for
>> which you want to compute covariance. Rather, I'm looking for an idea to
>> implement the estimator in an on-line fashion.
>>
>> On Tue, Mar 17, 2015 at 12:04 AM, Hasan Diwan <hasan.diwan at gmail.com>
>> wrote:
>>
>>  There is a yuima package that claims to have the Hayashi-Yoshida
>>> covariance
>>> estimator since 2009. The link is
>>> http://r-forge.r-project.org/projects/yuima/ and I hope it helps. -- H
>>>
>>> On 16 March 2015 at 20:19, Robert A'gata <rhelpacc at gmail.com> wrote:
>>>
>>>  Hi,
>>>>
>>>> Does anyone know of an on-line implementation of Hayashi Yoshida
>>>>
>>> covariance
>>>
>>>> estimator? Let's say that we have to time series ticked asynchronously
>>>>
>>> and
>>>
>>>> we would like to update the realized covariance once either ticks so
>>>> that
>>>> we do not have to keep in memory all the tick history. Any idea please?
>>>> Thank you.
>>>>
>>>> Best,
>>>>
>>>> Robert
>>>>
>>>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From ezivot at u.washington.edu  Fri Mar 20 18:08:57 2015
From: ezivot at u.washington.edu (Eric Zivot)
Date: Fri, 20 Mar 2015 10:08:57 -0700 (PDT)
Subject: [R-SIG-Finance] problem subsetting xts object with yearmon time
	index
Message-ID: <alpine.LRH.2.01.1503201008570.22522@hymn01.u.washington.edu>

I seem to have a problem sub-setting an xts object with a yearmon time index. I have a xts object holding monthly returns where the time index is a yearmon object. When I subset the data for 2014 using ?2014? within the xts object I don?t get the data for January. However, if I subset the data using window() I get all of the data for 2014. Below is the example (from Rstudio on windows 8) and output. Why is January missing when I subset using mydata.xts["2014"]????

 

> options(digits=3, width=70)

> # IntroCompFinR available from R-forge

> # install.packages("IntroCompFinR", repos="http://R-Forge.R-project.org")

> library(IntroCompFinR)

> library(PerformanceAnalytics)

>

> #

> # load data and compute returns - MSFT

> #

>

> data(msftMonthlyPrices)

> msftRetC = na.omit(Return.calculate(msftMonthlyPrices,

+                                     method="log"))

> head(msftRetC, n=3)

            MSFT

Feb 1993 -0.0371

Mar 1993  0.1075

Apr 1993 -0.0809

> tail(msftRetC, n=3)

            MSFT

Oct 2014  0.0128

Nov 2014  0.0243

Dec 2014 -0.0289

> class(index(msftRetC))

[1] "yearmon"

> # restric returns to last year

> msftRetC2014 = msftRetC["2014"]

> msftRetC2014

            MSFT

Feb 2014  0.0198

Mar 2014  0.0676

Apr 2014 -0.0144

May 2014  0.0204

Jun 2014  0.0183

Jul 2014  0.0344

Aug 2014  0.0576

Sep 2014  0.0201

Oct 2014  0.0128

Nov 2014  0.0243

Dec 2014 -0.0289

> # why is January missing?????

> as.Date(index(msftRetC2014))

[1] "2014-02-01" "2014-03-01" "2014-04-01" "2014-05-01" "2014-06-01"

[6] "2014-07-01" "2014-08-01" "2014-09-01" "2014-10-01" "2014-11-01"

[11] "2014-12-01"

> # I get the right data using window()

> window(msftRetC, start=as.yearmon("Jan 2014"), end=as.yearmon("Dec 2014"))

            MSFT

Jan 2014  0.0113

Feb 2014  0.0198

Mar 2014  0.0676

Apr 2014 -0.0144

May 2014  0.0204

Jun 2014  0.0183

Jul 2014  0.0344

Aug 2014  0.0576

Sep 2014  0.0201

Oct 2014  0.0128

Nov 2014  0.0243

Dec 2014 -0.0289

> sessionInfo()

R version 3.1.2 (2014-10-31)

Platform: x86_64-w64-mingw32/x64 (64-bit)

 

locale:

[1] LC_COLLATE=English_United States.1252

[2] LC_CTYPE=English_United States.1252  

[3] LC_MONETARY=English_United States.1252

[4] LC_NUMERIC=C                         

[5] LC_TIME=English_United States.1252   

 

attached base packages:

[1] stats     graphics  grDevices utils     datasets  methods 

[7] base    

 

other attached packages:

[1] boot_1.3-13                   PerformanceAnalytics_1.4.3541

[3] IntroCompFinR_1.0             xts_0.9-7                   

[5] zoo_1.7-11                  

 

loaded via a namespace (and not attached):

[1] digest_0.6.8    grid_3.1.2      htmltools_0.2.6 lattice_0.20-29

[5] rmarkdown_0.5.1 tools_3.1.2     yaml_2.1.13

 

Thanks in advance for any insight.

	 	
 


From ezivot at u.washington.edu  Fri Mar 20 18:11:40 2015
From: ezivot at u.washington.edu (Eric Zivot)
Date: Fri, 20 Mar 2015 10:11:40 -0700 (PDT)
Subject: [R-SIG-Finance] Online trading systems development courses using R
 at University of Washington
Message-ID: <alpine.LRH.2.01.1503201011400.22522@hymn01.u.washington.edu>

For folks interested in learning more about trading systems development with the R packages quantstrat and blotter, there is a 2-course sequence in the Computational Finance & Risk Management (CF&RM) program at the University of Washington starting March 31st:


Introduction to Trading Systems Development, taught by Guy Yollin; March 31 ? June 5
Advanced Trading Systems Development, with lead lecturer Brian Peterson; June 22 ? August 21


These courses are available online for a fee. More information is available at this link: http://depts.washington.edu/compfin/trading-systems-sequence

Eric Zivot

Robert Richards Professor of Economics

Adjunct Professor of Applied Mathematics

Adjunct Professor of Finance

Adjunct Professor of Statistics

University of Washington

From josh.m.ulrich at gmail.com  Fri Mar 20 18:18:00 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Fri, 20 Mar 2015 12:18:00 -0500
Subject: [R-SIG-Finance] problem subsetting xts object with yearmon time
	index
In-Reply-To: <alpine.LRH.2.01.1503201008570.22522@hymn01.u.washington.edu>
References: <alpine.LRH.2.01.1503201008570.22522@hymn01.u.washington.edu>
Message-ID: <CAPPM_gQsd3xNfCkSyyakc_+8VQZ=R2ah3tAAABWHdcAsMnEUrQ@mail.gmail.com>

I can confirm this behavior with a simplified example using zoo 1.7-12
and the latest development xts.

> data(sample_matrix)
> x <- as.xts(sample_matrix)
> y <- to.monthly(x)
> y['2007']
           x.Open   x.High    x.Low  x.Close
Feb 2007 50.22448 51.32342 50.19101 50.77091
Mar 2007 50.81620 50.81620 48.23648 48.97490
Apr 2007 48.94407 50.33781 48.80962 49.33974
May 2007 49.34572 49.69097 47.51796 47.73780
Jun 2007 47.74432 47.94127 47.09144 47.76719


Thanks for the report.  I'll investigate.

Best,
Josh


On Fri, Mar 20, 2015 at 12:08 PM, Eric Zivot <ezivot at u.washington.edu> wrote:
> I seem to have a problem sub-setting an xts object with a yearmon time index. I have a xts object holding monthly returns where the time index is a yearmon object. When I subset the data for 2014 using ?2014? within the xts object I don?t get the data for January. However, if I subset the data using window() I get all of the data for 2014. Below is the example (from Rstudio on windows 8) and output. Why is January missing when I subset using mydata.xts["2014"]????
>
>
>
>> options(digits=3, width=70)
>
>> # IntroCompFinR available from R-forge
>
>> # install.packages("IntroCompFinR", repos="http://R-Forge.R-project.org")
>
>> library(IntroCompFinR)
>
>> library(PerformanceAnalytics)
>
>>
>
>> #
>
>> # load data and compute returns - MSFT
>
>> #
>
>>
>
>> data(msftMonthlyPrices)
>
>> msftRetC = na.omit(Return.calculate(msftMonthlyPrices,
>
> +                                     method="log"))
>
>> head(msftRetC, n=3)
>
>             MSFT
>
> Feb 1993 -0.0371
>
> Mar 1993  0.1075
>
> Apr 1993 -0.0809
>
>> tail(msftRetC, n=3)
>
>             MSFT
>
> Oct 2014  0.0128
>
> Nov 2014  0.0243
>
> Dec 2014 -0.0289
>
>> class(index(msftRetC))
>
> [1] "yearmon"
>
>> # restric returns to last year
>
>> msftRetC2014 = msftRetC["2014"]
>
>> msftRetC2014
>
>             MSFT
>
> Feb 2014  0.0198
>
> Mar 2014  0.0676
>
> Apr 2014 -0.0144
>
> May 2014  0.0204
>
> Jun 2014  0.0183
>
> Jul 2014  0.0344
>
> Aug 2014  0.0576
>
> Sep 2014  0.0201
>
> Oct 2014  0.0128
>
> Nov 2014  0.0243
>
> Dec 2014 -0.0289
>
>> # why is January missing?????
>
>> as.Date(index(msftRetC2014))
>
> [1] "2014-02-01" "2014-03-01" "2014-04-01" "2014-05-01" "2014-06-01"
>
> [6] "2014-07-01" "2014-08-01" "2014-09-01" "2014-10-01" "2014-11-01"
>
> [11] "2014-12-01"
>
>> # I get the right data using window()
>
>> window(msftRetC, start=as.yearmon("Jan 2014"), end=as.yearmon("Dec 2014"))
>
>             MSFT
>
> Jan 2014  0.0113
>
> Feb 2014  0.0198
>
> Mar 2014  0.0676
>
> Apr 2014 -0.0144
>
> May 2014  0.0204
>
> Jun 2014  0.0183
>
> Jul 2014  0.0344
>
> Aug 2014  0.0576
>
> Sep 2014  0.0201
>
> Oct 2014  0.0128
>
> Nov 2014  0.0243
>
> Dec 2014 -0.0289
>
>> sessionInfo()
>
> R version 3.1.2 (2014-10-31)
>
> Platform: x86_64-w64-mingw32/x64 (64-bit)
>
>
>
> locale:
>
> [1] LC_COLLATE=English_United States.1252
>
> [2] LC_CTYPE=English_United States.1252
>
> [3] LC_MONETARY=English_United States.1252
>
> [4] LC_NUMERIC=C
>
> [5] LC_TIME=English_United States.1252
>
>
>
> attached base packages:
>
> [1] stats     graphics  grDevices utils     datasets  methods
>
> [7] base
>
>
>
> other attached packages:
>
> [1] boot_1.3-13                   PerformanceAnalytics_1.4.3541
>
> [3] IntroCompFinR_1.0             xts_0.9-7
>
> [5] zoo_1.7-11
>
>
>
> loaded via a namespace (and not attached):
>
> [1] digest_0.6.8    grid_3.1.2      htmltools_0.2.6 lattice_0.20-29
>
> [5] rmarkdown_0.5.1 tools_3.1.2     yaml_2.1.13
>
>
>
> Thanks in advance for any insight.
>
>
>
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From daniel.cegielka at gmail.com  Fri Mar 20 18:30:00 2015
From: daniel.cegielka at gmail.com (=?UTF-8?Q?Daniel_Cegie=C5=82ka?=)
Date: Fri, 20 Mar 2015 18:30:00 +0100
Subject: [R-SIG-Finance] problem subsetting xts object with yearmon time
	index
In-Reply-To: <CAPPM_gQsd3xNfCkSyyakc_+8VQZ=R2ah3tAAABWHdcAsMnEUrQ@mail.gmail.com>
References: <alpine.LRH.2.01.1503201008570.22522@hymn01.u.washington.edu>
	<CAPPM_gQsd3xNfCkSyyakc_+8VQZ=R2ah3tAAABWHdcAsMnEUrQ@mail.gmail.com>
Message-ID: <CAPLrYERygOA-bUwuiZb2iJ21nwy7gMAgXtmJZOU572sPL+3XpA@mail.gmail.com>

2015-03-20 18:18 GMT+01:00 Joshua Ulrich <josh.m.ulrich at gmail.com>:
> I can confirm this behavior with a simplified example using zoo 1.7-12
> and the latest development xts.
>
>> data(sample_matrix)
>> x <- as.xts(sample_matrix)
>> y <- to.monthly(x)
>> y['2007']
>            x.Open   x.High    x.Low  x.Close
> Feb 2007 50.22448 51.32342 50.19101 50.77091
> Mar 2007 50.81620 50.81620 48.23648 48.97490
> Apr 2007 48.94407 50.33781 48.80962 49.33974
> May 2007 49.34572 49.69097 47.51796 47.73780
> Jun 2007 47.74432 47.94127 47.09144 47.76719
>
>
> Thanks for the report.  I'll investigate.
>
> Best,
> Josh

hi,
I can not reproduce this error with zoo-1.7-12 and xts-0.8-0.

> getSymbols('MSFT')
[1] "MSFT"
> x <- xts::to.monthly(MSFT)
> x['2015']
         MSFT.Open MSFT.High MSFT.Low MSFT.Close MSFT.Volume MSFT.Adjusted
Jan 2015     46.66     47.91    40.35      40.40   918956900         40.11
Feb 2015     40.59     44.30    40.23      43.85   656204800         43.85
Mar 2015     43.67     44.19    40.61      42.29   512133400         42.29
> x['2014']
         MSFT.Open MSFT.High MSFT.Low MSFT.Close MSFT.Volume MSFT.Adjusted
Jan 2014     37.35     37.89    34.63      37.84   930226200         36.57
Feb 2014     37.74     38.46    35.69      38.31   705304500         37.30
Mar 2014     37.92     41.50    37.49      40.99   778425700         39.91
Apr 2014     41.15     41.66    38.90      40.40   746113500         39.34
May 2014     40.24     40.97    38.51      40.94   574362900         40.15
Jun 2014     40.95     42.29    39.86      41.70   555779700         40.89
Jul 2014     41.86     45.71    41.05      43.16   731616500         42.32
Aug 2014     43.21     45.47    42.21      45.43   513919700         44.83
Sep 2014     45.43     47.57    44.53      46.36   860827300         45.74
Oct 2014     46.27     46.97    42.10      46.95   853235700         46.33
Nov 2014     46.89     50.05    46.73      47.81   522988700         47.47
Dec 2014     47.88     49.06    44.90      46.45   626740700         46.12


Daniel


From josh.m.ulrich at gmail.com  Fri Mar 20 19:43:46 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Fri, 20 Mar 2015 13:43:46 -0500
Subject: [R-SIG-Finance] problem subsetting xts object with yearmon time
	index
In-Reply-To: <CAPLrYERygOA-bUwuiZb2iJ21nwy7gMAgXtmJZOU572sPL+3XpA@mail.gmail.com>
References: <alpine.LRH.2.01.1503201008570.22522@hymn01.u.washington.edu>
	<CAPPM_gQsd3xNfCkSyyakc_+8VQZ=R2ah3tAAABWHdcAsMnEUrQ@mail.gmail.com>
	<CAPLrYERygOA-bUwuiZb2iJ21nwy7gMAgXtmJZOU572sPL+3XpA@mail.gmail.com>
Message-ID: <CAPPM_gRwBoQTqSnbhH--mOePjDat7voE36FomMas7fhW9WPjYg@mail.gmail.com>

On Fri, Mar 20, 2015 at 12:30 PM, Daniel Cegie?ka
<daniel.cegielka at gmail.com> wrote:
> 2015-03-20 18:18 GMT+01:00 Joshua Ulrich <josh.m.ulrich at gmail.com>:
>> I can confirm this behavior with a simplified example using zoo 1.7-12
>> and the latest development xts.
>>
>>> data(sample_matrix)
>>> x <- as.xts(sample_matrix)
>>> y <- to.monthly(x)
>>> y['2007']
>>            x.Open   x.High    x.Low  x.Close
>> Feb 2007 50.22448 51.32342 50.19101 50.77091
>> Mar 2007 50.81620 50.81620 48.23648 48.97490
>> Apr 2007 48.94407 50.33781 48.80962 49.33974
>> May 2007 49.34572 49.69097 47.51796 47.73780
>> Jun 2007 47.74432 47.94127 47.09144 47.76719
>>
>>
>> Thanks for the report.  I'll investigate.
>>
>> Best,
>> Josh
>
> hi,
> I can not reproduce this error with zoo-1.7-12 and xts-0.8-0.
>
>> getSymbols('MSFT')
> [1] "MSFT"
>> x <- xts::to.monthly(MSFT)
>> x['2015']
>          MSFT.Open MSFT.High MSFT.Low MSFT.Close MSFT.Volume MSFT.Adjusted
> Jan 2015     46.66     47.91    40.35      40.40   918956900         40.11
> Feb 2015     40.59     44.30    40.23      43.85   656204800         43.85
> Mar 2015     43.67     44.19    40.61      42.29   512133400         42.29
>> x['2014']
>          MSFT.Open MSFT.High MSFT.Low MSFT.Close MSFT.Volume MSFT.Adjusted
> Jan 2014     37.35     37.89    34.63      37.84   930226200         36.57
> Feb 2014     37.74     38.46    35.69      38.31   705304500         37.30
> Mar 2014     37.92     41.50    37.49      40.99   778425700         39.91
> Apr 2014     41.15     41.66    38.90      40.40   746113500         39.34
> May 2014     40.24     40.97    38.51      40.94   574362900         40.15
> Jun 2014     40.95     42.29    39.86      41.70   555779700         40.89
> Jul 2014     41.86     45.71    41.05      43.16   731616500         42.32
> Aug 2014     43.21     45.47    42.21      45.43   513919700         44.83
> Sep 2014     45.43     47.57    44.53      46.36   860827300         45.74
> Oct 2014     46.27     46.97    42.10      46.95   853235700         46.33
> Nov 2014     46.89     50.05    46.73      47.81   522988700         47.47
> Dec 2014     47.88     49.06    44.90      46.45   626740700         46.12
>
You can't reproduce this with an object returned by getSymbols because
getSymbols sets the index timezone to "UTC".  The xts sample_matrix
data, and IntroCompFinR msftMonthlyPrices data do not have an index
timezone, so the machine's local timezone is used when converting the
ISO 8601 string to a datetime.

>
> Daniel


-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From josh.m.ulrich at gmail.com  Fri Mar 20 19:47:08 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Fri, 20 Mar 2015 13:47:08 -0500
Subject: [R-SIG-Finance] problem subsetting xts object with yearmon time
	index
In-Reply-To: <CAPPM_gQsd3xNfCkSyyakc_+8VQZ=R2ah3tAAABWHdcAsMnEUrQ@mail.gmail.com>
References: <alpine.LRH.2.01.1503201008570.22522@hymn01.u.washington.edu>
	<CAPPM_gQsd3xNfCkSyyakc_+8VQZ=R2ah3tAAABWHdcAsMnEUrQ@mail.gmail.com>
Message-ID: <CAPPM_gS=Pcr3EwkYs_hjAS2pnuwOqx1cP1sCjcPavVGKOnW1vQ@mail.gmail.com>

On Fri, Mar 20, 2015 at 12:18 PM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> I can confirm this behavior with a simplified example using zoo 1.7-12
> and the latest development xts.
>
>> data(sample_matrix)
>> x <- as.xts(sample_matrix)
>> y <- to.monthly(x)
>> y['2007']
>            x.Open   x.High    x.Low  x.Close
> Feb 2007 50.22448 51.32342 50.19101 50.77091
> Mar 2007 50.81620 50.81620 48.23648 48.97490
> Apr 2007 48.94407 50.33781 48.80962 49.33974
> May 2007 49.34572 49.69097 47.51796 47.73780
> Jun 2007 47.74432 47.94127 47.09144 47.76719
>
>
> Thanks for the report.  I'll investigate.
>
This is a timezone issue.  The solution is to ensure your
daily/monthly/quarterly indexed objects have an indexTZ of "UTC".

> indexTZ(msftMonthlyPrices) <- "UTC"
> msftMonthlyPrices['2014']
          MSFT
Jan 2014 36.57
Feb 2014 37.30
Mar 2014 39.91
Apr 2014 39.34
May 2014 40.15
Jun 2014 40.89
Jul 2014 42.32
Aug 2014 44.83
Sep 2014 45.74
Oct 2014 46.33
Nov 2014 47.47
Dec 2014 46.12
Warning message:
timezone of object (UTC) is different than current timezone ().

You can safely ignore the warning.  There probably should be a warning
for non-UTC timezones on objects with a date-based index (or any
higher periodicity)...

> Best,
> Josh
>
>
> On Fri, Mar 20, 2015 at 12:08 PM, Eric Zivot <ezivot at u.washington.edu> wrote:
>> I seem to have a problem sub-setting an xts object with a yearmon time index. I have a xts object holding monthly returns where the time index is a yearmon object. When I subset the data for 2014 using ?2014? within the xts object I don?t get the data for January. However, if I subset the data using window() I get all of the data for 2014. Below is the example (from Rstudio on windows 8) and output. Why is January missing when I subset using mydata.xts["2014"]????
>>
>>
>>
>>> options(digits=3, width=70)
>>
>>> # IntroCompFinR available from R-forge
>>
>>> # install.packages("IntroCompFinR", repos="http://R-Forge.R-project.org")
>>
>>> library(IntroCompFinR)
>>
>>> library(PerformanceAnalytics)
>>
>>>
>>
>>> #
>>
>>> # load data and compute returns - MSFT
>>
>>> #
>>
>>>
>>
>>> data(msftMonthlyPrices)
>>
>>> msftRetC = na.omit(Return.calculate(msftMonthlyPrices,
>>
>> +                                     method="log"))
>>
>>> head(msftRetC, n=3)
>>
>>             MSFT
>>
>> Feb 1993 -0.0371
>>
>> Mar 1993  0.1075
>>
>> Apr 1993 -0.0809
>>
>>> tail(msftRetC, n=3)
>>
>>             MSFT
>>
>> Oct 2014  0.0128
>>
>> Nov 2014  0.0243
>>
>> Dec 2014 -0.0289
>>
>>> class(index(msftRetC))
>>
>> [1] "yearmon"
>>
>>> # restric returns to last year
>>
>>> msftRetC2014 = msftRetC["2014"]
>>
>>> msftRetC2014
>>
>>             MSFT
>>
>> Feb 2014  0.0198
>>
>> Mar 2014  0.0676
>>
>> Apr 2014 -0.0144
>>
>> May 2014  0.0204
>>
>> Jun 2014  0.0183
>>
>> Jul 2014  0.0344
>>
>> Aug 2014  0.0576
>>
>> Sep 2014  0.0201
>>
>> Oct 2014  0.0128
>>
>> Nov 2014  0.0243
>>
>> Dec 2014 -0.0289
>>
>>> # why is January missing?????
>>
>>> as.Date(index(msftRetC2014))
>>
>> [1] "2014-02-01" "2014-03-01" "2014-04-01" "2014-05-01" "2014-06-01"
>>
>> [6] "2014-07-01" "2014-08-01" "2014-09-01" "2014-10-01" "2014-11-01"
>>
>> [11] "2014-12-01"
>>
>>> # I get the right data using window()
>>
>>> window(msftRetC, start=as.yearmon("Jan 2014"), end=as.yearmon("Dec 2014"))
>>
>>             MSFT
>>
>> Jan 2014  0.0113
>>
>> Feb 2014  0.0198
>>
>> Mar 2014  0.0676
>>
>> Apr 2014 -0.0144
>>
>> May 2014  0.0204
>>
>> Jun 2014  0.0183
>>
>> Jul 2014  0.0344
>>
>> Aug 2014  0.0576
>>
>> Sep 2014  0.0201
>>
>> Oct 2014  0.0128
>>
>> Nov 2014  0.0243
>>
>> Dec 2014 -0.0289
>>
>>> sessionInfo()
>>
>> R version 3.1.2 (2014-10-31)
>>
>> Platform: x86_64-w64-mingw32/x64 (64-bit)
>>
>>
>>
>> locale:
>>
>> [1] LC_COLLATE=English_United States.1252
>>
>> [2] LC_CTYPE=English_United States.1252
>>
>> [3] LC_MONETARY=English_United States.1252
>>
>> [4] LC_NUMERIC=C
>>
>> [5] LC_TIME=English_United States.1252
>>
>>
>>
>> attached base packages:
>>
>> [1] stats     graphics  grDevices utils     datasets  methods
>>
>> [7] base
>>
>>
>>
>> other attached packages:
>>
>> [1] boot_1.3-13                   PerformanceAnalytics_1.4.3541
>>
>> [3] IntroCompFinR_1.0             xts_0.9-7
>>
>> [5] zoo_1.7-11
>>
>>
>>
>> loaded via a namespace (and not attached):
>>
>> [1] digest_0.6.8    grid_3.1.2      htmltools_0.2.6 lattice_0.20-29
>>
>> [5] rmarkdown_0.5.1 tools_3.1.2     yaml_2.1.13
>>
>>
>>
>> Thanks in advance for any insight.
>>
>>
>>
>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>
>
>
> --
> Joshua Ulrich  |  about.me/joshuaulrich
> FOSS Trading  |  www.fosstrading.com



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From ezivot at u.washington.edu  Fri Mar 20 20:11:47 2015
From: ezivot at u.washington.edu (Eric Zivot)
Date: Fri, 20 Mar 2015 12:11:47 -0700 (PDT)
Subject: [R-SIG-Finance] problem subsetting xts object with yearmon time
 index
In-Reply-To: <CAPPM_gS=Pcr3EwkYs_hjAS2pnuwOqx1cP1sCjcPavVGKOnW1vQ@mail.gmail.com>
Message-ID: <alpine.LRH.2.01.1503201211470.22522@hymn01.u.washington.edu>

Thanks Josh for the quick reply. However, I am a bit puzzled by the problem. Why should a yearmon (or Date object) time index have a time zone attribute? Shouldn't time zone issues only affect time-date objects? It seems nutty that a date which represents a Year-month can be impacted by a time zone offset from UTC. I know this happens because the internal date for the yearmon object is the first day of the month. I guess this is one of the hidden dangers of using xts objects for calendar time series.

****************************************************************
*  Eric Zivot                  			               *
*  Robert Richards Chaired Professor of Economics              *
*  Department of Economics                                     *
*  Adjunct Professor of Finance                                *
*  Adjunct Professor of Statistics
*  Box 353330                  email:  ezivot at u.washington.edu *
*  University of Washington    phone:  206-543-6715            *
*  Seattle, WA 98195-3330                                      *                                                           *
*  www:  http://faculty.washington.edu/ezivot                  *
****************************************************************

On Fri, 20 Mar 2015, Joshua Ulrich wrote:

> On Fri, Mar 20, 2015 at 12:18 PM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
>> I can confirm this behavior with a simplified example using zoo 1.7-12
>> and the latest development xts.
>>
>>> data(sample_matrix)
>>> x <- as.xts(sample_matrix)
>>> y <- to.monthly(x)
>>> y['2007']
>>            x.Open   x.High    x.Low  x.Close
>> Feb 2007 50.22448 51.32342 50.19101 50.77091
>> Mar 2007 50.81620 50.81620 48.23648 48.97490
>> Apr 2007 48.94407 50.33781 48.80962 49.33974
>> May 2007 49.34572 49.69097 47.51796 47.73780
>> Jun 2007 47.74432 47.94127 47.09144 47.76719
>>
>>
>> Thanks for the report.  I'll investigate.
>>
> This is a timezone issue.  The solution is to ensure your
> daily/monthly/quarterly indexed objects have an indexTZ of "UTC".
>
>> indexTZ(msftMonthlyPrices) <- "UTC"
>> msftMonthlyPrices['2014']
>          MSFT
> Jan 2014 36.57
> Feb 2014 37.30
> Mar 2014 39.91
> Apr 2014 39.34
> May 2014 40.15
> Jun 2014 40.89
> Jul 2014 42.32
> Aug 2014 44.83
> Sep 2014 45.74
> Oct 2014 46.33
> Nov 2014 47.47
> Dec 2014 46.12
> Warning message:
> timezone of object (UTC) is different than current timezone ().
>
> You can safely ignore the warning.  There probably should be a warning
> for non-UTC timezones on objects with a date-based index (or any
> higher periodicity)...
>
>> Best,
>> Josh
>>
>>
>> On Fri, Mar 20, 2015 at 12:08 PM, Eric Zivot <ezivot at u.washington.edu> wrote:
>>> I seem to have a problem sub-setting an xts object with a yearmon time index. I have a xts object holding monthly returns where the time index is a yearmon object. When I subset the data for 2014 using ?2014? within the xts object I don?t get the data for January. However, if I subset the data using window() I get all of the data for 2014. Below is the example (from Rstudio on windows 8) and output. Why is January missing when I subset using mydata.xts["2014"]????
>>>
>>>
>>>
>>>> options(digits=3, width=70)
>>>
>>>> # IntroCompFinR available from R-forge
>>>
>>>> # install.packages("IntroCompFinR", repos="http://R-Forge.R-project.org")
>>>
>>>> library(IntroCompFinR)
>>>
>>>> library(PerformanceAnalytics)
>>>
>>>>
>>>
>>>> #
>>>
>>>> # load data and compute returns - MSFT
>>>
>>>> #
>>>
>>>>
>>>
>>>> data(msftMonthlyPrices)
>>>
>>>> msftRetC = na.omit(Return.calculate(msftMonthlyPrices,
>>>
>>> +                                     method="log"))
>>>
>>>> head(msftRetC, n=3)
>>>
>>>             MSFT
>>>
>>> Feb 1993 -0.0371
>>>
>>> Mar 1993  0.1075
>>>
>>> Apr 1993 -0.0809
>>>
>>>> tail(msftRetC, n=3)
>>>
>>>             MSFT
>>>
>>> Oct 2014  0.0128
>>>
>>> Nov 2014  0.0243
>>>
>>> Dec 2014 -0.0289
>>>
>>>> class(index(msftRetC))
>>>
>>> [1] "yearmon"
>>>
>>>> # restric returns to last year
>>>
>>>> msftRetC2014 = msftRetC["2014"]
>>>
>>>> msftRetC2014
>>>
>>>             MSFT
>>>
>>> Feb 2014  0.0198
>>>
>>> Mar 2014  0.0676
>>>
>>> Apr 2014 -0.0144
>>>
>>> May 2014  0.0204
>>>
>>> Jun 2014  0.0183
>>>
>>> Jul 2014  0.0344
>>>
>>> Aug 2014  0.0576
>>>
>>> Sep 2014  0.0201
>>>
>>> Oct 2014  0.0128
>>>
>>> Nov 2014  0.0243
>>>
>>> Dec 2014 -0.0289
>>>
>>>> # why is January missing?????
>>>
>>>> as.Date(index(msftRetC2014))
>>>
>>> [1] "2014-02-01" "2014-03-01" "2014-04-01" "2014-05-01" "2014-06-01"
>>>
>>> [6] "2014-07-01" "2014-08-01" "2014-09-01" "2014-10-01" "2014-11-01"
>>>
>>> [11] "2014-12-01"
>>>
>>>> # I get the right data using window()
>>>
>>>> window(msftRetC, start=as.yearmon("Jan 2014"), end=as.yearmon("Dec 2014"))
>>>
>>>             MSFT
>>>
>>> Jan 2014  0.0113
>>>
>>> Feb 2014  0.0198
>>>
>>> Mar 2014  0.0676
>>>
>>> Apr 2014 -0.0144
>>>
>>> May 2014  0.0204
>>>
>>> Jun 2014  0.0183
>>>
>>> Jul 2014  0.0344
>>>
>>> Aug 2014  0.0576
>>>
>>> Sep 2014  0.0201
>>>
>>> Oct 2014  0.0128
>>>
>>> Nov 2014  0.0243
>>>
>>> Dec 2014 -0.0289
>>>
>>>> sessionInfo()
>>>
>>> R version 3.1.2 (2014-10-31)
>>>
>>> Platform: x86_64-w64-mingw32/x64 (64-bit)
>>>
>>>
>>>
>>> locale:
>>>
>>> [1] LC_COLLATE=English_United States.1252
>>>
>>> [2] LC_CTYPE=English_United States.1252
>>>
>>> [3] LC_MONETARY=English_United States.1252
>>>
>>> [4] LC_NUMERIC=C
>>>
>>> [5] LC_TIME=English_United States.1252
>>>
>>>
>>>
>>> attached base packages:
>>>
>>> [1] stats     graphics  grDevices utils     datasets  methods
>>>
>>> [7] base
>>>
>>>
>>>
>>> other attached packages:
>>>
>>> [1] boot_1.3-13                   PerformanceAnalytics_1.4.3541
>>>
>>> [3] IntroCompFinR_1.0             xts_0.9-7
>>>
>>> [5] zoo_1.7-11
>>>
>>>
>>>
>>> loaded via a namespace (and not attached):
>>>
>>> [1] digest_0.6.8    grid_3.1.2      htmltools_0.2.6 lattice_0.20-29
>>>
>>> [5] rmarkdown_0.5.1 tools_3.1.2     yaml_2.1.13
>>>
>>>
>>>
>>> Thanks in advance for any insight.
>>>
>>>
>>>
>>>
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>
>>
>>
>> --
>> Joshua Ulrich  |  about.me/joshuaulrich
>> FOSS Trading  |  www.fosstrading.com
>
>
>
> -- 
> Joshua Ulrich  |  about.me/joshuaulrich
> FOSS Trading  |  www.fosstrading.com
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

From josh.m.ulrich at gmail.com  Fri Mar 20 20:28:24 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Fri, 20 Mar 2015 14:28:24 -0500
Subject: [R-SIG-Finance] problem subsetting xts object with yearmon time
	index
In-Reply-To: <alpine.LRH.2.01.1503201211470.22522@hymn01.u.washington.edu>
References: <CAPPM_gS=Pcr3EwkYs_hjAS2pnuwOqx1cP1sCjcPavVGKOnW1vQ@mail.gmail.com>
	<alpine.LRH.2.01.1503201211470.22522@hymn01.u.washington.edu>
Message-ID: <CAPPM_gRSNSwwo-X0hWBosQTVpfv74D8WoGnG+WX2iXUTr1MnqA@mail.gmail.com>

On Fri, Mar 20, 2015 at 2:11 PM, Eric Zivot <ezivot at u.washington.edu> wrote:
> Thanks Josh for the quick reply. However, I am a bit puzzled by the problem.
> Why should a yearmon (or Date object) time index have a time zone attribute?
> Shouldn't time zone issues only affect time-date objects? It seems nutty
> that a date which represents a Year-month can be impacted by a time zone
> offset from UTC. I know this happens because the internal date for the
> yearmon object is the first day of the month. I guess this is one of the
> hidden dangers of using xts objects for calendar time series.
>
The timezone matters because xts objects always store the index as
POSIXct.  So, internally, there's always a time component.

How did you construct the msftMonthlyPrices data?  The xts constructor
will throw a warning if you try to supply a timezone with a
Date-classed index, but does not if the class is yearmon or yearqtr
(though it should).

>
>
> On Fri, 20 Mar 2015, Joshua Ulrich wrote:
>
>> On Fri, Mar 20, 2015 at 12:18 PM, Joshua Ulrich <josh.m.ulrich at gmail.com>
>> wrote:
>>>
>>> I can confirm this behavior with a simplified example using zoo 1.7-12
>>> and the latest development xts.
>>>
>>>> data(sample_matrix)
>>>> x <- as.xts(sample_matrix)
>>>> y <- to.monthly(x)
>>>> y['2007']
>>>
>>>            x.Open   x.High    x.Low  x.Close
>>> Feb 2007 50.22448 51.32342 50.19101 50.77091
>>> Mar 2007 50.81620 50.81620 48.23648 48.97490
>>> Apr 2007 48.94407 50.33781 48.80962 49.33974
>>> May 2007 49.34572 49.69097 47.51796 47.73780
>>> Jun 2007 47.74432 47.94127 47.09144 47.76719
>>>
>>>
>>> Thanks for the report.  I'll investigate.
>>>
>> This is a timezone issue.  The solution is to ensure your
>> daily/monthly/quarterly indexed objects have an indexTZ of "UTC".
>>
>>> indexTZ(msftMonthlyPrices) <- "UTC"
>>> msftMonthlyPrices['2014']
>>
>>          MSFT
>> Jan 2014 36.57
>> Feb 2014 37.30
>> Mar 2014 39.91
>> Apr 2014 39.34
>> May 2014 40.15
>> Jun 2014 40.89
>> Jul 2014 42.32
>> Aug 2014 44.83
>> Sep 2014 45.74
>> Oct 2014 46.33
>> Nov 2014 47.47
>> Dec 2014 46.12
>> Warning message:
>> timezone of object (UTC) is different than current timezone ().
>>
>> You can safely ignore the warning.  There probably should be a warning
>> for non-UTC timezones on objects with a date-based index (or any
>> higher periodicity)...
>>
>>> Best,
>>> Josh
>>>
>>>
>>> On Fri, Mar 20, 2015 at 12:08 PM, Eric Zivot <ezivot at u.washington.edu>
>>> wrote:
>>>>
>>>> I seem to have a problem sub-setting an xts object with a yearmon time
>>>> index. I have a xts object holding monthly returns where the time index is a
>>>> yearmon object. When I subset the data for 2014 using ?2014? within the xts
>>>> object I don?t get the data for January. However, if I subset the data using
>>>> window() I get all of the data for 2014. Below is the example (from Rstudio
>>>> on windows 8) and output. Why is January missing when I subset using
>>>> mydata.xts["2014"]????
>>>>
>>>>
>>>>
>>>>> options(digits=3, width=70)
>>>>
>>>>
>>>>> # IntroCompFinR available from R-forge
>>>>
>>>>
>>>>> # install.packages("IntroCompFinR",
>>>>> repos="http://R-Forge.R-project.org")
>>>>
>>>>
>>>>> library(IntroCompFinR)
>>>>
>>>>
>>>>> library(PerformanceAnalytics)
>>>>
>>>>
>>>>>
>>>>
>>>>> #
>>>>
>>>>
>>>>> # load data and compute returns - MSFT
>>>>
>>>>
>>>>> #
>>>>
>>>>
>>>>>
>>>>
>>>>> data(msftMonthlyPrices)
>>>>
>>>>
>>>>> msftRetC = na.omit(Return.calculate(msftMonthlyPrices,
>>>>
>>>>
>>>> +                                     method="log"))
>>>>
>>>>> head(msftRetC, n=3)
>>>>
>>>>
>>>>             MSFT
>>>>
>>>> Feb 1993 -0.0371
>>>>
>>>> Mar 1993  0.1075
>>>>
>>>> Apr 1993 -0.0809
>>>>
>>>>> tail(msftRetC, n=3)
>>>>
>>>>
>>>>             MSFT
>>>>
>>>> Oct 2014  0.0128
>>>>
>>>> Nov 2014  0.0243
>>>>
>>>> Dec 2014 -0.0289
>>>>
>>>>> class(index(msftRetC))
>>>>
>>>>
>>>> [1] "yearmon"
>>>>
>>>>> # restric returns to last year
>>>>
>>>>
>>>>> msftRetC2014 = msftRetC["2014"]
>>>>
>>>>
>>>>> msftRetC2014
>>>>
>>>>
>>>>             MSFT
>>>>
>>>> Feb 2014  0.0198
>>>>
>>>> Mar 2014  0.0676
>>>>
>>>> Apr 2014 -0.0144
>>>>
>>>> May 2014  0.0204
>>>>
>>>> Jun 2014  0.0183
>>>>
>>>> Jul 2014  0.0344
>>>>
>>>> Aug 2014  0.0576
>>>>
>>>> Sep 2014  0.0201
>>>>
>>>> Oct 2014  0.0128
>>>>
>>>> Nov 2014  0.0243
>>>>
>>>> Dec 2014 -0.0289
>>>>
>>>>> # why is January missing?????
>>>>
>>>>
>>>>> as.Date(index(msftRetC2014))
>>>>
>>>>
>>>> [1] "2014-02-01" "2014-03-01" "2014-04-01" "2014-05-01" "2014-06-01"
>>>>
>>>> [6] "2014-07-01" "2014-08-01" "2014-09-01" "2014-10-01" "2014-11-01"
>>>>
>>>> [11] "2014-12-01"
>>>>
>>>>> # I get the right data using window()
>>>>
>>>>
>>>>> window(msftRetC, start=as.yearmon("Jan 2014"), end=as.yearmon("Dec
>>>>> 2014"))
>>>>
>>>>
>>>>             MSFT
>>>>
>>>> Jan 2014  0.0113
>>>>
>>>> Feb 2014  0.0198
>>>>
>>>> Mar 2014  0.0676
>>>>
>>>> Apr 2014 -0.0144
>>>>
>>>> May 2014  0.0204
>>>>
>>>> Jun 2014  0.0183
>>>>
>>>> Jul 2014  0.0344
>>>>
>>>> Aug 2014  0.0576
>>>>
>>>> Sep 2014  0.0201
>>>>
>>>> Oct 2014  0.0128
>>>>
>>>> Nov 2014  0.0243
>>>>
>>>> Dec 2014 -0.0289
>>>>
>>>>> sessionInfo()
>>>>
>>>>
>>>> R version 3.1.2 (2014-10-31)
>>>>
>>>> Platform: x86_64-w64-mingw32/x64 (64-bit)
>>>>
>>>>
>>>>
>>>> locale:
>>>>
>>>> [1] LC_COLLATE=English_United States.1252
>>>>
>>>> [2] LC_CTYPE=English_United States.1252
>>>>
>>>> [3] LC_MONETARY=English_United States.1252
>>>>
>>>> [4] LC_NUMERIC=C
>>>>
>>>> [5] LC_TIME=English_United States.1252
>>>>
>>>>
>>>>
>>>> attached base packages:
>>>>
>>>> [1] stats     graphics  grDevices utils     datasets  methods
>>>>
>>>> [7] base
>>>>
>>>>
>>>>
>>>> other attached packages:
>>>>
>>>> [1] boot_1.3-13                   PerformanceAnalytics_1.4.3541
>>>>
>>>> [3] IntroCompFinR_1.0             xts_0.9-7
>>>>
>>>> [5] zoo_1.7-11
>>>>
>>>>
>>>>
>>>> loaded via a namespace (and not attached):
>>>>
>>>> [1] digest_0.6.8    grid_3.1.2      htmltools_0.2.6 lattice_0.20-29
>>>>
>>>> [5] rmarkdown_0.5.1 tools_3.1.2     yaml_2.1.13
>>>>
>>>>
>>>>
>>>> Thanks in advance for any insight.
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions
>>>> should go.
>>>
>>>
>>>
>>>
>>> --
>>> Joshua Ulrich  |  about.me/joshuaulrich
>>> FOSS Trading  |  www.fosstrading.com
>>
>>
>>
>>
>> --
>> Joshua Ulrich  |  about.me/joshuaulrich
>> FOSS Trading  |  www.fosstrading.com
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From cduranceau at nial.ky  Tue Mar 24 00:05:32 2015
From: cduranceau at nial.ky (Charles Duranceau)
Date: Mon, 23 Mar 2015 23:05:32 +0000
Subject: [R-SIG-Finance] validation of DrawdownPeak in PerformanceAnalytics
 package
Message-ID: <253B4FA1ECEEB54DB661809CB67734552A0D0DDA@NOR-EXC02.northview.local>

Hi,
I'm looking at the results returned by the function DrawdownPeak and struggle to understand the calculation.
In the following example, I recalculate the return from drawdown and for the third period I found a difference (I'm aware the formula I'm using is only local for the example).
I expect using "geometric" rule for aggregating returns but cannot match the calculations

In this example the peak is 10% and the returns for the next 2 period are -2% and -1% which should lead to a cumulative return of (1.1 / 1.078 / 1.06722)

Q1. The return for the 3rd period from Peak should then be : 1.06722 / 1.10 -1 = 2.98% and not 2.9998%. Is the result I should expect? (it looks like the it does not compound when "geometric=TRUE")
Q2. I noticed that "geometric=TRUE" option does not make any difference. Is this expected?
Q3. Finally I was not able to standardized the decimal with  options(digits=4). Is this normal?

Code for replication

library("PerformanceAnalytics")
ret_num<-c(0.10,-0.020,-0.010)                                                            # simulated returns - the peak is the first observations
ret_test<-xts(ret_num, Sys.Date()-3:1)                                     # return in xts class
ddtp_test<-DrawdownPeak(ret_test,geometric=TRUE)            # results for return for drawdowns  to validate
cret_num<-cumprod(1+ret_num)-1                                          # validation by cumulative returns
ddtp_vet<-(1+cret_num)/(1+cret_num[1])-1                # replication of cumulative returns for drawdowns
cbind(ddtp_test,ddtp_vet)                                             # to compare results - differences

The third row shows a difference - look small bu
     ddtp_test ddtp_vet
[1,]  0.000000   0.0000
[2,] -0.020000  -0.0200
[3,] -0.029998  -0.0298


This looks small (not related to rounding)  but in other cases the difference was more important and lead to  difference in the drawdown period.
I reproduced the same values with version 3.1 and version 3.1.3


Package PerformanceAnalytics (1.4.3579) loaded.

version.string R version 3.1.3 (2015-03-09)







Thank you
Best Regards,

Charles



	[[alternative HTML version deleted]]


From peter at braverock.com  Tue Mar 24 00:47:36 2015
From: peter at braverock.com (Peter Carl)
Date: Mon, 23 Mar 2015 18:47:36 -0500
Subject: [R-SIG-Finance] validation of DrawdownPeak in
 PerformanceAnalytics package
In-Reply-To: <253B4FA1ECEEB54DB661809CB67734552A0D0DDA@NOR-EXC02.northview.local>
References: <253B4FA1ECEEB54DB661809CB67734552A0D0DDA@NOR-EXC02.northview.local>
Message-ID: <5510A618.6060808@braverock.com>

Charles,

DrawdownPeak probably shouldn't be in the namespace - thanks for 
pointing it out.  You might be looking for 
PerformanceAnalytics:::Drawdowns, which probably *should* be in the 
namespace.  Let me know if that works for you.

pcc

On 03/23/2015 06:05 PM, Charles Duranceau wrote:
> Hi,
> I'm looking at the results returned by the function DrawdownPeak and struggle to understand the calculation.
> In the following example, I recalculate the return from drawdown and for the third period I found a difference (I'm aware the formula I'm using is only local for the example).
> I expect using "geometric" rule for aggregating returns but cannot match the calculations
>
> In this example the peak is 10% and the returns for the next 2 period are -2% and -1% which should lead to a cumulative return of (1.1 / 1.078 / 1.06722)
>
> Q1. The return for the 3rd period from Peak should then be : 1.06722 / 1.10 -1 = 2.98% and not 2.9998%. Is the result I should expect? (it looks like the it does not compound when "geometric=TRUE")
> Q2. I noticed that "geometric=TRUE" option does not make any difference. Is this expected?
> Q3. Finally I was not able to standardized the decimal with  options(digits=4). Is this normal?
>
> Code for replication
>
> library("PerformanceAnalytics")
> ret_num<-c(0.10,-0.020,-0.010)                                                            # simulated returns - the peak is the first observations
> ret_test<-xts(ret_num, Sys.Date()-3:1)                                     # return in xts class
> ddtp_test<-DrawdownPeak(ret_test,geometric=TRUE)            # results for return for drawdowns  to validate
> cret_num<-cumprod(1+ret_num)-1                                          # validation by cumulative returns
> ddtp_vet<-(1+cret_num)/(1+cret_num[1])-1                # replication of cumulative returns for drawdowns
> cbind(ddtp_test,ddtp_vet)                                             # to compare results - differences
>
> The third row shows a difference - look small bu
>       ddtp_test ddtp_vet
> [1,]  0.000000   0.0000
> [2,] -0.020000  -0.0200
> [3,] -0.029998  -0.0298
>
>
> This looks small (not related to rounding)  but in other cases the difference was more important and lead to  difference in the drawdown period.
> I reproduced the same values with version 3.1 and version 3.1.3
>
>
> Package PerformanceAnalytics (1.4.3579) loaded.
>
> version.string R version 3.1.3 (2015-03-09)
>
>
>
>
>
>
>
> Thank you
> Best Regards,
>
> Charles
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


-- 
Peter Carl
312.307.6346


From jaimie.villanueva at gmail.com  Tue Mar 24 19:29:32 2015
From: jaimie.villanueva at gmail.com (Jaimie Villanueva)
Date: Tue, 24 Mar 2015 19:29:32 +0100
Subject: [R-SIG-Finance] ugarchfit: Weighted Ljung-Box Test
Message-ID: <CAEXmNQB1LG5HU_jnc1BGCyo6ch+F-K+4Z_p+7PKTHrTCFOi-gA@mail.gmail.com>

Dear R users

I recently moved to the latest version of rugarch package (rugarch_1.3-4)
and i notice that the Ljung Box test on the standarized residuals
(squared standarized residuals too) is newer shown up. There is always
appearing "NA" simbols. I don't really understand why.I tried to find it
out by myself but without success.

Is there anyone who can help me out with this?

Here is a little reproducible example along with session info:

*spec = ugarchspec()*
*data(sp500ret)*
*fit = ugarchfit(spec = spec, data = sp500ret)*
*show(fit)*


*---------------------------------*
*          GARCH Model Fit        *
*---------------------------------*

Conditional Variance Dynamics
-----------------------------------
GARCH Model : sGARCH(1,1)
Mean Model : ARFIMA(1,0,1)
Distribution : norm

Optimal Parameters
------------------------------------
        Estimate  Std. Error  t value Pr(>|t|)
mu      0.000523    0.000087   5.9907   0.0000
ar1     0.870134    0.072199  12.0518   0.0000
ma1    -0.897344    0.064634 -13.8834   0.0000
omega   0.000001    0.000001   1.3970   0.1624
alpha1  0.087715    0.013659   6.4219   0.0000
beta1   0.904935    0.013705  66.0292   0.0000

Robust Standard Errors:
        Estimate  Std. Error    t value Pr(>|t|)
mu      0.000523    0.000129   4.038024 0.000054
ar1     0.870134    0.088227   9.862425 0.000000
ma1    -0.897344    0.080389 -11.162576 0.000000
omega   0.000001    0.000014   0.094157 0.924984
alpha1  0.087715    0.185058   0.473985 0.635511
beta1   0.904935    0.190563   4.748733 0.000002

LogLikelihood : 17902.41

Information Criteria
------------------------------------

Akaike       -6.4807
Bayes        -6.4735
Shibata      -6.4807
Hannan-Quinn -6.4782

Weighted Ljung-Box Test on Standardized Residuals
------------------------------------
                        statistic p-value
Lag[1]                         NA      NA
Lag[2*(p+q)+(p+q)-1][5]        NA      NA
Lag[4*(p+q)+(p+q)-1][9]        NA      NA
d.o.f=2
H0 : No serial correlation

Weighted Ljung-Box Test on Standardized Squared Residuals
------------------------------------
                        statistic p-value
Lag[1]                         NA      NA
Lag[2*(p+q)+(p+q)-1][5]        NA      NA
Lag[4*(p+q)+(p+q)-1][9]        NA      NA
d.o.f=2

Weighted ARCH LM Tests
------------------------------------
            Statistic Shape Scale P-Value
ARCH Lag[3]        NA 0.500 2.000      NA
ARCH Lag[5]        NA 1.440 1.667      NA
ARCH Lag[7]        NA 2.315 1.543      NA

Nyblom stability test
------------------------------------
Joint Statistic:  174.2204
Individual Statistics:
mu      0.2060
ar1     0.1477
ma1     0.1047
omega  21.3472
alpha1  0.1346
beta1   0.1134

Asymptotic Critical Values (10% 5% 1%)
Joint Statistic:      1.49 1.68 2.12
Individual Statistic: 0.35 0.47 0.75

Sign Bias Test
------------------------------------
                   t-value      prob sig
Sign Bias           0.4296 6.675e-01
Negative Sign Bias  2.9492 3.199e-03 ***
Positive Sign Bias  2.3921 1.678e-02  **
Joint Effect       28.9841 2.257e-06 ***


Adjusted Pearson Goodness-of-Fit Test:
------------------------------------
  group statistic p-value(g-1)
1    20     178.6    5.738e-28
2    30     188.1    3.136e-25
3    40     217.8    1.084e-26
4    50     227.9    7.064e-25


Elapsed time : 1.343655


*sessionInfo()*

R version 3.1.3 (2015-03-09)
Platform: i386-w64-mingw32/i386 (32-bit)
Running under: Windows XP (build 2600) Service Pack 3

locale:
[1] LC_COLLATE=Spanish_Spain.1252
[2] LC_CTYPE=Spanish_Spain.1252
[3] LC_MONETARY=Spanish_Spain.1252
[4] LC_NUMERIC=C
[5] LC_TIME=Spanish_Spain.1252

attached base packages:
[1] parallel  stats     graphics  grDevices utils
[6] datasets  methods   base

other attached packages:
 [1] nortest_1.0-3      ggplot2_1.0.1
 [3] fUnitRoots_3010.78 urca_1.2-8
 [5] fGarch_3010.82     fBasics_3011.87
 [7] rugarch_1.3-4      FinTS_0.4-5
 [9] TSA_1.01           mgcv_1.8-5
[11] nlme_3.1-120       locfit_1.5-9.1
[13] leaps_2.9          MASS_7.3-39
[15] timeSeries_3012.99 timeDate_3012.100
[17] tseries_0.10-34    zoo_1.7-12
[19] quadprog_1.5-5     RODBC_1.3-11

loaded via a namespace (and not attached):
 [1] colorspace_1.2-6
 [2] digest_0.6.8
 [3] DistributionUtils_0.5-1
 [4] expm_0.99-1.1
 [5] GeneralizedHyperbolic_0.8-1
 [6] grid_3.1.3
 [7] gtable_0.1.2
 [8] KernSmooth_2.23-14
 [9] ks_1.9.4
[10] labeling_0.3
[11] lattice_0.20-30
[12] Matrix_1.1-5
[13] misc3d_0.8-4
[14] munsell_0.4.2
[15] mvtnorm_1.0-2
[16] nloptr_1.0.4
[17] numDeriv_2012.9-1
[18] plyr_1.8.1
[19] proto_0.3-10
[20] Rcpp_0.11.5
[21] reshape2_1.4.1
[22] rgl_0.95.1201
[23] Rsolnp_1.15
[24] scales_0.2.4
[25] SkewHyperbolic_0.3-2
[26] spd_2.0-0
[27] stringr_0.6.2
[28] tools_3.1.3
[29] truncnorm_1.0-7
[30] xts_0.9-7


Thanks u all in advance.
-- 
*Jaimie.*

	[[alternative HTML version deleted]]


From alexios at 4dscape.com  Tue Mar 24 19:36:59 2015
From: alexios at 4dscape.com (alexios)
Date: Tue, 24 Mar 2015 18:36:59 +0000
Subject: [R-SIG-Finance] ugarchfit: Weighted Ljung-Box Test
In-Reply-To: <CAEXmNQB1LG5HU_jnc1BGCyo6ch+F-K+4Z_p+7PKTHrTCFOi-gA@mail.gmail.com>
References: <CAEXmNQB1LG5HU_jnc1BGCyo6ch+F-K+4Z_p+7PKTHrTCFOi-gA@mail.gmail.com>
Message-ID: <5511AECB.4090703@4dscape.com>

I'm still on R 3.1.2 and can't replicate this...I'll upgrade and 
investigate.

Alexios

On 24/03/2015 18:29, Jaimie Villanueva wrote:
> Dear R users
>
> I recently moved to the latest version of rugarch package (rugarch_1.3-4)
> and i notice that the Ljung Box test on the standarized residuals
> (squared standarized residuals too) is newer shown up. There is always
> appearing "NA" simbols. I don't really understand why.I tried to find it
> out by myself but without success.
>
> Is there anyone who can help me out with this?
>
> Here is a little reproducible example along with session info:
>
> *spec = ugarchspec()*
> *data(sp500ret)*
> *fit = ugarchfit(spec = spec, data = sp500ret)*
> *show(fit)*
>
>
> *---------------------------------*
> *          GARCH Model Fit        *
> *---------------------------------*
>
> Conditional Variance Dynamics
> -----------------------------------
> GARCH Model : sGARCH(1,1)
> Mean Model : ARFIMA(1,0,1)
> Distribution : norm
>
> Optimal Parameters
> ------------------------------------
>          Estimate  Std. Error  t value Pr(>|t|)
> mu      0.000523    0.000087   5.9907   0.0000
> ar1     0.870134    0.072199  12.0518   0.0000
> ma1    -0.897344    0.064634 -13.8834   0.0000
> omega   0.000001    0.000001   1.3970   0.1624
> alpha1  0.087715    0.013659   6.4219   0.0000
> beta1   0.904935    0.013705  66.0292   0.0000
>
> Robust Standard Errors:
>          Estimate  Std. Error    t value Pr(>|t|)
> mu      0.000523    0.000129   4.038024 0.000054
> ar1     0.870134    0.088227   9.862425 0.000000
> ma1    -0.897344    0.080389 -11.162576 0.000000
> omega   0.000001    0.000014   0.094157 0.924984
> alpha1  0.087715    0.185058   0.473985 0.635511
> beta1   0.904935    0.190563   4.748733 0.000002
>
> LogLikelihood : 17902.41
>
> Information Criteria
> ------------------------------------
>
> Akaike       -6.4807
> Bayes        -6.4735
> Shibata      -6.4807
> Hannan-Quinn -6.4782
>
> Weighted Ljung-Box Test on Standardized Residuals
> ------------------------------------
>                          statistic p-value
> Lag[1]                         NA      NA
> Lag[2*(p+q)+(p+q)-1][5]        NA      NA
> Lag[4*(p+q)+(p+q)-1][9]        NA      NA
> d.o.f=2
> H0 : No serial correlation
>
> Weighted Ljung-Box Test on Standardized Squared Residuals
> ------------------------------------
>                          statistic p-value
> Lag[1]                         NA      NA
> Lag[2*(p+q)+(p+q)-1][5]        NA      NA
> Lag[4*(p+q)+(p+q)-1][9]        NA      NA
> d.o.f=2
>
> Weighted ARCH LM Tests
> ------------------------------------
>              Statistic Shape Scale P-Value
> ARCH Lag[3]        NA 0.500 2.000      NA
> ARCH Lag[5]        NA 1.440 1.667      NA
> ARCH Lag[7]        NA 2.315 1.543      NA
>
> Nyblom stability test
> ------------------------------------
> Joint Statistic:  174.2204
> Individual Statistics:
> mu      0.2060
> ar1     0.1477
> ma1     0.1047
> omega  21.3472
> alpha1  0.1346
> beta1   0.1134
>
> Asymptotic Critical Values (10% 5% 1%)
> Joint Statistic:      1.49 1.68 2.12
> Individual Statistic: 0.35 0.47 0.75
>
> Sign Bias Test
> ------------------------------------
>                     t-value      prob sig
> Sign Bias           0.4296 6.675e-01
> Negative Sign Bias  2.9492 3.199e-03 ***
> Positive Sign Bias  2.3921 1.678e-02  **
> Joint Effect       28.9841 2.257e-06 ***
>
>
> Adjusted Pearson Goodness-of-Fit Test:
> ------------------------------------
>    group statistic p-value(g-1)
> 1    20     178.6    5.738e-28
> 2    30     188.1    3.136e-25
> 3    40     217.8    1.084e-26
> 4    50     227.9    7.064e-25
>
>
> Elapsed time : 1.343655
>
>
> *sessionInfo()*
>
> R version 3.1.3 (2015-03-09)
> Platform: i386-w64-mingw32/i386 (32-bit)
> Running under: Windows XP (build 2600) Service Pack 3
>
> locale:
> [1] LC_COLLATE=Spanish_Spain.1252
> [2] LC_CTYPE=Spanish_Spain.1252
> [3] LC_MONETARY=Spanish_Spain.1252
> [4] LC_NUMERIC=C
> [5] LC_TIME=Spanish_Spain.1252
>
> attached base packages:
> [1] parallel  stats     graphics  grDevices utils
> [6] datasets  methods   base
>
> other attached packages:
>   [1] nortest_1.0-3      ggplot2_1.0.1
>   [3] fUnitRoots_3010.78 urca_1.2-8
>   [5] fGarch_3010.82     fBasics_3011.87
>   [7] rugarch_1.3-4      FinTS_0.4-5
>   [9] TSA_1.01           mgcv_1.8-5
> [11] nlme_3.1-120       locfit_1.5-9.1
> [13] leaps_2.9          MASS_7.3-39
> [15] timeSeries_3012.99 timeDate_3012.100
> [17] tseries_0.10-34    zoo_1.7-12
> [19] quadprog_1.5-5     RODBC_1.3-11
>
> loaded via a namespace (and not attached):
>   [1] colorspace_1.2-6
>   [2] digest_0.6.8
>   [3] DistributionUtils_0.5-1
>   [4] expm_0.99-1.1
>   [5] GeneralizedHyperbolic_0.8-1
>   [6] grid_3.1.3
>   [7] gtable_0.1.2
>   [8] KernSmooth_2.23-14
>   [9] ks_1.9.4
> [10] labeling_0.3
> [11] lattice_0.20-30
> [12] Matrix_1.1-5
> [13] misc3d_0.8-4
> [14] munsell_0.4.2
> [15] mvtnorm_1.0-2
> [16] nloptr_1.0.4
> [17] numDeriv_2012.9-1
> [18] plyr_1.8.1
> [19] proto_0.3-10
> [20] Rcpp_0.11.5
> [21] reshape2_1.4.1
> [22] rgl_0.95.1201
> [23] Rsolnp_1.15
> [24] scales_0.2.4
> [25] SkewHyperbolic_0.3-2
> [26] spd_2.0-0
> [27] stringr_0.6.2
> [28] tools_3.1.3
> [29] truncnorm_1.0-7
> [30] xts_0.9-7
>
>
> Thanks u all in advance.
>


From alexios at 4dscape.com  Wed Mar 25 14:46:09 2015
From: alexios at 4dscape.com (alexios)
Date: Wed, 25 Mar 2015 13:46:09 +0000
Subject: [R-SIG-Finance] ugarchfit: Weighted Ljung-Box Test
In-Reply-To: <CAEXmNQB1LG5HU_jnc1BGCyo6ch+F-K+4Z_p+7PKTHrTCFOi-gA@mail.gmail.com>
References: <CAEXmNQB1LG5HU_jnc1BGCyo6ch+F-K+4Z_p+7PKTHrTCFOi-gA@mail.gmail.com>
Message-ID: <5512BC21.20203@4dscape.com>

I've tested this with R 3.1.3 and could not replicate on either i386 or 
x64. BTW the latest (development) version of rugarch is 1.3-5:
library(devtools)
install_bitbucket("alexiosg/rugarch")

 >sessionInfo()
R version 3.1.3 (2015-03-09)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: [deleted]

locale:
[deleted]

attached base packages:
[1] parallel  stats     graphics  grDevices utils     datasets  methods 
   base

other attached packages:
[1] rugarch_1.3-5  devtools_1.7.0

loaded via a namespace (and not attached):
  [1] bitops_1.0-6                DistributionUtils_0.5-1 
expm_0.99-1.1
  [4] GeneralizedHyperbolic_0.8-1 grid_3.1.3                  httr_0.6.1 

  [7] KernSmooth_2.23-14          ks_1.9.4 
lattice_0.20-30
[10] Matrix_1.1-5                misc3d_0.8-4 
mvtnorm_1.0-2
[13] nloptr_1.0.4                numDeriv_2012.9-1           Rcpp_0.11.5 

[16] RCurl_1.95-4.5              rgl_0.95.1201               Rsolnp_1.15 

[19] SkewHyperbolic_0.3-2        spd_2.0-0 
stringr_0.6.2
[22] tools_3.1.3                 truncnorm_1.0-7             xts_0.9-7 

[25] zoo_1.7-12

On 24/03/2015 18:29, Jaimie Villanueva wrote:
> Dear R users
>
> I recently moved to the latest version of rugarch package (rugarch_1.3-4)
> and i notice that the Ljung Box test on the standarized residuals
> (squared standarized residuals too) is newer shown up. There is always
> appearing "NA" simbols. I don't really understand why.I tried to find it
> out by myself but without success.
>
> Is there anyone who can help me out with this?
>
> Here is a little reproducible example along with session info:
>
> *spec = ugarchspec()*
> *data(sp500ret)*
> *fit = ugarchfit(spec = spec, data = sp500ret)*
> *show(fit)*
>
>
> *---------------------------------*
> *          GARCH Model Fit        *
> *---------------------------------*
>
> Conditional Variance Dynamics
> -----------------------------------
> GARCH Model : sGARCH(1,1)
> Mean Model : ARFIMA(1,0,1)
> Distribution : norm
>
> Optimal Parameters
> ------------------------------------
>          Estimate  Std. Error  t value Pr(>|t|)
> mu      0.000523    0.000087   5.9907   0.0000
> ar1     0.870134    0.072199  12.0518   0.0000
> ma1    -0.897344    0.064634 -13.8834   0.0000
> omega   0.000001    0.000001   1.3970   0.1624
> alpha1  0.087715    0.013659   6.4219   0.0000
> beta1   0.904935    0.013705  66.0292   0.0000
>
> Robust Standard Errors:
>          Estimate  Std. Error    t value Pr(>|t|)
> mu      0.000523    0.000129   4.038024 0.000054
> ar1     0.870134    0.088227   9.862425 0.000000
> ma1    -0.897344    0.080389 -11.162576 0.000000
> omega   0.000001    0.000014   0.094157 0.924984
> alpha1  0.087715    0.185058   0.473985 0.635511
> beta1   0.904935    0.190563   4.748733 0.000002
>
> LogLikelihood : 17902.41
>
> Information Criteria
> ------------------------------------
>
> Akaike       -6.4807
> Bayes        -6.4735
> Shibata      -6.4807
> Hannan-Quinn -6.4782
>
> Weighted Ljung-Box Test on Standardized Residuals
> ------------------------------------
>                          statistic p-value
> Lag[1]                         NA      NA
> Lag[2*(p+q)+(p+q)-1][5]        NA      NA
> Lag[4*(p+q)+(p+q)-1][9]        NA      NA
> d.o.f=2
> H0 : No serial correlation
>
> Weighted Ljung-Box Test on Standardized Squared Residuals
> ------------------------------------
>                          statistic p-value
> Lag[1]                         NA      NA
> Lag[2*(p+q)+(p+q)-1][5]        NA      NA
> Lag[4*(p+q)+(p+q)-1][9]        NA      NA
> d.o.f=2
>
> Weighted ARCH LM Tests
> ------------------------------------
>              Statistic Shape Scale P-Value
> ARCH Lag[3]        NA 0.500 2.000      NA
> ARCH Lag[5]        NA 1.440 1.667      NA
> ARCH Lag[7]        NA 2.315 1.543      NA
>
> Nyblom stability test
> ------------------------------------
> Joint Statistic:  174.2204
> Individual Statistics:
> mu      0.2060
> ar1     0.1477
> ma1     0.1047
> omega  21.3472
> alpha1  0.1346
> beta1   0.1134
>
> Asymptotic Critical Values (10% 5% 1%)
> Joint Statistic:      1.49 1.68 2.12
> Individual Statistic: 0.35 0.47 0.75
>
> Sign Bias Test
> ------------------------------------
>                     t-value      prob sig
> Sign Bias           0.4296 6.675e-01
> Negative Sign Bias  2.9492 3.199e-03 ***
> Positive Sign Bias  2.3921 1.678e-02  **
> Joint Effect       28.9841 2.257e-06 ***
>
>
> Adjusted Pearson Goodness-of-Fit Test:
> ------------------------------------
>    group statistic p-value(g-1)
> 1    20     178.6    5.738e-28
> 2    30     188.1    3.136e-25
> 3    40     217.8    1.084e-26
> 4    50     227.9    7.064e-25
>
>
> Elapsed time : 1.343655
>
>
> *sessionInfo()*
>
> R version 3.1.3 (2015-03-09)
> Platform: i386-w64-mingw32/i386 (32-bit)
> Running under: Windows XP (build 2600) Service Pack 3
>
> locale:
> [1] LC_COLLATE=Spanish_Spain.1252
> [2] LC_CTYPE=Spanish_Spain.1252
> [3] LC_MONETARY=Spanish_Spain.1252
> [4] LC_NUMERIC=C
> [5] LC_TIME=Spanish_Spain.1252
>
> attached base packages:
> [1] parallel  stats     graphics  grDevices utils
> [6] datasets  methods   base
>
> other attached packages:
>   [1] nortest_1.0-3      ggplot2_1.0.1
>   [3] fUnitRoots_3010.78 urca_1.2-8
>   [5] fGarch_3010.82     fBasics_3011.87
>   [7] rugarch_1.3-4      FinTS_0.4-5
>   [9] TSA_1.01           mgcv_1.8-5
> [11] nlme_3.1-120       locfit_1.5-9.1
> [13] leaps_2.9          MASS_7.3-39
> [15] timeSeries_3012.99 timeDate_3012.100
> [17] tseries_0.10-34    zoo_1.7-12
> [19] quadprog_1.5-5     RODBC_1.3-11
>
> loaded via a namespace (and not attached):
>   [1] colorspace_1.2-6
>   [2] digest_0.6.8
>   [3] DistributionUtils_0.5-1
>   [4] expm_0.99-1.1
>   [5] GeneralizedHyperbolic_0.8-1
>   [6] grid_3.1.3
>   [7] gtable_0.1.2
>   [8] KernSmooth_2.23-14
>   [9] ks_1.9.4
> [10] labeling_0.3
> [11] lattice_0.20-30
> [12] Matrix_1.1-5
> [13] misc3d_0.8-4
> [14] munsell_0.4.2
> [15] mvtnorm_1.0-2
> [16] nloptr_1.0.4
> [17] numDeriv_2012.9-1
> [18] plyr_1.8.1
> [19] proto_0.3-10
> [20] Rcpp_0.11.5
> [21] reshape2_1.4.1
> [22] rgl_0.95.1201
> [23] Rsolnp_1.15
> [24] scales_0.2.4
> [25] SkewHyperbolic_0.3-2
> [26] spd_2.0-0
> [27] stringr_0.6.2
> [28] tools_3.1.3
> [29] truncnorm_1.0-7
> [30] xts_0.9-7
>
>
> Thanks u all in advance.
>


From cduranceau at nial.ky  Thu Mar 26 00:30:30 2015
From: cduranceau at nial.ky (Charles Duranceau)
Date: Wed, 25 Mar 2015 23:30:30 +0000
Subject: [R-SIG-Finance] validation of DrawdownPeak in
 PerformanceAnalytics package
In-Reply-To: <5510A618.6060808@braverock.com>
References: <253B4FA1ECEEB54DB661809CB67734552A0D0DDA@NOR-EXC02.northview.local>
	<5510A618.6060808@braverock.com>
Message-ID: <253B4FA1ECEEB54DB661809CB67734552A0D19DD@NOR-EXC02.northview.local>

Hi Peter, 

Yes that works. Thank you
I found also easier working directly with "table.Drawdowns" but wanted to understand the building blocks. 

Cheers


-----Original Message-----
From: Peter Carl [mailto:peter at braverock.com] 
Sent: Monday, March 23, 2015 6:48 PM
To: Charles Duranceau; r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] validation of DrawdownPeak in PerformanceAnalytics package

Charles,

DrawdownPeak probably shouldn't be in the namespace - thanks for pointing it out.  You might be looking for PerformanceAnalytics:::Drawdowns, which probably *should* be in the namespace.  Let me know if that works for you.

pcc

On 03/23/2015 06:05 PM, Charles Duranceau wrote:
> Hi,
> I'm looking at the results returned by the function DrawdownPeak and struggle to understand the calculation.
> In the following example, I recalculate the return from drawdown and for the third period I found a difference (I'm aware the formula I'm using is only local for the example).
> I expect using "geometric" rule for aggregating returns but cannot 
> match the calculations
>
> In this example the peak is 10% and the returns for the next 2 period 
> are -2% and -1% which should lead to a cumulative return of (1.1 / 
> 1.078 / 1.06722)
>
> Q1. The return for the 3rd period from Peak should then be : 1.06722 / 
> 1.10 -1 = 2.98% and not 2.9998%. Is the result I should expect? (it looks like the it does not compound when "geometric=TRUE") Q2. I noticed that "geometric=TRUE" option does not make any difference. Is this expected?
> Q3. Finally I was not able to standardized the decimal with  options(digits=4). Is this normal?
>
> Code for replication
>
> library("PerformanceAnalytics")
> ret_num<-c(0.10,-0.020,-0.010)                                                            # simulated returns - the peak is the first observations
> ret_test<-xts(ret_num, Sys.Date()-3:1)                                     # return in xts class
> ddtp_test<-DrawdownPeak(ret_test,geometric=TRUE)            # results for return for drawdowns  to validate
> cret_num<-cumprod(1+ret_num)-1                                          # validation by cumulative returns
> ddtp_vet<-(1+cret_num)/(1+cret_num[1])-1                # replication of cumulative returns for drawdowns
> cbind(ddtp_test,ddtp_vet)                                             # to compare results - differences
>
> The third row shows a difference - look small bu
>       ddtp_test ddtp_vet
> [1,]  0.000000   0.0000
> [2,] -0.020000  -0.0200
> [3,] -0.029998  -0.0298
>
>
> This looks small (not related to rounding)  but in other cases the difference was more important and lead to  difference in the drawdown period.
> I reproduced the same values with version 3.1 and version 3.1.3
>
>
> Package PerformanceAnalytics (1.4.3579) loaded.
>
> version.string R version 3.1.3 (2015-03-09)
>
>
>
>
>
>
>
> Thank you
> Best Regards,
>
> Charles
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


--
Peter Carl
312.307.6346


From pankajsbi at yahoo.com  Fri Mar 27 18:39:18 2015
From: pankajsbi at yahoo.com (Pankaj K Agarwal)
Date: Fri, 27 Mar 2015 17:39:18 +0000 (UTC)
Subject: [R-SIG-Finance] Problem in output of "countMonthlyRecords" in
	Package "timeSeries"
Message-ID: <549400896.1883408.1427477958569.JavaMail.yahoo@mail.yahoo.com>

Dear all,I had a 10-year daily irregular time series of stock returns and wanted to count number of trading days each month. The function countMonthlyRecords() did not return the no. of days in the last month of the series. Can anybody help??Thanks and Regards,Pankaj K Agarwal
+91-94153 97472http://in.linkedin.com/in/pankajkagarwal/
	[[alternative HTML version deleted]]


From michael.weylandt at gmail.com  Sun Mar 29 05:56:48 2015
From: michael.weylandt at gmail.com (Michael Weylandt)
Date: Sat, 28 Mar 2015 23:56:48 -0400
Subject: [R-SIG-Finance] Problem in output of "countMonthlyRecords" in
	Package "timeSeries"
In-Reply-To: <549400896.1883408.1427477958569.JavaMail.yahoo@mail.yahoo.com>
References: <549400896.1883408.1427477958569.JavaMail.yahoo@mail.yahoo.com>
Message-ID: <76A974BF-C409-46BF-8EB6-B436BE767EDC@gmail.com>

If you have data from each trading day, something like

quantmod::apply.monthly(x, NROW)

might work. 

If your data is spotty, you need to tell us more about your data provider.

As always, http://sscce.org is your friend. 

Michael

> On Mar 27, 2015, at 1:39 PM, Pankaj K Agarwal via R-SIG-Finance <r-sig-finance at r-project.org> wrote:
> 
> Dear all,I had a 10-year daily irregular time series of stock returns and wanted to count number of trading days each month. The function countMonthlyRecords() did not return the no. of days in the last month of the series. Can anybody help? Thanks and Regards,Pankaj K Agarwal
> +91-94153 97472http://in.linkedin.com/in/pankajkagarwal/
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From uelihofstetter at gmail.com  Sun Mar 29 20:50:10 2015
From: uelihofstetter at gmail.com (Ueli Hofstetter)
Date: Sun, 29 Mar 2015 20:50:10 +0200
Subject: [R-SIG-Finance] Problem using Quantmod and MySQL
Message-ID: <CA+fgw8QF7gGqZs=ks1HTvqBA-m-2Mw=mqGtXQ4kfM7f27ESXPQ@mail.gmail.com>

I have some problems loading symbols from an mysql db using getSymbols.

Instead of repeating the issue, here is a link to the description on
stackoverflow

http://stackoverflow.com/questions/29333330/quantmod-error-loading-symbols-from-mysql-db

Any help is greatly appreciated

-- 
Ueli Hofstetter

	[[alternative HTML version deleted]]


From markknecht at gmail.com  Sun Mar 29 21:47:32 2015
From: markknecht at gmail.com (Mark Knecht)
Date: Sun, 29 Mar 2015 12:47:32 -0700
Subject: [R-SIG-Finance] Problem using Quantmod and MySQL
In-Reply-To: <CA+fgw8QF7gGqZs=ks1HTvqBA-m-2Mw=mqGtXQ4kfM7f27ESXPQ@mail.gmail.com>
References: <CA+fgw8QF7gGqZs=ks1HTvqBA-m-2Mw=mqGtXQ4kfM7f27ESXPQ@mail.gmail.com>
Message-ID: <CAK2H+ec6P9hyhfnmsvZK4HutHGne1XLn0KtFB_X9cW7GhkNWCA@mail.gmail.com>

On Sun, Mar 29, 2015 at 11:50 AM, Ueli Hofstetter
<uelihofstetter at gmail.com> wrote:
> I have some problems loading symbols from an mysql db using getSymbols.
>
> Instead of repeating the issue, here is a link to the description on
> stackoverflow
>
> http://stackoverflow.com/questions/29333330/quantmod-error-loading-symbols-from-mysql-db
>
> Any help is greatly appreciated
>
> --
> Ueli Hofstetter


I see the same error message here. I have moved pretty far away from
using R on a day-to-day basis so I have no idea how long this has been
going on.

Anyway, it's not only you so wait for someone closer to the system to
supply an answer.

HTH,
Mark


From josh.m.ulrich at gmail.com  Mon Mar 30 00:37:44 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sun, 29 Mar 2015 17:37:44 -0500
Subject: [R-SIG-Finance] Problem using Quantmod and MySQL
In-Reply-To: <CA+fgw8QF7gGqZs=ks1HTvqBA-m-2Mw=mqGtXQ4kfM7f27ESXPQ@mail.gmail.com>
References: <CA+fgw8QF7gGqZs=ks1HTvqBA-m-2Mw=mqGtXQ4kfM7f27ESXPQ@mail.gmail.com>
Message-ID: <CAPPM_gR=B-fw6fZn2yMa-encND=Vno=aDTHt_HGP3SWhaqHDsQ@mail.gmail.com>

On Sun, Mar 29, 2015 at 1:50 PM, Ueli Hofstetter
<uelihofstetter at gmail.com> wrote:
> I have some problems loading symbols from an mysql db using getSymbols.
>
> Instead of repeating the issue, here is a link to the description on
> stackoverflow
>
> http://stackoverflow.com/questions/29333330/quantmod-error-loading-symbols-from-mysql-db
>
> Any help is greatly appreciated
>
The "character" method for dbConnect was removed in the 0.10 release
of RMySQL. I'm not sure whether or not this was intentional. It was
not mentioned in the release notes.

> --
> Ueli Hofstetter
>


-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From josh.m.ulrich at gmail.com  Mon Mar 30 18:25:52 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 30 Mar 2015 11:25:52 -0500
Subject: [R-SIG-Finance] Problem using Quantmod and MySQL
In-Reply-To: <CAPPM_gR=B-fw6fZn2yMa-encND=Vno=aDTHt_HGP3SWhaqHDsQ@mail.gmail.com>
References: <CA+fgw8QF7gGqZs=ks1HTvqBA-m-2Mw=mqGtXQ4kfM7f27ESXPQ@mail.gmail.com>
	<CAPPM_gR=B-fw6fZn2yMa-encND=Vno=aDTHt_HGP3SWhaqHDsQ@mail.gmail.com>
Message-ID: <CAPPM_gQk-trahkccEXBavnf6p4am7uEVARZL4ASJpVVB0n2AcQ@mail.gmail.com>

On Sun, Mar 29, 2015 at 5:37 PM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> On Sun, Mar 29, 2015 at 1:50 PM, Ueli Hofstetter
> <uelihofstetter at gmail.com> wrote:
>> I have some problems loading symbols from an mysql db using getSymbols.
>>
>> Instead of repeating the issue, here is a link to the description on
>> stackoverflow
>>
>> http://stackoverflow.com/questions/29333330/quantmod-error-loading-symbols-from-mysql-db
>>
>> Any help is greatly appreciated
>>
> The "character" method for dbConnect was removed in the 0.10 release
> of RMySQL. I'm not sure whether or not this was intentional. It was
> not mentioned in the release notes.
>
It was removed intentionally.  I do not have a MySQL database
available for testing, so I would really appreciate some help from
those who use this functionality.  Can someone please try this
suggested edit:
https://github.com/rstats-db/RMySQL/issues/62#issuecomment-87692704

And provide feedback at: https://github.com/joshuaulrich/quantmod/issues/45

Thanks!
Josh


-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From markknecht at gmail.com  Mon Mar 30 18:49:51 2015
From: markknecht at gmail.com (Mark Knecht)
Date: Mon, 30 Mar 2015 09:49:51 -0700
Subject: [R-SIG-Finance] Problem using Quantmod and MySQL
In-Reply-To: <CAPPM_gQk-trahkccEXBavnf6p4am7uEVARZL4ASJpVVB0n2AcQ@mail.gmail.com>
References: <CA+fgw8QF7gGqZs=ks1HTvqBA-m-2Mw=mqGtXQ4kfM7f27ESXPQ@mail.gmail.com>
	<CAPPM_gR=B-fw6fZn2yMa-encND=Vno=aDTHt_HGP3SWhaqHDsQ@mail.gmail.com>
	<CAPPM_gQk-trahkccEXBavnf6p4am7uEVARZL4ASJpVVB0n2AcQ@mail.gmail.com>
Message-ID: <CAK2H+efbW-HAm-UrqAKm8FRAVQ20OH4uXPJ9NzLVqB32Kp6bzQ@mail.gmail.com>

On Mon, Mar 30, 2015 at 9:25 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> On Sun, Mar 29, 2015 at 5:37 PM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
>> On Sun, Mar 29, 2015 at 1:50 PM, Ueli Hofstetter
>> <uelihofstetter at gmail.com> wrote:
>>> I have some problems loading symbols from an mysql db using getSymbols.
>>>
>>> Instead of repeating the issue, here is a link to the description on
>>> stackoverflow
>>>
>>> http://stackoverflow.com/questions/29333330/quantmod-error-loading-symbols-from-mysql-db
>>>
>>> Any help is greatly appreciated
>>>
>> The "character" method for dbConnect was removed in the 0.10 release
>> of RMySQL. I'm not sure whether or not this was intentional. It was
>> not mentioned in the release notes.
>>
> It was removed intentionally.  I do not have a MySQL database
> available for testing, so I would really appreciate some help from
> those who use this functionality.  Can someone please try this
> suggested edit:
> https://github.com/rstats-db/RMySQL/issues/62#issuecomment-87692704
>
> And provide feedback at: https://github.com/joshuaulrich/quantmod/issues/45
>
> Thanks!
> Josh
>
>
> --
> Joshua Ulrich  |  about.me/joshuaulrich
> FOSS Trading  |  www.fosstrading.com
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



I'm happy to try it out but a little confused as to all the locations
I need to edit. Help me clear this up and I'll try it out immediately.

The failure is coming when I'm trying to get the data using the following code:

> if (DownloadNewData){
+   if (!UseMySQL){
+     for (i in 1:length(TestSym)){
+       print(paste("From ",SymbolSrc," -- ",TestSym[i]))
+       getSymbolsCont(TestSym[i], from = DataStart, to = DataEnd,
adjust = MyAdjust, src=SymbolSrc)
+     }
+   } else {
+     for (i in 1:length(TestSym)){
+       print(paste("From MySQL -- ",TestSym[i]))
+ #      getSymbols(TestSym[i], src="MySQL")
+       getSymbols(TestSym[i], src="MySQL", user="mark",
password="MyTempPassword", dbname=dbName)
+       assign(TestSym[i], get(TestSym[i])[paste0(DataStart,"/",DataEnd)])
+     }
+     dbDisconnect(dbc)
+   }
+ }
[1] "From MySQL --  SPY"
 Show Traceback

 Rerun with Debug

Error in (function (classes, fdef, mtable)  :
  unable to find an inherited method for function ?dbConnect? for
signature ?"character"?


Am I correct that the suggestion is to edit two lines?

First, I use

library(RMySQL)

Is the first edit to change this to

requireNamespace("RMySQL", quietly = TRUE)

or do I add this to my code somewhere and keep the library command?

Later in my code I have:

if (UseMySQL){
  if (MyAdjust) { dbName = paste0(dbName, "Adjust")}
  dbc = dbConnect(MySQL(), dbname=dbName)
#  setDefaults(getSymbols.MySQL, user="mark",
password="MyTempPassword", dbname=dbName)
}

This would be where the second edit goes?

dbConnect("MySQL", ...) to dbConnect(RMySQL::MySQL, ...)

Thanks,
Mark


From josh.m.ulrich at gmail.com  Mon Mar 30 18:59:08 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 30 Mar 2015 11:59:08 -0500
Subject: [R-SIG-Finance] Problem using Quantmod and MySQL
In-Reply-To: <CAK2H+efbW-HAm-UrqAKm8FRAVQ20OH4uXPJ9NzLVqB32Kp6bzQ@mail.gmail.com>
References: <CA+fgw8QF7gGqZs=ks1HTvqBA-m-2Mw=mqGtXQ4kfM7f27ESXPQ@mail.gmail.com>
	<CAPPM_gR=B-fw6fZn2yMa-encND=Vno=aDTHt_HGP3SWhaqHDsQ@mail.gmail.com>
	<CAPPM_gQk-trahkccEXBavnf6p4am7uEVARZL4ASJpVVB0n2AcQ@mail.gmail.com>
	<CAK2H+efbW-HAm-UrqAKm8FRAVQ20OH4uXPJ9NzLVqB32Kp6bzQ@mail.gmail.com>
Message-ID: <CAPPM_gQVCw7a3j3wcMdDSeud_J-3CR59i1j6__Nq5D_X81zNuw@mail.gmail.com>

On Mon, Mar 30, 2015 at 11:49 AM, Mark Knecht <markknecht at gmail.com> wrote:
> On Mon, Mar 30, 2015 at 9:25 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
>> On Sun, Mar 29, 2015 at 5:37 PM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
>>> On Sun, Mar 29, 2015 at 1:50 PM, Ueli Hofstetter
>>> <uelihofstetter at gmail.com> wrote:
>>>> I have some problems loading symbols from an mysql db using getSymbols.
>>>>
>>>> Instead of repeating the issue, here is a link to the description on
>>>> stackoverflow
>>>>
>>>> http://stackoverflow.com/questions/29333330/quantmod-error-loading-symbols-from-mysql-db
>>>>
>>>> Any help is greatly appreciated
>>>>
>>> The "character" method for dbConnect was removed in the 0.10 release
>>> of RMySQL. I'm not sure whether or not this was intentional. It was
>>> not mentioned in the release notes.
>>>
>> It was removed intentionally.  I do not have a MySQL database
>> available for testing, so I would really appreciate some help from
>> those who use this functionality.  Can someone please try this
>> suggested edit:
>> https://github.com/rstats-db/RMySQL/issues/62#issuecomment-87692704
>>
>> And provide feedback at: https://github.com/joshuaulrich/quantmod/issues/45
>>
>> Thanks!
>> Josh
>>
>>
>> --
>> Joshua Ulrich  |  about.me/joshuaulrich
>> FOSS Trading  |  www.fosstrading.com
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>
>
>
> I'm happy to try it out but a little confused as to all the locations
> I need to edit. Help me clear this up and I'll try it out immediately.
>
> The failure is coming when I'm trying to get the data using the following code:
>
>> if (DownloadNewData){
> +   if (!UseMySQL){
> +     for (i in 1:length(TestSym)){
> +       print(paste("From ",SymbolSrc," -- ",TestSym[i]))
> +       getSymbolsCont(TestSym[i], from = DataStart, to = DataEnd,
> adjust = MyAdjust, src=SymbolSrc)
> +     }
> +   } else {
> +     for (i in 1:length(TestSym)){
> +       print(paste("From MySQL -- ",TestSym[i]))
> + #      getSymbols(TestSym[i], src="MySQL")
> +       getSymbols(TestSym[i], src="MySQL", user="mark",
> password="MyTempPassword", dbname=dbName)
> +       assign(TestSym[i], get(TestSym[i])[paste0(DataStart,"/",DataEnd)])
> +     }
> +     dbDisconnect(dbc)
> +   }
> + }
> [1] "From MySQL --  SPY"
>  Show Traceback
>
>  Rerun with Debug
>
> Error in (function (classes, fdef, mtable)  :
>   unable to find an inherited method for function ?dbConnect? for
> signature ?"character"?
>
>
> Am I correct that the suggestion is to edit two lines?
>
> First, I use
>
> library(RMySQL)
>
> Is the first edit to change this to
>
> requireNamespace("RMySQL", quietly = TRUE)
>
> or do I add this to my code somewhere and keep the library command?
>
No, you shouldn't need to change anything in your code.

> Later in my code I have:
>
> if (UseMySQL){
>   if (MyAdjust) { dbName = paste0(dbName, "Adjust")}
>   dbc = dbConnect(MySQL(), dbname=dbName)
> #  setDefaults(getSymbols.MySQL, user="mark",
> password="MyTempPassword", dbname=dbName)
> }
>
> This would be where the second edit goes?
>
> dbConnect("MySQL", ...) to dbConnect(RMySQL::MySQL, ...)
>
No. Again, you shouldn't need to change your code.  The change
required is on L614 of getSymbols.R.

> Thanks,
> Mark



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From markknecht at gmail.com  Mon Mar 30 19:02:31 2015
From: markknecht at gmail.com (Mark Knecht)
Date: Mon, 30 Mar 2015 10:02:31 -0700
Subject: [R-SIG-Finance] Problem using Quantmod and MySQL
In-Reply-To: <CAPPM_gQVCw7a3j3wcMdDSeud_J-3CR59i1j6__Nq5D_X81zNuw@mail.gmail.com>
References: <CA+fgw8QF7gGqZs=ks1HTvqBA-m-2Mw=mqGtXQ4kfM7f27ESXPQ@mail.gmail.com>
	<CAPPM_gR=B-fw6fZn2yMa-encND=Vno=aDTHt_HGP3SWhaqHDsQ@mail.gmail.com>
	<CAPPM_gQk-trahkccEXBavnf6p4am7uEVARZL4ASJpVVB0n2AcQ@mail.gmail.com>
	<CAK2H+efbW-HAm-UrqAKm8FRAVQ20OH4uXPJ9NzLVqB32Kp6bzQ@mail.gmail.com>
	<CAPPM_gQVCw7a3j3wcMdDSeud_J-3CR59i1j6__Nq5D_X81zNuw@mail.gmail.com>
Message-ID: <CAK2H+efJBJMhUFR5PT4Cxws2rZfSgGght9jj2meu4ojVoriHDw@mail.gmail.com>

On Mon, Mar 30, 2015 at 9:59 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> On Mon, Mar 30, 2015 at 11:49 AM, Mark Knecht <markknecht at gmail.com> wrote:
>> On Mon, Mar 30, 2015 at 9:25 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
>>> On Sun, Mar 29, 2015 at 5:37 PM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
>>>> On Sun, Mar 29, 2015 at 1:50 PM, Ueli Hofstetter
>>>> <uelihofstetter at gmail.com> wrote:
>>>>> I have some problems loading symbols from an mysql db using getSymbols.
>>>>>
>>>>> Instead of repeating the issue, here is a link to the description on
>>>>> stackoverflow
>>>>>
>>>>> http://stackoverflow.com/questions/29333330/quantmod-error-loading-symbols-from-mysql-db
>>>>>
>>>>> Any help is greatly appreciated
>>>>>
>>>> The "character" method for dbConnect was removed in the 0.10 release
>>>> of RMySQL. I'm not sure whether or not this was intentional. It was
>>>> not mentioned in the release notes.
>>>>
>>> It was removed intentionally.  I do not have a MySQL database
>>> available for testing, so I would really appreciate some help from
>>> those who use this functionality.  Can someone please try this
>>> suggested edit:
>>> https://github.com/rstats-db/RMySQL/issues/62#issuecomment-87692704
>>>
>>> And provide feedback at: https://github.com/joshuaulrich/quantmod/issues/45
>>>
>>> Thanks!
>>> Josh
>>>
>>>
>>> --
>>> Joshua Ulrich  |  about.me/joshuaulrich
>>> FOSS Trading  |  www.fosstrading.com
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>
>>
>>
>> I'm happy to try it out but a little confused as to all the locations
>> I need to edit. Help me clear this up and I'll try it out immediately.
>>
>> The failure is coming when I'm trying to get the data using the following code:
>>
>>> if (DownloadNewData){
>> +   if (!UseMySQL){
>> +     for (i in 1:length(TestSym)){
>> +       print(paste("From ",SymbolSrc," -- ",TestSym[i]))
>> +       getSymbolsCont(TestSym[i], from = DataStart, to = DataEnd,
>> adjust = MyAdjust, src=SymbolSrc)
>> +     }
>> +   } else {
>> +     for (i in 1:length(TestSym)){
>> +       print(paste("From MySQL -- ",TestSym[i]))
>> + #      getSymbols(TestSym[i], src="MySQL")
>> +       getSymbols(TestSym[i], src="MySQL", user="mark",
>> password="MyTempPassword", dbname=dbName)
>> +       assign(TestSym[i], get(TestSym[i])[paste0(DataStart,"/",DataEnd)])
>> +     }
>> +     dbDisconnect(dbc)
>> +   }
>> + }
>> [1] "From MySQL --  SPY"
>>  Show Traceback
>>
>>  Rerun with Debug
>>
>> Error in (function (classes, fdef, mtable)  :
>>   unable to find an inherited method for function ?dbConnect? for
>> signature ?"character"?
>>
>>
>> Am I correct that the suggestion is to edit two lines?
>>
>> First, I use
>>
>> library(RMySQL)
>>
>> Is the first edit to change this to
>>
>> requireNamespace("RMySQL", quietly = TRUE)
>>
>> or do I add this to my code somewhere and keep the library command?
>>
> No, you shouldn't need to change anything in your code.
>
>> Later in my code I have:
>>
>> if (UseMySQL){
>>   if (MyAdjust) { dbName = paste0(dbName, "Adjust")}
>>   dbc = dbConnect(MySQL(), dbname=dbName)
>> #  setDefaults(getSymbols.MySQL, user="mark",
>> password="MyTempPassword", dbname=dbName)
>> }
>>
>> This would be where the second edit goes?
>>
>> dbConnect("MySQL", ...) to dbConnect(RMySQL::MySQL, ...)
>>
> No. Again, you shouldn't need to change your code.  The change
> required is on L614 of getSymbols.R.
>
>> Thanks,
>> Mark
>
>
>
> --
> Joshua Ulrich  |  about.me/joshuaulrich
> FOSS Trading  |  www.fosstrading.com

In that case I'll leave it to someone else to test. I don't want to
mess with non-production libraries. My skill set in this code isn't
good.

Good luck,
Mark


From josh.m.ulrich at gmail.com  Tue Mar 31 14:03:36 2015
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 31 Mar 2015 07:03:36 -0500
Subject: [R-SIG-Finance] R/Finance 2015 registration now open
Message-ID: <CAPPM_gQy6u02RwGWCb77MhUvN5v4w_rVEeHFwGwmJU9c=OtqLQ@mail.gmail.com>

Registration for R/Finance 2015 is now open!

The conference will take place on May 29 and 30, at UIC in Chicago.
Building on the success of the previous conferences in 2009-2014, we
expect more than 250 attendees from around the world. R users from
industry, academia, and government will joining 30+ presenters
covering all areas of finance with R.

We are very excited about the four keynote presentations given by
Emanuel Derman, Louis Marascio, Alexander McNeil, and Rishi Narang.
The conference agenda (currently) includes 18 full presentations and
19 shorter "lightning talks".  As in previous years, several
(optional) pre-conference seminars are offered on Friday morning.

There is also an (optional) conference dinner at The Terrace at Trump
Hotel. Overlooking the Chicago river and skyline, it is a perfect
venue to continue conversations while dining and drinking.

As they are finalized, agenda details are available at:
  http://www.RinFinance.com/agenda/

Registration information is available at:
  http://www.RinFinance.com/register/

and can also be directly accessed by going to:
  http://www.cvent.com/d/94q27k

We would to thank our 2015 Sponsors for the continued support enabling us
to host such an exciting conference:

  International Center for Futures and Derivatives at UIC

  Revolution Analytics
  MS-Computational Finance and Risk Management at University of Washington

  Ketchum Trading
  OneMarketData
  RStudio
  SYMMS

On behalf of the committee and sponsors, we look forward to seeing you
in Chicago!

  Gib Bassett, Peter Carl, Dirk Eddelbuettel, Brian Peterson,
  Dale Rosenthal, Jeffrey Ryan, Joshua Ulrich



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


