From namir.yeroham at farad.lu  Tue Jan  3 18:35:40 2006
From: namir.yeroham at farad.lu (Namir Yeroham)
Date: Tue, 3 Jan 2006 18:35:40 +0100
Subject: [R-sig-finance] Problem plotting results in fportfolio
Message-ID: <200601031733.k03HXsMB014892@hypatia.math.ethz.ch>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060103/54b7eab7/attachment.pl

From dsamperi at DecisionSynergy.com  Fri Jan  6 00:14:02 2006
From: dsamperi at DecisionSynergy.com (Dominick Samperi)
Date: Thu, 05 Jan 2006 18:14:02 -0500
Subject: [R-sig-finance] Rcpp R/C++ interface library
Message-ID: <43BDA83A.5070405@DecisionSynergy.com>

The Rcpp R/C++ interface library was uploaded to CRAN today. It
should be available at http://cran.r-project.org shortly.

Rcpp facilitates the process of using a C++ library (like QuantLib)
from the R statistical software system. It is a "bare bones" solution.
It is currently used by RQuantLib to expose a couple of QuantLib
fixed income functions.

The PDF file Rcpp.pdf (part of the package) provides details.

Dominick


From spencer.graves at pdf.com  Tue Jan 10 05:40:59 2006
From: spencer.graves at pdf.com (Spencer Graves)
Date: Mon, 09 Jan 2006 20:40:59 -0800
Subject: [R-sig-finance] Problem plotting results in fportfolio
In-Reply-To: <200601031733.k03HXsMB014892@hypatia.math.ethz.ch>
References: <200601031733.k03HXsMB014892@hypatia.math.ethz.ch>
Message-ID: <43C33ADB.5050208@pdf.com>

	  If you have received a reply to this question?  I haven't seen one. 
If you would still like help from this listserve, I suggest you PLEASE 
do read the posting guide! "www.R-project.org/posting-guide.html" and 
follow the suggestions there.  In particular, if you provide a small, 
self-contained example that someone like me can copy from your email 
into R and get the error message you got.

	  Where can I get the "fportfolio" you mention?  You may or may not 
know that R is case sensitive.  Thinking you might be referring to the 
"fPortfolio" package, I installed that and looked for a function called 
"markowitzporfpolio".  After finding "no documentation" found for 
"markowitzporfpolio", I tried, 'help(package="fPortfolio")'.  This 
identified "MarkowitzPortfolio" as a key word.  The help file for that 
name contains several examples.  However, I am now out of time for this 
and must attend to other tasks.  If you would still like help from this 
group, please submit another post.  However, before you do, please read 
the posting guide mentioned above and proofread your email before you 
hit "send".  If you do that, it might increase the chances of receiving 
a useful reply quickly.

	  spencer graves

Namir Yeroham wrote:

> Hello,
> I'm trying to use the package fportfolio and I'm experiencing few problems.
> The first was related with the pfolio function, which seems to have a bug
> and I solved it using a new funcion posted oved the internet. (the function
> sets pfolio to null).ok I worked out this first issue.
> 
> When I tried to execute the example of the markowitzporfpolio I was able to
> get the weights, however the plots are not working and I got this message:
> 
> Error in xy.coords(x, y, xlabel, ylabel, log) : 
>         'x' and 'y' lengths differ
> 
> Is there anybody whom got the same problem?
> Thanks
> Namir
> 
>  *-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-
> 
> Namir Yeroham
> 
> FARAD International S.A.
> 
> 49 BLD Royal
> 
> L-2449 Luxembourg
> 
> Tel.   +352 2620 1851
> 
> Fax    +352 2620 2384
> 
> namir.yeroham at farad.lu
> 
>  
> 
> www.farad.lu
> 
>  
> 
> *-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-
> 
>  
> 
>  
> 
> This e-mail contains confidential information or information belonging
> 
> to the Farad International SA entity sending it and is intended solely
> 
> for the addressees. Any views expressed in this message are those of
> 
> the individual sender and its contents do not constitute a commitment
> 
> by Farad International SA unless confirmed by letter or fax. The
> 
> unauthorised
> 
> disclosure, use, dissemination or copying (either whole or partial) of
> 
> this e-mail, or any information it contains, is prohibited. E-mails are
> 
> susceptible to alteration and their integrity cannot be guaranteed.
> 
> Internet communications are not secured and therefore Farad International
> 
> SA shall not be liable for this e-mail if modified or falsified. If you
> 
> are not the intended recipient of this e-mail, please delete it
> 
> immediately from your system and notify the sender of the wrong
> 
> delivery and the mail deletion.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance


From pgonzale at metrogas.cl  Tue Jan 10 17:13:02 2006
From: pgonzale at metrogas.cl (Gonzalez, Patricio)
Date: Tue, 10 Jan 2006 12:13:02 -0400
Subject: [R-sig-finance] arimax
Message-ID: <922FF73D5E995745A8F3D71AFB82D6F4051B5E4E@EXCH02.metrogas.cl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060110/62100ebe/attachment.pl

From Ricardo.Zambrano at corpbanca.cl  Tue Jan 10 16:28:21 2006
From: Ricardo.Zambrano at corpbanca.cl (Ricardo Zambrano Aguilera)
Date: Tue, 10 Jan 2006 12:28:21 -0300
Subject: [R-sig-finance] arimax
Message-ID: <800F3C4ADCFCA643A919EF7C140A045A0748722C@LLANQUIHUE.corpgroup.cl>

	.i?m not lie!!, i?m gonna search it!! 
	RZ uc


From Bjarke.Christensen at sydbank.dk  Wed Jan 11 13:47:08 2006
From: Bjarke.Christensen at sydbank.dk (Bjarke Christensen)
Date: Wed, 11 Jan 2006 13:47:08 +0100
Subject: [R-sig-finance] arimax
In-Reply-To: <mailman.15.1136977204.17988.r-sig-finance@stat.math.ethz.ch>
Message-ID: <OFA7041D25.B031438E-ONC12570F3.00460247-C12570F3.00463BDD@bdpnet.dk>

Google: ARIMAX
-> https://stat.ethz.ch/pipermail/r-help/2001-August/013302.html

Best regards,
Bjarke Christensen.


From pgonzale at metrogas.cl  Thu Jan 12 16:28:46 2006
From: pgonzale at metrogas.cl (Gonzalez, Patricio)
Date: Thu, 12 Jan 2006 11:28:46 -0400
Subject: [R-sig-finance] R-sig-finance Digest, Vol 20, Issue 5
Message-ID: <922FF73D5E995745A8F3D71AFB82D6F40521D649@EXCH02.metrogas.cl>

Thank's

-----Mensaje original-----
De: r-sig-finance-bounces at stat.math.ethz.ch
[mailto:r-sig-finance-bounces at stat.math.ethz.ch] En nombre de
r-sig-finance-request at stat.math.ethz.ch
Enviado el: jueves, 12 de enero de 2006 7:00
Para: r-sig-finance at stat.math.ethz.ch
Asunto: R-sig-finance Digest, Vol 20, Issue 5

Send R-sig-finance mailing list submissions to
	r-sig-finance at stat.math.ethz.ch

To subscribe or unsubscribe via the World Wide Web, visit
	https://stat.ethz.ch/mailman/listinfo/r-sig-finance
or, via email, send a message with subject or body 'help' to
	r-sig-finance-request at stat.math.ethz.ch

You can reach the person managing the list at
	r-sig-finance-owner at stat.math.ethz.ch

When replying, please edit your Subject line so it is more specific
than "Re: Contents of R-sig-finance digest..."


Today's Topics:

   1. Re: arimax (Bjarke Christensen)


----------------------------------------------------------------------

Message: 1
Date: Wed, 11 Jan 2006 13:47:08 +0100
From: Bjarke Christensen <Bjarke.Christensen at sydbank.dk>
Subject: Re: [R-sig-finance] arimax
To: r-sig-finance at stat.math.ethz.ch
Message-ID:
	
<OFA7041D25.B031438E-ONC12570F3.00460247-C12570F3.00463BDD at bdpnet.dk>
Content-Type: text/plain; charset=US-ASCII

Google: ARIMAX
-> https://stat.ethz.ch/pipermail/r-help/2001-August/013302.html

Best regards,
Bjarke Christensen.



------------------------------

_______________________________________________
R-sig-finance mailing list
R-sig-finance at stat.math.ethz.ch
https://stat.ethz.ch/mailman/listinfo/r-sig-finance


End of R-sig-finance Digest, Vol 20, Issue 5


From finbref.2006 at gmail.com  Wed Jan 18 14:56:03 2006
From: finbref.2006 at gmail.com (Thomas Steiner)
Date: Wed, 18 Jan 2006 14:56:03 +0100
Subject: [R-sig-finance] fBonds
Message-ID: <d0f55a670601180556h3eba64eaw@mail.gmail.com>

I'd like to calculate forward rates from swap rates and then fit these
fwd-rates to a Svensson family and see how parameters envolve over
time (consistency).
I've read of the R-package fBonds, which could help me a lot. It is
not availible at CRAN or www.metrics.org Does anybody know about its
current state? Is it available to the public somewhere? Are there any
other packages that could help me?
Thanks for suggestions, help and hints
Thomas


From spencer.graves at pdf.com  Sat Jan 21 09:26:32 2006
From: spencer.graves at pdf.com (Spencer Graves)
Date: Sat, 21 Jan 2006 00:26:32 -0800
Subject: [R-sig-finance] fBonds
In-Reply-To: <d0f55a670601180556h3eba64eaw@mail.gmail.com>
References: <d0f55a670601180556h3eba64eaw@mail.gmail.com>
Message-ID: <43D1F038.4090805@pdf.com>

	  RSiteSearch("fBonds") produced 'No document matching your query.'  I 
similarly got nothing relevant searching for "swap rates" and 
"Svensson".  Googling for "fBonds" found a similar question to 
[R-sig-finance] in Oct. 2004, with no recorded answre.  The developer 
and maintainer of the Rmetrics project is Diethelm Wuertz 
<wuertz at itp.phys.ethz.ch>.  I don't know if S-Plus FinMetrics has this 
or not.

	  However, if you want to provide the math and some references with an 
incomplete attempt to program what you want in R, someone might help you 
get past any given obstacle.  (If you do this, you may want to know that 
posts more consistent with the posting guide! 
"www.R-project.org/posting-guide.html" may get quicker, more helpful 
answers.)

	  I'm sorry I couldn't give you a more helpful answer, but I hope you 
will find this useful nevertheless.

	  Best Wishes,
	  spencer graves	

Thomas Steiner wrote:

> I'd like to calculate forward rates from swap rates and then fit these
> fwd-rates to a Svensson family and see how parameters envolve over
> time (consistency).
> I've read of the R-package fBonds, which could help me a lot. It is
> not availible at CRAN or www.metrics.org Does anybody know about its
> current state? Is it available to the public somewhere? Are there any
> other packages that could help me?
> Thanks for suggestions, help and hints
> Thomas
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance


From ezivot at u.washington.edu  Sat Jan 21 21:44:39 2006
From: ezivot at u.washington.edu (Eric Zivot)
Date: Sat, 21 Jan 2006 12:44:39 -0800
Subject: [R-sig-finance] fBonds
In-Reply-To: <43D1F038.4090805@pdf.com>
Message-ID: <001001c61ecb$807cba50$6401a8c0@zivotd800>

S+FinMetrics has a number of tools for term structure modeling. The
term.struct() function implements a number of interpolation and spline
techniques, as well as Nelson-Siegel and Svensson models. In S+FinMetrics
2.0, the state space functionality has been upgraded to handle a general
class of affine term structure models. You can also easily use the state
space tools to implement a nelson-siegel or svensson model with time varying
coefficients (see, e.g., Diebold and Lee 2002 "Forecasting the Term
Structure of Government Bonds"). This allows for better out of sample
prediction.  I currently have a Phd student working on these methods as well
as extensions. Anyone interested in some code examples please email me
directly.
ez

-----Original Message-----
From: r-sig-finance-bounces at stat.math.ethz.ch
[mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of Spencer Graves
Sent: Saturday, January 21, 2006 12:27 AM
To: Thomas Steiner
Cc: r-sig-finance at stat.math.ethz.ch
Subject: Re: [R-sig-finance] fBonds

	  RSiteSearch("fBonds") produced 'No document matching your query.'
I 
similarly got nothing relevant searching for "swap rates" and 
"Svensson".  Googling for "fBonds" found a similar question to 
[R-sig-finance] in Oct. 2004, with no recorded answre.  The developer 
and maintainer of the Rmetrics project is Diethelm Wuertz 
<wuertz at itp.phys.ethz.ch>.  I don't know if S-Plus FinMetrics has this 
or not.

	  However, if you want to provide the math and some references with
an 
incomplete attempt to program what you want in R, someone might help you 
get past any given obstacle.  (If you do this, you may want to know that 
posts more consistent with the posting guide! 
"www.R-project.org/posting-guide.html" may get quicker, more helpful 
answers.)

	  I'm sorry I couldn't give you a more helpful answer, but I hope
you 
will find this useful nevertheless.

	  Best Wishes,
	  spencer graves	

Thomas Steiner wrote:

> I'd like to calculate forward rates from swap rates and then fit these
> fwd-rates to a Svensson family and see how parameters envolve over
> time (consistency).
> I've read of the R-package fBonds, which could help me a lot. It is
> not availible at CRAN or www.metrics.org Does anybody know about its
> current state? Is it available to the public somewhere? Are there any
> other packages that could help me?
> Thanks for suggestions, help and hints
> Thomas
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance

_______________________________________________
R-sig-finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance


From wuertz at itp.phys.ethz.ch  Sun Jan 22 21:19:23 2006
From: wuertz at itp.phys.ethz.ch (Diethelm Wuertz)
Date: Sun, 22 Jan 2006 20:19:23 +0000
Subject: [R-sig-finance] fBonds
In-Reply-To: <d0f55a670601180556h3eba64eaw@mail.gmail.com>
References: <d0f55a670601180556h3eba64eaw@mail.gmail.com>
Message-ID: <43D3E8CB.1040201@itp.phys.ethz.ch>


In the Rmetrics "Fact Sheet", accessiible on the Home page of the Rmetrics
Server www.rmetrics.org, you find that the fBonds package is not  yet 
available.
The package is still uncomplete, untested, and  less documented.  Currently
are available the following chapters with R functions::

    Bond and Money Market Arithmetic
    Bootstrapping - Direct Calculation of the Yield Curve
    Yield Curve Estimation by Regression Analysis
    Parameterizing a Yield Curve by Forward Rates
    Building the Yield Curve from the BBA LIBOR
    Adding Swaps to the Yield Curve
    Term Structure Fitting: Nelson-Siegel and Svensson models
    Replicating Portfolios for Risk Management of Mortgages and Savings

Less is done with functions for the valuation of interest rate options. 
Only a
few models are implemented.

Since other components of the Rmetrics Packages have higher priorities 
it will
take some additional time to finish the R package fBonds. If somebody from
the R community is ready for cooperation and will contribute with 
additional
functions for analysing and modelling Bond and Money Markets, or testing,
or writing documentation, please let me know.

Diethelm Wuertz

PS: Have also a look on SPlus/Finmetrics

Thomas Steiner wrote:

>I'd like to calculate forward rates from swap rates and then fit these
>fwd-rates to a Svensson family and see how parameters envolve over
>time (consistency).
>I've read of the R-package fBonds, which could help me a lot. It is
>not availible at CRAN or www.metrics.org Does anybody know about its
>current state? Is it available to the public somewhere? Are there any
>other packages that could help me?
>Thanks for suggestions, help and hints
>Thomas
>
>_______________________________________________
>R-sig-finance at stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>  
>


From kriskumar at earthlink.net  Sun Jan 22 23:06:59 2006
From: kriskumar at earthlink.net (Krishna Kumar)
Date: Sun, 22 Jan 2006 17:06:59 -0500
Subject: [R-sig-finance] fBonds svensson fitting
In-Reply-To: <d0f55a670601180556h3eba64eaw@mail.gmail.com>
References: <d0f55a670601180556h3eba64eaw@mail.gmail.com>
Message-ID: <43D40203.30800@earthlink.net>

Nelson-siegel and svensson are easy to fit (see 
http://www.bankofcanada.ca/en/res/tr/1999/tr84.pdf)

I used the following test data

 > fwdcrv
   tenor     fwd
1      1 1.10000
2      2 1.11927
3      3 1.13754
4      4 1.15735
5      5 1.22402
6      6 1.26254
7      7 1.33145
8      8 1.40115
9      9 1.47255
10    10 1.62928
11    11 1.69269
12    12 1.81135


And now in R one could do the following:
-------------------------------
nelson<-function(x,y=x)
{
nelson<- sum((y[,2]-(x[1] + (x[2] + x[3]* y[,1])* exp(-x[4]* y[,1])))^2)
}

r = nlm(f=nelson,p=c(1,10,10,10),y=fwdcrv,steptol=1e-10,iterlim=500)

$minimum
[1] 0.6461518

$estimate
[1]  1.361599  8.683838  8.683784 36.325287

$gradient
[1] 1.431076e-08 0.000000e+00 0.000000e+00 0.000000e+00

$code
[1] 1

$iterations
[1] 139

Note svensson is double humped so you have an additional parameter ( 
x[5] ) and so modify the function suitably.
Hope this helps,

Kris






Thomas Steiner wrote:

>I'd like to calculate forward rates from swap rates and then fit these
>fwd-rates to a Svensson family and see how parameters envolve over
>time (consistency).
>I've read of the R-package fBonds, which could help me a lot. It is
>not availible at CRAN or www.metrics.org Does anybody know about its
>current state? Is it available to the public somewhere? Are there any
>other packages that could help me?
>Thanks for suggestions, help and hints
>Thomas
>
>_______________________________________________
>R-sig-finance at stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>  
>


From finbref.2006 at gmail.com  Mon Jan 23 17:02:57 2006
From: finbref.2006 at gmail.com (Thomas Steiner)
Date: Mon, 23 Jan 2006 17:02:57 +0100
Subject: [R-sig-finance] fBonds svensson fitting
In-Reply-To: <43D40203.30800@earthlink.net>
References: <d0f55a670601180556h3eba64eaw@mail.gmail.com>
	<43D40203.30800@earthlink.net>
Message-ID: <d0f55a670601230802p491a1efcl@mail.gmail.com>

Dear Kris,
excellent, thank you.

> r = nlm(f=nelson,p=c(1,10,10,10),y=fwdcrv,steptol=1e-10,iterlim=500)

Where is the difference to nls? I tried something like

nls(formula=yc$yield~nelsonsiegel(yc$time,init), data = yc, start=init)

where yc is my dataframe with time and forward rates.
Anyway, even good starting estimates seem always to produce a singular
gradient matrix.

> Note svensson is double humped so you have an additional parameter (
> x[5] )

I think Svensson is 6-dimensional.
Some interpretations of the parameters of eg Nelson-Siegel can be used
to get better initial estimates. But this is as well mentioned in the
paper (pdf) you linked.

> Hope this helps,

Yes, a lot. BTW: How do you calculate forward rates out of SWAP (Libor) rates?

Thomas


From kriskumar at earthlink.net  Tue Jan 24 04:38:54 2006
From: kriskumar at earthlink.net (Krishna Kumar)
Date: Mon, 23 Jan 2006 22:38:54 -0500
Subject: [R-sig-finance] fBonds svensson fitting
In-Reply-To: <d0f55a670601230802p491a1efcl@mail.gmail.com>
References: <d0f55a670601180556h3eba64eaw@mail.gmail.com>	
	<43D40203.30800@earthlink.net>
	<d0f55a670601230802p491a1efcl@mail.gmail.com>
Message-ID: <43D5A14E.9050100@earthlink.net>

Thomas Steiner wrote:

>  
>
>>r = nlm(f=nelson,p=c(1,10,10,10),y=fwdcrv,steptol=1e-10,iterlim=500)
>>    
>>
>
>  
>
 >>How do you calculate forward rates out of SWAP (Libor) rates?

Typically you have money-market/cash , futures and swap rates so it is a 
little more involved and there are other considerations
such as smoothness of the forward and day counts etc. If you want an 
ugly way of doing this (caveat emptor)

Let us say we have the swap crv object with the first row being a cash 
rate (1 year) rate. The columns are
 tenor in years, day count between two tenor points and the swap/cash rates.

 > swapcrv
   Tenor days.360  Rates
1      1 1.022222 0.0359
2      2 1.011111 0.0390
3      3 1.011111 0.0403
4      4 1.013889 0.0409
5      5 1.016667 0.0414
6      6 1.013889 0.0418
7      7 1.019444 0.0423
8      8 1.011111 0.0427
9      9 1.013889 0.0430
10    10 1.013889 0.0434


---------------------------------------------
dfcurve<-function(swapcrv)
{
#First construct a discount curve!
##assumes the first point is cash and rest are swap rates
n<-dim(swapcrv)[1]
dfcrv<-matrix(0,n,2)
dfcrv[,1]<-swapcrv[,1]
dfcrv[,2]<-1/(1+swapcrv[,2]*swapcrv[,3])
dfcrv[-1,2]<-dfcrv[-1,2]*(1-(cumsum(swapcrv[-n,2]*dfcrv[-n,2]))*swapcrv[-1,3])
return(dfcrv)
}


df.to.fwd<-function(dfcurve,tenor,interp="linear")
{
#function to compute the forward curve at the tenor points given a dfcurve!
#do linear interpolation of the dfactors or cubic spline from akima package!
tenor<-c(0,tenor)
n<-length(tenor)
fwd.tenor<-array(0,n)
df.tenor<-array(0,n)
if(interp=="spline")
{
df.tenor<-aspline(dfcurve[,1],dfcurve[,2],tenor)$y

} else
{
df.tenor<-approx(dfcurve[,1],dfcurve[,2],tenor)$y

}
df.tenor[1]<-1
fwd.tenor<-(df.tenor[-n]/df.tenor[-1] -1)/diff(tenor)
return(list(fwd=fwd.tenor,df=df.tenor))

}
-----------------------------------------------


So now you can do

 >   dfcrv <- dfcurve(swapcrv)

And then construct the forward curve from the discount curve.

 > df.to.fwd(dfcrv,tenor=seq(0.5,10,by=0.5),interp="spline")

There are many ways to construct these curves and you will find this 
exhaustive paper useful
(http://www.cam.wits.ac.za/mfinance/papers/interpolation.pdf )

Best,
Kris


From kriskumar at earthlink.net  Fri Jan 27 13:23:38 2006
From: kriskumar at earthlink.net (Krishna Kumar)
Date: Fri, 27 Jan 2006 07:23:38 -0500
Subject: [R-sig-finance] [offtopic] solving sudoku in R?
Message-ID: <43DA10CA.6070403@earthlink.net>

As sudoku seems to be in fad this season how about a fast solver in R. ?
I wrote a little thingie that just does an exhaustive search and was 
wondering if this could be speeded up,
I am particularly interested in putting some intelligence in to it and 
any  speedups that could be done.

Currently doing,
 >  system.time(sudoku()) 
[1] 18.25  0.02 18.43    NA    NA

18 secs for the default puzzle.Also is there a way to count function 
evaluations in R (a-la-matlab flops)?.

 Suggestions welcome.


Best,
Kris

# ref: http://en.wikipedia.org/wiki/Sudoku
# Simple nobrains solver
# Krishna Kumar
# oMat is the original puzzle,bMat keeps a backup 
sudoku<-function(oMat=NULL,bMat=NULL)
{
if (length(oMat) < 1)
{ # use this sudoku if none is given
     oMat<-matrix(c(0, 1, 0 ,0 ,0 ,0, 0, 7, 0,
        3, 0, 2 ,1 ,0 ,9, 8, 0, 4,
        0 ,0, 0, 5, 0, 8, 0, 0, 0,
        6, 0, 0, 0, 9, 0, 0, 0, 2,
        0, 4, 0, 0, 0, 0, 0, 3, 0,
        8, 0, 0, 0, 3, 0, 0, 0, 7,
        0, 0, 0, 9, 0, 5, 0, 0, 0,
        2, 0, 4, 7, 0, 3, 9, 0, 1,
        0, 9, 0, 0, 0, 0, 0, 4, 0),9,9)
        print(oMat)
}
indx<-which(oMat==0,arr.ind=T) # where are the empty cells
if(length(indx) > 0) {
row.num<-indx[,1]
col.num<-indx[,2]
}
else {
    print("solution")
    return(oMat) #voila!
}
x<-row.num[1]
y<-col.num[1]
for (i in 1:9) # try 1 to 9
    { sub.y<-1+3*floor((y-1)/3) # find the submatrix 3x3 block for the 
current solution
        sub.x<-1+3*floor((x-1)/3)
    if (!( any(oMat[x,]==i) | any(oMat[,y]==i) | 
any((oMat[seq(sub.x,sub.x+2),seq(sub.y,sub.y+2)]==i)) )) { # if valid 
number
        work<-oMat
        work[x,y]<-i
        work<-Recall(oMat=work,bMat=oMat); # solve with this if we fail 
then we just return to the original matrix
        if (all(work))  {
            oMat<-work # voila!
            return(oMat) 
        }
   }
}
    return(bMat)
}

<cid:part1.01050202.07020505 at earthlink.net>


From Achim.Zeileis at wu-wien.ac.at  Fri Jan 27 13:54:11 2006
From: Achim.Zeileis at wu-wien.ac.at (Achim Zeileis)
Date: Fri, 27 Jan 2006 13:54:11 +0100
Subject: [R-sig-finance] [offtopic] solving sudoku in R?
In-Reply-To: <43DA10CA.6070403@earthlink.net>
References: <43DA10CA.6070403@earthlink.net>
Message-ID: <20060127135411.4ee29bf4.Achim.Zeileis@wu-wien.ac.at>

On Fri, 27 Jan 2006 07:23:38 -0500 Krishna Kumar wrote:

> As sudoku seems to be in fad this season how about a fast solver in
> R. ?

Try install.packages("sudoku") :-)
David Brahm has written this. What is still missing is a sudoku
generator...
Best,
Z

> I wrote a little thingie that just does an exhaustive search and
> was wondering if this could be speeded up,
> I am particularly interested in putting some intelligence in to it
> and any  speedups that could be done.
> 
> Currently doing,
>  >  system.time(sudoku()) 
> [1] 18.25  0.02 18.43    NA    NA
>
> 18 secs for the default puzzle.Also is there a way to count function 
> evaluations in R (a-la-matlab flops)?.
> 
>  Suggestions welcome.
> 
> 
> Best,
> Kris
> 
> # ref: http://en.wikipedia.org/wiki/Sudoku
> # Simple nobrains solver
> # Krishna Kumar
> # oMat is the original puzzle,bMat keeps a backup 
> sudoku<-function(oMat=NULL,bMat=NULL)
> {
> if (length(oMat) < 1)
> { # use this sudoku if none is given
>      oMat<-matrix(c(0, 1, 0 ,0 ,0 ,0, 0, 7, 0,
>         3, 0, 2 ,1 ,0 ,9, 8, 0, 4,
>         0 ,0, 0, 5, 0, 8, 0, 0, 0,
>         6, 0, 0, 0, 9, 0, 0, 0, 2,
>         0, 4, 0, 0, 0, 0, 0, 3, 0,
>         8, 0, 0, 0, 3, 0, 0, 0, 7,
>         0, 0, 0, 9, 0, 5, 0, 0, 0,
>         2, 0, 4, 7, 0, 3, 9, 0, 1,
>         0, 9, 0, 0, 0, 0, 0, 4, 0),9,9)
>         print(oMat)
> }
> indx<-which(oMat==0,arr.ind=T) # where are the empty cells
> if(length(indx) > 0) {
> row.num<-indx[,1]
> col.num<-indx[,2]
> }
> else {
>     print("solution")
>     return(oMat) #voila!
> }
> x<-row.num[1]
> y<-col.num[1]
> for (i in 1:9) # try 1 to 9
>     { sub.y<-1+3*floor((y-1)/3) # find the submatrix 3x3 block for
> the current solution
>         sub.x<-1+3*floor((x-1)/3)
>     if (!( any(oMat[x,]==i) | any(oMat[,y]==i) | 
> any((oMat[seq(sub.x,sub.x+2),seq(sub.y,sub.y+2)]==i)) )) { # if valid 
> number
>         work<-oMat
>         work[x,y]<-i
>         work<-Recall(oMat=work,bMat=oMat); # solve with this if we
> fail then we just return to the original matrix
>         if (all(work))  {
>             oMat<-work # voila!
>             return(oMat) 
>         }
>    }
> }
>     return(bMat)
> }
> 
> <cid:part1.01050202.07020505 at earthlink.net>
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From ggrothendieck at gmail.com  Fri Jan 27 15:35:39 2006
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 27 Jan 2006 09:35:39 -0500
Subject: [R-sig-finance] [offtopic] solving sudoku in R?
In-Reply-To: <43DA10CA.6070403@earthlink.net>
References: <43DA10CA.6070403@earthlink.net>
Message-ID: <971536df0601270635l529c24cej38cae32650c66749@mail.gmail.com>

You could try the lpSolve package.

On 1/27/06, Krishna Kumar <kriskumar at earthlink.net> wrote:
> As sudoku seems to be in fad this season how about a fast solver in R. ?
> I wrote a little thingie that just does an exhaustive search and was
> wondering if this could be speeded up,
> I am particularly interested in putting some intelligence in to it and
> any  speedups that could be done.
>
> Currently doing,
>  >  system.time(sudoku())
> [1] 18.25  0.02 18.43    NA    NA
>
> 18 secs for the default puzzle.Also is there a way to count function
> evaluations in R (a-la-matlab flops)?.
>
>  Suggestions welcome.
>
>
> Best,
> Kris
>
> # ref: http://en.wikipedia.org/wiki/Sudoku
> # Simple nobrains solver
> # Krishna Kumar
> # oMat is the original puzzle,bMat keeps a backup
> sudoku<-function(oMat=NULL,bMat=NULL)
> {
> if (length(oMat) < 1)
> { # use this sudoku if none is given
>     oMat<-matrix(c(0, 1, 0 ,0 ,0 ,0, 0, 7, 0,
>        3, 0, 2 ,1 ,0 ,9, 8, 0, 4,
>        0 ,0, 0, 5, 0, 8, 0, 0, 0,
>        6, 0, 0, 0, 9, 0, 0, 0, 2,
>        0, 4, 0, 0, 0, 0, 0, 3, 0,
>        8, 0, 0, 0, 3, 0, 0, 0, 7,
>        0, 0, 0, 9, 0, 5, 0, 0, 0,
>        2, 0, 4, 7, 0, 3, 9, 0, 1,
>        0, 9, 0, 0, 0, 0, 0, 4, 0),9,9)
>        print(oMat)
> }
> indx<-which(oMat==0,arr.ind=T) # where are the empty cells
> if(length(indx) > 0) {
> row.num<-indx[,1]
> col.num<-indx[,2]
> }
> else {
>    print("solution")
>    return(oMat) #voila!
> }
> x<-row.num[1]
> y<-col.num[1]
> for (i in 1:9) # try 1 to 9
>    { sub.y<-1+3*floor((y-1)/3) # find the submatrix 3x3 block for the
> current solution
>        sub.x<-1+3*floor((x-1)/3)
>    if (!( any(oMat[x,]==i) | any(oMat[,y]==i) |
> any((oMat[seq(sub.x,sub.x+2),seq(sub.y,sub.y+2)]==i)) )) { # if valid
> number
>        work<-oMat
>        work[x,y]<-i
>        work<-Recall(oMat=work,bMat=oMat); # solve with this if we fail
> then we just return to the original matrix
>        if (all(work))  {
>            oMat<-work # voila!
>            return(oMat)
>        }
>   }
> }
>    return(bMat)
> }
>
> <cid:part1.01050202.07020505 at earthlink.net>
>
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From maechler at stat.math.ethz.ch  Fri Jan 27 15:36:58 2006
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 27 Jan 2006 15:36:58 +0100
Subject: [R-sig-finance] [offtopic] solving sudoku in R?
In-Reply-To: <20060127135411.4ee29bf4.Achim.Zeileis@wu-wien.ac.at>
References: <43DA10CA.6070403@earthlink.net>
	<20060127135411.4ee29bf4.Achim.Zeileis@wu-wien.ac.at>
Message-ID: <17370.12298.968708.291311@stat.math.ethz.ch>

>>>>> "Achim" == Achim Zeileis <Achim.Zeileis at wu-wien.ac.at>
>>>>>     on Fri, 27 Jan 2006 13:54:11 +0100 writes:

    Achim> On Fri, 27 Jan 2006 07:23:38 -0500 Krishna Kumar wrote:
    >> As sudoku seems to be in fad this season how about a fast solver in
    >> R. ?

    Achim> Try install.packages("sudoku") :-)
    Achim> David Brahm has written this. What is still missing is a sudoku
    Achim> generator...

David Brahm has his next version of 'sudoku' -- greatly enhanced
in testing.

What __ON EARTH__  has this to do with R-SIG-Finance ??

REALLY, this belongs to R-help and nowhere else!
Martin

    Achim> Best,
    Achim> Z

    >> I wrote a little thingie that just does an exhaustive search and
    >> was wondering if this could be speeded up,
    >> I am particularly interested in putting some intelligence in to it
    >> and any  speedups that could be done.
    >> 
    >> Currently doing,
    >> >  system.time(sudoku()) 
    >> [1] 18.25  0.02 18.43    NA    NA
    >> 
    >> 18 secs for the default puzzle.Also is there a way to count function 
    >> evaluations in R (a-la-matlab flops)?.
    >> 
    >> Suggestions welcome.
    >> 
    >> 
    >> Best,


From kriskumar at earthlink.net  Sat Jan 28 01:07:29 2006
From: kriskumar at earthlink.net (Krishna Kumar)
Date: Fri, 27 Jan 2006 19:07:29 -0500
Subject: [R-sig-finance] [offtopic] solving sudoku in R?
In-Reply-To: <4DD6F8B8782D584FABF50BF3A32B03D8045ABF00@MSGBOSCLF2WIN.DMN1.FMR.COM>
References: <4DD6F8B8782D584FABF50BF3A32B03D8045ABF00@MSGBOSCLF2WIN.DMN1.FMR.COM>
Message-ID: <43DAB5C1.3070609@earthlink.net>

Achim thanks for pointing to David's package not being on R-help I 
missed the recent announcement.
Gabor thanks for lpSolve. Any hints ? 

>>What __ON EARTH__  has this to do with R-SIG-Finance ??
>>REALLY, this belongs to R-help and nowhere else!

Martin, Ya it is a very tenuous link but my motivation was to generate ideas. And to get
pointers to R-packages out there. I will try R-help next time. 

David, Thanks for sending me the updated version. I will have a go at 
it. From the preliminary comparison your original
 version is faster my updated version see attached does better and at 
times is blazingly fast but lacks consistency..
As you can see I use random permutations but it still is brute force and 
the search tree is different in any two attempts.
I think it might be worth trying to compare the speed over a set of 
problems with different levels of complexity.

And for what it is worth I have attached a simple sudoku generator.
 > puzzle<-gensudoku(entropy=30)
Generates a puzzle, entropy determines the difficulty.

Best,
Kris





-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: rsudoku.r
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060127/29f60233/rsudoku.pl
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: sudokugen.r
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060127/29f60233/sudokugen.pl

From ggrothendieck at gmail.com  Sat Jan 28 03:30:08 2006
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 27 Jan 2006 21:30:08 -0500
Subject: [R-sig-finance] [offtopic] solving sudoku in R?
In-Reply-To: <43DAB5C1.3070609@earthlink.net>
References: <4DD6F8B8782D584FABF50BF3A32B03D8045ABF00@MSGBOSCLF2WIN.DMN1.FMR.COM>
	<43DAB5C1.3070609@earthlink.net>
Message-ID: <971536df0601271830v3be859en712d011668d12e3c@mail.gmail.com>

For a 9x9 s board set up a constraint for
each of the 9 columns, each of the 9 rows and each
of the 3x3 boxes.

On 1/27/06, Krishna Kumar <kriskumar at earthlink.net> wrote:
> Achim thanks for pointing to David's package not being on R-help I
> missed the recent announcement.
> Gabor thanks for lpSolve. Any hints ?
>
> >>What __ON EARTH__  has this to do with R-SIG-Finance ??
> >>REALLY, this belongs to R-help and nowhere else!
>
> Martin, Ya it is a very tenuous link but my motivation was to generate ideas. And to get
> pointers to R-packages out there. I will try R-help next time.
>
> David, Thanks for sending me the updated version. I will have a go at
> it. From the preliminary comparison your original
>  version is faster my updated version see attached does better and at
> times is blazingly fast but lacks consistency..
> As you can see I use random permutations but it still is brute force and
> the search tree is different in any two attempts.
> I think it might be worth trying to compare the speed over a set of
> problems with different levels of complexity.
>
> And for what it is worth I have attached a simple sudoku generator.
>  > puzzle<-gensudoku(entropy=30)
> Generates a puzzle, entropy determines the difficulty.
>
> Best,
> Kris
>
>
>
>
>
>
>
> # Kris
> # Ver 1.2 does random permutations
> # oMat is the original puzzle,bMat keeps a backup
> mysudoku<-function(oMat=NULL,bMat=NULL)
> {
> if (length(oMat) < 1)
> { # use this sudoku if none is given
>     oMat<-matrix(c(0, 1, 0 ,0 ,0 ,0, 0, 7, 0,
>        3, 0, 2 ,1 ,0 ,9, 8, 0, 4,
>        0 ,0, 0, 5, 0, 8, 0, 0, 0,
>        6, 0, 0, 0, 9, 0, 0, 0, 2,
>        0, 4, 0, 0, 0, 0, 0, 3, 0,
>        8, 0, 0, 0, 3, 0, 0, 0, 7,
>        0, 0, 0, 9, 0, 5, 0, 0, 0,
>        2, 0, 4, 7, 0, 3, 9, 0, 1,
>        0, 9, 0, 0, 0, 0, 0, 4, 0),9,9)
>        print(oMat)
> }
> indx<-which(oMat==0,arr.ind=T) # where are the empty cells
> if(length(indx) > 0) {
> row.num<-indx[,1]
> col.num<-indx[,2]
> }
> else {
>    print("solution")
>    return(oMat) #voila!
> }
> x<-row.num[1]
> y<-col.num[1]
> search.num <-sample(1:9)
> for (i in search.num) # try 1 to 9 in random order
>    { sub.y<-1+3*floor((y-1)/3) # find the submatrix 3x3 block for the current solution
>        sub.x<-1+3*floor((x-1)/3)
>    if (!( any(oMat[x,]==i) | any(oMat[,y]==i) |
> any((oMat[seq(sub.x,sub.x+2),seq(sub.y,sub.y+2)]==i)) )) { # if valid number
>        work<-oMat
>        work[x,y]<-i
>        work<-Recall(oMat=work,bMat=oMat); # solve with this if we fail then we just return to the original matrix
>        if (all(work))  {
>            oMat<-work # voila!
>            return(oMat)
>        }
>   }
> }
>    return(bMat)
> }
>
>
>
> ## To invoke just source the file and do
> ## puzzle<-gensudoku(entropy=30)
> ## entropy determines the complexity/difficulty of the puzzle
>
> gensudoku<-function(entropy=10)
> {
>        latingrid<-function()
>        { #inner function
>                P<-sample(1:9)
>                        R<-sample(1:9)
>                        M<-matrix(0,9,9)
>                        for (coll in 1:9)
>                        {
>                                for(roww in 1:9)
>                                {
>                                        M[roww,coll] <- P[ ((roww+R[coll]) %% 9)+1]
>
>                                }
>
>                        }
>                return(M)
>        }
>
>        foo.goo<-list(flag=F)
>                while (!foo.goo$flag)
>                {
>                        oMat<-latingrid()
>                        foo.goo<-foogoo(oMat,entropy)
>                #       flag<-foo.goo$flag
>                }
>        cat("\n Good Luck with Puzzle #",trunc(runif(1)*1e6),"\n")
>        cat("-------------------------------------------------------------------\n")
>        print(foo.goo$puzzleMat)
>        cat("-------------------------------------------------------------------\n")
>        return(foo.goo$puzzleMat)
> }
>
>
>
> foogoo<-function(oMat,entropy)
> {
>
>        for (x in 1:9) # try 1 to 9
>        {
>                for (y in 1:9) # try 1 to 9
>                { sub.y<-1+3*floor((y-1)/3) # find the submatrix 3x3 block for the current matrix
>                sub.x<-1+3*floor((x-1)/3)
>                submat<-(oMat[seq(sub.x,sub.x+2),seq(sub.y,sub.y+2)])
>                l.submat<-length(which(submat==oMat[x,y]))
>                if ( any(oMat[x,-y]==oMat[x,y]) | any(oMat[-x,y]==oMat[x,y]) | l.submat>1 )  { # if not a valid grid
>                                        return(list(flag=FALSE))        }
>
>                }
>
>        }
>        solMat<-oMat
>        puzzleMat<-oMat
>        # so we have a consistent grid let us throw some points away
>        # this can help control the complexity
>        howmany.pt<- trunc(30+runif(1)*entropy);howmany.pt<-min(howmany.pt,50)
>        puzzleMat[-(trunc(runif(howmany.pt)*81))]<-0
>        #print(solMat)
>
>        return(list(flag=TRUE,puzzleMat=puzzleMat))
>
>
> }
>
>
>
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>
>


From finbref.2006 at gmail.com  Wed Feb  1 11:41:38 2006
From: finbref.2006 at gmail.com (Thomas Steiner)
Date: Wed, 1 Feb 2006 11:41:38 +0100
Subject: [R-sig-finance] fCalendar and Bizdays: 8 dec
Message-ID: <d0f55a670602010241q60c7ed31m@mail.gmail.com>

8.12. is not a businessday in Austria (Mari? Empf?ngnis). The Vienna
stock exchange is closed, but:

> isBizday(timeDate("2005-12-08"))
[1] TRUE

compare the eg to
http://www.indices.cc/cms/5/199/2163

Thomas


From finbref.2006 at gmail.com  Wed Feb  1 11:46:48 2006
From: finbref.2006 at gmail.com (Thomas Steiner)
Date: Wed, 1 Feb 2006 11:46:48 +0100
Subject: [R-sig-finance] fCalendar and Bizdays: 8 dec
In-Reply-To: <d0f55a670602010241q60c7ed31m@mail.gmail.com>
References: <d0f55a670602010241q60c7ed31m@mail.gmail.com>
Message-ID: <d0f55a670602010246jfd21e35w@mail.gmail.com>

> > isBizday(timeDate("2005-12-08"))
> [1] TRUE

of course it should be

isBizday(timeDate("2005-12-08", FinCenter = "Vienna"))

which returns TRUE as well.


From Michael_Parzen at bus.emory.edu  Wed Feb  1 12:25:12 2006
From: Michael_Parzen at bus.emory.edu (Michael Parzen)
Date: Wed, 01 Feb 2006 06:25:12 -0500
Subject: [R-sig-finance] R-sig-finance Digest, Vol 21, Issue 1
Message-ID: <fc.000f464a07e419b43b9aca009aca565f.7e419b6@bus.emory.edu>

I am not actively  reading email between jan 30 and feb 3


From fparlamis at mac.com  Wed Feb  1 23:23:49 2006
From: fparlamis at mac.com (Parlamis Franklin)
Date: Wed, 1 Feb 2006 12:23:49 -1000
Subject: [R-sig-finance] fCalendar and Bizdays: 8 dec
In-Reply-To: <d0f55a670602010246jfd21e35w@mail.gmail.com>
References: <d0f55a670602010241q60c7ed31m@mail.gmail.com>
	<d0f55a670602010246jfd21e35w@mail.gmail.com>
Message-ID: <1A267C02-CE53-43EB-9547-494E7D8EF689@mac.com>

 > isBizday
function (x, holidays = holiday.NYSE())
{
     char.x = substr(as.character(x), 1, 10)
     char.h = substr(as.character(holidays), 1, 10)
     Weekday = as.integer(isWeekday(x))
     nonHoliday = as.integer(!(char.x %in% char.h))
     bizdays = as.logical(Weekday * nonHoliday)
     bizdays
}

looks like default value of holidays is holiday.NYSE()

 > holiday.NYSE()
[1] "America/New_York"
[1] [2005-01-17] [2005-02-21] [2005-03-25] [2005-05-30] [2005-07-04]  
[2005-09-05] [2005-11-24]
[8] [2005-12-26]

which, by the way, is stuck in 2005

 > isBizday(timeDate("2007-12-25"))
[1] TRUE

so i guess you need to specify which holiday calendar you want to use  
as an argument to the isBizday function.  it is not clear to me where  
to find these holiday calendars.
the help pages for fCalendar mention a database holidays.db.  however,

 > data(package="fCalendar")

discloses only the timezones.db data set

as an aside, if you are in vienna, i think you want timeDate 
("2005-12-08", zone = "Vienna") rather than what you wrote.  this  
will ensure your timeDate object actually has the date you specify.   
for example,

 > timeDate("2006-01-01", FinCenter="Honolulu")
[1] "Honolulu"
[1] [2005-12-31 14:00:00]

because timeDate function thinks I am observing the date in GMT but  
want it adjusted to FinCenter "Honolulu"

On Feb 1, 2006, at 12:46 AM, Thomas Steiner wrote:

>>> isBizday(timeDate("2005-12-08"))
>> [1] TRUE
>
> of course it should be
>
> isBizday(timeDate("2005-12-08", FinCenter = "Vienna"))
>
> which returns TRUE as well.
>
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance


From William.Wojciechowski at oasiscapitalmarkets.com  Thu Feb  2 00:03:08 2006
From: William.Wojciechowski at oasiscapitalmarkets.com (Wojciechowski, William)
Date: Wed, 1 Feb 2006 17:03:08 -0600
Subject: [R-sig-finance] FX Options and Historical Financial Databases
Message-ID: <726E034CE6A58240B4AFF17E30A255591CBC97@hou0mbx01.kochind.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060201/200c391b/attachment.pl

From Michael_Parzen at bus.emory.edu  Thu Feb  2 12:18:32 2006
From: Michael_Parzen at bus.emory.edu (Michael Parzen)
Date: Thu, 02 Feb 2006 06:18:32 -0500
Subject: [R-sig-finance] R-sig-finance Digest, Vol 21, Issue 2
Message-ID: <fc.000f464a07e60f813b9aca00ad5e21ba.7e60f82@bus.emory.edu>

I am not actively  reading email between jan 30 and feb 3


From vivek.satsangi at gmail.com  Thu Feb  2 12:54:13 2006
From: vivek.satsangi at gmail.com (Vivek Satsangi)
Date: Thu, 2 Feb 2006 06:54:13 -0500
Subject: [R-sig-finance] FX Options and Historical Financial Databases
Message-ID: <bcb171920602020354w29d3f75fk8da5eb3f0460d50f@mail.gmail.com>

1. Code: Not myself, no, but I trust you know of the existence of
RMetrics which gives you various support functions that would be
helpful, I imagine.

2. I use factset (which is basically a front end for compustat for my
purposes) and in one case, yahoo. I also use another vendor that I
cannot disclose because my professor is still evaluating them, but
basically they do some transforms of the compustat data with their
propreitary methodology. In each case, the data is in a CSV or Tab
delimited text file, and none of the idiosyncracies of the data do I
deal with in R (I use perl to do the transformations I want, basically
because I am very new to R.)

QUESTION: 3. Which prompts a question: Does anyone know how to call a
COM object from within R? Is it even possible? I know one can call R
as a COM object from VB, C++, what have you, but what about the
reverse? The data vendor supplies us with a COM object that negotiates
their gateway, checks permissions, etc. and it would be very
convenient and perhaps less error prone to call it from R rather than
downloading a CSV, uploading into R, doing a merge, etc.

Vivek
>
> Message: 3
> Date: Wed, 1 Feb 2006 17:03:08 -0600
> From: "Wojciechowski, William"
>         <William.Wojciechowski at oasiscapitalmarkets.com>
> Subject: [R-sig-finance] FX Options and Historical Financial Databases
> To: r-sig-finance at stat.math.ethz.ch
> Message-ID:
>         <726E034CE6A58240B4AFF17E30A255591CBC97 at hou0mbx01.kochind.com>
> Content-Type: text/plain
>
> Hi,
>
> Has anybody written R-code that calculates
> FX option prices?
>
> Also, I'm curious about what historical databases
> that people are using with R.
>
> Thanks,
>
> Will
>


--
-- Vivek Satsangi
Student, Rochester, NY USA


From Robert at sanctumfi.com  Thu Feb  2 13:10:44 2006
From: Robert at sanctumfi.com (Robert Sams)
Date: Thu, 2 Feb 2006 12:10:44 -0000
Subject: [R-sig-finance] FX Options and Historical Financial Databases
Message-ID: <E585EABA11227445B918BFB74C1A4D363B9E83@sanctum01.sanctumfi.com>

Hi Vivek,

Regarding #3, see Thomas Baier's package rcom (CRAN) and the RDCOM package at http://www.omegahat.org/.

Robert


> -----Original Message-----
> From: Vivek Satsangi [mailto:vivek.satsangi at gmail.com]
> Sent: Thursday, February 02, 2006 11:54 AM
> To: r-sig-finance at stat.math.ethz.ch
> Subject: Re: [R-sig-finance] FX Options and Historical Financial
> Databases
> 
> 
> 1. Code: Not myself, no, but I trust you know of the existence of
> RMetrics which gives you various support functions that would be
> helpful, I imagine.
> 
> 2. I use factset (which is basically a front end for compustat for my
> purposes) and in one case, yahoo. I also use another vendor that I
> cannot disclose because my professor is still evaluating them, but
> basically they do some transforms of the compustat data with their
> propreitary methodology. In each case, the data is in a CSV or Tab
> delimited text file, and none of the idiosyncracies of the data do I
> deal with in R (I use perl to do the transformations I want, basically
> because I am very new to R.)
> 
> QUESTION: 3. Which prompts a question: Does anyone know how to call a
> COM object from within R? Is it even possible? I know one can call R
> as a COM object from VB, C++, what have you, but what about the
> reverse? The data vendor supplies us with a COM object that negotiates
> their gateway, checks permissions, etc. and it would be very
> convenient and perhaps less error prone to call it from R rather than
> downloading a CSV, uploading into R, doing a merge, etc.
> 
> Vivek
> >
> > Message: 3
> > Date: Wed, 1 Feb 2006 17:03:08 -0600
> > From: "Wojciechowski, William"
> >         <William.Wojciechowski at oasiscapitalmarkets.com>
> > Subject: [R-sig-finance] FX Options and Historical 
> Financial Databases
> > To: r-sig-finance at stat.math.ethz.ch
> > Message-ID:
> >         
> <726E034CE6A58240B4AFF17E30A255591CBC97 at hou0mbx01.kochind.com>
> > Content-Type: text/plain
> >
> > Hi,
> >
> > Has anybody written R-code that calculates
> > FX option prices?
> >
> > Also, I'm curious about what historical databases
> > that people are using with R.
> >
> > Thanks,
> >
> > Will
> >
> 
> 
> --
> -- Vivek Satsangi
> Student, Rochester, NY USA
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From wuertz at itp.phys.ethz.ch  Thu Feb  2 16:18:00 2006
From: wuertz at itp.phys.ethz.ch (Diethelm Wuertz)
Date: Thu, 02 Feb 2006 15:18:00 +0000
Subject: [R-sig-finance] fCalendar and Bizdays: 8 dec
In-Reply-To: <d0f55a670602010246jfd21e35w@mail.gmail.com>
References: <d0f55a670602010241q60c7ed31m@mail.gmail.com>
	<d0f55a670602010246jfd21e35w@mail.gmail.com>
Message-ID: <43E222A8.6030608@itp.phys.ethz.ch>

You have to proceed in the following way:


# Write your holiday Calendar, see holiday.NYSE(), eg for the ATX 
Trading Days ...
holiday.ATX =
function(y = 2005)
{
    # See: http://www.indices.cc/cms/5/199/2163
    if (y == 2005) {
        holidays = c(
            "2005-01-06", "2005-03-25", "2005-01-28",
            "2005-05-05", "2005-05-16", "2005-05-26",
            "2005-08-15", "2005-10-26", "2005-11-01",
            "2005-12-08", "2006-12-26", "2005-12-30")
    } else {
        # Do it for all the other years of interest ...
        # or generate them from some trading rules ...
        stop("Not implemented")
    }
   
    ans = timeDate(charvec = holidays, format = NULL, zone = "Vienna",
        FinCenter = "Vienna")

    ans at FinCenter = "Europe/Vienna"
   
    ans
}


# The data are recorded in zone="Vienna" and the Financial Center (where 
to use the data) is also Vienna:
test = timeDate(c("2005-12-08", "2005-12-25"), zone = "Vienna", 
FinCenter = "Vienna")

# Test ...
isBizday(test, holidays = holiday.ATX())


gives the right results.

DW


PS: There is a bug - currentYear - returns 2005
use to fix: currentYear = .currentYear()
This bug will be fixed with the next release/


Thomas Steiner wrote:

>>>isBizday(timeDate("2005-12-08"))
>>>      
>>>
>>[1] TRUE
>>    
>>
>
>of course it should be
>
>isBizday(timeDate("2005-12-08", FinCenter = "Vienna"))
>
>which returns TRUE as well.
>
>_______________________________________________
>R-sig-finance at stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>  
>


From wuertz at itp.phys.ethz.ch  Thu Feb  2 16:23:18 2006
From: wuertz at itp.phys.ethz.ch (Diethelm Wuertz)
Date: Thu, 02 Feb 2006 15:23:18 +0000
Subject: [R-sig-finance] fBonds svensson fitting
In-Reply-To: <d0f55a670601230802p491a1efcl@mail.gmail.com>
References: <d0f55a670601180556h3eba64eaw@mail.gmail.com>	<43D40203.30800@earthlink.net>
	<d0f55a670601230802p491a1efcl@mail.gmail.com>
Message-ID: <43E223E6.3000605@itp.phys.ethz.ch>

# Here comes a program to compute the Nelson-Siegel approach for the
# Yield Curve. It can be modified for forward rates (straightforward
# but a little more lengthy), and to other approaches including the Svenson
# Approach and/or several Spline Interpolations.

# The data set used here are an extension of the McCulloch U.S. Treasury
# term structure data (appearing in the Handbook of Monetary Economics)
# to February 1991 as used by S-Plus.

# The results of my program are compared with those obtained from
# SPlus/Finmetrics. They agree to more than 6 digets!



NelsonSiegel =
function(Yield, Maturity)
{    # A function written by Diethelm Wuertz
   
    # Description:
    #    Fit the Yield Curve by the Nelson-Siegel Method
    #
    # Details:
    #    This function finds a global solution. The start values for the
    #    betas are solved exactly as a function of tau using OLS.
    #
    # Copyright:
    #    Diethelm Wuertz, (c) 2004 fBonds
    #
    # Source:
    #    Partial copy from 'fBonds' from 'Rmetrics' (unpublished).
   
    # FUNCTION:
   
    # Find Optimal Start Solution by OLS of beta's vs. Yields:
    n = length(Maturity)
    gmin = 1.0e99
    for (i in 1:n) {    
        tau = Maturity[i]
        x = Maturity/tau        
        a = matrix(rep(NA, times = 9), nrow = 3)
            a[1,1] = 1
            a[1,2] = a[2,1] = mean((1-exp(-x))/x)
            a[1,3] = a[3,1] = mean((1-exp(-x))/x - exp(-x))
            a[2,2] = mean( ((1-exp(-x))/x)^2 )
            a[2,3] = a[3,2] = mean(((1-exp(-x))/x)*((1-exp(-x))/x-exp(-x)))
            a[3,3] = mean(((1-exp(-x))/x - exp(-x))^2)
        b = c(
            mean ( Yield ),
            mean ( Yield *  ((1-exp(-x))/x)),
            mean ( Yield * (((1-exp(-x))/x - exp(-x)))))            
        beta = solve(a, b)
        yfit = beta[1] + beta[2]*exp(-x) + beta[3]*x*exp(-x)
        fmin = sum( (Yield-yfit)^2 )
        if (fmin < gmin) {
            gmin = fmin
            gvec = c(beta, tau)
        }
    }
                   
    # Function to be optimized:       
    fx <- function(Maturity, x) {
        x[1] + x[2] * (1-exp(-Maturity/x[4]))/(Maturity/x[4]) +
        x[3] * 
((1-exp(-Maturity/x[4]))/(Maturity/x[4])-exp(-Maturity/x[4]))
    }
    func <- function(x) { sum( (Yield - fx(Maturity, x))^2 ) }

    # Optimize:
    fit = nlminb(objective = func, start = gvec)
    fit$start = gvec
    names(fit$par) = c("beta1", "beta2", "beta3", "tau")
       
    # Plot Curve:
    yfit = fx(Maturity, gvec)
    plot(Maturity, Yield, ylim = c(min(c(Yield, yfit)), max(c(Yield, 
yfit))),
        pch = 19, cex = 0.5, main = "Nelson-Siegel" )
    lines(Maturity, yfit, col = "steelblue")
           
    # Return Value:
    fit
}


Yield = c(
0.04984, 0.05283, 0.05549, 0.05777, 0.05961, 0.06102, 0.06216, 0.06314, 
0.06403,
0.06488, 0.06568, 0.06644, 0.06717, 0.06786, 0.06852, 0.06913, 0.06969, 
0.07020,
0.07134, 0.07205, 0.07339, 0.07500, 0.07710, 0.07860, 0.08011, 0.08114, 
0.08194,
0.08274, 0.08355, 0.08434, 0.08512, 0.08588, 0.08662, 0.08731, 0.08794, 
0.08851,
0.08900, 0.08939, 0.08967, 0.08980, 0.08976, 0.08954, 0.08910, 0.08843, 
0.08748,
0.08626, 0.08474, 0.08291)


Maturity = c(
  0.083,  0.167,  0.250,  0.333,  0.417,  0.500,  0.583,  0.667,  
0.750,  0.833,
  0.917,  1.000,  1.083,  1.167,  1.250,  1.333,  1.417,  1.500,  
1.750,  2.000,
  2.500,  3.000,  4.000,  5.000,  6.000,  7.000,  8.000,  9.000, 10.000, 
11.000,
 12.000, 13.000, 14.000, 15.000, 16.000, 17.000, 18.000, 19.000, 20.000, 
21.000,
 22.000, 23.000, 24.000, 25.000, 26.000, 27.000, 28.000, 29.000)



NelsonSiegel(Yield, Maturity)

# $par
#         beta1         beta2         beta3           tau
#  8.885514e-02 -3.671098e-02  1.398381e-11  1.025116e+00


# Compare with S-Plus - (only runs under SPlus):
# ans = term.struct(Yield, Maturity, na.rm = T, method = "ns", input = 
"spot")
# c(ans$coefficients, tau = ans$tau)
#          b0          b1            b2      tau
#  0.08885513 -0.03671097 5.254415e-008  1.02511


RMSE =
function(Yield, Maturity, coef)
{
    sum(Yield - coef[1] +
        coef[2]*(1-exp(-Maturity/coef[4]))/(Maturity/coef[4]) +
        coef[3] * ( (1-exp(-Maturity/coef[4]))/(Maturity/coef[4]) -
        exp(-Maturity/coef[4]))    )^2
}

coef = c(8.885514e-02, -3.671098e-02,  1.398381e-11,  1.025116e+00)
RMSE(Yield, Maturity, coef)
# 1.492437

coef = c(0.08885513, -0.03671097, 5.254415e-008,  1.02511)
RMSE(Yield, Maturity, coef)
#  1.492431


DW



Thomas Steiner wrote:

>Dear Kris,
>excellent, thank you.
>
>  
>
>>r = nlm(f=nelson,p=c(1,10,10,10),y=fwdcrv,steptol=1e-10,iterlim=500)
>>    
>>
>
>Where is the difference to nls? I tried something like
>
>nls(formula=yc$yield~nelsonsiegel(yc$time,init), data = yc, start=init)
>
>where yc is my dataframe with time and forward rates.
>Anyway, even good starting estimates seem always to produce a singular
>gradient matrix.
>
>  
>
>>Note svensson is double humped so you have an additional parameter (
>>x[5] )
>>    
>>
>
>I think Svensson is 6-dimensional.
>Some interpretations of the parameters of eg Nelson-Siegel can be used
>to get better initial estimates. But this is as well mentioned in the
>paper (pdf) you linked.
>
>  
>
>>Hope this helps,
>>    
>>
>
>Yes, a lot. BTW: How do you calculate forward rates out of SWAP (Libor) rates?
>
>Thomas
>
>_______________________________________________
>R-sig-finance at stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>  
>


From Michael_Parzen at bus.emory.edu  Fri Feb  3 12:18:11 2006
From: Michael_Parzen at bus.emory.edu (Michael Parzen)
Date: Fri, 03 Feb 2006 06:18:11 -0500
Subject: [R-sig-finance] R-sig-finance Digest, Vol 21, Issue 3
Message-ID: <fc.000f464a07e7e9313b9aca0013784bb6.7e7e932@bus.emory.edu>

I am not actively  reading email between jan 30 and feb 3


From spencer.graves at pdf.com  Fri Feb  3 16:53:13 2006
From: spencer.graves at pdf.com (Spencer Graves)
Date: Fri, 03 Feb 2006 07:53:13 -0800
Subject: [R-sig-finance] R-sig-finance Digest, Vol 21, Issue 3
In-Reply-To: <fc.000f464a07e7e9313b9aca0013784bb6.7e7e932@bus.emory.edu>
References: <fc.000f464a07e7e9313b9aca0013784bb6.7e7e932@bus.emory.edu>
Message-ID: <43E37C69.5080204@pdf.com>

Dear Prof. Parzen:

	  Is there something you are trying to communicate to "r-help" beyond 
your repeated assertions that you are "not actively reading email 
between jan 30 and feb 3"?

	  spencer graves

Michael Parzen wrote:
> I am not actively  reading email between jan 30 and feb 3
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance


From wojciech.slusarski at gmail.com  Sun Feb  5 01:23:45 2006
From: wojciech.slusarski at gmail.com (Wojciech Slusarski)
Date: Sun, 5 Feb 2006 01:23:45 +0100
Subject: [R-sig-finance] Problems with monthly sequences
Message-ID: <5e64e5be0602041623o6bab75b0g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060205/a51fa562/attachment.pl

From ggrothendieck at gmail.com  Sun Feb  5 01:55:32 2006
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sat, 4 Feb 2006 19:55:32 -0500
Subject: [R-sig-finance] Problems with monthly sequences
In-Reply-To: <5e64e5be0602041623o6bab75b0g@mail.gmail.com>
References: <5e64e5be0602041623o6bab75b0g@mail.gmail.com>
Message-ID: <971536df0602041655q173298c0h8f53cce722036030@mail.gmail.com>

Try this:

library(fCalendar)
dates <- timeSequence(from = "2005-12-1", to = "2006-12-1", format =
"%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw")
dates <- timeLastDayInMonth(dates)


On 2/4/06, Wojciech Slusarski <wojciech.slusarski at gmail.com> wrote:
> Dear R users,
>
> Could anyone help me with creating a monthly series of dates?
> When I try to do:
>
> dates = timeSequence(from = "2005-12-31", to = "2006-12-31", format =
> "%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw")
>
> I get:
>
> > dates
> [1] "Europe/Warsaw"
>  [1] [2005-12-31] [2006-01-31] [2006-03-03] [2006-03-31] [2006-05-01]
>  [6] [2006-05-31] [2006-07-01] [2006-07-31] [2006-08-31] [2006-10-01]
> [11] [2006-10-31] [2006-12-01] [2006-12-31]
>
> Unfourtunately, I would like to heave end of month at each point.
> I thought, that maybe using this function would also help when trying to add
> a month to a date. I would like to have
>
> "2006-01-31" + 1M = "2006-02-28"
>
> in MS EXCEL I would use EDATE("2006-01-31";1), and that would work. I
> couldn't find any similar function in R for that. Am I missing some
> function?
>
> Best regards,
> Wojtek
>
>        [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From wuertz at itp.phys.ethz.ch  Sun Feb  5 02:45:31 2006
From: wuertz at itp.phys.ethz.ch (Diethelm Wuertz)
Date: Sun, 05 Feb 2006 01:45:31 +0000
Subject: [R-sig-finance] Problems with monthly sequences
In-Reply-To: <971536df0602041655q173298c0h8f53cce722036030@mail.gmail.com>
References: <5e64e5be0602041623o6bab75b0g@mail.gmail.com>
	<971536df0602041655q173298c0h8f53cce722036030@mail.gmail.com>
Message-ID: <43E558BB.8080105@itp.phys.ethz.ch>

Many thanks to Gabor for this comment.

For calendar tasks I have written a report (44 pages)  which may be 
helpful for
many calendar manipulations using Rmetrics. Here is the link:

http://www.itp.phys.ethz.ch/econophysics/R/pdf/calendar.pdf

You can also access this "timeDate and timeSeries" white pages from the
Rmetrics home page: www.rmetrics.org

regards

Diethelm

Gabor Grothendieck wrote:

>Try this:
>
>library(fCalendar)
>dates <- timeSequence(from = "2005-12-1", to = "2006-12-1", format =
>"%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw")
>dates <- timeLastDayInMonth(dates)
>
>
>On 2/4/06, Wojciech Slusarski <wojciech.slusarski at gmail.com> wrote:
>  
>
>>Dear R users,
>>
>>Could anyone help me with creating a monthly series of dates?
>>When I try to do:
>>
>>dates = timeSequence(from = "2005-12-31", to = "2006-12-31", format =
>>"%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw")
>>
>>I get:
>>
>>    
>>
>>>dates
>>>      
>>>
>>[1] "Europe/Warsaw"
>> [1] [2005-12-31] [2006-01-31] [2006-03-03] [2006-03-31] [2006-05-01]
>> [6] [2006-05-31] [2006-07-01] [2006-07-31] [2006-08-31] [2006-10-01]
>>[11] [2006-10-31] [2006-12-01] [2006-12-31]
>>
>>Unfourtunately, I would like to heave end of month at each point.
>>I thought, that maybe using this function would also help when trying to add
>>a month to a date. I would like to have
>>
>>"2006-01-31" + 1M = "2006-02-28"
>>
>>in MS EXCEL I would use EDATE("2006-01-31";1), and that would work. I
>>couldn't find any similar function in R for that. Am I missing some
>>function?
>>
>>Best regards,
>>Wojtek
>>
>>       [[alternative HTML version deleted]]
>>
>>_______________________________________________
>>R-sig-finance at stat.math.ethz.ch mailing list
>>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>
>>    
>>
>
>_______________________________________________
>R-sig-finance at stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>  
>


From wuertz at itp.phys.ethz.ch  Sun Feb  5 10:30:24 2006
From: wuertz at itp.phys.ethz.ch (Diethelm Wuertz)
Date: Sun, 05 Feb 2006 09:30:24 +0000
Subject: [R-sig-finance] Problems with monthly sequences
In-Reply-To: <971536df0602041655q173298c0h8f53cce722036030@mail.gmail.com>
References: <5e64e5be0602041623o6bab75b0g@mail.gmail.com>
	<971536df0602041655q173298c0h8f53cce722036030@mail.gmail.com>
Message-ID: <43E5C5B0.60108@itp.phys.ethz.ch>

Gabor Grothendieck wrote:

>Try this:
>
>library(fCalendar)
>dates <- timeSequence(from = "2005-12-1", to = "2006-12-1", format =
>"%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw")
>dates <- timeLastDayInMonth(dates)
>  
>
Alternatively you can use

 > timeSequence(from = "2006-01-01", to = "2007-01-01", format =
+ "%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw") - 3600*24
[1] "Europe/Warsaw"
 [1] [2005-12-31] [2006-01-31] [2006-02-28] [2006-03-31] [2006-04-30]
 [6] [2006-05-31] [2006-06-30] [2006-07-31] [2006-08-31] [2006-09-30]
[11] [2006-10-31] [2006-11-30] [2006-12-31]

Please use proper ISO-8601 notation: 2006-01-05 and not 2006-1-5 !

DW

>
>On 2/4/06, Wojciech Slusarski <wojciech.slusarski at gmail.com> wrote:
>  
>
>>Dear R users,
>>
>>Could anyone help me with creating a monthly series of dates?
>>When I try to do:
>>
>>dates = timeSequence(from = "2005-12-31", to = "2006-12-31", format =
>>"%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw")
>>
>>I get:
>>
>>    
>>
>>>dates
>>>      
>>>
>>[1] "Europe/Warsaw"
>> [1] [2005-12-31] [2006-01-31] [2006-03-03] [2006-03-31] [2006-05-01]
>> [6] [2006-05-31] [2006-07-01] [2006-07-31] [2006-08-31] [2006-10-01]
>>[11] [2006-10-31] [2006-12-01] [2006-12-31]
>>
>>Unfourtunately, I would like to heave end of month at each point.
>>I thought, that maybe using this function would also help when trying to add
>>a month to a date. I would like to have
>>
>>"2006-01-31" + 1M = "2006-02-28"
>>
>>in MS EXCEL I would use EDATE("2006-01-31";1), and that would work. I
>>couldn't find any similar function in R for that. Am I missing some
>>function?
>>
>>Best regards,
>>Wojtek
>>
>>       [[alternative HTML version deleted]]
>>
>>_______________________________________________
>>R-sig-finance at stat.math.ethz.ch mailing list
>>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>
>>    
>>
>
>_______________________________________________
>R-sig-finance at stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>  
>


From vivek.satsangi at gmail.com  Sun Feb  5 13:18:44 2006
From: vivek.satsangi at gmail.com (Vivek Satsangi)
Date: Sun, 5 Feb 2006 07:18:44 -0500
Subject: [R-sig-finance] Problems with monthly sequences
Message-ID: <bcb171920602050418x5f77eda1p86879b91739cbc@mail.gmail.com>

1. Why does subtracting 3600*24 (seconds, I presume) in DW's solution work?

2. Does anyone who uses gmail and gets this  DL's emails in digest
form have a good method for responding to just one message (I use
reply/edit subject/delete everything from the quoted material except
for the message I want to respond to -- That's obviously not much fun
when trying to respond to an r-help message for which the digest can
be long, and where one can end up fat-fingering the cut&paste of the
message (thus breaking the thread. )


> Gabor Grothendieck wrote:
>
> >Try this:
> >
> >library(fCalendar)
> >dates <- timeSequence(from = "2005-12-1", to = "2006-12-1", format =
> >"%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw")
> >dates <- timeLastDayInMonth(dates)
> >
> >
> Alternatively you can use
>
>  > timeSequence(from = "2006-01-01", to = "2007-01-01", format =
> + "%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw") - 3600*24
> [1] "Europe/Warsaw"
>  [1] [2005-12-31] [2006-01-31] [2006-02-28] [2006-03-31] [2006-04-30]
>  [6] [2006-05-31] [2006-06-30] [2006-07-31] [2006-08-31] [2006-09-30]
> [11] [2006-10-31] [2006-11-30] [2006-12-31]
>
> Please use proper ISO-8601 notation: 2006-01-05 and not 2006-1-5 !
>
> DW
>
[Other quoted messages deleted]
--
-- Vivek Satsangi
Student, Rochester, NY USA


From wojciech.slusarski at gmail.com  Sun Feb  5 14:17:42 2006
From: wojciech.slusarski at gmail.com (Wojciech Slusarski)
Date: Sun, 5 Feb 2006 14:17:42 +0100
Subject: [R-sig-finance] Problems with monthly sequences
In-Reply-To: <43E5C5B0.60108@itp.phys.ethz.ch>
References: <5e64e5be0602041623o6bab75b0g@mail.gmail.com>
	<971536df0602041655q173298c0h8f53cce722036030@mail.gmail.com>
	<43E5C5B0.60108@itp.phys.ethz.ch>
Message-ID: <5e64e5be0602050517m1574c7f7j@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060205/c3d6836e/attachment.pl

From wojciech.slusarski at gmail.com  Sun Feb  5 17:20:21 2006
From: wojciech.slusarski at gmail.com (Wojciech Slusarski)
Date: Sun, 5 Feb 2006 17:20:21 +0100
Subject: [R-sig-finance] Problems with monthly sequences
In-Reply-To: <5e64e5be0602050517m1574c7f7j@mail.gmail.com>
References: <5e64e5be0602041623o6bab75b0g@mail.gmail.com>
	<971536df0602041655q173298c0h8f53cce722036030@mail.gmail.com>
	<43E5C5B0.60108@itp.phys.ethz.ch>
	<5e64e5be0602050517m1574c7f7j@mail.gmail.com>
Message-ID: <5e64e5be0602050820o3782bef7w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060205/8312d200/attachment.pl

From ggrothendieck at gmail.com  Sun Feb  5 19:14:42 2006
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sun, 5 Feb 2006 13:14:42 -0500
Subject: [R-sig-finance] Problems with monthly sequences
In-Reply-To: <5e64e5be0602050820o3782bef7w@mail.gmail.com>
References: <5e64e5be0602041623o6bab75b0g@mail.gmail.com>
	<971536df0602041655q173298c0h8f53cce722036030@mail.gmail.com>
	<43E5C5B0.60108@itp.phys.ethz.ch>
	<5e64e5be0602050517m1574c7f7j@mail.gmail.com>
	<5e64e5be0602050820o3782bef7w@mail.gmail.com>
Message-ID: <971536df0602051014hdb2d9b9n89332dfe627d9b35@mail.gmail.com>

>From your series of posts I assume you really only need the last day
of the month that is m months from now but the following could easily
be enhanced to work in general.  It uses the yearmon class from zoo.
It works with positive and negative m:

library(zoo)
m <- -10
date.t <- date.s
date.t at Data <- as.POSIXlt(as.Date(as.yearmon(as.POSIXct(date.s))+m/12, frac=1))


On 2/5/06, Wojciech Slusarski <wojciech.slusarski at gmail.com> wrote:
> I thought a bit about the function below, and see a problem, when n<0 (I
> would like to decrease the date.s by one month). I still have no Idea how to
> implement it.
>
> Best regards,
> Wojtek
>
>
> 2006/2/5, Wojciech Slusarski <wojciech.slusarski at gmail.com>:
> >
> > Well,
> >
> > Thanks for the help, but I thought about something more general, that
> > could allow me adding n months to a date. I am sorry, that my question
> > wasn't so clear. If someone needed, here's the code:
> >
> >
> > EMONTH =
> > function(date.s, n)
> > {
> >   #function adds 'n' months to 'date.s'
> >   dates = timeSequence(from = format(date.s at Data, "%Y-%m-%d"), length.out= n+1, by = "month")
> >   if(atoms(date.s)[1,"d"]>28)
> >   {
> >       if(atoms(dates)[n+1,"d"]<4)
> >    {
> >       emonth = dates[n+1]-atoms(dates)[n+1,"d"]*24*3600
> >    } else {
> >      emonth = dates[n+1]
> >    }
> >   } else {
> >     emonth = dates[n+1]
> >   }
> >   emonth
> > }
> >
> >
> >
> > # test
> >
> > date.s = timeDate("2005-12-30")
> >
> > > EMONTH(date.s, 2)@Data
> > [1] "2006-02-28"
> > Best regards,
> > Wojtek
> >
> >
> > 2006/2/5, Diethelm Wuertz <wuertz at itp.phys.ethz.ch>:
> > >
> > > Gabor Grothendieck wrote:
> > >
> > > >Try this:
> > > >
> > > >library(fCalendar)
> > > >dates <- timeSequence(from = "2005-12-1", to = "2006-12-1", format =
> > > >"%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw")
> > > >dates <- timeLastDayInMonth(dates)
> > > >
> > > >
> > > Alternatively you can use
> > >
> > > > timeSequence(from = "2006-01-01", to = "2007-01-01", format =
> > > + "%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw") - 3600*24
> > > [1] "Europe/Warsaw"
> > > [1] [2005-12-31] [2006-01-31] [2006-02-28] [2006-03-31] [2006-04-30]
> > > [6] [2006-05-31] [2006-06-30] [2006-07-31] [2006-08-31] [2006-09-30]
> > > [11] [2006-10-31] [2006-11-30] [2006-12-31]
> > >
> > > Please use proper ISO-8601 notation: 2006-01-05 and not 2006-1-5 !
> > >
> > > DW
> > >
> > > >
> > > >On 2/4/06, Wojciech Slusarski < wojciech.slusarski at gmail.com> wrote:
> > > >
> > > >
> > > >>Dear R users,
> > > >>
> > > >>Could anyone help me with creating a monthly series of dates?
> > > >>When I try to do:
> > > >>
> > > >>dates = timeSequence(from = "2005-12-31", to = "2006-12-31", format =
> > > >>"%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw")
> > > >>
> > > >>I get:
> > > >>
> > > >>
> > > >>
> > > >>>dates
> > > >>>
> > > >>>
> > > >>[1] "Europe/Warsaw"
> > > >> [1] [2005-12-31] [2006-01-31] [2006-03-03] [2006-03-31] [2006-05-01]
> > > >> [6] [2006-05-31] [2006-07-01] [2006-07-31] [2006-08-31] [2006-10-01]
> > > >>[11] [2006-10-31] [2006-12-01] [2006-12-31]
> > > >>
> > > >>Unfourtunately, I would like to heave end of month at each point.
> > > >>I thought, that maybe using this function would also help when trying
> > > to add
> > > >>a month to a date. I would like to have
> > > >>
> > > >>"2006-01-31" + 1M = "2006-02-28"
> > > >>
> > > >>in MS EXCEL I would use EDATE("2006-01-31";1), and that would work. I
> > > >>couldn't find any similar function in R for that. Am I missing some
> > > >>function?
> > > >>
> > > >>Best regards,
> > > >>Wojtek
> > > >>
> > > >>       [[alternative HTML version deleted]]
> > > >>
> > > >>_______________________________________________
> > > >> R-sig-finance at stat.math.ethz.ch mailing list
> > > >>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > > >>
> > > >>
> > > >>
> > > >
> > > >_______________________________________________
> > > >R-sig-finance at stat.math.ethz.ch mailing list
> > > > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > > >
> > > >
> > > >
> > >
> > > _______________________________________________
> > > R-sig-finance at stat.math.ethz.ch mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > >
> >
> >
>
>        [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From wuertz at itp.phys.ethz.ch  Sun Feb  5 20:52:25 2006
From: wuertz at itp.phys.ethz.ch (Diethelm Wuertz)
Date: Sun, 05 Feb 2006 19:52:25 +0000
Subject: [R-sig-finance] Problems with monthly sequences
In-Reply-To: <5e64e5be0602050820o3782bef7w@mail.gmail.com>
References: <5e64e5be0602041623o6bab75b0g@mail.gmail.com>	<971536df0602041655q173298c0h8f53cce722036030@mail.gmail.com>	<43E5C5B0.60108@itp.phys.ethz.ch>	<5e64e5be0602050517m1574c7f7j@mail.gmail.com>
	<5e64e5be0602050820o3782bef7w@mail.gmail.com>
Message-ID: <43E65779.8050507@itp.phys.ethz.ch>


Here comes a function which computes  time and date for the last Day 
n-month ahead.
It is Rmetrics conform and preserves time zone, daylight saving and 
Financial Centers.

Is that what you wanted?

DW



timeLastDayNMonthAhead =
function(charvec, month, format = "%Y-%m-%d", FinCenter = "GMT")
{
    if (Sys.getenv("TZ")[[1]] != "GMT") warning("Set timezone to GMT!")
    if (FinCenter == "") FinCenter = "GMT"
    if (month < 0) stop("month must be positive")
    date = timeLastDayInMonth(charvec, format = format, FinCenter = 
FinCenter)
    for (i in 1:month) date = timeLastDayInMonth(date, format = format,
        FinCenter = FinCenter) + 3600*24
       
    # Return Value:
    timeLastDayInMonth(date, format = format, FinCenter = FinCenter)
}

# Example:
 > timeLastDayNMonthAhead(c("2005-12-25", "2006-02-28"), month = 2)
[1] "GMT"
[1] [2006-02-28] [2006-04-30]





Wojciech Slusarski wrote:

>I thought a bit about the function below, and see a problem, when n<0 (I
>would like to decrease the date.s by one month). I still have no Idea how to
>implement it.
>
>Best regards,
>Wojtek
>
>
>2006/2/5, Wojciech Slusarski <wojciech.slusarski at gmail.com>:
>  
>
>>Well,
>>
>>Thanks for the help, but I thought about something more general, that
>>could allow me adding n months to a date. I am sorry, that my question
>>wasn't so clear. If someone needed, here's the code:
>>
>>
>>EMONTH =
>>function(date.s, n)
>>{
>>  #function adds 'n' months to 'date.s'
>>  dates = timeSequence(from = format(date.s at Data, "%Y-%m-%d"), length.out= n+1, by = "month")
>>  if(atoms(date.s)[1,"d"]>28)
>>  {
>>      if(atoms(dates)[n+1,"d"]<4)
>>   {
>>      emonth = dates[n+1]-atoms(dates)[n+1,"d"]*24*3600
>>   } else {
>>     emonth = dates[n+1]
>>   }
>>  } else {
>>    emonth = dates[n+1]
>>  }
>>  emonth
>>}
>>
>>
>>
>># test
>>
>>date.s = timeDate("2005-12-30")
>>
>>    
>>
>>>EMONTH(date.s, 2)@Data
>>>      
>>>
>>[1] "2006-02-28"
>>Best regards,
>>Wojtek
>>
>>
>>2006/2/5, Diethelm Wuertz <wuertz at itp.phys.ethz.ch>:
>>    
>>
>>>Gabor Grothendieck wrote:
>>>
>>>      
>>>
>>>>Try this:
>>>>
>>>>library(fCalendar)
>>>>dates <- timeSequence(from = "2005-12-1", to = "2006-12-1", format =
>>>>"%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw")
>>>>dates <- timeLastDayInMonth(dates)
>>>>
>>>>
>>>>        
>>>>
>>>Alternatively you can use
>>>
>>>      
>>>
>>>>timeSequence(from = "2006-01-01", to = "2007-01-01", format =
>>>>        
>>>>
>>>+ "%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw") - 3600*24
>>>[1] "Europe/Warsaw"
>>>[1] [2005-12-31] [2006-01-31] [2006-02-28] [2006-03-31] [2006-04-30]
>>>[6] [2006-05-31] [2006-06-30] [2006-07-31] [2006-08-31] [2006-09-30]
>>>[11] [2006-10-31] [2006-11-30] [2006-12-31]
>>>
>>>Please use proper ISO-8601 notation: 2006-01-05 and not 2006-1-5 !
>>>
>>>DW
>>>
>>>      
>>>
>>>>On 2/4/06, Wojciech Slusarski < wojciech.slusarski at gmail.com> wrote:
>>>>
>>>>
>>>>        
>>>>
>>>>>Dear R users,
>>>>>
>>>>>Could anyone help me with creating a monthly series of dates?
>>>>>When I try to do:
>>>>>
>>>>>dates = timeSequence(from = "2005-12-31", to = "2006-12-31", format =
>>>>>"%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw")
>>>>>
>>>>>I get:
>>>>>
>>>>>
>>>>>
>>>>>          
>>>>>
>>>>>>dates
>>>>>>
>>>>>>
>>>>>>            
>>>>>>
>>>>>[1] "Europe/Warsaw"
>>>>>[1] [2005-12-31] [2006-01-31] [2006-03-03] [2006-03-31] [2006-05-01]
>>>>>[6] [2006-05-31] [2006-07-01] [2006-07-31] [2006-08-31] [2006-10-01]
>>>>>[11] [2006-10-31] [2006-12-01] [2006-12-31]
>>>>>
>>>>>Unfourtunately, I would like to heave end of month at each point.
>>>>>I thought, that maybe using this function would also help when trying
>>>>>          
>>>>>
>>>to add
>>>      
>>>
>>>>>a month to a date. I would like to have
>>>>>
>>>>>"2006-01-31" + 1M = "2006-02-28"
>>>>>
>>>>>in MS EXCEL I would use EDATE("2006-01-31";1), and that would work. I
>>>>>couldn't find any similar function in R for that. Am I missing some
>>>>>function?
>>>>>
>>>>>Best regards,
>>>>>Wojtek
>>>>>
>>>>>      [[alternative HTML version deleted]]
>>>>>
>>>>>_______________________________________________
>>>>>R-sig-finance at stat.math.ethz.ch mailing list
>>>>>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>>
>>>>>
>>>>>
>>>>>          
>>>>>
>>>>_______________________________________________
>>>>R-sig-finance at stat.math.ethz.ch mailing list
>>>>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>
>>>>
>>>>
>>>>        
>>>>
>>>_______________________________________________
>>>R-sig-finance at stat.math.ethz.ch mailing list
>>>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>
>>>      
>>>
>>    
>>
>
>	[[alternative HTML version deleted]]
>
>_______________________________________________
>R-sig-finance at stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>  
>


From wojciech.slusarski at gmail.com  Sun Feb  5 21:18:08 2006
From: wojciech.slusarski at gmail.com (Wojciech Slusarski)
Date: Sun, 5 Feb 2006 21:18:08 +0100
Subject: [R-sig-finance] Problems with monthly sequences
In-Reply-To: <43E65779.8050507@itp.phys.ethz.ch>
References: <5e64e5be0602041623o6bab75b0g@mail.gmail.com>
	<971536df0602041655q173298c0h8f53cce722036030@mail.gmail.com>
	<43E5C5B0.60108@itp.phys.ethz.ch>
	<5e64e5be0602050517m1574c7f7j@mail.gmail.com>
	<5e64e5be0602050820o3782bef7w@mail.gmail.com>
	<43E65779.8050507@itp.phys.ethz.ch>
Message-ID: <5e64e5be0602051218k4eda92d9p@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060205/6bf9d978/attachment.pl

From fparlamis at mac.com  Sun Feb  5 22:49:42 2006
From: fparlamis at mac.com (Franklin Parlamis)
Date: Sun, 05 Feb 2006 13:49:42 -0800
Subject: [R-sig-finance] Problems with monthly sequences
In-Reply-To: <5e64e5be0602051218k4eda92d9p@mail.gmail.com>
References: <5e64e5be0602041623o6bab75b0g@mail.gmail.com>
	<971536df0602041655q173298c0h8f53cce722036030@mail.gmail.com>
	<43E5C5B0.60108@itp.phys.ethz.ch>
	<5e64e5be0602050517m1574c7f7j@mail.gmail.com>
	<5e64e5be0602050820o3782bef7w@mail.gmail.com>
	<43E65779.8050507@itp.phys.ethz.ch>
	<5e64e5be0602051218k4eda92d9p@mail.gmail.com>
Message-ID: <6273624.1139176182843.JavaMail.fparlamis@mac.com>

you want end.end convention (like for the interbank deposits underlying BBA Libor quotations).  here's some code I wrote recently.  caveats:

(i)  i just learned to code, so this probably doesn't exhibit professional programming standards
(ii) you need the Methods package (which is default loaded when R opens)
(iii) the functions are not yet complete (in that i don't deal with improper arguments as fully as i intend to)
(iv) you will need to separately check whether the output dates are business days, and then apply the mod.following convention or whichever other convention you want; all these functions do is move you forward an increment subject to the end.end standard.
(v) the date arguments are not character vectors as you envision; rather they are objects that can be compelled to POSIXlt dates via as.POSIXlt, or timeDate objects (you could easily add a method to convert the character vectors to POSIXlt objects or timeDate objects)
(vi) i'm pretty sure these functions won't work for negative increments as you request, but I thank you for pointing out that functionality, as it shouldn't be hard for me to alter the functions to get there.

----

########################
## last.of      
########################

last.of <- function(date) {
  date<-as.POSIXlt(date)
  switch(date[["mon"]]+1,31,28+leap.year(date[["year"]]+1900),31,30,31,30,31,31,30,31,30,31)}

setMethod("last.of", signature(date="timeDate"), function(date)
  last.of(date at Data))

is.last.of <- function(date) {
  date<-as.POSIXlt(date)
  date[["mday"]]==last.of(date)}

setMethod("is.last.of", signature(date="timeDate"), function(date)
  is.last.of(date at Data))

########################
## end.end      
########################

end.end <- function(date, num, inc) {
  date<-as.POSIXlt(date)
  trial<-as.POSIXlt(seq(from=date,len=2,by=paste(num,inc))[2])
  if(inc=="month") {
    while((trial[["mon"]]-date[["mon"]])%%12>num)
      trial<-as.POSIXlt(seq(from=trial,len=2,by="-1 day")[2])
    if(is.last.of(date)) while(is.last.of(trial)==FALSE)
      trial<-as.POSIXlt(seq(from=trial,len=2,by="1 day")[2])}
  if(inc=="year") {
    while(trial[["mon"]]!=date[["mon"]])
      trial<-as.POSIXlt(seq(from=trial,len=2,by="-1 day")[2])
    if(is.last.of(date)) while(is.last.of(trial)==FALSE)
      trial<-as.POSIXlt(seq(from=trial,len=2,by="1 day")[2])}
  trial}

setMethod("end.end", signature(date="timeDate"), function(date, num, inc)
  end.end(date at Data, num, inc))

-----

franklin parlamis
 
On Sunday, February 05, 2006, at 12:18PM, Wojciech Slusarski <wojciech.slusarski at gmail.com> wrote:

>Well, thanks for the help, but not exactly. The function I would like to
>have would give results for starting dates
>
>charvec = c("2005-12-25", "2006-01-30")
>
>>function_name(charvec,+1M)
>
>[1] [2006-01-25] [2006-02-28]
>
>So it's adding one month to a date, but when it exceeds the last day of the
>next month, it gives the las day.
>
>The other way could be also useful:
>
>charvec = c("2005-12-25", "2006-02-28")
>
>>function_name(charvec,-1M)
>
>[1] [2005-11-25] [2006-01-31]
>#first date was decreased by one month, the second was decreased to the last
>day of january (not 28th January).
>
>Having such functions, one could set up proper dates for tenors in discount
>curve. In the function you published few days ago, you setup fixed year
>fractions for each tenor, which don't take into account holidays etc.
>
>Best regards,
>Wojtek
>
>2006/2/5, Diethelm Wuertz <wuertz at itp.phys.ethz.ch>:
>>
>>
>> Here comes a function which computes  time and date for the last Day
>> n-month ahead.
>> It is Rmetrics conform and preserves time zone, daylight saving and
>> Financial Centers.
>>
>> Is that what you wanted?
>>
>> DW
>>
>>
>>
>> timeLastDayNMonthAhead =
>> function(charvec, month, format = "%Y-%m-%d", FinCenter = "GMT")
>> {
>>    if (Sys.getenv("TZ")[[1]] != "GMT") warning("Set timezone to GMT!")
>>    if (FinCenter == "") FinCenter = "GMT"
>>    if (month < 0) stop("month must be positive")
>>    date = timeLastDayInMonth(charvec, format = format, FinCenter =
>> FinCenter)
>>    for (i in 1:month) date = timeLastDayInMonth(date, format = format,
>>        FinCenter = FinCenter) + 3600*24
>>
>>    # Return Value:
>>    timeLastDayInMonth(date, format = format, FinCenter = FinCenter)
>> }
>>
>> # Example:
>> > timeLastDayNMonthAhead(c("2005-12-25", "2006-02-28"), month = 2)
>> [1] "GMT"
>> [1] [2006-02-28] [2006-04-30]
>>
>>
>>
>>
>>
>> Wojciech Slusarski wrote:
>>
>> >I thought a bit about the function below, and see a problem, when n<0 (I
>> >would like to decrease the date.s by one month). I still have no Idea how
>> to
>> >implement it.
>> >
>> >Best regards,
>> >Wojtek
>> >
>> >
>> >2006/2/5, Wojciech Slusarski <wojciech.slusarski at gmail.com>:
>> >
>> >
>> >>Well,
>> >>
>> >>Thanks for the help, but I thought about something more general, that
>> >>could allow me adding n months to a date. I am sorry, that my question
>> >>wasn't so clear. If someone needed, here's the code:
>> >>
>> >>
>> >>EMONTH =
>> >>function(date.s, n)
>> >>{
>> >>  #function adds 'n' months to 'date.s'
>> >>  dates = timeSequence(from = format(date.s at Data, "%Y-%m-%d"),
>> length.out= n+1, by = "month")
>> >>  if(atoms(date.s)[1,"d"]>28)
>> >>  {
>> >>      if(atoms(dates)[n+1,"d"]<4)
>> >>   {
>> >>      emonth = dates[n+1]-atoms(dates)[n+1,"d"]*24*3600
>> >>   } else {
>> >>     emonth = dates[n+1]
>> >>   }
>> >>  } else {
>> >>    emonth = dates[n+1]
>> >>  }
>> >>  emonth
>> >>}
>> >>
>> >>
>> >>
>> >># test
>> >>
>> >>date.s = timeDate("2005-12-30")
>> >>
>> >>
>> >>
>> >>>EMONTH(date.s, 2)@Data
>> >>>
>> >>>
>> >>[1] "2006-02-28"
>> >>Best regards,
>> >>Wojtek
>> >>
>> >>
>> >>2006/2/5, Diethelm Wuertz <wuertz at itp.phys.ethz.ch>:
>> >>
>> >>
>> >>>Gabor Grothendieck wrote:
>> >>>
>> >>>
>> >>>
>> >>>>Try this:
>> >>>>
>> >>>>library(fCalendar)
>> >>>>dates <- timeSequence(from = "2005-12-1", to = "2006-12-1", format =
>> >>>>"%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw")
>> >>>>dates <- timeLastDayInMonth(dates)
>> >>>>
>> >>>>
>> >>>>
>> >>>>
>> >>>Alternatively you can use
>> >>>
>> >>>
>> >>>
>> >>>>timeSequence(from = "2006-01-01", to = "2007-01-01", format =
>> >>>>
>> >>>>
>> >>>+ "%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw") - 3600*24
>> >>>[1] "Europe/Warsaw"
>> >>>[1] [2005-12-31] [2006-01-31] [2006-02-28] [2006-03-31] [2006-04-30]
>> >>>[6] [2006-05-31] [2006-06-30] [2006-07-31] [2006-08-31] [2006-09-30]
>> >>>[11] [2006-10-31] [2006-11-30] [2006-12-31]
>> >>>
>> >>>Please use proper ISO-8601 notation: 2006-01-05 and not 2006-1-5 !
>> >>>
>> >>>DW
>> >>>
>> >>>
>> >>>
>> >>>>On 2/4/06, Wojciech Slusarski < wojciech.slusarski at gmail.com> wrote:
>> >>>>
>> >>>>
>> >>>>
>> >>>>
>> >>>>>Dear R users,
>> >>>>>
>> >>>>>Could anyone help me with creating a monthly series of dates?
>> >>>>>When I try to do:
>> >>>>>
>> >>>>>dates = timeSequence(from = "2005-12-31", to = "2006-12-31", format =
>> >>>>>"%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw")
>> >>>>>
>> >>>>>I get:
>> >>>>>
>> >>>>>
>> >>>>>
>> >>>>>
>> >>>>>
>> >>>>>>dates
>> >>>>>>
>> >>>>>>
>> >>>>>>
>> >>>>>>
>> >>>>>[1] "Europe/Warsaw"
>> >>>>>[1] [2005-12-31] [2006-01-31] [2006-03-03] [2006-03-31] [2006-05-01]
>> >>>>>[6] [2006-05-31] [2006-07-01] [2006-07-31] [2006-08-31] [2006-10-01]
>> >>>>>[11] [2006-10-31] [2006-12-01] [2006-12-31]
>> >>>>>
>> >>>>>Unfourtunately, I would like to heave end of month at each point.
>> >>>>>I thought, that maybe using this function would also help when trying
>> >>>>>
>> >>>>>
>> >>>to add
>> >>>
>> >>>
>> >>>>>a month to a date. I would like to have
>> >>>>>
>> >>>>>"2006-01-31" + 1M = "2006-02-28"
>> >>>>>
>> >>>>>in MS EXCEL I would use EDATE("2006-01-31";1), and that would work. I
>> >>>>>couldn't find any similar function in R for that. Am I missing some
>> >>>>>function?
>> >>>>>
>> >>>>>Best regards,
>> >>>>>Wojtek
>> >>>>>
>> >>>>>      [[alternative HTML version deleted]]
>> >>>>>
>> >>>>>_______________________________________________
>> >>>>>R-sig-finance at stat.math.ethz.ch mailing list
>> >>>>>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> >>>>>
>> >>>>>
>> >>>>>
>> >>>>>
>> >>>>>
>> >>>>_______________________________________________
>> >>>>R-sig-finance at stat.math.ethz.ch mailing list
>> >>>>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> >>>>
>> >>>>
>> >>>>
>> >>>>
>> >>>>
>> >>>_______________________________________________
>> >>>R-sig-finance at stat.math.ethz.ch mailing list
>> >>>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> >>>
>> >>>
>> >>>
>> >>
>> >>
>> >
>> >       [[alternative HTML version deleted]]
>> >
>> >_______________________________________________
>> >R-sig-finance at stat.math.ethz.ch mailing list
>> >https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> >
>> >
>> >
>>
>>
>
>	[[alternative HTML version deleted]]
>
>_______________________________________________
>R-sig-finance at stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>


From ggrothendieck at gmail.com  Mon Feb  6 03:52:33 2006
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sun, 5 Feb 2006 21:52:33 -0500
Subject: [R-sig-finance] Problems with monthly sequences
In-Reply-To: <5e64e5be0602051218k4eda92d9p@mail.gmail.com>
References: <5e64e5be0602041623o6bab75b0g@mail.gmail.com>
	<971536df0602041655q173298c0h8f53cce722036030@mail.gmail.com>
	<43E5C5B0.60108@itp.phys.ethz.ch>
	<5e64e5be0602050517m1574c7f7j@mail.gmail.com>
	<5e64e5be0602050820o3782bef7w@mail.gmail.com>
	<43E65779.8050507@itp.phys.ethz.ch>
	<5e64e5be0602051218k4eda92d9p@mail.gmail.com>
Message-ID: <971536df0602051852q10d7b2a7n8633df829df11587@mail.gmail.com>

Try this.  It takes a vector of dates in any class that has
an as.Date method and returns a vector of Date class whose
add m months to each element where m may be negative.
Internally it makes use of the yearmon class and methods
in the zoo library; however, as shown in the examples
its simple to convert to class timeDate.  The way it
works is to calculate the date m months hence at the
beginning of the month + day - 1 and the end of the month
and it takes whichever is smaller.

library(zoo)
addmon <- function(x = Sys.Date(), m = 1) {
	dd <- as.Date(x)
	ym <- as.yearmon(dd)
	pmin(as.Date(ym + m/12) + as.numeric(format(dd, "%d")) - 1,
		as.Date(ym + m/12, frac = 1))
}

# test
charvec <- c("2005-12-25", "2006-01-30")
addmon(charvec)
addmon(charvec, -11)

library(fCalendar)
timeDate(format(addmon(charvec)))


On 2/5/06, Wojciech Slusarski <wojciech.slusarski at gmail.com> wrote:
> Well, thanks for the help, but not exactly. The function I would like to
> have would give results for starting dates
>
> charvec = c("2005-12-25", "2006-01-30")
>
> >function_name(charvec,+1M)
>
> [1] [2006-01-25] [2006-02-28]
>
> So it's adding one month to a date, but when it exceeds the last day of the
> next month, it gives the las day.
>
> The other way could be also useful:
>
> charvec = c("2005-12-25", "2006-02-28")
>
> >function_name(charvec,-1M)
>
> [1] [2005-11-25] [2006-01-31]
> #first date was decreased by one month, the second was decreased to the last
> day of january (not 28th January).
>
> Having such functions, one could set up proper dates for tenors in discount
> curve. In the function you published few days ago, you setup fixed year
> fractions for each tenor, which don't take into account holidays etc.
>
> Best regards,
> Wojtek
>
> 2006/2/5, Diethelm Wuertz <wuertz at itp.phys.ethz.ch>:
> >
> >
> > Here comes a function which computes  time and date for the last Day
> > n-month ahead.
> > It is Rmetrics conform and preserves time zone, daylight saving and
> > Financial Centers.
> >
> > Is that what you wanted?
> >
> > DW
> >
> >
> >
> > timeLastDayNMonthAhead =
> > function(charvec, month, format = "%Y-%m-%d", FinCenter = "GMT")
> > {
> >    if (Sys.getenv("TZ")[[1]] != "GMT") warning("Set timezone to GMT!")
> >    if (FinCenter == "") FinCenter = "GMT"
> >    if (month < 0) stop("month must be positive")
> >    date = timeLastDayInMonth(charvec, format = format, FinCenter =
> > FinCenter)
> >    for (i in 1:month) date = timeLastDayInMonth(date, format = format,
> >        FinCenter = FinCenter) + 3600*24
> >
> >    # Return Value:
> >    timeLastDayInMonth(date, format = format, FinCenter = FinCenter)
> > }
> >
> > # Example:
> > > timeLastDayNMonthAhead(c("2005-12-25", "2006-02-28"), month = 2)
> > [1] "GMT"
> > [1] [2006-02-28] [2006-04-30]
> >
> >
> >
> >
> >
> > Wojciech Slusarski wrote:
> >
> > >I thought a bit about the function below, and see a problem, when n<0 (I
> > >would like to decrease the date.s by one month). I still have no Idea how
> > to
> > >implement it.
> > >
> > >Best regards,
> > >Wojtek
> > >
> > >
> > >2006/2/5, Wojciech Slusarski <wojciech.slusarski at gmail.com>:
> > >
> > >
> > >>Well,
> > >>
> > >>Thanks for the help, but I thought about something more general, that
> > >>could allow me adding n months to a date. I am sorry, that my question
> > >>wasn't so clear. If someone needed, here's the code:
> > >>
> > >>
> > >>EMONTH =
> > >>function(date.s, n)
> > >>{
> > >>  #function adds 'n' months to 'date.s'
> > >>  dates = timeSequence(from = format(date.s at Data, "%Y-%m-%d"),
> > length.out= n+1, by = "month")
> > >>  if(atoms(date.s)[1,"d"]>28)
> > >>  {
> > >>      if(atoms(dates)[n+1,"d"]<4)
> > >>   {
> > >>      emonth = dates[n+1]-atoms(dates)[n+1,"d"]*24*3600
> > >>   } else {
> > >>     emonth = dates[n+1]
> > >>   }
> > >>  } else {
> > >>    emonth = dates[n+1]
> > >>  }
> > >>  emonth
> > >>}
> > >>
> > >>
> > >>
> > >># test
> > >>
> > >>date.s = timeDate("2005-12-30")
> > >>
> > >>
> > >>
> > >>>EMONTH(date.s, 2)@Data
> > >>>
> > >>>
> > >>[1] "2006-02-28"
> > >>Best regards,
> > >>Wojtek
> > >>
> > >>
> > >>2006/2/5, Diethelm Wuertz <wuertz at itp.phys.ethz.ch>:
> > >>
> > >>
> > >>>Gabor Grothendieck wrote:
> > >>>
> > >>>
> > >>>
> > >>>>Try this:
> > >>>>
> > >>>>library(fCalendar)
> > >>>>dates <- timeSequence(from = "2005-12-1", to = "2006-12-1", format =
> > >>>>"%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw")
> > >>>>dates <- timeLastDayInMonth(dates)
> > >>>>
> > >>>>
> > >>>>
> > >>>>
> > >>>Alternatively you can use
> > >>>
> > >>>
> > >>>
> > >>>>timeSequence(from = "2006-01-01", to = "2007-01-01", format =
> > >>>>
> > >>>>
> > >>>+ "%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw") - 3600*24
> > >>>[1] "Europe/Warsaw"
> > >>>[1] [2005-12-31] [2006-01-31] [2006-02-28] [2006-03-31] [2006-04-30]
> > >>>[6] [2006-05-31] [2006-06-30] [2006-07-31] [2006-08-31] [2006-09-30]
> > >>>[11] [2006-10-31] [2006-11-30] [2006-12-31]
> > >>>
> > >>>Please use proper ISO-8601 notation: 2006-01-05 and not 2006-1-5 !
> > >>>
> > >>>DW
> > >>>
> > >>>
> > >>>
> > >>>>On 2/4/06, Wojciech Slusarski < wojciech.slusarski at gmail.com> wrote:
> > >>>>
> > >>>>
> > >>>>
> > >>>>
> > >>>>>Dear R users,
> > >>>>>
> > >>>>>Could anyone help me with creating a monthly series of dates?
> > >>>>>When I try to do:
> > >>>>>
> > >>>>>dates = timeSequence(from = "2005-12-31", to = "2006-12-31", format =
> > >>>>>"%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw")
> > >>>>>
> > >>>>>I get:
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>>>dates
> > >>>>>>
> > >>>>>>
> > >>>>>>
> > >>>>>>
> > >>>>>[1] "Europe/Warsaw"
> > >>>>>[1] [2005-12-31] [2006-01-31] [2006-03-03] [2006-03-31] [2006-05-01]
> > >>>>>[6] [2006-05-31] [2006-07-01] [2006-07-31] [2006-08-31] [2006-10-01]
> > >>>>>[11] [2006-10-31] [2006-12-01] [2006-12-31]
> > >>>>>
> > >>>>>Unfourtunately, I would like to heave end of month at each point.
> > >>>>>I thought, that maybe using this function would also help when trying
> > >>>>>
> > >>>>>
> > >>>to add
> > >>>
> > >>>
> > >>>>>a month to a date. I would like to have
> > >>>>>
> > >>>>>"2006-01-31" + 1M = "2006-02-28"
> > >>>>>
> > >>>>>in MS EXCEL I would use EDATE("2006-01-31";1), and that would work. I
> > >>>>>couldn't find any similar function in R for that. Am I missing some
> > >>>>>function?
> > >>>>>
> > >>>>>Best regards,
> > >>>>>Wojtek
> > >>>>>
> > >>>>>      [[alternative HTML version deleted]]
> > >>>>>
> > >>>>>_______________________________________________
> > >>>>>R-sig-finance at stat.math.ethz.ch mailing list
> > >>>>>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>_______________________________________________
> > >>>>R-sig-finance at stat.math.ethz.ch mailing list
> > >>>>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > >>>>
> > >>>>
> > >>>>
> > >>>>
> > >>>>
> > >>>_______________________________________________
> > >>>R-sig-finance at stat.math.ethz.ch mailing list
> > >>>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > >>>
> > >>>
> > >>>
> > >>
> > >>
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > >_______________________________________________
> > >R-sig-finance at stat.math.ethz.ch mailing list
> > >https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > >
> > >
> > >
> >
> >
>
>        [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From raharjo_hendry at yahoo.com.sg  Mon Feb  6 05:18:15 2006
From: raharjo_hendry at yahoo.com.sg (hendry raharjo)
Date: Mon, 6 Feb 2006 12:18:15 +0800 (CST)
Subject: [R-sig-finance] stochastic dominance problem
Message-ID: <20060206041815.8211.qmail@web35714.mail.mud.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060206/771b04b8/attachment.pl

From ggrothendieck at gmail.com  Mon Feb  6 06:38:01 2006
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 6 Feb 2006 00:38:01 -0500
Subject: [R-sig-finance] Problems with monthly sequences
In-Reply-To: <971536df0602051852q10d7b2a7n8633df829df11587@mail.gmail.com>
References: <5e64e5be0602041623o6bab75b0g@mail.gmail.com>
	<971536df0602041655q173298c0h8f53cce722036030@mail.gmail.com>
	<43E5C5B0.60108@itp.phys.ethz.ch>
	<5e64e5be0602050517m1574c7f7j@mail.gmail.com>
	<5e64e5be0602050820o3782bef7w@mail.gmail.com>
	<43E65779.8050507@itp.phys.ethz.ch>
	<5e64e5be0602051218k4eda92d9p@mail.gmail.com>
	<971536df0602051852q10d7b2a7n8633df829df11587@mail.gmail.com>
Message-ID: <971536df0602052138o73f30d8cy114f5fbe8ae41f9d@mail.gmail.com>

I have made some minor tweaks to shorten the function:

library(zoo)
addmon <- function(x = Sys.Date(), m = 1) {
       dd <- as.Date(x)
       ym <- as.yearmon(dd) + m/12
       pmin(as.Date(ym) + as.POSIXlt(dd)$mday - 1, as.Date(ym, 1))
}

# test
charvec <- c("2005-12-25", "2006-01-30")
addmon(charvec)
addmon(charvec, -11)

library(fCalendar)
timeDate(format(addmon(charvec)))


On 2/5/06, Gabor Grothendieck <ggrothendieck at gmail.com> wrote:
> Try this.  It takes a vector of dates in any class that has
> an as.Date method and returns a vector of Date class whose
> add m months to each element where m may be negative.
> Internally it makes use of the yearmon class and methods
> in the zoo library; however, as shown in the examples
> its simple to convert to class timeDate.  The way it
> works is to calculate the date m months hence at the
> beginning of the month + day - 1 and the end of the month
> and it takes whichever is smaller.
>
> library(zoo)
> addmon <- function(x = Sys.Date(), m = 1) {
>        dd <- as.Date(x)
>        ym <- as.yearmon(dd)
>        pmin(as.Date(ym + m/12) + as.numeric(format(dd, "%d")) - 1,
>                as.Date(ym + m/12, frac = 1))
> }
>
> # test
> charvec <- c("2005-12-25", "2006-01-30")
> addmon(charvec)
> addmon(charvec, -11)
>
> library(fCalendar)
> timeDate(format(addmon(charvec)))
>
>
> On 2/5/06, Wojciech Slusarski <wojciech.slusarski at gmail.com> wrote:
> > Well, thanks for the help, but not exactly. The function I would like to
> > have would give results for starting dates
> >
> > charvec = c("2005-12-25", "2006-01-30")
> >
> > >function_name(charvec,+1M)
> >
> > [1] [2006-01-25] [2006-02-28]
> >
> > So it's adding one month to a date, but when it exceeds the last day of the
> > next month, it gives the las day.
> >
> > The other way could be also useful:
> >
> > charvec = c("2005-12-25", "2006-02-28")
> >
> > >function_name(charvec,-1M)
> >
> > [1] [2005-11-25] [2006-01-31]
> > #first date was decreased by one month, the second was decreased to the last
> > day of january (not 28th January).
> >
> > Having such functions, one could set up proper dates for tenors in discount
> > curve. In the function you published few days ago, you setup fixed year
> > fractions for each tenor, which don't take into account holidays etc.
> >
> > Best regards,
> > Wojtek
> >
> > 2006/2/5, Diethelm Wuertz <wuertz at itp.phys.ethz.ch>:
> > >
> > >
> > > Here comes a function which computes  time and date for the last Day
> > > n-month ahead.
> > > It is Rmetrics conform and preserves time zone, daylight saving and
> > > Financial Centers.
> > >
> > > Is that what you wanted?
> > >
> > > DW
> > >
> > >
> > >
> > > timeLastDayNMonthAhead =
> > > function(charvec, month, format = "%Y-%m-%d", FinCenter = "GMT")
> > > {
> > >    if (Sys.getenv("TZ")[[1]] != "GMT") warning("Set timezone to GMT!")
> > >    if (FinCenter == "") FinCenter = "GMT"
> > >    if (month < 0) stop("month must be positive")
> > >    date = timeLastDayInMonth(charvec, format = format, FinCenter =
> > > FinCenter)
> > >    for (i in 1:month) date = timeLastDayInMonth(date, format = format,
> > >        FinCenter = FinCenter) + 3600*24
> > >
> > >    # Return Value:
> > >    timeLastDayInMonth(date, format = format, FinCenter = FinCenter)
> > > }
> > >
> > > # Example:
> > > > timeLastDayNMonthAhead(c("2005-12-25", "2006-02-28"), month = 2)
> > > [1] "GMT"
> > > [1] [2006-02-28] [2006-04-30]
> > >
> > >
> > >
> > >
> > >
> > > Wojciech Slusarski wrote:
> > >
> > > >I thought a bit about the function below, and see a problem, when n<0 (I
> > > >would like to decrease the date.s by one month). I still have no Idea how
> > > to
> > > >implement it.
> > > >
> > > >Best regards,
> > > >Wojtek
> > > >
> > > >
> > > >2006/2/5, Wojciech Slusarski <wojciech.slusarski at gmail.com>:
> > > >
> > > >
> > > >>Well,
> > > >>
> > > >>Thanks for the help, but I thought about something more general, that
> > > >>could allow me adding n months to a date. I am sorry, that my question
> > > >>wasn't so clear. If someone needed, here's the code:
> > > >>
> > > >>
> > > >>EMONTH =
> > > >>function(date.s, n)
> > > >>{
> > > >>  #function adds 'n' months to 'date.s'
> > > >>  dates = timeSequence(from = format(date.s at Data, "%Y-%m-%d"),
> > > length.out= n+1, by = "month")
> > > >>  if(atoms(date.s)[1,"d"]>28)
> > > >>  {
> > > >>      if(atoms(dates)[n+1,"d"]<4)
> > > >>   {
> > > >>      emonth = dates[n+1]-atoms(dates)[n+1,"d"]*24*3600
> > > >>   } else {
> > > >>     emonth = dates[n+1]
> > > >>   }
> > > >>  } else {
> > > >>    emonth = dates[n+1]
> > > >>  }
> > > >>  emonth
> > > >>}
> > > >>
> > > >>
> > > >>
> > > >># test
> > > >>
> > > >>date.s = timeDate("2005-12-30")
> > > >>
> > > >>
> > > >>
> > > >>>EMONTH(date.s, 2)@Data
> > > >>>
> > > >>>
> > > >>[1] "2006-02-28"
> > > >>Best regards,
> > > >>Wojtek
> > > >>
> > > >>
> > > >>2006/2/5, Diethelm Wuertz <wuertz at itp.phys.ethz.ch>:
> > > >>
> > > >>
> > > >>>Gabor Grothendieck wrote:
> > > >>>
> > > >>>
> > > >>>
> > > >>>>Try this:
> > > >>>>
> > > >>>>library(fCalendar)
> > > >>>>dates <- timeSequence(from = "2005-12-1", to = "2006-12-1", format =
> > > >>>>"%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw")
> > > >>>>dates <- timeLastDayInMonth(dates)
> > > >>>>
> > > >>>>
> > > >>>>
> > > >>>>
> > > >>>Alternatively you can use
> > > >>>
> > > >>>
> > > >>>
> > > >>>>timeSequence(from = "2006-01-01", to = "2007-01-01", format =
> > > >>>>
> > > >>>>
> > > >>>+ "%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw") - 3600*24
> > > >>>[1] "Europe/Warsaw"
> > > >>>[1] [2005-12-31] [2006-01-31] [2006-02-28] [2006-03-31] [2006-04-30]
> > > >>>[6] [2006-05-31] [2006-06-30] [2006-07-31] [2006-08-31] [2006-09-30]
> > > >>>[11] [2006-10-31] [2006-11-30] [2006-12-31]
> > > >>>
> > > >>>Please use proper ISO-8601 notation: 2006-01-05 and not 2006-1-5 !
> > > >>>
> > > >>>DW
> > > >>>
> > > >>>
> > > >>>
> > > >>>>On 2/4/06, Wojciech Slusarski < wojciech.slusarski at gmail.com> wrote:
> > > >>>>
> > > >>>>
> > > >>>>
> > > >>>>
> > > >>>>>Dear R users,
> > > >>>>>
> > > >>>>>Could anyone help me with creating a monthly series of dates?
> > > >>>>>When I try to do:
> > > >>>>>
> > > >>>>>dates = timeSequence(from = "2005-12-31", to = "2006-12-31", format =
> > > >>>>>"%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw")
> > > >>>>>
> > > >>>>>I get:
> > > >>>>>
> > > >>>>>
> > > >>>>>
> > > >>>>>
> > > >>>>>
> > > >>>>>>dates
> > > >>>>>>
> > > >>>>>>
> > > >>>>>>
> > > >>>>>>
> > > >>>>>[1] "Europe/Warsaw"
> > > >>>>>[1] [2005-12-31] [2006-01-31] [2006-03-03] [2006-03-31] [2006-05-01]
> > > >>>>>[6] [2006-05-31] [2006-07-01] [2006-07-31] [2006-08-31] [2006-10-01]
> > > >>>>>[11] [2006-10-31] [2006-12-01] [2006-12-31]
> > > >>>>>
> > > >>>>>Unfourtunately, I would like to heave end of month at each point.
> > > >>>>>I thought, that maybe using this function would also help when trying
> > > >>>>>
> > > >>>>>
> > > >>>to add
> > > >>>
> > > >>>
> > > >>>>>a month to a date. I would like to have
> > > >>>>>
> > > >>>>>"2006-01-31" + 1M = "2006-02-28"
> > > >>>>>
> > > >>>>>in MS EXCEL I would use EDATE("2006-01-31";1), and that would work. I
> > > >>>>>couldn't find any similar function in R for that. Am I missing some
> > > >>>>>function?
> > > >>>>>
> > > >>>>>Best regards,
> > > >>>>>Wojtek
> > > >>>>>
> > > >>>>>      [[alternative HTML version deleted]]
> > > >>>>>
> > > >>>>>_______________________________________________
> > > >>>>>R-sig-finance at stat.math.ethz.ch mailing list
> > > >>>>>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > > >>>>>
> > > >>>>>
> > > >>>>>
> > > >>>>>
> > > >>>>>
> > > >>>>_______________________________________________
> > > >>>>R-sig-finance at stat.math.ethz.ch mailing list
> > > >>>>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > > >>>>
> > > >>>>
> > > >>>>
> > > >>>>
> > > >>>>
> > > >>>_______________________________________________
> > > >>>R-sig-finance at stat.math.ethz.ch mailing list
> > > >>>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > > >>>
> > > >>>
> > > >>>
> > > >>
> > > >>
> > > >
> > > >       [[alternative HTML version deleted]]
> > > >
> > > >_______________________________________________
> > > >R-sig-finance at stat.math.ethz.ch mailing list
> > > >https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > > >
> > > >
> > > >
> > >
> > >
> >
> >        [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-finance at stat.math.ethz.ch mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >
>


From wojciech.slusarski at gmail.com  Mon Feb  6 09:10:21 2006
From: wojciech.slusarski at gmail.com (Wojciech Slusarski)
Date: Mon, 6 Feb 2006 09:10:21 +0100
Subject: [R-sig-finance] Problems with monthly sequences
In-Reply-To: <971536df0602052138o73f30d8cy114f5fbe8ae41f9d@mail.gmail.com>
References: <5e64e5be0602041623o6bab75b0g@mail.gmail.com>
	<971536df0602041655q173298c0h8f53cce722036030@mail.gmail.com>
	<43E5C5B0.60108@itp.phys.ethz.ch>
	<5e64e5be0602050517m1574c7f7j@mail.gmail.com>
	<5e64e5be0602050820o3782bef7w@mail.gmail.com>
	<43E65779.8050507@itp.phys.ethz.ch>
	<5e64e5be0602051218k4eda92d9p@mail.gmail.com>
	<971536df0602051852q10d7b2a7n8633df829df11587@mail.gmail.com>
	<971536df0602052138o73f30d8cy114f5fbe8ae41f9d@mail.gmail.com>
Message-ID: <5e64e5be0602060010m2ad663d7p@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060206/fd404c69/attachment.ksh

From ajayshah at mayin.org  Sun Feb  5 18:41:40 2006
From: ajayshah at mayin.org (Ajay Narottam Shah)
Date: Sun, 5 Feb 2006 23:11:40 +0530
Subject: [R-sig-finance] Currency data on the web
In-Reply-To: <726E034CE6A58240B4AFF17E30A255591CBC97@hou0mbx01.kochind.com>
References: <726E034CE6A58240B4AFF17E30A255591CBC97@hou0mbx01.kochind.com>
Message-ID: <20060205174140.GN450@lubyanka.local>

> Has anybody written R-code that calculates
> FX option prices?
>  
> Also, I'm curious about what historical databases
> that people are using with R.

That's an ambiguous question: Do you want to know about historical
_currency_ databases? If so, read on.

A while ago, I had asked questions here about data sources on the
currency market. I got enormous help from folks on this mailing
list. A summary of what I found is:

1. There are 3 good sources I know of: oanda.com, US federal reserve,
   and Bank of England. The first (oanda.com) is integrated into
   tseries::get.hist.quote(). The other two, you have to do
   yourself. Send me mail if you want shell scripts which do the
   snarfing.

2. The currency market trades 24 hours a day. It isn't like the stock
   market, where the official closing price on a main exchange is the
   well defined notion of "the price of the day". The US Fed and the
   Bank of England each report currency prices at a point in time in
   the day. oanda.com reports the volume weighted average (VWA) over a
   24 hour period (roughly the GMT day). So the measurement concepts
   used are rather different. That is particularly troublesome when
   mixing data from multiple sources. See some of my postings on this
   mailing list for how confounding it can get.

3. In terms of number of currencies covered, it's oanda.com > Bank of
   England > US Fed. oanda.com has any currency you can think of, and
   some you can't think of (e.g. gold). But the US Fed has long
   historical series for all the currencies that they do, while the
   Bank of England doesn't always have these.

In the event, after thinking about all this, my co-authors and I
plonked for US Fed data for a recent project
(http://www.mayin.org/ajayshah/papers/CNY_regime) which uses currency
data for a few major countries (US, UK, Japan, Euro, China).

-- 
Ajay Shah                                      http://www.mayin.org/ajayshah  
ajayshah at mayin.org                             http://ajayshahblog.blogspot.com
<*(:-? - wizard who doesn't know the answer.


From davidr at rhotrading.com  Mon Feb  6 16:04:53 2006
From: davidr at rhotrading.com (davidr@rhotrading.com)
Date: Mon, 6 Feb 2006 09:04:53 -0600
Subject: [R-sig-finance] Problems with monthly sequences
Message-ID: <14814D23B3BE2C41AFA18A0B1961F17204FB77@rhosvr02.rhotrading.com>

I thought the original poster might want end-end or modified following:
see http://www.bba.org.uk/bba/jsp/polopoly.jsp?d=225&a=1412 .
(It just helps to use the technical jargon so we are all clear.)

In any case, Gabor's function seems to satisfy.

David L. Reiner
Rho Trading Securities, LLC
 

> -----Original Message-----
> From: r-sig-finance-bounces at stat.math.ethz.ch [mailto:r-sig-finance-
> bounces at stat.math.ethz.ch] On Behalf Of Franklin Parlamis
> Sent: Sunday, February 05, 2006 3:50 PM
> To: Wojciech Slusarski
> Cc: r-sig-finance
> Subject: Re: [R-sig-finance] Problems with monthly sequences
> 
> you want end.end convention (like for the interbank deposits
underlying
> BBA Libor quotations).  here's some code I wrote recently.  caveats:
> 
> (i)  i just learned to code, so this probably doesn't exhibit
professional
> programming standards
> (ii) you need the Methods package (which is default loaded when R
opens)
> (iii) the functions are not yet complete (in that i don't deal with
> improper arguments as fully as i intend to)
> (iv) you will need to separately check whether the output dates are
> business days, and then apply the mod.following convention or
whichever
> other convention you want; all these functions do is move you forward
an
> increment subject to the end.end standard.
> 
> (v) the date arguments are not character vectors as you envision;
rather
> they are objects that can be compelled to POSIXlt dates via
as.POSIXlt, or
> timeDate objects (you could easily add a method to convert the
character
> vectors to POSIXlt objects or timeDate objects)
> (vi) i'm pretty sure these functions won't work for negative
increments as
> you request, but I thank you for pointing out that functionality, as
it
> shouldn't be hard for me to alter the functions to get there.
> 
> ----
> 
> ########################
> ## last.of
> ########################
> 
> last.of <- function(date) {
>   date<-as.POSIXlt(date)
> 
>
switch(date[["mon"]]+1,31,28+leap.year(date[["year"]]+1900),31,30,31,30,
31
> ,31,30,31,30,31)}
> 
> setMethod("last.of", signature(date="timeDate"), function(date)
>   last.of(date at Data))
> 
> is.last.of <- function(date) {
>   date<-as.POSIXlt(date)
>   date[["mday"]]==last.of(date)}
> 
> setMethod("is.last.of", signature(date="timeDate"), function(date)
>   is.last.of(date at Data))
> 
> ########################
> ## end.end
> ########################
> 
> end.end <- function(date, num, inc) {
>   date<-as.POSIXlt(date)
>   trial<-as.POSIXlt(seq(from=date,len=2,by=paste(num,inc))[2])
>   if(inc=="month") {
>     while((trial[["mon"]]-date[["mon"]])%%12>num)
>       trial<-as.POSIXlt(seq(from=trial,len=2,by="-1 day")[2])
>     if(is.last.of(date)) while(is.last.of(trial)==FALSE)
>       trial<-as.POSIXlt(seq(from=trial,len=2,by="1 day")[2])}
>   if(inc=="year") {
>     while(trial[["mon"]]!=date[["mon"]])
>       trial<-as.POSIXlt(seq(from=trial,len=2,by="-1 day")[2])
>     if(is.last.of(date)) while(is.last.of(trial)==FALSE)
>       trial<-as.POSIXlt(seq(from=trial,len=2,by="1 day")[2])}
>   trial}
> 
> setMethod("end.end", signature(date="timeDate"), function(date, num,
inc)
>   end.end(date at Data, num, inc))
> 
> -----
> 
> franklin parlamis
> 
> On Sunday, February 05, 2006, at 12:18PM, Wojciech Slusarski
> <wojciech.slusarski at gmail.com> wrote:
> 
> >Well, thanks for the help, but not exactly. The function I would like
to
> >have would give results for starting dates
> >
> >charvec = c("2005-12-25", "2006-01-30")
> >
> >>function_name(charvec,+1M)
> >
> >[1] [2006-01-25] [2006-02-28]
> >
> >So it's adding one month to a date, but when it exceeds the last day
of
> the
> >next month, it gives the las day.
> >
> >The other way could be also useful:
> >
> >charvec = c("2005-12-25", "2006-02-28")
> >
> >>function_name(charvec,-1M)
> >
> >[1] [2005-11-25] [2006-01-31]
> >#first date was decreased by one month, the second was decreased to
the
> last
> >day of january (not 28th January).
> >
> >Having such functions, one could set up proper dates for tenors in
> discount
> >curve. In the function you published few days ago, you setup fixed
year
> >fractions for each tenor, which don't take into account holidays etc.
> >
> >Best regards,
> >Wojtek
> >
> >2006/2/5, Diethelm Wuertz <wuertz at itp.phys.ethz.ch>:
> >>
> >>
> >> Here comes a function which computes  time and date for the last
Day
> >> n-month ahead.
> >> It is Rmetrics conform and preserves time zone, daylight saving and
> >> Financial Centers.
> >>
> >> Is that what you wanted?
> >>
> >> DW
> >>
> >>
> >>
> >> timeLastDayNMonthAhead =
> >> function(charvec, month, format = "%Y-%m-%d", FinCenter = "GMT")
> >> {
> >>    if (Sys.getenv("TZ")[[1]] != "GMT") warning("Set timezone to
GMT!")
> >>    if (FinCenter == "") FinCenter = "GMT"
> >>    if (month < 0) stop("month must be positive")
> >>    date = timeLastDayInMonth(charvec, format = format, FinCenter =
> >> FinCenter)
> >>    for (i in 1:month) date = timeLastDayInMonth(date, format =
format,
> >>        FinCenter = FinCenter) + 3600*24
> >>
> >>    # Return Value:
> >>    timeLastDayInMonth(date, format = format, FinCenter = FinCenter)
> >> }
> >>
> >> # Example:
> >> > timeLastDayNMonthAhead(c("2005-12-25", "2006-02-28"), month = 2)
> >> [1] "GMT"
> >> [1] [2006-02-28] [2006-04-30]
> >>
> >>
> >>
> >>
> >>
> >> Wojciech Slusarski wrote:
> >>
> >> >I thought a bit about the function below, and see a problem, when
n<0
> (I
> >> >would like to decrease the date.s by one month). I still have no
Idea
> how
> >> to
> >> >implement it.
> >> >
> >> >Best regards,
> >> >Wojtek
> >> >
> >> >
> >> >2006/2/5, Wojciech Slusarski <wojciech.slusarski at gmail.com>:
> >> >
> >> >
> >> >>Well,
> >> >>
> >> >>Thanks for the help, but I thought about something more general,
that
> >> >>could allow me adding n months to a date. I am sorry, that my
> question
> >> >>wasn't so clear. If someone needed, here's the code:
> >> >>
> >> >>
> >> >>EMONTH =
> >> >>function(date.s, n)
> >> >>{
> >> >>  #function adds 'n' months to 'date.s'
> >> >>  dates = timeSequence(from = format(date.s at Data, "%Y-%m-%d"),
> >> length.out= n+1, by = "month")
> >> >>  if(atoms(date.s)[1,"d"]>28)
> >> >>  {
> >> >>      if(atoms(dates)[n+1,"d"]<4)
> >> >>   {
> >> >>      emonth = dates[n+1]-atoms(dates)[n+1,"d"]*24*3600
> >> >>   } else {
> >> >>     emonth = dates[n+1]
> >> >>   }
> >> >>  } else {
> >> >>    emonth = dates[n+1]
> >> >>  }
> >> >>  emonth
> >> >>}
> >> >>
> >> >>
> >> >>
> >> >># test
> >> >>
> >> >>date.s = timeDate("2005-12-30")
> >> >>
> >> >>
> >> >>
> >> >>>EMONTH(date.s, 2)@Data
> >> >>>
> >> >>>
> >> >>[1] "2006-02-28"
> >> >>Best regards,
> >> >>Wojtek
> >> >>
> >> >>
> >> >>2006/2/5, Diethelm Wuertz <wuertz at itp.phys.ethz.ch>:
> >> >>
> >> >>
> >> >>>Gabor Grothendieck wrote:
> >> >>>
> >> >>>
> >> >>>
> >> >>>>Try this:
> >> >>>>
> >> >>>>library(fCalendar)
> >> >>>>dates <- timeSequence(from = "2005-12-1", to = "2006-12-1",
format
> =
> >> >>>>"%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw")
> >> >>>>dates <- timeLastDayInMonth(dates)
> >> >>>>
> >> >>>>
> >> >>>>
> >> >>>>
> >> >>>Alternatively you can use
> >> >>>
> >> >>>
> >> >>>
> >> >>>>timeSequence(from = "2006-01-01", to = "2007-01-01", format =
> >> >>>>
> >> >>>>
> >> >>>+ "%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw") - 3600*24
> >> >>>[1] "Europe/Warsaw"
> >> >>>[1] [2005-12-31] [2006-01-31] [2006-02-28] [2006-03-31]
[2006-04-30]
> >> >>>[6] [2006-05-31] [2006-06-30] [2006-07-31] [2006-08-31]
[2006-09-30]
> >> >>>[11] [2006-10-31] [2006-11-30] [2006-12-31]
> >> >>>
> >> >>>Please use proper ISO-8601 notation: 2006-01-05 and not 2006-1-5
!
> >> >>>
> >> >>>DW
> >> >>>
> >> >>>
> >> >>>
> >> >>>>On 2/4/06, Wojciech Slusarski < wojciech.slusarski at gmail.com>
> wrote:
> >> >>>>
> >> >>>>
> >> >>>>
> >> >>>>
> >> >>>>>Dear R users,
> >> >>>>>
> >> >>>>>Could anyone help me with creating a monthly series of dates?
> >> >>>>>When I try to do:
> >> >>>>>
> >> >>>>>dates = timeSequence(from = "2005-12-31", to = "2006-12-31",
> format =
> >> >>>>>"%Y-%m-%d", by="month", FinCenter = "Europe/Warsaw")
> >> >>>>>
> >> >>>>>I get:
> >> >>>>>
> >> >>>>>
> >> >>>>>
> >> >>>>>
> >> >>>>>
> >> >>>>>>dates
> >> >>>>>>
> >> >>>>>>
> >> >>>>>>
> >> >>>>>>
> >> >>>>>[1] "Europe/Warsaw"
> >> >>>>>[1] [2005-12-31] [2006-01-31] [2006-03-03] [2006-03-31]
[2006-05-
> 01]
> >> >>>>>[6] [2006-05-31] [2006-07-01] [2006-07-31] [2006-08-31]
[2006-10-
> 01]
> >> >>>>>[11] [2006-10-31] [2006-12-01] [2006-12-31]
> >> >>>>>
> >> >>>>>Unfourtunately, I would like to heave end of month at each
point.
> >> >>>>>I thought, that maybe using this function would also help when
> trying
> >> >>>>>
> >> >>>>>
> >> >>>to add
> >> >>>
> >> >>>
> >> >>>>>a month to a date. I would like to have
> >> >>>>>
> >> >>>>>"2006-01-31" + 1M = "2006-02-28"
> >> >>>>>
> >> >>>>>in MS EXCEL I would use EDATE("2006-01-31";1), and that would
> work. I
> >> >>>>>couldn't find any similar function in R for that. Am I missing
> some
> >> >>>>>function?
> >> >>>>>
> >> >>>>>Best regards,
> >> >>>>>Wojtek
> >> >>>>>
> >> >>>>>      [[alternative HTML version deleted]]
> >> >>>>>
> >> >>>>>_______________________________________________
> >> >>>>>R-sig-finance at stat.math.ethz.ch mailing list
> >> >>>>>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >> >>>>>
> >> >>>>>
> >> >>>>>
> >> >>>>>
> >> >>>>>
> >> >>>>_______________________________________________
> >> >>>>R-sig-finance at stat.math.ethz.ch mailing list
> >> >>>>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >> >>>>
> >> >>>>
> >> >>>>
> >> >>>>
> >> >>>>
> >> >>>_______________________________________________
> >> >>>R-sig-finance at stat.math.ethz.ch mailing list
> >> >>>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >> >>>
> >> >>>
> >> >>>
> >> >>
> >> >>
> >> >
> >> >       [[alternative HTML version deleted]]
> >> >
> >> >_______________________________________________
> >> >R-sig-finance at stat.math.ethz.ch mailing list
> >> >https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >> >
> >> >
> >> >
> >>
> >>
> >
> >	[[alternative HTML version deleted]]
> >
> >_______________________________________________
> >R-sig-finance at stat.math.ethz.ch mailing list
> >https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >
> >
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance


From Bernhard_Pfaff at fra.invesco.com  Wed Feb  8 14:10:22 2006
From: Bernhard_Pfaff at fra.invesco.com (Pfaff, Bernhard Dr.)
Date: Wed, 8 Feb 2006 13:10:22 -0000 
Subject: [R-sig-finance] [R] Bloomberg Data Import to R
Message-ID: <25D1C2585277D311B9A20000F6CCC71B077C03FE@DEFRAEX02>

Hello Sumanto,

your question might be more appropriately been posted to the R-sig-finance
list:

r-sig-finance at stat.math.ethz.ch (I have cc'ed this mail to this list).

To my knowledge neither a function nor a CRAN-package does exist. However,
on the last useR! conference Dirk Edelbuettel presented a proprietary
package that utilised the C API of Bloomberg (type WAPI <GO> on a Bloomberg
terminal). I am not sure whether Dirk is nowadays inclined or allowed by his
employee to share this package.

As an alternative, you could download data from Bloomberg into Excel, first
(assuming that you are working in a Windows environment) and then load it
into R via RODBC, for example.

Cheers,
Bernhard



Hi R-Experts,

 

Can anyone tell me how Bloomberg data can be directly downloaded to R?
Is there any package?

Sumanta Basak.


----------------------------------------------------------------------------
---------------------------------------
This e-mail may contain confidential and/or privileged infor...{{dropped}}

______________________________________________
R-help at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide!
http://www.R-project.org/posting-guide.html
*****************************************************************
Confidentiality Note: The information contained in this mess...{{dropped}}


From Robert at sanctumfi.com  Wed Feb  8 15:23:16 2006
From: Robert at sanctumfi.com (Robert Sams)
Date: Wed, 8 Feb 2006 14:23:16 -0000
Subject: [R-sig-finance] [R] Bloomberg Data Import to R
Message-ID: <E585EABA11227445B918BFB74C1A4D363B9E8F@sanctum01.sanctumfi.com>

Hi Sumanta,

I've written such a package for my own use using Bloomberg's COM interface, the RDCOM package, and some sample code in the R-sig-finance archive. Dirk's approach using the C API is cleaner and platform independent, but the COM route is probably easier to implement. Bernhard's approach is the easiest, as no package writing or even programming is needed, but the whole excel detour is rather pointless unless you're looking at a one-off task that can't justify the programming time required by the first two solutions.

Don't know whether Dirk has distributed his package (never seen it myself), but I'd be happy to throw mine on CRAN if there were people willing to hack it. Otherwise, I can't be bothered to research possible legal implications of Bloomberg's data license, etc and maintain a project if the user base contained no other developers. Suspect that others who have rolled their own solutions have come to the same conclusion..?

By the way, this question has been asked (and answered) before. 

Cheers,
Robert




Robert Sams

SANCTUM FI LLP
Charles House
18B Charles Street
Mayfair
London W1J 5DU
Tel: +44 (0) 207 667 6360
Dir: +44 (0) 207 667 6363
fax: +44 (0) 207 667 6460
email: robert at sanctumfi.com

Authorised and Regulated by the FSA. 


> -----Original Message-----
> From: Pfaff, Bernhard Dr. [mailto:Bernhard_Pfaff at fra.invesco.com]
> Sent: Wednesday, February 08, 2006 1:10 PM
> To: 'Sumanta Bask'; r-help at stat.math.ethz.ch
> Cc: 'r-sig-finance at stat.math.ethz.ch'
> Subject: Re: [R-sig-finance] [R] Bloomberg Data Import to R
> 
> 
> Hello Sumanto,
> 
> your question might be more appropriately been posted to the 
> R-sig-finance
> list:
> 
> r-sig-finance at stat.math.ethz.ch (I have cc'ed this mail to this list).
> 
> To my knowledge neither a function nor a CRAN-package does 
> exist. However,
> on the last useR! conference Dirk Edelbuettel presented a proprietary
> package that utilised the C API of Bloomberg (type WAPI <GO> 
> on a Bloomberg
> terminal). I am not sure whether Dirk is nowadays inclined or 
> allowed by his
> employee to share this package.
> 
> As an alternative, you could download data from Bloomberg 
> into Excel, first
> (assuming that you are working in a Windows environment) and 
> then load it
> into R via RODBC, for example.
> 
> Cheers,
> Bernhard
> 
> 
> 
> Hi R-Experts,
> 
>  
> 
> Can anyone tell me how Bloomberg data can be directly downloaded to R?
> Is there any package?
> 
> Sumanta Basak.
> 
> 
> --------------------------------------------------------------
> --------------
> ---------------------------------------
> This e-mail may contain confidential and/or privileged 
> infor...{{dropped}}
> 
> ______________________________________________
> R-help at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide!
> http://www.R-project.org/posting-guide.html
> *****************************************************************
> Confidentiality Note: The information contained in this 
> mess...{{dropped}}
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From vivek.satsangi at gmail.com  Wed Feb  8 15:22:29 2006
From: vivek.satsangi at gmail.com (Vivek Satsangi)
Date: Wed, 8 Feb 2006 09:22:29 -0500
Subject: [R-sig-finance] Brush-style gradient maximization?
Message-ID: <bcb171920602080622n721ba149i58b8cbd9573e74be@mail.gmail.com>

Hello,

Has anyone on this list done a Brush/Shock (1995) style gradient
maximization portfolio construction  thing in R or Splus? If someone
has the beginings of something, this might be something I am
interested in helping implement....

Herr Doktor W?rtz? Is this something that interests you? The
omniscient Mr. Krishna Kumar?
Dr. Graves?

[1995] Brush, John S. and Schock, V., JPM, Summer 1995, pp 89 to 98


p.s. Is the correct spelling of Dr. Diethelm's last name "Wuertz"
instead? Or is the 'e' added in in places where the umlaut cannot be
reproduced? I have seen both spellings, and don't want to rudely
incorect / disrespectful of such a great scholar.

--
-- Vivek Satsangi
Student, Rochester, NY USA

"Maybe in order to understand mankind, we have to look at the word
itself. Mankind. Basically, it's made up of two separate words --
'mank' and 'ind.' What do these words mean? It's a mystery, and that's
why so is mankind."
-Deep Thoughts by Jack Handey


From edd at debian.org  Wed Feb  8 15:42:19 2006
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 8 Feb 2006 08:42:19 -0600
Subject: [R-sig-finance] [R] Bloomberg Data Import to R
In-Reply-To: <E585EABA11227445B918BFB74C1A4D363B9E8F@sanctum01.sanctumfi.com>
References: <E585EABA11227445B918BFB74C1A4D363B9E8F@sanctum01.sanctumfi.com>
Message-ID: <17386.843.815650.998070@basebud.nulle.part>


On 8 February 2006 at 14:23, Robert Sams wrote:
| I've written such a package for my own use using Bloomberg's COM interface,
| the RDCOM package, and some sample code in the R-sig-finance
| archive. Dirk's approach using the C API is cleaner and platform
| independent,

Barely platform independent. Bloomberg supports only Windows and Solaris, and
I'd be surprised if there even were a dozen installations using Solaris ...
So matter-of-factishly, it's Windoze-only. Just like the COM solution.

| but the COM route is probably easier to implement. Bernhard's
| approach is the easiest, as no package writing or even programming is
| needed, but the whole excel detour is rather pointless unless you're
| looking at a one-off task that can't justify the programming time required
| by the first two solutions.
| 
| Don't know whether Dirk has distributed his package (never seen it myself),

As I must have explained a dozen times, I wrote that on company time for a
place where I no longer work. It is their property, not mine, so it's not my
call to release it. Practically speaking, it's dead as I am unaware of anyone
using it there.

| but I'd be happy to throw mine on CRAN if there were people willing to hack
| it. 

I'd support that idea! I don't do COM myself. That may change one day, but by
being 'in the open', the package has much better chances of getting
enhancements and fixes.

| Otherwise, I can't be bothered to research possible legal implications
| of Bloomberg's data license, etc and maintain a project if the user base

AFAIK not an issue. Bloomberg doesn't care how you slice, dice or analyse
your data --- as long as you don't distribute it. You must keep _the data_ on
the machine with the Bloomberg installation. So no restrictions on your R
code. At the end of the day, you could argue that it makes Bloomberg's
subscription more appealing.

| contained no other developers. Suspect that others who have rolled their
| own solutions have come to the same conclusion..? 
| 
| By the way, this question has been asked (and answered) before. 

Yes, and we all have long given up hope that newbies knew what a list
archive is. Or even a search engine ...

Dirk

PS I was delighted to see Bernhard prove once again that even native speakers
   have a darn high probability of spelling my name wrong :)

-- 
Hell, there are no rules here - we're trying to accomplish something. 
                                                  -- Thomas A. Edison


From bruno at kodero.com  Wed Feb  8 15:49:52 2006
From: bruno at kodero.com (Bruno J White)
Date: Wed, 08 Feb 2006 08:49:52 -0600
Subject: [R-sig-finance] [R] Bloomberg Data Import to R
In-Reply-To: <E585EABA11227445B918BFB74C1A4D363B9E8F@sanctum01.sanctumfi.com>
References: <E585EABA11227445B918BFB74C1A4D363B9E8F@sanctum01.sanctumfi.com>
Message-ID: <1139410192.1742.16.camel@neumann.cme.vanburenadvisors.com>

Hi Robert,

I can verify that is it true that there are MANY people with their own
solutions to getting bloomberg data into R. I have worked on one such
system. But all the ones I know of are "proprietary" solutions that
can't be released to the public.

I think it would be worth understanding if there is any legal
implications, because I think a public code base for this would have "a
lot" of people WANTING to hack it. For one, I would love to assist in
development. The catch would be, will they be allowed to by their own
contractual agreements (if they have some). And if they were, do they
have access to a bloomberg terminal that can be use for debugging and
testing.

Regards,
Bruno


On Wed, 2006-02-08 at 14:23 +0000, Robert Sams wrote:
> Hi Sumanta,
> 
> I've written such a package for my own use using Bloomberg's COM interface, the RDCOM package, and some sample code in the R-sig-finance archive. Dirk's approach using the C API is cleaner and platform independent, but the COM route is probably easier to implement. Bernhard's approach is the easiest, as no package writing or even programming is needed, but the whole excel detour is rather pointless unless you're looking at a one-off task that can't justify the programming time required by the first two solutions.
> 
> Don't know whether Dirk has distributed his package (never seen it myself), but I'd be happy to throw mine on CRAN if there were people willing to hack it. Otherwise, I can't be bothered to research possible legal implications of Bloomberg's data license, etc and maintain a project if the user base contained no other developers. Suspect that others who have rolled their own solutions have come to the same conclusion..?
> 
> By the way, this question has been asked (and answered) before. 
> 
> Cheers,
> Robert
> 
> 
> 
> 
> Robert Sams
> 
> SANCTUM FI LLP
> Charles House
> 18B Charles Street
> Mayfair
> London W1J 5DU
> Tel: +44 (0) 207 667 6360
> Dir: +44 (0) 207 667 6363
> fax: +44 (0) 207 667 6460
> email: robert at sanctumfi.com
> 
> Authorised and Regulated by the FSA. 
> 
> 
> > -----Original Message-----
> > From: Pfaff, Bernhard Dr. [mailto:Bernhard_Pfaff at fra.invesco.com]
> > Sent: Wednesday, February 08, 2006 1:10 PM
> > To: 'Sumanta Bask'; r-help at stat.math.ethz.ch
> > Cc: 'r-sig-finance at stat.math.ethz.ch'
> > Subject: Re: [R-sig-finance] [R] Bloomberg Data Import to R
> > 
> > 
> > Hello Sumanto,
> > 
> > your question might be more appropriately been posted to the 
> > R-sig-finance
> > list:
> > 
> > r-sig-finance at stat.math.ethz.ch (I have cc'ed this mail to this list).
> > 
> > To my knowledge neither a function nor a CRAN-package does 
> > exist. However,
> > on the last useR! conference Dirk Edelbuettel presented a proprietary
> > package that utilised the C API of Bloomberg (type WAPI <GO> 
> > on a Bloomberg
> > terminal). I am not sure whether Dirk is nowadays inclined or 
> > allowed by his
> > employee to share this package.
> > 
> > As an alternative, you could download data from Bloomberg 
> > into Excel, first
> > (assuming that you are working in a Windows environment) and 
> > then load it
> > into R via RODBC, for example.
> > 
> > Cheers,
> > Bernhard
> > 
> > 
> > 
> > Hi R-Experts,
> > 
> >  
> > 
> > Can anyone tell me how Bloomberg data can be directly downloaded to R?
> > Is there any package?
> > 
> > Sumanta Basak.
> > 
> > 
> > --------------------------------------------------------------
> > --------------
> > ---------------------------------------
> > This e-mail may contain confidential and/or privileged 
> > infor...{{dropped}}
> > 
> > ______________________________________________
> > R-help at stat.math.ethz.ch mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide!
> > http://www.R-project.org/posting-guide.html
> > *****************************************************************
> > Confidentiality Note: The information contained in this 
> > mess...{{dropped}}
> > 
> > _______________________________________________
> > R-sig-finance at stat.math.ethz.ch mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance

-- 
Bruno J White <bruno at kodero.com>
Kodero Corporation


From davidr at rhotrading.com  Wed Feb  8 16:34:12 2006
From: davidr at rhotrading.com (davidr@rhotrading.com)
Date: Wed, 8 Feb 2006 09:34:12 -0600
Subject: [R-sig-finance] [R] Bloomberg Data Import to R
Message-ID: <14814D23B3BE2C41AFA18A0B1961F17204FC71@rhosvr02.rhotrading.com>

I'd be happy to participate, at least as a tester and debugger.
My skill with R programming is only moderate, so I would prefer to leave
that to others who are better at it. I have posted code snippets to the
list, but I haven't moved much beyond that for my own work.
I do have access to Bloomberg, and I agree that there should be no
licensing issues as long as the (raw) data is not redistributed.

David L. Reiner
 

> -----Original Message-----
> From: r-sig-finance-bounces at stat.math.ethz.ch [mailto:r-sig-finance-
> bounces at stat.math.ethz.ch] On Behalf Of Bruno J White
> Sent: Wednesday, February 08, 2006 8:50 AM
> To: Robert Sams
> Cc: r-sig-finance at stat.math.ethz.ch; Pfaff,Bernhard Dr.
> Subject: Re: [R-sig-finance] [R] Bloomberg Data Import to R
> 
> Hi Robert,
> 
> I can verify that is it true that there are MANY people with their own
> solutions to getting bloomberg data into R. I have worked on one such
> system. But all the ones I know of are "proprietary" solutions that
> can't be released to the public.
> 
> I think it would be worth understanding if there is any legal
> implications, because I think a public code base for this would have
"a
> lot" of people WANTING to hack it. For one, I would love to assist in
> development. The catch would be, will they be allowed to by their own
> contractual agreements (if they have some). And if they were, do they
> have access to a bloomberg terminal that can be use for debugging and
> testing.
> 
> Regards,
> Bruno
> 
> 
> On Wed, 2006-02-08 at 14:23 +0000, Robert Sams wrote:
> > Hi Sumanta,
> >
> > I've written such a package for my own use using Bloomberg's COM
> interface, the RDCOM package, and some sample code in the
R-sig-finance
> archive. Dirk's approach using the C API is cleaner and platform
> independent, but the COM route is probably easier to implement.
Bernhard's
> approach is the easiest, as no package writing or even programming is
> needed, but the whole excel detour is rather pointless unless you're
> looking at a one-off task that can't justify the programming time
required
> by the first two solutions.
> >
> > Don't know whether Dirk has distributed his package (never seen it
> myself), but I'd be happy to throw mine on CRAN if there were people
> willing to hack it. Otherwise, I can't be bothered to research
possible
> legal implications of Bloomberg's data license, etc and maintain a
project
> if the user base contained no other developers. Suspect that others
who
> have rolled their own solutions have come to the same conclusion..?
> >
> > By the way, this question has been asked (and answered) before.
> >
> > Cheers,
> > Robert
> >
> >
> >
> >
> > Robert Sams
> >
> > SANCTUM FI LLP
> > Charles House
> > 18B Charles Street
> > Mayfair
> > London W1J 5DU
> > Tel: +44 (0) 207 667 6360
> > Dir: +44 (0) 207 667 6363
> > fax: +44 (0) 207 667 6460
> > email: robert at sanctumfi.com
> >
> > Authorised and Regulated by the FSA.
> >
> >
> > > -----Original Message-----
> > > From: Pfaff, Bernhard Dr. [mailto:Bernhard_Pfaff at fra.invesco.com]
> > > Sent: Wednesday, February 08, 2006 1:10 PM
> > > To: 'Sumanta Bask'; r-help at stat.math.ethz.ch
> > > Cc: 'r-sig-finance at stat.math.ethz.ch'
> > > Subject: Re: [R-sig-finance] [R] Bloomberg Data Import to R
> > >
> > >
> > > Hello Sumanto,
> > >
> > > your question might be more appropriately been posted to the
> > > R-sig-finance
> > > list:
> > >
> > > r-sig-finance at stat.math.ethz.ch (I have cc'ed this mail to this
list).
> > >
> > > To my knowledge neither a function nor a CRAN-package does
> > > exist. However,
> > > on the last useR! conference Dirk Edelbuettel presented a
proprietary
> > > package that utilised the C API of Bloomberg (type WAPI <GO>
> > > on a Bloomberg
> > > terminal). I am not sure whether Dirk is nowadays inclined or
> > > allowed by his
> > > employee to share this package.
> > >
> > > As an alternative, you could download data from Bloomberg
> > > into Excel, first
> > > (assuming that you are working in a Windows environment) and
> > > then load it
> > > into R via RODBC, for example.
> > >
> > > Cheers,
> > > Bernhard
> > >
> > >
> > >
> > > Hi R-Experts,
> > >
> > >
> > >
> > > Can anyone tell me how Bloomberg data can be directly downloaded
to R?
> > > Is there any package?
> > >
> > > Sumanta Basak.
> > >
> > >
> > > --------------------------------------------------------------
> > > --------------
> > > ---------------------------------------
> > > This e-mail may contain confidential and/or privileged
> > > infor...{{dropped}}
> > >
> > > ______________________________________________
> > > R-help at stat.math.ethz.ch mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide!
> > > http://www.R-project.org/posting-guide.html
> > > *****************************************************************
> > > Confidentiality Note: The information contained in this
> > > mess...{{dropped}}
> > >
> > > _______________________________________________
> > > R-sig-finance at stat.math.ethz.ch mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > >
> >
> > _______________________________________________
> > R-sig-finance at stat.math.ethz.ch mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> 
> --
> Bruno J White <bruno at kodero.com>
> Kodero Corporation
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance


From kriskumar at earthlink.net  Thu Feb  9 03:57:56 2006
From: kriskumar at earthlink.net (Krishna Kumar)
Date: Wed, 08 Feb 2006 21:57:56 -0500
Subject: [R-sig-finance] [R] Bloomberg Data Import to R
In-Reply-To: <14814D23B3BE2C41AFA18A0B1961F17204FC71@rhosvr02.rhotrading.com>
References: <14814D23B3BE2C41AFA18A0B1961F17204FC71@rhosvr02.rhotrading.com>
Message-ID: <43EAAFB4.4010903@earthlink.net>

I can do some testing on the terminals here.. this could  potentially be 
a very useful tool.

Kris


davidr at rhotrading.com wrote:

>  
>
>>I think it would be worth understanding if there is any legal
>>implications, because I think a public code base for this would have
>>    
>>
>"a
>  
>
>>lot" of people WANTING to hack it. For one, I would love to assist in
>>development. The catch would be, will they be allowed to by their own
>>contractual agreements (if they have some). And if they were, do they
>>have access to a bloomberg terminal that can be use for debugging and
>>testing.
>>
>>Regards,
>>Bruno
>>
>>    
>>


From spencer.graves at pdf.com  Fri Feb 10 02:50:07 2006
From: spencer.graves at pdf.com (Spencer Graves)
Date: Thu, 09 Feb 2006 17:50:07 -0800
Subject: [R-sig-finance] stochastic dominance problem
In-Reply-To: <20060206041815.8211.qmail@web35714.mail.mud.yahoo.com>
References: <20060206041815.8211.qmail@web35714.mail.mud.yahoo.com>
Message-ID: <43EBF14F.5030506@pdf.com>

	  I just got one hit from RSiteSearch("stochastic dominance"), but that 
discussed some other kind of dominance.

	  If a function to check for that exists in R, it exists under some 
other name.  However, checking the definition (e.g. 
"http://cepa.newschool.edu/het/essays/uncert/increase.htm"), I think 
"stochastic dominance" is so specific it is likely to be of more 
theoretical than practical interest.  The conditions should be easy 
enough to check for theoretical distributions.  However, in real 
portfolio management, I doubt if stochastic dominance is of much 
practical value, because interest would primarily focus on a list of 
alternatives among which there exists no clear dominance for all 
possible utility functions.  Instead, people are most concerned with 
finding strategies that seem to be better for a given level of risk.

	  Are you familiar with Rmetrics (www.rmetrics.org)?  The "fPortfolio" 
and other packages associated with Rmetrics might interest you. 
Rmetrics is breathtaking in scope but difficult to get into.  If you are 
new to R but are intereseted in analyzing financial time series, I 
suggest you start with ch. 14 of Venables and Ripley (2002) Modern 
Applied Statistics with S, 4th ed. (Sprinter).  Next I recommend you 
work the vignettes in the zoo package.  From there, you could try many 
things, including the "dse" bundle and Rmetrics.  For a good reference 
on statistics in finance, I recommend Ruey Tsay (2005) Analysis of 
Financial Time Series, 2nd. ed. (Wiley).  It has only a little R, but 
the contents are, I think, quite important.

	  hope this helps.
	  spencer graves

hendry raharjo wrote:

> Hi,
>    
>   i have a problem quite similar to portfolio selection problem.
>    
>   i am trying to do a stochastic dominance test to rank these options using R,
>   the criteria is 'the-higher-the-better' since the random variable is 'profit':
>    
>   Alt A ~ Normal (mean=10, stDev=2)
>   Alt B ~ Normal (mean=8,stDev=4)
>   Alt C ~ Uniform (a=8,b=12)
>    
>   the question is to order these alternatives according to the stochastic 
dominance rules, say Second-order Stochastic Dominance and Third-order 
Stochastic
Dominance. Has anyone ever had this kind of problem and solved it using R?
>    
>   i am new in R as well as in finance field, i really appreciate your 
suggestion/ help with this problem.
>    
>   Thank you,
>   hendry
>   (i tried to ask to r-help list people, but it seems that i have an 
email sending problem since it fails)
> 
> 		
> ---------------------------------
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance


From atp at piskorski.com  Fri Feb 10 12:30:09 2006
From: atp at piskorski.com (Andrew Piskorski)
Date: Fri, 10 Feb 2006 06:30:09 -0500
Subject: [R-sig-finance] [R] Bloomberg Data Import to R
In-Reply-To: <17386.843.815650.998070@basebud.nulle.part>
References: <17386.843.815650.998070@basebud.nulle.part>
Message-ID: <20060210113009.GA19298@tehun.pair.com>

On Wed, Feb 08, 2006 at 08:42:19AM -0600, Dirk Eddelbuettel wrote:

> Barely platform independent. Bloomberg supports only Windows and Solaris, and
> I'd be surprised if there even were a dozen installations using Solaris ...

Last I heard, more than a year ago, Bloomberg was actively trying to
get users off Solaris, setting deadlines for when it would be
desupported, etc.  Bloomberg on Solaris may be gone completely by now,
I'm not sure.

> So matter-of-factishly, it's Windoze-only. Just like the COM solution.

Yep.  Of course, if Bloomberg were suddenly to decide to support their
Terminal on Linux or some other non-Windows operating system,
presumably they would continue to include the C API there as well.

Also, Bloomberg seems to regard their C API as legacy software.  I
assume they won't be adding much new to it, but that also means that
they're unlikely to change it enough to seriously break it's latent
cross-platform-ness, however much of that it really has.  :)

Presumably the Bloomberg Terminal codebase has been becoming more and
more MS Windows centric, though.  My vague understanding was that the
C API doesn't really need the Terminal to function, but it piggy backs
on the Terminal's authentication somehow.  They could stick in some
other sort of authentication if they really wanted to.

I could imagine them spinning off the C API codebase, enhancing it,
and then offering it as some other sort of product.  But then again,
although it's fast, the C API isn't terribly user friendly - even for
C programmers - so maybe their potential customers wouldn't be
interested anyway.

-- 
Andrew Piskorski <atp at piskorski.com>
http://www.piskorski.com/


From Robert at sanctumfi.com  Fri Feb 10 15:35:38 2006
From: Robert at sanctumfi.com (Robert Sams)
Date: Fri, 10 Feb 2006 14:35:38 -0000
Subject: [R-sig-finance] [R] Bloomberg Data Import to R
Message-ID: <E585EABA11227445B918BFB74C1A4D363B9E96@sanctum01.sanctumfi.com>

I'm a bit confused by the Windoze-only talk. Linux/686 (kernels 2.4 and 2.6) is supported by Bloomberg's Server API. See the docs on WAPI. Or am I missing something?

Btw.. my Bloomberg interface will be on CRAN shortly. I'll post something on this list when it is.

Cheers,
Robert

> 
> On Wed, Feb 08, 2006 at 08:42:19AM -0600, Dirk Eddelbuettel wrote:
> 
> > Barely platform independent. Bloomberg supports only 
> Windows and Solaris, and
> > I'd be surprised if there even were a dozen installations 
> using Solaris ...
> 
> Last I heard, more than a year ago, Bloomberg was actively trying to
> get users off Solaris, setting deadlines for when it would be
> desupported, etc.  Bloomberg on Solaris may be gone completely by now,
> I'm not sure.
> 

> > So matter-of-factishly, it's Windoze-only. Just like the 
> COM solution.
> 
> Yep.  Of course, if Bloomberg were suddenly to decide to support their
> Terminal on Linux or some other non-Windows operating system,
> presumably they would continue to include the C API there as well.
> Also, Bloomberg seems to regard their C API as legacy software.  I
> assume they won't be adding much new to it, but that also means that
> they're unlikely to change it enough to seriously break it's latent
> cross-platform-ness, however much of that it really has.  :)
> 
> Presumably the Bloomberg Terminal codebase has been becoming more and
> more MS Windows centric, though.  My vague understanding was that the
> C API doesn't really need the Terminal to function, but it piggy backs
> on the Terminal's authentication somehow.  They could stick in some
> other sort of authentication if they really wanted to.
> 
> I could imagine them spinning off the C API codebase, enhancing it,
> and then offering it as some other sort of product.  But then again,
> although it's fast, the C API isn't terribly user friendly - even for
> C programmers - so maybe their potential customers wouldn't be
> interested anyway.
> 
> -- 
> Andrew Piskorski <atp at piskorski.com>
> http://www.piskorski.com/
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From atp at piskorski.com  Fri Feb 10 16:01:19 2006
From: atp at piskorski.com (Andrew Piskorski)
Date: Fri, 10 Feb 2006 10:01:19 -0500
Subject: [R-sig-finance] [R] Bloomberg Data Import to R
In-Reply-To: <E585EABA11227445B918BFB74C1A4D363B9E96@sanctum01.sanctumfi.com>
References: <E585EABA11227445B918BFB74C1A4D363B9E96@sanctum01.sanctumfi.com>
Message-ID: <20060210150119.GA94667@tehun.pair.com>

On Fri, Feb 10, 2006 at 02:35:38PM -0000, Robert Sams wrote:

> I'm a bit confused by the Windoze-only talk. Linux/686 (kernels 2.4
> and 2.6) is supported by Bloomberg's Server API. See the docs on
> WAPI. Or am I missing something?

No one has been talking about Bloomberg's "Server API".  That must be
some separate and newer product; I don't know anything about it.
People were discussing the C API and COM API, both of which come with
the Bloomberg Terminal.

-- 
Andrew Piskorski <atp at piskorski.com>
http://www.piskorski.com/


From Robert.McGehee at geodecapital.com  Fri Feb 10 23:04:03 2006
From: Robert.McGehee at geodecapital.com (McGehee, Robert)
Date: Fri, 10 Feb 2006 17:04:03 -0500
Subject: [R-sig-finance] [R] Bloomberg Data Import to R
Message-ID: <67DCA285A2D7754280D3B8E88EB548020F8EF1C8@MSGBOSCLB2WIN.DMN1.FMR.COM>

We have implemented interfaces to both the C API and the .NET API.
However, it was my understanding that Bloomberg was deprecating the C
API entirely in favor of the .NET API, so my company has been moving our
data pulls to the new API system. If this is the case, it may be a
wrinkle for a package based on the C API.

FYI: As a Bloomberg terminal is required to pull the data, we have
gotten around the Linux problem by setting up an Apache server on a
Windows box with a Perl or C# wrapper that connects to Bloomberg via the
respective API. We can then pull the data in from any computer by just
querying the Apache server. Seems to work quite well. Of course, someone
still needs to log into the Bloomberg each morning.

--Robert

-----Original Message-----
From: r-sig-finance-bounces at stat.math.ethz.ch
[mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of Andrew
Piskorski
Sent: Friday, February 10, 2006 6:30 AM
To: r-sig-finance at stat.math.ethz.ch
Subject: Re: [R-sig-finance] [R] Bloomberg Data Import to R

On Wed, Feb 08, 2006 at 08:42:19AM -0600, Dirk Eddelbuettel wrote:

> Barely platform independent. Bloomberg supports only Windows and
Solaris, and
> I'd be surprised if there even were a dozen installations using
Solaris ...

Last I heard, more than a year ago, Bloomberg was actively trying to
get users off Solaris, setting deadlines for when it would be
desupported, etc.  Bloomberg on Solaris may be gone completely by now,
I'm not sure.

> So matter-of-factishly, it's Windoze-only. Just like the COM solution.

Yep.  Of course, if Bloomberg were suddenly to decide to support their
Terminal on Linux or some other non-Windows operating system,
presumably they would continue to include the C API there as well.

Also, Bloomberg seems to regard their C API as legacy software.  I
assume they won't be adding much new to it, but that also means that
they're unlikely to change it enough to seriously break it's latent
cross-platform-ness, however much of that it really has.  :)

Presumably the Bloomberg Terminal codebase has been becoming more and
more MS Windows centric, though.  My vague understanding was that the
C API doesn't really need the Terminal to function, but it piggy backs
on the Terminal's authentication somehow.  They could stick in some
other sort of authentication if they really wanted to.

I could imagine them spinning off the C API codebase, enhancing it,
and then offering it as some other sort of product.  But then again,
although it's fast, the C API isn't terribly user friendly - even for
C programmers - so maybe their potential customers wouldn't be
interested anyway.

-- 
Andrew Piskorski <atp at piskorski.com>
http://www.piskorski.com/

_______________________________________________
R-sig-finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance


From patrick at burns-stat.com  Sat Feb 11 14:06:44 2006
From: patrick at burns-stat.com (Patrick Burns)
Date: Sat, 11 Feb 2006 13:06:44 +0000
Subject: [R-sig-finance] backtesting trading strategies
Message-ID: <43EDE164.4040609@burns-stat.com>

An R package is available containing some of the code
that was used in the computations of the working paper
described below.  The functions should be of interest
as examples rather than as something to use out of the
box.

The package can be installed with the command:
install.packages('evalstrat', 
repos='http://www.burns-stat.com/pages/Freecode')

On Windows it should work on version 2.1.x, 2.2.x and
2.3.x.  If you are on a version older than that, it's time to
update anyway.

In the working papers section of the Burns Statistics website is:

          Random Portfolios for Evaluating Trading Strategies

Abstract: Random portfolios can provide a statistical test that a
trading strategy performs better than chance.  Each run of the
strategy is compared to a number of matching random runs that
are known to have zero skill.  Importantly, this type of backtest
shows periods of time when the strategy works and when it doesn't.
Live portfolios can be monitored in this way as well.  This allows
informed decisions -- such as changes in leverage -- to be made
in real-time.


Patrick Burns
patrick at burns-stat.com
+44 (0)20 8525 0696
http://www.burns-stat.com


From roger.bos at gmail.com  Mon Feb 13 17:13:52 2006
From: roger.bos at gmail.com (roger bos)
Date: Mon, 13 Feb 2006 11:13:52 -0500
Subject: [R-sig-finance] backtesting trading strategies
In-Reply-To: <43EDE164.4040609@burns-stat.com>
References: <43EDE164.4040609@burns-stat.com>
Message-ID: <1db726800602130813i12661eaeg240c324eeda0d00d@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060213/f1d5a290/attachment.pl

From Robert at sanctumfi.com  Mon Feb 13 17:20:15 2006
From: Robert at sanctumfi.com (Robert Sams)
Date: Mon, 13 Feb 2006 16:20:15 -0000
Subject: [R-sig-finance] [R] Bloomberg Data Import to R
Message-ID: <E585EABA11227445B918BFB74C1A4D363B9E98@sanctum01.sanctumfi.com>

My package RBloomberg (v0.1-7) is now on CRAN. 

RBloomberg can make the following types of data requests to the Bloomberg:
	1. real-time snapshots
	2. historical end-of-day
	3. historical intraday bars
	4. historical intraday tick-by-tick
All calls are made via a single user function blpGetData. For example:
	conn <- blpConnect(iface="COM")
	## Historical 
	blpGetData(conn, "ED1 Comdty", "PX_LAST", start=chron("1/1/06"), end=chron("1/31/06"))
	## Intraday bars (10min intervals)
	blpGetData(conn, "ED1 Comdty", c("BID","ASK"), start=chron("1/31/06", times="16:00:00"), 
	end=chron("1/31/06", times="17:00:00"), barfields="OPEN", barsize=10)

The design goal is an intuitive R user interface that is abstracted from the details of the particular Bloomberg interface used. Bloomberg presently offers three interfaces: C, .NET and COM. All three are implemented as a desktop product and (since late 2005) a server product that now supports Linux on Intel hardware. blpGetData is a generic and a method will eventually exist for each Bloomberg interface. Currently, only the desktop COM interface is supported.

Please use it, hack it and give me your feedback. 

Cheers,
Robert


> -----Original Message-----
> From: McGehee, Robert [mailto:Robert.McGehee at geodecapital.com]
> Sent: Friday, February 10, 2006 10:04 PM
> To: Andrew Piskorski; r-sig-finance at stat.math.ethz.ch
> Subject: Re: [R-sig-finance] [R] Bloomberg Data Import to R
> 
> 
> We have implemented interfaces to both the C API and the .NET API.
> However, it was my understanding that Bloomberg was deprecating the C
> API entirely in favor of the .NET API, so my company has been 
> moving our
> data pulls to the new API system. If this is the case, it may be a
> wrinkle for a package based on the C API.
> 
> FYI: As a Bloomberg terminal is required to pull the data, we have
> gotten around the Linux problem by setting up an Apache server on a
> Windows box with a Perl or C# wrapper that connects to 
> Bloomberg via the
> respective API. We can then pull the data in from any computer by just
> querying the Apache server. Seems to work quite well. Of 
> course, someone
> still needs to log into the Bloomberg each morning.
> 
> --Robert
> 
> -----Original Message-----
> From: r-sig-finance-bounces at stat.math.ethz.ch
> [mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of Andrew
> Piskorski
> Sent: Friday, February 10, 2006 6:30 AM
> To: r-sig-finance at stat.math.ethz.ch
> Subject: Re: [R-sig-finance] [R] Bloomberg Data Import to R
> 
> On Wed, Feb 08, 2006 at 08:42:19AM -0600, Dirk Eddelbuettel wrote:
> 
> > Barely platform independent. Bloomberg supports only Windows and
> Solaris, and
> > I'd be surprised if there even were a dozen installations using
> Solaris ...
> 
> Last I heard, more than a year ago, Bloomberg was actively trying to
> get users off Solaris, setting deadlines for when it would be
> desupported, etc.  Bloomberg on Solaris may be gone completely by now,
> I'm not sure.
> 
> > So matter-of-factishly, it's Windoze-only. Just like the 
> COM solution.
> 
> Yep.  Of course, if Bloomberg were suddenly to decide to support their
> Terminal on Linux or some other non-Windows operating system,
> presumably they would continue to include the C API there as well.
> 
> Also, Bloomberg seems to regard their C API as legacy software.  I
> assume they won't be adding much new to it, but that also means that
> they're unlikely to change it enough to seriously break it's latent
> cross-platform-ness, however much of that it really has.  :)
> 
> Presumably the Bloomberg Terminal codebase has been becoming more and
> more MS Windows centric, though.  My vague understanding was that the
> C API doesn't really need the Terminal to function, but it piggy backs
> on the Terminal's authentication somehow.  They could stick in some
> other sort of authentication if they really wanted to.
> 
> I could imagine them spinning off the C API codebase, enhancing it,
> and then offering it as some other sort of product.  But then again,
> although it's fast, the C API isn't terribly user friendly - even for
> C programmers - so maybe their potential customers wouldn't be
> interested anyway.
> 
> -- 
> Andrew Piskorski <atp at piskorski.com>
> http://www.piskorski.com/
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From patrick at burns-stat.com  Mon Feb 13 18:21:11 2006
From: patrick at burns-stat.com (Patrick Burns)
Date: Mon, 13 Feb 2006 17:21:11 +0000
Subject: [R-sig-finance] backtesting trading strategies
In-Reply-To: <1db726800602130813i12661eaeg240c324eeda0d00d@mail.gmail.com>
References: <43EDE164.4040609@burns-stat.com>
	<1db726800602130813i12661eaeg240c324eeda0d00d@mail.gmail.com>
Message-ID: <43F0C007.8050504@burns-stat.com>

Yes, POP is required to run the backtesting functions
as written.  That is one of a few reasons that people
generally need to modify the code for their own uses.

However, I'm not averse to giving out demos of POP
for people to play with it.  I'm especially lenient to
anyone doing research on random portfolios (or portfolio
optimization).

Pat

roger bos wrote:

> Patrick,
>  
> Thanks for the contribution.  I was intrigued by the idea, but I 
> thought I would need POP to run the code?  I thought POP was used to 
> create the random portfolios.  Is POP not necessary, or does it come 
> with a limited-version of POP.
>  
> Thanks,
>  
> Roger
>
>  
> On 2/11/06, *Patrick Burns* <patrick at burns-stat.com 
> <mailto:patrick at burns-stat.com>> wrote:
>
>     An R package is available containing some of the code
>     that was used in the computations of the working paper
>     described below.  The functions should be of interest
>     as examples rather than as something to use out of the
>     box.
>
>     The package can be installed with the command:
>     install.packages('evalstrat',
>     repos=' http://www.burns-stat.com/pages/Freecode'
>     <http://www.burns-stat.com/pages/Freecode%27>)
>
>     On Windows it should work on version 2.1.x, 2.2.x and
>     2.3.x.  If you are on a version older than that, it's time to
>     update anyway.
>
>     In the working papers section of the Burns Statistics website is:
>
>              Random Portfolios for Evaluating Trading Strategies
>
>     Abstract: Random portfolios can provide a statistical test that a
>     trading strategy performs better than chance.  Each run of the
>     strategy is compared to a number of matching random runs that
>     are known to have zero skill.  Importantly, this type of backtest
>     shows periods of time when the strategy works and when it doesn't.
>     Live portfolios can be monitored in this way as well.  This allows
>     informed decisions -- such as changes in leverage -- to be made
>     in real-time.
>
>
>     Patrick Burns
>     patrick at burns-stat.com <mailto:patrick at burns-stat.com>
>     +44 (0)20 8525 0696
>     http://www.burns-stat.com
>
>     _______________________________________________
>     R-sig-finance at stat.math.ethz.ch
>     <mailto:R-sig-finance at stat.math.ethz.ch> mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>


From Ricardo.Zambrano at corpbanca.cl  Thu Feb 16 15:56:55 2006
From: Ricardo.Zambrano at corpbanca.cl (Ricardo Zambrano Aguilera)
Date: Thu, 16 Feb 2006 11:56:55 -0300
Subject: [R-sig-finance] some doubts in garch models
Message-ID: <800F3C4ADCFCA643A919EF7C140A045A0831C83C@LLANQUIHUE.corpgroup.cl>

Hi everyone i need some help , and a have a few questions....


i?m looking for an alghoritm to simulate garch process, (especially garch(1,1))
somebody can help me??


i need to know if our software has the Lagrange multiplier test of Engle to test for conditional heteroscedasticity??
saludos
ricardo

i need to Extract Standardized Residuals from a garch model, to test all the properties...it?necessary or i commit a mistake, because it?s already standarized?? 


to get the data into (for analize...) garch process, always their Kurtosis must be larger than 3??

thxs


greetings 
ricardo zambrano (ricardo.zambrano at corpbanca.cl)


From john.marsland at mac.com  Thu Feb 16 17:14:44 2006
From: john.marsland at mac.com (John Marsland)
Date: Thu, 16 Feb 2006 16:14:44 +0000 (UTC)
Subject: [R-sig-finance] [R] Bloomberg Data Import to R
References: <E585EABA11227445B918BFB74C1A4D363B9E96@sanctum01.sanctumfi.com>
	<20060210150119.GA94667@tehun.pair.com>
Message-ID: <loom.20060216T165930-989@post.gmane.org>

Andrew Piskorski <atp <at> piskorski.com> writes:

> 
> On Fri, Feb 10, 2006 at 02:35:38PM -0000, Robert Sams wrote:
> 
> > I'm a bit confused by the Windoze-only talk. Linux/686 (kernels 2.4
> > and 2.6) is supported by Bloomberg's Server API. See the docs on
> > WAPI. Or am I missing something?
> 
> No one has been talking about Bloomberg's "Server API".  That must be
> some separate and newer product; I don't know anything about it.
> People were discussing the C API and COM API, both of which come with
> the Bloomberg Terminal.
> 

Quite right the Server API is a new product which allows you to do larger
downloads across a small network. Apparently it costs 4 extra Bloomberg licenses
and you still need a license for each client terminal as well! It works on
Windows and Linux/Solaris (I understand that it's only the Desktop API that's
being phased out on Solaris). But you will be able to feed data to unsupervised
quant models from it. Bloomberg are clamping down on users who do big downloads
and will be capping the useage of the Desktop API soon. Also if you are doing
anything with the data you get off Bloomberg other than using it on the PC that
has the Bloomberg license you are in breach of the data license and likely to
get in severe trouble if found out!

The Server API has a lot more security in it and you don't have to be a 'rocket
scientist' to guess that's coming to the Desktop API soon!

The good news is that I was at Bloomberg the other week and they mentioned a
native Java interface "by the end of the year". Java may well be the best way to
get real time data into R since you can let Java handle the event loop and call
back to your R functions just like in JGR/iPlots etc.


From john.marsland at mac.com  Thu Feb 16 17:30:39 2006
From: john.marsland at mac.com (John Marsland)
Date: Thu, 16 Feb 2006 16:30:39 +0000 (UTC)
Subject: [R-sig-finance] [R] Bloomberg Data Import to R
References: <E585EABA11227445B918BFB74C1A4D363B9E8F@sanctum01.sanctumfi.com>
	<17386.843.815650.998070@basebud.nulle.part>
Message-ID: <loom.20060216T172228-878@post.gmane.org>

Dirk Eddelbuettel <edd <at> debian.org> writes:
> | Don't know whether Dirk has distributed his package (never seen it myself),
> 
> As I must have explained a dozen times, I wrote that on company time for a
> place where I no longer work. It is their property, not mine, so it's not my
> call to release it. Practically speaking, it's dead as I am unaware of anyone
> using it there.

For others in the same position as Dirk with code that they would like to share
but can't, the GPL itself is quite helpful. My understanding (and I'm not a
lawyer) is that if you use GPLed code and make ammendments or include pieces of
that code, the resulting code is by definition GPL and cannot be licensed
differently with out the original copyrightholder's permission. You can choose
not to tell people or distribute it but it's still GPL.

So rather than writing a standalone package, you can contribute your code as
ammendments to someone else's package - without infringing your company's
intellectual property?

Anybody any thoughts on this?


From davidr at rhotrading.com  Thu Feb 16 18:23:30 2006
From: davidr at rhotrading.com (davidr@rhotrading.com)
Date: Thu, 16 Feb 2006 11:23:30 -0600
Subject: [R-sig-finance] [R] Bloomberg Data Import to R
Message-ID: <14814D23B3BE2C41AFA18A0B1961F17204FEF7@rhosvr02.rhotrading.com>

The data download limit will be 500,000 REQUESTS per day.
If you ask for 20 fields for 2000 instruments for 500 days in one
function call, that counts as one request.

If you perform any sort of transformation or analysis on the data,
it is permissible to distribute the results (at least within your firm.)

David L. Reiner
 

> -----Original Message-----
> From: r-sig-finance-bounces at stat.math.ethz.ch [mailto:r-sig-finance-
> bounces at stat.math.ethz.ch] On Behalf Of John Marsland
> Sent: Thursday, February 16, 2006 10:15 AM
> To: r-sig-finance at stat.math.ethz.ch
> Subject: Re: [R-sig-finance] [R] Bloomberg Data Import to R
> 
> Andrew Piskorski <atp <at> piskorski.com> writes:
> 
....
> .... Bloomberg are clamping down on users who do big
> downloads
> and will be capping the useage of the Desktop API soon. Also if you
are
> doing
> anything with the data you get off Bloomberg other than using it on
the PC
> that
> has the Bloomberg license you are in breach of the data license and
likely
> to
> get in severe trouble if found out!
....
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance


From john.marsland at mac.com  Thu Feb 16 19:19:00 2006
From: john.marsland at mac.com (John Marsland)
Date: Thu, 16 Feb 2006 18:19:00 +0000 (UTC)
Subject: [R-sig-finance] [R] Bloomberg Data Import to R
References: <14814D23B3BE2C41AFA18A0B1961F17204FEF7@rhosvr02.rhotrading.com>
Message-ID: <loom.20060216T185927-720@post.gmane.org>

 <davidr <at> rhotrading.com> writes:

> 
> The data download limit will be 500,000 REQUESTS per day.
> If you ask for 20 fields for 2000 instruments for 500 days in one
> function call, that counts as one request.
> 
> If you perform any sort of transformation or analysis on the data,
> it is permissible to distribute the results (at least within your firm.)
> 
> David L. Reiner
> 
No, that counts as 40,000 requests (the time series can be as long as you like)
daily limit 500,000 and monthly limit 30x 500,000. We have been told informally
these are coming down post Server API... it's quite a hard sell on quants!

And technically you can't distribute data or derived data without permission and
you can't put it in a database. Legally you could normally,  but you sign away
that right in the Data License

to quote:

Before you begin pulling Bloomberg data into your desktop application there are
a few extended limitations and rules that you should be aware:

There is a daily limit to the number of hits you can make to our data servers. A
"hit" is defined as one request for a singled security/field pairing. Therefore,
if you request static data for 5 fields and 10 securities, that will translate
into a total of 50 hits. This is currently being enforced. (500,000)

There is a limit to the number of unique securities you can monitor (3,500) at
any one time, where the number of fields is unlimited. This is currently being
enforced. 

There is a monthly limit to the number of hits you can make to our data servers.
This is currently being enforced. 

Each consumer of the API must be logged into his/her Bloomberg Professional
terminal. This is currently being enforced. 

also: 

SP agrees that SR may, solely for the purposes and on the conditions set forth
in this Addendum, receive the Information by means of a
Bloomberg Datafeed into Authorized Computers of SR. SR may use the Information,
Reformatted Information and Derived Information for SR's
internal business purposes, including without limitation, as input to computer
applications on Authorized Computers. In no event will SR permit the
Information, Reformatted Information or the Derived Information to be used in
any way not specifically authorized by SP. In no event will SR permit
the Information or the Reformatted Information to be moved, copied, broadcast,
reproduced, ported, or otherwise routed to or used in any fashion
on any non-Authorized Computer, printer, display, or application; provided,
however, that SR may store the Information, Reformatted Information
and Derived Information as set forth herein. SR will take all steps reasonably
necessary to ensure that SR's employees comply with all provisions
of the Agreement, including this Addendum, and will obtain from its employees
appropriate agreements regarding confidentiality and nondisclosure
to prevent unauthorized disclosure and misuse during and after the Term.


From fparlamis at mac.com  Thu Feb 16 20:12:14 2006
From: fparlamis at mac.com (Parlamis Franklin)
Date: Thu, 16 Feb 2006 09:12:14 -1000
Subject: [R-sig-finance] [R] Bloomberg Data Import to R
In-Reply-To: <loom.20060216T185927-720@post.gmane.org>
References: <14814D23B3BE2C41AFA18A0B1961F17204FEF7@rhosvr02.rhotrading.com>
	<loom.20060216T185927-720@post.gmane.org>
Message-ID: <0C17B54F-823D-4DCA-B91B-256CAA042241@mac.com>

Reuters, anyone?

Other than the fact that much my trading was done over Bloomberg  
Mail, which is ubiquitous and without which the financial world would  
collapse, I am not finding anything to recommend Bloomberg over the  
Reuters alternative.  In fact, based on mimimal research it appears  
that Reuters may present fewer platform dependencies and thus fewer  
hurdles for those of us in UNIX/Mac world.

Can anyone comment on Reuters in a positive or negative light?

FP

On Feb 16, 2006, at 8:19 AM, John Marsland wrote:

>  <davidr <at> rhotrading.com> writes:
>
>
>>
>> The data download limit will be 500,000 REQUESTS per day.
>> If you ask for 20 fields for 2000 instruments for 500 days in one
>> function call, that counts as one request.
>>
>> If you perform any sort of transformation or analysis on the data,
>> it is permissible to distribute the results (at least within your  
>> firm.)
>>
>> David L. Reiner
>>
>>
> No, that counts as 40,000 requests (the time series can be as long  
> as you like)
> daily limit 500,000 and monthly limit 30x 500,000. We have been  
> told informally
> these are coming down post Server API... it's quite a hard sell on  
> quants!
>
> And technically you can't distribute data or derived data without  
> permission and
> you can't put it in a database. Legally you could normally,  but  
> you sign away
> that right in the Data License
>
> to quote:
>
> Before you begin pulling Bloomberg data into your desktop  
> application there are
> a few extended limitations and rules that you should be aware:
>
> There is a daily limit to the number of hits you can make to our  
> data servers. A
> "hit" is defined as one request for a singled security/field  
> pairing. Therefore,
> if you request static data for 5 fields and 10 securities, that  
> will translate
> into a total of 50 hits. This is currently being enforced. (500,000)
>
> There is a limit to the number of unique securities you can monitor  
> (3,500) at
> any one time, where the number of fields is unlimited. This is  
> currently being
> enforced.
>
> There is a monthly limit to the number of hits you can make to our  
> data servers.
> This is currently being enforced.
>
> Each consumer of the API must be logged into his/her Bloomberg  
> Professional
> terminal. This is currently being enforced.
>
> also:
>
> SP agrees that SR may, solely for the purposes and on the  
> conditions set forth
> in this Addendum, receive the Information by means of a
> Bloomberg Datafeed into Authorized Computers of SR. SR may use the  
> Information,
> Reformatted Information and Derived Information for SR's
> internal business purposes, including without limitation, as input  
> to computer
> applications on Authorized Computers. In no event will SR permit the
> Information, Reformatted Information or the Derived Information to  
> be used in
> any way not specifically authorized by SP. In no event will SR permit
> the Information or the Reformatted Information to be moved, copied,  
> broadcast,
> reproduced, ported, or otherwise routed to or used in any fashion
> on any non-Authorized Computer, printer, display, or application;  
> provided,
> however, that SR may store the Information, Reformatted Information
> and Derived Information as set forth herein. SR will take all steps  
> reasonably
> necessary to ensure that SR's employees comply with all provisions
> of the Agreement, including this Addendum, and will obtain from its  
> employees
> appropriate agreements regarding confidentiality and nondisclosure
> to prevent unauthorized disclosure and misuse during and after the  
> Term.
>
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From patrick at burns-stat.com  Sat Feb 18 18:15:24 2006
From: patrick at burns-stat.com (Patrick Burns)
Date: Sat, 18 Feb 2006 17:15:24 +0000
Subject: [R-sig-finance] [R] question about GARCH - newbie question
In-Reply-To: <20060218155248.2054.qmail@web33202.mail.mud.yahoo.com>
References: <20060218155248.2054.qmail@web33202.mail.mud.yahoo.com>
Message-ID: <43F7562C.50402@burns-stat.com>

I have moved this from R-help to R-sig-finance.  And
I'll let someone else handle some of the R specific
questions.

An understanding of the meaning of the coefficients might
be attained by reading the help file.  If not, then a message
to the maintainer of the package with suggests on how to
make the help file more clear would be in order.

Another way of deciding (assuming you have market
return data) is to fit a garch(1,1) model and look at the
coefficients.  The one that is about .9 goes with the lagged
conditional variance, and the one that is about .1 goes
with the lagged squared residual.  By the way, this test is
only likely to work if you have enough data -- a dataset
with 1000 daily returns is a fairly small sample.

Regarding question 2 on model selection:  The not-very-good
common practice is to fit a garch(1,1) and forget about it.
A garch(2,2) model is probably a better choice given a limited
menu.  The adequacy of the model can be checked by using
a rank Ljung-Box test on the squared residuals from the model.
It is important to use the rank rather than the standard test
for this -- see the Burns Statistics working paper on the subject.


Patrick Burns
patrick at burns-stat.com
+44 (0)20 8525 0696
http://www.burns-stat.com
(home of S Poetry and "A Guide for the Unwilling S User")


oliver wee wrote:

>hello, 
>I have been looking at multiple websites on GARCH and
>have looked at some books and I am getting
>contradictory models given for GARCH.
>
>If I use the GARCH function to fit my model, I am
>confused as to what the coefficents given refer to.
>
>For example if I fit a GARCH(1,1) model, GARCH will
>give me three coefficients Ao, Ai, and Bi
>
>I know Ao refers to the constant of the model.
>But what about Ai and Bi?
>
>One website I looked at says the model for GARCH is:
>1) S^2t = Ao + Ai S^2 t-1 + Bi E^2 t-1 + Et
>(sigma squared sub t = a sub 0 + a sub 1 sigma squared
>sub t-1 + b sub 1 epsilon squared sub t-1 + epsilon
>sub t)
>while a book I was reading says the general model is
>2) S^2t = Ao + Ai Y^2 t-1 + Bi S^2 t-1
>(sigma squared sub t = a sub 0 + a sub 1 Y squared sub
>t-1 + b sub 1 sigma squared sub t-1).
>
>where Y refers to the data points of th time series
>S refers to the variance and E refers to the white
>noise component.
>
>I am very confused by this.
>
>Also, two other questions regarding GARCH,
>1) How exactly do I forecast future values of my
>fitted GARCH model using R and how do I graph them? 
>predict() won't work since it won't accept the n.ahead
>argument. (Assuming I already have fitted my original
>data set to an ARIMA model and have predicted future
>values using the predict() command).  
>
>2) This is not about R, but about GARCH in general. I
>just want to check if I understood GARCH correctly. 
>For example, I have already found an ARIMA model to
>fit my original data set. In order for me to find the
>appropriate GARCH model to fit my data set, I have to
>get the acf of the squared values of my original data
>set (assuming the data set is stationary, that is, its
>acf show no significant correlations at all lags, but
>the acf of its squared values is not stationary). Once
>I get the acf of the squared values, I just compare
>this to the acf of arma(p,q) models- similar to how I
>was able to find my fitted ARIMA model? Is this
>correct? Also, once I have found the appropriate GARCH
>model, I can use this model to predict BOTH the future
>values of the data set and its variance? and these 
>future values will be far different than the one given
>my my fitted ARIMA model?
>
>I am sorry for the abundance of questions and I am
>pretty sure some of these questions sound pretty dumb.
>Its that I'm doing my study of time series mostly
>through self-study and I got really confused about
>GARCH.
>
>Thank you very much for your help.
>
>______________________________________________
>R-help at stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide! http://www.R-project.org/posting-guide.html
>
>
>
>  
>


From heshriti at gmail.com  Sat Feb 18 21:15:34 2006
From: heshriti at gmail.com (Mahesh Krishnan)
Date: Sat, 18 Feb 2006 12:15:34 -0800
Subject: [R-sig-finance] Help with running R in auto-mode
Message-ID: <33f6aa6f0602181215h4b10c9e3j183c61bae9374179@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060218/411c8de0/attachment.pl

From edd at debian.org  Sat Feb 18 21:40:21 2006
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 18 Feb 2006 14:40:21 -0600
Subject: [R-sig-finance] Help with running R in auto-mode
In-Reply-To: <33f6aa6f0602181215h4b10c9e3j183c61bae9374179@mail.gmail.com>
References: <33f6aa6f0602181215h4b10c9e3j183c61bae9374179@mail.gmail.com>
Message-ID: <17399.34357.765364.294006@basebud.nulle.part>


Mahesh,

On 18 February 2006 at 12:15, Mahesh Krishnan wrote:
| I'd like help with daily scheduling task of  running an R  script (in
| windows) at a specific time every day.  I looked at several help files, but
| was unable to get this going.

With all due respect, this really has nothing to do with R and Finance, and
is therefore not relevant to the list.

Further, it would even be off-topic on r-help.
 
| Windows has a scheduling task feature available. So I can make it open the R
| interface at a specific time of the day. However, how do you make R run a
| one line script e.g : source(file.R).
| Conversely, if anyone has successfully been able to run a script from the
| command line interface of windows, would you please describe how to go about
| it. If you prefer we can take this discussion off-line.

Please see the R FAQ for the frequently asked question of how to run R in
BATCH mode. The R-Windows FAQ may have additional pointers.

In short, R CMD BATCH is your friend, but there are other ways too. Under
Cygwin etc you can also write shell scripts that pipe into R (so-called
"here" documents).

help.search("batch") would have pointed you there, RSiteSearch("R in batch
mode") also leads to numerous hits -- 460 when I just tried it.

Regards, Dirk

-- 
Hell, there are no rules here - we're trying to accomplish something. 
                                                  -- Thomas A. Edison


From spencer.graves at pdf.com  Mon Feb 20 06:09:06 2006
From: spencer.graves at pdf.com (Spencer Graves)
Date: Sun, 19 Feb 2006 21:09:06 -0800
Subject: [R-sig-finance] some doubts in garch models
In-Reply-To: <800F3C4ADCFCA643A919EF7C140A045A0831C83C@LLANQUIHUE.corpgroup.cl>
References: <800F3C4ADCFCA643A919EF7C140A045A0831C83C@LLANQUIHUE.corpgroup.cl>
Message-ID: <43F94EF2.7020409@pdf.com>

	  I just got 21 hits from RSiteSearch("GARCH", "function"), including 
the following:
	  http://finzi.psych.upenn.edu/R/library/fSeries/html/00Index.html

http://finzi.psych.upenn.edu/R/library/tseries/html/00Index.html

http://finzi.psych.upenn.edu/R/library/fOptions/html/00Index.html

	  Si esto no est? suficiently, favor de leer el posting guide! 
"www.R-project.org/posting-guide.html".  Cuando no puedo yo entender 
bien su pregunta, tengo dificutades en mis intentos para servirle.

	  Spencer Graves

Ricardo Zambrano Aguilera wrote:

> Hi everyone i need some help , and a have a few questions....
> 
> 
> i?m looking for an alghoritm to simulate garch process, (especially garch(1,1))
> somebody can help me??
> 
> 
> i need to know if our software has the Lagrange multiplier test of Engle to test for conditional heteroscedasticity??
> saludos
> ricardo
> 
> i need to Extract Standardized Residuals from a garch model, to test all the properties...it?necessary or i commit a mistake, because it?s already standarized?? 
> 
> 
> to get the data into (for analize...) garch process, always their Kurtosis must be larger than 3??
> 
> thxs
> 
> 
> greetings 
> ricardo zambrano (ricardo.zambrano at corpbanca.cl)
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance


From john.marsland at mac.com  Mon Feb 20 16:07:51 2006
From: john.marsland at mac.com (John Marsland)
Date: Mon, 20 Feb 2006 15:07:51 +0000 (UTC)
Subject: [R-sig-finance] Robust Optimisation - Evening Discussion
Message-ID: <loom.20060220T160651-545@post.gmane.org>

Any R Finance people based in London might be interested to come along to this
meeting on Thursday this week. There is a small charge for attendance, but
non-member of UKSIP/CFA Institute are most welcome.

Regards,

John Marsland

---------- Forwarded message ----------
From: uksipmail at uksip.org < uksipmail at uksip.org>
Date: Feb 20, 2006 12:44 PM
Subject: Robust Optimisation - Evening Discussion
To: john.marsland at cantab.net

- Hide quoted text -
Robust optimisation - greater certainty through uncertainty?
Quips:
The special interest group for quantitative investment professionals
Thursday 23 February 2006

Speakers: Daniel Mostovoy, Head of
Research at BITA Risk
Professor Steven Satchell, Trinity College,
Cambridge

Robust optimisation tackles the question of how to
achieve a stable portfolio output from unstable or uncertain inputs.
The traditional approach to optimisation - construction of an exact
optimal portfolio - expects that there are exact inputs and can be
highly sensitive to changes in them. Inputs include expected returns,
expected risk, expected transaction costs, risk aversion coefficient,
cost aversion coefficient. These inputs are all estimations and the
general target is to improve the degree of certainty around these so
as to produce a stable result. One approach proposed has been
re-sampling, but this can suffer from un-repeatable results. Another
approach is to accept that there is uncertainty on certain inputs, but
to include that in the optimisation, hence robust optimisation. Our
speakers will present on the premises, solutions and practical
applications of robust optimisation.

To register for this evening
discussion click
(http://www.uksip.org/calendar/event_details.cfm?iEventID=87) for an
application form.

UK Society of Investment Professionals
4th
Floor, 90 Basinghall Street, London EC2V 5AY
T el: 020 7776 7519
-----------------------------------------------
Notice: If received
in error, please notify sender. UKSIP does not waive confidentiality
or privilege, and use is prohibited.


From fparlamis at mac.com  Tue Feb 21 05:46:30 2006
From: fparlamis at mac.com (Parlamis Franklin)
Date: Mon, 20 Feb 2006 18:46:30 -1000
Subject: [R-sig-finance] Monthly Sequences
Message-ID: <BE352C68-999C-4C4E-B128-7D62DEC14685@mac.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060220/afe13bfb/attachment.pl

From fparlamis at mac.com  Tue Feb 21 08:12:51 2006
From: fparlamis at mac.com (Parlamis Franklin)
Date: Mon, 20 Feb 2006 21:12:51 -1000
Subject: [R-sig-finance] Monthly Sequences
In-Reply-To: <BE352C68-999C-4C4E-B128-7D62DEC14685@mac.com>
References: <BE352C68-999C-4C4E-B128-7D62DEC14685@mac.com>
Message-ID: <C33C7F7A-398F-4739-BFC8-18AB500399E2@mac.com>

So sorry folks.  Function I sent had an unintended linebreak in the  
middle of a "%%" operator, causing a syntax error.
Below please find the function without that error.

FP

------

seq.Date <-
##  enhances base R seq.Date function by allowing the
##  end.end convention for monthly and yearly sequences
function (from, to, by, length.out = NULL, along.with = NULL, end.end
= FALSE,
      ...)
{
      if (missing(from))
          stop("'from' must be specified")
      if (!inherits(from, "Date"))
          stop("'from' must be a Date object")
      if (length(as.Date(from)) != 1)
          stop("'from' must be of length 1")
      if (!missing(to)) {
          if (!inherits(to, "Date"))
              stop("'to' must be a Date object")
          if (length(as.Date(to)) != 1)
              stop("'to' must be of length 1")
      }
      if (!missing(along.with)) {
          length.out <- length(along.with)
      }
      else if (!missing(length.out)) {
          if (length(length.out) != 1)
              stop("'length.out' must be of length 1")
          length.out <- ceiling(length.out)
      }
      status <- c(!missing(to), !missing(by), !is.null(length.out))
      if (sum(status) != 2)
          stop("exactly two of 'to', 'by' and 'length.out' /
'along.with' must be specified")
      if (missing(by)) {
          from <- unclass(as.Date(from))
          to <- unclass(as.Date(to))
          res <- seq.default(from, to, length.out = length.out)
          return(structure(res, class = "Date"))
      }
      if (length(by) != 1)
          stop("'by' must be of length 1")
      valid <- 0
      if (inherits(by, "difftime")) {
          by <- switch(attr(by, "units"), secs = 1/86400, mins = 1/1440,
              hours = 1/24, days = 1, weeks = 7) * unclass(by)
      }
      else if (is.character(by)) {
          by2 <- strsplit(by, " ", fixed = TRUE)[[1]]
          if (length(by2) > 2 || length(by2) < 1)
              stop("invalid 'by' string")
          valid <- pmatch(by2[length(by2)], c("days", "weeks",
              "months", "years"))
          if (is.na(valid))
              stop("invalid string for 'by'")
          if (valid <= 2) {
              by <- c(1, 7)[valid]
              if (length(by2) == 2)
                  by <- by * as.integer(by2[1])
          }
          else by <- if (length(by2) == 2)
              as.integer(by2[1])
          else 1
      }
      else if (!is.numeric(by))
          stop("invalid mode for 'by'")
      if (is.na(by))
          stop("'by' is NA")
      if (valid <= 2) {
          from <- unclass(as.Date(from))
          if (!is.null(length.out))
              res <- seq.default(from, by = by, length.out = length.out)
          else {
              to <- unclass(as.Date(to))
              res <- seq.default(0, to - from, by) + from
          }
          return(structure(res, class = "Date"))
      }
      else {
          r1 <- as.POSIXlt(from)
          if (valid == 4) {
              if (missing(to)) {
                  yr <- seq(r1$year, by = by, length = length.out)
              }
              else {
                  to <- as.POSIXlt(to)
                  yr <- seq(r1$year, to$year, by)
              }
              r1$year <- yr
### begin FP addenda
			if (end.end && r1$mon==1 && r1$mday>27) {
				r1$mon <- rep(r1$mon, length(r1$year))
				r1$mday <- rep(r1$mday, length(r1$year))
				natyr <- r1$year+1900
				leap <- natyr %% 4 == 0 &
						(natyr %% 100 != 0 | natyr %% 400 == 0) ## thx Diethelm Wuertz
				mdayadj <- (r1$mon == 1) * (r1$mday == 28) * (leap) -
              				(r1$mon == 1) * (r1$mday == 29) * (!leap)
              	r1$mday <- r1$mday + mdayadj
              }
### end FP addenda
              res <- .Internal(POSIXlt2Date(r1))
          }
          else if (valid == 3) {
              if (missing(to)) {
                  mon <- seq(r1$mon, by = by, length = length.out)
              }
              else {
                  to <- as.POSIXlt(to)
                  mon <- seq(r1$mon, 12 * (to$year - r1$year) +
                    to$mon, by)
              }
              r1$mon <- mon
### begin FP addenda
			if (end.end && r1$mday>27) {
				r1$mday <- rep(r1$mday, length(r1$mon))
				natyr <- r1$year + 1900 + r1$mon %/% 12
				leap <- natyr %% 4 == 0 &
						(natyr %% 100 != 0 | natyr %% 400 == 0) ## thx Diethelm Wuertz
              	last <- c(31,28,31,30,31,30,31,31,30,31,30,31)[r1$mon % 
% 12 + 1]
              	last <- last + (last == 28)*(leap)
              	if (last[1] == r1$mday[1]) {
              		r1$mday <- last
              	}
              	else r1$mday <- pmin(last, r1$mday)
              }
### end FP addenda
              res <- .Internal(POSIXlt2Date(r1))
          }
          return(res)
      }
}
			


On Feb 20, 2006, at 6:46 PM, Parlamis Franklin wrote:

> There was a thread a while ago about monthly sequences, and the "end-
> end" convention used for interbank deposits.  I've done some more
> work on this, and come up with a version of the seq.Date function
> (from base R) that I think can handle the convention.  Generating
> sequences of swap payment dates should be facilitated by this
> function.  Basically, all you do is add an 'end.end=TRUE' flag to
> your regular 'seq' function call.
>
> The replacement function is printed below.  It is verbatim the
> 'seq.Date' function, with commented addenda.  No additional packages
> are required.
>
> If anyone finds the function helpful, I would appreciate your
> thoughts on style, etc . . .
>
> Franklin Parlamis
>
> -----
>
> seq.Date <-
> ##  enhances base R seq.Date function by allowing the
> ##  end.end convention for monthly and yearly sequences
> function (from, to, by, length.out = NULL, along.with = NULL, end.end
> = FALSE,
>      ...)
> {
>      if (missing(from))
>          stop("'from' must be specified")
>      if (!inherits(from, "Date"))
>          stop("'from' must be a Date object")
>      if (length(as.Date(from)) != 1)
>          stop("'from' must be of length 1")
>      if (!missing(to)) {
>          if (!inherits(to, "Date"))
>              stop("'to' must be a Date object")
>          if (length(as.Date(to)) != 1)
>              stop("'to' must be of length 1")
>      }
>      if (!missing(along.with)) {
>          length.out <- length(along.with)
>      }
>      else if (!missing(length.out)) {
>          if (length(length.out) != 1)
>              stop("'length.out' must be of length 1")
>          length.out <- ceiling(length.out)
>      }
>      status <- c(!missing(to), !missing(by), !is.null(length.out))
>      if (sum(status) != 2)
>          stop("exactly two of 'to', 'by' and 'length.out' /
> 'along.with' must be specified")
>      if (missing(by)) {
>          from <- unclass(as.Date(from))
>          to <- unclass(as.Date(to))
>          res <- seq.default(from, to, length.out = length.out)
>          return(structure(res, class = "Date"))
>      }
>      if (length(by) != 1)
>          stop("'by' must be of length 1")
>      valid <- 0
>      if (inherits(by, "difftime")) {
>          by <- switch(attr(by, "units"), secs = 1/86400, mins =  
> 1/1440,
>              hours = 1/24, days = 1, weeks = 7) * unclass(by)
>      }
>      else if (is.character(by)) {
>          by2 <- strsplit(by, " ", fixed = TRUE)[[1]]
>          if (length(by2) > 2 || length(by2) < 1)
>              stop("invalid 'by' string")
>          valid <- pmatch(by2[length(by2)], c("days", "weeks",
>              "months", "years"))
>          if (is.na(valid))
>              stop("invalid string for 'by'")
>          if (valid <= 2) {
>              by <- c(1, 7)[valid]
>              if (length(by2) == 2)
>                  by <- by * as.integer(by2[1])
>          }
>          else by <- if (length(by2) == 2)
>              as.integer(by2[1])
>          else 1
>      }
>      else if (!is.numeric(by))
>          stop("invalid mode for 'by'")
>      if (is.na(by))
>          stop("'by' is NA")
>      if (valid <= 2) {
>          from <- unclass(as.Date(from))
>          if (!is.null(length.out))
>              res <- seq.default(from, by = by, length.out =  
> length.out)
>          else {
>              to <- unclass(as.Date(to))
>              res <- seq.default(0, to - from, by) + from
>          }
>          return(structure(res, class = "Date"))
>      }
>      else {
>          r1 <- as.POSIXlt(from)
>          if (valid == 4) {
>              if (missing(to)) {
>                  yr <- seq(r1$year, by = by, length = length.out)
>              }
>              else {
>                  to <- as.POSIXlt(to)
>                  yr <- seq(r1$year, to$year, by)
>              }
>              r1$year <- yr
> ### begin FP addenda
> 			if (end.end && r1$mon==1 && r1$mday>27) {
> 				r1$mon <- rep(r1$mon, length(r1$year))
> 				r1$mday <- rep(r1$mday, length(r1$year))
> 				natyr <- r1$year+1900
> 				leap <- natyr %% 4 == 0 &
> 						(natyr %% 100 != 0 | natyr %% 400 == 0) ## thx Diethelm Wuertz
> 				mdayadj <- (r1$mon == 1) * (r1$mday == 28) * (leap) -
>              				(r1$mon == 1) * (r1$mday == 29) * (!leap)
>              	r1$mday <- r1$mday + mdayadj
>              }
> ### end FP addenda
>              res <- .Internal(POSIXlt2Date(r1))
>          }
>          else if (valid == 3) {
>              if (missing(to)) {
>                  mon <- seq(r1$mon, by = by, length = length.out)
>              }
>              else {
>                  to <- as.POSIXlt(to)
>                  mon <- seq(r1$mon, 12 * (to$year - r1$year) +
>                    to$mon, by)
>              }
>              r1$mon <- mon
> ### begin FP addenda
> 			if (end.end && r1$mday>27) {
> 				r1$mday <- rep(r1$mday, length(r1$mon))
> 				natyr <- r1$year + 1900 + r1$mon %/% 12
> 				leap <- natyr %% 4 == 0 &
> 						(natyr %% 100 != 0 | natyr %% 400 == 0) ## thx Diethelm Wuertz
>              	last <- c(31,28,31,30,31,30,31,31,30,31,30,31)[r1$mon %
> % 12 + 1]
>              	last <- last + (last == 28)*(leap)
>              	if (last[1] == r1$mday[1]) {
>              		r1$mday <- last
>              	}
>              	else r1$mday <- pmin(last, r1$mday)
>              }
> ### end FP addenda
>              res <- .Internal(POSIXlt2Date(r1))
>          }
>          return(res)
>      }
> }
> 			
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance


From ggrothendieck at gmail.com  Tue Feb 21 16:26:49 2006
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Tue, 21 Feb 2006 10:26:49 -0500
Subject: [R-sig-finance] Monthly Sequences
In-Reply-To: <C33C7F7A-398F-4739-BFC8-18AB500399E2@mac.com>
References: <BE352C68-999C-4C4E-B128-7D62DEC14685@mac.com>
	<C33C7F7A-398F-4739-BFC8-18AB500399E2@mac.com>
Message-ID: <971536df0602210726r336a3057i65be73c6feef9b4e@mail.gmail.com>

There is still a problem with line wrapping.  Check out:
https://stat.ethz.ch/pipermail/r-sig-finance/2006q1/000679.html

I believe the list will accept text attachments.  To avoid these
problems just post it as an attachment or if you have web space
post it with a link.

Also it might be useful if you provide a sentence or two of
explanation and a few test cases to illustrate how it works.

On 2/21/06, Parlamis Franklin <fparlamis at mac.com> wrote:
> So sorry folks.  Function I sent had an unintended linebreak in the
> middle of a "%%" operator, causing a syntax error.
> Below please find the function without that error.
>
> FP
>
> ------
>
> seq.Date <-
> ##  enhances base R seq.Date function by allowing the
> ##  end.end convention for monthly and yearly sequences
> function (from, to, by, length.out = NULL, along.with = NULL, end.end
> = FALSE,
>      ...)
> {
>      if (missing(from))
>          stop("'from' must be specified")
>      if (!inherits(from, "Date"))
>          stop("'from' must be a Date object")
>      if (length(as.Date(from)) != 1)
>          stop("'from' must be of length 1")
>      if (!missing(to)) {
>          if (!inherits(to, "Date"))
>              stop("'to' must be a Date object")
>          if (length(as.Date(to)) != 1)
>              stop("'to' must be of length 1")
>      }
>      if (!missing(along.with)) {
>          length.out <- length(along.with)
>      }
>      else if (!missing(length.out)) {
>          if (length(length.out) != 1)
>              stop("'length.out' must be of length 1")
>          length.out <- ceiling(length.out)
>      }
>      status <- c(!missing(to), !missing(by), !is.null(length.out))
>      if (sum(status) != 2)
>          stop("exactly two of 'to', 'by' and 'length.out' /
> 'along.with' must be specified")
>      if (missing(by)) {
>          from <- unclass(as.Date(from))
>          to <- unclass(as.Date(to))
>          res <- seq.default(from, to, length.out = length.out)
>          return(structure(res, class = "Date"))
>      }
>      if (length(by) != 1)
>          stop("'by' must be of length 1")
>      valid <- 0
>      if (inherits(by, "difftime")) {
>          by <- switch(attr(by, "units"), secs = 1/86400, mins = 1/1440,
>              hours = 1/24, days = 1, weeks = 7) * unclass(by)
>      }
>      else if (is.character(by)) {
>          by2 <- strsplit(by, " ", fixed = TRUE)[[1]]
>          if (length(by2) > 2 || length(by2) < 1)
>              stop("invalid 'by' string")
>          valid <- pmatch(by2[length(by2)], c("days", "weeks",
>              "months", "years"))
>          if (is.na(valid))
>              stop("invalid string for 'by'")
>          if (valid <= 2) {
>              by <- c(1, 7)[valid]
>              if (length(by2) == 2)
>                  by <- by * as.integer(by2[1])
>          }
>          else by <- if (length(by2) == 2)
>              as.integer(by2[1])
>          else 1
>      }
>      else if (!is.numeric(by))
>          stop("invalid mode for 'by'")
>      if (is.na(by))
>          stop("'by' is NA")
>      if (valid <= 2) {
>          from <- unclass(as.Date(from))
>          if (!is.null(length.out))
>              res <- seq.default(from, by = by, length.out = length.out)
>          else {
>              to <- unclass(as.Date(to))
>              res <- seq.default(0, to - from, by) + from
>          }
>          return(structure(res, class = "Date"))
>      }
>      else {
>          r1 <- as.POSIXlt(from)
>          if (valid == 4) {
>              if (missing(to)) {
>                  yr <- seq(r1$year, by = by, length = length.out)
>              }
>              else {
>                  to <- as.POSIXlt(to)
>                  yr <- seq(r1$year, to$year, by)
>              }
>              r1$year <- yr
> ### begin FP addenda
>                        if (end.end && r1$mon==1 && r1$mday>27) {
>                                r1$mon <- rep(r1$mon, length(r1$year))
>                                r1$mday <- rep(r1$mday, length(r1$year))
>                                natyr <- r1$year+1900
>                                leap <- natyr %% 4 == 0 &
>                                                (natyr %% 100 != 0 | natyr %% 400 == 0) ## thx Diethelm Wuertz
>                                mdayadj <- (r1$mon == 1) * (r1$mday == 28) * (leap) -
>                                        (r1$mon == 1) * (r1$mday == 29) * (!leap)
>                r1$mday <- r1$mday + mdayadj
>              }
> ### end FP addenda
>              res <- .Internal(POSIXlt2Date(r1))
>          }
>          else if (valid == 3) {
>              if (missing(to)) {
>                  mon <- seq(r1$mon, by = by, length = length.out)
>              }
>              else {
>                  to <- as.POSIXlt(to)
>                  mon <- seq(r1$mon, 12 * (to$year - r1$year) +
>                    to$mon, by)
>              }
>              r1$mon <- mon
> ### begin FP addenda
>                        if (end.end && r1$mday>27) {
>                                r1$mday <- rep(r1$mday, length(r1$mon))
>                                natyr <- r1$year + 1900 + r1$mon %/% 12
>                                leap <- natyr %% 4 == 0 &
>                                                (natyr %% 100 != 0 | natyr %% 400 == 0) ## thx Diethelm Wuertz
>                last <- c(31,28,31,30,31,30,31,31,30,31,30,31)[r1$mon %
> % 12 + 1]
>                last <- last + (last == 28)*(leap)
>                if (last[1] == r1$mday[1]) {
>                        r1$mday <- last
>                }
>                else r1$mday <- pmin(last, r1$mday)
>              }
> ### end FP addenda
>              res <- .Internal(POSIXlt2Date(r1))
>          }
>          return(res)
>      }
> }
>
>
>
> On Feb 20, 2006, at 6:46 PM, Parlamis Franklin wrote:
>
> > There was a thread a while ago about monthly sequences, and the "end-
> > end" convention used for interbank deposits.  I've done some more
> > work on this, and come up with a version of the seq.Date function
> > (from base R) that I think can handle the convention.  Generating
> > sequences of swap payment dates should be facilitated by this
> > function.  Basically, all you do is add an 'end.end=TRUE' flag to
> > your regular 'seq' function call.
> >
> > The replacement function is printed below.  It is verbatim the
> > 'seq.Date' function, with commented addenda.  No additional packages
> > are required.
> >
> > If anyone finds the function helpful, I would appreciate your
> > thoughts on style, etc . . .
> >
> > Franklin Parlamis
> >
> > -----
> >
> > seq.Date <-
> > ##  enhances base R seq.Date function by allowing the
> > ##  end.end convention for monthly and yearly sequences
> > function (from, to, by, length.out = NULL, along.with = NULL, end.end
> > = FALSE,
> >      ...)
> > {
> >      if (missing(from))
> >          stop("'from' must be specified")
> >      if (!inherits(from, "Date"))
> >          stop("'from' must be a Date object")
> >      if (length(as.Date(from)) != 1)
> >          stop("'from' must be of length 1")
> >      if (!missing(to)) {
> >          if (!inherits(to, "Date"))
> >              stop("'to' must be a Date object")
> >          if (length(as.Date(to)) != 1)
> >              stop("'to' must be of length 1")
> >      }
> >      if (!missing(along.with)) {
> >          length.out <- length(along.with)
> >      }
> >      else if (!missing(length.out)) {
> >          if (length(length.out) != 1)
> >              stop("'length.out' must be of length 1")
> >          length.out <- ceiling(length.out)
> >      }
> >      status <- c(!missing(to), !missing(by), !is.null(length.out))
> >      if (sum(status) != 2)
> >          stop("exactly two of 'to', 'by' and 'length.out' /
> > 'along.with' must be specified")
> >      if (missing(by)) {
> >          from <- unclass(as.Date(from))
> >          to <- unclass(as.Date(to))
> >          res <- seq.default(from, to, length.out = length.out)
> >          return(structure(res, class = "Date"))
> >      }
> >      if (length(by) != 1)
> >          stop("'by' must be of length 1")
> >      valid <- 0
> >      if (inherits(by, "difftime")) {
> >          by <- switch(attr(by, "units"), secs = 1/86400, mins =
> > 1/1440,
> >              hours = 1/24, days = 1, weeks = 7) * unclass(by)
> >      }
> >      else if (is.character(by)) {
> >          by2 <- strsplit(by, " ", fixed = TRUE)[[1]]
> >          if (length(by2) > 2 || length(by2) < 1)
> >              stop("invalid 'by' string")
> >          valid <- pmatch(by2[length(by2)], c("days", "weeks",
> >              "months", "years"))
> >          if (is.na(valid))
> >              stop("invalid string for 'by'")
> >          if (valid <= 2) {
> >              by <- c(1, 7)[valid]
> >              if (length(by2) == 2)
> >                  by <- by * as.integer(by2[1])
> >          }
> >          else by <- if (length(by2) == 2)
> >              as.integer(by2[1])
> >          else 1
> >      }
> >      else if (!is.numeric(by))
> >          stop("invalid mode for 'by'")
> >      if (is.na(by))
> >          stop("'by' is NA")
> >      if (valid <= 2) {
> >          from <- unclass(as.Date(from))
> >          if (!is.null(length.out))
> >              res <- seq.default(from, by = by, length.out =
> > length.out)
> >          else {
> >              to <- unclass(as.Date(to))
> >              res <- seq.default(0, to - from, by) + from
> >          }
> >          return(structure(res, class = "Date"))
> >      }
> >      else {
> >          r1 <- as.POSIXlt(from)
> >          if (valid == 4) {
> >              if (missing(to)) {
> >                  yr <- seq(r1$year, by = by, length = length.out)
> >              }
> >              else {
> >                  to <- as.POSIXlt(to)
> >                  yr <- seq(r1$year, to$year, by)
> >              }
> >              r1$year <- yr
> > ### begin FP addenda
> >                       if (end.end && r1$mon==1 && r1$mday>27) {
> >                               r1$mon <- rep(r1$mon, length(r1$year))
> >                               r1$mday <- rep(r1$mday, length(r1$year))
> >                               natyr <- r1$year+1900
> >                               leap <- natyr %% 4 == 0 &
> >                                               (natyr %% 100 != 0 | natyr %% 400 == 0) ## thx Diethelm Wuertz
> >                               mdayadj <- (r1$mon == 1) * (r1$mday == 28) * (leap) -
> >                                       (r1$mon == 1) * (r1$mday == 29) * (!leap)
> >               r1$mday <- r1$mday + mdayadj
> >              }
> > ### end FP addenda
> >              res <- .Internal(POSIXlt2Date(r1))
> >          }
> >          else if (valid == 3) {
> >              if (missing(to)) {
> >                  mon <- seq(r1$mon, by = by, length = length.out)
> >              }
> >              else {
> >                  to <- as.POSIXlt(to)
> >                  mon <- seq(r1$mon, 12 * (to$year - r1$year) +
> >                    to$mon, by)
> >              }
> >              r1$mon <- mon
> > ### begin FP addenda
> >                       if (end.end && r1$mday>27) {
> >                               r1$mday <- rep(r1$mday, length(r1$mon))
> >                               natyr <- r1$year + 1900 + r1$mon %/% 12
> >                               leap <- natyr %% 4 == 0 &
> >                                               (natyr %% 100 != 0 | natyr %% 400 == 0) ## thx Diethelm Wuertz
> >               last <- c(31,28,31,30,31,30,31,31,30,31,30,31)[r1$mon %
> > % 12 + 1]
> >               last <- last + (last == 28)*(leap)
> >               if (last[1] == r1$mday[1]) {
> >                       r1$mday <- last
> >               }
> >               else r1$mday <- pmin(last, r1$mday)
> >              }
> > ### end FP addenda
> >              res <- .Internal(POSIXlt2Date(r1))
> >          }
> >          return(res)
> >      }
> > }
> >
> >
> >
> >       [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-sig-finance at stat.math.ethz.ch mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From fparlamis at mac.com  Tue Feb 21 21:27:01 2006
From: fparlamis at mac.com (Parlamis Franklin)
Date: Tue, 21 Feb 2006 10:27:01 -1000
Subject: [R-sig-finance] Monthly Sequences
In-Reply-To: <971536df0602210726r336a3057i65be73c6feef9b4e@mail.gmail.com>
References: <BE352C68-999C-4C4E-B128-7D62DEC14685@mac.com>
	<C33C7F7A-398F-4739-BFC8-18AB500399E2@mac.com>
	<971536df0602210726r336a3057i65be73c6feef9b4e@mail.gmail.com>
Message-ID: <381E59A0-0941-4D26-835B-71C7E19D9711@mac.com>


On Feb 21, 2006, at 5:26 AM, Gabor Grothendieck wrote:

> There is still a problem with line wrapping.  Check out:
> https://stat.ethz.ch/pipermail/r-sig-finance/2006q1/000679.html
>
> I believe the list will accept text attachments.  To avoid these
> problems just post it as an attachment or if you have web space
> post it with a link.
>
> Also it might be useful if you provide a sentence or two of
> explanation and a few test cases to illustrate how it works.
>


Thanks Gabor, and sorry again for problems.  Attached please find a  
text file with the new function.  Note that I have cleaned this up  
from yesterday's version so please use this one.

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: seq.Date.txt
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060221/a9044a3a/seq.Date.txt
-------------- next part --------------

When the original seq.Date wants to do yearly or monthly sequences,  
it converts the "from" argument to POSIXlt and manipulates the "year"  
and "mon" vectors, respectively.  Then it converts back with .Internal 
(POSIXlt2Date).

My function adds some appropriate manipulation of the "mday" vector  
in both cases before the .Internal reconversion, if the additional  
"end.end" argument is TRUE (default value is FALSE).  Along the way,  
it includes logic to provide leap-year and last-day-in-month  
information (the leap year logic was published by Diethelm Wuertz in  
this article -- http://www.itp.phys.ethz.ch/econophysics/R/pdf/ 
calendar.pdf).  I have embedded this logic in my code to minimize my  
intrusion on base R, although it could probably be handled in  
external functions that would have other usefulness.  I have also  
employed Gabor's "pmin" logic from the function he posted a week  
back, for which thanks.

I should add that I have no idea how .Internal(POSIXlt2Date) works,  
and I am hoping that no untoward behavior results from my addenda.

Here are some examples.

___

 > seq(as.Date("2005-01-31"), by="month", len=5)
[1] "2005-01-31" "2005-03-03" "2005-03-31" "2005-05-01" "2005-05-31"
 > seq(as.Date("2005-01-31"), by="month", len=5, end.end=TRUE)
[1] "2005-01-31" "2005-02-28" "2005-03-31" "2005-04-30" "2005-05-31"

## Adding the end.end flag caused the month end convention to be  
respected.

 > seq(as.Date("2008-02-28"), by="month", len=5)
[1] "2008-02-28" "2008-03-28" "2008-04-28" "2008-05-28" "2008-06-28"
 > seq(as.Date("2008-02-28"), by="month", len=5, end.end=TRUE)
[1] "2008-02-28" "2008-03-28" "2008-04-28" "2008-05-28" "2008-06-28"
 > seq(as.Date("2008-02-29"), by="month", len=5)
[1] "2008-02-29" "2008-03-29" "2008-04-29" "2008-05-29" "2008-06-29"
 > seq(as.Date("2008-02-29"), by="month", len=5, end.end=TRUE)
[1] "2008-02-29" "2008-03-31" "2008-04-30" "2008-05-31" "2008-06-30"

  ## It knew about leap years.

 > seq(as.Date("2008-01-30"), by="month", len=5)
[1] "2008-01-30" "2008-03-01" "2008-03-30" "2008-04-30" "2008-05-30"
 > seq(as.Date("2008-01-30"), by="month", len=5, end.end=TRUE)
[1] "2008-01-30" "2008-02-29" "2008-03-30" "2008-04-30" "2008-05-30"

## And it handled the case where the "from" date was not end-of-month,
## but exceeded the end-of-month date in later months.

 > seq(as.Date("2005-02-28"), by="year", len=5)
[1] "2005-02-28" "2006-02-28" "2007-02-28" "2008-02-28" "2009-02-28"
 > seq(as.Date("2005-02-28"), by="year", len=5, end.end=TRUE)
[1] "2005-02-28" "2006-02-28" "2007-02-28" "2008-02-29" "2009-02-28"
 > seq(as.Date("2008-02-28"), by="year", len=5, end.end=TRUE)
[1] "2008-02-28" "2009-02-28" "2010-02-28" "2011-02-28" "2012-02-28"
 > seq(as.Date("2008-02-29"), by="year", len=5, end.end=TRUE)
[1] "2008-02-29" "2009-02-28" "2010-02-28" "2011-02-28" "2012-02-29"

## It also handled yearly sequences with February "froms" correctly

___

Franklin

From finbref.2006 at gmail.com  Wed Feb 22 16:49:06 2006
From: finbref.2006 at gmail.com (Thomas Steiner)
Date: Wed, 22 Feb 2006 16:49:06 +0100
Subject: [R-sig-finance] swap to forward rates
Message-ID: <d0f55a670602220749g51a7fe7fr@mail.gmail.com>

Again, I want to calculate forward rates from swap rates.
Krishna Kumar was already very kind to help me here (24.1.06) and he
provided an algorithm, I did not understand. So I now figured out my
own one and unfortunately the two results do not coincide but both
appear very plausible.

How can you help me?
If you have a lot of time, check my algorithm or my formula.
If you have already implemented this yourself somewhere, please
compare my results with yours and with those of Kris. And let me know
about your results.

Perhaps you can have a quick look at this and verify the results.

I have EUR-swap rates for 2Y, 3Y, 5Y, 7Y, 10Y, 20Y and 30Y, eg for 2005-12-13:

sc=list(
  maturity=c(2,3,5,7,10,20),
  tenors=c(2,1,2,2,3,10),    #the difference between two dates (=\tau_i)
  rate=c(0.02982,0.03074,0.03230,0.03354,0.03533,0.03861),
  date="2005-12-13"
  );

#Kris' way from swap via discount to forward rates:
swap2discount<-function(swapcrv) {
  n<-length(swapcrv$rate)
  dfcrv<-list()
  dfcrv$maturity    <- swapcrv$maturity
  dfcrv$discount    <- 1/(1+swapcrv$tenors*swapcrv$rate)
  dfcrv$discount[-1]<-
dfcrv$discount[-1]*(1-(cumsum(swapcrv$tenors[-n]*dfcrv$discount[-n]))*swapcrv$rate[-1])
  dfcrv$date=swapcrv$date
  return(dfcrv)
}
discount2fwd<-function(dfcurve,times=dfcurve$maturity) {
  times<-c(0,times)
  n<-length(times)
  fwd<-array(0,n)
  df.tenor<-array(0,n)
  df.tenor<-approx(x=dfcurve$maturity,y=dfcurve$discount,xout=times,rule=2)$y
  df.tenor[1]<-1
  fwd<-(df.tenor[-n]/df.tenor[-1] -1)/diff(times)
  fwd<-c(fwd[1],fwd)
  return(list(maturity=times,rate=fwd,date=dfcurve$date))
}
dc=swap2discount(sc)
discount2fwd(dc)
#gives rates:  0.02982000 0.03264006 0.03592894 0.04081783 0.04582491 0.05007956

#my function:
# from Brigo/Mercurio, p.15; solve the last equation on this page for F_\beta:
# $$\1+\tau_\beta F_\beta = \frac{1+S_{\alpha,\beta}(t)
\tau_\beta}{\Pi_{j=\alpha+1}^{\beta-1}(1+\tau_jF_j) -
S_{\alpha,\beta}(t)\Sum_{i=\alpha+1}^{\beta-1}\tau_i\Pi_{j=i+1}^{\beta-1}(1+\tau_jF_j)
} $$
swap2fwd<-function(sc) {
  fwd=array(dim=length(sc$rate))
  fwd[1]=sc$rate[1]
  fwd[2]=( (1+sc$rate[2]*sc$tenors[2])/(1+sc$tenors[1]*fwd[1]-sc$rate[2]*sc$tenors[1])-1
) / sc$tenors[2]
  n<-length(sc$maturity)
  for (t in 3:n) {
    cumpr=rev(c(1, cumprod(1+sc$tenors[(t-1):2]*fwd[(t-1):2]) ))
    su=sum( sc$tenors[1:(t-1)] * cumpr )
    fwd[t]=(1+sc$rate[t]*sc$tenors[t]) / (
prod(1+sc$tenors[1:(t-1)]*fwd[1:(t-1)])-sc$rate[t]*su )
    fwd[t]=(fwd[t]-1)/sc$tenors[t]
  }
  return(list(
    maturity=sc$maturity,rate=fwd,date=sc$date
    ))
}
swap2fwd(sc)
#gives 0.02982000 0.03264006 0.03485760 0.03705553 0.04046209 0.04409305

My results are a bit lower then Kris'. What do you suggest me to use
now? A pro's solution I don't understand or my own answer?
If I add the 30Y swap rate (0.03922), results are strage again in both
cases (too high and to low respectively).

What I did not take into account are daycount conventions and the fact
the the very first point in the swap curve should be a cash rate. This
will come later...

Any help, hint and comparison is very welcome.
Thomas


From finbref.2006 at gmail.com  Wed Feb 22 19:08:57 2006
From: finbref.2006 at gmail.com (Thomas Steiner)
Date: Wed, 22 Feb 2006 19:08:57 +0100
Subject: [R-sig-finance] swap to forward rates
In-Reply-To: <14814D23B3BE2C41AFA18A0B1961F172050132@rhosvr02.rhotrading.com>
References: <14814D23B3BE2C41AFA18A0B1961F172050132@rhosvr02.rhotrading.com>
Message-ID: <d0f55a670602221008o234d1b7eg@mail.gmail.com>

Dear David,
thanks for you answer.

> There are many algorithms for constructing a yield curve from market
> data.
> They all give different answers, some wildly.

But why?
Describing the term structure of interest rates by forward rates is
mathematically equivalent (no market model assumed, just no arbitrage)
to tell the swap rates. So there should be an exact way in principle,
no?

> I don't see how you can get the first fwd rate without at least one
> cash.

I mentioned this at the end of my message: I will add this later,
right now I assume that the first point in the swap curve is a cash
yield.

> You will also get quite different results by not taking market
> conventions into account.

Thanks, I didn't know that - I thought that results should be at about
the same (not 60bps difference).

> This is one big reason why people are willing
> to spend serious money for yield curve sotware.

I am working at university and I try to find the cheapest way possible...

Can you give any of your results with my rates, just to compare?
Any other comments, hints?
Thomas


From kriskumar at earthlink.net  Thu Feb 23 02:29:09 2006
From: kriskumar at earthlink.net (Krishna Kumar)
Date: Wed, 22 Feb 2006 20:29:09 -0500
Subject: [R-sig-finance] swap to forward rates
In-Reply-To: <d0f55a670602220749g51a7fe7fr@mail.gmail.com>
References: <d0f55a670602220749g51a7fe7fr@mail.gmail.com>
Message-ID: <43FD0FE5.5010800@earthlink.net>

To re-emphasize what David has mentioned and what was in the earlier 
West-Hagan paper, depending on the
interpolation technique used one can get completely different set of 
rates. And people use smoothness and other criteria
to pick the method. If you play around with different interpolation like 
cubic spline in akima and other interpolation methods
that are in CRAN you will notice that the forward is smooth for some and 
jagged for others.
What I sent is a very rudimentary - curve-101, perhaps you should also 
look at these additional documents as well ,

http://www.fincad.com/newsletter.asp?i=1180&a=2180
http://www.bankofcanada.ca/en/res/wp/2000/wp00-17.pdf
http://www.hfb.de/Dateien/Arbeitsbericht2.pdf

{Most banks have people who are specialized in just building curves..}
The reason why it is good to go via discount factors is that some of the 
curves are blended meaning they have a mix of
instrument like repos or muni instruments. In other cases people use E$ 
futures or other market instruments. The criteria on what
instruments to use in your curve, is typically a) liquidity and b) your 
positions in the markets.  Because you want to compute the correct
funding for your positions.

Finally you need to get the day counts right that is important and the 
recent email on seq.date might help you on this.

Hope this helps,
Kris


Thomas Steiner wrote:

>Again, I want to calculate forward rates from swap rates.
>Krishna Kumar was already very kind to help me here (24.1.06) and he
>provided an algorithm, I did not understand. So I now figured out my
>own one and unfortunately the two results do not coincide but both
>appear very plausible.
>
>How can you help me?
>If you have a lot of time, check my algorithm or my formula.
>If you have already implemented this yourself somewhere, please
>compare my results with yours and with those of Kris. And let me know
>about your results.
>
>Perhaps you can have a quick look at this and verify the results.
>
>I have EUR-swap rates for 2Y, 3Y, 5Y, 7Y, 10Y, 20Y and 30Y, eg for 2005-12-13:
>
>sc=list(
>  maturity=c(2,3,5,7,10,20),
>  tenors=c(2,1,2,2,3,10),    #the difference between two dates (=\tau_i)
>  rate=c(0.02982,0.03074,0.03230,0.03354,0.03533,0.03861),
>  date="2005-12-13"
>  );
>
>#Kris' way from swap via discount to forward rates:
>swap2discount<-function(swapcrv) {
>  n<-length(swapcrv$rate)
>  dfcrv<-list()
>  dfcrv$maturity    <- swapcrv$maturity
>  dfcrv$discount    <- 1/(1+swapcrv$tenors*swapcrv$rate)
>  dfcrv$discount[-1]<-
>dfcrv$discount[-1]*(1-(cumsum(swapcrv$tenors[-n]*dfcrv$discount[-n]))*swapcrv$rate[-1])
>  dfcrv$date=swapcrv$date
>  return(dfcrv)
>}
>discount2fwd<-function(dfcurve,times=dfcurve$maturity) {
>  times<-c(0,times)
>  n<-length(times)
>  fwd<-array(0,n)
>  df.tenor<-array(0,n)
>  df.tenor<-approx(x=dfcurve$maturity,y=dfcurve$discount,xout=times,rule=2)$y
>  df.tenor[1]<-1
>  fwd<-(df.tenor[-n]/df.tenor[-1] -1)/diff(times)
>  fwd<-c(fwd[1],fwd)
>  return(list(maturity=times,rate=fwd,date=dfcurve$date))
>}
>dc=swap2discount(sc)
>discount2fwd(dc)
>#gives rates:  0.02982000 0.03264006 0.03592894 0.04081783 0.04582491 0.05007956
>
>#my function:
># from Brigo/Mercurio, p.15; solve the last equation on this page for F_\beta:
># $$\1+\tau_\beta F_\beta = \frac{1+S_{\alpha,\beta}(t)
>\tau_\beta}{\Pi_{j=\alpha+1}^{\beta-1}(1+\tau_jF_j) -
>S_{\alpha,\beta}(t)\Sum_{i=\alpha+1}^{\beta-1}\tau_i\Pi_{j=i+1}^{\beta-1}(1+\tau_jF_j)
>} $$
>swap2fwd<-function(sc) {
>  fwd=array(dim=length(sc$rate))
>  fwd[1]=sc$rate[1]
>  fwd[2]=( (1+sc$rate[2]*sc$tenors[2])/(1+sc$tenors[1]*fwd[1]-sc$rate[2]*sc$tenors[1])-1
>) / sc$tenors[2]
>  n<-length(sc$maturity)
>  for (t in 3:n) {
>    cumpr=rev(c(1, cumprod(1+sc$tenors[(t-1):2]*fwd[(t-1):2]) ))
>    su=sum( sc$tenors[1:(t-1)] * cumpr )
>    fwd[t]=(1+sc$rate[t]*sc$tenors[t]) / (
>prod(1+sc$tenors[1:(t-1)]*fwd[1:(t-1)])-sc$rate[t]*su )
>    fwd[t]=(fwd[t]-1)/sc$tenors[t]
>  }
>  return(list(
>    maturity=sc$maturity,rate=fwd,date=sc$date
>    ))
>}
>swap2fwd(sc)
>#gives 0.02982000 0.03264006 0.03485760 0.03705553 0.04046209 0.04409305
>
>My results are a bit lower then Kris'. What do you suggest me to use
>now? A pro's solution I don't understand or my own answer?
>If I add the 30Y swap rate (0.03922), results are strage again in both
>cases (too high and to low respectively).
>
>What I did not take into account are daycount conventions and the fact
>the the very first point in the swap curve should be a cash rate. This
>will come later...
>
>Any help, hint and comparison is very welcome.
>Thomas
>
>_______________________________________________
>R-sig-finance at stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>  
>


From tariq.khan at gmail.com  Thu Feb 23 10:44:27 2006
From: tariq.khan at gmail.com (=?ISO-8859-1?Q?=A8Tariq_Khan?=)
Date: Thu, 23 Feb 2006 09:44:27 +0000
Subject: [R-sig-finance] [R] Bloomberg Data Import to R
In-Reply-To: <E585EABA11227445B918BFB74C1A4D363B9E98@sanctum01.sanctumfi.com>
References: <E585EABA11227445B918BFB74C1A4D363B9E98@sanctum01.sanctumfi.com>
Message-ID: <2310043c0602230144y5d3216dcl50c5dbf8690ab5d4@mail.gmail.com>

Dear Robert,

I know this isn't an issue with RBloomeberg per se, but could you
please tell us which version of RDCOMClient to use? COMCreate() in
blpConnect() causes my instance of R to crash on 2.2.1, using
RDCOMClient 0.91-0, which is the latest version I was able to find on
Omegahat.

Regards,

Tariq


On 2/13/06, Robert Sams <Robert at sanctumfi.com> wrote:
> My package RBloomberg (v0.1-7) is now on CRAN.
>
> RBloomberg can make the following types of data requests to the Bloomberg:
>        1. real-time snapshots
>        2. historical end-of-day
>        3. historical intraday bars
>        4. historical intraday tick-by-tick
> All calls are made via a single user function blpGetData. For example:
>        conn <- blpConnect(iface="COM")
>        ## Historical
>        blpGetData(conn, "ED1 Comdty", "PX_LAST", start=chron("1/1/06"), end=chron("1/31/06"))
>        ## Intraday bars (10min intervals)
>        blpGetData(conn, "ED1 Comdty", c("BID","ASK"), start=chron("1/31/06", times="16:00:00"),
>        end=chron("1/31/06", times="17:00:00"), barfields="OPEN", barsize=10)
>
> The design goal is an intuitive R user interface that is abstracted from the details of the particular Bloomberg interface used. Bloomberg presently offers three interfaces: C, .NET and COM. All three are implemented as a desktop product and (since late 2005) a server product that now supports Linux on Intel hardware. blpGetData is a generic and a method will eventually exist for each Bloomberg interface. Currently, only the desktop COM interface is supported.
>
> Please use it, hack it and give me your feedback.
>
> Cheers,
> Robert
>
>
> > -----Original Message-----
> > From: McGehee, Robert [mailto:Robert.McGehee at geodecapital.com]
> > Sent: Friday, February 10, 2006 10:04 PM
> > To: Andrew Piskorski; r-sig-finance at stat.math.ethz.ch
> > Subject: Re: [R-sig-finance] [R] Bloomberg Data Import to R
> >
> >
> > We have implemented interfaces to both the C API and the .NET API.
> > However, it was my understanding that Bloomberg was deprecating the C
> > API entirely in favor of the .NET API, so my company has been
> > moving our
> > data pulls to the new API system. If this is the case, it may be a
> > wrinkle for a package based on the C API.
> >
> > FYI: As a Bloomberg terminal is required to pull the data, we have
> > gotten around the Linux problem by setting up an Apache server on a
> > Windows box with a Perl or C# wrapper that connects to
> > Bloomberg via the
> > respective API. We can then pull the data in from any computer by just
> > querying the Apache server. Seems to work quite well. Of
> > course, someone
> > still needs to log into the Bloomberg each morning.
> >
> > --Robert
> >
> > -----Original Message-----
> > From: r-sig-finance-bounces at stat.math.ethz.ch
> > [mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of Andrew
> > Piskorski
> > Sent: Friday, February 10, 2006 6:30 AM
> > To: r-sig-finance at stat.math.ethz.ch
> > Subject: Re: [R-sig-finance] [R] Bloomberg Data Import to R
> >
> > On Wed, Feb 08, 2006 at 08:42:19AM -0600, Dirk Eddelbuettel wrote:
> >
> > > Barely platform independent. Bloomberg supports only Windows and
> > Solaris, and
> > > I'd be surprised if there even were a dozen installations using
> > Solaris ...
> >
> > Last I heard, more than a year ago, Bloomberg was actively trying to
> > get users off Solaris, setting deadlines for when it would be
> > desupported, etc.  Bloomberg on Solaris may be gone completely by now,
> > I'm not sure.
> >
> > > So matter-of-factishly, it's Windoze-only. Just like the
> > COM solution.
> >
> > Yep.  Of course, if Bloomberg were suddenly to decide to support their
> > Terminal on Linux or some other non-Windows operating system,
> > presumably they would continue to include the C API there as well.
> >
> > Also, Bloomberg seems to regard their C API as legacy software.  I
> > assume they won't be adding much new to it, but that also means that
> > they're unlikely to change it enough to seriously break it's latent
> > cross-platform-ness, however much of that it really has.  :)
> >
> > Presumably the Bloomberg Terminal codebase has been becoming more and
> > more MS Windows centric, though.  My vague understanding was that the
> > C API doesn't really need the Terminal to function, but it piggy backs
> > on the Terminal's authentication somehow.  They could stick in some
> > other sort of authentication if they really wanted to.
> >
> > I could imagine them spinning off the C API codebase, enhancing it,
> > and then offering it as some other sort of product.  But then again,
> > although it's fast, the C API isn't terribly user friendly - even for
> > C programmers - so maybe their potential customers wouldn't be
> > interested anyway.
> >
> > --
> > Andrew Piskorski <atp at piskorski.com>
> > http://www.piskorski.com/
> >
> > _______________________________________________
> > R-sig-finance at stat.math.ethz.ch mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >
> > _______________________________________________
> > R-sig-finance at stat.math.ethz.ch mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >
>
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From wuertz at itp.phys.ethz.ch  Fri Feb 24 09:57:30 2006
From: wuertz at itp.phys.ethz.ch (Diethelm Wuertz)
Date: Fri, 24 Feb 2006 08:57:30 +0000
Subject: [R-sig-finance] some doubts in garch models
In-Reply-To: <800F3C4ADCFCA643A919EF7C140A045A0831C83C@LLANQUIHUE.corpgroup.cl>
References: <800F3C4ADCFCA643A919EF7C140A045A0831C83C@LLANQUIHUE.corpgroup.cl>
Message-ID: <43FECA7A.6030407@itp.phys.ethz.ch>

Ricardo Zambrano Aguilera wrote:

>Hi everyone i need some help , and a have a few questions....
>
>
>i?m looking for an alghoritm to simulate garch process, (especially garch(1,1))
>somebody can help me??
>  
>
The new garchFit() function in fSeries 221.10065 in Rmetrics can do this 
job.
(It reproduces the FCP bechmark.)

>
>i need to know if our software has the Lagrange multiplier test of Engle to test for conditional heteroscedasticity??
>saludos
>ricardo
>  
>
Yes

>i need to Extract Standardized Residuals from a garch model, to test all the properties...it?necessary or i commit a mistake, because it?s already standarized?? 
>  
>
That is automatically be done

Have a look on the garch paper on www.rmetrics.org

best regards
DW

>
>to get the data into (for analize...) garch process, always their Kurtosis must be larger than 3??
>
>thxs
>
>
>greetings 
>ricardo zambrano (ricardo.zambrano at corpbanca.cl)
>
>_______________________________________________
>R-sig-finance at stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>  
>


From finbref.2006 at gmail.com  Fri Feb 24 10:49:12 2006
From: finbref.2006 at gmail.com (Thomas Steiner)
Date: Fri, 24 Feb 2006 10:49:12 +0100
Subject: [R-sig-finance] swap to forward rates
In-Reply-To: <14814D23B3BE2C41AFA18A0B1961F172050184@rhosvr02.rhotrading.com>
References: <14814D23B3BE2C41AFA18A0B1961F172050184@rhosvr02.rhotrading.com>
Message-ID: <d0f55a670602240149h1ab3a7bex@mail.gmail.com>

Thanks for your answers David and Kris. I keep on working out the best
solution for me.

> Good luck! This is a very gnarly topic.

Still I did not get the basic message: why should there be different
methods to calculate forward rates from spanning swap rates? I am just
so impressed by the follwoing quote of Rebonato (Interest rate option
models, 2nd ed., p. 15):

In general, n discrete discount factors can allways be found, for any
viable set of n spanning equilibrium swap rates, as the solution of a
linear [n x n] problem.
This result is improtant, not simply because it shows that equilibrium
swap rates are yet another set equivalent quantities that can be used
to describe the yield curve, but because it shows that the somewhat
privileged role enjoyed by forward rates in term structure modelling
might be more the result of historical accident then of some
fundamental finacial reason.

I'd say that this means, that there is ONE way to come from n swap
rates to n (discrete) forward rates. If I want to have more forward
rates or at some other points in time, I totally agree, that you will
need interpolation and that there are many ways to do so.
I think the best way would be to start with n swap rates, get n exact
forward rates and THEN try to interpolate; eg with Nelson-Siegel,
Splines, Vasicek's family or whatsoever.

Thomas


From Robert at sanctumfi.com  Fri Feb 24 16:22:02 2006
From: Robert at sanctumfi.com (Robert Sams)
Date: Fri, 24 Feb 2006 15:22:02 -0000
Subject: [R-sig-finance] [R] Bloomberg Data Import to R
Message-ID: <E585EABA11227445B918BFB74C1A4D363B9EA0@sanctum01.sanctumfi.com>

Hi Tariq,

I'm using 0.91-0 as well. I've tested blpConnect() on R versions 2.1.1 and 2.2.1 and have not come accross the problem you cite. hmm..

Robert

> -----Original Message-----
> From: ?Tariq Khan [mailto:tariq.khan at gmail.com]
> Sent: Thursday, February 23, 2006 9:44 AM
> To: Robert Sams
> Cc: McGehee, Robert; Andrew Piskorski; 
> R-sig-finance at stat.math.ethz.ch;
> duncan at wald.ucdavis.edu
> Subject: Re: [R-sig-finance] [R] Bloomberg Data Import to R
> 
> 
> Dear Robert,
> 
> I know this isn't an issue with RBloomeberg per se, but could you
> please tell us which version of RDCOMClient to use? COMCreate() in
> blpConnect() causes my instance of R to crash on 2.2.1, using
> RDCOMClient 0.91-0, which is the latest version I was able to find on
> Omegahat.
> 
> Regards,
> 
> Tariq
> 
> 
> On 2/13/06, Robert Sams <Robert at sanctumfi.com> wrote:
> > My package RBloomberg (v0.1-7) is now on CRAN.
> >
> > RBloomberg can make the following types of data requests to 
> the Bloomberg:
> >        1. real-time snapshots
> >        2. historical end-of-day
> >        3. historical intraday bars
> >        4. historical intraday tick-by-tick
> > All calls are made via a single user function blpGetData. 
> For example:
> >        conn <- blpConnect(iface="COM")
> >        ## Historical
> >        blpGetData(conn, "ED1 Comdty", "PX_LAST", 
> start=chron("1/1/06"), end=chron("1/31/06"))
> >        ## Intraday bars (10min intervals)
> >        blpGetData(conn, "ED1 Comdty", c("BID","ASK"), 
> start=chron("1/31/06", times="16:00:00"),
> >        end=chron("1/31/06", times="17:00:00"), 
> barfields="OPEN", barsize=10)
> >
> > The design goal is an intuitive R user interface that is 
> abstracted from the details of the particular Bloomberg 
> interface used. Bloomberg presently offers three interfaces: 
> C, .NET and COM. All three are implemented as a desktop 
> product and (since late 2005) a server product that now 
> supports Linux on Intel hardware. blpGetData is a generic and 
> a method will eventually exist for each Bloomberg interface. 
> Currently, only the desktop COM interface is supported.
> >
> > Please use it, hack it and give me your feedback.
> >
> > Cheers,
> > Robert
> >
> >
> > > -----Original Message-----
> > > From: McGehee, Robert [mailto:Robert.McGehee at geodecapital.com]
> > > Sent: Friday, February 10, 2006 10:04 PM
> > > To: Andrew Piskorski; r-sig-finance at stat.math.ethz.ch
> > > Subject: Re: [R-sig-finance] [R] Bloomberg Data Import to R
> > >
> > >
> > > We have implemented interfaces to both the C API and the .NET API.
> > > However, it was my understanding that Bloomberg was 
> deprecating the C
> > > API entirely in favor of the .NET API, so my company has been
> > > moving our
> > > data pulls to the new API system. If this is the case, it may be a
> > > wrinkle for a package based on the C API.
> > >
> > > FYI: As a Bloomberg terminal is required to pull the data, we have
> > > gotten around the Linux problem by setting up an Apache 
> server on a
> > > Windows box with a Perl or C# wrapper that connects to
> > > Bloomberg via the
> > > respective API. We can then pull the data in from any 
> computer by just
> > > querying the Apache server. Seems to work quite well. Of
> > > course, someone
> > > still needs to log into the Bloomberg each morning.
> > >
> > > --Robert
> > >
> > > -----Original Message-----
> > > From: r-sig-finance-bounces at stat.math.ethz.ch
> > > [mailto:r-sig-finance-bounces at stat.math.ethz.ch] On 
> Behalf Of Andrew
> > > Piskorski
> > > Sent: Friday, February 10, 2006 6:30 AM
> > > To: r-sig-finance at stat.math.ethz.ch
> > > Subject: Re: [R-sig-finance] [R] Bloomberg Data Import to R
> > >
> > > On Wed, Feb 08, 2006 at 08:42:19AM -0600, Dirk Eddelbuettel wrote:
> > >
> > > > Barely platform independent. Bloomberg supports only Windows and
> > > Solaris, and
> > > > I'd be surprised if there even were a dozen installations using
> > > Solaris ...
> > >
> > > Last I heard, more than a year ago, Bloomberg was 
> actively trying to
> > > get users off Solaris, setting deadlines for when it would be
> > > desupported, etc.  Bloomberg on Solaris may be gone 
> completely by now,
> > > I'm not sure.
> > >
> > > > So matter-of-factishly, it's Windoze-only. Just like the
> > > COM solution.
> > >
> > > Yep.  Of course, if Bloomberg were suddenly to decide to 
> support their
> > > Terminal on Linux or some other non-Windows operating system,
> > > presumably they would continue to include the C API there as well.
> > >
> > > Also, Bloomberg seems to regard their C API as legacy software.  I
> > > assume they won't be adding much new to it, but that also 
> means that
> > > they're unlikely to change it enough to seriously break 
> it's latent
> > > cross-platform-ness, however much of that it really has.  :)
> > >
> > > Presumably the Bloomberg Terminal codebase has been 
> becoming more and
> > > more MS Windows centric, though.  My vague understanding 
> was that the
> > > C API doesn't really need the Terminal to function, but 
> it piggy backs
> > > on the Terminal's authentication somehow.  They could 
> stick in some
> > > other sort of authentication if they really wanted to.
> > >
> > > I could imagine them spinning off the C API codebase, 
> enhancing it,
> > > and then offering it as some other sort of product.  But 
> then again,
> > > although it's fast, the C API isn't terribly user 
> friendly - even for
> > > C programmers - so maybe their potential customers wouldn't be
> > > interested anyway.
> > >
> > > --
> > > Andrew Piskorski <atp at piskorski.com>
> > > http://www.piskorski.com/
> > >
> > > _______________________________________________
> > > R-sig-finance at stat.math.ethz.ch mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > >
> > > _______________________________________________
> > > R-sig-finance at stat.math.ethz.ch mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > >
> >
> > _______________________________________________
> > R-sig-finance at stat.math.ethz.ch mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >
>


From tariq.khan at gmail.com  Fri Feb 24 16:30:47 2006
From: tariq.khan at gmail.com (=?ISO-8859-1?Q?=A8Tariq_Khan?=)
Date: Fri, 24 Feb 2006 15:30:47 +0000
Subject: [R-sig-finance] [R] Bloomberg Data Import to R
In-Reply-To: <E585EABA11227445B918BFB74C1A4D363B9EA0@sanctum01.sanctumfi.com>
References: <E585EABA11227445B918BFB74C1A4D363B9EA0@sanctum01.sanctumfi.com>
Message-ID: <2310043c0602240730u2fe12620xe28e0383c509e42@mail.gmail.com>

OK, Robert, thanks for confirming that. I'm on my own then :-). Code
by Enrique Bengochea works on 2.01 for me, which is what I have been
using till now.

Thanks,

Tariq

On 2/24/06, Robert Sams <Robert at sanctumfi.com> wrote:
> Hi Tariq,
>
> I'm using 0.91-0 as well. I've tested blpConnect() on R versions 2.1.1 and 2.2.1 and have not come accross the problem you cite. hmm..
>
> Robert
>
> > -----Original Message-----
> > From: ?Tariq Khan [mailto:tariq.khan at gmail.com]
> > Sent: Thursday, February 23, 2006 9:44 AM
> > To: Robert Sams
> > Cc: McGehee, Robert; Andrew Piskorski;
> > R-sig-finance at stat.math.ethz.ch;
> > duncan at wald.ucdavis.edu
> > Subject: Re: [R-sig-finance] [R] Bloomberg Data Import to R
> >
> >
> > Dear Robert,
> >
> > I know this isn't an issue with RBloomeberg per se, but could you
> > please tell us which version of RDCOMClient to use? COMCreate() in
> > blpConnect() causes my instance of R to crash on 2.2.1, using
> > RDCOMClient 0.91-0, which is the latest version I was able to find on
> > Omegahat.
> >
> > Regards,
> >
> > Tariq
> >
> >
> > On 2/13/06, Robert Sams <Robert at sanctumfi.com> wrote:
> > > My package RBloomberg (v0.1-7) is now on CRAN.
> > >
> > > RBloomberg can make the following types of data requests to
> > the Bloomberg:
> > >        1. real-time snapshots
> > >        2. historical end-of-day
> > >        3. historical intraday bars
> > >        4. historical intraday tick-by-tick
> > > All calls are made via a single user function blpGetData.
> > For example:
> > >        conn <- blpConnect(iface="COM")
> > >        ## Historical
> > >        blpGetData(conn, "ED1 Comdty", "PX_LAST",
> > start=chron("1/1/06"), end=chron("1/31/06"))
> > >        ## Intraday bars (10min intervals)
> > >        blpGetData(conn, "ED1 Comdty", c("BID","ASK"),
> > start=chron("1/31/06", times="16:00:00"),
> > >        end=chron("1/31/06", times="17:00:00"),
> > barfields="OPEN", barsize=10)
> > >
> > > The design goal is an intuitive R user interface that is
> > abstracted from the details of the particular Bloomberg
> > interface used. Bloomberg presently offers three interfaces:
> > C, .NET and COM. All three are implemented as a desktop
> > product and (since late 2005) a server product that now
> > supports Linux on Intel hardware. blpGetData is a generic and
> > a method will eventually exist for each Bloomberg interface.
> > Currently, only the desktop COM interface is supported.
> > >
> > > Please use it, hack it and give me your feedback.
> > >
> > > Cheers,
> > > Robert
> > >
> > >
> > > > -----Original Message-----
> > > > From: McGehee, Robert [mailto:Robert.McGehee at geodecapital.com]
> > > > Sent: Friday, February 10, 2006 10:04 PM
> > > > To: Andrew Piskorski; r-sig-finance at stat.math.ethz.ch
> > > > Subject: Re: [R-sig-finance] [R] Bloomberg Data Import to R
> > > >
> > > >
> > > > We have implemented interfaces to both the C API and the .NET API.
> > > > However, it was my understanding that Bloomberg was
> > deprecating the C
> > > > API entirely in favor of the .NET API, so my company has been
> > > > moving our
> > > > data pulls to the new API system. If this is the case, it may be a
> > > > wrinkle for a package based on the C API.
> > > >
> > > > FYI: As a Bloomberg terminal is required to pull the data, we have
> > > > gotten around the Linux problem by setting up an Apache
> > server on a
> > > > Windows box with a Perl or C# wrapper that connects to
> > > > Bloomberg via the
> > > > respective API. We can then pull the data in from any
> > computer by just
> > > > querying the Apache server. Seems to work quite well. Of
> > > > course, someone
> > > > still needs to log into the Bloomberg each morning.
> > > >
> > > > --Robert
> > > >
> > > > -----Original Message-----
> > > > From: r-sig-finance-bounces at stat.math.ethz.ch
> > > > [mailto:r-sig-finance-bounces at stat.math.ethz.ch] On
> > Behalf Of Andrew
> > > > Piskorski
> > > > Sent: Friday, February 10, 2006 6:30 AM
> > > > To: r-sig-finance at stat.math.ethz.ch
> > > > Subject: Re: [R-sig-finance] [R] Bloomberg Data Import to R
> > > >
> > > > On Wed, Feb 08, 2006 at 08:42:19AM -0600, Dirk Eddelbuettel wrote:
> > > >
> > > > > Barely platform independent. Bloomberg supports only Windows and
> > > > Solaris, and
> > > > > I'd be surprised if there even were a dozen installations using
> > > > Solaris ...
> > > >
> > > > Last I heard, more than a year ago, Bloomberg was
> > actively trying to
> > > > get users off Solaris, setting deadlines for when it would be
> > > > desupported, etc.  Bloomberg on Solaris may be gone
> > completely by now,
> > > > I'm not sure.
> > > >
> > > > > So matter-of-factishly, it's Windoze-only. Just like the
> > > > COM solution.
> > > >
> > > > Yep.  Of course, if Bloomberg were suddenly to decide to
> > support their
> > > > Terminal on Linux or some other non-Windows operating system,
> > > > presumably they would continue to include the C API there as well.
> > > >
> > > > Also, Bloomberg seems to regard their C API as legacy software.  I
> > > > assume they won't be adding much new to it, but that also
> > means that
> > > > they're unlikely to change it enough to seriously break
> > it's latent
> > > > cross-platform-ness, however much of that it really has.  :)
> > > >
> > > > Presumably the Bloomberg Terminal codebase has been
> > becoming more and
> > > > more MS Windows centric, though.  My vague understanding
> > was that the
> > > > C API doesn't really need the Terminal to function, but
> > it piggy backs
> > > > on the Terminal's authentication somehow.  They could
> > stick in some
> > > > other sort of authentication if they really wanted to.
> > > >
> > > > I could imagine them spinning off the C API codebase,
> > enhancing it,
> > > > and then offering it as some other sort of product.  But
> > then again,
> > > > although it's fast, the C API isn't terribly user
> > friendly - even for
> > > > C programmers - so maybe their potential customers wouldn't be
> > > > interested anyway.
> > > >
> > > > --
> > > > Andrew Piskorski <atp at piskorski.com>
> > > > http://www.piskorski.com/
> > > >
> > > > _______________________________________________
> > > > R-sig-finance at stat.math.ethz.ch mailing list
> > > > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > > >
> > > > _______________________________________________
> > > > R-sig-finance at stat.math.ethz.ch mailing list
> > > > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > > >
> > >
> > > _______________________________________________
> > > R-sig-finance at stat.math.ethz.ch mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > >
> >
>


From Ricardo.Zambrano at corpbanca.cl  Fri Feb 24 17:02:23 2006
From: Ricardo.Zambrano at corpbanca.cl (Ricardo Zambrano Aguilera)
Date: Fri, 24 Feb 2006 13:02:23 -0300
Subject: [R-sig-finance] some doubts in garch models
Message-ID: <800F3C4ADCFCA643A919EF7C140A045A085EB970@LLANQUIHUE.corpgroup.cl>


	Thank a lot mr Diethelm Wuertz and mr Patrick Burns my best regards..., but then i have another doubt... and it is a big 
	if my data... the exchange rate (dollar (USA) - peso(Chile)), between 1-1-2001 - 12/12/2005, (i?m working with the log-returns), my first intention is to aplly an ARMA -GARCH , but  their Kurtosis is 1.182 < 3,  ? can i use an garch modelling??? , because sometimes ,like the 40% , when i did simulate garch procces ( i made like 1200 obs) , the kurtosis is nongreater to 3?? 
	atte a ustedes Ricardo Zambrano Aguilera


From patrick at burns-stat.com  Fri Feb 24 20:40:05 2006
From: patrick at burns-stat.com (Patrick Burns)
Date: Fri, 24 Feb 2006 19:40:05 +0000
Subject: [R-sig-finance] some doubts in garch models
In-Reply-To: <800F3C4ADCFCA643A919EF7C140A045A085EB970@LLANQUIHUE.corpgroup.cl>
References: <800F3C4ADCFCA643A919EF7C140A045A085EB970@LLANQUIHUE.corpgroup.cl>
Message-ID: <43FF6115.9080507@burns-stat.com>

Are you sure that you are getting kurtosis and not
excess kurtosis?  I've never seen market data that
weren't fat tailed.  If you have an example, I'm keen
to see it.

Using 'qqnorm' should give you a good visual clue.

Patrick Burns
patrick at burns-stat.com
+44 (0)20 8525 0696
http://www.burns-stat.com
(home of S Poetry and "A Guide for the Unwilling S User")

Ricardo Zambrano Aguilera wrote:

>	Thank a lot mr Diethelm Wuertz and mr Patrick Burns my best regards..., but then i have another doubt... and it is a big 
>	if my data... the exchange rate (dollar (USA) - peso(Chile)), between 1-1-2001 - 12/12/2005, (i?m working with the log-returns), my first intention is to aplly an ARMA -GARCH , but  their Kurtosis is 1.182 < 3,  ? can i use an garch modelling??? , because sometimes ,like the 40% , when i did simulate garch procces ( i made like 1200 obs) , the kurtosis is nongreater to 3?? 
>	atte a ustedes Ricardo Zambrano Aguilera
>
>_______________________________________________
>R-sig-finance at stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>
>
>  
>


From patrick at burns-stat.com  Fri Feb 24 22:01:56 2006
From: patrick at burns-stat.com (Patrick Burns)
Date: Fri, 24 Feb 2006 21:01:56 +0000
Subject: [R-sig-finance] some doubts in garch models
In-Reply-To: <800F3C4ADCFCA643A919EF7C140A045A085EB970@LLANQUIHUE.corpgroup.cl>
References: <800F3C4ADCFCA643A919EF7C140A045A085EB970@LLANQUIHUE.corpgroup.cl>
Message-ID: <43FF7444.6030106@burns-stat.com>

Your Kurtosis is actually excess kurtosis:

 > mean(((dolpeso - mean(dolpeso))/sd(dolpeso))^4)
[1] 4.182083

(Ricardo sent me the data privately.)

Patrick Burns
patrick at burns-stat.com
+44 (0)20 8525 0696
http://www.burns-stat.com
(home of S Poetry and "A Guide for the Unwilling S User")

Ricardo Zambrano Aguilera wrote:

>	Thank a lot mr Diethelm Wuertz and mr Patrick Burns my best regards..., but then i have another doubt... and it is a big 
>	if my data... the exchange rate (dollar (USA) - peso(Chile)), between 1-1-2001 - 12/12/2005, (i?m working with the log-returns), my first intention is to aplly an ARMA -GARCH , but  their Kurtosis is 1.182 < 3,  ? can i use an garch modelling??? , because sometimes ,like the 40% , when i did simulate garch procces ( i made like 1200 obs) , the kurtosis is nongreater to 3?? 
>	atte a ustedes Ricardo Zambrano Aguilera
>
>_______________________________________________
>R-sig-finance at stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>
>
>  
>


From ggrothendieck at gmail.com  Wed Mar  1 20:49:07 2006
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 1 Mar 2006 14:49:07 -0500
Subject: [R-sig-finance] data sources
Message-ID: <971536df0603011149g10f59a62wd4d97277477ac0d9@mail.gmail.com>

Is anyone aware of data sources, preferably free but
commercial if need be, for historical price
data (daily, weekly or even monthly would be ok)
for various broad asset classes.


From fparlamis at mac.com  Wed Mar  1 22:29:57 2006
From: fparlamis at mac.com (Parlamis Franklin)
Date: Wed, 1 Mar 2006 11:29:57 -1000
Subject: [R-sig-finance] accounting format
Message-ID: <EE59F3F4-1806-42F6-A5EB-48FBE426E94D@mac.com>

does anyone know a quick and dirty way to format numerics so that  
negative values appear as they do in accounting statements  
(surrounded by parentheses), rather than preceded by a negative sign?

i've been toying with format() and formatC(), but can't figure out  
how to do this.  thanks in advance.

franklin parlamis


From ggrothendieck at gmail.com  Wed Mar  1 22:43:14 2006
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 1 Mar 2006 16:43:14 -0500
Subject: [R-sig-finance] accounting format
In-Reply-To: <EE59F3F4-1806-42F6-A5EB-48FBE426E94D@mac.com>
References: <EE59F3F4-1806-42F6-A5EB-48FBE426E94D@mac.com>
Message-ID: <971536df0603011343t5a07ddfdlc2fb50bd6a9de198@mail.gmail.com>

Try this:

zz <- matrix(-10:13,6) * 100.11  # test data
format(ifelse(zz < 0, sprintf("(%.2f)", -zz), sprintf("%.2f ", zz)),
justify = "right")


On 3/1/06, Parlamis Franklin <fparlamis at mac.com> wrote:
> does anyone know a quick and dirty way to format numerics so that
> negative values appear as they do in accounting statements
> (surrounded by parentheses), rather than preceded by a negative sign?
>
> i've been toying with format() and formatC(), but can't figure out
> how to do this.  thanks in advance.
>
> franklin parlamis
>
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From pdebruic at gmail.com  Wed Mar  1 23:29:47 2006
From: pdebruic at gmail.com (Paul DeBruicker)
Date: Wed, 1 Mar 2006 17:29:47 -0500
Subject: [R-sig-finance] data sources
In-Reply-To: <971536df0603011149g10f59a62wd4d97277477ac0d9@mail.gmail.com>
References: <971536df0603011149g10f59a62wd4d97277477ac0d9@mail.gmail.com>
Message-ID: <f2e3401f0603011429g5749c6d8q2111d4b7cec8122b@mail.gmail.com>

Hi Gabor,

Here's a few places to start for monthly prices:

Wilshire has them for U.S. domestic equity and REIT indices back to
Jan 1979.  They're broken up by style and capitalization. You want
Return Since Inception, probably. Each index can be downloaded
individually as a *.csv file.
http://www.wilshire.com/Indexes/calculator/



MSCI has them for international equities and most of their other
indices.  You'll have to register and agree to their license.  I
forget how, exactly, you can access the data, but starting with the
"License & Data Download" button on the left hand side of the
http://www.msci.com website is where I'd start.  They go back into the
1970's as well.


Citigroup has them for American bonds (govt, corporate, agency,
mortgages) through the bloomberg with their BIG indices. enter SBI
<Go> on the Bloomberg to get the index tickers then download as you
normally would into R or Excel.  You can probably get international
bond information from them as well, but I haven't looked for them.

CRSP has their own index product for about $8,000 per year.  They
offer discounts based on assets under management.

FRED (The Federal Reserve in St. Louis) has loads of free time series
as well. http://research.stlouisfed.org/fred2/



Hope this helps


Paul DeBruicker



On 3/1/06, Gabor Grothendieck <ggrothendieck at gmail.com> wrote:
> Is anyone aware of data sources, preferably free but
> commercial if need be, for historical price
> data (daily, weekly or even monthly would be ok)
> for various broad asset classes.
>
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From jessen at econinfo.de  Thu Mar  2 07:22:27 2006
From: jessen at econinfo.de (Owe Jessen)
Date: Thu, 02 Mar 2006 07:22:27 +0100
Subject: [R-sig-finance] How did you start with R?
Message-ID: <44068F23.10203@econinfo.de>

Hi all,

I'm new to the R-Software, and would like to know, what literature you
recommend for learning R. Online or on paper, in English or German. Any
help apreciated.

Yours,
Owe Jessen

-- 
Owe Jessen
Diplom-Volkswirt
Hanssenstra?e 17
24106 Kiel

jessen at econinfo.de
http://www.econinfo.de

Festnetz 0431-89096
Mobil 0160-97780537
FAX 0941-599289096

-------------- next part --------------
A non-text attachment was scrubbed...
Name: jessen.vcf
Type: text/x-vcard
Size: 366 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060302/be066387/jessen.vcf

From vivek.satsangi at gmail.com  Thu Mar  2 13:47:43 2006
From: vivek.satsangi at gmail.com (Vivek Satsangi)
Date: Thu, 2 Mar 2006 07:47:43 -0500
Subject: [R-sig-finance] R-sig-finance Digest, Vol 22, Issue 1
In-Reply-To: <mailman.15.1141297203.30946.r-sig-finance@stat.math.ethz.ch>
References: <mailman.15.1141297203.30946.r-sig-finance@stat.math.ethz.ch>
Message-ID: <bcb171920603020447g7191f8ads2e5d973dbd094313@mail.gmail.com>

Gabor ,you may get traction by consulting a list that is in the FAQ
section of Wilmott forums.  (www.wilmott.com).  There were several
free sources listed there to my memory, but I don't remember if there
was a source for broad asset classes.

Vivek

>
> Message: 1
> Date: Wed, 1 Mar 2006 14:49:07 -0500
> From: "Gabor Grothendieck" <ggrothendieck at gmail.com>
> Subject: [R-sig-finance] data sources
> To: r-sig-finance <r-sig-finance at stat.math.ethz.ch>
> Message-ID:
>         <971536df0603011149g10f59a62wd4d97277477ac0d9 at mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
>
> Is anyone aware of data sources, preferably free but
> commercial if need be, for historical price
> data (daily, weekly or even monthly would be ok)
> for various broad asset classes.
>
>

--
-- Vivek Satsangi
Student, Rochester, NY USA


From rahul.maniar at feri.de  Thu Mar  2 14:04:17 2006
From: rahul.maniar at feri.de (Maniar, Rahul)
Date: Thu, 2 Mar 2006 14:04:17 +0100
Subject: [R-sig-finance] R-sig-finance Digest, Vol 22, Issue 1
Message-ID: <C15FE42FE42A5C4EAAD8ACCFF2C6125E2F9E6A@ferimail.feri.de>

One of the commercial database you might want to check out is http://www.globalfinancialdata.com/index.php3. They have data going back to 1800 in case of US stock market and also commodity market

-----Urspr?ngliche Nachricht-----
Von: r-sig-finance-bounces at stat.math.ethz.ch
[mailto:r-sig-finance-bounces at stat.math.ethz.ch]Im Auftrag von Vivek
Satsangi
Gesendet: Thursday, March 02, 2006 1:48 PM
An: r-sig-finance at stat.math.ethz.ch; ggrothendieck at gmail.com
Betreff: Re: [R-sig-finance] R-sig-finance Digest, Vol 22, Issue 1


Gabor ,you may get traction by consulting a list that is in the FAQ
section of Wilmott forums.  (www.wilmott.com).  There were several
free sources listed there to my memory, but I don't remember if there
was a source for broad asset classes.

Vivek

>
> Message: 1
> Date: Wed, 1 Mar 2006 14:49:07 -0500
> From: "Gabor Grothendieck" <ggrothendieck at gmail.com>
> Subject: [R-sig-finance] data sources
> To: r-sig-finance <r-sig-finance at stat.math.ethz.ch>
> Message-ID:
>         <971536df0603011149g10f59a62wd4d97277477ac0d9 at mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
>
> Is anyone aware of data sources, preferably free but
> commercial if need be, for historical price
> data (daily, weekly or even monthly would be ok)
> for various broad asset classes.
>
>

--
-- Vivek Satsangi
Student, Rochester, NY USA

_______________________________________________
R-sig-finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance


From fsaldan1 at gmail.com  Thu Mar  2 16:04:36 2006
From: fsaldan1 at gmail.com (Fernando Saldanha)
Date: Thu, 2 Mar 2006 10:04:36 -0500
Subject: [R-sig-finance] data sources
Message-ID: <10dee4690603020704x43cb2dcbjb625669c78f104b2@mail.gmail.com>

From: "Gabor Grothendieck" <ggrothendieck at gmail.com>

> Is anyone aware of data sources, preferably free but
> commercial if need be, for historical price
> data (daily, weekly or even monthly would be ok)
> for various broad asset classes.

Yahoo Finance has lots of historical data on stocks and indexes. For
example, for the Nasdaq 100, go to

http://finance.yahoo.com/q/hp?s=%5ENDX

FS


From Bernhard_Pfaff at fra.invesco.com  Thu Mar  2 16:55:58 2006
From: Bernhard_Pfaff at fra.invesco.com (Pfaff, Bernhard Dr.)
Date: Thu, 2 Mar 2006 15:55:58 -0000 
Subject: [R-sig-finance] How did you start with R?
Message-ID: <25D1C2585277D311B9A20000F6CCC71B077C0449@DEFRAEX02>

Hello Owe,

aside of the 'Introduction to R' which is shipped in your R installation,
you can browse through the numerous books available:

http://www.r-project.org/doc/bib/R-books.html 


As a start, very good and decent candidates are: [4] and [5]. Furthermore,
you can also browse through the contributed tutorials, see:
http://www.r-project.org/other-docs.html as well as approrpiate articles in
RNews: http://cran.r-project.org/doc/Rnews

Aside of all these sources the following URLs might be of interest:

http://www.sciviews.org/_rgui/wiki/doku.php
http://zoonek2.free.fr/UNIX/48_R/all.html
http://people.su.se/~ma/R_intro/
http://people.su.se/~ma/R_intro/

Dectecting from your email signature, you might be interested in having a
look on the task views 'econometrics' and 'finance', see
http://cran.at.r-project.org/src/contrib/Views/ as additional packages
whence you are familiar with R and want to apply certain methods.

Depending in which kind of statistical/econometric field you want to utilize
R, I am pretty sure that you will find at least the relevant sources that
serve as starting point.

Cheers,
Bernhard





-----Urspr?ngliche Nachricht-----
Von: Owe Jessen [mailto:jessen at econinfo.de] 
Gesendet: Donnerstag, 2. M?rz 2006 07:22
An: r-sig-finance at stat.math.ethz.ch
Betreff: [R-sig-finance] How did you start with R?

Hi all,

I'm new to the R-Software, and would like to know, what literature you
recommend for learning R. Online or on paper, in English or German. Any
help apreciated.

Yours,
Owe Jessen

-- 
Owe Jessen
Diplom-Volkswirt
Hanssenstra?e 17
24106 Kiel

jessen at econinfo.de
http://www.econinfo.de

Festnetz 0431-89096
Mobil 0160-97780537
FAX 0941-599289096
*****************************************************************
Confidentiality Note: The information contained in this mess...{{dropped}}


From timh at insightful.com  Thu Mar  2 23:10:41 2006
From: timh at insightful.com (Tim Hesterberg)
Date: 2 Mar 2006 14:10:41 -0800
Subject: [R-sig-finance] [QUAR] Re:  some doubts in garch models
In-Reply-To: <43FF6115.9080507@burns-stat.com> (message from Patrick Burns on
	Fri, 24 Feb 2006 19:40:05 +0000)
References: <800F3C4ADCFCA643A919EF7C140A045A085EB970@LLANQUIHUE.corpgroup.cl>
	<43FF6115.9080507@burns-stat.com>
Message-ID: <SE2KEXCH01jWQK3zrwz00000518@se2kexch01.insightful.com>

Note that different people use different terminology.

The terminology I see most is:
	kurtosis = E((X-mu)^4) / var(X)^2 - 3
With this terminology, kurtosis > 0 indicates longer tails than Gaussian.
The S-PLUS kurtosis function computes this kurtosis.

Alternate terminology:
	excess kurtosis = E((X-mu)^4) / var(X)^2 - 3
	kurtosis = E((X-mu)^4) / var(X)^2

Tim Hesterberg

========================================================
| Tim Hesterberg       Research Scientist              |
| timh at insightful.com  Insightful Corp.                |
| (206)802-2319        1700 Westlake Ave. N, Suite 500 |
| (206)283-8691 (fax)  Seattle, WA 98109-3012, U.S.A.  |
|                      www.insightful.com/Hesterberg   |
========================================================

>Are you sure that you are getting kurtosis and not
>excess kurtosis?  I've never seen market data that
>weren't fat tailed.  If you have an example, I'm keen
>to see it.
>
>Using 'qqnorm' should give you a good visual clue.
>
>Patrick Burns
>patrick at burns-stat.com
>+44 (0)20 8525 0696
>http://www.burns-stat.com
>(home of S Poetry and "A Guide for the Unwilling S User")
>
>Ricardo Zambrano Aguilera wrote:
>
>>	Thank a lot mr Diethelm Wuertz and mr Patrick Burns my best regards..., but then i have another doubt... and it is a big 
>>	if my data... the exchange rate (dollar (USA) - peso(Chile)), between 1-1-2001 - 12/12/2005, (i?m working with the log-returns), my first intention is to aplly an ARMA -GARCH , but  their Kurtosis is 1.182 < 3,  ? can i use an garch modelling??? , because sometimes ,like the 40% , when i did simulate garch procces ( i made like 1200 obs) , the kurtosis is nongreater to 3?? 
>>	atte a ustedes Ricardo Zambrano Aguilera


From ajayshah at mayin.org  Fri Mar  3 17:03:32 2006
From: ajayshah at mayin.org (Ajay Narottam Shah)
Date: Fri, 3 Mar 2006 21:33:32 +0530
Subject: [R-sig-finance] How did you start with R?
In-Reply-To: <25D1C2585277D311B9A20000F6CCC71B077C0449@DEFRAEX02>
References: <25D1C2585277D311B9A20000F6CCC71B077C0449@DEFRAEX02>
Message-ID: <20060303160332.GE298@lubyanka.local>

On Thu, Mar 02, 2006 at 03:55:58PM -0000, Pfaff, Bernhard Dr. wrote:
> Hello Owe,
> 
> aside of the 'Introduction to R' which is shipped in your R installation,
> you can browse through the numerous books available:
> 
> http://www.r-project.org/doc/bib/R-books.html 
> 
> As a start, very good and decent candidates are: [4] and [5]. Furthermore,
> you can also browse through the contributed tutorials, see:
> http://www.r-project.org/other-docs.html as well as approrpiate articles in
> RNews: http://cran.r-project.org/doc/Rnews
> 
> Aside of all these sources the following URLs might be of interest:
> 
> http://www.sciviews.org/_rgui/wiki/doku.php
> http://zoonek2.free.fr/UNIX/48_R/all.html
> http://people.su.se/~ma/R_intro/
> http://people.su.se/~ma/R_intro/

If I may add a URL to this list:
   http://www.mayin.org/ajayshah/KB/R
is a set of examples. It is useful for people who don't like to read
manuals and like to start writing code, and can guess the BNF of the
language they're dealing with by looking at working code fragments :-).

-- 
Ajay Shah                                      http://www.mayin.org/ajayshah  
ajayshah at mayin.org                             http://ajayshahblog.blogspot.com
<*(:-? - wizard who doesn't know the answer.


From stefan.albrecht at allianz.com  Mon Mar  6 10:50:24 2006
From: stefan.albrecht at allianz.com (stefan.albrecht@allianz.com)
Date: Mon, 6 Mar 2006 10:50:24 +0100
Subject: [R-sig-finance] data sources
Message-ID: <OFC99BDB85.418C06E6-ONC1257129.00350447-C1257129.00360DE1@inside.allianz.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060306/d0f8895e/attachment.pl

From ecu at info.fundp.ac.be  Mon Mar  6 12:44:31 2006
From: ecu at info.fundp.ac.be (Cuvelier Etienne)
Date: Mon, 06 Mar 2006 12:44:31 +0100
Subject: [R-sig-finance] Stock price distributions data
Message-ID: <5.2.0.9.0.20060306122500.021f6a98@localhost>

Hello,
Perhaps slightly out of topics, but for a research purpose, I search for stock price distributions data.
I want to test a classification method on this type of data.
I suppose it's possible to compute the distributions of a stock with the historical data, but I don't want to deal with this, because  I don't know how to choose the theorical distribution to fit.
Is anybody knows if this type of data is available, or if someone have this type of data, I'm interested (collaborations are welcome).

Thank you very much


======================================
+                                                                             
+ Cuvelier Etienne                                                    
+ Assistant                                                             
+ FUNDP - Institut d'Informatique                              
+ rue Grandgagnage, 21   B-5000 Namur (Belgique)
+ tel: 32.81.72.49.93    fax: 32.81.72.49.67
+
======================================
In God we trust all others must bring data" 
        W. Edwards Deming


From ggrothendieck at gmail.com  Mon Mar  6 15:33:50 2006
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 6 Mar 2006 09:33:50 -0500
Subject: [R-sig-finance] data sources
In-Reply-To: <OFC99BDB85.418C06E6-ONC1257129.00350447-C1257129.00360DE1@inside.allianz.de>
References: <OFC99BDB85.418C06E6-ONC1257129.00350447-C1257129.00360DE1@inside.allianz.de>
Message-ID: <971536df0603060633w32563981l1c56d4bf502765a3@mail.gmail.com>

Hi, Thanks for the info.  Regards.

On 3/6/06, stefan.albrecht at allianz.com <stefan.albrecht at allianz.com> wrote:
>
> Dear Gabor,
>
> we use Datastream and Venture Economics.
> http://www.thomson.com/financial/financial.jsp
>
> Bloomberg has also time series, although they are in my (outdated)
> experience not as long as the ones from Datastream. Access to Bloomberg
> might be difficult without a Bloomberg terminal.
>
> Some people also use LIM
> http://www.lim.com/
> though I have no experience with it.
>
> All these are, of course, not for free at all.
>
> Best regards,
> Stefan
>
>
> Gabor Grothendieck ggrothendieck at gmail.com
> Wed Mar 1 20:49:07 CET 2006
> Previous message: [R-sig-finance] some doubts in garch models
> Next message: [R-sig-finance] data sources
> Messages sorted by: [ date ] [ thread ] [ subject ] [ author ]
> ________________________________
>
>
> Is anyone aware of data sources, preferably free but
> commercial if need be, for historical price
> data (daily, weekly or even monthly would be ok)
> for various broad asset classes.
>
>


From steve.miller at jhu.edu  Mon Mar  6 16:30:47 2006
From: steve.miller at jhu.edu (steve miller)
Date: Mon, 6 Mar 2006 09:30:47 -0600
Subject: [R-sig-finance] data sources
References: <10dee4690603020704x43cb2dcbjb625669c78f104b2@mail.gmail.com>
Message-ID: <015501c64132$f2481ba0$0a00a8c0@Linux>

Russell:
http://www.russell.com/US/Indexes/US/index_values.asp

MSCI:
http://www.msci.com/us/indexperf/index.html

French/Fama:
http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html

Wilshire:
http://www.wilshire.com/Indexes/calculator/

Barra:
http://www.barra.com/Research/DownloadMonthlyReturns.aspx

Steve Miller

----- Original Message ----- 
From: "Fernando Saldanha" <fsaldan1 at gmail.com>
To: <r-sig-finance at stat.math.ethz.ch>
Sent: Thursday, March 02, 2006 9:04 AM
Subject: Re: [R-sig-finance] data sources


> From: "Gabor Grothendieck" <ggrothendieck at gmail.com>
> 
>> Is anyone aware of data sources, preferably free but
>> commercial if need be, for historical price
>> data (daily, weekly or even monthly would be ok)
>> for various broad asset classes.
> 
> Yahoo Finance has lots of historical data on stocks and indexes. For
> example, for the Nasdaq 100, go to
> 
> http://finance.yahoo.com/q/hp?s=%5ENDX
> 
> FS
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From stefano.iacus at unimi.it  Tue Mar  7 11:56:58 2006
From: stefano.iacus at unimi.it (stefano iacus)
Date: Tue, 07 Mar 2006 11:56:58 +0100
Subject: [R-sig-finance] data sources
In-Reply-To: <015501c64132$f2481ba0$0a00a8c0@Linux>
References: <10dee4690603020704x43cb2dcbjb625669c78f104b2@mail.gmail.com>
	<015501c64132$f2481ba0$0a00a8c0@Linux>
Message-ID: <70C40BE6-EDDB-47A1-B4B7-2231D4A3911D@unimi.it>

Can I suggest to add all these useful links to the Cran TaskView on  
Finance.

stefano

Il giorno 06/mar/06, alle ore 16:30, steve miller ha scritto:

> Russell:
> http://www.russell.com/US/Indexes/US/index_values.asp
>
> MSCI:
> http://www.msci.com/us/indexperf/index.html
>
> French/Fama:
> http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/ 
> data_library.html
>
> Wilshire:
> http://www.wilshire.com/Indexes/calculator/
>
> Barra:
> http://www.barra.com/Research/DownloadMonthlyReturns.aspx
>
> Steve Miller
>
> ----- Original Message -----
> From: "Fernando Saldanha" <fsaldan1 at gmail.com>
> To: <r-sig-finance at stat.math.ethz.ch>
> Sent: Thursday, March 02, 2006 9:04 AM
> Subject: Re: [R-sig-finance] data sources
>
>
>> From: "Gabor Grothendieck" <ggrothendieck at gmail.com>
>>
>>> Is anyone aware of data sources, preferably free but
>>> commercial if need be, for historical price
>>> data (daily, weekly or even monthly would be ok)
>>> for various broad asset classes.
>>
>> Yahoo Finance has lots of historical data on stocks and indexes. For
>> example, for the Nasdaq 100, go to
>>
>> http://finance.yahoo.com/q/hp?s=%5ENDX
>>
>> FS
>>
>> _______________________________________________
>> R-sig-finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>
>
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance


From edd at debian.org  Tue Mar  7 17:32:46 2006
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 7 Mar 2006 10:32:46 -0600
Subject: [R-sig-finance] [R] [R-pkgs] New package 'portfolio'
In-Reply-To: <17420.32154.96149.92683@gargle.gargle.HOWL>
References: <17420.32154.96149.92683@gargle.gargle.HOWL>
Message-ID: <17421.46510.329109.139713@basebud.nulle.part>


FYI -- maybe the audience on this list would have follow-up and comment?

Dirk

On 6 March 2006 at 13:21, Jeff Enos wrote:
| We would like to announce the availability of the 'portfolio' package
| in R for analysing equity portfolios.  Version 0.2-0 is now available
| on CRAN.  To take a look, you can:
| 
| > install.packages("portfolio")
| ...
| > vignette("portfolio")
| 
| and play around. Those who would just like to check out an
| introduction can simply look at:
| 
| http://www.kanecap.com/R/portfolio/portfolio.pdf
| 
| This is the first, very rough version of a package that we hope to
| build and extend over the coming months. Our ambitions for this
| project are not small. Hundreds of professionals around the world use
| R for portfolio analysis but, right now, we all use our own individual
| tools for doing so. That seems a shame.
| 
| Of course, one reason for the lack of cooperation is that finance is
| largely a zero sum game. Every dollar that we make is a dollar that
| someone else loses. But, at least when it comes to analysis tools
| (rather than alpha generation). This conflict does not seem
| insurmountable. We will see.
| 
| So, consider this e-mail a call for comment and cooperation. Are there
| others out there who would be interested in using this package? Are
| there others willing to contribute, if only in terms of bug fixes,
| test cases, documentation and the like? Please let us know and, in
| fact, let the whole list know.
| 
| By releasing a rough version of the package, we are especially
| interested in recruiting other developers to the project. None of our
| design decisions are set in stone. Serious offers to contribute will
| earn a significant say in future development.
| 
| Dave Kane
| Jeff Enos
| 
| _______________________________________________
| R-packages mailing list
| R-packages at stat.math.ethz.ch
| https://stat.ethz.ch/mailman/listinfo/r-packages
| 
| ______________________________________________
| R-help at stat.math.ethz.ch mailing list
| https://stat.ethz.ch/mailman/listinfo/r-help
| PLEASE do read the posting guide! http://www.R-project.org/posting-guide.html

-- 
Hell, there are no rules here - we're trying to accomplish something. 
                                                  -- Thomas A. Edison


From edd at debian.org  Wed Mar  8 02:58:42 2006
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 7 Mar 2006 19:58:42 -0600
Subject: [R-sig-finance] data sources
In-Reply-To: <70C40BE6-EDDB-47A1-B4B7-2231D4A3911D@unimi.it>
References: <10dee4690603020704x43cb2dcbjb625669c78f104b2@mail.gmail.com>
	<015501c64132$f2481ba0$0a00a8c0@Linux>
	<70C40BE6-EDDB-47A1-B4B7-2231D4A3911D@unimi.it>
Message-ID: <17422.14930.271000.747982@basebud.nulle.part>


On 7 March 2006 at 11:56, stefano iacus wrote:
| Can I suggest to add all these useful links to the Cran TaskView on  
| Finance.

Good idea, I've put it on the TODO list for the Finance Taskview.

By the same token, shouldn't the CRANmasters add links to the nice documents
that Bernhard reminded us of, as well as Ajay's KB (which, as I recall, is
already referenced from the Econometrics Taskview).

Dirk
 
-- 
Hell, there are no rules here - we're trying to accomplish something. 
                                                  -- Thomas A. Edison


From vivek.satsangi at gmail.com  Wed Mar  8 14:15:37 2006
From: vivek.satsangi at gmail.com (Vivek Satsangi)
Date: Wed, 8 Mar 2006 08:15:37 -0500
Subject: [R-sig-finance] [R] [R-pkgs] New package 'portfolio' (Dirk
	Eddelbuettel)
Message-ID: <bcb171920603080515r3de6d4cdp33a1047ce77992b9@mail.gmail.com>

I volunteer to help with this effort. I am new to R, but I have some
background in C/C++/Java (rusty, however). I also have the impediement
of having only small measure of a clue ;-) since I am also brand new
to finance.

If someone can guide me on the "here is what we want you to do", I am
happy to bang my head against the code. I am most interested in the
work to add "real world" constraints (not just linear rules) to the
POP optimizer as a way to validate known anomaly research.

>> Quoted material
FYI -- maybe the audience on this list would have follow-up and comment?

Dirk


From roger.bos at gmail.com  Thu Mar  9 14:58:10 2006
From: roger.bos at gmail.com (roger bos)
Date: Thu, 9 Mar 2006 08:58:10 -0500
Subject: [R-sig-finance] [R] [R-pkgs] New package 'portfolio'
In-Reply-To: <17421.46510.329109.139713@basebud.nulle.part>
References: <17420.32154.96149.92683@gargle.gargle.HOWL>
	<17421.46510.329109.139713@basebud.nulle.part>
Message-ID: <1db726800603090558u29af5bo2676e4a2578cbe54@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060309/0e361302/attachment.pl

From roger.bos at gmail.com  Thu Mar  9 15:20:13 2006
From: roger.bos at gmail.com (roger bos)
Date: Thu, 9 Mar 2006 09:20:13 -0500
Subject: [R-sig-finance] [R] [R-pkgs] New package 'portfolio'
In-Reply-To: <1db726800603090558u29af5bo2676e4a2578cbe54@mail.gmail.com>
References: <17420.32154.96149.92683@gargle.gargle.HOWL>
	<17421.46510.329109.139713@basebud.nulle.part>
	<1db726800603090558u29af5bo2676e4a2578cbe54@mail.gmail.com>
Message-ID: <1db726800603090620n3a0b2f75o5bff2ab96e886cbb@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060309/3c562221/attachment.pl

From enrique.bengoechea at credit-suisse.com  Thu Mar  9 15:43:30 2006
From: enrique.bengoechea at credit-suisse.com (Enrique Bengoechea)
Date: Thu, 9 Mar 2006 15:43:30 +0100
Subject: [R-sig-finance] Fund ratios with lagged correlations
Message-ID: <OFD945C08C.9F7230E2-ONC125712C.004FD14B@credit-suisse.com>





Hi, I'm having a problem computing funds ratios such as alpha, beta, tracking error, etc, and maybe the list wisdom can be of help  :-)

I have daily NAVs and values of luxembourg funds and their benchmarks. Most funds investing in the US have a delay on its NAV of 1 day with respect to benchmarks such as S&P500. I find this easily using the ccf function, and then I just compute the ratios
of the delayed (returns of the) NAVs with respect to (returns of) the benchmark.

The problem is that with some markets (e.g. south american funds) the correlation between the fund and its benchmarks is splitted between the current day and the previous day. I find this by testing that none of the series exhibits significant serial
autocorrelation, but the cross-correlations are high for both the 0 and 1 lag (say 0.5 and 0.5, or 0.7 and 0.4). With products that trade continuously I can solve this problem by taking into account timezones and using prices at specific times of the day,
but with funds and many indexes only end-of-day values are available.

Has someone faced this problem? How do you adapt the beta/correlation/etc computations to handle this issue and come up with sensible estimates? Any paper dealing with this topic?

Thanks in advance!!!

Enrique


From jessen at econinfo.de  Thu Mar  9 16:30:08 2006
From: jessen at econinfo.de (Owe Jessen)
Date: Thu, 09 Mar 2006 16:30:08 +0100
Subject: [R-sig-finance] How did you start with R?
Message-ID: <44104A00.2090601@econinfo.de>

Thanks to all... it was amazing to get such a feedback to my innocent
little question. Will take me some time to work through it all. I hope
to get around to compile a list with my feedback to your suggestions.

Yours,
Owe

-- 
Owe Jessen
Diplom-Volkswirt
Hanssenstra?e 17
24106 Kiel

jessen at econinfo.de
http://www.econinfo.de

Festnetz 0431-89096
Mobil 0160-97780537
FAX 0941-599289096

-------------- next part --------------
A non-text attachment was scrubbed...
Name: jessen.vcf
Type: text/x-vcard
Size: 366 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060309/99274b6a/jessen.vcf

From gyollin at insightful.com  Thu Mar  9 18:11:18 2006
From: gyollin at insightful.com (Guy Yollin)
Date: Thu, 9 Mar 2006 09:11:18 -0800
Subject: [R-sig-finance] Positions available: software engineering for
	quantitative finance with Insightful in Seattle
Message-ID: <F90D76D3C7CC6A41B6E2E6F88CA8252E229BB0@se2kexch01.insightful.com>

Insightful currently has two software engineering positions open in the
quantitative finance area:

Senior Software Engineer: Quantitative Finance

Software Engineer: Data Integration

Please see our website for details:

www.insightful.com

Best,

-- Guy



Guy Yollin
Senior Financial Engineer
Insightful Corporation
www.insightful.com
gyollin at insightful.com


From jeff at kanecap.com  Thu Mar  9 19:01:19 2006
From: jeff at kanecap.com (Jeff Enos)
Date: Thu, 9 Mar 2006 13:01:19 -0500
Subject: [R-sig-finance] [R] [R-pkgs] New package 'portfolio'
In-Reply-To: <1db726800603090558u29af5bo2676e4a2578cbe54@mail.gmail.com>
References: <17420.32154.96149.92683@gargle.gargle.HOWL>
	<17421.46510.329109.139713@basebud.nulle.part>
	<1db726800603090558u29af5bo2676e4a2578cbe54@mail.gmail.com>
Message-ID: <17424.28015.521861.220550@gargle.gargle.HOWL>

Roger,

roger bos writes:
 > Jeff/Dave,
 > 
 > The seven page summary doc looks nice and I would be interested in helping
 > out.  I use R for my alpha models and would like to start using the porfolio
 > class to test portfolio construction strategies.  You have a nice start.  I
 > would be happy to help by maybe adding a measure of turnover, maybe we could
 > have some sort of transaction cost measure that could be taken into account
 > when calculating returns.

Thanks for your interest.  I recommend taking a look at the
documentation, examples (especially in the help for
'portfolioBasic-class' and 'portfolioHistory-class'), and the code
itself; the two package vignettes you'll find include the intro doc
you've already mentioned.  Then we could discuss ways in which
measures of turnover and transaction costs could be incorporated into
the package.

 > But first I need to learn a lot more about the
 > library.  I can't even find the help page.  ?portfolio turns up nothing.

There is no help alias for 'portfolio', but calling

help(package = "portfolio")

should list the 15 help files available.

 > help.search("portfolioHistory") turns up the following, but I can't find
 > help using any of those names either:
 > 
 > Help files with alias or concept or title matching 'portfolioHistory'
 > using fuzzy matching:
 > 
 >  global.2004.history(portfolio)
 >                         portfolioHistory object formed from the
 >                         global.2004 dataset
 > portfolioHistory-class(portfolio)
 >                         Class "portfolioHistory"
 > 
 >  Type 'help(FOO, package = PKG)' to inspect entry 'FOO(PKG) TITLE'.
 > 
 > ?portfolioHistory-class
 > 
 > ?"portfolio"
 > 
 > help(portfolioHistory, package=portfolio)
 > None of the above attemps work for me.  Any hints you can give me.

Have you loaded the package?  Calls to 'help' with only a package
argument and calls to 'help.search' as above will return information
even if you haven't.  I have not included S4 class name aliases in the
package, so

?portfolioHistory

will not succeed while

?portfolioHistory-class
class?portfolioHistory

should.

Hope that helps,

Jeff


From roger.bos at gmail.com  Thu Mar  9 20:00:21 2006
From: roger.bos at gmail.com (roger bos)
Date: Thu, 9 Mar 2006 14:00:21 -0500
Subject: [R-sig-finance] [R] [R-pkgs] New package 'portfolio'
In-Reply-To: <17424.28015.521861.220550@gargle.gargle.HOWL>
References: <17420.32154.96149.92683@gargle.gargle.HOWL>
	<17421.46510.329109.139713@basebud.nulle.part>
	<1db726800603090558u29af5bo2676e4a2578cbe54@mail.gmail.com>
	<17424.28015.521861.220550@gargle.gargle.HOWL>
Message-ID: <1db726800603091100v440649el9dc1688e861b17d0@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060309/a36ebade/attachment.pl

From edd at debian.org  Fri Mar 10 03:57:40 2006
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 9 Mar 2006 20:57:40 -0600
Subject: [R-sig-finance] Fund ratios with lagged correlations
In-Reply-To: <OFD945C08C.9F7230E2-ONC125712C.004FD14B@credit-suisse.com>
References: <OFD945C08C.9F7230E2-ONC125712C.004FD14B@credit-suisse.com>
Message-ID: <17424.60196.467150.85108@basebud.nulle.part>


On 9 March 2006 at 15:43, Enrique Bengoechea wrote:
| Hi, I'm having a problem computing funds ratios such as alpha, beta, tracking error, etc, and maybe the list wisdom can be of help  :-)
| 
| I have daily NAVs and values of luxembourg funds and their benchmarks. Most funds investing in the US have a delay on its NAV of 1 day with respect to benchmarks such as S&P500. I find this easily using the ccf function, and then I just compute the ratios
| of the delayed (returns of the) NAVs with respect to (returns of) the benchmark.
| 
| The problem is that with some markets (e.g. south american funds) the correlation between the fund and its benchmarks is splitted between the current day and the previous day. I find this by testing that none of the series exhibits significant serial
| autocorrelation, but the cross-correlations are high for both the 0 and 1 lag (say 0.5 and 0.5, or 0.7 and 0.4). With products that trade continuously I can solve this problem by taking into account timezones and using prices at specific times of the day,
| but with funds and many indexes only end-of-day values are available.
| 
| Has someone faced this problem? How do you adapt the beta/correlation/etc computations to handle this issue and come up with sensible estimates? Any paper dealing with this topic?

I'd try the ccf() over longer return periods -- say two-day returns or
five-day returns.

Hope this helps,  Dirk

-- 
Hell, there are no rules here - we're trying to accomplish something. 
                                                  -- Thomas A. Edison


From patrick at burns-stat.com  Fri Mar 10 15:25:11 2006
From: patrick at burns-stat.com (Patrick Burns)
Date: Fri, 10 Mar 2006 14:25:11 +0000
Subject: [R-sig-finance] Fund ratios with lagged correlations
Message-ID: <44118C47.7060709@burns-stat.com>

One solution to the problem is in Burns, Engle and Mezrich(1998)
 "Correlations and Volatilities of Asynchronous Data".
The working paper version is available at ucsd.edu.

That solution is to fit a multivariate MA(1) and then 
transform to get synchronized values.  The paper is 
written in terms of multivariate GARCH estimation, but 
my impression is that the MA estimation is quite robust 
to GARCH effects even if you don't fit them.

The idea of using lower frequency returns has been
suggested.  In experiments that I've tried (on equity
indices), it looked like weekly returns was about right
to get rid of the asynchrony.  (Though if your series
are close in time, you might be able to get away with
less aggregation.)


Patrick Burns
patrick at burns-stat.com
+44 (0)20 8525 0696
http://www.burns-stat.com
(home of S Poetry and "A Guide for the Unwilling S User")

Enrique Bengoechea wrote:

>
>
>Hi, I'm having a problem computing funds ratios such as alpha, beta, tracking error, etc, and maybe the list wisdom can be of help  :-)
>
>I have daily NAVs and values of luxembourg funds and their benchmarks. Most funds investing in the US have a delay on its NAV of 1 day with respect to benchmarks such as S&P500. I find this easily using the ccf function, and then I just compute the ratios
>of the delayed (returns of the) NAVs with respect to (returns of) the benchmark.
>
>The problem is that with some markets (e.g. south american funds) the correlation between the fund and its benchmarks is splitted between the current day and the previous day. I find this by testing that none of the series exhibits significant serial
>autocorrelation, but the cross-correlations are high for both the 0 and 1 lag (say 0.5 and 0.5, or 0.7 and 0.4). With products that trade continuously I can solve this problem by taking into account timezones and using prices at specific times of the day,
>but with funds and many indexes only end-of-day values are available.
>
>Has someone faced this problem? How do you adapt the beta/correlation/etc computations to handle this issue and come up with sensible estimates? Any paper dealing with this topic?
>
>Thanks in advance!!!
>
>Enrique
>
>_______________________________________________
>R-sig-finance at stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>
>
>  
>


From jeff at kanecap.com  Fri Mar 10 16:29:18 2006
From: jeff at kanecap.com (Jeff Enos)
Date: Fri, 10 Mar 2006 10:29:18 -0500
Subject: [R-sig-finance] [R] [R-pkgs] New package 'portfolio'
In-Reply-To: <1db726800603091100v440649el9dc1688e861b17d0@mail.gmail.com>
References: <17420.32154.96149.92683@gargle.gargle.HOWL>
	<17421.46510.329109.139713@basebud.nulle.part>
	<1db726800603090558u29af5bo2676e4a2578cbe54@mail.gmail.com>
	<17424.28015.521861.220550@gargle.gargle.HOWL>
	<1db726800603091100v440649el9dc1688e861b17d0@mail.gmail.com>
Message-ID: <17425.39758.920879.104057@gargle.gargle.HOWL>

Roger,

 > 1) I see that summary(p) shows you the first few names in a portfolio.  Is
 > there a way to see all the holdings (say all 50)?

The number of stocks to display in summary() hasn't yet been
parameterized, so the easiest way for now is to work with the data
frames in the 'weights' and 'shares' (for objects of class
'portfolio') slots.

 > 2) Is there a way to creat a long only portfolio.  If I have a dataframe of
 > 20 stocks and tell it to make a portfolio of size 20, it tells me there are
 > not enough stocks becaue it wants to go long 20 and short 20.  I only want
 > long portfolios.

Setting the 'sides' slot to c("long") will allow you to create a
long-only portfolio.  There's an example of a simple long-only
portfolio in class?portfolioBasic and in the beginning of
vignette("portfolio").

 > 3) Also, how best to cap weight the portfolio?

Right now the user must supply all required data to the 'data' slot of
portfolioBasic objects.  So, if you wanted to create a cap-weighted
portfolio you'd need to have a measure of cap already in your data
frame.

A portfolio created with type = "relative" will interpret the column
of the 'data' slot specified by the 'in.var' slot as position
proportions.

Here's a simple example using one of the package's data sets:

data(dow.jan.2005)
p <- new("portfolioBasic",
         size   = "all",
         type   = "relative",
         id.var = "symbol",
         in.var = "cap.bil",
         data   = dow.jan.2005)

 > 4) Can you give me an example of how to view/modify the code?

Let's discuss this off-list.

Jeff


From ezivot at u.washington.edu  Mon Mar 13 19:05:46 2006
From: ezivot at u.washington.edu (Eric Zivot)
Date: Mon, 13 Mar 2006 10:05:46 -0800
Subject: [R-sig-finance] book and website announcement
Message-ID: <003501c646c8$c12811b0$6412fc0a@zivotd800>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060313/21e2f6e7/attachment.pl

From sean.oriordain at gmail.com  Mon Mar 13 20:32:21 2006
From: sean.oriordain at gmail.com (Sean O'Riordain)
Date: Mon, 13 Mar 2006 19:32:21 +0000
Subject: [R-sig-finance] book and website announcement
In-Reply-To: <003501c646c8$c12811b0$6412fc0a@zivotd800>
References: <003501c646c8$c12811b0$6412fc0a@zivotd800>
Message-ID: <8ed68eed0603131132pccb5894r@mail.gmail.com>

Hi Eric,

It seems like a very interesting book, but in the summary on the
webpage, it doesn't seem to work with R, is this correct?  As an
researcher who is not attached to any institution at the moment, I
could not possibly afford to pay for S-Plus and S+FinMetrics, but then
why would I when R is where its happening anyway!

cheers,
Sean


On 13/03/06, Eric Zivot <ezivot at u.washington.edu> wrote:
> The 2nd Edition of my book (with Jiahui Wang) Modeling Financial Time Series
> with S-PLUS has recently been published by Springer-Verlag. The 2nd Edition
> is updated to cover S-PLUS 7 and S+FinMetrics 2.0. I have also created a
> website for the 2nd Edition, which can be found at
>
>
>
> http://faculty.washington.edu/ezivot/MFTS2ndEdition.htm
>
>
>
> The website contains scripts for all of the examples in the book, as well as
> a substantial amount of additional material and examples.
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From enrique.bengoechea at credit-suisse.com  Tue Mar 14 15:08:59 2006
From: enrique.bengoechea at credit-suisse.com (Enrique Bengoechea)
Date: Tue, 14 Mar 2006 15:08:59 +0100
Subject: [R-sig-finance] Fund ratios with lagged correlations
Message-ID: <OF61C672FC.2736F834-ONC1257131.004D8B53@credit-suisse.com>





Thanks Patrick, Dirk and Stefan, yours answers have been very useful!!

Best,

Enrique


From phddas at yahoo.com  Thu Mar 16 08:36:19 2006
From: phddas at yahoo.com (Fred J.)
Date: Wed, 15 Mar 2006 23:36:19 -0800 (PST)
Subject: [R-sig-finance] price break down
Message-ID: <20060316073619.6645.qmail@web54603.mail.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060315/672802ec/attachment.pl

From spencer.graves at pdf.com  Tue Mar 21 03:11:41 2006
From: spencer.graves at pdf.com (Spencer Graves)
Date: Mon, 20 Mar 2006 18:11:41 -0800
Subject: [R-sig-finance] price break down
In-Reply-To: <20060316073619.6645.qmail@web54603.mail.yahoo.com>
References: <20060316073619.6645.qmail@web54603.mail.yahoo.com>
Message-ID: <441F60DD.6030001@pdf.com>

	  Nearly all computations in R are to double precision, and I would not 
worry about round-off error in this case.

	  Far more important is an issue you have not mentioned:  What do you 
think about doing essentially all your computations on log price and log 
returns?  I recommend this for two reasons:  First, log prices and log 
returns tend more nearly normally distributed than the raw data and 
unlogged returns.  Second, the logarithms tend to be more tractible 
mathematically.  For example, extrapolation from a model fit to prices 
in dollars could give you negative prices, i.e., you would have to pay 
someone to take your bonds.  By contrast, negative log prices just means 
that the price is less than one dollar (or one Swiss Franc or whatever 
currency you are using).  If you honestly can be required to pay someone 
to take your bonds, then you don't want logarithms;  otherwise, I think 
  you do.

	  hope this helps.
	  spencer graves

Fred J. wrote:

>   Hi
>    
>   Doing calculations on time series data ?US bonds? where the 
price is presented say 11328 to mean 113 28/32, it seams to me
that converting the rational would be 0.875 and the round-off
error would be expected to cause problems in doing calculations
on such numbers, how one could avoid or minimize such a problem?
>   or handle bond-kind-of-price in general?  Thanks
>    
>    
>   
> 		
> ---------------------------------
> 
> 
> 	[[alternative HTML version deleted]]
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance


From davidr at rhotrading.com  Tue Mar 21 15:21:38 2006
From: davidr at rhotrading.com (davidr at rhotrading.com)
Date: Tue, 21 Mar 2006 08:21:38 -0600
Subject: [R-sig-finance] price break down
Message-ID: <14814D23B3BE2C41AFA18A0B1961F1721686D2@rhosvr02.rhotrading.com>

All bond prices are exact in binary arithmetic, so no round-off.

(I may have missed part of this conversation while on vacation.)

David L. Reiner
 

> -----Original Message-----
> From: r-sig-finance-bounces at stat.math.ethz.ch [mailto:r-sig-finance-
> bounces at stat.math.ethz.ch] On Behalf Of Spencer Graves
> Sent: Monday, March 20, 2006 8:12 PM
> To: Fred J.
> Cc: r-sig-finance at stat.math.ethz.ch
> Subject: Re: [R-sig-finance] price break down
> 
> 	  Nearly all computations in R are to double precision, and I
would
> not
> worry about round-off error in this case.
> 
> 	  Far more important is an issue you have not mentioned:  What
do
> you
> think about doing essentially all your computations on log price and
log
> returns?  I recommend this for two reasons:  First, log prices and log
> returns tend more nearly normally distributed than the raw data and
> unlogged returns.  Second, the logarithms tend to be more tractible
> mathematically.  For example, extrapolation from a model fit to prices
> in dollars could give you negative prices, i.e., you would have to pay
> someone to take your bonds.  By contrast, negative log prices just
means
> that the price is less than one dollar (or one Swiss Franc or whatever
> currency you are using).  If you honestly can be required to pay
someone
> to take your bonds, then you don't want logarithms;  otherwise, I
think
>   you do.
> 
> 	  hope this helps.
> 	  spencer graves
> 
> Fred J. wrote:
> 
> >   Hi
> >
> >   Doing calculations on time series data "US bonds" where the
> price is presented say 11328 to mean 113 28/32, it seams to me
> that converting the rational would be 0.875 and the round-off
> error would be expected to cause problems in doing calculations
> on such numbers, how one could avoid or minimize such a problem?
> >   or handle bond-kind-of-price in general?  Thanks
> >
> >
> >
> >
> > ---------------------------------
> >
> >
> > 	[[alternative HTML version deleted]]
> >
> >
> >
> >
------------------------------------------------------------------------
> >
> > _______________________________________________
> > R-sig-finance at stat.math.ethz.ch mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance


From patrick.henaff at kermatheano.com  Wed Mar 22 07:38:20 2006
From: patrick.henaff at kermatheano.com (=?iso-8859-1?Q?P._H=E9naff?=)
Date: Wed, 22 Mar 2006 00:38:20 -0600
Subject: [R-sig-finance] Date calculations
Message-ID: <000e01c64d7b$371447f0$4501a8c0@DDG0MG21>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060322/242defd9/attachment.pl 

From wuertz at itp.phys.ethz.ch  Wed Mar 22 08:14:02 2006
From: wuertz at itp.phys.ethz.ch (Diethelm Wuertz)
Date: Wed, 22 Mar 2006 07:14:02 +0000
Subject: [R-sig-finance] Date calculations
In-Reply-To: <000e01c64d7b$371447f0$4501a8c0@DDG0MG21>
References: <000e01c64d7b$371447f0$4501a8c0@DDG0MG21>
Message-ID: <4420F93A.9040205@itp.phys.ethz.ch>

P. H?naff wrote:

>I'm a rank beginner in R and R-metrics, but experienced in matlab and other languages. I'm strugling with date arithmetics in R. I'm doing statistical analysis on financial time series, using its, which uses POSIXct objects to measure time. What is the best way to perform simple date arithmetic with these objects? I do not care about h/m/s, nor do I care about daylight saving time. Example of a problem I faced:
>
>Add one day to 3-apr-2005. (daylight saving starts on 4-apr-2005).
>If I do
>  
>
>>as.POSIXct("2005-04-03") + 86400
>>    
>>
in Rmetrics use:

myFinCenter = "GMT" # for daily dates
timeDate("2005-04-03")
[1] "GMT"
[1] [2005-04-03]
timeDate("2005-04-03") + 3*24*3600
[1] "GMT"
[1] [2005-04-06]

# Living in Zurich
myFinCenter = "Zurich"
timeDate("2005-04-03")
[1] "Zurich"
[1] [2005-04-03 02:00:00]
timeDate("2005-04-03") + 3*24*3600
[1] "Zurich"
[1] [2005-04-06 02:00:00]

# Use for Daily dates:
timeDate("2005-04-03", zone = "Zurich")
[1] "Zurich"
[1] [2005-04-03]
timeDate("2005-04-03", zone = "Zurich") + 3*24*3600
[1] "Zurich"
[1] [2005-04-06]


>I get 1 a.m. on the 4th of april.
>
>So, I do something like
>  
>
>>dt1 <- as.POSIXct("2005-04-03")
>>x1 <- timeDate(dt1)
>>x2 <- timeNdayOnOrAfter(x1, n=2)
>>dt2 <- as.POSIXct(as.POSIXlt(x2))
>>    
>>
>
>There has to be something simpler!
>
>Another problem. The tseries and timeDate packages seem to require that one changes his timezone environment variable to GMT. This is not really possible in a corporate environment. Is there a work-around?
>  
>
It is no longer necessary to specify the timezone. This holds since the 
latest
version 221.10065 (download it from CRAN).
For daily dates just be sure that the time zone where you recorded the data
(zone=...) and the time zone where you use your data (FinCenter=..) are
specified as the same. both GMT, or the financial Center where you are
living and your operating system's time zone environment variable is set.
(Note, this is not necessarily the same timezone your clock works on your
windows box, which doesn't make use of the Windows time zone environment
variable TZ).

Please let me know if you have further questions (or problems) with 
timeDate()
Diethelm

>Any help will be much appreciated.
>
>Patrick Henaff
>
>	[[alternative HTML version deleted]]
>
>_______________________________________________
>R-sig-finance at stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>  
>


From dave at kanecap.com  Wed Mar 22 13:09:55 2006
From: dave at kanecap.com (David Kane)
Date: Wed, 22 Mar 2006 07:09:55 -0500 (EST)
Subject: [R-sig-finance] Date calculations
In-Reply-To: <000e01c64d7b$371447f0$4501a8c0@DDG0MG21>
References: <000e01c64d7b$371447f0$4501a8c0@DDG0MG21>
Message-ID: <4849.64.110.51.253.1143029395.squirrel@webmail5.pair.com>

> I'm a rank beginner in R and R-metrics, but experienced in matlab and
> other languages. I'm strugling with date arithmetics in R. I'm doing
> statistical analysis on financial time series, using its, which uses
> POSIXct objects to measure time. What is the best way to perform simple
> date arithmetic with these objects? I do not care about h/m/s, nor do I
> care about daylight saving time. Example of a problem I faced:

Perhaps date() is what you want. That's what we use for financial
applications in which h/m/s does not matter.

Dave Kane


From Achim.Zeileis at wu-wien.ac.at  Wed Mar 22 13:18:45 2006
From: Achim.Zeileis at wu-wien.ac.at (Achim Zeileis)
Date: Wed, 22 Mar 2006 13:18:45 +0100
Subject: [R-sig-finance] Date calculations
In-Reply-To: <000e01c64d7b$371447f0$4501a8c0@DDG0MG21>
References: <000e01c64d7b$371447f0$4501a8c0@DDG0MG21>
Message-ID: <20060322131845.5b185386.Achim.Zeileis@wu-wien.ac.at>

On Wed, 22 Mar 2006 00:38:20 -0600 P. H?naff wrote:

> I'm a rank beginner in R and R-metrics, but experienced in matlab and
> other languages. I'm strugling with date arithmetics in R. I'm doing
> statistical analysis on financial time series, using its, which uses
> POSIXct objects to measure time. What is the best way to perform
> simple date arithmetic with these objects? I do not care about h/m/s,
> nor do I care about daylight saving time.

In that case I would recommend to go with the "Date" class available in
base R, e.g.
  as.Date("2005-04-03") + 0:10
which should be rather self-explanatory.

The package zoo provides time series infrastructure where the time
information can be stored in "Date" (or virtually any other class).
  library("zoo")
  z <- zoo(rnorm(11), as.Date("2005-04-03") + 0:10)
  plot(z)

hth,
Z


From TobiasBr at Taquanta.com  Wed Mar 22 14:35:41 2006
From: TobiasBr at Taquanta.com (Brandt, T. (Tobias))
Date: Wed, 22 Mar 2006 15:35:41 +0200
Subject: [R-sig-finance] Date calculations
Message-ID: <A77412E534FCD248A93A81F37CC75B7A033F8CEB@waxbill.africa.nedcor.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060322/20fdd4a8/attachment.pl 

From wuertz at itp.phys.ethz.ch  Wed Mar 22 15:16:52 2006
From: wuertz at itp.phys.ethz.ch (Diethelm Wuertz)
Date: Wed, 22 Mar 2006 14:16:52 +0000
Subject: [R-sig-finance] Date calculations
In-Reply-To: <3CB5334C6C53B74194E31D759106917F03B73AED@mlnyb701mb.amrs.win.ml.com>
References: <3CB5334C6C53B74194E31D759106917F03B73AED@mlnyb701mb.amrs.win.ml.com>
Message-ID: <44215C54.60108@itp.phys.ethz.ch>

Do you have the latest version of Rmetrics 221.10065 ?  Please update 
Rmetrics and try again.

DW

Henaff, Patrick (MLCI) wrote:

>Thanks for the answer to my previous post. Somehow, I cannot replicate
>your example (see below). Note that z + one day ends up at 04-apr-2005
>at 1 a.m.   
>
>  
>
>>R.version
>>    
>>
>         _              
>platform i386-pc-mingw32
>arch     i386           
>os       mingw32        
>system   i386, mingw32  
>status                  
>major    2              
>minor    2.1            
>year     2005           
>month    12             
>day      20             
>svn rev  36812          
>language R  
>            
>  
>
>>myFinCenter="GMT"
>>z <- timeDate("2005-04-03",zone="GMT", FinCenter=myFinCenter)
>>    
>>
>Warning message:
>Set timezone to GMT! in: timeDate("2005-04-03", zone = "GMT", FinCenter
>= myFinCenter) 
>  
>
>>z+86400
>>    
>>
>[1] "GMT"
>[1] [2005-04-04 01:00:00]
>Warning messages:
>1: Set timezone to GMT! in: "+.timeDate"(z, 86400) 
>2: Set timezone to GMT! in: timeDate(e1, zone = e1 at FinCenter, FinCenter
>= "GMT") 
>3: Set timezone to GMT! in: timeDate(e1GMT + e2, zone = "GMT", FinCenter
>= e1 at FinCenter) 
>4: Set timezone to GMT! in: print.timeDate(list()) 
>  
>
>--------------------------------------------------------
>
>If you are not an intended recipient of this e-mail, please notify the sender, delete it and do not read, act upon, print, disclose, copy, retain or redistribute it. Click here for important additional terms relating to this e-mail.     http://www.ml.com/email_terms/
>--------------------------------------------------------
>
>  
>


From heshriti at gmail.com  Wed Mar 22 17:30:44 2006
From: heshriti at gmail.com (Mahesh Krishnan)
Date: Wed, 22 Mar 2006 08:30:44 -0800
Subject: [R-sig-finance] Date calculations
In-Reply-To: <000e01c64d7b$371447f0$4501a8c0@DDG0MG21>
References: <000e01c64d7b$371447f0$4501a8c0@DDG0MG21>
Message-ID: <33f6aa6f0603220830q3e4fd7c3ub45c53d05dc2fad0@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20060322/5ee189c2/attachment.pl 

From kriskumar at earthlink.net  Thu Mar 23 04:24:51 2006
From: kriskumar at earthlink.net (Krishna Kumar)
Date: Wed, 22 Mar 2006 22:24:51 -0500
Subject: [R-sig-finance] structural breaks in correlation
Message-ID: <44221503.3020905@earthlink.net>

Hi folks,

I am trying to understand structural breaks in correlation using the 
strucchange package in R.
I am looking at a rolling window estimate of correlation (pearsons) to 
identify breaks and see if the underlying process has changed.


 > data(EuStockMarkets)
 > dax <- log(EuStockMarkets[,"DAX"])
 >  ftse <- log(EuStockMarkets[,"FTSE"])
 > dax.ret<-diff(dax)
 > ftse.ret<-diff(ftse)

rollingcor <- function(ret, width) {
T<-dim(ret)[1]
results<-1:(T-width)
     for (i in 1:(T-width)) {
    indx<-i+width
        results[i] <- cor(ret[i:indx,1],ret[i:indx,2] )
     }
     return(results)
   }

 >dax.ftse.cor<-rollingcor(cbind(dax.ret,ftse.ret),50)
 > ordcus<-efp(dax.ftse.cor~1,type="OLS-CUSUM")
 > plot(ordcus)


Is this the right way to test a rolling correlation estimate? And are 
there other tests that are recommended besides the cusum test?
Appreciate your help,

Thanks,
Krishna


From steve.miller at jhu.edu  Wed Mar 22 23:36:21 2006
From: steve.miller at jhu.edu (Steve Miller)
Date: Wed, 22 Mar 2006 16:36:21 -0600
Subject: [R-sig-finance] Date calculations
In-Reply-To: <33f6aa6f0603220830q3e4fd7c3ub45c53d05dc2fad0@mail.gmail.com>
Message-ID: <E1FMBwq-0003C2-00@bernie.ethz.ch>

If you use the date or survival libraries, you can do something like:
as.date("01/10/2001", "mdy"), as well as as.date(14985) -- a julian
argument. You can also go back and forth between julians and numeric vectors
with mdy.date and date.mdy.

Steve Miller 

-----Original Message-----
From: r-sig-finance-bounces at stat.math.ethz.ch
[mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of Mahesh
Krishnan
Sent: Wednesday, March 22, 2006 10:31 AM
To: r-sig-finance at stat.math.ethz.ch
Subject: Re: [R-sig-finance] Date calculations

Henaff,

I have found the following to be of use when using Date manipulations.

Example:

 tDate <- as.Date("03/22/2006", "%m/%d/%Y") ;

tDate +1    ## will give the update 03/23/2006 and so on..

Best regards,

Mahesh.

ps: fyi: the capital Y in as.Date refers to a 4 digit year representation


On 3/21/06, P. Hinaff <patrick.henaff at kermatheano.com> wrote:
>
> I'm a rank beginner in R and R-metrics, but experienced in matlab and
> other languages. I'm strugling with date arithmetics in R. I'm doing
> statistical analysis on financial time series, using its, which uses
POSIXct
> objects to measure time. What is the best way to perform simple date
> arithmetic with these objects? I do not care about h/m/s, nor do I care
> about daylight saving time. Example of a problem I faced:
>
> Add one day to 3-apr-2005. (daylight saving starts on 4-apr-2005).
> If I do
> > as.POSIXct("2005-04-03") + 86400
> I get 1 a.m. on the 4th of april.
>
> So, I do something like
> > dt1 <- as.POSIXct("2005-04-03")
> > x1 <- timeDate(dt1)
> > x2 <- timeNdayOnOrAfter(x1, n=2)
> > dt2 <- as.POSIXct(as.POSIXlt(x2))
>
> There has to be something simpler!
>
> Another problem. The tseries and timeDate packages seem to require that
> one changes his timezone environment variable to GMT. This is not really
> possible in a corporate environment. Is there a work-around?
>
> Any help will be much appreciated.
>
> Patrick Henaff
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>

	[[alternative HTML version deleted]]


From Achim.Zeileis at wu-wien.ac.at  Thu Mar 23 11:26:25 2006
From: Achim.Zeileis at wu-wien.ac.at (Achim Zeileis)
Date: Thu, 23 Mar 2006 11:26:25 +0100
Subject: [R-sig-finance] structural breaks in correlation
In-Reply-To: <44221503.3020905@earthlink.net>
References: <44221503.3020905@earthlink.net>
Message-ID: <20060323112625.539344d9.Achim.Zeileis@wu-wien.ac.at>

On Wed, 22 Mar 2006 22:24:51 -0500 Krishna Kumar wrote:

> Hi folks,
> 
> I am trying to understand structural breaks in correlation using the 
> strucchange package in R.
> I am looking at a rolling window estimate of correlation (pearsons)
> to identify breaks and see if the underlying process has changed.
> 
> 
>  > data(EuStockMarkets)
>  > dax <- log(EuStockMarkets[,"DAX"])
>  >  ftse <- log(EuStockMarkets[,"FTSE"])
>  > dax.ret<-diff(dax)
>  > ftse.ret<-diff(ftse)
> 
> rollingcor <- function(ret, width) {
> T<-dim(ret)[1]
> results<-1:(T-width)
>      for (i in 1:(T-width)) {
>     indx<-i+width
>         results[i] <- cor(ret[i:indx,1],ret[i:indx,2] )
>      }
>      return(results)
>    }
> 
>  >dax.ftse.cor<-rollingcor(cbind(dax.ret,ftse.ret),50)

You can compute this quantity much easier via:
  dax.ftse.cor <- rapply(diff(log(EuStockMarkets[,c("DAX", "FTSE")])),
    50, function(x) cor(x[,1], x[,2]), by.column = FALSE)

>  > ordcus<-efp(dax.ftse.cor~1,type="OLS-CUSUM")
>  > plot(ordcus)
> 
> Is this the right way to test a rolling correlation estimate? And are 
> there other tests that are recommended besides the cusum test?

I would not use the strategy above, because you introduce a(n
additional) dependence into the series by computing the correlations
beforehand. Instead you could simply use a regression model, e.g.
  dax <- diff(log(EuStockMarkets[,"DAX"]))
  ftse <- diff(log(EuStockMarkets[,"FTSE"]))
and use a moving estimates test in this regression model, e.g., with a
bandwidth of 10% of the data
  me <- efp(dax ~ ftse, type = "ME", h = 0.1)  
  plot(me, functional = NULL)
which would suggest a shift between 1992-1993 and 1997-1998. Other
tests, not only moving estimates tests would yield similar results, for
example a CUSUM-type test based on the model scores
  scus <- gefp(dax ~ ftse)
  plot(scus, aggregate = FALSE)
For a recent survey of these and related tests, see
  Achim Zeileis (2005). "A Unified Approach to Structural Change Tests
  Based on ML scores, F statistics, and OLS residuals," Econometric
  Reviews, 24(4), 445-466.
A preprint version is available from my Web page.

hth,
Z


From patrick at burns-stat.com  Thu Mar 23 12:06:57 2006
From: patrick at burns-stat.com (Patrick Burns)
Date: Thu, 23 Mar 2006 11:06:57 +0000
Subject: [R-sig-finance] structural breaks in correlation
In-Reply-To: <20060323112625.539344d9.Achim.Zeileis@wu-wien.ac.at>
References: <44221503.3020905@earthlink.net>
	<20060323112625.539344d9.Achim.Zeileis@wu-wien.ac.at>
Message-ID: <44228151.6080809@burns-stat.com>

Another way to look at changes in correlation is
via multivariate GARCH models.  In my experience
they tend not to support the idea of structural breaks.
(But then they are presuming that there are no breaks.)

Patrick Burns
patrick at burns-stat.com
+44 (0)20 8525 0696
http://www.burns-stat.com
(home of S Poetry and "A Guide for the Unwilling S User")

Achim Zeileis wrote:

>On Wed, 22 Mar 2006 22:24:51 -0500 Krishna Kumar wrote:
>
>  
>
>>Hi folks,
>>
>>I am trying to understand structural breaks in correlation using the 
>>strucchange package in R.
>>I am looking at a rolling window estimate of correlation (pearsons)
>>to identify breaks and see if the underlying process has changed.
>>
>>
>> > data(EuStockMarkets)
>> > dax <- log(EuStockMarkets[,"DAX"])
>> >  ftse <- log(EuStockMarkets[,"FTSE"])
>> > dax.ret<-diff(dax)
>> > ftse.ret<-diff(ftse)
>>
>>rollingcor <- function(ret, width) {
>>T<-dim(ret)[1]
>>results<-1:(T-width)
>>     for (i in 1:(T-width)) {
>>    indx<-i+width
>>        results[i] <- cor(ret[i:indx,1],ret[i:indx,2] )
>>     }
>>     return(results)
>>   }
>>
>> >dax.ftse.cor<-rollingcor(cbind(dax.ret,ftse.ret),50)
>>    
>>
>
>You can compute this quantity much easier via:
>  dax.ftse.cor <- rapply(diff(log(EuStockMarkets[,c("DAX", "FTSE")])),
>    50, function(x) cor(x[,1], x[,2]), by.column = FALSE)
>
>  
>
>> > ordcus<-efp(dax.ftse.cor~1,type="OLS-CUSUM")
>> > plot(ordcus)
>>
>>Is this the right way to test a rolling correlation estimate? And are 
>>there other tests that are recommended besides the cusum test?
>>    
>>
>
>I would not use the strategy above, because you introduce a(n
>additional) dependence into the series by computing the correlations
>beforehand. Instead you could simply use a regression model, e.g.
>  dax <- diff(log(EuStockMarkets[,"DAX"]))
>  ftse <- diff(log(EuStockMarkets[,"FTSE"]))
>and use a moving estimates test in this regression model, e.g., with a
>bandwidth of 10% of the data
>  me <- efp(dax ~ ftse, type = "ME", h = 0.1)  
>  plot(me, functional = NULL)
>which would suggest a shift between 1992-1993 and 1997-1998. Other
>tests, not only moving estimates tests would yield similar results, for
>example a CUSUM-type test based on the model scores
>  scus <- gefp(dax ~ ftse)
>  plot(scus, aggregate = FALSE)
>For a recent survey of these and related tests, see
>  Achim Zeileis (2005). "A Unified Approach to Structural Change Tests
>  Based on ML scores, F statistics, and OLS residuals," Econometric
>  Reviews, 24(4), 445-466.
>A preprint version is available from my Web page.
>
>hth,
>Z
>
>_______________________________________________
>R-sig-finance at stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>
>  
>


From kriskumar at earthlink.net  Thu Mar 23 12:46:17 2006
From: kriskumar at earthlink.net (Krishna Kumar)
Date: Thu, 23 Mar 2006 06:46:17 -0500
Subject: [R-sig-finance] structural breaks in correlation
In-Reply-To: <20060323112625.539344d9.Achim.Zeileis@wu-wien.ac.at>
References: <44221503.3020905@earthlink.net>
	<20060323112625.539344d9.Achim.Zeileis@wu-wien.ac.at>
Message-ID: <44228A89.6070307@earthlink.net>

Achim Zeileis wrote:

>On Wed, 22 Mar 2006 22:24:51 -0500 Krishna Kumar wrote:
>
>  
>
>>Hi folks,
>>
>>I am trying to understand structural breaks in correlation using the 
>>strucchange package in R.
>>I am looking at a rolling window estimate of correlation (pearsons)
>>to identify breaks and see if the underlying process has changed.
>>
>>
>> > data(EuStockMarkets)
>> > dax <- log(EuStockMarkets[,"DAX"])
>> >  ftse <- log(EuStockMarkets[,"FTSE"])
>> > dax.ret<-diff(dax)
>> > ftse.ret<-diff(ftse)
>>
>>rollingcor <- function(ret, width) {
>>T<-dim(ret)[1]
>>results<-1:(T-width)
>>     for (i in 1:(T-width)) {
>>    indx<-i+width
>>        results[i] <- cor(ret[i:indx,1],ret[i:indx,2] )
>>     }
>>     return(results)
>>   }
>>
>> >dax.ftse.cor<-rollingcor(cbind(dax.ret,ftse.ret),50)
>>    
>>
>
>You can compute this quantity much easier via:
>  dax.ftse.cor <- rapply(diff(log(EuStockMarkets[,c("DAX", "FTSE")])),
>    50, function(x) cor(x[,1], x[,2]), by.column = FALSE)
>
>  
>
>> > ordcus<-efp(dax.ftse.cor~1,type="OLS-CUSUM")
>> > plot(ordcus)
>>
>>Is this the right way to test a rolling correlation estimate? And are 
>>there other tests that are recommended besides the cusum test?
>>    
>>
>I would not use the strategy above, because you introduce a(n
>additional) dependence into the series by computing the correlations
>beforehand. Instead you could simply use a regression model, e.g.
>  dax <- diff(log(EuStockMarkets[,"DAX"]))
>  ftse <- diff(log(EuStockMarkets[,"FTSE"]))
>and use a moving estimates test in this regression model, e.g., with a
>bandwidth of 10% of the data
>  me <- efp(dax ~ ftse, type = "ME", h = 0.1)  
>  plot(me, functional = NULL)
>which would suggest a shift between 1992-1993 and 1997-1998. Other
>tests, not only moving estimates tests would yield similar results, for
>example a CUSUM-type test based on the model scores
>  scus <- gefp(dax ~ ftse)
>  plot(scus, aggregate = FALSE)
>For a recent survey of these and related tests, see
>  Achim Zeileis (2005). "A Unified Approach to Structural Change Tests
>  Based on ML scores, F statistics, and OLS residuals," Econometric
>  Reviews, 24(4), 445-466.
>A preprint version is available from my Web page.
>
>hth,
>Z
>
>  
>
Thanks Achim  (btw. this is a nice package -thanks) I will take another 
look at this and the reference.
Patrick, I was eventually going towards your mgarch as well.

Appreciate your help again,

Best,
Krishna


Best,
Kris


From Ricardo.Zambrano at corpbanca.cl  Mon Mar 27 18:01:07 2006
From: Ricardo.Zambrano at corpbanca.cl (Ricardo Zambrano Aguilera)
Date: Mon, 27 Mar 2006 12:01:07 -0400
Subject: [R-sig-finance] The "ast" package is good?
Message-ID: <800F3C4ADCFCA643A919EF7C140A045A0941F689@LLANQUIHUE.corpgroup.cl>

Hi everyone , i have a big doubt.
 the ast library  to me was always useful, but recently i?m was 
analyzing the whole concept specially, the arimaId , and i think that, this package actually is not official.
that?s my question... why not??
thanks a lot 

















> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From haribowo at enciety.com  Mon Mar 27 19:27:26 2006
From: haribowo at enciety.com (Fajar Haribowo)
Date: Tue, 28 Mar 2006 00:27:26 +0700
Subject: [R-sig-finance] please teach me..
Message-ID: <ops621f0zvdvp6ro@mail.enciety.com>


I'm very interesting and want to analysis financial data and use R. But i 
don't know where come from to study this field. Can all of you help me? 
What can i do to understand this field?

thanks,
-- 


/h/a/r/i/b/o/w/o/


From kriskumar at earthlink.net  Tue Mar 28 03:44:59 2006
From: kriskumar at earthlink.net (Krishna Kumar)
Date: Mon, 27 Mar 2006 20:44:59 -0500
Subject: [R-sig-finance] please teach me..
In-Reply-To: <ops621f0zvdvp6ro@mail.enciety.com>
References: <ops621f0zvdvp6ro@mail.enciety.com>
Message-ID: <4428951B.2040109@earthlink.net>

Fajar Haribowo wrote:

>I'm very interesting and want to analysis financial data and use R. But i 
>don't know where come from to study this field. Can all of you help me? 
>What can i do to understand this field?
>
>thanks,
>  
>
Fajar, I think one of the good places to start is the Rene Carmona book
http://www.amazon.com/exec/obidos/ASIN/0387202862/kriskumar-20/002-9573604-5575266
and then you could work through the Zivot book
http://www.amazon.com/exec/obidos/ASIN/0387955496/kriskumar-20/002-9573604-5575266

I think together these should get you started for working with Financial 
data in R.

Best,
Kris


From spencer.graves at pdf.com  Tue Mar 28 18:56:15 2006
From: spencer.graves at pdf.com (Spencer Graves)
Date: Tue, 28 Mar 2006 08:56:15 -0800
Subject: [R-sig-finance] please teach me..
In-Reply-To: <4428951B.2040109@earthlink.net>
References: <ops621f0zvdvp6ro@mail.enciety.com>
	<4428951B.2040109@earthlink.net>
Message-ID: <44296AAF.20203@pdf.com>

	  Don't you need S-Plus Finmetrics to use the Zivot book?  It is my 
understanding that some but not all of the Finmetrics features are 
available in R, including the Rmetrics project plus its and other 
packages?  And isn't the Carmona book written more for S-Plus than R? 
Both books have received mixed reviews from readers on Amazon.  (Zivot's 
book is out in a new edition, for which Amazon currently lists no 
reviews.  However, reviewers for the earlier edition claimed that it is 
useless "without S-Plus Finmetrics module", which does NOT come with the 
book.)

	  It's quite difficult for me to recommend something without knowing 
anything about your background.  What do you know of statistical methods 
generally and time series analysis in other contexts?  For example, do 
you have some appreciation for the contents of ch. 14 in Venables and 
Ripley (2002) Modern Applied Statists with S (Springer)? If no, I 
suggest you start there.

	  Also, have you worked through the vignettes associated with the "zoo" 
package? If no, you might find that quite useful. [Are you aware that 
edit(vignette(...)) will provide a script file with the R code discussed 
in the vignette, which can be viewed in Adobe Acrobat while you are 
working throught the examples line by line, modifying them, etc.? I've 
found this to be very useful. If you use XEmacs, "edit(vignette(...))" 
may not work. Instead, try Stangle(vignette(...)$file). This will copy 
the R code to a file in the working directory, which you can then open.]

	  I've also found the dse bundle and its vignettes very interesting and 
useful.  Beyond that, you might try the Rmetrics project 
(www.rmetrics.org).

	  In fact, the analysis of financial time series is actually a rather 
broad field by itself.  What specific kinds of things do you want to do? 
  After you've made some efforts in this area, I suggest you review the 
posting guide! "www.R-project.org/posting-guide.html" and submit another 
post targeted at something more specific.

	  hope this helps.
	  spencer graves

Krishna Kumar wrote:

> Fajar Haribowo wrote:
> 
> 
>>I'm very interesting and want to analysis financial data and use R. But i 
>>don't know where come from to study this field. Can all of you help me? 
>>What can i do to understand this field?
>>
>>thanks,
>> 
>>
> 
> Fajar, I think one of the good places to start is the Rene Carmona book
> http://www.amazon.com/exec/obidos/ASIN/0387202862/kriskumar-20/002-9573604-5575266
> and then you could work through the Zivot book
> http://www.amazon.com/exec/obidos/ASIN/0387955496/kriskumar-20/002-9573604-5575266
> 
> I think together these should get you started for working with Financial 
> data in R.
> 
> Best,
> Kris
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From Ricardo.Zambrano at corpbanca.cl  Tue Mar 28 19:12:43 2006
From: Ricardo.Zambrano at corpbanca.cl (Ricardo Zambrano Aguilera)
Date: Tue, 28 Mar 2006 13:12:43 -0400
Subject: [R-sig-finance] RV: The "ast" package is good?
Message-ID: <800F3C4ADCFCA643A919EF7C140A045A094DD19E@LLANQUIHUE.corpgroup.cl>



> Hi everyone , i have a big doubt.
>  the ast library  to me was always useful, but recently i?m was 
> analyzing the whole concept specially, the arimaId , and i think that, this package actually is not official.
> that?s my question... why not??
> thanks a lot 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>


From alte at comcast.net  Tue Mar 28 19:18:55 2006
From: alte at comcast.net (jk)
Date: Tue, 28 Mar 2006 12:18:55 -0500
Subject: [R-sig-finance] please teachme
Message-ID: <44296FFF.1070804@comcast.net>

jk wrote:

 >  "Also, have you worked through the vignettes associated with the "zoo"
 > package? If no, you might find that quite useful. [Are you aware that
 > edit(vignette(...)) will provide a script file with the R code discussed
 > in the vignette, which can be viewed in Adobe Acrobat while you are
 > working throught the examples line by line, modifying them, etc.? I've
 > found this to be very useful. If you use XEmacs, "edit(vignette(...))"
 >
 >   I've also found the dse bundle and its vignettes very interesting and
 > useful"
 >
 > Dear Sir:
 >
 > do you think you might be willing to provide a specific line i could 
input to th R console to try what you suggest above?
 >
 > it does seem from what you say that if one can do this once, that 
would open the door to apply this tactic for learning.
 >
 > would i type "install" zoo or something like that at the prompt?
 > what might i type to fill in the edit(vignette(...)) prompt with a 
meaningful query (meaningful in that it makes sense and would provide 
some infomation)?
 >
 > this might be good for some of us R beginners as this post of yours 
suggests a shot at a real breakthrough in learning technique.


From ajayshah at mayin.org  Tue Mar 28 20:27:21 2006
From: ajayshah at mayin.org (Ajay Narottam Shah)
Date: Tue, 28 Mar 2006 23:57:21 +0530
Subject: [R-sig-finance] please teachme
In-Reply-To: <44296FFF.1070804@comcast.net>
References: <44296FFF.1070804@comcast.net>
Message-ID: <20060328182721.GL281@lubyanka.local>

You might find the web page
    http://www.mayin.org/ajayshah/KB/R

to be of some use.

-- 
Ajay Shah                                      http://www.mayin.org/ajayshah  
ajayshah at mayin.org                             http://ajayshahblog.blogspot.com
<*(:-? - wizard who doesn't know the answer.


From wuertz at itp.phys.ethz.ch  Thu Mar 30 13:42:49 2006
From: wuertz at itp.phys.ethz.ch (Diethelm Wuertz)
Date: Thu, 30 Mar 2006 11:42:49 +0000
Subject: [R-sig-finance] decluster - Dangerous use of t-apply and match
Message-ID: <442BC439.6060002@itp.phys.ethz.ch>


The R package evir and also Finmetrics in SPlus (evis) use the
function decluster() for declustering a time series for Risk
Management with the POT method. But the functions work
only correct if there are no degeneracies in the time series,
otherwise the time can run backwards in the declustered
series! Especially for time series with discrete values and
many identical values this can become problematic. Let us
consider the following example:


    require(evir)
   
    # Decluster Danish Claims:
    data(danish)
    out = pot(danish, threshold = 4)
    X = decluster(out$data, 10, picture = FALSE)
    # Plot - Time is running backward! :
    x = as.POSIXlt(attr(X, "times"))
    y = as.vector(X)
    plot(x, y, type = "l")
   
   
    # Dirty Bug Fix - Lift degeneracy by adding marginal noise:
    data(danish)
    danish = danish + runif(length(danish), -1e-6, 1e-6)
    out = pot(danish, threshold = 4)
    X = decluster(out$data, 10, picture = FALSE)
    # Plot:
    x = as.POSIXlt(attr(X, "times"))
    y = as.vector(X)
    plot(x, y, type = "l")
   

For SPlus/Finmetrics users, try:

    out = pot(danish, threshold = 4)
    X = decluster(out$data, 10, plot = F)
    plot(X)


Since currently Rmetrics uses the same method as implemented
in evir and SPlus/Finmetrics you will encounter the same problems.
It will be fixed in Rmetrics with the next version using an approach
based on the function applySeries() instead of the functions
tapply()/match().

RECOMMENDATION: Use carefully evir, Rmetrics, and
SPlus/Finmetrics  for risk management with declustered time
series with the function decluster() from evis, otherwise you
are sure that your time series is not degenerated! In this
case everything is fine. To be on the save side I always 
recommend to check at least that your positions are properly
time ordered! If not, add some marginal noise to the series.

Diethelm Wuertz


From spencer.graves at pdf.com  Thu Mar 30 18:37:47 2006
From: spencer.graves at pdf.com (Spencer Graves)
Date: Thu, 30 Mar 2006 08:37:47 -0800
Subject: [R-sig-finance] The "ast" package is good?
In-Reply-To: <800F3C4ADCFCA643A919EF7C140A045A0941F689@LLANQUIHUE.corpgroup.cl>
References: <800F3C4ADCFCA643A919EF7C140A045A0941F689@LLANQUIHUE.corpgroup.cl>
Message-ID: <442C095B.8080402@pdf.com>

	  I'm not familiar with the "ast" library.  I couldn't find it on CRAN 
(www.r-project.org -> CRAN -> [select a mirror] -> packages).  That does 
NOT mean it's not any good;  it just means that the author(s) / 
maintainer(s) have not submitted it.  RSiteSearch("ast package") 
revealed that other users have similarly asked about "ast" (e.g.,
http://finzi.psych.upenn.edu/R/Rhelp02a/archive/62346.html).

	  Have you asked Prof. Masarotto why he has not contributed it to CRAN? 
  I don't know, but I can speculate that he might want to debug it more, 
or he may need to enhance the documentation to meet CRAN standards.  Of 
course, if you volunteered to do some of this for him, you might be able 
to help make it happen;  this is after all how the R project has grown.

	  hope this helps,
	  spencer graves

Ricardo Zambrano Aguilera wrote:

> Hi everyone , i have a big doubt.
>  the ast library  to me was always useful, but recently i?m was 
> analyzing the whole concept specially, the arimaId , and i think that, this package actually is not official.
> that?s my question... why not??
> thanks a lot 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
>>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>
> 
> 
> _______________________________________________
> R-sig-finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance


