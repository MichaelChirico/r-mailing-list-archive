From bog@@o@chri@tofer @ending from gm@il@com  Mon Oct  8 11:56:59 2018
From: bog@@o@chri@tofer @ending from gm@il@com (Christofer Bogaso)
Date: Mon, 8 Oct 2018 15:26:59 +0530
Subject: [R-SIG-Finance] Free download for USD Spot Index
Message-ID: <CA+dpOJkmMt96172RrT9fUYJ1cssaeo86bOfMnPPkyj9Jg0XvDg@mail.gmail.com>

Hi,

I was looking for some way to download daily historical quotes of USD Spot
Index (as in https://www.fxstreet.com/rates-charts/dollarindexspot) to be
downloaded using R.

Any pointer will be highly appreciated.

Thanks,

	[[alternative HTML version deleted]]


From goforp@dgett @ending from gm@il@com  Mon Oct  8 13:37:31 2018
From: goforp@dgett @ending from gm@il@com (Scott Padgett)
Date: Mon, 8 Oct 2018 07:37:31 -0400
Subject: [R-SIG-Finance] please remove
Message-ID: <CACovtLzESLxuepBNc4KcdRz4CZ2=vYLHGsFbS_cDdMPfrJjvFA@mail.gmail.com>

please remove me from this mailing list

	[[alternative HTML version deleted]]


From fr@nkm60606 @ending from gm@il@com  Mon Oct  8 13:47:33 2018
From: fr@nkm60606 @ending from gm@il@com (Frank)
Date: Mon, 8 Oct 2018 06:47:33 -0500
Subject: [R-SIG-Finance] Free download for USD Spot Index
In-Reply-To: <CA+dpOJkmMt96172RrT9fUYJ1cssaeo86bOfMnPPkyj9Jg0XvDg@mail.gmail.com>
References: <CA+dpOJkmMt96172RrT9fUYJ1cssaeo86bOfMnPPkyj9Jg0XvDg@mail.gmail.com>
Message-ID: <002e01d45efc$b3b685c0$1b239140$@gmail.com>

Use DTWEXM instead of DGS3MO:

library(quantmod)
library(chron)


##
## Get DGS3MO Treasury yield from FRED
##

getSymbols('DGS3MO',src='FRED')
DGS3MO<-na.locf(DGS3MO/100.0,na.rm = TRUE)
tail(DGS3MO)
file_name <- "DGS3MO.csv"
write.zoo(DGS3MO, file = file_name, append = FALSE, quote = TRUE, sep = ",")
quit()


-----Original Message-----
From: R-SIG-Finance <r-sig-finance-bounces at r-project.org> On Behalf Of
Christofer Bogaso
Sent: Monday, October 08, 2018 4:57 AM
To: r-sig-finance at r-project.org
Subject: [R-SIG-Finance] Free download for USD Spot Index

Hi,

I was looking for some way to download daily historical quotes of USD Spot
Index (as in https://www.fxstreet.com/rates-charts/dollarindexspot) to be
downloaded using R.

Any pointer will be highly appreciated.

Thanks,

	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.


From bog@@o@chri@tofer @ending from gm@il@com  Mon Oct  8 16:32:10 2018
From: bog@@o@chri@tofer @ending from gm@il@com (Christofer Bogaso)
Date: Mon, 8 Oct 2018 20:02:10 +0530
Subject: [R-SIG-Finance] Free download for USD Spot Index
In-Reply-To: <002e01d45efc$b3b685c0$1b239140$@gmail.com>
References: <CA+dpOJkmMt96172RrT9fUYJ1cssaeo86bOfMnPPkyj9Jg0XvDg@mail.gmail.com>
 <002e01d45efc$b3b685c0$1b239140$@gmail.com>
Message-ID: <CA+dpOJk3Di_bKgn1NiQ8Kh+Fhqu1udPyT2BjEJjizu-ek5Mh7A@mail.gmail.com>

I could not relate DGS3MO to Dollar Index Spot values - any explanation?

On Mon, Oct 8, 2018 at 5:17 PM Frank <frankm60606 at gmail.com> wrote:

> Use DTWEXM instead of DGS3MO:
>
> library(quantmod)
> library(chron)
>
>
> ##
> ## Get DGS3MO Treasury yield from FRED
> ##
>
> getSymbols('DGS3MO',src='FRED')
> DGS3MO<-na.locf(DGS3MO/100.0,na.rm = TRUE)
> tail(DGS3MO)
> file_name <- "DGS3MO.csv"
> write.zoo(DGS3MO, file = file_name, append = FALSE, quote = TRUE, sep =
> ",")
> quit()
>
>
> -----Original Message-----
> From: R-SIG-Finance <r-sig-finance-bounces at r-project.org> On Behalf Of
> Christofer Bogaso
> Sent: Monday, October 08, 2018 4:57 AM
> To: r-sig-finance at r-project.org
> Subject: [R-SIG-Finance] Free download for USD Spot Index
>
> Hi,
>
> I was looking for some way to download daily historical quotes of USD Spot
> Index (as in https://www.fxstreet.com/rates-charts/dollarindexspot) to be
> downloaded using R.
>
> Any pointer will be highly appreciated.
>
> Thanks,
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
>

	[[alternative HTML version deleted]]


From ericjberger @ending from gm@il@com  Mon Oct  8 16:47:39 2018
From: ericjberger @ending from gm@il@com (Eric Berger)
Date: Mon, 8 Oct 2018 17:47:39 +0300
Subject: [R-SIG-Finance] Free download for USD Spot Index
In-Reply-To: <CA+dpOJk3Di_bKgn1NiQ8Kh+Fhqu1udPyT2BjEJjizu-ek5Mh7A@mail.gmail.com>
References: <CA+dpOJkmMt96172RrT9fUYJ1cssaeo86bOfMnPPkyj9Jg0XvDg@mail.gmail.com>
 <002e01d45efc$b3b685c0$1b239140$@gmail.com>
 <CA+dpOJk3Di_bKgn1NiQ8Kh+Fhqu1udPyT2BjEJjizu-ek5Mh7A@mail.gmail.com>
Message-ID: <CAGgJW74kwCE29nibeM0yenC4qRrwZYOh11KMzNuwf86tpyw+qg@mail.gmail.com>

Frank was suggesting to get the data from the Federal Reserve (FRED) and he
supplied code that showed how to do it for the series DGS3MO.
However, he pointed out that in that code you would need to replace the
string 'DGS3MO' by the string 'DTWEXM' to get what (he thought) you want.

The FRED series 'DTWEXM' refers to the "Trade Weighted U.S. Dollar Index:
Major Currencies".
As far as I can tell, this is not the same as the series you asked about,
namely the "U.S. Dollar Index" which is apparently computed by ICE US.
Per Bloomberg, the index you want has ticker DXY and involves "rates
supplied by some 500 banks."

HTH,
Eric


On Mon, Oct 8, 2018 at 5:32 PM, Christofer Bogaso <
bogaso.christofer at gmail.com> wrote:

> I could not relate DGS3MO to Dollar Index Spot values - any explanation?
>
> On Mon, Oct 8, 2018 at 5:17 PM Frank <frankm60606 at gmail.com> wrote:
>
> > Use DTWEXM instead of DGS3MO:
> >
> > library(quantmod)
> > library(chron)
> >
> >
> > ##
> > ## Get DGS3MO Treasury yield from FRED
> > ##
> >
> > getSymbols('DGS3MO',src='FRED')
> > DGS3MO<-na.locf(DGS3MO/100.0,na.rm = TRUE)
> > tail(DGS3MO)
> > file_name <- "DGS3MO.csv"
> > write.zoo(DGS3MO, file = file_name, append = FALSE, quote = TRUE, sep =
> > ",")
> > quit()
> >
> >
> > -----Original Message-----
> > From: R-SIG-Finance <r-sig-finance-bounces at r-project.org> On Behalf Of
> > Christofer Bogaso
> > Sent: Monday, October 08, 2018 4:57 AM
> > To: r-sig-finance at r-project.org
> > Subject: [R-SIG-Finance] Free download for USD Spot Index
> >
> > Hi,
> >
> > I was looking for some way to download daily historical quotes of USD
> Spot
> > Index (as in https://www.fxstreet.com/rates-charts/dollarindexspot) to
> be
> > downloaded using R.
> >
> > Any pointer will be highly appreciated.
> >
> > Thanks,
> >
> >         [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions
> > should go.
> >
> >
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From bog@@o@chri@tofer @ending from gm@il@com  Mon Oct  8 18:42:11 2018
From: bog@@o@chri@tofer @ending from gm@il@com (Christofer Bogaso)
Date: Mon, 8 Oct 2018 22:12:11 +0530
Subject: [R-SIG-Finance] Free download for USD Spot Index
In-Reply-To: <CAGgJW74kwCE29nibeM0yenC4qRrwZYOh11KMzNuwf86tpyw+qg@mail.gmail.com>
References: <CA+dpOJkmMt96172RrT9fUYJ1cssaeo86bOfMnPPkyj9Jg0XvDg@mail.gmail.com>
 <002e01d45efc$b3b685c0$1b239140$@gmail.com>
 <CA+dpOJk3Di_bKgn1NiQ8Kh+Fhqu1udPyT2BjEJjizu-ek5Mh7A@mail.gmail.com>
 <CAGgJW74kwCE29nibeM0yenC4qRrwZYOh11KMzNuwf86tpyw+qg@mail.gmail.com>
Message-ID: <CA+dpOJndvkeLrXnC-Q+OGpMFM49fEcth1eHwMcmYfMDy0BOdSg@mail.gmail.com>

Thank you Eric and Frank for such details. Regards,

On Mon, Oct 8, 2018 at 8:17 PM Eric Berger <ericjberger at gmail.com> wrote:

> Frank was suggesting to get the data from the Federal Reserve (FRED) and
> he supplied code that showed how to do it for the series DGS3MO.
> However, he pointed out that in that code you would need to replace the
> string 'DGS3MO' by the string 'DTWEXM' to get what (he thought) you want.
>
> The FRED series 'DTWEXM' refers to the "Trade Weighted U.S. Dollar Index:
> Major Currencies".
> As far as I can tell, this is not the same as the series you asked about,
> namely the "U.S. Dollar Index" which is apparently computed by ICE US.
> Per Bloomberg, the index you want has ticker DXY and involves "rates
> supplied by some 500 banks."
>
> HTH,
> Eric
>
>
> On Mon, Oct 8, 2018 at 5:32 PM, Christofer Bogaso <
> bogaso.christofer at gmail.com> wrote:
>
>> I could not relate DGS3MO to Dollar Index Spot values - any explanation?
>>
>> On Mon, Oct 8, 2018 at 5:17 PM Frank <frankm60606 at gmail.com> wrote:
>>
>> > Use DTWEXM instead of DGS3MO:
>> >
>> > library(quantmod)
>> > library(chron)
>> >
>> >
>> > ##
>> > ## Get DGS3MO Treasury yield from FRED
>> > ##
>> >
>> > getSymbols('DGS3MO',src='FRED')
>> > DGS3MO<-na.locf(DGS3MO/100.0,na.rm = TRUE)
>> > tail(DGS3MO)
>> > file_name <- "DGS3MO.csv"
>> > write.zoo(DGS3MO, file = file_name, append = FALSE, quote = TRUE, sep =
>> > ",")
>> > quit()
>> >
>> >
>> > -----Original Message-----
>> > From: R-SIG-Finance <r-sig-finance-bounces at r-project.org> On Behalf Of
>> > Christofer Bogaso
>> > Sent: Monday, October 08, 2018 4:57 AM
>> > To: r-sig-finance at r-project.org
>> > Subject: [R-SIG-Finance] Free download for USD Spot Index
>> >
>> > Hi,
>> >
>> > I was looking for some way to download daily historical quotes of USD
>> Spot
>> > Index (as in https://www.fxstreet.com/rates-charts/dollarindexspot) to
>> be
>> > downloaded using R.
>> >
>> > Any pointer will be highly appreciated.
>> >
>> > Thanks,
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions
>> > should go.
>> >
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
>

	[[alternative HTML version deleted]]


From fr@nkm60606 @ending from gm@il@com  Mon Oct  8 20:14:54 2018
From: fr@nkm60606 @ending from gm@il@com (Frank)
Date: Mon, 8 Oct 2018 13:14:54 -0500
Subject: [R-SIG-Finance] Free download for USD Spot Index
In-Reply-To: <CA+dpOJndvkeLrXnC-Q+OGpMFM49fEcth1eHwMcmYfMDy0BOdSg@mail.gmail.com>
References: <CA+dpOJkmMt96172RrT9fUYJ1cssaeo86bOfMnPPkyj9Jg0XvDg@mail.gmail.com>
 <002e01d45efc$b3b685c0$1b239140$@gmail.com>
 <CA+dpOJk3Di_bKgn1NiQ8Kh+Fhqu1udPyT2BjEJjizu-ek5Mh7A@mail.gmail.com>
 <CAGgJW74kwCE29nibeM0yenC4qRrwZYOh11KMzNuwf86tpyw+qg@mail.gmail.com>
 <CA+dpOJndvkeLrXnC-Q+OGpMFM49fEcth1eHwMcmYfMDy0BOdSg@mail.gmail.com>
Message-ID: <003801d45f32$d0748e10$715daa30$@gmail.com>

As Eric pointed out, the FRED data is not what you want, all the US$ Index data is trade weighted. I?ve asked for the historical cash index values from ICE. It may take a day or two. 

Since the weights are constant, I think you can come close by downloading the components from FRED. I?ve modified the script to collect first 'DTWEXM' from FRED and then ?DEXUSEU? the Euro dollar exchange rate. I?m lost as to how to combine the other currencies into one getSymbols call.

library(quantmod)
library(chron)


##
## Get DTWEXM Trade Weighted U.S. Dollar Index: Major Currencies from FRED
##
getSymbols('DTWEXM',src='FRED')
DTWEXM<-na.locf(DTWEXM,na.rm = TRUE)
tail(DTWEXM)
file_name <- "DTWEXM.csv"
write.zoo(DTWEXM, file = file_name, append = FALSE, quote = TRUE, sep = ",")

##
## Get DEXUSEU U.S. / Euro Foreign Exchange Rate
##
getSymbols('DEXUSEU',src='FRED')
DEXUSEU<-na.locf(DEXUSEU,na.rm = TRUE)
tail(DEXUSEU)
file_name <- "DEXUSEU.csv"
write.zoo(DEXUSEU, file = file_name, append = FALSE, quote = TRUE, sep = ",")
quit()

From: Christofer Bogaso <bogaso.christofer at gmail.com> 
Sent: Monday, October 08, 2018 11:42 AM
To: Eric Berger <ericjberger at gmail.com>
Cc: frankm60606 at gmail.com; r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Free download for USD Spot Index

Thank you Eric and Frank for such details. Regards,

On Mon, Oct 8, 2018 at 8:17 PM Eric Berger <mailto:ericjberger at gmail.com> wrote:
Frank was suggesting to get the data from the Federal Reserve (FRED) and he supplied code that showed how to do it for the series DGS3MO.
However, he pointed out that in that code you would need to replace the string 'DGS3MO' by the string 'DTWEXM' to get what (he thought) you want.

The FRED series 'DTWEXM' refers to the "Trade Weighted U.S. Dollar Index: Major Currencies".
As far as I can tell, this is not the same as the series you asked about, namely the "U.S. Dollar Index" which is apparently computed by ICE US.
Per Bloomberg, the index you want has ticker DXY and involves "rates supplied by some 500 banks."

HTH,
Eric


On Mon, Oct 8, 2018 at 5:32 PM, Christofer Bogaso <mailto:bogaso.christofer at gmail.com> wrote:
I could not relate DGS3MO to Dollar Index Spot values - any explanation?

On Mon, Oct 8, 2018 at 5:17 PM Frank <mailto:frankm60606 at gmail.com> wrote:

> Use DTWEXM instead of DGS3MO:
>
> library(quantmod)
> library(chron)
>
>
> ##
> ## Get DGS3MO Treasury yield from FRED
> ##
>
> getSymbols('DGS3MO',src='FRED')
> DGS3MO<-na.locf(DGS3MO/100.0,na.rm = TRUE)
> tail(DGS3MO)
> file_name <- "DGS3MO.csv"
> write.zoo(DGS3MO, file = file_name, append = FALSE, quote = TRUE, sep =
> ",")
> quit()
>
>
> -----Original Message-----
> From: R-SIG-Finance <mailto:r-sig-finance-bounces at r-project.org> On Behalf Of
> Christofer Bogaso
> Sent: Monday, October 08, 2018 4:57 AM
> To: mailto:r-sig-finance at r-project.org
> Subject: [R-SIG-Finance] Free download for USD Spot Index
>
> Hi,
>
> I was looking for some way to download daily historical quotes of USD Spot
> Index (as in https://www.fxstreet.com/rates-charts/dollarindexspot) to be
> downloaded using R.
>
> Any pointer will be highly appreciated.
>
> Thanks,
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> mailto:R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
>

        [[alternative HTML version deleted]]

_______________________________________________
mailto:R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From @imonhovm@rk @ending from gm@il@com  Fri Oct 12 00:01:32 2018
From: @imonhovm@rk @ending from gm@il@com (Simon Hovmark)
Date: Thu, 11 Oct 2018 18:01:32 -0400
Subject: [R-SIG-Finance] xts 'order.by' cannot contain 'NA', 'NaN',
 or 'Inf' in optimize.portfolio.rebalancing
In-Reply-To: <1537963516.5013.22.camel@braverock.com>
References: <D0F379DF-DD4D-40BE-BB97-B0B8DC9EAFD2@gmail.com>
 <1537963516.5013.22.camel@braverock.com>
Message-ID: <DBCF1FEB-EFCC-4A8E-B11D-A75EC6F8B76F@gmail.com>

So I got it to work even with -100x compounding returns and I?ve have tried to figure out why, so I could leave a solution. But no luck.

But just som intuition on why I replace NAs with -100. I?ve a dataset of 14 different European stock indices from 2000 to present with the historical components. However, as some stocks are not always in the indices they should also not always be part of the optimization. PerformanceAnalytics replaces per default NAs with 0?s which means that even though there are no return value for the excluded stock, it is still (wrongfully) included in the optimization every month because it just looks like a 0% return.

I tried to find a way to work around this using a constraint but it is my understanding that constraints in PerformanceAnalytics cannot be customized. So my very ugly solution was to replace NAs with -100, so the stocks in that way would get penalized in the optimization. However, this is far from ideal and do also not work perfectly.

Any suggestions on how to solve this problem or should I create a new thread?

-Simon

> Den 26. sep. 2018 kl. 08.05 skrev braverock [via R] <ml+s789695n4752761h50 at n4.nabble.com>:
> 
> As Amit already said, zero is a better answer than -100.  log returns 
> don't behave well with -100x compounding returns.  This is what is 
> causing Inf/-Inf problems.  there is a 'zerofill' utility function 
> available in PerformanceAnalytics to make this replacement easier.   
> 
> see: 
> 
> ?zerofill 
> 
> If you are *also* having a problem with order.by, your sample data 
> would b e insufficient to reproduce it, since the index in the subset 
> you pasted seems well-formed. 
> 
> If Amit's and my suggestion to replace NA with 0 in your returns 
> doesn't solve the problem, then please reply to this thread with a 
> fully reproducible example (including data e.g. using dput function the 
> or reprex package). 
> 
> Regards, 
> 
> Brian 
>   
> -- 
> Brian G. Peterson 
> http://braverock.com/brian/ <http://braverock.com/brian/>
> Ph: 773-459-4973 
> IM: bgpbraverock 
> 
> On Tue, 2018-09-25 at 17:03 -0400, Simon Hovmark wrote:
> 
> > I am trying to run the following optimize.portfolio.rebalancing: 
> > 
> > opt <- optimize.portfolio.rebalancing(R=returns, portfolio=tranch1, 
> >                                             optimize_method="ROI", 
> >                                             #momentFUN = 
> > tranch1_boudt, 
> >                                             rebalance_on = 
> > rebal.freq, 
> >                                             training_period = 
> > training.period, 
> >                                             rolling_window = 
> > rolling.window) 
> > But when I use summary(opt) I get the following error: 
> > 
> > xts(x, order.by = order.by, frequency = frequency, ...) :'order.by' 
> > cannot contain 'NA', 'NaN', or 'Inf' 
> > I can see that other has had a similar problem, but I've not been 
> > able to solve it using their answers. When I sum NA, NaN and InF on 
> > returns$dato I get 0. 
> > 
> > A subset of my data is here: 
> > 
> > dato       stock_1    stock_2    stock_3 
> > 1999-10-14 -0.002006019 0.016164145 -100 
> > 1999-10-15 0.000000000 0.000000000 -100 
> > 1999-10-18 -0.036813973 -0.049017341 -100 
> > 1999-10-19 0.016529302 0.000000000 -100 
> > 1999-10-20 0.016260521 0.011996238 -100 
> > 1999-10-21 0.008032172 0.005806736 -100 
> > 1999-10-22 0.000000000 0.000000000 -100 
> > 1999-10-25 0.039220713 0.023164955 -100 
> > 1999-10-26 0.028437935 0.002152853 -100 
> > 1999-10-27 -0.032291505 0.014941580 -100 
> > 1999-10-28 0.030420597 0.011061477 -100 
> > 1999-10-29 0.000000000 0.000000000 -100 
> > 1999-11-02 0.027702603 -0.003410734 -100 
> > 1999-11-03 0.007259560 -0.007650743 -100 
> > 1999-11-04 0.003610112 0.000000000 -100 
> > 1999-11-05 0.000000000 0.000000000 -100 
> > 1999-11-08 0.014311514 0.005546033 -100 
> > 1999-11-09 0.007079676 -0.002373106 -100 
> > 1999-11-10 0.039763233 0.024512309 -100 
> > 1999-11-11 -0.001696353 -0.018721296 -100 
> > 1999-11-12 0.000000000 0.000000000 -100 
> > And here is my full code. 
> > 
> > rebal.freq <- "years" 
> > training.period <- 0 
> > rolling.window <- 120 
> > 
> > returns <- read_excel("HEX.xlsx", sheet = 1, col_names = TRUE) 
> > returns <- xts(returns[,-1], order.by= returns[,1]) 
> > returns <- Return.calculate(returns, method = "log") 
> > returns <- returns[-1,] 
> > 
> > returns[!is.finite(returns)] <- NA 
> > returns[!is.finite(returns)] <- NA 
> > returns <- na.fill(returns, fill = -100) 
> > sum(is.nan(returns$dato)) #returns 0 
> > sum(is.infinite(returns$dato)) #returns 0 
> > sum(is.na(returns$dato)) #returns 0 
> > 
> > fund.names <- colnames(returns) 
> > tranch1 <- portfolio.spec(assets = fund.names) 
> > tranch1 <- add.constraint(portfolio = tranch1, type = "leverage") 
> > tranch1 <- add.constraint(portfolio = tranch1, type = "long_only") 
> > tranch1 <- add.objective(portfolio=tranch1, type="return", 
> > name="mean") 
> > tranch1 <- add.objective(portfolio=tranch1, type="risk", 
> > name="StdDev") 
> > 
> > opt <- optimize.portfolio.rebalancing(R=returns, portfolio=tranch1, 
> >                                             optimize_method="ROI", 
> >                                             #momentFUN = 
> > tranch1_boudt, 
> >                                             rebalance_on = 
> > rebal.freq, 
> >                                             training_period = 
> > training.period, 
> >                                             rolling_window = 
> > rolling.window) 
> > 
> > 
> > summary(opt) 
> > And my sessioninfo: 
> > 
> > R version 3.3.1 (2016-06-21) 
> > Platform: x86_64-apple-darwin13.4.0 (64-bit) 
> > Running under: OS X 10.13.3 (unknown) 
> > 
> > locale: 
> > [1] C 
> > 
> > attached base packages: 
> > [1] stats     graphics  grDevices 
> > utils     datasets  methods   base     
> > 
> > other attached packages: 
> > [1] RColorBrewer_1.1- 
> > 2            readxl_0.1.1                        DEoptimR_1.0- 
> > 8               
> > [4] 
> > PortfolioAnalytics_1.0.3636   PerformanceAnalytics_1.4.3541     forea 
> > ch_1.4.4                 
> > [7] xts_0.10-1                    zoo_1.7-13                   
> > 
> > loaded via a namespace (and not attached): 
> > [1] 
> > compiler_3.3.1   parallel_3.3.1   tools_3.3.1      Rcpp_0.12.9       
> >    codetools_0.2-14 
> > [6] grid_3.3.1       iterators_1.0.8  DEoptim_2.2-4    lattice_0.20- 
> > 34 
> > EDIT When I read in the Excel file, then class(returns$Dato) returns 
> > 
> > class(returns$Dato) [1] "POSIXct" "POSIXt" 
> > Then instead of the below 
> > 
> > returns <- xts(returns[,-1], order.by= returns[,1]) 
> > I tried using 
> > 
> > returns <- xts(returns[, -1], order.by=as.Date(paste(returns$Dato, 
> > "%m/%d/%Y"))) 
> > and run the optimization but summary(opt) again returned 
> > 
> > xts(x, order.by = order.by, frequency = frequency, ...) :?order.by' 
> > cannot contain 'NA', 'NaN', or 'Inf' 
> > 
> > 
> > [[alternative HTML version deleted]] 
> > 
> > _______________________________________________ 
> > [hidden email] <x-msg://73/user/SendEmail.jtp?type=node&node=4752761&i=0> mailing list 
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance <https://stat.ethz.ch/mailman/listinfo/r-sig-finance>
> > -- Subscriber-posting only. If you want to post, subscribe first. 
> > -- Also note that this is not the r-help list where general R 
> > questions should go. 
> >
> 
> _______________________________________________ 
> [hidden email] <x-msg://73/user/SendEmail.jtp?type=node&node=4752761&i=1> mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance <https://stat.ethz.ch/mailman/listinfo/r-sig-finance>
> -- Subscriber-posting only. If you want to post, subscribe first. 
> -- Also note that this is not the r-help list where general R questions should go. 
> 
> 
> If you reply to this email, your message will be added to the discussion below:
> http://r.789695.n4.nabble.com/xts-order-by-cannot-contain-NA-NaN-or-Inf-in-optimize-portfolio-rebalancing-tp4752748p4752761.html <http://r.789695.n4.nabble.com/xts-order-by-cannot-contain-NA-NaN-or-Inf-in-optimize-portfolio-rebalancing-tp4752748p4752761.html>
> To unsubscribe from xts 'order.by' cannot contain 'NA', 'NaN', or 'Inf' in optimize.portfolio.rebalancing, click here <http://r.789695.n4.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=4752748&code=c2ltb25ob3ZtYXJrQGdtYWlsLmNvbXw0NzUyNzQ4fC0yMTAwNDE2NDQz>.
> NAML <http://r.789695.n4.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>

	[[alternative HTML version deleted]]


From @tephen @ending from org@nicfoodm@rket@@com@@u  Thu Oct 18 12:51:04 2018
From: @tephen @ending from org@nicfoodm@rket@@com@@u (Stephen Choularton)
Date: Thu, 18 Oct 2018 21:51:04 +1100
Subject: [R-SIG-Finance] problem with reqMktData
Message-ID: <a2d7f554-2369-022f-76bd-26a10796903a@organicfoodmarkets.com.au>

Hi

I can use this code to get historic data:

library("IBrokers")

sym1 <- 'ZS'
mkt1 <- 'ECBOT'
sym2 <- 'ZC'
mkt2 <- 'ECBOT'

contract1 <- twsContract(0,sym1, "CONTFUT", 
mkt1,"","","0.0","USD","","","",NULL,NULL,"0")

reqHistoricalData(tws, contract1, endDateTime = format(Sys.Date(), 
"%Y%m%d 24:00:00"), duration = "3 M")

but I can't get the code below to work

reqMktData(tws, contract1)

nor if I put a maturity in and use the same call like this

contract1 <- twsContract(0,sym1, "CONTFUT", 
mkt1,"","20181114","0.0","USD","","","",NULL,NULL,"0")

or

contract1 <- twsContract(0,sym1, "CONTFUT", 
mkt1,"","201811","0.0","USD","","","",NULL,NULL,"0")

although TWS specified this contract matures on 14 Nov.

All I get is:

TWS Message: 2 1 300 Can't find EId with tickerId:1
TWS Message: 2 1 321 Error validating request:-'bN' : cause - Please 
enter a valid security type

I have tried all sorts of alternates on the date but can't make it work 
and I tried this which I found on the web which was claimed to work:

 ??? contract = 
twsFuture(symbol="ES",exch="GLOBEX",primary="GLOBEX",currency="USD",expiry="20171215")
 ??? ESHistorical = reqHistoricalData(tws, contract)
 ??? ESRealTime = reqMktData(tws, contract)

but got a different error message:

TWS Message: 2 1 300 Can't find EId with tickerId:1
TWS Message: 2 1 200 No security definition has been found for the request

Can anyone tell me where I have gone wrong with my own definition?


----------------------------------------------------------------------------------------------------------------------------------- 

Stephen Choularton PhD, FIoD


From e@ @ending from enrico@chum@nn@net  Thu Oct 18 13:33:08 2018
From: e@ @ending from enrico@chum@nn@net (Enrico Schumann)
Date: Thu, 18 Oct 2018 13:33:08 +0200
Subject: [R-SIG-Finance] problem with reqMktData
In-Reply-To: <a2d7f554-2369-022f-76bd-26a10796903a@organicfoodmarkets.com.au>
 (Stephen Choularton's message of "Thu, 18 Oct 2018 21:51:04 +1100")
References: <a2d7f554-2369-022f-76bd-26a10796903a@organicfoodmarkets.com.au>
Message-ID: <87tvljcwwb.fsf@enricoschumann.net>

On Do, 18 Okt 2018, Stephen Choularton writes:

> Hi
>
> I can use this code to get historic data:
>
> library("IBrokers")
>
> sym1 <- 'ZS'
> mkt1 <- 'ECBOT'
> sym2 <- 'ZC'
> mkt2 <- 'ECBOT'
>
> contract1 <- twsContract(0,sym1, "CONTFUT",
> mkt1,"","","0.0","USD","","","",NULL,NULL,"0")
>
> reqHistoricalData(tws, contract1, endDateTime =
> format(Sys.Date(), "%Y%m%d 24:00:00"), duration = "3
> M")
>
> but I can't get the code below to work
>
> reqMktData(tws, contract1)
>
> nor if I put a maturity in and use the same call like this
>
> contract1 <- twsContract(0,sym1, "CONTFUT",
> mkt1,"","20181114","0.0","USD","","","",NULL,NULL,"0")
>
> or
>
> contract1 <- twsContract(0,sym1, "CONTFUT",
> mkt1,"","201811","0.0","USD","","","",NULL,NULL,"0")
>
> although TWS specified this contract matures on 14 Nov.
>
> All I get is:
>
> TWS Message: 2 1 300 Can't find EId with tickerId:1
> TWS Message: 2 1 321 Error validating request:-'bN' :
> cause - Please enter a valid security type
>
> I have tried all sorts of alternates on the date but
> can't make it work and I tried this which I found on
> the web which was claimed to work:
>
> ??? contract =
> twsFuture(symbol="ES",exch="GLOBEX",primary="GLOBEX",currency="USD",expiry="20171215")
> ??? ESHistorical = reqHistoricalData(tws, contract)
> ??? ESRealTime = reqMktData(tws, contract)
>
> but got a different error message:
>
> TWS Message: 2 1 300 Can't find EId with tickerId:1
> TWS Message: 2 1 200 No security definition has been found for the request
>
> Can anyone tell me where I have gone wrong with my own definition?
>
>
> ----------------------------------------------------------------------------------------------------------------------------------- 
>
> Stephen Choularton PhD, FIoD
>

I don't think you can request market data for
continuous contracts. As the IB docs say:

,----
| Continuous futures are available from the API with TWS
| v971 and higher. Continuous futures cannot be used with
| real time data or to place orders, but only for
| historical data.
`----

If I understand you correctly, you want data for
the soybeans Nov-18 future?

,----
| library("IBrokers")
| tws <- twsConnect()
| contract1 <- twsContract(
|     local = "ZS   NOV 18",
|     sectype = "FUT", 
|     exch = "ECBOT",
|     currency = "USD",
|     include_expired = "1",
|     conId = "", symbol = "",
|     primary = "", expiry = "", 
|     strike = "", right = "",
|     multiplier = "", combo_legs_desc = "", 
|     comboleg = "", secIdType = "", secId = "")
| reqMktData(tws, contract1)
`----

See the description for the contract specification here:
https://github.com/enricoschumann/IButils#finding-the-contract-specification


-- 
Enrico Schumann
Lucerne, Switzerland
http://enricoschumann.net


From @imonhovm@rk @ending from gm@il@com  Thu Oct 18 23:14:00 2018
From: @imonhovm@rk @ending from gm@il@com (Simon Hovmark)
Date: Thu, 18 Oct 2018 17:14:00 -0400
Subject: [R-SIG-Finance] optimize.portfolio.rebalancing with
 changing/dynamic stock universe [PortfolioAnalytics]
Message-ID: <777D3ADD-2567-4EBE-B1A3-EB72FF9426D1@gmail.com>

I am using the PortfolioAnalytics package to run a multi-period optimization on a quite large stock universe (14 European indicies ~ 800 stocks) but I?ve run into a problem. All examples and vignettes using the package has a fixed stock universe over the backtest period (like EDHEC) while I?ve a dynamic universe. For example, stock XYZ might have been in an index from may, 2002 to October 2007 and after that excluded from the index. However, the optimizer is only allowed to include stock XYZ in the optimization if it was part of an index at the rebalance date.

>From my understanding, it is not possible to set up a custom constraint (like it is with objectives) to say that, stock XYZ should only be included in the optimization rebalancing if the rebalancing date is between may, 2002 to October 2007. Does anybody have an idea how to solve this?

Data
I?ve a dataset (daily data) with a 1 if the stocks were in their respective index at the date and a 0 if they were not (see last sentence). Alternatively, I also have a list like the below with the precise dates:

Name  		Entry  		 Exit
SBMO-NL        2003-03-03     2015-03-20
SMBO-NL        2016-03-21     2018-03-16
TA-NL  		2008-03-26     2008-06-27
TLNL-NL          2000-12-29     2002-03-01
TLNL-NL          2004-03-02     2005-10-10

My returns series have the returns for the stocks for the complete listing period (not dependent on the stock being in an index or not). My current (very very ugly) work-around was to multiply the 1/0 matrix and the return matrix, so I only had returns for the periods when the stocks where in an index, and then replace all 0/NAs with -100. This -100 would penalize stocks outside of an index to such a degree, that it would not be included in the index. However, this is ugly and incorrect plus it does not work.

Code
This is not my exact code but see this as an example of a simple optimization:
 
returns <- read_excel("R", sheet = 1, col_names = TRUE)
returns <- xts(returns[,-1], order.by = as.Date(paste(returns$Dato, format = "%Y.%m.%d")))
returns <- Return.calculate(returns, method = "log")
returns <- returns[-1,] 

fund.names <- colnames(returns)
tranch1 <- portfolio.spec(assets = fund.names)

 # Constraints
tranch1 <- add.constraint(portfolio = tranch1, type = "leverage")
tranch1 <- add.constraint(portfolio = tranch1, type = "long_only")

# Objective
tranch1 <- add.objective(portfolio=tranch1, type="return", name="mean")
tranch1 <- add.objective(portfolio=tranch1, type="risk", name="StdDev")

tranch1_opt <- optimize.portfolio.rebalancing(R=returns, portfolio=tranch1,
                                           optimize_method="DEoptim",
                                           #momentFUN = tranch1_boudt,
                                           #momentargs=ac.moments,
                                           rebalance_on = ?year?,
                                           training_period = 26,
                                           rolling_window = 26,
                                           trace=TRUE, traceDE=5, search_size=2000)

Here is some data from my sample (dput):
structure(c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 46.276, 46.327, 46.122, 46.924,
46.071, 46.856, 47.351, 45.645, 46.003, 47.436, 48.358, 49.501,
49.364, 49.433, 48.597, 48.204, 47.061, 47.266, 47.436, 49.211,
50.729, 51.514, 51.19, 49.996, 51.156, 51.856, 51.412, 52.385,
55.797, 55.371, 54.176, 53.784, 52.896, 53.511, 54.603, 55.115,
54.654, 52.658, 52.692, 54.603, 54.569, 56.258, 54.944, 54.654,
54.552, 54.603, 53.954, 53.852, 54.262, 54.262, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 123.067, 122.712, 123.422, 127.323, 127.855, 128.032,
124.84, 117.215, 121.826, 120.939, 117.747, 122.358, 119.875,
114.91, 115.619, 113.846, 116.328, 118.634, 119.698, 120.407,
119.166, 118.811, 120.584, 120.584, 120.584, 119.875, 119.166,
120.584, 123.422, 121.294, 119.52, 123.244, 122.89, 125.018,
126.082, 125.55, 126.082, 126.259, 125.55, 126.614, 126.082,
130.692, 132.288, 132.465, 134.061, 131.047, 131.401, 133.884,
134.771, 141.155, 38.773, 39.16, 39.419, 41.067, 40.356, 41.131,
41.099, 39.548, 40.453, 40.13, 39.419, 42.327, 42.392, 43.425,
43.684, 44.976, 44.944, 44.976, 44.136, 44.362, 43.813, 43.878,
43.942, 44.298, 44.912, 45.881, 45.235, 45.558, 47.658, 47.173,
45.59, 46.786, 47.335, 47.561, 47.27, 48.337, 47.82, 46.883,
45.396, 47.432, 47.917, 48.434, 48.66, 48.983, 48.983, 48.627,
49.015, 50.728, 51.697, 51.859), .Dim = c(50L, 5L), .Dimnames = list(
    NULL, c("BAER-CH-B4R2R5", "BALN-CH-7124594", "CFR-CH-BCRWZ1",
    "CIBN-CH-5196744", "CLN-CH-7113990")), index = structure(c(883353600,
883440000, 883526400, 883699200, 883958400, 884131200, 884217600,
884304000, 884563200, 884649600, 884736000, 884822400, 884908800,
885168000, 885254400, 885340800, 885427200, 885513600, 885772800,
885859200, 885945600, 886032000, 886118400, 886377600, 886464000,
886550400, 886636800, 886723200, 886982400, 887068800, 887155200,
887241600, 887328000, 887587200, 887673600, 887760000, 887846400,
887932800, 888192000, 888278400, 888364800, 888451200, 888537600,
888796800, 888883200, 888969600, 889056000, 889142400, 889401600,
889488000), tzone = "UTC", tclass = c("POSIXct", "POSIXt")), class = c("xts",
"zoo"), .indexCLASS = c("POSIXct", "POSIXt"), tclass = c("POSIXct",
"POSIXt"), .indexTZ = "UTC", tzone = "UTC?)    

As an alternative, I have also uploaded a full index here (https://ufile.io/0cxn6 <https://ufile.io/0cxn6>) where the first sheet is the 1/0 matrix, the second the full return matrix and the third is the 1/0 matrix times the full return matrix.
 
	[[alternative HTML version deleted]]


From ericjberger @ending from gm@il@com  Fri Oct 19 11:48:08 2018
From: ericjberger @ending from gm@il@com (Eric Berger)
Date: Fri, 19 Oct 2018 12:48:08 +0300
Subject: [R-SIG-Finance] optimize.portfolio.rebalancing with
 changing/dynamic stock universe [PortfolioAnalytics]
In-Reply-To: <777D3ADD-2567-4EBE-B1A3-EB72FF9426D1@gmail.com>
References: <777D3ADD-2567-4EBE-B1A3-EB72FF9426D1@gmail.com>
Message-ID: <CAGgJW76OCohoAemj=oePgBnnJFZsocJX_10zk0aSv1jEszhW4w@mail.gmail.com>

I see a few problems with your approach
1. Providing incorrect returns data for stocks when they are NOT in the
index won't work because you need the historical co-movements of the stock
with the rest of the investable universe. e.g. for Sharpe-Ratio
(Mean-Variance) optimization, if the stock first entered the index on July
1, you will need accurate returns data for at least the size of the window
used to compute a covariance for July 1 - e.g. if a 12-month window then
for the full year prior to the first entry into the index.
2. If your optimization problem allows negative weights (i.e. short
positions), then clearly using extreme negative returns for a stock will
identify it as a good candidate for inclusion on the short side.

Possible approach:
Major index membership changes relatively infrequently. e.g. the S&P500
membership is reconstituted annually.
If your 1/0 data shows that changes are infrequent you might be able to
simply perform several runs with each run having a "constant" investable
universe for the rebalancing dates for that run. Then stitch together the
results from the different runs.

Another approach:
Contact the authors of the package to see if they have suggestions. You are
raising a standard concern and they may have addressed it or have thought
about how to deal with it.

Regards,
Eric




On Fri, Oct 19, 2018 at 12:14 AM Simon Hovmark <simonhovmark at gmail.com>
wrote:

> I am using the PortfolioAnalytics package to run a multi-period
> optimization on a quite large stock universe (14 European indicies ~ 800
> stocks) but I?ve run into a problem. All examples and vignettes using the
> package has a fixed stock universe over the backtest period (like EDHEC)
> while I?ve a dynamic universe. For example, stock XYZ might have been in an
> index from may, 2002 to October 2007 and after that excluded from the
> index. However, the optimizer is only allowed to include stock XYZ in the
> optimization if it was part of an index at the rebalance date.
>
> From my understanding, it is not possible to set up a custom constraint
> (like it is with objectives) to say that, stock XYZ should only be included
> in the optimization rebalancing if the rebalancing date is between may,
> 2002 to October 2007. Does anybody have an idea how to solve this?
>
> Data
> I?ve a dataset (daily data) with a 1 if the stocks were in their
> respective index at the date and a 0 if they were not (see last sentence).
> Alternatively, I also have a list like the below with the precise dates:
>
> Name            Entry            Exit
> SBMO-NL        2003-03-03     2015-03-20
> SMBO-NL        2016-03-21     2018-03-16
> TA-NL           2008-03-26     2008-06-27
> TLNL-NL          2000-12-29     2002-03-01
> TLNL-NL          2004-03-02     2005-10-10
>
> My returns series have the returns for the stocks for the complete listing
> period (not dependent on the stock being in an index or not). My current
> (very very ugly) work-around was to multiply the 1/0 matrix and the return
> matrix, so I only had returns for the periods when the stocks where in an
> index, and then replace all 0/NAs with -100. This -100 would penalize
> stocks outside of an index to such a degree, that it would not be included
> in the index. However, this is ugly and incorrect plus it does not work.
>
> Code
> This is not my exact code but see this as an example of a simple
> optimization:
>
> returns <- read_excel("R", sheet = 1, col_names = TRUE)
> returns <- xts(returns[,-1], order.by = as.Date(paste(returns$Dato,
> format = "%Y.%m.%d")))
> returns <- Return.calculate(returns, method = "log")
> returns <- returns[-1,]
>
> fund.names <- colnames(returns)
> tranch1 <- portfolio.spec(assets = fund.names)
>
>  # Constraints
> tranch1 <- add.constraint(portfolio = tranch1, type = "leverage")
> tranch1 <- add.constraint(portfolio = tranch1, type = "long_only")
>
> # Objective
> tranch1 <- add.objective(portfolio=tranch1, type="return", name="mean")
> tranch1 <- add.objective(portfolio=tranch1, type="risk", name="StdDev")
>
> tranch1_opt <- optimize.portfolio.rebalancing(R=returns, portfolio=tranch1,
>                                            optimize_method="DEoptim",
>                                            #momentFUN = tranch1_boudt,
>                                            #momentargs=ac.moments,
>                                            rebalance_on = ?year?,
>                                            training_period = 26,
>                                            rolling_window = 26,
>                                            trace=TRUE, traceDE=5,
> search_size=2000)
>
> Here is some data from my sample (dput):
> structure(c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 46.276, 46.327, 46.122, 46.924,
> 46.071, 46.856, 47.351, 45.645, 46.003, 47.436, 48.358, 49.501,
> 49.364, 49.433, 48.597, 48.204, 47.061, 47.266, 47.436, 49.211,
> 50.729, 51.514, 51.19, 49.996, 51.156, 51.856, 51.412, 52.385,
> 55.797, 55.371, 54.176, 53.784, 52.896, 53.511, 54.603, 55.115,
> 54.654, 52.658, 52.692, 54.603, 54.569, 56.258, 54.944, 54.654,
> 54.552, 54.603, 53.954, 53.852, 54.262, 54.262, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 123.067, 122.712, 123.422, 127.323, 127.855, 128.032,
> 124.84, 117.215, 121.826, 120.939, 117.747, 122.358, 119.875,
> 114.91, 115.619, 113.846, 116.328, 118.634, 119.698, 120.407,
> 119.166, 118.811, 120.584, 120.584, 120.584, 119.875, 119.166,
> 120.584, 123.422, 121.294, 119.52, 123.244, 122.89, 125.018,
> 126.082, 125.55, 126.082, 126.259, 125.55, 126.614, 126.082,
> 130.692, 132.288, 132.465, 134.061, 131.047, 131.401, 133.884,
> 134.771, 141.155, 38.773, 39.16, 39.419, 41.067, 40.356, 41.131,
> 41.099, 39.548, 40.453, 40.13, 39.419, 42.327, 42.392, 43.425,
> 43.684, 44.976, 44.944, 44.976, 44.136, 44.362, 43.813, 43.878,
> 43.942, 44.298, 44.912, 45.881, 45.235, 45.558, 47.658, 47.173,
> 45.59, 46.786, 47.335, 47.561, 47.27, 48.337, 47.82, 46.883,
> 45.396, 47.432, 47.917, 48.434, 48.66, 48.983, 48.983, 48.627,
> 49.015, 50.728, 51.697, 51.859), .Dim = c(50L, 5L), .Dimnames = list(
>     NULL, c("BAER-CH-B4R2R5", "BALN-CH-7124594", "CFR-CH-BCRWZ1",
>     "CIBN-CH-5196744", "CLN-CH-7113990")), index = structure(c(883353600,
> 883440000, 883526400, 883699200, 883958400, 884131200, 884217600,
> 884304000, 884563200, 884649600, 884736000, 884822400, 884908800,
> 885168000, 885254400, 885340800, 885427200, 885513600, 885772800,
> 885859200, 885945600, 886032000, 886118400, 886377600, 886464000,
> 886550400, 886636800, 886723200, 886982400, 887068800, 887155200,
> 887241600, 887328000, 887587200, 887673600, 887760000, 887846400,
> 887932800, 888192000, 888278400, 888364800, 888451200, 888537600,
> 888796800, 888883200, 888969600, 889056000, 889142400, 889401600,
> 889488000), tzone = "UTC", tclass = c("POSIXct", "POSIXt")), class =
> c("xts",
> "zoo"), .indexCLASS = c("POSIXct", "POSIXt"), tclass = c("POSIXct",
> "POSIXt"), .indexTZ = "UTC", tzone = "UTC?)
>
> As an alternative, I have also uploaded a full index here (
> https://ufile.io/0cxn6 <https://ufile.io/0cxn6>) where the first sheet is
> the 1/0 matrix, the second the full return matrix and the third is the 1/0
> matrix times the full return matrix.
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From ro@@bennett34 @ending from gm@il@com  Fri Oct 19 15:45:05 2018
From: ro@@bennett34 @ending from gm@il@com (Ross Bennett)
Date: Fri, 19 Oct 2018 08:45:05 -0500
Subject: [R-SIG-Finance] optimize.portfolio.rebalancing with
 changing/dynamic stock universe [PortfolioAnalytics]
In-Reply-To: <CAGgJW76OCohoAemj=oePgBnnJFZsocJX_10zk0aSv1jEszhW4w@mail.gmail.com>
References: <777D3ADD-2567-4EBE-B1A3-EB72FF9426D1@gmail.com>
 <CAGgJW76OCohoAemj=oePgBnnJFZsocJX_10zk0aSv1jEszhW4w@mail.gmail.com>
Message-ID: <CAEESW=WuxQedLydNgBqN_aYMTnqtZrwZQYV1=ePDztH9HqBbFg@mail.gmail.com>

Hi Simon,

A changing universe is not directly supported in PortfolioAnalytics, but it
can absolutely be done. Eric Berger mentioned several of the key concerns
with return histories of different lengths and an evolving universe of
assets. The optimize.portfolio.rebalancing function is effectively a
wrapper around optimize.portfolio. A solution to your problem with a
dynamic universe is to write your own rebalancing loop. At each iteration,
you can define the assets in the portfolio specification and the returns to
use for that iteration.

This has come up before and I would like to add it to PortfolioAnalytics,
but it has not risen to the top of my priority list. Feel free to open a
feature request on https://github.com/braverock/PortfolioAnalytics. Also,
patches always welcome.

Hope that helps.

Best,
Ross

On Fri, Oct 19, 2018 at 4:48 AM Eric Berger <ericjberger at gmail.com> wrote:

> I see a few problems with your approach
> 1. Providing incorrect returns data for stocks when they are NOT in the
> index won't work because you need the historical co-movements of the stock
> with the rest of the investable universe. e.g. for Sharpe-Ratio
> (Mean-Variance) optimization, if the stock first entered the index on July
> 1, you will need accurate returns data for at least the size of the window
> used to compute a covariance for July 1 - e.g. if a 12-month window then
> for the full year prior to the first entry into the index.
> 2. If your optimization problem allows negative weights (i.e. short
> positions), then clearly using extreme negative returns for a stock will
> identify it as a good candidate for inclusion on the short side.
>
> Possible approach:
> Major index membership changes relatively infrequently. e.g. the S&P500
> membership is reconstituted annually.
> If your 1/0 data shows that changes are infrequent you might be able to
> simply perform several runs with each run having a "constant" investable
> universe for the rebalancing dates for that run. Then stitch together the
> results from the different runs.
>
> Another approach:
> Contact the authors of the package to see if they have suggestions. You are
> raising a standard concern and they may have addressed it or have thought
> about how to deal with it.
>
> Regards,
> Eric
>
>
>
>
> On Fri, Oct 19, 2018 at 12:14 AM Simon Hovmark <simonhovmark at gmail.com>
> wrote:
>
> > I am using the PortfolioAnalytics package to run a multi-period
> > optimization on a quite large stock universe (14 European indicies ~ 800
> > stocks) but I?ve run into a problem. All examples and vignettes using the
> > package has a fixed stock universe over the backtest period (like EDHEC)
> > while I?ve a dynamic universe. For example, stock XYZ might have been in
> an
> > index from may, 2002 to October 2007 and after that excluded from the
> > index. However, the optimizer is only allowed to include stock XYZ in the
> > optimization if it was part of an index at the rebalance date.
> >
> > From my understanding, it is not possible to set up a custom constraint
> > (like it is with objectives) to say that, stock XYZ should only be
> included
> > in the optimization rebalancing if the rebalancing date is between may,
> > 2002 to October 2007. Does anybody have an idea how to solve this?
> >
> > Data
> > I?ve a dataset (daily data) with a 1 if the stocks were in their
> > respective index at the date and a 0 if they were not (see last
> sentence).
> > Alternatively, I also have a list like the below with the precise dates:
> >
> > Name            Entry            Exit
> > SBMO-NL        2003-03-03     2015-03-20
> > SMBO-NL        2016-03-21     2018-03-16
> > TA-NL           2008-03-26     2008-06-27
> > TLNL-NL          2000-12-29     2002-03-01
> > TLNL-NL          2004-03-02     2005-10-10
> >
> > My returns series have the returns for the stocks for the complete
> listing
> > period (not dependent on the stock being in an index or not). My current
> > (very very ugly) work-around was to multiply the 1/0 matrix and the
> return
> > matrix, so I only had returns for the periods when the stocks where in an
> > index, and then replace all 0/NAs with -100. This -100 would penalize
> > stocks outside of an index to such a degree, that it would not be
> included
> > in the index. However, this is ugly and incorrect plus it does not work.
> >
> > Code
> > This is not my exact code but see this as an example of a simple
> > optimization:
> >
> > returns <- read_excel("R", sheet = 1, col_names = TRUE)
> > returns <- xts(returns[,-1], order.by = as.Date(paste(returns$Dato,
> > format = "%Y.%m.%d")))
> > returns <- Return.calculate(returns, method = "log")
> > returns <- returns[-1,]
> >
> > fund.names <- colnames(returns)
> > tranch1 <- portfolio.spec(assets = fund.names)
> >
> >  # Constraints
> > tranch1 <- add.constraint(portfolio = tranch1, type = "leverage")
> > tranch1 <- add.constraint(portfolio = tranch1, type = "long_only")
> >
> > # Objective
> > tranch1 <- add.objective(portfolio=tranch1, type="return", name="mean")
> > tranch1 <- add.objective(portfolio=tranch1, type="risk", name="StdDev")
> >
> > tranch1_opt <- optimize.portfolio.rebalancing(R=returns,
> portfolio=tranch1,
> >                                            optimize_method="DEoptim",
> >                                            #momentFUN = tranch1_boudt,
> >                                            #momentargs=ac.moments,
> >                                            rebalance_on = ?year?,
> >                                            training_period = 26,
> >                                            rolling_window = 26,
> >                                            trace=TRUE, traceDE=5,
> > search_size=2000)
> >
> > Here is some data from my sample (dput):
> > structure(c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 46.276, 46.327, 46.122, 46.924,
> > 46.071, 46.856, 47.351, 45.645, 46.003, 47.436, 48.358, 49.501,
> > 49.364, 49.433, 48.597, 48.204, 47.061, 47.266, 47.436, 49.211,
> > 50.729, 51.514, 51.19, 49.996, 51.156, 51.856, 51.412, 52.385,
> > 55.797, 55.371, 54.176, 53.784, 52.896, 53.511, 54.603, 55.115,
> > 54.654, 52.658, 52.692, 54.603, 54.569, 56.258, 54.944, 54.654,
> > 54.552, 54.603, 53.954, 53.852, 54.262, 54.262, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 123.067, 122.712, 123.422, 127.323, 127.855, 128.032,
> > 124.84, 117.215, 121.826, 120.939, 117.747, 122.358, 119.875,
> > 114.91, 115.619, 113.846, 116.328, 118.634, 119.698, 120.407,
> > 119.166, 118.811, 120.584, 120.584, 120.584, 119.875, 119.166,
> > 120.584, 123.422, 121.294, 119.52, 123.244, 122.89, 125.018,
> > 126.082, 125.55, 126.082, 126.259, 125.55, 126.614, 126.082,
> > 130.692, 132.288, 132.465, 134.061, 131.047, 131.401, 133.884,
> > 134.771, 141.155, 38.773, 39.16, 39.419, 41.067, 40.356, 41.131,
> > 41.099, 39.548, 40.453, 40.13, 39.419, 42.327, 42.392, 43.425,
> > 43.684, 44.976, 44.944, 44.976, 44.136, 44.362, 43.813, 43.878,
> > 43.942, 44.298, 44.912, 45.881, 45.235, 45.558, 47.658, 47.173,
> > 45.59, 46.786, 47.335, 47.561, 47.27, 48.337, 47.82, 46.883,
> > 45.396, 47.432, 47.917, 48.434, 48.66, 48.983, 48.983, 48.627,
> > 49.015, 50.728, 51.697, 51.859), .Dim = c(50L, 5L), .Dimnames = list(
> >     NULL, c("BAER-CH-B4R2R5", "BALN-CH-7124594", "CFR-CH-BCRWZ1",
> >     "CIBN-CH-5196744", "CLN-CH-7113990")), index = structure(c(883353600,
> > 883440000, 883526400, 883699200, 883958400, 884131200, 884217600,
> > 884304000, 884563200, 884649600, 884736000, 884822400, 884908800,
> > 885168000, 885254400, 885340800, 885427200, 885513600, 885772800,
> > 885859200, 885945600, 886032000, 886118400, 886377600, 886464000,
> > 886550400, 886636800, 886723200, 886982400, 887068800, 887155200,
> > 887241600, 887328000, 887587200, 887673600, 887760000, 887846400,
> > 887932800, 888192000, 888278400, 888364800, 888451200, 888537600,
> > 888796800, 888883200, 888969600, 889056000, 889142400, 889401600,
> > 889488000), tzone = "UTC", tclass = c("POSIXct", "POSIXt")), class =
> > c("xts",
> > "zoo"), .indexCLASS = c("POSIXct", "POSIXt"), tclass = c("POSIXct",
> > "POSIXt"), .indexTZ = "UTC", tzone = "UTC?)
> >
> > As an alternative, I have also uploaded a full index here (
> > https://ufile.io/0cxn6 <https://ufile.io/0cxn6>) where the first sheet
> is
> > the 1/0 matrix, the second the full return matrix and the third is the
> 1/0
> > matrix times the full return matrix.
> >
> >         [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions
> > should go.
> >
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From lh@lbei@en @ending from gm@il@com  Sat Oct 20 21:25:18 2018
From: lh@lbei@en @ending from gm@il@com (Lukas Halbeisen)
Date: Sat, 20 Oct 2018 21:25:18 +0200
Subject: [R-SIG-Finance] ugarchfit - Weighted Ljung-Box Test and ARCH LM Test
Message-ID: <0d456c28-ed1f-1633-08a5-b44c44d7f5a7@gmail.com>

Hi all,

I am currently working on my master thesis and have to evaluate some 
GARCH-Modells.

What I am wondering:

How are the lags picked up for the Weighted LB-Test as well as for the 
ARCH LM Test.

For instance I have fitted a GARCH(3,3)-Modell:

Weighted Ljung-Box Test on Standardized Squared Residuals
------------------------------------
 ???????????????????????? statistic? p-value
Lag[1]?????????????????????? 9.052 0.002624
Lag[2*(p+q)+(p+q)-1][17]??? 14.593 0.070672
Lag[4*(p+q)+(p+q)-1][29]??? 20.134 0.129824
d.o.f=6


The lags are calculated by the formular 2*(p+q)+(p+q)-1. But what is the 
reason? Is there any reference where this kind of calculation has been 
described?


Weighted ARCH LM Tests

------------------------------------
 ???????????? Statistic Shape Scale P-Value
ARCH Lag[7]????? 1.375 0.500 2.000? 0.2409
ARCH Lag[9]????? 1.462 1.485 1.796? 0.6476
ARCH Lag[11]???? 2.596 2.440 1.677? 0.6695


Same for the ARCH-LM modell. I have 6 d.o.f. but why does rugarch 
consider the lags 7,9 and 11 as the most important ones?

Thank you and best regards,
Lukas


From prof@@mit@mitt@l @ending from gm@il@com  Sat Oct 20 21:38:27 2018
From: prof@@mit@mitt@l @ending from gm@il@com (Amit Mittal)
Date: Sun, 21 Oct 2018 01:08:27 +0530
Subject: [R-SIG-Finance] ugarchfit - Weighted Ljung-Box Test and ARCH LM
 Test
In-Reply-To: <0d456c28-ed1f-1633-08a5-b44c44d7f5a7@gmail.com>
References: <0d456c28-ed1f-1633-08a5-b44c44d7f5a7@gmail.com>
Message-ID: <CAP8zaQDJT0m4s67yRy08fBgqi9N4G0aC_Cz5zc85GyPHnvMo6w@mail.gmail.com>

Try and get hold of basic econometric texts like today and enders (two
separate authors) it is a well described methodology

On Sun 21 Oct, 2018, 12:55 AM Lukas Halbeisen, <lhalbeisen at gmail.com> wrote:

> Hi all,
>
> I am currently working on my master thesis and have to evaluate some
> GARCH-Modells.
>
> What I am wondering:
>
> How are the lags picked up for the Weighted LB-Test as well as for the
> ARCH LM Test.
>
> For instance I have fitted a GARCH(3,3)-Modell:
>
> Weighted Ljung-Box Test on Standardized Squared Residuals
> ------------------------------------
>                           statistic  p-value
> Lag[1]                       9.052 0.002624
> Lag[2*(p+q)+(p+q)-1][17]    14.593 0.070672
> Lag[4*(p+q)+(p+q)-1][29]    20.134 0.129824
> d.o.f=6
>
>
> The lags are calculated by the formular 2*(p+q)+(p+q)-1. But what is the
> reason? Is there any reference where this kind of calculation has been
> described?
>
>
> Weighted ARCH LM Tests
>
> ------------------------------------
>               Statistic Shape Scale P-Value
> ARCH Lag[7]      1.375 0.500 2.000  0.2409
> ARCH Lag[9]      1.462 1.485 1.796  0.6476
> ARCH Lag[11]     2.596 2.440 1.677  0.6695
>
>
> Same for the ARCH-LM modell. I have 6 d.o.f. but why does rugarch
> consider the lags 7,9 and 11 as the most important ones?
>
> Thank you and best regards,
> Lukas
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
-- 

______________________________

Amit Mittal
Pursuing Ph.D. in Finance and Accounting
Indian Institute of Management, Lucknow
Visit my SSRN author page:
http://ssrn.com/author=2665511
* Top 10% Downloaded Author on SSRN
Mob: +91 7525023664

This message has been sent from a mobile device. I may contact you again.

_________________

	[[alternative HTML version deleted]]


From @imonhovm@rk @ending from gm@il@com  Mon Oct 22 17:18:42 2018
From: @imonhovm@rk @ending from gm@il@com (Simon Hovmark)
Date: Mon, 22 Oct 2018 11:18:42 -0400
Subject: [R-SIG-Finance] optimize.portfolio.rebalancing with
 changing/dynamic stock universe [PortfolioAnalytics]
In-Reply-To: <CAEESW=WuxQedLydNgBqN_aYMTnqtZrwZQYV1=ePDztH9HqBbFg@mail.gmail.com>
References: <777D3ADD-2567-4EBE-B1A3-EB72FF9426D1@gmail.com>
 <CAGgJW76OCohoAemj=oePgBnnJFZsocJX_10zk0aSv1jEszhW4w@mail.gmail.com>
 <CAEESW=WuxQedLydNgBqN_aYMTnqtZrwZQYV1=ePDztH9HqBbFg@mail.gmail.com>
Message-ID: <680D2B3D-7ED1-4117-A53C-BA6FE52F23BE@gmail.com>

Thanks for your answers! I agree that my current solution was.. non-optimal.

The rebalancing loop around optimize.portfolio seems as the way to go. I?m
not that skilled in R yet and this is for a school project (hard deadline),
so I will probably go with Eric?s solution for now about dividing the data
into pieces determined by the rebalancing dates (yearly) and then sort away
does stocks not in an index at that given date. 

But the rebalancing loop could be a nice project for learning and if I get
to a decent result, I?ll post it here.

-Simon

> Den 19. okt. 2018 kl. 09.45 skrev Ross Bennett <rossbennett34 at gmail.com>:
> 
> Hi Simon,
> 
> A changing universe is not directly supported in PortfolioAnalytics, but it
> can absolutely be done. Eric Berger mentioned several of the key concerns
> with return histories of different lengths and an evolving universe of
> assets. The optimize.portfolio.rebalancing function is effectively a
> wrapper around optimize.portfolio. A solution to your problem with a
> dynamic universe is to write your own rebalancing loop. At each iteration,
> you can define the assets in the portfolio specification and the returns to
> use for that iteration.
> 
> This has come up before and I would like to add it to PortfolioAnalytics,
> but it has not risen to the top of my priority list. Feel free to open a
> feature request on https://github.com/braverock/PortfolioAnalytics <https://github.com/braverock/PortfolioAnalytics>. Also,
> patches always welcome.
> 
> Hope that helps.
> 
> Best,
> Ross
> 
> On Fri, Oct 19, 2018 at 4:48 AM Eric Berger <ericjberger at gmail.com <mailto:ericjberger at gmail.com>> wrote:
> 
>> I see a few problems with your approach
>> 1. Providing incorrect returns data for stocks when they are NOT in the
>> index won't work because you need the historical co-movements of the stock
>> with the rest of the investable universe. e.g. for Sharpe-Ratio
>> (Mean-Variance) optimization, if the stock first entered the index on July
>> 1, you will need accurate returns data for at least the size of the window
>> used to compute a covariance for July 1 - e.g. if a 12-month window then
>> for the full year prior to the first entry into the index.
>> 2. If your optimization problem allows negative weights (i.e. short
>> positions), then clearly using extreme negative returns for a stock will
>> identify it as a good candidate for inclusion on the short side.
>> 
>> Possible approach:
>> Major index membership changes relatively infrequently. e.g. the S&P500
>> membership is reconstituted annually.
>> If your 1/0 data shows that changes are infrequent you might be able to
>> simply perform several runs with each run having a "constant" investable
>> universe for the rebalancing dates for that run. Then stitch together the
>> results from the different runs.
>> 
>> Another approach:
>> Contact the authors of the package to see if they have suggestions. You are
>> raising a standard concern and they may have addressed it or have thought
>> about how to deal with it.
>> 
>> Regards,
>> Eric
>> 
>> 
>> 
>> 
>> On Fri, Oct 19, 2018 at 12:14 AM Simon Hovmark <simonhovmark at gmail.com <mailto:simonhovmark at gmail.com>>
>> wrote:
>> 
>>> I am using the PortfolioAnalytics package to run a multi-period
>>> optimization on a quite large stock universe (14 European indicies ~ 800
>>> stocks) but I?ve run into a problem. All examples and vignettes using the
>>> package has a fixed stock universe over the backtest period (like EDHEC)
>>> while I?ve a dynamic universe. For example, stock XYZ might have been in
>> an
>>> index from may, 2002 to October 2007 and after that excluded from the
>>> index. However, the optimizer is only allowed to include stock XYZ in the
>>> optimization if it was part of an index at the rebalance date.
>>> 
>>> From my understanding, it is not possible to set up a custom constraint
>>> (like it is with objectives) to say that, stock XYZ should only be
>> included
>>> in the optimization rebalancing if the rebalancing date is between may,
>>> 2002 to October 2007. Does anybody have an idea how to solve this?
>>> 
>>> Data
>>> I?ve a dataset (daily data) with a 1 if the stocks were in their
>>> respective index at the date and a 0 if they were not (see last
>> sentence).
>>> Alternatively, I also have a list like the below with the precise dates:
>>> 
>>> Name            Entry            Exit
>>> SBMO-NL        2003-03-03     2015-03-20
>>> SMBO-NL        2016-03-21     2018-03-16
>>> TA-NL           2008-03-26     2008-06-27
>>> TLNL-NL          2000-12-29     2002-03-01
>>> TLNL-NL          2004-03-02     2005-10-10
>>> 
>>> My returns series have the returns for the stocks for the complete
>> listing
>>> period (not dependent on the stock being in an index or not). My current
>>> (very very ugly) work-around was to multiply the 1/0 matrix and the
>> return
>>> matrix, so I only had returns for the periods when the stocks where in an
>>> index, and then replace all 0/NAs with -100. This -100 would penalize
>>> stocks outside of an index to such a degree, that it would not be
>> included
>>> in the index. However, this is ugly and incorrect plus it does not work.
>>> 
>>> Code
>>> This is not my exact code but see this as an example of a simple
>>> optimization:
>>> 
>>> returns <- read_excel("R", sheet = 1, col_names = TRUE)
>>> returns <- xts(returns[,-1], order.by = as.Date(paste(returns$Dato,
>>> format = "%Y.%m.%d")))
>>> returns <- Return.calculate(returns, method = "log")
>>> returns <- returns[-1,]
>>> 
>>> fund.names <- colnames(returns)
>>> tranch1 <- portfolio.spec(assets = fund.names)
>>> 
>>> # Constraints
>>> tranch1 <- add.constraint(portfolio = tranch1, type = "leverage")
>>> tranch1 <- add.constraint(portfolio = tranch1, type = "long_only")
>>> 
>>> # Objective
>>> tranch1 <- add.objective(portfolio=tranch1, type="return", name="mean")
>>> tranch1 <- add.objective(portfolio=tranch1, type="risk", name="StdDev")
>>> 
>>> tranch1_opt <- optimize.portfolio.rebalancing(R=returns,
>> portfolio=tranch1,
>>>                                           optimize_method="DEoptim",
>>>                                           #momentFUN = tranch1_boudt,
>>>                                           #momentargs=ac.moments,
>>>                                           rebalance_on = ?year?,
>>>                                           training_period = 26,
>>>                                           rolling_window = 26,
>>>                                           trace=TRUE, traceDE=5,
>>> search_size=2000)
>>> 
>>> Here is some data from my sample (dput):
>>> structure(c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>>> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>>> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 46.276, 46.327, 46.122, 46.924,
>>> 46.071, 46.856, 47.351, 45.645, 46.003, 47.436, 48.358, 49.501,
>>> 49.364, 49.433, 48.597, 48.204, 47.061, 47.266, 47.436, 49.211,
>>> 50.729, 51.514, 51.19, 49.996, 51.156, 51.856, 51.412, 52.385,
>>> 55.797, 55.371, 54.176, 53.784, 52.896, 53.511, 54.603, 55.115,
>>> 54.654, 52.658, 52.692, 54.603, 54.569, 56.258, 54.944, 54.654,
>>> 54.552, 54.603, 53.954, 53.852, 54.262, 54.262, 0, 0, 0, 0, 0,
>>> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>>> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>>> 0, 0, 0, 123.067, 122.712, 123.422, 127.323, 127.855, 128.032,
>>> 124.84, 117.215, 121.826, 120.939, 117.747, 122.358, 119.875,
>>> 114.91, 115.619, 113.846, 116.328, 118.634, 119.698, 120.407,
>>> 119.166, 118.811, 120.584, 120.584, 120.584, 119.875, 119.166,
>>> 120.584, 123.422, 121.294, 119.52, 123.244, 122.89, 125.018,
>>> 126.082, 125.55, 126.082, 126.259, 125.55, 126.614, 126.082,
>>> 130.692, 132.288, 132.465, 134.061, 131.047, 131.401, 133.884,
>>> 134.771, 141.155, 38.773, 39.16, 39.419, 41.067, 40.356, 41.131,
>>> 41.099, 39.548, 40.453, 40.13, 39.419, 42.327, 42.392, 43.425,
>>> 43.684, 44.976, 44.944, 44.976, 44.136, 44.362, 43.813, 43.878,
>>> 43.942, 44.298, 44.912, 45.881, 45.235, 45.558, 47.658, 47.173,
>>> 45.59, 46.786, 47.335, 47.561, 47.27, 48.337, 47.82, 46.883,
>>> 45.396, 47.432, 47.917, 48.434, 48.66, 48.983, 48.983, 48.627,
>>> 49.015, 50.728, 51.697, 51.859), .Dim = c(50L, 5L), .Dimnames = list(
>>>    NULL, c("BAER-CH-B4R2R5", "BALN-CH-7124594", "CFR-CH-BCRWZ1",
>>>    "CIBN-CH-5196744", "CLN-CH-7113990")), index = structure(c(883353600,
>>> 883440000, 883526400, 883699200, 883958400, 884131200, 884217600,
>>> 884304000, 884563200, 884649600, 884736000, 884822400, 884908800,
>>> 885168000, 885254400, 885340800, 885427200, 885513600, 885772800,
>>> 885859200, 885945600, 886032000, 886118400, 886377600, 886464000,
>>> 886550400, 886636800, 886723200, 886982400, 887068800, 887155200,
>>> 887241600, 887328000, 887587200, 887673600, 887760000, 887846400,
>>> 887932800, 888192000, 888278400, 888364800, 888451200, 888537600,
>>> 888796800, 888883200, 888969600, 889056000, 889142400, 889401600,
>>> 889488000), tzone = "UTC", tclass = c("POSIXct", "POSIXt")), class =
>>> c("xts",
>>> "zoo"), .indexCLASS = c("POSIXct", "POSIXt"), tclass = c("POSIXct",
>>> "POSIXt"), .indexTZ = "UTC", tzone = "UTC?)
>>> 
>>> As an alternative, I have also uploaded a full index here (
>>> https://ufile.io/0cxn6 <https://ufile.io/0cxn6> <https://ufile.io/0cxn6 <https://ufile.io/0cxn6>>) where the first sheet
>> is
>>> the 1/0 matrix, the second the full return matrix and the third is the
>> 1/0
>>> matrix times the full return matrix.
>>> 
>>>        [[alternative HTML version deleted]]
>>> 
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org> mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance <https://stat.ethz.ch/mailman/listinfo/r-sig-finance>
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>> 
>> 
>>        [[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance <https://stat.ethz.ch/mailman/listinfo/r-sig-finance>
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance <https://stat.ethz.ch/mailman/listinfo/r-sig-finance>
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


	[[alternative HTML version deleted]]


From lh@lbei@en @ending from gm@il@com  Mon Oct 22 20:29:01 2018
From: lh@lbei@en @ending from gm@il@com (Lukas Halbeisen)
Date: Mon, 22 Oct 2018 20:29:01 +0200
Subject: [R-SIG-Finance] ugarchfit - Weighted Ljung-Box Test and ARCH LM
 Test
In-Reply-To: <CAP8zaQDJT0m4s67yRy08fBgqi9N4G0aC_Cz5zc85GyPHnvMo6w@mail.gmail.com>
References: <0d456c28-ed1f-1633-08a5-b44c44d7f5a7@gmail.com>
 <CAP8zaQDJT0m4s67yRy08fBgqi9N4G0aC_Cz5zc85GyPHnvMo6w@mail.gmail.com>
Message-ID: <d2cf788f-5021-a405-27f9-9d60cd19af38@gmail.com>

Hi Amit,

thanks for your quick reply. :)

I invested today another 4 hours to find some adequate information, 
which lags should be tested. As well, I checked "Applied Econometric 
Time Series" from Enders to find some appropiate information to this 
matter, but with no result.

Would you be so kind to give me some more details to the references you 
are talking about? Or can you tell me how the methodology is called, 
that would be very helpful for me.

Thank you very much and best regards,
Lukas

Am 20.10.2018 um 21:38 schrieb Amit Mittal:
> Try and get hold of basic econometric texts like today and enders (two 
> separate authors) it is a well described methodology
>
> On Sun 21 Oct, 2018, 12:55 AM Lukas Halbeisen, <lhalbeisen at gmail.com 
> <mailto:lhalbeisen at gmail.com>> wrote:
>
>     Hi all,
>
>     I am currently working on my master thesis and have to evaluate some
>     GARCH-Modells.
>
>     What I am wondering:
>
>     How are the lags picked up for the Weighted LB-Test as well as for
>     the
>     ARCH LM Test.
>
>     For instance I have fitted a GARCH(3,3)-Modell:
>
>     Weighted Ljung-Box Test on Standardized Squared Residuals
>     ------------------------------------
>     ????????????????????????? statistic? p-value
>     Lag[1]?????????????????????? 9.052 0.002624
>     Lag[2*(p+q)+(p+q)-1][17]??? 14.593 0.070672
>     Lag[4*(p+q)+(p+q)-1][29]??? 20.134 0.129824
>     d.o.f=6
>
>
>     The lags are calculated by the formular 2*(p+q)+(p+q)-1. But what
>     is the
>     reason? Is there any reference where this kind of calculation has
>     been
>     described?
>
>
>     Weighted ARCH LM Tests
>
>     ------------------------------------
>     ????????????? Statistic Shape Scale P-Value
>     ARCH Lag[7]????? 1.375 0.500 2.000? 0.2409
>     ARCH Lag[9]????? 1.462 1.485 1.796? 0.6476
>     ARCH Lag[11]???? 2.596 2.440 1.677? 0.6695
>
>
>     Same for the ARCH-LM modell. I have 6 d.o.f. but why does rugarch
>     consider the lags 7,9 and 11 as the most important ones?
>
>     Thank you and best regards,
>     Lukas
>
>     _______________________________________________
>     R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org>
>     mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>     -- Subscriber-posting only. If you want to post, subscribe first.
>     -- Also note that this is not the r-help list where general R
>     questions should go.
>
> -- 
>
> ______________________________
>
> Amit Mittal
> Pursuing Ph.D. in Finance and Accounting
> Indian Institute of Management, Lucknow
> Visit my SSRN author page:
> http://ssrn.com/author=2665511
> * Top 10% Downloaded Author on SSRN
> Mob: +91 7525023664
>
> This message has been sent from a mobile device. I may contact you again.
>
> _________________
>

	[[alternative HTML version deleted]]


From jo@hu@@@eg@l @ending from gm@il@com  Mon Oct 22 20:34:21 2018
From: jo@hu@@@eg@l @ending from gm@il@com (Josh Segal)
Date: Mon, 22 Oct 2018 14:34:21 -0400
Subject: [R-SIG-Finance] ugarchfit - Weighted Ljung-Box Test and ARCH LM
 Test
In-Reply-To: <d2cf788f-5021-a405-27f9-9d60cd19af38@gmail.com>
References: <0d456c28-ed1f-1633-08a5-b44c44d7f5a7@gmail.com>
 <CAP8zaQDJT0m4s67yRy08fBgqi9N4G0aC_Cz5zc85GyPHnvMo6w@mail.gmail.com>
 <d2cf788f-5021-a405-27f9-9d60cd19af38@gmail.com>
Message-ID: <CAHRBD=a2653HY3J38Qe+LRSsLxGj=w8Dbaq3-YbJKLfLXUMe7w@mail.gmail.com>

Lukas,

The rugarch vignette references this paper, have you read it?
http://cecas.clemson.edu/~cgallag/publications/FishGal.pdf

For more details you can follow references therein.

Josh

On Mon, Oct 22, 2018 at 2:29 PM Lukas Halbeisen <lhalbeisen at gmail.com>
wrote:

> Hi Amit,
>
> thanks for your quick reply. :)
>
> I invested today another 4 hours to find some adequate information,
> which lags should be tested. As well, I checked "Applied Econometric
> Time Series" from Enders to find some appropiate information to this
> matter, but with no result.
>
> Would you be so kind to give me some more details to the references you
> are talking about? Or can you tell me how the methodology is called,
> that would be very helpful for me.
>
> Thank you very much and best regards,
> Lukas
>
> Am 20.10.2018 um 21:38 schrieb Amit Mittal:
> > Try and get hold of basic econometric texts like today and enders (two
> > separate authors) it is a well described methodology
> >
> > On Sun 21 Oct, 2018, 12:55 AM Lukas Halbeisen, <lhalbeisen at gmail.com
> > <mailto:lhalbeisen at gmail.com>> wrote:
> >
> >     Hi all,
> >
> >     I am currently working on my master thesis and have to evaluate some
> >     GARCH-Modells.
> >
> >     What I am wondering:
> >
> >     How are the lags picked up for the Weighted LB-Test as well as for
> >     the
> >     ARCH LM Test.
> >
> >     For instance I have fitted a GARCH(3,3)-Modell:
> >
> >     Weighted Ljung-Box Test on Standardized Squared Residuals
> >     ------------------------------------
> >                               statistic  p-value
> >     Lag[1]                       9.052 0.002624
> >     Lag[2*(p+q)+(p+q)-1][17]    14.593 0.070672
> >     Lag[4*(p+q)+(p+q)-1][29]    20.134 0.129824
> >     d.o.f=6
> >
> >
> >     The lags are calculated by the formular 2*(p+q)+(p+q)-1. But what
> >     is the
> >     reason? Is there any reference where this kind of calculation has
> >     been
> >     described?
> >
> >
> >     Weighted ARCH LM Tests
> >
> >     ------------------------------------
> >                   Statistic Shape Scale P-Value
> >     ARCH Lag[7]      1.375 0.500 2.000  0.2409
> >     ARCH Lag[9]      1.462 1.485 1.796  0.6476
> >     ARCH Lag[11]     2.596 2.440 1.677  0.6695
> >
> >
> >     Same for the ARCH-LM modell. I have 6 d.o.f. but why does rugarch
> >     consider the lags 7,9 and 11 as the most important ones?
> >
> >     Thank you and best regards,
> >     Lukas
> >
> >     _______________________________________________
> >     R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org>
> >     mailing list
> >     https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >     -- Subscriber-posting only. If you want to post, subscribe first.
> >     -- Also note that this is not the r-help list where general R
> >     questions should go.
> >
> > --
> >
> > ______________________________
> >
> > Amit Mittal
> > Pursuing Ph.D. in Finance and Accounting
> > Indian Institute of Management, Lucknow
> > Visit my SSRN author page:
> > http://ssrn.com/author=2665511
> > * Top 10% Downloaded Author on SSRN
> > Mob: +91 7525023664
> >
> > This message has been sent from a mobile device. I may contact you again.
> >
> > _________________
> >
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From prof@@mit@mitt@l @ending from gm@il@com  Mon Oct 22 21:33:20 2018
From: prof@@mit@mitt@l @ending from gm@il@com (Amit Mittal)
Date: Mon, 22 Oct 2018 19:33:20 +0000
Subject: [R-SIG-Finance] ugarchfit - Weighted Ljung-Box Test and ARCH LM
 Test
In-Reply-To: <d2cf788f-5021-a405-27f9-9d60cd19af38@gmail.com>
References: <0d456c28-ed1f-1633-08a5-b44c44d7f5a7@gmail.com>
 <CAP8zaQDJT0m4s67yRy08fBgqi9N4G0aC_Cz5zc85GyPHnvMo6w@mail.gmail.com>,
 <d2cf788f-5021-a405-27f9-9d60cd19af38@gmail.com>
Message-ID: <DM6PR01MB410704C6000253156B55C8CCFCF40@DM6PR01MB4107.prod.exchangelabs.com>

Ruey tsay - analysis of financial time series
Enders - Applied Economet time series
Greene

------------
Amit Mittal
PhD in Finance and Accounting (tbd)
IIM Lucknow
http://ssrn.com/author=2665511
*Top 10%, downloaded author since July 2017
------------
Sent from my Outlook for Android
https://aka.ms/ghei36

________________________________
From: Lukas Halbeisen <lhalbeisen at gmail.com>
Sent: Monday, October 22, 2018 11:59:01 PM
To: profamitmittal at gmail.com
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] ugarchfit - Weighted Ljung-Box Test and ARCH LM Test


Hi Amit,

thanks for your quick reply. :)

I invested today another 4 hours to find some adequate information, which lags should be tested. As well, I checked "Applied Econometric Time Series" from Enders to find some appropiate information to this matter, but with no result.

Would you be so kind to give me some more details to the references you are talking about? Or can you tell me how the methodology is called, that would be very helpful for me.

Thank you very much and best regards,
Lukas


Am 20.10.2018 um 21:38 schrieb Amit Mittal:
Try and get hold of basic econometric texts like today and enders (two separate authors) it is a well described methodology

On Sun 21 Oct, 2018, 12:55 AM Lukas Halbeisen, <lhalbeisen at gmail.com<mailto:lhalbeisen at gmail.com>> wrote:
Hi all,

I am currently working on my master thesis and have to evaluate some
GARCH-Modells.

What I am wondering:

How are the lags picked up for the Weighted LB-Test as well as for the
ARCH LM Test.

For instance I have fitted a GARCH(3,3)-Modell:

Weighted Ljung-Box Test on Standardized Squared Residuals
------------------------------------
                          statistic  p-value
Lag[1]                       9.052 0.002624
Lag[2*(p+q)+(p+q)-1][17]    14.593 0.070672
Lag[4*(p+q)+(p+q)-1][29]    20.134 0.129824
d.o.f=6


The lags are calculated by the formular 2*(p+q)+(p+q)-1. But what is the
reason? Is there any reference where this kind of calculation has been
described?


Weighted ARCH LM Tests

------------------------------------
              Statistic Shape Scale P-Value
ARCH Lag[7]      1.375 0.500 2.000  0.2409
ARCH Lag[9]      1.462 1.485 1.796  0.6476
ARCH Lag[11]     2.596 2.440 1.677  0.6695


Same for the ARCH-LM modell. I have 6 d.o.f. but why does rugarch
consider the lags 7,9 and 11 as the most important ones?

Thank you and best regards,
Lukas

_______________________________________________
R-SIG-Finance at r-project.org<mailto:R-SIG-Finance at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.
--

______________________________

Amit Mittal
Pursuing Ph.D. in Finance and Accounting
Indian Institute of Management, Lucknow
Visit my SSRN author page:
http://ssrn.com/author=2665511
* Top 10% Downloaded Author on SSRN
Mob: +91 7525023664

This message has been sent from a mobile device. I may contact you again.

_________________

	[[alternative HTML version deleted]]


From lh@lbei@en @ending from gm@il@com  Mon Oct 22 21:36:10 2018
From: lh@lbei@en @ending from gm@il@com (Lukas Halbeisen)
Date: Mon, 22 Oct 2018 21:36:10 +0200
Subject: [R-SIG-Finance] ugarchfit - Weighted Ljung-Box Test and ARCH LM
 Test
In-Reply-To: <CAHRBD=a2653HY3J38Qe+LRSsLxGj=w8Dbaq3-YbJKLfLXUMe7w@mail.gmail.com>
References: <0d456c28-ed1f-1633-08a5-b44c44d7f5a7@gmail.com>
 <CAP8zaQDJT0m4s67yRy08fBgqi9N4G0aC_Cz5zc85GyPHnvMo6w@mail.gmail.com>
 <d2cf788f-5021-a405-27f9-9d60cd19af38@gmail.com>
 <CAHRBD=a2653HY3J38Qe+LRSsLxGj=w8Dbaq3-YbJKLfLXUMe7w@mail.gmail.com>
Message-ID: <92eee002-a272-18a1-49f1-7e90d35ef214@gmail.com>

Josh,

I read it at least twice and there is not a single sentence about which 
lags are optimal to test against Ljung-Box-Test or Li-Mak-Test. Or do I 
miss anything?

Am 22.10.2018 um 20:34 schrieb Josh Segal:
> Lukas,
>
> The rugarch vignette references this paper, have you read it?
> http://cecas.clemson.edu/~cgallag/publications/FishGal.pdf
>
> For more details you can follow references therein.
>
> Josh
>
> On Mon, Oct 22, 2018 at 2:29 PM Lukas Halbeisen <lhalbeisen at gmail.com 
> <mailto:lhalbeisen at gmail.com>> wrote:
>
>     Hi Amit,
>
>     thanks for your quick reply. :)
>
>     I invested today another 4 hours to find some adequate information,
>     which lags should be tested. As well, I checked "Applied Econometric
>     Time Series" from Enders to find some appropiate information to this
>     matter, but with no result.
>
>     Would you be so kind to give me some more details to the
>     references you
>     are talking about? Or can you tell me how the methodology is called,
>     that would be very helpful for me.
>
>     Thank you very much and best regards,
>     Lukas
>
>     Am 20.10.2018 um 21:38 schrieb Amit Mittal:
>     > Try and get hold of basic econometric texts like today and
>     enders (two
>     > separate authors) it is a well described methodology
>     >
>     > On Sun 21 Oct, 2018, 12:55 AM Lukas Halbeisen,
>     <lhalbeisen at gmail.com <mailto:lhalbeisen at gmail.com>
>     > <mailto:lhalbeisen at gmail.com <mailto:lhalbeisen at gmail.com>>> wrote:
>     >
>     >? ? ?Hi all,
>     >
>     >? ? ?I am currently working on my master thesis and have to
>     evaluate some
>     >? ? ?GARCH-Modells.
>     >
>     >? ? ?What I am wondering:
>     >
>     >? ? ?How are the lags picked up for the Weighted LB-Test as well
>     as for
>     >? ? ?the
>     >? ? ?ARCH LM Test.
>     >
>     >? ? ?For instance I have fitted a GARCH(3,3)-Modell:
>     >
>     >? ? ?Weighted Ljung-Box Test on Standardized Squared Residuals
>     >? ? ?------------------------------------
>     >? ? ?????????????????????????? statistic? p-value
>     >? ? ?Lag[1]?????????????????????? 9.052 0.002624
>     >? ? ?Lag[2*(p+q)+(p+q)-1][17]??? 14.593 0.070672
>     >? ? ?Lag[4*(p+q)+(p+q)-1][29]??? 20.134 0.129824
>     >? ? ?d.o.f=6
>     >
>     >
>     >? ? ?The lags are calculated by the formular 2*(p+q)+(p+q)-1. But
>     what
>     >? ? ?is the
>     >? ? ?reason? Is there any reference where this kind of
>     calculation has
>     >? ? ?been
>     >? ? ?described?
>     >
>     >
>     >? ? ?Weighted ARCH LM Tests
>     >
>     >? ? ?------------------------------------
>     >? ? ?????????????? Statistic Shape Scale P-Value
>     >? ? ?ARCH Lag[7]????? 1.375 0.500 2.000? 0.2409
>     >? ? ?ARCH Lag[9]????? 1.462 1.485 1.796? 0.6476
>     >? ? ?ARCH Lag[11]???? 2.596 2.440 1.677? 0.6695
>     >
>     >
>     >? ? ?Same for the ARCH-LM modell. I have 6 d.o.f. but why does
>     rugarch
>     >? ? ?consider the lags 7,9 and 11 as the most important ones?
>     >
>     >? ? ?Thank you and best regards,
>     >? ? ?Lukas
>     >
>     >? ? ?_______________________________________________
>     > R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org>
>     <mailto:R-SIG-Finance at r-project.org
>     <mailto:R-SIG-Finance at r-project.org>>
>     >? ? ?mailing list
>     > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>     >? ? ?-- Subscriber-posting only. If you want to post, subscribe
>     first.
>     >? ? ?-- Also note that this is not the r-help list where general R
>     >? ? ?questions should go.
>     >
>     > --
>     >
>     > ______________________________
>     >
>     > Amit Mittal
>     > Pursuing Ph.D. in Finance and Accounting
>     > Indian Institute of Management, Lucknow
>     > Visit my SSRN author page:
>     > http://ssrn.com/author=2665511
>     > * Top 10% Downloaded Author on SSRN
>     > Mob: +91 7525023664
>     >
>     > This message has been sent from a mobile device. I may contact
>     you again.
>     >
>     > _________________
>     >
>
>     ? ? ? ? [[alternative HTML version deleted]]
>
>     _______________________________________________
>     R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org>
>     mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>     -- Subscriber-posting only. If you want to post, subscribe first.
>     -- Also note that this is not the r-help list where general R
>     questions should go.
>

	[[alternative HTML version deleted]]


From m@rciobern@rdo1 @ending from gm@il@com  Thu Oct 25 07:00:39 2018
From: m@rciobern@rdo1 @ending from gm@il@com (=?utf-8?Q?M=C3=A1rcio_Rodrigues_Bernardo?=)
Date: Thu, 25 Oct 2018 02:00:39 -0300
Subject: [R-SIG-Finance] Portfolio with liabilities (LDI)
Message-ID: <CAD4F8AD-CBCA-4785-8C20-6848D3B72533@gmail.com>

Dear all,

I?m working on a paper that analyze the performance of alternatives investment in a liability driven framework (LDI). Basically adding alternatives investimentos to a pension fund portfolio.

My portfolio return is the return on assets minus liabilities. 

My question is: Does any know if there is an package that would allow me to add liabilities to a portfolio? Or do I need to restric the weight balance to the asset and ass in the liabilities with a negative sign?
I?m not sure how to include liabilites in the optmization.



Any help will be much appreciated,


M?rcio R. Bernardo


From yu@ichen0541 @ending from m@n@com  Fri Oct 26 17:03:32 2018
From: yu@ichen0541 @ending from m@n@com (xiaohui chen)
Date: Fri, 26 Oct 2018 15:03:32 +0000
Subject: [R-SIG-Finance] Welcome to the "R-SIG-Finance" mailing list
In-Reply-To: <mailman.14676.958.1540564481.1178.r-sig-finance@r-project.org>
References: <mailman.14676.958.1540564481.1178.r-sig-finance@r-project.org>
Message-ID: <AM5P18901MB0242438FABA49A85F07AE814D3F00@AM5P18901MB0242.EURP189.PROD.OUTLOOK.COM>

hi,


I am looking at using PortfolioAnalytics to optimize portfolio with constrained tracking error.


looking at below code I got some questions.


te.target <- function(R, weights, Rb, min.te = 0.02, max.te = 0.05, scale = 12){
  # calculate the portfolio return
  r <- Return.portfolio(R = R, weights = weights)
  # align the indexes
  Rb <- Rb[index(r)]
  te <- sd(r - Rb) * sqrt(scale)
  # penalize tracking error outside of [min.te, max.te] range
  out <- 0
  if(te > max.te)
    out <- (te - max.te) * 10000
  if(te < min.te)
    out <- (min.te - te) * 10000
  out
}

Do I need a series of stock returns as well as their corresponding weights for the time series in order to run this script? I have stock return series, but don't have stock weights history as I think the purpose was to find the weights for the optimization.


Would someone be able to advise where can I find the source data used from Ross's presentation? I am trying to replicate the code and see how the flow works.


https://github.com/rossb34/PortfolioAnalyticsPresentation2017/blob/master/optimization_script.R

[https://avatars1.githubusercontent.com/u/5797430?s=400&v=4]<https://github.com/rossb34/PortfolioAnalyticsPresentation2017/blob/master/optimization_script.R>

rossb34/PortfolioAnalyticsPresentation2017 - GitHub<https://github.com/rossb34/PortfolioAnalyticsPresentation2017/blob/master/optimization_script.R>
github.com
Presentation for R/Finance 2017. Contribute to rossb34/PortfolioAnalyticsPresentation2017 development by creating an account on GitHub.




many thanks

jojo



________________________________
From: R-SIG-Finance <r-sig-finance-bounces at r-project.org> on behalf of r-sig-finance-request at r-project.org <r-sig-finance-request at r-project.org>
Sent: 26 October 2018 15:34
To: yusichen0541 at msn.com
Subject: Welcome to the "R-SIG-Finance" mailing list

[[elided Hotmail spam]]

To post to this list, send your message to:

  r-sig-finance at r-project.org

General information about the mailing list is at:

  https://stat.ethz.ch/mailman/listinfo/r-sig-finance

If you ever want to unsubscribe or change your options (eg, switch to
or from digest mode, change your password, etc.), visit your
subscription page at:

  https://stat.ethz.ch/mailman/options/r-sig-finance/yusichen0541%40msn.com


You can also make such adjustments via email by sending a message to:

  R-SIG-Finance-request at r-project.org

with the word `help' in the subject or body (don't include the
quotes), and you will get back a message with instructions.

You must know your password to change your options (including changing
the password, itself) or to unsubscribe without confirmation.  It is:

  495530az

Normally, Mailman will remind you of your r-project.org mailing list
passwords once every month, although you can disable this if you
prefer.  This reminder will also include instructions on how to
unsubscribe or change your account options.  There is also a button on
your options page that will email your current password to you.

	[[alternative HTML version deleted]]


From b@kiun@l @ending from y@hoo@com  Mon Oct 29 13:50:58 2018
From: b@kiun@l @ending from y@hoo@com (Baki UNAL)
Date: Mon, 29 Oct 2018 12:50:58 +0000 (UTC)
Subject: [R-SIG-Finance] Problem when installing quantmod package
References: <1223862905.18877271.1540817458365.ref@mail.yahoo.com>
Message-ID: <1223862905.18877271.1540817458365@mail.yahoo.com>

Hello?
I tried to install "quantmod" package. But I got the following error:
> install.packages("quantmod")Warning in install.packages :? unable to access index for repository https://cran.rstudio.com/src/contrib:? cannot open URL 'https://cran.rstudio.com/src/contrib/PACKAGES'Installing package into ?C:/Users/win7120/Documents/R/win-library/3.2?(as ?lib? is unspecified)Warning in install.packages :? unable to access index for repository https://cran.rstudio.com/src/contrib:? cannot open URL 'https://cran.rstudio.com/src/contrib/PACKAGES'Warning in install.packages :? package ?quantmod? is not available (for R version 3.5.1)Warning in install.packages :? unable to access index for repository https://cran.rstudio.com/bin/windows/contrib/3.5:? cannot open URL 'https://cran.rstudio.com/bin/windows/contrib/3.5/PACKAGES'
What is the problem?
Best regards
Baki ?nal
	[[alternative HTML version deleted]]


From fr@nkm60606 @ending from gm@il@com  Mon Oct 29 14:43:27 2018
From: fr@nkm60606 @ending from gm@il@com (Frank)
Date: Mon, 29 Oct 2018 08:43:27 -0500
Subject: [R-SIG-Finance] Problem when installing quantmod package
In-Reply-To: <1223862905.18877271.1540817458365@mail.yahoo.com>
References: <1223862905.18877271.1540817458365.ref@mail.yahoo.com>
 <1223862905.18877271.1540817458365@mail.yahoo.com>
Message-ID: <004001d46f8d$5f9d1930$1ed74b90$@gmail.com>

I right click on the R executable and select "Run as administrator" to install new packages or update R.

Frank
Chicago

-----Original Message-----
From: R-SIG-Finance <r-sig-finance-bounces at r-project.org> On Behalf Of Baki UNAL via R-SIG-Finance
Sent: Monday, October 29, 2018 7:51 AM
To: R-sig-finance <r-sig-finance at r-project.org>
Subject: [R-SIG-Finance] Problem when installing quantmod package

Hello
I tried to install "quantmod" package. But I got the following error:
> install.packages("quantmod")Warning in install.packages :  unable to access index for repository https://cran.rstudio.com/src/contrib:  cannot open URL 'https://cran.rstudio.com/src/contrib/PACKAGES'Installing package into ?C:/Users/win7120/Documents/R/win-library/3.2?(as ?lib? is unspecified)Warning in install.packages :  unable to access index for repository https://cran.rstudio.com/src/contrib:  cannot open URL 'https://cran.rstudio.com/src/contrib/PACKAGES'Warning in install.packages :  package ?quantmod? is not available (for R version 3.5.1)Warning in install.packages :  unable to access index for repository https://cran.rstudio.com/bin/windows/contrib/3.5:  cannot open URL 'https://cran.rstudio.com/bin/windows/contrib/3.5/PACKAGES'
What is the problem?
Best regards
Baki ?nal
	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From @molgupt@87 @ending from gm@il@com  Mon Oct 29 15:12:50 2018
From: @molgupt@87 @ending from gm@il@com (amol gupta)
Date: Mon, 29 Oct 2018 19:42:50 +0530
Subject: [R-SIG-Finance] Problem when installing quantmod package
In-Reply-To: <004001d46f8d$5f9d1930$1ed74b90$@gmail.com>
References: <1223862905.18877271.1540817458365.ref@mail.yahoo.com>
 <1223862905.18877271.1540817458365@mail.yahoo.com>
 <004001d46f8d$5f9d1930$1ed74b90$@gmail.com>
Message-ID: <CAO7kh0GwmCiN-D04bmm3hpYVGD=XwmA9aHed+3K3VRcwmCGaYQ@mail.gmail.com>

This might help
try

options(repos = c(CRAN = "http://cran.rstudio.com"))



Source:
https://support.rstudio.com/hc/en-us/community/posts/205198138-packages-installation-problem

On Mon, Oct 29, 2018 at 7:13 PM Frank <frankm60606 at gmail.com> wrote:

> I right click on the R executable and select "Run as administrator" to
> install new packages or update R.
>
> Frank
> Chicago
>
> -----Original Message-----
> From: R-SIG-Finance <r-sig-finance-bounces at r-project.org> On Behalf Of
> Baki UNAL via R-SIG-Finance
> Sent: Monday, October 29, 2018 7:51 AM
> To: R-sig-finance <r-sig-finance at r-project.org>
> Subject: [R-SIG-Finance] Problem when installing quantmod package
>
> Hello
> I tried to install "quantmod" package. But I got the following error:
> > install.packages("quantmod")Warning in install.packages :  unable to
> access index for repository https://cran.rstudio.com/src/contrib:  cannot
> open URL 'https://cran.rstudio.com/src/contrib/PACKAGES'Installing
> package into ?C:/Users/win7120/Documents/R/win-library/3.2?(as ?lib? is
> unspecified)Warning in install.packages :  unable to access index for
> repository https://cran.rstudio.com/src/contrib:  cannot open URL '
> https://cran.rstudio.com/src/contrib/PACKAGES'Warning in install.packages
> :  package ?quantmod? is not available (for R version 3.5.1)Warning in
> install.packages :  unable to access index for repository
> https://cran.rstudio.com/bin/windows/contrib/3.5:  cannot open URL '
> https://cran.rstudio.com/bin/windows/contrib/3.5/PACKAGES'
> What is the problem?
> Best regards
> Baki ?nal
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


-- 
Regards
Amol
+91-9897860992

	[[alternative HTML version deleted]]


From vmidfin @ending from gm@il@com  Mon Oct 29 18:58:00 2018
From: vmidfin @ending from gm@il@com (V Kurien)
Date: Mon, 29 Oct 2018 10:58:00 -0700
Subject: [R-SIG-Finance] Problem when installing quantmod package
In-Reply-To: <CAO7kh0GwmCiN-D04bmm3hpYVGD=XwmA9aHed+3K3VRcwmCGaYQ@mail.gmail.com>
References: <1223862905.18877271.1540817458365.ref@mail.yahoo.com>
 <1223862905.18877271.1540817458365@mail.yahoo.com>
 <004001d46f8d$5f9d1930$1ed74b90$@gmail.com>
 <CAO7kh0GwmCiN-D04bmm3hpYVGD=XwmA9aHed+3K3VRcwmCGaYQ@mail.gmail.com>
Message-ID: <CANydVARGs4C1F-tegvebdYyPUX03A_VQ7Wyhvw2XGYLKoeq__g@mail.gmail.com>

Hmm.
(1) Are you still having the problem - I ask since I certainly reach
https://cran.rstudio.com/bin/windows/contrib/3.5/PACKAGES via wget (for
example).
(2) If you cannot reach https://cran.rstudio.com at all then it points to a
networking issue.

On Mon, Oct 29, 2018 at 7:13 AM amol gupta <amolgupta87 at gmail.com> wrote:

> This might help
> try
>
> options(repos = c(CRAN = "http://cran.rstudio.com"))
>
>
>
> Source:
>
> https://support.rstudio.com/hc/en-us/community/posts/205198138-packages-installation-problem
>
> On Mon, Oct 29, 2018 at 7:13 PM Frank <frankm60606 at gmail.com> wrote:
>
> > I right click on the R executable and select "Run as administrator" to
> > install new packages or update R.
> >
> > Frank
> > Chicago
> >
> > -----Original Message-----
> > From: R-SIG-Finance <r-sig-finance-bounces at r-project.org> On Behalf Of
> > Baki UNAL via R-SIG-Finance
> > Sent: Monday, October 29, 2018 7:51 AM
> > To: R-sig-finance <r-sig-finance at r-project.org>
> > Subject: [R-SIG-Finance] Problem when installing quantmod package
> >
> > Hello
> > I tried to install "quantmod" package. But I got the following error:
> > > install.packages("quantmod")Warning in install.packages :  unable to
> > access index for repository https://cran.rstudio.com/src/contrib:
> cannot
> > open URL 'https://cran.rstudio.com/src/contrib/PACKAGES'Installing
> > package into ?C:/Users/win7120/Documents/R/win-library/3.2?(as ?lib? is
> > unspecified)Warning in install.packages :  unable to access index for
> > repository https://cran.rstudio.com/src/contrib:  cannot open URL '
> > https://cran.rstudio.com/src/contrib/PACKAGES'Warning in
> install.packages
> > :  package ?quantmod? is not available (for R version 3.5.1)Warning in
> > install.packages :  unable to access index for repository
> > https://cran.rstudio.com/bin/windows/contrib/3.5:  cannot open URL '
> > https://cran.rstudio.com/bin/windows/contrib/3.5/PACKAGES'
> > What is the problem?
> > Best regards
> > Baki ?nal
> >         [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions
> > should go.
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions
> > should go.
> >
>
>
> --
> Regards
> Amol
> +91-9897860992
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From vmidfin @ending from gm@il@com  Tue Oct 30 16:54:15 2018
From: vmidfin @ending from gm@il@com (V Kurien)
Date: Tue, 30 Oct 2018 08:54:15 -0700
Subject: [R-SIG-Finance] XTS block plotting
Message-ID: <CANydVAR_4KfhR8ix3zdh8RsO5bQ-g2YUs+RMrBbAZ-j7e0+zPw@mail.gmail.com>

Hi,
This question is about XTS plot functions:
XTS used to support both blocks and event line plotting in xts.plot, but I
can no longer find functionality for plotting blocks in xts (though
addEventLines works for event lines). Is there a way to do this or do I
have to dump the data and use ggplot?
thanks
v

	[[alternative HTML version deleted]]


From ro@@bennett34 @ending from gm@il@com  Tue Oct 30 17:23:54 2018
From: ro@@bennett34 @ending from gm@il@com (Ross Bennett)
Date: Tue, 30 Oct 2018 11:23:54 -0500
Subject: [R-SIG-Finance] XTS block plotting
In-Reply-To: <CANydVAR_4KfhR8ix3zdh8RsO5bQ-g2YUs+RMrBbAZ-j7e0+zPw@mail.gmail.com>
References: <CANydVAR_4KfhR8ix3zdh8RsO5bQ-g2YUs+RMrBbAZ-j7e0+zPw@mail.gmail.com>
Message-ID: <CAEESW=VDbSHtR298WgxisAP7rSgv9Sgxzppm=Nj1zLorLsskuA@mail.gmail.com>

Yes, there is general functionality for plotting blocks. See
?xts::addPolygon.

Hope that helps,
Ross


On Tue, Oct 30, 2018 at 10:54 AM V Kurien <vmidfin at gmail.com> wrote:

> Hi,
> This question is about XTS plot functions:
> XTS used to support both blocks and event line plotting in xts.plot, but I
> can no longer find functionality for plotting blocks in xts (though
> addEventLines works for event lines). Is there a way to do this or do I
> have to dump the data and use ggplot?
> thanks
> v
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From vmidfin @ending from gm@il@com  Tue Oct 30 19:26:21 2018
From: vmidfin @ending from gm@il@com (V Kurien)
Date: Tue, 30 Oct 2018 11:26:21 -0700
Subject: [R-SIG-Finance] XTS block plotting
In-Reply-To: <CAEESW=VDbSHtR298WgxisAP7rSgv9Sgxzppm=Nj1zLorLsskuA@mail.gmail.com>
References: <CANydVAR_4KfhR8ix3zdh8RsO5bQ-g2YUs+RMrBbAZ-j7e0+zPw@mail.gmail.com>
 <CAEESW=VDbSHtR298WgxisAP7rSgv9Sgxzppm=Nj1zLorLsskuA@mail.gmail.com>
Message-ID: <CANydVASKvVEJY7WUzdv-cXG+=66igpQVr8AbmHVhOJ0MdN9n6Q@mail.gmail.com>

Thanks, took a look at addPolygon. Here is what it seems to be then -
obliged if you could confirm:

(1) Determine the upper and lower limits of the original time series over
the entire plotting period.
(2) Create a new time series with the same plotting period and the next two
columns being the y limits above.
(3) Call addPolygon - Looks like I select the time period of interest to
plot the polygon. BUT how do I add the second series on the same chart
panel behind the first? Is it some undocumented argument to on?

On Tue, Oct 30, 2018 at 9:24 AM Ross Bennett <rossbennett34 at gmail.com>
wrote:

> Yes, there is general functionality for plotting blocks. See
> ?xts::addPolygon.
>
> Hope that helps,
> Ross
>
>
> On Tue, Oct 30, 2018 at 10:54 AM V Kurien <vmidfin at gmail.com> wrote:
>
> > Hi,
> > This question is about XTS plot functions:
> > XTS used to support both blocks and event line plotting in xts.plot, but
> I
> > can no longer find functionality for plotting blocks in xts (though
> > addEventLines works for event lines). Is there a way to do this or do I
> > have to dump the data and use ggplot?
> > thanks
> > v
> >
> >         [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions
> > should go.
> >
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From riddell@red @ending from gm@il@com  Fri Nov  2 07:00:50 2018
From: riddell@red @ending from gm@il@com (Riddell Red)
Date: Fri, 2 Nov 2018 17:00:50 +1100
Subject: [R-SIG-Finance] Extending the variance equation in GARCH models in
 the rugarch package (Realized GARCH)
Message-ID: <003601d47271$6a194960$3e4bdc20$@gmail.com>

Dear all,

I am wondering if you are able to give me some direction. I am currently writing my thesis in Economics and Finance, and have been using the rugarch package for the GARCH modelling.

 

I am using the realized GARCH model, and comparing forecasts to a HAR model (that includes long memory of volatility). For a fair comparison, I want to extend the realized GARCH variance equation by including two parameters. These parameters are: the lagged 5 day average RV measure and the lagged 22 day average RV measure. This is the same as the HAR specification. The measurement equation remains the same, and thus the likelihood functions should be the same as far as I am aware.

 

The variance equation would be: log(?2t) =?+??1log(RVt?1) +??2log(RVt?2) +??log(?2t?1) + ??1log(5davgRVt-1) + ??2log(22davgRVt-1)

 

This is similar to a paper by Huang, Liu and Wang, named Modeling long memory volatility using realized measures of volatility: A realized HAR GARCH model. Huang is one of the authors of the original Realized GARCH model, so it lends credibility. I can send you the paper if you wish.

 

I am struggling to wrap my head around how to modify the realgarch R file.

 

Thank you for your time,

Regards,

Red.

 


	[[alternative HTML version deleted]]


From b@kiun@l @ending from y@hoo@com  Fri Nov 16 00:32:57 2018
From: b@kiun@l @ending from y@hoo@com (Baki UNAL)
Date: Thu, 15 Nov 2018 23:32:57 +0000 (UTC)
Subject: [R-SIG-Finance] Error plotting a zoo object
References: <919779915.1520264.1542324777256.ref@mail.yahoo.com>
Message-ID: <919779915.1520264.1542324777256@mail.yahoo.com>

Hello
My code is:

library(quantmod)library(tseriesChaos)library(nonlinearTseries)library(zoo)library(ggplot2)
bist100 <- getSymbols("XU100.IS", from="2011-01-01")
bist100 <- XU100.IS$XU100.IS.Close
bist100na <- na.approx(bist100)
bist100norm <- (bist100na - (min(bist100na)))/(max(bist100na) - min(bist100na))
my_rqa_det <- function(mydata) {? rqa.analysis=rqa(time.series = mydata, embedding.dim=11, time.lag=1,? ? ? ? ? ? ? ? ? ?radius=0.05,lmin=2,do.plot=FALSE,distanceToBorder=2)? mydet <- rqa.analysis$DET? return(mydet)}
rollbist100norm<- rollapply(bist100norm, 260, my_rqa_det, by.column = TRUE,?? ? ? ? ? ? ? ? ? ? ? ? ? ? align = "right")
rollbist100normna <- na.omit(rollbist100norm)
ggplot(rollbist100normna, aes(x = date, y = det)) + geom_line()


I tried to plot "rollbist100normna" in the last line but I got the following error:


Don't know how to automatically pick scale for object of type function. Defaulting to continuous.Don't know how to automatically pick scale for object of type function. Defaulting to continuous.Error: Columns `x`, `y` must be 1d atomic vectors or listsCall `rlang::last_error()` to see a backtrace


How can I fix this problem?
Best regards.
Baki




	[[alternative HTML version deleted]]


From jo@h@m@ulrich @ending from gm@il@com  Sat Nov 17 15:35:50 2018
From: jo@h@m@ulrich @ending from gm@il@com (Joshua Ulrich)
Date: Sat, 17 Nov 2018 08:35:50 -0600
Subject: [R-SIG-Finance] Error plotting a zoo object
In-Reply-To: <919779915.1520264.1542324777256@mail.yahoo.com>
References: <919779915.1520264.1542324777256.ref@mail.yahoo.com>
 <919779915.1520264.1542324777256@mail.yahoo.com>
Message-ID: <CAPPM_gS5Ku_3RSaFN71HVFUw8czZf1COESh4dUQgN8G7kQ0yqQ@mail.gmail.com>

Hi Baki,

Please follow the posting guide and use plain text.  Your HTML message was
mangled.

Here's a simple example that reproduces the behavior:
library(quantmod)
library(ggplot2)
bist100 <- getSymbols("XU100.IS", from="2011-01-01")
bist100 <- Cl(XU100.IS)
bist100na <- na.approx(bist100)
ggplot(bist100na, aes(x = date, y = XU100.IS.Close)) + geom_line()

You get an error because "date" is a function in 'base'.

You can either use 'autoplot()`:
autoplot(bist100na)

Or you can fortify the object yourself, but then you have to name the `x`
and `y` columns correctly.  By default, the xts/zoo index is put in a
column named "Index".  So the ggplot() call would look like:
ggplot(fortify(bist100na), aes(x = Index, y = XU100.IS.Close)) + geom_line()

It is also very easy to use xts or zoo plotting via the plot() function:
plot(bist100na)

Hope that helps.

Best,
Josh


On Thu, Nov 15, 2018 at 5:34 PM Baki UNAL via R-SIG-Finance <
r-sig-finance at r-project.org> wrote:

> Hello
> My code is:
>
>
> library(quantmod)library(tseriesChaos)library(nonlinearTseries)library(zoo)library(ggplot2)
> bist100 <- getSymbols("XU100.IS", from="2011-01-01")
> bist100 <- XU100.IS$XU100.IS.Close
> bist100na <- na.approx(bist100)
> bist100norm <- (bist100na - (min(bist100na)))/(max(bist100na) -
> min(bist100na))
> my_rqa_det <- function(mydata) {  rqa.analysis=rqa(time.series = mydata,
> embedding.dim=11, time.lag=1,
>  radius=0.05,lmin=2,do.plot=FALSE,distanceToBorder=2)  mydet <-
> rqa.analysis$DET  return(mydet)}
> rollbist100norm<- rollapply(bist100norm, 260, my_rqa_det, by.column =
> TRUE,                             align = "right")
> rollbist100normna <- na.omit(rollbist100norm)
> ggplot(rollbist100normna, aes(x = date, y = det)) + geom_line()
>
>
> I tried to plot "rollbist100normna" in the last line but I got the
> following error:
>
>
> Don't know how to automatically pick scale for object of type function.
> Defaulting to continuous.Don't know how to automatically pick scale for
> object of type function. Defaulting to continuous.Error: Columns `x`, `y`
> must be 1d atomic vectors or listsCall `rlang::last_error()` to see a
> backtrace
>
>
> How can I fix this problem?
> Best regards.
> Baki
>
>
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com
R/Finance 2018 | www.rinfinance.com

	[[alternative HTML version deleted]]


From @tephen @ending from org@nicfoodm@rket@@com@@u  Tue Nov 20 20:05:18 2018
From: @tephen @ending from org@nicfoodm@rket@@com@@u (Stephen Choularton)
Date: Wed, 21 Nov 2018 06:05:18 +1100
Subject: [R-SIG-Finance] timestamps IBrokers
Message-ID: <41e2dc0f-2c17-e923-f5cd-af59423ab492@organicfoodmarkets.com.au>

Hi

I'm trying to figure out the time stamps

I am in Sydney.

If I use:

tws = twsConnect()
contract <- twsContract(0,'GC', "FUT", 
'NYMEX','','20181227',"0.0","USD","","","",NULL,NULL,"0")
reqHistoricalData(tws, contract, duration = "3600 S", barSize="1 min", 
useRTH=0) #1 = mkt hours only, 0 = anytime
closeAllConnections()

I get? long list of which this is a part:

2018-11-20 19:29:00??? 1226.3??? 1226.4?? 1226.2 1226.2????????? 88? 
1226.24??????????? 0???????? 35
2018-11-20 19:30:00??? 1226.2??? 1226.4?? 1226.1 1226.2???????? 131? 
1226.25??????????? 0???????? 63
2018-11-20 19:31:00??? 1226.2??? 1226.3?? 1226.1 1226.1???????? 106? 
1226.23??????????? 0???????? 43
2018-11-20 19:32:00??? 1226.1??? 1226.2?? 1225.8 1225.9???????? 130? 
1225.96??????????? 0???????? 64
2018-11-20 19:33:00??? 1225.9??? 1226.0?? 1225.8 1225.9???????? 106? 
1225.94??????????? 0???????? 60

If I use reqMktData and then log the stream of data I get is a long list 
of which this is part:

2018-11-21 	05:31:54.728322 	1221.5
2018-11-21 	05:31:56.41735 	1221.5
2018-11-21 	05:31:57.712608 	1221.5
2018-11-21 	05:31:59.008863 	1221.5
2018-11-21 	05:32:00.279135 	1221.5
2018-11-21 	05:32:01.555404 	1221.5
2018-11-21 	05:32:03.279417 	1221.6
2018-11-21 	05:32:04.702601 	1221.6
2018-11-21 	05:32:05.589896 	1221.6

The closing price here is being picked out with:

Last_1_1 <- as.numeric(eWrapper$.Data$data[[1]][,5])

which I hope is the correct data item.

Of course I want to align the data.? The hours in the time stamp are 
different - reqMktData is time stamping with my local time (Sydney) but 
19:32 in not the time here or in NY where it is 13:32 if my arithmetic 
is correct.

Can anyone give me guidance on where that time stamp comes from?

Second the close from reqMktData just towards the end of 31 seconds 
(05:31:59.008863) shows a closing price of? 1221.5 but the closing price 
from reqHistoricalData at 31 second was 1226.2 and at 32 second was 
1225.9 both several dollars away from the reqMktData figure.

Can anyone give me guidance why these two figures are not much closer 
together.? Have I got the wrong data item (eWrapper$.Data$data[[1]][,5]) 
or have I misunderstood <20181121 06:00:56.150975> id=1 symbol=GC 
closePrice: 1225.30? as being the closing price data that is returned by 
reqMktData.

Thanks

Stephen Choularton PhD, FIoD


From mou@@@oui @ending from rom@ndie@com  Wed Nov 21 21:53:06 2018
From: mou@@@oui @ending from rom@ndie@com (Farid Moussaoui)
Date: Wed, 21 Nov 2018 21:53:06 +0100 (CET)
Subject: [R-SIG-Finance] timestamps IBrokers
Message-ID: <939704435.317354.1542833586661@romandiev5-http1.romandie.int>

Hi,
It seems that "reqHistoralData" time zone is GMT while reqMktData is local time.
F.


	[[alternative HTML version deleted]]


From john@d@writer @ending from gm@il@com  Mon Nov 26 15:56:14 2018
From: john@d@writer @ending from gm@il@com (John Writer)
Date: Mon, 26 Nov 2018 20:26:14 +0530
Subject: [R-SIG-Finance] How to access rugarch output object ?
Message-ID: <CAC-NtZZrz-sbppTBse=ukjKOKyGvF5XvGFq98To+tP=g+APG2w@mail.gmail.com>

Hi There,

I am trying to write a script which is essentially a "for loop" where I run
rugarch and then pick specific parameter values from it and feed them to
another vector/function. This needs to happen several times.

As of now, I can see that the ugarchfit (rugarch) output is broken into
section and I can access a specific section using the $ operator. But I
could not access the specfic parameter value. To be more specific, how do I
pick the alpha1 value from the ugarchfit output object via an R script ?

More generally, is this possible for other R packages (e.g. pick the VaR
value from PerformanceAnalytics package) ?

Please advise.

Thanks.

	[[alternative HTML version deleted]]


From ericjberger @ending from gm@il@com  Mon Nov 26 16:35:16 2018
From: ericjberger @ending from gm@il@com (Eric Berger)
Date: Mon, 26 Nov 2018 17:35:16 +0200
Subject: [R-SIG-Finance] How to access rugarch output object ?
In-Reply-To: <CAC-NtZZrz-sbppTBse=ukjKOKyGvF5XvGFq98To+tP=g+APG2w@mail.gmail.com>
References: <CAC-NtZZrz-sbppTBse=ukjKOKyGvF5XvGFq98To+tP=g+APG2w@mail.gmail.com>
Message-ID: <CAGgJW76KjPy2NxwpDxApvTq4uRhvxc5JQSM2LsuMQdv0PdJmbQ@mail.gmail.com>

Hi John,
Regarding your specific question about alpha1 it is possible.
In general it should be possible to get the values you want from other R
packages *if* those packages return it somewhere in the object (ok that's a
tautology).

I don't have huge experience with the rugarch package but I did the
following "poking around" and solved your issue. Here's the general
approach.

> foo <- somefunc()  # grab the output of the function you care about (e.g.
ugarchfit() )
> str(foo)  # dump information about the output (str = 'structure')
> summary(foo) # dump more information, if it exists

look for what you need and see if you can isolate it.

In the ugarchfit case there was a lot of output so I did the following
> sink("tmpfile")
> str(foo)
> summary(foo)
> sink()

to get the output into a text file. Then I searched for 'alpha1' in the
text file. I found it in the 'model' section of the summary output.
I then searched for 'model' and found it is a slot in the output structure
of ugarchfit. (which is an S4 object)

After a few attempts the following works. FYI I used the example in the
help page of the ugarchfit() function. (The first three lines, to set the
output to the variable 'fit' instead of 'foo').

> irow <- match("alpha1", rownames(fit at model$pars))
> alpha1 <- fit at model$pars[irow,1]

That's it.
HTH,
Eric



On Mon, Nov 26, 2018 at 4:57 PM John Writer <john.d.writer at gmail.com> wrote:

> Hi There,
>
> I am trying to write a script which is essentially a "for loop" where I run
> rugarch and then pick specific parameter values from it and feed them to
> another vector/function. This needs to happen several times.
>
> As of now, I can see that the ugarchfit (rugarch) output is broken into
> section and I can access a specific section using the $ operator. But I
> could not access the specfic parameter value. To be more specific, how do I
> pick the alpha1 value from the ugarchfit output object via an R script ?
>
> More generally, is this possible for other R packages (e.g. pick the VaR
> value from PerformanceAnalytics package) ?
>
> Please advise.
>
> Thanks.
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From john@d@writer @ending from gm@il@com  Tue Nov 27 02:06:50 2018
From: john@d@writer @ending from gm@il@com (John Writer)
Date: Tue, 27 Nov 2018 06:36:50 +0530
Subject: [R-SIG-Finance] How to access rugarch output object ?
In-Reply-To: <CAGgJW76KjPy2NxwpDxApvTq4uRhvxc5JQSM2LsuMQdv0PdJmbQ@mail.gmail.com>
References: <CAC-NtZZrz-sbppTBse=ukjKOKyGvF5XvGFq98To+tP=g+APG2w@mail.gmail.com>
 <CAGgJW76KjPy2NxwpDxApvTq4uRhvxc5JQSM2LsuMQdv0PdJmbQ@mail.gmail.com>
Message-ID: <CAC-NtZYvTfmRd5TXt8-R0ZtgU3fbVtD1hDEdqoFMxwfZdrzvqA@mail.gmail.com>

Hi Eric,

Thanks a lot for your time and effort. ?


On Mon, Nov 26, 2018 at 9:05 PM Eric Berger <ericjberger at gmail.com> wrote:

> Hi John,
> Regarding your specific question about alpha1 it is possible.
> In general it should be possible to get the values you want from other R
> packages *if* those packages return it somewhere in the object (ok that's a
> tautology).
>
> I don't have huge experience with the rugarch package but I did the
> following "poking around" and solved your issue. Here's the general
> approach.
>
> > foo <- somefunc()  # grab the output of the function you care about
> (e.g. ugarchfit() )
> > str(foo)  # dump information about the output (str = 'structure')
> > summary(foo) # dump more information, if it exists
>
> look for what you need and see if you can isolate it.
>
> In the ugarchfit case there was a lot of output so I did the following
> > sink("tmpfile")
> > str(foo)
> > summary(foo)
> > sink()
>
> to get the output into a text file. Then I searched for 'alpha1' in the
> text file. I found it in the 'model' section of the summary output.
> I then searched for 'model' and found it is a slot in the output structure
> of ugarchfit. (which is an S4 object)
>
> After a few attempts the following works. FYI I used the example in the
> help page of the ugarchfit() function. (The first three lines, to set the
> output to the variable 'fit' instead of 'foo').
>
> > irow <- match("alpha1", rownames(fit at model$pars))
> > alpha1 <- fit at model$pars[irow,1]
>
> That's it.
> HTH,
> Eric
>
>
>
> On Mon, Nov 26, 2018 at 4:57 PM John Writer <john.d.writer at gmail.com>
> wrote:
>
>> Hi There,
>>
>> I am trying to write a script which is essentially a "for loop" where I
>> run
>> rugarch and then pick specific parameter values from it and feed them to
>> another vector/function. This needs to happen several times.
>>
>> As of now, I can see that the ugarchfit (rugarch) output is broken into
>> section and I can access a specific section using the $ operator. But I
>> could not access the specfic parameter value. To be more specific, how do
>> I
>> pick the alpha1 value from the ugarchfit output object via an R script ?
>>
>> More generally, is this possible for other R packages (e.g. pick the VaR
>> value from PerformanceAnalytics package) ?
>>
>> Please advise.
>>
>> Thanks.
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>

	[[alternative HTML version deleted]]


From ily@@kipni@ @ending from gm@il@com  Thu Nov 29 04:22:40 2018
From: ily@@kipni@ @ending from gm@il@com (Ilya Kipnis)
Date: Wed, 28 Nov 2018 22:22:40 -0500
Subject: [R-SIG-Finance] Just finished Kris Boudt's course,
 running into errors from non-convergence in rugarch
Message-ID: <CA+oJuEEnn7qbVLBCvvw9hmucyzVgJ_81YMbu0Fhwijs-rrv+6g@mail.gmail.com>

I just completed Kris Boudt's datacamp course on GARCH models, and thought
I'd give it a spin in a more reasonable setting. I've run into an error
that the course didn't cover. I'm using a rolling window of 504 trading
days to try to fit a GJR-GARCH with AR1 return innovations and a skewed
student t distribution and refitting the model every 22 days (so, basically
every month) on SPY returns.

In the course, it was possible to convert this output into a data frame,
with an as.data.frame command.

Unfortunately, the course didn't cover what happened when over the course
of ~300 model fits, there would be the occasional failure to converge,
which throws the following error:

[image: image.png]

Here's my MRE:

require(rugarch)
require(quantmod)

# get SPY data from Yahoo (also tried with Quandl, data isn't the issue)
getSymbols("SPY", from = '1990-01-01')

spyRets <- Return.calculate(Ad(SPY))

# GJR garch with AR1 innovations under a skewed student T distribution for
returns
gjrSpec <- ugarchspec(mean.model = list(armaOrder = c(1,0)),
                      variance.model = list(model = "gjrGARCH"),
                      distribution.model = "sstd")

# Use rolling window of 504 days, refitting the model every 22 trading days
t1 <- Sys.time()
garchroll <- ugarchroll(gjrSpec, data = spyRets,
                        n.start = 504, refit.window = "moving",
refit.every = 22)
t2 <- Sys.time()
print(t2-t1)

# try to convert predictions to data frame, as in course -- error thrown
regarding non-converged estimation windows
garchroll <- as.data.frame(garchroll)

With a screenshot for better readability:

[image: image.png]
I also tried the resume command from the following post
https://stat.ethz.ch/pipermail/r-sig-finance/2013q2/011720.html, which did
not solve my problem.

I feel that this is a pretty straightforward application of the rugarch
package, and that there is most likely a solution that simply wasn't
covered in the course. I'd be greatly appreciative if someone could help me
over this hill (albeit at the risk of revealing that I'm not exactly an
expert on GARCH models).

Thank you so much.

Sincerely,

Ilya Kipnis (author of Quantstrat TradeR)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20181128/e647fe88/attachment.html>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 6511 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20181128/e647fe88/attachment.png>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 49282 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20181128/e647fe88/attachment-0001.png>

From @lexio@ @ending from 4d@c@pe@com  Thu Nov 29 04:27:47 2018
From: @lexio@ @ending from 4d@c@pe@com (alexios galanos)
Date: Wed, 28 Nov 2018 19:27:47 -0800
Subject: [R-SIG-Finance] Just finished Kris Boudt's course,
 running into errors from non-convergence in rugarch
In-Reply-To: <CA+oJuEEnn7qbVLBCvvw9hmucyzVgJ_81YMbu0Fhwijs-rrv+6g@mail.gmail.com>
References: <CA+oJuEEnn7qbVLBCvvw9hmucyzVgJ_81YMbu0Fhwijs-rrv+6g@mail.gmail.com>
Message-ID: <def2cf5a-2444-0c4a-32af-e9e890d1ae91@4dscape.com>

Try setting the solver in the resume command to "gosolnp".
It may also have helped to set fit.control(scale=1) in the ugarchroll, 
but you can set this in resume as well.

Alexios

On 11/28/18 7:22 PM, Ilya Kipnis wrote:
> I just completed Kris Boudt's datacamp course on GARCH models, and 
> thought I'd give it a spin in a more reasonable setting. I've run into 
> an error that the course didn't cover. I'm using a rolling window of 504 
> trading days to try to fit a GJR-GARCH with AR1 return innovations and a 
> skewed student t distribution and refitting the model every 22 days (so, 
> basically every month) on SPY returns.
> 
> In the course, it was possible to convert this output into a data frame, 
> with an as.data.frame command.
> 
> Unfortunately, the course didn't cover what happened when over the 
> course of ~300 model fits, there would be the occasional failure to 
> converge, which throws the following error:
> 
> image.png
> 
> Here's my MRE:
> 
> require(rugarch)
> require(quantmod)
> 
> # get SPY data from Yahoo (also tried with Quandl, data isn't the issue)
> getSymbols("SPY", from = '1990-01-01')
> 
> spyRets <- Return.calculate(Ad(SPY))
> 
> # GJR garch with AR1 innovations under a skewed student T distribution 
> for returns
> gjrSpec <- ugarchspec(mean.model = list(armaOrder = c(1,0)),
>  ? ? ? ? ? ? ? ? ? ? ? variance.model = list(model = "gjrGARCH"),
>  ? ? ? ? ? ? ? ? ? ? ? distribution.model = "sstd")
> 
> # Use rolling window of 504 days, refitting the model every 22 trading days
> t1 <- Sys.time()
> garchroll <- ugarchroll(gjrSpec, data = spyRets,
>  ? ? ? ? ? ? ? ? ? ? ? ? n.start = 504, refit.window = "moving",  
> refit.every = 22)
> t2 <- Sys.time()
> print(t2-t1)
> 
> # try to convert predictions to data frame, as in course -- error thrown 
> regarding non-converged estimation windows
> garchroll <- as.data.frame(garchroll)
> 
> With a screenshot for better readability:
> 
> image.png
> I also tried the resume command from the following post 
> https://stat.ethz.ch/pipermail/r-sig-finance/2013q2/011720.html, which 
> did not solve my problem.
> 
> I feel that this is a pretty straightforward application of the rugarch 
> package, and that there is most likely a solution that simply wasn't 
> covered in the course. I'd be greatly appreciative if someone could help 
> me over this hill (albeit at the risk of revealing that I'm not exactly 
> an expert on GARCH models).
> 
> Thank you so much.
> 
> Sincerely,
> 
> Ilya Kipnis (author of Quantstrat TradeR)
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From ily@@kipni@ @ending from gm@il@com  Thu Nov 29 04:39:59 2018
From: ily@@kipni@ @ending from gm@il@com (Ilya Kipnis)
Date: Wed, 28 Nov 2018 22:39:59 -0500
Subject: [R-SIG-Finance] Just finished Kris Boudt's course,
 running into errors from non-convergence in rugarch
In-Reply-To: <def2cf5a-2444-0c4a-32af-e9e890d1ae91@4dscape.com>
References: <CA+oJuEEnn7qbVLBCvvw9hmucyzVgJ_81YMbu0Fhwijs-rrv+6g@mail.gmail.com>
 <def2cf5a-2444-0c4a-32af-e9e890d1ae91@4dscape.com>
Message-ID: <CA+oJuEEoX0EAPwLDLn=5vvVoWvNS7v94CmJ8GKe630vTBthyVA@mail.gmail.com>

[image: image.png]

Unfortunately, the gosolnp method does not work.

Tried implementing fit.control as best I understood it.

[image: image.png]

Also does not work.

On Wed, Nov 28, 2018 at 10:33 PM alexios galanos <alexios at 4dscape.com>
wrote:

> Try setting the solver in the resume command to "gosolnp".
> It may also have helped to set fit.control(scale=1) in the ugarchroll,
> but you can set this in resume as well.
>
> Alexios
>
> On 11/28/18 7:22 PM, Ilya Kipnis wrote:
> > I just completed Kris Boudt's datacamp course on GARCH models, and
> > thought I'd give it a spin in a more reasonable setting. I've run into
> > an error that the course didn't cover. I'm using a rolling window of 504
> > trading days to try to fit a GJR-GARCH with AR1 return innovations and a
> > skewed student t distribution and refitting the model every 22 days (so,
> > basically every month) on SPY returns.
> >
> > In the course, it was possible to convert this output into a data frame,
> > with an as.data.frame command.
> >
> > Unfortunately, the course didn't cover what happened when over the
> > course of ~300 model fits, there would be the occasional failure to
> > converge, which throws the following error:
> >
> > image.png
> >
> > Here's my MRE:
> >
> > require(rugarch)
> > require(quantmod)
> >
> > # get SPY data from Yahoo (also tried with Quandl, data isn't the issue)
> > getSymbols("SPY", from = '1990-01-01')
> >
> > spyRets <- Return.calculate(Ad(SPY))
> >
> > # GJR garch with AR1 innovations under a skewed student T distribution
> > for returns
> > gjrSpec <- ugarchspec(mean.model = list(armaOrder = c(1,0)),
> >                        variance.model = list(model = "gjrGARCH"),
> >                        distribution.model = "sstd")
> >
> > # Use rolling window of 504 days, refitting the model every 22 trading
> days
> > t1 <- Sys.time()
> > garchroll <- ugarchroll(gjrSpec, data = spyRets,
> >                          n.start = 504, refit.window = "moving",
> > refit.every = 22)
> > t2 <- Sys.time()
> > print(t2-t1)
> >
> > # try to convert predictions to data frame, as in course -- error thrown
> > regarding non-converged estimation windows
> > garchroll <- as.data.frame(garchroll)
> >
> > With a screenshot for better readability:
> >
> > image.png
> > I also tried the resume command from the following post
> > https://stat.ethz.ch/pipermail/r-sig-finance/2013q2/011720.html, which
> > did not solve my problem.
> >
> > I feel that this is a pretty straightforward application of the rugarch
> > package, and that there is most likely a solution that simply wasn't
> > covered in the course. I'd be greatly appreciative if someone could help
> > me over this hill (albeit at the risk of revealing that I'm not exactly
> > an expert on GARCH models).
> >
> > Thank you so much.
> >
> > Sincerely,
> >
> > Ilya Kipnis (author of Quantstrat TradeR)
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions
> should go.
> >
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20181128/ff26fab5/attachment.html>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 27701 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20181128/ff26fab5/attachment.png>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 29132 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20181128/ff26fab5/attachment-0001.png>

From @lexio@ @ending from 4d@c@pe@com  Thu Nov 29 04:57:25 2018
From: @lexio@ @ending from 4d@c@pe@com (alexios galanos)
Date: Wed, 28 Nov 2018 19:57:25 -0800
Subject: [R-SIG-Finance] Just finished Kris Boudt's course,
 running into errors from non-convergence in rugarch
In-Reply-To: <CA+oJuEEoX0EAPwLDLn=5vvVoWvNS7v94CmJ8GKe630vTBthyVA@mail.gmail.com>
References: <CA+oJuEEnn7qbVLBCvvw9hmucyzVgJ_81YMbu0Fhwijs-rrv+6g@mail.gmail.com>
 <def2cf5a-2444-0c4a-32af-e9e890d1ae91@4dscape.com>
 <CA+oJuEEoX0EAPwLDLn=5vvVoWvNS7v94CmJ8GKe630vTBthyVA@mail.gmail.com>
Message-ID: <09e5aa01-00d3-a6d8-9b46-f86ba451f037@4dscape.com>

That's piqued my interest...here is my suggestion (which I have 
successfully tested) for a quick solution:

1. Use variance targeting:

gjrSpec <- ugarchspec(mean.model = list(armaOrder = 
c(1,0)),variance.model = list(model = "gjrGARCH", 
variance.targeting=TRUE),distribution.model = "sstd")

2. remove the NA leftover from the return calculation:
na.omit(spyRets)


Alexios


On 11/28/18 7:39 PM, Ilya Kipnis wrote:
> image.png
> 
> Unfortunately, the gosolnp method does not work.
> 
> Tried implementing fit.control as best I understood it.
> 
> image.png
> 
> Also does not work.
> 
> On Wed, Nov 28, 2018 at 10:33 PM alexios galanos <alexios at 4dscape.com 
> <mailto:alexios at 4dscape.com>> wrote:
> 
>     Try setting the solver in the resume command to "gosolnp".
>     It may also have helped to set fit.control(scale=1) in the ugarchroll,
>     but you can set this in resume as well.
> 
>     Alexios
> 
>     On 11/28/18 7:22 PM, Ilya Kipnis wrote:
>      > I just completed Kris Boudt's datacamp course on GARCH models, and
>      > thought I'd give it a spin in a more reasonable setting. I've run
>     into
>      > an error that the course didn't cover. I'm using a rolling window
>     of 504
>      > trading days to try to fit a GJR-GARCH with AR1 return
>     innovations and a
>      > skewed student t distribution and refitting the model every 22
>     days (so,
>      > basically every month) on SPY returns.
>      >
>      > In the course, it was possible to convert this output into a data
>     frame,
>      > with an as.data.frame command.
>      >
>      > Unfortunately, the course didn't cover what happened when over the
>      > course of ~300 model fits, there would be the occasional failure to
>      > converge, which throws the following error:
>      >
>      > image.png
>      >
>      > Here's my MRE:
>      >
>      > require(rugarch)
>      > require(quantmod)
>      >
>      > # get SPY data from Yahoo (also tried with Quandl, data isn't the
>     issue)
>      > getSymbols("SPY", from = '1990-01-01')
>      >
>      > spyRets <- Return.calculate(Ad(SPY))
>      >
>      > # GJR garch with AR1 innovations under a skewed student T
>     distribution
>      > for returns
>      > gjrSpec <- ugarchspec(mean.model = list(armaOrder = c(1,0)),
>      >? ? ? ? ? ? ? ? ? ? ? ? variance.model = list(model = "gjrGARCH"),
>      >? ? ? ? ? ? ? ? ? ? ? ? distribution.model = "sstd")
>      >
>      > # Use rolling window of 504 days, refitting the model every 22
>     trading days
>      > t1 <- Sys.time()
>      > garchroll <- ugarchroll(gjrSpec, data = spyRets,
>      >? ? ? ? ? ? ? ? ? ? ? ? ? n.start = 504, refit.window = "moving",
>      > refit.every = 22)
>      > t2 <- Sys.time()
>      > print(t2-t1)
>      >
>      > # try to convert predictions to data frame, as in course -- error
>     thrown
>      > regarding non-converged estimation windows
>      > garchroll <- as.data.frame(garchroll)
>      >
>      > With a screenshot for better readability:
>      >
>      > image.png
>      > I also tried the resume command from the following post
>      > https://stat.ethz.ch/pipermail/r-sig-finance/2013q2/011720.html,
>     which
>      > did not solve my problem.
>      >
>      > I feel that this is a pretty straightforward application of the
>     rugarch
>      > package, and that there is most likely a solution that simply wasn't
>      > covered in the course. I'd be greatly appreciative if someone
>     could help
>      > me over this hill (albeit at the risk of revealing that I'm not
>     exactly
>      > an expert on GARCH models).
>      >
>      > Thank you so much.
>      >
>      > Sincerely,
>      >
>      > Ilya Kipnis (author of Quantstrat TradeR)
>      >
>      > _______________________________________________
>      > R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org>
>     mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>      > -- Subscriber-posting only. If you want to post, subscribe first.
>      > -- Also note that this is not the r-help list where general R
>     questions should go.
>      >
> 
>     _______________________________________________
>     R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org>
>     mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>     -- Subscriber-posting only. If you want to post, subscribe first.
>     -- Also note that this is not the r-help list where general R
>     questions should go.
>


From ily@@kipni@ @ending from gm@il@com  Thu Nov 29 05:11:32 2018
From: ily@@kipni@ @ending from gm@il@com (Ilya Kipnis)
Date: Wed, 28 Nov 2018 23:11:32 -0500
Subject: [R-SIG-Finance] Just finished Kris Boudt's course,
 running into errors from non-convergence in rugarch
In-Reply-To: <09e5aa01-00d3-a6d8-9b46-f86ba451f037@4dscape.com>
References: <CA+oJuEEnn7qbVLBCvvw9hmucyzVgJ_81YMbu0Fhwijs-rrv+6g@mail.gmail.com>
 <def2cf5a-2444-0c4a-32af-e9e890d1ae91@4dscape.com>
 <CA+oJuEEoX0EAPwLDLn=5vvVoWvNS7v94CmJ8GKe630vTBthyVA@mail.gmail.com>
 <09e5aa01-00d3-a6d8-9b46-f86ba451f037@4dscape.com>
Message-ID: <CA+oJuEGw+1y6GCNZ1MTvLFftxhpkqyHYA1voVAVsHD6Me6d0yQ@mail.gmail.com>

The variance.targeting does work, but it does impose an assumption on the
nature of the variance of the S&P 500 returns, that the variance is
naturally mean-reverting, and I'm not sure that's the case. While the VIX
certainly does tend to mean-revert more often than not, the times it
*doesn't* are the times that all of the volatility mean-reverting guys just
get absolutely blown up, whether it's 2008, when vol went up and up, or Feb
4-Feb 5 of 2018, when anyone that thought Feb 5 was a nice time to revert
the Feb 4 spike got blown up in 20 minutes after hours.

Will go with this solution for now in terms of trying to see if there's a
new VIX trading strategy, but I'm hoping I can relax the assumption in the
near future.

Thanks again.

On Wed, Nov 28, 2018 at 10:57 PM alexios galanos <alexios at 4dscape.com>
wrote:

> That's piqued my interest...here is my suggestion (which I have
> successfully tested) for a quick solution:
>
> 1. Use variance targeting:
>
> gjrSpec <- ugarchspec(mean.model = list(armaOrder =
> c(1,0)),variance.model = list(model = "gjrGARCH",
> variance.targeting=TRUE),distribution.model = "sstd")
>
> 2. remove the NA leftover from the return calculation:
> na.omit(spyRets)
>
>
> Alexios
>
>
> On 11/28/18 7:39 PM, Ilya Kipnis wrote:
> > image.png
> >
> > Unfortunately, the gosolnp method does not work.
> >
> > Tried implementing fit.control as best I understood it.
> >
> > image.png
> >
> > Also does not work.
> >
> > On Wed, Nov 28, 2018 at 10:33 PM alexios galanos <alexios at 4dscape.com
> > <mailto:alexios at 4dscape.com>> wrote:
> >
> >     Try setting the solver in the resume command to "gosolnp".
> >     It may also have helped to set fit.control(scale=1) in the
> ugarchroll,
> >     but you can set this in resume as well.
> >
> >     Alexios
> >
> >     On 11/28/18 7:22 PM, Ilya Kipnis wrote:
> >      > I just completed Kris Boudt's datacamp course on GARCH models, and
> >      > thought I'd give it a spin in a more reasonable setting. I've run
> >     into
> >      > an error that the course didn't cover. I'm using a rolling window
> >     of 504
> >      > trading days to try to fit a GJR-GARCH with AR1 return
> >     innovations and a
> >      > skewed student t distribution and refitting the model every 22
> >     days (so,
> >      > basically every month) on SPY returns.
> >      >
> >      > In the course, it was possible to convert this output into a data
> >     frame,
> >      > with an as.data.frame command.
> >      >
> >      > Unfortunately, the course didn't cover what happened when over the
> >      > course of ~300 model fits, there would be the occasional failure
> to
> >      > converge, which throws the following error:
> >      >
> >      > image.png
> >      >
> >      > Here's my MRE:
> >      >
> >      > require(rugarch)
> >      > require(quantmod)
> >      >
> >      > # get SPY data from Yahoo (also tried with Quandl, data isn't the
> >     issue)
> >      > getSymbols("SPY", from = '1990-01-01')
> >      >
> >      > spyRets <- Return.calculate(Ad(SPY))
> >      >
> >      > # GJR garch with AR1 innovations under a skewed student T
> >     distribution
> >      > for returns
> >      > gjrSpec <- ugarchspec(mean.model = list(armaOrder = c(1,0)),
> >      >                        variance.model = list(model = "gjrGARCH"),
> >      >                        distribution.model = "sstd")
> >      >
> >      > # Use rolling window of 504 days, refitting the model every 22
> >     trading days
> >      > t1 <- Sys.time()
> >      > garchroll <- ugarchroll(gjrSpec, data = spyRets,
> >      >                          n.start = 504, refit.window = "moving",
> >      > refit.every = 22)
> >      > t2 <- Sys.time()
> >      > print(t2-t1)
> >      >
> >      > # try to convert predictions to data frame, as in course -- error
> >     thrown
> >      > regarding non-converged estimation windows
> >      > garchroll <- as.data.frame(garchroll)
> >      >
> >      > With a screenshot for better readability:
> >      >
> >      > image.png
> >      > I also tried the resume command from the following post
> >      > https://stat.ethz.ch/pipermail/r-sig-finance/2013q2/011720.html,
> >     which
> >      > did not solve my problem.
> >      >
> >      > I feel that this is a pretty straightforward application of the
> >     rugarch
> >      > package, and that there is most likely a solution that simply
> wasn't
> >      > covered in the course. I'd be greatly appreciative if someone
> >     could help
> >      > me over this hill (albeit at the risk of revealing that I'm not
> >     exactly
> >      > an expert on GARCH models).
> >      >
> >      > Thank you so much.
> >      >
> >      > Sincerely,
> >      >
> >      > Ilya Kipnis (author of Quantstrat TradeR)
> >      >
> >      > _______________________________________________
> >      > R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org>
> >     mailing list
> >      > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >      > -- Subscriber-posting only. If you want to post, subscribe first.
> >      > -- Also note that this is not the r-help list where general R
> >     questions should go.
> >      >
> >
> >     _______________________________________________
> >     R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org>
> >     mailing list
> >     https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >     -- Subscriber-posting only. If you want to post, subscribe first.
> >     -- Also note that this is not the r-help list where general R
> >     questions should go.
> >
>

	[[alternative HTML version deleted]]


From prof@@mit@mitt@l m@ili@g off gm@il@com  Thu Nov 29 05:21:15 2018
From: prof@@mit@mitt@l m@ili@g off gm@il@com (prof@@mit@mitt@l m@ili@g off gm@il@com)
Date: Thu, 29 Nov 2018 09:51:15 +0530
Subject: [R-SIG-Finance] Just finished Kris Boudt's course,
 running into errors from non-convergence in rugarch
In-Reply-To: <CA+oJuEEnn7qbVLBCvvw9hmucyzVgJ_81YMbu0Fhwijs-rrv+6g@mail.gmail.com>
References: <CA+oJuEEnn7qbVLBCvvw9hmucyzVgJ_81YMbu0Fhwijs-rrv+6g@mail.gmail.com>
Message-ID: <01d301d4879a$fab6e2f0$f024a8d0$@gmail.com>

End to end examples to extract data objects from results and resolve errors in eric zivot?s presentations on DCC correlations at https://faculty.washington.edu/ezivot/econ589/DCCgarchPowerpoint.pdf

 

Rmgarch is just rugarch for more than one series at the same time making it richer in functionality. Also make sure input data does not have NAs using na.omit. Also instead of as.data.frame try  converting into xts objects as well. Easier with some rugarch extensions. (These two last methods take care of all errors in between) 

 

There is a corresponding one on copulas later also by zivot for his uw advanced econ class

 

Best regards

Amit

 

 

 

From: R-SIG-Finance <r-sig-finance-bounces at r-project.org> On Behalf Of Ilya Kipnis
Sent: Thursday, November 29, 2018 8:53 AM
To: r-sig-finance at r-project.org
Subject: [R-SIG-Finance] Just finished Kris Boudt's course, running into errors from non-convergence in rugarch

 

I just completed Kris Boudt's datacamp course on GARCH models, and thought I'd give it a spin in a more reasonable setting. I've run into an error that the course didn't cover. I'm using a rolling window of 504 trading days to try to fit a GJR-GARCH with AR1 return innovations and a skewed student t distribution and refitting the model every 22 days (so, basically every month) on SPY returns.  

In the course, it was possible to convert this output into a data frame, with an as.data.frame command.

Unfortunately, the course didn't cover what happened when over the course of ~300 model fits, there would be the occasional failure to converge, which throws the following error:

 




Here's my MRE:

require(rugarch)

require(quantmod)

 

# get SPY data from Yahoo (also tried with Quandl, data isn't the issue)

getSymbols("SPY", from = '1990-01-01')

 

spyRets <- Return.calculate(Ad(SPY))

 

# GJR garch with AR1 innovations under a skewed student T distribution for returns

gjrSpec <- ugarchspec(mean.model = list(armaOrder = c(1,0)),

                      variance.model = list(model = "gjrGARCH"),

                      distribution.model = "sstd")

 

# Use rolling window of 504 days, refitting the model every 22 trading days

t1 <- Sys.time()

garchroll <- ugarchroll(gjrSpec, data = spyRets, 

                        n.start = 504, refit.window = "moving",  refit.every = 22)

t2 <- Sys.time()

print(t2-t1)

 

# try to convert predictions to data frame, as in course -- error thrown regarding non-converged estimation windows

garchroll <- as.data.frame(garchroll)

 

With a screenshot for better readability:


I also tried the resume command from the following post https://stat.ethz.ch/pipermail/r-sig-finance/2013q2/011720.html, which did not solve my problem.  

I feel that this is a pretty straightforward application of the rugarch package, and that there is most likely a solution that simply wasn't covered in the course. I'd be greatly appreciative if someone could help me over this hill (albeit at the risk of revealing that I'm not exactly an expert on GARCH models).  

Thank you so much.

 

Sincerely,

Ilya Kipnis (author of Quantstrat TradeR)


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20181129/8765e989/attachment.html>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 6511 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20181129/8765e989/attachment.png>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 71728 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20181129/8765e989/attachment-0001.png>

From prof@@mit@mitt@l m@ili@g off gm@il@com  Thu Nov 29 05:23:23 2018
From: prof@@mit@mitt@l m@ili@g off gm@il@com (prof@@mit@mitt@l m@ili@g off gm@il@com)
Date: Thu, 29 Nov 2018 09:53:23 +0530
Subject: [R-SIG-Finance] Just finished Kris Boudt's course,
 running into errors from non-convergence in rugarch
In-Reply-To: <CA+oJuEGw+1y6GCNZ1MTvLFftxhpkqyHYA1voVAVsHD6Me6d0yQ@mail.gmail.com>
References: <CA+oJuEEnn7qbVLBCvvw9hmucyzVgJ_81YMbu0Fhwijs-rrv+6g@mail.gmail.com>
 <def2cf5a-2444-0c4a-32af-e9e890d1ae91@4dscape.com>
 <CA+oJuEEoX0EAPwLDLn=5vvVoWvNS7v94CmJ8GKe630vTBthyVA@mail.gmail.com>
 <09e5aa01-00d3-a6d8-9b46-f86ba451f037@4dscape.com>
 <CA+oJuEGw+1y6GCNZ1MTvLFftxhpkqyHYA1voVAVsHD6Me6d0yQ@mail.gmail.com>
Message-ID: <01d901d4879b$4607bd60$d2173820$@gmail.com>

Check the rugarch vignettes, it covers each included models with detailed
sub options
Best regards
Amit

-----Original Message-----
From: R-SIG-Finance <r-sig-finance-bounces at r-project.org> On Behalf Of Ilya
Kipnis
Sent: Thursday, November 29, 2018 9:42 AM
To: Alexios G <alexios at 4dscape.com>
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Just finished Kris Boudt's course, running into
errors from non-convergence in rugarch

The variance.targeting does work, but it does impose an assumption on the
nature of the variance of the S&P 500 returns, that the variance is
naturally mean-reverting, and I'm not sure that's the case. While the VIX
certainly does tend to mean-revert more often than not, the times it
*doesn't* are the times that all of the volatility mean-reverting guys just
get absolutely blown up, whether it's 2008, when vol went up and up, or Feb
4-Feb 5 of 2018, when anyone that thought Feb 5 was a nice time to revert
the Feb 4 spike got blown up in 20 minutes after hours.

Will go with this solution for now in terms of trying to see if there's a
new VIX trading strategy, but I'm hoping I can relax the assumption in the
near future.

Thanks again.

On Wed, Nov 28, 2018 at 10:57 PM alexios galanos <alexios at 4dscape.com>
wrote:

> That's piqued my interest...here is my suggestion (which I have 
> successfully tested) for a quick solution:
>
> 1. Use variance targeting:
>
> gjrSpec <- ugarchspec(mean.model = list(armaOrder = 
> c(1,0)),variance.model = list(model = "gjrGARCH", 
> variance.targeting=TRUE),distribution.model = "sstd")
>
> 2. remove the NA leftover from the return calculation:
> na.omit(spyRets)
>
>
> Alexios
>
>
> On 11/28/18 7:39 PM, Ilya Kipnis wrote:
> > image.png
> >
> > Unfortunately, the gosolnp method does not work.
> >
> > Tried implementing fit.control as best I understood it.
> >
> > image.png
> >
> > Also does not work.
> >
> > On Wed, Nov 28, 2018 at 10:33 PM alexios galanos 
> > <alexios at 4dscape.com <mailto:alexios at 4dscape.com>> wrote:
> >
> >     Try setting the solver in the resume command to "gosolnp".
> >     It may also have helped to set fit.control(scale=1) in the
> ugarchroll,
> >     but you can set this in resume as well.
> >
> >     Alexios
> >
> >     On 11/28/18 7:22 PM, Ilya Kipnis wrote:
> >      > I just completed Kris Boudt's datacamp course on GARCH models,
and
> >      > thought I'd give it a spin in a more reasonable setting. I've run
> >     into
> >      > an error that the course didn't cover. I'm using a rolling window
> >     of 504
> >      > trading days to try to fit a GJR-GARCH with AR1 return
> >     innovations and a
> >      > skewed student t distribution and refitting the model every 22
> >     days (so,
> >      > basically every month) on SPY returns.
> >      >
> >      > In the course, it was possible to convert this output into a data
> >     frame,
> >      > with an as.data.frame command.
> >      >
> >      > Unfortunately, the course didn't cover what happened when over
the
> >      > course of ~300 model fits, there would be the occasional 
> > failure
> to
> >      > converge, which throws the following error:
> >      >
> >      > image.png
> >      >
> >      > Here's my MRE:
> >      >
> >      > require(rugarch)
> >      > require(quantmod)
> >      >
> >      > # get SPY data from Yahoo (also tried with Quandl, data isn't the
> >     issue)
> >      > getSymbols("SPY", from = '1990-01-01')
> >      >
> >      > spyRets <- Return.calculate(Ad(SPY))
> >      >
> >      > # GJR garch with AR1 innovations under a skewed student T
> >     distribution
> >      > for returns
> >      > gjrSpec <- ugarchspec(mean.model = list(armaOrder = c(1,0)),
> >      >                        variance.model = list(model = "gjrGARCH"),
> >      >                        distribution.model = "sstd")
> >      >
> >      > # Use rolling window of 504 days, refitting the model every 22
> >     trading days
> >      > t1 <- Sys.time()
> >      > garchroll <- ugarchroll(gjrSpec, data = spyRets,
> >      >                          n.start = 504, refit.window = "moving",
> >      > refit.every = 22)
> >      > t2 <- Sys.time()
> >      > print(t2-t1)
> >      >
> >      > # try to convert predictions to data frame, as in course -- error
> >     thrown
> >      > regarding non-converged estimation windows
> >      > garchroll <- as.data.frame(garchroll)
> >      >
> >      > With a screenshot for better readability:
> >      >
> >      > image.png
> >      > I also tried the resume command from the following post
> >      > https://stat.ethz.ch/pipermail/r-sig-finance/2013q2/011720.html,
> >     which
> >      > did not solve my problem.
> >      >
> >      > I feel that this is a pretty straightforward application of the
> >     rugarch
> >      > package, and that there is most likely a solution that simply
> wasn't
> >      > covered in the course. I'd be greatly appreciative if someone
> >     could help
> >      > me over this hill (albeit at the risk of revealing that I'm not
> >     exactly
> >      > an expert on GARCH models).
> >      >
> >      > Thank you so much.
> >      >
> >      > Sincerely,
> >      >
> >      > Ilya Kipnis (author of Quantstrat TradeR)
> >      >
> >      > _______________________________________________
> >      > R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org>
> >     mailing list
> >      > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >      > -- Subscriber-posting only. If you want to post, subscribe first.
> >      > -- Also note that this is not the r-help list where general R
> >     questions should go.
> >      >
> >
> >     _______________________________________________
> >     R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org>
> >     mailing list
> >     https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >     -- Subscriber-posting only. If you want to post, subscribe first.
> >     -- Also note that this is not the r-help list where general R
> >     questions should go.
> >
>

	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.


From mou@@@oui @ending from rom@ndie@com  Fri Nov 30 16:10:46 2018
From: mou@@@oui @ending from rom@ndie@com (Farid Moussaoui)
Date: Fri, 30 Nov 2018 16:10:46 +0100 (CET)
Subject: [R-SIG-Finance] Just finished Kris Boudt's course,
 running into errors from non-convergence in rugarch
Message-ID: <826293536.193243.1543590646232@romandiev5-http2.romandie.int>


If you look to warnings(), it is said that

Warning in .makefitmodel(garchmodel = "gjrGARCH", f = .gjrgarchLLH, T = T,  :
rugarch-->warning: failed to invert hessian

The 6 available solvers got the same message.
F.

	[[alternative HTML version deleted]]


From viv@nov879 @ending from y@@ru  Sat Dec  1 05:50:42 2018
From: viv@nov879 @ending from y@@ru (=?utf-8?B?0JLQu9Cw0LTQuNC80LjRgCDQmNCy0LDQvdC+0LI=?=)
Date: Sat, 01 Dec 2018 07:50:42 +0300
Subject: [R-SIG-Finance] rugarch roll plot. why abs(mu) in plot?
In-Reply-To: <9398151543607516@sas1-4b7566131ec9.qloud-c.yandex.net>
References: <1377311542791922@myt1-cd60b8ae9bb9.qloud-c.yandex.net>
 <9398151543607516@sas1-4b7566131ec9.qloud-c.yandex.net>
Message-ID: <78991543639842@iva6-71ba8554b85c.qloud-c.yandex.net>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20181201/fdf5267d/attachment.html>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: series_plot.png
Type: image/png
Size: 6747 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20181201/fdf5267d/attachment.png>

From @lexio@ @ending from 4d@c@pe@com  Sat Dec  1 07:00:56 2018
From: @lexio@ @ending from 4d@c@pe@com (Alexios Galanos)
Date: Fri, 30 Nov 2018 22:00:56 -0800
Subject: [R-SIG-Finance] rugarch roll plot. why abs(mu) in plot?
In-Reply-To: <78991543639842@iva6-71ba8554b85c.qloud-c.yandex.net>
References: <1377311542791922@myt1-cd60b8ae9bb9.qloud-c.yandex.net>
 <9398151543607516@sas1-4b7566131ec9.qloud-c.yandex.net>
 <78991543639842@iva6-71ba8554b85c.qloud-c.yandex.net>
Message-ID: <0253BA59-6AD0-40EE-ADB9-2608A7FEE5A4@4dscape.com>

Agreed, it shouldn?t...my bad for copying the code from another plot snippet.
Thanks for catching this. Will fix in next release.

Alexios


> On Nov 30, 2018, at 20:50, ???????? ?????? <vivanov879 at ya.ru> wrote:
> 
>  
>>> Hi. After fitting a rolling model and plotting the Series forecast all forecasted values are positive. Use this code to reproduce: http://www.unstarched.net/wp-content/uploads/2013/06/an-example-in-rugarch.pdf I would expect the series forecasts be both positive and negative. 
>>>  
>>> <series_plot.png>
>>>  
>>> After looking through the sources I found that it is a plot of abs(mu) against realized values. :
>>>  
>>> # rolling series forecast comparison plot
>>> .plot.garchroll.3 = function(x, VaR.alpha = 0.01, density.support = c(-0.15, 0.15), ...)
>>> {
>>> density = x at forecast$density
>>> plot(as.Date(rownames(density)), density[,6], type="l", col = "grey",
>>> main = paste("Series Forecast vs Realized", sep = ""),
>>> ylab = "", xlab  = "", cex.main = 0.7, cex.axis = 0.8, cex.lab=0.9)
>>> lines(as.Date(rownames(density)), abs(density[,1]), col = "tomato1", lwd = 1.5)
>>> grid()
>>> invisible(x)
>>> }
>>>  
>>> I think it there should be no abs . What do you think?
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

	[[alternative HTML version deleted]]


From jvmirc@ @ending from gm@il@com  Sat Dec  1 20:47:01 2018
From: jvmirc@ @ending from gm@il@com (=?UTF-8?Q?Jos=C3=A9_Vin=C3=ADcius_de_Miranda_Cardoso?=)
Date: Sat, 1 Dec 2018 16:47:01 -0300
Subject: [R-SIG-Finance] riskParityPortfolio package release
Message-ID: <CAB6kXFx2Kn9PbNT+KSpwxJsYUsUWM6fConjDifOouSCTRdT4=w@mail.gmail.com>

Hi everyone,

I'm pleased to announce the first release of the package
*riskParityPortfolio* on GitHub (soon to be submitted to CRAN):
https://github.com/dppalomar/riskParityPortfolio.

We implement several algorithms for the design of risk parity portfolios,
namely:

   - the Newton method proposed by Spinu (2013)
   - the successive convex approximation proposed by Feng  (2015)
   - wrapper around well-known general solvers to the R community such as
   alabama

For more detailed information, please visit the package's webpage at:
http://mirca.github.io/riskParityPortfolio

F. Spinu, ?An algorithm for computing risk parity weights,? *SSRN*, 2013.
Y. Feng and D. P. Palomar, ?SCRIP: Successive convex optimization methods
for risk parity portfolios design,? *IEEE Trans. Signal Process.*, vol. 63,
no. 19, pp. 5285?5300, Oct. 2015.

Feedback and bug reports are more than welcome. Feel free to open a ticket
at https://github.com/dppalomar/riskParityPortfolio/issues.

Thank you,
Z? Vin?cius
-- 
webpage: http://mirca.github.io
github: @mirca <http://www.github.com/mirca>
twitter: @mircaze <http://www.twitter.com/mircaze>

	[[alternative HTML version deleted]]


From viv@nov879 @ending from y@@ru  Mon Dec  3 13:45:18 2018
From: viv@nov879 @ending from y@@ru (=?utf-8?B?0JLQu9Cw0LTQuNC80LjRgCDQmNCy0LDQvdC+0LI=?=)
Date: Mon, 03 Dec 2018 15:45:18 +0300
Subject: [R-SIG-Finance] rugarch xts causes error
In-Reply-To: <78991543639842@iva6-71ba8554b85c.qloud-c.yandex.net>
References: <1377311542791922@myt1-cd60b8ae9bb9.qloud-c.yandex.net>
 <9398151543607516@sas1-4b7566131ec9.qloud-c.yandex.net>
 <78991543639842@iva6-71ba8554b85c.qloud-c.yandex.net>
Message-ID: <3146861543841118@sas2-db6b18f976b3.qloud-c.yandex.net>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20181203/ca802d80/attachment.html>

From @lexio@ @ending from 4d@c@pe@com  Mon Dec  3 15:10:40 2018
From: @lexio@ @ending from 4d@c@pe@com (alexios galanos)
Date: Mon, 3 Dec 2018 06:10:40 -0800
Subject: [R-SIG-Finance] rugarch xts causes error
In-Reply-To: <3146861543841118@sas2-db6b18f976b3.qloud-c.yandex.net>
References: <1377311542791922@myt1-cd60b8ae9bb9.qloud-c.yandex.net>
 <9398151543607516@sas1-4b7566131ec9.qloud-c.yandex.net>
 <78991543639842@iva6-71ba8554b85c.qloud-c.yandex.net>
 <3146861543841118@sas2-db6b18f976b3.qloud-c.yandex.net>
Message-ID: <297e253e-76ba-346b-92c0-fb96d089de2e@4dscape.com>

The external.regressors input must be a matrix not an xts object e.g. use:
spec<-ugarchspec(mean.model=list(external.regressors=coredata(inputs[1:2000,2])))

This will probably be relaxed in a future release.

Regards,

Alexios

On 12/3/18 4:45 AM, ???????? ?????? wrote:
> Hi
> Used example provided by Alexios in some thread
> ===========================
> library(rugarch)
> library(xts)
> data(sp500ret)
> spx<-xts(sp500ret, as.Date(rownames(sp500ret)))
> xreg<-xts(rnorm(nrow(spx)), index(spx))
> colnames(xreg)<-"xreg"
> # assume xreg is an actual series, so we lag it
> # as we would do in a real application
> xreg = lag(xreg,1)
> inputs<-na.omit(cbind(spx, xreg, join="left"))
> # real time forecasting
> spec<-ugarchspec(mean.model=list(external.regressors=inputs[1:2000,2]))
> fit<-ugarchfit(spec, inputs[1:2000,1])
> # 2 ways to do real-time forecasting (ugarchforecast and ugarchfilter)
> # Example: forecast points 2001:2020
> xforc = xts(matrix(NA, ncol=2, nrow=20), index(inputs[2001:2020]))
> sforc = xts(matrix(NA, ncol=2, nrow=20), index(inputs[2001:2020]))
> for(i in 1:20){
>  ? # Forecast(T+1)|Information(T)
>  ? # 1. Create a similar spec as you used in estimation
>  ? # and add the lagged regressor upto time T
>    
> specf1<-ugarchspec(mean.model=list(external.regressors=inputs[1:(2000+i-1),2])) 
> 
>  ? # Pass the estimated coefficients from the estimation upto time 2000
>  ? setfixed(specf1)<-as.list(coef(fit))
>  ? # 2. Forecast using ugarchforecast on a specification with fixed 
> parameters
>  ? # where n.old is used in order to recreate the correct start-up 
> conditions
>  ? # used in the fitting routine
>  ? f1<-ugarchforecast(specf1, inputs[1:(2000+i-1),1], n.ahead=1, 
> n.old=2000)
>  ? # 3. Forecast using ugarchfilter on a specification with fixed 
> parameters.
>  ? # For this method, append a new row to the end of the data with zeros,
>  ? # as you would do with related filters. This forces the routine to
>  ? # output the value at time T+1
>  ? newdat<-rbind(inputs[1:(2000+i-1),],xts(matrix(0, nrow=1, ncol=2),
>                                            
> tail(move(index(inputs[1:(2000+i-1)])),1)))
>  ? specf2<-ugarchspec(mean.model=list(external.regressors=newdat[,2]))
>  ? setfixed(specf2)<-as.list(coef(fit))
>  ? f2<-ugarchfilter(specf2, newdat[,1], n.old=2000)
>  ? # fitted = estimated conditional mean values for uGARCHfit objects
>  ? # fitted = forecast/filtered conditional mean values for 
> uGARCHforecast/uGARCHfilter objects
>  ? xforc[i,1] = as.numeric(fitted(f1))
>  ? xforc[i,2] = as.numeric(tail(fitted(f2),1))
>  ? # sigma = conditional sigma values (fitted/forecast etc)
>  ? sforc[i,1] = as.numeric(sigma(f1))
>  ? sforc[i,2] = as.numeric(tail(sigma(f2),1))
> }
> # check
> all.equal(xforc[,1], xforc[,2])
> all.equal(sforc[,1], sforc[,2])
> # check that the 1-ahead forecast directly from the fitted object is also
> # the same
> all.equal(as.numeric(xforc[1,1]), as.numeric(fitted(ugarchforecast(fit,
>                                                                    
>  ?n.ahead=1))))
> all.equal(as.numeric(sforc[1,1]), as.numeric(sigma(ugarchforecast(fit,
>                                                                    
> n.ahead=1))))
> # check the filter values vs the fitted values (i.e. why we use the 
> n.old argument)
> all.equal(fitted(fit), fitted(f2)[1:2000])
> all.equal(sigma(fit), sigma(f2)[1:2000])
> ==========================
> But, when running it i get an error:
>  > fit<-ugarchfit(spec, inputs[1:2000,1])
> Error in pars[idx["mxreg", 1]:idx["mxreg", 2], 1] <- fit.mean[i] :
>  ? replacement has length zero
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From viv@nov879 @ending from y@@ru  Mon Dec  3 16:03:59 2018
From: viv@nov879 @ending from y@@ru (=?utf-8?B?0JLQu9Cw0LTQuNC80LjRgCDQmNCy0LDQvdC+0LI=?=)
Date: Mon, 03 Dec 2018 18:03:59 +0300
Subject: [R-SIG-Finance] rugarch xts causes error
In-Reply-To: <297e253e-76ba-346b-92c0-fb96d089de2e@4dscape.com>
References: <1377311542791922@myt1-cd60b8ae9bb9.qloud-c.yandex.net>
 <9398151543607516@sas1-4b7566131ec9.qloud-c.yandex.net>
 <78991543639842@iva6-71ba8554b85c.qloud-c.yandex.net>
 <3146861543841118@sas2-db6b18f976b3.qloud-c.yandex.net>
 <297e253e-76ba-346b-92c0-fb96d089de2e@4dscape.com>
Message-ID: <9207791543849439@sas1-b3ec53dbc12b.qloud-c.yandex.net>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20181203/0956a466/attachment.html>

From viv@nov879 @ending from y@@ru  Mon Dec  3 16:15:37 2018
From: viv@nov879 @ending from y@@ru (=?utf-8?B?0JLQu9Cw0LTQuNC80LjRgCDQmNCy0LDQvdC+0LI=?=)
Date: Mon, 03 Dec 2018 18:15:37 +0300
Subject: [R-SIG-Finance] rugarch roll forecast
Message-ID: <10068161543850137@myt1-8f46c049cd43.qloud-c.yandex.net>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20181203/b215af4a/attachment.html>

From @lexio@ @ending from 4d@c@pe@com  Mon Dec  3 18:22:29 2018
From: @lexio@ @ending from 4d@c@pe@com (Alexios Ghalanos)
Date: Mon, 3 Dec 2018 09:22:29 -0800
Subject: [R-SIG-Finance] rugarch roll forecast
In-Reply-To: <10068161543850137@myt1-8f46c049cd43.qloud-c.yandex.net>
References: <10068161543850137@myt1-8f46c049cd43.qloud-c.yandex.net>
Message-ID: <4004325A-5362-4536-8BFD-32415609822F@4dscape.com>

The forecasts are for y[t] given information up to [t-1], and aligned to realized at y[t] for comparison.

Alexios

> On Dec 3, 2018, at 7:15 AM, ???????? ?????? <vivanov879 at ya.ru> wrote:
> 
> Hey, Alexios and fellow R users.
>  
> A small thing to clarify. When I run the
>  
> roll = ugarchroll(spec, xts(df$dprice, as.POSIXct(df$time)), forecast.length = 100, refit.every = 25)
>  
> and then analyze the roll at forecast$density table. I get 100 forecasts.
>  
>  
> > tail(density)
> ====================
>                             Mu    Sigma    Skew    Shape Shape(GIG)  Realized
> 2018-11-30 09:46:10 -11.717360 11.25498 1.00654 7.013685          0 -16.85714
> 2018-11-30 09:46:15   2.521165 10.94367 1.00654 7.013685          0  11.60714
> 2018-11-30 09:46:20   1.032400 11.25478 1.00654 7.013685          0  22.91667
>  
> ====================
>  
> It produces forecasts for Y{t} given all information available up to time t.
> That is, for, example, the 2018-11-30 09:46:15 forecast is made given information of up until and including 2018-11-30 09:46:10.
>                                   the 2018-11-30 09:46:20 forecast is made given information of up until and including 2018-11-30 09:46:15.
> And the model is refitted every 25 steps, that is, since the time step here is 5 seconds, every 5 seconds X 25 = 125 seconds
>  
> Is my thinking correct?
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From viv@nov879 @ending from y@@ru  Mon Dec  3 18:29:00 2018
From: viv@nov879 @ending from y@@ru (=?utf-8?B?0JLQu9Cw0LTQuNC80LjRgCDQmNCy0LDQvdC+0LI=?=)
Date: Mon, 03 Dec 2018 20:29:00 +0300
Subject: [R-SIG-Finance] rugarch roll forecast
In-Reply-To: <4004325A-5362-4536-8BFD-32415609822F@4dscape.com>
References: <10068161543850137@myt1-8f46c049cd43.qloud-c.yandex.net>
 <4004325A-5362-4536-8BFD-32415609822F@4dscape.com>
Message-ID: <3218761543858140@myt1-bc8ef50fb490.qloud-c.yandex.net>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20181203/086a4560/attachment.html>

From viv@nov879 @ending from y@@ru  Tue Dec  4 10:33:50 2018
From: viv@nov879 @ending from y@@ru (=?utf-8?B?0JLQu9Cw0LTQuNC80LjRgCDQmNCy0LDQvdC+0LI=?=)
Date: Tue, 04 Dec 2018 12:33:50 +0300
Subject: [R-SIG-Finance] rugarch intraday plot ugarchroll
Message-ID: <6637501543916030@sas1-38f90f4f25ea.qloud-c.yandex.net>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20181204/e281a059/attachment.html>

From fr@nkm60606 @ending from gm@il@com  Tue Dec  4 13:44:26 2018
From: fr@nkm60606 @ending from gm@il@com (Frank)
Date: Tue, 4 Dec 2018 06:44:26 -0600
Subject: [R-SIG-Finance] rugarch intraday plot ugarchroll
In-Reply-To: <6637501543916030@sas1-38f90f4f25ea.qloud-c.yandex.net>
References: <6637501543916030@sas1-38f90f4f25ea.qloud-c.yandex.net>
Message-ID: <00c901d48bcf$17bd2570$47377050$@gmail.com>

I have
 
pdf("V0_SPY_Scatter_Plot.pdf")
 
before I do my labels and plotting.
 
Best,
 
Frank
Chicago

 

 

From: R-SIG-Finance <r-sig-finance-bounces at r-project.org> On Behalf Of ???????? ??????
Sent: Tuesday, December 04, 2018 3:34 AM
To: r-sig-finance <r-sig-finance at r-project.org>
Subject: [R-SIG-Finance] rugarch intraday plot ugarchroll

 

Hey Alexios and fellow R users,

 

I tried plotting the ugarchroll result when using intraday data and it didnt plot anything. However, if we substitute as.Date with as.POSIXct, everything works like charm:

 

in rugarch-plots.r file:

 

# rolling sigma forecast comparison plot

plot_sigma = function(x, VaR.alpha = 0.01, density.support = c(-0.15, 0.15), ...) {

    density = x at forecast$density

    plot(as.POSIXct(rownames(density)), abs(density[, 6]), type = "l", col = "grey",

       main = paste("Sigma Forecast vs |Series|", sep = ""),

       ylab = "", xlab = "", cex.main = 0.7, cex.axis = 0.8, cex.lab = 0.9)

    lines(as.POSIXct(rownames(density)), abs(density[, 2]), col = "steelblue", lwd = 1.5)

    grid()

    invisible(x)

}

 

# rolling series forecast comparison plot

plot_mu = function(x, VaR.alpha = 0.01, density.support = c(-0.15, 0.15), ...) {

    density = x at forecast$density

    plot(as.POSIXct(rownames(density)), density[, 6], type = "l", col = "grey",

       main = paste("Series Forecast vs Realized", sep = ""),

       ylab = "", xlab = "", cex.main = 0.7, cex.axis = 0.8, cex.lab = 0.9)

    lines(as.POSIXct(rownames(density)), (density[, 1]), col = "tomato1", lwd = 1.5)

    grid()

    invisible(x)

}

 

best

Vladimir


	[[alternative HTML version deleted]]


From bobbur@bhil@@h @ending from gm@il@com  Thu Dec  6 02:20:10 2018
From: bobbur@bhil@@h @ending from gm@il@com (Bobbur Abhilash Chowdary)
Date: Thu, 6 Dec 2018 06:50:10 +0530
Subject: [R-SIG-Finance] Calculating rolling alpha
Message-ID: <CAPNwqggSSd3quOuOyDLYcG2XjsSdD5Dese8zY4My0j3d-e=mRw@mail.gmail.com>

Hello R users,

I would like to know if there exists a package/code snippet which can
calculate Fama-French-Carhart 4 factor rolling alpha. The estimation window
should be of at least last 36 months data and a maximum of 60 months. I
have data matrix with 7 columns - company name, Year-Month, Excess return
of stock for the month, and another 4 columns containing Fama French
Carhart factors from Kenneth French's website.

All help is appreciated.

Thanks,
Abhilash.

	[[alternative HTML version deleted]]


From ily@@kipni@ @ending from gm@il@com  Thu Dec  6 02:24:25 2018
From: ily@@kipni@ @ending from gm@il@com (Ilya Kipnis)
Date: Wed, 5 Dec 2018 20:24:25 -0500
Subject: [R-SIG-Finance] Calculating rolling alpha
In-Reply-To: <CAPNwqggSSd3quOuOyDLYcG2XjsSdD5Dese8zY4My0j3d-e=mRw@mail.gmail.com>
References: <CAPNwqggSSd3quOuOyDLYcG2XjsSdD5Dese8zY4My0j3d-e=mRw@mail.gmail.com>
Message-ID: <CA+oJuEHGdoV=erJr5J1PQ4suq7FoASGKxfcABMvRQd-gmh-sKA@mail.gmail.com>

https://rdrr.io/cran/roll/man/roll_lm.html

I used this in my last contract engagement, so I can vouch that this works
for *exactly* this purpose.

On Wed, Dec 5, 2018 at 8:20 PM Bobbur Abhilash Chowdary <
bobburabhilash at gmail.com> wrote:

> Hello R users,
>
> I would like to know if there exists a package/code snippet which can
> calculate Fama-French-Carhart 4 factor rolling alpha. The estimation window
> should be of at least last 36 months data and a maximum of 60 months. I
> have data matrix with 7 columns - company name, Year-Month, Excess return
> of stock for the month, and another 4 columns containing Fama French
> Carhart factors from Kenneth French's website.
>
> All help is appreciated.
>
> Thanks,
> Abhilash.
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]


From bobbur@bhil@@h @ending from gm@il@com  Fri Dec  7 09:30:30 2018
From: bobbur@bhil@@h @ending from gm@il@com (Bobbur Abhilash Chowdary)
Date: Fri, 7 Dec 2018 14:00:30 +0530
Subject: [R-SIG-Finance] Calculating rolling alpha
In-Reply-To: <CA+oJuEHGdoV=erJr5J1PQ4suq7FoASGKxfcABMvRQd-gmh-sKA@mail.gmail.com>
References: <CAPNwqggSSd3quOuOyDLYcG2XjsSdD5Dese8zY4My0j3d-e=mRw@mail.gmail.com>
 <CA+oJuEHGdoV=erJr5J1PQ4suq7FoASGKxfcABMvRQd-gmh-sKA@mail.gmail.com>
Message-ID: <CAPNwqgjmQ3jbbj8g0pUJbs8=otd9Ds9QETWCR-pMgLrb8_e9Vg@mail.gmail.com>

Thanks! I think this will do.

On Thu 6 Dec, 2018 06:54 Ilya Kipnis, <ilya.kipnis at gmail.com> wrote:

> https://rdrr.io/cran/roll/man/roll_lm.html
>
> I used this in my last contract engagement, so I can vouch that this works
> for *exactly* this purpose.
>
> On Wed, Dec 5, 2018 at 8:20 PM Bobbur Abhilash Chowdary <
> bobburabhilash at gmail.com> wrote:
>
>> Hello R users,
>>
>> I would like to know if there exists a package/code snippet which can
>> calculate Fama-French-Carhart 4 factor rolling alpha. The estimation
>> window
>> should be of at least last 36 months data and a maximum of 60 months. I
>> have data matrix with 7 columns - company name, Year-Month, Excess return
>> of stock for the month, and another 4 columns containing Fama French
>> Carhart factors from Kenneth French's website.
>>
>> All help is appreciated.
>>
>> Thanks,
>> Abhilash.
>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>

	[[alternative HTML version deleted]]


From jo@hu@@@eg@l @ending from gm@il@com  Wed Dec 19 21:40:51 2018
From: jo@hu@@@eg@l @ending from gm@il@com (Josh Segal)
Date: Wed, 19 Dec 2018 15:40:51 -0500
Subject: [R-SIG-Finance] Apparent bug in rmgarch
In-Reply-To: <CAHRBD=ZDUXG+CGpOvQj2wL4GjqOgrD3bmbxpa-m3E4zzhrByXg@mail.gmail.com>
References: <CAHRBD=ZeMrba7f2=4dp0=85VFcJMbVeK+BZJU5BAq2gHOsx7aQ@mail.gmail.com>
 <0d9c9c57-792e-d0ad-6a81-64af4dc5a49e@4dscape.com>
 <CAHRBD=ZDUXG+CGpOvQj2wL4GjqOgrD3bmbxpa-m3E4zzhrByXg@mail.gmail.com>
Message-ID: <CAHRBD=Y6ckOKZz2=60H3tK-WChOabgQkibxOG982ZGS958Vy3w@mail.gmail.com>

A separate but related issue:

Fitting a VAR model with the varxfit function depends on a random seed via
runif() in the mlts() function - without the ability to set the seed.  This
creates reproducibility issues.  Perhaps an rseed argument should be made
available like some of the other functions in the package.

Thanks very much!

On Fri, Jan 26, 2018 at 10:45 AM Josh Segal <joshua.segal at gmail.com> wrote:

> I'll try that, thanks!
>
> On Wed, Jan 24, 2018 at 10:15 PM, alexios galanos <alexios at 4dscape.com>
> wrote:
>
>> Hi Josh,
>>
>> Thanks for reporting this...I'll investigate further when time permits.
>>
>> In the meantime, if you let the rseed=NULL, the returned object will
>> include the seeds used which can then be passed back into the simulation
>> function to obtain reproducible results.
>>
>> Here is an example:
>> ###############################
>> library(rmgarch)
>> data(dji30retw)
>> Dat = dji30retw[, 1:3, drop = FALSE]
>> cnames = colnames(Dat)
>> uspec = ugarchspec(mean.model = list(armaOrder = c(2,1)), variance.model
>> = list(garchOrder = c(1,1), model = "eGARCH"), distribution.model = "norm")
>> spec1 = dccspec(uspec = multispec( replicate(3, uspec) ), dccOrder =
>> c(1,1), distribution = "mvnorm")
>> fit1 = dccfit(spec1, data = Dat, fit.control = list(eval.se=FALSE))
>> uspec = ugarchspec(mean.model = list(armaOrder = c(2,1)), variance.model
>> = list(garchOrder = c(1,1), model = "eGARCH"), distribution.model = "norm")
>> vspec = vector(mode = "list", length = 3)
>> midx = fit1 at model$midx
>> mpars = fit1 at model$mpars
>> # nasty, I know...will try to write some wrapper to perform this
>> automatically in future.
>> for(i in 1:3){
>>   vspec[[i]] = uspec
>>   setfixed(vspec[[i]])<-as.list(mpars[midx[,i]==1, i])
>> }
>> dccfix = as.list(coef(fit1, "dcc"))
>> spec2 = dccspec(uspec = multispec( vspec ), dccOrder = c(1,1),
>> distribution = "mvnorm", fixed.pars = dccfix)
>> # Fitted object
>> sim1 = dccsim(fitORspec = fit1, n.sim = 1000, n.start = 100, m.sim = 2,
>> startMethod = "unconditional",
>>               rseed = NULL)
>> print(sim1 at msim$rseed)
>> > 497782424 497782425 995564850
>> sim2 = dccsim(fitORspec = fit1, n.sim = 1000, n.start = 100, m.sim = 2,
>> startMethod = "unconditional",
>>               rseed=sim1 at msim$rseed)
>>
>> all.equal(sim1 at msim$simX[[1]],sim2 at msim$simX[[1]])
>> > TRUE
>> all.equal(sim1 at msim$simX[[2]],sim2 at msim$simX[[2]])
>> > TRUE
>> # Specification Object
>> sims1 = dccsim(fitORspec = spec2, n.sim = 1000, n.start = 100, m.sim = 2,
>> startMethod = "unconditional",
>>               rseed = NULL, mexsimdata = NULL, vexsimdata = NULL, preQ =
>> last(rcor(fit1, type = "Q"))[,,1],
>>               Qbar = fit1 at mfit$Qbar)
>> sims2 = dccsim(fitORspec = spec2, n.sim = 1000, n.start = 100, m.sim = 2,
>> startMethod = "unconditional",
>>               rseed=sims1 at msim$rseed, preQ = last(rcor(fit1, type =
>> "Q"))[,,1],
>>               Qbar = fit1 at mfit$Qbar)
>>
>> all.equal(sims1 at msim$simX[[1]],sims2 at msim$simX[[1]])
>> > TRUE
>> all.equal(sims1 at msim$simX[[2]],sims2 at msim$simX[[2]])
>> > TRUE
>> ###############################
>>
>> Regards,
>>
>> Alexios
>>
>>
>> On 1/23/18 11:34 AM, Josh Segal wrote:
>>
>>> Hi Alexios (and others),
>>>
>>> First, thank you for creating rmgarch, it's great.
>>>
>>> I'm trying to generate simulations using dccsim from a spec, and find
>>> that
>>> when I specify a single value for rseed, the simulation results are not
>>> reproducible (that is, each run gives different results).  I can avoid
>>> this
>>> issue by either using a fit instead of a spec or by specifying a vector
>>> of
>>> m.sim rseeds.
>>>
>>> I did some digging in the code, and found in rdcc-main.R:
>>> For fit, line 1224: rseed = c(rseed, (1:m.sim)*(rseed+1))
>>> For spec, line 1493: rseed = c(rseed, as.integer(runif(m.sim, 1,
>>> Sys.time())))
>>>
>>> I think this explains my results.  Seems like the latter is incorrect,
>>> and
>>> should match the former, no?
>>>
>>> Thanks very much,
>>> Josh
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>>>
>>
>

	[[alternative HTML version deleted]]


