From aidan.corcoran11 at gmail.com  Sat Oct  1 18:41:19 2011
From: aidan.corcoran11 at gmail.com (Aidan Corcoran)
Date: Sat, 1 Oct 2011 17:41:19 +0100
Subject: [R-SIG-Finance] Speed of processing a bdh call using Rbloomberg
Message-ID: <CADv5Py63x66c1YHou_bJBdV5JtS_U+8GDgkNzErGYihsk0eqbw@mail.gmail.com>

Dear list,

When I run a bdh call which requests three years of quarterly data on
two items for 48 companies (giving a 601x4 data frame), the call takes
about two minutes to complete. I would like to run bigger requests, so
speed is a bit of an issue. Is there anything I can do to improve the
speed? Code below. I have a PC running Windows 7, 4gb of RAM and a
3Ghz processor, if that matters. Java version is 1.6.0_26.

Thanks in advance
Aidan

conn <- blpConnect()
R version 2.13.0 (2011-04-13)
rJava Version 0.9-1
RBloomberg Version 0.4-150
Java environment initialized successfully.
Looking for most recent blpapi3.jar file...
Adding C:\blp\API\APIv3\JavaAPI\v3.4.3.2\lib\blpapi3.jar to Java classpath
Bloomberg API Version 3.4.3.2
daysback<-3*365
start.date <- as.POSIXct(Sys.Date()-daysback)
end.date <- as.POSIXct(Sys.Date())
tickers<- c("ACA FP Equity", "ALPHA GA Equity", "BAER VX Equity",
"BARC LN Equity", "BBVA SQ Equity", "BCP PL Equity", "BCVN SE Equity",
"BES PL Equity",
"BKIR ID Equity", "BKT SQ Equity", "BMPS IM Equity", "BNP FP Equity",
"BP IM Equity", "BPE IM Equity", "BPSO IM Equity", "CABK SQ Equity",
"CBK GY Equity", "CRG IM Equity", "CSGN VX Equity", "DANSKE DC Equity",
"DBK GY Equity", "DEXB BB Equity", "DNBNOR NO Equity", "EBS AV Equity",
"ETE GA Equity", "GLE FP Equity", "HSBA LN Equity", "ISP IM Equity",
"JYSK DC Equity", "KBC BB Equity", "KN FP Equity", "LLOY LN Equity",
"MB IM Equity", "NDA SS Equity", "POH1S FH Equity", "POP SQ Equity",
"RBI AV Equity", "RBS LN Equity", "SAB SQ Equity", "SAN SQ Equity",
"SEBA SS Equity", "SHBA SS Equity", "STAN LN Equity", "SWEDA SS Equity",
"SYDB DC Equity", "TPEIR GA Equity", "UBI IM Equity", "UBSN VX Equity",
"UCG IM Equity", "VATN SE Equity")
fields<-c("best_sales","best_ebitda")
o_names = "periodicitySelection"
o_values = "QUARTERLY"
funda<-bdh(conn, tickers, fields, start.date,end.date,option_names =
o_names, option_values = o_values)


sessionInfo()
R version 2.13.0 (2011-04-13)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_Ireland.1252  LC_CTYPE=English_Ireland.1252
[3] LC_MONETARY=English_Ireland.1252 LC_NUMERIC=C
[5] LC_TIME=English_Ireland.1252

attached base packages:
[1] grid      stats     graphics  grDevices utils     datasets  methods
[8] base

other attached packages:
[1] RBloomberg_0.4-150 rJava_0.9-1        gtools_2.6.2       gdata_2.8.2
[5] ggplot2_0.8.9      proto_0.3-9.2      zoo_1.7-4          reshape_0.8.4
[9] plyr_1.6

loaded via a namespace (and not attached):
[1] lattice_0.19-23 tools_2.13.0


From ustaudinger at gmail.com  Sat Oct  1 19:20:23 2011
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Sat, 1 Oct 2011 19:20:23 +0200
Subject: [R-SIG-Finance] Speed of processing a bdh call using Rbloomberg
In-Reply-To: <CADv5Py63x66c1YHou_bJBdV5JtS_U+8GDgkNzErGYihsk0eqbw@mail.gmail.com>
References: <CADv5Py63x66c1YHou_bJBdV5JtS_U+8GDgkNzErGYihsk0eqbw@mail.gmail.com>
Message-ID: <-2101203766867133736@unknownmsgid>

cache it after downloading and fetch only the update?
regards
ulrich


--
comnect on xing or linkedin

On 01.10.2011, at 18:43, Aidan Corcoran <aidan.corcoran11 at gmail.com> wrote:

> Dear list,
>
> When I run a bdh call which requests three years of quarterly data on
> two items for 48 companies (giving a 601x4 data frame), the call takes
> about two minutes to complete. I would like to run bigger requests, so
> speed is a bit of an issue. Is there anything I can do to improve the
> speed? Code below. I have a PC running Windows 7, 4gb of RAM and a
> 3Ghz processor, if that matters. Java version is 1.6.0_26.
>
> Thanks in advance
> Aidan
>
> conn <- blpConnect()
> R version 2.13.0 (2011-04-13)
> rJava Version 0.9-1
> RBloomberg Version 0.4-150
> Java environment initialized successfully.
> Looking for most recent blpapi3.jar file...
> Adding C:\blp\API\APIv3\JavaAPI\v3.4.3.2\lib\blpapi3.jar to Java classpath
> Bloomberg API Version 3.4.3.2
> daysback<-3*365
> start.date <- as.POSIXct(Sys.Date()-daysback)
> end.date <- as.POSIXct(Sys.Date())
> tickers<- c("ACA FP Equity", "ALPHA GA Equity", "BAER VX Equity",
> "BARC LN Equity", "BBVA SQ Equity", "BCP PL Equity", "BCVN SE Equity",
> "BES PL Equity",
> "BKIR ID Equity", "BKT SQ Equity", "BMPS IM Equity", "BNP FP Equity",
> "BP IM Equity", "BPE IM Equity", "BPSO IM Equity", "CABK SQ Equity",
> "CBK GY Equity", "CRG IM Equity", "CSGN VX Equity", "DANSKE DC Equity",
> "DBK GY Equity", "DEXB BB Equity", "DNBNOR NO Equity", "EBS AV Equity",
> "ETE GA Equity", "GLE FP Equity", "HSBA LN Equity", "ISP IM Equity",
> "JYSK DC Equity", "KBC BB Equity", "KN FP Equity", "LLOY LN Equity",
> "MB IM Equity", "NDA SS Equity", "POH1S FH Equity", "POP SQ Equity",
> "RBI AV Equity", "RBS LN Equity", "SAB SQ Equity", "SAN SQ Equity",
> "SEBA SS Equity", "SHBA SS Equity", "STAN LN Equity", "SWEDA SS Equity",
> "SYDB DC Equity", "TPEIR GA Equity", "UBI IM Equity", "UBSN VX Equity",
> "UCG IM Equity", "VATN SE Equity")
> fields<-c("best_sales","best_ebitda")
> o_names = "periodicitySelection"
> o_values = "QUARTERLY"
> funda<-bdh(conn, tickers, fields, start.date,end.date,option_names =
> o_names, option_values = o_values)
>
>
> sessionInfo()
> R version 2.13.0 (2011-04-13)
> Platform: i386-pc-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=English_Ireland.1252  LC_CTYPE=English_Ireland.1252
> [3] LC_MONETARY=English_Ireland.1252 LC_NUMERIC=C
> [5] LC_TIME=English_Ireland.1252
>
> attached base packages:
> [1] grid      stats     graphics  grDevices utils     datasets  methods
> [8] base
>
> other attached packages:
> [1] RBloomberg_0.4-150 rJava_0.9-1        gtools_2.6.2       gdata_2.8.2
> [5] ggplot2_0.8.9      proto_0.3-9.2      zoo_1.7-4          reshape_0.8.4
> [9] plyr_1.6
>
> loaded via a namespace (and not attached):
> [1] lattice_0.19-23 tools_2.13.0
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From xianli.analytics at gmail.com  Sat Oct  1 22:51:40 2011
From: xianli.analytics at gmail.com (Xian Li)
Date: Sat, 1 Oct 2011 16:51:40 -0400
Subject: [R-SIG-Finance] Quantmod problem with getQuote with yahooQF options
Message-ID: <A368B933-0237-41DD-B087-532BEEF7E7B1@gmail.com>

Hi,

I just tried out the examples given in the getQuote but it didn't return the columns as I specified but return the default columns:

> fundamentals = getQuote(paste(as.character(as.vector(unique(hrtwts$ticker))),sep=";",collapse=";"),what=yahooQF(c("Bid","Ask")))
downloading set: 1 , 2 , 3 , 4 , 5 , 6 , ...done
> head(fundamentals)
              Trade Time   Last Change % Change   Open   High    Low   Volume
GOOG 2011-09-30 04:00:00 515.04 -12.46   -2.36% 520.21 524.00 514.38  2724908
AAPL 2011-09-30 04:00:00 381.32  -9.25   -2.37% 387.12 388.89 381.18 19579888
AOL  2011-09-30 04:03:00  12.00  -0.27   -2.20%  12.03  12.46  11.86  2328948
DMD  2011-09-30 04:00:00   8.00  +0.05   +0.63%   7.81   8.01   7.76   154085
AMZN 2011-09-30 04:00:00 216.23  -6.21   -2.79% 218.19 223.00 215.21  6553621
HPQ  2011-09-30 04:00:00  22.45  -1.33   -5.59%  23.57  23.75  22.42 40146916
> tail(fundamentals)
              Trade Time   Last Change % Change  Open    High   Low   Volume
DNP  2011-09-30 04:00:00 10.000  +0.05   +0.50%  9.95   10.00  9.88   265790
LHO  2011-09-30 04:01:00 19.200  -0.63   -3.18% 19.48   20.03 19.16  1145709
HGT  2011-09-30 04:00:00 21.282 -0.188   -0.88% 21.19 21.5486 21.11   152061
UA   2011-09-30 04:02:00 66.410  -4.09   -5.80% 69.21   70.41 66.38  1089147
ORCL 2011-09-30 04:00:00 28.740  -0.91   -3.07% 29.25   29.74 28.74 42188036
BANF 2011-09-30 04:00:00 33.160  +0.63   +1.94% 32.08   33.75 31.26    28020

Can anyone help? Thanks!

best regards,
Xian

From arun.k at bridgei2i.com  Mon Oct  3 09:18:44 2011
From: arun.k at bridgei2i.com (Arun Krishnamoorthy)
Date: Mon, 3 Oct 2011 12:48:44 +0530
Subject: [R-SIG-Finance] How to output "Trace" list from auto.arima in
	forecast library
In-Reply-To: <CAPLrYEQh=EPhD7HD4H0Cx+NyEkr9expMrMCHoea-hiR=yc4Akw@mail.gmail.com>
References: <1317021897117-3842937.post@n4.nabble.com>	<1317023283837-3842989.post@n4.nabble.com>	<1317034127.4192.236.camel@brian-desktop>	<1317035552930-3843408.post@n4.nabble.com>
	<CAPLrYEQh=EPhD7HD4H0Cx+NyEkr9expMrMCHoea-hiR=yc4Akw@mail.gmail.com>
Message-ID: <001801cc819c$b062fba0$1128f2e0$@k@bridgei2i.com>

Hi,
I'm working on the forecast library and am using the auto.arima function
with some dummy data

Fit<-auto.arima(data_ts, trace=TRUE)

I understand that trace evaluates alternative models and provides the
corresponding AIC/SIC values with an output that looks like this;

ARIMA(2,1,2) with drift         : 1278.988
 ARIMA(0,1,0) with drift         : 1281.161
 ARIMA(1,1,0) with drift         : 1280.325
 ARIMA(0,1,1) with drift         : 1278.2
 ARIMA(1,1,1) with drift         : 1280.229
 ARIMA(0,1,2) with drift         : 1278.824
 ARIMA(1,1,2) with drift         : 1281.911
 ARIMA(0,1,1)                    : 1277.73
 ARIMA(1,1,1)                    : 1279.804
 ARIMA(0,1,0)                    : 1281.265
 ARIMA(0,1,2)                    : 1278.626
 ARIMA(1,1,2)                    : 1281.64

 Best model: ARIMA(0,1,1)              

Unfortunately, Trace is not an object and i'm unable to read it in to a data
frame to do further diagnosis.

Can someone please help me with how i can get this output into a data frame.
I'm unable to do data.frame since i can't coerce an ARIMA object into this
class.

Sorry if this has been addressed before. I just think there may be some data
series where running a closely competing alternative model may be useful

Thanks,
AK

-----Original Message-----
From: r-sig-finance-bounces at r-project.org
[mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Daniel Cegielka
Sent: 26 September 2011 17:20
To: chrisbird
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Filtering dates/times from zoo/xts series

2011/9/26 chrisbird <chris at chrisbird.com>

> Thanks Brian,
>
> I did try using the ['T09:00/T21:00'] method for extraction but it did not
> return anything - I will reinvestigate this and see if I can get it
> working.
>
>
It works... you are sure that the data was ok? Very strange that you have
received nothing...

> d<-xts(1:25, Sys.time() + 1:25)> d                    [,1]
2011-09-26 13:26:55    1
2011-09-26 13:26:56    2
2011-09-26 13:26:57    3
2011-09-26 13:26:58    4
2011-09-26 13:26:59    5
2011-09-26 13:27:00    6
2011-09-26 13:27:01    7
2011-09-26 13:27:02    8
2011-09-26 13:27:03    9
2011-09-26 13:27:04   10
2011-09-26 13:27:05   11
2011-09-26 13:27:06   12
2011-09-26 13:27:07   13
2011-09-26 13:27:08   14
2011-09-26 13:27:09   15
2011-09-26 13:27:10   16
2011-09-26 13:27:11   17
2011-09-26 13:27:12   18
2011-09-26 13:27:13   19
2011-09-26 13:27:14   20
2011-09-26 13:27:15   21
2011-09-26 13:27:16   22
2011-09-26 13:27:17   23
2011-09-26 13:27:18   24
2011-09-26 13:27:19   25> d["2011-09-26 13:27:00/2011-09-26 13:27:10"]
                   [,1]
2011-09-26 13:27:00    6
2011-09-26 13:27:01    7
2011-09-26 13:27:02    8
2011-09-26 13:27:03    9
2011-09-26 13:27:04   10
2011-09-26 13:27:05   11
2011-09-26 13:27:06   12
2011-09-26 13:27:07   13
2011-09-26 13:27:08   14
2011-09-26 13:27:09   15
2011-09-26 13:27:10   16> d["T13:27:00/T13:27:10"]                    [,1]
2011-09-26 13:27:00    6
2011-09-26 13:27:01    7
2011-09-26 13:27:02    8
2011-09-26 13:27:03    9
2011-09-26 13:27:04   10
2011-09-26 13:27:05   11
2011-09-26 13:27:06   12
2011-09-26 13:27:07   13
2011-09-26 13:27:08   14
2011-09-26 13:27:09   15
2011-09-26 13:27:10   16




> The processing is not to remove non-trading days/holidays - I do that
> elsewhere. I'm doing processing on some complex strategies which use some
> instruments which trade a lot, but not everyday. I only wish to process
the
> data from liquid days and strip out the less liquid data.
>
>
It's quite a sophisticated approach to data. Probably when you filter using
the time you would have to count the number of observations and does not
bind data below a certain level. I have no idea how to do it in an elegant
way.

best regards,
daniel



> I will certainly investigate quantstrat.
>
> Thanks,
>
> Chris.
>
>
> --
> View this message in context:
>
http://r.789695.n4.nabble.com/Filtering-dates-times-from-zoo-xts-series-tp38
42937p3843408.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.


From jeffrey.ryan at lemnica.com  Mon Oct  3 14:36:05 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Mon, 3 Oct 2011 07:36:05 -0500
Subject: [R-SIG-Finance] How to output "Trace" list from auto.arima in
 forecast library
In-Reply-To: <4e89628a.d105df0a.5eda.ffffa4a0SMTPIN_ADDED@mx.google.com>
References: <1317021897117-3842937.post@n4.nabble.com>
	<1317023283837-3842989.post@n4.nabble.com>
	<1317034127.4192.236.camel@brian-desktop>
	<1317035552930-3843408.post@n4.nabble.com>
	<CAPLrYEQh=EPhD7HD4H0Cx+NyEkr9expMrMCHoea-hiR=yc4Akw@mail.gmail.com>
	<4e89628a.d105df0a.5eda.ffffa4a0SMTPIN_ADDED@mx.google.com>
Message-ID: <CABDUZc_y2n2vHcqOtiraoNt+XPsSXzHkTjusrn0YAyux6qe3JQ@mail.gmail.com>

Take a look at ?sink

The trace is just a series of calls to 'cat', so it won't be
particularly useful unless you parse.

Jeff

On Mon, Oct 3, 2011 at 2:18 AM, Arun Krishnamoorthy
<arun.k at bridgei2i.com> wrote:
> Hi,
> I'm working on the forecast library and am using the auto.arima function
> with some dummy data
>
> Fit<-auto.arima(data_ts, trace=TRUE)
>
> I understand that trace evaluates alternative models and provides the
> corresponding AIC/SIC values with an output that looks like this;
>
> ARIMA(2,1,2) with drift ? ? ? ? : 1278.988
> ?ARIMA(0,1,0) with drift ? ? ? ? : 1281.161
> ?ARIMA(1,1,0) with drift ? ? ? ? : 1280.325
> ?ARIMA(0,1,1) with drift ? ? ? ? : 1278.2
> ?ARIMA(1,1,1) with drift ? ? ? ? : 1280.229
> ?ARIMA(0,1,2) with drift ? ? ? ? : 1278.824
> ?ARIMA(1,1,2) with drift ? ? ? ? : 1281.911
> ?ARIMA(0,1,1) ? ? ? ? ? ? ? ? ? ?: 1277.73
> ?ARIMA(1,1,1) ? ? ? ? ? ? ? ? ? ?: 1279.804
> ?ARIMA(0,1,0) ? ? ? ? ? ? ? ? ? ?: 1281.265
> ?ARIMA(0,1,2) ? ? ? ? ? ? ? ? ? ?: 1278.626
> ?ARIMA(1,1,2) ? ? ? ? ? ? ? ? ? ?: 1281.64
>
> ?Best model: ARIMA(0,1,1)
>
> Unfortunately, Trace is not an object and i'm unable to read it in to a data
> frame to do further diagnosis.
>
> Can someone please help me with how i can get this output into a data frame.
> I'm unable to do data.frame since i can't coerce an ARIMA object into this
> class.
>
> Sorry if this has been addressed before. I just think there may be some data
> series where running a closely competing alternative model may be useful
>
> Thanks,
> AK
>
> -----Original Message-----
> From: r-sig-finance-bounces at r-project.org
> [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Daniel Cegielka
> Sent: 26 September 2011 17:20
> To: chrisbird
> Cc: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] Filtering dates/times from zoo/xts series
>
> 2011/9/26 chrisbird <chris at chrisbird.com>
>
>> Thanks Brian,
>>
>> I did try using the ['T09:00/T21:00'] method for extraction but it did not
>> return anything - I will reinvestigate this and see if I can get it
>> working.
>>
>>
> It works... you are sure that the data was ok? Very strange that you have
> received nothing...
>
>> d<-xts(1:25, Sys.time() + 1:25)> d ? ? ? ? ? ? ? ? ? ?[,1]
> 2011-09-26 13:26:55 ? ?1
> 2011-09-26 13:26:56 ? ?2
> 2011-09-26 13:26:57 ? ?3
> 2011-09-26 13:26:58 ? ?4
> 2011-09-26 13:26:59 ? ?5
> 2011-09-26 13:27:00 ? ?6
> 2011-09-26 13:27:01 ? ?7
> 2011-09-26 13:27:02 ? ?8
> 2011-09-26 13:27:03 ? ?9
> 2011-09-26 13:27:04 ? 10
> 2011-09-26 13:27:05 ? 11
> 2011-09-26 13:27:06 ? 12
> 2011-09-26 13:27:07 ? 13
> 2011-09-26 13:27:08 ? 14
> 2011-09-26 13:27:09 ? 15
> 2011-09-26 13:27:10 ? 16
> 2011-09-26 13:27:11 ? 17
> 2011-09-26 13:27:12 ? 18
> 2011-09-26 13:27:13 ? 19
> 2011-09-26 13:27:14 ? 20
> 2011-09-26 13:27:15 ? 21
> 2011-09-26 13:27:16 ? 22
> 2011-09-26 13:27:17 ? 23
> 2011-09-26 13:27:18 ? 24
> 2011-09-26 13:27:19 ? 25> d["2011-09-26 13:27:00/2011-09-26 13:27:10"]
> ? ? ? ? ? ? ? ? ? [,1]
> 2011-09-26 13:27:00 ? ?6
> 2011-09-26 13:27:01 ? ?7
> 2011-09-26 13:27:02 ? ?8
> 2011-09-26 13:27:03 ? ?9
> 2011-09-26 13:27:04 ? 10
> 2011-09-26 13:27:05 ? 11
> 2011-09-26 13:27:06 ? 12
> 2011-09-26 13:27:07 ? 13
> 2011-09-26 13:27:08 ? 14
> 2011-09-26 13:27:09 ? 15
> 2011-09-26 13:27:10 ? 16> d["T13:27:00/T13:27:10"] ? ? ? ? ? ? ? ? ? ?[,1]
> 2011-09-26 13:27:00 ? ?6
> 2011-09-26 13:27:01 ? ?7
> 2011-09-26 13:27:02 ? ?8
> 2011-09-26 13:27:03 ? ?9
> 2011-09-26 13:27:04 ? 10
> 2011-09-26 13:27:05 ? 11
> 2011-09-26 13:27:06 ? 12
> 2011-09-26 13:27:07 ? 13
> 2011-09-26 13:27:08 ? 14
> 2011-09-26 13:27:09 ? 15
> 2011-09-26 13:27:10 ? 16
>
>
>
>
>> The processing is not to remove non-trading days/holidays - I do that
>> elsewhere. I'm doing processing on some complex strategies which use some
>> instruments which trade a lot, but not everyday. I only wish to process
> the
>> data from liquid days and strip out the less liquid data.
>>
>>
> It's quite a sophisticated approach to data. Probably when you filter using
> the time you would have to count the number of observations and does not
> bind data below a certain level. I have no idea how to do it in an elegant
> way.
>
> best regards,
> daniel
>
>
>
>> I will certainly investigate quantstrat.
>>
>> Thanks,
>>
>> Chris.
>>
>>
>> --
>> View this message in context:
>>
> http://r.789695.n4.nabble.com/Filtering-dates-times-from-zoo-xts-series-tp38
> 42937p3843408.html
>> Sent from the Rmetrics mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From dstjohn at math.uic.edu  Mon Oct  3 15:34:59 2011
From: dstjohn at math.uic.edu (David St John)
Date: Mon, 3 Oct 2011 08:34:59 -0500
Subject: [R-SIG-Finance] Systematic Risk to the Financial System, Economy
Message-ID: <CABVYRMCTwfRXhE=Noz8CAASDsti3Ltcf1iwjoj3XahKTt52X1w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111003/50006d11/attachment.pl>

From josh.m.ulrich at gmail.com  Mon Oct  3 16:28:01 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 3 Oct 2011 09:28:01 -0500
Subject: [R-SIG-Finance] How to output "Trace" list from auto.arima in
 forecast library
In-Reply-To: <CABDUZc_y2n2vHcqOtiraoNt+XPsSXzHkTjusrn0YAyux6qe3JQ@mail.gmail.com>
References: <1317021897117-3842937.post@n4.nabble.com>
	<1317023283837-3842989.post@n4.nabble.com>
	<1317034127.4192.236.camel@brian-desktop>
	<1317035552930-3843408.post@n4.nabble.com>
	<CAPLrYEQh=EPhD7HD4H0Cx+NyEkr9expMrMCHoea-hiR=yc4Akw@mail.gmail.com>
	<4e89628a.d105df0a.5eda.ffffa4a0SMTPIN_ADDED@mx.google.com>
	<CABDUZc_y2n2vHcqOtiraoNt+XPsSXzHkTjusrn0YAyux6qe3JQ@mail.gmail.com>
Message-ID: <CAPPM_gSMdaJ8aQyJ=BPwNg80=XGOiQFHYP9oMFqi5KxT45=huA@mail.gmail.com>

In addition to sink(), you can also use capture.output().  Then you
can read the contents of "out" into a new object.

out <- capture.output({
  Fit <- auto.arima(data_ts, trace=TRUE)
})
outData <- read.table(con <- textConnection(out), sep=":")
close(con)

Best,
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com



On Mon, Oct 3, 2011 at 7:36 AM, Jeffrey Ryan <jeffrey.ryan at lemnica.com> wrote:
> Take a look at ?sink
>
> The trace is just a series of calls to 'cat', so it won't be
> particularly useful unless you parse.
>
> Jeff
>
> On Mon, Oct 3, 2011 at 2:18 AM, Arun Krishnamoorthy
> <arun.k at bridgei2i.com> wrote:
>> Hi,
>> I'm working on the forecast library and am using the auto.arima function
>> with some dummy data
>>
>> Fit<-auto.arima(data_ts, trace=TRUE)
>>
>> I understand that trace evaluates alternative models and provides the
>> corresponding AIC/SIC values with an output that looks like this;
>>
>> ARIMA(2,1,2) with drift ? ? ? ? : 1278.988
>> ?ARIMA(0,1,0) with drift ? ? ? ? : 1281.161
>> ?ARIMA(1,1,0) with drift ? ? ? ? : 1280.325
>> ?ARIMA(0,1,1) with drift ? ? ? ? : 1278.2
>> ?ARIMA(1,1,1) with drift ? ? ? ? : 1280.229
>> ?ARIMA(0,1,2) with drift ? ? ? ? : 1278.824
>> ?ARIMA(1,1,2) with drift ? ? ? ? : 1281.911
>> ?ARIMA(0,1,1) ? ? ? ? ? ? ? ? ? ?: 1277.73
>> ?ARIMA(1,1,1) ? ? ? ? ? ? ? ? ? ?: 1279.804
>> ?ARIMA(0,1,0) ? ? ? ? ? ? ? ? ? ?: 1281.265
>> ?ARIMA(0,1,2) ? ? ? ? ? ? ? ? ? ?: 1278.626
>> ?ARIMA(1,1,2) ? ? ? ? ? ? ? ? ? ?: 1281.64
>>
>> ?Best model: ARIMA(0,1,1)
>>
>> Unfortunately, Trace is not an object and i'm unable to read it in to a data
>> frame to do further diagnosis.
>>
>> Can someone please help me with how i can get this output into a data frame.
>> I'm unable to do data.frame since i can't coerce an ARIMA object into this
>> class.
>>
>> Sorry if this has been addressed before. I just think there may be some data
>> series where running a closely competing alternative model may be useful
>>
>> Thanks,
>> AK
>>
>> -----Original Message-----
>> From: r-sig-finance-bounces at r-project.org
>> [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Daniel Cegielka
>> Sent: 26 September 2011 17:20
>> To: chrisbird
>> Cc: r-sig-finance at r-project.org
>> Subject: Re: [R-SIG-Finance] Filtering dates/times from zoo/xts series
>>
>> 2011/9/26 chrisbird <chris at chrisbird.com>
>>
>>> Thanks Brian,
>>>
>>> I did try using the ['T09:00/T21:00'] method for extraction but it did not
>>> return anything - I will reinvestigate this and see if I can get it
>>> working.
>>>
>>>
>> It works... you are sure that the data was ok? Very strange that you have
>> received nothing...
>>
>>> d<-xts(1:25, Sys.time() + 1:25)> d ? ? ? ? ? ? ? ? ? ?[,1]
>> 2011-09-26 13:26:55 ? ?1
>> 2011-09-26 13:26:56 ? ?2
>> 2011-09-26 13:26:57 ? ?3
>> 2011-09-26 13:26:58 ? ?4
>> 2011-09-26 13:26:59 ? ?5
>> 2011-09-26 13:27:00 ? ?6
>> 2011-09-26 13:27:01 ? ?7
>> 2011-09-26 13:27:02 ? ?8
>> 2011-09-26 13:27:03 ? ?9
>> 2011-09-26 13:27:04 ? 10
>> 2011-09-26 13:27:05 ? 11
>> 2011-09-26 13:27:06 ? 12
>> 2011-09-26 13:27:07 ? 13
>> 2011-09-26 13:27:08 ? 14
>> 2011-09-26 13:27:09 ? 15
>> 2011-09-26 13:27:10 ? 16
>> 2011-09-26 13:27:11 ? 17
>> 2011-09-26 13:27:12 ? 18
>> 2011-09-26 13:27:13 ? 19
>> 2011-09-26 13:27:14 ? 20
>> 2011-09-26 13:27:15 ? 21
>> 2011-09-26 13:27:16 ? 22
>> 2011-09-26 13:27:17 ? 23
>> 2011-09-26 13:27:18 ? 24
>> 2011-09-26 13:27:19 ? 25> d["2011-09-26 13:27:00/2011-09-26 13:27:10"]
>> ? ? ? ? ? ? ? ? ? [,1]
>> 2011-09-26 13:27:00 ? ?6
>> 2011-09-26 13:27:01 ? ?7
>> 2011-09-26 13:27:02 ? ?8
>> 2011-09-26 13:27:03 ? ?9
>> 2011-09-26 13:27:04 ? 10
>> 2011-09-26 13:27:05 ? 11
>> 2011-09-26 13:27:06 ? 12
>> 2011-09-26 13:27:07 ? 13
>> 2011-09-26 13:27:08 ? 14
>> 2011-09-26 13:27:09 ? 15
>> 2011-09-26 13:27:10 ? 16> d["T13:27:00/T13:27:10"] ? ? ? ? ? ? ? ? ? ?[,1]
>> 2011-09-26 13:27:00 ? ?6
>> 2011-09-26 13:27:01 ? ?7
>> 2011-09-26 13:27:02 ? ?8
>> 2011-09-26 13:27:03 ? ?9
>> 2011-09-26 13:27:04 ? 10
>> 2011-09-26 13:27:05 ? 11
>> 2011-09-26 13:27:06 ? 12
>> 2011-09-26 13:27:07 ? 13
>> 2011-09-26 13:27:08 ? 14
>> 2011-09-26 13:27:09 ? 15
>> 2011-09-26 13:27:10 ? 16
>>
>>
>>
>>
>>> The processing is not to remove non-trading days/holidays - I do that
>>> elsewhere. I'm doing processing on some complex strategies which use some
>>> instruments which trade a lot, but not everyday. I only wish to process
>> the
>>> data from liquid days and strip out the less liquid data.
>>>
>>>
>> It's quite a sophisticated approach to data. Probably when you filter using
>> the time you would have to count the number of observations and does not
>> bind data below a certain level. I have no idea how to do it in an elegant
>> way.
>>
>> best regards,
>> daniel
>>
>>
>>
>>> I will certainly investigate quantstrat.
>>>
>>> Thanks,
>>>
>>> Chris.
>>>
>>>
>>> --
>>> View this message in context:
>>>
>> http://r.789695.n4.nabble.com/Filtering-dates-times-from-zoo-xts-series-tp38
>> 42937p3843408.html
>>> Sent from the Rmetrics mailing list archive at Nabble.com.
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>>
>> ? ? ? ?[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>
>
>
> --
> Jeffrey Ryan
> jeffrey.ryan at lemnica.com
>
> www.lemnica.com
> www.esotericR.com
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From arun.k at bridgei2i.com  Mon Oct  3 16:52:11 2011
From: arun.k at bridgei2i.com (Arun Krishnamoorthy)
Date: Mon, 3 Oct 2011 20:22:11 +0530
Subject: [R-SIG-Finance] How to output "Trace" list from auto.arima in
	forecast library
In-Reply-To: <CAPPM_gSMdaJ8aQyJ=BPwNg80=XGOiQFHYP9oMFqi5KxT45=huA@mail.gmail.com>
References: <1317021897117-3842937.post@n4.nabble.com>
	<1317023283837-3842989.post@n4.nabble.com>
	<1317034127.4192.236.camel@brian-desktop>
	<1317035552930-3843408.post@n4.nabble.com>
	<CAPLrYEQh=EPhD7HD4H0Cx+NyEkr9expMrMCHoea-hiR=yc4Akw@mail.gmail.com>
	<4e89628a.d105df0a.5eda.ffffa4a0SMTPIN_ADDED@mx.google.com>
	<CABDUZc_y2n2vHcqOtiraoNt+XPsSXzHkTjusrn0YAyux6qe3JQ@mail.gmail.com>
	<CAPPM_gSMdaJ8aQyJ=BPwNg80=XGOiQFHYP9oMFqi5KxT45=huA@mail.gmail.com>
Message-ID: <003301cc81dc$096e8d10$1c4ba730$@k@bridgei2i.com>

Works like magic!! Thanks Jeff and Joshua. 

There is a clear advantage in running lower order ARIMA models with drift in
comparison to what auto.arima gives. The AIC values just differ by a few
points so there isn't really much to choose based just on AIC. The competing
model however offers significant reduction in prediction error. 

Thanks for the help again.



-----Original Message-----
From: Joshua Ulrich [mailto:josh.m.ulrich at gmail.com] 
Sent: 03 October 2011 19:58
To: Jeffrey Ryan
Cc: Arun Krishnamoorthy; r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] How to output "Trace" list from auto.arima in
forecast library

In addition to sink(), you can also use capture.output().  Then you
can read the contents of "out" into a new object.

out <- capture.output({
  Fit <- auto.arima(data_ts, trace=TRUE)
})
outData <- read.table(con <- textConnection(out), sep=":")
close(con)

Best,
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com



On Mon, Oct 3, 2011 at 7:36 AM, Jeffrey Ryan <jeffrey.ryan at lemnica.com>
wrote:
> Take a look at ?sink
>
> The trace is just a series of calls to 'cat', so it won't be
> particularly useful unless you parse.
>
> Jeff
>
> On Mon, Oct 3, 2011 at 2:18 AM, Arun Krishnamoorthy
> <arun.k at bridgei2i.com> wrote:
>> Hi,
>> I'm working on the forecast library and am using the auto.arima function
>> with some dummy data
>>
>> Fit<-auto.arima(data_ts, trace=TRUE)
>>
>> I understand that trace evaluates alternative models and provides the
>> corresponding AIC/SIC values with an output that looks like this;
>>
>> ARIMA(2,1,2) with drift ? ? ? ? : 1278.988
>> ?ARIMA(0,1,0) with drift ? ? ? ? : 1281.161
>> ?ARIMA(1,1,0) with drift ? ? ? ? : 1280.325
>> ?ARIMA(0,1,1) with drift ? ? ? ? : 1278.2
>> ?ARIMA(1,1,1) with drift ? ? ? ? : 1280.229
>> ?ARIMA(0,1,2) with drift ? ? ? ? : 1278.824
>> ?ARIMA(1,1,2) with drift ? ? ? ? : 1281.911
>> ?ARIMA(0,1,1) ? ? ? ? ? ? ? ? ? ?: 1277.73
>> ?ARIMA(1,1,1) ? ? ? ? ? ? ? ? ? ?: 1279.804
>> ?ARIMA(0,1,0) ? ? ? ? ? ? ? ? ? ?: 1281.265
>> ?ARIMA(0,1,2) ? ? ? ? ? ? ? ? ? ?: 1278.626
>> ?ARIMA(1,1,2) ? ? ? ? ? ? ? ? ? ?: 1281.64
>>
>> ?Best model: ARIMA(0,1,1)
>>
>> Unfortunately, Trace is not an object and i'm unable to read it in to a
data
>> frame to do further diagnosis.
>>
>> Can someone please help me with how i can get this output into a data
frame.
>> I'm unable to do data.frame since i can't coerce an ARIMA object into
this
>> class.
>>
>> Sorry if this has been addressed before. I just think there may be some
data
>> series where running a closely competing alternative model may be useful
>>
>> Thanks,
>> AK
>>
>> -----Original Message-----
>> From: r-sig-finance-bounces at r-project.org
>> [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Daniel Cegielka
>> Sent: 26 September 2011 17:20
>> To: chrisbird
>> Cc: r-sig-finance at r-project.org
>> Subject: Re: [R-SIG-Finance] Filtering dates/times from zoo/xts series
>>
>> 2011/9/26 chrisbird <chris at chrisbird.com>
>>
>>> Thanks Brian,
>>>
>>> I did try using the ['T09:00/T21:00'] method for extraction but it did
not
>>> return anything - I will reinvestigate this and see if I can get it
>>> working.
>>>
>>>
>> It works... you are sure that the data was ok? Very strange that you have
>> received nothing...
>>
>>> d<-xts(1:25, Sys.time() + 1:25)> d ? ? ? ? ? ? ? ? ? ?[,1]
>> 2011-09-26 13:26:55 ? ?1
>> 2011-09-26 13:26:56 ? ?2
>> 2011-09-26 13:26:57 ? ?3
>> 2011-09-26 13:26:58 ? ?4
>> 2011-09-26 13:26:59 ? ?5
>> 2011-09-26 13:27:00 ? ?6
>> 2011-09-26 13:27:01 ? ?7
>> 2011-09-26 13:27:02 ? ?8
>> 2011-09-26 13:27:03 ? ?9
>> 2011-09-26 13:27:04 ? 10
>> 2011-09-26 13:27:05 ? 11
>> 2011-09-26 13:27:06 ? 12
>> 2011-09-26 13:27:07 ? 13
>> 2011-09-26 13:27:08 ? 14
>> 2011-09-26 13:27:09 ? 15
>> 2011-09-26 13:27:10 ? 16
>> 2011-09-26 13:27:11 ? 17
>> 2011-09-26 13:27:12 ? 18
>> 2011-09-26 13:27:13 ? 19
>> 2011-09-26 13:27:14 ? 20
>> 2011-09-26 13:27:15 ? 21
>> 2011-09-26 13:27:16 ? 22
>> 2011-09-26 13:27:17 ? 23
>> 2011-09-26 13:27:18 ? 24
>> 2011-09-26 13:27:19 ? 25> d["2011-09-26 13:27:00/2011-09-26 13:27:10"]
>> ? ? ? ? ? ? ? ? ? [,1]
>> 2011-09-26 13:27:00 ? ?6
>> 2011-09-26 13:27:01 ? ?7
>> 2011-09-26 13:27:02 ? ?8
>> 2011-09-26 13:27:03 ? ?9
>> 2011-09-26 13:27:04 ? 10
>> 2011-09-26 13:27:05 ? 11
>> 2011-09-26 13:27:06 ? 12
>> 2011-09-26 13:27:07 ? 13
>> 2011-09-26 13:27:08 ? 14
>> 2011-09-26 13:27:09 ? 15
>> 2011-09-26 13:27:10 ? 16> d["T13:27:00/T13:27:10"] ? ? ? ? ? ? ? ? ?
?[,1]
>> 2011-09-26 13:27:00 ? ?6
>> 2011-09-26 13:27:01 ? ?7
>> 2011-09-26 13:27:02 ? ?8
>> 2011-09-26 13:27:03 ? ?9
>> 2011-09-26 13:27:04 ? 10
>> 2011-09-26 13:27:05 ? 11
>> 2011-09-26 13:27:06 ? 12
>> 2011-09-26 13:27:07 ? 13
>> 2011-09-26 13:27:08 ? 14
>> 2011-09-26 13:27:09 ? 15
>> 2011-09-26 13:27:10 ? 16
>>
>>
>>
>>
>>> The processing is not to remove non-trading days/holidays - I do that
>>> elsewhere. I'm doing processing on some complex strategies which use
some
>>> instruments which trade a lot, but not everyday. I only wish to process
>> the
>>> data from liquid days and strip out the less liquid data.
>>>
>>>
>> It's quite a sophisticated approach to data. Probably when you filter
using
>> the time you would have to count the number of observations and does not
>> bind data below a certain level. I have no idea how to do it in an
elegant
>> way.
>>
>> best regards,
>> daniel
>>
>>
>>
>>> I will certainly investigate quantstrat.
>>>
>>> Thanks,
>>>
>>> Chris.
>>>
>>>
>>> --
>>> View this message in context:
>>>
>>
http://r.789695.n4.nabble.com/Filtering-dates-times-from-zoo-xts-series-tp38
>> 42937p3843408.html
>>> Sent from the Rmetrics mailing list archive at Nabble.com.
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>>
>> ? ? ? ?[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
should go.
>>
>
>
>
> --
> Jeffrey Ryan
> jeffrey.ryan at lemnica.com
>
> www.lemnica.com
> www.esotericR.com
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
should go.
>


From Darko.Roupell at cba.com.au  Tue Oct  4 08:25:05 2011
From: Darko.Roupell at cba.com.au (Roupell, Darko)
Date: Tue, 4 Oct 2011 17:25:05 +1100
Subject: [R-SIG-Finance] Quantstrat - applyRule
Message-ID: <E8CC19FC66B5FB46B5511B6E8AE814185B32DDE57E@VAUNSW137.au.cbainet.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111004/7ae907a2/attachment.pl>

From Zeno.Adams at ebs.edu  Tue Oct  4 15:01:38 2011
From: Zeno.Adams at ebs.edu (Adams, Zeno)
Date: Tue, 4 Oct 2011 15:01:38 +0200
Subject: [R-SIG-Finance] Systematic Risk to the Financial System, Economy
In-Reply-To: <CABVYRMCTwfRXhE=Noz8CAASDsti3Ltcf1iwjoj3XahKTt52X1w@mail.gmail.com>
References: <CABVYRMCTwfRXhE=Noz8CAASDsti3Ltcf1iwjoj3XahKTt52X1w@mail.gmail.com>
Message-ID: <9064522880125945B98983BBAECBA1CC02C9CC00@exchsrv001.ebs.local>

David,

I have been recently working on this subject. It seems that the focus has shifted away from "systematic risks" and on to "systemic risk", i.e. the risk that one asset or financial institution in distress causes significant spillovers on other institutions and, perhaps on the entire market. I find the following papers worth reading and believe their methods to be implementable in R:

Brownlees, Christian T. and Engle, Robert F., Volatility, Correlation and Tails for Systemic Risk Measurement (June 1, 2011). Available at SSRN: http://ssrn.com/abstract=1611229

They also have a nice homepage on http://vlab.stern.nyu.edu/welcome/risk


Brunnermeier, K., and Adrian, T. (2011). "CoVaR" http://www.princeton.edu/~markus/research/papers/CoVaR.pdf
This paper is very well known among central bankers and policy makers


Adams, Z., F?ss,R., and Gropp, R. (2011) "Modeling Spillover Effects among Financial Institutions: A State-Dependent-Sensitivity Value-at-Risk Approach" http://www.irmc.eu/public/files/Adams,Fuss,Gropp_Spillover%20effects%20among%20financial%20institutions.pdf


Acharya, Viral V., Pedersen, Lasse Heje, Philippon, Thomas and Richardson, Matthew P., Measuring Systemic Risk (May 2010). AFA 2011 Denver Meetings Paper. Available at SSRN: http://ssrn.com/abstract=1573171

All methods described in these papers may be useful for measuring how close we are to a "doomsday" scenario. The papers also offer some guidance on legislative reforms that would be necessary to prevent big banks from creating systemic risk.

HTH

Zeno

-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of David St John
Sent: Montag, 3. Oktober 2011 15:35
To: r-sig-finance at stat.math.ethz.ch
Subject: [R-SIG-Finance] Systematic Risk to the Financial System, Economy

Dear R-Fin Community,

Has there been any work done since the financial crisis in defining what are
the systematic risks to the financial system, and the economy as a whole, in
certain derivatives positions, securitizing mortgages, excessive leverage,
poor liquidity ala LTCM, etc?  Could I use R, hypothetically, to analyze
past data with respect to a basket of derivatives, to come up with some kind
of measure for how close we are to a 'doomsday' scenario, like a near total
market value meltdown of mortgage backed securities?

I would also very much appreciate anyone willing to message me off list to
explain what legislative or fed policy reforms, if any, could prevent big
banks from creating such risks.  What better perspective on this than an
insider's perspective?

Best,
-David

	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.
-------------- next part --------------
EBS European Business School gemeinnuetzige GmbH, Amtsgericht Wiesbaden HRB 19951; Universitaet fuer Wirtschaft und Recht, Umsatzsteuer-ID DE 113891213; Aufsichtsrat: Dr. Hellmut K. Albrecht, Vorsitzender; Geschaeftsfuehrung: Professor Dr. Rolf D. Cremer, Pr?sident; Professor Dr. Rolf Tilmes, Dekan EBS Business School; Professor Dr. Dr. Gerrick Frhr. v. Hoyningen-Huene, Dekan EBS Law School; Georg Nikolaus Garlichs, Kanzler

From zach.mayer at gmail.com  Tue Oct  4 15:45:17 2011
From: zach.mayer at gmail.com (Zachary Mayer)
Date: Tue, 4 Oct 2011 09:45:17 -0400
Subject: [R-SIG-Finance] Quantstrat - applyRule
In-Reply-To: <E8CC19FC66B5FB46B5511B6E8AE814185B32DDE57E@VAUNSW137.au.cbainet.com>
References: <E8CC19FC66B5FB46B5511B6E8AE814185B32DDE57E@VAUNSW137.au.cbainet.com>
Message-ID: <CAEr64e_50vNMHqJyN901HfR3+uiVEj6QvadMtOSh+=TzVWgWaA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111004/27c63c27/attachment.pl>

From brian at braverock.com  Tue Oct  4 16:07:23 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 04 Oct 2011 09:07:23 -0500
Subject: [R-SIG-Finance] Quantstrat - applyRule
In-Reply-To: <E8CC19FC66B5FB46B5511B6E8AE814185B32DDE57E@VAUNSW137.au.cbainet.com>
References: <E8CC19FC66B5FB46B5511B6E8AE814185B32DDE57E@VAUNSW137.au.cbainet.com>
Message-ID: <1317737243.6600.259.camel@brian-rcg>

On Tue, 2011-10-04 at 17:25 +1100, Roupell, Darko wrote:
> Hi  Peter Carl, Dirk Eddelbuettel, Brian G. Peterson, Jeffrey Ryan, and Joshua Ulrich,

'Dear quantstrat authors' would have been sufficient ;)

> Great work so far on quantstrat.

Thanks, I'm glad you're finding it useful.

> Saying that I would highly appreciate your input on the issue that 
> I came across using quantstrat.
> 
> Namely, it is related to how to handle powerful combination between 
> quantstrat and  genetic algorithm packages in R (eg GALGO etc), 
> to achieve optimal adaptive trading strategy.

I'll certainly agree that parameter optimization is desirable, but we'll
need to come back to a discussion of how to go about adaptive
parameterization of strategies.

> The problem here is that quantstrat already has some performance issues 
> with multiple assets (as per demo example for RSI and 9 stocks) where it
>  can take up to several minutes for applyStrategy function to execute.
> 
> > end_t<-Sys.time()
> > print("Strategy Loop:")
> [1] "Strategy Loop:"
> > print(end_t-start_t)
> Time difference of 6.861233 mins

The RSI demo is about the worst possible torture test for quantstrat
other than tick data, which obviously I can't distribute due to
contracts with data vendors.

First, of course, your mileage may vary regarding execution time:

On a stock i7 machine running at 3.2Ghz with hyperthreading turned on
(so running considerably though variably slower than the rated 3.2GHz),
I get:

> print("Strategy Loop:")
[1] "Strategy Loop:"

> print(end_t-start_t)
Time difference of 2.943595 mins

and on an overclocked 4.13GHz machine with lots of RAM, my time this
morning was under 2 minutes with other stuff going on on that machine as
well.  On the slowest machine that I still have R installed on (a single
2GHz core), it took 11.00175 mins.  So obviously one early step is to
get a faster CPU, optimized single-threaded BLAS, etc.

So, before I continue, I'll go into a bit of *why* the RSI demo is the
most CPU-intensive demo in the package, and what could be done without
changing the package to speed it up.

As is discussed at relative length in the documentation, indicator and
signal generation are non-path-dependent, and should be constructed in a
vectorized (or even compiled) fashion to make them as fast as possible.
They know nothing about positions, transactions, etc, and so can be made
to run quickly.  The *path-dependent* *loop* happens in applyRules
(which is also discussed at length in the documentation). 

Before anyone complains, I'm aware that you could completely vectorize
an OHLC backtest assuming that any High or Low that went through your
target 'limit' price had gotten filled.  If that's your world, great.
It isn't my world.  In my world, we place orders into markets sometimes
involving multiple instruments at once, and act on high-frequency data.
quantstrat works reasonably well and quickly with OHLC data, as the
demos should attest, and gives huge a huge boost in business abstraction
in constructing your strategies.  Even on tick data, we routinely get
under 1 minute per core per day of tick data for our backtests, which
isn't bad at all. (though I am very interested in improving that
further!)

There's nothing we can do about the path-dependent part.  If you want a
reasonably accurate backtest, you need to do this in a path dependent
way. We need to be aware of our current position, prior transactions,
etc.  We need to be stateful, rather than stateless, at this point in
the strategy evaluation.

The RSI demo was constructed to generate a *lot* of signals.  It is
supposed to be a torture test for quantstrat. Inside applyRules (which
will be one of the primary opportunities to speed things up, more on
that later), we create a dimension reduction index ('dindex' in the
code) to cut down the number of places we need to check to see if the
strategy needs to do something.  

You found the reference to the dindex loop in the documentation here:

> #' The solution we've employed makes use of what we know about the strategy and
> #' the orders the strategy places (or may place) to reduce the dimensionality of the problem.


We still need to check every TRUE (or whatever 'sigval' you use) to see
if the strategy needs to do something.  So, one very reasonable approach
to speeding things up s to generate fewer signals.  Make the signals
that you do generate have more value.  Fewer signals leads to a nearly
linear improvement in speed of quantstrat, proportional to the number of
signals.  Adding the dimension reduction index improved performance by
an order of magnitude or more for most strategies.

Next, we get to the loop.  R is pretty awful at loops, as is documented
all over the place.  Eventually, the dindex loop inside applyRules will
probably get rewritten in C or C++, and compiled.  This should save a
lot of time.  Why haven't we done this already?  Two reasons: 

1> I'm not sure the logic is done/mature/stable yet.
As soon as that loop is rewritten in C/C++, it gets a lot harder to
modify the logic.  R is very simple to work in, being a scripting
language.  C/C++ both have more overhead regarding allocation, logic,
teardown, and communication to R.  So it doesn't necessarily make a lot
of sense to rewrite in a compiled language until we're pretty happy with
the logic of how things are working.

2> No one has volunteered and supplied patches which do this.
We'd really like someone to do that, pretty please?  With a pony on top?
All of the authors of quantstrat work professionally in financial
services. We have deadlines, portfolios, P&L's, and staff members to
take care of before writing open source code.  I use quantstrat nearly
every day in my 'day job', and in fact created it to improve my
productivity, which it has done.  That doesn't mean I have a ton of time
to improve the infrastructure, unless I'm doing so to solve a problem I
am having right now on a real strategy or portfolio.  

So now, if we've reduced our signals as much as is reasonable, and can't
do anything additional to the loop for now, what can we do to speed
things up?

*Use more cores.*
If you look at the applyParamenter function, which was helpfully
contributed to quantstrat by Yu Chen this summer as part of his GSoC
project, you'll see that he uses foreach to parallelize execution of
parameter sets.  This will be useful in your genetic algorithm
investigations, as we'll see.  For now, it should suffice to say that in
normal use, I tend to use a foreach loop on a cluster to give each
worker node one symbol to work on.  This give nearly linear speedup by
number of cores/workers applied.  applyParameter contains some
additional cleanup code to bring everything back together, but I have
written many wrappers for production strategies that utilize foreach to
split up the problem into massively parallel bits, and run each of these
on a separate worker.
 
> Logically adding genetic algorithim wrapper function to test the result 
> with multiple variation of parameters for each indicator and for each 
> asset further impacts performance. ( In my case with passing initial 
> population of 50 and max iteration of 100 it was still running after 
> 1.5 hour when stopped R).

You haven't provided a reproducible example, so I can't comment on what
you're doing in any detail.  Please *do* post a reproducible example.

I'll comment in general instead.

On a production portfolio of six main strategies and several thousand
total strategy configs, our monthly strategy parameter optimization run
took about three days on a cluster of machines.  On a different strategy
the weekly parameter optimization took most of the weekend running on 24
cores.  quantstrat is faster now than it was then, but this should be
indicative that simply waiting 1.5 hours may not be enough.

I think that we will require more effort to understand what you're
trying to accomplish.  Yu's GSoC project ended before we could
incorporate a genetic algorithm (we would likely have used DEoptim, and
I couldn't find a link to a recent/current version of GALGO this
morning[1]).  One challenge here is the definition of an objective
function.  

What is the correct objective for an 'optimal' parameter configuration?
max Total.Realized.PL ?
min maxDrawdown       ?
max Sharpe Ratio      ?

or more likely, some arbitrary, layered, and changeable combination of
the above and some others.

This is an example of 'multi-objective optimization', and is far from a
trivial thing to get right.  The two most referenced approaches are: 

1> utilization of a penalized objective function
This is the approach I've taken in our PortfolioAnalytics package, where
we allow the user to construct an arbitrary layered objective, and apply
reasonable but changeable defaults to penalization.  It works pretty
well in the weights-based world of portfolio optimization, but I haven't
had the time to work on creating a penalized objective function for
quantstrat parameter optimization.  

2> utilization of a Pareto-optimal shrinkage frontier.
This approach will be much more complicated, and involves creating some
proxy function of the multi-objective space.  I think it is extremely
promising, and is covered in depth in the book 'Adaptive Differential
Evolution' by Zhang and Sanderson[2].

This would be a great area for new contributions to quantstrat from you
or some other reader of R-SIG-Finance, as it is unlikely I will have the
time necessary to devote to a generalized implementation any time soon.

> It's worth of saying that GALGO works efficiently fast on its own (eg 20-30 
> sec per asset) outside quantstrat if applied on Sharp Ratio or simplistic 
> return calcs, but there are some great benefits of trying to incorporate it quantstrat.

Agreed.  I think that the initial approach here will likely be similar
to the one that I used in PortfolioAnalytics, where we would create an
objective function, and then use code derived from the parallel version
of applyParameter to split things up into non-overlapping chunks.

> Coming back to demo example for RSI it appears that it takes up to 45 seconds 
> per stock to do calculations from 2007 to 2011. With applyStrategy and applyRules 
> being the largest drag on performance. 

Correct (see the documentation and above)

> I noticed that setting path.dep to FALSE can improve performance but its fair 
> to say that most of strategies I test are path-dependant.

I think it is a fair statement that most strategies are path dependent.
I included the option to do things in a non-path dependent way because
for some strategies it may make sense to write a rule function that
simply evaluates signals and generates transactions directly which would
not need to be path dependent, but that will likely be a custom rule
function for just one strat, not a more general solution.

> The question here is do you for your own perusal re-write applyStrategy and 
> applyRule function to get rid [of] parts that slow down its execution and may be 
> unnecessary?

No.  I use them as written, and speed them up as I have a chance.
This was the genesis of dindex, and some other optimizations done by
myself or Josh Ulrich at various points in time.

The ruleSignal function was written as an example.  I assumed that we
would write custom rule functions for all our 'real' strategies.  That
hasn't turned out to be the case, we find that we wrtie custom indicator
functions and custom signal functions, but typically use ruleSignal to
evaluate them.  There's probably an opportunity to optimize performance
in ruleSignal, though I haven't looked at this.

It seems that you've already done some profiling on the code.  This will
be the main tool for further improvements.  patches always welcome.

> Or
> Any optimization of indicator parameters you do outside of quantstrat (blotter) 
> and apply quantstrat only on optimized parameters?

See
?applyParameter

This function (and all of the parameter testing code) are brand new, and
need further refinement.  Today, we have methods only for brute force
and random selection of parameters.  some genetic algorithm would be
great, but we need an objective function. 


> To end without thank you for hard work on quantstrat, would be totally 
> unfair as it has so many benefits for so many of us.

Thanks.  We certainly appreciate the acknowledgement.

> At the same token it would be pointless to embark on endeavour to re-invent the 
> wheel, but rather to look on ways to look for ways to improve performance 
> of applyStrategy function.

I agree completely.  We want to improve what we have, not start over, as
this is already the (current) culmination of several years of work.

> Looking forward to your feedback.

I am Looking forward to your continued input and contributions!

Regards,

   - Brian

References:
[1] http://bioinformatica.mty.itesm.mx/?q=galgo2
    http://bioinformatics.oxfordjournals.org/content/22/9/1154.full  
    (second reference contains broken link to package)

[2] Adaptive Differential Evolution: A Robust Approach to Multimodal
Problem Optimization
Jingqiao Zhang and Arthur C. Sanderson 
http://www.amazon.com/Adaptive-Differential-Evolution-Multimodal-Optimization/dp/3642015263/

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From noahsilverman at ucla.edu  Tue Oct  4 21:42:06 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Tue, 4 Oct 2011 12:42:06 -0700
Subject: [R-SIG-Finance] Order status from IBrokers?
Message-ID: <FB56AEEB-6984-4D1F-AA44-3B2870742374@ucla.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111004/88bc3311/attachment.pl>

From William.Alpert at barrons.com  Tue Oct  4 21:58:58 2011
From: William.Alpert at barrons.com (Alpert, William)
Date: Tue, 4 Oct 2011 15:58:58 -0400
Subject: [R-SIG-Finance] Internship Opportunity at New York financial weekly
Message-ID: <02BF89F8F8F5434281FB674D2BC513C361A44CB08B@SBKMXSMB09.win.dowjones.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111004/a582f7d0/attachment.pl>

From kent.russell at live.com  Wed Oct  5 03:29:40 2011
From: kent.russell at live.com (Kenton Russell)
Date: Tue, 4 Oct 2011 20:29:40 -0500
Subject: [R-SIG-Finance] Systematic Risk to the Financial System, Economy
In-Reply-To: <9064522880125945B98983BBAECBA1CC02C9CC00@exchsrv001.ebs.local>
References: <CABVYRMCTwfRXhE=Noz8CAASDsti3Ltcf1iwjoj3XahKTt52X1w@mail.gmail.com>,
	<9064522880125945B98983BBAECBA1CC02C9CC00@exchsrv001.ebs.local>
Message-ID: <COL124-W46A881062CC2BA119D0674FBF80@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111004/fe5fbb79/attachment.pl>

From rhelpacc at gmail.com  Wed Oct  5 05:41:06 2011
From: rhelpacc at gmail.com (Robert A'gata)
Date: Tue, 4 Oct 2011 23:41:06 -0400
Subject: [R-SIG-Finance] AsOf join in R
Message-ID: <CAA7=MyUyuN1qt-8rpsetu5vz7D3MNwDZ1RDvUynkX7jLwRXzow@mail.gmail.com>

Hi,

I tried to google for any solution for asof join operator in R. But I
couldn't find one. The asof join operator AsOf(A,B) merges 2 time
series by looking for latest available value of B prior to each time
point in A. For example,

A <- xts(c(10,15,20,25),
order.by=as.POSIXct(c("2011-09-01","2011-09-09","2011-09-10","2011-09-15"))

B <- xts(c(1.1,1.5,1.3,1.7),
order.by=as.POSIXct(c("2011-08-31","2011-09-09","2011-09-11","2011-09-12"))

AsOf(A,B) should return

                    A       B
2011-09-01    10     1.1
2011-09-09    15     1.1     #  (because latest value B prior to
2011-09-09 is 1.1)
2011-09-10    20     1.5
2011-09-15    25     1.7

How do I write the above AsOf function in R? The merge function does
not do what I want because it will align points that have the same
time stamp together while what I want is actually latest value prior
to timestamp in A. Any example would be greatly appreciated. Thank
you.

Cheers,

Robert


From brian at braverock.com  Wed Oct  5 12:21:34 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 5 Oct 2011 05:21:34 -0500
Subject: [R-SIG-Finance] AsOf join in R
In-Reply-To: <CAA7=MyUyuN1qt-8rpsetu5vz7D3MNwDZ1RDvUynkX7jLwRXzow@mail.gmail.com>
References: <CAA7=MyUyuN1qt-8rpsetu5vz7D3MNwDZ1RDvUynkX7jLwRXzow@mail.gmail.com>
Message-ID: <1317810094.4192.316.camel@brian-desktop>

On Tue, 2011-10-04 at 23:41 -0400, Robert A'gata wrote:
> AsOf(A,B) should return
> 
>                     A       B
> 2011-09-01    10     1.1
> 2011-09-09    15     1.1     #  (because latest value B prior to
> 2011-09-09 is 1.1)
> 2011-09-10    20     1.5
> 2011-09-15    25     1.7
> 
> How do I write the above AsOf function in R? The merge function does
> not do what I want because it will align points that have the same
> time stamp together while what I want is actually latest value prior
> to timestamp in A. Any example would be greatly appreciated. Thank
> you. 

A <- xts(c(10,15,20,25),
order.by=as.POSIXct(c("2011-09-01","2011-09-09","2011-09-10","2011-09-15")))
B <- xts(c(1.1,1.5,1.3,1.7),
order.by=as.POSIXct(c("2011-08-31","2011-09-09","2011-09-11","2011-09-12")))
AsOf<-function(a,b) {
   x<-cbind(a,b) 
   x[,2]<-na.locf(x[,2]) 
   x[!is.na(x[,1])] 
}
AsOf(A,B)

#####################
#           ..1 ..2
#2011-09-01  10 1.1
#2011-09-09  15 1.5
#2011-09-10  20 1.5
#2011-09-15  25 1.7
#####################


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From megh700004 at yahoo.com  Wed Oct  5 21:14:47 2011
From: megh700004 at yahoo.com (Megh Dal)
Date: Wed, 5 Oct 2011 12:14:47 -0700
Subject: [R-SIG-Finance] A question on volatility
Message-ID: <1317842087.27000.YahooMailNeo@web161816.mail.bf1.yahoo.com>

Dear all, I was trying to understand the correlation among the?volatilities?in different financial market, however am in dilemma what could be the rightful and acceptable-to-everyone approach. I thought to estimate the volatilities of?individual?markets using some GARCH modeling, then just calculate the correlation coefficient on the estimated time series of estimated daily volatilities.?

Is it correct approach to understand the correlation? Can somebody point me any online paper or any idea on the same?

Thanks for your time.


From paulring at microsoft.com  Wed Oct  5 22:10:46 2011
From: paulring at microsoft.com (Paul Ringseth)
Date: Wed, 5 Oct 2011 20:10:46 +0000
Subject: [R-SIG-Finance] A question on volatility
In-Reply-To: <1317842087.27000.YahooMailNeo@web161816.mail.bf1.yahoo.com>
References: <1317842087.27000.YahooMailNeo@web161816.mail.bf1.yahoo.com>
Message-ID: <A682FFE47602644E9D3DEECDD6F83297027863@SN2PRD0302MB136.namprd03.prod.outlook.com>

Hi:

You really need to jointly estimate the correlations with the variances.  The easiest technique (but not the best) is Orthogonal GARCH from Carl Alexander's papers (http://www.carolalexander.org/publish/download/DiscussionPapers/OrthogonalGARCH_Primer.pdf ).  Recently Engle has recommended a factor DCC-GARCH variant using a heuristic, he calls the MacGyver technique, for large covariance matrices (http://papers.ssrn.com/sol3/papers.cfm?abstract_id=1293628 ).    Then Engle, Shephard and Sheppard came up with an exceptionally interesting technique for fitting all parameters in any large covariance matrix http://www.economics.ox.ac.uk/Research/wp/pdf/paper403.pdf -- the estimator is essentially the sum of the quasi-MLE's of all pairs.  Also you should check out Engle's new book -- Anticipating Correlations ( http://press.princeton.edu/titles/8768.html ).    

Whatever you end up doing, you should backtest and compare to published results, for example at Engle's volatility lab -- http://vlab.stern.nyu.edu/analysis .

But as long as the dimensionality of the desired correlation / covariance matrix is not too large ( <= 16 should be ok ), a straightforward DCC-GARCH fit should work.  Here's some R code:

http://www.r-project.org/conferences/useR-2008/slides/Nakatani.pdf 

Cheers -- Paul

-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Megh Dal
Sent: Wednesday, October 05, 2011 12:15 PM
To: r-sig-finance at stat.math.ethz.ch
Subject: [R-SIG-Finance] A question on volatility

Dear all, I was trying to understand the correlation among the?volatilities?in different financial market, however am in dilemma what could be the rightful and acceptable-to-everyone approach. I thought to estimate the volatilities of?individual?markets using some GARCH modeling, then just calculate the correlation coefficient on the estimated time series of estimated daily volatilities.?

Is it correct approach to understand the correlation? Can somebody point me any online paper or any idea on the same?

Thanks for your time.

_______________________________________________
R-SIG-Finance at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From patrick at burns-stat.com  Wed Oct  5 22:39:07 2011
From: patrick at burns-stat.com (Patrick Burns)
Date: Wed, 05 Oct 2011 21:39:07 +0100
Subject: [R-SIG-Finance] A question on volatility
In-Reply-To: <A682FFE47602644E9D3DEECDD6F83297027863@SN2PRD0302MB136.namprd03.prod.outlook.com>
References: <1317842087.27000.YahooMailNeo@web161816.mail.bf1.yahoo.com>
	<A682FFE47602644E9D3DEECDD6F83297027863@SN2PRD0302MB136.namprd03.prod.outlook.com>
Message-ID: <4E8CC06B.9070803@burns-stat.com>

Paul,

If my understanding of Megh's question is correct,
then you've misinterpreted it.  I think the
correlations that are being sought are the correlations
between the volatilities of the assets, not the
correlations of the asset returns.

In any case, I'll attempt to give a bit of an answer
to the question as I understand it.

I'm uneasy about correlation of volatilities because
they are quite skewed.  Certainly favor rank correlations
over Pearson correlation.

Somewhere in Engle's body of work is a paper (or more)
on the transmission of volatility.  I don't recall
at all what the technique was, and vaguely remember
it being a mildly satisfying answer.

On 05/10/2011 21:10, Paul Ringseth wrote:
> Hi:
>
> You really need to jointly estimate the correlations with the variances.  The easiest technique (but not the best) is Orthogonal GARCH from Carl Alexander's papers (http://www.carolalexander.org/publish/download/DiscussionPapers/OrthogonalGARCH_Primer.pdf ).  Recently Engle has recommended a factor DCC-GARCH variant using a heuristic, he calls the MacGyver technique, for large covariance matrices (http://papers.ssrn.com/sol3/papers.cfm?abstract_id=1293628 ).    Then Engle, Shephard and Sheppard came up with an exceptionally interesting technique for fitting all parameters in any large covariance matrix http://www.economics.ox.ac.uk/Research/wp/pdf/paper403.pdf -- the estimator is essentially the sum of the quasi-MLE's of all pairs.  Also you should check out Engle's new book -- Anticipating Correlations ( http://press.princeton.edu/titles/8768.html ).
>
> Whatever you end up doing, you should backtest and compare to published results, for example at Engle's volatility lab -- http://vlab.stern.nyu.edu/analysis .
>
> But as long as the dimensionality of the desired correlation / covariance matrix is not too large (<= 16 should be ok ), a straightforward DCC-GARCH fit should work.  Here's some R code:
>
> http://www.r-project.org/conferences/useR-2008/slides/Nakatani.pdf
>
> Cheers -- Paul
>
> -----Original Message-----
> From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Megh Dal
> Sent: Wednesday, October 05, 2011 12:15 PM
> To: r-sig-finance at stat.math.ethz.ch
> Subject: [R-SIG-Finance] A question on volatility
>
> Dear all, I was trying to understand the correlation among the volatilities in different financial market, however am in dilemma what could be the rightful and acceptable-to-everyone approach. I thought to estimate the volatilities of individual markets using some GARCH modeling, then just calculate the correlation coefficient on the estimated time series of estimated daily volatilities.
>
> Is it correct approach to understand the correlation? Can somebody point me any online paper or any idea on the same?
>
> Thanks for your time.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From ezivot at u.washington.edu  Wed Oct  5 22:53:25 2011
From: ezivot at u.washington.edu (Eric Zivot)
Date: Wed, 5 Oct 2011 13:53:25 -0700
Subject: [R-SIG-Finance] A question on volatility
In-Reply-To: <4E8CC06B.9070803@burns-stat.com>
References: <1317842087.27000.YahooMailNeo@web161816.mail.bf1.yahoo.com>	<A682FFE47602644E9D3DEECDD6F83297027863@SN2PRD0302MB136.namprd03.prod.outlook.com>
	<4E8CC06B.9070803@burns-stat.com>
Message-ID: <003d01cc83a0$d4563fd0$7d02bf70$@washington.edu>

I agree with Pat. Time varying correlations in a multivariate GARCH model
are different from the correlations between volatility series. Because
volatility is "unobservable" (i.e, except for special cases like the VIX)
and derived measures like implied volatility are model based (e.g. derived
from Black-Scholes) it is not straightforward to define and measure
correlations between volatilities. One model-based approach in which
volatility is a random variable is the stochastic volatility model. One can
build multivariate models in which the correlation to volatility shocks is
parameterized (but this is not the correlation between volatilities). GARCH
models produce very noisy estimate of volatility and so the correlations
computed from GARCH volatilities are likely to be very  noisy as well. A
better approach would be to compute volatilities using intra-day high
frequency data (e.g. realized volatility) - see the realized package. This
would give you much more precise estimates of volatility. Then the problem
would be to model the correlation between the observed volatilities. For
example, simple EWMAs. One could even consider a simple vector
autoregressive model for a multi-variate time series of volatilities. This
is what Andersen, Bollerslev, Diebold and Labys did in their Econometrica
paper. One potential problem is that the realized volatility series tend to
be non-stationary. Just some thoughts.

-----Original Message-----
From: r-sig-finance-bounces at r-project.org
[mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Patrick Burns
Sent: Wednesday, October 05, 2011 1:39 PM
To: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] A question on volatility

Paul,

If my understanding of Megh's question is correct,
then you've misinterpreted it.  I think the
correlations that are being sought are the correlations
between the volatilities of the assets, not the
correlations of the asset returns.

In any case, I'll attempt to give a bit of an answer
to the question as I understand it.

I'm uneasy about correlation of volatilities because
they are quite skewed.  Certainly favor rank correlations
over Pearson correlation.

Somewhere in Engle's body of work is a paper (or more)
on the transmission of volatility.  I don't recall
at all what the technique was, and vaguely remember
it being a mildly satisfying answer.

On 05/10/2011 21:10, Paul Ringseth wrote:
> Hi:
>
> You really need to jointly estimate the correlations with the variances.
The easiest technique (but not the best) is Orthogonal GARCH from Carl
Alexander's papers
(http://www.carolalexander.org/publish/download/DiscussionPapers/OrthogonalG
ARCH_Primer.pdf ).  Recently Engle has recommended a factor DCC-GARCH
variant using a heuristic, he calls the MacGyver technique, for large
covariance matrices
(http://papers.ssrn.com/sol3/papers.cfm?abstract_id=1293628 ).    Then
Engle, Shephard and Sheppard came up with an exceptionally interesting
technique for fitting all parameters in any large covariance matrix
http://www.economics.ox.ac.uk/Research/wp/pdf/paper403.pdf -- the estimator
is essentially the sum of the quasi-MLE's of all pairs.  Also you should
check out Engle's new book -- Anticipating Correlations (
http://press.princeton.edu/titles/8768.html ).
>
> Whatever you end up doing, you should backtest and compare to published
results, for example at Engle's volatility lab --
http://vlab.stern.nyu.edu/analysis .
>
> But as long as the dimensionality of the desired correlation / covariance
matrix is not too large (<= 16 should be ok ), a straightforward DCC-GARCH
fit should work.  Here's some R code:
>
> http://www.r-project.org/conferences/useR-2008/slides/Nakatani.pdf
>
> Cheers -- Paul
>
> -----Original Message-----
> From: r-sig-finance-bounces at r-project.org
[mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Megh Dal
> Sent: Wednesday, October 05, 2011 12:15 PM
> To: r-sig-finance at stat.math.ethz.ch
> Subject: [R-SIG-Finance] A question on volatility
>
> Dear all, I was trying to understand the correlation among the
volatilities in different financial market, however am in dilemma what could
be the rightful and acceptable-to-everyone approach. I thought to estimate
the volatilities of individual markets using some GARCH modeling, then just
calculate the correlation coefficient on the estimated time series of
estimated daily volatilities.
>
> Is it correct approach to understand the correlation? Can somebody point
me any online paper or any idea on the same?
>
> Thanks for your time.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
should go.
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.


From paulring at microsoft.com  Thu Oct  6 00:41:01 2011
From: paulring at microsoft.com (Paul Ringseth)
Date: Wed, 5 Oct 2011 22:41:01 +0000
Subject: [R-SIG-Finance] A question on volatility
In-Reply-To: <003d01cc83a0$d4563fd0$7d02bf70$@washington.edu>
References: <1317842087.27000.YahooMailNeo@web161816.mail.bf1.yahoo.com>
	<A682FFE47602644E9D3DEECDD6F83297027863@SN2PRD0302MB136.namprd03.prod.outlook.com>
	<4E8CC06B.9070803@burns-stat.com>
	<003d01cc83a0$d4563fd0$7d02bf70$@washington.edu>
Message-ID: <A682FFE47602644E9D3DEECDD6F832970279E7@SN2PRD0302MB136.namprd03.prod.outlook.com>

Yeah, you're all probably right.  But corr of vols are 4-th moment components.  I wouldn't think you could get anything meaningful from just returns time series.  If you could compare markets that trade variance swaps, then it's reasonable -- though you'd want to use on-the-run prices to prevent too much implicit vol bias.  But I think you still get good calibration by incorporating derivative prices -- work by Carr and Madan et al  shows that the usual time-conditional expectation of most reasonable functions of an underlying security can be represented as a (continuous) sum of European options on the same underlying.  I'd assume a Bayesian model here and calibrate using an adaptive MCMC, like Holenstein & Doucet's particle MCMC (viz.,  using a particle filter/learning pass to estimate the proposal distribution for Metropolis-Hastings.)   Perhaps, instead of assuming a multivariate stochastic vol model to be calibrated, I think I might want to represent vector variance as a dynamic latent factor model -- observables could be traded variance swaps, Carr and Madan estimates from traded options and as Eric mentioned realized variance along the lines of Anderson et al.   Maybe try using a Gaussian process variant -- treed GPs for a clean non-parametric, non-stationary regression?  Or I don't know, perhaps a mitigation for non-stationarity could be a decomposition into cointegrated factors along the lines of http://ba.stat.cmu.edu/journal/2010/vol05/issue03/peters.pdf .    Damn -- I'm having too much fun here, I want to do it myself now.   And I'm getting way too far away from reality and I'm fairly new to this area.  ;-)   

But I have a question.  Assuming a straight returns time series approach using intraday etc., wouldn't you still need to do a multivariate covariance model?  The univariate time series will be correlated and therefore wouldn't independent calibration introduce significant error into any subsequent 4-moment calculation?  

Cheers -- Paul

-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Eric Zivot
Sent: Wednesday, October 05, 2011 1:53 PM
To: 'Patrick Burns'; r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] A question on volatility

I agree with Pat. Time varying correlations in a multivariate GARCH model are different from the correlations between volatility series. Because volatility is "unobservable" (i.e, except for special cases like the VIX) and derived measures like implied volatility are model based (e.g. derived from Black-Scholes) it is not straightforward to define and measure correlations between volatilities. One model-based approach in which volatility is a random variable is the stochastic volatility model. One can build multivariate models in which the correlation to volatility shocks is parameterized (but this is not the correlation between volatilities). GARCH models produce very noisy estimate of volatility and so the correlations computed from GARCH volatilities are likely to be very  noisy as well. A better approach would be to compute volatilities using intra-day high frequency data (e.g. realized volatility) - see the realized package. This would give you much more precise estimates of volatility. Then the problem would be to model the correlation between the observed volatilities. For example, simple EWMAs. One could even consider a simple vector autoregressive model for a multi-variate time series of volatilities. This is what Andersen, Bollerslev, Diebold and Labys did in their Econometrica paper. One potential problem is that the realized volatility series tend to be non-stationary. Just some thoughts.

-----Original Message-----
From: r-sig-finance-bounces at r-project.org
[mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Patrick Burns
Sent: Wednesday, October 05, 2011 1:39 PM
To: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] A question on volatility

Paul,

If my understanding of Megh's question is correct, then you've misinterpreted it.  I think the correlations that are being sought are the correlations between the volatilities of the assets, not the correlations of the asset returns.

In any case, I'll attempt to give a bit of an answer to the question as I understand it.

I'm uneasy about correlation of volatilities because they are quite skewed.  Certainly favor rank correlations over Pearson correlation.

Somewhere in Engle's body of work is a paper (or more) on the transmission of volatility.  I don't recall at all what the technique was, and vaguely remember it being a mildly satisfying answer.

On 05/10/2011 21:10, Paul Ringseth wrote:
> Hi:
>
> You really need to jointly estimate the correlations with the variances.
The easiest technique (but not the best) is Orthogonal GARCH from Carl Alexander's papers (http://www.carolalexander.org/publish/download/DiscussionPapers/OrthogonalG
ARCH_Primer.pdf ).  Recently Engle has recommended a factor DCC-GARCH variant using a heuristic, he calls the MacGyver technique, for large covariance matrices
(http://papers.ssrn.com/sol3/papers.cfm?abstract_id=1293628 ).    Then
Engle, Shephard and Sheppard came up with an exceptionally interesting technique for fitting all parameters in any large covariance matrix http://www.economics.ox.ac.uk/Research/wp/pdf/paper403.pdf -- the estimator is essentially the sum of the quasi-MLE's of all pairs.  Also you should check out Engle's new book -- Anticipating Correlations ( http://press.princeton.edu/titles/8768.html ).
>
> Whatever you end up doing, you should backtest and compare to 
> published
results, for example at Engle's volatility lab -- http://vlab.stern.nyu.edu/analysis .
>
> But as long as the dimensionality of the desired correlation / 
> covariance
matrix is not too large (<= 16 should be ok ), a straightforward DCC-GARCH fit should work.  Here's some R code:
>
> http://www.r-project.org/conferences/useR-2008/slides/Nakatani.pdf
>
> Cheers -- Paul
>
> -----Original Message-----
> From: r-sig-finance-bounces at r-project.org
[mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Megh Dal
> Sent: Wednesday, October 05, 2011 12:15 PM
> To: r-sig-finance at stat.math.ethz.ch
> Subject: [R-SIG-Finance] A question on volatility
>
> Dear all, I was trying to understand the correlation among the
volatilities in different financial market, however am in dilemma what could be the rightful and acceptable-to-everyone approach. I thought to estimate the volatilities of individual markets using some GARCH modeling, then just calculate the correlation coefficient on the estimated time series of estimated daily volatilities.
>
> Is it correct approach to understand the correlation? Can somebody 
> point
me any online paper or any idea on the same?
>
> Thanks for your time.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R 
> questions
should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R 
> questions
should go.
>

--
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe

_______________________________________________
R-SIG-Finance at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

_______________________________________________
R-SIG-Finance at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From rhelpacc at gmail.com  Thu Oct  6 03:08:06 2011
From: rhelpacc at gmail.com (Robert A'gata)
Date: Wed, 5 Oct 2011 21:08:06 -0400
Subject: [R-SIG-Finance] AsOf join in R
In-Reply-To: <E8CC19FC66B5FB46B5511B6E8AE814185B3318D0C4@VAUNSW137.au.cbainet.com>
References: <CAA7=MyUyuN1qt-8rpsetu5vz7D3MNwDZ1RDvUynkX7jLwRXzow@mail.gmail.com>
	<E8CC19FC66B5FB46B5511B6E8AE814185B3318D0C4@VAUNSW137.au.cbainet.com>
Message-ID: <CAA7=MyVVL31gE3KUjduO8NVkuKM5wViYA7gOg4QU9sTgdyJS5Q@mail.gmail.com>

Hi Roupell,

Yes I am aware of RTAQ function matchTradesQuotes. But my time series
does not follow the TAQ format like they suggest. So I gave it a try
and find that it doesn't work. In particular, my time series contain
full level 2 order book and trades. I want to do asof join of the book
to the trade. Is there any better way? Or I misunderstand anything
about the RTAQ's function? Thank you.

Robert

On Wed, Oct 5, 2011 at 1:59 AM, Roupell, Darko <Darko.Roupell at cba.com.au> wrote:
> na.locf {zoo}, should do a job, also if you look in RTAQ they wrote a function that looks on previous tick and carries forward value in case its not available.
>
> __________________________________________________
> Commonwealth Bank
> Darko Roupell
> Associate Quantitative Analyst
> Institutional Banking & Markets
> Equities Research
> Darling Park Tower 1
> Level 23, 201 Sussex Street
> Sydney, NSW 200
> P: ?+61 2 9117 1254
> F: ?+61 2 9118 1000
> M: +61 400 170 515
> E: Darko.Roupell at cba.com.au
> Our vision is to be Australia's finest financial services organisation through excelling in customer service.
>
> Email Security
> This email is sent solely for informational purposes. Hoax emails, commonly referred to as phishing, can appear to be from the Commonwealth Bank and ask you to update or confirm details such as client numbers, passwords, personal identification questions, contact details or account numbers. The Commonwealth Bank will never send you an email asking you to confirm, update or reveal your confidential banking information.
> Important Information
> Produced by Global Markets Research, a business unit of Commonwealth Bank of Australia ABN 48 123 123 124 - AFSL 234945 (Commonwealth Bank). This publication is based on information available at the time of publishing.? We believe that the information in this communication is correct and any opinions, conclusions or recommendations are reasonably held or made as at the time of its compilation, but no warranty is made as to accuracy, reliability or completeness.? To the extent permitted by law, neither Commonwealth Bank nor any of its subsidiaries accept liability to any person for loss or damage arising from the use of this communication. This communication does not purport to be a complete statement or summary.
> The information provided has been prepared without considering your objectives, financial situation or needs, and before acting on the information, you should consider its appropriateness to your circumstances. No person should act on the basis of this report without considering and if necessary taking appropriate professional advice upon their own particular circumstances.
> Commonwealth Bank of Australia, as a provider of investment, borrowing and other financial services undertakes financial transactions with many corporate entities in Australia. This may include any corporate issuer referred to in this communication. Commonwealth Bank and its subsidiaries have effected or may effect transactions for their own account in any investments or related investments referred to herein. In the case of certain securities Commonwealth Bank is or may be the only market maker.
>
> -----Original Message-----
> From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Robert A'gata
> Sent: Wednesday, 5 October 2011 2:41 PM
> To: r-help at r-project.org; r-sig-finance at stat.math.ethz.ch
> Subject: [R-SIG-Finance] AsOf join in R
>
> Hi,
>
> I tried to google for any solution for asof join operator in R. But I
> couldn't find one. The asof join operator AsOf(A,B) merges 2 time
> series by looking for latest available value of B prior to each time
> point in A. For example,
>
> A <- xts(c(10,15,20,25),
> order.by=as.POSIXct(c("2011-09-01","2011-09-09","2011-09-10","2011-09-15"))
>
> B <- xts(c(1.1,1.5,1.3,1.7),
> order.by=as.POSIXct(c("2011-08-31","2011-09-09","2011-09-11","2011-09-12"))
>
> AsOf(A,B) should return
>
> ? ? ? ? ? ? ? ? ? ?A ? ? ? B
> 2011-09-01 ? ?10 ? ? 1.1
> 2011-09-09 ? ?15 ? ? 1.1 ? ? # ?(because latest value B prior to
> 2011-09-09 is 1.1)
> 2011-09-10 ? ?20 ? ? 1.5
> 2011-09-15 ? ?25 ? ? 1.7
>
> How do I write the above AsOf function in R? The merge function does
> not do what I want because it will align points that have the same
> time stamp together while what I want is actually latest value prior
> to timestamp in A. Any example would be greatly appreciated. Thank
> you.
>
> Cheers,
>
> Robert
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
> ************** IMPORTANT MESSAGE *****************************
> This e-mail message is intended only for the addressee(s) and contains information which may be
> confidential.
> If you are not the intended recipient please advise the sender by return email, do not use or
> disclose the contents, and delete the message and any attachments from your system. Unless
> specifically indicated, this email does not constitute formal advice or commitment by the sender
> or the Commonwealth Bank of Australia (ABN 48 123 123 124) or its subsidiaries.
> We can be contacted through our web site: commbank.com.au.
> If you no longer wish to receive commercial electronic messages from us, please reply to this
> e-mail by typing Unsubscribe in the subject line.
> **************************************************************
>
>
>
>


From rhelpacc at gmail.com  Thu Oct  6 03:11:05 2011
From: rhelpacc at gmail.com (Robert A'gata)
Date: Wed, 5 Oct 2011 21:11:05 -0400
Subject: [R-SIG-Finance] AsOf join in R
In-Reply-To: <1317810094.4192.316.camel@brian-desktop>
References: <CAA7=MyUyuN1qt-8rpsetu5vz7D3MNwDZ1RDvUynkX7jLwRXzow@mail.gmail.com>
	<1317810094.4192.316.camel@brian-desktop>
Message-ID: <CAA7=MyXggr-MH7=Y-NeqRqenVZS8yhNzoOAgPHUqq=D4p5+Y1w@mail.gmail.com>

Hi Brian,

Thanks for getting back. I'm afraid it's not doing what I intend. If
you see value of B after asof join on 2011-09-09, cbind and na.locf
will give you 1.5 as opposed to 1.1. I would like to have latest value
available prior to 2011-09-09 from B which will be 1.1 on 2011-09-09.
It's a strict inquality for this operation. Would you have any other
recommendation? Thank you again.

Robert.

On Wed, Oct 5, 2011 at 6:21 AM, Brian G. Peterson <brian at braverock.com> wrote:
> On Tue, 2011-10-04 at 23:41 -0400, Robert A'gata wrote:
>> AsOf(A,B) should return
>>
>> ? ? ? ? ? ? ? ? ? ? A ? ? ? B
>> 2011-09-01 ? ?10 ? ? 1.1
>> 2011-09-09 ? ?15 ? ? 1.1 ? ? # ?(because latest value B prior to
>> 2011-09-09 is 1.1)
>> 2011-09-10 ? ?20 ? ? 1.5
>> 2011-09-15 ? ?25 ? ? 1.7
>>
>> How do I write the above AsOf function in R? The merge function does
>> not do what I want because it will align points that have the same
>> time stamp together while what I want is actually latest value prior
>> to timestamp in A. Any example would be greatly appreciated. Thank
>> you.
>
> A <- xts(c(10,15,20,25),
> order.by=as.POSIXct(c("2011-09-01","2011-09-09","2011-09-10","2011-09-15")))
> B <- xts(c(1.1,1.5,1.3,1.7),
> order.by=as.POSIXct(c("2011-08-31","2011-09-09","2011-09-11","2011-09-12")))
> AsOf<-function(a,b) {
> ? x<-cbind(a,b)
> ? x[,2]<-na.locf(x[,2])
> ? x[!is.na(x[,1])]
> }
> AsOf(A,B)
>
> #####################
> # ? ? ? ? ? ..1 ..2
> #2011-09-01 ?10 1.1
> #2011-09-09 ?15 1.5
> #2011-09-10 ?20 1.5
> #2011-09-15 ?25 1.7
> #####################
>
>
> --
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
>
>


From rhelpacc at gmail.com  Thu Oct  6 03:15:10 2011
From: rhelpacc at gmail.com (Robert A'gata)
Date: Wed, 5 Oct 2011 21:15:10 -0400
Subject: [R-SIG-Finance] AsOf join in R
In-Reply-To: <E8CC19FC66B5FB46B5511B6E8AE814185B33325609@VAUNSW137.au.cbainet.com>
References: <CAA7=MyUyuN1qt-8rpsetu5vz7D3MNwDZ1RDvUynkX7jLwRXzow@mail.gmail.com>
	<E8CC19FC66B5FB46B5511B6E8AE814185B3318D0C4@VAUNSW137.au.cbainet.com>
	<CAA7=MyVVL31gE3KUjduO8NVkuKM5wViYA7gOg4QU9sTgdyJS5Q@mail.gmail.com>
	<E8CC19FC66B5FB46B5511B6E8AE814185B33325609@VAUNSW137.au.cbainet.com>
Message-ID: <CAA7=MyXxwGwSJuDcSdbx=mbVBjbu5ThZ7G8N5LFpk3m5BOBpTQ@mail.gmail.com>

Roupell - I did. I just replied to Brian. It doesn't return the right
answer. Any idea we can do this in R? I have an alternative to write
this in C++ and port into R. But I would like to make sure that I
exhaust all solution in native R before doing so.

On Wed, Oct 5, 2011 at 9:10 PM, Roupell, Darko <Darko.Roupell at cba.com.au> wrote:
> Have you tried Brian's suggestion?
>
> AsOf<-function(a,b) {
> ? x<-cbind(a,b)
> ? x[,2]<-na.locf(x[,2])
> ? x[!is.na(x[,1])]
> }
>
> __________________________________________________
> Commonwealth Bank
> Darko Roupell
> Associate Quantitative Analyst
> Institutional Banking & Markets
> Equities Research
> Darling Park Tower 1
> Level 23, 201 Sussex Street
> Sydney, NSW 200
> P: ?+61 2 9117 1254
> F: ?+61 2 9118 1000
> M: +61 400 170 515
> E: Darko.Roupell at cba.com.au
> Our vision is to be Australia's finest financial services organisation through excelling in customer service.
>
> Email Security
> This email is sent solely for informational purposes. Hoax emails, commonly referred to as phishing, can appear to be from the Commonwealth Bank and ask you to update or confirm details such as client numbers, passwords, personal identification questions, contact details or account numbers. The Commonwealth Bank will never send you an email asking you to confirm, update or reveal your confidential banking information.
> Important Information
> Produced by Global Markets Research, a business unit of Commonwealth Bank of Australia ABN 48 123 123 124 - AFSL 234945 (Commonwealth Bank). This publication is based on information available at the time of publishing.? We believe that the information in this communication is correct and any opinions, conclusions or recommendations are reasonably held or made as at the time of its compilation, but no warranty is made as to accuracy, reliability or completeness.? To the extent permitted by law, neither Commonwealth Bank nor any of its subsidiaries accept liability to any person for loss or damage arising from the use of this communication. This communication does not purport to be a complete statement or summary.
> The information provided has been prepared without considering your objectives, financial situation or needs, and before acting on the information, you should consider its appropriateness to your circumstances. No person should act on the basis of this report without considering and if necessary taking appropriate professional advice upon their own particular circumstances.
> Commonwealth Bank of Australia, as a provider of investment, borrowing and other financial services undertakes financial transactions with many corporate entities in Australia. This may include any corporate issuer referred to in this communication. Commonwealth Bank and its subsidiaries have effected or may effect transactions for their own account in any investments or related investments referred to herein. In the case of certain securities Commonwealth Bank is or may be the only market maker.
>
> -----Original Message-----
> From: Robert A'gata [mailto:rhelpacc at gmail.com]
> Sent: Thursday, 6 October 2011 12:08 PM
> To: Roupell, Darko; r-help at r-project.org; r-sig-finance at stat.math.ethz.ch
> Subject: Re: [R-SIG-Finance] AsOf join in R
>
> Hi Roupell,
>
> Yes I am aware of RTAQ function matchTradesQuotes. But my time series
> does not follow the TAQ format like they suggest. So I gave it a try
> and find that it doesn't work. In particular, my time series contain
> full level 2 order book and trades. I want to do asof join of the book
> to the trade. Is there any better way? Or I misunderstand anything
> about the RTAQ's function? Thank you.
>
> Robert
>
> On Wed, Oct 5, 2011 at 1:59 AM, Roupell, Darko <Darko.Roupell at cba.com.au> wrote:
>> na.locf {zoo}, should do a job, also if you look in RTAQ they wrote a function that looks on previous tick and carries forward value in case its not available.
>>
>> __________________________________________________
>> Commonwealth Bank
>> Darko Roupell
>> Associate Quantitative Analyst
>> Institutional Banking & Markets
>> Equities Research
>> Darling Park Tower 1
>> Level 23, 201 Sussex Street
>> Sydney, NSW 200
>> P: ?+61 2 9117 1254
>> F: ?+61 2 9118 1000
>> M: +61 400 170 515
>> E: Darko.Roupell at cba.com.au
>> Our vision is to be Australia's finest financial services organisation through excelling in customer service.
>>
>> Email Security
>> This email is sent solely for informational purposes. Hoax emails, commonly referred to as phishing, can appear to be from the Commonwealth Bank and ask you to update or confirm details such as client numbers, passwords, personal identification questions, contact details or account numbers. The Commonwealth Bank will never send you an email asking you to confirm, update or reveal your confidential banking information.
>> Important Information
>> Produced by Global Markets Research, a business unit of Commonwealth Bank of Australia ABN 48 123 123 124 - AFSL 234945 (Commonwealth Bank). This publication is based on information available at the time of publishing.? We believe that the information in this communication is correct and any opinions, conclusions or recommendations are reasonably held or made as at the time of its compilation, but no warranty is made as to accuracy, reliability or completeness.? To the extent permitted by law, neither Commonwealth Bank nor any of its subsidiaries accept liability to any person for loss or damage arising from the use of this communication. This communication does not purport to be a complete statement or summary.
>> The information provided has been prepared without considering your objectives, financial situation or needs, and before acting on the information, you should consider its appropriateness to your circumstances. No person should act on the basis of this report without considering and if necessary taking appropriate professional advice upon their own particular circumstances.
>> Commonwealth Bank of Australia, as a provider of investment, borrowing and other financial services undertakes financial transactions with many corporate entities in Australia. This may include any corporate issuer referred to in this communication. Commonwealth Bank and its subsidiaries have effected or may effect transactions for their own account in any investments or related investments referred to herein. In the case of certain securities Commonwealth Bank is or may be the only market maker.
>>
>> -----Original Message-----
>> From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Robert A'gata
>> Sent: Wednesday, 5 October 2011 2:41 PM
>> To: r-help at r-project.org; r-sig-finance at stat.math.ethz.ch
>> Subject: [R-SIG-Finance] AsOf join in R
>>
>> Hi,
>>
>> I tried to google for any solution for asof join operator in R. But I
>> couldn't find one. The asof join operator AsOf(A,B) merges 2 time
>> series by looking for latest available value of B prior to each time
>> point in A. For example,
>>
>> A <- xts(c(10,15,20,25),
>> order.by=as.POSIXct(c("2011-09-01","2011-09-09","2011-09-10","2011-09-15"))
>>
>> B <- xts(c(1.1,1.5,1.3,1.7),
>> order.by=as.POSIXct(c("2011-08-31","2011-09-09","2011-09-11","2011-09-12"))
>>
>> AsOf(A,B) should return
>>
>> ? ? ? ? ? ? ? ? ? ?A ? ? ? B
>> 2011-09-01 ? ?10 ? ? 1.1
>> 2011-09-09 ? ?15 ? ? 1.1 ? ? # ?(because latest value B prior to
>> 2011-09-09 is 1.1)
>> 2011-09-10 ? ?20 ? ? 1.5
>> 2011-09-15 ? ?25 ? ? 1.7
>>
>> How do I write the above AsOf function in R? The merge function does
>> not do what I want because it will align points that have the same
>> time stamp together while what I want is actually latest value prior
>> to timestamp in A. Any example would be greatly appreciated. Thank
>> you.
>>
>> Cheers,
>>
>> Robert
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>> ************** IMPORTANT MESSAGE *****************************
>> This e-mail message is intended only for the addressee(s) and contains information which may be
>> confidential.
>> If you are not the intended recipient please advise the sender by return email, do not use or
>> disclose the contents, and delete the message and any attachments from your system. Unless
>> specifically indicated, this email does not constitute formal advice or commitment by the sender
>> or the Commonwealth Bank of Australia (ABN 48 123 123 124) or its subsidiaries.
>> We can be contacted through our web site: commbank.com.au.
>> If you no longer wish to receive commercial electronic messages from us, please reply to this
>> e-mail by typing Unsubscribe in the subject line.
>> **************************************************************
>>
>>
>>
>>
>
> ************** IMPORTANT MESSAGE *****************************
> This e-mail message is intended only for the addressee(s) and contains information which may be
> confidential.
> If you are not the intended recipient please advise the sender by return email, do not use or
> disclose the contents, and delete the message and any attachments from your system. Unless
> specifically indicated, this email does not constitute formal advice or commitment by the sender
> or the Commonwealth Bank of Australia (ABN 48 123 123 124) or its subsidiaries.
> We can be contacted through our web site: commbank.com.au.
> If you no longer wish to receive commercial electronic messages from us, please reply to this
> e-mail by typing Unsubscribe in the subject line.
> **************************************************************
>
>
>
>


From Darko.Roupell at cba.com.au  Thu Oct  6 03:22:39 2011
From: Darko.Roupell at cba.com.au (Roupell, Darko)
Date: Thu, 6 Oct 2011 12:22:39 +1100
Subject: [R-SIG-Finance] AsOf join in R
In-Reply-To: <CAA7=MyVVL31gE3KUjduO8NVkuKM5wViYA7gOg4QU9sTgdyJS5Q@mail.gmail.com>
References: <CAA7=MyUyuN1qt-8rpsetu5vz7D3MNwDZ1RDvUynkX7jLwRXzow@mail.gmail.com>
	<E8CC19FC66B5FB46B5511B6E8AE814185B3318D0C4@VAUNSW137.au.cbainet.com>
	<CAA7=MyVVL31gE3KUjduO8NVkuKM5wViYA7gOg4QU9sTgdyJS5Q@mail.gmail.com>
Message-ID: <E8CC19FC66B5FB46B5511B6E8AE814185B3332570C@VAUNSW137.au.cbainet.com>

Btw tweaking MatchTradesQuotes should not be an issue and its easy to accommodate any data format that is passed through in xts object. 

At least that's what I did with RTAQ package - used it as a shell to create unique functions that suit data format for intra-day tick flow from ASX. 


Hope this helps.

__________________________________________________
Commonwealth Bank 
Darko Roupell 
Associate Quantitative Analyst 
Institutional Banking & Markets
Equities Research
Darling Park Tower 1
Level 23, 201 Sussex Street
Sydney, NSW 200
P:  +61 2 9117 1254
F:  +61 2 9118 1000
M: +61 400 170 515
E: Darko.Roupell at cba.com.au 
Our vision is to be Australia's finest financial services organisation through excelling in customer service.

Email Security
This email is sent solely for informational purposes. Hoax emails, commonly referred to as phishing, can appear to be from the Commonwealth Bank and ask you to update or confirm details such as client numbers, passwords, personal identification questions, contact details or account numbers. The Commonwealth Bank will never send you an email asking you to confirm, update or reveal your confidential banking information. 
Important Information
Produced by Global Markets Research, a business unit of Commonwealth Bank of Australia ABN 48 123 123 124 - AFSL 234945 (Commonwealth Bank). This publication is based on information available at the time of publishing.? We believe that the information in this communication is correct and any opinions, conclusions or recommendations are reasonably held or made as at the time of its compilation, but no warranty is made as to accuracy, reliability or completeness.? To the extent permitted by law, neither Commonwealth Bank nor any of its subsidiaries accept liability to any person for loss or damage arising from the use of this communication. This communication does not purport to be a complete statement or summary.? 
The information provided has been prepared without considering your objectives, financial situation or needs, and before acting on the information, you should consider its appropriateness to your circumstances. No person should act on the basis of this report without considering and if necessary taking appropriate professional advice upon their own particular circumstances.? 
Commonwealth Bank of Australia, as a provider of investment, borrowing and other financial services undertakes financial transactions with many corporate entities in Australia. This may include any corporate issuer referred to in this communication. Commonwealth Bank and its subsidiaries have effected or may effect transactions for their own account in any investments or related investments referred to herein. In the case of certain securities Commonwealth Bank is or may be the only market maker.


-----Original Message-----
From: Robert A'gata [mailto:rhelpacc at gmail.com] 
Sent: Thursday, 6 October 2011 12:08 PM
To: Roupell, Darko; r-help at r-project.org; r-sig-finance at stat.math.ethz.ch
Subject: Re: [R-SIG-Finance] AsOf join in R

Hi Roupell,

Yes I am aware of RTAQ function matchTradesQuotes. But my time series
does not follow the TAQ format like they suggest. So I gave it a try
and find that it doesn't work. In particular, my time series contain
full level 2 order book and trades. I want to do asof join of the book
to the trade. Is there any better way? Or I misunderstand anything
about the RTAQ's function? Thank you.

Robert

On Wed, Oct 5, 2011 at 1:59 AM, Roupell, Darko <Darko.Roupell at cba.com.au> wrote:
> na.locf {zoo}, should do a job, also if you look in RTAQ they wrote a function that looks on previous tick and carries forward value in case its not available.
>
> __________________________________________________
> Commonwealth Bank
> Darko Roupell
> Associate Quantitative Analyst
> Institutional Banking & Markets
> Equities Research
> Darling Park Tower 1
> Level 23, 201 Sussex Street
> Sydney, NSW 200
> P: ?+61 2 9117 1254
> F: ?+61 2 9118 1000
> M: +61 400 170 515
> E: Darko.Roupell at cba.com.au
> Our vision is to be Australia's finest financial services organisation through excelling in customer service.
>
> Email Security
> This email is sent solely for informational purposes. Hoax emails, commonly referred to as phishing, can appear to be from the Commonwealth Bank and ask you to update or confirm details such as client numbers, passwords, personal identification questions, contact details or account numbers. The Commonwealth Bank will never send you an email asking you to confirm, update or reveal your confidential banking information.
> Important Information
> Produced by Global Markets Research, a business unit of Commonwealth Bank of Australia ABN 48 123 123 124 - AFSL 234945 (Commonwealth Bank). This publication is based on information available at the time of publishing.? We believe that the information in this communication is correct and any opinions, conclusions or recommendations are reasonably held or made as at the time of its compilation, but no warranty is made as to accuracy, reliability or completeness.? To the extent permitted by law, neither Commonwealth Bank nor any of its subsidiaries accept liability to any person for loss or damage arising from the use of this communication. This communication does not purport to be a complete statement or summary.
> The information provided has been prepared without considering your objectives, financial situation or needs, and before acting on the information, you should consider its appropriateness to your circumstances. No person should act on the basis of this report without considering and if necessary taking appropriate professional advice upon their own particular circumstances.
> Commonwealth Bank of Australia, as a provider of investment, borrowing and other financial services undertakes financial transactions with many corporate entities in Australia. This may include any corporate issuer referred to in this communication. Commonwealth Bank and its subsidiaries have effected or may effect transactions for their own account in any investments or related investments referred to herein. In the case of certain securities Commonwealth Bank is or may be the only market maker.
>
> -----Original Message-----
> From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Robert A'gata
> Sent: Wednesday, 5 October 2011 2:41 PM
> To: r-help at r-project.org; r-sig-finance at stat.math.ethz.ch
> Subject: [R-SIG-Finance] AsOf join in R
>
> Hi,
>
> I tried to google for any solution for asof join operator in R. But I
> couldn't find one. The asof join operator AsOf(A,B) merges 2 time
> series by looking for latest available value of B prior to each time
> point in A. For example,
>
> A <- xts(c(10,15,20,25),
> order.by=as.POSIXct(c("2011-09-01","2011-09-09","2011-09-10","2011-09-15"))
>
> B <- xts(c(1.1,1.5,1.3,1.7),
> order.by=as.POSIXct(c("2011-08-31","2011-09-09","2011-09-11","2011-09-12"))
>
> AsOf(A,B) should return
>
> ? ? ? ? ? ? ? ? ? ?A ? ? ? B
> 2011-09-01 ? ?10 ? ? 1.1
> 2011-09-09 ? ?15 ? ? 1.1 ? ? # ?(because latest value B prior to
> 2011-09-09 is 1.1)
> 2011-09-10 ? ?20 ? ? 1.5
> 2011-09-15 ? ?25 ? ? 1.7
>
> How do I write the above AsOf function in R? The merge function does
> not do what I want because it will align points that have the same
> time stamp together while what I want is actually latest value prior
> to timestamp in A. Any example would be greatly appreciated. Thank
> you.
>
> Cheers,
>
> Robert
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
> ************** IMPORTANT MESSAGE *****************************
> This e-mail message is intended only for the addressee(s) and contains information which may be
> confidential.
> If you are not the intended recipient please advise the sender by return email, do not use or
> disclose the contents, and delete the message and any attachments from your system. Unless
> specifically indicated, this email does not constitute formal advice or commitment by the sender
> or the Commonwealth Bank of Australia (ABN 48 123 123 124) or its subsidiaries.
> We can be contacted through our web site: commbank.com.au.
> If you no longer wish to receive commercial electronic messages from us, please reply to this
> e-mail by typing Unsubscribe in the subject line.
> **************************************************************
>
>
>
>

************** IMPORTANT MESSAGE *****************************       
This e-mail message is intended only for the addressee(s) and contains information which may be
confidential. 
If you are not the intended recipient please advise the sender by return email, do not use or
disclose the contents, and delete the message and any attachments from your system. Unless
specifically indicated, this email does not constitute formal advice or commitment by the sender
or the Commonwealth Bank of Australia (ABN 48 123 123 124) or its subsidiaries. 
We can be contacted through our web site: commbank.com.au. 
If you no longer wish to receive commercial electronic messages from us, please reply to this
e-mail by typing Unsubscribe in the subject line. 


From rhelpacc at gmail.com  Thu Oct  6 03:27:41 2011
From: rhelpacc at gmail.com (Robert A'gata)
Date: Wed, 5 Oct 2011 21:27:41 -0400
Subject: [R-SIG-Finance] AsOf join in R
In-Reply-To: <E8CC19FC66B5FB46B5511B6E8AE814185B3332570C@VAUNSW137.au.cbainet.com>
References: <CAA7=MyUyuN1qt-8rpsetu5vz7D3MNwDZ1RDvUynkX7jLwRXzow@mail.gmail.com>
	<E8CC19FC66B5FB46B5511B6E8AE814185B3318D0C4@VAUNSW137.au.cbainet.com>
	<CAA7=MyVVL31gE3KUjduO8NVkuKM5wViYA7gOg4QU9sTgdyJS5Q@mail.gmail.com>
	<E8CC19FC66B5FB46B5511B6E8AE814185B3332570C@VAUNSW137.au.cbainet.com>
Message-ID: <CAA7=MyVLnk5YKn8gD6Q7sTY0guqtJE5s-oN8vo4yTOvAHbfDgA@mail.gmail.com>

Darko - Looking at it carefully. Yes, you're right. It's still native
R code function. I know how to proceed now. Thanks.

On Wed, Oct 5, 2011 at 9:22 PM, Roupell, Darko <Darko.Roupell at cba.com.au> wrote:
> Btw tweaking MatchTradesQuotes should not be an issue and its easy to accommodate any data format that is passed through in xts object.
>
> At least that's what I did with RTAQ package - used it as a shell to create unique functions that suit data format for intra-day tick flow from ASX.
>
>
> Hope this helps.
>
> __________________________________________________
> Commonwealth Bank
> Darko Roupell
> Associate Quantitative Analyst
> Institutional Banking & Markets
> Equities Research
> Darling Park Tower 1
> Level 23, 201 Sussex Street
> Sydney, NSW 200
> P: ?+61 2 9117 1254
> F: ?+61 2 9118 1000
> M: +61 400 170 515
> E: Darko.Roupell at cba.com.au
> Our vision is to be Australia's finest financial services organisation through excelling in customer service.
>
> Email Security
> This email is sent solely for informational purposes. Hoax emails, commonly referred to as phishing, can appear to be from the Commonwealth Bank and ask you to update or confirm details such as client numbers, passwords, personal identification questions, contact details or account numbers. The Commonwealth Bank will never send you an email asking you to confirm, update or reveal your confidential banking information.
> Important Information
> Produced by Global Markets Research, a business unit of Commonwealth Bank of Australia ABN 48 123 123 124 - AFSL 234945 (Commonwealth Bank). This publication is based on information available at the time of publishing.? We believe that the information in this communication is correct and any opinions, conclusions or recommendations are reasonably held or made as at the time of its compilation, but no warranty is made as to accuracy, reliability or completeness.? To the extent permitted by law, neither Commonwealth Bank nor any of its subsidiaries accept liability to any person for loss or damage arising from the use of this communication. This communication does not purport to be a complete statement or summary.
> The information provided has been prepared without considering your objectives, financial situation or needs, and before acting on the information, you should consider its appropriateness to your circumstances. No person should act on the basis of this report without considering and if necessary taking appropriate professional advice upon their own particular circumstances.
> Commonwealth Bank of Australia, as a provider of investment, borrowing and other financial services undertakes financial transactions with many corporate entities in Australia. This may include any corporate issuer referred to in this communication. Commonwealth Bank and its subsidiaries have effected or may effect transactions for their own account in any investments or related investments referred to herein. In the case of certain securities Commonwealth Bank is or may be the only market maker.
>
>
> -----Original Message-----
> From: Robert A'gata [mailto:rhelpacc at gmail.com]
> Sent: Thursday, 6 October 2011 12:08 PM
> To: Roupell, Darko; r-help at r-project.org; r-sig-finance at stat.math.ethz.ch
> Subject: Re: [R-SIG-Finance] AsOf join in R
>
> Hi Roupell,
>
> Yes I am aware of RTAQ function matchTradesQuotes. But my time series
> does not follow the TAQ format like they suggest. So I gave it a try
> and find that it doesn't work. In particular, my time series contain
> full level 2 order book and trades. I want to do asof join of the book
> to the trade. Is there any better way? Or I misunderstand anything
> about the RTAQ's function? Thank you.
>
> Robert
>
> On Wed, Oct 5, 2011 at 1:59 AM, Roupell, Darko <Darko.Roupell at cba.com.au> wrote:
>> na.locf {zoo}, should do a job, also if you look in RTAQ they wrote a function that looks on previous tick and carries forward value in case its not available.
>>
>> __________________________________________________
>> Commonwealth Bank
>> Darko Roupell
>> Associate Quantitative Analyst
>> Institutional Banking & Markets
>> Equities Research
>> Darling Park Tower 1
>> Level 23, 201 Sussex Street
>> Sydney, NSW 200
>> P: ?+61 2 9117 1254
>> F: ?+61 2 9118 1000
>> M: +61 400 170 515
>> E: Darko.Roupell at cba.com.au
>> Our vision is to be Australia's finest financial services organisation through excelling in customer service.
>>
>> Email Security
>> This email is sent solely for informational purposes. Hoax emails, commonly referred to as phishing, can appear to be from the Commonwealth Bank and ask you to update or confirm details such as client numbers, passwords, personal identification questions, contact details or account numbers. The Commonwealth Bank will never send you an email asking you to confirm, update or reveal your confidential banking information.
>> Important Information
>> Produced by Global Markets Research, a business unit of Commonwealth Bank of Australia ABN 48 123 123 124 - AFSL 234945 (Commonwealth Bank). This publication is based on information available at the time of publishing.? We believe that the information in this communication is correct and any opinions, conclusions or recommendations are reasonably held or made as at the time of its compilation, but no warranty is made as to accuracy, reliability or completeness.? To the extent permitted by law, neither Commonwealth Bank nor any of its subsidiaries accept liability to any person for loss or damage arising from the use of this communication. This communication does not purport to be a complete statement or summary.
>> The information provided has been prepared without considering your objectives, financial situation or needs, and before acting on the information, you should consider its appropriateness to your circumstances. No person should act on the basis of this report without considering and if necessary taking appropriate professional advice upon their own particular circumstances.
>> Commonwealth Bank of Australia, as a provider of investment, borrowing and other financial services undertakes financial transactions with many corporate entities in Australia. This may include any corporate issuer referred to in this communication. Commonwealth Bank and its subsidiaries have effected or may effect transactions for their own account in any investments or related investments referred to herein. In the case of certain securities Commonwealth Bank is or may be the only market maker.
>>
>> -----Original Message-----
>> From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Robert A'gata
>> Sent: Wednesday, 5 October 2011 2:41 PM
>> To: r-help at r-project.org; r-sig-finance at stat.math.ethz.ch
>> Subject: [R-SIG-Finance] AsOf join in R
>>
>> Hi,
>>
>> I tried to google for any solution for asof join operator in R. But I
>> couldn't find one. The asof join operator AsOf(A,B) merges 2 time
>> series by looking for latest available value of B prior to each time
>> point in A. For example,
>>
>> A <- xts(c(10,15,20,25),
>> order.by=as.POSIXct(c("2011-09-01","2011-09-09","2011-09-10","2011-09-15"))
>>
>> B <- xts(c(1.1,1.5,1.3,1.7),
>> order.by=as.POSIXct(c("2011-08-31","2011-09-09","2011-09-11","2011-09-12"))
>>
>> AsOf(A,B) should return
>>
>> ? ? ? ? ? ? ? ? ? ?A ? ? ? B
>> 2011-09-01 ? ?10 ? ? 1.1
>> 2011-09-09 ? ?15 ? ? 1.1 ? ? # ?(because latest value B prior to
>> 2011-09-09 is 1.1)
>> 2011-09-10 ? ?20 ? ? 1.5
>> 2011-09-15 ? ?25 ? ? 1.7
>>
>> How do I write the above AsOf function in R? The merge function does
>> not do what I want because it will align points that have the same
>> time stamp together while what I want is actually latest value prior
>> to timestamp in A. Any example would be greatly appreciated. Thank
>> you.
>>
>> Cheers,
>>
>> Robert
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>> ************** IMPORTANT MESSAGE *****************************
>> This e-mail message is intended only for the addressee(s) and contains information which may be
>> confidential.
>> If you are not the intended recipient please advise the sender by return email, do not use or
>> disclose the contents, and delete the message and any attachments from your system. Unless
>> specifically indicated, this email does not constitute formal advice or commitment by the sender
>> or the Commonwealth Bank of Australia (ABN 48 123 123 124) or its subsidiaries.
>> We can be contacted through our web site: commbank.com.au.
>> If you no longer wish to receive commercial electronic messages from us, please reply to this
>> e-mail by typing Unsubscribe in the subject line.
>> **************************************************************
>>
>>
>>
>>
>
> ************** IMPORTANT MESSAGE *****************************
> This e-mail message is intended only for the addressee(s) and contains information which may be
> confidential.
> If you are not the intended recipient please advise the sender by return email, do not use or
> disclose the contents, and delete the message and any attachments from your system. Unless
> specifically indicated, this email does not constitute formal advice or commitment by the sender
> or the Commonwealth Bank of Australia (ABN 48 123 123 124) or its subsidiaries.
> We can be contacted through our web site: commbank.com.au.
> If you no longer wish to receive commercial electronic messages from us, please reply to this
> e-mail by typing Unsubscribe in the subject line.
> **************************************************************
>
>
>
>


From ggrothendieck at gmail.com  Thu Oct  6 03:46:01 2011
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 5 Oct 2011 21:46:01 -0400
Subject: [R-SIG-Finance] AsOf join in R
In-Reply-To: <CAA7=MyXggr-MH7=Y-NeqRqenVZS8yhNzoOAgPHUqq=D4p5+Y1w@mail.gmail.com>
References: <CAA7=MyUyuN1qt-8rpsetu5vz7D3MNwDZ1RDvUynkX7jLwRXzow@mail.gmail.com>
	<1317810094.4192.316.camel@brian-desktop>
	<CAA7=MyXggr-MH7=Y-NeqRqenVZS8yhNzoOAgPHUqq=D4p5+Y1w@mail.gmail.com>
Message-ID: <CAP01uRkGiEzUttcdTLxJHpaFii7F=NPjzJ4fEiqug6Tox5VTfw@mail.gmail.com>

On Wed, Oct 5, 2011 at 9:11 PM, Robert A'gata <rhelpacc at gmail.com> wrote:
> Hi Brian,
>
> Thanks for getting back. I'm afraid it's not doing what I intend. If
> you see value of B after asof join on 2011-09-09, cbind and na.locf
> will give you 1.5 as opposed to 1.1. I would like to have latest value
> available prior to 2011-09-09 from B which will be 1.1 on 2011-09-09.
> It's a strict inquality for this operation. Would you have any other
> recommendation? Thank you again.
>

Just add a small number to time(b), e.g. replace the first line of AsOf with:

AsOf <- function(a, b,
eps=min(diff(as.numeric(sort(unique(c(as.numeric(time(a)),
as.numeric(time(b))))))))/2) {
  time(b) <- time(b) + eps


-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From rhelpacc at gmail.com  Thu Oct  6 03:53:11 2011
From: rhelpacc at gmail.com (Robert A'gata)
Date: Wed, 5 Oct 2011 21:53:11 -0400
Subject: [R-SIG-Finance] AsOf join in R
In-Reply-To: <CA+xi=qadARG_pep7yD-7Jte22eNMyKmO3M9XGqnxkDJDo95n+A@mail.gmail.com>
References: <CAA7=MyUyuN1qt-8rpsetu5vz7D3MNwDZ1RDvUynkX7jLwRXzow@mail.gmail.com>
	<1317810094.4192.316.camel@brian-desktop>
	<CAA7=MyXggr-MH7=Y-NeqRqenVZS8yhNzoOAgPHUqq=D4p5+Y1w@mail.gmail.com>
	<CA+xi=qadARG_pep7yD-7Jte22eNMyKmO3M9XGqnxkDJDo95n+A@mail.gmail.com>
Message-ID: <CAA7=MyVkTEwyWQDVxn=m+fKVdf7zq164g0FnBFcoGwaLEVSK-w@mail.gmail.com>

Hi Garrett - Yes. I'm very sure. This type of operation occurs a lot
when manipulating high-frequency financial data. I think what RTAQ
offers is good. I can use that as a template to start with. Thank you.

On Wed, Oct 5, 2011 at 9:38 PM, G See <gsee000 at gmail.com> wrote:
> Robert,
> Check the data you gave us:
>> A <- xts(c(10,15,20,25),
> +
> order.by=as.POSIXct(c("2011-09-01","2011-09-09","2011-09-10","2011-09-15")))
>> A
> ? ? ? ? ? ?[,1]
> 2011-09-01 ? 10
> 2011-09-09 ? 15
> 2011-09-10 ? 20
> 2011-09-15 ? 25
>> B <- xts(c(1.1,1.5,1.3,1.7),
> +
> order.by=as.POSIXct(c("2011-08-31","2011-09-09","2011-09-11","2011-09-12")))
>> B
> ? ? ? ? ? ?[,1]
> 2011-08-31 ?1.1
> 2011-09-09 ?1.5
> 2011-09-11 ?1.3
> 2011-09-12 ?1.7
> Both A and B have a value for '2011-09-09'
>> cbind(A,B)
> ? ? ? ? ? ?..1 ..2
> 2011-08-31 ?NA 1.1
> 2011-09-01 ?10 ?NA
> 2011-09-09 ?15 1.5
> 2011-09-10 ?20 ?NA
> 2011-09-11 ?NA 1.3
> 2011-09-12 ?NA 1.7
> 2011-09-15 ?25 ?NA
> Surely you don't want to replace the 1.5 with 1.1?
> see ?na.locf if you haven't already.
> Regards,
> Garrett
> On Wed, Oct 5, 2011 at 8:11 PM, Robert A'gata <rhelpacc at gmail.com> wrote:
>>
>> Hi Brian,
>>
>> Thanks for getting back. I'm afraid it's not doing what I intend. If
>> you see value of B after asof join on 2011-09-09, cbind and na.locf
>> will give you 1.5 as opposed to 1.1. I would like to have latest value
>> available prior to 2011-09-09 from B which will be 1.1 on 2011-09-09.
>> It's a strict inquality for this operation. Would you have any other
>> recommendation? Thank you again.
>>
>> Robert.
>>
>> On Wed, Oct 5, 2011 at 6:21 AM, Brian G. Peterson <brian at braverock.com>
>> wrote:
>> > On Tue, 2011-10-04 at 23:41 -0400, Robert A'gata wrote:
>> >> AsOf(A,B) should return
>> >>
>> >> ? ? ? ? ? ? ? ? ? ? A ? ? ? B
>> >> 2011-09-01 ? ?10 ? ? 1.1
>> >> 2011-09-09 ? ?15 ? ? 1.1 ? ? # ?(because latest value B prior to
>> >> 2011-09-09 is 1.1)
>> >> 2011-09-10 ? ?20 ? ? 1.5
>> >> 2011-09-15 ? ?25 ? ? 1.7
>> >>
>> >> How do I write the above AsOf function in R? The merge function does
>> >> not do what I want because it will align points that have the same
>> >> time stamp together while what I want is actually latest value prior
>> >> to timestamp in A. Any example would be greatly appreciated. Thank
>> >> you.
>> >
>> > A <- xts(c(10,15,20,25),
>> >
>> > order.by=as.POSIXct(c("2011-09-01","2011-09-09","2011-09-10","2011-09-15")))
>> > B <- xts(c(1.1,1.5,1.3,1.7),
>> >
>> > order.by=as.POSIXct(c("2011-08-31","2011-09-09","2011-09-11","2011-09-12")))
>> > AsOf<-function(a,b) {
>> > ? x<-cbind(a,b)
>> > ? x[,2]<-na.locf(x[,2])
>> > ? x[!is.na(x[,1])]
>> > }
>> > AsOf(A,B)
>> >
>> > #####################
>> > # ? ? ? ? ? ..1 ..2
>> > #2011-09-01 ?10 1.1
>> > #2011-09-09 ?15 1.5
>> > #2011-09-10 ?20 1.5
>> > #2011-09-15 ?25 1.7
>> > #####################
>> >
>> >
>> > --
>> > Brian G. Peterson
>> > http://braverock.com/brian/
>> > Ph: 773-459-4973
>> > IM: bgpbraverock
>> >
>> >
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>
>


From brian at braverock.com  Thu Oct  6 04:08:36 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 5 Oct 2011 21:08:36 -0500
Subject: [R-SIG-Finance] AsOf join in R
In-Reply-To: <CAA7=MyVkTEwyWQDVxn=m+fKVdf7zq164g0FnBFcoGwaLEVSK-w@mail.gmail.com>
References: <CAA7=MyUyuN1qt-8rpsetu5vz7D3MNwDZ1RDvUynkX7jLwRXzow@mail.gmail.com>
	<1317810094.4192.316.camel@brian-desktop>
	<CAA7=MyXggr-MH7=Y-NeqRqenVZS8yhNzoOAgPHUqq=D4p5+Y1w@mail.gmail.com>
	<CA+xi=qadARG_pep7yD-7Jte22eNMyKmO3M9XGqnxkDJDo95n+A@mail.gmail.com>
	<CAA7=MyVkTEwyWQDVxn=m+fKVdf7zq164g0FnBFcoGwaLEVSK-w@mail.gmail.com>
Message-ID: <1317866916.4192.320.camel@brian-desktop>

On Wed, 2011-10-05 at 21:53 -0400, Robert A'gata wrote:
> Hi Garrett - Yes. I'm very sure. This type of operation occurs a lot
> when manipulating high-frequency financial data. I think what RTAQ
> offers is good. I can use that as a template to start with. Thank you.

We all deal with high frequency data professionally, and cbind/na.locf
is the most common way of getting what we want:  the prevailing bid/ask
at the time of a trade.  So, either your data is very different from
every other tick data I have ever seen, or you should consider that you
may be doing something wrong.

If you're convinced you know what you're doing, Gabor's advice will
work.

Cheers,

   - Brian


From jeffrey.ryan at lemnica.com  Thu Oct  6 04:26:52 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Wed, 5 Oct 2011 21:26:52 -0500
Subject: [R-SIG-Finance] AsOf join in R
In-Reply-To: <1317866916.4192.320.camel@brian-desktop>
References: <CAA7=MyUyuN1qt-8rpsetu5vz7D3MNwDZ1RDvUynkX7jLwRXzow@mail.gmail.com>
	<1317810094.4192.316.camel@brian-desktop>
	<CAA7=MyXggr-MH7=Y-NeqRqenVZS8yhNzoOAgPHUqq=D4p5+Y1w@mail.gmail.com>
	<CA+xi=qadARG_pep7yD-7Jte22eNMyKmO3M9XGqnxkDJDo95n+A@mail.gmail.com>
	<CAA7=MyVkTEwyWQDVxn=m+fKVdf7zq164g0FnBFcoGwaLEVSK-w@mail.gmail.com>
	<1317866916.4192.320.camel@brian-desktop>
Message-ID: <CABDUZc-iU-01KvTYVV8vV3z7v1ubkx2iEOAp06EuZv4+Wjbzbg@mail.gmail.com>

This is reasonably masochistic, but will do what you want.

> merge(A,align.time(B),fill=na.locf)[index(A)]
            A align.time.B.
2011-09-01 10           1.1
2011-09-09 15           1.1
2011-09-10 20           1.5
2011-09-15 25           1.7

In effect you are perturbing the time on B by some increment (default
here is 1s), filling the NAs with na.locf, and then only taking the
rows that match the first index.

That said, I am not sure what you are doing makes sense to me either though.

Jeff

On Wed, Oct 5, 2011 at 9:08 PM, Brian G. Peterson <brian at braverock.com> wrote:
> On Wed, 2011-10-05 at 21:53 -0400, Robert A'gata wrote:
>> Hi Garrett - Yes. I'm very sure. This type of operation occurs a lot
>> when manipulating high-frequency financial data. I think what RTAQ
>> offers is good. I can use that as a template to start with. Thank you.
>
> We all deal with high frequency data professionally, and cbind/na.locf
> is the most common way of getting what we want: ?the prevailing bid/ask
> at the time of a trade. ?So, either your data is very different from
> every other tick data I have ever seen, or you should consider that you
> may be doing something wrong.
>
> If you're convinced you know what you're doing, Gabor's advice will
> work.
>
> Cheers,
>
> ? - Brian
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From gsee000 at gmail.com  Thu Oct  6 04:29:06 2011
From: gsee000 at gmail.com (G See)
Date: Wed, 5 Oct 2011 21:29:06 -0500
Subject: [R-SIG-Finance] AsOf join in R
In-Reply-To: <CAA7=MyVkTEwyWQDVxn=m+fKVdf7zq164g0FnBFcoGwaLEVSK-w@mail.gmail.com>
References: <CAA7=MyUyuN1qt-8rpsetu5vz7D3MNwDZ1RDvUynkX7jLwRXzow@mail.gmail.com>
	<1317810094.4192.316.camel@brian-desktop>
	<CAA7=MyXggr-MH7=Y-NeqRqenVZS8yhNzoOAgPHUqq=D4p5+Y1w@mail.gmail.com>
	<CA+xi=qadARG_pep7yD-7Jte22eNMyKmO3M9XGqnxkDJDo95n+A@mail.gmail.com>
	<CAA7=MyVkTEwyWQDVxn=m+fKVdf7zq164g0FnBFcoGwaLEVSK-w@mail.gmail.com>
Message-ID: <CA+xi=qZ9tU2C+FJVbgC-=hr5wX5AwMv=HPmhTtk=wu8Jki-Phg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111005/7fd6ff58/attachment.pl>

From ustaudinger at gmail.com  Thu Oct  6 08:15:58 2011
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Thu, 6 Oct 2011 08:15:58 +0200
Subject: [R-SIG-Finance] AsOf join in R
In-Reply-To: <CAA7=MyVVL31gE3KUjduO8NVkuKM5wViYA7gOg4QU9sTgdyJS5Q@mail.gmail.com>
References: <CAA7=MyUyuN1qt-8rpsetu5vz7D3MNwDZ1RDvUynkX7jLwRXzow@mail.gmail.com>	<E8CC19FC66B5FB46B5511B6E8AE814185B3318D0C4@VAUNSW137.au.cbainet.com>
	<CAA7=MyVVL31gE3KUjduO8NVkuKM5wViYA7gOg4QU9sTgdyJS5Q@mail.gmail.com>
Message-ID: <4E8D479E.10304@gmail.com>

A bit late,  but here is what I always do:

m = merge(bid, ask, tick)
m<- interpNA(m, method="before")

intrepNA can also interpolate NAs in different ways, for example linearly.


Hth,
Ulrich


Am 06.10.2011 03:08, schrieb Robert A'gata:
> Hi Roupell,
>
> Yes I am aware of RTAQ function matchTradesQuotes. But my time series
> does not follow the TAQ format like they suggest. So I gave it a try
> and find that it doesn't work. In particular, my time series contain
> full level 2 order book and trades. I want to do asof join of the book
> to the trade. Is there any better way? Or I misunderstand anything
> about the RTAQ's function? Thank you.
>
> Robert
>
> On Wed, Oct 5, 2011 at 1:59 AM, Roupell, Darko<Darko.Roupell at cba.com.au>  wrote:
>> na.locf {zoo}, should do a job, also if you look in RTAQ they wrote a function that looks on previous tick and carries forward value in case its not available.
>>
>> __________________________________________________
>> Commonwealth Bank
>> Darko Roupell
>> Associate Quantitative Analyst
>> Institutional Banking&  Markets
>> Equities Research
>> Darling Park Tower 1
>> Level 23, 201 Sussex Street
>> Sydney, NSW 200
>> P:  +61 2 9117 1254
>> F:  +61 2 9118 1000
>> M: +61 400 170 515
>> E: Darko.Roupell at cba.com.au
>> Our vision is to be Australia's finest financial services organisation through excelling in customer service.
>>
>> Email Security
>> This email is sent solely for informational purposes. Hoax emails, commonly referred to as phishing, can appear to be from the Commonwealth Bank and ask you to update or confirm details such as client numbers, passwords, personal identification questions, contact details or account numbers. The Commonwealth Bank will never send you an email asking you to confirm, update or reveal your confidential banking information.
>> Important Information
>> Produced by Global Markets Research, a business unit of Commonwealth Bank of Australia ABN 48 123 123 124 - AFSL 234945 (Commonwealth Bank). This publication is based on information available at the time of publishing.  We believe that the information in this communication is correct and any opinions, conclusions or recommendations are reasonably held or made as at the time of its compilation, but no warranty is made as to accuracy, reliability or completeness.  To the extent permitted by law, neither Commonwealth Bank nor any of its subsidiaries accept liability to any person for loss or damage arising from the use of this communication. This communication does not purport to be a complete statement or summary.
>> The information provided has been prepared without considering your objectives, financial situation or needs, and before acting on the information, you should consider its appropriateness to your circumstances. No person should act on the basis of this report without considering and if necessary taking appropriate professional advice upon their own particular circumstances.
>> Commonwealth Bank of Australia, as a provider of investment, borrowing and other financial services undertakes financial transactions with many corporate entities in Australia. This may include any corporate issuer referred to in this communication. Commonwealth Bank and its subsidiaries have effected or may effect transactions for their own account in any investments or related investments referred to herein. In the case of certain securities Commonwealth Bank is or may be the only market maker.
>>
>> -----Original Message-----
>> From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Robert A'gata
>> Sent: Wednesday, 5 October 2011 2:41 PM
>> To: r-help at r-project.org; r-sig-finance at stat.math.ethz.ch
>> Subject: [R-SIG-Finance] AsOf join in R
>>
>> Hi,
>>
>> I tried to google for any solution for asof join operator in R. But I
>> couldn't find one. The asof join operator AsOf(A,B) merges 2 time
>> series by looking for latest available value of B prior to each time
>> point in A. For example,
>>
>> A<- xts(c(10,15,20,25),
>> order.by=as.POSIXct(c("2011-09-01","2011-09-09","2011-09-10","2011-09-15"))
>>
>> B<- xts(c(1.1,1.5,1.3,1.7),
>> order.by=as.POSIXct(c("2011-08-31","2011-09-09","2011-09-11","2011-09-12"))
>>
>> AsOf(A,B) should return
>>
>>                     A       B
>> 2011-09-01    10     1.1
>> 2011-09-09    15     1.1     #  (because latest value B prior to
>> 2011-09-09 is 1.1)
>> 2011-09-10    20     1.5
>> 2011-09-15    25     1.7
>>
>> How do I write the above AsOf function in R? The merge function does
>> not do what I want because it will align points that have the same
>> time stamp together while what I want is actually latest value prior
>> to timestamp in A. Any example would be greatly appreciated. Thank
>> you.
>>
>> Cheers,
>>
>> Robert
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>> ************** IMPORTANT MESSAGE *****************************
>> This e-mail message is intended only for the addressee(s) and contains information which may be
>> confidential.
>> If you are not the intended recipient please advise the sender by return email, do not use or
>> disclose the contents, and delete the message and any attachments from your system. Unless
>> specifically indicated, this email does not constitute formal advice or commitment by the sender
>> or the Commonwealth Bank of Australia (ABN 48 123 123 124) or its subsidiaries.
>> We can be contacted through our web site: commbank.com.au.
>> If you no longer wish to receive commercial electronic messages from us, please reply to this
>> e-mail by typing Unsubscribe in the subject line.
>> **************************************************************
>>
>>
>>
>>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From adrian at trapletti.org  Thu Oct  6 14:04:11 2011
From: adrian at trapletti.org (Adrian Trapletti)
Date: Thu, 6 Oct 2011 14:04:11 +0200
Subject: [R-SIG-Finance] A question on volatility
Message-ID: <4E8D993B.4010905@trapletti.org>

Hi Megh,

As a practitioner I would use something like

x1 <- get.hist.quote(instrument = "^gspc", start = "1990-01-01")
x2 <- get.hist.quote(instrument = "^dji", start = "1990-01-01")  ## both 
need to be synchronized in time

r1 <- log(x1[, 2])-log(x1[, 3]) ## range as proxy for vola
r2 <- log(x2[, 2])-log(x2[, 3]) ## not ()^2 to avoid possibly non-finite 
fourth moment

r <- merge(r1, r2)

plot(r)

rcor <- rollapply(r, width = 250, FUN = function(z) cor(z[, 1], z[, 2], 
method = "pearson"),
                  by.column = FALSE, align = "left") ## method != 
"pearson" for rank correlations

plot(rcor)

as a starting point. As a next step I would use a better proxy for vola 
from the zoo of realized vola based estimators.

Best regards
Adrian

> Dear all, I was trying to understand the correlation among the?volatilities?in different financial market, however am in dilemma what could be the rightful and acceptable-to-everyone approach. I thought to estimate the volatilities of?individual?markets using some GARCH modeling, then just calculate the correlation coefficient on the estimated time series of estimated daily volatilities.?
>
> Is it correct approach to understand the correlation? Can somebody point me any online paper or any idea on the same?
>
> Thanks for your time.

-- 
Dr. Adrian Trapletti
Steinstrasse 9b
8610 Uster
Switzerland

Phone : +41 (0) 44 9945630
Mobile : +41 (0) 79 1037131

Email : adrian at trapletti.org


From adrian at trapletti.org  Thu Oct  6 14:19:01 2011
From: adrian at trapletti.org (Adrian Trapletti)
Date: Thu, 6 Oct 2011 14:19:01 +0200
Subject: [R-SIG-Finance] A question on volatility
In-Reply-To: <4E8D993B.4010905@trapletti.org>
References: <4E8D993B.4010905@trapletti.org>
Message-ID: <4E8D9CB5.3040905@trapletti.org>

I forgot to mention: Usually it is better to work with the logarithmic 
vola proxy, i.e., use

r<-log(r)

after the merge.

Best regards
Adrian

Adrian Trapletti wrote:
> Hi Megh,
>
> As a practitioner I would use something like
>
> x1 <- get.hist.quote(instrument = "^gspc", start = "1990-01-01")
> x2 <- get.hist.quote(instrument = "^dji", start = "1990-01-01")  ## 
> both need to be synchronized in time
>
> r1 <- log(x1[, 2])-log(x1[, 3]) ## range as proxy for vola
> r2 <- log(x2[, 2])-log(x2[, 3]) ## not ()^2 to avoid possibly 
> non-finite fourth moment
>
> r <- merge(r1, r2)
>
> plot(r)
>
> rcor <- rollapply(r, width = 250, FUN = function(z) cor(z[, 1], z[, 
> 2], method = "pearson"),
>                  by.column = FALSE, align = "left") ## method != 
> "pearson" for rank correlations
>
> plot(rcor)
>
> as a starting point. As a next step I would use a better proxy for 
> vola from the zoo of realized vola based estimators.
>
> Best regards
> Adrian
>
>> Dear all, I was trying to understand the correlation among 
>> the?volatilities?in different financial market, however am in dilemma 
>> what could be the rightful and acceptable-to-everyone approach. I 
>> thought to estimate the volatilities of?individual?markets using some 
>> GARCH modeling, then just calculate the correlation coefficient on 
>> the estimated time series of estimated daily volatilities.?
>>
>> Is it correct approach to understand the correlation? Can somebody 
>> point me any online paper or any idea on the same?
>>
>> Thanks for your time.
>

-- 
Dr. Adrian Trapletti
Steinstrasse 9b
8610 Uster
Switzerland

Phone : +41 (0) 44 9945630
Mobile : +41 (0) 79 1037131

Email : adrian at trapletti.org


From ggrothendieck at gmail.com  Thu Oct  6 15:30:43 2011
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 6 Oct 2011 09:30:43 -0400
Subject: [R-SIG-Finance] AsOf join in R
In-Reply-To: <4E8D479E.10304@gmail.com>
References: <CAA7=MyUyuN1qt-8rpsetu5vz7D3MNwDZ1RDvUynkX7jLwRXzow@mail.gmail.com>
	<E8CC19FC66B5FB46B5511B6E8AE814185B3318D0C4@VAUNSW137.au.cbainet.com>
	<CAA7=MyVVL31gE3KUjduO8NVkuKM5wViYA7gOg4QU9sTgdyJS5Q@mail.gmail.com>
	<4E8D479E.10304@gmail.com>
Message-ID: <CAP01uR=wYp5Q5rHeVY4hEktvu6k0LUfYM7AOkNqVUSOeuJA1rw@mail.gmail.com>

On Thu, Oct 6, 2011 at 2:15 AM, Ulrich Staudinger <ustaudinger at gmail.com> wrote:
> A bit late, ?but here is what I always do:
>
> m = merge(bid, ask, tick)
> m<- interpNA(m, method="before")
>
> intrepNA can also interpolate NAs in different ways, for example linearly.
>

Its not clear precisely what sort of objects bid, ask and tick were
intended to be in your example but none of the tries below produce 1.1
for Sep 9th as asked for:

> library(xts)
> library(timeSeries)
> A <- xts(c(10,15,20,25),
+ order.by=as.POSIXct(c("2011-09-01","2011-09-09","2011-09-10","2011-09-15")))
>
> B <- xts(c(1.1,1.5,1.3,1.7),
+ order.by=as.POSIXct(c("2011-08-31","2011-09-09","2011-09-11","2011-09-12")))
>
> #1
> interpNA(merge(A, B), method = "before")
            A   B
2011-08-31 NA 1.1
2011-09-01 10 1.1
2011-09-09 15 1.5
2011-09-10 20 1.5
2011-09-11 20 1.3
2011-09-12 20 1.7
2011-09-15 25  NA
>
> #2
> interpNA(merge(as.timeSeries(A), as.timeSeries(B)), method = "before")
GMT
           TS.1
2011-08-31  1.1
2011-09-01 10.0
2011-09-09  1.5
2011-09-09 15.0
2011-09-10 20.0
2011-09-11  1.3
2011-09-12  1.7
2011-09-15 25.0
>
> #3
> interpNA(as.timeSeries(merge(A, B)), method = "before")
GMT
            A   B
2011-08-31 NA 1.1
2011-09-01 10 1.1
2011-09-09 15 1.5
2011-09-10 20 1.5
2011-09-11 20 1.3
2011-09-12 20 1.7
2011-09-15 25  NA

interpNA seems to use approx underneath so its functionality is
similar to na.approx in zoo/xts but with different defaults.

-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From aidan.corcoran11 at gmail.com  Thu Oct  6 18:39:06 2011
From: aidan.corcoran11 at gmail.com (Aidan Corcoran)
Date: Thu, 6 Oct 2011 17:39:06 +0100
Subject: [R-SIG-Finance] Speed of processing a bdh call using Rbloomberg
In-Reply-To: <-2101203766867133736@unknownmsgid>
References: <CADv5Py63x66c1YHou_bJBdV5JtS_U+8GDgkNzErGYihsk0eqbw@mail.gmail.com>
	<-2101203766867133736@unknownmsgid>
Message-ID: <CADv5Py43O0Vk-FyA0MeJeaZqe63AdFUhxHbhOp8QhVKjW2bExw@mail.gmail.com>

Dear Ulrich,

thanks for your suggestion to cache the results, speeding up future calls.

Unfortunately I would like to retrieve large amounts of fairly random
data, rather than repeatedly retrieving data that overlap with
previous requests, so caching wouldn't help much.

It seems there are no other suggestions to improve speed, which
suggests at least I am not missing anything obvious (or doing anything
stupid!).

Thanks for your help.
Aidan

On Sat, Oct 1, 2011 at 6:20 PM, Ulrich Staudinger <ustaudinger at gmail.com> wrote:
> cache it after downloading and fetch only the update?
> regards
> ulrich
>
>
> --
> comnect on xing or linkedin
>
> On 01.10.2011, at 18:43, Aidan Corcoran <aidan.corcoran11 at gmail.com> wrote:
>
>> Dear list,
>>
>> When I run a bdh call which requests three years of quarterly data on
>> two items for 48 companies (giving a 601x4 data frame), the call takes
>> about two minutes to complete. I would like to run bigger requests, so
>> speed is a bit of an issue. Is there anything I can do to improve the
>> speed? Code below. I have a PC running Windows 7, 4gb of RAM and a
>> 3Ghz processor, if that matters. Java version is 1.6.0_26.
>>
>> Thanks in advance
>> Aidan
>>
>> conn <- blpConnect()
>> R version 2.13.0 (2011-04-13)
>> rJava Version 0.9-1
>> RBloomberg Version 0.4-150
>> Java environment initialized successfully.
>> Looking for most recent blpapi3.jar file...
>> Adding C:\blp\API\APIv3\JavaAPI\v3.4.3.2\lib\blpapi3.jar to Java classpath
>> Bloomberg API Version 3.4.3.2
>> daysback<-3*365
>> start.date <- as.POSIXct(Sys.Date()-daysback)
>> end.date <- as.POSIXct(Sys.Date())
>> tickers<- c("ACA FP Equity", "ALPHA GA Equity", "BAER VX Equity",
>> "BARC LN Equity", "BBVA SQ Equity", "BCP PL Equity", "BCVN SE Equity",
>> "BES PL Equity",
>> "BKIR ID Equity", "BKT SQ Equity", "BMPS IM Equity", "BNP FP Equity",
>> "BP IM Equity", "BPE IM Equity", "BPSO IM Equity", "CABK SQ Equity",
>> "CBK GY Equity", "CRG IM Equity", "CSGN VX Equity", "DANSKE DC Equity",
>> "DBK GY Equity", "DEXB BB Equity", "DNBNOR NO Equity", "EBS AV Equity",
>> "ETE GA Equity", "GLE FP Equity", "HSBA LN Equity", "ISP IM Equity",
>> "JYSK DC Equity", "KBC BB Equity", "KN FP Equity", "LLOY LN Equity",
>> "MB IM Equity", "NDA SS Equity", "POH1S FH Equity", "POP SQ Equity",
>> "RBI AV Equity", "RBS LN Equity", "SAB SQ Equity", "SAN SQ Equity",
>> "SEBA SS Equity", "SHBA SS Equity", "STAN LN Equity", "SWEDA SS Equity",
>> "SYDB DC Equity", "TPEIR GA Equity", "UBI IM Equity", "UBSN VX Equity",
>> "UCG IM Equity", "VATN SE Equity")
>> fields<-c("best_sales","best_ebitda")
>> o_names = "periodicitySelection"
>> o_values = "QUARTERLY"
>> funda<-bdh(conn, tickers, fields, start.date,end.date,option_names =
>> o_names, option_values = o_values)
>>
>>
>> sessionInfo()
>> R version 2.13.0 (2011-04-13)
>> Platform: i386-pc-mingw32/i386 (32-bit)
>>
>> locale:
>> [1] LC_COLLATE=English_Ireland.1252 ?LC_CTYPE=English_Ireland.1252
>> [3] LC_MONETARY=English_Ireland.1252 LC_NUMERIC=C
>> [5] LC_TIME=English_Ireland.1252
>>
>> attached base packages:
>> [1] grid ? ? ?stats ? ? graphics ?grDevices utils ? ? datasets ?methods
>> [8] base
>>
>> other attached packages:
>> [1] RBloomberg_0.4-150 rJava_0.9-1 ? ? ? ?gtools_2.6.2 ? ? ? gdata_2.8.2
>> [5] ggplot2_0.8.9 ? ? ?proto_0.3-9.2 ? ? ?zoo_1.7-4 ? ? ? ? ?reshape_0.8.4
>> [9] plyr_1.6
>>
>> loaded via a namespace (and not attached):
>> [1] lattice_0.19-23 tools_2.13.0
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>


From john.laing at gmail.com  Thu Oct  6 19:42:10 2011
From: john.laing at gmail.com (John Laing)
Date: Thu, 6 Oct 2011 13:42:10 -0400
Subject: [R-SIG-Finance] Speed of processing a bdh call using Rbloomberg
In-Reply-To: <CADv5Py43O0Vk-FyA0MeJeaZqe63AdFUhxHbhOp8QhVKjW2bExw@mail.gmail.com>
References: <CADv5Py63x66c1YHou_bJBdV5JtS_U+8GDgkNzErGYihsk0eqbw@mail.gmail.com>
	<-2101203766867133736@unknownmsgid>
	<CADv5Py43O0Vk-FyA0MeJeaZqe63AdFUhxHbhOp8QhVKjW2bExw@mail.gmail.com>
Message-ID: <CAA3Wa=uA5WrQpMPu=RjTcWiQ=bhH0Q+7MC6t=Xoj4Rqk7YbRjg@mail.gmail.com>

Aidan,

Sorry for the delayed response.

Your code runs pretty quickly for me:

> system.time(funda<-bdh(conn, tickers, fields, start.date,end.date,option_names = o_names, option_values = o_values))
   user  system elapsed
   2.35    0.14    5.05

This is on a Windows XP VM, 3.5GB memory. Is it possible a slow
network connection is to blame?

John

On Thu, Oct 6, 2011 at 12:39 PM, Aidan Corcoran
<aidan.corcoran11 at gmail.com> wrote:
> Dear Ulrich,
>
> thanks for your suggestion to cache the results, speeding up future calls.
>
> Unfortunately I would like to retrieve large amounts of fairly random
> data, rather than repeatedly retrieving data that overlap with
> previous requests, so caching wouldn't help much.
>
> It seems there are no other suggestions to improve speed, which
> suggests at least I am not missing anything obvious (or doing anything
> stupid!).
>
> Thanks for your help.
> Aidan
>
> On Sat, Oct 1, 2011 at 6:20 PM, Ulrich Staudinger <ustaudinger at gmail.com> wrote:
>> cache it after downloading and fetch only the update?
>> regards
>> ulrich
>>
>>
>> --
>> comnect on xing or linkedin
>>
>> On 01.10.2011, at 18:43, Aidan Corcoran <aidan.corcoran11 at gmail.com> wrote:
>>
>>> Dear list,
>>>
>>> When I run a bdh call which requests three years of quarterly data on
>>> two items for 48 companies (giving a 601x4 data frame), the call takes
>>> about two minutes to complete. I would like to run bigger requests, so
>>> speed is a bit of an issue. Is there anything I can do to improve the
>>> speed? Code below. I have a PC running Windows 7, 4gb of RAM and a
>>> 3Ghz processor, if that matters. Java version is 1.6.0_26.
>>>
>>> Thanks in advance
>>> Aidan
>>>
>>> conn <- blpConnect()
>>> R version 2.13.0 (2011-04-13)
>>> rJava Version 0.9-1
>>> RBloomberg Version 0.4-150
>>> Java environment initialized successfully.
>>> Looking for most recent blpapi3.jar file...
>>> Adding C:\blp\API\APIv3\JavaAPI\v3.4.3.2\lib\blpapi3.jar to Java classpath
>>> Bloomberg API Version 3.4.3.2
>>> daysback<-3*365
>>> start.date <- as.POSIXct(Sys.Date()-daysback)
>>> end.date <- as.POSIXct(Sys.Date())
>>> tickers<- c("ACA FP Equity", "ALPHA GA Equity", "BAER VX Equity",
>>> "BARC LN Equity", "BBVA SQ Equity", "BCP PL Equity", "BCVN SE Equity",
>>> "BES PL Equity",
>>> "BKIR ID Equity", "BKT SQ Equity", "BMPS IM Equity", "BNP FP Equity",
>>> "BP IM Equity", "BPE IM Equity", "BPSO IM Equity", "CABK SQ Equity",
>>> "CBK GY Equity", "CRG IM Equity", "CSGN VX Equity", "DANSKE DC Equity",
>>> "DBK GY Equity", "DEXB BB Equity", "DNBNOR NO Equity", "EBS AV Equity",
>>> "ETE GA Equity", "GLE FP Equity", "HSBA LN Equity", "ISP IM Equity",
>>> "JYSK DC Equity", "KBC BB Equity", "KN FP Equity", "LLOY LN Equity",
>>> "MB IM Equity", "NDA SS Equity", "POH1S FH Equity", "POP SQ Equity",
>>> "RBI AV Equity", "RBS LN Equity", "SAB SQ Equity", "SAN SQ Equity",
>>> "SEBA SS Equity", "SHBA SS Equity", "STAN LN Equity", "SWEDA SS Equity",
>>> "SYDB DC Equity", "TPEIR GA Equity", "UBI IM Equity", "UBSN VX Equity",
>>> "UCG IM Equity", "VATN SE Equity")
>>> fields<-c("best_sales","best_ebitda")
>>> o_names = "periodicitySelection"
>>> o_values = "QUARTERLY"
>>> funda<-bdh(conn, tickers, fields, start.date,end.date,option_names =
>>> o_names, option_values = o_values)
>>>
>>>
>>> sessionInfo()
>>> R version 2.13.0 (2011-04-13)
>>> Platform: i386-pc-mingw32/i386 (32-bit)
>>>
>>> locale:
>>> [1] LC_COLLATE=English_Ireland.1252 ?LC_CTYPE=English_Ireland.1252
>>> [3] LC_MONETARY=English_Ireland.1252 LC_NUMERIC=C
>>> [5] LC_TIME=English_Ireland.1252
>>>
>>> attached base packages:
>>> [1] grid ? ? ?stats ? ? graphics ?grDevices utils ? ? datasets ?methods
>>> [8] base
>>>
>>> other attached packages:
>>> [1] RBloomberg_0.4-150 rJava_0.9-1 ? ? ? ?gtools_2.6.2 ? ? ? gdata_2.8.2
>>> [5] ggplot2_0.8.9 ? ? ?proto_0.3-9.2 ? ? ?zoo_1.7-4 ? ? ? ? ?reshape_0.8.4
>>> [9] plyr_1.6
>>>
>>> loaded via a namespace (and not attached):
>>> [1] lattice_0.19-23 tools_2.13.0
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From jeffrey.ryan at lemnica.com  Thu Oct  6 21:16:17 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Thu, 6 Oct 2011 14:16:17 -0500
Subject: [R-SIG-Finance] TZs
Message-ID: <CABDUZc-J_XKdH9brFL2nosR_KSagM=nt7xQojUz21cZidV49tA@mail.gmail.com>

Anyone seen this or know anything about it?

http://article.gmane.org/gmane.comp.time.tz/4133

-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From ggrothendieck at gmail.com  Thu Oct  6 21:23:28 2011
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 6 Oct 2011 15:23:28 -0400
Subject: [R-SIG-Finance] TZs
In-Reply-To: <CABDUZc-J_XKdH9brFL2nosR_KSagM=nt7xQojUz21cZidV49tA@mail.gmail.com>
References: <CABDUZc-J_XKdH9brFL2nosR_KSagM=nt7xQojUz21cZidV49tA@mail.gmail.com>
Message-ID: <CAP01uRkVexvMC8ghT5=y4vft=+wNZcr_XjyOBNdbnr00qwyUgw@mail.gmail.com>

On Thu, Oct 6, 2011 at 3:16 PM, Jeffrey Ryan <jeffrey.ryan at lemnica.com> wrote:
> Anyone seen this or know anything about it?
>
> http://article.gmane.org/gmane.comp.time.tz/4133
>

http://news.ycombinator.com/item?id=3080437

-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From matti.zemack at gmail.com  Fri Oct  7 12:44:28 2011
From: matti.zemack at gmail.com (Matti Zemack)
Date: Fri, 7 Oct 2011 12:44:28 +0200
Subject: [R-SIG-Finance] TZs
In-Reply-To: <mailman.3.1317981601.18402.r-sig-finance@r-project.org>
References: <mailman.3.1317981601.18402.r-sig-finance@r-project.org>
Message-ID: <FA3993A7-F717-4DFC-B986-96D204B5E3D1@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111007/f084ee77/attachment.pl>

From sjaffe at riskspan.com  Fri Oct  7 14:24:04 2011
From: sjaffe at riskspan.com (Steve Jaffe)
Date: Fri, 7 Oct 2011 07:24:04 -0500
Subject: [R-SIG-Finance] TZ database
In-Reply-To: <mailman.2.1317981601.18402.r-sig-finance@r-project.org>
References: <mailman.2.1317981601.18402.r-sig-finance@r-project.org>
Message-ID: <C03F8157B6DECC428DE8D36DC5F9244102111C95AF@DFW1MBX03.mex07a.mlsrvr.com>

http://www.theregister.co.uk/2011/10/07/unix_time_zone_database_destroyed/


From aidan.corcoran11 at gmail.com  Fri Oct  7 15:51:14 2011
From: aidan.corcoran11 at gmail.com (Aidan Corcoran)
Date: Fri, 7 Oct 2011 14:51:14 +0100
Subject: [R-SIG-Finance] Speed of processing a bdh call using Rbloomberg
In-Reply-To: <CAA3Wa=uA5WrQpMPu=RjTcWiQ=bhH0Q+7MC6t=Xoj4Rqk7YbRjg@mail.gmail.com>
References: <CADv5Py63x66c1YHou_bJBdV5JtS_U+8GDgkNzErGYihsk0eqbw@mail.gmail.com>
	<-2101203766867133736@unknownmsgid>
	<CADv5Py43O0Vk-FyA0MeJeaZqe63AdFUhxHbhOp8QhVKjW2bExw@mail.gmail.com>
	<CAA3Wa=uA5WrQpMPu=RjTcWiQ=bhH0Q+7MC6t=Xoj4Rqk7YbRjg@mail.gmail.com>
Message-ID: <CADv5Py4VjvA3R_v=aGHJcAW7P-eMx8h-orhqCbBEnDOSPGi6jA@mail.gmail.com>

Dear John,

yes it does seem to be a problem with my network connection. Thanks
for your help, and for the great package!

Aidan

On Thu, Oct 6, 2011 at 6:42 PM, John Laing <john.laing at gmail.com> wrote:
> Aidan,
>
> Sorry for the delayed response.
>
> Your code runs pretty quickly for me:
>
>> system.time(funda<-bdh(conn, tickers, fields, start.date,end.date,option_names = o_names, option_values = o_values))
> ? user ?system elapsed
> ? 2.35 ? ?0.14 ? ?5.05
>
> This is on a Windows XP VM, 3.5GB memory. Is it possible a slow
> network connection is to blame?
>
> John
>
> On Thu, Oct 6, 2011 at 12:39 PM, Aidan Corcoran
> <aidan.corcoran11 at gmail.com> wrote:
>> Dear Ulrich,
>>
>> thanks for your suggestion to cache the results, speeding up future calls.
>>
>> Unfortunately I would like to retrieve large amounts of fairly random
>> data, rather than repeatedly retrieving data that overlap with
>> previous requests, so caching wouldn't help much.
>>
>> It seems there are no other suggestions to improve speed, which
>> suggests at least I am not missing anything obvious (or doing anything
>> stupid!).
>>
>> Thanks for your help.
>> Aidan
>>
>> On Sat, Oct 1, 2011 at 6:20 PM, Ulrich Staudinger <ustaudinger at gmail.com> wrote:
>>> cache it after downloading and fetch only the update?
>>> regards
>>> ulrich
>>>
>>>
>>> --
>>> comnect on xing or linkedin
>>>
>>> On 01.10.2011, at 18:43, Aidan Corcoran <aidan.corcoran11 at gmail.com> wrote:
>>>
>>>> Dear list,
>>>>
>>>> When I run a bdh call which requests three years of quarterly data on
>>>> two items for 48 companies (giving a 601x4 data frame), the call takes
>>>> about two minutes to complete. I would like to run bigger requests, so
>>>> speed is a bit of an issue. Is there anything I can do to improve the
>>>> speed? Code below. I have a PC running Windows 7, 4gb of RAM and a
>>>> 3Ghz processor, if that matters. Java version is 1.6.0_26.
>>>>
>>>> Thanks in advance
>>>> Aidan
>>>>
>>>> conn <- blpConnect()
>>>> R version 2.13.0 (2011-04-13)
>>>> rJava Version 0.9-1
>>>> RBloomberg Version 0.4-150
>>>> Java environment initialized successfully.
>>>> Looking for most recent blpapi3.jar file...
>>>> Adding C:\blp\API\APIv3\JavaAPI\v3.4.3.2\lib\blpapi3.jar to Java classpath
>>>> Bloomberg API Version 3.4.3.2
>>>> daysback<-3*365
>>>> start.date <- as.POSIXct(Sys.Date()-daysback)
>>>> end.date <- as.POSIXct(Sys.Date())
>>>> tickers<- c("ACA FP Equity", "ALPHA GA Equity", "BAER VX Equity",
>>>> "BARC LN Equity", "BBVA SQ Equity", "BCP PL Equity", "BCVN SE Equity",
>>>> "BES PL Equity",
>>>> "BKIR ID Equity", "BKT SQ Equity", "BMPS IM Equity", "BNP FP Equity",
>>>> "BP IM Equity", "BPE IM Equity", "BPSO IM Equity", "CABK SQ Equity",
>>>> "CBK GY Equity", "CRG IM Equity", "CSGN VX Equity", "DANSKE DC Equity",
>>>> "DBK GY Equity", "DEXB BB Equity", "DNBNOR NO Equity", "EBS AV Equity",
>>>> "ETE GA Equity", "GLE FP Equity", "HSBA LN Equity", "ISP IM Equity",
>>>> "JYSK DC Equity", "KBC BB Equity", "KN FP Equity", "LLOY LN Equity",
>>>> "MB IM Equity", "NDA SS Equity", "POH1S FH Equity", "POP SQ Equity",
>>>> "RBI AV Equity", "RBS LN Equity", "SAB SQ Equity", "SAN SQ Equity",
>>>> "SEBA SS Equity", "SHBA SS Equity", "STAN LN Equity", "SWEDA SS Equity",
>>>> "SYDB DC Equity", "TPEIR GA Equity", "UBI IM Equity", "UBSN VX Equity",
>>>> "UCG IM Equity", "VATN SE Equity")
>>>> fields<-c("best_sales","best_ebitda")
>>>> o_names = "periodicitySelection"
>>>> o_values = "QUARTERLY"
>>>> funda<-bdh(conn, tickers, fields, start.date,end.date,option_names =
>>>> o_names, option_values = o_values)
>>>>
>>>>
>>>> sessionInfo()
>>>> R version 2.13.0 (2011-04-13)
>>>> Platform: i386-pc-mingw32/i386 (32-bit)
>>>>
>>>> locale:
>>>> [1] LC_COLLATE=English_Ireland.1252 ?LC_CTYPE=English_Ireland.1252
>>>> [3] LC_MONETARY=English_Ireland.1252 LC_NUMERIC=C
>>>> [5] LC_TIME=English_Ireland.1252
>>>>
>>>> attached base packages:
>>>> [1] grid ? ? ?stats ? ? graphics ?grDevices utils ? ? datasets ?methods
>>>> [8] base
>>>>
>>>> other attached packages:
>>>> [1] RBloomberg_0.4-150 rJava_0.9-1 ? ? ? ?gtools_2.6.2 ? ? ? gdata_2.8.2
>>>> [5] ggplot2_0.8.9 ? ? ?proto_0.3-9.2 ? ? ?zoo_1.7-4 ? ? ? ? ?reshape_0.8.4
>>>> [9] plyr_1.6
>>>>
>>>> loaded via a namespace (and not attached):
>>>> [1] lattice_0.19-23 tools_2.13.0
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>


From amille47 at illinois.edu  Fri Oct  7 16:48:25 2011
From: amille47 at illinois.edu (Andrew Miller)
Date: Fri, 7 Oct 2011 09:48:25 -0500
Subject: [R-SIG-Finance] TZs
In-Reply-To: <FA3993A7-F717-4DFC-B986-96D204B5E3D1@gmail.com>
References: <mailman.3.1317981601.18402.r-sig-finance@r-project.org>
	<FA3993A7-F717-4DFC-B986-96D204B5E3D1@gmail.com>
Message-ID: <CAC6OWa8Acf_vh5eg5J6-v4EtQY1ZQpf4x01JFbRSc1rMR6zXwg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111007/f433a949/attachment.pl>

From brian at braverock.com  Fri Oct  7 17:41:23 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 07 Oct 2011 10:41:23 -0500
Subject: [R-SIG-Finance] TZs
In-Reply-To: <CAC6OWa8Acf_vh5eg5J6-v4EtQY1ZQpf4x01JFbRSc1rMR6zXwg@mail.gmail.com>
References: <mailman.3.1317981601.18402.r-sig-finance@r-project.org>
	<FA3993A7-F717-4DFC-B986-96D204B5E3D1@gmail.com>
	<CAC6OWa8Acf_vh5eg5J6-v4EtQY1ZQpf4x01JFbRSc1rMR6zXwg@mail.gmail.com>
Message-ID: <1318002083.6600.285.camel@brian-rcg>

On Fri, 2011-10-07 at 09:48 -0500, Andrew Miller wrote:
> In relation to this subject, does anybody know the protection status on
> historical financial quote data (stocks, futures) and/or the dissemination
> of graphs/analyses based off such data?
> 
> I thought it would fall in the public domain as the TZ data does, but it
> seems that I am wrong?

IANAL

That said,  you'll have to look at your contracts from your data
providers, or the exchanges that you are connected to.

Even with Yahoo/Google, you clicked on something to allow you to look at
that data.  getSymbols, get.hist.quote, etc. take advantage of
'loopholes' in the data pull methodologies provided by Yahoo/Google/etc.
to download the data.

This is part of the reason that most shops pay a lot of money for data,
in addition to capturing market data directly.  If you captured the data
directly, then it comes down to what the data contract with the exchange
says.  (and I'm certain that there is such a contract, or data clauses
in some other market access contract).

Cheers,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From edd at debian.org  Fri Oct  7 18:12:35 2011
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri, 7 Oct 2011 11:12:35 -0500
Subject: [R-SIG-Finance] Data (Was:  TZs)
In-Reply-To: <1318002083.6600.285.camel@brian-rcg>
References: <mailman.3.1317981601.18402.r-sig-finance@r-project.org>
	<FA3993A7-F717-4DFC-B986-96D204B5E3D1@gmail.com>
	<CAC6OWa8Acf_vh5eg5J6-v4EtQY1ZQpf4x01JFbRSc1rMR6zXwg@mail.gmail.com>
	<1318002083.6600.285.camel@brian-rcg>
Message-ID: <20111.9459.189242.205355@max.nulle.part>


On 7 October 2011 at 10:41, Brian G. Peterson wrote:
| On Fri, 2011-10-07 at 09:48 -0500, Andrew Miller wrote:
| > In relation to this subject, does anybody know the protection status on
| > historical financial quote data (stocks, futures) and/or the dissemination
| > of graphs/analyses based off such data?
| > 
| > I thought it would fall in the public domain as the TZ data does, but it
| > seems that I am wrong?
| 
| IANAL
| 
| That said,  you'll have to look at your contracts from your data
| providers, or the exchanges that you are connected to.
| 
| Even with Yahoo/Google, you clicked on something to allow you to look at
| that data.  getSymbols, get.hist.quote, etc. take advantage of
| 'loopholes' in the data pull methodologies provided by Yahoo/Google/etc.
| to download the data.

Google/Yahoo actually pay the exchanges. That came up when Google started to
show real-time data in an Ajax-y form (that you can easily program against)
and some news stories at the time reported what deal Google had struck with
the NYSE etc.

Download of historical data is (AFAIK, and IANAL either) free as that is now
a 'commodity item'.  See the 'conditions of use' though, IIRC the Yahoo
historical data page has a link.  You may not be allowed to redistribute.

And timely and clean data is still a resource, and priced accordingly.
 
| This is part of the reason that most shops pay a lot of money for data,
| in addition to capturing market data directly.  If you captured the data
| directly, then it comes down to what the data contract with the exchange
| says.  (and I'm certain that there is such a contract, or data clauses
| in some other market access contract).

Yep.

Dirk

-- 
New Rcpp master class for R and C++ integration is scheduled for 
San Francisco (Oct 8), more details / reg.info available at
http://www.revolutionanalytics.com/products/training/public/rcpp-master-class.php


From brian at braverock.com  Fri Oct  7 19:05:50 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 07 Oct 2011 12:05:50 -0500
Subject: [R-SIG-Finance] Data (Was:  TZs)
In-Reply-To: <20111.9459.189242.205355@max.nulle.part>
References: <mailman.3.1317981601.18402.r-sig-finance@r-project.org>
	<FA3993A7-F717-4DFC-B986-96D204B5E3D1@gmail.com>
	<CAC6OWa8Acf_vh5eg5J6-v4EtQY1ZQpf4x01JFbRSc1rMR6zXwg@mail.gmail.com>
	<1318002083.6600.285.camel@brian-rcg>
	<20111.9459.189242.205355@max.nulle.part>
Message-ID: <1318007150.6600.288.camel@brian-rcg>

On Fri, 2011-10-07 at 11:12 -0500, Dirk Eddelbuettel wrote:
> Google/Yahoo actually pay the exchanges. That came up when Google
> started to show real-time data in an Ajax-y form (that you can easily
> program against) and some news stories at the time reported what deal
> Google had struck with the NYSE etc.

Of course they paid the exchange.  So Google/Yahoo (obviously) have
redistribution rights.

The 'terms of use' almost certainly don't allow *you* to redistribute
that *data* though.  Thus my comment about consulting relevant
contracts.
 
-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From edd at debian.org  Fri Oct  7 19:44:46 2011
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri, 7 Oct 2011 12:44:46 -0500
Subject: [R-SIG-Finance] Data (Was:  TZs)
In-Reply-To: <1318007150.6600.288.camel@brian-rcg>
References: <mailman.3.1317981601.18402.r-sig-finance@r-project.org>
	<FA3993A7-F717-4DFC-B986-96D204B5E3D1@gmail.com>
	<CAC6OWa8Acf_vh5eg5J6-v4EtQY1ZQpf4x01JFbRSc1rMR6zXwg@mail.gmail.com>
	<1318002083.6600.285.camel@brian-rcg>
	<20111.9459.189242.205355@max.nulle.part>
	<1318007150.6600.288.camel@brian-rcg>
Message-ID: <20111.14990.8822.352079@max.nulle.part>


On 7 October 2011 at 12:05, Brian G. Peterson wrote:
| On Fri, 2011-10-07 at 11:12 -0500, Dirk Eddelbuettel wrote:
| > Google/Yahoo actually pay the exchanges. That came up when Google
| > started to show real-time data in an Ajax-y form (that you can easily
| > program against) and some news stories at the time reported what deal
| > Google had struck with the NYSE etc.
| 
| Of course they paid the exchange.  So Google/Yahoo (obviously) have
| redistribution rights.
| 
| The 'terms of use' almost certainly don't allow *you* to redistribute
| that *data* though.  Thus my comment about consulting relevant
| contracts.

Agreed. My response merely aimed to dash some cold water on your statement

   take advantage of 'loopholes' in the data pull methodologies provided by
   Yahoo/Google/etc. 

as this is in fact not a loophole. The cgi interface at Yahoo! is fully aware
of people programming against it, and I have both supported that interface
(via the Finance::YahooQuote module in the godforsaken Perl language) for
users, and deployed it daily myself for about a dozen years. No issue there:
Yahoo pays, we get to use it, I doubt we can redistribute, consult a lawyer
for details, news at eleven.

Andrew also asked about the dissemination of derived analysis (graphs etc).
which I think that is fine because that is your work rather that their raw
data.  IANAL.

Dirk

PS There was also a 'not' missing in my 'program easily against ajax-y'. It
is not easy, or we all would have 'free' quasi-real-time data now.

-- 
New Rcpp master class for R and C++ integration is scheduled for 
San Francisco (Oct 8), more details / reg.info available at
http://www.revolutionanalytics.com/products/training/public/rcpp-master-class.php


From ustaudinger at gmail.com  Fri Oct  7 19:52:32 2011
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Fri, 07 Oct 2011 19:52:32 +0200
Subject: [R-SIG-Finance] Data (Was:  TZs)
In-Reply-To: <20111.14990.8822.352079@max.nulle.part>
References: <mailman.3.1317981601.18402.r-sig-finance@r-project.org>	<FA3993A7-F717-4DFC-B986-96D204B5E3D1@gmail.com>	<CAC6OWa8Acf_vh5eg5J6-v4EtQY1ZQpf4x01JFbRSc1rMR6zXwg@mail.gmail.com>	<1318002083.6600.285.camel@brian-rcg>	<20111.9459.189242.205355@max.nulle.part>	<1318007150.6600.288.camel@brian-rcg>
	<20111.14990.8822.352079@max.nulle.part>
Message-ID: <4E8F3C60.8080708@gmail.com>

Am 07.10.2011 19:44, schrieb Dirk Eddelbuettel:
> Andrew also asked about the dissemination of derived analysis (graphs etc).
> which I think that is fine because that is your work rather that their raw
> data.  IANAL.

Actually that's not entirely the best answer as this again depends on 
the data provider. Based on my personal experience, I know that 
Bloomberg terminals do not allow the dissemination of data and derived 
work to non-terminal users, unless the company owning the terminal 
acquired a specific data dissemination license as it is bundled in 
specific products, such as the BB Back-Office products or the 
Data-Licence products.

BB can be really picky about that and they frequently say that they 
check the usage patterns of their terminal users for hints on 
exceptionally high data download rates. As long as that data stays on 
the terminal machine, everything is fine. But I assume that's again 
something everybody has to make peace with the local administrator on 
his/her own.

As said already I think it depends on the data provider and it is best 
to check with them as providers such as FactSet, Thomson-Reuters, 
TickData, etc. have their very own data usage licenses.


Cheers


From amille47 at illinois.edu  Fri Oct  7 20:11:07 2011
From: amille47 at illinois.edu (Andrew Miller)
Date: Fri, 7 Oct 2011 13:11:07 -0500
Subject: [R-SIG-Finance] Data (Was: TZs)
In-Reply-To: <20111.14990.8822.352079@max.nulle.part>
References: <mailman.3.1317981601.18402.r-sig-finance@r-project.org>
	<FA3993A7-F717-4DFC-B986-96D204B5E3D1@gmail.com>
	<CAC6OWa8Acf_vh5eg5J6-v4EtQY1ZQpf4x01JFbRSc1rMR6zXwg@mail.gmail.com>
	<1318002083.6600.285.camel@brian-rcg>
	<20111.9459.189242.205355@max.nulle.part>
	<1318007150.6600.288.camel@brian-rcg>
	<20111.14990.8822.352079@max.nulle.part>
Message-ID: <CAC6OWa_5pBNb_LLE+L7gdfpQ-5KnmS2e1WD+0fm8sdT=3Gw3dQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111007/b426df44/attachment.pl>

From daniel.cegielka at gmail.com  Fri Oct  7 20:30:17 2011
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Fri, 7 Oct 2011 20:30:17 +0200
Subject: [R-SIG-Finance] Data (Was: TZs)
In-Reply-To: <CAC6OWa_5pBNb_LLE+L7gdfpQ-5KnmS2e1WD+0fm8sdT=3Gw3dQ@mail.gmail.com>
References: <mailman.3.1317981601.18402.r-sig-finance@r-project.org>
	<FA3993A7-F717-4DFC-B986-96D204B5E3D1@gmail.com>
	<CAC6OWa8Acf_vh5eg5J6-v4EtQY1ZQpf4x01JFbRSc1rMR6zXwg@mail.gmail.com>
	<1318002083.6600.285.camel@brian-rcg>
	<20111.9459.189242.205355@max.nulle.part>
	<1318007150.6600.288.camel@brian-rcg>
	<20111.14990.8822.352079@max.nulle.part>
	<CAC6OWa_5pBNb_LLE+L7gdfpQ-5KnmS2e1WD+0fm8sdT=3Gw3dQ@mail.gmail.com>
Message-ID: <CAPLrYERYQSq9Ru8zcGcSejJpY9uh6jMe1MpDCjewSVzFo8+UVg@mail.gmail.com>

interesting studies:

http://www.techdirt.com/articles/20111006/11532316235/astrolabe-claims-it-holds-copyright-timezone-data-sues-maintainers-public-timezone-database.shtml

http://www.thedailyparker.com/PermaLink,guid,c5f28bae-4b9c-41ea-b7b7-8891ad63c938.aspx

best,
daniel




2011/10/7 Andrew Miller <amille47 at illinois.edu>:
> Thank you for all of your responses, they have helped a lot.
>
> One thing that interests me is how much analysis would have to be done to
> distribute the graphs? ?For example, would posting a simple graph of the
> price history, or the spread between two futures be acceptable without
> license? Or would only more involved graphs be acceptable?
>
> Thanks again,
>
> -Andrew
>
> On Fri, Oct 7, 2011 at 12:44 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
>
>>
>> On 7 October 2011 at 12:05, Brian G. Peterson wrote:
>> | On Fri, 2011-10-07 at 11:12 -0500, Dirk Eddelbuettel wrote:
>> | > Google/Yahoo actually pay the exchanges. That came up when Google
>> | > started to show real-time data in an Ajax-y form (that you can easily
>> | > program against) and some news stories at the time reported what deal
>> | > Google had struck with the NYSE etc.
>> |
>> | Of course they paid the exchange. ?So Google/Yahoo (obviously) have
>> | redistribution rights.
>> |
>> | The 'terms of use' almost certainly don't allow *you* to redistribute
>> | that *data* though. ?Thus my comment about consulting relevant
>> | contracts.
>>
>> Agreed. My response merely aimed to dash some cold water on your statement
>>
>> ? take advantage of 'loopholes' in the data pull methodologies provided by
>> ? Yahoo/Google/etc.
>>
>> as this is in fact not a loophole. The cgi interface at Yahoo! is fully
>> aware
>> of people programming against it, and I have both supported that interface
>> (via the Finance::YahooQuote module in the godforsaken Perl language) for
>> users, and deployed it daily myself for about a dozen years. No issue
>> there:
>> Yahoo pays, we get to use it, I doubt we can redistribute, consult a lawyer
>> for details, news at eleven.
>>
>> Andrew also asked about the dissemination of derived analysis (graphs etc).
>> which I think that is fine because that is your work rather that their raw
>> data. ?IANAL.
>>
>> Dirk
>>
>> PS There was also a 'not' missing in my 'program easily against ajax-y'. It
>> is not easy, or we all would have 'free' quasi-real-time data now.
>>
>> --
>> New Rcpp master class for R and C++ integration is scheduled for
>> San Francisco (Oct 8), more details / reg.info available at
>>
>> http://www.revolutionanalytics.com/products/training/public/rcpp-master-class.php
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From jeffrey.ryan at lemnica.com  Fri Oct  7 20:33:10 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Fri, 7 Oct 2011 13:33:10 -0500
Subject: [R-SIG-Finance] Data (Was: TZs)
In-Reply-To: <CAC6OWa_5pBNb_LLE+L7gdfpQ-5KnmS2e1WD+0fm8sdT=3Gw3dQ@mail.gmail.com>
References: <mailman.3.1317981601.18402.r-sig-finance@r-project.org>
	<FA3993A7-F717-4DFC-B986-96D204B5E3D1@gmail.com>
	<CAC6OWa8Acf_vh5eg5J6-v4EtQY1ZQpf4x01JFbRSc1rMR6zXwg@mail.gmail.com>
	<1318002083.6600.285.camel@brian-rcg>
	<20111.9459.189242.205355@max.nulle.part>
	<1318007150.6600.288.camel@brian-rcg>
	<20111.14990.8822.352079@max.nulle.part>
	<CAC6OWa_5pBNb_LLE+L7gdfpQ-5KnmS2e1WD+0fm8sdT=3Gw3dQ@mail.gmail.com>
Message-ID: <CABDUZc_k-daKOW8T7bOvtee=Y-vHh90VQO43PBYCKozVPoDFwA@mail.gmail.com>

Posting simple graphs, even raw data is *likely* to be okay for three reasons:

1) No one will care. Yahoo, CME, etc would gain little in preventing
this or tracking it.
2) No one could tell were your data comes from anyway - especially if
it is graph.
3) Fair Use

of course, I am not a lawyer...

Jeff


On Fri, Oct 7, 2011 at 1:11 PM, Andrew Miller <amille47 at illinois.edu> wrote:
> Thank you for all of your responses, they have helped a lot.
>
> One thing that interests me is how much analysis would have to be done to
> distribute the graphs? ?For example, would posting a simple graph of the
> price history, or the spread between two futures be acceptable without
> license? Or would only more involved graphs be acceptable?
>
> Thanks again,
>
> -Andrew
>
> On Fri, Oct 7, 2011 at 12:44 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
>
>>
>> On 7 October 2011 at 12:05, Brian G. Peterson wrote:
>> | On Fri, 2011-10-07 at 11:12 -0500, Dirk Eddelbuettel wrote:
>> | > Google/Yahoo actually pay the exchanges. That came up when Google
>> | > started to show real-time data in an Ajax-y form (that you can easily
>> | > program against) and some news stories at the time reported what deal
>> | > Google had struck with the NYSE etc.
>> |
>> | Of course they paid the exchange. ?So Google/Yahoo (obviously) have
>> | redistribution rights.
>> |
>> | The 'terms of use' almost certainly don't allow *you* to redistribute
>> | that *data* though. ?Thus my comment about consulting relevant
>> | contracts.
>>
>> Agreed. My response merely aimed to dash some cold water on your statement
>>
>> ? take advantage of 'loopholes' in the data pull methodologies provided by
>> ? Yahoo/Google/etc.
>>
>> as this is in fact not a loophole. The cgi interface at Yahoo! is fully
>> aware
>> of people programming against it, and I have both supported that interface
>> (via the Finance::YahooQuote module in the godforsaken Perl language) for
>> users, and deployed it daily myself for about a dozen years. No issue
>> there:
>> Yahoo pays, we get to use it, I doubt we can redistribute, consult a lawyer
>> for details, news at eleven.
>>
>> Andrew also asked about the dissemination of derived analysis (graphs etc).
>> which I think that is fine because that is your work rather that their raw
>> data. ?IANAL.
>>
>> Dirk
>>
>> PS There was also a 'not' missing in my 'program easily against ajax-y'. It
>> is not easy, or we all would have 'free' quasi-real-time data now.
>>
>> --
>> New Rcpp master class for R and C++ integration is scheduled for
>> San Francisco (Oct 8), more details / reg.info available at
>>
>> http://www.revolutionanalytics.com/products/training/public/rcpp-master-class.php
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From rhelpacc at gmail.com  Tue Oct 11 01:52:41 2011
From: rhelpacc at gmail.com (Robert A'gata)
Date: Mon, 10 Oct 2011 19:52:41 -0400
Subject: [R-SIG-Finance] Aggregate time series by key
Message-ID: <CAA7=MyWQXeZqdagdXh0r7Q2nXyjcdiNFj9A8B6cdb-irOiFnnQ@mail.gmail.com>

Hi,

I have a time series. Mostly trade time series which contain time,
tradeType, tradePrice and tradeSize columns. Says

                    trdType trdPrice trdSize
2011-10-07 12:17:50       3 1357.998       9
2011-10-07 12:29:10       1 1351.480       4
2011-10-07 12:30:56       3 1361.366       8
2011-10-07 12:30:58       1 1343.559       3
2011-10-07 12:32:33       3 1316.613       4
2011-10-07 12:34:20       2 1321.174       4
2011-10-07 12:35:17       3 1345.164      10
2011-10-07 12:40:06       1 1341.528      10
2011-10-07 12:40:23       2 1334.867       4
2011-10-07 12:43:03       2 1332.578       8


From rhelpacc at gmail.com  Tue Oct 11 01:57:33 2011
From: rhelpacc at gmail.com (Robert A'gata)
Date: Mon, 10 Oct 2011 19:57:33 -0400
Subject: [R-SIG-Finance] Aggregating time series by key and time
Message-ID: <CAA7=MyWPGMcgmC_ye8Dq3pfKko-OH6bGhzJAwase+vXJLgbeJA@mail.gmail.com>

Hi,

I have a time series. Mostly trade time series which contain time,
tradeType, tradePrice and tradeSize columns. Says

                                     trdType trdPrice trdSize
2011-10-07 12:17:50       3 1357.998       9
2011-10-07 12:29:10       1 1351.480       4
2011-10-07 12:30:56       3 1361.366       8
2011-10-07 12:30:56       3 1361.366       3
2011-10-07 12:32:33       3 1316.613       4
2011-10-07 12:34:20       2 1321.174       4
2011-10-07 12:35:17       3 1345.164      10
2011-10-07 12:40:23       1 1341.528      10
2011-10-07 12:40:23       2 1331.528       4
2011-10-07 12:43:03       2 1332.578       8

I'd like to aggregate trdSize for trades occurred at the same
timestamp and of the same trade type. So it is not only aggregating by
time. I'm wondering if there is a good way to do this. Any advice
would be greatly appreciated. For reference, the output of such a
function for the above example would be:

                                     trdType trdPrice trdSize
2011-10-07 12:17:50       3 1357.998       9
2011-10-07 12:29:10       1 1351.480       4
2011-10-07 12:30:56       3 1361.366      11
2011-10-07 12:32:33       3 1316.613       4
2011-10-07 12:34:20       2 1321.174       4
2011-10-07 12:35:17       3 1345.164      10
2011-10-07 12:40:23       1 1341.528      10
2011-10-07 12:40:23       2 1331.528       4
2011-10-07 12:43:03       2 1332.578       8

Because at 2011-10-07 12:30:56 we have 2 trades of trdType=3 occurred
with sizes 8 and 3. However, at 2011-10-07 12:40:23, we have 2 trades
occurred at the same price but they differ in trdType. So we do not
perform aggregation. Thank you.

Best regards,

Robert


From rkevinburton at charter.net  Tue Oct 11 04:28:45 2011
From: rkevinburton at charter.net (Kevin Burton)
Date: Mon, 10 Oct 2011 21:28:45 -0500
Subject: [R-SIG-Finance] Time given the week number and year.
Message-ID: <001801cc87bd$8039c4a0$80ad4de0$@charter.net>

I am trying to convert from a week number and year to a date. The first
thing I try

strptime("2011-01", "%Y-%W")

gives me:

[1] "2011-10-10"

This is wrong as the first week of the year is not in October. Any
suggestions on how I can do this conversion?

Thank you.

Kevin


From kkmalikov at suffolk.edu  Tue Oct 11 04:56:27 2011
From: kkmalikov at suffolk.edu (Kalisbek K Malikov)
Date: Tue, 11 Oct 2011 02:56:27 +0000
Subject: [R-SIG-Finance] Time given the week number and year.
In-Reply-To: <001801cc87bd$8039c4a0$80ad4de0$@charter.net>
References: <001801cc87bd$8039c4a0$80ad4de0$@charter.net>
Message-ID: <BFA49E7DDAB46D4E8C4B576E56CC491E3B9F70@srv-exch-mb04.adm.suffolk.edu>

You can try this:
as.Date(paste("2011-01","-01", sep=""))
[1] "2011-01-01"
Hope this helps.
Kalis.
-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Kevin Burton
Sent: Monday, October 10, 2011 10:29 PM
To: r-sig-finance at stat.math.ethz.ch
Subject: [R-SIG-Finance] Time given the week number and year.

I am trying to convert from a week number and year to a date. The first thing I try

strptime("2011-01", "%Y-%W")

gives me:

[1] "2011-10-10"

This is wrong as the first week of the year is not in October. Any suggestions on how I can do this conversion?

Thank you.

Kevin

_______________________________________________
R-SIG-Finance at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From rkevinburton at charter.net  Tue Oct 11 05:00:18 2011
From: rkevinburton at charter.net (Kevin Burton)
Date: Mon, 10 Oct 2011 22:00:18 -0500
Subject: [R-SIG-Finance] Time given the week number and year.
In-Reply-To: <BFA49E7DDAB46D4E8C4B576E56CC491E3B9F70@srv-exch-mb04.adm.suffolk.edu>
References: <001801cc87bd$8039c4a0$80ad4de0$@charter.net>
	<BFA49E7DDAB46D4E8C4B576E56CC491E3B9F70@srv-exch-mb04.adm.suffolk.edu>
Message-ID: <002b01cc87c1$e870b480$b9521d80$@charter.net>

The problem with this is that the week number is not specified. What if I
wanted the date for the second week of 2011? Third? Tenth? I cannot
hard-code "-01" for an arbitrary week. 

Thank you.

-----Original Message-----
From: Kalisbek K Malikov [mailto:kkmalikov at suffolk.edu] 
Sent: Monday, October 10, 2011 9:56 PM
To: Kevin Burton; r-sig-finance at stat.math.ethz.ch
Subject: RE: [R-SIG-Finance] Time given the week number and year.

You can try this:
as.Date(paste("2011-01","-01", sep=""))
[1] "2011-01-01"
Hope this helps.
Kalis.
-----Original Message-----
From: r-sig-finance-bounces at r-project.org
[mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Kevin Burton
Sent: Monday, October 10, 2011 10:29 PM
To: r-sig-finance at stat.math.ethz.ch
Subject: [R-SIG-Finance] Time given the week number and year.

I am trying to convert from a week number and year to a date. The first
thing I try

strptime("2011-01", "%Y-%W")

gives me:

[1] "2011-10-10"

This is wrong as the first week of the year is not in October. Any
suggestions on how I can do this conversion?

Thank you.

Kevin

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.


From kkmalikov at suffolk.edu  Tue Oct 11 05:20:41 2011
From: kkmalikov at suffolk.edu (Kalisbek K Malikov)
Date: Tue, 11 Oct 2011 03:20:41 +0000
Subject: [R-SIG-Finance] Time given the week number and year.
In-Reply-To: <002b01cc87c1$e870b480$b9521d80$@charter.net>
References: <001801cc87bd$8039c4a0$80ad4de0$@charter.net>
	<BFA49E7DDAB46D4E8C4B576E56CC491E3B9F70@srv-exch-mb04.adm.suffolk.edu>
	<002b01cc87c1$e870b480$b9521d80$@charter.net>
Message-ID: <BFA49E7DDAB46D4E8C4B576E56CC491E3B9FAF@srv-exch-mb04.adm.suffolk.edu>

Try this one:
as.Date(paste("2011-04","-01", sep=""), format="%Y-%W-%w")
>[1] "2011-01-23"
Kalis.

-----Original Message-----
From: Kevin Burton [mailto:rkevinburton at charter.net] 
Sent: Monday, October 10, 2011 11:00 PM
To: Kalisbek K Malikov; r-sig-finance at stat.math.ethz.ch
Subject: RE: [R-SIG-Finance] Time given the week number and year.

The problem with this is that the week number is not specified. What if I wanted the date for the second week of 2011? Third? Tenth? I cannot hard-code "-01" for an arbitrary week. 

Thank you.

-----Original Message-----
From: Kalisbek K Malikov [mailto:kkmalikov at suffolk.edu]
Sent: Monday, October 10, 2011 9:56 PM
To: Kevin Burton; r-sig-finance at stat.math.ethz.ch
Subject: RE: [R-SIG-Finance] Time given the week number and year.

You can try this:
as.Date(paste("2011-01","-01", sep=""))
[1] "2011-01-01"
Hope this helps.
Kalis.
-----Original Message-----
From: r-sig-finance-bounces at r-project.org
[mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Kevin Burton
Sent: Monday, October 10, 2011 10:29 PM
To: r-sig-finance at stat.math.ethz.ch
Subject: [R-SIG-Finance] Time given the week number and year.

I am trying to convert from a week number and year to a date. The first thing I try

strptime("2011-01", "%Y-%W")

gives me:

[1] "2011-10-10"

This is wrong as the first week of the year is not in October. Any suggestions on how I can do this conversion?

Thank you.

Kevin

_______________________________________________
R-SIG-Finance at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From johnny.jp.22 at gmail.com  Tue Oct 11 11:28:22 2011
From: johnny.jp.22 at gmail.com (Johnny Paulo)
Date: Tue, 11 Oct 2011 10:28:22 +0100
Subject: [R-SIG-Finance] IBrokers and real time forex data
Message-ID: <CAJi8HmbYABvyxGwJoCou3thm7Dai_rg0=H12+jN=92r5Rqxa6A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111011/5ac639d3/attachment.pl>

From ravi.aranke at gmail.com  Tue Oct 11 12:55:03 2011
From: ravi.aranke at gmail.com (Ravi Aranke)
Date: Tue, 11 Oct 2011 16:25:03 +0530
Subject: [R-SIG-Finance] Aggregating time series by key and time (Robert
	A'gata)
Message-ID: <CANgz2Oicg2DvKfnO=9c94xse0kitt7M3FUw3Sw=BUzkowAzA5A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111011/6bf8038c/attachment.pl>

From gsee000 at gmail.com  Tue Oct 11 12:56:34 2011
From: gsee000 at gmail.com (G See)
Date: Tue, 11 Oct 2011 05:56:34 -0500
Subject: [R-SIG-Finance] IBrokers and real time forex data
In-Reply-To: <CAJi8HmbYABvyxGwJoCou3thm7Dai_rg0=H12+jN=92r5Rqxa6A@mail.gmail.com>
References: <CAJi8HmbYABvyxGwJoCou3thm7Dai_rg0=H12+jN=92r5Rqxa6A@mail.gmail.com>
Message-ID: <CA+xi=qbECu2ou5u7Cisvqp0qmj_rS3kAivvZvCLSRd7mayMDAQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111011/dcbced70/attachment.pl>

From ayhan.yuksel at finansportfoy.com  Tue Oct 11 17:21:31 2011
From: ayhan.yuksel at finansportfoy.com (ayuksel)
Date: Tue, 11 Oct 2011 08:21:31 -0700 (PDT)
Subject: [R-SIG-Finance] timeSeries Error
In-Reply-To: <4BCF81EA.7050604@itp.phys.ethz.ch>
References: <AD34C27D4F3A0649ACE5DB999EC62E50112ABAEA@LCPPW1089.corp.statestr.com>
	<4BCF81EA.7050604@itp.phys.ethz.ch>
Message-ID: <1318346491487-3894796.post@n4.nabble.com>

Hi,

I get the same problem.

I guess the problem may be related to masking some of the objects by
different packages.

When I only load fPortfolio, everthing seems to be OK:

> library(fPortfolio)
> LPP = 100 * as.timeSeries(data(LPP2005REC))[, 1:3] 
> class(LPP)
[1] "timeSeries"
attr(,"package")
[1] "timeSeries"

However, when I load fSeries package, I got an error:
> library(fSeries)
> LPP = 100 * as.timeSeries(data(LPP2005REC))[, 1:3] 
Error in .local(.Object, ...) : 
unused argument(s) (Data = c(5,4,....)

Any suggestions?

Regards,

Ayhan Yuksel



--
View this message in context: http://r.789695.n4.nabble.com/timeSeries-Error-tp2019185p3894796.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jeffrey.ryan at lemnica.com  Tue Oct 11 17:25:19 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Tue, 11 Oct 2011 10:25:19 -0500
Subject: [R-SIG-Finance] timeSeries Error
In-Reply-To: <1318346491487-3894796.post@n4.nabble.com>
References: <AD34C27D4F3A0649ACE5DB999EC62E50112ABAEA@LCPPW1089.corp.statestr.com>
	<4BCF81EA.7050604@itp.phys.ethz.ch>
	<1318346491487-3894796.post@n4.nabble.com>
Message-ID: <CABDUZc-kskDZ=6vzL2vFZKF+P1Rkc6R4dZ5Eb1GRguvR13E2rQ@mail.gmail.com>

The fSeries package has long since been deprecated IIRC.

Try timeSeries instead.

Best,
Jeff

On Tue, Oct 11, 2011 at 10:21 AM, ayuksel
<ayhan.yuksel at finansportfoy.com> wrote:
> Hi,
>
> I get the same problem.
>
> I guess the problem may be related to masking some of the objects by
> different packages.
>
> When I only load fPortfolio, everthing seems to be OK:
>
>> library(fPortfolio)
>> LPP = 100 * as.timeSeries(data(LPP2005REC))[, 1:3]
>> class(LPP)
> [1] "timeSeries"
> attr(,"package")
> [1] "timeSeries"
>
> However, when I load fSeries package, I got an error:
>> library(fSeries)
>> LPP = 100 * as.timeSeries(data(LPP2005REC))[, 1:3]
> Error in .local(.Object, ...) :
> unused argument(s) (Data = c(5,4,....)
>
> Any suggestions?
>
> Regards,
>
> Ayhan Yuksel
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/timeSeries-Error-tp2019185p3894796.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From johnny.jp.22 at gmail.com  Tue Oct 11 17:26:36 2011
From: johnny.jp.22 at gmail.com (Johnny Paulo)
Date: Tue, 11 Oct 2011 16:26:36 +0100
Subject: [R-SIG-Finance] IBrokers and real time forex data
In-Reply-To: <CAJi8HmbYABvyxGwJoCou3thm7Dai_rg0=H12+jN=92r5Rqxa6A@mail.gmail.com>
References: <CAJi8HmbYABvyxGwJoCou3thm7Dai_rg0=H12+jN=92r5Rqxa6A@mail.gmail.com>
Message-ID: <CAJi8HmZ82XJ-1n62FGCZsLWp6bArMthWMY0ZLHPCwTHyyo_Nhg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111011/ce9809fa/attachment.pl>

From evil_iggy1936 at hotmail.com  Tue Oct 11 17:55:15 2011
From: evil_iggy1936 at hotmail.com (Bryson Hadley)
Date: Tue, 11 Oct 2011 15:55:15 +0000
Subject: [R-SIG-Finance] probit model on time series
Message-ID: <BAY151-W32C5768D952FB5F4EFEFFC9BE20@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111011/05bf5e77/attachment.pl>

From matti.zemack at gmail.com  Tue Oct 11 19:47:34 2011
From: matti.zemack at gmail.com (Matti Zemack)
Date: Tue, 11 Oct 2011 19:47:34 +0200
Subject: [R-SIG-Finance] Trying to plot intraday data on multiple daily plots
Message-ID: <743E4D54-F1A6-40FD-AABD-8E5B0325E374@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111011/a436103e/attachment.pl>

From arun.k at bridgei2i.com  Tue Oct 11 20:39:28 2011
From: arun.k at bridgei2i.com (Arun Krishnamoorthy)
Date: Wed, 12 Oct 2011 00:09:28 +0530
Subject: [R-SIG-Finance] XML Package - Writing XML files in specific format
Message-ID: <004c01cc8845$1c906d90$55b148b0$@k@bridgei2i.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111012/5eb5c0be/attachment.pl>

From bbands at gmail.com  Tue Oct 11 23:27:41 2011
From: bbands at gmail.com (BBands)
Date: Tue, 11 Oct 2011 14:27:41 -0700
Subject: [R-SIG-Finance] The Art of R Programming
Message-ID: <CAGS5yBUGr_+DKF2zLyLDo-HRbQ260WX118_d7fgWY6De1gihaA@mail.gmail.com>

by Norman Matloff

My copy arrived today and at first glance it looks like a worthy
addition to the R literature. While not explicitly finance oriented,
it does look like it might be of interest to some on this list.

Best,

John


From josh.m.ulrich at gmail.com  Wed Oct 12 05:05:03 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 11 Oct 2011 22:05:03 -0500
Subject: [R-SIG-Finance] Trying to plot intraday data on multiple daily
	plots
In-Reply-To: <743E4D54-F1A6-40FD-AABD-8E5B0325E374@gmail.com>
References: <743E4D54-F1A6-40FD-AABD-8E5B0325E374@gmail.com>
Message-ID: <CAPPM_gSYAo5SsJ1DrDBCdzHwirA=VK0i7bJZHRCC9SYon_0jaw@mail.gmail.com>

Your example isn't reproducible and I don't have example data at hand,
so here's my guess: "datte" is a Date class object, but (according to
?chart_Series) the subset argument of chart_Series is supposed to be a
character string.
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com



On Tue, Oct 11, 2011 at 12:47 PM, Matti Zemack <matti.zemack at gmail.com> wrote:
> Hi all,
>
>
> I'm very new to R. And love it so far.
> Lately I've got interested in pre market + market up until 11am.
>
> So, I thought some graphical presentation would help me figure what's going on. I'm interested in MULTIPLE OHLC-plots on ONE sheet of paper. On plot (i.e. chart_Series) for every date, with 5 min candlesticks.
>
> Intraday-data is 1 min OHLC in a MySQL.
>
>
> Code so far:
>
> -------
> #Setup
> library(quantmod)
> library(RMySQL)
> drv <- dbDriver("MySQL")
> ch <- dbConnect(drv,dbname="databaseName","Login","Pass")
>
> #Get intraday data
> allQuotes <- dbGetQuery(ch,'SELECT CONCAT(date, " ", startTime) as dateTime, open as Open, high as High, low as Low, close as Close from quantQuoteData WHERE timeFrame=1 AND startTime<"11:00:00" AND date>="2011-08-01" AND date<="2011-08-31" AND ?typ="spy"')
>
> #Make xts
> mzGSPC1 <- xts(allQuotes[,-1],order.by=as.POSIXlt(allQuotes[,1]))
>
> #Aggregate to 5mins OHLC
> mzGSPC5<-to.minutes5(mzGSPC1)
>
> #This works, but obviously not a way a programmer would produce plots
> par(mfrow=c(4,4))
> a<-"2011-08-01"
> chart_Series(mzGSPC5, subset=a)
> b<-"2011-08-02"
> chart_Series(mzGSPC5, subset=b)
> c<-"2011-08-03"
> chart_Series(mzGSPC5, subset=c)
> d<-"2011-08-04"
> chart_Series(mzGSPC5, subset=d)
> ...
>
> #Now trying to loop per date instead as I understand ONE chart_Series command must be sent for every plot.
> #Excuse me for my (probably) ugly way of retrieving the dates for the loop, but I'm new to R?.
> par(mfrow=c(4,4))
> mzGSPCdaily<-to.daily(mzGSPC5)
> for (i in 1:length(mzGSPCdaily[,1])) {
> ?datte<-as.Date(time(mzGSPCdaily[i]))
> ?#Below print is just for verifying that I receive dates
> ?print(datte) ? #This works and prints the dates "2011-08-01", "2011-08-02"...
> ?chart_Series(mzGSPC5, subset=datte)
> }
>
> ----------
> This chart_Series gives me an error:
> Error in plot.window(c(1, 0), c(NaN, NaN)) : need finite 'ylim' values
> In addition: Warning messages:
> 1: In min(x) : no non-missing arguments to min; returning Inf
> 2: In max(x) : no non-missing arguments to max; returning -Inf
>
> And I just cannot understand why my manual dating works, but not the looping version?
>
> Also I am grateful if you [smarter] people can find other stupid things I'm doing.
>
> Thanks in advance for all help,
> Thanks also for all the packages you programmers have spent time on.
>
> Regards,
> Matti Zemack
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From schouwla at yahoo.com  Wed Oct 12 06:40:07 2011
From: schouwla at yahoo.com (Lars Schouw)
Date: Tue, 11 Oct 2011 21:40:07 -0700
Subject: [R-SIG-Finance] 4
Message-ID: <1318394407.38513.yint-ygo-j2me@web130105.mail.mud.yahoo.com>

...In my opinion there?s nothing better than have a good health.  http://eblbahamas.com/com.friend.php?paqpage=35j0


From brian at braverock.com  Wed Oct 12 12:42:13 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 12 Oct 2011 05:42:13 -0500
Subject: [R-SIG-Finance] XML Package - Writing XML files in specific
 format
In-Reply-To: <004c01cc8845$1c906d90$55b148b0$@k@bridgei2i.com>
References: <004c01cc8845$1c906d90$55b148b0$@k@bridgei2i.com>
Message-ID: <1318416133.27117.13.camel@brian-desktop>

On Wed, 2011-10-12 at 00:09 +0530, Arun Krishnamoorthy wrote:
> I'm a very new user of the XML package and am convinced that XML files
> surely make applications light and flexible to use. Thanks for this
> package.

> I'm looking to write an XML file from a 1-way, 2-way and 3 -way
> frequency table in a specific format.

This question has nothing to do with finance.

You should see on the bottom of every message to R-SIG-Finance:

> -- Also note that this is not the r-help list where 
> general R questions should go.

Please review the posting guide:

http://www.r-project.org/posting-guide.html

paying specific attention to the sections 
'Do your homework before posting' and 'Examples'
and then create a reproducible example (with code! not just text!)
with what you've tried and where, specifically, your problem is.  All
you've done now is ask someone else to do it for you.

After you've done both of the above, I suggest you post your new query
to r-help, where you'll likely get someone to help you.

 
-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From arun.k at bridgei2i.com  Wed Oct 12 13:21:00 2011
From: arun.k at bridgei2i.com (Arun Krishnamoorthy)
Date: Wed, 12 Oct 2011 16:51:00 +0530
Subject: [R-SIG-Finance] XML Package - Writing XML files in specific
	format
In-Reply-To: <1318416133.27117.13.camel@brian-desktop>
References: <004c01cc8845$1c906d90$55b148b0$@k@bridgei2i.com>
	<1318416133.27117.13.camel@brian-desktop>
Message-ID: <008601cc88d1$05a5dc00$10f19400$@k@bridgei2i.com>

Thanks, Brian. Very new to R..i see how it works.

-----Original Message-----
From: Brian G. Peterson [mailto:brian at braverock.com] 
Sent: 12 October 2011 16:12
To: Arun Krishnamoorthy
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] XML Package - Writing XML files in specific format

On Wed, 2011-10-12 at 00:09 +0530, Arun Krishnamoorthy wrote:
> I'm a very new user of the XML package and am convinced that XML files
> surely make applications light and flexible to use. Thanks for this
> package.

> I'm looking to write an XML file from a 1-way, 2-way and 3 -way
> frequency table in a specific format.

This question has nothing to do with finance.

You should see on the bottom of every message to R-SIG-Finance:

> -- Also note that this is not the r-help list where 
> general R questions should go.

Please review the posting guide:

http://www.r-project.org/posting-guide.html

paying specific attention to the sections 
'Do your homework before posting' and 'Examples'
and then create a reproducible example (with code! not just text!)
with what you've tried and where, specifically, your problem is.  All
you've done now is ask someone else to do it for you.

After you've done both of the above, I suggest you post your new query
to r-help, where you'll likely get someone to help you.

 
-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From matti.zemack at gmail.com  Wed Oct 12 16:42:43 2011
From: matti.zemack at gmail.com (Matti Zemack)
Date: Wed, 12 Oct 2011 16:42:43 +0200
Subject: [R-SIG-Finance] Trying to plot intraday data on multiple daily
	plots
In-Reply-To: <CAPPM_gSYAo5SsJ1DrDBCdzHwirA=VK0i7bJZHRCC9SYon_0jaw@mail.gmail.com>
References: <743E4D54-F1A6-40FD-AABD-8E5B0325E374@gmail.com>
	<CAPPM_gSYAo5SsJ1DrDBCdzHwirA=VK0i7bJZHRCC9SYon_0jaw@mail.gmail.com>
Message-ID: <97B27276-C0BA-470A-9939-692F9271497E@gmail.com>

Hi all again,

Thanks Joshua, you were absolutely correct in the error you spotted.
I fixed it by inserting;
    date<-toString(datte)
before the chart_Series instruction. (See in edit to my original post below)

But I still couldn't get the plotting from chart_Series to work within the loop.

I was using chart_Series (still in alpha?) because I needed the   par(mfrow=c(5,5))   which is not available in chartSeries.
And the chart_Series gave me problems with the graphing not working in the loop?

Anyway, I decided to go the pdf-route. I instead use chartSeries with output to a pdf which is stable. And printed the pdf with 16 pages on one page. This is a perfectly working workaround waiting for a stable chart_Series.

Thanks to all package developers, all time you spent on the packages has made life much easier for me.

Regards,
Matti Zemack


-----
Matti Zemack, Broadcast Technology, Stockholm, Sweden
matti.zemack at gmail.com

On 12 okt 2011, at 05:05, Joshua Ulrich wrote:

> Your example isn't reproducible and I don't have example data at hand,
> so here's my guess: "datte" is a Date class object, but (according to
> ?chart_Series) the subset argument of chart_Series is supposed to be a
> character string.
> --
> Joshua Ulrich  |  FOSS Trading: www.fosstrading.com
> 
> 
> 
> On Tue, Oct 11, 2011 at 12:47 PM, Matti Zemack <matti.zemack at gmail.com> wrote:
>> #Now trying to loop per date instead as I understand ONE chart_Series command must be sent for every plot.
>> #Excuse me for my (probably) ugly way of retrieving the dates for the loop, but I'm new to R?.
>> par(mfrow=c(4,4))
>> mzGSPCdaily<-to.daily(mzGSPC5)
>> for (i in 1:length(mzGSPCdaily[,1])) {
>>  datte<-as.Date(time(mzGSPCdaily[i]))
>>  #Below print is just for verifying that I receive dates
	
	datteStr<-toString(datte)
	
>>  print(datteStr)   #This works and prints the dates "2011-08-01", "2011-08-02"...
>>  chart_Series(mzGSPC5, subset=datteStr)
>> }


From jeffrey.ryan at lemnica.com  Wed Oct 12 16:50:06 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Wed, 12 Oct 2011 09:50:06 -0500
Subject: [R-SIG-Finance] Trying to plot intraday data on multiple daily
	plots
In-Reply-To: <97B27276-C0BA-470A-9939-692F9271497E@gmail.com>
References: <743E4D54-F1A6-40FD-AABD-8E5B0325E374@gmail.com>
	<CAPPM_gSYAo5SsJ1DrDBCdzHwirA=VK0i7bJZHRCC9SYon_0jaw@mail.gmail.com>
	<97B27276-C0BA-470A-9939-692F9271497E@gmail.com>
Message-ID: <CABDUZc_XO0jFsFTCg=cYJnMy07cpx_JfpiU_r8wHrWof94QOKQ@mail.gmail.com>

Without the data it makes diagnosing a multistep process for others -
so typically fails to be undertaken.

Working blindly (until I find the time to pull some intraday data and
test), I suspect you may just need to call plot() around your
chart_Series calls.

This is documented behavior - as the actual plotting only occurs from
the 'print' method (in turn calls plot()).  Basically allows for
interactive usage (highly desirable) as well as delayed evaluation
until the chart is ready to be printed.  The downside is that it fails
to print in cases like you describe.

Again, this is just a guess.  You could also work up an example using
getSymbols and yahoo data and plot the weeks or months to give us a
reproducible example.

HTH,
Jeff

On Wed, Oct 12, 2011 at 9:42 AM, Matti Zemack <matti.zemack at gmail.com> wrote:
> Hi all again,
>
> Thanks Joshua, you were absolutely correct in the error you spotted.
> I fixed it by inserting;
> ? ?date<-toString(datte)
> before the chart_Series instruction. (See in edit to my original post below)
>
> But I still couldn't get the plotting from chart_Series to work within the loop.
>
> I was using chart_Series (still in alpha?) because I needed the ? par(mfrow=c(5,5)) ? which is not available in chartSeries.
> And the chart_Series gave me problems with the graphing not working in the loop?
>
> Anyway, I decided to go the pdf-route. I instead use chartSeries with output to a pdf which is stable. And printed the pdf with 16 pages on one page. This is a perfectly working workaround waiting for a stable chart_Series.
>
> Thanks to all package developers, all time you spent on the packages has made life much easier for me.
>
> Regards,
> Matti Zemack
>
>
> -----
> Matti Zemack, Broadcast Technology, Stockholm, Sweden
> matti.zemack at gmail.com
>
> On 12 okt 2011, at 05:05, Joshua Ulrich wrote:
>
>> Your example isn't reproducible and I don't have example data at hand,
>> so here's my guess: "datte" is a Date class object, but (according to
>> ?chart_Series) the subset argument of chart_Series is supposed to be a
>> character string.
>> --
>> Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com
>>
>>
>>
>> On Tue, Oct 11, 2011 at 12:47 PM, Matti Zemack <matti.zemack at gmail.com> wrote:
>>> #Now trying to loop per date instead as I understand ONE chart_Series command must be sent for every plot.
>>> #Excuse me for my (probably) ugly way of retrieving the dates for the loop, but I'm new to R?.
>>> par(mfrow=c(4,4))
>>> mzGSPCdaily<-to.daily(mzGSPC5)
>>> for (i in 1:length(mzGSPCdaily[,1])) {
>>> ?datte<-as.Date(time(mzGSPCdaily[i]))
>>> ?#Below print is just for verifying that I receive dates
>
> ? ? ? ?datteStr<-toString(datte)
>
>>> ?print(datteStr) ? #This works and prints the dates "2011-08-01", "2011-08-02"...
>>> ?chart_Series(mzGSPC5, subset=datteStr)
>>> }
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From arun at sonis.eu  Wed Oct 12 22:40:37 2011
From: arun at sonis.eu (Arun Soni)
Date: Wed, 12 Oct 2011 21:40:37 +0100
Subject: [R-SIG-Finance] fmfit in facmod in R-Forge
Message-ID: <66D7C789-9BAF-453C-AC86-824B609F4C16@sonis.eu>

I am trying to use the default data set in the facmod package to generate a factor model but I keep getting an error "Error in as.Date.numeric(as.numeric(names(FE.hat))) : 
  'origin' must be supplied"

I have tried formatting my dates vector many ways but the error persists, I could really use some assistance in troubleshooting this problem.  Here is my R code

===================================================================================
library(facmod)
data(fmdata)
myTime<-row.names(fmdata at data)
myTime<-as.Date(myTime,"%Y-%m-%d")

myExposure<-c("LOG.MARKETCAP","BOOK2MARKET","GICS.INDUSTRY","NET.INCOME.CA172","LTDEBT.CA009")
myID<-getAssetIDs(fmdata)
myName<-getAssetLabels(fmdata)


myModel<-fmfit(fmdata, timedates=myTime, exposures=myExposure, assets=myID, wls = T, 
      regression = "classic", covariance = "classic", 
      full.resid.cov = F, robust.scale = F, 
      returnsvar = "RETURN", verbose = F)
====================================================================================

Regards

Arun

From daniel.cegielka at gmail.com  Fri Oct 14 15:07:20 2011
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Fri, 14 Oct 2011 15:07:20 +0200
Subject: [R-SIG-Finance] Data (Was: TZs)
In-Reply-To: <CABDUZc_k-daKOW8T7bOvtee=Y-vHh90VQO43PBYCKozVPoDFwA@mail.gmail.com>
References: <mailman.3.1317981601.18402.r-sig-finance@r-project.org>
	<FA3993A7-F717-4DFC-B986-96D204B5E3D1@gmail.com>
	<CAC6OWa8Acf_vh5eg5J6-v4EtQY1ZQpf4x01JFbRSc1rMR6zXwg@mail.gmail.com>
	<1318002083.6600.285.camel@brian-rcg>
	<20111.9459.189242.205355@max.nulle.part>
	<1318007150.6600.288.camel@brian-rcg>
	<20111.14990.8822.352079@max.nulle.part>
	<CAC6OWa_5pBNb_LLE+L7gdfpQ-5KnmS2e1WD+0fm8sdT=3Gw3dQ@mail.gmail.com>
	<CABDUZc_k-daKOW8T7bOvtee=Y-vHh90VQO43PBYCKozVPoDFwA@mail.gmail.com>
Message-ID: <CAPLrYERZk64W3Vn4ezfayJ=LNJLzGjHu3ych1+=SN+ADpZqWOA@mail.gmail.com>

http://blog.joda.org/2011/10/time-zone-database-rebooted.html

regards,
daniel



2011/10/7 Jeffrey Ryan <jeffrey.ryan at lemnica.com>:
> Posting simple graphs, even raw data is *likely* to be okay for three reasons:
>
> 1) No one will care. Yahoo, CME, etc would gain little in preventing
> this or tracking it.
> 2) No one could tell were your data comes from anyway - especially if
> it is graph.
> 3) Fair Use
>
> of course, I am not a lawyer...
>
> Jeff
>
>
> On Fri, Oct 7, 2011 at 1:11 PM, Andrew Miller <amille47 at illinois.edu> wrote:
>> Thank you for all of your responses, they have helped a lot.
>>
>> One thing that interests me is how much analysis would have to be done to
>> distribute the graphs? ?For example, would posting a simple graph of the
>> price history, or the spread between two futures be acceptable without
>> license? Or would only more involved graphs be acceptable?
>>
>> Thanks again,
>>
>> -Andrew
>>
>> On Fri, Oct 7, 2011 at 12:44 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
>>
>>>
>>> On 7 October 2011 at 12:05, Brian G. Peterson wrote:
>>> | On Fri, 2011-10-07 at 11:12 -0500, Dirk Eddelbuettel wrote:
>>> | > Google/Yahoo actually pay the exchanges. That came up when Google
>>> | > started to show real-time data in an Ajax-y form (that you can easily
>>> | > program against) and some news stories at the time reported what deal
>>> | > Google had struck with the NYSE etc.
>>> |
>>> | Of course they paid the exchange. ?So Google/Yahoo (obviously) have
>>> | redistribution rights.
>>> |
>>> | The 'terms of use' almost certainly don't allow *you* to redistribute
>>> | that *data* though. ?Thus my comment about consulting relevant
>>> | contracts.
>>>
>>> Agreed. My response merely aimed to dash some cold water on your statement
>>>
>>> ? take advantage of 'loopholes' in the data pull methodologies provided by
>>> ? Yahoo/Google/etc.
>>>
>>> as this is in fact not a loophole. The cgi interface at Yahoo! is fully
>>> aware
>>> of people programming against it, and I have both supported that interface
>>> (via the Finance::YahooQuote module in the godforsaken Perl language) for
>>> users, and deployed it daily myself for about a dozen years. No issue
>>> there:
>>> Yahoo pays, we get to use it, I doubt we can redistribute, consult a lawyer
>>> for details, news at eleven.
>>>
>>> Andrew also asked about the dissemination of derived analysis (graphs etc).
>>> which I think that is fine because that is your work rather that their raw
>>> data. ?IANAL.
>>>
>>> Dirk
>>>
>>> PS There was also a 'not' missing in my 'program easily against ajax-y'. It
>>> is not easy, or we all would have 'free' quasi-real-time data now.
>>>
>>> --
>>> New Rcpp master class for R and C++ integration is scheduled for
>>> San Francisco (Oct 8), more details / reg.info available at
>>>
>>> http://www.revolutionanalytics.com/products/training/public/rcpp-master-class.php
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>>
>> ? ? ? ?[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>
>
>
> --
> Jeffrey Ryan
> jeffrey.ryan at lemnica.com
>
> www.lemnica.com
> www.esotericR.com
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From ivan.zhang at bankofamerica.com  Fri Oct 14 19:21:38 2011
From: ivan.zhang at bankofamerica.com (Zhang, Ivan)
Date: Fri, 14 Oct 2011 13:21:38 -0400
Subject: [R-SIG-Finance] issues with zoo masking as.Date function,
	resulting in issues with as.Date
Message-ID: <259640267CB3094FA5A4F65F2AB3CB02310940AE@ex2k.bankofamerica.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111014/5ef89f0b/attachment.pl>

From ggrothendieck at gmail.com  Fri Oct 14 20:19:46 2011
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 14 Oct 2011 14:19:46 -0400
Subject: [R-SIG-Finance] issues with zoo masking as.Date function,
 resulting in issues with as.Date
In-Reply-To: <259640267CB3094FA5A4F65F2AB3CB02310940AE@ex2k.bankofamerica.com>
References: <259640267CB3094FA5A4F65F2AB3CB02310940AE@ex2k.bankofamerica.com>
Message-ID: <CAP01uRnfhGy2eQCHvWUeYs68bd6ARWbHEWhvMyOC019y3k+NoQ@mail.gmail.com>

On Fri, Oct 14, 2011 at 1:21 PM, Zhang, Ivan
<ivan.zhang at bankofamerica.com> wrote:
> Hi Everyone,
>
> I just upgraded to 2.13, this seems like a very obvious issue however I haven't seen this addressed anywhere, perhaps I am missing something elementary?
>
> library(timeDate)
>> as.Date(timeDate('2011-10-10'))
> [1] "2011-10-10"
>> library(zoo)
>
> Attaching package: 'zoo'
>
> The following object(s) are masked from 'package:base':
>
> ? ?as.Date
>
>> as.Date(timeDate('2011-10-10'))
> Error in as.Date.default(timeDate("2011-10-10")) :
> ?do not know how to convert 'timeDate("2011-10-10")' to class "Date"
>>
>

The timeDate package needs to export as.Date.timeDate in its NAMESPACE
file .   As a workaround you can do this:

> as.Date.timeDate <- timeDate:::as.Date.timeDate
> as.Date(timeDate('2011-10-10'))
[1] "2011-10-10"

-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From ivan.zhang at bankofamerica.com  Fri Oct 14 20:43:50 2011
From: ivan.zhang at bankofamerica.com (Zhang, Ivan)
Date: Fri, 14 Oct 2011 14:43:50 -0400
Subject: [R-SIG-Finance] issues with zoo masking as.Date function,
	resulting in issues with as.Date
In-Reply-To: <CAP01uRnfhGy2eQCHvWUeYs68bd6ARWbHEWhvMyOC019y3k+NoQ@mail.gmail.com>
References: <259640267CB3094FA5A4F65F2AB3CB02310940AE@ex2k.bankofamerica.com>
	<CAP01uRnfhGy2eQCHvWUeYs68bd6ARWbHEWhvMyOC019y3k+NoQ@mail.gmail.com>
Message-ID: <259640267CB3094FA5A4F65F2AB3CB02310940B2@ex2k.bankofamerica.com>

Thanks for the quick response, that seems to have worked.

-----Original Message-----
From: Gabor Grothendieck [mailto:ggrothendieck at gmail.com] 
Sent: Friday, October 14, 2011 2:20 PM
To: Zhang, Ivan
Cc: r-sig-finance
Subject: Re: [R-SIG-Finance] issues with zoo masking as.Date function, resulting in issues with as.Date

On Fri, Oct 14, 2011 at 1:21 PM, Zhang, Ivan <ivan.zhang at bankofamerica.com> wrote:
> Hi Everyone,
>
> I just upgraded to 2.13, this seems like a very obvious issue however I haven't seen this addressed anywhere, perhaps I am missing something elementary?
>
> library(timeDate)
>> as.Date(timeDate('2011-10-10'))
> [1] "2011-10-10"
>> library(zoo)
>
> Attaching package: 'zoo'
>
> The following object(s) are masked from 'package:base':
>
> ? ?as.Date
>
>> as.Date(timeDate('2011-10-10'))
> Error in as.Date.default(timeDate("2011-10-10")) :
> ?do not know how to convert 'timeDate("2011-10-10")' to class "Date"
>>
>

The timeDate package needs to export as.Date.timeDate in its NAMESPACE
file .   As a workaround you can do this:

> as.Date.timeDate <- timeDate:::as.Date.timeDate
> as.Date(timeDate('2011-10-10'))
[1] "2011-10-10"

--
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com

----------------------------------------------------------------------
This message w/attachments (message) is intended solely for the use of the intended recipient(s) and may contain information that is privileged, confidential or proprietary. If you are not an intended recipient, please notify the sender, and then please delete and destroy all copies and attachments, and be advised that any review or dissemination of, or the taking of any action in reliance on, the information contained in or attached to this message is prohibited. 
Unless specifically indicated, this message is not an offer to sell or a solicitation of any investment products or other financial product or service, an official confirmation of any transaction, or an official statement of Sender. Subject to applicable law, Sender may intercept, monitor, review and retain e-communications (EC) traveling through its networks/systems and may produce any such EC to regulators, law enforcement, in litigation and as required by law. 
The laws of the country of each sender/recipient may impact the handling of EC, and EC may be archived, supervised and produced in countries other than the country in which you are located. This message cannot be guaranteed to be secure or free of errors or viruses. 

References to "Sender" are references to any subsidiary of Bank of America Corporation. Securities and Insurance Products: * Are Not FDIC Insured * Are Not Bank Guaranteed * May Lose Value * Are Not a Bank Deposit * Are Not a Condition to Any Banking Service or Activity * Are Not Insured by Any Federal Government Agency. Attachments that are part of this EC may have additional important disclosures and disclaimers, which you should read. This message is subject to terms available at the following link: 
http://www.bankofamerica.com/emaildisclaimer. By messaging with Sender you consent to the foregoing.


From bbands at gmail.com  Fri Oct 14 22:29:57 2011
From: bbands at gmail.com (BBands)
Date: Fri, 14 Oct 2011 13:29:57 -0700
Subject: [R-SIG-Finance] The Art of R Programming
In-Reply-To: <CAGS5yBUGr_+DKF2zLyLDo-HRbQ260WX118_d7fgWY6De1gihaA@mail.gmail.com>
References: <CAGS5yBUGr_+DKF2zLyLDo-HRbQ260WX118_d7fgWY6De1gihaA@mail.gmail.com>
Message-ID: <CAGS5yBWLGE8rKMSFe08bHRJaYjP4bhKfXdhrKKkAqmtb_1Bykg@mail.gmail.com>

I also note that O'Reilly is out with "Getting Started with RStudio:
An Integrated Development Environment for R" by John Verzani. I've
ordered mine, but I haven't seen it yet.

http://shop.oreilly.com/product/0636920021278.do

Best,

John


From cliffclive at gmail.com  Sun Oct 16 14:31:12 2011
From: cliffclive at gmail.com (Cliff Clive)
Date: Sun, 16 Oct 2011 05:31:12 -0700 (PDT)
Subject: [R-SIG-Finance] Filling a time series with Last Ask, Last Bid, etc
Message-ID: <1318768272018-3909390.post@n4.nabble.com>

I'm sure I've done this before but for the life of me I can't remember how.

I'm working with a tick data series in the following format:

/        Date    Time     Type  Price Quantity
2010-02-22 9:00:00 BEST_ASK 64.246        1
2010-02-22 9:00:10    TRADE 64.246      100
2010-02-22 9:00:10 BEST_ASK 64.260        1
2010-02-22 9:00:10 BEST_BID 64.232        1
2010-02-22 9:00:10 BEST_ASK 64.260        1
2010-02-22 9:00:10 BEST_BID 64.232        2/

and I'm trying to add columns that give the most recent Bid, Ask, and Trade
prices.
So far I've done it using a for loop, but that's obviously way too slow.

So I ran the following code:
/StockA$LastBid = ifelse(StockA$Type=="BEST_BID",StockA$Price, 0)
StockA$LastAsk = ifelse(StockA$Type=="BEST_ASK",StockA$Price, 0)
StockA$LastTrade = ifelse(StockA$Type=="TRADE",StockA$Price, 0)/

and turned the table into this:
/        Date    Time     Type  Price Quantity LastBid LastAsk LastTrade
2010-02-22 9:00:00 BEST_ASK 64.246        1   0.000  64.246     0.000
2010-02-22 9:00:10    TRADE 64.246      100   0.000   0.000    64.246
2010-02-22 9:00:10 BEST_ASK 64.260        1   0.000  64.260     0.000
2010-02-22 9:00:10 BEST_BID 64.232        1  64.232   0.000     0.000
2010-02-22 9:00:10 BEST_ASK 64.260        1   0.000  64.260     0.000
2010-02-22 9:00:10 BEST_BID 64.232        2  64.232   0.000     0.000/

Now is there a fast way to fill in the zeros between the observed prices? 
This is the part that kills me, since I'm pretty sure I've done something
similar before, but I just can't remember what I did.

--
View this message in context: http://r.789695.n4.nabble.com/Filling-a-time-series-with-Last-Ask-Last-Bid-etc-tp3909390p3909390.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From ustaudinger at activequant.org  Sun Oct 16 14:40:28 2011
From: ustaudinger at activequant.org (Ulrich Staudinger)
Date: Sun, 16 Oct 2011 14:40:28 +0200
Subject: [R-SIG-Finance] Filling a time series with Last Ask, Last Bid,
	etc
In-Reply-To: <1318768272018-3909390.post@n4.nabble.com>
References: <1318768272018-3909390.post@n4.nabble.com>
Message-ID: <CAMrz3D3XjeeMzb=fhqGNsexh7+N6rNPP+GtTch_3-jvpUf3Avw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111016/9f723fb9/attachment.pl>

From cliffclive at gmail.com  Sun Oct 16 15:01:04 2011
From: cliffclive at gmail.com (Cliff Clive)
Date: Sun, 16 Oct 2011 06:01:04 -0700 (PDT)
Subject: [R-SIG-Finance] Filling a time series with Last Ask, Last Bid,
	etc
In-Reply-To: <CAMrz3D3XjeeMzb=fhqGNsexh7+N6rNPP+GtTch_3-jvpUf3Avw@mail.gmail.com>
References: <1318768272018-3909390.post@n4.nabble.com>
	<CAMrz3D3XjeeMzb=fhqGNsexh7+N6rNPP+GtTch_3-jvpUf3Avw@mail.gmail.com>
Message-ID: <1318770064577-3909449.post@n4.nabble.com>

Hey, this worked beautifully.  Thanks!

--
View this message in context: http://r.789695.n4.nabble.com/Filling-a-time-series-with-Last-Ask-Last-Bid-etc-tp3909390p3909449.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From scherrzo at rambler.ru  Sun Oct 16 18:54:26 2011
From: scherrzo at rambler.ru (Artem Simonov)
Date: Sun, 16 Oct 2011 20:54:26 +0400
Subject: [R-SIG-Finance] Classification tasks, using rough sets theory
Message-ID: <798014796.1318784066.106488568.20640@mperl105.rambler.ru>

Dear friends!

Does anybody know anything about R packages devoted to classification 
tasks, using rough sets theory? I've found only "discretization" 
package,where are a lot of references to the rough sets theory, but I 
don't clearly understand whether it is suitable for the classification 
tasks.

Thanks in advance!

--
Kind regards,
Art Simonov,
London.


From jeff.a.ryan at gmail.com  Sun Oct 16 19:42:13 2011
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Sun, 16 Oct 2011 12:42:13 -0500
Subject: [R-SIG-Finance] Classification tasks, using rough sets theory
In-Reply-To: <798014796.1318784066.106488568.20640@mperl105.rambler.ru>
References: <798014796.1318784066.106488568.20640@mperl105.rambler.ru>
Message-ID: <39CAB117-3024-4E6B-8B66-6AE876E13A59@gmail.com>

You need to redirect this to R-help, as it has nothing to do with (R-SIG-) Finance. 

Thanks
Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Oct 16, 2011, at 11:54 AM, Artem Simonov <scherrzo at rambler.ru> wrote:

> Dear friends!
> 
> Does anybody know anything about R packages devoted to classification tasks, using rough sets theory? I've found only "discretization" package,where are a lot of references to the rough sets theory, but I don't clearly understand whether it is suitable for the classification tasks.
> 
> Thanks in advance!
> 
> --
> Kind regards,
> Art Simonov,
> London.
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From veepsirtt at gmail.com  Mon Oct 17 18:05:03 2011
From: veepsirtt at gmail.com (veepsirtt)
Date: Mon, 17 Oct 2011 09:05:03 -0700 (PDT)
Subject: [R-SIG-Finance] Point and Figure Charting
In-Reply-To: <AANLkTi=PMVoHS=d1R9kykgBSEL237uaMtRnyVyT34zVv@mail.gmail.com>
References: <AANLkTi=PMVoHS=d1R9kykgBSEL237uaMtRnyVyT34zVv@mail.gmail.com>
Message-ID: <1318867503830-3912508.post@n4.nabble.com>

 Does anyone know of a good point and figure charting tool package in R?
Thanks
veepsirtt


--
View this message in context: http://r.789695.n4.nabble.com/Point-and-Figure-Charting-tp3261384p3912508.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From bbands at gmail.com  Mon Oct 17 18:46:49 2011
From: bbands at gmail.com (BBands)
Date: Mon, 17 Oct 2011 09:46:49 -0700
Subject: [R-SIG-Finance]  Point and Figure Charting
In-Reply-To: <CAGS5yBWg6f_VhaQbGtfqzbvfcAzRy7ApegY7YWB8=KaDZxnsGA@mail.gmail.com>
References: <AANLkTi=PMVoHS=d1R9kykgBSEL237uaMtRnyVyT34zVv@mail.gmail.com>
	<1318867503830-3912508.post@n4.nabble.com>
	<CAGS5yBWg6f_VhaQbGtfqzbvfcAzRy7ApegY7YWB8=KaDZxnsGA@mail.gmail.com>
Message-ID: <CAGS5yBWv3koET_zDebaDYgtsAP3J09XUPKoaD5iihaUy_zTvSQ@mail.gmail.com>

There are a couple of web references available, but since p&f is
simply filtered waves/swings -- Art Merriill wrote elegantly on this
topic -- why not use the zig-zag function in TTR?

? ? jab

On Mon, Oct 17, 2011 at 9:05 AM, veepsirtt <veepsirtt at gmail.com> wrote:
> ?Does anyone know of a good point and figure charting tool package in R?


From veepsirtt at gmail.com  Mon Oct 17 18:52:33 2011
From: veepsirtt at gmail.com (veepsirtt)
Date: Mon, 17 Oct 2011 09:52:33 -0700 (PDT)
Subject: [R-SIG-Finance] Point and Figure Charting
In-Reply-To: <AANLkTi=PMVoHS=d1R9kykgBSEL237uaMtRnyVyT34zVv@mail.gmail.com>
References: <AANLkTi=PMVoHS=d1R9kykgBSEL237uaMtRnyVyT34zVv@mail.gmail.com>
Message-ID: <1318870353600-3912644.post@n4.nabble.com>

I searched the web and found the following information

http://www.trade2win.com/boards/techies-corner/69572-building-text-based-point-figure-charts-matlab-r.html
http://www.trade2win.com/boards/techies-corner/69572-building-text-based-point-figure-charts-matlab-r.html 
---------------------------------------------------------------------------------------------------------------
                                                         *P&F Algorithm*
---------------------------------------------------------------------------------------------------------------

INPUTS
Accept box_size, reversal_boxes inputs
Accept Date range in date_array and prices in H_array, L_array.
INITIAL CALCULATIONS
Calculate max and min of H_array and L_array to calculate number of Y-axis
intervals
max_range = round(Max(H_array) * 1.1)
min_range = round(Min(L_array) * 0.9)
Yaxis_array_size = (max_range ? min_range) / box_size
Caclulate Yaxis_array
Yaxis_array(1) = round(min_range)
For n = 2 to Yaxis_array_size
	Yaxis_array(n) = Yaxis_array(n-1)+box_size
Next n
PLOT P&F
Plot initial value:
for n=1 to Yaxis_array_size
If (H_array(1) > Yaxis_array(n) AND H_array(1) < Yaxis_array(n-1) THEN
PF_array(1,n) = 1
Else n = n+1

Construct PF_array with entire P&F plot

For iDay = 2 to no_days

current_column = 1
Reversal_Date(current_column) = iDay

If mod(current_column,2) = 1
	If H_array(iDay) > n + box_size
		Do
			n = n + 1
			PF_array(current_column, n) = 1
		Loop Until (H_array(iDay) < n + box_size
		iDay = iDay + 1
	Else If L_array(iDay) < n ? reversal_boxes * box_size
		ReDim PF array to add new column (Preserve previous data)
		Reversal_Date(current_column) = iDay
		current_column = current_column+1
Do
			n = n ? 1
			PF_array(current_column, n) = 0
		Loop Until (L_array(iDay) > n ? box_size
		iDay = iDay + 1
	Else
		iDay = iDay + 1
	End If
Else
	If L_array(iDay) < n - box_size
		Do
			n = n - 1
			PF_array(current_column, n) = 0
		Loop Until (L_array(iDay) > n - box_size
		iDay = iDay + 1
	Else If H_array(iDay) > n + reversal_boxes * box_size
		ReDim PF array to add new column (Preserve previous data)
		Reversal_Date(current_column) = iDay
		current_column = current_column+1
Do
			n = n + 1
			PF_array(current_column, n) = 1
		Loop Until (H_array(iDay) < n + box_size
		iDay = iDay + 1
	Else
		iDay = iDay + 1
	End If
End If
End For
Plot PF_array on chart
Plot the dates on which the first new column entry was made below that
column

------------------------------------------------------------------------------------------------------------------------
                                                              *Here is the R
code*
------------------------------------------------------------------------------------------------------------------------
##make sure you have data in data.frame ticker [date price] and it is wit
rising dates (newest obs last)
##best run from here

## log scale with 2pct 3box rev
pnf=data.frame()
pnf[1,1]=ticker[1,2]*1.02^50
for (i in 2:100) pnf[i,1]=pnf[i-1,1]/1.02

##counters
s=2
start=pnf[51,1]

##first column
for(i in 2:length(ticker[,1])){
    if (ticker[i,2]>=pnf[48,1]|ticker[i,2]<=pnf[54,1]){
        if (ticker[i,2]>=pnf[48,1]) {
            d=1
            pnf[(51-3):50,s]=d
            pos=48
            break} else {
            d=-1
            pnf[52:(51+3),s]=d
            pos=54
            break}}
}

## continuation 
for(j in (i+1):length(ticker[,1])){if (d>0){
if (ticker[j,2]>=pnf[(pos-1),1])    {while(ticker[j,2]>=pnf[(pos-1),1]
){pnf[(pos-1),s]=d
                                                pos=pos-1}
                        }else{if (ticker[j,2]<=pnf[(pos+3),1])    {s=s+1
                                                     d=d*-1
                                                   
{while(ticker[j,2]<=pnf[(pos+1),1]){pnf[(pos+1),s]=d
                                                                          
pos=pos+1}                                 
                                                    }
                                                    }
}


}else{

if (ticker[j,2]<=pnf[(pos+1),1])    {while(ticker[j,2]<=pnf[(pos+1),1]
){pnf[(pos+1),s]=d
                                                pos=pos+1}
                        }else{if (ticker[j,2]>=pnf[(pos-3),1])    {s=s+1
                                                     d=d*-1
                                                   
{while(ticker[j,2]>=pnf[(pos-1),1]){pnf[(pos-1),s]=d
                                                                          
pos=pos-1}                                 
                                                    }
                                                    }
}
}


}

final=replace(pnf[,],pnf[,]==-1,"O")

final=replace(final[,],final[,]==1,"X")

final[is.na(final)]="."

final

Try this ...
Thanks
veepsirtt

--
View this message in context: http://r.789695.n4.nabble.com/Point-and-Figure-Charting-tp3261384p3912644.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From chalabi at phys.ethz.ch  Tue Oct 18 14:49:18 2011
From: chalabi at phys.ethz.ch (Yohan Chalabi)
Date: Tue, 18 Oct 2011 14:49:18 +0200
Subject: [R-SIG-Finance] issues with zoo masking as.Date function,
	resulting in issues with as.Date
In-Reply-To: <CAP01uRnfhGy2eQCHvWUeYs68bd6ARWbHEWhvMyOC019y3k+NoQ@mail.gmail.com>
References: <259640267CB3094FA5A4F65F2AB3CB02310940AE@ex2k.bankofamerica.com>
	<CAP01uRnfhGy2eQCHvWUeYs68bd6ARWbHEWhvMyOC019y3k+NoQ@mail.gmail.com>
Message-ID: <696CB93A-8056-4114-B34E-CCBF3E533700@phys.ethz.ch>


On 14 oct. 2011, at 20:19, Gabor Grothendieck wrote:

> On Fri, Oct 14, 2011 at 1:21 PM, Zhang, Ivan
> <ivan.zhang at bankofamerica.com> wrote:
>> Hi Everyone,
>> 
>> I just upgraded to 2.13, this seems like a very obvious issue however I haven't seen this addressed anywhere, perhaps I am missing something elementary?
>> 
>> library(timeDate)
>>> as.Date(timeDate('2011-10-10'))
>> [1] "2011-10-10"
>>> library(zoo)
>> 
>> Attaching package: 'zoo'
>> 
>> The following object(s) are masked from 'package:base':
>> 
>>    as.Date
>> 
>>> as.Date(timeDate('2011-10-10'))
>> Error in as.Date.default(timeDate("2011-10-10")) :
>>  do not know how to convert 'timeDate("2011-10-10")' to class "Date"
>>> 
>> 
> 
> The timeDate package needs to export as.Date.timeDate in its NAMESPACE

?? timeDate does export as.Date.timeDate as an S3 method.

If the zoo package overwrites a base function and do not import namespaces of other packages which extend it. It cannot work.

in this particular example

base::as.Date(timeDate('2011-10-10'))

works.

> file .   As a workaround you can do this:
> 
>> as.Date.timeDate <- timeDate:::as.Date.timeDate
>> as.Date(timeDate('2011-10-10'))
> [1] "2011-10-10"
> 
> -- 
> Statistics & Software Consulting
> GKX Group, GKX Associates Inc.
> tel: 1-877-GKX-GROUP
> email: ggrothendieck at gmail.com
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
> 


From singletonthebest at msn.com  Tue Oct 18 14:51:55 2011
From: singletonthebest at msn.com (Simone Gogna)
Date: Tue, 18 Oct 2011 14:51:55 +0200
Subject: [R-SIG-Finance] real time data and quantmod
Message-ID: <DUB107-ds65DFDF5F75703DED0860FD3E50@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111018/674c938f/attachment.pl>

From ivan.zhang at bankofamerica.com  Tue Oct 18 14:53:58 2011
From: ivan.zhang at bankofamerica.com (Zhang, Ivan)
Date: Tue, 18 Oct 2011 08:53:58 -0400
Subject: [R-SIG-Finance] issues with zoo masking as.Date function,
	resulting in issues with as.Date
In-Reply-To: <696CB93A-8056-4114-B34E-CCBF3E533700@phys.ethz.ch>
References: <259640267CB3094FA5A4F65F2AB3CB02310940AE@ex2k.bankofamerica.com>
	<CAP01uRnfhGy2eQCHvWUeYs68bd6ARWbHEWhvMyOC019y3k+NoQ@mail.gmail.com>
	<696CB93A-8056-4114-B34E-CCBF3E533700@phys.ethz.ch>
Message-ID: <259640267CB3094FA5A4F65F2AB3CB02310940BF@ex2k.bankofamerica.com>

Thanks for the tip and workaround, this sounds like a bug with zoo package.

-Ivan

-----Original Message-----
From: Yohan Chalabi [mailto:chalabi at phys.ethz.ch] 
Sent: Tuesday, October 18, 2011 8:49 AM
To: Gabor Grothendieck
Cc: Zhang, Ivan; r-sig-finance
Subject: Re: [R-SIG-Finance] issues with zoo masking as.Date function, resulting in issues with as.Date


On 14 oct. 2011, at 20:19, Gabor Grothendieck wrote:

> On Fri, Oct 14, 2011 at 1:21 PM, Zhang, Ivan 
> <ivan.zhang at bankofamerica.com> wrote:
>> Hi Everyone,
>> 
>> I just upgraded to 2.13, this seems like a very obvious issue however I haven't seen this addressed anywhere, perhaps I am missing something elementary?
>> 
>> library(timeDate)
>>> as.Date(timeDate('2011-10-10'))
>> [1] "2011-10-10"
>>> library(zoo)
>> 
>> Attaching package: 'zoo'
>> 
>> The following object(s) are masked from 'package:base':
>> 
>>    as.Date
>> 
>>> as.Date(timeDate('2011-10-10'))
>> Error in as.Date.default(timeDate("2011-10-10")) :
>>  do not know how to convert 'timeDate("2011-10-10")' to class "Date"
>>> 
>> 
> 
> The timeDate package needs to export as.Date.timeDate in its NAMESPACE

?? timeDate does export as.Date.timeDate as an S3 method.

If the zoo package overwrites a base function and do not import namespaces of other packages which extend it. It cannot work.

in this particular example

base::as.Date(timeDate('2011-10-10'))

works.

> file .   As a workaround you can do this:
> 
>> as.Date.timeDate <- timeDate:::as.Date.timeDate
>> as.Date(timeDate('2011-10-10'))
> [1] "2011-10-10"
> 
> --
> Statistics & Software Consulting
> GKX Group, GKX Associates Inc.
> tel: 1-877-GKX-GROUP
> email: ggrothendieck at gmail.com
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
> 

----------------------------------------------------------------------
This message w/attachments (message) is intended solely ...{{dropped:7}}


From zach.mayer at gmail.com  Tue Oct 18 15:06:02 2011
From: zach.mayer at gmail.com (Zachary Mayer)
Date: Tue, 18 Oct 2011 09:06:02 -0400
Subject: [R-SIG-Finance] real time data and quantmod
In-Reply-To: <DUB107-ds65DFDF5F75703DED0860FD3E50@phx.gbl>
References: <DUB107-ds65DFDF5F75703DED0860FD3E50@phx.gbl>
Message-ID: <6388431182024046381@unknownmsgid>

Try getQuote.

Sent from my iPhone

On Oct 18, 2011, at 8:54 AM, Simone Gogna <singletonthebest at msn.com> wrote:

> Hi,
> is there any way to combine the quantmod package with real time stock and index data?
>
> getSymbols only provides me with historical data only.
>
> thanks
> Simone
>    [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From daniel.cegielka at gmail.com  Tue Oct 18 15:06:54 2011
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Tue, 18 Oct 2011 15:06:54 +0200
Subject: [R-SIG-Finance] real time data and quantmod
In-Reply-To: <DUB107-ds65DFDF5F75703DED0860FD3E50@phx.gbl>
References: <DUB107-ds65DFDF5F75703DED0860FD3E50@phx.gbl>
Message-ID: <CAPLrYET=3NDQNYxy1QMBirO706hgPM0kQR7nZnnV2Rmt8OM5Mw@mail.gmail.com>

I think the key to do this will be a xts package. You only need to
specify (and implement) how you want to build xts objects from a real
time market data stream. See also IBrokers and how concurrent
programming works there.

btw. getSymbols() is just a wrapper witch import data from source to
xts object (OHLCV+Adj).

best regards,
daniel


2011/10/18 Simone Gogna <singletonthebest at msn.com>:
> Hi,
> is there any way to combine the quantmod package with real time stock and index data?
>
> getSymbols only provides me with historical data only.
>
> thanks
> Simone
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From Achim.Zeileis at uibk.ac.at  Tue Oct 18 15:17:12 2011
From: Achim.Zeileis at uibk.ac.at (Achim Zeileis)
Date: Tue, 18 Oct 2011 15:17:12 +0200 (CEST)
Subject: [R-SIG-Finance] issues with zoo masking as.Date function,
 resulting in issues with as.Date
In-Reply-To: <259640267CB3094FA5A4F65F2AB3CB02310940BF@ex2k.bankofamerica.com>
References: <259640267CB3094FA5A4F65F2AB3CB02310940AE@ex2k.bankofamerica.com>
	<CAP01uRnfhGy2eQCHvWUeYs68bd6ARWbHEWhvMyOC019y3k+NoQ@mail.gmail.com>
	<696CB93A-8056-4114-B34E-CCBF3E533700@phys.ethz.ch>
	<259640267CB3094FA5A4F65F2AB3CB02310940BF@ex2k.bankofamerica.com>
Message-ID: <alpine.DEB.2.02.1110181515490.8857@paninaro.uibk.ac.at>

On Tue, 18 Oct 2011, Zhang, Ivan wrote:

> Thanks for the tip and workaround, this sounds like a bug with zoo 
> package.

We (= timeDate and zoo maintainers) are currently discussing off-list how 
to best resolve the situation. We hope to have a proper solution soon.

Best,
Z

> -Ivan
>
> -----Original Message-----
> From: Yohan Chalabi [mailto:chalabi at phys.ethz.ch]
> Sent: Tuesday, October 18, 2011 8:49 AM
> To: Gabor Grothendieck
> Cc: Zhang, Ivan; r-sig-finance
> Subject: Re: [R-SIG-Finance] issues with zoo masking as.Date function, resulting in issues with as.Date
>
>
> On 14 oct. 2011, at 20:19, Gabor Grothendieck wrote:
>
>> On Fri, Oct 14, 2011 at 1:21 PM, Zhang, Ivan
>> <ivan.zhang at bankofamerica.com> wrote:
>>> Hi Everyone,
>>>
>>> I just upgraded to 2.13, this seems like a very obvious issue however I haven't seen this addressed anywhere, perhaps I am missing something elementary?
>>>
>>> library(timeDate)
>>>> as.Date(timeDate('2011-10-10'))
>>> [1] "2011-10-10"
>>>> library(zoo)
>>>
>>> Attaching package: 'zoo'
>>>
>>> The following object(s) are masked from 'package:base':
>>>
>>>    as.Date
>>>
>>>> as.Date(timeDate('2011-10-10'))
>>> Error in as.Date.default(timeDate("2011-10-10")) :
>>>  do not know how to convert 'timeDate("2011-10-10")' to class "Date"
>>>>
>>>
>>
>> The timeDate package needs to export as.Date.timeDate in its NAMESPACE
>
> ?? timeDate does export as.Date.timeDate as an S3 method.
>
> If the zoo package overwrites a base function and do not import namespaces of other packages which extend it. It cannot work.
>
> in this particular example
>
> base::as.Date(timeDate('2011-10-10'))
>
> works.
>
>> file .   As a workaround you can do this:
>>
>>> as.Date.timeDate <- timeDate:::as.Date.timeDate
>>> as.Date(timeDate('2011-10-10'))
>> [1] "2011-10-10"
>>
>> --
>> Statistics & Software Consulting
>> GKX Group, GKX Associates Inc.
>> tel: 1-877-GKX-GROUP
>> email: ggrothendieck at gmail.com
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>
> ----------------------------------------------------------------------
> This message w/attachments (message) is intended solely ...{{dropped:7}}
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From ggrothendieck at gmail.com  Tue Oct 18 16:10:35 2011
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Tue, 18 Oct 2011 10:10:35 -0400
Subject: [R-SIG-Finance] issues with zoo masking as.Date function,
 resulting in issues with as.Date
In-Reply-To: <259640267CB3094FA5A4F65F2AB3CB02310940BF@ex2k.bankofamerica.com>
References: <259640267CB3094FA5A4F65F2AB3CB02310940AE@ex2k.bankofamerica.com>
	<CAP01uRnfhGy2eQCHvWUeYs68bd6ARWbHEWhvMyOC019y3k+NoQ@mail.gmail.com>
	<696CB93A-8056-4114-B34E-CCBF3E533700@phys.ethz.ch>
	<259640267CB3094FA5A4F65F2AB3CB02310940BF@ex2k.bankofamerica.com>
Message-ID: <CAP01uRkmE8aCuqy+cx2AdV5HrwX6vGY3xSAOc2oCX8=YFLp1Aw@mail.gmail.com>

On Tue, Oct 18, 2011 at 8:53 AM, Zhang, Ivan
<ivan.zhang at bankofamerica.com> wrote:
> Thanks for the tip and workaround, this sounds like a bug with zoo package.
>
> -Ivan
>

All as.Date methods from the base are fully exported.  Only timeDate's
are not (note the askerisk):

> library(timeDate)
> methods(as.Date)
[1] as.Date.character as.Date.date      as.Date.dates     as.Date.default
[5] as.Date.factor    as.Date.numeric   as.Date.POSIXct   as.Date.POSIXlt
[9] as.Date.timeDate*

   Non-visible functions are asterisked

To be fair, zoo has non fully exported as.Date methods too but that is
not the cause of this particular problem and zoo's are being changed
in the devel version as well.

-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From Ayhan.Yuksel at finansportfoy.com  Tue Oct 18 16:22:50 2011
From: Ayhan.Yuksel at finansportfoy.com (=?iso-8859-9?Q?Ayhan_Y=FCksel_=28Finans_Portf=F6y_A=2E=DE=2E=29?=)
Date: Tue, 18 Oct 2011 17:22:50 +0300
Subject: [R-SIG-Finance] Installation Problem: package xxx is not available
	(for R version 2.13.2)"
In-Reply-To: <mailman.3.1318932002.14546.r-sig-finance@r-project.org>
References: <mailman.3.1318932002.14546.r-sig-finance@r-project.org>
Message-ID: <37F03B5FAABCC94D8AF66166AAE3639902CC05FD@fnymail.fnylocal.com>

I am having an installation problem for package Rsymphony.

The error massage is:

"....package 'Rsymphony' is not available (for R version 2.13.2)"

Can anybody point me a solution?

Regards,

Ayhan     

Bu e-posta'nin icerdigi bilgiler (ekleri dahil olmak uzere) gizlidir. Onayimiz olmaksizin ucuncu kisilere aciklanamaz. Bu mesajin gonderilmek istendigi kisi degilseniz, lutfen mesaji sisteminizden derhal siliniz. Finans Portf?y Y?netimi A.S. bu mesajin icerdigi bilgilerin dogrulugu veya eksiksiz oldugu konusunda bir garanti vermemektedir. Bu nedenle bilgilerin ne sekilde olursa olsun iceriginden, iletilmesinden, alinmasindan, saklanmasindan sorumlu degildir. Bu mesajin icerigi yazarina ait olup, Finans Portf?y Y?netimi A.S.'nin goruslerini icermeyebilir.     The information contained in this e-mail (including any attachments) is confidential. It must not be disclosed to any person without our authority. If you are not the intended recipient, please delete it from your system immediately. Finans Portfoy Yonetimi A.S. makes no warranty as to the accuracy or completeness of any information contained in this message and hereby excludes any liability of any kind for the information contained therein or for the information transmission, reception, storage or use of such in any way whatsoever. Any opinions expressed in this message are those of the author and may not necessarily reflect the opinions of Finans Portfoy Yonetimi A.S.


From harunozkan at gmail.com  Tue Oct 18 16:46:17 2011
From: harunozkan at gmail.com (Harun Ozkan)
Date: Tue, 18 Oct 2011 17:46:17 +0300
Subject: [R-SIG-Finance] Installation Problem: package xxx is not
 available (for R version 2.13.2)"
In-Reply-To: <37F03B5FAABCC94D8AF66166AAE3639902CC05FD@fnymail.fnylocal.com>
References: <mailman.3.1318932002.14546.r-sig-finance@r-project.org>
	<37F03B5FAABCC94D8AF66166AAE3639902CC05FD@fnymail.fnylocal.com>
Message-ID: <4E9D9139.3070001@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111018/cf9d4b3c/attachment.pl>

From jeffrey.ryan at lemnica.com  Tue Oct 18 16:46:59 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Tue, 18 Oct 2011 09:46:59 -0500
Subject: [R-SIG-Finance] Installation Problem: package xxx is not
 available (for R version 2.13.2)"
In-Reply-To: <37F03B5FAABCC94D8AF66166AAE3639902CC05FD@fnymail.fnylocal.com>
References: <mailman.3.1318932002.14546.r-sig-finance@r-project.org>
	<37F03B5FAABCC94D8AF66166AAE3639902CC05FD@fnymail.fnylocal.com>
Message-ID: <CABDUZc8QVZJmdgdiu2Xw-2eNoHoJf=nmYMJjpQeppWYQYoMLzg@mail.gmail.com>

Absolutely nothing to do with finance...

When you repost to a list that is correct (R-help) - please follow the
posting guidelines and provide a reproducible example.  The error
message tells you everything you need to know.

Jeff

2011/10/18 Ayhan Y?ksel (Finans Portf?y A.?.) <Ayhan.Yuksel at finansportfoy.com>:
> I am having an installation problem for package Rsymphony.
>
> The error massage is:
>
> "....package 'Rsymphony' is not available (for R version 2.13.2)"
>
> Can anybody point me a solution?
>
> Regards,
>
> Ayhan
>
> Bu e-posta'nin icerdigi bilgiler (ekleri dahil olmak uzere) gizlidir. Onayimiz olmaksizin ucuncu kisilere aciklanamaz. Bu mesajin gonderilmek istendigi kisi degilseniz, lutfen mesaji sisteminizden derhal siliniz. Finans Portf?y Y?netimi A.S. bu mesajin icerdigi bilgilerin dogrulugu veya eksiksiz oldugu konusunda bir garanti vermemektedir. Bu nedenle bilgilerin ne sekilde olursa olsun iceriginden, iletilmesinden, alinmasindan, saklanmasindan sorumlu degildir. Bu mesajin icerigi yazarina ait olup, Finans Portf?y Y?netimi A.S.'nin goruslerini icermeyebilir. ? ? The information contained in this e-mail (including any attachments) is confidential. It must not be disclosed to any person without our authority. If you are not the intended recipient, please delete it from your system immediately. Finans Portfoy Yonetimi A.S. makes no warranty as to the accuracy or completeness of any information contained in this message and hereby excludes any liability of any kind for the information contained therein or for the information transmission, reception, storage or use of such in any way whatsoever. Any opinions expressed in this message are those of the author and may not necessarily reflect the opinions of Finans Portfoy Yonetimi A.S.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From Ayhan.Yuksel at finansportfoy.com  Tue Oct 18 16:48:39 2011
From: Ayhan.Yuksel at finansportfoy.com (=?iso-8859-9?Q?Ayhan_Y=FCksel_=28Finans_Portf=F6y_A=2E=DE=2E=29?=)
Date: Tue, 18 Oct 2011 17:48:39 +0300
Subject: [R-SIG-Finance] Installation Problem: package xxx is not
	available (for R version 2.13.2)"
In-Reply-To: <4E9D9139.3070001@gmail.com>
References: <mailman.3.1318932002.14546.r-sig-finance@r-project.org>
	<37F03B5FAABCC94D8AF66166AAE3639902CC05FD@fnymail.fnylocal.com>
	<4E9D9139.3070001@gmail.com>
Message-ID: <37F03B5FAABCC94D8AF66166AAE3639902CC0628@fnymail.fnylocal.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111018/91ca321c/attachment.pl>

From rkevinburton at charter.net  Tue Oct 18 19:50:01 2011
From: rkevinburton at charter.net (Kevin Burton)
Date: Tue, 18 Oct 2011 12:50:01 -0500
Subject: [R-SIG-Finance] Updating 'R'?
Message-ID: <001801cc8dbe$5c34d250$149e76f0$@charter.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111018/b409c4e1/attachment.pl>

From josh.m.ulrich at gmail.com  Tue Oct 18 19:52:47 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 18 Oct 2011 12:52:47 -0500
Subject: [R-SIG-Finance] Updating 'R'?
In-Reply-To: <001801cc8dbe$5c34d250$149e76f0$@charter.net>
References: <001801cc8dbe$5c34d250$149e76f0$@charter.net>
Message-ID: <CAPPM_gR5KAiFP_=9xk-SpSf3wQb1gFvo9ng8gW1tvoBTR+Bc1w@mail.gmail.com>

This has nothing to do with finance:
"-- Also note that this is not the r-help list where general R
questions should go."

You could probably find many solutions to this problem by searching
(via rseek.org, StackOverflow, etc.).
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com



On Tue, Oct 18, 2011 at 12:50 PM, Kevin Burton <rkevinburton at charter.net> wrote:
> I know this is an FAQ but I have been unable to find an answer. How can I
> update 'R' (say from 2.13.1 to 2.13.2) and also migrate all of the packages
> that I have installed? I have seen a step-by-step approach but I can't find
> it right away. Any ideas?
>
>
>
> Thank you.
>
>
>
> Kevin
>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From xianli.analytics at gmail.com  Wed Oct 19 01:26:19 2011
From: xianli.analytics at gmail.com (Xian Li)
Date: Tue, 18 Oct 2011 19:26:19 -0400
Subject: [R-SIG-Finance] double seasonality for hourly data
Message-ID: <2B4D1AD4-3647-45E7-A069-FF33B908598A@gmail.com>

Hi,

I have hourly time series of return and volume which shows both daily pattern and weekly pattern. The 'arima' function in R only allows for one seasonal component. How to model both the daily and weekly patterns with ARIMA?

Thanks!

best regards,
Xian

From daniel.cegielka at gmail.com  Wed Oct 19 13:00:02 2011
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Wed, 19 Oct 2011 13:00:02 +0200
Subject: [R-SIG-Finance] Data (Was: TZs)
In-Reply-To: <CAPLrYERZk64W3Vn4ezfayJ=LNJLzGjHu3ych1+=SN+ADpZqWOA@mail.gmail.com>
References: <mailman.3.1317981601.18402.r-sig-finance@r-project.org>
	<FA3993A7-F717-4DFC-B986-96D204B5E3D1@gmail.com>
	<CAC6OWa8Acf_vh5eg5J6-v4EtQY1ZQpf4x01JFbRSc1rMR6zXwg@mail.gmail.com>
	<1318002083.6600.285.camel@brian-rcg>
	<20111.9459.189242.205355@max.nulle.part>
	<1318007150.6600.288.camel@brian-rcg>
	<20111.14990.8822.352079@max.nulle.part>
	<CAC6OWa_5pBNb_LLE+L7gdfpQ-5KnmS2e1WD+0fm8sdT=3Gw3dQ@mail.gmail.com>
	<CABDUZc_k-daKOW8T7bOvtee=Y-vHh90VQO43PBYCKozVPoDFwA@mail.gmail.com>
	<CAPLrYERZk64W3Vn4ezfayJ=LNJLzGjHu3ych1+=SN+ADpZqWOA@mail.gmail.com>
Message-ID: <CAPLrYEQNK09uF-hYo5fQHHQGij6G4X9drfro82zWOpXbfckbTQ@mail.gmail.com>

ICANN takes control of Internet Internet Time Zone Database

http://www.icann.org/en/news/releases/release-14oct11-en.pdf

The problem with TZ probably can be considered as solved :)

regards,
daniel


From sfan.stock at gmail.com  Wed Oct 19 15:12:57 2011
From: sfan.stock at gmail.com (Xiaofang)
Date: Wed, 19 Oct 2011 23:12:57 +1000
Subject: [R-SIG-Finance] marketdata in qsiblive
Message-ID: <CAEC_13c_Lp2Gs7ck1kHfdC8NVUaRVWckD_6894DcgCRFtUYuWg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111019/1b95473c/attachment.pl>

From daniel.cegielka at gmail.com  Wed Oct 19 15:54:06 2011
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Wed, 19 Oct 2011 15:54:06 +0200
Subject: [R-SIG-Finance] marketdata in qsiblive
In-Reply-To: <CAEC_13c_Lp2Gs7ck1kHfdC8NVUaRVWckD_6894DcgCRFtUYuWg@mail.gmail.com>
References: <CAEC_13c_Lp2Gs7ck1kHfdC8NVUaRVWckD_6894DcgCRFtUYuWg@mail.gmail.com>
Message-ID: <CAPLrYESMgvneotuu8NbMF_-+Ki9a9J56KTdPBuj9CsQjqcN5eg@mail.gmail.com>

try in R console:

?save
?load

save(file="name.RData")
save.image("name.RData")

load("name.RData")

daniel


2011/10/19 Xiaofang <sfan.stock at gmail.com>:
> Hi there,
> I am now trying the qsiblive by Soren, and it requires a daily marketdata
> file, just I have not figured out how to create such a rdata file, what kind
> of data to be included? can anyone give me a hint on this?
>
> Thanks in advance
> Fan
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From edd at debian.org  Wed Oct 19 17:07:39 2011
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 19 Oct 2011 10:07:39 -0500
Subject: [R-SIG-Finance] Data (Was: TZs)
In-Reply-To: <CAPLrYEQNK09uF-hYo5fQHHQGij6G4X9drfro82zWOpXbfckbTQ@mail.gmail.com>
References: <mailman.3.1317981601.18402.r-sig-finance@r-project.org>
	<FA3993A7-F717-4DFC-B986-96D204B5E3D1@gmail.com>
	<CAC6OWa8Acf_vh5eg5J6-v4EtQY1ZQpf4x01JFbRSc1rMR6zXwg@mail.gmail.com>
	<1318002083.6600.285.camel@brian-rcg>
	<20111.9459.189242.205355@max.nulle.part>
	<1318007150.6600.288.camel@brian-rcg>
	<20111.14990.8822.352079@max.nulle.part>
	<CAC6OWa_5pBNb_LLE+L7gdfpQ-5KnmS2e1WD+0fm8sdT=3Gw3dQ@mail.gmail.com>
	<CABDUZc_k-daKOW8T7bOvtee=Y-vHh90VQO43PBYCKozVPoDFwA@mail.gmail.com>
	<CAPLrYERZk64W3Vn4ezfayJ=LNJLzGjHu3ych1+=SN+ADpZqWOA@mail.gmail.com>
	<CAPLrYEQNK09uF-hYo5fQHHQGij6G4X9drfro82zWOpXbfckbTQ@mail.gmail.com>
Message-ID: <20126.59323.449299.410768@max.nulle.part>


On 19 October 2011 at 13:00, Daniel Cegie?ka wrote:
| ICANN takes control of Internet Internet Time Zone Database
| 
| http://www.icann.org/en/news/releases/release-14oct11-en.pdf
| 
| The problem with TZ probably can be considered as solved :)

Not so fast. While this is undoubtedly excellent news which presumably solves
the _database_ issue after the tireless work of Olson and Eggert came under
patent troll attack, it does not magically give us the pony to fix all broken
Windows installations.  

Remember that the whole reason R ships with TZ data (and the Olson library)
is that a certain popular operating system fails to provide this natively.

But I nitpick. We all have an option or two when it comes to OSs and many of
us even exercise these ;)

Dirk

-- 
"Outside of a dog, a book is a man's best friend. Inside of a dog, it is too
dark to read." -- Groucho Marx


From ggrothendieck at gmail.com  Wed Oct 19 17:44:45 2011
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 19 Oct 2011 11:44:45 -0400
Subject: [R-SIG-Finance] Data (Was: TZs)
In-Reply-To: <20126.59323.449299.410768@max.nulle.part>
References: <mailman.3.1317981601.18402.r-sig-finance@r-project.org>
	<FA3993A7-F717-4DFC-B986-96D204B5E3D1@gmail.com>
	<CAC6OWa8Acf_vh5eg5J6-v4EtQY1ZQpf4x01JFbRSc1rMR6zXwg@mail.gmail.com>
	<1318002083.6600.285.camel@brian-rcg>
	<20111.9459.189242.205355@max.nulle.part>
	<1318007150.6600.288.camel@brian-rcg>
	<20111.14990.8822.352079@max.nulle.part>
	<CAC6OWa_5pBNb_LLE+L7gdfpQ-5KnmS2e1WD+0fm8sdT=3Gw3dQ@mail.gmail.com>
	<CABDUZc_k-daKOW8T7bOvtee=Y-vHh90VQO43PBYCKozVPoDFwA@mail.gmail.com>
	<CAPLrYERZk64W3Vn4ezfayJ=LNJLzGjHu3ych1+=SN+ADpZqWOA@mail.gmail.com>
	<CAPLrYEQNK09uF-hYo5fQHHQGij6G4X9drfro82zWOpXbfckbTQ@mail.gmail.com>
	<20126.59323.449299.410768@max.nulle.part>
Message-ID: <CAP01uR=SMvB=DkCsGmb13C05Ppu3pjKA1sAsNVnBfSrAWxv-_w@mail.gmail.com>

2011/10/19 Dirk Eddelbuettel <edd at debian.org>:
>
> On 19 October 2011 at 13:00, Daniel Cegie?ka wrote:
> | ICANN takes control of Internet Internet Time Zone Database
> |
> | http://www.icann.org/en/news/releases/release-14oct11-en.pdf
> |
> | The problem with TZ probably can be considered as solved :)
>
> Not so fast. While this is undoubtedly excellent news which presumably solves
> the _database_ issue after the tireless work of Olson and Eggert came under
> patent troll attack, it does not magically give us the pony to fix all broken
> Windows installations.
>
> Remember that the whole reason R ships with TZ data (and the Olson library)
> is that a certain popular operating system fails to provide this natively.
>
> But I nitpick. We all have an option or two when it comes to OSs and many of
> us even exercise these ;)
>

I am not sure specifically what you are referring to here but Windows
does support time zones.  Here is a list of the ones supported by
Windows Vista:

http://technet.microsoft.com/en-us/library/cc749073(WS.10).aspx

and here is an example of querying the current timezone info from the
Windows console (omit the brief argument for additional info):

C:\tmp2>wmic timezone list brief
Bias  Caption                                 SettingID
-300  (GMT-05:00) Eastern Time (US & Canada)





-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From subbu at sssu.edu.in  Wed Oct 19 18:18:49 2011
From: subbu at sssu.edu.in (Subramanian S)
Date: Wed, 19 Oct 2011 21:48:49 +0530
Subject: [R-SIG-Finance] White's Reality Check
Message-ID: <CALS_8bEwHQ2rxuZ1_JeTz6ZgkReSFy77CV7Grxf_VfO55aHFag@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111019/9050eefc/attachment.pl>

From roger at turningbull.com  Wed Oct 19 19:01:30 2011
From: roger at turningbull.com (Roger Trimble)
Date: Wed, 19 Oct 2011 13:01:30 -0400
Subject: [R-SIG-Finance] quantstrat parameters
Message-ID: <1df91e85773ab1601838a8e35588965b.squirrel@www.turningbull.com>

Good afternoon,

I have a question regarding the usage of parameters to quantstrat.  As an
example, I have a strategy that uses three moving averages ('EMA'); slow,
medium, and fast.  I would like to run this strategy through
applyParameter, using different combinations of 'n' for the different EMA
indicators.

My apply strategy command looks something like this:
out <- applyStrategy(strategy=strat, portfolios=st.name,
    parameters=list(nfast=10,nmed=28,nslow=60))

So, I am using nfast, nmed, and nslow to represent the 'n' argument for EMA.

In my strategy definition, I am using this:

## fast ma
strat <- add.indicator(strategy=strat,
                       name='EMA',
                       arguments=list(x=quote(Cl(mktdata))),
                       parameters=list(n=quote(nfast)),
                       label='fast.ma')
## med ma
strat <- add.indicator(strategy=strat,
                       name='EMA',
                       arguments=list(x=quote(Cl(mktdata))),
                       parameters=list(n=quote(nmed)),
                       label='med.ma')
## slow ma
strat <- add.indicator(strategy=strat,
                       name='EMA',
                       arguments=list(x=quote(Cl(mktdata))),
                       parameters=list(n=quote(nslow)),
                       label='slow.ma')

The strategy runs without error, but the parameters do not appear to be
evaluating correctly, and the model finishes without trading.  I believe
this is because the indicators are defaulting to 10, and never firing a
signal.  In viewing mktdata after the run, I can confirm the indicators
are all equal.

If I run the model explicitly setting the respective n arguments, e.g.
arguements=list(x=quote(Cl(mktdata)),n=28)...,  then the strategy runs as
expected with signals and trades.


Looking into the code leads me to believe my intuition is wrong about how
this works:

        # see 'S Programming p. 67 for this matching
        fun<-match.fun(indicator$name)
        .formals  <- formals(fun)
        onames <- names(.formals)

        pm <- pmatch(names(indicator$arguments), onames, nomatch = 0L)
        if (any(pm == 0L))
            warning(paste("some arguments stored for",indicator$name,"do
not match"))
        names(indicator$arguments[pm > 0L]) <- onames[pm]
        .formals[pm] <- indicator$arguments[pm > 0L]

                # now add arguments from parameters
                if(length(parameters)){
                        pm <- pmatch(names(parameters), onames, nomatch = 0L)
                        names(parameters[pm > 0L]) <- onames[pm]
                        .formals[pm] <- parameters[pm > 0L]
                }


It appears to me that names(parameters) and onames need to be the same,
which leaves me confused about how to specify different parameters to
different indicator functions that are looking for the same named
argument.

I'm sure my error is operator head-space and timing...  I greatly
appreciate any feedback here.  Thank you very much.

Roger

-- 
Roger Trimble
TurningBull


From me at censix.com  Wed Oct 19 19:17:54 2011
From: me at censix.com (me at censix.com)
Date: Wed, 19 Oct 2011 19:17:54 +0200 (CEST)
Subject: [R-SIG-Finance] marketdata in qsiblive
In-Reply-To: <CAEC_13c_Lp2Gs7ck1kHfdC8NVUaRVWckD_6894DcgCRFtUYuWg@mail.gmail.com>
References: <CAEC_13c_Lp2Gs7ck1kHfdC8NVUaRVWckD_6894DcgCRFtUYuWg@mail.gmail.com>
Message-ID: <42614.78.234.67.201.1319044674.squirrel@censix.com>

Hi

the marketdata that is the basis for trading in qsiblive is created just
as daniel says, with the 'save' function. A bit more detail:

Assume that 'SOMESYMBOL_xts' is an xts timeseries with OHLC columns in
your current R environment, then you just save that to file with the
following command.

save(list='SOMESYMBOL_xts' , file='SOMESYMBOL.rdata')

HTH

Soren


> Hi there,
> I am now trying the qsiblive by Soren, and it requires a daily marketdata
> file, just I have not figured out how to create such a rdata file, what
> kind
> of data to be included? can anyone give me a hint on this?
>
> Thanks in advance
> Fan
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


-- 
http://censix.com


From edd at debian.org  Wed Oct 19 20:10:01 2011
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 19 Oct 2011 13:10:01 -0500
Subject: [R-SIG-Finance] Data (Was: TZs)
In-Reply-To: <CAP01uR=SMvB=DkCsGmb13C05Ppu3pjKA1sAsNVnBfSrAWxv-_w@mail.gmail.com>
References: <mailman.3.1317981601.18402.r-sig-finance@r-project.org>
	<FA3993A7-F717-4DFC-B986-96D204B5E3D1@gmail.com>
	<CAC6OWa8Acf_vh5eg5J6-v4EtQY1ZQpf4x01JFbRSc1rMR6zXwg@mail.gmail.com>
	<1318002083.6600.285.camel@brian-rcg>
	<20111.9459.189242.205355@max.nulle.part>
	<1318007150.6600.288.camel@brian-rcg>
	<20111.14990.8822.352079@max.nulle.part>
	<CAC6OWa_5pBNb_LLE+L7gdfpQ-5KnmS2e1WD+0fm8sdT=3Gw3dQ@mail.gmail.com>
	<CABDUZc_k-daKOW8T7bOvtee=Y-vHh90VQO43PBYCKozVPoDFwA@mail.gmail.com>
	<CAPLrYERZk64W3Vn4ezfayJ=LNJLzGjHu3ych1+=SN+ADpZqWOA@mail.gmail.com>
	<CAPLrYEQNK09uF-hYo5fQHHQGij6G4X9drfro82zWOpXbfckbTQ@mail.gmail.com>
	<20126.59323.449299.410768@max.nulle.part>
	<CAP01uR=SMvB=DkCsGmb13C05Ppu3pjKA1sAsNVnBfSrAWxv-_w@mail.gmail.com>
Message-ID: <20127.4729.758579.893817@max.nulle.part>


On 19 October 2011 at 11:44, Gabor Grothendieck wrote:
| 2011/10/19 Dirk Eddelbuettel <edd at debian.org>:
| >
| > On 19 October 2011 at 13:00, Daniel Cegie?ka wrote:
| > | ICANN takes control of Internet Internet Time Zone Database
| > |
| > | http://www.icann.org/en/news/releases/release-14oct11-en.pdf
| > |
| > | The problem with TZ probably can be considered as solved :)
| >
| > Not so fast. While this is undoubtedly excellent news which presumably solves
| > the _database_ issue after the tireless work of Olson and Eggert came under
| > patent troll attack, it does not magically give us the pony to fix all broken
| > Windows installations.
| >
| > Remember that the whole reason R ships with TZ data (and the Olson library)
| > is that a certain popular operating system fails to provide this natively.
| >
| > But I nitpick. We all have an option or two when it comes to OSs and many of
| > us even exercise these ;)
| >
| 
| I am not sure specifically what you are referring to here but Windows
| does support time zones.  Here is a list of the ones supported by

I was paraphrasing Brian Ripley who used the term 'woefully inadequate':

   From: Prof Brian Ripley <ripley at stats.ox.ac.uk>
   To: Jeff Ryan <jeff.a.ryan at gmail.com>
   Cc: r-devel at r-project.org
   Subject: Re: [Rd] tzone DB lawsuit Implications for R-project?
   Date: Fri, 7 Oct 2011 16:51:17 +0100 (BST)
   
   Not as yet.  Many much bigger users than us (almost all Unix-alike 
   OSes, Java, Tcl, MySQL, PostgreSQL, Oracle, ...) have more resources 
   to investigate.
   
   Note that we only use the database on Windows, and only because OS 
   services are woefully inadequate on that platform: we could go back to 
   using those services ....
   
Cheers, Dirk   

-- 
"Outside of a dog, a book is a man's best friend. Inside of a dog, it is too
dark to read." -- Groucho Marx


From sfan.stock at gmail.com  Thu Oct 20 00:16:33 2011
From: sfan.stock at gmail.com (Xiaofang)
Date: Thu, 20 Oct 2011 09:16:33 +1100
Subject: [R-SIG-Finance] marketdata in qsiblive
In-Reply-To: <42614.78.234.67.201.1319044674.squirrel@censix.com>
References: <CAEC_13c_Lp2Gs7ck1kHfdC8NVUaRVWckD_6894DcgCRFtUYuWg@mail.gmail.com>
	<42614.78.234.67.201.1319044674.squirrel@censix.com>
Message-ID: <CAEC_13fHTrde8vQiuLmEpDDS-XzrmiYco_--EUScjqjQsf92sw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111020/9b986815/attachment.pl>

From subbu at sssu.edu.in  Thu Oct 20 08:02:32 2011
From: subbu at sssu.edu.in (Subramanian S)
Date: Thu, 20 Oct 2011 11:32:32 +0530
Subject: [R-SIG-Finance] White's Reality Check
In-Reply-To: <CALS_8bEwHQ2rxuZ1_JeTz6ZgkReSFy77CV7Grxf_VfO55aHFag@mail.gmail.com>
References: <CALS_8bEwHQ2rxuZ1_JeTz6ZgkReSFy77CV7Grxf_VfO55aHFag@mail.gmail.com>
Message-ID: <CALS_8bHJxY21+COovMO_-y18_+4Rh4y4VBzSKgv53vsdas0BwQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111020/b5d017c9/attachment.pl>

From me at censix.com  Thu Oct 20 09:31:21 2011
From: me at censix.com (soren wilkening)
Date: Thu, 20 Oct 2011 00:31:21 -0700 (PDT)
Subject: [R-SIG-Finance] marketdata in qsiblive
In-Reply-To: <CAEC_13fHTrde8vQiuLmEpDDS-XzrmiYco_--EUScjqjQsf92sw@mail.gmail.com>
References: <CAEC_13c_Lp2Gs7ck1kHfdC8NVUaRVWckD_6894DcgCRFtUYuWg@mail.gmail.com>
	<42614.78.234.67.201.1319044674.squirrel@censix.com>
	<CAEC_13fHTrde8vQiuLmEpDDS-XzrmiYco_--EUScjqjQsf92sw@mail.gmail.com>
Message-ID: <1319095881046-3921102.post@n4.nabble.com>


from IB, you can get daily data with this 'IBrokers' function

reqHistoricalData( tws, contract, barSize = "1 day", ....)

-----
http://censix.com
--
View this message in context: http://r.789695.n4.nabble.com/marketdata-in-qsiblive-tp3918591p3921102.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From sfan.stock at gmail.com  Thu Oct 20 13:21:05 2011
From: sfan.stock at gmail.com (Xiaofang)
Date: Thu, 20 Oct 2011 21:21:05 +1000
Subject: [R-SIG-Finance] marketdata in qsiblive
In-Reply-To: <1319095881046-3921102.post@n4.nabble.com>
References: <CAEC_13c_Lp2Gs7ck1kHfdC8NVUaRVWckD_6894DcgCRFtUYuWg@mail.gmail.com>
	<42614.78.234.67.201.1319044674.squirrel@censix.com>
	<CAEC_13fHTrde8vQiuLmEpDDS-XzrmiYco_--EUScjqjQsf92sw@mail.gmail.com>
	<1319095881046-3921102.post@n4.nabble.com>
Message-ID: <CAEC_13cc5G8=8wo+3qprbEQWMSECfk=6vkzGQHtacDmuw_DBrg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111020/ffc0e9d1/attachment.pl>

From me at censix.com  Thu Oct 20 16:00:34 2011
From: me at censix.com (soren wilkening)
Date: Thu, 20 Oct 2011 07:00:34 -0700 (PDT)
Subject: [R-SIG-Finance] marketdata in qsiblive
In-Reply-To: <CAEC_13cc5G8=8wo+3qprbEQWMSECfk=6vkzGQHtacDmuw_DBrg@mail.gmail.com>
References: <CAEC_13c_Lp2Gs7ck1kHfdC8NVUaRVWckD_6894DcgCRFtUYuWg@mail.gmail.com>
	<42614.78.234.67.201.1319044674.squirrel@censix.com>
	<CAEC_13fHTrde8vQiuLmEpDDS-XzrmiYco_--EUScjqjQsf92sw@mail.gmail.com>
	<1319095881046-3921102.post@n4.nabble.com>
	<CAEC_13cc5G8=8wo+3qprbEQWMSECfk=6vkzGQHtacDmuw_DBrg@mail.gmail.com>
Message-ID: <1319119234933-3921977.post@n4.nabble.com>


I think that should do it, provided that your reqHistoricalData(..) request
returns the data you want.

In regard to the 'DBXD' and 'DBXD_xts' objects I used in the demo: You are
right as well. the first one is not used. I just have it there for legacy
purposes, only the ..._xts one matters.

-----
http://censix.com
--
View this message in context: http://r.789695.n4.nabble.com/marketdata-in-qsiblive-tp3918591p3921977.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From johnzli at comcast.net  Fri Oct 21 18:40:19 2011
From: johnzli at comcast.net (johnzli at comcast.net)
Date: Fri, 21 Oct 2011 16:40:19 +0000 (UTC)
Subject: [R-SIG-Finance] help needed for rugarch forecast function
Message-ID: <213196319.1018627.1319215219199.JavaMail.root@sz0053a.emeryville.ca.mail.comcast.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111021/9bc632d5/attachment.pl>

From josh.m.ulrich at gmail.com  Sat Oct 22 04:21:14 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Fri, 21 Oct 2011 21:21:14 -0500
Subject: [R-SIG-Finance] quantstrat parameters
In-Reply-To: <1df91e85773ab1601838a8e35588965b.squirrel@www.turningbull.com>
References: <1df91e85773ab1601838a8e35588965b.squirrel@www.turningbull.com>
Message-ID: <CAPPM_gR9foAAzqq12RA=nvDk2=MNBr6zeRPo5sn=cTrybizXTw@mail.gmail.com>

Hi Roger,

Have you seen Brian's answer in this thread?
https://stat.ethz.ch/pipermail/r-sig-finance/2011q3/008470.html

I believe one of those two approaches should work for you.

Best,
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com



On Wed, Oct 19, 2011 at 12:01 PM, Roger Trimble <roger at turningbull.com> wrote:
> Good afternoon,
>
> I have a question regarding the usage of parameters to quantstrat. ?As an
> example, I have a strategy that uses three moving averages ('EMA'); slow,
> medium, and fast. ?I would like to run this strategy through
> applyParameter, using different combinations of 'n' for the different EMA
> indicators.
>
> My apply strategy command looks something like this:
> out <- applyStrategy(strategy=strat, portfolios=st.name,
> ? ?parameters=list(nfast=10,nmed=28,nslow=60))
>
> So, I am using nfast, nmed, and nslow to represent the 'n' argument for EMA.
>
> In my strategy definition, I am using this:
>
> ## fast ma
> strat <- add.indicator(strategy=strat,
> ? ? ? ? ? ? ? ? ? ? ? name='EMA',
> ? ? ? ? ? ? ? ? ? ? ? arguments=list(x=quote(Cl(mktdata))),
> ? ? ? ? ? ? ? ? ? ? ? parameters=list(n=quote(nfast)),
> ? ? ? ? ? ? ? ? ? ? ? label='fast.ma')
> ## med ma
> strat <- add.indicator(strategy=strat,
> ? ? ? ? ? ? ? ? ? ? ? name='EMA',
> ? ? ? ? ? ? ? ? ? ? ? arguments=list(x=quote(Cl(mktdata))),
> ? ? ? ? ? ? ? ? ? ? ? parameters=list(n=quote(nmed)),
> ? ? ? ? ? ? ? ? ? ? ? label='med.ma')
> ## slow ma
> strat <- add.indicator(strategy=strat,
> ? ? ? ? ? ? ? ? ? ? ? name='EMA',
> ? ? ? ? ? ? ? ? ? ? ? arguments=list(x=quote(Cl(mktdata))),
> ? ? ? ? ? ? ? ? ? ? ? parameters=list(n=quote(nslow)),
> ? ? ? ? ? ? ? ? ? ? ? label='slow.ma')
>
> The strategy runs without error, but the parameters do not appear to be
> evaluating correctly, and the model finishes without trading. ?I believe
> this is because the indicators are defaulting to 10, and never firing a
> signal. ?In viewing mktdata after the run, I can confirm the indicators
> are all equal.
>
> If I run the model explicitly setting the respective n arguments, e.g.
> arguements=list(x=quote(Cl(mktdata)),n=28)..., ?then the strategy runs as
> expected with signals and trades.
>
>
> Looking into the code leads me to believe my intuition is wrong about how
> this works:
>
> ? ? ? ?# see 'S Programming p. 67 for this matching
> ? ? ? ?fun<-match.fun(indicator$name)
> ? ? ? ?.formals ?<- formals(fun)
> ? ? ? ?onames <- names(.formals)
>
> ? ? ? ?pm <- pmatch(names(indicator$arguments), onames, nomatch = 0L)
> ? ? ? ?if (any(pm == 0L))
> ? ? ? ? ? ?warning(paste("some arguments stored for",indicator$name,"do
> not match"))
> ? ? ? ?names(indicator$arguments[pm > 0L]) <- onames[pm]
> ? ? ? ?.formals[pm] <- indicator$arguments[pm > 0L]
>
> ? ? ? ? ? ? ? ?# now add arguments from parameters
> ? ? ? ? ? ? ? ?if(length(parameters)){
> ? ? ? ? ? ? ? ? ? ? ? ?pm <- pmatch(names(parameters), onames, nomatch = 0L)
> ? ? ? ? ? ? ? ? ? ? ? ?names(parameters[pm > 0L]) <- onames[pm]
> ? ? ? ? ? ? ? ? ? ? ? ?.formals[pm] <- parameters[pm > 0L]
> ? ? ? ? ? ? ? ?}
>
>
> It appears to me that names(parameters) and onames need to be the same,
> which leaves me confused about how to specify different parameters to
> different indicator functions that are looking for the same named
> argument.
>
> I'm sure my error is operator head-space and timing... ?I greatly
> appreciate any feedback here. ?Thank you very much.
>
> Roger
>
> --
> Roger Trimble
> TurningBull
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From fin_engr at hotmail.com  Sun Oct 23 00:10:15 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Sat, 22 Oct 2011 18:10:15 -0400
Subject: [R-SIG-Finance] PerformanceAnalytics package
Message-ID: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>


hi,



I've been trying to familiarize myself with the PerformanceAnalytics package.



As I go through the examples (in the attached file), I faced a hiccup.

When I run the following code, it only prints the first chart



charts.PerformanceSummary(managers[, c(manager.col,

indexes.cols)],colorset = rich6equal, lwd = 2, ylog = TRUE)



and gives me the following error:


Error in UseMethod("time<-") :

  no applicable method for 'time<-' applied to an object of class

"c('xts', 'zoo')"



Can you please let me know how I can fix it.



Thanks!

 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111022/1037953d/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PA-charts.pdf
Type: application/pdf
Size: 256508 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111022/1037953d/attachment.pdf>

From josh.m.ulrich at gmail.com  Sun Oct 23 00:19:33 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sat, 22 Oct 2011 17:19:33 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics package
In-Reply-To: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>
References: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>
Message-ID: <CAPPM_gSLyDVgZ=2kBEOSh3YCVi8VLkOf3md5kwz49HK84nDTVg@mail.gmail.com>

I know Dirk told you to post here, but please mention that you've
cross-posted so other can find answers easier.
http://stackoverflow.com/questions/7862410/r-performanceanalytics-package

Also, please follow the posting guide.  Specifically note the sections
"Surprising behavior and bugs" and "Common posting mistakes".
Following the guide will make it easier--therefore more likely--for
people to help you.
http://www.r-project.org/posting-guide.html

Best,
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com



On Sat, Oct 22, 2011 at 5:10 PM, financial engineer
<fin_engr at hotmail.com> wrote:
> hi,
>
> I've been trying to familiarize myself with the PerformanceAnalytics
> package.
>
> As I go through the examples (in the attached file), I faced a hiccup.
> When I run the following code, it only prints the first chart
>
> charts.PerformanceSummary(
> managers[, c(manager.col,
> indexes.cols)],colorset = rich6equal, lwd = 2, ylog = TRUE)
>
> and gives me the following error:
>
> Error in UseMethod("time<-") :
> ?no applicable method for 'time<-' applied to an object of class
> "c('xts', 'zoo')"
>
> Can you please let me know how I can fix it.
>
> Thanks!
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


From brian at braverock.com  Sun Oct 23 00:20:04 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Sat, 22 Oct 2011 17:20:04 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics package
In-Reply-To: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>
References: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>
Message-ID: <ecd4da48f89a0a468f3fba7d0c905624@braverock.com>

This is most likely a conflict between xts/zoo and the various f* Rmetrics
packages 
(or possibly the timeSeries package from Rmetrics).  You'll like see a
warning that function 'time' is being masked.

the zoo/xts and Rmetrics teams are aware of the issue, and are trying to
sort out a modle that will avoid trhe conflict.

For now, the most likely way for you to avoid this issue is to not load
the Rmetrics packages, or to load zoo/xts *after* you've loaded any
Rmetrics packages you need. 

On Sat, 22 Oct 2011 18:10:15 -0400, financial engineer
<fin_engr at hotmail.com> wrote:
> hi,
> 
> 
> 
> I've been trying to familiarize myself with the PerformanceAnalytics
> package.
> 
> 
> 
> As I go through the examples (in the attached file), I faced a hiccup.
> 
> When I run the following code, it only prints the first chart
> 
> 
> 
> charts.PerformanceSummary(managers[, c(manager.col,
> 
> indexes.cols)],colorset = rich6equal, lwd = 2, ylog = TRUE)
> 
> 
> 
> and gives me the following error:
> 
> 
> Error in UseMethod("time<-") :
> 
>   no applicable method for 'time<-' applied to an object of class
> 
> "c('xts', 'zoo')"
> 
> 
> 
> Can you please let me know how I can fix it.
> 
> 
> 
> Thanks!

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From fin_engr at hotmail.com  Sun Oct 23 00:34:44 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Sat, 22 Oct 2011 18:34:44 -0400
Subject: [R-SIG-Finance] PerformanceAnalytics package
In-Reply-To: <ecd4da48f89a0a468f3fba7d0c905624@braverock.com>
References: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>,
	<ecd4da48f89a0a468f3fba7d0c905624@braverock.com>
Message-ID: <COL118-W23A2F1A3827FC540F9C1D7EFE90@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111022/35955203/attachment.pl>

From jeff.a.ryan at gmail.com  Sun Oct 23 00:47:39 2011
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Sat, 22 Oct 2011 17:47:39 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics package
In-Reply-To: <COL118-W23A2F1A3827FC540F9C1D7EFE90@phx.gbl>
References: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>
	<ecd4da48f89a0a468f3fba7d0c905624@braverock.com>
	<COL118-W23A2F1A3827FC540F9C1D7EFE90@phx.gbl>
Message-ID: <A0268EDE-5C48-4951-A004-A64D9BBA6278@gmail.com>

Can you include your sessionInfo() output as well. 

You may be running old packages or some strange combination. Without knowing your context a guess is all that we can muster. 

Best,
Jeff

PS. StackOverflow may be the current 'cool' but it is mostly fracturing the answer base when it comes to R and Finance. In general that's a very bad thing. Unless of course those SO points you accumulate have some sort of store you can cash them in at. I think the store is Joel's pocket. 



Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Oct 22, 2011, at 5:34 PM, financial engineer <fin_engr at hotmail.com> wrote:

> 
> 
> thanks, Brian
> will do so.
> 
>> Date: Sat, 22 Oct 2011 17:20:04 -0500
>> From: brian at braverock.com
>> To: fin_engr at hotmail.com
>> CC: r-sig-finance at r-project.org
>> Subject: Re: [R-SIG-Finance] PerformanceAnalytics package
>> 
>> This is most likely a conflict between xts/zoo and the various f* Rmetrics
>> packages 
>> (or possibly the timeSeries package from Rmetrics).  You'll like see a
>> warning that function 'time' is being masked.
>> 
>> the zoo/xts and Rmetrics teams are aware of the issue, and are trying to
>> sort out a modle that will avoid trhe conflict.
>> 
>> For now, the most likely way for you to avoid this issue is to not load
>> the Rmetrics packages, or to load zoo/xts *after* you've loaded any
>> Rmetrics packages you need. 
>> 
>> On Sat, 22 Oct 2011 18:10:15 -0400, financial engineer
>> <fin_engr at hotmail.com> wrote:
>>> hi,
>>> 
>>> 
>>> 
>>> I've been trying to familiarize myself with the PerformanceAnalytics
>>> package.
>>> 
>>> 
>>> 
>>> As I go through the examples (in the attached file), I faced a hiccup.
>>> 
>>> When I run the following code, it only prints the first chart
>>> 
>>> 
>>> 
>>> charts.PerformanceSummary(managers[, c(manager.col,
>>> 
>>> indexes.cols)],colorset = rich6equal, lwd = 2, ylog = TRUE)
>>> 
>>> 
>>> 
>>> and gives me the following error:
>>> 
>>> 
>>> Error in UseMethod("time<-") :
>>> 
>>>  no applicable method for 'time<-' applied to an object of class
>>> 
>>> "c('xts', 'zoo')"
>>> 
>>> 
>>> 
>>> Can you please let me know how I can fix it.
>>> 
>>> 
>>> 
>>> Thanks!
>> 
>> -- 
>> Brian G. Peterson
>> http://braverock.com/brian/
>> Ph: 773-459-4973
>> IM: bgpbraverock
>                         
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From fin_engr at hotmail.com  Sun Oct 23 01:08:10 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Sat, 22 Oct 2011 19:08:10 -0400
Subject: [R-SIG-Finance] PerformanceAnalytics package
In-Reply-To: <A0268EDE-5C48-4951-A004-A64D9BBA6278@gmail.com>
References: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>
	<ecd4da48f89a0a468f3fba7d0c905624@braverock.com>
	<COL118-W23A2F1A3827FC540F9C1D7EFE90@phx.gbl>,
	<A0268EDE-5C48-4951-A004-A64D9BBA6278@gmail.com>
Message-ID: <COL118-W23C918A3B6B28C65B8B6A1EFE90@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111022/61768836/attachment.pl>

From jeff.a.ryan at gmail.com  Sun Oct 23 01:57:52 2011
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Sat, 22 Oct 2011 18:57:52 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics package
In-Reply-To: <COL118-W23C918A3B6B28C65B8B6A1EFE90@phx.gbl>
References: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>
	<ecd4da48f89a0a468f3fba7d0c905624@braverock.com>
	<COL118-W23A2F1A3827FC540F9C1D7EFE90@phx.gbl>
	<A0268EDE-5C48-4951-A004-A64D9BBA6278@gmail.com>
	<COL118-W23C918A3B6B28C65B8B6A1EFE90@phx.gbl>
Message-ID: <1B806AD4-6537-4532-97DD-126267771B65@gmail.com>

Something is obviously not consistent, as the sessionInfo you just sent doesn't even include PerformanceAnalytics. 

Can you try and run your example again to the point of breakage and send the sessionInfo() from that one?

Thanks
Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Oct 22, 2011, at 6:08 PM, financial engineer <fin_engr at hotmail.com> wrote:

> Jeff,
> 
> here's the output you requested.
> 
> R version 2.12.1 (2010-12-16)
> Platform: i686-pc-linux-gnu (32-bit)
> 
> locale:
>  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
>  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
>  [5] LC_MONETARY=C              LC_MESSAGES=en_US.UTF-8   
>  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
>  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base     
> 
> loaded via a namespace (and not attached):
> [1] portfolio_0.4-5      portfolioSim_0.2-6   scatterplot3d_0.3-33
> 
> If I need to upgrade, please let me know. thanks!
> 
> > CC: brian at braverock.com; r-sig-finance at r-project.org
> > From: jeff.a.ryan at gmail.com
> > Subject: Re: [R-SIG-Finance] PerformanceAnalytics package
> > Date: Sat, 22 Oct 2011 17:47:39 -0500
> > To: fin_engr at hotmail.com
> > 
> > Can you include your sessionInfo() output as well. 
> > 
> > You may be running old packages or some strange combination. Without knowing your context a guess is all that we can muster. 
> > 
> > Best,
> > Jeff
> > 
> > PS. StackOverflow may be the current 'cool' but it is mostly fracturing the answer base when it comes to R and Finance. In general that's a very bad thing. Unless of course those SO points you accumulate have some sort of store you can cash them in at. I think the store is Joel's pocket. 
> > 
> > 
> > 
> > Jeffrey Ryan | Founder | jeffrey.ryan at lemnica.com
> > 
> > www.lemnica.com
> > 
> > On Oct 22, 2011, at 5:34 PM, financial engineer <fin_engr at hotmail.com> wrote:
> > 
> > > 
> > > 
> > > thanks, Brian
> > > will do so.
> > > 
> > >> Date: Sat, 22 Oct 2011 17:20:04 -0500
> > >> From: brian at braverock.com
> > >> To: fin_engr at hotmail.com
> > >> CC: r-sig-finance at r-project.org
> > >> Subject: Re: [R-SIG-Finance] PerformanceAnalytics package
> > >> 
> > >> This is most likely a conflict between xts/zoo and the various f* Rmetrics
> > >> packages 
> > >> (or possibly the timeSeries package from Rmetrics). You'll like see a
> > >> warning that function 'time' is being masked.
> > >> 
> > >> the zoo/xts and Rmetrics teams are aware of the issue, and are trying to
> > >> sort out a modle that will avoid trhe conflict.
> > >> 
> > >> For now, the most likely way for you to avoid this issue is to not load
> > >> the Rmetrics packages, or to load zoo/xts *after* you've loaded any
> > >> Rmetrics packages you need. 
> > >> 
> > >> On Sat, 22 Oct 2011 18:10:15 -0400, financial engineer
> > >> <fin_engr at hotmail.com> wrote:
> > >>> hi,
> > >>> 
> > >>> 
> > >>> 
> > >>> I've been trying to familiarize myself with the PerformanceAnalytics
> > >>> package.
> > >>> 
> > >>> 
> > >>> 
> > >>> As I go through the examples (in the attached file), I faced a hiccup.
> > >>> 
> > >>> When I run the following code, it only prints the first chart
> > >>> 
> > >>> 
> > >>> 
> > >>> charts.PerformanceSummary(managers[, c(manager.col,
> > >>> 
> > >>> indexes.cols)],colorset = rich6equal, lwd = 2, ylog = TRUE)
> > >>> 
> > >>> 
> > >>> 
> > >>> and gives me the following error:
> > >>> 
> > >>> 
> > >>> Error in UseMethod("time<-") :
> > >>> 
> > >>> no applicable method for 'time<-' applied to an object of class
> > >>> 
> > >>> "c('xts', 'zoo')"
> > >>> 
> > >>> 
> > >>> 
> > >>> Can you please let me know how I can fix it.
> > >>> 
> > >>> 
> > >>> 
> > >>> Thanks!
> > >> 
> > >> -- 
> > >> Brian G. Peterson
> > >> http://braverock.com/brian/
> > >> Ph: 773-459-4973
> > >> IM: bgpbraverock
> > > 
> > > [[alternative HTML version deleted]]
> > > 
> > > _______________________________________________
> > > R-SIG-Finance at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > > -- Subscriber-posting only. If you want to post, subscribe first.
> > > -- Also note that this is not the r-help list where general R questions should go.


From fin_engr at hotmail.com  Sun Oct 23 02:06:50 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Sat, 22 Oct 2011 20:06:50 -0400
Subject: [R-SIG-Finance] PerformanceAnalytics package
In-Reply-To: <1B806AD4-6537-4532-97DD-126267771B65@gmail.com>
References: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>
	<ecd4da48f89a0a468f3fba7d0c905624@braverock.com>
	<COL118-W23A2F1A3827FC540F9C1D7EFE90@phx.gbl>
	<A0268EDE-5C48-4951-A004-A64D9BBA6278@gmail.com>
	<COL118-W23C918A3B6B28C65B8B6A1EFE90@phx.gbl>,
	<1B806AD4-6537-4532-97DD-126267771B65@gmail.com>
Message-ID: <COL118-W532379BC51DCBDBFDF0BCFEFEE0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111022/c23cc725/attachment.pl>

From jeff.a.ryan at gmail.com  Sun Oct 23 02:13:29 2011
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Sat, 22 Oct 2011 19:13:29 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics package
In-Reply-To: <COL118-W532379BC51DCBDBFDF0BCFEFEE0@phx.gbl>
References: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>
	<ecd4da48f89a0a468f3fba7d0c905624@braverock.com>
	<COL118-W23A2F1A3827FC540F9C1D7EFE90@phx.gbl>
	<A0268EDE-5C48-4951-A004-A64D9BBA6278@gmail.com>
	<COL118-W23C918A3B6B28C65B8B6A1EFE90@phx.gbl>
	<1B806AD4-6537-4532-97DD-126267771B65@gmail.com>
	<COL118-W532379BC51DCBDBFDF0BCFEFEE0@phx.gbl>
Message-ID: <9476AD06-C54D-4CE6-8252-F9E4D0C5E3D1@gmail.com>

It could be that you have fSeries (deprecated) instead of timeSeries (new version of fSeries), but if you no longer have a conflict, I suppose we should just be happy. 

Best,
Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Oct 22, 2011, at 7:06 PM, financial engineer <fin_engr at hotmail.com> wrote:

> I closed my old session, after saving it. then, opened a new session and ran the commands. this time I only had library(PerformanceAnalytics) and none others, and now it worked fine. So, it seems like the conflict that Brian mentioned is the issue.
> regardless, here's the sessionInfo()
> > sessionInfo()
> R version 2.12.1 (2010-12-16)
> Platform: i686-pc-linux-gnu (32-bit)
> 
> locale:
>  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
>  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
>  [5] LC_MONETARY=C              LC_MESSAGES=en_US.UTF-8   
>  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
>  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base     
> 
> other attached packages:
> [1] PerformanceAnalytics_1.0.3.2 xts_0.8-2                   
> [3] zoo_1.7-4                   
> 
> loaded via a namespace (and not attached):
> [1] grid_2.12.1          lattice_0.19-13      portfolio_0.4-5     
> [4] portfolioSim_0.2-6   scatterplot3d_0.3-33 tools_2.12.1 
> 
> 
> 
> > CC: brian at braverock.com; r-sig-finance at r-project.org
> > From: jeff.a.ryan at gmail.com
> > Subject: Re: [R-SIG-Finance] PerformanceAnalytics package
> > Date: Sat, 22 Oct 2011 18:57:52 -0500
> > To: fin_engr at hotmail.com
> > 
> > Something is obviously not consistent, as the sessionInfo you just sent doesn't even include PerformanceAnalytics. 
> > 
> > Can you try and run your example again to the point of breakage and send the sessionInfo() from that one?
> > 
> > Thanks
> > Jeff
> > 
> > Jeffrey Ryan | Founder | jeffrey.ryan at lemnica.com
> > 
> > www.lemnica.com
> > 
> > On Oct 22, 2011, at 6:08 PM, financial engineer <fin_engr at hotmail.com> wrote:
> > 
> > > Jeff,
> > > 
> > > here's the output you requested.
> > > 
> > > R version 2.12.1 (2010-12-16)
> > > Platform: i686-pc-linux-gnu (32-bit)
> > > 
> > > locale:
> > > [1] LC_CTYPE=en_US.UTF-8 LC_NUMERIC=C 
> > > [3] LC_TIME=en_US.UTF-8 LC_COLLATE=en_US.UTF-8 
> > > [5] LC_MONETARY=C LC_MESSAGES=en_US.UTF-8 
> > > [7] LC_PAPER=en_US.UTF-8 LC_NAME=C 
> > > [9] LC_ADDRESS=C LC_TELEPHONE=C 
> > > [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C 
> > > 
> > > attached base packages:
> > > [1] stats graphics grDevices utils datasets methods base 
> > > 
> > > loaded via a namespace (and not attached):
> > > [1] portfolio_0.4-5 portfolioSim_0.2-6 scatterplot3d_0.3-33
> > > 
> > > If I need to upgrade, please let me know. thanks!
> > > 
> > > > CC: brian at braverock.com; r-sig-finance at r-project.org
> > > > From: jeff.a.ryan at gmail.com
> > > > Subject: Re: [R-SIG-Finance] PerformanceAnalytics package
> > > > Date: Sat, 22 Oct 2011 17:47:39 -0500
> > > > To: fin_engr at hotmail.com
> > > > 
> > > > Can you include your sessionInfo() output as well. 
> > > > 
> > > > You may be running old packages or some strange combination. Without knowing your context a guess is all that we can muster. 
> > > > 
> > > > Best,
> > > > Jeff
> > > > 
> > > > PS. StackOverflow may be the current 'cool' but it is mostly fracturing the answer base when it comes to R and Finance. In general that's a very bad thing. Unless of course those SO points you accumulate have some sort of store you can cash them in at. I think the store is Joel's pocket. 
> > > > 
> > > > 
> > > > 
> > > > Jeffrey Ryan | Founder | jeffrey.ryan at lemnica.com
> > > > 
> > > > www.lemnica.com
> > > > 
> > > > On Oct 22, 2011, at 5:34 PM, financial engineer <fin_engr at hotmail.com> wrote:
> > > > 
> > > > > 
> > > > > 
> > > > > thanks, Brian
> > > > > will do so.
> > > > > 
> > > > >> Date: Sat, 22 Oct 2011 17:20:04 -0500
> > > > >> From: brian at braverock.com
> > > > >> To: fin_engr at hotmail.com
> > > > >> CC: r-sig-finance at r-project.org
> > > > >> Subject: Re: [R-SIG-Finance] PerformanceAnalytics package
> > > > >> 
> > > > >> This is most likely a conflict between xts/zoo and the various f* Rmetrics
> > > > >> packages 
> > > > >> (or possibly the timeSeries package from Rmetrics). You'll like see a
> > > > >> warning that function 'time' is being masked.
> > > > >> 
> > > > >> the zoo/xts and Rmetrics teams are aware of the issue, and are trying to
> > > > >> sort out a modle that will avoid trhe conflict.
> > > > >> 
> > > > >> For now, the most likely way for you to avoid this issue is to not load
> > > > >> the Rmetrics packages, or to load zoo/xts *after* you've loaded any
> > > > >> Rmetrics packages you need. 
> > > > >> 
> > > > >> On Sat, 22 Oct 2011 18:10:15 -0400, financial engineer
> > > > >> <fin_engr at hotmail.com> wrote:
> > > > >>> hi,
> > > > >>> 
> > > > >>> 
> > > > >>> 
> > > > >>> I've been trying to familiarize myself with the PerformanceAnalytics
> > > > >>> package.
> > > > >>> 
> > > > >>> 
> > > > >>> 
> > > > >>> As I go through the examples (in the attached file), I faced a hiccup.
> > > > >>> 
> > > > >>> When I run the following code, it only prints the first chart
> > > > >>> 
> > > > >>> 
> > > > >>> 
> > > > >>> charts.PerformanceSummary(managers[, c(manager.col,
> > > > >>> 
> > > > >>> indexes.cols)],colorset = rich6equal, lwd = 2, ylog = TRUE)
> > > > >>> 
> > > > >>> 
> > > > >>> 
> > > > >>> and gives me the following error:
> > > > >>> 
> > > > >>> 
> > > > >>> Error in UseMethod("time<-") :
> > > > >>> 
> > > > >>> no applicable method for 'time<-' applied to an object of class
> > > > >>> 
> > > > >>> "c('xts', 'zoo')"
> > > > >>> 
> > > > >>> 
> > > > >>> 
> > > > >>> Can you please let me know how I can fix it.
> > > > >>> 
> > > > >>> 
> > > > >>> 
> > > > >>> Thanks!
> > > > >> 
> > > > >> -- 
> > > > >> Brian G. Peterson
> > > > >> http://braverock.com/brian/
> > > > >> Ph: 773-459-4973
> > > > >> IM: bgpbraverock
> > > > > 
> > > > > [[alternative HTML version deleted]]
> > > > > 
> > > > > _______________________________________________
> > > > > R-SIG-Finance at r-project.org mailing list
> > > > > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > > > > -- Subscriber-posting only. If you want to post, subscribe first.
> > > > > -- Also note that this is not the r-help list where general R questions should go.


From fin_engr at hotmail.com  Sun Oct 23 02:17:43 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Sat, 22 Oct 2011 20:17:43 -0400
Subject: [R-SIG-Finance] PerformanceAnalytics package
In-Reply-To: <9476AD06-C54D-4CE6-8252-F9E4D0C5E3D1@gmail.com>
References: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>
	<ecd4da48f89a0a468f3fba7d0c905624@braverock.com>
	<COL118-W23A2F1A3827FC540F9C1D7EFE90@phx.gbl>
	<A0268EDE-5C48-4951-A004-A64D9BBA6278@gmail.com>
	<COL118-W23C918A3B6B28C65B8B6A1EFE90@phx.gbl>
	<1B806AD4-6537-4532-97DD-126267771B65@gmail.com>
	<COL118-W532379BC51DCBDBFDF0BCFEFEE0@phx.gbl>,
	<9476AD06-C54D-4CE6-8252-F9E4D0C5E3D1@gmail.com>
Message-ID: <COL118-W223A4B2EBCA3210CF6D6FEEFEE0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111022/c6723b18/attachment.pl>

From fin_engr at hotmail.com  Sun Oct 23 21:56:48 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Sun, 23 Oct 2011 15:56:48 -0400
Subject: [R-SIG-Finance] PerformanceAnalytics package
In-Reply-To: <ecd4da48f89a0a468f3fba7d0c905624@braverock.com>
References: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>,
	<ecd4da48f89a0a468f3fba7d0c905624@braverock.com>
Message-ID: <COL118-W39320E447EAF12F2A6E1A8EFEE0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111023/40f5d3ac/attachment.pl>

From fin_engr at hotmail.com  Mon Oct 24 17:49:12 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Mon, 24 Oct 2011 11:49:12 -0400
Subject: [R-SIG-Finance] VaR and ES in PerformanceAnalytics
In-Reply-To: <COL118-W39320E447EAF12F2A6E1A8EFEE0@phx.gbl>
References: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>, ,
	<ecd4da48f89a0a468f3fba7d0c905624@braverock.com>,
	<COL118-W39320E447EAF12F2A6E1A8EFEE0@phx.gbl>
Message-ID: <COL118-W99A02074206FDE9973792EFEF0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111024/dfd4e6c8/attachment.pl>

From michael.weylandt at gmail.com  Mon Oct 24 19:19:45 2011
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Mon, 24 Oct 2011 13:19:45 -0400
Subject: [R-SIG-Finance] PerformanceAnalytics package
In-Reply-To: <COL118-W39320E447EAF12F2A6E1A8EFEE0@phx.gbl>
References: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>
	<ecd4da48f89a0a468f3fba7d0c905624@braverock.com>
	<COL118-W39320E447EAF12F2A6E1A8EFEE0@phx.gbl>
Message-ID: <CAAmySGPwOqbNW58hAiFCG9=M6yvMnH03n5ZwaPX3wKLJDBP2nw@mail.gmail.com>

I don't know if Josh/Brian/Jeff got you an answer on this, but on my
version of PerformanceAnalytics (1.0.3.2), these different VaR methods
seem to have been collapsed into VaR with different methods available.
Perhaps your reference is for an older version of the package in which
these have been deprecated.

I also don't see table.MonthlyReturns() only table.AnnualizedReturns()
available. I believe I read somewhere that the package is designed
with monthly data in mind (though most of the analytical techniques
are scale invariant) so it's perhaps not surprising that there's no
aggregation tool to monthly.

Michael

On Sun, Oct 23, 2011 at 3:56 PM, financial engineer
<fin_engr at hotmail.com> wrote:
>
> hi,
>
> As I continue working through the functions with my time series of daily returns(R.MCO), most of the functions have been working fine, except the following(so far):
>
> VaR.mean.MCO=VaR.mean(R.MCO,p=0.95)
> Error: could not find function "VaR.mean"
>> VaR.traditional.MCO=VaR.traditional(R.MCO,p=0.95)
> Error: could not find function "VaR.traditional"
>> modifiedVaR.MCO=modifiedVaR(R.MCO,p=0.99)
> Error: could not find function "modifiedVaR"
>> table.MonthlyReturns(R.MCO,ci=0.95,digits=4)
> Error: could not find function "table.MonthlyReturns"
>
> Can you please let me know how I can fix these errors, as I am keen to use these functions for computing the daily VaR and also generate tables of monthly returns.
>
> Thanks!
>
>> Date: Sat, 22 Oct 2011 17:20:04 -0500
>> From: brian at braverock.com
>> To: fin_engr at hotmail.com
>> CC: r-sig-finance at r-project.org
>> Subject: Re: [R-SIG-Finance] PerformanceAnalytics package
>>
>> This is most likely a conflict between xts/zoo and the various f* Rmetrics
>> packages
>> (or possibly the timeSeries package from Rmetrics). ?You'll like see a
>> warning that function 'time' is being masked.
>>
>> the zoo/xts and Rmetrics teams are aware of the issue, and are trying to
>> sort out a modle that will avoid trhe conflict.
>>
>> For now, the most likely way for you to avoid this issue is to not load
>> the Rmetrics packages, or to load zoo/xts *after* you've loaded any
>> Rmetrics packages you need.
>>
>> On Sat, 22 Oct 2011 18:10:15 -0400, financial engineer
>> <fin_engr at hotmail.com> wrote:
>> > hi,
>> >
>> >
>> >
>> > I've been trying to familiarize myself with the PerformanceAnalytics
>> > package.
>> >
>> >
>> >
>> > As I go through the examples (in the attached file), I faced a hiccup.
>> >
>> > When I run the following code, it only prints the first chart
>> >
>> >
>> >
>> > charts.PerformanceSummary(managers[, c(manager.col,
>> >
>> > indexes.cols)],colorset = rich6equal, lwd = 2, ylog = TRUE)
>> >
>> >
>> >
>> > and gives me the following error:
>> >
>> >
>> > Error in UseMethod("time<-") :
>> >
>> > ? no applicable method for 'time<-' applied to an object of class
>> >
>> > "c('xts', 'zoo')"
>> >
>> >
>> >
>> > Can you please let me know how I can fix it.
>> >
>> >
>> >
>> > Thanks!
>>
>> --
>> Brian G. Peterson
>> http://braverock.com/brian/
>> Ph: 773-459-4973
>> IM: bgpbraverock
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From fin_engr at hotmail.com  Mon Oct 24 19:27:04 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Mon, 24 Oct 2011 13:27:04 -0400
Subject: [R-SIG-Finance] PerformanceAnalytics package
In-Reply-To: <CAAmySGPwOqbNW58hAiFCG9=M6yvMnH03n5ZwaPX3wKLJDBP2nw@mail.gmail.com>
References: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>
	<ecd4da48f89a0a468f3fba7d0c905624@braverock.com>,
	<COL118-W39320E447EAF12F2A6E1A8EFEE0@phx.gbl>,
	<CAAmySGPwOqbNW58hAiFCG9=M6yvMnH03n5ZwaPX3wKLJDBP2nw@mail.gmail.com>
Message-ID: <COL118-W21D46AC58192FC6F91FCBDEFEF0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111024/449e7508/attachment.pl>

From brian at braverock.com  Mon Oct 24 20:11:25 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 24 Oct 2011 13:11:25 -0500
Subject: [R-SIG-Finance] VaR and ES in PerformanceAnalytics
In-Reply-To: <COL118-W99A02074206FDE9973792EFEF0@phx.gbl>
References: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>
	, , <ecd4da48f89a0a468f3fba7d0c905624@braverock.com>
	, <COL118-W39320E447EAF12F2A6E1A8EFEE0@phx.gbl>
	<COL118-W99A02074206FDE9973792EFEF0@phx.gbl>
Message-ID: <1319479885.4821.138.camel@brian-rcg>

On Mon, 2011-10-24 at 11:49 -0400, financial engineer wrote:
> I ran the VaR and ES using the below, and am trying to understand why the VaR(99%) 
> is exactly equal to ES(99%). Is that how it is supposed to be.....

You didn't include your data to make this reproducible, so I need to
speak in generalities.

>From the documentation:

 Modified expected shortfall should always be higher than modified
 Value at Risk. Due to estimation problems, this might not always
 be the case. Set operational = TRUE to replace modified ES with
 modified VaR in the (exceptional) case where the modified ES is
 smaller than modified VaR.

If you're seeing this, I expect your data is highly skewed and/or
kurtotic.

Cornish Fisher Modified VaR can exhibit what Jorion referred to as
'wrong tailed  behavior', migrating rapidly to zero or infinity.  While
this is a problem, it is only a problem if you aren't paying attention.
I use this as an indicator that I either don't have enough data or that
my data is likely unreliable.  It is also often an indication that your
preferred probability (99%) is too high for a reliable answer.

Look at function chart.VaRSensitivity to see how the VaR and ES play out
at different probability thresholds. 

The good news is that it's really obvious when this happens, you can
easily see it in the chart, and tell where you don't and probably
shouldn't have confidence in your estimating powers.

Just because some other methodologies will give you an answer that
claims to be precise doesn't mean that they are truly doing so.  Many
many people have written about the pitfalls of looking for too high a
precision in VaR/ES estimates.  I, for example, find 95% to be a good
number on daily return data, as this indicates a 1 in 20 'bad day', so
you can interpret the 95% ES as approximately your 'average one really
bad day a month' on daily return data.  I have a colleague who uses 92%
on monthly return data to estimate the 'average really bad month once a
year' on his portfolios.

I prefer 'approximately correct' to 'precisely wrong' statistics.

I could speak in more specifics about the characteristics of your data
with a reproducible example.

Regards,

  - Brian   

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From brian at braverock.com  Mon Oct 24 20:16:27 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 24 Oct 2011 13:16:27 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics package
In-Reply-To: <CAAmySGPwOqbNW58hAiFCG9=M6yvMnH03n5ZwaPX3wKLJDBP2nw@mail.gmail.com>
References: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>
	<ecd4da48f89a0a468f3fba7d0c905624@braverock.com>
	<COL118-W39320E447EAF12F2A6E1A8EFEE0@phx.gbl>
	<CAAmySGPwOqbNW58hAiFCG9=M6yvMnH03n5ZwaPX3wKLJDBP2nw@mail.gmail.com>
Message-ID: <1319480187.4821.143.camel@brian-rcg>

table.MonthlyReturns was replaced with table.CalendarReturns, which is
somewhat more flexible than the old function.

In general, PerformanceAnalytics is most tested on regular returns data.
Most of the functions will work with any xts/zoo time series of returns
(hourly, daily, weekly, monthly, annual, etc) .  Some will work on cash
P&L, prices, or a NAV/wealth index, as noted in the documentation for
those functions.  Where specific periodicities are required by a
function, this will be noted in the documentation for that function.

It is also true that all the VaR and ES functions were collapsed into a
single function for each with various univariate and portfolio methods.

Regards,

   - Brian


On Mon, 2011-10-24 at 13:19 -0400, R. Michael Weylandt wrote:
> I don't know if Josh/Brian/Jeff got you an answer on this, but on my
> version of PerformanceAnalytics (1.0.3.2), these different VaR methods
> seem to have been collapsed into VaR with different methods available.
> Perhaps your reference is for an older version of the package in which
> these have been deprecated.
> 
> I also don't see table.MonthlyReturns() only table.AnnualizedReturns()
> available. I believe I read somewhere that the package is designed
> with monthly data in mind (though most of the analytical techniques
> are scale invariant) so it's perhaps not surprising that there's no
> aggregation tool to monthly.
> 
> Michael
> 
> On Sun, Oct 23, 2011 at 3:56 PM, financial engineer
> <fin_engr at hotmail.com> wrote:
> >
> > hi,
> >
> > As I continue working through the functions with my time series of daily returns(R.MCO), most of the functions have been working fine, except the following(so far):
> >
> > VaR.mean.MCO=VaR.mean(R.MCO,p=0.95)
> > Error: could not find function "VaR.mean"
> >> VaR.traditional.MCO=VaR.traditional(R.MCO,p=0.95)
> > Error: could not find function "VaR.traditional"
> >> modifiedVaR.MCO=modifiedVaR(R.MCO,p=0.99)
> > Error: could not find function "modifiedVaR"
> >> table.MonthlyReturns(R.MCO,ci=0.95,digits=4)
> > Error: could not find function "table.MonthlyReturns"
> >
> > Can you please let me know how I can fix these errors, as I am keen to use these functions for computing the daily VaR and also generate tables of monthly returns.
> >
> > Thanks!
> >
> >> Date: Sat, 22 Oct 2011 17:20:04 -0500
> >> From: brian at braverock.com
> >> To: fin_engr at hotmail.com
> >> CC: r-sig-finance at r-project.org
> >> Subject: Re: [R-SIG-Finance] PerformanceAnalytics package
> >>
> >> This is most likely a conflict between xts/zoo and the various f* Rmetrics
> >> packages
> >> (or possibly the timeSeries package from Rmetrics).  You'll like see a
> >> warning that function 'time' is being masked.
> >>
> >> the zoo/xts and Rmetrics teams are aware of the issue, and are trying to
> >> sort out a modle that will avoid trhe conflict.
> >>
> >> For now, the most likely way for you to avoid this issue is to not load
> >> the Rmetrics packages, or to load zoo/xts *after* you've loaded any
> >> Rmetrics packages you need.
> >>
> >> On Sat, 22 Oct 2011 18:10:15 -0400, financial engineer
> >> <fin_engr at hotmail.com> wrote:
> >> > hi,
> >> >
> >> >
> >> >
> >> > I've been trying to familiarize myself with the PerformanceAnalytics
> >> > package.
> >> >
> >> >
> >> >
> >> > As I go through the examples (in the attached file), I faced a hiccup.
> >> >
> >> > When I run the following code, it only prints the first chart
> >> >
> >> >
> >> >
> >> > charts.PerformanceSummary(managers[, c(manager.col,
> >> >
> >> > indexes.cols)],colorset = rich6equal, lwd = 2, ylog = TRUE)
> >> >
> >> >
> >> >
> >> > and gives me the following error:
> >> >
> >> >
> >> > Error in UseMethod("time<-") :
> >> >
> >> >   no applicable method for 'time<-' applied to an object of class
> >> >
> >> > "c('xts', 'zoo')"
> >> >
> >> >
> >> >
> >> > Can you please let me know how I can fix it.
> >> >
> >> >
> >> >
> >> > Thanks!
> >>


From fin_engr at hotmail.com  Mon Oct 24 20:20:25 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Mon, 24 Oct 2011 14:20:25 -0400
Subject: [R-SIG-Finance] VaR and ES in PerformanceAnalytics
In-Reply-To: <1319479885.4821.138.camel@brian-rcg>
References: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>,, ,
	<ecd4da48f89a0a468f3fba7d0c905624@braverock.com>,,
	<COL118-W39320E447EAF12F2A6E1A8EFEE0@phx.gbl>,
	<COL118-W99A02074206FDE9973792EFEF0@phx.gbl>,
	<1319479885.4821.138.camel@brian-rcg>
Message-ID: <COL118-W417E49B58FE1632EC58D62EFEF0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111024/7404b448/attachment.pl>

From michael.weylandt at gmail.com  Mon Oct 24 20:20:35 2011
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Mon, 24 Oct 2011 14:20:35 -0400
Subject: [R-SIG-Finance] VaR and ES in PerformanceAnalytics
In-Reply-To: <1319479885.4821.138.camel@brian-rcg>
References: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>
	<ecd4da48f89a0a468f3fba7d0c905624@braverock.com>
	<COL118-W39320E447EAF12F2A6E1A8EFEE0@phx.gbl>
	<COL118-W99A02074206FDE9973792EFEF0@phx.gbl>
	<1319479885.4821.138.camel@brian-rcg>
Message-ID: <CAAmySGMmhf28jD8QuAT7ExULbq6jxfmud6DwwfofM3LQEL5v6A@mail.gmail.com>

I don't have the OP's data, but, just for the record, the same
phenomenon can be seen with SPY returns.

library(quantmod)
getSymbols("SPY")
R = na.omit(ROC(Ad(SPY)))

identical((ES(R, p = 0.99)-VaR(R, p = 0.99))[1,1],0)
TRUE

And thanks for the insightful explanation. Do you happen to have the
Jorion reference handy? If not, no worries, I can hunt it down.

Michael

On Mon, Oct 24, 2011 at 2:11 PM, Brian G. Peterson <brian at braverock.com> wrote:
> On Mon, 2011-10-24 at 11:49 -0400, financial engineer wrote:
>> I ran the VaR and ES using the below, and am trying to understand why the VaR(99%)
>> is exactly equal to ES(99%). Is that how it is supposed to be.....
>
> You didn't include your data to make this reproducible, so I need to
> speak in generalities.
>
> >From the documentation:
>
> ?Modified expected shortfall should always be higher than modified
> ?Value at Risk. Due to estimation problems, this might not always
> ?be the case. Set operational = TRUE to replace modified ES with
> ?modified VaR in the (exceptional) case where the modified ES is
> ?smaller than modified VaR.
>
> If you're seeing this, I expect your data is highly skewed and/or
> kurtotic.
>
> Cornish Fisher Modified VaR can exhibit what Jorion referred to as
> 'wrong tailed ?behavior', migrating rapidly to zero or infinity. ?While
> this is a problem, it is only a problem if you aren't paying attention.
> I use this as an indicator that I either don't have enough data or that
> my data is likely unreliable. ?It is also often an indication that your
> preferred probability (99%) is too high for a reliable answer.
>
> Look at function chart.VaRSensitivity to see how the VaR and ES play out
> at different probability thresholds.
>
> The good news is that it's really obvious when this happens, you can
> easily see it in the chart, and tell where you don't and probably
> shouldn't have confidence in your estimating powers.
>
> Just because some other methodologies will give you an answer that
> claims to be precise doesn't mean that they are truly doing so. ?Many
> many people have written about the pitfalls of looking for too high a
> precision in VaR/ES estimates. ?I, for example, find 95% to be a good
> number on daily return data, as this indicates a 1 in 20 'bad day', so
> you can interpret the 95% ES as approximately your 'average one really
> bad day a month' on daily return data. ?I have a colleague who uses 92%
> on monthly return data to estimate the 'average really bad month once a
> year' on his portfolios.
>
> I prefer 'approximately correct' to 'precisely wrong' statistics.
>
> I could speak in more specifics about the characteristics of your data
> with a reproducible example.
>
> Regards,
>
> ?- Brian
>
> --
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From brian at braverock.com  Mon Oct 24 21:06:30 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 24 Oct 2011 14:06:30 -0500
Subject: [R-SIG-Finance] VaR and ES in PerformanceAnalytics
In-Reply-To: <COL118-W417E49B58FE1632EC58D62EFEF0@phx.gbl>
References: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>
	,, , <ecd4da48f89a0a468f3fba7d0c905624@braverock.com>
	,, <COL118-W39320E447EAF12F2A6E1A8EFEE0@phx.gbl>
	, <COL118-W99A02074206FDE9973792EFEF0@phx.gbl>
	, <1319479885.4821.138.camel@brian-rcg>
	<COL118-W417E49B58FE1632EC58D62EFEF0@phx.gbl>
Message-ID: <1319483190.4821.157.camel@brian-rcg>

On Mon, 2011-10-24 at 14:20 -0400, financial engineer wrote:
> I appreciate your response and the clarification. I shall ponder over
> it.
> 
> Meanwhile, rather than sending a data file, I am attaching the code I
> ran to generate R.MCO which I used in the calcs. below
> 
> MCO = get.hist.quote("MCO", start = "2010-01-04", end = "2011-10-17",
> quote = "AdjClose", compression = "d")
> R.MCO = Return.calculate(MCO, method="compound")
> R.MCO = as.xts(R.MCO)
> 
> I'd be keen to read your specific response. 

I've attached the output of chart.VaRSensitivity on the MCO data.

You can see how the modified VaR tracks to the historical VaR very well,
much better than the Gaussian approximation.  

You can also see where the modified ES breaks down, at around 98%, and
starts climbing towards zero.  The operational assumption will return
the modified VaR.

You can also see that at high probability levels modified ES will give
larger loss estimates than the historical.  I tend to think conservative
risk estimates are a good thing, but others have opinions that differ on
the desirability of this.

I previously gave my rationale for using lower p values than p=.99 with
daily or lower frequency data.

Regards,

  - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock
-------------- next part --------------
A non-text attachment was scrubbed...
Name: MCO.VaRSensitivity
Type: application/pdf
Size: 17595 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111024/d63b6c4e/attachment.pdf>

From fin_engr at hotmail.com  Mon Oct 24 21:25:16 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Mon, 24 Oct 2011 15:25:16 -0400
Subject: [R-SIG-Finance] VaR and ES in PerformanceAnalytics
In-Reply-To: <1319483190.4821.157.camel@brian-rcg>
References: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>,,, ,
	<ecd4da48f89a0a468f3fba7d0c905624@braverock.com>,,,
	<COL118-W39320E447EAF12F2A6E1A8EFEE0@phx.gbl>,,
	<COL118-W99A02074206FDE9973792EFEF0@phx.gbl>,,
	<1319479885.4821.138.camel@brian-rcg>,
	<COL118-W417E49B58FE1632EC58D62EFEF0@phx.gbl>,
	<1319483190.4821.157.camel@brian-rcg>
Message-ID: <COL118-W46E277B5172E91590DDF05EFEF0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111024/a74b0470/attachment.pl>

From sfan.stock at gmail.com  Tue Oct 25 12:13:05 2011
From: sfan.stock at gmail.com (Fan)
Date: Tue, 25 Oct 2011 20:13:05 +1000
Subject: [R-SIG-Finance] getSymbols {quantmod}: load data from world markets
Message-ID: <CAEC_13cH4PLgvQq9U=o9xL+0mJLhg8gZTb34XUS62O6hV2tRsg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111025/914a8d65/attachment.pl>

From bd10stats at googlemail.com  Tue Oct 25 12:24:16 2011
From: bd10stats at googlemail.com (Bernd Dittmann)
Date: Tue, 25 Oct 2011 11:24:16 +0100
Subject: [R-SIG-Finance] negative p-values for t.test() in apply.rolling()
Message-ID: <CAKdis6Ggzn=_=PT+dob0Nt+LsTTX=QXf0GQak0Rd9UUWdPSKGg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111025/e373317c/attachment.pl>

From michael.weylandt at gmail.com  Tue Oct 25 13:29:00 2011
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Tue, 25 Oct 2011 07:29:00 -0400
Subject: [R-SIG-Finance] getSymbols {quantmod}: load data from world
	markets
In-Reply-To: <CAEC_13cH4PLgvQq9U=o9xL+0mJLhg8gZTb34XUS62O6hV2tRsg@mail.gmail.com>
References: <CAEC_13cH4PLgvQq9U=o9xL+0mJLhg8gZTb34XUS62O6hV2tRsg@mail.gmail.com>
Message-ID: <CAAmySGNz7zTf4JOPjX=TJh8o0g+dd1xKzUgLbhC6+yStx79rcg@mail.gmail.com>

library(quantmod)
getSymbols("CBA.AX")

Hope that helps,

Michael

On Tue, Oct 25, 2011 at 6:13 AM, Fan <sfan.stock at gmail.com> wrote:
> Hi there,
> I am trying to load data using getSymbols {quantmod}, however, it looks to
> me this function can only load data from US exchange, since I trade stocks
> in ASX, so I tried to use symbols like "ASX:CBA" and also tried to set up an
> exchange, but all failed, so I wonder if it is possible to use this function
> to load data from world markets? If not, any other functions existing to do
> the work?
> Thanks, Fan
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From gsee000 at gmail.com  Tue Oct 25 17:05:54 2011
From: gsee000 at gmail.com (G See)
Date: Tue, 25 Oct 2011 10:05:54 -0500
Subject: [R-SIG-Finance] negative p-values for t.test() in
	apply.rolling()
In-Reply-To: <CAKdis6Ggzn=_=PT+dob0Nt+LsTTX=QXf0GQak0Rd9UUWdPSKGg@mail.gmail.com>
References: <CAKdis6Ggzn=_=PT+dob0Nt+LsTTX=QXf0GQak0Rd9UUWdPSKGg@mail.gmail.com>
Message-ID: <CA+xi=qZpDyYROD0HV74JTvgDxL=DggxrwZ-x0CzEKKHzuK5SCw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111025/3dcafb01/attachment.pl>

From linusholtermann at gmx.de  Tue Oct 25 18:36:00 2011
From: linusholtermann at gmx.de (Lin23)
Date: Tue, 25 Oct 2011 09:36:00 -0700 (PDT)
Subject: [R-SIG-Finance] Estimate complex GJR-GARCH with exogeneous
 regressors in mean equation and dummy in variance equation
Message-ID: <1319560560121-3937352.post@n4.nabble.com>

Hello,

i had to estimate the following GJR-GARCH-Model:


http://r.789695.n4.nabble.com/file/n3937352/Unbenannt.jpg 

r = Index-Returns (log)
r (US / HS / B) = Index-Returns form foreign Stock Markets 
I = Dummy-Vaiabel -> Value of one in case of negative return shocks. Value
of zero when return innovation is zero or positive.

I want to estimte the Model with robust standard errors (Bollerslev and
Wooldridge, 1992)


Is there a package in R that can do this? The rugarch-package can include
exogeneous regressors to mean equation and variance equation. Is it possible
to model the mulitplicative dummy variable y(D) in the variance equation? 
Does somebody know a good source code that i can modify or is there an easy
way to modify the rugarch-package source code to estimate the model?
Thanks.

Greetings

--
View this message in context: http://r.789695.n4.nabble.com/Estimate-complex-GJR-GARCH-with-exogeneous-regressors-in-mean-equation-and-dummy-in-variance-equation-tp3937352p3937352.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From Russell.Bowdrey at justretirement.com  Tue Oct 25 18:55:05 2011
From: Russell.Bowdrey at justretirement.com (Russell Bowdrey)
Date: Tue, 25 Oct 2011 16:55:05 +0000
Subject: [R-SIG-Finance] Estimating co-integration factors of two time series
Message-ID: <60FF609C86F6794BBBF02B264D8BDDF78BE46E@SERVER010.live01.lan.local>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111025/b80fb340/attachment.pl>

From Peter.Brecknock at bp.com  Tue Oct 25 19:10:30 2011
From: Peter.Brecknock at bp.com (Pete Brecknock)
Date: Tue, 25 Oct 2011 10:10:30 -0700 (PDT)
Subject: [R-SIG-Finance] Estimating co-integration factors of two time
	series
In-Reply-To: <60FF609C86F6794BBBF02B264D8BDDF78BE46E@SERVER010.live01.lan.local>
References: <60FF609C86F6794BBBF02B264D8BDDF78BE46E@SERVER010.live01.lan.local>
Message-ID: <1319562630184-3937455.post@n4.nabble.com>


Russell Bowdrey wrote:
> 
> So, there appear to be many, many routines for testing for unit roots or
> hypothesis tests on co integration (ca.jo, ca.po etc)  - but I've yet to
> find a means of estimating the degree of co-integration between two time
> series.
> 
> IT could be that I'm going about this the wrong way (or looking for the
> wrong technique), so here is my problem (which I thought was common and
> had been solved...):
> 
> I want to measure the degree of co-movement between two assets or rates. 
> For example the yield on a bond and the corresponding risk-free rate.
> 
> Of course I could just look at Pearson/Spearman/Kendal correlation between
> the time series, but I believe that ignores time and so path dependence -
> which I think is important.  Hence thinking about cointegration.
> 
> Any thoughts?
> 
> 
> This email and any attachments are confidential and inte...{{dropped:30}}
> 
> _______________________________________________
> R-SIG-Finance@ mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
> 

Perhaps Paul Teetor's example at
http://quanttrader.info/public/testForCoint.html maybe useful

HTH

Pete

--
View this message in context: http://r.789695.n4.nabble.com/Estimating-co-integration-factors-of-two-time-series-tp3937426p3937455.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From j_cuisinier at hotmail.com  Tue Oct 25 19:24:46 2011
From: j_cuisinier at hotmail.com (julien cuisinier)
Date: Tue, 25 Oct 2011 19:24:46 +0200
Subject: [R-SIG-Finance] Estimating co-integration factors of two time
 series
In-Reply-To: <1319562630184-3937455.post@n4.nabble.com>
References: <60FF609C86F6794BBBF02B264D8BDDF78BE46E@SERVER010.live01.lan.local>,
	<1319562630184-3937455.post@n4.nabble.com>
Message-ID: <COL102-W650523C833EB76E81B8F078FEC0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111025/1b30c0ac/attachment.pl>

From ezivot at u.washington.edu  Tue Oct 25 19:33:28 2011
From: ezivot at u.washington.edu (Eric Zivot)
Date: Tue, 25 Oct 2011 10:33:28 -0700
Subject: [R-SIG-Finance] Estimating co-integration factors of two
	time	series
In-Reply-To: <1319562630184-3937455.post@n4.nabble.com>
References: <60FF609C86F6794BBBF02B264D8BDDF78BE46E@SERVER010.live01.lan.local>
	<1319562630184-3937455.post@n4.nabble.com>
Message-ID: <00a201cc933c$36059c80$a210d580$@washington.edu>

The "degree of cointegration" is not a well defined statistical concept. If
two series are cointegrated then there exists an error correction
representation for the bivariate system. You can estimate and analyze this
bivariate system and the properties of the system can tell you things like
(1) the speed of adjustment for each series in response to a deviation from
the long-run trend (2) the speed of mean reversion of the cointegrating
residual (3) whether a particular variable responds or not to the deviation
from the long run trend (ie which variables appears to be driving the
trend). You can also look at how well the error correction model fits (in
terms of R2) to get an idea of how useful it is for in-sample prediction.



-----Original Message-----
From: r-sig-finance-bounces at r-project.org
[mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Pete Brecknock
Sent: Tuesday, October 25, 2011 10:11 AM
To: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Estimating co-integration factors of two time
series


Russell Bowdrey wrote:
> 
> So, there appear to be many, many routines for testing for unit roots or
> hypothesis tests on co integration (ca.jo, ca.po etc)  - but I've yet to
> find a means of estimating the degree of co-integration between two time
> series.
> 
> IT could be that I'm going about this the wrong way (or looking for the
> wrong technique), so here is my problem (which I thought was common and
> had been solved...):
> 
> I want to measure the degree of co-movement between two assets or rates. 
> For example the yield on a bond and the corresponding risk-free rate.
> 
> Of course I could just look at Pearson/Spearman/Kendal correlation between
> the time series, but I believe that ignores time and so path dependence -
> which I think is important.  Hence thinking about cointegration.
> 
> Any thoughts?
> 
> 
> This email and any attachments are confidential and inte...{{dropped:30}}
> 
> _______________________________________________
> R-SIG-Finance@ mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
> 

Perhaps Paul Teetor's example at
http://quanttrader.info/public/testForCoint.html maybe useful

HTH

Pete

--
View this message in context:
http://r.789695.n4.nabble.com/Estimating-co-integration-factors-of-two-time-
series-tp3937426p3937455.html
Sent from the Rmetrics mailing list archive at Nabble.com.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.


From johannes.lips at googlemail.com  Wed Oct 26 12:28:12 2011
From: johannes.lips at googlemail.com (Johannes Lips)
Date: Wed, 26 Oct 2011 12:28:12 +0200
Subject: [R-SIG-Finance] Estimate complex GJR-GARCH with exogeneous
 regressors in mean equation and dummy in variance equation
In-Reply-To: <1319560560121-3937352.post@n4.nabble.com>
References: <1319560560121-3937352.post@n4.nabble.com>
Message-ID: <4EA7E0BC.4070906@googlemail.com>

Didn't look much into detail but for most of those models the following 
package is just great:
http://rgarch.r-forge.r-project.org/

Greetings,

Johannes
On 10/25/2011 06:36 PM, Lin23 wrote:
> Hello,
>
> i had to estimate the following GJR-GARCH-Model:
>
>
> http://r.789695.n4.nabble.com/file/n3937352/Unbenannt.jpg
>
> r = Index-Returns (log)
> r (US / HS / B) = Index-Returns form foreign Stock Markets
> I = Dummy-Vaiabel ->  Value of one in case of negative return shocks. Value
> of zero when return innovation is zero or positive.
>
> I want to estimte the Model with robust standard errors (Bollerslev and
> Wooldridge, 1992)
>
>
> Is there a package in R that can do this? The rugarch-package can include
> exogeneous regressors to mean equation and variance equation. Is it possible
> to model the mulitplicative dummy variable y(D) in the variance equation?
> Does somebody know a good source code that i can modify or is there an easy
> way to modify the rugarch-package source code to estimate the model?
> Thanks.
>
> Greetings
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Estimate-complex-GJR-GARCH-with-exogeneous-regressors-in-mean-equation-and-dummy-in-variance-equation-tp3937352p3937352.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From fin_engr at hotmail.com  Wed Oct 26 19:43:55 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Wed, 26 Oct 2011 13:43:55 -0400
Subject: [R-SIG-Finance] 3d implied volatility surface
Message-ID: <COL118-W57D25F31712718204B43B7EFED0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111026/2ff02804/attachment.pl>

From michael.weylandt at gmail.com  Wed Oct 26 21:26:53 2011
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Wed, 26 Oct 2011 15:26:53 -0400
Subject: [R-SIG-Finance] 3d implied volatility surface
In-Reply-To: <COL118-W57D25F31712718204B43B7EFED0@phx.gbl>
References: <COL118-W57D25F31712718204B43B7EFED0@phx.gbl>
Message-ID: <CAAmySGPfcCWa8jykwpY5HT8vfXPzbqZsm191Z=oVkjver+fowQ@mail.gmail.com>

This isn't specifically financial so any follow up is perhaps better
done on the general R-help list, but try demo(persp) to see some
example code that's built in. If I remember correctly, demo(lattice)
also has at least one 3d example.

Michael

On Wed, Oct 26, 2011 at 1:43 PM, financial engineer
<fin_engr at hotmail.com> wrote:
>
> hi,
>
> I'd like to be able to plot a 3-d vol surface using option strike vs. expiration(as yrs to maturity) vs. implied volatility.
>
> I have the historical trade-date, expiration-date, strike, option price, option symbol, option type, implied vol. etc. data for each option,
> so I ran the following query:
> OpQuotes <- dbGetQuery(con,"SELECT strike,iv,ytm FROM greeks WHERE trade_date='2011-10-07' AND symbol like 'MCO%'and type='C';")
>
> I am trying to figure out if I need to convert the above into a list or have individual matrices, or set it up as a seq. Would appreciate some help/direction/suggestion/example code on that.
>
> I'd like to be able to use "persp" or "lattice" to plot this.
>
> thanks!
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From fin_engr at hotmail.com  Wed Oct 26 21:38:37 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Wed, 26 Oct 2011 15:38:37 -0400
Subject: [R-SIG-Finance] 3d implied volatility surface
In-Reply-To: <CAAmySGPfcCWa8jykwpY5HT8vfXPzbqZsm191Z=oVkjver+fowQ@mail.gmail.com>
References: <COL118-W57D25F31712718204B43B7EFED0@phx.gbl>,
	<CAAmySGPfcCWa8jykwpY5HT8vfXPzbqZsm191Z=oVkjver+fowQ@mail.gmail.com>
Message-ID: <COL118-W4586A87B6650B877B04C5EEFED0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111026/90304b84/attachment.pl>

From ustaudinger at activequant.org  Wed Oct 26 21:57:13 2011
From: ustaudinger at activequant.org (Ulrich Staudinger)
Date: Wed, 26 Oct 2011 21:57:13 +0200
Subject: [R-SIG-Finance] 3d implied volatility surface
In-Reply-To: <COL118-W4586A87B6650B877B04C5EEFED0@phx.gbl>
References: <COL118-W57D25F31712718204B43B7EFED0@phx.gbl>
	<CAAmySGPfcCWa8jykwpY5HT8vfXPzbqZsm191Z=oVkjver+fowQ@mail.gmail.com>
	<COL118-W4586A87B6650B877B04C5EEFED0@phx.gbl>
Message-ID: <CAMrz3D1bryT=Yp6XTx0wm+7==XQy03+Q+pMWf5fx_mJQ0i4MXw@mail.gmail.com>

You have seen http://addictedtor.free.fr/graphiques/thumbs.php
already, haven't you?
I agree with my foreposter, this isn't finance related as it is an
ordinary 3d-plot, but nonetheless nice that you asked! :-)

Cheers.
Ulrich

On Wed, Oct 26, 2011 at 9:38 PM, financial engineer
<fin_engr at hotmail.com> wrote:
>
> thanks for your response, Michael
>
> I didn't find any demo(lattice) but I did look at the demo(persp). however, being new to R, I was trying to get a better understanding of how to organize the data.
>
> I can post to the general list, but I figured since the folks on the financial side would understand the implied vol reference, I could get some good guidance faster ?and perhaps any additional suggestions, if similar stuff has been done by the others :-)
>
> Best,
> BA
>
>> From: michael.weylandt at gmail.com
>> Date: Wed, 26 Oct 2011 15:26:53 -0400
>> Subject: Re: [R-SIG-Finance] 3d implied volatility surface
>> To: fin_engr at hotmail.com
>> CC: r-sig-finance at r-project.org
>>
>> This isn't specifically financial so any follow up is perhaps better
>> done on the general R-help list, but try demo(persp) to see some
>> example code that's built in. If I remember correctly, demo(lattice)
>> also has at least one 3d example.
>>
>> Michael
>>
>> On Wed, Oct 26, 2011 at 1:43 PM, financial engineer
>> <fin_engr at hotmail.com> wrote:
>> >
>> > hi,
>> >
>> > I'd like to be able to plot a 3-d vol surface using option strike vs. expiration(as yrs to maturity) vs. implied volatility.
>> >
>> > I have the historical trade-date, expiration-date, strike, option price, option symbol, option type, implied vol. etc. data for each option,
>> > so I ran the following query:
>> > OpQuotes <- dbGetQuery(con,"SELECT strike,iv,ytm FROM greeks WHERE trade_date='2011-10-07' AND symbol like 'MCO%'and type='C';")
>> >
>> > I am trying to figure out if I need to convert the above into a list or have individual matrices, or set it up as a seq. Would appreciate some help/direction/suggestion/example code on that.
>> >
>> > I'd like to be able to use "persp" or "lattice" to plot this.
>> >
>> > thanks!
>> >
>> > ? ? ? ?[[alternative HTML version deleted]]
>> >
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions should go.
>> >
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From fin_engr at hotmail.com  Wed Oct 26 22:06:00 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Wed, 26 Oct 2011 16:06:00 -0400
Subject: [R-SIG-Finance] 3d implied volatility surface
In-Reply-To: <CAMrz3D1bryT=Yp6XTx0wm+7==XQy03+Q+pMWf5fx_mJQ0i4MXw@mail.gmail.com>
References: <COL118-W57D25F31712718204B43B7EFED0@phx.gbl>
	<CAAmySGPfcCWa8jykwpY5HT8vfXPzbqZsm191Z=oVkjver+fowQ@mail.gmail.com>,
	<COL118-W4586A87B6650B877B04C5EEFED0@phx.gbl>,
	<CAMrz3D1bryT=Yp6XTx0wm+7==XQy03+Q+pMWf5fx_mJQ0i4MXw@mail.gmail.com>
Message-ID: <COL118-W637B25020B8C02D3B712CEFED0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111026/9976f9b9/attachment.pl>

From jeffrey.ryan at lemnica.com  Wed Oct 26 22:09:36 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Wed, 26 Oct 2011 15:09:36 -0500
Subject: [R-SIG-Finance] 3d implied volatility surface
In-Reply-To: <COL118-W4586A87B6650B877B04C5EEFED0@phx.gbl>
References: <COL118-W57D25F31712718204B43B7EFED0@phx.gbl>
	<CAAmySGPfcCWa8jykwpY5HT8vfXPzbqZsm191Z=oVkjver+fowQ@mail.gmail.com>
	<COL118-W4586A87B6650B877B04C5EEFED0@phx.gbl>
Message-ID: <CABDUZc9MjoQJAtwpCmAAr82fNYsBDwxuZVB2MoX4uX355AHw0g@mail.gmail.com>

http://www.quantmod.com/examples/chartSeries3d/

Data source isn't right anymore, but you can follow along.

Jeff

On Wed, Oct 26, 2011 at 2:38 PM, financial engineer
<fin_engr at hotmail.com> wrote:
>
> thanks for your response, Michael
>
> I didn't find any demo(lattice) but I did look at the demo(persp). however, being new to R, I was trying to get a better understanding of how to organize the data.
>
> I can post to the general list, but I figured since the folks on the financial side would understand the implied vol reference, I could get some good guidance faster ?and perhaps any additional suggestions, if similar stuff has been done by the others :-)
>
> Best,
> BA
>
>> From: michael.weylandt at gmail.com
>> Date: Wed, 26 Oct 2011 15:26:53 -0400
>> Subject: Re: [R-SIG-Finance] 3d implied volatility surface
>> To: fin_engr at hotmail.com
>> CC: r-sig-finance at r-project.org
>>
>> This isn't specifically financial so any follow up is perhaps better
>> done on the general R-help list, but try demo(persp) to see some
>> example code that's built in. If I remember correctly, demo(lattice)
>> also has at least one 3d example.
>>
>> Michael
>>
>> On Wed, Oct 26, 2011 at 1:43 PM, financial engineer
>> <fin_engr at hotmail.com> wrote:
>> >
>> > hi,
>> >
>> > I'd like to be able to plot a 3-d vol surface using option strike vs. expiration(as yrs to maturity) vs. implied volatility.
>> >
>> > I have the historical trade-date, expiration-date, strike, option price, option symbol, option type, implied vol. etc. data for each option,
>> > so I ran the following query:
>> > OpQuotes <- dbGetQuery(con,"SELECT strike,iv,ytm FROM greeks WHERE trade_date='2011-10-07' AND symbol like 'MCO%'and type='C';")
>> >
>> > I am trying to figure out if I need to convert the above into a list or have individual matrices, or set it up as a seq. Would appreciate some help/direction/suggestion/example code on that.
>> >
>> > I'd like to be able to use "persp" or "lattice" to plot this.
>> >
>> > thanks!
>> >
>> > ? ? ? ?[[alternative HTML version deleted]]
>> >
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions should go.
>> >
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From michael.weylandt at gmail.com  Wed Oct 26 22:21:40 2011
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Wed, 26 Oct 2011 16:21:40 -0400
Subject: [R-SIG-Finance] 3d implied volatility surface
In-Reply-To: <COL118-W4586A87B6650B877B04C5EEFED0@phx.gbl>
References: <COL118-W57D25F31712718204B43B7EFED0@phx.gbl>
	<CAAmySGPfcCWa8jykwpY5HT8vfXPzbqZsm191Z=oVkjver+fowQ@mail.gmail.com>
	<COL118-W4586A87B6650B877B04C5EEFED0@phx.gbl>
Message-ID: <CAAmySGN-bkmZzHFcXd1LEJCyWvSassctkbgJ3ztzQExehLVXeA@mail.gmail.com>

Perhaps you should load the lattice package first with
library(lattice)....I just confirmed it has 2 3d examples in it.

As to specific formatting advice, I'd usually prefer delta/moneyness
than straight strike if you were preparing the graph for me. Otherwise
there's one very large source of variance unaccounted for in your
graph should you start to compare over different points in time.

Other than that, I don't think there's too much to know beyond the
usual caveats for financial data: smoothing only if appropriate, make
sure prices are clean and correspond to something actionable (i.e.,
make sure you aren't using prints that are just old and discovering
"arbitrages").

Michael

On Wed, Oct 26, 2011 at 3:38 PM, financial engineer
<fin_engr at hotmail.com> wrote:
> thanks for your response, Michael
>
> I didn't find any demo(lattice) but I did look at the demo(persp). however,
> being new to R, I was trying to get a better understanding of how to
> organize the data.
>
> I can post to the general list, but I figured since the folks on the
> financial side would understand the implied vol reference, I could get some
> good guidance faster? and perhaps any additional suggestions, if similar
> stuff has been done by the others :-)
>
> Best,
> BA
>
>> From: michael.weylandt at gmail.com
>> Date: Wed, 26 Oct 2011 15:26:53 -0400
>> Subject: Re: [R-SIG-Finance] 3d implied volatility surface
>> To: fin_engr at hotmail.com
>> CC: r-sig-finance at r-project.org
>>
>> This isn't specifically financial so any follow up is perhaps better
>> done on the general R-help list, but try demo(persp) to see some
>> example code that's built in. If I remember correctly, demo(lattice)
>> also has at least one 3d example.
>>
>> Michael
>>
>> On Wed, Oct 26, 2011 at 1:43 PM, financial engineer
>> <fin_engr at hotmail.com> wrote:
>> >
>> > hi,
>> >
>> > I'd like to be able to plot a 3-d vol surface using option strike vs.
>> > expiration(as yrs to maturity) vs. implied volatility.
>> >
>> > I have the historical trade-date, expiration-date, strike, option price,
>> > option symbol, option type, implied vol. etc. data for each option,
>> > so I ran the following query:
>> > OpQuotes <- dbGetQuery(con,"SELECT strike,iv,ytm FROM greeks WHERE
>> > trade_date='2011-10-07' AND symbol like 'MCO%'and type='C';")
>> >
>> > I am trying to figure out if I need to convert the above into a list or
>> > have individual matrices, or set it up as a seq. Would appreciate some
>> > help/direction/suggestion/example code on that.
>> >
>> > I'd like to be able to use "persp" or "lattice" to plot this.
>> >
>> > thanks!
>> >
>> > ? ? ? ?[[alternative HTML version deleted]]
>> >
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions
>> > should go.
>> >
>


From fin_engr at hotmail.com  Wed Oct 26 22:34:36 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Wed, 26 Oct 2011 16:34:36 -0400
Subject: [R-SIG-Finance] 3d implied volatility surface
In-Reply-To: <CABDUZc9MjoQJAtwpCmAAr82fNYsBDwxuZVB2MoX4uX355AHw0g@mail.gmail.com>
References: <COL118-W57D25F31712718204B43B7EFED0@phx.gbl>,
	<CAAmySGPfcCWa8jykwpY5HT8vfXPzbqZsm191Z=oVkjver+fowQ@mail.gmail.com>,
	<COL118-W4586A87B6650B877B04C5EEFED0@phx.gbl>,
	<CABDUZc9MjoQJAtwpCmAAr82fNYsBDwxuZVB2MoX4uX355AHw0g@mail.gmail.com>
Message-ID: <COL118-W18E6ECF155224DFC193A63EFED0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111026/56877370/attachment.pl>

From fin_engr at hotmail.com  Wed Oct 26 22:35:23 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Wed, 26 Oct 2011 16:35:23 -0400
Subject: [R-SIG-Finance] 3d implied volatility surface
In-Reply-To: <CAAmySGN-bkmZzHFcXd1LEJCyWvSassctkbgJ3ztzQExehLVXeA@mail.gmail.com>
References: <COL118-W57D25F31712718204B43B7EFED0@phx.gbl>
	<CAAmySGPfcCWa8jykwpY5HT8vfXPzbqZsm191Z=oVkjver+fowQ@mail.gmail.com>,
	<COL118-W4586A87B6650B877B04C5EEFED0@phx.gbl>,
	<CAAmySGN-bkmZzHFcXd1LEJCyWvSassctkbgJ3ztzQExehLVXeA@mail.gmail.com>
Message-ID: <COL118-W277E9C2199C6C3CB4676BEEFED0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111026/f25b57a4/attachment.pl>

From michael.weylandt at gmail.com  Wed Oct 26 23:08:12 2011
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Wed, 26 Oct 2011 17:08:12 -0400
Subject: [R-SIG-Finance] 3d implied volatility surface
In-Reply-To: <COL118-W277E9C2199C6C3CB4676BEEFED0@phx.gbl>
References: <COL118-W57D25F31712718204B43B7EFED0@phx.gbl>
	<CAAmySGPfcCWa8jykwpY5HT8vfXPzbqZsm191Z=oVkjver+fowQ@mail.gmail.com>
	<COL118-W4586A87B6650B877B04C5EEFED0@phx.gbl>
	<CAAmySGN-bkmZzHFcXd1LEJCyWvSassctkbgJ3ztzQExehLVXeA@mail.gmail.com>
	<COL118-W277E9C2199C6C3CB4676BEEFED0@phx.gbl>
Message-ID: <CAAmySGM7EWRiRGy4E_TviXgNWCQM--Qxf7=9f43T1nRqgpYrkA@mail.gmail.com>

Another thought, you might want to look at the rgl package: it allows
for interactive 3d graphics (though with a little bit of work) which
can add a potentially useful level of exploratory power. I haven't
used it much but would also be interested in learning more: if you'd
be interested, I'd love to do a little off-list back and forth to work
something up -- perhaps using freely available data from
quantmod::getOptionChain(, NULL) -- which we could open-source.

M

On Wed, Oct 26, 2011 at 4:35 PM, financial engineer
<fin_engr at hotmail.com> wrote:
> thanks Michael,
>
> ...appreciate the suggestions.
>
> cheers,
> BA
>
>> From: michael.weylandt at gmail.com
>> Date: Wed, 26 Oct 2011 16:21:40 -0400
>> Subject: Re: [R-SIG-Finance] 3d implied volatility surface
>> To: fin_engr at hotmail.com
>> CC: r-sig-finance at r-project.org
>>
>> Perhaps you should load the lattice package first with
>> library(lattice)....I just confirmed it has 2 3d examples in it.
>>
>> As to specific formatting advice, I'd usually prefer delta/moneyness
>> than straight strike if you were preparing the graph for me. Otherwise
>> there's one very large source of variance unaccounted for in your
>> graph should you start to compare over different points in time.
>>
>> Other than that, I don't think there's too much to know beyond the
>> usual caveats for financial data: smoothing only if appropriate, make
>> sure prices are clean and correspond to something actionable (i.e.,
>> make sure you aren't using prints that are just old and discovering
>> "arbitrages").
>>
>> Michael
>>
>> On Wed, Oct 26, 2011 at 3:38 PM, financial engineer
>> <fin_engr at hotmail.com> wrote:
>> > thanks for your response, Michael
>> >
>> > I didn't find any demo(lattice) but I did look at the demo(persp).
>> > however,
>> > being new to R, I was trying to get a better understanding of how to
>> > organize the data.
>> >
>> > I can post to the general list, but I figured since the folks on the
>> > financial side would understand the implied vol reference, I could get
>> > some
>> > good guidance faster? and perhaps any additional suggestions, if similar
>> > stuff has been done by the others :-)
>> >
>> > Best,
>> > BA
>> >
>> >> From: michael.weylandt at gmail.com
>> >> Date: Wed, 26 Oct 2011 15:26:53 -0400
>> >> Subject: Re: [R-SIG-Finance] 3d implied volatility surface
>> >> To: fin_engr at hotmail.com
>> >> CC: r-sig-finance at r-project.org
>> >>
>> >> This isn't specifically financial so any follow up is perhaps better
>> >> done on the general R-help list, but try demo(persp) to see some
>> >> example code that's built in. If I remember correctly, demo(lattice)
>> >> also has at least one 3d example.
>> >>
>> >> Michael
>> >>
>> >> On Wed, Oct 26, 2011 at 1:43 PM, financial engineer
>> >> <fin_engr at hotmail.com> wrote:
>> >> >
>> >> > hi,
>> >> >
>> >> > I'd like to be able to plot a 3-d vol surface using option strike vs.
>> >> > expiration(as yrs to maturity) vs. implied volatility.
>> >> >
>> >> > I have the historical trade-date, expiration-date, strike, option
>> >> > price,
>> >> > option symbol, option type, implied vol. etc. data for each option,
>> >> > so I ran the following query:
>> >> > OpQuotes <- dbGetQuery(con,"SELECT strike,iv,ytm FROM greeks WHERE
>> >> > trade_date='2011-10-07' AND symbol like 'MCO%'and type='C';")
>> >> >
>> >> > I am trying to figure out if I need to convert the above into a list
>> >> > or
>> >> > have individual matrices, or set it up as a seq. Would appreciate
>> >> > some
>> >> > help/direction/suggestion/example code on that.
>> >> >
>> >> > I'd like to be able to use "persp" or "lattice" to plot this.
>> >> >
>> >> > thanks!
>> >> >
>> >> > ? ? ? ?[[alternative HTML version deleted]]
>> >> >
>> >> > _______________________________________________
>> >> > R-SIG-Finance at r-project.org mailing list
>> >> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> >> > -- Subscriber-posting only. If you want to post, subscribe first.
>> >> > -- Also note that this is not the r-help list where general R
>> >> > questions
>> >> > should go.
>> >> >
>> >
>


From Darko.Roupell at cba.com.au  Thu Oct 27 04:55:29 2011
From: Darko.Roupell at cba.com.au (Roupell, Darko)
Date: Thu, 27 Oct 2011 13:55:29 +1100
Subject: [R-SIG-Finance] Measuring Price Impact of Trade
In-Reply-To: <CAPPM_gSLyDVgZ=2kBEOSh3YCVi8VLkOf3md5kwz49HK84nDTVg@mail.gmail.com>
References: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>
	<CAPPM_gSLyDVgZ=2kBEOSh3YCVi8VLkOf3md5kwz49HK84nDTVg@mail.gmail.com>
Message-ID: <E8CC19FC66B5FB46B5511B6E8AE814185B34E5A7CF@VAUNSW137.au.cbainet.com>

Hi All,

Measuring price impact of trade is very topical in institutional space, so I looked into that over the past few weeks to see if there was anything done in R. 

Apart of the attached code done by so-called "MaxDama" that tries to replicate the attached paper not much was there.

In particular, the issue related how to extrapolate the power-law coefficient across different participation rates of daily average volume.
 
RTAQ has a function called realized spread but the very assumption (that difference between transaction Price and Midpoint 5 mins later reflects price impact) is very dubious as it assumes no impact of trades in between. At least the testing of it gives inconclusive result.

I wonder if anyone in R SIG Finance finds this topical and would be happy to share thoughts so we can come up with reasonable function to implement it. 

Thanks.

__________________________________________________
Darko Roupell 

************** IMPORTANT MESSAGE *****************************       
This e-mail message is intended only for the addressee(s) and contains information which may be
confidential. 
If you are not the intended recipient please advise the sender by return email, do not use or
disclose the contents, and delete the message and any attachments from your system. Unless
specifically indicated, this email does not constitute formal advice or commitment by the sender
or the Commonwealth Bank of Australia (ABN 48 123 123 124) or its subsidiaries. 
We can be contacted through our web site: commbank.com.au. 
If you no longer wish to receive commercial electronic messages from us, please reply to this
e-mail by typing Unsubscribe in the subject line. 
**************************************************************


-------------- next part --------------
A non-text attachment was scrubbed...
Name: Single Curve Collapse of the Price Impact.pdf
Type: application/pdf
Size: 174137 bytes
Desc: Single Curve Collapse of the Price Impact.pdf
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111027/4336563b/attachment.pdf>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: impact.r
Type: application/octet-stream
Size: 1106 bytes
Desc: impact.r
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111027/4336563b/attachment.obj>

From markleeds2 at gmail.com  Thu Oct 27 06:04:12 2011
From: markleeds2 at gmail.com (Mark Leeds)
Date: Thu, 27 Oct 2011 00:04:12 -0400
Subject: [R-SIG-Finance] Measuring Price Impact of Trade
In-Reply-To: <E8CC19FC66B5FB46B5511B6E8AE814185B34E5A7CF@VAUNSW137.au.cbainet.com>
References: <COL118-W20A2EECBC54D4787E219B8EFE90@phx.gbl>
	<CAPPM_gSLyDVgZ=2kBEOSh3YCVi8VLkOf3md5kwz49HK84nDTVg@mail.gmail.com>
	<E8CC19FC66B5FB46B5511B6E8AE814185B34E5A7CF@VAUNSW137.au.cbainet.com>
Message-ID: <CAHz+bWZQtK-mLR3d4BCURak5Z8zjhTNLw_rSatxdYL3+NyKsCA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111027/0154dbb0/attachment.pl>

From harryp at gmail.com  Thu Oct 27 15:54:16 2011
From: harryp at gmail.com (Harry Prabandham)
Date: Thu, 27 Oct 2011 06:54:16 -0700
Subject: [R-SIG-Finance] RBloomberg hangs on blpConnect()
Message-ID: <CANmS35GEmz6gwSE6+wj22LjcopwAKGVibL=HxXdP5dyw-L0p-g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111027/f27de4d3/attachment.pl>

From Nicolas.Gomez at evalueserve.com  Thu Oct 27 15:55:19 2011
From: Nicolas.Gomez at evalueserve.com (Nicolas Gomez)
Date: Thu, 27 Oct 2011 19:25:19 +0530
Subject: [R-SIG-Finance] Ca.jo function Help
Message-ID: <FAEEC78408936841B3BA1C680108DDD2D948946D@evs05scr01.Evalueserve.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111027/48760d1b/attachment.pl>

From Nicolas.Gomez at evalueserve.com  Thu Oct 27 16:01:09 2011
From: Nicolas.Gomez at evalueserve.com (Nicolas Gomez)
Date: Thu, 27 Oct 2011 19:31:09 +0530
Subject: [R-SIG-Finance] Ca.jo function Help (v2)
Message-ID: <FAEEC78408936841B3BA1C680108DDD2D948946E@evs05scr01.Evalueserve.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111027/4f4ef3e7/attachment.pl>

From john.laing at gmail.com  Thu Oct 27 16:36:05 2011
From: john.laing at gmail.com (John Laing)
Date: Thu, 27 Oct 2011 10:36:05 -0400
Subject: [R-SIG-Finance] RBloomberg hangs on blpConnect()
In-Reply-To: <CANmS35GEmz6gwSE6+wj22LjcopwAKGVibL=HxXdP5dyw-L0p-g@mail.gmail.com>
References: <CANmS35GEmz6gwSE6+wj22LjcopwAKGVibL=HxXdP5dyw-L0p-g@mail.gmail.com>
Message-ID: <CAA3Wa=vXFtTZYvxnagTgnJ5+UEXsM-u_v1kXeQL5S8D3Fnqu-A@mail.gmail.com>

Hi Harry,

RBloomberg works OK for me on R 2.13.2. Do you have the most recent
Bloomberg API files installed? Was the package working for you on an
earlier version of R and only started hanging since you upgraded?

Thanks,
John

On Thu, Oct 27, 2011 at 9:54 AM, Harry Prabandham <harryp at gmail.com> wrote:
> I noticed that RBloomberg hangs on latest R 2.13.2. Is this a known issue?
> ?Can you suggest me a version of RBloomberg that does work with 2.13.2.
>
> Thanks,
>
> Harry
>
> sessionInfo()
>
> R version 2.13.2 (2011-09-30)
> Platform: i386-pc-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=English_United States.1252
> [2] LC_CTYPE=English_United States.1252
> [3] LC_MONETARY=English_United States.1252
> [4] LC_NUMERIC=C
> [5] LC_TIME=English_United States.1252
>
> attached base packages:
> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods
> [7] base
>
> other attached packages:
> [1] RBloomberg_0.4-150 rJava_0.9-1
>
> loaded via a namespace (and not attached):
> [1] tools_2.13.2
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From harryp at gmail.com  Thu Oct 27 17:12:07 2011
From: harryp at gmail.com (Harry Prabandham)
Date: Thu, 27 Oct 2011 08:12:07 -0700
Subject: [R-SIG-Finance] RBloomberg hangs on blpConnect()
In-Reply-To: <CAA3Wa=vXFtTZYvxnagTgnJ5+UEXsM-u_v1kXeQL5S8D3Fnqu-A@mail.gmail.com>
References: <CANmS35GEmz6gwSE6+wj22LjcopwAKGVibL=HxXdP5dyw-L0p-g@mail.gmail.com>
	<CAA3Wa=vXFtTZYvxnagTgnJ5+UEXsM-u_v1kXeQL5S8D3Fnqu-A@mail.gmail.com>
Message-ID: <CANmS35GKwyu-TXM2f_PSVytFn9qbnJ7K5jfK04=W2FgxOjLBwA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111027/93f9a8dd/attachment.pl>

From john.laing at gmail.com  Thu Oct 27 18:28:16 2011
From: john.laing at gmail.com (John Laing)
Date: Thu, 27 Oct 2011 12:28:16 -0400
Subject: [R-SIG-Finance] RBloomberg hangs on blpConnect()
In-Reply-To: <CANmS35GKwyu-TXM2f_PSVytFn9qbnJ7K5jfK04=W2FgxOjLBwA@mail.gmail.com>
References: <CANmS35GEmz6gwSE6+wj22LjcopwAKGVibL=HxXdP5dyw-L0p-g@mail.gmail.com>
	<CAA3Wa=vXFtTZYvxnagTgnJ5+UEXsM-u_v1kXeQL5S8D3Fnqu-A@mail.gmail.com>
	<CANmS35GKwyu-TXM2f_PSVytFn9qbnJ7K5jfK04=W2FgxOjLBwA@mail.gmail.com>
Message-ID: <CAA3Wa=ut0XtDtsx39E=rE-q6JzVAUc5HCuz67USkGDrUn0HyEQ@mail.gmail.com>

You may have an old version of the Bloomberg API. You can upgrade in
Bloomberg via WAPI<GO>, hopefully that will fix the problem.

If you want to check before installing new software try calling
blpConnect with no arguments. It will attempt to find the jar file and
hopefully return an error rather than hang.

John

On Thu, Oct 27, 2011 at 11:12 AM, Harry Prabandham <harryp at gmail.com> wrote:
> Thanks for looking into it John. ? I installed 2.13.2 and I still have 2.9.2
> on my machine. ?RBloomberg works on 2.9.2, but doesn't work on 2.13.2.
> Here is the info on the version that works:
>> blpConnect(blpapi.jar.file="C:\\blp\\API\\blpapi3.jar")
> R version 2.9.2 (2009-08-24)
> rJava Version 0.8-2
> RBloomberg Version 0.4-140
> Java environment initialized successfully.
> Bloomberg API Version 3.2.8.0
> [1] "Java-Object{org.findata.blpwrapper.Connection at 1e859c0}"
>> sessionInfo()
> R version 2.9.2 (2009-08-24)
> i386-pc-mingw32
> locale:
> LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
> States.1252;LC_MONETARY=English_United
> States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252
> attached base packages:
> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
> other attached packages:
> [1] RBloomberg_0.4-140 rJava_0.8-2
> loaded via a namespace (and not attached):
> [1] tools_2.9.2
>
> -Harry
>
> On Thu, Oct 27, 2011 at 7:36 AM, John Laing <john.laing at gmail.com> wrote:
>>
>> Hi Harry,
>>
>> RBloomberg works OK for me on R 2.13.2. Do you have the most recent
>> Bloomberg API files installed? Was the package working for you on an
>> earlier version of R and only started hanging since you upgraded?
>>
>> Thanks,
>> John
>>
>> On Thu, Oct 27, 2011 at 9:54 AM, Harry Prabandham <harryp at gmail.com>
>> wrote:
>> > I noticed that RBloomberg hangs on latest R 2.13.2. Is this a known
>> > issue?
>> > ?Can you suggest me a version of RBloomberg that does work with 2.13.2.
>> >
>> > Thanks,
>> >
>> > Harry
>> >
>> > sessionInfo()
>> >
>> > R version 2.13.2 (2011-09-30)
>> > Platform: i386-pc-mingw32/i386 (32-bit)
>> >
>> > locale:
>> > [1] LC_COLLATE=English_United States.1252
>> > [2] LC_CTYPE=English_United States.1252
>> > [3] LC_MONETARY=English_United States.1252
>> > [4] LC_NUMERIC=C
>> > [5] LC_TIME=English_United States.1252
>> >
>> > attached base packages:
>> > [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods
>> > [7] base
>> >
>> > other attached packages:
>> > [1] RBloomberg_0.4-150 rJava_0.9-1
>> >
>> > loaded via a namespace (and not attached):
>> > [1] tools_2.13.2
>> >
>> > ? ? ? ?[[alternative HTML version deleted]]
>> >
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions
>> > should go.
>> >
>
>


From johnzli at comcast.net  Thu Oct 27 20:29:28 2011
From: johnzli at comcast.net (johnzli at comcast.net)
Date: Thu, 27 Oct 2011 18:29:28 +0000 (UTC)
Subject: [R-SIG-Finance] help needed for rugarch forecast function
In-Reply-To: <213196319.1018627.1319215219199.JavaMail.root@sz0053a.emeryville.ca.mail.comcast.net>
Message-ID: <1793383963.1315298.1319740168546.JavaMail.root@sz0053a.emeryville.ca.mail.comcast.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111027/abc794d7/attachment.pl>

From john.kerpel at gmail.com  Thu Oct 27 20:56:45 2011
From: john.kerpel at gmail.com (John Kerpel)
Date: Thu, 27 Oct 2011 13:56:45 -0500
Subject: [R-SIG-Finance] help needed for rugarch forecast function
In-Reply-To: <1793383963.1315298.1319740168546.JavaMail.root@sz0053a.emeryville.ca.mail.comcast.net>
References: <213196319.1018627.1319215219199.JavaMail.root@sz0053a.emeryville.ca.mail.comcast.net>
	<1793383963.1315298.1319740168546.JavaMail.root@sz0053a.emeryville.ca.mail.comcast.net>
Message-ID: <CAALU2hs_waSd8kbqeuCBxqFFLdqckVrfz38VBLsj7c-_aJM0vA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111027/f9e2a635/attachment.pl>

From alexios at 4dscape.com  Thu Oct 27 20:59:04 2011
From: alexios at 4dscape.com (alexios)
Date: Thu, 27 Oct 2011 19:59:04 +0100
Subject: [R-SIG-Finance] help needed for rugarch forecast function
In-Reply-To: <1793383963.1315298.1319740168546.JavaMail.root@sz0053a.emeryville.ca.mail.comcast.net>
References: <1793383963.1315298.1319740168546.JavaMail.root@sz0053a.emeryville.ca.mail.comcast.net>
Message-ID: <4EA9A9F8.5080006@4dscape.com>

Dear John,

The reason possibly no one, including the developer, have not replied is 
that you provide a very large example, in a specialized package, for 
which is it not possible to reproduce without the data, but is also not 
consistent in places:

1. "m.pred<- ugarchforecast(cl_ar4.fit, data = yCL05, external.forecasts 
= list(mregfor = ext), n.ahead = 1, n.roll = 322)"

You did not tell us what cl_ar4.fit is (since you are using the data 
option, it should be of class uGARCHspec).

2. In the next example you set "fixed.pars = list(ar33 = 0,omega = 0)" 
for an arma(4,0) model. Did you mean "ar3=0".

As the developer, I would be happy to look into this, but you should 
please take the time to create fully reproducible example and sent me an 
email off list with the dataset so that I might try to see whether it is 
a bug in the handling of this or some wrong use of the functions.

Regards,
Alexios

On 27/10/2011 19:29, johnzli at comcast.net wrote:
> Dear all:
>
> I posted this question before, and did not receive feedback. If I posted in the wrong mailing list, I apologize here in advance, and will post it to the right place next time.
>
> I am building a model for forecasting using rugarch package (version 1.0-5, R version 2.13.2). To verify the behavior of rugarch model, I also performed the same exercise using simple linear regression lm. All the data here is return times 100, so 0.5 represents 0.5%. If we look at the regression coefficients obtained from rugarch and lm, they are fairly close. So for practical purpose, I would argue that the DAC number given by DACTest from rugarch package should be very close to each other, and they are widely different.
>
> I suspect that when you perform regression in rugarch armaOrder = c(0, 0), and define regressors by using external.regressors, somehow the forecast function ugarchforecast will give results that are different from prediction given by predict.lm function.
>
> Can anyone kindly provide your feedback?
>
> Thank you very much.
>
>
>
>   The code and selected output looks like this:
>
>
>> min.model<- lm(yCL05 ~ -1, data = data.frame(yCL05, xCL05))
>> fwd.model<- step(min.model, direction = "forward", scope = (~CL05_1 + CL05_2 + CL05_3 + CL05_4), trace = 0)
>> summary(fwd.model)
>>
>> summary(fwd.model)
>
> Call:
> lm(formula = yCL05 ~ CL05_1 + CL05_4 + CL05_2 - 1, data = data.frame(yCL05,
>      xCL05))
>
> Residuals:
>       Min       1Q   Median       3Q      Max
> -0.48690 -0.07605  0.00166  0.07853  0.64095
>
> Coefficients:
>         Estimate Std. Error t value Pr(>|t|)
> CL05_1  0.98036    0.01746   56.16<  2e-16 ***
> CL05_4 -0.14149    0.01228  -11.53<  2e-16 ***
> CL05_2 -0.11615    0.02038   -5.70 1.31e-08 ***
> ---
> Signif. codes:  0 ???***??? 0.001 ???**??? 0.01 ???*??? 0.05 ???.??? 0.1 ??? ??? 1
>
> Residual standard error: 0.1312 on 3217 degrees of freedom
> Multiple R-squared: 0.7201,     Adjusted R-squared: 0.7199
> F-statistic:  2759 on 3 and 3217 DF,  p-value:<  2.2e-16
>
>> pred<- predict(fwd.model, newdata = tail(xCL05, (dailyDataPoint + 1)))
>> obsx<- tail(yCL05, dailyDataPoint + 1)
>> print(DACTest(as.matrix(pred), as.matrix(obsx), test = "PT", conf.level = 0.95))
> $Test
> [1] "Pesaran and Timmermann"
>
> $Stat
> [1] 12.43268
>
> $p.value
> [1] 0
>
> $H0
> [1] "Independently Distributed"
>
> $Decision
> [1] "Reject  H0"
>
> $DirAcc
> [1] 0.8452012
>> print(DACTest(as.matrix(pred), as.matrix(obsx), test = "AG", conf.level = 0.95))
> $Test
> [1] "Anatolyev and Gerko"
>
> $Stat
> [1] 12.59703
>
> $p.value
> [1] 0
>
> $H0
> [1] "No Predictability"
>
> $Decision
> [1] "Reject  H0"
>
> $DirAcc
> [1] 0.8452012
>
> # Now results from rugarch using sGARCH(1, 1) + ARMA(0, 0) + XREG(M)
>> ext<- data.matrix(xCL05)
>> startPar = as.list(coef(m.fit))
>> m.spec<- ugarchspec(variance.model = list(model = "sGARCH", garchOrder = c(1, 1)), mean.model = list(armaOrder = c(0, 0), include.mean = FALSE, external.regressors = ext), distribution.model = "std", start.pars = startPar, fixed.pars = list(mxreg3 = 0,omega = 0))
> m.fit<- ugarchfit(data = yCL05, spec = m.spec, out.sample = 322, solver = "solnp", fit.control = list(scale = 1))
>> m.fit
> *---------------------------------*
> *          GARCH Model Fit        *
> *---------------------------------*
>
> Conditional Variance Dynamics
> -----------------------------------
> GARCH Model     : sGARCH(1,1)
> Mean Model      : ARFIMA(0,0,0)
> Distribution    : std
>
> Optimal Parameters
> ------------------------------------
>          Estimate  Std. Error  t value Pr(>|t|)
> mxreg1  0.975195    0.013854  70.3926        0
> mxreg2 -0.119729    0.015947  -7.5080        0
> mxreg3  0.000000          NA       NA       NA
> mxreg4 -0.132482    0.009730 -13.6159        0
> omega   0.000000          NA       NA       NA
> alpha1  0.035356    0.004597   7.6919        0
> beta1   0.963644    0.004773 201.9094        0
> shape  10.396033    1.192115   8.7207        0
>
> Robust Standard Errors:
>          Estimate  Std. Error  t value Pr(>|t|)
> mxreg1  0.975195    0.014851  65.6665        0
> mxreg2 -0.119729    0.016830  -7.1139        0
> mxreg3  0.000000          NA       NA       NA
> mxreg4 -0.132482    0.010469 -12.6544        0
> omega   0.000000          NA       NA       NA
> alpha1  0.035356    0.006289   5.6217        0
> beta1   0.963644    0.006833 141.0259        0
> shape  10.396033    1.182089   8.7946        0
>
> LogLikelihood : 3895.616
>
> Information Criteria
> ------------------------------------
>
> Akaike       -1.5092
> Bayes        -1.4990
> Shibata      -1.5092
> Hannan-Quinn -1.5056
> ...
>> m.pred<- ugarchforecast(cl_ar4.fit, data = yCL05, external.forecasts = list(mregfor = ext), n.ahead = 1, n.roll = 322)
>> fpm(m.pred, summary = TRUE)
>           MSE       MAE       DAC
> 1 0.09805421 0.2428945 0.5434783
>
> The problem arises when you compare DAC given by rugarch package and the one given by DACTest from rugarch package for lm regression. In another test (the results are not listed here), I ran AR(4) model in rugarch with ugarchspec like:
>> m.spec<- ugarchspec(variance.model = list(model = "sGARCH", garchOrder = c(1, 1)), mean.model = list(armaOrder = c(4, 0), include.mean = FALSE), distribution.model = "std", start.pars = startPar, fixed.pars = list(ar33 = 0,omega = 0))
> and then ran
>> fpm(m.pred, summary = TRUE)
>
> then it will give a results similar to DAC from the one obtained from lm package.
>
> It seems the problem arises when you try to perform regression with external regressors with armaOrder = c(0, 0) ...
>
> Any help will be greatly appreciated..
>
>
> Thank you.
>
> John Li
>
> 	[[alternative HTML version deleted]]
>
>
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From harryp at gmail.com  Thu Oct 27 21:51:59 2011
From: harryp at gmail.com (Harry Prabandham)
Date: Thu, 27 Oct 2011 12:51:59 -0700
Subject: [R-SIG-Finance] RBloomberg hangs on blpConnect()
In-Reply-To: <CAA3Wa=ut0XtDtsx39E=rE-q6JzVAUc5HCuz67USkGDrUn0HyEQ@mail.gmail.com>
References: <CANmS35GEmz6gwSE6+wj22LjcopwAKGVibL=HxXdP5dyw-L0p-g@mail.gmail.com>
	<CAA3Wa=vXFtTZYvxnagTgnJ5+UEXsM-u_v1kXeQL5S8D3Fnqu-A@mail.gmail.com>
	<CANmS35GKwyu-TXM2f_PSVytFn9qbnJ7K5jfK04=W2FgxOjLBwA@mail.gmail.com>
	<CAA3Wa=ut0XtDtsx39E=rE-q6JzVAUc5HCuz67USkGDrUn0HyEQ@mail.gmail.com>
Message-ID: <CANmS35GBbAGz0DKLgyGkBRA5G0up1OHpmVujcG825H3FFZnEGA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111027/91f2772d/attachment.pl>

From arun at sonis.eu  Fri Oct 28 00:14:24 2011
From: arun at sonis.eu (Arun Soni)
Date: Thu, 27 Oct 2011 23:14:24 +0100
Subject: [R-SIG-Finance] mcr, cr, and pcr at security level
Message-ID: <A0E45FC1-35BB-46F3-ADCF-60640FCEA15F@sonis.eu>

Dear community brethren,

I have computed the factor risk decomposition using Dr Eric Zivot's script for factorRiskDecomposition that uses a cross-sectional fundamental factor model estimated from stock level to arrive at a factor model with 70+ factors.  Now that I have the factor level marginal contribution to risk, contribution to risk, and percentage contribution to risk, I would like to compute these measures at the stock level for each holding in the portfolio.  I was under the impression that since the cr is additive, I could multiply the matrix of weighted security exposures (betas) to each factor with the matrix of factor contributions to risk, which would yield me each stock's contribution to risk from all the factors.  I would then add each stock's contribution to residual risk to its contribution to factor risk to yield each stock's contribution to total risk, and the summing this measure across all the stocks in the portfolio should result in the portfolio risk but I am well short of that figure.

I would then like to similarly calculate each stock's marginal contribution to risk as well as its percentage contribution to risk.

I would be extremely grateful if I could get some insight into my error.


Regards

Arun

-------------- next part --------------
A non-text attachment was scrubbed...
Name: factorModelFactorRiskDecomposition.r
Type: application/octet-stream
Size: 2268 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111027/471a5ab1/attachment.obj>

From ezivot at u.washington.edu  Fri Oct 28 01:08:55 2011
From: ezivot at u.washington.edu (ezivot at u.washington.edu)
Date: Thu, 27 Oct 2011 16:08:55 -0700 (PDT)
Subject: [R-SIG-Finance] mcr, cr, and pcr at security level
In-Reply-To: <A0E45FC1-35BB-46F3-ADCF-60640FCEA15F@sonis.eu>
Message-ID: <alpine.LRH.2.01.1110271608550.31469@hymn32.u.washington.edu>

I think you are approaching the problem incorrectly. The easiest thing for you to do to get factor contributions at the portfolio is to run my function using the portfolio level inputs - portfolio betas and the portfolio variance. This will give you the right answer.

****************************************************************
*  Eric Zivot                  			               *
*  Robert Richards Chaired Professor of Economics              *
*  Department of Economics                                     *
*  Adjunct Professor of Finance                                *
*  Adjunct Professor of Statistics
*  Box 353330                  email:  ezivot at u.washington.edu *
*  University of Washington    phone:  206-543-6715            *
*  Seattle, WA 98195-3330                                      *                                                           *
*  www:  http://faculty.washington.edu/ezivot                  *
****************************************************************

On Thu, 27 Oct 2011, Arun Soni wrote:

> Dear community brethren,
>
> I have computed the factor risk decomposition using Dr Eric Zivot's script for factorRiskDecomposition that uses a cross-sectional fundamental factor model estimated from stock level to arrive at a factor model with 70+ factors.  Now that I have the factor level marginal contribution to risk, contribution to risk, and percentage contribution to risk, I would like to compute these measures at the stock level for each holding in the portfolio.  I was under the impression that since the cr is additive, I could multiply the matrix of weighted security exposures (betas) to each factor with the matrix of factor contributions to risk, which would yield me each stock's contribution to risk from all the factors.  I would then add each stock's contribution to residual risk to its contribution to factor risk to yield each stock's contribution to total risk, and the summing this measure across all the stocks in the portfolio should result in the portfolio risk but I am well short of t!
 hat figure.
>
> I would then like to similarly calculate each stock's marginal contribution to risk as well as its percentage contribution to risk.
>
> I would be extremely grateful if I could get some insight into my error.
>
>
> Regards
>
> Arun
>
>


From wotuzu17 at gmail.com  Fri Oct 28 07:12:12 2011
From: wotuzu17 at gmail.com (Andreas Voellenklee)
Date: Fri, 28 Oct 2011 07:12:12 +0200
Subject: [R-SIG-Finance] Fwd: blotter, quantstrat: initDate without effect?
In-Reply-To: <CAKC0BhkF0BCC7UjqcwhiQZoD6DJj86zPbOSfRotUd3KUNHkoSA@mail.gmail.com>
References: <CAKC0BhkF0BCC7UjqcwhiQZoD6DJj86zPbOSfRotUd3KUNHkoSA@mail.gmail.com>
Message-ID: <CAKC0BhmOWvFuw7YwQPPnZ8gyzKFjeodJwZ=-Om0_BkgoL43JSg@mail.gmail.com>

Hi,
I spend the last couple of days trying out the functionality of the
TradeAnalytics packages. There are some observations that I would like
to share. I use RStudio as GUI and derived the attached code from a
demo example.

1) since the trading system operates with moving averages, I download
data prior the start of applying the strategy to have all moving
averages calculated at the start time. But although the Portfolio,
Account and Orders get initialized at the beginning of 2002, the
execution of the strategy seems to start from the beginning of 2001

2) the getSymbols command returns a warning I don't understand:

Warning message:
In if (as.character(sc[[1]]) != calling.fun) return() :
?the condition has length > 1 and only the first element will be used:

This is my sessionInfo:

> sessionInfo()
R version 2.13.1 (2011-07-08)
Platform: i686-pc-linux-gnu (32-bit)

locale:
?[1] LC_CTYPE=en_US.UTF-8 ? ? ? LC_NUMERIC=C
LC_TIME=de_DE.UTF-8 ? ? ? ?LC_COLLATE=en_US.UTF-8
?[5] LC_MONETARY=C ? ? ? ? ? ? ?LC_MESSAGES=en_US.UTF-8
LC_PAPER=de_DE.UTF-8 ? ? ? LC_NAME=C
?[9] LC_ADDRESS=C ? ? ? ? ? ? ? LC_TELEPHONE=C
LC_MEASUREMENT=de_DE.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base

other attached packages:
[1] PerformanceAnalytics_1.0.3.2 quantstrat_0.5.6
blotter_0.8.4 ? ? ? ? ? ? ? ?FinancialInstrument_0.7.5
[5] quantmod_0.3-17 ? ? ? ? ? ? ?Defaults_1.1-1
TTR_0.21-0 ? ? ? ? ? ? ? ? ? xts_0.8-2
[9] zoo_1.7-5

loaded via a namespace (and not attached):
[1] grid_2.13.1 ? ? lattice_0.19-30 tools_2.13.1


Regards,
Andreas
-------------- next part --------------
A non-text attachment was scrubbed...
Name: STRAT_MACROSS.R
Type: text/x-r-source
Size: 3358 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111028/d2c3dd3c/attachment.bin>

From brian at braverock.com  Fri Oct 28 14:36:10 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 28 Oct 2011 07:36:10 -0500
Subject: [R-SIG-Finance] Fwd: blotter,
 quantstrat: initDate without effect?
In-Reply-To: <CAKC0BhmOWvFuw7YwQPPnZ8gyzKFjeodJwZ=-Om0_BkgoL43JSg@mail.gmail.com>
References: <CAKC0BhkF0BCC7UjqcwhiQZoD6DJj86zPbOSfRotUd3KUNHkoSA@mail.gmail.com>
	<CAKC0BhmOWvFuw7YwQPPnZ8gyzKFjeodJwZ=-Om0_BkgoL43JSg@mail.gmail.com>
Message-ID: <1319805370.12096.28.camel@brian-rcg>

On Fri, 2011-10-28 at 07:12 +0200, Andreas Voellenklee wrote:
> Hi,
> I spend the last couple of days trying out the functionality of the
> TradeAnalytics packages. There are some observations that I would like
> to share. I use RStudio as GUI and derived the attached code from a
> demo example.
> 
> 1) since the trading system operates with moving averages, I download
> data prior the start of applying the strategy to have all moving
> averages calculated at the start time. But although the Portfolio,
> Account and Orders get initialized at the beginning of 2002, the
> execution of the strategy seems to start from the beginning of 2001

>From your code:

retrieveDate<- '2001-01-01'  # retrieve older data to allow calculation
of MA prior to start of trading
initDate    <- '2002-01-01'  # date to start trading strategy

>From the documentation:

initDate: A date prior to the first close price given, used to
          contain initial account equity and initial position

set initDate to the beginning of your data, or at least before you
expect any transactions to be entered.  Otherwise, bad things may
happen.

Of course the 'execution' of the strategy starts from the beginning of
your market data.  This is exactly the documented and intended
behavior.  

> 2) the getSymbols command returns a warning I don't understand:
> 
> Warning message:
> In if (as.character(sc[[1]]) != calling.fun) return() :
>  the condition has length > 1 and only the first element will be used:

I don't get this warning on my machine when using getSymbols, so you'd
need to do more digging to find out where/why it is happening.  It is
also just a warning, and likely harmless if the data is actually being
returned.

Also, I'd like to comment on these lines:

# rebuild empty environment if RStudio's "Clear All"" has been used
.instrument <- new.env()
.blotter <- new.env()
.strategy <- new.env()

PLEASE do not do dangerous things like removing everything in an
environment.  I think 'Clear All' is a dumb/dangerous 'feature' of
RStudio (which I otherwise quite like), just as "rm -rf /*" is dumb, or
"rm(list = ls(all.names=TRUE))" is dumb.  Please don't send example code
to the list that could potentially wipe out the work space of someone
who is considering helping you.

You could just as easily do this:

# rebuild empty environment if RStudio's "Clear All"" has been used
if(!exists('.instrument') .instrument <- new.env()
if(!exists('.blotter') .blotter <- new.env()
if(!exists('.strategy') .strategy <- new.env()

and have a safer alternative.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From chd850 at gmail.com  Fri Oct 28 15:09:50 2011
From: chd850 at gmail.com (Stanley Chu)
Date: Fri, 28 Oct 2011 17:09:50 +0400
Subject: [R-SIG-Finance] "xts" as S4 slot class
In-Reply-To: <mailman.3.1319796001.5295.r-sig-finance@r-project.org>
References: <mailman.3.1319796001.5295.r-sig-finance@r-project.org>
Message-ID: <D73DA214-56EE-4C52-814A-A63F34CB0178@gmail.com>

Hi guys,

I am trying to set my slot class to be "xts", and am having some problems. Does anyone know what to do to make this work?

setClass("data", representation(data  = "xts"))
new("data", data = xts())

Thanks,
Stanley


From rbali at ufmg.br  Fri Oct 28 13:20:07 2011
From: rbali at ufmg.br (Robert Iquiapaza)
Date: Fri, 28 Oct 2011 09:20:07 -0200
Subject: [R-SIG-Finance] Fwd: blotter,
	quantstrat: initDate without effect?
In-Reply-To: <CAKC0BhmOWvFuw7YwQPPnZ8gyzKFjeodJwZ=-Om0_BkgoL43JSg@mail.gmail.com>
References: <CAKC0BhkF0BCC7UjqcwhiQZoD6DJj86zPbOSfRotUd3KUNHkoSA@mail.gmail.com>
	<CAKC0BhmOWvFuw7YwQPPnZ8gyzKFjeodJwZ=-Om0_BkgoL43JSg@mail.gmail.com>
Message-ID: <54783289CCCB447F9E4B69786E3A109A@DellPC>


Andreas
I am not sure if is availability data problem, the from="2004-11-02" gives 
the error

library(quantmod)
getSymbols(symbol,from="2004-11-30",to="2005-10-26")  # works

getSymbols(symbol,from="2004-11-02",to="2005-10-26")  # does not work

Regards

Robert

-----Mensagem Original----- 
From: Andreas Voellenklee
Sent: Friday, October 28, 2011 3:12 AM
To: R-SIG-Finance at r-project.org
Subject: [R-SIG-Finance] Fwd: blotter, quantstrat: initDate without effect?

Hi,
I spend the last couple of days trying out the functionality of the
TradeAnalytics packages. There are some observations that I would like
to share. I use RStudio as GUI and derived the attached code from a
demo example.

1) since the trading system operates with moving averages, I download
data prior the start of applying the strategy to have all moving
averages calculated at the start time. But although the Portfolio,
Account and Orders get initialized at the beginning of 2002, the
execution of the strategy seems to start from the beginning of 2001

2) the getSymbols command returns a warning I don't understand:

Warning message:
In if (as.character(sc[[1]]) != calling.fun) return() :
the condition has length > 1 and only the first element will be used:

This is my sessionInfo:

> sessionInfo()
R version 2.13.1 (2011-07-08)
Platform: i686-pc-linux-gnu (32-bit)

locale:
[1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
LC_TIME=de_DE.UTF-8        LC_COLLATE=en_US.UTF-8
[5] LC_MONETARY=C              LC_MESSAGES=en_US.UTF-8
LC_PAPER=de_DE.UTF-8       LC_NAME=C
[9] LC_ADDRESS=C               LC_TELEPHONE=C
LC_MEASUREMENT=de_DE.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] PerformanceAnalytics_1.0.3.2 quantstrat_0.5.6
blotter_0.8.4                FinancialInstrument_0.7.5
[5] quantmod_0.3-17              Defaults_1.1-1
TTR_0.21-0                   xts_0.8-2
[9] zoo_1.7-5

loaded via a namespace (and not attached):
[1] grid_2.13.1     lattice_0.19-30 tools_2.13.1


Regards,
Andreas






_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions 
should go.


From wotuzu17 at gmail.com  Fri Oct 28 15:53:57 2011
From: wotuzu17 at gmail.com (Andreas Voellenklee)
Date: Fri, 28 Oct 2011 15:53:57 +0200
Subject: [R-SIG-Finance] Fwd:  Fwd: blotter,
	quantstrat: initDate without effect?
In-Reply-To: <1319805370.12096.28.camel@brian-rcg>
References: <CAKC0BhkF0BCC7UjqcwhiQZoD6DJj86zPbOSfRotUd3KUNHkoSA@mail.gmail.com>
	<CAKC0BhmOWvFuw7YwQPPnZ8gyzKFjeodJwZ=-Om0_BkgoL43JSg@mail.gmail.com>
	<1319805370.12096.28.camel@brian-rcg>
Message-ID: <CAKC0Bhm+UOim60rQVUk5bF+zscuAH0RYHjM8RZpp_fN_v_Hdaw@mail.gmail.com>

Hello Brian,

thanks for the reply. Sorry for the unsafe code to restore empty
environments. I had a hard time becoming familiar with R, and my code
might be beginner-style sometimes.

Then there is no easy way of specifying a certain start-date when a
strategy starts being executed? If for example you use a 200 day
moving average in your trading rule there won't be any trades within
the first 200 days of market data. Well, I could download say a year
of older data, then cut the dataset at startdate minus 200
observations, then I have the moving average ready right at the
beginning. But this is not a very elegant method IMHO.

I intend to test strategies within a certain period, for example from
2000 to 2003. Then to take the same setup and test it in a different
time period, and so on. Am I the only one that likes to have all
indicators calculated at the beginning of a test period?

Greetings from Austria,
Andreas


From jeffrey.ryan at lemnica.com  Fri Oct 28 16:09:12 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Fri, 28 Oct 2011 09:09:12 -0500
Subject: [R-SIG-Finance] "xts" as S4 slot class
In-Reply-To: <D73DA214-56EE-4C52-814A-A63F34CB0178@gmail.com>
References: <mailman.3.1319796001.5295.r-sig-finance@r-project.org>
	<D73DA214-56EE-4C52-814A-A63F34CB0178@gmail.com>
Message-ID: <CABDUZc-gu7Eu-qTfYkgNRHo4BK1H8xu63JRH_HDYfLnf=bCmXA@mail.gmail.com>

Hi Stanley,

S4 isn't a great idea in my (vocal) opinion.  I ask that you rethink
the decision on why it seems appropriate for you to use.

99.99% of R programming is perfect with S3 + attributes.  And I am
being generous w.r.t. the 0.01%.

That said, you should read the errors that you get and take a look at
the constantly moving/difficult to follow trajectory of S4
documentation.

> setClass("data", representation(data="xts"))
[1] "data"
Warning message:
undefined slot classes in definition of "data": data(class "xts")
> setOldClass("xts")
> setClass("data", representation(data="xts"))
[1] "data"
> d <- new("data", data=xts())
> d
An object of class "data"
Slot "data":
Data:
numeric(0)

Index:
integer(0)

>

The trick is setOldClass.  Obviously a pejorative name, as if 'old'
implies bad.  What it should be aliased to is
setPerfectlyPerfectClassIntoNewStillBrewingS4mess()

;-)

Partial joking aside, what makes S4 a requirement here?  Are you
looking for additional obscurity or complexity?

Best,
Jeff

On Fri, Oct 28, 2011 at 8:09 AM, Stanley Chu <chd850 at gmail.com> wrote:
> Hi guys,
>
> I am trying to set my slot class to be "xts", and am having some problems. Does anyone know what to do to make this work?
>
> setClass("data", representation(data ?= "xts"))
> new("data", data = xts())
>
> Thanks,
> Stanley
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From brian at braverock.com  Fri Oct 28 16:10:42 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 28 Oct 2011 09:10:42 -0500
Subject: [R-SIG-Finance] Fwd: blotter,
 quantstrat: initDate without effect?
In-Reply-To: <D8C95B444AD6EE4AAD638D818A9CFD3405F5B5C0@RINNYCSE000.rth.ad.rothschild.com>
References: <CAKC0BhkF0BCC7UjqcwhiQZoD6DJj86zPbOSfRotUd3KUNHkoSA@mail.gmail.com>
	<CAKC0BhmOWvFuw7YwQPPnZ8gyzKFjeodJwZ=-Om0_BkgoL43JSg@mail.gmail.com>
	<1319805370.12096.28.camel@brian-rcg>
	<D8C95B444AD6EE4AAD638D818A9CFD3405F5B5C0@RINNYCSE000.rth.ad.rothschild.com>
Message-ID: <1319811042.12096.30.camel@brian-rcg>

On Fri, 2011-10-28 at 09:46 -0400, Bos, Roger wrote:
> Your suggestion of how to clear the environment is very helpful, but I
> had to make some minor changes to get it to work:
> 
> if (!exists('.instrument')) .instrument <- new.env()
> if (!exists('.blotter')) .blotter <- new.env()
> if (!exists('.strategy')) .strategy <- new.env() 

Indeed, you are correct.

That's what I get for writing code in email before running to the
train. ;)

Thanks for the correction.

-- 
Brian


From gsee000 at gmail.com  Fri Oct 28 16:42:16 2011
From: gsee000 at gmail.com (G See)
Date: Fri, 28 Oct 2011 09:42:16 -0500
Subject: [R-SIG-Finance] Fwd: Fwd: blotter,
	quantstrat: initDate without effect?
In-Reply-To: <CAKC0Bhm+UOim60rQVUk5bF+zscuAH0RYHjM8RZpp_fN_v_Hdaw@mail.gmail.com>
References: <CAKC0BhkF0BCC7UjqcwhiQZoD6DJj86zPbOSfRotUd3KUNHkoSA@mail.gmail.com>
	<CAKC0BhmOWvFuw7YwQPPnZ8gyzKFjeodJwZ=-Om0_BkgoL43JSg@mail.gmail.com>
	<1319805370.12096.28.camel@brian-rcg>
	<CAKC0Bhm+UOim60rQVUk5bF+zscuAH0RYHjM8RZpp_fN_v_Hdaw@mail.gmail.com>
Message-ID: <CA+xi=qaMxaeJyN_poW73UPr_axauyYzS27AH4HzcRLL-LPFuQw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111028/ce82eaf6/attachment.pl>

From gsee000 at gmail.com  Fri Oct 28 16:47:04 2011
From: gsee000 at gmail.com (G See)
Date: Fri, 28 Oct 2011 09:47:04 -0500
Subject: [R-SIG-Finance] Fwd: Fwd: blotter,
	quantstrat: initDate without effect?
In-Reply-To: <CA+xi=qaMxaeJyN_poW73UPr_axauyYzS27AH4HzcRLL-LPFuQw@mail.gmail.com>
References: <CAKC0BhkF0BCC7UjqcwhiQZoD6DJj86zPbOSfRotUd3KUNHkoSA@mail.gmail.com>
	<CAKC0BhmOWvFuw7YwQPPnZ8gyzKFjeodJwZ=-Om0_BkgoL43JSg@mail.gmail.com>
	<1319805370.12096.28.camel@brian-rcg>
	<CAKC0Bhm+UOim60rQVUk5bF+zscuAH0RYHjM8RZpp_fN_v_Hdaw@mail.gmail.com>
	<CA+xi=qaMxaeJyN_poW73UPr_axauyYzS27AH4HzcRLL-LPFuQw@mail.gmail.com>
Message-ID: <CA+xi=qZF0na709-x6x5TOhttX3c1TUXiHnk7LB0_Qk+rKbdi8Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111028/d0eb1548/attachment.pl>

From noahsilverman at ucla.edu  Sat Oct 29 03:00:46 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Fri, 28 Oct 2011 18:00:46 -0700
Subject: [R-SIG-Finance] Track multiple order status with IBrokers
Message-ID: <A5CD7E9A-C7FA-4630-B3D8-D8C3D51ABDB7@ucla.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111028/97f405e3/attachment.pl>

From noahsilverman at ucla.edu  Sat Oct 29 03:08:16 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Fri, 28 Oct 2011 18:08:16 -0700
Subject: [R-SIG-Finance] IBrokers TWS quits daily
Message-ID: <58D53556-7820-422C-90D1-D59E8954A85E@ucla.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111028/7b8fae4c/attachment.pl>

From jeff.a.ryan at gmail.com  Sat Oct 29 03:54:24 2011
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Fri, 28 Oct 2011 20:54:24 -0500
Subject: [R-SIG-Finance] IBrokers TWS quits daily
In-Reply-To: <58D53556-7820-422C-90D1-D59E8954A85E@ucla.edu>
References: <58D53556-7820-422C-90D1-D59E8954A85E@ucla.edu>
Message-ID: <2A4E715F-B7F9-4AE7-AD9D-0B25F8FCE182@gmail.com>

Hi Noah,

The TWS will automatically log you out. That is the way it works. 

If you want a continuous session, try the IB Gateway. Basically a low resource GUI-less application. This will stay up for as long as you need. 

HTH
Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Oct 28, 2011, at 8:08 PM, Noah Silverman <noahsilverman at ucla.edu> wrote:

> Hi,
> 
> Not directly related to R, but I'm hoping someone here has solved this.
> 
> My TWS client quits every day at the same time.  I can even see an option to pick what time of the day for it to quit.  
> 
> However, I would like to keep my system running continuously.  When the TWS quits, my R instance Hangs, and I need to quit R, restart TWS, restart R, re-execute my script, then re-accept the connection in TWS.  Not only is this a pain, but If the system were live, I couldn't ever miss a restart time.  
> 
> Automating this with a series of scripts might be possible, but the "accept API connection" step in TWS must be physically clicked.
> 
> Any thoughts?
> 
> --
> Noah Silverman
> Smart Media Corp
> 
> 
> 
> --
> Noah Silverman
> UCLA Department of Statistics
> 8117 Math Sciences Building
> Los Angeles, CA 90095
> 
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jeff.a.ryan at gmail.com  Sat Oct 29 03:59:53 2011
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Fri, 28 Oct 2011 20:59:53 -0500
Subject: [R-SIG-Finance] Track multiple order status with IBrokers
In-Reply-To: <A5CD7E9A-C7FA-4630-B3D8-D8C3D51ABDB7@ucla.edu>
References: <A5CD7E9A-C7FA-4630-B3D8-D8C3D51ABDB7@ucla.edu>
Message-ID: <35E71EC5-16EE-4E0D-9BC8-F572A1F382C6@gmail.com>

Hi Noah,

Some of this isn't exported due to a temporary lack of docs. 

IBrokers:::reqExecutions
IBrokers:::reqOpenOrders

Are decent places to start. IB also accepts many "algo" orders that implement some logic you might be interested in as well. 

Sorry for so little detail, just not on a machine I can run through an example for you with. 

HTH
Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Oct 28, 2011, at 8:00 PM, Noah Silverman <noahsilverman at ucla.edu> wrote:

> Hi,
> 
> Is there a way to track the status of multiple orders with the IBrokers package?
> 
> For example, I might want to place an order along with a stop.  Then, consider that we might want the stop trailing.  So, as long as the price is heading in a favorable direction, I want to cancel the current stop and place a new one.  Once the stop hits, I want to be able to detect this and update my records accordingly. (And then start looking for next entry position.)
> 
> I can see how to place a single order with the package.  Placing 2 (or more) sequentially should be trivial.  But, how do we know when an order has been filled, and at what price?
> 
> Thanks!
> 
> --
> Noah Silverman
> Smart Media Corp
> 
> 
> 
> --
> Noah Silverman
> UCLA Department of Statistics
> 8117 Math Sciences Building
> Los Angeles, CA 90095
> 
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From noahsilverman at ucla.edu  Sat Oct 29 04:01:43 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Fri, 28 Oct 2011 19:01:43 -0700
Subject: [R-SIG-Finance] Track multiple order status with IBrokers
In-Reply-To: <35E71EC5-16EE-4E0D-9BC8-F572A1F382C6@gmail.com>
References: <A5CD7E9A-C7FA-4630-B3D8-D8C3D51ABDB7@ucla.edu>
	<35E71EC5-16EE-4E0D-9BC8-F572A1F382C6@gmail.com>
Message-ID: <4E2C4E1F-5193-4194-94D7-83AA187EF031@ucla.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111028/73bd8a47/attachment.pl>

From gsee000 at gmail.com  Sat Oct 29 17:57:33 2011
From: gsee000 at gmail.com (G See)
Date: Sat, 29 Oct 2011 10:57:33 -0500
Subject: [R-SIG-Finance] IBrokers TWS quits daily
In-Reply-To: <58D53556-7820-422C-90D1-D59E8954A85E@ucla.edu>
References: <58D53556-7820-422C-90D1-D59E8954A85E@ucla.edu>
Message-ID: <CA+xi=qa8nmeGXc=taJdJBoAO_29-mEGjBF+bbKxK_exFQs5t=A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111029/5e9dc593/attachment.pl>

From preston.c.smith at gmail.com  Sat Oct 29 19:13:29 2011
From: preston.c.smith at gmail.com (Preston Smith)
Date: Sat, 29 Oct 2011 10:13:29 -0700
Subject: [R-SIG-Finance] IBrokers TWS quits daily
In-Reply-To: <58D53556-7820-422C-90D1-D59E8954A85E@ucla.edu>
References: <58D53556-7820-422C-90D1-D59E8954A85E@ucla.edu>
Message-ID: <CANiphNnqD7GRjyx2p4FcuY4YkxDHEvGmmn=5hKFk8Cmy5Q7szw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111029/244c3e08/attachment.pl>

From Bauermartin at gmx.at  Sat Oct 29 22:42:46 2011
From: Bauermartin at gmx.at (Martin Bauer)
Date: Sat, 29 Oct 2011 22:42:46 +0200
Subject: [R-SIG-Finance] Fwd: runMult instead of runSum
Message-ID: <20111029204246.133910@gmx.net>

-------- Original-Nachricht --------
Datum: Fri, 28 Oct 2011 18:13:14 +0200
Von: "Martina Bauer" <Bauermartin at gmx.at>
An: r-sig-finance at r-project.or
Betreff: runMult instead of runSum

Hello,

Maybe my approach is wrong from the beginning but I would like to calculate from monthly data - one months and two months and lastly three months return
I know that I have to multiply the monthly performance instead to sum up - but I dont know how to do in R. Finally I should also rank the result according to n period performance (no clue how to archive this in R)


here my code

require(quantmod)
stock=c("DD","DIS","PFE")
DD.sp=Ad(DD)
dd.m=monthlyReturn(DD.sp)
dd1=runSum(dd.m,n=1)
dd2=runSum(dd.m,n=2)
dd3=runSum(dd.m,n=3)

DIS.sp=Ad(DIS)
dis.m=monthlyReturn(DIS.sp)
dis1=runSum(DIS.m,n=1)
dis2=runSum(DIS.m,n=2)
dis3=runSum(DIS.m,n=3)

PFE.sp=Ad(PFE)
pfe.m=monthlyReturn(PFE.sp)
pfe1=runSum(pfe.m,n=1)
pfe2=runSum(pfe.m,n=2)
pfe3=runSum(pfe.m,n=3)


I know that my R code is very poor any idea how to improve ?

THanks in advance
Best Regards

martin

-- 




--


From gsee000 at gmail.com  Sun Oct 30 01:14:23 2011
From: gsee000 at gmail.com (G See)
Date: Sat, 29 Oct 2011 18:14:23 -0500
Subject: [R-SIG-Finance] Fwd: runMult instead of runSum
In-Reply-To: <20111029204246.133910@gmx.net>
References: <20111029204246.133910@gmx.net>
Message-ID: <CA+xi=qaFHpWwrLOj4USERnW4nqxXtPb0q1i9QNyCYa1=ADh+Gg@mail.gmail.com>

Hi Martin,

Attached is a script I made for you to demonstrate a few of the many
possible approaches you could take.  Below, I pasted the output from the
script.

HTH,
Garrett

R> # There are lots of ways to do this. First, I'll do something similar to
R> # what you have.  i.e. use the "monthlyReturn" function and do each
stock separately
R>
R> library(quantmod)
R> s <- c("DD", "DIS", "PFE")
R> getSymbols(s)
[1] "DD"  "DIS" "PFE"

R> ### 1
R>
R> # use leading=FALSE so that monthlyReturn won't replace the first
observation
R> # The first row will be NA, so use -1 subset to remove it
R> DD.m1 <- monthlyReturn(Ad(DD), leading=FALSE)[-1,]
R> # apply a rolling function to convert 1 month returns to 2 and 3 month
returns
R> DD.m2 <- rollapplyr(DD.m1, width=2, FUN=function(x) prod(1 + x) - 1)
R> DD.m3 <- rollapplyr(DD.m1, width=3, FUN=function(x) prod(1 + x) - 1)
R> # then you'd do this for each symbol
R>
R> ### 2
R>
R> # Or, you can use log returns so that you can use the runSum function,
then "unlog" them at the end
R> DD.m <- monthlyReturn(Ad(DD), type='log', leading=FALSE)[-1,]
R> DD.m1 <- exp(runSum(DD.m, n=1)) - 1
R> DD.m2 <- exp(runSum(DD.m, n=2)) - 1
R> DD.m3 <- exp(runSum(DD.m, n=3)) - 1
R>
R> ### 3
R>
R> # Alternatively, you could convert the prices to monthly first, and then
calculate the returns
R> mDD <- to.monthly(DD)
R> # For univariate series, you can use Delt or ROC
R> DD.m1 <- Delt(Ad(mDD))
R> DD.m2 <- ROC(Ad(mDD), n=2, type='discrete')
R> DD.m3 <- Delt(Ad(mDD), k=3)
R> # then you'd do this for each symbol
R>
R> ### 4
R>
R> # Since you're only dealing with the Adjusted price of each Symbol, it's
probably better
R> # to merge all the relevant prices into a data.frame
R> p <- cbind(Ad(DD), Ad(DIS), Ad(PFE))
R> # convert to monthly prices
R> mp <- to.monthly(p, OHLC=FALSE)
R> # calculate 1 month, 2 month, and 3 month returns with ROC
R> ret1 <- ROC(mp, n=1, type='discrete')
R> ret2 <- ROC(mp, n=2, type='discrete')
R> ret3 <- ROC(mp, n=3, type='discrete')

R> head(ret1)
          DD.Adjusted DIS.Adjusted PFE.Adjusted
Jan 2007           NA           NA           NA
Feb 2007  0.031112200 -0.025954654  -0.03851709
Mar 2007 -0.025659301  0.005206738   0.01201803
Apr 2007 -0.005120702  0.015843998   0.04750124
May 2007  0.071813725  0.013197361   0.05007085
Jun 2007 -0.028355820 -0.036708111  -0.06972560

R> head(ret2)
          DD.Adjusted DIS.Adjusted PFE.Adjusted
Jan 2007           NA           NA           NA
Feb 2007           NA           NA           NA
Mar 2007  0.004654581  -0.02088305  -0.02696196
Apr 2007 -0.030648610   0.02113323   0.06009014
May 2007  0.066325287   0.02925046   0.09995052
Jun 2007  0.041421569  -0.02399520  -0.02314596

R> # for many different return periods, you can use lapply (or a for loop
if you prefer)
R> rets <- lapply(1:5, function(n) ROC(mp, n=n, type='discrete'))

R> head(rets[[1]]) # 1 month returns
          DD.Adjusted DIS.Adjusted PFE.Adjusted
Jan 2007           NA           NA           NA
Feb 2007  0.031112200 -0.025954654  -0.03851709
Mar 2007 -0.025659301  0.005206738   0.01201803
Apr 2007 -0.005120702  0.015843998   0.04750124
May 2007  0.071813725  0.013197361   0.05007085
Jun 2007 -0.028355820 -0.036708111  -0.06972560

R> head(rets[[2]]) # 2 month returns
          DD.Adjusted DIS.Adjusted PFE.Adjusted
Jan 2007           NA           NA           NA
Feb 2007           NA           NA           NA
Mar 2007  0.004654581  -0.02088305  -0.02696196
Apr 2007 -0.030648610   0.02113323   0.06009014
May 2007  0.066325287   0.02925046   0.09995052
Jun 2007  0.041421569  -0.02399520  -0.02314596

R> # etc.
R>
R> # If you have a lot of symbols, you may be interested in the "PF"
function from
R> # my "qmao" package (which is on R-Forge) which will do the "cbind"ing
for you.
R> # install.packages("qmao", repos='http://r-forge.r-project.org')
R> # Just to have a little fun, here is how you could quickly calculate 6
month returns for all Dow components
R>
R> library(qmao)
R> library(XML)
R> #First get the symbols
R> DJIsymbols <- function() {
R+     djicomp <-
readHTMLTable('http://finance.yahoo.com/q/cp?s=^DJI+Components',
as.data.frame=FALSE)
R+     as.data.frame(djicomp[[10]], stringsAsFactors=FALSE)[,1]
R+ }
R> syms <- DJIsymbols()
R> getSymbols(syms)

<snip>

 [1] "AA"   "AXP"  "BA"   "BAC"  "CAT"  "CSCO" "CVX"  "DD"
 [9] "DIS"  "GE"   "HD"   "HPQ"  "IBM"  "INTC" "JNJ"  "JPM"
[17] "KFT"  "KO"   "MCD"  "MMM"  "MRK"  "MSFT" "PFE"  "PG"
[25] "T"    "TRV"  "UTX"  "VZ"   "WMT"  "XOM"

R> P <- PF(syms, prefer='Adjusted', silent=TRUE)
R> mP <- to.monthly(P, OHLC=FALSE)
R> # 6 month simple return of each Dow component
R> tail(ROC(mP, n=6, type='discrete'))
                  AA          AXP          BA        BAC
May 2011  0.28407351 0.2035731077  0.23722861  0.0751604
Jun 2011  0.03464052 0.2186982249  0.14537514 -0.1766917
Jul 2011 -0.10800971 0.1623512946  0.02564103 -0.2914536
Aug 2011 -0.23718713 0.1495587552 -0.06029515 -0.4266667
Sep 2011 -0.45594088 0.0008954556 -0.17166324 -0.5398496
Oct 2011 -0.31659776 0.0698151951 -0.13522771 -0.4000000
                CAT        CSCO         CVX          DD
May 2011  0.2616811 -0.12031662  0.31547017  0.15129714
Jun 2011  0.1467261 -0.22550000  0.14423508  0.10002054
Jul 2011  0.0269677 -0.23912004  0.11244071  0.02991712
Aug 2011 -0.1084622 -0.14931880 -0.03230860 -0.10561423
Sep 2011 -0.3312995 -0.09283196 -0.12502363 -0.26077307
Oct 2011 -0.1525943  0.06789413  0.01763505 -0.11636233
                  DIS          GE          HD        HPQ
May 2011  0.152866242  0.25913838  0.20906631 -0.1050471
Jun 2011  0.040789123  0.04708520  0.04779948 -0.1306122
Jul 2011 -0.006431695 -0.09720102 -0.03640912 -0.2262774
Aug 2011 -0.221307727 -0.21362530 -0.08971912 -0.4002780
Sep 2011 -0.300069622 -0.22741117 -0.09969871 -0.4471805
Oct 2011 -0.159860789 -0.14136386 -0.01311475 -0.3018491
                IBM        INTC        JNJ         JPM
May 2011 0.20426720  0.08098933 0.11277945  0.16361650
Jun 2011 0.17881297  0.07125427 0.09463722 -0.02866089
Jul 2011 0.13197874  0.05738881 0.10324686 -0.08946412
Aug 2011 0.07135735 -0.04597156 0.08994534 -0.18622951
Sep 2011 0.08184855  0.07614725 0.09395397 -0.33894178
Oct 2011 0.10864679  0.09802198 0.01579436 -0.18394128
                KFT         KO        MCD          MMM
May 2011 0.17773973 0.06532988 0.05772496  0.137328642
Jun 2011 0.13811075 0.03789408 0.11562542  0.112147326
Jul 2011 0.14472801 0.09783845 0.19239311  0.003012746
Aug 2011 0.11960026 0.11808885 0.21160547 -0.088932806
Sep 2011 0.08884565 0.03271171 0.17062117 -0.222462905
Oct 2011 0.07175295 0.03622971 0.20826318 -0.156162100
                   MRK          MSFT          PFE
May 2011  0.0901365706  0.0024203308  0.342405063
Jun 2011  0.0014359563 -0.0565899963  0.200353565
Jul 2011  0.0521060842  0.0003673769  0.078142695
Aug 2011  0.0394026057  0.0137195122  0.006896552
Sep 2011  0.0133250697 -0.0071798963 -0.111111111
Oct 2011 -0.0008537279  0.0543180930 -0.035053554
                   PG           T         TRV         UTX
May 2011  0.114454776  0.16844512  0.16457143  0.17840249
Jun 2011  0.003691221  0.09985580  0.06161746  0.13621091
Jul 2011 -0.009902597  0.09332322 -0.00744507  0.02965465
Aug 2011  0.026820546  0.03200883 -0.14726436 -0.10032715
Sep 2011  0.042588588 -0.04195089 -0.16814612 -0.15867512
Oct 2011  0.013782302 -0.01620906 -0.04572437 -0.10158192
                   VZ          WMT           XOM
May 2011  0.183733948  0.040425128  0.2131675201
Jun 2011  0.067766647 -0.001135933  0.1252609603
Jul 2011  0.016647196 -0.047159505 -0.0001261352
Aug 2011  0.005071851  0.044784915 -0.1239199905
Sep 2011 -0.020248380  0.010907674 -0.1260979425
Oct 2011  0.023110386  0.053844735 -0.0624784260




On Sat, Oct 29, 2011 at 3:42 PM, Martin Bauer <Bauermartin at gmx.at> wrote:

> -------- Original-Nachricht --------
> Datum: Fri, 28 Oct 2011 18:13:14 +0200
> Von: "Martina Bauer" <Bauermartin at gmx.at>
> An: r-sig-finance at r-project.or
> Betreff: runMult instead of runSum
>
> Hello,
>
> Maybe my approach is wrong from the beginning but I would like to
> calculate from monthly data - one months and two months and lastly three
> months return
> I know that I have to multiply the monthly performance instead to sum up -
> but I dont know how to do in R. Finally I should also rank the result
> according to n period performance (no clue how to archive this in R)
>
>
> here my code
>
> require(quantmod)
> stock=c("DD","DIS","PFE")
> DD.sp=Ad(DD)
> dd.m=monthlyReturn(DD.sp)
> dd1=runSum(dd.m,n=1)
> dd2=runSum(dd.m,n=2)
> dd3=runSum(dd.m,n=3)
>
> DIS.sp=Ad(DIS)
> dis.m=monthlyReturn(DIS.sp)
> dis1=runSum(DIS.m,n=1)
> dis2=runSum(DIS.m,n=2)
> dis3=runSum(DIS.m,n=3)
>
> PFE.sp=Ad(PFE)
> pfe.m=monthlyReturn(PFE.sp)
> pfe1=runSum(pfe.m,n=1)
> pfe2=runSum(pfe.m,n=2)
> pfe3=runSum(pfe.m,n=3)
>
>
> I know that my R code is very poor any idea how to improve ?
>
> THanks in advance
> Best Regards
>
> martin
>
> --
>
>
>
>
> --
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111029/82253abe/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: MartinReturns.R
Type: text/x-r-source
Size: 2632 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111029/82253abe/attachment.bin>

From Bauermartin at gmx.at  Sun Oct 30 13:46:24 2011
From: Bauermartin at gmx.at (Martin Bauer)
Date: Sun, 30 Oct 2011 13:46:24 +0100
Subject: [R-SIG-Finance] the solution of your problem IB problem ..
Message-ID: <20111030124624.180840@gmx.net>

Hi,

I had a similar issue but I fixed it with the help of a small programm

The name is IBController and all goes to Steven Kearns and Richard King

I have added the readme.txt

Best Regards

Martin
-- 


-------------- next part --------------
0.	CONTENTS
----------------

1.  Overview
2.  Download Contents
3.  Instructions
4.  Useful Tips


1.	OVERVIEW
================

IBController is a java application that was written to enable Interactive
Brokers Trader Workstation (TWS) to be run in "hands-free" mode.  This 
makes writing unattended automated trading systems possible.  IBController
automates the TWS login by filling the login dialog with your login 
credentials. It also handles the dialog boxes that TWS presents
during programmatic trading activies.

IBController also provides similar functions to automate the use of the 
IB Gateway (but note that the FIX mode of the IB Gateway is not supported).

The author is Steven Kearns (skearns23 at yahoo.com), with enhancements by 
Richard King (rlking at aultan.com).  It is based on original code by 
ken_geis at telocity.com.

Running the "main" of IBController provides the following services:

1.1	It starts up TWS or the IB Gateway.

1.2	It automatically logs into TWS/Gateway, using the username and 
	password specified in the IBController .ini file.  The password is 
	lightly encrypted, which prevents it from easily being used by 
	humans who might see it in the .ini file.

1.3	It automatically clicks the YES button if the "Accept incoming 
	connection?" dialog is displayed.

1.4	It automatically clicks the Close button if the Tip of the Day 
	dialog appears.

1.5	It automatically dismisses the dialog that warns of a new TWS 
	version upon startup.

1.6	IBController provides a server that accepts commands for 
	controlling TWS/Gateway.  Currently, the following commands are
	implemented:
	
	(a) STOP - causes TWS/Gateway to shut itself down cleanly.
	
	(b) ENABLEAPI - ensures that the Enable ActiveX and Socket Clients 
	option is checked in the TWS Configure/API menu.

1.7	It automatically responds to the "Exit Session Setting" 
	dialog by setting the autologoff five minutes in the past. 
	This enables TWS to be kept running indefinitely.

1.8	It can be configured to automatically shut down TWS at a
	specified day of the week and time.

1.9	The code can be easily modified to add new features. If you
	add any new features that you feel may be useful for other 	
	users, please email details to Richard King at
	rlking at aultan.com who will coordinate their incorporation
	into a new release.


2.	DOWNLOAD CONTENTS
=========================

The download file is a zip file containing the following files:

	build.cmd - a Windows command file for building IBController
		after modifying the source code. You will not need 
		this file unless you intend to make any modifications
		to IBController.

	changeHistory.txt - details of changes made to IBController
		in each version.

	IBController.ini - a specimen configuration file. You will 
		need to edit it to ensure it contains the settings 
		you need.

	IBController.jar - a Java Archive containing the compiled
		code for IBController.

	IBControllerEncrypt.bat - a specimen Windows command file
		that you must use to encrypt your IB account
		password prior to entering it in the configuration
		file. You will first need to edit it to replace
		the string aaaaa with your password.

	readme.txt - this file. 

	sampleIBControllerStart.bat - a specimen Windows command file
		for running IBController to start TWS. You may need to edit
		this file to take account of where your TWS is
		installed and your version of TWS.

	sampleIBControllerGatewayStart.bat - a specimen Windows command 
		file for running IBController, starting the IB Gateway
		rather than TWS. You may need to edit this file to 
		take account of where your TWS is installed and your 
		version of TWS.

	src\ibcontroller\*.*  - the source code files for IBController. 
		You will not need these files unless you intend to make 
		modifications to IBController.

	src\ibcontrollerutils\IBControllerLoader.java - source code for
		a demonstration of how to start IBController from another
		Java program. This code also works in .Net 2003 and
		.Net 2005 using J#.



3.	INSTRUCTIONS
====================

These instructions should help you to get started with IBController. Where
relevant, things which are diferent between Windows and Unix are pointed out.

For Windows it is assumed that TWS is installed in C:\Jts and that you will
install IBController in C:\IBController.

For Unix it is assumed that TWS is installed in /opt/IBJts and that you 
will install IBController in /opt.  

Obviously you may need to change some of these instructions to take account of
where TWS and IBController are actually installed.

3.1	Installation
--------------------

	Installing IBController is just a matter of unzipping the download 
	file to wherever you want to install it.

	Example for Unix users:

	$ cd /opt
	$ unzip /some/download/directory/IBControllerV2-6.zip

3.2	Encrypt your password
-----------------------------

	(You don't need to do this step if you pass the login id
	and password to IBController via the command line, or if you set
	the PasswordEncrypted option to 'no'.)

	To logon to TWS, IBController needs to know your password. The 
	password can either be given to IBController on the command line 
	(see 3.4.1), or it can be stored in IBController's configuration 
	file (see 3.3). If it's stored in the configuration file, it can
	be either 'in clear' or in an encrypted form that makes it more 
	difficult for other users of your computer to discover it.

	To encrypt your password run the following command from the 
	IBController directory (applies to both Unix and Windows):
 
 	    java -cp IBController.jar ibcontroller.IBController encrypt <password>

	where <password> is your IB account password.

	The program output will include your encrypted password, which 
	can then be included in your configuration file (see 3.3).

3.3	Make a Configuration File
---------------------------------

	IBController must be supplied with a configuration file. A 
	specimen file called IBController.ini is supplied. 

	There are two ways that IBController can locate the filename. The
	simplest way is to tell it where to find the file, as described in 
	3.4.1: if you do this, you can give the configuration file any
	name you like. Otherwise IBController will expect to find a file
	called IBController.<username>.ini where <username> is your 
	username on your computer (NOT your IB account username).

	It is recommended that you use the explicit approach unless
	there are multiple users of your computer.

	Rename the specimen configuration file if appropriate.

	Edit the configuration file and change the IbLoginID,  
	IbPassword and PasswordEncrypted settings as required. If 
	PasswordEncrypted is set to 'yes' or is omitted, the IbPassword 
	setting must be the encrypted password as described in 3.2. 
	Note that you do not need these settings if you intend to pass 
	the login id and password to IBController on the command line: 
	in this case it is best to comment out these settings by prefixing 
	them with a #.

	Adjust the other settings as required, and save the file.	
	
3.4	Running IBController
----------------------------

	The normal way to start IBController is by use of a command file. On
	Windows, this is a text file with either .bat or .cmd as the filename
	extension.

	You can use such a command file in a number of ways, such as:

	- double click on it in Windows Explorer

	- create a shortcut to it on your start menu

	- create a scheduled task to run it automatically at whatever times
	  you require

	IMPORTANT!!
	-----------

	The IBController download zipfile contains sample command files for
	Windows called:

		sampleIBControllerStart.bat 		(which starts TWS) and 

		sampleIBControllerGatewayStart.bat 	(which starts the IB Gateway)

	You can use these samples as the basis for your own command file(s). 
	However, they may not be entirely up to date so you should read through 
	them carefully and make any necessary changes to ensure that they work 
	properly. They contain detailed comments to help you specify the correct 
	information.

	I suggest you copy the samplecommand files first rather than edit them
	directly so you still have the originals if you make a mistake.

	Linux users should have no difficulty adapting the sample command
	files to the appropriate command syntax.

	The following information is for reference. If you use the 
	sample command files as the basis for your command files you may
	not need to read or understand it!
	

3.4.1	How to start IBController:

	IBController is a Java program. Once it starts running, it loads
	TWS within its own process, and uses some low-level Java 'hooks' to
	listen for various events relating to the windows created by TWS.

	TWS and the IB Gateway use a number of third party jar files, and the 
	Java VM needs to be told where to look for them. This is done using 
	the classpath (-cp) argument to the java command. The jar files needed 
	by TWS and the IB Gateway can be determined from the shortcuts created 
	when TWS was installed (note that TWS needs more jar files than the
	IB Gateway to support its richer functionality).

	The command for running IBController has the following basic form:

	java -cp <classpath> <otherOptions> <entryPoint> [<config file>|NULL] [<loginId> <password>]

	where
	
	<classpath>  
		tells the Java virtual machine where to look to find
		the class files that must be loaded in order to run both 
		IBController and TWS. You must ensure that all the information 
		from the corresponding item in the command to run TWS without 
		IBController is included,  PLUS the path and name of the 
		IBController.jar file. Note that this information may vary 
		in different releases of TWS.
		
		To find this information on Windows, locate the entry to start
		TWS in your start menu (usually Start > All Programs > Trader
		Workstation 4.0 > Trader Workstation 4.0). Right click on this
		entry and select Properties from the pop-up menu. The command
		is in the field labelled 'Target'. 

		Note that the classpath in the TWS shortcut assumes that the 
		TWS files are in the same folder as the shortcut. If your
		command file runs in a different folder (for example the folder
		where the IBController files are stored) you will need to:
 
		EITHER make sure each classpath item is prefixed with the path 
			to the TWS files folder

		OR your command file can change directory to the TWS files 
			folder before issuing the java command (this is what 
			the sampleIBControllerStart.bat file does)

	<otherOptions>  
		these are items which modify the behaviour of the 
		Java VM. Examples that are used by TWS include:
		
		-Dsun.java2d.noddraw=true 
		-Xmx512M

		Any such options that appear in the command to start TWS should
		also be included in the command to start IBController.
		
	<entryPoint> 
		indicates whether to start TWS or the IB Gateway. Must be one
		of the following values (note that these are case-sensitive):

		ibcontroller.IBController 		(to start TWS)
		ibcontroller.IBGatewayController 	(to start IB Gateway)

	<config file>  
		is the path and name of the configuration file.
		If this is not supplied or has the value NULL, then 
		IBController will look for a file called 
		IBController.<username>.ini in the working directory, 
		where <username> is your username on your computer 
		(NOT your IB account username).

	<loginId>  
		is your TWS login id.

	<password> 
		is your TWS password.

		Note that if you don't supply <loginId> and <password> in the command
		then they must be in the configuration file as described in 3.3.

	Unix example for TWS 865, using a configuration file called demo.ini:

	    $ cd opt/IBJts
	    $ java -server -cp jcommon-1.0.0.jar:pluginsupport.jar:jfreechart-1.0.0.jar:jhall.jar:\
	    > jts.jar:other.jar:rss.jar:/opt/IBController.jar \
	    > ibcontroller.IBController /opt/IBController/demo.ini

	For Windows users, please see the included specimen 
	sampleIBControllerStart.bat and sampleIBControllerGatewayStart.bat 
	command files.


3.5	Building IBController
-----------------------------

	This section is for those who wish to make modifications to 
	IBController. Other users can ignore it.

	It is recommended that you use a proper Java IDE for any 
	significant changes. If you don't already have one, NetBeans
	(see www.netbeans.org) and Eclipse (see www.eclipse.org) are
	fully featured open source IDEs that have the advantage of
	being free. The details of creating a project and including 
	the supplied IBController source files vary from IDE to IDE,
	so you'll have to discover how to do this yourself or ask for
	help on the forum. Bear in mind that you will need to include
	a reference to IB's jts.jar file (which you'll find in your
	TWS installation directory): otherwise your Java IDE will be
	unable to compile the project.

	For users who prefer to do their Java editing in a text
	editing program, and build it from the command prompt, the 
	following example commands are provided.

	For Unix users:

	    $ cd /opt/IBController/src/ibcontroller
	    $ javac -d opt/IBController/classes -cp ~/IBJts/jts.jar *.java

	    --  To create the jar file --

	    $ cd /opt/IBController/classes	
	    $ jar cvf /opt/IBController.jar ibcontroller/*

	For Windows users:

	    cd C:\IBController\src\ibcontroller
	    javac -d C:\IBController\classes -cp C:\Jts\jts.jar *.java    

	    : To create the jar file

	    cd C:\IBController\classes
	    jar cvf ..\IBController.jar ibcontroller\*

	Note that the build.cmd file included in the download is 
	a rather more sophisticated command file for building 
	IBController on	Windows machines. You will need to edit 
	it to meet your	requirements.


4.	USEFUL TIPS
===================

4.1	When running java programs such as IBController and TWS, you may 
	want to use the -server switch in the command line. This runs the 
	server version of the Java VM, which has additional optimisations 
	that make it run faster than the workstation version, though it 
	takes longer to load and uses more memory.

	Note that the Java Runtime for 32-bit Windows systems does not
	include the server version of the Java VM. To use this feature on
	32-bit Windows, you must download the entire Java Development Kit (JDK). 

4.2	Running TWS Headless - *nix

	[Not really an IBController tip, but someone may find it useful.]

	You need vncserver.  

	Run your VNC server sending its display to :1

	    $ vncserver :1
	    $ export DISPLAY=:1
	    $ java -server -cp jcommon-1.0.0.jar:jfreechart-1.0.0.jar:jhall.jar:\
	    > jts.jar:other.jar:rss.jar:/opt/IBController.jar \
	    > ibcontroller.IBController /opt/IBController/demo.ini

4.3	On Windows you can start IBController automatically using a Scheduled 
	Task. 

	If you do this, you must make sure that the machine is already 
	logged on before the scheduled task runs. Otherwise the task
	will still run, but you won't be able to see and interact with TWS, 
	even if you subsequently log on.

	Remember also to change the task settings to prevent Windows 
	automatically ending it after a certain time.

	Also you can use the IbAutoClosedown=no setting in the IBController
	configuration file to disable TWS's autologoff feature,  and the 
	ClosedownAt= setting to specify when IBController will shut down
	TWS.


From ustaudinger at activequant.org  Sun Oct 30 18:36:08 2011
From: ustaudinger at activequant.org (Ulrich Staudinger)
Date: Sun, 30 Oct 2011 17:36:08 +0000
Subject: [R-SIG-Finance] Fwd: runMult instead of runSum
In-Reply-To: <CA+xi=qaFHpWwrLOj4USERnW4nqxXtPb0q1i9QNyCYa1=ADh+Gg@mail.gmail.com>
References: <20111029204246.133910@gmx.net>
	<CA+xi=qaFHpWwrLOj4USERnW4nqxXtPb0q1i9QNyCYa1=ADh+Gg@mail.gmail.com>
Message-ID: <CAMrz3D0dJLJCUKt7X1drdnR-J7ZKx7mr5hF8iScEHjrOJCNtZg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111030/b3e246de/attachment.pl>

From gsee000 at gmail.com  Sun Oct 30 18:39:39 2011
From: gsee000 at gmail.com (G See)
Date: Sun, 30 Oct 2011 12:39:39 -0500
Subject: [R-SIG-Finance] Fwd: runMult instead of runSum
In-Reply-To: <CAMrz3D0dJLJCUKt7X1drdnR-J7ZKx7mr5hF8iScEHjrOJCNtZg@mail.gmail.com>
References: <20111029204246.133910@gmx.net>
	<CA+xi=qaFHpWwrLOj4USERnW4nqxXtPb0q1i9QNyCYa1=ADh+Gg@mail.gmail.com>
	<CAMrz3D0dJLJCUKt7X1drdnR-J7ZKx7mr5hF8iScEHjrOJCNtZg@mail.gmail.com>
Message-ID: <CA+xi=qZW+3RD6Oo_ghgZJTNau=m_=HBvm+YxTVcOPy4r2RfG_A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111030/da57faa6/attachment.pl>

From ustaudinger at activequant.org  Sun Oct 30 18:39:22 2011
From: ustaudinger at activequant.org (Ulrich Staudinger)
Date: Sun, 30 Oct 2011 17:39:22 +0000
Subject: [R-SIG-Finance] Fwd: runMult instead of runSum
In-Reply-To: <CAMrz3D0dJLJCUKt7X1drdnR-J7ZKx7mr5hF8iScEHjrOJCNtZg@mail.gmail.com>
References: <20111029204246.133910@gmx.net>
	<CA+xi=qaFHpWwrLOj4USERnW4nqxXtPb0q1i9QNyCYa1=ADh+Gg@mail.gmail.com>
	<CAMrz3D0dJLJCUKt7X1drdnR-J7ZKx7mr5hF8iScEHjrOJCNtZg@mail.gmail.com>
Message-ID: <CAMrz3D2=t8q6LJGise05BzqyhazwBoh5fCgKhX0DsF70ew1zdQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111030/8a3db98d/attachment.pl>

From gsee000 at gmail.com  Sun Oct 30 18:40:55 2011
From: gsee000 at gmail.com (G See)
Date: Sun, 30 Oct 2011 12:40:55 -0500
Subject: [R-SIG-Finance] Fwd: runMult instead of runSum
In-Reply-To: <CAMrz3D2=t8q6LJGise05BzqyhazwBoh5fCgKhX0DsF70ew1zdQ@mail.gmail.com>
References: <20111029204246.133910@gmx.net>
	<CA+xi=qaFHpWwrLOj4USERnW4nqxXtPb0q1i9QNyCYa1=ADh+Gg@mail.gmail.com>
	<CAMrz3D0dJLJCUKt7X1drdnR-J7ZKx7mr5hF8iScEHjrOJCNtZg@mail.gmail.com>
	<CAMrz3D2=t8q6LJGise05BzqyhazwBoh5fCgKhX0DsF70ew1zdQ@mail.gmail.com>
Message-ID: <CA+xi=qZ=9iwTK2UDsV8jzDhrsqd6jzgyj7+EJmRZuFaAtQe=cg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111030/775e33e9/attachment.pl>

From Bauermartin at gmx.at  Sun Oct 30 22:25:12 2011
From: Bauermartin at gmx.at (Martin Bauer)
Date: Sun, 30 Oct 2011 22:25:12 +0100
Subject: [R-SIG-Finance] Fwd: runMult instead of runSum
Message-ID: <20111030212512.237270@gmx.net>

Hi,

How can I order this matrix ?

I have tried this

ret1=(ROC(mP, n=6, type='discrete')

tail(order(ret1[NROW(ret1)]))

ret1[NROW(ret1),4]
ret1[NROW(ret1),1]
ret1[NROW(ret1),3]
ret1[NROW(ret1),2]

but I only get the ordered the first part (AA,AXP,BA,BAC) of the matrix instead the hole matrix

any idea why ?

Have a great weekend

Martin

> 
> R> P <- PF(syms, prefer='Adjusted', silent=TRUE)
> R> mP <- to.monthly(P, OHLC=FALSE)
> R> # 6 month simple return of each Dow component
> R> tail(ROC(mP, n=6, type='discrete'))
>                   AA          AXP          BA        BAC
> May 2011  0.28407351 0.2035731077  0.23722861  0.0751604
> Jun 2011  0.03464052 0.2186982249  0.14537514 -0.1766917
> Jul 2011 -0.10800971 0.1623512946  0.02564103 -0.2914536
> Aug 2011 -0.23718713 0.1495587552 -0.06029515 -0.4266667
> Sep 2011 -0.45594088 0.0008954556 -0.17166324 -0.5398496
> Oct 2011 -0.31659776 0.0698151951 -0.13522771 -0.4000000
>                 CAT        CSCO         CVX          DD
> May 2011  0.2616811 -0.12031662  0.31547017  0.15129714
> Jun 2011  0.1467261 -0.22550000  0.14423508  0.10002054
> Jul 2011  0.0269677 -0.23912004  0.11244071  0.02991712
> Aug 2011 -0.1084622 -0.14931880 -0.03230860 -0.10561423
> Sep 2011 -0.3312995 -0.09283196 -0.12502363 -0.26077307
> Oct 2011 -0.1525943  0.06789413  0.01763505 -0.11636233
>                   DIS          GE          HD        HPQ
> May 2011  0.152866242  0.25913838  0.20906631 -0.1050471
> Jun 2011  0.040789123  0.04708520  0.04779948 -0.1306122
> Jul 2011 -0.006431695 -0.09720102 -0.03640912 -0.2262774
> Aug 2011 -0.221307727 -0.21362530 -0.08971912 -0.4002780
> Sep 2011 -0.300069622 -0.22741117 -0.09969871 -0.4471805
> Oct 2011 -0.159860789 -0.14136386 -0.01311475 -0.3018491
>                 IBM        INTC        JNJ         JPM
> May 2011 0.20426720  0.08098933 0.11277945  0.16361650
> Jun 2011 0.17881297  0.07125427 0.09463722 -0.02866089
> Jul 2011 0.13197874  0.05738881 0.10324686 -0.08946412
> Aug 2011 0.07135735 -0.04597156 0.08994534 -0.18622951
> Sep 2011 0.08184855  0.07614725 0.09395397 -0.33894178
> Oct 2011 0.10864679  0.09802198 0.01579436 -0.18394128
>                 KFT         KO        MCD          MMM
> May 2011 0.17773973 0.06532988 0.05772496  0.137328642
> Jun 2011 0.13811075 0.03789408 0.11562542  0.112147326
> Jul 2011 0.14472801 0.09783845 0.19239311  0.003012746
> Aug 2011 0.11960026 0.11808885 0.21160547 -0.088932806
> Sep 2011 0.08884565 0.03271171 0.17062117 -0.222462905
> Oct 2011 0.07175295 0.03622971 0.20826318 -0.156162100
>                    MRK          MSFT          PFE
> May 2011  0.0901365706  0.0024203308  0.342405063
> Jun 2011  0.0014359563 -0.0565899963  0.200353565
> Jul 2011  0.0521060842  0.0003673769  0.078142695
> Aug 2011  0.0394026057  0.0137195122  0.006896552
> Sep 2011  0.0133250697 -0.0071798963 -0.111111111
> Oct 2011 -0.0008537279  0.0543180930 -0.035053554
>                    PG           T         TRV         UTX
> May 2011  0.114454776  0.16844512  0.16457143  0.17840249
> Jun 2011  0.003691221  0.09985580  0.06161746  0.13621091
> Jul 2011 -0.009902597  0.09332322 -0.00744507  0.02965465
> Aug 2011  0.026820546  0.03200883 -0.14726436 -0.10032715
> Sep 2011  0.042588588 -0.04195089 -0.16814612 -0.15867512
> Oct 2011  0.013782302 -0.01620906 -0.04572437 -0.10158192
>                    VZ          WMT           XOM
> May 2011  0.183733948  0.040425128  0.2131675201
> Jun 2011  0.067766647 -0.001135933  0.1252609603
> Jul 2011  0.016647196 -0.047159505 -0.0001261352
> Aug 2011  0.005071851  0.044784915 -0.1239199905
> Sep 2011 -0.020248380  0.010907674 -0.1260979425
> Oct 2011  0.023110386  0.053844735 -0.0624784260
> 
> 
> 
> 
> On Sat, Oct 29, 2011 at 3:42 PM, Martin Bauer <Bauermartin at gmx.at> wrote:
> 
> > -------- Original-Nachricht --------
> > Datum: Fri, 28 Oct 2011 18:13:14 +0200
> > Von: "Martina Bauer" <Bauermartin at gmx.at>
> > An: r-sig-finance at r-project.or
> > Betreff: runMult instead of runSum
> >
> > Hello,
> >
> > Maybe my approach is wrong from the beginning but I would like to
> > calculate from monthly data - one months and two months and lastly three
> > months return
> > I know that I have to multiply the monthly performance instead to sum up
> -
> > but I dont know how to do in R. Finally I should also rank the result
> > according to n period performance (no clue how to archive this in R)
> >
> >
> > here my code
> >
> > require(quantmod)
> > stock=c("DD","DIS","PFE")
> > DD.sp=Ad(DD)
> > dd.m=monthlyReturn(DD.sp)
> > dd1=runSum(dd.m,n=1)
> > dd2=runSum(dd.m,n=2)
> > dd3=runSum(dd.m,n=3)
> >
> > DIS.sp=Ad(DIS)
> > dis.m=monthlyReturn(DIS.sp)
> > dis1=runSum(DIS.m,n=1)
> > dis2=runSum(DIS.m,n=2)
> > dis3=runSum(DIS.m,n=3)
> >
> > PFE.sp=Ad(PFE)
> > pfe.m=monthlyReturn(PFE.sp)
> > pfe1=runSum(pfe.m,n=1)
> > pfe2=runSum(pfe.m,n=2)
> > pfe3=runSum(pfe.m,n=3)
> >
> >
> > I know that my R code is very poor any idea how to improve ?
> >
> > THanks in advance
> > Best Regards
> >
> > martin
> >
> > --
> >
> >
> >
> >
> > --
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions
> > should go.
> >

--


From stergios_marinopoulos at yahoo.com  Mon Oct 31 01:34:55 2011
From: stergios_marinopoulos at yahoo.com (Stergios Marinopoulos)
Date: Sun, 30 Oct 2011 17:34:55 -0700 (PDT)
Subject: [R-SIG-Finance] IBrokers TWS quits daily
Message-ID: <1320021295.73579.YahooMailNeo@web30808.mail.mud.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111030/7ddf89c6/attachment.pl>

From Darko.Roupell at cba.com.au  Mon Oct 31 06:18:16 2011
From: Darko.Roupell at cba.com.au (Roupell, Darko)
Date: Mon, 31 Oct 2011 16:18:16 +1100
Subject: [R-SIG-Finance] Skewness function for intraday data return
	distribution
In-Reply-To: <CAMrz3D2=t8q6LJGise05BzqyhazwBoh5fCgKhX0DsF70ew1zdQ@mail.gmail.com>
References: <20111029204246.133910@gmx.net>
	<CA+xi=qaFHpWwrLOj4USERnW4nqxXtPb0q1i9QNyCYa1=ADh+Gg@mail.gmail.com>
	<CAMrz3D0dJLJCUKt7X1drdnR-J7ZKx7mr5hF8iScEHjrOJCNtZg@mail.gmail.com>
	<CAMrz3D2=t8q6LJGise05BzqyhazwBoh5fCgKhX0DsF70ew1zdQ@mail.gmail.com>
Message-ID: <E8CC19FC66B5FB46B5511B6E8AE814185B3E7A3EEA@VAUNSW137.au.cbainet.com>

Hi All,

I have written a skew function to calculate stock skewness using intraday 5 min data. However, going through literature I have come across two very similar formulas, though they produce different skewness coefficient and wonder if anyone else has used similar formulas and know which one is the correct one.

mq_skewness = function(data){
data = dataformatc(data);
  #returns midquote log returns as xts object
  mq_ret = mq_return(data);  
  #returns midquote log returns as xts object
  mq_ret_sqr = mq_ret^2;
  #returns realized daily volatility as xts object
  RVar=sum(  mq_ret_sqr)
  n = length(mq_ret);
  
  #first formula to measure skewness 
  mq_skewness = sqrt(n) * (sum(mq_ret^3))/sum(mq_ret_sqr)^(2/3)
 
 # second formula to measure skewness 
  mq_skewness = sqrt(n) * sum((mq_ret/sqrt(RVar))^3)
  
  return(mq_skewness);
}

  #first formula to measure skewness 
  mq_skewness = sqrt(n) * (sum(mq_ret^3))/sum(mq_ret_sqr)^(2/3)
[1] 0.0003991095
  # second formula to measure skewness 
  mq_skewness = sqrt(n) * sum((mq_ret/sqrt(RVar))^3)
[1] 0.09759751
# this is output from base package function but this may not be appropriate to use for intraday data
skewness(mq_ret)
[1] 0.3035787
__________________________________________________
Darko Roupell 



************** IMPORTANT MESSAGE *****************************       
This e-mail message is intended only for the addressee(s) and contains information which may be
confidential. 
If you are not the intended recipient please advise the sender by return email, do not use or
disclose the contents, and delete the message and any attachments from your system. Unless
specifically indicated, this email does not constitute formal advice or commitment by the sender
or the Commonwealth Bank of Australia (ABN 48 123 123 124) or its subsidiaries. 
We can be contacted through our web site: commbank.com.au. 
If you no longer wish to receive commercial electronic messages from us, please reply to this
e-mail by typing Unsubscribe in the subject line. 


From Bauermartin at gmx.at  Mon Oct 31 08:39:11 2011
From: Bauermartin at gmx.at (Martin Bauer)
Date: Mon, 31 Oct 2011 08:39:11 +0100
Subject: [R-SIG-Finance] expanding xts object - adding a day
Message-ID: <20111031073911.268480@gmx.net>

Hello,

I'm currently using quantmod to download data from yahoo

library(quantmod)
indexes<-c("T","DIA")

running the script today - would give me data till last Friday. Now I want to fill ie the DIA xts object with today's intraday price to simulate today's close

How can I do this ?

Best Regards
Martin
--


From patrick at burns-stat.com  Mon Oct 31 09:09:39 2011
From: patrick at burns-stat.com (Patrick Burns)
Date: Mon, 31 Oct 2011 08:09:39 +0000
Subject: [R-SIG-Finance] Skewness function for intraday data return
	distribution
In-Reply-To: <E8CC19FC66B5FB46B5511B6E8AE814185B3E7A3EEA@VAUNSW137.au.cbainet.com>
References: <20111029204246.133910@gmx.net>
	<CA+xi=qaFHpWwrLOj4USERnW4nqxXtPb0q1i9QNyCYa1=ADh+Gg@mail.gmail.com>
	<CAMrz3D0dJLJCUKt7X1drdnR-J7ZKx7mr5hF8iScEHjrOJCNtZg@mail.gmail.com>
	<CAMrz3D2=t8q6LJGise05BzqyhazwBoh5fCgKhX0DsF70ew1zdQ@mail.gmail.com>
	<E8CC19FC66B5FB46B5511B6E8AE814185B3E7A3EEA@VAUNSW137.au.cbainet.com>
Message-ID: <4EAE57C3.7050201@burns-stat.com>

The skewness of c * X should be equal to
the skewness of X.  If I'm reading the
formulas correctly, that is true of the
second one but not the first.

It would be interesting to hear if you find
different results intraday than I did with
daily data over a year:

http://www.portfolioprobe.com/2011/10/03/predictability-of-kurtosis-and-skewness-in-sp-constituents/

On 31/10/2011 05:18, Roupell, Darko wrote:
> Hi All,
>
> I have written a skew function to calculate stock skewness using intraday 5 min data. However, going through literature I have come across two very similar formulas, though they produce different skewness coefficient and wonder if anyone else has used similar formulas and know which one is the correct one.
>
> mq_skewness = function(data){
> data = dataformatc(data);
>    #returns midquote log returns as xts object
>    mq_ret = mq_return(data);
>    #returns midquote log returns as xts object
>    mq_ret_sqr = mq_ret^2;
>    #returns realized daily volatility as xts object
>    RVar=sum(  mq_ret_sqr)
>    n = length(mq_ret);
>
>    #first formula to measure skewness
>    mq_skewness = sqrt(n) * (sum(mq_ret^3))/sum(mq_ret_sqr)^(2/3)
>
>   # second formula to measure skewness
>    mq_skewness = sqrt(n) * sum((mq_ret/sqrt(RVar))^3)
>
>    return(mq_skewness);
> }
>
>    #first formula to measure skewness
>    mq_skewness = sqrt(n) * (sum(mq_ret^3))/sum(mq_ret_sqr)^(2/3)
> [1] 0.0003991095
>    # second formula to measure skewness
>    mq_skewness = sqrt(n) * sum((mq_ret/sqrt(RVar))^3)
> [1] 0.09759751
> # this is output from base package function but this may not be appropriate to use for intraday data
> skewness(mq_ret)
> [1] 0.3035787
> __________________________________________________
> Darko Roupell
>
>
>
> ************** IMPORTANT MESSAGE *****************************
> This e-mail message is intended only for the addressee(s) and contains information which may be
> confidential.
> If you are not the intended recipient please advise the sender by return email, do not use or
> disclose the contents, and delete the message and any attachments from your system. Unless
> specifically indicated, this email does not constitute formal advice or commitment by the sender
> or the Commonwealth Bank of Australia (ABN 48 123 123 124) or its subsidiaries.
> We can be contacted through our web site: commbank.com.au.
> If you no longer wish to receive commercial electronic messages from us, please reply to this
> e-mail by typing Unsubscribe in the subject line.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From joshchien at yahoo.com  Mon Oct 31 09:11:38 2011
From: joshchien at yahoo.com (JOSH CHIEN)
Date: Mon, 31 Oct 2011 01:11:38 -0700 (PDT)
Subject: [R-SIG-Finance] apply Function Problem
Message-ID: <1320048698.96301.YahooMailNeo@web113111.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111031/02dfd2f7/attachment.pl>

From brian at braverock.com  Mon Oct 31 13:11:26 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 31 Oct 2011 07:11:26 -0500
Subject: [R-SIG-Finance] expanding xts object - adding a day
In-Reply-To: <20111031073911.268480@gmx.net>
References: <20111031073911.268480@gmx.net>
Message-ID: <1320063086.12096.103.camel@brian-rcg>

On Mon, 2011-10-31 at 08:39 +0100, Martin Bauer wrote:
> library(quantmod)
> indexes<-c("T","DIA")
> 
> running the script today - would give me data till last Friday. Now I
> want to fill ie the DIA xts object with today's intraday price to
> simulate today's close
> 
> How can I do this ? 

?rbind


From Bauermartin at gmx.at  Mon Oct 31 13:58:11 2011
From: Bauermartin at gmx.at (Martin Bauer)
Date: Mon, 31 Oct 2011 13:58:11 +0100
Subject: [R-SIG-Finance] expanding xts object - adding a day
Message-ID: <20111031125811.279800@gmx.net>

Hi Brian,

yes rbind finally but I thinking of something like this - not sure if that could lead to a solution

library(xts)
library(quantmod)
sym=getSymbols("SPY",from="1900-01-01")
l=list()
L$Open <- xts(222, as.Date("2011-10-30"))
L$High <- xts(224, as.Date("2011-10-30"))
L$Low <- xts(220, as.Date("2011-10-30"))
L$Close <- xts(224, as.Date("2011-10-30"))
L$Volume <- xts(999, as.Date("2011-10-30"))
L$Adjusted <- xts(224, as.Date("2011-10-30"))
do.call("merge", L)
rbind(SPY,L)

but I get this error msg

Error in try.xts(list(Open = 222, High = 224, Low = 220, Close = 224,  : 
  Error in UseMethod("as.xts") :   no applicable method for 'as.xts' applied to an object of class "list"

I try this too
instead l=list()  I replaced it with l=xts()

also 

L<- xts(as.Date("2011-10-30",222,224,220,224,999,224))

ended with this error

Error in strptime(x, format, tz = "GMT") : invalid 'x' argument

I'm lost at this point



-------- Original-Nachricht --------
> Datum: Mon, 31 Oct 2011 07:11:26 -0500
> Von: "Brian G. Peterson" <brian at braverock.com>
> An: Martin Bauer <Bauermartin at gmx.at>
> CC: R Sig Finance <r-sig-finance at r-project.org>
> Betreff: Re: [R-SIG-Finance] expanding xts object - adding a day

> On Mon, 2011-10-31 at 08:39 +0100, Martin Bauer wrote:
> > library(quantmod)
> > indexes<-c("T","DIA")
> > 
> > running the script today - would give me data till last Friday. Now I
> > want to fill ie the DIA xts object with today's intraday price to
> > simulate today's close
> > 
> > How can I do this ? 
> 
> ?rbind
> 
> 

--


From brian at braverock.com  Mon Oct 31 14:10:07 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 31 Oct 2011 08:10:07 -0500
Subject: [R-SIG-Finance] expanding xts object - adding a day
In-Reply-To: <20111031125811.279800@gmx.net>
References: <20111031125811.279800@gmx.net>
Message-ID: <1320066607.12096.105.camel@brian-rcg>


On Mon, 2011-10-31 at 13:58 +0100, Martin Bauer wrote:
> Hi Brian,
> 
> yes rbind finally but I thinking of something like this - not sure if that could lead to a solution


<snipped because it doesn't make any sense>

> I'm lost at this point

Clearly.

> getSymbols('SPY')
[1] "SPY"
> tail(SPY)
           SPY.Open SPY.High SPY.Low SPY.Close SPY.Volume SPY.Adjusted
2011-10-21   123.09   124.12  122.72    123.97  278872100       123.97
2011-10-24   124.17   125.80  124.06    125.49  202862400       125.49
2011-10-25   124.89   124.95  122.78    123.05  268433100       123.05
2011-10-26   124.35   124.77  122.21    124.30  288818700       124.30
2011-10-27   127.63   129.42  124.32    128.63  389788900       128.63
2011-10-28   128.00   128.85  127.80    128.60  225638800       128.60

>SPY<-rbind(SPY,xts(matrix(c(126.5,126.6,126.425,126.55,NA,NA),nrow=1),order.by=as.Date(Sys.Date())))

> tail(SPY)
           SPY.Open SPY.High SPY.Low SPY.Close SPY.Volume SPY.Adjusted
2011-10-24   124.17   125.80 124.060    125.49  202862400       125.49
2011-10-25   124.89   124.95 122.780    123.05  268433100       123.05
2011-10-26   124.35   124.77 122.210    124.30  288818700       124.30
2011-10-27   127.63   129.42 124.320    128.63  389788900       128.63
2011-10-28   128.00   128.85 127.800    128.60  225638800       128.60
2011-10-31   126.50   126.60 126.425    126.55         NA           NA

You don't need anything other than rbind and xts.

-- 
Brian


From David.Reiner at xrtrading.com  Mon Oct 31 14:33:09 2011
From: David.Reiner at xrtrading.com (David Reiner)
Date: Mon, 31 Oct 2011 08:33:09 -0500
Subject: [R-SIG-Finance] [SPAM] - Re: Skewness function for intraday
 data returndistribution - Email found in subject
In-Reply-To: <4EAE57C3.7050201@burns-stat.com>
References: <20111029204246.133910@gmx.net><CA+xi=qaFHpWwrLOj4USERnW4nqxXtPb0q1i9QNyCYa1=ADh+Gg@mail.gmail.com><CAMrz3D0dJLJCUKt7X1drdnR-J7ZKx7mr5hF8iScEHjrOJCNtZg@mail.gmail.com><CAMrz3D2=t8q6LJGise05BzqyhazwBoh5fCgKhX0DsF70ew1zdQ@mail.gmail.com><E8CC19FC66B5FB46B5511B6E8AE814185B3E7A3EEA@VAUNSW137.au.cbainet.com>
	<4EAE57C3.7050201@burns-stat.com>
Message-ID: <9DE405308A6AA24AA794B76282C6C00F0DEA7835E1@HQ-POST1>

Pretty sure the first one is a typo - if the last power is 3/2, they match up.
HTH,
-- David

-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Patrick Burns
Sent: Monday, October 31, 2011 3:10 AM
To: r-sig-finance at r-project.org
Subject: [SPAM] - Re: [R-SIG-Finance] Skewness function for intraday data returndistribution - Email found in subject

The skewness of c * X should be equal to the skewness of X.  If I'm reading the formulas correctly, that is true of the second one but not the first.

It would be interesting to hear if you find different results intraday than I did with daily data over a year:

http://www.portfolioprobe.com/2011/10/03/predictability-of-kurtosis-and-skewness-in-sp-constituents/

On 31/10/2011 05:18, Roupell, Darko wrote:
> Hi All,
>
> I have written a skew function to calculate stock skewness using intraday 5 min data. However, going through literature I have come across two very similar formulas, though they produce different skewness coefficient and wonder if anyone else has used similar formulas and know which one is the correct one.
>
> mq_skewness = function(data){
> data = dataformatc(data);
>    #returns midquote log returns as xts object
>    mq_ret = mq_return(data);
>    #returns midquote log returns as xts object
>    mq_ret_sqr = mq_ret^2;
>    #returns realized daily volatility as xts object
>    RVar=sum(  mq_ret_sqr)
>    n = length(mq_ret);
>
>    #first formula to measure skewness
>    mq_skewness = sqrt(n) * (sum(mq_ret^3))/sum(mq_ret_sqr)^(2/3)
>
>   # second formula to measure skewness
>    mq_skewness = sqrt(n) * sum((mq_ret/sqrt(RVar))^3)
>
>    return(mq_skewness);
> }
>
>    #first formula to measure skewness
>    mq_skewness = sqrt(n) * (sum(mq_ret^3))/sum(mq_ret_sqr)^(2/3)
> [1] 0.0003991095
>    # second formula to measure skewness
>    mq_skewness = sqrt(n) * sum((mq_ret/sqrt(RVar))^3) [1] 0.09759751 #
> this is output from base package function but this may not be
> appropriate to use for intraday data
> skewness(mq_ret)
> [1] 0.3035787
> __________________________________________________
> Darko Roupell
>
>
>
> ************** IMPORTANT MESSAGE ***************************** This
> e-mail message is intended only for the addressee(s) and contains
> information which may be confidential.
> If you are not the intended recipient please advise the sender by
> return email, do not use or disclose the contents, and delete the
> message and any attachments from your system. Unless specifically
> indicated, this email does not constitute formal advice or commitment by the sender or the Commonwealth Bank of Australia (ABN 48 123 123 124) or its subsidiaries.
> We can be contacted through our web site: commbank.com.au.
> If you no longer wish to receive commercial electronic messages from
> us, please reply to this e-mail by typing Unsubscribe in the subject line.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>

--
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe

_______________________________________________
R-SIG-Finance at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


This e-mail and any materials attached hereto, including, without limitation, all content hereof and thereof (collectively, "XR Content") are confidential and proprietary to XR Trading, LLC ("XR") and/or its affiliates, and are protected by intellectual property laws.  Without the prior written consent of XR, the XR Content may not (i) be disclosed to any third party or (ii) be reproduced or otherwise used by anyone other than current employees of XR or its affiliates, on behalf of XR or its affiliates.

THE XR CONTENT IS PROVIDED AS IS, WITHOUT REPRESENTATIONS OR WARRANTIES OF ANY KIND.  TO THE MAXIMUM EXTENT PERMISSIBLE UNDER APPLICABLE LAW, XR HEREBY DISCLAIMS ANY AND ALL WARRANTIES, EXPRESS AND IMPLIED, RELATING TO THE XR CONTENT, AND NEITHER XR NOR ANY OF ITS AFFILIATES SHALL IN ANY EVENT BE LIABLE FOR ANY DAMAGES OF ANY NATURE WHATSOEVER, INCLUDING, BUT NOT LIMITED TO, DIRECT, INDIRECT, CONSEQUENTIAL, SPECIAL AND PUNITIVE DAMAGES, LOSS OF PROFITS AND TRADING LOSSES, RESULTING FROM ANY PERSON'S USE OR RELIANCE UPON, OR INABILITY TO USE, ANY XR CONTENT, EVEN IF XR IS ADVISED OF THE POSSIBILITY OF SUCH DAMAGES OR IF SUCH DAMAGES WERE FORESEEABLE.


From gsee000 at gmail.com  Mon Oct 31 16:01:58 2011
From: gsee000 at gmail.com (G See)
Date: Mon, 31 Oct 2011 10:01:58 -0500
Subject: [R-SIG-Finance] Fwd: runMult instead of runSum
In-Reply-To: <20111030212512.237270@gmx.net>
References: <20111030212512.237270@gmx.net>
Message-ID: <CA+xi=qZacWqt5Z3KePfV7hHZStpwnssbpyi6xDGuieOQeGXu+g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111031/f0cd8f74/attachment.pl>

From gsee000 at gmail.com  Mon Oct 31 17:21:42 2011
From: gsee000 at gmail.com (G See)
Date: Mon, 31 Oct 2011 11:21:42 -0500
Subject: [R-SIG-Finance] apply Function Problem
In-Reply-To: <1320048698.96301.YahooMailNeo@web113111.mail.gq1.yahoo.com>
References: <1320048698.96301.YahooMailNeo@web113111.mail.gq1.yahoo.com>
Message-ID: <CA+xi=qaq1xh_-ZG74xLoPTFv2MJLJjUjBkpAnbfZQqmH68mq2A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111031/69ec4e68/attachment.pl>

From rharlow86 at gmail.com  Mon Oct 31 19:33:52 2011
From: rharlow86 at gmail.com (Robert Harlow)
Date: Mon, 31 Oct 2011 14:33:52 -0400
Subject: [R-SIG-Finance] rugarch: solnp vs nlminb default control parameters
Message-ID: <CAHdfS95sRDxo4Xj74PmkfYP_wxCUJ3gvKZMSDU8Bq06rEkhEVw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111031/d5db5507/attachment.pl>

From alexios at 4dscape.com  Mon Oct 31 19:51:32 2011
From: alexios at 4dscape.com (alexios)
Date: Mon, 31 Oct 2011 18:51:32 +0000
Subject: [R-SIG-Finance] rugarch: solnp vs nlminb default control
	parameters
In-Reply-To: <CAHdfS95sRDxo4Xj74PmkfYP_wxCUJ3gvKZMSDU8Bq06rEkhEVw@mail.gmail.com>
References: <CAHdfS95sRDxo4Xj74PmkfYP_wxCUJ3gvKZMSDU8Bq06rEkhEVw@mail.gmail.com>
Message-ID: <4EAEEE34.6070307@4dscape.com>

Hi Bob,

Thanks for your feedback.

This is definitely related to the handling (and scaling) of external 
regressor in variance and their constraint bounds when using the solnp 
solver. The following works:

# 1. Avoid the external regressors:
s2.spec <- ugarchspec(variance.model = list(model = "sGARCH", garchOrder 
=c(1,1)), mean.model = list(armaOrder = c(0,0), include.mean = FALSE))
fit3 = ugarchfit(s2.spec, dat, fit.control = list(scale=1))

# 2. Keep External Regressor and increase the tolerance
fit2 <- ugarchfit(s.spec, data = dat, solver = "solnp", solver.control =
list(trace = TRUE, tol=1e-12, delta=1e-11))

In a future release I might allow user adjustment of the bounds since 
the external regressors in both mean and variance equations do sometimes 
cause some problems.

HTH.

Best,

Alexios

On 31/10/2011 18:33, Robert Harlow wrote:
> Hi,
>       First off, this is a fantastic package, so very well done Alexios.  I
> am going to use the external regressor option in the rugarch package.  In
> order to do double check that everything is working properly, I decided to
> fit a standard garch(0,1) where i use the lag of the residual as my
> external regressor (this is the same as fitting a garch(1,1) model) rather
> than explicitly expressing the order in ugarchspec.  As the following code
> shows, there are different results depending on whether you use solnp or
> nlminb as the solver.  I suspect this has to do with the default control
> parameters set for solnp, as it appears solnp gets stuck near the starting
> parameters.  I don't think I have enough expertise to recommend different
> default starting parameters for the solnp solver option, but it is an
> interesting issue nonetheless.
> Below is some sample code for the sp500ret dataset.
> Thanks,
> -Bob
>
> library(rugarch)
> data(sp500ret)
> dat<- as.numeric(sp500ret[,1])
> dat<- dat - mean(dat)
> vx<- c(NA, dat[-length(dat)]^2)
> dat<- dat[-1]
> vx<- vx[-1]
> s.spec<- ugarchspec(variance.model = list(model = "sGARCH", garchOrder =
> c(0,1), external.regressors = as.matrix(vx)), mean.model = list(armaOrder =
> c(0,0), include.mean = FALSE))
> fit1<- ugarchfit(s.spec, data = dat, solver = "nlminb", solver.control =
> list(trace = TRUE))
> fit2<- ugarchfit(s.spec, data = dat, solver = "solnp", solver.control =
> list(trace = TRUE))
> par(mfrow = c(2,1))
> plot(as.ts(sigma(fit1)))
> plot(as.ts(sigma(fit2)))
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>


From fin_engr at hotmail.com  Wed Nov  2 00:59:22 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Tue, 1 Nov 2011 19:59:22 -0400
Subject: [R-SIG-Finance] GBSVolatility in fOptions
Message-ID: <COL118-W138B858AC8FB49A21AB44BEFD70@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111101/73e5ad28/attachment.pl>

From josh.m.ulrich at gmail.com  Wed Nov  2 01:48:11 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 1 Nov 2011 19:48:11 -0500
Subject: [R-SIG-Finance] GBSVolatility in fOptions
In-Reply-To: <COL118-W138B858AC8FB49A21AB44BEFD70@phx.gbl>
References: <COL118-W138B858AC8FB49A21AB44BEFD70@phx.gbl>
Message-ID: <CAPPM_gQL-zou2AMefxO1bhdO9PQEzzc_Ki8ZKKuX9qSaVKnHCQ@mail.gmail.com>

You have the source code.  Take a look:

GBSVolatility = function(price, TypeFlag = c("c", "p"), S, X, Time, r, b,
tol = .Machine$double.eps, maxiter = 10000)
{
    TypeFlag = TypeFlag[1]
    volatility = uniroot(.fGBSVolatility, interval = c(-10,10), price = price,
        TypeFlag = TypeFlag, S = S, X = X, Time = Time, r = r, b = b,
        tol = tol, maxiter = maxiter)$root
   volatility
}

There you go.  Now you can read ?uniroot to see what it does.
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com



On Tue, Nov 1, 2011 at 6:59 PM, financial engineer <fin_engr at hotmail.com> wrote:
>
> hi,
> Can anyone shed some light on which root-finding algorithm the GBSVolatility function uses - is it the Newton method?
> thanks,
> BA
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From fin_engr at hotmail.com  Wed Nov  2 01:51:13 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Tue, 1 Nov 2011 20:51:13 -0400
Subject: [R-SIG-Finance] GBSVolatility in fOptions
In-Reply-To: <CAPPM_gQL-zou2AMefxO1bhdO9PQEzzc_Ki8ZKKuX9qSaVKnHCQ@mail.gmail.com>
References: <COL118-W138B858AC8FB49A21AB44BEFD70@phx.gbl>,
	<CAPPM_gQL-zou2AMefxO1bhdO9PQEzzc_Ki8ZKKuX9qSaVKnHCQ@mail.gmail.com>
Message-ID: <COL118-W43D9A30CC744B7C18F32AEEFD40@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111101/f6c13803/attachment.pl>

From fin_engr at hotmail.com  Wed Nov  2 02:03:36 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Tue, 1 Nov 2011 21:03:36 -0400
Subject: [R-SIG-Finance] GBSVolatility in fOptions
In-Reply-To: <CAPPM_gQL-zou2AMefxO1bhdO9PQEzzc_Ki8ZKKuX9qSaVKnHCQ@mail.gmail.com>
References: <COL118-W138B858AC8FB49A21AB44BEFD70@phx.gbl>,
	<CAPPM_gQL-zou2AMefxO1bhdO9PQEzzc_Ki8ZKKuX9qSaVKnHCQ@mail.gmail.com>
Message-ID: <COL118-W23ABB3AC01A87680073305EFD40@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111101/4fa226c6/attachment.pl>

From josh.m.ulrich at gmail.com  Wed Nov  2 04:20:55 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 1 Nov 2011 22:20:55 -0500
Subject: [R-SIG-Finance] GBSVolatility in fOptions
In-Reply-To: <COL118-W23ABB3AC01A87680073305EFD40@phx.gbl>
References: <COL118-W138B858AC8FB49A21AB44BEFD70@phx.gbl>
	<CAPPM_gQL-zou2AMefxO1bhdO9PQEzzc_Ki8ZKKuX9qSaVKnHCQ@mail.gmail.com>
	<COL118-W23ABB3AC01A87680073305EFD40@phx.gbl>
Message-ID: <CAPPM_gSphiqQJpNYvawc7cd-Fi0+AzDxA1VygG_2Y07dKq_S+g@mail.gmail.com>

BA,

.fGBSVolatility is the objective function.  You asked about the
root-finding algorithm.  Please see ?uniroot; among other things, it
says:

     The function uses Fortran subroutine 'zeroin' (from Netlib)
     based on algorithms given in the reference below.  They assume a
     continuous function (which then is known to have at least one root
     in the interval).

Best,
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com



On Tue, Nov 1, 2011 at 8:03 PM, financial engineer <fin_engr at hotmail.com> wrote:
> going through the?uniroot, it seems like the crux is in .fGBSVolatility
> where the function is defined, unless I am?missing the point.?apologies if I
> am .... perhaps the more relevant question would have been me requesting
> reference to .fGBSVolatility....
>
>> From: josh.m.ulrich at gmail.com
>> Date: Tue, 1 Nov 2011 19:48:11 -0500
>> Subject: Re: [R-SIG-Finance] GBSVolatility in fOptions
>> To: fin_engr at hotmail.com
>> CC: r-sig-finance at r-project.org
>>
>> You have the source code. Take a look:
>>
>> GBSVolatility = function(price, TypeFlag = c("c", "p"), S, X, Time, r, b,
>> tol = .Machine$double.eps, maxiter = 10000)
>> {
>> TypeFlag = TypeFlag[1]
>> volatility = uniroot(.fGBSVolatility, interval = c(-10,10), price = price,
>> TypeFlag = TypeFlag, S = S, X = X, Time = Time, r = r, b = b,
>> tol = tol, maxiter = maxiter)$root
>> volatility
>> }
>>
>> There you go. Now you can read ?uniroot to see what it does.
>> --
>> Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com
>>
>>
>>
>> On Tue, Nov 1, 2011 at 6:59 PM, financial engineer <fin_engr at hotmail.com>
>> wrote:
>> >
>> > hi,
>> > Can anyone shed some light on which root-finding algorithm the
>> > GBSVolatility function uses - is it the Newton method?
>> > thanks,
>> > BA
>> >
>> > ? ? ? ?[[alternative HTML version deleted]]
>> >
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions
>> > should go.
>> >
>


From dupuy.dangeac at free.fr  Wed Nov  2 21:27:49 2011
From: dupuy.dangeac at free.fr (burcy)
Date: Wed, 2 Nov 2011 13:27:49 -0700 (PDT)
Subject: [R-SIG-Finance] Quanstrat for R.2-14
Message-ID: <1320265669068-3983068.post@n4.nabble.com>

Hello 
I think there is a problem with the Quanstrat package and the new version
R.2-14 (with Windows)
burcy

--
View this message in context: http://r.789695.n4.nabble.com/Quanstrat-for-R-2-14-tp3983068p3983068.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From Bauermartin at gmx.at  Wed Nov  2 21:30:25 2011
From: Bauermartin at gmx.at (Martin Bauer)
Date: Wed, 02 Nov 2011 21:30:25 +0100
Subject: [R-SIG-Finance] (no subject)
Message-ID: <20111102203025.232780@gmx.net>

Hi,

I was trying to code this  

http://econompicdata.blogspot.com/2011/10/emerging-market-rotation-strategy.html

in R

# EM Rotation model
library(quantmod)
library(PerformanceAnalytics)
indexes<-c("SPY","EEM","VWO")
sym=getSymbols(indexes,from="2000-09-15",to=Sys.Date())
sym1=getSymbols("BAMLEMCBPITRIV",from="2000-09-15",to=Sys.Date(),src="FRED")
EEM.m=to.monthly(Ad(EEM))
EEM.m=EEM.m[,4]
BA.m=to.monthly(BAMLEMCBPITRIV)
BA.m=(BA.m[,4])
b=na.omit(merge(EEM.m,BA.m))
EEM.m=b[,1]
BA.m=b[,2]
seem=SMA(EEM.m,10)
long=ifelse(EEM.m>seem,1,0)
short=ifelse(EEM.m<seem,1,0)
colnames(long)=c("LONG EEM")
colnames(short)=c("LONG Bonds")
retup=lag(long,k=1)*ROC(EEM.m,type="discrete",n=1)
retdown=lag(short,k=1)*ROC(BA.m,type="discrete",n=1)
ret=retup+retdown
ret=ret[1:NROW(ret)-1,]
re=merge(ret,ROC(EEM.m,type="discrete",n=1))
colnames(re)=c("TAA","EEM")
charts.PerformanceSummary(re,ylog=TRUE,main="TAA")
Return.annualized(ret)
SharpeRatio.annualized(ret)
tail(ret)
table.Drawdowns(ret, top=10)
table.DownsideRisk(ret)

but at this point > 
Return.annualized(ret)
I get the following error

Error in FUN(newX[, i], ...) : 
  'R' needs to be timeBased or xtsible, or scale must be specified.

I have no clue why .....

What is missing ?

Thanks in advance

Martin
--


From josh.m.ulrich at gmail.com  Wed Nov  2 21:50:38 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Wed, 2 Nov 2011 15:50:38 -0500
Subject: [R-SIG-Finance] Quanstrat for R.2-14
In-Reply-To: <1320265669068-3983068.post@n4.nabble.com>
References: <1320265669068-3983068.post@n4.nabble.com>
Message-ID: <CAPPM_gSAgzLDAFjPBF2bmcQ+78T47xhR=7o4p8OXtCcLgfo5zw@mail.gmail.com>

Aside from providing the OS and R version, your message is vague and
not helpful.  What version of quantstrat are you using and (more
importantly) what is the problem?

I've been using the latest build of quantstrat with R-2.14.0 on 64-bit
Ubuntu without incident.
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com



On Wed, Nov 2, 2011 at 3:27 PM, burcy <dupuy.dangeac at free.fr> wrote:
> Hello
> I think there is a problem with the Quanstrat package and the new version
> R.2-14 (with Windows)
> burcy
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Quanstrat-for-R-2-14-tp3983068p3983068.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From josh.m.ulrich at gmail.com  Wed Nov  2 22:10:10 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Wed, 2 Nov 2011 16:10:10 -0500
Subject: [R-SIG-Finance] (no subject)
In-Reply-To: <20111102203025.232780@gmx.net>
References: <20111102203025.232780@gmx.net>
Message-ID: <CAPPM_gS5T1S3POh7u4mLAzTgWDcP_f1s74ZQ+N3-JO+GoOnZ+A@mail.gmail.com>

I didn't dig too much, but it looks like some of the
PerformanceAnalytics functions may not play well with the yearmon
index class.  Keeping the index as a Date works for me.  You can do
that by setting the indexAt argument of to.monthly:

EEM.m=to.monthly(Ad(EEM),indexAt="lastof")
BA.m=to.monthly(BAMLEMCBPITRIV,indexAt="lastof")

HTH,
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com



On Wed, Nov 2, 2011 at 3:30 PM, Martin Bauer <Bauermartin at gmx.at> wrote:
> Hi,
>
> I was trying to code this
>
> http://econompicdata.blogspot.com/2011/10/emerging-market-rotation-strategy.html
>
> in R
>
> # EM Rotation model
> library(quantmod)
> library(PerformanceAnalytics)
> indexes<-c("SPY","EEM","VWO")
> sym=getSymbols(indexes,from="2000-09-15",to=Sys.Date())
> sym1=getSymbols("BAMLEMCBPITRIV",from="2000-09-15",to=Sys.Date(),src="FRED")
> EEM.m=to.monthly(Ad(EEM))
> EEM.m=EEM.m[,4]
> BA.m=to.monthly(BAMLEMCBPITRIV)
> BA.m=(BA.m[,4])
> b=na.omit(merge(EEM.m,BA.m))
> EEM.m=b[,1]
> BA.m=b[,2]
> seem=SMA(EEM.m,10)
> long=ifelse(EEM.m>seem,1,0)
> short=ifelse(EEM.m<seem,1,0)
> colnames(long)=c("LONG EEM")
> colnames(short)=c("LONG Bonds")
> retup=lag(long,k=1)*ROC(EEM.m,type="discrete",n=1)
> retdown=lag(short,k=1)*ROC(BA.m,type="discrete",n=1)
> ret=retup+retdown
> ret=ret[1:NROW(ret)-1,]
> re=merge(ret,ROC(EEM.m,type="discrete",n=1))
> colnames(re)=c("TAA","EEM")
> charts.PerformanceSummary(re,ylog=TRUE,main="TAA")
> Return.annualized(ret)
> SharpeRatio.annualized(ret)
> tail(ret)
> table.Drawdowns(ret, top=10)
> table.DownsideRisk(ret)
>
> but at this point >
> Return.annualized(ret)
> I get the following error
>
> Error in FUN(newX[, i], ...) :
> ?'R' needs to be timeBased or xtsible, or scale must be specified.
>
> I have no clue why .....
>
> What is missing ?
>
> Thanks in advance
>
> Martin
> --
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From dupuy.dangeac at free.fr  Thu Nov  3 09:33:54 2011
From: dupuy.dangeac at free.fr (burcy)
Date: Thu, 3 Nov 2011 01:33:54 -0700 (PDT)
Subject: [R-SIG-Finance] Quanstrat for R.2-14
In-Reply-To: <1320265669068-3983068.post@n4.nabble.com>
References: <1320265669068-3983068.post@n4.nabble.com>
Message-ID: <1320309234000-3984676.post@n4.nabble.com>

Joshua 
thank you for the answer,you are right
I used quanstrat version 0.5.6 available for R.2-13.2.
To day there is no version of Quanstrat, available for Windows and R 2-14 on
R-Forge.
version 0.5.6 don't run on R.2-14
some function as initOrders are not recogniced...
burcy

--
View this message in context: http://r.789695.n4.nabble.com/Quanstrat-for-R-2-14-tp3983068p3984676.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Thu Nov  3 11:44:13 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 03 Nov 2011 05:44:13 -0500
Subject: [R-SIG-Finance] Quanstrat for R.2-14
In-Reply-To: <1320309234000-3984676.post@n4.nabble.com>
References: <1320265669068-3983068.post@n4.nabble.com>
	<1320309234000-3984676.post@n4.nabble.com>
Message-ID: <0b22384d-3458-4414-8ff2-c50826ef4741@email.android.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111103/ec9d0168/attachment.pl>

From gsee000 at gmail.com  Thu Nov  3 17:01:56 2011
From: gsee000 at gmail.com (G See)
Date: Thu, 3 Nov 2011 11:01:56 -0500
Subject: [R-SIG-Finance] expanding xts object - adding a day
In-Reply-To: <1320066607.12096.105.camel@brian-rcg>
References: <20111031125811.279800@gmx.net>
	<1320066607.12096.105.camel@brian-rcg>
Message-ID: <CA+xi=qZW_TE1R1a1PFBDt+SHaHheB0a5R5+PFtK9tocbSx_+aw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111103/3ec182ca/attachment.pl>

From dupuy.dangeac at free.fr  Thu Nov  3 19:19:44 2011
From: dupuy.dangeac at free.fr (burcy)
Date: Thu, 3 Nov 2011 11:19:44 -0700 (PDT)
Subject: [R-SIG-Finance] Quanstrat for R.2-14
In-Reply-To: <0b22384d-3458-4414-8ff2-c50826ef4741@email.android.com>
References: <1320265669068-3983068.post@n4.nabble.com>
	<1320309234000-3984676.post@n4.nabble.com>
	<0b22384d-3458-4414-8ff2-c50826ef4741@email.android.com>
Message-ID: <1320344384094-3987207.post@n4.nabble.com>

Braverock
thanks for your comments

this is my sessionInfo
> sessionInfo()
R version 2.14.0 (2011-10-31)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=French_France.1252  LC_CTYPE=French_France.1252   
[3] LC_MONETARY=French_France.1252 LC_NUMERIC=C                  
[5] LC_TIME=French_France.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] PerformanceAnalytics_1.0.3.3 blotter_0.8                 
[3] FinancialInstrument_0.4.3    quantmod_0.3-17             
[5] Defaults_1.1-1               TTR_0.21-0                  
[7] xts_0.8-2                    zoo_1.7-5                   

loaded via a namespace (and not attached):
[1] grid_2.14.0      lattice_0.20-0   quantstrat_0.5.6 tools_2.14.0    
> 
I don't see any special reasons that previous version of quantstrat are not
running with last issue of R
I try to run demos of quantstrat,and they failed.

burcy


--
View this message in context: http://r.789695.n4.nabble.com/Quanstrat-for-R-2-14-tp3983068p3987207.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From josh.m.ulrich at gmail.com  Thu Nov  3 19:57:52 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Thu, 3 Nov 2011 13:57:52 -0500
Subject: [R-SIG-Finance] Quanstrat for R.2-14
In-Reply-To: <1320344384094-3987207.post@n4.nabble.com>
References: <1320265669068-3983068.post@n4.nabble.com>
	<1320309234000-3984676.post@n4.nabble.com>
	<0b22384d-3458-4414-8ff2-c50826ef4741@email.android.com>
	<1320344384094-3987207.post@n4.nabble.com>
Message-ID: <CAPPM_gTH_1G9YPKDOs02JPX-9PYbg-v_xWERYUFdLbwatDoThg@mail.gmail.com>

On Thu, Nov 3, 2011 at 1:19 PM, burcy <dupuy.dangeac at free.fr> wrote:
> Braverock
> thanks for your comments
>
> this is my sessionInfo
>> sessionInfo()
> R version 2.14.0 (2011-10-31)
> Platform: i386-pc-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=French_France.1252 ?LC_CTYPE=French_France.1252
> [3] LC_MONETARY=French_France.1252 LC_NUMERIC=C
> [5] LC_TIME=French_France.1252
>
> attached base packages:
> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>
> other attached packages:
> [1] PerformanceAnalytics_1.0.3.3 blotter_0.8
> [3] FinancialInstrument_0.4.3 ? ?quantmod_0.3-17
> [5] Defaults_1.1-1 ? ? ? ? ? ? ? TTR_0.21-0
> [7] xts_0.8-2 ? ? ? ? ? ? ? ? ? ?zoo_1.7-5
>
> loaded via a namespace (and not attached):
> [1] grid_2.14.0 ? ? ?lattice_0.20-0 ? quantstrat_0.5.6 tools_2.14.0
>>
> I don't see any special reasons that previous version of quantstrat are not
> running with last issue of R
> I try to run demos of quantstrat,and they failed.
>
> burcy
>
>
I just installed R-2.14.0 on a 32-bit Windows XP machine with the
latest quantstrat, blotter, and FinancialInstrument from R-Forge.  I
was able to run the 'faber' and 'bbands' demos without error.

This indicates there is nothing wrong with the packages.  It's likely
your installation is broken; this mailing list is not the place to
discuss broken installations.

When you ask for help note that "and they failed" is not helpful.  As
Brian said, "show exactly what you tried, and exactly the error you
receive."  It would have been useful to provide the _specific_ demos
you tried to run and the _exact_ error you received.

--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com


From wotuzu17 at gmail.com  Thu Nov  3 20:05:05 2011
From: wotuzu17 at gmail.com (Andreas Voellenklee)
Date: Thu, 3 Nov 2011 20:05:05 +0100
Subject: [R-SIG-Finance] quantmod package documentation
Message-ID: <CAKC0BhkgMf+px+aHb9VG25SP-CbeAC=M4454-ikYbJkcCHYaAg@mail.gmail.com>

Hello,

I have some questions about the quantmod package documentation and the
function getSymbols.

1) altough I have quantmod_0.3-17 installed, the documentation says
it's version 0.3-8 from 2007-11-20. Maybe someone of the developer
group fix this?

2) I've seen code that uses a undocumented parameter adjust=TRUE in
getSymbols. I thought this would be a convenient way to retrieve and
adjust prices in one line of code, but the result is somewhat
surprising.

Let's compare these three different snippets:

Version 1:
> getSymbols("C") # retrieve unadjusted prices
[1] "C"
> head(C)
           C.Open C.High C.Low C.Close C.Volume C.Adjusted
2007-01-03  55.66  56.28 54.72   55.25  2282100     499.32
2007-01-04  55.25  56.15 54.72   55.06  1658700     497.60
2007-01-05  55.00  55.05 54.46   54.77  1317900     494.98
2007-01-08  54.60  55.15 54.30   55.05  1236900     497.51
2007-01-09  55.01  55.15 54.19   54.57  1963000     493.17
2007-01-10  54.27  54.49 53.95   54.13  1744900     489.20

Version 2:
> getSymbols("C", adjust=TRUE) # retrieve adjusted prices
[1] "C"
> head(C)
             C.Open   C.High    C.Low  C.Close C.Volume C.Adjusted
2007-01-03 191.1241 193.2530 187.8963 189.7162  6646032     499.32
2007-01-04 189.7162 192.8066 187.8963 189.0638  4830539     497.60
2007-01-05 188.8578 189.0295 187.0036 188.0680  3838046     494.98
2007-01-08 187.4843 189.3729 186.4542 189.0295  3602155     497.51
2007-01-09 188.8921 189.3729 186.0764 187.3813  5716735     493.17
2007-01-10 186.3511 187.1066 185.2523 185.8704  5081575     489.20

Version 3:
> getSymbols("C") # retrieve unadjusted prices
> assign("C", adjustOHLC(get("C"),use.Adjusted=TRUE)) # adjust prices using quantmod::adjustOHLC
> head(C)
             C.Open   C.High    C.Low C.Close C.Volume C.Adjusted
2007-01-03 503.0254 508.6286 494.5301  499.32  2282100     499.32
2007-01-04 499.3171 507.4508 494.5273  497.60  1658700     497.60
2007-01-05 497.0586 497.5105 492.1784  494.98  1317900     494.98
2007-01-08 493.4432 498.4137 490.7319  497.51  1236900     497.51
2007-01-09 497.1464 498.4117 489.7358  493.17  1963000     493.17
2007-01-10 490.4653 492.4535 487.5732  489.20  1744900     489.20


Does anybody know what the parameter adjust in Version 2 is supposed
to adjust? And why it's not documented?

Thanks,
Andreas


From jeffrey.ryan at lemnica.com  Thu Nov  3 20:27:40 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Thu, 3 Nov 2011 14:27:40 -0500
Subject: [R-SIG-Finance] quantmod package documentation
In-Reply-To: <CAKC0BhkgMf+px+aHb9VG25SP-CbeAC=M4454-ikYbJkcCHYaAg@mail.gmail.com>
References: <CAKC0BhkgMf+px+aHb9VG25SP-CbeAC=M4454-ikYbJkcCHYaAg@mail.gmail.com>
Message-ID: <CABDUZc8sJyhzuU7QFbHmxSyHxmOYhrZ7ewpcG=2nHUOTYutcLQ@mail.gmail.com>

On Thu, Nov 3, 2011 at 2:05 PM, Andreas Voellenklee <wotuzu17 at gmail.com> wrote:
> Hello,
>
> I have some questions about the quantmod package documentation and the
> function getSymbols.
>
> 1) altough I have quantmod_0.3-17 installed, the documentation says
> it's version 0.3-8 from 2007-11-20. Maybe someone of the developer
> group fix this?

Its been like this for years, somewhere between a joke and don't fix
it lest it's broke.

Kidding aside, I have committed a rev 572 that addresses.  Any
breakages are not my fault ;-)
>
> 2) I've seen code that uses a undocumented parameter adjust=TRUE in
> getSymbols. I thought this would be a convenient way to retrieve and
> adjust prices in one line of code, but the result is somewhat
> surprising.
>
> Let's compare these three different snippets:
>
> Version 1:
>> getSymbols("C") # retrieve unadjusted prices
> [1] "C"
>> head(C)
> ? ? ? ? ? C.Open C.High C.Low C.Close C.Volume C.Adjusted
> 2007-01-03 ?55.66 ?56.28 54.72 ? 55.25 ?2282100 ? ? 499.32
> 2007-01-04 ?55.25 ?56.15 54.72 ? 55.06 ?1658700 ? ? 497.60
> 2007-01-05 ?55.00 ?55.05 54.46 ? 54.77 ?1317900 ? ? 494.98
> 2007-01-08 ?54.60 ?55.15 54.30 ? 55.05 ?1236900 ? ? 497.51
> 2007-01-09 ?55.01 ?55.15 54.19 ? 54.57 ?1963000 ? ? 493.17
> 2007-01-10 ?54.27 ?54.49 53.95 ? 54.13 ?1744900 ? ? 489.20
>
> Version 2:
>> getSymbols("C", adjust=TRUE) # retrieve adjusted prices
> [1] "C"
>> head(C)
> ? ? ? ? ? ? C.Open ? C.High ? ?C.Low ?C.Close C.Volume C.Adjusted
> 2007-01-03 191.1241 193.2530 187.8963 189.7162 ?6646032 ? ? 499.32
> 2007-01-04 189.7162 192.8066 187.8963 189.0638 ?4830539 ? ? 497.60
> 2007-01-05 188.8578 189.0295 187.0036 188.0680 ?3838046 ? ? 494.98
> 2007-01-08 187.4843 189.3729 186.4542 189.0295 ?3602155 ? ? 497.51
> 2007-01-09 188.8921 189.3729 186.0764 187.3813 ?5716735 ? ? 493.17
> 2007-01-10 186.3511 187.1066 185.2523 185.8704 ?5081575 ? ? 489.20
>
> Version 3:
>> getSymbols("C") # retrieve unadjusted prices
>> assign("C", adjustOHLC(get("C"),use.Adjusted=TRUE)) # adjust prices using quantmod::adjustOHLC
>> head(C)
> ? ? ? ? ? ? C.Open ? C.High ? ?C.Low C.Close C.Volume C.Adjusted
> 2007-01-03 503.0254 508.6286 494.5301 ?499.32 ?2282100 ? ? 499.32
> 2007-01-04 499.3171 507.4508 494.5273 ?497.60 ?1658700 ? ? 497.60
> 2007-01-05 497.0586 497.5105 492.1784 ?494.98 ?1317900 ? ? 494.98
> 2007-01-08 493.4432 498.4137 490.7319 ?497.51 ?1236900 ? ? 497.51
> 2007-01-09 497.1464 498.4117 489.7358 ?493.17 ?1963000 ? ? 493.17
> 2007-01-10 490.4653 492.4535 487.5732 ?489.20 ?1744900 ? ? 489.20
>

>
> Does anybody know what the parameter adjust in Version 2 is supposed
> to adjust? And why it's not documented?
>

It is meant to adjust.  The issue was exactly _where_ to document - as
it would be in getSymbols.yahoo, but the way the functions are called
it isn't technically a param to that function:

> args(getSymbols.yahoo)
function (Symbols, env, return.class = "xts", index.class = "Date",
    from = "2007-01-01", to = Sys.Date(), ...)

Can't really document something that isn't there ;-)

That said, I'll think about how to do that without breaking code (see
my comment above about 'not being broken')

Why it isn't working on "C" is odd.  My thinking is that it has
something to do with C being a function in R.  Trying on MSFT shows it
does indeed work:

> getSymbols("MSFT")
[1] "MSFT"
> head(MSFT)
           MSFT.Open MSFT.High MSFT.Low MSFT.Close MSFT.Volume MSFT.Adjusted
2007-01-03     29.91     30.25    29.40      29.86    76935100         27.17
2007-01-04     29.70     29.97    29.44      29.81    45774500         27.13
2007-01-05     29.63     29.75    29.45      29.64    44607200         26.97
2007-01-08     29.65     30.10    29.53      29.93    50220200         27.24
2007-01-09     30.00     30.18    29.73      29.96    44636600         27.26
2007-01-10     29.80     29.89    29.43      29.66    55017400         26.99
> getSymbols("MSFT", adjust=TRUE)
[1] "MSFT"
> head(MSFT)
           MSFT.Open MSFT.High MSFT.Low MSFT.Close MSFT.Volume MSFT.Adjusted
2007-01-03  27.21858  27.52798 26.75447   27.17308    84542580         27.17
2007-01-04  27.02748  27.27318 26.79087   27.12758    50300764         27.13
2007-01-05  26.96377  27.07298 26.79997   26.97287    49018039         26.97
2007-01-08  26.98197  27.39148 26.87277   27.23678    55186063         27.24
2007-01-09  27.30048  27.46428 27.05478   27.26408    49050346         27.26
2007-01-10  27.11848  27.20038 26.78177   26.99107    60457618         26.99

Thanks for the email, question, and 'documenting' adjust for us.  I'll
look into the C case.

Jeff

> Thanks,
> Andreas
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From daniel.cegielka at gmail.com  Thu Nov  3 20:35:09 2011
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Thu, 3 Nov 2011 20:35:09 +0100
Subject: [R-SIG-Finance] quantmod package documentation
In-Reply-To: <CAKC0BhkgMf+px+aHb9VG25SP-CbeAC=M4454-ikYbJkcCHYaAg@mail.gmail.com>
References: <CAKC0BhkgMf+px+aHb9VG25SP-CbeAC=M4454-ikYbJkcCHYaAg@mail.gmail.com>
Message-ID: <CAPLrYES2gsMM=oBr4uWBbKFvDZoKgWbaH5yabjXJ=mypVrk7TQ@mail.gmail.com>

2011/11/3 Andreas Voellenklee <wotuzu17 at gmail.com>:
> Hello,
>
> I have some questions about the quantmod package documentation and the
> function getSymbols.
>
> 1) altough I have quantmod_0.3-17 installed, the documentation says
> it's version 0.3-8 from 2007-11-20. Maybe someone of the developer
> group fix this?
>
> 2) I've seen code that uses a undocumented parameter adjust=TRUE in
> getSymbols. I thought this would be a convenient way to retrieve and
> adjust prices in one line of code, but the result is somewhat
> surprising.
>
> Let's compare these three different snippets:
>
> Version 1:
>> getSymbols("C") # retrieve unadjusted prices
> [1] "C"
>> head(C)
> ? ? ? ? ? C.Open C.High C.Low C.Close C.Volume C.Adjusted
> 2007-01-03 ?55.66 ?56.28 54.72 ? 55.25 ?2282100 ? ? 499.32
> 2007-01-04 ?55.25 ?56.15 54.72 ? 55.06 ?1658700 ? ? 497.60
> 2007-01-05 ?55.00 ?55.05 54.46 ? 54.77 ?1317900 ? ? 494.98
> 2007-01-08 ?54.60 ?55.15 54.30 ? 55.05 ?1236900 ? ? 497.51
> 2007-01-09 ?55.01 ?55.15 54.19 ? 54.57 ?1963000 ? ? 493.17
> 2007-01-10 ?54.27 ?54.49 53.95 ? 54.13 ?1744900 ? ? 489.20
>
> Version 2:
>> getSymbols("C", adjust=TRUE) # retrieve adjusted prices
> [1] "C"
>> head(C)
> ? ? ? ? ? ? C.Open ? C.High ? ?C.Low ?C.Close C.Volume C.Adjusted
> 2007-01-03 191.1241 193.2530 187.8963 189.7162 ?6646032 ? ? 499.32
> 2007-01-04 189.7162 192.8066 187.8963 189.0638 ?4830539 ? ? 497.60
> 2007-01-05 188.8578 189.0295 187.0036 188.0680 ?3838046 ? ? 494.98
> 2007-01-08 187.4843 189.3729 186.4542 189.0295 ?3602155 ? ? 497.51
> 2007-01-09 188.8921 189.3729 186.0764 187.3813 ?5716735 ? ? 493.17
> 2007-01-10 186.3511 187.1066 185.2523 185.8704 ?5081575 ? ? 489.20
>
> Version 3:
>> getSymbols("C") # retrieve unadjusted prices
>> assign("C", adjustOHLC(get("C"),use.Adjusted=TRUE)) # adjust prices using quantmod::adjustOHLC
>> head(C)
> ? ? ? ? ? ? C.Open ? C.High ? ?C.Low C.Close C.Volume C.Adjusted
> 2007-01-03 503.0254 508.6286 494.5301 ?499.32 ?2282100 ? ? 499.32
> 2007-01-04 499.3171 507.4508 494.5273 ?497.60 ?1658700 ? ? 497.60
> 2007-01-05 497.0586 497.5105 492.1784 ?494.98 ?1317900 ? ? 494.98
> 2007-01-08 493.4432 498.4137 490.7319 ?497.51 ?1236900 ? ? 497.51
> 2007-01-09 497.1464 498.4117 489.7358 ?493.17 ?1963000 ? ? 493.17
> 2007-01-10 490.4653 492.4535 487.5732 ?489.20 ?1744900 ? ? 489.20
>
>
> Does anybody know what the parameter adjust in Version 2 is supposed
> to adjust? And why it's not documented?

Adjust is this price adjustment due to dividends and splits etc.

https://r-forge.r-project.org/scm/viewvc.php/pkg/man/adjustOHLC.Rd?view=markup&revision=570&root=quantmod

daniel

>
> Thanks,
> Andreas
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From dupuy.dangeac at free.fr  Fri Nov  4 13:57:40 2011
From: dupuy.dangeac at free.fr (burcy)
Date: Fri, 4 Nov 2011 05:57:40 -0700 (PDT)
Subject: [R-SIG-Finance] Quanstrat for R.2-14
In-Reply-To: <CAPPM_gTH_1G9YPKDOs02JPX-9PYbg-v_xWERYUFdLbwatDoThg@mail.gmail.com>
References: <1320265669068-3983068.post@n4.nabble.com>
	<1320309234000-3984676.post@n4.nabble.com>
	<0b22384d-3458-4414-8ff2-c50826ef4741@email.android.com>
	<1320344384094-3987207.post@n4.nabble.com>
	<CAPPM_gTH_1G9YPKDOs02JPX-9PYbg-v_xWERYUFdLbwatDoThg@mail.gmail.com>
Message-ID: <1320411460455-3989977.post@n4.nabble.com>

OK Joshua 
I intend to give more precise information 

I ran the different demo of quantstrat
and the results are :

for 
quantstrat::pair trade
quantstrat::macd
quantstrat::faberMC
quantstrat::bbands


there is this message:
'error in eval.with.vis(exp,envir,enclos):impossible to find function
"initOrders" '

for 
quantstrat::faber

demo starts and stop at:
< initOrders(porfolio="faber",initDate=initDate)

for 
quantstrat::parameter test

message:impossible to find function"getParameterTable"

quantstrat::rsi

message:'impossible to find function "strategy"

my sessioninfo () identical to previous post 

burcy

--
View this message in context: http://r.789695.n4.nabble.com/Quanstrat-for-R-2-14-tp3983068p3989977.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From matthewcleggphd at gmail.com  Fri Nov  4 14:09:34 2011
From: matthewcleggphd at gmail.com (Matthew Clegg)
Date: Fri, 4 Nov 2011 09:09:34 -0400
Subject: [R-SIG-Finance] Rolling through fixed-length time windows
Message-ID: <CABLRk0FAXDBpY5_wA-4Sciunxy1+vGB-k2s8aGiEkSw4fd1PFg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111104/7632502c/attachment.pl>

From ggrothendieck at gmail.com  Fri Nov  4 14:24:23 2011
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 4 Nov 2011 09:24:23 -0400
Subject: [R-SIG-Finance] Rolling through fixed-length time windows
In-Reply-To: <CABLRk0FAXDBpY5_wA-4Sciunxy1+vGB-k2s8aGiEkSw4fd1PFg@mail.gmail.com>
References: <CABLRk0FAXDBpY5_wA-4Sciunxy1+vGB-k2s8aGiEkSw4fd1PFg@mail.gmail.com>
Message-ID: <CAP01uRma-jt-1v_eNzZYCcrPtGRr9Vw4kDTkJ2T3Xr5BBmUk9A@mail.gmail.com>

On Fri, Nov 4, 2011 at 9:09 AM, Matthew Clegg <matthewcleggphd at gmail.com> wrote:
> Hello R-Sig-Finance members:
>
> I was wondering if anyone has contributed functions that are similar
> to the zoo roll* functions but which operate on fixed-length time
> windows? ?For example, suppose I have a zoo-based object consisting
> of the daily closing prices of a stock, and I wish to know for each
> date, what was the volatility over the succeeding 30 calendar days?
> Probably many people would settle for something like:
> ?rollapply (log(lag(P))-log(P), 21, sd, align="left") * sqrt(252)
> (where P is the price series). ?However, this is an approximation.
> Not all periods of 30 calendar days include precisely 21 trading days.
>
> This seems like an obvious enough question that I would think that it
> has been asked (and answered) many times before, but I could not find
> a reference to the recommended solution.
>
> If no one has tackled this problem before, I might try to put together
> a small library of functions that are like roll* but which operate
> on fixed time windows. ?I am including an example of one such function
> below.
>
> Matthew Clegg
>
> ztw_sum <- function (X, delta, align="right", partial=FALSE) {
> ?# Zoo Time Window Sum
> ?#
> ?# On input, X is a zoo-based numeric vector and delta is a time
> difference.
> ?# Constructs a zoo-based numeric vector of partial sums from X. ?The
> values
> ?# included in a partial sum are those whose associated timestamps are
> ?# within delta of the corresponding element from X.
> ?#
> ?# If align="right", then result[i] is a sum of those elements
> ?# X[j] such that
> ?# ? ?0 <= timestamp[i] - timestamp[j] <= delta,
> ?# where timestamp[i] is the timestamp (index) associated with the
> ?# i-th element of X. ?Conversely, if align="left", then result[i] is a
> ?# sum of those elements X[j] such that
> ?# ? ?0 <= timestamp[j] - timestamp[i] <= delta.
> ?#
> ?# Parameters:
> ?# X: ? ? ? ?A zoo-based numeric vector with a time-based index type.
> ?# delta: ? ?An object of type difftime specifying the size of
> ?# ? ? ? ? ? the time window.
> ?# align: ? ?Specifies whether the sum for a given index should
> ?# ? ? ? ? ? be computed using elements of lower timestamps ("right")
> ?# ? ? ? ? ? or higher timestamps ("left").
> ?# partial: ?If TRUE, then partial sums are computed for elements
> ?# ? ? ? ? ? at the left (respectively, right) end of the vector.
> ?#
> ?# Returns a zoo-based numeric vector of partial sums.
> ?#
> ?# Running time is O(length(X)).
>
> ?if (!inherits(X, "zoo") || !inherits(coredata(X), "numeric")) {
> ? ?stop ("X must be a numeric vector of type zoo");
> ?} else if (delta <= 0) {
> ? ?stop ("delta must be positive");
> ?} else if ((align != "left") && (align != "right")) {
> ? ?stop ("align must be from c('left', 'right')");
> ?}
>
> ?timestamp <- index(X)
> ?R <- zoo(NA, order.by = timestamp); # The result vector
> ?sum <- 0; ?# The current partial sum
>
> ?if (align == "right") {
> ? ?# Invariants:
> ? ?# ? (a) 0 < i <= j <= length(X)
> ? ?# ? (b) 0 <= timestamp(j) - timestamp(i) <= delta
> ? ?i <- 1; ?# The leftmost index in the current window
> ? ?for (j in 1:length(X)) {
> ? ? ?if (!is.na(X[j])) {
> ? ? ? ?sum <- sum + as.numeric(X[j]);
> ? ? ?}
> ? ? ?while (timestamp[j] - timestamp[i] > delta) {
> ? ? ? ?if (!is.na(X[i])) {
> ? ? ? ? ?sum <- sum - as.numeric(X[i]);
> ? ? ? ?}
> ? ? ? ?i <- i+1;
> ? ? ?}
> ? ? ?if ((i > 1) || partial) {
> ? ? ? ?R[j] <- sum;
> ? ? ?}
> ? ?}
> ?} else { # align == "left"
> ? ?# Invariants:
> ? ?# ? (a) 0 < j <= i <= length(X)
> ? ?# ? (b) 0 <= timestamp(i) - timestamp(j) <= delta
> ? ?i <- length(X); ?# The rightmost index in the current window
> ? ?for (j in length(X):1) {
> ? ? ?if (!is.na(X[j])) {
> ? ? ? ?sum <- sum + as.numeric(X[j]);
> ? ? ?}
> ? ? ?while (timestamp[i] - timestamp[j] > delta) {
> ? ? ? ?if (!is.na(X[i])) {
> ? ? ? ? ?sum <- sum - as.numeric(X[i]);
> ? ? ? ?}
> ? ? ? ?i <- i-1;
> ? ? ?}
> ? ? ?if ((i < length(X)) || partial) {
> ? ? ? ?R[j] <- sum;
> ? ? ?}
> ? ?}
> ?}
>
> ?R
> }
>

Here is a one liner (two if you count making the result into a zoo object):

> z <- zoo(1:25)
> zz <- sapply(seq_along(z), function(i) sum(z[time(z) <= time(z)[i] & time(z) > time(z)[i] - 3]))
> zoo(zz, time(z))
 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
 1  3  6  9 12 15 18 21 24 27 30 33 36 39 42 45 48 51 54 57 60 63 66 69 72

-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From ben.nachtrieb at gmail.com  Sat Nov  5 00:08:03 2011
From: ben.nachtrieb at gmail.com (Ben Nachtrieb)
Date: Fri, 4 Nov 2011 17:08:03 -0600
Subject: [R-SIG-Finance] DBI solution
Message-ID: <CAJ01uwoaqiyMCsPEawa16yRm-vuStN=Rsan4Kfk2Wst5qcqYNg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111104/dd65bda0/attachment.pl>

From ggrothendieck at gmail.com  Sat Nov  5 01:01:36 2011
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 4 Nov 2011 20:01:36 -0400
Subject: [R-SIG-Finance] DBI solution
In-Reply-To: <CAJ01uwoaqiyMCsPEawa16yRm-vuStN=Rsan4Kfk2Wst5qcqYNg@mail.gmail.com>
References: <CAJ01uwoaqiyMCsPEawa16yRm-vuStN=Rsan4Kfk2Wst5qcqYNg@mail.gmail.com>
Message-ID: <CAP01uRnaSOYOBzoUKTOT9k9ob_zNJwO+jAmTSh753DbHf6hAWg@mail.gmail.com>

On Fri, Nov 4, 2011 at 7:08 PM, Ben Nachtrieb <ben.nachtrieb at gmail.com> wrote:
> Hello,
>
> I'm building (from the ground up) a PostgreSQL time series database for use
> with R. I'd like to get some preliminary guidance (help me get pointed in
> the correct direction).
>
> Here are some details: I am PC/Windows centric. I have data of all
> frequencies equal to or greater than Daily (no inter-day data). We have
> prices and technical data, macro data, company descriptive, and financial
> data. I don't have to do any 'DBA' stuff per-say (no messy stuff like split
> adjustments, ticker changes, etc.) as that is done for me; however, I will
> have to adjust for look-ahead, create new factor values, transform, etc.
> the data that we have and store it in database form. Can someone point me
> to the best solution/packages for this given that I have to stay in the R
> and PostgreSQL world?
>
> I see RpgSQL, RposgreSQL, TSPostgreSQL, DBI, TSdbi, and much more... I am
> hoping someone can narrow things down for me.
>
> Thanks so much!

RpgSQL and RPostgreSQL are DBI-based drivers for R and the others are
higher level packages.

I can only address my own package but RpgSQL was developed for use
with sqldf.  It uses RJDBC (which uses JDBC and Java) and DBI.
Feedback is that RpgSQL is easier to install on Windows than
alternatives.  The use of RJDBC/JDBC may slow it down relative to
alternatives although speed may not be material if you are just
importing a bunch of time series and then working with them in R as
opposed to constantly going back to the database.

sqldf is a package that lets you use R data frames with several
database back-ends including RpgSQL.  You would not use sqldf with
your own database but might use it with R data frames to play around
with PostgreSQL.

Resources are

- the Installation info in this link:
  http://cran.r-project.org/web/packages/RpgSQL/index.html

- ?pgSQL help page (see example at end of page)

- http://sqldf.googlecode.com
  most of which is about sqldf and sqlite although much of it applies
and there is a bit about using  PostgreSQL with sqldf.

-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From hans at grapenthin.net  Sun Nov  6 18:37:58 2011
From: hans at grapenthin.net (Hans Grapenthin)
Date: Sun, 6 Nov 2011 18:37:58 +0100
Subject: [R-SIG-Finance] expanding xts object - adding a day
In-Reply-To: <CA+xi=qZW_TE1R1a1PFBDt+SHaHheB0a5R5+PFtK9tocbSx_+aw@mail.gmail.com>
References: <20111031125811.279800@gmx.net>
	<1320066607.12096.105.camel@brian-rcg>
	<CA+xi=qZW_TE1R1a1PFBDt+SHaHheB0a5R5+PFtK9tocbSx_+aw@mail.gmail.com>
Message-ID: <201111061838.08661.hans@grapenthin.net>

Hello

this does it for one stock. I am struggling when I insert  this expression in a 
loop that worked before:

tickers <- c("MSFT","CSCO","GE")
getSymbols ( tickers, from="2011-07-01::")
qte <- getQuote ( tickers )
for(ticker in tickers) {
tacker <- rbind((ticker), xts(qte[ticker,c(5,6,7,2,82)],Sys.Date()))
...}
gives for tacker "Error in UseMethod("as.xts"), because ticker is read in this 
context as class "character"

Any workaround to get "ticker" into class xts?

Thanks in advance
Hans

Am Donnerstag, 3. November 2011 17:01:56 schrieben Sie:
> Martin,
> 
> You could use `getQuote` to do this a little less manually.
> 
> > getSymbols("SPY", from='2011-10-31')
> 
> [1] "SPY"
> 
> > getQuote("SPY")
> 
>              Trade Time   Last Change % Change   Open   High     Low
>  Volume
> SPY 2011-11-03 11:44:00 125.07   1.08   +0.87% 125.27 125.42 123.595
> 133878480
> 
> > SPY <- rbind(SPY, xts(getQuote("SPY")[,c(5,6,7,2,8,2)], Sys.Date()))
> > SPY
> 
>            SPY.Open SPY.High SPY.Low SPY.Close SPY.Volume SPY.Adjusted
> 2011-10-31   127.16   128.62 125.320    125.50  227863700       125.50
> 2011-11-01   122.03   123.51 121.520    122.00  415376200       122.00
> 2011-11-02   123.83   124.40 122.790    123.99  244717600       123.99
> 2011-11-03   125.27   125.42 123.595    125.07  133878480       125.07
> 
> Cheers,
> Garrett
> 
> On Mon, Oct 31, 2011 at 8:10 AM, Brian G. Peterson <brian at braverock.com>wrote:
> > On Mon, 2011-10-31 at 13:58 +0100, Martin Bauer wrote:
> > > Hi Brian,
> > > 
> > > yes rbind finally but I thinking of something like this - not sure if
> > 
> > that could lead to a solution
> > 
> > 
> > <snipped because it doesn't make any sense>
> > 
> > > I'm lost at this point
> > 
> > Clearly.
> > 
> > > getSymbols('SPY')
> > 
> > [1] "SPY"
> > 
> > > tail(SPY)
> > > 
> >           SPY.Open SPY.High SPY.Low SPY.Close SPY.Volume SPY.Adjusted
> > 
> > 2011-10-21   123.09   124.12  122.72    123.97  278872100       123.97
> > 2011-10-24   124.17   125.80  124.06    125.49  202862400       125.49
> > 2011-10-25   124.89   124.95  122.78    123.05  268433100       123.05
> > 2011-10-26   124.35   124.77  122.21    124.30  288818700       124.30
> > 2011-10-27   127.63   129.42  124.32    128.63  389788900       128.63
> > 2011-10-28   128.00   128.85  127.80    128.60  225638800       128.60
> > 
> > >SPY<-rbind(SPY,xts(matrix(c(126.5,126.6,126.425,126.55,NA,NA),nrow=1),
> > 
> > order.by=as.Date(Sys.Date())))
> > 
> > > tail(SPY)
> > > 
> >           SPY.Open SPY.High SPY.Low SPY.Close SPY.Volume SPY.Adjusted
> > 
> > 2011-10-24   124.17   125.80 124.060    125.49  202862400       125.49
> > 2011-10-25   124.89   124.95 122.780    123.05  268433100       123.05
> > 2011-10-26   124.35   124.77 122.210    124.30  288818700       124.30
> > 2011-10-27   127.63   129.42 124.320    128.63  389788900       128.63
> > 2011-10-28   128.00   128.85 127.800    128.60  225638800       128.60
> > 2011-10-31   126.50   126.60 126.425    126.55         NA           NA
> > 
> > You don't need anything other than rbind and xts.
> > 
> > --
> > Brian
> > 
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions
> > should go.
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.

-----------------------------------------------------------------------------------------------------------------------------------------
Hans Grapenthin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 198 bytes
Desc: This is a digitally signed message part.
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111106/38bbc803/attachment.bin>

From michael.weylandt at gmail.com  Sun Nov  6 18:48:25 2011
From: michael.weylandt at gmail.com (R. Michael Weylandt <michael.weylandt@gmail.com>)
Date: Sun, 6 Nov 2011 12:48:25 -0500
Subject: [R-SIG-Finance] expanding xts object - adding a day
In-Reply-To: <201111061838.08661.hans@grapenthin.net>
References: <20111031125811.279800@gmx.net>
	<1320066607.12096.105.camel@brian-rcg>
	<CA+xi=qZW_TE1R1a1PFBDt+SHaHheB0a5R5+PFtK9tocbSx_+aw@mail.gmail.com>
	<201111061838.08661.hans@grapenthin.net>
Message-ID: <90C70F06-10BB-41B5-92D9-D14EF97D7F26@gmail.com>

I think you mean to put get(ticker) in the rbind() to get the xts object, not the name. 

Michael

On Nov 6, 2011, at 12:37 PM, Hans Grapenthin <hans at grapenthin.net> wrote:

> Hello
> 
> this does it for one stock. I am struggling when I insert  this expression in a 
> loop that worked before:
> 
> tickers <- c("MSFT","CSCO","GE")
> getSymbols ( tickers, from="2011-07-01::")
> qte <- getQuote ( tickers )
> for(ticker in tickers) {
> tacker <- rbind((ticker), xts(qte[ticker,c(5,6,7,2,82)],Sys.Date()))
> ...}
> gives for tacker "Error in UseMethod("as.xts"), because ticker is read in this 
> context as class "character"
> 
> Any workaround to get "ticker" into class xts?
> 
> Thanks in advance
> Hans
> 
> Am Donnerstag, 3. November 2011 17:01:56 schrieben Sie:
>> Martin,
>> 
>> You could use `getQuote` to do this a little less manually.
>> 
>>> getSymbols("SPY", from='2011-10-31')
>> 
>> [1] "SPY"
>> 
>>> getQuote("SPY")
>> 
>>             Trade Time   Last Change % Change   Open   High     Low
>> Volume
>> SPY 2011-11-03 11:44:00 125.07   1.08   +0.87% 125.27 125.42 123.595
>> 133878480
>> 
>>> SPY <- rbind(SPY, xts(getQuote("SPY")[,c(5,6,7,2,8,2)], Sys.Date()))
>>> SPY
>> 
>>           SPY.Open SPY.High SPY.Low SPY.Close SPY.Volume SPY.Adjusted
>> 2011-10-31   127.16   128.62 125.320    125.50  227863700       125.50
>> 2011-11-01   122.03   123.51 121.520    122.00  415376200       122.00
>> 2011-11-02   123.83   124.40 122.790    123.99  244717600       123.99
>> 2011-11-03   125.27   125.42 123.595    125.07  133878480       125.07
>> 
>> Cheers,
>> Garrett
>> 
>> On Mon, Oct 31, 2011 at 8:10 AM, Brian G. Peterson <brian at braverock.com>wrote:
>>> On Mon, 2011-10-31 at 13:58 +0100, Martin Bauer wrote:
>>>> Hi Brian,
>>>> 
>>>> yes rbind finally but I thinking of something like this - not sure if
>>> 
>>> that could lead to a solution
>>> 
>>> 
>>> <snipped because it doesn't make any sense>
>>> 
>>>> I'm lost at this point
>>> 
>>> Clearly.
>>> 
>>>> getSymbols('SPY')
>>> 
>>> [1] "SPY"
>>> 
>>>> tail(SPY)
>>>> 
>>>          SPY.Open SPY.High SPY.Low SPY.Close SPY.Volume SPY.Adjusted
>>> 
>>> 2011-10-21   123.09   124.12  122.72    123.97  278872100       123.97
>>> 2011-10-24   124.17   125.80  124.06    125.49  202862400       125.49
>>> 2011-10-25   124.89   124.95  122.78    123.05  268433100       123.05
>>> 2011-10-26   124.35   124.77  122.21    124.30  288818700       124.30
>>> 2011-10-27   127.63   129.42  124.32    128.63  389788900       128.63
>>> 2011-10-28   128.00   128.85  127.80    128.60  225638800       128.60
>>> 
>>>> SPY<-rbind(SPY,xts(matrix(c(126.5,126.6,126.425,126.55,NA,NA),nrow=1),
>>> 
>>> order.by=as.Date(Sys.Date())))
>>> 
>>>> tail(SPY)
>>>> 
>>>          SPY.Open SPY.High SPY.Low SPY.Close SPY.Volume SPY.Adjusted
>>> 
>>> 2011-10-24   124.17   125.80 124.060    125.49  202862400       125.49
>>> 2011-10-25   124.89   124.95 122.780    123.05  268433100       123.05
>>> 2011-10-26   124.35   124.77 122.210    124.30  288818700       124.30
>>> 2011-10-27   127.63   129.42 124.320    128.63  389788900       128.63
>>> 2011-10-28   128.00   128.85 127.800    128.60  225638800       128.60
>>> 2011-10-31   126.50   126.60 126.425    126.55         NA           NA
>>> 
>>> You don't need anything other than rbind and xts.
>>> 
>>> --
>>> Brian
>>> 
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>> 
>>    [[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
> 
> -----------------------------------------------------------------------------------------------------------------------------------------
> Hans Grapenthin
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Sun Nov  6 18:51:50 2011
From: gsee000 at gmail.com (G See)
Date: Sun, 6 Nov 2011 11:51:50 -0600
Subject: [R-SIG-Finance] expanding xts object - adding a day
In-Reply-To: <90C70F06-10BB-41B5-92D9-D14EF97D7F26@gmail.com>
References: <20111031125811.279800@gmx.net>
	<1320066607.12096.105.camel@brian-rcg>
	<CA+xi=qZW_TE1R1a1PFBDt+SHaHheB0a5R5+PFtK9tocbSx_+aw@mail.gmail.com>
	<201111061838.08661.hans@grapenthin.net>
	<90C70F06-10BB-41B5-92D9-D14EF97D7F26@gmail.com>
Message-ID: <CA+xi=qYnMc6TOnwaaT6KtXNQiiNBXEc8suek9=767dFSQSFOOw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111106/0a631648/attachment.pl>

From dinoveritas at gmail.com  Mon Nov  7 04:43:01 2011
From: dinoveritas at gmail.com (Dino Veritas)
Date: Sun, 6 Nov 2011 22:43:01 -0500
Subject: [R-SIG-Finance] Keeping persistent data collections
Message-ID: <CAPtqfwV6_FfWKYnEZiS0=p8R4tBbLTSMd15Q8pz4Kc78ZZtRJg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111106/10e82a2e/attachment.pl>

From kwong at fortress.com  Mon Nov  7 09:52:24 2011
From: kwong at fortress.com (Keng Onn Wong)
Date: Mon, 7 Nov 2011 08:52:24 +0000
Subject: [R-SIG-Finance] R courses (for finance) in Singapore
Message-ID: <3665A7E80056224FBA8FDDC99F3D1FF305C01E19@SG-EXCHMBX1.fortressinv.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111107/1f187f33/attachment.pl>

From colstat at gmail.com  Mon Nov  7 09:57:55 2011
From: colstat at gmail.com (Colstat)
Date: Mon, 7 Nov 2011 03:57:55 -0500
Subject: [R-SIG-Finance] R courses (for finance) in Singapore
In-Reply-To: <3665A7E80056224FBA8FDDC99F3D1FF305C01E19@SG-EXCHMBX1.fortressinv.com>
References: <3665A7E80056224FBA8FDDC99F3D1FF305C01E19@SG-EXCHMBX1.fortressinv.com>
Message-ID: <CABc7NqGSAd==9SjhtatZ07R9LZdAm-Covn-L0WsgyvQSbqtmxQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111107/727d5782/attachment.pl>

From kwong at fortress.com  Mon Nov  7 10:07:02 2011
From: kwong at fortress.com (Keng Onn Wong)
Date: Mon, 7 Nov 2011 09:07:02 +0000
Subject: [R-SIG-Finance] R courses (for finance) in Singapore
In-Reply-To: <CABc7NqGSAd==9SjhtatZ07R9LZdAm-Covn-L0WsgyvQSbqtmxQ@mail.gmail.com>
References: <3665A7E80056224FBA8FDDC99F3D1FF305C01E19@SG-EXCHMBX1.fortressinv.com>
	<CABc7NqGSAd==9SjhtatZ07R9LZdAm-Covn-L0WsgyvQSbqtmxQ@mail.gmail.com>
Message-ID: <3665A7E80056224FBA8FDDC99F3D1FF305C0208C@SG-EXCHMBX1.fortressinv.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111107/41d769ac/attachment.pl>

From brian at braverock.com  Mon Nov  7 10:20:19 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 07 Nov 2011 03:20:19 -0600
Subject: [R-SIG-Finance] Keeping persistent data collections
In-Reply-To: <CAPtqfwV6_FfWKYnEZiS0=p8R4tBbLTSMd15Q8pz4Kc78ZZtRJg@mail.gmail.com>
References: <CAPtqfwV6_FfWKYnEZiS0=p8R4tBbLTSMd15Q8pz4Kc78ZZtRJg@mail.gmail.com>
Message-ID: <1320657619.1955.54.camel@brian-desktop>

On Sun, 2011-11-06 at 22:43 -0500, Dino Veritas wrote:
> Hello, I recently found this list and have been reading deeply the
> archives. I am wondering how people here maintain their collections of data
> for easy use in R. I am wondering a few things:
> 
> 1) How do members of this list deal with keeping persistent data
> collections with R? I was thinking of individual xts objects by asset and
> frequency (such as AAPL daily, AAPL minute, AAPL 60m, etc). While I can
> store and maintain these xts objects on disk and load them into R as
> needed, I am wondering if there is a more better solution.

I store only tick data, as I can easily get to any other frequency from
tick.  I've considered also storing daily data, but in the end I decide
it is too much trouble to (additionally) manage, and just store tick.

> 2) Coming from that, I have been looking into the indexing package for my
> needs. It seems very useful for managing a lot of large data sets in
> memory, but I am not sure it is a good method for maintaining persistent
> data, I have found trouble adding information to existing data that is
> indexed on disk. Do poster here use indexing for this purpose? I did find
> an old post or two touching on that with no specifics. I would like to be
> able to combine the ability of indexing to have many large data sets
> available in memory with persistent storage of data. Has anyone any
> experience doing this?

You are correct that the 'indexing' package is very powerful.  It is
also not done yet.  

As I said, I store tick data.  The way I do this is with single files
per day of data per symbol, pre-parsed into xts objects and stored to
disk in one directory per symbol (using 'save').    

I then use FinancialInstrument to keep track of all the instrument
metadata, and getSymbols to load the data into R when I need it (and
over the time-frames that I require).  We currently download tick data
for about 2500 tradeable instruments per day, and maintain archives
going back several years.  We have the .instrument environment stored on
the same file server as the data, and every .Rprofile in the firm points
to this so that everyone has access to getInstrument and getSymbols

I know someone who works in the hedge fund industry, mostly with monthly
data, with some daily data sprinkled in.  He uses the same approach I
have outlined of storing the metadata in FinancialInstrument, and
getSymbols to access the data.  He typically stores one consolidated CSV
file per instrument, because CSV files are easy to add on to with a
batch process.  

For lower frequency data (let's say daily or lower) a database is
certainly an option, and there are getSymbols wrappers that could be
adapted to whatever schema you decided to use. Obviously, there are tick
data database providers such as OneTick and kdb, and if you have this
problem and the resources to need this type of solution, you probably
already know that you are in this camp, and know that these providers
have R interfaces of varying quality.

The FinancialInstrument package has a 'parsers' directory included in
the 'inst' directory of the package with many examples of download and
parse routines for regular loading of data from a variety of free or
subscription providers.  This should give you a lot of material to begin
working with your own data providers.

> 3) How do people keep track of all the data sets within R? Are there any
> useful packages for keeping track of multiple sets of financial data and
> the information about them?

We wrote and use FinancialInstrument for this purpose.

As I said earlier, I see no value in storing different periodicities,
and store only tick.

One of the reasons that I chose to write a getSymbols wrapper for
retrieving our tick data stores is that resources like this list have
extensive experience about using getSymbols, and it is therefore easy
for people at our firm to become familiar with using the data. 

Also, I am reasonably confident that as the indexing package matures,
there will be a getSymbols method for it as well, and if appropriate I
can easily convert all my data in one batch pass and it will be
transparent to my users.

I made what I now realize to have been a mistake at a previous firm in
writing a data retrieval function that was not compatible with
getSymbols which was more complex to teach people how to use it, and
less compatible with huge amounts of other publicly available code.

quantmod and FinancialInstrument contain examples of various getSymbols
methods that may meet your needs, or that could serve as templates for
your custom in-house data source.
 
> 4) Any other pointers? I know many here are well versed and manage large
> data sets with R. Any tips you have or even simply showing me in a helpful
> direction to useful packages you use is great. This list is a great help
> for me and I am still browsing old threads!

Regards,

    - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From gsee000 at gmail.com  Mon Nov  7 13:47:11 2011
From: gsee000 at gmail.com (G See)
Date: Mon, 7 Nov 2011 06:47:11 -0600
Subject: [R-SIG-Finance] Keeping persistent data collections
In-Reply-To: <1320657619.1955.54.camel@brian-desktop>
References: <CAPtqfwV6_FfWKYnEZiS0=p8R4tBbLTSMd15Q8pz4Kc78ZZtRJg@mail.gmail.com>
	<1320657619.1955.54.camel@brian-desktop>
Message-ID: <CA+xi=qaRNG2qJgOCTxWHyRx0D0k1iJfg-bnSUtYCP9Tg+gKYKQ@mail.gmail.com>

I do what Brian described, and I use a couple functions from
FinancialInstrument to do it.

library(FinancialInstrument)
?saveSymbols.days
?saveSymbols.common
?getSymbols.FI

(I just noticed that those 2 saveSymbols.* functions do not allow for a
data extension other
than the old .rda.  I will probably update that today.)

I put together a little example, which I'll attach as well as paste below.

This is how I do it, but I certainly encourage suggestions for improvement.

HTH,
Garrett

> library(FinancialInstrument)

> # object with daily periodicity
> data(sample_matrix)
> DDD <- as.xts(sample_matrix)

> #object with minute periodicity
> AAA <- xts(rnorm(1:10000), Sys.time()-(60*1:10000))
> AAA <- align.time(AAA)
> colnames(AAA) <- "AAA"

> # look at the objects we're going to store
> head(AAA)
                            AAA
2011-10-31 09:04:00  0.05152989
2011-10-31 09:05:00  0.12797379
2011-10-31 09:06:00  0.96025183
2011-10-31 09:07:00 -0.23265907
2011-10-31 09:08:00  1.77706849
2011-10-31 09:09:00 -1.29139344

> head(DDD)
               Open     High      Low    Close
2007-01-02 50.03978 50.11778 49.95041 50.11778
2007-01-03 50.23050 50.42188 50.23050 50.39767
2007-01-04 50.42096 50.42096 50.26414 50.33236
2007-01-05 50.37347 50.37347 50.22103 50.33459
2007-01-06 50.24433 50.24433 50.11121 50.18112
2007-01-07 50.13211 50.21561 49.99185 49.99185

> mydir <- getwd()
> saveSymbols.days("AAA", base_dir=mydir)
> saveSymbols.common("DDD", base_dir=mydir)

> # now that they are on disk,
> # remove them from workspace
> rm("AAA", "DDD")

> # get from disk
> getSymbols("AAA", src='FI', dir=mydir, split_method='days',
from='2011-10-31')
[1] "AAA"

> getSymbols("DDD", src='FI', dir=mydir, split_method='common')
[1] "DDD"

> head(AAA)
                            AAA
2011-10-31 09:04:00  0.05152989
2011-10-31 09:05:00  0.12797379
2011-10-31 09:06:00  0.96025183
2011-10-31 09:07:00 -0.23265907
2011-10-31 09:08:00  1.77706849
2011-10-31 09:09:00 -1.29139344

> head(DDD)
               Open     High      Low    Close
2007-01-02 50.03978 50.11778 49.95041 50.11778
2007-01-03 50.23050 50.42188 50.23050 50.39767
2007-01-04 50.42096 50.42096 50.26414 50.33236
2007-01-05 50.37347 50.37347 50.22103 50.33459
2007-01-06 50.24433 50.24433 50.11121 50.18112
2007-01-07 50.13211 50.21561 49.99185 49.99185

> #--------
> # You can setSymbolLookup so that getSymbols will know where
> # to look.  There are 2 ways to setSymbolLookup: explicitly,
> # or by setting the "src" field of an instrument.
>
> # explicitly
> setSymbolLookup(DDD=list(src='FI', dir=mydir, split_method='common'))

> getSymbols("DDD")
[1] "DDD"

> # by using the "src" field of an instrument
> stock("AAA", currency("USD"), src=list(src='FI', dir=mydir,
split_method='days'))
[1] "AAA"

> getSymbols("AAA", from='2011-10-31')
[1] "AAA"

> # cleanup
> rm("AAA", "DDD")
> unlink("AAA", recursive=TRUE)
> unlink("DDD", recursive=TRUE)



On Mon, Nov 7, 2011 at 3:20 AM, Brian G. Peterson <brian at braverock.com>wrote:

> On Sun, 2011-11-06 at 22:43 -0500, Dino Veritas wrote:
> > Hello, I recently found this list and have been reading deeply the
> > archives. I am wondering how people here maintain their collections of
> data
> > for easy use in R. I am wondering a few things:
> >
> > 1) How do members of this list deal with keeping persistent data
> > collections with R? I was thinking of individual xts objects by asset and
> > frequency (such as AAPL daily, AAPL minute, AAPL 60m, etc). While I can
> > store and maintain these xts objects on disk and load them into R as
> > needed, I am wondering if there is a more better solution.
>
> I store only tick data, as I can easily get to any other frequency from
> tick.  I've considered also storing daily data, but in the end I decide
> it is too much trouble to (additionally) manage, and just store tick.
>
> > 2) Coming from that, I have been looking into the indexing package for my
> > needs. It seems very useful for managing a lot of large data sets in
> > memory, but I am not sure it is a good method for maintaining persistent
> > data, I have found trouble adding information to existing data that is
> > indexed on disk. Do poster here use indexing for this purpose? I did find
> > an old post or two touching on that with no specifics. I would like to be
> > able to combine the ability of indexing to have many large data sets
> > available in memory with persistent storage of data. Has anyone any
> > experience doing this?
>
> You are correct that the 'indexing' package is very powerful.  It is
> also not done yet.
>
> As I said, I store tick data.  The way I do this is with single files
> per day of data per symbol, pre-parsed into xts objects and stored to
> disk in one directory per symbol (using 'save').
>
> I then use FinancialInstrument to keep track of all the instrument
> metadata, and getSymbols to load the data into R when I need it (and
> over the time-frames that I require).  We currently download tick data
> for about 2500 tradeable instruments per day, and maintain archives
> going back several years.  We have the .instrument environment stored on
> the same file server as the data, and every .Rprofile in the firm points
> to this so that everyone has access to getInstrument and getSymbols
>
> I know someone who works in the hedge fund industry, mostly with monthly
> data, with some daily data sprinkled in.  He uses the same approach I
> have outlined of storing the metadata in FinancialInstrument, and
> getSymbols to access the data.  He typically stores one consolidated CSV
> file per instrument, because CSV files are easy to add on to with a
> batch process.
>
> For lower frequency data (let's say daily or lower) a database is
> certainly an option, and there are getSymbols wrappers that could be
> adapted to whatever schema you decided to use. Obviously, there are tick
> data database providers such as OneTick and kdb, and if you have this
> problem and the resources to need this type of solution, you probably
> already know that you are in this camp, and know that these providers
> have R interfaces of varying quality.
>
> The FinancialInstrument package has a 'parsers' directory included in
> the 'inst' directory of the package with many examples of download and
> parse routines for regular loading of data from a variety of free or
> subscription providers.  This should give you a lot of material to begin
> working with your own data providers.
>
> > 3) How do people keep track of all the data sets within R? Are there any
> > useful packages for keeping track of multiple sets of financial data and
> > the information about them?
>
> We wrote and use FinancialInstrument for this purpose.
>
> As I said earlier, I see no value in storing different periodicities,
> and store only tick.
>
> One of the reasons that I chose to write a getSymbols wrapper for
> retrieving our tick data stores is that resources like this list have
> extensive experience about using getSymbols, and it is therefore easy
> for people at our firm to become familiar with using the data.
>
> Also, I am reasonably confident that as the indexing package matures,
> there will be a getSymbols method for it as well, and if appropriate I
> can easily convert all my data in one batch pass and it will be
> transparent to my users.
>
> I made what I now realize to have been a mistake at a previous firm in
> writing a data retrieval function that was not compatible with
> getSymbols which was more complex to teach people how to use it, and
> less compatible with huge amounts of other publicly available code.
>
> quantmod and FinancialInstrument contain examples of various getSymbols
> methods that may meet your needs, or that could serve as templates for
> your custom in-house data source.
>
> > 4) Any other pointers? I know many here are well versed and manage large
> > data sets with R. Any tips you have or even simply showing me in a
> helpful
> > direction to useful packages you use is great. This list is a great help
> > for me and I am still browsing old threads!
>
> Regards,
>
>    - Brian
>
> --
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111107/dc8ee49e/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Rdatasaving.R
Type: text/x-r-source
Size: 1208 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111107/dc8ee49e/attachment.bin>

From matthewcleggphd at gmail.com  Mon Nov  7 14:50:27 2011
From: matthewcleggphd at gmail.com (Matthew Clegg)
Date: Mon, 7 Nov 2011 08:50:27 -0500
Subject: [R-SIG-Finance] Rolling through fixed-length time windows
In-Reply-To: <CAP01uRma-jt-1v_eNzZYCcrPtGRr9Vw4kDTkJ2T3Xr5BBmUk9A@mail.gmail.com>
References: <CABLRk0FAXDBpY5_wA-4Sciunxy1+vGB-k2s8aGiEkSw4fd1PFg@mail.gmail.com>
	<CAP01uRma-jt-1v_eNzZYCcrPtGRr9Vw4kDTkJ2T3Xr5BBmUk9A@mail.gmail.com>
Message-ID: <CABLRk0F5Ov4Zu6ErHdgM-yjWKvm529zEqfpFwzzrVPCUTsJGww@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111107/50a82b82/attachment.pl>

From ggrothendieck at gmail.com  Mon Nov  7 15:26:10 2011
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 7 Nov 2011 09:26:10 -0500
Subject: [R-SIG-Finance] Rolling through fixed-length time windows
In-Reply-To: <CABLRk0F5Ov4Zu6ErHdgM-yjWKvm529zEqfpFwzzrVPCUTsJGww@mail.gmail.com>
References: <CABLRk0FAXDBpY5_wA-4Sciunxy1+vGB-k2s8aGiEkSw4fd1PFg@mail.gmail.com>
	<CAP01uRma-jt-1v_eNzZYCcrPtGRr9Vw4kDTkJ2T3Xr5BBmUk9A@mail.gmail.com>
	<CABLRk0F5Ov4Zu6ErHdgM-yjWKvm529zEqfpFwzzrVPCUTsJGww@mail.gmail.com>
Message-ID: <CAP01uR=AY7sbv2rg04jcEED202iJY_DPKiqW3xKzxhp6Y8LZmQ@mail.gmail.com>

On Mon, Nov 7, 2011 at 8:50 AM, Matthew Clegg <matthewcleggphd at gmail.com> wrote:
>
>
> On Fri, Nov 4, 2011 at 9:24 AM, Gabor Grothendieck <ggrothendieck at gmail.com>
> wrote:
>>
>> On Fri, Nov 4, 2011 at 9:09 AM, Matthew Clegg <matthewcleggphd at gmail.com>
>> wrote:
>> > Hello R-Sig-Finance members:
>> >
>> > I was wondering if anyone has contributed functions that are similar
>> > to the zoo roll* functions but which operate on fixed-length time
>> > windows? ?For example, suppose I have a zoo-based object consisting
>> > of the daily closing prices of a stock, and I wish to know for each
>> > date, what was the volatility over the succeeding 30 calendar days?
>> > Probably many people would settle for something like:
>> > ?rollapply (log(lag(P))-log(P), 21, sd, align="left") * sqrt(252)
>> > (where P is the price series). ?However, this is an approximation.
>> > Not all periods of 30 calendar days include precisely 21 trading days.
>> >
>> > This seems like an obvious enough question that I would think that it
>> > has been asked (and answered) many times before, but I could not find
>> > a reference to the recommended solution.
>> >
>> > If no one has tackled this problem before, I might try to put together
>> > a small library of functions that are like roll* but which operate
>> > on fixed time windows. ?I am including an example of one such function
>> > below.
>> >
>> > Matthew Clegg
>> >
>> > [snip]
>> >
>>
>> Here is a one liner (two if you count making the result into a zoo
>> object):
>>
>> > z <- zoo(1:25)
>> > zz <- sapply(seq_along(z), function(i) sum(z[time(z) <= time(z)[i] &
>> > time(z) > time(z)[i] - 3]))
>> > zoo(zz, time(z))
>> ?1 ?2 ?3 ?4 ?5 ?6 ?7 ?8 ?9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
>> ?1 ?3 ?6 ?9 12 15 18 21 24 27 30 33 36 39 42 45 48 51 54 57 60 63 66 69 72
>>
>> --
>> Statistics & Software Consulting
>> GKX Group, GKX Associates Inc.
>> tel: 1-877-GKX-GROUP
>> email: ggrothendieck at gmail.com
>
>
> Aha!? That's an elegant solution and another great illustration of the
> power of vector processing in R.
>
> I found that after tweaking my code, I could achieve a significant
> improvement in running time over this sapply()-based one liner.? The
> following table compares the running times for various lengths of the
> underlying zoo vector:
>

The rollapply slowdown was reported and fixed in the development
version of zoo already. It only affected recent versions of zoo since
rollapply was rewritten to add certain features. See:

http://r.789695.n4.nabble.com/zoo-performance-regression-noticed-1-6-5-is-faster-tt3990753.html#a3993387

Certainly zoo indexing can be expensive and in those cases that do
involve indexing in an inner loop, replacing zoo object z with zc <-
coredata(z) and tt <- time(z) speeds things up.  Typically that covers
fewer computations than you might think because most R code takes the
whole object approach.

-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From axianyc at yahoo.com  Mon Nov  7 19:11:40 2011
From: axianyc at yahoo.com (Adam Xia)
Date: Mon, 7 Nov 2011 10:11:40 -0800 (PST)
Subject: [R-SIG-Finance] Download RBloomberg for R-2.14.0
Message-ID: <1320689500.7279.YahooMailNeo@web113508.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111107/a29e046a/attachment.pl>

From john.laing at gmail.com  Mon Nov  7 20:14:34 2011
From: john.laing at gmail.com (John Laing)
Date: Mon, 7 Nov 2011 14:14:34 -0500
Subject: [R-SIG-Finance] Download RBloomberg for R-2.14.0
In-Reply-To: <1320689500.7279.YahooMailNeo@web113508.mail.gq1.yahoo.com>
References: <1320689500.7279.YahooMailNeo@web113508.mail.gq1.yahoo.com>
Message-ID: <CAA3Wa=tT9i6xVBzrD0wBxSCUGG90QX5VKnesCmtzhgCa5DPCtA@mail.gmail.com>

Hi Adam,

You did nothing wrong, I haven't yet posted RBloomberg binaries for R
2.14.0. I hope to get that taken care of soon, possibly this evening.

John

On Mon, Nov 7, 2011 at 1:11 PM, Adam Xia <axianyc at yahoo.com> wrote:
> Hello Friends,
>
> I just installed R-2.14.0 and tried to install RBloomberg package?by?running: install.packages("RBloomberg",repos="http://r.findata.org/").?However, I received message to indicate that the package "is not avaiable (for R version 2.14.0)". Should I wait for more days or something I did wrong? I also encountered the same issue for Rcompression package from omegahat.com. Thank you for your kindly reply.
>
> AX
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From Community at MMHein.at  Tue Nov  8 06:49:44 2011
From: Community at MMHein.at (Community)
Date: Tue, 8 Nov 2011 06:49:44 +0100
Subject: [R-SIG-Finance] Time Series w/ daily or stochastic observation
	prediction
Message-ID: <9EE03E0A-CFFC-477E-BD30-49BEE9DC829D@MMHein.at>

Hi,

I've got two different types of behaviors for which I have to predict the future development (financial/banking-related data).

One is a set of historical data with daily observations and which are following some kind of a seasonal pattern, the second one a set of historical data (measure points), with two observation occurring each week, consisting of ten unique (within one single observation) values in parallel, and which doesn't appear to follow any seasonal pattern.

The former one I've aggregated on a monthly level and calculated a prediction model based on Holt Winters, which appears to be pretty nicely fitting when comparing the predicted history with the actual one, and now I have to accomplish the very same on a daily basis (including February 29th in case of a leap year).

The latter one I have not clue at all as how to prepare the data and run it with any potetially qualifying model.

Cheers,
Martin


From sabaric at charter.net  Tue Nov  8 15:44:47 2011
From: sabaric at charter.net (Richard Saba)
Date: Tue, 8 Nov 2011 08:44:47 -0600
Subject: [R-SIG-Finance] Output of vars package impulse response function
Message-ID: <005801cc9e24$f668db20$e33a9160$@charter.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111108/7d30d93f/attachment.pl>

From michael.weylandt at gmail.com  Tue Nov  8 21:49:23 2011
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Tue, 8 Nov 2011 15:49:23 -0500
Subject: [R-SIG-Finance] Output of vars package impulse response function
In-Reply-To: <005801cc9e24$f668db20$e33a9160$@charter.net>
References: <005801cc9e24$f668db20$e33a9160$@charter.net>
Message-ID: <CAAmySGNjxnuf2U0s8zOxSF49wPtRtdqs-QwFbP4efnO7er_4tw@mail.gmail.com>

If no one here knows, it may be worth it to contact the package
maintainer directly. See maintainer("vars")

Michael

On Tue, Nov 8, 2011 at 9:44 AM, Richard Saba <sabaric at charter.net> wrote:
> Does anyone know if the ?bootstrap ?CI intervals generated by the irf()
> function in the " vars" ?package are bias corrected?
>
>
>
> I posted this on the R-Help website but the only response I got was a
> suggestion to post on this site.
>
> Thanks,
>
> Richard Saba
>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From matthieu.stigler at gmail.com  Tue Nov  8 23:02:19 2011
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Tue, 8 Nov 2011 23:02:19 +0100
Subject: [R-SIG-Finance] Output of vars package impulse response function
In-Reply-To: <CAAmySGNjxnuf2U0s8zOxSF49wPtRtdqs-QwFbP4efnO7er_4tw@mail.gmail.com>
References: <005801cc9e24$f668db20$e33a9160$@charter.net>
	<CAAmySGNjxnuf2U0s8zOxSF49wPtRtdqs-QwFbP4efnO7er_4tw@mail.gmail.com>
Message-ID: <CAEYvigJ8LETFSrte-KpOkCpKHk6HP+oFywZ1kZ1Nj3aNcCz+LA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111108/e6cc2129/attachment.pl>

From sjain at caa.columbia.edu  Tue Nov  8 23:19:27 2011
From: sjain at caa.columbia.edu (sammyny)
Date: Tue, 8 Nov 2011 14:19:27 -0800 (PST)
Subject: [R-SIG-Finance] Calculating Hasbrouck's information share and
 Gonzalo-Granger weights on R
In-Reply-To: <AANLkTinWNEvAVUjk8TYVd_28mEUS_dKnezCPtX64v4Lo@mail.gmail.com>
References: <AANLkTinWNEvAVUjk8TYVd_28mEUS_dKnezCPtX64v4Lo@mail.gmail.com>
Message-ID: <1320790767748-4017779.post@n4.nabble.com>

Hi Nidhi,
I was wondering if you were able to make any progress on this as to why you
are seeing big differences in the upper and lower bounds? At first glance,
it seems this is due to high degree of correlation between spot and future
rates.

Please share your findings.

thanks,
Samit

--
View this message in context: http://r.789695.n4.nabble.com/Calculating-Hasbrouck-s-information-share-and-Gonzalo-Granger-weights-on-R-tp2395838p4017779.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From eric.thungstrom at gmail.com  Wed Nov  9 03:12:41 2011
From: eric.thungstrom at gmail.com (Eric Thungstom)
Date: Tue, 8 Nov 2011 21:12:41 -0500
Subject: [R-SIG-Finance] understanding xts & ccf
Message-ID: <CACv3XEB_q5DrsWvQyQstTsURA7NQb+b5a0df6ULVHfdNAk4QHw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111108/f920d4f4/attachment.pl>

From josh.m.ulrich at gmail.com  Wed Nov  9 03:37:32 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 8 Nov 2011 20:37:32 -0600
Subject: [R-SIG-Finance] understanding xts & ccf
In-Reply-To: <CACv3XEB_q5DrsWvQyQstTsURA7NQb+b5a0df6ULVHfdNAk4QHw@mail.gmail.com>
References: <CACv3XEB_q5DrsWvQyQstTsURA7NQb+b5a0df6ULVHfdNAk4QHw@mail.gmail.com>
Message-ID: <CAPPM_gTNHNsuK7D_wobg7=Mbc=-GMPtMLXE7cahD7pnPp+UFRw@mail.gmail.com>

xts objects are _always_ a matrix, even if there's only one column (a
univariate series).  You need to drop the extra dimensions.

library(quantmod)
getSymbols("SPY;IEF")
ccf(Cl(SPY),Cl(IEF))  # error
ccf(drop(Cl(SPY)),drop(Cl(IEF)))

Best,
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com



On Tue, Nov 8, 2011 at 8:12 PM, Eric Thungstom
<eric.thungstrom at gmail.com> wrote:
> why won't cross correlation function work in this case ?
>
>
>> ccf(sp,st)Error in ccf(sp, st) : univariate time series only
>
>
>
>> head(sp) ? ? ? ? ? ? ? sp
> 1993-12-31 466.45
> 1994-01-07 469.90
> 1994-01-14 474.91
> 1994-01-21 474.72
> 1994-01-28 478.70
> 1994-02-04 469.81
>
>> class(sp)[1] "xts" "zoo"
>
>> str(sp)An ?xts? object from 1993-12-31 to 2011-10-28 containing:
> ?Data: num [1:899, 1] 466 470 475 475 479 ...
> ?- attr(*, "dimnames")=List of 2
> ?..$ : NULL
> ?..$ : chr "sp"
> ?Indexed by objects of class: [Date] TZ:
> ?xts Attributes:
> ?NULL
>
>> head(st) ? ? ? ? ? stress
> 1993-12-31 -0.453
> 1994-01-07 -0.442
> 1994-01-14 -0.435
> 1994-01-21 -0.449
> 1994-01-28 -0.462
> 1994-02-04 -0.513
>
>> class(st)[1] "xts" "zoo"
>
>> str(sp)An ?xts? object from 1993-12-31 to 2011-10-28 containing:
> ?Data: num [1:899, 1] 466 470 475 475 479 ...
> ?- attr(*, "dimnames")=List of 2
> ?..$ : NULL
> ?..$ : chr "sp"
> ?Indexed by objects of class: [Date] TZ:
> ?xts Attributes:
> ?NULL
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From manojsw at gmail.com  Wed Nov  9 11:48:59 2011
From: manojsw at gmail.com (Manoj)
Date: Wed, 9 Nov 2011 21:48:59 +1100
Subject: [R-SIG-Finance] Time interval logic
Message-ID: <CAMbyraa0VGdNEyBN8hBmKCwScZ6C+xJxkutH3KUuf8WwOas8gg@mail.gmail.com>

Hello,
    I am working on some tick-data and needed help computing the
following statistics:

     Assume the dataset to be an xts object of Price and Volume as shown below:
-------
Time	Prc	Vol	CumVol	Vol-Threshold	Vol_Residual	Time_Elapsed
10:01	24.01	20	20			
10:02	24.05	200	220			
10:03	23.99	120	340	300	40	3
10:04	24.02	125	465			
10:05	24.01	99	564			
10:06	24.02	231	795	300	195	4
10:07	23.99	1000	1795	300	895	2

-------

      From the above trade data - I am interested in finding out the
time taken to complete a certain volume threshold. The column in
question from above data is the "Time_Elapsed" column. I have used 300
shares as volume threshold in above example. Once the threshold is
reached, the excess volume for the currently processed trade is
allocated to next group. In example above - it takes 3 minutes to
complete 1st volume threshold (20+200+80) leaving behind a residual of
40 shares for next group. The second and third volume thresholds are
completed in 4 minutes and 2 minutes in the example above.

      What's the optimal way of speeding up the logic above?

Thanks.

Manoj


From brian at braverock.com  Wed Nov  9 14:33:36 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 09 Nov 2011 07:33:36 -0600
Subject: [R-SIG-Finance] Time interval logic
In-Reply-To: <CAMbyraa0VGdNEyBN8hBmKCwScZ6C+xJxkutH3KUuf8WwOas8gg@mail.gmail.com>
References: <CAMbyraa0VGdNEyBN8hBmKCwScZ6C+xJxkutH3KUuf8WwOas8gg@mail.gmail.com>
Message-ID: <1320845616.26353.36.camel@brian-rcg>

Pleaee follow the posting guide and provide a reproducible example, as
it is, you ask others to re-do work that you have already done, greatly
increasing the time to help you finish your project.


On Wed, 2011-11-09 at 21:48 +1100, Manoj wrote:

> Hello,
>     I am working on some tick-data and needed help computing the
> following statistics:

This is not tick data. it is one minute intraday observations.

>      Assume the dataset to be an xts object of Price and Volume as shown below:
> -------
> Time	Prc	Vol	CumVol	Vol-Threshold	Vol_Residual	Time_Elapsed
> 10:01	24.01	20	20			
> 10:02	24.05	200	220			
> 10:03	23.99	120	340	300	40	3
> 10:04	24.02	125	465			
> 10:05	24.01	99	564			
> 10:06	24.02	231	795	300	195	4
> 10:07	23.99	1000	1795	300	895	2

This does not appear to be an xts object, where the index would not be
called 'Time', would contain a date, and would not be labeled at all.

> -------
> 
>       From the above trade data - I am interested in finding out the
> time taken to complete a certain volume threshold. The column in
> question from above data is the "Time_Elapsed" column. I have used 300
> shares as volume threshold in above example. Once the threshold is
> reached, the excess volume for the currently processed trade is
> allocated to next group. In example above - it takes 3 minutes to
> complete 1st volume threshold (20+200+80) leaving behind a residual of
> 40 shares for next group. The second and third volume thresholds are
> completed in 4 minutes and 2 minutes in the example above.
> 
>       What's the optimal way of speeding up the logic above?


From jeffrey.ryan at lemnica.com  Wed Nov  9 16:22:06 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Wed, 9 Nov 2011 09:22:06 -0600
Subject: [R-SIG-Finance] Time interval logic
In-Reply-To: <1320845616.26353.36.camel@brian-rcg>
References: <CAMbyraa0VGdNEyBN8hBmKCwScZ6C+xJxkutH3KUuf8WwOas8gg@mail.gmail.com>
	<1320845616.26353.36.camel@brian-rcg>
Message-ID: <CABDUZc-pNP=ao1a1+orNipV=aDL4a29jRyaTuoqs9A1-0pAcTQ@mail.gmail.com>

Agreed, posting guideline and general list courtesy requires something
reproducible.

Here is my take:

x <- xts(c(20,200,120,125,99,231,1000),
as.POSIXct("2011-11-01")+seq(60,60*7,60))

index(x)[which(diff(cumsum(x) %/% 300) > 0)]

#[1] "2011-11-01 00:03:00 CDT" "2011-11-01 00:06:00 CDT"
#[3] "2011-11-01 00:07:00 CDT"

I don't follow how you are getting the time diff though, since I see 3
min, 3min and 1 min...

Best,
Jeff

On Wed, Nov 9, 2011 at 7:33 AM, Brian G. Peterson <brian at braverock.com> wrote:
> Pleaee follow the posting guide and provide a reproducible example, as
> it is, you ask others to re-do work that you have already done, greatly
> increasing the time to help you finish your project.
>
>
> On Wed, 2011-11-09 at 21:48 +1100, Manoj wrote:
>
>> Hello,
>> ? ? I am working on some tick-data and needed help computing the
>> following statistics:
>
> This is not tick data. it is one minute intraday observations.
>
>> ? ? ?Assume the dataset to be an xts object of Price and Volume as shown below:
>> -------
>> Time ?Prc ? ? Vol ? ? CumVol ?Vol-Threshold ? Vol_Residual ? ?Time_Elapsed
>> 10:01 24.01 ? 20 ? ? ?20
>> 10:02 24.05 ? 200 ? ? 220
>> 10:03 23.99 ? 120 ? ? 340 ? ? 300 ? ? 40 ? ? ?3
>> 10:04 24.02 ? 125 ? ? 465
>> 10:05 24.01 ? 99 ? ? ?564
>> 10:06 24.02 ? 231 ? ? 795 ? ? 300 ? ? 195 ? ? 4
>> 10:07 23.99 ? 1000 ? ?1795 ? ?300 ? ? 895 ? ? 2
>
> This does not appear to be an xts object, where the index would not be
> called 'Time', would contain a date, and would not be labeled at all.
>
>> -------
>>
>> ? ? ? From the above trade data - I am interested in finding out the
>> time taken to complete a certain volume threshold. The column in
>> question from above data is the "Time_Elapsed" column. I have used 300
>> shares as volume threshold in above example. Once the threshold is
>> reached, the excess volume for the currently processed trade is
>> allocated to next group. In example above - it takes 3 minutes to
>> complete 1st volume threshold (20+200+80) leaving behind a residual of
>> 40 shares for next group. The second and third volume thresholds are
>> completed in 4 minutes and 2 minutes in the example above.
>>
>> ? ? ? What's the optimal way of speeding up the logic above?
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From adam.ghandar at adelaide.edu.au  Thu Nov 10 04:54:10 2011
From: adam.ghandar at adelaide.edu.au (AGhandar)
Date: Wed, 9 Nov 2011 19:54:10 -0800 (PST)
Subject: [R-SIG-Finance] Sullivan, Timmerman and  White 1999:  TA rules,
	and R
In-Reply-To: <4D90FEA1.2030800@gmail.com>
References: <4D90FEA1.2030800@gmail.com>
Message-ID: <1320897250924-4022395.post@n4.nabble.com>

Dear all,

I came across this post while trying to do the same thing - I am a little
new to R and would be really grateful if anyone could provide any
information or an example of implementing a rule similar to the description
below. Especially if you have implemented this rule that would be really
helpful :-)

My initial attempt at implementing the filter rules described in the paper
(see description below) is along the lines of this:

library(TTR)

x<-0.01 # parameter
price <- 10 + c(0, cumsum(runif(100, -1, 1))) # random price series
change<-ROC(price,1) # daily price change

signal<-ifelse(change>=x,1,0)	+ ifelse(change<=-x,-1,0) 

The above line creates a signal 1 or -1 if the price rises or falls by x% on
any day, but the problem I have is that I can not see how it is possible to
implement the requirement to for instance "hold the position until the price
moves up x%" without a for loop and a set of complex conditions and flags.
Is this the only approach or are there some built in functions or approaches
using R that would make it much easier?

Many thanks in anticipation,

Adam 


     A. Filter Rules 
Filter rules are used in Alexander (1961) to assess the efficiency of stock 
price movements. Fama and Blume (1966) explain the standard filter rule: 
An x per cent filter is defined as follows: If the daily closing price of a 
particular security moves up at least x per cent, buy and hold the se- 
curity until its price moves down at least x per cent from a subsequent 
high, at which time simultaneously sell and go short. The short position 
is maintained until the daily closing price rises at least x per cent above 
a subsequent low at which time one covers and buys. Moves less than x 
per cent in either direction are ignored. (p. 227) 
The first item of consideration is how to define subsequent lows and highs. 
We will do this in two ways. As the above excerpt suggests, a subsequent 
high is the highest closing price achieved while holding a particular long 
position. Likewise, a subsequent low is the lowest closing price achieved 
while holding a particular short position. Alternatively, a low (high) 
can be 
defined as the most recent closing price that is less (greater) than the e 
previous closing prices. Next, we will expand the universe of filter 
rules by 
allowing a neutral position to be imposed. This is accomplished by 
liquidat- 
ing a long position when the price decreases y percent from the previous 
high, and covering a short position when the price increases y percent from 
the previous low. Following BLL, we also consider holding a given long or 
short position for a prespecified number of days, c, effectively 
ignoring all 
other signals generated during that time. 

--
View this message in context: http://r.789695.n4.nabble.com/Sullivan-Timmerman-and-White-1999-TA-rules-and-R-tp3413144p4022395.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From adam.ghandar at adelaide.edu.au  Thu Nov 10 07:22:05 2011
From: adam.ghandar at adelaide.edu.au (Adam Ghandar)
Date: Thu, 10 Nov 2011 16:52:05 +1030
Subject: [R-SIG-Finance] Sullivan, Timmerman and  White 1999:  TA rules,
	and R
In-Reply-To: <1320897250924-4022395.post@n4.nabble.com>
References: <4D90FEA1.2030800@gmail.com>
	<1320897250924-4022395.post@n4.nabble.com>
Message-ID: <012301cc9f71$111e9700$335bc500$@ghandar@adelaide.edu.au>

Further to the earlier example, a more complete way to implement the
description of filter rules in Sullivan, Timmerman and  White 1999 (see
below) might be similar to this, but it seems very slow (and possibly not
correct)?

library(TTR)

price <- 1000 + c(0, cumsum(runif(500, -10, 10)))
x<-0.01
e<-10
signal<-filter(price,x,e)

filter <- function(price,x,e,...) {
	
	signal<-rep(0,NROW(price))

	for(i in seq(e,NROW(signal))){
	
signal[i]<-getSignal(price[i],price[i-1],signal[i-1],x,min(price[i-e:i]),max
(price[i-e:i]))	
	}
	
	signal	
}  

getSignal<-function(price,lastPrice,lastPos, x,recentL,recentH){
	# first check if a long or short position should be initiated
	change<-price/lastPrice-1	
	if( change>=x && lastPos!= -1)
		return (1)
	else if(change<=-x && lastPos!=1)
		return(-1)	
	
	# check if position should be changed - 
	if(lastPos==1){
		if(price<=recentH*(1-x))  #"hold until price moves down x
percent from a subsequent high"
			return(-1)
		}
	else if(lastPos==-1){
		if(price>=recentL*(1+x)) #  #"short until price moves up x
percent from a subsequent low"
			return(1)	
		}
	return(lastPos)
	}


Any thoughts would be much appreciated, and sorry for sending two emails
about this... the first example wasn't complete.

-----Original Message-----
From: r-sig-finance-bounces at r-project.org
[mailto:r-sig-finance-bounces at r-project.org] On Behalf Of AGhandar
Sent: Thursday, 10 November 2011 2:24 PM
To: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Sullivan, Timmerman and White 1999: TA rules,
and R

Dear all,

I came across this post while trying to do the same thing - I am a little
new to R and would be really grateful if anyone could provide any
information or an example of implementing a rule similar to the description
below. Especially if you have implemented this rule that would be really
helpful :-)

My initial attempt at implementing the filter rules described in the paper
(see description below) is along the lines of this:

library(TTR)

x<-0.01 # parameter
price <- 10 + c(0, cumsum(runif(100, -1, 1))) # random price series
change<-ROC(price,1) # daily price change

signal<-ifelse(change>=x,1,0)	+ ifelse(change<=-x,-1,0) 

The above line creates a signal 1 or -1 if the price rises or falls by x% on
any day, but the problem I have is that I can not see how it is possible to
implement the requirement to for instance "hold the position until the price
moves up x%" without a for loop and a set of complex conditions and flags.
Is this the only approach or are there some built in functions or approaches
using R that would make it much easier?

Many thanks in anticipation,

Adam 


     A. Filter Rules 
Filter rules are used in Alexander (1961) to assess the efficiency of stock 
price movements. Fama and Blume (1966) explain the standard filter rule: 
An x per cent filter is defined as follows: If the daily closing price of a 
particular security moves up at least x per cent, buy and hold the se- 
curity until its price moves down at least x per cent from a subsequent 
high, at which time simultaneously sell and go short. The short position 
is maintained until the daily closing price rises at least x per cent above 
a subsequent low at which time one covers and buys. Moves less than x 
per cent in either direction are ignored. (p. 227) 
The first item of consideration is how to define subsequent lows and highs. 
We will do this in two ways. As the above excerpt suggests, a subsequent 
high is the highest closing price achieved while holding a particular long 
position. Likewise, a subsequent low is the lowest closing price achieved 
while holding a particular short position. Alternatively, a low (high) 
can be 
defined as the most recent closing price that is less (greater) than the e 
previous closing prices. Next, we will expand the universe of filter 
rules by 
allowing a neutral position to be imposed. This is accomplished by 
liquidat- 
ing a long position when the price decreases y percent from the previous 
high, and covering a short position when the price increases y percent from 
the previous low. Following BLL, we also consider holding a given long or 
short position for a prespecified number of days, c, effectively 
ignoring all 
other signals generated during that time. 

--
View this message in context:
http://r.789695.n4.nabble.com/Sullivan-Timmerman-and-White-1999-TA-rules-and
-R-tp3413144p4022395.html
Sent from the Rmetrics mailing list archive at Nabble.com.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.


From john.laing at gmail.com  Thu Nov 10 13:19:47 2011
From: john.laing at gmail.com (John Laing)
Date: Thu, 10 Nov 2011 07:19:47 -0500
Subject: [R-SIG-Finance] Download RBloomberg for R-2.14.0
In-Reply-To: <CAA3Wa=tT9i6xVBzrD0wBxSCUGG90QX5VKnesCmtzhgCa5DPCtA@mail.gmail.com>
References: <1320689500.7279.YahooMailNeo@web113508.mail.gq1.yahoo.com>
	<CAA3Wa=tT9i6xVBzrD0wBxSCUGG90QX5VKnesCmtzhgCa5DPCtA@mail.gmail.com>
Message-ID: <CAA3Wa=sv8XtZFLSszDOcm-TvxdKZCD2gXJ-WOVETwcuV8hD9Sg@mail.gmail.com>

A 32-bit RBloomberg build for R 2.14.0 has been posted. It can be
installed by the usual process:

install.packages("RBloomberg", repos = "http://r.findata.org")

Please let me know if you experience any issues.

John


On Mon, Nov 7, 2011 at 2:14 PM, John Laing <john.laing at gmail.com> wrote:
> Hi Adam,
>
> You did nothing wrong, I haven't yet posted RBloomberg binaries for R
> 2.14.0. I hope to get that taken care of soon, possibly this evening.
>
> John
>
> On Mon, Nov 7, 2011 at 1:11 PM, Adam Xia <axianyc at yahoo.com> wrote:
>> Hello Friends,
>>
>> I just installed R-2.14.0 and tried to install RBloomberg package?by?running: install.packages("RBloomberg",repos="http://r.findata.org/").?However, I received message to indicate that the package "is not avaiable (for R version 2.14.0)". Should I wait for more days or something I did wrong? I also encountered the same issue for Rcompression package from omegahat.com. Thank you for your kindly reply.
>>
>> AX
>> ? ? ? ?[[alternative HTML version deleted]]
>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>


From colstat at gmail.com  Thu Nov 10 17:27:30 2011
From: colstat at gmail.com (Colstat)
Date: Thu, 10 Nov 2011 11:27:30 -0500
Subject: [R-SIG-Finance] Download RBloomberg for R-2.14.0
In-Reply-To: <CAA3Wa=sv8XtZFLSszDOcm-TvxdKZCD2gXJ-WOVETwcuV8hD9Sg@mail.gmail.com>
References: <1320689500.7279.YahooMailNeo@web113508.mail.gq1.yahoo.com>
	<CAA3Wa=tT9i6xVBzrD0wBxSCUGG90QX5VKnesCmtzhgCa5DPCtA@mail.gmail.com>
	<CAA3Wa=sv8XtZFLSszDOcm-TvxdKZCD2gXJ-WOVETwcuV8hD9Sg@mail.gmail.com>
Message-ID: <CABc7NqEDUyrWmZxKU0WYP8DDch1HdiyqQygA-gDFPDSFC7XrJA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111110/d5c88256/attachment.pl>

From Danilo.Mercurio at Sparinvest.com  Thu Nov 10 17:43:49 2011
From: Danilo.Mercurio at Sparinvest.com (Mercurio Danilo 1850 SPI)
Date: Thu, 10 Nov 2011 16:43:49 +0000
Subject: [R-SIG-Finance] Download RBloomberg for R-2.14.0
In-Reply-To: <CAA3Wa=sv8XtZFLSszDOcm-TvxdKZCD2gXJ-WOVETwcuV8hD9Sg@mail.gmail.com>
References: <1320689500.7279.YahooMailNeo@web113508.mail.gq1.yahoo.com>
	<CAA3Wa=tT9i6xVBzrD0wBxSCUGG90QX5VKnesCmtzhgCa5DPCtA@mail.gmail.com>
	<CAA3Wa=sv8XtZFLSszDOcm-TvxdKZCD2gXJ-WOVETwcuV8hD9Sg@mail.gmail.com>
Message-ID: <1438F6C5E7F7884293F0B114502EA6F207C34C@m0187.s-mxs.net>

Hi!

I just tried the installation of Rbloomberg on R.14.0

The installation is apparently succesful (no error)

I can run the command: "library(Rbloomber)", and no error message appears.

However the command "conn <- blpConnect()" does not work. The console simply freezesand I have to kill R.

I am still using R.12.1 with a functioning Rbloomberg and I am deeply thankful to he developpers/maitainers.
Best!

Danilo

-----Urspr?ngliche Nachricht-----
Von: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag von John Laing
Gesendet: Donnerstag, 10. November 2011 13:20
An: Adam Xia
Cc: r-sig-finance at r-project.org
Betreff: Re: [R-SIG-Finance] Download RBloomberg for R-2.14.0 [bayes][heur]

A 32-bit RBloomberg build for R 2.14.0 has been posted. It can be
installed by the usual process:

install.packages("RBloomberg", repos = "http://r.findata.org")

Please let me know if you experience any issues.

John


On Mon, Nov 7, 2011 at 2:14 PM, John Laing <john.laing at gmail.com> wrote:
> Hi Adam,
>
> You did nothing wrong, I haven't yet posted RBloomberg binaries for R
> 2.14.0. I hope to get that taken care of soon, possibly this evening.
>
> John
>
> On Mon, Nov 7, 2011 at 1:11 PM, Adam Xia <axianyc at yahoo.com> wrote:
>> Hello Friends,
>>
>> I just installed R-2.14.0 and tried to install RBloomberg package?by?running: install.packages("RBloomberg",repos="http://r.findata.org/").?However, I received message to indicate that the package "is not avaiable (for R version 2.14.0)". Should I wait for more days or something I did wrong? I also encountered the same issue for Rcompression package from omegahat.com. Thank you for your kindly reply.
>>
>> AX
>> ? ? ? ?[[alternative HTML version deleted]]
>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From pgilbert at bank-banque-canada.ca  Thu Nov 10 19:28:40 2011
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 10 Nov 2011 18:28:40 +0000
Subject: [R-SIG-Finance] DBI solution
In-Reply-To: <CAJ01uwoaqiyMCsPEawa16yRm-vuStN=Rsan4Kfk2Wst5qcqYNg@mail.gmail.com>
References: <CAJ01uwoaqiyMCsPEawa16yRm-vuStN=Rsan4Kfk2Wst5qcqYNg@mail.gmail.com>
Message-ID: <6441154A9FF1CD4386AF4ABF141A056D2A777E16@WMEXOSCD2-N1.bocad.bank-banque-canada.ca>

Ben

(Possibly too late to be preliminary guidance, but ...)

TSdbi is the base package in a group of packages, including TSPostgreSQL, which try to provide a common interface (API) to time series databases. That is, you specify the connection, and after that all of your R code syntax can be the same, and does not depend on the specifics of the underlying mechanism. These packages are almost all wrappers for other packages (eg RPostgreSQL), so the main benefits to using them rather than the underlying packages are that they provide a common interface, and a mechanism for returning a specified time series representation. (For example, the fame package returns tis series, but TSfame handles conversion and allows the possibility of returning other representations like zoo series.)

The SQL variants (TSPostgreSQL, TSMySQL, TSSQLite, TSodbc, and untested TSOracle) include table structure definitions for the database. The database does not need to be built with R, but the table structure needs to be respected for the TS* SQL variants to work.

The non-SQL variants (TSfame, TSxls, TSgetSymbol, TShistQuote, ...) pull data from other sources, mostly the web  except for TSfame. 

With the SQL tables I believe series of daily frequency and lower are handled fairly well. (I work mostly with monthly and quarterly data, but also use daily and weekly data.) In theory, tick data (time stamped series) are also handled, but I have never work with that kind of data, so it is not well tested.

The tables also provide a mechanism for storing meta data descriptions of series, so you can store company descriptions, but there is no SQL structure within the description. That is, you could not do a SQL query to select certain types of businesses based on the description. (This would probably not be too difficult to implement, but it is not in the structure provided.)

There is a not very well tested mechanism for handling series name changes (by an alias). I believe this could be used for ticker changes, but I'm not sure.

Being an economist rather than a financial person, I'm not exactly sure what you mean by "adjust for look-ahead, create new factor values, transform, etc." The database stores the time series data, but these things sound like the sort of thing I would do in R rather than in the database.

If you already have a backend SQL database, and are just building the interface not building the database, then the TSdbi package has a function TSquery that may be useful. I use this to construct time series from a relational SQL database that was built for purposes other than storing time series.

I do not work much in Windows, but the TS* packages should work without problem, as long as the underlying packages work in Windows. Thus, you need the PostgreSQL drivers to install RPostgreSQL, and then everything should work.

HTH,
Paul

> -----Original Message-----
> From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-
> bounces at r-project.org] On Behalf Of Ben Nachtrieb
> Sent: November 4, 2011 7:08 PM
> To: r-sig-finance at r-project.org
> Subject: [R-SIG-Finance] DBI solution
> 
> Hello,
> 
> I'm building (from the ground up) a PostgreSQL time series database for
> use
> with R. I'd like to get some preliminary guidance (help me get pointed
> in
> the correct direction).
> 
> Here are some details: I am PC/Windows centric. I have data of all
> frequencies equal to or greater than Daily (no inter-day data). We have
> prices and technical data, macro data, company descriptive, and
> financial
> data. I don't have to do any 'DBA' stuff per-say (no messy stuff like
> split
> adjustments, ticker changes, etc.) as that is done for me; however, I
> will
> have to adjust for look-ahead, create new factor values, transform,
> etc.
> the data that we have and store it in database form. Can someone point
> me
> to the best solution/packages for this given that I have to stay in the
> R
> and PostgreSQL world?
> 
> I see RpgSQL, RposgreSQL, TSPostgreSQL, DBI, TSdbi, and much more... I
> am
> hoping someone can narrow things down for me.
> 
> Thanks so much!
> --
> Ben
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
====================================================================================

La version fran?aise suit le texte anglais.

------------------------------------------------------------------------------------

This email may contain privileged and/or confidential information, and the Bank of
Canada does not waive any related rights. Any distribution, use, or copying of this
email or the information it contains by other than the intended recipient is
unauthorized. If you received this email in error please delete it immediately from
your system and notify the sender promptly by email that you have done so. 

------------------------------------------------------------------------------------

Le pr?sent courriel peut contenir de l'information privil?gi?e ou confidentielle.
La Banque du Canada ne renonce pas aux droits qui s'y rapportent. Toute diffusion,
utilisation ou copie de ce courriel ou des renseignements qu'il contient par une
personne autre que le ou les destinataires d?sign?s est interdite. Si vous recevez
ce courriel par erreur, veuillez le supprimer imm?diatement et envoyer sans d?lai ?
l'exp?diteur un message ?lectronique pour l'aviser que vous avez ?limin? de votre
ordinateur toute copie du courriel re?u.

From rkevinburton at charter.net  Thu Nov 10 19:44:53 2011
From: rkevinburton at charter.net (rkevinburton at charter.net)
Date: Thu, 10 Nov 2011 13:44:53 -0500 (EST)
Subject: [R-SIG-Finance] DBI solution
Message-ID: <3193554c.3636d.1338ecbfcbe.Webtop.49@charter.net>

Is there a Windows SQL Server variant?


On Thu, Nov 10, 2011 at 12:28 PM, Paul Gilbert wrote:

> Ben
>
> (Possibly too late to be preliminary guidance, but ...)
>
> TSdbi is the base package in a group of packages, including 
> TSPostgreSQL, which try to provide a common interface (API) to time 
> series databases. That is, you specify the connection, and after that 
> all of your R code syntax can be the same, and does not depend on the 
> specifics of the underlying mechanism. These packages are almost all 
> wrappers for other packages (eg RPostgreSQL), so the main benefits to 
> using them rather than the underlying packages are that they provide a 
> common interface, and a mechanism for returning a specified time 
> series representation. (For example, the fame package returns tis 
> series, but TSfame handles conversion and allows the possibility of 
> returning other representations like zoo series.)
>
> The SQL variants (TSPostgreSQL, TSMySQL, TSSQLite, TSodbc, and 
> untested TSOracle) include table structure definitions for the 
> database. The database does not need to be built with R, but the table 
> structure needs to be respected for the TS* SQL variants to work.
>
> The non-SQL variants (TSfame, TSxls, TSgetSymbol, TShistQuote, ...) 
> pull data from other sources, mostly the web  except for TSfame.
> With the SQL tables I believe series of daily frequency and lower are 
> handled fairly well. (I work mostly with monthly and quarterly data, 
> but also use daily and weekly data.) In theory, tick data (time 
> stamped series) are also handled, but I have never work with that kind 
> of data, so it is not well tested.
>
> The tables also provide a mechanism for storing meta data descriptions 
> of series, so you can store company descriptions, but there is no SQL 
> structure within the description. That is, you could not do a SQL 
> query to select certain types of businesses based on the description. 
> (This would probably not be too difficult to implement, but it is not 
> in the structure provided.)
>
> There is a not very well tested mechanism for handling series name 
> changes (by an alias). I believe this could be used for ticker 
> changes, but I'm not sure.
>
> Being an economist rather than a financial person, I'm not exactly 
> sure what you mean by "adjust for look-ahead, create new factor 
> values, transform, etc." The database stores the time series data, but 
> these things sound like the sort of thing I would do in R rather than 
> in the database.
>
> If you already have a backend SQL database, and are just building the 
> interface not building the database, then the TSdbi package has a 
> function TSquery that may be useful. I use this to construct time 
> series from a relational SQL database that was built for purposes 
> other than storing time series.
>
> I do not work much in Windows, but the TS* packages should work 
> without problem, as long as the underlying packages work in Windows. 
> Thus, you need the PostgreSQL drivers to install RPostgreSQL, and then 
> everything should work.
>
> HTH,
> Paul
>
>> -----Original Message-----
>> From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-
>> bounces at r-project.org] On Behalf Of Ben Nachtrieb
>> Sent: November 4, 2011 7:08 PM
>> To: r-sig-finance at r-project.org
>> Subject: [R-SIG-Finance] DBI solution
>>
>> Hello,
>>
>> I'm building (from the ground up) a PostgreSQL time series database 
>> for
>> use
>> with R. I'd like to get some preliminary guidance (help me get 
>> pointed
>> in
>> the correct direction).
>>
>> Here are some details: I am PC/Windows centric. I have data of all
>> frequencies equal to or greater than Daily (no inter-day data). We 
>> have
>> prices and technical data, macro data, company descriptive, and
>> financial
>> data. I don't have to do any 'DBA' stuff per-say (no messy stuff like
>> split
>> adjustments, ticker changes, etc.) as that is done for me; however, I
>> will
>> have to adjust for look-ahead, create new factor values, transform,
>> etc.
>> the data that we have and store it in database form. Can someone 
>> point
>> me
>> to the best solution/packages for this given that I have to stay in 
>> the
>> R
>> and PostgreSQL world?
>>
>> I see RpgSQL, RposgreSQL, TSPostgreSQL, DBI, TSdbi, and much more... 
>> I
>> am
>> hoping someone can narrow things down for me.
>>
>> Thanks so much!
>> --
>> Ben
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R 
>> questions
>> should go.
> 
> ====================================================================================
>
> La version fran?aise suit le texte anglais.
>
> 
> ------------------------------------------------------------------------------------
>
> This email may contain privileged and/or confidential information, and 
> the Bank of
> Canada does not waive any related rights. Any distribution, use, or 
> copying of this
> email or the information it contains by other than the intended 
> recipient is
> unauthorized. If you received this email in error please delete it 
> immediately from
> your system and notify the sender promptly by email that you have done 
> so.
> 
> ------------------------------------------------------------------------------------
>
> Le pr?sent courriel peut contenir de l'information privil?gi?e ou 
> confidentielle.
> La Banque du Canada ne renonce pas aux droits qui s'y rapportent. 
> Toute diffusion,
> utilisation ou copie de ce courriel ou des renseignements qu'il 
> contient par une
> personne autre que le ou les destinataires d?sign?s est interdite. Si 
> vous recevez
> ce courriel par erreur, veuillez le supprimer imm?diatement et envoyer 
> sans d?lai ?
> l'exp?diteur un message ?lectronique pour l'aviser que vous avez 
> ?limin? de votre
> ordinateur toute copie du courriel re?u.
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R 
> questions should go.


From john.laing at gmail.com  Thu Nov 10 22:39:09 2011
From: john.laing at gmail.com (John Laing)
Date: Thu, 10 Nov 2011 16:39:09 -0500
Subject: [R-SIG-Finance] Download RBloomberg for R-2.14.0
In-Reply-To: <CABc7NqEDUyrWmZxKU0WYP8DDch1HdiyqQygA-gDFPDSFC7XrJA@mail.gmail.com>
References: <1320689500.7279.YahooMailNeo@web113508.mail.gq1.yahoo.com>
	<CAA3Wa=tT9i6xVBzrD0wBxSCUGG90QX5VKnesCmtzhgCa5DPCtA@mail.gmail.com>
	<CAA3Wa=sv8XtZFLSszDOcm-TvxdKZCD2gXJ-WOVETwcuV8hD9Sg@mail.gmail.com>
	<CABc7NqEDUyrWmZxKU0WYP8DDch1HdiyqQygA-gDFPDSFC7XrJA@mail.gmail.com>
Message-ID: <CAA3Wa=uLHiLhf8D23nXKdU5eMZiaiB32yP3ZproYp8pCUx2Lxw@mail.gmail.com>

This is likely due to an old version of the API. You can upgrade in
Bloomberg using WAPI<GO>. That should work, but if it doesn't please
let me know where the blpapi3.jar file is located and I can update the
package to look in the right place.

John

On Thu, Nov 10, 2011 at 11:27 AM, Colstat <colstat at gmail.com> wrote:
> Hi, John
> I just installed it.? But after installation something like this happens.
>
>> library(RBloomberg)
>> conn <- blpConnect()
> R version 2.13.1 (2011-07-08)
> rJava Version 0.9-1
> RBloomberg Version 0.4-150
> Java environment initialized successfully.
> Looking for most recent blpapi3.jar file...
> Error in blpConnect.Java("warning", NULL, TRUE, NULL) :
> ? Can't find C:\blp\API\APIv3\JavaAPI please confirm you have Bloomberg
> Version 3 Java API installed. If it's in a different location, please report
> this to RBloomberg package maintainer.
>
>
> On Thu, Nov 10, 2011 at 7:19 AM, John Laing <john.laing at gmail.com> wrote:
>>
>> A 32-bit RBloomberg build for R 2.14.0 has been posted. It can be
>> installed by the usual process:
>>
>> install.packages("RBloomberg", repos = "http://r.findata.org")
>>
>> Please let me know if you experience any issues.
>>
>> John
>>
>>
>> On Mon, Nov 7, 2011 at 2:14 PM, John Laing <john.laing at gmail.com> wrote:
>> > Hi Adam,
>> >
>> > You did nothing wrong, I haven't yet posted RBloomberg binaries for R
>> > 2.14.0. I hope to get that taken care of soon, possibly this evening.
>> >
>> > John
>> >
>> > On Mon, Nov 7, 2011 at 1:11 PM, Adam Xia <axianyc at yahoo.com> wrote:
>> >> Hello Friends,
>> >>
>> >> I just installed R-2.14.0 and tried to install RBloomberg
>> >> package?by?running:
>> >> install.packages("RBloomberg",repos="http://r.findata.org/").?However, I
>> >> received message to indicate that the package "is not avaiable (for R
>> >> version 2.14.0)". Should I wait for more days or something I did wrong? I
>> >> also encountered the same issue for Rcompression package from omegahat.com.
>> >> Thank you for your kindly reply.
>> >>
>> >> AX
>> >> ? ? ? ?[[alternative HTML version deleted]]
>> >>
>> >>
>> >> _______________________________________________
>> >> R-SIG-Finance at r-project.org mailing list
>> >> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> >> -- Subscriber-posting only. If you want to post, subscribe first.
>> >> -- Also note that this is not the r-help list where general R questions
>> >> should go.
>> >>
>> >
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>
>


From john.laing at gmail.com  Thu Nov 10 22:40:54 2011
From: john.laing at gmail.com (John Laing)
Date: Thu, 10 Nov 2011 16:40:54 -0500
Subject: [R-SIG-Finance] Download RBloomberg for R-2.14.0
In-Reply-To: <1438F6C5E7F7884293F0B114502EA6F207C34C@m0187.s-mxs.net>
References: <1320689500.7279.YahooMailNeo@web113508.mail.gq1.yahoo.com>
	<CAA3Wa=tT9i6xVBzrD0wBxSCUGG90QX5VKnesCmtzhgCa5DPCtA@mail.gmail.com>
	<CAA3Wa=sv8XtZFLSszDOcm-TvxdKZCD2gXJ-WOVETwcuV8hD9Sg@mail.gmail.com>
	<1438F6C5E7F7884293F0B114502EA6F207C34C@m0187.s-mxs.net>
Message-ID: <CAA3Wa=tR0fr3ExHQ-bUMh9u9+Urf5pLONjk7Vh3Go-1GaZYE9w@mail.gmail.com>

Danilo,

What version of RBloomberg are you using with R 2.12? You can find
this out with a call to sessionInfo().
It is probably an old version that didn't use the Java version of the
Bloomberg API. If that is the case, you will need to upgrade (using
WAPI<GO>, as in my other message) and install the rJava package.

John

On Thu, Nov 10, 2011 at 11:43 AM, Mercurio Danilo 1850 SPI
<Danilo.Mercurio at sparinvest.com> wrote:
> Hi!
>
> I just tried the installation of Rbloomberg on R.14.0
>
> The installation is apparently succesful (no error)
>
> I can run the command: "library(Rbloomber)", and no error message appears.
>
> However the command "conn <- blpConnect()" does not work. The console simply freezesand I have to kill R.
>
> I am still using R.12.1 with a functioning Rbloomberg and I am deeply thankful to he developpers/maitainers.
> Best!
>
> Danilo
>
> -----Urspr?ngliche Nachricht-----
> Von: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag von John Laing
> Gesendet: Donnerstag, 10. November 2011 13:20
> An: Adam Xia
> Cc: r-sig-finance at r-project.org
> Betreff: Re: [R-SIG-Finance] Download RBloomberg for R-2.14.0 [bayes][heur]
>
> A 32-bit RBloomberg build for R 2.14.0 has been posted. It can be
> installed by the usual process:
>
> install.packages("RBloomberg", repos = "http://r.findata.org")
>
> Please let me know if you experience any issues.
>
> John
>
>
> On Mon, Nov 7, 2011 at 2:14 PM, John Laing <john.laing at gmail.com> wrote:
>> Hi Adam,
>>
>> You did nothing wrong, I haven't yet posted RBloomberg binaries for R
>> 2.14.0. I hope to get that taken care of soon, possibly this evening.
>>
>> John
>>
>> On Mon, Nov 7, 2011 at 1:11 PM, Adam Xia <axianyc at yahoo.com> wrote:
>>> Hello Friends,
>>>
>>> I just installed R-2.14.0 and tried to install RBloomberg package?by?running: install.packages("RBloomberg",repos="http://r.findata.org/").?However, I received message to indicate that the package "is not avaiable (for R version 2.14.0)". Should I wait for more days or something I did wrong? I also encountered the same issue for Rcompression package from omegahat.com. Thank you for your kindly reply.
>>>
>>> AX
>>> ? ? ? ?[[alternative HTML version deleted]]
>>>
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>>
>>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From shekhardk at gmail.com  Fri Nov 11 01:28:07 2011
From: shekhardk at gmail.com (Shekhar Gupta)
Date: Fri, 11 Nov 2011 05:58:07 +0530
Subject: [R-SIG-Finance] Dealing with live quotes in R
Message-ID: <CAM6Bxr-EVqtmjAS3f=7aBHiTAm_SqedzMuZRmh8wSHNsPQAawA@mail.gmail.com>

Dear all,

I am saving options quotes on my server. How can I get these quotes in
real time in R to display a real time 3d graph on my website? I would
really appreciate suggestions.

Thank you


From Darko.Roupell at cba.com.au  Fri Nov 11 01:32:35 2011
From: Darko.Roupell at cba.com.au (Roupell, Darko)
Date: Fri, 11 Nov 2011 11:32:35 +1100
Subject: [R-SIG-Finance] Dealing with live quotes in R
In-Reply-To: <CAM6Bxr-EVqtmjAS3f=7aBHiTAm_SqedzMuZRmh8wSHNsPQAawA@mail.gmail.com>
References: <CAM6Bxr-EVqtmjAS3f=7aBHiTAm_SqedzMuZRmh8wSHNsPQAawA@mail.gmail.com>
Message-ID: <E8CC19FC66B5FB46B5511B6E8AE814185B3FBDE687@VAUNSW137.au.cbainet.com>

If you are first saving those options to SQL and then retrieving them in R and use ggplot to get 3 d chart, You will be between 20sec to 1minute behind the "real-time".

__________________________________________________
Commonwealth Bank 
Darko Roupell 
Associate Quantitative Analyst 
Institutional Banking & Markets
Equities Research
Darling Park Tower 1
Level 23, 201 Sussex Street
Sydney, NSW 200
P:  +61 2 9117 1254
F:  +61 2 9118 1000
M: +61 400 170 515
E: Darko.Roupell at cba.com.au 
Our vision is to be Australia's finest financial services organisation through excelling in customer service.

Email Security
This email is sent solely for informational purposes. Hoax emails, commonly referred to as phishing, can appear to be from the Commonwealth Bank and ask you to update or confirm details such as client numbers, passwords, personal identification questions, contact details or account numbers. The Commonwealth Bank will never send you an email asking you to confirm, update or reveal your confidential banking information. 
Important Information
Produced by Global Markets Research, a business unit of Commonwealth Bank of Australia ABN 48 123 123 124 - AFSL 234945 (Commonwealth Bank). This publication is based on information available at the time of publishing.? We believe that the information in this communication is correct and any opinions, conclusions or recommendations are reasonably held or made as at the time of its compilation, but no warranty is made as to accuracy, reliability or completeness.? To the extent permitted by law, neither Commonwealth Bank nor any of its subsidiaries accept liability to any person for loss or damage arising from the use of this communication. This communication does not purport to be a complete statement or summary.? 
The information provided has been prepared without considering your objectives, financial situation or needs, and before acting on the information, you should consider its appropriateness to your circumstances. No person should act on the basis of this report without considering and if necessary taking appropriate professional advice upon their own particular circumstances.? 
Commonwealth Bank of Australia, as a provider of investment, borrowing and other financial services undertakes financial transactions with many corporate entities in Australia. This may include any corporate issuer referred to in this communication. Commonwealth Bank and its subsidiaries have effected or may effect transactions for their own account in any investments or related investments referred to herein. In the case of certain securities Commonwealth Bank is or may be the only market maker.

-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Shekhar Gupta
Sent: Friday, 11 November 2011 11:28 AM
To: r-sig-finance at r-project.org
Subject: [R-SIG-Finance] Dealing with live quotes in R

Dear all,

I am saving options quotes on my server. How can I get these quotes in
real time in R to display a real time 3d graph on my website? I would
really appreciate suggestions.

Thank you

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

************** IMPORTANT MESSAGE *****************************       
This e-mail message is intended only for the addressee(s) and contains information which may be
confidential. 
If you are not the intended recipient please advise the sender by return email, do not use or
disclose the contents, and delete the message and any attachments from your system. Unless
specifically indicated, this email does not constitute formal advice or commitment by the sender
or the Commonwealth Bank of Australia (ABN 48 123 123 124) or its subsidiaries. 
We can be contacted through our web site: commbank.com.au. 
If you no longer wish to receive commercial electronic messages from us, please reply to this
e-mail by typing Unsubscribe in the subject line. 


From jeff.a.ryan at gmail.com  Fri Nov 11 02:28:50 2011
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Thu, 10 Nov 2011 19:28:50 -0600
Subject: [R-SIG-Finance] Dealing with live quotes in R
In-Reply-To: <E8CC19FC66B5FB46B5511B6E8AE814185B3FBDE687@VAUNSW137.au.cbainet.com>
References: <CAM6Bxr-EVqtmjAS3f=7aBHiTAm_SqedzMuZRmh8wSHNsPQAawA@mail.gmail.com>
	<E8CC19FC66B5FB46B5511B6E8AE814185B3FBDE687@VAUNSW137.au.cbainet.com>
Message-ID: <AFE776B0-CC4C-4D14-B6B5-DF2F586B4206@gmail.com>



On Nov 10, 2011, at 6:32 PM, "Roupell, Darko" <Darko.Roupell at cba.com.au> wrote:

> If you are first saving those options to SQL and then retrieving them in R and use ggplot to get 3 d chart, You will be between 20sec to 1minute behind the "real-time".
> 
And that is just the time it takes for ggplot to draw. 

:-)

> __________________________________________________
> Commonwealth Bank 
> Darko Roupell 
> Associate Quantitative Analyst 
> Institutional Banking & Markets
> Equities Research
> Darling Park Tower 1
> Level 23, 201 Sussex Street
> Sydney, NSW 200
> P:  +61 2 9117 1254
> F:  +61 2 9118 1000
> M: +61 400 170 515
> E: Darko.Roupell at cba.com.au 
> Our vision is to be Australia's finest financial services organisation through excelling in customer service.
> 
> Email Security
> This email is sent solely for informational purposes. Hoax emails, commonly referred to as phishing, can appear to be from the Commonwealth Bank and ask you to update or confirm details such as client numbers, passwords, personal identification questions, contact details or account numbers. The Commonwealth Bank will never send you an email asking you to confirm, update or reveal your confidential banking information. 
> Important Information
> Produced by Global Markets Research, a business unit of Commonwealth Bank of Australia ABN 48 123 123 124 - AFSL 234945 (Commonwealth Bank). This publication is based on information available at the time of publishing.  We believe that the information in this communication is correct and any opinions, conclusions or recommendations are reasonably held or made as at the time of its compilation, but no warranty is made as to accuracy, reliability or completeness.  To the extent permitted by law, neither Commonwealth Bank nor any of its subsidiaries accept liability to any person for loss or damage arising from the use of this communication. This communication does not purport to be a complete statement or summary.  
> The information provided has been prepared without considering your objectives, financial situation or needs, and before acting on the information, you should consider its appropriateness to your circumstances. No person should act on the basis of this report without considering and if necessary taking appropriate professional advice upon their own particular circumstances.  
> Commonwealth Bank of Australia, as a provider of investment, borrowing and other financial services undertakes financial transactions with many corporate entities in Australia. This may include any corporate issuer referred to in this communication. Commonwealth Bank and its subsidiaries have effected or may effect transactions for their own account in any investments or related investments referred to herein. In the case of certain securities Commonwealth Bank is or may be the only market maker.
> 
> -----Original Message-----
> From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Shekhar Gupta
> Sent: Friday, 11 November 2011 11:28 AM
> To: r-sig-finance at r-project.org
> Subject: [R-SIG-Finance] Dealing with live quotes in R
> 
> Dear all,
> 
> I am saving options quotes on my server. How can I get these quotes in
> real time in R to display a real time 3d graph on my website? I would
> really appreciate suggestions.
> 
> Thank you
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
> 
> ************** IMPORTANT MESSAGE *****************************       
> This e-mail message is intended only for the addressee(s) and contains information which may be
> confidential. 
> If you are not the intended recipient please advise the sender by return email, do not use or
> disclose the contents, and delete the message and any attachments from your system. Unless
> specifically indicated, this email does not constitute formal advice or commitment by the sender
> or the Commonwealth Bank of Australia (ABN 48 123 123 124) or its subsidiaries. 
> We can be contacted through our web site: commbank.com.au. 
> If you no longer wish to receive commercial electronic messages from us, please reply to this
> e-mail by typing Unsubscribe in the subject line. 
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From eric.thungstrom at gmail.com  Fri Nov 11 04:38:17 2011
From: eric.thungstrom at gmail.com (Eric Thungstom)
Date: Thu, 10 Nov 2011 22:38:17 -0500
Subject: [R-SIG-Finance] problem with plot.xts
Message-ID: <CACv3XECGvv2cdPBJBuEpDeWNJhWPgr2E0aAvdsS4Fk7t7A2NHA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111110/b0c0f2ef/attachment.pl>

From josh.m.ulrich at gmail.com  Fri Nov 11 08:31:22 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Fri, 11 Nov 2011 01:31:22 -0600
Subject: [R-SIG-Finance] problem with plot.xts
In-Reply-To: <CACv3XECGvv2cdPBJBuEpDeWNJhWPgr2E0aAvdsS4Fk7t7A2NHA@mail.gmail.com>
References: <CACv3XECGvv2cdPBJBuEpDeWNJhWPgr2E0aAvdsS4Fk7t7A2NHA@mail.gmail.com>
Message-ID: <CAPPM_gQYd_EWsmEcWAZecE35vtY62u-b_-6zknW7_pgo84GuHg@mail.gmail.com>

Hi Eric,

On Thu, Nov 10, 2011 at 9:38 PM, Eric Thungstom
<eric.thungstrom at gmail.com> wrote:
> Please help. I'm getting an error in the plot statement. I've been told
> it's due to plot.xts. and I should ask the package maintainer to send a
> patch. My code is as follows:
>
> require(quantmod)
> require(rdatamarket)
> #rm(list=ls())
> g <-dmlist("
> http://datamarket.com/data/set/1jz5/st-louis-financial-stress-index#display=line&ds=1jz5
> ")
> g$Date <-as.Date(g[,1], "%Y-%m-%d")
> h <-as.xts(g, order.by=g[,1])
> j <-h[,2]
> s <-getSymbols('^GSPC', from="1990-01-01", to=Sys.Date())
> s <-to.weekly(GSPC)
> s <-s[,6]
> x <-na.omit(merge(s,j)) ; names(x) <-c("sp","stress")
> print(head(x))
> par(mfrow=c(2,1))
> plot(x[,1]/400, ylim=c(-1,5), col="blue")
> lines(x[,2], col="red")
> ccf(drop(x[,1]), drop(x[,2]))
>
Thank you for providing a reproducible example.  Next time though, a
_minimal_ example would be better:
library(xts)
data(sample_matrix)
plot(as.xts(sample_matrix[,1]), col="blue")

>
> The error is :
>
> plot(x[,1]/400, ylim=c(-1,5), col="blue")
> Error in axis(1, at = xycoords$x, labels = FALSE, col = "#BBBBBB", ...) :
> ?formal argument "col" matched by multiple actual arguments
>
> I tried traceback() but I think it's just telling me there is a problem
> with argument col
>
> traceback()
>
> 3: axis(1, at = xycoords$x, labels = FALSE, col = "#BBBBBB", ...)
> 2: plot.xts(x[, 1]/400, ylim = c(-1, 5), col = "blue")
> 1: plot(x[, 1]/400, ylim = c(-1, 5), col = "blue")
>
traceback() tells you the calls that lead up to the error.  You need
to look at the source code to understand what's going on.

> This code worked in the past without problem. But I upgraded my packages
> and rstudio to the latest version and now I have this error. I tried
> install.packages("xts"). That went fine but didn't fix the error.
>
This changed in xts about 6 months ago.  The error is caused by '...'
being passed to the axis() commands (that already specify a "col"
argument) inside of plot.xts().

> What can I do to resolve this ?
>
Here are a couple work-arounds you can use:
# specify col in a separate call to lines()
plot(as.xts(sample_matrix[,1])); lines(as.xts(sample_matrix[,1]),col="blue")
# or don't draw the minor tick marks
plot(as.xts(sample_matrix[,1]), minor.ticks=FALSE, col="blue")

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com


From shekhardk at gmail.com  Fri Nov 11 09:04:59 2011
From: shekhardk at gmail.com (Shekhar)
Date: Fri, 11 Nov 2011 00:04:59 -0800 (PST)
Subject: [R-SIG-Finance] Dealing with live quotes in R
In-Reply-To: <AFE776B0-CC4C-4D14-B6B5-DF2F586B4206@gmail.com>
References: <CAM6Bxr-EVqtmjAS3f=7aBHiTAm_SqedzMuZRmh8wSHNsPQAawA@mail.gmail.com>
	<E8CC19FC66B5FB46B5511B6E8AE814185B3FBDE687@VAUNSW137.au.cbainet.com>
	<AFE776B0-CC4C-4D14-B6B5-DF2F586B4206@gmail.com>
Message-ID: <1320998699431-4030704.post@n4.nabble.com>

Darko, Do you know any other packages which I can use to reduce the latency?
Thanks

--
View this message in context: http://r.789695.n4.nabble.com/Dealing-with-live-quotes-in-R-tp4030033p4030704.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From Danilo.Mercurio at Sparinvest.com  Fri Nov 11 10:10:44 2011
From: Danilo.Mercurio at Sparinvest.com (Mercurio Danilo 1850 SPI)
Date: Fri, 11 Nov 2011 09:10:44 +0000
Subject: [R-SIG-Finance] Download RBloomberg for R-2.14.0
In-Reply-To: <CAA3Wa=tR0fr3ExHQ-bUMh9u9+Urf5pLONjk7Vh3Go-1GaZYE9w@mail.gmail.com>
References: <1320689500.7279.YahooMailNeo@web113508.mail.gq1.yahoo.com>
	<CAA3Wa=tT9i6xVBzrD0wBxSCUGG90QX5VKnesCmtzhgCa5DPCtA@mail.gmail.com>
	<CAA3Wa=sv8XtZFLSszDOcm-TvxdKZCD2gXJ-WOVETwcuV8hD9Sg@mail.gmail.com>
	<1438F6C5E7F7884293F0B114502EA6F207C34C@m0187.s-mxs.net>
	<CAA3Wa=tR0fr3ExHQ-bUMh9u9+Urf5pLONjk7Vh3Go-1GaZYE9w@mail.gmail.com>
Message-ID: <1438F6C5E7F7884293F0B114502EA6F207C3CD@m0187.s-mxs.net>

Hi John!
Below you can find the details about my R-2.12.1. There everything seems to work fine.
I am also sending you a screenshot of my R-2.14.0, where I downloaded the latest versions of Rbloomberg
and rJava. However there it does not work. I am sorry I do not completely understand your advice about
WAPI <GO> and upgrade: shoud I download and install a new "Bloomberg Desktop v3 API SDK"?

Many thanks!

Danilo


> require(RBloomberg)
Lade n?tiges Paket: RBloomberg
Lade n?tiges Paket: rJava
> sessionInfo()
R version 2.12.1 (2010-12-16)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=German_Austria.1252  LC_CTYPE=German_Austria.1252    LC_MONETARY=German_Austria.1252 LC_NUMERIC=C                   
[5] LC_TIME=German_Austria.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] RBloomberg_0.4-146 rJava_0.8-8       
> conn <- blpConnect()
R version 2.12.1 (2010-12-16) 
rJava Version 0.8-8 
RBloomberg Version 0.4-146 
Java environment initialized successfully.
Looking for most recent blpapi3.jar file...
Adding C:\blp\API\APIv3\JavaAPI\v3.3.3.3\lib\blpapi3.jar to Java classpath
Bloomberg API Version 3.3.3.3 
> bdp(conn, "EBS AV Equity", "NAME")
                             NAME
EBS AV Equity ERSTE GROUP BANK AG
> blpDisconnect(conn)
         used (Mb) gc trigger (Mb) max used (Mb)
Ncells 239002  6.4     407500 10.9   350000  9.4
Vcells 194476  1.5     786432  6.0   508768  3.9
>  

-----Urspr?ngliche Nachricht-----
Von: John Laing [mailto:john.laing at gmail.com] 
Gesendet: Donnerstag, 10. November 2011 22:41
An: Mercurio Danilo 1850 SPI
Cc: Adam Xia; r-sig-finance at r-project.org
Betreff: Re: [R-SIG-Finance] Download RBloomberg for R-2.14.0

Danilo,

What version of RBloomberg are you using with R 2.12? You can find
this out with a call to sessionInfo().
It is probably an old version that didn't use the Java version of the
Bloomberg API. If that is the case, you will need to upgrade (using
WAPI<GO>, as in my other message) and install the rJava package.

John

On Thu, Nov 10, 2011 at 11:43 AM, Mercurio Danilo 1850 SPI
<Danilo.Mercurio at sparinvest.com> wrote:
> Hi!
>
> I just tried the installation of Rbloomberg on R.14.0
>
> The installation is apparently succesful (no error)
>
> I can run the command: "library(Rbloomber)", and no error message appears.
>
> However the command "conn <- blpConnect()" does not work. The console simply freezesand I have to kill R.
>
> I am still using R.12.1 with a functioning Rbloomberg and I am deeply thankful to he developpers/maitainers.
> Best!
>
> Danilo
>
> -----Urspr?ngliche Nachricht-----
> Von: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag von John Laing
> Gesendet: Donnerstag, 10. November 2011 13:20
> An: Adam Xia
> Cc: r-sig-finance at r-project.org
> Betreff: Re: [R-SIG-Finance] Download RBloomberg for R-2.14.0 [bayes][heur]
>
> A 32-bit RBloomberg build for R 2.14.0 has been posted. It can be
> installed by the usual process:
>
> install.packages("RBloomberg", repos = "http://r.findata.org")
>
> Please let me know if you experience any issues.
>
> John
>
>
> On Mon, Nov 7, 2011 at 2:14 PM, John Laing <john.laing at gmail.com> wrote:
>> Hi Adam,
>>
>> You did nothing wrong, I haven't yet posted RBloomberg binaries for R
>> 2.14.0. I hope to get that taken care of soon, possibly this evening.
>>
>> John
>>
>> On Mon, Nov 7, 2011 at 1:11 PM, Adam Xia <axianyc at yahoo.com> wrote:
>>> Hello Friends,
>>>
>>> I just installed R-2.14.0 and tried to install RBloomberg package?by?running: install.packages("RBloomberg",repos="http://r.findata.org/").?However, I received message to indicate that the package "is not avaiable (for R version 2.14.0)". Should I wait for more days or something I did wrong? I also encountered the same issue for Rcompression package from omegahat.com. Thank you for your kindly reply.
>>>
>>> AX
>>> ? ? ? ?[[alternative HTML version deleted]]
>>>
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>>
>>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: R 2.14.0.PNG
Type: image/png
Size: 29224 bytes
Desc: R 2.14.0.PNG
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111111/353a43e7/attachment.png>

From Murali.Menon at avivainvestors.com  Fri Nov 11 10:39:00 2011
From: Murali.Menon at avivainvestors.com (Murali.Menon at avivainvestors.com)
Date: Fri, 11 Nov 2011 09:39:00 +0000
Subject: [R-SIG-Finance] Download RBloomberg for R-2.14.0
In-Reply-To: <1438F6C5E7F7884293F0B114502EA6F207C3CD@m0187.s-mxs.net>
References: <1320689500.7279.YahooMailNeo@web113508.mail.gq1.yahoo.com>
	<CAA3Wa=tT9i6xVBzrD0wBxSCUGG90QX5VKnesCmtzhgCa5DPCtA@mail.gmail.com>
	<CAA3Wa=sv8XtZFLSszDOcm-TvxdKZCD2gXJ-WOVETwcuV8hD9Sg@mail.gmail.com>
	<1438F6C5E7F7884293F0B114502EA6F207C34C@m0187.s-mxs.net>
	<CAA3Wa=tR0fr3ExHQ-bUMh9u9+Urf5pLONjk7Vh3Go-1GaZYE9w@mail.gmail.com>
	<1438F6C5E7F7884293F0B114502EA6F207C3CD@m0187.s-mxs.net>
Message-ID: <05C1ABBB41112A4DB61380AD45F18EB61E844DFD5F@SWVLONCUEXDP01.im.root-domain.net>

Danilo,
I've managed to get RBloomberg working on R2.14 by downloading and installing the new Bloomberg Desktop v3 API SDK. The version of the Bloomberg API I have now is 3.4.3.2. Try with that, and it might work for you as well?
Cheers,
Murali



-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Mercurio Danilo 1850 SPI
Sent: 11 November 2011 09:11
To: 'John Laing'; r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Download RBloomberg for R-2.14.0

Hi John!
Below you can find the details about my R-2.12.1. There everything seems to work fine.
I am also sending you a screenshot of my R-2.14.0, where I downloaded the latest versions of Rbloomberg and rJava. However there it does not work. I am sorry I do not completely understand your advice about WAPI <GO> and upgrade: shoud I download and install a new "Bloomberg Desktop v3 API SDK"?

Many thanks!

Danilo


> require(RBloomberg)
Lade n?tiges Paket: RBloomberg
Lade n?tiges Paket: rJava
> sessionInfo()
R version 2.12.1 (2010-12-16)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=German_Austria.1252  LC_CTYPE=German_Austria.1252    LC_MONETARY=German_Austria.1252 LC_NUMERIC=C                   
[5] LC_TIME=German_Austria.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] RBloomberg_0.4-146 rJava_0.8-8       
> conn <- blpConnect()
R version 2.12.1 (2010-12-16)
rJava Version 0.8-8
RBloomberg Version 0.4-146
Java environment initialized successfully.
Looking for most recent blpapi3.jar file...
Adding C:\blp\API\APIv3\JavaAPI\v3.3.3.3\lib\blpapi3.jar to Java classpath Bloomberg API Version 3.3.3.3 
> bdp(conn, "EBS AV Equity", "NAME")
                             NAME
EBS AV Equity ERSTE GROUP BANK AG
> blpDisconnect(conn)
         used (Mb) gc trigger (Mb) max used (Mb)
Ncells 239002  6.4     407500 10.9   350000  9.4
Vcells 194476  1.5     786432  6.0   508768  3.9
>  

-----Urspr?ngliche Nachricht-----
Von: John Laing [mailto:john.laing at gmail.com]
Gesendet: Donnerstag, 10. November 2011 22:41
An: Mercurio Danilo 1850 SPI
Cc: Adam Xia; r-sig-finance at r-project.org
Betreff: Re: [R-SIG-Finance] Download RBloomberg for R-2.14.0

Danilo,

What version of RBloomberg are you using with R 2.12? You can find this out with a call to sessionInfo().
It is probably an old version that didn't use the Java version of the Bloomberg API. If that is the case, you will need to upgrade (using WAPI<GO>, as in my other message) and install the rJava package.

John

On Thu, Nov 10, 2011 at 11:43 AM, Mercurio Danilo 1850 SPI <Danilo.Mercurio at sparinvest.com> wrote:
> Hi!
>
> I just tried the installation of Rbloomberg on R.14.0
>
> The installation is apparently succesful (no error)
>
> I can run the command: "library(Rbloomber)", and no error message appears.
>
> However the command "conn <- blpConnect()" does not work. The console simply freezesand I have to kill R.
>
> I am still using R.12.1 with a functioning Rbloomberg and I am deeply thankful to he developpers/maitainers.
> Best!
>
> Danilo
>
> -----Urspr?ngliche Nachricht-----
> Von: r-sig-finance-bounces at r-project.org 
> [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag von John Laing
> Gesendet: Donnerstag, 10. November 2011 13:20
> An: Adam Xia
> Cc: r-sig-finance at r-project.org
> Betreff: Re: [R-SIG-Finance] Download RBloomberg for R-2.14.0 
> [bayes][heur]
>
> A 32-bit RBloomberg build for R 2.14.0 has been posted. It can be 
> installed by the usual process:
>
> install.packages("RBloomberg", repos = "http://r.findata.org")
>
> Please let me know if you experience any issues.
>
> John
>
>
> On Mon, Nov 7, 2011 at 2:14 PM, John Laing <john.laing at gmail.com> wrote:
>> Hi Adam,
>>
>> You did nothing wrong, I haven't yet posted RBloomberg binaries for R 
>> 2.14.0. I hope to get that taken care of soon, possibly this evening.
>>
>> John
>>
>> On Mon, Nov 7, 2011 at 1:11 PM, Adam Xia <axianyc at yahoo.com> wrote:
>>> Hello Friends,
>>>
>>> I just installed R-2.14.0 and tried to install RBloomberg package?by?running: install.packages("RBloomberg",repos="http://r.findata.org/").?However, I received message to indicate that the package "is not avaiable (for R version 2.14.0)". Should I wait for more days or something I did wrong? I also encountered the same issue for Rcompression package from omegahat.com. Thank you for your kindly reply.
>>>
>>> AX
>>> ? ? ? ?[[alternative HTML version deleted]]
>>>
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list 
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>>
>>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From Danilo.Mercurio at Sparinvest.com  Fri Nov 11 10:56:00 2011
From: Danilo.Mercurio at Sparinvest.com (Mercurio Danilo 1850 SPI)
Date: Fri, 11 Nov 2011 09:56:00 +0000
Subject: [R-SIG-Finance] Download RBloomberg for R-2.14.0
In-Reply-To: <05C1ABBB41112A4DB61380AD45F18EB61E844DFD5F@SWVLONCUEXDP01.im.root-domain.net>
References: <1320689500.7279.YahooMailNeo@web113508.mail.gq1.yahoo.com>
	<CAA3Wa=tT9i6xVBzrD0wBxSCUGG90QX5VKnesCmtzhgCa5DPCtA@mail.gmail.com>
	<CAA3Wa=sv8XtZFLSszDOcm-TvxdKZCD2gXJ-WOVETwcuV8hD9Sg@mail.gmail.com>
	<1438F6C5E7F7884293F0B114502EA6F207C34C@m0187.s-mxs.net>
	<CAA3Wa=tR0fr3ExHQ-bUMh9u9+Urf5pLONjk7Vh3Go-1GaZYE9w@mail.gmail.com>
	<1438F6C5E7F7884293F0B114502EA6F207C3CD@m0187.s-mxs.net>
	<05C1ABBB41112A4DB61380AD45F18EB61E844DFD5F@SWVLONCUEXDP01.im.root-domain.net>
Message-ID: <1438F6C5E7F7884293F0B114502EA6F207C465@m0187.s-mxs.net>

Hi!

I just installed the latest  Bloomberg Desktop v3 API SDK and everything seems to work fine!
Many thanks to everybody!

Danilo

-----Urspr?ngliche Nachricht-----
Von: Murali.Menon at avivainvestors.com [mailto:Murali.Menon at avivainvestors.com] 
Gesendet: Freitag, 11. November 2011 10:39
An: Mercurio Danilo 1850 SPI; john.laing at gmail.com; r-sig-finance at r-project.org
Betreff: RE: [R-SIG-Finance] Download RBloomberg for R-2.14.0

Danilo,
I've managed to get RBloomberg working on R2.14 by downloading and installing the new Bloomberg Desktop v3 API SDK. The version of the Bloomberg API I have now is 3.4.3.2. Try with that, and it might work for you as well?
Cheers,
Murali



-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Mercurio Danilo 1850 SPI
Sent: 11 November 2011 09:11
To: 'John Laing'; r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Download RBloomberg for R-2.14.0

Hi John!
Below you can find the details about my R-2.12.1. There everything seems to work fine.
I am also sending you a screenshot of my R-2.14.0, where I downloaded the latest versions of Rbloomberg and rJava. However there it does not work. I am sorry I do not completely understand your advice about WAPI <GO> and upgrade: shoud I download and install a new "Bloomberg Desktop v3 API SDK"?

Many thanks!

Danilo


> require(RBloomberg)
Lade n?tiges Paket: RBloomberg
Lade n?tiges Paket: rJava
> sessionInfo()
R version 2.12.1 (2010-12-16)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=German_Austria.1252  LC_CTYPE=German_Austria.1252    LC_MONETARY=German_Austria.1252 LC_NUMERIC=C                   
[5] LC_TIME=German_Austria.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] RBloomberg_0.4-146 rJava_0.8-8       
> conn <- blpConnect()
R version 2.12.1 (2010-12-16)
rJava Version 0.8-8
RBloomberg Version 0.4-146
Java environment initialized successfully.
Looking for most recent blpapi3.jar file...
Adding C:\blp\API\APIv3\JavaAPI\v3.3.3.3\lib\blpapi3.jar to Java classpath Bloomberg API Version 3.3.3.3 
> bdp(conn, "EBS AV Equity", "NAME")
                             NAME
EBS AV Equity ERSTE GROUP BANK AG
> blpDisconnect(conn)
         used (Mb) gc trigger (Mb) max used (Mb)
Ncells 239002  6.4     407500 10.9   350000  9.4
Vcells 194476  1.5     786432  6.0   508768  3.9
>  

-----Urspr?ngliche Nachricht-----
Von: John Laing [mailto:john.laing at gmail.com]
Gesendet: Donnerstag, 10. November 2011 22:41
An: Mercurio Danilo 1850 SPI
Cc: Adam Xia; r-sig-finance at r-project.org
Betreff: Re: [R-SIG-Finance] Download RBloomberg for R-2.14.0

Danilo,

What version of RBloomberg are you using with R 2.12? You can find this out with a call to sessionInfo().
It is probably an old version that didn't use the Java version of the Bloomberg API. If that is the case, you will need to upgrade (using WAPI<GO>, as in my other message) and install the rJava package.

John

On Thu, Nov 10, 2011 at 11:43 AM, Mercurio Danilo 1850 SPI <Danilo.Mercurio at sparinvest.com> wrote:
> Hi!
>
> I just tried the installation of Rbloomberg on R.14.0
>
> The installation is apparently succesful (no error)
>
> I can run the command: "library(Rbloomber)", and no error message appears.
>
> However the command "conn <- blpConnect()" does not work. The console simply freezesand I have to kill R.
>
> I am still using R.12.1 with a functioning Rbloomberg and I am deeply thankful to he developpers/maitainers.
> Best!
>
> Danilo
>
> -----Urspr?ngliche Nachricht-----
> Von: r-sig-finance-bounces at r-project.org 
> [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag von John Laing
> Gesendet: Donnerstag, 10. November 2011 13:20
> An: Adam Xia
> Cc: r-sig-finance at r-project.org
> Betreff: Re: [R-SIG-Finance] Download RBloomberg for R-2.14.0 
> [bayes][heur]
>
> A 32-bit RBloomberg build for R 2.14.0 has been posted. It can be 
> installed by the usual process:
>
> install.packages("RBloomberg", repos = "http://r.findata.org")
>
> Please let me know if you experience any issues.
>
> John
>
>
> On Mon, Nov 7, 2011 at 2:14 PM, John Laing <john.laing at gmail.com> wrote:
>> Hi Adam,
>>
>> You did nothing wrong, I haven't yet posted RBloomberg binaries for R 
>> 2.14.0. I hope to get that taken care of soon, possibly this evening.
>>
>> John
>>
>> On Mon, Nov 7, 2011 at 1:11 PM, Adam Xia <axianyc at yahoo.com> wrote:
>>> Hello Friends,
>>>
>>> I just installed R-2.14.0 and tried to install RBloomberg package?by?running: install.packages("RBloomberg",repos="http://r.findata.org/").?However, I received message to indicate that the package "is not avaiable (for R version 2.14.0)". Should I wait for more days or something I did wrong? I also encountered the same issue for Rcompression package from omegahat.com. Thank you for your kindly reply.
>>>
>>> AX
>>> ? ? ? ?[[alternative HTML version deleted]]
>>>
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list 
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>>
>>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From Ayhan.Yuksel at finansportfoy.com  Fri Nov 11 11:12:11 2011
From: Ayhan.Yuksel at finansportfoy.com (=?iso-8859-9?Q?Ayhan_Y=FCksel_=28Finans_Portf=F6y_A=2E=DE=2E=29?=)
Date: Fri, 11 Nov 2011 12:12:11 +0200
Subject: [R-SIG-Finance] RBloomberg connection problem
Message-ID: <37F03B5FAABCC94D8AF66166AAE3639902D70BA9@fnymail.fnylocal.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111111/bcd960cc/attachment.pl>

From DAvery at marketingleverage.com  Fri Nov 11 14:56:57 2011
From: DAvery at marketingleverage.com (Dan Avery)
Date: Fri, 11 Nov 2011 05:56:57 -0800
Subject: [R-SIG-Finance] Quantstrat prefer pricing
Message-ID: <11BAA7190200EE479F35AB150B22248714BEDC4CF0@VA3DIAXVS131.RED001.local>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111111/0d992620/attachment.pl>

From vramaiah at neo.tamu.edu  Fri Nov 11 17:28:09 2011
From: vramaiah at neo.tamu.edu (vramaiah at neo.tamu.edu)
Date: Fri, 11 Nov 2011 10:28:09 -0600 (CST)
Subject: [R-SIG-Finance] Fwd: Use of R for VECM
In-Reply-To: <1117694769.184861321023983282.JavaMail.root@neo-mail-3>
Message-ID: <549391305.223561321028889774.JavaMail.root@neo-mail-3>



Hello Fellow R'ers
I am a new user of R and I am applying it for solving Bi-Variate (Consumption and Output) VECM with Co-Integration (I(1)) with three lags on Consumption and Output expressed aa lags of differences.  R Code and one segment fo the output (other parts of the output are repeatitive) are as follows.
> us=read.table("usdata.1995-2009.txt",header=T)
> sjd<-us[,c("Y","C")]
> sjd.vecm1 <- ca.jo(sjd, ecdet='const', type="eigen", K=3, spec="longrun",
+ season=4)
> sjd.vecm2 <- ca.jo(sjd, ecdet='const', type="eigen", K=3, spec="transitory",
+ season=4)
> sjd.vecm.ols1 <- cajools(sjd.vecm1)
> sjd.vecm.ols2 <- cajools(sjd.vecm2)
> summary(sjd.vecm.ols1)
Response Y.d :

Call:
lm(formula = substitute(Y.d), data = data.mat)

Residuals:
       Min         1Q     Median         3Q        Max 
-0.0049787 -0.0012948  0.0000703  0.0009653  0.0063192 

Coefficients:
           Estimate Std. Error t value Pr(>|t|)    
sd1      -0.0002012  0.0007653  -0.263 0.793820    
sd2       0.0013339  0.0007616   1.752 0.086378 .  
sd3       0.0007372  0.0007947   0.928 0.358348    
Y.dl1    -0.2215246  0.1600532  -1.384 0.172875    
C.dl1     0.9220846  0.1646314   5.601 1.08e-06 ***
Y.dl2    -0.1600219  0.1273838  -1.256 0.215245    
C.dl2     0.4712112  0.2124175   2.218 0.031401 *  
Y.l3     -0.3227708  0.0881079  -3.663 0.000631 ***
C.l3      0.2376579  0.0688854   3.450 0.001194 ** 
constant  0.4707624  0.1182284   3.982 0.000236 ***
---
Signif. codes:  0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1 

Residual standard error: 0.002013 on 47 degrees of freedom
Multiple R-squared: 0.7053,	Adjusted R-squared: 0.6426 
F-statistic: 11.25 on 10 and 47 DF,  p-value: 1.707e-09 



I am trying to decipher the output and have the following questions.  
1.  If you have published a book with explanations of the output, I would like to acquire one.  Please advise me where I can get one.  It might me and you lot of time.  In the meantime....
2.  Are Y.dl1, C.dl1, Y.dl2, C.dl2, Y.l3 and C.l3 are the coefficients I am looking for?
3.  My equition requires Y.l1 and C.l1.  Is there a way I could change from Y.l3 and C.l3 
4.  I need to use these coefficients for forecasting.  What command I use to extract the coefficients from this program?
5.  What are sd1, sd2, sd3?  I did not input any "seasonal dummies" and yet the output seems to have included them.  Does it affect the value of the coefficients?  Is there a better way to reframe the command to avoid them?
I hope it is not too much to ask for your help.
I thank you in advance.
Ram Ramaiah


From matthieu.stigler at gmail.com  Fri Nov 11 18:31:48 2011
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Fri, 11 Nov 2011 18:31:48 +0100
Subject: [R-SIG-Finance] Fwd: Use of R for VECM
In-Reply-To: <549391305.223561321028889774.JavaMail.root@neo-mail-3>
References: <1117694769.184861321023983282.JavaMail.root@neo-mail-3>
	<549391305.223561321028889774.JavaMail.root@neo-mail-3>
Message-ID: <CAEYvigJ+F88CqTSE1EJ9PHQOxxUp99F8oYAOkTH1G+TwbPsq-w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111111/3e1289bd/attachment.pl>

From nidhi at igidr.ac.in  Sun Nov 13 12:21:33 2011
From: nidhi at igidr.ac.in (nidhiaggrawal)
Date: Sun, 13 Nov 2011 03:21:33 -0800 (PST)
Subject: [R-SIG-Finance] Calculating Hasbrouck's information share and
 Gonzalo-Granger weights on R
In-Reply-To: <1320790767748-4017779.post@n4.nabble.com>
References: <AANLkTinWNEvAVUjk8TYVd_28mEUS_dKnezCPtX64v4Lo@mail.gmail.com>
	<1320790767748-4017779.post@n4.nabble.com>
Message-ID: <1321183293280-4036386.post@n4.nabble.com>

Hi Samit,

Yes, the difference between the bounds was appearing because of the
significant
contemporaneous correlation in the residuals occurring due to time
aggregation for
the stocks that have high trading activity on both -- the spot as well as
the futures
market. The problem has been discussed in the literature (Hasbrouck (1995),
Huang (2002), Yan and Zivot (2010)).

I dealt with this problem by improving the frequency of my data-set to one
second.
By doing that, the gap between the lower and the upper bound did come down
significantly.

Nidhi

--
View this message in context: http://r.789695.n4.nabble.com/Calculating-Hasbrouck-s-information-share-and-Gonzalo-Granger-weights-on-R-tp2395838p4036386.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From sjain at caa.columbia.edu  Sun Nov 13 20:11:58 2011
From: sjain at caa.columbia.edu (sammyny)
Date: Sun, 13 Nov 2011 11:11:58 -0800 (PST)
Subject: [R-SIG-Finance] Calculating Hasbrouck's information share and
 Gonzalo-Granger weights on R
In-Reply-To: <1321183293280-4036386.post@n4.nabble.com>
References: <AANLkTinWNEvAVUjk8TYVd_28mEUS_dKnezCPtX64v4Lo@mail.gmail.com>
	<1320790767748-4017779.post@n4.nabble.com>
	<1321183293280-4036386.post@n4.nabble.com>
Message-ID: <1321211518522-4037279.post@n4.nabble.com>

Thanks. I will test your code on my data sets. Do you have an idea how to
extend your code to 3 price series, to find the contribution of each price
series to price discovery.

-Samit

--
View this message in context: http://r.789695.n4.nabble.com/Calculating-Hasbrouck-s-information-share-and-Gonzalo-Granger-weights-on-R-tp2395838p4037279.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From Darko.Roupell at cba.com.au  Sun Nov 13 21:24:15 2011
From: Darko.Roupell at cba.com.au (Roupell, Darko)
Date: Mon, 14 Nov 2011 07:24:15 +1100
Subject: [R-SIG-Finance] Dealing with live quotes in R
In-Reply-To: <1320998699431-4030704.post@n4.nabble.com>
References: <CAM6Bxr-EVqtmjAS3f=7aBHiTAm_SqedzMuZRmh8wSHNsPQAawA@mail.gmail.com>
	<E8CC19FC66B5FB46B5511B6E8AE814185B3FBDE687@VAUNSW137.au.cbainet.com>
	<AFE776B0-CC4C-4D14-B6B5-DF2F586B4206@gmail.com>
	<1320998699431-4030704.post@n4.nabble.com>
Message-ID: <E8CC19FC66B5FB46B5511B6E8AE814185B3FC7855B@VAUNSW137.au.cbainet.com>

Check out for Rcpp which according to authors is made for seamless R and C++ integration. 

So re-writing code in C+ and calling it from R would certainly sped up execution.

However, the package is not easy to grasp, and last time I was in contact with Dirk, one of the authors, he offered his service on fee-based arrangement, which I politely declined.

You may have better luck. Hope this helps.

__________________________________________________
Commonwealth Bank 
Darko Roupell 
Associate Quantitative Analyst 
Institutional Banking & Markets
Equities Research
Darling Park Tower 1
Level 23, 201 Sussex Street
Sydney, NSW 200
P:  +61 2 9117 1254
F:  +61 2 9118 1000
M: +61 400 170 515
E: Darko.Roupell at cba.com.au 
Our vision is to be Australia's finest financial services organisation through excelling in customer service.

Email Security
This email is sent solely for informational purposes. Hoax emails, commonly referred to as phishing, can appear to be from the Commonwealth Bank and ask you to update or confirm details such as client numbers, passwords, personal identification questions, contact details or account numbers. The Commonwealth Bank will never send you an email asking you to confirm, update or reveal your confidential banking information. 
Important Information
Produced by Global Markets Research, a business unit of Commonwealth Bank of Australia ABN 48 123 123 124 - AFSL 234945 (Commonwealth Bank). This publication is based on information available at the time of publishing.? We believe that the information in this communication is correct and any opinions, conclusions or recommendations are reasonably held or made as at the time of its compilation, but no warranty is made as to accuracy, reliability or completeness.? To the extent permitted by law, neither Commonwealth Bank nor any of its subsidiaries accept liability to any person for loss or damage arising from the use of this communication. This communication does not purport to be a complete statement or summary.? 
The information provided has been prepared without considering your objectives, financial situation or needs, and before acting on the information, you should consider its appropriateness to your circumstances. No person should act on the basis of this report without considering and if necessary taking appropriate professional advice upon their own particular circumstances.? 
Commonwealth Bank of Australia, as a provider of investment, borrowing and other financial services undertakes financial transactions with many corporate entities in Australia. This may include any corporate issuer referred to in this communication. Commonwealth Bank and its subsidiaries have effected or may effect transactions for their own account in any investments or related investments referred to herein. In the case of certain securities Commonwealth Bank is or may be the only market maker.

-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Shekhar
Sent: Friday, 11 November 2011 7:05 PM
To: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Dealing with live quotes in R

Darko, Do you know any other packages which I can use to reduce the latency?
Thanks

--
View this message in context: http://r.789695.n4.nabble.com/Dealing-with-live-quotes-in-R-tp4030033p4030704.html
Sent from the Rmetrics mailing list archive at Nabble.com.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

************** IMPORTANT MESSAGE *****************************       
This e-mail message is intended only for the addressee(s) and contains information which may be
confidential. 
If you are not the intended recipient please advise the sender by return email, do not use or
disclose the contents, and delete the message and any attachments from your system. Unless
specifically indicated, this email does not constitute formal advice or commitment by the sender
or the Commonwealth Bank of Australia (ABN 48 123 123 124) or its subsidiaries. 
We can be contacted through our web site: commbank.com.au. 
If you no longer wish to receive commercial electronic messages from us, please reply to this
e-mail by typing Unsubscribe in the subject line. 


From nidhi at igidr.ac.in  Sun Nov 13 22:19:04 2011
From: nidhi at igidr.ac.in (Nidhi Aggrawal)
Date: Sun, 13 Nov 2011 13:19:04 -0800 (PST)
Subject: [R-SIG-Finance] Calculating Hasbrouck's information share and
 Gonzalo-Granger weights on R
In-Reply-To: <1321211518522-4037279.post@n4.nabble.com>
References: <AANLkTinWNEvAVUjk8TYVd_28mEUS_dKnezCPtX64v4Lo@mail.gmail.com>
	<1320790767748-4017779.post@n4.nabble.com>
	<1321183293280-4036386.post@n4.nabble.com>
	<1321211518522-4037279.post@n4.nabble.com>
Message-ID: <CAP48nPYK-+=d7UCGeBA2t-U4tj4+0TxkKs_E+eyqVETzmLdPRQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111113/ed3c1d77/attachment.pl>

From seancarmody at gmail.com  Mon Nov 14 01:45:31 2011
From: seancarmody at gmail.com (Sean Carmody)
Date: Mon, 14 Nov 2011 11:45:31 +1100
Subject: [R-SIG-Finance] Problems with R Bloomberg
Message-ID: <CALoQfh7AAMayHadFtR+R+2m7-4A7N=W6qiUkwtnVqbWW=-_Sng@mail.gmail.com>

I have having a bit of difficulty getting RBloomberg working. A couple
of years ago I had it working without any trouble at a different firm,
so I suspect it's got something to do with my PC setup (e.g. Java
installation), but I cannot work out what that may be.

When I try to make a blpConnect connection I get the following error message:

> R version 2.13.2 (2011-09-30)
> rJava Version 0.9-1
> RBloomberg Version 0.4-150
> Error in .jinit() : cannot obtain Class.getSimpleName method ID
> Error in blpConnect.Java("warning", NULL, TRUE, NULL) :
>   Java environment not initialized. Please consult the rJava documentation. You may need to upgrade or install Java.

Note that if I try to call .jini() directly I get the following error:

> Error in .jinit() : cannot obtain Class.getSimpleName method ID

Subsequent calls get the following error:

> Error in .jinit() : unable to find the basic String class

Consulting with local IT and finding this page with Google:
http://cran.r-project.org/web/packages/gMCP/INSTALL led me to suspect
that it was a problem with my Java path (or JAVA_HOME or CLASSPATH
variables). Note that I have multiple versions of Java installed, the
latest being 1.6.0_06. Trying to point PATH and JAVA_HOME to either
1.6 or 1.4 (and restarting R) did not resolve the issue.

Any suggestions would be greatly appreciated!

Regards,
Sean Carmody.


From john.laing at gmail.com  Mon Nov 14 02:55:10 2011
From: john.laing at gmail.com (John Laing)
Date: Sun, 13 Nov 2011 20:55:10 -0500
Subject: [R-SIG-Finance] Download RBloomberg for R-2.14.0
In-Reply-To: <CA+ckjv1ZRfy1cihH5EVPn7qzP3Tr0m3YM_WZEhMJJfuyCmPepg@mail.gmail.com>
References: <1320689500.7279.YahooMailNeo@web113508.mail.gq1.yahoo.com>
	<CAA3Wa=tT9i6xVBzrD0wBxSCUGG90QX5VKnesCmtzhgCa5DPCtA@mail.gmail.com>
	<CAA3Wa=sv8XtZFLSszDOcm-TvxdKZCD2gXJ-WOVETwcuV8hD9Sg@mail.gmail.com>
	<1438F6C5E7F7884293F0B114502EA6F207C34C@m0187.s-mxs.net>
	<CAA3Wa=tR0fr3ExHQ-bUMh9u9+Urf5pLONjk7Vh3Go-1GaZYE9w@mail.gmail.com>
	<1438F6C5E7F7884293F0B114502EA6F207C3CD@m0187.s-mxs.net>
	<05C1ABBB41112A4DB61380AD45F18EB61E844DFD5F@SWVLONCUEXDP01.im.root-domain.net>
	<CA+ckjv1ZRfy1cihH5EVPn7qzP3Tr0m3YM_WZEhMJJfuyCmPepg@mail.gmail.com>
Message-ID: <CAA3Wa=u=g=hhgTocV_VLSvHABGSYQgMhvYThS4Jd+GVSFZw0_Q@mail.gmail.com>

Danilo -- glad you were able to get everything working.
Murali -- thanks for chiming in with help.
Marco -- unfortunately, Bloomberg does not provide a desktop client
for Linux. I run Bloomberg in a Windows virtual machine, on Mac at
home and Ubuntu at work. It's not ideal, as most configurations like
this also require R to run in the VM to access Bloomberg, but
nevertheless I believe this is a fairly standard setup.

John

On Fri, Nov 11, 2011 at 6:50 AM, Marco Bianchi <marcolondonuk at gmail.com> wrote:
> I am looking to use RBloomberg under Linux rather than Microsoft Windows
> operating system. Is this at all possible?
>
> Marco Bianchi
>
> Ciao Danilo, I think we never met but I believe both PhD students of W
> Hardle.
>
> On Fri, Nov 11, 2011 at 9:39 AM, <Murali.Menon at avivainvestors.com> wrote:
>>
>> Danilo,
>> I've managed to get RBloomberg working on R2.14 by downloading and
>> installing the new Bloomberg Desktop v3 API SDK. The version of the
>> Bloomberg API I have now is 3.4.3.2. Try with that, and it might work for
>> you as well?
>> Cheers,
>> Murali
>>
>>
>>
>> -----Original Message-----
>> From: r-sig-finance-bounces at r-project.org
>> [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Mercurio Danilo
>> 1850 SPI
>> Sent: 11 November 2011 09:11
>> To: 'John Laing'; r-sig-finance at r-project.org
>> Subject: Re: [R-SIG-Finance] Download RBloomberg for R-2.14.0
>>
>> Hi John!
>> Below you can find the details about my R-2.12.1. There everything seems
>> to work fine.
>> I am also sending you a screenshot of my R-2.14.0, where I downloaded the
>> latest versions of Rbloomberg and rJava. However there it does not work. I
>> am sorry I do not completely understand your advice about WAPI <GO> and
>> upgrade: shoud I download and install a new "Bloomberg Desktop v3 API SDK"?
>>
>> Many thanks!
>>
>> Danilo
>>
>>
>> > require(RBloomberg)
>> Lade n?tiges Paket: RBloomberg
>> Lade n?tiges Paket: rJava
>> > sessionInfo()
>> R version 2.12.1 (2010-12-16)
>> Platform: i386-pc-mingw32/i386 (32-bit)
>>
>> locale:
>> [1] LC_COLLATE=German_Austria.1252 ?LC_CTYPE=German_Austria.1252
>> ?LC_MONETARY=German_Austria.1252 LC_NUMERIC=C
>> [5] LC_TIME=German_Austria.1252
>>
>> attached base packages:
>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>>
>> other attached packages:
>> [1] RBloomberg_0.4-146 rJava_0.8-8
>> > conn <- blpConnect()
>> R version 2.12.1 (2010-12-16)
>> rJava Version 0.8-8
>> RBloomberg Version 0.4-146
>> Java environment initialized successfully.
>> Looking for most recent blpapi3.jar file...
>> Adding C:\blp\API\APIv3\JavaAPI\v3.3.3.3\lib\blpapi3.jar to Java classpath
>> Bloomberg API Version 3.3.3.3
>> > bdp(conn, "EBS AV Equity", "NAME")
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? NAME
>> EBS AV Equity ERSTE GROUP BANK AG
>> > blpDisconnect(conn)
>> ? ? ? ? used (Mb) gc trigger (Mb) max used (Mb)
>> Ncells 239002 ?6.4 ? ? 407500 10.9 ? 350000 ?9.4
>> Vcells 194476 ?1.5 ? ? 786432 ?6.0 ? 508768 ?3.9
>> >
>>
>> -----Urspr?ngliche Nachricht-----
>> Von: John Laing [mailto:john.laing at gmail.com]
>> Gesendet: Donnerstag, 10. November 2011 22:41
>> An: Mercurio Danilo 1850 SPI
>> Cc: Adam Xia; r-sig-finance at r-project.org
>> Betreff: Re: [R-SIG-Finance] Download RBloomberg for R-2.14.0
>>
>> Danilo,
>>
>> What version of RBloomberg are you using with R 2.12? You can find this
>> out with a call to sessionInfo().
>> It is probably an old version that didn't use the Java version of the
>> Bloomberg API. If that is the case, you will need to upgrade (using
>> WAPI<GO>, as in my other message) and install the rJava package.
>>
>> John
>>
>> On Thu, Nov 10, 2011 at 11:43 AM, Mercurio Danilo 1850 SPI
>> <Danilo.Mercurio at sparinvest.com> wrote:
>> > Hi!
>> >
>> > I just tried the installation of Rbloomberg on R.14.0
>> >
>> > The installation is apparently succesful (no error)
>> >
>> > I can run the command: "library(Rbloomber)", and no error message
>> > appears.
>> >
>> > However the command "conn <- blpConnect()" does not work. The console
>> > simply freezesand I have to kill R.
>> >
>> > I am still using R.12.1 with a functioning Rbloomberg and I am deeply
>> > thankful to he developpers/maitainers.
>> > Best!
>> >
>> > Danilo
>> >
>> > -----Urspr?ngliche Nachricht-----
>> > Von: r-sig-finance-bounces at r-project.org
>> > [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag von John Laing
>> > Gesendet: Donnerstag, 10. November 2011 13:20
>> > An: Adam Xia
>> > Cc: r-sig-finance at r-project.org
>> > Betreff: Re: [R-SIG-Finance] Download RBloomberg for R-2.14.0
>> > [bayes][heur]
>> >
>> > A 32-bit RBloomberg build for R 2.14.0 has been posted. It can be
>> > installed by the usual process:
>> >
>> > install.packages("RBloomberg", repos = "http://r.findata.org")
>> >
>> > Please let me know if you experience any issues.
>> >
>> > John
>> >
>> >
>> > On Mon, Nov 7, 2011 at 2:14 PM, John Laing <john.laing at gmail.com> wrote:
>> >> Hi Adam,
>> >>
>> >> You did nothing wrong, I haven't yet posted RBloomberg binaries for R
>> >> 2.14.0. I hope to get that taken care of soon, possibly this evening.
>> >>
>> >> John
>> >>
>> >> On Mon, Nov 7, 2011 at 1:11 PM, Adam Xia <axianyc at yahoo.com> wrote:
>> >>> Hello Friends,
>> >>>
>> >>> I just installed R-2.14.0 and tried to install RBloomberg
>> >>> package?by?running:
>> >>> install.packages("RBloomberg",repos="http://r.findata.org/").?However, I
>> >>> received message to indicate that the package "is not avaiable (for R
>> >>> version 2.14.0)". Should I wait for more days or something I did wrong? I
>> >>> also encountered the same issue for Rcompression package from omegahat.com.
>> >>> Thank you for your kindly reply.
>> >>>
>> >>> AX
>> >>> ? ? ? ?[[alternative HTML version deleted]]
>> >>>
>> >>>
>> >>> _______________________________________________
>> >>> R-SIG-Finance at r-project.org mailing list
>> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> >>> -- Subscriber-posting only. If you want to post, subscribe first.
>> >>> -- Also note that this is not the r-help list where general R
>> >>> questions should go.
>> >>>
>> >>
>> >
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions
>> > should go.
>> >
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>
>


From matthew.gilbert12 at gmail.com  Mon Nov 14 04:01:34 2011
From: matthew.gilbert12 at gmail.com (Matthew Gilbert)
Date: Sun, 13 Nov 2011 22:01:34 -0500
Subject: [R-SIG-Finance] Aggregating tick data
Message-ID: <4EC0848E.4040004@gmail.com>

Hi,

I have tick data for trade durations between 9:30 and 4:00 over the 
course of a month which I want to aggregate into 5 minute bins, starting 
from 9:30. What I currently have tried is

Durations.5min = 
period.apply(Data[,'Duration'],endpoints(Data[,'Duration'],on='minutes',k=5),FUN=mean)

however this returns bins starting from the first trade occurring on 
that day, and therefore my bins are not all the same over the course of 
the month.

Any suggestions are much appreciated.

Thanks,
Matt

-- 
Matthew Gilbert
Master of Quantitative Finance Candidate
University of Waterloo


From Darko.Roupell at cba.com.au  Mon Nov 14 04:11:31 2011
From: Darko.Roupell at cba.com.au (Roupell, Darko)
Date: Mon, 14 Nov 2011 14:11:31 +1100
Subject: [R-SIG-Finance] Aggregating tick data
In-Reply-To: <4EC0848E.4040004@gmail.com>
References: <4EC0848E.4040004@gmail.com>
Message-ID: <E8CC19FC66B5FB46B5511B6E8AE814185B3FE5AEE9@VAUNSW137.au.cbainet.com>

This should help you to deal with time stamp issue and allow you to aggregate tic data from point of your interest. This is modified version of source code in RTAQ, so I would strongly suggest you to get familiar with that package before you proceed with implementation.

aggregatets = function (agdata, FUN = NULL, on = "minutes", k = 1, weights = NULL,dropna=FALSE) 
{
    makethispartbetter = ((!is.null(weights))| on=="days"|on=="weeks"| (FUN!="previoustick")|dropna);
    if(makethispartbetter)  {
      
      FUN = match.fun(FUN)
      
      if (is.null(weights)) {
          ep = endpoints(agdata, on, k)
          if(dim(agdata)[2]==1){ ts2 = period.apply(agdata, ep, FUN) }
          if(dim(agdata)[2]>1){  ts2 = xts(apply(agdata,2,FUN=period.apply2,FUN2=FUN,INDEX=ep),order.by=index(agdata)[ep],)}
      }
      if (!is.null(weights)) {
          tsb = cbind(agdata, weights)
          ep = endpoints(tsb, on, k)
          ts2 = period.apply(tsb, ep, FUN = match.fun(weightedaverage) )
      }
      if (on == "minutes" | on == "mins" | on == "secs" | on == "seconds") {
          if (on == "minutes" | on == "mins") {
              secs = k * 60
          }
          if (on == "secs" | on == "seconds") {
              secs = k
          }
          a = .index(ts2) + (secs - .index(ts2)%%secs)
          ts3 = .xts(ts2, a,tz="GMT")
      }
      if (on == "hours") {
          secs = 3600
          a = .index(ts2) + (secs - .index(ts2)%%secs)
          ts3 = .xts(ts2, a,tz="GMT")
      }
      if (on == "days") {
          secs = 24 * 3600
          a = .index(ts2) + (secs - .index(ts2)%%secs) - (24 * 
              3600)
          ts3 = .xts(ts2, a,tz="GMT")
      }
      if (on == "weeks") {
          secs = 24 * 3600 * 7
          a = (.index(ts2) + (secs - (.index(ts2) + (3L * 86400L))%%secs)) - 
              (24 * 3600)
          ts3 = .xts(ts2, a,tz="GMT")
      }
      #if (FUN="sumN") {
      #  ep = endpoints(agdata, on, k)
      #  ts2 = period.apply(agdata, ep, FUN = match.fun("sumN") )
      #}
      
      #if (FUN!="previoustick") {
      #  ep = endpoints(agdata, on, k)
      #  ts2 = period.apply(agdata, ep, FUN = match.fun("sumN") )
      #}
      
      if (!dropna) {
          if (on != "weeks" | on != "days") {
              if (on == "secs" | on == "seconds") {
                  tby = "s"
              }
              if (on == "mins" | on == "minutes") {
                  tby = "min"
              }
              if (on == "hours") {
                  tby = "h"
              }
              by = paste(k, tby, sep = " ")
              allindex = as.timeDate(seq(start(ts3), end(ts3), 
                  by = by))
              xx = xts(rep("1", length(allindex)), order.by = allindex)
              ts3 = merge(ts3, xx)[, (1:dim(agdata)[2])]
          }
      }
      
      index(ts3) = as.timeDate(index(ts3));
      return(ts3);
    }
    
    if(!makethispartbetter){
     if (on == "secs" | on == "seconds") { secs = k; tby = paste(k,"sec",sep=" ")}
     if (on == "mins" | on == "minutes") { secs = 60*k; tby = paste(60*k,"sec",sep=" ")}
     if (on == "hours") {secs = 3600*k; tby = paste(3600*k,"sec",sep=" ")}
    
      FUN = match.fun(FUN);
      
      g = seq(start(agdata), end(agdata), by = tby);
      rawg = as.numeric(as.POSIXct(g,tz="GMT"));
      newg = rawg + (secs - rawg%%secs);
      g = as.timeDate(as.POSIXct(newg,origin="1970-01-01",tz="GMT"));
      ts3 = na.locf(merge(agdata, zoo(, g)))[as.POSIXct(g,tz="GMT")]; 
      return(ts3) 
    }
}

#PRICE (specificity: opening price and previoustick)

aggregatePrice = function (pricedata, FUN = "previoustick", on = "minutes", k = 1,marketopen="10:00:00",marketclose = "16:00:00") 
{

    pricedata = dataformatc(pricedata)
    aggpdata = aggregatets(pricedata, FUN = FUN, on, k)
    lastdaydate = strsplit(as.character(index(pricedata)), " ")[[1]][1]

	#open
    openingtime= as.timeDate(paste(lastdaydate, marketopen))
    getopenprice = as.xts(matrix(as.numeric( pricedata[1]),nrow=1), openingtime)
    aggpwithopen = c(getopenprice, aggpdata)

	#close
    closetime = as.timeDate(paste( lastdaydate, marketclose))
    condition = index(aggpwithopen) < closetime
    aggpwithopen = aggpwithopen[condition]
    getcloseprice = as.xts(matrix(as.numeric(last(pricedata)),nrow=1), closetime)
    aggpwithclose = c(aggpwithopen, getcloseprice)

    return(aggpwithclose)
}

__________________________________________________
Commonwealth Bank 
Darko Roupell 
Associate Quantitative Analyst 
Institutional Banking & Markets
Equities Research
Darling Park Tower 1
Level 23, 201 Sussex Street
Sydney, NSW 200
P:  +61 2 9117 1254
F:  +61 2 9118 1000
M: +61 400 170 515
E: Darko.Roupell at cba.com.au 
Our vision is to be Australia's finest financial services organisation through excelling in customer service.

Email Security
This email is sent solely for informational purposes. Hoax emails, commonly referred to as phishing, can appear to be from the Commonwealth Bank and ask you to update or confirm details such as client numbers, passwords, personal identification questions, contact details or account numbers. The Commonwealth Bank will never send you an email asking you to confirm, update or reveal your confidential banking information. 
Important Information
Produced by Global Markets Research, a business unit of Commonwealth Bank of Australia ABN 48 123 123 124 - AFSL 234945 (Commonwealth Bank). This publication is based on information available at the time of publishing.? We believe that the information in this communication is correct and any opinions, conclusions or recommendations are reasonably held or made as at the time of its compilation, but no warranty is made as to accuracy, reliability or completeness.? To the extent permitted by law, neither Commonwealth Bank nor any of its subsidiaries accept liability to any person for loss or damage arising from the use of this communication. This communication does not purport to be a complete statement or summary.? 
The information provided has been prepared without considering your objectives, financial situation or needs, and before acting on the information, you should consider its appropriateness to your circumstances. No person should act on the basis of this report without considering and if necessary taking appropriate professional advice upon their own particular circumstances.? 
Commonwealth Bank of Australia, as a provider of investment, borrowing and other financial services undertakes financial transactions with many corporate entities in Australia. This may include any corporate issuer referred to in this communication. Commonwealth Bank and its subsidiaries have effected or may effect transactions for their own account in any investments or related investments referred to herein. In the case of certain securities Commonwealth Bank is or may be the only market maker.


-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Matthew Gilbert
Sent: Monday, 14 November 2011 2:02 PM
To: r-sig-finance at r-project.org
Subject: [R-SIG-Finance] Aggregating tick data

Hi,

I have tick data for trade durations between 9:30 and 4:00 over the 
course of a month which I want to aggregate into 5 minute bins, starting 
from 9:30. What I currently have tried is

Durations.5min = 
period.apply(Data[,'Duration'],endpoints(Data[,'Duration'],on='minutes',k=5),FUN=mean)

however this returns bins starting from the first trade occurring on 
that day, and therefore my bins are not all the same over the course of 
the month.

Any suggestions are much appreciated.

Thanks,
Matt

-- 
Matthew Gilbert
Master of Quantitative Finance Candidate
University of Waterloo

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

************** IMPORTANT MESSAGE *****************************       
This e-mail message is intended only for the addressee(s) and contains information which may be
confidential. 
If you are not the intended recipient please advise the sender by return email, do not use or
disclose the contents, and delete the message and any attachments from your system. Unless
specifically indicated, this email does not constitute formal advice or commitment by the sender
or the Commonwealth Bank of Australia (ABN 48 123 123 124) or its subsidiaries. 
We can be contacted through our web site: commbank.com.au. 
If you no longer wish to receive commercial electronic messages from us, please reply to this
e-mail by typing Unsubscribe in the subject line. 


From jeff.davis at gmail.com  Mon Nov 14 04:16:07 2011
From: jeff.davis at gmail.com (Jeff Davis)
Date: Sun, 13 Nov 2011 22:16:07 -0500
Subject: [R-SIG-Finance] Download RBloomberg for R-2.14.0
In-Reply-To: <CAA3Wa=u=g=hhgTocV_VLSvHABGSYQgMhvYThS4Jd+GVSFZw0_Q@mail.gmail.com>
References: <1320689500.7279.YahooMailNeo@web113508.mail.gq1.yahoo.com>
	<CAA3Wa=tT9i6xVBzrD0wBxSCUGG90QX5VKnesCmtzhgCa5DPCtA@mail.gmail.com>
	<CAA3Wa=sv8XtZFLSszDOcm-TvxdKZCD2gXJ-WOVETwcuV8hD9Sg@mail.gmail.com>
	<1438F6C5E7F7884293F0B114502EA6F207C34C@m0187.s-mxs.net>
	<CAA3Wa=tR0fr3ExHQ-bUMh9u9+Urf5pLONjk7Vh3Go-1GaZYE9w@mail.gmail.com>
	<1438F6C5E7F7884293F0B114502EA6F207C3CD@m0187.s-mxs.net>
	<05C1ABBB41112A4DB61380AD45F18EB61E844DFD5F@SWVLONCUEXDP01.im.root-domain.net>
	<CA+ckjv1ZRfy1cihH5EVPn7qzP3Tr0m3YM_WZEhMJJfuyCmPepg@mail.gmail.com>
	<CAA3Wa=u=g=hhgTocV_VLSvHABGSYQgMhvYThS4Jd+GVSFZw0_Q@mail.gmail.com>
Message-ID: <CAHx6z=jZeFvbZxSnn=UaWOaQRmxn6vx92OJ6cYSnyHjPBxDG8A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111113/43f32287/attachment.pl>

From edd at debian.org  Mon Nov 14 05:56:59 2011
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 13 Nov 2011 22:56:59 -0600
Subject: [R-SIG-Finance] Dealing with live quotes in R
In-Reply-To: <E8CC19FC66B5FB46B5511B6E8AE814185B3FC7855B@VAUNSW137.au.cbainet.com>
References: <CAM6Bxr-EVqtmjAS3f=7aBHiTAm_SqedzMuZRmh8wSHNsPQAawA@mail.gmail.com>
	<E8CC19FC66B5FB46B5511B6E8AE814185B3FBDE687@VAUNSW137.au.cbainet.com>
	<AFE776B0-CC4C-4D14-B6B5-DF2F586B4206@gmail.com>
	<1320998699431-4030704.post@n4.nabble.com>
	<E8CC19FC66B5FB46B5511B6E8AE814185B3FC7855B@VAUNSW137.au.cbainet.com>
Message-ID: <20160.40859.418123.611769@max.nulle.part>


On 14 November 2011 at 07:24, Roupell, Darko wrote:
| Check out for Rcpp which according to authors is made for seamless R and C++ integration. 

And 45 package on CRAN which use Rcpp seem to agree....

| So re-writing code in C+ and calling it from R would certainly sped up execution.
| 
| However, the package is not easy to grasp, and last time I was in contact with Dirk, one of the authors, he offered his service on fee-based arrangement, which I politely declined.

Pardon me?  You, as I recall, wanted free tutorials or hand-holding off-list
to get, as I reall, quantstrat rewritten.  In that context, I may have
pointed out to you that a) Romain and I prefer that questions come via the
rcpp-devel where we generally answer questions promptly (and for free) and b)
that as I recall Brian already told you what to do with respect to
quantstrat.

If you, or anyone else, needs custom work, and on tight deadlines, Romain is
generally available as a consultant whereas I have a day job.  

There is only so much we can do for you for free, so if you really need more
(and as you post from a commercial entity) you could always consider
purchasing extra services. 

Nothing nefarious here.  The gift economy still works fine, but with its
unpredictable timing.

Hope this makes it a little clearer. Cheers,  Dirk
 
| You may have better luck. Hope this helps.
| 
| __________________________________________________
| Commonwealth Bank 
| Darko Roupell 
| Associate Quantitative Analyst 
| Institutional Banking & Markets
| Equities Research
| Darling Park Tower 1
| Level 23, 201 Sussex Street
| Sydney, NSW 200
| P:  +61 2 9117 1254
| F:  +61 2 9118 1000
| M: +61 400 170 515
| E: Darko.Roupell at cba.com.au 
| Our vision is to be Australia's finest financial services organisation through excelling in customer service.
| 
| Email Security
| This email is sent solely for informational purposes. Hoax emails, commonly referred to as phishing, can appear to be from the Commonwealth Bank and ask you to update or confirm details such as client numbers, passwords, personal identification questions, contact details or account numbers. The Commonwealth Bank will never send you an email asking you to confirm, update or reveal your confidential banking information. 
| Important Information
| Produced by Global Markets Research, a business unit of Commonwealth Bank of Australia ABN 48 123 123 124 - AFSL 234945 (Commonwealth Bank). This publication is based on information available at the time of publishing.? We believe that the information in this communication is correct and any opinions, conclusions or recommendations are reasonably held or made as at the time of its compilation, but no warranty is made as to accuracy, reliability or completeness.? To the extent permitted by law, neither Commonwealth Bank nor any of its subsidiaries accept liability to any person for loss or damage arising from the use of this communication. This communication does not purport to be a complete statement or summary.? 
| The information provided has been prepared without considering your objectives, financial situation or needs, and before acting on the information, you should consider its appropriateness to your circumstances. No person should act on the basis of this report without considering and if necessary taking appropriate professional advice upon their own particular circumstances.? 
| Commonwealth Bank of Australia, as a provider of investment, borrowing and other financial services undertakes financial transactions with many corporate entities in Australia. This may include any corporate issuer referred to in this communication. Commonwealth Bank and its subsidiaries have effected or may effect transactions for their own account in any investments or related investments referred to herein. In the case of certain securities Commonwealth Bank is or may be the only market maker.
| 
| -----Original Message-----
| From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Shekhar
| Sent: Friday, 11 November 2011 7:05 PM
| To: r-sig-finance at r-project.org
| Subject: Re: [R-SIG-Finance] Dealing with live quotes in R
| 
| Darko, Do you know any other packages which I can use to reduce the latency?
| Thanks
| 
| --
| View this message in context: http://r.789695.n4.nabble.com/Dealing-with-live-quotes-in-R-tp4030033p4030704.html
| Sent from the Rmetrics mailing list archive at Nabble.com.
| 
| _______________________________________________
| R-SIG-Finance at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-sig-finance
| -- Subscriber-posting only. If you want to post, subscribe first.
| -- Also note that this is not the r-help list where general R questions should go.
| 
| ************** IMPORTANT MESSAGE *****************************       
| This e-mail message is intended only for the addressee(s) and contains information which may be
| confidential. 
| If you are not the intended recipient please advise the sender by return email, do not use or
| disclose the contents, and delete the message and any attachments from your system. Unless
| specifically indicated, this email does not constitute formal advice or commitment by the sender
| or the Commonwealth Bank of Australia (ABN 48 123 123 124) or its subsidiaries. 
| We can be contacted through our web site: commbank.com.au. 
| If you no longer wish to receive commercial electronic messages from us, please reply to this
| e-mail by typing Unsubscribe in the subject line. 
| 
| _______________________________________________
| R-SIG-Finance at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-sig-finance
| -- Subscriber-posting only. If you want to post, subscribe first.
| -- Also note that this is not the r-help list where general R questions should go.

-- 
"Outside of a dog, a book is a man's best friend. Inside of a dog, it is too
dark to read." -- Groucho Marx


From sjain at caa.columbia.edu  Mon Nov 14 10:08:56 2011
From: sjain at caa.columbia.edu (sammyny)
Date: Mon, 14 Nov 2011 01:08:56 -0800 (PST)
Subject: [R-SIG-Finance] Calculating Hasbrouck's information share and
 Gonzalo-Granger weights on R
In-Reply-To: <CAP48nPYK-+=d7UCGeBA2t-U4tj4+0TxkKs_E+eyqVETzmLdPRQ@mail.gmail.com>
References: <AANLkTinWNEvAVUjk8TYVd_28mEUS_dKnezCPtX64v4Lo@mail.gmail.com>
	<1320790767748-4017779.post@n4.nabble.com>
	<1321183293280-4036386.post@n4.nabble.com>
	<1321211518522-4037279.post@n4.nabble.com>
	<CAP48nPYK-+=d7UCGeBA2t-U4tj4+0TxkKs_E+eyqVETzmLdPRQ@mail.gmail.com>
Message-ID: <1321261736804-4038866.post@n4.nabble.com>

Great. Will look into it - thanks for your prompt response.

--
View this message in context: http://r.789695.n4.nabble.com/Calculating-Hasbrouck-s-information-share-and-Gonzalo-Granger-weights-on-R-tp2395838p4038866.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From econ.napon at hotmail.com  Mon Nov 14 19:12:40 2011
From: econ.napon at hotmail.com (Napon Hongsakulvasu)
Date: Mon, 14 Nov 2011 12:12:40 -0600
Subject: [R-SIG-Finance] Binart ARMA
Message-ID: <COL104-W321FA6A7A5DFC710AE9CB698C00@phx.gbl>







Hi All

I need some help about construct MLE logit for Binary Autogressive Moving Average model.
Please see the model in the PDF attach file.

This is what i did.

y<-c(0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1)      # y is a binary data 
logitfun <- function(beta,y,){
      zeta1<-beta[1]
      zeta2<-beta[2]
      zeta3<-beta[3]
      ne<-zeta1+zeta2*lag(y,-1)+zeta3*lag(y,-2)                        # this is only AR(2) 
      mu <- exp(ne)/(1.0+exp(ne))
      sum( y * log(mu) + (1-y)*log(1-mu) )
    }
mle<-optim(c(0,0,0),logitfun,y=y)
mle
summary(mle)

what i tring to do is to modified "ne<-zeta1+zeta2*lag(y,-1)+zeta3*lag(y,-2)"
How can i do "ne" with lag(y,-1) , lag(y,-2), (lag(y,-1)-lag(mu,-1)), (lag(y,-2)lag(mu,-2))

thanks

Napon H.










 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111114/e478e403/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Model.pdf
Type: application/pdf
Size: 359512 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111114/e478e403/attachment.pdf>

From kristian.langgaard.lind at gmail.com  Mon Nov 14 22:07:51 2011
From: kristian.langgaard.lind at gmail.com (Kristian Lind)
Date: Mon, 14 Nov 2011 22:07:51 +0100
Subject: [R-SIG-Finance] State-dependent volatility in state space model -
	CIR
Message-ID: <CAK0QJvyg=hDS0UfJzXpPPLquMwo=V0Gds0i=s3ByUxWXgOZ_5g@mail.gmail.com>

Hi everyone,

I posted a similar question on the R-help list a few days ago and it
was suggested to me to try here instead. I apologize for the
cross-posting.

I'm trying to model a term structure of yield spreads where the state
variables are independent square-root processes.

The state space model I want to estimate using a Kalman filter takes
the following form -

measurement eq:

z_t = a + b*y_t + eps_t

transition eq

y_t+h = (I -exp(-hL))theta + exp(-hL)y_t+ eta_{t+h}.

The problem is that the distribution of the error terms of the
transition equation depend on the previous value of the state
variable.
To be exact: y_t|y_{t-1} ~N(mu, Q_t) where Q is a diagonal matrix with
elements equal to

Q_{i,t} = sigma_i*(1-exp(-kappa_i*h)/kappa_i*(theta_i/2*(1-exp(kappa_i*h)+exp(-kappa_i*h)y_{t-1,i}

I found an old thread about the same problem
https://stat.ethz.ch/pipermail/r-sig-finance/2007q2/001362.html

I've adapted Prof. Silva's code by to my setting, but the optimization
process breaks down.

Any ideas or examples on how to solve this problem are much appreciated.

Thank you in advance.

Kristian


From kristian.langgaard.lind at gmail.com  Mon Nov 14 22:39:07 2011
From: kristian.langgaard.lind at gmail.com (Kristian Lind)
Date: Mon, 14 Nov 2011 22:39:07 +0100
Subject: [R-SIG-Finance] State-dependent volatility in state space model
	- CIR
In-Reply-To: <CAK0QJvyg=hDS0UfJzXpPPLquMwo=V0Gds0i=s3ByUxWXgOZ_5g@mail.gmail.com>
References: <CAK0QJvyg=hDS0UfJzXpPPLquMwo=V0Gds0i=s3ByUxWXgOZ_5g@mail.gmail.com>
Message-ID: <CAK0QJvwnnUu_aDdpS7LY=SAP_kotJ1gRsar0o5rORqxtXNhx+A@mail.gmail.com>

Just to clarify, the model I want to estimate is the state space
version of the Cox-Ingersoll-Ross model.

2011/11/14 Kristian Lind <kristian.langgaard.lind at gmail.com>:
> Hi everyone,
>
> I posted a similar question on the R-help list a few days ago and it
> was suggested to me to try here instead. I apologize for the
> cross-posting.
>
> I'm trying to model a term structure of yield spreads where the state
> variables are independent square-root processes.
>
> The state space model I want to estimate using a Kalman filter takes
> the following form -
>
> measurement eq:
>
> z_t = a + b*y_t + eps_t
>
> transition eq
>
> y_t+h = (I -exp(-hL))theta + exp(-hL)y_t+ eta_{t+h}.
>
> The problem is that the distribution of the error terms of the
> transition equation depend on the previous value of the state
> variable.
> To be exact: y_t|y_{t-1} ~N(mu, Q_t) where Q is a diagonal matrix with
> elements equal to
>
> Q_{i,t} = sigma_i*(1-exp(-kappa_i*h)/kappa_i*(theta_i/2*(1-exp(kappa_i*h)+exp(-kappa_i*h)y_{t-1,i}
>
> I found an old thread about the same problem
> https://stat.ethz.ch/pipermail/r-sig-finance/2007q2/001362.html
>
> I've adapted Prof. Silva's code by to my setting, but the optimization
> process breaks down.
>
> Any ideas or examples on how to solve this problem are much appreciated.
>
> Thank you in advance.
>
> Kristian
>


From DAvery at marketingleverage.com  Tue Nov 15 16:21:51 2011
From: DAvery at marketingleverage.com (Dan Avery)
Date: Tue, 15 Nov 2011 07:21:51 -0800
Subject: [R-SIG-Finance] Quantstrat Prefer Pricing - v2
Message-ID: <11BAA7190200EE479F35AB150B22248714BEDC5546@VA3DIAXVS131.RED001.local>

I sent the following last week but email was set to HTML.

I'm continuing to work with Quantstrat to try to understand the syntax and functionality of the program. I've been experimenting with the prefer pricing options in add.rule and applyStrategy. The prefer pricing works in applyStrategy - but there is only one option, enter and exit on the same prefer choice, which is not what I'm looking for.

On the other hand, add.rule allows the choice of different price preferences for enter and exit. However, the results are not what I would expect. The order book shows the correct prices - High for enter and Low for exit but the transactions show Closing prices as shown below
#?????????? Order.Qty Order.Price Txn.Qty Txn.Price IBM.High IBM.Low IBM.Close
#2007-02-26?????? 100?????? 97.86???? 100???? 96.91??? 97.86?? 96.46???? 96.91
#2007-03-20????? -100?????? 93.55??? -100???? 94.50??? 94.53?? 93.55???? 94.50
#2007-04-03????? -100?????? 96.23??? -100???? 96.10??? 96.23?? 95.33???? 96.10
#2007-04-12?????? 100?????? 94.53???? 100???? 95.67??? 95.82?? 94.53???? 95.67
#2007-04-17????? -100?????? 97.66??? -100???? 97.12??? 97.66?? 96.02???? 97.12
#2007-04-18?????? 100?????? 94.40???? 100???? 94.80??? 95.91?? 94.40???? 94.80
#2007-04-24????? -100?????? 99.90??? -100???? 98.49??? 99.90?? 97.23???? 98.49
?
I've tried putting the prefer settings in parameters and dots but that doesn't work. I've also tried debugging in ruleOrderProc and it appears that the prefer setting is not being passed to the getPrice function. However, the code is complex and I haven't been able to understand where the issue is. 

The following shows the code based on the bbands demo example. Any help would be welcome.

Thanks
Dan

####? CODE #####################################################
require(quantstrat)
suppressWarnings(rm("order_book.bbands",pos=.strategy))
suppressWarnings(rm("account.bbands","portfolio.bbands",pos=.blotter))
suppressWarnings(rm("account.st","portfolio.st","stock.str","stratBBands","initDate","initEq",'start_t','end_t'))

# some things to set up here
stock.str='IBM' # what are we trying it on

# we'll pass these 
SD = 2 # how many standard deviations, traditionally 2
N = 20 # how many periods for the moving average, traditionally 20

currency('USD')
stock(stock.str,currency='USD',multiplier=1)

initDate='2006-12-31'
initEq=1000000

portfolio.st='bbands'
account.st='bbands'

initPortf(portfolio.st,symbols=stock.str, initDate=initDate)
initAcct(account.st,portfolios='bbands', initDate=initDate)
initOrders(portfolio=portfolio.st,initDate=initDate)

stratBBands <- strategy("bbands")

#one indicator
stratBBands <- add.indicator(strategy = stratBBands, name = "BBands", arguments = list(HLC = quote(HLC(mktdata)), maType='SMA'))


#add signals:
stratBBands <- add.signal(stratBBands,name="sigCrossover",arguments = list(columns=c("Close","up"),relationship="gt"),label="Cl.gt.UpperBand")
stratBBands <- add.signal(stratBBands,name="sigCrossover",arguments = list(columns=c("Close","dn"),relationship="lt"),label="Cl.lt.LowerBand")
stratBBands <- add.signal(stratBBands,name="sigCrossover",arguments = list(columns=c("High","Low","mavg"),relationship="op"),label="Cross.Mid")

# lets add some rules
#put prefer as an argument
stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = 
list(sigcol="Cl.gt.UpperBand",sigval=TRUE, orderqty=-100, ordertype='market',
?orderside=NULL, threshold=NULL,prefer="High"),type='enter')
?
stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
?list(sigcol="Cl.lt.LowerBand",sigval=TRUE, orderqty= 100, ordertype='market', 
?orderside=NULL, threshold=NULL,prefer="High"),type='enter')
?
stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
?list(sigcol="Cross.Mid",sigval=TRUE, orderqty= 'all', ordertype='market',
? orderside=NULL, threshold=NULL,prefer="Low"),type='exit')

stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = 
list(sigcol="Cl.gt.UpperBand",sigval=TRUE, orderqty=-100, ordertype='market',
?orderside=NULL, threshold=NULL,prefer="High"),type='enter')
?
stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
?list(sigcol="Cl.lt.LowerBand",sigval=TRUE, orderqty= 100, ordertype='market', 
?orderside=NULL, threshold=NULL,prefer="High"),type='enter')
?
stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
?list(sigcol="Cross.Mid",sigval=TRUE, orderqty= 'all', ordertype='market',
? orderside=NULL, threshold=NULL,prefer="Low"),type='exit')



#alternately, to exit at the opposite band, the rules would be...
#stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = list(data=quote(mktdata),sigcol="Lo.gt.UpperBand",sigval=TRUE, orderqty= 'all', ordertype='market', orderside=NULL, threshold=NULL),type='exit')
#stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = list(data=quote(mktdata),sigcol="Hi.lt.LowerBand",sigval=TRUE, orderqty= 'all', ordertype='market', orderside=NULL, threshold=NULL),type='exit')

#TODO add thresholds and stop-entry and stop-exit handling to test
if(!exists(stock.str)){
getSymbols(stock.str,from=initDate)
}

start_t<-Sys.time()
out<-try(applyStrategy(strategy=stratBBands , portfolios='bbands',parameters=list(sd=SD,n=N)) )

# look at the order book
ob<-getOrderBook(portfolio.st)
closedOrders<-ob$bbands$IBM[ob$bbands$IBM[,6]=="closed",1:2]
#get the stock prices then put in the order book and transactions
IBM_HLC<-HLC(get(stock.str)) #get the prices for the stock
txns<-getTxns(portfolio.st,stock.str)? #transactions come from the portfolio

compare<-merge(closedOrders[index(txns)],txns[,1:2],IBM_HLC[index(txns),])
compare[2:8,]

#??? ???????Order.Qty Order.Price Txn.Qty Txn.Price IBM.High IBM.Low IBM.Close
#2007-02-26?????? 100?????? 97.86???? 100???? 96.91??? 97.86?? 96.46???? 96.91
#2007-03-20????? -100?????? 93.55??? -100???? 94.50??? 94.53?? 93.55???? 94.50
#2007-04-03????? -100?? ????96.23??? -100???? 96.10??? 96.23?? 95.33???? 96.10
#2007-04-12?????? 100?????? 94.53???? 100???? 95.67??? 95.82?? 94.53???? 95.67
#2007-04-17????? -100?????? 97.66??? -100???? 97.12??? 97.66?? 96.02???? 97.12
#2007-04-18?????? 100?????? 94.40???? 100? ???94.80??? 95.91?? 94.40???? 94.80
#2007-04-24????? -100?????? 99.90??? -100???? 98.49??? 99.90?? 97.23???? 98.49
#


start_t<-Sys.time()
updatePortf(Portfolio='bbands',Dates=paste('::',as.Date(Sys.time()),sep=''),Prices=tran_cl)
end_t<-Sys.time()
print("updatePortf execution time:")
print(end_t-start_t)

chart.Posn(Portfolio='bbands',Symbol=stock.str)
plot(add_BBands(on=1,sd=SD,n=N))

############### stuff that didn't work ######################################

#move the prefer to paramaters - doesn't work - "close" is returned for orders and txns
#try list(prefer=High)etc
#stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = 
#list(sigcol="Cl.gt.UpperBand",sigval=TRUE, orderqty=-100, ordertype='market',
# orderside=NULL, threshold=NULL),type='enter',parameters=list("prefer=High"))
# 
#stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
# list(sigcol="Cl.lt.LowerBand",sigval=TRUE, orderqty= 100, ordertype='market', 
# orderside=NULL, threshold=NULL),type='enter',parameters=list("prefer=High"))
# 
#stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
# list(sigcol="Cross.Mid",sigval=TRUE, orderqty= 'all', ordertype='market',
#? orderside=NULL, threshold=NULL),type='exit',parameters=list("prefer=Low"))
#
#stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = 
#list(sigcol="Cl.gt.UpperBand",sigval=TRUE, orderqty=-100, ordertype='market',
# orderside=NULL, threshold=NULL),type='enter',parameters=list("prefer=High"))
# 
#stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
# list(sigcol="Cl.lt.LowerBand",sigval=TRUE, orderqty= 100, ordertype='market', 
# orderside=NULL, threshold=NULL),type='enter',parameters=list("prefer=High"))
# 
#stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
# list(sigcol="Cross.Mid",sigval=TRUE, orderqty= 'all', ordertype='market',
#? orderside=NULL, threshold=NULL),type='exit',parameters=list("prefer=Low"))
#

#now try without parameters designation, presumably as part of dots
#stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = 
#list(sigcol="Cl.gt.UpperBand",sigval=TRUE, orderqty=-100, ordertype='market',
# orderside=NULL, threshold=NULL),type='enter',prefer="High")
# 
#stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
# list(sigcol="Cl.lt.LowerBand",sigval=TRUE, orderqty= 100, ordertype='market', 
# orderside=NULL, threshold=NULL),type='enter',prefer="High")
# 
#stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
# list(sigcol="Cross.Mid",sigval=TRUE, orderqty= 'all', ordertype='market',
#? orderside=NULL, threshold=NULL),type='exit',prefer="Low")
#
#stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = 
#list(sigcol="Cl.gt.UpperBand",sigval=TRUE, orderqty=-100, ordertype='market',
# orderside=NULL, threshold=NULL),type='enter',prefer="High")
# 
#stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
# list(sigcol="Cl.lt.LowerBand",sigval=TRUE, orderqty= 100, ordertype='market', 
# orderside=NULL, threshold=NULL),type='enter',prefer="High")
# 
#stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
# list(sigcol="Cross.Mid",sigval=TRUE, orderqty= 'all', ordertype='market',
#? orderside=NULL, threshold=NULL),type='exit',prefer="Low")
#

###############################################################################
# R (http://r-project.org/) Quantitative Strategy Model Framework
#
# Copyright (c) 2009-2010
# Peter Carl, Dirk Eddelbuettel, Brian G. Peterson, Jeffrey Ryan, and Joshua Ulrich 
#
# This library is distributed under the terms of the GNU Public License (GPL)
# for full details see the file COPYING
#
# $Id: bbands.R 621 2011-06-09 23:18:04Z gsee $
# ?


From brian at braverock.com  Tue Nov 15 16:37:27 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 15 Nov 2011 09:37:27 -0600
Subject: [R-SIG-Finance] Quantstrat Prefer Pricing - v2
In-Reply-To: <11BAA7190200EE479F35AB150B22248714BEDC5546@VA3DIAXVS131.RED001.local>
References: <11BAA7190200EE479F35AB150B22248714BEDC5546@VA3DIAXVS131.RED001.local>
Message-ID: <1321371447.26353.66.camel@brian-rcg>

Enter limit orders instead of market orders.  Then you can put in a
price at your limit, and if the market cooperates, you get filled.

I suppose we could separate price preferences for enters and exits: but
as documented, the one price defined by the 'prefer' argument will be
used to fill market orders for OHLC data.

On Tue, 2011-11-15 at 07:21 -0800, Dan Avery wrote:
> I sent the following last week but email was set to HTML.
> 
> I'm continuing to work with Quantstrat to try to understand the syntax and functionality of the program. I've been experimenting with the prefer pricing options in add.rule and applyStrategy. The prefer pricing works in applyStrategy - but there is only one option, enter and exit on the same prefer choice, which is not what I'm looking for.
> 
> On the other hand, add.rule allows the choice of different price preferences for enter and exit. However, the results are not what I would expect. The order book shows the correct prices - High for enter and Low for exit but the transactions show Closing prices as shown below
> #           Order.Qty Order.Price Txn.Qty Txn.Price IBM.High IBM.Low IBM.Close
> #2007-02-26       100       97.86     100     96.91    97.86   96.46     96.91
> #2007-03-20      -100       93.55    -100     94.50    94.53   93.55     94.50
> #2007-04-03      -100       96.23    -100     96.10    96.23   95.33     96.10
> #2007-04-12       100       94.53     100     95.67    95.82   94.53     95.67
> #2007-04-17      -100       97.66    -100     97.12    97.66   96.02     97.12
> #2007-04-18       100       94.40     100     94.80    95.91   94.40     94.80
> #2007-04-24      -100       99.90    -100     98.49    99.90   97.23     98.49
>  
> I've tried putting the prefer settings in parameters and dots but that doesn't work. I've also tried debugging in ruleOrderProc and it appears that the prefer setting is not being passed to the getPrice function. However, the code is complex and I haven't been able to understand where the issue is. 
> 
> The following shows the code based on the bbands demo example. Any help would be welcome.
> 
> Thanks
> Dan
> 
> ####  CODE #####################################################
> require(quantstrat)
> suppressWarnings(rm("order_book.bbands",pos=.strategy))
> suppressWarnings(rm("account.bbands","portfolio.bbands",pos=.blotter))
> suppressWarnings(rm("account.st","portfolio.st","stock.str","stratBBands","initDate","initEq",'start_t','end_t'))
> 
> # some things to set up here
> stock.str='IBM' # what are we trying it on
> 
> # we'll pass these 
> SD = 2 # how many standard deviations, traditionally 2
> N = 20 # how many periods for the moving average, traditionally 20
> 
> currency('USD')
> stock(stock.str,currency='USD',multiplier=1)
> 
> initDate='2006-12-31'
> initEq=1000000
> 
> portfolio.st='bbands'
> account.st='bbands'
> 
> initPortf(portfolio.st,symbols=stock.str, initDate=initDate)
> initAcct(account.st,portfolios='bbands', initDate=initDate)
> initOrders(portfolio=portfolio.st,initDate=initDate)
> 
> stratBBands <- strategy("bbands")
> 
> #one indicator
> stratBBands <- add.indicator(strategy = stratBBands, name = "BBands", arguments = list(HLC = quote(HLC(mktdata)), maType='SMA'))
> 
> 
> #add signals:
> stratBBands <- add.signal(stratBBands,name="sigCrossover",arguments = list(columns=c("Close","up"),relationship="gt"),label="Cl.gt.UpperBand")
> stratBBands <- add.signal(stratBBands,name="sigCrossover",arguments = list(columns=c("Close","dn"),relationship="lt"),label="Cl.lt.LowerBand")
> stratBBands <- add.signal(stratBBands,name="sigCrossover",arguments = list(columns=c("High","Low","mavg"),relationship="op"),label="Cross.Mid")
> 
> # lets add some rules
> #put prefer as an argument
> stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = 
> list(sigcol="Cl.gt.UpperBand",sigval=TRUE, orderqty=-100, ordertype='market',
>  orderside=NULL, threshold=NULL,prefer="High"),type='enter')
>  
> stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
>  list(sigcol="Cl.lt.LowerBand",sigval=TRUE, orderqty= 100, ordertype='market', 
>  orderside=NULL, threshold=NULL,prefer="High"),type='enter')
>  
> stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
>  list(sigcol="Cross.Mid",sigval=TRUE, orderqty= 'all', ordertype='market',
>   orderside=NULL, threshold=NULL,prefer="Low"),type='exit')
> 
> stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = 
> list(sigcol="Cl.gt.UpperBand",sigval=TRUE, orderqty=-100, ordertype='market',
>  orderside=NULL, threshold=NULL,prefer="High"),type='enter')
>  
> stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
>  list(sigcol="Cl.lt.LowerBand",sigval=TRUE, orderqty= 100, ordertype='market', 
>  orderside=NULL, threshold=NULL,prefer="High"),type='enter')
>  
> stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
>  list(sigcol="Cross.Mid",sigval=TRUE, orderqty= 'all', ordertype='market',
>   orderside=NULL, threshold=NULL,prefer="Low"),type='exit')
> 
> 
> 
> #alternately, to exit at the opposite band, the rules would be...
> #stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = list(data=quote(mktdata),sigcol="Lo.gt.UpperBand",sigval=TRUE, orderqty= 'all', ordertype='market', orderside=NULL, threshold=NULL),type='exit')
> #stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = list(data=quote(mktdata),sigcol="Hi.lt.LowerBand",sigval=TRUE, orderqty= 'all', ordertype='market', orderside=NULL, threshold=NULL),type='exit')
> 
> #TODO add thresholds and stop-entry and stop-exit handling to test
> if(!exists(stock.str)){
> getSymbols(stock.str,from=initDate)
> }
> 
> start_t<-Sys.time()
> out<-try(applyStrategy(strategy=stratBBands , portfolios='bbands',parameters=list(sd=SD,n=N)) )
> 
> # look at the order book
> ob<-getOrderBook(portfolio.st)
> closedOrders<-ob$bbands$IBM[ob$bbands$IBM[,6]=="closed",1:2]
> #get the stock prices then put in the order book and transactions
> IBM_HLC<-HLC(get(stock.str)) #get the prices for the stock
> txns<-getTxns(portfolio.st,stock.str)  #transactions come from the portfolio
> 
> compare<-merge(closedOrders[index(txns)],txns[,1:2],IBM_HLC[index(txns),])
> compare[2:8,]
> 
> #           Order.Qty Order.Price Txn.Qty Txn.Price IBM.High IBM.Low IBM.Close
> #2007-02-26       100       97.86     100     96.91    97.86   96.46     96.91
> #2007-03-20      -100       93.55    -100     94.50    94.53   93.55     94.50
> #2007-04-03      -100       96.23    -100     96.10    96.23   95.33     96.10
> #2007-04-12       100       94.53     100     95.67    95.82   94.53     95.67
> #2007-04-17      -100       97.66    -100     97.12    97.66   96.02     97.12
> #2007-04-18       100       94.40     100     94.80    95.91   94.40     94.80
> #2007-04-24      -100       99.90    -100     98.49    99.90   97.23     98.49
> #
> 
> 
> start_t<-Sys.time()
> updatePortf(Portfolio='bbands',Dates=paste('::',as.Date(Sys.time()),sep=''),Prices=tran_cl)
> end_t<-Sys.time()
> print("updatePortf execution time:")
> print(end_t-start_t)
> 
> chart.Posn(Portfolio='bbands',Symbol=stock.str)
> plot(add_BBands(on=1,sd=SD,n=N))
> 
> ############### stuff that didn't work ######################################
> 
> #move the prefer to paramaters - doesn't work - "close" is returned for orders and txns
> #try list(prefer=High)etc
> #stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = 
> #list(sigcol="Cl.gt.UpperBand",sigval=TRUE, orderqty=-100, ordertype='market',
> # orderside=NULL, threshold=NULL),type='enter',parameters=list("prefer=High"))
> # 
> #stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
> # list(sigcol="Cl.lt.LowerBand",sigval=TRUE, orderqty= 100, ordertype='market', 
> # orderside=NULL, threshold=NULL),type='enter',parameters=list("prefer=High"))
> # 
> #stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
> # list(sigcol="Cross.Mid",sigval=TRUE, orderqty= 'all', ordertype='market',
> #  orderside=NULL, threshold=NULL),type='exit',parameters=list("prefer=Low"))
> #
> #stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = 
> #list(sigcol="Cl.gt.UpperBand",sigval=TRUE, orderqty=-100, ordertype='market',
> # orderside=NULL, threshold=NULL),type='enter',parameters=list("prefer=High"))
> # 
> #stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
> # list(sigcol="Cl.lt.LowerBand",sigval=TRUE, orderqty= 100, ordertype='market', 
> # orderside=NULL, threshold=NULL),type='enter',parameters=list("prefer=High"))
> # 
> #stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
> # list(sigcol="Cross.Mid",sigval=TRUE, orderqty= 'all', ordertype='market',
> #  orderside=NULL, threshold=NULL),type='exit',parameters=list("prefer=Low"))
> #
> 
> #now try without parameters designation, presumably as part of dots
> #stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = 
> #list(sigcol="Cl.gt.UpperBand",sigval=TRUE, orderqty=-100, ordertype='market',
> # orderside=NULL, threshold=NULL),type='enter',prefer="High")
> # 
> #stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
> # list(sigcol="Cl.lt.LowerBand",sigval=TRUE, orderqty= 100, ordertype='market', 
> # orderside=NULL, threshold=NULL),type='enter',prefer="High")
> # 
> #stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
> # list(sigcol="Cross.Mid",sigval=TRUE, orderqty= 'all', ordertype='market',
> #  orderside=NULL, threshold=NULL),type='exit',prefer="Low")
> #
> #stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = 
> #list(sigcol="Cl.gt.UpperBand",sigval=TRUE, orderqty=-100, ordertype='market',
> # orderside=NULL, threshold=NULL),type='enter',prefer="High")
> # 
> #stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
> # list(sigcol="Cl.lt.LowerBand",sigval=TRUE, orderqty= 100, ordertype='market', 
> # orderside=NULL, threshold=NULL),type='enter',prefer="High")
> # 
> #stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
> # list(sigcol="Cross.Mid",sigval=TRUE, orderqty= 'all', ordertype='market',
> #  orderside=NULL, threshold=NULL),type='exit',prefer="Low")
> #
> 
> ###############################################################################
> # R (http://r-project.org/) Quantitative Strategy Model Framework
> #
> # Copyright (c) 2009-2010
> # Peter Carl, Dirk Eddelbuettel, Brian G. Peterson, Jeffrey Ryan, and Joshua Ulrich 
> #
> # This library is distributed under the terms of the GNU Public License (GPL)
> # for full details see the file COPYING
> #
> # $Id: bbands.R 621 2011-06-09 23:18:04Z gsee $
> #  
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From blue2bleu at yahoo.fr  Wed Nov 16 00:14:58 2011
From: blue2bleu at yahoo.fr (Chris de Bleu)
Date: Tue, 15 Nov 2011 23:14:58 +0000 (GMT)
Subject: [R-SIG-Finance] print an xts object in reverse order
Message-ID: <1321398898.22061.YahooMailNeo@web29016.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111115/891fb115/attachment.pl>

From jeffrey.ryan at lemnica.com  Wed Nov 16 01:07:52 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Tue, 15 Nov 2011 18:07:52 -0600
Subject: [R-SIG-Finance] print an xts object in reverse order
In-Reply-To: <1321398898.22061.YahooMailNeo@web29016.mail.ird.yahoo.com>
References: <1321398898.22061.YahooMailNeo@web29016.mail.ird.yahoo.com>
Message-ID: <CABDUZc8RMJGT+ujhnGqLbxAFbBK1BjaPWkx=nkieEqPrA948hA@mail.gmail.com>

You can't.

xts enforces time order - if it didn't it would be nearly useless.

If you really need to reverse the order, you should think twice about
it. If upon further consideration you still need it reversed, you can
coerce to something else to accommodate.

rev(coredata(x))
rev(as.matrix(x)

or

rev(as.zoo(x))

The latter is strange to me, as it reverses the underlying series, but
not the dates.  Sort of alluding to the 'do you really want to do
this...'

Jeff

On Tue, Nov 15, 2011 at 5:14 PM, Chris de Bleu <blue2bleu at yahoo.fr> wrote:
> Hi,
>
> I would like to know how can I print an xts object in reverse order?
>
>
> rev(xtsObject) always gives the same order as xtsObject.
>
> Thanks
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From jeffrey.ryan at lemnica.com  Wed Nov 16 03:31:46 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Tue, 15 Nov 2011 20:31:46 -0600
Subject: [R-SIG-Finance] print an xts object in reverse order
In-Reply-To: <CABDUZc8RMJGT+ujhnGqLbxAFbBK1BjaPWkx=nkieEqPrA948hA@mail.gmail.com>
References: <1321398898.22061.YahooMailNeo@web29016.mail.ird.yahoo.com>
	<CABDUZc8RMJGT+ujhnGqLbxAFbBK1BjaPWkx=nkieEqPrA948hA@mail.gmail.com>
Message-ID: <CABDUZc-rzr2YpCLmAzOH51JH--MEQ6K6+mQTGhXkvjsFy_P5aw@mail.gmail.com>

For the record, if you really want to print it backwards, you can do this:

> as.matrix(x)[NROW(x):1,,drop=FALSE]
           [,1]
2011-11-25   10
2011-11-24    9
2011-11-23    8
2011-11-22    7
2011-11-21    6
2011-11-20    5
2011-11-19    4
2011-11-18    3
2011-11-17    2
2011-11-16    1

HTH
Jeff

P.S. rev on an xts object is actually rev.zoo, so the same behavior
you get from zoo you get in xts.

On Tue, Nov 15, 2011 at 6:07 PM, Jeffrey Ryan <jeffrey.ryan at lemnica.com> wrote:
> You can't.
>
> xts enforces time order - if it didn't it would be nearly useless.
>
> If you really need to reverse the order, you should think twice about
> it. If upon further consideration you still need it reversed, you can
> coerce to something else to accommodate.
>
> rev(coredata(x))
> rev(as.matrix(x)
>
> or
>
> rev(as.zoo(x))
>
> The latter is strange to me, as it reverses the underlying series, but
> not the dates. ?Sort of alluding to the 'do you really want to do
> this...'
>
> Jeff
>
> On Tue, Nov 15, 2011 at 5:14 PM, Chris de Bleu <blue2bleu at yahoo.fr> wrote:
>> Hi,
>>
>> I would like to know how can I print an xts object in reverse order?
>>
>>
>> rev(xtsObject) always gives the same order as xtsObject.
>>
>> Thanks
>>
>> ? ? ? ?[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>
>
>
> --
> Jeffrey Ryan
> jeffrey.ryan at lemnica.com
>
> www.lemnica.com
> www.esotericR.com
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From xianli.analytics at gmail.com  Wed Nov 16 17:16:23 2011
From: xianli.analytics at gmail.com (Xian Li)
Date: Wed, 16 Nov 2011 11:16:23 -0500
Subject: [R-SIG-Finance] risk-free rate in option pricing
Message-ID: <63477C0A-161F-42A1-8745-6B665807407B@gmail.com>

Hi,

As an input for option pricing models (e.g. GBSOption from fOption), how's the risk-free rate of return usually calculated? Shall we just find any T-bill whose maturity date matches the option expiration date and use its value to calculate the compound yield? Are there any existing functions for doing this?

Thanks!

Xian Li

From jacopo at moneyfarm.com  Wed Nov 16 17:26:26 2011
From: jacopo at moneyfarm.com (Jacopo Anselmi)
Date: Wed, 16 Nov 2011 17:26:26 +0100
Subject: [R-SIG-Finance] RBloomberg update on "Error in dimnames(x) <- dn :
 'dimnames' applied to non-array"
Message-ID: <CAG_WONwfbNQL79UzuKoZ_p57_h189Ku6PeKnKJaAC6=avbR3iw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111116/918192ce/attachment.pl>

From Murali.Menon at avivainvestors.com  Wed Nov 16 17:49:36 2011
From: Murali.Menon at avivainvestors.com (Murali.Menon at avivainvestors.com)
Date: Wed, 16 Nov 2011 16:49:36 +0000
Subject: [R-SIG-Finance] RBloomberg update on "Error in dimnames(x) <-
 dn : 'dimnames' applied to non-array"
In-Reply-To: <CAG_WONwfbNQL79UzuKoZ_p57_h189Ku6PeKnKJaAC6=avbR3iw@mail.gmail.com>
References: <CAG_WONwfbNQL79UzuKoZ_p57_h189Ku6PeKnKJaAC6=avbR3iw@mail.gmail.com>
Message-ID: <05C1ABBB41112A4DB61380AD45F18EB61E879B35D2@SWVLONCUEXDP01.im.root-domain.net>

I don't think you can get tick data from 2010 on Bloomberg. I can't get it via Bloomberg's Excel add-in either (I get #N/A N/A) 

Have you tried using today's date, for example? It works for me on R2.14.0 with Bloomberg API, RBloomberg and rJava versions same as you:

> tick(conn, "RYA ID Equity", "TRADE", "2011-11-16 16:00:00.000", "2011-11-16 16:10:00.000")
                      time  type value  size
1  2011-11-16T16:00:06.000 TRADE 3.649   943
2  2011-11-16T16:00:06.000 TRADE 3.649  2450
3  2011-11-16T16:00:10.000 TRADE 3.649  1550
4  2011-11-16T16:00:10.000 TRADE 3.649  1086
5  2011-11-16T16:00:12.000 TRADE 3.649   500
6  2011-11-16T16:00:12.000 TRADE 3.649  1000
7  2011-11-16T16:00:29.000 TRADE 3.649   750
8  2011-11-16T16:01:09.000 TRADE 3.650 14395
9  2011-11-16T16:02:53.000 TRADE 3.651   236
10 2011-11-16T16:06:07.000 TRADE 3.651  1200
11 2011-11-16T16:06:45.000 TRADE 3.651   410

In your case, Bloomberg returned null data that was converted from Java into R as a 0 by 0 matrix, on which the column names "time", "type" "value" and "size" were tried to be updated, whereupon the tick() called failed.

Murali

-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Jacopo Anselmi
Sent: 16 November 2011 16:26
To: r-sig-finance at r-project.org
Subject: [R-SIG-Finance] RBloomberg update on "Error in dimnames(x) <- dn : 'dimnames' applied to non-array"

Dear RUsers,

I'm wondering if the error has been solved somehow. I'm running this
version of R, rJava and RBloomberg


R version 2.13.1 (2011-07-08)
rJava Version 0.9-1
RBloomberg Version 0.4-150
Bloomberg API Version 3.4.3.2

Exactly as Larry Shank, I'm running perfectly bpd, bds, bdh, it is not
working for tick or bar. Here is the result of the code that i'm
running:

> tick(conn, "RYA ID Equity", "TRADE", "2010-09-21 09:00:00.000", "2010-09-21 09:10:00.000")Error in dimnames(x) <- dn :
  length of 'dimnames' [2] not equal to array extent

> bar(conn, "RYA ID Equity", "TRADE", "2010-09-21 09:00:00.000", "2010-09-21 15:00:00.000", "60")Error in process.result(result, "first.column") : subscript out of bound


I've tried the workaround that Ana mentioned, but I was unable to find old
versions of rJava and RBloomberg.


Thanks everyone!

Jacopo

	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From rafleon at highstat.cl  Thu Nov 17 02:57:49 2011
From: rafleon at highstat.cl (rafleon at highstat.cl)
Date: Wed, 16 Nov 2011 20:57:49 -0500
Subject: [R-SIG-Finance] Granger's causality test
Message-ID: <e106279e2880c4c2c5b77a9af9feb8e0@highstat.cl>

Hi all,
I've got several time series as these below

tacc=c(106, 117, 125, 140, 150, 150, 135, 135, 102, 102, 112, 124, 128,
128)
value=c(1273, 1464, 1799, 1440,  963,  817,  794,  791,  638,  954, 1301,
2007, 1998, 2000)

#######
Additional information
tacc= Total Allowable Commercial Catch, In this case rock lobster in New
South Wales, Australia.
Value= The tacc is split into Individual Transferable Quotas (ITQs), which
can be leased or sold. In this case Value is the sale price]
The tacc is set every year and every stakeholder (commercial, recreational
fisher association, conservationists, aborigines, fisheries manager) can
suggest a figure for the tacc and the final decision is made by the
Minister.
I'm expecting that lower tacc cause higher value. Why? because lower tacc
produce stock rebuilding, increasing catch rates, which in turn reduces
fishing costs and improve future catches expectation and finally this
increase the quota prices.
######

I'm traying to find 'causality' between these variables. Well, I used the
function grangertest

library(lmtest)
grangertest(tacc ~ value, order = 1)
grangertest(value ~ tacc , order = 1)

Additionally, I found the below fucntion on internet that return different
results.
Please, could someone of you tell me which function is more reliable? And,
I don't understand the k parameter.
I would appreciate deeply any help.
Cheers,

Rafael



ts=cbind(value,tacc)
#Note that the results are different if ts=cbind(tacc,value)

"granger" <-function(d, L, k=1 )
{
#d is a bivariate time-series:  regress d[,k] on L lags of d[,1] and
d[,2].
#This is a modified version for R, in which the command ts.matrix was
substituted by ts.intersect.
names.d <- dimnames(d)[[2]]
D <- d
for(i in 1:L)
{
D <-ts.intersect(D, lag(d,  - i))
#don't you find -1 bizarre here and it annoying to need the loop
}
dimnames(D)[[2]] <- paste(rep(names.d, L + 1), "_", rep(0:L, times =
rep(2, L + 1)), sep = "")
y  <- D[, k]
n  <- length(y)
x1 <- D[,  - (1:2)]
x0 <- x1[, ((1:L) * 2) - (k %% 2)]
z1 <- lm(y ~ x1)
z0 <- lm(y ~ x0)
S1 <- sum(z1$resid^2)
S0 <- sum(z0$resid^2)
ftest <- ((S0 - S1)/L)/(S1/(n - 2 * L - 1))
list(ftest = ftest, p.val = 1 - pf(ftest, L, n - 2 * L - 1), R2 =
summary(z1)$r.squared)
}

granger(ts,L=1, k=2)


From varcovar at live.com  Thu Nov 17 08:29:49 2011
From: varcovar at live.com (varcovar)
Date: Wed, 16 Nov 2011 23:29:49 -0800 (PST)
Subject: [R-SIG-Finance] Redenominate function in FinancialInstrument
Message-ID: <1321514989726-4079196.post@n4.nabble.com>

Hi guys, 

The last row in redenominate() function in the FinancialInstrument package
is: 

buildRatio(c(symbol, rsym), env = tmpenv, silent = TRUE)/mult

Why does it divide by the multiplier? I'd rather multiply it to get the
notional amount of the contract expressed in the other currency. 

Let's say I'm trying to redenominate the NIY (Nikkei 225 Futures in JPY) in
USD: 

2004-03-10: USDJPY.Close = 110.8
2004-03-10: NIY.Close = 10365
Multiplier = 500

The new USD notional amount of the contract should be: 
NI.USD = (10365 / 110.8) * 500 = 46773.47 USD

Instead, using redenominate() I get: 
NI.USD = (10365 / 110.8) / 500 = 0.1870939 USD

So my suggestion is to replace "buildRatio(c(symbol, rsym), env = tmpenv,
silent = TRUE)/mult" by 
"buildRatio(c(symbol, rsym), env = tmpenv, silent = TRUE) * mult"

Am I right, or...? 

Thanks! 

Markus Douglas, Jr.




--
View this message in context: http://r.789695.n4.nabble.com/Redenominate-function-in-FinancialInstrument-tp4079196p4079196.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From matthieu.stigler at gmail.com  Thu Nov 17 12:17:15 2011
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Thu, 17 Nov 2011 12:17:15 +0100
Subject: [R-SIG-Finance] Granger's causality test
In-Reply-To: <e106279e2880c4c2c5b77a9af9feb8e0@highstat.cl>
References: <e106279e2880c4c2c5b77a9af9feb8e0@highstat.cl>
Message-ID: <4EC4ED3B.2080703@gmail.com>

Rafael

I don't know about the function found on the test, but you can rely on 
the function grangertest!

Note also you could use causality() from vars pkg, which gives exactly 
the same output:
library(vars)
v<-VAR(cbind(tacc, value))

causality(v, cause="value")$Granger
grangertest(tacc ~ value, order = 1)

Note that, although the F stat is the same, the df and p-values are not 
exactly the same: grangertest() is considered as a univariate 
regression, while causality() considers you have been estimating a full 
VAR. See Lutkephol (2006) p. 103 for a discussion on the choice of df. 
The advantage of the causality(9 function is that it allows to use HC 
covariance estimators for the test.

Hope this helps

Matthieu


Le 17/11/2011 02:57, rafleon at highstat.cl a ?crit :
> Hi all,
> I've got several time series as these below
>
> tacc=c(106, 117, 125, 140, 150, 150, 135, 135, 102, 102, 112, 124, 128,
> 128)
> value=c(1273, 1464, 1799, 1440,  963,  817,  794,  791,  638,  954, 1301,
> 2007, 1998, 2000)
>
> #######
> Additional information
> tacc= Total Allowable Commercial Catch, In this case rock lobster in New
> South Wales, Australia.
> Value= The tacc is split into Individual Transferable Quotas (ITQs), which
> can be leased or sold. In this case Value is the sale price]
> The tacc is set every year and every stakeholder (commercial, recreational
> fisher association, conservationists, aborigines, fisheries manager) can
> suggest a figure for the tacc and the final decision is made by the
> Minister.
> I'm expecting that lower tacc cause higher value. Why? because lower tacc
> produce stock rebuilding, increasing catch rates, which in turn reduces
> fishing costs and improve future catches expectation and finally this
> increase the quota prices.
> ######
>
> I'm traying to find 'causality' between these variables. Well, I used the
> function grangertest
>
> library(lmtest)
> grangertest(tacc ~ value, order = 1)
> grangertest(value ~ tacc , order = 1)
>
> Additionally, I found the below fucntion on internet that return different
> results.
> Please, could someone of you tell me which function is more reliable? And,
> I don't understand the k parameter.
> I would appreciate deeply any help.
> Cheers,
>
> Rafael
>
>
>
> ts=cbind(value,tacc)
> #Note that the results are different if ts=cbind(tacc,value)
>
> "granger"<-function(d, L, k=1 )
> {
> #d is a bivariate time-series:  regress d[,k] on L lags of d[,1] and
> d[,2].
> #This is a modified version for R, in which the command ts.matrix was
> substituted by ts.intersect.
> names.d<- dimnames(d)[[2]]
> D<- d
> for(i in 1:L)
> {
> D<-ts.intersect(D, lag(d,  - i))
> #don't you find -1 bizarre here and it annoying to need the loop
> }
> dimnames(D)[[2]]<- paste(rep(names.d, L + 1), "_", rep(0:L, times =
> rep(2, L + 1)), sep = "")
> y<- D[, k]
> n<- length(y)
> x1<- D[,  - (1:2)]
> x0<- x1[, ((1:L) * 2) - (k %% 2)]
> z1<- lm(y ~ x1)
> z0<- lm(y ~ x0)
> S1<- sum(z1$resid^2)
> S0<- sum(z0$resid^2)
> ftest<- ((S0 - S1)/L)/(S1/(n - 2 * L - 1))
> list(ftest = ftest, p.val = 1 - pf(ftest, L, n - 2 * L - 1), R2 =
> summary(z1)$r.squared)
> }
>
> granger(ts,L=1, k=2)
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From vramaiah at neo.tamu.edu  Thu Nov 17 23:55:08 2011
From: vramaiah at neo.tamu.edu (vramaiah at neo.tamu.edu)
Date: Thu, 17 Nov 2011 16:55:08 -0600 (CST)
Subject: [R-SIG-Finance] Help with VECM
Message-ID: <134081230.1902301321570508612.JavaMail.root@neo-mail-3>

Hi 
I am new R user and I am working on a VECM problem.
I am following R Code 8-13 & 8-14 from "Analysis of Integrated & Cointegrated Time Series with R" by Bernhard Pfaff and repeatedly running into this problem, 
"> svec<-SVEC(vecm,LR=LR,SR=SR,r=1,lrtest=FALSE,boot=TRUE,runs=100): Error in solve.default(infgamma) :   system is computationally singular: reciprocal condition number = 1.02342e-018"
I followed the example given in the book for "Canada" with the only difference is specifying the triangular matrix.I hope you can point out the mistake I am making.
Ram Ramaiah 
For the background info; here are the output for 8-13 and partial 8-14 (upto the error message)> us=read.table("USData.4.txt",header=T)
> vecm<-ca.jo(us[,c("Y","C")],type="trace",ecdet="trend",K=3,spec="transitory")
> vecm.r1<-cajorls(vecm,r=1)
> alpha<-coef(vecm.r1$rlm)[1,]
> beta<-vecm.r1$beta
> vecm.r1
$rlm
Call:
lm(formula = substitute(form1), data = data.mat)
Coefficients:
          Y.d       C.d     
ect1      -0.11653  -0.01562
constant   0.06338   0.01019
Y.dl1      0.14179   0.14814
C.dl1      0.27211  -0.07662
Y.dl2      0.03149  -0.07692
C.dl2      0.18011   0.27390
$beta
                  ect1
Y.l1      1.000000e+00
C.l1     -9.217918e-01
trend.l1  5.260375e-05
> alpha
        Y.d         C.d 
-0.11652600 -0.01561989 
> resids<-resid(vecm.r1$rlm)
> N<-nrow(resids)
> sigma<-crossprod(resids)/N
> sigma
             Y.d          C.d
Y.d 1.453332e-05 7.791666e-06
C.d 7.791666e-06 1.214965e-05
> alpha.se<-sqrt(solve(crossprod(cbind(vecm at ZK%*%beta,vecm at Z1)))[1,1]*diag(sigma))
> alpha.t<-alpha/alpha.se
> beta.se<-sqrt(diag(kronecker(solve(crossprod(vecm at RK[,-1])),solve(t(alpha)%*%solve(sigma)%*%alpha))))
> beta.t<-c(NA,beta[-1]/beta.se)
> alpha.se

       Y.d        C.d 
0.02906554 0.02657529 
> alpha.t
      Y.d       C.d 
-4.009078 -0.587760 
> beta.se
[1] 0.1414234204 0.0003404039
> beta.t
[1]         NA -6.5179575  0.1545333
> SR<-matrix(NA,nrow=2,ncol=2)
> SR[1,2]<-0
> SR
     [,1] [,2]
[1,]   NA    0
[2,]   NA   NA
> LR<-matrix(NA,nrow=2,ncol=2)
> LR[1,2]<-0
> LR
     [,1] [,2]
[1,]   NA    0
[2,]   NA   NA> svec<-SVEC(vecm,LR=LR,SR=SR,r=1,lrtest=FALSE,boot=TRUE,runs=100)
Error in solve.default(infgamma) : 
  system is computationally singular: reciprocal condition number = 1.02342e-018


From djandrija at gmail.com  Fri Nov 18 10:02:13 2011
From: djandrija at gmail.com (andrija djurovic)
Date: Fri, 18 Nov 2011 10:02:13 +0100
Subject: [R-SIG-Finance] Monte Carlo simulation for VaR estimation
Message-ID: <CABcwgRRLF62bmjEyEpUr-dG4OwU6Fg2SO0daFd3wjCjoc9oV0g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111118/28decd95/attachment.pl>

From Bernhard_Pfaff at fra.invesco.com  Fri Nov 18 10:39:48 2011
From: Bernhard_Pfaff at fra.invesco.com (Pfaff, Bernhard Dr.)
Date: Fri, 18 Nov 2011 09:39:48 +0000
Subject: [R-SIG-Finance] Help with VECM
In-Reply-To: <134081230.1902301321570508612.JavaMail.root@neo-mail-3>
References: <134081230.1902301321570508612.JavaMail.root@neo-mail-3>
Message-ID: <FCD9A33C859ACC469587CB09DD5C6C71216BC7@GBLONXMB11.corp.amvescap.net>

Hello Ram,

you have provided invalid matrix objects for SR and LR. See ?SVEC and the cited literature therein for pointers about how to set-up these restrictions properly. Hint and as a first fix to your problem: the LR matrix should contain one columne of zeros. 

Best,
Bernhard

-----Urspr?ngliche Nachricht-----
Von: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag von vramaiah at neo.tamu.edu
Gesendet: Donnerstag, 17. November 2011 23:55
An: r-sig-finance at r-project.org
Betreff: [R-SIG-Finance] Help with VECM

Hi
I am new R user and I am working on a VECM problem.
I am following R Code 8-13 & 8-14 from "Analysis of Integrated & Cointegrated Time Series with R" by Bernhard Pfaff and repeatedly running into this problem, 
"> svec<-SVEC(vecm,LR=LR,SR=SR,r=1,lrtest=FALSE,boot=TRUE,runs=100): Error in solve.default(infgamma) :   system is computationally singular: reciprocal condition number = 1.02342e-018"
I followed the example given in the book for "Canada" with the only difference is specifying the triangular matrix.I hope you can point out the mistake I am making.
Ram Ramaiah
For the background info; here are the output for 8-13 and partial 8-14 (upto the error message)> us=read.table("USData.4.txt",header=T)
> vecm<-ca.jo(us[,c("Y","C")],type="trace",ecdet="trend",K=3,spec="trans
> itory")
> vecm.r1<-cajorls(vecm,r=1)
> alpha<-coef(vecm.r1$rlm)[1,]
> beta<-vecm.r1$beta
> vecm.r1
$rlm
Call:
lm(formula = substitute(form1), data = data.mat)
Coefficients:
          Y.d       C.d     
ect1      -0.11653  -0.01562
constant   0.06338   0.01019
Y.dl1      0.14179   0.14814
C.dl1      0.27211  -0.07662
Y.dl2      0.03149  -0.07692
C.dl2      0.18011   0.27390
$beta
                  ect1
Y.l1      1.000000e+00
C.l1     -9.217918e-01
trend.l1  5.260375e-05
> alpha
        Y.d         C.d 
-0.11652600 -0.01561989 
> resids<-resid(vecm.r1$rlm)
> N<-nrow(resids)
> sigma<-crossprod(resids)/N
> sigma
             Y.d          C.d
Y.d 1.453332e-05 7.791666e-06
C.d 7.791666e-06 1.214965e-05
> alpha.se<-sqrt(solve(crossprod(cbind(vecm at ZK%*%beta,vecm at Z1)))[1,1]*di
> ag(sigma))
> alpha.t<-alpha/alpha.se
> beta.se<-sqrt(diag(kronecker(solve(crossprod(vecm at RK[,-1])),solve(t(al
> pha)%*%solve(sigma)%*%alpha))))
> beta.t<-c(NA,beta[-1]/beta.se)
> alpha.se

       Y.d        C.d 
0.02906554 0.02657529 
> alpha.t
      Y.d       C.d 
-4.009078 -0.587760 
> beta.se
[1] 0.1414234204 0.0003404039
> beta.t
[1]         NA -6.5179575  0.1545333
> SR<-matrix(NA,nrow=2,ncol=2)
> SR[1,2]<-0
> SR
     [,1] [,2]
[1,]   NA    0
[2,]   NA   NA
> LR<-matrix(NA,nrow=2,ncol=2)
> LR[1,2]<-0
> LR
     [,1] [,2]
[1,]   NA    0
[2,]   NA   NA> svec<-SVEC(vecm,LR=LR,SR=SR,r=1,lrtest=FALSE,boot=TRUE,runs=100)
Error in solve.default(infgamma) : 
  system is computationally singular: reciprocal condition number = 1.02342e-018

_______________________________________________
R-SIG-Finance at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.
*****************************************************************
Confidentiality Note: The information contained in this ...{{dropped:10}}


From David.Reiner at xrtrading.com  Fri Nov 18 15:51:44 2011
From: David.Reiner at xrtrading.com (David Reiner)
Date: Fri, 18 Nov 2011 08:51:44 -0600
Subject: [R-SIG-Finance] [SPAM] - Monte Carlo simulation for VaR
 estimation - Email found in subject
In-Reply-To: <CABcwgRRLF62bmjEyEpUr-dG4OwU6Fg2SO0daFd3wjCjoc9oV0g@mail.gmail.com>
References: <CABcwgRRLF62bmjEyEpUr-dG4OwU6Fg2SO0daFd3wjCjoc9oV0g@mail.gmail.com>
Message-ID: <9DE405308A6AA24AA794B76282C6C00F0DEA92C264@HQ-POST1>

I'm guessing that you would want to specify the correlation as given as you have the volatilities,
hence use a covariance matrix in MASS::mvrnorm to generate your 'sh'.
That shuld get you started anyway.
Rolling your own with use of Cholesky is OK, too, of course, but others have done lots of hard work do give you better results.

(
There are many other functions in various packages to generate multivariate normal samples if you look; e.g.,
> require(sos)
> ???"random multivariate normal "
found 532 matches;  retrieving 20 pages, 400 matches.
2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20
)

HTH,
-- David


-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of andrija djurovic
Sent: Friday, November 18, 2011 3:02 AM
To: r-sig-finance at r-project.org
Subject: [SPAM] - [R-SIG-Finance] Monte Carlo simulation for VaR estimation - Email found in subject

Dear users,
I need help in understanding steps of Monte Carlo simulation for VaR estimation. Here is the simplified example of what i was trying to do, but I suppose this is not appropriate way for performing MC simulation.

Suppose that our portfolio consist of x1 and x2 (with equal weights), which returns are given:

sh<-matrix(c(rnorm(100,0,0.01),rnorm(100,0,0.015)),ncol=2)
colnames(sh)<-c("x1","x2")
w<-matrix(c(0.5,0.5),ncol=1)

>From this I calculated portfolio returns, mean and variance:

pr<-sh%*%w
pmu<-mean(pr)
sigma<-cov(sh)
pvar<-t(w)%*%sigma%*%w

Now I was trying to generate 10 scenarios (keeping the correlation between
x1 and x2). Then calculate portfolio mean for each scenario and from that mean distribution  calculate 95% VaR. Here I am sure  these aren't good steps and I that I am missing something in part of keeping a correlation between x1 and x2:

l<-list("vector",10)
cd<-chol(cov2cor(sigma))
#generate 10 scenarios#
mu<-apply(sh,2,mean)
sd<-apply(sh,2,sd)
for (i in 1:10)
{
l[[i]]<-matrix(c(rnorm(10,mu[1],sd[1]),rnorm(10,mu[2],sd[2])),ncol=2)%*%cd
}

mc<-sapply(l,function(x) mean(x%*%w))

quantile(mc,p=0.05)


Thanks in advance and any help is really appreciated.

Andrija

        [[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


This e-mail and any materials attached hereto, including, without limitation, all content hereof and thereof (collectively, "XR Content") are confidential and proprietary to XR Trading, LLC ("XR") and/or its affiliates, and are protected by intellectual property laws.  Without the prior written consent of XR, the XR Content may not (i) be disclosed to any third party or (ii) be reproduced or otherwise used by anyone other than current employees of XR or its affiliates, on behalf of XR or its affiliates.

THE XR CONTENT IS PROVIDED AS IS, WITHOUT REPRESENTATIONS OR WARRANTIES OF ANY KIND.  TO THE MAXIMUM EXTENT PERMISSIBLE UNDER APPLICABLE LAW, XR HEREBY DISCLAIMS ANY AND ALL WARRANTIES, EXPRESS AND IMPLIED, RELATING TO THE XR CONTENT, AND NEITHER XR NOR ANY OF ITS AFFILIATES SHALL IN ANY EVENT BE LIABLE FOR ANY DAMAGES OF ANY NATURE WHATSOEVER, INCLUDING, BUT NOT LIMITED TO, DIRECT, INDIRECT, CONSEQUENTIAL, SPECIAL AND PUNITIVE DAMAGES, LOSS OF PROFITS AND TRADING LOSSES, RESULTING FROM ANY PERSON'S USE OR RELIANCE UPON, OR INABILITY TO USE, ANY XR CONTENT, EVEN IF XR IS ADVISED OF THE POSSIBILITY OF SUCH DAMAGES OR IF SUCH DAMAGES WERE FORESEEABLE.


From djandrija at gmail.com  Fri Nov 18 16:56:07 2011
From: djandrija at gmail.com (andrija djurovic)
Date: Fri, 18 Nov 2011 16:56:07 +0100
Subject: [R-SIG-Finance] [SPAM] - Monte Carlo simulation for VaR
 estimation - Email found in subject
In-Reply-To: <9DE405308A6AA24AA794B76282C6C00F0DEA92C264@HQ-POST1>
References: <CABcwgRRLF62bmjEyEpUr-dG4OwU6Fg2SO0daFd3wjCjoc9oV0g@mail.gmail.com>
	<9DE405308A6AA24AA794B76282C6C00F0DEA92C264@HQ-POST1>
Message-ID: <CABcwgRSaRS1XeuCMqcTOi+1ZzvbQHgLWxg3pQ-gCQ1cNn3qDKQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111118/38d41b8f/attachment.pl>

From klein82517 at yahoo.de  Fri Nov 18 19:43:05 2011
From: klein82517 at yahoo.de (Andreas Klein)
Date: Fri, 18 Nov 2011 18:43:05 +0000 (GMT)
Subject: [R-SIG-Finance] Block length for Bivariate Stationary Bootstrap for
	Inference for Correlation
In-Reply-To: <1321641087.88478.YahooMailNeo@web29608.mail.ird.yahoo.com>
References: <1321641087.88478.YahooMailNeo@web29608.mail.ird.yahoo.com>
Message-ID: <1321641785.3436.YahooMailNeo@web29615.mail.ird.yahoo.com>

Hello,


I am searching for a method, algorithm or some solution to the following problem:
I need an estimator for the block length of two series to bootstrap the correlation coefficient with the stationary bootstrap procedure. The problem here: the two series have different block lengths!


Here is an example:
x and y are positively correlated and I would like to construct 
percentile bootstrap confidence intervals for the correlation 
coefficient between x and y.

######The question marks highlight the problem#####

x <- c(2.62,2.56,0.36,-3.43,2.44,2.77,-0.11,4.32,0.32,0.41,5.39,-2.30,7.27,2.42,4.69,-4.44,6.66,2.15,-0.60,-1.77)
y <- c(10.40,13.56,2.11,-3.96,8.45,0.49,-2.48,14.09,3.45,7.15,-2.08,3.09,13.06,3.37,8.41,-6.63,6.01,7.94,-0.54,5.10)
xy <- cbind(x,y)

library(np)
lx <- b.star(x,round=TRUE)[1,1]
ly <- b.star(y,round=TRUE)[1,1]


lxy <- ???

library(tseries)
result <- tsbootstrap(x=1:nrow(xy),nb=1000,statistic=function(idx,data) cor(data[idx,1],data[idx,2]),m=1,b=lxy,type="stationary",data=xy)
######


lx is not equal to ly, so what is lxy or what can it be or how can I estimate it? Is there something similar like b.star() but for bivariate problems?
I can estimate the block length for x (lx) or for y (ly) with b.star() but not the joint block length (lxy) to consider on the one hand the autocorrelation of x and y and on the other hand preserve the correlation structure between the two series.

Does anyone know a solution regarding the stationary bootstrap (no VAR-sieve bootstrap approach)? An exisitng algorithm like b.star() which considers the cross-correlation between the two variables?


I hope you can help me. Thanks a lot...

Regards,
Andy.


From vramaiah at neo.tamu.edu  Fri Nov 18 21:46:36 2011
From: vramaiah at neo.tamu.edu (vramaiah at neo.tamu.edu)
Date: Fri, 18 Nov 2011 14:46:36 -0600 (CST)
Subject: [R-SIG-Finance] VECM
In-Reply-To: <403908839.31091321649073585.JavaMail.root@neo-mail-3>
Message-ID: <1718893257.31631321649196018.JavaMail.root@neo-mail-3>

Hello Prof Pfaff
Thank you for your help.  I ran with many combinations of SR and LR with only exception is NA in both [1,1] positions.  It is a bivariate, so it is 2X2 matrix.  No reprive; the same error.
Then I tried to mimic Code 8-11 and Table 8-14 of Analysis of Int & Coint TS with R for my data.  Interestingly, Serial Test both asymptotic and adjusted looked fine, but JB Test and arch test had zero p-value.  I ran normality test again with P=1,2,3,4,5 for my data and got p-value for Residuals of VAR and Kurtosis around 2 times e(-16).  Skewness had highest value of 0.015 for P=4 and 0.001 for P=3 but of the order of e-10 for P=1 and 2.  Does that mean my distribution of error term is not normal?  If so what can I do about the input data?  
My data are quarterly US GDP and Consumption expressed as log per capital for a period of 1949-2009 and ranges from 4.2661 to 4.8116 for GDP and 4.0714-4.6601 for consumption with steady upward trend except for last 4 quarters.  
Do I need any "de=trending" adjustments to the data?
I hope you can provide me some guidance in this area.
Thank you in advance
Ram Ramaiah

----- Original Message -----
From: "Bernhard Dr. Pfaff" <Bernhard_Pfaff at fra.invesco.com>
To: vramaiah at neo.tamu.edu, r-sig-finance at r-project.org
Sent: Friday, November 18, 2011 3:39:48 AM GMT -06:00 US/Canada Central
Subject: AW: [R-SIG-Finance] Help with VECM

Hello Ram,

you have provided invalid matrix objects for SR and LR. See ?SVEC and the cited literature therein for pointers about how to set-up these restrictions properly. Hint and as a first fix to your problem: the LR matrix should contain one columne of zeros. 

Best,
Bernhard

-----Urspr?ngliche Nachricht-----
Von: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag von vramaiah at neo.tamu.edu
Gesendet: Donnerstag, 17. November 2011 23:55
An: r-sig-finance at r-project.org
Betreff: [R-SIG-Finance] Help with VECM

Hi
I am new R user and I am working on a VECM problem.
I am following R Code 8-13 & 8-14 from "Analysis of Integrated & Cointegrated Time Series with R" by Bernhard Pfaff and repeatedly running into this problem, 
"> svec<-SVEC(vecm,LR=LR,SR=SR,r=1,lrtest=FALSE,boot=TRUE,runs=100): Error in solve.default(infgamma) :   system is computationally singular: reciprocal condition number = 1.02342e-018"
I followed the example given in the book for "Canada" with the only difference is specifying the triangular matrix.I hope you can point out the mistake I am making.
Ram Ramaiah
For the background info; here are the output for 8-13 and partial 8-14 (upto the error message)> us=read.table("USData.4.txt",header=T)
> vecm<-ca.jo(us[,c("Y","C")],type="trace",ecdet="trend",K=3,spec="trans
> itory")
> vecm.r1<-cajorls(vecm,r=1)
> alpha<-coef(vecm.r1$rlm)[1,]
> beta<-vecm.r1$beta
> vecm.r1
$rlm
Call:
lm(formula = substitute(form1), data = data.mat)
Coefficients:
          Y.d       C.d     
ect1      -0.11653  -0.01562
constant   0.06338   0.01019
Y.dl1      0.14179   0.14814
C.dl1      0.27211  -0.07662
Y.dl2      0.03149  -0.07692
C.dl2      0.18011   0.27390
$beta
                  ect1
Y.l1      1.000000e+00
C.l1     -9.217918e-01
trend.l1  5.260375e-05
> alpha
        Y.d         C.d 
-0.11652600 -0.01561989 
> resids<-resid(vecm.r1$rlm)
> N<-nrow(resids)
> sigma<-crossprod(resids)/N
> sigma
             Y.d          C.d
Y.d 1.453332e-05 7.791666e-06
C.d 7.791666e-06 1.214965e-05
> alpha.se<-sqrt(solve(crossprod(cbind(vecm at ZK%*%beta,vecm at Z1)))[1,1]*di
> ag(sigma))
> alpha.t<-alpha/alpha.se
> beta.se<-sqrt(diag(kronecker(solve(crossprod(vecm at RK[,-1])),solve(t(al
> pha)%*%solve(sigma)%*%alpha))))
> beta.t<-c(NA,beta[-1]/beta.se)
> alpha.se

       Y.d        C.d 
0.02906554 0.02657529 
> alpha.t
      Y.d       C.d 
-4.009078 -0.587760 
> beta.se
[1] 0.1414234204 0.0003404039
> beta.t
[1]         NA -6.5179575  0.1545333
> SR<-matrix(NA,nrow=2,ncol=2)
> SR[1,2]<-0
> SR
     [,1] [,2]
[1,]   NA    0
[2,]   NA   NA
> LR<-matrix(NA,nrow=2,ncol=2)
> LR[1,2]<-0
> LR
     [,1] [,2]
[1,]   NA    0
[2,]   NA   NA> svec<-SVEC(vecm,LR=LR,SR=SR,r=1,lrtest=FALSE,boot=TRUE,runs=100)
Error in solve.default(infgamma) : 
  system is computationally singular: reciprocal condition number = 1.02342e-018

_______________________________________________
R-SIG-Finance at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.
*****************************************************************
Confidentiality Note: The information contained in this ...{{dropped:9}}


From arun.kumar.saha at gmail.com  Mon Nov 21 09:39:58 2011
From: arun.kumar.saha at gmail.com (Arun.stat)
Date: Mon, 21 Nov 2011 00:39:58 -0800 (PST)
Subject: [R-SIG-Finance] [SPAM] - Monte Carlo simulation for VaR
 estimation - Email found in subject
In-Reply-To: <CABcwgRSaRS1XeuCMqcTOi+1ZzvbQHgLWxg3pQ-gCQ1cNn3qDKQ@mail.gmail.com>
References: <CABcwgRRLF62bmjEyEpUr-dG4OwU6Fg2SO0daFd3wjCjoc9oV0g@mail.gmail.com>
	<9DE405308A6AA24AA794B76282C6C00F0DEA92C264@HQ-POST1>
	<CABcwgRSaRS1XeuCMqcTOi+1ZzvbQHgLWxg3pQ-gCQ1cNn3qDKQ@mail.gmail.com>
Message-ID: <1321864798874-4090907.post@n4.nabble.com>

Hi Andrija, I am not sure why you need to replicate 10 times. Instead you
should want to replicate once with, say, 1000 simulation and then get the
5th percentile of the portfolio return distribution. Here you go:

l<-list("vector",1) 
mu<-apply(sh,2,mean) 
sigma<-cov(sh) 
#generate 1 replication
l<-list("vector",1) 
for (i in 1:1) 
{ 
l[[i]]<-rmnorm(1000,mu,sigma) # this will generate 1000 possible asset
returns based on the same statistical characteristic as in 'sh'
							  # I assume, 'sh' is your historical asset return
} 

l <- l[[1]]
pr_simulated <- apply(l, 1, function(x) return(sum(x * c(0.5, 0.5)))) #
simulated portfolio return
quantile(pr_simulated, 0.05, type = 3) # your Portfolio VaR (95%)

PS: I used rmnorm() function for drawing random number from a multivariate
normal, which is from 'mnormt' package.

HTH,

Thanks and regards,
_____________________________________________________

Arun Kumar Saha, FRM
QUANTITATIVE RISK AND HEDGE CONSULTING SPECIALIST
Visit me at: http://in.linkedin.com/in/ArunFRM
_____________________________________________________


--
View this message in context: http://r.789695.n4.nabble.com/Monte-Carlo-simulation-for-VaR-estimation-tp4082611p4090907.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From arun.kumar.saha at gmail.com  Mon Nov 21 10:17:01 2011
From: arun.kumar.saha at gmail.com (Arun.stat)
Date: Mon, 21 Nov 2011 01:17:01 -0800 (PST)
Subject: [R-SIG-Finance] risk-free rate in option pricing
In-Reply-To: <63477C0A-161F-42A1-8745-6B665807407B@gmail.com>
References: <63477C0A-161F-42A1-8745-6B665807407B@gmail.com>
Message-ID: <1321867021753-4090984.post@n4.nabble.com>

Dear Xian, as per the Hull's book you should consider a T-Bill with same
maturity as the underlying option contract (as you also said correctly.)
However just make sure that, that rate is expressed in continuous
compounding.

I can also remember that this topic was previously discussed in details here
(just make a search.)

HTH,

Thanks and regards,

_____________________________________________________

Arun Kumar Saha, FRM
QUANTITATIVE RISK AND HEDGE CONSULTING SPECIALIST
Visit me at: http://in.linkedin.com/in/ArunFRM
_____________________________________________________


--
View this message in context: http://r.789695.n4.nabble.com/risk-free-rate-in-option-pricing-tp4076900p4090984.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From djandrija at gmail.com  Mon Nov 21 10:47:44 2011
From: djandrija at gmail.com (andrija djurovic)
Date: Mon, 21 Nov 2011 10:47:44 +0100
Subject: [R-SIG-Finance] [SPAM] - Monte Carlo simulation for VaR
 estimation - Email found in subject
In-Reply-To: <1321864798874-4090907.post@n4.nabble.com>
References: <CABcwgRRLF62bmjEyEpUr-dG4OwU6Fg2SO0daFd3wjCjoc9oV0g@mail.gmail.com>
	<9DE405308A6AA24AA794B76282C6C00F0DEA92C264@HQ-POST1>
	<CABcwgRSaRS1XeuCMqcTOi+1ZzvbQHgLWxg3pQ-gCQ1cNn3qDKQ@mail.gmail.com>
	<1321864798874-4090907.post@n4.nabble.com>
Message-ID: <CABcwgRQnNuSpY81MjzRsw-jmOAisTLjnZxV0W1qoSnCgZzSWtg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111121/7eb78b04/attachment.pl>

From rhelpacc at gmail.com  Tue Nov 22 04:52:59 2011
From: rhelpacc at gmail.com (Robert A'gata)
Date: Mon, 21 Nov 2011 22:52:59 -0500
Subject: [R-SIG-Finance] repeating regression
Message-ID: <CAA7=MyUbT_Ajh-1tsXY3HScPNTTpXYubqH7Qc35m5qr25JRxsw@mail.gmail.com>

Hi,

I think my problem is a bit mundane but it's quite intriguing. Imagine
I have a matrix of 10 by 2 million. The first 5 columns are x and the
last 5 are y values. I have to regress y on x (assume 0 intercept) for
each row to observe time series of the slope. I am wondering if there
is any way to speed this calculation up? I tried with apply. But it is
still slow. Is there any trick I should know? Thank you.

Robert


From michael.weylandt at gmail.com  Tue Nov 22 06:23:11 2011
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Tue, 22 Nov 2011 00:23:11 -0500
Subject: [R-SIG-Finance] repeating regression
In-Reply-To: <CAA7=MyUbT_Ajh-1tsXY3HScPNTTpXYubqH7Qc35m5qr25JRxsw@mail.gmail.com>
References: <CAA7=MyUbT_Ajh-1tsXY3HScPNTTpXYubqH7Qc35m5qr25JRxsw@mail.gmail.com>
Message-ID: <CAAmySGOp76YkXFgrVVeSSQnvnPVpPZPAmwvWqa8CeEEFz7C-zA@mail.gmail.com>

You can probably specify the problem with model.matrix and use lm.fit
directly, but what's probably even better is to remember that the
slope can be calculated as correlation * std_y / std_x for this simple
case of one independent variable and implement directly . E.g.,
something like

apply(Data, 1, function(x) std(x[6:10])/std(x[1:5]) * cor(x[1:5],x[6:10]))

You can do this even faster by taking x and y to big vectors, taking a
rolling std and cor with length 5, and sampling each 5 steps as well,
but it's after midnight and I'm doing a disastrous OJ project (don't
ask....) for school so I can't really think right now.

Michael

On Mon, Nov 21, 2011 at 10:52 PM, Robert A'gata <rhelpacc at gmail.com> wrote:
> Hi,
>
> I think my problem is a bit mundane but it's quite intriguing. Imagine
> I have a matrix of 10 by 2 million. The first 5 columns are x and the
> last 5 are y values. I have to regress y on x (assume 0 intercept) for
> each row to observe time series of the slope. I am wondering if there
> is any way to speed this calculation up? I tried with apply. But it is
> still slow. Is there any trick I should know? Thank you.
>
> Robert
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jbreit at nexgo.de  Tue Nov 22 14:49:32 2011
From: jbreit at nexgo.de (Joachim Breit)
Date: Tue, 22 Nov 2011 14:49:32 +0100
Subject: [R-SIG-Finance] Option valuation for arbitrary distribution using
	monte carlo simulation
Message-ID: <4ECBA86C.4030604@nexgo.de>

Dear list,

(forgive me if this is a question already answered a hundred times here 
- I was unable to find the threads)

I want to derive option prices (let's say european style for a start) 
for a given sample of historical return data (let's say the last 50 DAX 
returns) using monte carlo simulation. It is clear that the return data 
has to be transformed into "risk neutral" data first. I thought I could 
find a procedure for this task (data transformation and simulation) in R 
because it should be a standard approach for assessing market option 
prices. But I could not find anything.

Can somebody help?

Joachim


From massimo.salese at gmail.com  Tue Nov 22 16:30:33 2011
From: massimo.salese at gmail.com (msalese)
Date: Tue, 22 Nov 2011 07:30:33 -0800 (PST)
Subject: [R-SIG-Finance] Option valuation for arbitrary distribution
 using monte carlo simulation
In-Reply-To: <4ECBA86C.4030604@nexgo.de>
References: <4ECBA86C.4030604@nexgo.de>
Message-ID: <1321975833682-4096122.post@n4.nabble.com>

Hi Joachim , I'm not a prof but I recommend you the following book: 
Option Pricing and Estimation of Financial Models with R
Stafano M. Iacus
http://www.amazon.com/Option-Pricing-Estimation-Financial-Models/dp/0470745843/ref=sr_1_48?ie=UTF8&qid=1321974343&sr=8-48

it'll explain a lot of thinks with code samples.
Some very base simple code, I started with this one and while was reading
the book I started to improve it 

#define functions
require(package='fBasics',quietly=FALSE)

#This function to create innovation
#We keep innovation function autside of process because 
#once computed leave it stored for next usage
innovation.norm<-function(pTrials=5000){
  # remember to add the seed
  #generate standard normal innovation
  z <- rnorm(n=pTrials,mean=0,sd=1)
  #genereta anthitetic innovation
  ant.z <--z
  #combine in the new one:
  z <- c(z,ant.z)
  #return innovation vector
  return(z)
}

#this function to create the price distribution
st.proc.norm<-function(pInnVect=z,mu=0,pSnow=15,pVol=0.15,pTradDaysToExp=20){
  #set the number of trading days in one year
  yearTradDays<-252
  #compute the interval time 
  dt<-pTradDaysToExp/yearTradDays
  s.final <- rep(0,length(pInnVect))
  s.final<-pSnow*exp(pVol*sqrt(dt)*pInnVect)
  out<-c(s.final,pSnow)
  return(s.final)
}

#this function to build the option chain
price.chain<-function(pSFinal,pIntRate=0.02,pStrikeMin=10,pStrikeMax=15,pDStrike=0.5,pCalDaysToExp=30){
  #build strike chain
  K<-seq(from=pStrikeMin,to=pStrikeMax,by=pDStrike)
  #compute dicount factor
  calDays<-365
  dt<-pCalDaysToExp/calDays
  #prepare storage for chain
  prCall<-rep(x=0,length(K))
  prPut<-rep(x=0,length(K))
  se.call<-rep(x=0,length(K))
  se.put<-rep(x=0,length(K))
  
  for (i in (1:length(K))){
    #print(i)
    #print(K[i])
    #formula for pricing
    c<- ifelse(pSFinal>K[i],exp(-pIntRate*dt)*(pSFinal-K[i]), 0)
    p<- ifelse(pSFinal<K[i],exp(-pIntRate*dt)*(K[i]-pSFinal), 0)
    #price as average
    prCall[i]<-mean(c)
    prPut[i]<-mean(p)
    #standard error
    se.call[i]<-sd(c)/sqrt(length(pSFinal))
    se.put[i]<-sd(p)/sqrt(length(pSFinal))
    
    ## make a confidence interval estimate
    alpha<-0.05
    t.star<-qt(p=(1-alpha/2),df=length(pSFinal)-1,lower.tail=TRUE)
    prCall[i]+c(-1,1)*t.star*se.call[i]
    prPut[i]+c(-1,1)*t.star*se.put[i]
  }
  
  #build the data frame for option's chain
 
pr.chain<-data.frame(CALL=round(prCall,digits=3),Strike=K,PUT=round(prPut,digits=3))
  
  return(pr.chain)
}


##################################################################################
##  PRICING WITH NORMAL
inn.n<-innovation.norm(pTrials=500)
hist(inn.n)
#you must estimate volatility from past data
s.final.n<-st.proc.norm(pInnVect=inn.n,pSnow=13.40,pVol=0.25,pTradDaysToExp=20)
hist(s.final.n)
#you must estimate interest rate
price.chain(pSFinal=s.final.n,pIntRate=0.02,pStrikeMin=10,pStrikeMax=15,pDStrike=0.5,pCalDaysToExp=20)




--
View this message in context: http://r.789695.n4.nabble.com/Option-valuation-for-arbitrary-distribution-using-monte-carlo-simulation-tp4095718p4096122.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From gsee000 at gmail.com  Tue Nov 22 16:34:28 2011
From: gsee000 at gmail.com (G See)
Date: Tue, 22 Nov 2011 09:34:28 -0600
Subject: [R-SIG-Finance] repeating regression
In-Reply-To: <CAA7=MyUbT_Ajh-1tsXY3HScPNTTpXYubqH7Qc35m5qr25JRxsw@mail.gmail.com>
References: <CAA7=MyUbT_Ajh-1tsXY3HScPNTTpXYubqH7Qc35m5qr25JRxsw@mail.gmail.com>
Message-ID: <CA+xi=qaR8qCGTuzVmbvwo9OtFLwLKs20+jguWXEOJxbdmJhcHw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111122/b4e4b922/attachment.pl>

From paulring at microsoft.com  Tue Nov 22 20:53:11 2011
From: paulring at microsoft.com (Paul Ringseth)
Date: Tue, 22 Nov 2011 19:53:11 +0000
Subject: [R-SIG-Finance] Option valuation for arbitrary distribution
 using monte carlo simulation
In-Reply-To: <1321975833682-4096122.post@n4.nabble.com>
References: <4ECBA86C.4030604@nexgo.de>,
	<1321975833682-4096122.post@n4.nabble.com>
Message-ID: <A682FFE47602644E9D3DEECDD6F832978363FD@SN2PRD0302MB136.namprd03.prod.outlook.com>

Hi:
    I think this could work.  

    Now, I always find it useful to identify the hard parts up front.  Let's see if I can sketch this in a couple minutes.

1)  You need to estimate variance (vol^2) from the historical prices.  Now 50 days closing prices is a little low and when close to expiration you'd want some intraday data too.  But the model is a little crude anyhow, so perhaps it doesn't matter.  So assume the stock price St follows a log-normal process:  dlog(St) = (r - vol^2/2) dt + vol dBt and take first differences of log(St) for the returns process Rt ~ log(St/S(t-1)).  Rt is normally distributed so vol^2 ~ Sum{(Rt - R(t-1))^2}/48 - (1/49 Sum{Rt})^2}.  
2)  You need the risk-free rate, so set r=treasusry-rate for the same maturity as the stock option time-to-expiration -- this is in calendar days.
3)  Let t = today and T=expiration. 
    The sample paths of the stock price can be assumed to follow: Ss -> exp{r s + vol N(0, 1) sqrt(s)}  // N(0,1) =normal distribution.  
                 Let c_(ns) = exp{-r (T-t)} max{ exp{r (T-t) + vol ns sqrt(T-t)} - X, 0} -- where ns is a random sample from N(0,1).
                 european call(X,S,r,vol,T) = { c_(ns1) + c_(ns2) + ... + c_(ns(num_samples)) } / num_samples.
   
My math could be off a little (e.g. maybe a ito factor), but at least for me, it really helps to get some brief clean calculations up front, and then code.;-)


________________________________________
From: r-sig-finance-bounces at r-project.org [r-sig-finance-bounces at r-project.org] on behalf of msalese [massimo.salese at gmail.com]
Sent: Tuesday, November 22, 2011 7:30 AM
To: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Option valuation for arbitrary distribution using monte carlo simulation

Hi Joachim , I'm not a prof but I recommend you the following book:
Option Pricing and Estimation of Financial Models with R
Stafano M. Iacus
http://www.amazon.com/Option-Pricing-Estimation-Financial-Models/dp/0470745843/ref=sr_1_48?ie=UTF8&qid=1321974343&sr=8-48

it'll explain a lot of thinks with code samples.
Some very base simple code, I started with this one and while was reading
the book I started to improve it

#define functions
require(package='fBasics',quietly=FALSE)

#This function to create innovation
#We keep innovation function autside of process because
#once computed leave it stored for next usage
innovation.norm<-function(pTrials=5000){
  # remember to add the seed
  #generate standard normal innovation
  z <- rnorm(n=pTrials,mean=0,sd=1)
  #genereta anthitetic innovation
  ant.z <--z
  #combine in the new one:
  z <- c(z,ant.z)
  #return innovation vector
  return(z)
}

#this function to create the price distribution
st.proc.norm<-function(pInnVect=z,mu=0,pSnow=15,pVol=0.15,pTradDaysToExp=20){
  #set the number of trading days in one year
  yearTradDays<-252
  #compute the interval time
  dt<-pTradDaysToExp/yearTradDays
  s.final <- rep(0,length(pInnVect))
  s.final<-pSnow*exp(pVol*sqrt(dt)*pInnVect)
  out<-c(s.final,pSnow)
  return(s.final)
}

#this function to build the option chain
price.chain<-function(pSFinal,pIntRate=0.02,pStrikeMin=10,pStrikeMax=15,pDStrike=0.5,pCalDaysToExp=30){
  #build strike chain
  K<-seq(from=pStrikeMin,to=pStrikeMax,by=pDStrike)
  #compute dicount factor
  calDays<-365
  dt<-pCalDaysToExp/calDays
  #prepare storage for chain
  prCall<-rep(x=0,length(K))
  prPut<-rep(x=0,length(K))
  se.call<-rep(x=0,length(K))
  se.put<-rep(x=0,length(K))

  for (i in (1:length(K))){
    #print(i)
    #print(K[i])
    #formula for pricing
    c<- ifelse(pSFinal>K[i],exp(-pIntRate*dt)*(pSFinal-K[i]), 0)
    p<- ifelse(pSFinal<K[i],exp(-pIntRate*dt)*(K[i]-pSFinal), 0)
    #price as average
    prCall[i]<-mean(c)
    prPut[i]<-mean(p)
    #standard error
    se.call[i]<-sd(c)/sqrt(length(pSFinal))
    se.put[i]<-sd(p)/sqrt(length(pSFinal))

    ## make a confidence interval estimate
    alpha<-0.05
    t.star<-qt(p=(1-alpha/2),df=length(pSFinal)-1,lower.tail=TRUE)
    prCall[i]+c(-1,1)*t.star*se.call[i]
    prPut[i]+c(-1,1)*t.star*se.put[i]
  }

  #build the data frame for option's chain

pr.chain<-data.frame(CALL=round(prCall,digits=3),Strike=K,PUT=round(prPut,digits=3))

  return(pr.chain)
}


##################################################################################
##  PRICING WITH NORMAL
inn.n<-innovation.norm(pTrials=500)
hist(inn.n)
#you must estimate volatility from past data
s.final.n<-st.proc.norm(pInnVect=inn.n,pSnow=13.40,pVol=0.25,pTradDaysToExp=20)
hist(s.final.n)
#you must estimate interest rate
price.chain(pSFinal=s.final.n,pIntRate=0.02,pStrikeMin=10,pStrikeMax=15,pDStrike=0.5,pCalDaysToExp=20)




--
View this message in context: http://r.789695.n4.nabble.com/Option-valuation-for-arbitrary-distribution-using-monte-carlo-simulation-tp4095718p4096122.html
Sent from the Rmetrics mailing list archive at Nabble.com.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

From mane.desk at googlemail.com  Tue Nov 22 21:50:39 2011
From: mane.desk at googlemail.com (Immanuel)
Date: Tue, 22 Nov 2011 21:50:39 +0100
Subject: [R-SIG-Finance] Using Grammatical Evolution to generate trading
	rules
In-Reply-To: <CA+xi=qaR8qCGTuzVmbvwo9OtFLwLKs20+jguWXEOJxbdmJhcHw@mail.gmail.com>
References: <CAA7=MyUbT_Ajh-1tsXY3HScPNTTpXYubqH7Qc35m5qr25JRxsw@mail.gmail.com>
	<CA+xi=qaR8qCGTuzVmbvwo9OtFLwLKs20+jguWXEOJxbdmJhcHw@mail.gmail.com>
Message-ID: <4ECC0B1F.3010107@gmail.com>

Hallo all,

I recently read the book "biologically inspired algorithms for financial
modeling" and got hooked
by the idea to use Grammatical Evolution to generate trading rules (
examples are presented in the book ).

I decided to use GEVA (http://ncra.ucd.ie/Site/GEVA.html) as grammatical
evolution engine, and to evaluate the
generated trading rules in R. I somehow managed to hack together a proof
of concept. A quick and dirty overview
can be fount at: http://www.slideshare.net/my_slides_/overview-10277187

I'm now playing with the idea to put some more effort in a better setup.
With the goal to make the generation and testing
of serious trading rules feasible.

Any suggestions on how to approach this? Anyone interested in
collaborating on this project?

best regards,
Immanuel


From 22maupassant22 at gmail.com  Wed Nov 23 01:56:38 2011
From: 22maupassant22 at gmail.com (M R)
Date: Tue, 22 Nov 2011 18:56:38 -0600
Subject: [R-SIG-Finance] getting bar data with Ibrokers
Message-ID: <CALwY4oDH9D1+oh38z-m1mXREHbseUM6fNmab6sDLP6QchZKLPg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111122/22869e3f/attachment.pl>

From richard.c.herron at gmail.com  Wed Nov 23 05:08:10 2011
From: richard.c.herron at gmail.com (Richard Herron)
Date: Tue, 22 Nov 2011 23:08:10 -0500
Subject: [R-SIG-Finance] repeating regression
In-Reply-To: <CA+xi=qaR8qCGTuzVmbvwo9OtFLwLKs20+jguWXEOJxbdmJhcHw@mail.gmail.com>
References: <CAA7=MyUbT_Ajh-1tsXY3HScPNTTpXYubqH7Qc35m5qr25JRxsw@mail.gmail.com>
	<CA+xi=qaR8qCGTuzVmbvwo9OtFLwLKs20+jguWXEOJxbdmJhcHw@mail.gmail.com>
Message-ID: <CAL9ybL-N9y0ap6FnW72DxdG5EaLZd56Y+yMTLTD8sDe84xgroA@mail.gmail.com>

The beta = cov(x, y) / var(x) proposed assumes an intercept, but it
sounds like you want to run the regression through the origin, which
is beta = summation x*y / summation x*x. Also, the summation gets you
quite a speed boost. Below is some code.

Although I imagine that with only five observations you won't be able
to statistically differentiate between the betas. I suggest rolling
regressions using differenced cumulative sums to create the cov(x, y)
and var(x) terms. HTH.

mat_x <- matrix(5 + rnorm(5*2e4), ncol = 5)
mat_epsilon <- matrix(rnorm(5*2e4, mean = 0, sd = 0.1), ncol = 5)
mat_y <- 5 + 5*mat_x + mat_epsilon
mat_xy <- cbind(mat_x, mat_y)

# doing the regression with cov/var assumes an intercept
fun_beta_cov <- function(x) {
    cov(x[1:5], x[6:10]) / var(x[1:5])
}
system.time({
    beta_1 <- apply(mat_xy, 1, FUN = fun_beta_cov)
})

# doing the regression with summations
system.time({
    beta_2 <- rowSums(mat_xy[, 1:5]*mat_xy[, 6:10])/rowSums(mat_xy[,
1:5]*mat_xy[, 1:5])
})

# doing the regression with `lm` without intercept
fun_beta_lm <- function(x) {
    lm(x[6:10] ~ x[1:5] - 1)$coefficients[1]
}
system.time({
    beta_3 <- apply(mat_xy, 1, FUN = fun_beta_lm)
})

# doing the regression with `lm` with intercept
fun_beta_lm_int <- function(x) {
    lm(x[6:10] ~ x[1:5])$coefficients[2]
}
system.time({
    beta_3_int <- apply(mat_xy, 1, FUN = fun_beta_lm_int)
})

# results
head(beta_1)
head(beta_2)
head(beta_3)
head(beta_3_int)

On Tue, Nov 22, 2011 at 10:34, G See <gsee000 at gmail.com> wrote:
> You may be interested in the fastLM function from the RcppArmadillo package
>
> On Mon, Nov 21, 2011 at 9:52 PM, Robert A'gata <rhelpacc at gmail.com> wrote:
>
>> Hi,
>>
>> I think my problem is a bit mundane but it's quite intriguing. Imagine
>> I have a matrix of 10 by 2 million. The first 5 columns are x and the
>> last 5 are y values. I have to regress y on x (assume 0 intercept) for
>> each row to observe time series of the slope. I am wondering if there
>> is any way to speed this calculation up? I tried with apply. But it is
>> still slow. Is there any trick I should know? Thank you.
>>
>> Robert
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From hemant.sambatur at db.com  Wed Nov 23 08:16:56 2011
From: hemant.sambatur at db.com (hemsam)
Date: Tue, 22 Nov 2011 23:16:56 -0800 (PST)
Subject: [R-SIG-Finance] help with egarch prediction
Message-ID: <1322032616786-4098716.post@n4.nabble.com>

Hi,

Problem : Need to predict the subsequent month vol using the past 30 month
observations

Tried the rugarch package but there is a limitation which says that you need
to have atleast 100 observations

In the fGarch package, one has to use OX interface which does not come free

In the egarch package, one can fit an egarch model with less than 100 data
points but then there is no predict function which helps in forecasting the
one-step ahead forecast

Appreciate your help and guidance in coming up with a solution for the
problem

Regards

--
View this message in context: http://r.789695.n4.nabble.com/help-with-egarch-prediction-tp4098716p4098716.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Wed Nov 23 10:33:08 2011
From: alexios at 4dscape.com (alexios)
Date: Wed, 23 Nov 2011 09:33:08 +0000
Subject: [R-SIG-Finance] help with egarch prediction
In-Reply-To: <1322032616786-4098716.post@n4.nabble.com>
References: <1322032616786-4098716.post@n4.nabble.com>
Message-ID: <4ECCBDD4.2050005@4dscape.com>

As far as rugarch is concerned, the restriction is there for a reason:
It is highly unlikely that the solver will converge with anything less
than 100 points, and even then, what inference you expect to make with 
so little data, let alone confidence to perform a forecast is beyond me 
(the ugarchdistribution function which simulates and fits GARCH models 
given a parameter set, for different window sizes, can be used to better 
understand this point).
Having said that, the software is open source...open it up, see the 
source and make the changes you want (hint: the 15th line of code in the 
file 'rugarch-egarch.R' can be commented out to remove the restriction).

Regards,
Alexios


On 23/11/2011 07:16, hemsam wrote:
> Hi,
>
> Problem : Need to predict the subsequent month vol using the past 30 month
> observations
>
> Tried the rugarch package but there is a limitation which says that you need
> to have atleast 100 observations
>
> In the fGarch package, one has to use OX interface which does not come free
>
> In the egarch package, one can fit an egarch model with less than 100 data
> points but then there is no predict function which helps in forecasting the
> one-step ahead forecast
>
> Appreciate your help and guidance in coming up with a solution for the
> problem
>
> Regards
>
> --
> View this message in context: http://r.789695.n4.nabble.com/help-with-egarch-prediction-tp4098716p4098716.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>


From hemant.sambatur at db.com  Wed Nov 23 11:15:59 2011
From: hemant.sambatur at db.com (hemsam)
Date: Wed, 23 Nov 2011 02:15:59 -0800 (PST)
Subject: [R-SIG-Finance] help with egarch prediction
In-Reply-To: <4ECCBDD4.2050005@4dscape.com>
References: <1322032616786-4098716.post@n4.nabble.com>
	<4ECCBDD4.2050005@4dscape.com>
Message-ID: <1322043359173-4099092.post@n4.nabble.com>

Thank you Alexios for letting me know.

I can understand your concern about so few data points and will look into
it. 

Also, I am a newbie to R. I installed the rugarch package using RGui.

Can you please let me know how I can "open" and edit the rugarch-egarch.R
file? I checked the rugarch folder within library but found no source code
as such.

Appreciate your help.

Regards.

--
View this message in context: http://r.789695.n4.nabble.com/help-with-egarch-prediction-tp4098716p4099092.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From ustaudinger at activequant.org  Wed Nov 23 11:23:56 2011
From: ustaudinger at activequant.org (Ulrich Staudinger)
Date: Wed, 23 Nov 2011 11:23:56 +0100
Subject: [R-SIG-Finance] help with egarch prediction
In-Reply-To: <1322043359173-4099092.post@n4.nabble.com>
References: <1322032616786-4098716.post@n4.nabble.com>
	<4ECCBDD4.2050005@4dscape.com>
	<1322043359173-4099092.post@n4.nabble.com>
Message-ID: <CAMrz3D2=iG+2j3VwHD0q8GQ96CNn4BYF5F_LvYFsSkDZO2wNKw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111123/e8086a20/attachment.pl>

From patrick at burns-stat.com  Wed Nov 23 11:29:23 2011
From: patrick at burns-stat.com (Patrick Burns)
Date: Wed, 23 Nov 2011 10:29:23 +0000
Subject: [R-SIG-Finance] help with egarch prediction
In-Reply-To: <4ECCBDD4.2050005@4dscape.com>
References: <1322032616786-4098716.post@n4.nabble.com>
	<4ECCBDD4.2050005@4dscape.com>
Message-ID: <4ECCCB03.8080707@burns-stat.com>

Alexios has given a computational reason
for needing more data, but there is an
economic reason as well -- 30 months is
not enough data to estimate a garch model.

For daily data I regard 1000 observations
as the absolute minimum to get any sort of
reasonable estimate.

I think it would be better to avoid the
estimation step.  Here's what I would do
in this situation:

1.  Get a "standard" set of parameters for
the garch model.  I'm not sure what those
would be for monthly data.  (You can think
of this as a Bayesian estimate with a very
narrow prior.)

2.  Given the fixed parameters and the
variance of the known data, solve for the
intercept.

3.  Do the prediction with these parameters.
It is just a bit of arithmetic.

On 23/11/2011 09:33, alexios wrote:
> As far as rugarch is concerned, the restriction is there for a reason:
> It is highly unlikely that the solver will converge with anything less
> than 100 points, and even then, what inference you expect to make with
> so little data, let alone confidence to perform a forecast is beyond me
> (the ugarchdistribution function which simulates and fits GARCH models
> given a parameter set, for different window sizes, can be used to better
> understand this point).
> Having said that, the software is open source...open it up, see the
> source and make the changes you want (hint: the 15th line of code in the
> file 'rugarch-egarch.R' can be commented out to remove the restriction).
>
> Regards,
> Alexios
>
>
> On 23/11/2011 07:16, hemsam wrote:
>> Hi,
>>
>> Problem : Need to predict the subsequent month vol using the past 30
>> month
>> observations
>>
>> Tried the rugarch package but there is a limitation which says that
>> you need
>> to have atleast 100 observations
>>
>> In the fGarch package, one has to use OX interface which does not come
>> free
>>
>> In the egarch package, one can fit an egarch model with less than 100
>> data
>> points but then there is no predict function which helps in
>> forecasting the
>> one-step ahead forecast
>>
>> Appreciate your help and guidance in coming up with a solution for the
>> problem
>>
>> Regards
>>
>> --
>> View this message in context:
>> http://r.789695.n4.nabble.com/help-with-egarch-prediction-tp4098716p4098716.html
>>
>> Sent from the Rmetrics mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R
>> questions should go.
>>
>>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From alexios at 4dscape.com  Wed Nov 23 12:01:26 2011
From: alexios at 4dscape.com (alexios)
Date: Wed, 23 Nov 2011 11:01:26 +0000
Subject: [R-SIG-Finance] help with egarch prediction
In-Reply-To: <4ECCCB03.8080707@burns-stat.com>
References: <1322032616786-4098716.post@n4.nabble.com>
	<4ECCBDD4.2050005@4dscape.com> <4ECCCB03.8080707@burns-stat.com>
Message-ID: <4ECCD286.7000704@4dscape.com>

The ugarchdistribution function gives the econometric
intuition in terms of parameter distribution and sqrt(N)
consistency by simulation. You choose a set of "true parameters"
to simulate from, for different data lengths, fit the garch model,
and observe the simulated parameter distribution and change in
root mean squared error (of true versus fitted) as the length of
the data increases.


On 23/11/2011 10:29, Patrick Burns wrote:
> Alexios has given a computational reason
> for needing more data, but there is an
> economic reason as well -- 30 months is
> not enough data to estimate a garch model.
>
> For daily data I regard 1000 observations
> as the absolute minimum to get any sort of
> reasonable estimate.
>
> I think it would be better to avoid the
> estimation step. Here's what I would do
> in this situation:
>
> 1. Get a "standard" set of parameters for
> the garch model. I'm not sure what those
> would be for monthly data. (You can think
> of this as a Bayesian estimate with a very
> narrow prior.)
>
> 2. Given the fixed parameters and the
> variance of the known data, solve for the
> intercept.
>
> 3. Do the prediction with these parameters.
> It is just a bit of arithmetic.
>
> On 23/11/2011 09:33, alexios wrote:
>> As far as rugarch is concerned, the restriction is there for a reason:
>> It is highly unlikely that the solver will converge with anything less
>> than 100 points, and even then, what inference you expect to make with
>> so little data, let alone confidence to perform a forecast is beyond me
>> (the ugarchdistribution function which simulates and fits GARCH models
>> given a parameter set, for different window sizes, can be used to better
>> understand this point).
>> Having said that, the software is open source...open it up, see the
>> source and make the changes you want (hint: the 15th line of code in the
>> file 'rugarch-egarch.R' can be commented out to remove the restriction).
>>
>> Regards,
>> Alexios
>>
>>
>> On 23/11/2011 07:16, hemsam wrote:
>>> Hi,
>>>
>>> Problem : Need to predict the subsequent month vol using the past 30
>>> month
>>> observations
>>>
>>> Tried the rugarch package but there is a limitation which says that
>>> you need
>>> to have atleast 100 observations
>>>
>>> In the fGarch package, one has to use OX interface which does not come
>>> free
>>>
>>> In the egarch package, one can fit an egarch model with less than 100
>>> data
>>> points but then there is no predict function which helps in
>>> forecasting the
>>> one-step ahead forecast
>>>
>>> Appreciate your help and guidance in coming up with a solution for the
>>> problem
>>>
>>> Regards
>>>
>>> --
>>> View this message in context:
>>> http://r.789695.n4.nabble.com/help-with-egarch-prediction-tp4098716p4098716.html
>>>
>>>
>>> Sent from the Rmetrics mailing list archive at Nabble.com.
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R
>>> questions should go.
>>>
>>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>


From brian at braverock.com  Wed Nov 23 13:09:36 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 23 Nov 2011 06:09:36 -0600
Subject: [R-SIG-Finance] help with egarch prediction
In-Reply-To: <1322043359173-4099092.post@n4.nabble.com>
References: <1322032616786-4098716.post@n4.nabble.com>
	<4ECCBDD4.2050005@4dscape.com>
	<1322043359173-4099092.post@n4.nabble.com>
Message-ID: <1322050176.2745.5.camel@brian-desktop>

On Wed, 2011-11-23 at 02:15 -0800, hemsam wrote:
> Also, I am a newbie to R. I installed the rugarch package using RGui.
> 
> Can you please let me know how I can "open" and edit the
> rugarch-egarch.R file? I checked the rugarch folder within library but
> found no source code as such. 

>From inside R, see:

?fix
# and
?fixInNamespace

which will allow you to edit functions from loaded packages in your
running R session.  These changes will not necessarily persist across
sessions, and do not persist across workspaces.  They are however a good
way to make a change and then test whether it had the desired effect.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From jbreit at nexgo.de  Wed Nov 23 15:03:34 2011
From: jbreit at nexgo.de (Joachim Breit)
Date: Wed, 23 Nov 2011 15:03:34 +0100
Subject: [R-SIG-Finance] Option valuation for arbitrary distribution
 using monte carlo simulation
In-Reply-To: <A682FFE47602644E9D3DEECDD6F832978363FD@SN2PRD0302MB136.namprd03.prod.outlook.com>
References: <4ECBA86C.4030604@nexgo.de>,
	<1321975833682-4096122.post@n4.nabble.com>
	<A682FFE47602644E9D3DEECDD6F832978363FD@SN2PRD0302MB136.namprd03.prod.outlook.com>
Message-ID: <4ECCFD36.3050607@nexgo.de>

Dear Massimo,

thanks for the hint to Iacus' book. I was aware of this title already 
but could not get hold of it by now. Thank you for the code snippet as 
well. Unfortunately, it does not seem to help with my main problem: How 
to correct the original data such that Monte Carlo sampling from it 
gives me samples from a risk-neutral but NONNORMAL process. Maybe my 
description is a bit awkward. Also I may lack the math and statistics 
skills. I try do say it another way:

Let
r : original log return series
     ( with e.g. mean(r)  = -0.0001574849 and sd(r)  = 0.01479017 )
x:  risk-free rate of, say, 5%.
Snow : stock price now
time to maturity = 1 year = 252 trading days
St : stock price in 1 year
X: call option strike
E[] : expected value
C : the option price

I am looking for a corrected return series rcorr = r + z such that
E[ Snow * exp(  sum(  sample(rcorr, 252)     ) ) ] = 100 * exp(0.05)

because then I can find the call option price with
for (i in 1:bignumber) {
   St[i] = Snow * exp(  sum(   sample(rcorr, 252)     ) )
   op[i] = max(0, exp(-.05) * (St[i] - X)  )
}
C = mean(op)

I could of course use some search algorithm to find z. In fact thats 
what I did. But I thought this is so common a problem for finance folks 
that there must be some elegant R procedure for th task.

Your code seems to assume that we are dealing with normal log returns 
but this is not the case for my sample.

Do you see what I mean? Is this stuff dealt with in the Iacus book?

Greetings
Joachim

>
> Hi Joachim , I'm not a prof but I recommend you the following book:
> Option Pricing and Estimation of Financial Models with R
> Stafano M. Iacus
> http://www.amazon.com/Option-Pricing-Estimation-Financial-Models/dp/0470745843/ref=sr_1_48?ie=UTF8&qid=1321974343&sr=8-48
>
> it'll explain a lot of thinks with code samples.
> Some very base simple code, I started with this one and while was reading
> the book I started to improve it
>
> #define functions
> require(package='fBasics',quietly=FALSE)
>
> #This function to create innovation
> #We keep innovation function autside of process because
> #once computed leave it stored for next usage
> innovation.norm<-function(pTrials=5000){
>    # remember to add the seed
>    #generate standard normal innovation
>    z<- rnorm(n=pTrials,mean=0,sd=1)
>    #genereta anthitetic innovation
>    ant.z<--z
>    #combine in the new one:
>    z<- c(z,ant.z)
>    #return innovation vector
>    return(z)
> }
>
> #this function to create the price distribution
> st.proc.norm<-function(pInnVect=z,mu=0,pSnow=15,pVol=0.15,pTradDaysToExp=20){
>    #set the number of trading days in one year
>    yearTradDays<-252
>    #compute the interval time
>    dt<-pTradDaysToExp/yearTradDays
>    s.final<- rep(0,length(pInnVect))
>    s.final<-pSnow*exp(pVol*sqrt(dt)*pInnVect)
>    out<-c(s.final,pSnow)
>    return(s.final)
> }
>
> #this function to build the option chain
> price.chain<-function(pSFinal,pIntRate=0.02,pStrikeMin=10,pStrikeMax=15,pDStrike=0.5,pCalDaysToExp=30){
>    #build strike chain
>    K<-seq(from=pStrikeMin,to=pStrikeMax,by=pDStrike)
>    #compute dicount factor
>    calDays<-365
>    dt<-pCalDaysToExp/calDays
>    #prepare storage for chain
>    prCall<-rep(x=0,length(K))
>    prPut<-rep(x=0,length(K))
>    se.call<-rep(x=0,length(K))
>    se.put<-rep(x=0,length(K))
>
>    for (i in (1:length(K))){
>      #print(i)
>      #print(K[i])
>      #formula for pricing
>      c<- ifelse(pSFinal>K[i],exp(-pIntRate*dt)*(pSFinal-K[i]), 0)
>      p<- ifelse(pSFinal<K[i],exp(-pIntRate*dt)*(K[i]-pSFinal), 0)
>      #price as average
>      prCall[i]<-mean(c)
>      prPut[i]<-mean(p)
>      #standard error
>      se.call[i]<-sd(c)/sqrt(length(pSFinal))
>      se.put[i]<-sd(p)/sqrt(length(pSFinal))
>
>      ## make a confidence interval estimate
>      alpha<-0.05
>      t.star<-qt(p=(1-alpha/2),df=length(pSFinal)-1,lower.tail=TRUE)
>      prCall[i]+c(-1,1)*t.star*se.call[i]
>      prPut[i]+c(-1,1)*t.star*se.put[i]
>    }
>
>    #build the data frame for option's chain
>
> pr.chain<-data.frame(CALL=round(prCall,digits=3),Strike=K,PUT=round(prPut,digits=3))
>
>    return(pr.chain)
> }
>
>
> ##################################################################################
> ##  PRICING WITH NORMAL
> inn.n<-innovation.norm(pTrials=500)
> hist(inn.n)
> #you must estimate volatility from past data
> s.final.n<-st.proc.norm(pInnVect=inn.n,pSnow=13.40,pVol=0.25,pTradDaysToExp=20)
> hist(s.final.n)
> #you must estimate interest rate
> price.chain(pSFinal=s.final.n,pIntRate=0.02,pStrikeMin=10,pStrikeMax=15,pDStrike=0.5,pCalDaysToExp=20)


From massimo.salese at gmail.com  Wed Nov 23 17:00:47 2011
From: massimo.salese at gmail.com (msalese)
Date: Wed, 23 Nov 2011 08:00:47 -0800 (PST)
Subject: [R-SIG-Finance] Option valuation for arbitrary distribution
 using monte carlo simulation
In-Reply-To: <4ECCFD36.3050607@nexgo.de>
References: <4ECBA86C.4030604@nexgo.de>
	<1321975833682-4096122.post@n4.nabble.com>
	<A682FFE47602644E9D3DEECDD6F832978363FD@SN2PRD0302MB136.namprd03.prod.outlook.com>
	<4ECCFD36.3050607@nexgo.de>
Message-ID: <1322064047703-4100184.post@n4.nabble.com>

You can tray to use non normal innovations (sampled from stable
distribution),
but you have to estimate alpha, beta, gamma and delta parameters

innovation.stable<-function(pTrials=5000,pAlpha=1.7,pBeta=0.5,pGamma=1,pDelta=1,pPm=0){
  #you must estimate parameters from past data using stableFit
  #alpha -> index tail (0,2]
  #beta -> skewness [-1,1]
  #gamma -> scale 
  #delta -> shift
  #pm -< parametrizzation (0,1,2)
  require(package='fBasics',quietly=FALSE)
  z <-
rstable(n=pTrials,alpha=pAlpha,beta=pBeta,gamma=pGamma,delta=pDelta,pm=pPm)
  #genereta anthitetic innovation
  ant.z <--z
  #combine in the new one:
  z <- c(z,ant.z)
  #return innovation vector
  return(z)
}
##############################?
Iacus' Book starts teaching you to price with normal innovations and then
improves the code and teachs you how to parallelize all.



--
View this message in context: http://r.789695.n4.nabble.com/Option-valuation-for-arbitrary-distribution-using-monte-carlo-simulation-tp4095718p4100184.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From Michael.Benjamin at bernstein.com  Wed Nov 23 20:52:29 2011
From: Michael.Benjamin at bernstein.com (Benjamin, Michael)
Date: Wed, 23 Nov 2011 19:52:29 +0000
Subject: [R-SIG-Finance] Prroblem with RBloomberg blp intraday data
Message-ID: <E9DE1D321E5D1841920E8E92938F4AEB0B95BA5B@LONEVS1.ac.lp.acml.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111123/ba55662d/attachment.pl>

From Michael.Benjamin at bernstein.com  Thu Nov 24 11:45:41 2011
From: Michael.Benjamin at bernstein.com (Benjamin, Michael)
Date: Thu, 24 Nov 2011 10:45:41 -0000
Subject: [R-SIG-Finance] HELP: Problem with RBloomberg blp intraday data
Message-ID: <E9DE1D321E5D1841920E8E92938F4AEB0B95BB05@LONEVS1.ac.lp.acml.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111124/24897e24/attachment.pl>

From papa.senyo at yahoo.it  Thu Nov 24 12:07:44 2011
From: papa.senyo at yahoo.it (Papa Senyo)
Date: Thu, 24 Nov 2011 11:07:44 +0000 (GMT)
Subject: [R-SIG-Finance] (no subject)
Message-ID: <1322132864.16233.YahooMailNeo@web132315.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111124/b12a639e/attachment.pl>

From papa.senyo at yahoo.it  Thu Nov 24 12:09:32 2011
From: papa.senyo at yahoo.it (Papa Senyo)
Date: Thu, 24 Nov 2011 11:09:32 +0000 (GMT)
Subject: [R-SIG-Finance] External regressors
In-Reply-To: <1322132864.16233.YahooMailNeo@web132315.mail.ird.yahoo.com>
References: <1322132864.16233.YahooMailNeo@web132315.mail.ird.yahoo.com>
Message-ID: <1322132972.21681.YahooMailNeo@web132316.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111124/e100a3c5/attachment.pl>

From papa.senyo at yahoo.it  Thu Nov 24 12:30:12 2011
From: papa.senyo at yahoo.it (Papa Senyo)
Date: Thu, 24 Nov 2011 11:30:12 +0000 (GMT)
Subject: [R-SIG-Finance] rugarch:out of sample
In-Reply-To: <4E6C7E7E.2080904@4dscape.com>
References: <1315564132.39997.YahooMailNeo@web132314.mail.ird.yahoo.com>
	<CCC0EDEC-C11D-41A4-8193-A3DD1765DBD1@4dscape.com>
	<1315640025.94817.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<4E6B14CF.6000702@4dscape.com>
	<CABxs9VnXUmLO8f2MFi03cLf6OKwusSXQnvk07wcwZq=Ti_qvdA@mail.gmail.com>
	<4E6B5F5B.5040802@4dscape.com>
	<1315662183.966.YahooMailNeo@web132302.mail.ird.yahoo.com>
	<1315711136.65191.YahooMailNeo@web132308.mail.ird.yahoo.com>
	<1315728309.50163.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<1315732645.4192.91.camel@brian-desktop>
	<4E6C7E7E.2080904@4dscape.com>
Message-ID: <1322134212.92352.YahooMailNeo@web132312.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111124/e435fe7c/attachment.pl>

From alexios at 4dscape.com  Thu Nov 24 12:52:09 2011
From: alexios at 4dscape.com (alexios)
Date: Thu, 24 Nov 2011 11:52:09 +0000
Subject: [R-SIG-Finance] rugarch:out of sample
In-Reply-To: <1322134212.92352.YahooMailNeo@web132312.mail.ird.yahoo.com>
References: <1315564132.39997.YahooMailNeo@web132314.mail.ird.yahoo.com>
	<CCC0EDEC-C11D-41A4-8193-A3DD1765DBD1@4dscape.com>
	<1315640025.94817.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<4E6B14CF.6000702@4dscape.com>
	<CABxs9VnXUmLO8f2MFi03cLf6OKwusSXQnvk07wcwZq=Ti_qvdA@mail.gmail.com>
	<4E6B5F5B.5040802@4dscape.com>
	<1315662183.966.YahooMailNeo@web132302.mail.ird.yahoo.com>
	<1315711136.65191.YahooMailNeo@web132308.mail.ird.yahoo.com>
	<1315728309.50163.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<1315732645.4192.91.camel@brian-desktop>
	<4E6C7E7E.2080904@4dscape.com>
	<1322134212.92352.YahooMailNeo@web132312.mail.ird.yahoo.com>
Message-ID: <4ECE2FE9.4050809@4dscape.com>

1. Please go through the documentation and extensive examples in the 
inst folder of the package.
2. If after doing so you have not understood something or suspect a bug,
put all you questions in ONE email to the list (for usage questions) or 
the developer (if related to a suspected bug) with a minimally 
REPRODUCIBLE example.

Thanks,
Alexios

On 24/11/2011 11:30, Papa Senyo wrote:
> Dear all,
>
> How is the specification of the out of sample done if one wants to carry
> out the out of sample analysis using the rugarch.
> by default out.sample=0
> Kind regards
> Papa


From bogaso.christofer at gmail.com  Thu Nov 24 12:59:13 2011
From: bogaso.christofer at gmail.com (Bogaso)
Date: Thu, 24 Nov 2011 03:59:13 -0800 (PST)
Subject: [R-SIG-Finance] Option valuation for arbitrary distribution
 using monte carlo simulation
In-Reply-To: <1322064047703-4100184.post@n4.nabble.com>
References: <4ECBA86C.4030604@nexgo.de>
	<1321975833682-4096122.post@n4.nabble.com>
	<A682FFE47602644E9D3DEECDD6F832978363FD@SN2PRD0302MB136.namprd03.prod.outlook.com>
	<4ECCFD36.3050607@nexgo.de>
	<1322064047703-4100184.post@n4.nabble.com>
Message-ID: <1322135953099-4103558.post@n4.nabble.com>

Probably my question is quite trivial, however could somebody clarify me why
I need to have some stable distribution instead having any arbitrary
distribution? I know what the stable distribution is however could not get
the reason in the asset price generation context.

Thanks andregards,

--
View this message in context: http://r.789695.n4.nabble.com/Option-valuation-for-arbitrary-distribution-using-monte-carlo-simulation-tp4095718p4103558.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From patrick at burns-stat.com  Thu Nov 24 13:02:21 2011
From: patrick at burns-stat.com (Patrick Burns)
Date: Thu, 24 Nov 2011 12:02:21 +0000
Subject: [R-SIG-Finance] External regressors
In-Reply-To: <1322132972.21681.YahooMailNeo@web132316.mail.ird.yahoo.com>
References: <1322132864.16233.YahooMailNeo@web132315.mail.ird.yahoo.com>
	<1322132972.21681.YahooMailNeo@web132316.mail.ird.yahoo.com>
Message-ID: <4ECE324D.3020206@burns-stat.com>

I think you will need to do some
debugging to see where it is going
wrong.  One place among many to get
some R debugging hints is at the
start of Circle 8 of 'The R Inferno':

http://www.burns-stat.com/pages/Tutor/R_inferno.pdf

On 24/11/2011 11:09, Papa Senyo wrote:
>
>
>
> -
>
> Dear All,
>
> Please, I have run the codes below and have errors as below: Please what do we do to avoid/rectify this error. The problem as it appears might be coming from the external regressors.
>
>
> spec3=ugarchspec(variance.model = list(model = "fGARCH", garchOrder = c(1,
> 1), submodel ="TGARCH", external.regressors = xxx, variance.targeting = FALSE),
> mean.model = list(armaOrder = c(5, 0), include.mean = TRUE,
> archm = FALSE, archpow = 1, arfima = FALSE, external.regressors = NULL),
> distribution.model = "sstd", start.pars = list(), fixed.pars = list())
> model2<- ugarchfit(data =matrix(res.ar1), spec = spec3, out.sample = 0,
>      solver = "gosolnp", solver.control = list(),
>      fit.control = list(stationarity = 1, fixed.se = 0, scale = 0))
>
> Error;
> Error in .fgarchfit(spec = spec, data = data, out.sample = out.sample,  :
>    subscript out of bounds
>
> Kind regards
> papa
> 	[[alternative HTML version deleted]]
>
>
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From jbreit at nexgo.de  Thu Nov 24 13:08:52 2011
From: jbreit at nexgo.de (Joachim Breit)
Date: Thu, 24 Nov 2011 13:08:52 +0100
Subject: [R-SIG-Finance] Option valuation for arbitrary distribution
 using monte carlo simulation
In-Reply-To: <1322135953099-4103558.post@n4.nabble.com>
References: <4ECBA86C.4030604@nexgo.de>
	<1321975833682-4096122.post@n4.nabble.com>
	<A682FFE47602644E9D3DEECDD6F832978363FD@SN2PRD0302MB136.namprd03.prod.outlook.com>
	<4ECCFD36.3050607@nexgo.de>
	<1322064047703-4100184.post@n4.nabble.com>
	<1322135953099-4103558.post@n4.nabble.com>
Message-ID: <4ECE33D4.7080803@nexgo.de>

I appreciate msalese's help, but: good question!

Am 24.11.2011 12:59, schrieb Bogaso:
> Probably my question is quite trivial, however could somebody clarify me why
> I need to have some stable distribution instead having any arbitrary
> distribution? I know what the stable distribution is however could not get
> the reason in the asset price generation context.
>
> Thanks andregards,
>


From massimo.salese at gmail.com  Thu Nov 24 14:04:05 2011
From: massimo.salese at gmail.com (msalese)
Date: Thu, 24 Nov 2011 05:04:05 -0800 (PST)
Subject: [R-SIG-Finance] Option valuation for arbitrary distribution
 using monte carlo simulation
In-Reply-To: <4ECE33D4.7080803@nexgo.de>
References: <4ECBA86C.4030604@nexgo.de>
	<1321975833682-4096122.post@n4.nabble.com>
	<A682FFE47602644E9D3DEECDD6F832978363FD@SN2PRD0302MB136.namprd03.prod.outlook.com>
	<4ECCFD36.3050607@nexgo.de>
	<1322064047703-4100184.post@n4.nabble.com>
	<1322135953099-4103558.post@n4.nabble.com>
	<4ECE33D4.7080803@nexgo.de>
Message-ID: <1322139845476-4103714.post@n4.nabble.com>

Hi guys, I think that you can use what distribution you want.
Stable is one of that better fits the log returns (it's my opinion!)
But you can have more info giving a look at
http://www.mathestate.com/tools/Financial/map/Overview.html).
If you prefer you can price with GARCH to better reproduce the smile effect. 
I'm a buyer side trader (risk taker), I price options only to create future
scenarios and on that scenarios I plan the reaction.


--
View this message in context: http://r.789695.n4.nabble.com/Option-valuation-for-arbitrary-distribution-using-monte-carlo-simulation-tp4095718p4103714.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jbreit at nexgo.de  Thu Nov 24 16:19:30 2011
From: jbreit at nexgo.de (Joachim Breit)
Date: Thu, 24 Nov 2011 16:19:30 +0100
Subject: [R-SIG-Finance] Option valuation for arbitrary distribution
 using monte carlo simulation
In-Reply-To: <1322139845476-4103714.post@n4.nabble.com>
References: <4ECBA86C.4030604@nexgo.de>
	<1321975833682-4096122.post@n4.nabble.com>
	<A682FFE47602644E9D3DEECDD6F832978363FD@SN2PRD0302MB136.namprd03.prod.outlook.com>
	<4ECCFD36.3050607@nexgo.de>
	<1322064047703-4100184.post@n4.nabble.com>
	<1322135953099-4103558.post@n4.nabble.com>
	<4ECE33D4.7080803@nexgo.de>
	<1322139845476-4103714.post@n4.nabble.com>
Message-ID: <4ECE6082.6090202@nexgo.de>

Thank you for the interesting link.

I agree that you can use a (fit of a) stable distribution for sampling 
purposes. But please: Why not simply use the raw data and sample from 
that? What could be a better starting point? Again, it is clear that you 
cannot use the raw return series as it comes off your data feed; there 
is a need for adjusting. But there cannot be a better fit to the raw 
data than the raw data itself...

Am 24.11.2011 14:04, schrieb msalese:
> Hi guys, I think that you can use what distribution you want.
> Stable is one of that better fits the log returns (it's my opinion!)
> But you can have more info giving a look at
> http://www.mathestate.com/tools/Financial/map/Overview.html).
> If you prefer you can price with GARCH to better reproduce the smile effect.
> I'm a buyer side trader (risk taker), I price options only to create future
> scenarios and on that scenarios I plan the reaction.
>


From matthewcleggphd at gmail.com  Thu Nov 24 16:36:19 2011
From: matthewcleggphd at gmail.com (Matthew Clegg)
Date: Thu, 24 Nov 2011 10:36:19 -0500
Subject: [R-SIG-Finance] Option valuation for arbitrary distribution
 using monte carlo simulation
In-Reply-To: <1322139845476-4103714.post@n4.nabble.com>
References: <4ECBA86C.4030604@nexgo.de>
	<1321975833682-4096122.post@n4.nabble.com>
	<A682FFE47602644E9D3DEECDD6F832978363FD@SN2PRD0302MB136.namprd03.prod.outlook.com>
	<4ECCFD36.3050607@nexgo.de>
	<1322064047703-4100184.post@n4.nabble.com>
	<1322135953099-4103558.post@n4.nabble.com>
	<4ECE33D4.7080803@nexgo.de>
	<1322139845476-4103714.post@n4.nabble.com>
Message-ID: <CABLRk0GUD34_5FuN+aA0Y1XpfkoQFji_ef-KnDXERO6=rX19Zw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111124/da696a60/attachment.pl>

From patrick at burns-stat.com  Thu Nov 24 18:42:10 2011
From: patrick at burns-stat.com (Patrick Burns)
Date: Thu, 24 Nov 2011 17:42:10 +0000
Subject: [R-SIG-Finance] Option valuation for arbitrary distribution
 using monte carlo simulation
In-Reply-To: <CABLRk0GUD34_5FuN+aA0Y1XpfkoQFji_ef-KnDXERO6=rX19Zw@mail.gmail.com>
References: <4ECBA86C.4030604@nexgo.de>
	<1321975833682-4096122.post@n4.nabble.com>
	<A682FFE47602644E9D3DEECDD6F832978363FD@SN2PRD0302MB136.namprd03.prod.outlook.com>
	<4ECCFD36.3050607@nexgo.de>
	<1322064047703-4100184.post@n4.nabble.com>
	<1322135953099-4103558.post@n4.nabble.com>
	<4ECE33D4.7080803@nexgo.de>
	<1322139845476-4103714.post@n4.nabble.com>
	<CABLRk0GUD34_5FuN+aA0Y1XpfkoQFji_ef-KnDXERO6=rX19Zw@mail.gmail.com>
Message-ID: <4ECE81F2.4060807@burns-stat.com>

I think it *is* clear what the volatility
of a stable distribution (other than
Gaussian) is: infinite.

That implies, I believe, that the price
of most options would also be infinite.
I'm not so convinced that doing a Monte
Carlo for options pricing with a stable
distribution is a good idea.

Caveat: I'm basically ignorant about options
pricing.

Pat

On 24/11/2011 15:36, Matthew Clegg wrote:
> The stable distribution is among the earliest distributions that have been
> proposed for describing the returns of financial assets.  It was first
> suggested by Benoit Mandelbrot [1], the same person after whom the
> Mandelbrot set is named.  It's probably fair to say that Mandelbrot's work
> launched the study of asset price distributions.  Since then, there have
> been dozens of distributions proposed that have been argued to have better
> properties.  From a modeling perspective, one of the disadvantages of the
> stable distribution is that the variance is undefined (infinite) if alpha<
> 2, so it is not clear what it would mean to talk about the volatility of a
> stable-distributed process.
>
> [1] Mandelbrot, Benoit, "The Variation of Certain Speculative Prices," The
> Journal of Business, Vol. 36, No. 4 (Oct. 1963), pp. 394-419.
>
>
> On Thu, Nov 24, 2011 at 8:04 AM, msalese<massimo.salese at gmail.com>  wrote:
>
>> Hi guys, I think that you can use what distribution you want.
>> Stable is one of that better fits the log returns (it's my opinion!)
>> But you can have more info giving a look at
>> http://www.mathestate.com/tools/Financial/map/Overview.html).
>> If you prefer you can price with GARCH to better reproduce the smile
>> effect.
>> I'm a buyer side trader (risk taker), I price options only to create future
>> scenarios and on that scenarios I plan the reaction.
>>
>>
>> --
>> View this message in context:
>> http://r.789695.n4.nabble.com/Option-valuation-for-arbitrary-distribution-using-monte-carlo-simulation-tp4095718p4103714.html
>> Sent from the Rmetrics mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
>
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From brian at braverock.com  Thu Nov 24 20:43:46 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 24 Nov 2011 13:43:46 -0600
Subject: [R-SIG-Finance] Option valuation for arbitrary distribution
 using monte carlo simulation
In-Reply-To: <4ECE6082.6090202@nexgo.de>
References: <4ECBA86C.4030604@nexgo.de>
	<1321975833682-4096122.post@n4.nabble.com>
	<A682FFE47602644E9D3DEECDD6F832978363FD@SN2PRD0302MB136.namprd03.prod.outlook.com>
	<4ECCFD36.3050607@nexgo.de> <1322064047703-4100184.post@n4.nabble.com>
	<1322135953099-4103558.post@n4.nabble.com> <4ECE33D4.7080803@nexgo.de>
	<1322139845476-4103714.post@n4.nabble.com> <4ECE6082.6090202@nexgo.de>
Message-ID: <1322163826.20917.5.camel@brian-desktop>

On Thu, 2011-11-24 at 16:19 +0100, Joachim Breit wrote:
> Thank you for the interesting link.
> 
> I agree that you can use a (fit of a) stable distribution for sampling
> purposes. But please: Why not simply use the raw data and sample from 
> that? What could be a better starting point? Again, it is clear that
> you cannot use the raw return series as it comes off your data feed;
> there is a need for adjusting. But there cannot be a better fit to the
> raw data than the raw data itself... 

Of course you start with sampling from your data, but if all you do is
sample from the data, with no 'noise', then all you are doing is
smoothing out the prior observations.  This may lead you to a false
sense of security, and give you an incorrect idea of how likely a fat
tailed event is.  So by adding noise from a stable or other fat tailed
distribution (skewed Student's T is also popular), you are believing
that your prior data is both stationary and fully representative.

Regards,

  - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From uwe at uwevoelker.de  Fri Nov 25 09:05:29 2011
From: uwe at uwevoelker.de (Uwe Voelker)
Date: Fri, 25 Nov 2011 09:05:29 +0100
Subject: [R-SIG-Finance] options profit/loss graph (beginner question)
Message-ID: <CAD8TJj2RvDY-VNaCYurHfx7F8ARWBKHB5S5J+Cmvhk4ooHm46A@mail.gmail.com>

Hello,

I would like to plot profit/loss graphs for option strategies (e. g.
Ratio Spreads) with today's data, next week and at expiration.

I'm completely new to R, but I hope it is good suited for this task. I
found fOptions from rmetrics package, but it only evaluates options.
I'm missing the link to the graph/plot. I googled a lot and could not
find examples (for sure I'm searching the wrong keywords).

Can you please point me to an example?

Thanks a lot,
with kind regards,
Uwe


From cwrward at gmail.com  Fri Nov 25 09:48:56 2011
From: cwrward at gmail.com (Charles Ward)
Date: Fri, 25 Nov 2011 08:48:56 +0000
Subject: [R-SIG-Finance] Option valuation for arbitrary distribution
 using monte carlo simulation
In-Reply-To: <1322163826.20917.5.camel@brian-desktop>
References: <4ECBA86C.4030604@nexgo.de>
	<1321975833682-4096122.post@n4.nabble.com>
	<A682FFE47602644E9D3DEECDD6F832978363FD@SN2PRD0302MB136.namprd03.prod.outlook.com>
	<4ECCFD36.3050607@nexgo.de> <1322064047703-4100184.post@n4.nabble.com>
	<1322135953099-4103558.post@n4.nabble.com> <4ECE33D4.7080803@nexgo.de>
	<1322139845476-4103714.post@n4.nabble.com> <4ECE6082.6090202@nexgo.de>
	<1322163826.20917.5.camel@brian-desktop>
Message-ID: <CA+FQezXD8Xf03EdVm8pjeN4SCF14Wv-dx7sX8Psu3wR-aNg4TA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111125/e102dcc2/attachment.pl>

From massimo.salese at gmail.com  Fri Nov 25 09:55:51 2011
From: massimo.salese at gmail.com (msalese)
Date: Fri, 25 Nov 2011 00:55:51 -0800 (PST)
Subject: [R-SIG-Finance] Option valuation for arbitrary distribution
 using monte carlo simulation
In-Reply-To: <4ECE81F2.4060807@burns-stat.com>
References: <4ECBA86C.4030604@nexgo.de>
	<1321975833682-4096122.post@n4.nabble.com>
	<A682FFE47602644E9D3DEECDD6F832978363FD@SN2PRD0302MB136.namprd03.prod.outlook.com>
	<4ECCFD36.3050607@nexgo.de>
	<1322064047703-4100184.post@n4.nabble.com>
	<1322135953099-4103558.post@n4.nabble.com>
	<4ECE33D4.7080803@nexgo.de>
	<1322139845476-4103714.post@n4.nabble.com>
	<CABLRk0GUD34_5FuN+aA0Y1XpfkoQFji_ef-KnDXERO6=rX19Zw@mail.gmail.com>
	<4ECE81F2.4060807@burns-stat.com>
Message-ID: <1322211351998-4106750.post@n4.nabble.com>

Hi again guys,
Let me say that (it's what I see looking at data) if you sample at 1 day or
less, 
log return of financial instruments are not normal so I think you should use
the distribution that best fit this situation.
May be stable it's not the best so you can decide to use some normal mixture
to fit fat tail behavior.
The point is: how do you look at option ?
Are you an hedger or a risk taker (retail trader) ?
It's my experience that as risk taker it's better to have some pdf that let
you build very extreme scenarios and then plan the option strategy to
protect you from this unlikely situation but not impossible.

The interesting think is that R give you the possibility to use different
pdf so write the code to price with MC in a such way to 
separate the innovation function from pricing option-chain function, than
change the innovations pdf and look what happen, it's the best school :
experiment yourself.


 


--
View this message in context: http://r.789695.n4.nabble.com/Option-valuation-for-arbitrary-distribution-using-monte-carlo-simulation-tp4095718p4106750.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From enricoschumann at yahoo.de  Fri Nov 25 10:46:20 2011
From: enricoschumann at yahoo.de (Enrico Schumann)
Date: Fri, 25 Nov 2011 10:46:20 +0100
Subject: [R-SIG-Finance] options profit/loss graph (beginner question)
In-Reply-To: <CAD8TJj2RvDY-VNaCYurHfx7F8ARWBKHB5S5J+Cmvhk4ooHm46A@mail.gmail.com>
References: <CAD8TJj2RvDY-VNaCYurHfx7F8ARWBKHB5S5J+Cmvhk4ooHm46A@mail.gmail.com>
Message-ID: <4ECF63EC.5060406@yahoo.de>


Hi Uwe

Am 25.11.2011 09:05, schrieb Uwe Voelker:
>
> I'm completely new to R, but I hope it is good suited for this task. I

It is (but you will have to learn a bit about using it).

> found fOptions from rmetrics package, but it only evaluates options.
> I'm missing the link to the graph/plot. I googled a lot and could not

The "link" is the graphics and plotting capabilities that come with R. 
Start with ?plot.

>
> Can you please point me to an example?

Here is a very simple example:

## a call under Black--Scholes--Merton
callBSM <- function(S,X,tau,r,q,vol) {
     if (tau > 0) {
         d1 <- (log(S/X) + (r - q + vol^2 / 2)*tau) / (vol*sqrt(tau))
         d2 <- d1 - vol*sqrt(tau)
         S * exp(-q * tau) * pnorm(d1) - X * exp(-r * tau) * pnorm(d2)
     } else {
         pmax(S-X,0)
     }

}

## now
S <- 70:130 ## evaluate for these spot prices
X <- 100; tau <- 1; r <- 0.02; q <- 0.01; vol  <- 0.2
plot(S, callBSM(S,X,tau,r,q,vol), col = grey(.7), type="l", ylab = "payoff")

## some time later
tau <- 0.5
lines(S, callBSM(S,X,tau,r,q,vol), col = grey(.5), type="l")

## expiry
tau <- 0
lines(S, callBSM(S,X,tau,r,q,vol), col = grey(.3), type="l")


##
... or you may want to have a look at
http://dirk.eddelbuettel.com/code/rquantlib.html

Regards,
Enrico



>
> Thanks a lot,
> with kind regards,
> Uwe
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>

-- 
Enrico Schumann
Lucerne, Switzerland
http://nmof.net/


From momop540 at yahoo.com  Sun Nov 27 02:45:23 2011
From: momop540 at yahoo.com (Momop Momop)
Date: Sat, 26 Nov 2011 17:45:23 -0800 (PST)
Subject: [R-SIG-Finance] Random Forest Classifiers
Message-ID: <1322358323.10162.YahooMailNeo@web44701.mail.sp1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111126/8f4d6d57/attachment.pl>

From momop540 at yahoo.com  Sun Nov 27 02:52:05 2011
From: momop540 at yahoo.com (Momop Momop)
Date: Sat, 26 Nov 2011 17:52:05 -0800 (PST)
Subject: [R-SIG-Finance] Random Forest Classifiers
In-Reply-To: <1322358323.10162.YahooMailNeo@web44701.mail.sp1.yahoo.com>
References: <1322358323.10162.YahooMailNeo@web44701.mail.sp1.yahoo.com>
Message-ID: <1322358725.64593.YahooMailNeo@web44715.mail.sp1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111126/e6ea6f46/attachment.pl>

From zach.mayer at gmail.com  Sun Nov 27 03:02:21 2011
From: zach.mayer at gmail.com (Zachary Mayer)
Date: Sat, 26 Nov 2011 21:02:21 -0500
Subject: [R-SIG-Finance] Random Forest Classifiers
In-Reply-To: <1322358725.64593.YahooMailNeo@web44715.mail.sp1.yahoo.com>
References: <1322358323.10162.YahooMailNeo@web44701.mail.sp1.yahoo.com>
	<1322358725.64593.YahooMailNeo@web44715.mail.sp1.yahoo.com>
Message-ID: <-8508045515486451536@unknownmsgid>

Whatever you do, be sure to cross-validate it!

Sent from my iPhone

On Nov 26, 2011, at 8:52 PM, Momop Momop <momop540 at yahoo.com> wrote:

>
> Apologies as the? mail got sent before completion. Here's the full text
> ?
> I am learning Random Forest and have a basic training question. For my problem, I "derived" various classifiers (var0,var1...var9). They are independent, but the intrinsic values from which they are derived overlap. I get the following data for my RF tree. The question I have is, should I eliminate the number of classifiers that haven't shown enough importance (For example, I could scale %IncMSE relatively and may be just pick the top 3 or 4).
>
> -------------------------------
> %IncMSE    IncNodePurity
> Var0    10.84632    7.232559
> var1    24.53021    7.976509
> var2    26.5005    4.653162
> var3    60.18863    21.882258
> var4    11.97568    7.25413
> var5    49.63468    16.968472
> var6    19.55981    10.009517
> var7    10.36669    13.136694
> var8    14.16585    7.818673
> var9    9.75812    7.178831
> -------------------------------
>
> Essentially, what I was attempting to do was to choose the best derived classifier by eliminating some from the above list which doesn't show noticeable relative impact on MSE. Any guidance or pointers is much appreciated. Thanks!
>
>
> ________________________________
>
> To: "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
> Sent: Saturday, November 26, 2011 5:45 PM
> Subject: [R-SIG-Finance] Random Forest Classifiers
>
> I am learning Random Forest and have a basic training question. For my problem, I "derived" various classifiers (var0,var1...var9). They are independent, but the intrinsic values from which they are derived overlap. I get the following data for my RF tree. The question I have is, should I eliminate the number of classifiers that haven't shown enough importance (For example, I could scale %IncMSE relatively and may be just pick the top 3 or 4).
>
> -------------------------------
> %IncMSE??? IncNodePurity
> Var0??? 10.84632??? 7.232559
> var1??? 24.53021??? 7.976509
> var2??? 26.5005??? 4.653162
> var3??? 60.18863??? 21.882258
> var4??? 11.97568??? 7.25413
> var5??? 49.63468??? 16.968472
> var6??? 19.55981??? 10.009517
> var7??? 10.36669??? 13.136694
> var8??? 14.16585??? 7.818673
> var9??? 9.75812??? 7.178831
> -------------------------------
>
> [[elided Yahoo spam]]
> ??? [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>    [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From chris.is.fun at gmail.com  Sun Nov 27 03:42:06 2011
From: chris.is.fun at gmail.com (Chris Waggoner)
Date: Sat, 26 Nov 2011 19:42:06 -0700
Subject: [R-SIG-Finance] Random Forest Classifiers
In-Reply-To: <1322358725.64593.YahooMailNeo@web44715.mail.sp1.yahoo.com>
References: <1322358323.10162.YahooMailNeo@web44701.mail.sp1.yahoo.com>
	<1322358725.64593.YahooMailNeo@web44715.mail.sp1.yahoo.com>
Message-ID: <CADFr+DUvqC3fqXAAYaw_ds65Fy51Vu1VWeKu7RwNaqbgHLXy=A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111126/74e788a2/attachment.pl>

From jeffrey.ryan at lemnica.com  Sun Nov 27 04:02:07 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Sat, 26 Nov 2011 21:02:07 -0600
Subject: [R-SIG-Finance] Random Forest Classifiers
In-Reply-To: <CADFr+DUvqC3fqXAAYaw_ds65Fy51Vu1VWeKu7RwNaqbgHLXy=A@mail.gmail.com>
References: <1322358323.10162.YahooMailNeo@web44701.mail.sp1.yahoo.com>
	<1322358725.64593.YahooMailNeo@web44715.mail.sp1.yahoo.com>
	<CADFr+DUvqC3fqXAAYaw_ds65Fy51Vu1VWeKu7RwNaqbgHLXy=A@mail.gmail.com>
Message-ID: <CABDUZc-RbYJt-1eOvqmm_rU1ADZuwscL7RfOT2z_jmsaGG5L+w@mail.gmail.com>

This isn't related to finance.  Part of the reason for separate lists
is to keep the noise to a minimum, as well as direct to where answers
may be best found.

Thanks,
Jeff

On Sat, Nov 26, 2011 at 8:42 PM, Chris Waggoner <chris.is.fun at gmail.com> wrote:
> Momop, I think that would warp the robustness of RF. As I understand it, RF
> averages together the different leaves which are themselves averages.
> Pruning like you're talking about would risk overfitting to your particular
> dataset rather than the data-generating process.
>
> On Sat, Nov 26, 2011 at 6:52 PM, Momop Momop <momop540 at yahoo.com> wrote:
>
>>
>> Apologies as the ?mail got sent before completion. Here's the full text
>>
>> I am learning Random Forest and have a basic training question. For my
>> problem, I "derived" various classifiers (var0,var1...var9). They are
>> independent, but the intrinsic values from which they are derived overlap.
>> I get the following data for my RF tree. The question I have is, should I
>> eliminate the number of classifiers that haven't shown enough importance
>> (For example, I could scale %IncMSE relatively and may be just pick the top
>> 3 or 4).
>>
>> -------------------------------
>> %IncMSE ? ?IncNodePurity
>> Var0 ? ?10.84632 ? ?7.232559
>> var1 ? ?24.53021 ? ?7.976509
>> var2 ? ?26.5005 ? ?4.653162
>> var3 ? ?60.18863 ? ?21.882258
>> var4 ? ?11.97568 ? ?7.25413
>> var5 ? ?49.63468 ? ?16.968472
>> var6 ? ?19.55981 ? ?10.009517
>> var7 ? ?10.36669 ? ?13.136694
>> var8 ? ?14.16585 ? ?7.818673
>> var9 ? ?9.75812 ? ?7.178831
>> -------------------------------
>>
>> Essentially, what I was attempting to do was to choose the best derived
>> classifier by eliminating some from the above list which doesn't show
>> noticeable relative impact on MSE. Any guidance or pointers is much
>> appreciated. Thanks!
>>
>>
>> ________________________________
>>
>> To: "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
>> Sent: Saturday, November 26, 2011 5:45 PM
>> Subject: [R-SIG-Finance] Random Forest Classifiers
>>
>> I am learning Random Forest and have a basic training question. For my
>> problem, I "derived" various classifiers (var0,var1...var9). They are
>> independent, but the intrinsic values from which they are derived overlap.
>> I get the following data for my RF tree. The question I have is, should I
>> eliminate the number of classifiers that haven't shown enough importance
>> (For example, I could scale %IncMSE relatively and may be just pick the top
>> 3 or 4).
>>
>> -------------------------------
>> %IncMSE ? ?IncNodePurity
>> Var0 ? ?10.84632 ? ?7.232559
>> var1 ? ?24.53021 ? ?7.976509
>> var2 ? ?26.5005 ? ?4.653162
>> var3 ? ?60.18863 ? ?21.882258
>> var4 ? ?11.97568 ? ?7.25413
>> var5 ? ?49.63468 ? ?16.968472
>> var6 ? ?19.55981 ? ?10.009517
>> var7 ? ?10.36669 ? ?13.136694
>> var8 ? ?14.16585 ? ?7.818673
>> var9 ? ?9.75812 ? ?7.178831
>> -------------------------------
>>
>> [[elided Yahoo spam]]
>> ? ? [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>> ? ? ? ? [[alternative HTML version deleted]]
>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From dutt.debashis at gmail.com  Sun Nov 27 10:06:09 2011
From: dutt.debashis at gmail.com (debashis dutta)
Date: Sun, 27 Nov 2011 14:36:09 +0530
Subject: [R-SIG-Finance] correlation matrix
Message-ID: <CANwdwkQ-o5A2k_yZuXEf0c2r4xiGkF34UkbrCBdKL9D+BcAYRw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111127/f09973dd/attachment.pl>

From patrick at burns-stat.com  Sun Nov 27 10:08:36 2011
From: patrick at burns-stat.com (Patrick Burns)
Date: Sun, 27 Nov 2011 09:08:36 +0000
Subject: [R-SIG-Finance] correlation matrix
In-Reply-To: <CANwdwkQ-o5A2k_yZuXEf0c2r4xiGkF34UkbrCBdKL9D+BcAYRw@mail.gmail.com>
References: <CANwdwkQ-o5A2k_yZuXEf0c2r4xiGkF34UkbrCBdKL9D+BcAYRw@mail.gmail.com>
Message-ID: <4ED1FE14.3050203@burns-stat.com>

Can you be more specific about what the
problem is, and perhaps tell us what
you've tried that is unsatisfactory?

On 27/11/2011 09:06, debashis dutta wrote:
> Hi,
>
> I am generating correlation matrix between macro variables of interest
> rates and forex rates. Is there any package in R that assists it? Any
> assistance is highly solicited.
>
> Best regards
> Debashis
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From dutt.debashis at gmail.com  Sun Nov 27 10:13:56 2011
From: dutt.debashis at gmail.com (debashis dutta)
Date: Sun, 27 Nov 2011 14:43:56 +0530
Subject: [R-SIG-Finance] correlation matrix
In-Reply-To: <4ED1FE14.3050203@burns-stat.com>
References: <CANwdwkQ-o5A2k_yZuXEf0c2r4xiGkF34UkbrCBdKL9D+BcAYRw@mail.gmail.com>
	<4ED1FE14.3050203@burns-stat.com>
Message-ID: <CANwdwkRxfdYDDqhKOKXA6Dr-=-BMfFZphscDXMW=Ddi9rT6rSg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111127/a735eafc/attachment.pl>

From arun.kumar.saha at gmail.com  Sun Nov 27 10:52:44 2011
From: arun.kumar.saha at gmail.com (Arun.stat)
Date: Sun, 27 Nov 2011 01:52:44 -0800 (PST)
Subject: [R-SIG-Finance] correlation matrix
In-Reply-To: <CANwdwkRxfdYDDqhKOKXA6Dr-=-BMfFZphscDXMW=Ddi9rT6rSg@mail.gmail.com>
References: <CANwdwkQ-o5A2k_yZuXEf0c2r4xiGkF34UkbrCBdKL9D+BcAYRw@mail.gmail.com>
	<4ED1FE14.3050203@burns-stat.com>
	<CANwdwkRxfdYDDqhKOKXA6Dr-=-BMfFZphscDXMW=Ddi9rT6rSg@mail.gmail.com>
Message-ID: <1322387564147-4112158.post@n4.nabble.com>

Hi Debashis, I dont think there is any direct implementation in R for that.
What you need is to have a PD matrix for the underlying VCV matrix, which is
not the case for yours. Do you have lot of missing data? May be you can try
with constructing VCV matrix after considering pairwise variables and then
tweak the eigen value little bit to make your estimated VCV matrix PD.

One algorithm for that may be like (if your estimated matrix is NND):

Mod_VCV = Original_VCV + (Identity_Mat(n) - Original_VCV)*(Lambda/(1-Lambda)
+ a_very_small_positive_number)

Lambda is the smallest eigen value for you estimated VCV matrix.

HTH,

Thanks and regards,
_____________________________________________________

Arun Kumar Saha, FRM
QUANTITATIVE RISK AND HEDGE CONSULTING SPECIALIST
Visit me at: http://in.linkedin.com/in/ArunFRM
_____________________________________________________

--
View this message in context: http://r.789695.n4.nabble.com/correlation-matrix-tp4112075p4112158.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From enricoschumann at yahoo.de  Sun Nov 27 12:13:19 2011
From: enricoschumann at yahoo.de (Enrico Schumann)
Date: Sun, 27 Nov 2011 12:13:19 +0100
Subject: [R-SIG-Finance] correlation matrix
In-Reply-To: <1322387564147-4112158.post@n4.nabble.com>
References: <CANwdwkQ-o5A2k_yZuXEf0c2r4xiGkF34UkbrCBdKL9D+BcAYRw@mail.gmail.com>
	<4ED1FE14.3050203@burns-stat.com>
	<CANwdwkRxfdYDDqhKOKXA6Dr-=-BMfFZphscDXMW=Ddi9rT6rSg@mail.gmail.com>
	<1322387564147-4112158.post@n4.nabble.com>
Message-ID: <4ED21B4F.3080900@yahoo.de>



Am 27.11.2011 10:52, schrieb Arun.stat:
> Hi Debashis, I dont think there is any direct implementation in R for that.

Just for the record: see for example function 'nearPD' in package 
Matrix, or 'repairMatrix' in package NMOF.

> What you need is to have a PD matrix for the underlying VCV matrix, which is
> not the case for yours. Do you have lot of missing data? May be you can try
> with constructing VCV matrix after considering pairwise variables and then
> tweak the eigen value little bit to make your estimated VCV matrix PD.
>
> One algorithm for that may be like (if your estimated matrix is NND):
>
> Mod_VCV = Original_VCV + (Identity_Mat(n) - Original_VCV)*(Lambda/(1-Lambda)
> + a_very_small_positive_number)
>
> Lambda is the smallest eigen value for you estimated VCV matrix.
>
> HTH,
>
> Thanks and regards,
> _____________________________________________________
>
> Arun Kumar Saha, FRM
> QUANTITATIVE RISK AND HEDGE CONSULTING SPECIALIST
> Visit me at: http://in.linkedin.com/in/ArunFRM
> _____________________________________________________
>
> --
> View this message in context: http://r.789695.n4.nabble.com/correlation-matrix-tp4112075p4112158.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>

-- 
Enrico Schumann
Lucerne, Switzerland
http://nmof.net/


From arun.kumar.saha at gmail.com  Sun Nov 27 12:22:13 2011
From: arun.kumar.saha at gmail.com (Arun Kumar Saha)
Date: Sun, 27 Nov 2011 17:07:13 +0545
Subject: [R-SIG-Finance] correlation matrix
In-Reply-To: <4ED21B4F.3080900@yahoo.de>
References: <CANwdwkQ-o5A2k_yZuXEf0c2r4xiGkF34UkbrCBdKL9D+BcAYRw@mail.gmail.com>
	<4ED1FE14.3050203@burns-stat.com>
	<CANwdwkRxfdYDDqhKOKXA6Dr-=-BMfFZphscDXMW=Ddi9rT6rSg@mail.gmail.com>
	<1322387564147-4112158.post@n4.nabble.com> <4ED21B4F.3080900@yahoo.de>
Message-ID: <CAPVuaOcBooG4kiWSUmK2YZyWsNxU2JVuaTb7KCM+WfcOVnS=LQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111127/07c86f0d/attachment.pl>

From dutt.debashis at gmail.com  Sun Nov 27 12:36:03 2011
From: dutt.debashis at gmail.com (debashis dutta)
Date: Sun, 27 Nov 2011 17:06:03 +0530
Subject: [R-SIG-Finance] correlation matrix
In-Reply-To: <CAPVuaOcBooG4kiWSUmK2YZyWsNxU2JVuaTb7KCM+WfcOVnS=LQ@mail.gmail.com>
References: <CANwdwkQ-o5A2k_yZuXEf0c2r4xiGkF34UkbrCBdKL9D+BcAYRw@mail.gmail.com>
	<4ED1FE14.3050203@burns-stat.com>
	<CANwdwkRxfdYDDqhKOKXA6Dr-=-BMfFZphscDXMW=Ddi9rT6rSg@mail.gmail.com>
	<1322387564147-4112158.post@n4.nabble.com>
	<4ED21B4F.3080900@yahoo.de>
	<CAPVuaOcBooG4kiWSUmK2YZyWsNxU2JVuaTb7KCM+WfcOVnS=LQ@mail.gmail.com>
Message-ID: <CANwdwkRcZSR19i_HQVj8Z=GXesG6kz7KUPff+NPb5HwZ6JtFww@mail.gmail.com>

Dear Enrico & Arun,

Thanks for the help. I will try for the same.

Best regards
Debashis

On 27/11/2011, Arun Kumar Saha <arun.kumar.saha at gmail.com> wrote:
> Thanks Enrico for your pointer. I was not aware of them!
>
> Thanks and regards,
> _____________________________________________________
>
> Arun Kumar Saha, FRM
> QUANTITATIVE RISK AND HEDGE CONSULTING SPECIALIST
> Visit me at: http://in.linkedin.com/in/ArunFRM
> _____________________________________________________
>
>
> On Sun, Nov 27, 2011 at 4:58 PM, Enrico Schumann
> <enricoschumann at yahoo.de>wrote:
>
>>
>>
>> Am 27.11.2011 10:52, schrieb Arun.stat:
>>
>>> Hi Debashis, I dont think there is any direct implementation in R for
>>> that.
>>>
>>
>> Just for the record: see for example function 'nearPD' in package Matrix,
>> or 'repairMatrix' in package NMOF.
>>
>>  What you need is to have a PD matrix for the underlying VCV matrix, which
>>> is
>>> not the case for yours. Do you have lot of missing data? May be you can
>>> try
>>> with constructing VCV matrix after considering pairwise variables and
>>> then
>>> tweak the eigen value little bit to make your estimated VCV matrix PD.
>>>
>>> One algorithm for that may be like (if your estimated matrix is NND):
>>>
>>> Mod_VCV = Original_VCV + (Identity_Mat(n) - Original_VCV)*(Lambda/(1-**
>>> Lambda)
>>> + a_very_small_positive_number)
>>>
>>> Lambda is the smallest eigen value for you estimated VCV matrix.
>>>
>>> HTH,
>>>
>>> Thanks and regards,
>>> ______________________________**_______________________
>>>
>>> Arun Kumar Saha, FRM
>>> QUANTITATIVE RISK AND HEDGE CONSULTING SPECIALIST
>>> Visit me at:
>>> http://in.linkedin.com/in/**ArunFRM<http://in.linkedin.com/in/ArunFRM>
>>> ______________________________**_______________________
>>>
>>> --
>>> View this message in context: http://r.789695.n4.nabble.com/**
>>> correlation-matrix-**tp4112075p4112158.html<http://r.789695.n4.nabble.com/correlation-matrix-tp4112075p4112158.html>
>>> Sent from the Rmetrics mailing list archive at Nabble.com.
>>>
>>> ______________________________**_________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/**listinfo/r-sig-finance<https://stat.ethz.ch/mailman/listinfo/r-sig-finance>
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>>>
>> --
>> Enrico Schumann
>> Lucerne, Switzerland
>> http://nmof.net/
>>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


-- 
Dr. Debashis Dutta
Risk Managment Professional


From linusholtermann at gmx.de  Sun Nov 27 13:43:35 2011
From: linusholtermann at gmx.de (Lin23)
Date: Sun, 27 Nov 2011 04:43:35 -0800 (PST)
Subject: [R-SIG-Finance] Need help with my Code for complex GARCH (GJR-GARCH)
Message-ID: <1322397815114-4112387.post@n4.nabble.com>

Hello,

i want to estimate a complex GARCH-model (see below). 
http://r.789695.n4.nabble.com/file/n4112387/GJR_Garch.png 
W stands for the Day of the Week Dummies. r stands for returns of stock
market indices. I stands for the GJR-term.
 I need some help with three problems:
1.) implementation of the GJR-term in the variance equation
2.) compute robust covariance matrix (Bollerslev/Wooldbridge,1992) for
robust standard errors
3.) extract the residuals amd volatility of my estimation

First of all my GARCH-Code:

garch2<-function(par,x,Di,Mi,Do,Fr,y,z,d){
   x<<-ts(x)
    y<<-ts(y)
    z<<-ts(z)
    Di <<-ts(Di)
    Mi<<-ts(Mi)
    Do<<-ts(Do)
    Fr<<-ts(Fr)

    n<-length(x)
    
    a <-par[1]
    di <- par[2]
    mi <- par[3]
    do <- par[4]
    fr <- par[5]
    b1 <- par[6]
   b2 <- par[7]
    b3 <- par[8]
    b4 <- par[9]
    dum <- par[10]
    alpha0<-par[11]
    alpha<-par[12]
    beta<-par[13]

    res<-array(length(x))
    hh<-array(length(x))
    ll <-numeric(length(x))

    res[1] <- x[1]-a
    for (i in 2:n){
   
res[i]<-x[i]-a-di*Di[i]-mi*Mi[i]-do*Do[i]-fr*Fr[i]-b1*y[i]-b2*z[i-1]-b3*x[i-1]-b4*d[i]*x[i-1]  
#MEan Equation
    }
    res<-ts(res)
    hh[1]<-var(res)
    for (i in 2:n){
    hh[i]<-(alpha0+alpha*res[i-1]^2+beta*(hh[i-1]-alpha0))*(1+dum*d[i])    
#Variance Equation
     ll[i] <- -1/2*log(2*pi*hh[i]) - 1/2*res[i]^2/hh[i]                                  
# LogLikelihood 
    }
    hh<-ts(hh)
    h<-sqrt(abs(hh))
    ll <- sum(ll[i])
    
     }
 
x <- dat2$r_csi
    
 Mean = mean(x); Var = var(x); S = 1e-6
    param = c(reg$coef, dum = 0, alpha0 = 0.1*Var,alpha = 0.1, beta = 0.8)   
# start values 
    lowerB = c(a = -10*abs(Mean),di = S-1, mi = S-1, do = S-1, fr = S-1, b1
= S-1, b2 = S-1, b3= S-1, b4= S-1, dum = S-1, alpha0 = S^2, alpha = S, beta
= S)
    upperB = c(a = 10*abs(Mean), di = 1-S, mi = 1-S, do = 1-S, fr =1-S, b1 =
1-S, b2 = 1-S,b3 = 1-S, b4 = 1-S, dum = 1-S, alpha0 = 100*Var, alpha = 1-S,
beta = 1-S)
 
     fitt<-maxLik(start=param, logLik=garch2,method="BHHH",
x=dat2$r_csi,Di=dat2$Di,Mi=dat2$Mi,Do=dat2$Do,Fr=dat2$Fr,y=dat2$r_t,z=dat2$r_sp,d=dat2$f)


Note that optim always breaks down: finite-infinite error message 
nlminb and the BFGS and BHHH algorithmus from the maxLik-package work fine.
The estimated coefficients are similiar to those of the EVIEWS Estimation.
So I guess, they are correct. 
Is my Implementation of the  Dummy-Variabel in the VAriance-Equation
correct?

I failed to incorporate the GJR-term in the VAriance Equation. I tried to
modify the Variance Equation:
     I[1]=0
    for(i in 2:n) {
     I[i] <- if (res[i-1]<0){I[i] = 1}else{if(res[i-1]>=0){I[i] = 0}}
      }
      I<-ts(I)
     
      hh[1]<-alpha0
     for (i in 2:n){
    
hh[i]<-alpha0+alpha*res[i-1]^2+beta*(hh[i-1]-alpha0)+gjr*I[i]*res[i-1]^2

The estimation results are different from those that EVIEWS suggested. So I
think I did something wrong here.

2.) Compute robust covariance (Bollerslev/Wooldbridge,1992). I need robust
standard errors, because the real innovations in my data are not normally
distributed. Is there a way to control for this aspect other than the robust
covariance from Bollerslev/Wooldbridge? 

V = H^(-1) G' G H^(-1),

where V denotes the variance-covariance matrix, H stands for the Hessian and
G represents the matrix of contributions to the gradient, the elements of
which are defined as

G_{t,i} = derivative of l_{t} w.r.t. zeta_{i},

where l_{t} is the log likelihood of the t-th observation and zeta_{i} is
the i-th estimated parameter.

Thats a way to compute the robust covariance matrix. But how to I do this i
R??? Only the maxLik-package reports the Hessian-matrix, but not the
gradient.
When using nlminb for optimization I dont know how to extract the gradient
and hessian.

3.) How can I extract the residuals of my GARCH-model and the
volatility(hh)? So that I can plot them or do a Box-test.


I hope someone can help me. That would be awesome. Thanks in advance.
Lin23


--
View this message in context: http://r.789695.n4.nabble.com/Need-help-with-my-Code-for-complex-GARCH-GJR-GARCH-tp4112387p4112387.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Sun Nov 27 14:28:44 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 27 Nov 2011 07:28:44 -0600
Subject: [R-SIG-Finance] Need help with my Code for complex GARCH
 (GJR-GARCH)
In-Reply-To: <1322397815114-4112387.post@n4.nabble.com>
References: <1322397815114-4112387.post@n4.nabble.com>
Message-ID: <1322400524.2266.6.camel@brian-desktop>

On Sun, 2011-11-27 at 04:43 -0800, Lin23 wrote:
> i want to estimate a complex GARCH-model (see below). 
> http://r.789695.n4.nabble.com/file/n4112387/GJR_Garch.png  

Is there a reason that the GJR GARCH functionality in the fGarch or
rgarch packages doesn't fit your requirements?

Don't you think it might be faster to start with the code in one of
those packages and extend it, rather than starting from scratch?

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From brian at braverock.com  Sun Nov 27 16:42:44 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 27 Nov 2011 09:42:44 -0600
Subject: [R-SIG-Finance] Need help with my Code for complex GARCH
 (GJR-GARCH)
In-Reply-To: <20111127150256.254740@gmx.net>
References: <1322397815114-4112387.post@n4.nabble.com>
	<1322400524.2266.6.camel@brian-desktop> <20111127150256.254740@gmx.net>
Message-ID: <1322408564.7734.11.camel@brian-desktop>

<on-list so others can benefit>

On Sun, 2011-11-27 at 16:02 +0100, linus holtermann wrote:
> Hello,
> 
> thats a good idea. 

> how can I extract the R source code of GJR in the fGarch or rugarch-package?

Why do you feel that you should start with the source rather than the
package documentation and examples. fGarch supports many GARCH
methodologies, including GJR Garch, and rgarch has extensive
documentation and examples for all of its methods.  Please avail
yourself first of the documentation provided by the package authors.
 
As with any R function, the source code is of course available.
 
You can simply type the name of the function without parameters to see
the parsed function source.  This will omit any comments the author may
have in the original sources.

Both rgarch and fGarch are hosted on R-Forge, so you could also browse
the source code there.

> Do you know how to compute the robust covariance matrix?
> Thanks

The R package 'sandwich contains multiple methods for computing robust
covariance matrices, and there are other packages that contain various
robust covariance methodologies as well.  You'd need to be more specific
about which method you hope to employ, and perhaps search a bit before
asking for help.


If you post a follow up query to the list, please take the time to use a
publicly available data set and make your example code completely
reproducible.  This will aid others who may be inclined to help you
resolve your issue.

Regards,

  - Brian

> -------- Original-Nachricht --------
> > Von: "Brian G. Peterson" <brian at braverock.com>
> > An: Lin23 <linusholtermann at gmx.de>
> > CC: r-sig-finance at r-project.org
> > Betreff: Re: [R-SIG-Finance] Need help with my Code for complex GARCH (GJR-GARCH)
> 
> > On Sun, 2011-11-27 at 04:43 -0800, Lin23 wrote:
> > > i want to estimate a complex GARCH-model (see below). 
> > > http://r.789695.n4.nabble.com/file/n4112387/GJR_Garch.png  
> > 
> > Is there a reason that the GJR GARCH functionality in the fGarch or
> > rgarch packages doesn't fit your requirements?
> > 
> > Don't you think it might be faster to start with the code in one of
> > those packages and extend it, rather than starting from scratch?
> > 
> > Regards,
> > 
> >    - Brian
> > 
> > -- 
> > Brian G. Peterson
> > http://braverock.com/brian/
> > Ph: 773-459-4973
> > IM: bgpbraverock
> > 
> 

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From h.stegmann at onlinehome.de  Sun Nov 27 18:40:13 2011
From: h.stegmann at onlinehome.de (Heiko Stegmann)
Date: Sun, 27 Nov 2011 18:40:13 +0100
Subject: [R-SIG-Finance] How to move stoplimit thresholds?
Message-ID: <4ED275FD.9090107@onlinehome.de>

Dear all,

after having placed a stoplimit order in quantstrat, how can its 
threshold be changed later on?

Example: I have placed a market order together with a stoplimit order at 
some threshold. As soon as the trade has moved into the positive by a 
certain amount, I would like to move the stoplimit closer to the entry 
price.

I would be very grateful if somebody could provide an example. Thank you.

Heiko


From brian at braverock.com  Sun Nov 27 19:15:02 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 27 Nov 2011 12:15:02 -0600
Subject: [R-SIG-Finance] How to move stoplimit thresholds?
In-Reply-To: <4ED275FD.9090107@onlinehome.de>
References: <4ED275FD.9090107@onlinehome.de>
Message-ID: <1322417702.7734.12.camel@brian-desktop>

On Sun, 2011-11-27 at 18:40 +0100, Heiko Stegmann wrote:
> Dear all,
> 
> after having placed a stoplimit order in quantstrat, how can its 
> threshold be changed later on?
> 
> Example: I have placed a market order together with a stoplimit order at 
> some threshold. As soon as the trade has moved into the positive by a 
> certain amount, I would like to move the stoplimit closer to the entry 
> price.
> 
> I would be very grateful if somebody could provide an example. Thank you.

It seems like you are describing a 'stoptrailing' order type.


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From h.stegmann at onlinehome.de  Sun Nov 27 19:37:05 2011
From: h.stegmann at onlinehome.de (Heiko Stegmann)
Date: Sun, 27 Nov 2011 19:37:05 +0100
Subject: [R-SIG-Finance] How to move stoplimit thresholds?
In-Reply-To: <1322417702.7734.12.camel@brian-desktop>
References: <4ED275FD.9090107@onlinehome.de>
	<1322417702.7734.12.camel@brian-desktop>
Message-ID: <4ED28351.50300@onlinehome.de>

> It seems like you are describing a 'stoptrailing' order type.

Hello Brian,

well.. I am not sure. There seem to be many different definitions of 
trailing stops. I suppose a stoptrailing order to constantly trail the 
stop as long as the price is moving away from it. What I want to do is 
to trail the stop only once, e.g., when the trade has reached break-even.

The quantstrat documentation on stoptrailing orders is not clear to me 
in this respect. Is moving the stop only once what stoptrailing orders 
in quantstrat are doing?

Heiko


From brian at braverock.com  Sun Nov 27 20:26:47 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 27 Nov 2011 13:26:47 -0600
Subject: [R-SIG-Finance] How to move stoplimit thresholds?
In-Reply-To: <4ED28351.50300@onlinehome.de>
References: <4ED275FD.9090107@onlinehome.de>
	<1322417702.7734.12.camel@brian-desktop> <4ED28351.50300@onlinehome.de>
Message-ID: <1322422007.7734.14.camel@brian-desktop>

On Sun, 2011-11-27 at 19:37 +0100, Heiko Stegmann wrote:
> > It seems like you are describing a 'stoptrailing' order type.
> 
> Hello Brian,
> 
> well.. I am not sure. There seem to be many different definitions of 
> trailing stops. I suppose a stoptrailing order to constantly trail the 
> stop as long as the price is moving away from it. What I want to do is 
> to trail the stop only once, e.g., when the trade has reached break-even.
> 
> The quantstrat documentation on stoptrailing orders is not clear to me 
> in this respect. Is moving the stop only once what stoptrailing orders 
> in quantstrat are doing?

No, it constantly moves the order.

It wasn't clear from your first message that you only wanted to move it
once.

I suppose if I wanted to do that, I would use a crossover signal, and
then add a second (later) stoplimit exit or risk order, replacing the
first.


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From uwe at uwevoelker.de  Sun Nov 27 22:40:22 2011
From: uwe at uwevoelker.de (Uwe Voelker)
Date: Sun, 27 Nov 2011 22:40:22 +0100
Subject: [R-SIG-Finance] options profit/loss graph (beginner question)
In-Reply-To: <4ECF63EC.5060406@yahoo.de>
References: <CAD8TJj2RvDY-VNaCYurHfx7F8ARWBKHB5S5J+Cmvhk4ooHm46A@mail.gmail.com>
	<4ECF63EC.5060406@yahoo.de>
Message-ID: <CAD8TJj06r0bYkF6EE7UY7heihk_Ccn0fO=tk6A16_Q=woOrPOQ@mail.gmail.com>

Hello Enrico,

> Here is a very simple example:

Thanks alot for your example. It was enough to get me starting.

> ... or you may want to have a look at
> http://dirk.eddelbuettel.com/code/rquantlib.html

That's what I did. Quant-lib is better for me than rmetrics, because
it is also available in other programming languages.

This is what I have right now for my ratio spread:

library(RQuantLib)

S         <- 1950:2400
cur_price <- 2150
time_left <- c(20/365, 10/365, 1/365)
vola      <- 0.3

long  <- EuropeanOptionArrays("put", S, 2100, 0, 0.01, time_left, vola)
short <- EuropeanOptionArrays("put", S, 2050, 0, 0.01, time_left, vola)

plot( S, long$value[, 3] - short$value[, 3] - short$value[, 3], col =
grey(.7), type="l", ylab="payoff")
lines(S, long$value[, 2] - short$value[, 2] - short$value[, 2], col =
grey(.5), type="l")
lines(S, long$value[, 1] - short$value[, 1] - short$value[, 1], col =
grey(.3), type="l")

There seems to be a problem with expiration (when the last entry in
time_left is 0), but maybe this is normal. As your code also handled
this case differently.


So, thanks a lot again,
with kind regards,
Uwe


From grgkumar4 at gmail.com  Mon Nov 28 04:12:56 2011
From: grgkumar4 at gmail.com (George Kumar)
Date: Sun, 27 Nov 2011 19:12:56 -0800 (PST)
Subject: [R-SIG-Finance] How to get name of a ticker using Quantmod/R
Message-ID: <1322449976463-4114044.post@n4.nabble.com>

I'd like a way to get name of a stock/fund ticker using quantmod or other R
packages, but so far I have not been able to find one. I tried using
getSymbols etc. Let me know a way to do it. Thanks and sorry if this has
been asked before, if so please point me the link.

Regards.
George

--
View this message in context: http://r.789695.n4.nabble.com/How-to-get-name-of-a-ticker-using-Quantmod-R-tp4114044p4114044.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From grgkumar4 at gmail.com  Mon Nov 28 04:57:40 2011
From: grgkumar4 at gmail.com (George Kumar)
Date: Sun, 27 Nov 2011 19:57:40 -0800 (PST)
Subject: [R-SIG-Finance] How to get name of a ticker using Quantmod/R
In-Reply-To: <1322449976463-4114044.post@n4.nabble.com>
References: <1322449976463-4114044.post@n4.nabble.com>
Message-ID: <1322452660855-4114124.post@n4.nabble.com>

Just to add more information to my original post.

Suppose I have a ticker like CSCO or a mutual fund like AAUTX

I would like to be able to get the full name of the companies using some
R/quantmod package.

For CSCO -- Cisco Systems, Inc.
for AAUTX - Thrivent Large Cap Value A 


Thanks again.
George

--
View this message in context: http://r.789695.n4.nabble.com/How-to-get-name-of-a-ticker-using-Quantmod-R-tp4114044p4114124.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From daniel.cegielka at gmail.com  Mon Nov 28 06:54:47 2011
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Mon, 28 Nov 2011 06:54:47 +0100
Subject: [R-SIG-Finance] How to get name of a ticker using Quantmod/R
In-Reply-To: <1322452660855-4114124.post@n4.nabble.com>
References: <1322449976463-4114044.post@n4.nabble.com>
	<1322452660855-4114124.post@n4.nabble.com>
Message-ID: <CAPLrYEQGrtcGkKo6qEEpGw_KKcevo1jPHcb6JX_BRdPakypNaw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111128/56dac3f0/attachment.pl>

From grgkumar4 at gmail.com  Mon Nov 28 07:13:10 2011
From: grgkumar4 at gmail.com (George Kumar)
Date: Sun, 27 Nov 2011 22:13:10 -0800 (PST)
Subject: [R-SIG-Finance] How to get name of a ticker using Quantmod/R
In-Reply-To: <CAPLrYEQGrtcGkKo6qEEpGw_KKcevo1jPHcb6JX_BRdPakypNaw@mail.gmail.com>
References: <1322449976463-4114044.post@n4.nabble.com>
	<1322452660855-4114124.post@n4.nabble.com>
	<CAPLrYEQGrtcGkKo6qEEpGw_KKcevo1jPHcb6JX_BRdPakypNaw@mail.gmail.com>
Message-ID: <1322460790500-4114295.post@n4.nabble.com>

Thanks Daniel. But my problem is not to hold the full name, but rather a way
to get the mapping for ticker to the full name. I have some webform where
people would enter tickers, and I'd like to go fetch them the full name for
the entity the ticker represents, be it a company or a fund or something
else.

Best Regards.
George.

--
View this message in context: http://r.789695.n4.nabble.com/How-to-get-name-of-a-ticker-using-Quantmod-R-tp4114044p4114295.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From daniel.cegielka at gmail.com  Mon Nov 28 07:38:49 2011
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Mon, 28 Nov 2011 07:38:49 +0100
Subject: [R-SIG-Finance] How to get name of a ticker using Quantmod/R
In-Reply-To: <1322460790500-4114295.post@n4.nabble.com>
References: <1322449976463-4114044.post@n4.nabble.com>
	<1322452660855-4114124.post@n4.nabble.com>
	<CAPLrYEQGrtcGkKo6qEEpGw_KKcevo1jPHcb6JX_BRdPakypNaw@mail.gmail.com>
	<1322460790500-4114295.post@n4.nabble.com>
Message-ID: <CAPLrYERyunF67W19nAGk1oUFv50QBBwSu2T9hQNSmcpRxU7a3A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111128/40ba4a4d/attachment.pl>

From grgkumar4 at gmail.com  Mon Nov 28 09:36:12 2011
From: grgkumar4 at gmail.com (George Kumar)
Date: Mon, 28 Nov 2011 00:36:12 -0800 (PST)
Subject: [R-SIG-Finance] How to get name of a ticker using Quantmod/R
In-Reply-To: <CAPLrYERyunF67W19nAGk1oUFv50QBBwSu2T9hQNSmcpRxU7a3A@mail.gmail.com>
References: <1322449976463-4114044.post@n4.nabble.com>
	<1322452660855-4114124.post@n4.nabble.com>
	<CAPLrYEQGrtcGkKo6qEEpGw_KKcevo1jPHcb6JX_BRdPakypNaw@mail.gmail.com>
	<1322460790500-4114295.post@n4.nabble.com>
	<CAPLrYERyunF67W19nAGk1oUFv50QBBwSu2T9hQNSmcpRxU7a3A@mail.gmail.com>
Message-ID: <1322469372017-4114517.post@n4.nabble.com>

I tried using the following scipt

----------------------------------------
Args <- commandArgs()      # retrieve cmdline args
ticker <- as.character(Args[5])
url =
paste("http://download.finance.yahoo.com/d/quotes.csv?s=",ticker,"&f=n",sep="")
x<- read.table(url)
compname=x[1,]
compname=as.character(compname)
cat("Comp name is ",compname, "\n")

----------------------------------------

cat get_name_from_yahoo.R |  R --vanilla --slave --args FIIAX
Output: FIDELITY ADVISOR

So even this does not give the full name that one sees in yahoo finance web
page - Fidelity Advisor Mid Cap II A 

Thanks a lot for your replies.
George



--
View this message in context: http://r.789695.n4.nabble.com/How-to-get-name-of-a-ticker-using-Quantmod-R-tp4114044p4114517.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jbreit at nexgo.de  Mon Nov 28 15:37:12 2011
From: jbreit at nexgo.de (Joachim Breit)
Date: Mon, 28 Nov 2011 15:37:12 +0100
Subject: [R-SIG-Finance] Option valuation for arbitrary distribution
 using monte carlo simulation
In-Reply-To: <CA+FQezXD8Xf03EdVm8pjeN4SCF14Wv-dx7sX8Psu3wR-aNg4TA@mail.gmail.com>
References: <4ECBA86C.4030604@nexgo.de>
	<1321975833682-4096122.post@n4.nabble.com>
	<A682FFE47602644E9D3DEECDD6F832978363FD@SN2PRD0302MB136.namprd03.prod.outlook.com>
	<4ECCFD36.3050607@nexgo.de>
	<1322064047703-4100184.post@n4.nabble.com>
	<1322135953099-4103558.post@n4.nabble.com>
	<4ECE33D4.7080803@nexgo.de>
	<1322139845476-4103714.post@n4.nabble.com>
	<4ECE6082.6090202@nexgo.de>
	<1322163826.20917.5.camel@brian-desktop>
	<CA+FQezXD8Xf03EdVm8pjeN4SCF14Wv-dx7sX8Psu3wR-aNg4TA@mail.gmail.com>
Message-ID: <4ED39C98.3030300@nexgo.de>

This is the paper:
http://www.realoptions.org/papers1999/WINSTONOptions.PDF

Am 25.11.2011 09:48, schrieb Charles Ward:
> Luenberger discusses the task of creating risk-neutral probabilities
> from any set of observed returns. I cannot find the specific reference
> in his book (Investment Science) but there is a discussion paper by
> Winston (google) that applies his method using Excel and @Risk to a
> sample of Microsoft returns. I think it would be relatively simple to
> program it in R.
>
> Charles Ward
>
> On 24 November 2011 19:43, Brian G. Peterson <brian at braverock.com
> <mailto:brian at braverock.com>> wrote:
>
>     On Thu, 2011-11-24 at 16:19 +0100, Joachim Breit wrote:
>      > Thank you for the interesting link.
>      >
>      > I agree that you can use a (fit of a) stable distribution for
>     sampling
>      > purposes. But please: Why not simply use the raw data and sample from
>      > that? What could be a better starting point? Again, it is clear that
>      > you cannot use the raw return series as it comes off your data feed;
>      > there is a need for adjusting. But there cannot be a better fit
>     to the
>      > raw data than the raw data itself...
>
>     Of course you start with sampling from your data, but if all you do is
>     sample from the data, with no 'noise', then all you are doing is
>     smoothing out the prior observations.  This may lead you to a false
>     sense of security, and give you an incorrect idea of how likely a fat
>     tailed event is.  So by adding noise from a stable or other fat tailed
>     distribution (skewed Student's T is also popular), you are believing
>     that your prior data is both stationary and fully representative.
>
>     Regards,
>
>       - Brian
>
>     --
>     Brian G. Peterson
>     http://braverock.com/brian/
>     Ph: 773-459-4973
>     IM: bgpbraverock
>
>     _______________________________________________
>     R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org>
>     mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>     -- Subscriber-posting only. If you want to post, subscribe first.
>     -- Also note that this is not the r-help list where general R
>     questions should go.
>
>


From ezivot at u.washington.edu  Mon Nov 28 18:19:37 2011
From: ezivot at u.washington.edu (Eric Zivot)
Date: Mon, 28 Nov 2011 09:19:37 -0800
Subject: [R-SIG-Finance] Upcoming R course: Financial Data Modeling and
	Analysis in R
Message-ID: <003e01ccadf1$eb0ad120$c1207360$@washington.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111128/917c985c/attachment.pl>

From gsee000 at gmail.com  Mon Nov 28 21:15:35 2011
From: gsee000 at gmail.com (G See)
Date: Mon, 28 Nov 2011 14:15:35 -0600
Subject: [R-SIG-Finance] How to get name of a ticker using Quantmod/R
In-Reply-To: <1322469372017-4114517.post@n4.nabble.com>
References: <1322449976463-4114044.post@n4.nabble.com>
	<1322452660855-4114124.post@n4.nabble.com>
	<CAPLrYEQGrtcGkKo6qEEpGw_KKcevo1jPHcb6JX_BRdPakypNaw@mail.gmail.com>
	<1322460790500-4114295.post@n4.nabble.com>
	<CAPLrYERyunF67W19nAGk1oUFv50QBBwSu2T9hQNSmcpRxU7a3A@mail.gmail.com>
	<1322469372017-4114517.post@n4.nabble.com>
Message-ID: <CA+xi=qY1NZGHM-x=nhWYQZ+JZP8kJN4x7FqXMCDJ-Aq0Z3OdfQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111128/646680b4/attachment.pl>

From ezivot at u.washington.edu  Mon Nov 28 21:29:24 2011
From: ezivot at u.washington.edu (Eric Zivot)
Date: Mon, 28 Nov 2011 12:29:24 -0800
Subject: [R-SIG-Finance] Correct link for R course in financial data analysis
Message-ID: <011201ccae0c$6b215950$41640bf0$@washington.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111128/ad4c9b39/attachment.pl>

From lui.r.project at googlemail.com  Tue Nov 29 01:00:07 2011
From: lui.r.project at googlemail.com (Lui ##)
Date: Tue, 29 Nov 2011 01:00:07 +0100
Subject: [R-SIG-Finance] Backtesting / virtual portfolio
Message-ID: <CAPq0RFRgQRWDApqLQ1_eq=vrw45f17oFijq2_62VqF5rmeLiSw@mail.gmail.com>

Dear Group,

after backtesting strategies for a while I am wondering how to
actually "prove" they "kind a work" in a "as realistic as possible"
market environment. Even though I know this is not exactly related to
R - it is just one step further. Do you have any suggestions for
Portfolio Simulations that could be shared with others online - and
enable a real time (or close to real time) portfolio tracking? I came
across www.stocktrak.com but I do not know whether that is the right
thing for me - especially since I am mainly interested in German
Future contracts and $60 per month seem quite expensive...
The actual underlying issue is "building up some credibility" with
respect to the buy/sell suggestions a certain trading strategy may
suggest - I don't think my bank account statement will serve that
purpose... I was looking for something more transparent that could be
incorporated into a website...

Thanks a lot for your suggestions and help - and again my apologies -
its not directly R, but closely linked to the topic... :-)
Lui


From john.laing at gmail.com  Tue Nov 29 01:23:29 2011
From: john.laing at gmail.com (John Laing)
Date: Mon, 28 Nov 2011 19:23:29 -0500
Subject: [R-SIG-Finance] HELP: Problem with RBloomberg blp intraday data
In-Reply-To: <E9DE1D321E5D1841920E8E92938F4AEB0B95BB05@LONEVS1.ac.lp.acml.com>
References: <E9DE1D321E5D1841920E8E92938F4AEB0B95BB05@LONEVS1.ac.lp.acml.com>
Message-ID: <CAA3Wa=t_48RoqOBRVfcXACZuoz8mDsNDFT9KUP=ppFR4=XNiDQ@mail.gmail.com>

Michael,

It is helpful if you provide information about the version of R and
various packages that you are running. The sessionInfo() function is
an excellent way to do that.

The timeout argument to blpConnect was eliminated in early 2010, so I
assume your version of RBloomberg is very old. There are now several
recent threads on this list about how to upgrade and the dependencies
involved. I recommend you read some of these.

In the current RBloomberg what you're trying to do is pretty straightforward:

library(RBloomberg)
conn <- blpConnect()
trades <- bar(conn, "AGS BB Equity", "TRADE", "2011-09-12
08:00:00.000", "2011-09-12 16:30:00.000", "1")

Hope that helps,
John

On Thu, Nov 24, 2011 at 5:45 AM, Benjamin, Michael
<Michael.Benjamin at bernstein.com> wrote:
> Hello
>
> I am trying to download some intraday data, the number of ticks over a time range. ?Packages installed are "package:RBloomberg" and "package:RDCOMClient".
>
> The data request is for the number of ticks over a date range using
>
> conn<-blpConnect(timeout=120000,show.days="week",na.action="na",periodicity="daily")
> blp(conn, "AGS BB EQUITY",fields=c("LAST_PRICE"),start="2011-09-12 08:00",end="2011-09-12 16:30",barsize=510, barfields="NUMBER_TICKS")
>
> which returns the number 3574. ?When passing the argument fields=c("BID") or fields=c("ASK") the number of bid or ask ticks returns <NA>.
>
> blp(conn, "AGS BB EQUITY",fields=c("BID"),start="2011-09-12 08:00",end="2011-09-12 16:30",barsize=510, barfields="NUMBER_TICKS")
> blp(conn, "AGS BB EQUITY",fields=c("ASK"),start="2011-09-12 08:00",end="2011-09-12 16:30",barsize=510, barfields="NUMBER_TICKS")
>
> The issue is this is not consistent behavour with other stocks, for example, for EBS AV EQUITY the BID, ASK LAST_PRICE number of ticks is
> 33800, 33800,2232
>
> Has anyone got any idea why this happens or if there is a way to resolve it?
>
> Best regards
>
> Michael
>
> ............................................................................
>
> Sanford C. Bernstein Limited (registered in England and Wales under company number 3760267) is authorised and regulated in the United Kingdom by the Financial Services Authority. The company has its registered office at 50 Berkeley Street, London W1J 8SB.
>
> Trading instructions sent electronically to Bernstein shall not be deemed accepted until a representative of Bernstein acknowledges receipt electronically or by telephone. Comments in this e-mail transmission and any attachments may form part of a larger body of investment analysis. For our research reports, which contain information that may be used to support investment decisions and disclosures see our website at www.bernsteinresearch.com.
>
> For further important information about AllianceBernstein please click here http://www.alliancebernstein.com/disclaimer/email/disclaimer.html
>
> Please note that as of 7 November, 2011 Sanford C. Bernstein Limited will be located at 50 Berkeley Street, London W1J 8SB.
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From brian at braverock.com  Tue Nov 29 02:58:19 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 28 Nov 2011 19:58:19 -0600
Subject: [R-SIG-Finance] Backtesting / virtual portfolio
In-Reply-To: <CAPq0RFRgQRWDApqLQ1_eq=vrw45f17oFijq2_62VqF5rmeLiSw@mail.gmail.com>
References: <CAPq0RFRgQRWDApqLQ1_eq=vrw45f17oFijq2_62VqF5rmeLiSw@mail.gmail.com>
Message-ID: <1322531899.7734.20.camel@brian-desktop>

On Tue, 2011-11-29 at 01:00 +0100, Lui ## wrote:
> after backtesting strategies for a while I am wondering how to
> actually "prove" they "kind a work" in a "as realistic as possible"
> market environment. Even though I know this is not exactly related to
> R - it is just one step further. Do you have any suggestions for
> Portfolio Simulations that could be shared with others online - and
> enable a real time (or close to real time) portfolio tracking? I came
> across www.stocktrak.com but I do not know whether that is the right
> thing for me - especially since I am mainly interested in German
> Future contracts and $60 per month seem quite expensive...
> The actual underlying issue is "building up some credibility" with
> respect to the buy/sell suggestions a certain trading strategy may
> suggest - I don't think my bank account statement will serve that
> purpose... I was looking for something more transparent that could be
> incorporated into a website...
> 
> Thanks a lot for your suggestions and help - and again my apologies -
> its not directly R, but closely linked to the topic... :-)
> Lui

Definitely not R, but here are a couple thoughts:

Many brokers, including InterActiveBrokers, support paper trading, where
you can trade in real time and keep track of P&L.  If you place
realistic orders (limit orders of reasonable size), then you can assume
that your paper trading, if done in real time, closely mimics your
potential results on a live account during that period.

I suspect that if $60/month is too much to spend for a useful tool, you
need to consider whether you are ready to be a professional trader.  We
spend thousands of dollar per month just on data, and thousands more on
trading infrastructure, for a very small trading operation.

If you are making realistic assumptions and are not planning on making
hundreds of trades per day, you should be able to get more than 90%
correlations between backtests and production in R.

Regards,

   - Brian 
-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From bogaso.christofer at gmail.com  Tue Nov 29 05:18:36 2011
From: bogaso.christofer at gmail.com (Christofer Bogaso)
Date: Tue, 29 Nov 2011 10:03:36 +0545
Subject: [R-SIG-Finance] Backtesting / virtual portfolio
In-Reply-To: <1322531899.7734.20.camel@brian-desktop>
References: <CAPq0RFRgQRWDApqLQ1_eq=vrw45f17oFijq2_62VqF5rmeLiSw@mail.gmail.com>
	<1322531899.7734.20.camel@brian-desktop>
Message-ID: <008a01ccae4d$fb79cc80$f26d6580$@gmail.com>

Sorry for my ignorance............" are not planning on making 
hundreds of trades per day, " why it is so?

Thanks and regards,


-----Original Message-----
From: r-sig-finance-bounces at r-project.org
[mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Brian G. Peterson
Sent: Tuesday, November 29, 2011 7:43 AM
To: Lui ##
Cc: r-sig-finance
Subject: Re: [R-SIG-Finance] Backtesting / virtual portfolio

On Tue, 2011-11-29 at 01:00 +0100, Lui ## wrote:
> after backtesting strategies for a while I am wondering how to 
> actually "prove" they "kind a work" in a "as realistic as possible"
> market environment. Even though I know this is not exactly related to 
> R - it is just one step further. Do you have any suggestions for 
> Portfolio Simulations that could be shared with others online - and 
> enable a real time (or close to real time) portfolio tracking? I came 
> across www.stocktrak.com but I do not know whether that is the right 
> thing for me - especially since I am mainly interested in German 
> Future contracts and $60 per month seem quite expensive...
> The actual underlying issue is "building up some credibility" with 
> respect to the buy/sell suggestions a certain trading strategy may 
> suggest - I don't think my bank account statement will serve that 
> purpose... I was looking for something more transparent that could be 
> incorporated into a website...
> 
> Thanks a lot for your suggestions and help - and again my apologies - 
> its not directly R, but closely linked to the topic... :-) Lui

Definitely not R, but here are a couple thoughts:

Many brokers, including InterActiveBrokers, support paper trading, where you
can trade in real time and keep track of P&L.  If you place realistic orders
(limit orders of reasonable size), then you can assume that your paper
trading, if done in real time, closely mimics your potential results on a
live account during that period.

I suspect that if $60/month is too much to spend for a useful tool, you need
to consider whether you are ready to be a professional trader.  We spend
thousands of dollar per month just on data, and thousands more on trading
infrastructure, for a very small trading operation.

If you are making realistic assumptions and are not planning on making
hundreds of trades per day, you should be able to get more than 90%
correlations between backtests and production in R.

Regards,

   - Brian
--
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.


From markleeds2 at gmail.com  Tue Nov 29 05:34:08 2011
From: markleeds2 at gmail.com (Mark Leeds)
Date: Mon, 28 Nov 2011 23:34:08 -0500
Subject: [R-SIG-Finance] Backtesting / virtual portfolio
In-Reply-To: <008a01ccae4d$fb79cc80$f26d6580$@gmail.com>
References: <CAPq0RFRgQRWDApqLQ1_eq=vrw45f17oFijq2_62VqF5rmeLiSw@mail.gmail.com>
	<1322531899.7734.20.camel@brian-desktop>
	<008a01ccae4d$fb79cc80$f26d6580$@gmail.com>
Message-ID: <CAHz+bWZO-tQrTMSBvuordBdS5zH_tge7whazEoJsHEfqgVLjpA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111128/d79948b0/attachment.pl>

From thomas.chan.sf at boci-pru.com.hk  Tue Nov 29 05:37:57 2011
From: thomas.chan.sf at boci-pru.com.hk (thomas.chan.sf at boci-pru.com.hk)
Date: Tue, 29 Nov 2011 12:37:57 +0800
Subject: [R-SIG-Finance] RBloomberg data download problem
In-Reply-To: <CAA3Wa=t_48RoqOBRVfcXACZuoz8mDsNDFT9KUP=ppFR4=XNiDQ@mail.gmail.com>
References: <E9DE1D321E5D1841920E8E92938F4AEB0B95BB05@LONEVS1.ac.lp.acml.com>
	<CAA3Wa=t_48RoqOBRVfcXACZuoz8mDsNDFT9KUP=ppFR4=XNiDQ@mail.gmail.com>
Message-ID: <OF03D13A71.E40A2A40-ON48257957.0017A300-48257957.00197285@boci-pru.com.hk>

Hello,

I have been using RBloomberg for some time and it seems to be working fine.
A couple weeks ago I used this formula (bdh(conn, "EI779327 Corp",
"YLD_CNV_LAST", "20090629", "")  to download yield  data. I notice that
there were a few NAs in the data and the number of missing observations
were different in two downloads in two different days. I checked it using
Excel API and found that there should not be missing observation at all. I
do it again today and found that there are even more missing observations.
Furthermore, it caused my Excel API connection to break down. It seems that
the RBloomberg connection is giving incomplete data. What is happening?
Suggestions would be greatly appreciated.

I am using R X64 2.14.0.

Tom

---------------------------------------------------------------------------------------

Important : The information contained in this e-mail and any attachment thereof is intended only for use of the addressee and is confidential and may be privileged and/or otherwise protected from disclosure. If you are not the intended recipient, you are hereby notified that any use, copying, dissemination or any other action taken or omitted to be taken in reliance upon this information is strictly prohibited. If you have received this communication in error, please notify the sender immediately by reply and delete this message from your system. Any views expressed in this e-mail are those of the individual sender except where the e-mail states otherwise and the sender is authorized to state them to be the views of BOCI-Prudential Asset Management Limited. Unless otherwise stated, any information given in this e-mail shall not be regarded as an offer, solicitation, invitation, advice or recommendation to buy or sell any investment or securities within or outside Hong Kong SAR. Any reference to the terms of executed transactions should be treated as preliminary only and subject to our formal written confirmation.


______________________________________________________________________
This email has been scanned by the Symantec Email Security.cloud service.
For more information please visit http://www.symanteccloud.com


From thomas.chan.sf at boci-pru.com.hk  Tue Nov 29 05:52:14 2011
From: thomas.chan.sf at boci-pru.com.hk (thomas.chan.sf at boci-pru.com.hk)
Date: Tue, 29 Nov 2011 12:52:14 +0800
Subject: [R-SIG-Finance] RBloomberg data download problem
In-Reply-To: <OF03D13A71.E40A2A40-ON48257957.0017A300-48257957.00197285@boci-pru.com.hk>
References: <E9DE1D321E5D1841920E8E92938F4AEB0B95BB05@LONEVS1.ac.lp.acml.com>	<CAA3Wa=t_48RoqOBRVfcXACZuoz8mDsNDFT9KUP=ppFR4=XNiDQ@mail.gmail.com>
	<OF03D13A71.E40A2A40-ON48257957.0017A300-48257957.00197285@boci-pru.com.hk>
Message-ID: <OF0FD4AB9E.E7F8E7D6-ON48257957.001AA28E-48257957.001AC157@boci-pru.com.hk>

I checked it with Excel API again today and do see the missing data.
Perhaps it is a Bloomberg problem!?


|------------>
| From:      |
|------------>
  >----------------------------------------------------------------------------------------------------------------------------------------|
  |thomas.chan.sf at boci-pru.com.hk                                                                                                          |
  >----------------------------------------------------------------------------------------------------------------------------------------|
|------------>
| To:        |
|------------>
  >----------------------------------------------------------------------------------------------------------------------------------------|
  |r-sig-finance at r-project.org                                                                                                             |
  >----------------------------------------------------------------------------------------------------------------------------------------|
|------------>
| Cc:        |
|------------>
  >----------------------------------------------------------------------------------------------------------------------------------------|
  |r-sig-finance-bounces at r-project.org                                                                                                     |
  >----------------------------------------------------------------------------------------------------------------------------------------|
|------------>
| Date:      |
|------------>
  >----------------------------------------------------------------------------------------------------------------------------------------|
  |29/11/2011 12:38                                                                                                                        |
  >----------------------------------------------------------------------------------------------------------------------------------------|
|------------>
| Subject:   |
|------------>
  >----------------------------------------------------------------------------------------------------------------------------------------|
  |[R-SIG-Finance] RBloomberg data download problem                                                                                        |
  >----------------------------------------------------------------------------------------------------------------------------------------|
|------------>
| Sent by:   |
|------------>
  >----------------------------------------------------------------------------------------------------------------------------------------|
  |r-sig-finance-bounces at r-project.org                                                                                                     |
  >----------------------------------------------------------------------------------------------------------------------------------------|





Hello,

I have been using RBloomberg for some time and it seems to be working fine.
A couple weeks ago I used this formula (bdh(conn, "EI779327 Corp",
"YLD_CNV_LAST", "20090629", "")  to download yield  data. I notice that
there were a few NAs in the data and the number of missing observations
were different in two downloads in two different days. I checked it using
Excel API and found that there should not be missing observation at all. I
do it again today and found that there are even more missing observations.
Furthermore, it caused my Excel API connection to break down. It seems that
the RBloomberg connection is giving incomplete data. What is happening?
Suggestions would be greatly appreciated.

I am using R X64 2.14.0.

Tom

---------------------------------------------------------------------------------------


Important : The information contained in this e-mail and any attachment
thereof is intended only for use of the addressee and is confidential and
may be privileged and/or otherwise protected from disclosure. If you are
not the intended recipient, you are hereby notified that any use, copying,
dissemination or any other action taken or omitted to be taken in reliance
upon this information is strictly prohibited. If you have received this
communication in error, please notify the sender immediately by reply and
delete this message from your system. Any views expressed in this e-mail
are those of the individual sender except where the e-mail states otherwise
and the sender is authorized to state them to be the views of
BOCI-Prudential Asset Management Limited. Unless otherwise stated, any
information given in this e-mail shall not be regarded as an offer,
solicitation, invitation, advice or recommendation to buy or sell any
investment or securities within or outside Hong Kong S!
 AR. Any reference to the terms of executed transactions should be treated
as preliminary only and subject to our formal written confirmation.


______________________________________________________________________
This email has been scanned by the Symantec Email Security.cloud service.
For more information please visit http://www.symanteccloud.com

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.

______________________________________________________________________
This email has been scanned by the Symantec Email Security.cloud service.
For more information please visit http://www.symanteccloud.com
______________________________________________________________________





______________________________________________________________________
This email has been scanned by the Symantec Email Security.cloud service.
For more information please visit http://www.symanteccloud.com


From lui.r.project at googlemail.com  Tue Nov 29 08:23:24 2011
From: lui.r.project at googlemail.com (Lui ##)
Date: Tue, 29 Nov 2011 08:23:24 +0100
Subject: [R-SIG-Finance] Backtesting / virtual portfolio
In-Reply-To: <CAHz+bWZO-tQrTMSBvuordBdS5zH_tge7whazEoJsHEfqgVLjpA@mail.gmail.com>
References: <CAPq0RFRgQRWDApqLQ1_eq=vrw45f17oFijq2_62VqF5rmeLiSw@mail.gmail.com>
	<1322531899.7734.20.camel@brian-desktop>
	<008a01ccae4d$fb79cc80$f26d6580$@gmail.com>
	<CAHz+bWZO-tQrTMSBvuordBdS5zH_tge7whazEoJsHEfqgVLjpA@mail.gmail.com>
Message-ID: <CAPq0RFTwG6UX7O586uMoZs2s23i20t4n7i90u18e7aymTGB3Pw@mail.gmail.com>

Dear Team,

thanks for your replies (despite not having raised a typical R-issue)
- but I guess it is of interest for many :-)
There is no doubt that information is expensive - especially on stock
quotes. However, I would not judge / base the ability of someone only
with respect to the amount of money he spends on real-time data :-)
Just owning an expensive Bloomberg terminal does not help - and a
first step to increase the net return is decrease costs such as
trading costs, etc.

I mean the main problem is: just because I am spending a lot of money
(possibly thousands of Euro)it does not automatically mean, that I am
allowed to share the pricing information publicly or somebody else -
which is the main problem in my case. The next thing is that I do not
want to spend thousands of Euros (or dollars) just to have a "virtual
portfolio" I could share - I mean, honestly, what is the point in
doing so?

I found stocktrak, warketwatch and some others would offer the
benefits for most of my purposes more or less for free - but they
don't offer pricing of futures in German indices. It does add some
more value if you can have a "neutral quotes and trading" platform to
test your strategies - I never really trsuted backtestingstrategies.

So - I am still open for ideas with respect to that :-)
Thanks a lot for all of your help! I really appreciate it! I searched
for that for quite a while - but it seems like there is no possibility
to show "what would happen to a portfolio" in realtime to potentially
interested persons - unless you have a fund or do it with real
money... :-/

I only carry out trades on a day-to-day basis, so no intraday trading...

Lui

On 11/29/11, Mark Leeds <markleeds2 at gmail.com> wrote:
> hi: brian says "not planning on making hundreds of trades per day"  because
> if you're doing hundreds of trades per day, then this means you have
> relatively short term holding periods, probably on the order of minutes.
> so, it's hard to know if you're gonna be able to get in to the trade at the
> time and price you want and out of the trade at the time and price you
> want. ( when you backtest or paper trade, you're seeing either trades or
> quotes and you can't be sure you can DEFINITELY be sure that your trade can
> be
> filled or closed out  at those prices ) and then, since the trades have
> short term holding periods, this ( whether you can get in or can't get in
> or get out or can't get out ) will effect the results a lot.
>
> on the other hand, in a  scenario where you're holding periods are longer,
> it doesn't matter as much what price and time you get in. for example,  if
> you're holding period is say a week or more, then it's probably not going
> to make a heck of a difference whether you get into a trade mid-day or end
> of day or get out mid-day or end of day. so, the paper trading will be more
> realistic in the longer holding period scenario.  I hope that clarifies
> what you didn't understand.
>
>
> mark
>
>
>
>
>
>
> On Mon, Nov 28, 2011 at 11:18 PM, Christofer Bogaso <
> bogaso.christofer at gmail.com> wrote:
>
>> Sorry for my ignorance............" are not planning on making
>> hundreds of trades per day, " why it is so?
>>
>> Thanks and regards,
>>
>>
>> -----Original Message-----
>> From: r-sig-finance-bounces at r-project.org
>> [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Brian G.
>> Peterson
>> Sent: Tuesday, November 29, 2011 7:43 AM
>> To: Lui ##
>> Cc: r-sig-finance
>> Subject: Re: [R-SIG-Finance] Backtesting / virtual portfolio
>>
>> On Tue, 2011-11-29 at 01:00 +0100, Lui ## wrote:
>> > after backtesting strategies for a while I am wondering how to
>> > actually "prove" they "kind a work" in a "as realistic as possible"
>> > market environment. Even though I know this is not exactly related to
>> > R - it is just one step further. Do you have any suggestions for
>> > Portfolio Simulations that could be shared with others online - and
>> > enable a real time (or close to real time) portfolio tracking? I came
>> > across www.stocktrak.com but I do not know whether that is the right
>> > thing for me - especially since I am mainly interested in German
>> > Future contracts and $60 per month seem quite expensive...
>> > The actual underlying issue is "building up some credibility" with
>> > respect to the buy/sell suggestions a certain trading strategy may
>> > suggest - I don't think my bank account statement will serve that
>> > purpose... I was looking for something more transparent that could be
>> > incorporated into a website...
>> >
>> > Thanks a lot for your suggestions and help - and again my apologies -
>> > its not directly R, but closely linked to the topic... :-) Lui
>>
>> Definitely not R, but here are a couple thoughts:
>>
>> Many brokers, including InterActiveBrokers, support paper trading, where
>> you
>> can trade in real time and keep track of P&L.  If you place realistic
>> orders
>> (limit orders of reasonable size), then you can assume that your paper
>> trading, if done in real time, closely mimics your potential results on a
>> live account during that period.
>>
>> I suspect that if $60/month is too much to spend for a useful tool, you
>> need
>> to consider whether you are ready to be a professional trader.  We spend
>> thousands of dollar per month just on data, and thousands more on trading
>> infrastructure, for a very small trading operation.
>>
>> If you are making realistic assumptions and are not planning on making
>> hundreds of trades per day, you should be able to get more than 90%
>> correlations between backtests and production in R.
>>
>> Regards,
>>
>>   - Brian
>> --
>> Brian G. Peterson
>> http://braverock.com/brian/
>> Ph: 773-459-4973
>> IM: bgpbraverock
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>


From Michael.Benjamin at bernstein.com  Tue Nov 29 13:11:39 2011
From: Michael.Benjamin at bernstein.com (Benjamin, Michael)
Date: Tue, 29 Nov 2011 12:11:39 -0000
Subject: [R-SIG-Finance] HELP: Problem with RBloomberg blp intraday data
In-Reply-To: <CAA3Wa=t_48RoqOBRVfcXACZuoz8mDsNDFT9KUP=ppFR4=XNiDQ@mail.gmail.com>
References: <E9DE1D321E5D1841920E8E92938F4AEB0B95BB05@LONEVS1.ac.lp.acml.com>
	<CAA3Wa=t_48RoqOBRVfcXACZuoz8mDsNDFT9KUP=ppFR4=XNiDQ@mail.gmail.com>
Message-ID: <E9DE1D321E5D1841920E8E92938F4AEB0B95C265@LONEVS1.ac.lp.acml.com>

John

Thanks for looking into this for me.   

Details of what I am using is as follows:

============================================================
> sessionInfo()
R version 2.10.1 (2009-12-14) 
i386-pc-mingw32 

locale:
[1] LC_COLLATE=English_United Kingdom.1252 
[2] LC_CTYPE=English_United Kingdom.1252   
[3] LC_MONETARY=English_United Kingdom.1252
[4] LC_NUMERIC=C                           
[5] LC_TIME=English_United Kingdom.1252    

attached base packages:
[1] grDevices datasets  stats     utils     graphics  methods   base     

other attached packages:
 [1] RBloomberg_0.2-98                        
 [3]                                   
 [5]              
 [7]                                            
 [9]                                 
[11]           

============================================================


I agree that what is being processed is pretty straightforward which is why it is strange that it works for some data and not for others despite using an old version of RBloomberg.  I will update my RBloomber soon, but out of curiosity, as the issue is not the "TRADE" ticks being returned over a time range (which works OK for me) but the "number of ticks" for bid or ask prices.  

Do you have any issues if you 

 increase the barsize to 510 

and 

request the total number of ticks for bid, ask and trade ticks for the same stock over the same time period?


Best regards

Michael



-----Original Message-----
From: John Laing [mailto:john.laing at gmail.com] 
Sent: 29 November 2011 00:23
To: Benjamin, Michael
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] HELP: Problem with RBloomberg blp intraday data

Michael,

It is helpful if you provide information about the version of R and
various packages that you are running. The sessionInfo() function is
an excellent way to do that.

The timeout argument to blpConnect was eliminated in early 2010, so I
assume your version of RBloomberg is very old. There are now several
recent threads on this list about how to upgrade and the dependencies
involved. I recommend you read some of these.

In the current RBloomberg what you're trying to do is pretty straightforward:

library(RBloomberg)
conn <- blpConnect()
trades <- bar(conn, "AGS BB Equity", "TRADE", "2011-09-12
08:00:00.000", "2011-09-12 16:30:00.000", "1")

Hope that helps,
John

On Thu, Nov 24, 2011 at 5:45 AM, Benjamin, Michael
<Michael.Benjamin at bernstein.com> wrote:
> Hello
>
> I am trying to download some intraday data, the number of ticks over a time range. ?Packages installed are "package:RBloomberg" and "package:RDCOMClient".
>
> The data request is for the number of ticks over a date range using
>
> conn<-blpConnect(timeout=120000,show.days="week",na.action="na",periodicity="daily")
> blp(conn, "AGS BB EQUITY",fields=c("LAST_PRICE"),start="2011-09-12 08:00",end="2011-09-12 16:30",barsize=510, barfields="NUMBER_TICKS")
>
> which returns the number 3574. ?When passing the argument fields=c("BID") or fields=c("ASK") the number of bid or ask ticks returns <NA>.
>
> blp(conn, "AGS BB EQUITY",fields=c("BID"),start="2011-09-12 08:00",end="2011-09-12 16:30",barsize=510, barfields="NUMBER_TICKS")
> blp(conn, "AGS BB EQUITY",fields=c("ASK"),start="2011-09-12 08:00",end="2011-09-12 16:30",barsize=510, barfields="NUMBER_TICKS")
>
> The issue is this is not consistent behavour with other stocks, for example, for EBS AV EQUITY the BID, ASK LAST_PRICE number of ticks is
> 33800, 33800,2232
>
> Has anyone got any idea why this happens or if there is a way to resolve it?
>
> Best regards
>
> Michael
>
> ............................................................................
>
> Sanford C. Bernstein Limited (registered in England and Wales under company number 3760267) is authorised and regulated in the United Kingdom by the Financial Services Authority. The company has its registered office at 50 Berkeley Street, London W1J 8SB.
>
> Trading instructions sent electronically to Bernstein shall not be deemed accepted until a representative of Bernstein acknowledges receipt electronically or by telephone. Comments in this e-mail transmission and any attachments may form part of a larger body of investment analysis. For our research reports, which contain information that may be used to support investment decisions and disclosures see our website at www.bernsteinresearch.com.
>
> For further important information about AllianceBernstein please click here http://www.alliancebernstein.com/disclaimer/email/disclaimer.html
>
> Please note that as of 7 November, 2011 Sanford C. Bernstein Limited will be located at 50 Berkeley Street, London W1J 8SB.
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From sjain at caa.columbia.edu  Tue Nov 29 17:15:03 2011
From: sjain at caa.columbia.edu (sammyny)
Date: Tue, 29 Nov 2011 08:15:03 -0800 (PST)
Subject: [R-SIG-Finance] inverse laplace transform
Message-ID: <1322583303227-4119732.post@n4.nabble.com>

Hi,
I am trying to do some computations using Laplace transforms. I used the
continued fractions approach to compute laplace transform of a birth-death
process as described in [
http://www.columbia.edu/~ww2040/continuedfractions99.pdf Abate 1999 ]. But I
cannot find a simple numerical routine to compute the inverse Laplace
transform (evaluated at 0 in my case). Does anyone have ideas on how to do
this?

Much appreciated.

Samit

--
View this message in context: http://r.789695.n4.nabble.com/inverse-laplace-transform-tp4119732p4119732.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From paulteetor at yahoo.com  Tue Nov 29 19:08:51 2011
From: paulteetor at yahoo.com (Paul Teetor)
Date: Tue, 29 Nov 2011 12:08:51 -0600
Subject: [R-SIG-Finance] Better Hedge Ratios for Spread Trading
Message-ID: <6D6B3AA826544E20BB09E056163FD4DE@XI>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111129/eadf45bb/attachment.pl>

From gsee000 at gmail.com  Tue Nov 29 20:20:25 2011
From: gsee000 at gmail.com (G See)
Date: Tue, 29 Nov 2011 13:20:25 -0600
Subject: [R-SIG-Finance] Better Hedge Ratios for Spread Trading
In-Reply-To: <6D6B3AA826544E20BB09E056163FD4DE@XI>
References: <AcyuwfKdlmiVzGJTR9y2rc06Wwv3qg==>
	<6D6B3AA826544E20BB09E056163FD4DE@XI>
Message-ID: <CA+xi=qaGrK88hOtxmHi+NZ0r4morfOS7+4y4gA01OVtPeEgdGQ@mail.gmail.com>

Paul,

Thank you very much for sending this; I've seen the lightning talk slides,
and spent some time playing with it.  I do have a couple observations.

First, often it seems like if I use the inverse of your code I get better
results.

i.e. I find that r$loadings[1,1] / r$loadings[2,1] is closer to what I get
using other hedge ratio calculation methods.

I attached a hedge ratio calculating function called "btcdHedge" to use as
a comparison.  I took the code for this function from
http://quantivity.wordpress.com/2011/10/02/proxy-cross-hedging/

If I use btcdHedge to calculate the ratio between SPY and DIA since
2011-01-01, it tells me to sell 1.070554 DIA for each share of SPY that I
am long.

That is very close to the 1.070894 I would get if I used  OLS with a zero
intercept

If I use OLS with a floating intercept, I get 1.206745.

If I use your TLS code, I get 0.777546

So, your TLS code is the only one that gives a ratio of less than 1.

However, if I use the inverse of your code I get something close to OLS
with floating intercept
r$loadings[1,1] / r$loadings[2,1]
[1] 1.286098


Second,
You say
"Forcing a zero intercept requires an additional step: recentering the data
around
their means prior to the PCA."

However, I get the same values regardless of whether I center around the
means.

Thanks,
Garrett

On Tue, Nov 29, 2011 at 12:08 PM, Paul Teetor <paulteetor at yahoo.com> wrote:

> R-SIG-Finance community:
>
> I recently posted a short paper entitled Better Hedge Ratios for Spread
> Trading:
>
>    http://www.quanttrader.info/public/betterHedgeRatios.pdf
>
> The topic is pretty arcane but important to spread traders. A surprizing
> number of textbooks and practitioners simply use ordinary least squares
> (OLS) to calculate their hedge ratios, but OLS can give misleading results.
> The paper shows how to use total least squares (TLS) to obtain a better
> balanced spread. The needed R code is simple and included in the paper.
>
> The paper is based on a lightning talk I gave at the R/Finance Conference
> back in April.
>
> I welcome all comments. I can't guarantee I will quickly incorporate your
> feedback into the paper, unfortunately. Heck, it took me seven months just
> to get out this first version.
>
> Paul Teetor
> Elgin, IL   USA
> http://www.linkedin.com/in/paulteetor
>
> "For quant traders, there are no bad days in the market. It's just more
> data."
>
>
>        [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111129/ed489ab4/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: BTCDhedge.R
Type: text/x-r-source
Size: 2860 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111129/ed489ab4/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: BetterHedgeScratchwork.R
Type: text/x-r-source
Size: 540 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111129/ed489ab4/attachment-0001.bin>

From sjain at caa.columbia.edu  Tue Nov 29 20:41:37 2011
From: sjain at caa.columbia.edu (Samit Jain)
Date: Tue, 29 Nov 2011 14:41:37 -0500
Subject: [R-SIG-Finance] Better Hedge Ratios for Spread Trading
In-Reply-To: <CA+xi=qaGrK88hOtxmHi+NZ0r4morfOS7+4y4gA01OVtPeEgdGQ@mail.gmail.com>
References: <6D6B3AA826544E20BB09E056163FD4DE@XI>
	<CA+xi=qaGrK88hOtxmHi+NZ0r4morfOS7+4y4gA01OVtPeEgdGQ@mail.gmail.com>
Message-ID: <CAEDoPAE9B+MwKo8uH+su9dTFuhn5cmxP6XEsNUHr0zjNqoOi6g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111129/b875a273/attachment.pl>

From sjain at caa.columbia.edu  Tue Nov 29 20:42:13 2011
From: sjain at caa.columbia.edu (Samit Jain)
Date: Tue, 29 Nov 2011 14:42:13 -0500
Subject: [R-SIG-Finance] Better Hedge Ratios for Spread Trading
In-Reply-To: <CAEDoPAE9B+MwKo8uH+su9dTFuhn5cmxP6XEsNUHr0zjNqoOi6g@mail.gmail.com>
References: <6D6B3AA826544E20BB09E056163FD4DE@XI>
	<CA+xi=qaGrK88hOtxmHi+NZ0r4morfOS7+4y4gA01OVtPeEgdGQ@mail.gmail.com>
	<CAEDoPAE9B+MwKo8uH+su9dTFuhn5cmxP6XEsNUHr0zjNqoOi6g@mail.gmail.com>
Message-ID: <CAEDoPAHvY6Vu_ZENd-vEOrBPsdPZdHqrngk0HiKoNbcNhEaw7w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111129/9a435d4a/attachment.pl>

From gsee000 at gmail.com  Tue Nov 29 21:05:35 2011
From: gsee000 at gmail.com (G See)
Date: Tue, 29 Nov 2011 14:05:35 -0600
Subject: [R-SIG-Finance] Better Hedge Ratios for Spread Trading
In-Reply-To: <CA+xi=qaGrK88hOtxmHi+NZ0r4morfOS7+4y4gA01OVtPeEgdGQ@mail.gmail.com>
References: <6D6B3AA826544E20BB09E056163FD4DE@XI>
	<CA+xi=qaGrK88hOtxmHi+NZ0r4morfOS7+4y4gA01OVtPeEgdGQ@mail.gmail.com>
Message-ID: <CA+xi=qZ0ZdGnjowjc5sB+x0A0axa--=Hza+Tr06ydahFd_4QFg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111129/c7facd89/attachment.pl>

From gsee000 at gmail.com  Tue Nov 29 21:09:51 2011
From: gsee000 at gmail.com (G See)
Date: Tue, 29 Nov 2011 14:09:51 -0600
Subject: [R-SIG-Finance] Better Hedge Ratios for Spread Trading
In-Reply-To: <CAEDoPAHvY6Vu_ZENd-vEOrBPsdPZdHqrngk0HiKoNbcNhEaw7w@mail.gmail.com>
References: <6D6B3AA826544E20BB09E056163FD4DE@XI>
	<CA+xi=qaGrK88hOtxmHi+NZ0r4morfOS7+4y4gA01OVtPeEgdGQ@mail.gmail.com>
	<CAEDoPAE9B+MwKo8uH+su9dTFuhn5cmxP6XEsNUHr0zjNqoOi6g@mail.gmail.com>
	<CAEDoPAHvY6Vu_ZENd-vEOrBPsdPZdHqrngk0HiKoNbcNhEaw7w@mail.gmail.com>
Message-ID: <CA+xi=qbexen0L9VJuBihj9xNjAaTk8gGV0ApBoJVShcydFfuMA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111129/afb3c9d4/attachment.pl>

From gsee000 at gmail.com  Tue Nov 29 21:22:21 2011
From: gsee000 at gmail.com (G See)
Date: Tue, 29 Nov 2011 14:22:21 -0600
Subject: [R-SIG-Finance] Better Hedge Ratios for Spread Trading
In-Reply-To: <CA+xi=qbexen0L9VJuBihj9xNjAaTk8gGV0ApBoJVShcydFfuMA@mail.gmail.com>
References: <6D6B3AA826544E20BB09E056163FD4DE@XI>
	<CA+xi=qaGrK88hOtxmHi+NZ0r4morfOS7+4y4gA01OVtPeEgdGQ@mail.gmail.com>
	<CAEDoPAE9B+MwKo8uH+su9dTFuhn5cmxP6XEsNUHr0zjNqoOi6g@mail.gmail.com>
	<CAEDoPAHvY6Vu_ZENd-vEOrBPsdPZdHqrngk0HiKoNbcNhEaw7w@mail.gmail.com>
	<CA+xi=qbexen0L9VJuBihj9xNjAaTk8gGV0ApBoJVShcydFfuMA@mail.gmail.com>
Message-ID: <CA+xi=qbzwutbk2hoyJ3ss6iKdqyNMxV4f11Z0D1_2cmeryh6tg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111129/8eb0c4b4/attachment.pl>

From paulteetor at yahoo.com  Tue Nov 29 22:45:24 2011
From: paulteetor at yahoo.com (Paul Teetor)
Date: Tue, 29 Nov 2011 13:45:24 -0800 (PST)
Subject: [R-SIG-Finance] Better Hedge Ratios for Spread Trading
In-Reply-To: <CA+xi=qZ0ZdGnjowjc5sB+x0A0axa--=Hza+Tr06ydahFd_4QFg@mail.gmail.com>
References: <6D6B3AA826544E20BB09E056163FD4DE@XI>
	<CA+xi=qaGrK88hOtxmHi+NZ0r4morfOS7+4y4gA01OVtPeEgdGQ@mail.gmail.com>
	<CA+xi=qZ0ZdGnjowjc5sB+x0A0axa--=Hza+Tr06ydahFd_4QFg@mail.gmail.com>
Message-ID: <1322603124.74980.YahooMailNeo@web65916.mail.ac4.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111129/18c35169/attachment.pl>

From paulteetor at yahoo.com  Wed Nov 30 02:47:35 2011
From: paulteetor at yahoo.com (Paul Teetor)
Date: Tue, 29 Nov 2011 17:47:35 -0800 (PST)
Subject: [R-SIG-Finance] Better Hedge Ratios for Spread Trading
In-Reply-To: <CA+xi=qZ0ZdGnjowjc5sB+x0A0axa--=Hza+Tr06ydahFd_4QFg@mail.gmail.com>
References: <6D6B3AA826544E20BB09E056163FD4DE@XI>
	<CA+xi=qaGrK88hOtxmHi+NZ0r4morfOS7+4y4gA01OVtPeEgdGQ@mail.gmail.com>
	<CA+xi=qZ0ZdGnjowjc5sB+x0A0axa--=Hza+Tr06ydahFd_4QFg@mail.gmail.com>
Message-ID: <1322617655.14637.YahooMailNeo@web65908.mail.ac4.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111129/5c97cae2/attachment.pl>

From jasonhome at freenet.de  Thu Dec  1 00:54:07 2011
From: jasonhome at freenet.de (Philipp)
Date: Wed, 30 Nov 2011 15:54:07 -0800 (PST)
Subject: [R-SIG-Finance] PerformanceAnalytics - Sharpes Style Analysis- but
	with intercept?
Message-ID: <1322697247353-4125767.post@n4.nabble.com>

Dear all,

I am running some analysis based on an asset factor model (Sharpe model -
Style Analyses) in the Package PerformanceAnalytics/R-Forge. I used the
cnstained method for the style.fit function, because I need the restriction
sum(paramter)=1, parameter>=0. Everything worked fine, I created a xts
object with my Data and the results were ok. But now I noticed that I have
to include an intercept in the estimation. This is based on Sharpes Style
analysis not included in the style.QPfit function. I try to understand how
style.Qpfit works, I understood that the constrained is in bvec. And this
also ok. The intercept has not to be included in the restriction
(sum(parameter)=1, parameter>=0). So I have maybe to fix Dmat and dvec, but
I really don not know how. Is there a solution possible?

Your help is greatly appreciated - thx, 

Phillip

--
View this message in context: http://r.789695.n4.nabble.com/PerformanceAnalytics-Sharpes-Style-Analysis-but-with-intercept-tp4125767p4125767.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From peter at braverock.com  Thu Dec  1 03:39:19 2011
From: peter at braverock.com (Peter Carl)
Date: Wed, 30 Nov 2011 20:39:19 -0600
Subject: [R-SIG-Finance] PerformanceAnalytics - Sharpes Style Analysis-
 but with intercept?
In-Reply-To: <1322697247353-4125767.post@n4.nabble.com>
References: <1322697247353-4125767.post@n4.nabble.com>
Message-ID: <237cd582bc6ba1c5137d6834fb66ebe0.squirrel@mail.braverock.com>

Sharpe didn't actually include an intercept in the paper referenced for
that function, and so the residual component is treated as the excess
return relative to the composite benchmark.  That could be interpreted to
represent the ability of the fund to outperform or underperform the
portfolio constructed of the factors.

I'm not sure exactly what exactly you want to do, but you might find the
commented code for that function helpful if you're thinking about
extending the function:

https://r-forge.r-project.org/scm/viewvc.php/pkg/FactorAnalytics/R/style.QPfit.R?view=markup&root=returnanalytics

HTH,

pcc
-- 
Peter Carl
http://www.braverock.com/~peter

> Dear all,
>
> I am running some analysis based on an asset factor model (Sharpe model -
> Style Analyses) in the Package PerformanceAnalytics/R-Forge. I used the
> cnstained method for the style.fit function, because I need the
> restriction
> sum(paramter)=1, parameter>=0. Everything worked fine, I created a xts
> object with my Data and the results were ok. But now I noticed that I have
> to include an intercept in the estimation. This is based on Sharpes Style
> analysis not included in the style.QPfit function. I try to understand how
> style.Qpfit works, I understood that the constrained is in bvec. And this
> also ok. The intercept has not to be included in the restriction
> (sum(parameter)=1, parameter>=0). So I have maybe to fix Dmat and dvec,
> but
> I really don not know how. Is there a solution possible?
>
> Your help is greatly appreciated - thx,
>
> Phillip
>
> --
> View this message in context:
> http://r.789695.n4.nabble.com/PerformanceAnalytics-Sharpes-Style-Analysis-but-with-intercept-tp4125767p4125767.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


From vic_pram at yahoo.com  Thu Dec  1 04:57:27 2011
From: vic_pram at yahoo.com (Victor Chan)
Date: Thu, 1 Dec 2011 11:57:27 +0800 (SGT)
Subject: [R-SIG-Finance] Desriptive Stats for List
Message-ID: <1322711847.89375.YahooMailNeo@web190502.mail.sg3.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111201/fcdfbad1/attachment.pl>

From josh.m.ulrich at gmail.com  Thu Dec  1 06:00:31 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Wed, 30 Nov 2011 23:00:31 -0600
Subject: [R-SIG-Finance] Desriptive Stats for List
In-Reply-To: <1322711847.89375.YahooMailNeo@web190502.mail.sg3.yahoo.com>
References: <1322711847.89375.YahooMailNeo@web190502.mail.sg3.yahoo.com>
Message-ID: <CAPPM_gTmLPrtfbxNMW89R1sBSs=WZFinPvQ03V71sOzhQJZ49g@mail.gmail.com>

Please don't cross post, especially without mentioning it.
http://stackoverflow.com/questions/8336410/descriptive-statistic-for-each-variable-under-list-data-type-in-r

Also, this is off-topic because it has nothing to do with finance.
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com



On Wed, Nov 30, 2011 at 9:57 PM, Victor Chan <vic_pram at yahoo.com> wrote:
> So, I am trying to figure out
> how to display the descriptive statistics for the data type: List (let's say it called runs) having 3 variables.
> I would like to have the stats for each of the variables in the list.
>
> Then, I look into this:
> library(pastecs)
> stat.desc(mydata)
> # nbr.val, nbr.null, nbr.na, min max, range, sum,
> # median, mean, SE.mean, CI.mean, var, std.dev, coef.var
>
> When I run stat.desc(runs),
> it only shows one result.
>
> Any ideas how to resolve this?
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From john.laing at gmail.com  Thu Dec  1 13:58:23 2011
From: john.laing at gmail.com (John Laing)
Date: Thu, 1 Dec 2011 07:58:23 -0500
Subject: [R-SIG-Finance] HELP: Problem with RBloomberg blp intraday data
In-Reply-To: <E9DE1D321E5D1841920E8E92938F4AEB0B95C265@LONEVS1.ac.lp.acml.com>
References: <E9DE1D321E5D1841920E8E92938F4AEB0B95BB05@LONEVS1.ac.lp.acml.com>
	<CAA3Wa=t_48RoqOBRVfcXACZuoz8mDsNDFT9KUP=ppFR4=XNiDQ@mail.gmail.com>
	<E9DE1D321E5D1841920E8E92938F4AEB0B95C265@LONEVS1.ac.lp.acml.com>
Message-ID: <CAA3Wa=tSoMCzVnZdCy5P970-8dFgXp=VMV2mp=hDcYqN_vELbw@mail.gmail.com>

Michael,

This works in the current version of RBloomberg:

#############################################################
require(RBloomberg)
conn <- blpConnect()

ticker <- "AGS BB Equity"
start.time <- "2011-09-12 08:00:00.000"
end.time <- "2011-09-12 16:30:00.000"

trades.1 <- bar(conn, ticker, "TRADE", start.time, end.time, "1")
trades.510 <- bar(conn, ticker, "TRADE", start.time, end.time, "510")
sum(trades.1$numEvents) == sum(trades.510$numEvents) ## TRUE

bids.1 <- bar(conn, ticker, "BID", start.time, end.time, "1")
bids.510 <- bar(conn, ticker, "BID", start.time, end.time, "510")
sum(bids.1$numEvents) == sum(bids.510$numEvents) ## TRUE

asks.1 <- bar(conn, ticker, "ASK", start.time, end.time, "1")
asks.510 <- bar(conn, ticker, "ASK", start.time, end.time, "510")
sum(asks.1$numEvents) == sum(asks.510$numEvents) ## TRUE
#############################################################

If there are still problems or unexpected NAs after you upgrade, I'd
be happy to help.

Thanks,
John

On Tue, Nov 29, 2011 at 7:11 AM, Benjamin, Michael
<Michael.Benjamin at bernstein.com> wrote:
> John
>
> Thanks for looking into this for me.
>
> Details of what I am using is as follows:
>
> ============================================================
>> sessionInfo()
> R version 2.10.1 (2009-12-14)
> i386-pc-mingw32
>
> locale:
> [1] LC_COLLATE=English_United Kingdom.1252
> [2] LC_CTYPE=English_United Kingdom.1252
> [3] LC_MONETARY=English_United Kingdom.1252
> [4] LC_NUMERIC=C
> [5] LC_TIME=English_United Kingdom.1252
>
> attached base packages:
> [1] grDevices datasets ?stats ? ? utils ? ? graphics ?methods ? base
>
> other attached packages:
> ?[1] RBloomberg_0.2-98
> ?[3]
> ?[5]
> ?[7]
> ?[9]
> [11]
>
> ============================================================
>
>
> I agree that what is being processed is pretty straightforward which is why it is strange that it works for some data and not for others despite using an old version of RBloomberg. ?I will update my RBloomber soon, but out of curiosity, as the issue is not the "TRADE" ticks being returned over a time range (which works OK for me) but the "number of ticks" for bid or ask prices.
>
> Do you have any issues if you
>
> ?increase the barsize to 510
>
> and
>
> request the total number of ticks for bid, ask and trade ticks for the same stock over the same time period?
>
>
> Best regards
>
> Michael
>
>
>
> -----Original Message-----
> From: John Laing [mailto:john.laing at gmail.com]
> Sent: 29 November 2011 00:23
> To: Benjamin, Michael
> Cc: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] HELP: Problem with RBloomberg blp intraday data
>
> Michael,
>
> It is helpful if you provide information about the version of R and
> various packages that you are running. The sessionInfo() function is
> an excellent way to do that.
>
> The timeout argument to blpConnect was eliminated in early 2010, so I
> assume your version of RBloomberg is very old. There are now several
> recent threads on this list about how to upgrade and the dependencies
> involved. I recommend you read some of these.
>
> In the current RBloomberg what you're trying to do is pretty straightforward:
>
> library(RBloomberg)
> conn <- blpConnect()
> trades <- bar(conn, "AGS BB Equity", "TRADE", "2011-09-12
> 08:00:00.000", "2011-09-12 16:30:00.000", "1")
>
> Hope that helps,
> John
>
> On Thu, Nov 24, 2011 at 5:45 AM, Benjamin, Michael
> <Michael.Benjamin at bernstein.com> wrote:
>> Hello
>>
>> I am trying to download some intraday data, the number of ticks over a time range. ?Packages installed are "package:RBloomberg" and "package:RDCOMClient".
>>
>> The data request is for the number of ticks over a date range using
>>
>> conn<-blpConnect(timeout=120000,show.days="week",na.action="na",periodicity="daily")
>> blp(conn, "AGS BB EQUITY",fields=c("LAST_PRICE"),start="2011-09-12 08:00",end="2011-09-12 16:30",barsize=510, barfields="NUMBER_TICKS")
>>
>> which returns the number 3574. ?When passing the argument fields=c("BID") or fields=c("ASK") the number of bid or ask ticks returns <NA>.
>>
>> blp(conn, "AGS BB EQUITY",fields=c("BID"),start="2011-09-12 08:00",end="2011-09-12 16:30",barsize=510, barfields="NUMBER_TICKS")
>> blp(conn, "AGS BB EQUITY",fields=c("ASK"),start="2011-09-12 08:00",end="2011-09-12 16:30",barsize=510, barfields="NUMBER_TICKS")
>>
>> The issue is this is not consistent behavour with other stocks, for example, for EBS AV EQUITY the BID, ASK LAST_PRICE number of ticks is
>> 33800, 33800,2232
>>
>> Has anyone got any idea why this happens or if there is a way to resolve it?
>>
>> Best regards
>>
>> Michael
>>
>> ............................................................................
>>
>> Sanford C. Bernstein Limited (registered in England and Wales under company number 3760267) is authorised and regulated in the United Kingdom by the Financial Services Authority. The company has its registered office at 50 Berkeley Street, London W1J 8SB.
>>
>> Trading instructions sent electronically to Bernstein shall not be deemed accepted until a representative of Bernstein acknowledges receipt electronically or by telephone. Comments in this e-mail transmission and any attachments may form part of a larger body of investment analysis. For our research reports, which contain information that may be used to support investment decisions and disclosures see our website at www.bernsteinresearch.com.
>>
>> For further important information about AllianceBernstein please click here http://www.alliancebernstein.com/disclaimer/email/disclaimer.html
>>
>> Please note that as of 7 November, 2011 Sanford C. Bernstein Limited will be located at 50 Berkeley Street, London W1J 8SB.
>>
>> ? ? ? ?[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>


From jasonhome at freenet.de  Thu Dec  1 17:04:21 2011
From: jasonhome at freenet.de (Philipp)
Date: Thu, 1 Dec 2011 08:04:21 -0800 (PST)
Subject: [R-SIG-Finance] PerformanceAnalytics - Sharpes Style Analysis-
 but with intercept?
In-Reply-To: <237cd582bc6ba1c5137d6834fb66ebe0.squirrel@mail.braverock.com>
References: <1322697247353-4125767.post@n4.nabble.com>
	<237cd582bc6ba1c5137d6834fb66ebe0.squirrel@mail.braverock.com>
Message-ID: <1322755461301-4129124.post@n4.nabble.com>

Thanks for the commented Function. So i can understand a little bit more
about it. 

In fact I want to run following constrained Regression. R.f=w0 +
w1*Rs_1+w2*Rs_2+w3*Rs_3 
with the constraints: (1) w1+w2+w3 =1 (2) w1,w2,w3>0. So the Intercept(w0)
is not included in the Constraints. In my case, R.f is a country return,
which I regress on an intercept and Industryreturnbenchmarks. The purpose is
to find a quantity of how well the Industries can explain a country-index.
(Which will be done by Rsquared, The question why an intercept is integrated
(That has been done in some papers, considering this topic), I can not
explain.Maybe because of a better fit). 

If I would consider an intercept I have to fix the Calculation of D and d in
the code of style.QPfit. The purpose is to minimize Var(R.fund-sum[w_i*Rs_i
+w0]). Then I get Var(R.f)(=0)+Var(wiRs_i+w0)-2Cov(Rfund, Rstyle+w0). So in
the Calculation of D and d I get D (=Dmat)=Cov(Rstyle+w0); d=Cov(R.fund,
Rstyle+w0). So my Problem is now to find the right function to minimize
under estimating w, without changing the constraints. 

Thanks,

Best regards

Philipp

--
View this message in context: http://r.789695.n4.nabble.com/PerformanceAnalytics-Sharpes-Style-Analysis-but-with-intercept-tp4125767p4129124.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jasonhome at freenet.de  Thu Dec  1 17:18:14 2011
From: jasonhome at freenet.de (Philipp)
Date: Thu, 1 Dec 2011 08:18:14 -0800 (PST)
Subject: [R-SIG-Finance] Constrained Regression with Intercept in pcls
Message-ID: <1322756294407-4129187.post@n4.nabble.com>

Dear all,

I already asked about to run a constrained regression like y=b0 +
b1X1+b2x2+b3x3, with constraints:

b1+b2+b3=1 and b1,b2,b3>=0. I thought it will run with style.QPfit with the
performance Analytic packages.

However the style.QPfit function does not estimate an intercept. As i really
can not extend this function for my problem, I noticed pcls. Pcls is maybe
an alternative for my problem. Can somebody help me to implement the
constraints in pcls. Maybe it can be done by designing a designed matrix X
with extra column for the inercept (b0) and to force C in a way. But how I
do not know.

Your help is greatly appreciated

Philipp

--
View this message in context: http://r.789695.n4.nabble.com/Constrained-Regression-with-Intercept-in-pcls-tp4129187p4129187.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From enricoschumann at yahoo.de  Thu Dec  1 22:24:52 2011
From: enricoschumann at yahoo.de (Enrico Schumann)
Date: Thu, 01 Dec 2011 22:24:52 +0100
Subject: [R-SIG-Finance] Constrained Regression with Intercept in pcls
In-Reply-To: <1322756294407-4129187.post@n4.nabble.com>
References: <1322756294407-4129187.post@n4.nabble.com>
Message-ID: <4ED7F0A4.1030108@yahoo.de>


Hi Philipp,

you should be able to solve this with package quadprog/solve.QP.

require(quadprog)

p <- 3    ## number of regressors
T <- 100  ## number of obs
X <- array(rnorm(T*p), dim = c(T,p))
X <- cbind(1,X)  ## add a constant
y <- rnorm(T)


## variant 1 -- linear regression
coef(lm(y ~ -1 + X))


## variant 2 -- quadprog (should be the same as variant 1)
Dmat <- crossprod(X)
dvec <- as.vector(t(as.matrix(y)) %*% X)
Amat <- as.matrix(rep(0, p+1))
solve.QP(Dmat = Dmat, dvec = dvec, Amat = Amat)$solution


## variant 3 -- quadprog, now with restrictions
bvec <- c(1, rep(0, p))
Amat <- rbind(1,diag(p))
Amat <- cbind(0, Amat)
w <- solve.QP(Dmat = Dmat, dvec = dvec, Amat = t(Amat), bvec=bvec, 
meq=1)$solution
w          ## result
sum(w[-1]) ## check constraint

see also here http://comisef.wikidot.com/tutorial:minimisevariance

regards,
Enrico




Am 01.12.2011 17:18, schrieb Philipp:
> Dear all,
>
> I already asked about to run a constrained regression like y=b0 +
> b1X1+b2x2+b3x3, with constraints:
>
> b1+b2+b3=1 and b1,b2,b3>=0. I thought it will run with style.QPfit with the
> performance Analytic packages.
>
> However the style.QPfit function does not estimate an intercept. As i really
> can not extend this function for my problem, I noticed pcls. Pcls is maybe
> an alternative for my problem. Can somebody help me to implement the
> constraints in pcls. Maybe it can be done by designing a designed matrix X
> with extra column for the inercept (b0) and to force C in a way. But how I
> do not know.
>
> Your help is greatly appreciated
>
> Philipp
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Constrained-Regression-with-Intercept-in-pcls-tp4129187p4129187.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>

-- 
Enrico Schumann
Lucerne, Switzerland
http://nmof.net/


From thomas.chan.sf at boci-pru.com.hk  Fri Dec  2 02:37:24 2011
From: thomas.chan.sf at boci-pru.com.hk (thomas.chan.sf at boci-pru.com.hk)
Date: Fri, 2 Dec 2011 09:37:24 +0800
Subject: [R-SIG-Finance] Constrained Regression with Intercept in pcls
In-Reply-To: <1322756294407-4129187.post@n4.nabble.com>
References: <1322756294407-4129187.post@n4.nabble.com>
Message-ID: <OF90B4A92B.1BA4D71E-ON4825795A.000871CE-4825795A.0008EAF4@boci-pru.com.hk>

Alternatively, the lsei (least squares with equalities and inequalities) fu
nction in the limSolve package solves for the least square solution to a
system of equations with linear and nonlinear constraints.


|------------>
| From:      |
|------------>
  >----------------------------------------------------------------------------------------------------------------------------------------|
  |Philipp <jasonhome at freenet.de>                                                                                                          |
  >----------------------------------------------------------------------------------------------------------------------------------------|
|------------>
| To:        |
|------------>
  >----------------------------------------------------------------------------------------------------------------------------------------|
  |r-sig-finance at r-project.org                                                                                                             |
  >----------------------------------------------------------------------------------------------------------------------------------------|
|------------>
| Date:      |
|------------>
  >----------------------------------------------------------------------------------------------------------------------------------------|
  |02/12/2011 00:20                                                                                                                        |
  >----------------------------------------------------------------------------------------------------------------------------------------|
|------------>
| Subject:   |
|------------>
  >----------------------------------------------------------------------------------------------------------------------------------------|
  |[R-SIG-Finance] Constrained Regression with Intercept in pcls                                                                           |
  >----------------------------------------------------------------------------------------------------------------------------------------|
|------------>
| Sent by:   |
|------------>
  >----------------------------------------------------------------------------------------------------------------------------------------|
  |r-sig-finance-bounces at r-project.org                                                                                                     |
  >----------------------------------------------------------------------------------------------------------------------------------------|





Dear all,

I already asked about to run a constrained regression like y=b0 +
b1X1+b2x2+b3x3, with constraints:

b1+b2+b3=1 and b1,b2,b3>=0. I thought it will run with style.QPfit with the
performance Analytic packages.

However the style.QPfit function does not estimate an intercept. As i
really
can not extend this function for my problem, I noticed pcls. Pcls is maybe
an alternative for my problem. Can somebody help me to implement the
constraints in pcls. Maybe it can be done by designing a designed matrix X
with extra column for the inercept (b0) and to force C in a way. But how I
do not know.

Your help is greatly appreciated

Philipp

--
View this message in context:
http://r.789695.n4.nabble.com/Constrained-Regression-with-Intercept-in-pcls-tp4129187p4129187.html

Sent from the Rmetrics mailing list archive at Nabble.com.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.

______________________________________________________________________
This email has been scanned by the Symantec Email Security.cloud service.
For more information please visit http://www.symanteccloud.com
______________________________________________________________________



---------------------------------------------------------------------------------------

Important : The information contained in this e-mail and any attachment thereof is intended only for use of the addressee and is confidential and may be privileged and/or otherwise protected from disclosure. If you are not the intended recipient, you are hereby notified that any use, copying, dissemination or any other action taken or omitted to be taken in reliance upon this information is strictly prohibited. If you have received this communication in error, please notify the sender immediately by reply and delete this message from your system. Any views expressed in this e-mail are those of the individual sender except where the e-mail states otherwise and the sender is authorized to state them to be the views of BOCI-Prudential Asset Management Limited. Unless otherwise stated, any information given in this e-mail shall not be regarded as an offer, solicitation, invitation, advice or recommendation to buy or sell any investment or securities within or outside Hong Kong SAR. Any reference to the terms of executed transactions should be treated as preliminary only and subject to our formal written confirmation.


______________________________________________________________________
This email has been scanned by the Symantec Email Security.cloud service.
For more information please visit http://www.symanteccloud.com


From economics.vikram at gmail.com  Sat Dec  3 14:11:56 2011
From: economics.vikram at gmail.com (Vikram Bahure)
Date: Sat, 3 Dec 2011 18:41:56 +0530
Subject: [R-SIG-Finance] Extracting data from google.finance: getSymbols
Message-ID: <CAEfYxiWV1vv4EHVXOrBVWpDQTWZ0WZvDf39bj2_Oh0UZp-JqpA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111203/88d695be/attachment.pl>

From junzhu98 at yahoo.com  Sat Dec  3 19:23:39 2011
From: junzhu98 at yahoo.com (Jun Zhu)
Date: Sat, 3 Dec 2011 10:23:39 -0800 (PST)
Subject: [R-SIG-Finance] function for x to the power of y
In-Reply-To: <1322711847.89375.YahooMailNeo@web190502.mail.sg3.yahoo.com>
Message-ID: <1322936619.31502.YahooMailClassic@web30604.mail.mud.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111203/c8832d2f/attachment.pl>

From sjain at caa.columbia.edu  Sat Dec  3 19:40:02 2011
From: sjain at caa.columbia.edu (Samit Jain)
Date: Sat, 3 Dec 2011 13:40:02 -0500
Subject: [R-SIG-Finance] function for x to the power of y
In-Reply-To: <1322936619.31502.YahooMailClassic@web30604.mail.mud.yahoo.com>
References: <1322711847.89375.YahooMailNeo@web190502.mail.sg3.yahoo.com>
	<1322936619.31502.YahooMailClassic@web30604.mail.mud.yahoo.com>
Message-ID: <CAEDoPAGGC7vOMVzvGLnqrAwM5VRfg=WZU2TxNO9AMwoJcUw04g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111203/7bc89338/attachment.pl>

From pierrelap at gmail.com  Sun Dec  4 01:40:54 2011
From: pierrelap at gmail.com (Pierre Lapointe)
Date: Sat, 3 Dec 2011 19:40:54 -0500
Subject: [R-SIG-Finance] function for x to the power of y
In-Reply-To: <CAEDoPAGGC7vOMVzvGLnqrAwM5VRfg=WZU2TxNO9AMwoJcUw04g@mail.gmail.com>
References: <1322711847.89375.YahooMailNeo@web190502.mail.sg3.yahoo.com>
	<1322936619.31502.YahooMailClassic@web30604.mail.mud.yahoo.com>
	<CAEDoPAGGC7vOMVzvGLnqrAwM5VRfg=WZU2TxNO9AMwoJcUw04g@mail.gmail.com>
Message-ID: <CAHjr2U8O6TEZP=5Ng-UONOG07RYnwL7L6yC64MunxWYJ+O3+iQ@mail.gmail.com>

What's wrong with x^y?

Example:
> 2^4
[1] 16

On Sat, Dec 3, 2011 at 1:40 PM, Samit Jain <sjain at caa.columbia.edu> wrote:
> You can write a simple function
>
> pow = function(x,y) { x^y }
>
> On Sat, Dec 3, 2011 at 1:23 PM, Jun Zhu <junzhu98 at yahoo.com> wrote:
>
>> Hi,
>> Does R has a mathematical function to calculate
>> x to the power of y
>>
>> thanks,
>> Jun
>> ? ? ? ?[[alternative HTML version deleted]]
>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jeff.a.ryan at gmail.com  Sun Dec  4 19:12:16 2011
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Sun, 4 Dec 2011 12:12:16 -0600
Subject: [R-SIG-Finance] function for x to the power of y
In-Reply-To: <1322936619.31502.YahooMailClassic@web30604.mail.mud.yahoo.com>
References: <1322936619.31502.YahooMailClassic@web30604.mail.mud.yahoo.com>
Message-ID: <B0023F89-A2FB-4599-8679-A4062B7F0EE1@gmail.com>

This isn't R-help. Please pay attention to where you post questions. 

In addition this question shows fantastically poor simple research. It is inconsiderate of others time to simply ask for a solution without doing something as simple as reading the manual. 

Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Dec 3, 2011, at 12:23 PM, Jun Zhu <junzhu98 at yahoo.com> wrote:

> Hi,
> Does R has a mathematical function to calculate?
> x to the power of y
> 
> thanks,
> Jun
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From Ayhan.Yuksel at finansportfoy.com  Mon Dec  5 16:42:11 2011
From: Ayhan.Yuksel at finansportfoy.com (=?iso-8859-9?Q?Ayhan_Y=FCksel_=28Finans_Portf=F6y_A=2E=DE=2E=29?=)
Date: Mon, 5 Dec 2011 17:42:11 +0200
Subject: [R-SIG-Finance] Bloomberg login through R
Message-ID: <37F03B5FAABCC94D8AF66166AAE3639902EA5496@fnymail.fnylocal.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111205/44ed6369/attachment.pl>

From jasonhome at freenet.de  Mon Dec  5 16:59:41 2011
From: jasonhome at freenet.de (Philipp)
Date: Mon, 5 Dec 2011 07:59:41 -0800 (PST)
Subject: [R-SIG-Finance] Constrained Regression with Intercept in pcls
In-Reply-To: <4ED7F0A4.1030108@yahoo.de>
References: <1322756294407-4129187.post@n4.nabble.com>
	<4ED7F0A4.1030108@yahoo.de>
Message-ID: <1323100781738-4161066.post@n4.nabble.com>

Hi Enrico,

Thanks for your answer. I tried the third alternative, which I need with my
two constraints. But I get the error message: Amat and dvec are
incompatible!

Can you help me again?

Regards Phillip

--
View this message in context: http://r.789695.n4.nabble.com/Constrained-Regression-with-Intercept-in-pcls-tp4129187p4161066.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From pierrelap at gmail.com  Mon Dec  5 17:05:47 2011
From: pierrelap at gmail.com (Pierre Lapointe)
Date: Mon, 5 Dec 2011 11:05:47 -0500
Subject: [R-SIG-Finance] Bloomberg login through R
In-Reply-To: <37F03B5FAABCC94D8AF66166AAE3639902EA5496@fnymail.fnylocal.com>
References: <37F03B5FAABCC94D8AF66166AAE3639902EA5496@fnymail.fnylocal.com>
Message-ID: <CAHjr2U9AhhRrhm6sWOXcXLdk2vCsJLbZXE00E2fV7dgErdpLTA@mail.gmail.com>

Why don't you try it?
Type LOFF <GO> on your Bloomberg
And try to use RBloomberg.
It works on mine.
2011/12/5 Ayhan Y?ksel (Finans Portf?y A.?.) <Ayhan.Yuksel at finansportfoy.com>:
> Hi,
>
>
>
> I have a question about gathering data from Bloomberg using Rbloomberg package.
>
>
>
> If the bloomberg terminal is logged off, is it possible to login to Bloomberg through R?
>
>
>
> e.g. something like:
>
>
>
> library(RBloomberg)
>
> conn <- blpConnect(username=ABCDE, password=123456)
>
>
>
> Kind regards,
>
> Ayhan Yuksel
>
>
> Bu e-posta'nin icerdigi bilgiler (ekleri dahil olmak uzere) gizlidir. Onayimiz olmaksizin ucuncu kisilere aciklanamaz. Bu mesajin gonderilmek istendigi kisi degilseniz, lutfen mesaji sisteminizden derhal siliniz. Finans Portf?y Y?netimi A.S. bu mesajin icerdigi bilgilerin dogrulugu veya eksiksiz oldugu konusunda bir garanti vermemektedir. Bu nedenle bilgilerin ne sekilde olursa olsun iceriginden, iletilmesinden, alinmasindan, saklanmasindan sorumlu degildir. Bu mesajin icerigi yazarina ait olup, Finans Portf?y Y?netimi A.S.'nin goruslerini icermeyebilir. ? ? The information contained in this e-mail (including any attachments) is confidential. It must not be disclosed to any person without our authority. If you are not the intended recipient, please delete it from your system immediately. Finans Portfoy Yonetimi A.S. makes no warranty as to the accuracy or completeness of any information contained in this message and hereby excludes any liability of any kind for the information contained therein or for the information transmission, reception, storage or use of such in any way whatsoever. Any opinions expressed in this message are those of the author and may not necessarily reflect the opinions of Finans Portfoy Yonetimi A.S.
>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From john.laing at gmail.com  Mon Dec  5 17:53:02 2011
From: john.laing at gmail.com (John Laing)
Date: Mon, 5 Dec 2011 11:53:02 -0500
Subject: [R-SIG-Finance] Bloomberg login through R
In-Reply-To: <CAHjr2U9AhhRrhm6sWOXcXLdk2vCsJLbZXE00E2fV7dgErdpLTA@mail.gmail.com>
References: <37F03B5FAABCC94D8AF66166AAE3639902EA5496@fnymail.fnylocal.com>
	<CAHjr2U9AhhRrhm6sWOXcXLdk2vCsJLbZXE00E2fV7dgErdpLTA@mail.gmail.com>
Message-ID: <CAA3Wa=s8kWVDXYjOkq0Jwm76oC7ogpoTbqrSzRFgOHO_eTJt-g@mail.gmail.com>

This will work to an extent, but is not the intended use. The
Bloomberg APIs will continue to work for a time after you log off from
the terminal. Eventually the connection will go away.

In response to Ayhan's original question: there is not a way to
provide login credentials through R. It is expected that a terminal is
already open and connected to Bloomberg, and the API then piggybacks
on that session.

John

2011/12/5 Pierre Lapointe <pierrelap at gmail.com>:
> Why don't you try it?
> Type LOFF <GO> on your Bloomberg
> And try to use RBloomberg.
> It works on mine.
> 2011/12/5 Ayhan Y?ksel (Finans Portf?y A.?.) <Ayhan.Yuksel at finansportfoy.com>:
>> Hi,
>>
>>
>>
>> I have a question about gathering data from Bloomberg using Rbloomberg package.
>>
>>
>>
>> If the bloomberg terminal is logged off, is it possible to login to Bloomberg through R?
>>
>>
>>
>> e.g. something like:
>>
>>
>>
>> library(RBloomberg)
>>
>> conn <- blpConnect(username=ABCDE, password=123456)
>>
>>
>>
>> Kind regards,
>>
>> Ayhan Yuksel
>>
>>
>> Bu e-posta'nin icerdigi bilgiler (ekleri dahil olmak uzere) gizlidir. Onayimiz olmaksizin ucuncu kisilere aciklanamaz. Bu mesajin gonderilmek istendigi kisi degilseniz, lutfen mesaji sisteminizden derhal siliniz. Finans Portf?y Y?netimi A.S. bu mesajin icerdigi bilgilerin dogrulugu veya eksiksiz oldugu konusunda bir garanti vermemektedir. Bu nedenle bilgilerin ne sekilde olursa olsun iceriginden, iletilmesinden, alinmasindan, saklanmasindan sorumlu degildir. Bu mesajin icerigi yazarina ait olup, Finans Portf?y Y?netimi A.S.'nin goruslerini icermeyebilir. ? ? The information contained in this e-mail (including any attachments) is confidential. It must not be disclosed to any person without our authority. If you are not the intended recipient, please delete it from your system immediately. Finans Portfoy Yonetimi A.S. makes no warranty as to the accuracy or completeness of any information contained in this message and hereby excludes any liability of any kind for the information contained therein or for the information transmission, reception, storage or use of such in any way whatsoever. Any opinions expressed in this message are those of the author and may not necessarily reflect the opinions of Finans Portfoy Yonetimi A.S.
>>
>>
>> ? ? ? ?[[alternative HTML version deleted]]
>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From Danilo.Mercurio at Sparinvest.com  Mon Dec  5 18:32:59 2011
From: Danilo.Mercurio at Sparinvest.com (Mercurio Danilo 1850 SPI)
Date: Mon, 5 Dec 2011 17:32:59 +0000
Subject: [R-SIG-Finance] Bloomberg login through R
In-Reply-To: <37F03B5FAABCC94D8AF66166AAE3639902EA5496@fnymail.fnylocal.com>
References: <37F03B5FAABCC94D8AF66166AAE3639902EA5496@fnymail.fnylocal.com>
Message-ID: <1438F6C5E7F7884293F0B114502EA6F2091AA8@m0187.s-mxs.net>

Hi!

in my workstation I do not need to be logged into Bloomberg in order to access data via Rbloomberg.
And I do not need to supply UserID and PW.

best

Danilo
 

-----Urspr?ngliche Nachricht-----
Von: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag von Ayhan Y?ksel (Finans Portf?y A.S.)
Gesendet: Montag, 05. Dezember 2011 16:42
An: r-sig-finance at r-project.org
Betreff: [R-SIG-Finance] Bloomberg login through R [heur]

Hi,

 

I have a question about gathering data from Bloomberg using Rbloomberg package.

 

If the bloomberg terminal is logged off, is it possible to login to Bloomberg through R?

 

e.g. something like:

 

library(RBloomberg)

conn <- blpConnect(username=ABCDE, password=123456)

 

Kind regards,

Ayhan Yuksel


Bu e-posta'nin icerdigi bilgiler (ekleri dahil olmak uzere) gizlidir. Onayimiz olmaksizin ucuncu kisilere aciklanamaz. Bu mesajin gonderilmek istendigi kisi degilseniz, lutfen mesaji sisteminizden derhal siliniz. Finans Portf?y Y?netimi A.S. bu mesajin icerdigi bilgilerin dogrulugu veya eksiksiz oldugu konusunda bir garanti vermemektedir. Bu nedenle bilgilerin ne sekilde olursa olsun iceriginden, iletilmesinden, alinmasindan, saklanmasindan sorumlu degildir. Bu mesajin icerigi yazarina ait olup, Finans Portf?y Y?netimi A.S.'nin goruslerini icermeyebilir.     The information contained in this e-mail (including any attachments) is confidential. It must not be disclosed to any person without our authority. If you are not the intended recipient, please delete it from your system immediately. Finans Portfoy Yonetimi A.S. makes no warranty as to the accuracy or completeness of any information contained in this message and hereby excludes any liability of any kind for the information contained therein or for the information transmission, reception, storage or use of such in any way whatsoever. Any opinions expressed in this message are those of the author and may not necessarily reflect the opinions of Finans Portfoy Yonetimi A.S.


	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From jasonhome at freenet.de  Mon Dec  5 20:53:51 2011
From: jasonhome at freenet.de (Philipp)
Date: Mon, 5 Dec 2011 11:53:51 -0800 (PST)
Subject: [R-SIG-Finance] Constrained Regression with Intercept in pcls
In-Reply-To: <1323100781738-4161066.post@n4.nabble.com>
References: <1322756294407-4129187.post@n4.nabble.com>
	<4ED7F0A4.1030108@yahoo.de>
	<1323100781738-4161066.post@n4.nabble.com>
Message-ID: <1323114831341-4161890.post@n4.nabble.com>

Hi Enrico,

sorry everything back. I got a manuel mistake.Your code works. Now I try to
form it for my data. I hope it works.

regards Phil.

--
View this message in context: http://r.789695.n4.nabble.com/Constrained-Regression-with-Intercept-in-pcls-tp4129187p4161890.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From harunozkan at gmail.com  Tue Dec  6 09:33:35 2011
From: harunozkan at gmail.com (Harun Ozkan)
Date: Tue, 06 Dec 2011 10:33:35 +0200
Subject: [R-SIG-Finance] function for x to the power of y
In-Reply-To: <CAHjr2U8O6TEZP=5Ng-UONOG07RYnwL7L6yC64MunxWYJ+O3+iQ@mail.gmail.com>
References: <1322711847.89375.YahooMailNeo@web190502.mail.sg3.yahoo.com>
	<1322936619.31502.YahooMailClassic@web30604.mail.mud.yahoo.com>
	<CAEDoPAGGC7vOMVzvGLnqrAwM5VRfg=WZU2TxNO9AMwoJcUw04g@mail.gmail.com>
	<CAHjr2U8O6TEZP=5Ng-UONOG07RYnwL7L6yC64MunxWYJ+O3+iQ@mail.gmail.com>
Message-ID: <4EDDD35F.5000702@gmail.com>

Alternatively, x**y.

2011-12-04 2:40 AM, Pierre Lapointe yazm??:
> What's wrong with x^y?
>
> Example:
>> 2^4
> [1] 16
>
> On Sat, Dec 3, 2011 at 1:40 PM, Samit Jain<sjain at caa.columbia.edu>  wrote:
>> You can write a simple function
>>
>> pow = function(x,y) { x^y }
>>
>> On Sat, Dec 3, 2011 at 1:23 PM, Jun Zhu<junzhu98 at yahoo.com>  wrote:
>>
>>> Hi,
>>> Does R has a mathematical function to calculate
>>> x to the power of y
>>>
>>> thanks,
>>> Jun
>>>         [[alternative HTML version deleted]]
>>>
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From dutt.debashis at gmail.com  Tue Dec  6 14:50:15 2011
From: dutt.debashis at gmail.com (debashis dutta)
Date: Tue, 6 Dec 2011 19:20:15 +0530
Subject: [R-SIG-Finance] Fed stress test
Message-ID: <CANwdwkRWON2Yh28KQJor2JmvjOjejOUaQEqT67D+8wxYLvjwhg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111206/93dde76e/attachment.pl>

From brian at braverock.com  Tue Dec  6 15:30:43 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 06 Dec 2011 08:30:43 -0600
Subject: [R-SIG-Finance] Fed stress test
In-Reply-To: <CANwdwkRWON2Yh28KQJor2JmvjOjejOUaQEqT67D+8wxYLvjwhg@mail.gmail.com>
References: <CANwdwkRWON2Yh28KQJor2JmvjOjejOUaQEqT67D+8wxYLvjwhg@mail.gmail.com>
Message-ID: <1323181843.30135.3.camel@brian-rcg>

On Tue, 2011-12-06 at 19:20 +0530, debashis dutta wrote:
> I am implementing Fed stress test on a bank portfolio. Is there any R
> library I can take help of ? Your kind guidance is highly solicited.

Obviously, basically all methodologies that are used in stress tests are
well supported in R.  Without more specificity about where you are
stuck, it's hard for anyone to help you without vague references to
'actuar', 'PerformanceAnalytics', 'AER', and the various CRAN task
views.

How about following the posting guide and being more specific about what
you've already done?

Perhaps this is an opportunity for you to contribute back to the
community that helps you by sharing the code you're working on
(obviously using some public data as examples, not your proprietary
portfolio data) 

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From David.Reiner at xrtrading.com  Tue Dec  6 16:45:53 2011
From: David.Reiner at xrtrading.com (David Reiner)
Date: Tue, 6 Dec 2011 09:45:53 -0600
Subject: [R-SIG-Finance] Bloomberg login through R
Message-ID: <9DE405308A6AA24AA794B76282C6C00F0DEA9E3B47@HQ-POST1>

I have a windows task scheduled to run a script to login to Bloomberg at a time before I need to get Bloomberg data.
I suppose you could run the script from within R if you prefer.
(I actually moved on to a C# program, but that is really off-topic.)
As John said, one seems to be able to get data while logged out, but sometimes it will fail, so being logged in is safer.
Here is my script BBLogin.wsf; it is not secure, but we share usage of the BB terminals anyway, so aren't concerned.
If anyone has a better way, please let us know!

<package>
   <job id="vbs">
      <script language="VBScript">
         set WshShell = WScript.CreateObject("WScript.Shell")
         WshShell.AppActivate "1-BLOOMBERG"
         WScript.Sleep 1000
         WshShell.SendKeys "{esc}"
         WScript.Sleep 1000
         WshShell.SendKeys "login~"
         WScript.Sleep 2000
         WshShell.SendKeys "YOURUSERNAME{tab}YOURPASSWORD~"
         WScript.Sleep 1000
      </script>
   </job>
</package>

HTH,
-- David


-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of John Laing
Sent: Monday, December 05, 2011 10:53 AM
To: Pierre Lapointe
Cc: Ayhan Y?ksel (Finans Portf?y A.?.); r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Bloomberg login through R

This will work to an extent, but is not the intended use. The Bloomberg APIs will continue to work for a time after you log off from the terminal. Eventually the connection will go away.

In response to Ayhan's original question: there is not a way to provide login credentials through R. It is expected that a terminal is already open and connected to Bloomberg, and the API then piggybacks on that session.

John

2011/12/5 Pierre Lapointe <pierrelap at gmail.com>:
> Why don't you try it?
> Type LOFF <GO> on your Bloomberg
> And try to use RBloomberg.
> It works on mine.
> 2011/12/5 Ayhan Y?ksel (Finans Portf?y A.?.) <Ayhan.Yuksel at finansportfoy.com>:
>> Hi,
>>
>>
>>
>> I have a question about gathering data from Bloomberg using Rbloomberg package.
>>
>>
>>
>> If the bloomberg terminal is logged off, is it possible to login to Bloomberg through R?
>>
>>
>>
>> e.g. something like:
>>
>>
>>
>> library(RBloomberg)
>>
>> conn <- blpConnect(username=ABCDE, password=123456)
>>
>>
>>
>> Kind regards,
>>
>> Ayhan Yuksel
>>
>>
>> Bu e-posta'nin icerdigi bilgiler (ekleri dahil olmak uzere) gizlidir. Onayimiz olmaksizin ucuncu kisilere aciklanamaz. Bu mesajin gonderilmek istendigi kisi degilseniz, lutfen mesaji sisteminizden derhal siliniz. Finans Portf?y Y?netimi A.S. bu mesajin icerdigi bilgilerin dogrulugu veya eksiksiz oldugu konusunda bir garanti vermemektedir. Bu nedenle bilgilerin ne sekilde olursa olsun iceriginden, iletilmesinden, alinmasindan, saklanmasindan sorumlu degildir. Bu mesajin icerigi yazarina ait olup, Finans Portf?y Y?netimi A.S.'nin goruslerini icermeyebilir.     The information contained in this e-mail (including any attachments) is confidential. It must not be disclosed to any person without our authority. If you are not the intended recipient, please delete it from your system immediately. Finans Portfoy Yonetimi A.S. makes no warranty as to the accuracy or completeness of any information contained in this message and hereby excludes any liability of any kind for the information contained therein or for the information transmission, reception, storage or use of such in any way whatsoever. Any opinions expressed in this message are those of the author and may not necessarily reflect the opinions of Finans Portfoy Yonetimi A.S.
>>
>>
>>        [[alternative HTML version deleted]]
>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

_______________________________________________
R-SIG-Finance at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


This e-mail and any materials attached hereto, including, without limitation, all content hereof and thereof (collectively, "XR Content") are confidential and proprietary to XR Trading, LLC ("XR") and/or its affiliates, and are protected by intellectual property laws.  Without the prior written consent of XR, the XR Content may not (i) be disclosed to any third party or (ii) be reproduced or otherwise used by anyone other than current employees of XR or its affiliates, on behalf of XR or its affiliates.

THE XR CONTENT IS PROVIDED AS IS, WITHOUT REPRESENTATIONS OR WARRANTIES OF ANY KIND.  TO THE MAXIMUM EXTENT PERMISSIBLE UNDER APPLICABLE LAW, XR HEREBY DISCLAIMS ANY AND ALL WARRANTIES, EXPRESS AND IMPLIED, RELATING TO THE XR CONTENT, AND NEITHER XR NOR ANY OF ITS AFFILIATES SHALL IN ANY EVENT BE LIABLE FOR ANY DAMAGES OF ANY NATURE WHATSOEVER, INCLUDING, BUT NOT LIMITED TO, DIRECT, INDIRECT, CONSEQUENTIAL, SPECIAL AND PUNITIVE DAMAGES, LOSS OF PROFITS AND TRADING LOSSES, RESULTING FROM ANY PERSON'S USE OR RELIANCE UPON, OR INABILITY TO USE, ANY XR CONTENT, EVEN IF XR IS ADVISED OF THE POSSIBILITY OF SUCH DAMAGES OR IF SUCH DAMAGES WERE FORESEEABLE.


From worik.stanton at gmail.com  Tue Dec  6 23:55:38 2011
From: worik.stanton at gmail.com (Worik Stanton)
Date: Wed, 07 Dec 2011 11:55:38 +1300
Subject: [R-SIG-Finance] A possible bug in SMA
Message-ID: <4EDE9D6A.70502@gmail.com>

 > A <- 5
 > L <- 1000
 > W.x <-xts(floor(rnorm(L) *100), as.Date(1:L))
 > S.x <- as.xts(SMA(W.x), A)
 > D.x <- tail(merge(W.x, S.x), n=(A+1))
 > D.x
             W.x   S.x
1972-09-22 -164 -35.9
1972-09-23  -21 -29.8
1972-09-24 -172 -47.7
1972-09-25   60 -40.6
1972-09-26  137 -16.2
1972-09-27   51 -27.3
 > cbind(mean(D.x[2:(A+1),"W.x"]), D.x[A+1,"S.x"])
            ..1   S.x
1972-09-27  11 -27.3


It seams obvious to me that "mean(D.x[2:(A+1),"W.x"])" should be the 
last SMA value, but it is not.

But I am often mistaken....

cheers
Worik

-- 
I am immensely proud of the young people who are driving the Occupy movement.  Outrage at the dominant paradigm is the appropriate response when one understands what has happened.
God Bless the Occupation


From gsee000 at gmail.com  Wed Dec  7 00:19:03 2011
From: gsee000 at gmail.com (G See)
Date: Tue, 6 Dec 2011 17:19:03 -0600
Subject: [R-SIG-Finance] A possible bug in SMA
In-Reply-To: <4EDE9D6A.70502@gmail.com>
References: <4EDE9D6A.70502@gmail.com>
Message-ID: <CA+xi=qY39WgyfgAP+PXOrJ3MiJm8psgKkVpRMdd9W-oU7kyuXA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111206/6709b3d3/attachment.pl>

From worik.stanton at gmail.com  Wed Dec  7 01:06:48 2011
From: worik.stanton at gmail.com (Worik Stanton)
Date: Wed, 07 Dec 2011 13:06:48 +1300
Subject: [R-SIG-Finance] A possible bug in SMA
In-Reply-To: <4EDE9D6A.70502@gmail.com>
References: <4EDE9D6A.70502@gmail.com>
Message-ID: <4EDEAE18.4060505@gmail.com>

Duh!

Not...
 > S.x <- as.xts(SMA(W.x), A)

But....
 > S.x <- as.xts(SMA(W.x, A) )

Excuse my incoherent babbling!

Worik

-- 
I am immensely proud of the young people who are driving the Occupy movement.  Outrage at the dominant paradigm is the appropriate response when one understands what has happened.
God Bless the Occupation


From petrovaa at gmail.com  Wed Dec  7 18:59:14 2011
From: petrovaa at gmail.com (tonyp)
Date: Wed, 7 Dec 2011 09:59:14 -0800 (PST)
Subject: [R-SIG-Finance] Rmetric Rolling Backtest Portfolio
Message-ID: <1323280754426-4169885.post@n4.nabble.com>

Hi guys,

I was wondering if anyone would know why I am getting this message (and how
to fix it). I ran everything by book but for some reason it is giving me the
following message.


Portfolio Backtesting:

Assets:              FUND1, FUND2
Benchmark:          Benchmark.X
Start Series:        2009-01-18
End Series:          2011-11-30
  Type:              MV
  Cov Estimator:     shrinkEstimator
  Solver:            solveRquadprog
Portfolio Windows:   equidistWindows
  Horizon:           12m
Portfolio Strategy:  tangencyStrategy
Portfolio Smoother:  emaSmoother
  doubleSmoothing:   TRUE
  Lambda:            3m

Portfolio Optimization:
Optimization Period     Target  Benchmark        Weights
Error in optimize(f = ratioFun, interval = range(getMu(Data)), maximum =
TRUE,  : 
  'xmin' not less than 'xmax'
Error in optimize(targetRiskFun, interval = range(getMu(Data)), data = Data, 
: 
  'xmin' not less than 'xmax'
> 


--
View this message in context: http://r.789695.n4.nabble.com/Rmetric-Rolling-Backtest-Portfolio-tp4169885p4169885.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From comtech.usa at gmail.com  Wed Dec  7 20:15:42 2011
From: comtech.usa at gmail.com (Michael)
Date: Wed, 7 Dec 2011 13:15:42 -0600
Subject: [R-SIG-Finance] nice time series viewer?
Message-ID: <CAPNjSFaMqx6O6Y-i37QV1zMq_ZTMUhWh+uoU0cc1wozQ5HJFBw@mail.gmail.com>

Hi all,

I am looking for a nice time series grapher/viewer in R ... with the
feature of scrolling, zooming, etc.

Hopefully it could be of the quality at the
report-generation-and-sending-to-boss level...

Could anybody please give me some recommendations/pointers?

Thanks a lot!


From michael.weylandt at gmail.com  Wed Dec  7 20:31:38 2011
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Wed, 7 Dec 2011 14:31:38 -0500
Subject: [R-SIG-Finance] [R] nice time series viewer?
In-Reply-To: <CAPNjSFaMqx6O6Y-i37QV1zMq_ZTMUhWh+uoU0cc1wozQ5HJFBw@mail.gmail.com>
References: <CAPNjSFaMqx6O6Y-i37QV1zMq_ZTMUhWh+uoU0cc1wozQ5HJFBw@mail.gmail.com>
Message-ID: <CAAmySGMcDu0bBhOxv1g2Nv5QBcohyNPsYVnM0S5mL3xwxsqa9w@mail.gmail.com>

plot.xts()

chartSeries() if you are using financial data?

It's going to depend on your (unstated) form of time series, but
generally R isn't set up for interactive graphics. (chartSeries being
the only time-series specific exception I know; you can also do Rgl
and Rggobi stuff with a little bit of work)

Also, please don't cross post to two lists.

Michael

On Wed, Dec 7, 2011 at 2:15 PM, Michael <comtech.usa at gmail.com> wrote:
> Hi all,
>
> I am looking for a nice time series grapher/viewer in R ... with the
> feature of scrolling, zooming, etc.
>
> Hopefully it could be of the quality at the
> report-generation-and-sending-to-boss level...
>
> Could anybody please give me some recommendations/pointers?
>
> Thanks a lot!
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From daniel.cegielka at gmail.com  Wed Dec  7 20:43:27 2011
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Wed, 7 Dec 2011 20:43:27 +0100
Subject: [R-SIG-Finance] nice time series viewer?
In-Reply-To: <CAPNjSFaMqx6O6Y-i37QV1zMq_ZTMUhWh+uoU0cc1wozQ5HJFBw@mail.gmail.com>
References: <CAPNjSFaMqx6O6Y-i37QV1zMq_ZTMUhWh+uoU0cc1wozQ5HJFBw@mail.gmail.com>
Message-ID: <CAPLrYEQRvu81+mZzjc=megf7aULxDmijm92wGSspA0audWdmQg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111207/57cd4138/attachment.pl>

From pict100 at gmail.com  Thu Dec  8 08:26:54 2011
From: pict100 at gmail.com (Db)
Date: Wed, 7 Dec 2011 23:26:54 -0800 (PST)
Subject: [R-SIG-Finance] Extracting data from google.finance: getSymbols
In-Reply-To: <CAEfYxiWV1vv4EHVXOrBVWpDQTWZ0WZvDf39bj2_Oh0UZp-JqpA@mail.gmail.com>
References: <CAEfYxiWV1vv4EHVXOrBVWpDQTWZ0WZvDf39bj2_Oh0UZp-JqpA@mail.gmail.com>
Message-ID: <1323329214784-4171811.post@n4.nabble.com>

#Extracting data
require(quantmod)
various.symbols
<-c("RDY","HDB","IBN","INFY","MTE","PTI","REDF","SIFY","SLT","TCL","TTM","WIT","WNS")

mv <- function(symbol,fromd){
    setSymbolLookup(ASTOCK=list(src="google",from=fromd,name=symbol))
    getSymbols("ASTOCK")
    liquidity <- ASTOCK[,5]
    res <- aggregate(liquidity,as.yearmon,mean)
    print(res)
    return(res)
    }


start.date="2002-01-01"
dat <- mv("RDY",start.date)
colnames(dat) <- various.symbols[1]

for(i in 2:length(various.symbols)){
  cat("Working on:",various.symbols[i],"\n")
  datu <- mv(various.symbols[i],start.date)
  colnames(datu) <- various.symbols[i]
  dat <- cbind(dat,datu,all=TRUE)
  }


# Results

tail(dat)

#########  Monthly Average Volume
###########################################





--
View this message in context: http://r.789695.n4.nabble.com/Extracting-data-from-google-finance-getSymbols-tp4153191p4171811.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From arun.kumar.saha at gmail.com  Thu Dec  8 09:48:39 2011
From: arun.kumar.saha at gmail.com (Arun.stat)
Date: Thu, 8 Dec 2011 00:48:39 -0800 (PST)
Subject: [R-SIG-Finance] [R] nice time series viewer?
In-Reply-To: <CAAmySGMcDu0bBhOxv1g2Nv5QBcohyNPsYVnM0S5mL3xwxsqa9w@mail.gmail.com>
References: <CAPNjSFaMqx6O6Y-i37QV1zMq_ZTMUhWh+uoU0cc1wozQ5HJFBw@mail.gmail.com>
	<CAAmySGMcDu0bBhOxv1g2Nv5QBcohyNPsYVnM0S5mL3xwxsqa9w@mail.gmail.com>
Message-ID: <1323334119711-4171972.post@n4.nabble.com>

Hi LosemindL, I think what you want can be achievable through googleVis
package (http://cran.r-project.org/web/packages/googleVis/index.html.)

Thanks and regards,

PS. as already said (and in fact advised many times in this forum) please do
not cross post in multiple forums........it is not the proper etiquette to
be followed in any forum over net.
_____________________________________________________

Arun Kumar Saha, FRM
QUANTITATIVE RISK AND HEDGE CONSULTING SPECIALIST
Visit me at: http://in.linkedin.com/in/ArunFRM
_____________________________________________________


--
View this message in context: http://r.789695.n4.nabble.com/nice-time-series-viewer-tp4170205p4171972.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From ArvanitisCh at piraeusbank.gr  Thu Dec  8 16:27:48 2011
From: ArvanitisCh at piraeusbank.gr (ArvanitisCh at piraeusbank.gr)
Date: Thu, 8 Dec 2011 15:27:48 +0000
Subject: [R-SIG-Finance] The challenge to fit the greek gov curve with
	termstrc R Package!
Message-ID: <1D0553B3A773464E9C862F25286DD1CB3714A311@msexc10mb.central.piraeusgroup.gr>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111208/90febd6c/attachment.pl>

From enricoschumann at yahoo.de  Thu Dec  8 17:05:44 2011
From: enricoschumann at yahoo.de (Enrico Schumann)
Date: Thu, 08 Dec 2011 17:05:44 +0100
Subject: [R-SIG-Finance] The challenge to fit the greek gov curve with
 termstrc R Package!
In-Reply-To: <1D0553B3A773464E9C862F25286DD1CB3714A311@msexc10mb.central.piraeusgroup.gr>
References: <1D0553B3A773464E9C862F25286DD1CB3714A311@msexc10mb.central.piraeusgroup.gr>
Message-ID: <4EE0E058.5090606@yahoo.de>


Hi Christos

first, I don't use the termstrc package, so this is all guess work.

If the bonds mature reasonably soon (say, next year), and have a price 
of 30 or so, they will have a high yield-to-maturity.

Now, 'uniroot' could be used to compute a yield to maturity. But 
'uniroot' requires a search interval. I would not be unreasonable to 
suspect that this interval does not include yields of, say, 150%.

So, if all these guesses are right, you need to figure out where this 
interval is set, and just increase its width (to, say, 300% or so).

I hope that I am not completely off-track here ... ;)

Regards,
Enrico



Am 08.12.2011 16:27, schrieb ArvanitisCh at piraeusbank.gr:
> Hello to everyone!
>
> I am trying to calculate ZC Greek Govt curve using the termstrc R package.
>
> I have list arrange my dataset as prescribed in the termstrc package
>
> When I run cs_res<- estim_nss(cbonds,"greece")  I am getting the following error:
>
> Error in uniroot(pvcashflows, searchint, tol = tol, maxiter = 3000) :
>    f() values at end points not of opposite sign
>
> searching a bit at the forum i have found a link which says that this is because the data set is not arranged as it should!
>
> http://r.789695.n4.nabble.com/Library-termstrc-td3057745.html
>
> But I am sure that my data set is arranged properly
>
> The only issue that may cause this error is the low market prices of the bonds at this period!!!!
>
> When I shifted the bond prices by 60 figures [29--->89] the error is removed !!!
>
> Is there any way to fix this issue and calculate the Curve??
>
> Tnks in advance for your help
>
> Regards
> Christos
>
> PS The structure of my datasets is:
>
> List of 5
>   $ greece :List of 8
>    ..$ ISIN        : chr [1:11] "GR0114020457" "GR0114022479" "GR0114023485" "GR0124028623" ...
>    ..$ MATURITYDATE:Class 'Date'  num [1:11] 15571 16301 16666 17001 17366 ...
>    ..$ ISSUEDATE   :Class 'Date'  num [1:11] 13573 14271 14641 13165 13529 ...
>    ..$ COUPONRATE  : num [1:11] 4.1 5.5 6.1 3.6 4.3 4.6 6 6.5 6.25 5.3 ...
>    ..$ PRICE       : num [1:11] 29.7 20.9 24.5 19.8 19.5 ...
>    ..$ ACCRUED     : num [1:11] 1.29 1.73 1.92 1.44 1.72 ...
>    ..$ CASHFLOWS   :List of 3
>    .. ..$ ISIN: chr [1:96] "GR0114020457" "GR0114022479" "GR0114022479" "GR0114022479" ...
>    .. ..$ CF  : num [1:96] 104.1 5.5 5.5 105.5 6.1 ...
>    .. ..$ DATE:Class 'Date'  num [1:96] 15571 15571 15936 16301 15571 ...
>    ..$ TODAY       :Class 'Date'  num 15316
>   $ germany:List of 8
>    ..$ ISIN        : chr [1:11] "DE0001137321" "DE0001141547" "DE0001141562" "DE0001141596" ...
>    ..$ MATURITYDATE:Class 'Date'  num [1:11] 15687 16170 16492 16856 17169 ...
>    ..$ ISSUEDATE   :Class 'Date'  num [1:11] 14924 14329 14623 14987 13468 ...
>    ..$ COUPONRATE  : num [1:11] 1 2.25 2.5 2 3.75 4 3.75 3.25 2.5 6.25 ...
>    ..$ PRICE       : num [1:11] 101 105 106 105 113 ...
>    ..$ ACCRUED     : num [1:11] 1.08 1.51 1.98 1.82 3.52 ...
>    ..$ CASHFLOWS   :List of 3
>    .. ..$ ISIN: chr [1:98] "DE0001137321" "DE0001137321" "DE0001141547" "DE0001141547" ...
>    .. ..$ CF  : num [1:98] 1.09 101 2.25 2.25 102.25 ...
>    .. ..$ DATE:Class 'Date'  num [1:98] 15321 15687 15440 15805 16170 ...
>    ..$ TODAY       :Class 'Date'  num 15316
>   $ us     :List of 8
>    ..$ ISIN        : chr [1:6] "US912828PW43" "US912810PZ57" "US912828PM60" "US912828PN44" ...
>    ..$ MATURITYDATE:Class 'Date'  num [1:6] 15704 21563 16799 17530 18488 ...
>    ..$ ISSUEDATE   :Class 'Date'  num [1:6] 14973 14273 14973 14973 14836 ...
>    ..$ COUPONRATE  : num [1:6] 0.625 2.5 2.125 2.75 2.625 ...
>    ..$ PRICE       : num [1:6] 100 132 106 109 106 ...
>    ..$ ACCRUED     : num [1:6] 0.275 0.999 0.935 1.211 0.827 ...
>    ..$ CASHFLOWS   :List of 3
>    .. ..$ ISIN: chr [1:136] "US912828PW43" "US912828PW43" "US912828PW43" "US912810PZ57" ...
>    .. ..$ CF  : num [1:136] 0.312 0.312 100.312 1.32 1.345 ...
>    .. ..$ DATE:Class 'Date'  num [1:136] 15338 15520 15704 15353 15535 ...
>    ..$ TODAY       :Class 'Date'  num 15316
>   $ ote    :List of 8
>    ..$ ISIN        : chr [1:3] "XS0173549659" "XS0275776283" "XS0346402463"
>    ..$ MATURITYDATE:Class 'Date'  num [1:3] 15921 16940 16477
>    ..$ ISSUEDATE   :Class 'Date'  num [1:3] 12268 13472 13920
>    ..$ COUPONRATE  : num [1:3] 5 4.62 6
>    ..$ PRICE       : num [1:3] 72.2 57.7 62
>    ..$ ACCRUED     : num [1:3] 1.78 2.62 5
>    ..$ CASHFLOWS   :List of 3
>    .. ..$ ISIN: chr [1:11] "XS0173549659" "XS0173549659" "XS0275776283" "XS0275776283" ...
>    .. ..$ CF  : num [1:11] 5 105 4.62 4.62 4.62 ...
>    .. ..$ DATE:Class 'Date'  num [1:11] 15556 15921 15479 15844 16209 ...
>    ..$ TODAY       :Class 'Date'  num 15316
>   $ eurob  :List of 8
>    ..$ ISIN        : chr [1:3] "XS0443680052" "XS0291422979" "XS0284635702"
>    ..$ MATURITYDATE:Class 'Date'  num [1:3] 15746 15426 16105
>    ..$ ISSUEDATE   :Class 'Date'  num [1:3] 14466 13599 13548
>    ..$ COUPONRATE  : num [1:3] 4.38 1.68 1.78
>    ..$ PRICE       : num [1:3] 56.4 80.7 55.3
>    ..$ ACCRUED     : num [1:3] 3.656 0.356 0.178
>    ..$ CASHFLOWS   :List of 3
>    .. ..$ ISIN: chr [1:13] "XS0443680052" "XS0443680052" "XS0291422979" "XS0291422979" ...
>    .. ..$ CF  : num [1:13] 4.375 104.375 0.426 100.404 0.45 ...
>    .. ..$ DATE:Class 'Date'  num [1:13] 15380 15746 15335 15426 15375 ...
>    ..$ TODAY       :Class 'Date'  num 15316
>   - attr(*, "class")= chr "couponbonds"
>
> ____________________________________
> Christos Arvanitis
> Assistant Manager
> Treasury Support Operations
> PIRAEUS BANK S.A.
> 5 Korai str., Athens, GR 10564
>
> Tel:         ?   +30 210 3288678
> Mobile:     ?    +30 6936114432
> e-mail:            ArvanitisCh at piraeusbank.gr<mailto:ArvanitisCh at piraeusbank.gr>
>
>
>
> MESSAGE CONFIDENTIALITY&  SECURITY NOTICE
>
> =========================================
>
> This message and/or its attachments may contain confidential and privileged information and is intended for the named person or entity to which it is addressed. Any use, copying or distribution of this information by anyone other than the intended recipient(s) is prohibited by law. If you receive this in error, please immediately delete it from your system and notify the sender.
>
> The contents of this message contain personal opinions of the sender, which are not the official views of Piraeus Bank nor do they consist a provision of financial or advisory services unless expressly stated otherwise. This message is not a solicitation and/or an offer or acceptance of any proposal in relation to any contract or transaction unless expressly otherwise indicated in the message itself.
>
> The Internet is not a secure or error-free environment, and Piraeus Bank does not accept liability for any loss or damage arising from the use of this message or from delayed, intercepted, corrupted or virus-infected e-mail transmission.
>
>
>
> 	[[alternative HTML version deleted]]
>
>
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Enrico Schumann
Lucerne, Switzerland
http://nmof.net/


From enricoschumann at yahoo.de  Thu Dec  8 17:46:24 2011
From: enricoschumann at yahoo.de (Enrico Schumann)
Date: Thu, 08 Dec 2011 17:46:24 +0100
Subject: [R-SIG-Finance] The challenge to fit the greek gov curve with
 termstrc R Package!
In-Reply-To: <1D0553B3A773464E9C862F25286DD1CB3714A3BC@msexc10mb.central.piraeusgroup.gr>
References: <1D0553B3A773464E9C862F25286DD1CB3714A311@msexc10mb.central.piraeusgroup.gr>
	<4EE0E058.5090606@yahoo.de>
	<1D0553B3A773464E9C862F25286DD1CB3714A3BC@msexc10mb.central.piraeusgroup.gr>
Message-ID: <4EE0E9E0.3000007@yahoo.de>


[this goes to the list so that others may benefit as well, though I am 
not so sure about 'benefit'  :) ]

A good start would be to provide a small data set with 'dput', maybe 
attached as a txt-file, and the exact things you tried.

Again, I have never used the package, so you may look for help 
elsewhere. But here is what I see:

The function 'bond_yields' seems to set the limits for uniroot to -1 and 
1; I am not sure if they can be passed with your initial function call 
(I will not read the documentation for you). Since the package has a 
namespace, you cannot simply create a copy of the function. But you can 
use 'trace', with 'edit = TRUE'.

Thus,

 > trace(bond_yields, edit = TRUE)

and add the line (say)

searchint = c(-1, 20)

With this I got, with the data set you sent me off-list

$greece
      tau_min      tau_max gridstepsize
    0.2794521   28.8027397    0.2000000

[1] "Searching startparameters for  greece"
        beta0        beta1        beta2         tau1
2045.9677643   77.8918645   74.3183463    0.2795521
---------------------------------------------------
Estimated Nelson/Siegel parameters:
---------------------------------------------------

        greece
beta_0 2045.96776
beta_1   77.89186
beta_2   74.31835
tau_1     0.27951

This is all a bit dirty, and I cannot judge if it is meaningful at all.


Regards,
Enrico



Am 08.12.2011 17:11, schrieb ArvanitisCh at piraeusbank.gr:
> Yes I have searched and not able to find it out
>
> Can you provide some guidance?
>
> I have also send an image data in order to have easily reproducible results would you like to try out?
>
> Regards
> christos
>
> -----Original Message-----

> Sent: Thursday, December 08, 2011 6:06 PM
> To: ????????? ???????; r-sig-finance at r-project.org
[[elided Yahoo spam]]
>
>
> Hi Christos
>
> first, I don't use the termstrc package, so this is all guess work.
>
> If the bonds mature reasonably soon (say, next year), and have a price
> of 30 or so, they will have a high yield-to-maturity.
>
> Now, 'uniroot' could be used to compute a yield to maturity. But
> 'uniroot' requires a search interval. I would not be unreasonable to
> suspect that this interval does not include yields of, say, 150%.
>
> So, if all these guesses are right, you need to figure out where this
> interval is set, and just increase its width (to, say, 300% or so).
>
> I hope that I am not completely off-track here ... ;)
>
> Regards,
> Enrico
>
>
>
> Am 08.12.2011 16:27, schrieb ArvanitisCh at piraeusbank.gr:
[[elided Yahoo spam]]
>>
>> I am trying to calculate ZC Greek Govt curve using the termstrc R package.
>>
>> I have list arrange my dataset as prescribed in the termstrc package
>>
>> When I run cs_res<- estim_nss(cbonds,"greece")  I am getting the following error:
>>
>> Error in uniroot(pvcashflows, searchint, tol = tol, maxiter = 3000) :
>>     f() values at end points not of opposite sign
>>
[[elided Yahoo spam]]
>>
>> http://r.789695.n4.nabble.com/Library-termstrc-td3057745.html
>>
>> But I am sure that my data set is arranged properly
>>
[[elided Yahoo spam]]
>>
[[elided Yahoo spam]]
>>
>> Is there any way to fix this issue and calculate the Curve??
>>
>> Tnks in advance for your help
>>
>> Regards
>> Christos
>>
>> PS The structure of my datasets is:
>>
>> List of 5
>>    $ greece :List of 8
>>     ..$ ISIN        : chr [1:11] "GR0114020457" "GR0114022479" "GR0114023485" "GR0124028623" ...
>>     ..$ MATURITYDATE:Class 'Date'  num [1:11] 15571 16301 16666 17001 17366 ...
>>     ..$ ISSUEDATE   :Class 'Date'  num [1:11] 13573 14271 14641 13165 13529 ...
>>     ..$ COUPONRATE  : num [1:11] 4.1 5.5 6.1 3.6 4.3 4.6 6 6.5 6.25 5.3 ...
>>     ..$ PRICE       : num [1:11] 29.7 20.9 24.5 19.8 19.5 ...
>>     ..$ ACCRUED     : num [1:11] 1.29 1.73 1.92 1.44 1.72 ...
>>     ..$ CASHFLOWS   :List of 3
>>     .. ..$ ISIN: chr [1:96] "GR0114020457" "GR0114022479" "GR0114022479" "GR0114022479" ...
>>     .. ..$ CF  : num [1:96] 104.1 5.5 5.5 105.5 6.1 ...
>>     .. ..$ DATE:Class 'Date'  num [1:96] 15571 15571 15936 16301 15571 ...
>>     ..$ TODAY       :Class 'Date'  num 15316
>>    $ germany:List of 8
>>     ..$ ISIN        : chr [1:11] "DE0001137321" "DE0001141547" "DE0001141562" "DE0001141596" ...
>>     ..$ MATURITYDATE:Class 'Date'  num [1:11] 15687 16170 16492 16856 17169 ...
>>     ..$ ISSUEDATE   :Class 'Date'  num [1:11] 14924 14329 14623 14987 13468 ...
>>     ..$ COUPONRATE  : num [1:11] 1 2.25 2.5 2 3.75 4 3.75 3.25 2.5 6.25 ...
>>     ..$ PRICE       : num [1:11] 101 105 106 105 113 ...
>>     ..$ ACCRUED     : num [1:11] 1.08 1.51 1.98 1.82 3.52 ...
>>     ..$ CASHFLOWS   :List of 3
>>     .. ..$ ISIN: chr [1:98] "DE0001137321" "DE0001137321" "DE0001141547" "DE0001141547" ...
>>     .. ..$ CF  : num [1:98] 1.09 101 2.25 2.25 102.25 ...
>>     .. ..$ DATE:Class 'Date'  num [1:98] 15321 15687 15440 15805 16170 ...
>>     ..$ TODAY       :Class 'Date'  num 15316
>>    $ us     :List of 8
>>     ..$ ISIN        : chr [1:6] "US912828PW43" "US912810PZ57" "US912828PM60" "US912828PN44" ...
>>     ..$ MATURITYDATE:Class 'Date'  num [1:6] 15704 21563 16799 17530 18488 ...
>>     ..$ ISSUEDATE   :Class 'Date'  num [1:6] 14973 14273 14973 14973 14836 ...
>>     ..$ COUPONRATE  : num [1:6] 0.625 2.5 2.125 2.75 2.625 ...
>>     ..$ PRICE       : num [1:6] 100 132 106 109 106 ...
>>     ..$ ACCRUED     : num [1:6] 0.275 0.999 0.935 1.211 0.827 ...
>>     ..$ CASHFLOWS   :List of 3
>>     .. ..$ ISIN: chr [1:136] "US912828PW43" "US912828PW43" "US912828PW43" "US912810PZ57" ...
>>     .. ..$ CF  : num [1:136] 0.312 0.312 100.312 1.32 1.345 ...
>>     .. ..$ DATE:Class 'Date'  num [1:136] 15338 15520 15704 15353 15535 ...
>>     ..$ TODAY       :Class 'Date'  num 15316
>>    $ ote    :List of 8
>>     ..$ ISIN        : chr [1:3] "XS0173549659" "XS0275776283" "XS0346402463"
>>     ..$ MATURITYDATE:Class 'Date'  num [1:3] 15921 16940 16477
>>     ..$ ISSUEDATE   :Class 'Date'  num [1:3] 12268 13472 13920
>>     ..$ COUPONRATE  : num [1:3] 5 4.62 6
>>     ..$ PRICE       : num [1:3] 72.2 57.7 62
>>     ..$ ACCRUED     : num [1:3] 1.78 2.62 5
>>     ..$ CASHFLOWS   :List of 3
>>     .. ..$ ISIN: chr [1:11] "XS0173549659" "XS0173549659" "XS0275776283" "XS0275776283" ...
>>     .. ..$ CF  : num [1:11] 5 105 4.62 4.62 4.62 ...
>>     .. ..$ DATE:Class 'Date'  num [1:11] 15556 15921 15479 15844 16209 ...
>>     ..$ TODAY       :Class 'Date'  num 15316
>>    $ eurob  :List of 8
>>     ..$ ISIN        : chr [1:3] "XS0443680052" "XS0291422979" "XS0284635702"
>>     ..$ MATURITYDATE:Class 'Date'  num [1:3] 15746 15426 16105
>>     ..$ ISSUEDATE   :Class 'Date'  num [1:3] 14466 13599 13548
>>     ..$ COUPONRATE  : num [1:3] 4.38 1.68 1.78
>>     ..$ PRICE       : num [1:3] 56.4 80.7 55.3
>>     ..$ ACCRUED     : num [1:3] 3.656 0.356 0.178
>>     ..$ CASHFLOWS   :List of 3
>>     .. ..$ ISIN: chr [1:13] "XS0443680052" "XS0443680052" "XS0291422979" "XS0291422979" ...
>>     .. ..$ CF  : num [1:13] 4.375 104.375 0.426 100.404 0.45 ...
>>     .. ..$ DATE:Class 'Date'  num [1:13] 15380 15746 15335 15426 15375 ...
>>     ..$ TODAY       :Class 'Date'  num 15316
>>    - attr(*, "class")= chr "couponbonds"
>>
>> ____________________________________
>> Christos Arvanitis
>> Assistant Manager
>> Treasury Support Operations
>> PIRAEUS BANK S.A.
>> 5 Korai str., Athens, GR 10564
>>
>> Tel:         ?   +30 210 3288678
>> Mobile:     ?    +30 6936114432
>> e-mail:            ArvanitisCh at piraeusbank.gr<mailto:ArvanitisCh at piraeusbank.gr>
>>
>>
>>
>> MESSAGE CONFIDENTIALITY&   SECURITY NOTICE
>>
>> =========================================
>>
>> This message and/or its attachments may contain confidential and privileged information and is intended for the named person or entity to which it is addressed. Any use, copying or distribution of this information by anyone other than the intended recipient(s) is prohibited by law. If you receive this in error, please immediately delete it from your system and notify the sender.
>>
>> The contents of this message contain personal opinions of the sender, which are not the official views of Piraeus Bank nor do they consist a provision of financial or advisory services unless expressly stated otherwise. This message is not a solicitation and/or an offer or acceptance of any proposal in relation to any contract or transaction unless expressly otherwise indicated in the message itself.
>>
>> The Internet is not a secure or error-free environment, and Piraeus Bank does not accept liability for any loss or damage arising from the use of this message or from delayed, intercepted, corrupted or virus-infected e-mail transmission.
>>
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>>
>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>

-- 
Enrico Schumann
Lucerne, Switzerland
http://nmof.net/


From qian at wealthfront.com  Fri Dec  9 23:50:59 2011
From: qian at wealthfront.com (Qian Liu)
Date: Fri, 9 Dec 2011 14:50:59 -0800
Subject: [R-SIG-Finance] Does fPortfolio support inequality constraints in
	MV optimization?
Message-ID: <CALYHgYBbC_EWHXicb=wqG0N+ZYpUyeYWWmhYa=8ZmFn75NHhGQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111209/3c60dc04/attachment.pl>

From christian.langkamp at gmxpro.de  Sun Dec 11 15:41:47 2011
From: christian.langkamp at gmxpro.de (clangkamp)
Date: Sun, 11 Dec 2011 06:41:47 -0800 (PST)
Subject: [R-SIG-Finance] Questions related to R-Credit Risk
In-Reply-To: <6BC17AB6B99BC441ABC83269178375A327D307@grcserver.gutmark.de>
References: <6BC17AB6B99BC441ABC83269178375A327D307@grcserver.gutmark.de>
Message-ID: <1323614507472-4183005.post@n4.nabble.com>

Dear Mr. Radtke,
So now - 2 years later than the original thread - how far have your
developments of credit portfolio models in R progressed at your company ?

Did you build a CPV model ?

Christian

-----
Christian Langkamp
christian.langkamp-at-gmxpro.de

--
View this message in context: http://r.789695.n4.nabble.com/Questions-related-to-R-Credit-Risk-tp989759p4183005.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From comtech.usa at gmail.com  Mon Dec 12 03:56:17 2011
From: comtech.usa at gmail.com (Michael)
Date: Sun, 11 Dec 2011 20:56:17 -0600
Subject: [R-SIG-Finance] Question about fitting seasonal ARIMA in R?
In-Reply-To: <CAPNjSFZKDpArx2rmMmuuBUSz=jGVu_NALrezDKFtSjc6NyrkFQ@mail.gmail.com>
References: <CAPNjSFZKDpArx2rmMmuuBUSz=jGVu_NALrezDKFtSjc6NyrkFQ@mail.gmail.com>
Message-ID: <CAPNjSFbv4v4NJmQbdgcbvtkfUpfuTB0_QmWDH7pwOdTib+Pi=A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111211/03b181e7/attachment.pl>

From comtech.usa at gmail.com  Mon Dec 12 04:23:09 2011
From: comtech.usa at gmail.com (Michael)
Date: Sun, 11 Dec 2011 21:23:09 -0600
Subject: [R-SIG-Finance] [R] nice time series viewer?
In-Reply-To: <1323334119711-4171972.post@n4.nabble.com>
References: <CAPNjSFaMqx6O6Y-i37QV1zMq_ZTMUhWh+uoU0cc1wozQ5HJFBw@mail.gmail.com>
	<CAAmySGMcDu0bBhOxv1g2Nv5QBcohyNPsYVnM0S5mL3xwxsqa9w@mail.gmail.com>
	<1323334119711-4171972.post@n4.nabble.com>
Message-ID: <CAPNjSFZn=t4UmkBOK4q_jqnKiaumB47ueOMBM_-J59ydw0aw6Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111211/4aaae5f3/attachment.pl>

From arun.kumar.saha at gmail.com  Mon Dec 12 07:45:10 2011
From: arun.kumar.saha at gmail.com (Arun Kumar Saha)
Date: Mon, 12 Dec 2011 12:15:10 +0530
Subject: [R-SIG-Finance] [R] nice time series viewer?
In-Reply-To: <CAPNjSFZn=t4UmkBOK4q_jqnKiaumB47ueOMBM_-J59ydw0aw6Q@mail.gmail.com>
References: <CAPNjSFaMqx6O6Y-i37QV1zMq_ZTMUhWh+uoU0cc1wozQ5HJFBw@mail.gmail.com>
	<CAAmySGMcDu0bBhOxv1g2Nv5QBcohyNPsYVnM0S5mL3xwxsqa9w@mail.gmail.com>
	<1323334119711-4171972.post@n4.nabble.com>
	<CAPNjSFZn=t4UmkBOK4q_jqnKiaumB47ueOMBM_-J59ydw0aw6Q@mail.gmail.com>
Message-ID: <CAPVuaOcq68RRytCfD0mU3cvcZ71bY9ra1mLjo+UhGkfRVb8JZQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111212/6f5cdc6b/attachment.ksh>

From massimo.salese at gmail.com  Mon Dec 12 12:13:35 2011
From: massimo.salese at gmail.com (msalese)
Date: Mon, 12 Dec 2011 03:13:35 -0800 (PST)
Subject: [R-SIG-Finance] InferenceForR and Rmetrics
Message-ID: <1323688415618-4185574.post@n4.nabble.com>

Hi everyone,
is someone using inferenceForR tools to develop R finance code in Excel ?

--
View this message in context: http://r.789695.n4.nabble.com/InferenceForR-and-Rmetrics-tp4185574p4185574.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From hans.radtke at gutmark.net  Mon Dec 12 12:47:10 2011
From: hans.radtke at gutmark.net (Hans Radtke)
Date: Mon, 12 Dec 2011 11:47:10 +0000
Subject: [R-SIG-Finance] Questions related to R-Credit Risk
In-Reply-To: <mailman.1.1323687601.20325.r-sig-finance@r-project.org>
References: <mailman.1.1323687601.20325.r-sig-finance@r-project.org>
Message-ID: <DD3142D7A1485847A8B1AFCB9BAAB3D50E27E6@GRCFFMDC01.gutmark.de>

Christian,

Very timely question! Not only have we developed our own model prototype, but we are also using it with some of our clients right now. And we are seeing substantial interest in EC models at present, as many financial institutions are "incentivised" to implement more rigorous capital management processes. 

As you would expect, the thorniest issues in implementing such models are not necessarily around general C-VaR methodology, but around practical issues such as estimating asset correlation between sectoral/regional clusters, allocating capital down to the transaction level, handling assets in default, etc. In other words, the majority of our work is less focused on "The Model" itself, but on the sub-models required to provide input into it.

But I'm conscious of the fact that this thread should not be hijacked for marketing & PR purposes... so, I'm happy to share further information bilaterally or answer any questions specifically related to implementing this in R.

(and now for a commercial break...)

Mit besten Gr??en / With kind regards
Hans Radtke
Vorstand
?
Gutmark, Radtke & Company AG
Lotzstrasse 36
65934 Frankfurt
?
Telefon? +49 69 35358-102
Telefax? +49 69 35358-100 (Office)
???????? +49 69 255-77374 (eFax)
Mobil??? +49 162 7675407? (DE)
???????? +44 7798 812089? (UK)
?

Gutmark, Radtke & Company AG is incorporated under German law. Board of Directors (Vorstand): Benny Gutmark, Hans Radtke. Supervisory Board (Aufsichtsrat): Dr Jacob Gutmark, Chairman. Company Registration: HRB 53028, Amtsgericht Frankfurt. Value Added Tax Registration (USt-IdNr): DE218021594. This e-mail and any attachments are confidential and may be legally privileged. If you are not the intended recipient please notify the sender immediately and delete this email. Any dissemination, distribution, copying or other use is strictly prohibited. Any opinions expressed in this communication are personal and are not attributable to Gutmark, Radtke & Company. Any communication related to specific engagements is to be read in conjunction with the relevant engagement letter or proposal document as well as our terms and conditions.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Hans Radtke.vcf
Type: text/x-vcard
Size: 4522 bytes
Desc: Hans Radtke.vcf
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111212/9472a9b4/attachment.vcf>

From zach.mayer at gmail.com  Mon Dec 12 15:16:15 2011
From: zach.mayer at gmail.com (Zachary Mayer)
Date: Mon, 12 Dec 2011 09:16:15 -0500
Subject: [R-SIG-Finance] Question about fitting seasonal ARIMA in R?
In-Reply-To: <CAPNjSFbv4v4NJmQbdgcbvtkfUpfuTB0_QmWDH7pwOdTib+Pi=A@mail.gmail.com>
References: <CAPNjSFZKDpArx2rmMmuuBUSz=jGVu_NALrezDKFtSjc6NyrkFQ@mail.gmail.com>
	<CAPNjSFbv4v4NJmQbdgcbvtkfUpfuTB0_QmWDH7pwOdTib+Pi=A@mail.gmail.com>
Message-ID: <CAEr64e-gUT_iALTyguheEvihsYZ8_4YqQXq4Xeeu_1xw_=_UwQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111212/24ab1d20/attachment.pl>

From comtech.usa at gmail.com  Mon Dec 12 15:48:30 2011
From: comtech.usa at gmail.com (Michael)
Date: Mon, 12 Dec 2011 08:48:30 -0600
Subject: [R-SIG-Finance] R and Backtest platforms?
Message-ID: <CAPNjSFbiTgBVmWUZBandrfw96z1Z6zQb_g==DHV+pqASqUtLvA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111212/5ccd9501/attachment.pl>

From comtech.usa at gmail.com  Mon Dec 12 17:13:02 2011
From: comtech.usa at gmail.com (Michael)
Date: Mon, 12 Dec 2011 10:13:02 -0600
Subject: [R-SIG-Finance] msts command in the forecast package?
Message-ID: <CAPNjSFa8EPbiPGfNJZu2T-+6a0tid0xY1AfjkYAB=rr0vR3hUA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111212/b38f6960/attachment.pl>

From comtech.usa at gmail.com  Mon Dec 12 18:09:07 2011
From: comtech.usa at gmail.com (Michael)
Date: Mon, 12 Dec 2011 11:09:07 -0600
Subject: [R-SIG-Finance] R and Backtest platforms?
In-Reply-To: <CAEr64e9L8GosV=VrcvmD_FEvdMbD52aAFP44yzEf_ZvE_sBACw@mail.gmail.com>
References: <CAPNjSFbiTgBVmWUZBandrfw96z1Z6zQb_g==DHV+pqASqUtLvA@mail.gmail.com>
	<CAEr64e9L8GosV=VrcvmD_FEvdMbD52aAFP44yzEf_ZvE_sBACw@mail.gmail.com>
Message-ID: <CAPNjSFbAOFgkMA46TG=oCa53P59Y2ckw=m0Z6J3x7TDtM+8Zmw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111212/26d92b6c/attachment.pl>

From jeffrey.ryan at lemnica.com  Mon Dec 12 18:17:09 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Mon, 12 Dec 2011 11:17:09 -0600
Subject: [R-SIG-Finance] R and Backtest platforms?
In-Reply-To: <CAPNjSFbAOFgkMA46TG=oCa53P59Y2ckw=m0Z6J3x7TDtM+8Zmw@mail.gmail.com>
References: <CAPNjSFbiTgBVmWUZBandrfw96z1Z6zQb_g==DHV+pqASqUtLvA@mail.gmail.com>
	<CAEr64e9L8GosV=VrcvmD_FEvdMbD52aAFP44yzEf_ZvE_sBACw@mail.gmail.com>
	<CAPNjSFbAOFgkMA46TG=oCa53P59Y2ckw=m0Z6J3x7TDtM+8Zmw@mail.gmail.com>
Message-ID: <CABDUZc_vG_TA2Q-Kak5VTWAc8XW+si=j+X=e4+dM3j_3DvbkQw@mail.gmail.com>

R is is missing an *interactive* **device**.  If you think you can
solve that elegantly, have at it.  But general chatter about
high-level ideas isn't really appropriate for the list.

Best,
Jeff



On Mon, Dec 12, 2011 at 11:09 AM, Michael <comtech.usa at gmail.com> wrote:
> Which existing platform is easier to be stripped out for the
> graphing/charting module?
>
> I was originally thinking of Multi-charts/TradeStation... but it's paid...
>
> Any thoughts?
>
> On Mon, Dec 12, 2011 at 8:55 AM, Zachary Mayer <zach.mayer at gmail.com> wrote:
>
>> What platform are you thinking of?
>>
>> ? On Mon, Dec 12, 2011 at 9:48 AM, Michael <comtech.usa at gmail.com> wrote:
>>
>>> ?Hi all,
>>>
>>> It looks like R lacks of a good time series interactive viewer...
>>>
>>> I am thinking of connecting R to some (existing) backtest platforms so
>>> that
>>> time series can be visualized in those platforms...
>>>
>>> Any thoughts? Please shed some lights!
>>>
>>> Thanks a lot!
>>>
>>> ? ? ? ?[[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>>
>>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From daniel.cegielka at gmail.com  Mon Dec 12 18:18:08 2011
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Mon, 12 Dec 2011 18:18:08 +0100
Subject: [R-SIG-Finance] msts command in the forecast package?
In-Reply-To: <CAPNjSFa8EPbiPGfNJZu2T-+6a0tid0xY1AfjkYAB=rr0vR3hUA@mail.gmail.com>
References: <CAPNjSFa8EPbiPGfNJZu2T-+6a0tid0xY1AfjkYAB=rr0vR3hUA@mail.gmail.com>
Message-ID: <CAPLrYESju46m6Z=n6n6OJG6c2jAix79A4iH4mLe+RwMyRjT=qg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111212/a684930c/attachment.pl>

From comtech.usa at gmail.com  Mon Dec 12 18:29:44 2011
From: comtech.usa at gmail.com (Michael)
Date: Mon, 12 Dec 2011 11:29:44 -0600
Subject: [R-SIG-Finance] msts command in the forecast package?
In-Reply-To: <CAPLrYESju46m6Z=n6n6OJG6c2jAix79A4iH4mLe+RwMyRjT=qg@mail.gmail.com>
References: <CAPNjSFa8EPbiPGfNJZu2T-+6a0tid0xY1AfjkYAB=rr0vR3hUA@mail.gmail.com>
	<CAPLrYESju46m6Z=n6n6OJG6c2jAix79A4iH4mLe+RwMyRjT=qg@mail.gmail.com>
Message-ID: <CAPNjSFZxEooyAOeA7wNNeuuz_kz5baFsFhULrGZQM9DAwSRabw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111212/9907ee33/attachment.pl>

From zach.mayer at gmail.com  Mon Dec 12 19:30:45 2011
From: zach.mayer at gmail.com (Zachary Mayer)
Date: Mon, 12 Dec 2011 13:30:45 -0500
Subject: [R-SIG-Finance] msts command in the forecast package?
In-Reply-To: <CAPNjSFZxEooyAOeA7wNNeuuz_kz5baFsFhULrGZQM9DAwSRabw@mail.gmail.com>
References: <CAPNjSFa8EPbiPGfNJZu2T-+6a0tid0xY1AfjkYAB=rr0vR3hUA@mail.gmail.com>
	<CAPLrYESju46m6Z=n6n6OJG6c2jAix79A4iH4mLe+RwMyRjT=qg@mail.gmail.com>
	<CAPNjSFZxEooyAOeA7wNNeuuz_kz5baFsFhULrGZQM9DAwSRabw@mail.gmail.com>
Message-ID: <CAEr64e9Tp9jftC_-kA8upZNfmbSSvxAeyzLLpwW9SM5uhJUBtA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111212/3f8cbdcb/attachment.pl>

From comtech.usa at gmail.com  Mon Dec 12 19:40:44 2011
From: comtech.usa at gmail.com (Michael)
Date: Mon, 12 Dec 2011 12:40:44 -0600
Subject: [R-SIG-Finance] msts command in the forecast package?
In-Reply-To: <CAEr64e9Tp9jftC_-kA8upZNfmbSSvxAeyzLLpwW9SM5uhJUBtA@mail.gmail.com>
References: <CAPNjSFa8EPbiPGfNJZu2T-+6a0tid0xY1AfjkYAB=rr0vR3hUA@mail.gmail.com>
	<CAPLrYESju46m6Z=n6n6OJG6c2jAix79A4iH4mLe+RwMyRjT=qg@mail.gmail.com>
	<CAPNjSFZxEooyAOeA7wNNeuuz_kz5baFsFhULrGZQM9DAwSRabw@mail.gmail.com>
	<CAEr64e9Tp9jftC_-kA8upZNfmbSSvxAeyzLLpwW9SM5uhJUBtA@mail.gmail.com>
Message-ID: <CAPNjSFZ_CjeMcj-sHqAzZkNwp_vHC77_Mi0ixgAV83Z6ymATgg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111212/ab14b7de/attachment.pl>

From michael.weylandt at gmail.com  Mon Dec 12 19:51:44 2011
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Mon, 12 Dec 2011 13:51:44 -0500
Subject: [R-SIG-Finance] msts command in the forecast package?
In-Reply-To: <CAPNjSFZ_CjeMcj-sHqAzZkNwp_vHC77_Mi0ixgAV83Z6ymATgg@mail.gmail.com>
References: <CAPNjSFa8EPbiPGfNJZu2T-+6a0tid0xY1AfjkYAB=rr0vR3hUA@mail.gmail.com>
	<CAPLrYESju46m6Z=n6n6OJG6c2jAix79A4iH4mLe+RwMyRjT=qg@mail.gmail.com>
	<CAPNjSFZxEooyAOeA7wNNeuuz_kz5baFsFhULrGZQM9DAwSRabw@mail.gmail.com>
	<CAEr64e9Tp9jftC_-kA8upZNfmbSSvxAeyzLLpwW9SM5uhJUBtA@mail.gmail.com>
	<CAPNjSFZ_CjeMcj-sHqAzZkNwp_vHC77_Mi0ixgAV83Z6ymATgg@mail.gmail.com>
Message-ID: <CAAmySGM3FYKwNjv9tK5mY7Cz7MCZdsaPDPkiycUgATPuM7STGA@mail.gmail.com>

What version of forecast do you have loaded (use sessionInfo() after
library(forecast) to check)? If it was only uploaded very very
recently, it might not have propagated to your mirror. It should be
3.14.

If your mirrors don't have it built, you might have to download a
source package and do a command line install so you can make sure you
have the right version.

Michael

On Mon, Dec 12, 2011 at 1:40 PM, Michael <comtech.usa at gmail.com> wrote:
> Oh thx a lot Zachary!
>
> I would have thought since I just installed the package on Sunday, it
> should be very freshly new/recent!
> But even after I used "update.packages()" following your advice,
>
> I am still getting:
>
>
>> library(forecast)
>
>> ?msts
>
> No documentation for 'msts' in specified packages and libraries:
>
> you could try '??msts'
>
>
>
>
> On Mon, Dec 12, 2011 at 12:30 PM, Zachary Mayer <zach.mayer at gmail.com>wrote:
>
>> msts was just added to the forecast package<http://cran.r-project.org/web/packages/forecast/ChangeLog>.
>> ?Make sure you are using version 3.14 by running "update.packages()"
>>
>>
>> 2011/12/12 Michael <comtech.usa at gmail.com>
>>
>>> Of course loaded...
>>>
>>> I can do "auto.arima", etc...
>>>
>>> But just couldn't do "msts"...
>>>
>>> > fit1=auto.arima(as.vector(dDiffPrices))
>>>
>>> > msts
>>>
>>> Error: object 'msts' not found
>>>
>>>
>>> 2011/12/12 Daniel Cegie?ka <daniel.cegielka at gmail.com>
>>>
>>> >
>>> >
>>> > ?2011/12/12 Michael <comtech.usa at gmail.com>
>>> >
>>> >> Hi all,
>>> >>
>>> >> When I tried to use the "msts" command in the Forecast package...
>>> >>
>>> >>
>>> >> > fcast <- msts(as.vector(my data), c(4, 40))
>>> >>
>>> >> Error: could not find function "msts"
>>> >>
>>> >
>>> > Have you loaded the forecast package?
>>> >
>>> > > library(forecast)
>>> >
>>> >
>>> >
>>> >
>>> >>
>>> >>
>>> >>
>>> >> What could be the problem? I had made sure that the "library(forecast)"
>>> >> has
>>> >> been used...
>>> >>
>>> >> Thank you!
>>> >>
>>> >> ? ? ? ?[[alternative HTML version deleted]]
>>> >>
>>> >> _______________________________________________
>>> >> R-SIG-Finance at r-project.org mailing list
>>> >> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> >> -- Subscriber-posting only. If you want to post, subscribe first.
>>> >> -- Also note that this is not the r-help list where general R questions
>>> >> should go.
>>> >>
>>> >
>>> >
>>>
>>> ? ? ? ?[[alternative HTML version deleted]]
>>>
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>>
>>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From zach.mayer at gmail.com  Mon Dec 12 19:53:35 2011
From: zach.mayer at gmail.com (Zachary Mayer)
Date: Mon, 12 Dec 2011 13:53:35 -0500
Subject: [R-SIG-Finance] msts command in the forecast package?
In-Reply-To: <CAPNjSFZ_CjeMcj-sHqAzZkNwp_vHC77_Mi0ixgAV83Z6ymATgg@mail.gmail.com>
References: <CAPNjSFa8EPbiPGfNJZu2T-+6a0tid0xY1AfjkYAB=rr0vR3hUA@mail.gmail.com>
	<CAPLrYESju46m6Z=n6n6OJG6c2jAix79A4iH4mLe+RwMyRjT=qg@mail.gmail.com>
	<CAPNjSFZxEooyAOeA7wNNeuuz_kz5baFsFhULrGZQM9DAwSRabw@mail.gmail.com>
	<CAEr64e9Tp9jftC_-kA8upZNfmbSSvxAeyzLLpwW9SM5uhJUBtA@mail.gmail.com>
	<CAPNjSFZ_CjeMcj-sHqAzZkNwp_vHC77_Mi0ixgAV83Z6ymATgg@mail.gmail.com>
Message-ID: <CAEr64e99V3YPiFU8vfmR=w92hYCjyuBy1U5306b1VHc+ZTrDSg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111212/12396c4f/attachment.pl>

From comtech.usa at gmail.com  Mon Dec 12 19:56:52 2011
From: comtech.usa at gmail.com (Michael)
Date: Mon, 12 Dec 2011 12:56:52 -0600
Subject: [R-SIG-Finance] msts command in the forecast package?
In-Reply-To: <CAAmySGM3FYKwNjv9tK5mY7Cz7MCZdsaPDPkiycUgATPuM7STGA@mail.gmail.com>
References: <CAPNjSFa8EPbiPGfNJZu2T-+6a0tid0xY1AfjkYAB=rr0vR3hUA@mail.gmail.com>
	<CAPLrYESju46m6Z=n6n6OJG6c2jAix79A4iH4mLe+RwMyRjT=qg@mail.gmail.com>
	<CAPNjSFZxEooyAOeA7wNNeuuz_kz5baFsFhULrGZQM9DAwSRabw@mail.gmail.com>
	<CAEr64e9Tp9jftC_-kA8upZNfmbSSvxAeyzLLpwW9SM5uhJUBtA@mail.gmail.com>
	<CAPNjSFZ_CjeMcj-sHqAzZkNwp_vHC77_Mi0ixgAV83Z6ymATgg@mail.gmail.com>
	<CAAmySGM3FYKwNjv9tK5mY7Cz7MCZdsaPDPkiycUgATPuM7STGA@mail.gmail.com>
Message-ID: <CAPNjSFZmovHsYo6N7Aj_y0rMPpPqgsqzMMYVTty+aF9__hko1Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111212/a3447e41/attachment.pl>

From zach.mayer at gmail.com  Mon Dec 12 19:59:46 2011
From: zach.mayer at gmail.com (Zachary Mayer)
Date: Mon, 12 Dec 2011 13:59:46 -0500
Subject: [R-SIG-Finance] msts command in the forecast package?
In-Reply-To: <CAPNjSFZmovHsYo6N7Aj_y0rMPpPqgsqzMMYVTty+aF9__hko1Q@mail.gmail.com>
References: <CAPNjSFa8EPbiPGfNJZu2T-+6a0tid0xY1AfjkYAB=rr0vR3hUA@mail.gmail.com>
	<CAPLrYESju46m6Z=n6n6OJG6c2jAix79A4iH4mLe+RwMyRjT=qg@mail.gmail.com>
	<CAPNjSFZxEooyAOeA7wNNeuuz_kz5baFsFhULrGZQM9DAwSRabw@mail.gmail.com>
	<CAEr64e9Tp9jftC_-kA8upZNfmbSSvxAeyzLLpwW9SM5uhJUBtA@mail.gmail.com>
	<CAPNjSFZ_CjeMcj-sHqAzZkNwp_vHC77_Mi0ixgAV83Z6ymATgg@mail.gmail.com>
	<CAAmySGM3FYKwNjv9tK5mY7Cz7MCZdsaPDPkiycUgATPuM7STGA@mail.gmail.com>
	<CAPNjSFZmovHsYo6N7Aj_y0rMPpPqgsqzMMYVTty+aF9__hko1Q@mail.gmail.com>
Message-ID: <CAEr64e_Xj4Hnuq7s+sm+6WQFK-SfO_AqBzG1JFJ-mzhJyC589Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111212/ed334f53/attachment.pl>

From josh.m.ulrich at gmail.com  Mon Dec 12 20:22:06 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 12 Dec 2011 13:22:06 -0600
Subject: [R-SIG-Finance] msts command in the forecast package?
In-Reply-To: <CAEr64e_Xj4Hnuq7s+sm+6WQFK-SfO_AqBzG1JFJ-mzhJyC589Q@mail.gmail.com>
References: <CAPNjSFa8EPbiPGfNJZu2T-+6a0tid0xY1AfjkYAB=rr0vR3hUA@mail.gmail.com>
	<CAPLrYESju46m6Z=n6n6OJG6c2jAix79A4iH4mLe+RwMyRjT=qg@mail.gmail.com>
	<CAPNjSFZxEooyAOeA7wNNeuuz_kz5baFsFhULrGZQM9DAwSRabw@mail.gmail.com>
	<CAEr64e9Tp9jftC_-kA8upZNfmbSSvxAeyzLLpwW9SM5uhJUBtA@mail.gmail.com>
	<CAPNjSFZ_CjeMcj-sHqAzZkNwp_vHC77_Mi0ixgAV83Z6ymATgg@mail.gmail.com>
	<CAAmySGM3FYKwNjv9tK5mY7Cz7MCZdsaPDPkiycUgATPuM7STGA@mail.gmail.com>
	<CAPNjSFZmovHsYo6N7Aj_y0rMPpPqgsqzMMYVTty+aF9__hko1Q@mail.gmail.com>
	<CAEr64e_Xj4Hnuq7s+sm+6WQFK-SfO_AqBzG1JFJ-mzhJyC589Q@mail.gmail.com>
Message-ID: <CAPPM_gTX6v9VwnGmu7WKFz1QS9RK-GSwtZ7bqe9xg+0OnK60Yg@mail.gmail.com>

Zachary, Michael,

How to ensure you have the most up-to-date version of a package is a
bit off-topic for this list.  Can you please resolve this off-list?

Thanks,
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com



On Mon, Dec 12, 2011 at 12:59 PM, Zachary Mayer <zach.mayer at gmail.com> wrote:
> Quit all open R sessions, and try again. ?You cannot install forecast while
> the package is in use. ?You also need to install R packages to a directory
> you are authorized to write to.
>
>
> On Mon, Dec 12, 2011 at 1:56 PM, Michael <comtech.usa at gmail.com> wrote:
>
>> Is it about problem of using 64-bit RGui or 32-bit RGui?
>>
>> I have both on my desktop... but I usually launch the 64-bit RGui and
>> install the package into...
>>
>> --------------------
>>
>> > utils:::menuInstallPkgs()
>> trying URL '
>> http://cran.cnr.Berkeley.edu/bin/windows/contrib/2.14/forecast_3.14.zip'
>> Content type 'application/zip' length 966879 bytes (944 Kb)
>> opened URL
>> downloaded 944 Kb
>>
>> package ?forecast? successfully unpacked and MD5 sums checked
>> Warning: cannot remove prior installation of package ?forecast?
>> The downloaded packages are in
>> ? ? ? ? C:\Temp\RtmpaKxhdF\downloaded_packages
>>
>> > library(forecast)
>> Error in library(forecast) : there is no package called ?forecast?
>>
>> > sessionInfo(forecast)
>> Error in sessionInfo(forecast) : object 'forecast' not found
>>
>>
>>
>> On Mon, Dec 12, 2011 at 12:51 PM, R. Michael Weylandt <
>> michael.weylandt at gmail.com> wrote:
>>
>>> What version of forecast do you have loaded (use sessionInfo() after
>>> library(forecast) to check)? If it was only uploaded very very
>>> recently, it might not have propagated to your mirror. It should be
>>> 3.14.
>>>
>>> If your mirrors don't have it built, you might have to download a
>>> source package and do a command line install so you can make sure you
>>> have the right version.
>>>
>>> Michael
>>>
>>> On Mon, Dec 12, 2011 at 1:40 PM, Michael <comtech.usa at gmail.com> wrote:
>>> > Oh thx a lot Zachary!
>>> >
>>> > I would have thought since I just installed the package on Sunday, it
>>> > should be very freshly new/recent!
>>> > But even after I used "update.packages()" following your advice,
>>> >
>>> > I am still getting:
>>> >
>>> >
>>> >> library(forecast)
>>> >
>>> >> ?msts
>>> >
>>> > No documentation for 'msts' in specified packages and libraries:
>>> >
>>> > you could try '??msts'
>>> >
>>> >
>>> >
>>> >
>>> > On Mon, Dec 12, 2011 at 12:30 PM, Zachary Mayer <zach.mayer at gmail.com
>>> >wrote:
>>> >
>>> >> msts was just added to the forecast package<
>>> http://cran.r-project.org/web/packages/forecast/ChangeLog>.
>>> ?>> ?Make sure you are using version 3.14 by running "update.packages()"
>>> >>
>>> >>
>>> >> 2011/12/12 Michael <comtech.usa at gmail.com>
>>> >>
>>> >>> Of course loaded...
>>> >>>
>>> >>> I can do "auto.arima", etc...
>>> >>>
>>> >>> But just couldn't do "msts"...
>>> >>>
>>> >>> > fit1=auto.arima(as.vector(dDiffPrices))
>>> >>>
>>> >>> > msts
>>> >>>
>>> >>> Error: object 'msts' not found
>>> >>>
>>> >>>
>>> >>> 2011/12/12 Daniel Cegie?ka <daniel.cegielka at gmail.com>
>>> >>>
>>> >>> >
>>> >>> >
>>> >>> > ?2011/12/12 Michael <comtech.usa at gmail.com>
>>> >>> >
>>> >>> >> Hi all,
>>> >>> >>
>>> >>> >> When I tried to use the "msts" command in the Forecast package...
>>> >>> >>
>>> >>> >>
>>> >>> >> > fcast <- msts(as.vector(my data), c(4, 40))
>>> >>> >>
>>> >>> >> Error: could not find function "msts"
>>> >>> >>
>>> >>> >
>>> >>> > Have you loaded the forecast package?
>>> >>> >
>>> >>> > > library(forecast)
>>> >>> >
>>> >>> >
>>> >>> >
>>> >>> >
>>> >>> >>
>>> >>> >>
>>> >>> >>
>>> >>> >> What could be the problem? I had made sure that the
>>> "library(forecast)"
>>> >>> >> has
>>> >>> >> been used...
>>> >>> >>
>>> >>> >> Thank you!
>>> >>> >>
>>> >>> >> ? ? ? ?[[alternative HTML version deleted]]
>>> >>> >>
>>> >>> >> _______________________________________________
>>> >>> >> R-SIG-Finance at r-project.org mailing list
>>> >>> >> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> >>> >> -- Subscriber-posting only. If you want to post, subscribe first.
>>> >>> >> -- Also note that this is not the r-help list where general R
>>> questions
>>> >>> >> should go.
>>> >>> >>
>>> >>> >
>>> >>> >
>>> >>>
>>> >>> ? ? ? ?[[alternative HTML version deleted]]
>>> >>>
>>> >>>
>>> >>> _______________________________________________
>>> >>> R-SIG-Finance at r-project.org mailing list
>>> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> >>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> >>> -- Also note that this is not the r-help list where general R
>>> questions
>>> >>> should go.
>>> >>>
>>> >>
>>> >>
>>> >
>>> > ? ? ? ?[[alternative HTML version deleted]]
>>> >
>>> >
>>> > _______________________________________________
>>> > R-SIG-Finance at r-project.org mailing list
>>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> > -- Subscriber-posting only. If you want to post, subscribe first.
>>> > -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>>
>>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From comtech.usa at gmail.com  Mon Dec 12 20:54:00 2011
From: comtech.usa at gmail.com (Michael)
Date: Mon, 12 Dec 2011 13:54:00 -0600
Subject: [R-SIG-Finance] bats in Forecast library?
Message-ID: <CAPNjSFa7iqeuHPN04cWBqZ_vW_TMujZZ-K1bY5ymdtJmGiooCA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111212/aea70312/attachment.pl>

From brian at braverock.com  Mon Dec 12 21:10:30 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 12 Dec 2011 14:10:30 -0600
Subject: [R-SIG-Finance] bats in Forecast library?
In-Reply-To: <CAPNjSFa7iqeuHPN04cWBqZ_vW_TMujZZ-K1bY5ymdtJmGiooCA@mail.gmail.com>
References: <CAPNjSFa7iqeuHPN04cWBqZ_vW_TMujZZ-K1bY5ymdtJmGiooCA@mail.gmail.com>
Message-ID: <1323720630.15918.68.camel@brian-rcg>

If you're going to ask questions like this on the list, please do
yourself and everyone else the favor of following the posting guide and
creating a minimal reproducible example using public data.

Otherwise, you are wasting everyone's time, and should see if the
package maintainer has time to help you off-list.


On Mon, 2011-12-12 at 13:54 -0600, Michael wrote:
> Hi all,
> 
> No matter how I set the seasonals in the "bats" command in Forecast
> library...
> 
> fit=bats(as.numeric(dPrices), seasonal.periods=c(4, 20, 40))
> 
> The output is always:
> 
> 
> >summary(fit)
> 
> seasonal.periods 0 -none- NULL
> 
> 
> 
> What happened?
> 
> Thanks a lot!


From comtech.usa at gmail.com  Tue Dec 13 03:16:30 2011
From: comtech.usa at gmail.com (Michael)
Date: Mon, 12 Dec 2011 20:16:30 -0600
Subject: [R-SIG-Finance] how do I convert RBloomberg tick data into xts
	format?
Message-ID: <CAPNjSFY3EhasidrjTSb22nJTiCSkgP+NoOBjpcYEBT82e1eubw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111212/ff5bb503/attachment.pl>

From brian at braverock.com  Tue Dec 13 03:36:40 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 12 Dec 2011 20:36:40 -0600
Subject: [R-SIG-Finance] how do I convert RBloomberg tick data into xts
 format?
In-Reply-To: <CAPNjSFY3EhasidrjTSb22nJTiCSkgP+NoOBjpcYEBT82e1eubw@mail.gmail.com>
References: <CAPNjSFY3EhasidrjTSb22nJTiCSkgP+NoOBjpcYEBT82e1eubw@mail.gmail.com>
Message-ID: <1323743800.19824.8.camel@brian-desktop>

?strftime

contains your answers.  Please at least demonstrate that you've tried.
Next time, post a reproducible example.

On Mon, 2011-12-12 at 20:16 -0600, Michael wrote:
> Hi all,
> 
> The RBloomberg returned 1min bar data is a data.frame of the following
> format:
> 
> How do I convert it into xts format?
> 
> since it's 1min bar, I don't need the "seconds" in time stamps...
> 
> I have been stuck at this for a few hours... please help me! thanks a lot!
> 
> time open high low close
> 
> 2011-05-30T22:00:00.000 2011-05-30T22:00:00.000 1330.9 1330.9 1330.9 1330.9
> 
> 2011-05-30T22:01:00.000 2011-05-30T22:01:00.000 1331.2 1331.4 1331.2 1331.4
> 
> 2011-05-30T22:02:00.000 2011-05-30T22:02:00.000 1331.5 1331.8 1331.5 1331.8
> 
> 2011-05-30T22:05:00.000 2011-05-30T22:05:00.000 1331.6 1331.6 1331.6 1331.6
> 
> 2011-05-30T22:07:00.000 2011-05-30T22:07:00.000 1331.5 1331.5 1331.5 1331.5
> 
> 2011-05-30T22:11:00.000 2011-05-30T22:11:00.000 1331.6 1331.6 1331.6 1331.6
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From edd at debian.org  Tue Dec 13 06:21:31 2011
From: edd at debian.org (Dirk Eddelbuettel)
Date: Mon, 12 Dec 2011 23:21:31 -0600
Subject: [R-SIG-Finance] R/Finance 2012 -- Call for Papers
Message-ID: <20198.57563.678162.525105@max.nulle.part>


Call for Papers:

R/Finance 2012: Applied Finance with R 
May 11 and 12, 2012 
University of Illinois at Chicago

The fourth annual R/Finance conference for applied finance using R
will be held on May 11 and 12, 2012 in Chicago, IL, USA on the campus
of the University of Illinois at Chicago.? The two-day conference will
cover topics including portfolio management, time series analysis,
advanced risk tools, high-performance computing, market
microstructure, and econometrics. All will be discussed within the
context of using R as a primary tool for financial risk management,
portfolio construction, and trading.

Over the past three years, R/Finance has included?attendees?from
around the world and featured keynote presentations from prominent
academics and practitioners. We anticipate another exciting line-up
for 2012 --- including keynote presentations from Blair Hull, Paul
Gilbert, Rob McCulloch, and Simon Urbanek.

We invite you to submit complete papers or one-page abstracts (in txt
or pdf format) for consideration. Academic and practitioner proposals
related to R are encouraged. We welcome submissions for full talks,
abbreviated "lightning talks", and for a limited number of (longer)
pre-conference seminar sessions.

Presenters are strongly encouraged to provide working R code to
accompany the presentation/paper. ?Data sets should also be made
public for the purposes of reproducibility (though we realize this may
be limited due to contracts with data vendors). Preference may be
given to presenters who have released R packages.?

Travel and accommodation grants may be available for selected
presenters at the committee?s discretion. ?In addition, the conference
will award prizes for best papers. To be eligible for a best paper
award, a submission must be a full paper. ?Extended abstracts, even if
a full paper by conference time, are not eligible for a best paper
award.

Please send submissions to: committee <at> RinFinance.com

The submission deadline is January 31, 2012. ?Submitters will be
notified of acceptance via email by February 28, 2012. Notification of
whether a presentation will be a long presentation or a lightning talk
will also be made at that time.

Additional details will be announced via?the conference website

	   http://www.RinFinance.com

as they become available.?Information on previous years'?presenters and their
presentations are also at the conference website.?

For the program committee: 

    Gib Bassett, Peter Carl, Dirk Eddelbuettel,
    Brian Peterson, Dale Rosenthal, Jeffrey Ryan, Joshua Ulrich



-- 
"Outside of a dog, a book is a man's best friend. Inside of a dog, it is too
dark to read." -- Groucho Marx


From massimo.salese at gmail.com  Tue Dec 13 09:23:57 2011
From: massimo.salese at gmail.com (msalese)
Date: Tue, 13 Dec 2011 00:23:57 -0800 (PST)
Subject: [R-SIG-Finance] InferenceForR and Rmetrics
In-Reply-To: <1323688415618-4185574.post@n4.nabble.com>
References: <1323688415618-4185574.post@n4.nabble.com>
Message-ID: <1323764637196-4189449.post@n4.nabble.com>

Well, so nobody use Excel as graphical interface with CRAN-R ?

Suppose that you have some function built on RMetrics and other quantitative
finance packages and want to connect
that functions with your TOL (trading platform) using DDE (Dynamic Data
Exchange) what do you use ?

I'm testing RExcel but it require to write VBA wrap code to R !
Is someone using RExcel or other technologies like Java, C++ etc etc to
build an graphical interface to R?


--
View this message in context: http://r.789695.n4.nabble.com/InferenceForR-and-Rmetrics-tp4185574p4189449.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From matti.zemack at gmail.com  Tue Dec 13 13:40:27 2011
From: matti.zemack at gmail.com (Matti Zemack)
Date: Tue, 13 Dec 2011 13:40:27 +0100
Subject: [R-SIG-Finance] R got me again. Thanks.
Message-ID: <0D45FCDE-8169-4436-8CF9-DB41B70E895F@gmail.com>

Hi all,

I know I'm a bit late to the party, but I finally found Guppy GMMA.
So I started building my own version in R.
Finally I googled "Guppy GMMA R". And yes, as usual, done and dusted in TTR.

Thanks J. Ulrich! And all others who in some way contributed to all packages needed to run TTR.

/Matti
-----
Matti Zemack, Broadcast Technology, Stockholm, Sweden


From edd at debian.org  Tue Dec 13 18:29:53 2011
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 13 Dec 2011 11:29:53 -0600
Subject: [R-SIG-Finance] InferenceForR and Rmetrics
In-Reply-To: <1323764637196-4189449.post@n4.nabble.com>
References: <1323688415618-4185574.post@n4.nabble.com>
	<1323764637196-4189449.post@n4.nabble.com>
Message-ID: <20199.35729.608000.212200@max.nulle.part>


On 13 December 2011 at 00:23, msalese wrote:
| Well, so nobody use Excel as graphical interface with CRAN-R ?
| 
| Suppose that you have some function built on RMetrics and other quantitative
| finance packages and want to connect
| that functions with your TOL (trading platform) using DDE (Dynamic Data
| Exchange) what do you use ?
| 
| I'm testing RExcel but it require to write VBA wrap code to R !
| Is someone using RExcel or other technologies like Java, C++ etc etc to
| build an graphical interface to R?

This is the R-SIG-Finance list; please feel free to ask on R-SIG-GUI your concern.

Let's keep this list on-topic, shall we?

Dirk

-- 
"Outside of a dog, a book is a man's best friend. Inside of a dog, it is too
dark to read." -- Groucho Marx


From vickie.guo at gmail.com  Wed Dec 14 00:26:36 2011
From: vickie.guo at gmail.com (Vickie Guo)
Date: Tue, 13 Dec 2011 18:26:36 -0500
Subject: [R-SIG-Finance] Intraday data using RBloomberg?
Message-ID: <CAFe-aLxDfYQZ8_BMNLuo7zMap_=UKs8Rp5r4oV6HKjM9Z3_pow@mail.gmail.com>

Hello,

Could someone please provide some suggestion on how to get intraday
data by using RBloomberg? I tried to follow the instruction from
RBloomberg manual but got errors and had no ideas on what it means/how
to solve it. Any information will be highly appreciated and thank you
very much for the help!

Best,

Vickie

Here is what I got:

> library(RBloomberg)
Loading required package: rJava
> conn = blpConnect()
R version 2.12.2 (2011-02-25)
rJava Version 0.9-2
RBloomberg Version 0.4-150
Java environment initialized successfully.
Looking for most recent blpapi3.jar file...
Adding C:\blp\API\APIv3\JavaAPI\v3.4.3.2\lib\blpapi3.jar to Java classpath
Bloomberg API Version 3.4.3.2
> bdh(conn,"AAPL US Equity", "PX_LAST", "20090101", "20090107")
                date PX_LAST
2009-01-02 2009-01-02   90.75
2009-01-05 2009-01-05   94.58
2009-01-06 2009-01-06   93.02
2009-01-07 2009-01-07   91.01
> bar(conn, "AAPL US Equity", "TRADE", "2011-12-21 09:00:00.000", "2011-12-21 15:00:00.000", "60")
Error in .jcall("RJavaTools", "Ljava/lang/Object;", "invokeMethod", cl,  :
 org.findata.blpwrapper.WrapperException: response error: Invalid
start date specified [nid:110]

After I changed the starting date, I got:
> bar(conn, "AAPL US Equity", "TRADE", "2011-12-21 09:00:00", "2011-12-21 15:00:00", "6")
Error in .jcall("RJavaTools", "Ljava/lang/Object;", "invokeMethod", cl,  :
  java.lang.ArrayIndexOutOfBoundsException: 6


From olivier.schmitt at gmail.com  Wed Dec 14 00:51:03 2011
From: olivier.schmitt at gmail.com (Olivier Schmitt)
Date: Tue, 13 Dec 2011 18:51:03 -0500
Subject: [R-SIG-Finance] Intraday data using RBloomberg?
In-Reply-To: <CAFe-aLxDfYQZ8_BMNLuo7zMap_=UKs8Rp5r4oV6HKjM9Z3_pow@mail.gmail.com>
References: <CAFe-aLxDfYQZ8_BMNLuo7zMap_=UKs8Rp5r4oV6HKjM9Z3_pow@mail.gmail.com>
Message-ID: <CAAEVAvFbjf3gvsZLqjPoXkGfgh2KoNO1Tqi1UHr7OcsxkyP+xg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111213/0a339d50/attachment.pl>

From weihanliu2002 at yahoo.com  Wed Dec 14 12:25:48 2011
From: weihanliu2002 at yahoo.com (Wei-han Liu)
Date: Wed, 14 Dec 2011 03:25:48 -0800 (PST)
Subject: [R-SIG-Finance] (no subject)
Message-ID: <1323861948.68064.YahooMailNeo@web161303.mail.bf1.yahoo.com>

Hi there:
?
I am practicing the new R package DEoptim
and following the paper titled ?Large-scale portfolio optimization with DEoptim? as attached.
?
I am wondering if there is error in this package or else because when I tried the commands listed in
Section 6. Portfolio optimization with DEoptim but encountered some error
message as listed below:
Error in NextMethod(.Generic) : dims
[product 121] do not match the length of object [40401]
Also : Warning message: In `-.default`(0.5
* dmvnorm(x, c(-3, -3)) + 0.5 * dmvnorm(x, c(3,? : ??longer
object length is not a multiple of shorter object length
?
Could somebody share some hint or help?
?
Thank you for your kind consideration and
response.
?
Wei-han Liu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111214/87045804/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Large-scale portfolio optimization with DEoptim.pdf
Type: application/pdf
Size: 139438 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111214/87045804/attachment.pdf>

From Eduardo.Longo at rabobank.com  Wed Dec 14 15:22:40 2011
From: Eduardo.Longo at rabobank.com (Longo, EMLL (Eduardo))
Date: Wed, 14 Dec 2011 12:22:40 -0200
Subject: [R-SIG-Finance] Rbloomberg
In-Reply-To: <1323861948.68064.YahooMailNeo@web161303.mail.bf1.yahoo.com>
References: <1323861948.68064.YahooMailNeo@web161303.mail.bf1.yahoo.com>
Message-ID: <2F5FEAA45D22044BB002E41AD23060FD01B0B5C96DA0@rabobank.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111214/6afc9954/attachment.pl>

From john.laing at gmail.com  Wed Dec 14 15:34:12 2011
From: john.laing at gmail.com (John Laing)
Date: Wed, 14 Dec 2011 09:34:12 -0500
Subject: [R-SIG-Finance] Rbloomberg
In-Reply-To: <2F5FEAA45D22044BB002E41AD23060FD01B0B5C96DA0@rabobank.com>
References: <1323861948.68064.YahooMailNeo@web161303.mail.bf1.yahoo.com>
	<2F5FEAA45D22044BB002E41AD23060FD01B0B5C96DA0@rabobank.com>
Message-ID: <CAA3Wa=v04Zu=UfTmtfhOYgWXxnPir+Nc=KdXnGJW+1Z=RA=zWg@mail.gmail.com>

Hi Eduardo,

Apologies, but my Portuguese (?) is a bit rusty. If you can
temporarily switch the language to English that would make it easier
for me to understand the error messages.

Also, please run these commands and send the results:
sessionInfo()
installed.packages()[c("rJava", "RBloomberg"), ]

Thanks,
John

On Wed, Dec 14, 2011 at 9:22 AM, Longo, EMLL (Eduardo)
<Eduardo.Longo at rabobank.com> wrote:
> Hi,
>
> I am having some troubles installing the Rbloomberg package.
> When I try to run library(Rbloomberg) I get the following message:
>
> Carregando pacotes exigidos: rJava
> Error : .onLoad falhou em loadNamespace() para 'rJava', detalhes:
> ?chamada: stop("No CurrentVersion entry in '", key, "'! Try re-installing Java and make sure R and Java have matching architectures.")
> ?erro: objeto 'key' n?o encontrado
> Al?m disso: Mensagens de aviso perdidas:
> pacote 'rJava' foi compilado na vers?o do R 2.13.2
> Erro: pacote 'rJava' n?o p?de ser carregado
>
> I don?t have any idea how to solve that. Anyone can help me ?
> Thanks in advance
> Eduardo Longo
>
> _____________________________________________________________
>
> This email (including any attachments to it) is confidential, legally privileged, subject to copyright and is sent for the personal attention of the intended recipient only. If you have received this email in error, please advise us immediately and delete it. You are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited. Although we have taken reasonable precautions to ensure no viruses are present in this email, we cannot accept responsibility for any loss or damage arising from the viruses in this email or attachments. We exclude any liability for the content of this email, or for the consequences of any actions taken on the basis of the information provided in this email or its attachments, unless that information is subsequently confirmed in writing.
> _____________________________________________________________
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From ustaudinger at activequant.org  Wed Dec 14 16:18:29 2011
From: ustaudinger at activequant.org (Ulrich Staudinger)
Date: Wed, 14 Dec 2011 16:18:29 +0100
Subject: [R-SIG-Finance] Rbloomberg
In-Reply-To: <CAA3Wa=v04Zu=UfTmtfhOYgWXxnPir+Nc=KdXnGJW+1Z=RA=zWg@mail.gmail.com>
References: <1323861948.68064.YahooMailNeo@web161303.mail.bf1.yahoo.com>
	<2F5FEAA45D22044BB002E41AD23060FD01B0B5C96DA0@rabobank.com>
	<CAA3Wa=v04Zu=UfTmtfhOYgWXxnPir+Nc=KdXnGJW+1Z=RA=zWg@mail.gmail.com>
Message-ID: <CAMrz3D0vUrUkJBmQhA8-c5WxDME-_94ZTUa4B-4Aiox-6nY_jA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111214/d4283a49/attachment.pl>

From comtech.usa at gmail.com  Wed Dec 14 16:32:10 2011
From: comtech.usa at gmail.com (Michael)
Date: Wed, 14 Dec 2011 09:32:10 -0600
Subject: [R-SIG-Finance] Using cointegration coefficients to forecast?
Message-ID: <CAPNjSFayC_PoRhn0_BabY6hjO8NX8T1_AJM4WXahtRvoi2+bsg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111214/6a1e0c44/attachment.pl>

From jacopo at moneyfarm.com  Wed Dec 14 16:53:26 2011
From: jacopo at moneyfarm.com (Jacopo Anselmi)
Date: Wed, 14 Dec 2011 16:53:26 +0100
Subject: [R-SIG-Finance] Rbloomberg
In-Reply-To: <CAMrz3D0vUrUkJBmQhA8-c5WxDME-_94ZTUa4B-4Aiox-6nY_jA@mail.gmail.com>
References: <1323861948.68064.YahooMailNeo@web161303.mail.bf1.yahoo.com>
	<2F5FEAA45D22044BB002E41AD23060FD01B0B5C96DA0@rabobank.com>
	<CAA3Wa=v04Zu=UfTmtfhOYgWXxnPir+Nc=KdXnGJW+1Z=RA=zWg@mail.gmail.com>
	<CAMrz3D0vUrUkJBmQhA8-c5WxDME-_94ZTUa4B-4Aiox-6nY_jA@mail.gmail.com>
Message-ID: <CAG_WONzPNVn_wQd-x51VqKvJq9Z7i3K=qk0z9CBejBGr=DDNzA@mail.gmail.com>

It seems to be a Java installation problem. I had similar problems.

On my architecture (Win 7 64 bit), I firstly installed jre 1.6 64 bit, then
R version 2.14, then installed rJava and RBloomberg.

On Wed, Dec 14, 2011 at 4:18 PM, Ulrich Staudinger <
ustaudinger at activequant.org> wrote:

> Google translator http://translate.google.com/#auto says:
>
> Loading required package: rJava
> Error:. OnLoad failed in loadNamespace () to 'rJava', details:
>  call: stop ("No entry in CurrentVersion", "key" '! Try re-installing Java
> and make sure Java and R have matching architectures. ")
>  error: object 'key' not found
> In addition: Warning messages lost:
> package 'rJava' was compiled in version 2.13.2 of the R
> Error: package 'rJava' could not be loaded
>
>
>
> On Wed, Dec 14, 2011 at 3:34 PM, John Laing <john.laing at gmail.com> wrote:
>
> > Hi Eduardo,
> >
> > Apologies, but my Portuguese (?) is a bit rusty. If you can
> > temporarily switch the language to English that would make it easier
> > for me to understand the error messages.
> >
> > Also, please run these commands and send the results:
> > sessionInfo()
> > installed.packages()[c("rJava", "RBloomberg"), ]
> >
> > Thanks,
> > John
> >
> > On Wed, Dec 14, 2011 at 9:22 AM, Longo, EMLL (Eduardo)
> > <Eduardo.Longo at rabobank.com> wrote:
> > > Hi,
> > >
> > > I am having some troubles installing the Rbloomberg package.
> > > When I try to run library(Rbloomberg) I get the following message:
> > >
> > > Carregando pacotes exigidos: rJava
> > > Error : .onLoad falhou em loadNamespace() para 'rJava', detalhes:
> > >  chamada: stop("No CurrentVersion entry in '", key, "'! Try
> > re-installing Java and make sure R and Java have matching
> architectures.")
> > >  erro: objeto 'key' n?o encontrado
> > > Al?m disso: Mensagens de aviso perdidas:
> > > pacote 'rJava' foi compilado na vers?o do R 2.13.2
> > > Erro: pacote 'rJava' n?o p?de ser carregado
> > >
> > > I don?t have any idea how to solve that. Anyone can help me ?
> > > Thanks in advance
> > > Eduardo Longo
> > >
> > > _____________________________________________________________
> > >
> > > This email (including any attachments to it) is confidential, legally
> > privileged, subject to copyright and is sent for the personal attention
> of
> > the intended recipient only. If you have received this email in error,
> > please advise us immediately and delete it. You are notified that
> > disclosing, copying, distributing or taking any action in reliance on the
> > contents of this information is strictly prohibited. Although we have
> taken
> > reasonable precautions to ensure no viruses are present in this email, we
> > cannot accept responsibility for any loss or damage arising from the
> > viruses in this email or attachments. We exclude any liability for the
> > content of this email, or for the consequences of any actions taken on
> the
> > basis of the information provided in this email or its attachments,
> unless
> > that information is subsequently confirmed in writing.
> > > _____________________________________________________________
> > >
> > >        [[alternative HTML version deleted]]
> > >
> > >
> > > _______________________________________________
> > > R-SIG-Finance at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > > -- Subscriber-posting only. If you want to post, subscribe first.
> > > -- Also note that this is not the r-help list where general R questions
> > should go.
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions
> > should go.
> >
>
>
>
> --
> Ulrich Staudinger
> *CEO*
>
> <http://goog_958005736>http://www.activequant.com
> Connect online: https://www.xing.com/profile/Ulrich_Staudinger
>
>        [[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>



-- 
  *Jacopo Anselmi*

Chief Data Scientist
Mob; +39 349 507 8312
www.moneyfarm.com

Seguici su Twitter! <http://www.twitter.com/getmoneyfarm>
Leggi il nostro blog! <http://www.moneyfarm.com/blog>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111214/24a2c8ca/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 664 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111214/24a2c8ca/attachment.gif>

From markleeds2 at gmail.com  Wed Dec 14 16:57:35 2011
From: markleeds2 at gmail.com (Mark Leeds)
Date: Wed, 14 Dec 2011 10:57:35 -0500
Subject: [R-SIG-Finance] Using cointegration coefficients to forecast?
In-Reply-To: <CAPNjSFayC_PoRhn0_BabY6hjO8NX8T1_AJM4WXahtRvoi2+bsg@mail.gmail.com>
References: <CAPNjSFayC_PoRhn0_BabY6hjO8NX8T1_AJM4WXahtRvoi2+bsg@mail.gmail.com>
Message-ID: <CAHz+bWbGG4MoP6SP70HJdi9byfrEiVkK6SmmojbTEpfhLc23ZA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111214/8ed4fedb/attachment.pl>

From josh.m.ulrich at gmail.com  Wed Dec 14 17:10:12 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Wed, 14 Dec 2011 10:10:12 -0600
Subject: [R-SIG-Finance] (no subject)
In-Reply-To: <1323861948.68064.YahooMailNeo@web161303.mail.bf1.yahoo.com>
References: <1323861948.68064.YahooMailNeo@web161303.mail.bf1.yahoo.com>
Message-ID: <CAPPM_gTOUqmssqqJzfJ1X+URNjsW3qmRdTxhHcUFh-0Nhm+FEA@mail.gmail.com>

On Wed, Dec 14, 2011 at 5:25 AM, Wei-han Liu <weihanliu2002 at yahoo.com> wrote:
> Hi there:
>
> I am practicing the new R package DEoptim and following the paper titled
> ?Large-scale portfolio optimization with DEoptim? as attached.
>
No need to attach a paper that's provided in the package.

> I am wondering if there is error in this package or else because when I
> tried the commands listed in Section 6. Portfolio optimization with DEoptim
> but encountered some error message as listed below:
> Error in NextMethod(.Generic) : dims [product 121] do not match the length
> of object [40401]
> Also : Warning message: In `-.default`(0.5 * dmvnorm(x, c(-3, -3)) + 0.5 *
> dmvnorm(x, c(3,? : ??longer object length is not a multiple of shorter
> object length
>
> Could somebody share some hint or help?
>
You need to provide a lot more information for anyone to help.  See
the posting guide, especially the section on "Surprising behavior and
bugs".
http://www.r-project.org/posting-guide.html

There are 4 blocks of commands in Section 6 of the paper.  You need to
tell us which commands create the error.

> Thank you for your kind consideration and response.
>
> Wei-han Liu
>

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com


From madescuadrian at gmail.com  Wed Dec 14 18:20:50 2011
From: madescuadrian at gmail.com (Adrian Madescu)
Date: Wed, 14 Dec 2011 09:20:50 -0800 (PST)
Subject: [R-SIG-Finance] fPortfolio - SOCP not available?
In-Reply-To: <4BCF811C.7010906@itp.phys.ethz.ch>
References: <20100421204855.87740@gmx.net> <4BCF811C.7010906@itp.phys.ethz.ch>
Message-ID: <1323883250178-4195987.post@n4.nabble.com>

I'm trying to maximize the return of a portfolio using the "fPortfolio"
package.  I've installed also the "fPortfolioSolver" package.

With the exact lines that have been posted i get the next error:

> require(fPortfolio) 
> require(fPortfolioSolver) 

> lppData=100*LPP2005.RET[,1:6] 
> maxRetSpec=portfolioSpec() 
> setTargetRisk(maxRetSpec)=0.07 
> setSolver(maxRetSpec)="solveRsocp" 
> efficientPortfolio(data=lppData, spec=maxRetSpec, constraints="LongOnly") 
*
Error in .C("socp_getwork", as.integer(L), as.integer(N), as.integer(n),  : 
  C symbol name "socp_getwork" not in DLL for package "Rsocp" *

Could you please help me out?

Thanks,
Adrian.


--
View this message in context: http://r.789695.n4.nabble.com/fPortfolio-SOCP-not-available-tp2019667p4195987.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From Eduardo.Longo at rabobank.com  Wed Dec 14 18:37:01 2011
From: Eduardo.Longo at rabobank.com (Longo, EMLL (Eduardo))
Date: Wed, 14 Dec 2011 15:37:01 -0200
Subject: [R-SIG-Finance] Rbloomberg
In-Reply-To: <CAMrz3D0vUrUkJBmQhA8-c5WxDME-_94ZTUa4B-4Aiox-6nY_jA@mail.gmail.com>
References: <1323861948.68064.YahooMailNeo@web161303.mail.bf1.yahoo.com>
	<2F5FEAA45D22044BB002E41AD23060FD01B0B5C96DA0@rabobank.com>
	<CAA3Wa=v04Zu=UfTmtfhOYgWXxnPir+Nc=KdXnGJW+1Z=RA=zWg@mail.gmail.com>
	<CAMrz3D0vUrUkJBmQhA8-c5WxDME-_94ZTUa4B-4Aiox-6nY_jA@mail.gmail.com>
Message-ID: <2F5FEAA45D22044BB002E41AD23060FD01B0B5C96DA1@rabobank.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111214/7b6f6545/attachment.pl>

From matthieu.stigler at gmail.com  Wed Dec 14 21:56:44 2011
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Wed, 14 Dec 2011 21:56:44 +0100
Subject: [R-SIG-Finance] Using cointegration coefficients to forecast?
In-Reply-To: <CAHz+bWbGG4MoP6SP70HJdi9byfrEiVkK6SmmojbTEpfhLc23ZA@mail.gmail.com>
References: <CAPNjSFayC_PoRhn0_BabY6hjO8NX8T1_AJM4WXahtRvoi2+bsg@mail.gmail.com>
	<CAHz+bWbGG4MoP6SP70HJdi9byfrEiVkK6SmmojbTEpfhLc23ZA@mail.gmail.com>
Message-ID: <CAEYvigLNhhuWhKN3xB1gLNWH_tjSVkss1F4AMVsAFjtSFFX1Hw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111214/8646dcb0/attachment.pl>

From markleeds2 at gmail.com  Wed Dec 14 22:06:17 2011
From: markleeds2 at gmail.com (Mark Leeds)
Date: Wed, 14 Dec 2011 16:06:17 -0500
Subject: [R-SIG-Finance] Using cointegration coefficients to forecast?
In-Reply-To: <CAEYvigLNhhuWhKN3xB1gLNWH_tjSVkss1F4AMVsAFjtSFFX1Hw@mail.gmail.com>
References: <CAPNjSFayC_PoRhn0_BabY6hjO8NX8T1_AJM4WXahtRvoi2+bsg@mail.gmail.com>
	<CAHz+bWbGG4MoP6SP70HJdi9byfrEiVkK6SmmojbTEpfhLc23ZA@mail.gmail.com>
	<CAEYvigLNhhuWhKN3xB1gLNWH_tjSVkss1F4AMVsAFjtSFFX1Hw@mail.gmail.com>
Message-ID: <CAHz+bWZiZLBz7NQ7GGm59rpKr3xzXk3rTaPX6FKb4iNmq2FKkw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111214/bc756052/attachment.pl>

From matthieu.stigler at gmail.com  Wed Dec 14 22:24:07 2011
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Wed, 14 Dec 2011 22:24:07 +0100
Subject: [R-SIG-Finance] Using cointegration coefficients to forecast?
In-Reply-To: <CAHz+bWZiZLBz7NQ7GGm59rpKr3xzXk3rTaPX6FKb4iNmq2FKkw@mail.gmail.com>
References: <CAPNjSFayC_PoRhn0_BabY6hjO8NX8T1_AJM4WXahtRvoi2+bsg@mail.gmail.com>
	<CAHz+bWbGG4MoP6SP70HJdi9byfrEiVkK6SmmojbTEpfhLc23ZA@mail.gmail.com>
	<CAEYvigLNhhuWhKN3xB1gLNWH_tjSVkss1F4AMVsAFjtSFFX1Hw@mail.gmail.com>
	<CAHz+bWZiZLBz7NQ7GGm59rpKr3xzXk3rTaPX6FKb4iNmq2FKkw@mail.gmail.com>
Message-ID: <CAEYvigL2uFaE=Co9o52vE9HbfCAyDDKeppYUoLTVnTy+W=kZDg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111214/19a877c6/attachment.pl>

From comtech.usa at gmail.com  Thu Dec 15 00:11:47 2011
From: comtech.usa at gmail.com (Michael)
Date: Wed, 14 Dec 2011 17:11:47 -0600
Subject: [R-SIG-Finance] Using cointegration coefficients to forecast?
In-Reply-To: <CAEYvigLNhhuWhKN3xB1gLNWH_tjSVkss1F4AMVsAFjtSFFX1Hw@mail.gmail.com>
References: <CAPNjSFayC_PoRhn0_BabY6hjO8NX8T1_AJM4WXahtRvoi2+bsg@mail.gmail.com>
	<CAHz+bWbGG4MoP6SP70HJdi9byfrEiVkK6SmmojbTEpfhLc23ZA@mail.gmail.com>
	<CAEYvigLNhhuWhKN3xB1gLNWH_tjSVkss1F4AMVsAFjtSFFX1Hw@mail.gmail.com>
Message-ID: <CAPNjSFasoSs6RSegELi0=29nLN5vXYKvkOxUUxVfUpTyf45nDQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111214/5b0ed661/attachment.pl>

From josh.m.ulrich at gmail.com  Thu Dec 15 07:05:57 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Thu, 15 Dec 2011 00:05:57 -0600
Subject: [R-SIG-Finance] (no subject)
In-Reply-To: <CAPPM_gTOUqmssqqJzfJ1X+URNjsW3qmRdTxhHcUFh-0Nhm+FEA@mail.gmail.com>
References: <1323861948.68064.YahooMailNeo@web161303.mail.bf1.yahoo.com>
	<CAPPM_gTOUqmssqqJzfJ1X+URNjsW3qmRdTxhHcUFh-0Nhm+FEA@mail.gmail.com>
Message-ID: <CAPPM_gR5Gv_ZOq6=G9Jb7gbJV3ZPMFhk9Css-zxa8FgNqOtYZQ@mail.gmail.com>

Please copy the list so others can benefit.

On Wed, Dec 14, 2011 at 7:02 PM, Wei-han Liu <weihanliu2002 at yahoo.com> wrote:
> Thanks for your prompt reply.
>
> It get stuck in the first block of the commands listed in Section 6. It
> works fine before that block.
>
"Gets stuck" is not an error.  The first block of code in Section 6
takes a long time to run (16 minutes on a 2.2Ghz processor) and is
currently running fine on my laptop.

You still have not followed the posting guide.  As I asked in my
previous email, please read and follow the instructions in the
"Surprising behavior and bugs" section of the posting guide.

> Wei-han
>

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com



> ________________________________
> From: Joshua Ulrich <josh.m.ulrich at gmail.com>
> To: Wei-han Liu <weihanliu2002 at yahoo.com>
> Cc: "R-SIG-Finance at r-project.org" <R-SIG-Finance at r-project.org>
> Sent: Thursday, 15 December 2011 3:10 AM
> Subject: Re: [R-SIG-Finance] (no subject)
>
> On Wed, Dec 14, 2011 at 5:25 AM, Wei-han Liu <weihanliu2002 at yahoo.com>
> wrote:
>> Hi there:
>>
>> I am practicing the new R package DEoptim and following the paper titled
>> ?Large-scale portfolio optimization with DEoptim? as attached.
>>
> No need to attach a paper that's provided in the package.
>
>> I am wondering if there is error in this package or else because when I
>> tried the commands listed in Section 6. Portfolio optimization with
>> DEoptim
>> but encountered some error message as listed below:
>> Error in NextMethod(.Generic) : dims [product 121] do not match the length
>> of object [40401]
>> Also : Warning message: In `-.default`(0.5 * dmvnorm(x, c(-3, -3)) + 0.5 *
>> dmvnorm(x, c(3,  :   longer object length is not a multiple of shorter
>> object length
>>
>> Could somebody share some hint or help?
>>
> You need to provide a lot more information for anyone to help.  See
> the posting guide, especially the section on "Surprising behavior and
> bugs".
> http://www.r-project.org/posting-guide.html
>
> There are 4 blocks of commands in Section 6 of the paper.  You need to
> tell us which commands create the error.
>
>> Thank you for your kind consideration and response.
>>
>> Wei-han Liu
>>
>
> Best,
> --
> Joshua Ulrich  |  FOSS Trading: www.fosstrading.com
>
>


From Michael.Benjamin at bernstein.com  Thu Dec 15 13:01:34 2011
From: Michael.Benjamin at bernstein.com (Benjamin, Michael)
Date: Thu, 15 Dec 2011 12:01:34 -0000
Subject: [R-SIG-Finance] RBloomberg/RJava Issue
References: <mailman.3.1322823601.27343.r-sig-finance@r-project.org> 
Message-ID: <E9DE1D321E5D1841920E8E92938F4AEB0BB92A38@LONEVS1.ac.lp.acml.com>

Hello

I have upgraded my Bloomberg.  Although my Bloomberg worked with the COM connection, now when I execute 
require(RBloomberg)
require(rJava)
conn <- blpConnect() # or "conn <- blpConnect(blpapi.jar.file="C:\\Program Files\\blp\\API\\blpapi3.jar")"

I get an error message

conn <- blpConnect()
R version 2.14.0 (2011-10-31) 
rJava Version 0.9-2 
RBloomberg Version 0.4-150 
Java environment initialized successfully.
Looking for most recent blpapi3.jar file...
Adding C:\blp\API\blpapi3.jar to Java classpath
Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) : 
  java.lang.NoClassDefFoundError: com/bloomberglp/blpapi/SessionOptions


My session info is

> sessionInfo()
R version 2.14.0 (2011-10-31)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United Kingdom.1252  LC_CTYPE=English_United Kingdom.1252    LC_MONETARY=English_United Kingdom.1252
[4] LC_NUMERIC=C                            LC_TIME=English_United Kingdom.1252    

attached base packages:
[1] grDevices datasets  stats     utils     graphics  methods   base     

other attached packages:
[1] RBloomberg_0.4-150           rJava_0.9-2                  RDCOMClient_0.92-0.1                     
[6]          

loaded via a namespace (and not attached):
[1]


Do you know what I need to do to overcome this issue to get the calls


ticker <- "AGS BB Equity"
start.time <- "2011-09-12 08:00:00.000"
end.time <- "2011-09-12 16:30:00.000"
trades.1 <- bar(conn, ticker, "TRADE", start.time, end.time, "1")

to work?

Regards

Michael


-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of r-sig-finance-request at r-project.org
Sent: 02 December 2011 11:00
To: r-sig-finance at r-project.org
Subject: R-SIG-Finance Digest, Vol 91, Issue 2

Send R-SIG-Finance mailing list submissions to
	r-sig-finance at r-project.org

To subscribe or unsubscribe via the World Wide Web, visit
	https://stat.ethz.ch/mailman/listinfo/r-sig-finance
or, via email, send a message with subject or body 'help' to
	r-sig-finance-request at r-project.org

You can reach the person managing the list at
	r-sig-finance-owner at r-project.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of R-SIG-Finance digest..."


Today's Topics:

   1. Re: HELP: Problem with RBloomberg blp intraday data (John Laing)
   2. Re: PerformanceAnalytics - Sharpes Style Analysis- but with
      intercept? (Philipp)
   3. Constrained Regression with Intercept in pcls (Philipp)
   4. Re: Constrained Regression with Intercept in pcls
      (Enrico Schumann)
   5. Re: Constrained Regression with Intercept in pcls
      (thomas.chan.sf at boci-pru.com.hk)


----------------------------------------------------------------------

Message: 1
Date: Thu, 1 Dec 2011 07:58:23 -0500
From: John Laing <john.laing at gmail.com>
To: "Benjamin, Michael" <Michael.Benjamin at bernstein.com>
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] HELP: Problem with RBloomberg blp
	intraday data
Message-ID:
	<CAA3Wa=tSoMCzVnZdCy5P970-8dFgXp=VMV2mp=hDcYqN_vELbw at mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Michael,

This works in the current version of RBloomberg:

#############################################################
require(RBloomberg)
conn <- blpConnect()

ticker <- "AGS BB Equity"
start.time <- "2011-09-12 08:00:00.000"
end.time <- "2011-09-12 16:30:00.000"

trades.1 <- bar(conn, ticker, "TRADE", start.time, end.time, "1")
trades.510 <- bar(conn, ticker, "TRADE", start.time, end.time, "510")
sum(trades.1$numEvents) == sum(trades.510$numEvents) ## TRUE

bids.1 <- bar(conn, ticker, "BID", start.time, end.time, "1")
bids.510 <- bar(conn, ticker, "BID", start.time, end.time, "510")
sum(bids.1$numEvents) == sum(bids.510$numEvents) ## TRUE

asks.1 <- bar(conn, ticker, "ASK", start.time, end.time, "1")
asks.510 <- bar(conn, ticker, "ASK", start.time, end.time, "510")
sum(asks.1$numEvents) == sum(asks.510$numEvents) ## TRUE
#############################################################

If there are still problems or unexpected NAs after you upgrade, I'd
be happy to help.

Thanks,
John

On Tue, Nov 29, 2011 at 7:11 AM, Benjamin, Michael
<Michael.Benjamin at bernstein.com> wrote:
> John
>
> Thanks for looking into this for me.
>
> Details of what I am using is as follows:
>
> ============================================================
>> sessionInfo()
> R version 2.10.1 (2009-12-14)
> i386-pc-mingw32
>
> locale:
> [1] LC_COLLATE=English_United Kingdom.1252
> [2] LC_CTYPE=English_United Kingdom.1252
> [3] LC_MONETARY=English_United Kingdom.1252
> [4] LC_NUMERIC=C
> [5] LC_TIME=English_United Kingdom.1252
>
> attached base packages:
> [1] grDevices datasets ?stats ? ? utils ? ? graphics ?methods ? base
>
> other attached packages:
> ?[1] RBloomberg_0.2-98
> ?[3]
> ?[5]
> ?[7]
> ?[9]
> [11]
>
> ============================================================
>
>
> I agree that what is being processed is pretty straightforward which is why it is strange that it works for some data and not for others despite using an old version of RBloomberg. ?I will update my RBloomber soon, but out of curiosity, as the issue is not the "TRADE" ticks being returned over a time range (which works OK for me) but the "number of ticks" for bid or ask prices.
>
> Do you have any issues if you
>
> ?increase the barsize to 510
>
> and
>
> request the total number of ticks for bid, ask and trade ticks for the same stock over the same time period?
>
>
> Best regards
>
> Michael
>
>
>
> -----Original Message-----
> From: John Laing [mailto:john.laing at gmail.com]
> Sent: 29 November 2011 00:23
> To: Benjamin, Michael
> Cc: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] HELP: Problem with RBloomberg blp intraday data
>
> Michael,
>
> It is helpful if you provide information about the version of R and
> various packages that you are running. The sessionInfo() function is
> an excellent way to do that.
>
> The timeout argument to blpConnect was eliminated in early 2010, so I
> assume your version of RBloomberg is very old. There are now several
> recent threads on this list about how to upgrade and the dependencies
> involved. I recommend you read some of these.
>
> In the current RBloomberg what you're trying to do is pretty straightforward:
>
> library(RBloomberg)
> conn <- blpConnect()
> trades <- bar(conn, "AGS BB Equity", "TRADE", "2011-09-12
> 08:00:00.000", "2011-09-12 16:30:00.000", "1")
>
> Hope that helps,
> John
>
> On Thu, Nov 24, 2011 at 5:45 AM, Benjamin, Michael
> <Michael.Benjamin at bernstein.com> wrote:
>> Hello
>>
>> I am trying to download some intraday data, the number of ticks over a time range. ?Packages installed are "package:RBloomberg" and "package:RDCOMClient".
>>
>> The data request is for the number of ticks over a date range using
>>
>> conn<-blpConnect(timeout=120000,show.days="week",na.action="na",periodicity="daily")
>> blp(conn, "AGS BB EQUITY",fields=c("LAST_PRICE"),start="2011-09-12 08:00",end="2011-09-12 16:30",barsize=510, barfields="NUMBER_TICKS")
>>
>> which returns the number 3574. ?When passing the argument fields=c("BID") or fields=c("ASK") the number of bid or ask ticks returns <NA>.
>>
>> blp(conn, "AGS BB EQUITY",fields=c("BID"),start="2011-09-12 08:00",end="2011-09-12 16:30",barsize=510, barfields="NUMBER_TICKS")
>> blp(conn, "AGS BB EQUITY",fields=c("ASK"),start="2011-09-12 08:00",end="2011-09-12 16:30",barsize=510, barfields="NUMBER_TICKS")
>>
>> The issue is this is not consistent behavour with other stocks, for example, for EBS AV EQUITY the BID, ASK LAST_PRICE number of ticks is
>> 33800, 33800,2232
>>
>> Has anyone got any idea why this happens or if there is a way to resolve it?
>>
>> Best regards
>>
>> Michael
>>
>> ............................................................................
>>
>> Sanford C. Bernstein Limited (registered in England and Wales under company number 3760267) is authorised and regulated in the United Kingdom by the Financial Services Authority. The company has its registered office at 50 Berkeley Street, London W1J 8SB.
>>
>> Trading instructions sent electronically to Bernstein shall not be deemed accepted until a representative of Bernstein acknowledges receipt electronically or by telephone. Comments in this e-mail transmission and any attachments may form part of a larger body of investment analysis. For our research reports, which contain information that may be used to support investment decisions and disclosures see our website at www.bernsteinresearch.com.
>>
>> For further important information about AllianceBernstein please click here http://www.alliancebernstein.com/disclaimer/email/disclaimer.html
>>
>> Please note that as of 7 November, 2011 Sanford C. Bernstein Limited will be located at 50 Berkeley Street, London W1J 8SB.
>>
>> ? ? ? ?[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>



------------------------------

Message: 2
Date: Thu, 1 Dec 2011 08:04:21 -0800 (PST)
From: Philipp <jasonhome at freenet.de>
To: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] PerformanceAnalytics - Sharpes Style
	Analysis- but with intercept?
Message-ID: <1322755461301-4129124.post at n4.nabble.com>
Content-Type: text/plain; charset=us-ascii

Thanks for the commented Function. So i can understand a little bit more
about it. 

In fact I want to run following constrained Regression. R.f=w0 +
w1*Rs_1+w2*Rs_2+w3*Rs_3 
with the constraints: (1) w1+w2+w3 =1 (2) w1,w2,w3>0. So the Intercept(w0)
is not included in the Constraints. In my case, R.f is a country return,
which I regress on an intercept and Industryreturnbenchmarks. The purpose is
to find a quantity of how well the Industries can explain a country-index.
(Which will be done by Rsquared, The question why an intercept is integrated
(That has been done in some papers, considering this topic), I can not
explain.Maybe because of a better fit). 

If I would consider an intercept I have to fix the Calculation of D and d in
the code of style.QPfit. The purpose is to minimize Var(R.fund-sum[w_i*Rs_i
+w0]). Then I get Var(R.f)(=0)+Var(wiRs_i+w0)-2Cov(Rfund, Rstyle+w0). So in
the Calculation of D and d I get D (=Dmat)=Cov(Rstyle+w0); d=Cov(R.fund,
Rstyle+w0). So my Problem is now to find the right function to minimize
under estimating w, without changing the constraints. 

Thanks,

Best regards

Philipp

--
View this message in context: http://r.789695.n4.nabble.com/PerformanceAnalytics-Sharpes-Style-Analysis-but-with-intercept-tp4125767p4129124.html
Sent from the Rmetrics mailing list archive at Nabble.com.



------------------------------

Message: 3
Date: Thu, 1 Dec 2011 08:18:14 -0800 (PST)
From: Philipp <jasonhome at freenet.de>
To: r-sig-finance at r-project.org
Subject: [R-SIG-Finance] Constrained Regression with Intercept in pcls
Message-ID: <1322756294407-4129187.post at n4.nabble.com>
Content-Type: text/plain; charset=us-ascii

Dear all,

I already asked about to run a constrained regression like y=b0 +
b1X1+b2x2+b3x3, with constraints:

b1+b2+b3=1 and b1,b2,b3>=0. I thought it will run with style.QPfit with the
performance Analytic packages.

However the style.QPfit function does not estimate an intercept. As i really
can not extend this function for my problem, I noticed pcls. Pcls is maybe
an alternative for my problem. Can somebody help me to implement the
constraints in pcls. Maybe it can be done by designing a designed matrix X
with extra column for the inercept (b0) and to force C in a way. But how I
do not know.

Your help is greatly appreciated

Philipp

--
View this message in context: http://r.789695.n4.nabble.com/Constrained-Regression-with-Intercept-in-pcls-tp4129187p4129187.html
Sent from the Rmetrics mailing list archive at Nabble.com.



------------------------------

Message: 4
Date: Thu, 01 Dec 2011 22:24:52 +0100
From: Enrico Schumann <enricoschumann at yahoo.de>
To: Philipp <jasonhome at freenet.de>
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Constrained Regression with Intercept in
	pcls

Content-Type: text/plain; charset=ISO-8859-1; format=flowed


Hi Philipp,

you should be able to solve this with package quadprog/solve.QP.

require(quadprog)

p <- 3    ## number of regressors
T <- 100  ## number of obs
X <- array(rnorm(T*p), dim = c(T,p))
X <- cbind(1,X)  ## add a constant
y <- rnorm(T)


## variant 1 -- linear regression
coef(lm(y ~ -1 + X))


## variant 2 -- quadprog (should be the same as variant 1)
Dmat <- crossprod(X)
dvec <- as.vector(t(as.matrix(y)) %*% X)
Amat <- as.matrix(rep(0, p+1))
solve.QP(Dmat = Dmat, dvec = dvec, Amat = Amat)$solution


## variant 3 -- quadprog, now with restrictions
bvec <- c(1, rep(0, p))
Amat <- rbind(1,diag(p))
Amat <- cbind(0, Amat)
w <- solve.QP(Dmat = Dmat, dvec = dvec, Amat = t(Amat), bvec=bvec, 
meq=1)$solution
w          ## result
sum(w[-1]) ## check constraint

see also here http://comisef.wikidot.com/tutorial:minimisevariance

regards,
Enrico




Am 01.12.2011 17:18, schrieb Philipp:
> Dear all,
>
> I already asked about to run a constrained regression like y=b0 +
> b1X1+b2x2+b3x3, with constraints:
>
> b1+b2+b3=1 and b1,b2,b3>=0. I thought it will run with style.QPfit with the
> performance Analytic packages.
>
> However the style.QPfit function does not estimate an intercept. As i really
> can not extend this function for my problem, I noticed pcls. Pcls is maybe
> an alternative for my problem. Can somebody help me to implement the
> constraints in pcls. Maybe it can be done by designing a designed matrix X
> with extra column for the inercept (b0) and to force C in a way. But how I
> do not know.
>
> Your help is greatly appreciated
>
> Philipp
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Constrained-Regression-with-Intercept-in-pcls-tp4129187p4129187.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>

-- 
Enrico Schumann
Lucerne, Switzerland
http://nmof.net/



------------------------------

Message: 5
Date: Fri, 2 Dec 2011 09:37:24 +0800
From: thomas.chan.sf at boci-pru.com.hk
To: Philipp <jasonhome at freenet.de>
Cc: r-sig-finance at r-project.org, r-sig-finance-bounces at r-project.org
Subject: Re: [R-SIG-Finance] Constrained Regression with Intercept in
	pcls
Message-ID:
	<OF90B4A92B.1BA4D71E-ON4825795A.000871CE-4825795A.0008EAF4 at boci-pru.com.hk>
	
Content-Type: text/plain; charset=US-ASCII

Alternatively, the lsei (least squares with equalities and inequalities) fu
nction in the limSolve package solves for the least square solution to a
system of equations with linear and nonlinear constraints.


|------------>
| From:      |
|------------>
  >----------------------------------------------------------------------------------------------------------------------------------------|
  |Philipp <jasonhome at freenet.de>                                                                                                          |
  >----------------------------------------------------------------------------------------------------------------------------------------|
|------------>
| To:        |
|------------>
  >----------------------------------------------------------------------------------------------------------------------------------------|
  |r-sig-finance at r-project.org                                                                                                             |
  >----------------------------------------------------------------------------------------------------------------------------------------|
|------------>
| Date:      |
|------------>
  >----------------------------------------------------------------------------------------------------------------------------------------|
  |02/12/2011 00:20                                                                                                                        |
  >----------------------------------------------------------------------------------------------------------------------------------------|
|------------>
| Subject:   |
|------------>
  >----------------------------------------------------------------------------------------------------------------------------------------|
  |[R-SIG-Finance] Constrained Regression with Intercept in pcls                                                                           |
  >----------------------------------------------------------------------------------------------------------------------------------------|
|------------>
| Sent by:   |
|------------>
  >----------------------------------------------------------------------------------------------------------------------------------------|
  |r-sig-finance-bounces at r-project.org                                                                                                     |
  >----------------------------------------------------------------------------------------------------------------------------------------|





Dear all,

I already asked about to run a constrained regression like y=b0 +
b1X1+b2x2+b3x3, with constraints:

b1+b2+b3=1 and b1,b2,b3>=0. I thought it will run with style.QPfit with the
performance Analytic packages.

However the style.QPfit function does not estimate an intercept. As i
really
can not extend this function for my problem, I noticed pcls. Pcls is maybe
an alternative for my problem. Can somebody help me to implement the
constraints in pcls. Maybe it can be done by designing a designed matrix X
with extra column for the inercept (b0) and to force C in a way. But how I
do not know.

Your help is greatly appreciated

Philipp

--
View this message in context:
http://r.789695.n4.nabble.com/Constrained-Regression-with-Intercept-in-pcls-tp4129187p4129187.html

Sent from the Rmetrics mailing list archive at Nabble.com.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.

______________________________________________________________________
This email has been scanned by the Symantec Email Security.cloud service.
For more information please visit http://www.symanteccloud.com
______________________________________________________________________



---------------------------------------------------------------------------------------

Important : The information contained in this e-mail and any attachment thereof is intended only for use of the addressee and is confidential and may be privileged and/or otherwise protected from disclosure. If you are not the intended recipient, you are hereby notified that any use, copying, dissemination or any other action taken or omitted to be taken in reliance upon this information is strictly prohibited. If you have received this communication in error, please notify the sender immediately by reply and delete this message from your system. Any views expressed in this e-mail are those of the individual sender except where the e-mail states otherwise and the sender is authorized to state them to be the views of BOCI-Prudential Asset Management Limited. Unless otherwise stated, any information given in this e-mail shall not be regarded as an offer, solicitation, invitation, advice or recommendation to buy or sell any investment or securities within or outside Hong Kong S!
 AR. Any reference to the terms of executed transactions should be treated as preliminary only and subject to our formal written confirmation.


______________________________________________________________________
This email has been scanned by the Symantec Email Security.cloud service.
For more information please visit http://www.symanteccloud.com



------------------------------

_______________________________________________
R-SIG-Finance mailing list
R-SIG-Finance at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-finance


End of R-SIG-Finance Digest, Vol 91, Issue 2


From fabien.azoulay at gmail.com  Thu Dec 15 14:09:21 2011
From: fabien.azoulay at gmail.com (fabien azoulay)
Date: Thu, 15 Dec 2011 08:09:21 -0500
Subject: [R-SIG-Finance] RBloomberg blpConnect issue
In-Reply-To: <DD87FB3A77F2E6479A9CA5103D3809950B2D1D@NYCWS13019.AMERICAS.NOM>
References: <DD87FB3A77F2E6479A9CA5103D3809950B2D1D@NYCWS13019.AMERICAS.NOM>
Message-ID: <CAJsDZUdK=qN7oN8cs_WzZLhObq0Ygc2a-cBRqFG=y6YbCmvCNQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111215/b7886c62/attachment.pl>

From jasonhome at freenet.de  Fri Dec 16 16:55:05 2011
From: jasonhome at freenet.de (Philipp)
Date: Fri, 16 Dec 2011 07:55:05 -0800 (PST)
Subject: [R-SIG-Finance] Constrained Regression with Intercept in pcls
In-Reply-To: <4ED7F0A4.1030108@yahoo.de>
References: <1322756294407-4129187.post@n4.nabble.com>
	<4ED7F0A4.1030108@yahoo.de>
Message-ID: <1324050905493-4205163.post@n4.nabble.com>

Thank You Enrico,

Your message was very helpful. I could implement everything and I could also
extend the function for my problem.

thank you for that

regards Philipp

--
View this message in context: http://r.789695.n4.nabble.com/Constrained-Regression-with-Intercept-in-pcls-tp4129187p4205163.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jasonhome at freenet.de  Fri Dec 16 17:44:18 2011
From: jasonhome at freenet.de (Philipp)
Date: Fri, 16 Dec 2011 08:44:18 -0800 (PST)
Subject: [R-SIG-Finance] constrained weighted least square estimation
Message-ID: <1324053858357-4205373.post@n4.nabble.com>

Dear all,

First of all I am not proffessional in R and sorry if my question is not
very good formulated.
So I have a problem I want to estimate a constrained regression with a
weighted least square estimator (Rouwenhorst modell 1994). In fact it is a
regression with dependent variable as index return and the independent
variables are Dummyvariables. 

index_returns(ij)=a + sum(beta(i)*I(i))*w(i))+sum(gama(j)*C(j)*v(j))  +
e(ij)

with index_returns in country j and Industry i (I have Industry indexes
country-specific, that means I have more observations than parameters to
estimate) and a=global return same for all industries and countries,
beta(i)=Coefficient for Industry I(i). I(i) is one if index return is from
industry i. C(j) is one if index return is from country j. Gamma(j) the
Coefficient for Country j. w(i) is the market value of industry i divided by
the total market capitalization in time t.
v(i) the market value of country j divided by the total market
capitalization in time t. 
In order to avoid multicolinearity two linear constraints are integrated:

sum(w(i)*beta(i)=0
sum(v(j)*gamma(j)=0

So this is my problem. A Cross sectional constrained weighted least square
regression. I tried it for example with Quadratic Programming. But I am not
sure how to integrate constraints and by the way I need standard errors. 
This for my master thesis and since everything i wanted to analyse is build
up on this Regression, i am quite stucked, since i tried everything.

Could Somebody help me

Kind regards

Phillip




--
View this message in context: http://r.789695.n4.nabble.com/constrained-weighted-least-square-estimation-tp4205373p4205373.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From algotr8der at gmail.com  Sat Dec 17 19:33:48 2011
From: algotr8der at gmail.com (algotr8der)
Date: Sat, 17 Dec 2011 10:33:48 -0800 (PST)
Subject: [R-SIG-Finance] RBloomberg, blpConnect,
	java.lang.UnsupportedClassVersionError
Message-ID: <1324146828552-4208981.post@n4.nabble.com>

I recently installed RBloomberg, the Bloomberg APIv3 and rJava.  I tried to
execute blpConnect but received the following error. My windows machine has
Java 1.5 installed, which to my knowledge appears to be acceptable for
RBloomberg/rJava.
Please see further details below. I greatly appreciate your help.

RBloomberg Version 0.4-150 
Java environment initialized successfully.
Looking for most recent blpapi3.jar file...
Adding C:\blp\API\APIv3\JavaAPI\v3.4.5.5\lib\blpapi3.jar to Java classpath
Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) : 
  java.lang.UnsupportedClassVersionError: Bad version number in .class file
> sessionInfo()
R version 2.14.0 (2011-10-31)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
States.1252   
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] RBloomberg_0.4-150 rJava_0.9-3       

loaded via a namespace (and not attached):
[1] tools_2.14.0


--
View this message in context: http://r.789695.n4.nabble.com/RBloomberg-blpConnect-java-lang-UnsupportedClassVersionError-tp4208981p4208981.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From harrisonmark1 at gmail.com  Sun Dec 18 00:37:47 2011
From: harrisonmark1 at gmail.com (Mark Harrison)
Date: Sat, 17 Dec 2011 17:37:47 -0600
Subject: [R-SIG-Finance] Setting up Financial Instrument
Message-ID: <CAHFhaq_HXQORU2qKTx-=LWK+em7d0xOSSBrg2sQOKzpyhsXmVw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111217/76fc8324/attachment.pl>

From gsee000 at gmail.com  Sun Dec 18 03:31:06 2011
From: gsee000 at gmail.com (G See)
Date: Sat, 17 Dec 2011 20:31:06 -0600
Subject: [R-SIG-Finance] Setting up Financial Instrument
In-Reply-To: <CAHFhaq_HXQORU2qKTx-=LWK+em7d0xOSSBrg2sQOKzpyhsXmVw@mail.gmail.com>
References: <CAHFhaq_HXQORU2qKTx-=LWK+em7d0xOSSBrg2sQOKzpyhsXmVw@mail.gmail.com>
Message-ID: <CA+xi=qaBr_m_SjQeKq2wmgc3K2_jZj9ziEOUQ+24MW1F_oE5bQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111217/e57e01d7/attachment.pl>

From algotr8der at gmail.com  Sun Dec 18 19:23:34 2011
From: algotr8der at gmail.com (algotr8der)
Date: Sun, 18 Dec 2011 10:23:34 -0800 (PST)
Subject: [R-SIG-Finance] RBloomberg, blpConnect,
	java.lang.UnsupportedClassVersionError
In-Reply-To: <1324146828552-4208981.post@n4.nabble.com>
References: <1324146828552-4208981.post@n4.nabble.com>
Message-ID: <1324232614420-4211558.post@n4.nabble.com>

I upgraded the java version to 1.6 just in case....   here is the output of
'java -version':

C:\Documents and Settings\Administrator>java -version
java version "1.6.0_30"
Java(TM) SE Runtime Environment (build 1.6.0_30-b12)
Java HotSpot(TM) Client VM (build 20.5-b03, mixed mode, sharing)

The Bloomberg API v3 works fine in that I can launch the BBAPIDemo app and
download historical data etc....  So something is else is going on. 

Appreciate the help.

--
View this message in context: http://r.789695.n4.nabble.com/RBloomberg-blpConnect-java-lang-UnsupportedClassVersionError-tp4208981p4211558.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From algotr8der at gmail.com  Sun Dec 18 19:29:30 2011
From: algotr8der at gmail.com (algotr8der)
Date: Sun, 18 Dec 2011 10:29:30 -0800 (PST)
Subject: [R-SIG-Finance] RBloomberg connection problem
In-Reply-To: <37F03B5FAABCC94D8AF66166AAE3639902D70BA9@fnymail.fnylocal.com>
References: <37F03B5FAABCC94D8AF66166AAE3639902D70BA9@fnymail.fnylocal.com>
Message-ID: <1324232970753-4211584.post@n4.nabble.com>

Where you able to get this working? I'm also having the same problem. 

--
View this message in context: http://r.789695.n4.nabble.com/RBloomberg-connection-problem-tp4030952p4211584.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From harrisonmark1 at gmail.com  Sun Dec 18 20:40:50 2011
From: harrisonmark1 at gmail.com (Mark Harrison)
Date: Sun, 18 Dec 2011 13:40:50 -0600
Subject: [R-SIG-Finance] Setting up Financial Instrument
In-Reply-To: <CA+xi=qZUsBjTZgBDRFctYjt2LgFYmg1599qjqND6--CfhMDv1A@mail.gmail.com>
References: <CAHFhaq_HXQORU2qKTx-=LWK+em7d0xOSSBrg2sQOKzpyhsXmVw@mail.gmail.com>
	<CA+xi=qZUsBjTZgBDRFctYjt2LgFYmg1599qjqND6--CfhMDv1A@mail.gmail.com>
Message-ID: <CAHFhaq8m-6UPpBiC74Ti73_53AYYkP8=dEQhEUW0tUjERy-nrw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111218/0ff935b3/attachment.pl>

From tors.alletra at gmail.com  Sun Dec 18 22:10:37 2011
From: tors.alletra at gmail.com (loconut)
Date: Sun, 18 Dec 2011 13:10:37 -0800 (PST)
Subject: [R-SIG-Finance] PerformanceAnalytics Figure 13
In-Reply-To: <002201cbe1a9$96da4280$c48ec780$@gmail.com>
References: <002201cbe1a9$96da4280$c48ec780$@gmail.com>
Message-ID: <1324242637523-4211997.post@n4.nabble.com>

I had a similar problem. I was reading data in from an csv file that had been
created in MS Excel:

portfolios <- read.csv("C:/Data.csv", sep=",", row.names=1,
stringsAsFactors=FALSE)

Then, when attempting to use charts.PerformanceSummary, I got the following
error:

Error in checkData(R) : 
  The data cannot be converted into a time series.  If you are trying to
pass in names from a data object with one column, you should use the form
'data[rows, columns, drop = FALSE]'. 

The "fix" was to convert the date format to the European style "1997-03-01"
and re-save the data. I quote the word "fix" because I got the same error
again a few days later after a reboot. I fixed it the second time by
converting the dates to another style and then converting back to the
European style - again. Very strange.



--
View this message in context: http://r.789695.n4.nabble.com/PerformanceAnalytics-Figure-13-tp3352312p4211997.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Mon Dec 19 00:03:51 2011
From: alexios at 4dscape.com (alexios)
Date: Sun, 18 Dec 2011 15:03:51 -0800 (PST)
Subject: [R-SIG-Finance] Rugarch Package - Problem with Arch-lm-test
In-Reply-To: <1324088975459-4207079.post@n4.nabble.com>
References: <1324088975459-4207079.post@n4.nabble.com>
Message-ID: <1324249431102-4212293.post@n4.nabble.com>

I would have thought that is exactly what you want to happen once you filter
the data for garch effects...that none are left. The ARCH LM test under the
Null of no ARCH effects, as presented in the summary, is applied to the
standardized residuals (i.e. the residuals from the mean filtration
standardized by the conditional standard deviation from the variance
equation). This is clearly explained in both the documentation and the
vignette.

Regards,
Alexios


barb wrote
> 
> Hey guys,
> 
> got some strange results using the rugarch, but can?t figure out what is
> going wrong.
> 
> 	library(rugarch)
> 	library(quantmod)
> 	getSymbols("ADS.DE", from ="2006-01-01", to="2011-12-02")
> 	oc<-ADS.DE[,1]
> 	ccr<- function(x) {100*(log((x[-1])/(x[1:length(x)-1])))} #Continously
> Compounded Returns
> 	GOOGCCR<-apply(oc,2,ccr) # Apply for Matrix-data
> 	spec = ugarchspec(variance.model = list(model = "sGARCH", garchOrder =
> c(1,1)))
> 	fit = ugarchfit(data = GOOGCCR, spec = spec)
> 	fit
> 
> So load the Adidas rates. The time horizon doesn?t really matter for me,
> but i need at least
> 100 data points for the package.
> 
> Optimal Parameters
> ------------------------------------
>         Estimate  Std. Error  t value Pr(>|t|)
> mu      0.051503    0.037037   1.3906 0.164359
> ar1     0.513259    0.217548   2.3593 0.018310
> ma1    -0.565843    0.214081  -2.6431 0.008215
> omega   0.170118    0.046981   3.6210 0.000293
> alpha1  0.115982    0.021801   5.3201 0.000000
> beta1   0.847845    0.027334  31.0176 0.000000
> 
> Information Criteria
> ------------------------------------
>                    
> Akaike       4.1369
> Bayes        4.1579
> Shibata      4.1369
> Hannan-Quinn 4.1447
> 
> Q-Statistics on Standardized Residuals
> ------------------------------------
>       statistic p-value
> Lag10     1.687  0.9891
> Lag15     4.983  0.9756
> Lag20     9.918  0.9345
> 
> H0 : No serial correlation
> 
> Q-Statistics on Standardized Squared Residuals
> ------------------------------------
>       statistic p-value
> Lag10     3.229  0.9192
> Lag15     4.701  0.9812
> Lag20     5.305  0.9983
> 
> ARCH LM Tests
> ------------------------------------
>              Statistic DoF P-Value
> ARCH Lag[2]     0.5589   2  0.7562
> ARCH Lag[5]     1.2106   5  0.9439
> ARCH Lag[10]    3.2138  10  0.9759
> 
> 
> So, basicly i can not reject the null hypothese, that there are no arch
> effects. 
> What is going wrong?
> 


--
View this message in context: http://r.789695.n4.nabble.com/Rugarch-Package-Problem-with-Arch-lm-test-tp4207079p4212293.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jeff.a.ryan at gmail.com  Mon Dec 19 00:16:03 2011
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Sun, 18 Dec 2011 17:16:03 -0600
Subject: [R-SIG-Finance] PerformanceAnalytics Figure 13
In-Reply-To: <1324242637523-4211997.post@n4.nabble.com>
References: <002201cbe1a9$96da4280$c48ec780$@gmail.com>
	<1324242637523-4211997.post@n4.nabble.com>
Message-ID: <4F092523-4D0F-4752-8845-265004CC7486@gmail.com>

CCYY-MM-DD isn't "European style", it is ISO-8601 Standard, which is the only way to properly represent time unambiguously. 

PerformanceAnalytics uses xts, which adheres to the global standard set in the aforementioned standard. 

Best,
Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Dec 18, 2011, at 3:10 PM, loconut <tors.alletra at gmail.com> wrote:

> I had a similar problem. I was reading data in from an csv file that had been
> created in MS Excel:
> 
> portfolios <- read.csv("C:/Data.csv", sep=",", row.names=1,
> stringsAsFactors=FALSE)
> 
> Then, when attempting to use charts.PerformanceSummary, I got the following
> error:
> 
> Error in checkData(R) : 
>  The data cannot be converted into a time series.  If you are trying to
> pass in names from a data object with one column, you should use the form
> 'data[rows, columns, drop = FALSE]'. 
> 
> The "fix" was to convert the date format to the European style "1997-03-01"
> and re-save the data. I quote the word "fix" because I got the same error
> again a few days later after a reboot. I fixed it the second time by
> converting the dates to another style and then converting back to the
> European style - again. Very strange.
> 
> 
> 
> --
> View this message in context: http://r.789695.n4.nabble.com/PerformanceAnalytics-Figure-13-tp3352312p4211997.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From brian at braverock.com  Mon Dec 19 00:23:09 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 18 Dec 2011 17:23:09 -0600
Subject: [R-SIG-Finance] PerformanceAnalytics Figure 13
In-Reply-To: <4F092523-4D0F-4752-8845-265004CC7486@gmail.com>
References: <002201cbe1a9$96da4280$c48ec780$@gmail.com>
	<1324242637523-4211997.post@n4.nabble.com>
	<4F092523-4D0F-4752-8845-265004CC7486@gmail.com>
Message-ID: <1324250589.16971.17.camel@brian-desktop>

On Sun, 2011-12-18 at 17:16 -0600, Jeff Ryan wrote:
> CCYY-MM-DD isn't "European style", it is ISO-8601 Standard, which is
> the only way to properly represent time unambiguously. 
> 
> PerformanceAnalytics uses xts, which adheres to the global standard
> set in the aforementioned standard. 

Of course, we also adhere to the 'format' argument used by as.POSIXct,
see 

?strftime

for  details.

Cheers,

   - Brian


From tors.alletra at gmail.com  Mon Dec 19 11:14:34 2011
From: tors.alletra at gmail.com (loconut)
Date: Mon, 19 Dec 2011 02:14:34 -0800 (PST)
Subject: [R-SIG-Finance] PerformanceAnalytics Figure 13
In-Reply-To: <4F092523-4D0F-4752-8845-265004CC7486@gmail.com>
References: <002201cbe1a9$96da4280$c48ec780$@gmail.com>
	<1324242637523-4211997.post@n4.nabble.com>
	<4F092523-4D0F-4752-8845-265004CC7486@gmail.com>
Message-ID: <1324289674353-4213544.post@n4.nabble.com>

To clarify, the format "YYYY-MM-DD" isn't an option for formatting dates in
Excel if the locale is set to English (U.S.). If you switch the locale to
English (U.K.), or probably any other country, this format option becomes
available. 
Regards

--
View this message in context: http://r.789695.n4.nabble.com/PerformanceAnalytics-Figure-13-tp3352312p4213544.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From Russell.Bowdrey at justretirement.com  Mon Dec 19 11:43:33 2011
From: Russell.Bowdrey at justretirement.com (Russell Bowdrey)
Date: Mon, 19 Dec 2011 10:43:33 +0000
Subject: [R-SIG-Finance] weighting data points in npreg
Message-ID: <60FF609C86F6794BBBF02B264D8BDDF7910271@SERVER010.live01.lan.local>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111219/db13aed8/attachment.pl>

From zach.mayer at gmail.com  Mon Dec 19 14:15:16 2011
From: zach.mayer at gmail.com (Zachary Mayer)
Date: Mon, 19 Dec 2011 08:15:16 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics Figure 13
In-Reply-To: <1324289674353-4213544.post@n4.nabble.com>
References: <002201cbe1a9$96da4280$c48ec780$@gmail.com>
	<1324242637523-4211997.post@n4.nabble.com>
	<4F092523-4D0F-4752-8845-265004CC7486@gmail.com>
	<1324289674353-4213544.post@n4.nabble.com>
Message-ID: <-2555512539165035215@unknownmsgid>

You can use custom formatting to specify a "YYYY-MM-DD" date in Excel.



Sent from my iPhone

On Dec 19, 2011, at 5:15 AM, loconut <tors.alletra at gmail.com> wrote:

> To clarify, the format "YYYY-MM-DD" isn't an option for formatting dates in
> Excel if the locale is set to English (U.S.). If you switch the locale to
> English (U.K.), or probably any other country, this format option becomes
> available.
> Regards
>
> --
> View this message in context: http://r.789695.n4.nabble.com/PerformanceAnalytics-Figure-13-tp3352312p4213544.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From brian at braverock.com  Mon Dec 19 14:25:44 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 19 Dec 2011 07:25:44 -0600
Subject: [R-SIG-Finance] PerformanceAnalytics Figure 13
In-Reply-To: <1324289674353-4213544.post@n4.nabble.com>
References: <002201cbe1a9$96da4280$c48ec780$@gmail.com>
	<1324242637523-4211997.post@n4.nabble.com>
	<4F092523-4D0F-4752-8845-265004CC7486@gmail.com>
	<1324289674353-4213544.post@n4.nabble.com>
Message-ID: <1324301144.7321.48.camel@brian-rcg>

On Mon, 2011-12-19 at 02:14 -0800, loconut wrote:
> To clarify, the format "YYYY-MM-DD" isn't an option for formatting dates in
> Excel if the locale is set to English (U.S.). If you switch the locale to
> English (U.K.), or probably any other country, this format option becomes
> available. 
> Regards

Most recent versions of Excel offer an 'ISO-8601' or a 
YYY=MM=DD' format, which os correct.  The ommission of that format in
the 'English(United States)' locale hardly counts as a problem for R.
All versions of Excel for at least a decade have also offered a 'custom'
format.

There are more reasons than could be conveniently enumerated to not use
Excel for quantitative finance.

But this is an R list, not an Excel list, so I'll stop there.  

Regards,

    - Brian


From algotr8der at gmail.com  Mon Dec 19 17:56:15 2011
From: algotr8der at gmail.com (algotr8der)
Date: Mon, 19 Dec 2011 08:56:15 -0800 (PST)
Subject: [R-SIG-Finance] RBloomberg, blpConnect,
	java.lang.UnsupportedClassVersionError
In-Reply-To: <1324232614420-4211558.post@n4.nabble.com>
References: <1324146828552-4208981.post@n4.nabble.com>
	<1324232614420-4211558.post@n4.nabble.com>
Message-ID: <1324313775137-4214817.post@n4.nabble.com>

Here is the output of the path variables on my machine. Doesn't seem like the
JAVA_HOME is set. Is this a requirement? Does the java folder also need to
be in the PATH variable?

C:\Documents and Settings\Administrator>echo %path%

C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\blp\API;C:\blp\API\dd
e

C:\Documents and Settings\Administrator>echo %java_path%
%java_path%

C:\Documents and Settings\Administrator>echo $JAVA_HOME
$JAVA_HOME

Anyone have any idea of how I can troubleshoot this going forward?
Appreciate the help.

--
View this message in context: http://r.789695.n4.nabble.com/RBloomberg-blpConnect-java-lang-UnsupportedClassVersionError-tp4208981p4214817.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jnoble1 at mmm.com  Mon Dec 19 19:22:54 2011
From: jnoble1 at mmm.com (jnoble1 at mmm.com)
Date: Mon, 19 Dec 2011 12:22:54 -0600
Subject: [R-SIG-Finance] Additional Text Indicator for 'chartSeries' Bar
	Chart?
Message-ID: <OF1EBED0BF.CF1C8E8B-ON8625796B.0064B5C2-8625796B.0064F966@mmm.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111219/e341a712/attachment.pl>

From john.laing at gmail.com  Mon Dec 19 23:10:42 2011
From: john.laing at gmail.com (John Laing)
Date: Mon, 19 Dec 2011 17:10:42 -0500
Subject: [R-SIG-Finance] RBloomberg, blpConnect,
	java.lang.UnsupportedClassVersionError
In-Reply-To: <1324313775137-4214817.post@n4.nabble.com>
References: <1324146828552-4208981.post@n4.nabble.com>
	<1324232614420-4211558.post@n4.nabble.com>
	<1324313775137-4214817.post@n4.nabble.com>
Message-ID: <CAA3Wa=tK4Y5yfC+L3R6HB_ODOu+rkctXRdCdGeoCp0yZ=rLCsA@mail.gmail.com>

I think Java 1.6 should be good enough for RBloomberg, but not 1.5.
Possibly R is still using the older version?

You can try something like this:

require(rJava)
.jinit()
jvm <- .jnew("java.lang.System")
jvm.props <- jvm$getProperties()$toString()
jvm.props <- strsplit(gsub("\\{(.*)}", "\\1", jvm.props), ", ")[[1]]

The resulting vector might help highlight issues in your
configuration. Here are a few of the more relevant settings I see from
running the above:

 [2] "sun.boot.library.path=C:\\Java\\jdk1.7.0\\jre\\bin"
[14] "java.runtime.version=1.7.0-b147"
[16] "java.endorsed.dirs=C:\\Java\\jdk1.7.0\\jre\\lib\\endorsed"
[34] "java.specification.version=1.7"
[37] "java.vm.specification.version=1.7"
[38] "java.home=C:\\Java\\jdk1.7.0\\jre"

Hope that helps,
John

On Mon, Dec 19, 2011 at 11:56 AM, algotr8der <algotr8der at gmail.com> wrote:
> Here is the output of the path variables on my machine. Doesn't seem like the
> JAVA_HOME is set. Is this a requirement? Does the java folder also need to
> be in the PATH variable?
>
> C:\Documents and Settings\Administrator>echo %path%
>
> C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\blp\API;C:\blp\API\dd
> e
>
> C:\Documents and Settings\Administrator>echo %java_path%
> %java_path%
>
> C:\Documents and Settings\Administrator>echo $JAVA_HOME
> $JAVA_HOME
>
> Anyone have any idea of how I can troubleshoot this going forward?
> Appreciate the help.
>
> --
> View this message in context: http://r.789695.n4.nabble.com/RBloomberg-blpConnect-java-lang-UnsupportedClassVersionError-tp4208981p4214817.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From Peter.Brecknock at bp.com  Tue Dec 20 03:13:00 2011
From: Peter.Brecknock at bp.com (Pete Brecknock)
Date: Mon, 19 Dec 2011 18:13:00 -0800 (PST)
Subject: [R-SIG-Finance] irregular time series to regular time series
In-Reply-To: <1324313127950-4214779.post@n4.nabble.com>
References: <1324313127950-4214779.post@n4.nabble.com>
Message-ID: <1324347180650-4216416.post@n4.nabble.com>

Guessing a little bit as I don't fully undrstand your question but how about
the aggregate function in zoo?

library(zoo)

# your data
Lines <- "date time price
2011-10-12 15:09:21 6.626387
2011-10-12 15:09:22 6.625913
2011-10-12 15:09:42 6.625724
2011-10-12 15:09:48 6.625724
2011-10-12 15:10:14 6.625724
2011-10-12 15:10:29 6.625724
2011-10-13 10:00:03 6.635290
2011-10-13 10:00:04 6.635618
2011-10-13 10:00:05 6.635618
2011-10-13 10:00:06 6.635618
2011-10-13 10:00:07 6.635618
2011-10-13 10:00:09 6.635618
2011-10-13 10:00:10 6.635618
2011-10-13 10:00:11 6.634962
2011-10-13 10:00:12 6.634962
2011-10-13 10:00:13 6.634962
2011-10-13 10:00:14 6.635181
2011-10-13 10:00:15 6.635618"

# read in data
d <- read.table(textConnection(Lines), header = TRUE)
closeAllConnections()

# create date time field
d$datetime <-as.POSIXct(paste(d$date,d$time,sep=" "), origin="1970-01-01")

# create zoo object
d.z = zoo(d$price,order.by=d$datetime)

# aggregate data by 5 min period
aggregate(d.z, time(d.z) - as.numeric(time(d.z)) %% 300, mean)

# output
2011-10-12 15:05:00 2011-10-12 15:10:00 2011-10-13 10:00:00 
           6.625937            6.625724            6.635390 

HTH

Pete


newnew wrote
> 
> HI,
>  
> I have an irregular time series data (contains time and price) of a few
> days like this. I want to change it to a regular equally time spaced
> series. Take the time interval 5min as an example. Then the equally time
> spaced series start from 9am to 11am and contiue from 12:20pm to 15:15  by
> a 5min interval.  Can you help me with that? Thanks.   
> 
>                           time                    price
> 48721  2011-10-12 15:09:21 6.626387
> 48722  2011-10-12 15:09:22 6.625913
> 48723  2011-10-12 15:09:42 6.625724
> 48724  2011-10-12 15:09:48 6.625724
> 48725  2011-10-12 15:10:14 6.625724
> 48726  2011-10-12 15:10:29 6.625724
> 48727  2011-10-13 10:00:03 6.635290
> 48728  2011-10-13 10:00:04 6.635618
> 48729  2011-10-13 10:00:05 6.635618
> 48730  2011-10-13 10:00:06 6.635618
> 48731  2011-10-13 10:00:07 6.635618
> 48732  2011-10-13 10:00:09 6.635618
> 48733  2011-10-13 10:00:10 6.635618
> 48734  2011-10-13 10:00:11 6.634962
> 48735  2011-10-13 10:00:12 6.634962
> 48736  2011-10-13 10:00:13 6.634962
> 48737  2011-10-13 10:00:14 6.635181
> 48738  2011-10-13 10:00:15 6.635618
> 


--
View this message in context: http://r.789695.n4.nabble.com/irregular-time-series-to-regular-time-series-tp4214779p4216416.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From rhelpacc at gmail.com  Wed Dec 21 03:34:37 2011
From: rhelpacc at gmail.com (Robert A'gata)
Date: Tue, 20 Dec 2011 21:34:37 -0500
Subject: [R-SIG-Finance] Similar function to filter but allowing time
	varying coefficient?
Message-ID: <CAA7=MyUu6eMu=6ZY+PNXT_z6w=VLGUQws4uveZ950vT7DS9mXQ@mail.gmail.com>

Hi,

I have a need to compute something that is similar to exponential
moving average. More precisely:

y[t] = (1-w(t)) x[t] + w(t) y[t-1]

x[t] is my input. I know only filter function in R where filter is a
vector of constant. In my case, my filter will be a matrix of Nx2
where N is number of observations in my time series. I'm wondering if
there is any function that does this? Also, N usually is in an order
of few millions. So it'd be great for me to know a fast
implementation. Thank you.

Regards,

Robert


From matt at considine.net  Wed Dec 21 04:33:56 2011
From: matt at considine.net (Matt Considine)
Date: Tue, 20 Dec 2011 22:33:56 -0500
Subject: [R-SIG-Finance] Using MINE in R
Message-ID: <4EF153A4.6090904@considine.net>

I have been trying to use the "MINE" Java/R code found on 
www.exploredata.net with the data from "indexes", only to run into the 
problem of R shutting down.  Same thing happens when trying to use the 
sample data downloaded from that site using as a guide the function 
calls provided there.

It turns out that - at least in my case - the Java code doesn't like 
alphabetical characters (e.g. a-z,A-Z,dashes, probably other non-numeric 
related characters) in the data.  So, for example, if you export the 
indexes data as a CSV file, the first column might be "Dates" and take 
the form 1980-01-01.  If, instead, that column is deleted from the 
resulting file, then the code runs.

FWIW ...

Matt
(Vista, Ubuntu Linux, Java v1.6)


From bshepherd at texxors.com  Thu Dec 22 22:43:53 2011
From: bshepherd at texxors.com (bshepherd at texxors.com)
Date: Thu, 22 Dec 2011 14:43:53 -0700
Subject: [R-SIG-Finance] Playback in IBrokers package
Message-ID: <20111222144353.30423ijixf0v8mu1@texxors.com>

Hi all,

I'm having trouble getting the playback feature in the IBrokers  
package to work. I have saved the data with the following command:

reqMktData(twsDATA, Contract=contract, file =  
paste("C:/path/TWSFormat/ES2", Sys.Date(), ".txt", sep = ""),  
tickGenerics = "100,101,104,106,165,225")

It seems to have saved correctly; it produces a file with data like this:

<20111222 08:43:55.973232> id=1 symbol=ES bidPrice: 1241.25  bidSize: 54
<20111222 08:43:55.977233> id=1 symbol=ES askPrice: 1241.50  askSize: 206
<20111222 08:43:55.980233> id=1 symbol=ES lastPrice: 1241.25
<20111222 08:43:55.984234> id=1 symbol=ES bidSize: 54
<20111222 08:43:55.993235> id=1 symbol=ES askSize: 206
....

Then I try to play it back via:

> twsDATA <- twsConnect(filename = "C:/path/TWSFormat/ES22011-12-22.txt")
> twsDATA
<twsConnection, @ C:/path/TWSFormat/ES2011-12-22.txt, nextId=>
> contract <- twsFuture("ES","GLOBEX","201203")
> reqMktData(twsDATA, Contract=contract, tickGenerics =  
> "100,101,104,106,165,225", event=eWrapper.data(1))
Error in socketSelect(list(con), FALSE, 0.25) : not a socket connection

I'm not sure how to interpret (or fix) that error. Any help would be  
appreciated.

Thanks,
Bryan


From patrik at brakenhielm.se  Fri Dec 23 10:56:11 2011
From: patrik at brakenhielm.se (PBrakenhielm)
Date: Fri, 23 Dec 2011 01:56:11 -0800 (PST)
Subject: [R-SIG-Finance] Interpolation of RBloomberg historical intraday bar
 data to force time periodicity
Message-ID: <1324634171563-4228004.post@n4.nabble.com>

Hi,

First of all, I want to thank all the contributors at this forum, without
you, I would not have been able to do anything in R.

Now, for my issue.

Using RBloomberg, I fetch historical intraday bar data using the below code.
Currently I have chosen close per minute as I do not wish to lose to much
data.

library(RBloomberg)
conn <- blpConnect()
bid <- bar(conn, instrument, "BEST_BID", start, end, "1")
ask <- bar(conn, instrument, "BEST_ASK", start, end, "1")

Which I then merge. I have tried merging the data set so that I do not lose
periods where I only have data for bid or ask, but that has not been
successful.

bidask <- merge(bid, ask, by="time")

In order to remove non-trading hours and weekends I create time as a
numerical variable and remove unsuitable weekdays.

Date2 <- substr(bidask$time, 1,10)
Date3 <- substr(bidask$time, 12,16)
Date3b <- paste(Date2, Date3)
Date4 <- as.POSIXlt(Date3b)

Time = Date4 - trunc(Date4, "days")

dataset2 <- cbind(bidask, Time)
dataset3 <- cbind(dataset2, Date2)

Weekday <- as.POSIXlt(Date2)$wday
dataset4 <- cbind(dataset3, Weekday)
dataset5 <- subset(dataset4, Weekday > 0)
dataset6 <- subset(dataset5, Weekday < 6)
dataset7 <- subset(dataset6, Time > 8.00)
dataset8 <- subset(dataset7, Time < 16.41)

Finally, I calculate the average daily spread and aggregate it on a daily
basis.

spread <- (dataset8$close.y-dataset8$close.x) /
((dataset8$close.y+dataset8$close.x)/2)*10000
dataset9 <- cbind(dataset8,spread)

final <- aggregate(x=dataset9$spread, by=list(dataset9$Date2), FUN=mean)


I was wondering if it is possible to create a sequence of time so that I can
get observations for every minute during trading hours. I was thinking about
the possibility to get a NA which I can replace using zoo's na.locf to carry
over last value. But it would be even better if I could get it down to
per-second.

Secondly, I am having trouble with the hours, definitely due to timezones.
And thirdly, I have not yet looked at trading calendars.

I would be very grateful if all my troubles were solved, or some of them. 

- Patrik

--
View this message in context: http://r.789695.n4.nabble.com/Interpolation-of-RBloomberg-historical-intraday-bar-data-to-force-time-periodicity-tp4228004p4228004.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From roger.bos at rothschild.com  Fri Dec 23 13:26:11 2011
From: roger.bos at rothschild.com (Bos, Roger)
Date: Fri, 23 Dec 2011 07:26:11 -0500
Subject: [R-SIG-Finance] Asking for help using quantstrat
In-Reply-To: <72F9B845E2DAC74DA87A3C0ABAF7F5D1386A0D61@RINNYCSE000.rth.ad.rothschild.com>
References: <72F9B845E2DAC74DA87A3C0ABAF7F5D1386A0D61@RINNYCSE000.rth.ad.rothschild.com>
Message-ID: <D8C95B444AD6EE4AAD638D818A9CFD34062268DA@RINNYCSE000.rth.ad.rothschild.com>

Quantstrat users,

First of all many thanks to the authors of quantstrat.  It looks really
interesting.  I have been wanting to learn how to use quantstrat for a
long time and have finally gotten around to playing with it.  I thought
I understood the examples (i.e. faber, mac, and macd) well enough, but I
am having trouble with a couple aspects of the package.

First, in the examples the data.frame 'mktdata' is created
automatically.  I couldn't figure out how to make that work for me
because I am adding non-price data to the analysis (the VIX index
levels).  So I create mktdata manually.  Is that okay?

Second, I am having trouble getting the results I expect for my signals.
As a test I have created three signals: test1, test2, and test3. My
reproducible code is below.  By changing the method variable you can run
different types of tests.  faber, mac, and macd run fine, but my code in
'test' has some problems.  If you run it and look at mktdata the
test1.high and test1.low columns are as I expect.  The test2.high and
test2.low columns are also as I expect (although I would prefer 0s to
NAs, but I can replace later).  My problem is with test3.high and
test3.low.  Both columns are all zeros and I would expect the same
results as test1.  (I don't expect these signals to be any good, this is
just a learning process).

Thanks in advance for any hints that you can provide,

Roger

###############################

require(quantstrat)
library("PerformanceAnalytics")
library("zoo")

firstTime <- TRUE
startDate <- '2004-01-02'
tic <- 'IVV'
fast <- 50
slow <- 200
method="test"

    endDate <- Sys.Date()
    currency("USD")
    get("USD", envir=.instrument)
    stock(tic, currency="USD", multiplier=1)
    get(tic, envir=.instrument)
    getSymbols(tic, from=startDate, to=endDate, adjust=T)
    for(i in tic){
        assign(tic, adjustOHLC(get(tic),use.Adjusted=TRUE))
    }

    ## Get VIX data from St. Luis Fed site
    getSymbols("VIXCLS",src="FRED")

    # Calculate VRP statistic
    etf <- get(tic)[, 6]
    names(etf)[1] <- "price"
    price <- as.numeric(etf$price)
    etf$ret <- c(as.numeric('NA'), price[-1] / price[-nrow(etf)] - 1)
    etf <- merge(etf, VIXCLS)
    etf$VRP <- lag(etf$VIXCLS)
    etf$High <- 25 #etf$VIXCLS + 2
    etf$Low <- 20 #etf$VIXCLS - 2
    mktdata <- merge(get(tic), etf)
    tail(mktdata)

    qs.strategy <- "qs"
    if (exists(".strategy")) suppressWarnings(rm("order_book.qs",
pos=.strategy))
    if (exists(".blotter")) suppressWarnings(rm("account.qs",
"portfolio.qs", pos=.blotter))
    suppressWarnings(rm("qs.strategy", "stratName", "initDate",
"initEq", 'start_t', 'end_t'))
    qs.strategy <- "qs"
    initPortf(qs.strategy, tic, initDate=startDate)
    initAcct(qs.strategy, portfolios=qs.strategy, initDate=startDate,
initEq=1e5)
    initOrders(portfolio=qs.strategy, initDate=startDate)
    stratName<- strategy(qs.strategy)

    if (method=='mac') {

        #Adding indicators to a strategy
        stratName <- add.indicator(strategy = stratName, name = "SMA",
arguments = list(x=quote(Cl(mktdata)), n=fast),label= "maFast" )
        stratName <- add.indicator(strategy = stratName, name = "SMA",
arguments = list(x=quote(Cl(mktdata)), n=slow),label= "maSlow")

        #Adding signals to a strategy
        stratName <- add.signal(strategy =
stratName,name="sigCrossover",arguments =
list(columns=c("maFast","maSlow"),
relationship="gte"),label="maFast.gt.maSlow")
        stratName <- add.signal(strategy =
stratName,name="sigCrossover",arguments =
list(column=c("maFast","maSlow"),relationship="lt"),label="maFast.lt.maS
low")

        #Add rules to a strategy
        stratName <- add.rule(strategy = stratName,name='ruleSignal',
arguments = list(sigcol="maFast.gt.maSlow",sigval=TRUE, orderqty=100,
ordertype='market', orderside='long'),type='enter')
        stratName <- add.rule(strategy = stratName,name='ruleSignal',
arguments = list(sigcol="maFast.lt.maSlow",sigval=TRUE, orderqty=-100,
ordertype='market', orderside='long'),type='exit')

    } else if (method=='faber') {
        # Add an indicator
        stratName <- add.indicator(strategy = stratName, name = "SMA",
arguments = list(x = quote(mktdata$IVV.Close), n=10), label="SMA10")

        # There are two signals:
        # The first is when monthly price crosses over the 10-month SMA
        stratName <- add.signal(stratName,name="sigCrossover",arguments
= list(columns=c("Close","SMA10"),relationship="gte"),label="Cl.gt.SMA")
        # The second is when the monthly price crosses under the
10-month SMA
        stratName <- add.signal(stratName,name="sigCrossover",arguments
= list(columns=c("Close","SMA10"),relationship="lt"),label="Cl.lt.SMA")

        # There are two rules:
        # The first is to buy when the price crosses above the SMA
        stratName <- add.rule(stratName, name='ruleSignal', arguments =
list(sigcol="Cl.gt.SMA", sigval=TRUE, orderqty=100, ordertype='market',
orderside='long', pricemethod='market',TxnFees=-5), type='enter',
path.dep=TRUE)
        # The second is to sell when the price crosses below the SMA
        stratName <- add.rule(stratName, name='ruleSignal', arguments =
list(sigcol="Cl.lt.SMA", sigval=TRUE, orderqty='all',
ordertype='market', orderside='long', pricemethod='market',TxnFees=-5),
type='exit', path.dep=TRUE)

    } else if (method=='macd') {

        stratName <- add.indicator(strategy = stratName, name = "MACD",
arguments = list(x=quote(Cl(mktdata))) )

        stratName <- add.signal(strategy =
stratName,name="sigThreshold",arguments =
list(column="signal",relationship="gt",threshold=0,cross=TRUE),label="si
gnal.gt.zero")
        stratName <- add.signal(strategy =
stratName,name="sigThreshold",arguments =
list(column="signal",relationship="lt",threshold=0,cross=TRUE),label="si
gnal.lt.zero")

        stratName <- add.rule(strategy = stratName,name='ruleSignal',
arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty=100,
ordertype='market', orderside='long', threshold=NULL),type='enter')
        stratName <- add.rule(strategy = stratName,name='ruleSignal',
arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty=-100,
ordertype='stoplimit', orderside='long',
threshold=.85,tmult=TRUE),type='risk')

        stratName <- add.rule(strategy = stratName,name='ruleSignal',
arguments = list(sigcol="signal.lt.zero",sigval=TRUE, orderqty='all',
ordertype='market', orderside='long', threshold=NULL),type='exit')

    } else if (method=='test') {
        stratName <- add.indicator(strategy = stratName, name = "SMA",
            arguments = list(x = quote(mktdata$VRP), n=10),
label="VRPMA")

        stratName <- add.signal(strategy =
stratName,name="sigThreshold",arguments =
            list(column="VRPMA",
relationship="gte",threshold=25,cross=TRUE),label="test1.high")

        stratName <- add.signal(strategy =
stratName,name="sigThreshold",arguments =
            list(column="VRPMA",
relationship="lte",threshold=20,cross=TRUE),label="test1.low")

        stratName <- add.signal(strategy =
stratName,name="sigCrossover",arguments =
            list(columns=c("VRPMA","VRP"), relationship="gte"),
label="test2.high")

        stratName <- add.signal(strategy =
stratName,name="sigCrossover",arguments =
            list(columns=c("VRPMA","VRP"), relationship="lte"),
label="test2.low")

        stratName <- add.signal(strategy =
stratName,name="sigCrossover",arguments =
            list(columns=c("VRPMA","High"), relationship="gte"),
label="test3.high")

        stratName <- add.signal(strategy =
stratName,name="sigCrossover",arguments =
            list(columns=c("VRPMA","Low"), relationship="lte"),
label="test3.low")

        stratName <- add.rule(strategy = stratName, name='ruleSignal',
arguments =
            list(sigcol="VRP.low", sigval=1, orderqty=100,
ordertype='market', orderside='long', pricemethod='market',TxnFees=-5),
type='enter', path.dep=TRUE)

        stratName <- add.rule(strategy = stratName, name='ruleSignal',
arguments =
            list(sigcol="VRP.high", sigval=1, orderqty='all',
ordertype='market', orderside='long', pricemethod='market',TxnFees=-5),
type='exit', path.dep=TRUE)
    }


    #Apply the Strategy
    out <- try(applyStrategy(strategy=stratName, portfolios=qs.strategy,
mktdata=mktdata))
    tail(mktdata,50)

#    #step 5
#    #update P&L
#
updatePortf(Portfolio=qs.strategy,Dates=paste('::',as.Date(Sys.time()),s
ep=''))
#    updateAcct(name=qs.strategy, Dates=index(get(tic)))
#    sapply(X=index(get(tic)), FUN=updateEndEq, Account=qs.strategy)
#
#    acct = getAccount(qs.strategy)
#    #tail(acct$summary$End.Eq)
#    #acct$summary$End.Eq[length(acct$summary$End.Eq)]
#
#    #Trade statistics
#    tstats <- tradeStats(Portfolio=qs.strategy, Symbol=tic)
#    output <- data.frame(method, tstats$Gross.Profits,
tstats$maxDrawdown, tstats$Std.Dev.Daily.PL)
#    output
#    out
    



***************************************************************
This message is for the named person's use only. It may\...{{dropped:15}}


From jbreit at nexgo.de  Fri Dec 23 15:59:23 2011
From: jbreit at nexgo.de (Joachim Breit)
Date: Fri, 23 Dec 2011 15:59:23 +0100
Subject: [R-SIG-Finance] Option valuation for arbitrary distribution
 using monte carlo simulation
In-Reply-To: <CA+FQezXD8Xf03EdVm8pjeN4SCF14Wv-dx7sX8Psu3wR-aNg4TA@mail.gmail.com>
References: <4ECBA86C.4030604@nexgo.de>
	<1321975833682-4096122.post@n4.nabble.com>
	<A682FFE47602644E9D3DEECDD6F832978363FD@SN2PRD0302MB136.namprd03.prod.outlook.com>
	<4ECCFD36.3050607@nexgo.de>
	<1322064047703-4100184.post@n4.nabble.com>
	<1322135953099-4103558.post@n4.nabble.com>
	<4ECE33D4.7080803@nexgo.de>
	<1322139845476-4103714.post@n4.nabble.com>
	<4ECE6082.6090202@nexgo.de>
	<1322163826.20917.5.camel@brian-desktop>
	<CA+FQezXD8Xf03EdVm8pjeN4SCF14Wv-dx7sX8Psu3wR-aNg4TA@mail.gmail.com>
Message-ID: <4EF4974B.9020200@nexgo.de>

I gave it a try. See the (ugly) code below. Comments are welcome. There 
are still a few issues to solve:

- How can one do the Monte Carlo simulation faster/more efficient?
- Can somebody explain Winston's daily risk free rate?
- Is there a better optimization algorithm for the utility function than 
genoud?

----------------------------------------------
library("fImport")
library('fOptions')
library("rgenoud")
msft = 
yahooImport(query="MSFT&a=00&b=4&c=1999&d=03&e=9&f=1999&ignore=.csv",file = 
"msft", source = "http://ichart.finance.yahoo.com/table.csv?", save = TRUE)

cl = msft at data[,"Close"]   ### unadjusted close prices
cl[10:67] = cl[10:67]/2    ### a 2:1 split on 1999-03-29

ret = cl[1:66] /cl[2:67] - 1   ### the returns
logret = log(1+ret)            ### log returns
vola = sd(logret) * sqrt(252)	###  0.4091751
bsm = GBSOption(TypeFlag = "p", S = 90, X = 80, Time = 63/252, r = 
log(1+0.08), b = log(1+0.08), sigma = vola)@price  #### 2.577398 (just 
to compare)

rf = .000317   ## don't know where this comes from in Winston's paper;
                ## should be 1.08^(1/252)-1 = 0.0003054476, right?

meanutil <- function (alpha) {
x = log(alpha * (1 + ret) + (1 - alpha) * (1 + rf))  ### portf. utility
x[which(is.nan(x))] = -100000    ### correct for ln(x<0) undefined
x = mean(x)
return(x)
}

optalpha = genoud(meanutil, nvars = 1, max = TRUE, pop.size = 1000)$par
### the optimal portfolio under utility function ln(x)

portret = optalpha * (1 + ret) + (1 - optalpha) * (1 + rf)
## the optimal portfolio returns (in the sense of: daily end wealth)

num = (1 / length(ret)) * (1 / portret)
rnprob = num/sum(num)  ### the risk neutral probabilities

ov=0           #### monte carlo simulation
for (i in 1:100000) {
ov[i] = max(80 - 90 * prod(1+ sample(ret, size=63, replace = TRUE, prob 
= rnprob)),   0  )
}

mov = 1/1.08^(63/252) * mean(ov)     ### 2.512722 = option value


Am 25.11.2011 09:48, schrieb Charles Ward:
> Luenberger discusses the task of creating risk-neutral probabilities
> from any set of observed returns. I cannot find the specific reference
> in his book (Investment Science) but there is a discussion paper by
> Winston (google) that applies his method using Excel and @Risk to a
> sample of Microsoft returns. I think it would be relatively simple to
> program it in R.
>
> Charles Ward


From patrick at burns-stat.com  Fri Dec 23 16:35:13 2011
From: patrick at burns-stat.com (Patrick Burns)
Date: Fri, 23 Dec 2011 15:35:13 +0000
Subject: [R-SIG-Finance] Option valuation for arbitrary distribution
 using monte carlo simulation
In-Reply-To: <4EF4974B.9020200@nexgo.de>
References: <4ECBA86C.4030604@nexgo.de>
	<1321975833682-4096122.post@n4.nabble.com>
	<A682FFE47602644E9D3DEECDD6F832978363FD@SN2PRD0302MB136.namprd03.prod.outlook.com>
	<4ECCFD36.3050607@nexgo.de>
	<1322064047703-4100184.post@n4.nabble.com>
	<1322135953099-4103558.post@n4.nabble.com>
	<4ECE33D4.7080803@nexgo.de>
	<1322139845476-4103714.post@n4.nabble.com>
	<4ECE6082.6090202@nexgo.de>
	<1322163826.20917.5.camel@brian-desktop>
	<CA+FQezXD8Xf03EdVm8pjeN4SCF14Wv-dx7sX8Psu3wR-aNg4TA@mail.gmail.com>
	<4EF4974B.9020200@nexgo.de>
Message-ID: <4EF49FB1.2050501@burns-stat.com>

Joachim,

I'm guessing that you could get
some better speed by doing the
'sample' call all at once, do it
with 'logret' instead of 'ret'
and sum them efficiently.  Something
like:

sampmat <- array(sample(logret,
    size=63 * 1e5, replace=TRUE,
    prob=rnprob), c(63, 1e5))

samplret <- colSums(sampmat)

# then transform to simple returns
# and use 'pmax' instead of 'max'

If the matrix is too large for your
memory, you could do it in a few
blocks.

On 23/12/2011 14:59, Joachim Breit wrote:
> I gave it a try. See the (ugly) code below. Comments are welcome. There
> are still a few issues to solve:
>
> - How can one do the Monte Carlo simulation faster/more efficient?
> - Can somebody explain Winston's daily risk free rate?
> - Is there a better optimization algorithm for the utility function than
> genoud?
>
> ----------------------------------------------
> library("fImport")
> library('fOptions')
> library("rgenoud")
> msft =
> yahooImport(query="MSFT&a=00&b=4&c=1999&d=03&e=9&f=1999&ignore=.csv",file =
> "msft", source = "http://ichart.finance.yahoo.com/table.csv?", save = TRUE)
>
> cl = msft at data[,"Close"] ### unadjusted close prices
> cl[10:67] = cl[10:67]/2 ### a 2:1 split on 1999-03-29
>
> ret = cl[1:66] /cl[2:67] - 1 ### the returns
> logret = log(1+ret) ### log returns
> vola = sd(logret) * sqrt(252) ### 0.4091751
> bsm = GBSOption(TypeFlag = "p", S = 90, X = 80, Time = 63/252, r =
> log(1+0.08), b = log(1+0.08), sigma = vola)@price #### 2.577398 (just to
> compare)
>
> rf = .000317 ## don't know where this comes from in Winston's paper;
> ## should be 1.08^(1/252)-1 = 0.0003054476, right?
>
> meanutil <- function (alpha) {
> x = log(alpha * (1 + ret) + (1 - alpha) * (1 + rf)) ### portf. utility
> x[which(is.nan(x))] = -100000 ### correct for ln(x<0) undefined
> x = mean(x)
> return(x)
> }
>
> optalpha = genoud(meanutil, nvars = 1, max = TRUE, pop.size = 1000)$par
> ### the optimal portfolio under utility function ln(x)
>
> portret = optalpha * (1 + ret) + (1 - optalpha) * (1 + rf)
> ## the optimal portfolio returns (in the sense of: daily end wealth)
>
> num = (1 / length(ret)) * (1 / portret)
> rnprob = num/sum(num) ### the risk neutral probabilities
>
> ov=0 #### monte carlo simulation
> for (i in 1:100000) {
> ov[i] = max(80 - 90 * prod(1+ sample(ret, size=63, replace = TRUE, prob
> = rnprob)), 0 )
> }
>
> mov = 1/1.08^(63/252) * mean(ov) ### 2.512722 = option value
>
>
> Am 25.11.2011 09:48, schrieb Charles Ward:
>> Luenberger discusses the task of creating risk-neutral probabilities
>> from any set of observed returns. I cannot find the specific reference
>> in his book (Investment Science) but there is a discussion paper by
>> Winston (google) that applies his method using Excel and @Risk to a
>> sample of Microsoft returns. I think it would be relatively simple to
>> program it in R.
>>
>> Charles Ward
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From roger.bos at rothschild.com  Fri Dec 23 17:09:58 2011
From: roger.bos at rothschild.com (Bos, Roger)
Date: Fri, 23 Dec 2011 11:09:58 -0500
Subject: [R-SIG-Finance] Asking for help using quantstrat
In-Reply-To: <D8C95B444AD6EE4AAD638D818A9CFD34062268DA@RINNYCSE000.rth.ad.rothschild.com>
References: <72F9B845E2DAC74DA87A3C0ABAF7F5D1386A0D61@RINNYCSE000.rth.ad.rothschild.com>
	<D8C95B444AD6EE4AAD638D818A9CFD34062268DA@RINNYCSE000.rth.ad.rothschild.com>
Message-ID: <D8C95B444AD6EE4AAD638D818A9CFD34062268FB@RINNYCSE000.rth.ad.rothschild.com>

My apologies, I use a function I created instead of paste, so my
reproducible function won't work without it.  Here is what needs to be
added:

"%+%" <- function(x,y) {paste(x,y,sep="")}

Thanks,

Roger

 

-----Original Message-----
From: r-sig-finance-bounces at r-project.org
[mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Bos, Roger
Sent: Friday, December 23, 2011 7:26 AM
To: r-sig-finance at r-project.org
Subject: [R-SIG-Finance] Asking for help using quantstrat

Quantstrat users,

First of all many thanks to the authors of quantstrat.  It looks really
interesting.  I have been wanting to learn how to use quantstrat for a
long time and have finally gotten around to playing with it.  I thought
I understood the examples (i.e. faber, mac, and macd) well enough, but I
am having trouble with a couple aspects of the package.

First, in the examples the data.frame 'mktdata' is created
automatically.  I couldn't figure out how to make that work for me
because I am adding non-price data to the analysis (the VIX index
levels).  So I create mktdata manually.  Is that okay?

Second, I am having trouble getting the results I expect for my signals.
As a test I have created three signals: test1, test2, and test3. My
reproducible code is below.  By changing the method variable you can run
different types of tests.  faber, mac, and macd run fine, but my code in
'test' has some problems.  If you run it and look at mktdata the
test1.high and test1.low columns are as I expect.  The test2.high and
test2.low columns are also as I expect (although I would prefer 0s to
NAs, but I can replace later).  My problem is with test3.high and
test3.low.  Both columns are all zeros and I would expect the same
results as test1.  (I don't expect these signals to be any good, this is
just a learning process).

Thanks in advance for any hints that you can provide,

Roger

###############################

require(quantstrat)
library("PerformanceAnalytics")
library("zoo")
"%+%" <- function(x,y) {paste(x,y,sep="")}

firstTime <- TRUE
startDate <- '2004-01-02'
tic <- 'IVV'
fast <- 50
slow <- 200
method="test"

    endDate <- Sys.Date()
    currency("USD")
    get("USD", envir=.instrument)
    stock(tic, currency="USD", multiplier=1)
    get(tic, envir=.instrument)
    getSymbols(tic, from=startDate, to=endDate, adjust=T)
    for(i in tic){
        assign(tic, adjustOHLC(get(tic),use.Adjusted=TRUE))
    }

    ## Get VIX data from St. Luis Fed site
    getSymbols("VIXCLS",src="FRED")

    # Calculate VRP statistic
    etf <- get(tic)[, 6]
    names(etf)[1] <- "price"
    price <- as.numeric(etf$price)
    etf$ret <- c(as.numeric('NA'), price[-1] / price[-nrow(etf)] - 1)
    etf <- merge(etf, VIXCLS)
    etf$VRP <- lag(etf$VIXCLS)
    etf$High <- 25 #etf$VIXCLS + 2
    etf$Low <- 20 #etf$VIXCLS - 2
    mktdata <- merge(get(tic), etf)
    tail(mktdata)

    qs.strategy <- "qs"
    if (exists(".strategy")) suppressWarnings(rm("order_book.qs",
pos=.strategy))
    if (exists(".blotter")) suppressWarnings(rm("account.qs",
"portfolio.qs", pos=.blotter))
    suppressWarnings(rm("qs.strategy", "stratName", "initDate",
"initEq", 'start_t', 'end_t'))
    qs.strategy <- "qs"
    initPortf(qs.strategy, tic, initDate=startDate)
    initAcct(qs.strategy, portfolios=qs.strategy, initDate=startDate,
initEq=1e5)
    initOrders(portfolio=qs.strategy, initDate=startDate)
    stratName<- strategy(qs.strategy)

    if (method=='mac') {

        #Adding indicators to a strategy
        stratName <- add.indicator(strategy = stratName, name = "SMA",
arguments = list(x=quote(Cl(mktdata)), n=fast),label= "maFast" )
        stratName <- add.indicator(strategy = stratName, name = "SMA",
arguments = list(x=quote(Cl(mktdata)), n=slow),label= "maSlow")

        #Adding signals to a strategy
        stratName <- add.signal(strategy =
stratName,name="sigCrossover",arguments =
list(columns=c("maFast","maSlow"),
relationship="gte"),label="maFast.gt.maSlow")
        stratName <- add.signal(strategy =
stratName,name="sigCrossover",arguments =
list(column=c("maFast","maSlow"),relationship="lt"),label="maFast.lt.maS
low")

        #Add rules to a strategy
        stratName <- add.rule(strategy = stratName,name='ruleSignal',
arguments = list(sigcol="maFast.gt.maSlow",sigval=TRUE, orderqty=100,
ordertype='market', orderside='long'),type='enter')
        stratName <- add.rule(strategy = stratName,name='ruleSignal',
arguments = list(sigcol="maFast.lt.maSlow",sigval=TRUE, orderqty=-100,
ordertype='market', orderside='long'),type='exit')

    } else if (method=='faber') {
        # Add an indicator
        stratName <- add.indicator(strategy = stratName, name = "SMA",
arguments = list(x = quote(mktdata$IVV.Close), n=10), label="SMA10")

        # There are two signals:
        # The first is when monthly price crosses over the 10-month SMA
        stratName <- add.signal(stratName,name="sigCrossover",arguments
= list(columns=c("Close","SMA10"),relationship="gte"),label="Cl.gt.SMA")
        # The second is when the monthly price crosses under the
10-month SMA
        stratName <- add.signal(stratName,name="sigCrossover",arguments
= list(columns=c("Close","SMA10"),relationship="lt"),label="Cl.lt.SMA")

        # There are two rules:
        # The first is to buy when the price crosses above the SMA
        stratName <- add.rule(stratName, name='ruleSignal', arguments =
list(sigcol="Cl.gt.SMA", sigval=TRUE, orderqty=100, ordertype='market',
orderside='long', pricemethod='market',TxnFees=-5), type='enter',
path.dep=TRUE)
        # The second is to sell when the price crosses below the SMA
        stratName <- add.rule(stratName, name='ruleSignal', arguments =
list(sigcol="Cl.lt.SMA", sigval=TRUE, orderqty='all',
ordertype='market', orderside='long', pricemethod='market',TxnFees=-5),
type='exit', path.dep=TRUE)

    } else if (method=='macd') {

        stratName <- add.indicator(strategy = stratName, name = "MACD",
arguments = list(x=quote(Cl(mktdata))) )

        stratName <- add.signal(strategy =
stratName,name="sigThreshold",arguments =
list(column="signal",relationship="gt",threshold=0,cross=TRUE),label="si
gnal.gt.zero")
        stratName <- add.signal(strategy =
stratName,name="sigThreshold",arguments =
list(column="signal",relationship="lt",threshold=0,cross=TRUE),label="si
gnal.lt.zero")

        stratName <- add.rule(strategy = stratName,name='ruleSignal',
arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty=100,
ordertype='market', orderside='long', threshold=NULL),type='enter')
        stratName <- add.rule(strategy = stratName,name='ruleSignal',
arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty=-100,
ordertype='stoplimit', orderside='long',
threshold=.85,tmult=TRUE),type='risk')

        stratName <- add.rule(strategy = stratName,name='ruleSignal',
arguments = list(sigcol="signal.lt.zero",sigval=TRUE, orderqty='all',
ordertype='market', orderside='long', threshold=NULL),type='exit')

    } else if (method=='test') {
        stratName <- add.indicator(strategy = stratName, name = "SMA",
            arguments = list(x = quote(mktdata$VRP), n=10),
label="VRPMA")

        stratName <- add.signal(strategy =
stratName,name="sigThreshold",arguments =
            list(column="VRPMA",
relationship="gte",threshold=25,cross=TRUE),label="test1.high")

        stratName <- add.signal(strategy =
stratName,name="sigThreshold",arguments =
            list(column="VRPMA",
relationship="lte",threshold=20,cross=TRUE),label="test1.low")

        stratName <- add.signal(strategy =
stratName,name="sigCrossover",arguments =
            list(columns=c("VRPMA","VRP"), relationship="gte"),
label="test2.high")

        stratName <- add.signal(strategy =
stratName,name="sigCrossover",arguments =
            list(columns=c("VRPMA","VRP"), relationship="lte"),
label="test2.low")

        stratName <- add.signal(strategy =
stratName,name="sigCrossover",arguments =
            list(columns=c("VRPMA","High"), relationship="gte"),
label="test3.high")

        stratName <- add.signal(strategy =
stratName,name="sigCrossover",arguments =
            list(columns=c("VRPMA","Low"), relationship="lte"),
label="test3.low")

        stratName <- add.rule(strategy = stratName, name='ruleSignal',
arguments =
            list(sigcol="VRP.low", sigval=1, orderqty=100,
ordertype='market', orderside='long', pricemethod='market',TxnFees=-5),
type='enter', path.dep=TRUE)

        stratName <- add.rule(strategy = stratName, name='ruleSignal',
arguments =
            list(sigcol="VRP.high", sigval=1, orderqty='all',
ordertype='market', orderside='long', pricemethod='market',TxnFees=-5),
type='exit', path.dep=TRUE)
    }


    #Apply the Strategy
    out <- try(applyStrategy(strategy=stratName, portfolios=qs.strategy,
mktdata=mktdata))
    tail(mktdata,50)

#    #step 5
#    #update P&L
#
updatePortf(Portfolio=qs.strategy,Dates=paste('::',as.Date(Sys.time()),s
ep=''))
#    updateAcct(name=qs.strategy, Dates=index(get(tic)))
#    sapply(X=index(get(tic)), FUN=updateEndEq, Account=qs.strategy)
#
#    acct = getAccount(qs.strategy)
#    #tail(acct$summary$End.Eq)
#    #acct$summary$End.Eq[length(acct$summary$End.Eq)]
#
#    #Trade statistics
#    tstats <- tradeStats(Portfolio=qs.strategy, Symbol=tic)
#    output <- data.frame(method, tstats$Gross.Profits,
tstats$maxDrawdown, tstats$Std.Dev.Daily.PL)
#    output
#    out
    



***************************************************************
This message is for the named person's use only. It
may\...{{dropped:15}}

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.
***************************************************************

This message is for the named person's use only. It may
contain confidential, proprietary or legally privileged
information. No right to confidential or privileged treatment
of this message is waived or lost by an error in transmission.
If you have received this message in error, please immediately
notify the the sender by e-mail, delete the message and all 
copies from your system and destroy any hard copies.  You must
not, directly or indirectly, use, disclose, distribute, 
print or copy any part of this message if you are not
the intended recipient.

****************************************************************



***************************************************************
This message is for the named person's use only. It may
contain confidential, proprietary or legally privileged
information. No right to confidential or privileged treatment
of this message is waived or lost by an error in transmission.
If you have received this message in error, please immediately
notify the the sender by e-mail, delete the message and all 
copies from your system and destroy any hard copies.  You must
not, directly or indirectly, use, disclose, distribute, 
print or copy any part of this message if you are not
the intended recipient.

Disclaimer added by CodeTwo Exchange Rules 2010	
http://www.codetwo.com	
	


From gsee000 at gmail.com  Fri Dec 23 19:43:40 2011
From: gsee000 at gmail.com (G See)
Date: Fri, 23 Dec 2011 12:43:40 -0600
Subject: [R-SIG-Finance] Asking for help using quantstrat
In-Reply-To: <D8C95B444AD6EE4AAD638D818A9CFD34062268FB@RINNYCSE000.rth.ad.rothschild.com>
References: <72F9B845E2DAC74DA87A3C0ABAF7F5D1386A0D61@RINNYCSE000.rth.ad.rothschild.com>
	<D8C95B444AD6EE4AAD638D818A9CFD34062268DA@RINNYCSE000.rth.ad.rothschild.com>
	<D8C95B444AD6EE4AAD638D818A9CFD34062268FB@RINNYCSE000.rth.ad.rothschild.com>
Message-ID: <CA+xi=qbYye+wuRYwDEk6C+BSAKKQKsswhJUyYELRJNYz92suFA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111223/633ed8a3/attachment.pl>

From fin_engr at hotmail.com  Fri Dec 23 20:50:34 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Fri, 23 Dec 2011 14:50:34 -0500
Subject: [R-SIG-Finance] using [ on xts object
Message-ID: <COL118-W17711693473B934DD406ADEFAB0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111223/30d102df/attachment.pl>

From josh.m.ulrich at gmail.com  Fri Dec 23 21:00:18 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Fri, 23 Dec 2011 14:00:18 -0600
Subject: [R-SIG-Finance] using [ on xts object
In-Reply-To: <COL118-W17711693473B934DD406ADEFAB0@phx.gbl>
References: <COL118-W17711693473B934DD406ADEFAB0@phx.gbl>
Message-ID: <CAPPM_gRcPDNX0r64O_X7bt-Mo0GqoBPzAxyBKAn2ooxfK1ErnQ@mail.gmail.com>

Dear Mr. or Mrs. Engineer,

On Fri, Dec 23, 2011 at 1:50 PM, financial engineer
<fin_engr at hotmail.com> wrote:
>
> I have the following sample tick data set (Z11):
> 24990 ?2011-10-31 ? ? ? 0421 ? ? ? ?8900 ? ? ? ? ?B
> 24991 ?2011-10-31 ? ? ? 0421 ? ? ? ?8900 ? ? ? ? ?B
> 24992 ?2011-10-31 ? ? ? 0421 ? ? ? ?8900 ? ? ? ? ?B
> 24993 ?2011-10-31 ? ? ? 0421 ? ? ? ?8900 ? ? ? ? ?B
> 24994 ?2011-10-31 ? ? ? 0421 ? ? ? ?8900 ? ? ? ? ?B
> 24995 ?2011-10-31 ? ? ? 0421 ? ? ? ?8900 ? ? ? ? ?B
> 24996 ?2011-10-31 ? ? ? 0421 ? ? ? ?8900 ? ? ? ? ?B
> 24997 ?2011-10-31 ? ? ? 0421 ? ? ? ?8900 ? ? ? ? ?B
> 24998 ?2011-10-31 ? ? ? 0421 ? ? ? ?8900 ? ? ? ? ?B
> 24999 ?2011-10-31 ? ? ? 0421 ? ? ? ?8900 ? ? ? ? ?B
>
> where the second field is the date, third- time, fourth - price, and fifth - bid, ask, or trade
>
> I have converted the above into a xts object using the following command
>
> z<-xts(Z11[,-1],order.by=as.Date(Z11[,1]))
>
> which has resulted in data in the following form
> 2011-10-31 "0421" ? ? "8900" ? ? ?"B"
> 2011-10-31 "0421" ? ? "8900" ? ? ?"B"
> 2011-10-31 "0421" ? ? "8900" ? ? ?"B"
> 2011-10-31 "0421" ? ? "8900" ? ? ?"B"
> 2011-10-31 "0421" ? ? "8900" ? ? ?"B"
> 2011-10-31 "0421" ? ? "8900" ? ? ?"B"
> 2011-10-31 "0421" ? ? "8900" ? ? ?"B"
> 2011-10-31 "0421" ? ? "8900" ? ? ?"B"
>
> I want to split my data based on the hour of the day, ?so I was trying to use the following
> z['2011-10-31 04/'] to get the data starting from the 04 hour through the end of the day,
>
> but it returns the following:
> z['2011-10-31 04/']
> ? ? trade_time trade_price trade_type
>
> can anyone pls. suggest how I can split the data into hourly intervals from this xts object.....thanks!
>
You can't.  You created an xts object with a Date class index.  The
Date class doesn't contain any information about time of day.  Use a
date/time class (read ?DateTimeClasses).

Subsetting xts objects by time of day has been discussed several times
on this list.  Please search the list archives (e.g. via rseek.org).

Regards,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com


From d.afshartous at Vanderbilt.Edu  Fri Dec 23 21:43:41 2011
From: d.afshartous at Vanderbilt.Edu (Afshartous, David)
Date: Fri, 23 Dec 2011 14:43:41 -0600
Subject: [R-SIG-Finance] Simulated expected return for a hedge fund
Message-ID: <2D74E06059E9184D9507A6739D10ACE5195E44A6AA@ITS-HCWNEM06.ds.Vanderbilt.edu>


All,
Below is an R-lab problem from Ch2 of Statistics and Data Analysis for Financial Engineering (Ruppert, 2010).   The R code runs okay but the answer seems strange.   Any hints much appreciated.    
Cheers,
David

David Afshartous, Ph.D.
Research Associate Professor
PSTAT?: ASA Accredited Professional Statistician
Department of Biostatistics
Vanderbilt University Medical Center
  

## suppose Hedge fund owns $1,000,000 of stock and used $50,000 capital and
## $950,000 borrowed money for the purchase.
## Daily log returns on the stock have a mean of 0.05/year and SD of 0.23/year,
## which can be converted to per trading day by dividing by 253 and sqrt(253)

## the hedge fund will sell the stock for a profit of at least $100,000 if the value
## of the stock rises to at least $1,100,000 at the end of one of the first 100 trading days,
## sell it for a loss if the value falls below $950,000 at the end of one of the first
## 100 trading days, or sell after 100 trading days if the closing price has stayed between
## $950,000 and $1,1000,000.

## PROBLEM 7: What is the expected return? When answering this question, remember
## that only $50,000 was invested.  Also, the units of return are time, e.g.,
## one can express a return as a daily return or a weekly return.  Therefore,
## one must keep track of how long the hedge fund holds its position before selling

The code below simulates whether value falls below 950,000, goes above 1,1000,000, or stays between. The amount lost/gained in the 1st/2nd scenario is a constant, whereas the amount lost/gained in the third scenario is random.  

### simulation code; written for readability as opposed to speed
niter = 10000     ## number of iterations
below = rep(0, niter)   ## set up storage
above = rep(0, niter)
between = rep(0, niter)
between.ending.value = NULL
below.ending.day = NULL
above.ending.day = NULL
set.seed(2009)
for (i in 1:niter) {
  r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
  logPrice = log(1e6) + cumsum(r)  ## 1e6 = initial price
  minLogP = min(logPrice)  ## min price over next 45 days
  maxLogP = max(logPrice)  ## min price over next 45 days
  crossBelowLogP.day = ifelse( minLogP < log(950000),  min(which(logPrice < log(950000))), 101) ## 101 means doesn't cross
  crossAboveLogP.day = ifelse( maxLogP > log(1100000),  min(which(logPrice > log(1100000))), 101)
  if ( (minLogP >= log(950000)) & (maxLogP <= log(1100000)) ) {   ## Neither cross boundary
     between[i] = 1
     between.ending.value = append(between.ending.value, exp(logPrice[100]))
     }
  if  ( (minLogP < log(950000)) & (maxLogP > log(1100000))) { ## Both cross
             ifelse (crossBelowLogP.day < crossAboveLogP.day, below[i] <- 1, above[i] <-1)
             ifelse (crossBelowLogP.day < crossAboveLogP.day, below.ending.day <- append(below.ending.day, crossBelowLogP.day),
                                                        above.ending.day <- append(above.ending.day, crossAboveLogP.day))
           }
  if ( (minLogP < log(950000))  & (maxLogP <= log(1100000))  ) {    ## Only cross below 
             below[i] = 1
             below.ending.day = append(below.ending.day, crossBelowLogP.day)
           }
  if ( (minLogP >= log(950000))  & (maxLogP > log(1100000))  ) {    ## Only cross above 
             above[i] = 1
             above.ending.day = append(above.ending.day, crossAboveLogP.day)
           }
}
mean(above)  ## this will give the probability of the value crossing the above threshold

When annualizing returns, the day in which a boundary needs to be accounted for.    The following code calculates the overall expected return by conditioning on each scenario:

# cross above: always make constant 100,000 based on initial investment of 50,000
# P_t/P_t-1 = 100,000/50,000 = 2 = gross return --> net return = 2 - 1 = 1
ret.above = (1 + 1)^(365/(above.ending.day))  - 1    ### annualized

# cross below: always lose constant 50,000 based on initial investment of 50,000
# P_t/P_t-1 = 50,000/50,000 = 1 = gross return --> net return = 1 - 1 = 0
ret.below = 0 

## betwen: final value depends on realized value on 100th day
# P_t/P_t-1 = between.ending.value/50,000 = --> net return = gross return  - 1 

net = ifelse(between.ending.value < 1000000,
                    (1000000 - between.ending.value)/50000 - 1,  ## net return, gain
                    (between.ending.value  - 1000000)/50000 - 1)   ## net return, loss

ret.between = (1 + net)^(365/100) - 1

exp.return = mean(above)*mean(ret.above)   + mean(below)*mean(ret.below)   + mean(between) * mean(ret.between)
8.669104e+50???


From fin_engr at hotmail.com  Fri Dec 23 22:17:21 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Fri, 23 Dec 2011 16:17:21 -0500
Subject: [R-SIG-Finance] using [ on xts object
In-Reply-To: <CAPPM_gRcPDNX0r64O_X7bt-Mo0GqoBPzAxyBKAn2ooxfK1ErnQ@mail.gmail.com>
References: <COL118-W17711693473B934DD406ADEFAB0@phx.gbl>,
	<CAPPM_gRcPDNX0r64O_X7bt-Mo0GqoBPzAxyBKAn2ooxfK1ErnQ@mail.gmail.com>
Message-ID: <COL118-W56E80B0388539EC102AAEDEFAB0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111223/d83d38fc/attachment.pl>

From josh.m.ulrich at gmail.com  Fri Dec 23 23:38:02 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Fri, 23 Dec 2011 16:38:02 -0600
Subject: [R-SIG-Finance] using [ on xts object
In-Reply-To: <COL118-W56E80B0388539EC102AAEDEFAB0@phx.gbl>
References: <COL118-W17711693473B934DD406ADEFAB0@phx.gbl>
	<CAPPM_gRcPDNX0r64O_X7bt-Mo0GqoBPzAxyBKAn2ooxfK1ErnQ@mail.gmail.com>
	<COL118-W56E80B0388539EC102AAEDEFAB0@phx.gbl>
Message-ID: <CAPPM_gQg6zm0sSF5a3MX3TPoD8rhb8_sgtzY_1ymLx2yi0oi4Q@mail.gmail.com>

On Fri, Dec 23, 2011 at 3:17 PM, financial engineer
<fin_engr at hotmail.com> wrote:
> Dear Joshua,
>
> thanks for your response.
>
> I have done the search and have rewritten the code as follows:
>
> dt<-cbind(Z11[,1],Z11[,2]) which returned the following:
>
> [49994,] "2011-10-31" "0833"
> ?[49995,] "2011-10-31" "0833"
> ?[49996,] "2011-10-31" "0833"
> ?[49997,] "2011-10-31" "0833"
> ?[49998,] "2011-10-31" "0833"
> ?[49999,] "2011-10-31" "0833"
>
> and then I tried the following:
> as.POSIXct(as.Date(strptime(as.character(index(dt)),'%Y%m%d %H:%M')))
>
> however, the above returns only NA. It seems like I am making a silly error
> somewhere, so any help in fixing it would be appreciated.
>
Errors, plural.

1) You cbind the "date" and "time" columns into a _matrix_ dt.  Then
you try to extract the index(dt) of the matrix.  Matrix class objects
don't have an index attribute.
2) You pass a matrix to strptime.  ?strptime says "strptime converts
character _vectors_ to class POSIXlt" (emphasis added).
3) Even if you didn't make the first two errors, you use as.Date() to
effectively remove the time component you set out to add.

My intent isn't to be rude.  These 'issues' are the result of not
understanding some very basic concepts.  Doing the work for you and
giving you the answer won't help you in the long-term.  So, take a
step back and examine the results of the individual commands to find
where the output isn't what you expect.  Then read the documentation
to find out why.

> thanks,
> Bobby
>

Regards,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com



>> From: josh.m.ulrich at gmail.com
>> Date: Fri, 23 Dec 2011 14:00:18 -0600
>> Subject: Re: [R-SIG-Finance] using [ on xts object
>> To: fin_engr at hotmail.com
>> CC: r-sig-finance at r-project.org
>
>>
>> Dear Mr. or Mrs. Engineer,
>>
>> On Fri, Dec 23, 2011 at 1:50 PM, financial engineer
>> <fin_engr at hotmail.com> wrote:
>> >
>> > I have the following sample tick data set (Z11):
>> > 24990 ?2011-10-31 ? ? ? 0421 ? ? ? ?8900 ? ? ? ? ?B
>> > 24991 ?2011-10-31 ? ? ? 0421 ? ? ? ?8900 ? ? ? ? ?B
>> > 24992 ?2011-10-31 ? ? ? 0421 ? ? ? ?8900 ? ? ? ? ?B
>> > 24993 ?2011-10-31 ? ? ? 0421 ? ? ? ?8900 ? ? ? ? ?B
>> > 24994 ?2011-10-31 ? ? ? 0421 ? ? ? ?8900 ? ? ? ? ?B
>> > 24995 ?2011-10-31 ? ? ? 0421 ? ? ? ?8900 ? ? ? ? ?B
>> > 24996 ?2011-10-31 ? ? ? 0421 ? ? ? ?8900 ? ? ? ? ?B
>> > 24997 ?2011-10-31 ? ? ? 0421 ? ? ? ?8900 ? ? ? ? ?B
>> > 24998 ?2011-10-31 ? ? ? 0421 ? ? ? ?8900 ? ? ? ? ?B
>> > 24999 ?2011-10-31 ? ? ? 0421 ? ? ? ?8900 ? ? ? ? ?B
>
>> >
>> > where the second field is the date, third- time, fourth - price, and
>> > fifth - bid, ask, or trade
>> >
>> > I have converted the above into a xts object using the following command
>> >
>> > z<-xts(Z11[,-1],order.by=as.Date(Z11[,1]))
>> >
>> > which has resulted in data in the following form
>> > 2011-10-31 "0421" ? ? "8900" ? ? ?"B"
>> > 2011-10-31 "0421" ? ? "8900" ? ? ?"B"
>> > 2011-10-31 "0421" ? ? "8900" ? ? ?"B"
>> > 2011-10-31 "0421" ? ? "8900" ? ? ?"B"
>> > 2011-10-31 "0421" ? ? "8900" ? ? ?"B"
>> > 2011-10-31 "0421" ? ? "8900" ? ? ?"B"
>> > 2011-10-31 "0421" ? ? "8900" ? ? ?"B"
>> > 2011-10-31 "0421" ? ? "8900" ? ? ?"B"
>> >
>> > I want to split my data based on the hour of the day, ?so I was trying
>> > to use the following
>
>> > z['2011-10-31 04/'] to get the data starting from the 04 hour through
>> > the end of the day,
>> >
>> > but it returns the following:
>> > z['2011-10-31 04/']
>> > ? ? trade_time trade_price trade_type
>
>> >
>> > can anyone pls. suggest how I can split the data into hourly intervals
>> > from this xts object.....thanks!
>> >
>> You can't. You created an xts object with a Date class index. The
>> Date class doesn't contain any information about time of day. Use a
>> date/time class (read ?DateTimeClasses).
>>
>> Subsetting xts objects by time of day has been discussed several times
>> on this list. Please search the list archives (e.g. via rseek.org).
>>
>> Regards,
>> --
>> Joshua Ulrich | FOSS Trading: www.fosstrading.com


From fin_engr at hotmail.com  Fri Dec 23 23:40:25 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Fri, 23 Dec 2011 17:40:25 -0500
Subject: [R-SIG-Finance] using [ on xts object
In-Reply-To: <CAPPM_gQg6zm0sSF5a3MX3TPoD8rhb8_sgtzY_1ymLx2yi0oi4Q@mail.gmail.com>
References: <COL118-W17711693473B934DD406ADEFAB0@phx.gbl>
	<CAPPM_gRcPDNX0r64O_X7bt-Mo0GqoBPzAxyBKAn2ooxfK1ErnQ@mail.gmail.com>,
	<COL118-W56E80B0388539EC102AAEDEFAB0@phx.gbl>,
	<CAPPM_gQg6zm0sSF5a3MX3TPoD8rhb8_sgtzY_1ymLx2yi0oi4Q@mail.gmail.com>
Message-ID: <COL118-W52383AC3304B0288093CCEFAB0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111223/c204edee/attachment.pl>

From roger.bos at rothschild.com  Sat Dec 24 02:19:34 2011
From: roger.bos at rothschild.com (Bos, Roger)
Date: Fri, 23 Dec 2011 20:19:34 -0500
Subject: [R-SIG-Finance] Asking for help using quantstrat SOLVED
In-Reply-To: <CA+xi=qbYye+wuRYwDEk6C+BSAKKQKsswhJUyYELRJNYz92suFA@mail.gmail.com>
References: <72F9B845E2DAC74DA87A3C0ABAF7F5D1386A0D61@RINNYCSE000.rth.ad.rothschild.com><D8C95B444AD6EE4AAD638D818A9CFD34062268DA@RINNYCSE000.rth.ad.rothschild.com><D8C95B444AD6EE4AAD638D818A9CFD34062268FB@RINNYCSE000.rth.ad.rothschild.com>
	<CA+xi=qbYye+wuRYwDEk6C+BSAKKQKsswhJUyYELRJNYz92suFA@mail.gmail.com>
Message-ID: <D8C95B444AD6EE4AAD638D818A9CFD3406226925@RINNYCSE000.rth.ad.rothschild.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111223/7cd3c315/attachment.pl>

From wjlee2002 at naver.com  Sat Dec 24 12:34:21 2011
From: wjlee2002 at naver.com (=?EUC-KR?B?wMy/+MDn?=)
Date: Sat, 24 Dec 2011 20:34:21 +0900
Subject: [R-SIG-Finance] =?euc-kr?q?Strange_results_from_Quantstrat?=
Message-ID: <d2007c2a800092ec60c009eeee39640f@tweb07-2.nm>

Hi, all
This is a simply intra-day system which goes short in the morning and exits in the afternoon.
If the test data has '1' in the column of 'isShort_entrySymbol, it goes short, and if the test data has '1' in the column of 'isexitShort', it exits. 
In this case, the data is just from 2006-01-11 to 2006-01-13, and it has the value '1' in those columns in 2006-01-12.
I ran the system with quantstrat package, but there was not trades at all.
> tradeStats("test")[,c("Symbol","Num.Trades","Net.Trading.PL","maxDrawdown")]
NULL
But When I ran the system for only 2006-01-12 data (I commented out the line in the attached source), I got 41 trades like below
> tradeStats("test")[,c("Symbol","Num.Trades","Net.Trading.PL","maxDrawdown")]
 Symbol Num.Trades Net.Trading.PL maxDrawdown 
testSymbol 41 -1.2 -24 
Please tell me what's wrong with the system.
Thanks.
Wonjae Lee
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111224/eddce7de/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: intra-day.system.R
Type: application/octet-stream
Size: 1888 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111224/eddce7de/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: testSymbol.csv
Type: text/comma-separated-values
Size: 38220 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111224/eddce7de/attachment.bin>

From papa.senyo at yahoo.it  Sat Dec 24 13:14:26 2011
From: papa.senyo at yahoo.it (Papa Senyo)
Date: Sat, 24 Dec 2011 12:14:26 +0000 (GMT)
Subject: [R-SIG-Finance] Unit root test
Message-ID: <1324728866.4754.YahooMailNeo@web132303.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111224/b2544434/attachment.pl>

From Thomas.Schwiertz at gutmark.net  Sat Dec 24 14:04:58 2011
From: Thomas.Schwiertz at gutmark.net (Thomas Schwiertz)
Date: Sat, 24 Dec 2011 13:04:58 +0000
Subject: [R-SIG-Finance] Simulated expected return for a hedge fund
In-Reply-To: <2D74E06059E9184D9507A6739D10ACE5195E44A6AA@ITS-HCWNEM06.ds.Vanderbilt.edu>
References: <2D74E06059E9184D9507A6739D10ACE5195E44A6AA@ITS-HCWNEM06.ds.Vanderbilt.edu>
Message-ID: <F8EFCCB1-B01B-4346-B350-34A36BAE673A@gutmark.net>



Hi David,

I am not quite sure, but I think the solution can be calculated without any Computer simulation by using the "brownian reflection principle". 
Nevertheless one assumes the stock price is a Brownian motion, and it is well known historical stock returns have "fat tails". In my diploma thesis I used "truncated L?vy-flights" to cover this issue. I examined various questions for random walks: what's the maximum/minimum, what's the probability of a recurrence (the stock price after 100 days is at its starting Price again)... Unfourtunately the thesis is in German, but let me know if it might help... Anyway my hint: brownian reflection principle.

Merry Christmas,
Thomas


Am 23.12.2011 um 21:44 schrieb "Afshartous, David" <d.afshartous at vanderbilt.edu>:

> 
> All,
> Below is an R-lab problem from Ch2 of Statistics and Data Analysis for Financial Engineering (Ruppert, 2010).   The R code runs okay but the answer seems strange.   Any hints much appreciated.    
> Cheers,
> David
> 
> David Afshartous, Ph.D.
> Research Associate Professor
> PSTAT?: ASA Accredited Professional Statistician
> Department of Biostatistics
> Vanderbilt University Medical Center
> 
> 
> ## suppose Hedge fund owns $1,000,000 of stock and used $50,000 capital and
> ## $950,000 borrowed money for the purchase.
> ## Daily log returns on the stock have a mean of 0.05/year and SD of 0.23/year,
> ## which can be converted to per trading day by dividing by 253 and sqrt(253)
> 
> ## the hedge fund will sell the stock for a profit of at least $100,000 if the value
> ## of the stock rises to at least $1,100,000 at the end of one of the first 100 trading days,
> ## sell it for a loss if the value falls below $950,000 at the end of one of the first
> ## 100 trading days, or sell after 100 trading days if the closing price has stayed between
> ## $950,000 and $1,1000,000.
> 
> ## PROBLEM 7: What is the expected return? When answering this question, remember
> ## that only $50,000 was invested.  Also, the units of return are time, e.g.,
> ## one can express a return as a daily return or a weekly return.  Therefore,
> ## one must keep track of how long the hedge fund holds its position before selling
> 
> The code below simulates whether value falls below 950,000, goes above 1,1000,000, or stays between. The amount lost/gained in the 1st/2nd scenario is a constant, whereas the amount lost/gained in the third scenario is random.  
> 
> ### simulation code; written for readability as opposed to speed
> niter = 10000     ## number of iterations
> below = rep(0, niter)   ## set up storage
> above = rep(0, niter)
> between = rep(0, niter)
> between.ending.value = NULL
> below.ending.day = NULL
> above.ending.day = NULL
> set.seed(2009)
> for (i in 1:niter) {
>  r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
>  logPrice = log(1e6) + cumsum(r)  ## 1e6 = initial price
>  minLogP = min(logPrice)  ## min price over next 45 days
>  maxLogP = max(logPrice)  ## min price over next 45 days
>  crossBelowLogP.day = ifelse( minLogP < log(950000),  min(which(logPrice < log(950000))), 101) ## 101 means doesn't cross
>  crossAboveLogP.day = ifelse( maxLogP > log(1100000),  min(which(logPrice > log(1100000))), 101)
>  if ( (minLogP >= log(950000)) & (maxLogP <= log(1100000)) ) {   ## Neither cross boundary
>     between[i] = 1
>     between.ending.value = append(between.ending.value, exp(logPrice[100]))
>     }
>  if  ( (minLogP < log(950000)) & (maxLogP > log(1100000))) { ## Both cross
>             ifelse (crossBelowLogP.day < crossAboveLogP.day, below[i] <- 1, above[i] <-1)
>             ifelse (crossBelowLogP.day < crossAboveLogP.day, below.ending.day <- append(below.ending.day, crossBelowLogP.day),
>                                                        above.ending.day <- append(above.ending.day, crossAboveLogP.day))
>           }
>  if ( (minLogP < log(950000))  & (maxLogP <= log(1100000))  ) {    ## Only cross below 
>             below[i] = 1
>             below.ending.day = append(below.ending.day, crossBelowLogP.day)
>           }
>  if ( (minLogP >= log(950000))  & (maxLogP > log(1100000))  ) {    ## Only cross above 
>             above[i] = 1
>             above.ending.day = append(above.ending.day, crossAboveLogP.day)
>           }
> }
> mean(above)  ## this will give the probability of the value crossing the above threshold
> 
> When annualizing returns, the day in which a boundary needs to be accounted for.    The following code calculates the overall expected return by conditioning on each scenario:
> 
> # cross above: always make constant 100,000 based on initial investment of 50,000
> # P_t/P_t-1 = 100,000/50,000 = 2 = gross return --> net return = 2 - 1 = 1
> ret.above = (1 + 1)^(365/(above.ending.day))  - 1    ### annualized
> 
> # cross below: always lose constant 50,000 based on initial investment of 50,000
> # P_t/P_t-1 = 50,000/50,000 = 1 = gross return --> net return = 1 - 1 = 0
> ret.below = 0 
> 
> ## betwen: final value depends on realized value on 100th day
> # P_t/P_t-1 = between.ending.value/50,000 = --> net return = gross return  - 1 
> 
> net = ifelse(between.ending.value < 1000000,
>                    (1000000 - between.ending.value)/50000 - 1,  ## net return, gain
>                    (between.ending.value  - 1000000)/50000 - 1)   ## net return, loss
> 
> ret.between = (1 + net)^(365/100) - 1
> 
> exp.return = mean(above)*mean(ret.above)   + mean(below)*mean(ret.below)   + mean(between) * mean(ret.between)
> 8.669104e+50???
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Sat Dec 24 17:55:06 2011
From: gsee000 at gmail.com (G See)
Date: Sat, 24 Dec 2011 10:55:06 -0600
Subject: [R-SIG-Finance] Simulated expected return for a hedge fund
In-Reply-To: <2D74E06059E9184D9507A6739D10ACE5195E44A6AA@ITS-HCWNEM06.ds.Vanderbilt.edu>
References: <2D74E06059E9184D9507A6739D10ACE5195E44A6AA@ITS-HCWNEM06.ds.Vanderbilt.edu>
Message-ID: <CA+xi=qZ9Wiq+wgQbrXD70msLUX9jc8DKnPtCNUKJ0fmoC-ZM+w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111224/b0c55713/attachment.pl>

From gsee000 at gmail.com  Sat Dec 24 19:58:29 2011
From: gsee000 at gmail.com (G See)
Date: Sat, 24 Dec 2011 12:58:29 -0600
Subject: [R-SIG-Finance] Simulated expected return for a hedge fund
In-Reply-To: <CA+xi=qZ9Wiq+wgQbrXD70msLUX9jc8DKnPtCNUKJ0fmoC-ZM+w@mail.gmail.com>
References: <2D74E06059E9184D9507A6739D10ACE5195E44A6AA@ITS-HCWNEM06.ds.Vanderbilt.edu>
	<CA+xi=qZ9Wiq+wgQbrXD70msLUX9jc8DKnPtCNUKJ0fmoC-ZM+w@mail.gmail.com>
Message-ID: <CA+xi=qZXiQ+JnrQPuqz2cQqqhbJ=+EcyuZ7zS1e_7hQyMQ7ZFQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111224/c05ba2e4/attachment.pl>

From gsee000 at gmail.com  Sat Dec 24 20:27:21 2011
From: gsee000 at gmail.com (G See)
Date: Sat, 24 Dec 2011 13:27:21 -0600
Subject: [R-SIG-Finance] Simulated expected return for a hedge fund
In-Reply-To: <CA+xi=qZXiQ+JnrQPuqz2cQqqhbJ=+EcyuZ7zS1e_7hQyMQ7ZFQ@mail.gmail.com>
References: <2D74E06059E9184D9507A6739D10ACE5195E44A6AA@ITS-HCWNEM06.ds.Vanderbilt.edu>
	<CA+xi=qZ9Wiq+wgQbrXD70msLUX9jc8DKnPtCNUKJ0fmoC-ZM+w@mail.gmail.com>
	<CA+xi=qZXiQ+JnrQPuqz2cQqqhbJ=+EcyuZ7zS1e_7hQyMQ7ZFQ@mail.gmail.com>
Message-ID: <CA+xi=qax2kzfo-ZZOy1Ty8Va6eM5WJM_p2u2ZRh0cNFKxOL+Cw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111224/6e751576/attachment.pl>

From comtech.usa at gmail.com  Sat Dec 24 23:09:10 2011
From: comtech.usa at gmail.com (Michael)
Date: Sat, 24 Dec 2011 16:09:10 -0600
Subject: [R-SIG-Finance] Happy holidays and trading strategies in R?
Message-ID: <CAPNjSFYTwh=2nz=xQ8qkCBiLc_=ReXVZSunHt64b96p8kbeaSQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111224/36363ef3/attachment.pl>

From michael.weylandt at gmail.com  Sat Dec 24 23:15:58 2011
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Sat, 24 Dec 2011 16:15:58 -0600
Subject: [R-SIG-Finance] Happy holidays and trading strategies in R?
In-Reply-To: <CAPNjSFYTwh=2nz=xQ8qkCBiLc_=ReXVZSunHt64b96p8kbeaSQ@mail.gmail.com>
References: <CAPNjSFYTwh=2nz=xQ8qkCBiLc_=ReXVZSunHt64b96p8kbeaSQ@mail.gmail.com>
Message-ID: <CAAmySGMW=O7UWWq0AYO-T5yvNJF9gVJLnm8xGE=TZRMHg9i77A@mail.gmail.com>

Have you looked at the quantstrat demos? (If you don't know what I
mean, google quanstrat and download the required packages from
R-forge)

Michael

On Sat, Dec 24, 2011 at 4:09 PM, Michael <comtech.usa at gmail.com> wrote:
> Hi all,
>
> Happy holidays!
>
> I would like to ask a question about using R to backtest strategies ...
>
> Are there people actually using R for trading real-money? Could anybody
> please kindly give me some pointers to the latest status of using R for
> backtesting and could you please point me to "sample"/existing strategies
> that were written in R? I know TTR but those are hardly trading strategies
> and there are no good trading strategies visualization tools at all... of
> course I understand people won't post full strategies secret sources on
> Internet, but at least maybe some samples that had worked in the ancient
> times?
>
> Thanks a lot and enjoy your holiday!
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From d.afshartous at Vanderbilt.Edu  Sun Dec 25 00:51:54 2011
From: d.afshartous at Vanderbilt.Edu (Afshartous, David)
Date: Sat, 24 Dec 2011 17:51:54 -0600
Subject: [R-SIG-Finance] Simulated expected return for a hedge fund
In-Reply-To: <CA+xi=qax2kzfo-ZZOy1Ty8Va6eM5WJM_p2u2ZRh0cNFKxOL+Cw@mail.gmail.com>
References: <2D74E06059E9184D9507A6739D10ACE5195E44A6AA@ITS-HCWNEM06.ds.Vanderbilt.edu>
	<CA+xi=qZ9Wiq+wgQbrXD70msLUX9jc8DKnPtCNUKJ0fmoC-ZM+w@mail.gmail.com>
	<CA+xi=qZXiQ+JnrQPuqz2cQqqhbJ=+EcyuZ7zS1e_7hQyMQ7ZFQ@mail.gmail.com>,
	<CA+xi=qax2kzfo-ZZOy1Ty8Va6eM5WJM_p2u2ZRh0cNFKxOL+Cw@mail.gmail.com>
Message-ID: <2D74E06059E9184D9507A6739D10ACE5195E44A6AB@ITS-HCWNEM06.ds.Vanderbilt.edu>


Thanks Garrett.  I fixed that typo and also put the conditional returns in terms of daily returns and the answer now seems reasonable.   The changes to the code are:

ret.above = 1/above.ending.day  ## daily return 
ret.below = -1/below.ending.day   

ret.between = net/100

which now yields:
exp.return = mean(above)*mean(ret.above)   + mean(below)*mean(ret.below)   + mean(between) * mean(ret.between)
> exp.return
[1] -0.03455923

Interesting, since the expected profit is positive:

exp.profit = mean(above)*100000 - mean(below)*50000 + mean(between)*(mean(between.ending.value) - 1000000)
> exp.profit
[1] 7530.114







________________________________________
From: G See [gsee000 at gmail.com]
Sent: Saturday, December 24, 2011 1:27 PM
To: Afshartous, David
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Simulated expected return for a hedge fund

I'm not at a computer, but it looks like if the account value falls from 50,000 to zero, you are counting that as a 0% return instead of -100%?

On Dec 24, 2011 12:58 PM, "G See" <gsee000 at gmail.com<mailto:gsee000 at gmail.com>> wrote:

Sorry, please disregard. I didn't look at your code closely.

On Dec 24, 2011 10:55 AM, "G See" <gsee000 at gmail.com<mailto:gsee000 at gmail.com>> wrote:
Hi David,

Here is my hint:

1> set.seed(2009)
1>  r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
1>  logPrice = log(1e6) + cumsum(r)  ## 1e6 = initial price
1> logPrice
  [1] 13.80340 13.80755 13.80516 13.80164 13.82105 13.79453 13.79750 13.80408 13.78316 13.77246 13.77529
 [12] 13.79100 13.78908 13.79427 13.79268 13.76960 13.78917 13.79897 13.80548 13.80673 13.83131 13.82956
 [23] 13.82829 13.83970 13.84860 13.88746 13.90191 13.89439 13.88666 13.89621 13.92104 13.91894 13.92787
 [34] 13.91217 13.90804 13.91452 13.92865 13.95498 13.98419 13.98820 13.99140 14.00165 13.97519 13.96530
 [45] 13.95029 13.95800 13.94906 13.94807 13.91299 13.90617 13.90202 13.90779 13.89517 13.88682 13.89177
 [56] 13.88537 13.89815 13.87475 13.86916 13.88294 13.87048 13.86705 13.87571 13.86564 13.85744 13.87504
 [67] 13.88990 13.88075 13.87261 13.86023 13.85191 13.85510 13.84572 13.84649 13.85447 13.83746 13.82143
 [78] 13.80111 13.78505 13.79430 13.81151 13.81456 13.80200 13.79527 13.80288 13.76598 13.79024 13.81018
 [89] 13.80240 13.77962 13.78402 13.78493 13.80514 13.79839 13.77328 13.78443 13.78491 13.77488 13.75898
[100] 13.74589

That's probably not what you intended ;-)

Garrett

On Fri, Dec 23, 2011 at 2:43 PM, Afshartous, David <d.afshartous at vanderbilt.edu<mailto:d.afshartous at vanderbilt.edu>> wrote:

All,
Below is an R-lab problem from Ch2 of Statistics and Data Analysis for Financial Engineering (Ruppert, 2010).   The R code runs okay but the answer seems strange.   Any hints much appreciated.
Cheers,
David

David Afshartous, Ph.D.
Research Associate Professor
PSTAT?: ASA Accredited Professional Statistician
Department of Biostatistics
Vanderbilt University Medical Center


## suppose Hedge fund owns $1,000,000 of stock and used $50,000 capital and
## $950,000 borrowed money for the purchase.
## Daily log returns on the stock have a mean of 0.05/year and SD of 0.23/year,
## which can be converted to per trading day by dividing by 253 and sqrt(253)

## the hedge fund will sell the stock for a profit of at least $100,000 if the value
## of the stock rises to at least $1,100,000 at the end of one of the first 100 trading days,
## sell it for a loss if the value falls below $950,000 at the end of one of the first
## 100 trading days, or sell after 100 trading days if the closing price has stayed between
## $950,000 and $1,1000,000.

## PROBLEM 7: What is the expected return? When answering this question, remember
## that only $50,000 was invested.  Also, the units of return are time, e.g.,
## one can express a return as a daily return or a weekly return.  Therefore,
## one must keep track of how long the hedge fund holds its position before selling

The code below simulates whether value falls below 950,000, goes above 1,1000,000, or stays between. The amount lost/gained in the 1st/2nd scenario is a constant, whereas the amount lost/gained in the third scenario is random.

### simulation code; written for readability as opposed to speed
niter = 10000     ## number of iterations
below = rep(0, niter)   ## set up storage
above = rep(0, niter)
between = rep(0, niter)
between.ending.value = NULL
below.ending.day = NULL
above.ending.day = NULL
set.seed(2009)
for (i in 1:niter) {
 r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
 logPrice = log(1e6) + cumsum(r)  ## 1e6 = initial price
 minLogP = min(logPrice)  ## min price over next 45 days
 maxLogP = max(logPrice)  ## min price over next 45 days
 crossBelowLogP.day = ifelse( minLogP < log(950000),  min(which(logPrice < log(950000))), 101) ## 101 means doesn't cross
 crossAboveLogP.day = ifelse( maxLogP > log(1100000),  min(which(logPrice > log(1100000))), 101)
 if ( (minLogP >= log(950000)) & (maxLogP <= log(1100000)) ) {   ## Neither cross boundary
    between[i] = 1
    between.ending.value = append(between.ending.value, exp(logPrice[100]))
    }
 if  ( (minLogP < log(950000)) & (maxLogP > log(1100000))) { ## Both cross
            ifelse (crossBelowLogP.day < crossAboveLogP.day, below[i] <- 1, above[i] <-1)
            ifelse (crossBelowLogP.day < crossAboveLogP.day, below.ending.day <- append(below.ending.day, crossBelowLogP.day),
                                                       above.ending.day <- append(above.ending.day, crossAboveLogP.day))
          }
 if ( (minLogP < log(950000))  & (maxLogP <= log(1100000))  ) {    ## Only cross below
            below[i] = 1
            below.ending.day = append(below.ending.day, crossBelowLogP.day)
          }
 if ( (minLogP >= log(950000))  & (maxLogP > log(1100000))  ) {    ## Only cross above
            above[i] = 1
            above.ending.day = append(above.ending.day, crossAboveLogP.day)
          }
}
mean(above)  ## this will give the probability of the value crossing the above threshold

When annualizing returns, the day in which a boundary needs to be accounted for.    The following code calculates the overall expected return by conditioning on each scenario:

# cross above: always make constant 100,000 based on initial investment of 50,000
# P_t/P_t-1 = 100,000/50,000 = 2 = gross return --> net return = 2 - 1 = 1
ret.above = (1 + 1)^(365/(above.ending.day))  - 1    ### annualized

# cross below: always lose constant 50,000 based on initial investment of 50,000
# P_t/P_t-1 = 50,000/50,000 = 1 = gross return --> net return = 1 - 1 = 0
ret.below = 0

## betwen: final value depends on realized value on 100th day
# P_t/P_t-1 = between.ending.value/50,000 = --> net return = gross return  - 1

net = ifelse(between.ending.value < 1000000,
                   (1000000 - between.ending.value)/50000 - 1,  ## net return, gain
                   (between.ending.value  - 1000000)/50000 - 1)   ## net return, loss

ret.between = (1 + net)^(365/100) - 1

exp.return = mean(above)*mean(ret.above)   + mean(below)*mean(ret.below)   + mean(between) * mean(ret.between)
8.669104e+50???

_______________________________________________
R-SIG-Finance at r-project.org<mailto:R-SIG-Finance at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Sun Dec 25 05:31:50 2011
From: gsee000 at gmail.com (G See)
Date: Sat, 24 Dec 2011 22:31:50 -0600
Subject: [R-SIG-Finance] Simulated expected return for a hedge fund
In-Reply-To: <2D74E06059E9184D9507A6739D10ACE5195E44A6AB@ITS-HCWNEM06.ds.Vanderbilt.edu>
References: <2D74E06059E9184D9507A6739D10ACE5195E44A6AA@ITS-HCWNEM06.ds.Vanderbilt.edu>
	<CA+xi=qZ9Wiq+wgQbrXD70msLUX9jc8DKnPtCNUKJ0fmoC-ZM+w@mail.gmail.com>
	<CA+xi=qZXiQ+JnrQPuqz2cQqqhbJ=+EcyuZ7zS1e_7hQyMQ7ZFQ@mail.gmail.com>
	<CA+xi=qax2kzfo-ZZOy1Ty8Va6eM5WJM_p2u2ZRh0cNFKxOL+Cw@mail.gmail.com>
	<2D74E06059E9184D9507A6739D10ACE5195E44A6AB@ITS-HCWNEM06.ds.Vanderbilt.edu>
Message-ID: <CA+xi=qYrtz1HT1vNxZQo1G-D6PXkUo7bDDe=mHbG5dx+2V=MDw@mail.gmail.com>

David,

I attempted to work the problem myself, and have concluded that it is
a poor question. :-P
The question says that you will sell for a profit of _at least_
$100,000, if the value of the stock
rises to at least $1,100,000 or sell for a loss if the value falls
below $950000.

I interpret that to mean that on the first day that the stock value is
at or above 1.1 million, I sell
at the prevailing price (which may, and probably will, be higher than
1.1 million). ?Likewise, I think
it says that I will sell on the first day that the value of the stock
is below $950,000. ?But, if the
stock gets to $950,000, I'm out of capital. ?It is unlikely that the
value of the stock will be
exactly $950,000, which means that I would be losing more than 100
percent of my capita. ?I
don't know how to convert?an N-day return that is less than negative
100 percent to either a daily
or annual return. ?So, I just divided it by the number of days. ?i.e.
if you lose 110% over 10 days
then you're losing 11% per day on average. (But, I'm aware that that
doesn't make sense)

My attempt is below; I came up with an "answer" of -0.02197322


niter = 10000 ? ? ## number of iterations
set.seed(2009)
returns <- rep(0, niter)
for (i in 1:niter) {
? ? r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
? ? SV <- 1e6 * exp(cumsum(r)) #StockValue
? ? daily.ret <- if (min(SV) > 950000 && max(SV) < 1100000) {
? ? ? ? #between
? ? ? ? SellPrice <- tail(SV, 1) # Sell on last day (100 returns in the future)
? ? ? ? ret <- (SellPrice - 1000000) / 50000
? ? ? ? ret / 100 ?# average daily return
? ? } else {
? ? ? ? # Sell at first value that is less than 950000 or greater than 1100000
? ? ? ? SellPrice <- head(SV[SV < 950000 | SV > 1100000], 1)
? ? ? ? days.held <- head(which(SV == SellPrice), 1) # first place
that StockValue equals SellPrice
? ? ? ? #if (SellPrice < 950000) SellPrice <- 950000
? ? ? ? ret <- (SellPrice - 1000000) / 50000
? ? ? ? ret / days.held
? ? }
? ? returns[i] <- daily.ret
}
mean(returns)
# -0.02197322

HTH,
Garrett


On Sat, Dec 24, 2011 at 5:51 PM, Afshartous, David
<d.afshartous at vanderbilt.edu> wrote:
>
>
> Thanks Garrett. ?I fixed that typo and also put the conditional returns in terms of daily returns and the answer now seems reasonable. ? The changes to the code are:
>
> ret.above = 1/above.ending.day ?## daily return
> ret.below = -1/below.ending.day
>
> ret.between = net/100
>
> which now yields:
> exp.return = mean(above)*mean(ret.above) ? + mean(below)*mean(ret.below) ? + mean(between) * mean(ret.between)
> > exp.return
> [1] -0.03455923
>
> Interesting, since the expected profit is positive:
>
> exp.profit = mean(above)*100000 - mean(below)*50000 + mean(between)*(mean(between.ending.value) - 1000000)
> > exp.profit
> [1] 7530.114
>
>
>
>
>
>
>
> ________________________________________
> From: G See [gsee000 at gmail.com]
> Sent: Saturday, December 24, 2011 1:27 PM
> To: Afshartous, David
> Cc: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] Simulated expected return for a hedge fund
>
> I'm not at a computer, but it looks like if the account value falls from 50,000 to zero, you are counting that as a 0% return instead of -100%?
>
> On Dec 24, 2011 12:58 PM, "G See" <gsee000 at gmail.com<mailto:gsee000 at gmail.com>> wrote:
>
> Sorry, please disregard. I didn't look at your code closely.
>
> On Dec 24, 2011 10:55 AM, "G See" <gsee000 at gmail.com<mailto:gsee000 at gmail.com>> wrote:
> Hi David,
>
> Here is my hint:
>
> 1> set.seed(2009)
> 1> ?r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
> 1> ?logPrice = log(1e6) + cumsum(r) ?## 1e6 = initial price
> 1> logPrice
> ?[1] 13.80340 13.80755 13.80516 13.80164 13.82105 13.79453 13.79750 13.80408 13.78316 13.77246 13.77529
> ?[12] 13.79100 13.78908 13.79427 13.79268 13.76960 13.78917 13.79897 13.80548 13.80673 13.83131 13.82956
> ?[23] 13.82829 13.83970 13.84860 13.88746 13.90191 13.89439 13.88666 13.89621 13.92104 13.91894 13.92787
> ?[34] 13.91217 13.90804 13.91452 13.92865 13.95498 13.98419 13.98820 13.99140 14.00165 13.97519 13.96530
> ?[45] 13.95029 13.95800 13.94906 13.94807 13.91299 13.90617 13.90202 13.90779 13.89517 13.88682 13.89177
> ?[56] 13.88537 13.89815 13.87475 13.86916 13.88294 13.87048 13.86705 13.87571 13.86564 13.85744 13.87504
> ?[67] 13.88990 13.88075 13.87261 13.86023 13.85191 13.85510 13.84572 13.84649 13.85447 13.83746 13.82143
> ?[78] 13.80111 13.78505 13.79430 13.81151 13.81456 13.80200 13.79527 13.80288 13.76598 13.79024 13.81018
> ?[89] 13.80240 13.77962 13.78402 13.78493 13.80514 13.79839 13.77328 13.78443 13.78491 13.77488 13.75898
> [100] 13.74589
>
> That's probably not what you intended ;-)
>
> Garrett
>
> On Fri, Dec 23, 2011 at 2:43 PM, Afshartous, David <d.afshartous at vanderbilt.edu<mailto:d.afshartous at vanderbilt.edu>> wrote:
>
> All,
> Below is an R-lab problem from Ch2 of Statistics and Data Analysis for Financial Engineering (Ruppert, 2010). ? The R code runs okay but the answer seems strange. ? Any hints much appreciated.
> Cheers,
> David
>
> David Afshartous, Ph.D.
> Research Associate Professor
> PSTAT?: ASA Accredited Professional Statistician
> Department of Biostatistics
> Vanderbilt University Medical Center
>
>
> ## suppose Hedge fund owns $1,000,000 of stock and used $50,000 capital and
> ## $950,000 borrowed money for the purchase.
> ## Daily log returns on the stock have a mean of 0.05/year and SD of 0.23/year,
> ## which can be converted to per trading day by dividing by 253 and sqrt(253)
>
> ## the hedge fund will sell the stock for a profit of at least $100,000 if the value
> ## of the stock rises to at least $1,100,000 at the end of one of the first 100 trading days,
> ## sell it for a loss if the value falls below $950,000 at the end of one of the first
> ## 100 trading days, or sell after 100 trading days if the closing price has stayed between
> ## $950,000 and $1,1000,000.
>
> ## PROBLEM 7: What is the expected return? When answering this question, remember
> ## that only $50,000 was invested. ?Also, the units of return are time, e.g.,
> ## one can express a return as a daily return or a weekly return. ?Therefore,
> ## one must keep track of how long the hedge fund holds its position before selling
>
> The code below simulates whether value falls below 950,000, goes above 1,1000,000, or stays between. The amount lost/gained in the 1st/2nd scenario is a constant, whereas the amount lost/gained in the third scenario is random.
>
> ### simulation code; written for readability as opposed to speed
> niter = 10000 ? ? ## number of iterations
> below = rep(0, niter) ? ## set up storage
> above = rep(0, niter)
> between = rep(0, niter)
> between.ending.value = NULL
> below.ending.day = NULL
> above.ending.day = NULL
> set.seed(2009)
> for (i in 1:niter) {
> ?r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
> ?logPrice = log(1e6) + cumsum(r) ?## 1e6 = initial price
> ?minLogP = min(logPrice) ?## min price over next 45 days
> ?maxLogP = max(logPrice) ?## min price over next 45 days
> ?crossBelowLogP.day = ifelse( minLogP < log(950000), ?min(which(logPrice < log(950000))), 101) ## 101 means doesn't cross
> ?crossAboveLogP.day = ifelse( maxLogP > log(1100000), ?min(which(logPrice > log(1100000))), 101)
> ?if ( (minLogP >= log(950000)) & (maxLogP <= log(1100000)) ) { ? ## Neither cross boundary
> ? ?between[i] = 1
> ? ?between.ending.value = append(between.ending.value, exp(logPrice[100]))
> ? ?}
> ?if ?( (minLogP < log(950000)) & (maxLogP > log(1100000))) { ## Both cross
> ? ? ? ? ? ?ifelse (crossBelowLogP.day < crossAboveLogP.day, below[i] <- 1, above[i] <-1)
> ? ? ? ? ? ?ifelse (crossBelowLogP.day < crossAboveLogP.day, below.ending.day <- append(below.ending.day, crossBelowLogP.day),
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? above.ending.day <- append(above.ending.day, crossAboveLogP.day))
> ? ? ? ? ?}
> ?if ( (minLogP < log(950000)) ?& (maxLogP <= log(1100000)) ?) { ? ?## Only cross below
> ? ? ? ? ? ?below[i] = 1
> ? ? ? ? ? ?below.ending.day = append(below.ending.day, crossBelowLogP.day)
> ? ? ? ? ?}
> ?if ( (minLogP >= log(950000)) ?& (maxLogP > log(1100000)) ?) { ? ?## Only cross above
> ? ? ? ? ? ?above[i] = 1
> ? ? ? ? ? ?above.ending.day = append(above.ending.day, crossAboveLogP.day)
> ? ? ? ? ?}
> }
> mean(above) ?## this will give the probability of the value crossing the above threshold
>
> When annualizing returns, the day in which a boundary needs to be accounted for. ? ?The following code calculates the overall expected return by conditioning on each scenario:
>
> # cross above: always make constant 100,000 based on initial investment of 50,000
> # P_t/P_t-1 = 100,000/50,000 = 2 = gross return --> net return = 2 - 1 = 1
> ret.above = (1 + 1)^(365/(above.ending.day)) ?- 1 ? ?### annualized
>
> # cross below: always lose constant 50,000 based on initial investment of 50,000
> # P_t/P_t-1 = 50,000/50,000 = 1 = gross return --> net return = 1 - 1 = 0
> ret.below = 0
>
> ## betwen: final value depends on realized value on 100th day
> # P_t/P_t-1 = between.ending.value/50,000 = --> net return = gross return ?- 1
>
> net = ifelse(between.ending.value < 1000000,
> ? ? ? ? ? ? ? ? ? (1000000 - between.ending.value)/50000 - 1, ?## net return, gain
> ? ? ? ? ? ? ? ? ? (between.ending.value ?- 1000000)/50000 - 1) ? ## net return, loss
>
> ret.between = (1 + net)^(365/100) - 1
>
> exp.return = mean(above)*mean(ret.above) ? + mean(below)*mean(ret.below) ? + mean(between) * mean(ret.between)
> 8.669104e+50???
>
> _______________________________________________
> R-SIG-Finance at r-project.org<mailto:R-SIG-Finance at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>


From ukmortensen at gmail.com  Sun Dec 25 18:08:30 2011
From: ukmortensen at gmail.com (Uffe K. Mortensen)
Date: Sun, 25 Dec 2011 18:08:30 +0100
Subject: [R-SIG-Finance] Happy holidays and trading strategies in R?
In-Reply-To: <CAPNjSFYTwh=2nz=xQ8qkCBiLc_=ReXVZSunHt64b96p8kbeaSQ@mail.gmail.com>
References: <CAPNjSFYTwh=2nz=xQ8qkCBiLc_=ReXVZSunHt64b96p8kbeaSQ@mail.gmail.com>
Message-ID: <CA+NX_qCtUHNsNQN0U2qEy8ABB92tbmGHD2nz6gxBu8OTOEp4cg@mail.gmail.com>

Happy holidays too,

I use R for some trades, but never directly. I get more accurate
variance and K inno estimates from R. R is great for that.

I know of nobody (yet) that became millionaires with algorithmic
trading. Quite a few aspire to become millionaires by writing about it
instead!
IMHO the classic Market Hypothesis exclude large algo trade gains,
except for rare pricing errors others anyway will detect much faster
than you and me.

For the classic algorithm trades there is a big library of them over
at prorealtime.com. You can test and program algorithms easily and
backtest for free, except for intraday.
Backtesting there saved me much time debunking misc. 'snakeoil' algos
that occasionally hit the press...

Greetings,
Uffe.

On 24 December 2011 23:09, Michael <comtech.usa at gmail.com> wrote:
> Hi all,
>
> Happy holidays!
>
> I would like to ask a question about using R to backtest strategies ...
>
> Are there people actually using R for trading real-money? Could anybody
> please kindly give me some pointers to the latest status of using R for
> backtesting and could you please point me to "sample"/existing strategies
> that were written in R? I know TTR but those are hardly trading strategies
> and there are no good trading strategies visualization tools at all... of
> course I understand people won't post full strategies secret sources on
> Internet, but at least maybe some samples that had worked in the ancient
> times?
>
> Thanks a lot and enjoy your holiday!
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From comtech.usa at gmail.com  Sun Dec 25 18:12:20 2011
From: comtech.usa at gmail.com (Michael)
Date: Sun, 25 Dec 2011 11:12:20 -0600
Subject: [R-SIG-Finance] where are those R/Finance meetups?
Message-ID: <CAPNjSFarPooN+m+-wQouRTzwxq4z-fZWfskSDMM72y-qrTjxXw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111225/36dcd7fc/attachment.pl>

From gsee000 at gmail.com  Sun Dec 25 18:55:46 2011
From: gsee000 at gmail.com (G See)
Date: Sun, 25 Dec 2011 11:55:46 -0600
Subject: [R-SIG-Finance] where are those R/Finance meetups?
In-Reply-To: <CAPNjSFarPooN+m+-wQouRTzwxq4z-fZWfskSDMM72y-qrTjxXw@mail.gmail.com>
References: <CAPNjSFarPooN+m+-wQouRTzwxq4z-fZWfskSDMM72y-qrTjxXw@mail.gmail.com>
Message-ID: <CA+xi=qaqUgfASZPwoLCHe2-BqMWKSZi2eCU56GSPCvEqV0OrRw@mail.gmail.com>

Michael,

It is good to see that you have learned how to use Google to search.
The next step is to click on the links that it gives you.

I hate to be rude on Christmas, but this is at least the 5th question
you have asked recently that shows that you have put no effort into
finding the answer yourself.  Please read the posting guide.

When I google for "R/Finance", the very first link I get answers your
question.  If for some reason it doen't for you, then you could find
the answer by searching the archives of this list.  Also, you can
search R-bloggers.com for this and for answers to your other recent
questions.

Regards,
Garrett


On Sun, Dec 25, 2011 at 11:12 AM, Michael <comtech.usa at gmail.com> wrote:
> Happy holidays every one!
>
> Thru googling I came across a bunch of R/Finance local meetups... these
> past events look great!
>
> Where do I register for R/Finance local events for 2012?
>
> Thanks!
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From comtech.usa at gmail.com  Sun Dec 25 19:19:36 2011
From: comtech.usa at gmail.com (Michael)
Date: Sun, 25 Dec 2011 12:19:36 -0600
Subject: [R-SIG-Finance] where are those R/Finance meetups?
In-Reply-To: <CA+xi=qaqUgfASZPwoLCHe2-BqMWKSZi2eCU56GSPCvEqV0OrRw@mail.gmail.com>
References: <CAPNjSFarPooN+m+-wQouRTzwxq4z-fZWfskSDMM72y-qrTjxXw@mail.gmail.com>
	<CA+xi=qaqUgfASZPwoLCHe2-BqMWKSZi2eCU56GSPCvEqV0OrRw@mail.gmail.com>
Message-ID: <CAPNjSFaYxFgLL=g-Qd=L7H7pY1K17GdbrngTSLp4k+=Z-szDDw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111225/0f556eb0/attachment.pl>

From gsee000 at gmail.com  Sun Dec 25 19:29:30 2011
From: gsee000 at gmail.com (G See)
Date: Sun, 25 Dec 2011 12:29:30 -0600
Subject: [R-SIG-Finance] where are those R/Finance meetups?
In-Reply-To: <CAPNjSFaYxFgLL=g-Qd=L7H7pY1K17GdbrngTSLp4k+=Z-szDDw@mail.gmail.com>
References: <CAPNjSFarPooN+m+-wQouRTzwxq4z-fZWfskSDMM72y-qrTjxXw@mail.gmail.com>
	<CA+xi=qaqUgfASZPwoLCHe2-BqMWKSZi2eCU56GSPCvEqV0OrRw@mail.gmail.com>
	<CAPNjSFaYxFgLL=g-Qd=L7H7pY1K17GdbrngTSLp4k+=Z-szDDw@mail.gmail.com>
Message-ID: <CA+xi=qZ45vh-u3rUBiN2MW9gRWcJbgyjdT45jCJK+iWNifLf1A@mail.gmail.com>

http://www.meetup.com/

On Sun, Dec 25, 2011 at 12:19 PM, Michael <comtech.usa at gmail.com> wrote:
> Thanks GSee!
>
> You are certainly right - and you do have the right reason to be "rude" -
> yes?the very info?could be easily obtained using Googling... For that I
> thank you for pointing that out...
>
> What I should have made a bit more explicit, and as you could see, I was
> looking for "meetups"...
>
> I should have explicitly made it clear that yes, I was looking for R/Finance
> conference, but in addition, I welcome pointers for "meetups" or seminars,
> or other tutorials/trainings on R, finance and quant trading...
>
> Again, yes certainly I do google, and found some useful info...
>
> But some word-of-mouth recommendations/pointers would be greater and
> invaluable and certainly appreciated!
>
> Thanks again!
>
>
>
> On Sun, Dec 25, 2011 at 11:55 AM, G See <gsee000 at gmail.com> wrote:
>>
>> Michael,
>>
>> It is good to see that you have learned how to use Google to search.
>> The next step is to click on the links that it gives you.
>>
>> I hate to be rude on Christmas, but this is at least the 5th question
>> you have asked recently that shows that you have put no effort into
>> finding the answer yourself. ?Please read the posting guide.
>>
>> When I google for "R/Finance", the very first link I get answers your
>> question. ?If for some reason it doen't for you, then you could find
>> the answer by searching the archives of this list. ?Also, you can
>> search R-bloggers.com for this and for answers to your other recent
>> questions.
>>
>> Regards,
>> Garrett
>>
>>
>> On Sun, Dec 25, 2011 at 11:12 AM, Michael <comtech.usa at gmail.com> wrote:
>> > Happy holidays every one!
>> >
>> > Thru googling I came across a bunch of R/Finance local meetups... these
>> > past events look great!
>> >
>> > Where do I register for R/Finance local events for 2012?
>> >
>> > Thanks!
>> >
>> > ? ? ? ?[[alternative HTML version deleted]]
>> >
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions
>> > should go.
>
>


From brian at braverock.com  Sun Dec 25 20:12:07 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 25 Dec 2011 13:12:07 -0600
Subject: [R-SIG-Finance] where are those R/Finance meetups?
In-Reply-To: <CA+xi=qZ45vh-u3rUBiN2MW9gRWcJbgyjdT45jCJK+iWNifLf1A@mail.gmail.com>
References: <CAPNjSFarPooN+m+-wQouRTzwxq4z-fZWfskSDMM72y-qrTjxXw@mail.gmail.com>
	<CA+xi=qaqUgfASZPwoLCHe2-BqMWKSZi2eCU56GSPCvEqV0OrRw@mail.gmail.com>
	<CAPNjSFaYxFgLL=g-Qd=L7H7pY1K17GdbrngTSLp4k+=Z-szDDw@mail.gmail.com>
	<CA+xi=qZ45vh-u3rUBiN2MW9gRWcJbgyjdT45jCJK+iWNifLf1A@mail.gmail.com>
Message-ID: <1324840327.11817.5.camel@brian-desktop>

On Sun, 2011-12-25 at 12:29 -0600, G See wrote:
> http://www.meetup.com/

Garrett correctly points out that most of the R user group meetings I am
aware of are announced on meetup.com.

None of these, to the best of my knowledge, are specific to finance, but
to R or statistical data analysis more generally.  Finance is sometimes
a topic of these meetups, so signing up for updates on locations
convenient to you is advised. 

For R in Finance, there is the annual R/Finance conference in Chicago,
and the RMetrics seminar at Meielisalp, Switzerland.

 
-- 
Brian


From d.afshartous at Vanderbilt.Edu  Sun Dec 25 20:45:19 2011
From: d.afshartous at Vanderbilt.Edu (Afshartous, David)
Date: Sun, 25 Dec 2011 13:45:19 -0600
Subject: [R-SIG-Finance] Simulated expected return for a hedge fund
In-Reply-To: <CA+xi=qZwWDUHEYOtx2Pmc+KAW1yTUZ6K0Ku1TeM-Ln4ExqRxGA@mail.gmail.com>
References: <2D74E06059E9184D9507A6739D10ACE5195E44A6AA@ITS-HCWNEM06.ds.Vanderbilt.edu>
	<CA+xi=qZ9Wiq+wgQbrXD70msLUX9jc8DKnPtCNUKJ0fmoC-ZM+w@mail.gmail.com>
	<CA+xi=qZXiQ+JnrQPuqz2cQqqhbJ=+EcyuZ7zS1e_7hQyMQ7ZFQ@mail.gmail.com>
	<CA+xi=qax2kzfo-ZZOy1Ty8Va6eM5WJM_p2u2ZRh0cNFKxOL+Cw@mail.gmail.com>
	<2D74E06059E9184D9507A6739D10ACE5195E44A6AB@ITS-HCWNEM06.ds.Vanderbilt.edu>
	<CA+xi=qYrtz1HT1vNxZQo1G-D6PXkUo7bDDe=mHbG5dx+2V=MDw@mail.gmail.com>,
	<CA+xi=qZwWDUHEYOtx2Pmc+KAW1yTUZ6K0Ku1TeM-Ln4ExqRxGA@mail.gmail.com>
Message-ID: <2D74E06059E9184D9507A6739D10ACE5195E44A6AC@ITS-HCWNEM06.ds.Vanderbilt.edu>


Hi Garrett,

Thanks for looking into the problem.   You are correct, one has to be careful to note that portfolio value for early sells will not be exactly equal to the boundary values that trigger the early sells (and also that -100% loss conversion to daily return is an issue).

I corrected my code and now obtain the same expected return as your code to within 5 decimal places.   However, I still obtain a positive value for the expected profit.  My calculation is a conditional probability calculation whereas your calculation is direct.   I doubt that such big difference in expected profit could be due to rounding error of such a process but at the same time we obtain the same expected return.    Code below:

niter = 10000     ## number of iterations
below = rep(0, niter)   ## set up storage
above = rep(0, niter)
between = rep(0, niter)
between.ending.value = NULL
below.ending.day = NULL
above.ending.day = NULL
profit.above = NULL
profit.below = NULL
profit.between = NULL
set.seed(2009)
for (i in 1:niter) {
  r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
  logPrice = log(1e6) + cumsum(r)  ## 1e6 = initial price
  minLogP = min(logPrice)  ## min price over next 45 days
  maxLogP = max(logPrice)  ## min price over next 45 days
  crossBelowLogP.day = ifelse( minLogP < log(950000),  min(which(logPrice < log(950000))), 101) ## 101 means doesn't cross
  crossAboveLogP.day = ifelse( maxLogP > log(1100000),  min(which(logPrice > log(1100000))), 101)
  if ( (minLogP >= log(950000)) & (maxLogP <= log(1100000)) ) {   ## Neither cross boundary
     between[i] = 1
     between.ending.value = append(between.ending.value, exp(logPrice[100]))
     profit.between =   append(profit.between, between.ending.value - 1000000)
     }
  if  ( (minLogP < log(950000)) & (maxLogP > log(1100000))) { ## Both cross
             ifelse (crossBelowLogP.day < crossAboveLogP.day, below[i] <- 1, above[i] <-1)
             ifelse (crossBelowLogP.day < crossAboveLogP.day, below.ending.day <- append(below.ending.day, crossBelowLogP.day),
                                                        above.ending.day <- append(above.ending.day, crossAboveLogP.day))
             ifelse (crossBelowLogP.day < crossAboveLogP.day, profit.below <-   append(profit.below, exp(logPrice[crossBelowLogP.day]) - 1000000),
                                                        profit.above  <-      append(profit.above, exp(logPrice[crossAboveLogP.day]) - 1000000))
           }
  if ( (minLogP < log(950000))  & (maxLogP <= log(1100000))  ) {    ## Only cross below
             below[i] = 1
             below.ending.day = append(below.ending.day, crossBelowLogP.day)
             profit.below =   append(profit.below, exp(logPrice[crossBelowLogP.day]) - 1000000)
           }
  if ( (minLogP >= log(950000))  & (maxLogP > log(1100000))  ) {    ## Only cross above
             above[i] = 1
             above.ending.day = append(above.ending.day, crossAboveLogP.day)
             profit.above =  append(profit.above, exp(logPrice[crossAboveLogP.day]) - 1000000)
           }
}

## expected profit
mean(above)*mean(profit.above) - mean(below)*mean(profit.below) + mean(between)*mean(profit.between)
[1] 77227.87


ret.above = (profit.above/50000)/above.ending.day  ## daily return, return wont' be exactly 1 since P_t won't be exactly equal to 100,000
ret.below = (profit.below/50000)/below.ending.day  ## daily return
ret.between = (profit.between/50000)/100  ## daily return
## exp.return:
mean(above)*mean(ret.above)   + mean(below)*mean(ret.below)   + mean(between) * mean(ret.between)
[1] -0.02197705


________________________________________
From: G See [gsee000 at gmail.com]
Sent: Sunday, December 25, 2011 12:44 PM
To: Afshartous, David
Subject: Re: [R-SIG-Finance] Simulated expected return for a hedge fund

BTW,

I get a negative value for expected Profit also

> niter = 10000     ## number of iterations
> set.seed(2009)
> PnLs <- rep(0, niter)
> for (i in 1:niter) {
+     r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
+     SV <- 1e6 * exp(cumsum(r)) #StockValue
+     daily.PnL <- if (min(SV) > 950000 && max(SV) < 1100000) {
+         #between
+         SellPrice <- tail(SV, 1) # Sell on last day (100 returns in
the future)
+         PnL <- (SellPrice - 1000000)
+         PnL / 100  # average daily PnL
+     } else {
+         # Sell at first value that is less than 950000 or greater than 1100000
+         SellPrice <- head(SV[SV < 950000 | SV > 1100000], 1)
+         days.held <- head(which(SV == SellPrice), 1) # first place
that StockValue equals SellPrice
+         #if (SellPrice < 950000) SellPrice <- 950000
+         PnL <- (SellPrice - 1000000)
+         PnL / days.held
+     }
+     PnLs[i] <- daily.PnL
+ }
> mean(PnLs)
[1] -1098.661
> mean(PnLs) / 50000
[1] -0.02197322
>


On Sat, Dec 24, 2011 at 10:31 PM, G See <gsee000 at gmail.com> wrote:
> David,
>
> I attempted to work the problem myself, and have concluded that it is
> a poor question. :-P
> The question says that you will sell for a profit of _at least_
> $100,000, if the value of the stock
> rises to at least $1,100,000 or sell for a loss if the value falls
> below $950000.
>
> I interpret that to mean that on the first day that the stock value is
> at or above 1.1 million, I sell
> at the prevailing price (which may, and probably will, be higher than
> 1.1 million).  Likewise, I think
> it says that I will sell on the first day that the value of the stock
> is below $950,000.  But, if the
> stock gets to $950,000, I'm out of capital.  It is unlikely that the
> value of the stock will be
> exactly $950,000, which means that I would be losing more than 100
> percent of my capita.  I
> don't know how to convert an N-day return that is less than negative
> 100 percent to either a daily
> or annual return.  So, I just divided it by the number of days.  i.e.
> if you lose 110% over 10 days
> then you're losing 11% per day on average. (But, I'm aware that that
> doesn't make sense)
>
> My attempt is below; I came up with an "answer" of -0.02197322
>
>
> niter = 10000     ## number of iterations
> set.seed(2009)
> returns <- rep(0, niter)
> for (i in 1:niter) {
>     r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
>     SV <- 1e6 * exp(cumsum(r)) #StockValue
>     daily.ret <- if (min(SV) > 950000 && max(SV) < 1100000) {
>         #between
>         SellPrice <- tail(SV, 1) # Sell on last day (100 returns in the future)
>         ret <- (SellPrice - 1000000) / 50000
>         ret / 100  # average daily return
>     } else {
>         # Sell at first value that is less than 950000 or greater than 1100000
>         SellPrice <- head(SV[SV < 950000 | SV > 1100000], 1)
>         days.held <- head(which(SV == SellPrice), 1) # first place
> that StockValue equals SellPrice
>         #if (SellPrice < 950000) SellPrice <- 950000
>         ret <- (SellPrice - 1000000) / 50000
>         ret / days.held
>     }
>     returns[i] <- daily.ret
> }
> mean(returns)
> # -0.02197322
>
> HTH,
> Garrett
>
>
> On Sat, Dec 24, 2011 at 5:51 PM, Afshartous, David
> <d.afshartous at vanderbilt.edu> wrote:
>>
>>
>> Thanks Garrett.  I fixed that typo and also put the conditional returns in terms of daily returns and the answer now seems reasonable.   The changes to the code are:
>>
>> ret.above = 1/above.ending.day  ## daily return
>> ret.below = -1/below.ending.day
>>
>> ret.between = net/100
>>
>> which now yields:
>> exp.return = mean(above)*mean(ret.above)   + mean(below)*mean(ret.below)   + mean(between) * mean(ret.between)
>> > exp.return
>> [1] -0.03455923
>>
>> Interesting, since the expected profit is positive:
>>
>> exp.profit = mean(above)*100000 - mean(below)*50000 + mean(between)*(mean(between.ending.value) - 1000000)
>> > exp.profit
>> [1] 7530.114
>>
>>
>>
>>
>>
>>
>>
>> ________________________________________
>> From: G See [gsee000 at gmail.com]
>> Sent: Saturday, December 24, 2011 1:27 PM
>> To: Afshartous, David
>> Cc: r-sig-finance at r-project.org
>> Subject: Re: [R-SIG-Finance] Simulated expected return for a hedge fund
>>
>> I'm not at a computer, but it looks like if the account value falls from 50,000 to zero, you are counting that as a 0% return instead of -100%?
>>
>> On Dec 24, 2011 12:58 PM, "G See" <gsee000 at gmail.com<mailto:gsee000 at gmail.com>> wrote:
>>
>> Sorry, please disregard. I didn't look at your code closely.
>>
>> On Dec 24, 2011 10:55 AM, "G See" <gsee000 at gmail.com<mailto:gsee000 at gmail.com>> wrote:
>> Hi David,
>>
>> Here is my hint:
>>
>> 1> set.seed(2009)
>> 1>  r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
>> 1>  logPrice = log(1e6) + cumsum(r)  ## 1e6 = initial price
>> 1> logPrice
>>  [1] 13.80340 13.80755 13.80516 13.80164 13.82105 13.79453 13.79750 13.80408 13.78316 13.77246 13.77529
>>  [12] 13.79100 13.78908 13.79427 13.79268 13.76960 13.78917 13.79897 13.80548 13.80673 13.83131 13.82956
>>  [23] 13.82829 13.83970 13.84860 13.88746 13.90191 13.89439 13.88666 13.89621 13.92104 13.91894 13.92787
>>  [34] 13.91217 13.90804 13.91452 13.92865 13.95498 13.98419 13.98820 13.99140 14.00165 13.97519 13.96530
>>  [45] 13.95029 13.95800 13.94906 13.94807 13.91299 13.90617 13.90202 13.90779 13.89517 13.88682 13.89177
>>  [56] 13.88537 13.89815 13.87475 13.86916 13.88294 13.87048 13.86705 13.87571 13.86564 13.85744 13.87504
>>  [67] 13.88990 13.88075 13.87261 13.86023 13.85191 13.85510 13.84572 13.84649 13.85447 13.83746 13.82143
>>  [78] 13.80111 13.78505 13.79430 13.81151 13.81456 13.80200 13.79527 13.80288 13.76598 13.79024 13.81018
>>  [89] 13.80240 13.77962 13.78402 13.78493 13.80514 13.79839 13.77328 13.78443 13.78491 13.77488 13.75898
>> [100] 13.74589
>>
>> That's probably not what you intended ;-)
>>
>> Garrett
>>
>> On Fri, Dec 23, 2011 at 2:43 PM, Afshartous, David <d.afshartous at vanderbilt.edu<mailto:d.afshartous at vanderbilt.edu>> wrote:
>>
>> All,
>> Below is an R-lab problem from Ch2 of Statistics and Data Analysis for Financial Engineering (Ruppert, 2010).   The R code runs okay but the answer seems strange.   Any hints much appreciated.
>> Cheers,
>> David
>>
>> David Afshartous, Ph.D.
>> Research Associate Professor
>> PSTAT?: ASA Accredited Professional Statistician
>> Department of Biostatistics
>> Vanderbilt University Medical Center
>>
>>
>> ## suppose Hedge fund owns $1,000,000 of stock and used $50,000 capital and
>> ## $950,000 borrowed money for the purchase.
>> ## Daily log returns on the stock have a mean of 0.05/year and SD of 0.23/year,
>> ## which can be converted to per trading day by dividing by 253 and sqrt(253)
>>
>> ## the hedge fund will sell the stock for a profit of at least $100,000 if the value
>> ## of the stock rises to at least $1,100,000 at the end of one of the first 100 trading days,
>> ## sell it for a loss if the value falls below $950,000 at the end of one of the first
>> ## 100 trading days, or sell after 100 trading days if the closing price has stayed between
>> ## $950,000 and $1,1000,000.
>>
>> ## PROBLEM 7: What is the expected return? When answering this question, remember
>> ## that only $50,000 was invested.  Also, the units of return are time, e.g.,
>> ## one can express a return as a daily return or a weekly return.  Therefore,
>> ## one must keep track of how long the hedge fund holds its position before selling
>>
>> The code below simulates whether value falls below 950,000, goes above 1,1000,000, or stays between. The amount lost/gained in the 1st/2nd scenario is a constant, whereas the amount lost/gained in the third scenario is random.
>>
>> ### simulation code; written for readability as opposed to speed
>> niter = 10000     ## number of iterations
>> below = rep(0, niter)   ## set up storage
>> above = rep(0, niter)
>> between = rep(0, niter)
>> between.ending.value = NULL
>> below.ending.day = NULL
>> above.ending.day = NULL
>> set.seed(2009)
>> for (i in 1:niter) {
>>  r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
>>  logPrice = log(1e6) + cumsum(r)  ## 1e6 = initial price
>>  minLogP = min(logPrice)  ## min price over next 45 days
>>  maxLogP = max(logPrice)  ## min price over next 45 days
>>  crossBelowLogP.day = ifelse( minLogP < log(950000),  min(which(logPrice < log(950000))), 101) ## 101 means doesn't cross
>>  crossAboveLogP.day = ifelse( maxLogP > log(1100000),  min(which(logPrice > log(1100000))), 101)
>>  if ( (minLogP >= log(950000)) & (maxLogP <= log(1100000)) ) {   ## Neither cross boundary
>>    between[i] = 1
>>    between.ending.value = append(between.ending.value, exp(logPrice[100]))
>>    }
>>  if  ( (minLogP < log(950000)) & (maxLogP > log(1100000))) { ## Both cross
>>            ifelse (crossBelowLogP.day < crossAboveLogP.day, below[i] <- 1, above[i] <-1)
>>            ifelse (crossBelowLogP.day < crossAboveLogP.day, below.ending.day <- append(below.ending.day, crossBelowLogP.day),
>>                                                       above.ending.day <- append(above.ending.day, crossAboveLogP.day))
>>          }
>>  if ( (minLogP < log(950000))  & (maxLogP <= log(1100000))  ) {    ## Only cross below
>>            below[i] = 1
>>            below.ending.day = append(below.ending.day, crossBelowLogP.day)
>>          }
>>  if ( (minLogP >= log(950000))  & (maxLogP > log(1100000))  ) {    ## Only cross above
>>            above[i] = 1
>>            above.ending.day = append(above.ending.day, crossAboveLogP.day)
>>          }
>> }
>> mean(above)  ## this will give the probability of the value crossing the above threshold
>>
>> When annualizing returns, the day in which a boundary needs to be accounted for.    The following code calculates the overall expected return by conditioning on each scenario:
>>
>> # cross above: always make constant 100,000 based on initial investment of 50,000
>> # P_t/P_t-1 = 100,000/50,000 = 2 = gross return --> net return = 2 - 1 = 1
>> ret.above = (1 + 1)^(365/(above.ending.day))  - 1    ### annualized
>>
>> # cross below: always lose constant 50,000 based on initial investment of 50,000
>> # P_t/P_t-1 = 50,000/50,000 = 1 = gross return --> net return = 1 - 1 = 0
>> ret.below = 0
>>
>> ## betwen: final value depends on realized value on 100th day
>> # P_t/P_t-1 = between.ending.value/50,000 = --> net return = gross return  - 1
>>
>> net = ifelse(between.ending.value < 1000000,
>>                   (1000000 - between.ending.value)/50000 - 1,  ## net return, gain
>>                   (between.ending.value  - 1000000)/50000 - 1)   ## net return, loss
>>
>> ret.between = (1 + net)^(365/100) - 1
>>
>> exp.return = mean(above)*mean(ret.above)   + mean(below)*mean(ret.below)   + mean(between) * mean(ret.between)
>> 8.669104e+50???
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org<mailto:R-SIG-Finance at r-project.org> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>>


From gsee000 at gmail.com  Sun Dec 25 21:25:33 2011
From: gsee000 at gmail.com (G See)
Date: Sun, 25 Dec 2011 14:25:33 -0600
Subject: [R-SIG-Finance] Simulated expected return for a hedge fund
In-Reply-To: <2D74E06059E9184D9507A6739D10ACE5195E44A6AC@ITS-HCWNEM06.ds.Vanderbilt.edu>
References: <2D74E06059E9184D9507A6739D10ACE5195E44A6AA@ITS-HCWNEM06.ds.Vanderbilt.edu>
	<CA+xi=qZ9Wiq+wgQbrXD70msLUX9jc8DKnPtCNUKJ0fmoC-ZM+w@mail.gmail.com>
	<CA+xi=qZXiQ+JnrQPuqz2cQqqhbJ=+EcyuZ7zS1e_7hQyMQ7ZFQ@mail.gmail.com>
	<CA+xi=qax2kzfo-ZZOy1Ty8Va6eM5WJM_p2u2ZRh0cNFKxOL+Cw@mail.gmail.com>
	<2D74E06059E9184D9507A6739D10ACE5195E44A6AB@ITS-HCWNEM06.ds.Vanderbilt.edu>
	<CA+xi=qYrtz1HT1vNxZQo1G-D6PXkUo7bDDe=mHbG5dx+2V=MDw@mail.gmail.com>
	<CA+xi=qZwWDUHEYOtx2Pmc+KAW1yTUZ6K0Ku1TeM-Ln4ExqRxGA@mail.gmail.com>
	<2D74E06059E9184D9507A6739D10ACE5195E44A6AC@ITS-HCWNEM06.ds.Vanderbilt.edu>
Message-ID: <CA+xi=qZ3adb-288zY8LGNGi4FpChVP+2kT5j8cNkqDkLyd78pw@mail.gmail.com>

Hi David,

2 things.  First, the second term of your expected profit expression
should have a positive sign.  i.e.
mean(above)*mean(profit.above) + mean(below)*mean(profit.below) +
mean(between)*mean(profit.between)

Second, your expected profit calculation does not take into account
how many days it took you to earn/lose that money.  If you do that,
our answers agree

> prof.above <- profit.above/above.ending.day
> prof.below <- profit.below/below.ending.day
> prof.between <- profit.between/100
> mean(above)*mean(prof.above) + mean(below)*mean(prof.below) + mean(between)*mean(prof.between)
[1] -1098.853

However, just because our answers agree doesn't mean they are right.
:-)  I would be interested to learn what answer the author came up
with.

Cheers,
Garrett

On Sun, Dec 25, 2011 at 1:45 PM, Afshartous, David
<d.afshartous at vanderbilt.edu> wrote:
>
> Hi Garrett,
>
> Thanks for looking into the problem. ? You are correct, one has to be careful to note that portfolio value for early sells will not be exactly equal to the boundary values that trigger the early sells (and also that -100% loss conversion to daily return is an issue).
>
> I corrected my code and now obtain the same expected return as your code to within 5 decimal places. ? However, I still obtain a positive value for the expected profit. ?My calculation is a conditional probability calculation whereas your calculation is direct. ? I doubt that such big difference in expected profit could be due to rounding error of such a process but at the same time we obtain the same expected return. ? ?Code below:
>
> niter = 10000 ? ? ## number of iterations
> below = rep(0, niter) ? ## set up storage
> above = rep(0, niter)
> between = rep(0, niter)
> between.ending.value = NULL
> below.ending.day = NULL
> above.ending.day = NULL
> profit.above = NULL
> profit.below = NULL
> profit.between = NULL
> set.seed(2009)
> for (i in 1:niter) {
> ?r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
> ?logPrice = log(1e6) + cumsum(r) ?## 1e6 = initial price
> ?minLogP = min(logPrice) ?## min price over next 45 days
> ?maxLogP = max(logPrice) ?## min price over next 45 days
> ?crossBelowLogP.day = ifelse( minLogP < log(950000), ?min(which(logPrice < log(950000))), 101) ## 101 means doesn't cross
> ?crossAboveLogP.day = ifelse( maxLogP > log(1100000), ?min(which(logPrice > log(1100000))), 101)
> ?if ( (minLogP >= log(950000)) & (maxLogP <= log(1100000)) ) { ? ## Neither cross boundary
> ? ? between[i] = 1
> ? ? between.ending.value = append(between.ending.value, exp(logPrice[100]))
> ? ? profit.between = ? append(profit.between, between.ending.value - 1000000)
> ? ? }
> ?if ?( (minLogP < log(950000)) & (maxLogP > log(1100000))) { ## Both cross
> ? ? ? ? ? ? ifelse (crossBelowLogP.day < crossAboveLogP.day, below[i] <- 1, above[i] <-1)
> ? ? ? ? ? ? ifelse (crossBelowLogP.day < crossAboveLogP.day, below.ending.day <- append(below.ending.day, crossBelowLogP.day),
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?above.ending.day <- append(above.ending.day, crossAboveLogP.day))
> ? ? ? ? ? ? ifelse (crossBelowLogP.day < crossAboveLogP.day, profit.below <- ? append(profit.below, exp(logPrice[crossBelowLogP.day]) - 1000000),
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?profit.above ?<- ? ? ?append(profit.above, exp(logPrice[crossAboveLogP.day]) - 1000000))
> ? ? ? ? ? }
> ?if ( (minLogP < log(950000)) ?& (maxLogP <= log(1100000)) ?) { ? ?## Only cross below
> ? ? ? ? ? ? below[i] = 1
> ? ? ? ? ? ? below.ending.day = append(below.ending.day, crossBelowLogP.day)
> ? ? ? ? ? ? profit.below = ? append(profit.below, exp(logPrice[crossBelowLogP.day]) - 1000000)
> ? ? ? ? ? }
> ?if ( (minLogP >= log(950000)) ?& (maxLogP > log(1100000)) ?) { ? ?## Only cross above
> ? ? ? ? ? ? above[i] = 1
> ? ? ? ? ? ? above.ending.day = append(above.ending.day, crossAboveLogP.day)
> ? ? ? ? ? ? profit.above = ?append(profit.above, exp(logPrice[crossAboveLogP.day]) - 1000000)
> ? ? ? ? ? }
> }
>
> ## expected profit
> mean(above)*mean(profit.above) - mean(below)*mean(profit.below) + mean(between)*mean(profit.between)
> [1] 77227.87
>
>
> ret.above = (profit.above/50000)/above.ending.day ?## daily return, return wont' be exactly 1 since P_t won't be exactly equal to 100,000
> ret.below = (profit.below/50000)/below.ending.day ?## daily return
> ret.between = (profit.between/50000)/100 ?## daily return
> ## exp.return:
> mean(above)*mean(ret.above) ? + mean(below)*mean(ret.below) ? + mean(between) * mean(ret.between)
> [1] -0.02197705
>
>
> ________________________________________
> From: G See [gsee000 at gmail.com]
> Sent: Sunday, December 25, 2011 12:44 PM
> To: Afshartous, David
> Subject: Re: [R-SIG-Finance] Simulated expected return for a hedge fund
>
> BTW,
>
> I get a negative value for expected Profit also
>
>> niter = 10000 ? ? ## number of iterations
>> set.seed(2009)
>> PnLs <- rep(0, niter)
>> for (i in 1:niter) {
> + ? ? r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
> + ? ? SV <- 1e6 * exp(cumsum(r)) #StockValue
> + ? ? daily.PnL <- if (min(SV) > 950000 && max(SV) < 1100000) {
> + ? ? ? ? #between
> + ? ? ? ? SellPrice <- tail(SV, 1) # Sell on last day (100 returns in
> the future)
> + ? ? ? ? PnL <- (SellPrice - 1000000)
> + ? ? ? ? PnL / 100 ?# average daily PnL
> + ? ? } else {
> + ? ? ? ? # Sell at first value that is less than 950000 or greater than 1100000
> + ? ? ? ? SellPrice <- head(SV[SV < 950000 | SV > 1100000], 1)
> + ? ? ? ? days.held <- head(which(SV == SellPrice), 1) # first place
> that StockValue equals SellPrice
> + ? ? ? ? #if (SellPrice < 950000) SellPrice <- 950000
> + ? ? ? ? PnL <- (SellPrice - 1000000)
> + ? ? ? ? PnL / days.held
> + ? ? }
> + ? ? PnLs[i] <- daily.PnL
> + }
>> mean(PnLs)
> [1] -1098.661
>> mean(PnLs) / 50000
> [1] -0.02197322
>>
>
>
> On Sat, Dec 24, 2011 at 10:31 PM, G See <gsee000 at gmail.com> wrote:
>> David,
>>
>> I attempted to work the problem myself, and have concluded that it is
>> a poor question. :-P
>> The question says that you will sell for a profit of _at least_
>> $100,000, if the value of the stock
>> rises to at least $1,100,000 or sell for a loss if the value falls
>> below $950000.
>>
>> I interpret that to mean that on the first day that the stock value is
>> at or above 1.1 million, I sell
>> at the prevailing price (which may, and probably will, be higher than
>> 1.1 million). ?Likewise, I think
>> it says that I will sell on the first day that the value of the stock
>> is below $950,000. ?But, if the
>> stock gets to $950,000, I'm out of capital. ?It is unlikely that the
>> value of the stock will be
>> exactly $950,000, which means that I would be losing more than 100
>> percent of my capita. ?I
>> don't know how to convert an N-day return that is less than negative
>> 100 percent to either a daily
>> or annual return. ?So, I just divided it by the number of days. ?i.e.
>> if you lose 110% over 10 days
>> then you're losing 11% per day on average. (But, I'm aware that that
>> doesn't make sense)
>>
>> My attempt is below; I came up with an "answer" of -0.02197322
>>
>>
>> niter = 10000 ? ? ## number of iterations
>> set.seed(2009)
>> returns <- rep(0, niter)
>> for (i in 1:niter) {
>> ? ? r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
>> ? ? SV <- 1e6 * exp(cumsum(r)) #StockValue
>> ? ? daily.ret <- if (min(SV) > 950000 && max(SV) < 1100000) {
>> ? ? ? ? #between
>> ? ? ? ? SellPrice <- tail(SV, 1) # Sell on last day (100 returns in the future)
>> ? ? ? ? ret <- (SellPrice - 1000000) / 50000
>> ? ? ? ? ret / 100 ?# average daily return
>> ? ? } else {
>> ? ? ? ? # Sell at first value that is less than 950000 or greater than 1100000
>> ? ? ? ? SellPrice <- head(SV[SV < 950000 | SV > 1100000], 1)
>> ? ? ? ? days.held <- head(which(SV == SellPrice), 1) # first place
>> that StockValue equals SellPrice
>> ? ? ? ? #if (SellPrice < 950000) SellPrice <- 950000
>> ? ? ? ? ret <- (SellPrice - 1000000) / 50000
>> ? ? ? ? ret / days.held
>> ? ? }
>> ? ? returns[i] <- daily.ret
>> }
>> mean(returns)
>> # -0.02197322
>>
>> HTH,
>> Garrett
>>
>>
>> On Sat, Dec 24, 2011 at 5:51 PM, Afshartous, David
>> <d.afshartous at vanderbilt.edu> wrote:
>>>
>>>
>>> Thanks Garrett. ?I fixed that typo and also put the conditional returns in terms of daily returns and the answer now seems reasonable. ? The changes to the code are:
>>>
>>> ret.above = 1/above.ending.day ?## daily return
>>> ret.below = -1/below.ending.day
>>>
>>> ret.between = net/100
>>>
>>> which now yields:
>>> exp.return = mean(above)*mean(ret.above) ? + mean(below)*mean(ret.below) ? + mean(between) * mean(ret.between)
>>> > exp.return
>>> [1] -0.03455923
>>>
>>> Interesting, since the expected profit is positive:
>>>
>>> exp.profit = mean(above)*100000 - mean(below)*50000 + mean(between)*(mean(between.ending.value) - 1000000)
>>> > exp.profit
>>> [1] 7530.114
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> ________________________________________
>>> From: G See [gsee000 at gmail.com]
>>> Sent: Saturday, December 24, 2011 1:27 PM
>>> To: Afshartous, David
>>> Cc: r-sig-finance at r-project.org
>>> Subject: Re: [R-SIG-Finance] Simulated expected return for a hedge fund
>>>
>>> I'm not at a computer, but it looks like if the account value falls from 50,000 to zero, you are counting that as a 0% return instead of -100%?
>>>
>>> On Dec 24, 2011 12:58 PM, "G See" <gsee000 at gmail.com<mailto:gsee000 at gmail.com>> wrote:
>>>
>>> Sorry, please disregard. I didn't look at your code closely.
>>>
>>> On Dec 24, 2011 10:55 AM, "G See" <gsee000 at gmail.com<mailto:gsee000 at gmail.com>> wrote:
>>> Hi David,
>>>
>>> Here is my hint:
>>>
>>> 1> set.seed(2009)
>>> 1> ?r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
>>> 1> ?logPrice = log(1e6) + cumsum(r) ?## 1e6 = initial price
>>> 1> logPrice
>>> ?[1] 13.80340 13.80755 13.80516 13.80164 13.82105 13.79453 13.79750 13.80408 13.78316 13.77246 13.77529
>>> ?[12] 13.79100 13.78908 13.79427 13.79268 13.76960 13.78917 13.79897 13.80548 13.80673 13.83131 13.82956
>>> ?[23] 13.82829 13.83970 13.84860 13.88746 13.90191 13.89439 13.88666 13.89621 13.92104 13.91894 13.92787
>>> ?[34] 13.91217 13.90804 13.91452 13.92865 13.95498 13.98419 13.98820 13.99140 14.00165 13.97519 13.96530
>>> ?[45] 13.95029 13.95800 13.94906 13.94807 13.91299 13.90617 13.90202 13.90779 13.89517 13.88682 13.89177
>>> ?[56] 13.88537 13.89815 13.87475 13.86916 13.88294 13.87048 13.86705 13.87571 13.86564 13.85744 13.87504
>>> ?[67] 13.88990 13.88075 13.87261 13.86023 13.85191 13.85510 13.84572 13.84649 13.85447 13.83746 13.82143
>>> ?[78] 13.80111 13.78505 13.79430 13.81151 13.81456 13.80200 13.79527 13.80288 13.76598 13.79024 13.81018
>>> ?[89] 13.80240 13.77962 13.78402 13.78493 13.80514 13.79839 13.77328 13.78443 13.78491 13.77488 13.75898
>>> [100] 13.74589
>>>
>>> That's probably not what you intended ;-)
>>>
>>> Garrett
>>>
>>> On Fri, Dec 23, 2011 at 2:43 PM, Afshartous, David <d.afshartous at vanderbilt.edu<mailto:d.afshartous at vanderbilt.edu>> wrote:
>>>
>>> All,
>>> Below is an R-lab problem from Ch2 of Statistics and Data Analysis for Financial Engineering (Ruppert, 2010). ? The R code runs okay but the answer seems strange. ? Any hints much appreciated.
>>> Cheers,
>>> David
>>>
>>> David Afshartous, Ph.D.
>>> Research Associate Professor
>>> PSTAT?: ASA Accredited Professional Statistician
>>> Department of Biostatistics
>>> Vanderbilt University Medical Center
>>>
>>>
>>> ## suppose Hedge fund owns $1,000,000 of stock and used $50,000 capital and
>>> ## $950,000 borrowed money for the purchase.
>>> ## Daily log returns on the stock have a mean of 0.05/year and SD of 0.23/year,
>>> ## which can be converted to per trading day by dividing by 253 and sqrt(253)
>>>
>>> ## the hedge fund will sell the stock for a profit of at least $100,000 if the value
>>> ## of the stock rises to at least $1,100,000 at the end of one of the first 100 trading days,
>>> ## sell it for a loss if the value falls below $950,000 at the end of one of the first
>>> ## 100 trading days, or sell after 100 trading days if the closing price has stayed between
>>> ## $950,000 and $1,1000,000.
>>>
>>> ## PROBLEM 7: What is the expected return? When answering this question, remember
>>> ## that only $50,000 was invested. ?Also, the units of return are time, e.g.,
>>> ## one can express a return as a daily return or a weekly return. ?Therefore,
>>> ## one must keep track of how long the hedge fund holds its position before selling
>>>
>>> The code below simulates whether value falls below 950,000, goes above 1,1000,000, or stays between. The amount lost/gained in the 1st/2nd scenario is a constant, whereas the amount lost/gained in the third scenario is random.
>>>
>>> ### simulation code; written for readability as opposed to speed
>>> niter = 10000 ? ? ## number of iterations
>>> below = rep(0, niter) ? ## set up storage
>>> above = rep(0, niter)
>>> between = rep(0, niter)
>>> between.ending.value = NULL
>>> below.ending.day = NULL
>>> above.ending.day = NULL
>>> set.seed(2009)
>>> for (i in 1:niter) {
>>> ?r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
>>> ?logPrice = log(1e6) + cumsum(r) ?## 1e6 = initial price
>>> ?minLogP = min(logPrice) ?## min price over next 45 days
>>> ?maxLogP = max(logPrice) ?## min price over next 45 days
>>> ?crossBelowLogP.day = ifelse( minLogP < log(950000), ?min(which(logPrice < log(950000))), 101) ## 101 means doesn't cross
>>> ?crossAboveLogP.day = ifelse( maxLogP > log(1100000), ?min(which(logPrice > log(1100000))), 101)
>>> ?if ( (minLogP >= log(950000)) & (maxLogP <= log(1100000)) ) { ? ## Neither cross boundary
>>> ? ?between[i] = 1
>>> ? ?between.ending.value = append(between.ending.value, exp(logPrice[100]))
>>> ? ?}
>>> ?if ?( (minLogP < log(950000)) & (maxLogP > log(1100000))) { ## Both cross
>>> ? ? ? ? ? ?ifelse (crossBelowLogP.day < crossAboveLogP.day, below[i] <- 1, above[i] <-1)
>>> ? ? ? ? ? ?ifelse (crossBelowLogP.day < crossAboveLogP.day, below.ending.day <- append(below.ending.day, crossBelowLogP.day),
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? above.ending.day <- append(above.ending.day, crossAboveLogP.day))
>>> ? ? ? ? ?}
>>> ?if ( (minLogP < log(950000)) ?& (maxLogP <= log(1100000)) ?) { ? ?## Only cross below
>>> ? ? ? ? ? ?below[i] = 1
>>> ? ? ? ? ? ?below.ending.day = append(below.ending.day, crossBelowLogP.day)
>>> ? ? ? ? ?}
>>> ?if ( (minLogP >= log(950000)) ?& (maxLogP > log(1100000)) ?) { ? ?## Only cross above
>>> ? ? ? ? ? ?above[i] = 1
>>> ? ? ? ? ? ?above.ending.day = append(above.ending.day, crossAboveLogP.day)
>>> ? ? ? ? ?}
>>> }
>>> mean(above) ?## this will give the probability of the value crossing the above threshold
>>>
>>> When annualizing returns, the day in which a boundary needs to be accounted for. ? ?The following code calculates the overall expected return by conditioning on each scenario:
>>>
>>> # cross above: always make constant 100,000 based on initial investment of 50,000
>>> # P_t/P_t-1 = 100,000/50,000 = 2 = gross return --> net return = 2 - 1 = 1
>>> ret.above = (1 + 1)^(365/(above.ending.day)) ?- 1 ? ?### annualized
>>>
>>> # cross below: always lose constant 50,000 based on initial investment of 50,000
>>> # P_t/P_t-1 = 50,000/50,000 = 1 = gross return --> net return = 1 - 1 = 0
>>> ret.below = 0
>>>
>>> ## betwen: final value depends on realized value on 100th day
>>> # P_t/P_t-1 = between.ending.value/50,000 = --> net return = gross return ?- 1
>>>
>>> net = ifelse(between.ending.value < 1000000,
>>> ? ? ? ? ? ? ? ? ? (1000000 - between.ending.value)/50000 - 1, ?## net return, gain
>>> ? ? ? ? ? ? ? ? ? (between.ending.value ?- 1000000)/50000 - 1) ? ## net return, loss
>>>
>>> ret.between = (1 + net)^(365/100) - 1
>>>
>>> exp.return = mean(above)*mean(ret.above) ? + mean(below)*mean(ret.below) ? + mean(between) * mean(ret.between)
>>> 8.669104e+50???
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org<mailto:R-SIG-Finance at r-project.org> mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>>
>>>
>
>


From comtech.usa at gmail.com  Mon Dec 26 00:56:46 2011
From: comtech.usa at gmail.com (Michael)
Date: Sun, 25 Dec 2011 17:56:46 -0600
Subject: [R-SIG-Finance] Error message "No regressors provided" in auto.arima
Message-ID: <CAPNjSFaXGryf4f=LBbf_mDb3MAsaZWSadpiPmc2A1U_JoZAoFQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111225/5f4f9ff0/attachment.pl>

From comtech.usa at gmail.com  Mon Dec 26 01:04:55 2011
From: comtech.usa at gmail.com (Michael)
Date: Sun, 25 Dec 2011 18:04:55 -0600
Subject: [R-SIG-Finance] Error message "No regressors provided" in
	auto.arima
In-Reply-To: <CAPNjSFaXGryf4f=LBbf_mDb3MAsaZWSadpiPmc2A1U_JoZAoFQ@mail.gmail.com>
References: <CAPNjSFaXGryf4f=LBbf_mDb3MAsaZWSadpiPmc2A1U_JoZAoFQ@mail.gmail.com>
Message-ID: <CAPNjSFZ1YvJq19_kpEBsMdpjq68yg5G7dMNYs4ysZDAjKs9j=w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111225/16c0e4d6/attachment.pl>

From d.afshartous at Vanderbilt.Edu  Mon Dec 26 01:31:01 2011
From: d.afshartous at Vanderbilt.Edu (Afshartous, David)
Date: Sun, 25 Dec 2011 18:31:01 -0600
Subject: [R-SIG-Finance] Simulated expected return for a hedge fund
In-Reply-To: <CA+xi=qZ3adb-288zY8LGNGi4FpChVP+2kT5j8cNkqDkLyd78pw@mail.gmail.com>
References: <2D74E06059E9184D9507A6739D10ACE5195E44A6AA@ITS-HCWNEM06.ds.Vanderbilt.edu>
	<CA+xi=qZ9Wiq+wgQbrXD70msLUX9jc8DKnPtCNUKJ0fmoC-ZM+w@mail.gmail.com>
	<CA+xi=qZXiQ+JnrQPuqz2cQqqhbJ=+EcyuZ7zS1e_7hQyMQ7ZFQ@mail.gmail.com>
	<CA+xi=qax2kzfo-ZZOy1Ty8Va6eM5WJM_p2u2ZRh0cNFKxOL+Cw@mail.gmail.com>
	<2D74E06059E9184D9507A6739D10ACE5195E44A6AB@ITS-HCWNEM06.ds.Vanderbilt.edu>
	<CA+xi=qYrtz1HT1vNxZQo1G-D6PXkUo7bDDe=mHbG5dx+2V=MDw@mail.gmail.com>
	<CA+xi=qZwWDUHEYOtx2Pmc+KAW1yTUZ6K0Ku1TeM-Ln4ExqRxGA@mail.gmail.com>
	<2D74E06059E9184D9507A6739D10ACE5195E44A6AC@ITS-HCWNEM06.ds.Vanderbilt.edu>,
	<CA+xi=qZ3adb-288zY8LGNGi4FpChVP+2kT5j8cNkqDkLyd78pw@mail.gmail.com>
Message-ID: <2D74E06059E9184D9507A6739D10ACE5195E44A6AE@ITS-HCWNEM06.ds.Vanderbilt.edu>

Hi Garrett,

Thank you very much for your reply.    Fixing the typo with the negative sign, my updated expected
profit calculation yields:

## expected profit
> mean(above)*mean(profit.above) + mean(below)*mean(profit.below) + mean(between)*mean(profit.between)
[1] 9433.936

This value seems to make sense given that the probability of crossing the upper boundary is .39 = mean (above), and the
probability of the crossing the lower boundary is .58 = mean(below), and these events yield gains/losses of approximately
100k and -50k.     I'm not sure I see the need to account for how many days it took to earn/lose the money and
calculate the expected profit per day, since the above calculation determines the expected amount of money that this
strategy will yield?   And isn't this what is ultimately of interest?   At any rate, assuming this is correct, it's somewhat troubling that this number is positive while
the expected profit per day is negative.

Cheers,
David



________________________________________
From: G See [gsee000 at gmail.com]
Sent: Sunday, December 25, 2011 2:25 PM
To: Afshartous, David
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Simulated expected return for a hedge fund

Hi David,

2 things.  First, the second term of your expected profit expression
should have a positive sign.  i.e.
mean(above)*mean(profit.above) + mean(below)*mean(profit.below) +
mean(between)*mean(profit.between)

Second, your expected profit calculation does not take into account
how many days it took you to earn/lose that money.  If you do that,
our answers agree

> prof.above <- profit.above/above.ending.day
> prof.below <- profit.below/below.ending.day
> prof.between <- profit.between/100
> mean(above)*mean(prof.above) + mean(below)*mean(prof.below) + mean(between)*mean(prof.between)
[1] -1098.853

However, just because our answers agree doesn't mean they are right.
:-)  I would be interested to learn what answer the author came up
with.

Cheers,
Garrett

On Sun, Dec 25, 2011 at 1:45 PM, Afshartous, David
<d.afshartous at vanderbilt.edu> wrote:
>
> Hi Garrett,
>
> Thanks for looking into the problem.   You are correct, one has to be careful to note that portfolio value for early sells will not be exactly equal to the boundary values that trigger the early sells (and also that -100% loss conversion to daily return is an issue).
>
> I corrected my code and now obtain the same expected return as your code to within 5 decimal places.   However, I still obtain a positive value for the expected profit.  My calculation is a conditional probability calculation whereas your calculation is direct.   I doubt that such big difference in expected profit could be due to rounding error of such a process but at the same time we obtain the same expected return.    Code below:
>
> niter = 10000     ## number of iterations
> below = rep(0, niter)   ## set up storage
> above = rep(0, niter)
> between = rep(0, niter)
> between.ending.value = NULL
> below.ending.day = NULL
> above.ending.day = NULL
> profit.above = NULL
> profit.below = NULL
> profit.between = NULL
> set.seed(2009)
> for (i in 1:niter) {
>  r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
>  logPrice = log(1e6) + cumsum(r)  ## 1e6 = initial price
>  minLogP = min(logPrice)  ## min price over next 45 days
>  maxLogP = max(logPrice)  ## min price over next 45 days
>  crossBelowLogP.day = ifelse( minLogP < log(950000),  min(which(logPrice < log(950000))), 101) ## 101 means doesn't cross
>  crossAboveLogP.day = ifelse( maxLogP > log(1100000),  min(which(logPrice > log(1100000))), 101)
>  if ( (minLogP >= log(950000)) & (maxLogP <= log(1100000)) ) {   ## Neither cross boundary
>     between[i] = 1
>     between.ending.value = append(between.ending.value, exp(logPrice[100]))
>     profit.between =   append(profit.between, between.ending.value - 1000000)
>     }
>  if  ( (minLogP < log(950000)) & (maxLogP > log(1100000))) { ## Both cross
>             ifelse (crossBelowLogP.day < crossAboveLogP.day, below[i] <- 1, above[i] <-1)
>             ifelse (crossBelowLogP.day < crossAboveLogP.day, below.ending.day <- append(below.ending.day, crossBelowLogP.day),
>                                                        above.ending.day <- append(above.ending.day, crossAboveLogP.day))
>             ifelse (crossBelowLogP.day < crossAboveLogP.day, profit.below <-   append(profit.below, exp(logPrice[crossBelowLogP.day]) - 1000000),
>                                                        profit.above  <-      append(profit.above, exp(logPrice[crossAboveLogP.day]) - 1000000))
>           }
>  if ( (minLogP < log(950000))  & (maxLogP <= log(1100000))  ) {    ## Only cross below
>             below[i] = 1
>             below.ending.day = append(below.ending.day, crossBelowLogP.day)
>             profit.below =   append(profit.below, exp(logPrice[crossBelowLogP.day]) - 1000000)
>           }
>  if ( (minLogP >= log(950000))  & (maxLogP > log(1100000))  ) {    ## Only cross above
>             above[i] = 1
>             above.ending.day = append(above.ending.day, crossAboveLogP.day)
>             profit.above =  append(profit.above, exp(logPrice[crossAboveLogP.day]) - 1000000)
>           }
> }
>
> ## expected profit
> mean(above)*mean(profit.above) - mean(below)*mean(profit.below) + mean(between)*mean(profit.between)
> [1] 77227.87
>
>
> ret.above = (profit.above/50000)/above.ending.day  ## daily return, return wont' be exactly 1 since P_t won't be exactly equal to 100,000
> ret.below = (profit.below/50000)/below.ending.day  ## daily return
> ret.between = (profit.between/50000)/100  ## daily return
> ## exp.return:
> mean(above)*mean(ret.above)   + mean(below)*mean(ret.below)   + mean(between) * mean(ret.between)
> [1] -0.02197705
>
>
> ________________________________________
> From: G See [gsee000 at gmail.com]
> Sent: Sunday, December 25, 2011 12:44 PM
> To: Afshartous, David
> Subject: Re: [R-SIG-Finance] Simulated expected return for a hedge fund
>
> BTW,
>
> I get a negative value for expected Profit also
>
>> niter = 10000     ## number of iterations
>> set.seed(2009)
>> PnLs <- rep(0, niter)
>> for (i in 1:niter) {
> +     r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
> +     SV <- 1e6 * exp(cumsum(r)) #StockValue
> +     daily.PnL <- if (min(SV) > 950000 && max(SV) < 1100000) {
> +         #between
> +         SellPrice <- tail(SV, 1) # Sell on last day (100 returns in
> the future)
> +         PnL <- (SellPrice - 1000000)
> +         PnL / 100  # average daily PnL
> +     } else {
> +         # Sell at first value that is less than 950000 or greater than 1100000
> +         SellPrice <- head(SV[SV < 950000 | SV > 1100000], 1)
> +         days.held <- head(which(SV == SellPrice), 1) # first place
> that StockValue equals SellPrice
> +         #if (SellPrice < 950000) SellPrice <- 950000
> +         PnL <- (SellPrice - 1000000)
> +         PnL / days.held
> +     }
> +     PnLs[i] <- daily.PnL
> + }
>> mean(PnLs)
> [1] -1098.661
>> mean(PnLs) / 50000
> [1] -0.02197322
>>
>
>
> On Sat, Dec 24, 2011 at 10:31 PM, G See <gsee000 at gmail.com> wrote:
>> David,
>>
>> I attempted to work the problem myself, and have concluded that it is
>> a poor question. :-P
>> The question says that you will sell for a profit of _at least_
>> $100,000, if the value of the stock
>> rises to at least $1,100,000 or sell for a loss if the value falls
>> below $950000.
>>
>> I interpret that to mean that on the first day that the stock value is
>> at or above 1.1 million, I sell
>> at the prevailing price (which may, and probably will, be higher than
>> 1.1 million).  Likewise, I think
>> it says that I will sell on the first day that the value of the stock
>> is below $950,000.  But, if the
>> stock gets to $950,000, I'm out of capital.  It is unlikely that the
>> value of the stock will be
>> exactly $950,000, which means that I would be losing more than 100
>> percent of my capita.  I
>> don't know how to convert an N-day return that is less than negative
>> 100 percent to either a daily
>> or annual return.  So, I just divided it by the number of days.  i.e.
>> if you lose 110% over 10 days
>> then you're losing 11% per day on average. (But, I'm aware that that
>> doesn't make sense)
>>
>> My attempt is below; I came up with an "answer" of -0.02197322
>>
>>
>> niter = 10000     ## number of iterations
>> set.seed(2009)
>> returns <- rep(0, niter)
>> for (i in 1:niter) {
>>     r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
>>     SV <- 1e6 * exp(cumsum(r)) #StockValue
>>     daily.ret <- if (min(SV) > 950000 && max(SV) < 1100000) {
>>         #between
>>         SellPrice <- tail(SV, 1) # Sell on last day (100 returns in the future)
>>         ret <- (SellPrice - 1000000) / 50000
>>         ret / 100  # average daily return
>>     } else {
>>         # Sell at first value that is less than 950000 or greater than 1100000
>>         SellPrice <- head(SV[SV < 950000 | SV > 1100000], 1)
>>         days.held <- head(which(SV == SellPrice), 1) # first place
>> that StockValue equals SellPrice
>>         #if (SellPrice < 950000) SellPrice <- 950000
>>         ret <- (SellPrice - 1000000) / 50000
>>         ret / days.held
>>     }
>>     returns[i] <- daily.ret
>> }
>> mean(returns)
>> # -0.02197322
>>
>> HTH,
>> Garrett
>>
>>
>> On Sat, Dec 24, 2011 at 5:51 PM, Afshartous, David
>> <d.afshartous at vanderbilt.edu> wrote:
>>>
>>>
>>> Thanks Garrett.  I fixed that typo and also put the conditional returns in terms of daily returns and the answer now seems reasonable.   The changes to the code are:
>>>
>>> ret.above = 1/above.ending.day  ## daily return
>>> ret.below = -1/below.ending.day
>>>
>>> ret.between = net/100
>>>
>>> which now yields:
>>> exp.return = mean(above)*mean(ret.above)   + mean(below)*mean(ret.below)   + mean(between) * mean(ret.between)
>>> > exp.return
>>> [1] -0.03455923
>>>
>>> Interesting, since the expected profit is positive:
>>>
>>> exp.profit = mean(above)*100000 - mean(below)*50000 + mean(between)*(mean(between.ending.value) - 1000000)
>>> > exp.profit
>>> [1] 7530.114
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> ________________________________________
>>> From: G See [gsee000 at gmail.com]
>>> Sent: Saturday, December 24, 2011 1:27 PM
>>> To: Afshartous, David
>>> Cc: r-sig-finance at r-project.org
>>> Subject: Re: [R-SIG-Finance] Simulated expected return for a hedge fund
>>>
>>> I'm not at a computer, but it looks like if the account value falls from 50,000 to zero, you are counting that as a 0% return instead of -100%?
>>>
>>> On Dec 24, 2011 12:58 PM, "G See" <gsee000 at gmail.com<mailto:gsee000 at gmail.com>> wrote:
>>>
>>> Sorry, please disregard. I didn't look at your code closely.
>>>
>>> On Dec 24, 2011 10:55 AM, "G See" <gsee000 at gmail.com<mailto:gsee000 at gmail.com>> wrote:
>>> Hi David,
>>>
>>> Here is my hint:
>>>
>>> 1> set.seed(2009)
>>> 1>  r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
>>> 1>  logPrice = log(1e6) + cumsum(r)  ## 1e6 = initial price
>>> 1> logPrice
>>>  [1] 13.80340 13.80755 13.80516 13.80164 13.82105 13.79453 13.79750 13.80408 13.78316 13.77246 13.77529
>>>  [12] 13.79100 13.78908 13.79427 13.79268 13.76960 13.78917 13.79897 13.80548 13.80673 13.83131 13.82956
>>>  [23] 13.82829 13.83970 13.84860 13.88746 13.90191 13.89439 13.88666 13.89621 13.92104 13.91894 13.92787
>>>  [34] 13.91217 13.90804 13.91452 13.92865 13.95498 13.98419 13.98820 13.99140 14.00165 13.97519 13.96530
>>>  [45] 13.95029 13.95800 13.94906 13.94807 13.91299 13.90617 13.90202 13.90779 13.89517 13.88682 13.89177
>>>  [56] 13.88537 13.89815 13.87475 13.86916 13.88294 13.87048 13.86705 13.87571 13.86564 13.85744 13.87504
>>>  [67] 13.88990 13.88075 13.87261 13.86023 13.85191 13.85510 13.84572 13.84649 13.85447 13.83746 13.82143
>>>  [78] 13.80111 13.78505 13.79430 13.81151 13.81456 13.80200 13.79527 13.80288 13.76598 13.79024 13.81018
>>>  [89] 13.80240 13.77962 13.78402 13.78493 13.80514 13.79839 13.77328 13.78443 13.78491 13.77488 13.75898
>>> [100] 13.74589
>>>
>>> That's probably not what you intended ;-)
>>>
>>> Garrett
>>>
>>> On Fri, Dec 23, 2011 at 2:43 PM, Afshartous, David <d.afshartous at vanderbilt.edu<mailto:d.afshartous at vanderbilt.edu>> wrote:
>>>
>>> All,
>>> Below is an R-lab problem from Ch2 of Statistics and Data Analysis for Financial Engineering (Ruppert, 2010).   The R code runs okay but the answer seems strange.   Any hints much appreciated.
>>> Cheers,
>>> David
>>>
>>> David Afshartous, Ph.D.
>>> Research Associate Professor
>>> PSTAT?: ASA Accredited Professional Statistician
>>> Department of Biostatistics
>>> Vanderbilt University Medical Center
>>>
>>>
>>> ## suppose Hedge fund owns $1,000,000 of stock and used $50,000 capital and
>>> ## $950,000 borrowed money for the purchase.
>>> ## Daily log returns on the stock have a mean of 0.05/year and SD of 0.23/year,
>>> ## which can be converted to per trading day by dividing by 253 and sqrt(253)
>>>
>>> ## the hedge fund will sell the stock for a profit of at least $100,000 if the value
>>> ## of the stock rises to at least $1,100,000 at the end of one of the first 100 trading days,
>>> ## sell it for a loss if the value falls below $950,000 at the end of one of the first
>>> ## 100 trading days, or sell after 100 trading days if the closing price has stayed between
>>> ## $950,000 and $1,1000,000.
>>>
>>> ## PROBLEM 7: What is the expected return? When answering this question, remember
>>> ## that only $50,000 was invested.  Also, the units of return are time, e.g.,
>>> ## one can express a return as a daily return or a weekly return.  Therefore,
>>> ## one must keep track of how long the hedge fund holds its position before selling
>>>
>>> The code below simulates whether value falls below 950,000, goes above 1,1000,000, or stays between. The amount lost/gained in the 1st/2nd scenario is a constant, whereas the amount lost/gained in the third scenario is random.
>>>
>>> ### simulation code; written for readability as opposed to speed
>>> niter = 10000     ## number of iterations
>>> below = rep(0, niter)   ## set up storage
>>> above = rep(0, niter)
>>> between = rep(0, niter)
>>> between.ending.value = NULL
>>> below.ending.day = NULL
>>> above.ending.day = NULL
>>> set.seed(2009)
>>> for (i in 1:niter) {
>>>  r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
>>>  logPrice = log(1e6) + cumsum(r)  ## 1e6 = initial price
>>>  minLogP = min(logPrice)  ## min price over next 45 days
>>>  maxLogP = max(logPrice)  ## min price over next 45 days
>>>  crossBelowLogP.day = ifelse( minLogP < log(950000),  min(which(logPrice < log(950000))), 101) ## 101 means doesn't cross
>>>  crossAboveLogP.day = ifelse( maxLogP > log(1100000),  min(which(logPrice > log(1100000))), 101)
>>>  if ( (minLogP >= log(950000)) & (maxLogP <= log(1100000)) ) {   ## Neither cross boundary
>>>    between[i] = 1
>>>    between.ending.value = append(between.ending.value, exp(logPrice[100]))
>>>    }
>>>  if  ( (minLogP < log(950000)) & (maxLogP > log(1100000))) { ## Both cross
>>>            ifelse (crossBelowLogP.day < crossAboveLogP.day, below[i] <- 1, above[i] <-1)
>>>            ifelse (crossBelowLogP.day < crossAboveLogP.day, below.ending.day <- append(below.ending.day, crossBelowLogP.day),
>>>                                                       above.ending.day <- append(above.ending.day, crossAboveLogP.day))
>>>          }
>>>  if ( (minLogP < log(950000))  & (maxLogP <= log(1100000))  ) {    ## Only cross below
>>>            below[i] = 1
>>>            below.ending.day = append(below.ending.day, crossBelowLogP.day)
>>>          }
>>>  if ( (minLogP >= log(950000))  & (maxLogP > log(1100000))  ) {    ## Only cross above
>>>            above[i] = 1
>>>            above.ending.day = append(above.ending.day, crossAboveLogP.day)
>>>          }
>>> }
>>> mean(above)  ## this will give the probability of the value crossing the above threshold
>>>
>>> When annualizing returns, the day in which a boundary needs to be accounted for.    The following code calculates the overall expected return by conditioning on each scenario:
>>>
>>> # cross above: always make constant 100,000 based on initial investment of 50,000
>>> # P_t/P_t-1 = 100,000/50,000 = 2 = gross return --> net return = 2 - 1 = 1
>>> ret.above = (1 + 1)^(365/(above.ending.day))  - 1    ### annualized
>>>
>>> # cross below: always lose constant 50,000 based on initial investment of 50,000
>>> # P_t/P_t-1 = 50,000/50,000 = 1 = gross return --> net return = 1 - 1 = 0
>>> ret.below = 0
>>>
>>> ## betwen: final value depends on realized value on 100th day
>>> # P_t/P_t-1 = between.ending.value/50,000 = --> net return = gross return  - 1
>>>
>>> net = ifelse(between.ending.value < 1000000,
>>>                   (1000000 - between.ending.value)/50000 - 1,  ## net return, gain
>>>                   (between.ending.value  - 1000000)/50000 - 1)   ## net return, loss
>>>
>>> ret.between = (1 + net)^(365/100) - 1
>>>
>>> exp.return = mean(above)*mean(ret.above)   + mean(below)*mean(ret.below)   + mean(between) * mean(ret.between)
>>> 8.669104e+50???
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org<mailto:R-SIG-Finance at r-project.org> mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>>
>>>
>
>


From gsee000 at gmail.com  Mon Dec 26 17:20:26 2011
From: gsee000 at gmail.com (G See)
Date: Mon, 26 Dec 2011 10:20:26 -0600
Subject: [R-SIG-Finance] Simulated expected return for a hedge fund
In-Reply-To: <CA+xi=qbid1vYve7KcpF6Otssj7TeQ6FsADr981MrZ66auBdfEQ@mail.gmail.com>
References: <2D74E06059E9184D9507A6739D10ACE5195E44A6AA@ITS-HCWNEM06.ds.Vanderbilt.edu>
	<CA+xi=qZ9Wiq+wgQbrXD70msLUX9jc8DKnPtCNUKJ0fmoC-ZM+w@mail.gmail.com>
	<CA+xi=qZXiQ+JnrQPuqz2cQqqhbJ=+EcyuZ7zS1e_7hQyMQ7ZFQ@mail.gmail.com>
	<CA+xi=qax2kzfo-ZZOy1Ty8Va6eM5WJM_p2u2ZRh0cNFKxOL+Cw@mail.gmail.com>
	<2D74E06059E9184D9507A6739D10ACE5195E44A6AB@ITS-HCWNEM06.ds.Vanderbilt.edu>
	<CA+xi=qYrtz1HT1vNxZQo1G-D6PXkUo7bDDe=mHbG5dx+2V=MDw@mail.gmail.com>
	<CA+xi=qZwWDUHEYOtx2Pmc+KAW1yTUZ6K0Ku1TeM-Ln4ExqRxGA@mail.gmail.com>
	<2D74E06059E9184D9507A6739D10ACE5195E44A6AC@ITS-HCWNEM06.ds.Vanderbilt.edu>
	<CA+xi=qZ3adb-288zY8LGNGi4FpChVP+2kT5j8cNkqDkLyd78pw@mail.gmail.com>
	<2D74E06059E9184D9507A6739D10ACE5195E44A6AE@ITS-HCWNEM06.ds.Vanderbilt.edu>
	<CA+xi=qbid1vYve7KcpF6Otssj7TeQ6FsADr981MrZ66auBdfEQ@mail.gmail.com>
Message-ID: <CA+xi=qZGqXwV+C_d0sswQgbw4BBxxLSe_q7BHvued6Caam2ZUw@mail.gmail.com>

forgot to copy the list

On Mon, Dec 26, 2011 at 10:19 AM, G See <gsee000 at gmail.com> wrote:
> David,
>
> The problem is that it takes longer to win than to lose.
>
> Imagine a game where there is a 50% chance you will lose $100 on day
> 1, and a 50% chance you'll make $100 on day 100.
>
> Ignoring the time value of money (that a dollar today is worth more
> than a dollar in the future), The expected value of the game is 0
> (=0.5*-100 + 0.5*100).
>
> However, if you lose, you will lose $100 per day on average, but if
> you win, you will only make $1 per day on average. ?You may think that
> if you lose, you lose $100 on day one and 0 for each of the next 99
> days. ?But, that isn't the case, because if you lose (and have more
> money), you could play again the second day.
>
> Our Hedge Fund problem is similar because it takes less time to lose
> 50k than it takes to make 100k.
>
> That said, I found copy of the book, and you are correct that the
> author is asking for the expected profit from the whole game.
>
> Garrett
>
> On Sun, Dec 25, 2011 at 6:31 PM, Afshartous, David
> <d.afshartous at vanderbilt.edu> wrote:
>> Hi Garrett,
>>
>> Thank you very much for your reply. ? ?Fixing the typo with the negative sign, my updated expected
>> profit calculation yields:
>>
>> ## expected profit
>>> mean(above)*mean(profit.above) + mean(below)*mean(profit.below) + mean(between)*mean(profit.between)
>> [1] 9433.936
>>
>> This value seems to make sense given that the probability of crossing the upper boundary is .39 = mean (above), and the
>> probability of the crossing the lower boundary is .58 = mean(below), and these events yield gains/losses of approximately
>> 100k and -50k. ? ? I'm not sure I see the need to account for how many days it took to earn/lose the money and
>> calculate the expected profit per day, since the above calculation determines the expected amount of money that this
>> strategy will yield? ? And isn't this what is ultimately of interest? ? At any rate, assuming this is correct, it's somewhat troubling that this number is positive while
>> the expected profit per day is negative.
>>
>> Cheers,
>> David
>>
>>
>>
>> ________________________________________
>> From: G See [gsee000 at gmail.com]
>> Sent: Sunday, December 25, 2011 2:25 PM
>> To: Afshartous, David
>> Cc: r-sig-finance at r-project.org
>> Subject: Re: [R-SIG-Finance] Simulated expected return for a hedge fund
>>
>> Hi David,
>>
>> 2 things. ?First, the second term of your expected profit expression
>> should have a positive sign. ?i.e.
>> mean(above)*mean(profit.above) + mean(below)*mean(profit.below) +
>> mean(between)*mean(profit.between)
>>
>> Second, your expected profit calculation does not take into account
>> how many days it took you to earn/lose that money. ?If you do that,
>> our answers agree
>>
>>> prof.above <- profit.above/above.ending.day
>>> prof.below <- profit.below/below.ending.day
>>> prof.between <- profit.between/100
>>> mean(above)*mean(prof.above) + mean(below)*mean(prof.below) + mean(between)*mean(prof.between)
>> [1] -1098.853
>>
>> However, just because our answers agree doesn't mean they are right.
>> :-) ?I would be interested to learn what answer the author came up
>> with.
>>
>> Cheers,
>> Garrett
>>
>> On Sun, Dec 25, 2011 at 1:45 PM, Afshartous, David
>> <d.afshartous at vanderbilt.edu> wrote:
>>>
>>> Hi Garrett,
>>>
>>> Thanks for looking into the problem. ? You are correct, one has to be careful to note that portfolio value for early sells will not be exactly equal to the boundary values that trigger the early sells (and also that -100% loss conversion to daily return is an issue).
>>>
>>> I corrected my code and now obtain the same expected return as your code to within 5 decimal places. ? However, I still obtain a positive value for the expected profit. ?My calculation is a conditional probability calculation whereas your calculation is direct. ? I doubt that such big difference in expected profit could be due to rounding error of such a process but at the same time we obtain the same expected return. ? ?Code below:
>>>
>>> niter = 10000 ? ? ## number of iterations
>>> below = rep(0, niter) ? ## set up storage
>>> above = rep(0, niter)
>>> between = rep(0, niter)
>>> between.ending.value = NULL
>>> below.ending.day = NULL
>>> above.ending.day = NULL
>>> profit.above = NULL
>>> profit.below = NULL
>>> profit.between = NULL
>>> set.seed(2009)
>>> for (i in 1:niter) {
>>> ?r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
>>> ?logPrice = log(1e6) + cumsum(r) ?## 1e6 = initial price
>>> ?minLogP = min(logPrice) ?## min price over next 45 days
>>> ?maxLogP = max(logPrice) ?## min price over next 45 days
>>> ?crossBelowLogP.day = ifelse( minLogP < log(950000), ?min(which(logPrice < log(950000))), 101) ## 101 means doesn't cross
>>> ?crossAboveLogP.day = ifelse( maxLogP > log(1100000), ?min(which(logPrice > log(1100000))), 101)
>>> ?if ( (minLogP >= log(950000)) & (maxLogP <= log(1100000)) ) { ? ## Neither cross boundary
>>> ? ? between[i] = 1
>>> ? ? between.ending.value = append(between.ending.value, exp(logPrice[100]))
>>> ? ? profit.between = ? append(profit.between, between.ending.value - 1000000)
>>> ? ? }
>>> ?if ?( (minLogP < log(950000)) & (maxLogP > log(1100000))) { ## Both cross
>>> ? ? ? ? ? ? ifelse (crossBelowLogP.day < crossAboveLogP.day, below[i] <- 1, above[i] <-1)
>>> ? ? ? ? ? ? ifelse (crossBelowLogP.day < crossAboveLogP.day, below.ending.day <- append(below.ending.day, crossBelowLogP.day),
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?above.ending.day <- append(above.ending.day, crossAboveLogP.day))
>>> ? ? ? ? ? ? ifelse (crossBelowLogP.day < crossAboveLogP.day, profit.below <- ? append(profit.below, exp(logPrice[crossBelowLogP.day]) - 1000000),
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?profit.above ?<- ? ? ?append(profit.above, exp(logPrice[crossAboveLogP.day]) - 1000000))
>>> ? ? ? ? ? }
>>> ?if ( (minLogP < log(950000)) ?& (maxLogP <= log(1100000)) ?) { ? ?## Only cross below
>>> ? ? ? ? ? ? below[i] = 1
>>> ? ? ? ? ? ? below.ending.day = append(below.ending.day, crossBelowLogP.day)
>>> ? ? ? ? ? ? profit.below = ? append(profit.below, exp(logPrice[crossBelowLogP.day]) - 1000000)
>>> ? ? ? ? ? }
>>> ?if ( (minLogP >= log(950000)) ?& (maxLogP > log(1100000)) ?) { ? ?## Only cross above
>>> ? ? ? ? ? ? above[i] = 1
>>> ? ? ? ? ? ? above.ending.day = append(above.ending.day, crossAboveLogP.day)
>>> ? ? ? ? ? ? profit.above = ?append(profit.above, exp(logPrice[crossAboveLogP.day]) - 1000000)
>>> ? ? ? ? ? }
>>> }
>>>
>>> ## expected profit
>>> mean(above)*mean(profit.above) - mean(below)*mean(profit.below) + mean(between)*mean(profit.between)
>>> [1] 77227.87
>>>
>>>
>>> ret.above = (profit.above/50000)/above.ending.day ?## daily return, return wont' be exactly 1 since P_t won't be exactly equal to 100,000
>>> ret.below = (profit.below/50000)/below.ending.day ?## daily return
>>> ret.between = (profit.between/50000)/100 ?## daily return
>>> ## exp.return:
>>> mean(above)*mean(ret.above) ? + mean(below)*mean(ret.below) ? + mean(between) * mean(ret.between)
>>> [1] -0.02197705
>>>
>>>
>>> ________________________________________
>>> From: G See [gsee000 at gmail.com]
>>> Sent: Sunday, December 25, 2011 12:44 PM
>>> To: Afshartous, David
>>> Subject: Re: [R-SIG-Finance] Simulated expected return for a hedge fund
>>>
>>> BTW,
>>>
>>> I get a negative value for expected Profit also
>>>
>>>> niter = 10000 ? ? ## number of iterations
>>>> set.seed(2009)
>>>> PnLs <- rep(0, niter)
>>>> for (i in 1:niter) {
>>> + ? ? r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
>>> + ? ? SV <- 1e6 * exp(cumsum(r)) #StockValue
>>> + ? ? daily.PnL <- if (min(SV) > 950000 && max(SV) < 1100000) {
>>> + ? ? ? ? #between
>>> + ? ? ? ? SellPrice <- tail(SV, 1) # Sell on last day (100 returns in
>>> the future)
>>> + ? ? ? ? PnL <- (SellPrice - 1000000)
>>> + ? ? ? ? PnL / 100 ?# average daily PnL
>>> + ? ? } else {
>>> + ? ? ? ? # Sell at first value that is less than 950000 or greater than 1100000
>>> + ? ? ? ? SellPrice <- head(SV[SV < 950000 | SV > 1100000], 1)
>>> + ? ? ? ? days.held <- head(which(SV == SellPrice), 1) # first place
>>> that StockValue equals SellPrice
>>> + ? ? ? ? #if (SellPrice < 950000) SellPrice <- 950000
>>> + ? ? ? ? PnL <- (SellPrice - 1000000)
>>> + ? ? ? ? PnL / days.held
>>> + ? ? }
>>> + ? ? PnLs[i] <- daily.PnL
>>> + }
>>>> mean(PnLs)
>>> [1] -1098.661
>>>> mean(PnLs) / 50000
>>> [1] -0.02197322
>>>>
>>>
>>>
>>> On Sat, Dec 24, 2011 at 10:31 PM, G See <gsee000 at gmail.com> wrote:
>>>> David,
>>>>
>>>> I attempted to work the problem myself, and have concluded that it is
>>>> a poor question. :-P
>>>> The question says that you will sell for a profit of _at least_
>>>> $100,000, if the value of the stock
>>>> rises to at least $1,100,000 or sell for a loss if the value falls
>>>> below $950000.
>>>>
>>>> I interpret that to mean that on the first day that the stock value is
>>>> at or above 1.1 million, I sell
>>>> at the prevailing price (which may, and probably will, be higher than
>>>> 1.1 million). ?Likewise, I think
>>>> it says that I will sell on the first day that the value of the stock
>>>> is below $950,000. ?But, if the
>>>> stock gets to $950,000, I'm out of capital. ?It is unlikely that the
>>>> value of the stock will be
>>>> exactly $950,000, which means that I would be losing more than 100
>>>> percent of my capita. ?I
>>>> don't know how to convert an N-day return that is less than negative
>>>> 100 percent to either a daily
>>>> or annual return. ?So, I just divided it by the number of days. ?i.e.
>>>> if you lose 110% over 10 days
>>>> then you're losing 11% per day on average. (But, I'm aware that that
>>>> doesn't make sense)
>>>>
>>>> My attempt is below; I came up with an "answer" of -0.02197322
>>>>
>>>>
>>>> niter = 10000 ? ? ## number of iterations
>>>> set.seed(2009)
>>>> returns <- rep(0, niter)
>>>> for (i in 1:niter) {
>>>> ? ? r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
>>>> ? ? SV <- 1e6 * exp(cumsum(r)) #StockValue
>>>> ? ? daily.ret <- if (min(SV) > 950000 && max(SV) < 1100000) {
>>>> ? ? ? ? #between
>>>> ? ? ? ? SellPrice <- tail(SV, 1) # Sell on last day (100 returns in the future)
>>>> ? ? ? ? ret <- (SellPrice - 1000000) / 50000
>>>> ? ? ? ? ret / 100 ?# average daily return
>>>> ? ? } else {
>>>> ? ? ? ? # Sell at first value that is less than 950000 or greater than 1100000
>>>> ? ? ? ? SellPrice <- head(SV[SV < 950000 | SV > 1100000], 1)
>>>> ? ? ? ? days.held <- head(which(SV == SellPrice), 1) # first place
>>>> that StockValue equals SellPrice
>>>> ? ? ? ? #if (SellPrice < 950000) SellPrice <- 950000
>>>> ? ? ? ? ret <- (SellPrice - 1000000) / 50000
>>>> ? ? ? ? ret / days.held
>>>> ? ? }
>>>> ? ? returns[i] <- daily.ret
>>>> }
>>>> mean(returns)
>>>> # -0.02197322
>>>>
>>>> HTH,
>>>> Garrett
>>>>
>>>>
>>>> On Sat, Dec 24, 2011 at 5:51 PM, Afshartous, David
>>>> <d.afshartous at vanderbilt.edu> wrote:
>>>>>
>>>>>
>>>>> Thanks Garrett. ?I fixed that typo and also put the conditional returns in terms of daily returns and the answer now seems reasonable. ? The changes to the code are:
>>>>>
>>>>> ret.above = 1/above.ending.day ?## daily return
>>>>> ret.below = -1/below.ending.day
>>>>>
>>>>> ret.between = net/100
>>>>>
>>>>> which now yields:
>>>>> exp.return = mean(above)*mean(ret.above) ? + mean(below)*mean(ret.below) ? + mean(between) * mean(ret.between)
>>>>> > exp.return
>>>>> [1] -0.03455923
>>>>>
>>>>> Interesting, since the expected profit is positive:
>>>>>
>>>>> exp.profit = mean(above)*100000 - mean(below)*50000 + mean(between)*(mean(between.ending.value) - 1000000)
>>>>> > exp.profit
>>>>> [1] 7530.114
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> ________________________________________
>>>>> From: G See [gsee000 at gmail.com]
>>>>> Sent: Saturday, December 24, 2011 1:27 PM
>>>>> To: Afshartous, David
>>>>> Cc: r-sig-finance at r-project.org
>>>>> Subject: Re: [R-SIG-Finance] Simulated expected return for a hedge fund
>>>>>
>>>>> I'm not at a computer, but it looks like if the account value falls from 50,000 to zero, you are counting that as a 0% return instead of -100%?
>>>>>
>>>>> On Dec 24, 2011 12:58 PM, "G See" <gsee000 at gmail.com<mailto:gsee000 at gmail.com>> wrote:
>>>>>
>>>>> Sorry, please disregard. I didn't look at your code closely.
>>>>>
>>>>> On Dec 24, 2011 10:55 AM, "G See" <gsee000 at gmail.com<mailto:gsee000 at gmail.com>> wrote:
>>>>> Hi David,
>>>>>
>>>>> Here is my hint:
>>>>>
>>>>> 1> set.seed(2009)
>>>>> 1> ?r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
>>>>> 1> ?logPrice = log(1e6) + cumsum(r) ?## 1e6 = initial price
>>>>> 1> logPrice
>>>>> ?[1] 13.80340 13.80755 13.80516 13.80164 13.82105 13.79453 13.79750 13.80408 13.78316 13.77246 13.77529
>>>>> ?[12] 13.79100 13.78908 13.79427 13.79268 13.76960 13.78917 13.79897 13.80548 13.80673 13.83131 13.82956
>>>>> ?[23] 13.82829 13.83970 13.84860 13.88746 13.90191 13.89439 13.88666 13.89621 13.92104 13.91894 13.92787
>>>>> ?[34] 13.91217 13.90804 13.91452 13.92865 13.95498 13.98419 13.98820 13.99140 14.00165 13.97519 13.96530
>>>>> ?[45] 13.95029 13.95800 13.94906 13.94807 13.91299 13.90617 13.90202 13.90779 13.89517 13.88682 13.89177
>>>>> ?[56] 13.88537 13.89815 13.87475 13.86916 13.88294 13.87048 13.86705 13.87571 13.86564 13.85744 13.87504
>>>>> ?[67] 13.88990 13.88075 13.87261 13.86023 13.85191 13.85510 13.84572 13.84649 13.85447 13.83746 13.82143
>>>>> ?[78] 13.80111 13.78505 13.79430 13.81151 13.81456 13.80200 13.79527 13.80288 13.76598 13.79024 13.81018
>>>>> ?[89] 13.80240 13.77962 13.78402 13.78493 13.80514 13.79839 13.77328 13.78443 13.78491 13.77488 13.75898
>>>>> [100] 13.74589
>>>>>
>>>>> That's probably not what you intended ;-)
>>>>>
>>>>> Garrett
>>>>>
>>>>> On Fri, Dec 23, 2011 at 2:43 PM, Afshartous, David <d.afshartous at vanderbilt.edu<mailto:d.afshartous at vanderbilt.edu>> wrote:
>>>>>
>>>>> All,
>>>>> Below is an R-lab problem from Ch2 of Statistics and Data Analysis for Financial Engineering (Ruppert, 2010). ? The R code runs okay but the answer seems strange. ? Any hints much appreciated.
>>>>> Cheers,
>>>>> David
>>>>>
>>>>> David Afshartous, Ph.D.
>>>>> Research Associate Professor
>>>>> PSTAT?: ASA Accredited Professional Statistician
>>>>> Department of Biostatistics
>>>>> Vanderbilt University Medical Center
>>>>>
>>>>>
>>>>> ## suppose Hedge fund owns $1,000,000 of stock and used $50,000 capital and
>>>>> ## $950,000 borrowed money for the purchase.
>>>>> ## Daily log returns on the stock have a mean of 0.05/year and SD of 0.23/year,
>>>>> ## which can be converted to per trading day by dividing by 253 and sqrt(253)
>>>>>
>>>>> ## the hedge fund will sell the stock for a profit of at least $100,000 if the value
>>>>> ## of the stock rises to at least $1,100,000 at the end of one of the first 100 trading days,
>>>>> ## sell it for a loss if the value falls below $950,000 at the end of one of the first
>>>>> ## 100 trading days, or sell after 100 trading days if the closing price has stayed between
>>>>> ## $950,000 and $1,1000,000.
>>>>>
>>>>> ## PROBLEM 7: What is the expected return? When answering this question, remember
>>>>> ## that only $50,000 was invested. ?Also, the units of return are time, e.g.,
>>>>> ## one can express a return as a daily return or a weekly return. ?Therefore,
>>>>> ## one must keep track of how long the hedge fund holds its position before selling
>>>>>
>>>>> The code below simulates whether value falls below 950,000, goes above 1,1000,000, or stays between. The amount lost/gained in the 1st/2nd scenario is a constant, whereas the amount lost/gained in the third scenario is random.
>>>>>
>>>>> ### simulation code; written for readability as opposed to speed
>>>>> niter = 10000 ? ? ## number of iterations
>>>>> below = rep(0, niter) ? ## set up storage
>>>>> above = rep(0, niter)
>>>>> between = rep(0, niter)
>>>>> between.ending.value = NULL
>>>>> below.ending.day = NULL
>>>>> above.ending.day = NULL
>>>>> set.seed(2009)
>>>>> for (i in 1:niter) {
>>>>> ?r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
>>>>> ?logPrice = log(1e6) + cumsum(r) ?## 1e6 = initial price
>>>>> ?minLogP = min(logPrice) ?## min price over next 45 days
>>>>> ?maxLogP = max(logPrice) ?## min price over next 45 days
>>>>> ?crossBelowLogP.day = ifelse( minLogP < log(950000), ?min(which(logPrice < log(950000))), 101) ## 101 means doesn't cross
>>>>> ?crossAboveLogP.day = ifelse( maxLogP > log(1100000), ?min(which(logPrice > log(1100000))), 101)
>>>>> ?if ( (minLogP >= log(950000)) & (maxLogP <= log(1100000)) ) { ? ## Neither cross boundary
>>>>> ? ?between[i] = 1
>>>>> ? ?between.ending.value = append(between.ending.value, exp(logPrice[100]))
>>>>> ? ?}
>>>>> ?if ?( (minLogP < log(950000)) & (maxLogP > log(1100000))) { ## Both cross
>>>>> ? ? ? ? ? ?ifelse (crossBelowLogP.day < crossAboveLogP.day, below[i] <- 1, above[i] <-1)
>>>>> ? ? ? ? ? ?ifelse (crossBelowLogP.day < crossAboveLogP.day, below.ending.day <- append(below.ending.day, crossBelowLogP.day),
>>>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? above.ending.day <- append(above.ending.day, crossAboveLogP.day))
>>>>> ? ? ? ? ?}
>>>>> ?if ( (minLogP < log(950000)) ?& (maxLogP <= log(1100000)) ?) { ? ?## Only cross below
>>>>> ? ? ? ? ? ?below[i] = 1
>>>>> ? ? ? ? ? ?below.ending.day = append(below.ending.day, crossBelowLogP.day)
>>>>> ? ? ? ? ?}
>>>>> ?if ( (minLogP >= log(950000)) ?& (maxLogP > log(1100000)) ?) { ? ?## Only cross above
>>>>> ? ? ? ? ? ?above[i] = 1
>>>>> ? ? ? ? ? ?above.ending.day = append(above.ending.day, crossAboveLogP.day)
>>>>> ? ? ? ? ?}
>>>>> }
>>>>> mean(above) ?## this will give the probability of the value crossing the above threshold
>>>>>
>>>>> When annualizing returns, the day in which a boundary needs to be accounted for. ? ?The following code calculates the overall expected return by conditioning on each scenario:
>>>>>
>>>>> # cross above: always make constant 100,000 based on initial investment of 50,000
>>>>> # P_t/P_t-1 = 100,000/50,000 = 2 = gross return --> net return = 2 - 1 = 1
>>>>> ret.above = (1 + 1)^(365/(above.ending.day)) ?- 1 ? ?### annualized
>>>>>
>>>>> # cross below: always lose constant 50,000 based on initial investment of 50,000
>>>>> # P_t/P_t-1 = 50,000/50,000 = 1 = gross return --> net return = 1 - 1 = 0
>>>>> ret.below = 0
>>>>>
>>>>> ## betwen: final value depends on realized value on 100th day
>>>>> # P_t/P_t-1 = between.ending.value/50,000 = --> net return = gross return ?- 1
>>>>>
>>>>> net = ifelse(between.ending.value < 1000000,
>>>>> ? ? ? ? ? ? ? ? ? (1000000 - between.ending.value)/50000 - 1, ?## net return, gain
>>>>> ? ? ? ? ? ? ? ? ? (between.ending.value ?- 1000000)/50000 - 1) ? ## net return, loss
>>>>>
>>>>> ret.between = (1 + net)^(365/100) - 1
>>>>>
>>>>> exp.return = mean(above)*mean(ret.above) ? + mean(below)*mean(ret.below) ? + mean(between) * mean(ret.between)
>>>>> 8.669104e+50???
>>>>>
>>>>> _______________________________________________
>>>>> R-SIG-Finance at r-project.org<mailto:R-SIG-Finance at r-project.org> mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>>>
>>>>>
>>>
>>>
>>
>>


From david.r.afshartous at Vanderbilt.Edu  Mon Dec 26 21:48:35 2011
From: david.r.afshartous at Vanderbilt.Edu (David Afshartous)
Date: Mon, 26 Dec 2011 14:48:35 -0600
Subject: [R-SIG-Finance] Simulated expected return for a hedge fund
In-Reply-To: <CA+xi=qZGqXwV+C_d0sswQgbw4BBxxLSe_q7BHvued6Caam2ZUw@mail.gmail.com>
References: <2D74E06059E9184D9507A6739D10ACE5195E44A6AA@ITS-HCWNEM06.ds.Vanderbilt.edu>	<CA+xi=qZ9Wiq+wgQbrXD70msLUX9jc8DKnPtCNUKJ0fmoC-ZM+w@mail.gmail.com>	<CA+xi=qZXiQ+JnrQPuqz2cQqqhbJ=+EcyuZ7zS1e_7hQyMQ7ZFQ@mail.gmail.com>	<CA+xi=qax2kzfo-ZZOy1Ty8Va6eM5WJM_p2u2ZRh0cNFKxOL+Cw@mail.gmail.com>	<2D74E06059E9184D9507A6739D10ACE5195E44A6AB@ITS-HCWNEM06.ds.Vanderbilt.edu>	<CA+xi=qYrtz1HT1vNxZQo1G-D6PXkUo7bDDe=mHbG5dx+2V=MDw@mail.gmail.com>	<CA+xi=qZwWDUHEYOtx2Pmc+KAW1yTUZ6K0Ku1TeM-Ln4ExqRxGA@mail.gmail.com>	<2D74E06059E9184D9507A6739D10ACE5195E44A6AC@ITS-HCWNEM06.ds.Vanderbilt.edu>	<CA+xi=qZ3adb-288zY8LGNGi4FpChVP+2kT5j8cNkqDkLyd78pw@mail.gmail.com>	<2D74E06059E9184D9507A6739D10ACE5195E44A6AE@ITS-HCWNEM06.ds.Vanderbilt.edu>	<CA+xi=qbid1vYve7KcpF6Otssj7TeQ6FsADr981MrZ66auBdfEQ@mail.gmail.com>
	<CA+xi=qZGqXwV+C_d0sswQgbw4BBxxLSe_q7BHvued6Caam2ZUw@mail.gmail.com>
Message-ID: <4EF8DDA3.1010405@vanderbilt.edu>

Garrett,

You are correct that the Hedge Fund problem has the same dynamic as your 
example and this explains why the expected profit (future value) is 
positive while the expected profit per day is negative; the positive 
values get downweighted more by the larger number of days it takes to 
obtain them.

I suppose one could use the risk free rate r to calculate the present 
value of the gain/loss each iteration and hence the expected present 
value profit, thus multiplying each profit by exp( - r * num.days/365) 
instead of dividing by the number of days.  Given the short time period 
and a small risk free rate, my guess is that the expected present value 
profit is positive.  In practical terms,  perhaps this is the number 
that is important if the strategy is followed once, whereas the per day 
metric is more important if the strategy is continuously rolled over.

Cheers,
David


On 12/26/2011 10:20 AM, G See wrote:
> forgot to copy the list
>
> On Mon, Dec 26, 2011 at 10:19 AM, G See<gsee000 at gmail.com>  wrote:
>> David,
>>
>> The problem is that it takes longer to win than to lose.
>>
>> Imagine a game where there is a 50% chance you will lose $100 on day
>> 1, and a 50% chance you'll make $100 on day 100.
>>
>> Ignoring the time value of money (that a dollar today is worth more
>> than a dollar in the future), The expected value of the game is 0
>> (=0.5*-100 + 0.5*100).
>>
>> However, if you lose, you will lose $100 per day on average, but if
>> you win, you will only make $1 per day on average.  You may think that
>> if you lose, you lose $100 on day one and 0 for each of the next 99
>> days.  But, that isn't the case, because if you lose (and have more
>> money), you could play again the second day.
>>
>> Our Hedge Fund problem is similar because it takes less time to lose
>> 50k than it takes to make 100k.
>>
>> That said, I found copy of the book, and you are correct that the
>> author is asking for the expected profit from the whole game.
>>
>> Garrett
>>
>> On Sun, Dec 25, 2011 at 6:31 PM, Afshartous, David
>> <d.afshartous at vanderbilt.edu>  wrote:
>>> Hi Garrett,
>>>
>>> Thank you very much for your reply.    Fixing the typo with the negative sign, my updated expected
>>> profit calculation yields:
>>>
>>> ## expected profit
>>>> mean(above)*mean(profit.above) + mean(below)*mean(profit.below) + mean(between)*mean(profit.between)
>>> [1] 9433.936
>>>
>>> This value seems to make sense given that the probability of crossing the upper boundary is .39 = mean (above), and the
>>> probability of the crossing the lower boundary is .58 = mean(below), and these events yield gains/losses of approximately
>>> 100k and -50k.     I'm not sure I see the need to account for how many days it took to earn/lose the money and
>>> calculate the expected profit per day, since the above calculation determines the expected amount of money that this
>>> strategy will yield?   And isn't this what is ultimately of interest?   At any rate, assuming this is correct, it's somewhat troubling that this number is positive while
>>> the expected profit per day is negative.
>>>
>>> Cheers,
>>> David
>>>
>>>
>>>
>>> ________________________________________
>>> From: G See [gsee000 at gmail.com]
>>> Sent: Sunday, December 25, 2011 2:25 PM
>>> To: Afshartous, David
>>> Cc: r-sig-finance at r-project.org
>>> Subject: Re: [R-SIG-Finance] Simulated expected return for a hedge fund
>>>
>>> Hi David,
>>>
>>> 2 things.  First, the second term of your expected profit expression
>>> should have a positive sign.  i.e.
>>> mean(above)*mean(profit.above) + mean(below)*mean(profit.below) +
>>> mean(between)*mean(profit.between)
>>>
>>> Second, your expected profit calculation does not take into account
>>> how many days it took you to earn/lose that money.  If you do that,
>>> our answers agree
>>>
>>>> prof.above<- profit.above/above.ending.day
>>>> prof.below<- profit.below/below.ending.day
>>>> prof.between<- profit.between/100
>>>> mean(above)*mean(prof.above) + mean(below)*mean(prof.below) + mean(between)*mean(prof.between)
>>> [1] -1098.853
>>>
>>> However, just because our answers agree doesn't mean they are right.
>>> :-)  I would be interested to learn what answer the author came up
>>> with.
>>>
>>> Cheers,
>>> Garrett
>>>
>>> On Sun, Dec 25, 2011 at 1:45 PM, Afshartous, David
>>> <d.afshartous at vanderbilt.edu>  wrote:
>>>> Hi Garrett,
>>>>
>>>> Thanks for looking into the problem.   You are correct, one has to be careful to note that portfolio value for early sells will not be exactly equal to the boundary values that trigger the early sells (and also that -100% loss conversion to daily return is an issue).
>>>>
>>>> I corrected my code and now obtain the same expected return as your code to within 5 decimal places.   However, I still obtain a positive value for the expected profit.  My calculation is a conditional probability calculation whereas your calculation is direct.   I doubt that such big difference in expected profit could be due to rounding error of such a process but at the same time we obtain the same expected return.    Code below:
>>>>
>>>> niter = 10000     ## number of iterations
>>>> below = rep(0, niter)   ## set up storage
>>>> above = rep(0, niter)
>>>> between = rep(0, niter)
>>>> between.ending.value = NULL
>>>> below.ending.day = NULL
>>>> above.ending.day = NULL
>>>> profit.above = NULL
>>>> profit.below = NULL
>>>> profit.between = NULL
>>>> set.seed(2009)
>>>> for (i in 1:niter) {
>>>>   r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
>>>>   logPrice = log(1e6) + cumsum(r)  ## 1e6 = initial price
>>>>   minLogP = min(logPrice)  ## min price over next 45 days
>>>>   maxLogP = max(logPrice)  ## min price over next 45 days
>>>>   crossBelowLogP.day = ifelse( minLogP<  log(950000),  min(which(logPrice<  log(950000))), 101) ## 101 means doesn't cross
>>>>   crossAboveLogP.day = ifelse( maxLogP>  log(1100000),  min(which(logPrice>  log(1100000))), 101)
>>>>   if ( (minLogP>= log(950000))&  (maxLogP<= log(1100000)) ) {   ## Neither cross boundary
>>>>      between[i] = 1
>>>>      between.ending.value = append(between.ending.value, exp(logPrice[100]))
>>>>      profit.between =   append(profit.between, between.ending.value - 1000000)
>>>>      }
>>>>   if  ( (minLogP<  log(950000))&  (maxLogP>  log(1100000))) { ## Both cross
>>>>              ifelse (crossBelowLogP.day<  crossAboveLogP.day, below[i]<- 1, above[i]<-1)
>>>>              ifelse (crossBelowLogP.day<  crossAboveLogP.day, below.ending.day<- append(below.ending.day, crossBelowLogP.day),
>>>>                                                         above.ending.day<- append(above.ending.day, crossAboveLogP.day))
>>>>              ifelse (crossBelowLogP.day<  crossAboveLogP.day, profit.below<-   append(profit.below, exp(logPrice[crossBelowLogP.day]) - 1000000),
>>>>                                                         profit.above<-      append(profit.above, exp(logPrice[crossAboveLogP.day]) - 1000000))
>>>>            }
>>>>   if ( (minLogP<  log(950000))&  (maxLogP<= log(1100000))  ) {    ## Only cross below
>>>>              below[i] = 1
>>>>              below.ending.day = append(below.ending.day, crossBelowLogP.day)
>>>>              profit.below =   append(profit.below, exp(logPrice[crossBelowLogP.day]) - 1000000)
>>>>            }
>>>>   if ( (minLogP>= log(950000))&  (maxLogP>  log(1100000))  ) {    ## Only cross above
>>>>              above[i] = 1
>>>>              above.ending.day = append(above.ending.day, crossAboveLogP.day)
>>>>              profit.above =  append(profit.above, exp(logPrice[crossAboveLogP.day]) - 1000000)
>>>>            }
>>>> }
>>>>
>>>> ## expected profit
>>>> mean(above)*mean(profit.above) - mean(below)*mean(profit.below) + mean(between)*mean(profit.between)
>>>> [1] 77227.87
>>>>
>>>>
>>>> ret.above = (profit.above/50000)/above.ending.day  ## daily return, return wont' be exactly 1 since P_t won't be exactly equal to 100,000
>>>> ret.below = (profit.below/50000)/below.ending.day  ## daily return
>>>> ret.between = (profit.between/50000)/100  ## daily return
>>>> ## exp.return:
>>>> mean(above)*mean(ret.above)   + mean(below)*mean(ret.below)   + mean(between) * mean(ret.between)
>>>> [1] -0.02197705
>>>>
>>>>
>>>> ________________________________________
>>>> From: G See [gsee000 at gmail.com]
>>>> Sent: Sunday, December 25, 2011 12:44 PM
>>>> To: Afshartous, David
>>>> Subject: Re: [R-SIG-Finance] Simulated expected return for a hedge fund
>>>>
>>>> BTW,
>>>>
>>>> I get a negative value for expected Profit also
>>>>
>>>>> niter = 10000     ## number of iterations
>>>>> set.seed(2009)
>>>>> PnLs<- rep(0, niter)
>>>>> for (i in 1:niter) {
>>>> +     r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
>>>> +     SV<- 1e6 * exp(cumsum(r)) #StockValue
>>>> +     daily.PnL<- if (min(SV)>  950000&&  max(SV)<  1100000) {
>>>> +         #between
>>>> +         SellPrice<- tail(SV, 1) # Sell on last day (100 returns in
>>>> the future)
>>>> +         PnL<- (SellPrice - 1000000)
>>>> +         PnL / 100  # average daily PnL
>>>> +     } else {
>>>> +         # Sell at first value that is less than 950000 or greater than 1100000
>>>> +         SellPrice<- head(SV[SV<  950000 | SV>  1100000], 1)
>>>> +         days.held<- head(which(SV == SellPrice), 1) # first place
>>>> that StockValue equals SellPrice
>>>> +         #if (SellPrice<  950000) SellPrice<- 950000
>>>> +         PnL<- (SellPrice - 1000000)
>>>> +         PnL / days.held
>>>> +     }
>>>> +     PnLs[i]<- daily.PnL
>>>> + }
>>>>> mean(PnLs)
>>>> [1] -1098.661
>>>>> mean(PnLs) / 50000
>>>> [1] -0.02197322
>>>>
>>>> On Sat, Dec 24, 2011 at 10:31 PM, G See<gsee000 at gmail.com>  wrote:
>>>>> David,
>>>>>
>>>>> I attempted to work the problem myself, and have concluded that it is
>>>>> a poor question. :-P
>>>>> The question says that you will sell for a profit of _at least_
>>>>> $100,000, if the value of the stock
>>>>> rises to at least $1,100,000 or sell for a loss if the value falls
>>>>> below $950000.
>>>>>
>>>>> I interpret that to mean that on the first day that the stock value is
>>>>> at or above 1.1 million, I sell
>>>>> at the prevailing price (which may, and probably will, be higher than
>>>>> 1.1 million).  Likewise, I think
>>>>> it says that I will sell on the first day that the value of the stock
>>>>> is below $950,000.  But, if the
>>>>> stock gets to $950,000, I'm out of capital.  It is unlikely that the
>>>>> value of the stock will be
>>>>> exactly $950,000, which means that I would be losing more than 100
>>>>> percent of my capita.  I
>>>>> don't know how to convert an N-day return that is less than negative
>>>>> 100 percent to either a daily
>>>>> or annual return.  So, I just divided it by the number of days.  i.e.
>>>>> if you lose 110% over 10 days
>>>>> then you're losing 11% per day on average. (But, I'm aware that that
>>>>> doesn't make sense)
>>>>>
>>>>> My attempt is below; I came up with an "answer" of -0.02197322
>>>>>
>>>>>
>>>>> niter = 10000     ## number of iterations
>>>>> set.seed(2009)
>>>>> returns<- rep(0, niter)
>>>>> for (i in 1:niter) {
>>>>>      r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
>>>>>      SV<- 1e6 * exp(cumsum(r)) #StockValue
>>>>>      daily.ret<- if (min(SV)>  950000&&  max(SV)<  1100000) {
>>>>>          #between
>>>>>          SellPrice<- tail(SV, 1) # Sell on last day (100 returns in the future)
>>>>>          ret<- (SellPrice - 1000000) / 50000
>>>>>          ret / 100  # average daily return
>>>>>      } else {
>>>>>          # Sell at first value that is less than 950000 or greater than 1100000
>>>>>          SellPrice<- head(SV[SV<  950000 | SV>  1100000], 1)
>>>>>          days.held<- head(which(SV == SellPrice), 1) # first place
>>>>> that StockValue equals SellPrice
>>>>>          #if (SellPrice<  950000) SellPrice<- 950000
>>>>>          ret<- (SellPrice - 1000000) / 50000
>>>>>          ret / days.held
>>>>>      }
>>>>>      returns[i]<- daily.ret
>>>>> }
>>>>> mean(returns)
>>>>> # -0.02197322
>>>>>
>>>>> HTH,
>>>>> Garrett
>>>>>
>>>>>
>>>>> On Sat, Dec 24, 2011 at 5:51 PM, Afshartous, David
>>>>> <d.afshartous at vanderbilt.edu>  wrote:
>>>>>>
>>>>>> Thanks Garrett.  I fixed that typo and also put the conditional returns in terms of daily returns and the answer now seems reasonable.   The changes to the code are:
>>>>>>
>>>>>> ret.above = 1/above.ending.day  ## daily return
>>>>>> ret.below = -1/below.ending.day
>>>>>>
>>>>>> ret.between = net/100
>>>>>>
>>>>>> which now yields:
>>>>>> exp.return = mean(above)*mean(ret.above)   + mean(below)*mean(ret.below)   + mean(between) * mean(ret.between)
>>>>>>> exp.return
>>>>>> [1] -0.03455923
>>>>>>
>>>>>> Interesting, since the expected profit is positive:
>>>>>>
>>>>>> exp.profit = mean(above)*100000 - mean(below)*50000 + mean(between)*(mean(between.ending.value) - 1000000)
>>>>>>> exp.profit
>>>>>> [1] 7530.114
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> ________________________________________
>>>>>> From: G See [gsee000 at gmail.com]
>>>>>> Sent: Saturday, December 24, 2011 1:27 PM
>>>>>> To: Afshartous, David
>>>>>> Cc: r-sig-finance at r-project.org
>>>>>> Subject: Re: [R-SIG-Finance] Simulated expected return for a hedge fund
>>>>>>
>>>>>> I'm not at a computer, but it looks like if the account value falls from 50,000 to zero, you are counting that as a 0% return instead of -100%?
>>>>>>
>>>>>> On Dec 24, 2011 12:58 PM, "G See"<gsee000 at gmail.com<mailto:gsee000 at gmail.com>>  wrote:
>>>>>>
>>>>>> Sorry, please disregard. I didn't look at your code closely.
>>>>>>
>>>>>> On Dec 24, 2011 10:55 AM, "G See"<gsee000 at gmail.com<mailto:gsee000 at gmail.com>>  wrote:
>>>>>> Hi David,
>>>>>>
>>>>>> Here is my hint:
>>>>>>
>>>>>> 1>  set.seed(2009)
>>>>>> 1>   r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
>>>>>> 1>   logPrice = log(1e6) + cumsum(r)  ## 1e6 = initial price
>>>>>> 1>  logPrice
>>>>>>   [1] 13.80340 13.80755 13.80516 13.80164 13.82105 13.79453 13.79750 13.80408 13.78316 13.77246 13.77529
>>>>>>   [12] 13.79100 13.78908 13.79427 13.79268 13.76960 13.78917 13.79897 13.80548 13.80673 13.83131 13.82956
>>>>>>   [23] 13.82829 13.83970 13.84860 13.88746 13.90191 13.89439 13.88666 13.89621 13.92104 13.91894 13.92787
>>>>>>   [34] 13.91217 13.90804 13.91452 13.92865 13.95498 13.98419 13.98820 13.99140 14.00165 13.97519 13.96530
>>>>>>   [45] 13.95029 13.95800 13.94906 13.94807 13.91299 13.90617 13.90202 13.90779 13.89517 13.88682 13.89177
>>>>>>   [56] 13.88537 13.89815 13.87475 13.86916 13.88294 13.87048 13.86705 13.87571 13.86564 13.85744 13.87504
>>>>>>   [67] 13.88990 13.88075 13.87261 13.86023 13.85191 13.85510 13.84572 13.84649 13.85447 13.83746 13.82143
>>>>>>   [78] 13.80111 13.78505 13.79430 13.81151 13.81456 13.80200 13.79527 13.80288 13.76598 13.79024 13.81018
>>>>>>   [89] 13.80240 13.77962 13.78402 13.78493 13.80514 13.79839 13.77328 13.78443 13.78491 13.77488 13.75898
>>>>>> [100] 13.74589
>>>>>>
>>>>>> That's probably not what you intended ;-)
>>>>>>
>>>>>> Garrett
>>>>>>
>>>>>> On Fri, Dec 23, 2011 at 2:43 PM, Afshartous, David<d.afshartous at vanderbilt.edu<mailto:d.afshartous at vanderbilt.edu>>  wrote:
>>>>>>
>>>>>> All,
>>>>>> Below is an R-lab problem from Ch2 of Statistics and Data Analysis for Financial Engineering (Ruppert, 2010).   The R code runs okay but the answer seems strange.   Any hints much appreciated.
>>>>>> Cheers,
>>>>>> David
>>>>>>
>>>>>> David Afshartous, Ph.D.
>>>>>> Research Associate Professor
>>>>>> PSTAT?: ASA Accredited Professional Statistician
>>>>>> Department of Biostatistics
>>>>>> Vanderbilt University Medical Center
>>>>>>
>>>>>>
>>>>>> ## suppose Hedge fund owns $1,000,000 of stock and used $50,000 capital and
>>>>>> ## $950,000 borrowed money for the purchase.
>>>>>> ## Daily log returns on the stock have a mean of 0.05/year and SD of 0.23/year,
>>>>>> ## which can be converted to per trading day by dividing by 253 and sqrt(253)
>>>>>>
>>>>>> ## the hedge fund will sell the stock for a profit of at least $100,000 if the value
>>>>>> ## of the stock rises to at least $1,100,000 at the end of one of the first 100 trading days,
>>>>>> ## sell it for a loss if the value falls below $950,000 at the end of one of the first
>>>>>> ## 100 trading days, or sell after 100 trading days if the closing price has stayed between
>>>>>> ## $950,000 and $1,1000,000.
>>>>>>
>>>>>> ## PROBLEM 7: What is the expected return? When answering this question, remember
>>>>>> ## that only $50,000 was invested.  Also, the units of return are time, e.g.,
>>>>>> ## one can express a return as a daily return or a weekly return.  Therefore,
>>>>>> ## one must keep track of how long the hedge fund holds its position before selling
>>>>>>
>>>>>> The code below simulates whether value falls below 950,000, goes above 1,1000,000, or stays between. The amount lost/gained in the 1st/2nd scenario is a constant, whereas the amount lost/gained in the third scenario is random.
>>>>>>
>>>>>> ### simulation code; written for readability as opposed to speed
>>>>>> niter = 10000     ## number of iterations
>>>>>> below = rep(0, niter)   ## set up storage
>>>>>> above = rep(0, niter)
>>>>>> between = rep(0, niter)
>>>>>> between.ending.value = NULL
>>>>>> below.ending.day = NULL
>>>>>> above.ending.day = NULL
>>>>>> set.seed(2009)
>>>>>> for (i in 1:niter) {
>>>>>>   r = rnorm(100, mean = .05/253, sd = .23/sqrt(253))
>>>>>>   logPrice = log(1e6) + cumsum(r)  ## 1e6 = initial price
>>>>>>   minLogP = min(logPrice)  ## min price over next 45 days
>>>>>>   maxLogP = max(logPrice)  ## min price over next 45 days
>>>>>>   crossBelowLogP.day = ifelse( minLogP<  log(950000),  min(which(logPrice<  log(950000))), 101) ## 101 means doesn't cross
>>>>>>   crossAboveLogP.day = ifelse( maxLogP>  log(1100000),  min(which(logPrice>  log(1100000))), 101)
>>>>>>   if ( (minLogP>= log(950000))&  (maxLogP<= log(1100000)) ) {   ## Neither cross boundary
>>>>>>     between[i] = 1
>>>>>>     between.ending.value = append(between.ending.value, exp(logPrice[100]))
>>>>>>     }
>>>>>>   if  ( (minLogP<  log(950000))&  (maxLogP>  log(1100000))) { ## Both cross
>>>>>>             ifelse (crossBelowLogP.day<  crossAboveLogP.day, below[i]<- 1, above[i]<-1)
>>>>>>             ifelse (crossBelowLogP.day<  crossAboveLogP.day, below.ending.day<- append(below.ending.day, crossBelowLogP.day),
>>>>>>                                                        above.ending.day<- append(above.ending.day, crossAboveLogP.day))
>>>>>>           }
>>>>>>   if ( (minLogP<  log(950000))&  (maxLogP<= log(1100000))  ) {    ## Only cross below
>>>>>>             below[i] = 1
>>>>>>             below.ending.day = append(below.ending.day, crossBelowLogP.day)
>>>>>>           }
>>>>>>   if ( (minLogP>= log(950000))&  (maxLogP>  log(1100000))  ) {    ## Only cross above
>>>>>>             above[i] = 1
>>>>>>             above.ending.day = append(above.ending.day, crossAboveLogP.day)
>>>>>>           }
>>>>>> }
>>>>>> mean(above)  ## this will give the probability of the value crossing the above threshold
>>>>>>
>>>>>> When annualizing returns, the day in which a boundary needs to be accounted for.    The following code calculates the overall expected return by conditioning on each scenario:
>>>>>>
>>>>>> # cross above: always make constant 100,000 based on initial investment of 50,000
>>>>>> # P_t/P_t-1 = 100,000/50,000 = 2 = gross return -->  net return = 2 - 1 = 1
>>>>>> ret.above = (1 + 1)^(365/(above.ending.day))  - 1    ### annualized
>>>>>>
>>>>>> # cross below: always lose constant 50,000 based on initial investment of 50,000
>>>>>> # P_t/P_t-1 = 50,000/50,000 = 1 = gross return -->  net return = 1 - 1 = 0
>>>>>> ret.below = 0
>>>>>>
>>>>>> ## betwen: final value depends on realized value on 100th day
>>>>>> # P_t/P_t-1 = between.ending.value/50,000 = -->  net return = gross return  - 1
>>>>>>
>>>>>> net = ifelse(between.ending.value<  1000000,
>>>>>>                    (1000000 - between.ending.value)/50000 - 1,  ## net return, gain
>>>>>>                    (between.ending.value  - 1000000)/50000 - 1)   ## net return, loss
>>>>>>
>>>>>> ret.between = (1 + net)^(365/100) - 1
>>>>>>
>>>>>> exp.return = mean(above)*mean(ret.above)   + mean(below)*mean(ret.below)   + mean(between) * mean(ret.between)
>>>>>> 8.669104e+50???
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-SIG-Finance at r-project.org<mailto:R-SIG-Finance at r-project.org>  mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>>>>
>>>>>>
>>>>
>>>


-- 
David Afshartous, Ph.D.
Research Associate Professor
PSTAT?: ASA Accredited Professional Statistician
Department of Biostatistics
Vanderbilt University Medical Center


From algotr8der at gmail.com  Mon Dec 26 22:13:26 2011
From: algotr8der at gmail.com (algotr8der)
Date: Mon, 26 Dec 2011 13:13:26 -0800 (PST)
Subject: [R-SIG-Finance] TTR, volatility(),
	historical volatility calculation methods differ
Message-ID: <1324934006271-4235583.post@n4.nabble.com>

1) Garman-Klass volatility as defined by Euan Sinclair in his book
"volatility trading" on page 23:

http://oneryng.com/library/ViolatilityTrading.pdf

            Cl1 <- lag(OHLC[, 4])
             s <- sqrt(N/n * runSum(0.5 * log(OHLC[, 2]/OHLC[, 3])^2 - (2 *
log(2) - 1) * log(OHLC[, 4]/Cl1)^2, n))

In the volatility function in the TTR package has (defined by the sitmo
website):

http://web.archive.org/web/20081224134053/http://www.sitmo.com/eq/402

        s <- sqrt(N/n * runSum(0.5 * log(OHLC[, 2]/OHLC[, 3])^2 - (2 *
log(2) - 1) * log(OHLC[, 4]/OHLC[, 1])^2, n))

The difference is with the last term i.e. OHLC[,1] - today's open is used in
the denominator in the TTR package rather than yesterday's close (Cl1). I
have read various documents that use the same definition as Dr. Sinclair.
Which is correct and why? 

2) Yang Zhang volatility as defined by Euan Sinclair in his book "volatility
trading"  on page 24-25 :

         k <- 0.34/(1 + (n + 1)/(n - 1))
        s2o <- N/(n - 1) * runSum(log(OHLC[, 1]/Cl1), n))^2
        s2c <- N/(n - 1) * runSum(log(OHLC[, 4]/OHLC[, 1]), n))^2
        s2rs <- volatility(OHLC = OHLC, n = n, calc = "rogers.satchell", N =
N, ...)
        s <-  sqrt(s2o + k * s2c + (1 - k) * (s2rs)^2, n)


But the volatility function in the TTR package has:

http://web.archive.org/web/20081224134117/http://www.sitmo.com/eq/417

            k <- 0.34/(1 + (n + 1)/(n - 1))
        s2o <- N/(n - 1) * runSum(log(OHLC[, 1]/Cl1) - 1/n * 
            runSum(log(OHLC[, 1]/Cl1), n))^2
        s2c <- N/(n - 1) * runSum(log(OHLC[, 4]/OHLC[, 1]) - 
            1/n * runSum(log(OHLC[, 4]/OHLC[, 1]), n))^2
        s2rs <- volatility(OHLC = OHLC, n = n, calc = "rogers.satchell", 
            N = N, ...)
        s <- s2o + k * s2c + (1 - k) * s2rs

There are multiple differences - firstly the mean of the uo and uc are not
present in Dr. Sinclair's version and moreover the last term in the TTR
package seems to add a standard deviation (s2rs) with 2 variance
calculations (s2c and s2o).  

I would greatly appreciate if someone can comment on which versions are
correct.  Thank you. 

> sessionInfo()
R version 2.13.0 (2011-04-13)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] C/en_US.UTF-8/C/C/C/C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] TTR_0.21-0 xts_0.8-0  zoo_1.6-5 

loaded via a namespace (and not attached):
[1] grid_2.13.0     lattice_0.19-26 tools_2.13

--
View this message in context: http://r.789695.n4.nabble.com/TTR-volatility-historical-volatility-calculation-methods-differ-tp4235583p4235583.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From josh.m.ulrich at gmail.com  Mon Dec 26 23:22:46 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 26 Dec 2011 16:22:46 -0600
Subject: [R-SIG-Finance] TTR, volatility(),
 historical volatility calculation methods differ
In-Reply-To: <1324934006271-4235583.post@n4.nabble.com>
References: <1324934006271-4235583.post@n4.nabble.com>
Message-ID: <CAPPM_gQfEGyNAOT5OU8R+_+mk6-18PW9kR_AKsfKAGcz5jo-Aw@mail.gmail.com>

On Mon, Dec 26, 2011 at 3:13 PM, algotr8der <algotr8der at gmail.com> wrote:
> 1) Garman-Klass volatility as defined by Euan Sinclair in his book
> "volatility trading" on page 23:
>
> http://oneryng.com/library/ViolatilityTrading.pdf
>
> ? ? ? ? ? ?Cl1 <- lag(OHLC[, 4])
> ? ? ? ? ? ? s <- sqrt(N/n * runSum(0.5 * log(OHLC[, 2]/OHLC[, 3])^2 - (2 *
> log(2) - 1) * log(OHLC[, 4]/Cl1)^2, n))
>
> In the volatility function in the TTR package has (defined by the sitmo
> website):
>
> http://web.archive.org/web/20081224134053/http://www.sitmo.com/eq/402
>
> ? ? ? ?s <- sqrt(N/n * runSum(0.5 * log(OHLC[, 2]/OHLC[, 3])^2 - (2 *
> log(2) - 1) * log(OHLC[, 4]/OHLC[, 1])^2, n))
>
> The difference is with the last term i.e. OHLC[,1] - today's open is used in
> the denominator in the TTR package rather than yesterday's close (Cl1). I
> have read various documents that use the same definition as Dr. Sinclair.
> Which is correct and why?
>
> 2) Yang Zhang volatility as defined by Euan Sinclair in his book "volatility
> trading" ?on page 24-25 :
>
> ? ? ? ? k <- 0.34/(1 + (n + 1)/(n - 1))
> ? ? ? ?s2o <- N/(n - 1) * runSum(log(OHLC[, 1]/Cl1), n))^2
> ? ? ? ?s2c <- N/(n - 1) * runSum(log(OHLC[, 4]/OHLC[, 1]), n))^2
> ? ? ? ?s2rs <- volatility(OHLC = OHLC, n = n, calc = "rogers.satchell", N =
> N, ...)
> ? ? ? ?s <- ?sqrt(s2o + k * s2c + (1 - k) * (s2rs)^2, n)
>
>
> But the volatility function in the TTR package has:
>
> http://web.archive.org/web/20081224134117/http://www.sitmo.com/eq/417
>
> ? ? ? ? ? ?k <- 0.34/(1 + (n + 1)/(n - 1))
> ? ? ? ?s2o <- N/(n - 1) * runSum(log(OHLC[, 1]/Cl1) - 1/n *
> ? ? ? ? ? ?runSum(log(OHLC[, 1]/Cl1), n))^2
> ? ? ? ?s2c <- N/(n - 1) * runSum(log(OHLC[, 4]/OHLC[, 1]) -
> ? ? ? ? ? ?1/n * runSum(log(OHLC[, 4]/OHLC[, 1]), n))^2
> ? ? ? ?s2rs <- volatility(OHLC = OHLC, n = n, calc = "rogers.satchell",
> ? ? ? ? ? ?N = N, ...)
> ? ? ? ?s <- s2o + k * s2c + (1 - k) * s2rs
>
> There are multiple differences - firstly the mean of the uo and uc are not
> present in Dr. Sinclair's version and moreover the last term in the TTR
> package seems to add a standard deviation (s2rs) with 2 variance
> calculations (s2c and s2o).
>
> I would greatly appreciate if someone can comment on which versions are
> correct. ?Thank you.
>
The calculations in most recent revisions on R-forge match the
original papers.  I can't comment on Euan Sinclair's calculations.

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com


From matt at considine.net  Mon Dec 26 23:34:54 2011
From: matt at considine.net (Matt Considine)
Date: Mon, 26 Dec 2011 17:34:54 -0500
Subject: [R-SIG-Finance] Accessing the output of the MINE routine
Message-ID: <4EF8F68E.9080803@considine.net>

I wanted to work in R with the output of the MINE routine found here
   http://www.exploredata.net
and after awhile came up with the code below.  It takes the output file 
generated and allows one to work with the various columns as matrices.  
Better R programmers than me will wince at the code, so hopefully if 
someone has a more elegant way of accomplishing the same task they will 
share it.

#needed for MINE routine
require(rJava)
#load market data
require(PortfolioAnalytics)
data(indexes)
#write CSV file of data to current working directory
datafilename <- "indexes.csv"
write.table(indexes, datafilename, sep=",", col.names=TRUE,
row.names=FALSE, quote=FALSE, na="NA")
#read MINE R code
source.with.encoding('MINE.r', encoding='UTF-8')
#run MINE routine on data
MINE(datafilename,"all.pairs")
#read output of MINE routine
#file name could be figured out algorithmically
#data is sorted in descending order of MIC variable
#output is half of a square symmetric matrix, excluding diagonal
#there are 9 columns, 7 of which are various stats
outputfilename <- paste(datafilename,",B=n^0.6,k=15,Results.csv",sep="")
#or outputfilename <- sprintf("%s,B=n^0.6,k=15,Results.csv",datafilename)
x<-read.csv(outputfilename,header=TRUE)
#isolate MIC data and names of variable pairs for this example
#figure out what variables go where based on frequency and knowing
#  it is a half of a symmetric matrix
m1<-apply(x,2,table)
#isolate row/col frequencies as a matrix.  we need to look at
# both to get the complete list of pairs and their respective frequencies
m2x<-as.matrix(m1$X.var)
m2y<-as.matrix(m1$Y.var)
#get frequencies
testx<-as.matrix(m2x[x$X.var])
testy<-as.matrix(m2y[x$Y.var])
#add the frequencies to the original data
x2<-cbind(x,testx,testy)
#sort rows based on frequency of second then first variable
x2<-x2[order(x2$testy,decreasing=FALSE),]
fx <- x2[order(x2$testx,decreasing=TRUE),]
#fx is now sorted in decreasing frequency of col testvec and
#  within those groups, ascending frequency of testvec2
#create the correct sized matrix
z<-diag(length(m2x)+1)
#Now extract the data we want, in this case column 3 (MIC)
z[row(z)>col(z)]<-fx[,3]
z<-z+t(z)
diag(z)<-1
#create col/row names
fxnames<-c(names(m2x[order(m2x,decreasing=TRUE),]),
            labels(m2y[order(m2y,decreasing=TRUE),][1]))
colnames(z)<-fxnames
rownames(z)<-fxnames
z

Hope this helps someone,
Matt


From fin_engr at hotmail.com  Tue Dec 27 05:31:03 2011
From: fin_engr at hotmail.com (financial engineer)
Date: Mon, 26 Dec 2011 23:31:03 -0500
Subject: [R-SIG-Finance] ranking by stats
Message-ID: <COL118-W516A26F05B2C4DDCF8C715EFAF0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111226/95f668e0/attachment.pl>

From jbreit at nexgo.de  Tue Dec 27 13:26:54 2011
From: jbreit at nexgo.de (Joachim Breit)
Date: Tue, 27 Dec 2011 13:26:54 +0100
Subject: [R-SIG-Finance] Option valuation for arbitrary distribution
 using monte carlo simulation
In-Reply-To: <4EF49FB1.2050501@burns-stat.com>
References: <4ECBA86C.4030604@nexgo.de>
	<1321975833682-4096122.post@n4.nabble.com>
	<A682FFE47602644E9D3DEECDD6F832978363FD@SN2PRD0302MB136.namprd03.prod.outlook.com>
	<4ECCFD36.3050607@nexgo.de>
	<1322064047703-4100184.post@n4.nabble.com>
	<1322135953099-4103558.post@n4.nabble.com>
	<4ECE33D4.7080803@nexgo.de>
	<1322139845476-4103714.post@n4.nabble.com>
	<4ECE6082.6090202@nexgo.de>
	<1322163826.20917.5.camel@brian-desktop>
	<CA+FQezXD8Xf03EdVm8pjeN4SCF14Wv-dx7sX8Psu3wR-aNg4TA@mail.gmail.com>
	<4EF4974B.9020200@nexgo.de> <4EF49FB1.2050501@burns-stat.com>
Message-ID: <4EF9B98E.9070707@nexgo.de>

Thank you, Patrick. That was indeed a huge speed-up. I can now easily do 
the monte carlo simulation with 2e6 trials and the calculated option 
value seems quite stable:

1e5 trials --> option values 2.481841, 2.464703, 2.505218
1e6 trials --> 2.491286, 2.502324, 2.491899, 2.495442
2e6 trials --> 2.493493, 2.495717

--------------------------------
library("fImport")
library('fOptions')
library("rgenoud")
msft = 
yahooImport(query="MSFT&a=00&b=4&c=1999&d=03&e=9&f=1999&ignore=.csv",file = 
"msft", source = "http://ichart.finance.yahoo.com/table.csv?", save = TRUE)

cl = msft at data[,"Close"]   ### unadjusted close prices
cl[10:67] = cl[10:67]/2    ### a 2:1 split on 1999-03-29

ret = cl[1:66] /cl[2:67] - 1   ### the returns
logret = log(1+ret)            ### log returns
vola = sd(logret) * sqrt(252)    ###  0.4091751
bsm = GBSOption(TypeFlag = "p", S = 90, X = 80, Time = 63/252, r = 
log(1+0.08), b = log(1+0.08), sigma = vola)@price  #### 2.577398 (just 
to compare)

rf = .000317   ## don't know where this comes from in Winston's paper;
                ## should be 1.08^(1/252)-1 = 0.0003054476, right?

meanutil <- function (alpha) {
x = log(alpha * (1 + ret) + (1 - alpha) * (1 + rf))  ### portf. utility
x[which(is.nan(x))] = -100000    ### correct for ln(x<0) undefined
x = mean(x)
return(x)
}

optalpha = genoud(meanutil, nvars = 1, max = TRUE, pop.size = 1000)$par
### the optimal portfolio under utility function ln(x)

portret = optalpha * (1 + ret) + (1 - optalpha) * (1 + rf)
## the optimal portfolio returns (in the sense of: daily end wealth)

num = (1 / length(ret)) * (1 / portret)
rnprob = num/sum(num)  ### the risk neutral probabilities

sampmat <- array(sample(logret,    size=63 * 2e6, replace=TRUE, 
prob=rnprob), c(63, 2e6))   ### array with 63 rows ans 2000000 columns
samplret <- colSums(sampmat)   #### calc sum for each column
ov = pmax(0, 80 - 90 * exp(samplret))
mov = 1/1.08^(63/252) * mean(ov) ### gecheckt, dass da dasselbe 
rauskommt wie bei der Schleife!!!
rm(sampmat, samplret, ov)



Am 23.12.2011 16:35, schrieb Patrick Burns:
> Joachim,
>
> I'm guessing that you could get
> some better speed by doing the
> 'sample' call all at once, do it
> with 'logret' instead of 'ret'
> and sum them efficiently. Something
> like:
>
> sampmat <- array(sample(logret,
> size=63 * 1e5, replace=TRUE,
> prob=rnprob), c(63, 1e5))
>
> samplret <- colSums(sampmat)
>
> # then transform to simple returns
> # and use 'pmax' instead of 'max'
>
> If the matrix is too large for your
> memory, you could do it in a few
> blocks.
>


From brian at braverock.com  Tue Dec 27 13:46:48 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 27 Dec 2011 06:46:48 -0600
Subject: [R-SIG-Finance] ranking by stats
In-Reply-To: <COL118-W516A26F05B2C4DDCF8C715EFAF0@phx.gbl>
References: <COL118-W516A26F05B2C4DDCF8C715EFAF0@phx.gbl>
Message-ID: <1324990008.11817.12.camel@brian-desktop>

On Mon, 2011-12-26 at 23:31 -0500, financial engineer wrote:
> I am running different fit distribution tests on data, using commands
> like:
> 
> fitdist(BA$price, "norm", method="mge",gof="AD")
> fitdist(BA$price, "norm", method="mge",gof="CvM")
> 
> Being not very well-versed with R, I have been saving the results into
> a file, and then using manual processes to rank the best fit based on,
> e.g. the Kolmogorov-Smirnov statistic.
> 
> Is there a way, using perhaps an existing function in R, to 'rank' the
> results based on a particular statistic, e.g. the K-S statistic. 

?sort
?order

and please direct basic R questions not directly related to finance to
the R-help list (I'm certain the answer to this question could have been
found in the archives to that list).

-- 
Brian


From harrisonmark1 at gmail.com  Wed Dec 28 21:37:04 2011
From: harrisonmark1 at gmail.com (Mark Harrison)
Date: Wed, 28 Dec 2011 14:37:04 -0600
Subject: [R-SIG-Finance] Mulitple FI Sources
Message-ID: <CAHFhaq_y_J2xiTgWRaKcTx86nGRA+KsOcm+k3PURVDHPgZL_hg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111228/1be7fbd6/attachment.pl>

From brian at braverock.com  Wed Dec 28 22:19:54 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 28 Dec 2011 15:19:54 -0600
Subject: [R-SIG-Finance] Mulitple FI Sources
In-Reply-To: <CAHFhaq_y_J2xiTgWRaKcTx86nGRA+KsOcm+k3PURVDHPgZL_hg@mail.gmail.com>
References: <CAHFhaq_y_J2xiTgWRaKcTx86nGRA+KsOcm+k3PURVDHPgZL_hg@mail.gmail.com>
Message-ID: <1325107194.17100.57.camel@brian-rcg>

With a little work, you could get things working for different symbols
to come from different data sources.  Others have been able to make this
work, though I haven't done it.  We've talked about exposing
functionality to make it easier to specify data source *by symbol* by
looking at data source properties stored with each instrument.

However, we've never contemplated having different data sources for the
same symbol.  

Patches Welcome.

Regards,

   - Brian

On Wed, 2011-12-28 at 14:37 -0600, Mark Harrison wrote:
> I am using R and RStudio versions 2.13.1 and 0.94.106 respectively.
> I am using Financial Instrument and everything is working for a single data
> source.  I have my Rprofile file setup to load packages, define my
> instruments, and set my symbol lookup souce.
> 
> # packages to load at startup
> library(quantmod)
> library(fTrading)
> 
> # currencies defined
> 
> currency("USD")
> currency("GBP")
> 
> # now exchange rates
> 
> # British Pound Rates
> exchange_rate("GBPUSD","GBP","USD")
> 
> # Set symbol lookups
> setSymbolLookup.FI("HistFX", storage_method="rda")
> 
> Once I start R or RStudio everything loads and I can run the following and
> everything works:
> getSymbols.FI("GBPUSD")
> 
> This all works for a single data source but I have multiple data sources or
> data sets that I would like to access and would like to put everything in
> my RProfile but I have yet to figure out how to make it work.
> 
> For example, I have a series of historical data files that I got from a
> vendor who is not my broker.  So I want to keep my historical data files
> separate in one directory 'HistFX' and any data I get from my broker in a
> separate folder called 'Broker' for example.
> 
> So the directories might look like:
> 
> C:\Documents\HistFX\GBPUSD
> C:\Documents\Broker\GBPUSD
> 
> I tried adding multiple lines to my RProfile with for each source but it
> looks like the last line read in is the 'live' one.  I even tried adding
> 'src=' to try and distinguish one from the other
> setSymbolLookup.FI("HistFX", storage_method="rda")
> setSymbolLookup.FI("Broker", storage_method="rda")
> 
> setSymbolLookup.FI("HistFX", storage_method="rda", src="hist")
> setSymbolLookup.FI("Broker", storage_method="rda", src='broker")
> 
> I realize the simplest solution would be to just add a setSymbolLookup.FI
> command to any script I use pointing to the data I want to use - i.e.
> historical or broker - but like I said I was trying to do this in the
> RProfile.
> 
> Any help would be appreciated.
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From algotr8der at gmail.com  Thu Dec 29 00:23:57 2011
From: algotr8der at gmail.com (algotr8der)
Date: Wed, 28 Dec 2011 15:23:57 -0800 (PST)
Subject: [R-SIG-Finance] TTR, volatility(),
 historical volatility calculation methods differ
In-Reply-To: <CAPPM_gQfEGyNAOT5OU8R+_+mk6-18PW9kR_AKsfKAGcz5jo-Aw@mail.gmail.com>
References: <1324934006271-4235583.post@n4.nabble.com>
	<CAPPM_gQfEGyNAOT5OU8R+_+mk6-18PW9kR_AKsfKAGcz5jo-Aw@mail.gmail.com>
Message-ID: <1325114637894-4241300.post@n4.nabble.com>

Issue #1 is accurate as per the original papers
Issue #2 has been fixed in v119 i.e variance terms are added together

https://r-forge.r-project.org/scm/viewvc.php/pkg/R/volatility.R?view=markup&root=ttr&pathrev=119

--
View this message in context: http://r.789695.n4.nabble.com/TTR-volatility-historical-volatility-calculation-methods-differ-tp4235583p4241300.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From algotr8der at gmail.com  Thu Dec 29 00:29:27 2011
From: algotr8der at gmail.com (algotr8der)
Date: Wed, 28 Dec 2011 15:29:27 -0800 (PST)
Subject: [R-SIG-Finance] lapply over list that has multiple xts objects
Message-ID: <1325114967940-4241306.post@n4.nabble.com>

I've been going through various examples on how to use lapply when the list
in question has multiple parts but I can't seem to get things working.

I have a function that computes open_close volatility as follows:

close_open <- function (OHLC, n = 10, N = 252, ...) 
{
    Cl1 <- lag(OHLC[, 4])
    OHLC <- try.xts(OHLC, error = as.matrix)
    s2o <- 18.59 * runSD(log(OHLC[, 1]/Cl1), n)
    reclass(s2o, OHLC)
}

I have a list object stocks that has 909 xts OHLC objects:

> class(stocks)
[1] "list"

> length(stocks)
[1] 909

I want to compute the open_close volatility for every component in the list
stock by using lapply. I have tinkered with various variants of

lapply(stocks, function(x) open_close(x, n=10, N=252, ...))

I get errors like so:

Error in FUN(X[[1L]], ...) : '...' used in an incorrect context

Any guidance on how I can achieve my goal would be greatly appreciated.
THank you.

--
View this message in context: http://r.789695.n4.nabble.com/lapply-over-list-that-has-multiple-xts-objects-tp4241306p4241306.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jeff.a.ryan at gmail.com  Thu Dec 29 04:06:25 2011
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Wed, 28 Dec 2011 21:06:25 -0600
Subject: [R-SIG-Finance] lapply over list that has multiple xts objects
In-Reply-To: <1325114967940-4241306.post@n4.nabble.com>
References: <1325114967940-4241306.post@n4.nabble.com>
Message-ID: <EEF13B4E-DD19-4195-97C3-BC5C1FF77269@gmail.com>

Don't add the ... into your call. 

open_close(x, n=10, N=252) not open_close(x, n=10, N=252, ...))

HTH
Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Dec 28, 2011, at 5:29 PM, algotr8der <algotr8der at gmail.com> wrote:

> I've been going through various examples on how to use lapply when the list
> in question has multiple parts but I can't seem to get things working.
> 
> I have a function that computes open_close volatility as follows:
> 
> close_open <- function (OHLC, n = 10, N = 252, ...) 
> {
>    Cl1 <- lag(OHLC[, 4])
>    OHLC <- try.xts(OHLC, error = as.matrix)
>    s2o <- 18.59 * runSD(log(OHLC[, 1]/Cl1), n)
>    reclass(s2o, OHLC)
> }
> 
> I have a list object stocks that has 909 xts OHLC objects:
> 
>> class(stocks)
> [1] "list"
> 
>> length(stocks)
> [1] 909
> 
> I want to compute the open_close volatility for every component in the list
> stock by using lapply. I have tinkered with various variants of
> 
> lapply(stocks, function(x) open_close(x, n=10, N=252, ...))
> 
> I get errors like so:
> 
> Error in FUN(X[[1L]], ...) : '...' used in an incorrect context
> 
> Any guidance on how I can achieve my goal would be greatly appreciated.
> THank you.
> 
> --
> View this message in context: http://r.789695.n4.nabble.com/lapply-over-list-that-has-multiple-xts-objects-tp4241306p4241306.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From tia8146 at gmail.com  Thu Dec 29 04:46:54 2011
From: tia8146 at gmail.com (Rashmi)
Date: Wed, 28 Dec 2011 22:46:54 -0500
Subject: [R-SIG-Finance] Equity in Blotter
Message-ID: <CAA=MXfWXdjF=tSak5ag_FYfzuGxNEWxRYyy-JX4Mr-6haL7mhQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111228/8d9f3dfb/attachment.pl>

From varcovar at live.com  Thu Dec 29 05:54:11 2011
From: varcovar at live.com (varcovar)
Date: Wed, 28 Dec 2011 20:54:11 -0800 (PST)
Subject: [R-SIG-Finance] Mulitple FI Sources
In-Reply-To: <CAHFhaq_y_J2xiTgWRaKcTx86nGRA+KsOcm+k3PURVDHPgZL_hg@mail.gmail.com>
References: <CAHFhaq_y_J2xiTgWRaKcTx86nGRA+KsOcm+k3PURVDHPgZL_hg@mail.gmail.com>
Message-ID: <1325134451654-4241860.post@n4.nabble.com>

Here is my 2 cents on a way to access the same symbols from multiple sources
and time frames. Instead of using the setSymbolLookup.FI() and
getSymbols.FI() functions, why not creating custom functions based on the
getSymbols() structure to access those data: getSymbols.src1(),
getSymbols.src2(), getSymbols.src3()... 

Basically, data are stored in different folders, with different format and
all the formating job is done inside each function. It eventually looks like
something like that: 

## Define instruments (or load instruments)
currency("USD")
future("GC", "USD", multiplier = 10, tick_size = 0.1)
future_series("GC_G00")
## get Gold Feb 2000 contract daily data from src1
getSymbols.src1("GC_G00")  
## get Gold Feb 2000 contract daily data from high frequency data from src2
getSymbols.src2("GC_G00", start_time = "09:30", end_time = "15:59", period =
"days", k = 1)



--
View this message in context: http://r.789695.n4.nabble.com/Mulitple-FI-Sources-tp4240947p4241860.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Thu Dec 29 12:39:57 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 29 Dec 2011 05:39:57 -0600
Subject: [R-SIG-Finance] Equity in Blotter
In-Reply-To: <CAA=MXfWXdjF=tSak5ag_FYfzuGxNEWxRYyy-JX4Mr-6haL7mhQ@mail.gmail.com>
References: <CAA=MXfWXdjF=tSak5ag_FYfzuGxNEWxRYyy-JX4Mr-6haL7mhQ@mail.gmail.com>
Message-ID: <1325158797.11817.23.camel@brian-desktop>

On Wed, 2011-12-28 at 22:46 -0500, Rashmi wrote:
> Hi.
> 
> I am exploring blotter and find it very useful. However, I have a question
> about the equity.
> 
> Let us say, I have a some code like this:
> 
>   addTxn(Portfolio = "p", Symbol = symbols, TxnDate =
> as.Date(index(stockSymbol[i])), TxnQty = 13, TxnPrice = 1000, TxnFees = 0)
> 
> ...
> initAcct(name="a", portfolios="p", initEq=12000, currency="USD",
> initDate=sDate)
> updateAcct("a",Dates=interval)
> updateEndEq("a",interval)
> PortfReturns(Account="a",Dates=interval, Portfolios="p")
> 
> 
> i.e, in the account, I start with an equity of $12000, but purchase shares
> worth $13k. Ideally, such a transaction should be prevented because I don't
> explicitly setup an account to borrow the 1k from. Second, the equity
> calculations should take into account that the money is borrowed and should
> keep track of it while calculating equity. Any thoughts on the right way to
> handle it using blotter?

Why would such a thing be prevented?  
This happens in real margin accounts all the time.

Blotter's job is to keep track of what you do and account for it.
That's all.  

If you want equity-aware position/transaction sizing, see Guy Yollin's
University of Washington lecture notes on quantstrat and blotter:

http://www.r-programming.org/papers

He has a variety of position-sizing functions that may serve as examples
for your needs.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From brian at braverock.com  Thu Dec 29 12:43:53 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 29 Dec 2011 05:43:53 -0600
Subject: [R-SIG-Finance] Mulitple FI Sources
In-Reply-To: <1325134451654-4241860.post@n4.nabble.com>
References: <CAHFhaq_y_J2xiTgWRaKcTx86nGRA+KsOcm+k3PURVDHPgZL_hg@mail.gmail.com>
	<1325134451654-4241860.post@n4.nabble.com>
Message-ID: <1325159033.11817.25.camel@brian-desktop>

On Wed, 2011-12-28 at 20:54 -0800, varcovar wrote:
> Here is my 2 cents on a way to access the same symbols from multiple sources
> and time frames. Instead of using the setSymbolLookup.FI() and
> getSymbols.FI() functions, why not creating custom functions based on the
> getSymbols() structure to access those data: getSymbols.src1(),
> getSymbols.src2(), getSymbols.src3()... 
> 
> Basically, data are stored in different folders, with different format and
> all the formating job is done inside each function. It eventually looks like
> something like that: 
> 
> ## Define instruments (or load instruments)
> currency("USD")
> future("GC", "USD", multiplier = 10, tick_size = 0.1)
> future_series("GC_G00")
> ## get Gold Feb 2000 contract daily data from src1
> getSymbols.src1("GC_G00")  
> ## get Gold Feb 2000 contract daily data from high frequency data from src2
> getSymbols.src2("GC_G00", start_time = "09:30", end_time = "15:59", period =
> "days", k = 1)

You can also call getSymbols.FI  or getSymbols.rda or getSymbols.csv
with the 'dir' argument.  This may avoid writing custom functions.

-- 
Brian


From varcovar at live.com  Thu Dec 29 13:57:55 2011
From: varcovar at live.com (varcovar)
Date: Thu, 29 Dec 2011 04:57:55 -0800 (PST)
Subject: [R-SIG-Finance] Mulitple FI Sources
In-Reply-To: <1325159033.11817.25.camel@brian-desktop>
References: <CAHFhaq_y_J2xiTgWRaKcTx86nGRA+KsOcm+k3PURVDHPgZL_hg@mail.gmail.com>
	<1325134451654-4241860.post@n4.nabble.com>
	<1325159033.11817.25.camel@brian-desktop>
Message-ID: <1325163475966-4242660.post@n4.nabble.com>

Hi Brian, 

Thanks for the tips. I actually tried that first, but one of my data sources
provides tick data and I wanted the conversion to a lower frequency to be
done inside the function - I don't know how to do it without writing a
custom function. 

--
View this message in context: http://r.789695.n4.nabble.com/Mulitple-FI-Sources-tp4240947p4242660.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From algotr8der at gmail.com  Thu Dec 29 19:41:43 2011
From: algotr8der at gmail.com (s)
Date: Thu, 29 Dec 2011 13:41:43 -0500
Subject: [R-SIG-Finance] lapply over list that has multiple xts objects
In-Reply-To: <EEF13B4E-DD19-4195-97C3-BC5C1FF77269@gmail.com>
References: <1325114967940-4241306.post@n4.nabble.com>
	<EEF13B4E-DD19-4195-97C3-BC5C1FF77269@gmail.com>
Message-ID: <4EFCB467.6030003@gmail.com>

On 12/28/11 10:06 PM, Jeff Ryan wrote:
> Don't add the ... into your call. 
>
> open_close(x, n=10, N=252) not open_close(x, n=10, N=252, ...))
>
> HTH
> Jeff
>
Thanks Jeff. That seemed to have fixed that issue. However, now I get
the following:

> lapply(stock, function(x) open_close(x, n=10, N=252))
debugging in: dimnames.xts(x)
debug: {
    .Call("dimnames_zoo", x)
}
Browse[2]>
debug: .Call("dimnames_zoo", x)
Browse[2]> c
Error in dimnames(cd) <- list(as.character(index(x)), colnames(x)) :
  'dimnames' applied to non-array

I tried to debug this but it seems internal to the lapply call. Any
idea? Appreciate the help.


> Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com
>
> www.lemnica.com
>
> On Dec 28, 2011, at 5:29 PM, algotr8der <algotr8der at gmail.com> wrote:
>
>> I've been going through various examples on how to use lapply when the list
>> in question has multiple parts but I can't seem to get things working.
>>
>> I have a function that computes open_close volatility as follows:
>>
>> close_open <- function (OHLC, n = 10, N = 252, ...) 
>> {
>>    Cl1 <- lag(OHLC[, 4])
>>    OHLC <- try.xts(OHLC, error = as.matrix)
>>    s2o <- 18.59 * runSD(log(OHLC[, 1]/Cl1), n)
>>    reclass(s2o, OHLC)
>> }
>>
>> I have a list object stocks that has 909 xts OHLC objects:
>>
>>> class(stocks)
>> [1] "list"
>>
>>> length(stocks)
>> [1] 909
>>
>> I want to compute the open_close volatility for every component in the list
>> stock by using lapply. I have tinkered with various variants of
>>
>> lapply(stocks, function(x) open_close(x, n=10, N=252, ...))
>>
>> I get errors like so:
>>
>> Error in FUN(X[[1L]], ...) : '...' used in an incorrect context
>>
>> Any guidance on how I can achieve my goal would be greatly appreciated.
>> THank you.
>>
>> --
>> View this message in context: http://r.789695.n4.nabble.com/lapply-over-list-that-has-multiple-xts-objects-tp4241306p4241306.html
>> Sent from the Rmetrics mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.


From gmonaie at gmail.com  Thu Dec 29 20:21:04 2011
From: gmonaie at gmail.com (G Lin)
Date: Thu, 29 Dec 2011 14:21:04 -0500
Subject: [R-SIG-Finance] chart.TimeSeries() with ylabel formats (percentages,
	scientific etc)
Message-ID: <CAJFvkcezjnBm=fQm8mPfWxdgJNKr1pfU1_b23su69Q=M4RsJrg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111229/35d888b9/attachment.pl>

From gsee000 at gmail.com  Fri Dec 30 01:41:27 2011
From: gsee000 at gmail.com (G See)
Date: Thu, 29 Dec 2011 18:41:27 -0600
Subject: [R-SIG-Finance]  Mulitple FI Sources
In-Reply-To: <CA+xi=qbnzJTfH3DL8AYY961_rmDiZC_wKq4m11Qi=9ejaMWXOg@mail.gmail.com>
References: <CAHFhaq_y_J2xiTgWRaKcTx86nGRA+KsOcm+k3PURVDHPgZL_hg@mail.gmail.com>
	<CA+xi=qbnzJTfH3DL8AYY961_rmDiZC_wKq4m11Qi=9ejaMWXOg@mail.gmail.com>
Message-ID: <CA+xi=qYrUdgF5GSLW5TmdbTq+6Ny4AqXNQgcHsY5PtXe0Gkxhg@mail.gmail.com>

forgot to copy the list

---------- Forwarded message ----------
From: G See <gsee000 at gmail.com>
Date: Thu, Dec 29, 2011 at 5:33 PM
Subject: Re: [R-SIG-Finance] Mulitple FI Sources
To: Mark Harrison <harrisonmark1 at gmail.com>


Mark,

You did not tell us which version of FinancialInstrument you are
using, but my guess is that it is out of date.

Also, you defined your exchange_rate backwards. ?Please see
?exchange_rate ... or the e-mail I sent you on Dec 17th ;-)

Now, I'll let you know upfront that setSymbolLookup.FI doesn't really
work. ?(more specifically, setSymbolLookup doesn't work well when you
pass it a list). ?It sort of works, but once you've used it, the
defaults you set cannot be overridden without another call to
setSymbolLookup.FI. ?Luckly, you don't really need setSymbolLookup.FI.

Before we get to that, getSymbols.FI requires a single base_dir for a
given Symbol. ?If you want to end up with a single xts object with
data from 2 different base directories, then you'll have to load the
data from each base directory separately, then rbind or merge the data
together.

If you're simply asking how to have different instruments have
different directories, one solution may be to update to the latest
version of FinancialInstrument. ?You can make multiple calls to
setSymbolLookup.FI and use the "Symbols" argument to set different
directories for different Symbols, or you can use the "src" argument
of an "instrument" call or in an "instrument_attr" call. ?(I'll
demonstrate below.)

But, as I already mentioned, I'd avoid doing that because
setSymbolLookup does not really work when it is given a list. ?So,
instead I'd simply use setSymbolLookup to specify that "FI" is the
src, and call setDefaults on getSymbols.FI. ?Here's some code to show
why.

> # Create 2 directories
> dir.create("tmpA")
> dir.create("tmpB")
> # make/save 2 different versions of data
> XXX <- xts(1:10, Sys.time()-10:1*60)
> saveSymbols.days("XXX", "tmpA")
> XXX <- xts(20:11, Sys.time()-10:1*60)
> saveSymbols.days("XXX", "tmpB")
> # Define the stock. If you use "src" arg, 'setSymbolLookup'
> # will be called. ?Don't specify "dir"
> stock("XXX", currency("USD"),
+ ? ? ? src=list(src="FI", extension='rda'))
[1] "XXX"
> getSymbols("XXX", dir='tmpA', auto.assign=FALSE)
? ? ? ? ? ? ? ? ? ?[,1]
2011-12-29 17:10:37 ? ?1
2011-12-29 17:11:37 ? ?2
2011-12-29 17:12:37 ? ?3
2011-12-29 17:13:37 ? ?4
2011-12-29 17:14:37 ? ?5
2011-12-29 17:15:37 ? ?6
2011-12-29 17:16:37 ? ?7
2011-12-29 17:17:37 ? ?8
2011-12-29 17:18:37 ? ?9
2011-12-29 17:19:37 ? 10
> getSymbols("XXX", dir='tmpB', auto.assign=FALSE)
? ? ? ? ? ? ? ? ? ?[,1]
2011-12-29 17:10:37 ? 20
2011-12-29 17:11:37 ? 19
2011-12-29 17:12:37 ? 18
2011-12-29 17:13:37 ? 17
2011-12-29 17:14:37 ? 16
2011-12-29 17:15:37 ? 15
2011-12-29 17:16:37 ? 14
2011-12-29 17:17:37 ? 13
2011-12-29 17:18:37 ? 12
2011-12-29 17:19:37 ? 11

> # Since we didn't set the global default for "dir",
> # it works. ?But,
> # If you specify "dir" with setSymbolLookup,
> # it will be used even if you provide a local arg
> setSymbolLookup.FI("tmpA", Symbols='XXX')
> getSymbols("XXX", auto.assign=FALSE)
? ? ? ? ? ? ? ? ? ?[,1]
2011-12-29 17:10:37 ? ?1
2011-12-29 17:11:37 ? ?2
2011-12-29 17:12:37 ? ?3
2011-12-29 17:13:37 ? ?4
2011-12-29 17:14:37 ? ?5
2011-12-29 17:15:37 ? ?6
2011-12-29 17:16:37 ? ?7
2011-12-29 17:17:37 ? ?8
2011-12-29 17:18:37 ? ?9
2011-12-29 17:19:37 ? 10

> getSymbols("XXX", dir='tmpB', auto.assign=FALSE) #dir arg is ignored!!!
? ? ? ? ? ? ? ? ? ?[,1]
2011-12-29 17:10:37 ? ?1
2011-12-29 17:11:37 ? ?2
2011-12-29 17:12:37 ? ?3
2011-12-29 17:13:37 ? ?4
2011-12-29 17:14:37 ? ?5
2011-12-29 17:15:37 ? ?6
2011-12-29 17:16:37 ? ?7
2011-12-29 17:17:37 ? ?8
2011-12-29 17:18:37 ? ?9
2011-12-29 17:19:37 ? 10

> # have to re-setSymbolLookup either with setSymbolLookup.FI,
> # or instrument_attr as below
> instrument_attr("XXX", "src", list(src='FI', dir='tmpB'))
> getSymbols("XXX", auto.assign=FALSE)
? ? ? ? ? ? ? ? ? ?[,1]
2011-12-29 17:10:37 ? 20
2011-12-29 17:11:37 ? 19
2011-12-29 17:12:37 ? 18
2011-12-29 17:13:37 ? 17
2011-12-29 17:14:37 ? 16
2011-12-29 17:15:37 ? 15
2011-12-29 17:16:37 ? 14
2011-12-29 17:17:37 ? 13
2011-12-29 17:18:37 ? 12
2011-12-29 17:19:37 ? 11

> # You're better off NOT providing a list to "src", and
> # instead using setDefaults on getSymbols.FI
> rm_instruments("XXX")
> stock("XXX", currency("USD"), src='FI')
[1] "XXX"
> setDefaults('getSymbols.FI', dir='tmpB', extension='rda')
> setSymbolLookup(XXX='FI')
> getSymbols("XXX", auto.assign=FALSE)
? ? ? ? ? ? ? ? ? ?[,1]
2011-12-29 17:10:37 ? 20
2011-12-29 17:11:37 ? 19
2011-12-29 17:12:37 ? 18
2011-12-29 17:13:37 ? 17
2011-12-29 17:14:37 ? 16
2011-12-29 17:15:37 ? 15
2011-12-29 17:16:37 ? 14
2011-12-29 17:17:37 ? 13
2011-12-29 17:18:37 ? 12
2011-12-29 17:19:37 ? 11

> getSymbols("XXX", dir='tmpA', auto.assign=FALSE)
? ? ? ? ? ? ? ? ? ?[,1]
2011-12-29 17:10:37 ? ?1
2011-12-29 17:11:37 ? ?2
2011-12-29 17:12:37 ? ?3
2011-12-29 17:13:37 ? ?4
2011-12-29 17:14:37 ? ?5
2011-12-29 17:15:37 ? ?6
2011-12-29 17:16:37 ? ?7
2011-12-29 17:17:37 ? ?8
2011-12-29 17:18:37 ? ?9
2011-12-29 17:19:37 ? 10

> # Clean up
unlink("tmpA", recursive=TRUE)
unlink("tmpB", recursive=TRUE)

HTH,
Garrett

On Wed, Dec 28, 2011 at 2:37 PM, Mark Harrison <harrisonmark1 at gmail.com> wrote:
> I am using R and RStudio versions 2.13.1 and 0.94.106 respectively.
> I am using Financial Instrument and everything is working for a single data
> source. ?I have my Rprofile file setup to load packages, define my
> instruments, and set my symbol lookup souce.
>
> # packages to load at startup
> library(quantmod)
> library(fTrading)
>
> # currencies defined
>
> currency("USD")
> currency("GBP")
>
> # now exchange rates
>
> # British Pound Rates
> exchange_rate("GBPUSD","GBP","USD")
>
> # Set symbol lookups
> setSymbolLookup.FI("HistFX", storage_method="rda")
>
> Once I start R or RStudio everything loads and I can run the following and
> everything works:
> getSymbols.FI("GBPUSD")
>
> This all works for a single data source but I have multiple data sources or
> data sets that I would like to access and would like to put everything in
> my RProfile but I have yet to figure out how to make it work.
>
> For example, I have a series of historical data files that I got from a
> vendor who is not my broker. ?So I want to keep my historical data files
> separate in one directory 'HistFX' and any data I get from my broker in a
> separate folder called 'Broker' for example.
>
> So the directories might look like:
>
> C:\Documents\HistFX\GBPUSD
> C:\Documents\Broker\GBPUSD
>
> I tried adding multiple lines to my RProfile with for each source but it
> looks like the last line read in is the 'live' one. ?I even tried adding
> 'src=' to try and distinguish one from the other
> setSymbolLookup.FI("HistFX", storage_method="rda")
> setSymbolLookup.FI("Broker", storage_method="rda")
>
> setSymbolLookup.FI("HistFX", storage_method="rda", src="hist")
> setSymbolLookup.FI("Broker", storage_method="rda", src='broker")
>
> I realize the simplest solution would be to just add a setSymbolLookup.FI
> command to any script I use pointing to the data I want to use - i.e.
> historical or broker - but like I said I was trying to do this in the
> RProfile.
>
> Any help would be appreciated.
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From harrisonmark1 at gmail.com  Fri Dec 30 01:43:01 2011
From: harrisonmark1 at gmail.com (Mark Harrison)
Date: Thu, 29 Dec 2011 18:43:01 -0600
Subject: [R-SIG-Finance] Mulitple FI Sources
In-Reply-To: <CA+xi=qbnzJTfH3DL8AYY961_rmDiZC_wKq4m11Qi=9ejaMWXOg@mail.gmail.com>
References: <CAHFhaq_y_J2xiTgWRaKcTx86nGRA+KsOcm+k3PURVDHPgZL_hg@mail.gmail.com>
	<CA+xi=qbnzJTfH3DL8AYY961_rmDiZC_wKq4m11Qi=9ejaMWXOg@mail.gmail.com>
Message-ID: <CAHFhaq8+V7Z21=41JLtxcapWdxi0xwPUEroZm-BJODNVuUQ07A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111229/c90da375/attachment.pl>

From jbreit at nexgo.de  Fri Dec 30 15:54:58 2011
From: jbreit at nexgo.de (Joachim Breit)
Date: Fri, 30 Dec 2011 15:54:58 +0100
Subject: [R-SIG-Finance] Determine the number of trading days for XETRA or
 EUREX in a given period
Message-ID: <4EFDD0C2.6050104@nexgo.de>

Hello,

say you want to determine the number of trading days for DAX options on 
EUREX from now til day x.

I am looking for a function for this task.

Looked in package timeDate but found nothing for the german exchanges.

Can somebody help, please?

Joachim


From gsee000 at gmail.com  Fri Dec 30 17:17:41 2011
From: gsee000 at gmail.com (G See)
Date: Fri, 30 Dec 2011 10:17:41 -0600
Subject: [R-SIG-Finance] Mulitple FI Sources
In-Reply-To: <CAHFhaq8+V7Z21=41JLtxcapWdxi0xwPUEroZm-BJODNVuUQ07A@mail.gmail.com>
References: <CAHFhaq_y_J2xiTgWRaKcTx86nGRA+KsOcm+k3PURVDHPgZL_hg@mail.gmail.com>
	<CA+xi=qbnzJTfH3DL8AYY961_rmDiZC_wKq4m11Qi=9ejaMWXOg@mail.gmail.com>
	<CAHFhaq8+V7Z21=41JLtxcapWdxi0xwPUEroZm-BJODNVuUQ07A@mail.gmail.com>
Message-ID: <CA+xi=qaOPJzaLUNLQs8M4DssTmJvcM9WFaH2M_VGyEOikGKEMA@mail.gmail.com>

You should now be able to install with
install.packages("FinancialInstrument",
repos='http://r-forge.r-project.org')

It seems like R-Forge only builds for Windows every several days.  If
you build from source you don't have to wait on R-forge to build for
you.

In my last e-mail, I said the problem was with using setSymbolLookup
with a list.  The problem is really that getSymbols.FI will ignore
arguments you give it if it can find them in the SymbolLookup table.

I patched instrument or instrument_attr so that it works better when
you call them with the "src" argument.

Now, the only value that will be set in the SymbolLookup table will be
the src.  (i.e. "FI").  Anything else will be used to "setDefaults"

So, you should be able to do something like
stock("XXX", currency("USD"), src=list(src='FI', dir='tmpA', extension='rda'))
getSymbols('XXX')
getSymbols('XXX', dir='tmpB')
instrument_attr("XXX", "src", list(src='FI', dir='tmpB', extension='rda'))
getSymbols('XXX')

However, I did not update setSymbolLookup.FI yet.

Also, regarding getting data from the weekend, which we talked about
in our last on-list exchange, I added an argument to getSymbol.FI
called "days_to_omit"  which has a default value of c("Saturday",
"Sunday").
If you call getSymbols with days_to_omit=NULL or days_to_omit="" it
should attempt to get data for all days of the week.

If you use the install.packages command above, you should be able to
install packageVersion "0.9.20"  which has these changes in it.

Garrett

On Thu, Dec 29, 2011 at 6:43 PM, Mark Harrison <harrisonmark1 at gmail.com> wrote:
> Thanks everyone for responding.
>
> Garret -
>
> Your right on all counts my version is out of date and my exchange rates are
> still backwards.? Once I fixed my 'zoo' issue and saw financial instrument
> work I left the exchange rates definitions alone.? I was just happy to see
> it work ;)
>
> I saved your last response and will add this one to it for reference.? The
> examples are really helpful.
>
> One follow-up question regarding upgrading finance packages and R versions.
> I am trying to clean up my R and financial packages and was trying to
> upgrade to R version 2.14.1 but am getting the error that
> 'FinancialInstrument' is not available for R version 2.14.1 when I use the
> R-Forge.R-project repos.? I know 2.14.1 just came out so maybe I should keep
> version 2.13.1 or am I missing something?
>
>
>
> On Thu, Dec 29, 2011 at 5:33 PM, G See <gsee000 at gmail.com> wrote:
>>
>> Mark,
>>
>> You did not tell us which version of FinancialInstrument you are
>> using, but my guess is that it is out of date.
>>
>> Also, you defined your exchange_rate backwards. ?Please see
>> ?exchange_rate ... or the e-mail I sent you on Dec 17th ;-)
>>
>> Now, I'll let you know upfront that setSymbolLookup.FI doesn't really
>> work. ?(more specifically, setSymbolLookup doesn't work well when you
>> pass it a list). ?It sort of works, but once you've used it, the
>> defaults you set cannot be overridden without another call to
>> setSymbolLookup.FI. ?Luckly, you don't really need setSymbolLookup.FI.
>>
>> Before we get to that, getSymbols.FI requires a single base_dir for a
>> given Symbol. ?If you want to end up with a single xts object with
>> data from 2 different base directories, then you'll have to load the
>> data from each base directory separately, then rbind or merge the data
>> together.
>>
>> If you're simply asking how to have different instruments have
>> different directories, one solution may be to update to the latest
>> version of FinancialInstrument. ?You can make multiple calls to
>> setSymbolLookup.FI and use the "Symbols" argument to set different
>> directories for different Symbols, or you can use the "src" argument
>> of an "instrument" call or in an "instrument_attr" call. ?(I'll
>> demonstrate below.)
>>
>> But, as I already mentioned, I'd avoid doing that because
>> setSymbolLookup does not really work when it is given a list. ?So,
>> instead I'd simply use setSymbolLookup to specify that "FI" is the
>> src, and call setDefaults on getSymbols.FI. ?Here's some code to show
>> why.
>>
>> > # Create 2 directories
>> > dir.create("tmpA")
>> > dir.create("tmpB")
>> > # make/save 2 different versions of data
>> > XXX <- xts(1:10, Sys.time()-10:1*60)
>> > saveSymbols.days("XXX", "tmpA")
>> > XXX <- xts(20:11, Sys.time()-10:1*60)
>> > saveSymbols.days("XXX", "tmpB")
>> > # Define the stock. If you use "src" arg, 'setSymbolLookup'
>> > # will be called. ?Don't specify "dir"
>> > stock("XXX", currency("USD"),
>> + ? ? ? src=list(src="FI", extension='rda'))
>> [1] "XXX"
>> > getSymbols("XXX", dir='tmpA', auto.assign=FALSE)
>> ? ? ? ? ? ? ? ? ? ?[,1]
>> 2011-12-29 17:10:37 ? ?1
>> 2011-12-29 17:11:37 ? ?2
>> 2011-12-29 17:12:37 ? ?3
>> 2011-12-29 17:13:37 ? ?4
>> 2011-12-29 17:14:37 ? ?5
>> 2011-12-29 17:15:37 ? ?6
>> 2011-12-29 17:16:37 ? ?7
>> 2011-12-29 17:17:37 ? ?8
>> 2011-12-29 17:18:37 ? ?9
>> 2011-12-29 17:19:37 ? 10
>> > getSymbols("XXX", dir='tmpB', auto.assign=FALSE)
>> ? ? ? ? ? ? ? ? ? ?[,1]
>> 2011-12-29 17:10:37 ? 20
>> 2011-12-29 17:11:37 ? 19
>> 2011-12-29 17:12:37 ? 18
>> 2011-12-29 17:13:37 ? 17
>> 2011-12-29 17:14:37 ? 16
>> 2011-12-29 17:15:37 ? 15
>> 2011-12-29 17:16:37 ? 14
>> 2011-12-29 17:17:37 ? 13
>> 2011-12-29 17:18:37 ? 12
>> 2011-12-29 17:19:37 ? 11
>>
>> > # Since we didn't set the global default for "dir",
>> > # it works. ?But,
>> > # If you specify "dir" with setSymbolLookup,
>> > # it will be used even if you provide a local arg
>> > setSymbolLookup.FI("tmpA", Symbols='XXX')
>> > getSymbols("XXX", auto.assign=FALSE)
>> ? ? ? ? ? ? ? ? ? ?[,1]
>> 2011-12-29 17:10:37 ? ?1
>> 2011-12-29 17:11:37 ? ?2
>> 2011-12-29 17:12:37 ? ?3
>> 2011-12-29 17:13:37 ? ?4
>> 2011-12-29 17:14:37 ? ?5
>> 2011-12-29 17:15:37 ? ?6
>> 2011-12-29 17:16:37 ? ?7
>> 2011-12-29 17:17:37 ? ?8
>> 2011-12-29 17:18:37 ? ?9
>> 2011-12-29 17:19:37 ? 10
>>
>> > getSymbols("XXX", dir='tmpB', auto.assign=FALSE) #dir arg is ignored!!!
>> ? ? ? ? ? ? ? ? ? ?[,1]
>> 2011-12-29 17:10:37 ? ?1
>> 2011-12-29 17:11:37 ? ?2
>> 2011-12-29 17:12:37 ? ?3
>> 2011-12-29 17:13:37 ? ?4
>> 2011-12-29 17:14:37 ? ?5
>> 2011-12-29 17:15:37 ? ?6
>> 2011-12-29 17:16:37 ? ?7
>> 2011-12-29 17:17:37 ? ?8
>> 2011-12-29 17:18:37 ? ?9
>> 2011-12-29 17:19:37 ? 10
>>
>> > # have to re-setSymbolLookup either with setSymbolLookup.FI,
>> > # or instrument_attr as below
>> > instrument_attr("XXX", "src", list(src='FI', dir='tmpB'))
>> > getSymbols("XXX", auto.assign=FALSE)
>> ? ? ? ? ? ? ? ? ? ?[,1]
>> 2011-12-29 17:10:37 ? 20
>> 2011-12-29 17:11:37 ? 19
>> 2011-12-29 17:12:37 ? 18
>> 2011-12-29 17:13:37 ? 17
>> 2011-12-29 17:14:37 ? 16
>> 2011-12-29 17:15:37 ? 15
>> 2011-12-29 17:16:37 ? 14
>> 2011-12-29 17:17:37 ? 13
>> 2011-12-29 17:18:37 ? 12
>> 2011-12-29 17:19:37 ? 11
>>
>> > # You're better off NOT providing a list to "src", and
>> > # instead using setDefaults on getSymbols.FI
>> > rm_instruments("XXX")
>> > stock("XXX", currency("USD"), src='FI')
>> [1] "XXX"
>> > setDefaults('getSymbols.FI', dir='tmpB', extension='rda')
>> > setSymbolLookup(XXX='FI')
>> > getSymbols("XXX", auto.assign=FALSE)
>> ? ? ? ? ? ? ? ? ? ?[,1]
>> 2011-12-29 17:10:37 ? 20
>> 2011-12-29 17:11:37 ? 19
>> 2011-12-29 17:12:37 ? 18
>> 2011-12-29 17:13:37 ? 17
>> 2011-12-29 17:14:37 ? 16
>> 2011-12-29 17:15:37 ? 15
>> 2011-12-29 17:16:37 ? 14
>> 2011-12-29 17:17:37 ? 13
>> 2011-12-29 17:18:37 ? 12
>> 2011-12-29 17:19:37 ? 11
>>
>> > getSymbols("XXX", dir='tmpA', auto.assign=FALSE)
>> ? ? ? ? ? ? ? ? ? ?[,1]
>> 2011-12-29 17:10:37 ? ?1
>> 2011-12-29 17:11:37 ? ?2
>> 2011-12-29 17:12:37 ? ?3
>> 2011-12-29 17:13:37 ? ?4
>> 2011-12-29 17:14:37 ? ?5
>> 2011-12-29 17:15:37 ? ?6
>> 2011-12-29 17:16:37 ? ?7
>> 2011-12-29 17:17:37 ? ?8
>> 2011-12-29 17:18:37 ? ?9
>> 2011-12-29 17:19:37 ? 10
>>
>> > # Clean up
>> unlink("tmpA", recursive=TRUE)
>> unlink("tmpB", recursive=TRUE)
>>
>> HTH,
>> Garrett
>>
>> On Wed, Dec 28, 2011 at 2:37 PM, Mark Harrison <harrisonmark1 at gmail.com>
>> wrote:
>> > I am using R and RStudio versions 2.13.1 and 0.94.106 respectively.
>> > I am using Financial Instrument and everything is working for a single
>> > data
>> > source. ?I have my Rprofile file setup to load packages, define my
>> > instruments, and set my symbol lookup souce.
>> >
>> > # packages to load at startup
>> > library(quantmod)
>> > library(fTrading)
>> >
>> > # currencies defined
>> >
>> > currency("USD")
>> > currency("GBP")
>> >
>> > # now exchange rates
>> >
>> > # British Pound Rates
>> > exchange_rate("GBPUSD","GBP","USD")
>> >
>> > # Set symbol lookups
>> > setSymbolLookup.FI("HistFX", storage_method="rda")
>> >
>> > Once I start R or RStudio everything loads and I can run the following
>> > and
>> > everything works:
>> > getSymbols.FI("GBPUSD")
>> >
>> > This all works for a single data source but I have multiple data sources
>> > or
>> > data sets that I would like to access and would like to put everything
>> > in
>> > my RProfile but I have yet to figure out how to make it work.
>> >
>> > For example, I have a series of historical data files that I got from a
>> > vendor who is not my broker. ?So I want to keep my historical data files
>> > separate in one directory 'HistFX' and any data I get from my broker in
>> > a
>> > separate folder called 'Broker' for example.
>> >
>> > So the directories might look like:
>> >
>> > C:\Documents\HistFX\GBPUSD
>> > C:\Documents\Broker\GBPUSD
>> >
>> > I tried adding multiple lines to my RProfile with for each source but it
>> > looks like the last line read in is the 'live' one. ?I even tried adding
>> > 'src=' to try and distinguish one from the other
>> > setSymbolLookup.FI("HistFX", storage_method="rda")
>> > setSymbolLookup.FI("Broker", storage_method="rda")
>> >
>> > setSymbolLookup.FI("HistFX", storage_method="rda", src="hist")
>> > setSymbolLookup.FI("Broker", storage_method="rda", src='broker")
>> >
>> > I realize the simplest solution would be to just add a
>> > setSymbolLookup.FI
>> > command to any script I use pointing to the data I want to use - i.e.
>> > historical or broker - but like I said I was trying to do this in the
>> > RProfile.
>> >
>> > Any help would be appreciated.
>> >
>> > ? ? ? ?[[alternative HTML version deleted]]
>> >
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions
>> > should go.
>
>


From gsee000 at gmail.com  Fri Dec 30 17:24:25 2011
From: gsee000 at gmail.com (G See)
Date: Fri, 30 Dec 2011 10:24:25 -0600
Subject: [R-SIG-Finance] Mulitple FI Sources
In-Reply-To: <CA+xi=qaOPJzaLUNLQs8M4DssTmJvcM9WFaH2M_VGyEOikGKEMA@mail.gmail.com>
References: <CAHFhaq_y_J2xiTgWRaKcTx86nGRA+KsOcm+k3PURVDHPgZL_hg@mail.gmail.com>
	<CA+xi=qbnzJTfH3DL8AYY961_rmDiZC_wKq4m11Qi=9ejaMWXOg@mail.gmail.com>
	<CAHFhaq8+V7Z21=41JLtxcapWdxi0xwPUEroZm-BJODNVuUQ07A@mail.gmail.com>
	<CA+xi=qaOPJzaLUNLQs8M4DssTmJvcM9WFaH2M_VGyEOikGKEMA@mail.gmail.com>
Message-ID: <CA+xi=qaaYVhQ=Wk_L2c5RokcmDEAsoRBoNrrHAgfQR_Y_8kU1A@mail.gmail.com>

I lied.  You need packageVersion "0.9.21" which means if you don't
learn how to build from source, you'll probably have to wait for a few
days to a week for R-Forge to build it for Windows.

On Fri, Dec 30, 2011 at 10:17 AM, G See <gsee000 at gmail.com> wrote:
> You should now be able to install with
> install.packages("FinancialInstrument",
> repos='http://r-forge.r-project.org')
>
> It seems like R-Forge only builds for Windows every several days. ?If
> you build from source you don't have to wait on R-forge to build for
> you.
>
> In my last e-mail, I said the problem was with using setSymbolLookup
> with a list. ?The problem is really that getSymbols.FI will ignore
> arguments you give it if it can find them in the SymbolLookup table.
>
> I patched instrument or instrument_attr so that it works better when
> you call them with the "src" argument.
>
> Now, the only value that will be set in the SymbolLookup table will be
> the src. ?(i.e. "FI"). ?Anything else will be used to "setDefaults"
>
> So, you should be able to do something like
> stock("XXX", currency("USD"), src=list(src='FI', dir='tmpA', extension='rda'))
> getSymbols('XXX')
> getSymbols('XXX', dir='tmpB')
> instrument_attr("XXX", "src", list(src='FI', dir='tmpB', extension='rda'))
> getSymbols('XXX')
>
> However, I did not update setSymbolLookup.FI yet.
>
> Also, regarding getting data from the weekend, which we talked about
> in our last on-list exchange, I added an argument to getSymbol.FI
> called "days_to_omit" ?which has a default value of c("Saturday",
> "Sunday").
> If you call getSymbols with days_to_omit=NULL or days_to_omit="" it
> should attempt to get data for all days of the week.
>
> If you use the install.packages command above, you should be able to
> install packageVersion "0.9.20" ?which has these changes in it.
>
> Garrett
>
> On Thu, Dec 29, 2011 at 6:43 PM, Mark Harrison <harrisonmark1 at gmail.com> wrote:
>> Thanks everyone for responding.
>>
>> Garret -
>>
>> Your right on all counts my version is out of date and my exchange rates are
>> still backwards.? Once I fixed my 'zoo' issue and saw financial instrument
>> work I left the exchange rates definitions alone.? I was just happy to see
>> it work ;)
>>
>> I saved your last response and will add this one to it for reference.? The
>> examples are really helpful.
>>
>> One follow-up question regarding upgrading finance packages and R versions.
>> I am trying to clean up my R and financial packages and was trying to
>> upgrade to R version 2.14.1 but am getting the error that
>> 'FinancialInstrument' is not available for R version 2.14.1 when I use the
>> R-Forge.R-project repos.? I know 2.14.1 just came out so maybe I should keep
>> version 2.13.1 or am I missing something?
>>
>>
>>
>> On Thu, Dec 29, 2011 at 5:33 PM, G See <gsee000 at gmail.com> wrote:
>>>
>>> Mark,
>>>
>>> You did not tell us which version of FinancialInstrument you are
>>> using, but my guess is that it is out of date.
>>>
>>> Also, you defined your exchange_rate backwards. ?Please see
>>> ?exchange_rate ... or the e-mail I sent you on Dec 17th ;-)
>>>
>>> Now, I'll let you know upfront that setSymbolLookup.FI doesn't really
>>> work. ?(more specifically, setSymbolLookup doesn't work well when you
>>> pass it a list). ?It sort of works, but once you've used it, the
>>> defaults you set cannot be overridden without another call to
>>> setSymbolLookup.FI. ?Luckly, you don't really need setSymbolLookup.FI.
>>>
>>> Before we get to that, getSymbols.FI requires a single base_dir for a
>>> given Symbol. ?If you want to end up with a single xts object with
>>> data from 2 different base directories, then you'll have to load the
>>> data from each base directory separately, then rbind or merge the data
>>> together.
>>>
>>> If you're simply asking how to have different instruments have
>>> different directories, one solution may be to update to the latest
>>> version of FinancialInstrument. ?You can make multiple calls to
>>> setSymbolLookup.FI and use the "Symbols" argument to set different
>>> directories for different Symbols, or you can use the "src" argument
>>> of an "instrument" call or in an "instrument_attr" call. ?(I'll
>>> demonstrate below.)
>>>
>>> But, as I already mentioned, I'd avoid doing that because
>>> setSymbolLookup does not really work when it is given a list. ?So,
>>> instead I'd simply use setSymbolLookup to specify that "FI" is the
>>> src, and call setDefaults on getSymbols.FI. ?Here's some code to show
>>> why.
>>>
>>> > # Create 2 directories
>>> > dir.create("tmpA")
>>> > dir.create("tmpB")
>>> > # make/save 2 different versions of data
>>> > XXX <- xts(1:10, Sys.time()-10:1*60)
>>> > saveSymbols.days("XXX", "tmpA")
>>> > XXX <- xts(20:11, Sys.time()-10:1*60)
>>> > saveSymbols.days("XXX", "tmpB")
>>> > # Define the stock. If you use "src" arg, 'setSymbolLookup'
>>> > # will be called. ?Don't specify "dir"
>>> > stock("XXX", currency("USD"),
>>> + ? ? ? src=list(src="FI", extension='rda'))
>>> [1] "XXX"
>>> > getSymbols("XXX", dir='tmpA', auto.assign=FALSE)
>>> ? ? ? ? ? ? ? ? ? ?[,1]
>>> 2011-12-29 17:10:37 ? ?1
>>> 2011-12-29 17:11:37 ? ?2
>>> 2011-12-29 17:12:37 ? ?3
>>> 2011-12-29 17:13:37 ? ?4
>>> 2011-12-29 17:14:37 ? ?5
>>> 2011-12-29 17:15:37 ? ?6
>>> 2011-12-29 17:16:37 ? ?7
>>> 2011-12-29 17:17:37 ? ?8
>>> 2011-12-29 17:18:37 ? ?9
>>> 2011-12-29 17:19:37 ? 10
>>> > getSymbols("XXX", dir='tmpB', auto.assign=FALSE)
>>> ? ? ? ? ? ? ? ? ? ?[,1]
>>> 2011-12-29 17:10:37 ? 20
>>> 2011-12-29 17:11:37 ? 19
>>> 2011-12-29 17:12:37 ? 18
>>> 2011-12-29 17:13:37 ? 17
>>> 2011-12-29 17:14:37 ? 16
>>> 2011-12-29 17:15:37 ? 15
>>> 2011-12-29 17:16:37 ? 14
>>> 2011-12-29 17:17:37 ? 13
>>> 2011-12-29 17:18:37 ? 12
>>> 2011-12-29 17:19:37 ? 11
>>>
>>> > # Since we didn't set the global default for "dir",
>>> > # it works. ?But,
>>> > # If you specify "dir" with setSymbolLookup,
>>> > # it will be used even if you provide a local arg
>>> > setSymbolLookup.FI("tmpA", Symbols='XXX')
>>> > getSymbols("XXX", auto.assign=FALSE)
>>> ? ? ? ? ? ? ? ? ? ?[,1]
>>> 2011-12-29 17:10:37 ? ?1
>>> 2011-12-29 17:11:37 ? ?2
>>> 2011-12-29 17:12:37 ? ?3
>>> 2011-12-29 17:13:37 ? ?4
>>> 2011-12-29 17:14:37 ? ?5
>>> 2011-12-29 17:15:37 ? ?6
>>> 2011-12-29 17:16:37 ? ?7
>>> 2011-12-29 17:17:37 ? ?8
>>> 2011-12-29 17:18:37 ? ?9
>>> 2011-12-29 17:19:37 ? 10
>>>
>>> > getSymbols("XXX", dir='tmpB', auto.assign=FALSE) #dir arg is ignored!!!
>>> ? ? ? ? ? ? ? ? ? ?[,1]
>>> 2011-12-29 17:10:37 ? ?1
>>> 2011-12-29 17:11:37 ? ?2
>>> 2011-12-29 17:12:37 ? ?3
>>> 2011-12-29 17:13:37 ? ?4
>>> 2011-12-29 17:14:37 ? ?5
>>> 2011-12-29 17:15:37 ? ?6
>>> 2011-12-29 17:16:37 ? ?7
>>> 2011-12-29 17:17:37 ? ?8
>>> 2011-12-29 17:18:37 ? ?9
>>> 2011-12-29 17:19:37 ? 10
>>>
>>> > # have to re-setSymbolLookup either with setSymbolLookup.FI,
>>> > # or instrument_attr as below
>>> > instrument_attr("XXX", "src", list(src='FI', dir='tmpB'))
>>> > getSymbols("XXX", auto.assign=FALSE)
>>> ? ? ? ? ? ? ? ? ? ?[,1]
>>> 2011-12-29 17:10:37 ? 20
>>> 2011-12-29 17:11:37 ? 19
>>> 2011-12-29 17:12:37 ? 18
>>> 2011-12-29 17:13:37 ? 17
>>> 2011-12-29 17:14:37 ? 16
>>> 2011-12-29 17:15:37 ? 15
>>> 2011-12-29 17:16:37 ? 14
>>> 2011-12-29 17:17:37 ? 13
>>> 2011-12-29 17:18:37 ? 12
>>> 2011-12-29 17:19:37 ? 11
>>>
>>> > # You're better off NOT providing a list to "src", and
>>> > # instead using setDefaults on getSymbols.FI
>>> > rm_instruments("XXX")
>>> > stock("XXX", currency("USD"), src='FI')
>>> [1] "XXX"
>>> > setDefaults('getSymbols.FI', dir='tmpB', extension='rda')
>>> > setSymbolLookup(XXX='FI')
>>> > getSymbols("XXX", auto.assign=FALSE)
>>> ? ? ? ? ? ? ? ? ? ?[,1]
>>> 2011-12-29 17:10:37 ? 20
>>> 2011-12-29 17:11:37 ? 19
>>> 2011-12-29 17:12:37 ? 18
>>> 2011-12-29 17:13:37 ? 17
>>> 2011-12-29 17:14:37 ? 16
>>> 2011-12-29 17:15:37 ? 15
>>> 2011-12-29 17:16:37 ? 14
>>> 2011-12-29 17:17:37 ? 13
>>> 2011-12-29 17:18:37 ? 12
>>> 2011-12-29 17:19:37 ? 11
>>>
>>> > getSymbols("XXX", dir='tmpA', auto.assign=FALSE)
>>> ? ? ? ? ? ? ? ? ? ?[,1]
>>> 2011-12-29 17:10:37 ? ?1
>>> 2011-12-29 17:11:37 ? ?2
>>> 2011-12-29 17:12:37 ? ?3
>>> 2011-12-29 17:13:37 ? ?4
>>> 2011-12-29 17:14:37 ? ?5
>>> 2011-12-29 17:15:37 ? ?6
>>> 2011-12-29 17:16:37 ? ?7
>>> 2011-12-29 17:17:37 ? ?8
>>> 2011-12-29 17:18:37 ? ?9
>>> 2011-12-29 17:19:37 ? 10
>>>
>>> > # Clean up
>>> unlink("tmpA", recursive=TRUE)
>>> unlink("tmpB", recursive=TRUE)
>>>
>>> HTH,
>>> Garrett
>>>
>>> On Wed, Dec 28, 2011 at 2:37 PM, Mark Harrison <harrisonmark1 at gmail.com>
>>> wrote:
>>> > I am using R and RStudio versions 2.13.1 and 0.94.106 respectively.
>>> > I am using Financial Instrument and everything is working for a single
>>> > data
>>> > source. ?I have my Rprofile file setup to load packages, define my
>>> > instruments, and set my symbol lookup souce.
>>> >
>>> > # packages to load at startup
>>> > library(quantmod)
>>> > library(fTrading)
>>> >
>>> > # currencies defined
>>> >
>>> > currency("USD")
>>> > currency("GBP")
>>> >
>>> > # now exchange rates
>>> >
>>> > # British Pound Rates
>>> > exchange_rate("GBPUSD","GBP","USD")
>>> >
>>> > # Set symbol lookups
>>> > setSymbolLookup.FI("HistFX", storage_method="rda")
>>> >
>>> > Once I start R or RStudio everything loads and I can run the following
>>> > and
>>> > everything works:
>>> > getSymbols.FI("GBPUSD")
>>> >
>>> > This all works for a single data source but I have multiple data sources
>>> > or
>>> > data sets that I would like to access and would like to put everything
>>> > in
>>> > my RProfile but I have yet to figure out how to make it work.
>>> >
>>> > For example, I have a series of historical data files that I got from a
>>> > vendor who is not my broker. ?So I want to keep my historical data files
>>> > separate in one directory 'HistFX' and any data I get from my broker in
>>> > a
>>> > separate folder called 'Broker' for example.
>>> >
>>> > So the directories might look like:
>>> >
>>> > C:\Documents\HistFX\GBPUSD
>>> > C:\Documents\Broker\GBPUSD
>>> >
>>> > I tried adding multiple lines to my RProfile with for each source but it
>>> > looks like the last line read in is the 'live' one. ?I even tried adding
>>> > 'src=' to try and distinguish one from the other
>>> > setSymbolLookup.FI("HistFX", storage_method="rda")
>>> > setSymbolLookup.FI("Broker", storage_method="rda")
>>> >
>>> > setSymbolLookup.FI("HistFX", storage_method="rda", src="hist")
>>> > setSymbolLookup.FI("Broker", storage_method="rda", src='broker")
>>> >
>>> > I realize the simplest solution would be to just add a
>>> > setSymbolLookup.FI
>>> > command to any script I use pointing to the data I want to use - i.e.
>>> > historical or broker - but like I said I was trying to do this in the
>>> > RProfile.
>>> >
>>> > Any help would be appreciated.
>>> >
>>> > ? ? ? ?[[alternative HTML version deleted]]
>>> >
>>> > _______________________________________________
>>> > R-SIG-Finance at r-project.org mailing list
>>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> > -- Subscriber-posting only. If you want to post, subscribe first.
>>> > -- Also note that this is not the r-help list where general R questions
>>> > should go.
>>
>>


From algotr8der at gmail.com  Fri Dec 30 18:10:54 2011
From: algotr8der at gmail.com (algotr8der)
Date: Fri, 30 Dec 2011 09:10:54 -0800 (PST)
Subject: [R-SIG-Finance] lapply over list that has multiple xts objects
In-Reply-To: <4EFCB467.6030003@gmail.com>
References: <1325114967940-4241306.post@n4.nabble.com>
	<EEF13B4E-DD19-4195-97C3-BC5C1FF77269@gmail.com>
	<4EFCB467.6030003@gmail.com>
Message-ID: <1325265054356-4246236.post@n4.nabble.com>

Seemed like there was a problem with my data in the list. Some of the list
components were empty - seems like bloomberg populated some of the tickers
with no data. I need to put in error checking to make sure the data is
populated correctly. 

Thank you Jeff for all your help. 

--
View this message in context: http://r.789695.n4.nabble.com/lapply-over-list-that-has-multiple-xts-objects-tp4241306p4246236.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From gsee000 at gmail.com  Fri Dec 30 18:34:20 2011
From: gsee000 at gmail.com (G See)
Date: Fri, 30 Dec 2011 11:34:20 -0600
Subject: [R-SIG-Finance] lapply over list that has multiple xts objects
In-Reply-To: <1325265054356-4246236.post@n4.nabble.com>
References: <1325114967940-4241306.post@n4.nabble.com>
	<EEF13B4E-DD19-4195-97C3-BC5C1FF77269@gmail.com>
	<4EFCB467.6030003@gmail.com>
	<1325265054356-4246236.post@n4.nabble.com>
Message-ID: <CA+xi=qY+_eDiNjDEsT3dkjrWVxWpPRmaPH3VYg-MbV9A3i7+bQ@mail.gmail.com>

These are the types of things that the list would have been much
better at helping you with if you had provided a reproducible example.
 Of course, in the process of trying to make the reproducible example,
you probably would have found the answer yourself. ;-)

On Fri, Dec 30, 2011 at 11:10 AM, algotr8der <algotr8der at gmail.com> wrote:
> Seemed like there was a problem with my data in the list. Some of the list
> components were empty - seems like bloomberg populated some of the tickers
> with no data. I need to put in error checking to make sure the data is
> populated correctly.
>
> Thank you Jeff for all your help.
>
> --
> View this message in context: http://r.789695.n4.nabble.com/lapply-over-list-that-has-multiple-xts-objects-tp4241306p4246236.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From comtech.usa at gmail.com  Fri Dec 30 19:21:53 2011
From: comtech.usa at gmail.com (Michael)
Date: Fri, 30 Dec 2011 12:21:53 -0600
Subject: [R-SIG-Finance] Removing outliers in tick data in R?
Message-ID: <CAPNjSFbvDApiau+QqWSb_fo4RJfeabedkLVTNZraOD8ZPi5x9Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111230/d8325e7f/attachment.pl>

From ezivot at u.washington.edu  Fri Dec 30 20:06:46 2011
From: ezivot at u.washington.edu (Eric Zivot)
Date: Fri, 30 Dec 2011 11:06:46 -0800
Subject: [R-SIG-Finance] Removing outliers in tick data in R?
In-Reply-To: <CAPNjSFbvDApiau+QqWSb_fo4RJfeabedkLVTNZraOD8ZPi5x9Q@mail.gmail.com>
References: <CAPNjSFbvDApiau+QqWSb_fo4RJfeabedkLVTNZraOD8ZPi5x9Q@mail.gmail.com>
Message-ID: <009101ccc726$2d55bca0$880135e0$@washington.edu>

You should look at the excellent RTAQ package. It has an implementation of a
very nice outlier removal algorithm from
http://faculty.washington.edu/ezivot/econ589/realizedKernelsInPractice.pdf 

Eric Zivot                  			               
Robert Richards Chaired Professor of Economics and Director of Outreach
Adjunct Professor of Finance                            
Adjunct Professor of Statistics
Adjunct Professor of Applied Mathematics 
Department of Economics
Box 353330                  email:  ezivot at u.washington.edu 
University of Washington    phone:  206-543-6715            
Seattle, WA 98195-3330
www:  http://faculty.washington.edu/ezivot                  



-----Original Message-----
From: r-sig-finance-bounces at r-project.org
[mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Michael
Sent: Friday, December 30, 2011 10:22 AM
To: r-sig-finance
Subject: [R-SIG-Finance] Removing outliers in tick data in R?

Happy holidays all!

I know it's very subjective to determine whether some data is outlier or
not...

But are there reasonably good and realistic methods of identifying
outliers/errornous quotes  in tick data in R?

Thanks a lot!

	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.


From comtech.usa at gmail.com  Fri Dec 30 22:39:00 2011
From: comtech.usa at gmail.com (Michael)
Date: Fri, 30 Dec 2011 15:39:00 -0600
Subject: [R-SIG-Finance] Removing outliers in tick data in R?
In-Reply-To: <009101ccc726$2d55bca0$880135e0$@washington.edu>
References: <CAPNjSFbvDApiau+QqWSb_fo4RJfeabedkLVTNZraOD8ZPi5x9Q@mail.gmail.com>
	<009101ccc726$2d55bca0$880135e0$@washington.edu>
Message-ID: <CAPNjSFYzBkLME0OUmHqMc=a0cHxei5xGNzHbt-bxzS2T6oz1gQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111230/8bbc9f00/attachment.pl>

From comtech.usa at gmail.com  Fri Dec 30 22:45:05 2011
From: comtech.usa at gmail.com (Michael)
Date: Fri, 30 Dec 2011 15:45:05 -0600
Subject: [R-SIG-Finance] determining local min and local max in a time
	series...
Message-ID: <CAPNjSFYEj2EQi5dV7-pbyPMw85HCXU03iMDyCB+BReAF+siNjw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111230/49b570c5/attachment.pl>

From matt at considine.net  Fri Dec 30 23:29:14 2011
From: matt at considine.net (Matt Considine)
Date: Fri, 30 Dec 2011 17:29:14 -0500
Subject: [R-SIG-Finance] Routines for net and gross of fee returns?
Message-ID: <4EFE3B3A.80307@considine.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111230/4e41ebf2/attachment.pl>

From chris.is.fun at gmail.com  Fri Dec 30 23:44:36 2011
From: chris.is.fun at gmail.com (Chris Waggoner)
Date: Fri, 30 Dec 2011 15:44:36 -0700
Subject: [R-SIG-Finance] determining local min and local max in a time
	series...
In-Reply-To: <CAPNjSFYEj2EQi5dV7-pbyPMw85HCXU03iMDyCB+BReAF+siNjw@mail.gmail.com>
References: <CAPNjSFYEj2EQi5dV7-pbyPMw85HCXU03iMDyCB+BReAF+siNjw@mail.gmail.com>
Message-ID: <CADFr+DUYYn95o2Lg0y8DyqeO6X=ix5atbWQPEf1rbxTx_o5ZTA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111230/f0ecdc8f/attachment.pl>

From brian at braverock.com  Fri Dec 30 23:51:31 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 30 Dec 2011 16:51:31 -0600
Subject: [R-SIG-Finance] determining local min and local max in a time
 series...
In-Reply-To: <CADFr+DUYYn95o2Lg0y8DyqeO6X=ix5atbWQPEf1rbxTx_o5ZTA@mail.gmail.com>
References: <CAPNjSFYEj2EQi5dV7-pbyPMw85HCXU03iMDyCB+BReAF+siNjw@mail.gmail.com>
	<CADFr+DUYYn95o2Lg0y8DyqeO6X=ix5atbWQPEf1rbxTx_o5ZTA@mail.gmail.com>
Message-ID: <1325285491.11817.26.camel@brian-desktop>

you can use aggregate and period.apply to get min and max on any
frequency down to 1 second.


On Fri, 2011-12-30 at 15:44 -0700, Chris Waggoner wrote:
> Michael, what timescale are you looking at? If daily low is enough of a
> minimum for you then you can use
> 
> require(quantmod); Lo(my.ohlc.series);
> http://www.quantmod.com/examples/data/#ohlc
> 
> Otherwise, as far as I know you need to use first- and second-order
> differences. and it is no different with time series than any other 1-D
> vector.
> http://tolstoy.newcastle.edu.au/R/help/05/06/6703.html
> 
> 
> On Fri, Dec 30, 2011 at 2:45 PM, Michael <comtech.usa at gmail.com> wrote:
> 
> > Happy holidays all!
> >
> > Could anybody please point me to the functions for local min and local max
> > in a time series?
> >
> > I will be able to write the functions myself in some sort of "for" loop but
> > I wanted to see if there are good packages/functions existing
> > already...and  I am interested to know more elegant solution.
> >
> > Thank you!
> >
> >        [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions
> > should go.
> >
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From chris.is.fun at gmail.com  Fri Dec 30 23:52:40 2011
From: chris.is.fun at gmail.com (Chris Waggoner)
Date: Fri, 30 Dec 2011 15:52:40 -0700
Subject: [R-SIG-Finance] Removing outliers in tick data in R?
In-Reply-To: <CAPNjSFbvDApiau+QqWSb_fo4RJfeabedkLVTNZraOD8ZPi5x9Q@mail.gmail.com>
References: <CAPNjSFbvDApiau+QqWSb_fo4RJfeabedkLVTNZraOD8ZPi5x9Q@mail.gmail.com>
Message-ID: <CADFr+DW8hzccp9c7Q7DLSPzaAWqONPWgkXPao5=13L7hUm3mww@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111230/74a4e3ce/attachment.pl>

From jeff.a.ryan at gmail.com  Sat Dec 31 00:35:09 2011
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Fri, 30 Dec 2011 17:35:09 -0600
Subject: [R-SIG-Finance] determining local min and local max in a time
	series...
In-Reply-To: <1325285491.11817.26.camel@brian-desktop>
References: <CAPNjSFYEj2EQi5dV7-pbyPMw85HCXU03iMDyCB+BReAF+siNjw@mail.gmail.com>
	<CADFr+DUYYn95o2Lg0y8DyqeO6X=ix5atbWQPEf1rbxTx_o5ZTA@mail.gmail.com>
	<1325285491.11817.26.camel@brian-desktop>
Message-ID: <4FD21838-9BB7-47AE-B3DC-B7AC3B925853@gmail.com>

Try findPeaks and findValleys in quantmod. 

HTH
Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Dec 30, 2011, at 4:51 PM, "Brian G. Peterson" <brian at braverock.com> wrote:

> you can use aggregate and period.apply to get min and max on any
> frequency down to 1 second.
> 
> 
> On Fri, 2011-12-30 at 15:44 -0700, Chris Waggoner wrote:
>> Michael, what timescale are you looking at? If daily low is enough of a
>> minimum for you then you can use
>> 
>> require(quantmod); Lo(my.ohlc.series);
>> http://www.quantmod.com/examples/data/#ohlc
>> 
>> Otherwise, as far as I know you need to use first- and second-order
>> differences. and it is no different with time series than any other 1-D
>> vector.
>> http://tolstoy.newcastle.edu.au/R/help/05/06/6703.html
>> 
>> 
>> On Fri, Dec 30, 2011 at 2:45 PM, Michael <comtech.usa at gmail.com> wrote:
>> 
>>> Happy holidays all!
>>> 
>>> Could anybody please point me to the functions for local min and local max
>>> in a time series?
>>> 
>>> I will be able to write the functions myself in some sort of "for" loop but
>>> I wanted to see if there are good packages/functions existing
>>> already...and  I am interested to know more elegant solution.
>>> 
>>> Thank you!
>>> 
>>>       [[alternative HTML version deleted]]
>>> 
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>> 
>> 
>>    [[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
> 
> -- 
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From comtech.usa at gmail.com  Sat Dec 31 04:43:52 2011
From: comtech.usa at gmail.com (Michael)
Date: Fri, 30 Dec 2011 21:43:52 -0600
Subject: [R-SIG-Finance] determining local min and local max in a time
	series...
In-Reply-To: <4FD21838-9BB7-47AE-B3DC-B7AC3B925853@gmail.com>
References: <CAPNjSFYEj2EQi5dV7-pbyPMw85HCXU03iMDyCB+BReAF+siNjw@mail.gmail.com>
	<CADFr+DUYYn95o2Lg0y8DyqeO6X=ix5atbWQPEf1rbxTx_o5ZTA@mail.gmail.com>
	<1325285491.11817.26.camel@brian-desktop>
	<4FD21838-9BB7-47AE-B3DC-B7AC3B925853@gmail.com>
Message-ID: <CAPNjSFZWz2v4dmx9Wd_NZ4u6LQ7F5prVh+82-ZcmmAe6V5SGZw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111230/50afcd5b/attachment.pl>

From comtech.usa at gmail.com  Sat Dec 31 04:45:06 2011
From: comtech.usa at gmail.com (Michael)
Date: Fri, 30 Dec 2011 21:45:06 -0600
Subject: [R-SIG-Finance] Removing outliers in tick data in R?
In-Reply-To: <CADFr+DW8hzccp9c7Q7DLSPzaAWqONPWgkXPao5=13L7hUm3mww@mail.gmail.com>
References: <CAPNjSFbvDApiau+QqWSb_fo4RJfeabedkLVTNZraOD8ZPi5x9Q@mail.gmail.com>
	<CADFr+DW8hzccp9c7Q7DLSPzaAWqONPWgkXPao5=13L7hUm3mww@mail.gmail.com>
Message-ID: <CAPNjSFZ6cEz81X5p_S70rULxPVmg2W-n3F6WsOyjcC=eHJwx2Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111230/961542b6/attachment.pl>

From comtech.usa at gmail.com  Sat Dec 31 04:55:09 2011
From: comtech.usa at gmail.com (Michael)
Date: Fri, 30 Dec 2011 21:55:09 -0600
Subject: [R-SIG-Finance] "visualizing" multi-dimensional
	backtesting/optimization results?
Message-ID: <CAPNjSFaaKh7uptS3AjKeAoOnErV-sKH_acbPux_DYgTDKV-ntA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111230/a3561be4/attachment.pl>

From breman.mark at gmail.com  Sat Dec 31 10:37:52 2011
From: breman.mark at gmail.com (Mark Breman)
Date: Sat, 31 Dec 2011 10:37:52 +0100
Subject: [R-SIG-Finance] Determine the number of trading days for XETRA
 or EUREX in a given period
In-Reply-To: <4EFDD0C2.6050104@nexgo.de>
References: <4EFDD0C2.6050104@nexgo.de>
Message-ID: <CAEaVHoKUrUrLbRnrrgbSD5WKu8K6oM7Ji4+r1t1TTvkZr5FUAw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20111231/62c7ebfe/attachment.pl>

