From i.petzev at gmail.com  Fri Jul  1 09:03:14 2011
From: i.petzev at gmail.com (ivan)
Date: Fri, 1 Jul 2011 09:03:14 +0200
Subject: [R-SIG-Finance] Serial Tests in a VAR model with arch effects
Message-ID: <BANLkTik8P4Qp6bz1X-=TBj4UxqBvoUgFBA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110701/125c56ea/attachment.pl>

From tristan.linke at gmail.com  Sun Jul  3 13:53:45 2011
From: tristan.linke at gmail.com (Tristan Linke)
Date: Sun, 3 Jul 2011 12:53:45 +0100
Subject: [R-SIG-Finance] Simulating inhomogeneous Poisson process without
	loop
Message-ID: <CAA35csxxc+C56=zmONLZkNdJWUcKm58gB_pUoou8Y=EvphCGAg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110703/b9aea5a7/attachment.pl>

From kriskumar at earthlink.net  Sun Jul  3 18:09:52 2011
From: kriskumar at earthlink.net (Krishna)
Date: Sun, 3 Jul 2011 12:09:52 -0400
Subject: [R-SIG-Finance] Simulating inhomogeneous Poisson process
	without loop
In-Reply-To: <CAA35csxxc+C56=zmONLZkNdJWUcKm58gB_pUoou8Y=EvphCGAg@mail.gmail.com>
References: <CAA35csxxc+C56=zmONLZkNdJWUcKm58gB_pUoou8Y=EvphCGAg@mail.gmail.com>
Message-ID: <149C1705-034A-4B16-B64D-EB17F384EBC7@earthlink.net>

A reproducible example would help, have you tried FOREACH



On Jul 3, 2011, at 7:53 AM, Tristan Linke <tristan.linke at gmail.com>  
wrote:

> Dear all
>
> I want to simulate a stochastic jump variance process in which N is
> Bernoulli (Poisson approximation) with intensity lambda0 + lambda1*Vt.
> lambda0 is constant and lambda1 can be interpreted as a regression
> coefficient on the current variance level Vt. J is the scaling factor
>
> How can I rewrite this avoiding the loop structure which is very
> time-consuming for long simulations?
>
> for (i in 1:N){
> ...
> N <- rbinom(n=1, size=1, prob=(lambda0+lambda1*Vt))
> Vt <- ... + J*N
> ..
> }
>
> P.S. This is going towards the Duffie, Pan, Singleton 2000 Transform  
> Pricing
> paper, here stochastic volatility with state-dependent correlated  
> jumps
> (Eraker 2004).
>
> Thanks a lot in advance.
>
>    [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R  
> questions should go.


From samo.pahor at gmail.com  Sun Jul  3 18:30:36 2011
From: samo.pahor at gmail.com (Samo Pahor)
Date: Sun, 3 Jul 2011 18:30:36 +0200
Subject: [R-SIG-Finance] quantmod::saveSymbols not working properly for me
Message-ID: <CAFNBy2kBxkev06-fsad5YwmzeAE3=3mpd4nFBTP=LNSuKpehDQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110703/ab432f50/attachment.pl>

From gsee000 at gmail.com  Sun Jul  3 18:59:38 2011
From: gsee000 at gmail.com (G See)
Date: Sun, 3 Jul 2011 11:59:38 -0500
Subject: [R-SIG-Finance] quantmod::saveSymbols not working properly for
	me
In-Reply-To: <CAFNBy2kBxkev06-fsad5YwmzeAE3=3mpd4nFBTP=LNSuKpehDQ@mail.gmail.com>
References: <CAFNBy2kBxkev06-fsad5YwmzeAE3=3mpd4nFBTP=LNSuKpehDQ@mail.gmail.com>
Message-ID: <CA+xi=qY_9naCBSQ36aYCwQ1+o8eyuKJrxThK0ngfB6sQcm5UaA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110703/d65b63a7/attachment.pl>

From jeff.a.ryan at gmail.com  Sun Jul  3 20:04:06 2011
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Sun, 3 Jul 2011 13:04:06 -0500
Subject: [R-SIG-Finance] quantmod::saveSymbols not working properly for
	me
In-Reply-To: <CAFNBy2kBxkev06-fsad5YwmzeAE3=3mpd4nFBTP=LNSuKpehDQ@mail.gmail.com>
References: <CAFNBy2kBxkev06-fsad5YwmzeAE3=3mpd4nFBTP=LNSuKpehDQ@mail.gmail.com>
Message-ID: <6D85B450-4381-4946-95AD-3D152014D832@gmail.com>

Take a look at attachSymbols in quantmod. 

It uses lazy loading and some additional R coolness to give you access to all symbols automatically. The example is using data sourced from yahoo on demand, but is easy enough to extend to files on disk as well. 

I'll try and post a nice example when I am not replying from my phone. 

Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Jul 3, 2011, at 11:30 AM, Samo Pahor <samo.pahor at gmail.com> wrote:

> Hello experts,
> 
> I am trying to get rid of the database while managing my data. I am testing
> saving xts objects on disk in binanry form in .RData files. I encountered
> some strange issues.
> 
> I am downloading data from yahoo (approx 600 symbols - I have omitted some
> below to make exmaple more clear) and when I use saveSymbols to save them to
> disk some of them are not saved properly although I can manipulate them
> using R. If I save particular symbol "manually" using save it works OK. I am
> using two R sessions to see if it works correctley.
> 
> Reproducible code(session that is downloading data from yahoo and saving to
> disk):
> require(quantmod)
> dwhFolderRaw = "D:/Temp/symbols/yahoo_hist/raw/"
> #download from
> http://www.standardandpoors.com/prot/spf/docs/indices/SPUSA-500-USDUF--P-US-L--Constituents.xls
> SnP500ConstituentsFileName = "SPUSA-500-USDUF--P-US-L--Constituents.csv"
> urlSnP500 <- paste(eligibleFIsFolder, SnP500ConstituentsFileName, sep="")
> # Read in CSV from S&P website
> SnP500 <- read.csv(urlSnP500)
> symbols <- paste(trim(SnP500[,'Symbol']),collapse=";")
> # BRK needs to be "BRK_B" or "BRK-A", actually, change all "/" to "-"
> symbols <- gsub("/", "-", symbols)
> getSymbols(symbols, from='1900-01-01')
> showSymbols()
> saveSymbols(file.path=dwhFolderRaw)
> head(F)
> tail(F)
>> head(F)
>           F.Open F.High F.Low F.Close F.Volume F.Adjusted
> 1977-01-03  61.00  61.63 61.00   61.25   896300       0.50
> 1977-01-04  61.25  61.25 59.00   59.50  1504600       0.49
> 1977-01-05  59.50  59.88 58.50   58.75  1481600       0.48
> 1977-01-06  59.00  60.38 59.00   59.75  1670300       0.49
> 1977-01-07  59.75  60.50 59.63   60.13   940400       0.49
> 1977-01-10  60.13  60.63 60.13   60.63  1334000       0.50
>> tail(F)
>           F.Open F.High F.Low F.Close F.Volume F.Adjusted
> 2011-06-24  13.52  13.60 13.14   13.24 82707400      13.24
> 2011-06-27  13.35  13.55 13.09   13.46 49987600      13.46
> 2011-06-28  13.55  13.55 13.25   13.33 54013200      13.33
> 2011-06-29  13.41  13.51 13.32   13.42 54105500      13.42
> 2011-06-30  13.46  13.97 13.36   13.79 74076900      13.79
> 2011-07-01  13.92  14.13 13.73   14.02 66304800      14.02
> 
> When I do this F (and some other symbols also) only has 1K size of a file on
> disk.
> 
> Reproducible code with error (R session that tries to read/read data):
> require(quantmod)
> library(xts)
> getSymbols("BRF", src='RData', extension="RData",
> dir="D:/Temp/symbols/yahoo_hist/raw/")
> head(BRF)
> tail(BRF)
> getSymbols("F", src='RData', extension="RData",
> dir="D:/Temp/symbols/yahoo_hist/raw/")
> head(F)
> tail(F)
> 
>> require(quantmod)
> Loading required package: quantmod
> Loading required package: Defaults
> Loading required package: xts
> Loading required package: zoo
> Loading required package: TTR
>> getSymbols("BRF", src='RData', extension="RData",
> dir="D:/Temp/symbols/yahoo_hist/raw/")
> [1] "BRF"
>> 
>> head(BRF)
>           BRF.Open BRF.High BRF.Low BRF.Close BRF.Volume BRF.Adjusted
> 2009-05-14    23.68    24.49   23.68     24.45      31400        22.71
> 2009-05-15    24.67    24.84   24.25     24.35      28200        22.62
> 2009-05-18    25.00    26.85   24.85     25.89      53000        24.05
> 2009-05-19    25.99    26.89   25.69     26.31      97400        24.44
> 2009-05-20    26.93    27.29   26.10     26.20     133100        24.34
> 2009-05-21    25.92    25.93   25.30     25.50      71800        23.69
>> tail(BRF)
>           BRF.Open BRF.High BRF.Low BRF.Close BRF.Volume BRF.Adjusted
> 2011-06-24    55.36    59.33   54.89     54.99     136200        54.99
> 2011-06-27    55.05    55.62   54.86     55.40     324800        55.40
> 2011-06-28    55.50    56.47   55.36     56.33     218700        56.33
> 2011-06-29    56.38    56.71   56.11     56.17     472800        56.17
> 2011-06-30    56.61    57.14   56.39     56.74     360000        56.74
> 2011-07-01    57.10    57.76   56.83     57.58     269100        57.58
>> getSymbols("F", src='RData', extension="RData",
> dir="D:/Temp/symbols/yahoo_hist/raw")
> Error in fr[, -1] : incorrect number of dimensions
>> 
>> 
>> head(F)
> [1] FALSE
>> tail(F)
> [1] FALSE
> For example, F is not saved correctley. On disk it size is only 1 KB as
> output from saveSymbols(). When save from base is used everything is OK and
> it gets the size of 141 KB. Which is strange since saveSymbols is using
> save... Maybe it has something to do with outputing/saving big number of
> symbols/objects at once... What am I doing wrong?
> 
> If I save F in fors R session using
> save(F, file=paste(dwhFolderRaw, "F.RData", sep=""))
> 
> then F is saved to disk correctley (has size of 141K), in the second session
> everything works as it should:
>> getSymbols("F", src='RData', extension="RData",
> dir="D:/Temp/symbols/yahoo_hist/raw/")
> [1] "F"
>> 
>> head(F)
>           F.Open F.High F.Low F.Close F.Volume F.Adjusted
> 1977-01-03  61.00  61.63 61.00   61.25   896300       0.50
> 1977-01-04  61.25  61.25 59.00   59.50  1504600       0.49
> 1977-01-05  59.50  59.88 58.50   58.75  1481600       0.48
> 1977-01-06  59.00  60.38 59.00   59.75  1670300       0.49
> 1977-01-07  59.75  60.50 59.63   60.13   940400       0.49
> 1977-01-10  60.13  60.63 60.13   60.63  1334000       0.50
>> tail(F)
>           F.Open F.High F.Low F.Close F.Volume F.Adjusted
> 2011-06-24  13.52  13.60 13.14   13.24 82707400      13.24
> 2011-06-27  13.35  13.55 13.09   13.46 49987600      13.46
> 2011-06-28  13.55  13.55 13.25   13.33 54013200      13.33
> 2011-06-29  13.41  13.51 13.32   13.42 54105500      13.42
> 2011-06-30  13.46  13.97 13.36   13.79 74076900      13.79
> 2011-07-01  13.92  14.13 13.73   14.02 66304800      14.02
> 
> BTW: is there some sort of automatic way to get a list of
> constituents/symbols of S&P 500? I tried using code in the comments posted
> by Joshua Ulrich on this site http://www.maxdama.com/?p=148 and here
> http://www.mathworks.com/matlabcentral/fileexchange/23569-get-trading-data-from-yahoo-in-your-matlab-workpace-or-excel
> :
> require(quantmod)
> url <- "
> http://www2.standardandpoors.com/servlet/Satellite?pagename=spcom/page/download&sectorid=%20%3E%20%2700%27&itemname=%3E=%20%271%27&dt=07-MAY-2009&indexcode=500
> "
> # Read in CSV from S&P website
> x <- read.csv(url)
> # Pull the first 10 symbols from Yahoo
> symbols <- paste(x[1:10,'Symbol'],collapse=";")
> getSymbols(symbols, env=.GlobalEnv)
> 
> It is not working for dates beyond 2010. Any alternative ways?
> 
> Thanks in advance for any ideas what might be wrong.
> 
> Kind regards,
> Samo.
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jeff.a.ryan at gmail.com  Sun Jul  3 20:05:16 2011
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Sun, 3 Jul 2011 13:05:16 -0500
Subject: [R-SIG-Finance] quantmod::saveSymbols not working properly for
	me
In-Reply-To: <CA+xi=qY_9naCBSQ36aYCwQ1+o8eyuKJrxThK0ngfB6sQcm5UaA@mail.gmail.com>
References: <CAFNBy2kBxkev06-fsad5YwmzeAE3=3mpd4nFBTP=LNSuKpehDQ@mail.gmail.com>
	<CA+xi=qY_9naCBSQ36aYCwQ1+o8eyuKJrxThK0ngfB6sQcm5UaA@mail.gmail.com>
Message-ID: <F64EDDB4-1293-472D-B1E9-A22CB6567CCB@gmail.com>

quantmod is due for an update. I'll make sure this and other patches are incorporated. 

Thanks,
Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Jul 3, 2011, at 11:59 AM, G See <gsee000 at gmail.com> wrote:

> saveSymbols does not work because of a typo.  It uses "env" instead of
> "envir" or "pos" in the call to "save."  I brought this up a while ago....I
> assume Jeff will fix it in the next release?
> 
> For now, it's easy enough to just use "save" or write your own wrapper.
> 
> 
> There's a package on R-Forge called twsInstrument that has the constituent
> S&P 500 symbols.  It's more of a place to store some extra code, than it is
> a package (i.e. it's alpha code, that will probably be moved to other
> packages in the future).  This will define all the stocks for you, but there
> are no guarantees those are still the right symbols -- I know a couple of
> the stocks aren't in the index anymore.
> 
> library(twsInstrument)
> define_stocks(x = SP500desc, use.IB=FALSE)
> 
> Then, you can list all the symbols with something like:
> 
> ls_stocks()
> 
> or download the daily prices with something like:
> 
> getSymbols(ls_stocks())
> 
> -Garrett
> 
> On Sun, Jul 3, 2011 at 11:30 AM, Samo Pahor <samo.pahor at gmail.com> wrote:
> 
>> Hello experts,
>> 
>> I am trying to get rid of the database while managing my data. I am testing
>> saving xts objects on disk in binanry form in .RData files. I encountered
>> some strange issues.
>> 
>> I am downloading data from yahoo (approx 600 symbols - I have omitted some
>> below to make exmaple more clear) and when I use saveSymbols to save them
>> to
>> disk some of them are not saved properly although I can manipulate them
>> using R. If I save particular symbol "manually" using save it works OK. I
>> am
>> using two R sessions to see if it works correctley.
>> 
>> Reproducible code(session that is downloading data from yahoo and saving to
>> disk):
>> require(quantmod)
>> dwhFolderRaw = "D:/Temp/symbols/yahoo_hist/raw/"
>> #download from
>> 
>> http://www.standardandpoors.com/prot/spf/docs/indices/SPUSA-500-USDUF--P-US-L--Constituents.xls
>> SnP500ConstituentsFileName = "SPUSA-500-USDUF--P-US-L--Constituents.csv"
>> urlSnP500 <- paste(eligibleFIsFolder, SnP500ConstituentsFileName, sep="")
>> # Read in CSV from S&P website
>> SnP500 <- read.csv(urlSnP500)
>> symbols <- paste(trim(SnP500[,'Symbol']),collapse=";")
>> # BRK needs to be "BRK_B" or "BRK-A", actually, change all "/" to "-"
>> symbols <- gsub("/", "-", symbols)
>> getSymbols(symbols, from='1900-01-01')
>> showSymbols()
>> saveSymbols(file.path=dwhFolderRaw)
>> head(F)
>> tail(F)
>>> head(F)
>>          F.Open F.High F.Low F.Close F.Volume F.Adjusted
>> 1977-01-03  61.00  61.63 61.00   61.25   896300       0.50
>> 1977-01-04  61.25  61.25 59.00   59.50  1504600       0.49
>> 1977-01-05  59.50  59.88 58.50   58.75  1481600       0.48
>> 1977-01-06  59.00  60.38 59.00   59.75  1670300       0.49
>> 1977-01-07  59.75  60.50 59.63   60.13   940400       0.49
>> 1977-01-10  60.13  60.63 60.13   60.63  1334000       0.50
>>> tail(F)
>>          F.Open F.High F.Low F.Close F.Volume F.Adjusted
>> 2011-06-24  13.52  13.60 13.14   13.24 82707400      13.24
>> 2011-06-27  13.35  13.55 13.09   13.46 49987600      13.46
>> 2011-06-28  13.55  13.55 13.25   13.33 54013200      13.33
>> 2011-06-29  13.41  13.51 13.32   13.42 54105500      13.42
>> 2011-06-30  13.46  13.97 13.36   13.79 74076900      13.79
>> 2011-07-01  13.92  14.13 13.73   14.02 66304800      14.02
>> 
>> When I do this F (and some other symbols also) only has 1K size of a file
>> on
>> disk.
>> 
>> Reproducible code with error (R session that tries to read/read data):
>> require(quantmod)
>> library(xts)
>> getSymbols("BRF", src='RData', extension="RData",
>> dir="D:/Temp/symbols/yahoo_hist/raw/")
>> head(BRF)
>> tail(BRF)
>> getSymbols("F", src='RData', extension="RData",
>> dir="D:/Temp/symbols/yahoo_hist/raw/")
>> head(F)
>> tail(F)
>> 
>>> require(quantmod)
>> Loading required package: quantmod
>> Loading required package: Defaults
>> Loading required package: xts
>> Loading required package: zoo
>> Loading required package: TTR
>>> getSymbols("BRF", src='RData', extension="RData",
>> dir="D:/Temp/symbols/yahoo_hist/raw/")
>> [1] "BRF"
>>> 
>>> head(BRF)
>>          BRF.Open BRF.High BRF.Low BRF.Close BRF.Volume BRF.Adjusted
>> 2009-05-14    23.68    24.49   23.68     24.45      31400        22.71
>> 2009-05-15    24.67    24.84   24.25     24.35      28200        22.62
>> 2009-05-18    25.00    26.85   24.85     25.89      53000        24.05
>> 2009-05-19    25.99    26.89   25.69     26.31      97400        24.44
>> 2009-05-20    26.93    27.29   26.10     26.20     133100        24.34
>> 2009-05-21    25.92    25.93   25.30     25.50      71800        23.69
>>> tail(BRF)
>>          BRF.Open BRF.High BRF.Low BRF.Close BRF.Volume BRF.Adjusted
>> 2011-06-24    55.36    59.33   54.89     54.99     136200        54.99
>> 2011-06-27    55.05    55.62   54.86     55.40     324800        55.40
>> 2011-06-28    55.50    56.47   55.36     56.33     218700        56.33
>> 2011-06-29    56.38    56.71   56.11     56.17     472800        56.17
>> 2011-06-30    56.61    57.14   56.39     56.74     360000        56.74
>> 2011-07-01    57.10    57.76   56.83     57.58     269100        57.58
>>> getSymbols("F", src='RData', extension="RData",
>> dir="D:/Temp/symbols/yahoo_hist/raw")
>> Error in fr[, -1] : incorrect number of dimensions
>>> 
>>> 
>>> head(F)
>> [1] FALSE
>>> tail(F)
>> [1] FALSE
>> For example, F is not saved correctley. On disk it size is only 1 KB as
>> output from saveSymbols(). When save from base is used everything is OK and
>> it gets the size of 141 KB. Which is strange since saveSymbols is using
>> save... Maybe it has something to do with outputing/saving big number of
>> symbols/objects at once... What am I doing wrong?
>> 
>> If I save F in fors R session using
>> save(F, file=paste(dwhFolderRaw, "F.RData", sep=""))
>> 
>> then F is saved to disk correctley (has size of 141K), in the second
>> session
>> everything works as it should:
>>> getSymbols("F", src='RData', extension="RData",
>> dir="D:/Temp/symbols/yahoo_hist/raw/")
>> [1] "F"
>>> 
>>> head(F)
>>          F.Open F.High F.Low F.Close F.Volume F.Adjusted
>> 1977-01-03  61.00  61.63 61.00   61.25   896300       0.50
>> 1977-01-04  61.25  61.25 59.00   59.50  1504600       0.49
>> 1977-01-05  59.50  59.88 58.50   58.75  1481600       0.48
>> 1977-01-06  59.00  60.38 59.00   59.75  1670300       0.49
>> 1977-01-07  59.75  60.50 59.63   60.13   940400       0.49
>> 1977-01-10  60.13  60.63 60.13   60.63  1334000       0.50
>>> tail(F)
>>          F.Open F.High F.Low F.Close F.Volume F.Adjusted
>> 2011-06-24  13.52  13.60 13.14   13.24 82707400      13.24
>> 2011-06-27  13.35  13.55 13.09   13.46 49987600      13.46
>> 2011-06-28  13.55  13.55 13.25   13.33 54013200      13.33
>> 2011-06-29  13.41  13.51 13.32   13.42 54105500      13.42
>> 2011-06-30  13.46  13.97 13.36   13.79 74076900      13.79
>> 2011-07-01  13.92  14.13 13.73   14.02 66304800      14.02
>> 
>> BTW: is there some sort of automatic way to get a list of
>> constituents/symbols of S&P 500? I tried using code in the comments posted
>> by Joshua Ulrich on this site http://www.maxdama.com/?p=148 and here
>> 
>> http://www.mathworks.com/matlabcentral/fileexchange/23569-get-trading-data-from-yahoo-in-your-matlab-workpace-or-excel
>> :
>> require(quantmod)
>> url <- "
>> 
>> http://www2.standardandpoors.com/servlet/Satellite?pagename=spcom/page/download&sectorid=%20%3E%20%2700%27&itemname=%3E=%20%271%27&dt=07-MAY-2009&indexcode=500
>> "
>> # Read in CSV from S&P website
>> x <- read.csv(url)
>> # Pull the first 10 symbols from Yahoo
>> symbols <- paste(x[1:10,'Symbol'],collapse=";")
>> getSymbols(symbols, env=.GlobalEnv)
>> 
>> It is not working for dates beyond 2010. Any alternative ways?
>> 
>> Thanks in advance for any ideas what might be wrong.
>> 
>> Kind regards,
>> Samo.
>> 
>>       [[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>> 
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From harunozkan at gmail.com  Mon Jul  4 01:57:37 2011
From: harunozkan at gmail.com (Harun Ozkan)
Date: Mon, 04 Jul 2011 02:57:37 +0300
Subject: [R-SIG-Finance] Simulating inhomogeneous Poisson process
 without loop
In-Reply-To: <149C1705-034A-4B16-B64D-EB17F384EBC7@earthlink.net>
References: <CAA35csxxc+C56=zmONLZkNdJWUcKm58gB_pUoou8Y=EvphCGAg@mail.gmail.com>
	<149C1705-034A-4B16-B64D-EB17F384EBC7@earthlink.net>
Message-ID: <4E1101F1.2020105@gmail.com>



dt=.01;
t=seq(0, .5, by=dt)
apply(matrix(t),  1,  function (x)  { rbinom(1,1,prob=x  )} )

would produce a  series of Bernoulli trials with success probability t  
\in  [0, .5].
  In my humble opinion, this style is more pertinent in terms of the 
programming logic of R although I am not very sure about the efficiency.

All the best.

7/3/2011 7:09 PM, Krishna wrote:
> A reproducible example would help, have you tried FOREACH
>
>
>
> On Jul 3, 2011, at 7:53 AM, Tristan Linke <tristan.linke at gmail.com> 
> wrote:
>
>> Dear all
>>
>> I want to simulate a stochastic jump variance process in which N is
>> Bernoulli (Poisson approximation) with intensity lambda0 + lambda1*Vt.
>> lambda0 is constant and lambda1 can be interpreted as a regression
>> coefficient on the current variance level Vt. J is the scaling factor
>>
>> How can I rewrite this avoiding the loop structure which is very
>> time-consuming for long simulations?
>>
>> for (i in 1:N){
>> ...
>> N <- rbinom(n=1, size=1, prob=(lambda0+lambda1*Vt))
>> Vt <- ... + J*N
>> ..
>> }
>>
>> P.S. This is going towards the Duffie, Pan, Singleton 2000 Transform 
>> Pricing
>> paper, here stochastic volatility with state-dependent correlated jumps
>> (Eraker 2004).
>>
>> Thanks a lot in advance.
>>
>>    [[alternative HTML version deleted]]


From stef_der_chef at yahoo.de  Mon Jul  4 12:09:45 2011
From: stef_der_chef at yahoo.de (stefan strunz)
Date: Mon, 4 Jul 2011 11:09:45 +0100 (BST)
Subject: [R-SIG-Finance] semi-nonparametric density function
Message-ID: <1309774185.30956.YahooMailClassic@web27406.mail.ukl.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110704/02cf712c/attachment.pl>

From mayouf.k at gmail.com  Mon Jul  4 12:10:26 2011
From: mayouf.k at gmail.com (mayouf.k)
Date: Mon, 4 Jul 2011 03:10:26 -0700 (PDT)
Subject: [R-SIG-Finance] High performance computing with R
In-Reply-To: <BANLkTim+HaNzwm0nZRCXkZ9RqsTfZfmj_Q@mail.gmail.com>
References: <BANLkTim+HaNzwm0nZRCXkZ9RqsTfZfmj_Q@mail.gmail.com>
Message-ID: <1309774226050-3643277.post@n4.nabble.com>

hi mr MASERATI,

glad to see u r using R like me, im developing a package to score trading
strategies if u want to talk about it,
fais signe maseratien lol

--
View this message in context: http://r.789695.n4.nabble.com/High-performance-computing-with-R-tp3622249p3643277.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From ezivot at u.washington.edu  Mon Jul  4 20:14:41 2011
From: ezivot at u.washington.edu (Eric Zivot)
Date: Mon, 4 Jul 2011 11:14:41 -0700 (PDT)
Subject: [R-SIG-Finance] semi-nonparametric density function
In-Reply-To: <1309774185.30956.YahooMailClassic@web27406.mail.ukl.yahoo.com>
Message-ID: <alpine.LRH.2.01.1107041114410.15091@hymn31.u.washington.edu>

The SNP density model is coded in in S+FinMetrics. However, George Tauchen at Duke has the source code in Fortran and in C++ on his website and you can try to compile and link it in R (good luck). It is essentially a Graham-Charile expansion (edgeworth type expansion) around the normal distribution involving Hermite polynomials and is a fairly standard expansion used in Statistics. 
****************************************************************
*  Eric Zivot                  			               *
*  Robert Richards Chaired Professor of Economics              *
*  Department of Economics                                     *
*  Adjunct Professor of Finance                                *
*  Adjunct Professor of Statistics
*  Box 353330                  email:  ezivot at u.washington.edu *
*  University of Washington    phone:  206-543-6715            *
*  Seattle, WA 98195-3330                                      *                                                           *
*  www:  http://faculty.washington.edu/ezivot                  *
****************************************************************

On Mon, 4 Jul 2011, stefan strunz wrote:

> Hi guys,
>
> I am trying to understand Bao's paper "Comparing Density Forecast Models (2007)". Specifically, page 6, link:
> http://www.faculty.ucr.edu/~taelee/paper/BaoLeeSaltoglu_KLIC.pdf
>
> There, he constructs an AR(p) process, with innovations which are from the semi-nonparametric density function of (Gallant and Nychka - "Semi-nonparametric maximum likelihood estimation" 1987). From what I understand, this density "nests" the standard normal distribution, so that if the data is really standard normally distributed, then the density degenerates to N(0,1).
>
> I tried looking for it on rseek.org and google, but couldn't find anything - even on.? Has anybody had some experience with it, or any idea where to find code for it?
> Would greatly appreciate any help!
>
> Best Regards,
>
> Stefan
>
> 	[[alternative HTML version deleted]]
>
>


From krcabrer at une.net.co  Tue Jul  5 00:47:09 2011
From: krcabrer at une.net.co (Kenneth Roy Cabrera Torres)
Date: Mon, 04 Jul 2011 17:47:09 -0500
Subject: [R-SIG-Finance] FinCenter in timeSeries with "merge",
	"cbind" and "rbind"
Message-ID: <1309819629.918.5.camel@kenneth-desktop>

Hi R users:

When I try to merge or bind (cbind or rbind) two series,
both with a "FinCenter" different that GMT, the
result is "GMT" not the original financial center?

What am I doing wrong?

######################################################
require(timeSeries)

getRmetricsOptions("myFinCenter")
setRmetricsOptions(myFinCenter = "America/Bogota")
getRmetricsOptions("myFinCenter")

fechas <- format(timeCalendar(2010, sample(12, 6)))
datos <- matrix(round(rnorm(6), 3))
t1 <- sort(timeSeries(datos, fechas, units = "A"))
t1
 
fechas <- format(timeCalendar(2010, sample(12, 6)))
datos <- matrix(round(rnorm(6), 3))
t2 <- sort(timeSeries(datos, fechas, units = "B"))
t2

merge(t1,t2)
cbind(t1,t2)
rbind(t1,t2)
######################################################

Thank you for your help.

Kenneth


From noahsilverman at ucla.edu  Tue Jul  5 07:53:50 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Mon, 4 Jul 2011 22:53:50 -0700
Subject: [R-SIG-Finance] Iterating through subset of XTS object
Message-ID: <46844F86-BCCC-482B-A7D8-F1C26875349D@ucla.edu>

Hi,

I have an xts object with 1 minute bars of trading data.

I want to select a subset, then iterate through each bar.  The "obvious" solution doesn't work:

For each bar in the loop, I want to access all the fields (open, close, volume, etc.)


I tried the following, but it doesn't work:

----------------------------------------------
for( one in bars['T10:00/T10"30', ]){
	print(one$open)
	print(one$close)
}
---------------------------------------------

Note: I DO need the loop for the code I'm writing.  

Can someone suggest the proper way to do this?

Thanks!

--
Noah Silverman
UCLA Department of Statistics
8117 Math Sciences Building
Los Angeles, CA 90095


From jeff.a.ryan at gmail.com  Tue Jul  5 15:10:07 2011
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Tue, 5 Jul 2011 08:10:07 -0500
Subject: [R-SIG-Finance] Iterating through subset of XTS object
In-Reply-To: <46844F86-BCCC-482B-A7D8-F1C26875349D@ucla.edu>
References: <46844F86-BCCC-482B-A7D8-F1C26875349D@ucla.edu>
Message-ID: <A7D08F7E-2467-41E6-AC9F-1A71BDD16564@gmail.com>



Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Jul 5, 2011, at 12:53 AM, Noah Silverman <noahsilverman at ucla.edu> wrote:

> Hi,
> 
> I have an xts object with 1 minute bars of trading data.
> 
> I want to select a subset, then iterate through each bar.  The "obvious" solution doesn't work:
> 
> For each bar in the loop, I want to access all the fields (open, close, volume, etc.)
> 
> 
> I tried the following, but it doesn't work:
> 
> ----------------------------------------------
> for( one in bars['T10:00/T10"30', ]){
>    print(one$open)
>    print(one$close)
> }
> ---------------------------------------------
> 

Your solution isn't really obvious enough to R :-)

Try a very basic loop like

for(i in 1:nrow(xts_obj)) {
  xts_obj[i]
}

And make sure you subset by time first to avoid repeating that. 

You could also use apply

In general this is more an R-help question, as it has nothing to do with finance. 


> Note: I DO need the loop for the code I'm writing.  
> 

You might be surprised that this is likely not true ... But you probably expected someone to point that out. 
> Can someone suggest the proper way to do this?
> 

Best,
Jeff
> Thanks!
> 
> --
> Noah Silverman
> UCLA Department of Statistics
> 8117 Math Sciences Building
> Los Angeles, CA 90095
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From schmidbe at in.tum.de  Tue Jul  5 15:25:15 2011
From: schmidbe at in.tum.de (Markus Schmidberger)
Date: Tue, 05 Jul 2011 15:25:15 +0200
Subject: [R-SIG-Finance] Running R on a Computer Cluster in the Cloud -
	cloudnumbers.com
Message-ID: <1309872315.2561.39.camel@schmidb-TravelMate8572TG>

Dear R community,

cloudnumbers.com provides researchers and companies with the resources
to perform high performance calculations in the cloud. As
cloudnumbers.com's community manager I may invite you to register and
test R on a computer cluster in the cloud for free:
http://my.cloudnumbers.com/register

Our aim is to change the way of research collaboration is done today by
bringing together scientists and businesses from all over the world on a
single platform. cloudnumbers.com is a Berlin (Germany) based
international high-tech startup striving for enabling everyone to
benefit from the High Performance Computing related advantages of the
cloud. We provide easy access to applications running on any kind of
computer hardware: from single core high memory machines up to 1000
cores computer clusters.

Our platform provides several advantages:

* Turn fixed into variable costs and pay only for the capacity you need.
Watch our latest saving costs with cloudnumbers.com video:
http://www.youtube.com/watch?v=ln_BSVigUhg&feature=player_embedded

* Enter the cloud using an intuitive and user friendly platform. Watch
our latest cloudnumbers.com in a nutshell video:
http://www.youtube.com/watch?v=0ZNEpR_ElV0&feature=player_embedded

* Be released from ongoing technological obsolescence and continuous
maintenance costs (e.g. linking to libraries or system dependencies)

* Accelerated your R, C, C++, Fortran, Python, ... calculations through
parallel processing and great computing capacity - more than 1000 cores
are available and GPUs are coming soon.

* Share your results worldwide (coming soon).

* Get high speed access to public databases.

* We have developed a security architecture that meets high requirements
of data security and privacy. Read our security white paper:
http://d1372nki7bx5yg.cloudfront.net/wp-content/uploads/2011/06/cloudnumberscom-security.whitepaper.pdf


This is only a selection of our top features. To get more information
check out our web-page (http://www.cloudnumbers.com/) or follow our blog
about cloud computing, HPC and HPC applications (with R):
http://cloudnumbers.com/blog

Register and test for free now at cloudnumbers.com:
http://my.cloudnumbers.com/register

We are looking forward to get your feedback and consumer insights.

Best
Markus


-- 
Dr. rer. nat. Markus Schmidberger 
Senior Community Manager 

Cloudnumbers.com GmbH
Chausseestra?e 6
10119 Berlin 

www.cloudnumbers.com 
E-Mail: markus.schmidberger at cloudnumbers.com 


************************* 
Amtsgericht M?nchen, HRB 191138 
Gesch?ftsf?hrer: Erik Muttersbach, Markus Fensterer, Moritz v. 
Petersdorff-Campen 



Diese Nachricht kann vertrauliche Informationen enthalten. Sollten Sie 
nicht der vorgesehene Empf?nger sein, so bitten wir um eine kurze 
Nachricht. Jede unbefugte Weiterleitung oder Fertigung einer Kopie ist 
unzul?ssig. Da wir nicht die Echtheit oder  Vollst?ndigkeit der in 
dieser Nachricht enthaltenen Informationen garantieren k?nnen, 
schlie?en wir die rechtliche Verbindlichkeit der vorstehenden 
Erkl?rungen und ?u?erungen aus. 
This message may contain confidential information. If yo...{{dropped:6}}


From josh.m.ulrich at gmail.com  Tue Jul  5 15:30:38 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 5 Jul 2011 08:30:38 -0500
Subject: [R-SIG-Finance] Iterating through subset of XTS object
In-Reply-To: <46844F86-BCCC-482B-A7D8-F1C26875349D@ucla.edu>
References: <46844F86-BCCC-482B-A7D8-F1C26875349D@ucla.edu>
Message-ID: <CAPPM_gRepd1MJSKArDKjkmqkM5eq618=xA+Ria8yZocw233F4A@mail.gmail.com>

On Tue, Jul 5, 2011 at 12:53 AM, Noah Silverman <noahsilverman at ucla.edu> wrote:
> Hi,
>
> I have an xts object with 1 minute bars of trading data.
>
> I want to select a subset, then iterate through each bar. ?The "obvious" solution doesn't work:
>
> For each bar in the loop, I want to access all the fields (open, close, volume, etc.)
>
>
> I tried the following, but it doesn't work:
>
> ----------------------------------------------
> for( one in bars['T10:00/T10"30', ]){
> ? ? ? ?print(one$open)
> ? ? ? ?print(one$close)
> }
> ---------------------------------------------
>

A reproducible example would have been nice (a "bars" object and code
without syntax errors).

You're going to have this issue with a lot of objects and for loops
because ?"for" says that seq (the part of a for loop after in) is
"[A]n expression evaluating to a vector (including a list and an
expression) or to a pairlist or 'NULL'".  xts objects are not strictly
vectors.

> is.vector(bars['T10:00/T10:30',])
[1] FALSE

So it gets coerced to numeric.

> as.numeric(bars['T10:00/T10:30',])
[1] 3 4 5 6 8 7 6 5

> Note: I DO need the loop for the code I'm writing.
>
> Can someone suggest the proper way to do this?
>

The proper way is to loop over the indices of the object.

for(i in 1:NROW(bars['T10:00/T10:30',])) {
  bar <- bars[i,]
  # do stuff
}

> Thanks!
>
> --
> Noah Silverman
> UCLA Department of Statistics
> 8117 Math Sciences Building
> Los Angeles, CA 90095
>

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com


From krcabrer at une.net.co  Wed Jul  6 14:58:38 2011
From: krcabrer at une.net.co (Kenneth Roy Cabrera Torres)
Date: Wed, 06 Jul 2011 07:58:38 -0500
Subject: [R-SIG-Finance] [R]  FinCenter in timeSeries with "merge",
 "cbind" and "rbind"
In-Reply-To: <A12CB68F-3572-4E99-AF07-5A963A98CD04@comcast.net>
References: <1309819629.918.5.camel@kenneth-desktop>
	<A12CB68F-3572-4E99-AF07-5A963A98CD04@comcast.net>
Message-ID: <1309957118.3283.6.camel@kenneth-desktop>

Hi R users:

I try with "zone" option in "timeSeries" function,
but stills to show "GMT", not the Financial Center,
that I try to use:

Dear Davin Winsemius:
I don't understand what are you saying to me:
  
> So why don't you add something meaningful to your code (... that is not  
> presented in a reproducible manner for testing.)

It is not a "reproducible manner for testing"?

Help me to show it in a accurate way.

Thank you very much..

Reproducible code:

#######################################################
require(timeSeries)

getRmetricsOptions("myFinCenter")
setRmetricsOptions(myFinCenter = "America/Bogota")
getRmetricsOptions("myFinCenter")

fechas <- format(timeCalendar(2010, sample(12, 6)))
datos <- matrix(round(rnorm(6), 3))
t1 <- sort(timeSeries(datos, fechas, units =
"A",zone=getRmetricsOptions("myFinCenter")))
t1
 
fechas <- format(timeCalendar(2010, sample(12, 6)))
datos <- matrix(round(rnorm(6), 3))
t2 <- sort(timeSeries(datos, fechas, units =
"B",zone=getRmetricsOptions("myFinCenter")))
t2

merge(t1,t2)

cbind(t1,t2)

rbind(t1,t2)
######################################################



El lun, 04-07-2011 a las 22:41 -0400, David Winsemius escribi?:
> On Jul 4, 2011, at 6:47 PM, Kenneth Roy Cabrera Torres wrote:
> 
> > Hi R users:
> >
> > When I try to merge or bind (cbind or rbind) two series,
> > both with a "FinCenter" different that GMT, the
> > result is "GMT" not the original financial center?
> 
> It's not in the help(cbind.timeSeries) page but looking at the  
> function  (and at the documentation for the timeSeries class) you see  
> that there is a "zone" argument and that it is "GMT" by default. So  
> why don't you add something meaningful to your code (... that is not  
> presented in a reproducible manner for testing.)
> 
> It is listed in the documentation as zone="", but in the cbind  
> function call, the code is zone="GMT". It appears that the "zone"  
> argument might be for input and the FinCenter might be for output in  
> the help page for timeDate, but I think that aspect of the various  
> parts of the documentation is rather vague and might do with a bit of  
> clarification.
>


From irasharenow100 at yahoo.com  Wed Jul  6 21:14:08 2011
From: irasharenow100 at yahoo.com (Ira Sharenow)
Date: Wed, 6 Jul 2011 12:14:08 -0700
Subject: [R-SIG-Finance] Correlations by season
Message-ID: <002101cc3c10$e2a80ff0$4401a8c0@IraHP>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110706/e2505331/attachment.pl>

From csun at CFR.MsState.Edu  Wed Jul  6 23:03:06 2011
From: csun at CFR.MsState.Edu (Changyou Sun)
Date: Wed, 6 Jul 2011 16:03:06 -0500
Subject: [R-SIG-Finance] Piecewise distribution function estimation with
	Generalized Pareto for tail
Message-ID: <9E8CBEC169F6C94D8FFD9E97AC051998016E257B@mail.cfr.msstate.edu>

Hello all,

I am trying to estimate the cumulative distribution function for a
single stock return time series. A piecewise estimation is composed of
three parts: parametric generalized Pareto (GP) for the lower tail (10%
of the observation), non-parametric kernel-smoothed interior (80% of the
observations), and GP for the upper tail (10%). I wonder if anyone has
clue about this in R.

The software of Matlab has a function called 'paretotails' in the
Econometrics Toolbox to do the estimation. On this site, a couple of old
messages were related but no clear answers were given.

Any help is greatly appreciated.


Edwin Sun


From alexios at 4dscape.com  Wed Jul  6 23:20:13 2011
From: alexios at 4dscape.com (alexios)
Date: Wed, 6 Jul 2011 22:20:13 +0100
Subject: [R-SIG-Finance] Piecewise distribution function estimation with
 Generalized Pareto for tail
In-Reply-To: <9E8CBEC169F6C94D8FFD9E97AC051998016E257B@mail.cfr.msstate.edu>
References: <9E8CBEC169F6C94D8FFD9E97AC051998016E257B@mail.cfr.msstate.edu>
Message-ID: <4E14D18D.2040906@4dscape.com>

Try the spd (semi-parametric distribution) package on CRAN.

Regards,
Alexios

On 06/07/2011 22:03, Changyou Sun wrote:
> Hello all,
>
> I am trying to estimate the cumulative distribution function for a
> single stock return time series. A piecewise estimation is composed of
> three parts: parametric generalized Pareto (GP) for the lower tail (10%
> of the observation), non-parametric kernel-smoothed interior (80% of the
> observations), and GP for the upper tail (10%). I wonder if anyone has
> clue about this in R.
>
> The software of Matlab has a function called 'paretotails' in the
> Econometrics Toolbox to do the estimation. On this site, a couple of old
> messages were related but no clear answers were given.
>
> Any help is greatly appreciated.
>
>
> Edwin Sun
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>


From csun at cfr.msstate.edu  Wed Jul  6 23:47:55 2011
From: csun at cfr.msstate.edu (Edwin Sun)
Date: Wed, 6 Jul 2011 14:47:55 -0700 (PDT)
Subject: [R-SIG-Finance] Piecewise distribution function estimation with
 Generalized Pareto for tail
In-Reply-To: <9E8CBEC169F6C94D8FFD9E97AC051998016E257B@mail.cfr.msstate.edu>
References: <9E8CBEC169F6C94D8FFD9E97AC051998016E257B@mail.cfr.msstate.edu>
Message-ID: <1309988875773-3650070.post@n4.nabble.com>

Thanks a lot. That is what I need. - Edwin

--
View this message in context: http://r.789695.n4.nabble.com/Piecewise-distribution-function-estimation-with-Generalized-Pareto-for-tail-tp3649998p3650070.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From noahsilverman at ucla.edu  Thu Jul  7 22:27:53 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Thu, 7 Jul 2011 13:27:53 -0700
Subject: [R-SIG-Finance] How to know when an XTS row is at a particular
	interval
Message-ID: <E94FAB52-F687-4497-9603-D88C0939656A@ucla.edu>

Hi,


I have a big dataset of tick data.  (Actual transactions at sub-second frequency)

I've used R to convert this to an xts object.

Iterating through the series to simulate a trading day.

I'd like to know when a particular transaction is "on the minute" or "on the 5 minute" mark.  Of course, I can use all the great functions of xts to convert the series to bars of any frequency, but that's not what I want.  I'd like to iterate over all the transaction and then somehow know when I've hit a bar boundary.

One possible issue is if I don't have a transaction exactly at the bar.  (More of a theoretical question.)  For example, If I have a transaction at 11:59:59, and then the next transaction is at 12:00:01.  Then no transaction occurred exactly on the 1 minute boundary.  I'm not sure the best way to handle this.

The general "big picture' concept is that a trading strategy might only want to trigger on 5 minute bars, but I'd like to keep updating some of my indicators as individual trades flow in.  

Thoughts?


--
Noah Silverman
UCLA Department of Statistics
8117 Math Sciences Building
Los Angeles, CA 90095


From brian at braverock.com  Thu Jul  7 22:42:10 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 07 Jul 2011 15:42:10 -0500
Subject: [R-SIG-Finance] How to know when an XTS row is at a particular
 interval
In-Reply-To: <E94FAB52-F687-4497-9603-D88C0939656A@ucla.edu>
References: <E94FAB52-F687-4497-9603-D88C0939656A@ucla.edu>
Message-ID: <1310071330.17786.27.camel@brian-rcg>

On Thu, 2011-07-07 at 13:27 -0700, Noah Silverman wrote:
> Hi,
> 
> 
> I have a big dataset of tick data.  (Actual transactions at sub-second frequency)
> 
> I've used R to convert this to an xts object.
> 
> Iterating through the series to simulate a trading day.
> 
> I'd like to know when a particular transaction is "on the minute" or "on the 5 minute" mark.  Of course, I can use all the great functions of xts to convert the series to bars of any frequency, but that's not what I want.  I'd like to iterate over all the transaction and then somehow know when I've hit a bar boundary.

With actual ticks, there will be few or no trades 'on the mark'. This is
why most tick-level analysis relies on the prevailing bid and offer,
since there is always *some* real price at any given time, even though
trades happen at discrete times.

Anyway, the function you need is 'endpoints', which will give you the
closest stamp to the mark, at whatever periodicity you want.

Then you can filter for the almost nonexistant transactions 'on the
mark'.


> One possible issue is if I don't have a transaction exactly at the bar.  (More of a theoretical question.)  For example, If I have a transaction at 11:59:59, and then the next transaction is at 12:00:01.  Then no transaction occurred exactly on the 1 minute boundary.  I'm not sure the best way to handle this.
> 
> The general "big picture' concept is that a trading strategy might only want to trigger on 5 minute bars, but I'd like to keep updating some of my indicators as individual trades flow in.  

Use bids and offers.

> Thoughts?
> 
> 
> --
> Noah Silverman
> UCLA Department of Statistics
> 8117 Math Sciences Building
> Los Angeles, CA 90095
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From ustaudinger at gmail.com  Thu Jul  7 22:46:29 2011
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Thu, 7 Jul 2011 22:46:29 +0200
Subject: [R-SIG-Finance] How to know when an XTS row is at a particular
	interval
In-Reply-To: <E94FAB52-F687-4497-9603-D88C0939656A@ucla.edu>
References: <E94FAB52-F687-4497-9603-D88C0939656A@ucla.edu>
Message-ID: <CAMrz3D1hbTgpwGL1Vp=7aVV9OEFbd++3cOZUW4kXicC7nxJyEA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110707/bbacb17b/attachment.pl>

From noahsilverman at ucla.edu  Thu Jul  7 23:01:35 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Thu, 7 Jul 2011 14:01:35 -0700
Subject: [R-SIG-Finance] How to know when an XTS row is at a particular
	interval
In-Reply-To: <CAMrz3D1hbTgpwGL1Vp=7aVV9OEFbd++3cOZUW4kXicC7nxJyEA@mail.gmail.com>
References: <E94FAB52-F687-4497-9603-D88C0939656A@ucla.edu>
	<CAMrz3D1hbTgpwGL1Vp=7aVV9OEFbd++3cOZUW4kXicC7nxJyEA@mail.gmail.com>
Message-ID: <F7FA4AD3-6109-4114-BEB9-0AE6BCCFA691@ucla.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110707/d18c449f/attachment.pl>

From ustaudinger at gmail.com  Thu Jul  7 23:10:45 2011
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Thu, 7 Jul 2011 23:10:45 +0200
Subject: [R-SIG-Finance] How to know when an XTS row is at a particular
	interval
In-Reply-To: <F7FA4AD3-6109-4114-BEB9-0AE6BCCFA691@ucla.edu>
References: <E94FAB52-F687-4497-9603-D88C0939656A@ucla.edu>
	<CAMrz3D1hbTgpwGL1Vp=7aVV9OEFbd++3cOZUW4kXicC7nxJyEA@mail.gmail.com>
	<F7FA4AD3-6109-4114-BEB9-0AE6BCCFA691@ucla.edu>
Message-ID: <CAMrz3D32A_AgFv0CD4bk7N8Targw92KypcAgb+Z=v+iA9Jhq9g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110707/4bdc53d1/attachment.pl>

From holger.koemm at ku-eichstaett.de  Fri Jul  8 11:09:34 2011
From: holger.koemm at ku-eichstaett.de (=?iso-8859-1?Q?Holger_K=F6mm?=)
Date: Fri, 8 Jul 2011 11:09:34 +0200
Subject: [R-SIG-Finance] Swing options
Message-ID: <000301cc3d4e$c175d490$44617db0$@koemm@ku-eichstaett.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110708/d4a90461/attachment.pl>

From subbu at sssu.edu.in  Fri Jul  8 11:42:54 2011
From: subbu at sssu.edu.in (Subramanian S)
Date: Fri, 8 Jul 2011 15:12:54 +0530
Subject: [R-SIG-Finance] How to Get option prices of first and expiry date
	alone
Message-ID: <CALS_8bFaHVz9MfHVUT5jfEJb+QoSyZg5GJYWQ99Mxhu+z8Cwiw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110708/96f85137/attachment.pl>

From petrovaa at gmail.com  Fri Jul  8 12:23:42 2011
From: petrovaa at gmail.com (tonyp)
Date: Fri, 8 Jul 2011 03:23:42 -0700 (PDT)
Subject: [R-SIG-Finance] statistical remedy needed
Message-ID: <1310120622101-3653641.post@n4.nabble.com>

Hi, 

I am trying to test for differences in means between two return (time)
series. However, the Ljung-Box test is significant due to the long-memory
structure of the series ie. autocorrelation is present. I tried to
difference twice which is standard (didn't want to overdifference) and still
I have, as expected, series correlation. 

Is there any function in R or a technique some of you guys can suggest me to
filter the autocorrelation in order to apply my test?

t.test(ts1, ts2 ,alternative='greater',
paired=TRUE,var.equal=FALSE, conf.level=0.95)

I would totally appreciate if any of you quant minds outthere has done work
on that. Thank you in advance.

Best,
TP

--
View this message in context: http://r.789695.n4.nabble.com/statistical-remedy-needed-tp3653641p3653641.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From markleeds2 at gmail.com  Fri Jul  8 13:42:26 2011
From: markleeds2 at gmail.com (Mark Leeds)
Date: Fri, 8 Jul 2011 07:42:26 -0400
Subject: [R-SIG-Finance] statistical remedy needed
In-Reply-To: <1310120622101-3653641.post@n4.nabble.com>
References: <1310120622101-3653641.post@n4.nabble.com>
Message-ID: <CAHz+bWYWvXcOY_b+OEgVztELFR0n35BB3E85zgKMfA_cwtXuqA@mail.gmail.com>

hi: the paired t-test is used when you want to reduce variance ( by
differencing the
same observational unit ) or reduce the amount of confounding. in this
case, I think it's more appropriate to use a regular t-test on two
populations. that will also get rid of the autocorrelation problem. of
course, if the variances of the 2 series differs greatly,
then you have a new problem ( and should use welch t-test).

                                                                           mark






On Fri, Jul 8, 2011 at 6:23 AM, tonyp <petrovaa at gmail.com> wrote:
> Hi,
>
> I am trying to test for differences in means between two return (time)
> series. However, the Ljung-Box test is significant due to the long-memory
> structure of the series ie. autocorrelation is present. I tried to
> difference twice which is standard (didn't want to overdifference) and still
> I have, as expected, series correlation.
>
> Is there any function in R or a technique some of you guys can suggest me to
> filter the autocorrelation in order to apply my test?
>
> t.test(ts1, ts2 ,alternative='greater',
> paired=TRUE,var.equal=FALSE, conf.level=0.95)
>
> I would totally appreciate if any of you quant minds outthere has done work
> on that. Thank you in advance.
>
> Best,
> TP
>
> --
> View this message in context: http://r.789695.n4.nabble.com/statistical-remedy-needed-tp3653641p3653641.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From andyzhu35 at yahoo.com  Fri Jul  8 13:54:28 2011
From: andyzhu35 at yahoo.com (Andy Zhu)
Date: Fri, 8 Jul 2011 04:54:28 -0700 (PDT)
Subject: [R-SIG-Finance] statistical remedy needed
In-Reply-To: <1310120622101-3653641.post@n4.nabble.com>
References: <1310120622101-3653641.post@n4.nabble.com>
Message-ID: <1310126068.69019.YahooMailNeo@web65903.mail.ac4.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110708/8f6c4a64/attachment.pl>

From petrovaa at gmail.com  Fri Jul  8 14:38:18 2011
From: petrovaa at gmail.com (tonyp)
Date: Fri, 8 Jul 2011 05:38:18 -0700 (PDT)
Subject: [R-SIG-Finance] statistical remedy needed
In-Reply-To: <CAHz+bWYWvXcOY_b+OEgVztELFR0n35BB3E85zgKMfA_cwtXuqA@mail.gmail.com>
References: <1310120622101-3653641.post@n4.nabble.com>
	<CAHz+bWYWvXcOY_b+OEgVztELFR0n35BB3E85zgKMfA_cwtXuqA@mail.gmail.com>
Message-ID: <1310128698715-3653980.post@n4.nabble.com>

Thanks for the reply, Mark and Andy. The reason I am using the paired t-test
is that I am comparing top 10% top performance of a benchmark and the
benchmark itself, therefore, the confounder is the benchmark per se. Correct
me if I am wrong! So if you think that I still should use the simple t-test
in this case as you say I am using the Welch one due to the high p-value
significance of the variance homogeneity test. Again, thanks for the quick
feedback guys. 

TP

--
View this message in context: http://r.789695.n4.nabble.com/statistical-remedy-needed-tp3653641p3653980.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From markleeds2 at gmail.com  Fri Jul  8 15:00:04 2011
From: markleeds2 at gmail.com (Mark Leeds)
Date: Fri, 8 Jul 2011 09:00:04 -0400
Subject: [R-SIG-Finance] statistical remedy needed
In-Reply-To: <1310128698715-3653980.post@n4.nabble.com>
References: <1310120622101-3653641.post@n4.nabble.com>
	<CAHz+bWYWvXcOY_b+OEgVztELFR0n35BB3E85zgKMfA_cwtXuqA@mail.gmail.com>
	<1310128698715-3653980.post@n4.nabble.com>
Message-ID: <CAHz+bWYVjPWwCRmfzQ76xCXX+VY_Sf_=tOmKav3MydYpSfvwYA@mail.gmail.com>

hi TP: I'm not sure of the best approach. To me, it would seem like,
if the returns
to the benchmark are auto-correlated ( which causes any  portfolio
tracking it to
have returns that are correlated ), then, if you subtract them each
period, that should remove the autocorrelation. I would create the
paired difference series and do the Box-Leung test again because I
don't think you should be getting correlated returns on the
differences. Good luck.





On Fri, Jul 8, 2011 at 8:38 AM, tonyp <petrovaa at gmail.com> wrote:
> Thanks for the reply, Mark and Andy. The reason I am using the paired t-test
> is that I am comparing top 10% top performance of a benchmark and the
> benchmark itself, therefore, the confounder is the benchmark per se. Correct
> me if I am wrong! So if you think that I still should use the simple t-test
> in this case as you say I am using the Welch one due to the high p-value
> significance of the variance homogeneity test. Again, thanks for the quick
> feedback guys.
>
> TP
>
> --
> View this message in context: http://r.789695.n4.nabble.com/statistical-remedy-needed-tp3653641p3653980.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From noahsilverman at ucla.edu  Sat Jul  9 21:37:40 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Sat, 9 Jul 2011 12:37:40 -0700
Subject: [R-SIG-Finance] How to know when an XTS row is at a particular
	interval
In-Reply-To: <1310071330.17786.27.camel@brian-rcg>
References: <E94FAB52-F687-4497-9603-D88C0939656A@ucla.edu>
	<1310071330.17786.27.camel@brian-rcg>
Message-ID: <ACA67B56-F9AB-447E-BC2E-D0EE3167B79F@ucla.edu>

Hi,

Endpoints won't always work for me either.  In order to use endpoints, I would need to know the whole series ahead of time.  

If I have transactions streaming in (Like from an IBrokers account) then I can't compute "endpoints".

I suppose that I could calculate the minutes and seconds of each transaction and then compare to the bar frequency I want, but that seems computationally excessive.

I guess what I want to do is that when a transaction arrives, ask, "Is this on the mark, or close enough to treat it as on the mark".

--
Noah Silverman
UCLA Department of Statistics
8117 Math Sciences Building
Los Angeles, CA 90095



On Jul 7, 2011, at 1:42 PM, Brian G. Peterson wrote:

> On Thu, 2011-07-07 at 13:27 -0700, Noah Silverman wrote:
>> Hi,
>> 
>> 
>> I have a big dataset of tick data.  (Actual transactions at sub-second frequency)
>> 
>> I've used R to convert this to an xts object.
>> 
>> Iterating through the series to simulate a trading day.
>> 
>> I'd like to know when a particular transaction is "on the minute" or "on the 5 minute" mark.  Of course, I can use all the great functions of xts to convert the series to bars of any frequency, but that's not what I want.  I'd like to iterate over all the transaction and then somehow know when I've hit a bar boundary.
> 
> With actual ticks, there will be few or no trades 'on the mark'. This is
> why most tick-level analysis relies on the prevailing bid and offer,
> since there is always *some* real price at any given time, even though
> trades happen at discrete times.
> 
> Anyway, the function you need is 'endpoints', which will give you the
> closest stamp to the mark, at whatever periodicity you want.
> 
> Then you can filter for the almost nonexistant transactions 'on the
> mark'.
> 
> 
>> One possible issue is if I don't have a transaction exactly at the bar.  (More of a theoretical question.)  For example, If I have a transaction at 11:59:59, and then the next transaction is at 12:00:01.  Then no transaction occurred exactly on the 1 minute boundary.  I'm not sure the best way to handle this.
>> 
>> The general "big picture' concept is that a trading strategy might only want to trigger on 5 minute bars, but I'd like to keep updating some of my indicators as individual trades flow in.  
> 
> Use bids and offers.
> 
>> Thoughts?
>> 
>> 
>> --
>> Noah Silverman
>> UCLA Department of Statistics
>> 8117 Math Sciences Building
>> Los Angeles, CA 90095
>> 
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
> 
> -- 
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
> 


From noahsilverman at ucla.edu  Sat Jul  9 21:39:13 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Sat, 9 Jul 2011 12:39:13 -0700
Subject: [R-SIG-Finance] Continuous Online GARCH
Message-ID: <7B66CEC2-BA1A-498C-A3B6-DC368172BC94@ucla.edu>

Hi,

In my readings, I've come across some mentions of  COGARCH which is a continuous estimation of GARCH as data streams in online.

I can't find any R library that does this.  Does anyone know of one.

Alternately, can someone outline the COGARCH algorithm in pseudo-code so that I can write my own in R or C?

--
Noah Silverman
UCLA Department of Statistics
8117 Math Sciences Building
Los Angeles, CA 90095


From stefano.iacus at unimi.it  Sat Jul  9 22:18:01 2011
From: stefano.iacus at unimi.it (stefano iacus)
Date: Sat, 09 Jul 2011 22:18:01 +0200
Subject: [R-SIG-Finance] Continuous Online GARCH
In-Reply-To: <7B66CEC2-BA1A-498C-A3B6-DC368172BC94@ucla.edu>
References: <7B66CEC2-BA1A-498C-A3B6-DC368172BC94@ucla.edu>
Message-ID: <631B08B7-38D3-4017-AB92-36A049C3BEFE@unimi.it>

You should check K.  Kl?ppelberg webpage or the relevant papers by she and her collaborators.
There you find a mix of the method of moments and quasi-likelihood to calibrate cogarch.
e.g. http://epub.ub.uni-muenchen.de/1827/1/paper_458.pdf

AFAIK, cogarch is not "continuous estimation of garch", is a continuos stochastic process with garch similarities, which you estimate on discrete data. Essentially based on L?vy models. A student of mine is working on some R code, but you find other ready-to-use solution, please spread the word :-)

stefano


On 9 Jul 2011, at 21:39, Noah Silverman wrote:

> Hi,
> 
> In my readings, I've come across some mentions of  COGARCH which is a continuous estimation of GARCH as data streams in online.
> 
> I can't find any R library that does this.  Does anyone know of one.
> 
> Alternately, can someone outline the COGARCH algorithm in pseudo-code so that I can write my own in R or C?
> 
> --
> Noah Silverman
> UCLA Department of Statistics
> 8117 Math Sciences Building
> Los Angeles, CA 90095
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


-----------------------------------
Stefano M. Iacus
Department of Economics,
Business and Statistics
University of Milan
Via Conservatorio, 7
I-20123 Milan - Italy
Ph.: +39 02 50321 461
Fax: +39 02 50321 505
http://www.economia.unimi.it/iacus
------------------------------------------------------------------------------------
Please don't send me Word or PowerPoint attachments if not 
absolutely necessary. See:
http://www.gnu.org/philosophy/no-word-attachments.html


From patrick at burns-stat.com  Sat Jul  9 22:21:39 2011
From: patrick at burns-stat.com (Patrick Burns)
Date: Sat, 09 Jul 2011 21:21:39 +0100
Subject: [R-SIG-Finance] Continuous Online GARCH
In-Reply-To: <7B66CEC2-BA1A-498C-A3B6-DC368172BC94@ucla.edu>
References: <7B66CEC2-BA1A-498C-A3B6-DC368172BC94@ucla.edu>
Message-ID: <4E18B853.9060908@burns-stat.com>

I don't know anything about that algorithm.
However, intraday garch is (or should be)
complicated because there is volatility
seasonality throughout the day.

On 09/07/2011 20:39, Noah Silverman wrote:
> Hi,
>
> In my readings, I've come across some mentions of  COGARCH which is a continuous estimation of GARCH as data streams in online.
>
> I can't find any R library that does this.  Does anyone know of one.
>
> Alternately, can someone outline the COGARCH algorithm in pseudo-code so that I can write my own in R or C?
>
> --
> Noah Silverman
> UCLA Department of Statistics
> 8117 Math Sciences Building
> Los Angeles, CA 90095
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From brian at braverock.com  Sat Jul  9 23:08:26 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Sat, 09 Jul 2011 16:08:26 -0500
Subject: [R-SIG-Finance] How to know when an XTS row is at a particular
 interval
In-Reply-To: <ACA67B56-F9AB-447E-BC2E-D0EE3167B79F@ucla.edu>
References: <E94FAB52-F687-4497-9603-D88C0939656A@ucla.edu>
	<1310071330.17786.27.camel@brian-rcg>
	<ACA67B56-F9AB-447E-BC2E-D0EE3167B79F@ucla.edu>
Message-ID: <1310245706.3905.60.camel@brian-desktop>

On Sat, 2011-07-09 at 12:37 -0700, Noah Silverman wrote:
> Hi,
> 
> Endpoints won't always work for me either.  In order to use endpoints, I would need to know the whole series ahead of time.  
> 
> If I have transactions streaming in (Like from an IBrokers account) then I can't compute "endpoints".

I'll note that you didn't say that you wanted to apply to streaming
data.  Your original post said:

"I have a big dataset of tick data.  (Actual transactions at sub-second
frequency)"

though you did say:

"Iterating through the series to simulate a trading day."

You didn't say that you ultimately wanted to apply the same algorithm to
streaming data.  All backtesting (trading simulation) involves some
amount of iteration through the data, assuming that there is some path
dependent logic (and real trading is always path dependent, though
path-independent assumptions may serve for simple things).

Even when 'iterating' through historical data, endpoints is still the
most efficient mechanism in R that I'm aware of.  Streaming data is
necessarily a different problem.

R doesn't have any native support for streaming data types that I am
aware of.  You need to use some sort of sampling or event loop
algorithm.


> I suppose that I could calculate the minutes and seconds of each transaction and then compare to the bar frequency I want, but that seems computationally excessive.
>
> I guess what I want to do is that when a transaction arrives, ask, "Is this on the mark, or close enough to treat it as on the mark".


Well, messages from an exchange are timestamped.  Use those.  Keep your
'last' transaction in a buffer, and then pop it onto a stack as soon as
you have an observation (transaction or not) that is at or past the
mark.

Jeff has previously reported being able to handle several thougsand
messages per second from IB in an event loop in R, which is probably
sufficient for most single-instrument modeling.

Regards,

   - Brian

> On Jul 7, 2011, at 1:42 PM, Brian G. Peterson wrote:
> 
> > On Thu, 2011-07-07 at 13:27 -0700, Noah Silverman wrote:
> >> Hi,
> >> 
> >> 
> >> I have a big dataset of tick data.  (Actual transactions at sub-second frequency)
> >> 
> >> I've used R to convert this to an xts object.
> >> 
> >> Iterating through the series to simulate a trading day.
> >> 
> >> I'd like to know when a particular transaction is "on the minute" or "on the 5 minute" mark.  Of course, I can use all the great functions of xts to convert the series to bars of any frequency, but that's not what I want.  I'd like to iterate over all the transaction and then somehow know when I've hit a bar boundary.
> > 
> > With actual ticks, there will be few or no trades 'on the mark'. This is
> > why most tick-level analysis relies on the prevailing bid and offer,
> > since there is always *some* real price at any given time, even though
> > trades happen at discrete times.
> > 
> > Anyway, the function you need is 'endpoints', which will give you the
> > closest stamp to the mark, at whatever periodicity you want.
> > 
> > Then you can filter for the almost nonexistant transactions 'on the
> > mark'.
> > 
> > 
> >> One possible issue is if I don't have a transaction exactly at the bar.  (More of a theoretical question.)  For example, If I have a transaction at 11:59:59, and then the next transaction is at 12:00:01.  Then no transaction occurred exactly on the 1 minute boundary.  I'm not sure the best way to handle this.
> >> 
> >> The general "big picture' concept is that a trading strategy might only want to trigger on 5 minute bars, but I'd like to keep updating some of my indicators as individual trades flow in.  
> > 
> > Use bids and offers.
> > 
> >> Thoughts?
> >> 
> >> 
> >> --
> >> Noah Silverman
> >> UCLA Department of Statistics
> >> 8117 Math Sciences Building
> >> Los Angeles, CA 90095
> >> 
> >> _______________________________________________
> >> R-SIG-Finance at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >> -- Subscriber-posting only. If you want to post, subscribe first.
> >> -- Also note that this is not the r-help list where general R questions should go.
> > 
> > -- 
> > Brian G. Peterson
> > http://braverock.com/brian/
> > Ph: 773-459-4973
> > IM: bgpbraverock
> > 
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From arun.kumar.saha at gmail.com  Sun Jul 10 12:20:04 2011
From: arun.kumar.saha at gmail.com (Arun Kumar Saha)
Date: Sun, 10 Jul 2011 15:50:04 +0530
Subject: [R-SIG-Finance] statistical remedy needed
Message-ID: <CAPVuaOdwo4WZ=Sa7mKZKBoiC8nauPmT3SApLAzbs58845WeZ4g@mail.gmail.com>

Hi tonyp, I have been following your thread from it's starting,
however the answers replied by my friends there could not convince me
greatly (probably I could not understand them properly!). For example
Andy said "One easy way may be remove autocorrelation first for both
series; then work on the residual series". In this case, the residual
series will trivially have zero mean in either case. So probably we
could not make any meaningful test (please correct me if I am wrong.)

However my suggestion is to think this problem from bivariate VAR
prospective. Assuming you observativations are stationary but
autocorrelated, you can easily assume those observations as
realization for some Stable VAR process. You can consider following
form of that stable VAR process:

(yt - mu) = A1(y[t-1] - mu) + A2(y[t-2] - mu) +... + error

here yt and mu both vector with length 2. Then you can construct a
valid test on mu1 = mu2 under suitable alternatives.

Seeking other comments on this approach.

Thanks and regards,
_____________________________________________________

Arun Kumar Saha, FRM
QUANTITATIVE RISK AND HEDGE CONSULTING SPECIALIST
Visit me at: http://in.linkedin.com/in/ArunFRM


From arsenwang at gmail.com  Mon Jul 11 03:23:26 2011
From: arsenwang at gmail.com (Heng Wang)
Date: Mon, 11 Jul 2011 09:23:26 +0800
Subject: [R-SIG-Finance] simulate a gram-charlier density
Message-ID: <CACz4ZnkUj=NEP9tRQSW_9iqj+8X-BfEOVG4T0v2WcSYfiLasXw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110711/2ee356bd/attachment.pl>

From krisanharia at gmail.com  Mon Jul 11 11:37:34 2011
From: krisanharia at gmail.com (player)
Date: Mon, 11 Jul 2011 02:37:34 -0700 (PDT)
Subject: [R-SIG-Finance] Connection failure
Message-ID: <1310377054413-3659077.post@n4.nabble.com>

Im trying to install the R metrics files 

source("http://www.rmetrics.org/Rmetrics.R")

The error I get is 

, "r", encoding = encoding) : 
        unable to open connection
In addition: Warning message:
unable to resolve 'www.rmetrics.org'. in: file(file, "r", encoding =
encoding) 

Can someone help?

--
View this message in context: http://r.789695.n4.nabble.com/Connection-failure-tp3659077p3659077.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From j_cuisinier at hotmail.com  Mon Jul 11 11:43:56 2011
From: j_cuisinier at hotmail.com (julien cuisinier)
Date: Mon, 11 Jul 2011 11:43:56 +0200
Subject: [R-SIG-Finance] Connection failure
In-Reply-To: <1310377054413-3659077.post@n4.nabble.com>
References: <1310377054413-3659077.post@n4.nabble.com>
Message-ID: <COL102-W62DE181489D8968CFEB5D58F450@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110711/90d0c807/attachment.pl>

From krcabrer at une.net.co  Mon Jul 11 12:46:06 2011
From: krcabrer at une.net.co (Kenneth Roy Cabrera Torres)
Date: Mon, 11 Jul 2011 05:46:06 -0500
Subject: [R-SIG-Finance] Problem setting "FinCenter" with cbind, rbind, merge
Message-ID: <1310381166.3399.2.camel@kenneth-desktop>

Hi R timeSeries users:

I try with "zone" option in "timeSeries" function,
but stills to show "GMT", not the Financial Center,
that I try to use:

Dear Davin Winsemius:
I don't understand what are you saying to me:
  
> So why don't you add something meaningful to your code (... that is
not  
> presented in a reproducible manner for testing.)

It is not a "reproducible manner for testing"?

Help me to show it in a accurate way.

Thank you very much..

Reproducible code:

#######################################################
require(timeSeries)

getRmetricsOptions("myFinCenter")
setRmetricsOptions(myFinCenter = "America/Bogota")
getRmetricsOptions("myFinCenter")

fechas <- format(timeCalendar(2010, sample(12, 6)))
datos <- matrix(round(rnorm(6), 3))
t1 <- sort(timeSeries(datos, fechas, units =
"A",zone=getRmetricsOptions("myFinCenter")))
t1
 
fechas <- format(timeCalendar(2010, sample(12, 6)))
datos <- matrix(round(rnorm(6), 3))
t2 <- sort(timeSeries(datos, fechas, units =
"B",zone=getRmetricsOptions("myFinCenter")))
t2

merge(t1,t2)

cbind(t1,t2)

rbind(t1,t2)
######################################################


From mgates at wdemail.com  Mon Jul 11 17:08:00 2011
From: mgates at wdemail.com (Michael Gates)
Date: Mon, 11 Jul 2011 09:08:00 -0600
Subject: [R-SIG-Finance] Back test 20 years
Message-ID: <002d01cc3fdc$5389b330$fa9d1990$@com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110711/bbd24c73/attachment.pl>

From guygreen at netvigator.com  Mon Jul 11 17:39:12 2011
From: guygreen at netvigator.com (Guy Green)
Date: Mon, 11 Jul 2011 08:39:12 -0700 (PDT)
Subject: [R-SIG-Finance] Back test 20 years
In-Reply-To: <002d01cc3fdc$5389b330$fa9d1990$@com>
References: <002d01cc3fdc$5389b330$fa9d1990$@com>
Message-ID: <1310398752438-3659907.post@n4.nabble.com>

Try reading your txt files into R and then combine them using rbind:

combined_data=rbind(data_1,data_2,data_3...)

Guy

Michael Gates wrote:
> 
> I want to back test a huge amount of stock data with one run.  I have not
> yet read the data into R.  It is comprised of 1000 symbols for the past 20
> years.  OHLCV are columns.  Dates are rows.  The number of rows exceeds 4
> million so I can't prepare it as a single .txt doc in either Excel or
> Word.
> 
> My hardware is:  1 TB HD,  8 GB DDR2 Ram and an Intel  Core2 Quad
> processor.
> 
> Any suggestions on best approach would be appreciated.
> 
> Thanks in advance,
> 
> Mike
> 


--
View this message in context: http://r.789695.n4.nabble.com/Back-test-20-years-tp3659877p3659907.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From ustaudinger at gmail.com  Mon Jul 11 17:44:20 2011
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Mon, 11 Jul 2011 17:44:20 +0200
Subject: [R-SIG-Finance] Back test 20 years
In-Reply-To: <1310398752438-3659907.post@n4.nabble.com>
References: <002d01cc3fdc$5389b330$fa9d1990$@com>
	<1310398752438-3659907.post@n4.nabble.com>
Message-ID: <CAMrz3D1y_fvUs6cToRWuuFxxN+Xpyfe5g7WO73nA=B0MdQxw_Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110711/3136b9b6/attachment.pl>

From jeffrey.ryan at lemnica.com  Mon Jul 11 18:04:41 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Mon, 11 Jul 2011 11:04:41 -0500
Subject: [R-SIG-Finance] Back test 20 years
In-Reply-To: <002d01cc3fdc$5389b330$fa9d1990$@com>
References: <002d01cc3fdc$5389b330$fa9d1990$@com>
Message-ID: <CABDUZc_KWbGNbMhaj8NL8-BP_q4qGvbhN75w+JU=YQzWig1gFg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110711/c763f64d/attachment.pl>

From nelson.ana at gmail.com  Mon Jul 11 22:27:38 2011
From: nelson.ana at gmail.com (Ana Nelson)
Date: Mon, 11 Jul 2011 21:27:38 +0100
Subject: [R-SIG-Finance] RBloomberg update on "Error in dimnames(x) <- dn :
 'dimnames' applied to non-array"
Message-ID: <CAJOva6FDMY9ik=QT4MZ+z53Urcbg=+p1Hk0OJOXUMJ6aaBJTEg@mail.gmail.com>

Several people have reported running into "Error in dimnames(x) <- dn
: 'dimnames' applied to non-array" when trying to run RBloomberg.

Having finally gotten a chance to investigate, I believe this is due
to recent changes in the rJava package, as Java objects rather than R
objects are being returned, hence we have a "non-array".

Unfortunately I will not be able to issue a fix for several weeks. In
the mean time, however, the following (untested) steps may act as a
work-around.

1) uninstall RBloomberg
2) uninstall rJava
3) install rJava version 0.8.8 or lower (.tgz files are available
http://www.rforge.net/rJava/files/)
4) reinstall RBloomberg via

install.packages("RBloomberg",repos="http://r.findata.org/")



I will have a proper fix as soon as I can, but I will probably not
have access to a terminal for several weeks. (If anyone is interested
in becoming involved in maintaining the RBloomberg package, please let
me know off-list.)

If you try this workaround, please reply and advise whether it solves
this issue.

Thanks,
Ana


From phhs80 at gmail.com  Tue Jul 12 12:36:28 2011
From: phhs80 at gmail.com (Paul Smith)
Date: Tue, 12 Jul 2011 11:36:28 +0100
Subject: [R-SIG-Finance] Tools to calculate resistances and supports
Message-ID: <CALS=5mpXYGHjtLGqMt6kAuYrj=c_TUc2kag4v8Sh1PMesriKXw@mail.gmail.com>

Dear All,

I have seen several analyses, which mention resistances and supports.
My question is: Is there some package in R to calculate those?

Thanks in advance,

Paulo


From j_cuisinier at hotmail.com  Tue Jul 12 14:06:29 2011
From: j_cuisinier at hotmail.com (julien cuisinier)
Date: Tue, 12 Jul 2011 14:06:29 +0200
Subject: [R-SIG-Finance] Tools to calculate resistances and supports
In-Reply-To: <CALS=5mpXYGHjtLGqMt6kAuYrj=c_TUc2kag4v8Sh1PMesriKXw@mail.gmail.com>
References: <CALS=5mpXYGHjtLGqMt6kAuYrj=c_TUc2kag4v8Sh1PMesriKXw@mail.gmail.com>
Message-ID: <COL102-W115FE6AA5024BA241433898F440@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110712/963b06db/attachment.pl>

From phhs80 at gmail.com  Tue Jul 12 16:02:59 2011
From: phhs80 at gmail.com (Paul Smith)
Date: Tue, 12 Jul 2011 15:02:59 +0100
Subject: [R-SIG-Finance] Tools to calculate resistances and supports
In-Reply-To: <COL102-W115FE6AA5024BA241433898F440@phx.gbl>
References: <CALS=5mpXYGHjtLGqMt6kAuYrj=c_TUc2kag4v8Sh1PMesriKXw@mail.gmail.com>
	<COL102-W115FE6AA5024BA241433898F440@phx.gbl>
Message-ID: <CALS=5moZzBX84hNYo9LrOd1fDw9RM9JaJ69hOOkOOtY-qv3gPQ@mail.gmail.com>

Thanks, Julien, for your helpful answer -- I am new on this mailing list.

Paul


On Tue, Jul 12, 2011 at 1:06 PM, julien cuisinier
<j_cuisinier at hotmail.com> wrote:
> Nice to see everyone read the posting guide & jeff's email from yesterday
> ;-)
>
> TTR will most probably do for your (loosely explained) purpose
>
> HTH,
> Julien
>
>
>
>
>
>> Date: Tue, 12 Jul 2011 11:36:28 +0100
>> From: phhs80 at gmail.com
>> To: r-sig-finance at r-project.org
>> Subject: [R-SIG-Finance] Tools to calculate resistances and supports
>>
>> Dear All,
>>
>> I have seen several analyses, which mention resistances and supports.
>> My question is: Is there some package in R to calculate those?
>>
>> Thanks in advance,
>>
>> Paulo
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>


From petrovaa at gmail.com  Tue Jul 12 16:13:52 2011
From: petrovaa at gmail.com (tonyp)
Date: Tue, 12 Jul 2011 07:13:52 -0700 (PDT)
Subject: [R-SIG-Finance] statistical remedy needed
In-Reply-To: <CAPVuaOdwo4WZ=Sa7mKZKBoiC8nauPmT3SApLAzbs58845WeZ4g@mail.gmail.com>
References: <1310120622101-3653641.post@n4.nabble.com>
	<CAPVuaOdwo4WZ=Sa7mKZKBoiC8nauPmT3SApLAzbs58845WeZ4g@mail.gmail.com>
Message-ID: <1310480032396-3662404.post@n4.nabble.com>

Hi Arun, 

Thank you for the reply. You are right. Statistics can be a very tricky
business; especially applied in fiance. As you are suggesting, I did the
problem under the VAR analytical framework. Another possibility I tried to
analyze the problem with was to take the difference and use GLS with
serially correlated residuals and test for intercept = 0 or not. 

However, thanks for the reply. 

Best wishes, 
Tony

--
View this message in context: http://r.789695.n4.nabble.com/statistical-remedy-needed-tp3653641p3662404.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From qqjwl at 163.com  Wed Jul 13 10:05:20 2011
From: qqjwl at 163.com (=?GBK?B?usLBotHH?=)
Date: Wed, 13 Jul 2011 16:05:20 +0800 (CST)
Subject: [R-SIG-Finance] Why does the curve() doesn't work for negative
 binomial distribution?
In-Reply-To: <mailman.3.1310464803.9800.r-sig-finance@r-project.org>
References: <mailman.3.1310464803.9800.r-sig-finance@r-project.org>
Message-ID: <479dee1f.ac93.131228756c0.Coremail.qqjwl@163.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110713/119d2901/attachment.pl>

From michael.weylandt at gmail.com  Wed Jul 13 15:19:53 2011
From: michael.weylandt at gmail.com (R. Michael Weylandt <michael.weylandt@gmail.com>)
Date: Wed, 13 Jul 2011 09:19:53 -0400
Subject: [R-SIG-Finance] Why does the curve() doesn't work for negative
 binomial distribution?
In-Reply-To: <CAAmySGMorgZ=hijNipMVLiWnmEzn2qWAZ3o0ZrhQz4xnoseGFQ@mail.gmail.com>
References: <mailman.3.1310464803.9800.r-sig-finance@r-project.org>
	<479dee1f.ac93.131228756c0.Coremail.qqjwl@163.com>
	<CAAmySGMorgZ=hijNipMVLiWnmEzn2qWAZ3o0ZrhQz4xnoseGFQ@mail.gmail.com>
Message-ID: <CAAmySGNUSOjJtmz8F+FQhQZOOt9GKpNcLGBYM5TWrrsNDE15Tg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110713/861f9f43/attachment.pl>

From arun.kumar.saha at gmail.com  Wed Jul 13 15:22:00 2011
From: arun.kumar.saha at gmail.com (Arun.stat)
Date: Wed, 13 Jul 2011 06:22:00 -0700 (PDT)
Subject: [R-SIG-Finance] Why does the curve() doesn't work for negative
 binomial distribution?
In-Reply-To: <479dee1f.ac93.131228756c0.Coremail.qqjwl@163.com>
References: <479dee1f.ac93.131228756c0.Coremail.qqjwl@163.com>
Message-ID: <1310563320349-3665003.post@n4.nabble.com>

I am quite sure that, the 1st reply (other that this!) you would get is to
post this in R-forum.
_____________________________________________________

Arun Kumar Saha, FRM
QUANTITATIVE RISK AND HEDGE CONSULTING SPECIALIST
Visit me at: http://in.linkedin.com/in/ArunFRM
_____________________________________________________

--
View this message in context: http://r.789695.n4.nabble.com/Why-does-the-curve-doesn-t-work-for-negative-binomial-distribution-tp3664440p3665003.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From matthieu.stigler at gmail.com  Wed Jul 13 16:38:45 2011
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Wed, 13 Jul 2011 16:38:45 +0200
Subject: [R-SIG-Finance] Why does the curve() doesn't work for negative
 binomial distribution?
In-Reply-To: <1310563320349-3665003.post@n4.nabble.com>
References: <479dee1f.ac93.131228756c0.Coremail.qqjwl@163.com>
	<1310563320349-3665003.post@n4.nabble.com>
Message-ID: <4E1DADF5.5060008@gmail.com>

the second reply is that to analyse the output of the warnings: they 
tell you the function is evluated at non-integers value.

A solution is then to specify yourself the values, making sure the 
sequence has only integers, like for example:
curve(dbinom(x, size=6, prob=0.3), from=1, to=50,n=50)

Mat

Le 13/07/2011 15:22, Arun.stat a ?crit :
> I am quite sure that, the 1st reply (other that this!) you would get is to
> post this in R-forum.
> _____________________________________________________
>
> Arun Kumar Saha, FRM
> QUANTITATIVE RISK AND HEDGE CONSULTING SPECIALIST
> Visit me at: http://in.linkedin.com/in/ArunFRM
> _____________________________________________________
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Why-does-the-curve-doesn-t-work-for-negative-binomial-distribution-tp3664440p3665003.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From pucek8 at gmail.com  Wed Jul 13 18:30:20 2011
From: pucek8 at gmail.com (=?UTF-8?Q?Marcin_P=3F=EF=BF=BDciennik?=)
Date: Wed, 13 Jul 2011 18:30:20 +0200
Subject: [R-SIG-Finance] AR-GARCH with additional variable - estimation
	problem
In-Reply-To: <CAPaJvD_RV0KhsisY5X1_iRsn9P5v0L2k4Gkp5tCf2qQxSo3R8w@mail.gmail.com>
References: <CAPaJvD_RV0KhsisY5X1_iRsn9P5v0L2k4Gkp5tCf2qQxSo3R8w@mail.gmail.com>
Message-ID: <CAPaJvD9hsb2ju=2NoY5ttn_BCDvSr5f6ZWZdaHB5pULN6n8Yog@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110713/65b8864c/attachment.pl>

From noahsilverman at ucla.edu  Thu Jul 14 19:12:08 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Thu, 14 Jul 2011 10:12:08 -0700
Subject: [R-SIG-Finance] Interactive Brokers
Message-ID: <474DBC68-D715-48D3-9449-4A9780E78A98@ucla.edu>

Hi,

I'm just getting started on coding a script that will use the IBrokers package.  

I've worked through creating my own instance of the eWrapper list and understand how to create my own functions to handle incoming data.

There are a few variables, "msg", "timestamp", etc. that appear to contain several pieces of data.  (Perhaps they are lists or vectors?)  I can't find any documentation as to the details of these variables.  Subsequently, I don't know how to extract the desired information from them.

Is there more detailed documentation of this somewhere?

Thanks!

--
Noah Silverman
UCLA Department of Statistics
8117 Math Sciences Building
Los Angeles, CA 90095


From gyollin at r-programming.org  Thu Jul 14 20:23:39 2011
From: gyollin at r-programming.org (Guy Yollin)
Date: Thu, 14 Jul 2011 11:23:39 -0700
Subject: [R-SIG-Finance] Interactive Brokers
In-Reply-To: <474DBC68-D715-48D3-9449-4A9780E78A98@ucla.edu>
References: <474DBC68-D715-48D3-9449-4A9780E78A98@ucla.edu>
Message-ID: <4E1F342B.20104@r-programming.org>

Hi Noah,

Of course Jeff Ryan is the ultimate authority on this subject and a 
number of his IBrokers presentations are kicking around the web.

Nevertheless, here's a short script that I put together a while back to 
help me decipher the IBrokers messages.  The script logs messages to a 
file; after a while, hit the escape key and the log file will be read 
and parsed a little bit.

To go further, you can cross-reference some of this stuff with the IB 
API docs.

Hope this helps.

Best,

G


# initialize log file
fn <- "IBlog.dat"
if( file.exists(fn) )
   file.remove(fn)

# log messages from IB
library(IBrokers)
tws <- twsConnect()
equity1 <- twsEquity("SPY")
reqMktData(tws, equity1, CALLBACK = NULL, file = fn)
# hit the escape key after you've logged for a while
twsDisconnect(tws)

# read log file and make an xts object
x <- read.table(file=fn,header=F,sep=" ",as.is=T,fill=T,strip.white = T)
timeStamp.raw <- strptime(paste(x[,1],x[,2]), "%Y%m%d %H:%M:%OS")
num.mat <- apply(x[!is.na(timeStamp.raw),-(1:2)],2,as.numeric)
timeStamp <- timeStamp.raw[!is.na(timeStamp.raw)]
IB.xts.all <- xts(num.mat,timeStamp)
IB.xts <- 
xts(cbind(ID=num.mat[,3],MSG=num.mat[,1],tickType=num.mat[,4],parm1=num.mat[,5],parm2=num.mat[,6]),timeStamp)
#
# .twsIncomingMSG
#  TICK_PRICE =   "1"
#  TICK_SIZE  =   "2"
#  ORDER_STATUS = "3"
#  ERR_MSG =      "4"
#  TICK_GENERIC = "45"
#  TICK_STRING =  "46"
#
# .twsTickType
#  BID_SIZE              0
#  BID                   1
#  ASK                   2
#  ASK_SIZE              3
#  LAST                  4
#  LAST_SIZE             5
#  HIGH                  6
#  LOW                   7
#  VOLUME                8
#  CLOSE                 9
#  OPEN                  14
#  OPTION_HISTORICAL_VOL 23
#  LAST_TIMESTAMP        45

# Trade messages
# MSG=46,tickType=45 LAST_TIMESTAMP
# MSG=2,tickType=8 VOLUME
# MSG=2,tickType=5 LAST_SIZE
# MSG=1,tickType=4 LAST

# trade related messages
trades.idx <- IB.xts[,"tickType"]==4 | IB.xts[,"tickType"]==5 | 
IB.xts[,"tickType"]==8 | IB.xts[,"tickType"]==45
trades <- IB.xts[trades.idx,]

# quote related messages
ba.idx <- IB.xts[,"tickType"]==0 | IB.xts[,"tickType"]==1 | 
IB.xts[,"tickType"]==2 | IB.xts[,"tickType"]==3
quotes <- IB.xts[ba.idx,]

# plot sequence of trade related messages
lastPrice <- IB.xts[IB.xts[,"tickType"]==4,]
lastSize <- IB.xts[IB.xts[,"tickType"]==5,]
Volume <- IB.xts[IB.xts[,"tickType"]==8,]
lastTimeStamp <- IB.xts[IB.xts[,"tickType"]==45,]

#pdf(width=8,height=4,file="IBmess.pdf")
par(lab=c(5,1,7),yaxt="n")
plot(lastPrice[,1],type="n",pch=18,col=2,ylim=c(0,1),yaxt="n",main="")
title("IBroker Trade-related Messages")
text(x=start(lastPrice)-0,y=seq(0.2,0.8,by=0.2),c("last","size","stamp","volume"),pos=2,xpd=NA)
points(x=index(lastPrice),y=rep(0.2,nrow(lastPrice)),pch=18,col=2)
points(x=index(lastSize),y=rep(0.4,nrow(lastSize)),pch=18,col=3)
points(x=index(lastTimeStamp),rep(0.6,nrow(lastTimeStamp)),pch=18,col=4)
points(x=index(Volume),y=rep(0.8,nrow(Volume)),type="p",pch=18,col=6)
#dev.off()


On 7/14/2011 10:12 AM, Noah Silverman wrote:
> Hi,
>
> I'm just getting started on coding a script that will use the IBrokers package.
>
> I've worked through creating my own instance of the eWrapper list and understand how to create my own functions to handle incoming data.
>
> There are a few variables, "msg", "timestamp", etc. that appear to contain several pieces of data.  (Perhaps they are lists or vectors?)  I can't find any documentation as to the details of these variables.  Subsequently, I don't know how to extract the desired information from them.
>
> Is there more detailed documentation of this somewhere?
>
> Thanks!
>
> --
> Noah Silverman
> UCLA Department of Statistics
> 8117 Math Sciences Building
> Los Angeles, CA 90095
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From brian at braverock.com  Thu Jul 14 20:39:06 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 14 Jul 2011 13:39:06 -0500
Subject: [R-SIG-Finance] Interactive Brokers
In-Reply-To: <4E1F342B.20104@r-programming.org>
References: <474DBC68-D715-48D3-9449-4A9780E78A98@ucla.edu>
	<4E1F342B.20104@r-programming.org>
Message-ID: <1310668746.2400.9.camel@brian-rcg>

On Thu, 2011-07-14 at 11:23 -0700, Guy Yollin wrote:
> To go further, you can cross-reference some of this stuff with the IB 
> API docs. 

I'll underline this statement.  The IBrokers package is 'just' an R
wrapper for the IB API.  Things like valid message types, contents of
messages, data formats, etc. have been wrapped for R, but the *values*
are those defined by IB's API.

Cheers,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From noahsilverman at ucla.edu  Thu Jul 14 20:39:02 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Thu, 14 Jul 2011 11:39:02 -0700
Subject: [R-SIG-Finance] Interactive Brokers
In-Reply-To: <4E1F342B.20104@r-programming.org>
References: <474DBC68-D715-48D3-9449-4A9780E78A98@ucla.edu>
	<4E1F342B.20104@r-programming.org>
Message-ID: <BA7B617F-1CA8-494F-92DA-9E2699ADD339@ucla.edu>

Guy,

That's a big help.  Thanks!

I also started digging into the source code for the R library.  Much of the information is buried in there.

--
Noah Silverman
UCLA Department of Statistics
8117 Math Sciences Building
Los Angeles, CA 90095

On Jul 14, 2011, at 11:23 AM, Guy Yollin wrote:

> Hi Noah,
> 
> Of course Jeff Ryan is the ultimate authority on this subject and a number of his IBrokers presentations are kicking around the web.
> 
> Nevertheless, here's a short script that I put together a while back to help me decipher the IBrokers messages.  The script logs messages to a file; after a while, hit the escape key and the log file will be read and parsed a little bit.
> 
> To go further, you can cross-reference some of this stuff with the IB API docs.
> 
> Hope this helps.
> 
> Best,
> 
> G
> 
> 
> # initialize log file
> fn <- "IBlog.dat"
> if( file.exists(fn) )
>  file.remove(fn)
> 
> # log messages from IB
> library(IBrokers)
> tws <- twsConnect()
> equity1 <- twsEquity("SPY")
> reqMktData(tws, equity1, CALLBACK = NULL, file = fn)
> # hit the escape key after you've logged for a while
> twsDisconnect(tws)
> 
> # read log file and make an xts object
> x <- read.table(file=fn,header=F,sep=" ",as.is=T,fill=T,strip.white = T)
> timeStamp.raw <- strptime(paste(x[,1],x[,2]), "%Y%m%d %H:%M:%OS")
> num.mat <- apply(x[!is.na(timeStamp.raw),-(1:2)],2,as.numeric)
> timeStamp <- timeStamp.raw[!is.na(timeStamp.raw)]
> IB.xts.all <- xts(num.mat,timeStamp)
> IB.xts <- xts(cbind(ID=num.mat[,3],MSG=num.mat[,1],tickType=num.mat[,4],parm1=num.mat[,5],parm2=num.mat[,6]),timeStamp)
> #
> # .twsIncomingMSG
> #  TICK_PRICE =   "1"
> #  TICK_SIZE  =   "2"
> #  ORDER_STATUS = "3"
> #  ERR_MSG =      "4"
> #  TICK_GENERIC = "45"
> #  TICK_STRING =  "46"
> #
> # .twsTickType
> #  BID_SIZE              0
> #  BID                   1
> #  ASK                   2
> #  ASK_SIZE              3
> #  LAST                  4
> #  LAST_SIZE             5
> #  HIGH                  6
> #  LOW                   7
> #  VOLUME                8
> #  CLOSE                 9
> #  OPEN                  14
> #  OPTION_HISTORICAL_VOL 23
> #  LAST_TIMESTAMP        45
> 
> # Trade messages
> # MSG=46,tickType=45 LAST_TIMESTAMP
> # MSG=2,tickType=8 VOLUME
> # MSG=2,tickType=5 LAST_SIZE
> # MSG=1,tickType=4 LAST
> 
> # trade related messages
> trades.idx <- IB.xts[,"tickType"]==4 | IB.xts[,"tickType"]==5 | IB.xts[,"tickType"]==8 | IB.xts[,"tickType"]==45
> trades <- IB.xts[trades.idx,]
> 
> # quote related messages
> ba.idx <- IB.xts[,"tickType"]==0 | IB.xts[,"tickType"]==1 | IB.xts[,"tickType"]==2 | IB.xts[,"tickType"]==3
> quotes <- IB.xts[ba.idx,]
> 
> # plot sequence of trade related messages
> lastPrice <- IB.xts[IB.xts[,"tickType"]==4,]
> lastSize <- IB.xts[IB.xts[,"tickType"]==5,]
> Volume <- IB.xts[IB.xts[,"tickType"]==8,]
> lastTimeStamp <- IB.xts[IB.xts[,"tickType"]==45,]
> 
> #pdf(width=8,height=4,file="IBmess.pdf")
> par(lab=c(5,1,7),yaxt="n")
> plot(lastPrice[,1],type="n",pch=18,col=2,ylim=c(0,1),yaxt="n",main="")
> title("IBroker Trade-related Messages")
> text(x=start(lastPrice)-0,y=seq(0.2,0.8,by=0.2),c("last","size","stamp","volume"),pos=2,xpd=NA)
> points(x=index(lastPrice),y=rep(0.2,nrow(lastPrice)),pch=18,col=2)
> points(x=index(lastSize),y=rep(0.4,nrow(lastSize)),pch=18,col=3)
> points(x=index(lastTimeStamp),rep(0.6,nrow(lastTimeStamp)),pch=18,col=4)
> points(x=index(Volume),y=rep(0.8,nrow(Volume)),type="p",pch=18,col=6)
> #dev.off()
> 
> 
> On 7/14/2011 10:12 AM, Noah Silverman wrote:
>> Hi,
>> 
>> I'm just getting started on coding a script that will use the IBrokers package.
>> 
>> I've worked through creating my own instance of the eWrapper list and understand how to create my own functions to handle incoming data.
>> 
>> There are a few variables, "msg", "timestamp", etc. that appear to contain several pieces of data.  (Perhaps they are lists or vectors?)  I can't find any documentation as to the details of these variables.  Subsequently, I don't know how to extract the desired information from them.
>> 
>> Is there more detailed documentation of this somewhere?
>> 
>> Thanks!
>> 
>> --
>> Noah Silverman
>> UCLA Department of Statistics
>> 8117 Math Sciences Building
>> Los Angeles, CA 90095
>> 
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>> 
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From noahsilverman at ucla.edu  Thu Jul 14 22:29:29 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Thu, 14 Jul 2011 13:29:29 -0700
Subject: [R-SIG-Finance] IBrokers - record and playback
Message-ID: <DFF7F2C5-D7DC-426F-A842-1546501CEF08@ucla.edu>

Hi,

So in starting to work on some code, I've quickly discovered the need to record and playback a trading day.  Since I often code when the market is closed, I need to be able to playback a stream of trading data.

I do see how twsConnect() will take a filename, but I don't understand to how properly record the data.  

I did try to save things to a file following an example in the docs, but then am unable read them back:
tws <- twsConnect(clientId = 1)
f <- file.choose()
fh <- file(f, open='a')
reqMktData(tws, contract, file=fh)
# At this point, I do see a file with a bunch of transaction data on my hard drive

Then, attempting to playback the data:
twsPlay <- twsConnect(clientId=2, filename=f)
reqMktData(twsPlay, contract, playback=1)

This gives me the following error:
Error in socketSelect(list(con), FALSE, 0.25) : not a socket connection


My goal is to have a short cron script call R in the morning with a script so that I can record the day's transactions to a file.  Doing this for a few days will give me a nice working set of data to use doing development.

What am I doing wrong?


--
Noah Silverman
UCLA Department of Statistics
8117 Math Sciences Building
Los Angeles, CA 90095


From dlincke at lincke.net  Fri Jul 15 10:34:06 2011
From: dlincke at lincke.net (dlincke at lincke.net)
Date: Fri, 15 Jul 2011 04:34:06 -0400 (EDT)
Subject: [R-SIG-Finance] RBloomberg update on "Error in dimnames(x) <-
 dn : 'dimnames' applied to non-array"
In-Reply-To: <CAJOva6FDMY9ik=QT4MZ+z53Urcbg=+p1Hk0OJOXUMJ6aaBJTEg@mail.gmail.com>
References: <CAJOva6FDMY9ik=QT4MZ+z53Urcbg=+p1Hk0OJOXUMJ6aaBJTEg@mail.gmail.com>
Message-ID: <1750185198.278896.1310718846721.JavaMail.open-xchange@oxusltgw10.schlund.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110715/41518fb5/attachment.pl>

From subbu at sssu.edu.in  Sat Jul 16 07:36:28 2011
From: subbu at sssu.edu.in (Subramanian S)
Date: Sat, 16 Jul 2011 11:06:28 +0530
Subject: [R-SIG-Finance] Quantstrat demos
Message-ID: <CALS_8bGXDoxJxSgL4CYz7_yHBqqofNV1RvPz68X_hw_SMkJ_GA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110716/d14ed7f0/attachment.pl>

From brian at braverock.com  Sat Jul 16 11:20:54 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Sat, 16 Jul 2011 04:20:54 -0500
Subject: [R-SIG-Finance] Quantstrat demos
In-Reply-To: <CALS_8bGXDoxJxSgL4CYz7_yHBqqofNV1RvPz68X_hw_SMkJ_GA@mail.gmail.com>
References: <CALS_8bGXDoxJxSgL4CYz7_yHBqqofNV1RvPz68X_hw_SMkJ_GA@mail.gmail.com>
Message-ID: <1310808054.10974.13.camel@brian-desktop>

On Sat, 2011-07-16 at 11:06 +0530, Subramanian S wrote: 
> Is it that quantstrat package demos can be viewed only if you install R
> 2.14? Is it because blotter was built on 2.14?
> By the way, i am on 2.13.1 and i get this error when i try any of the
> quantstrat demos (here i tried the macd.R):
> 
> Failed with error:  package 'Defaults' could not be loaded
> In addition: Warning messages:
> 1: package 'blotter' was built under R version 2.14.0
> 2: In library(pkg, character.only = TRUE, logical.return = TRUE, lib.loc =
> lib.loc) :
>   there is no package called 'Defaults'
> Error in rm("order_book.macd", pos = .strategy) :
>   object '.strategy' not found

Subramanian,

quantstrat (and blotter, and FinancialInstrument) work fine on older
versions of R (at least back to 2.9.2)

R-forge, on the other hand, only builds binary packages on the newest
version of R.  If you want to avoid the 2.14 warning (which should be
harmless), you'll need to use the .tar.gz version of the packages, and
compile them yourself.  Under most *nix systems, including linux and
Mac, this is easy.  Under Windows, you'll need to install and configure
Rtools.

As for the 'Defaults' package, which is the actual *Error* above, it is
available on CRAN, and should be easily installed with 

install.packages('Defaults')

Having just yesterday installed R and all these packages including xts
(from CRAN, as the R-Forge version isn't stable right now) and quantmod
(from R-Forge, as with blotter/FinancialInstrument/quantstrat/TTR) on
clean Windows machines, I am pretty certain that everything is fine on
the CRAN/R-Forge side.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From subbu at sssu.edu.in  Sat Jul 16 13:39:52 2011
From: subbu at sssu.edu.in (Subramanian S)
Date: Sat, 16 Jul 2011 17:09:52 +0530
Subject: [R-SIG-Finance] Quantstrat demos
In-Reply-To: <1310808054.10974.13.camel@brian-desktop>
References: <CALS_8bGXDoxJxSgL4CYz7_yHBqqofNV1RvPz68X_hw_SMkJ_GA@mail.gmail.com>
	<1310808054.10974.13.camel@brian-desktop>
Message-ID: <CALS_8bGzVSWO0w7Kpw37xrbesE19QB0NozMS7Vuwc3XK5bQUkg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110716/56c14f74/attachment.pl>

From bruno.monastero at polito.it  Sun Jul 17 18:21:51 2011
From: bruno.monastero at polito.it (bruno.monastero)
Date: Sun, 17 Jul 2011 18:21:51 +0200
Subject: [R-SIG-Finance] Rmetrics - additional file needed to use
	read.lynx() in Windows
Message-ID: <201107171821417557045@polito.it>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110717/7bc70806/attachment.pl>

From bruno.monastero at polito.it  Sun Jul 17 18:34:04 2011
From: bruno.monastero at polito.it (bruno.monastero)
Date: Sun, 17 Jul 2011 18:34:04 +0200
Subject: [R-SIG-Finance] Rmetrics - additional file needed to use
	read.lynx() in Windows
Message-ID: <201107171833587696155@polito.it>

Hi,
 
at the url https://www.rmetrics.org/blog/LynxReader is described how to install the lynx browser in order to use read.lynx() under Windows, in one section, The Minimalist Win32 Installation, is written:
 
A Win32 standalone installation could be an alternative option if you like to avoid the tour on the cygwin installation. You can find many pointers on the Internet to lynx binaries but none to our experience is working properly together with R. Thus we have prepared a zip file with the necessary files from the cygwin distribution which you can download from the Rmetrics R-Forge repository.

However the procedure does not work, it is needed another file: cygintl-3.dll, it is in the libintl3 cygwin library, and can be recovered running the setup of cygwin and asking explicitly that library.


From noahsilverman at ucla.edu  Mon Jul 18 19:36:25 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Mon, 18 Jul 2011 10:36:25 -0700
Subject: [R-SIG-Finance] variable scope with ewrapper in IBrokers
Message-ID: <E42D3CE9-88D0-4847-B81F-C8D91DC14CF2@ucla.edu>

Hello,

I'm looking at the iBrokers package.

The documentation has a nice example about copying and then modifying the ewrapper function to handle incoming data.  This works nicely.

My challenge is that I want to store some persistant values (update moving averages, etc.)

Since ewrapper()  is called for every tick by reqMktData(), I can't figure out the best way to keep some persistent variables.

How have other people handled this?

Thanks!


--
Noah Silverman
UCLA Department of Statistics
8117 Math Sciences Building
Los Angeles, CA 90095


From brian at braverock.com  Mon Jul 18 19:43:10 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 18 Jul 2011 12:43:10 -0500
Subject: [R-SIG-Finance] variable scope with ewrapper in IBrokers
In-Reply-To: <E42D3CE9-88D0-4847-B81F-C8D91DC14CF2@ucla.edu>
References: <E42D3CE9-88D0-4847-B81F-C8D91DC14CF2@ucla.edu>
Message-ID: <1311010990.2400.46.camel@brian-rcg>

On Mon, 2011-07-18 at 10:36 -0700, Noah Silverman wrote:
> The documentation has a nice example about copying and then modifying
> the ewrapper function to handle incoming data.  This works nicely.
> 
> My challenge is that I want to store some persistant values (update
> moving averages, etc.)
> 
> Since ewrapper()  is called for every tick by reqMktData(), I can't
> figure out the best way to keep some persistent variables.
> 
> How have other people handled this? 

One 'R-like' method for dealing with this would be to create an
environment to store these things in and update a variable in that
environment.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From jeff.a.ryan at gmail.com  Mon Jul 18 20:23:25 2011
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Mon, 18 Jul 2011 13:23:25 -0500
Subject: [R-SIG-Finance] variable scope with ewrapper in IBrokers
In-Reply-To: <1311010990.2400.46.camel@brian-rcg>
References: <E42D3CE9-88D0-4847-B81F-C8D91DC14CF2@ucla.edu>
	<1311010990.2400.46.camel@brian-rcg>
Message-ID: <4146BFFD-BD8E-4796-A0F4-9E73AED570CD@gmail.com>

Hi Noah,

I'll provide a complete example when I am back at my desk, but the eWrapper itself contains all you need to do this. 

Take a look t eWrapper.data for now. In effect you need to rbind incoming values to an object stored in the .Data variable. Again I'll provide more detail to this when I get back, but simply put it is trivial to accomplish once you see how it is done. 

Best,
Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Jul 18, 2011, at 12:43 PM, "Brian G. Peterson" <brian at braverock.com> wrote:

> On Mon, 2011-07-18 at 10:36 -0700, Noah Silverman wrote:
>> The documentation has a nice example about copying and then modifying
>> the ewrapper function to handle incoming data.  This works nicely.
>> 
>> My challenge is that I want to store some persistant values (update
>> moving averages, etc.)
>> 
>> Since ewrapper()  is called for every tick by reqMktData(), I can't
>> figure out the best way to keep some persistent variables.
>> 
>> How have other people handled this? 
> 
> One 'R-like' method for dealing with this would be to create an
> environment to store these things in and update a variable in that
> environment.
> 
> Regards,
> 
>   - Brian
> 
> -- 
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From amjadali_ktk at yahoo.com  Mon Jul 18 20:30:20 2011
From: amjadali_ktk at yahoo.com (Amjad Ali)
Date: Mon, 18 Jul 2011 11:30:20 -0700 (PDT)
Subject: [R-SIG-Finance] (no subject)
Message-ID: <1311013820.10748.YahooMailRC@web130201.mail.mud.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110718/b777a1c3/attachment.pl>

From me at censix.com  Mon Jul 18 20:52:18 2011
From: me at censix.com (soren wilkening)
Date: Mon, 18 Jul 2011 11:52:18 -0700 (PDT)
Subject: [R-SIG-Finance] (no subject)
In-Reply-To: <1311013820.10748.YahooMailRC@web130201.mail.mud.yahoo.com>
References: <1311013820.10748.YahooMailRC@web130201.mail.mud.yahoo.com>
Message-ID: <1311015138566-3676133.post@n4.nabble.com>

You could use the 'rgarch' package. Does everything you want and more. (of
course there are alternatives as well)
Soren

-----
http://censix.com
--
View this message in context: http://r.789695.n4.nabble.com/no-subject-tp3676098p3676133.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From noahsilverman at ucla.edu  Mon Jul 18 22:27:00 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Mon, 18 Jul 2011 13:27:00 -0700
Subject: [R-SIG-Finance] variable scope with ewrapper in IBrokers
In-Reply-To: <4146BFFD-BD8E-4796-A0F4-9E73AED570CD@gmail.com>
References: <E42D3CE9-88D0-4847-B81F-C8D91DC14CF2@ucla.edu>
	<1311010990.2400.46.camel@brian-rcg>
	<4146BFFD-BD8E-4796-A0F4-9E73AED570CD@gmail.com>
Message-ID: <109844E4-F8D6-4F65-A970-17CCEC0630B6@ucla.edu>

Jeff,

I found the eWrapper methods for this.  It looks like I have to use the myWrapper$get.Data and myWrapper$set.Data

So, what I'm doing, in abbreviated form is the following:

-----------------------------------
MyWrapper <- function(curMsg, msg, timestamp, file, ... ){

# Load in the persistent vars for this round
a <- myWrapper$get.Data("a")
b <- myWrapper$get.Data("b")
c <- myWrapper$get.Data("c")

# Do a bunch of stuff


# Save the persistent vars
myWrapper$assign.Data("a", a)
myWrapper$assign.Data("b", b)
myWrapper$assign.Data("c", c)

}
----------------------------------


--
Noah Silverman
UCLA Department of Statistics
8117 Math Sciences Building
Los Angeles, CA 90095



On Jul 18, 2011, at 11:23 AM, Jeff Ryan wrote:

> Hi Noah,
> 
> I'll provide a complete example when I am back at my desk, but the eWrapper itself contains all you need to do this. 
> 
> Take a look t eWrapper.data for now. In effect you need to rbind incoming values to an object stored in the .Data variable. Again I'll provide more detail to this when I get back, but simply put it is trivial to accomplish once you see how it is done. 
> 
> Best,
> Jeff
> 
> Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com
> 
> www.lemnica.com
> 
> On Jul 18, 2011, at 12:43 PM, "Brian G. Peterson" <brian at braverock.com> wrote:
> 
>> On Mon, 2011-07-18 at 10:36 -0700, Noah Silverman wrote:
>>> The documentation has a nice example about copying and then modifying
>>> the ewrapper function to handle incoming data.  This works nicely.
>>> 
>>> My challenge is that I want to store some persistant values (update
>>> moving averages, etc.)
>>> 
>>> Since ewrapper()  is called for every tick by reqMktData(), I can't
>>> figure out the best way to keep some persistent variables.
>>> 
>>> How have other people handled this? 
>> 
>> One 'R-like' method for dealing with this would be to create an
>> environment to store these things in and update a variable in that
>> environment.
>> 
>> Regards,
>> 
>>  - Brian
>> 
>> -- 
>> Brian G. Peterson
>> http://braverock.com/brian/
>> Ph: 773-459-4973
>> IM: bgpbraverock
>> 
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.


From pucek8 at gmail.com  Tue Jul 19 02:15:20 2011
From: pucek8 at gmail.com (=?UTF-8?Q?Marcin_P=3F=EF=BF=BDciennik?=)
Date: Tue, 19 Jul 2011 02:15:20 +0200
Subject: [R-SIG-Finance] AR-GARCH with additional variable - estimation
	problem
In-Reply-To: <CAPaJvD9hsb2ju=2NoY5ttn_BCDvSr5f6ZWZdaHB5pULN6n8Yog@mail.gmail.com>
References: <CAPaJvD_RV0KhsisY5X1_iRsn9P5v0L2k4Gkp5tCf2qQxSo3R8w@mail.gmail.com>
	<CAPaJvD9hsb2ju=2NoY5ttn_BCDvSr5f6ZWZdaHB5pULN6n8Yog@mail.gmail.com>
Message-ID: <CAPaJvD-+kCJ9ZRx0G7-VvP+ETYPcd6XofpEDnttbtQ1d60J7bA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110719/57c07455/attachment.pl>

From amjadali_ktk at yahoo.com  Tue Jul 19 05:10:56 2011
From: amjadali_ktk at yahoo.com (Amjad Ali)
Date: Mon, 18 Jul 2011 20:10:56 -0700 (PDT)
Subject: [R-SIG-Finance] (no subject)
In-Reply-To: <1311015138566-3676133.post@n4.nabble.com>
References: <1311013820.10748.YahooMailRC@web130201.mail.mud.yahoo.com>
	<1311015138566-3676133.post@n4.nabble.com>
Message-ID: <1311045056.30738.YahooMailRC@web130213.mail.mud.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110718/b19d8268/attachment.pl>

From bharatram.mnit at gmail.com  Tue Jul 19 07:47:33 2011
From: bharatram.mnit at gmail.com (Bharat Kherwa)
Date: Mon, 18 Jul 2011 22:47:33 -0700
Subject: [R-SIG-Finance] (no subject)
In-Reply-To: <1311045056.30738.YahooMailRC@web130213.mail.mud.yahoo.com>
References: <1311013820.10748.YahooMailRC@web130201.mail.mud.yahoo.com>
	<1311015138566-3676133.post@n4.nabble.com>
	<1311045056.30738.YahooMailRC@web130213.mail.mud.yahoo.com>
Message-ID: <CAGVtM3stm8jheN9Yd-X6H7HEfPDhd4HEnYffhybssK0s011zaw@mail.gmail.com>

Dear Amjad

Try these:

#install.packages("fracdiff")
library(fracdiff);

# FYI:

You can simulate ARFIMA this way:

z1<-fracdiff.sim(512,ar=c(0.21,0.2),d=0.3);

#using :

fit<-fracdiff(data1,nar=3,nma=3,h=.Machine$double.eps);   # the last
parameter is some machine dependency
summary(fit);

hope it helps,

Bharat

On Mon, Jul 18, 2011 at 8:10 PM, Amjad Ali <amjadali_ktk at yahoo.com> wrote:
> Hi
> In the rgarch package I could not find the codes for simultaneous fitting of
> Autoregressive fractionally integrated Moving average model with GARCH errors
> i.e ARFIMA(p,d,q)-GARCH(r,s) model.in fGarch package the codes for fitting
> arma(p,q)-GARCH(r,s) is available but not for ARFIMA(p,d,q)-GARCH(r,s) . Please
> help in this regrad
>
>
> Regards
>
> Amjad Ali
>
>
>
>
> ________________________________
> From: soren wilkening <me at censix.com>
> To: r-sig-finance at r-project.org
> Sent: Mon, July 18, 2011 11:52:18 PM
> Subject: Re: [R-SIG-Finance] (no subject)
>
> You could use the 'rgarch' package. Does everything you want and more. (of
> course there are alternatives as well)
> Soren
>
> -----
> http://censix.com
> --
> View this message in context:
> http://r.789695.n4.nabble.com/no-subject-tp3676098p3676133.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should
> go.
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From larry.shank at gmail.com  Tue Jul 19 17:52:42 2011
From: larry.shank at gmail.com (Larry Shank)
Date: Tue, 19 Jul 2011 08:52:42 -0700 (PDT)
Subject: [R-SIG-Finance] RBloomberg update on "Error in dimnames(x) <-
 dn : 'dimnames' applied to non-array"
In-Reply-To: <CAJOva6FDMY9ik=QT4MZ+z53Urcbg=+p1Hk0OJOXUMJ6aaBJTEg@mail.gmail.com>
References: <CAJOva6FDMY9ik=QT4MZ+z53Urcbg=+p1Hk0OJOXUMJ6aaBJTEg@mail.gmail.com>
Message-ID: <1311090762818-3678480.post@n4.nabble.com>

The work-around works great for bdp, bds, and bdh; however, it is not working
for tick or bar (for me at least).  I have posted examples below.  Do you
see anything that I may need to change.  Thank you!

> library(RBloomberg)
Loading required package: rJava
> conn <- blpConnect()
R version 2.12.2 (2011-02-25) 
rJava Version 0.8-8 
RBloomberg Version 0.4-149 
Java environment initialized successfully.
Looking for most recent blpapi3.jar file...
Adding C:\blp\API\APIv3\JavaAPI\v3.4.3.2\lib\blpapi3.jar to Java classpath
Bloomberg API Version 3.4.3.2

> bdp(conn, "AMZN US Equity", "NAME")
                         NAME
AMZN US Equity AMAZON.COM INC

> bdh(conn, "GOLDS Comdty", "PX_LAST", "20090101", "20090107")
                 date PX_LAST
2009-01-01 2009-01-01  879.45
2009-01-02 2009-01-02  875.40
2009-01-05 2009-01-05  859.50
2009-01-06 2009-01-06  863.90
2009-01-07 2009-01-07  842.95

> tick(conn, "RYA ID Equity", "TRADE", "2010-09-21 09:00:00.000",
> "2010-09-21 09:10:00.000")
Error in dimnames(x) <- dn : 
  length of 'dimnames' [2] not equal to array extent

> bar(conn, "RYA ID Equity", "TRADE", "2010-09-21 09:00:00.000", "2010-09-21
> 15:00:00.000", "60")
Error in process.result(result, "first.column") : subscript out of bounds

--
View this message in context: http://r.789695.n4.nabble.com/RBloomberg-update-on-Error-in-dimnames-x-dn-dimnames-applied-to-non-array-tp3660756p3678480.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From optionsraghu at gmail.com  Tue Jul 19 23:21:55 2011
From: optionsraghu at gmail.com (Raghuraman Ramachandran)
Date: Tue, 19 Jul 2011 22:21:55 +0100
Subject: [R-SIG-Finance] SABR Volatility
Message-ID: <CADgEnDkaapTxBnu9uNt6G9AGKS2jyPAjAg57xP=Q9+MsmkXWKw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110719/562f0437/attachment.pl>

From jeff.a.ryan at gmail.com  Wed Jul 20 02:14:06 2011
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Tue, 19 Jul 2011 19:14:06 -0500
Subject: [R-SIG-Finance] SABR Volatility
In-Reply-To: <CADgEnDkaapTxBnu9uNt6G9AGKS2jyPAjAg57xP=Q9+MsmkXWKw@mail.gmail.com>
References: <CADgEnDkaapTxBnu9uNt6G9AGKS2jyPAjAg57xP=Q9+MsmkXWKw@mail.gmail.com>
Message-ID: <60CDBB1C-7A93-44F1-960F-137D26550353@gmail.com>

Short answer, no there isn't. 

You can search this list though as the topic was addressed back on 20100930 or so. 

Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Jul 19, 2011, at 4:21 PM, Raghuraman Ramachandran <optionsraghu at gmail.com> wrote:

> Dear R-Gurus
> 
> Is there a module where SABR volatility function is included in R please?
> 
> Many thanks
> Raghu
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From josh.m.ulrich at gmail.com  Wed Jul 20 02:20:20 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 19 Jul 2011 19:20:20 -0500
Subject: [R-SIG-Finance] SABR Volatility
In-Reply-To: <CADgEnDkaapTxBnu9uNt6G9AGKS2jyPAjAg57xP=Q9+MsmkXWKw@mail.gmail.com>
References: <CADgEnDkaapTxBnu9uNt6G9AGKS2jyPAjAg57xP=Q9+MsmkXWKw@mail.gmail.com>
Message-ID: <CAPPM_gRBwXJgvV9CkJOC4O_AMUL5XC50CxLgHfy4Bu1xdOZBCQ@mail.gmail.com>

On Tue, Jul 19, 2011 at 4:21 PM, Raghuraman Ramachandran
<optionsraghu at gmail.com> wrote:
> Dear R-Gurus
>
> Is there a module where SABR volatility function is included in R please?
>
This came up on R-help in January:
https://stat.ethz.ch/pipermail/r-help/2011-January/266946.html

I didn't check it carefully, but that implementation looks correct.
You might want to try a different optimization solver though.

> Many thanks
> Raghu
>

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com


From pzulfugarli at gmail.com  Wed Jul 20 02:22:56 2011
From: pzulfugarli at gmail.com (Pasha Zulfuqali)
Date: Wed, 20 Jul 2011 01:22:56 +0100
Subject: [R-SIG-Finance] Coskewness matrix
Message-ID: <CADnj+qZ5Zuq=ScvmUJFpHthdc6wkegHJHBffELik7S1UkTKdtA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110720/28efb487/attachment.pl>

From dhruv.maheshwari at blackrock.com  Wed Jul 20 02:26:00 2011
From: dhruv.maheshwari at blackrock.com (Maheshwari, Dhruv)
Date: Tue, 19 Jul 2011 20:26:00 -0400
Subject: [R-SIG-Finance] Coskewness matrix
In-Reply-To: <CADnj+qZ5Zuq=ScvmUJFpHthdc6wkegHJHBffELik7S1UkTKdtA@mail.gmail.com>
References: <CADnj+qZ5Zuq=ScvmUJFpHthdc6wkegHJHBffELik7S1UkTKdtA@mail.gmail.com>
Message-ID: <736BD99954017349AA38025412DA2A864006304161@EXCHAMRS04.na.blkint.com>

I believe PerformanceAnalytics has what you are looking for.


-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Pasha Zulfuqali
Sent: Tuesday, July 19, 2011 20:23
To: r-sig-finance at stat.math.ethz.ch
Subject: [R-SIG-Finance] Coskewness matrix

Dear R-gurus,
Is it possible to calculate co-skewness matrix for the portfolio in R?

Thank you in advance,
Pasha

	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

THIS MESSAGE AND ANY ATTACHMENTS ARE CONFIDENTIAL, PROPRIETARY, AND MAY BE PRIVILEGED.  If this message was misdirected, BlackRock, Inc. and its subsidiaries, ("BlackRock") does not waive any confidentiality or privilege.  If you are not the intended recipient, please notify us immediately and destroy the message without disclosing its contents to anyone.  Any distribution, use or copying of this e-mail or the information it contains by other than an intended recipient is unauthorized.  The views and opinions expressed in this e-mail message are the author's own and may not reflect the views and opinions of BlackRock, unless the author is authorized by BlackRock to express such views or opinions on its behalf.  All email sent to or from this address is subject to electronic storage and review by BlackRock.  Although BlackRock operates anti-virus programs, it does not accept responsibility for any damage whatsoever caused by viruses being passed.


From arun.kumar.saha at gmail.com  Wed Jul 20 07:58:18 2011
From: arun.kumar.saha at gmail.com (Arun.stat)
Date: Tue, 19 Jul 2011 22:58:18 -0700 (PDT)
Subject: [R-SIG-Finance] Cointegration
In-Reply-To: <1311120924495-3679697.post@n4.nabble.com>
References: <1311120924495-3679697.post@n4.nabble.com>
Message-ID: <1311141498588-3680046.post@n4.nabble.com>

As per the definition of co-integration, a system is called co-integrated if
that system is integrated (with non zero order) but there exist some linear
relationship among the underlying variables which is of order less than "d"
(d: the order of the main system.)

Therefore if all your variables are Stationary/Stable then co-integration
would not be defined.

In fact for any stationary system, finding a linear stationary relationship
is trivial as you are applying some stationary operator on stationary
variables. Hence you do not need any fancy testing system to prove/disprove
the existance of any such linear relationship.

HTH 
_____________________________________________________ 

Arun Kumar Saha, FRM 
QUANTITATIVE RISK AND HEDGE CONSULTING SPECIALIST 
Visit me at: http://in.linkedin.com/in/ArunFRM

_______________________________________________ 


--
View this message in context: http://r.789695.n4.nabble.com/Cointegration-tp3679697p3680046.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From arun.kumar.saha at gmail.com  Wed Jul 20 10:26:19 2011
From: arun.kumar.saha at gmail.com (Arun.stat)
Date: Wed, 20 Jul 2011 01:26:19 -0700 (PDT)
Subject: [R-SIG-Finance] Cointegration
In-Reply-To: <1311120924495-3679697.post@n4.nabble.com>
References: <1311120924495-3679697.post@n4.nabble.com>
Message-ID: <1311150379824-3680216.post@n4.nabble.com>

Just to add the answers of your direct questions:

what do i do for the variables which dont pass the ADF test for unit root ?

By definition if some variables are of order "d" and some are of "d1" (d1 <
d) then still the system will have order "d". Therefore you can put all your
variables into Rank test

what is the purpose of the ADF test at all? 

http://en.wikipedia.org/wiki/Augmented_Dickey%E2%80%93Fuller_test

HTH

--
View this message in context: http://r.789695.n4.nabble.com/Cointegration-tp3679697p3680216.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Wed Jul 20 14:14:33 2011
From: alexios at 4dscape.com (4dscape.com)
Date: Wed, 20 Jul 2011 13:14:33 +0100
Subject: [R-SIG-Finance] (no subject)
In-Reply-To: <1311045056.30738.YahooMailRC@web130213.mail.mud.yahoo.com>
References: <1311013820.10748.YahooMailRC@web130201.mail.mud.yahoo.com>
	<1311015138566-3676133.post@n4.nabble.com>
	<1311045056.30738.YahooMailRC@web130213.mail.mud.yahoo.com>
Message-ID: <2A6EE6F2-FD58-4133-9DEB-73B1874DBBD9@4dscape.com>

Look at the documentation for ugarchspec in the rgarch package. The option 'arfima' (TRUE/FALSE) is documented and rather self explanatory.

Regards,
-Alexios

On Jul 19, 2011, at 4:10, Amjad Ali <amjadali_ktk at yahoo.com> wrote:

> Hi 
> In the rgarch package I could not find the codes for simultaneous fitting of 
> Autoregressive fractionally integrated Moving average model with GARCH errors 
> i.e ARFIMA(p,d,q)-GARCH(r,s) model.in fGarch package the codes for fitting 
> arma(p,q)-GARCH(r,s) is available but not for ARFIMA(p,d,q)-GARCH(r,s) . Please 
> help in this regrad
> 
> 
> Regards 
> 
> Amjad Ali 
> 
> 
> 
> 
> ________________________________
> From: soren wilkening <me at censix.com>
> To: r-sig-finance at r-project.org
> Sent: Mon, July 18, 2011 11:52:18 PM
> Subject: Re: [R-SIG-Finance] (no subject)
> 
> You could use the 'rgarch' package. Does everything you want and more. (of
> course there are alternatives as well)
> Soren
> 
> -----
> http://censix.com
> --
> View this message in context: 
> http://r.789695.n4.nabble.com/no-subject-tp3676098p3676133.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should 
> go.
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
> 


From amjadali_ktk at yahoo.com  Wed Jul 20 15:52:32 2011
From: amjadali_ktk at yahoo.com (Amjad Ali)
Date: Wed, 20 Jul 2011 06:52:32 -0700 (PDT)
Subject: [R-SIG-Finance] (no subject)
In-Reply-To: <2A6EE6F2-FD58-4133-9DEB-73B1874DBBD9@4dscape.com>
References: <1311013820.10748.YahooMailRC@web130201.mail.mud.yahoo.com>
	<1311015138566-3676133.post@n4.nabble.com>
	<1311045056.30738.YahooMailRC@web130213.mail.mud.yahoo.com>
	<2A6EE6F2-FD58-4133-9DEB-73B1874DBBD9@4dscape.com>
Message-ID: <1311169952.61767.YahooMailRC@web130213.mail.mud.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110720/e6d2fb56/attachment.pl>

From cedrick at cedrickjohnson.com  Wed Jul 20 17:16:15 2011
From: cedrick at cedrickjohnson.com (Cedrick Johnson)
Date: Wed, 20 Jul 2011 10:16:15 -0500
Subject: [R-SIG-Finance] (no subject)
In-Reply-To: <1311169952.61767.YahooMailRC@web130213.mail.mud.yahoo.com>
References: <1311013820.10748.YahooMailRC@web130201.mail.mud.yahoo.com>	<1311015138566-3676133.post@n4.nabble.com>	<1311045056.30738.YahooMailRC@web130213.mail.mud.yahoo.com>	<2A6EE6F2-FD58-4133-9DEB-73B1874DBBD9@4dscape.com>
	<1311169952.61767.YahooMailRC@web130213.mail.mud.yahoo.com>
Message-ID: <4E26F13F.6040904@cedrickjohnson.com>

"cannot open compressed file 'C:/Program
Files/R/R-2.13.1/library/Rcpp/DESCRIPTION', probable reason 'No such file or
directory'"

Do you have the package Rcpp installed?

hth,
c



On 07/20/2011 08:52 AM, Amjad Ali wrote:
> Hi dear,
> I tried to install rgrach package it couldnt make it.How to download and install
> it.It gives me the following error.I dont understand how deal with it.plz help
> in installing and then loading rgarch package.
>
>
> utils:::menuInstallLocal()
> package 'rgarch' successfully unpacked and MD5 sums checked
>> library(rgarch)
> Error in gzfile(file, "rb") : cannot open the connection
> In addition: Warning messages:
> 1: In gzfile(file, "r") :
>    cannot open compressed file 'C:/Program
> Files/R/R-2.13.1/library/Rcpp/DESCRIPTION', probable reason 'No such file or
> directory'
> 2: In gzfile(file, "rb") :
>    cannot open compressed file '', probable reason 'No such file or directory'
>
> Regards
>
> Amjad Ali
>
>
>
>
> ________________________________
> From: 4dscape.com<alexios at 4dscape.com>
>
> Cc: "r-sig-finance at r-project.org"<r-sig-finance at r-project.org>
> Sent: Wed, July 20, 2011 5:14:33 PM
> Subject: Re: [R-SIG-Finance] (no subject)
>
> Look at the documentation for ugarchspec in the rgarch package. The option
> 'arfima' (TRUE/FALSE) is documented and rather self explanatory.
>
> Regards,
> -Alexios
>
>
>
>> Hi
>> In the rgarch package I could not find the codes for simultaneous fitting of
>> Autoregressive fractionally integrated Moving average model with GARCH errors
>> i.e ARFIMA(p,d,q)-GARCH(r,s) model.in fGarch package the codes for fitting
>> arma(p,q)-GARCH(r,s) is available but not for ARFIMA(p,d,q)-GARCH(r,s) . Please
>>
>> help in this regrad
>>
>>
>> Regards
>>
>> Amjad Ali
>>
>>
>>
>>
>> ________________________________
>> From: soren wilkening<me at censix.com>
>> To: r-sig-finance at r-project.org
>> Sent: Mon, July 18, 2011 11:52:18 PM
>> Subject: Re: [R-SIG-Finance] (no subject)
>>
>> You could use the 'rgarch' package. Does everything you want and more. (of
>> course there are alternatives as well)
>> Soren
>>
>> -----
>> http://censix.com
>> --
>> View this message in context:
>> http://r.789695.n4.nabble.com/no-subject-tp3676098p3676133.html
>> Sent from the Rmetrics mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should
>> go.
>>
>>     [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should
>> go.
>>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From alexios at 4dscape.com  Wed Jul 20 18:40:16 2011
From: alexios at 4dscape.com (alexios ghalanos)
Date: Wed, 20 Jul 2011 17:40:16 +0100
Subject: [R-SIG-Finance] (no subject)
In-Reply-To: <1311169952.61767.YahooMailRC@web130213.mail.mud.yahoo.com>
References: <1311013820.10748.YahooMailRC@web130201.mail.mud.yahoo.com>
	<1311015138566-3676133.post@n4.nabble.com>
	<1311045056.30738.YahooMailRC@web130213.mail.mud.yahoo.com>
	<2A6EE6F2-FD58-4133-9DEB-73B1874DBBD9@4dscape.com>
	<1311169952.61767.YahooMailRC@web130213.mail.mud.yahoo.com>
Message-ID: <1311180016.9338.8.camel@Metis>

You need to install certain dependencies (if you do not know how please
ask on the general R help forums).
These include:
Rcpp, RcppArmadillo, numDeriv, chron, Rsolnp, mvtnorm, Kendall, fftw
and can generally be installed with one call from within R,
e.g.
install.packages(c("Rcpp", "RcppArmadillo", "numDeriv", "chron",
"Rsolnp", "mvtnorm", "Kendall", "fftw"))

Depending on the functionality you make use of, more packages might have
to be installed.

Regards,
Alexios

On Wed, 2011-07-20 at 06:52 -0700, Amjad Ali wrote:
> 
> Hi dear,
> I tried to install rgrach package it couldnt make it.How to download
> and install it.It gives me the following error.I dont understand how
> deal with it.plz help in installing and then loading rgarch package.
> 
> 
> 
> 
> utils:::menuInstallLocal()
> package 'rgarch' successfully unpacked and MD5 sums checked
> > library(rgarch)
> Error in gzfile(file, "rb") : cannot open the connection
> In addition: Warning messages:
> 1: In gzfile(file, "r") :
>   cannot open compressed file 'C:/Program
> Files/R/R-2.13.1/library/Rcpp/DESCRIPTION', probable reason 'No such
> file or directory'
> 2: In gzfile(file, "rb") :
>   cannot open compressed file '', probable reason 'No such file or
> directory'
>  
>  
> Regards 
> 
> Amjad Ali 
> 
> 
> 
> 
> ______________________________________________________________________
> From: 4dscape.com <alexios at 4dscape.com>
> To: Amjad Ali <amjadali_ktk at yahoo.com>
> Cc: "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
> Sent: Wed, July 20, 2011 5:14:33 PM
> Subject: Re: [R-SIG-Finance] (no subject)
> 
> Look at the documentation for ugarchspec in the rgarch package. The
> option 'arfima' (TRUE/FALSE) is documented and rather self
> explanatory.
> 
> Regards,
> -Alexios
> 
> On Jul 19, 2011, at 4:10, Amjad Ali <amjadali_ktk at yahoo.com> wrote:
> 
> > Hi 
> > In the rgarch package I could not find the codes for simultaneous
> fitting of 
> > Autoregressive fractionally integrated Moving average model with
> GARCH errors 
> > i.e ARFIMA(p,d,q)-GARCH(r,s) model.in fGarch package the codes for
> fitting 
> > arma(p,q)-GARCH(r,s) is available but not for
> ARFIMA(p,d,q)-GARCH(r,s) . Please 
> > help in this regrad
> > 
> > 
> > Regards 
> > 
> > Amjad Ali 
> > 
> > 
> > 
> > 
> > ________________________________
> > From: soren wilkening <me at censix.com>
> > To: r-sig-finance at r-project.org
> > Sent: Mon, July 18, 2011 11:52:18 PM
> > Subject: Re: [R-SIG-Finance] (no subject)
> > 
> > You could use the 'rgarch' package. Does everything you want and
> more. (of
> > course there are alternatives as well)
> > Soren
> > 
> > -----
> > http://censix.com
> > --
> > View this message in context: 
> > http://r.789695.n4.nabble.com/no-subject-tp3676098p3676133.html
> > Sent from the Rmetrics mailing list archive at Nabble.com.
> > 
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R
> questions should 
> > go.
> > 
> >    [[alternative HTML version deleted]]
> > 
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R
> questions should go.
> > 
> 
>


From noahsilverman at ucla.edu  Wed Jul 20 20:05:51 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Wed, 20 Jul 2011 11:05:51 -0700
Subject: [R-SIG-Finance] convert volatility of log returns to dollars
Message-ID: <1A2631EC-7C1D-4476-948C-8BE6EB41659C@ucla.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110720/083c7860/attachment.pl>

From patrick at burns-stat.com  Wed Jul 20 20:27:59 2011
From: patrick at burns-stat.com (Patrick Burns)
Date: Wed, 20 Jul 2011 19:27:59 +0100
Subject: [R-SIG-Finance] convert volatility of log returns to dollars
In-Reply-To: <1A2631EC-7C1D-4476-948C-8BE6EB41659C@ucla.edu>
References: <1A2631EC-7C1D-4476-948C-8BE6EB41659C@ucla.edu>
Message-ID: <4E271E2F.6070001@burns-stat.com>

Noah,

Actually I think it is about 91 cents.

r = log(P1/P0)

so:

P1 = P0 * exp(r)

and the difference is:

P0 * exp(r) - P0 = P0 * (exp(r) - 1)

I think you really want to put in the
current value of the portfolio rather
than the average.

I'm surprised by the size of the difference
in the two answers, but I don't see how
my answer isn't right.

The standard deviation of the prices is
the wrong thing but I can't currently see
just how wrong.  At least part of the
answer is the autocorrelation of the
prices.  This is related to the blog post:
http://www.portfolioprobe.com/2011/01/12/the-number-1-novice-quant-mistake/

Pat


On 20/07/2011 19:05, Noah Silverman wrote:
> While not specifically an "R" question, I was hoping someone in the group could help with an answer. (It is finance related and I am coding in R)
>
>
> I stuck on converting volatility of log returns to an absolute dollar amount.  The main question is, "How many dollars/cents is one standard deviation give our current price and volatility of returns?"
>
>
> For example (x are a series of prices)
> range(x)
> 753.0  763.5
>
> mean(x)
> 758.9125
>
> sd(x)
> 2.61521
> # I assume that this answers my main question with "$2.62"
>
> Now, If I take the log returns
> r<- diff(log(x))
> r[1]<- 0
>
> Then calculate the SD of the returns:
> sd(r)
> 0.001201941
>
> This is where I'm stuck.  How can I translate the 0.001201941 into the correct monetary value?  (Which I assume is $2.62)
>
> Thanks!
>
> -N
>
>
>
>
> Hi,
>
> I'm a bit confused on how to convert a garch of log returns into a dollar value.
>
> My understanding is that garch will give us the volatility. The square root of that is the standard deviation. But just multiplying the SD times the price does not appear to produce the correct values. (They seem too large.)
>
> To make is simpler, if I have 100 prices and first calculate the log returns:
>
>
>
> then calculate the volatility:
>
>
> I have the volatility of the log returns. How can I convert that back to a physical dollar value. I want to answer the question, "How many dollars/cents is one standard deviation given the current price and volatility of returns."
>
> Thanks!
>
>
>
>
> --
> Noah Silverman
> UCLA Department of Statistics
> 8117 Math Sciences Building
> Los Angeles, CA 90095
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From arun.kumar.saha at gmail.com  Wed Jul 20 20:31:57 2011
From: arun.kumar.saha at gmail.com (Arun Kumar Saha)
Date: Thu, 21 Jul 2011 00:01:57 +0530
Subject: [R-SIG-Finance]
	=?utf-8?q?=5BR-SIG-Fin=E2=80=8Bance=5D_convert_vo?=
	=?utf-8?q?latility_of_log_returns_to_dollars?=
Message-ID: <CAPVuaOd_1rhZaf_1wCQvvQq0uguDesABCV=nAfWNe-AeYKm_8g@mail.gmail.com>

Dear Noah, first of all I would not suggest to do any statistical
calculation directly on price as price generally non-stationary, hence
you might get spurious result. Therefore may be your analysis like:

mean(x)
758.9125

sd(x)
2.61521

may be incorrect.

Now coming to your main question, if I understood your problem
correctly, then your are perhaps asking: how to calculate dollar
volatility.

To answer this, I would rather go for some ***model based realism***
hence would assume following simple model as DGP for price:

log(y[t+1]) = log(y[t]) + epsilon[t+1], epsilon[t+1]~N(0, 0.001201941^2)

Therefore given y[t], you can easily estimate the SD of y[t+1], using
some simple arithmetic of log-normal distribution.

However there is some approximate approach as well...........

y[t+1]) -y[t] = y[t] * (y[t+1]) -y[t])/y[t] = (approximately) y[t] *
log(y[t+1]/y[t]) = y[t] * epsilon[t+1]

Therefore given y[t], you can again easily estimate the SD of y[t+1]),
which will be your dollar volatility.

HTH
_____________________________________________________

Arun Kumar Saha, FRM
QUANTITATIVE RISK AND HEDGE CONSULTING SPECIALIST
Visit me at: http://in.linkedin.com/in/ArunFRM


From noahsilverman at ucla.edu  Thu Jul 21 01:41:52 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Wed, 20 Jul 2011 16:41:52 -0700
Subject: [R-SIG-Finance] convert volatility of log returns to dollars
In-Reply-To: <4E271E2F.6070001@burns-stat.com>
References: <1A2631EC-7C1D-4476-948C-8BE6EB41659C@ucla.edu>
	<4E271E2F.6070001@burns-stat.com>
Message-ID: <26BED63A-681D-4E8F-AB06-7A124914F866@ucla.edu>

Pat,

Thanks for the reply.

I believe that to estimate the dollar value of the standard deviation, the formula would be:

with r the volatility (through garch, sum of squared logged returns, etc.)

(1 - exp(r)) * Price


Of course this isn't "correct", as we can never know the true volatility, but only an estimate baed on historical returns.  But the boss asked me yesterday for this and I want to give him an answer that is as reasonable as possible.

Thanks,


--
Noah Silverman
UCLA Department of Statistics
8117 Math Sciences Building
Los Angeles, CA 90095

On Jul 20, 2011, at 11:27 AM, Patrick Burns wrote:

> Noah,
> 
> Actually I think it is about 91 cents.
> 
> r = log(P1/P0)
> 
> so:
> 
> P1 = P0 * exp(r)
> 
> and the difference is:
> 
> P0 * exp(r) - P0 = P0 * (exp(r) - 1)
> 
> I think you really want to put in the
> current value of the portfolio rather
> than the average.
> 
> I'm surprised by the size of the difference
> in the two answers, but I don't see how
> my answer isn't right.
> 
> The standard deviation of the prices is
> the wrong thing but I can't currently see
> just how wrong.  At least part of the
> answer is the autocorrelation of the
> prices.  This is related to the blog post:
> http://www.portfolioprobe.com/2011/01/12/the-number-1-novice-quant-mistake/
> 
> Pat
> 
> 
> On 20/07/2011 19:05, Noah Silverman wrote:
>> While not specifically an "R" question, I was hoping someone in the group could help with an answer. (It is finance related and I am coding in R)
>> 
>> 
>> I stuck on converting volatility of log returns to an absolute dollar amount.  The main question is, "How many dollars/cents is one standard deviation give our current price and volatility of returns?"
>> 
>> 
>> For example (x are a series of prices)
>> range(x)
>> 753.0  763.5
>> 
>> mean(x)
>> 758.9125
>> 
>> sd(x)
>> 2.61521
>> # I assume that this answers my main question with "$2.62"
>> 
>> Now, If I take the log returns
>> r<- diff(log(x))
>> r[1]<- 0
>> 
>> Then calculate the SD of the returns:
>> sd(r)
>> 0.001201941
>> 
>> This is where I'm stuck.  How can I translate the 0.001201941 into the correct monetary value?  (Which I assume is $2.62)
>> 
>> Thanks!
>> 
>> -N
>> 
>> 
>> 
>> 
>> Hi,
>> 
>> I'm a bit confused on how to convert a garch of log returns into a dollar value.
>> 
>> My understanding is that garch will give us the volatility. The square root of that is the standard deviation. But just multiplying the SD times the price does not appear to produce the correct values. (They seem too large.)
>> 
>> To make is simpler, if I have 100 prices and first calculate the log returns:
>> 
>> 
>> 
>> then calculate the volatility:
>> 
>> 
>> I have the volatility of the log returns. How can I convert that back to a physical dollar value. I want to answer the question, "How many dollars/cents is one standard deviation given the current price and volatility of returns."
>> 
>> Thanks!
>> 
>> 
>> 
>> 
>> --
>> Noah Silverman
>> UCLA Department of Statistics
>> 8117 Math Sciences Building
>> Los Angeles, CA 90095
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>> 
> 
> -- 
> Patrick Burns
> patrick at burns-stat.com
> http://www.burns-stat.com
> http://www.portfolioprobe.com/blog
> twitter: @portfolioprobe


From youcheng.t.lin at gmail.com  Thu Jul 21 04:08:54 2011
From: youcheng.t.lin at gmail.com (Youcheng Lin)
Date: Wed, 20 Jul 2011 21:08:54 -0500
Subject: [R-SIG-Finance] How to set Color scale for color2D.matplot()
Message-ID: <DF994704-FF54-4043-9A48-2D4B0A98B164@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110720/43929e04/attachment.pl>

From jacekernie at gmail.com  Thu Jul 21 12:58:33 2011
From: jacekernie at gmail.com (Jacek Ernie)
Date: Thu, 21 Jul 2011 11:58:33 +0100
Subject: [R-SIG-Finance] rgarch package - VAR in DCC model example
Message-ID: <CAMEs3iBXSZC6OBWOFzNxeon-cM8HqV=MMvfGq9DV_dvzbbgDZA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110721/9b0583f1/attachment.pl>

From alexios at 4dscape.com  Thu Jul 21 16:21:59 2011
From: alexios at 4dscape.com (alexios)
Date: Thu, 21 Jul 2011 15:21:59 +0100
Subject: [R-SIG-Finance] rgarch package - VAR in DCC model example
In-Reply-To: <CAMEs3iBXSZC6OBWOFzNxeon-cM8HqV=MMvfGq9DV_dvzbbgDZA@mail.gmail.com>
References: <CAMEs3iBXSZC6OBWOFzNxeon-cM8HqV=MMvfGq9DV_dvzbbgDZA@mail.gmail.com>
Message-ID: <4E283607.9040001@4dscape.com>

See ?dccspec

Code example follows:

# start code
library(rgarch)
data(dji30ret)
X = as.matrix(dji30ret[,1:5])

# univariate spec for 5 variables
uspec = multispec( replicate( 5, ugarchspec() ) )

# multivariate spec. VAR with 1 lag...(The robust version is slower but 
# uses a least trimmed squares procedure (see the references).
mspec = dccspec(uspec, VAR = TRUE, VAR.opt = list(robust = FALSE,
lag = 1, lag.max = NULL, lag.criterion = c("AIC", "HQ", "SC",
"FPE"), external.regressors = NULL, robust.control = list(gamma = 0.25,
delta = 0.01, nc = 10, ns = 500)), dccOrder = c(1, 1), distribution = 
c("mvnorm", "mvt", "mvlaplace")[1])

# see ?dccfit for option of passing the VAR estimate seperately at this 
# stage and the methods applicable to the dccfit object
# (?"DCCfit-class")
fit = dccfit(spec = mspec, X)

# end code

Now any mean forecast or simulation (via dccforecast or dccsim) will be 
based on the VAR estimate. Note that the DCC model is a 3-step 
estimation in the case of VAR (VAR -> univariate GARCH -> DCC), whilst 2 
step when using a univariate mean specification via ugarchspec().

Regards,

Alexios

On 21/07/2011 11:58, Jacek Ernie wrote:
> Hi,
>
> I'm just looking for an example of how to use VAR in DCC model in rgarch
> package.
>
> Many thanks.
>
> Kind regards,
> Jacek
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>


From 1987.zhangxi at gmail.com  Thu Jul 21 19:24:35 2011
From: 1987.zhangxi at gmail.com (zoe_zhang)
Date: Thu, 21 Jul 2011 10:24:35 -0700 (PDT)
Subject: [R-SIG-Finance] rgarch package - VAR in DCC model example
In-Reply-To: <CAMEs3iBXSZC6OBWOFzNxeon-cM8HqV=MMvfGq9DV_dvzbbgDZA@mail.gmail.com>
References: <CAMEs3iBXSZC6OBWOFzNxeon-cM8HqV=MMvfGq9DV_dvzbbgDZA@mail.gmail.com>
Message-ID: <1311269075387-3684370.post@n4.nabble.com>

Hello,
sorry to bother.
 I am trying to use rgarch package too. But I have problems to load the
package. Coule you please give me some guidance?
I download the rgarch package from
https://r-forge.r-project.org/R/?group_id=339 and then put it in the library
but it still doesn't work.

Thank you so much

cheers,
Zoe

--
View this message in context: http://r.789695.n4.nabble.com/rgarch-package-VAR-in-DCC-model-example-tp3683371p3684370.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From 1987.zhangxi at gmail.com  Thu Jul 21 19:54:37 2011
From: 1987.zhangxi at gmail.com (zoe_zhang)
Date: Thu, 21 Jul 2011 10:54:37 -0700 (PDT)
Subject: [R-SIG-Finance] rgarch package problems
Message-ID: <1311270877825-3684477.post@n4.nabble.com>

Hello, R users,
sorry to bother.
 I am trying to use rgarch package. But I have problems to load it. Could
you please give me some guidance?
I download the rgarch package from
https://r-forge.r-project.org/R/?group_id=339 and then put it in the library
but it still doesn't work. saying,
errors in library(rgarch) : rgarch' is not effective installed package

Thank you so much

cheers,
Zoe 

--
View this message in context: http://r.789695.n4.nabble.com/rgarch-package-problems-tp3684477p3684477.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From me at censix.com  Thu Jul 21 20:08:32 2011
From: me at censix.com (me at censix.com)
Date: Thu, 21 Jul 2011 20:08:32 +0200 (CEST)
Subject: [R-SIG-Finance] rgarch package problems
In-Reply-To: <1311270877825-3684477.post@n4.nabble.com>
References: <1311270877825-3684477.post@n4.nabble.com>
Message-ID: <39511.91.4.42.95.1311271712.squirrel@censix.com>

if you need help with your installation, you will at least have to provide

the R version  that you are using
Windows or *nix ?
the command(s) you used for the installation of the package
the exact text output=error you got

then someone *may* volunteer to help you


> Hello, R users,
> sorry to bother.
>  I am trying to use rgarch package. But I have problems to load it. Could
> you please give me some guidance?
> I download the rgarch package from
> https://r-forge.r-project.org/R/?group_id=339 and then put it in the
> library
> but it still doesn't work. saying,
> errors in library(rgarch) : rgarch' is not effective installed package
>
> Thank you so much
>
> cheers,
> Zoe
>
> --
> View this message in context:
> http://r.789695.n4.nabble.com/rgarch-package-problems-tp3684477p3684477.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


-- 
http://censix.com


From brian at braverock.com  Thu Jul 21 20:10:51 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 21 Jul 2011 13:10:51 -0500
Subject: [R-SIG-Finance] rgarch package problems
In-Reply-To: <1311270877825-3684477.post@n4.nabble.com>
References: <1311270877825-3684477.post@n4.nabble.com>
Message-ID: <1311271851.2585.8.camel@brian-rcg>

On Thu, 2011-07-21 at 10:54 -0700, zoe_zhang wrote:
> Hello, R users,
> sorry to bother.
>  I am trying to use rgarch package. But I have problems to load it. Could
> you please give me some guidance?
> I download the rgarch package from
> https://r-forge.r-project.org/R/?group_id=339 and then put it in the library
> but it still doesn't work. saying,
> errors in library(rgarch) : rgarch' is not effective installed package

As noted at the link above, you should:

install.packages("rgarch", repos="http://R-Forge.R-project.org")

note from the DESCRIPTION file that rgarch has a significant number of
dependencies and suggests:

Depends: R (>= 2.10.0), Rcpp (>= 0.8.5), RcppArmadillo (>= 0.2.5),
methods, Matrix, numDeriv, chron, Rsolnp, mvtnorm, Kendall, fftw

Suggests: xts, timeSeries, multicore, snowfall, Bessel, JADE, fastICA,
PearsonICA, ff, spd, sandwich

Some or all of these other packages may need to be installed first.

Regards,

  - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From 1987.zhangxi at gmail.com  Thu Jul 21 21:13:54 2011
From: 1987.zhangxi at gmail.com (zoe_zhang)
Date: Thu, 21 Jul 2011 12:13:54 -0700 (PDT)
Subject: [R-SIG-Finance] rgarch package problems
In-Reply-To: <1311271851.2585.8.camel@brian-rcg>
References: <1311270877825-3684477.post@n4.nabble.com>
	<1311271851.2585.8.camel@brian-rcg>
Message-ID: <1311275634346-3684717.post@n4.nabble.com>

Thank you, Brian,
I did follow the command as install.packages("rgarch",
repos="http://R-Forge.R-project.org"), but it came out
with the warning" In getDependencies(pkgs, dependencies, available, lib) :
  package ?rgarch? is not available (for R version 2.13.1)"

I followed your suggestion and installed the dependencies and suggests
>install.packages(c("Rsolnp", "mvtnorm", "Kendall",
"fftw","Matrix","xts","timeSeries","multicore","snowfall","Bessel","JADE","fastICA","PearsonICA","ff","spd","sandwich")) 

then did install.packages("rgarch", repos="http://R-Forge.R-project.org") 
again,
but same warning again.
" In getDependencies(pkgs, dependencies, available, lib) :
  package ?rgarch? is not available (for R version 2.13.1)"

 >library(rgarch)
errors in library(rgarch) : rgarch' is not effective installed package 

Is there any further more suggestions?
Thank you so much in advance!

Cheers,
Zoe

--
View this message in context: http://r.789695.n4.nabble.com/rgarch-package-problems-tp3684477p3684717.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Thu Jul 21 21:18:01 2011
From: alexios at 4dscape.com (4dscape.com)
Date: Thu, 21 Jul 2011 20:18:01 +0100
Subject: [R-SIG-Finance] rgarch package problems
In-Reply-To: <1311275634346-3684717.post@n4.nabble.com>
References: <1311270877825-3684477.post@n4.nabble.com>
	<1311271851.2585.8.camel@brian-rcg>
	<1311275634346-3684717.post@n4.nabble.com>
Message-ID: <7599B120-3A13-4981-B7A2-C2B472100846@4dscape.com>

Currently no windows binaries are building on r-forge from what I gather. This will hopefully be resolved soon.

-Alexios

Sent from my iPhone

On Jul 21, 2011, at 20:13, zoe_zhang <1987.zhangxi at gmail.com> wrote:

> Thank you, Brian,
> I did follow the command as install.packages("rgarch",
> repos="http://R-Forge.R-project.org"), but it came out
> with the warning" In getDependencies(pkgs, dependencies, available, lib) :
>  package ?rgarch? is not available (for R version 2.13.1)"
> 
> I followed your suggestion and installed the dependencies and suggests
>> install.packages(c("Rsolnp", "mvtnorm", "Kendall",
> "fftw","Matrix","xts","timeSeries","multicore","snowfall","Bessel","JADE","fastICA","PearsonICA","ff","spd","sandwich")) 
> 
> then did install.packages("rgarch", repos="http://R-Forge.R-project.org") 
> again,
> but same warning again.
> " In getDependencies(pkgs, dependencies, available, lib) :
>  package ?rgarch? is not available (for R version 2.13.1)"
> 
>> library(rgarch)
> errors in library(rgarch) : rgarch' is not effective installed package 
> 
> Is there any further more suggestions?
> Thank you so much in advance!
> 
> Cheers,
> Zoe
> 
> --
> View this message in context: http://r.789695.n4.nabble.com/rgarch-package-problems-tp3684477p3684717.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From 1987.zhangxi at gmail.com  Thu Jul 21 21:22:02 2011
From: 1987.zhangxi at gmail.com (zoe_zhang)
Date: Thu, 21 Jul 2011 12:22:02 -0700 (PDT)
Subject: [R-SIG-Finance] rgarch package problems
In-Reply-To: <39511.91.4.42.95.1311271712.squirrel@censix.com>
References: <1311270877825-3684477.post@n4.nabble.com>
	<39511.91.4.42.95.1311271712.squirrel@censix.com>
Message-ID: <1311276122978-3684743.post@n4.nabble.com>

Thank you for reminding, Soren,
I am doing in Win system using R version 2.13.1 and follow the command which
is listed in the link https://r-forge.r-project.org/R/?group_id=339
> install.packages("rgarch", repos="http://R-Forge.R-project.org") 
 but came out the warnings " In getDependencies(pkgs, dependencies,
available, lib) :
  package ?rgarch? is not available (for R version 2.13.1) "
> library(rgarch)
errors in library(rgarch) : rgarch' is not effective installed package 

Tried Brian's guidance
instal the dependencies and suggests in advance, but still came out with
same warnings and errors

I wonder if there's something wrong with my installation.

Again, i appreciate your time

Cheers,
Zoe

--
View this message in context: http://r.789695.n4.nabble.com/rgarch-package-problems-tp3684477p3684743.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From h.stegmann at onlinehome.de  Thu Jul 21 22:12:57 2011
From: h.stegmann at onlinehome.de (microlino)
Date: Thu, 21 Jul 2011 13:12:57 -0700 (PDT)
Subject: [R-SIG-Finance] Quantstrat stoplimit orders not triggered
In-Reply-To: <1310923169664-3673706.post@n4.nabble.com>
References: <1310923169664-3673706.post@n4.nabble.com>
Message-ID: <1311279177898-3684861.post@n4.nabble.com>

Ok, it seems the stoplimit orders are only filled if the signal condition is
TRUE. So how can I keep them open after the last corresponding market order
has been placedand the signal is FALSE from then on??

--
View this message in context: http://r.789695.n4.nabble.com/Quantstrat-stoplimit-orders-not-triggered-tp3673706p3684861.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Thu Jul 21 22:20:30 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 21 Jul 2011 15:20:30 -0500
Subject: [R-SIG-Finance] Quantstrat stoplimit orders not triggered
In-Reply-To: <1311279177898-3684861.post@n4.nabble.com>
References: <1310923169664-3673706.post@n4.nabble.com>
	<1311279177898-3684861.post@n4.nabble.com>
Message-ID: <1311279630.2585.17.camel@brian-rcg>

On Thu, 2011-07-21 at 13:12 -0700, microlino wrote:
> Ok, it seems the stoplimit orders are only filled if the signal
> condition is TRUE. So how can I keep them open after the last
> corresponding market order has been placedand the signal is FALSE from
> then on?? 

Reproducible example please?  It makes it much easier for me to debug if
you have an example.

   - Brian


From h.stegmann at onlinehome.de  Thu Jul 21 22:31:26 2011
From: h.stegmann at onlinehome.de (microlino)
Date: Thu, 21 Jul 2011 13:31:26 -0700 (PDT)
Subject: [R-SIG-Finance] Quantstrat stoplimit orders not triggered
In-Reply-To: <1311279630.2585.17.camel@brian-rcg>
References: <1310923169664-3673706.post@n4.nabble.com>
	<1311279177898-3684861.post@n4.nabble.com>
	<1311279630.2585.17.camel@brian-rcg>
Message-ID: <1311280286841-3684941.post@n4.nabble.com>

Hi Brian,

I had attached an example to the first post, plus an example data file.
Please let me know if it can't be opened.

Heiko

--
View this message in context: http://r.789695.n4.nabble.com/Quantstrat-stoplimit-orders-not-triggered-tp3673706p3684941.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From gsee000 at gmail.com  Thu Jul 21 22:39:10 2011
From: gsee000 at gmail.com (G See)
Date: Thu, 21 Jul 2011 15:39:10 -0500
Subject: [R-SIG-Finance] Quantstrat stoplimit orders not triggered
In-Reply-To: <1311280286841-3684941.post@n4.nabble.com>
References: <1310923169664-3673706.post@n4.nabble.com>
	<1311279177898-3684861.post@n4.nabble.com>
	<1311279630.2585.17.camel@brian-rcg>
	<1311280286841-3684941.post@n4.nabble.com>
Message-ID: <CA+xi=qaWGHUBLjLakEM-YBPoWQvjW=OwZG5k1PVM+HRZNbdehQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110721/12aa346d/attachment.pl>

From h.stegmann at onlinehome.de  Thu Jul 21 22:47:46 2011
From: h.stegmann at onlinehome.de (Heiko Stegmann)
Date: Thu, 21 Jul 2011 22:47:46 +0200
Subject: [R-SIG-Finance] Quantstrat stoplimit orders not triggered
In-Reply-To: <CA+xi=qaWGHUBLjLakEM-YBPoWQvjW=OwZG5k1PVM+HRZNbdehQ@mail.gmail.com>
References: <1310923169664-3673706.post@n4.nabble.com>	<1311279177898-3684861.post@n4.nabble.com>	<1311279630.2585.17.camel@brian-rcg>	<1311280286841-3684941.post@n4.nabble.com>
	<CA+xi=qaWGHUBLjLakEM-YBPoWQvjW=OwZG5k1PVM+HRZNbdehQ@mail.gmail.com>
Message-ID: <4E289072.4030909@onlinehome.de>

Too bad... I didn't know the stoplimit orders don't work correctly. 
Anyway, here's what I tried to do:

#----------------------------------------------------------------------
require(quantstrat)
library(timeDate)

# Clean up
rm(list=ls(all=TRUE, pos=.blotter), pos=.blotter)
rm(list=ls(all=TRUE, pos=.instrument), pos=.instrument)
rm(list=ls(all=TRUE, pos=.strategy), pos=.strategy)

# Custom indicator, returns last bar's Close price
LastClose <- function(price) {
         temp <-  Cl(price)
	colnames(temp) <- "LastClose"
	temp
}

# Set initial values
initDate <- '1999-01-04 00:00'
initEq <- 10000

# Set up instruments
currency("USD")
symbols = c("EURUSD")
for(symbol in symbols){
stock("EURUSD","USD")
}

# Load data
EURUSD <- read.csv("EURUSD240.csv", stringsAsFactors=F, header=F)
EURUSD_datetimes <- timeDate(paste(EURUSD[,1], EURUSD[,2]), format = 
"%Y.%m.%d %H:%M")
EURUSD <- xts(EURUSD[3:7], EURUSD_datetimes)

getSymbols(symbols, src="csv")
for(symbol in symbols) {
     x <- get(symbol)
     x <- to.hourly(x, indexAt='firstof', drop.time=FALSE)
     indexFormat(x) <- '%Y-%m-%d %H:%M:%S'
     colnames(x) <- gsub("x",symbol,colnames(x))
     assign(symbol,x)
}

portfolio.st <- 'FXportf'
account.st <- 'FXacc'

# Initialize portfolio and account
initPortf(name=portfolio.st, symbols=symbols, initDate=initDate)
initAcct(name=account.st, portfolios=portfolio.st, initDate=initDate, 
initEq=initEq)
initOrders(portfolio=portfolio.st, initDate=initDate)

# Initialize a strategy object
strat <- strategy("StoplossTest")

# Add an indicator
#strat <- add.indicator(strategy = strat, name = "LastClose", arguments 
= list(price=quote(mktdata)), label= "LastClose")
strat <- add.indicator(strategy = strat, name = "LastClose", arguments 
=list(price=quote(mktdata)), label= "LastClose")

# Signal: TRUE if last bar's Close > 1.41
strat <- add.signal(strategy = strat, name="sigThreshold", arguments = 
list(column="LastClose", threshold=1.41, relationship="gt", 
cross=FALSE), label="LastCloseThrExc")

#Rule: Buy
strat <- add.rule(strategy = strat, name='ruleSignal', arguments = 
list(sigcol="LastCloseThrExc", sigval=TRUE, orderqty=1000, 
ordertype='market', orderside='long'), type='enter')
# Rule: Add stop loss
strat <- add.rule(strategy = strat, name='ruleSignal', arguments = 
list(sigcol="LastCloseThrExc", sigval=TRUE, orderqty=-1000, 
ordertype='stoplimit', orderside='long', threshold=-0.02, tmult=FALSE, 
replace=FALSE), type='risk')

# Process the indicators and generate trades
out <- applyStrategy(strategy=strat, portfolios=portfolio.st)
updatePortf(Portfolio=portfolio.st, Symbols=symbols)

# graphics
for(symbol in symbols){
	dev.new()
	chart.Posn(Portfolio=portfolio.st, Symbol=symbol, theme=themelist)
}

# Save results for inspection
ob <- getOrderBook("FXportf")
write.zoo(mktdata, quote=FALSE, file = "mktdata.csv")
write.zoo(getTxns("FXportf", "EURUSD"), quote=FALSE, file = "txns.csv")
write.zoo(ob$FXportf$EURUSD, quote=FALSE, file = "orderbook.csv")

#----------------------------------------------------------------------


The data EURUSD240.csv:
#----------------------------------------------------------------------

2010.11.01,00:00,1.3970,1.3996,1.3909,1.3979,4472
2010.11.01,04:00,1.3980,1.4010,1.3971,1.3979,3492
2010.11.01,08:00,1.3978,1.3992,1.3946,1.3966,6186
2010.11.01,12:00,1.3965,1.3969,1.3886,1.3896,6752
2010.11.01,16:00,1.3895,1.3906,1.3864,1.3887,5424
2010.11.01,20:00,1.3886,1.3901,1.3873,1.3897,3550
2010.11.02,00:00,1.3896,1.3915,1.3881,1.3899,3805
2010.11.02,04:00,1.3898,1.3942,1.3898,1.3935,4286
2010.11.02,08:00,1.3934,1.3992,1.3916,1.3966,6593
2010.11.02,12:00,1.3965,1.4049,1.3948,1.4007,7280
2010.11.02,16:00,1.4006,1.4057,1.4005,1.4035,5498
2010.11.02,20:00,1.4034,1.4041,1.4023,1.4030,3000
2010.11.03,00:00,1.4031,1.4045,1.4008,1.4014,3918
2010.11.03,04:00,1.4015,1.4022,1.3992,1.4002,3784
2010.11.03,08:00,1.4003,1.4058,1.4002,1.4052,5760
2010.11.03,12:00,1.4051,1.4053,1.4012,1.4026,6585
2010.11.03,16:00,1.4027,1.4172,1.4000,1.4103,9708
2010.11.03,20:00,1.4102,1.4144,1.4088,1.4123,4643
2010.11.04,00:00,1.4124,1.4137,1.4102,1.4123,5048
2010.11.04,04:00,1.4122,1.4142,1.4112,1.4135,4031
2010.11.04,08:00,1.4134,1.4263,1.4112,1.4225,7173
2010.11.04,12:00,1.4224,1.4281,1.4213,1.4252,7895
2010.11.04,16:00,1.4251,1.4261,1.4186,1.4208,5912
2010.11.04,20:00,1.4207,1.4220,1.4193,1.4212,3218
2010.11.05,00:00,1.4213,1.4247,1.4195,1.4209,3796
2010.11.05,04:00,1.4208,1.4217,1.4183,1.4185,4073
2010.11.05,08:00,1.4186,1.4228,1.4100,1.4101,5734
2010.11.05,12:00,1.4100,1.4125,1.4036,1.4100,4193
2010.11.05,16:00,1.4099,1.4106,1.4024,1.4043,3476
2010.11.05,20:00,1.4042,1.4049,1.4025,1.4031,1822
2010.11.07,23:00,1.4057,1.4061,1.4053,1.4054,348
2010.11.08,00:00,1.4053,1.4083,1.3919,1.3952,5118
2010.11.08,04:00,1.3951,1.3973,1.3931,1.3941,4295
2010.11.08,08:00,1.3940,1.3976,1.3899,1.3901,6779
2010.11.08,12:00,1.3900,1.3949,1.3892,1.3901,6713
2010.11.08,16:00,1.3902,1.3948,1.3888,1.3935,6576
2010.11.08,20:00,1.3936,1.3940,1.3911,1.3912,3647
2010.11.09,00:00,1.3913,1.3927,1.3847,1.3885,5510
2010.11.09,04:00,1.3886,1.3892,1.3839,1.3866,4817
2010.11.09,08:00,1.3865,1.3938,1.3824,1.3925,7614
2010.11.09,12:00,1.3924,1.3972,1.3908,1.3935,6446
2010.11.09,16:00,1.3936,1.3952,1.3813,1.3826,7277
2010.11.09,20:00,1.3827,1.3836,1.3748,1.3763,5346
2010.11.10,00:00,1.3764,1.3792,1.3736,1.3748,5173
2010.11.10,04:00,1.3747,1.3784,1.3738,1.3784,4982
2010.11.10,08:00,1.3783,1.3824,1.3754,1.3755,7301
2010.11.10,12:00,1.3754,1.3808,1.3688,1.3699,7625
2010.11.10,16:00,1.3698,1.3790,1.3671,1.3776,6470
2010.11.10,20:00,1.3777,1.3802,1.3765,1.3774,2830
2010.11.11,00:00,1.3773,1.3820,1.3754,1.3804,5449
2010.11.11,04:00,1.3805,1.3809,1.3771,1.3787,4960
2010.11.11,08:00,1.3786,1.3804,1.3718,1.3759,6311
2010.11.11,12:00,1.3760,1.3763,1.3664,1.3675,6846
2010.11.11,16:00,1.3674,1.3691,1.3637,1.3656,6376
2010.11.11,20:00,1.3657,1.3669,1.3644,1.3661,3677
2010.11.12,00:00,1.3662,1.3664,1.3601,1.3622,5697
2010.11.12,04:00,1.3621,1.3629,1.3592,1.3622,4606
2010.11.12,08:00,1.3621,1.3744,1.3574,1.3719,8334
2010.11.12,12:00,1.3720,1.3775,1.3660,1.3765,8074
2010.11.12,16:00,1.3764,1.3766,1.3660,1.3684,7500
2010.11.12,20:00,1.3685,1.3711,1.3678,1.3691,2911
2010.11.14,23:00,1.3707,1.3707,1.3682,1.3684,460
2010.11.15,00:00,1.3683,1.3749,1.3680,1.3720,4739
2010.11.15,04:00,1.3719,1.3720,1.3662,1.3673,4589
2010.11.15,08:00,1.3674,1.3678,1.3606,1.3614,6065
2010.11.15,12:00,1.3613,1.3667,1.3603,1.3629,6872
2010.11.15,16:00,1.3628,1.3629,1.3581,1.3610,5746
2010.11.15,20:00,1.3609,1.3621,1.3563,1.3578,4199
2010.11.16,00:00,1.3579,1.3623,1.3560,1.3617,4833
2010.11.16,04:00,1.3616,1.3654,1.3587,1.3589,4642
2010.11.16,08:00,1.3590,1.3619,1.3573,1.3595,6081
2010.11.16,12:00,1.3594,1.3641,1.3574,1.3583,7368
2010.11.16,16:00,1.3582,1.3589,1.3451,1.3489,6545
2010.11.16,20:00,1.3490,1.3496,1.3475,1.3483,3216
2010.11.17,00:00,1.3484,1.3512,1.3467,1.3499,2901
2010.11.17,04:00,1.3498,1.3516,1.3483,1.3499,2700
2010.11.17,08:00,1.3498,1.3525,1.3466,1.3506,4394
2010.11.17,12:00,1.3505,1.3542,1.3461,1.3542,4709
2010.11.17,16:00,1.3541,1.3563,1.3514,1.3530,4321
2010.11.17,20:00,1.3531,1.3534,1.3511,1.3529,2539
2010.11.18,00:00,1.3530,1.3569,1.3528,1.3561,3313
2010.11.18,04:00,1.3560,1.3607,1.3559,1.3586,3077
2010.11.18,08:00,1.3587,1.3653,1.3576,1.3634,4585
2010.11.18,12:00,1.3635,1.3666,1.3617,1.3625,4546
2010.11.18,16:00,1.3624,1.3645,1.3584,1.3620,4375
2010.11.18,20:00,1.3621,1.3647,1.3613,1.3643,2539
2010.11.19,00:00,1.3642,1.3660,1.3621,1.3635,2508
2010.11.19,04:00,1.3636,1.3682,1.3608,1.3681,2956
2010.11.19,08:00,1.3682,1.3730,1.3672,1.3720,4305
2010.11.19,12:00,1.3719,1.3730,1.3648,1.3653,4424
2010.11.19,16:00,1.3654,1.3681,1.3631,1.3663,3992
2010.11.19,20:00,1.3664,1.3695,1.3660,1.3675,1896
2010.11.21,23:00,1.3717,1.3743,1.3711,1.3736,582
2010.11.22,00:00,1.3735,1.3766,1.3713,1.3752,3862
2010.11.22,04:00,1.3751,1.3767,1.3741,1.3742,3488
2010.11.22,08:00,1.3743,1.3785,1.3723,1.3741,5686
2010.11.22,12:00,1.3742,1.3746,1.3618,1.3659,6150
2010.11.22,16:00,1.3660,1.3661,1.3576,1.3588,5910
2010.11.22,20:00,1.3587,1.3632,1.3587,1.3624,3504
2010.11.23,00:00,1.3623,1.3628,1.3548,1.3570,4024
2010.11.23,04:00,1.3569,1.3605,1.3526,1.3560,4353
2010.11.23,08:00,1.3559,1.3598,1.3543,1.3583,6509
2010.11.23,12:00,1.3582,1.3589,1.3437,1.3437,7152
2010.11.23,16:00,1.3436,1.3455,1.3370,1.3384,6131
2010.11.23,20:00,1.3385,1.3401,1.3361,1.3380,3989
2010.11.24,00:00,1.3379,1.3418,1.3361,1.3404,4666
2010.11.24,04:00,1.3405,1.3412,1.3381,1.3386,3550
2010.11.24,08:00,1.3385,1.3412,1.3285,1.3323,7124
2010.11.24,12:00,1.3322,1.3411,1.3320,1.3399,7327
2010.11.24,16:00,1.3398,1.3419,1.3340,1.3348,6352
2010.11.24,20:00,1.3347,1.3348,1.3310,1.3336,3067
2010.11.25,00:00,1.3337,1.3360,1.3307,1.3321,4172
2010.11.25,04:00,1.3322,1.3337,1.3308,1.3316,3563
2010.11.25,08:00,1.3315,1.3351,1.3287,1.3312,4810
2010.11.25,12:00,1.3311,1.3351,1.3305,1.3343,4181
2010.11.25,16:00,1.3344,1.3385,1.3338,1.3365,3232
2010.11.25,20:00,1.3364,1.3374,1.3345,1.3345,1531
2010.11.26,00:00,1.3346,1.3356,1.3326,1.3326,3527
2010.11.26,04:00,1.3327,1.3335,1.3265,1.3273,4409
2010.11.26,08:00,1.3272,1.3295,1.3218,1.3237,6853
2010.11.26,12:00,1.3238,1.3261,1.3200,1.3249,6254
2010.11.26,16:00,1.3250,1.3256,1.3212,1.3237,4652
2010.11.26,20:00,1.3236,1.3248,1.3232,1.3243,1701
2010.11.28,23:00,1.3280,1.3289,1.3265,1.3277,504
2010.11.29,00:00,1.3276,1.3286,1.3182,1.3230,4775
2010.11.29,04:00,1.3231,1.3250,1.3212,1.3244,4157
2010.11.29,08:00,1.3243,1.3300,1.3191,1.3196,6460
2010.11.29,12:00,1.3197,1.3197,1.3081,1.3082,7046
2010.11.29,16:00,1.3081,1.3109,1.3064,1.3096,5543
2010.11.29,20:00,1.3097,1.3137,1.3097,1.3106,3324
2010.11.30,00:00,1.3108,1.3149,1.3095,1.3128,4328
2010.11.30,04:00,1.3127,1.3129,1.3076,1.3112,4377
2010.11.30,08:00,1.3111,1.3135,1.2983,1.3033,7216
2010.11.30,12:00,1.3034,1.3045,1.2970,1.3017,6710
2010.11.30,16:00,1.3016,1.3046,1.2994,1.3003,6492
2010.11.30,20:00,1.3004,1.3017,1.2976,1.2980,4058


From gsee000 at gmail.com  Thu Jul 21 22:55:57 2011
From: gsee000 at gmail.com (G See)
Date: Thu, 21 Jul 2011 15:55:57 -0500
Subject: [R-SIG-Finance] Quantstrat stoplimit orders not triggered
In-Reply-To: <1311281256.2585.22.camel@brian-rcg>
References: <1310923169664-3673706.post@n4.nabble.com>
	<1311279177898-3684861.post@n4.nabble.com>
	<1311279630.2585.17.camel@brian-rcg>
	<1311280286841-3684941.post@n4.nabble.com>
	<CA+xi=qaWGHUBLjLakEM-YBPoWQvjW=OwZG5k1PVM+HRZNbdehQ@mail.gmail.com>
	<1311281256.2585.22.camel@brian-rcg>
Message-ID: <CA+xi=qY2NgAHRcJSAP57zaQfvHaQihMSv87hMR7TRyGm-CiPDw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110721/17eea187/attachment.pl>

From gsee000 at gmail.com  Fri Jul 22 05:23:26 2011
From: gsee000 at gmail.com (G See)
Date: Thu, 21 Jul 2011 22:23:26 -0500
Subject: [R-SIG-Finance] Quantstrat stoplimit orders not triggered
In-Reply-To: <4E289072.4030909@onlinehome.de>
References: <1310923169664-3673706.post@n4.nabble.com>
	<1311279177898-3684861.post@n4.nabble.com>
	<1311279630.2585.17.camel@brian-rcg>
	<1311280286841-3684941.post@n4.nabble.com>
	<CA+xi=qaWGHUBLjLakEM-YBPoWQvjW=OwZG5k1PVM+HRZNbdehQ@mail.gmail.com>
	<4E289072.4030909@onlinehome.de>
Message-ID: <CA+xi=qZsSQiuPBdF12EogQVV-PYm=4WW+-L9b00LkTzULCq0GQ@mail.gmail.com>

Heiko,

The problem here is that you're ending up with more than one column that has
"Close" in the name.  When it tries to addOrder it gets confused because
there is more than one "Close" price.  I'll try to get that patched this
weekend.

For now, I modified your script so that it works by changing your LastClose
function to LastPrice.  Does that do what it's supposed to do?

-Garrett


#Heiko's test script, modified by Garrett

require(quantstrat)
library(timeDate)

# Clean up
rm(list=ls(all=TRUE, pos=.blotter), pos=.blotter)
rm(list=ls(all=TRUE, pos=.instrument), pos=.instrument)
rm(list=ls(all=TRUE, pos=.strategy), pos=.strategy)

# Custom indicator, returns last bar's Close price
LastPrice <- function(price) {
       temp <-  Cl(price)
       colnames(temp) <- "LastPrice"
       temp
}

# Set initial values
initDate <- '1999-01-04 00:00'
initEq <- 10000

# Set up instruments
currency("USD")
symbols = "EURUSD"
stock("EURUSD","USD")

# Load data
#setwd('~/Downloads')
EURUSD <- read.csv("EURUSD240.csv", stringsAsFactors=F, header=F)
EURUSD_datetimes <- timeDate(paste(EURUSD[,1], EURUSD[,2]), format =
"%Y.%m.%d %H:%M")
EURUSD <- xts(EURUSD[3:7], EURUSD_datetimes)

#getSymbols(symbols, src="csv")
for(symbol in symbols) {
   x <- get(symbol)
   x <- to.hourly(x, indexAt='firstof', drop.time=FALSE)
   indexFormat(x) <- '%Y-%m-%d %H:%M:%S'
   colnames(x) <- gsub("x",symbol,colnames(x))
   assign(symbol,x)
}

portfolio.st <- 'FXportf'
account.st <- 'FXacc'

# Initialize portfolio and account
initPortf(name=portfolio.st, symbols=symbols, initDate=initDate)
initAcct(name=account.st, portfolios=portfolio.st, initDate=initDate,
initEq=initEq)
initOrders(portfolio=portfolio.st, initDate=initDate)

# Initialize a strategy object
strat <- strategy("StoplossTest")

# Signal: TRUE if last bar's Close > 1.41
strat <- add.signal(strategy = strat, name="sigThreshold",arguments =
list(threshold=1.41, column="LastPrice",relationship="gt",
cross=FALSE),label="LastCloseThrExc")

# Add an indicator
strat <- add.indicator(strategy = strat, name = "LastPrice", arguments =
list(price=quote(mktdata)), label= "LastPrice")

#Rule: Buy
strat <- add.rule(strategy = strat, name='ruleSignal', arguments =
list(sigcol="LastCloseThrExc", sigval=TRUE, orderqty=1000,
ordertype='market', orderside='long'), type='enter')

# Rule: Add stop loss
strat <- add.rule(strategy = strat, name='ruleSignal', arguments =
list(sigcol="LastCloseThrExc", sigval=TRUE, orderqty=-1000,
ordertype='stoplimit', orderside='long', threshold=-0.02, tmult=FALSE,
replace=FALSE), type='risk')

# Process the indicators and generate trades
out <- applyStrategy(strategy=strat, portfolios=portfolio.st)

updatePortf(Portfolio=portfolio.st, Symbols=symbols)

# graphics
for(symbol in symbols){
       dev.new()
       chart.Posn(Portfolio=portfolio.st, Symbol=symbol, theme=themelist)
}

# Save results for inspection
ob <- getOrderBook("FXportf")
write.zoo(mktdata, quote=FALSE, file = "mktdata.csv")
write.zoo(getTxns("FXportf", "EURUSD"), quote=FALSE, file = "txns.csv")
write.zoo(ob$FXportf$EURUSD, quote=FALSE, file = "orderbook.csv")
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110721/c93e95a7/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Stoploss_Test-02.R
Type: text/x-r
Size: 2728 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110721/c93e95a7/attachment.bin>

From jacekernie at gmail.com  Fri Jul 22 15:13:10 2011
From: jacekernie at gmail.com (Jacek)
Date: Fri, 22 Jul 2011 06:13:10 -0700 (PDT)
Subject: [R-SIG-Finance] rgarch package - VAR in DCC model example
In-Reply-To: <4E283607.9040001@4dscape.com>
References: <CAMEs3iBXSZC6OBWOFzNxeon-cM8HqV=MMvfGq9DV_dvzbbgDZA@mail.gmail.com>
	<4E283607.9040001@4dscape.com>
Message-ID: <1311340390403-3686647.post@n4.nabble.com>

Thank you very much Alexios.

May I just ask a few questions related to this code:

1. lag.max=NULL means you force the lag length to be equal 1 (lag=1)?

2. if lag.max=3 then lag length will be chosen according to the information
criterion from 1 to 3?

3. if after this code you write "fit" then you see univariate and DCC
estimates but no VAR (why?). Is this is the right why to get them:
fit at mfit$model$vrmodel$Bcoef ?

4. "see ?dccfit for option of passing the VAR estimate seperately at this
stage" - using varxfilter? But varxfilter doesn't find the optimal lag
length right? 

5. In the desription to rgarch package is writen that "For high frequency
data, the user should make use of non-named representation such as matrix".
So if I want to use it for intraday data this code should be working as it
is?

Thank you in advance!

Kind regards,
Jacek

--
View this message in context: http://r.789695.n4.nabble.com/rgarch-package-VAR-in-DCC-model-example-tp3683371p3686647.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From raphael.rossignol at math.u-psud.fr  Fri Jul 22 15:38:16 2011
From: raphael.rossignol at math.u-psud.fr (Raphael Rossignol)
Date: Fri, 22 Jul 2011 15:38:16 +0200
Subject: [R-SIG-Finance] The C function getQ0 returns a non-positive
	covariance matrix and	causes errors in arima()
Message-ID: <20110722153816.aqzc1lamo8o8gc4w@webmail.math.u-psud.fr>

Hi,

I sent this message a few days ago to the r-devel list, but the only  
answer I got back was to advise me to post it here. So here it is.

The function makeARIMA(), designed to construct some state space
representation of an ARIMA model, uses a C function called getQ0,
which can be found at the end of arima.c in R source files (library
stats). getQ0 takes two arguments, phi and theta, and returns the
covariance matrix of the state prediction error at time zero. The
reference for getQ0 (cited by help(arima)) is:
Gardner, G, Harvey, A. C. and Phillips, G. D. A. (1980) Algorithm
       AS154. An algorithm for exact maximum likelihood estimation of
       autoregressive-moving average models by means of Kalman filtering.
       _Applied Statistics_ *29*, 311-322.
where it is called subroutine STARMA (and coded in fortran 77).

My problem is that getQ0 returns incorrect covariance matrices in
certain cases. Indeed, below is an example of a
SARIMA(1,0,1)x(1,0,0)_12 where getQ0 gives a covariance matrix which
possess negative eigenvalues ! Below, I obtain getQ0 results through
makeARIMA().
Example:
> s <- 12
> phis <- 0.95
> phi1 <- 0.0001
> phi <- c(phi1,rep(0,s-2),phis,-phi1*phis)
> theta <- 0.7
> out <- makeARIMA(phi,theta,NULL)
> min(eigen(out$Pn)$value)
[1] -19.15890

There are consequences of this "bug" in the functions KalmanLike() and
arima(). Indeed, arima() in its default behaviour uses first CSS
method to get the initial value for an MLE search through optim. To
compute the likelihood, it uses getQ0 at the initialization of the
Kalman Filter. It may happen that getQ0 returns a covariance matrix
which possesses negative eigenvalues and that this gives a negative
gain in the Kalman filter, which in turn gives a likelihood equal to
NaN. Here is a reproducible example where I forced the use of 'ML'.
> set.seed(1)
> x <- arima.sim(100,model=list(ar=phi,ma=theta))
> KalmanLike(x,mod=out,fast=FALSE)
$Lik
ssq
NaN

$s2
       ssq
0.971436

> arima(x,order=c(1,0,1),seasonal=list(period=12,order=c(1,0,0)),include.mean=FALSE,init=c(phi1,theta,phis),method='ML')
Erreur dans optim(init[mask], armafn, method = optim.method, hessian =
TRUE,  :
    valeur non-finie fournie par optim

If needed, I can send a more natural example in which the above
behaviour is obtained. This error message ("Error in optim ...
non-finite finite-difference value") was already noted in the
following message, which remained without answer:
https://stat.ethz.ch/pipermail/r-devel/2009-February/052009.html

I could not figure out whether there is a real bug in getQ0 or if this
is due to some numerical instability. However, I tried to replace
getQ0 in two ways. The first one is to compute first the covariance
matrix of (X_{t-1},...,X_{t-p},Z_t,...,Z_{t-q}) and this is achieved
through the method of difference equations (page 93 of Brockwell and
Davis). This way was apparently suggested by a referee to Gardner et
al. paper (see page 314 of their paper).
Q0bis <- function(phi,theta){
    ## Computes the initial covariance matrix for the state space
representation of Gardner et al.
    p <- length(phi)
    q <- length(theta)
    r <- max(p,q+1)
    ttheta <- c(1,theta,rep(0,max(p,q+1)-q-1))
    A1 <- matrix(0,r,p)
    B <- (col(A1)+row(A1)<=p+1)
    C <- (col(A1)+row(A1)-1)
    A1[B] <- phi[C[B]]
    A2 <- matrix(0,r,q+1)
    C <- (col(A2)+row(A2)-1)
    B <- (C<=q+1)
    A2[B] <- ttheta[C[B]]
    A <- cbind(A1,A2)
    if (p==0) {
      S <- diag(q+1)
    }
    else {
      ## Compute the autocovariance function of U, the AR part of X
      r2 <- max(p+q,p+1)
      tphi <- c(1,-phi)
      C1 <- matrix(0,r2,r2)
      F <- row(C1)-col(C1)+1
      E <- (1<=F)&(F<=p+1)
      C1[E] <- tphi[F[E]]
      C2 <- matrix(0,r2,r2)
      F <- col(C2)+row(C2)-1
      E <- (F<=p+1) & col(C2)>=2
      C2[E] <- tphi[F[E]]
      Gam <- (C1+C2)
      g <- matrix(0,r2,1)
      g[1] <- 1
      rU <- solve(Gam,g)
      SU <- toeplitz(rU[1:(p+q),1])
      ## End of the difference equations method
      ## Then, compute correlation matrix of X
      A2 <- matrix(0,p,p+q)
      C <- col(A2)-row(A2)+1
      B <- (1<=C)&(C<=q+1)
      A2[B] <- ttheta[C[B]]
      SX <- A2%*%SU%*%t(A2)
      ## Now, compute correlation matrix between X and Z
      C1 <- matrix(0,q,q)
      F <- row(C1)-col(C1)+1
      E <- (F>=1) & (F<=p+1)
      C1[E] <- tphi[F[E]]
      g <- matrix(0,q,1)
      if (q) g[1:q,1] <- ttheta[1:q]
      rXZ <- forwardsolve(C1,g)
      SXZ <- matrix(0, p, q+1)
      F <- col(SXZ)-row(SXZ)
      E <- F>=1
      SXZ[E] <- rXZ[F[E]]
      S <- rbind(cbind(SX,SXZ),cbind(t(SXZ),diag(q+1)))
    }
    Q0 <- A%*%S%*%t(A)
}

The second way is to resolve brutally the equation of Gardner et al.
in the form (12), page 314 of their paper.

Q0ter <- function(phi,theta){
    p <- length(phi)
    q <- length(theta)
    r <- max(p,q+1)
    T <- matrix(0,r,r)
    if (p) T[1:p,1] <- phi
    if (r) T[1:(r-1),2:r] <- diag(r-1)
    V <- matrix(0,r,r)
    ttheta <- c(1,theta)
    V[1:(q+1),1:(q+1)] <- ttheta%x%t(ttheta)
    V <- matrix(V,ncol=1)
    S <- diag(r*r)-T%x%T
    Q0 <- solve(S,V)
    Q0 <- matrix(Q0,ncol=r)
}

My conclusion for now is that these two other ways give the same
answers (as returned by all.equal) and sometimes different answers
than getQ0. It may happen that they give a Q0 with negative
eigenvalues, but they are very very small, and then, the likelihood
computed by KalmanLike is a number (and not NaN). Here is a function
allowing to compare the three methods
test <- function(phi,theta){
    out <- makeARIMA(phi,theta,NULL)
    Q0bis <- Q0bis(phi,theta)
    Q0ter <- Q0ter(phi,theta)
    mod <- out
    modbis <- out
    modter <- out
    modbis$Pn <- Q0bis
    modter$Pn <- Q0ter
    set.seed(1)
    x <- arima.sim(100,model=list(ar=phi,ma=theta))
    s <- KalmanLike(x,mod=mod,fast=FALSE)
    sbis <- KalmanLike(x,modbis)
    ster <- KalmanLike(x,modter)
    test12 <- all.equal(out$Pn,Q0bis)
    test13 <- all.equal(out$Pn,Q0ter)
    test23 <- all.equal(Q0bis,Q0ter)

list(eigen=min(eigen(out$Pn)$value),eigenbis=min(eigen(Q0bis)$value),eigenter=min(eigen(Q0ter)$value),test12=test12,test13=test13,test23=test23,s=s,sbis=sbis,ster=ster)
}

And the test on the values of phi and theta above:
> test(phi,theta)
$eigen
[1] -19.15890

$eigenbis
[1] -9.680598e-23

$eigenter
[1] 1.859864e-23

$test12
[1] "Mean relative difference: 0.4255719"

$test13
[1] "Mean relative difference: 0.4255724"

$test23
[1] TRUE

$s
$s$Lik
ssq
NaN

$s$s2
       ssq
0.971436


$sbis
$sbis$Lik
        ssq
0.1322859

$sbis$s2
        ssq
0.9789775


$ster
$ster$Lik
        ssq
0.1322859

$ster$s2
        ssq
0.9789775



Here are my questions:
1) Does someone understand this strange behaviour of Q0 ?
2) Should I report this as a bug ?

By the way, Q0bis is only twice slower than makeARIMA() (but it is not
optimised), and Q0ter is 50 times slower than Q0bis.

For information:
> sessionInfo()

R version 2.10.1 (2009-12-14)
x86_64-pc-linux-gnu

locale:
   [1] LC_CTYPE=fr_FR.utf8       LC_NUMERIC=C
   [3] LC_TIME=fr_FR.utf8        LC_COLLATE=fr_FR.utf8
   [5] LC_MONETARY=C             LC_MESSAGES=fr_FR.utf8
   [7] LC_PAPER=fr_FR.utf8       LC_NAME=C
   [9] LC_ADDRESS=C              LC_TELEPHONE=C
[11] LC_MEASUREMENT=fr_FR.utf8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base


Best,

Raphael Rossignol

--
Assistant Professor of Mathematics
Univ. Paris-Sud 11


From gsee000 at gmail.com  Fri Jul 22 16:37:47 2011
From: gsee000 at gmail.com (G See)
Date: Fri, 22 Jul 2011 09:37:47 -0500
Subject: [R-SIG-Finance] Quantstrat stoplimit orders not triggered
In-Reply-To: <CA+xi=qZsSQiuPBdF12EogQVV-PYm=4WW+-L9b00LkTzULCq0GQ@mail.gmail.com>
References: <1310923169664-3673706.post@n4.nabble.com>
	<1311279177898-3684861.post@n4.nabble.com>
	<1311279630.2585.17.camel@brian-rcg>
	<1311280286841-3684941.post@n4.nabble.com>
	<CA+xi=qaWGHUBLjLakEM-YBPoWQvjW=OwZG5k1PVM+HRZNbdehQ@mail.gmail.com>
	<4E289072.4030909@onlinehome.de>
	<CA+xi=qZsSQiuPBdF12EogQVV-PYm=4WW+-L9b00LkTzULCq0GQ@mail.gmail.com>
Message-ID: <CA+xi=qZuHfzOYGSiygj352yGa9h00PGiJ+2xNEmGx-JLxrZjNA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110722/8ed8192a/attachment.pl>

From alexios at 4dscape.com  Fri Jul 22 17:56:05 2011
From: alexios at 4dscape.com (alexios)
Date: Fri, 22 Jul 2011 16:56:05 +0100
Subject: [R-SIG-Finance] rgarch package - VAR in DCC model example
In-Reply-To: <1311340390403-3686647.post@n4.nabble.com>
References: <CAMEs3iBXSZC6OBWOFzNxeon-cM8HqV=MMvfGq9DV_dvzbbgDZA@mail.gmail.com>
	<4E283607.9040001@4dscape.com>
	<1311340390403-3686647.post@n4.nabble.com>
Message-ID: <4E299D95.7030401@4dscape.com>

On 22/07/2011 14:13, Jacek wrote:
> Thank you very much Alexios.
>
> May I just ask a few questions related to this code:
>
> 1. lag.max=NULL means you force the lag length to be equal 1 (lag=1)?
>
Correct(or whatever lag is).
> 2. if lag.max=3 then lag length will be chosen according to the information
> criterion from 1 to 3?
>
Correct.
> 3. if after this code you write "fit" then you see univariate and DCC
> estimates but no VAR (why?). Is this is the right why to get them:
> fit at mfit$model$vrmodel$Bcoef ?
>
VAR estimate too big to fit on screen. Yes, use 
fit at mfit$model$vrmodel$Bcoef (will add a method in next release to make 
it more easily accessible).
> 4. "see ?dccfit for option of passing the VAR estimate seperately at this
> stage" - using varxfilter? But varxfilter doesn't find the optimal lag
> length right?
Correct.
>
> 5. In the desription to rgarch package is writen that "For high frequency
> data, the user should make use of non-named representation such as matrix".
> So if I want to use it for intraday data this code should be working as it
> is?
>
Yes.
> Thank you in advance!
>
> Kind regards,
> Jacek
>
HTH.
Alexios
> --
> View this message in context: http://r.789695.n4.nabble.com/rgarch-package-VAR-in-DCC-model-example-tp3683371p3686647.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>


From h.stegmann at onlinehome.de  Fri Jul 22 18:49:08 2011
From: h.stegmann at onlinehome.de (microlino)
Date: Fri, 22 Jul 2011 09:49:08 -0700 (PDT)
Subject: [R-SIG-Finance] Quantstrat stoplimit orders not triggered
In-Reply-To: <CA+xi=qZsSQiuPBdF12EogQVV-PYm=4WW+-L9b00LkTzULCq0GQ@mail.gmail.com>
References: <1310923169664-3673706.post@n4.nabble.com>
	<1311279177898-3684861.post@n4.nabble.com>
	<1311279630.2585.17.camel@brian-rcg>
	<1311280286841-3684941.post@n4.nabble.com>
	<CA+xi=qaWGHUBLjLakEM-YBPoWQvjW=OwZG5k1PVM+HRZNbdehQ@mail.gmail.com>
	<4E289072.4030909@onlinehome.de>
	<CA+xi=qZsSQiuPBdF12EogQVV-PYm=4WW+-L9b00LkTzULCq0GQ@mail.gmail.com>
Message-ID: <1311353347957-3687209.post@n4.nabble.com>

Thank you, Garrett!

However, unfortunately, it still does not work... The result is not
different from the original version.

As you can see from the orderbook below, a buy order at Close price is
placed whenever the signal is TRUE, i.e. after every bar that closes >1.41.
Simultaneously, a stoplimit order is placed along with every buy order at
the buy price -0.02. So far, so good.

What I expect is that every stoplimit order will be closed later through the
provided example data set, as price falls further. However, only one of the
stoplimit orders is closed, I have highlighted it below. It seems that the
stoplimits are closed only if (price < buyprice - 0.02) AND (signal ==
TRUE). You can easily see this logic in my example if you use a buy
threshold lower than 1.41.

Closing of a simple stoplimit should be triggered by price only, at least
this is what I think it should do. Are stoplimit orders defined differently
in quantstrat, so I need to code another signal that controls the stoplimit
orders separately, somehow? 

Heiko

Index Order.Qty Order.Price Order.Type Order.Side Order.Threshold
Order.Status Order.StatusTime Order.Set Txn.Fees
1999-01-04 00:00:00 0 NA init long 0 closed 1999-01-04 1 0
2010-11-03 17:00:00 -1000 1.3903 stoplimit long -0.02 open NA NA 0
2010-11-03 17:00:00 1000 1.4103 market long NA closed 2010-11-03 21:00:00 NA
0
2010-11-03 21:00:00 -1000 1.3923 stoplimit long -0.02 open NA NA 0
2010-11-03 21:00:00 1000 1.4123 market long NA closed 2010-11-04 01:00:00 NA
0
2010-11-04 01:00:00 -1000 1.3923 stoplimit long -0.02 open NA NA 0
2010-11-04 01:00:00 1000 1.4123 market long NA closed 2010-11-04 05:00:00 NA
0
2010-11-04 05:00:00 -1000 1.3935 stoplimit long -0.02 open NA NA 0
2010-11-04 05:00:00 1000 1.4135 market long NA closed 2010-11-04 09:00:00 NA
0
2010-11-04 09:00:00 -1000 1.4025 stoplimit long -0.02 open NA NA 0
2010-11-04 09:00:00 1000 1.4225 market long NA closed 2010-11-04 13:00:00 NA
0
*2010-11-04 13:00:00 -1000 1.4052 stoplimit long -0.02 closed 2010-11-05
13:00:00 NA 0*
2010-11-04 13:00:00 1000 1.4252 market long NA closed 2010-11-04 17:00:00 NA
0
2010-11-04 17:00:00 -1000 1.4008 stoplimit long -0.02 open NA NA 0
2010-11-04 17:00:00 1000 1.4208 market long NA closed 2010-11-04 21:00:00 NA
0
2010-11-04 21:00:00 -1000 1.4012 stoplimit long -0.02 open NA NA 0
2010-11-04 21:00:00 1000 1.4212 market long NA closed 2010-11-05 01:00:00 NA
0
2010-11-05 01:00:00 -1000 1.4009 stoplimit long -0.02 open NA NA 0
2010-11-05 01:00:00 1000 1.4209 market long NA closed 2010-11-05 05:00:00 NA
0
2010-11-05 05:00:00 -1000 1.3985 stoplimit long -0.02 open NA NA 0
2010-11-05 05:00:00 1000 1.4185 market long NA closed 2010-11-05 09:00:00 NA
0
2010-11-05 09:00:00 -1000 1.3901 stoplimit long -0.02 open NA NA 0
2010-11-05 09:00:00 1000 1.4101 market long NA closed 2010-11-05 13:00:00 NA
0

--
View this message in context: http://r.789695.n4.nabble.com/Quantstrat-stoplimit-orders-not-triggered-tp3673706p3687209.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From gsee000 at gmail.com  Fri Jul 22 19:13:29 2011
From: gsee000 at gmail.com (G See)
Date: Fri, 22 Jul 2011 12:13:29 -0500
Subject: [R-SIG-Finance] Quantstrat stoplimit orders not triggered
In-Reply-To: <1311353347957-3687209.post@n4.nabble.com>
References: <1310923169664-3673706.post@n4.nabble.com>
	<1311279177898-3684861.post@n4.nabble.com>
	<1311279630.2585.17.camel@brian-rcg>
	<1311280286841-3684941.post@n4.nabble.com>
	<CA+xi=qaWGHUBLjLakEM-YBPoWQvjW=OwZG5k1PVM+HRZNbdehQ@mail.gmail.com>
	<4E289072.4030909@onlinehome.de>
	<CA+xi=qZsSQiuPBdF12EogQVV-PYm=4WW+-L9b00LkTzULCq0GQ@mail.gmail.com>
	<1311353347957-3687209.post@n4.nabble.com>
Message-ID: <CA+xi=qbYjr3KZpT8juWkB2K3=i-vTybsPSWEZo617RyVPseLZw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110722/1bd45ef1/attachment.pl>

From gsee000 at gmail.com  Sat Jul 23 02:19:01 2011
From: gsee000 at gmail.com (G See)
Date: Fri, 22 Jul 2011 19:19:01 -0500
Subject: [R-SIG-Finance] Quantstrat stoplimit orders not triggered
In-Reply-To: <CA+xi=qbYjr3KZpT8juWkB2K3=i-vTybsPSWEZo617RyVPseLZw@mail.gmail.com>
References: <1310923169664-3673706.post@n4.nabble.com>
	<1311279177898-3684861.post@n4.nabble.com>
	<1311279630.2585.17.camel@brian-rcg>
	<1311280286841-3684941.post@n4.nabble.com>
	<CA+xi=qaWGHUBLjLakEM-YBPoWQvjW=OwZG5k1PVM+HRZNbdehQ@mail.gmail.com>
	<4E289072.4030909@onlinehome.de>
	<CA+xi=qZsSQiuPBdF12EogQVV-PYm=4WW+-L9b00LkTzULCq0GQ@mail.gmail.com>
	<1311353347957-3687209.post@n4.nabble.com>
	<CA+xi=qbYjr3KZpT8juWkB2K3=i-vTybsPSWEZo617RyVPseLZw@mail.gmail.com>
Message-ID: <CA+xi=qasZDgSdC=TAsJdY_bb1mjZwvRiRMGgJjkwoDqgdbCx7w@mail.gmail.com>

Patch committed to svn 697.

Let me know if there are still issues.

Garrett

Now, with your original test script and data (which are attached for ease of
reference) you can get this:

> ob$FXportf$EURUSD
                    Order.Qty Order.Price Order.Type  Order.Side
Order.Threshold Order.Status Order.StatusTime      Order.Set Txn.Fees
1999-01-04 00:00:00 "0"       NA          "init"      "long"     "0"
    "closed"     "1999-01-04"          "1"       "0"
2010-11-03 11:00:00 "-1000"   "1.3903"    "stoplimit" "long"     "-0.02"
    "closed"     "2010-11-08 02:00:00" NA        "0"
2010-11-03 11:00:00 "1000"    "1.4103"    "market"    "long"     NA
     "closed"     "2010-11-03 15:00:00" NA        "0"
2010-11-03 15:00:00 "-1000"   "1.3923"    "stoplimit" "long"     "-0.02"
    "closed"     "2010-11-07 18:00:00" NA        "0"
2010-11-03 15:00:00 "1000"    "1.4123"    "market"    "long"     NA
     "closed"     "2010-11-03 19:00:00" NA        "0"
2010-11-03 19:00:00 "-1000"   "1.3923"    "stoplimit" "long"     "-0.02"
    "closed"     "2010-11-07 18:00:00" NA        "0"
2010-11-03 19:00:00 "1000"    "1.4123"    "market"    "long"     NA
     "closed"     "2010-11-03 23:00:00" NA        "0"
2010-11-03 23:00:00 "-1000"   "1.3935"    "stoplimit" "long"     "-0.02"
    "closed"     "2010-11-07 18:00:00" NA        "0"
2010-11-03 23:00:00 "1000"    "1.4135"    "market"    "long"     NA
     "closed"     "2010-11-04 03:00:00" NA        "0"
2010-11-04 03:00:00 "-1000"   "1.4025"    "stoplimit" "long"     "-0.02"
    "closed"     "2010-11-05 11:00:00" NA        "0"
2010-11-04 03:00:00 "1000"    "1.4225"    "market"    "long"     NA
     "closed"     "2010-11-04 07:00:00" NA        "0"
2010-11-04 07:00:00 "-1000"   "1.4052"    "stoplimit" "long"     "-0.02"
    "closed"     "2010-11-05 07:00:00" NA        "0"
2010-11-04 07:00:00 "1000"    "1.4252"    "market"    "long"     NA
     "closed"     "2010-11-04 11:00:00" NA        "0"
2010-11-04 11:00:00 "-1000"   "1.4008"    "stoplimit" "long"     "-0.02"
    "closed"     "2010-11-07 18:00:00" NA        "0"
2010-11-04 11:00:00 "1000"    "1.4208"    "market"    "long"     NA
     "closed"     "2010-11-04 15:00:00" NA        "0"
2010-11-04 15:00:00 "-1000"   "1.4012"    "stoplimit" "long"     "-0.02"
    "closed"     "2010-11-07 18:00:00" NA        "0"
2010-11-04 15:00:00 "1000"    "1.4212"    "market"    "long"     NA
     "closed"     "2010-11-04 19:00:00" NA        "0"
2010-11-04 19:00:00 "-1000"   "1.4009"    "stoplimit" "long"     "-0.02"
    "closed"     "2010-11-07 18:00:00" NA        "0"
2010-11-04 19:00:00 "1000"    "1.4209"    "market"    "long"     NA
     "closed"     "2010-11-04 23:00:00" NA        "0"
2010-11-04 23:00:00 "-1000"   "1.3985"    "stoplimit" "long"     "-0.02"
    "closed"     "2010-11-07 18:00:00" NA        "0"
2010-11-04 23:00:00 "1000"    "1.4185"    "market"    "long"     NA
     "closed"     "2010-11-05 03:00:00" NA        "0"
2010-11-05 03:00:00 "-1000"   "1.3901"    "stoplimit" "long"     "-0.02"
    "closed"     "2010-11-08 02:00:00" NA        "0"
2010-11-05 03:00:00 "1000"    "1.4101"    "market"    "long"     NA
     "closed"     "2010-11-05 07:00:00" NA        "0"
> getPortfolio("FXportf")$symbols$EURUSD$txn
                    Txn.Qty Txn.Price Txn.Value Txn.Avg.Cost Pos.Qty
Pos.Avg.Cost Gross.Txn.Realized.PL Txn.Fees Net.Txn.Realized.PL Con.Mult
1999-01-04 00:00:00       0    0.0000       0.0       0.0000       0
0.000000               0.00000        0             0.00000        0
2010-11-03 15:00:00    1000    1.4123    1412.3       1.4123    1000
1.412300               0.00000        0             0.00000        1
2010-11-03 19:00:00    1000    1.4123    1412.3       1.4123    2000
1.412300               0.00000        0             0.00000        1
2010-11-03 23:00:00    1000    1.4135    1413.5       1.4135    3000
1.412700               0.00000        0             0.00000        1
2010-11-04 03:00:00    1000    1.4225    1422.5       1.4225    4000
1.415150               0.00000        0             0.00000        1
2010-11-04 07:00:00    1000    1.4252    1425.2       1.4252    5000
1.417160               0.00000        0             0.00000        1
2010-11-04 11:00:00    1000    1.4208    1420.8       1.4208    6000
1.417767               0.00000        0             0.00000        1
2010-11-04 15:00:00    1000    1.4212    1421.2       1.4212    7000
1.418257               0.00000        0             0.00000        1
2010-11-04 19:00:00    1000    1.4209    1420.9       1.4209    8000
1.418588               0.00000        0             0.00000        1
2010-11-04 23:00:00    1000    1.4185    1418.5       1.4185    9000
1.418578               0.00000        0             0.00000        1
2010-11-05 03:00:00    1000    1.4101    1410.1       1.4101   10000
1.417730               0.00000        0             0.00000        1
2010-11-05 07:00:00   -1000    1.4052   -1405.2       1.4052    9000
1.419122             -12.53000        0           -12.53000        1
2010-11-05 07:00:00    1000    1.4100    1410.0       1.4100   10000
1.418210               0.00000        0             0.00000        1
2010-11-05 11:00:00   -1000    1.4025   -1402.5       1.4025    9000
1.419956             -15.71000        0           -15.71000        1
2010-11-07 18:00:00   -1000    1.3923   -1392.3       1.3923    8000
1.423412             -27.65556        0           -27.65556        1
2010-11-07 18:00:00   -1000    1.3923   -1392.3       1.3923    7000
1.427857             -31.11250        0           -31.11250        1
2010-11-07 18:00:00   -1000    1.3935   -1393.5       1.3935    6000
1.433583             -34.35714        0           -34.35714        1
2010-11-07 18:00:00   -1000    1.4008   -1400.8       1.4008    5000
1.440140             -32.78333        0           -32.78333        1
2010-11-07 18:00:00   -1000    1.4012   -1401.2       1.4012    4000
1.449875             -38.94000        0           -38.94000        1
2010-11-07 18:00:00   -1000    1.4009   -1400.9       1.4009    3000
1.466200             -48.97500        0           -48.97500        1
2010-11-07 18:00:00   -1000    1.3985   -1398.5       1.3985    2000
1.500050             -67.70000        0           -67.70000        1
2010-11-08 02:00:00   -1000    1.3903   -1390.3       1.3903    1000
1.609800            -109.75000        0          -109.75000        1
2010-11-08 02:00:00   -1000    1.3901   -1390.1       1.3901       0
0.000000            -219.70000        0          -219.70000        1
>



On Fri, Jul 22, 2011 at 12:13 PM, G See <gsee000 at gmail.com> wrote:

> I was wondering why you thought the bug I fixed had to do with stoplimits.
>
> I think I understand the problem now.  I'll take a look.
>
> On Fri, Jul 22, 2011 at 11:49 AM, microlino <h.stegmann at onlinehome.de>wrote:
>
>> Thank you, Garrett!
>>
>> However, unfortunately, it still does not work... The result is not
>> different from the original version.
>>
>> As you can see from the orderbook below, a buy order at Close price is
>> placed whenever the signal is TRUE, i.e. after every bar that closes
>> >1.41.
>> Simultaneously, a stoplimit order is placed along with every buy order at
>> the buy price -0.02. So far, so good.
>>
>> What I expect is that every stoplimit order will be closed later through
>> the
>> provided example data set, as price falls further. However, only one of
>> the
>> stoplimit orders is closed, I have highlighted it below. It seems that the
>> stoplimits are closed only if (price < buyprice - 0.02) AND (signal ==
>> TRUE). You can easily see this logic in my example if you use a buy
>> threshold lower than 1.41.
>>
>> Closing of a simple stoplimit should be triggered by price only, at least
>> this is what I think it should do. Are stoplimit orders defined
>> differently
>> in quantstrat, so I need to code another signal that controls the
>> stoplimit
>> orders separately, somehow?
>>
>> Heiko
>>
>> Index Order.Qty Order.Price Order.Type Order.Side Order.Threshold
>> Order.Status Order.StatusTime Order.Set Txn.Fees
>> 1999-01-04 00:00:00 0 NA init long 0 closed 1999-01-04 1 0
>> 2010-11-03 17:00:00 -1000 1.3903 stoplimit long -0.02 open NA NA 0
>> 2010-11-03 17:00:00 1000 1.4103 market long NA closed 2010-11-03 21:00:00
>> NA
>> 0
>> 2010-11-03 21:00:00 -1000 1.3923 stoplimit long -0.02 open NA NA 0
>> 2010-11-03 21:00:00 1000 1.4123 market long NA closed 2010-11-04 01:00:00
>> NA
>> 0
>> 2010-11-04 01:00:00 -1000 1.3923 stoplimit long -0.02 open NA NA 0
>> 2010-11-04 01:00:00 1000 1.4123 market long NA closed 2010-11-04 05:00:00
>> NA
>> 0
>> 2010-11-04 05:00:00 -1000 1.3935 stoplimit long -0.02 open NA NA 0
>> 2010-11-04 05:00:00 1000 1.4135 market long NA closed 2010-11-04 09:00:00
>> NA
>> 0
>> 2010-11-04 09:00:00 -1000 1.4025 stoplimit long -0.02 open NA NA 0
>> 2010-11-04 09:00:00 1000 1.4225 market long NA closed 2010-11-04 13:00:00
>> NA
>> 0
>> *2010-11-04 13:00:00 -1000 1.4052 stoplimit long -0.02 closed 2010-11-05
>> 13:00:00 NA 0*
>> 2010-11-04 13:00:00 1000 1.4252 market long NA closed 2010-11-04 17:00:00
>> NA
>> 0
>> 2010-11-04 17:00:00 -1000 1.4008 stoplimit long -0.02 open NA NA 0
>> 2010-11-04 17:00:00 1000 1.4208 market long NA closed 2010-11-04 21:00:00
>> NA
>> 0
>> 2010-11-04 21:00:00 -1000 1.4012 stoplimit long -0.02 open NA NA 0
>> 2010-11-04 21:00:00 1000 1.4212 market long NA closed 2010-11-05 01:00:00
>> NA
>> 0
>> 2010-11-05 01:00:00 -1000 1.4009 stoplimit long -0.02 open NA NA 0
>> 2010-11-05 01:00:00 1000 1.4209 market long NA closed 2010-11-05 05:00:00
>> NA
>> 0
>> 2010-11-05 05:00:00 -1000 1.3985 stoplimit long -0.02 open NA NA 0
>> 2010-11-05 05:00:00 1000 1.4185 market long NA closed 2010-11-05 09:00:00
>> NA
>> 0
>> 2010-11-05 09:00:00 -1000 1.3901 stoplimit long -0.02 open NA NA 0
>> 2010-11-05 09:00:00 1000 1.4101 market long NA closed 2010-11-05 13:00:00
>> NA
>> 0
>>
>> --
>> View this message in context:
>> http://r.789695.n4.nabble.com/Quantstrat-stoplimit-orders-not-triggered-tp3673706p3687209.html
>> Sent from the Rmetrics mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110722/ceeab78d/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Stoploss_Test-01.R
Type: text/x-r
Size: 2689 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110722/ceeab78d/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: EURUSD240.csv
Type: text/csv
Size: 6931 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110722/ceeab78d/attachment-0001.bin>

From jacekernie at gmail.com  Sat Jul 23 11:34:47 2011
From: jacekernie at gmail.com (Jacek)
Date: Sat, 23 Jul 2011 02:34:47 -0700 (PDT)
Subject: [R-SIG-Finance] rgarch package - VAR in DCC model example
In-Reply-To: <4E299D95.7030401@4dscape.com>
References: <CAMEs3iBXSZC6OBWOFzNxeon-cM8HqV=MMvfGq9DV_dvzbbgDZA@mail.gmail.com>
	<4E283607.9040001@4dscape.com>
	<1311340390403-3686647.post@n4.nabble.com>
	<4E299D95.7030401@4dscape.com>
Message-ID: <1311413687441-3688600.post@n4.nabble.com>

Thank you very much once again Alexios!

Kind regards,
Jacek

--
View this message in context: http://r.789695.n4.nabble.com/rgarch-package-VAR-in-DCC-model-example-tp3683371p3688600.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From h.stegmann at onlinehome.de  Sat Jul 23 15:41:30 2011
From: h.stegmann at onlinehome.de (microlino)
Date: Sat, 23 Jul 2011 06:41:30 -0700 (PDT)
Subject: [R-SIG-Finance] Quantstrat stoplimit orders not triggered
In-Reply-To: <CA+xi=qasZDgSdC=TAsJdY_bb1mjZwvRiRMGgJjkwoDqgdbCx7w@mail.gmail.com>
References: <1310923169664-3673706.post@n4.nabble.com>
	<1311279177898-3684861.post@n4.nabble.com>
	<1311279630.2585.17.camel@brian-rcg>
	<1311280286841-3684941.post@n4.nabble.com>
	<CA+xi=qaWGHUBLjLakEM-YBPoWQvjW=OwZG5k1PVM+HRZNbdehQ@mail.gmail.com>
	<4E289072.4030909@onlinehome.de>
	<CA+xi=qZsSQiuPBdF12EogQVV-PYm=4WW+-L9b00LkTzULCq0GQ@mail.gmail.com>
	<1311353347957-3687209.post@n4.nabble.com>
	<CA+xi=qbYjr3KZpT8juWkB2K3=i-vTybsPSWEZo617RyVPseLZw@mail.gmail.com>
	<CA+xi=qasZDgSdC=TAsJdY_bb1mjZwvRiRMGgJjkwoDqgdbCx7w@mail.gmail.com>
Message-ID: <1311428490434-3688894.post@n4.nabble.com>

Everything working ok now. Thank you!

--
View this message in context: http://r.789695.n4.nabble.com/Quantstrat-stoplimit-orders-not-triggered-tp3673706p3688894.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From gsee000 at gmail.com  Sat Jul 23 16:14:36 2011
From: gsee000 at gmail.com (G See)
Date: Sat, 23 Jul 2011 09:14:36 -0500
Subject: [R-SIG-Finance] Quantstrat stoplimit orders not triggered
In-Reply-To: <1311428490434-3688894.post@n4.nabble.com>
References: <1310923169664-3673706.post@n4.nabble.com>
	<1311279177898-3684861.post@n4.nabble.com>
	<1311279630.2585.17.camel@brian-rcg>
	<1311280286841-3684941.post@n4.nabble.com>
	<CA+xi=qaWGHUBLjLakEM-YBPoWQvjW=OwZG5k1PVM+HRZNbdehQ@mail.gmail.com>
	<4E289072.4030909@onlinehome.de>
	<CA+xi=qZsSQiuPBdF12EogQVV-PYm=4WW+-L9b00LkTzULCq0GQ@mail.gmail.com>
	<1311353347957-3687209.post@n4.nabble.com>
	<CA+xi=qbYjr3KZpT8juWkB2K3=i-vTybsPSWEZo617RyVPseLZw@mail.gmail.com>
	<CA+xi=qasZDgSdC=TAsJdY_bb1mjZwvRiRMGgJjkwoDqgdbCx7w@mail.gmail.com>
	<1311428490434-3688894.post@n4.nabble.com>
Message-ID: <CA+xi=qYHJdRAuA=4u-o3vUQPMNZA2Vs3K_GuiPdN4HLJKeN=bQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110723/49e9fbf6/attachment.pl>

From samo.pahor at gmail.com  Sun Jul 24 03:17:15 2011
From: samo.pahor at gmail.com (Samo Pahor)
Date: Sun, 24 Jul 2011 03:17:15 +0200
Subject: [R-SIG-Finance] getQuote problem
Message-ID: <CAFNBy2mn0dgGG8aGLthFgZV_9cOUE1fjRu+L12L5b7Ejm+RGfg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110724/09184f59/attachment.pl>

From gsee000 at gmail.com  Sun Jul 24 05:12:17 2011
From: gsee000 at gmail.com (G See)
Date: Sat, 23 Jul 2011 22:12:17 -0500
Subject: [R-SIG-Finance] getQuote problem
In-Reply-To: <CAFNBy2mn0dgGG8aGLthFgZV_9cOUE1fjRu+L12L5b7Ejm+RGfg@mail.gmail.com>
References: <CAFNBy2mn0dgGG8aGLthFgZV_9cOUE1fjRu+L12L5b7Ejm+RGfg@mail.gmail.com>
Message-ID: <CA+xi=qbGJ1aEzq=9U5iHemOJZrx4g4-bLMmkWRR_iinSjv3FVA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110723/30d5dda1/attachment.pl>

From josh.m.ulrich at gmail.com  Sun Jul 24 06:32:04 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sat, 23 Jul 2011 23:32:04 -0500
Subject: [R-SIG-Finance] getQuote problem
In-Reply-To: <CAFNBy2mn0dgGG8aGLthFgZV_9cOUE1fjRu+L12L5b7Ejm+RGfg@mail.gmail.com>
References: <CAFNBy2mn0dgGG8aGLthFgZV_9cOUE1fjRu+L12L5b7Ejm+RGfg@mail.gmail.com>
Message-ID: <CAPPM_gTNOrDu1FaS9ssgJ5psX4wRENbNdGQj5bb7R-w4xGWwqw@mail.gmail.com>

On Sat, Jul 23, 2011 at 8:17 PM, Samo Pahor <samo.pahor at gmail.com> wrote:
> Hello,
>
> I have some issues with getQuote from the great quantmod package. I do not
> know whether I am doing something wrong or there is an issue in getQuote.
>
This is an issue with Yahoo.  I attempted to download the CSV via the
URL below multiple times.  Sometimes most of the dates were
"1970-01-01".

http://finance.yahoo.com/d/quotes.csv?s=ADK+ADK-WT+AIM+ALN+AMS+
ANO+ANV+APP+ARR-WT+ATC+ATSC+AWX+AXK+AXU+AZC+BAA+
BAA-WT+BFY+BHV+BKJ+BKR+BLE+BLJ+BPS+BQI+BQY+BRD+BTN+
BVX+BZC+BZM+CCA+CCF+CDY+CEF+CET+CEV+CFD+CFP+CMFO+
CMT+CNGL+CNR+CQP+CRMD+CRMD-WT+CUO+CVM+CXZ+DHY+DIT+
DNN+DPW+DXR+EAD+EAG+EGI+EGT+EIA+EIM+EIO+EIP+EIV+ELC+
EMAN+EMI+EMJ+EML+ENX+ERC+ERH+ESA+ESA-U+ESA-WT+ETF+
EVJ+EVM+EVO+EVP+EVV+EVY+FAX+FEN+FNV-U+FOH+FPP+FTF+
GBR+GGN+GGN-PA+GHM+GLA+GLO+GLQ+GLU+GLV+GMO+GORO+
GPL+GPR+GRC+GRH+GRZ+GSS+GST+GST-PA+GSX+GTU+GV+HBP+
HLM-P+HNB+HNW+HUSA+HWG+IAF+IBO+IDI+IDI-U+IDI-WT+IHT+IMO+
INS+INUV+INV+IOT+IPT+JFP+JRS+KBX+KGN+KUN+LCI+LON+LPH+LTS+
MAB+MCF+MCZ+MDW+MEA+MGH+MGT+MHE+MHH+MHR-PC+MHR-PD+
MIW+MMV+MMZ-PK+MOC+MSL+MSN+MVG+MXC+NBJ+NBJ-PA+NCB+
NCU+NEA+NEN+NEOP+NEP+NFC+NFM+NFZ+NFZ-PC+NG+NGB+NGK+
NGO+NGX+NHC+NHC-PA+NHS+NII+NJV+NKG+NKL+NKO+NKR+NKX+
NLP+NMB+NMB-PC+NMZ+NNB+NNO+NOM+NPG+NPN+NRB+NRK+NSU+
NUJ+NVG+NVJ+NVJ-PA+NVX+NVY&f=d1t1l1c1p2ohgv

> I am trying to download quotes for 600 symbols(S&P 500 plus some ETFs and
> indices). When I do that I get quote table with first 200 rows with Trade
> Time equal to 1970-01-01 ... and from 201 row on it looks OK. Please see
> code and results below.
>
> Thank you for guiding me to the direction of the solution.
>
> Regards,
> Samo.
>

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com


From zach.mayer at gmail.com  Mon Jul 25 22:52:43 2011
From: zach.mayer at gmail.com (Zachary Mayer)
Date: Mon, 25 Jul 2011 16:52:43 -0400
Subject: [R-SIG-Finance] getQuote problem
In-Reply-To: <CAPPM_gTNOrDu1FaS9ssgJ5psX4wRENbNdGQj5bb7R-w4xGWwqw@mail.gmail.com>
References: <CAFNBy2mn0dgGG8aGLthFgZV_9cOUE1fjRu+L12L5b7Ejm+RGfg@mail.gmail.com>
	<CAPPM_gTNOrDu1FaS9ssgJ5psX4wRENbNdGQj5bb7R-w4xGWwqw@mail.gmail.com>
Message-ID: <CAEr64e-hzC+m3YxnLb0U4V0__XNZVU-q6oh1WzwkhgEj=oNDag@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110725/91a8a607/attachment.pl>

From subbu at sssu.edu.in  Wed Jul 27 06:48:04 2011
From: subbu at sssu.edu.in (Subramanian S)
Date: Wed, 27 Jul 2011 10:18:04 +0530
Subject: [R-SIG-Finance] How to Get option prices of first and expiry
	date alone
In-Reply-To: <CALS_8bFaHVz9MfHVUT5jfEJb+QoSyZg5GJYWQ99Mxhu+z8Cwiw@mail.gmail.com>
References: <CALS_8bFaHVz9MfHVUT5jfEJb+QoSyZg5GJYWQ99Mxhu+z8Cwiw@mail.gmail.com>
Message-ID: <CALS_8bE3Cc2Dg+SAMgUmtK+B-aBhQD-9C2kNG_kpJJ-fSbiukg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110727/7d142563/attachment.pl>

From brian at braverock.com  Wed Jul 27 10:59:35 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 27 Jul 2011 03:59:35 -0500
Subject: [R-SIG-Finance] How to Get option prices of first and expiry
 date alone
In-Reply-To: <CALS_8bE3Cc2Dg+SAMgUmtK+B-aBhQD-9C2kNG_kpJJ-fSbiukg@mail.gmail.com>
References: <CALS_8bFaHVz9MfHVUT5jfEJb+QoSyZg5GJYWQ99Mxhu+z8Cwiw@mail.gmail.com>
	<CALS_8bE3Cc2Dg+SAMgUmtK+B-aBhQD-9C2kNG_kpJJ-fSbiukg@mail.gmail.com>
Message-ID: <1311757175.21063.158.camel@brian-desktop>

On Wed, 2011-07-27 at 10:18 +0530, Subramanian S wrote:
> Pardon me if the question has been already posed.

Your subject "Get option prices of first and expiry date alone" doesn't
seem to match the rest of your email.

To deal with your subject, I would simply extract the dates of the
'first' and 'expiry' from your instrument metadata, then look up these
dates in your data.  On the first day a derivatives contract is
available to trade, you'll often find no trades or extremely wide
markets, or both, so I question the *premise* of your subject.

> what is the correct thing to do while dealing with multiple time series that
> are not synchronized?:
> A) remove rows from all series for dates in which one of the series does not
> have a value OR
> B) do some kind of an interpolation of values for these dates.

or
C) deal with the fact that real data aren't synchronized, are messy, and
don't match the textbook examples the vast majority of the time.

I plot and backtest data with missing values all the time, because that
is how real financial data works.  If you're trying to create a trading
system, you need to account for the structure of real data.

> My understanding: if i were doing a theoretical study, or just wanting to
> plot the multiple time series, the latter would be correct but if i
> am doing a portfolio/ trading system back testing, the latter wouldn't be
> technically correct. Would like to have more clarity.

Now, if we wanted to connect the subject of your email to the rest of
your email.... 

I could propose an example: 

Strategy Idea:
I have multiple option series, and I'm interested in figuring out 
if I should buy that option on the first day it is available for 
trade, and at what price.
Problem:
data is messy, and is often missing values on that first day
Opportunity:
use the prices from other more liquid options, plus decay,
to establish a theoretical price for every other option
Task:
build a trading system that uses the *implied* price to 
buy options on the first day, see if we make money at expiry.

Or something like that...

Regards,

   - Brian 

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From subbu at sssu.edu.in  Wed Jul 27 11:23:53 2011
From: subbu at sssu.edu.in (Subramanian S)
Date: Wed, 27 Jul 2011 14:53:53 +0530
Subject: [R-SIG-Finance] Dealing with multiple series which are not exactly
	same w.r.t date/time
Message-ID: <CALS_8bEYrYHt4B119Ekm70Kr+NvZh_AJxQhrjm6jXefa5PrkrQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110727/b25adfda/attachment.pl>

From subbu at sssu.edu.in  Wed Jul 27 11:38:56 2011
From: subbu at sssu.edu.in (Subramanian S)
Date: Wed, 27 Jul 2011 15:08:56 +0530
Subject: [R-SIG-Finance] Dealing with multiple series which are not
	exactly same w.r.t date/time
In-Reply-To: <CALS_8bEYrYHt4B119Ekm70Kr+NvZh_AJxQhrjm6jXefa5PrkrQ@mail.gmail.com>
References: <CALS_8bEYrYHt4B119Ekm70Kr+NvZh_AJxQhrjm6jXefa5PrkrQ@mail.gmail.com>
Message-ID: <CALS_8bEJQEZY0=3nJ4buDOxV__bzrU+KktD2XixHXFMN3ExQJw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110727/e1549a53/attachment.pl>

From brian at braverock.com  Wed Jul 27 12:02:05 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 27 Jul 2011 05:02:05 -0500
Subject: [R-SIG-Finance] Dealing with multiple series which are not
 exactly same w.r.t date/time
In-Reply-To: <1311757175.21063.158.camel@brian-desktop>
References: <CALS_8bFaHVz9MfHVUT5jfEJb+QoSyZg5GJYWQ99Mxhu+z8Cwiw@mail.gmail.com>
	<CALS_8bE3Cc2Dg+SAMgUmtK+B-aBhQD-9C2kNG_kpJJ-fSbiukg@mail.gmail.com>
	<1311757175.21063.158.camel@brian-desktop>
Message-ID: <1311760925.21063.172.camel@brian-desktop>

You've reposted with a new subject:

"Dealing with multiple series which are not exactly same w.r.t
date/time"


On Wed, 2011-07-27 at 03:59 -0500, Brian G. Peterson wrote:
> On Wed, 2011-07-27 at 10:18 +0530, Subramanian S wrote:
> > Pardon me if the question has been already posed.
> 
> Your subject "Get option prices of first and expiry date alone" doesn't
> seem to match the rest of your email.
> 
> To deal with your subject, I would simply extract the dates of the
> 'first' and 'expiry' from your instrument metadata, then look up these
> dates in your data.  On the first day a derivatives contract is
> available to trade, you'll often find no trades or extremely wide
> markets, or both, so I question the *premise* of your subject.
> 
> > what is the correct thing to do while dealing with multiple time series that
> > are not synchronized?:
> > A) remove rows from all series for dates in which one of the series does not
> > have a value OR
> > B) do some kind of an interpolation of values for these dates.
> 
> or
> C) deal with the fact that real data aren't synchronized, are messy, and
> don't match the textbook examples the vast majority of the time.
> 
> I plot and backtest data with missing values all the time, because that
> is how real financial data works.  If you're trying to create a trading
> system, you need to account for the structure of real data.
> 
> > My understanding: if i were doing a theoretical study, or just wanting to
> > plot the multiple time series, the latter would be correct but if i
> > am doing a portfolio/ trading system back testing, the latter wouldn't be
> > technically correct. Would like to have more clarity.
> 
> Now, if we wanted to connect the subject of your email to the rest of
> your email.... 
> 
> I could propose an example: 
> 
> Strategy Idea:
> I have multiple option series, and I'm interested in figuring out 
> if I should buy that option on the first day it is available for 
> trade, and at what price.
> Problem:
> data is messy, and is often missing values on that first day
> Opportunity:
> use the prices from other more liquid options, plus decay,
> to establish a theoretical price for every other option
> Task:
> build a trading system that uses the *implied* price to 
> buy options on the first day, see if we make money at expiry.
> 
> Or something like that...

I'm not sure that your new subject changes my answer much, though it
does make my hypothetical strategy unnecessary.

Missing data is still a fact of life in real data series.  merge() and
cbind() are your friend in xts, they'll align all the data to a common
merged index.

Your hypothesized trading system will be placing orders based on some
price you come up with, probably still implied from other market prices,
as above.  It isn't necessary to have a traded price, as long as there
is a market.  Then, if your trading system's price crosses the bid/offer
that other market participants had in the market, you could assert that
you had traded for the purposes of your backtest.

This does raise other issues though.  I know that many people seem to
prefer to backtest systems on daily data.  This is more or less fine for
multi-day holding periods on highly liquid instruments, where if your
limit price was between the high and low, you can presume that you were
filled.  With illiquid instruments, especially those that have no trades
in the time frame you're looking at, I think you really need to be
dealing with bid/offer data, which likely means intraday data, rather
than daily trade prices only.

Another conservative assumption you could make is that if there were no
trades in the market, you couldn't have gotten any either. A related
assumption is that your trading system can only make up x% of the daily
volume.  These assumptions or constraints protect you from believing
that you are going to successfully trade against the big firms that are
very good at 'getting out of the way' when a less sophisticated market
player starts bumbling around in the markets.  Almost the best case for
you when this happens is that you don't trade, often you end up with
'bad fills' and slippage.

Regards,

   - Brian
-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From samo.pahor at gmail.com  Thu Jul 28 11:41:54 2011
From: samo.pahor at gmail.com (Samo Pahor)
Date: Thu, 28 Jul 2011 11:41:54 +0200
Subject: [R-SIG-Finance] Performace problems using IBrokers and reqMktData
Message-ID: <CAFNBy2mys2xWSu_O5bq3qWpShdNwBCg_YvWtcdHvf8McVSY=ZA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110728/0d537af2/attachment.pl>

From Samuel.Meichtry at bkw-fmb.ch  Thu Jul 28 17:07:26 2011
From: Samuel.Meichtry at bkw-fmb.ch (Samuel.Meichtry at bkw-fmb.ch)
Date: Thu, 28 Jul 2011 17:07:26 +0200
Subject: [R-SIG-Finance] Weird hourly timestamping problem where hours get
	lost
Message-ID: <201107281507.p6SF7WXN028095@hypatia.math.ethz.ch>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110728/7020352f/attachment.pl>

From jeffrey.ryan at lemnica.com  Thu Jul 28 17:41:33 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Thu, 28 Jul 2011 10:41:33 -0500
Subject: [R-SIG-Finance] Weird hourly timestamping problem where hours
	get lost
In-Reply-To: <201107281507.p6SF7WXN028095@hypatia.math.ethz.ch>
References: <201107281507.p6SF7WXN028095@hypatia.math.ethz.ch>
Message-ID: <CABDUZc9xu80UFSy+9PRP9B9=tVPxRW1Kb7HgThhxf6fOQXt=+Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110728/c1751b6b/attachment.pl>

From arun.kumar.saha at gmail.com  Sun Jul 31 15:19:23 2011
From: arun.kumar.saha at gmail.com (Arun.stat)
Date: Sun, 31 Jul 2011 06:19:23 -0700 (PDT)
Subject: [R-SIG-Finance] rgarch package problems
In-Reply-To: <1311276122978-3684743.post@n4.nabble.com>
References: <1311270877825-3684477.post@n4.nabble.com>
	<39511.91.4.42.95.1311271712.squirrel@censix.com>
	<1311276122978-3684743.post@n4.nabble.com>
Message-ID: <1312118363694-3707733.post@n4.nabble.com>

Hi Zoe, from the page 'https://r-forge.r-project.org/R/?group_id=339' it is
evident that windows binary is not available for this package. However you
can download the source file in the form of tar-gz and extract the functions
and the help pages from that and then can use them.

Thanks and regards,
_____________________________________________________

Arun Kumar Saha, FRM
QUANTITATIVE RISK AND HEDGE CONSULTING SPECIALIST
Visit me at: http://in.linkedin.com/in/ArunFRM
_____________________________________________________


--
View this message in context: http://r.789695.n4.nabble.com/rgarch-package-problems-tp3684477p3707733.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From daniel.krizian at gmail.com  Sun Jul 31 15:32:49 2011
From: daniel.krizian at gmail.com (Daniel Krizian)
Date: Sun, 31 Jul 2011 15:32:49 +0200
Subject: [R-SIG-Finance] label in add.indicator not accepted (quantstrat)
Message-ID: <CALqbvp4UYv_aar3ShuF6kLK9ZTRT-vx-4UjbnWOPXqijzJ+f8w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110731/a151c992/attachment.pl>

From alexios at 4dscape.com  Sun Jul 31 16:01:14 2011
From: alexios at 4dscape.com (alexios)
Date: Sun, 31 Jul 2011 15:01:14 +0100
Subject: [R-SIG-Finance] rgarch package problems
In-Reply-To: <1312118363694-3707733.post@n4.nabble.com>
References: <1311270877825-3684477.post@n4.nabble.com>
	<39511.91.4.42.95.1311271712.squirrel@censix.com>
	<1311276122978-3684743.post@n4.nabble.com>
	<1312118363694-3707733.post@n4.nabble.com>
Message-ID: <4E35602A.5060204@4dscape.com>

There are some problems with a dependency on r-forge which is currently 
preventing the build. Downloading the src and extracting the functions 
is not the way to go.
I have uploaded pre-build windows binaries and the source to the 
package's website :

http://rgarch.r-forge.r-project.org/download.html

Regards,

Alexios

PS Give it a couple of hours until r-forge  refeshes the website.

On 31/07/2011 14:19, Arun.stat wrote:
> Hi Zoe, from the page 'https://r-forge.r-project.org/R/?group_id=339' it is
> evident that windows binary is not available for this package. However you
> can download the source file in the form of tar-gz and extract the functions
> and the help pages from that and then can use them.
>
> Thanks and regards,
> _____________________________________________________
>
> Arun Kumar Saha, FRM
> QUANTITATIVE RISK AND HEDGE CONSULTING SPECIALIST
> Visit me at: http://in.linkedin.com/in/ArunFRM
> _____________________________________________________
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/rgarch-package-problems-tp3684477p3707733.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>


From brian at braverock.com  Mon Aug  1 16:14:14 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 01 Aug 2011 09:14:14 -0500
Subject: [R-SIG-Finance] label in add.indicator not accepted (quantstrat)
In-Reply-To: <CALqbvp4UYv_aar3ShuF6kLK9ZTRT-vx-4UjbnWOPXqijzJ+f8w@mail.gmail.com>
References: <CALqbvp4UYv_aar3ShuF6kLK9ZTRT-vx-4UjbnWOPXqijzJ+f8w@mail.gmail.com>
Message-ID: <1312208054.18828.52.camel@brian-rcg>

On Sun, 2011-07-31 at 15:32 +0200, Daniel Krizian wrote:
> Hello,
> 
> assigning labels via add.indicator function (in quantstrat) does not work
> for TTR function "momentum" or "ROC" and generally other functions having
> output with non-null column names. Labelling works properly only for
> indicator functions that have empty column names, e.g. RSI, SMA used in
> demos.
> getSymbols('AAPL')
> head(RSI(Cl(AAPL)))
> head(SMA(Cl(AAPL)))
> head(momentum(Cl(AAPL)))
> head(ROC(Cl(AAPL)))
> 
> For example, I have line, in which assignment label="momentum" will be
> totally ignored later by applyIndicators:
> 
> mystrat <- add.indicator(strategy = mystrat, name = "momentum", arguments =
> list(x=quote(Cl(mktdata))), label = "mom" )
> 
> This piece of code in applyIndicators causes the behavior:
> if (is.null(names(tmp_val)) & ncol(tmp_val) == 1)
>    names(tmp_val) <- indicator$label
> 
> My suggestion is to replace it with more intuitive behavior:
> if (!is.null(indicator$label) & ncol(tmp_val) == 1)
>    names(tmp_val) <- indicator$label
> 
> Thank you.

Daniel,

I like the spirit of your suggestion, but I'm not sure about the exact
implementation.  In the current code, label is never NULL, because of
this line in add.indicator

    if(is.null(label)) label = paste(name,"ind",sep='.')

Your suggested patch would ignore any names set by an indicator
function, which seems to be counterproductive where indicator functions
add meaningful names.

Perhaps, instead, we need to test to see if the returned tmp_val column
name is duplicated in the mktdata, and overwrite with label in that
case.

-- 
Brian


From burkett at uri.edu  Mon Aug  1 18:48:41 2011
From: burkett at uri.edu (John P. Burkett)
Date: Mon, 01 Aug 2011 12:48:41 -0400
Subject: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
Message-ID: <4E36D8E9.1050303@uri.edu>

An attractive sounding algorithm for maximizing the expected utility of 
of a portfolio was proposed by William F. Sharpe in "An algorithm for 
portfolio improvement," Advances in Mathematical Programming and 
Financial Planning, 1987, pp. 155-170 and summarized by the same author 
in "Expected utility asset allocation," Financial Analysts Journal, vol. 
63, no. 5 (Sep.-Oct., 2007), pp. 18-30.

Has this algorithm been implemented in R?

If not, is there a substitute that is likely to work well for a 
user-specified concave utility function?  I've tried optim, DEoptim, and 
Rgenoud but encountered difficulty in getting them to converge for a 
long-only portfolio of around 30 assets.

Best regards,
John

-- 
John P. Burkett
Department of Economics
University of Rhode Island
Kingston, RI 02881-0808
USA


From mdelvaux at gmail.com  Mon Aug  1 19:50:31 2011
From: mdelvaux at gmail.com (Marc Delvaux)
Date: Mon, 1 Aug 2011 10:50:31 -0700
Subject: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
In-Reply-To: <4E36D8E9.1050303@uri.edu>
References: <4E36D8E9.1050303@uri.edu>
Message-ID: <CAE3sQ+t-qCXFiuxKru+t2zB_rPbmVKNx3WBCQtprB4d09qg6sA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110801/45307ab2/attachment.pl>

From enricoschumann at yahoo.de  Mon Aug  1 20:00:56 2011
From: enricoschumann at yahoo.de (Enrico Schumann)
Date: Mon, 1 Aug 2011 20:00:56 +0200
Subject: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
In-Reply-To: <4E36D8E9.1050303@uri.edu>
References: <4E36D8E9.1050303@uri.edu>
Message-ID: <BB1C9775C0154368922643D948270A09@EnricosPC>


Hi John,

what kind of "difficulty" did you encounter? If you would give more details
on what you tried, and how, then people should be better able to help you. 

I don't know the paper you mentioned, but I know a paper of W. Sharpe in
which he suggests to do repeated zero-sum changes to the portfolio, like
"increase one asset by x%, and decrease another one by x%". If that is what
you mean, this can be done with a local search. (But actually, other
functions like DEoptim should work just as well. The DEoptim package even
comes with a vignette that adresses portfolio optimisation.) 

An example for a local search procedure is given in one of the vignettes of
the NMOF package (which is available from
https://r-forge.r-project.org/R/?group_id=1128 ), even though I am not sure
how self-explanatory the vignette is.


Regards,
Enrico


  

> -----Urspr?ngliche Nachricht-----
> Von: r-sig-finance-bounces at r-project.org 
> [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag von 
> John P. Burkett
> Gesendet: Montag, 1. August 2011 18:49
> An: R-SIG-Finance at r-project.org
> Betreff: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
> 
> An attractive sounding algorithm for maximizing the expected 
> utility of of a portfolio was proposed by William F. Sharpe 
> in "An algorithm for portfolio improvement," Advances in 
> Mathematical Programming and Financial Planning, 1987, pp. 
> 155-170 and summarized by the same author in "Expected 
> utility asset allocation," Financial Analysts Journal, vol. 
> 63, no. 5 (Sep.-Oct., 2007), pp. 18-30.
> 
> Has this algorithm been implemented in R?
> 
> If not, is there a substitute that is likely to work well for 
> a user-specified concave utility function?  I've tried optim, 
> DEoptim, and Rgenoud but encountered difficulty in getting 
> them to converge for a long-only portfolio of around 30 assets.
> 
> Best regards,
> John
> 
> --
> John P. Burkett
> Department of Economics
> University of Rhode Island
> Kingston, RI 02881-0808
> USA
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R 
> questions should go.


From burkett at uri.edu  Mon Aug  1 23:07:39 2011
From: burkett at uri.edu (John P. Burkett)
Date: Mon, 01 Aug 2011 17:07:39 -0400
Subject: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
In-Reply-To: <BB1C9775C0154368922643D948270A09@EnricosPC>
References: <4E36D8E9.1050303@uri.edu>
	<BB1C9775C0154368922643D948270A09@EnricosPC>
Message-ID: <4E37159B.8080209@uri.edu>

Enrico Schumann wrote:
> what kind of "difficulty" did you encounter? If you would give more details
> on what you tried, and how, then people should be better able to help you. 
Thank you, Enrico, for your prompt and helpful response.  Focusing on 
Sharpe's algorithm, I originally omitted specifics about difficulties I 
have encountered with packages based on other algorithms.  However, in 
case it is of interest, I will now outline my project and difficulties. 
     I have about 120 monthly observations on gross real returns for 
about 30 assets. [Trying to mitigate estimation error, I've shrunk 
observed returns toward a common value as proposed by Philippe Jorion, 
"Bayes-Stein Estimation for Portfolio Analysis",
Journal of Financial and Quantitative Analysis, v. 21, n. 3 (Sept., 
1986), pp. 279-92.]   I initially specified the utility function as U = 
R/(0.5 + R) where R is R is the gross return on a portfolio and 
specified long-only constraints. The restriction that portfolio shares 
sum to 1 is handled by specifying n-1 variables (where n is the nubmer 
of assets) and making the share asset n be 1 minus the sum of other 
shares. If I apply DEoptim to a sufficiently small subset of the assets, 
it converges and  selects a plausible portfolio.  Yet if I ask DEoptim 
to analyze as many as 30 assets, it fails to converge in any number of 
iterations that I've tried.  Given the same problem, Rgenoud converged 
after 44 hours (more than 2 million generation, if memory serves).  I 
subsequently tried changing the utility function to ln(R) and asking 
Rgenoud to maximize that.  Thus far it has run for over 1.5 million 
generations without converging.  The portfolio shares have barely 
changed over many recent generations.  Perhaps I could just relax the 
default convergence criteria and declare the problem solved for 
practical purposes.  However, that might result in mistaking a local for 
a global maximum.  These experiences may just indicate that a 30 asset 
portfolio is hard to optimize using general purpose algorithms. Kris 
Boudt et al. note that "portfolio problems encountered in practice may 
require days to optimize on a personal computer" ("Large-scale portfolio 
optimization with DEoptim," p. 1). These experiences motivated my 
interest in trying an algorithm, such as that of Sharpe, designed 
specifically for portfolio optimization.

> I don't know the paper you mentioned, but I know a paper of W. Sharpe in
> which he suggests to do repeated zero-sum changes to the portfolio, like
> "increase one asset by x%, and decrease another one by x%". If that is what
> you mean, this can be done with a local search. 
The algorithm you describe sounds very much like that covered in the 
articles I cited in my previous note.  It's probably the same algorithm.

(But actually, other
> functions like DEoptim should work just as well. The DEoptim package even
> comes with a vignette that adresses portfolio optimisation.) 
Perhaps I should just be more patient with DEoptim or buy a faster computer!

> An example for a local search procedure is given in one of the vignettes of
> the NMOF package (which is available from
> https://r-forge.r-project.org/R/?group_id=1128 ), even though I am not sure
> how self-explanatory the vignette is.
Thank you for the NMOF reference.  I've printed "Examples and Extensions 
for the NMOF package" and tried the command
install.packages("NMOF", repos = "http://R-Forge.R-project.org")
That command elicited the following messages:
Warning in install.packages("NMOF", repos = 
"http://R-Forge.R-project.org") :
   argument 'lib' is missing: using 
'/home/john/R/i486-pc-linux-gnu-library/2.8'
trying URL 'http://R-Forge.R-project.org/src/contrib/NMOF_0.14-2.tar.gz'
Content type 'application/x-gzip' length 1352123 bytes (1.3 Mb)
opened URL
==================================================
downloaded 1.3 Mb

* Installing *source* package 'NMOF' ...
** R
** data
**  moving datasets to lazyload DB
** inst
** preparing package for lazy loading
** help
  >>> Building/Updating help pages for package 'NMOF'
      Formats: text html latex example
   DEopt                             text    html    latex   example
   EuropeanCall                      text    html    latex   example
   GAopt                             text    html    latex   example
   LSopt                             text    html    latex   example
   MA                                text    html    latex   example
   NMOF-package                      text    html    latex   example
   NS                                text    html    latex   example
   NSf                               text    html    latex   example
   PSopt                             text    html    latex   example
   TAopt                             text    html    latex   example
   bundData                          text    html    latex   example
   callHestoncf                      text    html    latex   example
   fundData                          text    html    latex   example
   gridSearch                        text    html    latex   example
   qTable                            text    html    latex   example

ERROR in file 'repairMatrix.Rd': Environment (text enclosed in {}) found 
in \title{...}.
The title must be plain text!

ERROR: building help failed for package 'NMOF'
** Removing '/home/john/R/i486-pc-linux-gnu-library/2.8/NMOF'

The downloaded packages are in
	/tmp/RtmpNAuDvf/downloaded_packages
Warning message:
In install.packages("NMOF", repos = "http://R-Forge.R-project.org") :
   installation of package 'NMOF' had non-zero exit status

***************************************

Any suggestions for how to successfully install NMOF would be greatly 
appreciated.

Best regards,
John



> 
> 
> Regards,
> Enrico
> 
> 
>   
> 
>> -----Urspr?ngliche Nachricht-----
>> Von: r-sig-finance-bounces at r-project.org 
>> [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag von 
>> John P. Burkett
>> Gesendet: Montag, 1. August 2011 18:49
>> An: R-SIG-Finance at r-project.org
>> Betreff: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
>>
>> An attractive sounding algorithm for maximizing the expected 
>> utility of of a portfolio was proposed by William F. Sharpe 
>> in "An algorithm for portfolio improvement," Advances in 
>> Mathematical Programming and Financial Planning, 1987, pp. 
>> 155-170 and summarized by the same author in "Expected 
>> utility asset allocation," Financial Analysts Journal, vol. 
>> 63, no. 5 (Sep.-Oct., 2007), pp. 18-30.
>>
>> Has this algorithm been implemented in R?
>>
>> If not, is there a substitute that is likely to work well for 
>> a user-specified concave utility function?  I've tried optim, 
>> DEoptim, and Rgenoud but encountered difficulty in getting 
>> them to converge for a long-only portfolio of around 30 assets.
>>
>> Best regards,
>> John
>>
>> --
>> John P. Burkett
>> Department of Economics
>> University of Rhode Island
>> Kingston, RI 02881-0808
>> USA
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list 
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R 
>> questions should go.
> 
> 


-- 
John P. Burkett
Department of Economics
University of Rhode Island
Kingston, RI 02881-0808
USA

phone (401) 874-9195


From 1987.zhangxi at gmail.com  Mon Aug  1 23:23:36 2011
From: 1987.zhangxi at gmail.com (zoe_zhang)
Date: Mon, 1 Aug 2011 14:23:36 -0700 (PDT)
Subject: [R-SIG-Finance] rgarch package problems
In-Reply-To: <1312118363694-3707733.post@n4.nabble.com>
References: <1311270877825-3684477.post@n4.nabble.com>
	<39511.91.4.42.95.1311271712.squirrel@censix.com>
	<1311276122978-3684743.post@n4.nabble.com>
	<1312118363694-3707733.post@n4.nabble.com>
Message-ID: <1312233816348-3710865.post@n4.nabble.com>

Thank you Arun! I finally got it! 

cheers,
Zoe

--
View this message in context: http://r.789695.n4.nabble.com/rgarch-package-problems-tp3684477p3710865.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Mon Aug  1 23:34:14 2011
From: alexios at 4dscape.com (alexios)
Date: Mon, 01 Aug 2011 22:34:14 +0100
Subject: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
In-Reply-To: <4E37159B.8080209@uri.edu>
References: <4E36D8E9.1050303@uri.edu>
	<BB1C9775C0154368922643D948270A09@EnricosPC>
	<4E37159B.8080209@uri.edu>
Message-ID: <4E371BD6.7000506@4dscape.com>

I've found the cmaes (Covariance Matrix Adapting Evolutionary Strategy) 
solver on CRAN to be quite robust to some nonconvex portfolio
problems which required a global optimizer. Like other such global 
solvers which do not accept explicit constraint functions, you would 
need to create a sort of penalty barrier function i.e

-obj(x) + 100*(1-sum(x))^2

For state of the art global solvers you'll probably need to look outside 
R to a commercial implementation or try submitting your problem to the 
NEOS server (http://www.neos-server.org/neos/solvers/index.html...see in 
particular the Branch and Bound type solver BARON).

Regards,

Alexios

On 01/08/2011 22:07, John P. Burkett wrote:
> Enrico Schumann wrote:
>> what kind of "difficulty" did you encounter? If you would give more
>> details
>> on what you tried, and how, then people should be better able to help
>> you.
> Thank you, Enrico, for your prompt and helpful response. Focusing on
> Sharpe's algorithm, I originally omitted specifics about difficulties I
> have encountered with packages based on other algorithms. However, in
> case it is of interest, I will now outline my project and difficulties.
> I have about 120 monthly observations on gross real returns for about 30
> assets. [Trying to mitigate estimation error, I've shrunk observed
> returns toward a common value as proposed by Philippe Jorion,
> "Bayes-Stein Estimation for Portfolio Analysis",
> Journal of Financial and Quantitative Analysis, v. 21, n. 3 (Sept.,
> 1986), pp. 279-92.] I initially specified the utility function as U =
> R/(0.5 + R) where R is R is the gross return on a portfolio and
> specified long-only constraints. The restriction that portfolio shares
> sum to 1 is handled by specifying n-1 variables (where n is the nubmer
> of assets) and making the share asset n be 1 minus the sum of other
> shares. If I apply DEoptim to a sufficiently small subset of the assets,
> it converges and selects a plausible portfolio. Yet if I ask DEoptim to
> analyze as many as 30 assets, it fails to converge in any number of
> iterations that I've tried. Given the same problem, Rgenoud converged
> after 44 hours (more than 2 million generation, if memory serves). I
> subsequently tried changing the utility function to ln(R) and asking
> Rgenoud to maximize that. Thus far it has run for over 1.5 million
> generations without converging. The portfolio shares have barely changed
> over many recent generations. Perhaps I could just relax the default
> convergence criteria and declare the problem solved for practical
> purposes. However, that might result in mistaking a local for a global
> maximum. These experiences may just indicate that a 30 asset portfolio
> is hard to optimize using general purpose algorithms. Kris Boudt et al.
> note that "portfolio problems encountered in practice may require days
> to optimize on a personal computer" ("Large-scale portfolio optimization
> with DEoptim," p. 1). These experiences motivated my interest in trying
> an algorithm, such as that of Sharpe, designed specifically for
> portfolio optimization.
>
>> I don't know the paper you mentioned, but I know a paper of W. Sharpe in
>> which he suggests to do repeated zero-sum changes to the portfolio, like
>> "increase one asset by x%, and decrease another one by x%". If that is
>> what
>> you mean, this can be done with a local search.
> The algorithm you describe sounds very much like that covered in the
> articles I cited in my previous note. It's probably the same algorithm.
>
> (But actually, other
>> functions like DEoptim should work just as well. The DEoptim package even
>> comes with a vignette that adresses portfolio optimisation.)
> Perhaps I should just be more patient with DEoptim or buy a faster
> computer!
>
>> An example for a local search procedure is given in one of the
>> vignettes of
>> the NMOF package (which is available from
>> https://r-forge.r-project.org/R/?group_id=1128 ), even though I am not
>> sure
>> how self-explanatory the vignette is.
> Thank you for the NMOF reference. I've printed "Examples and Extensions
> for the NMOF package" and tried the command
> install.packages("NMOF", repos = "http://R-Forge.R-project.org")
> That command elicited the following messages:
> Warning in install.packages("NMOF", repos =
> "http://R-Forge.R-project.org") :
> argument 'lib' is missing: using
> '/home/john/R/i486-pc-linux-gnu-library/2.8'
> trying URL 'http://R-Forge.R-project.org/src/contrib/NMOF_0.14-2.tar.gz'
> Content type 'application/x-gzip' length 1352123 bytes (1.3 Mb)
> opened URL
> ==================================================
> downloaded 1.3 Mb
>
> * Installing *source* package 'NMOF' ...
> ** R
> ** data
> ** moving datasets to lazyload DB
> ** inst
> ** preparing package for lazy loading
> ** help
>  >>> Building/Updating help pages for package 'NMOF'
> Formats: text html latex example
> DEopt text html latex example
> EuropeanCall text html latex example
> GAopt text html latex example
> LSopt text html latex example
> MA text html latex example
> NMOF-package text html latex example
> NS text html latex example
> NSf text html latex example
> PSopt text html latex example
> TAopt text html latex example
> bundData text html latex example
> callHestoncf text html latex example
> fundData text html latex example
> gridSearch text html latex example
> qTable text html latex example
>
> ERROR in file 'repairMatrix.Rd': Environment (text enclosed in {}) found
> in \title{...}.
> The title must be plain text!
>
> ERROR: building help failed for package 'NMOF'
> ** Removing '/home/john/R/i486-pc-linux-gnu-library/2.8/NMOF'
>
> The downloaded packages are in
> /tmp/RtmpNAuDvf/downloaded_packages
> Warning message:
> In install.packages("NMOF", repos = "http://R-Forge.R-project.org") :
> installation of package 'NMOF' had non-zero exit status
>
> ***************************************
>
> Any suggestions for how to successfully install NMOF would be greatly
> appreciated.
>
> Best regards,
> John
>
>
>
>>
>>
>> Regards,
>> Enrico
>>
>>
>>
>>> -----Urspr?ngliche Nachricht-----
>>> Von: r-sig-finance-bounces at r-project.org
>>> [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag von John P.
>>> Burkett
>>> Gesendet: Montag, 1. August 2011 18:49
>>> An: R-SIG-Finance at r-project.org
>>> Betreff: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
>>>
>>> An attractive sounding algorithm for maximizing the expected utility
>>> of of a portfolio was proposed by William F. Sharpe in "An algorithm
>>> for portfolio improvement," Advances in Mathematical Programming and
>>> Financial Planning, 1987, pp. 155-170 and summarized by the same
>>> author in "Expected utility asset allocation," Financial Analysts
>>> Journal, vol. 63, no. 5 (Sep.-Oct., 2007), pp. 18-30.
>>>
>>> Has this algorithm been implemented in R?
>>>
>>> If not, is there a substitute that is likely to work well for a
>>> user-specified concave utility function? I've tried optim, DEoptim,
>>> and Rgenoud but encountered difficulty in getting them to converge
>>> for a long-only portfolio of around 30 assets.
>>>
>>> Best regards,
>>> John
>>>
>>> --
>>> John P. Burkett
>>> Department of Economics
>>> University of Rhode Island
>>> Kingston, RI 02881-0808
>>> USA
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R
>>> questions should go.
>>
>>
>
>


From brian at braverock.com  Mon Aug  1 23:36:29 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 01 Aug 2011 16:36:29 -0500
Subject: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
In-Reply-To: <4E37159B.8080209@uri.edu>
References: <4E36D8E9.1050303@uri.edu>
	<BB1C9775C0154368922643D948270A09@EnricosPC> <4E37159B.8080209@uri.edu>
Message-ID: <1312234589.18828.87.camel@brian-rcg>

On Mon, 2011-08-01 at 17:07 -0400, John P. Burkett wrote:
> Enrico Schumann wrote:
> > what kind of "difficulty" did you encounter? If you would give more details
> > on what you tried, and how, then people should be better able to help you. 
> Thank you, Enrico, for your prompt and helpful response.  Focusing on 
> Sharpe's algorithm, I originally omitted specifics about difficulties I 
> have encountered with packages based on other algorithms.  However, in 
> case it is of interest, I will now outline my project and difficulties. 
>      I have about 120 monthly observations on gross real returns for 
> about 30 assets. [Trying to mitigate estimation error, I've shrunk 
> observed returns toward a common value as proposed by Philippe Jorion, 
> "Bayes-Stein Estimation for Portfolio Analysis",
> Journal of Financial and Quantitative Analysis, v. 21, n. 3 (Sept., 
> 1986), pp. 279-92.]   I initially specified the utility function as U = 
> R/(0.5 + R) where R is R is the gross return on a portfolio and 
> specified long-only constraints. The restriction that portfolio shares 
> sum to 1 is handled by specifying n-1 variables (where n is the nubmer 
> of assets) and making the share asset n be 1 minus the sum of other 
> shares. If I apply DEoptim to a sufficiently small subset of the assets, 
> it converges and  selects a plausible portfolio.  Yet if I ask DEoptim 
> to analyze as many as 30 assets, it fails to converge in any number of 
> iterations that I've tried.  Given the same problem, Rgenoud converged 
> after 44 hours (more than 2 million generation, if memory serves).  I 
> subsequently tried changing the utility function to ln(R) and asking 
> Rgenoud to maximize that.  Thus far it has run for over 1.5 million 
> generations without converging.  The portfolio shares have barely 
> changed over many recent generations.  Perhaps I could just relax the 
> default convergence criteria and declare the problem solved for 
> practical purposes.  However, that might result in mistaking a local for 
> a global maximum.  These experiences may just indicate that a 30 asset 
> portfolio is hard to optimize using general purpose algorithms. Kris 
> Boudt et al. note that "portfolio problems encountered in practice may 
> require days to optimize on a personal computer" ("Large-scale portfolio 
> optimization with DEoptim," p. 1). These experiences motivated my 
> interest in trying an algorithm, such as that of Sharpe, designed 
> specifically for portfolio optimization.

As one of the authors of the paper in question, I'll note that I was
talking about portfolios with hundreds or thousands of assets, and/or
with many rebalancing periods or observations.  Monthly series of 120
observations each shouldn't take millions of iterations to converge.  It
is possible that the starting set is not feasible, given the way your
full investment constraint is being applied.

If your objective function is truly a smooth convex function, then
optim() or some other linear or conical solver should be sufficient.  If
the function is not smooth (and real portfolio objectives and
constraints rarely are), then a random portfolios or a global optimizer
will be required.  

Perhaps you should start with a couple hundred random portfolio survey
of your feasible space?

This may be accomplished in R with Pat Burns' excellent Portfolio Probe
(commercial non-free), or with PortfolioAnalytics (open source/free, on
R-Forge).

PortfolioAnalytics will also allow you to use DEoptim after using random
portfolios to get close to the global minima.  

See out R/Finance seminar presentation here:
http://www.rinfinance.com/agenda/2010/Carl+Peterson+Boudt_Tutorial.pdf
and the code to replicate here:
https://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/PortfolioAnalytics/sandbox/script.workshop2010.R?root=returnanalytics
PortfolioAnalytics does some of the heavy lifting to set good defaults
and give you a good set of starting population values to speed
convergence.

Also, Pat Burns' Portfolio Probe blog is here:
http://www.portfolioprobe.com/blog/

- Brian

> > I don't know the paper you mentioned, but I know a paper of W. Sharpe in
> > which he suggests to do repeated zero-sum changes to the portfolio, like
> > "increase one asset by x%, and decrease another one by x%". If that is what
> > you mean, this can be done with a local search. 
> The algorithm you describe sounds very much like that covered in the 
> articles I cited in my previous note.  It's probably the same algorithm.
> 
> (But actually, other
> > functions like DEoptim should work just as well. The DEoptim package even
> > comes with a vignette that adresses portfolio optimisation.) 
> Perhaps I should just be more patient with DEoptim or buy a faster computer!
> 
> > An example for a local search procedure is given in one of the vignettes of
> > the NMOF package (which is available from
> > https://r-forge.r-project.org/R/?group_id=1128 ), even though I am not sure
> > how self-explanatory the vignette is.
> Thank you for the NMOF reference.  I've printed "Examples and Extensions 
> for the NMOF package" and tried the command
> install.packages("NMOF", repos = "http://R-Forge.R-project.org")
> That command elicited the following messages:
> Warning in install.packages("NMOF", repos = 
> "http://R-Forge.R-project.org") :
>    argument 'lib' is missing: using 
> '/home/john/R/i486-pc-linux-gnu-library/2.8'
> trying URL 'http://R-Forge.R-project.org/src/contrib/NMOF_0.14-2.tar.gz'
> Content type 'application/x-gzip' length 1352123 bytes (1.3 Mb)
> opened URL
> ==================================================
> downloaded 1.3 Mb
> 
> * Installing *source* package 'NMOF' ...
> ** R
> ** data
> **  moving datasets to lazyload DB
> ** inst
> ** preparing package for lazy loading
> ** help
>   >>> Building/Updating help pages for package 'NMOF'
>       Formats: text html latex example
>    DEopt                             text    html    latex   example
>    EuropeanCall                      text    html    latex   example
>    GAopt                             text    html    latex   example
>    LSopt                             text    html    latex   example
>    MA                                text    html    latex   example
>    NMOF-package                      text    html    latex   example
>    NS                                text    html    latex   example
>    NSf                               text    html    latex   example
>    PSopt                             text    html    latex   example
>    TAopt                             text    html    latex   example
>    bundData                          text    html    latex   example
>    callHestoncf                      text    html    latex   example
>    fundData                          text    html    latex   example
>    gridSearch                        text    html    latex   example
>    qTable                            text    html    latex   example
> 
> ERROR in file 'repairMatrix.Rd': Environment (text enclosed in {}) found 
> in \title{...}.
> The title must be plain text!
> 
> ERROR: building help failed for package 'NMOF'
> ** Removing '/home/john/R/i486-pc-linux-gnu-library/2.8/NMOF'
> 
> The downloaded packages are in
> 	/tmp/RtmpNAuDvf/downloaded_packages
> Warning message:
> In install.packages("NMOF", repos = "http://R-Forge.R-project.org") :
>    installation of package 'NMOF' had non-zero exit status
> 
> ***************************************
> 
> Any suggestions for how to successfully install NMOF would be greatly 
> appreciated.
> 
> Best regards,
> John
> 
> 
> 
> > 
> > 
> > Regards,
> > Enrico
> > 
> > 
> >   
> > 
> >> -----Urspr?ngliche Nachricht-----
> >> Von: r-sig-finance-bounces at r-project.org 
> >> [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag von 
> >> John P. Burkett
> >> Gesendet: Montag, 1. August 2011 18:49
> >> An: R-SIG-Finance at r-project.org
> >> Betreff: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
> >>
> >> An attractive sounding algorithm for maximizing the expected 
> >> utility of of a portfolio was proposed by William F. Sharpe 
> >> in "An algorithm for portfolio improvement," Advances in 
> >> Mathematical Programming and Financial Planning, 1987, pp. 
> >> 155-170 and summarized by the same author in "Expected 
> >> utility asset allocation," Financial Analysts Journal, vol. 
> >> 63, no. 5 (Sep.-Oct., 2007), pp. 18-30.
> >>
> >> Has this algorithm been implemented in R?
> >>
> >> If not, is there a substitute that is likely to work well for 
> >> a user-specified concave utility function?  I've tried optim, 
> >> DEoptim, and Rgenoud but encountered difficulty in getting 
> >> them to converge for a long-only portfolio of around 30 assets.
> >>
> >> Best regards,
> >> John
> >>
> >> --
> >> John P. Burkett
> >> Department of Economics
> >> University of Rhode Island
> >> Kingston, RI 02881-0808
> >> USA
> >>


From 1987.zhangxi at gmail.com  Mon Aug  1 23:42:55 2011
From: 1987.zhangxi at gmail.com (zoe_zhang)
Date: Mon, 1 Aug 2011 14:42:55 -0700 (PDT)
Subject: [R-SIG-Finance] how to add more than two external regressors in
 GARCH model using rgarch
Message-ID: <1312234975503-3710899.post@n4.nabble.com>

Dear All,
I am working on a GARCH model with two external regressors.
I find the rgarch package could help and just follow the ugarchspec function
which is
function (variance.model = list(model = "sGARCH", garchOrder = c(1,
1), submodel = NULL, *external.regressors = NULL*, variance.targeting =
FALSE),
mean.model = list(armaOrder = c(1, 1), include.mean = TRUE,
garchInMean = FALSE, inMeanType = 1, arfima = FALSE,
external.regressors = NULL), distribution.model = "norm",
start.pars = list(), fixed.pars = list(), ...)

Assume I have to add two external regressors x1 and x2 . I tried 
external.regressors = (x1,x2)
or external.regressors = x1,x2
but the result still comes out with one external regressor,

does any one know how to add more than two regressors?

Any suggestion would be appreciated a lot!

Sincerely,
Zoe

--
View this message in context: http://r.789695.n4.nabble.com/how-to-add-more-than-two-external-regressors-in-GARCH-model-using-rgarch-tp3710899p3710899.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Mon Aug  1 23:46:55 2011
From: alexios at 4dscape.com (alexios)
Date: Mon, 01 Aug 2011 22:46:55 +0100
Subject: [R-SIG-Finance] how to add more than two external regressors in
 GARCH model using rgarch
In-Reply-To: <1312234975503-3710899.post@n4.nabble.com>
References: <1312234975503-3710899.post@n4.nabble.com>
Message-ID: <4E371ECF.8050808@4dscape.com>

Please READ the documentation (?ugarchspec).
I quote:
"external.regressors...A matrix object containing the external 
regressors to include in the mean equation with as many rows as will be 
included in the data (which is passed in the fit function)."

e.g. matrix(cbind(x1, x2), ncol = 2)


Regards,

Alexios

On 01/08/2011 22:42, zoe_zhang wrote:
> Dear All,
> I am working on a GARCH model with two external regressors.
> I find the rgarch package could help and just follow the ugarchspec function
> which is
> function (variance.model = list(model = "sGARCH", garchOrder = c(1,
> 1), submodel = NULL, *external.regressors = NULL*, variance.targeting =
> FALSE),
> mean.model = list(armaOrder = c(1, 1), include.mean = TRUE,
> garchInMean = FALSE, inMeanType = 1, arfima = FALSE,
> external.regressors = NULL), distribution.model = "norm",
> start.pars = list(), fixed.pars = list(), ...)
>
> Assume I have to add two external regressors x1 and x2 . I tried
> external.regressors = (x1,x2)
> or external.regressors = x1,x2
> but the result still comes out with one external regressor,
>
> does any one know how to add more than two regressors?
>
> Any suggestion would be appreciated a lot!
>
> Sincerely,
> Zoe
>
> --
> View this message in context: http://r.789695.n4.nabble.com/how-to-add-more-than-two-external-regressors-in-GARCH-model-using-rgarch-tp3710899p3710899.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>


From 1987.zhangxi at gmail.com  Tue Aug  2 00:09:26 2011
From: 1987.zhangxi at gmail.com (zoe_zhang)
Date: Mon, 1 Aug 2011 15:09:26 -0700 (PDT)
Subject: [R-SIG-Finance] how to add more than two external regressors in
 GARCH model using rgarch
In-Reply-To: <4E371ECF.8050808@4dscape.com>
References: <1312234975503-3710899.post@n4.nabble.com>
	<4E371ECF.8050808@4dscape.com>
Message-ID: <1312236566052-3710950.post@n4.nabble.com>

Thank you so much Alexios!
It is my fault that didn't read the intructions...
I appreciate it!

Sincerely,
Zoe

--
View this message in context: http://r.789695.n4.nabble.com/how-to-add-more-than-two-external-regressors-in-GARCH-model-using-rgarch-tp3710899p3710950.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From burkett at uri.edu  Tue Aug  2 04:24:58 2011
From: burkett at uri.edu (John P. Burkett)
Date: Mon, 01 Aug 2011 22:24:58 -0400
Subject: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
In-Reply-To: <4E371BD6.7000506@4dscape.com>
References: <4E36D8E9.1050303@uri.edu>
	<BB1C9775C0154368922643D948270A09@EnricosPC>
	<4E37159B.8080209@uri.edu> <4E371BD6.7000506@4dscape.com>
Message-ID: <4E375FFA.3000803@uri.edu>

alexios wrote:
> I've found the cmaes (Covariance Matrix Adapting Evolutionary Strategy) 
> solver on CRAN to be quite robust to some nonconvex portfolio
> problems which required a global optimizer. Like other such global 
> solvers which do not accept explicit constraint functions, you would 
> need to create a sort of penalty barrier function i.e
> 
> -obj(x) + 100*(1-sum(x))^2
> 
Alexios,
Thank you for your suggestions.  CMAES looks promising for some 
applications. However, for maximizing expected utility or minimizing -1* 
(expected utility), detection of CMAES convergence could be tricky.  The 
reference manual, in the section on the cma_es function, states that "no 
sophisticated convergence detection is included" (p. 3)  If the user 
specifies a value for stopfitness, the computation will halt once the 
objective function value "is smaller than or equal to stopfitness" (p. 
3).  "This is the only way for CMA-ES to 'converge'" (p. 3). If we knew 
the minimum attainable value for -1*(expected utility), we could specify 
stopfitness as a number slightly greater than that value. 
Unfortunately, in portfolio optimization problems we seldom know the 
minimum attainable value of -1*(expected utility) until we have found 
the optimal portfolio.


> For state of the art global solvers you'll probably need to look outside 
> R to a commercial implementation or try submitting your problem to the 
> NEOS server (http://www.neos-server.org/neos/solvers/index.html...see in 
> particular the Branch and Bound type solver BARON).
Thanks for drawing my attention to BARON.  It looks good; when I've 
learned enough about GAMS format, I'll give it a try.

Best regards,
John




> 
> Regards,
> 
> Alexios
> 
> On 01/08/2011 22:07, John P. Burkett wrote:
>> Enrico Schumann wrote:
>>> what kind of "difficulty" did you encounter? If you would give more
>>> details
>>> on what you tried, and how, then people should be better able to help
>>> you.
>> Thank you, Enrico, for your prompt and helpful response. Focusing on
>> Sharpe's algorithm, I originally omitted specifics about difficulties I
>> have encountered with packages based on other algorithms. However, in
>> case it is of interest, I will now outline my project and difficulties.
>> I have about 120 monthly observations on gross real returns for about 30
>> assets. [Trying to mitigate estimation error, I've shrunk observed
>> returns toward a common value as proposed by Philippe Jorion,
>> "Bayes-Stein Estimation for Portfolio Analysis",
>> Journal of Financial and Quantitative Analysis, v. 21, n. 3 (Sept.,
>> 1986), pp. 279-92.] I initially specified the utility function as U =
>> R/(0.5 + R) where R is R is the gross return on a portfolio and
>> specified long-only constraints. The restriction that portfolio shares
>> sum to 1 is handled by specifying n-1 variables (where n is the nubmer
>> of assets) and making the share asset n be 1 minus the sum of other
>> shares. If I apply DEoptim to a sufficiently small subset of the assets,
>> it converges and selects a plausible portfolio. Yet if I ask DEoptim to
>> analyze as many as 30 assets, it fails to converge in any number of
>> iterations that I've tried. Given the same problem, Rgenoud converged
>> after 44 hours (more than 2 million generation, if memory serves). I
>> subsequently tried changing the utility function to ln(R) and asking
>> Rgenoud to maximize that. Thus far it has run for over 1.5 million
>> generations without converging. The portfolio shares have barely changed
>> over many recent generations. Perhaps I could just relax the default
>> convergence criteria and declare the problem solved for practical
>> purposes. However, that might result in mistaking a local for a global
>> maximum. These experiences may just indicate that a 30 asset portfolio
>> is hard to optimize using general purpose algorithms. Kris Boudt et al.
>> note that "portfolio problems encountered in practice may require days
>> to optimize on a personal computer" ("Large-scale portfolio optimization
>> with DEoptim," p. 1). These experiences motivated my interest in trying
>> an algorithm, such as that of Sharpe, designed specifically for
>> portfolio optimization.
>>
>>> I don't know the paper you mentioned, but I know a paper of W. Sharpe in
>>> which he suggests to do repeated zero-sum changes to the portfolio, like
>>> "increase one asset by x%, and decrease another one by x%". If that is
>>> what
>>> you mean, this can be done with a local search.
>> The algorithm you describe sounds very much like that covered in the
>> articles I cited in my previous note. It's probably the same algorithm.
>>
>> (But actually, other
>>> functions like DEoptim should work just as well. The DEoptim package 
>>> even
>>> comes with a vignette that adresses portfolio optimisation.)
>> Perhaps I should just be more patient with DEoptim or buy a faster
>> computer!
>>
>>> An example for a local search procedure is given in one of the
>>> vignettes of
>>> the NMOF package (which is available from
>>> https://r-forge.r-project.org/R/?group_id=1128 ), even though I am not
>>> sure
>>> how self-explanatory the vignette is.
>> Thank you for the NMOF reference. I've printed "Examples and Extensions
>> for the NMOF package" and tried the command
>> install.packages("NMOF", repos = "http://R-Forge.R-project.org")
>> That command elicited the following messages:
>> Warning in install.packages("NMOF", repos =
>> "http://R-Forge.R-project.org") :
>> argument 'lib' is missing: using
>> '/home/john/R/i486-pc-linux-gnu-library/2.8'
>> trying URL 'http://R-Forge.R-project.org/src/contrib/NMOF_0.14-2.tar.gz'
>> Content type 'application/x-gzip' length 1352123 bytes (1.3 Mb)
>> opened URL
>> ==================================================
>> downloaded 1.3 Mb
>>
>> * Installing *source* package 'NMOF' ...
>> ** R
>> ** data
>> ** moving datasets to lazyload DB
>> ** inst
>> ** preparing package for lazy loading
>> ** help
>>  >>> Building/Updating help pages for package 'NMOF'
>> Formats: text html latex example
>> DEopt text html latex example
>> EuropeanCall text html latex example
>> GAopt text html latex example
>> LSopt text html latex example
>> MA text html latex example
>> NMOF-package text html latex example
>> NS text html latex example
>> NSf text html latex example
>> PSopt text html latex example
>> TAopt text html latex example
>> bundData text html latex example
>> callHestoncf text html latex example
>> fundData text html latex example
>> gridSearch text html latex example
>> qTable text html latex example
>>
>> ERROR in file 'repairMatrix.Rd': Environment (text enclosed in {}) found
>> in \title{...}.
>> The title must be plain text!
>>
>> ERROR: building help failed for package 'NMOF'
>> ** Removing '/home/john/R/i486-pc-linux-gnu-library/2.8/NMOF'
>>
>> The downloaded packages are in
>> /tmp/RtmpNAuDvf/downloaded_packages
>> Warning message:
>> In install.packages("NMOF", repos = "http://R-Forge.R-project.org") :
>> installation of package 'NMOF' had non-zero exit status
>>
>> ***************************************
>>
>> Any suggestions for how to successfully install NMOF would be greatly
>> appreciated.
>>
>> Best regards,
>> John
>>
>>
>>
>>>
>>>
>>> Regards,
>>> Enrico
>>>
>>>
>>>
>>>> -----Urspr?ngliche Nachricht-----
>>>> Von: r-sig-finance-bounces at r-project.org
>>>> [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag von John P.
>>>> Burkett
>>>> Gesendet: Montag, 1. August 2011 18:49
>>>> An: R-SIG-Finance at r-project.org
>>>> Betreff: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
>>>>
>>>> An attractive sounding algorithm for maximizing the expected utility
>>>> of of a portfolio was proposed by William F. Sharpe in "An algorithm
>>>> for portfolio improvement," Advances in Mathematical Programming and
>>>> Financial Planning, 1987, pp. 155-170 and summarized by the same
>>>> author in "Expected utility asset allocation," Financial Analysts
>>>> Journal, vol. 63, no. 5 (Sep.-Oct., 2007), pp. 18-30.
>>>>
>>>> Has this algorithm been implemented in R?
>>>>
>>>> If not, is there a substitute that is likely to work well for a
>>>> user-specified concave utility function? I've tried optim, DEoptim,
>>>> and Rgenoud but encountered difficulty in getting them to converge
>>>> for a long-only portfolio of around 30 assets.
>>>>
>>>> Best regards,
>>>> John
>>>>
>>>> -- 
>>>> John P. Burkett
>>>> Department of Economics
>>>> University of Rhode Island
>>>> Kingston, RI 02881-0808
>>>> USA
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R
>>>> questions should go.
>>>
>>>
>>
>>
> 
> 


-- 
John P. Burkett
Department of Economics
University of Rhode Island
Kingston, RI 02881-0808
USA

phone (401) 874-9195


From burkett at uri.edu  Tue Aug  2 04:57:40 2011
From: burkett at uri.edu (John P. Burkett)
Date: Mon, 01 Aug 2011 22:57:40 -0400
Subject: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
In-Reply-To: <1312234589.18828.87.camel@brian-rcg>
References: <4E36D8E9.1050303@uri.edu>	
	<BB1C9775C0154368922643D948270A09@EnricosPC>
	<4E37159B.8080209@uri.edu> <1312234589.18828.87.camel@brian-rcg>
Message-ID: <4E3767A4.6060004@uri.edu>

Brian G. Peterson wrote:
> On Mon, 2011-08-01 at 17:07 -0400, John P. Burkett wrote:
>> Enrico Schumann wrote:
>>> what kind of "difficulty" did you encounter? If you would give more details
>>> on what you tried, and how, then people should be better able to help you. 
>> Thank you, Enrico, for your prompt and helpful response.  Focusing on 
>> Sharpe's algorithm, I originally omitted specifics about difficulties I 
>> have encountered with packages based on other algorithms.  However, in 
>> case it is of interest, I will now outline my project and difficulties. 
>>      I have about 120 monthly observations on gross real returns for 
>> about 30 assets. [Trying to mitigate estimation error, I've shrunk 
>> observed returns toward a common value as proposed by Philippe Jorion, 
>> "Bayes-Stein Estimation for Portfolio Analysis",
>> Journal of Financial and Quantitative Analysis, v. 21, n. 3 (Sept., 
>> 1986), pp. 279-92.]   I initially specified the utility function as U = 
>> R/(0.5 + R) where R is R is the gross return on a portfolio and 
>> specified long-only constraints. The restriction that portfolio shares 
>> sum to 1 is handled by specifying n-1 variables (where n is the nubmer 
>> of assets) and making the share asset n be 1 minus the sum of other 
>> shares. If I apply DEoptim to a sufficiently small subset of the assets, 
>> it converges and  selects a plausible portfolio.  Yet if I ask DEoptim 
>> to analyze as many as 30 assets, it fails to converge in any number of 
>> iterations that I've tried.  Given the same problem, Rgenoud converged 
>> after 44 hours (more than 2 million generation, if memory serves).  I 
>> subsequently tried changing the utility function to ln(R) and asking 
>> Rgenoud to maximize that.  Thus far it has run for over 1.5 million 
>> generations without converging.  The portfolio shares have barely 
>> changed over many recent generations.  Perhaps I could just relax the 
>> default convergence criteria and declare the problem solved for 
>> practical purposes.  However, that might result in mistaking a local for 
>> a global maximum.  These experiences may just indicate that a 30 asset 
>> portfolio is hard to optimize using general purpose algorithms. Kris 
>> Boudt et al. note that "portfolio problems encountered in practice may 
>> require days to optimize on a personal computer" ("Large-scale portfolio 
>> optimization with DEoptim," p. 1). These experiences motivated my 
>> interest in trying an algorithm, such as that of Sharpe, designed 
>> specifically for portfolio optimization.
> 
> As one of the authors of the paper in question, I'll note that I was
> talking about portfolios with hundreds or thousands of assets, and/or
> with many rebalancing periods or observations.  Monthly series of 120
> observations each shouldn't take millions of iterations to converge.  It
> is possible that the starting set is not feasible, given the way your
> full investment constraint is being applied.
> 
Thanks, Brian.  I'll double check my code to see if it's given DEoptim 
an impossible task.

> If your objective function is truly a smooth convex function, then
> optim() or some other linear or conical solver should be sufficient.  If
> the function is not smooth (and real portfolio objectives and
> constraints rarely are), then a random portfolios or a global optimizer
> will be required.  
> 
> Perhaps you should start with a couple hundred random portfolio survey
> of your feasible space?
> 
> This may be accomplished in R with Pat Burns' excellent Portfolio Probe
> (commercial non-free), or with PortfolioAnalytics (open source/free, on
> R-Forge).
> 
> PortfolioAnalytics will also allow you to use DEoptim after using random
> portfolios to get close to the global minima.  
> 
> See out R/Finance seminar presentation here:
> http://www.rinfinance.com/agenda/2010/Carl+Peterson+Boudt_Tutorial.pdf
> and the code to replicate here:
> https://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/PortfolioAnalytics/sandbox/script.workshop2010.R?root=returnanalytics
> PortfolioAnalytics does some of the heavy lifting to set good defaults
> and give you a good set of starting population values to speed
> convergence.
> 
> Also, Pat Burns' Portfolio Probe blog is here:
> http://www.portfolioprobe.com/blog/
These are very helpful leads.  I'll pursue them tomorrow morning. 
Thanks again!

Best regards,
John


> 
> - Brian
> 
>>> I don't know the paper you mentioned, but I know a paper of W. Sharpe in
>>> which he suggests to do repeated zero-sum changes to the portfolio, like
>>> "increase one asset by x%, and decrease another one by x%". If that is what
>>> you mean, this can be done with a local search. 
>> The algorithm you describe sounds very much like that covered in the 
>> articles I cited in my previous note.  It's probably the same algorithm.
>>
>> (But actually, other
>>> functions like DEoptim should work just as well. The DEoptim package even
>>> comes with a vignette that adresses portfolio optimisation.) 
>> Perhaps I should just be more patient with DEoptim or buy a faster computer!
>>
>>> An example for a local search procedure is given in one of the vignettes of
>>> the NMOF package (which is available from
>>> https://r-forge.r-project.org/R/?group_id=1128 ), even though I am not sure
>>> how self-explanatory the vignette is.
>> Thank you for the NMOF reference.  I've printed "Examples and Extensions 
>> for the NMOF package" and tried the command
>> install.packages("NMOF", repos = "http://R-Forge.R-project.org")
>> That command elicited the following messages:
>> Warning in install.packages("NMOF", repos = 
>> "http://R-Forge.R-project.org") :
>>    argument 'lib' is missing: using 
>> '/home/john/R/i486-pc-linux-gnu-library/2.8'
>> trying URL 'http://R-Forge.R-project.org/src/contrib/NMOF_0.14-2.tar.gz'
>> Content type 'application/x-gzip' length 1352123 bytes (1.3 Mb)
>> opened URL
>> ==================================================
>> downloaded 1.3 Mb
>>
>> * Installing *source* package 'NMOF' ...
>> ** R
>> ** data
>> **  moving datasets to lazyload DB
>> ** inst
>> ** preparing package for lazy loading
>> ** help
>>   >>> Building/Updating help pages for package 'NMOF'
>>       Formats: text html latex example
>>    DEopt                             text    html    latex   example
>>    EuropeanCall                      text    html    latex   example
>>    GAopt                             text    html    latex   example
>>    LSopt                             text    html    latex   example
>>    MA                                text    html    latex   example
>>    NMOF-package                      text    html    latex   example
>>    NS                                text    html    latex   example
>>    NSf                               text    html    latex   example
>>    PSopt                             text    html    latex   example
>>    TAopt                             text    html    latex   example
>>    bundData                          text    html    latex   example
>>    callHestoncf                      text    html    latex   example
>>    fundData                          text    html    latex   example
>>    gridSearch                        text    html    latex   example
>>    qTable                            text    html    latex   example
>>
>> ERROR in file 'repairMatrix.Rd': Environment (text enclosed in {}) found 
>> in \title{...}.
>> The title must be plain text!
>>
>> ERROR: building help failed for package 'NMOF'
>> ** Removing '/home/john/R/i486-pc-linux-gnu-library/2.8/NMOF'
>>
>> The downloaded packages are in
>> 	/tmp/RtmpNAuDvf/downloaded_packages
>> Warning message:
>> In install.packages("NMOF", repos = "http://R-Forge.R-project.org") :
>>    installation of package 'NMOF' had non-zero exit status
>>
>> ***************************************
>>
>> Any suggestions for how to successfully install NMOF would be greatly 
>> appreciated.
>>
>> Best regards,
>> John
>>
>>
>>
>>>
>>> Regards,
>>> Enrico
>>>
>>>
>>>   
>>>
>>>> -----Urspr?ngliche Nachricht-----
>>>> Von: r-sig-finance-bounces at r-project.org 
>>>> [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag von 
>>>> John P. Burkett
>>>> Gesendet: Montag, 1. August 2011 18:49
>>>> An: R-SIG-Finance at r-project.org
>>>> Betreff: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
>>>>
>>>> An attractive sounding algorithm for maximizing the expected 
>>>> utility of of a portfolio was proposed by William F. Sharpe 
>>>> in "An algorithm for portfolio improvement," Advances in 
>>>> Mathematical Programming and Financial Planning, 1987, pp. 
>>>> 155-170 and summarized by the same author in "Expected 
>>>> utility asset allocation," Financial Analysts Journal, vol. 
>>>> 63, no. 5 (Sep.-Oct., 2007), pp. 18-30.
>>>>
>>>> Has this algorithm been implemented in R?
>>>>
>>>> If not, is there a substitute that is likely to work well for 
>>>> a user-specified concave utility function?  I've tried optim, 
>>>> DEoptim, and Rgenoud but encountered difficulty in getting 
>>>> them to converge for a long-only portfolio of around 30 assets.
>>>>
>>>> Best regards,
>>>> John
>>>>
>>>> --
>>>> John P. Burkett
>>>> Department of Economics
>>>> University of Rhode Island
>>>> Kingston, RI 02881-0808
>>>> USA
>>>>
> 
> 
> 


-- 
John P. Burkett
Department of Economics
University of Rhode Island
Kingston, RI 02881-0808
USA

phone (401) 874-9195


From enricoschumann at yahoo.de  Tue Aug  2 07:31:13 2011
From: enricoschumann at yahoo.de (Enrico Schumann)
Date: Tue, 2 Aug 2011 07:31:13 +0200
Subject: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
In-Reply-To: <4E37159B.8080209@uri.edu>
References: <4E36D8E9.1050303@uri.edu><BB1C9775C0154368922643D948270A09@EnricosPC>
	<4E37159B.8080209@uri.edu>
Message-ID: <5FC25401231047EA936D129F8213574B@EnricosPC>

With 120 observations and 30 assets and a smooth objective function and
relatively simple constraints, the running time should be *seconds*. One
potential problem with DE is how the constraints are implemented, more
specifically the lower/upper limits. When DE creates new solutions, it does
not observe any constraints except for such that one "implicitly" adds (eg,
like you did with the budget constraint). Thus, one typically repairs the
constraints after new solutions are created, or penalises solutions that
violate constraints. If you penalise too strongly, the algorithm will in
effect throw away many candidate solutions, and so the algorithm may indeed
have a hard time to find a solution, since in portfolio optimisation
problems the solution is often on the boundary. 

Regarding the installation error: the \title in one Rd-file uses quotation
marks (via \sQuote), which should be supported (according to R-exts since R
2.12.0). R CMD check never complained to me on Win XP or Ubuntu. Could you
please send me (off-list) the R-version/OS you work on? But I will remove
the quotation marks later today, so the new version should be available from
R-Forge tomorrow. Please let me know if this doesn't work either.

Regards,
Enrico



> -----Urspr?ngliche Nachricht-----
> Von: r-sig-finance-bounces at r-project.org 
> [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag von 
> John P. Burkett
> Gesendet: Montag, 1. August 2011 23:08
> An: Enrico Schumann; R-SIG-Finance at r-project.org
> Betreff: Re: [R-SIG-Finance] Sharpe's algorithm for portfolio 
> improvement
> 
> Enrico Schumann wrote:
> > what kind of "difficulty" did you encounter? If you would give more 
> > details on what you tried, and how, then people should be 
> better able to help you.
> Thank you, Enrico, for your prompt and helpful response.  
> Focusing on Sharpe's algorithm, I originally omitted 
> specifics about difficulties I have encountered with packages 
> based on other algorithms.  However, in case it is of 
> interest, I will now outline my project and difficulties. 
>      I have about 120 monthly observations on gross real 
> returns for about 30 assets. [Trying to mitigate estimation 
> error, I've shrunk observed returns toward a common value as 
> proposed by Philippe Jorion, "Bayes-Stein Estimation for 
> Portfolio Analysis", Journal of Financial and Quantitative 
> Analysis, v. 21, n. 3 (Sept., 
> 1986), pp. 279-92.]   I initially specified the utility 
> function as U = 
> R/(0.5 + R) where R is R is the gross return on a portfolio 
> and specified long-only constraints. The restriction that 
> portfolio shares sum to 1 is handled by specifying n-1 
> variables (where n is the nubmer of assets) and making the 
> share asset n be 1 minus the sum of other shares. If I apply 
> DEoptim to a sufficiently small subset of the assets, it 
> converges and  selects a plausible portfolio.  Yet if I ask 
> DEoptim to analyze as many as 30 assets, it fails to converge 
> in any number of iterations that I've tried.  Given the same 
> problem, Rgenoud converged after 44 hours (more than 2 
> million generation, if memory serves).  I subsequently tried 
> changing the utility function to ln(R) and asking Rgenoud to 
> maximize that.  Thus far it has run for over 1.5 million 
> generations without converging.  The portfolio shares have 
> barely changed over many recent generations.  Perhaps I could 
> just relax the default convergence criteria and declare the 
> problem solved for practical purposes.  However, that might 
> result in mistaking a local for a global maximum.  These 
> experiences may just indicate that a 30 asset portfolio is 
> hard to optimize using general purpose algorithms. Kris Boudt 
> et al. note that "portfolio problems encountered in practice 
> may require days to optimize on a personal computer" 
> ("Large-scale portfolio optimization with DEoptim," p. 1). 
> These experiences motivated my interest in trying an 
> algorithm, such as that of Sharpe, designed specifically for 
> portfolio optimization.
> 
> > I don't know the paper you mentioned, but I know a paper of 
> W. Sharpe 
> > in which he suggests to do repeated zero-sum changes to the 
> portfolio, 
> > like "increase one asset by x%, and decrease another one by x%". If 
> > that is what you mean, this can be done with a local search.
> The algorithm you describe sounds very much like that covered 
> in the articles I cited in my previous note.  It's probably 
> the same algorithm.
> 
> (But actually, other
> > functions like DEoptim should work just as well. The 
> DEoptim package 
> > even comes with a vignette that adresses portfolio optimisation.)
> Perhaps I should just be more patient with DEoptim or buy a 
> faster computer!
> 
> > An example for a local search procedure is given in one of the 
> > vignettes of the NMOF package (which is available from
> > https://r-forge.r-project.org/R/?group_id=1128 ), even 
> though I am not 
> > sure how self-explanatory the vignette is.
> Thank you for the NMOF reference.  I've printed "Examples and 
> Extensions for the NMOF package" and tried the command 
> install.packages("NMOF", repos = 
> "http://R-Forge.R-project.org") That command elicited the 
> following messages:
> Warning in install.packages("NMOF", repos =
> "http://R-Forge.R-project.org") :
>    argument 'lib' is missing: using
> '/home/john/R/i486-pc-linux-gnu-library/2.8'
> trying URL 
> 'http://R-Forge.R-project.org/src/contrib/NMOF_0.14-2.tar.gz'
> Content type 'application/x-gzip' length 1352123 bytes (1.3 
> Mb) opened URL ==================================================
> downloaded 1.3 Mb
> 
> * Installing *source* package 'NMOF' ...
> ** R
> ** data
> **  moving datasets to lazyload DB
> ** inst
> ** preparing package for lazy loading
> ** help
>   >>> Building/Updating help pages for package 'NMOF'
>       Formats: text html latex example
>    DEopt                             text    html    latex   example
>    EuropeanCall                      text    html    latex   example
>    GAopt                             text    html    latex   example
>    LSopt                             text    html    latex   example
>    MA                                text    html    latex   example
>    NMOF-package                      text    html    latex   example
>    NS                                text    html    latex   example
>    NSf                               text    html    latex   example
>    PSopt                             text    html    latex   example
>    TAopt                             text    html    latex   example
>    bundData                          text    html    latex   example
>    callHestoncf                      text    html    latex   example
>    fundData                          text    html    latex   example
>    gridSearch                        text    html    latex   example
>    qTable                            text    html    latex   example
> 
> ERROR in file 'repairMatrix.Rd': Environment (text enclosed 
> in {}) found in \title{...}.
> The title must be plain text!
> 
> ERROR: building help failed for package 'NMOF'
> ** Removing '/home/john/R/i486-pc-linux-gnu-library/2.8/NMOF'
> 
> The downloaded packages are in
> 	/tmp/RtmpNAuDvf/downloaded_packages
> Warning message:
> In install.packages("NMOF", repos = "http://R-Forge.R-project.org") :
>    installation of package 'NMOF' had non-zero exit status
> 
> ***************************************
> 
> Any suggestions for how to successfully install NMOF would be 
> greatly appreciated.
> 
> Best regards,
> John
> 
> 
> 
> > 
> > 
> > Regards,
> > Enrico
> > 
> > 
> >   
> > 
> >> -----Urspr?ngliche Nachricht-----
> >> Von: r-sig-finance-bounces at r-project.org
> >> [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag 
> von John P. 
> >> Burkett
> >> Gesendet: Montag, 1. August 2011 18:49
> >> An: R-SIG-Finance at r-project.org
> >> Betreff: [R-SIG-Finance] Sharpe's algorithm for portfolio 
> improvement
> >>
> >> An attractive sounding algorithm for maximizing the 
> expected utility 
> >> of of a portfolio was proposed by William F. Sharpe in "An 
> algorithm 
> >> for portfolio improvement," Advances in Mathematical 
> Programming and 
> >> Financial Planning, 1987, pp.
> >> 155-170 and summarized by the same author in "Expected 
> utility asset 
> >> allocation," Financial Analysts Journal, vol.
> >> 63, no. 5 (Sep.-Oct., 2007), pp. 18-30.
> >>
> >> Has this algorithm been implemented in R?
> >>
> >> If not, is there a substitute that is likely to work well for a 
> >> user-specified concave utility function?  I've tried 
> optim, DEoptim, 
> >> and Rgenoud but encountered difficulty in getting them to converge 
> >> for a long-only portfolio of around 30 assets.
> >>
> >> Best regards,
> >> John
> >>
> >> --
> >> John P. Burkett
> >> Department of Economics
> >> University of Rhode Island
> >> Kingston, RI 02881-0808
> >> USA
> >>
> >> _______________________________________________
> >> R-SIG-Finance at r-project.org mailing list 
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >> -- Subscriber-posting only. If you want to post, subscribe first.
> >> -- Also note that this is not the r-help list where general R 
> >> questions should go.
> > 
> > 
> 
> 
> --
> John P. Burkett
> Department of Economics
> University of Rhode Island
> Kingston, RI 02881-0808
> USA
> 
> phone (401) 874-9195
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R 
> questions should go.


From patrick at burns-stat.com  Tue Aug  2 10:17:13 2011
From: patrick at burns-stat.com (Patrick Burns)
Date: Tue, 02 Aug 2011 09:17:13 +0100
Subject: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
In-Reply-To: <4E375FFA.3000803@uri.edu>
References: <4E36D8E9.1050303@uri.edu>
	<BB1C9775C0154368922643D948270A09@EnricosPC>
	<4E37159B.8080209@uri.edu> <4E371BD6.7000506@4dscape.com>
	<4E375FFA.3000803@uri.edu>
Message-ID: <4E37B289.8000106@burns-stat.com>

Another alternative to get the budget
constraint is to let the optimizer see
unconstrained solutions but then scale
the weights before evaluating the utility.

This has the possibility of confusing some
optimizers, but can work pretty well.

On 02/08/2011 03:24, John P. Burkett wrote:
> alexios wrote:
>> I've found the cmaes (Covariance Matrix Adapting Evolutionary
>> Strategy) solver on CRAN to be quite robust to some nonconvex portfolio
>> problems which required a global optimizer. Like other such global
>> solvers which do not accept explicit constraint functions, you would
>> need to create a sort of penalty barrier function i.e
>>
>> -obj(x) + 100*(1-sum(x))^2
>>
> Alexios,
> Thank you for your suggestions. CMAES looks promising for some
> applications. However, for maximizing expected utility or minimizing -1*
> (expected utility), detection of CMAES convergence could be tricky. The
> reference manual, in the section on the cma_es function, states that "no
> sophisticated convergence detection is included" (p. 3) If the user
> specifies a value for stopfitness, the computation will halt once the
> objective function value "is smaller than or equal to stopfitness" (p.
> 3). "This is the only way for CMA-ES to 'converge'" (p. 3). If we knew
> the minimum attainable value for -1*(expected utility), we could specify
> stopfitness as a number slightly greater than that value. Unfortunately,
> in portfolio optimization problems we seldom know the minimum attainable
> value of -1*(expected utility) until we have found the optimal portfolio.
>
>
>> For state of the art global solvers you'll probably need to look
>> outside R to a commercial implementation or try submitting your
>> problem to the NEOS server
>> (http://www.neos-server.org/neos/solvers/index.html...see in
>> particular the Branch and Bound type solver BARON).
> Thanks for drawing my attention to BARON. It looks good; when I've
> learned enough about GAMS format, I'll give it a try.
>
> Best regards,
> John
>
>
>
>
>>
>> Regards,
>>
>> Alexios
>>
>> On 01/08/2011 22:07, John P. Burkett wrote:
>>> Enrico Schumann wrote:
>>>> what kind of "difficulty" did you encounter? If you would give more
>>>> details
>>>> on what you tried, and how, then people should be better able to help
>>>> you.
>>> Thank you, Enrico, for your prompt and helpful response. Focusing on
>>> Sharpe's algorithm, I originally omitted specifics about difficulties I
>>> have encountered with packages based on other algorithms. However, in
>>> case it is of interest, I will now outline my project and difficulties.
>>> I have about 120 monthly observations on gross real returns for about 30
>>> assets. [Trying to mitigate estimation error, I've shrunk observed
>>> returns toward a common value as proposed by Philippe Jorion,
>>> "Bayes-Stein Estimation for Portfolio Analysis",
>>> Journal of Financial and Quantitative Analysis, v. 21, n. 3 (Sept.,
>>> 1986), pp. 279-92.] I initially specified the utility function as U =
>>> R/(0.5 + R) where R is R is the gross return on a portfolio and
>>> specified long-only constraints. The restriction that portfolio shares
>>> sum to 1 is handled by specifying n-1 variables (where n is the nubmer
>>> of assets) and making the share asset n be 1 minus the sum of other
>>> shares. If I apply DEoptim to a sufficiently small subset of the assets,
>>> it converges and selects a plausible portfolio. Yet if I ask DEoptim to
>>> analyze as many as 30 assets, it fails to converge in any number of
>>> iterations that I've tried. Given the same problem, Rgenoud converged
>>> after 44 hours (more than 2 million generation, if memory serves). I
>>> subsequently tried changing the utility function to ln(R) and asking
>>> Rgenoud to maximize that. Thus far it has run for over 1.5 million
>>> generations without converging. The portfolio shares have barely changed
>>> over many recent generations. Perhaps I could just relax the default
>>> convergence criteria and declare the problem solved for practical
>>> purposes. However, that might result in mistaking a local for a global
>>> maximum. These experiences may just indicate that a 30 asset portfolio
>>> is hard to optimize using general purpose algorithms. Kris Boudt et al.
>>> note that "portfolio problems encountered in practice may require days
>>> to optimize on a personal computer" ("Large-scale portfolio optimization
>>> with DEoptim," p. 1). These experiences motivated my interest in trying
>>> an algorithm, such as that of Sharpe, designed specifically for
>>> portfolio optimization.
>>>
>>>> I don't know the paper you mentioned, but I know a paper of W.
>>>> Sharpe in
>>>> which he suggests to do repeated zero-sum changes to the portfolio,
>>>> like
>>>> "increase one asset by x%, and decrease another one by x%". If that is
>>>> what
>>>> you mean, this can be done with a local search.
>>> The algorithm you describe sounds very much like that covered in the
>>> articles I cited in my previous note. It's probably the same algorithm.
>>>
>>> (But actually, other
>>>> functions like DEoptim should work just as well. The DEoptim package
>>>> even
>>>> comes with a vignette that adresses portfolio optimisation.)
>>> Perhaps I should just be more patient with DEoptim or buy a faster
>>> computer!
>>>
>>>> An example for a local search procedure is given in one of the
>>>> vignettes of
>>>> the NMOF package (which is available from
>>>> https://r-forge.r-project.org/R/?group_id=1128 ), even though I am not
>>>> sure
>>>> how self-explanatory the vignette is.
>>> Thank you for the NMOF reference. I've printed "Examples and Extensions
>>> for the NMOF package" and tried the command
>>> install.packages("NMOF", repos = "http://R-Forge.R-project.org")
>>> That command elicited the following messages:
>>> Warning in install.packages("NMOF", repos =
>>> "http://R-Forge.R-project.org") :
>>> argument 'lib' is missing: using
>>> '/home/john/R/i486-pc-linux-gnu-library/2.8'
>>> trying URL 'http://R-Forge.R-project.org/src/contrib/NMOF_0.14-2.tar.gz'
>>> Content type 'application/x-gzip' length 1352123 bytes (1.3 Mb)
>>> opened URL
>>> ==================================================
>>> downloaded 1.3 Mb
>>>
>>> * Installing *source* package 'NMOF' ...
>>> ** R
>>> ** data
>>> ** moving datasets to lazyload DB
>>> ** inst
>>> ** preparing package for lazy loading
>>> ** help
>>> >>> Building/Updating help pages for package 'NMOF'
>>> Formats: text html latex example
>>> DEopt text html latex example
>>> EuropeanCall text html latex example
>>> GAopt text html latex example
>>> LSopt text html latex example
>>> MA text html latex example
>>> NMOF-package text html latex example
>>> NS text html latex example
>>> NSf text html latex example
>>> PSopt text html latex example
>>> TAopt text html latex example
>>> bundData text html latex example
>>> callHestoncf text html latex example
>>> fundData text html latex example
>>> gridSearch text html latex example
>>> qTable text html latex example
>>>
>>> ERROR in file 'repairMatrix.Rd': Environment (text enclosed in {}) found
>>> in \title{...}.
>>> The title must be plain text!
>>>
>>> ERROR: building help failed for package 'NMOF'
>>> ** Removing '/home/john/R/i486-pc-linux-gnu-library/2.8/NMOF'
>>>
>>> The downloaded packages are in
>>> /tmp/RtmpNAuDvf/downloaded_packages
>>> Warning message:
>>> In install.packages("NMOF", repos = "http://R-Forge.R-project.org") :
>>> installation of package 'NMOF' had non-zero exit status
>>>
>>> ***************************************
>>>
>>> Any suggestions for how to successfully install NMOF would be greatly
>>> appreciated.
>>>
>>> Best regards,
>>> John
>>>
>>>
>>>
>>>>
>>>>
>>>> Regards,
>>>> Enrico
>>>>
>>>>
>>>>
>>>>> -----Urspr?ngliche Nachricht-----
>>>>> Von: r-sig-finance-bounces at r-project.org
>>>>> [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag von John P.
>>>>> Burkett
>>>>> Gesendet: Montag, 1. August 2011 18:49
>>>>> An: R-SIG-Finance at r-project.org
>>>>> Betreff: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
>>>>>
>>>>> An attractive sounding algorithm for maximizing the expected utility
>>>>> of of a portfolio was proposed by William F. Sharpe in "An algorithm
>>>>> for portfolio improvement," Advances in Mathematical Programming and
>>>>> Financial Planning, 1987, pp. 155-170 and summarized by the same
>>>>> author in "Expected utility asset allocation," Financial Analysts
>>>>> Journal, vol. 63, no. 5 (Sep.-Oct., 2007), pp. 18-30.
>>>>>
>>>>> Has this algorithm been implemented in R?
>>>>>
>>>>> If not, is there a substitute that is likely to work well for a
>>>>> user-specified concave utility function? I've tried optim, DEoptim,
>>>>> and Rgenoud but encountered difficulty in getting them to converge
>>>>> for a long-only portfolio of around 30 assets.
>>>>>
>>>>> Best regards,
>>>>> John
>>>>>
>>>>> --
>>>>> John P. Burkett
>>>>> Department of Economics
>>>>> University of Rhode Island
>>>>> Kingston, RI 02881-0808
>>>>> USA
>>>>>
>>>>> _______________________________________________
>>>>> R-SIG-Finance at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>> -- Also note that this is not the r-help list where general R
>>>>> questions should go.
>>>>
>>>>
>>>
>>>
>>
>>
>
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From brian at braverock.com  Tue Aug  2 14:36:53 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 02 Aug 2011 07:36:53 -0500
Subject: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
In-Reply-To: <5FC25401231047EA936D129F8213574B@EnricosPC>
References: <4E36D8E9.1050303@uri.edu>
	<BB1C9775C0154368922643D948270A09@EnricosPC> <4E37159B.8080209@uri.edu>
	<5FC25401231047EA936D129F8213574B@EnricosPC>
Message-ID: <1312288613.18828.112.camel@brian-rcg>

n Tue, 2011-08-02 at 07:31 +0200, Enrico Schumann wrote:
> One potential problem with DE is how the constraints are implemented,
> more specifically the lower/upper limits. When DE creates new
> solutions, it does not observe any constraints except for such that
> one "implicitly" adds (eg, like you did with the budget constraint).

This isn't *quite* correct.  DE will observe your lower and upper bounds
on each objective parameter (asset weight), but will not observe some
additional overall constraint such as a full investment constraint.

>  Thus, one typically repairs the constraints after new solutions are
> created, 

This mirrors Pat Burns' point about letting the optimizer do its thing,
and then 'adjusting' the parameter set inside your objective function to
apply the constraint.  For many portfolios, this works quite well, but
for those where it doesn't work, a penalty function needs to be applied.
 
> or penalises solutions that violate constraints. If you penalise too
> strongly, the algorithm will in effect throw away many candidate
> solutions, and so the algorithm may indeed have a hard time to find a
> solution, since in portfolio optimisation problems the solution is
> often on the boundary. 

I would put this difficulty a little differently.  If the constraint we
are concerned with is the full investment constraint, then the issue is
one of how large the feasible adjusted constrained space (portfolios
with weight bounds min_w and max_w where sum(w)==1) in comparison to the
total space the optimizer will search (all portfolios comprised of
assets in any combination of weights min_w to max_w).

If the feasible space is large in comparison to the total space, a
global optimizer will locate the solution.  If the feasible space is not
large in comparison to the total space, and a large penalty function is
used to tell the optimizer that it is not close, then it could take a
long time to find a solution.

There are several approaches to addressing this.  One is to graduate
your penalty response, for example penalizing with some multiplier
(which should be scaled somewhat larger than a 'good' value of the
objective function, so for global minima at -1, perhaps a multiplier of
10 or 100 will serve) the absolute value of the amount the sum of the
weights exceeds 1.  You can make this work even better by applying a
fraction of the penalty for any sum of weights that is less than one,
because this solution is likely closer to the feasible space.

I find that it is best to pre-seed the optimizer with a population of
candidate portfolios that are all inside the feasible space, so that
even random perturbations are still closer to the feasible space.  In
PortfolioAnalytics, we pre-seed be default, and use a full-investment
constraint adjustment by default (with a graduated penalty function as
another supported alternative), and of course all these options are
changeable by the user.
 
I haven't been able to locate the original Sharpe paper, but I suspect
he utilized a smooth objective function given the date of the paper
alone.  In that case, as I said previously, you don't need and *won't
benefit from* a global optimizer.  Some other author has probably
already cited Sharpe's paper and told you how to use an exact or
smooth-surface optimization technique. Of course, as soon as you want to
add another layer to your objective, or more complex constraints, you're
back in the land of global optimization.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From enricoschumann at yahoo.de  Tue Aug  2 16:36:50 2011
From: enricoschumann at yahoo.de (Enrico Schumann)
Date: Tue, 2 Aug 2011 16:36:50 +0200
Subject: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
In-Reply-To: <1312288613.18828.112.camel@brian-rcg>
References: <4E36D8E9.1050303@uri.edu>
	<BB1C9775C0154368922643D948270A09@EnricosPC>
	<4E37159B.8080209@uri.edu>
	<5FC25401231047EA936D129F8213574B@EnricosPC>
	<1312288613.18828.112.camel@brian-rcg>
Message-ID: <A1F2452BE5714E69BE45FDB9310CDAB0@EnricosPC>

[comments inline]

> -----Urspr?ngliche Nachricht-----
> Von: Brian G. Peterson [mailto:brian at braverock.com] 
> Gesendet: Dienstag, 2. August 2011 14:37
> An: Enrico Schumann
> Cc: 'John P. Burkett'; R-SIG-Finance at r-project.org
> Betreff: Re: [R-SIG-Finance] Sharpe's algorithm for portfolio 
> improvement
> 
> n Tue, 2011-08-02 at 07:31 +0200, Enrico Schumann wrote:
> > One potential problem with DE is how the constraints are 
> implemented, 
> > more specifically the lower/upper limits. When DE creates new 
> > solutions, it does not observe any constraints except for such that 
> > one "implicitly" adds (eg, like you did with the budget constraint).
> 
> This isn't *quite* correct.  DE will observe your lower and 
> upper bounds on each objective parameter (asset weight), but 
> will not observe some additional overall constraint such as a 
> full investment constraint.

Sorry if there was a misunderstanding: when I referred to 'DE', I meant
Differential Evolution in general, not 'DEoptim'. I don't know how the
constraints are incorporated in 'DEoptim'.

> 
> >  Thus, one typically repairs the constraints after new 
> solutions are 
> > created,
> 
> This mirrors Pat Burns' point about letting the optimizer do 
> its thing, and then 'adjusting' the parameter set inside your 
> objective function to apply the constraint.  For many 

Just for the record: actually we have even two possibilities: really repair,
or just map the solutions into feasible ones. In the latter case, we go on
evolving the solutions that violate the constraints. 

> portfolios, this works quite well, but for those where it 
> doesn't work, a penalty function needs to be applied.
>  
> > or penalises solutions that violate constraints. If you 
> penalise too 
> > strongly, the algorithm will in effect throw away many candidate 
> > solutions, and so the algorithm may indeed have a hard time 
> to find a 
> > solution, since in portfolio optimisation problems the solution is 
> > often on the boundary.
> 
> I would put this difficulty a little differently.  If the 
> constraint we are concerned with is the full investment 
> constraint, then the issue is one of how large the feasible 
> adjusted constrained space (portfolios with weight bounds 
> min_w and max_w where sum(w)==1) in comparison to the total 
> space the optimizer will search (all portfolios comprised of 
> assets in any combination of weights min_w to max_w).
> 
> If the feasible space is large in comparison to the total 
> space, a global optimizer will locate the solution.  If the 

if it works properly, yes :)

> feasible space is not large in comparison to the total space, 
> and a large penalty function is used to tell the optimizer 
> that it is not close, then it could take a long time to find 
> a solution.
> 
> There are several approaches to addressing this.  One is to 
> graduate your penalty response, for example penalizing with 
> some multiplier (which should be scaled somewhat larger than 
> a 'good' value of the objective function, so for global 
> minima at -1, perhaps a multiplier of 10 or 100 will serve) 
> the absolute value of the amount the sum of the weights 
> exceeds 1.  You can make this work even better by applying a 
> fraction of the penalty for any sum of weights that is less 
> than one, because this solution is likely closer to the 
> feasible space.

Yes, the important point, I think, is that in such cases the feedback from
the penalty need be constructive, ie, "how much do I violate a constraint?"
(if I want to push some object from the table to the floor, then feedback
like 'the object is still on the table' is less useful than 'the object is
now 3cm off the edge of the table')

But you can also directly use the constraint in the creation of the new
solutions, which is what Sharpe suggested (and what works quite well, and
not just for smooth functions/constraints): if you only add zero-sum changes
to a feasible portfolio, it will remain feasible with respect to the budget
constraint. If you want min/max-holding sizes, choose asset weights such
that the min/max-constraints remain unviolated. This is straightforward in
methods like Simulated Annealing/Threshold Accepting, but somewhat more
difficult in 'DE'. (Which does not mean that 'DE' is not as good as the
other methods, just that the efficient approaches possibly differ, depending
on the method.)

> 
> I find that it is best to pre-seed the optimizer with a 
> population of candidate portfolios that are all inside the 
> feasible space, so that even random perturbations are still 
> closer to the feasible space.  In PortfolioAnalytics, we 
> pre-seed be default, and use a full-investment constraint 
> adjustment by default (with a graduated penalty function as 
> another supported alternative), and of course all these 
> options are changeable by the user.
>  
> I haven't been able to locate the original Sharpe paper, but 
> I suspect he utilized a smooth objective function given the 
> date of the paper alone.  In that case, as I said previously, 
> you don't need and *won't benefit from* a global optimizer.  
> Some other author has probably already cited Sharpe's paper 
> and told you how to use an exact or smooth-surface 
> optimization technique. Of course, as soon as you want to add 
> another layer to your objective, or more complex constraints, 
> you're back in the land of global optimization.
> 
> Regards,
> 
>    - Brian
> 
> --
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
> 

best regards,
Enrico


From 1987.zhangxi at gmail.com  Tue Aug  2 16:55:59 2011
From: 1987.zhangxi at gmail.com (XI ZHANG)
Date: Tue, 2 Aug 2011 10:55:59 -0400
Subject: [R-SIG-Finance] =?utf-8?b?QWJvdXQgQVLvvIgx77yJLUdKUi1HQVJDSCgx?=
	=?utf-8?b?LDEpIE1PREVM?=
Message-ID: <CAMsW=qSY83_DwLpS1Siajue4Svo9W-GL5C1-5WSvbmYg_gdBhQ@mail.gmail.com>

sorry to bother all,
I am recently doing a topic about spillover effect between two markets. And
I want to use AR(1)-GJR-GARCH(1,1)-M Model. I find that rgarch package has *
functions* for univariate GARCH model, including GJR.
My GJR model is in the attachment.



where ?_(j,t-1)^2 is the squared volitility of counterpart market,
?_(i,t-1)^2  is the squared volitility of domestic market. S represent good
news (S=0)or bad news(S=1). and i write the R code as followings,

>variance.model=list(model="gjrGARCH",garchOrder=c(1,1),
external.regressors=lagvoljp)
>mean.model=list(armaOrder=c(1,0),include.mean=TRUE,garchInMean=TRUE,inMeanType=2,arfima=FALSE,external.regressors=ljp)

>spec=ugarchspec(variance.model=variance.model,mean.model=mean.model,
distribution.model="norm")
>fit3.sh=ugarchfit(data=shl,spec=spec,out.sample=0,solver="solnp")

But then I figure out that in normal GJR model, the fomula is
and the function written in rgarch package is also based on it
which means it catches news from domestic market.

But in my model, it should catch news from counterpart market,
I was thinking of taking S part as an another external regressors
since if ?<0,S=1 elseS=0,so I write codes as

>resjp[resjp>0]<-0

>voljpgjr<-resjp^2

>variance.model3sh=list(model="fGARCH",garchOrder=c(1,1), submodel="GARCH",
external.regressors=cbind(lagvoljp,voljpgjr))

>mean.model3sh=list(armaOrder=c(1,0),include.mean=TRUE,garchInMean=TRUE,inMeanType=2,arfima=FALSE,external.regressors=lagsh)

>spec3sh=ugarchspec(variance.model=variance.model3sh,mean.model=mean.model3sh,
distribution.model="norm")

>fit3.sh=ugarchfit(data=shl,spec=spec3sh,out.sample=0,solver="solnp")

>fit3.sh


But the result is still disappointed that the coefficient which reflect
volatility spillover effect is always not significant and almost 0. I tried
other dataset, but the result is the same.

Here is my question,
How could i change the code to let the S reflects the effect from
counterpart market? Are there any codes I write have problems and
un-reasonable part?

Thisi is important for me!
Thank you so much!

Sincerely,
Zoe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110802/a881d7ca/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gjr.jpg
Type: image/jpeg
Size: 13969 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110802/a881d7ca/attachment.jpg>

From alexios at 4dscape.com  Tue Aug  2 18:01:47 2011
From: alexios at 4dscape.com (alexios)
Date: Tue, 02 Aug 2011 17:01:47 +0100
Subject: [R-SIG-Finance] =?utf-8?b?QWJvdXQgQVLvvIgx77yJLUdKUi1HQVJDSCgx?=
 =?utf-8?b?LDEpIE1PREVM?=
In-Reply-To: <CAMsW=qSY83_DwLpS1Siajue4Svo9W-GL5C1-5WSvbmYg_gdBhQ@mail.gmail.com>
References: <CAMsW=qSY83_DwLpS1Siajue4Svo9W-GL5C1-5WSvbmYg_gdBhQ@mail.gmail.com>
Message-ID: <4E381F6B.8000809@4dscape.com>

Dear Zoe,

The study of volatility spillover effects between markets is usually 
studied using multivariate GARCH models, which take into account lagged 
as well as own shocks and volatility. See for example the BEKK, VEK and 
Generalized DCC models. For bivariate modelling this 'should' be 
computationally feasible/straightforward, but you should look outside 
the rgarch package at present for these type of multivariate GARCH 
models (hint: mgarchBEKK, ccgarch).

Regards,

Alexios

On 02/08/2011 15:55, XI ZHANG wrote:
> sorry to bother all,
> I am recently doing a topic about spillover effect between two markets.
> And I want to use AR(1)-GJR-GARCH(1,1)-M Model. I find that rgarch
> package has *functions* for univariate GARCH model, including GJR.
> My GJR model is in the attachment.
>
>
>
> where ?_(j,t-1)^2 is the squared volitility of counterpart market,
> ?_(i,t-1)^2  is the squared volitility of domestic market. S represent
> good news (S=0)or bad news(S=1). and i write the R code as followings,
>
>>variance.model=list(model="gjrGARCH",garchOrder=c(1,1),
> external.regressors=lagvoljp)
>>mean.model=list(armaOrder=c(1,0),include.mean=TRUE,garchInMean=TRUE,inMeanType=2,arfima=FALSE,external.regressors=ljp)
>
>>spec=ugarchspec(variance.model=variance.model,mean.model=mean.model,
> distribution.model="norm")
>>fit3.sh=ugarchfit(data=shl,spec=spec,out.sample=0,solver="solnp")
>
> But then I figure out that in normal GJR model, the fomula is
> and the function written in rgarch package is also based on it
> which means it catches news from domestic market.
>
> But in my model, it should catch news from counterpart market,
> I was thinking of taking S part as an another external regressors
> since if ?<0,S=1 elseS=0,so I write codes as
>
>>resjp[resjp>0]<-0
>
>>voljpgjr<-resjp^2
>
>>variance.model3sh=list(model="fGARCH",garchOrder=c(1,1),
> submodel="GARCH", external.regressors=cbind(lagvoljp,voljpgjr))
>
>>mean.model3sh=list(armaOrder=c(1,0),include.mean=TRUE,garchInMean=TRUE,inMeanType=2,arfima=FALSE,external.regressors=lagsh)
>
>>spec3sh=ugarchspec(variance.model=variance.model3sh,mean.model=mean.model3sh,
> distribution.model="norm")
>
>>fit3.sh=ugarchfit(data=shl,spec=spec3sh,out.sample=0,solver="solnp")
>
>>fit3.sh
>
>
> But the result is still disappointed that the coefficient which reflect
> volatility spillover effect is always not significant and almost 0. I
> tried other dataset, but the result is the same.
>
>
> Here is my question,
> How could i change the code to let the S reflects the effect from
> counterpart market? Are there any codes I write have problems and
> un-reasonable part?
>
> Thisi is important for me!
> Thank you so much!
>
> Sincerely,
> Zoe
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jeffrey.ryan at lemnica.com  Tue Aug  2 18:06:12 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Tue, 2 Aug 2011 11:06:12 -0500
Subject: [R-SIG-Finance] =?utf-8?b?QWJvdXQgQVLvvIgx77yJLUdKUi1HQVJDSCgx?=
	=?utf-8?b?LDEpIE1PREVM?=
In-Reply-To: <4E381F6B.8000809@4dscape.com>
References: <CAMsW=qSY83_DwLpS1Siajue4Svo9W-GL5C1-5WSvbmYg_gdBhQ@mail.gmail.com>
	<4E381F6B.8000809@4dscape.com>
Message-ID: <CABDUZc82cBP4tetZxXK1=oRG+PEd0B+5DhNhQr-UFkO+Wd8TEw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110802/c2154621/attachment.pl>

From noahsilverman at ucla.edu  Tue Aug  2 19:11:19 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Tue, 2 Aug 2011 10:11:19 -0700
Subject: [R-SIG-Finance] Mean of ticks within a bar??
Message-ID: <CFB977CD-2E60-4CE7-BCAE-C125FBAD9968@ucla.edu>

Hello,

I'm looking at the functionality of XTS for converting a series of ticks to a bar  (1 minute, 5 minutes, 15 minutes, etc.)

Once feature that doesn't appear to be present is the mean of the values within a bar.  While the OHLC values are very useful, there is need for the mean across all the ticks within that bar.

Does anybody have any suggestions on how to accomplish this easily?

Thanks!

--
Noah Silverman
UCLA Department of Statistics
8117 Math Sciences Building
Los Angeles, CA 90095


From gsee000 at gmail.com  Tue Aug  2 19:17:21 2011
From: gsee000 at gmail.com (G See)
Date: Tue, 2 Aug 2011 12:17:21 -0500
Subject: [R-SIG-Finance] Mean of ticks within a bar??
In-Reply-To: <CFB977CD-2E60-4CE7-BCAE-C125FBAD9968@ucla.edu>
References: <CFB977CD-2E60-4CE7-BCAE-C125FBAD9968@ucla.edu>
Message-ID: <CA+xi=qatvgQmKj2+J-v-PgYiHXhG90bb0aavQHqjpWW9uRYYaA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110802/e48599be/attachment.pl>

From ustaudinger at gmail.com  Tue Aug  2 19:18:02 2011
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Tue, 2 Aug 2011 19:18:02 +0200
Subject: [R-SIG-Finance] Mean of ticks within a bar??
Message-ID: <CAMrz3D2j7HeivWdA6VpbaeymaVZnDe+y8uw+NO_4Ue0t+_VwcA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110802/20c2bb4f/attachment.pl>

From brian at braverock.com  Tue Aug  2 19:29:07 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 02 Aug 2011 12:29:07 -0500
Subject: [R-SIG-Finance] Mean of ticks within a bar??
In-Reply-To: <CAMrz3D2j7HeivWdA6VpbaeymaVZnDe+y8uw+NO_4Ue0t+_VwcA@mail.gmail.com>
References: <CAMrz3D2j7HeivWdA6VpbaeymaVZnDe+y8uw+NO_4Ue0t+_VwcA@mail.gmail.com>
Message-ID: <1312306147.2788.7.camel@brian-rcg>


On Tue, 2011-08-02 at 19:18 +0200, Ulrich Staudinger wrote:
> Hi Noah,
> 
> While I can't help you on the mean, I would like to use the opportunity to
> raise a request for support to track when the high and the low occurred in a
> bar, something like highTime and lowTime.

As with Garrett's earlier reply for the mean, period.apply may be used
to get the index of the value that made the high or low.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From jeffrey.ryan at lemnica.com  Tue Aug  2 19:36:23 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Tue, 2 Aug 2011 12:36:23 -0500
Subject: [R-SIG-Finance] Mean of ticks within a bar??
In-Reply-To: <1312306147.2788.7.camel@brian-rcg>
References: <CAMrz3D2j7HeivWdA6VpbaeymaVZnDe+y8uw+NO_4Ue0t+_VwcA@mail.gmail.com>
	<1312306147.2788.7.camel@brian-rcg>
Message-ID: <CABDUZc9A6ADc4q8vkEMzzAkFCLPzH_t5On0JcQvto3HpyFVjaw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110802/391706c9/attachment.pl>

From gsee000 at gmail.com  Tue Aug  2 19:42:51 2011
From: gsee000 at gmail.com (G See)
Date: Tue, 2 Aug 2011 12:42:51 -0500
Subject: [R-SIG-Finance] Mean of ticks within a bar??
In-Reply-To: <1312306147.2788.7.camel@brian-rcg>
References: <CAMrz3D2j7HeivWdA6VpbaeymaVZnDe+y8uw+NO_4Ue0t+_VwcA@mail.gmail.com>
	<1312306147.2788.7.camel@brian-rcg>
Message-ID: <CA+xi=qa7Xiz4iGFuxN_BXNiFhyHH5A0UHDT2ESPFwiQ34EzZcA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110802/70639b5e/attachment.pl>

From jeffrey.ryan at lemnica.com  Tue Aug  2 19:57:23 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Tue, 2 Aug 2011 12:57:23 -0500
Subject: [R-SIG-Finance] Mean of ticks within a bar??
In-Reply-To: <CA+xi=qa7Xiz4iGFuxN_BXNiFhyHH5A0UHDT2ESPFwiQ34EzZcA@mail.gmail.com>
References: <CAMrz3D2j7HeivWdA6VpbaeymaVZnDe+y8uw+NO_4Ue0t+_VwcA@mail.gmail.com>
	<1312306147.2788.7.camel@brian-rcg>
	<CA+xi=qa7Xiz4iGFuxN_BXNiFhyHH5A0UHDT2ESPFwiQ34EzZcA@mail.gmail.com>
Message-ID: <CABDUZc8RkLmFgXhsHPWesyhZ_3bJUGU8b+JQTepdnJ42vE7ymw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110802/71f1ea59/attachment.pl>

From benhurh at gmail.com  Tue Aug  2 22:39:06 2011
From: benhurh at gmail.com (Ben Hurh)
Date: Tue, 2 Aug 2011 13:39:06 -0700 (PDT)
Subject: [R-SIG-Finance] RBloomberg update on "Error in dimnames(x) <-
 dn : 'dimnames' applied to non-array"
In-Reply-To: <1311090762818-3678480.post@n4.nabble.com>
References: <CAJOva6FDMY9ik=QT4MZ+z53Urcbg=+p1Hk0OJOXUMJ6aaBJTEg@mail.gmail.com>
	<1311090762818-3678480.post@n4.nabble.com>
Message-ID: <1312317546620-3713680.post@n4.nabble.com>

Hello, 

I also had trouble getting RBloomberg to work, so I tried several different
versions of R. This was the winnign combination:
*
R 2.12.2 (from CRAN)
rJava 0.8-8 (simple install.packages("rJava") once R 2.12.2 is
installed/running)
RBloomberg (from findata)*

Now,

/My Question:/  Does anyone know of any other methods of input for
securities? I am working mostly with bonds, and there are a few
inconsistencies, for example:

bdp(bb,"AES 8 10/15/17 Corp", "RTG MOODY")

^call for AES bond with 8% coupon and 10/15/17 maturity works, however:

bdp(bb,"AES 9 3/4 04/15/16 Corp", "RTG MOODY")

^call for AES bond with 9.75 % coup with 04/15/16 maturity does not work,
while:

bdp(bb,"AES 9 3/404/15/16 Corp", "RTG MOODY")

^call for same bond--but with no space between coupon and maturity--works. 

-----
Ben
--
View this message in context: http://r.789695.n4.nabble.com/RBloomberg-update-on-Error-in-dimnames-x-dn-dimnames-applied-to-non-array-tp3660756p3713680.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From burkett at uri.edu  Wed Aug  3 00:16:37 2011
From: burkett at uri.edu (John P. Burkett)
Date: Tue, 02 Aug 2011 18:16:37 -0400
Subject: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
In-Reply-To: <4E37B289.8000106@burns-stat.com>
References: <4E36D8E9.1050303@uri.edu>
	<BB1C9775C0154368922643D948270A09@EnricosPC>
	<4E37159B.8080209@uri.edu> <4E371BD6.7000506@4dscape.com>
	<4E375FFA.3000803@uri.edu> <4E37B289.8000106@burns-stat.com>
Message-ID: <4E387745.9060607@uri.edu>

Patrick Burns wrote:
> Another alternative to get the budget
> constraint is to let the optimizer see
> unconstrained solutions but then scale
> the weights before evaluating the utility.
> 
> This has the possibility of confusing some
> optimizers, but can work pretty well.

Thank you, Patrick, for this suggestion.  I tried implementing it in 
DEoptim by writing the function to be minimized as shown below.  This 
code is intended to handle a long-only portfolio of 31 assets.  The 
variable x is meant to be a vector representing the shares of the assets 
in the portfolio. The Data matrix has dimensions 20x31. Each row 
corresponds a time period (six months for all but the first period, 
which is only four months long).  Each column corresponds to an asset. 
The elements of the matrix are gross returns. (The gross returns for the 
short first period are raised to the 3/2 power to make them comparable 
to those for the other periods.)  My attempt to rescale the variables to 
assure that they add up to one can be found 5 lines from the bottom of 
the code below.

Neu31<- function(x){
x1 <- x[1]
x2 <- x[2]
x3 <- x[3]
x4 <- x[4]
x5 <- x[5]
x6 <- x[6]
x7 <- x[7]
x8 <- x[8]
x9 <- x[9]
x10 <- x[10]
x11 <- x[11]
x12 <- x[12]
x13 <- x[13]
x14 <- x[14]
x15 <- x[15]
x16 <- x[16]
x17 <- x[17]
x18 <- x[18]
x19 <- x[19]
x20 <- x[20]
x21 <- x[21]
x22 <- x[22]
x23 <- x[23]
x24 <- x[24]
x25 <- x[25]
x26 <- x[26]
x27 <- x[27]
x28 <- x[28]
x29 <- x[29]
x30 <- x[30]
x31 <- x[31]
if (sum(x) == 0) {x <- x + 1e-2}
x = x/sum(x)
grp <- Data%*%x
  u <- grp/(.5 + grp)
objfun <- -sum(u)/nr
return(objfun)
}

To create initial shares summing to one, I used the following code:
npar = 31
NP = 10*npar
rum <- matrix(runif(npar*NP), ncol=npar, nrow=NP)
rowsums <- rowSums(rum)
ip <- rum/rowsums

Finally I invoked DEoptim as follows:
out <- DEoptim(Neu31, lower, upper, control=list(NP=NP, initial=ip, 
itermax=5000, F=.8))

That started the iterations, which progressed plausibly until getting 
stuck at iteration 4055.  At that point my computer became unresponsive 
and remained so until I rebooted.

Any suggestions for improving the code to obtain convergence would be 
greatly appreciated.

Best regards,
John





> 
> On 02/08/2011 03:24, John P. Burkett wrote:
>> alexios wrote:
>>> I've found the cmaes (Covariance Matrix Adapting Evolutionary
>>> Strategy) solver on CRAN to be quite robust to some nonconvex portfolio
>>> problems which required a global optimizer. Like other such global
>>> solvers which do not accept explicit constraint functions, you would
>>> need to create a sort of penalty barrier function i.e
>>>
>>> -obj(x) + 100*(1-sum(x))^2
>>>
>> Alexios,
>> Thank you for your suggestions. CMAES looks promising for some
>> applications. However, for maximizing expected utility or minimizing -1*
>> (expected utility), detection of CMAES convergence could be tricky. The
>> reference manual, in the section on the cma_es function, states that "no
>> sophisticated convergence detection is included" (p. 3) If the user
>> specifies a value for stopfitness, the computation will halt once the
>> objective function value "is smaller than or equal to stopfitness" (p.
>> 3). "This is the only way for CMA-ES to 'converge'" (p. 3). If we knew
>> the minimum attainable value for -1*(expected utility), we could specify
>> stopfitness as a number slightly greater than that value. Unfortunately,
>> in portfolio optimization problems we seldom know the minimum attainable
>> value of -1*(expected utility) until we have found the optimal portfolio.
>>
>>
>>> For state of the art global solvers you'll probably need to look
>>> outside R to a commercial implementation or try submitting your
>>> problem to the NEOS server
>>> (http://www.neos-server.org/neos/solvers/index.html...see in
>>> particular the Branch and Bound type solver BARON).
>> Thanks for drawing my attention to BARON. It looks good; when I've
>> learned enough about GAMS format, I'll give it a try.
>>
>> Best regards,
>> John
>>
>>
>>
>>
>>>
>>> Regards,
>>>
>>> Alexios
>>>
>>> On 01/08/2011 22:07, John P. Burkett wrote:
>>>> Enrico Schumann wrote:
>>>>> what kind of "difficulty" did you encounter? If you would give more
>>>>> details
>>>>> on what you tried, and how, then people should be better able to help
>>>>> you.
>>>> Thank you, Enrico, for your prompt and helpful response. Focusing on
>>>> Sharpe's algorithm, I originally omitted specifics about difficulties I
>>>> have encountered with packages based on other algorithms. However, in
>>>> case it is of interest, I will now outline my project and difficulties.
>>>> I have about 120 monthly observations on gross real returns for 
>>>> about 30
>>>> assets. [Trying to mitigate estimation error, I've shrunk observed
>>>> returns toward a common value as proposed by Philippe Jorion,
>>>> "Bayes-Stein Estimation for Portfolio Analysis",
>>>> Journal of Financial and Quantitative Analysis, v. 21, n. 3 (Sept.,
>>>> 1986), pp. 279-92.] I initially specified the utility function as U =
>>>> R/(0.5 + R) where R is R is the gross return on a portfolio and
>>>> specified long-only constraints. The restriction that portfolio shares
>>>> sum to 1 is handled by specifying n-1 variables (where n is the nubmer
>>>> of assets) and making the share asset n be 1 minus the sum of other
>>>> shares. If I apply DEoptim to a sufficiently small subset of the 
>>>> assets,
>>>> it converges and selects a plausible portfolio. Yet if I ask DEoptim to
>>>> analyze as many as 30 assets, it fails to converge in any number of
>>>> iterations that I've tried. Given the same problem, Rgenoud converged
>>>> after 44 hours (more than 2 million generation, if memory serves). I
>>>> subsequently tried changing the utility function to ln(R) and asking
>>>> Rgenoud to maximize that. Thus far it has run for over 1.5 million
>>>> generations without converging. The portfolio shares have barely 
>>>> changed
>>>> over many recent generations. Perhaps I could just relax the default
>>>> convergence criteria and declare the problem solved for practical
>>>> purposes. However, that might result in mistaking a local for a global
>>>> maximum. These experiences may just indicate that a 30 asset portfolio
>>>> is hard to optimize using general purpose algorithms. Kris Boudt et al.
>>>> note that "portfolio problems encountered in practice may require days
>>>> to optimize on a personal computer" ("Large-scale portfolio 
>>>> optimization
>>>> with DEoptim," p. 1). These experiences motivated my interest in trying
>>>> an algorithm, such as that of Sharpe, designed specifically for
>>>> portfolio optimization.
>>>>
>>>>> I don't know the paper you mentioned, but I know a paper of W.
>>>>> Sharpe in
>>>>> which he suggests to do repeated zero-sum changes to the portfolio,
>>>>> like
>>>>> "increase one asset by x%, and decrease another one by x%". If that is
>>>>> what
>>>>> you mean, this can be done with a local search.
>>>> The algorithm you describe sounds very much like that covered in the
>>>> articles I cited in my previous note. It's probably the same algorithm.
>>>>
>>>> (But actually, other
>>>>> functions like DEoptim should work just as well. The DEoptim package
>>>>> even
>>>>> comes with a vignette that adresses portfolio optimisation.)
>>>> Perhaps I should just be more patient with DEoptim or buy a faster
>>>> computer!
>>>>
>>>>> An example for a local search procedure is given in one of the
>>>>> vignettes of
>>>>> the NMOF package (which is available from
>>>>> https://r-forge.r-project.org/R/?group_id=1128 ), even though I am not
>>>>> sure
>>>>> how self-explanatory the vignette is.
>>>> Thank you for the NMOF reference. I've printed "Examples and Extensions
>>>> for the NMOF package" and tried the command
>>>> install.packages("NMOF", repos = "http://R-Forge.R-project.org")
>>>> That command elicited the following messages:
>>>> Warning in install.packages("NMOF", repos =
>>>> "http://R-Forge.R-project.org") :
>>>> argument 'lib' is missing: using
>>>> '/home/john/R/i486-pc-linux-gnu-library/2.8'
>>>> trying URL 
>>>> 'http://R-Forge.R-project.org/src/contrib/NMOF_0.14-2.tar.gz'
>>>> Content type 'application/x-gzip' length 1352123 bytes (1.3 Mb)
>>>> opened URL
>>>> ==================================================
>>>> downloaded 1.3 Mb
>>>>
>>>> * Installing *source* package 'NMOF' ...
>>>> ** R
>>>> ** data
>>>> ** moving datasets to lazyload DB
>>>> ** inst
>>>> ** preparing package for lazy loading
>>>> ** help
>>>> >>> Building/Updating help pages for package 'NMOF'
>>>> Formats: text html latex example
>>>> DEopt text html latex example
>>>> EuropeanCall text html latex example
>>>> GAopt text html latex example
>>>> LSopt text html latex example
>>>> MA text html latex example
>>>> NMOF-package text html latex example
>>>> NS text html latex example
>>>> NSf text html latex example
>>>> PSopt text html latex example
>>>> TAopt text html latex example
>>>> bundData text html latex example
>>>> callHestoncf text html latex example
>>>> fundData text html latex example
>>>> gridSearch text html latex example
>>>> qTable text html latex example
>>>>
>>>> ERROR in file 'repairMatrix.Rd': Environment (text enclosed in {}) 
>>>> found
>>>> in \title{...}.
>>>> The title must be plain text!
>>>>
>>>> ERROR: building help failed for package 'NMOF'
>>>> ** Removing '/home/john/R/i486-pc-linux-gnu-library/2.8/NMOF'
>>>>
>>>> The downloaded packages are in
>>>> /tmp/RtmpNAuDvf/downloaded_packages
>>>> Warning message:
>>>> In install.packages("NMOF", repos = "http://R-Forge.R-project.org") :
>>>> installation of package 'NMOF' had non-zero exit status
>>>>
>>>> ***************************************
>>>>
>>>> Any suggestions for how to successfully install NMOF would be greatly
>>>> appreciated.
>>>>
>>>> Best regards,
>>>> John
>>>>
>>>>
>>>>
>>>>>
>>>>>
>>>>> Regards,
>>>>> Enrico
>>>>>
>>>>>
>>>>>
>>>>>> -----Urspr?ngliche Nachricht-----
>>>>>> Von: r-sig-finance-bounces at r-project.org
>>>>>> [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag von John P.
>>>>>> Burkett
>>>>>> Gesendet: Montag, 1. August 2011 18:49
>>>>>> An: R-SIG-Finance at r-project.org
>>>>>> Betreff: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
>>>>>>
>>>>>> An attractive sounding algorithm for maximizing the expected utility
>>>>>> of of a portfolio was proposed by William F. Sharpe in "An algorithm
>>>>>> for portfolio improvement," Advances in Mathematical Programming and
>>>>>> Financial Planning, 1987, pp. 155-170 and summarized by the same
>>>>>> author in "Expected utility asset allocation," Financial Analysts
>>>>>> Journal, vol. 63, no. 5 (Sep.-Oct., 2007), pp. 18-30.
>>>>>>
>>>>>> Has this algorithm been implemented in R?
>>>>>>
>>>>>> If not, is there a substitute that is likely to work well for a
>>>>>> user-specified concave utility function? I've tried optim, DEoptim,
>>>>>> and Rgenoud but encountered difficulty in getting them to converge
>>>>>> for a long-only portfolio of around 30 assets.
>>>>>>
>>>>>> Best regards,
>>>>>> John
>>>>>>
>>>>>> -- 
>>>>>> John P. Burkett
>>>>>> Department of Economics
>>>>>> University of Rhode Island
>>>>>> Kingston, RI 02881-0808
>>>>>> USA
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-SIG-Finance at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>>> -- Also note that this is not the r-help list where general R
>>>>>> questions should go.
>>>>>
>>>>>
>>>>
>>>>
>>>
>>>
>>
>>
> 


-- 
John P. Burkett
Department of Economics
University of Rhode Island
Kingston, RI 02881-0808
USA

phone (401) 874-9195


From john.laing at gmail.com  Wed Aug  3 03:17:30 2011
From: john.laing at gmail.com (John Laing)
Date: Tue, 2 Aug 2011 21:17:30 -0400
Subject: [R-SIG-Finance] RBloomberg update on "Error in dimnames(x) <-
 dn : 'dimnames' applied to non-array"
In-Reply-To: <1312317546620-3713680.post@n4.nabble.com>
References: <CAJOva6FDMY9ik=QT4MZ+z53Urcbg=+p1Hk0OJOXUMJ6aaBJTEg@mail.gmail.com>
	<1311090762818-3678480.post@n4.nabble.com>
	<1312317546620-3713680.post@n4.nabble.com>
Message-ID: <CAA3Wa=uzf2KOygoO4XAgeWLJjsJsSQw6JgfoJg6RQ2QTNFkSUA@mail.gmail.com>

Ben,

Bloomberg can sometimes be very picky about strange things. Can you
use CUSIPs to look up your bonds? The call would look like this:

bdp(bb, "12345ABC6 Corp", "RTG MOODY")

Hope that helps,
John

On Tue, Aug 2, 2011 at 4:39 PM, Ben Hurh <benhurh at gmail.com> wrote:
>
> Hello,
>
> I also had trouble getting RBloomberg to work, so I tried several different
> versions of R. This was the winnign combination:
> *
> R 2.12.2 (from CRAN)
> rJava 0.8-8 (simple install.packages("rJava") once R 2.12.2 is
> installed/running)
> RBloomberg (from findata)*
>
> Now,
>
> /My Question:/ ?Does anyone know of any other methods of input for
> securities? I am working mostly with bonds, and there are a few
> inconsistencies, for example:
>
> bdp(bb,"AES 8 10/15/17 Corp", "RTG MOODY")
>
> ^call for AES bond with 8% coupon and 10/15/17 maturity works, however:
>
> bdp(bb,"AES 9 3/4 04/15/16 Corp", "RTG MOODY")
>
> ^call for AES bond with 9.75 % coup with 04/15/16 maturity does not work,
> while:
>
> bdp(bb,"AES 9 3/404/15/16 Corp", "RTG MOODY")
>
> ^call for same bond--but with no space between coupon and maturity--works.
>
> -----
> Ben
> --
> View this message in context: http://r.789695.n4.nabble.com/RBloomberg-update-on-Error-in-dimnames-x-dn-dimnames-applied-to-non-array-tp3660756p3713680.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From 1987.zhangxi at gmail.com  Wed Aug  3 06:46:50 2011
From: 1987.zhangxi at gmail.com (zoe_zhang)
Date: Tue, 2 Aug 2011 21:46:50 -0700 (PDT)
Subject: [R-SIG-Finance] How to use BEKK to estimate asymmetric GARCH Model
Message-ID: <1312346810869-3714445.post@n4.nabble.com>

Dear ALL,
Sorry to bother again.
I am looking at mgarchBEKK and mgarch package and according to the
introduction, the usage is 

mvBEKK.est(eps, order = c(1,1), params = NULL, fixed = NULL, method =
"BFGS", verbose = F)

if I just use codes >mvBEKK.est(eps), it just comes out with symmetric model
estimation.

However I am wondering if I want to do asymmetric BEKK Garch, where should I
incorporate corresponding codes?

any help would be appreciate!

Best Regards,
Zoe

--
View this message in context: http://r.789695.n4.nabble.com/How-to-use-BEKK-to-estimate-asymmetric-GARCH-Model-tp3714445p3714445.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From burkett at uri.edu  Wed Aug  3 18:36:11 2011
From: burkett at uri.edu (John P. Burkett)
Date: Wed, 03 Aug 2011 12:36:11 -0400
Subject: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
In-Reply-To: <A1F2452BE5714E69BE45FDB9310CDAB0@EnricosPC>
References: <4E36D8E9.1050303@uri.edu>
	<BB1C9775C0154368922643D948270A09@EnricosPC>
	<4E37159B.8080209@uri.edu>
	<5FC25401231047EA936D129F8213574B@EnricosPC>
	<1312288613.18828.112.camel@brian-rcg>
	<A1F2452BE5714E69BE45FDB9310CDAB0@EnricosPC>
Message-ID: <4E3978FB.3080504@uri.edu>

Enrico Schumann wrote:

> But you can also directly use the constraint in the creation of the new
> solutions, which is what Sharpe suggested (and what works quite well, and
> not just for smooth functions/constraints): if you only add zero-sum changes
> to a feasible portfolio, it will remain feasible with respect to the budget
> constraint. If you want min/max-holding sizes, choose asset weights such
> that the min/max-constraints remain unviolated. This is straightforward in
> methods like Simulated Annealing/Threshold Accepting, but somewhat more
> difficult in 'DE'. (Which does not mean that 'DE' is not as good as the
> other methods, just that the efficient approaches possibly differ, depending
> on the method.)

Thanks, Enrico.  I'm interested in using the adding-up constraint in the 
creation of new solutions, via methods such as simulated annealing or 
threshold accepting.  I imagine that the DMOF package is useful for 
implementing that approach.  Are there also other packages that I should 
consider?

Best regards,
John

-- 
John P. Burkett
Department of Economics
University of Rhode Island
Kingston, RI 02881-0808
USA

phone (401) 874-9195


From benhurh at gmail.com  Wed Aug  3 18:46:36 2011
From: benhurh at gmail.com (Ben Hurh)
Date: Wed, 3 Aug 2011 11:46:36 -0500
Subject: [R-SIG-Finance] RBloomberg update on "Error in dimnames(x) <-
 dn : 'dimnames' applied to non-array"
In-Reply-To: <CAA3Wa=uzf2KOygoO4XAgeWLJjsJsSQw6JgfoJg6RQ2QTNFkSUA@mail.gmail.com>
References: <CAJOva6FDMY9ik=QT4MZ+z53Urcbg=+p1Hk0OJOXUMJ6aaBJTEg@mail.gmail.com>
	<1311090762818-3678480.post@n4.nabble.com>
	<1312317546620-3713680.post@n4.nabble.com>
	<CAA3Wa=uzf2KOygoO4XAgeWLJjsJsSQw6JgfoJg6RQ2QTNFkSUA@mail.gmail.com>
Message-ID: <CADunhEUtpHtApWxRgLudYXU7mSP-AM+Q=hnnejPX819R_YepLg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110803/cafd4efb/attachment.pl>

From enricoschumann at yahoo.de  Wed Aug  3 22:58:53 2011
From: enricoschumann at yahoo.de (Enrico Schumann)
Date: Wed, 3 Aug 2011 22:58:53 +0200
Subject: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
In-Reply-To: <4E3978FB.3080504@uri.edu>
References: <4E36D8E9.1050303@uri.edu><BB1C9775C0154368922643D948270A09@EnricosPC><4E37159B.8080209@uri.edu><5FC25401231047EA936D129F8213574B@EnricosPC><1312288613.18828.112.camel@brian-rcg><A1F2452BE5714E69BE45FDB9310CDAB0@EnricosPC>
	<4E3978FB.3080504@uri.edu>
Message-ID: <5086310A8C5342E88B8E14DDE39C0D6B@EnricosPC>

[see below]

> -----Urspr?ngliche Nachricht-----
> Von: r-sig-finance-bounces at r-project.org 
> [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag von 
> John P. Burkett
> Gesendet: Mittwoch, 3. August 2011 18:36
> An: R-SIG-Finance at r-project.org
> Betreff: Re: [R-SIG-Finance] Sharpe's algorithm for portfolio 
> improvement
> 
> Enrico Schumann wrote:
> 
> > But you can also directly use the constraint in the creation of the 
> > new solutions, which is what Sharpe suggested (and what works quite 
> > well, and not just for smooth functions/constraints): if 
> you only add 
> > zero-sum changes to a feasible portfolio, it will remain 
> feasible with 
> > respect to the budget constraint. If you want 
> min/max-holding sizes, 
> > choose asset weights such that the min/max-constraints remain 
> > unviolated. This is straightforward in methods like Simulated 
> > Annealing/Threshold Accepting, but somewhat more difficult in 'DE'. 
> > (Which does not mean that 'DE' is not as good as the other methods, 
> > just that the efficient approaches possibly differ, 
> depending on the 
> > method.)
> 
> Thanks, Enrico.  I'm interested in using the adding-up 
> constraint in the creation of new solutions, via methods such 
> as simulated annealing or threshold accepting.  I imagine 
> that the DMOF package is useful for implementing that 
> approach.  Are there also other packages that I should consider?
> 

There are many packages in R that handle optimisation, but I am not really
familiar with most if them. The task view for optimisation was already
suggested to you; you may also want to browse R-Forge/RForge.

I cannot comment on the model that you gave your other e-mail -- even
though, this objective function will essentially pick portfolios of just
very few assets with very high returns; I hope you have faith that your
return scenarios are representative of what will happen in the future.

Here is a complete example with TAopt from the NMOF package; it is mostly
copy--pasted from a package vignette. Since I don't have your data, I create
random data and put all data into one list which I later pass to the
function TAopt.

# --- #
require("NMOF")

# the neighbourhood: see the package vignette on portfolio optimisation
resample <- function(x, ...) x[sample.int(length(x), ...)] # see ?sample
neighbourU <- function(sol, data){
    wn <- sol$w
    toSell <- wn > data$winf
    toBuy  <- wn < data$wsup
    i <- resample(which(toSell), size = 1L)
    j <- resample(which(toBuy), size = 1L)
    eps <- runif(1) * data$eps
    eps <- min(wn[i] - data$winf, data$wsup - wn[j], eps)
    wn[i] <- wn[i] - eps
    wn[j] <- wn[j] + eps
    Rw <- sol$Rw + data$R[,c(i,j)] %*% c(-eps,eps)
    list(w = wn, Rw = Rw)
}

# random data
na <- 31L   # number of assets
nr <- 20L   # number of return obs
randomData <- rnorm(nr*na)*0.01  # random data: a plain matrix ;)
dim(randomData) <- c(nr, na)

# collect all in 'data': eps is stepsize for TA, winf/wsup are min/max
holding sizes

data <- list(R = randomData, na = na, nr = nr,  eps = 0.5/100, winf = 0,
wsup = 1)

# --- #

The neighbourhood may look a bit complicated, but it uses the following
fact: in a given iteration, your objective function can be split into two
pieces: first, you compute portfolio returns Rw <- Data %*% w; then you
compute your actual objective for these returns, say, fun(Rw). The
multiplication will typically take much of the computing time (in particular
if the actual objective is quite cheap); see the following test. But the
neighbourhood function changes only two weights: increase one, decrease one.
So you can update the multiplication. In your case, this may not make much
difference >> but try with 100 or more return observations

Thus, the representation of a solution is a list with two components: the
weight vector w, and the return associated with this portfolio Rw (ie, Rw <-
Data %*% w). In the objective function, you can compute anything from sol$w
and sol$Rw.


# ---
# create a feasible random solution 
w0 <- runif(data$na); w0 <- w0/sum(w0)
x0 <- list(w = w0, Rw = randomData %*% w0)
system.time(for (i in 1:100000) Rw <- randomData %*% w0)
system.time(for (i in 1:100000) ignore <- sum(Rw/(0.5 + Rw)))

# test the neighbourhood
x1 <- neighbourU(x0, data)
all.equal(data$R %*% x1$w, x1$Rw)
barplot(x0$w - x1$w)  # difference between x0 and x1

# the objective function
Neu31 <- function(sol, data){
  u <- sol$Rw/(0.5 + sol$Rw)
  objfun <- -sum(u)/data$nr
  objfun
}

# ---

Your objective: I have droppped the x1, x2, ... since they do not appear to
be needed. Also, you use an object 'nr', but never pass it. R will find it
if it is in the global environment, but I like it better to pass all objects
directly or make the dependence explicit by using environments. It remains
to run the algorithm.

# ---
# settings: see ?TAopt
algo <- list(x0 = x0, neighbour = neighbourU, nS = 2000L, nT = 10L,
             nD = 1000L, q = 0.20, printBar = FALSE, printDetail = FALSE)
system.time(res <- TAopt(Neu31, algo = algo,data = data))
res$OFvalue  # the obj fun value of the solution
res$xbest$w  # the best weights
sum(res$xbest$w)  # is budget satisfied?


# TA is a stochastic method: run restarts
allRes <- restartOpt(fun=TAopt, OF = Neu31, n = 20L, algo = algo, data =
data)
allF <- sapply(allRes, `[[`, "OFvalue")      # realised objective functions
allw <- sapply(allRes,`[[`, c("xbest","w"))  # weights



hope that helps,
Enrico







> Best regards,
> John
> 
> --
> John P. Burkett
> Department of Economics
> University of Rhode Island
> Kingston, RI 02881-0808
> USA
> 
> phone (401) 874-9195
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R 
> questions should go.


From daniel.krizian at gmail.com  Thu Aug  4 23:28:11 2011
From: daniel.krizian at gmail.com (Daniel Krizian)
Date: Thu, 4 Aug 2011 23:28:11 +0200
Subject: [R-SIG-Finance] label in add.indicator not accepted (quantstrat)
In-Reply-To: <1312208054.18828.52.camel@brian-rcg>
References: <CALqbvp4UYv_aar3ShuF6kLK9ZTRT-vx-4UjbnWOPXqijzJ+f8w@mail.gmail.com>
	<1312208054.18828.52.camel@brian-rcg>
Message-ID: <CALqbvp4=c2B9dSGjuPAmDRCDbnq2GhfUH8wtxvrFyh_Lfkm7Bg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110804/48dc253f/attachment.pl>

From brian at braverock.com  Fri Aug  5 16:20:40 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 05 Aug 2011 09:20:40 -0500
Subject: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
In-Reply-To: <4E3767A4.6060004@uri.edu>
References: <4E36D8E9.1050303@uri.edu>
	<BB1C9775C0154368922643D948270A09@EnricosPC> <4E37159B.8080209@uri.edu>
	<1312234589.18828.87.camel@brian-rcg>  <4E3767A4.6060004@uri.edu>
Message-ID: <1312554040.2788.149.camel@brian-rcg>

Just to round out this thread on-list, I've attached a script for the
problem as described by Prof. Burkett that uses the Munger and Arrow
bounded utility function to construct a portfolio via PortfolioAnalytics
using both random portfolios and DEoptim as alternate optimization
engines.

I've modified the script to use the 'edhec' data series included with
PerformanceAnalytics for reproducibility.

As Enrico noted in an earlier post, this utility function tends towards
creating very concentrated portfolios in only a small number of assets.

Regards,

   - Brian


On Mon, 2011-08-01 at 22:57 -0400, John P. Burkett wrote:
> Brian G. Peterson wrote:
> > On Mon, 2011-08-01 at 17:07 -0400, John P. Burkett wrote:
> >> Enrico Schumann wrote:
> >>> what kind of "difficulty" did you encounter? If you would give more details
> >>> on what you tried, and how, then people should be better able to help you. 
> >> Thank you, Enrico, for your prompt and helpful response.  Focusing on 
> >> Sharpe's algorithm, I originally omitted specifics about difficulties I 
> >> have encountered with packages based on other algorithms.  However, in 
> >> case it is of interest, I will now outline my project and difficulties. 
> >>      I have about 120 monthly observations on gross real returns for 
> >> about 30 assets. [Trying to mitigate estimation error, I've shrunk 
> >> observed returns toward a common value as proposed by Philippe Jorion, 
> >> "Bayes-Stein Estimation for Portfolio Analysis",
> >> Journal of Financial and Quantitative Analysis, v. 21, n. 3 (Sept., 
> >> 1986), pp. 279-92.]   I initially specified the utility function as U = 
> >> R/(0.5 + R) where R is R is the gross return on a portfolio and 
> >> specified long-only constraints. The restriction that portfolio shares 
> >> sum to 1 is handled by specifying n-1 variables (where n is the nubmer 
> >> of assets) and making the share asset n be 1 minus the sum of other 
> >> shares. If I apply DEoptim to a sufficiently small subset of the assets, 
> >> it converges and  selects a plausible portfolio.  Yet if I ask DEoptim 
> >> to analyze as many as 30 assets, it fails to converge in any number of 
> >> iterations that I've tried.  Given the same problem, Rgenoud converged 
> >> after 44 hours (more than 2 million generation, if memory serves).  I 
> >> subsequently tried changing the utility function to ln(R) and asking 
> >> Rgenoud to maximize that.  Thus far it has run for over 1.5 million 
> >> generations without converging.  The portfolio shares have barely 
> >> changed over many recent generations.  Perhaps I could just relax the 
> >> default convergence criteria and declare the problem solved for 
> >> practical purposes.  However, that might result in mistaking a local for 
> >> a global maximum.  These experiences may just indicate that a 30 asset 
> >> portfolio is hard to optimize using general purpose algorithms. Kris 
> >> Boudt et al. note that "portfolio problems encountered in practice may 
> >> require days to optimize on a personal computer" ("Large-scale portfolio 
> >> optimization with DEoptim," p. 1). These experiences motivated my 
> >> interest in trying an algorithm, such as that of Sharpe, designed 
> >> specifically for portfolio optimization.
> > 
> > As one of the authors of the paper in question, I'll note that I was
> > talking about portfolios with hundreds or thousands of assets, and/or
> > with many rebalancing periods or observations.  Monthly series of 120
> > observations each shouldn't take millions of iterations to converge.  It
> > is possible that the starting set is not feasible, given the way your
> > full investment constraint is being applied.
> > 
> Thanks, Brian.  I'll double check my code to see if it's given DEoptim 
> an impossible task.
> 
> > If your objective function is truly a smooth convex function, then
> > optim() or some other linear or conical solver should be sufficient.  If
> > the function is not smooth (and real portfolio objectives and
> > constraints rarely are), then a random portfolios or a global optimizer
> > will be required.  
> > 
> > Perhaps you should start with a couple hundred random portfolio survey
> > of your feasible space?
> > 
> > This may be accomplished in R with Pat Burns' excellent Portfolio Probe
> > (commercial non-free), or with PortfolioAnalytics (open source/free, on
> > R-Forge).
> > 
> > PortfolioAnalytics will also allow you to use DEoptim after using random
> > portfolios to get close to the global minima.  
> > 
> > See out R/Finance seminar presentation here:
> > http://www.rinfinance.com/agenda/2010/Carl+Peterson+Boudt_Tutorial.pdf
> > and the code to replicate here:
> > https://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/PortfolioAnalytics/sandbox/script.workshop2010.R?root=returnanalytics
> > PortfolioAnalytics does some of the heavy lifting to set good defaults
> > and give you a good set of starting population values to speed
> > convergence.
> > 
> > Also, Pat Burns' Portfolio Probe blog is here:
> > http://www.portfolioprobe.com/blog/
> These are very helpful leads.  I'll pursue them tomorrow morning. 
> Thanks again!
> 
> Best regards,
> John
> 
> 
> > 
> > - Brian
> > 
> >>> I don't know the paper you mentioned, but I know a paper of W. Sharpe in
> >>> which he suggests to do repeated zero-sum changes to the portfolio, like
> >>> "increase one asset by x%, and decrease another one by x%". If that is what
> >>> you mean, this can be done with a local search. 
> >> The algorithm you describe sounds very much like that covered in the 
> >> articles I cited in my previous note.  It's probably the same algorithm.
> >>
> >> (But actually, other
> >>> functions like DEoptim should work just as well. The DEoptim package even
> >>> comes with a vignette that adresses portfolio optimisation.) 
> >> Perhaps I should just be more patient with DEoptim or buy a faster computer!
> >>
> >>> An example for a local search procedure is given in one of the vignettes of
> >>> the NMOF package (which is available from
> >>> https://r-forge.r-project.org/R/?group_id=1128 ), even though I am not sure
> >>> how self-explanatory the vignette is.
> >> Thank you for the NMOF reference.  I've printed "Examples and Extensions 
> >> for the NMOF package" and tried the command
> >> install.packages("NMOF", repos = "http://R-Forge.R-project.org")
> >> That command elicited the following messages:
> >> Warning in install.packages("NMOF", repos = 
> >> "http://R-Forge.R-project.org") :
> >>    argument 'lib' is missing: using 
> >> '/home/john/R/i486-pc-linux-gnu-library/2.8'
> >> trying URL 'http://R-Forge.R-project.org/src/contrib/NMOF_0.14-2.tar.gz'
> >> Content type 'application/x-gzip' length 1352123 bytes (1.3 Mb)
> >> opened URL
> >> ==================================================
> >> downloaded 1.3 Mb
> >>
> >> * Installing *source* package 'NMOF' ...
> >> ** R
> >> ** data
> >> **  moving datasets to lazyload DB
> >> ** inst
> >> ** preparing package for lazy loading
> >> ** help
> >>   >>> Building/Updating help pages for package 'NMOF'
> >>       Formats: text html latex example
> >>    DEopt                             text    html    latex   example
> >>    EuropeanCall                      text    html    latex   example
> >>    GAopt                             text    html    latex   example
> >>    LSopt                             text    html    latex   example
> >>    MA                                text    html    latex   example
> >>    NMOF-package                      text    html    latex   example
> >>    NS                                text    html    latex   example
> >>    NSf                               text    html    latex   example
> >>    PSopt                             text    html    latex   example
> >>    TAopt                             text    html    latex   example
> >>    bundData                          text    html    latex   example
> >>    callHestoncf                      text    html    latex   example
> >>    fundData                          text    html    latex   example
> >>    gridSearch                        text    html    latex   example
> >>    qTable                            text    html    latex   example
> >>
> >> ERROR in file 'repairMatrix.Rd': Environment (text enclosed in {}) found 
> >> in \title{...}.
> >> The title must be plain text!
> >>
> >> ERROR: building help failed for package 'NMOF'
> >> ** Removing '/home/john/R/i486-pc-linux-gnu-library/2.8/NMOF'
> >>
> >> The downloaded packages are in
> >> 	/tmp/RtmpNAuDvf/downloaded_packages
> >> Warning message:
> >> In install.packages("NMOF", repos = "http://R-Forge.R-project.org") :
> >>    installation of package 'NMOF' had non-zero exit status
> >>
> >> ***************************************
> >>
> >> Any suggestions for how to successfully install NMOF would be greatly 
> >> appreciated.
> >>
> >> Best regards,
> >> John
> >>
> >>
> >>
> >>>
> >>> Regards,
> >>> Enrico
> >>>
> >>>
> >>>   
> >>>
> >>>> -----Urspr?ngliche Nachricht-----
> >>>> Von: r-sig-finance-bounces at r-project.org 
> >>>> [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag von 
> >>>> John P. Burkett
> >>>> Gesendet: Montag, 1. August 2011 18:49
> >>>> An: R-SIG-Finance at r-project.org
> >>>> Betreff: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
> >>>>
> >>>> An attractive sounding algorithm for maximizing the expected 
> >>>> utility of of a portfolio was proposed by William F. Sharpe 
> >>>> in "An algorithm for portfolio improvement," Advances in 
> >>>> Mathematical Programming and Financial Planning, 1987, pp. 
> >>>> 155-170 and summarized by the same author in "Expected 
> >>>> utility asset allocation," Financial Analysts Journal, vol. 
> >>>> 63, no. 5 (Sep.-Oct., 2007), pp. 18-30.
> >>>>
> >>>> Has this algorithm been implemented in R?
> >>>>
> >>>> If not, is there a substitute that is likely to work well for 
> >>>> a user-specified concave utility function?  I've tried optim, 
> >>>> DEoptim, and Rgenoud but encountered difficulty in getting 
> >>>> them to converge for a long-only portfolio of around 30 assets.
> >>>>
> >>>> Best regards,
> >>>> John
> >>>>
> >>>> --
> >>>> John P. Burkett
> >>>> Department of Economics
> >>>> University of Rhode Island
> >>>> Kingston, RI 02881-0808
> >>>> USA
> >>>>
> > 
> > 
> > 
> 
> 
> -- 
> John P. Burkett
> Department of Economics
> University of Rhode Island
> Kingston, RI 02881-0808
> USA
> 
> phone (401) 874-9195
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock
-------------- next part --------------
require(PortfolioAnalytics)
#load('grossReturns20by31.rda')
#head(Data)
#returns<-xts(Data,order.by=seq.Date(from=as.Date('2000-01-01'),by='6 months',length.out=20))
#head(returns)
data(edhec)
returns<-edhec
#create our internal objective function, Portfolioanalytics has 'special' handling for parameters called 'weights' and 'R'(eturns), so we'll use those
boundedU <- function(weights,R){
   gr <- R %*% weights
   u <- gr/(.5 + gr) #calculate Munger and Arrow utility
   obj <- -(sum(u)/length(gr))
   obj
}

#create a constraint object for PortfolioAnalytics
Util_constr<-constraint(assets=colnames(returns),
   min=.01,
   max=.7,
   min_sum=0.99, # minimum sum of weights must be equal to 1-ish
   max_sum=1.01, # maximum sum must also be about 1
   weight_seq = generatesequence() # possible weights for random or brute force portfolios
)
# add mean return and sd objectives so we can chart
Util_constr <- add.objective(constraints=Util_constr,
   type="return",
   name='mean',
   enabled=FALSE,
   multiplier=-1 # to maximize this objective using a minimizer
)
Util_constr <- add.objective(constraints=Util_constr,
   type="return",
   name='boundedU',
   enabled=TRUE,
   multiplier=1000 # move the decimal point for increased accuracy
)
Util_constr <- add.objective(constraints=Util_constr,
   type="risk",
   name="sd",
   enabled=FALSE
)

rndResult<-optimize.portfolio(R=returns,constraints=Util_constr,optimize_method='random',search_size=1000,trace=TRUE, verbose=TRUE)
rndResult$weights
rndResult$objective_measures
DEResult<-optimize.portfolio(R=returns,constraints=Util_constr,optimize_method='DEoptim',search_size=10000,trace=TRUE, verbose=FALSE)
DEResult$weights
DEResult$objective_measures

From brian at braverock.com  Mon Aug  8 01:41:12 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 07 Aug 2011 18:41:12 -0500
Subject: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
In-Reply-To: <4E3DBDDE.1040001@uri.edu>
References: <4E36D8E9.1050303@uri.edu>
	<BB1C9775C0154368922643D948270A09@EnricosPC> <4E37159B.8080209@uri.edu>
	<4E371BD6.7000506@4dscape.com> <4E375FFA.3000803@uri.edu>
	<4E37B289.8000106@burns-stat.com>  <4E387745.9060607@uri.edu>
	<1312324297.2788.23.camel@brian-rcg>
	<1312343015.1881.23.camel@john-Pangolin-Performance>
	<1312351006.2274.5.camel@brian-desktop>  <4E394EE0.7080605@uri.edu>
	<1312381528.2788.35.camel@brian-rcg>  <4E3968C0.80601@uri.edu>
	<1312469210.2788.87.camel@brian-rcg>  <4E3DBDDE.1040001@uri.edu>
Message-ID: <1312760472.17200.4.camel@brian-desktop>

[comments in-line below]

Regards,

   - Brian

On Sat, 2011-08-06 at 18:19 -0400, John P. Burkett wrote:
> Brian,
> 
> Thank you again for your script and thoughtful comments.  After running 
> the script and trying some variations, I have a few questions about the 
> optimize.portfolio function and its output.
> 
> When optimize_method='random', I suppose a user assesses convergence (or 
> at least the practical value of the output) by increasing search_size 
> and observing what if anything happens to the objective function value 
> and the weights.  Is that correct?

Yes, this is correct.

Random portfolios, with any set of objectives and constraints, let you
strictly bound the amount of computing power you're going to apply to a
given problem, tinker with your objective, etc, before devoting more
computing time to getting to the 'true' blobal objective.

One major use that I have for random portfolio evaluations is to show me
the feasible space.  If trace=TRUE, there should be values in the
objective value output that can be sent to plot() methods. 

Actually, there are a set of chart.* functions dispatched by plot(), 

plot -> plot.optimize.portfolio -> plot.optimize.portfolio.random ->
charts.RP -> chart.Scatter.RP&chart.Weights

All this is covered in the documentation, at least peripherally, but the
various chart.* functions can be called directly as well.

Another related function you may wish to examine is extractStats().
this will take the object output by optimize.portfolio() and pull out
the weights and objective measured in a tabular (data.frame) format.

> When optimize_method='DEoptim', the user may have some opportunities to 
> adjust DEoptim's default choices for the arguments of the package's 
> functions.  My original frustration with DEoptim was that the default 
> choices were not producing convergence in reasonable time and I was 
> uncertain about what alternative choices might hasten convergence. 
> PortfolioAnalytics (PA) provides a nice wrapper for DEoptim but still 
> leaves me wondering about function arguments and their effects on 
> convergence.  In particular, the following questions occur to me:
> 1. What choices does PA make by default for the DEoptim arguments called 
> F, itermax, VTR, relto1, stepto1, NP, and strategy?  Can a user of PA 
> override the defaults for these arguments?

Internally, we make a call to DEoptim.control.   The user may pass any
parameters in dots (...) to the optimize.portfolio command that they
wish to pass on to the optimization engine.  For DEoptim, we now use by
default:

if(!hasArg(strategy)) DEcformals$strategy=6 
# use DE/current-to-p-best/1

if(!hasArg(reltol)) DEcformals$reltol=.000001 
# 1/1000 of 1% change in objective is significant

if(!hasArg(steptol)) DEcformals$steptol=round(N*1.5) 
# number of assets times 1.5 tries to improve

if(!hasArg(c)) DEcformals$c=.4 
# JADE mutation parameter, this could maybe use some adjustment

I've found these parameters to speed convergence by about an order of
magnitude on portfolio problems of 100-300+ assets over the default
DEoptim parameters, though as indicated by the code comment, I think
that the 'c' parameter could still use some adjustment.  

I'll also note that we're using JADE adaptive DE by default in
PortfolioAnalytics because I have found it to converge so much faster
than the classical DE algorithms.  Much of the work on adding JADE to
DEoptim (Joshua Ulrich wrote all that code) was motivated by interest in
using it for portfolio optimization.  DEoptim can apply the parameter
self-adaptive properties of JADE to any strategy= parameter, not just
strategy 6 DE/current-to-p-best/1, though I believe this to be the best
strategy for these types of problems.

> 2.  Can a PA user obtain information about why iterations stopped?

Most likely reltol and steptol.  The default reltol is why I multiplied
your objective by 1000 in the script that I sent, and steptol sometimes
needs to be increased as well.

> 3.  How does search_size affect the DEoptim arguments?  I tried 
> increasing search_size from 10,000 to 20,000 but noted that 1550 
> 'iterations' were performed in both cases. I'm not sure that convergence 
> was achieved in either case.  Does search_size ever affect the number of 
> iterations?

20000 is the default for search_size

When using random portfolios, search_size is precisely that, how many
portfolios to test.  You need to make sure to set your feasible weights
in generatesequence to make sure you have search_size unique portfolios
to test, typically by manipulating the 'by' parameter to select
something smaller than .01 (I often use .002, as .001 seems like
overkill)

When using DE, search_size is decomposed into two other parameters which
it interacts with, NP and itermax.

NP, the number of members in each population, is set to cap at 2000 in
DEoptim, and by default is the number of parameters (assets/weights)
*10.

itermax, if not passed in dots, defaults to the number of parameters
(assets/weights) *50. This is the source of DE stopping at 1550
generations in your example (31*50).  You've actually tested 20000
portfolios, using larger populations in each generation.  you can pass
itermax in dots to get a larger number of generations.  You need to
understand that there is quite a lot of interaction going on here.  In
DE, the rule of thumb is to make each population contain ten times the
number of members as you have parameters, sometimes 5x is enough for
portfolio problems, sometimes not. 20000/310 would only give 64
generations, which is almost certainly not enough. 20000/1550 only gives
~12 population members, which probably doesn't give enough opportunities
to mutate/converge. 31*10*1550=480500, which is likely too many, but I
don't know your utility function well enough to say that definitively.

This brings me full circle to the utility of random portfolios, as
pointed out years ago by Pat Burns and others.  You can use a (small)
finite set of random portfolios to gain an intuition for your utility
function, and even to gain a perfectly close approximation of the 'true'
optimal portfolio (certainly within the bounds of your estimation
error!), only resorting to the global optimizer when you want to get
even closer, or if your examination of the random portfolio output
indicates that the feasible space is so non-smooth that you need the
mutation properties of the global optimizer to help you out.

Regards,

   - Brian


From brian at braverock.com  Mon Aug  8 02:07:02 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 07 Aug 2011 19:07:02 -0500
Subject: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
In-Reply-To: <4E3F133A.5000500@uri.edu>
References: <4E36D8E9.1050303@uri.edu>
	<BB1C9775C0154368922643D948270A09@EnricosPC> <4E37159B.8080209@uri.edu>
	<4E371BD6.7000506@4dscape.com> <4E375FFA.3000803@uri.edu>
	<4E37B289.8000106@burns-stat.com>  <4E387745.9060607@uri.edu>
	<1312324297.2788.23.camel@brian-rcg>
	<1312343015.1881.23.camel@john-Pangolin-Performance>
	<1312351006.2274.5.camel@brian-desktop>  <4E394EE0.7080605@uri.edu>
	<1312381528.2788.35.camel@brian-rcg>  <4E3968C0.80601@uri.edu>
	<1312469210.2788.87.camel@brian-rcg>  <4E3DBDDE.1040001@uri.edu>
	<1312715608.12648.57.camel@brian-desktop>  <4E3F133A.5000500@uri.edu>
Message-ID: <1312762022.17200.37.camel@brian-desktop>

On Sun, 2011-08-07 at 18:35 -0400, John P. Burkett wrote:
> Brian,
> 
> Thanks for your lucid explanations of how PortfolioAnalytics works.  I 
> have no objections to you forwarding your replies to the list.  My 
> comments and questions are inserted below.
> 
> Brian G. Peterson wrote:
> > I think your questions and my answers would be of general interest to
> > those on the list.  If you don't object, I'd like to forward my relies
> > on to the list as well.
> > 
> > [comments in-line below]
> > 
> > Regards,
> > 
> >    - Brian
> > 
> > On Sat, 2011-08-06 at 18:19 -0400, John P. Burkett wrote:
> >> Brian,
> >>
> >> Thank you again for your script and thoughtful comments.  After running 
> >> the script and trying some variations, I have a few questions about the 
> >> optimize.portfolio function and its output.
> >>
> >> When optimize_method='random', I suppose a user assesses convergence (or 
> >> at least the practical value of the output) by increasing search_size 
> >> and observing what if anything happens to the objective function value 
> >> and the weights.  Is that correct?
> > 
> > Yes, this is correct.
> > 
> > Random portfolios, with any set of objectives and constraints, let you
> > strictly bound the amount of computing power you're going to apply to a
> > given problem, tinker with your objective, etc, before devoting more
> > computing time to getting to the 'true' blobal objective.
> > 
> > One major use that I have for random portfolio evaluations is to show me
> > the feasible space.  If trace=TRUE, there should be values in the
> > objective value output that can be sent to plot() methods. 
> > 
> > Actually, there are a set of chart.* functions dispatched by plot(), 
> > 
> > plot -> plot.optimize.portfolio -> plot.optimize.portfolio.random ->
> > charts.RP -> chart.Scatter.RP&chart.Weights
> > 
> > All this is covered in the documentation, at least peripherally, but the
> > various chart.* functions can be called directly as well.
> > 
> > Another related function you may wish to examine is extractStats().
> > this will take the object output by optimize.portfolio() and pull out
> > the weights and objective measured in a tabular (data.frame) format.
> > 
> >> When optimize_method='DEoptim', the user may have some opportunities to 
> >> adjust DEoptim's default choices for the arguments of the package's 
> >> functions.  My original frustration with DEoptim was that the default 
> >> choices were not producing convergence in reasonable time and I was 
> >> uncertain about what alternative choices might hasten convergence. 
> >> PortfolioAnalytics (PA) provides a nice wrapper for DEoptim but still 
> >> leaves me wondering about function arguments and their effects on 
> >> convergence.  In particular, the following questions occur to me:
> >> 1. What choices does PA make by default for the DEoptim arguments called 
> >> F, itermax, VTR, relto1, stepto1, NP, and strategy?  Can a user of PA 
> >> override the defaults for these arguments?
> > 
> > Internally, we make a call to DEoptim.control.   The user may pass any
> > parameters in dots (...) to the optimize.portfolio command that they
> > wish to pass on to the optimization engine.  For DEoptim, we now use by
> > default:
> > 
> > if(!hasArg(strategy)) DEcformals$strategy=6 
> > # use DE/current-to-p-best/1
> > 
> > if(!hasArg(reltol)) DEcformals$reltol=.000001 
> > # 1/1000 of 1% change in objective is significant
> > 
> > if(!hasArg(steptol)) DEcformals$steptol=round(N*1.5) 
> > # number of assets times 1.5 tries to improve
> > 
> > if(!hasArg(c)) DEcformals$c=.4 
> > # JADE mutation parameter, this could maybe use some adjustment
> > 
> > I've found these parameters to speed convergence by about an order of
> > magnitude on portfolio problems of 100-300+ assets over the default
> > DEoptim parameters, though as indicated by the code comment, I think
> > that the 'c' parameter could still use some adjustment.  
> > 
> > I'll also note that we're using JADE adaptive DE by default in
> > PortfolioAnalytics because I have found it to converge so much faster
> > than the classical DE algorithms.  Much of the work on adding JADE to
> > DEoptim (Joshua Ulrich wrote all that code) was motivated by interest in
> > using it for portfolio optimization.  DEoptim can apply the parameter
> > self-adaptive properties of JADE to any strategy= parameter, not just
> > strategy 6 DE/current-to-p-best/1, though I believe this to be the best
> > strategy for these types of problems.
> > 
> >> 2.  Can a PA user obtain information about why iterations stopped?
> > 
> > Most likely reltol and steptol.  The default reltol is why I multiplied
> > your objective by 1000 in the script that I sent, and steptol sometimes
> > needs to be increased as well.
> 
> When examining output from optimization packages I usually look for a 
> statement about whether iteration stopped because convergence criteria 
> had been satisfied or because iterations had hit a limit.  PA does not 
> seem to include such a statement in the default output.  I imagine that 
> a user with some effort can generally figure out what happened.  An 
> automatic warning in cases of non-convergence might save some users from 
> mistakenly assuming convergence.

With a problem needing global optimization, there's not really a good
way for the optimizer to know whether it has succeeded if the global
optima is not known.  In many problems, you will know where the global
minima lies, thus the VTR parameter.

When the true global minima is not known, random portfolios can help.
If you run some large number (20,000 should be enough) with a
fine-grained enough by= parameter for generatesequence, you can examine
the minimum attained via the random portfolios.  The true global minimum
will likely be only slightly smaller than the minima returned by your
random portfolios, and will also likely be insigificantly different
given real-money investment constraints and estimation error.

DEoptim will give a little information if reltol or steptol are reached,
we could examine providing more feedback to the user.'

> > 
> >> 3.  How does search_size affect the DEoptim arguments?  I tried 
> >> increasing search_size from 10,000 to 20,000 but noted that 1550 
> >> 'iterations' were performed in both cases. I'm not sure that convergence 
> >> was achieved in either case.  Does search_size ever affect the number of 
> >> iterations?
> > 
> > 20000 is the default for search_size
> > 
> > When using random portfolios, search_size is precisely that, how many
> > portfolios to test.  You need to make sure to set your feasible weights
> > in generatesequence to make sure you have search_size unique portfolios
> > to test, typically by manipulating the 'by' parameter to select
> > something smaller than .01 (I often use .002, as .001 seems like
> > overkill)
> > 
> > When using DE, search_size is decomposed into two other parameters which
> > it interacts with, NP and itermax.
> > 
> > NP, the number of members in each population, is set to cap at 2000 in
> > DEoptim, and by default is the number of parameters (assets/weights)
> > *10.
> > 
> > itermax, if not passed in dots, defaults to the number of parameters
> > (assets/weights) *50. This is the source of DE stopping at 1550
> > generations in your example (31*50).  
> 
> That's important information. Evidently, I'd need to raise itermax to 
> attain convergence.

Possibly.  Is there a value that signifies convergence in this objective
function?
 
> > You've actually tested 20000
> > portfolios, using larger populations in each generation.  you can pass
> > itermax in dots to get a larger number of generations.  You need to
> > understand that there is quite a lot of interaction going on here.  In
> > DE, the rule of thumb is to make each population contain ten times the
> > number of members as you have parameters, sometimes 5x is enough for
> > portfolio problems, sometimes not. 20000/310 would only give 64
> > generations, which is almost certainly not enough. 20000/1550 only gives
> > ~12 population members, which probably doesn't give enough opportunities
> > to mutate/converge. 31*10*1550=480500, which is likely too many, but I
> > don't know your utility function well enough to say that definitively.
> > 
> 
> The cases we've examined seem to fit the equation search_size = 
> itermax*NP.  Are there exceptions?  If a user specifies any two of the 
> three variables, will PA derive the third?   If a user specifies values 
> for all three variables but violates the equation, does PA change one 
> variable, report an error, or what?

We default to this:

NP = round(search_size/itermax)

> It seems reasonable to me to set NP = 10*(number of parameters) and 
> itermax = 50*(number of parameters).  Those settings and the equation 
> above imply search_size = 500*(number of parameters)^2. As you point 
> out, in the case of 31 parameters, the calculation yields search_size = 
> 480500, a quantity which you say "is likely too many."  Not sure whether 
>   it is too many in the sense of being larger than necessary to attain 
> convergence or in the sense of being too large to be processed in 
> acceptable time, I tried running the following code:
> DEResult <- optimize.portfolio(R=returns, constraints=Util_constr, 
> optimize_methods='DEoptim', search_size=480500, NP=310, intermax=1550, 
> trace=TRUE, verbose=FALSE, steptol=100). So far it has been running for 
>   6 hours and 13 minutes.  I'll be interested to see when it stops and 
> for what reason.

See above for a recommendation to test with a finite number of random
portfolios first.



> Best regards,
> John
> 
> 
> 
> > This brings me full circle to the utility of random portfolios, as
> > pointed out years ago by Pat Burns and others.  You can use a (small)
> > finite set of random portfolios to gain an intuition for your utility
> > function, and even to gain a perfectly close approximation of the 'true'
> > optimal portfolio (certainly within the bounds of your estimation
> > error!), only resorting to the global optimizer when you want to get
> > even closer, or if your examination of the random portfolio output
> > indicates that the feasible space is so non-smooth that you need the
> > mutation properties of the global optimizer to help you out.
> > 
> > Regards,
> > 
> >    - Brian
> > 
> > 
> > 
> 
> 

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From gmatysiak at gmail.com  Mon Aug  8 15:32:45 2011
From: gmatysiak at gmail.com (George Matysiak)
Date: Mon, 8 Aug 2011 14:32:45 +0100
Subject: [R-SIG-Finance] Bruno's Panel Data LSDVC Routine
Message-ID: <CAEWMk7stxSq6WT9M_h6Hhqzo3oLQvY9754xf8aVRuELdPvScHw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110808/3e9e3f9b/attachment.pl>

From burkett at uri.edu  Mon Aug  8 23:19:47 2011
From: burkett at uri.edu (John P. Burkett)
Date: Mon, 08 Aug 2011 17:19:47 -0400
Subject: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
In-Reply-To: <1312554040.2788.149.camel@brian-rcg>
References: <4E36D8E9.1050303@uri.edu>	
	<BB1C9775C0154368922643D948270A09@EnricosPC>
	<4E37159B.8080209@uri.edu>	 <1312234589.18828.87.camel@brian-rcg>
	<4E3767A4.6060004@uri.edu> <1312554040.2788.149.camel@brian-rcg>
Message-ID: <4E4052F3.8070303@uri.edu>

Brian G. Peterson wrote:
> Just to round out this thread on-list, I've attached a script for the
> problem as described by Prof. Burkett that uses the Munger and Arrow
> bounded utility function to construct a portfolio via PortfolioAnalytics
> using both random portfolios and DEoptim as alternate optimization
> engines.

Thanks again for your ingenious script and illuminating comments.

The only contribution I can make to the discussion now is to provide 
some references on bounded utility functions.  Karl Menger (a 
mathematician and son of the Austrian economist Carl Menger) made a case 
for bounded utility functions in a 1934 article in German.  An English 
translation was published as "The Role of Uncertainty in Economics", ch. 
16 in Essays in Mathematical Economics in Honor of Oskar Morenstern, ed. 
Martin Shubik (Princeton University Press, 1967).  Other arguments for 
bounded utility functions have been made by Kenneth J. Arrow, Essays in 
the Theory of Risk-bearing (Markham, 1971) and by John W. Pratt, Howard 
Raiffa, and Robert Schlaifer, Introduction to Statistical Decision 
Theory (MIT Press, 1995), pp. 80-81.  The particular utility function I 
have been using is just one example of a bounded utility function, 
expressed in terms of gross return. To the best of my knowledge, none of 
the authorities cited above have recommended this particular function. 


Best regards,
John



> 
> I've modified the script to use the 'edhec' data series included with
> PerformanceAnalytics for reproducibility.
> 
> As Enrico noted in an earlier post, this utility function tends towards
> creating very concentrated portfolios in only a small number of assets.
> 
> Regards,
> 
>    - Brian
> 
> 
> On Mon, 2011-08-01 at 22:57 -0400, John P. Burkett wrote:
>> Brian G. Peterson wrote:
>>> On Mon, 2011-08-01 at 17:07 -0400, John P. Burkett wrote:
>>>> Enrico Schumann wrote:
>>>>> what kind of "difficulty" did you encounter? If you would give more details
>>>>> on what you tried, and how, then people should be better able to help you. 
>>>> Thank you, Enrico, for your prompt and helpful response.  Focusing on 
>>>> Sharpe's algorithm, I originally omitted specifics about difficulties I 
>>>> have encountered with packages based on other algorithms.  However, in 
>>>> case it is of interest, I will now outline my project and difficulties. 
>>>>      I have about 120 monthly observations on gross real returns for 
>>>> about 30 assets. [Trying to mitigate estimation error, I've shrunk 
>>>> observed returns toward a common value as proposed by Philippe Jorion, 
>>>> "Bayes-Stein Estimation for Portfolio Analysis",
>>>> Journal of Financial and Quantitative Analysis, v. 21, n. 3 (Sept., 
>>>> 1986), pp. 279-92.]   I initially specified the utility function as U = 
>>>> R/(0.5 + R) where R is R is the gross return on a portfolio and 
>>>> specified long-only constraints. The restriction that portfolio shares 
>>>> sum to 1 is handled by specifying n-1 variables (where n is the nubmer 
>>>> of assets) and making the share asset n be 1 minus the sum of other 
>>>> shares. If I apply DEoptim to a sufficiently small subset of the assets, 
>>>> it converges and  selects a plausible portfolio.  Yet if I ask DEoptim 
>>>> to analyze as many as 30 assets, it fails to converge in any number of 
>>>> iterations that I've tried.  Given the same problem, Rgenoud converged 
>>>> after 44 hours (more than 2 million generation, if memory serves).  I 
>>>> subsequently tried changing the utility function to ln(R) and asking 
>>>> Rgenoud to maximize that.  Thus far it has run for over 1.5 million 
>>>> generations without converging.  The portfolio shares have barely 
>>>> changed over many recent generations.  Perhaps I could just relax the 
>>>> default convergence criteria and declare the problem solved for 
>>>> practical purposes.  However, that might result in mistaking a local for 
>>>> a global maximum.  These experiences may just indicate that a 30 asset 
>>>> portfolio is hard to optimize using general purpose algorithms. Kris 
>>>> Boudt et al. note that "portfolio problems encountered in practice may 
>>>> require days to optimize on a personal computer" ("Large-scale portfolio 
>>>> optimization with DEoptim," p. 1). These experiences motivated my 
>>>> interest in trying an algorithm, such as that of Sharpe, designed 
>>>> specifically for portfolio optimization.
>>> As one of the authors of the paper in question, I'll note that I was
>>> talking about portfolios with hundreds or thousands of assets, and/or
>>> with many rebalancing periods or observations.  Monthly series of 120
>>> observations each shouldn't take millions of iterations to converge.  It
>>> is possible that the starting set is not feasible, given the way your
>>> full investment constraint is being applied.
>>>
>> Thanks, Brian.  I'll double check my code to see if it's given DEoptim 
>> an impossible task.
>>
>>> If your objective function is truly a smooth convex function, then
>>> optim() or some other linear or conical solver should be sufficient.  If
>>> the function is not smooth (and real portfolio objectives and
>>> constraints rarely are), then a random portfolios or a global optimizer
>>> will be required.  
>>>
>>> Perhaps you should start with a couple hundred random portfolio survey
>>> of your feasible space?
>>>
>>> This may be accomplished in R with Pat Burns' excellent Portfolio Probe
>>> (commercial non-free), or with PortfolioAnalytics (open source/free, on
>>> R-Forge).
>>>
>>> PortfolioAnalytics will also allow you to use DEoptim after using random
>>> portfolios to get close to the global minima.  
>>>
>>> See out R/Finance seminar presentation here:
>>> http://www.rinfinance.com/agenda/2010/Carl+Peterson+Boudt_Tutorial.pdf
>>> and the code to replicate here:
>>> https://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/PortfolioAnalytics/sandbox/script.workshop2010.R?root=returnanalytics
>>> PortfolioAnalytics does some of the heavy lifting to set good defaults
>>> and give you a good set of starting population values to speed
>>> convergence.
>>>
>>> Also, Pat Burns' Portfolio Probe blog is here:
>>> http://www.portfolioprobe.com/blog/
>> These are very helpful leads.  I'll pursue them tomorrow morning. 
>> Thanks again!
>>
>> Best regards,
>> John
>>
>>
>>> - Brian
>>>
>>>>> I don't know the paper you mentioned, but I know a paper of W. Sharpe in
>>>>> which he suggests to do repeated zero-sum changes to the portfolio, like
>>>>> "increase one asset by x%, and decrease another one by x%". If that is what
>>>>> you mean, this can be done with a local search. 
>>>> The algorithm you describe sounds very much like that covered in the 
>>>> articles I cited in my previous note.  It's probably the same algorithm.
>>>>
>>>> (But actually, other
>>>>> functions like DEoptim should work just as well. The DEoptim package even
>>>>> comes with a vignette that adresses portfolio optimisation.) 
>>>> Perhaps I should just be more patient with DEoptim or buy a faster computer!
>>>>
>>>>> An example for a local search procedure is given in one of the vignettes of
>>>>> the NMOF package (which is available from
>>>>> https://r-forge.r-project.org/R/?group_id=1128 ), even though I am not sure
>>>>> how self-explanatory the vignette is.
>>>> Thank you for the NMOF reference.  I've printed "Examples and Extensions 
>>>> for the NMOF package" and tried the command
>>>> install.packages("NMOF", repos = "http://R-Forge.R-project.org")
>>>> That command elicited the following messages:
>>>> Warning in install.packages("NMOF", repos = 
>>>> "http://R-Forge.R-project.org") :
>>>>    argument 'lib' is missing: using 
>>>> '/home/john/R/i486-pc-linux-gnu-library/2.8'
>>>> trying URL 'http://R-Forge.R-project.org/src/contrib/NMOF_0.14-2.tar.gz'
>>>> Content type 'application/x-gzip' length 1352123 bytes (1.3 Mb)
>>>> opened URL
>>>> ==================================================
>>>> downloaded 1.3 Mb
>>>>
>>>> * Installing *source* package 'NMOF' ...
>>>> ** R
>>>> ** data
>>>> **  moving datasets to lazyload DB
>>>> ** inst
>>>> ** preparing package for lazy loading
>>>> ** help
>>>>   >>> Building/Updating help pages for package 'NMOF'
>>>>       Formats: text html latex example
>>>>    DEopt                             text    html    latex   example
>>>>    EuropeanCall                      text    html    latex   example
>>>>    GAopt                             text    html    latex   example
>>>>    LSopt                             text    html    latex   example
>>>>    MA                                text    html    latex   example
>>>>    NMOF-package                      text    html    latex   example
>>>>    NS                                text    html    latex   example
>>>>    NSf                               text    html    latex   example
>>>>    PSopt                             text    html    latex   example
>>>>    TAopt                             text    html    latex   example
>>>>    bundData                          text    html    latex   example
>>>>    callHestoncf                      text    html    latex   example
>>>>    fundData                          text    html    latex   example
>>>>    gridSearch                        text    html    latex   example
>>>>    qTable                            text    html    latex   example
>>>>
>>>> ERROR in file 'repairMatrix.Rd': Environment (text enclosed in {}) found 
>>>> in \title{...}.
>>>> The title must be plain text!
>>>>
>>>> ERROR: building help failed for package 'NMOF'
>>>> ** Removing '/home/john/R/i486-pc-linux-gnu-library/2.8/NMOF'
>>>>
>>>> The downloaded packages are in
>>>> 	/tmp/RtmpNAuDvf/downloaded_packages
>>>> Warning message:
>>>> In install.packages("NMOF", repos = "http://R-Forge.R-project.org") :
>>>>    installation of package 'NMOF' had non-zero exit status
>>>>
>>>> ***************************************
>>>>
>>>> Any suggestions for how to successfully install NMOF would be greatly 
>>>> appreciated.
>>>>
>>>> Best regards,
>>>> John
>>>>
>>>>
>>>>
>>>>> Regards,
>>>>> Enrico
>>>>>
>>>>>
>>>>>   
>>>>>
>>>>>> -----Urspr?ngliche Nachricht-----
>>>>>> Von: r-sig-finance-bounces at r-project.org 
>>>>>> [mailto:r-sig-finance-bounces at r-project.org] Im Auftrag von 
>>>>>> John P. Burkett
>>>>>> Gesendet: Montag, 1. August 2011 18:49
>>>>>> An: R-SIG-Finance at r-project.org
>>>>>> Betreff: [R-SIG-Finance] Sharpe's algorithm for portfolio improvement
>>>>>>
>>>>>> An attractive sounding algorithm for maximizing the expected 
>>>>>> utility of of a portfolio was proposed by William F. Sharpe 
>>>>>> in "An algorithm for portfolio improvement," Advances in 
>>>>>> Mathematical Programming and Financial Planning, 1987, pp. 
>>>>>> 155-170 and summarized by the same author in "Expected 
>>>>>> utility asset allocation," Financial Analysts Journal, vol. 
>>>>>> 63, no. 5 (Sep.-Oct., 2007), pp. 18-30.
>>>>>>
>>>>>> Has this algorithm been implemented in R?
>>>>>>
>>>>>> If not, is there a substitute that is likely to work well for 
>>>>>> a user-specified concave utility function?  I've tried optim, 
>>>>>> DEoptim, and Rgenoud but encountered difficulty in getting 
>>>>>> them to converge for a long-only portfolio of around 30 assets.
>>>>>>
>>>>>> Best regards,
>>>>>> John
>>>>>>
>>>>>> --
>>>>>> John P. Burkett
>>>>>> Department of Economics
>>>>>> University of Rhode Island
>>>>>> Kingston, RI 02881-0808
>>>>>> USA
>>>>>>
>>>
>>>
>>
>> -- 
>> John P. Burkett
>> Department of Economics
>> University of Rhode Island
>> Kingston, RI 02881-0808
>> USA
>>
>> phone (401) 874-9195
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
> 


-- 
John P. Burkett
Department of Economics
University of Rhode Island
Kingston, RI 02881-0808
USA

phone (401) 874-9195


From aeolus_lu at hotmail.com  Tue Aug  9 00:34:39 2011
From: aeolus_lu at hotmail.com (Yihao Lu aeolus_lu)
Date: Mon, 8 Aug 2011 18:34:39 -0400
Subject: [R-SIG-Finance] rjava & RBloomberg
In-Reply-To: <4E4052F3.8070303@uri.edu>
References: <4E36D8E9.1050303@uri.edu>,
	<BB1C9775C0154368922643D948270A09@EnricosPC>,
	<4E37159B.8080209@uri.edu>
	<1312234589.18828.87.camel@brian-rcg>,<4E3767A4.6060004@uri.edu>
	<1312554040.2788.149.camel@brian-rcg>,<4E4052F3.8070303@uri.edu>
Message-ID: <COL120-W222695C17E5AE31B0BC13C88210@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110808/c215ac7d/attachment.pl>

From preston.c.smith at gmail.com  Tue Aug  9 02:15:48 2011
From: preston.c.smith at gmail.com (psmith)
Date: Mon, 8 Aug 2011 17:15:48 -0700 (PDT)
Subject: [R-SIG-Finance] Placing Combo orders with IBrokers
Message-ID: <1312848948540-3728669.post@n4.nabble.com>

If anyone has successfully placed a combination order with the IBrokers
package, I'd appreciate it if you could post an example.  I have tried the
code below but although there are no errors, there is no order in TWS.  Also
if I follow this with a reqCurrentTime(tws), I get a bunch of warnings of
the type:

Warning: Unknown incoming message: ?'. Please reset connection
Warning: Unknown incoming message: ???. Please reset connection

Thanks for any insight.

require(IBrokers)
tws <- twsConnect(1)
order <- twsOrder( orderId=reqIds(tws), totalQuantity = "1",  lmtPrice = "1"
) 
bag <- twsBAG(
  list(
    twsComboLeg(
      conId = "79265697", 
      ratio = "1", 
      action = "BUY", 
      exchange = "SMART"
    )
    ,
    twsComboLeg(
      conId = "79265687", 
      ratio = "1", 
      action = "SELL", 
      exchange = "SMART"
    )
  )
)
placeOrder( tws, bag, order)

--
View this message in context: http://r.789695.n4.nabble.com/Placing-Combo-orders-with-IBrokers-tp3728669p3728669.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From aeolus_lu at hotmail.com  Tue Aug  9 03:14:36 2011
From: aeolus_lu at hotmail.com (Yihao Lu aeolus_lu)
Date: Mon, 8 Aug 2011 21:14:36 -0400
Subject: [R-SIG-Finance] rjava & RBloomberg
In-Reply-To: <COL120-W222695C17E5AE31B0BC13C88210@phx.gbl>
References: <4E36D8E9.1050303@uri.edu>, ,
	<BB1C9775C0154368922643D948270A09@EnricosPC>, ,
	<4E37159B.8080209@uri.edu>, <1312234589.18828.87.camel@brian-rcg>,
	<4E3767A4.6060004@uri.edu>, <1312554040.2788.149.camel@brian-rcg>,
	<4E4052F3.8070303@uri.edu>,
	<COL120-W222695C17E5AE31B0BC13C88210@phx.gbl>
Message-ID: <COL120-W47A81BB398680625715AEC88200@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110808/3e5f75dc/attachment.pl>

From jeffrey.ryan at lemnica.com  Tue Aug  9 03:16:29 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Mon, 8 Aug 2011 20:16:29 -0500
Subject: [R-SIG-Finance] Placing Combo orders with IBrokers
In-Reply-To: <1312848948540-3728669.post@n4.nabble.com>
References: <1312848948540-3728669.post@n4.nabble.com>
Message-ID: <CABDUZc9oBJFf=Jx0_nxNeY_CMHTntb-d7wvC3PTtryMU-OE8wQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110808/57735ab3/attachment.pl>

From brian at braverock.com  Tue Aug  9 03:28:09 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 08 Aug 2011 20:28:09 -0500
Subject: [R-SIG-Finance] rjava & RBloomberg
In-Reply-To: <COL120-W47A81BB398680625715AEC88200@phx.gbl>
References: <4E36D8E9.1050303@uri.edu>
	, , <BB1C9775C0154368922643D948270A09@EnricosPC>
	, , <4E37159B.8080209@uri.edu>, <1312234589.18828.87.camel@brian-rcg>
	, <4E3767A4.6060004@uri.edu>, <1312554040.2788.149.camel@brian-rcg>
	, <4E4052F3.8070303@uri.edu>,
	<COL120-W222695C17E5AE31B0BC13C88210@phx.gbl>
	<COL120-W47A81BB398680625715AEC88200@phx.gbl>
Message-ID: <1312853289.17200.38.camel@brian-desktop>

Care to enlighten the list so someone else doesn't have the same problem
you had?  - Brian

On Mon, 2011-08-08 at 21:14 -0400, Yihao Lu aeolus_lu wrote:
> puzzle solved. thank you.
> 
> Best,
> Yihao
> > From: aeolus_lu at hotmail.com
> > To: r-sig-finance at r-project.org
> > Date: Mon, 8 Aug 2011 18:34:39 -0400
> > Subject: [R-SIG-Finance] rjava & RBloomberg
> > 
> > 
> > I am looking to install rjava 0.8-8 or earlier to use RBloomberg, in windows and having trouble to build one. Is there any place I can download the prebuilt one? thanks.


From preston.c.smith at gmail.com  Tue Aug  9 06:51:08 2011
From: preston.c.smith at gmail.com (Preston Smith)
Date: Mon, 8 Aug 2011 21:51:08 -0700
Subject: [R-SIG-Finance] Placing Combo orders with IBrokers
In-Reply-To: <CABDUZc9oBJFf=Jx0_nxNeY_CMHTntb-d7wvC3PTtryMU-OE8wQ@mail.gmail.com>
References: <1312848948540-3728669.post@n4.nabble.com>
	<CABDUZc9oBJFf=Jx0_nxNeY_CMHTntb-d7wvC3PTtryMU-OE8wQ@mail.gmail.com>
Message-ID: <CANiphNmAyZ_Dg22hn=ykihSrid5TRoNHOzpGOh9xXTdwo8ukJA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110808/d9490f3e/attachment.pl>

From aeolus_lu at hotmail.com  Tue Aug  9 14:51:27 2011
From: aeolus_lu at hotmail.com (Yihao Lu aeolus_lu)
Date: Tue, 9 Aug 2011 08:51:27 -0400
Subject: [R-SIG-Finance] rjava & RBloomberg
In-Reply-To: <1312853289.17200.38.camel@brian-desktop>
References: <4E36D8E9.1050303@uri.edu>,, ,
	<BB1C9775C0154368922643D948270A09@EnricosPC>, , ,
	<4E37159B.8080209@uri.edu>, 
	<1312234589.18828.87.camel@brian-rcg>,, <4E3767A4.6060004@uri.edu>,
	<1312554040.2788.149.camel@brian-rcg>,, <4E4052F3.8070303@uri.edu>,
	<COL120-W222695C17E5AE31B0BC13C88210@phx.gbl>,
	<COL120-W47A81BB398680625715AEC88200@phx.gbl>,
	<1312853289.17200.38.camel@brian-desktop>
Message-ID: <COL120-W60289ED8BB54621248187E88200@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110809/aeb72637/attachment.pl>

From daniel.krizian at gmail.com  Tue Aug  9 20:09:36 2011
From: daniel.krizian at gmail.com (Daniel Krizian)
Date: Tue, 9 Aug 2011 20:09:36 +0200
Subject: [R-SIG-Finance] delay argument of ruleSignal buggy ? (quantstrat)
Message-ID: <CALqbvp6h7Suq+AjbAbiyV5h4bs9MiZ7tZpr5CFTtwoSS3LApsw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110809/7a160956/attachment.pl>

From brian at braverock.com  Tue Aug  9 20:33:17 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 09 Aug 2011 13:33:17 -0500
Subject: [R-SIG-Finance] delay argument of ruleSignal buggy ?
 (quantstrat)
In-Reply-To: <CALqbvp6h7Suq+AjbAbiyV5h4bs9MiZ7tZpr5CFTtwoSS3LApsw@mail.gmail.com>
References: <CALqbvp6h7Suq+AjbAbiyV5h4bs9MiZ7tZpr5CFTtwoSS3LApsw@mail.gmail.com>
Message-ID: <1312914797.2788.186.camel@brian-rcg>

'delay' isn't well tested and wasn't really intended for daily or lower
frequency data.

I'm certainly be willing to entertain a patch, but I haven't had
problems on tick data.

We originally had daily data execute no sooner than the next observation
after the signal, but people complained, so we allowed same-observation
execution on daily or lower frequency data.

I suppose something like 

if(is.timeBased(timestamp) && class(timestamp) != 'Date' )
ordertime<-timestamp+delay

might work.

Regards,

   - Brian

On Tue, 2011-08-09 at 20:09 +0200, Daniel Krizian wrote:
> Hello,
> 
> in quantstrat, I tried to pass "delay" argument inside ruleSignal function
> (via add.rule, my code attached) and found about the following error:
> 
> Error in if (ifelse(is.null(txnprice), FALSE, !is.na(txnprice))) { :
>   missing value where TRUE/FALSE needed
> 
> I think there is a bug in ruleOrderProc function in the following line:
> 
>     if(is.timeBased(timestamp)) ordertime<-timestamp+delay
>     else ordertime<-as.POSIXct(timestamp)+delay
> 
> #------------Here is the environment dump-------------------
> 
> > applyStrategy(strategy=stratMACROSS , portfolios=portfolio.st)
> Error in if (ifelse(is.null(txnprice), FALSE, !is.na(txnprice))) { :
>   missing value where TRUE/FALSE needed
> > debugger()
> Message:  Error in if (ifelse(is.null(txnprice), FALSE, !is.na(txnprice))) {
> :
>   missing value where TRUE/FALSE needed
> Available environments had calls:
> 1: applyStrategy(strategy = stratMACROSS, portfolios = portfolio.st)
> 2: ruleOrderProc(portfolio = portfolio, symbol = symbol, mktdata = mktdata,
> timespan = timespan, ...)
> 
> Enter an environment number, or 0 to exit
> Selection: 2
> Browsing in the environment with call:
>    ruleOrderProc(portfolio = portfolio, symbol = symbol, mktdata = mktdata,
> timespan = timespan, ...)
> Called from: debugger.look(ind)
> 
> Browse[1]> txnprice
> numeric(0)
> Browse[1]> timestamp
> [1] "2001-06-27"
> Browse[1]> delay
> [1] 86400
> Browse[1]> class(timestamp)
> [1] "Date"
> Browse[1]> is.timeBased(timestamp)
> [1] TRUE
> Browse[1]> if(is.timeBased(timestamp)) ordertime<-timestamp+delay
> Browse[1]> ordertime
> [1] "2238-01-16"
> 
> Browse[1]> getOrderBook("macross")
> $macross
> $macross$AAPL
>            Order.Qty Order.Price Order.Type Order.Side Order.Threshold
> Order.Status Order.StatusTime Order.Set Txn.Fees
> 1999-12-31 "0"       NA          "init"     "long"     "0"
> "closed"     "1999-12-31"     "1"       "0"
> 2238-01-15 "100"     "23.75"     "market"   "long"     NA
>  "open"       NA               NA        "0"
> 
> #------------end of the environment dump-------------------
> 
> *Side note - same symptom, different case: NON-TRADING DAYS*
> Another problematic line in ruleOrderProc is:
> 
> txnprice=as.numeric(getPrice(last(mktdata[txntime])
> 
> Consider what happens witch such delay value and mktdata that
>  timestamp+delay value falls inside a non-trading day (there is an irregular
> timestamping in mktdata).
> 
> > txnprice
> numeric(0)
> 
> Same error will ensue. Txnprice cannot be extracted, as mktdata doesn't have
> data at that timestamp (non-trading day). I used "POSIXct" class instead of
> "Date" class this time, to avoid previous case issue with "Date".
> 
> I can post demo on non-trading day case as well, if needed.
> 
> #----------- Here is my code (simplified demo maCross.R )  ----------
> require(quantstrat)
> try(rm("order_book.macross",pos=.strategy),silent=TRUE)
> try(rm("account.macross","portfolio.macross",pos=.blotter),silent=TRUE)
> try(rm("account.st","portfolio.st
> ","stock.str","stratMACROSS","initDate","initEq",'start_t','end_t'),silent=TRUE)
> stock.str='AAPL' # what are we trying it on
> currency('USD')
> stock(stock.str,currency='USD',multiplier=1)
> initDate='1999-12-31'
> 
> delay = 1*24*60*60 # trade with one day delay after signal
> 
> initEq=1000000
> portfolio.st='macross'
> account.st='macross'
> initPortf(portfolio.st,symbols=stock.str, initDate=initDate)
> initAcct(account.st,portfolios=portfolio.st, initDate=initDate)
> initOrders(portfolio=portfolio.st,initDate=initDate)
> 
> stratMACROSS<- strategy(portfolio.st)
> 
> stratMACROSS <- add.indicator(strategy = stratMACROSS, name = "SMA",
> arguments = list(x=quote(Cl(mktdata)), n=50),label= "ma50" )
> stratMACROSS <- add.indicator(strategy = stratMACROSS, name = "SMA",
> arguments = list(x=quote(Cl(mktdata)), n=200),label= "ma200")
> 
> stratMACROSS <- add.signal(strategy =
> stratMACROSS,name="sigCrossover",arguments =
> list(columns=c("ma50","ma200"),relationship="gt"),label="ma50.gt.ma200")
> stratMACROSS <- add.signal(strategy =
> stratMACROSS,name="sigCrossover",arguments =
> list(column=c("ma50","ma200"),relationship="lt"),label="ma50.lt.ma200")
> 
> stratMACROSS <- add.rule(strategy = stratMACROSS,name='ruleSignal',
> arguments = list(sigcol="ma50.gt.ma200",sigval=TRUE, orderqty=100,
> ordertype='market', orderside='long', delay= delay ),type='enter')
> stratMACROSS <- add.rule(strategy = stratMACROSS,name='ruleSignal',
> arguments = list(sigcol="ma50.lt.ma200",sigval=TRUE, orderqty=-100,
> ordertype='market', orderside='long', delay= delay ),type='exit')
> 
> getSymbols(stock.str,from=initDate)
> 
> applyStrategy(strategy=stratMACROSS , portfolios=portfolio.st)
> 
> #----------- end of code
> --------------------------------------------------------
> 
> With Best Regards,
> Daniel Krizian
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From daniel.krizian at gmail.com  Tue Aug  9 22:29:47 2011
From: daniel.krizian at gmail.com (Daniel Krizian)
Date: Tue, 9 Aug 2011 22:29:47 +0200
Subject: [R-SIG-Finance] delay argument of ruleSignal buggy ?
	(quantstrat)
In-Reply-To: <1312914797.2788.186.camel@brian-rcg>
References: <CALqbvp6h7Suq+AjbAbiyV5h4bs9MiZ7tZpr5CFTtwoSS3LApsw@mail.gmail.com>
	<1312914797.2788.186.camel@brian-rcg>
Message-ID: <CALqbvp7N2y245pn2h158r5qG+aMn9KBBy8BvmQpmz8dpo8Skgg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110809/bad88d0c/attachment.pl>

From list at econinfo.de  Fri Aug 12 15:11:39 2011
From: list at econinfo.de (Owe Jessen)
Date: Fri, 12 Aug 2011 15:11:39 +0200
Subject: [R-SIG-Finance] Problem with TTR - stockSymbols
Message-ID: <4E45268B.2090305@econinfo.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110812/432e08b2/attachment.pl>

From josh.m.ulrich at gmail.com  Fri Aug 12 15:16:25 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Fri, 12 Aug 2011 08:16:25 -0500
Subject: [R-SIG-Finance] Problem with TTR - stockSymbols
In-Reply-To: <4E45268B.2090305@econinfo.de>
References: <4E45268B.2090305@econinfo.de>
Message-ID: <CAPPM_gTvqSr6NP+vMPk3RJpexP409eC9-xvwkNN2HCy9whHjYA@mail.gmail.com>

Owe,

nasdaq.com changed the format of the file stockSymbols() parses.  I've
patched on R-Forge, but have not pushed it to CRAN yet.  You can
install TTR from R-Forge via:

R> install.packages("TTR", repos="http://r-forge.r-project.org")

Best,
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com



On Fri, Aug 12, 2011 at 8:11 AM, Owe Jessen <list at econinfo.de> wrote:
> Hi all. I have a problem using stockSymbols from TTR, which is rather
> garbled output. Using the example of
> require("TTR")
>
> nyse.symbols<- stockSymbols("NYSE")
>
>
>
> results in the warning
>
>
>
> Fetching NYSE symbols...
> Warnmeldung:
> In read.table(file = file, header = header, sep = sep, quote = quote, ?:
> ? cols = 3 != length(data) = 4
>
>
>
> I get the following output
>
>
>
> head(nyse.symbols)
>
>
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? Name
> 1<html xmlns=http://www.w3.org/1999/xhtml>
> 2<head>
> 4<meta name=keywords content=company list, nasdaq company list, nyse company list, amex company list />
> 5<meta name=description content=Use the NASDAQ.com Company List tool to find lists of NASDAQ, NYSE, and AMEX listed securities by name, region, industry and more. />
> 6<meta name=robots content=index,follow />
> 7<link rel=canonical href=http://www.nasdaq.com/screening/company-list.aspx />
> ? Symbol MarketCap Exchange
> 1 ? ? ? ? ? ? ? ? ? ? ?NYSE
> 2 ? ? ? ? ? ? ? ? ? ? ?NYSE
> 4 ? ? ? ? ? ? ? ? ? ? ?NYSE
> 5 ? ? ? ? ? ? ? ? ? ? ?NYSE
> 6 ? ? ? ? ? ? ? ? ? ? ?NYSE
> 7 ? ? ? ? ? ? ? ? ? ? ?NYSE
>
>
>
>> ?str(nyse.symbols)
> 'data.frame': ? 1437 obs. of ?4 variables:
> ?$ Name ? ? : chr ?"<html xmlns=http://www.w3.org/1999/xhtml>""<head>""<meta name=keywords content=company list, nasdaq company list, nyse company list, amex company list />""<meta name=description content=Use the NASDAQ.com Company List tool to find lists of NASDAQ, NYSE, and AMEX listed securities b"| __truncated__ ...
> ?$ Symbol ? : chr ?"" "" "" "" ...
> ?$ MarketCap: chr ?"" "" "" "" ...
> ?$ Exchange : chr ?"NYSE" "NYSE" "NYSE" "NYSE" ...
>
>
>
> Any help would be appreciated.
>
>
>
> TIA
>
>
> Owe
>
>
>
> --
> Owe Jessen
> Nettelbeckstr. 5
> 24105 Kiel
> post at owejessen.de
> http://privat.owejessen.de
>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From kriskumar at earthlink.net  Fri Aug 12 23:28:36 2011
From: kriskumar at earthlink.net (krishna)
Date: Fri, 12 Aug 2011 17:28:36 -0400
Subject: [R-SIG-Finance] rjava & RBloomberg
In-Reply-To: <COL120-W60289ED8BB54621248187E88200@phx.gbl>
References: <4E36D8E9.1050303@uri.edu>, , ,
	<BB1C9775C0154368922643D948270A09@EnricosPC>, , ,
	<4E37159B.8080209@uri.edu>,
	<1312234589.18828.87.camel@brian-rcg>, ,
	<4E3767A4.6060004@uri.edu>,
	<1312554040.2788.149.camel@brian-rcg>, ,
	<4E4052F3.8070303@uri.edu>,
	<COL120-W222695C17E5AE31B0BC13C88210@phx.gbl>,
	<COL120-W47A81BB398680625715AEC88200@phx.gbl>,
	<1312853289.17200.38.camel@brian-desktop>
	<COL120-W60289ED8BB54621248187E88200@phx.gbl>
Message-ID: <02E03047-BAA1-4531-9FDE-5EC3CD4949E8@earthlink.net>

Sry about the threadjack. I got this working by using an older version of rJava however it looks the behavior has changed in the new version when you fetch a list of securities. 

The resultant data.frame has security1 followed by security 2..followed by security 3 rather than a column bind as in the previous versions (which didn't use rJava)

I must not have read the new documentation but is there a way to go back to the old RBloomberg which returned zoo objects and did the merge of the data than the append.

 Is there someplace where I can find the older win32 binary?.

Thanks & Best,
Krishna


On Aug 9, 2011, at 8:51 AM, Yihao Lu aeolus_lu wrote:

> 
> sure.i do not know the reason, but even my R2.12.2 installs rjava 0.9 if i do install.packages.Then I tried to install directly in rgui , which kept failing.So i installed rtools and built from Rcmd install rjava.tar.gz . This works !
> hope this helps.
> Best,
> Yihao
> 
> 


From gordon.morrison at hsbcib.com  Mon Aug 15 17:19:38 2011
From: gordon.morrison at hsbcib.com (gordon.morrison at hsbcib.com)
Date: Mon, 15 Aug 2011 16:19:38 +0100
Subject: [R-SIG-Finance] Accessing Bloomberg historic data for invalid codes
	with RBloomberg
Message-ID: <OF5C2B1D88.A981B875-ON802578ED.00534C2B-802578ED.0054325A@hsbcib.com>


Can anyone shed any light into what I am doing wrong

> securities <- c("AMZN US Equity", "OCN US Equity", "123456 XX Equity")
> fields1 <- c("NAME", "PX_LAST", "TIME", "SETTLE_DT")
> fields2 <- "VOLUME"
> library(RBloomberg)
Loading required package: rJava
> conn <- blpConnect()
R version 2.13.1 (2011-07-08)
rJava Version 0.8-8
RBloomberg Version 0.4-149
Java environment initialized successfully.
Looking for most recent blpapi3.jar file...
Adding C:\blp\API\APIv3\JavaAPI\v3.4.3.2\lib\blpapi3.jar to Java classpath
Bloomberg API Version 3.4.3.2

> bdp(conn, securities, fields1)
Error in .jcall("RJavaTools", "Ljava/lang/Object;", "invokeMethod", cl,  :
  org.findata.blpwrapper.WrapperException: invalid security 123456 XX
Equity

> bdp(conn, securities[1:2], fields1)
                               NAME PX_LAST     TIME  SETTLE_DT
AMZN US Equity       AMAZON.COM INC  202.30 15:49:42 2011-08-18
OCN US Equity  OCWEN FINANCIAL CORP   13.03 15:49:43 2011-08-18

> bdh(conn, securities[1:2], fields2, "20110810", "20110814")
           ticker       date  VOLUME
1  AMZN US Equity 2011-08-10 8757585
2  AMZN US Equity 2011-08-11 7404618
3  AMZN US Equity 2011-08-12 5620580
4  AMZN US Equity 2011-08-13      NA
5  AMZN US Equity 2011-08-14      NA
6   OCN US Equity 2011-08-10 1874309
7   OCN US Equity 2011-08-11 1257872
8   OCN US Equity 2011-08-12 1430524
9   OCN US Equity 2011-08-13      NA
10  OCN US Equity 2011-08-14      NA

> bdh(conn, securities, fields2, "20110810", "20110814")
Error in .jcall("RJavaTools", "Ljava/lang/Object;", "invokeMethod", cl,  :
  org.findata.blpwrapper.WrapperException: invalid security 123456 XX
Equity

> blpDisconnect(conn)
         used (Mb) gc trigger (Mb) max used (Mb)
Ncells 241304  6.5     407500 10.9   350000  9.4
Vcells 124164  1.0     786432  6.0   458087  3.5

> conn <- blpConnect(throw.ticker.errors = FALSE)
R version 2.13.1 (2011-07-08)
rJava Version 0.8-8
RBloomberg Version 0.4-149
Java environment initialized successfully.
Looking for most recent blpapi3.jar file...
Adding C:\blp\API\APIv3\JavaAPI\v3.4.3.2\lib\blpapi3.jar to Java classpath
Bloomberg API Version 3.4.3.2

> bdp(conn, securities[1:2], fields1)
                               NAME PX_LAST     TIME  SETTLE_DT
AMZN US Equity       AMAZON.COM INC  202.42 15:51:52 2011-08-18
OCN US Equity  OCWEN FINANCIAL CORP   13.03 15:51:30 2011-08-18

> bdp(conn, securities, fields1)
                                 NAME PX_LAST     TIME  SETTLE_DT
AMZN US Equity         AMAZON.COM INC  202.42 15:52:02 2011-08-18
OCN US Equity    OCWEN FINANCIAL CORP   13.03 15:51:30 2011-08-18
123456 XX Equity                 <NA>      NA     <NA>       <NA>

> bdh(conn, securities[1:2], fields2, "20110810", "20110814")
           ticker       date  VOLUME
1  AMZN US Equity 2011-08-10 8757585
2  AMZN US Equity 2011-08-11 7404618
3  AMZN US Equity 2011-08-12 5620580
4  AMZN US Equity 2011-08-13      NA
5  AMZN US Equity 2011-08-14      NA
6   OCN US Equity 2011-08-10 1874309
7   OCN US Equity 2011-08-11 1257872
8   OCN US Equity 2011-08-12 1430524
9   OCN US Equity 2011-08-13      NA
10  OCN US Equity 2011-08-14      NA

> bdh(conn, securities, fields2, "20110810", "20110814")
Error in rep(security, dim(matrix.data)[1]) : invalid 'times' argument
>

I was expecting the last call to return NAs for the invalid security rather
than an error.

Regards


Gordon M Morrison

************************************************************
HSBC Bank plc may be solicited in the course of its placement efforts for a
new issue, by investment clients of the firm for whom the Bank as a firm
already provides other services. It may equally decide to allocate to its
own proprietary book or with an associate of HSBC Group. This represents a
potential conflict of interest. HSBC Bank plc has internal arrangements
designed to ensure that the firm would give unbiased and full advice to the
corporate finance client about the valuation and pricing of the offering as
well as internal systems, controls and procedures to identify and manage
conflicts of interest.

HSBC Bank plc
Registered Office: 8 Canada Square, London E14 5HQ, United Kingdom
Registered in England - Number 14259
Authorised and regulated by the Financial Services Authority.
************************************************************

-----------------------------------------
SAVE PAPER - THINK BEFORE YOU PRINT!

This transmission has been issued by a member of the HSBC Group
"HSBC" for the information of the addressee only and should not be
reproduced and/or distributed to any other person. Each page
attached hereto must be read in conjunction with any disclaimer
which forms part of it. Unless otherwise stated, this transmission
is neither an offer nor the solicitation of an offer to sell or
purchase any investment. Its contents are based on information
obtained from sources believed to be reliable but HSBC makes no
representation and accepts no responsibility or liability as to its
completeness or accuracy.


From nelson.ana at gmail.com  Mon Aug 15 17:29:01 2011
From: nelson.ana at gmail.com (Ana Nelson)
Date: Mon, 15 Aug 2011 16:29:01 +0100
Subject: [R-SIG-Finance] Accessing Bloomberg historic data for invalid
 codes with RBloomberg
In-Reply-To: <OF5C2B1D88.A981B875-ON802578ED.00534C2B-802578ED.0054325A@hsbcib.com>
References: <OF5C2B1D88.A981B875-ON802578ED.00534C2B-802578ED.0054325A@hsbcib.com>
Message-ID: <CAJOva6Geh=oh9GJuMCvKO+xe_CTUAZgxCY9JW60k-fULeFaSZw@mail.gmail.com>

Hi, Gordon,

It looks like the error is a different one. So the data is being
returned but then something is going wrong in the post-processing.

Thanks for sending a reproducible example. I'll try to take a look at this.

-Ana


On Mon, Aug 15, 2011 at 4:19 PM,  <gordon.morrison at hsbcib.com> wrote:
>
> Can anyone shed any light into what I am doing wrong
>
>> securities <- c("AMZN US Equity", "OCN US Equity", "123456 XX Equity")
>> fields1 <- c("NAME", "PX_LAST", "TIME", "SETTLE_DT")
>> fields2 <- "VOLUME"
>> library(RBloomberg)
> Loading required package: rJava
>> conn <- blpConnect()
> R version 2.13.1 (2011-07-08)
> rJava Version 0.8-8
> RBloomberg Version 0.4-149
> Java environment initialized successfully.
> Looking for most recent blpapi3.jar file...
> Adding C:\blp\API\APIv3\JavaAPI\v3.4.3.2\lib\blpapi3.jar to Java classpath
> Bloomberg API Version 3.4.3.2
>
>> bdp(conn, securities, fields1)
> Error in .jcall("RJavaTools", "Ljava/lang/Object;", "invokeMethod", cl, ?:
> ?org.findata.blpwrapper.WrapperException: invalid security 123456 XX
> Equity
>
>> bdp(conn, securities[1:2], fields1)
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? NAME PX_LAST ? ? TIME ?SETTLE_DT
> AMZN US Equity ? ? ? AMAZON.COM INC ?202.30 15:49:42 2011-08-18
> OCN US Equity ?OCWEN FINANCIAL CORP ? 13.03 15:49:43 2011-08-18
>
>> bdh(conn, securities[1:2], fields2, "20110810", "20110814")
> ? ? ? ? ? ticker ? ? ? date ?VOLUME
> 1 ?AMZN US Equity 2011-08-10 8757585
> 2 ?AMZN US Equity 2011-08-11 7404618
> 3 ?AMZN US Equity 2011-08-12 5620580
> 4 ?AMZN US Equity 2011-08-13 ? ? ?NA
> 5 ?AMZN US Equity 2011-08-14 ? ? ?NA
> 6 ? OCN US Equity 2011-08-10 1874309
> 7 ? OCN US Equity 2011-08-11 1257872
> 8 ? OCN US Equity 2011-08-12 1430524
> 9 ? OCN US Equity 2011-08-13 ? ? ?NA
> 10 ?OCN US Equity 2011-08-14 ? ? ?NA
>
>> bdh(conn, securities, fields2, "20110810", "20110814")
> Error in .jcall("RJavaTools", "Ljava/lang/Object;", "invokeMethod", cl, ?:
> ?org.findata.blpwrapper.WrapperException: invalid security 123456 XX
> Equity
>
>> blpDisconnect(conn)
> ? ? ? ? used (Mb) gc trigger (Mb) max used (Mb)
> Ncells 241304 ?6.5 ? ? 407500 10.9 ? 350000 ?9.4
> Vcells 124164 ?1.0 ? ? 786432 ?6.0 458087 3.5
>
>> conn <- blpConnect(throw.ticker.errors = FALSE)
> R version 2.13.1 (2011-07-08)
> rJava Version 0.8-8
> RBloomberg Version 0.4-149
> Java environment initialized successfully.
> Looking for most recent blpapi3.jar file...
> Adding C:\blp\API\APIv3\JavaAPI\v3.4.3.2\lib\blpapi3.jar to Java classpath
> Bloomberg API Version 3.4.3.2
>
>> bdp(conn, securities[1:2], fields1)
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? NAME PX_LAST ? ? TIME ?SETTLE_DT
> AMZN US Equity ? ? ? AMAZON.COM INC ?202.42 15:51:52 2011-08-18
> OCN US Equity ?OCWEN FINANCIAL CORP ? 13.03 15:51:30 2011-08-18
>
>> bdp(conn, securities, fields1)
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? NAME PX_LAST ? ? TIME ?SETTLE_DT
> AMZN US Equity ? ? ? ? AMAZON.COM INC ?202.42 15:52:02 2011-08-18
> OCN US Equity ? ?OCWEN FINANCIAL CORP ? 13.03 15:51:30 2011-08-18
> 123456 XX Equity ? ? ? ? ? ? ? ? <NA> ? ? ?NA ? ? <NA> ? ? ? <NA>
>
>> bdh(conn, securities[1:2], fields2, "20110810", "20110814")
> ? ? ? ? ? ticker ? ? ? date ?VOLUME
> 1 ?AMZN US Equity 2011-08-10 8757585
> 2 ?AMZN US Equity 2011-08-11 7404618
> 3 ?AMZN US Equity 2011-08-12 5620580
> 4 ?AMZN US Equity 2011-08-13 ? ? ?NA
> 5 ?AMZN US Equity 2011-08-14 ? ? ?NA
> 6 ? OCN US Equity 2011-08-10 1874309
> 7 ? OCN US Equity 2011-08-11 1257872
> 8 ? OCN US Equity 2011-08-12 1430524
> 9 ? OCN US Equity 2011-08-13 ? ? ?NA
> 10 ?OCN US Equity 2011-08-14 ? ? ?NA
>
>> bdh(conn, securities, fields2, "20110810", "20110814")
> Error in rep(security, dim(matrix.data)[1]) : invalid 'times' argument
>>
>
> I was expecting the last call to return NAs for the invalid security rather
> than an error.
>
> Regards
>
>
> Gordon M Morrison
>
> ************************************************************
> HSBC Bank plc may be solicited in the course of its placement efforts for a
> new issue, by investment clients of the firm for whom the Bank as a firm
> already provides other services. It may equally decide to allocate to its
> own proprietary book or with an associate of HSBC Group. This represents a
> potential conflict of interest. HSBC Bank plc has internal arrangements
> designed to ensure that the firm would give unbiased and full advice to the
> corporate finance client about the valuation and pricing of the offering as
> well as internal systems, controls and procedures to identify and manage
> conflicts of interest.
>
> HSBC Bank plc
> Registered Office: 8 Canada Square, London E14 5HQ, United Kingdom
> Registered in England - Number 14259
> Authorised and regulated by the Financial Services Authority.
> ************************************************************
>
> -----------------------------------------
> SAVE PAPER - THINK BEFORE YOU PRINT!
>
> This transmission has been issued by a member of the HSBC Group
> "HSBC" for the information of the addressee only and should not be
> reproduced and/or distributed to any other person. Each page
> attached hereto must be read in conjunction with any disclaimer
> which forms part of it. Unless otherwise stated, this transmission
> is neither an offer nor the solicitation of an offer to sell or
> purchase any investment. Its contents are based on information
> obtained from sources believed to be reliable but HSBC makes no
> representation and accepts no responsibility or liability as to its
> completeness or accuracy.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From benhurh at gmail.com  Mon Aug 15 17:56:15 2011
From: benhurh at gmail.com (Ben Hurh)
Date: Mon, 15 Aug 2011 10:56:15 -0500
Subject: [R-SIG-Finance] Accessing Bloomberg historic data for invalid
 codes with RBloomberg
In-Reply-To: <CAJOva6Geh=oh9GJuMCvKO+xe_CTUAZgxCY9JW60k-fULeFaSZw@mail.gmail.com>
References: <OF5C2B1D88.A981B875-ON802578ED.00534C2B-802578ED.0054325A@hsbcib.com>
	<CAJOva6Geh=oh9GJuMCvKO+xe_CTUAZgxCY9JW60k-fULeFaSZw@mail.gmail.com>
Message-ID: <CADunhEUwFvxiB3muA3gEmNsvr39JY6VkYOQ3pJA_Fw3Y77Ehjg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110815/6852d55a/attachment.pl>

From idris.raja at gmail.com  Mon Aug 15 22:28:50 2011
From: idris.raja at gmail.com (Idris Raja)
Date: Mon, 15 Aug 2011 13:28:50 -0700
Subject: [R-SIG-Finance] Change Size of Axis and Labels in
	chart.RollingPerformance in package PerformanceAnalytics
Message-ID: <CAAHOP_-iuP_LP85Xq3tHHK2pzkf5QOZS09qY8zcfCCAw0Q8pBA@mail.gmail.com>

I'm trying to change the font size of the axis labels in the chart from
"charts.RollingPerformance" in the PerformanceAnalytics package without any
luck.

I've tried:

require(quantmod)
require(PerformanceAnalytics)
data(managers)
# tried various cex options like cex.lab, cex.axis, cex.ylab... none seem to
work
charts.RollingPerformance(managers, cex.lab = 2, cex.axis=2)

As you can see from the included picture, the default labels are way too
small. I'm guessing this is something easy but not obvious. Does anyone know
how to do this?

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110815/e66b8679/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: small_axes.jpg
Type: image/jpeg
Size: 124779 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110815/e66b8679/attachment.jpg>

From peter at braverock.com  Mon Aug 15 23:10:03 2011
From: peter at braverock.com (Peter Carl)
Date: Mon, 15 Aug 2011 16:10:03 -0500
Subject: [R-SIG-Finance] Change Size of Axis and Labels in
 chart.RollingPerformance in package PerformanceAnalytics
In-Reply-To: <CAAHOP_-iuP_LP85Xq3tHHK2pzkf5QOZS09qY8zcfCCAw0Q8pBA@mail.gmail.com>
References: <CAAHOP_-iuP_LP85Xq3tHHK2pzkf5QOZS09qY8zcfCCAw0Q8pBA@mail.gmail.com>
Message-ID: <d97202fd6301c0f50e200e7ef5a4a594.squirrel@mail.braverock.com>

I've attached what I get when I run your example.  Sorry to do this to
you, but it works for me:

> charts.RollingPerformance(managers, cex.lab = 2, cex.axis=2)

Something in your par settings?

pcc
-- 
Peter Carl
http://www.braverock.com/~peter

> I'm trying to change the font size of the axis labels in the chart from
> "charts.RollingPerformance" in the PerformanceAnalytics package without
> any
> luck.
>
> I've tried:
>
> require(quantmod)
> require(PerformanceAnalytics)
> data(managers)
> # tried various cex options like cex.lab, cex.axis, cex.ylab... none seem
> to
> work
> charts.RollingPerformance(managers, cex.lab = 2, cex.axis=2)
>
> As you can see from the included picture, the default labels are way too
> small. I'm guessing this is something easy but not obvious. Does anyone
> know
> how to do this?
>
> Thanks
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rstudio-plot.png
Type: image/png
Size: 97501 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110815/f3cfb3aa/attachment.png>

From idris.raja at gmail.com  Mon Aug 15 23:22:56 2011
From: idris.raja at gmail.com (Idris Raja)
Date: Mon, 15 Aug 2011 14:22:56 -0700
Subject: [R-SIG-Finance] Change Size of Axis and Labels in
 chart.RollingPerformance in package PerformanceAnalytics
In-Reply-To: <d97202fd6301c0f50e200e7ef5a4a594.squirrel@mail.braverock.com>
References: <CAAHOP_-iuP_LP85Xq3tHHK2pzkf5QOZS09qY8zcfCCAw0Q8pBA@mail.gmail.com>
	<d97202fd6301c0f50e200e7ef5a4a594.squirrel@mail.braverock.com>
Message-ID: <CAAHOP_9K1_4BESVBL2rw5Z-+F3pjcf1eva=uMQrNFCUcyvbshw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110815/eb1a5e7d/attachment.pl>

From brian at braverock.com  Mon Aug 15 23:51:13 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 15 Aug 2011 16:51:13 -0500
Subject: [R-SIG-Finance] Change Size of Axis and Labels in
 chart.RollingPerformance in package PerformanceAnalytics
In-Reply-To: <CAAHOP_9K1_4BESVBL2rw5Z-+F3pjcf1eva=uMQrNFCUcyvbshw@mail.gmail.com>
References: <CAAHOP_-iuP_LP85Xq3tHHK2pzkf5QOZS09qY8zcfCCAw0Q8pBA@mail.gmail.com>
	<d97202fd6301c0f50e200e7ef5a4a594.squirrel@mail.braverock.com>
	<CAAHOP_9K1_4BESVBL2rw5Z-+F3pjcf1eva=uMQrNFCUcyvbshw@mail.gmail.com>
Message-ID: <1313445073.30726.126.camel@brian-rcg>

On Mon, 2011-08-15 at 14:22 -0700, Idris Raja wrote:
> Sorry for the ambiguity, but I was referring to changing the size of the
> labels on the y-axis "Annualized Return", "Annualized Standard Deviation",
> and "Annualized Sharpe Ratio."

Those are sized to *fit* on the vertical axis in each pane.  How do you
propose to fit all that text in a fixed-size pane?


-- 
Brian


From idris.raja at gmail.com  Tue Aug 16 00:01:48 2011
From: idris.raja at gmail.com (Idris Raja)
Date: Mon, 15 Aug 2011 15:01:48 -0700
Subject: [R-SIG-Finance] Change Size of Axis and Labels in
 chart.RollingPerformance in package PerformanceAnalytics
In-Reply-To: <1313445073.30726.126.camel@brian-rcg>
References: <CAAHOP_-iuP_LP85Xq3tHHK2pzkf5QOZS09qY8zcfCCAw0Q8pBA@mail.gmail.com>
	<d97202fd6301c0f50e200e7ef5a4a594.squirrel@mail.braverock.com>
	<CAAHOP_9K1_4BESVBL2rw5Z-+F3pjcf1eva=uMQrNFCUcyvbshw@mail.gmail.com>
	<1313445073.30726.126.camel@brian-rcg>
Message-ID: <CAAHOP_-0JkUxDdd0DPOBn3xm3gjCgkinjVV6TUo5DRcTMF3Xzw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110815/59a418b7/attachment.pl>

From jeff.a.ryan at gmail.com  Tue Aug 16 00:35:56 2011
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Mon, 15 Aug 2011 17:35:56 -0500
Subject: [R-SIG-Finance] Change Size of Axis and Labels in
	chart.RollingPerformance in package PerformanceAnalytics
In-Reply-To: <CAAHOP_-0JkUxDdd0DPOBn3xm3gjCgkinjVV6TUo5DRcTMF3Xzw@mail.gmail.com>
References: <CAAHOP_-iuP_LP85Xq3tHHK2pzkf5QOZS09qY8zcfCCAw0Q8pBA@mail.gmail.com>
	<d97202fd6301c0f50e200e7ef5a4a594.squirrel@mail.braverock.com>
	<CAAHOP_9K1_4BESVBL2rw5Z-+F3pjcf1eva=uMQrNFCUcyvbshw@mail.gmail.com>
	<1313445073.30726.126.camel@brian-rcg>
	<CAAHOP_-0JkUxDdd0DPOBn3xm3gjCgkinjVV6TUo5DRcTMF3Xzw@mail.gmail.com>
Message-ID: <2DF5A197-6F6F-4BCD-B453-F98F684F0BD5@gmail.com>

Line breaks aren't portable. Only work on nix base on my experiences with writing quantmod. Device dependent in other words. 

Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Aug 15, 2011, at 5:01 PM, Idris Raja <idris.raja at gmail.com> wrote:

> Line breaks, so that it's "Annualized\nReturn", "Annualized\nStandard
> Deviation" , "Annualized\nSharpe Ratio"
> 
> I can already hear the moaning of my users when they say they can't read the
> labels on the charts.
> 
> On Mon, Aug 15, 2011 at 2:51 PM, Brian G. Peterson <brian at braverock.com>wrote:
> 
>> On Mon, 2011-08-15 at 14:22 -0700, Idris Raja wrote:
>>> Sorry for the ambiguity, but I was referring to changing the size of the
>>> labels on the y-axis "Annualized Return", "Annualized Standard
>> Deviation",
>>> and "Annualized Sharpe Ratio."
>> 
>> Those are sized to *fit* on the vertical axis in each pane.  How do you
>> propose to fit all that text in a fixed-size pane?
>> 
>> 
>> --
>> Brian
>> 
>> 
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From idris.raja at gmail.com  Tue Aug 16 02:27:27 2011
From: idris.raja at gmail.com (Idris Raja)
Date: Mon, 15 Aug 2011 17:27:27 -0700
Subject: [R-SIG-Finance] Change Size of Axis and Labels in
 chart.RollingPerformance in package PerformanceAnalytics
In-Reply-To: <2DF5A197-6F6F-4BCD-B453-F98F684F0BD5@gmail.com>
References: <CAAHOP_-iuP_LP85Xq3tHHK2pzkf5QOZS09qY8zcfCCAw0Q8pBA@mail.gmail.com>
	<d97202fd6301c0f50e200e7ef5a4a594.squirrel@mail.braverock.com>
	<CAAHOP_9K1_4BESVBL2rw5Z-+F3pjcf1eva=uMQrNFCUcyvbshw@mail.gmail.com>
	<1313445073.30726.126.camel@brian-rcg>
	<CAAHOP_-0JkUxDdd0DPOBn3xm3gjCgkinjVV6TUo5DRcTMF3Xzw@mail.gmail.com>
	<2DF5A197-6F6F-4BCD-B453-F98F684F0BD5@gmail.com>
Message-ID: <CAAHOP_-nnO77ab7T8CVAq5oxgUpGAFSRA7PO3jPRAPBC4Ge=Sg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110815/67369a24/attachment.pl>

From jeff.a.ryan at gmail.com  Tue Aug 16 02:34:55 2011
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Mon, 15 Aug 2011 19:34:55 -0500
Subject: [R-SIG-Finance] Change Size of Axis and Labels in
	chart.RollingPerformance in package PerformanceAnalytics
In-Reply-To: <CAAHOP_-nnO77ab7T8CVAq5oxgUpGAFSRA7PO3jPRAPBC4Ge=Sg@mail.gmail.com>
References: <CAAHOP_-iuP_LP85Xq3tHHK2pzkf5QOZS09qY8zcfCCAw0Q8pBA@mail.gmail.com>
	<d97202fd6301c0f50e200e7ef5a4a594.squirrel@mail.braverock.com>
	<CAAHOP_9K1_4BESVBL2rw5Z-+F3pjcf1eva=uMQrNFCUcyvbshw@mail.gmail.com>
	<1313445073.30726.126.camel@brian-rcg>
	<CAAHOP_-0JkUxDdd0DPOBn3xm3gjCgkinjVV6TUo5DRcTMF3Xzw@mail.gmail.com>
	<2DF5A197-6F6F-4BCD-B453-F98F684F0BD5@gmail.com>
	<CAAHOP_-nnO77ab7T8CVAq5oxgUpGAFSRA7PO3jPRAPBC4Ge=Sg@mail.gmail.com>
Message-ID: <6C9B0D83-B1B5-4349-9822-886D71D7B136@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110815/31299d4b/attachment.pl>

From peter at braverock.com  Tue Aug 16 03:20:23 2011
From: peter at braverock.com (Peter Carl)
Date: Mon, 15 Aug 2011 20:20:23 -0500
Subject: [R-SIG-Finance] Change Size of Axis and Labels in
 chart.RollingPerformance in package PerformanceAnalytics
In-Reply-To: <CAAHOP_9K1_4BESVBL2rw5Z-+F3pjcf1eva=uMQrNFCUcyvbshw@mail.gmail.com>
References: <CAAHOP_-iuP_LP85Xq3tHHK2pzkf5QOZS09qY8zcfCCAw0Q8pBA@mail.gmail.com>
	<d97202fd6301c0f50e200e7ef5a4a594.squirrel@mail.braverock.com>
	<CAAHOP_9K1_4BESVBL2rw5Z-+F3pjcf1eva=uMQrNFCUcyvbshw@mail.gmail.com>
Message-ID: <c25b904f83316fb9668cfa1cc6721fc2.squirrel@mail.braverock.com>

par() is your friend, although some of the graphs in PA might ignore
certain settings.  They will probably become more par friendly in the
future...

> par(cex.lab=2)
> charts.RollingPerformance(managers[,1:2])

pcc
-- 
Peter Carl
http://www.braverock.com/~peter

> Sorry for the ambiguity, but I was referring to changing the size of the
> labels on the y-axis "Annualized Return", "Annualized Standard Deviation",
> and "Annualized Sharpe Ratio."
>
> Thanks
>
> On Mon, Aug 15, 2011 at 2:10 PM, Peter Carl <peter at braverock.com> wrote:
>
>> I've attached what I get when I run your example.  Sorry to do this to
>> you, but it works for me:
>>
>> > charts.RollingPerformance(managers, cex.lab = 2, cex.axis=2)
>>
>> Something in your par settings?
>>
>> pcc
>> --
>> Peter Carl
>> http://www.braverock.com/~peter
>>
>> > I'm trying to change the font size of the axis labels in the chart
>> from
>> > "charts.RollingPerformance" in the PerformanceAnalytics package
>> without
>> > any
>> > luck.
>> >
>> > I've tried:
>> >
>> > require(quantmod)
>> > require(PerformanceAnalytics)
>> > data(managers)
>> > # tried various cex options like cex.lab, cex.axis, cex.ylab... none
>> seem
>> > to
>> > work
>> > charts.RollingPerformance(managers, cex.lab = 2, cex.axis=2)
>> >
>> > As you can see from the included picture, the default labels are way
>> too
>> > small. I'm guessing this is something easy but not obvious. Does
>> anyone
>> > know
>> > how to do this?
>> >
>> > Thanks
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R
>> questions
>> > should go.
>>
>


From idris.raja at gmail.com  Tue Aug 16 04:04:08 2011
From: idris.raja at gmail.com (Idris Raja)
Date: Mon, 15 Aug 2011 19:04:08 -0700
Subject: [R-SIG-Finance] Change Size of Axis and Labels in
 chart.RollingPerformance in package PerformanceAnalytics
In-Reply-To: <c25b904f83316fb9668cfa1cc6721fc2.squirrel@mail.braverock.com>
References: <CAAHOP_-iuP_LP85Xq3tHHK2pzkf5QOZS09qY8zcfCCAw0Q8pBA@mail.gmail.com>
	<d97202fd6301c0f50e200e7ef5a4a594.squirrel@mail.braverock.com>
	<CAAHOP_9K1_4BESVBL2rw5Z-+F3pjcf1eva=uMQrNFCUcyvbshw@mail.gmail.com>
	<c25b904f83316fb9668cfa1cc6721fc2.squirrel@mail.braverock.com>
Message-ID: <CAAHOP_8Efk30LUbcBAw_v4bJJR4n3C7dkcLrcZ3TiO5Hxit0UA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110815/5d0541a8/attachment.pl>

From wjlee2002 at naver.com  Tue Aug 16 05:44:49 2011
From: wjlee2002 at naver.com (=?EUC-KR?B?wMy/+MDn?=)
Date: Tue, 16 Aug 2011 12:44:49 +0900
Subject: [R-SIG-Finance] =?euc-kr?q?=5BR=5D_how_to_vectorize_EuropeanOptio?=
	=?euc-kr?q?nImpliedVolatility?=
Message-ID: <c3c8e2531b5ff71ee2726314d487ab50@tweb20-2.nm>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110816/1dc42193/attachment.pl>

From edd at debian.org  Tue Aug 16 14:54:27 2011
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 16 Aug 2011 07:54:27 -0500
Subject: [R-SIG-Finance] [R] how to vectorize
	EuropeanOptio	nImpliedVolatility
In-Reply-To: <c3c8e2531b5ff71ee2726314d487ab50@tweb20-2.nm>
References: <c3c8e2531b5ff71ee2726314d487ab50@tweb20-2.nm>
Message-ID: <20042.26755.445614.629147@max.nulle.part>


On 16 August 2011 at 12:44, ??? wrote:
| Hi, 
| I had error messages as below with EuropeanOptionImpliedVolatility function because this function is limited to scalar cases. 
| Is there any way to use vectorized inputs instead of loop?

Yes. Patches welcome. 

I wrote the code below almost a decade ago when I knew a lot less about R
programming, but seemingly I haven't gotten around to making it much
cleaner.   One obvious solution would be vector inputs to the C++ layer but
then I could never decide which of input type, value, spot, strike, divyield,
riskfree, timetomaturity I would want as a vector.  Possibly all, but then
the return array (or list) becomes a little hard to handle.

Dirk

| Thanks in advance
| Wonjae Lee
| underlying=c(100,90,95)
| value=c(11.1,11.2,11.3)
| type=c("call","call","call")
| strike=c(120,110,110)
| dividendYield=c(0,0,0)
| riskFreeRate=c(0.03,0.03,0.03)
| maturity=c(0.5,0.5,0.5)
| initialvolatility=c(0.25,0.25,0.25)
| EuropeanOptionImpliedVolatility(type,value,underlying, strike, dividendYield, riskFreeRate, maturity, initialvolatility)
| > EuropeanOptionImpliedVolatility(type,value,underlying, strike, dividendYield, riskFreeRate, maturity, initialvolatility)
| Error in EuropeanOptionImpliedVolatility.default(type, value, underlying, : 
|  expecting a single value
| > mapply(EuropeanOptionImpliedVolatility(type,
| value
| ,
| underlying
| , strike, dividendYield, riskFreeRate, maturity, 
| initialvolatility
| ),
| type,
| value
| ,
| underlying
| , strike, dividendYield, riskFreeRate, maturity, initialvolatility
|  )
| Error in EuropeanOptionImpliedVolatility.default(type, val, und, strike, : 
|  expecting a single value
| 
| 	[[alternative HTML version deleted]]
| 
| _______________________________________________
| R-SIG-Finance at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-sig-finance
| -- Subscriber-posting only. If you want to post, subscribe first.
| -- Also note that this is not the r-help list where general R questions should go.

-- 
Two new Rcpp master classes for R and C++ integration scheduled for 
New York (Sep 24) and San Francisco (Oct 8), more details are at
http://dirk.eddelbuettel.com/blog/2011/08/04#rcpp_classes_2011-09_and_2011-10
http://www.revolutionanalytics.com/products/training/public/rcpp-master-class.php


From david_t_mansfield at hotmail.com  Wed Aug 17 15:52:01 2011
From: david_t_mansfield at hotmail.com (David Mansfield)
Date: Wed, 17 Aug 2011 06:52:01 -0700 (PDT)
Subject: [R-SIG-Finance] RBloomberg update on "Error in dimnames(x) <-
 dn : 'dimnames' applied to non-array"
In-Reply-To: <CADunhEUtpHtApWxRgLudYXU7mSP-AM+Q=hnnejPX819R_YepLg@mail.gmail.com>
References: <CAJOva6FDMY9ik=QT4MZ+z53Urcbg=+p1Hk0OJOXUMJ6aaBJTEg@mail.gmail.com>
	<1311090762818-3678480.post@n4.nabble.com>
	<1312317546620-3713680.post@n4.nabble.com>
	<CAA3Wa=uzf2KOygoO4XAgeWLJjsJsSQw6JgfoJg6RQ2QTNFkSUA@mail.gmail.com>
	<CADunhEUtpHtApWxRgLudYXU7mSP-AM+Q=hnnejPX819R_YepLg@mail.gmail.com>
Message-ID: <1313589121661-3750034.post@n4.nabble.com>


Hi there,

Was wondering if you had managed to fix the issue quoted above with the
version of rJava being used with RBloomberg.

"Error in dimnames(x) <- dn : 'dimnames' applied to non-array"

I have attempted to install the earlier version of rJava as you suggested,
but I get the following.

Error in gzfile(file, "r") : cannot open the connection
In addition: Warning message:
In gzfile(file, "r") :
  cannot open compressed file 'rJava_0.8-8.tar/DESCRIPTION', probable reason
'No such file or directory'

Do you have any ideas as to what might be going wrong with the manual
install of rJava_08-8 ?

Thanks
David

--
View this message in context: http://r.789695.n4.nabble.com/RBloomberg-update-on-Error-in-dimnames-x-dn-dimnames-applied-to-non-array-tp3660756p3750034.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From nelson.ana at gmail.com  Wed Aug 17 16:35:03 2011
From: nelson.ana at gmail.com (Ana Nelson)
Date: Wed, 17 Aug 2011 15:35:03 +0100
Subject: [R-SIG-Finance] RBloomberg update on "Error in dimnames(x) <-
 dn : 'dimnames' applied to non-array"
In-Reply-To: <1313589121661-3750034.post@n4.nabble.com>
References: <CAJOva6FDMY9ik=QT4MZ+z53Urcbg=+p1Hk0OJOXUMJ6aaBJTEg@mail.gmail.com>
	<1311090762818-3678480.post@n4.nabble.com>
	<1312317546620-3713680.post@n4.nabble.com>
	<CAA3Wa=uzf2KOygoO4XAgeWLJjsJsSQw6JgfoJg6RQ2QTNFkSUA@mail.gmail.com>
	<CADunhEUtpHtApWxRgLudYXU7mSP-AM+Q=hnnejPX819R_YepLg@mail.gmail.com>
	<1313589121661-3750034.post@n4.nabble.com>
Message-ID: <CAJOva6EXg7XgRCwjcpvYg70nc4fapyxSxRpH+y4-p16q=kZbyw@mail.gmail.com>

Hi, all,

A fix is being tested, hopefully it will be available soon.




On Wed, Aug 17, 2011 at 2:52 PM, David Mansfield
<david_t_mansfield at hotmail.com> wrote:
>
> Hi there,
>
> Was wondering if you had managed to fix the issue quoted above with the
> version of rJava being used with RBloomberg.
>
> "Error in dimnames(x) <- dn : 'dimnames' applied to non-array"
>
> I have attempted to install the earlier version of rJava as you suggested,
> but I get the following.
>
> Error in gzfile(file, "r") : cannot open the connection
> In addition: Warning message:
> In gzfile(file, "r") :
> ?cannot open compressed file 'rJava_0.8-8.tar/DESCRIPTION', probable reason
> 'No such file or directory'
>
> Do you have any ideas as to what might be going wrong with the manual
> install of rJava_08-8 ?
>
> Thanks
> David
>
> --
> View this message in context: http://r.789695.n4.nabble.com/RBloomberg-update-on-Error-in-dimnames-x-dn-dimnames-applied-to-non-array-tp3660756p3750034.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From krishna at primps.com.sg  Fri Aug 19 05:53:25 2011
From: krishna at primps.com.sg (SNV Krishna)
Date: Fri, 19 Aug 2011 11:53:25 +0800
Subject: [R-SIG-Finance] Error with getSymbols
In-Reply-To: <CAJOva6EXg7XgRCwjcpvYg70nc4fapyxSxRpH+y4-p16q=kZbyw@mail.gmail.com>
References: <CAJOva6FDMY9ik=QT4MZ+z53Urcbg=+p1Hk0OJOXUMJ6aaBJTEg@mail.gmail.com><1311090762818-3678480.post@n4.nabble.com><1312317546620-3713680.post@n4.nabble.com><CAA3Wa=uzf2KOygoO4XAgeWLJjsJsSQw6JgfoJg6RQ2QTNFkSUA@mail.gmail.com><CADunhEUtpHtApWxRgLudYXU7mSP-AM+Q=hnnejPX819R_YepLg@mail.gmail.com><1313589121661-3750034.post@n4.nabble.com>
	<CAJOva6EXg7XgRCwjcpvYg70nc4fapyxSxRpH+y4-p16q=kZbyw@mail.gmail.com>
Message-ID: <170A2634BB9246E2BF0484B1CF2D9E08@primpsg>

Hi All,

Could some one help me with this error

> getSymbols("PAYEMS",src = "FRED")
Error in as.POSIXlt.character(x, tz, ...) : 
  character string is not in a standard unambiguous format

I could download a few of other series like 'CCNA' with out error. Being a
newbie, I could'nt decipher what the error means. Many thanks for the
guidance and help.

Regards,

S.N.V. Krishna


From idris.raja at gmail.com  Sat Aug 20 18:01:29 2011
From: idris.raja at gmail.com (Idris Raja)
Date: Sat, 20 Aug 2011 09:01:29 -0700
Subject: [R-SIG-Finance] Error with getSymbols
In-Reply-To: <170A2634BB9246E2BF0484B1CF2D9E08@primpsg>
References: <CAJOva6FDMY9ik=QT4MZ+z53Urcbg=+p1Hk0OJOXUMJ6aaBJTEg@mail.gmail.com>
	<1311090762818-3678480.post@n4.nabble.com>
	<1312317546620-3713680.post@n4.nabble.com>
	<CAA3Wa=uzf2KOygoO4XAgeWLJjsJsSQw6JgfoJg6RQ2QTNFkSUA@mail.gmail.com>
	<CADunhEUtpHtApWxRgLudYXU7mSP-AM+Q=hnnejPX819R_YepLg@mail.gmail.com>
	<1313589121661-3750034.post@n4.nabble.com>
	<CAJOva6EXg7XgRCwjcpvYg70nc4fapyxSxRpH+y4-p16q=kZbyw@mail.gmail.com>
	<170A2634BB9246E2BF0484B1CF2D9E08@primpsg>
Message-ID: <CAAHOP_9V4WWkZTFccKa7ZxXz+4xRffjy0ZFd=EnFWh64_j8EOA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110820/b4e94974/attachment.pl>

From randomcz at gmail.com  Mon Aug 22 02:43:03 2011
From: randomcz at gmail.com (randomcz)
Date: Sun, 21 Aug 2011 17:43:03 -0700 (PDT)
Subject: [R-SIG-Finance] quantmod charting problems
Message-ID: <1313973783354-3759201.post@n4.nabble.com>

Hi,

The quantmod addTA function works well in one figure, but in the custom
layout, it generates a second plot rather overlapping the main plot. My
objective is to plot two stocks in one figure, and each of them have a set
of technical indicators.

The following codes works, but the TA argument in the chartSeries is just
not as powerful as addTA.

getSymbols(c('QQQQ','SPY')) 
layout(matrix(1:2,2,1),c(1,1),c(1,1))
chartSeries(QQQQ['2011'], layout=NULL, TA="addSMA(10);addSMA(20)")
chartSeries(SPY['2011'], layout=NULL, TA="addSMA(10);addSMA(20)")


The following codes do not work.

getSymbols(c('QQQQ','SPY')) 
layout(matrix(1:2,2,1),c(1,1),c(1,1))
chartSeries(QQQQ['2011'], layout=NULL, TA=NULL)
addSMA(10)
addSMA(20)
chartSeries(SPY['2011'], layout=NULL, TA=NULL)
addSMA(10)
addSMA(20)

Thanks,
Michael


--
View this message in context: http://r.789695.n4.nabble.com/quantmod-charting-problems-tp3759201p3759201.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Mon Aug 22 03:38:37 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 21 Aug 2011 20:38:37 -0500
Subject: [R-SIG-Finance] quantmod charting problems
In-Reply-To: <1313973783354-3759201.post@n4.nabble.com>
References: <1313973783354-3759201.post@n4.nabble.com>
Message-ID: <1313977117.3759.0.camel@brian-desktop>

try 

on=0

as a parameter to addTa (or add_TA, which works with the newer
chart_Seris)

Cheers,

   - Brian


On Sun, 2011-08-21 at 17:43 -0700, randomcz wrote:
> Hi,
> 
> The quantmod addTA function works well in one figure, but in the custom
> layout, it generates a second plot rather overlapping the main plot. My
> objective is to plot two stocks in one figure, and each of them have a set
> of technical indicators.
> 
> The following codes works, but the TA argument in the chartSeries is just
> not as powerful as addTA.
> 
> getSymbols(c('QQQQ','SPY')) 
> layout(matrix(1:2,2,1),c(1,1),c(1,1))
> chartSeries(QQQQ['2011'], layout=NULL, TA="addSMA(10);addSMA(20)")
> chartSeries(SPY['2011'], layout=NULL, TA="addSMA(10);addSMA(20)")
> 
> 
> The following codes do not work.
> 
> getSymbols(c('QQQQ','SPY')) 
> layout(matrix(1:2,2,1),c(1,1),c(1,1))
> chartSeries(QQQQ['2011'], layout=NULL, TA=NULL)
> addSMA(10)
> addSMA(20)
> chartSeries(SPY['2011'], layout=NULL, TA=NULL)
> addSMA(10)
> addSMA(20)
> 
> Thanks,
> Michael
> 
> 
> --
> View this message in context: http://r.789695.n4.nabble.com/quantmod-charting-problems-tp3759201p3759201.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From randomcz at gmail.com  Mon Aug 22 07:29:33 2011
From: randomcz at gmail.com (randomcz)
Date: Sun, 21 Aug 2011 22:29:33 -0700 (PDT)
Subject: [R-SIG-Finance] quantmod charting problems
In-Reply-To: <1313977117.3759.0.camel@brian-desktop>
References: <1313973783354-3759201.post@n4.nabble.com>
	<1313977117.3759.0.camel@brian-desktop>
Message-ID: <1313990973975-3759377.post@n4.nabble.com>

Thanks Brian, but it seems that the new chart_Series does not support layout
argument. How to plot two stocks in one figure?

Michael

--
View this message in context: http://r.789695.n4.nabble.com/quantmod-charting-problems-tp3759201p3759377.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jantiom at gmail.com  Mon Aug 22 10:11:48 2011
From: jantiom at gmail.com (Gentil Homme)
Date: Mon, 22 Aug 2011 10:11:48 +0200
Subject: [R-SIG-Finance] Strategies based on Neural Networks (or SVMs) - any
	experience with R ?
Message-ID: <CAM9XErBdy2Aod=st98ktYC5v2_85cyz0323FtuN1axb+nL_r-A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110822/7a8305d4/attachment.pl>

From krishna at primps.com.sg  Mon Aug 22 10:12:54 2011
From: krishna at primps.com.sg (SNV Krishna)
Date: Mon, 22 Aug 2011 16:12:54 +0800
Subject: [R-SIG-Finance] Error with getSymbols
In-Reply-To: <CAAHOP_9V4WWkZTFccKa7ZxXz+4xRffjy0ZFd=EnFWh64_j8EOA@mail.gmail.com>
References: <CAJOva6FDMY9ik=QT4MZ+z53Urcbg=+p1Hk0OJOXUMJ6aaBJTEg@mail.gmail.com><1311090762818-3678480.post@n4.nabble.com><1312317546620-3713680.post@n4.nabble.com><CAA3Wa=uzf2KOygoO4XAgeWLJjsJsSQw6JgfoJg6RQ2QTNFkSUA@mail.gmail.com><CADunhEUtpHtApWxRgLudYXU7mSP-AM+Q=hnnejPX819R_YepLg@mail.gmail.com><1313589121661-3750034.post@n4.nabble.com><CAJOva6EXg7XgRCwjcpvYg70nc4fapyxSxRpH+y4-p16q=kZbyw@mail.gmail.com><170A2634BB9246E2BF0484B1CF2D9E08@primpsg>
	<CAAHOP_9V4WWkZTFccKa7ZxXz+4xRffjy0ZFd=EnFWh64_j8EOA@mail.gmail.com>
Message-ID: <B01F91666CB445D7B8BC661A7C7F2377@primpsg>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110822/a771bea3/attachment.pl>

From brian at braverock.com  Mon Aug 22 16:14:10 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 22 Aug 2011 09:14:10 -0500
Subject: [R-SIG-Finance] Strategies based on Neural Networks (or SVMs) -
 any experience with R ?
In-Reply-To: <CAM9XErBdy2Aod=st98ktYC5v2_85cyz0323FtuN1axb+nL_r-A@mail.gmail.com>
References: <CAM9XErBdy2Aod=st98ktYC5v2_85cyz0323FtuN1axb+nL_r-A@mail.gmail.com>
Message-ID: <1314022450.12569.6.camel@brian-rcg>

On Mon, 2011-08-22 at 10:11 +0200, Gentil Homme wrote:
> I just send out this post in order to share within r-sig-finance any
> possible experience, advice, ... about NNs or SVMs with R.

It seems that you're asking us to share with you, and not sharing much
yourself in return.

Perhaps you could answer your own questions in this thread with the
things you are trying?

SVM's have been discussed on this list many times, please search the
list archives.

This blog has covered this topic:
http://www.aphysicistinwallstreet.com/

Also, there are a few books on machine learning that use R.   

> Several good records have been published in the litterature using these
> techniques for financial trading strategies.

Which ones? References?

> There are also commercial packages (expensive !) which seem to have achieved
> good results.

Which packages?  References again?

Note that neural network strategies are very likely to create look-ahead
bias as you develop and test them.  You try something, fail, and try
again on the same data.  Unless you are very careful to reserve a 'pure'
set of instruments and dates that you won't *ever* touch until you think
you have a 'good' machine learning system, you're at pretty serious risk
of introducing your look-ahead knowledge into the system.  While this is
true to one degree or another in any quantitative strategy development,
I think it is a particular risk in self-adaptive machine learning
methodologies.

 
> So I feel it could be nice to share within this group about the following
> subjects :
> 
> - experience using the R packages
> - data pre-processing before feeding the NNs (technical indicators,
> wavelets, EMDs, ....)
> - which type of NNs are suitable
> - how to build and train them
> - etc ...
> 
> Thanks to all for sharing within the R community

Now, your turn.  Bring the community up to date with your research so
far.  

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From igor_vilcek_external at tatrabanka.sk  Mon Aug 22 17:14:57 2011
From: igor_vilcek_external at tatrabanka.sk (Igor)
Date: Mon, 22 Aug 2011 08:14:57 -0700 (PDT)
Subject: [R-SIG-Finance] Quantstrat - trading not just Crossovers (e.g.
	Moving Average)
Message-ID: <1314026097668-3760436.post@n4.nabble.com>

Hi,

I've encountered a problem in quanstrat framework, in case I want to trade
not just signalCrossovers (or better said, the modified version of a
Crossover). 

Specifically i would like to e.g. go Long if Price>MovingAverage and Exit if
Price<MovingAverage. 

This means, that if we have on a <b>starting *day Price>MovingAverage (not a
crossover, just "above"), i want the system to buy immediately on a starting
day. However, just once. 

If i tried sigComparison, this solved the problem with trading immediately
on a starting day, but started trading *anytime* a Price>MovingAverage
(every day in a row). 

To sum up, I need to know how to modify sigCrossover to trade also in case
"ABOVE" (not just crossover, e.g. on a start day if condition is met) or how
to modify sigComparison to make only 1 Long order (not every day the
condition is met, only on 1st and then not until Exit is made).


Thanks, best regards,

Igor 

--
View this message in context: http://r.789695.n4.nabble.com/Quantstrat-trading-not-just-Crossovers-e-g-Moving-Average-tp3760436p3760436.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From igor_vilcek_external at tatrabanka.sk  Mon Aug 22 17:19:44 2011
From: igor_vilcek_external at tatrabanka.sk (igor_vilcek_external at tatrabanka.sk)
Date: Mon, 22 Aug 2011 17:19:44 +0200
Subject: [R-SIG-Finance] Quantstrat - trading not just Crossovers (e.g.
	Moving Average)
Message-ID: <OF8E3B5BE7.10B5C907-ONC12578F4.0053DDEF-C12578F4.005482E1@tatrabanka.sk>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110822/91a1df92/attachment.pl>

From brian at braverock.com  Mon Aug 22 17:33:08 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 22 Aug 2011 10:33:08 -0500
Subject: [R-SIG-Finance] Quantstrat - trading not just Crossovers (e.g.
 Moving Average)
In-Reply-To: <OF8E3B5BE7.10B5C907-ONC12578F4.0053DDEF-C12578F4.005482E1@tatrabanka.sk>
References: <OF8E3B5BE7.10B5C907-ONC12578F4.0053DDEF-C12578F4.005482E1@tatrabanka.sk>
Message-ID: <1314027188.12569.11.camel@brian-rcg>

On Mon, 2011-08-22 at 17:19 +0200, igor_vilcek_external at tatrabanka.sk
wrote:
> Hi,
> 
> I've encountered a problem in quanstrat framework, in case I want to trade 
> not just signalCrossovers (or better said, the modified version of a 
> Crossover). 
> 
> Specifically i would like to e.g. go Long if Price>MovingAverage and Exit 
> if Price<MovingAverage. 
> 
> This means, that if we have on a <b>starting </b>day Price>MovingAverage 
> (not a crossover, just "above"), i want the system to buy immediately on a 
> starting day. However, just once. 
> 
> If i tried sigComparison, this solved the problem with trading immediately 
> on a starting day, but started trading <b>anytime</b> a 
> Price>MovingAverage (every day in a row). 
> 
> To sum up, I need to know how to modify sigCrossover to trade also in case 
> "ABOVE" (not just crossover, e.g. on a start day if condition is met) or 
> how to modify sigComparison to make only 1 Long order (not every day the 
> condition is met, only on 1st and then not until Exit is made).

use osMaxPos and set a maximum position instead of the default osNoOp
order sizing function.

Details in the documentation, or I can work up a quick example later in
the week.

Regards,

  - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From chpmoreno at gmail.com  Mon Aug 22 21:55:50 2011
From: chpmoreno at gmail.com (=?UTF-8?Q?Jos=C3=A9_Fernando_Moreno_Guti=C3=A9rrez?=)
Date: Mon, 22 Aug 2011 14:55:50 -0500
Subject: [R-SIG-Finance] Strategies based on Neural Networks (or SVMs) -
 any experience with R ?
In-Reply-To: <1314022450.12569.6.camel@brian-rcg>
References: <CAM9XErBdy2Aod=st98ktYC5v2_85cyz0323FtuN1axb+nL_r-A@mail.gmail.com>
	<1314022450.12569.6.camel@brian-rcg>
Message-ID: <CABmk8AEuoxYocXTPguRxj7GTD6p4KRS6dL5_q-hwARxqwUQipw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110822/8e19adcb/attachment.pl>

From josh.m.ulrich at gmail.com  Mon Aug 22 22:37:08 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 22 Aug 2011 15:37:08 -0500
Subject: [R-SIG-Finance] Error with getSymbols
In-Reply-To: <B01F91666CB445D7B8BC661A7C7F2377@primpsg>
References: <CAJOva6FDMY9ik=QT4MZ+z53Urcbg=+p1Hk0OJOXUMJ6aaBJTEg@mail.gmail.com>
	<1311090762818-3678480.post@n4.nabble.com>
	<1312317546620-3713680.post@n4.nabble.com>
	<CAA3Wa=uzf2KOygoO4XAgeWLJjsJsSQw6JgfoJg6RQ2QTNFkSUA@mail.gmail.com>
	<CADunhEUtpHtApWxRgLudYXU7mSP-AM+Q=hnnejPX819R_YepLg@mail.gmail.com>
	<1313589121661-3750034.post@n4.nabble.com>
	<CAJOva6EXg7XgRCwjcpvYg70nc4fapyxSxRpH+y4-p16q=kZbyw@mail.gmail.com>
	<170A2634BB9246E2BF0484B1CF2D9E08@primpsg>
	<CAAHOP_9V4WWkZTFccKa7ZxXz+4xRffjy0ZFd=EnFWh64_j8EOA@mail.gmail.com>
	<B01F91666CB445D7B8BC661A7C7F2377@primpsg>
Message-ID: <CAPPM_gSGyZW1PXr-W2RZk7pyp3mWa0YUD4M06CJB=cReMtkSSg@mail.gmail.com>

I can't replicate this using R-2.13.1 on Windows XP using quantmod,
xts, and zoo from CRAN or R-Forge.  So it's likely something with your
setup.

Set options(error=recover) and then run the command again.  Step into
the various active function calls and take a look around to see what
the environment looks like right before the error.

HTH,
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com



On Mon, Aug 22, 2011 at 3:12 AM, SNV Krishna <krishna at primps.com.sg> wrote:
> Hi,
>
> I am using R 2.13.1, Windows XP OS. I updated all the packages and below is
> the command and output sequence. Any suggestions / idea on whats going
> wrong?
>
>> library(quantmod)
> Loading required package: Defaults
> Loading required package: xts
> Loading required package: zoo
>
> Attaching package: 'zoo'
>
> The following object(s) are masked from 'package:base':
>
> ? ?as.Date
>
> Loading required package: TTR
>
>> getSymbols("PAYEMS", src="FRED")
> Error in as.POSIXlt.character(x, tz, ...) :
> ?character string is not in a standard unambiguous format
>
> Thanks and regards,
>
> S.N.V. Krishna
>
>
> ?_____
>
> From: Idris Raja [mailto:idris.raja at gmail.com]
> Sent: Sunday, August 21, 2011 12:01 AM
> To: SNV Krishna
> Cc: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] Error with getSymbols
>
>
> Your code worked for me. Did you load the quantmod package?
> Can you provide more detail like which version of R are you using and your
> operating system.
>
> Idris
>
>> x = require(quantmod)
> Loading required package: quantmod
> Loading required package: Defaults
> Loading required package: xts
> Loading required package: zoo
> Loading required package: TTR
>> x
> [1] TRUE
>> getSymbols("PAYEMS", src="FRED")
> [1] "PAYEMS"
>> head(PAYEMS)
> ? ? ? ? ? PAYEMS
> 1939-01-01 ?29923
> 1939-02-01 ?30100
> 1939-03-01 ?30280
> 1939-04-01 ?30094
> 1939-05-01 ?30300
> 1939-06-01 ?30502
>>
>
> On Thu, Aug 18, 2011 at 8:53 PM, SNV Krishna <krishna at primps.com.sg> wrote:
>
>
> Hi All,
>
> Could some one help me with this error
>
>> getSymbols("PAYEMS",src = "FRED")
> Error in as.POSIXlt.character(x, tz, ...) :
> ?character string is not in a standard unambiguous format
>
> I could download a few of other series like 'CCNA' with out error. Being a
> newbie, I could'nt decipher what the error means. Many thanks for the
> guidance and help.
>
> Regards,
>
> S.N.V. Krishna
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
>
>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From jeffrey.ryan at lemnica.com  Mon Aug 22 23:05:49 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Mon, 22 Aug 2011 16:05:49 -0500
Subject: [R-SIG-Finance] Error with getSymbols
In-Reply-To: <CAPPM_gSGyZW1PXr-W2RZk7pyp3mWa0YUD4M06CJB=cReMtkSSg@mail.gmail.com>
References: <CAJOva6FDMY9ik=QT4MZ+z53Urcbg=+p1Hk0OJOXUMJ6aaBJTEg@mail.gmail.com>
	<1311090762818-3678480.post@n4.nabble.com>
	<1312317546620-3713680.post@n4.nabble.com>
	<CAA3Wa=uzf2KOygoO4XAgeWLJjsJsSQw6JgfoJg6RQ2QTNFkSUA@mail.gmail.com>
	<CADunhEUtpHtApWxRgLudYXU7mSP-AM+Q=hnnejPX819R_YepLg@mail.gmail.com>
	<1313589121661-3750034.post@n4.nabble.com>
	<CAJOva6EXg7XgRCwjcpvYg70nc4fapyxSxRpH+y4-p16q=kZbyw@mail.gmail.com>
	<170A2634BB9246E2BF0484B1CF2D9E08@primpsg>
	<CAAHOP_9V4WWkZTFccKa7ZxXz+4xRffjy0ZFd=EnFWh64_j8EOA@mail.gmail.com>
	<B01F91666CB445D7B8BC661A7C7F2377@primpsg>
	<CAPPM_gSGyZW1PXr-W2RZk7pyp3mWa0YUD4M06CJB=cReMtkSSg@mail.gmail.com>
Message-ID: <CABDUZc8j2Trb2XdkcXZ_hVHr3KNhtf4tV+XLhjs5y_yATPYm5g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110822/31f7747e/attachment.pl>

From stephen at organicfoodmarkets.com.au  Tue Aug 23 05:12:39 2011
From: stephen at organicfoodmarkets.com.au (Stephen Choularton)
Date: Tue, 23 Aug 2011 13:12:39 +1000
Subject: [R-SIG-Finance] Strategies based on Neural Networks (or SVMs) -
 any experience with R ?
In-Reply-To: <1314022450.12569.6.camel@brian-rcg>
References: <CAM9XErBdy2Aod=st98ktYC5v2_85cyz0323FtuN1axb+nL_r-A@mail.gmail.com>
	<1314022450.12569.6.camel@brian-rcg>
Message-ID: <4E531AA7.8030804@organicfoodmarkets.com.au>

I think that Gentil should be aware of the /No Free Lunch Theorem/ (Duda 
et al., 2001, Wolpert and Macready, 1997).  There are no 
context-independent or usage-independent reasons to favor one machine 
learning algorithm over another. If one performs better than another, it 
is owing to its better fit to the particular problem, not its general 
superiority.  If you wish to use these techniques try lots of them:  
certainly neural networks and support vector machines, but also try some 
of the ensemble techniques such as bagging, boosting and random forest.  
You can even try the statisticians favorite, logistic regression.  They 
are all available in R.

Stephen Choularton Ph.D., FIoD


On 23/08/2011 12:14 AM, Brian G. Peterson wrote:
> On Mon, 2011-08-22 at 10:11 +0200, Gentil Homme wrote:
>> I just send out this post in order to share within r-sig-finance any
>> possible experience, advice, ... about NNs or SVMs with R.
> It seems that you're asking us to share with you, and not sharing much
> yourself in return.
>
> Perhaps you could answer your own questions in this thread with the
> things you are trying?
>
> SVM's have been discussed on this list many times, please search the
> list archives.
>
> This blog has covered this topic:
> http://www.aphysicistinwallstreet.com/
>
> Also, there are a few books on machine learning that use R.
>
>> Several good records have been published in the litterature using these
>> techniques for financial trading strategies.
> Which ones? References?
>
>> There are also commercial packages (expensive !) which seem to have achieved
>> good results.
> Which packages?  References again?
>
> Note that neural network strategies are very likely to create look-ahead
> bias as you develop and test them.  You try something, fail, and try
> again on the same data.  Unless you are very careful to reserve a 'pure'
> set of instruments and dates that you won't *ever* touch until you think
> you have a 'good' machine learning system, you're at pretty serious risk
> of introducing your look-ahead knowledge into the system.  While this is
> true to one degree or another in any quantitative strategy development,
> I think it is a particular risk in self-adaptive machine learning
> methodologies.
>
>
>> So I feel it could be nice to share within this group about the following
>> subjects :
>>
>> - experience using the R packages
>> - data pre-processing before feeding the NNs (technical indicators,
>> wavelets, EMDs, ....)
>> - which type of NNs are suitable
>> - how to build and train them
>> - etc ...
>>
>> Thanks to all for sharing within the R community
> Now, your turn.  Bring the community up to date with your research so
> far.
>
> Regards,
>
>     - Brian
>


From patrick at burns-stat.com  Tue Aug 23 09:52:43 2011
From: patrick at burns-stat.com (Patrick Burns)
Date: Tue, 23 Aug 2011 08:52:43 +0100
Subject: [R-SIG-Finance] Strategies based on Neural Networks (or SVMs) -
 any experience with R ?
In-Reply-To: <4E531AA7.8030804@organicfoodmarkets.com.au>
References: <CAM9XErBdy2Aod=st98ktYC5v2_85cyz0323FtuN1axb+nL_r-A@mail.gmail.com>
	<1314022450.12569.6.camel@brian-rcg>
	<4E531AA7.8030804@organicfoodmarkets.com.au>
Message-ID: <4E535C4B.3090605@burns-stat.com>

As I learned last week at useR,
logistic regression might not be
the statistician's favorite for
much longer: beta regression does
the same thing, but better.  It can
get the heteroscedasticity more
accurately.

On 23/08/2011 04:12, Stephen Choularton wrote:
> I think that Gentil should be aware of the /No Free Lunch Theorem/ (Duda
> et al., 2001, Wolpert and Macready, 1997). There are no
> context-independent or usage-independent reasons to favor one machine
> learning algorithm over another. If one performs better than another, it
> is owing to its better fit to the particular problem, not its general
> superiority. If you wish to use these techniques try lots of them:
> certainly neural networks and support vector machines, but also try some
> of the ensemble techniques such as bagging, boosting and random forest.
> You can even try the statisticians favorite, logistic regression. They
> are all available in R.
>
> Stephen Choularton Ph.D., FIoD
>
>
> On 23/08/2011 12:14 AM, Brian G. Peterson wrote:
>> On Mon, 2011-08-22 at 10:11 +0200, Gentil Homme wrote:
>>> I just send out this post in order to share within r-sig-finance any
>>> possible experience, advice, ... about NNs or SVMs with R.
>> It seems that you're asking us to share with you, and not sharing much
>> yourself in return.
>>
>> Perhaps you could answer your own questions in this thread with the
>> things you are trying?
>>
>> SVM's have been discussed on this list many times, please search the
>> list archives.
>>
>> This blog has covered this topic:
>> http://www.aphysicistinwallstreet.com/
>>
>> Also, there are a few books on machine learning that use R.
>>
>>> Several good records have been published in the litterature using these
>>> techniques for financial trading strategies.
>> Which ones? References?
>>
>>> There are also commercial packages (expensive !) which seem to have
>>> achieved
>>> good results.
>> Which packages? References again?
>>
>> Note that neural network strategies are very likely to create look-ahead
>> bias as you develop and test them. You try something, fail, and try
>> again on the same data. Unless you are very careful to reserve a 'pure'
>> set of instruments and dates that you won't *ever* touch until you think
>> you have a 'good' machine learning system, you're at pretty serious risk
>> of introducing your look-ahead knowledge into the system. While this is
>> true to one degree or another in any quantitative strategy development,
>> I think it is a particular risk in self-adaptive machine learning
>> methodologies.
>>
>>
>>> So I feel it could be nice to share within this group about the
>>> following
>>> subjects :
>>>
>>> - experience using the R packages
>>> - data pre-processing before feeding the NNs (technical indicators,
>>> wavelets, EMDs, ....)
>>> - which type of NNs are suitable
>>> - how to build and train them
>>> - etc ...
>>>
>>> Thanks to all for sharing within the R community
>> Now, your turn. Bring the community up to date with your research so
>> far.
>>
>> Regards,
>>
>> - Brian
>>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From noahsilverman at ucla.edu  Tue Aug 23 10:47:39 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Tue, 23 Aug 2011 01:47:39 -0700
Subject: [R-SIG-Finance] Repost: record and playback in IBrokers
Message-ID: <87921064-9559-49BA-8D36-5D02616BCEA7@ucla.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110823/b4b2c7dd/attachment.pl>

From pucek8 at gmail.com  Tue Aug 23 14:15:25 2011
From: pucek8 at gmail.com (=?UTF-8?Q?Marcin_P=3F=EF=BF=BDciennik?=)
Date: Tue, 23 Aug 2011 14:15:25 +0200
Subject: [R-SIG-Finance] Dummy variable regression
Message-ID: <CAPaJvD9TfDbDKM3WTnhgWdCW63e593z34Dgarm-+biEWFPRBWg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110823/285fefc2/attachment.pl>

From jeffrey.ryan at lemnica.com  Tue Aug 23 19:24:23 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Tue, 23 Aug 2011 12:24:23 -0500
Subject: [R-SIG-Finance] Repost: record and playback in IBrokers
In-Reply-To: <87921064-9559-49BA-8D36-5D02616BCEA7@ucla.edu>
References: <87921064-9559-49BA-8D36-5D02616BCEA7@ucla.edu>
Message-ID: <CABDUZc-vj3vkhHOjF5cONvUMiHu1F5tiE8G89wYFAPb8=cQDxQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110823/cc85092e/attachment.pl>

From babelproofreader at gmail.com  Wed Aug 24 01:14:08 2011
From: babelproofreader at gmail.com (Andrew Shacklock)
Date: Wed, 24 Aug 2011 01:14:08 +0200
Subject: [R-SIG-Finance] Supply position vector as input in ttrTests
Message-ID: <CAPk9CsGEpNE+Hb+bsAJpLrqSsWz5VMbRGnQJ_3ypLijgdNOcfQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110824/76bfc184/attachment.pl>

From stephen at organicfoodmarkets.com.au  Wed Aug 24 02:40:44 2011
From: stephen at organicfoodmarkets.com.au (Stephen Choularton)
Date: Wed, 24 Aug 2011 10:40:44 +1000
Subject: [R-SIG-Finance] Strategies based on Neural Networks (or SVMs) -
 any experience with R ?
In-Reply-To: <CAM9XErAi+SP=Jf08MkjBr_7xnZOSxEjq9Mziq=fgBhQe3TsxMA@mail.gmail.com>
References: <CAM9XErBdy2Aod=st98ktYC5v2_85cyz0323FtuN1axb+nL_r-A@mail.gmail.com>
	<1314022450.12569.6.camel@brian-rcg>
	<4E531AA7.8030804@organicfoodmarkets.com.au>
	<CAM9XErAi+SP=Jf08MkjBr_7xnZOSxEjq9Mziq=fgBhQe3TsxMA@mail.gmail.com>
Message-ID: <4E54488C.6030604@organicfoodmarkets.com.au>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110824/1e1989e3/attachment.html>

From stephen at organicfoodmarkets.com.au  Thu Aug 25 01:54:24 2011
From: stephen at organicfoodmarkets.com.au (Stephen Choularton)
Date: Thu, 25 Aug 2011 09:54:24 +1000
Subject: [R-SIG-Finance] Strategies based on Neural Networks (or SVMs) -
 any experience with R ?
In-Reply-To: <CAM9XErB3JXSK4TTCQpDP+iQy3jEWXVJfLawbyJQ1ezT_Q3zC=Q@mail.gmail.com>
References: <CAM9XErBdy2Aod=st98ktYC5v2_85cyz0323FtuN1axb+nL_r-A@mail.gmail.com>
	<1314022450.12569.6.camel@brian-rcg>
	<4E531AA7.8030804@organicfoodmarkets.com.au>
	<CAM9XErAi+SP=Jf08MkjBr_7xnZOSxEjq9Mziq=fgBhQe3TsxMA@mail.gmail.com>
	<4E54488C.6030604@organicfoodmarkets.com.au>
	<CAM9XErB3JXSK4TTCQpDP+iQy3jEWXVJfLawbyJQ1ezT_Q3zC=Q@mail.gmail.com>
Message-ID: <4E558F30.1040509@organicfoodmarkets.com.au>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110825/78152faf/attachment.html>

From josh.m.ulrich at gmail.com  Thu Aug 25 03:16:35 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Wed, 24 Aug 2011 20:16:35 -0500
Subject: [R-SIG-Finance] Quantstrat - trading not just Crossovers (e.g.
 Moving Average)
In-Reply-To: <1314027188.12569.11.camel@brian-rcg>
References: <OF8E3B5BE7.10B5C907-ONC12578F4.0053DDEF-C12578F4.005482E1@tatrabanka.sk>
	<1314027188.12569.11.camel@brian-rcg>
Message-ID: <CAPPM_gRKrBq_67N3tu682cWpHDzsQ=dExqCqRWukKhUKZ=CdUg@mail.gmail.com>

On Mon, Aug 22, 2011 at 10:33 AM, Brian G. Peterson <brian at braverock.com> wrote:
> On Mon, 2011-08-22 at 17:19 +0200, igor_vilcek_external at tatrabanka.sk
> wrote:
>> Hi,
>>
>> I've encountered a problem in quanstrat framework, in case I want to trade
>> not just signalCrossovers (or better said, the modified version of a
>> Crossover).
>>
>> Specifically i would like to e.g. go Long if Price>MovingAverage and Exit
>> if Price<MovingAverage.
>>
>> This means, that if we have on a <b>starting </b>day Price>MovingAverage
>> (not a crossover, just "above"), i want the system to buy immediately on a
>> starting day. However, just once.
>>
>> If i tried sigComparison, this solved the problem with trading immediately
>> on a starting day, but started trading <b>anytime</b> a
>> Price>MovingAverage (every day in a row).
>>
>> To sum up, I need to know how to modify sigCrossover to trade also in case
>> "ABOVE" (not just crossover, e.g. on a start day if condition is met) or
>> how to modify sigComparison to make only 1 Long order (not every day the
>> condition is met, only on 1st and then not until Exit is made).
>
> use osMaxPos and set a maximum position instead of the default osNoOp
> order sizing function.
>
> Details in the documentation, or I can work up a quick example later in
> the week.
>

I just wrote a blog post with an example strategy that uses osMaxPos
and addPosLimit to do this.  Here's the link: http://goo.gl/yBKDr

Best,
Josh

> Regards,
>
> ?- Brian
>
> --
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
>
>

--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com


From samo.pahor at gmail.com  Thu Aug 25 12:32:52 2011
From: samo.pahor at gmail.com (Samo Pahor)
Date: Thu, 25 Aug 2011 12:32:52 +0200
Subject: [R-SIG-Finance] How to add net lines to quantmod charts
Message-ID: <CAFNBy2kqpRV+DKUmqLkOy6Q9PO4oisThWOj7RKuVaFLYuh1OCA@mail.gmail.com>

Hi,

Is it possible to produce attached chart with so called "net lines" (short
line with number on top in different colors) using quantmod?

The Idea is that there would be a data frame with datetime, value, type
(each row represents one "net line" with its numeric value and whether it is
a sell (color in red) or buy(color in green)). And this lines with data in
dataframe would then be overlayed on quantmod chart.

Is something like this possible with quantmod? I would appreciate any
ideas/examples of code...

Best regards,
Samo.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110825/f329c44b/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: netlines.png
Type: image/png
Size: 49448 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110825/f329c44b/attachment.png>

From irasharenow100 at yahoo.com  Fri Aug 26 00:37:21 2011
From: irasharenow100 at yahoo.com (Ira Sharenow)
Date: Thu, 25 Aug 2011 15:37:21 -0700
Subject: [R-SIG-Finance] Combined seasonal data using xts
Message-ID: <001701cc6377$8e4f1ff0$4401a8c0@IraHP>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110825/379c2de9/attachment.pl>

From jeffrey.ryan at lemnica.com  Fri Aug 26 02:20:44 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Thu, 25 Aug 2011 19:20:44 -0500
Subject: [R-SIG-Finance] Combined seasonal data using xts
In-Reply-To: <001701cc6377$8e4f1ff0$4401a8c0@IraHP>
References: <001701cc6377$8e4f1ff0$4401a8c0@IraHP>
Message-ID: <CABDUZc99QKk4FB+gusXZnGPbPmOp3O_asHui0MPbYeRMRbCN+A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110825/06b101c2/attachment.pl>

From irasharenow100 at yahoo.com  Fri Aug 26 04:44:51 2011
From: irasharenow100 at yahoo.com (Ira Sharenow)
Date: Thu, 25 Aug 2011 19:44:51 -0700
Subject: [R-SIG-Finance] Combined seasonal data using xts
References: <001701cc6377$8e4f1ff0$4401a8c0@IraHP>
	<CABDUZc99QKk4FB+gusXZnGPbPmOp3O_asHui0MPbYeRMRbCN+A@mail.gmail.com>
Message-ID: <002001cc639a$21a078e0$4401a8c0@IraHP>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110825/45bc2ba3/attachment.pl>

From samo.pahor at gmail.com  Fri Aug 26 13:43:01 2011
From: samo.pahor at gmail.com (Samo Pahor)
Date: Fri, 26 Aug 2011 13:43:01 +0200
Subject: [R-SIG-Finance] How to add net lines to quantmod charts
In-Reply-To: <CAFNBy2kqpRV+DKUmqLkOy6Q9PO4oisThWOj7RKuVaFLYuh1OCA@mail.gmail.com>
References: <CAFNBy2kqpRV+DKUmqLkOy6Q9PO4oisThWOj7RKuVaFLYuh1OCA@mail.gmail.com>
Message-ID: <CAFNBy2kwRXTv8kwrdpeU-WHV2dmJMqpW4nvFg0AGdhiMMmYemw@mail.gmail.com>

Hi,

I have worked some more on how to reproduce the attached chart and the best
I was able to come up in a day with is this:
require(quantmod)

getSymbols("SPY")

lines.SPY <- (Hi(SPY) + Lo(SPY))/2
names(lines.SPY) <- c("lines")
lines.SPY$BuySell <- ifelse(lag(lines.SPY$lines) > lines.SPY$lines, 1, -1)

chartSeries(SPY, subset="2011-08::", theme=chartTheme('white',
up.col='blue', dn.col='red'))
addTA(lines.SPY$lines[lines.SPY$BuySell == -1,], type='p', col='darkred',
pch="_", on=1, cex = 2.5)
addTA(lines.SPY$lines[lines.SPY$BuySell == 1,], type='p', col='green4',
pch="_", on=1, cex = 2.5)

But I still can not add text on top of the line (value of lines.SPY$lines).
Well, what I have produced is not actually not a line, but a symbol. I would
like a line.

My question actually goes in to direction how to use quantmod chart object
and on this current chart object add a line at specific position of specific
length, thickness and color and just a little above that line how to add
text with specific color...

I also do not know how to actually get from xts objects to x and y
coordiantes on quantmod chart object.

Any help/ideas/code examples appreciated.

Best regards,
Samo.

2011/8/25 Samo Pahor <samo.pahor at gmail.com>

> Hi,
>
> Is it possible to produce attached chart with so called "net lines" (short
> line with number on top in different colors) using quantmod?
>
> The Idea is that there would be a data frame with datetime, value, type
> (each row represents one "net line" with its numeric value and whether it is
> a sell (color in red) or buy(color in green)). And this lines with data in
> dataframe would then be overlayed on quantmod chart.
>
> Is something like this possible with quantmod? I would appreciate any
> ideas/examples of code...
>
> Best regards,
> Samo.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110826/19da3834/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: netlines.png
Type: image/png
Size: 49448 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110826/19da3834/attachment.png>

From igor_vilcek_external at tatrabanka.sk  Fri Aug 26 14:39:54 2011
From: igor_vilcek_external at tatrabanka.sk (igor_vilcek_external at tatrabanka.sk)
Date: Fri, 26 Aug 2011 14:39:54 +0200
Subject: [R-SIG-Finance] Quantstrat - trading not just Crossovers (e.g.
 Moving Average)
In-Reply-To: <CAPPM_gRKrBq_67N3tu682cWpHDzsQ=dExqCqRWukKhUKZ=CdUg-2011-08-25-09-36-04@mail.gmail.com>
Message-ID: <OFAC5AEC35.A54722DA-ONC12578F8.00450DA3-C12578F8.004599C4@tatrabanka.sk>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110826/0f8b7967/attachment.pl>

From kent.russell at live.com  Fri Aug 26 17:17:22 2011
From: kent.russell at live.com (Kent Russell)
Date: Fri, 26 Aug 2011 10:17:22 -0500
Subject: [R-SIG-Finance] Quantstrat - trading not just Crossovers (e.g.
	Moving Average)
In-Reply-To: <OFAC5AEC35.A54722DA-ONC12578F8.00450DA3-C12578F8.004599C4@tatrabanka.sk>
References: <OFAC5AEC35.A54722DA-ONC12578F8.00450DA3-C12578F8.004599C4@tatrabanka.sk>
Message-ID: <BLU0-SMTP1495C7F1470A49DEBE3382BFB130@phx.gbl>

See if this helps 
http://www.google.com/m/url?ei=ULhXTtiYCqOIsgeo54kY&q=http://timelyportfolio.blogspot.com/2011/07/quantstrat-to-build-on-part-6.html&ved=0CCcQFjAE&usg=AFQjCNHmJsPa1uDfZKwfqPsHy42kxK7nlg


Kent

On Aug 26, 2011, at 7:39 AM, igor_vilcek_external at tatrabanka.sk wrote:

> Thanks, works fine for me in this case.
> 
> I am just wondering, however, how to use this solution in case i want to 
> set my own order sizing function (e.g. order size based on a % of current 
> portfolio equity).
> 
> In other words, how to trade my system (above Moving Average, not 
> crossover) and use flexible order quantity as well.
> 
> Igor Vil?ek
> 
> 
> 
> 
> Joshua Ulrich <josh.m.ulrich at gmail.com> 
> 25.08.2011 03:16
> 
> To
> "Brian G. Peterson" <brian at braverock.com>
> cc
> igor_vilcek_external at tatrabanka.sk, r-sig-finance at r-project.org
> Subject
> Re: [R-SIG-Finance] Quantstrat - trading not just Crossovers (e.g. Moving 
> Average)
> 
> 
> 
> 
> 
> 
> On Mon, Aug 22, 2011 at 10:33 AM, Brian G. Peterson <brian at braverock.com> 
> wrote:
>> On Mon, 2011-08-22 at 17:19 +0200, igor_vilcek_external at tatrabanka.sk
>> wrote:
>>> Hi,
>>> 
>>> I've encountered a problem in quanstrat framework, in case I want to 
> trade
>>> not just signalCrossovers (or better said, the modified version of a
>>> Crossover).
>>> 
>>> Specifically i would like to e.g. go Long if Price>MovingAverage and 
> Exit
>>> if Price<MovingAverage.
>>> 
>>> This means, that if we have on a <b>starting </b>day 
> Price>MovingAverage
>>> (not a crossover, just "above"), i want the system to buy immediately 
> on a
>>> starting day. However, just once.
>>> 
>>> If i tried sigComparison, this solved the problem with trading 
> immediately
>>> on a starting day, but started trading <b>anytime</b> a
>>> Price>MovingAverage (every day in a row).
>>> 
>>> To sum up, I need to know how to modify sigCrossover to trade also in 
> case
>>> "ABOVE" (not just crossover, e.g. on a start day if condition is met) 
> or
>>> how to modify sigComparison to make only 1 Long order (not every day 
> the
>>> condition is met, only on 1st and then not until Exit is made).
>> 
>> use osMaxPos and set a maximum position instead of the default osNoOp
>> order sizing function.
>> 
>> Details in the documentation, or I can work up a quick example later in
>> the week.
>> 
> 
> I just wrote a blog post with an example strategy that uses osMaxPos
> and addPosLimit to do this.  Here's the link: http://goo.gl/yBKDr
> 
> Best,
> Josh
> 
>> Regards,
>> 
>> - Brian
>> 
>> --
>> Brian G. Peterson
>> http://braverock.com/brian/
>> Ph: 773-459-4973
>> IM: bgpbraverock
>> 
>> 
> 
> --
> Joshua Ulrich  |  FOSS Trading: www.fosstrading.com
> 
> 
> 
> 
> 
> ____________________________________________________________________
> Informacie obsiahnute v tomto  dokumente su urcene vylucne pre
> potreby jeho adresata. Dokument moze obsahovat informacie chranene
> ako bankove alebo obchodne tajomstvo, pripadne informacie
> podliehajuce ochrane podla inych pravnych predpisov. Preto Vas v
> pripade, ak Vam bol  mylne doruceny, vyzyvame, aby ste sa zdrzali
> jeho odtajnenia ci jeho pouzitia pre vlastne potreby. Zaroven si Vas
> dovolujeme poziadat, aby ste nas o takomto pripade bez zbytocneho
> odkladu informovali a dokument nasledne zlikvidovali.
> 
> Information stated in this document is intended only for needs of proper
> addressees of this document. This document can contain information
> protected as a bank or business secret, or information protected by 
> other legal regulations. Thus in case of receiving the document by error,  
> we kindly ask you not to disclose, or use the document for your own 
> needs. Likewise we kindly ask you to notify us immediately upon such 
> a case by sending an email message to the sender's address, and 
> subsequently delete the document.
> 
> Tatra banka, a.s.
> http://www.tatrabanka.sk
> Hodzovo namestie 3,  811 06 Bratislava 1 
> ICO: 00 686 930
> Zapisana v obchodnom registri Okresneho sudu Bratislava I
> Oddiel: Sa, vlozka cislo: 71/B
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From brian at braverock.com  Fri Aug 26 19:54:51 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 26 Aug 2011 12:54:51 -0500
Subject: [R-SIG-Finance] Quantstrat - trading not just Crossovers (e.g.
 Moving Average)
In-Reply-To: <OFAC5AEC35.A54722DA-ONC12578F8.00450DA3-C12578F8.004599C4@tatrabanka.sk>
References: <OFAC5AEC35.A54722DA-ONC12578F8.00450DA3-C12578F8.004599C4@tatrabanka.sk>
Message-ID: <1314381291.15278.88.camel@brian-rcg>

On Fri, 2011-08-26 at 14:39 +0200, igor_vilcek_external at tatrabanka.sk
wrote:
> 
> Thanks, works fine for me in this case. 
> 
> I am just wondering, however, how to use this solution in case i want
> to set my own order sizing function 

*Everything* in quantstrat is modular.  You can define your own
functions for indicators, signals, rules, order sizing, even the fill
simulator or P&L.  We've tried to provide reasonable default functions.

It  is typical when I am modeling 'real' strategies for me to write
custom indicators, signals, and order sizing functions.

We've provided two example order sizing functions.  osNoOp, and
osMaxPos.  You can use these as templates to code your own custom order
sizing function.

> (e.g. order size based on a % of current portfolio equity). 
> 
We'll get around to an equity-aware order sizing function, as Josh
pointed out in his most recent blog post:

http://blog.fosstrading.com/2011/08/tactical-asset-allocation-using.html

The challenge for us in doing this is making it fast.  On daily OHLC
data, speed is less of an issue, but on tick data, it would be very easy
to take a huge performance hit in recalculating account equity.

There are some possible 'shortcuts' to this, 

1> you could use realized transaction P&L as a proxy for account equity,
and not have to update all the statistics in the portfolio and account.

2> you could repeatedly call applyStrategy on different non-overlapping
time periods (e.g. months for daily data), calling updatePortf and and
updateAcct at the end of each period, and updating your maxPos for each
asset.  osMaxPos is already aware of the maximum position at any given
timestamp, so changing it periodically should be fine unless you're
levered up to nosebleed levels.

I've used variations on both the methods with quantstrat on tick data,
but haven't gotten around to reworking those things in a generic fashion
to put in to the package.

> In other words, how to trade my system (above Moving Average, not
> crossover) and use flexible order quantity as well.

Hope this helps,

  - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From wjlee2002 at naver.com  Sat Aug 27 15:20:16 2011
From: wjlee2002 at naver.com (=?EUC-KR?B?wMy/+MDn?=)
Date: Sat, 27 Aug 2011 22:20:16 +0900
Subject: [R-SIG-Finance] =?euc-kr?q?=5BR=5D_Quantstrat_package_question?=
Message-ID: <bd9837681bc429333514ce306cda610c@tweb04-2.nm>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110827/2ae771ae/attachment.pl>

From brian at braverock.com  Sat Aug 27 16:37:17 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Sat, 27 Aug 2011 09:37:17 -0500
Subject: [R-SIG-Finance] [R] Quantstrat package question
In-Reply-To: <bd9837681bc429333514ce306cda610c@tweb04-2.nm>
References: <bd9837681bc429333514ce306cda610c@tweb04-2.nm>
Message-ID: <1314455837.15278.96.camel@brian-rcg>

On Sat, 2011-08-27 at 22:20 +0900, ??? wrote:
> Hi, 
> I am working on Quantstrat package. 
> I would like to ask if it is possible to use reference data in the qunatstrat packages.

Of course you can.

> For example, my market data for trading is 'intra-day' data, and I need to use daily indicators which are computed with 'daily' index data like S&P 500.

You'll need to have your indicator function look up and merge for you.

> But, in this packages, every data has to be a trading symbol in order to be called by functions such as 'add.indicator' and 'add.signal'.

The trading data is all symbols that you will trade, correct, but your
indicator and signal functions can take any arguments.

> Is is possible to use indicators from reference data, especially in a different time frame with trading symbols?


I think you're going to want to write a quick custom indicator,
something like:

indMerge <- function(mktdata=quote(mktdata),x){
    if (!is.xts(x)) x <- getSymbols(x, auto.assign = FALSE)
    x <- cbind(mktdata, x[paste(first(index(mktdata)) , 		
	       last(index(mktdata)) , sep='/')])
    x <- na.locf(x)
    x
}

This works for me to merge in the columns of SPY from yahoo to a tick
data series.

I often do similar things for strategy parameters that can change daily,
I just merge them and na.locf so that they'll be availabe at every
timestamp internally.  Not the most memory-efficient, but simplifies
many other things so that I don't have to write some many custom
functions later in the stack.
 
Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From buddyhi at indiatimes.com  Sun Aug 28 03:40:02 2011
From: buddyhi at indiatimes.com (amit jain)
Date: Sun, 28 Aug 2011 07:10:02 +0530 (IST)
Subject: [R-SIG-Finance] How to use PCA output to hedge level and slope
In-Reply-To: <1314455837.15278.96.camel@brian-rcg>
Message-ID: <1399598046.636371314495602330.JavaMail.root@tilmb12.indiatimes.com>

Hi everyone,

I want to hedge level and slope of a treasury curve. I found the pca loadings using prcomp function of R. I used 2yr, 5yr, 7yr, 10yr and 30yr points with 3m data and found the pca loadings. Then i reduced these 5 PC factors to just 3 and obtained the new loadings and rotation. Now i am unclear on how to use these PCA loadings to come up with hedging ratios for level and slope specifically in a butterfly for eg 2yr, 5yr and 7yr curve, how do i find the pca weighted risk weightings for the butterfly.  I used following code:

 mypca = prcomp(YC, scale = T)
 print(mypca)
 summary(mypca)
 plot(mypca)
 mypcaX = mypca$x %*% t(mypca$rotation)

where YC has last 3 months of generic rates data.
Thanks in advance for your help. If you need any more clarification to help me better, please let me know i would be happy to provide more details of what i did and tried.

Thanks
Amit


From wjlee2002 at naver.com  Sun Aug 28 09:36:22 2011
From: wjlee2002 at naver.com (=?EUC-KR?B?wMy/+MDn?=)
Date: Sun, 28 Aug 2011 16:36:22 +0900
Subject: [R-SIG-Finance] =?euc-kr?q?=5BR=5D_Quantstrat_package_question?=
In-Reply-To: <1314455837.15278.96.camel@brian-rcg>
References: <bd9837681bc429333514ce306cda610c@tweb04-2.nm>
	<1314455837.15278.96.camel@brian-rcg>
Message-ID: <520ed5f8642f2e16da1d7ae74f513a6e@tweb09-2.nm>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110828/21e2a2f8/attachment.pl>

From brian at braverock.com  Sun Aug 28 17:17:57 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 28 Aug 2011 10:17:57 -0500
Subject: [R-SIG-Finance] [R] Quantstrat package question
In-Reply-To: <520ed5f8642f2e16da1d7ae74f513a6e@tweb09-2.nm>
References: <bd9837681bc429333514ce306cda610c@tweb04-2.nm>
	<1314455837.15278.96.camel@brian-rcg>
	<520ed5f8642f2e16da1d7ae74f513a6e@tweb09-2.nm>
Message-ID: <1314544677.13054.365.camel@brian-desktop>

Sorry, the function should only return the indicator, not all the
columns of mktdata too.   You'll need to modify it to only return the
indicator, or I'll try to get to it tomorrow.


On Sun, 2011-08-28 at 16:36 +0900, ??? wrote:
> Dear Brian,
> 
> 
> I tried the custom indicator, 'indiMerge', and it seems that I was
> mistaken 
> 
> 
> From the codes:
> 
> 
> indMerge <- function(mktdata=quote(mktdata),x){
> if (!is.xts(x)) x <- getSymbols(x, auto.assign = FALSE)
> x <- cbind(mktdata, x[paste(first(index(mktdata)) ,
> last(index(mktdata)) , sep='/')])
> x <- na.locf(x)
> x
> }
> 
> 
> the output 'x' of  indMerge will be mktdata with merged-in reference
> data.
> 
>  
> 
> So, I tried add.indicator codes like  below and  got error messages :
> 
> 
> stratTest <- add.indicator(strategy = stratTest, name = "indMerge", 
>   arguments = list(mktdata=quote(mktdata),x=dailyindex) ) 
> Error in if (inherits(sret$indicators, "xts") & nrow(mktdata) == nrow(sret$indicators)) { : 
>   argument is of length zero
> 
> 
> 
> stratTest <- add.indicator(strategy = stratTest, name = "indMerge", 
>   arguments = list(x=dailyindex)
> Error in merge.xts(..., all = all, fill = fill, suffixes = suffixes) : 
>   object is not a matrix
> 
> 
> Obviously, the dailyindex is a matrix.
> 
>  
> 
> I am not sure how to use 'indMerge'  function and call the output 'x'
> which has merged-in data.
> 
> 
> Can you show me an example?
> 
> 
> 
> Thanks for your help.
> 
> 
> 
> Wonjae
> 
> 
> 
> 
> 
> -----Original Message-----
> From: "Brian G. Peterson"<brian at braverock.com> 
> To: "???"<wjlee2002 at naver.com>
> Cc: r-sig-finance at r-project.org
> Sent: 11-08-27(?) 23:37:17
> Subject: Re: [R-SIG-Finance] [R] Quantstrat package question
> 
> On Sat, 2011-08-27 at 22:20 +0900, ??? wrote:
> > Hi, 
> > I am working on Quantstrat package. 
> > I would like to ask if it is possible to use reference data in the
> qunatstrat packages.
> 
> Of course you can.
> 
> > For example, my market data for trading is 'intra-day' data, and I
> need to use daily indicators which are computed with 'daily' index
> data like S&P 500.
> 
> You'll need to have your indicator function look up and merge for you.
> 
> > But, in this packages, every data has to be a trading symbol in
> order to be called by functions such as 'add.indicator' and
> 'add.signal'.
> 
> The trading data is all symbols that you will trade, correct, but your
> indicator and signal functions can take any arguments.
> 
> > Is is possible to use indicators from reference data, especially in
> a different time frame with trading symbols?
> 
> 
> I think you're going to want to write a quick custom indicator,
> something like:
> 
> indMerge <- function(mktdata=quote(mktdata),x){
> if (!is.xts(x)) x <- getSymbols(x, auto.assign = FALSE)
> x <- cbind(mktdata, x[paste(first(index(mktdata)) , 
> last(index(mktdata)) , sep='/')])
> x <- na.locf(x)
> x
> }
> 
> This works for me to merge in the columns of SPY from yahoo to a tick
> data series.
> 
> I often do similar things for strategy parameters that can change
> daily,
> I just merge them and na.locf so that they'll be availabe at every
> timestamp internally. Not the most memory-efficient, but simplifies
> many other things so that I don't have to write some many custom
> functions later in the stack.
> 
> Regards,
> 
> - Brian
> 
> -- 
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
> 
> 
> 
> 
> 
> 
> 

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From worik.stanton at gmail.com  Mon Aug 29 03:42:00 2011
From: worik.stanton at gmail.com (Worik Stanton)
Date: Mon, 29 Aug 2011 13:42:00 +1200
Subject: [R-SIG-Finance] Moving averages etcetera over time periods on
	ragged data
Message-ID: <4E5AEE68.8030207@gmail.com>

Forgive me if this has been asked/answered.

I have some data that has values only when data changes.  I would like 
to be able to use a moving average (or similar) from TTR but specify the 
time period not the number of steps.

Is there a way to do this without rebuilding my data to be regular?

Off topic, but if I have to rebuild my data is there a function like 
na.approx that I can use to make all NAs take on the preceding non-NA value?

cheers
Worik

-- 
The hippies were right


From michael.weylandt at gmail.com  Mon Aug 29 03:44:39 2011
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Sun, 28 Aug 2011 21:44:39 -0400
Subject: [R-SIG-Finance] Moving averages etcetera over time periods on
 ragged data
In-Reply-To: <4E5AEE68.8030207@gmail.com>
References: <4E5AEE68.8030207@gmail.com>
Message-ID: <CAAmySGMeynQWBZeBM69di58RafLDkAWykwsQ5Fvpg3KXj_yiig@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110828/f1496b47/attachment.pl>

From worik.stanton at gmail.com  Mon Aug 29 06:42:23 2011
From: worik.stanton at gmail.com (Worik Stanton)
Date: Mon, 29 Aug 2011 16:42:23 +1200
Subject: [R-SIG-Finance] Problem with stoch
Message-ID: <4E5B18AF.7050208@gmail.com>

I was getting an error "Error in runSum(x, n) : Series contains 
non-leading NAs" using stoch on an XTS with over 86,000 rows.

There are no NAs in the series.

Using binary search I narrowed the problem down to a section of the XTS 
with only 51 rows.  Herein.

I am not concerned, as I am not really interested in stoch right now, 
but it is an interesting thing.

 > stoch(F)
Error in runSum(x, n) : Series contains non-leading NAs
 > F
                      S1.3600
2011-08-26 06:47:22 1.029176
2011-08-26 06:47:22 1.029176
2011-08-26 06:47:23 1.029176
2011-08-26 06:47:24 1.029176
2011-08-26 06:47:24 1.029176
2011-08-26 06:47:25 1.029176
2011-08-26 06:47:26 1.029176
2011-08-26 06:47:27 1.029176
2011-08-26 06:47:28 1.029177
2011-08-26 06:47:29 1.029177
2011-08-26 06:47:30 1.029177
2011-08-26 06:47:30 1.029177
2011-08-26 06:47:31 1.029177
2011-08-26 06:47:32 1.029177
2011-08-26 06:47:33 1.029177
2011-08-26 06:47:34 1.029177
2011-08-26 06:47:35 1.029178
2011-08-26 06:47:35 1.029178
2011-08-26 06:47:36 1.029178
2011-08-26 06:47:37 1.029178
2011-08-26 06:47:37 1.029178
2011-08-26 06:47:38 1.029178
2011-08-26 06:47:39 1.029179
2011-08-26 06:47:40 1.029179
2011-08-26 06:47:41 1.029179
2011-08-26 06:47:41 1.029179
2011-08-26 06:47:42 1.029179
2011-08-26 06:47:43 1.029179
2011-08-26 06:47:44 1.029179
2011-08-26 06:47:45 1.029179
2011-08-26 06:47:45 1.029179
2011-08-26 06:47:46 1.029179
2011-08-26 06:47:47 1.029180
2011-08-26 06:47:48 1.029180
2011-08-26 06:47:49 1.029180
2011-08-26 06:47:50 1.029180
2011-08-26 06:47:51 1.029180
2011-08-26 06:47:51 1.029180
2011-08-26 06:47:52 1.029180
2011-08-26 06:47:53 1.029180
2011-08-26 06:47:53 1.029180
2011-08-26 06:47:54 1.029180
2011-08-26 06:47:55 1.029180
2011-08-26 06:47:55 1.029180
2011-08-26 06:47:56 1.029180
2011-08-26 06:47:57 1.029180
2011-08-26 06:47:58 1.029180
2011-08-26 06:47:59 1.029180
2011-08-26 06:48:00 1.029180
2011-08-26 06:48:01 1.029180
2011-08-26 06:48:02 1.029180
 >

-- 
The hippies were right


From john.laing at gmail.com  Mon Aug 29 17:10:02 2011
From: john.laing at gmail.com (John Laing)
Date: Mon, 29 Aug 2011 11:10:02 -0400
Subject: [R-SIG-Finance] RBloomberg builds
Message-ID: <CAA3Wa=uPLy=OxGKvOJg4wO3m8JvAN7FZmiB5w0yE0htC7tmfRQ@mail.gmail.com>

New RBloomberg builds have been posted for 32 bit R. I hope to get 64
bit builds published in the next few days.

install.packages("RBloomberg",repos="http://r.findata.org/")

This version is compatible with rJava v0.9, which should resolve the
"'dimnames' applied to non-array" error many users have been getting.
Also improved is the handling of bad securities with a connection
where throw.ticker.errors = FALSE.

Any and all feedback welcome.

Thanks,
John


From rforler at uchicago.edu  Mon Aug 29 20:18:40 2011
From: rforler at uchicago.edu (Rob Forler)
Date: Mon, 29 Aug 2011 13:18:40 -0500
Subject: [R-SIG-Finance] How to use PCA output to hedge level and slope
In-Reply-To: <1399598046.636371314495602330.JavaMail.root@tilmb12.indiatimes.com>
References: <1314455837.15278.96.camel@brian-rcg>
	<1399598046.636371314495602330.JavaMail.root@tilmb12.indiatimes.com>
Message-ID: <CA+W3xs2NF5RhAKiR4OwiOUQ6Spgp-wxAq3=H5Qas1YfyEj4=oA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110829/85b93dda/attachment.pl>

From josh.m.ulrich at gmail.com  Tue Aug 30 05:22:33 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 29 Aug 2011 22:22:33 -0500
Subject: [R-SIG-Finance] Problem with stoch
In-Reply-To: <4E5B18AF.7050208@gmail.com>
References: <4E5B18AF.7050208@gmail.com>
Message-ID: <CAPPM_gTH8gJqcgQn9sa=71R4Y7FResz7=_wNOFQ2r1h-mjnyrA@mail.gmail.com>

Hi Worik,

On Sun, Aug 28, 2011 at 11:42 PM, Worik Stanton <worik.stanton at gmail.com> wrote:
> I was getting an error "Error in runSum(x, n) : Series contains non-leading
> NAs" using stoch on an XTS with over 86,000 rows.
>
> There are no NAs in the series.
>
> Using binary search I narrowed the problem down to a section of the XTS with
> only 51 rows. ?Herein.
>
> I am not concerned, as I am not really interested in stoch right now, but it
> is an interesting thing.
>

The default value of nFastK=14.  The last 20 observations of your data
all have the same value.  This means the Fast%K calculation results in
division by zero.  That's where the "non-leading NAs" originate.
Thanks for providing the data; it made the issue easy to spot.

I'm not sure this is a bug.  It seems more likely that the default
argument values for the stoch function aren't suitable for your data.
I'm open to other opinions though.

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com



>> stoch(F)
> Error in runSum(x, n) : Series contains non-leading NAs
>> F
> ? ? ? ? ? ? ? ? ? ? S1.3600
> 2011-08-26 06:47:22 1.029176
> 2011-08-26 06:47:22 1.029176
> 2011-08-26 06:47:23 1.029176
> 2011-08-26 06:47:24 1.029176
> 2011-08-26 06:47:24 1.029176
> 2011-08-26 06:47:25 1.029176
> 2011-08-26 06:47:26 1.029176
> 2011-08-26 06:47:27 1.029176
> 2011-08-26 06:47:28 1.029177
> 2011-08-26 06:47:29 1.029177
> 2011-08-26 06:47:30 1.029177
> 2011-08-26 06:47:30 1.029177
> 2011-08-26 06:47:31 1.029177
> 2011-08-26 06:47:32 1.029177
> 2011-08-26 06:47:33 1.029177
> 2011-08-26 06:47:34 1.029177
> 2011-08-26 06:47:35 1.029178
> 2011-08-26 06:47:35 1.029178
> 2011-08-26 06:47:36 1.029178
> 2011-08-26 06:47:37 1.029178
> 2011-08-26 06:47:37 1.029178
> 2011-08-26 06:47:38 1.029178
> 2011-08-26 06:47:39 1.029179
> 2011-08-26 06:47:40 1.029179
> 2011-08-26 06:47:41 1.029179
> 2011-08-26 06:47:41 1.029179
> 2011-08-26 06:47:42 1.029179
> 2011-08-26 06:47:43 1.029179
> 2011-08-26 06:47:44 1.029179
> 2011-08-26 06:47:45 1.029179
> 2011-08-26 06:47:45 1.029179
> 2011-08-26 06:47:46 1.029179
> 2011-08-26 06:47:47 1.029180
> 2011-08-26 06:47:48 1.029180
> 2011-08-26 06:47:49 1.029180
> 2011-08-26 06:47:50 1.029180
> 2011-08-26 06:47:51 1.029180
> 2011-08-26 06:47:51 1.029180
> 2011-08-26 06:47:52 1.029180
> 2011-08-26 06:47:53 1.029180
> 2011-08-26 06:47:53 1.029180
> 2011-08-26 06:47:54 1.029180
> 2011-08-26 06:47:55 1.029180
> 2011-08-26 06:47:55 1.029180
> 2011-08-26 06:47:56 1.029180
> 2011-08-26 06:47:57 1.029180
> 2011-08-26 06:47:58 1.029180
> 2011-08-26 06:47:59 1.029180
> 2011-08-26 06:48:00 1.029180
> 2011-08-26 06:48:01 1.029180
> 2011-08-26 06:48:02 1.029180
>>
>
> --
> The hippies were right
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


From chpmoreno at gmail.com  Tue Aug 30 05:34:20 2011
From: chpmoreno at gmail.com (=?UTF-8?Q?Jos=C3=A9_Fernando_Moreno_Guti=C3=A9rrez?=)
Date: Mon, 29 Aug 2011 22:34:20 -0500
Subject: [R-SIG-Finance] RBloomberg
Message-ID: <CABmk8AEhd1QWs85+e9LUxtkzNATrE2=M9ojFSxDXoxNPjVapTg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110829/457af445/attachment.pl>

From john.laing at gmail.com  Tue Aug 30 15:53:54 2011
From: john.laing at gmail.com (John Laing)
Date: Tue, 30 Aug 2011 09:53:54 -0400
Subject: [R-SIG-Finance] RBloomberg
In-Reply-To: <CABmk8AEhd1QWs85+e9LUxtkzNATrE2=M9ojFSxDXoxNPjVapTg@mail.gmail.com>
References: <CABmk8AEhd1QWs85+e9LUxtkzNATrE2=M9ojFSxDXoxNPjVapTg@mail.gmail.com>
Message-ID: <CAA3Wa=tMUiPY+i5nzTcfyigLE-JuvQDMwX53-tXmRVbencdOHA@mail.gmail.com>

On the licensing part:
I am not qualified to issue any sort of official legal opinion on
Bloomberg's licensing practices, so please don't take this as such.
That said, Bloomberg provides API tools for people to use. RBloomberg
is in many ways similar to the Excel add-in that is widely used. My
understanding -- again, not official -- is that Bloomberg terminal
users are free to use these tools as long as the data obtained remains
with the desktop where the Bloomberg terminal resides. Using
RBloomberg to populate a non-local database, for example, would likely
violate your user license. You should probably not do that.

On the not working part:
Please provide more information on your configuration. Here is my
(Windows) set-up, with working RBloomberg:

> # My configuration
> R.version
              _
platform       i386-pc-mingw32
arch           i386
os             mingw32
system         i386, mingw32
status
major          2
minor          13.1
year           2011
month          07
day            08
svn rev        56322
language       R
version.string R version 2.13.1 (2011-07-08)

> installed.packages()[c("rJava", "RBloomberg"), ]
          Package      LibPath                 Version   Priority
rJava      "rJava"      "C:/R/R-2.13.1/library" "0.9-1"   NA
RBloomberg "RBloomberg" "C:/R/R-2.13.1/library" "0.4-150" NA
          Depends                 Imports LinkingTo Suggests Enhances
rJava      "R (>= 2.5.0), methods" NA      NA        NA       NA
RBloomberg "rJava"                 NA      NA        "zoo"    NA
          OS_type   License Built
rJava      NA        "GPL-2" "2.13.1"
RBloomberg "windows" "GPL"   "2.13.1"

> # Working RBloomberg
> library(RBloomberg)
Loading required package: rJava

> conn <- blpConnect()
R version 2.13.1 (2011-07-08)
rJava Version 0.9-1
RBloomberg Version 0.4-150
Java environment initialized successfully.
Looking for most recent blpapi3.jar file...
Adding C:\blp\API\APIv3\JavaAPI\v3.4.3.2\lib\blpapi3.jar to Java classpath
Bloomberg API Version 3.4.3.2

> bdp(conn, "GOOG US Equity", "PX_LAST")
              PX_LAST
GOOG US Equity  539.08



Thanks,
John

On Mon, Aug 29, 2011 at 11:34 PM, Jos? Fernando Moreno Guti?rrez
<chpmoreno at gmail.com> wrote:
> I have a question. I use R and i have a Bloomberg terminal in my job. But I
> don't Know if I can break the license accord to Bloomberg if I use
> Rbloomberg. Too, RBloomberg don't works in the Terminal, maybe because the
> proxy configuration. What are your recommendation?
>
> On 29 August 2011 10:10, John Laing <john.laing at gmail.com> wrote:
>>
>> New RBloomberg builds have been posted for 32 bit R. I hope to get 64
>> bit builds published in the next few days.
>>
>> install.packages("RBloomberg",repos="http://r.findata.org/")
>>
>> This version is compatible with rJava v0.9, which should resolve the
>> "'dimnames' applied to non-array" error many users have been getting.
>> Also improved is the handling of bad securities with a connection
>> where throw.ticker.errors = FALSE.
>>
>> Any and all feedback welcome.
>>
>> Thanks,
>> John
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>
>
>
> --
> Jos? Fernando Moreno Guti?rrez
> Estudiante de Econom?a
> Facultad de Ciencias Econ?micas
> Universidad Nacional de Colombia
>
> ?A?n haciendo a un lado la inestabilidad debida a la especulaci?n, est?
> aquella que resulta de las caracter?sticas de la naturaleza humana?.
> JMK...TG
>


From chpmoreno at gmail.com  Tue Aug 30 16:04:09 2011
From: chpmoreno at gmail.com (=?UTF-8?Q?Jos=C3=A9_Fernando_Moreno_Guti=C3=A9rrez?=)
Date: Tue, 30 Aug 2011 09:04:09 -0500
Subject: [R-SIG-Finance] RBloomberg
In-Reply-To: <CAA3Wa=uCeifJ2nbCm+MM7GW0_GaD_EtdP_x3_kTz8xBv0vwADg@mail.gmail.com>
References: <CABmk8AEhd1QWs85+e9LUxtkzNATrE2=M9ojFSxDXoxNPjVapTg@mail.gmail.com>
	<CAA3Wa=uCeifJ2nbCm+MM7GW0_GaD_EtdP_x3_kTz8xBv0vwADg@mail.gmail.com>
Message-ID: <CABmk8AG_+UiWXkyF+bk_fCgrnbCj6UFcaUyukgmgKk_RpHA4NQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110830/e55db793/attachment.pl>

From chpmoreno at gmail.com  Tue Aug 30 16:04:09 2011
From: chpmoreno at gmail.com (=?UTF-8?Q?Jos=C3=A9_Fernando_Moreno_Guti=C3=A9rrez?=)
Date: Tue, 30 Aug 2011 09:04:09 -0500
Subject: [R-SIG-Finance] RBloomberg
In-Reply-To: <CAA3Wa=uCeifJ2nbCm+MM7GW0_GaD_EtdP_x3_kTz8xBv0vwADg@mail.gmail.com>
References: <CABmk8AEhd1QWs85+e9LUxtkzNATrE2=M9ojFSxDXoxNPjVapTg@mail.gmail.com>
	<CAA3Wa=uCeifJ2nbCm+MM7GW0_GaD_EtdP_x3_kTz8xBv0vwADg@mail.gmail.com>
Message-ID: <CABmk8AG_+UiWXkyF+bk_fCgrnbCj6UFcaUyukgmgKk_RpHA4NQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110830/e55db793/attachment-0001.pl>

From stergios_marinopoulos at yahoo.com  Tue Aug 30 16:37:58 2011
From: stergios_marinopoulos at yahoo.com (Stergios Marinopoulos)
Date: Tue, 30 Aug 2011 07:37:58 -0700 (PDT)
Subject: [R-SIG-Finance] How to add net lines to quantmod charts
Message-ID: <1314715078.97448.YahooMailNeo@web30805.mail.mud.yahoo.com>

Try using the experimental versions of the charting commands: 

require(quantmod) 
getSymbols("SPY") 
chart_Series(SPY, subset="2011-08::", type = "candlesticks" ) 
text(9, 112.00, "SOME TEXT", adj=0); 
segments(9, 111.5, 12, 111.5) ; 


The X coordinates in text() and segments() align with the 
ordinal number of the bar as it appears on the chart. ?The Y coordinates
 are the prices and seem to properly align with the y-axis scale. 

I am interested to learn how to divine the height and width of 
text rendered in chart in order to properly decorate text with other 
graphics 

--
Stergios Marinopoulos


From fxongoing at hotmail.com  Tue Aug 30 16:47:29 2011
From: fxongoing at hotmail.com (FX Going)
Date: Tue, 30 Aug 2011 09:47:29 -0500
Subject: [R-SIG-Finance] How to use R for Day Trading only?
In-Reply-To: <CA+W3xs2NF5RhAKiR4OwiOUQ6Spgp-wxAq3=H5Qas1YfyEj4=oA@mail.gmail.com>
References: <1314455837.15278.96.camel@brian-rcg>,
	<1399598046.636371314495602330.JavaMail.root@tilmb12.indiatimes.com>,
	<CA+W3xs2NF5RhAKiR4OwiOUQ6Spgp-wxAq3=H5Qas1YfyEj4=oA@mail.gmail.com>
Message-ID: <COL105-W8913FB840C7EC59732E47B8170@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110830/4bc7185d/attachment.pl>

From brian at braverock.com  Tue Aug 30 16:59:58 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 30 Aug 2011 09:59:58 -0500
Subject: [R-SIG-Finance] How to use R for Day Trading only?
In-Reply-To: <COL105-W8913FB840C7EC59732E47B8170@phx.gbl>
References: <1314455837.15278.96.camel@brian-rcg>
	, <1399598046.636371314495602330.JavaMail.root@tilmb12.indiatimes.com>
	, <CA+W3xs2NF5RhAKiR4OwiOUQ6Spgp-wxAq3=H5Qas1YfyEj4=oA@mail.gmail.com>
	<COL105-W8913FB840C7EC59732E47B8170@phx.gbl>
Message-ID: <1314716398.23440.6.camel@brian-rcg>

On Tue, 2011-08-30 at 09:47 -0500, FX Going wrote:
> can R be used for day trading? or this software can be used only for
> position trading?
> 
R is a statistical analysis programming language.

Many people and firms use R in live trading environments, many more use
R only in their research environments.

You'll need to be more specific if you expect this list to be able to
help you, see the posting guide.

Regards,

  - Brian

> 
-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From jeffrey.ryan at lemnica.com  Tue Aug 30 18:06:22 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Tue, 30 Aug 2011 11:06:22 -0500
Subject: [R-SIG-Finance] How to use R for Day Trading only?
In-Reply-To: <COL105-W8913FB840C7EC59732E47B8170@phx.gbl>
References: <1314455837.15278.96.camel@brian-rcg>
	<1399598046.636371314495602330.JavaMail.root@tilmb12.indiatimes.com>
	<CA+W3xs2NF5RhAKiR4OwiOUQ6Spgp-wxAq3=H5Qas1YfyEj4=oA@mail.gmail.com>
	<COL105-W8913FB840C7EC59732E47B8170@phx.gbl>
Message-ID: <CABDUZc_Q3-MNzvN3p9tLF9W3ELa8ZoL-g5_=Uz87BZ0JVddLkQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110830/6a22372f/attachment.pl>

From cecilia.carmo at ua.pt  Tue Aug 30 18:51:16 2011
From: cecilia.carmo at ua.pt (Cecilia Carmo)
Date: Tue, 30 Aug 2011 17:51:16 +0100
Subject: [R-SIG-Finance] GMM and IV with panel data
Message-ID: <003d01cc6735$09508020$1bf18060$@carmo@ua.pt>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110830/a375f417/attachment.pl>

From mayouf.k at gmail.com  Wed Aug 31 11:17:08 2011
From: mayouf.k at gmail.com (mayouf.k)
Date: Wed, 31 Aug 2011 02:17:08 -0700 (PDT)
Subject: [R-SIG-Finance] quantstrat: PROBLEM WITH APPLYSIGNAL Error in
 match.names(column, colnames(data)) :    argument "column" is missing,
 with no default
Message-ID: <1314782228285-3780562.post@n4.nabble.com>

hi everyone, 

I want to backtest a simple strategy with RSI, im using "sigThreshold". 

i took example from the http://blog.fosstrading.com/ site to understand how
quanstrat works. 

but now, i have a problem with my code that i really don't understand, R
says me: 

Error in match.names(column, colnames(data)) : 
  argument "column" is missing, with no default 

please can someone tell me what is wrong with code: 

require(quantstrat) 
require(blotter) 
require(PerformanceAnalytics) 

# test de backtest quantstrat sur la strategie de daniel 

         symbols <- "IEF" 
         getSymbols(symbols, from=initDate, to=endDate,
index.class=c("POSIXt","POSIXct")) 


          
          
          # Delete portfolio, account, and order book if they already exist 
         
suppressWarnings(rm("account.daniel","portfolio.daniel",pos=.blotter)) 
          suppressWarnings(rm("order_book.daniel",pos=.strategy)) 
                    
                    # initialise du portefeuille 
         
initPortf("daniel",symbol="IEF",initDate=periodicity(IEF)$start,currency('EUR')) 
          
                    # initialise le compte 
          initAcct("daniel",
portfolios="daniel",initDate=periodicity(IEF)$start) 

                    # on initialise les ordres 
          initOrders(portfolio="daniel",initDate=periodicity(IEF)$start) 

                    # on construit un objet de type strategy 
          s=strategy("intraday") 
              
                   # on initialise un indicateur technique, (les arguments
sont en format list) 
          s=
add.indicator(strategy=s,name="RSI",arguments=list(price=quote(Cl(IEF)),n=21),label="RSI21") 
          
                  # on defini les 2 signals,, 
          s=add.signal(s,name="sigThreshold" ,arguments=list(data=IEF ,
columns="RSI21",threshold=70,relationship="lt",cross=TRUE ),label="entre") 
          s=add.signal(s,name="sigThreshold" ,arguments=list(data=IEF ,
columns="RSI21",threshold=40,relationship="lt",cross=TRUE ),label="sortie" ) 


                 # on deifinit les regles 
          s=add.rule(s,name="ruleSignal",arguments=list(sigcol="entre" 
,sigval=TRUE, orderqty=10    , ordertype="market" ,
orderside=NULL),type="enter") 
          s=add.rule(s,name="ruleSignal",arguments=list(sigcol="sortie"
,sigval=TRUE, orderqty="all" , ordertype="market" ,
orderside=NULL),type="exit" ) 
          
          out <- try(applyStrategy(strategy=s, portfolios="daniel")) 


thanks in advance 

--
View this message in context: http://r.789695.n4.nabble.com/quantstrat-PROBLEM-WITH-APPLYSIGNAL-Error-in-match-names-column-colnames-data-argument-column-is-mist-tp3780562p3780562.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From gsee000 at gmail.com  Wed Aug 31 12:11:58 2011
From: gsee000 at gmail.com (G See)
Date: Wed, 31 Aug 2011 05:11:58 -0500
Subject: [R-SIG-Finance] quantstrat: PROBLEM WITH APPLYSIGNAL Error in
 match.names(column, colnames(data)) : argument "column" is missing,
 with no default
In-Reply-To: <1314782228285-3780562.post@n4.nabble.com>
References: <1314782228285-3780562.post@n4.nabble.com>
Message-ID: <CA+xi=qaSQ2a7=AUq1+sH+YwXCQ_p_S8UQFXovSfCO3NAS3iaVQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110831/61bc003b/attachment.pl>

From gsee000 at gmail.com  Wed Aug 31 12:33:55 2011
From: gsee000 at gmail.com (G See)
Date: Wed, 31 Aug 2011 05:33:55 -0500
Subject: [R-SIG-Finance] quantstrat: PROBLEM WITH APPLYSIGNAL Error in
 match.names(column, colnames(data)) : argument "column" is missing,
 with no default
In-Reply-To: <CA+xi=qaSQ2a7=AUq1+sH+YwXCQ_p_S8UQFXovSfCO3NAS3iaVQ@mail.gmail.com>
References: <1314782228285-3780562.post@n4.nabble.com>
	<CA+xi=qaSQ2a7=AUq1+sH+YwXCQ_p_S8UQFXovSfCO3NAS3iaVQ@mail.gmail.com>
Message-ID: <CA+xi=qbNrOgVRtX869yksOv+GhGuBC_CuBq_iJ1qk+AM1HdZDA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110831/b04ebb71/attachment.pl>

From wjlee2002 at naver.com  Wed Aug 31 14:01:03 2011
From: wjlee2002 at naver.com (=?EUC-KR?B?wMy/+MDn?=)
Date: Wed, 31 Aug 2011 21:01:03 +0900
Subject: [R-SIG-Finance] =?euc-kr?q?=5BR=5D_Txnfees_function_in_quantstrat?=
Message-ID: <09282057871459f3e45addc5bc0228a0@tweb38-2.nm>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110831/fb0ba884/attachment.pl>

From brian at braverock.com  Wed Aug 31 14:22:28 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 31 Aug 2011 07:22:28 -0500
Subject: [R-SIG-Finance] [R] Txnfees function in quantstrat
In-Reply-To: <09282057871459f3e45addc5bc0228a0@tweb38-2.nm>
References: <09282057871459f3e45addc5bc0228a0@tweb38-2.nm>
Message-ID: <1314793348.23440.39.camel@brian-rcg>

On Wed, 2011-08-31 at 21:01 +0900, ??? wrote:
> Hi,
> According to the documentation, the argument 'TxnFees' in 'ruleSignal' is numeric fees (usually negative) or function name for calculating TxnFees (processing happens later, not in this function) in quantstrat packages,
> In the case of using function for 'TxnFees' argument, how can I get the value of the orderprice and orderqty from transactions.
> And, can you show me an example to use function for 'TxnFees' argument?
> Wonjae Lee

TxnFees is passed to addTxn in blotter. See example TxnFees function
pennyPerShare in blotter.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From noahsilverman at ucla.edu  Wed Aug 31 17:26:10 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Wed, 31 Aug 2011 08:26:10 -0700
Subject: [R-SIG-Finance] IBrokers - persistant data eWrapper
Message-ID: <ADA1EFA8-4B7C-4BA2-AFD1-A6B8A4E0BBD1@ucla.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110831/0d65898c/attachment.pl>

From mayouf.k at gmail.com  Wed Aug 31 17:55:55 2011
From: mayouf.k at gmail.com (mayouf.k)
Date: Wed, 31 Aug 2011 08:55:55 -0700 (PDT)
Subject: [R-SIG-Finance] quantstrat: PROBLEM WITH APPLYSIGNAL Error in
 match.names(column, colnames(data)) : argument "column" is missing,
 with no default
In-Reply-To: <CA+xi=qbNrOgVRtX869yksOv+GhGuBC_CuBq_iJ1qk+AM1HdZDA@mail.gmail.com>
References: <1314782228285-3780562.post@n4.nabble.com>
	<CA+xi=qaSQ2a7=AUq1+sH+YwXCQ_p_S8UQFXovSfCO3NAS3iaVQ@mail.gmail.com>
	<CA+xi=qbNrOgVRtX869yksOv+GhGuBC_CuBq_iJ1qk+AM1HdZDA@mail.gmail.com>
Message-ID: <1314806155751-3781418.post@n4.nabble.com>

thank you for replying,

- the problem was the "s" at the end of "column". ( such a shame)

- for the initDate, i use the function periodicity(X)$start from xts,
example:
   periodicity(future)$start
   [1] "2011-02-02 08:00:00 CET"   ( it displays it)

- for my "entre" and "sortie" signals, actually there were just for trying
something, but my real purpose to exit the market is to setup a "stopwin", i
mean staying in the market til i get stop by my stoploss or my stopwin.

thank you very much garett for your time

ps: my final goal is to set a graphic  interface with C# to fill all the
parameters easily

--
View this message in context: http://r.789695.n4.nabble.com/quantstrat-PROBLEM-WITH-APPLYSIGNAL-Error-in-match-names-column-colnames-data-argument-column-is-mist-tp3780562p3781418.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From wjlee2002 at naver.com  Thu Sep  1 10:52:21 2011
From: wjlee2002 at naver.com (=?EUC-KR?B?wMy/+MDn?=)
Date: Thu, 01 Sep 2011 17:52:21 +0900
Subject: [R-SIG-Finance] =?euc-kr?q?=5BR=5D_A_discrepancy_in_Num=2ETrades_?=
	=?euc-kr?q?_from_=27tradeStats=27_function?=
Message-ID: <7f214c013916fc76cd58c38de0d322b1@tweb10-2.nm>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110901/a0fcc91e/attachment.pl>

From me at censix.com  Thu Sep  1 13:25:01 2011
From: me at censix.com (soren wilkening)
Date: Thu, 1 Sep 2011 04:25:01 -0700 (PDT)
Subject: [R-SIG-Finance] IBrokers - persistant data eWrapper
In-Reply-To: <ADA1EFA8-4B7C-4BA2-AFD1-A6B8A4E0BBD1@ucla.edu>
References: <ADA1EFA8-4B7C-4BA2-AFD1-A6B8A4E0BBD1@ucla.edu>
Message-ID: <1314876301945-3783300.post@n4.nabble.com>

Hi

what you could consider doing for a production system is to separate the
data aggregation (from ticks or 5 second bars, etc to the barsize you want
to trade) and the actual indicator and signal calculation into at least two
separate R processes.

For example: Have one R process that reads, aggregates and writes (to some
shared memory structure or to a file) ALL the pricedata streams that you
need, using the eWrapper functionalities. Lets say you get pricedata streams
for 10 contracts at a time. Then have up to 10 individual R processes that
each access only one of the shared memory/file pricedata (which now has the
aggregation level that you want) and calculate indicators/signals etc and
generate orders.  I may sound a bit like overkill but what happens is:

1) the first R process that only reads and aggregates, does not need to
allocate a lot of memory in the eWrapper structure because it only needs to
remember the last 10/20/50/100 bars in order to aggregate them correctly.
The aggregation result is then written to shared memory/file. It is
therefore very fast and memory efficient

2) The 'client' R processes who operate on the aggregated data and do the
heavy lifting in terms of indicator calculation can be switched on and of as
you see fit. That would be a way of testing out the capacity of your machine


Cheers

Soren

http://censix.com

-----
http://censix.com
--
View this message in context: http://r.789695.n4.nabble.com/IBrokers-persistant-data-eWrapper-tp3781308p3783300.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Thu Sep  1 13:27:20 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 01 Sep 2011 06:27:20 -0500
Subject: [R-SIG-Finance] [R] A discrepancy in Num.Trades from
 'tradeStats' function
In-Reply-To: <7f214c013916fc76cd58c38de0d322b1@tweb10-2.nm>
References: <7f214c013916fc76cd58c38de0d322b1@tweb10-2.nm>
Message-ID: <1314876440.23440.61.camel@brian-rcg>

On Thu, 2011-09-01 at 17:52 +0900, ??? wrote:
> Thanks for all the efforts to develop and maintain packages.

We're glas you find them useful.  Thanks for the bug report.

> Recently, I found a discrepancy in Num.Trades from 'tradeStats'
> function.
> In an example below, the number of transactions in maCross demo is
> 11. 
> But the output of tradeStats' is 12. 
> I think the output of the function is one more than the real for each
> symbol.
> Please let me know if I am wrong. 

Correct.  

We weren't removing the initialization row in the txn 'table' in the
portfolio object.  This didn't impact any other statstics, just this
one.

committed fix in R-Forge SVN r748

Regards,

  - Brian
 
-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From me at censix.com  Thu Sep  1 14:41:53 2011
From: me at censix.com (soren wilkening)
Date: Thu, 1 Sep 2011 05:41:53 -0700 (PDT)
Subject: [R-SIG-Finance] Trigger a rule based on more than one signal?
In-Reply-To: <1314842884860-3782618.post@n4.nabble.com>
References: <1314842884860-3782618.post@n4.nabble.com>
Message-ID: <1314880913147-3783417.post@n4.nabble.com>

quantstrat allows you to build new signals from existing signals. That means
you can use "or" (|) or "and" (&) plus the "sigFormula" function to do just
that.

-----
http://censix.com
--
View this message in context: http://r.789695.n4.nabble.com/Trigger-a-rule-based-on-more-than-one-signal-tp3782618p3783417.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From me at censix.com  Thu Sep  1 14:58:25 2011
From: me at censix.com (soren wilkening)
Date: Thu, 1 Sep 2011 05:58:25 -0700 (PDT)
Subject: [R-SIG-Finance] Trigger a rule based on more than one signal?
In-Reply-To: <CA++tqLYER-puGdn0-wYxJvXEicQWqWYhZqSbsuUmf3vG_KrmDg@mail.gmail.com>
References: <1314842884860-3782618.post@n4.nabble.com>
	<1314880913147-3783417.post@n4.nabble.com>
	<CA++tqLYER-puGdn0-wYxJvXEicQWqWYhZqSbsuUmf3vG_KrmDg@mail.gmail.com>
Message-ID: <1314881905543-3783454.post@n4.nabble.com>

I don't have access to R right now but it would look something like this

stratFaber <- add.signal(stratFaber, name="sigFormula",
                         arguments=list(
                                formula="(Close > HI6) & (FA5 > SL10) &
(Close > TR21) ") , 
                                label="Test"
                         )

What is important is that the formula has to contain the plain column names
as literals. no subsetting etc.

-----
http://censix.com
--
View this message in context: http://r.789695.n4.nabble.com/Trigger-a-rule-based-on-more-than-one-signal-tp3782618p3783454.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From ustaudinger at gmail.com  Thu Sep  1 15:15:07 2011
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Thu, 1 Sep 2011 08:15:07 -0500
Subject: [R-SIG-Finance] performance for intraday trading?
Message-ID: <CAMrz3D0vL=26adBAP20i-qHFF83VEgy=0s6-1K=QmWw8tE2==A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110901/0a87b07c/attachment.pl>

From brian at braverock.com  Thu Sep  1 15:15:15 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 01 Sep 2011 08:15:15 -0500
Subject: [R-SIG-Finance] Trigger a rule based on more than one signal?
In-Reply-To: <1314880913147-3783417.post@n4.nabble.com>
References: <1314842884860-3782618.post@n4.nabble.com>
	<1314880913147-3783417.post@n4.nabble.com>
Message-ID: <1314882915.23440.70.camel@brian-rcg>

On Thu, 2011-09-01 at 05:41 -0700, soren wilkening wrote:
> quantstrat allows you to build new signals from existing signals. That
> means you can use "or" (|) or "and" (&) plus the "sigFormula" function
> to do just that.


I'll note that sigFormula is very powerful, but it is usually too slow
to use on high frequency data.  Hourly might be fine, daily certainly is
ok for most formulations, but minutes, secods, or tick are probably too
slow.  

We're relying on a functionality in R that allows you to treat a
data.frame as an environment, and address each column as though it were
a separate variable.  

This is very flexible, and is a great way to do initial testing on an
idea. 

We have found that after testing something with sigFormula to prove out
a hypothesis, it makes a lot of sense to write a more efficient custom
signal function that incorporates the logic of the formula without
resorting to the expensive to/from conversion to a data.frame and an
environment that sigFormula requires.

Regards,

  - Brian
 
-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From brian at braverock.com  Thu Sep  1 15:22:31 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 01 Sep 2011 08:22:31 -0500
Subject: [R-SIG-Finance] performance for intraday trading?
In-Reply-To: <CAMrz3D0vL=26adBAP20i-qHFF83VEgy=0s6-1K=QmWw8tE2==A@mail.gmail.com>
References: <CAMrz3D0vL=26adBAP20i-qHFF83VEgy=0s6-1K=QmWw8tE2==A@mail.gmail.com>
Message-ID: <1314883351.23440.72.camel@brian-rcg>

On Thu, 2011-09-01 at 08:15 -0500, Ulrich Staudinger wrote:
> can I use the performance package for creating reports for intraday
> trading?
> I typically see only examples with end of day trading systems, but do
> need to generate a report based on intraday trades.
> Any input on that? Is that possible? Has someone done that before? 

see function 'tradeStats' in package 'blotter'.

You haven't been very specific, but I this may be what you are looking
for.

If not, please be more specific, with an example if possible.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From andres.susrud at gmail.com  Thu Sep  1 19:46:01 2011
From: andres.susrud at gmail.com (Andres Susrud)
Date: Thu, 1 Sep 2011 19:46:01 +0200
Subject: [R-SIG-Finance] combo order IBrokers
Message-ID: <CA+ZiApyeyx7+W9R3PLNrnx9aUqFZjmF3N--mFsMpZ5k6RcHzgQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110901/edcf7521/attachment.pl>

From gsee000 at gmail.com  Thu Sep  1 19:53:07 2011
From: gsee000 at gmail.com (G See)
Date: Thu, 1 Sep 2011 12:53:07 -0500
Subject: [R-SIG-Finance] combo order IBrokers
In-Reply-To: <CA+ZiApyeyx7+W9R3PLNrnx9aUqFZjmF3N--mFsMpZ5k6RcHzgQ@mail.gmail.com>
References: <CA+ZiApyeyx7+W9R3PLNrnx9aUqFZjmF3N--mFsMpZ5k6RcHzgQ@mail.gmail.com>
Message-ID: <CA+xi=qYGDYJDm4ksqPxHZeSGhC7Vo99s7QParh2T6cugo7x2Hg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110901/901a2954/attachment.pl>

From noahsilverman at ucla.edu  Fri Sep  2 09:50:07 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Fri, 2 Sep 2011 00:50:07 -0700
Subject: [R-SIG-Finance] Confirm orders in TWS (Interactive Brokers)
Message-ID: <788EC90A-8756-4B88-AFF8-ED9938BB75CB@ucla.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110902/b4f80406/attachment.pl>

From dean at aeonim.co.za  Fri Sep  2 13:00:28 2011
From: dean at aeonim.co.za (Dean Marks)
Date: Fri, 2 Sep 2011 13:00:28 +0200
Subject: [R-SIG-Finance] PerformanceAnalytics apply.rolling with NAs
Message-ID: <CAMPD5GVfxg6B5UJzoocP9ASQZ2YvSzniFtbk=_JbSHQGRWw_6w@mail.gmail.com>

Hi,

I'm having the following issue:

require( PerformanceAnalytics )
data( managers )

#This works fine:
x <- managers[ , "SP500 TR"]
apply.rolling( x , width = 6 )

#This produces an error (presumably due to indexes being empty)
x[] <- NA
apply.rolling( x , width = 6 )
###  Error in xts(, order.by = time(R)) :
###  order.by requires an appropriate time-based object

Is this the expected behavior? How would I avoid the error without
having to check for the special case(s)?

Thanks,

-- 
Dean Marks
Investment Analyst
Aeon Investment Management
Tel: +27 (0)21 670 5295
Fax: +27 (0)86 508 0685
Mobile: +27 (0)72 417 4720
Email: dean at aeonim.co.za
www.aeonim.co.za
4th Floor, MontClare Place
Cnr Campground & Main Roads
Claremont, 7708
PO Box 24020, Claremont, 7735
An authorised financial services provider FSP No. 27126


From brian at braverock.com  Fri Sep  2 13:15:32 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 02 Sep 2011 06:15:32 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics apply.rolling with NAs
In-Reply-To: <CAMPD5GVfxg6B5UJzoocP9ASQZ2YvSzniFtbk=_JbSHQGRWw_6w@mail.gmail.com>
References: <CAMPD5GVfxg6B5UJzoocP9ASQZ2YvSzniFtbk=_JbSHQGRWw_6w@mail.gmail.com>
Message-ID: <1314962132.23440.100.camel@brian-rcg>

On Fri, 2011-09-02 at 13:00 +0200, Dean Marks wrote:
> I'm having the following issue:
> 
> require( PerformanceAnalytics )
> data( managers )
> 
> #This works fine:
> x <- managers[ , "SP500 TR"]
> apply.rolling( x , width = 6 )
> 
> #This produces an error (presumably due to indexes being empty)
> x[] <- NA
> apply.rolling( x , width = 6 )
> ###  Error in xts(, order.by = time(R)) :
> ###  order.by requires an appropriate time-based object
> 
> Is this the expected behavior? How would I avoid the error without
> having to check for the special case(s)? 

Well, the xts error says it all in this case.  You don't have a time
series to roll *on*.  This is a time series function, so without a time
series, it simply won't work.

There is the newer function rollapply.xts, but I don't recall offhand
whether it has been exported yet, or rollapply (in zoo) which is less
fussy about the 'time series' part, though it does of course assume the
ordered observations from which zoo takes its name.

I suspect your actual use case is more complicated than the minimal
example you've supplied.  In this case, whether the function you choose
to apply is NA-safe is up to that function.  Many functions in R can
handle NA's, many others fail in ugly ways.  Since we don't know what
you're trying to apply over a rolling period, you will need to
understand the NA behavior of the function you wish to call if your data
contains NA's or other anomalies.

Regards,

  - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From dean at aeonim.co.za  Fri Sep  2 13:24:54 2011
From: dean at aeonim.co.za (Dean Marks)
Date: Fri, 2 Sep 2011 13:24:54 +0200
Subject: [R-SIG-Finance]  PerformanceAnalytics apply.rolling with NAs
In-Reply-To: <CAMPD5GWXyjwMf1JewcW5SAACQ_bNC5Ec4r4sXHDx5WGZZmgx5Q@mail.gmail.com>
References: <CAMPD5GVfxg6B5UJzoocP9ASQZ2YvSzniFtbk=_JbSHQGRWw_6w@mail.gmail.com>
	<1314962132.23440.100.camel@brian-rcg>
	<CAMPD5GWXyjwMf1JewcW5SAACQ_bNC5Ec4r4sXHDx5WGZZmgx5Q@mail.gmail.com>
Message-ID: <CAMPD5GWNM2ZqGtoGgqzx6yLv7dpy=KMiPJ=HWSJ2w8zMZr1OTA@mail.gmail.com>

---------- Forwarded message ----------
From: Dean Marks <dean at aeonim.co.za>
Date: 2 September 2011 13:23
Subject: Re: [R-SIG-Finance] PerformanceAnalytics apply.rolling with NAs
To: "Brian G. Peterson" <brian at braverock.com>


Brian, thanks for the prompt response.

If you append to my minimal example:

x
class(x)

You get something that looks like, and says it is a time series
object. Am I mistaken here?

In any event, I'm willing to take your advise. However, are you sure
this is not a bug?

Many thanks,

On 2 September 2011 13:15, Brian G. Peterson <brian at braverock.com> wrote:
> On Fri, 2011-09-02 at 13:00 +0200, Dean Marks wrote:
>> I'm having the following issue:
>>
>> require( PerformanceAnalytics )
>> data( managers )
>>
>> #This works fine:
>> x <- managers[ , "SP500 TR"]
>> apply.rolling( x , width = 6 )
>>
>> #This produces an error (presumably due to indexes being empty)
>> x[] <- NA
>> apply.rolling( x , width = 6 )
>> ### ?Error in xts(, order.by = time(R)) :
>> ### ?order.by requires an appropriate time-based object
>>
>> Is this the expected behavior? How would I avoid the error without
>> having to check for the special case(s)?
>
> Well, the xts error says it all in this case. ?You don't have a time
> series to roll *on*. ?This is a time series function, so without a time
> series, it simply won't work.
>
> There is the newer function rollapply.xts, but I don't recall offhand
> whether it has been exported yet, or rollapply (in zoo) which is less
> fussy about the 'time series' part, though it does of course assume the
> ordered observations from which zoo takes its name.
>
> I suspect your actual use case is more complicated than the minimal
> example you've supplied. ?In this case, whether the function you choose
> to apply is NA-safe is up to that function. ?Many functions in R can
> handle NA's, many others fail in ugly ways. ?Since we don't know what
> you're trying to apply over a rolling period, you will need to
> understand the NA behavior of the function you wish to call if your data
> contains NA's or other anomalies.
>
> Regards,
>
> ?- Brian
>
> --
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
>
>



--
Dean Marks
Investment Analyst
Aeon Investment Management
Tel: +27 (0)21 670 5295
Fax: +27 (0)86 508 0685
Mobile: +27 (0)72 417 4720
Email: dean at aeonim.co.za
www.aeonim.co.za
4th Floor, MontClare Place
Cnr Campground & Main Roads
Claremont, 7708
PO Box 24020, Claremont, 7735
An authorised financial services provider FSP No. 27126



-- 
Dean Marks
Investment Analyst
Aeon Investment Management
Tel: +27 (0)21 670 5295
Fax: +27 (0)86 508 0685
Mobile: +27 (0)72 417 4720
Email: dean at aeonim.co.za
www.aeonim.co.za
4th Floor, MontClare Place
Cnr Campground & Main Roads
Claremont, 7708
PO Box 24020, Claremont, 7735
An authorised financial services provider FSP No. 27126


From brian at braverock.com  Fri Sep  2 13:42:23 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 02 Sep 2011 06:42:23 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics apply.rolling with NAs
In-Reply-To: <CAMPD5GWNM2ZqGtoGgqzx6yLv7dpy=KMiPJ=HWSJ2w8zMZr1OTA@mail.gmail.com>
References: <CAMPD5GVfxg6B5UJzoocP9ASQZ2YvSzniFtbk=_JbSHQGRWw_6w@mail.gmail.com>
	<1314962132.23440.100.camel@brian-rcg>
	<CAMPD5GWXyjwMf1JewcW5SAACQ_bNC5Ec4r4sXHDx5WGZZmgx5Q@mail.gmail.com>
	<CAMPD5GWNM2ZqGtoGgqzx6yLv7dpy=KMiPJ=HWSJ2w8zMZr1OTA@mail.gmail.com>
Message-ID: <1314963743.23440.107.camel@brian-rcg>

On Fri, 2011-09-02 at 13:24 +0200, Dean Marks wrote:
> If you append to my minimal example:
> 
> x
> class(x)
> 
> You get something that looks like, and says it is a time series
> object. Am I mistaken here?

Yes.

> x<-NA
> class(x)
[1] "logical"

    ^^^^^^^^  that is not a time series.

> y<-xts()
> y
Data:
numeric(0)

Index:
integer(0)
> class(y)
[1] "xts" "zoo"

This is an (empty) time series.  

All of the rolling functions will still fail, of course, since there is
no data to apply *to*

> apply.rolling(y, width=6,FUN=sum)
Error in xts(, order.by = time(R)) : 
  order.by requires an appropriate time-based object

So far, no bug anywhere I can see.

If, however, we construct an actual time series:

####

z <- xts(1:20,order.by=seq.Date(from=Sys.Date()-19,to=Sys.Date(),by=1))

z

#            [,1]
# 2011-08-14    1
# 2011-08-15    2
# 2011-08-16    3
# 2011-08-17    4
# 2011-08-18    5
# 2011-08-19    6
# 2011-08-20    7
# 2011-08-21    8
# 2011-08-22    9
# 2011-08-23   10
# 2011-08-24   11
# 2011-08-25   12
# 2011-08-26   13
# 2011-08-27   14
# 2011-08-28   15
# 2011-08-29   16
# 2011-08-30   17
# 2011-08-31   18
# 2011-09-01   19
# 2011-09-02   20

# things will now work as documented and expected:

apply.rolling(z, width=6,FUN=sum)

#            calcs
# 2011-08-14    NA
# 2011-08-15    NA
# 2011-08-16    NA
# 2011-08-17    NA
# 2011-08-18    NA
# 2011-08-19    21
# 2011-08-20    27
# 2011-08-21    33
# 2011-08-22    39
# 2011-08-23    45
# 2011-08-24    51
# 2011-08-25    57
# 2011-08-26    63
# 2011-08-27    69
# 2011-08-28    75
# 2011-08-29    81
# 2011-08-30    87
# 2011-08-31    93
# 2011-09-01    99
# 2011-09-02   105
 
####

I continue to assume that your actual use case is more complicated, so
perhaps you can supply an example that's a little more on-point to what
you're trying to do if you're still in need of assistance.

Regards,

  - Brian


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From dean at aeonim.co.za  Fri Sep  2 13:55:53 2011
From: dean at aeonim.co.za (Dean Marks)
Date: Fri, 2 Sep 2011 13:55:53 +0200
Subject: [R-SIG-Finance] PerformanceAnalytics apply.rolling with NAs
In-Reply-To: <1314963743.23440.107.camel@brian-rcg>
References: <CAMPD5GVfxg6B5UJzoocP9ASQZ2YvSzniFtbk=_JbSHQGRWw_6w@mail.gmail.com>
	<1314962132.23440.100.camel@brian-rcg>
	<CAMPD5GWXyjwMf1JewcW5SAACQ_bNC5Ec4r4sXHDx5WGZZmgx5Q@mail.gmail.com>
	<CAMPD5GWNM2ZqGtoGgqzx6yLv7dpy=KMiPJ=HWSJ2w8zMZr1OTA@mail.gmail.com>
	<1314963743.23440.107.camel@brian-rcg>
Message-ID: <CAMPD5GXa21dbw-4-EmqrhVK_GLQi0GnEx+RENp_0V7xkA8DnEA@mail.gmail.com>

Apologies, but I believe we're at cross purposes here.

My use case requires that I determine rolling returns for a collection
of stocks where in some cases data is missing (repressented by NAs),
for example if a stock did not exist for a period of time. I don't
mean to frustrate you but if I go into the use case further it might
unnecessarily complicate things. My work around, in any case, is
simply to test for these cases prior to calling apply.rolling.

If you paste my original code _in full_ and then append:

x
index(x)
class(x)

you will see what I mean.

I don't mean to be stubborn here, but I'd first like to get onto the same page.

Thanks

On 2 September 2011 13:42, Brian G. Peterson <brian at braverock.com> wrote:
> On Fri, 2011-09-02 at 13:24 +0200, Dean Marks wrote:
>> If you append to my minimal example:
>>
>> x
>> class(x)
>>
>> You get something that looks like, and says it is a time series
>> object. Am I mistaken here?
>
> Yes.
>
>> x<-NA
>> class(x)
> [1] "logical"
>
> ? ?^^^^^^^^ ?that is not a time series.
>
>> y<-xts()
>> y
> Data:
> numeric(0)
>
> Index:
> integer(0)
>> class(y)
> [1] "xts" "zoo"
>
> This is an (empty) time series.
>
> All of the rolling functions will still fail, of course, since there is
> no data to apply *to*
>
>> apply.rolling(y, width=6,FUN=sum)
> Error in xts(, order.by = time(R)) :
> ?order.by requires an appropriate time-based object
>
> So far, no bug anywhere I can see.
>
> If, however, we construct an actual time series:
>
> ####
>
> z <- xts(1:20,order.by=seq.Date(from=Sys.Date()-19,to=Sys.Date(),by=1))
>
> z
>
> # ? ? ? ? ? ?[,1]
> # 2011-08-14 ? ?1
> # 2011-08-15 ? ?2
> # 2011-08-16 ? ?3
> # 2011-08-17 ? ?4
> # 2011-08-18 ? ?5
> # 2011-08-19 ? ?6
> # 2011-08-20 ? ?7
> # 2011-08-21 ? ?8
> # 2011-08-22 ? ?9
> # 2011-08-23 ? 10
> # 2011-08-24 ? 11
> # 2011-08-25 ? 12
> # 2011-08-26 ? 13
> # 2011-08-27 ? 14
> # 2011-08-28 ? 15
> # 2011-08-29 ? 16
> # 2011-08-30 ? 17
> # 2011-08-31 ? 18
> # 2011-09-01 ? 19
> # 2011-09-02 ? 20
>
> # things will now work as documented and expected:
>
> apply.rolling(z, width=6,FUN=sum)
>
> # ? ? ? ? ? ?calcs
> # 2011-08-14 ? ?NA
> # 2011-08-15 ? ?NA
> # 2011-08-16 ? ?NA
> # 2011-08-17 ? ?NA
> # 2011-08-18 ? ?NA
> # 2011-08-19 ? ?21
> # 2011-08-20 ? ?27
> # 2011-08-21 ? ?33
> # 2011-08-22 ? ?39
> # 2011-08-23 ? ?45
> # 2011-08-24 ? ?51
> # 2011-08-25 ? ?57
> # 2011-08-26 ? ?63
> # 2011-08-27 ? ?69
> # 2011-08-28 ? ?75
> # 2011-08-29 ? ?81
> # 2011-08-30 ? ?87
> # 2011-08-31 ? ?93
> # 2011-09-01 ? ?99
> # 2011-09-02 ? 105
>
> ####
>
> I continue to assume that your actual use case is more complicated, so
> perhaps you can supply an example that's a little more on-point to what
> you're trying to do if you're still in need of assistance.
>
> Regards,
>
> ?- Brian
>
>
> --
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
>
>



-- 
Dean Marks
Investment Analyst
Aeon Investment Management
Tel: +27 (0)21 670 5295
Fax: +27 (0)86 508 0685
Mobile: +27 (0)72 417 4720
Email: dean at aeonim.co.za
www.aeonim.co.za
4th Floor, MontClare Place
Cnr Campground & Main Roads
Claremont, 7708
PO Box 24020, Claremont, 7735
An authorised financial services provider FSP No. 27126


From me at censix.com  Fri Sep  2 13:59:55 2011
From: me at censix.com (soren wilkening)
Date: Fri, 2 Sep 2011 04:59:55 -0700 (PDT)
Subject: [R-SIG-Finance] Confirm orders in TWS (Interactive Brokers)
In-Reply-To: <788EC90A-8756-4B88-AFF8-ED9938BB75CB@ucla.edu>
References: <788EC90A-8756-4B88-AFF8-ED9938BB75CB@ucla.edu>
Message-ID: <1314964795168-3785881.post@n4.nabble.com>

"reqExecutions()"

Its all in the 'IBrokers' package documentation.

of course you can also listen to the order status change events that get
sent pack to R by the TWS after you have placed an order.

-----
http://censix.com
--
View this message in context: http://r.789695.n4.nabble.com/Confirm-orders-in-TWS-Interactive-Brokers-tp3785506p3785881.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Fri Sep  2 14:08:36 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 02 Sep 2011 07:08:36 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics apply.rolling with NAs
In-Reply-To: <CAMPD5GXa21dbw-4-EmqrhVK_GLQi0GnEx+RENp_0V7xkA8DnEA@mail.gmail.com>
References: <CAMPD5GVfxg6B5UJzoocP9ASQZ2YvSzniFtbk=_JbSHQGRWw_6w@mail.gmail.com>
	<1314962132.23440.100.camel@brian-rcg>
	<CAMPD5GWXyjwMf1JewcW5SAACQ_bNC5Ec4r4sXHDx5WGZZmgx5Q@mail.gmail.com>
	<CAMPD5GWNM2ZqGtoGgqzx6yLv7dpy=KMiPJ=HWSJ2w8zMZr1OTA@mail.gmail.com>
	<1314963743.23440.107.camel@brian-rcg>
	<CAMPD5GXa21dbw-4-EmqrhVK_GLQi0GnEx+RENp_0V7xkA8DnEA@mail.gmail.com>
Message-ID: <1314965316.23440.110.camel@brian-rcg>

On Fri, 2011-09-02 at 13:55 +0200, Dean Marks wrote:
> 
> My use case requires that I determine rolling returns for a collection
> of stocks where in some cases data is missing (repressented by NAs),
> for example if a stock did not exist for a period of time. I don't
> mean to frustrate you but if I go into the use case further it might
> unnecessarily complicate things. My work around, in any case, is
> simply to test for these cases prior to calling apply.rolling. 

OK, now we're getting somewhere.

You could apply apply.rolling by column, but this won't  give you
comparable results for the rolling return case.

You could aggregate your returns to some lower-frequency where all the
indices will agree and you only have leading NA's to deal with.

Or, you could see 

?zerofill

since an NA return is equivalent to a zero return (unless your manager
is not reporting to hide losses, but that's a different problem
altogether)

Regards,

  - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From ggrothendieck at gmail.com  Fri Sep  2 14:32:51 2011
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 2 Sep 2011 08:32:51 -0400
Subject: [R-SIG-Finance] PerformanceAnalytics apply.rolling with NAs
In-Reply-To: <1314962132.23440.100.camel@brian-rcg>
References: <CAMPD5GVfxg6B5UJzoocP9ASQZ2YvSzniFtbk=_JbSHQGRWw_6w@mail.gmail.com>
	<1314962132.23440.100.camel@brian-rcg>
Message-ID: <CAP01uRmLgSz44YSnFxy45Rpq9ts8W=JY2NA6iYR3F1aNq+f7cw@mail.gmail.com>

On Fri, Sep 2, 2011 at 7:15 AM, Brian G. Peterson <brian at braverock.com> wrote:
> On Fri, 2011-09-02 at 13:00 +0200, Dean Marks wrote:
>> I'm having the following issue:
>>
>> require( PerformanceAnalytics )
>> data( managers )
>>
>> #This works fine:
>> x <- managers[ , "SP500 TR"]
>> apply.rolling( x , width = 6 )
>>
>> #This produces an error (presumably due to indexes being empty)
>> x[] <- NA
>> apply.rolling( x , width = 6 )
>> ### ?Error in xts(, order.by = time(R)) :
>> ### ?order.by requires an appropriate time-based object
>>
>> Is this the expected behavior? How would I avoid the error without
>> having to check for the special case(s)?
>
> Well, the xts error says it all in this case. ?You don't have a time
> series to roll *on*. ?This is a time series function, so without a time
> series, it simply won't work.
>
> There is the newer function rollapply.xts, but I don't recall offhand
> whether it has been exported yet, or rollapply (in zoo) which is less
> fussy about the 'time series' part, though it does of course assume the
> ordered observations from which zoo takes its name.

The default method of zoo's rollapply works with ordinary R vectors
and matrices too,
not just zoo and ts objects.

> library(zoo)
> x <- 1:10
> rollapply(x, 3, sum)
[1]  6  9 12 15 18 21 24 27
>
> # rollapplyr is same as rollapply(..., align = "right")
>
> rollapplyr(x, 3, sum, fill = NA)
 [1] NA NA  6  9 12 15 18 21 24 27

> x[] <- NA
> rollapplyr(x, 3, sum, fill = NA)
 [1] NA NA NA NA NA NA NA NA NA NA
> rollapplyr(x, 3, sum, na.rm = TRUE, fill = NA)
 [1] NA NA  0  0  0  0  0  0  0  0


-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From peter at braverock.com  Fri Sep  2 14:39:15 2011
From: peter at braverock.com (Peter Carl)
Date: Fri, 2 Sep 2011 07:39:15 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics apply.rolling with NAs
In-Reply-To: <CAMPD5GXa21dbw-4-EmqrhVK_GLQi0GnEx+RENp_0V7xkA8DnEA@mail.gmail.com>
References: <CAMPD5GVfxg6B5UJzoocP9ASQZ2YvSzniFtbk=_JbSHQGRWw_6w@mail.gmail.com>
	<1314962132.23440.100.camel@brian-rcg>
	<CAMPD5GWXyjwMf1JewcW5SAACQ_bNC5Ec4r4sXHDx5WGZZmgx5Q@mail.gmail.com>
	<CAMPD5GWNM2ZqGtoGgqzx6yLv7dpy=KMiPJ=HWSJ2w8zMZr1OTA@mail.gmail.com>
	<1314963743.23440.107.camel@brian-rcg>
	<CAMPD5GXa21dbw-4-EmqrhVK_GLQi0GnEx+RENp_0V7xkA8DnEA@mail.gmail.com>
Message-ID: <3aa86c14eb5254eb39ed5f6274b3fd36.squirrel@mail.braverock.com>

?try
-- 
Peter Carl
http://www.braverock.com/~peter

> Apologies, but I believe we're at cross purposes here.
>
> My use case requires that I determine rolling returns for a collection
> of stocks where in some cases data is missing (repressented by NAs),
> for example if a stock did not exist for a period of time. I don't
> mean to frustrate you but if I go into the use case further it might
> unnecessarily complicate things. My work around, in any case, is
> simply to test for these cases prior to calling apply.rolling.
>
> If you paste my original code _in full_ and then append:
>
> x
> index(x)
> class(x)
>
> you will see what I mean.
>
> I don't mean to be stubborn here, but I'd first like to get onto the same
> page.
>
> Thanks
>
> On 2 September 2011 13:42, Brian G. Peterson <brian at braverock.com> wrote:
>> On Fri, 2011-09-02 at 13:24 +0200, Dean Marks wrote:
>>> If you append to my minimal example:
>>>
>>> x
>>> class(x)
>>>
>>> You get something that looks like, and says it is a time series
>>> object. Am I mistaken here?
>>
>> Yes.
>>
>>> x<-NA
>>> class(x)
>> [1] "logical"
>>
>> ? ?^^^^^^^^ ?that is not a time series.
>>
>>> y<-xts()
>>> y
>> Data:
>> numeric(0)
>>
>> Index:
>> integer(0)
>>> class(y)
>> [1] "xts" "zoo"
>>
>> This is an (empty) time series.
>>
>> All of the rolling functions will still fail, of course, since there is
>> no data to apply *to*
>>
>>> apply.rolling(y, width=6,FUN=sum)
>> Error in xts(, order.by = time(R)) :
>> ?order.by requires an appropriate time-based object
>>
>> So far, no bug anywhere I can see.
>>
>> If, however, we construct an actual time series:
>>
>> ####
>>
>> z <- xts(1:20,order.by=seq.Date(from=Sys.Date()-19,to=Sys.Date(),by=1))
>>
>> z
>>
>> # ? ? ? ? ? ?[,1]
>> # 2011-08-14 ? ?1
>> # 2011-08-15 ? ?2
>> # 2011-08-16 ? ?3
>> # 2011-08-17 ? ?4
>> # 2011-08-18 ? ?5
>> # 2011-08-19 ? ?6
>> # 2011-08-20 ? ?7
>> # 2011-08-21 ? ?8
>> # 2011-08-22 ? ?9
>> # 2011-08-23 ? 10
>> # 2011-08-24 ? 11
>> # 2011-08-25 ? 12
>> # 2011-08-26 ? 13
>> # 2011-08-27 ? 14
>> # 2011-08-28 ? 15
>> # 2011-08-29 ? 16
>> # 2011-08-30 ? 17
>> # 2011-08-31 ? 18
>> # 2011-09-01 ? 19
>> # 2011-09-02 ? 20
>>
>> # things will now work as documented and expected:
>>
>> apply.rolling(z, width=6,FUN=sum)
>>
>> # ? ? ? ? ? ?calcs
>> # 2011-08-14 ? ?NA
>> # 2011-08-15 ? ?NA
>> # 2011-08-16 ? ?NA
>> # 2011-08-17 ? ?NA
>> # 2011-08-18 ? ?NA
>> # 2011-08-19 ? ?21
>> # 2011-08-20 ? ?27
>> # 2011-08-21 ? ?33
>> # 2011-08-22 ? ?39
>> # 2011-08-23 ? ?45
>> # 2011-08-24 ? ?51
>> # 2011-08-25 ? ?57
>> # 2011-08-26 ? ?63
>> # 2011-08-27 ? ?69
>> # 2011-08-28 ? ?75
>> # 2011-08-29 ? ?81
>> # 2011-08-30 ? ?87
>> # 2011-08-31 ? ?93
>> # 2011-09-01 ? ?99
>> # 2011-09-02 ? 105
>>
>> ####
>>
>> I continue to assume that your actual use case is more complicated, so
>> perhaps you can supply an example that's a little more on-point to what
>> you're trying to do if you're still in need of assistance.
>>
>> Regards,
>>
>> ?- Brian
>>
>>
>> --
>> Brian G. Peterson
>> http://braverock.com/brian/
>> Ph: 773-459-4973
>> IM: bgpbraverock
>>
>>
>
>
>
> --
> Dean Marks
> Investment Analyst
> Aeon Investment Management
> Tel: +27 (0)21 670 5295
> Fax: +27 (0)86 508 0685
> Mobile: +27 (0)72 417 4720
> Email: dean at aeonim.co.za
> www.aeonim.co.za
> 4th Floor, MontClare Place
> Cnr Campground & Main Roads
> Claremont, 7708
> PO Box 24020, Claremont, 7735
> An authorised financial services provider FSP No. 27126
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


From stergios_marinopoulos at yahoo.com  Fri Sep  2 16:43:26 2011
From: stergios_marinopoulos at yahoo.com (Stergios Marinopoulos)
Date: Fri, 2 Sep 2011 07:43:26 -0700 (PDT)
Subject: [R-SIG-Finance] Confirm orders in TWS (Interactive Brokers)
Message-ID: <1314974606.24453.YahooMailNeo@web30807.mail.mud.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110902/7ae1da59/attachment.pl>

From daniel.krizian at gmail.com  Fri Sep  2 18:14:03 2011
From: daniel.krizian at gmail.com (Daniel Krizian)
Date: Fri, 2 Sep 2011 18:14:03 +0200
Subject: [R-SIG-Finance] delay argument of ruleSignal buggy ?
	(quantstrat)
In-Reply-To: <CALqbvp7N2y245pn2h158r5qG+aMn9KBBy8BvmQpmz8dpo8Skgg@mail.gmail.com>
References: <CALqbvp6h7Suq+AjbAbiyV5h4bs9MiZ7tZpr5CFTtwoSS3LApsw@mail.gmail.com>
	<1312914797.2788.186.camel@brian-rcg>
	<CALqbvp7N2y245pn2h158r5qG+aMn9KBBy8BvmQpmz8dpo8Skgg@mail.gmail.com>
Message-ID: <CALqbvp63gLc5dci7FEr_vbhcRAU=gP7Cmn8N8egA1CbnrSL0WQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110902/e66b03cb/attachment.pl>

From noahsilverman at ucla.edu  Fri Sep  2 19:14:53 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Fri, 2 Sep 2011 10:14:53 -0700
Subject: [R-SIG-Finance] Confirm orders in TWS (Interactive Brokers)
In-Reply-To: <1314974606.24453.YahooMailNeo@web30807.mail.mud.yahoo.com>
References: <1314974606.24453.YahooMailNeo@web30807.mail.mud.yahoo.com>
Message-ID: <9E55C3D7-580D-45B1-BA0E-E2CFBB0D0744@ucla.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110902/d2bd08ec/attachment.pl>

From noahsilverman at ucla.edu  Fri Sep  2 19:21:08 2011
From: noahsilverman at ucla.edu (Noah Silverman)
Date: Fri, 2 Sep 2011 10:21:08 -0700
Subject: [R-SIG-Finance] making bars on exact times
Message-ID: <CA7EB475-C207-4096-B0D8-B03CAC0CEB07@ucla.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110902/831720e2/attachment.pl>

From ustaudinger at gmail.com  Sun Sep  4 03:27:12 2011
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Sat, 3 Sep 2011 20:27:12 -0500
Subject: [R-SIG-Finance] making bars on exact times
In-Reply-To: <CA7EB475-C207-4096-B0D8-B03CAC0CEB07@ucla.edu>
References: <CA7EB475-C207-4096-B0D8-B03CAC0CEB07@ucla.edu>
Message-ID: <CAMrz3D3+C_-ikX6DSE1bYqs+sf04q1fu5R9eSOXZWuPJAdcxQg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110903/4308736f/attachment.pl>

From thomas.browne at mac.com  Sun Sep  4 13:17:45 2011
From: thomas.browne at mac.com (thomas.browne at mac.com)
Date: Sun, 4 Sep 2011 12:17:45 +0100
Subject: [R-SIG-Finance] RBloomberg
In-Reply-To: <CABmk8AG_+UiWXkyF+bk_fCgrnbCj6UFcaUyukgmgKk_RpHA4NQ@mail.gmail.com>
References: <CABmk8AEhd1QWs85+e9LUxtkzNATrE2=M9ojFSxDXoxNPjVapTg@mail.gmail.com>
	<CAA3Wa=uCeifJ2nbCm+MM7GW0_GaD_EtdP_x3_kTz8xBv0vwADg@mail.gmail.com>
	<CABmk8AG_+UiWXkyF+bk_fCgrnbCj6UFcaUyukgmgKk_RpHA4NQ@mail.gmail.com>
Message-ID: <72808E34-11A0-4B0E-B70A-97DE99171407@mac.com>

First of all may I thank everybody involved in creating this RBloomberg add-in, and the various R finance libraries. I am a salesperson in fixed income emerging and developed bond markets, specializing in RV, and since having "migrated" from Excel to R a few months ago, I haven't looked back. I am doing analyses which my clients - major macro hedge funds - have never seen before. This project is a real game changer for me and I owe everybody involved, bigtime. Thank you. 

Second - I have had some conversations with Bloomberg on their data API. The point below is correct - it cannot be redistributed - and if you produce charts with Bloomberg data you're supposed to include the source in them. There is however a Data licence, and this does allow for redistribution under certain conditions, but at high cost. Your bloomberg rep can advise because it's all turnkey and case-by-case. 

Finally I have a question. How difficult would it be to access Bloomberg data from a Linux or OSX platform? I'm finding Windows increasingly constraining. 

Tom




On 30 Aug 2011, at 15:04, Jos? Fernando Moreno Guti?rrez wrote:

> On the licensing part:
> I am not qualified to issue any sort of official legal opinion on
> Bloomberg's licensing practices, so please don't take this as such.
> That said, Bloomberg provides API tools for people to use. RBloomberg
> is in many ways similar to the Excel add-in that is widely used. My
> understanding -- again, not official -- is that Bloomberg terminal
> users are free to use these tools as long as the data obtained remains
> with the desktop where the Bloomberg terminal resides. Using
> RBloomberg to populate a non-local database, for example, would likely
> violate your user license. You should probably not do that.
> 
> On the not working part:
> Please provide more information on your configuration. Here is my
> (Windows) set-up, with working RBloomberg:
> 
>> # My configuration
>> R.version
>              _
> platform       i386-pc-mingw32
> arch           i386
> os             mingw32
> system         i386, mingw32
> status
> major          2
> minor          13.1
> year           2011
> month          07
> day            08
> svn rev        56322
> language       R
> version.string R version 2.13.1 (2011-07-08)
> 
>> installed.packages()[c("rJava", "RBloomberg"), ]
>          Package      LibPath                 Version   Priority
> rJava      "rJava"      "C:/R/R-2.13.1/library" "0.9-1"   NA
> RBloomberg "RBloomberg" "C:/R/R-2.13.1/library" "0.4-150" NA
>          Depends                 Imports LinkingTo Suggests Enhances
> rJava      "R (>= 2.5.0), methods" NA      NA        NA       NA
> RBloomberg "rJava"                 NA      NA        "zoo"    NA
>          OS_type   License Built
> rJava      NA        "GPL-2" "2.13.1"
> RBloomberg "windows" "GPL"   "2.13.1"
> 
>> # Working RBloomberg
>> library(RBloomberg)
> Loading required package: rJava
> 
>> conn <- blpConnect()
> R version 2.13.1 (2011-07-08)
> rJava Version 0.9-1
> RBloomberg Version 0.4-150
> Java environment initialized successfully.
> Looking for most recent blpapi3.jar file...
> Adding C:\blp\API\APIv3\JavaAPI\v3.4.3.2\lib\blpapi3.jar to Java classpath
> Bloomberg API Version 3.4.3.2
> 
>> bdp(conn, "GOOG US Equity", "PX_LAST")
>              PX_LAST
> GOOG US Equity  539.08
> 
> 
> 
> Thanks,
> John
> 
> On Mon, Aug 29, 2011 at 11:34 PM, Jos? Fernando Moreno Guti?rrez
> <chpmoreno at gmail.com> wrote:
>> I have a question. I use R and i have a Bloomberg terminal in my job. But
> I
>> don't Know if I can break the license accord to Bloomberg if I use
>> Rbloomberg. Too, RBloomberg don't works in the Terminal, maybe because the
>> proxy configuration. What are your recommendation?
>> 
>> On 29 August 2011 10:10, John Laing <john.laing at gmail.com> wrote:
>>> 
>>> New RBloomberg builds have been posted for 32 bit R. I hope to get 64
>>> bit builds published in the next few days.
>>> 
>>> install.packages("RBloomberg",repos="http://r.findata.org/")
>>> 
>>> This version is compatible with rJava v0.9, which should resolve the
>>> "'dimnames' applied to non-array" error many users have been getting.
>>> Also improved is the handling of bad securities with a connection
>>> where throw.ticker.errors = FALSE.
>>> 
>>> Any and all feedback welcome.
>>> 
>>> Thanks,
>>> John
>>> 
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>> 
>> 
>> 
>> --
>> Jos? Fernando Moreno Guti?rrez
>> Estudiante de Econom?a
>> Facultad de Ciencias Econ?micas
>> Universidad Nacional de Colombia
>> 
>> ?A?n haciendo a un lado la inestabilidad debida a la especulaci?n, est?
>> aquella que resulta de las caracter?sticas de la naturaleza humana?.
>> JMK...TG
>> 
> 
> 
> 
> -- 
> Jos? Fernando Moreno Guti?rrez
> Estudiante de Econom?a
> Facultad de Ciencias Econ?micas
> Universidad Nacional de Colombia
> 
> ?A?n haciendo a un lado la inestabilidad debida a la especulaci?n, est?
> aquella que resulta de las caracter?sticas de la naturaleza humana?.
> JMK...TG
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From thomas.browne at mac.com  Sun Sep  4 13:17:45 2011
From: thomas.browne at mac.com (thomas.browne at mac.com)
Date: Sun, 04 Sep 2011 12:17:45 +0100
Subject: [R-SIG-Finance] RBloomberg
In-Reply-To: <CABmk8AG_+UiWXkyF+bk_fCgrnbCj6UFcaUyukgmgKk_RpHA4NQ@mail.gmail.com>
References: <CABmk8AEhd1QWs85+e9LUxtkzNATrE2=M9ojFSxDXoxNPjVapTg@mail.gmail.com>
	<CAA3Wa=uCeifJ2nbCm+MM7GW0_GaD_EtdP_x3_kTz8xBv0vwADg@mail.gmail.com>
	<CABmk8AG_+UiWXkyF+bk_fCgrnbCj6UFcaUyukgmgKk_RpHA4NQ@mail.gmail.com>
Message-ID: <72808E34-11A0-4B0E-B70A-97DE99171407@mac.com>

First of all may I thank everybody involved in creating this RBloomberg add-in, and the various R finance libraries. I am a salesperson in fixed income emerging and developed bond markets, specializing in RV, and since having "migrated" from Excel to R a few months ago, I haven't looked back. I am doing analyses which my clients - major macro hedge funds - have never seen before. This project is a real game changer for me and I owe everybody involved, bigtime. Thank you. 

Second - I have had some conversations with Bloomberg on their data API. The point below is correct - it cannot be redistributed - and if you produce charts with Bloomberg data you're supposed to include the source in them. There is however a Data licence, and this does allow for redistribution under certain conditions, but at high cost. Your bloomberg rep can advise because it's all turnkey and case-by-case. 

Finally I have a question. How difficult would it be to access Bloomberg data from a Linux or OSX platform? I'm finding Windows increasingly constraining. 

Tom




On 30 Aug 2011, at 15:04, Jos? Fernando Moreno Guti?rrez wrote:

> On the licensing part:
> I am not qualified to issue any sort of official legal opinion on
> Bloomberg's licensing practices, so please don't take this as such.
> That said, Bloomberg provides API tools for people to use. RBloomberg
> is in many ways similar to the Excel add-in that is widely used. My
> understanding -- again, not official -- is that Bloomberg terminal
> users are free to use these tools as long as the data obtained remains
> with the desktop where the Bloomberg terminal resides. Using
> RBloomberg to populate a non-local database, for example, would likely
> violate your user license. You should probably not do that.
> 
> On the not working part:
> Please provide more information on your configuration. Here is my
> (Windows) set-up, with working RBloomberg:
> 
>> # My configuration
>> R.version
>              _
> platform       i386-pc-mingw32
> arch           i386
> os             mingw32
> system         i386, mingw32
> status
> major          2
> minor          13.1
> year           2011
> month          07
> day            08
> svn rev        56322
> language       R
> version.string R version 2.13.1 (2011-07-08)
> 
>> installed.packages()[c("rJava", "RBloomberg"), ]
>          Package      LibPath                 Version   Priority
> rJava      "rJava"      "C:/R/R-2.13.1/library" "0.9-1"   NA
> RBloomberg "RBloomberg" "C:/R/R-2.13.1/library" "0.4-150" NA
>          Depends                 Imports LinkingTo Suggests Enhances
> rJava      "R (>= 2.5.0), methods" NA      NA        NA       NA
> RBloomberg "rJava"                 NA      NA        "zoo"    NA
>          OS_type   License Built
> rJava      NA        "GPL-2" "2.13.1"
> RBloomberg "windows" "GPL"   "2.13.1"
> 
>> # Working RBloomberg
>> library(RBloomberg)
> Loading required package: rJava
> 
>> conn <- blpConnect()
> R version 2.13.1 (2011-07-08)
> rJava Version 0.9-1
> RBloomberg Version 0.4-150
> Java environment initialized successfully.
> Looking for most recent blpapi3.jar file...
> Adding C:\blp\API\APIv3\JavaAPI\v3.4.3.2\lib\blpapi3.jar to Java classpath
> Bloomberg API Version 3.4.3.2
> 
>> bdp(conn, "GOOG US Equity", "PX_LAST")
>              PX_LAST
> GOOG US Equity  539.08
> 
> 
> 
> Thanks,
> John
> 
> On Mon, Aug 29, 2011 at 11:34 PM, Jos? Fernando Moreno Guti?rrez
> <chpmoreno at gmail.com> wrote:
>> I have a question. I use R and i have a Bloomberg terminal in my job. But
> I
>> don't Know if I can break the license accord to Bloomberg if I use
>> Rbloomberg. Too, RBloomberg don't works in the Terminal, maybe because the
>> proxy configuration. What are your recommendation?
>> 
>> On 29 August 2011 10:10, John Laing <john.laing at gmail.com> wrote:
>>> 
>>> New RBloomberg builds have been posted for 32 bit R. I hope to get 64
>>> bit builds published in the next few days.
>>> 
>>> install.packages("RBloomberg",repos="http://r.findata.org/")
>>> 
>>> This version is compatible with rJava v0.9, which should resolve the
>>> "'dimnames' applied to non-array" error many users have been getting.
>>> Also improved is the handling of bad securities with a connection
>>> where throw.ticker.errors = FALSE.
>>> 
>>> Any and all feedback welcome.
>>> 
>>> Thanks,
>>> John
>>> 
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>> 
>> 
>> 
>> --
>> Jos? Fernando Moreno Guti?rrez
>> Estudiante de Econom?a
>> Facultad de Ciencias Econ?micas
>> Universidad Nacional de Colombia
>> 
>> ?A?n haciendo a un lado la inestabilidad debida a la especulaci?n, est?
>> aquella que resulta de las caracter?sticas de la naturaleza humana?.
>> JMK...TG
>> 
> 
> 
> 
> -- 
> Jos? Fernando Moreno Guti?rrez
> Estudiante de Econom?a
> Facultad de Ciencias Econ?micas
> Universidad Nacional de Colombia
> 
> ?A?n haciendo a un lado la inestabilidad debida a la especulaci?n, est?
> aquella que resulta de las caracter?sticas de la naturaleza humana?.
> JMK...TG
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From cfriedem at gmail.com  Mon Sep  5 05:47:44 2011
From: cfriedem at gmail.com (Charlie Friedemann)
Date: Sun, 4 Sep 2011 23:47:44 -0400
Subject: [R-SIG-Finance] Calculating historical returns of a set of trade
	rules over multiple assets
Message-ID: <A674C40F-1CA4-483D-A6BB-B96515DC9EE5@gmail.com>

Greetings,

Recently, I've been pushing more of my work into R. However, I feel  
like I'm missing out on some of the faster methods of doing things,  
which is why I turn to the people on this mailing list for help.

Anyway, one thing I'd like to use R to do is to calculate the trailing  
returns of a set of about 60 trading rules (many are the same rule  
parameterized over various window lengths) for a list of about 250  
asset pairs, such as SPY-IWM.

I know it's a pretty general question, but is there any way you guys  
would approach doing this in R that would be a generalized, almost  
vectorized, approach? I'd rather not have to do a for loop type  
approach over each pair and each indicator, as I feel like that  
wouldn't be as fast as doing them en masse (if that's even possible).  
This is part of an analysis that I need to run daily so speed is  
definitely an issue.

Oh, and I'm on Windows (Linux is not possible as others on the team I  
work with can't/won't/don't use it). I know this is a very general  
question, but even just some pointers as to what packages/approaches  
to check out would be very useful. I'm sure others on this list have  
had to deal with something similar.

Thanks!


From janselmi.sage at gmail.com  Mon Sep  5 11:46:46 2011
From: janselmi.sage at gmail.com (Jacopo Anselmi)
Date: Mon, 5 Sep 2011 11:46:46 +0200
Subject: [R-SIG-Finance] Get Tick data from IBrokers
Message-ID: <CA+MzGhZrv8Tj4A5sX6AJLyvSOFsRUQu9aVtPc_QuopybNLWd=w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110905/8015476f/attachment.pl>

From jeffrey.ryan at lemnica.com  Mon Sep  5 17:02:48 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Mon, 5 Sep 2011 10:02:48 -0500
Subject: [R-SIG-Finance] Get Tick data from IBrokers
In-Reply-To: <CA+MzGhZrv8Tj4A5sX6AJLyvSOFsRUQu9aVtPc_QuopybNLWd=w@mail.gmail.com>
References: <CA+MzGhZrv8Tj4A5sX6AJLyvSOFsRUQu9aVtPc_QuopybNLWd=w@mail.gmail.com>
Message-ID: <CABDUZc8OkAZzK70a8zru9V73o3bMnm=9RuM2GYZGBpzGjMyXFg@mail.gmail.com>

You just pass in a list of file names of handles (more efficient) to
the file= param.

> fh <- list(file("aapl.csv", open="w"), file("goog.csv", open="w"))
> reqMktData(ibg, list(twsSTK("AAPL"),twsSTK("GOOG")) event=eWrapper.MktData.CSV(2), file=fh)
> reqMktData(ibg, list(twsSTK("AAPL"),twsSTK("GOOG")), event=eWrapper.MktData.CSV(2), file=fh)
^C

> lapply(fh, close)
[[1]]
NULL

[[2]]
NULL

> system("head aapl.csv")
20110905 09:59:02.304651,,,,,,,162727
20110905 09:59:02.693429,0,-1,,,,,
20110905 09:59:02.694235,,,-1,0,,,
20110905 09:59:02.694818,0,,,,,,
20110905 09:59:02.695388,,,,0,,,
20110905 09:59:02.695950,0,-1,,,,,
20110905 09:59:02.696552,,,-1,0,,,
20110905 09:59:02.697134,0,,,,,,
20110905 09:59:02.697701,,,,0,,,
> system("head goog.csv")
20110905 09:59:03.177405,0,-1,,,,,
20110905 09:59:03.178224,,,-1,0,,,
20110905 09:59:03.178901,0,,,,,,
20110905 09:59:03.179560,,,,0,,,
20110905 09:59:03.180208,0,-1,,,,,
20110905 09:59:03.180879,,,-1,0,,,
20110905 09:59:03.181544,0,,,,,,
20110905 09:59:03.182245,,,,0,,,
>

HTH
Jeff

On Mon, Sep 5, 2011 at 4:46 AM, Jacopo Anselmi <janselmi.sage at gmail.com> wrote:
> Dear finance Rusers,
>
> I'm trying to download efficiently contract data taken from IBrokers to have
> them available later for analysis in R.
>
> I've found this great piece of code done by Jeff
> http://quant.stackexchange.com/questions/461/how-should-i-store-tick-data
>
> Unfortunately I'm not able to pass more than a contract at the same time and
> save the data as xts in an efficient way.
>
> Is there a chance you guys can help out?
>
> Thanks a lot!
>
> Jaco
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From cecilia.carmo at ua.pt  Tue Sep  6 11:42:34 2011
From: cecilia.carmo at ua.pt (Cecilia Carmo)
Date: Tue, 6 Sep 2011 10:42:34 +0100
Subject: [R-SIG-Finance] plm package, R squared, dummies in panel data
Message-ID: <000901cc6c79$4ec2be90$ec483bb0$@carmo@ua.pt>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110906/b00db808/attachment.pl>

From Murali.Menon at avivainvestors.com  Tue Sep  6 13:35:52 2011
From: Murali.Menon at avivainvestors.com (Murali.Menon at avivainvestors.com)
Date: Tue, 6 Sep 2011 12:35:52 +0100
Subject: [R-SIG-Finance] blpConnect hangs with RBloomberg 0.4-150 on R2.13.1
Message-ID: <05C1ABBB41112A4DB61380AD45F18EB61A56607D51@SWVLONCUEXDP01.im.root-domain.net>

Folks,

I am trying to upgrade from R2.11.1 with RBloomberg 0.4-144 and rJava_0.8-6, in which setup I have no problems connecting and using Bloomberg. My Java environment is JRE 6.

I see that some people have got RBloomberg 0.4-150 working under R2.13.1. It doesn't, however, for me: 

I am unable to establish  a connection using

conn <- blpConnect(blpapi.jar.file = 'C:/Program Files/blp/API/blpapi3.jar')

Inside blpConnect.Java() the "Java environment is initialized successfully", but thereafter the call tree gets stuck at .jnew() and hangs.

In .jnew():

o <- .External(RcreateObject, class, ..., silent = silent) 

is the line that hangs (class = "org/findata/blpwrapper/Connection", ... = "Java-Object(WARNING)", silent = FALSE)

I thought I could backtrack to rJava 0.8-8, but that build is not available for R2.13 (and rJava is missing entirely for R2.12) on the CRAN. 

Any suggestions?

Do I need a newer version of Java?

Can anyone point me to rJava 0.8-8 for R2.13 that I could try out instead?


sessionInfo()
R version 2.13.1 Patched (2011-07-22 r56481)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United Kingdom.1252  LC_CTYPE=English_United Kingdom.1252    LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C                            LC_TIME=English_United Kingdom.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] RBloomberg_0.4-150           rJava_0.9-2      plotrix_3.2-2       PerformanceAnalytics_1.0.3.2   xts_0.8-0           zoo_1.7-2                   

loaded via a namespace (and not attached):
[1] grid_2.13.1     lattice_0.19-31

Thanks,

Murali


From phaumueller at gmx.net  Tue Sep  6 15:35:45 2011
From: phaumueller at gmx.net (Philipp Haumueller)
Date: Tue, 06 Sep 2011 15:35:45 +0200
Subject: [R-SIG-Finance] PerformanceAnalytics - Style Analysis- plotting R
	squared over time
Message-ID: <20110906133545.238750@gmx.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110906/2a7e58cd/attachment.pl>

From igor_vilcek_external at tatrabanka.sk  Tue Sep  6 15:40:56 2011
From: igor_vilcek_external at tatrabanka.sk (igor_vilcek_external at tatrabanka.sk)
Date: Tue, 6 Sep 2011 15:40:56 +0200
Subject: [R-SIG-Finance] Parameters setting for multiple indicators with the
	same argument names
Message-ID: <OF5E6C20F9.97F8ADA8-ONC1257903.0047FE49-C1257903.004B443D@tatrabanka.sk>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110906/1fbff5b5/attachment.pl>

From brian at braverock.com  Tue Sep  6 16:27:53 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 06 Sep 2011 09:27:53 -0500
Subject: [R-SIG-Finance] Parameters setting for multiple indicators with
 the same argument names
In-Reply-To: <OF5E6C20F9.97F8ADA8-ONC1257903.0047FE49-C1257903.004B443D@tatrabanka.sk>
References: <OF5E6C20F9.97F8ADA8-ONC1257903.0047FE49-C1257903.004B443D@tatrabanka.sk>
Message-ID: <1315319273.23440.120.camel@brian-rcg>

On Tue, 2011-09-06 at 15:40 +0200, igor_vilcek_external at tatrabanka.sk
wrote:
> Hi, 
> 
> I've encountered a problem in external parameters setting, in case I want 
> to set parameters for more indicators which posses same argument names 
> (e.g. setting length of multiple different Moving Averages - same name 
> parameter 'n').
> 
> I can demonstrate this issue using quantstrat demo maCross (strategy uses 
> "short" and "long" moving average, and my aim is to set length of both 
> averages through 'parameters' argument in applyStrategy):
<...>

> Using this input, strategy uses only "50day" Moving Average, for both MA50 
> and MA200 in 'mktdata'.
> 
> Is there any way how to implement length of both different moving averages 
> (or other indicators e.g. ROC, BBands,... with same arguments) into 
> 'parameters'?

You have two options, a simple one, and a more complex one.

The simple one is for you to generate a brute force set of parameters
and loop over them, setting them as variables in  your strategy using
quote().  see ?expand.grid

Or, more flexible but also more complicated, see the two parameterTest
demos in the quantstrat package.  You can tell the parameter subsystem
which slots (indicators) you are applying parameters to, and apply a
different distribution to each.

Regards,

  - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From peter at braverock.com  Tue Sep  6 16:38:37 2011
From: peter at braverock.com (Peter Carl)
Date: Tue, 6 Sep 2011 09:38:37 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics - Style Analysis- plotting
 R squared over time
In-Reply-To: <20110906133545.238750@gmx.net>
References: <20110906133545.238750@gmx.net>
Message-ID: <f2e591eeb5ce4b1042bbd42c012a4ef4.squirrel@mail.braverock.com>

Phil,

The function page.RollingStyle in PApages (also on RForge) shows something
of a brute-force way to do it.  I'm sure there's a better way, but that
should work for you.

pcc
-- 
Peter Carl
http://www.braverock.com/~peter

> Dear all,
>
> I am running some analysis based on an asset factor model (Sharpe model -
> Style Analyses) in the Package PerformanceAnalytics/R-Forge.While
> calculating weights etc. works fine I would also like to calculate/plot
> rolling R-squared values of the Sharpe model over time? Are there any
> suggestions how to run this?
>
> Your help is greatly appreciated - thx,
>
> Phil
> --
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


From Sergio.Bizzotto at reechaim.com  Tue Sep  6 18:42:47 2011
From: Sergio.Bizzotto at reechaim.com (Sergio Bizzotto)
Date: Tue, 6 Sep 2011 16:42:47 +0000
Subject: [R-SIG-Finance] RBloomberg - no historical date retrieved since
	yesterday for ES1 Index
Message-ID: <DA69F6A76F562947A10AB226CC218DBF062D11DD@REE-LN-EX1v.Reech.local>

 
Hello,

Since yesterday it seems like the historical data retrieval for the ticker ES1 Index does not work, NULL is returned. I run it for months and it used to work without any problems.

I am using the following:

conn <- blpConnect();
test=bdh(conn, securities="ES1 Index", fields=c("PX_OPEN", "PX_HIGH", "PX_LOW", "PX_LAST", "PX_BID", "PX_ASK", "PX_VOLUME"), start_date=as.Date("1990-01-01"), include.non.trading.days=F, dates.as.row.names=FALSE);

The same code works and retrieves data for all the other tickers I am using (87 futures tickers), including "NQ1 Index".

I am using Rbloomberg_0.4-149 with rJava_0.8-5.

Is anybody experiencing the same issue? I have spoken yesterday to Bloomberg and they said that their API is working fine and there are currently no problems. I also run the Bloomberg API diagnostic test and everything seems to work properly.
Initially I thought the problem could have been caused by yesterday's US holiday but today the problem still persists when retrieving the data for that ticker using RBloomberg. Any chance the problem is on the RBloomberg package side?

Thanks.

Regards,
Sergio

 
 
Sergio Bizzotto
Senior Risk Analyst 
 
      
Reech AiM Partners LLP, Henrietta House, 8 Henrietta Place, London, W1G 0NB, United Kingdom
http://www.reechaim.com/
 DDI: +44 20 7399 3665; Switchboard: +44 20 7399 3650
 Fax: +44 20 7399 3698; http://www.reechaim.com/
Reech AiM Partners LLP, Registered Office: 4th Floor, Reading Bridge House, George Street, Reading RG1 8LS. Registered in England and Wales No. OC321436. Authorised and regulated by the Financial Services Authority. Reech CBRE Alternative Real Estate LLP, Registered Office: 4th Floor, Reading Bridge House, George Street, Reading RG1 8LS. Registered in England and Wales No. OC322313. Authorised and regulated by the Financial Services Authority. This message and any attachments (the "message") is intended solely for the addressees and is confidential.
 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110906/2180958b/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 10737 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110906/2180958b/attachment.jpe>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 2783 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110906/2180958b/attachment-0001.jpe>

From john.laing at gmail.com  Tue Sep  6 19:30:46 2011
From: john.laing at gmail.com (John Laing)
Date: Tue, 6 Sep 2011 13:30:46 -0400
Subject: [R-SIG-Finance] RBloomberg - no historical date retrieved since
 yesterday for ES1 Index
In-Reply-To: <DA69F6A76F562947A10AB226CC218DBF062D11DD@REE-LN-EX1v.Reech.local>
References: <DA69F6A76F562947A10AB226CC218DBF062D11DD@REE-LN-EX1v.Reech.local>
Message-ID: <CAA3Wa=szB6g3N7KEpSthS4a4en+X8gviA=Mmdu5bOJhn44g63w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110906/6b760c51/attachment.pl>

From armstrong.whit at gmail.com  Tue Sep  6 20:19:51 2011
From: armstrong.whit at gmail.com (Whit Armstrong)
Date: Tue, 6 Sep 2011 14:19:51 -0400
Subject: [R-SIG-Finance] RBloomberg - no historical date retrieved since
 yesterday for ES1 Index
In-Reply-To: <CAA3Wa=szB6g3N7KEpSthS4a4en+X8gviA=Mmdu5bOJhn44g63w@mail.gmail.com>
References: <DA69F6A76F562947A10AB226CC218DBF062D11DD@REE-LN-EX1v.Reech.local>
	<CAA3Wa=szB6g3N7KEpSthS4a4en+X8gviA=Mmdu5bOJhn44g63w@mail.gmail.com>
Message-ID: <CAMi=pg655+T4SnWm981uJvC2un1LW_d2XqYRNfkoCp+dn0dFSQ@mail.gmail.com>

mini's did not exist in 1990.

http://www.cmegroup.com/trading/equity-index/us-index/e-mini-sandp500_contractSpecs_futures.html

-Whit


On Tue, Sep 6, 2011 at 1:30 PM, John Laing <john.laing at gmail.com> wrote:
> Hi Sergio,
>
> It seems highly unlikely that the issue is in RBloomberg. Two reasons why I
> think this:
>
> 1) You can retrieve data for other tickers, so your configuration works. The
> package doesn't care what ticker you give it; it just passes that along to
> Bloomberg.
> 2) In Excel, BDH("ES1 Index","PX_OPEN","1990-01-01") returns "#N/A N/A".
>
> You should go back to Bloomberg. The problem is probably on their side, even
> if they don't realize/admit it yet.
>
> Thanks,
> John
>
>
> On Tue, Sep 6, 2011 at 12:42 PM, Sergio Bizzotto <
> Sergio.Bizzotto at reechaim.com> wrote:
>
>>
>>
>> ?Hello,
>>
>> ****
>>
>> Since yesterday it seems like the historical data retrieval for the ticker
>> ES1 Index does not work, NULL is returned. I run it for months and it used
>> to work without any problems.****
>>
>> ** **
>>
>> I am using the following:
>>
>> ****
>>
>> conn <- blpConnect();
>> test=bdh(conn, securities="ES1 Index", fields=c("PX_OPEN", "PX_HIGH",
>> "PX_LOW", "PX_LAST", "PX_BID", "PX_ASK", "PX_VOLUME"),
>> start_date=as.Date(?1990-01-01?), include.non.trading.days=F,
>> dates.as.row.names=FALSE);
>>
>> The same code works and retrieves data for all the other tickers I am using
>> (87 futures tickers), including ?NQ1 Index?.****
>>
>> ** **
>>
>> I am using Rbloomberg_0.4-149 with rJava_0.8-5.****
>>
>>
>> Is anybody experiencing the same issue? I have spoken yesterday to
>> Bloomberg and they said that their API is working fine and there are
>> currently no problems. I also run the Bloomberg API diagnostic test and
>> everything seems to work properly. ****
>>
>> Initially I thought the problem could have been caused by yesterday?s US
>> holiday but today the problem still persists when retrieving the data for
>> that ticker using RBloomberg. Any chance the problem is on the RBloomberg
>> package side?****
>>
>>
>> Thanks.****
>>
>>
>> Regards,
>> Sergio****
>>
>> ** **
>>
>>
>>
>>
>> ***Sergio Bizzotto**
>> *Senior Risk Analyst
>>
>>
>>
>> * ? ? ? *
>>
>> *Reech AiM Partners LLP, Henrietta House, 8 Henrietta Place, London**, W1G
>> 0NB, **United Kingdom*
>> ?**
>>
>> <http://www.reechaim.com/>
>>
>> **
>>
>> DDI: +44 20 7399 3665; Switchboard: +44 20 7399 3650
>>
>> ?Fax: +44 20 7399 3698; www.reechaim.com
>>
>> ?Reech AiM Partners LLP, Registered Office: 4th Floor, Reading Bridge
>> House, George Street, Reading RG1 8LS. ?Registered in England and Wales No.
>> OC321436. ?Authorised and regulated by the Financial Services Authority.
>> Reech CBRE Alternative Real Estate LLP, Registered Office: 4th Floor,
>> Reading Bridge House, George Street, Reading RG1 8LS. ?Registered in England
>> and Wales No. OC322313. ?Authorised and regulated by the Financial Services
>> Authority. This message and any attachments (the "message") is intended
>> solely for the addressees and is confidential.
>>
>>
>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From Sergio.Bizzotto at reechaim.com  Tue Sep  6 20:50:22 2011
From: Sergio.Bizzotto at reechaim.com (Sergio Bizzotto)
Date: Tue, 6 Sep 2011 18:50:22 +0000
Subject: [R-SIG-Finance] RBloomberg - no historical date retrieved since
	yesterday for ES1 Index
In-Reply-To: <CAA3Wa=szB6g3N7KEpSthS4a4en+X8gviA=Mmdu5bOJhn44g63w@mail.gmail.com>
References: <DA69F6A76F562947A10AB226CC218DBF062D11DD@REE-LN-EX1v.Reech.local>
	<CAA3Wa=szB6g3N7KEpSthS4a4en+X8gviA=Mmdu5bOJhn44g63w@mail.gmail.com>
Message-ID: <DA69F6A76F562947A10AB226CC218DBF062D1293@REE-LN-EX1v.Reech.local>

 
Hi John,

Thanks a lot for this. With your suggestion I can definitely go back to Bloomberg now. Your formula works fine for all other futures, even if they did not exist then, so that's the proof that this is actually a Bloomberg issue for ES1 Index.

Thanks again.

Regards,
Sergio



From: John Laing [mailto:john.laing at gmail.com]
Sent: 06 September 2011 18:31
To: Sergio Bizzotto
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] RBloomberg - no historical date retrieved since yesterday for ES1 Index

Hi Sergio,

It seems highly unlikely that the issue is in RBloomberg. Two reasons why I think this:

1) You can retrieve data for other tickers, so your configuration works. The package doesn't care what ticker you give it; it just passes that along to Bloomberg.
2) In Excel, BDH("ES1 Index","PX_OPEN","1990-01-01") returns "#N/A N/A".

You should go back to Bloomberg. The problem is probably on their side, even if they don't realize/admit it yet.

Thanks,
John

On Tue, Sep 6, 2011 at 12:42 PM, Sergio Bizzotto <Sergio.Bizzotto at reechaim.com<mailto:Sergio.Bizzotto at reechaim.com>> wrote:


Hello,
Since yesterday it seems like the historical data retrieval for the ticker ES1 Index does not work, NULL is returned. I run it for months and it used to work without any problems.

I am using the following:
conn <- blpConnect();
test=bdh(conn, securities="ES1 Index", fields=c("PX_OPEN", "PX_HIGH", "PX_LOW", "PX_LAST", "PX_BID", "PX_ASK", "PX_VOLUME"), start_date=as.Date("1990-01-01"), include.non.trading.days=F, dates.as.row.names=FALSE);

The same code works and retrieves data for all the other tickers I am using (87 futures tickers), including "NQ1 Index".

I am using Rbloomberg_0.4-149 with rJava_0.8-5.

Is anybody experiencing the same issue? I have spoken yesterday to Bloomberg and they said that their API is working fine and there are currently no problems. I also run the Bloomberg API diagnostic test and everything seems to work properly.
Initially I thought the problem could have been caused by yesterday's US holiday but today the problem still persists when retrieving the data for that ticker using RBloomberg. Any chance the problem is on the RBloomberg package side?

Thanks.

Regards,
Sergio





Sergio Bizzotto
Senior Risk Analyst



Error! Filename not specified.

Reech AiM Partners LLP, Henrietta House, 8 Henrietta Place, London, W1G 0NB, United Kingdom

DDI: +44 20 7399 3665<tel:%2B44%2020%207399%203665>; Switchboard: +44 20 7399 3650<tel:%2B44%2020%207399%203650>
Fax: +44 20 7399 3698<tel:%2B44%2020%207399%203698>; www.reechaim.com<http://www.reechaim.com/>

Reech AiM Partners LLP, Registered Office: 4th Floor, Reading Bridge House, George Street, Reading RG1 8LS.  Registered in England and Wales No. OC321436.  Authorised and regulated by the Financial Services Authority. Reech CBRE Alternative Real Estate LLP, Registered Office: 4th Floor, Reading Bridge House, George Street, Reading RG1 8LS.  Registered in England and Wales No. OC322313.  Authorised and regulated by the Financial Services Authority. This message and any attachments (the "message") is intended solely for the addressees and is confidential.

Error! Filename not specified.

 
 
Sergio Bizzotto
Senior Risk Analyst 
 
      
Reech AiM Partners LLP, Henrietta House, 8 Henrietta Place, London, W1G 0NB, United Kingdom
http://www.reechaim.com/
 DDI: +44 20 7399 3665; Switchboard: +44 20 7399 3650
 Fax: +44 20 7399 3698; http://www.reechaim.com/
Reech AiM Partners LLP, Registered Office: 4th Floor, Reading Bridge House, George Street, Reading RG1 8LS. Registered in England and Wales No. OC321436. Authorised and regulated by the Financial Services Authority. Reech CBRE Alternative Real Estate LLP, Registered Office: 4th Floor, Reading Bridge House, George Street, Reading RG1 8LS. Registered in England and Wales No. OC322313. Authorised and regulated by the Financial Services Authority. This message and any attachments (the "message") is intended solely for the addressees and is confidential.
 
_______________________________________________

R-SIG-Finance at r-project.org<mailto:R-SIG-Finance at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110906/b3a29e9e/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 10737 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110906/b3a29e9e/attachment.jpe>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 2783 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110906/b3a29e9e/attachment-0001.jpe>

From phaumueller at gmx.net  Tue Sep  6 21:28:32 2011
From: phaumueller at gmx.net (Philipp Haumueller)
Date: Tue, 06 Sep 2011 21:28:32 +0200
Subject: [R-SIG-Finance] PerformanceAnalytics - Style Analysis- plotting
 R squared over time
Message-ID: <20110906192832.147890@gmx.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110906/7f1c6a38/attachment.pl>

From janselmi.sage at gmail.com  Tue Sep  6 21:46:40 2011
From: janselmi.sage at gmail.com (Jacopo Anselmi)
Date: Tue, 6 Sep 2011 21:46:40 +0200
Subject: [R-SIG-Finance] Fwd:  Get Tick data from IBrokers
In-Reply-To: <CA+MzGhaEC_rCTudrTHpk2y6ECUpf2+rAsyV6PWAiisqgC77Jmw@mail.gmail.com>
References: <CA+MzGhZrv8Tj4A5sX6AJLyvSOFsRUQu9aVtPc_QuopybNLWd=w@mail.gmail.com>
	<CABDUZc8OkAZzK70a8zru9V73o3bMnm=9RuM2GYZGBpzGjMyXFg@mail.gmail.com>
	<CA+MzGhaEC_rCTudrTHpk2y6ECUpf2+rAsyV6PWAiisqgC77Jmw@mail.gmail.com>
Message-ID: <CA+MzGhaa-B1VortUJj=JbH-xPWxZ+AaACph4bYq60murMfBG1w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110906/ef999845/attachment.pl>

From peter at braverock.com  Tue Sep  6 23:01:14 2011
From: peter at braverock.com (Peter Carl)
Date: Tue, 6 Sep 2011 16:01:14 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics - Style Analysis- plotting
 R squared over time
In-Reply-To: <20110906192832.147890@gmx.net>
References: <20110906192832.147890@gmx.net>
Message-ID: <7b8e54fcb914c9cf32392fb9c55a31b5.squirrel@mail.braverock.com>

Take a look at the code itself - it implements what you are asking for. 
In particular, pay attention to the rollapply functions.

> page.RollingStyle
function (R.fund, R.style, method = c("constrained", "unconstrained",
    "normalized"), leverage = FALSE, selection = "none", width = 12,
    main = paste(colnames(R.fund)[1], " Rolling ", width, "-Month Style
Weights",
        sep = ""), space = 0, ...)
{
    R.fund = checkData(R.fund[, 1, drop = FALSE], method = "zoo")
    R.style = checkData(R.style, method = "zoo")
    method = method[1]
    columns.fund = ncol(R.fund)
    columns.style = ncol(R.style)
    columnnames.fund = colnames(R.fund)
    columnnames.style = colnames(R.style)
    merged.assets = na.omit(merge(R.fund, R.style))
    result = rollapply(data = merged.assets, FUN = function(x) {
        t(style.fit(R.fund = x[, 1, drop = FALSE], R.style = x[,
            -1, drop = FALSE], method = method, leverage = leverage,
            selection = selection)$weights)
    }, width = width, by = 1, by.column = FALSE, na.pad = FALSE,
        align = "right")
    fit = rollapply(data = merged.assets, FUN = function(x) {
        t(style.fit(R.fund = x[, 1, drop = FALSE], R.style = x[,
            -1, drop = FALSE], method = method, leverage = leverage,
            selection = selection)$R.squared)
    }, width = width, by = 1, by.column = FALSE, na.pad = FALSE,
        align = "right")
    colnames(result) = columnnames.style
    rows = nrow(result)
    ymax = max(c(1, result))
    ymin = min(c(-1, result))
    op <- par(oma = c(2, 0, 4, 0), mar = c(0, 4, 0, 4))
    layout(matrix(c(1:columns.style, columns.style + 1, columns.style +
        2), nc = 1, byrow = TRUE))
    for (i in 1:columns.style) {
        if (even(i))
            yaxis.right = TRUE
        else yaxis.right = FALSE
        chart.TimeSeries(result[, i, drop = F], type = "h", lend = "butt",
            xaxis = FALSE, main = "", ylab = colnames(result)[i],
            ylim = c(ymin, ymax), yaxis.right = yaxis.right,
            ...)
    }
    positives = result
    for (column in 1:ncol(result)) {
        for (row in 1:nrow(result)) {
            positives[row, column] = max(0, result[row, column])
        }
    }
    negatives = result
    for (column in 1:ncol(result)) {
        for (row in 1:nrow(result)) {
            negatives[row, column] = min(0, result[row, column])
        }
    }
    sumpositives = zoo(apply(positives, 1, sum), order.by = index(positives))
    sumnegatives = zoo(apply(negatives, 1, sum), order.by = index(negatives))
    net = apply(result, 1, sum)
    if (even(columns.style + 1))
        yaxis.right = TRUE
    else yaxis.right = FALSE
    chart.TimeSeries(cbind(sumpositives, sumnegatives), type = "h",
        lend = "butt", xaxis = FALSE, main = "", ylab = "Total",
        yaxis.right = yaxis.right, ...)
    lines(1:rows, net)
    if (even(columns.style + 2))
        yaxis.right = TRUE
    else yaxis.right = FALSE
    chart.TimeSeries(fit, type = "l", xaxis = TRUE, main = "",
        ylab = "AdjR^2", ylim = c(0, 1), yaxis.right = yaxis.right,
        ...)
    mtext(main, side = 3, outer = TRUE, font = 2, cex = 1.2,
        line = 1)
    par(op)
}

-- 
Peter Carl
http://www.braverock.com/~peter

> Hi Carl,
>
>  Many thanks for your quick reply. Just a follow up on  this. While I have
> installed PA pages I wasn't too successful in finding  further information
> in respect of implementing the function.page RollingStyle which would
> allow
> me to plot the R-squared over time for my returns based analysis
> (Sharpe-model).Would you mind pointing me to some further information?
>
>   Also, is there a straightforward way to chart or calculate each factor
> weight
>  so  that the values can be read easily (while chart.RollingStyle. gives a
> good graphical impression of the styles, I'd also be interested in
> obtaining  an idea of the exact weightings at some point in time, e.g.
> showing  min/max over time and potentially also some kind of summary
> statistics like avg or sd of the style attributes)
>
>  Some help on this would be awesome - thks.
>
>  Phil
>>         -------- Original-Nachricht --------
>> Datum: Tue, 6 Sep 2011 09:38:37 -0500
>> Von: "Peter Carl" <peter at braverock.com>
>> An: "Philipp Haumueller" <phaumueller at gmx.net>
>> CC: r-sig-finance at r-project.org
>> Betreff: Re: [R-SIG-Finance] PerformanceAnalytics - Style Analysis-
>> plotting R squared over time
>>
>>         Phil,
>>
>> The function page.RollingStyle in PApages (also on RForge) shows
>> something
>> of a brute-force way to do it.  I'm sure there's a better way, but that
>> should work for you.
>>
>> pcc
>> --
>> Peter Carl
>> http://www.braverock.com/~peter
>>
>> > Dear all,
>> >
>> > I am running some analysis based on an asset factor model (Sharpe
>> model
>> -
>> > Style Analyses) in the Package PerformanceAnalytics/R-Forge.While
>> > calculating weights etc. works fine I would also like to
>> calculate/plot
>> > rolling R-squared values of the Sharpe model over time? Are there any
>> > suggestions how to run this?
>> >
>> > Your help is greatly appreciated - thx,
>> >
>> > Phil
>> > --
>> >
>> >
>> >
>> > 	[[alternative HTML version deleted]]
>> >
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R
>> questions
>> > should go.
>> >
>>
>>
>>
>
> --
> Empfehlen Sie GMX DSL Ihren Freunden und Bekannten und wir
> belohnen Sie mit bis zu 50,- Euro! https://freundschaftswerbung.gmx.de
>


From john.laing at gmail.com  Wed Sep  7 00:39:48 2011
From: john.laing at gmail.com (John Laing)
Date: Tue, 6 Sep 2011 18:39:48 -0400
Subject: [R-SIG-Finance] blpConnect hangs with RBloomberg 0.4-150 on
	R2.13.1
In-Reply-To: <05C1ABBB41112A4DB61380AD45F18EB61A56607D51@SWVLONCUEXDP01.im.root-domain.net>
References: <05C1ABBB41112A4DB61380AD45F18EB61A56607D51@SWVLONCUEXDP01.im.root-domain.net>
Message-ID: <CAA3Wa=s7LBkokx_Fva8J0yx3tBcAY2-doah-+J+Q5z9vhdMkjQ@mail.gmail.com>

Hi Murali,

I don't see anything obvious that would cause this to stop working for
you on upgrade. One possibility could be that your Bloomberg API is
installed in a non-standard directory, but that's not definitely the
issue.

It might be useful to look at your Java logs. First, try increasing
the logging level like this:
conn <- blpConnect(blpapi.jar.file = 'C:/Program
Files/blp/API/blpapi3.jar', log.level = "info")

The log will be in your Java home dir (possibly the same as your
Windows home dir) named something like org.findata.blpwrapper.*.log.
We're looking for an entry like "Session Started" or "Service Started"
or something along those lines.

Thanks,
John


On Tue, Sep 6, 2011 at 7:35 AM,  <Murali.Menon at avivainvestors.com> wrote:
> Folks,
>
> I am trying to upgrade from R2.11.1 with RBloomberg 0.4-144 and rJava_0.8-6, in which setup I have no problems connecting and using Bloomberg. My Java environment is JRE 6.
>
> I see that some people have got RBloomberg 0.4-150 working under R2.13.1. It doesn't, however, for me:
>
> I am unable to establish ?a connection using
>
> conn <- blpConnect(blpapi.jar.file = 'C:/Program Files/blp/API/blpapi3.jar')
>
> Inside blpConnect.Java() the "Java environment is initialized successfully", but thereafter the call tree gets stuck at .jnew() and hangs.
>
> In .jnew():
>
> o <- .External(RcreateObject, class, ..., silent = silent)
>
> is the line that hangs (class = "org/findata/blpwrapper/Connection", ... = "Java-Object(WARNING)", silent = FALSE)
>
> I thought I could backtrack to rJava 0.8-8, but that build is not available for R2.13 (and rJava is missing entirely for R2.12) on the CRAN.
>
> Any suggestions?
>
> Do I need a newer version of Java?
>
> Can anyone point me to rJava 0.8-8 for R2.13 that I could try out instead?
>
>
> sessionInfo()
> R version 2.13.1 Patched (2011-07-22 r56481)
> Platform: i386-pc-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=English_United Kingdom.1252 ?LC_CTYPE=English_United Kingdom.1252 ? ?LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C ? ? ? ? ? ? ? ? ? ? ? ? ? ?LC_TIME=English_United Kingdom.1252
>
> attached base packages:
> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>
> other attached packages:
> [1] RBloomberg_0.4-150 ? ? ? ? ? rJava_0.9-2 ? ? ?plotrix_3.2-2 ? ? ? PerformanceAnalytics_1.0.3.2 ? xts_0.8-0 ? ? ? ? ? zoo_1.7-2
>
> loaded via a namespace (and not attached):
> [1] grid_2.13.1 ? ? lattice_0.19-31
>
> Thanks,
>
> Murali
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From phaumueller at gmx.net  Wed Sep  7 10:54:44 2011
From: phaumueller at gmx.net (Philipp Haumueller)
Date: Wed, 07 Sep 2011 10:54:44 +0200
Subject: [R-SIG-Finance] PerformanceAnalytics - Style Analysis- plotting
 R squared over time
In-Reply-To: <7b8e54fcb914c9cf32392fb9c55a31b5.squirrel@mail.braverock.com>
References: <20110906192832.147890@gmx.net>
	<7b8e54fcb914c9cf32392fb9c55a31b5.squirrel@mail.braverock.com>
Message-ID: <20110907085444.194270@gmx.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110907/ec3c0dca/attachment.pl>

From Murali.Menon at avivainvestors.com  Wed Sep  7 12:36:09 2011
From: Murali.Menon at avivainvestors.com (Murali.Menon at avivainvestors.com)
Date: Wed, 7 Sep 2011 11:36:09 +0100
Subject: [R-SIG-Finance] blpConnect hangs with RBloomberg 0.4-150 on
 R2.13.1
In-Reply-To: <CAA3Wa=s7LBkokx_Fva8J0yx3tBcAY2-doah-+J+Q5z9vhdMkjQ@mail.gmail.com>
References: <05C1ABBB41112A4DB61380AD45F18EB61A56607D51@SWVLONCUEXDP01.im.root-domain.net>
	<CAA3Wa=s7LBkokx_Fva8J0yx3tBcAY2-doah-+J+Q5z9vhdMkjQ@mail.gmail.com>
Message-ID: <05C1ABBB41112A4DB61380AD45F18EB61A56607D5D@SWVLONCUEXDP01.im.root-domain.net>

Hi John,

Thank you for the response. I tried as you suggest. There are two logs created:

org.findata.blpwrapper.0.log: 

07-Sep-2011 11:24:54 org.findata.blpwrapper.Connection processSessionStatusEvent
INFO: Session Started

blpjavaapi0.log.0:

2011/09/07 11:24:53.981 [INFO] **********************************************************
2011/09/07 11:24:54.340 com.bloomberglp.blpapi.impl.an  a [INFO] Session established with: /127.0.0.1:8194

I replaced the log.level = "info" with = "finest", and it makes no difference - only these lines appear in either case.

When I look at the successful connections with R2.11.1 and earlier rJava, I get no events in the org.findata* log, but exactly the same events in the blpjavaapi0.log.0 file.

The blpConnect() call hangs and can't be escaped from without closing the R session.

Baffled!

Murali

-----Original Message-----
From: John Laing [mailto:john.laing at gmail.com] 
Sent: 06 September 2011 23:40
To: Menon Murali
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] blpConnect hangs with RBloomberg 0.4-150 on R2.13.1

Hi Murali,

I don't see anything obvious that would cause this to stop working for
you on upgrade. One possibility could be that your Bloomberg API is
installed in a non-standard directory, but that's not definitely the
issue.

It might be useful to look at your Java logs. First, try increasing
the logging level like this:
conn <- blpConnect(blpapi.jar.file = 'C:/Program
Files/blp/API/blpapi3.jar', log.level = "info")

The log will be in your Java home dir (possibly the same as your
Windows home dir) named something like org.findata.blpwrapper.*.log.
We're looking for an entry like "Session Started" or "Service Started"
or something along those lines.

Thanks,
John


On Tue, Sep 6, 2011 at 7:35 AM,  <Murali.Menon at avivainvestors.com> wrote:
> Folks,
>
> I am trying to upgrade from R2.11.1 with RBloomberg 0.4-144 and rJava_0.8-6, in which setup I have no problems connecting and using Bloomberg. My Java environment is JRE 6.
>
> I see that some people have got RBloomberg 0.4-150 working under R2.13.1. It doesn't, however, for me:
>
> I am unable to establish ?a connection using
>
> conn <- blpConnect(blpapi.jar.file = 'C:/Program Files/blp/API/blpapi3.jar')
>
> Inside blpConnect.Java() the "Java environment is initialized successfully", but thereafter the call tree gets stuck at .jnew() and hangs.
>
> In .jnew():
>
> o <- .External(RcreateObject, class, ..., silent = silent)
>
> is the line that hangs (class = "org/findata/blpwrapper/Connection", ... = "Java-Object(WARNING)", silent = FALSE)
>
> I thought I could backtrack to rJava 0.8-8, but that build is not available for R2.13 (and rJava is missing entirely for R2.12) on the CRAN.
>
> Any suggestions?
>
> Do I need a newer version of Java?
>
> Can anyone point me to rJava 0.8-8 for R2.13 that I could try out instead?
>
>
> sessionInfo()
> R version 2.13.1 Patched (2011-07-22 r56481)
> Platform: i386-pc-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=English_United Kingdom.1252 ?LC_CTYPE=English_United Kingdom.1252 ? ?LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C ? ? ? ? ? ? ? ? ? ? ? ? ? ?LC_TIME=English_United Kingdom.1252
>
> attached base packages:
> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>
> other attached packages:
> [1] RBloomberg_0.4-150 ? ? ? ? ? rJava_0.9-2 ? ? ?plotrix_3.2-2 ? ? ? PerformanceAnalytics_1.0.3.2 ? xts_0.8-0 ? ? ? ? ? zoo_1.7-2
>
> loaded via a namespace (and not attached):
> [1] grid_2.13.1 ? ? lattice_0.19-31
>
> Thanks,
>
> Murali
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From peter at braverock.com  Wed Sep  7 13:13:48 2011
From: peter at braverock.com (Peter Carl)
Date: Wed, 7 Sep 2011 06:13:48 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics - Style Analysis- plotting
 R squared over time
In-Reply-To: <20110907085444.194270@gmx.net>
References: <20110906192832.147890@gmx.net>
	<7b8e54fcb914c9cf32392fb9c55a31b5.squirrel@mail.braverock.com>
	<20110907085444.194270@gmx.net>
Message-ID: <4ddbdab034f5f97eee4ed1d843585fde.squirrel@mail.braverock.com>

Phil,

I think the error message is clear - the data series you're using as the
"fund" data, Rfund.z, isn't being recognized as a format that is
convertible to a time series object (for conversion into an xts object). 
Look at ?as.xts and consider constructing xts objects for both timeseries.
 Or you might use Return.read from PerformanceAnalytics to load the series
in from a csv file.

pcc
-- 
Peter Carl
http://www.braverock.com/~peter

> Many thanks. I tried to implement this, but still seem to miss something.
>
> Here's a contrived example.Using 10.5 years of monthly fund data, I use
> a stock market and a real estate index to "explain" the returns of the
> fund. What I would like to do is to plot the R-squared over time with the
> function.RollingStyle I proceed as follows:
> ??
> head(Rfund.z)
> ?? 2000-01-31???? 2000-03-02???? 2000-03-31???? 2000-05-01????
> 2000-05-31???? 2000-07-01
> -0.033951898?? 0.052783466 -0.020335698 -0.006613730?? 0.008663712??
> 0.091497179
>
> ??head(Rstyle.z)
> ???????????????????????????? Stocks.z?????????????? RE.z
> 2000-01-31 -0.058851033?? 0.01968497
> 2000-03-02?? 0.002817568 -0.03427083
> 2000-03-31?? 0.066951099?? 0.06969885
>
> Applying the page.RollingStyle function yields an error message
>
>> page.RollingStyle (Rfund.z, Rstyle.z, method="constrained",
> leverage=FALSE)
>
> Error in checkData(R.fund) :
> ?? The data cannot be converted into a time series.?? If you are trying to
> pass in names from a data object with one column, you should use the form
> 'data[rows, columns, drop = FALSE]'.?? Rownames should have standard date
> formats, such as '1985-03-15'.
> In addition: Warning message:
> In rollapply.zoo(data = merged.assets, FUN = function(x) { :
> ?? na.pad argument is deprecated
>
>
> Would be great, if someone could provide me with a brief explanation of
> what exactly is going wrong here. Many thanks, Cheers,
> Phil
>
>
>
>
>>
>> -------- Original-Nachricht --------
>> Datum: Tue, 6 Sep 2011 16:01:14 -0500
>> Von: "Peter Carl" <peter at braverock.com>
>> An: "Philipp Haumueller" <phaumueller at gmx.net>
>> CC: r-sig-finance at r-project.org
>> Betreff: Re: [R-SIG-Finance] PerformanceAnalytics - Style Analysis-
>> plotting R squared over time
>>
>>             Take a look at the code itself - it implements what you are
>> asking for.
>> In particular, pay attention to the rollapply functions.
>>
>> > page.RollingStyle
>> function (R.fund, R.style, method = c("constrained", "unconstrained",
>>     "normalized"), leverage = FALSE, selection = "none", width = 12,
>>     main = paste(colnames(R.fund)[1], " Rolling ", width, "-Month Style
>> Weights",
>>         sep = ""), space = 0, ...)
>> {
>>     R.fund = checkData(R.fund[, 1, drop = FALSE], method = "zoo")
>>     R.style = checkData(R.style, method = "zoo")
>>     method = method[1]
>>     columns.fund = ncol(R.fund)
>>     columns.style = ncol(R.style)
>>     columnnames.fund = colnames(R.fund)
>>     columnnames.style = colnames(R.style)
>>     merged.assets = na.omit(merge(R.fund, R.style))
>>     result = rollapply(data = merged.assets, FUN = function(x) {
>>         t(style.fit(R.fund = x[, 1, drop = FALSE], R.style = x[,
>>             -1, drop = FALSE], method = method, leverage = leverage,
>>             selection = selection)$weights)
>>     }, width = width, by = 1, by.column = FALSE, na.pad = FALSE,
>>         align = "right")
>>     fit = rollapply(data = merged.assets, FUN = function(x) {
>>         t(style.fit(R.fund = x[, 1, drop = FALSE], R.style = x[,
>>             -1, drop = FALSE], method = method, leverage = leverage,
>>             selection = selection)$R.squared)
>>     }, width = width, by = 1, by.column = FALSE, na.pad = FALSE,
>>         align = "right")
>>     colnames(result) = columnnames.style
>>     rows = nrow(result)
>>     ymax = max(c(1, result))
>>     ymin = min(c(-1, result))
>>     op <- par(oma = c(2, 0, 4, 0), mar = c(0, 4, 0, 4))
>>     layout(matrix(c(1:columns.style, columns.style + 1, columns.style +
>>         2), nc = 1, byrow = TRUE))
>>     for (i in 1:columns.style) {
>>         if (even(i))
>>             yaxis.right = TRUE
>>         else yaxis.right = FALSE
>>         chart.TimeSeries(result[, i, drop = F], type = "h", lend =
>> "butt",
>>             xaxis = FALSE, main = "", ylab = colnames(result)[i],
>>             ylim = c(ymin, ymax), yaxis.right = yaxis.right,
>>             ...)
>>     }
>>     positives = result
>>     for (column in 1:ncol(result)) {
>>         for (row in 1:nrow(result)) {
>>             positives[row, column] = max(0, result[row, column])
>>         }
>>     }
>>     negatives = result
>>     for (column in 1:ncol(result)) {
>>         for (row in 1:nrow(result)) {
>>             negatives[row, column] = min(0, result[row, column])
>>         }
>>     }
>>     sumpositives = zoo(apply(positives, 1, sum), order.by =
>> index(positives))
>>     sumnegatives = zoo(apply(negatives, 1, sum), order.by =
>> index(negatives))
>>     net = apply(result, 1, sum)
>>     if (even(columns.style + 1))
>>         yaxis.right = TRUE
>>     else yaxis.right = FALSE
>>     chart.TimeSeries(cbind(sumpositives, sumnegatives), type = "h",
>>         lend = "butt", xaxis = FALSE, main = "", ylab = "Total",
>>         yaxis.right = yaxis.right, ...)
>>     lines(1:rows, net)
>>     if (even(columns.style + 2))
>>         yaxis.right = TRUE
>>     else yaxis.right = FALSE
>>     chart.TimeSeries(fit, type = "l", xaxis = TRUE, main = "",
>>         ylab = "AdjR^2", ylim = c(0, 1), yaxis.right = yaxis.right,
>>         ...)
>>     mtext(main, side = 3, outer = TRUE, font = 2, cex = 1.2,
>>         line = 1)
>>     par(op)
>> }
>>
>> --
>> Peter Carl
>> http://www.braverock.com/~peter
>>
>> > Hi Carl,
>> >
>> >  Many thanks for your quick reply. Just a follow up on  this. While I
>> have
>> > installed PA pages I wasn't too successful in finding  further
>> information
>> > in respect of implementing the function.page RollingStyle which would
>> > allow
>> > me to plot the R-squared over time for my returns based analysis
>> > (Sharpe-model).Would you mind pointing me to some further information?
>> >
>> >   Also, is there a straightforward way to chart or calculate each
>> factor
>> > weight
>> >  so  that the values can be read easily (while chart.RollingStyle.
>> gives a
>> > good graphical impression of the styles, I'd also be interested in
>> > obtaining  an idea of the exact weightings at some point in time, e.g.
>> > showing  min/max over time and potentially also some kind of summary
>> > statistics like avg or sd of the style attributes)
>> >
>> >  Some help on this would be awesome - thks.
>> >
>> >  Phil
>> >>         -------- Original-Nachricht --------
>> >> Datum: Tue, 6 Sep 2011 09:38:37 -0500
>> >> Von: "Peter Carl" <peter at braverock.com>
>> >> An: "Philipp Haumueller" <phaumueller at gmx.net>
>> >> CC: r-sig-finance at r-project.org
>> >> Betreff: Re: [R-SIG-Finance] PerformanceAnalytics - Style Analysis-
>> >> plotting R squared over time
>> >>
>> >>         Phil,
>> >>
>> >> The function page.RollingStyle in PApages (also on RForge) shows
>> >> something
>> >> of a brute-force way to do it.  I'm sure there's a better way, but
>> that
>> >> should work for you.
>> >>
>> >> pcc
>> >> --
>> >> Peter Carl
>> >> http://www.braverock.com/~peter
>> >>
>> >> > Dear all,
>> >> >
>> >> > I am running some analysis based on an asset factor model (Sharpe
>> >> model
>> >> -
>> >> > Style Analyses) in the Package PerformanceAnalytics/R-Forge.While
>> >> > calculating weights etc. works fine I would also like to
>> >> calculate/plot
>> >> > rolling R-squared values of the Sharpe model over time? Are there
>> any
>> >> > suggestions how to run this?
>> >> >
>> >> > Your help is greatly appreciated - thx,
>> >> >
>> >> > Phil
>> >> > --
>> >> >
>> >> >
>> >> >
>> >> > 	[[alternative HTML version deleted]]
>> >> >
>> >> > _______________________________________________
>> >> > R-SIG-Finance at r-project.org mailing list
>> >> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> >> > -- Subscriber-posting only. If you want to post, subscribe first.
>> >> > -- Also note that this is not the r-help list where general R
>> >> questions
>> >> > should go.
>> >> >
>> >>
>> >>
>> >>
>> >
>> > --
>> > Empfehlen Sie GMX DSL Ihren Freunden und Bekannten und wir
>> > belohnen Sie mit bis zu 50,- Euro! https://freundschaftswerbung.gmx.de
>> >
>>
>>
>>
>
> --
> Empfehlen Sie GMX DSL Ihren Freunden und Bekannten und wir
> belohnen Sie mit bis zu 50,- Euro! https://freundschaftswerbung.gmx.de
>


From kent.russell at live.com  Wed Sep  7 13:28:26 2011
From: kent.russell at live.com (Kent Russell)
Date: Wed, 7 Sep 2011 06:28:26 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics - Style Analysis- plotting
	R squared over time
In-Reply-To: <4ddbdab034f5f97eee4ed1d843585fde.squirrel@mail.braverock.com>
References: <20110906192832.147890@gmx.net>
	<7b8e54fcb914c9cf32392fb9c55a31b5.squirrel@mail.braverock.com>
	<20110907085444.194270@gmx.net>
	<4ddbdab034f5f97eee4ed1d843585fde.squirrel@mail.braverock.com>
Message-ID: <BLU0-SMTP3195132BD740CF41C3D268FFB1F0@phx.gbl>

I got the same error and data is definitely xts.  I will try to debug today.  Looks like my function works fine on a cumulative basis or if I use for loop but does not work with rollapply.

Kent

On Sep 7, 2011, at 6:13 AM, "Peter Carl" <peter at braverock.com> wrote:

> Phil,
> 
> I think the error message is clear - the data series you're using as the
> "fund" data, Rfund.z, isn't being recognized as a format that is
> convertible to a time series object (for conversion into an xts object). 
> Look at ?as.xts and consider constructing xts objects for both timeseries.
> Or you might use Return.read from PerformanceAnalytics to load the series
> in from a csv file.
> 
> pcc
> -- 
> Peter Carl
> http://www.braverock.com/~peter
> 
>> Many thanks. I tried to implement this, but still seem to miss something.
>> 
>> Here's a contrived example.Using 10.5 years of monthly fund data, I use
>> a stock market and a real estate index to "explain" the returns of the
>> fund. What I would like to do is to plot the R-squared over time with the
>> function.RollingStyle I proceed as follows:
>> ? 
>> head(Rfund.z)
>> ?  2000-01-31? ?  2000-03-02? ?  2000-03-31? ?  2000-05-01? ? 
>> 2000-05-31? ?  2000-07-01
>> -0.033951898?  0.052783466 -0.020335698 -0.006613730?  0.008663712? 
>> 0.091497179
>> 
>> ? head(Rstyle.z)
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ?  Stocks.z? ? ? ? ? ? ?  RE.z
>> 2000-01-31 -0.058851033?  0.01968497
>> 2000-03-02?  0.002817568 -0.03427083
>> 2000-03-31?  0.066951099?  0.06969885
>> 
>> Applying the page.RollingStyle function yields an error message
>> 
>>> page.RollingStyle (Rfund.z, Rstyle.z, method="constrained",
>> leverage=FALSE)
>> 
>> Error in checkData(R.fund) :
>> ?  The data cannot be converted into a time series.?  If you are trying to
>> pass in names from a data object with one column, you should use the form
>> 'data[rows, columns, drop = FALSE]'.?  Rownames should have standard date
>> formats, such as '1985-03-15'.
>> In addition: Warning message:
>> In rollapply.zoo(data = merged.assets, FUN = function(x) { :
>> ?  na.pad argument is deprecated
>> 
>> 
>> Would be great, if someone could provide me with a brief explanation of
>> what exactly is going wrong here. Many thanks, Cheers,
>> Phil
>> 
>> 
>> 
>> 
>>> 
>>> -------- Original-Nachricht --------
>>> Datum: Tue, 6 Sep 2011 16:01:14 -0500
>>> Von: "Peter Carl" <peter at braverock.com>
>>> An: "Philipp Haumueller" <phaumueller at gmx.net>
>>> CC: r-sig-finance at r-project.org
>>> Betreff: Re: [R-SIG-Finance] PerformanceAnalytics - Style Analysis-
>>> plotting R squared over time
>>> 
>>>            Take a look at the code itself - it implements what you are
>>> asking for.
>>> In particular, pay attention to the rollapply functions.
>>> 
>>>> page.RollingStyle
>>> function (R.fund, R.style, method = c("constrained", "unconstrained",
>>>    "normalized"), leverage = FALSE, selection = "none", width = 12,
>>>    main = paste(colnames(R.fund)[1], " Rolling ", width, "-Month Style
>>> Weights",
>>>        sep = ""), space = 0, ...)
>>> {
>>>    R.fund = checkData(R.fund[, 1, drop = FALSE], method = "zoo")
>>>    R.style = checkData(R.style, method = "zoo")
>>>    method = method[1]
>>>    columns.fund = ncol(R.fund)
>>>    columns.style = ncol(R.style)
>>>    columnnames.fund = colnames(R.fund)
>>>    columnnames.style = colnames(R.style)
>>>    merged.assets = na.omit(merge(R.fund, R.style))
>>>    result = rollapply(data = merged.assets, FUN = function(x) {
>>>        t(style.fit(R.fund = x[, 1, drop = FALSE], R.style = x[,
>>>            -1, drop = FALSE], method = method, leverage = leverage,
>>>            selection = selection)$weights)
>>>    }, width = width, by = 1, by.column = FALSE, na.pad = FALSE,
>>>        align = "right")
>>>    fit = rollapply(data = merged.assets, FUN = function(x) {
>>>        t(style.fit(R.fund = x[, 1, drop = FALSE], R.style = x[,
>>>            -1, drop = FALSE], method = method, leverage = leverage,
>>>            selection = selection)$R.squared)
>>>    }, width = width, by = 1, by.column = FALSE, na.pad = FALSE,
>>>        align = "right")
>>>    colnames(result) = columnnames.style
>>>    rows = nrow(result)
>>>    ymax = max(c(1, result))
>>>    ymin = min(c(-1, result))
>>>    op <- par(oma = c(2, 0, 4, 0), mar = c(0, 4, 0, 4))
>>>    layout(matrix(c(1:columns.style, columns.style + 1, columns.style +
>>>        2), nc = 1, byrow = TRUE))
>>>    for (i in 1:columns.style) {
>>>        if (even(i))
>>>            yaxis.right = TRUE
>>>        else yaxis.right = FALSE
>>>        chart.TimeSeries(result[, i, drop = F], type = "h", lend =
>>> "butt",
>>>            xaxis = FALSE, main = "", ylab = colnames(result)[i],
>>>            ylim = c(ymin, ymax), yaxis.right = yaxis.right,
>>>            ...)
>>>    }
>>>    positives = result
>>>    for (column in 1:ncol(result)) {
>>>        for (row in 1:nrow(result)) {
>>>            positives[row, column] = max(0, result[row, column])
>>>        }
>>>    }
>>>    negatives = result
>>>    for (column in 1:ncol(result)) {
>>>        for (row in 1:nrow(result)) {
>>>            negatives[row, column] = min(0, result[row, column])
>>>        }
>>>    }
>>>    sumpositives = zoo(apply(positives, 1, sum), order.by =
>>> index(positives))
>>>    sumnegatives = zoo(apply(negatives, 1, sum), order.by =
>>> index(negatives))
>>>    net = apply(result, 1, sum)
>>>    if (even(columns.style + 1))
>>>        yaxis.right = TRUE
>>>    else yaxis.right = FALSE
>>>    chart.TimeSeries(cbind(sumpositives, sumnegatives), type = "h",
>>>        lend = "butt", xaxis = FALSE, main = "", ylab = "Total",
>>>        yaxis.right = yaxis.right, ...)
>>>    lines(1:rows, net)
>>>    if (even(columns.style + 2))
>>>        yaxis.right = TRUE
>>>    else yaxis.right = FALSE
>>>    chart.TimeSeries(fit, type = "l", xaxis = TRUE, main = "",
>>>        ylab = "AdjR^2", ylim = c(0, 1), yaxis.right = yaxis.right,
>>>        ...)
>>>    mtext(main, side = 3, outer = TRUE, font = 2, cex = 1.2,
>>>        line = 1)
>>>    par(op)
>>> }
>>> 
>>> --
>>> Peter Carl
>>> http://www.braverock.com/~peter
>>> 
>>>> Hi Carl,
>>>> 
>>>> Many thanks for your quick reply. Just a follow up on  this. While I
>>> have
>>>> installed PA pages I wasn't too successful in finding  further
>>> information
>>>> in respect of implementing the function.page RollingStyle which would
>>>> allow
>>>> me to plot the R-squared over time for my returns based analysis
>>>> (Sharpe-model).Would you mind pointing me to some further information?
>>>> 
>>>>  Also, is there a straightforward way to chart or calculate each
>>> factor
>>>> weight
>>>> so  that the values can be read easily (while chart.RollingStyle.
>>> gives a
>>>> good graphical impression of the styles, I'd also be interested in
>>>> obtaining  an idea of the exact weightings at some point in time, e.g.
>>>> showing  min/max over time and potentially also some kind of summary
>>>> statistics like avg or sd of the style attributes)
>>>> 
>>>> Some help on this would be awesome - thks.
>>>> 
>>>> Phil
>>>>>        -------- Original-Nachricht --------
>>>>> Datum: Tue, 6 Sep 2011 09:38:37 -0500
>>>>> Von: "Peter Carl" <peter at braverock.com>
>>>>> An: "Philipp Haumueller" <phaumueller at gmx.net>
>>>>> CC: r-sig-finance at r-project.org
>>>>> Betreff: Re: [R-SIG-Finance] PerformanceAnalytics - Style Analysis-
>>>>> plotting R squared over time
>>>>> 
>>>>>        Phil,
>>>>> 
>>>>> The function page.RollingStyle in PApages (also on RForge) shows
>>>>> something
>>>>> of a brute-force way to do it.  I'm sure there's a better way, but
>>> that
>>>>> should work for you.
>>>>> 
>>>>> pcc
>>>>> --
>>>>> Peter Carl
>>>>> http://www.braverock.com/~peter
>>>>> 
>>>>>> Dear all,
>>>>>> 
>>>>>> I am running some analysis based on an asset factor model (Sharpe
>>>>> model
>>>>> -
>>>>>> Style Analyses) in the Package PerformanceAnalytics/R-Forge.While
>>>>>> calculating weights etc. works fine I would also like to
>>>>> calculate/plot
>>>>>> rolling R-squared values of the Sharpe model over time? Are there
>>> any
>>>>>> suggestions how to run this?
>>>>>> 
>>>>>> Your help is greatly appreciated - thx,
>>>>>> 
>>>>>> Phil
>>>>>> --
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>>    [[alternative HTML version deleted]]
>>>>>> 
>>>>>> _______________________________________________
>>>>>> R-SIG-Finance at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>>> -- Also note that this is not the r-help list where general R
>>>>> questions
>>>>>> should go.
>>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>> 
>>>> --
>>>> Empfehlen Sie GMX DSL Ihren Freunden und Bekannten und wir
>>>> belohnen Sie mit bis zu 50,- Euro! https://freundschaftswerbung.gmx.de
>>>> 
>>> 
>>> 
>>> 
>> 
>> --
>> Empfehlen Sie GMX DSL Ihren Freunden und Bekannten und wir
>> belohnen Sie mit bis zu 50,- Euro! https://freundschaftswerbung.gmx.de
>> 
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
> 


From brian at braverock.com  Wed Sep  7 14:14:09 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 07 Sep 2011 07:14:09 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics - Style Analysis- plotting
 R squared over time
In-Reply-To: <BLU0-SMTP3195132BD740CF41C3D268FFB1F0@phx.gbl>
References: <20110906192832.147890@gmx.net>
	<7b8e54fcb914c9cf32392fb9c55a31b5.squirrel@mail.braverock.com>
	<20110907085444.194270@gmx.net>
	<4ddbdab034f5f97eee4ed1d843585fde.squirrel@mail.braverock.com>
	<BLU0-SMTP3195132BD740CF41C3D268FFB1F0@phx.gbl>
Message-ID: <1315397649.23294.3.camel@brian-rcg>

On Wed, 2011-09-07 at 06:28 -0500, Kent Russell wrote:
> 
> I got the same error and data is definitely xts.  I will try to debug
> today.  Looks like my function works fine on a cumulative basis or if
> I use for loop but does not work with rollapply. 
<...>
> >> head(Rfund.z)
> >> ?  2000-01-31? ?  2000-03-02? ?  2000-03-31? ?  2000-05-01? ? 
> >> 2000-05-31? ?  2000-07-01
> >> -0.033951898?  0.052783466 -0.020335698 -0.006613730?
> 0.008663712? 
> >> 0.091497179 

This doesn't look like xts. An xts object of even one column will
display with your dates as the index, and observations as rows.

Your second, two column, series does look like an appropriately
formatted xts object or matrix.

Regards,

  - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From peter at braverock.com  Wed Sep  7 15:00:33 2011
From: peter at braverock.com (Peter Carl)
Date: Wed, 7 Sep 2011 08:00:33 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics - Style Analysis- plotting
 R squared over time
In-Reply-To: <BLU0-SMTP3195132BD740CF41C3D268FFB1F0@phx.gbl>
References: <20110906192832.147890@gmx.net>
	<7b8e54fcb914c9cf32392fb9c55a31b5.squirrel@mail.braverock.com>
	<20110907085444.194270@gmx.net>
	<4ddbdab034f5f97eee4ed1d843585fde.squirrel@mail.braverock.com>
	<BLU0-SMTP3195132BD740CF41C3D268FFB1F0@phx.gbl>
Message-ID: <5a779bb380daa29bb981f9743bc3a7c1.squirrel@mail.braverock.com>

The error, "The data cannot be converted into a time series," is thrown by
checkData, a function that makes sure the data is xtsible.  It won't throw
the error if it is a timeseries that can be converted to xts.  If you are
seeing a different error, please follow the posting guidelines and provide
a reproducible example.

pcc
-- 
Peter Carl
http://www.braverock.com/~peter

> I got the same error and data is definitely xts.  I will try to debug
> today.  Looks like my function works fine on a cumulative basis or if I
> use for loop but does not work with rollapply.
>
> Kent
>
> On Sep 7, 2011, at 6:13 AM, "Peter Carl" <peter at braverock.com> wrote:
>
>> Phil,
>>
>> I think the error message is clear - the data series you're using as the
>> "fund" data, Rfund.z, isn't being recognized as a format that is
>> convertible to a time series object (for conversion into an xts object).
>> Look at ?as.xts and consider constructing xts objects for both
>> timeseries.
>> Or you might use Return.read from PerformanceAnalytics to load the
>> series
>> in from a csv file.
>>
>> pcc
>> --
>> Peter Carl
>> http://www.braverock.com/~peter
>>
>>> Many thanks. I tried to implement this, but still seem to miss
>>> something.
>>>
>>> Here's a contrived example.Using 10.5 years of monthly fund data, I use
>>> a stock market and a real estate index to "explain" the returns of the
>>> fund. What I would like to do is to plot the R-squared over time with
>>> the
>>> function.RollingStyle I proceed as follows:
>>> ??
>>> head(Rfund.z)
>>> ??  2000-01-31?? ??  2000-03-02?? ??  2000-03-31?? ??  2000-05-01?? ??
>>> 2000-05-31?? ??  2000-07-01
>>> -0.033951898??  0.052783466 -0.020335698 -0.006613730??  0.008663712??
>>> 0.091497179
>>>
>>> ?? head(Rstyle.z)
>>> ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ??  Stocks.z?? ?? ?? ?? ?? ?? ??
>>>  RE.z
>>> 2000-01-31 -0.058851033??  0.01968497
>>> 2000-03-02??  0.002817568 -0.03427083
>>> 2000-03-31??  0.066951099??  0.06969885
>>>
>>> Applying the page.RollingStyle function yields an error message
>>>
>>>> page.RollingStyle (Rfund.z, Rstyle.z, method="constrained",
>>> leverage=FALSE)
>>>
>>> Error in checkData(R.fund) :
>>> ??  The data cannot be converted into a time series.??  If you are
>>> trying to
>>> pass in names from a data object with one column, you should use the
>>> form
>>> 'data[rows, columns, drop = FALSE]'.??  Rownames should have standard
>>> date
>>> formats, such as '1985-03-15'.
>>> In addition: Warning message:
>>> In rollapply.zoo(data = merged.assets, FUN = function(x) { :
>>> ??  na.pad argument is deprecated
>>>
>>>
>>> Would be great, if someone could provide me with a brief explanation of
>>> what exactly is going wrong here. Many thanks, Cheers,
>>> Phil
>>>
>>>
>>>
>>>
>>>>
>>>> -------- Original-Nachricht --------
>>>> Datum: Tue, 6 Sep 2011 16:01:14 -0500
>>>> Von: "Peter Carl" <peter at braverock.com>
>>>> An: "Philipp Haumueller" <phaumueller at gmx.net>
>>>> CC: r-sig-finance at r-project.org
>>>> Betreff: Re: [R-SIG-Finance] PerformanceAnalytics - Style Analysis-
>>>> plotting R squared over time
>>>>
>>>>            Take a look at the code itself - it implements what you are
>>>> asking for.
>>>> In particular, pay attention to the rollapply functions.
>>>>
>>>>> page.RollingStyle
>>>> function (R.fund, R.style, method = c("constrained", "unconstrained",
>>>>    "normalized"), leverage = FALSE, selection = "none", width = 12,
>>>>    main = paste(colnames(R.fund)[1], " Rolling ", width, "-Month Style
>>>> Weights",
>>>>        sep = ""), space = 0, ...)
>>>> {
>>>>    R.fund = checkData(R.fund[, 1, drop = FALSE], method = "zoo")
>>>>    R.style = checkData(R.style, method = "zoo")
>>>>    method = method[1]
>>>>    columns.fund = ncol(R.fund)
>>>>    columns.style = ncol(R.style)
>>>>    columnnames.fund = colnames(R.fund)
>>>>    columnnames.style = colnames(R.style)
>>>>    merged.assets = na.omit(merge(R.fund, R.style))
>>>>    result = rollapply(data = merged.assets, FUN = function(x) {
>>>>        t(style.fit(R.fund = x[, 1, drop = FALSE], R.style = x[,
>>>>            -1, drop = FALSE], method = method, leverage = leverage,
>>>>            selection = selection)$weights)
>>>>    }, width = width, by = 1, by.column = FALSE, na.pad = FALSE,
>>>>        align = "right")
>>>>    fit = rollapply(data = merged.assets, FUN = function(x) {
>>>>        t(style.fit(R.fund = x[, 1, drop = FALSE], R.style = x[,
>>>>            -1, drop = FALSE], method = method, leverage = leverage,
>>>>            selection = selection)$R.squared)
>>>>    }, width = width, by = 1, by.column = FALSE, na.pad = FALSE,
>>>>        align = "right")
>>>>    colnames(result) = columnnames.style
>>>>    rows = nrow(result)
>>>>    ymax = max(c(1, result))
>>>>    ymin = min(c(-1, result))
>>>>    op <- par(oma = c(2, 0, 4, 0), mar = c(0, 4, 0, 4))
>>>>    layout(matrix(c(1:columns.style, columns.style + 1, columns.style +
>>>>        2), nc = 1, byrow = TRUE))
>>>>    for (i in 1:columns.style) {
>>>>        if (even(i))
>>>>            yaxis.right = TRUE
>>>>        else yaxis.right = FALSE
>>>>        chart.TimeSeries(result[, i, drop = F], type = "h", lend =
>>>> "butt",
>>>>            xaxis = FALSE, main = "", ylab = colnames(result)[i],
>>>>            ylim = c(ymin, ymax), yaxis.right = yaxis.right,
>>>>            ...)
>>>>    }
>>>>    positives = result
>>>>    for (column in 1:ncol(result)) {
>>>>        for (row in 1:nrow(result)) {
>>>>            positives[row, column] = max(0, result[row, column])
>>>>        }
>>>>    }
>>>>    negatives = result
>>>>    for (column in 1:ncol(result)) {
>>>>        for (row in 1:nrow(result)) {
>>>>            negatives[row, column] = min(0, result[row, column])
>>>>        }
>>>>    }
>>>>    sumpositives = zoo(apply(positives, 1, sum), order.by =
>>>> index(positives))
>>>>    sumnegatives = zoo(apply(negatives, 1, sum), order.by =
>>>> index(negatives))
>>>>    net = apply(result, 1, sum)
>>>>    if (even(columns.style + 1))
>>>>        yaxis.right = TRUE
>>>>    else yaxis.right = FALSE
>>>>    chart.TimeSeries(cbind(sumpositives, sumnegatives), type = "h",
>>>>        lend = "butt", xaxis = FALSE, main = "", ylab = "Total",
>>>>        yaxis.right = yaxis.right, ...)
>>>>    lines(1:rows, net)
>>>>    if (even(columns.style + 2))
>>>>        yaxis.right = TRUE
>>>>    else yaxis.right = FALSE
>>>>    chart.TimeSeries(fit, type = "l", xaxis = TRUE, main = "",
>>>>        ylab = "AdjR^2", ylim = c(0, 1), yaxis.right = yaxis.right,
>>>>        ...)
>>>>    mtext(main, side = 3, outer = TRUE, font = 2, cex = 1.2,
>>>>        line = 1)
>>>>    par(op)
>>>> }
>>>>
>>>> --
>>>> Peter Carl
>>>> http://www.braverock.com/~peter
>>>>
>>>>> Hi Carl,
>>>>>
>>>>> Many thanks for your quick reply. Just a follow up on  this. While I
>>>> have
>>>>> installed PA pages I wasn't too successful in finding  further
>>>> information
>>>>> in respect of implementing the function.page RollingStyle which would
>>>>> allow
>>>>> me to plot the R-squared over time for my returns based analysis
>>>>> (Sharpe-model).Would you mind pointing me to some further
>>>>> information?
>>>>>
>>>>>  Also, is there a straightforward way to chart or calculate each
>>>> factor
>>>>> weight
>>>>> so  that the values can be read easily (while chart.RollingStyle.
>>>> gives a
>>>>> good graphical impression of the styles, I'd also be interested in
>>>>> obtaining  an idea of the exact weightings at some point in time,
>>>>> e.g.
>>>>> showing  min/max over time and potentially also some kind of summary
>>>>> statistics like avg or sd of the style attributes)
>>>>>
>>>>> Some help on this would be awesome - thks.
>>>>>
>>>>> Phil
>>>>>>        -------- Original-Nachricht --------
>>>>>> Datum: Tue, 6 Sep 2011 09:38:37 -0500
>>>>>> Von: "Peter Carl" <peter at braverock.com>
>>>>>> An: "Philipp Haumueller" <phaumueller at gmx.net>
>>>>>> CC: r-sig-finance at r-project.org
>>>>>> Betreff: Re: [R-SIG-Finance] PerformanceAnalytics - Style Analysis-
>>>>>> plotting R squared over time
>>>>>>
>>>>>>        Phil,
>>>>>>
>>>>>> The function page.RollingStyle in PApages (also on RForge) shows
>>>>>> something
>>>>>> of a brute-force way to do it.  I'm sure there's a better way, but
>>>> that
>>>>>> should work for you.
>>>>>>
>>>>>> pcc
>>>>>> --
>>>>>> Peter Carl
>>>>>> http://www.braverock.com/~peter
>>>>>>
>>>>>>> Dear all,
>>>>>>>
>>>>>>> I am running some analysis based on an asset factor model (Sharpe
>>>>>> model
>>>>>> -
>>>>>>> Style Analyses) in the Package PerformanceAnalytics/R-Forge.While
>>>>>>> calculating weights etc. works fine I would also like to
>>>>>> calculate/plot
>>>>>>> rolling R-squared values of the Sharpe model over time? Are there
>>>> any
>>>>>>> suggestions how to run this?
>>>>>>>
>>>>>>> Your help is greatly appreciated - thx,
>>>>>>>
>>>>>>> Phil
>>>>>>> --
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>    [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> R-SIG-Finance at r-project.org mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>>>> -- Also note that this is not the r-help list where general R
>>>>>> questions
>>>>>>> should go.
>>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>> --
>>>>> Empfehlen Sie GMX DSL Ihren Freunden und Bekannten und wir
>>>>> belohnen Sie mit bis zu 50,- Euro!
>>>>> https://freundschaftswerbung.gmx.de
>>>>>
>>>>
>>>>
>>>>
>>>
>>> --
>>> Empfehlen Sie GMX DSL Ihren Freunden und Bekannten und wir
>>> belohnen Sie mit bis zu 50,- Euro! https://freundschaftswerbung.gmx.de
>>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>


From petrovaa at gmail.com  Wed Sep  7 23:08:44 2011
From: petrovaa at gmail.com (tonyp)
Date: Wed, 7 Sep 2011 14:08:44 -0700 (PDT)
Subject: [R-SIG-Finance] PerformanceAnalytics - Style Analysis- plotting
 R squared over time
In-Reply-To: <5a779bb380daa29bb981f9743bc3a7c1.squirrel@mail.braverock.com>
References: <20110906133545.238750@gmx.net> <20110906192832.147890@gmx.net>
	<7b8e54fcb914c9cf32392fb9c55a31b5.squirrel@mail.braverock.com>
	<20110907085444.194270@gmx.net>
	<4ddbdab034f5f97eee4ed1d843585fde.squirrel@mail.braverock.com>
	<BLU0-SMTP3195132BD740CF41C3D268FFB1F0@phx.gbl>
	<5a779bb380daa29bb981f9743bc3a7c1.squirrel@mail.braverock.com>
Message-ID: <1315429724379-3797276.post@n4.nabble.com>

Philipp, 

Try first:

as.timeSeries(your data)

if it does not work, check the mode of the data 
mode(your data)

That should be numeric. 

Hope that helps.

--
View this message in context: http://r.789695.n4.nabble.com/PerformanceAnalytics-Style-Analysis-plotting-R-squared-over-time-tp3793434p3797276.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jeff.a.ryan at gmail.com  Thu Sep  8 00:03:39 2011
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Wed, 7 Sep 2011 17:03:39 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics - Style Analysis- plotting
	R squared over time
In-Reply-To: <1315429724379-3797276.post@n4.nabble.com>
References: <20110906133545.238750@gmx.net> <20110906192832.147890@gmx.net>
	<7b8e54fcb914c9cf32392fb9c55a31b5.squirrel@mail.braverock.com>
	<20110907085444.194270@gmx.net>
	<4ddbdab034f5f97eee4ed1d843585fde.squirrel@mail.braverock.com>
	<BLU0-SMTP3195132BD740CF41C3D268FFB1F0@phx.gbl>
	<5a779bb380daa29bb981f9743bc3a7c1.squirrel@mail.braverock.com>
	<1315429724379-3797276.post@n4.nabble.com>
Message-ID: <7A9D0D8D-2A22-4F66-82F2-668828499AB2@gmail.com>

Try str() or better yet dput() the data or subset of it to let us actually see the problem as opposed to guessing. 

as.xts would be more illustrative in thi case as well, since that is the end goal. 

Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Sep 7, 2011, at 4:08 PM, tonyp <petrovaa at gmail.com> wrote:

> Philipp, 
> 
> Try first:
> 
> as.timeSeries(your data)
> 
> if it does not work, check the mode of the data 
> mode(your data)
> 
> That should be numeric. 
> 
> Hope that helps.
> 
> --
> View this message in context: http://r.789695.n4.nabble.com/PerformanceAnalytics-Style-Analysis-plotting-R-squared-over-time-tp3793434p3797276.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From igor_vilcek_external at tatrabanka.sk  Fri Sep  9 09:35:37 2011
From: igor_vilcek_external at tatrabanka.sk (igor_vilcek_external at tatrabanka.sk)
Date: Fri, 9 Sep 2011 09:35:37 +0200
Subject: [R-SIG-Finance] Parameters setting for multiple indicators with
 the same argument names
In-Reply-To: <1315319273.23440.120.camel@brian-rcg>
Message-ID: <OF878EB196.72E72D28-ONC1257906.0028E983-C1257906.0029BBC7@tatrabanka.sk>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110909/7553073f/attachment.pl>

From brian at braverock.com  Fri Sep  9 11:39:50 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 09 Sep 2011 04:39:50 -0500
Subject: [R-SIG-Finance] Parameters setting for multiple indicators with
 the same argument names
In-Reply-To: <OF878EB196.72E72D28-ONC1257906.0028E983-C1257906.0029BBC7@tatrabanka.sk>
References: <OF878EB196.72E72D28-ONC1257906.0028E983-C1257906.0029BBC7@tatrabanka.sk>
Message-ID: <1315561190.4192.76.camel@brian-desktop>

On Fri, 2011-09-09 at 09:35 +0200, igor_vilcek_external at tatrabanka.sk
wrote:
> My problem is, however, kinda different. E.g. in my example above, I need 
> to modify (as simply as possible) length of both moving averages, 
> externally, best through 'parameters' argument:
> 
>  applyStrategy(strategy=stratMACROSS , portfolios=portfolio.st, 
> parameters=list(n=50, n=200)) 
> 
> The problem is, I can't set n=50 for first MA and n=200 for second MA, 
> because both MA indicators use same name argument 'n'. 
> Thus, setting parameters=list(n=50, n=200) causes the system to use only 
> first 'n=50' ignoring second 'n=200'. 
> Is there any simple way how to set parameters like 'n1=50, n2=200'? I.e. 
> to differentiate between these two with same names?

I wrote:
> You have two options, a simple one, and a more complex one.

The answer won't change because you ask the question again.

I understand your question exactly, two variables named 'n'. got it.

The answer below is still exactly correct.  I'll add a bit more detail:

> The simple one is for you to generate a brute force set of parameters
> and loop over them, setting them as variables in  your strategy using
> quote().  see ?expand.grid

Original:
stratMACROSS <- add.indicator(strategy = stratMACROSS, name = "SMA",
arguments = list(x=quote(Cl(mktdata)), n=50),label= "ma50" )
stratMACROSS <- add.indicator(strategy = stratMACROSS, name = "SMA",
arguments = list(x=quote(Cl(mktdata)), n=200),label= "ma200")

New:
stratMACROSS <- add.indicator(strategy = stratMACROSS, name = "SMA",
arguments = list(x=quote(Cl(mktdata)), n=quote(shortMA)),label= "ma50" )
stratMACROSS <- add.indicator(strategy = stratMACROSS, name = "SMA",
arguments = list(x=quote(Cl(mktdata)), n=quote(longMA)),label= "ma200")

I'll leave as an exercise for the reader how to use expand.grid and loop
over applyStrategy with two different values for shortMA and longMA. 

> Or, more flexible but also more complicated, see the two parameterTest
> demos in the quantstrat package.  You can tell the parameter subsystem
> which slots (indicators) you are applying parameters to, and apply a
> different distribution to each.

The second option remains the more flexible and harder (for you) to code
method.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From papa.senyo at yahoo.it  Fri Sep  9 12:28:52 2011
From: papa.senyo at yahoo.it (Papa Senyo)
Date: Fri, 9 Sep 2011 11:28:52 +0100 (BST)
Subject: [R-SIG-Finance] EGARCH
Message-ID: <1315564132.39997.YahooMailNeo@web132314.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110909/4256a436/attachment.pl>

From alexios at 4dscape.com  Fri Sep  9 13:10:02 2011
From: alexios at 4dscape.com (4dscape.com)
Date: Fri, 9 Sep 2011 12:10:02 +0100
Subject: [R-SIG-Finance] EGARCH
In-Reply-To: <1315564132.39997.YahooMailNeo@web132314.mail.ird.yahoo.com>
References: <1315564132.39997.YahooMailNeo@web132314.mail.ird.yahoo.com>
Message-ID: <CCC0EDEC-C11D-41A4-8193-A3DD1765DBD1@4dscape.com>

Please use the 'new' rugarch package which is now on CRAN (for univariate GARCH models). Also note some changes to the new ugarchspec method documented in the help files.

Regards,

Alexios

On Sep 9, 2011, at 11:28, Papa Senyo <papa.senyo at yahoo.it> wrote:

> Dear all,
> Please, I have a problem with the function ugarchspec (R says function not found) and cannot execute the command
> below. Any assistance.
> ar9<-arima(next.rtdm, order=c(5,0,0))
> b=acf(ar9$residuals)
> specm1 <- ugarchspec(variance.model=list(model="eGARCH", garchOrder=c(2,4), submodel = NULL),
> mean.model=list(armaOrder=c(5,0), include.mean=TRUE, garchInMean = TRUE))
> 
> Kind regards
> Papa
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
> 


From thomas.browne at mac.com  Fri Sep  9 21:34:08 2011
From: thomas.browne at mac.com (thomas.browne at mac.com)
Date: Fri, 09 Sep 2011 20:34:08 +0100
Subject: [R-SIG-Finance] Does Nelson/Siegel analagous model exist
 parsimoniously to paramaterize an FX volatility surface?
In-Reply-To: <BANLkTinyCEwzZxJSFr6ozkstvcuRAsd_9g@mail.gmail.com>
References: <FBC39A66-CA97-46D3-8F59-0AA1E4C3AB38@mac.com>
	<BANLkTinyCEwzZxJSFr6ozkstvcuRAsd_9g@mail.gmail.com>
Message-ID: <9796A153-6EAE-4DCF-962E-EF51D8D28341@mac.com>

Hello,

I have successfully implemented modelling of the South African and other yield curves in R using the YieldCurve package suggested in this forum, which allow me to describe most states of the yield curve using 4 parameters. The advantage is that these four parameters "make sense" for most traders in yield curves, since they correspond to the intuitive factors of level, slope, "hump", and hump peak location. The further advantages of this paramaterized model is that it doesn't force orthogonality of the factors (as PCA would do, for example), allowing me to apply regressions to the various factors and therefore see when, for example, slope is out of sync with level or hump (with all the caveats of historic data etc etc). Finally Nelson/Siegel has the excellent property of being stable at longer maturities. I am finding this very useful for strategy selection. 

Now I am wondering if an analogous model exists for FX (or other) volatility surfaces. Obviously in this case it would be a higher order model in two dimensions, but I am hoping that such a model might exist which allows me to paramaterize the vol surface. Perhaps somebody has experience modeling the surface using an extension of a Nelson/Siegel model, or another similar approach? 

The factors in this case would obviously again include level, but we would have skew, smile, and term structure of those variables as well, perhaps described in less than 3 additional terms. Again I wish to stay away from PCA as orthogonality is not always desired when comparing one factor against another, especially when the intuition of human traders needs to be considered. 

Ideally I would like to avoid polynomial-based approaches because NS has the superior quality of being stable at longer maturities due to the decaying nature of its terms. I can see how polynomial terms might be appropriate for the skew and smile factors, but I am sceptical on the term structure dimension, for similar reasons as as in interest rates. Anyway just throwing a few questions into the mix.  

Any pointers or help on this is much appreciated, and I will feedback as I progress. Please note that I am not looking for an arbitrage-free model as this is not being used for pricing derivatives, but for medium term (1m to 3m) strategy selection by comparing current surfaces parameters to their history, and to their peers. Thus it would be preferable for the terms to correspond to intuitive factors, as per Nelson Siegel. 

Many thanks. 

Tom


From papa.senyo at yahoo.it  Sat Sep 10 09:33:45 2011
From: papa.senyo at yahoo.it (Papa Senyo)
Date: Sat, 10 Sep 2011 08:33:45 +0100 (BST)
Subject: [R-SIG-Finance] EGARCH
In-Reply-To: <CCC0EDEC-C11D-41A4-8193-A3DD1765DBD1@4dscape.com>
References: <1315564132.39997.YahooMailNeo@web132314.mail.ird.yahoo.com>
	<CCC0EDEC-C11D-41A4-8193-A3DD1765DBD1@4dscape.com>
Message-ID: <1315640025.94817.YahooMailNeo@web132304.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110910/52ecf953/attachment.pl>

From alexios at 4dscape.com  Sat Sep 10 09:42:07 2011
From: alexios at 4dscape.com (alexios)
Date: Sat, 10 Sep 2011 08:42:07 +0100
Subject: [R-SIG-Finance] EGARCH
In-Reply-To: <1315640025.94817.YahooMailNeo@web132304.mail.ird.yahoo.com>
References: <1315564132.39997.YahooMailNeo@web132314.mail.ird.yahoo.com>
	<CCC0EDEC-C11D-41A4-8193-A3DD1765DBD1@4dscape.com>
	<1315640025.94817.YahooMailNeo@web132304.mail.ird.yahoo.com>
Message-ID: <4E6B14CF.6000702@4dscape.com>

It is NOT under "construction" on CRAN:
http://cran.r-project.org/web/packages/rugarch/index.html

-Alexios	


On 10/09/2011 08:33, Papa Senyo wrote:
> Please, it seems the rugarch package is under construction now. Do
> anyone have the zip file to share .
> kind regards
>
> ------------------------------------------------------------------------
> *Da:* 4dscape.com <alexios at 4dscape.com>
> *A:* Papa Senyo <papa.senyo at yahoo.it>
> *Cc:* "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
> *Inviato:* Venerd? 9 Settembre 2011 13:10
> *Oggetto:* Re: [R-SIG-Finance] EGARCH
>
> Please use the 'new' rugarch package which is now on CRAN (for
> univariate GARCH models). Also note some changes to the new ugarchspec
> method documented in the help files.
>
> Regards,
>
> Alexios
>
> On Sep 9, 2011, at 11:28, Papa Senyo <papa.senyo at yahoo.it
> <mailto:papa.senyo at yahoo.it>> wrote:
>
>  > Dear all,
>  > Please, I have a problem with the function ugarchspec (R says
> function not found) and cannot execute the command
>  > below. Any assistance.
>  > ar9<-arima(next.rtdm, order=c(5,0,0))
>  > b=acf(ar9$residuals)
>  > specm1 <- ugarchspec(variance.model=list(model="eGARCH",
> garchOrder=c(2,4), submodel = NULL),
>  > mean.model=list(armaOrder=c(5,0), include.mean=TRUE, garchInMean = TRUE))
>  >
>  > Kind regards
>  > Papa
>  >
>  > [[alternative HTML version deleted]]
>  >
>  > _______________________________________________
>  > R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org>
> mailing list
>  > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>  > -- Subscriber-posting only. If you want to post, subscribe first.
>  > -- Also note that this is not the r-help list where general R
> questions should go.
>  >
>
>


From landronimirc at gmail.com  Sat Sep 10 13:21:02 2011
From: landronimirc at gmail.com (Liviu Andronic)
Date: Sat, 10 Sep 2011 13:21:02 +0200
Subject: [R-SIG-Finance] EGARCH
In-Reply-To: <4E6B14CF.6000702@4dscape.com>
References: <1315564132.39997.YahooMailNeo@web132314.mail.ird.yahoo.com>
	<CCC0EDEC-C11D-41A4-8193-A3DD1765DBD1@4dscape.com>
	<1315640025.94817.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<4E6B14CF.6000702@4dscape.com>
Message-ID: <CABxs9VnXUmLO8f2MFi03cLf6OKwusSXQnvk07wcwZq=Ti_qvdA@mail.gmail.com>

Dear Alexios


On Sat, Sep 10, 2011 at 9:42 AM, alexios <alexios at 4dscape.com> wrote:
> It is NOT under "construction" on CRAN:
> http://cran.r-project.org/web/packages/rugarch/index.html
>
To slightly hi-jack the thread, I have troubles building 'rugarch' on
Xubuntu. The command
install.packages("rugarch")

fails with the following last lines:
gcc -I/usr/share/R/include
-I"/usr/local/lib/R/site-library/Rcpp/include"
-I"/usr/local/lib/R/site-library/RcppArmadillo/include"   -fpic
-std=gnu99 -O3 -pipe  -g -c nig.c -o nig.o
Loading required package: fortunes
Loading required package: fortunes
/bin/bash: -c: line 1: syntax error near unexpected token `('
/bin/bash: -c: line 1: `  echo g++ -shared  -o rugarch.so
distributions.o filters.o fracdiff.o fracimport.o garchmodels.o
garchsim.o gig.o nig.o  Shan-Ho Chou: I got a question about
eigenvector. I've tried input a symmetric matrix to both R (using
eigen function) and Minitab, but the result is really different. Can
anyone tell me what's wrong with that? Bill Venables: Simple. Minitab
must be broken. Have you reported it to them?    -- Shan-Ho Chou and
Bill Venables       R-help (July 2007)
-L/usr/local/lib/R/site-library/Rcpp/lib -lRcpp
-Wl,-rpath,/usr/local/lib/R/site-library/Rcpp/lib -llapack -lblas
-lgfortran -lm -lgfortran -lm -L/usr/lib64/R/lib -lR; \'
make: *** [rugarch.so] Error 1
ERROR: compilation failed for package ?rugarch?
* removing ?/usr/local/lib/R/site-library/rugarch?
Warning in install.packages :
  installation of package 'rugarch' had non-zero exit status

I always auto-load 'fortunes' at the beginning of an R session (the
reason for the messed up output above), but I'm not sure this would
the cause for the fail. I am also unable to build 'RcppArmadillo'
0.2.29 if that matters, so I can only build against 0.2.25. All the
other deps installed fine. Below I post my R info.

Regards
Liviu


> sessionInfo()
R version 2.13.0 (2011-04-13)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
LC_TIME=en_US.UTF-8
 [4] LC_COLLATE=en_US.UTF-8     LC_MONETARY=C
LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
LC_ADDRESS=C
[10] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8
LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] Rsolnp_1.11          truncnorm_1.0-5      chron_2.3-42
numDeriv_2010.11-1
[5] RcppArmadillo_0.2.25 Rcpp_0.9.6           fortunes_1.4-1

loaded via a namespace (and not attached):
[1] tools_2.13.0


From alexios at 4dscape.com  Sat Sep 10 15:00:11 2011
From: alexios at 4dscape.com (alexios)
Date: Sat, 10 Sep 2011 14:00:11 +0100
Subject: [R-SIG-Finance] EGARCH
In-Reply-To: <CABxs9VnXUmLO8f2MFi03cLf6OKwusSXQnvk07wcwZq=Ti_qvdA@mail.gmail.com>
References: <1315564132.39997.YahooMailNeo@web132314.mail.ird.yahoo.com>
	<CCC0EDEC-C11D-41A4-8193-A3DD1765DBD1@4dscape.com>
	<1315640025.94817.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<4E6B14CF.6000702@4dscape.com>
	<CABxs9VnXUmLO8f2MFi03cLf6OKwusSXQnvk07wcwZq=Ti_qvdA@mail.gmail.com>
Message-ID: <4E6B5F5B.5040802@4dscape.com>

Hi Liviu,

I'm not sure what the issue might be...I have built and tested without 
problem on fedora 14 x64 and windows 7 (against RcppArmadillo 0.2.28+).

Regards,
Alexios

On 10/09/2011 12:21, Liviu Andronic wrote:
> Dear Alexios
>
>
> On Sat, Sep 10, 2011 at 9:42 AM, alexios<alexios at 4dscape.com>  wrote:
>> It is NOT under "construction" on CRAN:
>> http://cran.r-project.org/web/packages/rugarch/index.html
>>
> To slightly hi-jack the thread, I have troubles building 'rugarch' on
> Xubuntu. The command
> install.packages("rugarch")
>
> fails with the following last lines:
> gcc -I/usr/share/R/include
> -I"/usr/local/lib/R/site-library/Rcpp/include"
> -I"/usr/local/lib/R/site-library/RcppArmadillo/include"   -fpic
> -std=gnu99 -O3 -pipe  -g -c nig.c -o nig.o
> Loading required package: fortunes
> Loading required package: fortunes
> /bin/bash: -c: line 1: syntax error near unexpected token `('
> /bin/bash: -c: line 1: `  echo g++ -shared  -o rugarch.so
> distributions.o filters.o fracdiff.o fracimport.o garchmodels.o
> garchsim.o gig.o nig.o  Shan-Ho Chou: I got a question about
> eigenvector. I've tried input a symmetric matrix to both R (using
> eigen function) and Minitab, but the result is really different. Can
> anyone tell me what's wrong with that? Bill Venables: Simple. Minitab
> must be broken. Have you reported it to them?    -- Shan-Ho Chou and
> Bill Venables       R-help (July 2007)
> -L/usr/local/lib/R/site-library/Rcpp/lib -lRcpp
> -Wl,-rpath,/usr/local/lib/R/site-library/Rcpp/lib -llapack -lblas
> -lgfortran -lm -lgfortran -lm -L/usr/lib64/R/lib -lR; \'
> make: *** [rugarch.so] Error 1
> ERROR: compilation failed for package ?rugarch?
> * removing ?/usr/local/lib/R/site-library/rugarch?
> Warning in install.packages :
>    installation of package 'rugarch' had non-zero exit status
>
> I always auto-load 'fortunes' at the beginning of an R session (the
> reason for the messed up output above), but I'm not sure this would
> the cause for the fail. I am also unable to build 'RcppArmadillo'
> 0.2.29 if that matters, so I can only build against 0.2.25. All the
> other deps installed fine. Below I post my R info.
>
> Regards
> Liviu
>
>
>> sessionInfo()
> R version 2.13.0 (2011-04-13)
> Platform: x86_64-pc-linux-gnu (64-bit)
>
> locale:
>   [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> LC_TIME=en_US.UTF-8
>   [4] LC_COLLATE=en_US.UTF-8     LC_MONETARY=C
> LC_MESSAGES=en_US.UTF-8
>   [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
> LC_ADDRESS=C
> [10] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8
> LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] Rsolnp_1.11          truncnorm_1.0-5      chron_2.3-42
> numDeriv_2010.11-1
> [5] RcppArmadillo_0.2.25 Rcpp_0.9.6           fortunes_1.4-1
>
> loaded via a namespace (and not attached):
> [1] tools_2.13.0
>
>


From edd at debian.org  Sat Sep 10 15:09:14 2011
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 10 Sep 2011 08:09:14 -0500
Subject: [R-SIG-Finance] EGARCH
In-Reply-To: <CABxs9VnXUmLO8f2MFi03cLf6OKwusSXQnvk07wcwZq=Ti_qvdA@mail.gmail.com>
References: <1315564132.39997.YahooMailNeo@web132314.mail.ird.yahoo.com>
	<CCC0EDEC-C11D-41A4-8193-A3DD1765DBD1@4dscape.com>
	<1315640025.94817.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<4E6B14CF.6000702@4dscape.com>
	<CABxs9VnXUmLO8f2MFi03cLf6OKwusSXQnvk07wcwZq=Ti_qvdA@mail.gmail.com>
Message-ID: <20075.24954.159252.518739@max.nulle.part>


On 10 September 2011 at 13:21, Liviu Andronic wrote:
| Dear Alexios
| 
| 
| On Sat, Sep 10, 2011 at 9:42 AM, alexios <alexios at 4dscape.com> wrote:
| > It is NOT under "construction" on CRAN:
| > http://cran.r-project.org/web/packages/rugarch/index.html
| >
| To slightly hi-jack the thread, I have troubles building 'rugarch' on
| Xubuntu. The command

That _must_ be your local problem. Fundamentally, Xubuntu is no different
from all the Debian systems that e.g. CRAN's checks or R-Forge run on.

| install.packages("rugarch")
| 
| fails with the following last lines:
| gcc -I/usr/share/R/include
| -I"/usr/local/lib/R/site-library/Rcpp/include"
| -I"/usr/local/lib/R/site-library/RcppArmadillo/include"   -fpic
| -std=gnu99 -O3 -pipe  -g -c nig.c -o nig.o
| Loading required package: fortunes
| Loading required package: fortunes
| /bin/bash: -c: line 1: syntax error near unexpected token `('
| /bin/bash: -c: line 1: `  echo g++ -shared  -o rugarch.so
| distributions.o filters.o fracdiff.o fracimport.o garchmodels.o
| garchsim.o gig.o nig.o  Shan-Ho Chou: I got a question about
| eigenvector. I've tried input a symmetric matrix to both R (using
| eigen function) and Minitab, but the result is really different. Can
| anyone tell me what's wrong with that? Bill Venables: Simple. Minitab
| must be broken. Have you reported it to them?    -- Shan-Ho Chou and
| Bill Venables       R-help (July 2007)
| -L/usr/local/lib/R/site-library/Rcpp/lib -lRcpp
| -Wl,-rpath,/usr/local/lib/R/site-library/Rcpp/lib -llapack -lblas
| -lgfortran -lm -lgfortran -lm -L/usr/lib64/R/lib -lR; \'
| make: *** [rugarch.so] Error 1
| ERROR: compilation failed for package ?rugarch?
| * removing ?/usr/local/lib/R/site-library/rugarch?
| Warning in install.packages :
|   installation of package 'rugarch' had non-zero exit status
| 
| I always auto-load 'fortunes' at the beginning of an R session (the

Don't do that.  Some of the Rcpp-related build scripts (such as RcppArmadillo
and hence rugarch) need to ask R where the given package directory is in
order to link against. 

If you send unconditional output, it messes this up.

If you really need fortunes displayed, protect it inside 

    if (interactive()) {
        require(fortunes)
	...
    }

or something.

Dirk

| reason for the messed up output above), but I'm not sure this would
| the cause for the fail. I am also unable to build 'RcppArmadillo'
| 0.2.29 if that matters, so I can only build against 0.2.25. All the
| other deps installed fine. Below I post my R info.
| 
| Regards
| Liviu
| 
| 
| > sessionInfo()
| R version 2.13.0 (2011-04-13)
| Platform: x86_64-pc-linux-gnu (64-bit)
| 
| locale:
|  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
| LC_TIME=en_US.UTF-8
|  [4] LC_COLLATE=en_US.UTF-8     LC_MONETARY=C
| LC_MESSAGES=en_US.UTF-8
|  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
| LC_ADDRESS=C
| [10] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8
| LC_IDENTIFICATION=C
| 
| attached base packages:
| [1] stats     graphics  grDevices utils     datasets  methods   base
| 
| other attached packages:
| [1] Rsolnp_1.11          truncnorm_1.0-5      chron_2.3-42
| numDeriv_2010.11-1
| [5] RcppArmadillo_0.2.25 Rcpp_0.9.6           fortunes_1.4-1
| 
| loaded via a namespace (and not attached):
| [1] tools_2.13.0
| 
| _______________________________________________
| R-SIG-Finance at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-sig-finance
| -- Subscriber-posting only. If you want to post, subscribe first.
| -- Also note that this is not the r-help list where general R questions should go.
-- 
Two new Rcpp master classes for R and C++ integration scheduled for 
New York (Sep 24) and San Francisco (Oct 8), more details are at
http://dirk.eddelbuettel.com/blog/2011/08/04#rcpp_classes_2011-09_and_2011-10
http://www.revolutionanalytics.com/products/training/public/rcpp-master-class.php


From papa.senyo at yahoo.it  Sun Sep 11 10:05:09 2011
From: papa.senyo at yahoo.it (Papa Senyo)
Date: Sun, 11 Sep 2011 09:05:09 +0100 (BST)
Subject: [R-SIG-Finance] VaR: results unreliable
In-Reply-To: <1315711136.65191.YahooMailNeo@web132308.mail.ird.yahoo.com>
References: <1315564132.39997.YahooMailNeo@web132314.mail.ird.yahoo.com>
	<CCC0EDEC-C11D-41A4-8193-A3DD1765DBD1@4dscape.com>
	<1315640025.94817.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<4E6B14CF.6000702@4dscape.com>
	<CABxs9VnXUmLO8f2MFi03cLf6OKwusSXQnvk07wcwZq=Ti_qvdA@mail.gmail.com>
	<4E6B5F5B.5040802@4dscape.com>
	<1315662183.966.YahooMailNeo@web132302.mail.ird.yahoo.com>
	<1315711136.65191.YahooMailNeo@web132308.mail.ird.yahoo.com>
Message-ID: <1315728309.50163.YahooMailNeo@web132304.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110911/9ad5da0d/attachment.pl>

From brian at braverock.com  Sun Sep 11 11:17:24 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 11 Sep 2011 04:17:24 -0500
Subject: [R-SIG-Finance] VaR: results unreliable
In-Reply-To: <1315728309.50163.YahooMailNeo@web132304.mail.ird.yahoo.com>
References: <1315564132.39997.YahooMailNeo@web132314.mail.ird.yahoo.com>
	<CCC0EDEC-C11D-41A4-8193-A3DD1765DBD1@4dscape.com>
	<1315640025.94817.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<4E6B14CF.6000702@4dscape.com>
	<CABxs9VnXUmLO8f2MFi03cLf6OKwusSXQnvk07wcwZq=Ti_qvdA@mail.gmail.com>
	<4E6B5F5B.5040802@4dscape.com>
	<1315662183.966.YahooMailNeo@web132302.mail.ird.yahoo.com>
	<1315711136.65191.YahooMailNeo@web132308.mail.ird.yahoo.com>
	<1315728309.50163.YahooMailNeo@web132304.mail.ird.yahoo.com>
Message-ID: <1315732645.4192.91.camel@brian-desktop>

On Sun, 2011-09-11 at 09:05 +0100, Papa Senyo wrote:
> Dear All
> 
> Please,my results using standardized residuals for VaR produced
> unreliable results .Need some assistance? 

Thank you for including your code, but you'll also need to include (or
link to) your data for us to evaluate why you are getting the answer you
are getting.  It is not a reproducible example without the data set.

On Sun, 2011-09-11 at 09:05 +0100, Papa Senyo wrote:
> VaR calculation produces unreliable result (risk over 100%) for
> column: 1 : 177.289365852222
>  [,1]
> VaR
>  -1

Without seeing your data, I can only guess.

One possible reason is that you are acting on prices and not returns.
As stated clearly in the PerformanceAnalytics documentation, the VaR
function uses returns, not prices.
 
Regards,

  - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From alexios at 4dscape.com  Sun Sep 11 11:25:18 2011
From: alexios at 4dscape.com (alexios)
Date: Sun, 11 Sep 2011 10:25:18 +0100
Subject: [R-SIG-Finance] VaR: results unreliable
In-Reply-To: <1315732645.4192.91.camel@brian-desktop>
References: <1315564132.39997.YahooMailNeo@web132314.mail.ird.yahoo.com>
	<CCC0EDEC-C11D-41A4-8193-A3DD1765DBD1@4dscape.com>
	<1315640025.94817.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<4E6B14CF.6000702@4dscape.com>
	<CABxs9VnXUmLO8f2MFi03cLf6OKwusSXQnvk07wcwZq=Ti_qvdA@mail.gmail.com>
	<4E6B5F5B.5040802@4dscape.com>
	<1315662183.966.YahooMailNeo@web132302.mail.ird.yahoo.com>
	<1315711136.65191.YahooMailNeo@web132308.mail.ird.yahoo.com>
	<1315728309.50163.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<1315732645.4192.91.camel@brian-desktop>
Message-ID: <4E6C7E7E.2080904@4dscape.com>

What exactly does residuals(model1)/fitted(model1) represent?
If you want the standardized residuals then that would be:
residuals(model1)/sigma(model1).
The documentation clearly states what each method on the fitted object
represents (i.e. fitted returns the conditional mean, sigma the 
conditional standard deviation etc).

Regards,
Alexios


On 11/09/2011 10:17, Brian G. Peterson wrote:
> On Sun, 2011-09-11 at 09:05 +0100, Papa Senyo wrote:
>> Dear All
>>
>> Please,my results using standardized residuals for VaR produced
>> unreliable results .Need some assistance?
>
> Thank you for including your code, but you'll also need to include (or
> link to) your data for us to evaluate why you are getting the answer you
> are getting.  It is not a reproducible example without the data set.
>
> On Sun, 2011-09-11 at 09:05 +0100, Papa Senyo wrote:
>> VaR calculation produces unreliable result (risk over 100%) for
>> column: 1 : 177.289365852222
>>   [,1]
>> VaR
>>   -1
>
> Without seeing your data, I can only guess.
>
> One possible reason is that you are acting on prices and not returns.
> As stated clearly in the PerformanceAnalytics documentation, the VaR
> function uses returns, not prices.
>
> Regards,
>
>    - Brian
>


From landronimirc at gmail.com  Sun Sep 11 11:38:15 2011
From: landronimirc at gmail.com (Liviu Andronic)
Date: Sun, 11 Sep 2011 11:38:15 +0200
Subject: [R-SIG-Finance] EGARCH
In-Reply-To: <20075.24954.159252.518739@max.nulle.part>
References: <1315564132.39997.YahooMailNeo@web132314.mail.ird.yahoo.com>
	<CCC0EDEC-C11D-41A4-8193-A3DD1765DBD1@4dscape.com>
	<1315640025.94817.YahooMailNeo@web132304.mail.ird.yahoo.com>
	<4E6B14CF.6000702@4dscape.com>
	<CABxs9VnXUmLO8f2MFi03cLf6OKwusSXQnvk07wcwZq=Ti_qvdA@mail.gmail.com>
	<20075.24954.159252.518739@max.nulle.part>
Message-ID: <CABxs9V=bvr7psKaux-j+QT3hu1tjxOHTzqj+yVTkJsVzupib2w@mail.gmail.com>

On Sat, Sep 10, 2011 at 3:09 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
> Don't do that. ?Some of the Rcpp-related build scripts (such as RcppArmadillo
> and hence rugarch) need to ask R where the given package directory is in
> order to link against.
>
> If you send unconditional output, it messes this up.
>
> If you really need fortunes displayed, protect it inside
>
> ? ?if (interactive()) {
> ? ? ? ?require(fortunes)
> ? ? ? ?...
> ? ?}
>
Nice catch, thanks! I wish it were included in the default
Rprofile.site as an example. Now both rugarch and RcppArmadillo
compile just fine.

Regards
Liviu


From tia35007 at gmail.com  Mon Sep 12 01:45:52 2011
From: tia35007 at gmail.com (tim sebastin)
Date: Sun, 11 Sep 2011 19:45:52 -0400
Subject: [R-SIG-Finance] quantmod and stock splits
Message-ID: <CAFo56xy7UtMnhrT7QKS9Ai24SmMRdAAENzTpoRnXnQhgDuxWLQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110911/5f6e996c/attachment.pl>

From gsee000 at gmail.com  Mon Sep 12 03:34:09 2011
From: gsee000 at gmail.com (G See)
Date: Sun, 11 Sep 2011 20:34:09 -0500
Subject: [R-SIG-Finance] quantmod and stock splits
In-Reply-To: <CAFo56xy7UtMnhrT7QKS9Ai24SmMRdAAENzTpoRnXnQhgDuxWLQ@mail.gmail.com>
References: <CAFo56xy7UtMnhrT7QKS9Ai24SmMRdAAENzTpoRnXnQhgDuxWLQ@mail.gmail.com>
Message-ID: <CA+xi=qa+nB7vSxn7bipQv5rhbw4hLBrhY=5BYQsoDPN3st6wZQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110911/ea547ee6/attachment.pl>

From krisanharia at gmail.com  Mon Sep 12 10:18:35 2011
From: krisanharia at gmail.com (krisan haria)
Date: Mon, 12 Sep 2011 09:18:35 +0100
Subject: [R-SIG-Finance] RBLOOMBERG
Message-ID: <CALHdMsUrVX3w6heb++8+EY3RvfGynJabGJzgducqsLv_rzLoxQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110912/8ec3ca8b/attachment.pl>

From michael.weylandt at gmail.com  Mon Sep 12 16:06:13 2011
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Mon, 12 Sep 2011 10:06:13 -0400
Subject: [R-SIG-Finance] RBLOOMBERG
In-Reply-To: <CALHdMsUrVX3w6heb++8+EY3RvfGynJabGJzgducqsLv_rzLoxQ@mail.gmail.com>
References: <CALHdMsUrVX3w6heb++8+EY3RvfGynJabGJzgducqsLv_rzLoxQ@mail.gmail.com>
Message-ID: <CAAmySGN5cJtCEoM-4U3ZW=4YH4325UH=4wmATMRkPY1N0D_t4Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110912/973889c3/attachment.pl>

From cfriedem at gmail.com  Tue Sep 13 01:22:16 2011
From: cfriedem at gmail.com (Charlie Friedemann)
Date: Mon, 12 Sep 2011 19:22:16 -0400
Subject: [R-SIG-Finance] Blotter updatePortf function can't find historical
	data in non global environment
Message-ID: <DB6188A3-1BD2-4B40-86AD-1D38B3C496FC@gmail.com>

Greetings,

I've been working with blotter the past couple days, and one thing  
I've noticed is that if one calls updatePortf on a portfolio object,  
it fails:

Error in get(Symbol, envir=as.environment(.GlobalEnv)) : Object 'SPY'  
not found.

I load my daily data in a separate environment using getSymbols, and  
I'm wondering if there is anyway to get blotter to change which  
environment it looks for historical price data in. traceback()  
indicates the call to updatePortf uses the getPrice function in  
quantmod and passes the .GlobalEnv to it.

I've tried adding the environment with the price data to the search  
path, however that did not work.

Does anyone know a way around this issue? I'd rather not have to keep  
all necessary data in the global environment if possible. Thanks!


From brian at braverock.com  Tue Sep 13 01:42:29 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 12 Sep 2011 18:42:29 -0500
Subject: [R-SIG-Finance] Blotter updatePortf function can't find
 historical data in non global environment
In-Reply-To: <DB6188A3-1BD2-4B40-86AD-1D38B3C496FC@gmail.com>
References: <DB6188A3-1BD2-4B40-86AD-1D38B3C496FC@gmail.com>
Message-ID: <1315870949.4192.95.camel@brian-desktop>

passing env='whateverEnvIuse" or env=.wheteverenvIuse doesn't work?

Please provide a reproducible example, per the posting guide.

  - Brian

On Mon, 2011-09-12 at 19:22 -0400, Charlie Friedemann wrote:
> Greetings,
> 
> I've been working with blotter the past couple days, and one thing  
> I've noticed is that if one calls updatePortf on a portfolio object,  
> it fails:
> 
> Error in get(Symbol, envir=as.environment(.GlobalEnv)) : Object 'SPY'  
> not found.
> 
> I load my daily data in a separate environment using getSymbols, and  
> I'm wondering if there is anyway to get blotter to change which  
> environment it looks for historical price data in. traceback()  
> indicates the call to updatePortf uses the getPrice function in  
> quantmod and passes the .GlobalEnv to it.
> 
> I've tried adding the environment with the price data to the search  
> path, however that did not work.
> 
> Does anyone know a way around this issue? I'd rather not have to keep  
> all necessary data in the global environment if possible. Thanks!
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From gsee000 at gmail.com  Tue Sep 13 01:53:26 2011
From: gsee000 at gmail.com (G See)
Date: Mon, 12 Sep 2011 18:53:26 -0500
Subject: [R-SIG-Finance] Blotter updatePortf function can't find
 historical data in non global environment
In-Reply-To: <1315870949.4192.95.camel@brian-desktop>
References: <DB6188A3-1BD2-4B40-86AD-1D38B3C496FC@gmail.com>
	<1315870949.4192.95.camel@brian-desktop>
Message-ID: <CA+xi=qbeMfpu7sKyeL6p=09UYqYu1O2cMp_2ebmb0ZpomjQjPw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110912/f807960a/attachment.pl>

From cfriedem at gmail.com  Tue Sep 13 06:32:47 2011
From: cfriedem at gmail.com (Charlie Friedemann)
Date: Tue, 13 Sep 2011 00:32:47 -0400
Subject: [R-SIG-Finance] Blotter updatePortf function can't find
	historical data in non global environment
In-Reply-To: <CA+xi=qbeMfpu7sKyeL6p=09UYqYu1O2cMp_2ebmb0ZpomjQjPw@mail.gmail.com>
References: <DB6188A3-1BD2-4B40-86AD-1D38B3C496FC@gmail.com>
	<1315870949.4192.95.camel@brian-desktop>
	<CA+xi=qbeMfpu7sKyeL6p=09UYqYu1O2cMp_2ebmb0ZpomjQjPw@mail.gmail.com>
Message-ID: <45456D28-73A1-424A-A86C-EA3E44194132@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110913/762af3ef/attachment.pl>

From maheshbp2006 at gmail.com  Tue Sep 13 11:57:41 2011
From: maheshbp2006 at gmail.com (maheshbp)
Date: Tue, 13 Sep 2011 02:57:41 -0700 (PDT)
Subject: [R-SIG-Finance] Handling reqRealTimeBars of IBrokers api when
	connection is lost
Message-ID: <1315907861840-3809630.post@n4.nabble.com>

Hello All,

I am using reqRealtimeBars with an eWrapper to create 30 min OHLC bars.
ibwrapper<-eWrapper(NULL)
ibwrapper$realtimeBars <-ibrealtimebars
reqRealTimeBars(tws, contractlist,event=ibwrapper)//contract list is a list
of contracts.
> ibrealtimebars
function(curMsg, msg, timestamp, file,...){
id <- as.numeric(msg[2])
xtstest<-.xts(matrix(rep(NA_real_,4), nc = 4),0)
attr(xtstest, "index") <- as.numeric(msg[3])
xtstest[1, 1:4] <- as.numeric(msg[4:7])
ibRdata[[id]]<<-rbind(ibRdata[[id]],xtstest)
}

ibRdata will contain collected real time data (5 sec OHLC) and then rolled
into 30 min OHLC using to.minutes30 function from xts.

My concern is how to handle a situation when connection to IB is lost and
regained after a couple of secs or mins. IB doesn't to push all messages
(back log) since the time the connection was lost. 
Attempts to start 'reqHistoricalData' & 'reqRealTimeBars' at the same time
in order to ensure that ibRdata will be filled with data lost during the 'no
connection' time, results in 'Historical data request pacing violation'  on
both the functions.

Any suggestions on how to back fill real time data in situations when
connection is lost and regained ?

Thanks,
Mahesh

--
View this message in context: http://r.789695.n4.nabble.com/Handling-reqRealTimeBars-of-IBrokers-api-when-connection-is-lost-tp3809630p3809630.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From gsee000 at gmail.com  Tue Sep 13 14:28:10 2011
From: gsee000 at gmail.com (G See)
Date: Tue, 13 Sep 2011 07:28:10 -0500
Subject: [R-SIG-Finance] Blotter updatePortf function can't find
 historical data in non global environment
In-Reply-To: <45456D28-73A1-424A-A86C-EA3E44194132@gmail.com>
References: <DB6188A3-1BD2-4B40-86AD-1D38B3C496FC@gmail.com>
	<1315870949.4192.95.camel@brian-desktop>
	<CA+xi=qbeMfpu7sKyeL6p=09UYqYu1O2cMp_2ebmb0ZpomjQjPw@mail.gmail.com>
	<45456D28-73A1-424A-A86C-EA3E44194132@gmail.com>
Message-ID: <CA+xi=qab37a-_2dTXaF3f4A4QRkD=+mLDsv9zQ=M+ErxXqmKTw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110913/cebf5ffe/attachment.pl>

From cfriedem at gmail.com  Tue Sep 13 15:16:33 2011
From: cfriedem at gmail.com (Charlie Friedemann)
Date: Tue, 13 Sep 2011 09:16:33 -0400
Subject: [R-SIG-Finance] Blotter updatePortf function can't find
	historical data in non global environment
In-Reply-To: <CA+xi=qab37a-_2dTXaF3f4A4QRkD=+mLDsv9zQ=M+ErxXqmKTw@mail.gmail.com>
References: <DB6188A3-1BD2-4B40-86AD-1D38B3C496FC@gmail.com>
	<1315870949.4192.95.camel@brian-desktop>
	<CA+xi=qbeMfpu7sKyeL6p=09UYqYu1O2cMp_2ebmb0ZpomjQjPw@mail.gmail.com>
	<45456D28-73A1-424A-A86C-EA3E44194132@gmail.com>
	<CA+xi=qab37a-_2dTXaF3f4A4QRkD=+mLDsv9zQ=M+ErxXqmKTw@mail.gmail.com>
Message-ID: <FD7779A0-1D42-4F17-B5DE-D38525418CC5@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110913/7f503f91/attachment.pl>

From gsee000 at gmail.com  Tue Sep 13 16:11:12 2011
From: gsee000 at gmail.com (G See)
Date: Tue, 13 Sep 2011 09:11:12 -0500
Subject: [R-SIG-Finance] Blotter updatePortf function can't find
 historical data in non global environment
In-Reply-To: <FD7779A0-1D42-4F17-B5DE-D38525418CC5@gmail.com>
References: <DB6188A3-1BD2-4B40-86AD-1D38B3C496FC@gmail.com>
	<1315870949.4192.95.camel@brian-desktop>
	<CA+xi=qbeMfpu7sKyeL6p=09UYqYu1O2cMp_2ebmb0ZpomjQjPw@mail.gmail.com>
	<45456D28-73A1-424A-A86C-EA3E44194132@gmail.com>
	<CA+xi=qab37a-_2dTXaF3f4A4QRkD=+mLDsv9zQ=M+ErxXqmKTw@mail.gmail.com>
	<FD7779A0-1D42-4F17-B5DE-D38525418CC5@gmail.com>
Message-ID: <CA+xi=qYbV=y0jXSABB6V2+774FCoWsARmL-18cd7yY2LiMGCow@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110913/77cc708a/attachment.pl>

From papa.senyo at yahoo.it  Tue Sep 13 16:17:33 2011
From: papa.senyo at yahoo.it (Papa Senyo)
Date: Tue, 13 Sep 2011 15:17:33 +0100 (BST)
Subject: [R-SIG-Finance] R-SIG-Finance Digest, Vol 88, Issue 12
In-Reply-To: <mailman.3.1315908001.31825.r-sig-finance@r-project.org>
References: <mailman.3.1315908001.31825.r-sig-finance@r-project.org>
Message-ID: <1315923453.17559.YahooMailNeo@web132303.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110913/9cfe2b9d/attachment.pl>

From thyreus56344612 at hotmail.com  Wed Sep 14 11:25:23 2011
From: thyreus56344612 at hotmail.com (Jun Sheng Tan)
Date: Wed, 14 Sep 2011 09:25:23 +0000
Subject: [R-SIG-Finance] =?windows-1256?q?quantmod=FE_-_getSymbols_for_csv?=
 =?windows-1256?q?_files?=
Message-ID: <SNT118-W3584AD414080BC4D8F23BFBE040@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110914/b12468b2/attachment.pl>

From krisanharia at gmail.com  Thu Sep 15 11:26:50 2011
From: krisanharia at gmail.com (krisan haria)
Date: Thu, 15 Sep 2011 10:26:50 +0100
Subject: [R-SIG-Finance] connecting to IB via R
Message-ID: <CALHdMsXaypaQPC-S+WdPPRHSowts5Ody0mxHiZeWSedTEjbcig@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110915/7ecf2cb1/attachment.pl>

From maheshbp2006 at gmail.com  Thu Sep 15 12:23:59 2011
From: maheshbp2006 at gmail.com (maheshbp)
Date: Thu, 15 Sep 2011 03:23:59 -0700 (PDT)
Subject: [R-SIG-Finance] connecting to IB via R
In-Reply-To: <CALHdMsXaypaQPC-S+WdPPRHSowts5Ody0mxHiZeWSedTEjbcig@mail.gmail.com>
References: <CALHdMsXaypaQPC-S+WdPPRHSowts5Ody0mxHiZeWSedTEjbcig@mail.gmail.com>
Message-ID: <1316082239487-3815193.post@n4.nabble.com>

Have you checked "Enable Activex and Socket clients" ?

--
View this message in context: http://r.789695.n4.nabble.com/connecting-to-IB-via-R-tp3815106p3815193.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jeffrey.ryan at lemnica.com  Thu Sep 15 17:30:48 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Thu, 15 Sep 2011 10:30:48 -0500
Subject: [R-SIG-Finance] connecting to IB via R
In-Reply-To: <1316082239487-3815193.post@n4.nabble.com>
References: <CALHdMsXaypaQPC-S+WdPPRHSowts5Ody0mxHiZeWSedTEjbcig@mail.gmail.com>
	<1316082239487-3815193.post@n4.nabble.com>
Message-ID: <CABDUZc8RX8ukwe9E+RJgeCWJ5O-jt+kpB19DkspBHOavZ-5O0A@mail.gmail.com>

Indeed that is the likely problem.

IBrokers uses the more robust sockets connection option from IB.  Once
you have that allowed, you should be good to go.  You might also want
to take a look at some of the introductory vignettes in the IBrokers
package as well as the information from IB itself on the API - both
will help tremendously IMO.

Best,
Jeff

On Thu, Sep 15, 2011 at 5:23 AM, maheshbp <maheshbp2006 at gmail.com> wrote:
> Have you checked "Enable Activex and Socket clients" ?
>
> --
> View this message in context: http://r.789695.n4.nabble.com/connecting-to-IB-via-R-tp3815106p3815193.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From cidiel at yahoo.com  Thu Sep 15 20:52:10 2011
From: cidiel at yahoo.com (Brian Leidich)
Date: Thu, 15 Sep 2011 11:52:10 -0700 (PDT)
Subject: [R-SIG-Finance] RBloomberg Loop
Message-ID: <1316112730.70213.YahooMailNeo@web162016.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110915/e05176e3/attachment.pl>

From rex at nosyntax.net  Thu Sep 15 20:58:12 2011
From: rex at nosyntax.net (rex)
Date: Thu, 15 Sep 2011 11:58:12 -0700
Subject: [R-SIG-Finance]
 =?utf-8?q?quantmod=E2=80=8F_-_getSymbols_for_csv_?=
 =?utf-8?q?files?=
In-Reply-To: <SNT118-W3584AD414080BC4D8F23BFBE040@phx.gbl>
References: <SNT118-W3584AD414080BC4D8F23BFBE040@phx.gbl>
Message-ID: <20110915185812.GB29849@honker>

Jun Sheng Tan <thyreus56344612 at hotmail.com> [2011-09-14 02:28]:
>
>I'm a newbie and currently facing the same issue as this guy  http://pastebin.com/4bfURwBY Where the getSymbols is unable to detect the date on my excel .csv file , instead it listed (real-time) today's date as the date valueThe csv file I'm using is from yahoo http://chart.yahoo.com/table.csv?s=SBUX&a=0&b=01&c=2007&d=8&e=13&f=2011&g=d&q=q&y=0&z=SBUX&x=.csv
>Original file :
>  Open  High   Low Close   Volume Adj.Close2011-09-12 36.69 37.88 36.69 37.65  8122500     37.652011-09-09 38.62 38.75 37.05 37.31 10514600     37.312011-09-08 38.98 39.39 38.69 38.92  7886900     38.922011-09-07 38.19 39.37 37.96 39.18  8398900     39.182011-09-06 36.52 37.84 36.42 37.75  6135000     37.75
>> getSymbols('SBUX',src='csv',return='timeSeries')[1] "SBUX"> SBUXGMT           SBUX.Open SBUX.High SBUX.Low SBUX.Close SBUX.Volume SBUX.Adjusted2011-09-14     36.69     37.88    36.69      37.65     8122500         37.652011-09-14     38.62     38.75    37.05      37.31    10514600         37.312011-09-14     38.98     39.39    38.69      38.92     7886900         38.922011-09-14     38.19     39.37    37.96      39.18     8398900         39.18
>Does anyone know have to have the date column to list the correct date from the csv file?

~$ R
R version 2.13.0 (2011-04-13)
Copyright (C) 2011 The R Foundation for Statistical Computing
ISBN 3-900051-07-0
Platform: x86_64-pc-linux-gnu (64-bit)
[...]
[Previously saved workspace restored]

> library(quantmod)
Loading required package: Defaults
Loading required package: xts
Loading required package: zoo

Attaching package: 'zoo'

The following object(s) are masked from 'package:base':

      as.Date

Loading required package: TTR
> getSymbols('SBUX')
[1] "SBUX"
> head(SBUX)                                                                                                                                              
             SBUX.Open SBUX.High SBUX.Low SBUX.Close SBUX.Volume  SBUX.Adjusted
2007-01-03     35.60     36.20    34.64      35.25     9017300     34.39                                                                               
2007-01-04     35.37     35.50    34.79      35.29     7328000     34.43                                                                               
2007-01-05     35.12     35.29    34.97      35.14     6565700     34.28                                                                               
2007-01-08     34.91     35.26    34.90      35.01     5807200     34.16                                                                               
2007-01-09     35.00     35.39    34.70      34.86     7152500     34.01
2007-01-10     34.70     34.78    34.17      34.75     9329200     33.90
> tail(index(SBUX))
[1] "2011-09-07" "2011-09-08" "2011-09-09" "2011-09-12" "2011-09-13"
"2011-09-14"
> 

As you can see from the above, there's no need for a CSV file, but if
you want to read the data from a local CSV file that looks like::

~$ less subx.csv
Date,Open,High,Low,Close,Volume,Adj Close
2011-09-13,37.71,38.31,37.67,38.19,6159400,38.19
2011-09-12,36.69,37.88,36.69,37.65,8122500,37.65
2011-09-09,38.62,38.75,37.05,37.31,10514600,37.31
[...]

Then, in R do:

> tmp <- read.csv('subx.csv')
> subx = xts(tmp[,-1],as.Date(tmp[,1],"%Y-%m-%d"))
> head(subx)
             Open  High   Low Close    Volume Adj.Close
1992-06-26 21.00 22.25 20.50 21.50 112281600      0.66
1992-06-29 21.75 23.50 21.25 23.00  29504000      0.70
1992-06-30 23.50 23.75 22.00 22.25  17449600      0.68
1992-07-01 22.50 23.00 21.75 22.75   9270400      0.69
1992-07-02 23.00 23.00 22.25 22.75   7155200      0.69
1992-07-06 22.50 22.75 22.25 22.75   3056000      0.69
> 

HTH,

-rex
-- 
Q:  Why do mountain climbers rope themselves together?
A:  To prevent the sensible ones from going home.


From krisanharia at gmail.com  Thu Sep 15 21:39:33 2011
From: krisanharia at gmail.com (krisan haria)
Date: Thu, 15 Sep 2011 20:39:33 +0100
Subject: [R-SIG-Finance] connecting to IB via R
In-Reply-To: <CABDUZc8RX8ukwe9E+RJgeCWJ5O-jt+kpB19DkspBHOavZ-5O0A@mail.gmail.com>
References: <CALHdMsXaypaQPC-S+WdPPRHSowts5Ody0mxHiZeWSedTEjbcig@mail.gmail.com>
	<1316082239487-3815193.post@n4.nabble.com>
	<CABDUZc8RX8ukwe9E+RJgeCWJ5O-jt+kpB19DkspBHOavZ-5O0A@mail.gmail.com>
Message-ID: <CALHdMsUCCRzXLNCA_bdCS=zS0Eeb1PdWENA7Kx9vAX4St4Q7Eg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110915/4c845e67/attachment.pl>

From sunduck at gmail.com  Fri Sep 16 08:54:44 2011
From: sunduck at gmail.com (Alex Bird)
Date: Fri, 16 Sep 2011 10:54:44 +0400
Subject: [R-SIG-Finance] CCCgarch.MM in PortfolioAnalytics
Message-ID: <CAJ3qPLCSk1FhRNG1r9hujusGaVGczoKgN9YNWybcBkccvf3aDA@mail.gmail.com>

Greetings,

 I have found a function in PortfolioAnalytics called CCCgarch.MM
which computes comoments based on CCC-Garch.
 Does any one here has any example of using it in portfolio opimization?
 I think it could be used in maximazing some kind of utility functions
like the following one

tcara<-function(r, w, lambda, gamma, theta){
	r.mean<-apply(r,2,mean)
	r.covar<-covar(r)
	r.coskew<-coskew(r)
	r.cokurt<-cokurt(r)	
	uf<-(r.mean%*%w -
		 1/2 * lambda^2 *(w%*%r.covar%*%w) +
		 1/6 * gamma^3*(w%*%r.coskew%*%(w%x%w)) -
		 1/24* theta^4*(w%*%r.cokurt%*%(w%x%w%x%w)))
	uf
}

where w - weights vector, r - returns matrix, lambda/gamma/theta -
preference coefficients.
But maybe be there are some other ways to use the moments in optimization.
I also have another thought to use the moment in maximazing Omega
ratio calculated based on Corrado and Su modification which allows to
price options using first four moments.
Any advice would be very helpful.

Thanks in advance!

Kind regards,
Alex


From sunduck at gmail.com  Fri Sep 16 14:54:57 2011
From: sunduck at gmail.com (Alex Bird)
Date: Fri, 16 Sep 2011 16:54:57 +0400
Subject: [R-SIG-Finance] probable error in Omega (PerformanceAnalytics)
	calculation
Message-ID: <CAJ3qPLANPuNXc_pP1oe4oVbWQu9kjTvGxdN0w+YfnrP_9BBHXA@mail.gmail.com>

Bonjour,

  I am not sure but it seems like there's an error in the calculation
of Omega(..., method='interp') by PerformanceAnalytics package.
  It calculates Omega as
    ...
    omegafull = cumsum(1 - f(xcdf$x))/cumsum(f(xcdf$x))
    g <- approxfun(xcdf$x,omegafull,method="linear",ties="ordered")
    omega = g(L)
    ...
  while in the original(?) paper of Keating which can be found here
(http://faculty.fuqua.duke.edu/~charvey/Teaching/BA453_2006/Keating_The_omega_function.pdf)
the Omega is defined slightly different. To be more precisely the
numerator and denominator should be taken over (L,b) and (a,L)
respectively while in the current realisition they are taken over the
same region, i.e. over (a,L) and (a,L) respectively. So in my opinion
the omega should be calculated like this (but maybe using approxfun
somehow)
    ...
    omega = last(cumsum(1-f(xcdf$x[xcdf$x>L&xcdf$x<b])))/last(cumsum(f(xcdf$x[xcdf$x<=L&xcdf$x>a])))
    ...

  I have PerformanceAnalytics_1.0.3.3 installed.

Thanks!

Kind regards,
Alex


From brian at braverock.com  Fri Sep 16 15:49:19 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 16 Sep 2011 08:49:19 -0500
Subject: [R-SIG-Finance] probable error in Omega (PerformanceAnalytics)
 calculation
In-Reply-To: <CAJ3qPLANPuNXc_pP1oe4oVbWQu9kjTvGxdN0w+YfnrP_9BBHXA@mail.gmail.com>
References: <CAJ3qPLANPuNXc_pP1oe4oVbWQu9kjTvGxdN0w+YfnrP_9BBHXA@mail.gmail.com>
Message-ID: <1316180959.21435.32.camel@brian-rcg>

On Fri, 2011-09-16 at 16:54 +0400, Alex Bird wrote:
> Bonjour,
> 
>   I am not sure but it seems like there's an error in the calculation
> of Omega(..., method='interp') by PerformanceAnalytics package.
>   It calculates Omega as
>     ...
>     omegafull = cumsum(1 - f(xcdf$x))/cumsum(f(xcdf$x))
>     g <- approxfun(xcdf$x,omegafull,method="linear",ties="ordered")
>     omega = g(L)
>     ...
>   while in the original(?) paper of Keating which can be found here
> (http://faculty.fuqua.duke.edu/~charvey/Teaching/BA453_2006/Keating_The_omega_function.pdf)
> the Omega is defined slightly different. To be more precisely the
> numerator and denominator should be taken over (L,b) and (a,L)
> respectively while in the current realisition they are taken over the
> same region, i.e. over (a,L) and (a,L) respectively. So in my opinion
> the omega should be calculated like this (but maybe using approxfun
> somehow)
>     ...
>     omega = last(cumsum(1-f(xcdf$x[xcdf$x>L&xcdf$x<b])))/last(cumsum(f(xcdf$x[xcdf$x<=L&xcdf$x>a])))
>     ...
> 
>   I have PerformanceAnalytics_1.0.3.3 installed.
> 
> Thanks!


Alex,

Thanks for your input.

There are many different definitions of Omega, as Keating and others
have revised their views on how it sould be calculated.

Properly formatted patches *always* welcome, of course.  

Won't your suggested modification only uses the end of the cumsum, and
not the entire distribution?

I'll confess that I don't find Omega very useful, and haven't thought
much about that function since we wrote it.  I haven't read the original
Keating paper in years.


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From sunduck at gmail.com  Fri Sep 16 16:26:25 2011
From: sunduck at gmail.com (Alex Bird)
Date: Fri, 16 Sep 2011 18:26:25 +0400
Subject: [R-SIG-Finance] probable error in Omega (PerformanceAnalytics)
	calculation
In-Reply-To: <1316180959.21435.32.camel@brian-rcg>
References: <CAJ3qPLANPuNXc_pP1oe4oVbWQu9kjTvGxdN0w+YfnrP_9BBHXA@mail.gmail.com>
	<1316180959.21435.32.camel@brian-rcg>
Message-ID: <CAJ3qPLA9k6_niZv=4Yk+UQ5nUR9pxsRO7o=eMW78yG9Zn-jsAA@mail.gmail.com>

I shouldn't use last() + cumsum() but just sum() instead to calculate
the areas over/under CDF for the numerator/denominator.

The difference actually in the areas over which omega is calculated.
The original version calculates it like this (the nominator is taken
over (-Inf,L))
sum(1-f(xcdf$x[xcdf$x<=L]))/sum(f(xcdf$x[xcdf$x<=L]))

while the modified one do it like this (the nominator is taken over (L,+Inf))
sum(1-f(xcdf$x[xcdf$x>L]))/sum(f(xcdf$x[xcdf$x<=L]))

This is all the difference.

Did you find any superior performance measure to the Omega? I am
actually looking for a ways to incorporate all the moments in an asset
selection problem because I am working with far-from-normal
distributions.

Thanks!

Kind regards,
Alex

2011/9/16 Brian G. Peterson <brian at braverock.com>:
> On Fri, 2011-09-16 at 16:54 +0400, Alex Bird wrote:
>> Bonjour,
>>
>> ? I am not sure but it seems like there's an error in the calculation
>> of Omega(..., method='interp') by PerformanceAnalytics package.
>> ? It calculates Omega as
>> ? ? ...
>> ? ? omegafull = cumsum(1 - f(xcdf$x))/cumsum(f(xcdf$x))
>> ? ? g <- approxfun(xcdf$x,omegafull,method="linear",ties="ordered")
>> ? ? omega = g(L)
>> ? ? ...
>> ? while in the original(?) paper of Keating which can be found here
>> (http://faculty.fuqua.duke.edu/~charvey/Teaching/BA453_2006/Keating_The_omega_function.pdf)
>> the Omega is defined slightly different. To be more precisely the
>> numerator and denominator should be taken over (L,b) and (a,L)
>> respectively while in the current realisition they are taken over the
>> same region, i.e. over (a,L) and (a,L) respectively. So in my opinion
>> the omega should be calculated like this (but maybe using approxfun
>> somehow)
>> ? ? ...
>> ? ? omega = last(cumsum(1-f(xcdf$x[xcdf$x>L&xcdf$x<b])))/last(cumsum(f(xcdf$x[xcdf$x<=L&xcdf$x>a])))
>> ? ? ...
>>
>> ? I have PerformanceAnalytics_1.0.3.3 installed.
>>
>> Thanks!
>
>
> Alex,
>
> Thanks for your input.
>
> There are many different definitions of Omega, as Keating and others
> have revised their views on how it sould be calculated.
>
> Properly formatted patches *always* welcome, of course.
>
> Won't your suggested modification only uses the end of the cumsum, and
> not the entire distribution?
>
> I'll confess that I don't find Omega very useful, and haven't thought
> much about that function since we wrote it. ?I haven't read the original
> Keating paper in years.
>
>
> --
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
>
>
>


From bharatram.mnit at gmail.com  Sat Sep 17 00:18:30 2011
From: bharatram.mnit at gmail.com (Bharat Kherwa)
Date: Fri, 16 Sep 2011 15:18:30 -0700
Subject: [R-SIG-Finance] Help needed for accessing factor data,
Message-ID: <CAGVtM3uH21sbXKn3LWHF0ys__WDp7A8+3d+3KC0EGp=i8E0b1Q@mail.gmail.com>

Hi Guys,

I have some daily tick data like this,
            V1
                     V2
1 spy,20110815 09:30:00,119.18,119.19,119.18,119.19,0,0,0.0,false
2 spy,20110815 09:30:01,119.21,119.21,119.19,119.21,0,0,0.0,false
3 spy,20110815 09:30:02,119.22,119.27,119.21,119.27,0,0,0.0,false
4 spy,20110815 09:30:03,119.26,119.27,119.18,119.18,0,0,0.0,false
5 spy,20110815    09:30:04,119.2,119.2,119.18,119.2,0,0,0.0,false
6 spy,20110815 09:30:05,119.21,119.21,119.18,119.18,0,0,0.0,false

The structure of the data is as follows:

'data.frame':   23399 obs. of  2 variables:
 $ V1: Factor w/ 1 level "spy,20110815": 1 1 1 1 1 1 1 1 1 1 ...
 $ V2: Factor w/ 23399 levels
"01:00:00,119.92,119.92,119.92,119.92,0,0,0.0,false",..: 10800 10801
10802 10803 10804 10805 10806 10807 10808 10809 ...

Now I want to access the individual elements of data[1,2]  which is
09:30:00,119.18,119.19,119.18,119.19,0,0,0.0,false,
i.e. access 119.18 separately, and similarly for other entries in the row...
How do I do that? I tried all combinations to access the individual
elements with no success,

Any help will be greatly appreciated.

Thanks a lot
Bharat


From michael.weylandt at gmail.com  Sat Sep 17 01:24:47 2011
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Fri, 16 Sep 2011 19:24:47 -0400
Subject: [R-SIG-Finance] Help needed for accessing factor data,
In-Reply-To: <CAGVtM3vQNPnz-pPv+_Aq9kn6RfYQh_9sjitj4Gy=OfzcN1TJjg@mail.gmail.com>
References: <CAGVtM3uH21sbXKn3LWHF0ys__WDp7A8+3d+3KC0EGp=i8E0b1Q@mail.gmail.com>
	<CAAmySGOcy97ZOzh9Vu35O_FQvDoD6h-mJkXn1_RPOpeZAfb-NQ@mail.gmail.com>
	<CAGVtM3vQNPnz-pPv+_Aq9kn6RfYQh_9sjitj4Gy=OfzcN1TJjg@mail.gmail.com>
Message-ID: <CAAmySGNYeiwwop04rw7v77_vPdGUC4tZHNFYFTGPyEuxcPHUkg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110916/5e0847fd/attachment.pl>

From bharatram.mnit at gmail.com  Sat Sep 17 01:32:22 2011
From: bharatram.mnit at gmail.com (Bharat Kherwa)
Date: Fri, 16 Sep 2011 16:32:22 -0700
Subject: [R-SIG-Finance] Help needed for accessing factor data,
In-Reply-To: <CAAmySGNYeiwwop04rw7v77_vPdGUC4tZHNFYFTGPyEuxcPHUkg@mail.gmail.com>
References: <CAGVtM3uH21sbXKn3LWHF0ys__WDp7A8+3d+3KC0EGp=i8E0b1Q@mail.gmail.com>
	<CAAmySGOcy97ZOzh9Vu35O_FQvDoD6h-mJkXn1_RPOpeZAfb-NQ@mail.gmail.com>
	<CAGVtM3vQNPnz-pPv+_Aq9kn6RfYQh_9sjitj4Gy=OfzcN1TJjg@mail.gmail.com>
	<CAAmySGNYeiwwop04rw7v77_vPdGUC4tZHNFYFTGPyEuxcPHUkg@mail.gmail.com>
Message-ID: <CAGVtM3uiNBULqT5Lb1fCKDDBTMm8DG8Kg4tHtGuqSZ_LwhdsUg@mail.gmail.com>

It does,

Thanks a lot,

Have a great weekend ahead,

Sincerely
Bharat

On Fri, Sep 16, 2011 at 4:24 PM, R. Michael Weylandt
<michael.weylandt at gmail.com> wrote:
> The following (admittedly inelegant) code worked for me to get the data in:
>
> D = readLines("test.txt")
> D = sapply(D,strsplit,",")
> D = t(simplify2array(D))
> rownames(D) <- NULL
>
> D = as.data.frame(D)
>
> for (i in 3:9){
> ??? D[,i] <- as.double(as.character(D[,i]))
> }
> D[,10] <- (D$V10 == "true")
>
> Columns 1 and 2 are still factors and probably require some additional
> processing.
>
> Hope this helps,
>
> Michael
>
> On Fri, Sep 16, 2011 at 6:57 PM, Bharat Kherwa <bharatram.mnit at gmail.com>
> wrote:
>>
>> Hi Micheal
>>
>> Thanks for the quick reply, but I tried your solution, and still
>> doesn't work ?(it gives error for the dimension).
>> "apply(as.character(data$V2),1,strsplit,",")
>> Error in apply(as.character(data$V2), 1, strsplit, ",") :
>> ?dim(X) must have a positive length
>> "
>> I tried the above with all the data too: still got similar error.
>>
>> I am attaching a file here whose data I need to access,
>>
>> when we read the data using read.table('test'), it's read in as "data
>> frame" and using str(data) gives this :
>>
>> >str(data)
>> 'data.frame': ? 23399 obs. of ?2 variables:
>> ?$ V1: Factor w/ 1 level "spy,20110815": 1 1 1 1 1 1 1 1 1 1 ...
>> ?$ V2: Factor w/ 23399 levels
>> "01:00:00,119.92,119.92,119.92,119.92,0,0,0.0 , ...
>>
>> I need to access the individual elements of each row of V2.
>>
>> Please let me know,
>> It's a great help,
>>
>> Thanks a lot
>> Bharat
>>
>> On Fri, Sep 16, 2011 at 3:42 PM, R. Michael Weylandt
>> <michael.weylandt at gmail.com> wrote:
>> > I'd guess that the data frame could be easily converted to strings
>> > without
>> > loosing any information, so why don't you try something like
>> >
>> > apply(as.character(V),1,strsplit,",")
>> >
>> > and then coerce the columns to their appropriate types and recombine
>> > them
>> > into a big data frame?
>> >
>> > If this doesn't work, I'd happily take a closer look at the problem, but
>> > please use dput() so I can just copy it directly into my console and
>> > make
>> > sure I get just the right sort of thing.
>> >
>> > Hope this helps,
>> >
>> > Michael Weylandt
>> >
>> > On Fri, Sep 16, 2011 at 6:18 PM, Bharat Kherwa
>> > <bharatram.mnit at gmail.com>
>> > wrote:
>> >>
>> >> Hi Guys,
>> >>
>> >> I have some daily tick data like this,
>> >> ? ? ? ? ? ?V1
>> >> ? ? ? ? ? ? ? ? ? ? V2
>> >> 1 spy,20110815 09:30:00,119.18,119.19,119.18,119.19,0,0,0.0,false
>> >> 2 spy,20110815 09:30:01,119.21,119.21,119.19,119.21,0,0,0.0,false
>> >> 3 spy,20110815 09:30:02,119.22,119.27,119.21,119.27,0,0,0.0,false
>> >> 4 spy,20110815 09:30:03,119.26,119.27,119.18,119.18,0,0,0.0,false
>> >> 5 spy,20110815 ? ?09:30:04,119.2,119.2,119.18,119.2,0,0,0.0,false
>> >> 6 spy,20110815 09:30:05,119.21,119.21,119.18,119.18,0,0,0.0,false
>> >>
>> >> The structure of the data is as follows:
>> >>
>> >> 'data.frame': ? 23399 obs. of ?2 variables:
>> >> ?$ V1: Factor w/ 1 level "spy,20110815": 1 1 1 1 1 1 1 1 1 1 ...
>> >> ?$ V2: Factor w/ 23399 levels
>> >> "01:00:00,119.92,119.92,119.92,119.92,0,0,0.0,false",..: 10800 10801
>> >> 10802 10803 10804 10805 10806 10807 10808 10809 ...
>> >>
>> >> Now I want to access the individual elements of data[1,2] ?which is
>> >> 09:30:00,119.18,119.19,119.18,119.19,0,0,0.0,false,
>> >> i.e. access 119.18 separately, and similarly for other entries in the
>> >> row...
>> >> How do I do that? I tried all combinations to access the individual
>> >> elements with no success,
>> >>
>> >> Any help will be greatly appreciated.
>> >>
>> >> Thanks a lot
>> >> Bharat
>> >>
>> >> _______________________________________________
>> >> R-SIG-Finance at r-project.org mailing list
>> >> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> >> -- Subscriber-posting only. If you want to post, subscribe first.
>> >> -- Also note that this is not the r-help list where general R questions
>> >> should go.
>> >
>> >
>
>


From DAvery at marketingleverage.com  Sun Sep 18 02:20:42 2011
From: DAvery at marketingleverage.com (Dan Avery)
Date: Sat, 17 Sep 2011 17:20:42 -0700
Subject: [R-SIG-Finance] QuantStrat Using ^NYA
Message-ID: <11BAA7190200EE479F35AB150B2224870DB78C64A6@VA3DIAXVS131.RED001.local>

Hi All,

First, hats off to all involved in the quantstrat and related projects - very impressive stuff.

I ran the bbands.R example from the demo using the supplied stock.str = 'IBM' and the program ran to completion without a problem. However, when I tried to run the the demo script with stock.str = '^NYA' the program couldn't find the stock data. Looks like the symbol in the portfolio retains the leading '^' but the getSymbol brings in the data and uses NYA as the symbol.

The following shows the input and error message

>suppressWarnings(rm("order_book.bbands",pos=.strategy))

> suppressWarnings(rm("account.bbands","portfolio.bbands",pos=.blotter))

> suppressWarnings(rm("account.st","portfolio.st","stock.str","stratBBands","initDate","initEq",'start_t','end_t'))

> stock.str='^NYA' # what are we trying it on

> SD = 2 # how many standard deviations, traditionally 2

> N = 20 # how many periods for the moving average, traditionally 20

> currency('USD')
[1] "USD"

> stock(stock.str,currency='USD',multiplier=1)
[1] "X.NYA"

> initDate='2006-12-31'

> initEq=1000000

> portfolio.st='bbands'

> account.st='bbands'

> initPortf(portfolio.st,symbols=stock.str, initDate=initDate)
[1] "bbands"

> initAcct(account.st,portfolios='bbands', initDate=initDate)
[1] "bbands"

> initOrders(portfolio=portfolio.st,initDate=initDate)

> stratBBands <- strategy("bbands")

> stratBBands <- add.indicator(strategy = stratBBands, name = "BBands", 
+ arguments = list(HLC = quote(HLC(mktdata)), maType='SMA'))

> stratBBands <- add.signal(stratBBands,name="sigCrossover",
+ arguments = list(columns=c("Close","up"),relationship="gt"),label="Cl.gt.UpperBand")

> stratBBands <- add.signal(stratBBands,name="sigCrossover",
+ arguments = list(columns=c("Close","dn"),relationship="lt"),label="Cl.lt.LowerBand")

> stratBBands <- add.signal(stratBBands,name="sigCrossover",
+ arguments = list(columns=c("High","Low","mavg"),relationship="op"),label="Cross.Mid")

> stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = list(sigcol="Cl.gt.UpperBand",sigval=TRUE, orderqty=-100, ordertype='market', ord .... [TRUNCATED] 

> stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = list(sigcol="Cl.lt.LowerBand",sigval=TRUE, orderqty= 100, ordertype='market', ord .... [TRUNCATED] 

> stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = list(sigcol="Cross.Mid",sigval=TRUE, orderqty= 'all', ordertype='market', ordersi .... [TRUNCATED] 

> getSymbols(stock.str,from=initDate)
[1] "NYA"

> start_t<-Sys.time()

> out<-try(applyStrategy(strategy=stratBBands , portfolios='bbands',parameters=list(sd=SD,n=N)) )
Error in get(symbol) : object '^NYA' not found

> end_t<-Sys.time()

> print("strat execution time:")
[1] "strat execution time:"

> print(end_t-start_t)
Time difference of 0.00999999 secs

> start_t<-Sys.time()

> updatePortf(Portfolio='bbands',Dates=paste('::',as.Date(Sys.time()),sep=''))
Error in get(Symbol, envir = as.environment(.GlobalEnv)) : 
  object '^NYA' not found
In addition: Warning messages:
1: In getInstrument(symbol) :
  instrument ^NYA not found, please create it first.
2: In getInstrument(Symbol) :
  instrument ^NYA not found, please create it first.
3: In .updatePosPL(Portfolio = pname, Symbol = as.character(symbol),  :
  Instrument ^NYA  not found, things may break
> 


Any insights would be appreciated.

Dan Avery
   
________________________________________

From josh.m.ulrich at gmail.com  Sun Sep 18 02:42:22 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sat, 17 Sep 2011 19:42:22 -0500
Subject: [R-SIG-Finance] QuantStrat Using ^NYA
In-Reply-To: <11BAA7190200EE479F35AB150B2224870DB78C64A6@VA3DIAXVS131.RED001.local>
References: <11BAA7190200EE479F35AB150B2224870DB78C64A6@VA3DIAXVS131.RED001.local>
Message-ID: <CAPPM_gT+rvPJsP-p8Pz+yNm=rQfVzx0mXOgDA7oe_VYg7uW+uA@mail.gmail.com>

Hi Dan,

You can do this with quantmod::setSymbolLookup.  It's mentioned in the
See Also section of ?getSymbols.  I mention this because it's my
favorite section to find functionality I may not be aware of.

Something like this should do the trick:
setSymbolLookup(NYA=list(name="^NYA",src="yahoo"))
stock.str <- "NYA"

Best,
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com



On Sat, Sep 17, 2011 at 7:20 PM, Dan Avery <DAvery at marketingleverage.com> wrote:
> Hi All,
>
> First, hats off to all involved in the quantstrat and related projects - very impressive stuff.
>
> I ran the bbands.R example from the demo using the supplied stock.str = 'IBM' and the program ran to completion without a problem. However, when I tried to run the the demo script with stock.str = '^NYA' the program couldn't find the stock data. Looks like the symbol in the portfolio retains the leading '^' but the getSymbol brings in the data and uses NYA as the symbol.
>
> The following shows the input and error message
>
>>suppressWarnings(rm("order_book.bbands",pos=.strategy))
>
>> suppressWarnings(rm("account.bbands","portfolio.bbands",pos=.blotter))
>
>> suppressWarnings(rm("account.st","portfolio.st","stock.str","stratBBands","initDate","initEq",'start_t','end_t'))
>
>> stock.str='^NYA' # what are we trying it on
>
>> SD = 2 # how many standard deviations, traditionally 2
>
>> N = 20 # how many periods for the moving average, traditionally 20
>
>> currency('USD')
> [1] "USD"
>
>> stock(stock.str,currency='USD',multiplier=1)
> [1] "X.NYA"
>
>> initDate='2006-12-31'
>
>> initEq=1000000
>
>> portfolio.st='bbands'
>
>> account.st='bbands'
>
>> initPortf(portfolio.st,symbols=stock.str, initDate=initDate)
> [1] "bbands"
>
>> initAcct(account.st,portfolios='bbands', initDate=initDate)
> [1] "bbands"
>
>> initOrders(portfolio=portfolio.st,initDate=initDate)
>
>> stratBBands <- strategy("bbands")
>
>> stratBBands <- add.indicator(strategy = stratBBands, name = "BBands",
> + arguments = list(HLC = quote(HLC(mktdata)), maType='SMA'))
>
>> stratBBands <- add.signal(stratBBands,name="sigCrossover",
> + arguments = list(columns=c("Close","up"),relationship="gt"),label="Cl.gt.UpperBand")
>
>> stratBBands <- add.signal(stratBBands,name="sigCrossover",
> + arguments = list(columns=c("Close","dn"),relationship="lt"),label="Cl.lt.LowerBand")
>
>> stratBBands <- add.signal(stratBBands,name="sigCrossover",
> + arguments = list(columns=c("High","Low","mavg"),relationship="op"),label="Cross.Mid")
>
>> stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = list(sigcol="Cl.gt.UpperBand",sigval=TRUE, orderqty=-100, ordertype='market', ord .... [TRUNCATED]
>
>> stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = list(sigcol="Cl.lt.LowerBand",sigval=TRUE, orderqty= 100, ordertype='market', ord .... [TRUNCATED]
>
>> stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments = list(sigcol="Cross.Mid",sigval=TRUE, orderqty= 'all', ordertype='market', ordersi .... [TRUNCATED]
>
>> getSymbols(stock.str,from=initDate)
> [1] "NYA"
>
>> start_t<-Sys.time()
>
>> out<-try(applyStrategy(strategy=stratBBands , portfolios='bbands',parameters=list(sd=SD,n=N)) )
> Error in get(symbol) : object '^NYA' not found
>
>> end_t<-Sys.time()
>
>> print("strat execution time:")
> [1] "strat execution time:"
>
>> print(end_t-start_t)
> Time difference of 0.00999999 secs
>
>> start_t<-Sys.time()
>
>> updatePortf(Portfolio='bbands',Dates=paste('::',as.Date(Sys.time()),sep=''))
> Error in get(Symbol, envir = as.environment(.GlobalEnv)) :
> ?object '^NYA' not found
> In addition: Warning messages:
> 1: In getInstrument(symbol) :
> ?instrument ^NYA not found, please create it first.
> 2: In getInstrument(Symbol) :
> ?instrument ^NYA not found, please create it first.
> 3: In .updatePosPL(Portfolio = pname, Symbol = as.character(symbol), ?:
> ?Instrument ^NYA ?not found, things may break
>>
>
>
> Any insights would be appreciated.
>
> Dan Avery
>
> ________________________________________
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From gsee000 at gmail.com  Sun Sep 18 03:52:42 2011
From: gsee000 at gmail.com (G See)
Date: Sat, 17 Sep 2011 20:52:42 -0500
Subject: [R-SIG-Finance] QuantStrat Using ^NYA
In-Reply-To: <CAPPM_gT+rvPJsP-p8Pz+yNm=rQfVzx0mXOgDA7oe_VYg7uW+uA@mail.gmail.com>
References: <11BAA7190200EE479F35AB150B2224870DB78C64A6@VA3DIAXVS131.RED001.local>
	<CAPPM_gT+rvPJsP-p8Pz+yNm=rQfVzx0mXOgDA7oe_VYg7uW+uA@mail.gmail.com>
Message-ID: <CA+xi=qYeYdnC9Y-KvgL_vYQu2xAcfrw1ZV9WFune6yiNAtnt2w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110917/c0391b17/attachment.pl>

From cfriedem at gmail.com  Sun Sep 18 06:51:36 2011
From: cfriedem at gmail.com (Charlie Friedemann)
Date: Sun, 18 Sep 2011 00:51:36 -0400
Subject: [R-SIG-Finance] Indexing minute data with indexing package
Message-ID: <BC54CCC1-0447-42BC-86BA-45CC9B786D60@GMAIL.COM>

I've been working with indexing this weekend and have been trying to  
best figure out how to use it. My main goal is to, one ticker at a  
time, load the data into R, then index it on disk using indexing /  
mmap.  Then, when I need it for analysis, I'd like to load it into  
memory for analysis. I've had some success with this, but can't get it  
to work quite the way I want, so I'd like to get some input here.

Here's the process I've been using:
---------
library(indexing)
library(quantmod)
library(TTR)
tkr = "SPY"

# First import the data from CSV file
headerCol = c("Date","Time","Open","High","Low","Close","Volume");
tmp = read.csv(paste(getDWD(),"\\",tkr,"_1.csv",sep=""), header =  
FALSE, stringsAsFactors = FALSE, col.names=headerCol);

tmp$Timestamp = unclass(as.POSIXct(paste(tmp$Date,tmp$Time), format =  
"%m/%d/%Y %H:%M"));

# I converted the timestamp to the unix form, because in order to  
store it on the disk using indexing it must be an integer. I then use  
the following function:

indexTmp = function(tmp, symbol, db=indexenv()) {
	cwd <- getwd();
	setwd(getIWD()); 		#getIWD() returns the directory where I wish to  
store the indexed binary files
	db <- create_index(as.vector(tmp 
$Timestamp),column=paste(symbol,".DateTime",sep=""))
	db <- create_index(tmp$Open,column=paste(symbol,".Open",sep=""))
	db <- create_index(tmp$High,column=paste(symbol,".High",sep=""))
	db <- create_index(tmp$Low,column=paste(symbol,".Low",sep=""))
	db <- create_index(tmp$Close,column=paste(symbol,".Close",sep=""))
	db <- create_index(tmp$Volume,column=paste(symbol,".Volume",sep=""))
	setwd(cwd);
}

# The data from the csv file is indexed on disk as follows:

indexTmp(tmp=tmp,symbol=tkr);
db <- indexenv()
ls(db)
[1] "SPY.Close"    "SPY.DateTime"	"SPY.High"     "SPY.Low"       
"SPY.Open"     "SPY.Volume"

# Now, I'm not sure if this is the best way to do this, but I can't  
really think of another way to do it given what I understand of the  
indexing structure. Ideally, I'd like to pull the data per ticker  
using the following routine:

getIdxData = function(symbol = "", startDate = "", endDate = "",  
fields=c("Open","High","Low","Close","Volume"),db=indexenv()) {
	cwd <- getwd();
	setwd(getIWD());

	# Turn date range into unix time
	sDate = as.numeric(round(unclass(as.POSIXct(startDate))[1]));
	if (endDate == "") eDate =  
as.numeric(round(unclass(as.POSIXct(Sys.time()))[1])) else eDate =  
unclass(as.POSIXct(endDate))[1];

	# Now fetch the data in the index and construct an xts object from it
	dIdx =  
db 
[suppressWarnings 
(search_index 
(paste 
(symbol 
,".DateTime 
",sep 
= 
""),x 
= 
c 
(sDate 
,eDate),type=c(">=","<="))),eval(paste(symbol,".DateTime",sep=""))]
	dIdx=as.POSIXct(dIdx,origin="1970-01-01")

	tmp = NULL;
	cNames = NULL;
	for (field in fields) {
		tmp =  
cbind 
(tmp 
,db 
[suppressWarnings 
(search_index 
(paste 
(symbol 
,".DateTime 
",sep 
= 
""),x 
= 
c 
(sDate 
,eDate),type=c(">=","<="))),eval(paste(symbol,".",field,sep=""))]);
		cNames = c(cNames, paste(symbol,".",field,sep=""));
	}
	setwd(cwd);
	tmp = xts(tmp, order.by = dIdx);
	colnames(tmp) = cNames;
	return(tmp)
}

SPY<-getIdxData(symbol="SPY",startDate="1994-01-01")
Error in as.POSIXlt.character(x, tz, ...) :
   character string is not in a standard unambiguous format
---------

As you can see, a call to this routine results in failure. This is  
because the calls to 'dIdx = db[suppressWarnings(search_index' bit   
evaluates to a vector of NAs, so the as.POSIXct function doesn't work.  
Commenting out the call to as.POSIXct and having the function just  
return tmp before making it an xts object results in a vector with all  
NAs:
---------
SPY<-getIdxData(symbol="SPY",startDate="1997-01-01")
tail(SPY)
            SPY.Open SPY.High SPY.Low SPY.Close SPY.Volume
[1893702,] "NA.NA"  "NA.NA"  "NA.NA" "NA.NA"   "NA.NA"
[1893703,] "NA.NA"  "NA.NA"  "NA.NA" "NA.NA"   "NA.NA"
[1893704,] "NA.NA"  "NA.NA"  "NA.NA" "NA.NA"   "NA.NA"
[1893705,] "NA.NA"  "NA.NA"  "NA.NA" "NA.NA"   "NA.NA"
[1893706,] "NA.NA"  "NA.NA"  "NA.NA" "NA.NA"   "NA.NA"
[1893707,] "NA.NA"  "NA.NA"  "NA.NA" "NA.NA"   "NA.NA"
---------

However, if you do this run the body of the above getIdxData function  
line by line in the global environment, it is successful:
---------
symbol=tkr
startDate="1994-01-01"
endDate=""
fields=c("Open","High","Low","Close","Volume")
db=indexenv()

cwd <- getwd();
setwd(getIWD());

# Turn date range into unix time
sDate = as.numeric(round(unclass(as.POSIXct(startDate))[1]));
if (endDate == "") eDate =  
as.numeric(round(unclass(as.POSIXct(Sys.time()))[1])) else eDate =  
unclass(as.POSIXct(endDate))[1];

# Now fetch the data in the index and construct an xts object from it
dIdx =  
db 
[suppressWarnings 
(search_index 
(paste 
(symbol 
,".DateTime 
",sep 
= 
""),x 
= 
c 
(sDate 
,eDate),type=c(">=","<="))),eval(paste(symbol,".DateTime",sep=""))]
dIdx=as.POSIXct(dIdx,origin="1970-01-01")

tmp = NULL;
cNames = NULL;
for (field in fields) {
	tmp =  
cbind 
(tmp 
,db 
[suppressWarnings 
(search_index 
(paste 
(symbol 
,".DateTime 
",sep 
= 
""),x 
= 
c 
(sDate 
,eDate),type=c(">=","<="))),eval(paste(symbol,".",field,sep=""))]);
	cNames = c(cNames, paste(symbol,".",field,sep=""));
}
setwd(cwd);
tmp = xts(tmp, order.by = dIdx);
colnames(tmp) = cNames;
tail(tmp)
                     SPY.Open SPY.High SPY.Low SPY.Close SPY.Volume
2011-09-03 00:54:00   117.41   117.41  117.41    117.41        100
2011-09-03 00:55:00   117.42   117.42  117.40    117.41       2520
2011-09-03 00:56:00   117.41   117.41  117.40    117.40       2800
2011-09-03 00:57:00   117.41   117.41  117.41    117.41       1685
2011-09-03 00:58:00   117.42   117.42  117.42    117.42        500
2011-09-03 00:59:00   117.42   117.42  117.40    117.42       6418
---------

Apologies for the long post, but there was a lot of sample code to  
provide. My questions are as follows:

1) Why doesn't my getIdxData() function work properly? I'm pretty sure  
it has to do with the way the indexing function evaluates it's  
arguments. I had to use the eval() function in order to trick the  
index into accepting parametrized symbols. Perhaps there's some tricky  
environment / scope issue going on here.
2) For those of you using the index package, what approach would you  
recommend to use for storing equity data like this?

I understand the indexing package is very alpha, and I appreciate the  
work that has gone into it. It seems to be perfect for my purposes, as  
I would like to have many series of minute data at the ready to load  
into memory and analyze on demand.  Hopefully I can get some help here  
to resolve this. Thanks!


From markleeds2 at gmail.com  Sun Sep 18 16:22:44 2011
From: markleeds2 at gmail.com (Mark Leeds)
Date: Sun, 18 Sep 2011 10:22:44 -0400
Subject: [R-SIG-Finance] omega ratio paper
Message-ID: <CAHz+bWZEOPaTDr1CAwMwuzcMePaJVA5fLAkkf0iiVxh_Getx5A@mail.gmail.com>

hi: someone sent a question the other day about the formula for omega
in finance. I don't remember who it was nor do I use omega
but I was looking for something else and found below by accident in
case that person or anyone else is interested.

http://papers.ssrn.com/sol3/papers.cfm?abstract_id=1464798


From swtzang at gmail.com  Mon Sep 19 09:26:34 2011
From: swtzang at gmail.com (ShyhWeir Tzang)
Date: Mon, 19 Sep 2011 15:26:34 +0800
Subject: [R-SIG-Finance] missing data in return series...
Message-ID: <CADg5HzipfChrkRsWsE1m=en-QD2UabsaGbu5g2m4zvvo5adXfg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110919/972c984b/attachment.asc>

From swtzang at gmail.com  Mon Sep 19 09:30:03 2011
From: swtzang at gmail.com (ShyhWeir Tzang)
Date: Mon, 19 Sep 2011 15:30:03 +0800
Subject: [R-SIG-Finance] missing data in return series
Message-ID: <CADg5HzjvHLnZo=mG__3yYy9AD4bxJYZKSMcHnU_12FxZ2Y0KqA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110919/12e821c7/attachment.ksh>

From krisanharia at gmail.com  Mon Sep 19 10:00:55 2011
From: krisanharia at gmail.com (krisan haria)
Date: Mon, 19 Sep 2011 09:00:55 +0100
Subject: [R-SIG-Finance] RBloomberg
In-Reply-To: <72808E34-11A0-4B0E-B70A-97DE99171407@mac.com>
References: <CABmk8AEhd1QWs85+e9LUxtkzNATrE2=M9ojFSxDXoxNPjVapTg@mail.gmail.com>
	<CAA3Wa=uCeifJ2nbCm+MM7GW0_GaD_EtdP_x3_kTz8xBv0vwADg@mail.gmail.com>
	<CABmk8AG_+UiWXkyF+bk_fCgrnbCj6UFcaUyukgmgKk_RpHA4NQ@mail.gmail.com>
	<72808E34-11A0-4B0E-B70A-97DE99171407@mac.com>
Message-ID: <CALHdMsW_-+3T2mSe63U8rJcQXVhiegqAUYFSqL06rrMsLEVeMw@mail.gmail.com>

Hi

I am trying to use RBloomberg in R

The version is R 2.13.1

When I type

conn <- blpConnect()

I get the following error:

---------------------------
CFields_InvisibleWindow: Rgui.exe - Unable To Locate Component
---------------------------
This application has failed to start because XLCall32.dll was not
found. Re-installing the application may fix this problem.
---------------------------
OK
---------------------------


Any idea what is going wrong? It is the first time I've used this.

Regards

Krisan


From krisanharia at gmail.com  Mon Sep 19 10:00:55 2011
From: krisanharia at gmail.com (krisan haria)
Date: Mon, 19 Sep 2011 09:00:55 +0100
Subject: [R-SIG-Finance] RBloomberg
In-Reply-To: <72808E34-11A0-4B0E-B70A-97DE99171407@mac.com>
References: <CABmk8AEhd1QWs85+e9LUxtkzNATrE2=M9ojFSxDXoxNPjVapTg@mail.gmail.com>
	<CAA3Wa=uCeifJ2nbCm+MM7GW0_GaD_EtdP_x3_kTz8xBv0vwADg@mail.gmail.com>
	<CABmk8AG_+UiWXkyF+bk_fCgrnbCj6UFcaUyukgmgKk_RpHA4NQ@mail.gmail.com>
	<72808E34-11A0-4B0E-B70A-97DE99171407@mac.com>
Message-ID: <CALHdMsW_-+3T2mSe63U8rJcQXVhiegqAUYFSqL06rrMsLEVeMw@mail.gmail.com>

Hi

I am trying to use RBloomberg in R

The version is R 2.13.1

When I type

conn <- blpConnect()

I get the following error:

---------------------------
CFields_InvisibleWindow: Rgui.exe - Unable To Locate Component
---------------------------
This application has failed to start because XLCall32.dll was not
found. Re-installing the application may fix this problem.
---------------------------
OK
---------------------------


Any idea what is going wrong? It is the first time I've used this.

Regards

Krisan


From patrick at burns-stat.com  Mon Sep 19 10:22:02 2011
From: patrick at burns-stat.com (Patrick Burns)
Date: Mon, 19 Sep 2011 09:22:02 +0100
Subject: [R-SIG-Finance] missing data in return series...
In-Reply-To: <CADg5HzipfChrkRsWsE1m=en-QD2UabsaGbu5g2m4zvvo5adXfg@mail.gmail.com>
References: <CADg5HzipfChrkRsWsE1m=en-QD2UabsaGbu5g2m4zvvo5adXfg@mail.gmail.com>
Message-ID: <4E76FBAA.3050809@burns-stat.com>

There are two functions in the BurStFin
package ('factor.model.stat' and 'var.shrink.eqcor')
that will create variance matrix estimates
when there are missing values in the return
matrix.

The second of those gives Ledoit-Wolf estimates,
and is probably going to give the more useful
results.

I believe that the best way to handle missing values
for these estimates is still an open research question.
The functions handle missing values, no claim that
they do it optimally.

You can get the package via:

install.packages('BurStFin', repos='http://www.burns-stat.com/R')

As for means: historical means are in general not
of much use, so it is unlikely that it will matter
how you estimate them.


On 19/09/2011 08:26, ShyhWeir Tzang wrote:
> Dear all:
>
> I have a portfolio of about 50 stocks of which about 10~15 stocks with
> unequal lengths. That means they have shorter historical return series than
> others. How may I estimate the covariance matrix and mean of the stocks? Is
> the Stambaugh (1997) ("Analyzing investments whose histories differ in
> length") method still valid for individual stocks instead of funds? Is there
> any better way or more efficient way to estimate their mean and covariance
> matrix? Any help or suggestion is highly appreciated.
>
> --
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From john.laing at gmail.com  Mon Sep 19 13:48:00 2011
From: john.laing at gmail.com (John Laing)
Date: Mon, 19 Sep 2011 07:48:00 -0400
Subject: [R-SIG-Finance] RBloomberg
In-Reply-To: <CALHdMsW_-+3T2mSe63U8rJcQXVhiegqAUYFSqL06rrMsLEVeMw@mail.gmail.com>
References: <CABmk8AEhd1QWs85+e9LUxtkzNATrE2=M9ojFSxDXoxNPjVapTg@mail.gmail.com>
	<CAA3Wa=uCeifJ2nbCm+MM7GW0_GaD_EtdP_x3_kTz8xBv0vwADg@mail.gmail.com>
	<CABmk8AG_+UiWXkyF+bk_fCgrnbCj6UFcaUyukgmgKk_RpHA4NQ@mail.gmail.com>
	<72808E34-11A0-4B0E-B70A-97DE99171407@mac.com>
	<CALHdMsW_-+3T2mSe63U8rJcQXVhiegqAUYFSqL06rrMsLEVeMw@mail.gmail.com>
Message-ID: <CAA3Wa=t2h4nCgheFHR0Cy0NJ-RDfZZn_Q7-DBqb0cMWX8T4Y4Q@mail.gmail.com>

Krisan,

Do you have the Bloomberg Java API installed? Generally the files will
be in C:\blp\API\APIv3\JavaAPI\...
The packages are available through the Bloomberg WAPI screen.

John

On Mon, Sep 19, 2011 at 4:00 AM, krisan haria <krisanharia at gmail.com> wrote:
> Hi
>
> I am trying to use RBloomberg in R
>
> The version is R 2.13.1
>
> When I type
>
> conn <- blpConnect()
>
> I get the following error:
>
> ---------------------------
> CFields_InvisibleWindow: Rgui.exe - Unable To Locate Component
> ---------------------------
> This application has failed to start because XLCall32.dll was not
> found. Re-installing the application may fix this problem.
> ---------------------------
> OK
> ---------------------------
>
>
> Any idea what is going wrong? It is the first time I've used this.
>
> Regards
>
> Krisan
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From john.laing at gmail.com  Mon Sep 19 13:48:00 2011
From: john.laing at gmail.com (John Laing)
Date: Mon, 19 Sep 2011 07:48:00 -0400
Subject: [R-SIG-Finance] RBloomberg
In-Reply-To: <CALHdMsW_-+3T2mSe63U8rJcQXVhiegqAUYFSqL06rrMsLEVeMw@mail.gmail.com>
References: <CABmk8AEhd1QWs85+e9LUxtkzNATrE2=M9ojFSxDXoxNPjVapTg@mail.gmail.com>
	<CAA3Wa=uCeifJ2nbCm+MM7GW0_GaD_EtdP_x3_kTz8xBv0vwADg@mail.gmail.com>
	<CABmk8AG_+UiWXkyF+bk_fCgrnbCj6UFcaUyukgmgKk_RpHA4NQ@mail.gmail.com>
	<72808E34-11A0-4B0E-B70A-97DE99171407@mac.com>
	<CALHdMsW_-+3T2mSe63U8rJcQXVhiegqAUYFSqL06rrMsLEVeMw@mail.gmail.com>
Message-ID: <CAA3Wa=t2h4nCgheFHR0Cy0NJ-RDfZZn_Q7-DBqb0cMWX8T4Y4Q@mail.gmail.com>

Krisan,

Do you have the Bloomberg Java API installed? Generally the files will
be in C:\blp\API\APIv3\JavaAPI\...
The packages are available through the Bloomberg WAPI screen.

John

On Mon, Sep 19, 2011 at 4:00 AM, krisan haria <krisanharia at gmail.com> wrote:
> Hi
>
> I am trying to use RBloomberg in R
>
> The version is R 2.13.1
>
> When I type
>
> conn <- blpConnect()
>
> I get the following error:
>
> ---------------------------
> CFields_InvisibleWindow: Rgui.exe - Unable To Locate Component
> ---------------------------
> This application has failed to start because XLCall32.dll was not
> found. Re-installing the application may fix this problem.
> ---------------------------
> OK
> ---------------------------
>
>
> Any idea what is going wrong? It is the first time I've used this.
>
> Regards
>
> Krisan
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From krisanharia at gmail.com  Mon Sep 19 14:33:23 2011
From: krisanharia at gmail.com (krisan haria)
Date: Mon, 19 Sep 2011 13:33:23 +0100
Subject: [R-SIG-Finance] RBloomberg
In-Reply-To: <CAA3Wa=t2h4nCgheFHR0Cy0NJ-RDfZZn_Q7-DBqb0cMWX8T4Y4Q@mail.gmail.com>
References: <CABmk8AEhd1QWs85+e9LUxtkzNATrE2=M9ojFSxDXoxNPjVapTg@mail.gmail.com>
	<CAA3Wa=uCeifJ2nbCm+MM7GW0_GaD_EtdP_x3_kTz8xBv0vwADg@mail.gmail.com>
	<CABmk8AG_+UiWXkyF+bk_fCgrnbCj6UFcaUyukgmgKk_RpHA4NQ@mail.gmail.com>
	<72808E34-11A0-4B0E-B70A-97DE99171407@mac.com>
	<CALHdMsW_-+3T2mSe63U8rJcQXVhiegqAUYFSqL06rrMsLEVeMw@mail.gmail.com>
	<CAA3Wa=t2h4nCgheFHR0Cy0NJ-RDfZZn_Q7-DBqb0cMWX8T4Y4Q@mail.gmail.com>
Message-ID: <CALHdMsWCvrx1V1McN6gsWsoE-2DEMWWDBZuoraPP=y4LK32T9w@mail.gmail.com>

I didnt have it, but now have it installed. But the error msg is still the same.

On Mon, Sep 19, 2011 at 12:48 PM, John Laing <john.laing at gmail.com> wrote:
> Krisan,
>
> Do you have the Bloomberg Java API installed? Generally the files will
> be in C:\blp\API\APIv3\JavaAPI\...
> The packages are available through the Bloomberg WAPI screen.
>
> John
>
> On Mon, Sep 19, 2011 at 4:00 AM, krisan haria <krisanharia at gmail.com> wrote:
>> Hi
>>
>> I am trying to use RBloomberg in R
>>
>> The version is R 2.13.1
>>
>> When I type
>>
>> conn <- blpConnect()
>>
>> I get the following error:
>>
>> ---------------------------
>> CFields_InvisibleWindow: Rgui.exe - Unable To Locate Component
>> ---------------------------
>> This application has failed to start because XLCall32.dll was not
>> found. Re-installing the application may fix this problem.
>> ---------------------------
>> OK
>> ---------------------------
>>
>>
>> Any idea what is going wrong? It is the first time I've used this.
>>
>> Regards
>>
>> Krisan
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>


From krisanharia at gmail.com  Mon Sep 19 14:33:23 2011
From: krisanharia at gmail.com (krisan haria)
Date: Mon, 19 Sep 2011 13:33:23 +0100
Subject: [R-SIG-Finance] RBloomberg
In-Reply-To: <CAA3Wa=t2h4nCgheFHR0Cy0NJ-RDfZZn_Q7-DBqb0cMWX8T4Y4Q@mail.gmail.com>
References: <CABmk8AEhd1QWs85+e9LUxtkzNATrE2=M9ojFSxDXoxNPjVapTg@mail.gmail.com>
	<CAA3Wa=uCeifJ2nbCm+MM7GW0_GaD_EtdP_x3_kTz8xBv0vwADg@mail.gmail.com>
	<CABmk8AG_+UiWXkyF+bk_fCgrnbCj6UFcaUyukgmgKk_RpHA4NQ@mail.gmail.com>
	<72808E34-11A0-4B0E-B70A-97DE99171407@mac.com>
	<CALHdMsW_-+3T2mSe63U8rJcQXVhiegqAUYFSqL06rrMsLEVeMw@mail.gmail.com>
	<CAA3Wa=t2h4nCgheFHR0Cy0NJ-RDfZZn_Q7-DBqb0cMWX8T4Y4Q@mail.gmail.com>
Message-ID: <CALHdMsWCvrx1V1McN6gsWsoE-2DEMWWDBZuoraPP=y4LK32T9w@mail.gmail.com>

I didnt have it, but now have it installed. But the error msg is still the same.

On Mon, Sep 19, 2011 at 12:48 PM, John Laing <john.laing at gmail.com> wrote:
> Krisan,
>
> Do you have the Bloomberg Java API installed? Generally the files will
> be in C:\blp\API\APIv3\JavaAPI\...
> The packages are available through the Bloomberg WAPI screen.
>
> John
>
> On Mon, Sep 19, 2011 at 4:00 AM, krisan haria <krisanharia at gmail.com> wrote:
>> Hi
>>
>> I am trying to use RBloomberg in R
>>
>> The version is R 2.13.1
>>
>> When I type
>>
>> conn <- blpConnect()
>>
>> I get the following error:
>>
>> ---------------------------
>> CFields_InvisibleWindow: Rgui.exe - Unable To Locate Component
>> ---------------------------
>> This application has failed to start because XLCall32.dll was not
>> found. Re-installing the application may fix this problem.
>> ---------------------------
>> OK
>> ---------------------------
>>
>>
>> Any idea what is going wrong? It is the first time I've used this.
>>
>> Regards
>>
>> Krisan
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>


From john.laing at gmail.com  Mon Sep 19 15:09:57 2011
From: john.laing at gmail.com (John Laing)
Date: Mon, 19 Sep 2011 09:09:57 -0400
Subject: [R-SIG-Finance] RBloomberg
In-Reply-To: <CALHdMsWCvrx1V1McN6gsWsoE-2DEMWWDBZuoraPP=y4LK32T9w@mail.gmail.com>
References: <CABmk8AEhd1QWs85+e9LUxtkzNATrE2=M9ojFSxDXoxNPjVapTg@mail.gmail.com>
	<CAA3Wa=uCeifJ2nbCm+MM7GW0_GaD_EtdP_x3_kTz8xBv0vwADg@mail.gmail.com>
	<CABmk8AG_+UiWXkyF+bk_fCgrnbCj6UFcaUyukgmgKk_RpHA4NQ@mail.gmail.com>
	<72808E34-11A0-4B0E-B70A-97DE99171407@mac.com>
	<CALHdMsW_-+3T2mSe63U8rJcQXVhiegqAUYFSqL06rrMsLEVeMw@mail.gmail.com>
	<CAA3Wa=t2h4nCgheFHR0Cy0NJ-RDfZZn_Q7-DBqb0cMWX8T4Y4Q@mail.gmail.com>
	<CALHdMsWCvrx1V1McN6gsWsoE-2DEMWWDBZuoraPP=y4LK32T9w@mail.gmail.com>
Message-ID: <CAA3Wa=utgujLwjWujpHxcH_KjeLi4eyK+CE3LhAn3zWE1HCL1Q@mail.gmail.com>

Please run the following code and copy the results to this thread:

library(RBloomberg)
sessionInfo()
list.files("C:\\blp\\API\\APIv3\\JavaAPI", pattern = "jar$", recursive = TRUE)
conn <- blpConnect()

Thanks,
John

On Mon, Sep 19, 2011 at 8:33 AM, krisan haria <krisanharia at gmail.com> wrote:
> I didnt have it, but now have it installed. But the error msg is still the same.
>
> On Mon, Sep 19, 2011 at 12:48 PM, John Laing <john.laing at gmail.com> wrote:
>> Krisan,
>>
>> Do you have the Bloomberg Java API installed? Generally the files will
>> be in C:\blp\API\APIv3\JavaAPI\...
>> The packages are available through the Bloomberg WAPI screen.
>>
>> John
>>
>> On Mon, Sep 19, 2011 at 4:00 AM, krisan haria <krisanharia at gmail.com> wrote:
>>> Hi
>>>
>>> I am trying to use RBloomberg in R
>>>
>>> The version is R 2.13.1
>>>
>>> When I type
>>>
>>> conn <- blpConnect()
>>>
>>> I get the following error:
>>>
>>> ---------------------------
>>> CFields_InvisibleWindow: Rgui.exe - Unable To Locate Component
>>> ---------------------------
>>> This application has failed to start because XLCall32.dll was not
>>> found. Re-installing the application may fix this problem.
>>> ---------------------------
>>> OK
>>> ---------------------------
>>>
>>>
>>> Any idea what is going wrong? It is the first time I've used this.
>>>
>>> Regards
>>>
>>> Krisan
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>>
>>
>


From john.laing at gmail.com  Mon Sep 19 15:09:57 2011
From: john.laing at gmail.com (John Laing)
Date: Mon, 19 Sep 2011 09:09:57 -0400
Subject: [R-SIG-Finance] RBloomberg
In-Reply-To: <CALHdMsWCvrx1V1McN6gsWsoE-2DEMWWDBZuoraPP=y4LK32T9w@mail.gmail.com>
References: <CABmk8AEhd1QWs85+e9LUxtkzNATrE2=M9ojFSxDXoxNPjVapTg@mail.gmail.com>
	<CAA3Wa=uCeifJ2nbCm+MM7GW0_GaD_EtdP_x3_kTz8xBv0vwADg@mail.gmail.com>
	<CABmk8AG_+UiWXkyF+bk_fCgrnbCj6UFcaUyukgmgKk_RpHA4NQ@mail.gmail.com>
	<72808E34-11A0-4B0E-B70A-97DE99171407@mac.com>
	<CALHdMsW_-+3T2mSe63U8rJcQXVhiegqAUYFSqL06rrMsLEVeMw@mail.gmail.com>
	<CAA3Wa=t2h4nCgheFHR0Cy0NJ-RDfZZn_Q7-DBqb0cMWX8T4Y4Q@mail.gmail.com>
	<CALHdMsWCvrx1V1McN6gsWsoE-2DEMWWDBZuoraPP=y4LK32T9w@mail.gmail.com>
Message-ID: <CAA3Wa=utgujLwjWujpHxcH_KjeLi4eyK+CE3LhAn3zWE1HCL1Q@mail.gmail.com>

Please run the following code and copy the results to this thread:

library(RBloomberg)
sessionInfo()
list.files("C:\\blp\\API\\APIv3\\JavaAPI", pattern = "jar$", recursive = TRUE)
conn <- blpConnect()

Thanks,
John

On Mon, Sep 19, 2011 at 8:33 AM, krisan haria <krisanharia at gmail.com> wrote:
> I didnt have it, but now have it installed. But the error msg is still the same.
>
> On Mon, Sep 19, 2011 at 12:48 PM, John Laing <john.laing at gmail.com> wrote:
>> Krisan,
>>
>> Do you have the Bloomberg Java API installed? Generally the files will
>> be in C:\blp\API\APIv3\JavaAPI\...
>> The packages are available through the Bloomberg WAPI screen.
>>
>> John
>>
>> On Mon, Sep 19, 2011 at 4:00 AM, krisan haria <krisanharia at gmail.com> wrote:
>>> Hi
>>>
>>> I am trying to use RBloomberg in R
>>>
>>> The version is R 2.13.1
>>>
>>> When I type
>>>
>>> conn <- blpConnect()
>>>
>>> I get the following error:
>>>
>>> ---------------------------
>>> CFields_InvisibleWindow: Rgui.exe - Unable To Locate Component
>>> ---------------------------
>>> This application has failed to start because XLCall32.dll was not
>>> found. Re-installing the application may fix this problem.
>>> ---------------------------
>>> OK
>>> ---------------------------
>>>
>>>
>>> Any idea what is going wrong? It is the first time I've used this.
>>>
>>> Regards
>>>
>>> Krisan
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>>
>>
>


From krisanharia at gmail.com  Mon Sep 19 15:17:26 2011
From: krisanharia at gmail.com (krisan haria)
Date: Mon, 19 Sep 2011 14:17:26 +0100
Subject: [R-SIG-Finance] RBloomberg
In-Reply-To: <CAA3Wa=utgujLwjWujpHxcH_KjeLi4eyK+CE3LhAn3zWE1HCL1Q@mail.gmail.com>
References: <CABmk8AEhd1QWs85+e9LUxtkzNATrE2=M9ojFSxDXoxNPjVapTg@mail.gmail.com>
	<CAA3Wa=uCeifJ2nbCm+MM7GW0_GaD_EtdP_x3_kTz8xBv0vwADg@mail.gmail.com>
	<CABmk8AG_+UiWXkyF+bk_fCgrnbCj6UFcaUyukgmgKk_RpHA4NQ@mail.gmail.com>
	<72808E34-11A0-4B0E-B70A-97DE99171407@mac.com>
	<CALHdMsW_-+3T2mSe63U8rJcQXVhiegqAUYFSqL06rrMsLEVeMw@mail.gmail.com>
	<CAA3Wa=t2h4nCgheFHR0Cy0NJ-RDfZZn_Q7-DBqb0cMWX8T4Y4Q@mail.gmail.com>
	<CALHdMsWCvrx1V1McN6gsWsoE-2DEMWWDBZuoraPP=y4LK32T9w@mail.gmail.com>
	<CAA3Wa=utgujLwjWujpHxcH_KjeLi4eyK+CE3LhAn3zWE1HCL1Q@mail.gmail.com>
Message-ID: <CALHdMsWkCWwxZurnmm0qGT+DwfY-kt9NogGv5pZizNwfdmkE0w@mail.gmail.com>

Tried the first three lines

Output is the following


R version 2.13.1 (2011-07-08)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United Kingdom.1252
[2] LC_CTYPE=English_United Kingdom.1252
[3] LC_MONETARY=English_United Kingdom.1252
[4] LC_NUMERIC=C
[5] LC_TIME=English_United Kingdom.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] RBloomberg_0.1-11    chron_2.3-39         zoo_1.7-4
[4] RDCOMClient_0.92-0.1

loaded via a namespace (and not attached):
[1] grid_2.13.1     lattice_0.19-30

But on the last line I get the same erro msg

---------------------------
CFields_InvisibleWindow: Rgui.exe - Unable To Locate Component
---------------------------
This application has failed to start because XLCall32.dll was not
found. Re-installing the application may fix this problem.
---------------------------
OK
---------------------------




On Mon, Sep 19, 2011 at 2:09 PM, John Laing <john.laing at gmail.com> wrote:
> Please run the following code and copy the results to this thread:
>
> library(RBloomberg)
> sessionInfo()
> list.files("C:\\blp\\API\\APIv3\\JavaAPI", pattern = "jar$", recursive = TRUE)
> conn <- blpConnect()
>
> Thanks,
> John
>
> On Mon, Sep 19, 2011 at 8:33 AM, krisan haria <krisanharia at gmail.com> wrote:
>> I didnt have it, but now have it installed. But the error msg is still the same.
>>
>> On Mon, Sep 19, 2011 at 12:48 PM, John Laing <john.laing at gmail.com> wrote:
>>> Krisan,
>>>
>>> Do you have the Bloomberg Java API installed? Generally the files will
>>> be in C:\blp\API\APIv3\JavaAPI\...
>>> The packages are available through the Bloomberg WAPI screen.
>>>
>>> John
>>>
>>> On Mon, Sep 19, 2011 at 4:00 AM, krisan haria <krisanharia at gmail.com> wrote:
>>>> Hi
>>>>
>>>> I am trying to use RBloomberg in R
>>>>
>>>> The version is R 2.13.1
>>>>
>>>> When I type
>>>>
>>>> conn <- blpConnect()
>>>>
>>>> I get the following error:
>>>>
>>>> ---------------------------
>>>> CFields_InvisibleWindow: Rgui.exe - Unable To Locate Component
>>>> ---------------------------
>>>> This application has failed to start because XLCall32.dll was not
>>>> found. Re-installing the application may fix this problem.
>>>> ---------------------------
>>>> OK
>>>> ---------------------------
>>>>
>>>>
>>>> Any idea what is going wrong? It is the first time I've used this.
>>>>
>>>> Regards
>>>>
>>>> Krisan
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>>
>>>
>>
>


From krisanharia at gmail.com  Mon Sep 19 15:17:26 2011
From: krisanharia at gmail.com (krisan haria)
Date: Mon, 19 Sep 2011 14:17:26 +0100
Subject: [R-SIG-Finance] RBloomberg
In-Reply-To: <CAA3Wa=utgujLwjWujpHxcH_KjeLi4eyK+CE3LhAn3zWE1HCL1Q@mail.gmail.com>
References: <CABmk8AEhd1QWs85+e9LUxtkzNATrE2=M9ojFSxDXoxNPjVapTg@mail.gmail.com>
	<CAA3Wa=uCeifJ2nbCm+MM7GW0_GaD_EtdP_x3_kTz8xBv0vwADg@mail.gmail.com>
	<CABmk8AG_+UiWXkyF+bk_fCgrnbCj6UFcaUyukgmgKk_RpHA4NQ@mail.gmail.com>
	<72808E34-11A0-4B0E-B70A-97DE99171407@mac.com>
	<CALHdMsW_-+3T2mSe63U8rJcQXVhiegqAUYFSqL06rrMsLEVeMw@mail.gmail.com>
	<CAA3Wa=t2h4nCgheFHR0Cy0NJ-RDfZZn_Q7-DBqb0cMWX8T4Y4Q@mail.gmail.com>
	<CALHdMsWCvrx1V1McN6gsWsoE-2DEMWWDBZuoraPP=y4LK32T9w@mail.gmail.com>
	<CAA3Wa=utgujLwjWujpHxcH_KjeLi4eyK+CE3LhAn3zWE1HCL1Q@mail.gmail.com>
Message-ID: <CALHdMsWkCWwxZurnmm0qGT+DwfY-kt9NogGv5pZizNwfdmkE0w@mail.gmail.com>

Tried the first three lines

Output is the following


R version 2.13.1 (2011-07-08)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United Kingdom.1252
[2] LC_CTYPE=English_United Kingdom.1252
[3] LC_MONETARY=English_United Kingdom.1252
[4] LC_NUMERIC=C
[5] LC_TIME=English_United Kingdom.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] RBloomberg_0.1-11    chron_2.3-39         zoo_1.7-4
[4] RDCOMClient_0.92-0.1

loaded via a namespace (and not attached):
[1] grid_2.13.1     lattice_0.19-30

But on the last line I get the same erro msg

---------------------------
CFields_InvisibleWindow: Rgui.exe - Unable To Locate Component
---------------------------
This application has failed to start because XLCall32.dll was not
found. Re-installing the application may fix this problem.
---------------------------
OK
---------------------------




On Mon, Sep 19, 2011 at 2:09 PM, John Laing <john.laing at gmail.com> wrote:
> Please run the following code and copy the results to this thread:
>
> library(RBloomberg)
> sessionInfo()
> list.files("C:\\blp\\API\\APIv3\\JavaAPI", pattern = "jar$", recursive = TRUE)
> conn <- blpConnect()
>
> Thanks,
> John
>
> On Mon, Sep 19, 2011 at 8:33 AM, krisan haria <krisanharia at gmail.com> wrote:
>> I didnt have it, but now have it installed. But the error msg is still the same.
>>
>> On Mon, Sep 19, 2011 at 12:48 PM, John Laing <john.laing at gmail.com> wrote:
>>> Krisan,
>>>
>>> Do you have the Bloomberg Java API installed? Generally the files will
>>> be in C:\blp\API\APIv3\JavaAPI\...
>>> The packages are available through the Bloomberg WAPI screen.
>>>
>>> John
>>>
>>> On Mon, Sep 19, 2011 at 4:00 AM, krisan haria <krisanharia at gmail.com> wrote:
>>>> Hi
>>>>
>>>> I am trying to use RBloomberg in R
>>>>
>>>> The version is R 2.13.1
>>>>
>>>> When I type
>>>>
>>>> conn <- blpConnect()
>>>>
>>>> I get the following error:
>>>>
>>>> ---------------------------
>>>> CFields_InvisibleWindow: Rgui.exe - Unable To Locate Component
>>>> ---------------------------
>>>> This application has failed to start because XLCall32.dll was not
>>>> found. Re-installing the application may fix this problem.
>>>> ---------------------------
>>>> OK
>>>> ---------------------------
>>>>
>>>>
>>>> Any idea what is going wrong? It is the first time I've used this.
>>>>
>>>> Regards
>>>>
>>>> Krisan
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>>
>>>
>>
>


From john.laing at gmail.com  Mon Sep 19 15:48:29 2011
From: john.laing at gmail.com (John Laing)
Date: Mon, 19 Sep 2011 09:48:29 -0400
Subject: [R-SIG-Finance] RBloomberg
In-Reply-To: <CALHdMsWkCWwxZurnmm0qGT+DwfY-kt9NogGv5pZizNwfdmkE0w@mail.gmail.com>
References: <CABmk8AEhd1QWs85+e9LUxtkzNATrE2=M9ojFSxDXoxNPjVapTg@mail.gmail.com>
	<CAA3Wa=uCeifJ2nbCm+MM7GW0_GaD_EtdP_x3_kTz8xBv0vwADg@mail.gmail.com>
	<CABmk8AG_+UiWXkyF+bk_fCgrnbCj6UFcaUyukgmgKk_RpHA4NQ@mail.gmail.com>
	<72808E34-11A0-4B0E-B70A-97DE99171407@mac.com>
	<CALHdMsW_-+3T2mSe63U8rJcQXVhiegqAUYFSqL06rrMsLEVeMw@mail.gmail.com>
	<CAA3Wa=t2h4nCgheFHR0Cy0NJ-RDfZZn_Q7-DBqb0cMWX8T4Y4Q@mail.gmail.com>
	<CALHdMsWCvrx1V1McN6gsWsoE-2DEMWWDBZuoraPP=y4LK32T9w@mail.gmail.com>
	<CAA3Wa=utgujLwjWujpHxcH_KjeLi4eyK+CE3LhAn3zWE1HCL1Q@mail.gmail.com>
	<CALHdMsWkCWwxZurnmm0qGT+DwfY-kt9NogGv5pZizNwfdmkE0w@mail.gmail.com>
Message-ID: <CAA3Wa=sab_dBQD1LLkSSppGCUbU1Y5=kHZOY6BS_Wy4x61_O1Q@mail.gmail.com>

Your version of RBloomberg is very old: 0.1-11. You will need to
upgrade to the most recent release (0.4-150), which can be done like
this:

install.packages("RBloomberg",repos="http://r.findata.org/")

You will also need to install rJava 0.9, which is available from CRAN.

John

On Mon, Sep 19, 2011 at 9:17 AM, krisan haria <krisanharia at gmail.com> wrote:
> Tried the first three lines
>
> Output is the following
>
>
> R version 2.13.1 (2011-07-08)
> Platform: i386-pc-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=English_United Kingdom.1252
> [2] LC_CTYPE=English_United Kingdom.1252
> [3] LC_MONETARY=English_United Kingdom.1252
> [4] LC_NUMERIC=C
> [5] LC_TIME=English_United Kingdom.1252
>
> attached base packages:
> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>
> other attached packages:
> [1] RBloomberg_0.1-11 ? ?chron_2.3-39 ? ? ? ? zoo_1.7-4
> [4] RDCOMClient_0.92-0.1
>
> loaded via a namespace (and not attached):
> [1] grid_2.13.1 ? ? lattice_0.19-30
>
> But on the last line I get the same erro msg
>
> ---------------------------
> CFields_InvisibleWindow: Rgui.exe - Unable To Locate Component
> ---------------------------
> This application has failed to start because XLCall32.dll was not
> found. Re-installing the application may fix this problem.
> ---------------------------
> OK
> ---------------------------
>
>
>
>
> On Mon, Sep 19, 2011 at 2:09 PM, John Laing <john.laing at gmail.com> wrote:
>> Please run the following code and copy the results to this thread:
>>
>> library(RBloomberg)
>> sessionInfo()
>> list.files("C:\\blp\\API\\APIv3\\JavaAPI", pattern = "jar$", recursive = TRUE)
>> conn <- blpConnect()
>>
>> Thanks,
>> John
>>
>> On Mon, Sep 19, 2011 at 8:33 AM, krisan haria <krisanharia at gmail.com> wrote:
>>> I didnt have it, but now have it installed. But the error msg is still the same.
>>>
>>> On Mon, Sep 19, 2011 at 12:48 PM, John Laing <john.laing at gmail.com> wrote:
>>>> Krisan,
>>>>
>>>> Do you have the Bloomberg Java API installed? Generally the files will
>>>> be in C:\blp\API\APIv3\JavaAPI\...
>>>> The packages are available through the Bloomberg WAPI screen.
>>>>
>>>> John
>>>>
>>>> On Mon, Sep 19, 2011 at 4:00 AM, krisan haria <krisanharia at gmail.com> wrote:
>>>>> Hi
>>>>>
>>>>> I am trying to use RBloomberg in R
>>>>>
>>>>> The version is R 2.13.1
>>>>>
>>>>> When I type
>>>>>
>>>>> conn <- blpConnect()
>>>>>
>>>>> I get the following error:
>>>>>
>>>>> ---------------------------
>>>>> CFields_InvisibleWindow: Rgui.exe - Unable To Locate Component
>>>>> ---------------------------
>>>>> This application has failed to start because XLCall32.dll was not
>>>>> found. Re-installing the application may fix this problem.
>>>>> ---------------------------
>>>>> OK
>>>>> ---------------------------
>>>>>
>>>>>
>>>>> Any idea what is going wrong? It is the first time I've used this.
>>>>>
>>>>> Regards
>>>>>
>>>>> Krisan
>>>>>
>>>>> _______________________________________________
>>>>> R-SIG-Finance at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>>>
>>>>
>>>
>>
>


From john.laing at gmail.com  Mon Sep 19 15:48:29 2011
From: john.laing at gmail.com (John Laing)
Date: Mon, 19 Sep 2011 09:48:29 -0400
Subject: [R-SIG-Finance] RBloomberg
In-Reply-To: <CALHdMsWkCWwxZurnmm0qGT+DwfY-kt9NogGv5pZizNwfdmkE0w@mail.gmail.com>
References: <CABmk8AEhd1QWs85+e9LUxtkzNATrE2=M9ojFSxDXoxNPjVapTg@mail.gmail.com>
	<CAA3Wa=uCeifJ2nbCm+MM7GW0_GaD_EtdP_x3_kTz8xBv0vwADg@mail.gmail.com>
	<CABmk8AG_+UiWXkyF+bk_fCgrnbCj6UFcaUyukgmgKk_RpHA4NQ@mail.gmail.com>
	<72808E34-11A0-4B0E-B70A-97DE99171407@mac.com>
	<CALHdMsW_-+3T2mSe63U8rJcQXVhiegqAUYFSqL06rrMsLEVeMw@mail.gmail.com>
	<CAA3Wa=t2h4nCgheFHR0Cy0NJ-RDfZZn_Q7-DBqb0cMWX8T4Y4Q@mail.gmail.com>
	<CALHdMsWCvrx1V1McN6gsWsoE-2DEMWWDBZuoraPP=y4LK32T9w@mail.gmail.com>
	<CAA3Wa=utgujLwjWujpHxcH_KjeLi4eyK+CE3LhAn3zWE1HCL1Q@mail.gmail.com>
	<CALHdMsWkCWwxZurnmm0qGT+DwfY-kt9NogGv5pZizNwfdmkE0w@mail.gmail.com>
Message-ID: <CAA3Wa=sab_dBQD1LLkSSppGCUbU1Y5=kHZOY6BS_Wy4x61_O1Q@mail.gmail.com>

Your version of RBloomberg is very old: 0.1-11. You will need to
upgrade to the most recent release (0.4-150), which can be done like
this:

install.packages("RBloomberg",repos="http://r.findata.org/")

You will also need to install rJava 0.9, which is available from CRAN.

John

On Mon, Sep 19, 2011 at 9:17 AM, krisan haria <krisanharia at gmail.com> wrote:
> Tried the first three lines
>
> Output is the following
>
>
> R version 2.13.1 (2011-07-08)
> Platform: i386-pc-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=English_United Kingdom.1252
> [2] LC_CTYPE=English_United Kingdom.1252
> [3] LC_MONETARY=English_United Kingdom.1252
> [4] LC_NUMERIC=C
> [5] LC_TIME=English_United Kingdom.1252
>
> attached base packages:
> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>
> other attached packages:
> [1] RBloomberg_0.1-11 ? ?chron_2.3-39 ? ? ? ? zoo_1.7-4
> [4] RDCOMClient_0.92-0.1
>
> loaded via a namespace (and not attached):
> [1] grid_2.13.1 ? ? lattice_0.19-30
>
> But on the last line I get the same erro msg
>
> ---------------------------
> CFields_InvisibleWindow: Rgui.exe - Unable To Locate Component
> ---------------------------
> This application has failed to start because XLCall32.dll was not
> found. Re-installing the application may fix this problem.
> ---------------------------
> OK
> ---------------------------
>
>
>
>
> On Mon, Sep 19, 2011 at 2:09 PM, John Laing <john.laing at gmail.com> wrote:
>> Please run the following code and copy the results to this thread:
>>
>> library(RBloomberg)
>> sessionInfo()
>> list.files("C:\\blp\\API\\APIv3\\JavaAPI", pattern = "jar$", recursive = TRUE)
>> conn <- blpConnect()
>>
>> Thanks,
>> John
>>
>> On Mon, Sep 19, 2011 at 8:33 AM, krisan haria <krisanharia at gmail.com> wrote:
>>> I didnt have it, but now have it installed. But the error msg is still the same.
>>>
>>> On Mon, Sep 19, 2011 at 12:48 PM, John Laing <john.laing at gmail.com> wrote:
>>>> Krisan,
>>>>
>>>> Do you have the Bloomberg Java API installed? Generally the files will
>>>> be in C:\blp\API\APIv3\JavaAPI\...
>>>> The packages are available through the Bloomberg WAPI screen.
>>>>
>>>> John
>>>>
>>>> On Mon, Sep 19, 2011 at 4:00 AM, krisan haria <krisanharia at gmail.com> wrote:
>>>>> Hi
>>>>>
>>>>> I am trying to use RBloomberg in R
>>>>>
>>>>> The version is R 2.13.1
>>>>>
>>>>> When I type
>>>>>
>>>>> conn <- blpConnect()
>>>>>
>>>>> I get the following error:
>>>>>
>>>>> ---------------------------
>>>>> CFields_InvisibleWindow: Rgui.exe - Unable To Locate Component
>>>>> ---------------------------
>>>>> This application has failed to start because XLCall32.dll was not
>>>>> found. Re-installing the application may fix this problem.
>>>>> ---------------------------
>>>>> OK
>>>>> ---------------------------
>>>>>
>>>>>
>>>>> Any idea what is going wrong? It is the first time I've used this.
>>>>>
>>>>> Regards
>>>>>
>>>>> Krisan
>>>>>
>>>>> _______________________________________________
>>>>> R-SIG-Finance at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>>>
>>>>
>>>
>>
>


From krisanharia at gmail.com  Mon Sep 19 17:45:22 2011
From: krisanharia at gmail.com (krisan haria)
Date: Mon, 19 Sep 2011 16:45:22 +0100
Subject: [R-SIG-Finance] RBloomberg
In-Reply-To: <CAA3Wa=sab_dBQD1LLkSSppGCUbU1Y5=kHZOY6BS_Wy4x61_O1Q@mail.gmail.com>
References: <CABmk8AEhd1QWs85+e9LUxtkzNATrE2=M9ojFSxDXoxNPjVapTg@mail.gmail.com>
	<CAA3Wa=uCeifJ2nbCm+MM7GW0_GaD_EtdP_x3_kTz8xBv0vwADg@mail.gmail.com>
	<CABmk8AG_+UiWXkyF+bk_fCgrnbCj6UFcaUyukgmgKk_RpHA4NQ@mail.gmail.com>
	<72808E34-11A0-4B0E-B70A-97DE99171407@mac.com>
	<CALHdMsW_-+3T2mSe63U8rJcQXVhiegqAUYFSqL06rrMsLEVeMw@mail.gmail.com>
	<CAA3Wa=t2h4nCgheFHR0Cy0NJ-RDfZZn_Q7-DBqb0cMWX8T4Y4Q@mail.gmail.com>
	<CALHdMsWCvrx1V1McN6gsWsoE-2DEMWWDBZuoraPP=y4LK32T9w@mail.gmail.com>
	<CAA3Wa=utgujLwjWujpHxcH_KjeLi4eyK+CE3LhAn3zWE1HCL1Q@mail.gmail.com>
	<CALHdMsWkCWwxZurnmm0qGT+DwfY-kt9NogGv5pZizNwfdmkE0w@mail.gmail.com>
	<CAA3Wa=sab_dBQD1LLkSSppGCUbU1Y5=kHZOY6BS_Wy4x61_O1Q@mail.gmail.com>
Message-ID: <CALHdMsXhMAsD0mKxQOmcaXr1-AgqBgX=0AiSGkVypO807JP34w@mail.gmail.com>

nice one. Thanks.

Much appreciated

On Mon, Sep 19, 2011 at 2:48 PM, John Laing <john.laing at gmail.com> wrote:
> Your version of RBloomberg is very old: 0.1-11. You will need to
> upgrade to the most recent release (0.4-150), which can be done like
> this:
>
> install.packages("RBloomberg",repos="http://r.findata.org/")
>
> You will also need to install rJava 0.9, which is available from CRAN.
>
> John
>
> On Mon, Sep 19, 2011 at 9:17 AM, krisan haria <krisanharia at gmail.com> wrote:
>> Tried the first three lines
>>
>> Output is the following
>>
>>
>> R version 2.13.1 (2011-07-08)
>> Platform: i386-pc-mingw32/i386 (32-bit)
>>
>> locale:
>> [1] LC_COLLATE=English_United Kingdom.1252
>> [2] LC_CTYPE=English_United Kingdom.1252
>> [3] LC_MONETARY=English_United Kingdom.1252
>> [4] LC_NUMERIC=C
>> [5] LC_TIME=English_United Kingdom.1252
>>
>> attached base packages:
>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>>
>> other attached packages:
>> [1] RBloomberg_0.1-11 ? ?chron_2.3-39 ? ? ? ? zoo_1.7-4
>> [4] RDCOMClient_0.92-0.1
>>
>> loaded via a namespace (and not attached):
>> [1] grid_2.13.1 ? ? lattice_0.19-30
>>
>> But on the last line I get the same erro msg
>>
>> ---------------------------
>> CFields_InvisibleWindow: Rgui.exe - Unable To Locate Component
>> ---------------------------
>> This application has failed to start because XLCall32.dll was not
>> found. Re-installing the application may fix this problem.
>> ---------------------------
>> OK
>> ---------------------------
>>
>>
>>
>>
>> On Mon, Sep 19, 2011 at 2:09 PM, John Laing <john.laing at gmail.com> wrote:
>>> Please run the following code and copy the results to this thread:
>>>
>>> library(RBloomberg)
>>> sessionInfo()
>>> list.files("C:\\blp\\API\\APIv3\\JavaAPI", pattern = "jar$", recursive = TRUE)
>>> conn <- blpConnect()
>>>
>>> Thanks,
>>> John
>>>
>>> On Mon, Sep 19, 2011 at 8:33 AM, krisan haria <krisanharia at gmail.com> wrote:
>>>> I didnt have it, but now have it installed. But the error msg is still the same.
>>>>
>>>> On Mon, Sep 19, 2011 at 12:48 PM, John Laing <john.laing at gmail.com> wrote:
>>>>> Krisan,
>>>>>
>>>>> Do you have the Bloomberg Java API installed? Generally the files will
>>>>> be in C:\blp\API\APIv3\JavaAPI\...
>>>>> The packages are available through the Bloomberg WAPI screen.
>>>>>
>>>>> John
>>>>>
>>>>> On Mon, Sep 19, 2011 at 4:00 AM, krisan haria <krisanharia at gmail.com> wrote:
>>>>>> Hi
>>>>>>
>>>>>> I am trying to use RBloomberg in R
>>>>>>
>>>>>> The version is R 2.13.1
>>>>>>
>>>>>> When I type
>>>>>>
>>>>>> conn <- blpConnect()
>>>>>>
>>>>>> I get the following error:
>>>>>>
>>>>>> ---------------------------
>>>>>> CFields_InvisibleWindow: Rgui.exe - Unable To Locate Component
>>>>>> ---------------------------
>>>>>> This application has failed to start because XLCall32.dll was not
>>>>>> found. Re-installing the application may fix this problem.
>>>>>> ---------------------------
>>>>>> OK
>>>>>> ---------------------------
>>>>>>
>>>>>>
>>>>>> Any idea what is going wrong? It is the first time I've used this.
>>>>>>
>>>>>> Regards
>>>>>>
>>>>>> Krisan
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-SIG-Finance at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>>>>
>>>>>
>>>>
>>>
>>
>


From krisanharia at gmail.com  Mon Sep 19 17:45:22 2011
From: krisanharia at gmail.com (krisan haria)
Date: Mon, 19 Sep 2011 16:45:22 +0100
Subject: [R-SIG-Finance] RBloomberg
In-Reply-To: <CAA3Wa=sab_dBQD1LLkSSppGCUbU1Y5=kHZOY6BS_Wy4x61_O1Q@mail.gmail.com>
References: <CABmk8AEhd1QWs85+e9LUxtkzNATrE2=M9ojFSxDXoxNPjVapTg@mail.gmail.com>
	<CAA3Wa=uCeifJ2nbCm+MM7GW0_GaD_EtdP_x3_kTz8xBv0vwADg@mail.gmail.com>
	<CABmk8AG_+UiWXkyF+bk_fCgrnbCj6UFcaUyukgmgKk_RpHA4NQ@mail.gmail.com>
	<72808E34-11A0-4B0E-B70A-97DE99171407@mac.com>
	<CALHdMsW_-+3T2mSe63U8rJcQXVhiegqAUYFSqL06rrMsLEVeMw@mail.gmail.com>
	<CAA3Wa=t2h4nCgheFHR0Cy0NJ-RDfZZn_Q7-DBqb0cMWX8T4Y4Q@mail.gmail.com>
	<CALHdMsWCvrx1V1McN6gsWsoE-2DEMWWDBZuoraPP=y4LK32T9w@mail.gmail.com>
	<CAA3Wa=utgujLwjWujpHxcH_KjeLi4eyK+CE3LhAn3zWE1HCL1Q@mail.gmail.com>
	<CALHdMsWkCWwxZurnmm0qGT+DwfY-kt9NogGv5pZizNwfdmkE0w@mail.gmail.com>
	<CAA3Wa=sab_dBQD1LLkSSppGCUbU1Y5=kHZOY6BS_Wy4x61_O1Q@mail.gmail.com>
Message-ID: <CALHdMsXhMAsD0mKxQOmcaXr1-AgqBgX=0AiSGkVypO807JP34w@mail.gmail.com>

nice one. Thanks.

Much appreciated

On Mon, Sep 19, 2011 at 2:48 PM, John Laing <john.laing at gmail.com> wrote:
> Your version of RBloomberg is very old: 0.1-11. You will need to
> upgrade to the most recent release (0.4-150), which can be done like
> this:
>
> install.packages("RBloomberg",repos="http://r.findata.org/")
>
> You will also need to install rJava 0.9, which is available from CRAN.
>
> John
>
> On Mon, Sep 19, 2011 at 9:17 AM, krisan haria <krisanharia at gmail.com> wrote:
>> Tried the first three lines
>>
>> Output is the following
>>
>>
>> R version 2.13.1 (2011-07-08)
>> Platform: i386-pc-mingw32/i386 (32-bit)
>>
>> locale:
>> [1] LC_COLLATE=English_United Kingdom.1252
>> [2] LC_CTYPE=English_United Kingdom.1252
>> [3] LC_MONETARY=English_United Kingdom.1252
>> [4] LC_NUMERIC=C
>> [5] LC_TIME=English_United Kingdom.1252
>>
>> attached base packages:
>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>>
>> other attached packages:
>> [1] RBloomberg_0.1-11 ? ?chron_2.3-39 ? ? ? ? zoo_1.7-4
>> [4] RDCOMClient_0.92-0.1
>>
>> loaded via a namespace (and not attached):
>> [1] grid_2.13.1 ? ? lattice_0.19-30
>>
>> But on the last line I get the same erro msg
>>
>> ---------------------------
>> CFields_InvisibleWindow: Rgui.exe - Unable To Locate Component
>> ---------------------------
>> This application has failed to start because XLCall32.dll was not
>> found. Re-installing the application may fix this problem.
>> ---------------------------
>> OK
>> ---------------------------
>>
>>
>>
>>
>> On Mon, Sep 19, 2011 at 2:09 PM, John Laing <john.laing at gmail.com> wrote:
>>> Please run the following code and copy the results to this thread:
>>>
>>> library(RBloomberg)
>>> sessionInfo()
>>> list.files("C:\\blp\\API\\APIv3\\JavaAPI", pattern = "jar$", recursive = TRUE)
>>> conn <- blpConnect()
>>>
>>> Thanks,
>>> John
>>>
>>> On Mon, Sep 19, 2011 at 8:33 AM, krisan haria <krisanharia at gmail.com> wrote:
>>>> I didnt have it, but now have it installed. But the error msg is still the same.
>>>>
>>>> On Mon, Sep 19, 2011 at 12:48 PM, John Laing <john.laing at gmail.com> wrote:
>>>>> Krisan,
>>>>>
>>>>> Do you have the Bloomberg Java API installed? Generally the files will
>>>>> be in C:\blp\API\APIv3\JavaAPI\...
>>>>> The packages are available through the Bloomberg WAPI screen.
>>>>>
>>>>> John
>>>>>
>>>>> On Mon, Sep 19, 2011 at 4:00 AM, krisan haria <krisanharia at gmail.com> wrote:
>>>>>> Hi
>>>>>>
>>>>>> I am trying to use RBloomberg in R
>>>>>>
>>>>>> The version is R 2.13.1
>>>>>>
>>>>>> When I type
>>>>>>
>>>>>> conn <- blpConnect()
>>>>>>
>>>>>> I get the following error:
>>>>>>
>>>>>> ---------------------------
>>>>>> CFields_InvisibleWindow: Rgui.exe - Unable To Locate Component
>>>>>> ---------------------------
>>>>>> This application has failed to start because XLCall32.dll was not
>>>>>> found. Re-installing the application may fix this problem.
>>>>>> ---------------------------
>>>>>> OK
>>>>>> ---------------------------
>>>>>>
>>>>>>
>>>>>> Any idea what is going wrong? It is the first time I've used this.
>>>>>>
>>>>>> Regards
>>>>>>
>>>>>> Krisan
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-SIG-Finance at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>>>>
>>>>>
>>>>
>>>
>>
>


From ezivot at u.washington.edu  Mon Sep 19 18:20:30 2011
From: ezivot at u.washington.edu (Eric Zivot)
Date: Mon, 19 Sep 2011 09:20:30 -0700
Subject: [R-SIG-Finance] missing data in return series...
In-Reply-To: <CADg5HzipfChrkRsWsE1m=en-QD2UabsaGbu5g2m4zvvo5adXfg@mail.gmail.com>
References: <CADg5HzipfChrkRsWsE1m=en-QD2UabsaGbu5g2m4zvvo5adXfg@mail.gmail.com>
Message-ID: <020801cc76e8$0dcfbc70$296f3550$@washington.edu>

I would look at the package monomvn: Estimation for multivariate normal and
Student-t data with monotone missingness. Professor Gramacy gave a very nice
presentation at the recent R/Finance 2011 conference:
http://www.rinfinance.com/agenda/2011/RobertGramacy.pdf



-----Original Message-----
From: r-sig-finance-bounces at r-project.org
[mailto:r-sig-finance-bounces at r-project.org] On Behalf Of ShyhWeir Tzang
Sent: Monday, September 19, 2011 12:27 AM
To: r-sig-finance at stat.math.ethz.ch
Subject: [R-SIG-Finance] missing data in return series...

Dear all:

I have a portfolio of about 50 stocks of which about 10~15 stocks with
unequal lengths. That means they have shorter historical return series than
others. How may I estimate the covariance matrix and mean of the stocks? Is
the Stambaugh (1997) ("Analyzing investments whose histories differ in
length") method still valid for individual stocks instead of funds? Is there
any better way or more efficient way to estimate their mean and covariance
matrix? Any help or suggestion is highly appreciated.

--

	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.


From bharatram.mnit at gmail.com  Tue Sep 20 06:35:08 2011
From: bharatram.mnit at gmail.com (Bharat Kherwa)
Date: Mon, 19 Sep 2011 21:35:08 -0700
Subject: [R-SIG-Finance] Need help for calculating 9 period cci
Message-ID: <CAGVtM3v3P6K8-C82wkfH+adQS08hZeuxV2AuA2QLC_3zibvEFQ@mail.gmail.com>

Hello All

I need some help regarding calculating 9 period cci,

I did it this way:

>library(TTR)
>data(ttrc)
>cci <- CCI(ttrc[,c("High","Low","Close")] , ma = list("SMA", n=20), c=0.015))

Error in do.call(maType, c(list(HLC), maArgs)) :
  'what' must be a character string or a function,

Then I tried calculating ma first: this way:


>ma<-SMA(ttrc[, "Close"], 9);
>cci <- CCI(ttrc[9:nrow(ttrc),c("High","Low","Close")] , ma, c=0.015);

Error in if (n < 1 || n > NROW(x)) stop("Invalid 'n'") :
  missing value where TRUE/FALSE needed


Please let me know how to do this,
any help will be greatly appreciated,

thanks a lot
Bharat


From daniel.cegielka at gmail.com  Tue Sep 20 06:54:41 2011
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Tue, 20 Sep 2011 06:54:41 +0200
Subject: [R-SIG-Finance] Need help for calculating 9 period cci
In-Reply-To: <CAGVtM3v3P6K8-C82wkfH+adQS08hZeuxV2AuA2QLC_3zibvEFQ@mail.gmail.com>
References: <CAGVtM3v3P6K8-C82wkfH+adQS08hZeuxV2AuA2QLC_3zibvEFQ@mail.gmail.com>
Message-ID: <CAPLrYESS1g33_wCc4rfOAUPhNqM7TA2-NwmdOZtkRO9GMMpAzw@mail.gmail.com>

> getSymbols('RHT')
> CCI(cbind(Hi(RHT), Lo(RHT), Cl(RHT)),n=20,ma="SMA",c=0.015)

best regards,
daniel


2011/9/20 Bharat Kherwa <bharatram.mnit at gmail.com>:
> Hello All
>
> I need some help regarding calculating 9 period cci,
>
> I did it this way:
>
>>library(TTR)
>>data(ttrc)
>>cci <- CCI(ttrc[,c("High","Low","Close")] , ma = list("SMA", n=20), c=0.015))
>
> Error in do.call(maType, c(list(HLC), maArgs)) :
> ?'what' must be a character string or a function,
>
> Then I tried calculating ma first: this way:
>
>
>>ma<-SMA(ttrc[, "Close"], 9);
>>cci <- CCI(ttrc[9:nrow(ttrc),c("High","Low","Close")] , ma, c=0.015);
>
> Error in if (n < 1 || n > NROW(x)) stop("Invalid 'n'") :
> ?missing value where TRUE/FALSE needed
>
>
> Please let me know how to do this,
> any help will be greatly appreciated,
>
> thanks a lot
> Bharat
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From bharatram.mnit at gmail.com  Tue Sep 20 06:57:46 2011
From: bharatram.mnit at gmail.com (Bharat Kherwa)
Date: Mon, 19 Sep 2011 21:57:46 -0700
Subject: [R-SIG-Finance] Need help for calculating 9 period cci
In-Reply-To: <CAPLrYESS1g33_wCc4rfOAUPhNqM7TA2-NwmdOZtkRO9GMMpAzw@mail.gmail.com>
References: <CAGVtM3v3P6K8-C82wkfH+adQS08hZeuxV2AuA2QLC_3zibvEFQ@mail.gmail.com>
	<CAPLrYESS1g33_wCc4rfOAUPhNqM7TA2-NwmdOZtkRO9GMMpAzw@mail.gmail.com>
Message-ID: <CAGVtM3vkSbeGebmJ2rzFqPjEExrOhhcKYB_O6+ov+qmSdntw6w@mail.gmail.com>

great, thanks a lot!!!

2011/9/19 Daniel Cegie?ka <daniel.cegielka at gmail.com>:
>> getSymbols('RHT')
>> CCI(cbind(Hi(RHT), Lo(RHT), Cl(RHT)),n=20,ma="SMA",c=0.015)
>
> best regards,
> daniel
>
>
> 2011/9/20 Bharat Kherwa <bharatram.mnit at gmail.com>:
>> Hello All
>>
>> I need some help regarding calculating 9 period cci,
>>
>> I did it this way:
>>
>>>library(TTR)
>>>data(ttrc)
>>>cci <- CCI(ttrc[,c("High","Low","Close")] , ma = list("SMA", n=20), c=0.015))
>>
>> Error in do.call(maType, c(list(HLC), maArgs)) :
>> ?'what' must be a character string or a function,
>>
>> Then I tried calculating ma first: this way:
>>
>>
>>>ma<-SMA(ttrc[, "Close"], 9);
>>>cci <- CCI(ttrc[9:nrow(ttrc),c("High","Low","Close")] , ma, c=0.015);
>>
>> Error in if (n < 1 || n > NROW(x)) stop("Invalid 'n'") :
>> ?missing value where TRUE/FALSE needed
>>
>>
>> Please let me know how to do this,
>> any help will be greatly appreciated,
>>
>> thanks a lot
>> Bharat
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>


From swtzang at gmail.com  Tue Sep 20 08:24:42 2011
From: swtzang at gmail.com (ShyhWeir Tzang)
Date: Tue, 20 Sep 2011 14:24:42 +0800
Subject: [R-SIG-Finance] missing data in return series...
In-Reply-To: <020801cc76e8$0dcfbc70$296f3550$@washington.edu>
References: <CADg5HzipfChrkRsWsE1m=en-QD2UabsaGbu5g2m4zvvo5adXfg@mail.gmail.com>
	<020801cc76e8$0dcfbc70$296f3550$@washington.edu>
Message-ID: <CADg5HzjC81hwX8KZFBt2Vk2OvYQN+Qmcbro89uCuOCXU6GFYUA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110920/d9e6e75b/attachment.pl>

From swtzang at gmail.com  Tue Sep 20 08:26:25 2011
From: swtzang at gmail.com (ShyhWeir Tzang)
Date: Tue, 20 Sep 2011 14:26:25 +0800
Subject: [R-SIG-Finance] missing data in return series...
In-Reply-To: <4E76FBAA.3050809@burns-stat.com>
References: <CADg5HzipfChrkRsWsE1m=en-QD2UabsaGbu5g2m4zvvo5adXfg@mail.gmail.com>
	<4E76FBAA.3050809@burns-stat.com>
Message-ID: <CADg5HziasCZgABqpfBchZDEGWGCcNGzh8tV0K=4iTHu5qKOJvQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110920/90f21e0f/attachment.pl>

From ustaudinger at gmail.com  Tue Sep 20 14:44:33 2011
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Tue, 20 Sep 2011 14:44:33 +0200
Subject: [R-SIG-Finance] Cache functions
Message-ID: <CAMrz3D0G3GHXhU+ph7-xpqux0_G+chBYD2ZX0WbVmTZCPDpXPQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110920/b0bb0f29/attachment.pl>

From edd at debian.org  Tue Sep 20 15:07:03 2011
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 20 Sep 2011 08:07:03 -0500
Subject: [R-SIG-Finance] Cache functions
In-Reply-To: <CAMrz3D0G3GHXhU+ph7-xpqux0_G+chBYD2ZX0WbVmTZCPDpXPQ@mail.gmail.com>
References: <CAMrz3D0G3GHXhU+ph7-xpqux0_G+chBYD2ZX0WbVmTZCPDpXPQ@mail.gmail.com>
Message-ID: <20088.36855.768891.29670@max.nulle.part>


On 20 September 2011 at 14:44, Ulrich Staudinger wrote:
| Guys,
| 
| I have three nice functions that are particularly useful when backtesting,
| handling long processing chains, etc. I wrote them yesterday and found them
| quite beautiful and handy, a little contribution to the R-community.
| 
| The functions can be used to cache objects. They take a list() of keys
| (anything will do - i think), construct an md5 stamp of the list, save a

Yes, the digest() function from our digest package can create hash stamps for
any R object ... as we use R's own serialize() which is universal.

| to-be-cached object to disc and are able to load the object at a later time
| again.
| 
| Perfect for caching results of long computations ...

There are a couple of packages on CRAN that do that, but I haven't compared
them.  I think the CRAN Task View on Reproducible Research may have leads.

Just a thought:  Maybe you want to compare and review these, along with your
own approach, and make that a nice succinct two or three pager for the R Journal?

Dirk
 
| Example of use:
| 
| <code>
| dataPoints = -1
| if(!cacheGet(dataPoints, c(days, periodLength, iid)))
| {
|   dataPoints <- doTrendArbSplicer(dataPoints, days, iid, periodLength)
|   saveToCache(dataPoints, c(days, periodLength, iid))
| }
| </code>
| 
| 
| 
| Maybe helpful to someone, feedback welcome.
| 
| Cheers,
| Ulrich
| 
| 
| 
| 
| The functions:
| <code>
| #' private function - not exported.
| getCacheFileName <- function(keyList = list(), group="cache")
| {
|   # construct a filename from the list of parameters.
|   cacheId = paste(group, "_", digest(keyList, algo="md5"), ".dat", sep="")
|   return(cacheId)
| }
| 
| #' puts an object into the disc cache
| cachePut <- function(keyList = list(), cacheObject, group="cache")
| {
|   cacheFileName = getCacheFileName(keyList, group)
|   message("Writing to cache: ", cacheFileName)
|   save(cacheObject, file=cacheFileName)
|   message("Object cached.")
| }
| 
| #' gets an object from the disc cache. returns either true in case of
| success or false in case no cache object exists.
| #' requires a target object, where the cache content will be written into.
| cacheGet <- function(keyList = list(), targetObject, group="cache")
| {
|   cacheFileName = getCacheFileName(keyList, group)
|   message("Checking for cache file: ", cacheFileName)
|   fileInfo = file.info(cacheFileName)
|   if(!is.na(fileInfo$size))
|   {
|     message("Cache file exists.")
|     load(cacheFileName)
|     eval.parent(substitute(targetObject<-cacheObject))
|     message("Cached object loaded.")
|     # cached object will be returned.
|     return(TRUE)
|   }
|   else {
|     message("No cache exists.")
|     return(FALSE)
|   }
| }
| 
| #' removes objects from disc cache.
| cacheClear <- function(keyList = list(), group="cache")
| {
|   cacheFileName = getCacheFileName(keyList, group)
|   message("Clearing cache file: ", cacheFileName)
|   unlink(cacheFileName)
| }
| 
| 
| </code>
| 
| 
| -- 
| Ulrich Staudinger
| 
| http://www.activequant.org
| Connect online: https://www.xing.com/profile/Ulrich_Staudinger
| 
| 	[[alternative HTML version deleted]]
| 
| _______________________________________________
| R-SIG-Finance at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-sig-finance
| -- Subscriber-posting only. If you want to post, subscribe first.
| -- Also note that this is not the r-help list where general R questions should go.

-- 
New Rcpp master class for R and C++ integration is scheduled for 
San Francisco (Oct 8), more details / reg.info available at
http://www.revolutionanalytics.com/products/training/public/rcpp-master-class.php


From ustaudinger at gmail.com  Tue Sep 20 16:00:06 2011
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Tue, 20 Sep 2011 16:00:06 +0200
Subject: [R-SIG-Finance] Cache functions
In-Reply-To: <20088.36855.768891.29670@max.nulle.part>
References: <CAMrz3D0G3GHXhU+ph7-xpqux0_G+chBYD2ZX0WbVmTZCPDpXPQ@mail.gmail.com>
	<20088.36855.768891.29670@max.nulle.part>
Message-ID: <CAMrz3D2tCiAc7uHSKw1y12JJhbdj_0Bum7xf8KzRQ4gUufVL=g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110920/5349b6d6/attachment.pl>

From horstrwolf at msn.com  Tue Sep 20 18:54:21 2011
From: horstrwolf at msn.com (Horst R. Wolf)
Date: Tue, 20 Sep 2011 18:54:21 +0200
Subject: [R-SIG-Finance] The trouble with Omega
Message-ID: <DUB107-W58F438141D59DF428CE6B3D70A0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110920/ef9ca6d9/attachment.pl>

From john.kerpel at gmail.com  Tue Sep 20 20:33:34 2011
From: john.kerpel at gmail.com (John Kerpel)
Date: Tue, 20 Sep 2011 13:33:34 -0500
Subject: [R-SIG-Finance] Question about rugarch: ARFIMA
Message-ID: <CAALU2hsqg8MPuZagxUN_T5eq3qoxQeo+4bK89_vVZGcYHB6+mg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110920/9aabdcb0/attachment.pl>

From fabricemcshort at hotmail.com  Tue Sep 20 21:01:31 2011
From: fabricemcshort at hotmail.com (Fabrice McShort)
Date: Tue, 20 Sep 2011 21:01:31 +0200
Subject: [R-SIG-Finance] Found interesting opportunity..
Message-ID: <DUB107-W1986A84CBC2C485E18F52BCB0A0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110920/be105cb2/attachment.pl>

From alexios at 4dscape.com  Tue Sep 20 21:28:06 2011
From: alexios at 4dscape.com (alexios)
Date: Tue, 20 Sep 2011 20:28:06 +0100
Subject: [R-SIG-Finance] Question about rugarch: ARFIMA
In-Reply-To: <CAALU2hsqg8MPuZagxUN_T5eq3qoxQeo+4bK89_vVZGcYHB6+mg@mail.gmail.com>
References: <CAALU2hsqg8MPuZagxUN_T5eq3qoxQeo+4bK89_vVZGcYHB6+mg@mail.gmail.com>
Message-ID: <4E78E946.3010408@4dscape.com>

Hi John.

Thanks for reporting this.
I'll have a fix on r-forge later tonite, and a new version on CRAN by 
tomorrow.

Best,

Alexios

On 20/09/2011 19:33, John Kerpel wrote:
> I'm using the most excellent rugarch package to build some ARFIMA models.
>
> My code (mostly lifted from the examples) is the following:
>
> fit<- vector(mode = "list", length = 9)
> dist<- c("norm", "snorm", "std", "sstd", "ged", "sged", "nig", "ghyp",
> "jsu")
>
> for(i in 1:length(dist)){
>    spec<- arfimaspec(mean.model = list(armaOrder = c(1,1), include.mean =
> TRUE,
>   arfima = *TRUE*), distribution.model = dist[i])
>   fit[[i]]<- arfimafit(spec = spec, data = x,solver = "solnp", out.sample =
> 307,
>   fit.control = list(scale = 1))
> }
> forc = vector(mode = "list", length = 9)
> for(i in 1:9){
>    forc[[i]] = arfimaforecast(fit[[i]], n.ahead = 1, n.roll = 306)
> }
> #After I run the for loop for forc I get the following message:
>
> There were 50 or more warnings (use warnings() to see the first 50)
>
>> warnings()[1]$`longer object length is not a multiple of shorter object length`
> x - mu
>
>
>
> When I set the arfima=TRUE statement to arfima=FALSE in the spec
> object, I don't have this problem.
>
>
>
> Any advice?  Thx!  John
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>


From edd at debian.org  Tue Sep 20 21:31:19 2011
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 20 Sep 2011 14:31:19 -0500
Subject: [R-SIG-Finance] Found interesting opportunity..
In-Reply-To: <DUB107-W1986A84CBC2C485E18F52BCB0A0@phx.gbl>
References: <DUB107-W1986A84CBC2C485E18F52BCB0A0@phx.gbl>
Message-ID: <20088.59911.441776.37263@max.nulle.part>


On 20 September 2011 at 21:01, Fabrice McShort wrote:
| I was tired of always having to borrow money I kept telling myself things would get better I thought this would intrigue you!!
| http://pharus.com/JohnCampbel31.html now everyone recognizes me this is no joke
| Really easy method to make some extra cash

I just subsubscribed Mr McShort, and whatever bot was hiding behind this
handle.

FYI: Current subscriber count is just north of 2579, which includes a number
of mailing lists. Not bad.

Dirk
(list admin)

-- 
New Rcpp master class for R and C++ integration is scheduled for 
San Francisco (Oct 8), more details / reg.info available at
http://www.revolutionanalytics.com/products/training/public/rcpp-master-class.php


From chris.is.fun at gmail.com  Wed Sep 21 06:52:09 2011
From: chris.is.fun at gmail.com (Chris Waggoner)
Date: Tue, 20 Sep 2011 22:52:09 -0600
Subject: [R-SIG-Finance] Found interesting opportunity..
In-Reply-To: <20088.59911.441776.37263@max.nulle.part>
References: <DUB107-W1986A84CBC2C485E18F52BCB0A0@phx.gbl>
	<20088.59911.441776.37263@max.nulle.part>
Message-ID: <CADFr+DW7+WZhfN=ozKF-WxawVTOVAfcdt=F-GFk_3HcD-Oa30w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110920/8202cb92/attachment.pl>

From johnny.jp.22 at gmail.com  Wed Sep 21 18:10:34 2011
From: johnny.jp.22 at gmail.com (Johnny Paulo)
Date: Wed, 21 Sep 2011 17:10:34 +0100
Subject: [R-SIG-Finance] IBrokers: reqMktData, but for LastPrice only
Message-ID: <CAJi8HmaGFCPGfJR=iPaSgAzvzqeavpHqTBD6-c4qqWKJv+2C0g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110921/1a4d1697/attachment.pl>

From gsee000 at gmail.com  Wed Sep 21 20:27:16 2011
From: gsee000 at gmail.com (G See)
Date: Wed, 21 Sep 2011 13:27:16 -0500
Subject: [R-SIG-Finance] IBrokers: reqMktData, but for LastPrice only
In-Reply-To: <CAJi8HmaGFCPGfJR=iPaSgAzvzqeavpHqTBD6-c4qqWKJv+2C0g@mail.gmail.com>
References: <CAJi8HmaGFCPGfJR=iPaSgAzvzqeavpHqTBD6-c4qqWKJv+2C0g@mail.gmail.com>
Message-ID: <CA+xi=qa0OBr3s7AN=Z+zUur_oVFBfQg4m2M23OFxXetfnrLLfw@mail.gmail.com>

See attached file "eWrapper.data.Last.R"

> source("eWrapper.data.Last.R")
> reqMktData(tws, twsSTK("SPY"),
eventWrapper=eWrapper.data.Last(1),CALLBACK=snapShot)
2 -1 2104 Market data farm connection is OK:cusfuture
2 -1 2104 Market data farm connection is OK:usfuture
2 -1 2104 Market data farm connection is OK:eurofarm
2 -1 2104 Market data farm connection is OK:usopt
2 -1 2104 Market data farm connection is OK:usfarm
2 -1 2106 HMDS data farm connection is OK:ushmds2a
    Last LastSize
SPY    1   119.18

Here's a couple of other variations...

https://r-forge.r-project.org/scm/viewvc.php/pkg/twsInstrument/R/eWrapper.data.BID_ASK_OHLCV.R?view=markup&revision=101&root=twsinstrument

https://r-forge.r-project.org/scm/viewvc.php/pkg/twsInstrument/R/eWrapper.FXdata.R?view=markup&revision=90&root=twsinstrument

-Garrett


On Wed, Sep 21, 2011 at 11:10 AM, Johnny Paulo <johnny.jp.22 at gmail.com>wrote:

> Hi,
>
> I am using IBrokers to get RT prices thanks to Jeff Ryan's package,
> IBrokers.
>
> In order to deal with stocks having potentially low liquidity, without
> being
> penalized by long turnaround time, I would like to focus on getting the
> last
> price only.
> Can someone pls give me some pointers to what I should change in the
> traditional code provided by Jeff (see below)?
>
> Thanks
>
> Johnny
>
> reqMktData(tws,
> twsEquity(u),eventWrapper=eWrapper.data(1),CALLBACK=snapShot)
>
> with
> snapShot <- function (twsCon, eWrapper, timestamp, file, playback = 1, ...)
> {
>    if (missing(eWrapper))
>        eWrapper <- eWrapper()
>    names(eWrapper$.Data$data) <- eWrapper$.Data$symbols
>    con <- twsCon[[1]]
>    if (inherits(twsCon, "twsPlayback")) {
>        sys.time <- NULL
>        while (TRUE) {
>            if (!is.null(timestamp)) {
>                last.time <- sys.time
>                sys.time <- as.POSIXct(strptime(paste(readBin(con,
>                  character(), 2), collapse = " "), timestamp))
>                if (!is.null(last.time)) {
>                  Sys.sleep((sys.time - last.time) * playback)
>                }
>                curMsg <- .Internal(readBin(con, "character",
>                  1L, NA_integer_, TRUE, FALSE))
>                if (length(curMsg) < 1)
>                  next
>                processMsg(curMsg, con, eWrapper, format(sys.time,
>                  timestamp), file, ...)
>            }
>            else {
>                curMsg <- readBin(con, character(), 1)
>                if (length(curMsg) < 1)
>                  next
>                processMsg(curMsg, con, eWrapper, timestamp,
>                  file, ...)
>                if (curMsg == .twsIncomingMSG$REAL_TIME_BARS)
>                  Sys.sleep(5 * playback)
>            }
>        }
>    }
>    else {
>        while (TRUE) {
>            socketSelect(list(con), FALSE, NULL)
>            curMsg <- .Internal(readBin(con, "character", 1L,
>                NA_integer_, TRUE, FALSE))
>            if (!is.null(timestamp)) {
>                processMsg(curMsg, con, eWrapper, format(Sys.time(),
>                  timestamp), file, ...)
>            }
>            else {
>                processMsg(curMsg, con, eWrapper, timestamp,
>                  file, ...)
>            }
>            if (!any(sapply(eWrapper$.Data$data, is.na)))
>                return(do.call(rbind, lapply(eWrapper$.Data$data,
>                  as.data.frame)))
>        }
>    }
> }
>
>        [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110921/dbba9c25/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: eWrapper.data.Last.R
Type: text/x-r-source
Size: 3176 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110921/dbba9c25/attachment.bin>

From gsee000 at gmail.com  Wed Sep 21 20:28:47 2011
From: gsee000 at gmail.com (G See)
Date: Wed, 21 Sep 2011 13:28:47 -0500
Subject: [R-SIG-Finance] IBrokers: reqMktData, but for LastPrice only
In-Reply-To: <CA+xi=qa0OBr3s7AN=Z+zUur_oVFBfQg4m2M23OFxXetfnrLLfw@mail.gmail.com>
References: <CAJi8HmaGFCPGfJR=iPaSgAzvzqeavpHqTBD6-c4qqWKJv+2C0g@mail.gmail.com>
	<CA+xi=qa0OBr3s7AN=Z+zUur_oVFBfQg4m2M23OFxXetfnrLLfw@mail.gmail.com>
Message-ID: <CA+xi=qaS3wCpuDvnS=JKJi_7=Xyaamzyum4unYRDBQ2MLjHfVA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110921/d94c6638/attachment.pl>

From gsee000 at gmail.com  Wed Sep 21 20:55:54 2011
From: gsee000 at gmail.com (G See)
Date: Wed, 21 Sep 2011 13:55:54 -0500
Subject: [R-SIG-Finance] IBrokers: reqMktData, but for LastPrice only
In-Reply-To: <CA+xi=qaS3wCpuDvnS=JKJi_7=Xyaamzyum4unYRDBQ2MLjHfVA@mail.gmail.com>
References: <CAJi8HmaGFCPGfJR=iPaSgAzvzqeavpHqTBD6-c4qqWKJv+2C0g@mail.gmail.com>
	<CA+xi=qa0OBr3s7AN=Z+zUur_oVFBfQg4m2M23OFxXetfnrLLfw@mail.gmail.com>
	<CA+xi=qaS3wCpuDvnS=JKJi_7=Xyaamzyum4unYRDBQ2MLjHfVA@mail.gmail.com>
Message-ID: <CA+xi=qajQb1icTz30YcKcRGT1bBTNgTjpM9hF7FoQf+2xw85zQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110921/bcaa8bc7/attachment.pl>

From ashimkapoor at gmail.com  Thu Sep 22 09:32:01 2011
From: ashimkapoor at gmail.com (Ashim Kapoor)
Date: Thu, 22 Sep 2011 13:02:01 +0530
Subject: [R-SIG-Finance] Currency data from GOOGLE/Yahoo finance.
Message-ID: <CAC8=1erQVo1uTymvBOuoQkjBAmgGGDrH85jHC09jNLBo9FinwQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110922/8a5b7992/attachment.pl>

From wobwu22 at yahoo.de  Thu Sep 22 10:42:33 2011
From: wobwu22 at yahoo.de (Wolfgang Wu)
Date: Thu, 22 Sep 2011 09:42:33 +0100 (BST)
Subject: [R-SIG-Finance] Currency data from GOOGLE/Yahoo finance.
In-Reply-To: <CAC8=1erQVo1uTymvBOuoQkjBAmgGGDrH85jHC09jNLBo9FinwQ@mail.gmail.com>
References: <CAC8=1erQVo1uTymvBOuoQkjBAmgGGDrH85jHC09jNLBo9FinwQ@mail.gmail.com>
Message-ID: <1316680953.83802.YahooMailNeo@web29609.mail.ird.yahoo.com>

Ashim,

Unfortunately I couldn't get any data from Yahoo or Google either. I thought you had to do something like?getSymbols("CURRENCY:INRUSD",src="google"), but that doesn't work anymore either.?

Best solution I can give you is to use the Oanda source for currency data. They do limit you to 500 days of data but you can easily write a loop changing the "from" and "to" times and rbind the xts object together afterwards.

INRUSD <- getSymbols('INR/USD', src='oanda', auto.assign = FALSE)


Regards, ?

Wolfgang Wu




----- Urspr?ngliche Message -----
Von: Ashim Kapoor <ashimkapoor at gmail.com>
An: r-sig-finance at r-project.org
Cc: 
Gesendet: 8:32 Donnerstag, 22.September 2011 
Betreff: [R-SIG-Finance] Currency data from GOOGLE/Yahoo finance.

Dear R-helpers,

I am trying to use getSymbols to download INR/USD data from yahoo or google
finance. In each case I 1st list the website and then the R error which I
get on trying to download the symbol. Could someone please tell me where I
am wrong?

http://www.google.com/finance?q=inrusd

> getSymbols("inrusd",src="google")
Error in download.file(paste(google.URL, "q=", Symbols.name, "&startdate=",
:
? cannot open URL '
http://finance.google.com/finance/historical?q=inrusd&startdate=Jan+01,+2007&enddate=Sep+22,+2011&output=csv
'
In addition: Warning message:
In download.file(paste(google.URL, "q=", Symbols.name, "&startdate=",? :
? cannot open: HTTP status was '400 Bad Request'

http://in.finance.yahoo.com/q?s=USDINR%3DX&ql=1

> getSymbols("USDINR=X",src="yahoo")
Error in download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,
:
? cannot open URL '
http://chart.yahoo.com/table.csv?s=USDINR=X&a=0&b=01&c=2007&d=8&e=22&f=2011&g=d&q=q&y=0&z=USDINR=X&x=.csv
'
In addition: Warning message:
In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,? :
? unable to resolve 'chart.yahoo.com'

Best Regards,
Ashim

??? [[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.



From enricoschumann at yahoo.de  Thu Sep 22 11:16:35 2011
From: enricoschumann at yahoo.de (Enrico Schumann)
Date: Thu, 22 Sep 2011 11:16:35 +0200
Subject: [R-SIG-Finance] Currency data from GOOGLE/Yahoo finance.
In-Reply-To: <1316680953.83802.YahooMailNeo@web29609.mail.ird.yahoo.com>
References: <CAC8=1erQVo1uTymvBOuoQkjBAmgGGDrH85jHC09jNLBo9FinwQ@mail.gmail.com>
	<1316680953.83802.YahooMailNeo@web29609.mail.ird.yahoo.com>
Message-ID: <4E7AFCF3.8080909@yahoo.de>


Try this:

require("quantmod")
INRUSD <- getSymbols("INR=X",src="yahoo", auto.assign = FALSE)


Regards,
Enrico

Am 22.09.2011 10:42, schrieb Wolfgang Wu:
> Ashim,
>
> Unfortunately I couldn't get any data from Yahoo or Google either. I thought you had to do something like getSymbols("CURRENCY:INRUSD",src="google"), but that doesn't work anymore either.
>
> Best solution I can give you is to use the Oanda source for currency data. They do limit you to 500 days of data but you can easily write a loop changing the "from" and "to" times and rbind the xts object together afterwards.
>
> INRUSD<- getSymbols('INR/USD', src='oanda', auto.assign = FALSE)
>
>
> Regards,
>
> Wolfgang Wu
>
>
>
>
> ----- Urspr?ngliche Message -----
> Von: Ashim Kapoor<ashimkapoor at gmail.com>
> An: r-sig-finance at r-project.org
> Cc:
> Gesendet: 8:32 Donnerstag, 22.September 2011
> Betreff: [R-SIG-Finance] Currency data from GOOGLE/Yahoo finance.
>
> Dear R-helpers,
>
> I am trying to use getSymbols to download INR/USD data from yahoo or google
> finance. In each case I 1st list the website and then the R error which I
> get on trying to download the symbol. Could someone please tell me where I
> am wrong?
>
> http://www.google.com/finance?q=inrusd
>
>> getSymbols("inrusd",src="google")
> Error in download.file(paste(google.URL, "q=", Symbols.name, "&startdate=",
> :
>    cannot open URL '
> http://finance.google.com/finance/historical?q=inrusd&startdate=Jan+01,+2007&enddate=Sep+22,+2011&output=csv
> '
> In addition: Warning message:
> In download.file(paste(google.URL, "q=", Symbols.name, "&startdate=",  :
>    cannot open: HTTP status was '400 Bad Request'
>
> http://in.finance.yahoo.com/q?s=USDINR%3DX&ql=1
>
>> getSymbols("USDINR=X",src="yahoo")
> Error in download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,
> :
>    cannot open URL '
> http://chart.yahoo.com/table.csv?s=USDINR=X&a=0&b=01&c=2007&d=8&e=22&f=2011&g=d&q=q&y=0&z=USDINR=X&x=.csv
> '
> In addition: Warning message:
> In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
>    unable to resolve 'chart.yahoo.com'
>
> Best Regards,
> Ashim
>
>      [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>

-- 
Enrico Schumann
Lucerne, Switzerland
http://nmof.net/


From ashimkapoor at gmail.com  Thu Sep 22 11:40:52 2011
From: ashimkapoor at gmail.com (Ashim Kapoor)
Date: Thu, 22 Sep 2011 15:10:52 +0530
Subject: [R-SIG-Finance] Currency data from GOOGLE/Yahoo finance.
In-Reply-To: <4E7AFCF3.8080909@yahoo.de>
References: <CAC8=1erQVo1uTymvBOuoQkjBAmgGGDrH85jHC09jNLBo9FinwQ@mail.gmail.com>
	<1316680953.83802.YahooMailNeo@web29609.mail.ird.yahoo.com>
	<4E7AFCF3.8080909@yahoo.de>
Message-ID: <CAC8=1eox0DP7WxOob2a9ho2pYCpSUAKW=8TBqyTk8OOn2G0KMg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110922/0c18509e/attachment.pl>

From enricoschumann at yahoo.de  Thu Sep 22 11:50:21 2011
From: enricoschumann at yahoo.de (Enrico Schumann)
Date: Thu, 22 Sep 2011 11:50:21 +0200
Subject: [R-SIG-Finance] Currency data from GOOGLE/Yahoo finance.
In-Reply-To: <CAC8=1eox0DP7WxOob2a9ho2pYCpSUAKW=8TBqyTk8OOn2G0KMg@mail.gmail.com>
References: <CAC8=1erQVo1uTymvBOuoQkjBAmgGGDrH85jHC09jNLBo9FinwQ@mail.gmail.com>
	<1316680953.83802.YahooMailNeo@web29609.mail.ird.yahoo.com>
	<4E7AFCF3.8080909@yahoo.de>
	<CAC8=1eox0DP7WxOob2a9ho2pYCpSUAKW=8TBqyTk8OOn2G0KMg@mail.gmail.com>
Message-ID: <4E7B04DD.3090106@yahoo.de>


It seems a convention that if the rate is USDCCY, you get it from Yahoo 
with CCY=X. At least I have had this with JPY=X, GBP=X. But I am not 
sure how consistent that is. The simple "trick" is to directly check on 




Am 22.09.2011 11:40, schrieb Ashim Kapoor:
> Dear Enrico,
>
> How / where did you discover that it should be "INR=X" instead of the symbol
> "USDINR=X"
>
> Many thanks,
> Ashim
>
> On Thu, Sep 22, 2011 at 2:46 PM, Enrico Schumann<enricoschumann at yahoo.de>wrote:
>
>>
>> Try this:
>>
>> require("quantmod")
>> INRUSD<- getSymbols("INR=X",src="yahoo"**, auto.assign = FALSE)
>>
>>
>> Regards,
>> Enrico
>>
>> Am 22.09.2011 10:42, schrieb Wolfgang Wu:
>>
>>   Ashim,
>>>
>>> Unfortunately I couldn't get any data from Yahoo or Google either. I
>>> thought you had to do something like getSymbols("CURRENCY:INRUSD",**src="google"),
>>> but that doesn't work anymore either.
>>>
>>> Best solution I can give you is to use the Oanda source for currency data.
>>> They do limit you to 500 days of data but you can easily write a loop
>>> changing the "from" and "to" times and rbind the xts object together
>>> afterwards.
>>>
>>> INRUSD<- getSymbols('INR/USD', src='oanda', auto.assign = FALSE)
>>>
>>>
>>> Regards,
>>>
>>> Wolfgang Wu
>>>
>>>
>>>
>>>
>>> ----- Urspr?ngliche Message -----
>>> Von: Ashim Kapoor<ashimkapoor at gmail.com>
>>> An: r-sig-finance at r-project.org
>>> Cc:
>>> Gesendet: 8:32 Donnerstag, 22.September 2011
>>> Betreff: [R-SIG-Finance] Currency data from GOOGLE/Yahoo finance.
>>>
>>> Dear R-helpers,
>>>
>>> I am trying to use getSymbols to download INR/USD data from yahoo or
>>> google
>>> finance. In each case I 1st list the website and then the R error which I
>>> get on trying to download the symbol. Could someone please tell me where I
>>> am wrong?
>>>
>>> http://www.google.com/finance?**q=inrusd<http://www.google.com/finance?q=inrusd>
>>>
>>>   getSymbols("inrusd",src="**google")
>>>>
>>> Error in download.file(paste(google.**URL, "q=", Symbols.name,
>>> "&startdate=",
>>> :
>>>    cannot open URL '
>>> http://finance.google.com/**finance/historical?q=inrusd&**
>>> startdate=Jan+01,+2007&**enddate=Sep+22,+2011&output=**csv<http://finance.google.com/finance/historical?q=inrusd&startdate=Jan+01,+2007&enddate=Sep+22,+2011&output=csv>
>>> '
>>> In addition: Warning message:
>>> In download.file(paste(google.**URL, "q=", Symbols.name, "&startdate=",
>>>   :
>>>    cannot open: HTTP status was '400 Bad Request'
>>>
>>> http://in.finance.yahoo.com/q?**s=USDINR%3DX&ql=1<http://in.finance.yahoo.com/q?s=USDINR%3DX&ql=1>
>>>
>>>   getSymbols("USDINR=X",src="**yahoo")
>>>>
>>> Error in download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,
>>> :
>>>    cannot open URL '
>>> http://chart.yahoo.com/table.**csv?s=USDINR=X&a=0&b=01&c=**
>>> 2007&d=8&e=22&f=2011&g=d&q=q&**y=0&z=USDINR=X&x=.csv<http://chart.yahoo.com/table.csv?s=USDINR=X&a=0&b=01&c=2007&d=8&e=22&f=2011&g=d&q=q&y=0&z=USDINR=X&x=.csv>
>>> '
>>> In addition: Warning message:
>>> In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
>>>    unable to resolve 'chart.yahoo.com'
>>>
>>> Best Regards,
>>> Ashim
>>>
>>>      [[alternative HTML version deleted]]
>>>
>>> ______________________________**_________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/**listinfo/r-sig-finance<https://stat.ethz.ch/mailman/listinfo/r-sig-finance>
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>>>
>>> ______________________________**_________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/**listinfo/r-sig-finance<https://stat.ethz.ch/mailman/listinfo/r-sig-finance>
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>>>
>> --
>> Enrico Schumann
>> Lucerne, Switzerland
>> http://nmof.net/
>>
>

-- 
Enrico Schumann
Lucerne, Switzerland
http://nmof.net/


From enricoschumann at yahoo.de  Thu Sep 22 11:58:48 2011
From: enricoschumann at yahoo.de (Enrico Schumann)
Date: Thu, 22 Sep 2011 11:58:48 +0200
Subject: [R-SIG-Finance] Currency data from GOOGLE/Yahoo finance.
In-Reply-To: <4E7B04DD.3090106@yahoo.de>
References: <CAC8=1erQVo1uTymvBOuoQkjBAmgGGDrH85jHC09jNLBo9FinwQ@mail.gmail.com>
	<1316680953.83802.YahooMailNeo@web29609.mail.ird.yahoo.com>
	<4E7AFCF3.8080909@yahoo.de>
	<CAC8=1eox0DP7WxOob2a9ho2pYCpSUAKW=8TBqyTk8OOn2G0KMg@mail.gmail.com>
	<4E7B04DD.3090106@yahoo.de>
Message-ID: <4E7B06D8.3080208@yahoo.de>

hm, the last words were actually "check on finance.yahoo.com ;)" but 
they have been cut away.

Am 22.09.2011 11:50, schrieb Enrico Schumann:
>
> It seems a convention that if the rate is USDCCY, you get it from Yahoo
> with CCY=X. At least I have had this with JPY=X, GBP=X. But I am not
> sure how consistent that is. The simple "trick" is to directly check on
>
>
>
> Am 22.09.2011 11:40, schrieb Ashim Kapoor:
>> Dear Enrico,
>>
>> How / where did you discover that it should be "INR=X" instead of the
>> symbol
>> "USDINR=X"
>>
>> Many thanks,
>> Ashim
>>
>> On Thu, Sep 22, 2011 at 2:46 PM, Enrico
>> Schumann<enricoschumann at yahoo.de>wrote:
>>
>>>
>>> Try this:
>>>
>>> require("quantmod")
>>> INRUSD<- getSymbols("INR=X",src="yahoo"**, auto.assign = FALSE)
>>>
>>>
>>> Regards,
>>> Enrico
>>>
>>> Am 22.09.2011 10:42, schrieb Wolfgang Wu:
>>>
>>> Ashim,
>>>>
>>>> Unfortunately I couldn't get any data from Yahoo or Google either. I
>>>> thought you had to do something like
>>>> getSymbols("CURRENCY:INRUSD",**src="google"),
>>>> but that doesn't work anymore either.
>>>>
>>>> Best solution I can give you is to use the Oanda source for currency
>>>> data.
>>>> They do limit you to 500 days of data but you can easily write a loop
>>>> changing the "from" and "to" times and rbind the xts object together
>>>> afterwards.
>>>>
>>>> INRUSD<- getSymbols('INR/USD', src='oanda', auto.assign = FALSE)
>>>>
>>>>
>>>> Regards,
>>>>
>>>> Wolfgang Wu
>>>>
>>>>
>>>>
>>>>
>>>> ----- Urspr?ngliche Message -----
>>>> Von: Ashim Kapoor<ashimkapoor at gmail.com>
>>>> An: r-sig-finance at r-project.org
>>>> Cc:
>>>> Gesendet: 8:32 Donnerstag, 22.September 2011
>>>> Betreff: [R-SIG-Finance] Currency data from GOOGLE/Yahoo finance.
>>>>
>>>> Dear R-helpers,
>>>>
>>>> I am trying to use getSymbols to download INR/USD data from yahoo or
>>>> google
>>>> finance. In each case I 1st list the website and then the R error
>>>> which I
>>>> get on trying to download the symbol. Could someone please tell me
>>>> where I
>>>> am wrong?
>>>>
>>>> http://www.google.com/finance?**q=inrusd<http://www.google.com/finance?q=inrusd>
>>>>
>>>>
>>>> getSymbols("inrusd",src="**google")
>>>>>
>>>> Error in download.file(paste(google.**URL, "q=", Symbols.name,
>>>> "&startdate=",
>>>> :
>>>> cannot open URL '
>>>> http://finance.google.com/**finance/historical?q=inrusd&**
>>>> startdate=Jan+01,+2007&**enddate=Sep+22,+2011&output=**csv<http://finance.google.com/finance/historical?q=inrusd&startdate=Jan+01,+2007&enddate=Sep+22,+2011&output=csv>
>>>>
>>>> '
>>>> In addition: Warning message:
>>>> In download.file(paste(google.**URL, "q=", Symbols.name, "&startdate=",
>>>> :
>>>> cannot open: HTTP status was '400 Bad Request'
>>>>
>>>> http://in.finance.yahoo.com/q?**s=USDINR%3DX&ql=1<http://in.finance.yahoo.com/q?s=USDINR%3DX&ql=1>
>>>>
>>>>
>>>> getSymbols("USDINR=X",src="**yahoo")
>>>>>
>>>> Error in download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=",
>>>> from.m,
>>>> :
>>>> cannot open URL '
>>>> http://chart.yahoo.com/table.**csv?s=USDINR=X&a=0&b=01&c=**
>>>> 2007&d=8&e=22&f=2011&g=d&q=q&**y=0&z=USDINR=X&x=.csv<http://chart.yahoo.com/table.csv?s=USDINR=X&a=0&b=01&c=2007&d=8&e=22&f=2011&g=d&q=q&y=0&z=USDINR=X&x=.csv>
>>>>
>>>> '
>>>> In addition: Warning message:
>>>> In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m, :
>>>> unable to resolve 'chart.yahoo.com'
>>>>
>>>> Best Regards,
>>>> Ashim
>>>>
>>>> [[alternative HTML version deleted]]
>>>>
>>>> ______________________________**_________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/**listinfo/r-sig-finance<https://stat.ethz.ch/mailman/listinfo/r-sig-finance>
>>>>
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions
>>>> should go.
>>>>
>>>>
>>>> ______________________________**_________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/**listinfo/r-sig-finance<https://stat.ethz.ch/mailman/listinfo/r-sig-finance>
>>>>
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions
>>>> should go.
>>>>
>>>>
>>> --
>>> Enrico Schumann
>>> Lucerne, Switzerland
>>> http://nmof.net/
>>>
>>
>

-- 
Enrico Schumann
Lucerne, Switzerland
http://nmof.net/


From scherrzo at rambler.ru  Thu Sep 22 14:48:05 2011
From: scherrzo at rambler.ru (Artem Simonov)
Date: Thu, 22 Sep 2011 16:48:05 +0400
Subject: [R-SIG-Finance] Problem with RBloomberg and xts.
Message-ID: <350584120.1316695685.102388488.37566@mperl101.rambler.ru>

Dear friends!

I'm trying to get some time series with RBloomberg and then merge them
using merge.xts function

the code is the following:

#install.packages(c("RBloomberg","xts"))
library(RBloomberg)
library(xts)
blpConnect()
symbol1<-"OGZD LI Equity"
symbol2<-"LKOD LI Equity"
s<-as.chron("2011-01-10")
e<-as.chron("2011-07-12")
ts1 <- blpGetData(conn, symbol1, "PX_LAST",
start=s,end=e)
ts2<- blpGetData(conn, symbol2, "PX_LAST",
start=s,end=e)

a_ts1<-index(ts1)
b_ts1<-as.double(ts1)
c_ts1<-as.Date(a_ts1)
m1_ts1<-matrix(b_ts1)
aa1_ts1<-as.POSIXct(c_ts1)
a11_ts1<-xts(m1_ts1,aa1_ts1)

a_ts2<-index(ts2)
b_ts2<-as.double(ts2)
c_ts2<-as.Date(a_ts2)
m1_ts2<-matrix(b_ts2)
aa1_ts2<-as.POSIXct(c_ts2)
a11_ts2<-xts(m1_ts2,aa1_ts2)

e1<-merge.xts(a11_ts1,a11_ts2,method="inner")

I've got the following warning messages:

Warning messages:
1: In merge.xts(a11_ts1, a11_ts2, method = "inner") :
  NAs introduced by coercion
2: In merge.xts(a11_ts1, a11_ts2, method = "inner") :
  NAs introduced by coercion

Could you please tell me what I am doing wrong or probably a shorter way
to merge two or more time series, downloaded with RBloomberg and which
may have different number of points?

Thank you in advance!

Kind regards,
Art Simonov,
London.


From john.laing at gmail.com  Thu Sep 22 15:35:35 2011
From: john.laing at gmail.com (John Laing)
Date: Thu, 22 Sep 2011 09:35:35 -0400
Subject: [R-SIG-Finance] Problem with RBloomberg and xts.
In-Reply-To: <350584120.1316695685.102388488.37566@mperl101.rambler.ru>
References: <350584120.1316695685.102388488.37566@mperl101.rambler.ru>
Message-ID: <CAA3Wa=sRiKKWQGVZcpbR7XMrrp3RburcD7rx_u791QV4iq10PQ@mail.gmail.com>

Art,

The version of RBloomberg on CRAN (and therefore the version you're
using) is very old. Please do

install.packages("RBloomberg", repos = "r.findata.org")

for the most recent version.

Upgrading should help, but if you're still having issues after that
please let us know.

John

On Thu, Sep 22, 2011 at 8:48 AM, Artem Simonov <scherrzo at rambler.ru> wrote:
> Dear friends!
>
> I'm trying to get some time series with RBloomberg and then merge them
> using merge.xts function
>
> the code is the following:
>
> #install.packages(c("RBloomberg","xts"))
> library(RBloomberg)
> library(xts)
> blpConnect()
> symbol1<-"OGZD LI Equity"
> symbol2<-"LKOD LI Equity"
> s<-as.chron("2011-01-10")
> e<-as.chron("2011-07-12")
> ts1 <- blpGetData(conn, symbol1, "PX_LAST",
> start=s,end=e)
> ts2<- blpGetData(conn, symbol2, "PX_LAST",
> start=s,end=e)
>
> a_ts1<-index(ts1)
> b_ts1<-as.double(ts1)
> c_ts1<-as.Date(a_ts1)
> m1_ts1<-matrix(b_ts1)
> aa1_ts1<-as.POSIXct(c_ts1)
> a11_ts1<-xts(m1_ts1,aa1_ts1)
>
> a_ts2<-index(ts2)
> b_ts2<-as.double(ts2)
> c_ts2<-as.Date(a_ts2)
> m1_ts2<-matrix(b_ts2)
> aa1_ts2<-as.POSIXct(c_ts2)
> a11_ts2<-xts(m1_ts2,aa1_ts2)
>
> e1<-merge.xts(a11_ts1,a11_ts2,method="inner")
>
> I've got the following warning messages:
>
> Warning messages:
> 1: In merge.xts(a11_ts1, a11_ts2, method = "inner") :
> ?NAs introduced by coercion
> 2: In merge.xts(a11_ts1, a11_ts2, method = "inner") :
> ?NAs introduced by coercion
>
> Could you please tell me what I am doing wrong or probably a shorter way
> to merge two or more time series, downloaded with RBloomberg and which
> may have different number of points?
>
> Thank you in advance!
>
> Kind regards,
> Art Simonov,
> London.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


From john.laing at gmail.com  Thu Sep 22 15:36:47 2011
From: john.laing at gmail.com (John Laing)
Date: Thu, 22 Sep 2011 09:36:47 -0400
Subject: [R-SIG-Finance] Problem with RBloomberg and xts.
In-Reply-To: <CAA3Wa=sRiKKWQGVZcpbR7XMrrp3RburcD7rx_u791QV4iq10PQ@mail.gmail.com>
References: <350584120.1316695685.102388488.37566@mperl101.rambler.ru>
	<CAA3Wa=sRiKKWQGVZcpbR7XMrrp3RburcD7rx_u791QV4iq10PQ@mail.gmail.com>
Message-ID: <CAA3Wa=vgKMAiOOWa3qv7A=+d3QLNCM3=hATrnDjo=aXkfoFdzQ@mail.gmail.com>

Sorry, that should be:
install.packages("RBloomberg",repos="http://r.findata.org/")

On Thu, Sep 22, 2011 at 9:35 AM, John Laing <john.laing at gmail.com> wrote:
> Art,
>
> The version of RBloomberg on CRAN (and therefore the version you're
> using) is very old. Please do
>
> install.packages("RBloomberg", repos = "r.findata.org")
>
> for the most recent version.
>
> Upgrading should help, but if you're still having issues after that
> please let us know.
>
> John
>
> On Thu, Sep 22, 2011 at 8:48 AM, Artem Simonov <scherrzo at rambler.ru> wrote:
>> Dear friends!
>>
>> I'm trying to get some time series with RBloomberg and then merge them
>> using merge.xts function
>>
>> the code is the following:
>>
>> #install.packages(c("RBloomberg","xts"))
>> library(RBloomberg)
>> library(xts)
>> blpConnect()
>> symbol1<-"OGZD LI Equity"
>> symbol2<-"LKOD LI Equity"
>> s<-as.chron("2011-01-10")
>> e<-as.chron("2011-07-12")
>> ts1 <- blpGetData(conn, symbol1, "PX_LAST",
>> start=s,end=e)
>> ts2<- blpGetData(conn, symbol2, "PX_LAST",
>> start=s,end=e)
>>
>> a_ts1<-index(ts1)
>> b_ts1<-as.double(ts1)
>> c_ts1<-as.Date(a_ts1)
>> m1_ts1<-matrix(b_ts1)
>> aa1_ts1<-as.POSIXct(c_ts1)
>> a11_ts1<-xts(m1_ts1,aa1_ts1)
>>
>> a_ts2<-index(ts2)
>> b_ts2<-as.double(ts2)
>> c_ts2<-as.Date(a_ts2)
>> m1_ts2<-matrix(b_ts2)
>> aa1_ts2<-as.POSIXct(c_ts2)
>> a11_ts2<-xts(m1_ts2,aa1_ts2)
>>
>> e1<-merge.xts(a11_ts1,a11_ts2,method="inner")
>>
>> I've got the following warning messages:
>>
>> Warning messages:
>> 1: In merge.xts(a11_ts1, a11_ts2, method = "inner") :
>> ?NAs introduced by coercion
>> 2: In merge.xts(a11_ts1, a11_ts2, method = "inner") :
>> ?NAs introduced by coercion
>>
>> Could you please tell me what I am doing wrong or probably a shorter way
>> to merge two or more time series, downloaded with RBloomberg and which
>> may have different number of points?
>>
>> Thank you in advance!
>>
>> Kind regards,
>> Art Simonov,
>> London.
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>


From cidiel at yahoo.com  Thu Sep 22 15:37:43 2011
From: cidiel at yahoo.com (Brian Leidich)
Date: Thu, 22 Sep 2011 06:37:43 -0700 (PDT)
Subject: [R-SIG-Finance] Problem with RBloomberg and xts.
In-Reply-To: <350584120.1316695685.102388488.37566@mperl101.rambler.ru>
References: <350584120.1316695685.102388488.37566@mperl101.rambler.ru>
Message-ID: <1316698663.23281.YahooMailNeo@web162012.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110922/da54b754/attachment.pl>

From David.Reiner at xrtrading.com  Thu Sep 22 16:22:34 2011
From: David.Reiner at xrtrading.com (David Reiner)
Date: Thu, 22 Sep 2011 09:22:34 -0500
Subject: [R-SIG-Finance] RBloomberg connection options
Message-ID: <9DE405308A6AA24AA794B76282C6C00F0A069BEEFA@HQ-POST1>

Thanks to Ana and John for this great package!

I am intrigued by the options shown in one example, but clueless as to how to take advantage of them.
How do we set useUTCTime to FALSE ?
Here's the example that shows there is such an option:

> library(RBloomberg)
> conn <- blpConnect()
> conn$BOOLEAN_OPTION_NAMES
 [1] "useUTCTime"                "returnRelativeDate"        "adjustmentNormal"          "adjustmentAbnormal"
 [5] "adjustmentSplit"           "adjustmentFollowDPDF"      "returnEids"                "includeConditionCodes"
 [9] "includeNonPlottableEvents" "includeExchangeCodes"

I tried conn$ useUTCTime and conn@ useUTCTime, and
conn <- blpConnect(useUTCTime=FALSE)
but none of these make sense to the package.

Thanks for the help,
David L. Reiner, Ph.D.
Head Quant
XR Trading LLC
550 West Jackson Boulevard, Suite 1000
Chicago, IL 60661-5704
(312) 244-4610 direct
(312) 244-4500 main
David.Reiner at xrtrading.com



This e-mail and any materials attached hereto, including, without limitation, all content hereof and thereof (collectively, "XR Content") are confidential and proprietary to XR Trading, LLC ("XR") and/or its affiliates, and are protected by intellectual property laws.  Without the prior written consent of XR, the XR Content may not (i) be disclosed to any third party or (ii) be reproduced or otherwise used by anyone other than current employees of XR or its affiliates, on behalf of XR or its affiliates.

THE XR CONTENT IS PROVIDED AS IS, WITHOUT REPRESENTATIONS OR WARRANTIES OF ANY KIND.  TO THE MAXIMUM EXTENT PERMISSIBLE UNDER APPLICABLE LAW, XR HEREBY DISCLAIMS ANY AND ALL WARRANTIES, EXPRESS AND IMPLIED, RELATING TO THE XR CONTENT, AND NEITHER XR NOR ANY OF ITS AFFILIATES SHALL IN ANY EVENT BE LIABLE FOR ANY DAMAGES OF ANY NATURE WHATSOEVER, INCLUDING, BUT NOT LIMITED TO, DIRECT, INDIRECT, CONSEQUENTIAL, SPECIAL AND PUNITIVE DAMAGES, LOSS OF PROFITS AND TRADING LOSSES, RESULTING FROM ANY PERSON'S USE OR RELIANCE UPON, OR INABILITY TO USE, ANY XR CONTENT, EVEN IF XR IS ADVISED OF THE POSSIBILITY OF SUCH DAMAGES OR IF SUCH DAMAGES WERE FORESEEABLE.


From ezivot at u.washington.edu  Thu Sep 22 18:38:13 2011
From: ezivot at u.washington.edu (Eric Zivot)
Date: Thu, 22 Sep 2011 09:38:13 -0700
Subject: [R-SIG-Finance] problem with chart.TimeSeries()
Message-ID: <014601cc7946$05895660$109c0320$@washington.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110922/b053165d/attachment.pl>

From sunduck at gmail.com  Fri Sep 23 11:04:07 2011
From: sunduck at gmail.com (Alex Bird)
Date: Fri, 23 Sep 2011 13:04:07 +0400
Subject: [R-SIG-Finance] dcc-garch conditional moments in rmgarch (rgarch)
	package
Message-ID: <CAJ3qPLAOCzr6yEoO7bqsxAo_9SgypNjp7jKEknsfjSdcwxd3FA@mail.gmail.com>

Hi there!

  Does anyone know a simple way to estimate the 3rd and 4th
conditional moments based on dcc-garch model from rmgarch package
(previously known as rgarch)?

Thanks in advance!

Kind regards,
Alex


From costas.vorlow at gmail.com  Fri Sep 23 11:50:28 2011
From: costas.vorlow at gmail.com (Costas Vorlow)
Date: Fri, 23 Sep 2011 12:50:28 +0300
Subject: [R-SIG-Finance] Open to Close to Open data transformation (quantmod,
 xts and possibly zoo)
Message-ID: <4E7C5664.4000607@gmail.com>

Hello,

I want to put in order (preferably as a zoo or xts object with a 
suitable timestamp)
the open anc closing prices of an (say) index downloaded from YAHOO finance:

require(quantmod)
getSymbols('^GSPC',from='1990-01-01')

medata<- tail((GSPC),400)
opens<-Op(medata)
closes<-Cl(medata)

i.e., I want  asingle sequence of  1095.89,    1105.24 , 1101.24 ,   
1102.94, and so on ... preferably with a timestamp (morning - evening of 
same day as for daily prices zoo does not like the same date in two 
consecutive prices...

 > head(merge(opens,closes))
            GSPC.Open GSPC.Close
2010-02-24   1095.89    1105.24
2010-02-25   1101.24    1102.94
2010-02-26   1103.10    1104.49
2010-03-01   1105.36    1115.71
2010-03-02   1117.01    1118.31
2010-03-03   1119.36    1118.79
 >
 >
Probably I could use the OpCl in quantmod and caclulate the Cl price 
from Op, though Is there any easy way using some implicit zoo/xts 
function for this? I have problems in puting the timestamps in the xts 
vobject.

Thanks,
Costas


From brian at braverock.com  Fri Sep 23 12:09:38 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 23 Sep 2011 05:09:38 -0500
Subject: [R-SIG-Finance] problem with chart.TimeSeries()
In-Reply-To: <014601cc7946$05895660$109c0320$@washington.edu>
References: <014601cc7946$05895660$109c0320$@washington.edu>
Message-ID: <1316772578.4192.158.camel@brian-desktop>

On Thu, 2011-09-22 at 09:38 -0700, Eric Zivot wrote:
> I think there is a problem with the yearmon class in zoo when running
> R 2.13 and higher. For a class project, I wanted students to make a
> "growth of a $1" plot. Here is some sample code that didn't work in R
> 2.13.1 (works in R 2.12.2, however) 

This works for me in R 2.13.1:

######

require(PerformanceAnalytics)
require(quantmod)

getSymbols('vfinx',from="2006-05-01",to="2011-05-30")

head(VFINX)

ReturnsSimple.z = Return.calculate( 
    prices= VFINX$VFINX.Adjusted ,
    method='simple'
)

chart.CumReturns(
    ReturnsSimple.z,
    wealth.index=TRUE,
    legend.loc='topleft',
    lwd=2,main='Growth of $1'
)

#######

Make sure you have the latest version of zoo/xts, there was some
ugliness lately in as.Date between zoo/xts and R-base.

Also, you'll note that my example uses the newer getSymbols rather than
get.hist.quote, and returns an xts object directly, avoiding one
conversion step, so skipping your time()->Date() index conversion
entirely.

Regards,

  - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From arsanalytica at gmail.com  Fri Sep 23 13:51:34 2011
From: arsanalytica at gmail.com (Dan Potter)
Date: Fri, 23 Sep 2011 07:51:34 -0400
Subject: [R-SIG-Finance] xts NA date for
Message-ID: <CAGuQEVi73dMA=JS6m3ZWeCd9u1fgBAxvHKC=0RfQyy5McXmb9A@mail.gmail.com>

Hello All,
I am new to R and having an issue with xts when I try and used it with
certain dates and times in 1987.

Example

> # This date and time works
> xts(1, order.by = strptime("04/05/87 12:00",format="%m/%d/%y %H:%M"))
[,1]
1987-04-05 12:00:00 1

# This date and time do not work
> xts(1, order.by = strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
[,1]
<NA> 1

I don't think the issue is with strptime since it seems to work fine
on the offending date and time, i.e.
> strptime("04/05/87 02:00",format="%m/%d/%y %H:%M")
[1] "1987-04-05 02:00:00"

Any suggestion or work arounds would be appreciated.

Thanks,
Dan


From wobwu22 at yahoo.de  Fri Sep 23 14:15:22 2011
From: wobwu22 at yahoo.de (Wolfgang Wu)
Date: Fri, 23 Sep 2011 13:15:22 +0100 (BST)
Subject: [R-SIG-Finance] xts NA date for
In-Reply-To: <CAGuQEVi73dMA=JS6m3ZWeCd9u1fgBAxvHKC=0RfQyy5McXmb9A@mail.gmail.com>
References: <CAGuQEVi73dMA=JS6m3ZWeCd9u1fgBAxvHKC=0RfQyy5McXmb9A@mail.gmail.com>
Message-ID: <1316780122.34063.YahooMailNeo@web29613.mail.ird.yahoo.com>

Hmmm works fine for me.

xts(1, order.by = strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))

[,1]
1987-04-05 02:00:00 ? ?1

Maybe an old version of xts? I am using xts version 0.8-0. (you can check that with?sessionInfo().)

Regards,
?
Wolfgang Wu




----- Urspr?ngliche Message -----
Von: Dan Potter <arsanalytica at gmail.com>
An: r-sig-finance at r-project.org
Cc: 
Gesendet: 12:51 Freitag, 23.September 2011 
Betreff: [R-SIG-Finance] xts NA date for

Hello All,
I am new to R and having an issue with xts when I try and used it with
certain dates and times in 1987.

Example

> # This date and time works
> xts(1, order.by = strptime("04/05/87 12:00",format="%m/%d/%y %H:%M"))
[,1]
1987-04-05 12:00:00 1

# This date and time do not work
> xts(1, order.by = strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
[,1]
<NA> 1

I don't think the issue is with strptime since it seems to work fine
on the offending date and time, i.e.
> strptime("04/05/87 02:00",format="%m/%d/%y %H:%M")
[1] "1987-04-05 02:00:00"

Any suggestion or work arounds would be appreciated.

Thanks,
Dan

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.



From arsanalytica at gmail.com  Fri Sep 23 14:33:07 2011
From: arsanalytica at gmail.com (Dan Potter)
Date: Fri, 23 Sep 2011 08:33:07 -0400
Subject: [R-SIG-Finance] xts NA date for
In-Reply-To: <1316780122.34063.YahooMailNeo@web29613.mail.ird.yahoo.com>
References: <CAGuQEVi73dMA=JS6m3ZWeCd9u1fgBAxvHKC=0RfQyy5McXmb9A@mail.gmail.com>
	<1316780122.34063.YahooMailNeo@web29613.mail.ird.yahoo.com>
Message-ID: <CAGuQEVh2_gkgxCCpM_hKt_LnjnyMO_8HqMGjPLAzMhaJXK_1hA@mail.gmail.com>

Thank you Wolfgang. ?On my machine sessionInfo shows I am using xts
version 0.8-2 -
I think it is the latest one, see
http://cran.r-project.org/web/packages/xts/index.html
Maybe someone can confirm correct operation in 0.8-2.  Could this be a
Revo/base R version issue?

> sessionInfo()
R version 2.12.2 (2011-02-25)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
States.1252    LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                           LC_TIME=English_United
States.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] dplR_1.4.7       xts_0.8-2        zoo_1.7-2        Revobase_4.3.0
 RevoMods_4.3.0   RevoScaleR_1.2-0 lattice_0.19-23


On Fri, Sep 23, 2011 at 8:15 AM, Wolfgang Wu <wobwu22 at yahoo.de> wrote:
>
> Hmmm works fine for me.
>
> xts(1, order.by = strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
>
> [,1]
> 1987-04-05 02:00:00 ? ?1
>
> Maybe an old version of xts? I am using xts version 0.8-0. (you can check that with?sessionInfo().)
>
> Regards,
>
> Wolfgang Wu
>
>
>
>
> ----- Urspr?ngliche Message -----
> Von: Dan Potter <arsanalytica at gmail.com>
> An: r-sig-finance at r-project.org
> Cc:
> Gesendet: 12:51 Freitag, 23.September 2011
> Betreff: [R-SIG-Finance] xts NA date for
>
> Hello All,
> I am new to R and having an issue with xts when I try and used it with
> certain dates and times in 1987.
>
> Example
>
> > # This date and time works
> > xts(1, order.by = strptime("04/05/87 12:00",format="%m/%d/%y %H:%M"))
> [,1]
> 1987-04-05 12:00:00 1
>
> # This date and time do not work
> > xts(1, order.by = strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
> [,1]
> <NA> 1
>
> I don't think the issue is with strptime since it seems to work fine
> on the offending date and time, i.e.
> > strptime("04/05/87 02:00",format="%m/%d/%y %H:%M")
> [1] "1987-04-05 02:00:00"
>
> Any suggestion or work arounds would be appreciated.
>
> Thanks,
> Dan
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From ggrothendieck at gmail.com  Fri Sep 23 14:33:56 2011
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 23 Sep 2011 08:33:56 -0400
Subject: [R-SIG-Finance] problem with chart.TimeSeries()
In-Reply-To: <014601cc7946$05895660$109c0320$@washington.edu>
References: <014601cc7946$05895660$109c0320$@washington.edu>
Message-ID: <CAP01uRkdwBun6imjurd5u2SE+73Dp+U4SymRiErsGP8XT7wOtA@mail.gmail.com>

On Thu, Sep 22, 2011 at 12:38 PM, Eric Zivot <ezivot at u.washington.edu> wrote:
> I think there is a problem with the yearmon class in zoo when running R 2.13
> and higher. For a class project, I wanted students to make a "growth of a
> $1" plot. Here is some sample code that didn't work in R 2.13.1 (works in R
> 2.12.2, however)
>
>
>
>> options(digits=4, width=70)
>
>> # load packages
>
>> library("PerformanceAnalytics")
>
>> library("tseries")
>
>> start.date = "2006-05-01"
>
>> end.date = "2011-05-30"
>
>> vfinx.prices = get.hist.quote(instrument="vfinx", start=start.date,
>
> + ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?end=end.date, quote="AdjClose",
>
> + ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?provider="yahoo", origin="1970-01-01",
>
> + ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?compression="m", retclass="zoo")
>
> trying URL
> 'http://chart.yahoo.com/table.csv?s=vfinx&a=4&b=01&c=2006&d=4&e=30&f=2011&g=
> m&q=q&y=0&z=vfinx&x=.csv'
>
> Content type 'text/csv' length unknown
>
> opened URL
>
> downloaded 3007 bytes
>
>
>
> time series ends ? 2011-05-02
>
>> # change time indices to class yearmon, which is most appropriate for
> monthly data
>
>> index(vfinx.prices) = as.yearmon(index(vfinx.prices))
>
>> ReturnsCC.z = diff(log(vfinx.prices))
>
>> ReturnsSimple.z = exp(ReturnsCC.z) - 1
>
>> chart.CumReturns(ReturnsSimple.z, wealth.index=TRUE, legend.loc="topleft",
>
> + ? ? ? ? ? ? ? ? ?lwd=2, main="growth of $1")
>
> Error in as.Date.default(time(y)) :
>
> ?do not know how to convert 'time(y)' to class "Date"
>
>> traceback()
>
> 5: stop(gettextf("do not know how to convert '%s' to class \"Date\"",
>
> ? ? ? deparse(substitute(x))))
>
> 4: as.Date.default(time(y))
>
> 3: as.Date(time(y))
>
> 2: chart.TimeSeries(Return.cumulative, col = colorset, legend.loc =
> legend.loc,
>
> ? ? ? ...)
>
> 1: chart.CumReturns(ReturnsSimple.z, wealth.index = TRUE, legend.loc =
> "topleft",
>
> ? ? ? lwd = 2, main = "growth of $1")
>
>
>

I am able to reproduce this bug using zoo 1.7-4.  Its now fixed this
in the development version so you can either use the development
version of zoo (svn version 897 or later) or else just add this
statement to the above code for now:

source("http://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/zoo/R/yearmon.R?revision=897&root=zoo")

-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From gsee000 at gmail.com  Fri Sep 23 14:38:24 2011
From: gsee000 at gmail.com (G See)
Date: Fri, 23 Sep 2011 07:38:24 -0500
Subject: [R-SIG-Finance] xts NA date for
In-Reply-To: <CAGuQEVh2_gkgxCCpM_hKt_LnjnyMO_8HqMGjPLAzMhaJXK_1hA@mail.gmail.com>
References: <CAGuQEVi73dMA=JS6m3ZWeCd9u1fgBAxvHKC=0RfQyy5McXmb9A@mail.gmail.com>
	<1316780122.34063.YahooMailNeo@web29613.mail.ird.yahoo.com>
	<CAGuQEVh2_gkgxCCpM_hKt_LnjnyMO_8HqMGjPLAzMhaJXK_1hA@mail.gmail.com>
Message-ID: <CA+xi=qb1wbzs4C0mC+o4JJT1S4fWAQ4wg731m0Nv2eEjNQMS7w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110923/b84578e7/attachment.pl>

From jeffrey.ryan at lemnica.com  Fri Sep 23 14:44:37 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Fri, 23 Sep 2011 07:44:37 -0500
Subject: [R-SIG-Finance] xts NA date for
In-Reply-To: <CA+xi=qb1wbzs4C0mC+o4JJT1S4fWAQ4wg731m0Nv2eEjNQMS7w@mail.gmail.com>
References: <CAGuQEVi73dMA=JS6m3ZWeCd9u1fgBAxvHKC=0RfQyy5McXmb9A@mail.gmail.com>
	<1316780122.34063.YahooMailNeo@web29613.mail.ird.yahoo.com>
	<CAGuQEVh2_gkgxCCpM_hKt_LnjnyMO_8HqMGjPLAzMhaJXK_1hA@mail.gmail.com>
	<CA+xi=qb1wbzs4C0mC+o4JJT1S4fWAQ4wg731m0Nv2eEjNQMS7w@mail.gmail.com>
Message-ID: <CABDUZc-gGg6i2GhOMonntKYLGDUfbNrdASpSMNa=PbPr3anRTw@mail.gmail.com>

It is something within strptime and/or as.POSIXct.  Basically POSIXct
is causing some issue, somewhere.  In my TZ "America/Chicago" I see:

> strptime("04/05/87 2:00",format="%m/%d/%y %H:%M")
[1] "1987-04-05 02:00:00 CDT"
> as.POSIXct(strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
[1] "1987-04-05 01:00:00 CST"
> as.POSIXct("04/05/87 2:00",format="%m/%d/%y %H:%M")
[1] "1987-04-05 01:00:00 CST"

Looks like a strange DST issue in the underlying R code.  I'll
continue to investigate.

> sessionInfo()
R version 2.13.1 RC (2011-07-04 r56273)
Platform: x86_64-apple-darwin10.7.0 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] xts_0.8-3 zoo_1.7-2

loaded via a namespace (and not attached):
[1] grid_2.13.1     lattice_0.19-17

Jeff

On Fri, Sep 23, 2011 at 7:38 AM, G See <gsee000 at gmail.com> wrote:
> hmmm.
>
> I'm using xts_0.8-3 revision 602 on R-Forge, and it *almost* works for me,
> but the time is off by an hour
>
>> xts(1, order.by=strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
> ? ? ? ? ? ? ? ? ? ?[,1]
> 1987-04-05 01:00:00 ? ?1
>>
>
> -Garrett
>
> On Fri, Sep 23, 2011 at 7:33 AM, Dan Potter <arsanalytica at gmail.com> wrote:
>
>> Thank you Wolfgang. ?On my machine sessionInfo shows I am using xts
>> version 0.8-2 -
>> I think it is the latest one, see
>> http://cran.r-project.org/web/packages/xts/index.html
>> Maybe someone can confirm correct operation in 0.8-2. ?Could this be a
>> Revo/base R version issue?
>>
>> > sessionInfo()
>> R version 2.12.2 (2011-02-25)
>> Platform: i386-pc-mingw32/i386 (32-bit)
>>
>> locale:
>> [1] LC_COLLATE=English_United States.1252 ?LC_CTYPE=English_United
>> States.1252 ? ?LC_MONETARY=English_United States.1252
>> [4] LC_NUMERIC=C ? ? ? ? ? ? ? ? ? ? ? ? ? LC_TIME=English_United
>> States.1252
>>
>> attached base packages:
>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>>
>> other attached packages:
>> [1] dplR_1.4.7 ? ? ? xts_0.8-2 ? ? ? ?zoo_1.7-2 ? ? ? ?Revobase_4.3.0
>> ?RevoMods_4.3.0 ? RevoScaleR_1.2-0 lattice_0.19-23
>>
>>
>> On Fri, Sep 23, 2011 at 8:15 AM, Wolfgang Wu <wobwu22 at yahoo.de> wrote:
>> >
>> > Hmmm works fine for me.
>> >
>> > xts(1, order.by = strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
>> >
>> > [,1]
>> > 1987-04-05 02:00:00 ? ?1
>> >
>> > Maybe an old version of xts? I am using xts version 0.8-0. (you can check
>> that with sessionInfo().)
>> >
>> > Regards,
>> >
>> > Wolfgang Wu
>> >
>> >
>> >
>> >
>> > ----- Urspr?ngliche Message -----
>> > Von: Dan Potter <arsanalytica at gmail.com>
>> > An: r-sig-finance at r-project.org
>> > Cc:
>> > Gesendet: 12:51 Freitag, 23.September 2011
>> > Betreff: [R-SIG-Finance] xts NA date for
>> >
>> > Hello All,
>> > I am new to R and having an issue with xts when I try and used it with
>> > certain dates and times in 1987.
>> >
>> > Example
>> >
>> > > # This date and time works
>> > > xts(1, order.by = strptime("04/05/87 12:00",format="%m/%d/%y %H:%M"))
>> > [,1]
>> > 1987-04-05 12:00:00 1
>> >
>> > # This date and time do not work
>> > > xts(1, order.by = strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
>> > [,1]
>> > <NA> 1
>> >
>> > I don't think the issue is with strptime since it seems to work fine
>> > on the offending date and time, i.e.
>> > > strptime("04/05/87 02:00",format="%m/%d/%y %H:%M")
>> > [1] "1987-04-05 02:00:00"
>> >
>> > Any suggestion or work arounds would be appreciated.
>> >
>> > Thanks,
>> > Dan
>> >
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions
>> should go.
>> >
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From josh.m.ulrich at gmail.com  Fri Sep 23 14:44:42 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Fri, 23 Sep 2011 07:44:42 -0500
Subject: [R-SIG-Finance] xts NA date for
In-Reply-To: <CA+xi=qb1wbzs4C0mC+o4JJT1S4fWAQ4wg731m0Nv2eEjNQMS7w@mail.gmail.com>
References: <CAGuQEVi73dMA=JS6m3ZWeCd9u1fgBAxvHKC=0RfQyy5McXmb9A@mail.gmail.com>
	<1316780122.34063.YahooMailNeo@web29613.mail.ird.yahoo.com>
	<CAGuQEVh2_gkgxCCpM_hKt_LnjnyMO_8HqMGjPLAzMhaJXK_1hA@mail.gmail.com>
	<CA+xi=qb1wbzs4C0mC+o4JJT1S4fWAQ4wg731m0Nv2eEjNQMS7w@mail.gmail.com>
Message-ID: <CAPPM_gTE0JVSjoXKyqTQ-5HUiZhtaTu=NcFuHnJm5AwrdqPgxw@mail.gmail.com>

Dan,

This is probably an issue with the start/end of daylight saving time
in your timezone.

Best,
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com



On Fri, Sep 23, 2011 at 7:38 AM, G See <gsee000 at gmail.com> wrote:
> hmmm.
>
> I'm using xts_0.8-3 revision 602 on R-Forge, and it *almost* works for me,
> but the time is off by an hour
>
>> xts(1, order.by=strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
> ? ? ? ? ? ? ? ? ? ?[,1]
> 1987-04-05 01:00:00 ? ?1
>>
>
> -Garrett
>
> On Fri, Sep 23, 2011 at 7:33 AM, Dan Potter <arsanalytica at gmail.com> wrote:
>
>> Thank you Wolfgang. ?On my machine sessionInfo shows I am using xts
>> version 0.8-2 -
>> I think it is the latest one, see
>> http://cran.r-project.org/web/packages/xts/index.html
>> Maybe someone can confirm correct operation in 0.8-2. ?Could this be a
>> Revo/base R version issue?
>>
>> > sessionInfo()
>> R version 2.12.2 (2011-02-25)
>> Platform: i386-pc-mingw32/i386 (32-bit)
>>
>> locale:
>> [1] LC_COLLATE=English_United States.1252 ?LC_CTYPE=English_United
>> States.1252 ? ?LC_MONETARY=English_United States.1252
>> [4] LC_NUMERIC=C ? ? ? ? ? ? ? ? ? ? ? ? ? LC_TIME=English_United
>> States.1252
>>
>> attached base packages:
>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>>
>> other attached packages:
>> [1] dplR_1.4.7 ? ? ? xts_0.8-2 ? ? ? ?zoo_1.7-2 ? ? ? ?Revobase_4.3.0
>> ?RevoMods_4.3.0 ? RevoScaleR_1.2-0 lattice_0.19-23
>>
>>
>> On Fri, Sep 23, 2011 at 8:15 AM, Wolfgang Wu <wobwu22 at yahoo.de> wrote:
>> >
>> > Hmmm works fine for me.
>> >
>> > xts(1, order.by = strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
>> >
>> > [,1]
>> > 1987-04-05 02:00:00 ? ?1
>> >
>> > Maybe an old version of xts? I am using xts version 0.8-0. (you can check
>> that with sessionInfo().)
>> >
>> > Regards,
>> >
>> > Wolfgang Wu
>> >
>> >
>> >
>> >
>> > ----- Urspr?ngliche Message -----
>> > Von: Dan Potter <arsanalytica at gmail.com>
>> > An: r-sig-finance at r-project.org
>> > Cc:
>> > Gesendet: 12:51 Freitag, 23.September 2011
>> > Betreff: [R-SIG-Finance] xts NA date for
>> >
>> > Hello All,
>> > I am new to R and having an issue with xts when I try and used it with
>> > certain dates and times in 1987.
>> >
>> > Example
>> >
>> > > # This date and time works
>> > > xts(1, order.by = strptime("04/05/87 12:00",format="%m/%d/%y %H:%M"))
>> > [,1]
>> > 1987-04-05 12:00:00 1
>> >
>> > # This date and time do not work
>> > > xts(1, order.by = strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
>> > [,1]
>> > <NA> 1
>> >
>> > I don't think the issue is with strptime since it seems to work fine
>> > on the offending date and time, i.e.
>> > > strptime("04/05/87 02:00",format="%m/%d/%y %H:%M")
>> > [1] "1987-04-05 02:00:00"
>> >
>> > Any suggestion or work arounds would be appreciated.
>> >
>> > Thanks,
>> > Dan
>> >
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions
>> should go.
>> >
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From jeffrey.ryan at lemnica.com  Fri Sep 23 15:02:18 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Fri, 23 Sep 2011 08:02:18 -0500
Subject: [R-SIG-Finance] xts NA date for
In-Reply-To: <CAPPM_gTE0JVSjoXKyqTQ-5HUiZhtaTu=NcFuHnJm5AwrdqPgxw@mail.gmail.com>
References: <CAGuQEVi73dMA=JS6m3ZWeCd9u1fgBAxvHKC=0RfQyy5McXmb9A@mail.gmail.com>
	<1316780122.34063.YahooMailNeo@web29613.mail.ird.yahoo.com>
	<CAGuQEVh2_gkgxCCpM_hKt_LnjnyMO_8HqMGjPLAzMhaJXK_1hA@mail.gmail.com>
	<CA+xi=qb1wbzs4C0mC+o4JJT1S4fWAQ4wg731m0Nv2eEjNQMS7w@mail.gmail.com>
	<CAPPM_gTE0JVSjoXKyqTQ-5HUiZhtaTu=NcFuHnJm5AwrdqPgxw@mail.gmail.com>
Message-ID: <CABDUZc-iji0WDgU57LiKz6pjBiYgMJJfxwcLZxP2F+GrjEA5ng@mail.gmail.com>

> strptime("04/05/87 2:00",format="%m/%d/%y %H:%M")
[1] "1987-04-05 02:00:00 CDT"

This time doesn't exists. It would be 1:00 or 3:00.

http://www.timeanddate.com/worldclock/clockchange.html?n=64&year=1987

It is too early for me to figure out the nuances of this logic, i.e.
what should it be doing when you pass in a time that doesn't exist in
your TZ.  For now though, that is clearly the heart of the issue.

Jeff

On Fri, Sep 23, 2011 at 7:44 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> Dan,
>
> This is probably an issue with the start/end of daylight saving time
> in your timezone.
>
> Best,
> --
> Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com
>
>
>
> On Fri, Sep 23, 2011 at 7:38 AM, G See <gsee000 at gmail.com> wrote:
>> hmmm.
>>
>> I'm using xts_0.8-3 revision 602 on R-Forge, and it *almost* works for me,
>> but the time is off by an hour
>>
>>> xts(1, order.by=strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
>> ? ? ? ? ? ? ? ? ? ?[,1]
>> 1987-04-05 01:00:00 ? ?1
>>>
>>
>> -Garrett
>>
>> On Fri, Sep 23, 2011 at 7:33 AM, Dan Potter <arsanalytica at gmail.com> wrote:
>>
>>> Thank you Wolfgang. ?On my machine sessionInfo shows I am using xts
>>> version 0.8-2 -
>>> I think it is the latest one, see
>>> http://cran.r-project.org/web/packages/xts/index.html
>>> Maybe someone can confirm correct operation in 0.8-2. ?Could this be a
>>> Revo/base R version issue?
>>>
>>> > sessionInfo()
>>> R version 2.12.2 (2011-02-25)
>>> Platform: i386-pc-mingw32/i386 (32-bit)
>>>
>>> locale:
>>> [1] LC_COLLATE=English_United States.1252 ?LC_CTYPE=English_United
>>> States.1252 ? ?LC_MONETARY=English_United States.1252
>>> [4] LC_NUMERIC=C ? ? ? ? ? ? ? ? ? ? ? ? ? LC_TIME=English_United
>>> States.1252
>>>
>>> attached base packages:
>>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>>>
>>> other attached packages:
>>> [1] dplR_1.4.7 ? ? ? xts_0.8-2 ? ? ? ?zoo_1.7-2 ? ? ? ?Revobase_4.3.0
>>> ?RevoMods_4.3.0 ? RevoScaleR_1.2-0 lattice_0.19-23
>>>
>>>
>>> On Fri, Sep 23, 2011 at 8:15 AM, Wolfgang Wu <wobwu22 at yahoo.de> wrote:
>>> >
>>> > Hmmm works fine for me.
>>> >
>>> > xts(1, order.by = strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
>>> >
>>> > [,1]
>>> > 1987-04-05 02:00:00 ? ?1
>>> >
>>> > Maybe an old version of xts? I am using xts version 0.8-0. (you can check
>>> that with sessionInfo().)
>>> >
>>> > Regards,
>>> >
>>> > Wolfgang Wu
>>> >
>>> >
>>> >
>>> >
>>> > ----- Urspr?ngliche Message -----
>>> > Von: Dan Potter <arsanalytica at gmail.com>
>>> > An: r-sig-finance at r-project.org
>>> > Cc:
>>> > Gesendet: 12:51 Freitag, 23.September 2011
>>> > Betreff: [R-SIG-Finance] xts NA date for
>>> >
>>> > Hello All,
>>> > I am new to R and having an issue with xts when I try and used it with
>>> > certain dates and times in 1987.
>>> >
>>> > Example
>>> >
>>> > > # This date and time works
>>> > > xts(1, order.by = strptime("04/05/87 12:00",format="%m/%d/%y %H:%M"))
>>> > [,1]
>>> > 1987-04-05 12:00:00 1
>>> >
>>> > # This date and time do not work
>>> > > xts(1, order.by = strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
>>> > [,1]
>>> > <NA> 1
>>> >
>>> > I don't think the issue is with strptime since it seems to work fine
>>> > on the offending date and time, i.e.
>>> > > strptime("04/05/87 02:00",format="%m/%d/%y %H:%M")
>>> > [1] "1987-04-05 02:00:00"
>>> >
>>> > Any suggestion or work arounds would be appreciated.
>>> >
>>> > Thanks,
>>> > Dan
>>> >
>>> > _______________________________________________
>>> > R-SIG-Finance at r-project.org mailing list
>>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> > -- Subscriber-posting only. If you want to post, subscribe first.
>>> > -- Also note that this is not the r-help list where general R questions
>>> should go.
>>> >
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>>
>> ? ? ? ?[[alternative HTML version deleted]]
>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From gsee000 at gmail.com  Fri Sep 23 15:25:20 2011
From: gsee000 at gmail.com (G See)
Date: Fri, 23 Sep 2011 08:25:20 -0500
Subject: [R-SIG-Finance] Open to Close to Open data transformation
 (quantmod, xts and possibly zoo)
In-Reply-To: <4E7C5664.4000607@gmail.com>
References: <4E7C5664.4000607@gmail.com>
Message-ID: <CA+xi=qat-2t6OViiz3Y-LrpMJsYq2f=E-wVRzL6E0ALPvwXCjw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110923/b541ae03/attachment.pl>

From michael.weylandt at gmail.com  Fri Sep 23 15:28:12 2011
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Fri, 23 Sep 2011 09:28:12 -0400
Subject: [R-SIG-Finance] Open to Close to Open data transformation
 (quantmod, xts and possibly zoo)
In-Reply-To: <4E7C5664.4000607@gmail.com>
References: <4E7C5664.4000607@gmail.com>
Message-ID: <CAAmySGP2MiW_vHSpZpyRRhP1PjyDojUKmq8iWff+D8in+mnKeQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110923/614d5fbf/attachment.pl>

From arsanalytica at gmail.com  Fri Sep 23 16:27:22 2011
From: arsanalytica at gmail.com (Dan Potter)
Date: Fri, 23 Sep 2011 10:27:22 -0400
Subject: [R-SIG-Finance] xts NA date for
In-Reply-To: <CABDUZc-iji0WDgU57LiKz6pjBiYgMJJfxwcLZxP2F+GrjEA5ng@mail.gmail.com>
References: <CAGuQEVi73dMA=JS6m3ZWeCd9u1fgBAxvHKC=0RfQyy5McXmb9A@mail.gmail.com>
	<1316780122.34063.YahooMailNeo@web29613.mail.ird.yahoo.com>
	<CAGuQEVh2_gkgxCCpM_hKt_LnjnyMO_8HqMGjPLAzMhaJXK_1hA@mail.gmail.com>
	<CA+xi=qb1wbzs4C0mC+o4JJT1S4fWAQ4wg731m0Nv2eEjNQMS7w@mail.gmail.com>
	<CAPPM_gTE0JVSjoXKyqTQ-5HUiZhtaTu=NcFuHnJm5AwrdqPgxw@mail.gmail.com>
	<CABDUZc-iji0WDgU57LiKz6pjBiYgMJJfxwcLZxP2F+GrjEA5ng@mail.gmail.com>
Message-ID: <CAGuQEVgAfBv7tNF3TNiPgQxDCaBGWsxHRUSoPKM1pKUhOqvogQ@mail.gmail.com>

Thank you Jeff and Josh, that was very helpful. ?Other systems I have
worked with haven't included embedded daylight savings magic. (And I'm
not sure I like it unless I can compute time differences and durations
correctly when using it.)

My data (and many datasets I have work with) are UTC stamped in order
to avoid daylight savings issues and allow a simple way for
contemporaneous comparison between them.? I assumed the default xts,
strptime, etc. time zone would be UTC and not my current timezone.

The following is a solution for my problem

> xts(1,strptime("4/5/87 2:00",format="%m/%d/%y %H:%M", tz="UTC"))
                    [,1]
1987-04-05 02:00:00    1
Warning message:
timezone of object (UTC) is different than current timezone ().

I wonder why my own calls to strptime with tz unspecified do not
include a timezone in their results, whereas Jeff's does, e.g.,
> Sys.timezone()
[1] "EDT"
> strptime("4/5/87 2:00",format="%m/%d/%y %H:%M")
[1] "1987-04-05 02:00:00"

Versus

 On Fri, Sep 23, 2011 at 9:02 AM, Jeffrey Ryan
<jeffrey.ryan at lemnica.com> wrote:
 >
 > > strptime("04/05/87 2:00",format="%m/%d/%y %H:%M")
 > [1] "1987-04-05 02:00:00 CDT"

Given these issues, it would be nice if the strptime, xts etc. time
and date print methods would always included the time zone.

Thanks Again,
Dan

On Fri, Sep 23, 2011 at 9:02 AM, Jeffrey Ryan <jeffrey.ryan at lemnica.com> wrote:
>
> > strptime("04/05/87 2:00",format="%m/%d/%y %H:%M")
> [1] "1987-04-05 02:00:00 CDT"
>
> This time doesn't exists. It would be 1:00 or 3:00.
>
> http://www.timeanddate.com/worldclock/clockchange.html?n=64&year=1987
>
> It is too early for me to figure out the nuances of this logic, i.e.
> what should it be doing when you pass in a time that doesn't exist in
> your TZ. ?For now though, that is clearly the heart of the issue.
>
> Jeff
>
> On Fri, Sep 23, 2011 at 7:44 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> > Dan,
> >
> > This is probably an issue with the start/end of daylight saving time
> > in your timezone.
> >
> > Best,
> > --
> > Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com
> >
> >
> >
> > On Fri, Sep 23, 2011 at 7:38 AM, G See <gsee000 at gmail.com> wrote:
> >> hmmm.
> >>
> >> I'm using xts_0.8-3 revision 602 on R-Forge, and it *almost* works for me,
> >> but the time is off by an hour
> >>
> >>> xts(1, order.by=strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
> >> ? ? ? ? ? ? ? ? ? ?[,1]
> >> 1987-04-05 01:00:00 ? ?1
> >>>
> >>
> >> -Garrett
> >>
> >> On Fri, Sep 23, 2011 at 7:33 AM, Dan Potter <arsanalytica at gmail.com> wrote:
> >>
> >>> Thank you Wolfgang. ?On my machine sessionInfo shows I am using xts
> >>> version 0.8-2 -
> >>> I think it is the latest one, see
> >>> http://cran.r-project.org/web/packages/xts/index.html
> >>> Maybe someone can confirm correct operation in 0.8-2. ?Could this be a
> >>> Revo/base R version issue?
> >>>
> >>> > sessionInfo()
> >>> R version 2.12.2 (2011-02-25)
> >>> Platform: i386-pc-mingw32/i386 (32-bit)
> >>>
> >>> locale:
> >>> [1] LC_COLLATE=English_United States.1252 ?LC_CTYPE=English_United
> >>> States.1252 ? ?LC_MONETARY=English_United States.1252
> >>> [4] LC_NUMERIC=C ? ? ? ? ? ? ? ? ? ? ? ? ? LC_TIME=English_United
> >>> States.1252
> >>>
> >>> attached base packages:
> >>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
> >>>
> >>> other attached packages:
> >>> [1] dplR_1.4.7 ? ? ? xts_0.8-2 ? ? ? ?zoo_1.7-2 ? ? ? ?Revobase_4.3.0
> >>> ?RevoMods_4.3.0 ? RevoScaleR_1.2-0 lattice_0.19-23
> >>>
> >>>
> >>> On Fri, Sep 23, 2011 at 8:15 AM, Wolfgang Wu <wobwu22 at yahoo.de> wrote:
> >>> >
> >>> > Hmmm works fine for me.
> >>> >
> >>> > xts(1, order.by = strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
> >>> >
> >>> > [,1]
> >>> > 1987-04-05 02:00:00 ? ?1
> >>> >
> >>> > Maybe an old version of xts? I am using xts version 0.8-0. (you can check
> >>> that with sessionInfo().)
> >>> >
> >>> > Regards,
> >>> >
> >>> > Wolfgang Wu
> >>> >
> >>> >
> >>> >
> >>> >
> >>> > ----- Urspr?ngliche Message -----
> >>> > Von: Dan Potter <arsanalytica at gmail.com>
> >>> > An: r-sig-finance at r-project.org
> >>> > Cc:
> >>> > Gesendet: 12:51 Freitag, 23.September 2011
> >>> > Betreff: [R-SIG-Finance] xts NA date for
> >>> >
> >>> > Hello All,
> >>> > I am new to R and having an issue with xts when I try and used it with
> >>> > certain dates and times in 1987.
> >>> >
> >>> > Example
> >>> >
> >>> > > # This date and time works
> >>> > > xts(1, order.by = strptime("04/05/87 12:00",format="%m/%d/%y %H:%M"))
> >>> > [,1]
> >>> > 1987-04-05 12:00:00 1
> >>> >
> >>> > # This date and time do not work
> >>> > > xts(1, order.by = strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
> >>> > [,1]
> >>> > <NA> 1
> >>> >
> >>> > I don't think the issue is with strptime since it seems to work fine
> >>> > on the offending date and time, i.e.
> >>> > > strptime("04/05/87 02:00",format="%m/%d/%y %H:%M")
> >>> > [1] "1987-04-05 02:00:00"
> >>> >
> >>> > Any suggestion or work arounds would be appreciated.
> >>> >
> >>> > Thanks,
> >>> > Dan
> >>> >
> >>> > _______________________________________________
> >>> > R-SIG-Finance at r-project.org mailing list
> >>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >>> > -- Subscriber-posting only. If you want to post, subscribe first.
> >>> > -- Also note that this is not the r-help list where general R questions
> >>> should go.
> >>> >
> >>>
> >>> _______________________________________________
> >>> R-SIG-Finance at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >>> -- Subscriber-posting only. If you want to post, subscribe first.
> >>> -- Also note that this is not the r-help list where general R questions
> >>> should go.
> >>>
> >>
> >> ? ? ? ?[[alternative HTML version deleted]]
> >>
> >>
> >> _______________________________________________
> >> R-SIG-Finance at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >> -- Subscriber-posting only. If you want to post, subscribe first.
> >> -- Also note that this is not the r-help list where general R questions should go.
> >>
> >
> > _______________________________________________
> > R-SIG-Finance at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R questions should go.
> >
>
>
>
> --
> Jeffrey Ryan
> jeffrey.ryan at lemnica.com
>
> www.lemnica.com
> www.esotericR.com


From brian at braverock.com  Fri Sep 23 16:35:35 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 23 Sep 2011 09:35:35 -0500
Subject: [R-SIG-Finance] xts NA date for
In-Reply-To: <CAGuQEVgAfBv7tNF3TNiPgQxDCaBGWsxHRUSoPKM1pKUhOqvogQ@mail.gmail.com>
References: <CAGuQEVi73dMA=JS6m3ZWeCd9u1fgBAxvHKC=0RfQyy5McXmb9A@mail.gmail.com>
	<1316780122.34063.YahooMailNeo@web29613.mail.ird.yahoo.com>
	<CAGuQEVh2_gkgxCCpM_hKt_LnjnyMO_8HqMGjPLAzMhaJXK_1hA@mail.gmail.com>
	<CA+xi=qb1wbzs4C0mC+o4JJT1S4fWAQ4wg731m0Nv2eEjNQMS7w@mail.gmail.com>
	<CAPPM_gTE0JVSjoXKyqTQ-5HUiZhtaTu=NcFuHnJm5AwrdqPgxw@mail.gmail.com>
	<CABDUZc-iji0WDgU57LiKz6pjBiYgMJJfxwcLZxP2F+GrjEA5ng@mail.gmail.com>
	<CAGuQEVgAfBv7tNF3TNiPgQxDCaBGWsxHRUSoPKM1pKUhOqvogQ@mail.gmail.com>
Message-ID: <1316788535.6600.31.camel@brian-rcg>

On Fri, 2011-09-23 at 10:27 -0400, Dan Potter wrote:
> Thank you Jeff and Josh, that was very helpful.  Other systems I have
> worked with haven't included embedded daylight savings magic. (And I'm
> not sure I like it unless I can compute time differences and durations
> correctly when using it.)
> 
> My data (and many datasets I have work with) are UTC stamped in order
> to avoid daylight savings issues and allow a simple way for
> contemporaneous comparison between them.  I assumed the default xts,
> strptime, etc. time zone would be UTC and not my current timezone.

One way to deal with this is to set your TZ to R to 'GMT'

This is typically how I handle it when I'm dealing with data all in GMT
or UTC.


> The following is a solution for my problem
> 
> > xts(1,strptime("4/5/87 2:00",format="%m/%d/%y %H:%M", tz="UTC"))
>                     [,1]
> 1987-04-05 02:00:00    1
> Warning message:
> timezone of object (UTC) is different than current timezone ().
> 
> I wonder why my own calls to strptime with tz unspecified do not
> include a timezone in their results, whereas Jeff's does, e.g.,
> > Sys.timezone()
> [1] "EDT"
> > strptime("4/5/87 2:00",format="%m/%d/%y %H:%M")
> [1] "1987-04-05 02:00:00"
> 
> Versus
> 
>  On Fri, Sep 23, 2011 at 9:02 AM, Jeffrey Ryan
> <jeffrey.ryan at lemnica.com> wrote:
>  >
>  > > strptime("04/05/87 2:00",format="%m/%d/%y %H:%M")
>  > [1] "1987-04-05 02:00:00 CDT"
> 
> Given these issues, it would be nice if the strptime, xts etc. time
> and date print methods would always included the time zone.
> 
> Thanks Again,
> Dan
> 
> On Fri, Sep 23, 2011 at 9:02 AM, Jeffrey Ryan <jeffrey.ryan at lemnica.com> wrote:
> >
> > > strptime("04/05/87 2:00",format="%m/%d/%y %H:%M")
> > [1] "1987-04-05 02:00:00 CDT"
> >
> > This time doesn't exists. It would be 1:00 or 3:00.
> >
> > http://www.timeanddate.com/worldclock/clockchange.html?n=64&year=1987
> >
> > It is too early for me to figure out the nuances of this logic, i.e.
> > what should it be doing when you pass in a time that doesn't exist in
> > your TZ.  For now though, that is clearly the heart of the issue.
> >
> > Jeff
> >
> > On Fri, Sep 23, 2011 at 7:44 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> > > Dan,
> > >
> > > This is probably an issue with the start/end of daylight saving time
> > > in your timezone.
> > >
> > > Best,
> > > --
> > > Joshua Ulrich  |  FOSS Trading: www.fosstrading.com
> > >
> > >
> > >
> > > On Fri, Sep 23, 2011 at 7:38 AM, G See <gsee000 at gmail.com> wrote:
> > >> hmmm.
> > >>
> > >> I'm using xts_0.8-3 revision 602 on R-Forge, and it *almost* works for me,
> > >> but the time is off by an hour
> > >>
> > >>> xts(1, order.by=strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
> > >>                    [,1]
> > >> 1987-04-05 01:00:00    1
> > >>>
> > >>
> > >> -Garrett
> > >>
> > >> On Fri, Sep 23, 2011 at 7:33 AM, Dan Potter <arsanalytica at gmail.com> wrote:
> > >>
> > >>> Thank you Wolfgang.  On my machine sessionInfo shows I am using xts
> > >>> version 0.8-2 -
> > >>> I think it is the latest one, see
> > >>> http://cran.r-project.org/web/packages/xts/index.html
> > >>> Maybe someone can confirm correct operation in 0.8-2.  Could this be a
> > >>> Revo/base R version issue?
> > >>>
> > >>> > sessionInfo()
> > >>> R version 2.12.2 (2011-02-25)
> > >>> Platform: i386-pc-mingw32/i386 (32-bit)
> > >>>
> > >>> locale:
> > >>> [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
> > >>> States.1252    LC_MONETARY=English_United States.1252
> > >>> [4] LC_NUMERIC=C                           LC_TIME=English_United
> > >>> States.1252
> > >>>
> > >>> attached base packages:
> > >>> [1] stats     graphics  grDevices utils     datasets  methods   base
> > >>>
> > >>> other attached packages:
> > >>> [1] dplR_1.4.7       xts_0.8-2        zoo_1.7-2        Revobase_4.3.0
> > >>>  RevoMods_4.3.0   RevoScaleR_1.2-0 lattice_0.19-23
> > >>>
> > >>>
> > >>> On Fri, Sep 23, 2011 at 8:15 AM, Wolfgang Wu <wobwu22 at yahoo.de> wrote:
> > >>> >
> > >>> > Hmmm works fine for me.
> > >>> >
> > >>> > xts(1, order.by = strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
> > >>> >
> > >>> > [,1]
> > >>> > 1987-04-05 02:00:00    1
> > >>> >
> > >>> > Maybe an old version of xts? I am using xts version 0.8-0. (you can check
> > >>> that with sessionInfo().)
> > >>> >
> > >>> > Regards,
> > >>> >
> > >>> > Wolfgang Wu
> > >>> >
> > >>> >
> > >>> >
> > >>> >
> > >>> > ----- Urspr?ngliche Message -----
> > >>> > Von: Dan Potter <arsanalytica at gmail.com>
> > >>> > An: r-sig-finance at r-project.org
> > >>> > Cc:
> > >>> > Gesendet: 12:51 Freitag, 23.September 2011
> > >>> > Betreff: [R-SIG-Finance] xts NA date for
> > >>> >
> > >>> > Hello All,
> > >>> > I am new to R and having an issue with xts when I try and used it with
> > >>> > certain dates and times in 1987.
> > >>> >
> > >>> > Example
> > >>> >
> > >>> > > # This date and time works
> > >>> > > xts(1, order.by = strptime("04/05/87 12:00",format="%m/%d/%y %H:%M"))
> > >>> > [,1]
> > >>> > 1987-04-05 12:00:00 1
> > >>> >
> > >>> > # This date and time do not work
> > >>> > > xts(1, order.by = strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
> > >>> > [,1]
> > >>> > <NA> 1
> > >>> >
> > >>> > I don't think the issue is with strptime since it seems to work fine
> > >>> > on the offending date and time, i.e.
> > >>> > > strptime("04/05/87 02:00",format="%m/%d/%y %H:%M")
> > >>> > [1] "1987-04-05 02:00:00"
> > >>> >
> > >>> > Any suggestion or work arounds would be appreciated.
> > >>> >
> > >>> > Thanks,
> > >>> > Dan
> > >>> >
> > >>> > _______________________________________________
> > >>> > R-SIG-Finance at r-project.org mailing list
> > >>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > >>> > -- Subscriber-posting only. If you want to post, subscribe first.
> > >>> > -- Also note that this is not the r-help list where general R questions
> > >>> should go.
> > >>> >
> > >>>
> > >>> _______________________________________________
> > >>> R-SIG-Finance at r-project.org mailing list
> > >>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > >>> -- Subscriber-posting only. If you want to post, subscribe first.
> > >>> -- Also note that this is not the r-help list where general R questions
> > >>> should go.
> > >>>
> > >>
> > >>        [[alternative HTML version deleted]]
> > >>
> > >>
> > >> _______________________________________________
> > >> R-SIG-Finance at r-project.org mailing list
> > >> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > >> -- Subscriber-posting only. If you want to post, subscribe first.
> > >> -- Also note that this is not the r-help list where general R questions should go.
> > >>
> > >
> > > _______________________________________________
> > > R-SIG-Finance at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > > -- Subscriber-posting only. If you want to post, subscribe first.
> > > -- Also note that this is not the r-help list where general R questions should go.
> > >
> >
> >
> >
> > --
> > Jeffrey Ryan
> > jeffrey.ryan at lemnica.com
> >
> > www.lemnica.com
> > www.esotericR.com
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From jeffrey.ryan at lemnica.com  Fri Sep 23 16:38:51 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Fri, 23 Sep 2011 09:38:51 -0500
Subject: [R-SIG-Finance] xts NA date for
In-Reply-To: <CAGuQEVgAfBv7tNF3TNiPgQxDCaBGWsxHRUSoPKM1pKUhOqvogQ@mail.gmail.com>
References: <CAGuQEVi73dMA=JS6m3ZWeCd9u1fgBAxvHKC=0RfQyy5McXmb9A@mail.gmail.com>
	<1316780122.34063.YahooMailNeo@web29613.mail.ird.yahoo.com>
	<CAGuQEVh2_gkgxCCpM_hKt_LnjnyMO_8HqMGjPLAzMhaJXK_1hA@mail.gmail.com>
	<CA+xi=qb1wbzs4C0mC+o4JJT1S4fWAQ4wg731m0Nv2eEjNQMS7w@mail.gmail.com>
	<CAPPM_gTE0JVSjoXKyqTQ-5HUiZhtaTu=NcFuHnJm5AwrdqPgxw@mail.gmail.com>
	<CABDUZc-iji0WDgU57LiKz6pjBiYgMJJfxwcLZxP2F+GrjEA5ng@mail.gmail.com>
	<CAGuQEVgAfBv7tNF3TNiPgQxDCaBGWsxHRUSoPKM1pKUhOqvogQ@mail.gmail.com>
Message-ID: <CABDUZc84KQuor+bP3Mzh7B+gD+W71OFE835a9EnzHvh3kaHTpg@mail.gmail.com>

Hi Dan,

I think it is a platform issue. Windows has been problematic around
the edges of TZ behavior - forever.  Sys.timezone() and
Sys.getenv("TZ") even behave differently from time to time.  I would
recommend the latter over the former.  And non-windows above all ;-)

That said, I think you are always best being explicit about the TZ you
want when constructing objects in R.  xts isn't the issue here, and I
am not too sure I could design it to compensate for the incoming data
without having some bit of magic.

I'd also use POSIXct more than POSIXlt (the result of strptime here).
It will be faster and likely a bit less confusing as 'ct' objects are
time_t objects in C, whereas 'lt' objects are a wildly (and
brilliantly) modified struct tm object.

Thanks for the report/email though, and if I can think of a better
solution I'll pass along and/or update xts.

Best,
Jeff

On Fri, Sep 23, 2011 at 9:27 AM, Dan Potter <arsanalytica at gmail.com> wrote:
> Thank you Jeff and Josh, that was very helpful. ?Other systems I have
> worked with haven't included embedded daylight savings magic. (And I'm
> not sure I like it unless I can compute time differences and durations
> correctly when using it.)
>
> My data (and many datasets I have work with) are UTC stamped in order
> to avoid daylight savings issues and allow a simple way for
> contemporaneous comparison between them.? I assumed the default xts,
> strptime, etc. time zone would be UTC and not my current timezone.
>
> The following is a solution for my problem
>
>> xts(1,strptime("4/5/87 2:00",format="%m/%d/%y %H:%M", tz="UTC"))
> ? ? ? ? ? ? ? ? ? ?[,1]
> 1987-04-05 02:00:00 ? ?1
> Warning message:
> timezone of object (UTC) is different than current timezone ().
>
> I wonder why my own calls to strptime with tz unspecified do not
> include a timezone in their results, whereas Jeff's does, e.g.,
>> Sys.timezone()
> [1] "EDT"
>> strptime("4/5/87 2:00",format="%m/%d/%y %H:%M")
> [1] "1987-04-05 02:00:00"
>
> Versus
>
> ?On Fri, Sep 23, 2011 at 9:02 AM, Jeffrey Ryan
> <jeffrey.ryan at lemnica.com> wrote:
> ?>
> ?> > strptime("04/05/87 2:00",format="%m/%d/%y %H:%M")
> ?> [1] "1987-04-05 02:00:00 CDT"
>
> Given these issues, it would be nice if the strptime, xts etc. time
> and date print methods would always included the time zone.
>
> Thanks Again,
> Dan
>
> On Fri, Sep 23, 2011 at 9:02 AM, Jeffrey Ryan <jeffrey.ryan at lemnica.com> wrote:
>>
>> > strptime("04/05/87 2:00",format="%m/%d/%y %H:%M")
>> [1] "1987-04-05 02:00:00 CDT"
>>
>> This time doesn't exists. It would be 1:00 or 3:00.
>>
>> http://www.timeanddate.com/worldclock/clockchange.html?n=64&year=1987
>>
>> It is too early for me to figure out the nuances of this logic, i.e.
>> what should it be doing when you pass in a time that doesn't exist in
>> your TZ. ?For now though, that is clearly the heart of the issue.
>>
>> Jeff
>>
>> On Fri, Sep 23, 2011 at 7:44 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
>> > Dan,
>> >
>> > This is probably an issue with the start/end of daylight saving time
>> > in your timezone.
>> >
>> > Best,
>> > --
>> > Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com
>> >
>> >
>> >
>> > On Fri, Sep 23, 2011 at 7:38 AM, G See <gsee000 at gmail.com> wrote:
>> >> hmmm.
>> >>
>> >> I'm using xts_0.8-3 revision 602 on R-Forge, and it *almost* works for me,
>> >> but the time is off by an hour
>> >>
>> >>> xts(1, order.by=strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
>> >> ? ? ? ? ? ? ? ? ? ?[,1]
>> >> 1987-04-05 01:00:00 ? ?1
>> >>>
>> >>
>> >> -Garrett
>> >>
>> >> On Fri, Sep 23, 2011 at 7:33 AM, Dan Potter <arsanalytica at gmail.com> wrote:
>> >>
>> >>> Thank you Wolfgang. ?On my machine sessionInfo shows I am using xts
>> >>> version 0.8-2 -
>> >>> I think it is the latest one, see
>> >>> http://cran.r-project.org/web/packages/xts/index.html
>> >>> Maybe someone can confirm correct operation in 0.8-2. ?Could this be a
>> >>> Revo/base R version issue?
>> >>>
>> >>> > sessionInfo()
>> >>> R version 2.12.2 (2011-02-25)
>> >>> Platform: i386-pc-mingw32/i386 (32-bit)
>> >>>
>> >>> locale:
>> >>> [1] LC_COLLATE=English_United States.1252 ?LC_CTYPE=English_United
>> >>> States.1252 ? ?LC_MONETARY=English_United States.1252
>> >>> [4] LC_NUMERIC=C ? ? ? ? ? ? ? ? ? ? ? ? ? LC_TIME=English_United
>> >>> States.1252
>> >>>
>> >>> attached base packages:
>> >>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>> >>>
>> >>> other attached packages:
>> >>> [1] dplR_1.4.7 ? ? ? xts_0.8-2 ? ? ? ?zoo_1.7-2 ? ? ? ?Revobase_4.3.0
>> >>> ?RevoMods_4.3.0 ? RevoScaleR_1.2-0 lattice_0.19-23
>> >>>
>> >>>
>> >>> On Fri, Sep 23, 2011 at 8:15 AM, Wolfgang Wu <wobwu22 at yahoo.de> wrote:
>> >>> >
>> >>> > Hmmm works fine for me.
>> >>> >
>> >>> > xts(1, order.by = strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
>> >>> >
>> >>> > [,1]
>> >>> > 1987-04-05 02:00:00 ? ?1
>> >>> >
>> >>> > Maybe an old version of xts? I am using xts version 0.8-0. (you can check
>> >>> that with sessionInfo().)
>> >>> >
>> >>> > Regards,
>> >>> >
>> >>> > Wolfgang Wu
>> >>> >
>> >>> >
>> >>> >
>> >>> >
>> >>> > ----- Urspr?ngliche Message -----
>> >>> > Von: Dan Potter <arsanalytica at gmail.com>
>> >>> > An: r-sig-finance at r-project.org
>> >>> > Cc:
>> >>> > Gesendet: 12:51 Freitag, 23.September 2011
>> >>> > Betreff: [R-SIG-Finance] xts NA date for
>> >>> >
>> >>> > Hello All,
>> >>> > I am new to R and having an issue with xts when I try and used it with
>> >>> > certain dates and times in 1987.
>> >>> >
>> >>> > Example
>> >>> >
>> >>> > > # This date and time works
>> >>> > > xts(1, order.by = strptime("04/05/87 12:00",format="%m/%d/%y %H:%M"))
>> >>> > [,1]
>> >>> > 1987-04-05 12:00:00 1
>> >>> >
>> >>> > # This date and time do not work
>> >>> > > xts(1, order.by = strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
>> >>> > [,1]
>> >>> > <NA> 1
>> >>> >
>> >>> > I don't think the issue is with strptime since it seems to work fine
>> >>> > on the offending date and time, i.e.
>> >>> > > strptime("04/05/87 02:00",format="%m/%d/%y %H:%M")
>> >>> > [1] "1987-04-05 02:00:00"
>> >>> >
>> >>> > Any suggestion or work arounds would be appreciated.
>> >>> >
>> >>> > Thanks,
>> >>> > Dan
>> >>> >
>> >>> > _______________________________________________
>> >>> > R-SIG-Finance at r-project.org mailing list
>> >>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> >>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> >>> > -- Also note that this is not the r-help list where general R questions
>> >>> should go.
>> >>> >
>> >>>
>> >>> _______________________________________________
>> >>> R-SIG-Finance at r-project.org mailing list
>> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> >>> -- Subscriber-posting only. If you want to post, subscribe first.
>> >>> -- Also note that this is not the r-help list where general R questions
>> >>> should go.
>> >>>
>> >>
>> >> ? ? ? ?[[alternative HTML version deleted]]
>> >>
>> >>
>> >> _______________________________________________
>> >> R-SIG-Finance at r-project.org mailing list
>> >> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> >> -- Subscriber-posting only. If you want to post, subscribe first.
>> >> -- Also note that this is not the r-help list where general R questions should go.
>> >>
>> >
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions should go.
>> >
>>
>>
>>
>> --
>> Jeffrey Ryan
>> jeffrey.ryan at lemnica.com
>>
>> www.lemnica.com
>> www.esotericR.com
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From jeffrey.ryan at lemnica.com  Fri Sep 23 16:47:57 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Fri, 23 Sep 2011 09:47:57 -0500
Subject: [R-SIG-Finance] xts NA date for
In-Reply-To: <CABDUZc84KQuor+bP3Mzh7B+gD+W71OFE835a9EnzHvh3kaHTpg@mail.gmail.com>
References: <CAGuQEVi73dMA=JS6m3ZWeCd9u1fgBAxvHKC=0RfQyy5McXmb9A@mail.gmail.com>
	<1316780122.34063.YahooMailNeo@web29613.mail.ird.yahoo.com>
	<CAGuQEVh2_gkgxCCpM_hKt_LnjnyMO_8HqMGjPLAzMhaJXK_1hA@mail.gmail.com>
	<CA+xi=qb1wbzs4C0mC+o4JJT1S4fWAQ4wg731m0Nv2eEjNQMS7w@mail.gmail.com>
	<CAPPM_gTE0JVSjoXKyqTQ-5HUiZhtaTu=NcFuHnJm5AwrdqPgxw@mail.gmail.com>
	<CABDUZc-iji0WDgU57LiKz6pjBiYgMJJfxwcLZxP2F+GrjEA5ng@mail.gmail.com>
	<CAGuQEVgAfBv7tNF3TNiPgQxDCaBGWsxHRUSoPKM1pKUhOqvogQ@mail.gmail.com>
	<CABDUZc84KQuor+bP3Mzh7B+gD+W71OFE835a9EnzHvh3kaHTpg@mail.gmail.com>
Message-ID: <CABDUZc-MaZjCN_BegUjLh+AeRmh=JSOeAtRJrCXDLVkJ+cqUKg@mail.gmail.com>

One example of what Brian is pointing out:

# Making sure you are in the correct TZ for your session.
Sys.setenv(TZ="UTC")
strptime("4/5/87 2:00",format="%m/%d/%y %H:%M")
#[1] "1987-04-05 02:00:00 UTC"

as.POSIXct(strptime("4/5/87 2:00",format="%m/%d/%y %H:%M"))
#[1] "1987-04-05 02:00:00 UTC"

# otherwise...
Sys.setenv(TZ="America/Chicago")
strptime("4/5/87 2:00",format="%m/%d/%y %H:%M")
#[1] "1987-04-05 02:00:00 CDT"
as.POSIXct(strptime("4/5/87 2:00",format="%m/%d/%y %H:%M"))
#[1] "1987-04-05 01:00:00 CST"

I still have an issue with 02:00:00 CDT ... since that just is wrong.

Jeff


On Fri, Sep 23, 2011 at 9:38 AM, Jeffrey Ryan <jeffrey.ryan at lemnica.com> wrote:
> Hi Dan,
>
> I think it is a platform issue. Windows has been problematic around
> the edges of TZ behavior - forever. ?Sys.timezone() and
> Sys.getenv("TZ") even behave differently from time to time. ?I would
> recommend the latter over the former. ?And non-windows above all ;-)
>
> That said, I think you are always best being explicit about the TZ you
> want when constructing objects in R. ?xts isn't the issue here, and I
> am not too sure I could design it to compensate for the incoming data
> without having some bit of magic.
>
> I'd also use POSIXct more than POSIXlt (the result of strptime here).
> It will be faster and likely a bit less confusing as 'ct' objects are
> time_t objects in C, whereas 'lt' objects are a wildly (and
> brilliantly) modified struct tm object.
>
> Thanks for the report/email though, and if I can think of a better
> solution I'll pass along and/or update xts.
>
> Best,
> Jeff
>
> On Fri, Sep 23, 2011 at 9:27 AM, Dan Potter <arsanalytica at gmail.com> wrote:
>> Thank you Jeff and Josh, that was very helpful. ?Other systems I have
>> worked with haven't included embedded daylight savings magic. (And I'm
>> not sure I like it unless I can compute time differences and durations
>> correctly when using it.)
>>
>> My data (and many datasets I have work with) are UTC stamped in order
>> to avoid daylight savings issues and allow a simple way for
>> contemporaneous comparison between them.? I assumed the default xts,
>> strptime, etc. time zone would be UTC and not my current timezone.
>>
>> The following is a solution for my problem
>>
>>> xts(1,strptime("4/5/87 2:00",format="%m/%d/%y %H:%M", tz="UTC"))
>> ? ? ? ? ? ? ? ? ? ?[,1]
>> 1987-04-05 02:00:00 ? ?1
>> Warning message:
>> timezone of object (UTC) is different than current timezone ().
>>
>> I wonder why my own calls to strptime with tz unspecified do not
>> include a timezone in their results, whereas Jeff's does, e.g.,
>>> Sys.timezone()
>> [1] "EDT"
>>> strptime("4/5/87 2:00",format="%m/%d/%y %H:%M")
>> [1] "1987-04-05 02:00:00"
>>
>> Versus
>>
>> ?On Fri, Sep 23, 2011 at 9:02 AM, Jeffrey Ryan
>> <jeffrey.ryan at lemnica.com> wrote:
>> ?>
>> ?> > strptime("04/05/87 2:00",format="%m/%d/%y %H:%M")
>> ?> [1] "1987-04-05 02:00:00 CDT"
>>
>> Given these issues, it would be nice if the strptime, xts etc. time
>> and date print methods would always included the time zone.
>>
>> Thanks Again,
>> Dan
>>
>> On Fri, Sep 23, 2011 at 9:02 AM, Jeffrey Ryan <jeffrey.ryan at lemnica.com> wrote:
>>>
>>> > strptime("04/05/87 2:00",format="%m/%d/%y %H:%M")
>>> [1] "1987-04-05 02:00:00 CDT"
>>>
>>> This time doesn't exists. It would be 1:00 or 3:00.
>>>
>>> http://www.timeanddate.com/worldclock/clockchange.html?n=64&year=1987
>>>
>>> It is too early for me to figure out the nuances of this logic, i.e.
>>> what should it be doing when you pass in a time that doesn't exist in
>>> your TZ. ?For now though, that is clearly the heart of the issue.
>>>
>>> Jeff
>>>
>>> On Fri, Sep 23, 2011 at 7:44 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
>>> > Dan,
>>> >
>>> > This is probably an issue with the start/end of daylight saving time
>>> > in your timezone.
>>> >
>>> > Best,
>>> > --
>>> > Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com
>>> >
>>> >
>>> >
>>> > On Fri, Sep 23, 2011 at 7:38 AM, G See <gsee000 at gmail.com> wrote:
>>> >> hmmm.
>>> >>
>>> >> I'm using xts_0.8-3 revision 602 on R-Forge, and it *almost* works for me,
>>> >> but the time is off by an hour
>>> >>
>>> >>> xts(1, order.by=strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
>>> >> ? ? ? ? ? ? ? ? ? ?[,1]
>>> >> 1987-04-05 01:00:00 ? ?1
>>> >>>
>>> >>
>>> >> -Garrett
>>> >>
>>> >> On Fri, Sep 23, 2011 at 7:33 AM, Dan Potter <arsanalytica at gmail.com> wrote:
>>> >>
>>> >>> Thank you Wolfgang. ?On my machine sessionInfo shows I am using xts
>>> >>> version 0.8-2 -
>>> >>> I think it is the latest one, see
>>> >>> http://cran.r-project.org/web/packages/xts/index.html
>>> >>> Maybe someone can confirm correct operation in 0.8-2. ?Could this be a
>>> >>> Revo/base R version issue?
>>> >>>
>>> >>> > sessionInfo()
>>> >>> R version 2.12.2 (2011-02-25)
>>> >>> Platform: i386-pc-mingw32/i386 (32-bit)
>>> >>>
>>> >>> locale:
>>> >>> [1] LC_COLLATE=English_United States.1252 ?LC_CTYPE=English_United
>>> >>> States.1252 ? ?LC_MONETARY=English_United States.1252
>>> >>> [4] LC_NUMERIC=C ? ? ? ? ? ? ? ? ? ? ? ? ? LC_TIME=English_United
>>> >>> States.1252
>>> >>>
>>> >>> attached base packages:
>>> >>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>>> >>>
>>> >>> other attached packages:
>>> >>> [1] dplR_1.4.7 ? ? ? xts_0.8-2 ? ? ? ?zoo_1.7-2 ? ? ? ?Revobase_4.3.0
>>> >>> ?RevoMods_4.3.0 ? RevoScaleR_1.2-0 lattice_0.19-23
>>> >>>
>>> >>>
>>> >>> On Fri, Sep 23, 2011 at 8:15 AM, Wolfgang Wu <wobwu22 at yahoo.de> wrote:
>>> >>> >
>>> >>> > Hmmm works fine for me.
>>> >>> >
>>> >>> > xts(1, order.by = strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
>>> >>> >
>>> >>> > [,1]
>>> >>> > 1987-04-05 02:00:00 ? ?1
>>> >>> >
>>> >>> > Maybe an old version of xts? I am using xts version 0.8-0. (you can check
>>> >>> that with sessionInfo().)
>>> >>> >
>>> >>> > Regards,
>>> >>> >
>>> >>> > Wolfgang Wu
>>> >>> >
>>> >>> >
>>> >>> >
>>> >>> >
>>> >>> > ----- Urspr?ngliche Message -----
>>> >>> > Von: Dan Potter <arsanalytica at gmail.com>
>>> >>> > An: r-sig-finance at r-project.org
>>> >>> > Cc:
>>> >>> > Gesendet: 12:51 Freitag, 23.September 2011
>>> >>> > Betreff: [R-SIG-Finance] xts NA date for
>>> >>> >
>>> >>> > Hello All,
>>> >>> > I am new to R and having an issue with xts when I try and used it with
>>> >>> > certain dates and times in 1987.
>>> >>> >
>>> >>> > Example
>>> >>> >
>>> >>> > > # This date and time works
>>> >>> > > xts(1, order.by = strptime("04/05/87 12:00",format="%m/%d/%y %H:%M"))
>>> >>> > [,1]
>>> >>> > 1987-04-05 12:00:00 1
>>> >>> >
>>> >>> > # This date and time do not work
>>> >>> > > xts(1, order.by = strptime("04/05/87 2:00",format="%m/%d/%y %H:%M"))
>>> >>> > [,1]
>>> >>> > <NA> 1
>>> >>> >
>>> >>> > I don't think the issue is with strptime since it seems to work fine
>>> >>> > on the offending date and time, i.e.
>>> >>> > > strptime("04/05/87 02:00",format="%m/%d/%y %H:%M")
>>> >>> > [1] "1987-04-05 02:00:00"
>>> >>> >
>>> >>> > Any suggestion or work arounds would be appreciated.
>>> >>> >
>>> >>> > Thanks,
>>> >>> > Dan
>>> >>> >
>>> >>> > _______________________________________________
>>> >>> > R-SIG-Finance at r-project.org mailing list
>>> >>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> >>> > -- Subscriber-posting only. If you want to post, subscribe first.
>>> >>> > -- Also note that this is not the r-help list where general R questions
>>> >>> should go.
>>> >>> >
>>> >>>
>>> >>> _______________________________________________
>>> >>> R-SIG-Finance at r-project.org mailing list
>>> >>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> >>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> >>> -- Also note that this is not the r-help list where general R questions
>>> >>> should go.
>>> >>>
>>> >>
>>> >> ? ? ? ?[[alternative HTML version deleted]]
>>> >>
>>> >>
>>> >> _______________________________________________
>>> >> R-SIG-Finance at r-project.org mailing list
>>> >> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> >> -- Subscriber-posting only. If you want to post, subscribe first.
>>> >> -- Also note that this is not the r-help list where general R questions should go.
>>> >>
>>> >
>>> > _______________________________________________
>>> > R-SIG-Finance at r-project.org mailing list
>>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> > -- Subscriber-posting only. If you want to post, subscribe first.
>>> > -- Also note that this is not the r-help list where general R questions should go.
>>> >
>>>
>>>
>>>
>>> --
>>> Jeffrey Ryan
>>> jeffrey.ryan at lemnica.com
>>>
>>> www.lemnica.com
>>> www.esotericR.com
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>
>
>
> --
> Jeffrey Ryan
> jeffrey.ryan at lemnica.com
>
> www.lemnica.com
> www.esotericR.com
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From gsee000 at gmail.com  Fri Sep 23 16:56:42 2011
From: gsee000 at gmail.com (G See)
Date: Fri, 23 Sep 2011 09:56:42 -0500
Subject: [R-SIG-Finance] Open to Close to Open data transformation
 (quantmod, xts and possibly zoo)
In-Reply-To: <CA+xi=qat-2t6OViiz3Y-LrpMJsYq2f=E-wVRzL6E0ALPvwXCjw@mail.gmail.com>
References: <4E7C5664.4000607@gmail.com>
	<CA+xi=qat-2t6OViiz3Y-LrpMJsYq2f=E-wVRzL6E0ALPvwXCjw@mail.gmail.com>
Message-ID: <CA+xi=qZxN8QO0VMdHC8D0YwkE66CmwL3moe_4+c6oHEg6N_KGA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110923/8516c118/attachment.pl>

From john.kerpel at gmail.com  Fri Sep 23 18:52:08 2011
From: john.kerpel at gmail.com (John Kerpel)
Date: Fri, 23 Sep 2011 11:52:08 -0500
Subject: [R-SIG-Finance] Error with Rollmean
Message-ID: <CAALU2htCU3tPjtvjQKHRm7e-f=9htxR+Daed-pjBx7h+yTpegw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110923/53217035/attachment.pl>

From ggrothendieck at gmail.com  Fri Sep 23 19:11:56 2011
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 23 Sep 2011 13:11:56 -0400
Subject: [R-SIG-Finance] Error with Rollmean
In-Reply-To: <CAALU2htCU3tPjtvjQKHRm7e-f=9htxR+Daed-pjBx7h+yTpegw@mail.gmail.com>
References: <CAALU2htCU3tPjtvjQKHRm7e-f=9htxR+Daed-pjBx7h+yTpegw@mail.gmail.com>
Message-ID: <CAP01uRkh2xh6K2m-jHJkDA9d_MyE2iNm3V1ZWUY5Xs9spx6apA@mail.gmail.com>

On Fri, Sep 23, 2011 at 12:52 PM, John Kerpel <john.kerpel at gmail.com> wrote:
> I'm getting the following error with rollmean from the zoo package:
>
>
>> rollmean(x,k=20,align='right')Error in `colnames<-`(`*tmp*`, value = "T") :
> ?attempt to set colnames on object with less than two dimensions
>
>
>
> x is originally a univariate timeSeries object that is coerced to zoo
> via as.zoo. ?I've used this before without incident. ?What am I doing
> wrong? ?I'm on Windows-7 64 bit, R 64-bit v2.13.1.
>

We can't really tell what is wrong unless you provide a reproducible
example. The following is reproducible and seems to work ok:

> library(timeSeries)
Loading required package: timeDate
> library(zoo)
...snip...
> data(MSFT)
> MSFT.zoo <- as.zoo(MSFT)
> MSFT.zoo.3 <- rollmean(MSFT.zoo, 3)
>
>
> packageVersion("zoo")
[1] ?1.7.4?
> packageVersion("timeSeries")
[1] ?2130.92?
> R.version.string
[1] "R version 2.13.1 Patched (2011-09-02 r56895)"
> win.version()
[1] "Windows Vista (build 6002) Service Pack 2"





Try displaying the output of dput(x) or show how to reconstruct it
from scratch in a reproducible fashion.



-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From john.kerpel at gmail.com  Fri Sep 23 19:51:40 2011
From: john.kerpel at gmail.com (John Kerpel)
Date: Fri, 23 Sep 2011 12:51:40 -0500
Subject: [R-SIG-Finance] Error with Rollmean
In-Reply-To: <CAP01uRkh2xh6K2m-jHJkDA9d_MyE2iNm3V1ZWUY5Xs9spx6apA@mail.gmail.com>
References: <CAALU2htCU3tPjtvjQKHRm7e-f=9htxR+Daed-pjBx7h+yTpegw@mail.gmail.com>
	<CAP01uRkh2xh6K2m-jHJkDA9d_MyE2iNm3V1ZWUY5Xs9spx6apA@mail.gmail.com>
Message-ID: <CAALU2hvTH82vi-ugGWBq4bLAGUCEFv1gZ06LfBXUO10okLVVeA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110923/c130d59a/attachment.pl>

From ggrothendieck at gmail.com  Fri Sep 23 20:01:10 2011
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 23 Sep 2011 14:01:10 -0400
Subject: [R-SIG-Finance] Error with Rollmean
In-Reply-To: <CAALU2hvTH82vi-ugGWBq4bLAGUCEFv1gZ06LfBXUO10okLVVeA@mail.gmail.com>
References: <CAALU2htCU3tPjtvjQKHRm7e-f=9htxR+Daed-pjBx7h+yTpegw@mail.gmail.com>
	<CAP01uRkh2xh6K2m-jHJkDA9d_MyE2iNm3V1ZWUY5Xs9spx6apA@mail.gmail.com>
	<CAALU2hvTH82vi-ugGWBq4bLAGUCEFv1gZ06LfBXUO10okLVVeA@mail.gmail.com>
Message-ID: <CAP01uRk91_TyBd5Y9U9KSBK8N7wAbXbbuaVbfAL3N=dk02K2Tg@mail.gmail.com>

On Fri, Sep 23, 2011 at 1:51 PM, John Kerpel <john.kerpel at gmail.com> wrote:
> Here's an example:
>
>
>>  library(timeSeries)
>>  library(zoo)
>> data(MSFT)
>> MSFT.zoo <- as.zoo(MSFT[,"Close"])
>> head(MSFT.zoo)
>              Close
> 2000-09-27 60.6250
> 2000-09-28 61.3125
> 2000-09-29 60.3125
> 2000-10-02 59.1250
> 2000-10-03 56.5625
> 2000-10-04 55.4375
>> MSFT.zoo.3 <- rollmean(MSFT.zoo, 3)
> Error in `colnames<-`(`*tmp*`, value = "Close") :
>   attempt to set colnames on object with less than two dimensions
>

Thanks.  Its now fixed in the development version.  Use svn version
899 or later or add this to your code:

source("http://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/zoo/R/rollmean.R?revision=899&root=zoo")

-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From ggrothendieck at gmail.com  Fri Sep 23 20:13:26 2011
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 23 Sep 2011 14:13:26 -0400
Subject: [R-SIG-Finance] Error with Rollmean
In-Reply-To: <CAP01uRk91_TyBd5Y9U9KSBK8N7wAbXbbuaVbfAL3N=dk02K2Tg@mail.gmail.com>
References: <CAALU2htCU3tPjtvjQKHRm7e-f=9htxR+Daed-pjBx7h+yTpegw@mail.gmail.com>
	<CAP01uRkh2xh6K2m-jHJkDA9d_MyE2iNm3V1ZWUY5Xs9spx6apA@mail.gmail.com>
	<CAALU2hvTH82vi-ugGWBq4bLAGUCEFv1gZ06LfBXUO10okLVVeA@mail.gmail.com>
	<CAP01uRk91_TyBd5Y9U9KSBK8N7wAbXbbuaVbfAL3N=dk02K2Tg@mail.gmail.com>
Message-ID: <CAP01uRkQQpBAZLq4uSW7gLJsyMfCNgCZiic75zHL2YdrFZmXYg@mail.gmail.com>

On Fri, Sep 23, 2011 at 2:01 PM, Gabor Grothendieck
<ggrothendieck at gmail.com> wrote:
> On Fri, Sep 23, 2011 at 1:51 PM, John Kerpel <john.kerpel at gmail.com> wrote:
>> Here's an example:
>>
>>
>>> ?library(timeSeries)
>>> ?library(zoo)
>>> data(MSFT)
>>> MSFT.zoo <- as.zoo(MSFT[,"Close"])
>>> head(MSFT.zoo)
>> ? ? ? ? ? ? ?Close
>> 2000-09-27 60.6250
>> 2000-09-28 61.3125
>> 2000-09-29 60.3125
>> 2000-10-02 59.1250
>> 2000-10-03 56.5625
>> 2000-10-04 55.4375
>>> MSFT.zoo.3 <- rollmean(MSFT.zoo, 3)
>> Error in `colnames<-`(`*tmp*`, value = "Close") :
>> ? attempt to set colnames on object with less than two dimensions
>>
>
> Thanks. ?Its now fixed in the development version. ?Use svn version
> 899 or later or add this to your code:
>
> source("http://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/zoo/R/rollmean.R?revision=899&root=zoo")

I have made one more fix so it should be svn 900 or:

source("http://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/zoo/R/rollmean.R?revision=900&root=zoo")



-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From rvdossnl at gmail.com  Fri Sep 23 23:48:33 2011
From: rvdossnl at gmail.com (Rob van Dijk)
Date: Fri, 23 Sep 2011 23:48:33 +0200
Subject: [R-SIG-Finance] simple arma model
Message-ID: <CADM9K5RJzZV3ATE+91FzWm_O0Up9ZA1F1Q9VP+M+-vjnHnE04Q@mail.gmail.com>

Hello All,

let me first thank you for all the usefull commets I have seen in the short
time I? following this mailing list.
I'm constructing a simple arma model of the dutch aex index, to get started.

I have two questions which are probably simple to answer but I cannot find
it on the net.

Why do I get an error with the arma sequence..... NAs in X. I have searched
but cannot find them. (script etc added).

How do I download high, low, open, close? with the download sequence. When i
add these I get a "text"error.

All help is appreciated!

regards,

rob
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110923/ceaad420/attachment.html>
-------------- next part --------------


> require(tseries)

> aex <- get.hist.quote("^aex",start=(today <- Sys.Date())-735,quote= "Cl")

> as.vector(aexreturn <-diff(aex)/tail(aex,-1))
  [1] -7.355303e-03  4.412893e-03  2.042379e-03 -1.568780e-02 -9.455878e-03  2.010260e-02  7.048571e-04 -2.473101e-03
  [9] -1.834892e-02 -2.151687e-02  6.374079e-03  2.606053e-02 -2.263834e-04  1.763248e-02  2.503565e-03  1.608930e-02
 [17] -3.692924e-03  1.825053e-02 -8.610351e-04 -8.935497e-03  1.443293e-02 -6.493906e-03  1.781874e-03 -1.499891e-02
 [25] -1.717998e-03 -2.395650e-02 -4.885418e-03 -2.584985e-02  2.053932e-02 -2.411033e-02  1.519054e-03 -9.030022e-03
 [33]  1.886361e-02  6.334665e-03 -2.246533e-03  2.327800e-02 -3.830684e-03  1.481272e-02 -2.870119e-03  9.767779e-04
 [41]  1.486839e-02 -3.363648e-03 -5.196919e-03 -1.950145e-02 -1.057962e-02  2.211077e-02 -3.735832e-03  7.478632e-03
 [49] -3.755869e-02  9.046265e-03 -1.183393e-02  3.024347e-02  3.160157e-03  3.683763e-03  1.096129e-02 -2.747853e-03
 [57] -1.528073e-02 -8.150089e-03  1.514055e-02  7.652902e-03  7.348609e-03  8.241336e-03  1.040747e-02 -5.907922e-03
 [65] -6.314882e-03  1.779069e-02  5.925168e-03  1.051588e-03  2.308153e-03  7.467793e-03  3.468928e-03 -6.385391e-03
 [73]  5.666060e-04  2.244702e-02 -2.953044e-03 -1.581352e-03 -2.730877e-03  4.065041e-03 -4.170093e-03 -1.113520e-02
 [81]  4.169377e-03  7.134259e-03 -7.751709e-03  3.067575e-03  7.552472e-03 -1.578947e-02 -1.243339e-02 -8.164380e-03
 [89] -2.952726e-03  3.458213e-03 -7.303062e-03 -1.021763e-02  1.204636e-02  1.029248e-02  8.172674e-03 -3.032760e-03
 [97] -3.031897e-02 -2.599670e-02  4.612954e-03  1.766227e-03 -3.037014e-03  2.209596e-03 -3.357193e-03  3.799152e-04
[105]  9.346381e-03  1.327639e-02  3.607771e-03  3.992629e-03 -1.476378e-03 -1.286644e-02 -2.181229e-04 -1.927902e-02
[113]  9.095487e-03  2.043962e-02  1.179015e-02  1.090821e-02  1.774703e-03  1.839495e-02 -1.508117e-03  2.713144e-03
[121]  5.513682e-03 -5.751873e-03  1.619695e-03 -1.330906e-02  1.223251e-02  1.107678e-02 -3.246089e-03 -9.744574e-03
[129] -1.537870e-03  9.897221e-03  6.730263e-04  1.119759e-02 -5.235450e-03  4.360972e-04 -1.047730e-03  1.801174e-03
[137]  2.054405e-02  1.172633e-02 -4.860267e-03 -8.549688e-03  1.404928e-02 -1.547813e-03 -2.567503e-03  6.280315e-03
[145] -3.093624e-03 -1.664046e-02 -3.385260e-03  1.772530e-02 -3.393089e-03 -6.689249e-03  5.857717e-03  1.133089e-02
[153] -2.380270e-02 -1.326368e-02  1.122080e-02 -7.371860e-03  2.968813e-03 -3.298994e-02 -1.535764e-02 -1.407155e-02
[161] -4.430927e-02  6.827944e-02 -5.277678e-03  1.015138e-02  2.664298e-03 -3.226989e-02 -2.051628e-03  1.338369e-02
[169] -2.970913e-02 -2.092994e-02 -4.626528e-03  5.102529e-04 -2.799725e-02  2.233974e-02  2.852161e-02 -1.621756e-03
[177]  1.870907e-04  1.587746e-03  4.185268e-03  1.366847e-02 -1.808729e-02 -1.158909e-02 -8.607820e-03  1.808939e-02
[185]  1.471944e-02  4.300283e-04  1.777040e-02  7.099635e-03  2.807982e-03  1.491380e-03  2.380527e-03  1.460239e-02
[193] -3.649205e-03 -1.399540e-02 -1.789077e-02 -9.908279e-03  1.352660e-02 -3.582735e-02 -7.007355e-03 -2.903823e-02
[201]  1.070733e-03 -6.301629e-03  2.595172e-02  9.856405e-03  1.568409e-02  5.548363e-03  6.553160e-03  2.157239e-02
[209]  3.790705e-03 -1.598132e-02 -1.780919e-02 -6.180124e-03 -4.805592e-03  1.807820e-02  2.637232e-02  5.754286e-03
[217]  2.012906e-03  7.690487e-04 -9.103662e-03 -8.731521e-03 -4.506412e-03  2.655597e-02 -1.946903e-03  5.896226e-04
[225] -7.814125e-03 -1.624445e-02  1.399268e-02 -8.254788e-03 -2.507769e-02 -2.684191e-03 -6.174364e-04 -2.413814e-03
[233]  1.616684e-02 -2.380444e-03 -1.644074e-02 -1.367839e-02  1.632448e-03 -1.643320e-02 -5.357372e-03  7.956209e-03
[241]  8.894777e-03 -4.721914e-03  2.907069e-03  2.780167e-02  3.215237e-03  8.440868e-03  3.570024e-03 -8.451306e-03
[249]  1.107323e-02  9.444395e-03  1.104610e-03  6.849112e-03 -1.603659e-03 -2.590365e-03 -3.555741e-03 -3.885933e-04
[257]  1.550867e-02 -2.566826e-03 -1.372813e-02 -4.597080e-03  1.488826e-02 -2.016787e-03  2.957093e-03 -6.907846e-03
[265] -4.366159e-03 -1.827551e-03 -1.023002e-02  1.381966e-02  5.757189e-03  2.073030e-03 -3.387514e-03  1.513174e-03
[273] -5.819332e-03  1.940185e-02 -1.142589e-03  3.514424e-04  7.901206e-04 -7.577768e-03  1.648465e-03  6.463500e-03
[281] -2.492157e-03  4.262400e-03 -5.194272e-03 -8.195509e-03  3.253475e-04 -2.579842e-03  6.247237e-03  7.806561e-03
[289] -8.759770e-03  1.767348e-02  5.044681e-03 -6.057285e-04  3.019497e-03 -4.767546e-03 -3.653974e-03 -4.749417e-03
[297]  6.743264e-03 -1.863153e-02  6.705710e-03  1.377538e-02 -4.904521e-03 -6.308043e-03 -2.269876e-02  7.058126e-03
[305]  4.634413e-03 -7.464462e-03 -1.998969e-02 -6.902660e-03  2.498511e-02  1.654708e-02  2.162541e-03  4.381609e-04
[313]  1.117819e-02  1.470928e-03  7.613487e-03  2.370007e-03  3.102761e-03  1.478029e-03 -2.936230e-03  3.097647e-03
[321]  4.828860e-04  3.114824e-03  8.395575e-03  8.422944e-05  1.122933e-04 -8.147898e-04 -9.843350e-04  3.139981e-03
[329]  4.549006e-03 -5.500056e-03 -5.048368e-03  1.470016e-02 -2.786602e-03 -4.422302e-03 -1.092774e-03 -1.262485e-03
[337] -6.295700e-03  1.141502e-02  1.134075e-02 -4.490147e-03  1.466844e-03 -6.646726e-04  7.285624e-03 -1.611912e-02
[345] -5.110350e-03  1.359922e-02 -1.662096e-04 -6.215855e-03  9.087143e-03  6.258063e-03 -8.777273e-03 -1.136521e-03
[353]  1.732451e-02  7.621329e-04 -6.851380e-03  1.696260e-03  1.173449e-02  3.395220e-03 -5.227802e-03  3.858504e-03
[361] -2.597051e-03  1.404760e-03  9.176540e-04  2.638025e-03  4.021556e-03  3.206927e-03 -8.815917e-03 -5.666567e-03
[369] -9.829153e-03 -4.151431e-03  8.288573e-03  6.393412e-03 -3.206957e-03 -8.469002e-03  7.453754e-03  9.512162e-04
[377] -5.108173e-03  8.188220e-04 -3.549488e-04 -1.134920e-02 -8.549865e-03 -7.717782e-03 -2.364331e-02 -1.424825e-02
[385]  1.735097e-02  3.281870e-03  1.763387e-02 -8.979180e-04  9.340079e-03  1.004431e-02  3.455368e-03 -2.194366e-04
[393]  3.662103e-03  5.327969e-03 -6.153930e-03  1.036676e-02 -1.192380e-03 -1.355160e-04  1.839628e-03 -6.124282e-03
[401] -1.226359e-03 -1.282506e-03 -1.579954e-02  5.485721e-03 -9.124291e-03 -1.337047e-03 -1.791993e-02  1.387434e-03
[409]  1.861783e-02 -2.395476e-03  1.501877e-03  4.448028e-04 -6.119781e-04  1.250208e-03  4.480584e-03 -3.162977e-03
[417] -1.267174e-02 -3.071980e-03  1.197371e-02 -8.962436e-03  1.418086e-02 -1.386770e-03 -8.475050e-03 -7.495914e-03
[425] -7.266534e-03 -1.317152e-02  3.953022e-03  4.959526e-03 -7.466115e-03 -1.687788e-02  2.156177e-03  4.957815e-03
[433] -1.277325e-03  4.594579e-03  4.043905e-04  9.271978e-03 -1.008816e-02 -1.558830e-02 -1.175641e-03 -3.125184e-03
[441] -7.376154e-04 -9.772084e-03  7.070169e-03 -1.261121e-02  5.987486e-04  1.034013e-02 -1.041791e-02 -5.085001e-03
[449]  2.281529e-03 -4.432517e-03  1.338728e-02 -5.895203e-03 -1.704355e-02  5.171260e-04 -7.001309e-04  4.213398e-03
[457]  1.604629e-02  1.286619e-02  9.246835e-03  1.979622e-03 -1.165841e-03 -4.332299e-03  1.025611e-02 -7.825274e-03
[465] -1.880057e-02 -1.216428e-02  2.582738e-03 -7.625734e-03 -2.943944e-03 -1.955627e-02  9.197658e-03  1.354907e-02
[473]  1.843496e-02  5.138807e-03 -3.943428e-03 -1.573915e-03 -1.092765e-02 -1.623767e-03 -1.014519e-02 -1.426415e-02
[481] -1.434375e-02 -2.996556e-02 -3.270733e-02 -1.518475e-02 -4.584274e-02  1.285490e-02 -3.527248e-02  1.951978e-02
[489]  3.120932e-02  6.128703e-03 -7.512607e-03  3.895438e-03 -4.674869e-02 -1.980668e-02  8.032710e-03  7.006324e-03
[497]  1.157753e-02 -1.109555e-02 -6.832972e-03  1.656830e-02  8.390918e-03  3.171406e-02  3.503878e-03 -2.628915e-02
[505] -4.365094e-02 -4.097611e-03  2.746842e-02  8.257172e-03 -2.640348e-02 -2.838200e-02  5.813738e-03  1.283082e-02
[513]  1.780842e-02  1.139389e-02 -2.585297e-02  1.756457e-02 -1.400174e-02 -4.646219e-02

> ncol(aexreturn)
[1] 1

> nrow(aexreturn)
[1] 518

> x <- aexreturn

> armaaex <- arma(x, order = c(1, 1), lag = NULL, coef = NULL, include.intercept = TRUE, series = NULL, qr.tol = 1e-07,)
-------------- next part --------------
A non-text attachment was scrubbed...
Name: dataloadscript.R
Type: application/octet-stream
Size: 309 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110923/ceaad420/attachment.obj>

From vaibhav.88 at gmail.com  Sat Sep 24 22:47:24 2011
From: vaibhav.88 at gmail.com (sixstringaddict)
Date: Sat, 24 Sep 2011 13:47:24 -0700 (PDT)
Subject: [R-SIG-Finance] portfolio.optim
Message-ID: <1316897244044-3840249.post@n4.nabble.com>

I am using the portfolio.optim function to find the portfolio weights and
risk using three covariance estimates.

I'm using the following function:
portfolio.optim(rr,target,covmat=cov(rr),riskless=T,rf=.001,shorts=T)

Now I need to find the weight and risk but this time I need to use a
specific correlation coefficient, which is in this case 0.4210423. Is there
a way of doing this?

--
View this message in context: http://r.789695.n4.nabble.com/portfolio-optim-tp3840249p3840249.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From enricoschumann at yahoo.de  Sun Sep 25 09:14:34 2011
From: enricoschumann at yahoo.de (Enrico Schumann)
Date: Sun, 25 Sep 2011 09:14:34 +0200
Subject: [R-SIG-Finance] portfolio.optim
In-Reply-To: <1316897244044-3840249.post@n4.nabble.com>
References: <1316897244044-3840249.post@n4.nabble.com>
Message-ID: <4E7ED4DA.4030808@yahoo.de>

Hi <anonymous>,

just build a covariance matrix with your correlation and pass it to 
'portfolio.optim'. For instance, for 4 assets:

## marginal vols
vols <- c(0.2, 0.3, 0.4, 0.5)

## correlation matrix
C <- array(0.42, dim = c(length(vols), length(vols))); diag(C) <- 1

## covariance matrix
Sigma <- diag(vols) %*% C %*% diag(vols)

## ...or more efficiently
Sigma <- outer(vols, vols) * C


Regards,
Enrico


Am 24.09.2011 22:47, schrieb sixstringaddict:
> I am using the portfolio.optim function to find the portfolio weights and
> risk using three covariance estimates.
>
> I'm using the following function:
> portfolio.optim(rr,target,covmat=cov(rr),riskless=T,rf=.001,shorts=T)
>
> Now I need to find the weight and risk but this time I need to use a
> specific correlation coefficient, which is in this case 0.4210423. Is there
> a way of doing this?
>
> --
> View this message in context: http://r.789695.n4.nabble.com/portfolio-optim-tp3840249p3840249.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>

-- 
Enrico Schumann
Lucerne, Switzerland
http://nmof.net/


From chris at chrisbird.com  Mon Sep 26 09:24:57 2011
From: chris at chrisbird.com (chrisbird)
Date: Mon, 26 Sep 2011 00:24:57 -0700 (PDT)
Subject: [R-SIG-Finance] Filtering dates/times from zoo/xts series
Message-ID: <1317021897117-3842937.post@n4.nabble.com>

Hi,

I am in the process of writing a back-tester using blotter, quantmod and
various other libraries but have stumbled across a couple of stumbling
blocks - any help on these would be really appreciated.

The data in 30 minute O,H,L,C,V over several months.

Firstly if I have a xts/zoo time-series, is there any simple way of
filtering the series by time? For example  I wish to reduce the series to a
set of samples which lie between 07:00 and 21:00.

Secondly, and more complex, I wish to remove data of each daily period for
which there are less than 7 samples. So, if I only have four 30 minute
samples for today - I wish to remove all samples for today from the series.
I'm guessing that the best way of doing this is to do an aggregate sample
count per day and then somehow filter the original data on this - however I
am unsure how to do this.

Any help on these issues would be greatly appreciated.

Thanks,

Chris.

--
View this message in context: http://r.789695.n4.nabble.com/Filtering-dates-times-from-zoo-xts-series-tp3842937p3842937.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From chris at chrisbird.com  Mon Sep 26 09:48:03 2011
From: chris at chrisbird.com (chrisbird)
Date: Mon, 26 Sep 2011 00:48:03 -0700 (PDT)
Subject: [R-SIG-Finance] Filtering dates/times from zoo/xts series
In-Reply-To: <1317021897117-3842937.post@n4.nabble.com>
References: <1317021897117-3842937.post@n4.nabble.com>
Message-ID: <1317023283837-3842989.post@n4.nabble.com>

I actually managed to get the first part working (filtering by time),
relatively simple:

spreadv[.indexhour(spreadv) > 9 & .indexhour(spreadv) < 21]

However, still stuck on second question.

--
View this message in context: http://r.789695.n4.nabble.com/Filtering-dates-times-from-zoo-xts-series-tp3842937p3842989.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From chris at chrisbird.com  Mon Sep 26 10:24:23 2011
From: chris at chrisbird.com (chrisbird)
Date: Mon, 26 Sep 2011 01:24:23 -0700 (PDT)
Subject: [R-SIG-Finance] Filtering dates/times from zoo/xts series
In-Reply-To: <1317023283837-3842989.post@n4.nabble.com>
References: <1317021897117-3842937.post@n4.nabble.com>
	<1317023283837-3842989.post@n4.nabble.com>
Message-ID: <1317025463508-3843065.post@n4.nabble.com>

Ok, I don't know whether I'm just rested after the weekend, but after
struggling to figure this out last week I now seem to have solved it all
this morning.

My solution is as follows:

# filter the data source on time range
data_source <- data_source[.indexhour(min_hour) >= min_hour &
.indexhour(data_source) < max_hour]

# now remove any data for which there is now enough daily samples
# aggregate samples per day
day_samples <- apply.daily(as.xts(data_source[,1]),length)

# get rid of any which do not have enough samples
day_samples <- day_samples[day_samples >= min_samples_per_day]

# get day index of the remaining days
days <- .indexday(as.xts(day_samples))

# filter data by remaining days
data_source <- data_source[.indexday(as.xts(data_source[,1])) %in% days]


Any comments on whether or not this is an optimal solution or acan be
improved in any way would be appreciated.


--
View this message in context: http://r.789695.n4.nabble.com/Filtering-dates-times-from-zoo-xts-series-tp3842937p3843065.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From chris at chrisbird.com  Mon Sep 26 10:26:57 2011
From: chris at chrisbird.com (chrisbird)
Date: Mon, 26 Sep 2011 01:26:57 -0700 (PDT)
Subject: [R-SIG-Finance] Filtering dates/times from zoo/xts series
In-Reply-To: <1317025463508-3843065.post@n4.nabble.com>
References: <1317021897117-3842937.post@n4.nabble.com>
	<1317023283837-3842989.post@n4.nabble.com>
	<1317025463508-3843065.post@n4.nabble.com>
Message-ID: <1317025617620-3843071.post@n4.nabble.com>

Made typo:

Filtering by time shoud read:

# filter the data source on time range
data_source <- data_source[.indexhour(data_source) >= min_hour &
.indexhour(data_source) < max_hour]




--
View this message in context: http://r.789695.n4.nabble.com/Filtering-dates-times-from-zoo-xts-series-tp3842937p3843071.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From daniel.cegielka at gmail.com  Mon Sep 26 11:27:15 2011
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Mon, 26 Sep 2011 11:27:15 +0200
Subject: [R-SIG-Finance] Filtering dates/times from zoo/xts series
In-Reply-To: <1317021897117-3842937.post@n4.nabble.com>
References: <1317021897117-3842937.post@n4.nabble.com>
Message-ID: <CAPLrYERJJ+XV_4he7z3GifsjZufhz=bh6z2N7_UsUiLJ1zyJFg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110926/6bec118a/attachment.asc>

From chris at chrisbird.com  Mon Sep 26 11:36:21 2011
From: chris at chrisbird.com (chrisbird)
Date: Mon, 26 Sep 2011 02:36:21 -0700 (PDT)
Subject: [R-SIG-Finance] Filtering dates/times from zoo/xts series
In-Reply-To: <CAPLrYERJJ+XV_4he7z3GifsjZufhz=bh6z2N7_UsUiLJ1zyJFg@mail.gmail.com>
References: <1317021897117-3842937.post@n4.nabble.com>
	<CAPLrYERJJ+XV_4he7z3GifsjZufhz=bh6z2N7_UsUiLJ1zyJFg@mail.gmail.com>
Message-ID: <1317029781911-3843239.post@n4.nabble.com>

Daniel,

I find your post a little rude and perplexing - you insist I read the manual
front front to cover and then proceed to answer a question different to the
one I asked. Maybe you should take a lesson in reading?

As for my multiple postings, I thought it was beneficial to the group to
post the solution I found - both to get comments and to help anyone else who
may have the same problem.

As it happens I did have a partial solution from reading the manual, however
after searching more I came across additional R material which helped
considerably.

A response such as the one given by yourself will only discourage newcomers
into using R.


--
View this message in context: http://r.789695.n4.nabble.com/Filtering-dates-times-from-zoo-xts-series-tp3842937p3843239.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From arun.k at bridgei2i.com  Mon Sep 26 11:41:54 2011
From: arun.k at bridgei2i.com (Arun Krishnamoorthy)
Date: Mon, 26 Sep 2011 15:11:54 +0530
Subject: [R-SIG-Finance] Filtering dates/times from zoo/xts series
In-Reply-To: <1317025463508-3843065.post@n4.nabble.com>
References: <1317021897117-3842937.post@n4.nabble.com>	<1317023283837-3842989.post@n4.nabble.com>
	<1317025463508-3843065.post@n4.nabble.com>
Message-ID: <001b01cc7c30$87342e00$959c8a00$@k@bridgei2i.com>

Is there a nice way to aggregate daily data from xts or zoo to a monthly
level?
Example.

new<-getSymbols("INR=X",src="yahoo", auto.assign = FALSE)

returns INR to USD at a daily level as a xts. Is there a nice way to get a
monthly or weekly average & std dev from this data that has O, C, L, H and
volume? Sorry, I may have missed a discussion on this from before.

Thanks,
AK
-----Original Message-----
From: r-sig-finance-bounces at r-project.org
[mailto:r-sig-finance-bounces at r-project.org] On Behalf Of chrisbird
Sent: 26 September 2011 13:54
To: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Filtering dates/times from zoo/xts series

Ok, I don't know whether I'm just rested after the weekend, but after
struggling to figure this out last week I now seem to have solved it all
this morning.

My solution is as follows:

# filter the data source on time range
data_source <- data_source[.indexhour(min_hour) >= min_hour &
.indexhour(data_source) < max_hour]

# now remove any data for which there is now enough daily samples
# aggregate samples per day
day_samples <- apply.daily(as.xts(data_source[,1]),length)

# get rid of any which do not have enough samples
day_samples <- day_samples[day_samples >= min_samples_per_day]

# get day index of the remaining days
days <- .indexday(as.xts(day_samples))

# filter data by remaining days
data_source <- data_source[.indexday(as.xts(data_source[,1])) %in% days]


Any comments on whether or not this is an optimal solution or acan be
improved in any way would be appreciated.


--
View this message in context:
http://r.789695.n4.nabble.com/Filtering-dates-times-from-zoo-xts-series-tp38
42937p3843065.html
Sent from the Rmetrics mailing list archive at Nabble.com.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.


From chris at chrisbird.com  Mon Sep 26 11:59:22 2011
From: chris at chrisbird.com (chrisbird)
Date: Mon, 26 Sep 2011 02:59:22 -0700 (PDT)
Subject: [R-SIG-Finance] Filtering dates/times from zoo/xts series
In-Reply-To: <001b01cc7c30$87342e00$959c8a00$@k@bridgei2i.com>
References: <1317021897117-3842937.post@n4.nabble.com>
	<1317023283837-3842989.post@n4.nabble.com>
	<1317025463508-3843065.post@n4.nabble.com>
	<001b01cc7c30$87342e00$959c8a00$@k@bridgei2i.com>
Message-ID: <1317031162144-3843279.post@n4.nabble.com>

ArunK,

Thanks, but this is not what I am trying to achieve.
I was trying to use 30 minute data, but remove any days where the total
count of 30 minutes samples was below a given threshold. For example:

dd/mm/yyyy
20/09/2011 (contains 12 samples in 30 minute intervals)
21/09/2011 (contains 8 samples in 30 minute intervals)
22/09/2011 (contains 3 samples in 30 minute intervals)
23/09/2011 (contains 13 samples in 30 minute intervals)

If my threshold was set to a minimum of 7 samples then I would want all
samples for 20th,21st and 23rd with the samples from 22nd omitted.

Again, I posted a solution I eventually arrived on - wether or not this is
an optimal solution I am unsure.

Chris.


--
View this message in context: http://r.789695.n4.nabble.com/Filtering-dates-times-from-zoo-xts-series-tp3842937p3843279.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From daniel.cegielka at gmail.com  Mon Sep 26 12:13:25 2011
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Mon, 26 Sep 2011 12:13:25 +0200
Subject: [R-SIG-Finance] Filtering dates/times from zoo/xts series
In-Reply-To: <1317029781911-3843239.post@n4.nabble.com>
References: <1317021897117-3842937.post@n4.nabble.com>
	<CAPLrYERJJ+XV_4he7z3GifsjZufhz=bh6z2N7_UsUiLJ1zyJFg@mail.gmail.com>
	<1317029781911-3843239.post@n4.nabble.com>
Message-ID: <CAPLrYETf=p2=A4vPRfn+-SKRcj-2WbD=PJAy4O_Rdwjb2y-Gnw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110926/b68f1f93/attachment.ksh>

From costas.vorlow at gmail.com  Mon Sep 26 12:42:33 2011
From: costas.vorlow at gmail.com (Costas Vorlow)
Date: Mon, 26 Sep 2011 10:42:33 +0000
Subject: [R-SIG-Finance] Open to Close to Open data transformation
 (quantmod, xts and possibly zoo) + chart.TimeSeries
Message-ID: <CABfqsR8zZjCcssqUD26=-JvA0qotnWJes39bvPvLCTqYmDQFaw@mail.gmail.com>

Thanks again.

One more point:

When I try

chart.TimeSeries(newdata, date.format="%d-%m-%y", period.areas =
list(c("03-01-2011","05-06-2011")), period.color = "blue", lwd = 2)

I can't get the event period shadings.

This has to do I guess with the fact that 2 prices have the same data
though different hourly time signature.

Is this correct and how do I rectify it?

I've been trying around with formats but no result so far.

On 23 September 2011 14:56, G See <gsee000 at gmail.com> wrote:
> FWIW, I misread the docs for getSymbols.yahoo which says
> ? ? ?In the case of xts objects, the indexing will be by Date. This can
> ? ? ?be altered with the ?index.class? argument. ?See ?indexClass? for
> ? ? ?more information on changing index classes.
> So, this should be perfectly acceptable as well:
> medata <- getSymbols("^GSPC",
> ? ? ? ? from=Sys.Date()-400,
> ? ? ? ? index.class='POSIXct',
> ? ? ? ? auto.assign=FALSE)
> opens <- Op(medata)
> closes <- Cl(medata)
> index(opens) <- index(opens) + (60*60*8) + (60*30)
> index(closes) <- index(closes) + (60*60*15)
> newdata <- rbind(opens,closes)
> colnames(newdata) <- "GSPC.OC"
>> tail(newdata)
> ? ? ? ? ? ? ? ? ? ? GSPC.OC
> 2011-09-20 08:30:00 1204.50
> 2011-09-20 15:00:00 1202.09
> 2011-09-21 08:30:00 1203.63
> 2011-09-21 15:00:00 1166.76
> 2011-09-22 08:30:00 1164.55
> 2011-09-22 15:00:00 1129.56
>
> On Fri, Sep 23, 2011 at 8:25 AM, G See <gsee000 at gmail.com> wrote:
>>
>> Hi Costas,
>> You need an indexClass that can handle times. ?By default getSymbols.yahoo
>> gives you an object with 'Date' indexClass which you need to change to
>> something like 'POSIXct' or 'POSIXlt'
>> (You *can* do this directly in your getSymbols call using the argument
>> index.class='POSIXct', but the documentation says only "Date" is supported,
>> so I'll do it the other way)
>> require(quantmod)
>> getSymbols("^GSPC",from='1990-01-01')
>> medata <- tail(GSPC, 400)
>> indexClass(medata) <- "POSIXct"
>> opens <- Op(medata)
>> closes <- Cl(medata)
>> index(opens) <- index(opens) + (60*60*8) + (60*30)
>> index(closes) <- index(closes) + (60*60*15)
>> newdata <- rbind(opens,closes)
>> colnames(newdata) <- "GSPC.OC"
>> > tail(newdata)
>> ? ? ? ? ? ? ? ? ? ? GSPC.OC
>> 2011-09-20 08:30:00 1204.50
>> 2011-09-20 15:00:00 1202.09
>> 2011-09-21 08:30:00 1203.63
>> 2011-09-21 15:00:00 1166.76
>> 2011-09-22 08:30:00 1164.55
>> 2011-09-22 15:00:00 1129.56
>> Regards,
>> Garrett
>> On Fri, Sep 23, 2011 at 4:50 AM, Costas Vorlow <costas.vorlow at gmail.com>
>> wrote:
>>>
>>> Hello,
>>>
>>> I want to put in order (preferably as a zoo or xts object with a suitable
>>> timestamp)
>>> the open anc closing prices of an (say) index downloaded from YAHOO
>>> finance:
>>>
>>> require(quantmod)
>>> getSymbols('^GSPC',from='1990-01-01')
>>>
>>> medata<- tail((GSPC),400)
>>> opens<-Op(medata)
>>> closes<-Cl(medata)
>>>
>>> i.e., I want ?asingle sequence of ?1095.89, ? ?1105.24 , 1101.24 ,
>>> 1102.94, and so on ... preferably with a timestamp (morning - evening of
>>> same day as for daily prices zoo does not like the same date in two
>>> consecutive prices...
>>>
>>> > head(merge(opens,closes))
>>> ? ? ? ? ? GSPC.Open GSPC.Close
>>> 2010-02-24 ? 1095.89 ? ?1105.24
>>> 2010-02-25 ? 1101.24 ? ?1102.94
>>> 2010-02-26 ? 1103.10 ? ?1104.49
>>> 2010-03-01 ? 1105.36 ? ?1115.71
>>> 2010-03-02 ? 1117.01 ? ?1118.31
>>> 2010-03-03 ? 1119.36 ? ?1118.79
>>> >
>>> >
>>> Probably I could use the OpCl in quantmod and caclulate the Cl price from
>>> Op, though Is there any easy way using some implicit zoo/xts function for
>>> this? I have problems in puting the timestamps in the xts vobject.
>>>
>>> Thanks,
>>> Costas
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>
>
>



-- 

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|c|o|s|t|a|s|@|v|o|r|l|o|w|.|o|r|g|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


From brian at braverock.com  Mon Sep 26 12:48:47 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 26 Sep 2011 05:48:47 -0500
Subject: [R-SIG-Finance] Filtering dates/times from zoo/xts series
In-Reply-To: <1317023283837-3842989.post@n4.nabble.com>
References: <1317021897117-3842937.post@n4.nabble.com>
	<1317023283837-3842989.post@n4.nabble.com>
Message-ID: <1317034127.4192.236.camel@brian-desktop>

On Mon, 2011-09-26 at 00:48 -0700, chrisbird wrote:
> I actually managed to get the first part working (filtering by time),
> relatively simple:
> 
> spreadv[.indexhour(spreadv) > 9 & .indexhour(spreadv) < 21]

It is actually much simpler than that:

spreadv['T09:00/T21:00']

xts makes extensive use of ISO 8601 subsetting.

> However, still stuck on second question.

I typically remove days that don't fall on trading days when I am
initially processing the data.  If the markets were open, you probably
want the data.  If not, you probably don't want it.  But this requires
you to know the market calendar.

I'll also point out that if you're writing a backtest using blotter, it
would probably be far faster for you to base your backtest on
quantstrat, which adds a strategy logic abstraction layer on top of
blotter.

Cheers,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From brian at braverock.com  Mon Sep 26 12:54:26 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 26 Sep 2011 05:54:26 -0500
Subject: [R-SIG-Finance] Filtering dates/times from zoo/xts series
In-Reply-To: <001b01cc7c30$87342e00$959c8a00$@k@bridgei2i.com>
References: <1317021897117-3842937.post@n4.nabble.com>
	<1317023283837-3842989.post@n4.nabble.com>
	<1317025463508-3843065.post@n4.nabble.com>
	<001b01cc7c30$87342e00$959c8a00$@k@bridgei2i.com>
Message-ID: <1317034466.4192.239.camel@brian-desktop>

On Mon, 2011-09-26 at 15:11 +0530, Arun Krishnamoorthy wrote:
> Is there a nice way to aggregate daily data from xts or zoo to a
> monthly level?
> Example.
> 
> new<-getSymbols("INR=X",src="yahoo", auto.assign = FALSE)
> 
> returns INR to USD at a daily level as a xts. Is there a nice way to
> get a monthly or weekly average & std dev from this data that has O,
> C, L, H and volume? Sorry, I may have missed a discussion on this from
> before.
> 
> Thanks,
> AK 

Arun,

If you're going to ask a new (even related question),  please start a
new thread.

seee

?to.monthly

and more generically, see

?to.period

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From gsee000 at gmail.com  Mon Sep 26 13:03:51 2011
From: gsee000 at gmail.com (G See)
Date: Mon, 26 Sep 2011 06:03:51 -0500
Subject: [R-SIG-Finance] Filtering dates/times from zoo/xts series
In-Reply-To: <1317034466.4192.239.camel@brian-desktop>
References: <1317021897117-3842937.post@n4.nabble.com>
	<1317023283837-3842989.post@n4.nabble.com>
	<1317025463508-3843065.post@n4.nabble.com>
	<1317034466.4192.239.camel@brian-desktop>
Message-ID: <CA+xi=qYpSozCvpBUs4a3JBPNPQ1KeThkVWS7HZT2h9KqvAC33A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110926/fd2ec741/attachment.pl>

From chris at chrisbird.com  Mon Sep 26 13:12:32 2011
From: chris at chrisbird.com (chrisbird)
Date: Mon, 26 Sep 2011 04:12:32 -0700 (PDT)
Subject: [R-SIG-Finance] Filtering dates/times from zoo/xts series
In-Reply-To: <1317034127.4192.236.camel@brian-desktop>
References: <1317021897117-3842937.post@n4.nabble.com>
	<1317023283837-3842989.post@n4.nabble.com>
	<1317034127.4192.236.camel@brian-desktop>
Message-ID: <1317035552930-3843408.post@n4.nabble.com>

Thanks Brian,

I did try using the ['T09:00/T21:00'] method for extraction but it did not
return anything - I will reinvestigate this and see if I can get it working.

The processing is not to remove non-trading days/holidays - I do that
elsewhere. I'm doing processing on some complex strategies which use some
instruments which trade a lot, but not everyday. I only wish to process the
data from liquid days and strip out the less liquid data.

I will certainly investigate quantstrat.

Thanks,

Chris.


--
View this message in context: http://r.789695.n4.nabble.com/Filtering-dates-times-from-zoo-xts-series-tp3842937p3843408.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From daniel.cegielka at gmail.com  Mon Sep 26 13:50:25 2011
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Mon, 26 Sep 2011 13:50:25 +0200
Subject: [R-SIG-Finance] Filtering dates/times from zoo/xts series
In-Reply-To: <1317035552930-3843408.post@n4.nabble.com>
References: <1317021897117-3842937.post@n4.nabble.com>
	<1317023283837-3842989.post@n4.nabble.com>
	<1317034127.4192.236.camel@brian-desktop>
	<1317035552930-3843408.post@n4.nabble.com>
Message-ID: <CAPLrYEQh=EPhD7HD4H0Cx+NyEkr9expMrMCHoea-hiR=yc4Akw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110926/6eed4c16/attachment.pl>

From javier.ospinom at gmail.com  Mon Sep 26 17:27:48 2011
From: javier.ospinom at gmail.com (jaosma)
Date: Mon, 26 Sep 2011 08:27:48 -0700 (PDT)
Subject: [R-SIG-Finance] How to determine the efficient frontier portfolios
 using the Black-Litterman model?
Message-ID: <1317050868467-3844177.post@n4.nabble.com>

I'm trying to find 50 portfolios on the efficient frontier using the
Black-Litterman model but have not found a suitable method for doing so. I
tried using the "portfoliosFrontier" function given in the package
fPortfolio using the "optimalPortfolios.fPort" function on package "BLCOP"
but does not provide satisfactory results

--
View this message in context: http://r.789695.n4.nabble.com/How-to-determine-the-efficient-frontier-portfolios-using-the-Black-Litterman-model-tp3844177p3844177.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From josh.m.ulrich at gmail.com  Mon Sep 26 17:33:53 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 26 Sep 2011 10:33:53 -0500
Subject: [R-SIG-Finance] How to determine the efficient frontier
 portfolios using the Black-Litterman model?
In-Reply-To: <1317050868467-3844177.post@n4.nabble.com>
References: <1317050868467-3844177.post@n4.nabble.com>
Message-ID: <CAPPM_gRNVkyb-K6Hdq6J6VYu9dzxCBk6m9o=-mC7Rd2j_Sbk0g@mail.gmail.com>

As Michael asked you when you posted to R-help:

"... more immediately, can you say what was unsatisfactory about the
results the two mentioned packages? Specifically, minimal working
example with data etc."

No one can/will help you if you do not describe the issues you're having.

Best,
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com



On Mon, Sep 26, 2011 at 10:27 AM, jaosma <javier.ospinom at gmail.com> wrote:
> I'm trying to find 50 portfolios on the efficient frontier using the
> Black-Litterman model but have not found a suitable method for doing so. I
> tried using the "portfoliosFrontier" function given in the package
> fPortfolio using the "optimalPortfolios.fPort" function on package "BLCOP"
> but does not provide satisfactory results
>
> --
> View this message in context: http://r.789695.n4.nabble.com/How-to-determine-the-efficient-frontier-portfolios-using-the-Black-Litterman-model-tp3844177p3844177.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From brian at braverock.com  Mon Sep 26 17:34:25 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 26 Sep 2011 10:34:25 -0500
Subject: [R-SIG-Finance] How to determine the efficient frontier
 portfolios using the Black-Litterman model?
In-Reply-To: <1317050868467-3844177.post@n4.nabble.com>
References: <1317050868467-3844177.post@n4.nabble.com>
Message-ID: <1317051265.6600.58.camel@brian-rcg>

On Mon, 2011-09-26 at 08:27 -0700, jaosma wrote:
> I'm trying to find 50 portfolios on the efficient frontier using the
> Black-Litterman model but have not found a suitable method for doing
> so. I tried using the "portfoliosFrontier" function given in the
> package fPortfolio using the "optimalPortfolios.fPort" function on
> package "BLCOP" but does not provide satisfactory results 

BLCOP is the only package with well-developed Black Litterman
functionality.

Perhaps you could provide a reproducible example using publicly
available data so that the list can provide more guidance?

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From mirza.trokic at gmail.com  Mon Sep 26 22:47:43 2011
From: mirza.trokic at gmail.com (mtrokic)
Date: Mon, 26 Sep 2011 13:47:43 -0700 (PDT)
Subject: [R-SIG-Finance] Seasonal Dummy Variables in VECM (tsDyn)
Message-ID: <1317070063077-3845323.post@n4.nabble.com>

Hello! 

I am currently working on the VECM chapters covering Lutkepohl's "New intro
to multiple time series analysis". I would like to use the tsDyn library to
replicate his examples. However, I for the life of me cannot understand how
to include seasonal dummy variables in tsDyn:VECM. 

The time series Lutkepohl uses is bivariate quarterly data from 1972 Q2 to
1998 Q4. The procedure I would like to use is: 

library(tsDyn) 

e6ts = read.table('e6.dat', header = TRUE) 
e6ts = ts(e6ts, start = c(1972,2), frequency=4) 

e6ts.vecm.ml = VECM(e6ts, lag=3, r=1, include='const', estim='ML', LRinclude
= ???) 

It is here where I get stuck. I want to include seasonal dummy variables of
the sort D = (1,s1,s2,s3)'. However, I have no clue how to set up this
matrix so that I can include it with LRinclude. In fact, whenever I try to
put any matrix for LRinclude, such as LRinclude = D, it tells me that it
must be NULL or a character vector. 

Can someone please be so kind and lead me though performing this example. I
really need to learn how to do this. 

Thanking you in advance. 

Mirza T.

--
View this message in context: http://r.789695.n4.nabble.com/Seasonal-Dummy-Variables-in-VECM-tsDyn-tp3845323p3845323.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From john.kerpel at gmail.com  Mon Sep 26 23:13:30 2011
From: john.kerpel at gmail.com (John Kerpel)
Date: Mon, 26 Sep 2011 16:13:30 -0500
Subject: [R-SIG-Finance] Date conversion using POSIXct
Message-ID: <CAALU2hvBh-phOxvJABXbQHba5e1NNpMXKmi8OhURBKiPO8n3AA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110926/b72953c9/attachment.pl>

From john.kerpel at gmail.com  Mon Sep 26 23:30:26 2011
From: john.kerpel at gmail.com (John Kerpel)
Date: Mon, 26 Sep 2011 16:30:26 -0500
Subject: [R-SIG-Finance] Follw-up: Date conversion using POSIXct
Message-ID: <CAALU2hs3e7rUGu3_Xmb38PKFp5dqY=4iEV4ighSBgFrNDxXJGA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110926/1764306b/attachment.pl>

From chris.is.fun at gmail.com  Tue Sep 27 05:20:43 2011
From: chris.is.fun at gmail.com (Chris Waggoner)
Date: Mon, 26 Sep 2011 21:20:43 -0600
Subject: [R-SIG-Finance] quantmod: overlay plots
Message-ID: <CADFr+DUYWF2FFA7KrA9T32MyjTVcrSq_rkm9J8LRJ78-M42Ezw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110926/86fdaf84/attachment.pl>

From gmonaie at gmail.com  Tue Sep 27 05:28:12 2011
From: gmonaie at gmail.com (Gei Lin)
Date: Mon, 26 Sep 2011 23:28:12 -0400
Subject: [R-SIG-Finance] quantmod: overlay plots
In-Reply-To: <CADFr+DUYWF2FFA7KrA9T32MyjTVcrSq_rkm9J8LRJ78-M42Ezw@mail.gmail.com>
References: <CADFr+DUYWF2FFA7KrA9T32MyjTVcrSq_rkm9J8LRJ78-M42Ezw@mail.gmail.com>
Message-ID: <CAJFvkcdhX8-dxQ6xzRdG=OFcSnhwS4XKb3=Uw4krhEg6BioBmw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110926/ad9632e0/attachment.pl>

From chris at chrisbird.com  Tue Sep 27 10:15:34 2011
From: chris at chrisbird.com (chrisbird)
Date: Tue, 27 Sep 2011 01:15:34 -0700 (PDT)
Subject: [R-SIG-Finance] Filtering dates/times from zoo/xts series
In-Reply-To: <CAPLrYEQh=EPhD7HD4H0Cx+NyEkr9expMrMCHoea-hiR=yc4Akw@mail.gmail.com>
References: <1317021897117-3842937.post@n4.nabble.com>
	<1317023283837-3842989.post@n4.nabble.com>
	<1317034127.4192.236.camel@brian-desktop>
	<1317035552930-3843408.post@n4.nabble.com>
	<CAPLrYEQh=EPhD7HD4H0Cx+NyEkr9expMrMCHoea-hiR=yc4Akw@mail.gmail.com>
Message-ID: <1317111334475-3846457.post@n4.nabble.com>

Daniel,

It appeared that I needed to use as.xts to coerce my dataseries and then the
[] operator with time functioned correctly. Thanks.

Chris.




--
View this message in context: http://r.789695.n4.nabble.com/Filtering-dates-times-from-zoo-xts-series-tp3842937p3846457.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From DAvery at marketingleverage.com  Tue Sep 27 14:25:35 2011
From: DAvery at marketingleverage.com (Dan Avery)
Date: Tue, 27 Sep 2011 05:25:35 -0700
Subject: [R-SIG-Finance] Quantstrat Delayed Execution
Message-ID: <11BAA7190200EE479F35AB150B22248714BD3211E0@VA3DIAXVS131.RED001.local>

I'd like some guidance on how to use quantstrat to execute an order some number of bars after the signal - typically the next bar. The default seems to be to execute on the same bar as the signal. 

I have read a few threads that seem to indicate the "delay" function is a) designed more for intra-day data or b) hasn't yet been well tested. One solution suggested was to lag the signal but I haven't been able to get that to work.  I've spent some time trying to understand the workflow to see how to modify a function to do what I'd like. However, I'm having trouble understanding the work flow. So far I have been able to track the following: applyStrategy calls applyRules which in turn calls ruleProc or ruleOrderProc which calls addOrder [at least in some instances].

I'm not sure I've got the workflow correct. So one question is - is there a map or some type of development tool - or entity-relationship diagram available? However, the main question is - what is the recommended or best way to manage order execution timing?


Thanks
Dan Avery 

   

From anna.dunietz at gmail.com  Tue Sep 27 14:42:56 2011
From: anna.dunietz at gmail.com (Anna Dunietz)
Date: Tue, 27 Sep 2011 14:42:56 +0200
Subject: [R-SIG-Finance] SMA & large n
Message-ID: <CAGejiYbb6mLSUX+zHe-0WnWgMU0b0T_jZWYWpX64XWag3+97yw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110927/44f4dafe/attachment.pl>

From josh.m.ulrich at gmail.com  Tue Sep 27 14:54:17 2011
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 27 Sep 2011 07:54:17 -0500
Subject: [R-SIG-Finance] SMA & large n
In-Reply-To: <CAGejiYbb6mLSUX+zHe-0WnWgMU0b0T_jZWYWpX64XWag3+97yw@mail.gmail.com>
References: <CAGejiYbb6mLSUX+zHe-0WnWgMU0b0T_jZWYWpX64XWag3+97yw@mail.gmail.com>
Message-ID: <CAPPM_gTO-YeOaDy3yG-RwWrm3v-yuzm2v2-sf1DL2GEoTC=5PA@mail.gmail.com>

After the call to to.monthly(), SPY only has 180 rows.  Quite simply,
you can't take a 377-period MA of a series that only has 180
observations.
--
Joshua Ulrich ?| ?FOSS Trading: www.fosstrading.com



On Tue, Sep 27, 2011 at 7:42 AM, Anna Dunietz <anna.dunietz at gmail.com> wrote:
> Hi List!
>
> I would like to calculate the 377-day simple moving average on closing
> prices using the SMA function, but an error is always returned:
>
>
>
> SMA(Cl(SPY),n=377)Error in runSum(x, n) : Invalid 'n'
>
>
>
> Here is some code in order for you to quickly reproduce what I am doing:
>
>
>
> getSymbols("SPY", from='1995-01-01', to='2010-01-01',
> index.class=c("POSIXt","POSIXct"))
>
> SPY = to.monthly(SPY, indexAt='endof')
>
> mysma<-SMA(Cl(SPY),n=377)
>
>
>
> Thank you very much!
>
>
>
> Anna
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From edd at debian.org  Tue Sep 27 15:02:08 2011
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 27 Sep 2011 08:02:08 -0500
Subject: [R-SIG-Finance] SMA & large n
In-Reply-To: <CAGejiYbb6mLSUX+zHe-0WnWgMU0b0T_jZWYWpX64XWag3+97yw@mail.gmail.com>
References: <CAGejiYbb6mLSUX+zHe-0WnWgMU0b0T_jZWYWpX64XWag3+97yw@mail.gmail.com>
Message-ID: <20097.51536.864153.689678@max.nulle.part>


On 27 September 2011 at 14:42, Anna Dunietz wrote:
| I would like to calculate the 377-day simple moving average on closing
| prices using the SMA function, but an error is always returned:
| 
| 
| 
| SMA(Cl(SPY),n=377)Error in runSum(x, n) : Invalid 'n'
| 
| 
| 
| Here is some code in order for you to quickly reproduce what I am doing:
| 
| 
| 
| getSymbols("SPY", from='1995-01-01', to='2010-01-01',
| index.class=c("POSIXt","POSIXct"))
| 
| SPY = to.monthly(SPY, indexAt='endof')
| 
| mysma<-SMA(Cl(SPY),n=377)

Monthly data from Jan 1995 to Jan 2010 covers 181 months:

   R> mm <- seq(as.Date("1995-01-01"), as.Date("2010-01-01"), by="month")
   R> head(mm)
   [1] "1995-01-01" "1995-02-01" "1995-03-01" "1995-04-01" "1995-05-01" "1995-06-01"
   R> length(mm)
   [1] 181
   R> 

You cannot run a moving average of length 377 over 181 observations.  

Maybe the magic number 377 came from daily data and you now want something
like 377 / 21 or about 18?

Dirk

-- 
New Rcpp master class for R and C++ integration is scheduled for 
San Francisco (Oct 8), more details / reg.info available at
http://www.revolutionanalytics.com/products/training/public/rcpp-master-class.php


From gsee000 at gmail.com  Tue Sep 27 15:39:45 2011
From: gsee000 at gmail.com (G See)
Date: Tue, 27 Sep 2011 08:39:45 -0500
Subject: [R-SIG-Finance] quantmod: overlay plots
In-Reply-To: <CAJFvkcdhX8-dxQ6xzRdG=OFcSnhwS4XKb3=Uw4krhEg6BioBmw@mail.gmail.com>
References: <CADFr+DUYWF2FFA7KrA9T32MyjTVcrSq_rkm9J8LRJ78-M42Ezw@mail.gmail.com>
	<CAJFvkcdhX8-dxQ6xzRdG=OFcSnhwS4XKb3=Uw4krhEg6BioBmw@mail.gmail.com>
Message-ID: <CA+xi=qaqprRQHsWb-9FjNdyHiO1csMq4bPFeF3C+6C-452jaoQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110927/5691f764/attachment.pl>

From bbands at gmail.com  Tue Sep 27 18:51:25 2011
From: bbands at gmail.com (BBands)
Date: Tue, 27 Sep 2011 09:51:25 -0700
Subject: [R-SIG-Finance] SMA & large n
In-Reply-To: <20097.51536.864153.689678@max.nulle.part>
References: <CAGejiYbb6mLSUX+zHe-0WnWgMU0b0T_jZWYWpX64XWag3+97yw@mail.gmail.com>
	<20097.51536.864153.689678@max.nulle.part>
Message-ID: <CAGS5yBWt=n_-sWqUCKH=Y3GBVpJB1OQupKMe0DisO6+Qv2wc3w@mail.gmail.com>

On Tue, Sep 27, 2011 at 6:02 AM, Dirk Eddelbuettel <edd at debian.org> wrote:
> Maybe the magic number 377...

That magic number is the 14th Fibonacci number, which raises an
interesting question. Is there an R resource that allows one to enter
a number and returns a list of which common number series it belongs
to? For example 377 is a member of the Fibonacci series, an odd
number, but it is not prime.

Best,

John


From peter at braverock.com  Tue Sep 27 18:54:50 2011
From: peter at braverock.com (Peter Carl)
Date: Tue, 27 Sep 2011 11:54:50 -0500
Subject: [R-SIG-Finance] Open to Close to Open data transformation
 (quantmod, xts and possibly zoo) + chart.TimeSeries
In-Reply-To: <CABfqsR8zZjCcssqUD26=-JvA0qotnWJes39bvPvLCTqYmDQFaw@mail.gmail.com>
References: <CABfqsR8zZjCcssqUD26=-JvA0qotnWJes39bvPvLCTqYmDQFaw@mail.gmail.com>
Message-ID: <36a3f7288db65a439b789d45717ee8fc.squirrel@mail.braverock.com>

You may have already figured this out, but the dates have to appear in the
timeseries at the same granularity you are looking to match.

> chart.TimeSeries(newdata, date.format="%d-%m-%y", period.areas =
list(c("03-01-2011","05-06-2011")), period.color = "blue", lwd = 2)

should be...

> chart.TimeSeries(newdata, date.format="%d-%m-%y", period.areas =
list(c("2011-01-03","2011-06-06")), period.color = "blue", lwd = 2)

... where the list of areas is specified in 8601 format.  Also note that
the fifth of June does not appear in your data series.  If you are looking
to match at a higher granularity, then period.areas = list(c("2011-01",
"2011-05")) would also work.

HTH,

pcc
-- 
Peter Carl
http://www.braverock.com/~peter

> Thanks again.
>
> One more point:
>
> When I try
>
> chart.TimeSeries(newdata, date.format="%d-%m-%y", period.areas =
> list(c("03-01-2011","05-06-2011")), period.color = "blue", lwd = 2)
>
> I can't get the event period shadings.
>
> This has to do I guess with the fact that 2 prices have the same data
> though different hourly time signature.
>
> Is this correct and how do I rectify it?
>
> I've been trying around with formats but no result so far.
>
> On 23 September 2011 14:56, G See <gsee000 at gmail.com> wrote:
>> FWIW, I misread the docs for getSymbols.yahoo which says
>> ? ? ?In the case of xts objects, the indexing will be by Date. This can
>> ? ? ?be altered with the ?index.class? argument. ?See ?indexClass? for
>> ? ? ?more information on changing index classes.
>> So, this should be perfectly acceptable as well:
>> medata <- getSymbols("^GSPC",
>> ? ? ? ? from=Sys.Date()-400,
>> ? ? ? ? index.class='POSIXct',
>> ? ? ? ? auto.assign=FALSE)
>> opens <- Op(medata)
>> closes <- Cl(medata)
>> index(opens) <- index(opens) + (60*60*8) + (60*30)
>> index(closes) <- index(closes) + (60*60*15)
>> newdata <- rbind(opens,closes)
>> colnames(newdata) <- "GSPC.OC"
>>> tail(newdata)
>> ? ? ? ? ? ? ? ? ? ? GSPC.OC
>> 2011-09-20 08:30:00 1204.50
>> 2011-09-20 15:00:00 1202.09
>> 2011-09-21 08:30:00 1203.63
>> 2011-09-21 15:00:00 1166.76
>> 2011-09-22 08:30:00 1164.55
>> 2011-09-22 15:00:00 1129.56
>>
>> On Fri, Sep 23, 2011 at 8:25 AM, G See <gsee000 at gmail.com> wrote:
>>>
>>> Hi Costas,
>>> You need an indexClass that can handle times. ?By default
>>> getSymbols.yahoo
>>> gives you an object with 'Date' indexClass which you need to change to
>>> something like 'POSIXct' or 'POSIXlt'
>>> (You *can* do this directly in your getSymbols call using the argument
>>> index.class='POSIXct', but the documentation says only "Date" is
>>> supported,
>>> so I'll do it the other way)
>>> require(quantmod)
>>> getSymbols("^GSPC",from='1990-01-01')
>>> medata <- tail(GSPC, 400)
>>> indexClass(medata) <- "POSIXct"
>>> opens <- Op(medata)
>>> closes <- Cl(medata)
>>> index(opens) <- index(opens) + (60*60*8) + (60*30)
>>> index(closes) <- index(closes) + (60*60*15)
>>> newdata <- rbind(opens,closes)
>>> colnames(newdata) <- "GSPC.OC"
>>> > tail(newdata)
>>> ? ? ? ? ? ? ? ? ? ? GSPC.OC
>>> 2011-09-20 08:30:00 1204.50
>>> 2011-09-20 15:00:00 1202.09
>>> 2011-09-21 08:30:00 1203.63
>>> 2011-09-21 15:00:00 1166.76
>>> 2011-09-22 08:30:00 1164.55
>>> 2011-09-22 15:00:00 1129.56
>>> Regards,
>>> Garrett
>>> On Fri, Sep 23, 2011 at 4:50 AM, Costas Vorlow
>>> <costas.vorlow at gmail.com>
>>> wrote:
>>>>
>>>> Hello,
>>>>
>>>> I want to put in order (preferably as a zoo or xts object with a
>>>> suitable
>>>> timestamp)
>>>> the open anc closing prices of an (say) index downloaded from YAHOO
>>>> finance:
>>>>
>>>> require(quantmod)
>>>> getSymbols('^GSPC',from='1990-01-01')
>>>>
>>>> medata<- tail((GSPC),400)
>>>> opens<-Op(medata)
>>>> closes<-Cl(medata)
>>>>
>>>> i.e., I want ?asingle sequence of ?1095.89, ? ?1105.24 , 1101.24 ,
>>>> 1102.94, and so on ... preferably with a timestamp (morning - evening
>>>> of
>>>> same day as for daily prices zoo does not like the same date in two
>>>> consecutive prices...
>>>>
>>>> > head(merge(opens,closes))
>>>> ? ? ? ? ? GSPC.Open GSPC.Close
>>>> 2010-02-24 ? 1095.89 ? ?1105.24
>>>> 2010-02-25 ? 1101.24 ? ?1102.94
>>>> 2010-02-26 ? 1103.10 ? ?1104.49
>>>> 2010-03-01 ? 1105.36 ? ?1115.71
>>>> 2010-03-02 ? 1117.01 ? ?1118.31
>>>> 2010-03-03 ? 1119.36 ? ?1118.79
>>>> >
>>>> >
>>>> Probably I could use the OpCl in quantmod and caclulate the Cl price
>>>> from
>>>> Op, though Is there any easy way using some implicit zoo/xts function
>>>> for
>>>> this? I have problems in puting the timestamps in the xts vobject.
>>>>
>>>> Thanks,
>>>> Costas
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R
>>>> questions
>>>> should go.
>>>
>>
>>
>
>
>
> --
>
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
> |c|o|s|t|a|s|@|v|o|r|l|o|w|.|o|r|g|
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


From David.Reiner at xrtrading.com  Tue Sep 27 19:53:14 2011
From: David.Reiner at xrtrading.com (David Reiner)
Date: Tue, 27 Sep 2011 12:53:14 -0500
Subject: [R-SIG-Finance] [SPAM] - Re: SMA & large n - Email found in
 subject
In-Reply-To: <CAGS5yBWt=n_-sWqUCKH=Y3GBVpJB1OQupKMe0DisO6+Qv2wc3w@mail.gmail.com>
References: <CAGejiYbb6mLSUX+zHe-0WnWgMU0b0T_jZWYWpX64XWag3+97yw@mail.gmail.com><20097.51536.864153.689678@max.nulle.part>
	<CAGS5yBWt=n_-sWqUCKH=Y3GBVpJB1OQupKMe0DisO6+Qv2wc3w@mail.gmail.com>
Message-ID: <9DE405308A6AA24AA794B76282C6C00F0A069BF137@HQ-POST1>

I suppose an interface to Wikipedia might be possible? http://en.wikipedia.org/wiki/377_%28number%29#370s
"377 = 13 ? 29, Fibonacci number, sum of the squares of the first six primes."

Not directly in answer to your question, but I have found these sites very useful for decimals and sequences:

Plouffe's Inverter (for decimals) 3.141592653589793238462: http://pi.lacim.uqam.ca/eng/
and
On-Line Encyclopedia of Integer Sequences(tm) (OEIS(tm)): http://oeis.org/

Hope this helps someone sometime,
-- David


-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of BBands
Sent: Tuesday, September 27, 2011 11:51 AM
To: R-sig-finance
Subject: [SPAM] - Re: [R-SIG-Finance] SMA & large n - Email found in subject

On Tue, Sep 27, 2011 at 6:02 AM, Dirk Eddelbuettel <edd at debian.org> wrote:
> Maybe the magic number 377...

That magic number is the 14th Fibonacci number, which raises an interesting question. Is there an R resource that allows one to enter a number and returns a list of which common number series it belongs to? For example 377 is a member of the Fibonacci series, an odd number, but it is not prime.

Best,

John

_______________________________________________
R-SIG-Finance at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


This e-mail and any materials attached hereto, including, without limitation, all content hereof and thereof (collectively, "XR Content") are confidential and proprietary to XR Trading, LLC ("XR") and/or its affiliates, and are protected by intellectual property laws.  Without the prior written consent of XR, the XR Content may not (i) be disclosed to any third party or (ii) be reproduced or otherwise used by anyone other than current employees of XR or its affiliates, on behalf of XR or its affiliates.

THE XR CONTENT IS PROVIDED AS IS, WITHOUT REPRESENTATIONS OR WARRANTIES OF ANY KIND.  TO THE MAXIMUM EXTENT PERMISSIBLE UNDER APPLICABLE LAW, XR HEREBY DISCLAIMS ANY AND ALL WARRANTIES, EXPRESS AND IMPLIED, RELATING TO THE XR CONTENT, AND NEITHER XR NOR ANY OF ITS AFFILIATES SHALL IN ANY EVENT BE LIABLE FOR ANY DAMAGES OF ANY NATURE WHATSOEVER, INCLUDING, BUT NOT LIMITED TO, DIRECT, INDIRECT, CONSEQUENTIAL, SPECIAL AND PUNITIVE DAMAGES, LOSS OF PROFITS AND TRADING LOSSES, RESULTING FROM ANY PERSON'S USE OR RELIANCE UPON, OR INABILITY TO USE, ANY XR CONTENT, EVEN IF XR IS ADVISED OF THE POSSIBILITY OF SUCH DAMAGES OR IF SUCH DAMAGES WERE FORESEEABLE.


From rex at nosyntax.net  Tue Sep 27 22:58:11 2011
From: rex at nosyntax.net (rex)
Date: Tue, 27 Sep 2011 13:58:11 -0700
Subject: [R-SIG-Finance] quantmod: overlay plots
In-Reply-To: <CA+xi=qaqprRQHsWb-9FjNdyHiO1csMq4bPFeF3C+6C-452jaoQ@mail.gmail.com>
References: <CADFr+DUYWF2FFA7KrA9T32MyjTVcrSq_rkm9J8LRJ78-M42Ezw@mail.gmail.com>
	<CAJFvkcdhX8-dxQ6xzRdG=OFcSnhwS4XKb3=Uw4krhEg6BioBmw@mail.gmail.com>
	<CA+xi=qaqprRQHsWb-9FjNdyHiO1csMq4bPFeF3C+6C-452jaoQ@mail.gmail.com>
Message-ID: <20110927205811.GC23941@honker>

G See <gsee000 at gmail.com> [2011-09-27 06:41]:
>If you follow the first alternative suggested by Gei and use
>PerformanceAnalytics, the RF function (which is an alias for
>makeReturnFrame) in my qmao
>package<https://r-forge.r-project.org/R/?group_id=1113> can
>assist you in merging the data.
>
>library(qmao)
>library(PerformanceAnalytics)
>charts.PerformanceSummary(RF(getSymbols(c("QQQ","EWG","EWI"))))

Very nice! Thank you for creating this package.

>The chart_Series function (note the underscore) can also handle multiple
>time series
>
>library(quantmod)
>getSymbols(c("SPY","DIA"))
>
># This will put 2 price series on a chart
>thm <- chart_theme()
>thm$col$line.col <- 'lightblue'
>chart_Series(Cl(SPY),theme=thm)
>add_Series(Cl(DIA),on=1)

Add thanks to Jeff for adding this capability -- I've wanted it for
years.

-rex
--


From worik.stanton at gmail.com  Tue Sep 27 23:14:51 2011
From: worik.stanton at gmail.com (Worik Stanton)
Date: Wed, 28 Sep 2011 10:14:51 +1300
Subject: [R-SIG-Finance] Test data
Message-ID: <4E823CCB.8090209@gmail.com>

I am about to generate some data to test some technical analysis functions.

I expect I am not the first!  Has anybody some advice about where to 
look for some data sets?

What I need, naturally,  is pairs of series, input and output.  I expect 
I can roll my own without too much difficulty but...

cheers
Worik

-- 
The hippies were right


From edd at debian.org  Tue Sep 27 23:32:17 2011
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 27 Sep 2011 16:32:17 -0500
Subject: [R-SIG-Finance] Test data
In-Reply-To: <4E823CCB.8090209@gmail.com>
References: <4E823CCB.8090209@gmail.com>
Message-ID: <20098.16609.510324.151514@max.nulle.part>


On 28 September 2011 at 10:14, Worik Stanton wrote:
| I am about to generate some data to test some technical analysis functions.
| 
| I expect I am not the first!  Has anybody some advice about where to 
| look for some data sets?
| 
| What I need, naturally,  is pairs of series, input and output.  I expect 
| I can roll my own without too much difficulty but...

As so often, Pat Burns has already been there and done that.  See this

   Patrick Burns. "The Technical Analysis Challenge" (pdf) This draft: 2003
   October 07

   Abstract: We report on a study of the ability of analysts to distinguish
   an actual price series of an equity from random alternatives. Virtually
   all of the statistical tests on the results support the hypothesis that no
   skill was exhibited in selecting the correct response. Many of the
   analysts were extremely over-confident about their ability to select
   correct answers. The one area where it seems skill might have been
   exhibited is in the selection of correct answers that happened to be far
   from the random choices.

   Pointers to the graphs and data for the test, results of the participants,
   and so on can be found here. Instructions for using the data in R are in R
   for the Technical Analysis Challenge.

from the page at http://www.burns-stat.com/pages/working.html where you can
find links to paper(s), code and data.

Hope this helps,  Dirk

 
| cheers
| Worik
| 
| -- 
| The hippies were right
| 
| _______________________________________________
| R-SIG-Finance at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-sig-finance
| -- Subscriber-posting only. If you want to post, subscribe first.
| -- Also note that this is not the r-help list where general R questions should go.

-- 
New Rcpp master class for R and C++ integration is scheduled for 
San Francisco (Oct 8), more details / reg.info available at
http://www.revolutionanalytics.com/products/training/public/rcpp-master-class.php


From johnzli at comcast.net  Wed Sep 28 00:18:48 2011
From: johnzli at comcast.net (johnzli at comcast.net)
Date: Tue, 27 Sep 2011 22:18:48 +0000 (UTC)
Subject: [R-SIG-Finance] question related to fixed parameters in "rugarch"
	package
Message-ID: <101316507.101001.1317161928100.JavaMail.root@sz0053a.emeryville.ca.mail.comcast.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110927/6a51dfae/attachment.pl>

From alexios at 4dscape.com  Wed Sep 28 00:34:40 2011
From: alexios at 4dscape.com (alexios)
Date: Tue, 27 Sep 2011 23:34:40 +0100
Subject: [R-SIG-Finance] question related to fixed parameters in
 "rugarch" package
In-Reply-To: <101316507.101001.1317161928100.JavaMail.root@sz0053a.emeryville.ca.mail.comcast.net>
References: <101316507.101001.1317161928100.JavaMail.root@sz0053a.emeryville.ca.mail.comcast.net>
Message-ID: <4E824F80.2090104@4dscape.com>

The fact that ar3 is not 0 is a bug. Will look into it and release a fix 
soon.

Thanks, Alexios

On 27/09/2011 23:18, johnzli at comcast.net wrote:
> Dear all:
>
> I am trying to learn how to use "rugarch" package for ARIMA + sGARCH modeling. When I tried to fix some parameters (statistically insignificant coefficients), I got the following output:
>
> *---------------------------------*
> *          GARCH Model Fit        *
> *---------------------------------*
>
> Conditional Variance Dynamics
> -----------------------------------
> GARCH Model     : sGARCH(1,1)
> Mean Model      : ARFIMA(4,0,0)
> Distribution    : std
>
> Optimal Parameters
> ------------------------------------
>          Estimate  Std. Error  t value Pr(>|t|)
> ar1     0.000000          NA       NA       NA
> ar2     0.630141    0.024459  25.7627  0.0e+00
> ar3     0.085549          NA       NA       NA
> ar4    -0.244984    0.022802 -10.7439  0.0e+00
> omega   0.004524    0.001050   4.3097  1.6e-05
> alpha1  0.266026    0.045341   5.8672  0.0e+00
> beta1   0.569310    0.070464   8.0795  0.0e+00
> shape   7.382851    0.898399   8.2178  0.0e+00
>
> Robust Standard Errors:
>          Estimate  Std. Error  t value Pr(>|t|)
> ar1     0.000000          NA       NA       NA
> ar2     0.630141    0.028354  22.2244 0.000000
> ar3     0.085549          NA       NA       NA
> ar4    -0.244984    0.027248  -8.9908 0.000000
> omega   0.004524    0.001524   2.9696 0.002982
> alpha1  0.266026    0.060709   4.3820 0.000012
> beta1   0.569310    0.107354   5.3031 0.000000
> shape   7.382851    1.443335   5.1151 0.000000
>
> LogLikelihood : 1165.098
>
> Information Criteria
> ------------------------------------
>
> And here is the code:
>
>
> spec<- ugarchspec(variance.model = list(model = "sGARCH", garchOrder = c(1,1)), mean.model = list(armaOrder = c(4, 0), include.mean = FALSE), distribution.model = "std", start.pars = startPar, fixed.pars = list(ar1 = 0,ar3 = 0))fit<- ugarchfit(data = myData, spec = spec1, solver = "nlminb")
>
> Is it true that the coefficients for ar1 and ar3 should be 0.0 or set to NA?
>
> Your help will be appreciated.
>
>
> John Li
> (224) 372-7082
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>


From john.laing at gmail.com  Wed Sep 28 04:19:00 2011
From: john.laing at gmail.com (John Laing)
Date: Tue, 27 Sep 2011 22:19:00 -0400
Subject: [R-SIG-Finance] RBloomberg connection options
In-Reply-To: <9DE405308A6AA24AA794B76282C6C00F0A069BEEFA@HQ-POST1>
References: <9DE405308A6AA24AA794B76282C6C00F0A069BEEFA@HQ-POST1>
Message-ID: <CAA3Wa=v9JbK6bWbLtdSYFChFXb5_urtEZ6jquCk4F7uYjEjfVg@mail.gmail.com>

David,

These options in the RBloomberg package correspond directly to options
that Bloomberg exposes through the API. I haven't been able to come up
with any cases where the options do interesting things, but they would
be set through a bdp (or similar) call like this:

bdp(conn, "GOOG Equity", "PX_LAST", option_names =
"includeExchangeCodes", option_values = "TRUE")

Sorry if that's not especially helpful... If I come up with a better
example I'll be sure to let you know.

John

On Thu, Sep 22, 2011 at 10:22 AM, David Reiner
<David.Reiner at xrtrading.com> wrote:
> Thanks to Ana and John for this great package!
>
> I am intrigued by the options shown in one example, but clueless as to how to take advantage of them.
> How do we set useUTCTime to FALSE ?
> Here's the example that shows there is such an option:
>
>> library(RBloomberg)
>> conn <- blpConnect()
>> conn$BOOLEAN_OPTION_NAMES
> ?[1] "useUTCTime" ? ? ? ? ? ? ? ?"returnRelativeDate" ? ? ? ?"adjustmentNormal" ? ? ? ? ?"adjustmentAbnormal"
> ?[5] "adjustmentSplit" ? ? ? ? ? "adjustmentFollowDPDF" ? ? ?"returnEids" ? ? ? ? ? ? ? ?"includeConditionCodes"
> ?[9] "includeNonPlottableEvents" "includeExchangeCodes"
>
> I tried conn$ useUTCTime and conn@ useUTCTime, and
> conn <- blpConnect(useUTCTime=FALSE)
> but none of these make sense to the package.
>
> Thanks for the help,
> David L. Reiner, Ph.D.
> Head Quant
> XR Trading LLC
> 550 West Jackson Boulevard, Suite 1000
> Chicago, IL 60661-5704
> (312) 244-4610?direct
> (312) 244-4500?main
> David.Reiner at xrtrading.com
>
>
>
> This e-mail and any materials attached hereto, including, without limitation, all content hereof and thereof (collectively, "XR Content") are confidential and proprietary to XR Trading, LLC ("XR") and/or its affiliates, and are protected by intellectual property laws. ?Without the prior written consent of XR, the XR Content may not (i) be disclosed to any third party or (ii) be reproduced or otherwise used by anyone other than current employees of XR or its affiliates, on behalf of XR or its affiliates.
>
> THE XR CONTENT IS PROVIDED AS IS, WITHOUT REPRESENTATIONS OR WARRANTIES OF ANY KIND. ?TO THE MAXIMUM EXTENT PERMISSIBLE UNDER APPLICABLE LAW, XR HEREBY DISCLAIMS ANY AND ALL WARRANTIES, EXPRESS AND IMPLIED, RELATING TO THE XR CONTENT, AND NEITHER XR NOR ANY OF ITS AFFILIATES SHALL IN ANY EVENT BE LIABLE FOR ANY DAMAGES OF ANY NATURE WHATSOEVER, INCLUDING, BUT NOT LIMITED TO, DIRECT, INDIRECT, CONSEQUENTIAL, SPECIAL AND PUNITIVE DAMAGES, LOSS OF PROFITS AND TRADING LOSSES, RESULTING FROM ANY PERSON'S USE OR RELIANCE UPON, OR INABILITY TO USE, ANY XR CONTENT, EVEN IF XR IS ADVISED OF THE POSSIBILITY OF SUCH DAMAGES OR IF SUCH DAMAGES WERE FORESEEABLE.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From cbajpai at gmail.com  Wed Sep 28 05:12:28 2011
From: cbajpai at gmail.com (chandra bajpai)
Date: Tue, 27 Sep 2011 23:12:28 -0400
Subject: [R-SIG-Finance] Weird problem with latest RQuantLib not working
	with QuantMod on R 2.13.1
Message-ID: <CANFurGZYvOd=76vLuYEB+pP1s-o5YcZmOmsWO0mpFMJ2eG8L8w@mail.gmail.com>

Hi,
I just got a new machine and installed a fresh version of R 2.13.1
(latest version) and
I think I found a problem with RQuantLib causing a problem an external
module (QuantMod).

I've got a 3 line program that shows the problem:

R Version - R 2.13.1  (32 bit)
OS: WIndows 7-64 bit
RQuantLib ver: 0.3.8
QuantMod ver: 0.3-17

R Test Program Execution:

> library(quantmod)
> library(RQuantLib)
Loading required package: Rcpp
>
> getSymbols("GOOG", from = "2011-05-01", to="2011-05-30", auto.assign = FALSE)
Error in if (adjust) { : argument is not interpretable as logical
>

Now if I comment out library(RQuantLib), it works perfectly.

What am I doing wrong?  Any workaround?
bw - This works perfectly on my R 2.11.1 machine.

Thanks,
Chandra


From michael.weylandt at gmail.com  Wed Sep 28 05:21:57 2011
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Tue, 27 Sep 2011 23:21:57 -0400
Subject: [R-SIG-Finance] Weird problem with latest RQuantLib not working
 with QuantMod on R 2.13.1
In-Reply-To: <CANFurGZYvOd=76vLuYEB+pP1s-o5YcZmOmsWO0mpFMJ2eG8L8w@mail.gmail.com>
References: <CANFurGZYvOd=76vLuYEB+pP1s-o5YcZmOmsWO0mpFMJ2eG8L8w@mail.gmail.com>
Message-ID: <CAAmySGOCsWSj_7p-WMpNcqnkroBzYxKzWWcpxNdmV0KcEP7e8g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110927/11e85a2e/attachment.pl>

From cbajpai at gmail.com  Wed Sep 28 05:27:09 2011
From: cbajpai at gmail.com (chandra bajpai)
Date: Tue, 27 Sep 2011 23:27:09 -0400
Subject: [R-SIG-Finance] Weird problem with latest RQuantLib not working
 with QuantMod on R 2.13.1
In-Reply-To: <CAAmySGOCsWSj_7p-WMpNcqnkroBzYxKzWWcpxNdmV0KcEP7e8g@mail.gmail.com>
References: <CANFurGZYvOd=76vLuYEB+pP1s-o5YcZmOmsWO0mpFMJ2eG8L8w@mail.gmail.com>
	<CAAmySGOCsWSj_7p-WMpNcqnkroBzYxKzWWcpxNdmV0KcEP7e8g@mail.gmail.com>
Message-ID: <CANFurGY+Pd7V98PcyX6ibF86ovwJj6OM2GDi2HQYPmZBOTe=bw@mail.gmail.com>

HI Michael...thanks for the quick reply, I'm to to R, how does one
report such a bug?
I wonder if it's the bug exists in 2.12 at all.

Thanks,
Chandra

On Tue, Sep 27, 2011 at 11:21 PM, R. Michael Weylandt
<michael.weylandt at gmail.com> wrote:
> No idea why, but just chiming in to say same problem on my (mac) machine:
>
>> sessionInfo()
> R version 2.13.1 (2011-07-08)
> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>
> locale:
> [1] C/en_US.UTF-8/C/C/C/C
>
> attached base packages:
> [1] stats???? graphics? grDevices utils???? datasets? methods?? base
>
> other attached packages:
> [1] RQuantLib_0.3.8 Rcpp_0.9.6????? quantmod_0.3-17 TTR_0.21-0
> [5] xts_0.8-2?????? zoo_1.7-4?????? Defaults_1.1-1
>
> loaded via a namespace (and not attached):
> [1] grid_2.13.1???? lattice_0.19-33 tools_2.13.1
>
> On Tue, Sep 27, 2011 at 11:12 PM, chandra bajpai <cbajpai at gmail.com> wrote:
>>
>> Hi,
>> I just got a new machine and installed a fresh version of R 2.13.1
>> (latest version) and
>> I think I found a problem with RQuantLib causing a problem an external
>> module (QuantMod).
>>
>> I've got a 3 line program that shows the problem:
>>
>> R Version - R 2.13.1 ?(32 bit)
>> OS: WIndows 7-64 bit
>> RQuantLib ver: 0.3.8
>> QuantMod ver: 0.3-17
>>
>> R Test Program Execution:
>>
>> > library(quantmod)
>> > library(RQuantLib)
>> Loading required package: Rcpp
>> >
>> > getSymbols("GOOG", from = "2011-05-01", to="2011-05-30", auto.assign =
>> > FALSE)
>> Error in if (adjust) { : argument is not interpretable as logical
>> >
>>
>> Now if I comment out library(RQuantLib), it works perfectly.
>>
>> What am I doing wrong? ?Any workaround?
>> bw - This works perfectly on my R 2.11.1 machine.
>>
>> Thanks,
>> Chandra
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>
>


From michael.weylandt at gmail.com  Wed Sep 28 05:48:18 2011
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Tue, 27 Sep 2011 23:48:18 -0400
Subject: [R-SIG-Finance] Weird problem with latest RQuantLib not working
 with QuantMod on R 2.13.1
In-Reply-To: <CANFurGY+Pd7V98PcyX6ibF86ovwJj6OM2GDi2HQYPmZBOTe=bw@mail.gmail.com>
References: <CANFurGZYvOd=76vLuYEB+pP1s-o5YcZmOmsWO0mpFMJ2eG8L8w@mail.gmail.com>
	<CAAmySGOCsWSj_7p-WMpNcqnkroBzYxKzWWcpxNdmV0KcEP7e8g@mail.gmail.com>
	<CANFurGY+Pd7V98PcyX6ibF86ovwJj6OM2GDi2HQYPmZBOTe=bw@mail.gmail.com>
Message-ID: <CAAmySGOBUpSHip6SScR6Vxn65x60rgR=xRD8AtBgoU2tN3doUQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110927/4272696a/attachment.pl>

From edd at debian.org  Wed Sep 28 06:03:40 2011
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 27 Sep 2011 23:03:40 -0500
Subject: [R-SIG-Finance] Weird problem with latest RQuantLib not working
 with QuantMod on R 2.13.1
In-Reply-To: <CAAmySGOCsWSj_7p-WMpNcqnkroBzYxKzWWcpxNdmV0KcEP7e8g@mail.gmail.com>
References: <CANFurGZYvOd=76vLuYEB+pP1s-o5YcZmOmsWO0mpFMJ2eG8L8w@mail.gmail.com>
	<CAAmySGOCsWSj_7p-WMpNcqnkroBzYxKzWWcpxNdmV0KcEP7e8g@mail.gmail.com>
Message-ID: <20098.40092.575877.184145@max.nulle.part>


Chandra already contacted me too (off-list) and Jeff and I will indeed look
into this.  But as a traceback() immediately shows, the code in quantmod
stumbles over a test where 'adjust' is used. This variable is set earlier if
unset -- and there seems to be a bad side-effect with a (namespace-protected)
function of that name in RQuantLib.

The easiest workaround for now is to ... simply specify adjust=TRUE (or FALSE
depending on what you want).

Here is an example (using littler's r, Rscript would work similarly):

  edd at max:~$ r -lquantmod,RQuantLib -e 'getSymbols("GOOG", from = "2011-05-01", to="2011-05-30", auto.assign = TRUE); print(head(GOOG))'

  Attaching package: 'utils'

  The following object(s) are masked from 'package:Rcpp':

      .DollarNames, prompt

  Error in if (adjust) { : argument is not interpretable as logical
  Execution halted

and by simply adding adjust=TRUE it all works, as it does when RQuantLib is
not loaded:

  edd at max:~$ r -lquantmod,RQuantLib -e 'getSymbols("GOOG", from = "2011-05-01", to="2011-05-30", auto.assign = TRUE, adjust=TRUE); print(head(GOOG))'
  
  Attaching package: 'utils'
  
  The following object(s) are masked from 'package:Rcpp':
  
      .DollarNames, prompt
  
             GOOG.Open GOOG.High GOOG.Low GOOG.Close GOOG.Volume GOOG.Adjusted
  2011-05-02    545.70    545.73   537.12     538.56     2133700        538.56
  2011-05-03    537.13    542.01   529.63     533.89     2081500        533.89
  2011-05-04    535.17    539.00   533.02     535.79     2117000        535.79
  2011-05-05    533.86    539.42   531.50     534.27     1997800        534.27
  2011-05-06    538.15    541.46   535.18     535.30     2056100        535.30
  2011-05-09    535.00    538.49   531.10     537.68     1948700        537.68
  edd at max:~$ 
  

Cheers, Dirk

-- 
New Rcpp master class for R and C++ integration is scheduled for 
San Francisco (Oct 8), more details / reg.info available at
http://www.revolutionanalytics.com/products/training/public/rcpp-master-class.php


From petrovaa at gmail.com  Wed Sep 28 10:56:38 2011
From: petrovaa at gmail.com (tonyp)
Date: Wed, 28 Sep 2011 01:56:38 -0700 (PDT)
Subject: [R-SIG-Finance] Rmetrics Portfolio Optimization issue
Message-ID: <1317200198534-3850427.post@n4.nabble.com>

Hi guys, 

I am using the off-the-shelf codes from the fPortfolio Rmetrics book and for
some reason when I run CVaR or any other optimization from the book code I
get errors. Can you help how to adjust the code?

R1, R5, R2 are return series of assets. 

There are the problems I have:

Error in `colnames<-`(`*tmp*`, value = c("R1", "R5", "R2",  : 
  attempt to set colnames on object with less than two dimensions
In addition: Warning messages:
1: 'cov' is deprecated.
Use 'ccov' instead.
See help("Deprecated") 
2: 'cov' is deprecated.
Use 'ccov' instead.
See help("Deprecated") 


Thanks for the help in advance.
Best wishes,
T

--
View this message in context: http://r.789695.n4.nabble.com/Rmetrics-Portfolio-Optimization-issue-tp3850427p3850427.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From anna.dunietz at gmail.com  Wed Sep 28 11:25:57 2011
From: anna.dunietz at gmail.com (Anna Dunietz)
Date: Wed, 28 Sep 2011 11:25:57 +0200
Subject: [R-SIG-Finance] Stock Model Question!
Message-ID: <CAGejiYbtpupCdtYaG9cKRi1c_a0xNvUyySbLPiMMLYXBMSGSWg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110928/172dede8/attachment.pl>

From brian at braverock.com  Wed Sep 28 12:02:20 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 28 Sep 2011 05:02:20 -0500
Subject: [R-SIG-Finance] Stock Model Question!
In-Reply-To: <CAGejiYbtpupCdtYaG9cKRi1c_a0xNvUyySbLPiMMLYXBMSGSWg@mail.gmail.com>
References: <CAGejiYbtpupCdtYaG9cKRi1c_a0xNvUyySbLPiMMLYXBMSGSWg@mail.gmail.com>
Message-ID: <1317204140.4192.270.camel@brian-desktop>

On Wed, 2011-09-28 at 11:25 +0200, Anna Dunietz wrote:
> 
> I am interested in plotting my portfolio's performance and don't
> exactly know how to do it.  I have built a (not-so-great) model - the
> data below is found below.  I used information on each individual S&P
> 500 stock over the past ~10 years (RSI, moving averages, price
> changes, and price).  Selling the stock occurs when a stop loss or
> take profit is signaled.  The model was built without using the
> blotter or quantstrat packages - it was built with a which function.
> The code is quite long. However, if you think it will be helpful, I
> can always attach it.  I would like inital equity to be $100000,
> and I would like to invest $25000 per buy signal.  I hope this is
> clear enough.  If not, please let me know!
> 
> Thanks!
> Anna
> 
> 
>        BuyDate         Equity BuyPrice Action   SellDate SellPrice
> PerformancePerc.
> 51  2001-07-02  FCX.UN.Equity   5.3600   LONG 2001-07-11    5.9450
>   0.10914179
> 122 2001-07-02  TIE.UN.Equity   2.2875   LONG 2001-07-17    2.6050
>   0.13879781
> 82  2001-07-13    L.UN.Equity  19.2867   LONG 2001-07-20   18.2667
>  -0.05288619 
<...>

Anna,

Of course posting a reproducible example *always* helps.

You have all the data to create a bar chart of returns for each of your
investments, but not a time series of returns. I'll assume you're
looking for a time series chart, for which you must construct a time
series.

To use any of the open source package tools (in R or any other
language!) for backtesting investment models, you'll need either a list
of transactions, or a set of periodic returns.

It seems that you are close to generating this from your code, but
you've munged everything together on one line.  Your output is a nice
summary of actions and results, but insufficient for charting.

It's nice that your summary table includes 'PerformancePerc', and you
could of course use that to generate a total performance if those are
log returns (which would be additive), but your data does not have
enough information to construct a time series of returns from.

You have a few options, which may be easier or harder based on your
other code which you have not shared:

- subset your input asset return time series for times when you are in
the market with each of your instruments, (invert if short), turn each
of those subsets into log returns if they aren't already, apply weights
if necessary, cbind, add each row for portfolio return, and plot your
portfolio return column using charts.PerformanceSummary or similar.

- extract your transactions into a time series by asset.  Feed those
transactions into blotter or equivalent.  If using blotter, use
extractReturns to get your returns out, and use
charts.PerformanceSummary to or equivalent to chart.

- probably least appealing, rewrite your model using one of the packages
 
The key is that to chart your returns, you need the time series with
returns at each point in time, not just the summary output.  Given the
data you've posted, I can't unmix your mixture.  The good news is that
you probably still have all the components in your code, you'll just
need to add some of them to your output.

I'll note that the reason we/I wrote all these packages was to eliminate
most of the issues I ran into every time I wrote a custom one-off model,
because all those standard bits would be done, and I wouldn't have to
redo or adapt custom code each time.  Every model has custom code, of
course, but the idea was to maximise reuse of the common bits and focus
coding on the bits that are specific to one model, to the degree
possible. Of course, you give up something in return, often speed of
execution (though blotter/quantstrat can be very fast, your which
statement could be faster), or some degreee of flexibility.

You indicated that your code is 'quite long'.  It seems likely that your
indicators, signals, and rules for a(ny) model using "RSI, moving
averages, price changes, and price" could be recast in far less code
using quantstrat, though that of course is not necessary, and I trust my
pointers above will point you in the right direction.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From David.Reiner at xrtrading.com  Wed Sep 28 17:57:31 2011
From: David.Reiner at xrtrading.com (David Reiner)
Date: Wed, 28 Sep 2011 10:57:31 -0500
Subject: [R-SIG-Finance] RBloomberg connection options - Email found in
 subject
Message-ID: <9DE405308A6AA24AA794B76282C6C00F0A069BF1E5@HQ-POST1>

Thanks for the response, John.
I tried this:
> tick(conn, "ESA Index", c("BID", "ASK"), "2011-09-28 10:00:00.000", "2011-09-28 10:00:01.000", option_names="useUTCTime",option_values="FALSE")
Error in .jcall("RJavaTools", "Ljava/lang/Object;", "invokeMethod", cl,  : 
  com.bloomberglp.blpapi.NotFoundException: Element Defintion: useUTCTime not found in: IntradayTickRequest

I guess I will have to always remember to shift my times to/from UTC or write a wrapper.
I'm not sure it is supported for intraday tick requests; on WAPI<go> under the API development topics #5,
they seem to indicate that it should work for at least VWAPs, but it's a little hard to know if it applies to others.

Thanks for all your good work on this package!
-- David

> sessionInfo()
R version 2.13.1 Patched (2011-08-17 r56745)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252    LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                           LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] zoo_1.7-3          RBloomberg_0.4-150 rJava_0.9-1       

loaded via a namespace (and not attached):
[1] grid_2.13.1     lattice_0.19-31

-----Original Message-----
From: John Laing [mailto:john.laing at gmail.com] 
Sent: Tuesday, September 27, 2011 9:19 PM
To: David Reiner
Cc: r-sig-finance at r-project.org
Subject:  Re: [R-SIG-Finance] RBloomberg connection options

David,

These options in the RBloomberg package correspond directly to options that Bloomberg exposes through the API. I haven't been able to come up with any cases where the options do interesting things, but they would be set through a bdp (or similar) call like this:

bdp(conn, "GOOG Equity", "PX_LAST", option_names = "includeExchangeCodes", option_values = "TRUE")

Sorry if that's not especially helpful... If I come up with a better example I'll be sure to let you know.

John

On Thu, Sep 22, 2011 at 10:22 AM, David Reiner <David.Reiner at xrtrading.com> wrote:
> Thanks to Ana and John for this great package!
>
> I am intrigued by the options shown in one example, but clueless as to how to take advantage of them.
> How do we set useUTCTime to FALSE ?
> Here's the example that shows there is such an option:
>
>> library(RBloomberg)
>> conn <- blpConnect()
>> conn$BOOLEAN_OPTION_NAMES
> ?[1] "useUTCTime" ? ? ? ? ? ? ? ?"returnRelativeDate" ? ? ? ?"adjustmentNormal" ? ? ? ? ?"adjustmentAbnormal"
> ?[5] "adjustmentSplit" ? ? ? ? ? "adjustmentFollowDPDF" ? ? ?"returnEids" ? ? ? ? ? ? ? ?"includeConditionCodes"
> ?[9] "includeNonPlottableEvents" "includeExchangeCodes"
>
> I tried conn$ useUTCTime and conn@ useUTCTime, and conn <- 
> blpConnect(useUTCTime=FALSE) but none of these make sense to the 
> package.
>
> Thanks for the help,
> David L. Reiner, Ph.D.
> Head Quant
> XR Trading LLC
> 550 West Jackson Boulevard, Suite 1000 Chicago, IL 60661-5704
> (312) 244-4610?direct
> (312) 244-4500?main
> David.Reiner at xrtrading.com
>
>
>
> This e-mail and any materials attached hereto, including, without limitation, all content hereof and thereof (collectively, "XR Content") are confidential and proprietary to XR Trading, LLC ("XR") and/or its affiliates, and are protected by intellectual property laws. ?Without the prior written consent of XR, the XR Content may not (i) be disclosed to any third party or (ii) be reproduced or otherwise used by anyone other than current employees of XR or its affiliates, on behalf of XR or its affiliates.
>
> THE XR CONTENT IS PROVIDED AS IS, WITHOUT REPRESENTATIONS OR WARRANTIES OF ANY KIND. ?TO THE MAXIMUM EXTENT PERMISSIBLE UNDER APPLICABLE LAW, XR HEREBY DISCLAIMS ANY AND ALL WARRANTIES, EXPRESS AND IMPLIED, RELATING TO THE XR CONTENT, AND NEITHER XR NOR ANY OF ITS AFFILIATES SHALL IN ANY EVENT BE LIABLE FOR ANY DAMAGES OF ANY NATURE WHATSOEVER, INCLUDING, BUT NOT LIMITED TO, DIRECT, INDIRECT, CONSEQUENTIAL, SPECIAL AND PUNITIVE DAMAGES, LOSS OF PROFITS AND TRADING LOSSES, RESULTING FROM ANY PERSON'S USE OR RELIANCE UPON, OR INABILITY TO USE, ANY XR CONTENT, EVEN IF XR IS ADVISED OF THE POSSIBILITY OF SUCH DAMAGES OR IF SUCH DAMAGES WERE FORESEEABLE.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From matthieu.stigler at gmail.com  Wed Sep 28 20:07:35 2011
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Wed, 28 Sep 2011 20:07:35 +0200
Subject: [R-SIG-Finance] Seasonal Dummy Variables in VECM (tsDyn)
In-Reply-To: <1317070063077-3845323.post@n4.nabble.com>
References: <1317070063077-3845323.post@n4.nabble.com>
Message-ID: <CAEYvigJghSULeqBAKTTzAhRtfyvsT2O6NQnpnANUJjzJad2rqw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110928/0555d3c1/attachment.pl>

From spetry at quantbench.com  Wed Sep 28 21:15:01 2011
From: spetry at quantbench.com (Stefan Petry)
Date: Wed, 28 Sep 2011 12:15:01 -0700
Subject: [R-SIG-Finance] Displaying candle data for thinly traded stocks
Message-ID: <CAPUJFCXdHp4QgmPM31U3k4SnRL0+2en4=dkdQUbOEkjpJPCe1A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110928/e53eb021/attachment.pl>

From gsee000 at gmail.com  Wed Sep 28 21:19:56 2011
From: gsee000 at gmail.com (G See)
Date: Wed, 28 Sep 2011 14:19:56 -0500
Subject: [R-SIG-Finance] Displaying candle data for thinly traded stocks
In-Reply-To: <CAPUJFCXdHp4QgmPM31U3k4SnRL0+2en4=dkdQUbOEkjpJPCe1A@mail.gmail.com>
References: <CAPUJFCXdHp4QgmPM31U3k4SnRL0+2en4=dkdQUbOEkjpJPCe1A@mail.gmail.com>
Message-ID: <CA+xi=qZMzSogMm7x-inAyP1E17-hqujWotcVDeLwS473-DSBxw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110928/932c9062/attachment.pl>

From jeffrey.ryan at lemnica.com  Wed Sep 28 21:52:32 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Wed, 28 Sep 2011 14:52:32 -0500
Subject: [R-SIG-Finance] Displaying candle data for thinly traded stocks
In-Reply-To: <CAPUJFCXdHp4QgmPM31U3k4SnRL0+2en4=dkdQUbOEkjpJPCe1A@mail.gmail.com>
References: <CAPUJFCXdHp4QgmPM31U3k4SnRL0+2en4=dkdQUbOEkjpJPCe1A@mail.gmail.com>
Message-ID: <CABDUZc-SEZ81bDm84OerMQ-KzqMkAMGvMUbpszUGDUFXxkkCRw@mail.gmail.com>

In addition to 'nothing to do with R' at present, your affiliation
links back to a private beta, which would make me think you are simply
soliciting opinions for commercial purposes.

While the latter is fine I suppose, you haven't provided anyone
anything to motivate a response.

That said, I'd think (ii) is the best option, since I *am* responding.
 Using R's quantmod, times without any trading would be skipped -
either with a gap in a regularized series, or no gap in an irregular
one.  This is pretty consistent with most every implementation I can
think of.

Jeff

On Wed, Sep 28, 2011 at 2:15 PM, Stefan Petry <spetry at quantbench.com> wrote:
> I would appreciate some advice on how to best display candle data for
> sporadically traded stocks.
> Is there any standard or best practice on how to represent a candle during
> which there were zero trades?
>
> The options I can think of are either (i) to draw a candle where OHLC are
> all the same as the closing price of the previous candle or (ii) to not draw
> a candle at all.
> If (i) turns out to be the right answer, which price would you use for the
> periods prior to the first trade?
>
> Thanks a lot!
> Stefan
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From edd at debian.org  Wed Sep 28 21:58:22 2011
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 28 Sep 2011 14:58:22 -0500
Subject: [R-SIG-Finance] Weird problem with latest RQuantLib not working
 with QuantMod on R 2.13.1
In-Reply-To: <20098.40092.575877.184145@max.nulle.part>
References: <CANFurGZYvOd=76vLuYEB+pP1s-o5YcZmOmsWO0mpFMJ2eG8L8w@mail.gmail.com>
	<CAAmySGOCsWSj_7p-WMpNcqnkroBzYxKzWWcpxNdmV0KcEP7e8g@mail.gmail.com>
	<20098.40092.575877.184145@max.nulle.part>
Message-ID: <20099.31838.491135.252189@max.nulle.part>


Chandra,

FYI, here is a simple patch I tossed at Jeff earlier today and which he is
pondering.  In the meantime, apply it to quantmod sources and you're safe
from any interferene from objects named 'adjust' by rewriting the test a
little more conservatively.

Hope this helps,  Dirk


Index: pkg/R/getSymbols.R
===================================================================
--- pkg/R/getSymbols.R	(revision 567)
+++ pkg/R/getSymbols.R	(working copy)
@@ -190,7 +190,7 @@
 function(Symbols,env,return.class='xts',index.class="Date",
          from='2007-01-01',
          to=Sys.Date(),
-         ...)
+         ..., adjust)
 {
      importDefaults("getSymbols.yahoo")
      this.env <- environment()
@@ -198,7 +198,7 @@
         # import all named elements that are NON formals
         assign(var, list(...)[[var]], this.env)
      }
-     if(!exists("adjust", environment()))
+     if(missing("adjust"))
        adjust <- FALSE
 
      default.return.class <- return.class

-- 
New Rcpp master class for R and C++ integration is scheduled for 
San Francisco (Oct 8), more details / reg.info available at
http://www.revolutionanalytics.com/products/training/public/rcpp-master-class.php


From jeffrey.ryan at lemnica.com  Wed Sep 28 22:20:17 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Wed, 28 Sep 2011 15:20:17 -0500
Subject: [R-SIG-Finance] Weird problem with latest RQuantLib not working
 with QuantMod on R 2.13.1
In-Reply-To: <CANFurGZYvOd=76vLuYEB+pP1s-o5YcZmOmsWO0mpFMJ2eG8L8w@mail.gmail.com>
References: <CANFurGZYvOd=76vLuYEB+pP1s-o5YcZmOmsWO0mpFMJ2eG8L8w@mail.gmail.com>
Message-ID: <CABDUZc8qFoK7qa18gCWiUNxTDwjNtQeV=Zmincwcq6QmFF3PUQ@mail.gmail.com>

Hi Chandra,

A bug in getSymbols yahoo.  Patched in rev 568 on R-forge.  exists was
walking up the enclosing frames until it found a bound variable
'adjust' which in this case came from RQuantlib.  I added
inherits=FALSE to patch.

Thanks for the report (as well as thanks to Dirk for a suggested fix).

Best,
Jeff

On Tue, Sep 27, 2011 at 10:12 PM, chandra bajpai <cbajpai at gmail.com> wrote:
> Hi,
> I just got a new machine and installed a fresh version of R 2.13.1
> (latest version) and
> I think I found a problem with RQuantLib causing a problem an external
> module (QuantMod).
>
> I've got a 3 line program that shows the problem:
>
> R Version - R 2.13.1 ?(32 bit)
> OS: WIndows 7-64 bit
> RQuantLib ver: 0.3.8
> QuantMod ver: 0.3-17
>
> R Test Program Execution:
>
>> library(quantmod)
>> library(RQuantLib)
> Loading required package: Rcpp
>>
>> getSymbols("GOOG", from = "2011-05-01", to="2011-05-30", auto.assign = FALSE)
> Error in if (adjust) { : argument is not interpretable as logical
>>
>
> Now if I comment out library(RQuantLib), it works perfectly.
>
> What am I doing wrong? ?Any workaround?
> bw - This works perfectly on my R 2.11.1 machine.
>
> Thanks,
> Chandra
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From edd at debian.org  Wed Sep 28 22:21:55 2011
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 28 Sep 2011 15:21:55 -0500
Subject: [R-SIG-Finance] Weird problem with latest RQuantLib not working
 with QuantMod on R 2.13.1
In-Reply-To: <20099.31838.491135.252189@max.nulle.part>
References: <CANFurGZYvOd=76vLuYEB+pP1s-o5YcZmOmsWO0mpFMJ2eG8L8w@mail.gmail.com>
	<CAAmySGOCsWSj_7p-WMpNcqnkroBzYxKzWWcpxNdmV0KcEP7e8g@mail.gmail.com>
	<20098.40092.575877.184145@max.nulle.part>
	<20099.31838.491135.252189@max.nulle.part>
Message-ID: <20099.33251.458409.326225@max.nulle.part>


On 28 September 2011 at 14:58, Dirk Eddelbuettel wrote:
| FYI, here is a simple patch I tossed at Jeff earlier today and which he is

Jeff being Jeff, a more compact patch has now been committed.  Upgrade to
HEAD of svn also fixes things.

Dirk

-- 
New Rcpp master class for R and C++ integration is scheduled for 
San Francisco (Oct 8), more details / reg.info available at
http://www.revolutionanalytics.com/products/training/public/rcpp-master-class.php


From izzah100 at yahoo.com  Thu Sep 29 01:36:06 2011
From: izzah100 at yahoo.com (Muhammad Abuizzah)
Date: Wed, 28 Sep 2011 16:36:06 -0700 (PDT)
Subject: [R-SIG-Finance] extract a particular hour of tick data from
	multiple days form xts object
Message-ID: <1317252966.9240.YahooMailNeo@web45203.mail.sp1.yahoo.com>

Hi,

I have an xts dataframe called a1. ?Its tick data for many months. ?The data is already in xts format so the first column is the index.
I reviewed the xts manual and on page 5 of the xts package manual it talks about extracting recurring times between 8:30 to 15:00 using the code ?.parseISO8601('T08:30/T15:00')
My objective is to assign names to certain recurring times such as to call the ticks prior to 9:30 "premarket" so obviously it's to work on a certain hour across all dates

It wasn't clear from the manual's example above how to construct the code so I tried the following and none worked:-

premkt <- a1 [.parseISO8601('T06:30/T9:30'),] ?## used the example supplied by the manual to specify the rows I want from my dataframe


premkt <-?.parseISO8601(a1,'T06:30/T9:30') ?## again I wasn't sure how to use the example in the package so I tried to use the time bracket as an argument for a parseISO8601 function with my dataframe as the first argument



also tried ?premkt <-?a1['T06:30/T9:30' ] ?## I saw a question by someone in which such or similar code was used.

Thanks for the help in advance!!

.


From brian at braverock.com  Thu Sep 29 02:25:45 2011
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 28 Sep 2011 19:25:45 -0500
Subject: [R-SIG-Finance] extract a particular hour of tick data from
 multiple days form xts object
In-Reply-To: <1317252966.9240.YahooMailNeo@web45203.mail.sp1.yahoo.com>
References: <1317252966.9240.YahooMailNeo@web45203.mail.sp1.yahoo.com>
Message-ID: <1317255945.4192.282.camel@brian-desktop>

On Wed, 2011-09-28 at 16:36 -0700, Muhammad Abuizzah wrote:
> premkt <- a1['T06:30/T9:30' ]

premkt <- a1['T06:30/T09:30' ]

the ISO 8601 format is very particular.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From costas.vorlow at gmail.com  Thu Sep 29 08:54:44 2011
From: costas.vorlow at gmail.com (Costas Vorlow)
Date: Thu, 29 Sep 2011 09:54:44 +0300
Subject: [R-SIG-Finance] Open to Close to Open data transformation
 (quantmod, xts and possibly zoo) + chart.TimeSeries
In-Reply-To: <b5a02cfcb724d6960efa63750130f7ee.squirrel@mail.braverock.com>
References: <CABfqsR8zZjCcssqUD26=-JvA0qotnWJes39bvPvLCTqYmDQFaw@mail.gmail.com>
	<36a3f7288db65a439b789d45717ee8fc.squirrel@mail.braverock.com>
	<CABfqsR9gYHRZQJVJ86ZMZHo=5mO4Jiz0qAewWJLCe1a2esaUQA@mail.gmail.com>
	<b5a02cfcb724d6960efa63750130f7ee.squirrel@mail.braverock.com>
Message-ID: <CABfqsR8bzYVuu3OHxPJvCNxargKOYP6HnV1Y=Ao1KMOjN-z+mg@mail.gmail.com>

Dear Peter,

Still no hope. I am doing something wrong. I noticed that the times
are also going through. Maybe that's the problem?
I tried to include them to the area-event-dates list in the function
call but still no shading....

> tail(newdata,50)
                    SP500  Close
2011-08-22 08:30:00      1123.55
2011-08-22 15:00:00      1123.82
2011-08-23 08:30:00      1124.36
2011-08-23 15:00:00      1162.35
2011-08-24 08:30:00      1162.16
2011-08-24 15:00:00      1177.60
2011-08-25 08:30:00      1176.69
2011-08-25 15:00:00      1159.27
2011-08-26 08:30:00      1158.85
2011-08-26 15:00:00      1176.80
2011-08-29 08:30:00      1177.91
2011-08-29 15:00:00      1210.08
2011-08-30 08:30:00      1209.76
2011-08-30 15:00:00      1212.92
2011-08-31 08:30:00      1213.00
2011-08-31 15:00:00      1218.89
2011-09-01 08:30:00      1219.12
2011-09-01 15:00:00      1204.42
2011-09-02 08:30:00      1203.90
2011-09-02 15:00:00      1173.97
2011-09-06 08:30:00      1173.97
2011-09-06 15:00:00      1165.24
2011-09-07 08:30:00      1165.85
2011-09-07 15:00:00      1198.62
2011-09-08 08:30:00      1197.98
2011-09-08 15:00:00      1185.90
2011-09-09 08:30:00      1185.37
2011-09-09 15:00:00      1154.23
2011-09-12 08:30:00      1153.50
2011-09-12 15:00:00      1162.27
2011-09-13 08:30:00      1162.59
2011-09-13 15:00:00      1172.87
2011-09-14 08:30:00      1173.32
2011-09-14 15:00:00      1188.68
2011-09-15 08:30:00      1189.44
2011-09-15 15:00:00      1209.11
2011-09-16 08:30:00      1209.21
2011-09-16 15:00:00      1216.01
2011-09-19 08:30:00      1214.99
2011-09-19 15:00:00      1204.09
2011-09-20 08:30:00      1204.50
2011-09-20 15:00:00      1202.09
2011-09-21 08:30:00      1203.63
2011-09-21 15:00:00      1166.76
2011-09-22 08:30:00      1164.55
2011-09-22 15:00:00      1129.56
2011-09-23 08:30:00      1128.82
2011-09-23 15:00:00      1136.43
2011-09-26 08:30:00      1136.91
2011-09-26 15:00:00      1162.95

On 28 September 2011 14:08, Peter Carl <peter at braverock.com> wrote:
> Linux, although I don't think that should have a bearing on this issue.
> Windows issues are more common around timezones. ?That said, I'm not a
> Windows expert...
>
> Did you also try a lower time granularity, such as:
> chart.TimeSeries(newdata, date.format="%d-%m-%y", period.areas =
> list(c("2011-01", "2011-05")), period.color = "blue", lwd = 2)
>
> I'm using PerformanceAnalytcs_1.0.3.3. ?This behavior did change in a
> recent CRAN release, so it might also be a version issue. ?Check with:
> sessionInfo()
>
> HTH,
>
> pcc
> --
> Peter Carl
> http://www.braverock.com/~peter
>
>> Thanks but I am not getting anything. Are you using Linux or Windows
>> platforms?
>>
>> On 27 September 2011 19:54, Peter Carl <peter at braverock.com> wrote:
>>> You may have already figured this out, but the dates have to appear in
>>> the
>>> timeseries at the same granularity you are looking to match.
>>>
>>>> chart.TimeSeries(newdata, date.format="%d-%m-%y", period.areas =
>>> list(c("03-01-2011","05-06-2011")), period.color = "blue", lwd = 2)
>>>
>>> should be...
>>>
>>>> chart.TimeSeries(newdata, date.format="%d-%m-%y", period.areas =
>>> list(c("2011-01-03","2011-06-06")), period.color = "blue", lwd = 2)
>>>
>>> ... where the list of areas is specified in 8601 format. ?Also note that
>>> the fifth of June does not appear in your data series. ?If you are
>>> looking
>>> to match at a higher granularity, then period.areas = list(c("2011-01",
>>> "2011-05")) would also work.
>>>
>>> HTH,
>>>
>>> pcc
>>> --
>>> Peter Carl
>>> http://www.braverock.com/~peter
>>>
>>>> Thanks again.
>>>>
>>>> One more point:
>>>>
>>>> When I try
>>>>
>>>> chart.TimeSeries(newdata, date.format="%d-%m-%y", period.areas =
>>>> list(c("03-01-2011","05-06-2011")), period.color = "blue", lwd = 2)
>>>>
>>>> I can't get the event period shadings.
>>>>
>>>> This has to do I guess with the fact that 2 prices have the same data
>>>> though different hourly time signature.
>>>>
>>>> Is this correct and how do I rectify it?
>>>>
>>>> I've been trying around with formats but no result so far.
>>>>
>>>> On 23 September 2011 14:56, G See <gsee000 at gmail.com> wrote:
>>>>> FWIW, I misread the docs for getSymbols.yahoo which says
>>>>> ? ? ?In the case of xts objects, the indexing will be by Date. This
>>>>> can
>>>>> ? ? ?be altered with the ?index.class? argument. ?See ?indexClass? for
>>>>> ? ? ?more information on changing index classes.
>>>>> So, this should be perfectly acceptable as well:
>>>>> medata <- getSymbols("^GSPC",
>>>>> ? ? ? ? from=Sys.Date()-400,
>>>>> ? ? ? ? index.class='POSIXct',
>>>>> ? ? ? ? auto.assign=FALSE)
>>>>> opens <- Op(medata)
>>>>> closes <- Cl(medata)
>>>>> index(opens) <- index(opens) + (60*60*8) + (60*30)
>>>>> index(closes) <- index(closes) + (60*60*15)
>>>>> newdata <- rbind(opens,closes)
>>>>> colnames(newdata) <- "GSPC.OC"
>>>>>> tail(newdata)
>>>>> ? ? ? ? ? ? ? ? ? ? GSPC.OC
>>>>> 2011-09-20 08:30:00 1204.50
>>>>> 2011-09-20 15:00:00 1202.09
>>>>> 2011-09-21 08:30:00 1203.63
>>>>> 2011-09-21 15:00:00 1166.76
>>>>> 2011-09-22 08:30:00 1164.55
>>>>> 2011-09-22 15:00:00 1129.56
>>>>>
>>>>> On Fri, Sep 23, 2011 at 8:25 AM, G See <gsee000 at gmail.com> wrote:
>>>>>>
>>>>>> Hi Costas,
>>>>>> You need an indexClass that can handle times. ?By default
>>>>>> getSymbols.yahoo
>>>>>> gives you an object with 'Date' indexClass which you need to change
>>>>>> to
>>>>>> something like 'POSIXct' or 'POSIXlt'
>>>>>> (You *can* do this directly in your getSymbols call using the
>>>>>> argument
>>>>>> index.class='POSIXct', but the documentation says only "Date" is
>>>>>> supported,
>>>>>> so I'll do it the other way)
>>>>>> require(quantmod)
>>>>>> getSymbols("^GSPC",from='1990-01-01')
>>>>>> medata <- tail(GSPC, 400)
>>>>>> indexClass(medata) <- "POSIXct"
>>>>>> opens <- Op(medata)
>>>>>> closes <- Cl(medata)
>>>>>> index(opens) <- index(opens) + (60*60*8) + (60*30)
>>>>>> index(closes) <- index(closes) + (60*60*15)
>>>>>> newdata <- rbind(opens,closes)
>>>>>> colnames(newdata) <- "GSPC.OC"
>>>>>> > tail(newdata)
>>>>>> ? ? ? ? ? ? ? ? ? ? GSPC.OC
>>>>>> 2011-09-20 08:30:00 1204.50
>>>>>> 2011-09-20 15:00:00 1202.09
>>>>>> 2011-09-21 08:30:00 1203.63
>>>>>> 2011-09-21 15:00:00 1166.76
>>>>>> 2011-09-22 08:30:00 1164.55
>>>>>> 2011-09-22 15:00:00 1129.56
>>>>>> Regards,
>>>>>> Garrett
>>>>>> On Fri, Sep 23, 2011 at 4:50 AM, Costas Vorlow
>>>>>> <costas.vorlow at gmail.com>
>>>>>> wrote:
>>>>>>>
>>>>>>> Hello,
>>>>>>>
>>>>>>> I want to put in order (preferably as a zoo or xts object with a
>>>>>>> suitable
>>>>>>> timestamp)
>>>>>>> the open anc closing prices of an (say) index downloaded from YAHOO
>>>>>>> finance:
>>>>>>>
>>>>>>> require(quantmod)
>>>>>>> getSymbols('^GSPC',from='1990-01-01')
>>>>>>>
>>>>>>> medata<- tail((GSPC),400)
>>>>>>> opens<-Op(medata)
>>>>>>> closes<-Cl(medata)
>>>>>>>
>>>>>>> i.e., I want ?asingle sequence of ?1095.89, ? ?1105.24 , 1101.24 ,
>>>>>>> 1102.94, and so on ... preferably with a timestamp (morning -
>>>>>>> evening
>>>>>>> of
>>>>>>> same day as for daily prices zoo does not like the same date in two
>>>>>>> consecutive prices...
>>>>>>>
>>>>>>> > head(merge(opens,closes))
>>>>>>> ? ? ? ? ? GSPC.Open GSPC.Close
>>>>>>> 2010-02-24 ? 1095.89 ? ?1105.24
>>>>>>> 2010-02-25 ? 1101.24 ? ?1102.94
>>>>>>> 2010-02-26 ? 1103.10 ? ?1104.49
>>>>>>> 2010-03-01 ? 1105.36 ? ?1115.71
>>>>>>> 2010-03-02 ? 1117.01 ? ?1118.31
>>>>>>> 2010-03-03 ? 1119.36 ? ?1118.79
>>>>>>> >
>>>>>>> >
>>>>>>> Probably I could use the OpCl in quantmod and caclulate the Cl price
>>>>>>> from
>>>>>>> Op, though Is there any easy way using some implicit zoo/xts
>>>>>>> function
>>>>>>> for
>>>>>>> this? I have problems in puting the timestamps in the xts vobject.
>>>>>>>
>>>>>>> Thanks,
>>>>>>> Costas
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> R-SIG-Finance at r-project.org mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>>>> -- Also note that this is not the r-help list where general R
>>>>>>> questions
>>>>>>> should go.
>>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>>
>>>> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
>>>> |c|o|s|t|a|s|@|v|o|r|l|o|w|.|o|r|g|
>>>> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions
>>>> should go.
>>>>
>>>
>>>
>>>
>>
>>
>>
>> --
>>
>> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
>> |c|o|s|t|a|s|@|v|o|r|l|o|w|.|o|r|g|
>> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
>>
>
>
>



-- 

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|c|o|s|t|a|s|@|v|o|r|l|o|w|.|o|r|g|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


From bjorn.skogtro at gmail.com  Thu Sep 29 12:39:36 2011
From: bjorn.skogtro at gmail.com (=?utf-8?B?Ympvcm4uc2tvZ3Ryb0BnbWFpbC5jb20=?=)
Date: Thu, 29 Sep 2011 12:39:36 +0200
Subject: [R-SIG-Finance]
	=?utf-8?q?R-SIG-Finance_Digest=2C_Vol_88=2C_Issue?= =?utf-8?q?_28?=
Message-ID: <4e844af9.501c0e0a.7c5b.195a@mx.google.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110929/5d513ac2/attachment.pl>

From bbands at gmail.com  Thu Sep 29 22:12:18 2011
From: bbands at gmail.com (BBands)
Date: Thu, 29 Sep 2011 13:12:18 -0700
Subject: [R-SIG-Finance] Displaying candle data for thinly traded stocks
In-Reply-To: <CAPUJFCXdHp4QgmPM31U3k4SnRL0+2en4=dkdQUbOEkjpJPCe1A@mail.gmail.com>
References: <CAPUJFCXdHp4QgmPM31U3k4SnRL0+2en4=dkdQUbOEkjpJPCe1A@mail.gmail.com>
Message-ID: <CAGS5yBXV-DJRVDfYoEFuyuR9JHFj8SKrOKSKvTD9woJhFAe+=A@mail.gmail.com>

Please forgive me for stating the obvious, but... A candle is not
defined for a period in which no trades occur.

     jab

On Wed, Sep 28, 2011 at 12:15 PM, Stefan Petry <spetry at quantbench.com> wrote:
> I would appreciate some advice on how to best display candle data for
> sporadically traded stocks.
> Is there any standard or best practice on how to represent a candle during
> which there were zero trades?
>
> The options I can think of are either (i) to draw a candle where OHLC are
> all the same as the closing price of the previous candle or (ii) to not draw
> a candle at all.
> If (i) turns out to be the right answer, which price would you use for the
> periods prior to the first trade?
>
> Thanks a lot!
> Stefan


From bbands at gmail.com  Fri Sep 30 00:00:09 2011
From: bbands at gmail.com (BBands)
Date: Thu, 29 Sep 2011 15:00:09 -0700
Subject: [R-SIG-Finance] Test data
In-Reply-To: <4E823CCB.8090209@gmail.com>
References: <4E823CCB.8090209@gmail.com>
Message-ID: <CAGS5yBWLrUfSV6JQOPUjKiX4HMu3B70bx8si-_fqgnk70Jc3Yg@mail.gmail.com>

On Tue, Sep 27, 2011 at 2:14 PM, Worik Stanton <worik.stanton at gmail.com> wrote:
> I am about to generate some data to test some technical analysis functions.
>
> I expect I am not the first! ?Has anybody some advice about where to look
> for some data sets?
>
> What I need, naturally, ?is pairs of series, input and output. ?I expect I
> can roll my own without too much difficulty but...

In developing indicators and technical methods it is very helpful to
feed models various synthetic data streams. I have a library of these
and will discuss a few that I use here.

1. Instantaneous change. The is a dead simple series, but it can be
amazingly informative. Mine runs at 1 and then jumps to 2. You might
be surprised at the results you get, especially if any form of
advanced smoothing is used.

2. Sine, triangle, saw tooth and square waves of various periodicities.

3. Idealized typical technical patterns, head and shoulders, double
bottoms and tops, wedges, simple reversals and the like.

4. Cyclically varying volatility.

5. Most of the above coupled with trends, say  plus or minus 10%
annualized growth rates.

The ideal is of course to torture test transforms so you will know
what to expect from them in evolving market conditions. This is
especially helpful in avoiding signals that are artifacts of your
transforms rather than of the data. Try plotting 20 period, 2 standard
deviation Bollinger Bands with 10, 20, 30 and 40 period square waves.

Best,

    John


From bbands at gmail.com  Fri Sep 30 04:42:12 2011
From: bbands at gmail.com (BBands)
Date: Thu, 29 Sep 2011 19:42:12 -0700
Subject: [R-SIG-Finance] Test data
In-Reply-To: <5C3F9922B1D5FB4886B2D2045AB952F305F0DB728F@IPEXMAIL.corp.dom>
References: <4E823CCB.8090209@gmail.com>
	<CAGS5yBWLrUfSV6JQOPUjKiX4HMu3B70bx8si-_fqgnk70Jc3Yg@mail.gmail.com>
	<5C3F9922B1D5FB4886B2D2045AB952F305F0DB728F@IPEXMAIL.corp.dom>
Message-ID: <CAGS5yBV+aPvy663XpVQDzcJwhPYtBsGdy_Z-_Oy3BU4G_Q-KOA@mail.gmail.com>

Hello Horace,

It is only missing by omission; can't think of everything in a short
post. I typically use market data or bootstrapped data for that, but
you approach is equally, though differently, useful. I've been
thinking a lot about Ralph Vince's comment on the Markets list about
the arc sine law. I have observed that phenomenon in my bootstrapped
series and I think that it is a very deep well.

Best,

    John -- Who is a bit worried that these comments are not Rsih
enough for this environment. Please forgive my gaucheness, but this is
a topic near to my core.

On Thu, Sep 29, 2011 at 4:35 PM, Horace Tso <Horace.Tso at pgn.com> wrote:
> John, always appreciate the insights from an expert in the trade, but what seems to be missing from your list is a simple series generated from random walk, e.g.
>
> x_t = cumsum(rnorm(10000,mean=0.05)/100)
>
> That's pretty much the null hypothesis for testing any trading system.
>
> Horace
>
>
> -----Original Message-----
> From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of BBands
> Sent: Thursday, September 29, 2011 3:00 PM
> To: R-sig-finance
> Subject: Re: [R-SIG-Finance] Test data
>
> On Tue, Sep 27, 2011 at 2:14 PM, Worik Stanton <worik.stanton at gmail.com> wrote:
>> I am about to generate some data to test some technical analysis functions.
>>
>> I expect I am not the first! ?Has anybody some advice about where to
>> look for some data sets?
>>
>> What I need, naturally, ?is pairs of series, input and output. ?I
>> expect I can roll my own without too much difficulty but...
>
> In developing indicators and technical methods it is very helpful to feed models various synthetic data streams. I have a library of these and will discuss a few that I use here.
>
> 1. Instantaneous change. The is a dead simple series, but it can be amazingly informative. Mine runs at 1 and then jumps to 2. You might be surprised at the results you get, especially if any form of advanced smoothing is used.
>
> 2. Sine, triangle, saw tooth and square waves of various periodicities.
>
> 3. Idealized typical technical patterns, head and shoulders, double bottoms and tops, wedges, simple reversals and the like.
>
> 4. Cyclically varying volatility.
>
> 5. Most of the above coupled with trends, say ?plus or minus 10% annualized growth rates.
>
> The ideal is of course to torture test transforms so you will know what to expect from them in evolving market conditions. This is especially helpful in avoiding signals that are artifacts of your transforms rather than of the data. Try plotting 20 period, 2 standard deviation Bollinger Bands with 10, 20, 30 and 40 period square waves.
>
> Best,
>
> ? ?John
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
John Bollinger, CFA, CMT
www.BollingerBands.com

If you advance far enough, you arrive at the beginning.


From edd at debian.org  Fri Sep 30 05:58:27 2011
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 29 Sep 2011 22:58:27 -0500
Subject: [R-SIG-Finance] Test data
In-Reply-To: <CAGS5yBV+aPvy663XpVQDzcJwhPYtBsGdy_Z-_Oy3BU4G_Q-KOA@mail.gmail.com>
References: <4E823CCB.8090209@gmail.com>
	<CAGS5yBWLrUfSV6JQOPUjKiX4HMu3B70bx8si-_fqgnk70Jc3Yg@mail.gmail.com>
	<5C3F9922B1D5FB4886B2D2045AB952F305F0DB728F@IPEXMAIL.corp.dom>
	<CAGS5yBV+aPvy663XpVQDzcJwhPYtBsGdy_Z-_Oy3BU4G_Q-KOA@mail.gmail.com>
Message-ID: <20101.15971.948514.615406@max.nulle.part>


On 29 September 2011 at 19:42, BBands wrote:
|     John -- Who is a bit worried that these comments are not Rsih
| enough for this environment. Please forgive my gaucheness, but this is
| a topic near to my core.

Great posts, keep'em coming.  All this is close to our hearts too.

Dirk, with his listmaster hat on

-- 
New Rcpp master class for R and C++ integration is scheduled for 
San Francisco (Oct 8), more details / reg.info available at
http://www.revolutionanalytics.com/products/training/public/rcpp-master-class.php


From bbands at gmail.com  Fri Sep 30 18:31:55 2011
From: bbands at gmail.com (BBands)
Date: Fri, 30 Sep 2011 09:31:55 -0700
Subject: [R-SIG-Finance] Fwd:  Test data
In-Reply-To: <CAGS5yBVdutM9CDK9nR92o677Kccx+501i42nR9qJU0OXKfjfmQ@mail.gmail.com>
References: <4E823CCB.8090209@gmail.com>
	<CAGS5yBWLrUfSV6JQOPUjKiX4HMu3B70bx8si-_fqgnk70Jc3Yg@mail.gmail.com>
	<5C3F9922B1D5FB4886B2D2045AB952F305F0DB728F@IPEXMAIL.corp.dom>
	<CAGS5yBV+aPvy663XpVQDzcJwhPYtBsGdy_Z-_Oy3BU4G_Q-KOA@mail.gmail.com>
	<736BD99954017349AA38025412DA2A864008E73113@EXCHAMRS04.na.blkint.com>
	<CAGS5yBVdutM9CDK9nR92o677Kccx+501i42nR9qJU0OXKfjfmQ@mail.gmail.com>
Message-ID: <CAGS5yBXWdh8bupu2oRArok8jwt=f5VPJChdkeP7wg3KKiwA50Q@mail.gmail.com>

On Fri, Sep 30, 2011 at 6:43 AM, Maheshwari, Dhruv
<dhruv.maheshwari at blackrock.com> wrote:
>> I've been thinking a lot about Ralph Vince's comment on the Markets list about the arc sine law.
>
> Can you point me to this mailing list? I am interested in joining.
>
> Regards,
> Dhruv

You can sign up for the Markets list here.

http://mailman.bollingerbands.com/mailman/listinfo/markets

In my keynote to the R/Finance conference in Chicago this Spring
(great conference, wonderful people, highly recommended) I issued a
general invite to the R community as I thought the possibilities for
cross-fertilization interesting, but not much has happened in that
regard. I've made some R-oriented posts, but the interest has been
minimal.

Enjoy,

? ?jab
-- 
John Bollinger, CFA, CMT
www.BollingerBands.com

If you advance far enough, you arrive at the beginning.


From jantiom at gmail.com  Fri Sep 30 18:51:52 2011
From: jantiom at gmail.com (Gentil Homme)
Date: Fri, 30 Sep 2011 18:51:52 +0200
Subject: [R-SIG-Finance] Quantmod modelData with datetime format
Message-ID: <CAM9XErCF5pCHMZDXucDGgUUjxNd3OWTsTsMdmVEPtB+SeH4-fw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110930/588c8a22/attachment.pl>

From mirza.trokic at gmail.com  Fri Sep 30 22:37:24 2011
From: mirza.trokic at gmail.com (mtrokic)
Date: Fri, 30 Sep 2011 13:37:24 -0700 (PDT)
Subject: [R-SIG-Finance] Seasonal Dummy Variables in VECM (tsDyn)
In-Reply-To: <CAEYvigJghSULeqBAKTTzAhRtfyvsT2O6NQnpnANUJjzJad2rqw@mail.gmail.com>
References: <1317070063077-3845323.post@n4.nabble.com>
	<CAEYvigJghSULeqBAKTTzAhRtfyvsT2O6NQnpnANUJjzJad2rqw@mail.gmail.com>
Message-ID: <CAFn9rLLscuZv9bSSsjLNbtWnrz=_4HmHBcOHNbT5YSbrokcZcA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20110930/d66b693a/attachment.pl>

