From ggrothendieck at gmail.com  Thu Apr  1 07:00:12 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 1 Apr 2010 01:00:12 -0400
Subject: [R-SIG-Finance] plot log scale on y axis using zoo object (with
	plot.zoo)
In-Reply-To: <w2m676b0d531003311240lb6c31eacz650eb10986901aae@mail.gmail.com>
References: <w2m676b0d531003311240lb6c31eacz650eb10986901aae@mail.gmail.com>
Message-ID: <m2i971536df1003312200n16b0775fv92d02abc75e18de8@mail.gmail.com>

If the warning bothers you try this:

suppressWarnings(plot(z,log="y"))

or this:

plot(log10(z), yaxt = "n")
axis(2, at = axTicks(2), lab = 10^axTicks(2))


On Wed, Mar 31, 2010 at 3:40 PM, Pierre Lapointe <pierrelap at gmail.com> wrote:
> Hi,
>
> I'd like to plot a times series with a log on the y-axis. I'm plotting a zoo
> object as it is easier to format the dates on the x-axis. Unfortunately,
> log="y" does not work with plot.zoo. Any idea?
>
> Here's a reproducible example
>
> x <-seq(1,10000,length.out=10)
> plot(x,log="y",type="l") ?#works
>
> z <- zoo(seq(1,10000,length.out=10),
> ? ? as.Date(c("1992-01-10", "1992-01-17", "1992-01-24", "1992-01-31",
> ? ? ? "1992-02-07", "1992-02-14", "1992-02-21", "1992-02-28", "1992-03-06",
> ? ? ? "1992-03-13")))
> plot(z,log="y") ? ? ? ? ?#gives error
>
> #Warning message:
> #In plot.xy(xy.coords(x, y), type = type, ...) :
> # ?"log" is not a graphical parameter
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From ron_michael70 at yahoo.com  Thu Apr  1 09:35:14 2010
From: ron_michael70 at yahoo.com (Ron_M)
Date: Wed, 31 Mar 2010 23:35:14 -0800 (PST)
Subject: [R-SIG-Finance] Simulating VAR model (re-post)
In-Reply-To: <1270024086107-1746451.post@n4.nabble.com>
References: <1270006492076-1746259.post@n4.nabble.com>
	<4BB2F7B9.10308@gmail.com>
	<1270024086107-1746451.post@n4.nabble.com>
Message-ID: <1270107314566-1747776.post@n4.nabble.com>


No reply still...............

Anyway I am planning to sneak into the inside of the "simulate"
function...........So if I type "simulate" on the console and it throws
following :

> simulate
function (model, ...) 
UseMethod("simulate")
<environment: namespace:dse>

How to get the code inside the simulate function?

Best,
-- 
View this message in context: http://n4.nabble.com/Simulating-VAR-model-re-post-tp1746259p1747776.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From cedrick at cedrickjohnson.com  Thu Apr  1 09:45:50 2010
From: cedrick at cedrickjohnson.com (Cedrick W. Johnson)
Date: Thu, 1 Apr 2010 07:45:50 +0000
Subject: [R-SIG-Finance] Simulating VAR model (re-post)
In-Reply-To: <1270107314566-1747776.post@n4.nabble.com>
References: <1270006492076-1746259.post@n4.nabble.com><4BB2F7B9.10308@gmail.com><1270024086107-1746451.post@n4.nabble.com><1270107314566-1747776.post@n4.nabble.com>
Message-ID: <558440258-1270107974-cardhu_decombobulator_blackberry.rim.net-9043911-@bda147.bisx.prod.on.blackberry>

Download the source

-c
Sent from my BlackBerry?

-----Original Message-----
From: Ron_M <ron_michael70 at yahoo.com>
Date: Wed, 31 Mar 2010 23:35:14 
To: <r-sig-finance at stat.math.ethz.ch>
Subject: Re: [R-SIG-Finance] Simulating VAR model (re-post)


No reply still...............

Anyway I am planning to sneak into the inside of the "simulate"
function...........So if I type "simulate" on the console and it throws
following :

> simulate
function (model, ...) 
UseMethod("simulate")
<environment: namespace:dse>

How to get the code inside the simulate function?

Best,
-- 
View this message in context: http://n4.nabble.com/Simulating-VAR-model-re-post-tp1746259p1747776.html
Sent from the Rmetrics mailing list archive at Nabble.com.

_______________________________________________
R-SIG-Finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

From matthieu.stigler at gmail.com  Thu Apr  1 09:52:32 2010
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Thu, 01 Apr 2010 09:52:32 +0200
Subject: [R-SIG-Finance] Simulating VAR model (re-post)
In-Reply-To: <558440258-1270107974-cardhu_decombobulator_blackberry.rim.net-9043911-@bda147.bisx.prod.on.blackberry>
References: <1270006492076-1746259.post@n4.nabble.com><4BB2F7B9.10308@gmail.com><1270024086107-1746451.post@n4.nabble.com><1270107314566-1747776.post@n4.nabble.com>
	<558440258-1270107974-cardhu_decombobulator_blackberry.rim.net-9043911-@bda147.bisx.prod.on.blackberry>
Message-ID: <4BB450C0.1060201@gmail.com>

Well your code seemed to be right...

R tells you its a method so:
methods(simulate)
getAnywhere(simulate.ARMA)



Cedrick W. Johnson a ?crit :
> Download the source
>
> -c
> Sent from my BlackBerry?
>
> -----Original Message-----
> From: Ron_M <ron_michael70 at yahoo.com>
> Date: Wed, 31 Mar 2010 23:35:14 
> To: <r-sig-finance at stat.math.ethz.ch>
> Subject: Re: [R-SIG-Finance] Simulating VAR model (re-post)
>
>
> No reply still...............
>
> Anyway I am planning to sneak into the inside of the "simulate"
> function...........So if I type "simulate" on the console and it throws
> following :
>
>   
>> simulate
>>     
> function (model, ...) 
> UseMethod("simulate")
> <environment: namespace:dse>
>
> How to get the code inside the simulate function?
>
> Best,
>


From Bernhard_Pfaff at fra.invesco.com  Thu Apr  1 12:38:57 2010
From: Bernhard_Pfaff at fra.invesco.com (Pfaff, Bernhard Dr.)
Date: Thu, 1 Apr 2010 11:38:57 +0100
Subject: [R-SIG-Finance] FW: VECM problem with exogenous components
In-Reply-To: <j2k5bfb4a971003311257je1641d38rec5bd7a6e0b9ee64@mail.gmail.com>
References: <B89F0CE41D45644A97CCC93DF548C1C3235BEB24@GBHENXMB02.corp.amvescap.net>
	<4BB319F1.2080904@gmail.com>
	<B89F0CE41D45644A97CCC93DF548C1C3235BEB54@GBHENXMB02.corp.amvescap.net>
	<4BB3250F.2010308@gmail.com>
	<B89F0CE41D45644A97CCC93DF548C1C3235BEC3F@GBHENXMB02.corp.amvescap.net>
	<j2k5bfb4a971003311257je1641d38rec5bd7a6e0b9ee64@mail.gmail.com>
Message-ID: <B89F0CE41D45644A97CCC93DF548C1C3235BF0C4@GBHENXMB02.corp.amvescap.net>

Dear Gautier,

you can apply the summary-method to the list element rlm returned by cajorls(), which is of class c("mlm", "lm"). If you have two exogenous variables and only one endogenous variable, you can estimate your model in two steps. First, the ci-relation(s), next a single equation as casted in ECM form. By definition, exogenous variables do not appear on the left-hand side.

HTH,
Bernhard   

 |>  -----Original Message-----
 |>  From: Gautier RENAULT [mailto:renault.gautier at gmail.com] 
 |>  Sent: Wednesday, March 31, 2010 9:57 PM
 |>  To: Pfaff, Bernhard Dr.
 |>  Cc: Matthieu Stigler; r-sig-finance at stat.math.ethz.ch
 |>  Subject: Re: [R-SIG-Finance] FW: VECM problem with 
 |>  exogenous components
 |>  
 |>  Yes, beta matrix is same in R and E-views.
 |>  
 |>  May I ask you what code R do you advice (1) to carry out 
 |>  the estimation of a partial vecm in which one ore more 
 |>  components are exogenous and (2) to provide t-stats, probs ?
 |>  
 |>  In my case, I have three variables (y1, y2, y3). two of 
 |>  them are clearly exogeneous (y2, y3). I used alrtest( ) 
 |>  
 |>  y.mat<-data.frame(y1,y2,y3)
 |>  vecm<-ca.jo(y.mat, type="trace",  ecdet= "const", 
 |>  K=2,spec="transitory")
 |>  
 |>  A<-matrix(c(1,0,0), nrow=3, ncol=1)
 |>  vecm.restriction<-alrtest(vecm, A, r=1)
 |>  
 |>  the result of the test for binding restrictions are :
 |>  chi-square : 1.55
 |>  probs : 0.45
 |>  
 |>  thanks for your help,
 |>  
 |>  Gautier
 |>  
 |>  
 |>  2010/3/31 Pfaff, Bernhard Dr. <Bernhard_Pfaff at fra.invesco.com>
 |>  
 |>  
 |>  	Hello Gautier,
 |>  	
 |>  	I am not familiar with the EViews implementation and 
 |>  hence cannot comment on why the results differ. Is the 
 |>  \beta matrix the same, i.e. the normalization?
 |>  	
 |>  	Best,
 |>  	Bernhard
 |>  	
 |>  
 |>  	 |>  -----Original Message-----
 |>  	 |>  From: renault gautier [mailto:renault.gautier at gmail.com]
 |>  	 |>  Sent: Wednesday, March 31, 2010 12:34 PM
 |>  	 |>  To: Pfaff, Bernhard Dr.
 |>  	 |>  Cc: Matthieu Stigler; r-sig-finance at stat.math.ethz.ch
 |>  	 |>  Subject: Re: [R-SIG-Finance] FW: VECM problem with
 |>  	 |>  exogenous components
 |>  	 |>
 |>  	 |>  Hello Bernhard,
 |>  	 |>
 |>  	 |>  I bought and red your book few month ago. I really
 |>  	 |>  appreciated it. It is
 |>  	 |>  useful to cope with econometrics in R.
 |>  	 |>
 |>  	 |>  Since alrtest()  returns a cajo.test object, can I take
 |>  	 |>  the result of
 |>  	 |>  this function as an argument in cajorls function to solve
 |>  	 |>  my problem
 |>  	 |>  with urca package? According to R documentation, cajorls()
 |>  	 |>  can take
 |>  	 |>  ca.jo or cajo.test.
 |>  	 |>
 |>  	 |>  I dit it to try and obtain all values (estimators, t
 |>  	 |>  stats, associated
 |>  	 |>  probs, standard errors) except for the 
 |>  cointegration equation by
 |>  	 |>  applying summary method :
 |>  	 |>  these values seems to be right for lagged differences (I
 |>  	 |>  compare with
 |>  	 |>  results with E-view)
 |>  	 |>  but the values associated to error correction terms seems
 |>  	 |>  to be false...
 |>  	 |>
 |>  	 |>  How is it possible ?
 |>  	 |>
 |>  	 |>  Gautier
 |>  	 |>
 |>  	 |>
 |>  	 |>
 |>  	 |>  Le 31/03/2010 11:53, Pfaff, Bernhard Dr. a ?crit :
 |>  	 |>  > Hello Mat,
 |>  	 |>  >
 |>  	 |>  > your are right about your asertion. cajorls() suffices
 |>  	 |>  for non-restricted models and hence a transformation to
 |>  	 |>  level-VAR is not necessary.
 |>  	 |>  >
 |>  	 |>  > Best,
 |>  	 |>  > Bernhard
 |>  	 |>  >
 |>  	 |>  >   |>   -----Original Message-----
 |>  	 |>  >   |>   From: Matthieu Stigler 
 |>  [mailto:matthieu.stigler at gmail.com]
 |>  	 |>  >   |>   Sent: Wednesday, March 31, 2010 11:46 AM
 |>  	 |>  >   |>   To: r-sig-finance at stat.math.ethz.ch
 |>  	 |>  >   |>   Cc: Pfaff, Bernhard Dr.; renault.gautier at gmail.com
 |>  	 |>  >   |>   Subject: Re: [R-SIG-Finance] FW: VECM problem with
 |>  	 |>  >   |>   exogenous components
 |>  	 |>  >   |>
 |>  	 |>  >   |>   Hi
 |>  	 |>  >   |>
 |>  	 |>  >   |>   but how can I get standard errors, t values,
 |>  	 |>  >   |>    |>   associated probs for :
 |>  	 |>  >   |>    |>    |>   the cointegration equation ?
 |>  	 |>  >   |>    |>    |>   the estimated value of the error
 |>  	 |>  correction term ?
 |>  	 |>  >   |>    |>    |>   the lagged differences ?
 |>  	 |>  >   |>
 |>  	 |>  >   |>   Ok 1 is not available, but I thought 2 
 |>  and 3 would be
 |>  	 |>  >   |>   available through
 |>  	 |>  >   |>   cajorls(), unless one estimates a restricted
 |>  	 |>  model, right?
 |>  	 |>  >   |>
 |>  	 |>  >   |>   Thanks for clarifying this point!
 |>  	 |>  >   |>
 |>  	 |>  >   |>   Matthieu
 |>  	 |>  >   |>
 |>  	 |>  >   |>   Pfaff, Bernhard Dr. a ?crit :
 |>  	 |>  >   |>   >  Dear Gautier,
 |>  	 |>  >   |>   >
 |>  	 |>  >   |>   >  standard errors, t-values and marginal
 |>  	 |>  signficnance levels
 |>  	 |>  >   |>   >  are not implmenented for a VECM in the 
 |>  package urca.
 |>  	 |>  >   |>   >  However, you can transform your VECM 
 |>  into its level-VAR
 |>  	 |>  >   |>   >  form (see vec2var() in package vars) 
 |>  and can obtain the
 |>  	 |>  >   |>   >  desired numbers by applying the summary method.
 |>  	 |>  >   |>   >
 |>  	 |>  >   |>   >  Best,
 |>  	 |>  >   |>   >  Bernhard
 |>  	 |>  >   |>   >
 |>  	 |>  >   |>   >
 |>  	 |>  >   |>   >   |>
 |>  	 |>  >   |>   >   |>    |>   -----Original Message-----
 |>  	 |>  >   |>   >   |>    |>   From:
 |>  	 |>  r-sig-finance-bounces at stat.math.ethz.ch
 |>  	 |>  >   |>   >   |>    |>
 |>  	 |>  >   |>   
 |>  [mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf
 |>  	 |>  >   |>   >   |>    |>   Of Gautier RENAULT
 |>  	 |>  >   |>   >   |>    |>   Sent: Wednesday, March 31, 
 |>  2010 10:58 AM
 |>  	 |>  >   |>   >   |>    |>   To: r-sig-finance at stat.math.ethz.ch
 |>  	 |>  >   |>   >   |>    |>   Subject: [R-SIG-Finance] VECM
 |>  	 |>  problem with exogenous
 |>  	 |>  >   |>   >   |>   components
 |>  	 |>  >   |>   >   |>    |>
 |>  	 |>  >   |>   >   |>    |>   Dear all,
 |>  	 |>  >   |>   >   |>    |>
 |>  	 |>  >   |>   >   |>    |>   I deal with a econometrics 
 |>  problem in R.
 |>  	 |>  >   |>   >   |>    |>
 |>  	 |>  >   |>   >   |>    |>   My final goal is to estimate a
 |>  	 |>  vecm (three components)
 |>  	 |>  >   |>   >   |>    |>   imposing combined
 |>  	 |>  >   |>   >   |>    |>   restrictions on two components in
 |>  	 |>  alpha matrix.
 |>  	 |>  >   |>   >   |>    |>
 |>  	 |>  >   |>   >   |>    |>   I have no problem to :
 |>  	 |>  >   |>   >   |>    |>   solve the problem using ca.jo()
 |>  	 |>  and cajorls()
 |>  	 |>  >   |>   when I treat
 |>  	 |>  >   |>   >   |>    |>   all components as
 |>  	 |>  >   |>   >   |>    |>   endogenous
 |>  	 |>  >   |>   >   |>    |>   test exogeneity of one or 
 |>  more components
 |>  	 |>  >   |>   >   |>    |>
 |>  	 |>  >   |>   >   |>    |>   but how can I get standard errors,
 |>  	 |>  t values,
 |>  	 |>  >   |>   >   |>   associated probs for :
 |>  	 |>  >   |>   >   |>    |>   the cointegration equation ?
 |>  	 |>  >   |>   >   |>    |>   the estimated value of the error
 |>  	 |>  correction term ?
 |>  	 |>  >   |>   >   |>    |>   the lagged differences ?
 |>  	 |>  >   |>   >   |>    |>
 |>  	 |>  >   |>   >   |>    |>   This is my R code :
 |>  	 |>  >   |>   >   |>    |>
 |>  	 |>  >   |>   >   |>    |>   y.mat<-data.frame(y1,y2,y3)
 |>  	 |>  >   |>   >   |>    |>   vecm<-ca.jo(y.mat, type="trace",
 |>  	 |>  ecdet= "const", K=2,
 |>  	 |>  >   |>   >   |>    |>   spec="transitory")
 |>  	 |>  >   |>   >   |>    |>   vecm.result<-cajorls(vecm, r=1)
 |>  	 |>  >   |>   >   |>    |>   summary(vecm.result$rlm)
 |>  	 |>  >   |>   >   |>    |>
 |>  	 |>  >   |>   >   |>    |>   # testing weak exogeneity
 |>  	 |>  >   |>   >   |>    |>
 |>  	 |>  >   |>   >   |>    |>   A<-matrix(c(1,0,0), 
 |>  nrow=3, ncol=1)       #
 |>  	 |>  >   |>   restriction
 |>  	 |>  >   |>   >   |>    |>   matrix (y2, y3
 |>  	 |>  >   |>   >   |>    |>   :treated as exogenous)
 |>  	 |>  >   |>   >   |>    |>   
 |>  vecm.restriction<-alrtest(vecm, A, r=1)
 |>  	 |>  >   |>   >   |>    |>   summary(vecm.restriction)
 |>  	 |>  >   |>   >   |>    |>
 |>  	 |>  >   |>   >   |>    |>   Could someone help ?
 |>  	 |>  >   |>   >   |>    |>
 |>  	 |>  >   |>   >   |>    |>   Gautier
 |>  	 |>  >   |>   >   |>    |>
 |>  	 |>  >   |>   >   |>    |>      [[alternative HTML 
 |>  version deleted]]
 |>  	 |>  >   |>   >   |>    |>
 |>  	 |>  >   |>   >   |>    |>
 |>  	 |>  _______________________________________________
 |>  	 |>  >   |>   >   |>    |>   R-SIG-Finance at stat.math.ethz.ch
 |>  	 |>  mailing list
 |>  	 |>  >   |>   >   |>    |>
 |>  	 |>  https://stat.ethz.ch/mailman/listinfo/r-sig-finance
 |>  	 |>  >   |>   >   |>    |>   -- Subscriber-posting only. If you
 |>  	 |>  want to post,
 |>  	 |>  >   |>   >   |>   subscribe first.
 |>  	 |>  >   |>   >   |>    |>   -- Also note that this is not the
 |>  	 |>  r-help list where
 |>  	 |>  >   |>   >   |>    |>   general R questions should go.
 |>  	 |>  >   |>   >   |>    |>
 |>  	 |>  >   |>   >   |>
 |>  	 |>  >   |>   >
 |>  	 |>  
 |>  *****************************************************************
 |>  	 |>  >   |>   >  Confidentiality Note: The information 
 |>  contained in this
 |>  	 |>  >   |>   ...{{dropped:10}}
 |>  	 |>  >   |>   >
 |>  	 |>  >   |>   >  _______________________________________________
 |>  	 |>  >   |>   >  R-SIG-Finance at stat.math.ethz.ch mailing list
 |>  	 |>  >   |>   >  
 |>  https://stat.ethz.ch/mailman/listinfo/r-sig-finance
 |>  	 |>  >   |>   >  -- Subscriber-posting only. If you want to
 |>  	 |>  post, subscribe first.
 |>  	 |>  >   |>   >  -- Also note that this is not the 
 |>  r-help list where
 |>  	 |>  >   |>   general R questions should go.
 |>  	 |>  >   |>   >
 |>  	 |>  >   |>
 |>  	 |>  >   |>
 |>  	 |>  >
 |>  	 |>
 |>  	 |>
 |>  	
 |>  
 |>  
 |>  
*****************************************************************
Confidentiality Note: The information contained in this ...{{dropped:10}}


From pierrelap at gmail.com  Thu Apr  1 15:12:47 2010
From: pierrelap at gmail.com (Pierre Lapointe)
Date: Thu, 1 Apr 2010 09:12:47 -0400
Subject: [R-SIG-Finance] Combine two incomplete zoo object (with NAs) in one
	zoo series
Message-ID: <n2g676b0d531004010612i4a6bebbcw9209bec607cf6534@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100401/b8a5fbe6/attachment.pl>

From josh.m.ulrich at gmail.com  Thu Apr  1 15:34:55 2010
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Thu, 1 Apr 2010 08:34:55 -0500
Subject: [R-SIG-Finance] Combine two incomplete zoo object (with NAs) in
	one zoo series
In-Reply-To: <n2g676b0d531004010612i4a6bebbcw9209bec607cf6534@mail.gmail.com>
References: <n2g676b0d531004010612i4a6bebbcw9209bec607cf6534@mail.gmail.com>
Message-ID: <m2v8cca69991004010634y85f54e0cq64c2af01ddb8410e@mail.gmail.com>

Pierre,

?ifelse says:
"Value:

     A vector of the same length and attributes (including class) as
     ?test? and data values from the values of ?yes? or
     ?no?."

...so it won't return a zoo object.

Try this instead:
> Z <- z[,2]
> Z[is.na(Z)] <- z[is.na(Z),1]
> Z
1992-01-10 1992-01-17 1992-01-24 1992-01-31 1992-02-07
        11         12         13         14         15
1992-02-14 1992-02-21 1992-02-28 1992-03-06 1992-03-13
        16         17          8          9         10

HTH,
--
Joshua Ulrich
FOSS Trading: www.fosstrading.com



On Thu, Apr 1, 2010 at 8:12 AM, Pierre Lapointe <pierrelap at gmail.com> wrote:
> Hello I have two times series for the same asset. Unfortunately, the series
> with the most history has been discontinued. I want to combine the old
> series with the new one in a new zoo object. I tried combining them using
> ifelse, but the result is a vector, not a zoo object. In other words, I lost
> the dates in the process.
>
> How do I get the result in a zoo object?
>
> Here's my attempt:
>
>
>
> #build series for reproducible example
>
> z <- zoo(matrix(1:20,ncol=2),
>
> ? ? as.Date(c("1992-01-10", "1992-01-17", "1992-01-24", "1992-01-31",
>
> ? ? ? "1992-02-07", "1992-02-14", "1992-02-21", "1992-02-28", "1992-03-06",
>
> ? ? ? "1992-03-13")))
>
> z[1:5,1] <-NA
>
> z[8:10,2] <-NA
>
>
>
> #initial series with imcompletes
>
> z
>
>
>
> #my function
>
> bc.combine <-function(imcomplete.1,fill.with.2){
>
> res <-ifelse(!is.na(imcomplete.1),imcomplete.1,fill.with.2)
>
> return(res)
>
> }
>
>
>
> #two zoo objects as inputs but the result is a vector
>
> bc.combine(z[,2,drop=F],z[,1,drop=F])
>
>
>
> ? ? ?[,1]
>
> ?[1,] ? 11
>
> ?[2,] ? 12
>
> ?[3,] ? 13
>
> ?[4,] ? 14
>
> ?[5,] ? 15
>
> ?[6,] ? 16
>
> ?[7,] ? 17
>
> ?[8,] ? ?8
>
> ?[9,] ? ?9
>
> [10,] ? 10
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From ggrothendieck at gmail.com  Thu Apr  1 15:40:22 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 1 Apr 2010 09:40:22 -0400
Subject: [R-SIG-Finance] Combine two incomplete zoo object (with NAs) in
	one zoo series
In-Reply-To: <n2g676b0d531004010612i4a6bebbcw9209bec607cf6534@mail.gmail.com>
References: <n2g676b0d531004010612i4a6bebbcw9209bec607cf6534@mail.gmail.com>
Message-ID: <o2t971536df1004010640t8997b56dxbb346fcb07e94aae@mail.gmail.com>

ifelse returns plain vectors.  Instead, try the following which
replaces the data portion of zz with the ifelse value:

# 1
zz <- z[,1]
zz[] <- ifelse(is.na(z[,1]), z[,2], z[,1])

or this one line version:

# 1a
zz <- replace(z[,1], TRUE, ifelse(is.na(z[,1]), z[,2], z[,1]))

or this:

# 2
zz <- zoo(ifelse(is.na(z[,1]), z[,2], z[,1]), time(z))

or this which avoids ifelse altogether:

# 3
zz <- z[,1]
zz[is.na(zz)] <- z[is.na(zz), 2]

or this one line version of that:

# 3a
zz <- replace(z[,1], is.na(z[,1]), z[is.na(z[,1]), 2])

or this which also avoids ifelse and uses rollapply with if ... else
... instead:

# 4
zz <- rollapply(z, 1, function(x) if (is.na(x[1])) x[2] else x[1],
by.column = FALSE)



On Thu, Apr 1, 2010 at 9:12 AM, Pierre Lapointe <pierrelap at gmail.com> wrote:
> Hello I have two times series for the same asset. Unfortunately, the series
> with the most history has been discontinued. I want to combine the old
> series with the new one in a new zoo object. I tried combining them using
> ifelse, but the result is a vector, not a zoo object. In other words, I lost
> the dates in the process.
>
> How do I get the result in a zoo object?
>
> Here's my attempt:
>
>
>
> #build series for reproducible example
>
> z <- zoo(matrix(1:20,ncol=2),
>
> ? ? as.Date(c("1992-01-10", "1992-01-17", "1992-01-24", "1992-01-31",
>
> ? ? ? "1992-02-07", "1992-02-14", "1992-02-21", "1992-02-28", "1992-03-06",
>
> ? ? ? "1992-03-13")))
>
> z[1:5,1] <-NA
>
> z[8:10,2] <-NA
>
>
>
> #initial series with imcompletes
>
> z
>
>
>
> #my function
>
> bc.combine <-function(imcomplete.1,fill.with.2){
>
> res <-ifelse(!is.na(imcomplete.1),imcomplete.1,fill.with.2)
>
> return(res)
>
> }
>
>
>
> #two zoo objects as inputs but the result is a vector
>
> bc.combine(z[,2,drop=F],z[,1,drop=F])
>
>
>
> ? ? ?[,1]
>
> ?[1,] ? 11
>
> ?[2,] ? 12
>
> ?[3,] ? 13
>
> ?[4,] ? 14
>
> ?[5,] ? 15
>
> ?[6,] ? 16
>
> ?[7,] ? 17
>
> ?[8,] ? ?8
>
> ?[9,] ? ?9
>
> [10,] ? 10
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From cchien at hotmail.com.tw  Thu Apr  1 16:13:11 2010
From: cchien at hotmail.com.tw (CHIH-HAO CHIEN)
Date: Thu, 1 Apr 2010 14:13:11 +0000
Subject: [R-SIG-Finance] =?windows-1256?q?_Estimation_of_Hull-White_One_-F?=
 =?windows-1256?q?actor_Model=FE?=
Message-ID: <SNT137-w48ECFF9BBD54E761967E23E81D0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100401/a93fcd27/attachment.pl>

From rene.naarmann at gmx.de  Thu Apr  1 16:18:07 2010
From: rene.naarmann at gmx.de (=?ISO-8859-1?Q?Ren=E9_Naarmann?=)
Date: Thu, 01 Apr 2010 16:18:07 +0200
Subject: [R-SIG-Finance] Re-Post: Performance Analytics Style Analysis
In-Reply-To: <4BA89B28.30109@gmx.de>
References: <4B9EBD07.2020900@mnet-online.de>	<BLU0-SMTP148BB1216F8827226EBC6C8F2D0@phx.gbl>
	<4B9F9E7A.9070707@mnet-online.de> <4BA89B28.30109@gmx.de>
Message-ID: <4BB4AB1F.9060102@gmx.de>

Dear List, Dear Thomas,

thank you for your idea of using rollapply. I have already tried to use 
rollapply and I also tried to use applySeries from the timeSeries
Package but R returns an error message which I do not understand. Here 
is a brief example of what I would like to do:
require(timeSeries)
require(PerformanceAnalytics)
btime <- timeSequence(from="1999-01-01", to="1999-03-31", by = "month")
etime <- timeLastDayInMonth(btime)
#btime and etime are vectors, first element in btime is the first day of 
January and the first element of etime is the last of January

set.seed(123)
DATA <- matrix(rnorm(270), ncol = 3)
colnames(DATA) <- LETTERS[1:3]
datats <- timeSequence(from="1999-01-01", to="1999-03-31", by = "day")
S <- timeSeries(DATA, datats)
#S is a Matrix of class timeSeries with 3 columns of Data.
#In the next step I would like to use the function style.fit from the 
package PerformanceAnalytics. I use the following code:

applySeries(S, btime, etime, FUN = function(x) style.fit(x[,1], 
x[,-1])$weights)
#this returns a error message which I do not understand: "Fehler in if 
(facCol[jj]) { : Fehlender Wert, wo TRUE/FALSE n?tig ist"

Any idea, what I am doing wrong? Am I using a wrong syntax or does 
applySeries not work with style.fit?

Another idea is using rollapply but then I can not manage a specific 
time period, when using the following code
rollapply(as.zoo(S), width = 30, FUN = function(x) style.fit(x[,1], 
x[,-1])$weights)
#this returns the error message: "Fehler in switch(method, vector = { : 
Element 1 ist leer; Der Teil der Argumentliste 'class' der berechnet 
wurde war: (x)"
What is wrong with this code?

Furthermore when using chart.RollingStyle with dailyreturns, the plot 
shows a black rectangle because the space between the bars is to narrow, 
how can I circumvent this problem? I am using a Laptop with a 15'' screen.

thanks in advance
Ren? Naarmann

Thomas Etheber schrieb:
> Dear Rene,
>
> why are you trying to circumvent the already implemented wrapper in 
> style.QPfit?
> If I got your problem right, you could just slice your data to rolling 
> estimation windows and then forward it to style.QPfit. Did you already 
> have a look at rollapply, I didn't test it but I think this should 
> work for your purpose. In this case you will have to store the 
> coefficients in each run, so that you are able to calculate the 
> unsystematic returns, e.g. in a loop.
>
> Hth
> Thomas
>
>
> Ren? Naarmann schrieb:
>> Hi all,
>>
>> thank you Julien for your thougts. I working with R 2.10.0 on Windows 
>> XP.
>> I remembered the function applySeries and fapply respectively. I 
>> tried to calculate
>> a variance covariance matrix over different periods. When this works 
>> I could go on with solve.QP which needs the Dmat.
>>
>> Here is an example:
>> require(timeSeries)
>> btime <- timeSequence(from="1999-01-01", to="1999-03-31", by = "month")
>> etime <- timeLastDayInMonth(btime[-1])
>> btime <- btime[-length(btime)]
>> data1 <- rnorm(1:90)
>> data2 <- matrix(rnorm(270), ncol = 3)
>> colnames(data2) <- LETTERS[1:3]
>> datats <- timeSequence(from="1999-01-01", to="1999-03-31", by = "day")
>> S <- timeSeries(data2, datats)
>> applySeries(S, btime, etime, FUN = function(x) cov(x, 
>> use="pairwise.complete.obs"))
>> cov(window(S, start="1999-01-01", end="1999-02-28"))
>>
>> The result is a matrix which contains the varcov matrices for 2 
>> subperiods which is fine,
>> but when I am using my real Data I receive this Message:
>> Fehler in midnightStandard2(charvec, format) :  'charvec' has non-NA 
>> entries of different number of characters
>> I don't understand this error message, can anyone help?
>>
>>
>> I read my datafile from a spreadsheet via readSeries(), the head 
>> looks like this:
>>                    R2G          R2V           R1G           R1V    
>> MSCIWexUS
>> 1999-01-04 -0.006477506  0.004066846 -0.0026417776 -0.0009521722  
>> 0.018939565
>> 1999-01-05  0.001725935  0.002339151  0.0128278433  0.0116685255  
>> 0.006108505
>> 1999-01-06  0.018860732  0.007514636  0.0211913231  0.0215123444  
>> 0.019311270
>> 1999-01-07  0.005040827 -0.004752986 -0.0028397673  0.0013254882 
>> -0.005757679
>> 1999-01-08  0.011525972  0.003911511 -0.0006109632  0.0101291838  
>> 0.001059926
>> 1999-01-11  0.013880501 -0.005775207 -0.0039712968 -0.0108176871 
>> -0.011788948
>>
>> Thanks in advance
>> Ren?
>>
>>
>> julien cuisinier schrieb:
>>> Hi Ren?,
>>>
>>>
>>>
>>> For quad prog algo, look for solve.QP from quadprog package in R. It 
>>> should allow you to do what you want (if I understood well). Please 
>>> note I am not too familiar with the PerformanceAnalytics package & 
>>> its capabilities (but suspect its style analysis function is a 
>>> wrapper for solve.QP). Building a rolling window analysis is quite 
>>> trivial from there.
>>>
>>> On another note, using 1 month data is probably too small to have 
>>> stable results (depending on how many factors in your style analysis 
>>> - personal rule of thumb is 10 times the number of factors gives you 
>>> a benchmark of nbr of data points needed) , I would look to include 
>>> more returns in your linear regression. One could look into applying 
>>> some sort of weighting to your regression to improve forecasting 
>>> power (e.g. exponential weighting). I guess you are also looking 
>>> into the residuals for autocorrelation & heteroskedasticity which 
>>> will impact the hypothesis testing of your betas/coefficients.
>>>
>>> & Finally, always best to make a question as concise as possible, 
>>> include a piece of reproducible code of what you are trying to do & 
>>> some system information (what R version, what OS) ... that often 
>>> makes easier for list member to help & follow (more or less) the 
>>> posting guide.
>>>
>>>
>>>
>>> HTH
>>> Julien
>>>
>>>
>>> On Mar 16, 2010, at 12:04 AM, Ren? Naarmann wrote:
>>>
>>>> Hi R-users,
>>>>
>>>> it is the first time for me writing to this group. I would be 
>>>> grateful if somebody could help me to find
>>>> a solution to my problem.
>>>>
>>>> I am working on my final thesis and I would like to analyse the 
>>>> impact of return frequency
>>>> using return-based style analysis. Specifically I would like to 
>>>> calculate attributable returns. An attributalbe return
>>>> is the difference between the realised return of a fund and the 
>>>> forecast from using the estimated style coefficients
>>>> multiplied by the respective indexseries.
>>>>
>>>> I am using the implemented functions for style analysis in the 
>>>> PerformanceAnalytics Package.
>>>> I would like to use the quadratic programming algorithm just for 
>>>> each day in a specific month, i.e.
>>>> use the daily returns from january to calculate the style weigths. 
>>>> This should be done month by month.
>>>> In the next step the calculation should include two months of data 
>>>> and calculate the style weigths month by month.
>>>>
>>>> So far I tried to usw apply.month in combination with style.fit. 
>>>> This returns the same results for each month.
>>>> In the next step I tried to use some code out of 
>>>> chart.RollingStyle. I change it for my purpose and
>>>> receive the style weights in a rolling calculation and could enable 
>>>> the by option. So I get styleweights
>>>> over a specific width and could shift the calculation by a 
>>>> specified block, i.e. calculate styleweigths
>>>> for 20 days shifting this calculation by the next 20 days. What I 
>>>> would like to have is a shifting by month
>>>> to use the last month realised daily returns to forecast the style 
>>>> weigths for the next month.
>>>>
>>>> Has somebody an idea how to handle this problem?
>>>> Thank you in advance
>>>>
>>>> Ren? Naarmann
>>>>
>>>> -- 
>>>> E-Mail: rene.naarmann at mnet-online.de
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at stat.math.ethz.ch mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R 
>>>> questions should go.
>>>>
>>>
>>>
>>>
>>
>
>
>
>

-- 
Ren? Naarmann
An der Kirche 3B  
30457 Hannover
---
Tel.: 	(0511)-461643
Mobil: 	(0170)-8100941
E-Mail: rene.naarmann at gmx.de


From ggrothendieck at gmail.com  Thu Apr  1 16:36:31 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 1 Apr 2010 10:36:31 -0400
Subject: [R-SIG-Finance] Re-Post: Performance Analytics Style Analysis
In-Reply-To: <4BB4AB1F.9060102@gmx.de>
References: <4B9EBD07.2020900@mnet-online.de>
	<BLU0-SMTP148BB1216F8827226EBC6C8F2D0@phx.gbl> 
	<4B9F9E7A.9070707@mnet-online.de> <4BA89B28.30109@gmx.de> 
	<4BB4AB1F.9060102@gmx.de>
Message-ID: <z2k971536df1004010736x275f7e39q45842e5cd3f08171@mail.gmail.com>

rollapply works on each column independently unless you use
by.column=FALSE. Also style.fit()$weights returns a data frame which
is not permitted.  Try this:

sf <- function(x) style.fit(x[,1], x[,-1])$weights[[1]]
rollapply(as.zoo(S), width = 30, FUN = sf, by.column = FALSE)

See ?rollapply for more.

On Thu, Apr 1, 2010 at 10:18 AM, Ren? Naarmann <rene.naarmann at gmx.de> wrote:
> Dear List, Dear Thomas,
>
> thank you for your idea of using rollapply. I have already tried to use
> rollapply and I also tried to use applySeries from the timeSeries
> Package but R returns an error message which I do not understand. Here is a
> brief example of what I would like to do:
> require(timeSeries)
> require(PerformanceAnalytics)
> btime <- timeSequence(from="1999-01-01", to="1999-03-31", by = "month")
> etime <- timeLastDayInMonth(btime)
> #btime and etime are vectors, first element in btime is the first day of
> January and the first element of etime is the last of January
>
> set.seed(123)
> DATA <- matrix(rnorm(270), ncol = 3)
> colnames(DATA) <- LETTERS[1:3]
> datats <- timeSequence(from="1999-01-01", to="1999-03-31", by = "day")
> S <- timeSeries(DATA, datats)
> #S is a Matrix of class timeSeries with 3 columns of Data.
> #In the next step I would like to use the function style.fit from the
> package PerformanceAnalytics. I use the following code:
>
> applySeries(S, btime, etime, FUN = function(x) style.fit(x[,1],
> x[,-1])$weights)
> #this returns a error message which I do not understand: "Fehler in if
> (facCol[jj]) { : Fehlender Wert, wo TRUE/FALSE n?tig ist"
>
> Any idea, what I am doing wrong? Am I using a wrong syntax or does
> applySeries not work with style.fit?
>
> Another idea is using rollapply but then I can not manage a specific time
> period, when using the following code
> rollapply(as.zoo(S), width = 30, FUN = function(x) style.fit(x[,1],
> x[,-1])$weights)
> #this returns the error message: "Fehler in switch(method, vector = { :
> Element 1 ist leer; Der Teil der Argumentliste 'class' der berechnet wurde
> war: (x)"
> What is wrong with this code?
>
> Furthermore when using chart.RollingStyle with dailyreturns, the plot shows
> a black rectangle because the space between the bars is to narrow, how can I
> circumvent this problem? I am using a Laptop with a 15'' screen.
>
> thanks in advance
> Ren? Naarmann
>
> Thomas Etheber schrieb:
>>
>> Dear Rene,
>>
>> why are you trying to circumvent the already implemented wrapper in
>> style.QPfit?
>> If I got your problem right, you could just slice your data to rolling
>> estimation windows and then forward it to style.QPfit. Did you already have
>> a look at rollapply, I didn't test it but I think this should work for your
>> purpose. In this case you will have to store the coefficients in each run,
>> so that you are able to calculate the unsystematic returns, e.g. in a loop.
>>
>> Hth
>> Thomas
>>
>>
>> Ren? Naarmann schrieb:
>>>
>>> Hi all,
>>>
>>> thank you Julien for your thougts. I working with R 2.10.0 on Windows XP.
>>> I remembered the function applySeries and fapply respectively. I tried to
>>> calculate
>>> a variance covariance matrix over different periods. When this works I
>>> could go on with solve.QP which needs the Dmat.
>>>
>>> Here is an example:
>>> require(timeSeries)
>>> btime <- timeSequence(from="1999-01-01", to="1999-03-31", by = "month")
>>> etime <- timeLastDayInMonth(btime[-1])
>>> btime <- btime[-length(btime)]
>>> data1 <- rnorm(1:90)
>>> data2 <- matrix(rnorm(270), ncol = 3)
>>> colnames(data2) <- LETTERS[1:3]
>>> datats <- timeSequence(from="1999-01-01", to="1999-03-31", by = "day")
>>> S <- timeSeries(data2, datats)
>>> applySeries(S, btime, etime, FUN = function(x) cov(x,
>>> use="pairwise.complete.obs"))
>>> cov(window(S, start="1999-01-01", end="1999-02-28"))
>>>
>>> The result is a matrix which contains the varcov matrices for 2
>>> subperiods which is fine,
>>> but when I am using my real Data I receive this Message:
>>> Fehler in midnightStandard2(charvec, format) : ?'charvec' has non-NA
>>> entries of different number of characters
>>> I don't understand this error message, can anyone help?
>>>
>>>
>>> I read my datafile from a spreadsheet via readSeries(), the head looks
>>> like this:
>>> ? ? ? ? ? ? ? ? ? R2G ? ? ? ? ?R2V ? ? ? ? ? R1G ? ? ? ? ? R1V
>>> ?MSCIWexUS
>>> 1999-01-04 -0.006477506 ?0.004066846 -0.0026417776 -0.0009521722
>>> ?0.018939565
>>> 1999-01-05 ?0.001725935 ?0.002339151 ?0.0128278433 ?0.0116685255
>>> ?0.006108505
>>> 1999-01-06 ?0.018860732 ?0.007514636 ?0.0211913231 ?0.0215123444
>>> ?0.019311270
>>> 1999-01-07 ?0.005040827 -0.004752986 -0.0028397673 ?0.0013254882
>>> -0.005757679
>>> 1999-01-08 ?0.011525972 ?0.003911511 -0.0006109632 ?0.0101291838
>>> ?0.001059926
>>> 1999-01-11 ?0.013880501 -0.005775207 -0.0039712968 -0.0108176871
>>> -0.011788948
>>>
>>> Thanks in advance
>>> Ren?
>>>
>>>
>>> julien cuisinier schrieb:
>>>>
>>>> Hi Ren?,
>>>>
>>>>
>>>>
>>>> For quad prog algo, look for solve.QP from quadprog package in R. It
>>>> should allow you to do what you want (if I understood well). Please note I
>>>> am not too familiar with the PerformanceAnalytics package & its capabilities
>>>> (but suspect its style analysis function is a wrapper for solve.QP).
>>>> Building a rolling window analysis is quite trivial from there.
>>>>
>>>> On another note, using 1 month data is probably too small to have stable
>>>> results (depending on how many factors in your style analysis - personal
>>>> rule of thumb is 10 times the number of factors gives you a benchmark of nbr
>>>> of data points needed) , I would look to include more returns in your linear
>>>> regression. One could look into applying some sort of weighting to your
>>>> regression to improve forecasting power (e.g. exponential weighting). I
>>>> guess you are also looking into the residuals for autocorrelation &
>>>> heteroskedasticity which will impact the hypothesis testing of your
>>>> betas/coefficients.
>>>>
>>>> & Finally, always best to make a question as concise as possible,
>>>> include a piece of reproducible code of what you are trying to do & some
>>>> system information (what R version, what OS) ... that often makes easier for
>>>> list member to help & follow (more or less) the posting guide.
>>>>
>>>>
>>>>
>>>> HTH
>>>> Julien
>>>>
>>>>
>>>> On Mar 16, 2010, at 12:04 AM, Ren? Naarmann wrote:
>>>>
>>>>> Hi R-users,
>>>>>
>>>>> it is the first time for me writing to this group. I would be grateful
>>>>> if somebody could help me to find
>>>>> a solution to my problem.
>>>>>
>>>>> I am working on my final thesis and I would like to analyse the impact
>>>>> of return frequency
>>>>> using return-based style analysis. Specifically I would like to
>>>>> calculate attributable returns. An attributalbe return
>>>>> is the difference between the realised return of a fund and the
>>>>> forecast from using the estimated style coefficients
>>>>> multiplied by the respective indexseries.
>>>>>
>>>>> I am using the implemented functions for style analysis in the
>>>>> PerformanceAnalytics Package.
>>>>> I would like to use the quadratic programming algorithm just for each
>>>>> day in a specific month, i.e.
>>>>> use the daily returns from january to calculate the style weigths. This
>>>>> should be done month by month.
>>>>> In the next step the calculation should include two months of data and
>>>>> calculate the style weigths month by month.
>>>>>
>>>>> So far I tried to usw apply.month in combination with style.fit. This
>>>>> returns the same results for each month.
>>>>> In the next step I tried to use some code out of chart.RollingStyle. I
>>>>> change it for my purpose and
>>>>> receive the style weights in a rolling calculation and could enable the
>>>>> by option. So I get styleweights
>>>>> over a specific width and could shift the calculation by a specified
>>>>> block, i.e. calculate styleweigths
>>>>> for 20 days shifting this calculation by the next 20 days. What I would
>>>>> like to have is a shifting by month
>>>>> to use the last month realised daily returns to forecast the style
>>>>> weigths for the next month.
>>>>>
>>>>> Has somebody an idea how to handle this problem?
>>>>> Thank you in advance
>>>>>
>>>>> Ren? Naarmann
>>>>>
>>>>> --
>>>>> E-Mail: rene.naarmann at mnet-online.de
>>>>>
>>>>> _______________________________________________
>>>>> R-SIG-Finance at stat.math.ethz.ch mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>> -- Also note that this is not the r-help list where general R questions
>>>>> should go.
>>>>>
>>>>
>>>>
>>>>
>>>
>>
>>
>>
>>
>
> --
> Ren? Naarmann
> An der Kirche 3B ?30457 Hannover
> ---
> Tel.: ? (0511)-461643
> Mobil: ?(0170)-8100941
> E-Mail: rene.naarmann at gmx.de
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


From kabonline07 at yahoo.com  Thu Apr  1 18:44:39 2010
From: kabonline07 at yahoo.com (KAUSHIK BHATTACHARJEE)
Date: Thu, 1 Apr 2010 09:44:39 -0700 (PDT)
Subject: [R-SIG-Finance] Appropriate lag length in VAR/VECM
Message-ID: <687307.81125.qm@web110007.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100401/f6ec9e22/attachment.pl>

From pgilbert at bank-banque-canada.ca  Fri Apr  2 00:42:05 2010
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 1 Apr 2010 18:42:05 -0400
Subject: [R-SIG-Finance] Simulating VAR model (re-post)
In-Reply-To: <1270107314566-1747776.post@n4.nabble.com>
References: <1270006492076-1746259.post@n4.nabble.com><4BB2F7B9.10308@gmail.com><1270024086107-1746451.post@n4.nabble.com>
	<1270107314566-1747776.post@n4.nabble.com>
Message-ID: <D611103AA7EE3B4DAE7F7D49C72B291A0256A804@EXMAIL2.bocad.bank-banque-canada.ca>

Ron

Sorry I missed the original post. 

It seems from what you posted this time that you are using dse, as the
simulate you are picking up is from dse. In dse a VAR model is just a
special case of an ARMA model. I'm not sure what the original question
was, but usually the help page for simulate or the users' guide for dse
is an easier place to start than the code. It is installed when you
install the package, and also available at
http://cran.at.r-project.org/web/packages/dse/vignettes/dse-guide.pdf .
If you tried that already and it doesn't answer your question then
please send the question to me again.

To answer the question in this post, rather than the original question,
I think the code you would like to see is displayed by
dse:::simulate.ARMA . It is also available in the source package at
http://cran.at.r-project.org/src/contrib/dse_2009.10-2.tar.gz .

Paul

>-----Original Message-----
>From: r-sig-finance-bounces at stat.math.ethz.ch [mailto:r-sig-finance-
>bounces at stat.math.ethz.ch] On Behalf Of Ron_M
>Sent: April 1, 2010 3:35 AM
>To: r-sig-finance at stat.math.ethz.ch
>Subject: Re: [R-SIG-Finance] Simulating VAR model (re-post)
>
>
>No reply still...............
>
>Anyway I am planning to sneak into the inside of the "simulate"
>function...........So if I type "simulate" on the console and it throws
>following :
>
>> simulate
>function (model, ...)
>UseMethod("simulate")
><environment: namespace:dse>
>
>How to get the code inside the simulate function?
>
>Best,
>--
>View this message in context:
http://n4.nabble.com/Simulating-VAR-model-
>re-post-tp1746259p1747776.html
>Sent from the Rmetrics mailing list archive at Nabble.com.
>
>_______________________________________________
>R-SIG-Finance at stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>-- Subscriber-posting only. If you want to post, subscribe first.
>-- Also note that this is not the r-help list where general R questions
>should go.
====================================================================================

La version fran?aise suit le texte anglais.

------------------------------------------------------------------------------------

This email may contain privileged and/or confidential information, and the Bank of
Canada does not waive any related rights. Any distribution, use, or copying of this
email or the information it contains by other than the intended recipient is
unauthorized. If you received this email in error please delete it immediately from
your system and notify the sender promptly by email that you have done so. 

------------------------------------------------------------------------------------

Le pr?sent courriel peut contenir de l'information privil?gi?e ou confidentielle.
La Banque du Canada ne renonce pas aux droits qui s'y rapportent. Toute diffusion,
utilisation ou copie de ce courriel ou des renseignements qu'il contient par une
personne autre que le ou les destinataires d?sign?s est interdite. Si vous recevez
ce courriel par erreur, veuillez le supprimer imm?diatement et envoyer sans d?lai ?
l'exp?diteur un message ?lectronique pour l'aviser que vous avez ?limin? de votre
ordinateur toute copie du courriel re?u.

From arun.kumar.saha at gmail.com  Fri Apr  2 08:48:40 2010
From: arun.kumar.saha at gmail.com (Arun.stat)
Date: Thu, 1 Apr 2010 22:48:40 -0800 (PST)
Subject: [R-SIG-Finance] Appropriate lag length in VAR/VECM
In-Reply-To: <687307.81125.qm@web110007.mail.gq1.yahoo.com>
References: <687307.81125.qm@web110007.mail.gq1.yahoo.com>
Message-ID: <1270190920052-1748863.post@n4.nabble.com>


Dear Kaushik, detailed procedures for selection of the lag-length of any VAR
family of models is explicitly discussed (with underlying theory) in
Lutkepohl-2006. You may wish to visit www.jmulti.de to find more details.
-- 
View this message in context: http://n4.nabble.com/Appropriate-lag-length-in-VAR-VECM-tp1748322p1748863.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From kagba2006 at yahoo.com  Fri Apr  2 10:36:08 2010
From: kagba2006 at yahoo.com (FMH)
Date: Fri, 2 Apr 2010 01:36:08 -0700 (PDT)
Subject: [R-SIG-Finance] Derivative of a smooth function
Message-ID: <151970.38030.qm@web38302.mail.mud.yahoo.com>


Dear All,

I've been?searching for?appropriate codes to compute the rate of change and the curvature?of ?nonparametric regression model whish was denoted by a smooth function?but?unfortunately?don't manage to?do?it. I presume that such characteristics from a smooth curve can be determined by the first and second derivative operators.

The following are the example of fitting a nonparametric regression model via smoothing spline function from the Help file in R.

#######################################################
attach(cars)
plot(speed, dist, main = "data(cars)? &? smoothing splines")
cars.spl <- smooth.spline(speed, dist)
lines(cars.spl, col = "blue")
lines(smooth.spline(speed, dist, df=10), lty=2, col = "red")
legend(5,120,c(paste("default [C.V.] => df =",round(cars.spl$df,1)),"s( * , df = 10)"), col = c("blue","red"), lty = 1:2, bg='bisque')
detach()

#######################################################


Could someone please advice me?the?appropriate way to determine such derivatives on the curves which were fitted by the function above and would like to thank you in advance.

Cheers
Fir?






From cmdr_rogue at hotmail.com  Fri Apr  2 11:07:26 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Fri, 02 Apr 2010 05:07:26 -0400
Subject: [R-SIG-Finance] Derivative of a smooth function
In-Reply-To: <151970.38030.qm@web38302.mail.mud.yahoo.com>
References: <151970.38030.qm@web38302.mail.mud.yahoo.com>
Message-ID: <BLU0-SMTP235B18FB7763E0483A7176E21C0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100402/0696d49f/attachment.pl>

From cmdr_rogue at hotmail.com  Fri Apr  2 11:08:56 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Fri, 02 Apr 2010 05:08:56 -0400
Subject: [R-SIG-Finance] Derivative of a smooth function
In-Reply-To: <151970.38030.qm@web38302.mail.mud.yahoo.com>
References: <151970.38030.qm@web38302.mail.mud.yahoo.com>
Message-ID: <BLU0-SMTP62029D4F0A77C9A954C683E21C0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100402/37e9bb6a/attachment.pl>

From renault.gautier at gmail.com  Fri Apr  2 12:22:51 2010
From: renault.gautier at gmail.com (Gautier RENAULT)
Date: Fri, 2 Apr 2010 12:22:51 +0200
Subject: [R-SIG-Finance] Fwd:  FW: VECM problem with exogenous components
In-Reply-To: <v2k5bfb4a971004020024ve9629d34k46ff274781621bd6@mail.gmail.com>
References: <B89F0CE41D45644A97CCC93DF548C1C3235BEB24@GBHENXMB02.corp.amvescap.net>
	<4BB319F1.2080904@gmail.com>
	<B89F0CE41D45644A97CCC93DF548C1C3235BEB54@GBHENXMB02.corp.amvescap.net>
	<4BB3250F.2010308@gmail.com>
	<B89F0CE41D45644A97CCC93DF548C1C3235BEC3F@GBHENXMB02.corp.amvescap.net>
	<j2k5bfb4a971003311257je1641d38rec5bd7a6e0b9ee64@mail.gmail.com>
	<B89F0CE41D45644A97CCC93DF548C1C3235BF0C4@GBHENXMB02.corp.amvescap.net>
	<v2k5bfb4a971004020024ve9629d34k46ff274781621bd6@mail.gmail.com>
Message-ID: <k2z5bfb4a971004020322hf4419bb8yeedc4be6f65ed4ec@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100402/6ef1fec4/attachment.pl>

From jeff.a.ryan at gmail.com  Fri Apr  2 15:09:24 2010
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Fri, 2 Apr 2010 08:09:24 -0500
Subject: [R-SIG-Finance] Derivative of a smooth function
In-Reply-To: <151970.38030.qm@web38302.mail.mud.yahoo.com>
References: <151970.38030.qm@web38302.mail.mud.yahoo.com>
Message-ID: <p2xe8e755251004020609s914eef5au59293e75cd06cee4@mail.gmail.com>

Please keep in mind this question has absolutely nothing to do with
finance, and therefore needs to instead be directed to R-help.

Thanks in advance for keeping the R-finance list on topic.

Jeff

On Fri, Apr 2, 2010 at 3:36 AM, FMH <kagba2006 at yahoo.com> wrote:
>
> Dear All,
>
> I've been?searching for?appropriate codes to compute the rate of change and the curvature?of ?nonparametric regression model whish was denoted by a smooth function?but?unfortunately?don't manage to?do?it. I presume that such characteristics from a smooth curve can be determined by the first and second derivative operators.
>
> The following are the example of fitting a nonparametric regression model via smoothing spline function from the Help file in R.
>
> #######################################################
> attach(cars)
> plot(speed, dist, main = "data(cars)? &? smoothing splines")
> cars.spl <- smooth.spline(speed, dist)
> lines(cars.spl, col = "blue")
> lines(smooth.spline(speed, dist, df=10), lty=2, col = "red")
> legend(5,120,c(paste("default [C.V.] => df =",round(cars.spl$df,1)),"s( * , df = 10)"), col = c("blue","red"), lty = 1:2, bg='bisque')
> detach()
>
> #######################################################
>
>
> Could someone please advice me?the?appropriate way to determine such derivatives on the curves which were fitted by the function above and would like to thank you in advance.
>
> Cheers
> Fir
>
>
>
>
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at insightalgo.com

ia: insight algorithmics
www.insightalgo.com


From nelson.ana at gmail.com  Tue Apr  6 10:47:01 2010
From: nelson.ana at gmail.com (Ana Nelson)
Date: Tue, 6 Apr 2010 09:47:01 +0100
Subject: [R-SIG-Finance] Java-based RBloomberg - early adopters wanted for
	testing
Message-ID: <p2oa7d6d2741004060147j6bf27efbze91fd17eab3e1b0e@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100406/fc4860e2/attachment.pl>

From jeff.hamann at moneytree.com  Tue Apr  6 21:25:13 2010
From: jeff.hamann at moneytree.com (Jeff Hamann)
Date: Tue, 6 Apr 2010 12:25:13 -0700
Subject: [R-SIG-Finance] subsetting from timeSeries
Message-ID: <BB885AC9-8895-40BC-97C1-C5DD0DC46077@moneytree.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100406/f35c0018/attachment.pl>

From cedrick at cedrickjohnson.com  Tue Apr  6 21:27:59 2010
From: cedrick at cedrickjohnson.com (Cedrick W. Johnson)
Date: Tue, 6 Apr 2010 19:27:59 +0000
Subject: [R-SIG-Finance] subsetting from timeSeries
In-Reply-To: <BB885AC9-8895-40BC-97C1-C5DD0DC46077@moneytree.com>
References: <BB885AC9-8895-40BC-97C1-C5DD0DC46077@moneytree.com>
Message-ID: <462168342-1270582115-cardhu_decombobulator_blackberry.rim.net-1239687849-@bda147.bisx.prod.on.blackberry>

Try converting into xts format, the xts vignettes give many examples of subsetting..

Also to.period() may be of help to you

-c

Sent from my BlackBerry?

-----Original Message-----
From: Jeff Hamann <jeff.hamann at moneytree.com>
Date: Tue, 6 Apr 2010 12:25:13 
To: <r-sig-finance at stat.math.ethz.ch>
Subject: [R-SIG-Finance] subsetting from timeSeries

I'm a newbie with timeSeries and I'm trying to subset data from a timeSeries objects (by month, quarter, etc.)

GMT
                  ^GSPC          RYJ          NFO           STH          CVY
2007-01-03  0.013961173 -0.009841523  0.024217982 -0.0003857281  0.018018506
2007-02-01 -0.022088306 -0.006062295 -0.003042984 -0.0120319713 -0.006430890
2007-03-01  0.009930484 -0.005543251  0.021854675  0.0143441110  0.003220615
2007-04-02  0.042379836  0.055675009  0.041254253  0.0042250879  0.037859411
2007-05-01  0.032030724  0.043216601  0.044762718  0.0372433489  0.028772691
2007-06-01 -0.017976931  0.000000000 -0.021431861 -0.0077850254 -0.018651593
                   XRO          ONEQ          FBT          FDV          FDN
2007-01-03  0.04083675  0.0179801641  0.024199865  0.024397067  0.048071606
2007-02-01 -0.01103803 -0.0194842469 -0.040227932 -0.007760824 -0.012337957

and I'm kind of a newbie with timeSeries. 

Before I spend a few days hacking out suboptimal solutions, I thought I might ask the group where I might find a decent tutorial on sub-setting timeSeries using only date ranges. 

I have monthly, weekly, and daily datasets and need to grad monthly, weekly, and daily subsets for by month, quarter, etc.

I'm sure this will elicit an RTFM response, but please, pretty please, with sugar on top, be gentle. I'm new here.

Thanks,
Jeff.  


Jeff D. Hamann, PhD
2430 NW Professional Drive
Corvallis, Oregon 97330
877-421-9815
jeff.hamann[at]moneytree[dot]com
http://www.moneytree.com

Full featured flexible financial plans in minutes. 
Simple or advanced. Goal or cash flow. Desktop or online.
Free downloads, videos, & online trials.



	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

From brian at braverock.com  Tue Apr  6 21:31:33 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 06 Apr 2010 14:31:33 -0500
Subject: [R-SIG-Finance] subsetting from timeSeries
In-Reply-To: <BB885AC9-8895-40BC-97C1-C5DD0DC46077@moneytree.com>
References: <BB885AC9-8895-40BC-97C1-C5DD0DC46077@moneytree.com>
Message-ID: <4BBB8C15.8060009@braverock.com>

Well,  you asked for it, so here's TFM

      https://www.rmetrics.org/node/8

Regards,

     - Brian

On 04/06/2010 02:25 PM, Jeff Hamann wrote:
> I'm a newbie with timeSeries and I'm trying to subset data from a timeSeries objects (by month, quarter, etc.)
>
> GMT
>                    ^GSPC          RYJ          NFO           STH          CVY
> 2007-01-03  0.013961173 -0.009841523  0.024217982 -0.0003857281  0.018018506
> 2007-02-01 -0.022088306 -0.006062295 -0.003042984 -0.0120319713 -0.006430890
> 2007-03-01  0.009930484 -0.005543251  0.021854675  0.0143441110  0.003220615
> 2007-04-02  0.042379836  0.055675009  0.041254253  0.0042250879  0.037859411
> 2007-05-01  0.032030724  0.043216601  0.044762718  0.0372433489  0.028772691
> 2007-06-01 -0.017976931  0.000000000 -0.021431861 -0.0077850254 -0.018651593
>                     XRO          ONEQ          FBT          FDV          FDN
> 2007-01-03  0.04083675  0.0179801641  0.024199865  0.024397067  0.048071606
> 2007-02-01 -0.01103803 -0.0194842469 -0.040227932 -0.007760824 -0.012337957
>
> and I'm kind of a newbie with timeSeries.
>
> Before I spend a few days hacking out suboptimal solutions, I thought I might ask the group where I might find a decent tutorial on sub-setting timeSeries using only date ranges.
>
> I have monthly, weekly, and daily datasets and need to grad monthly, weekly, and daily subsets for by month, quarter, etc.
>
> I'm sure this will elicit an RTFM response, but please, pretty please, with sugar on top, be gentle. I'm new here.
>
> Thanks,
> Jeff.
>
>
> Jeff D. Hamann, PhD
> 2430 NW Professional Drive
> Corvallis, Oregon 97330
> 877-421-9815
> jeff.hamann[at]moneytree[dot]com
> http://www.moneytree.com
>
> Full featured flexible financial plans in minutes.
> Simple or advanced. Goal or cash flow. Desktop or online.
> Free downloads, videos,&  online trials.
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>    


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From jeff.a.ryan at gmail.com  Tue Apr  6 22:21:06 2010
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Tue, 6 Apr 2010 15:21:06 -0500
Subject: [R-SIG-Finance] subsetting from timeSeries
In-Reply-To: <BB885AC9-8895-40BC-97C1-C5DD0DC46077@moneytree.com>
References: <BB885AC9-8895-40BC-97C1-C5DD0DC46077@moneytree.com>
Message-ID: <g2qe8e755251004061321t60b07858h94aa0b33e5e10dca@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100406/06cc8ca7/attachment.pl>

From jeff.a.ryan at gmail.com  Tue Apr  6 22:22:52 2010
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Tue, 6 Apr 2010 15:22:52 -0500
Subject: [R-SIG-Finance] subsetting from timeSeries
In-Reply-To: <g2qe8e755251004061321t60b07858h94aa0b33e5e10dca@mail.gmail.com>
References: <BB885AC9-8895-40BC-97C1-C5DD0DC46077@moneytree.com>
	<g2qe8e755251004061321t60b07858h94aa0b33e5e10dca@mail.gmail.com>
Message-ID: <s2te8e755251004061322n7bcfdb2bmdebdf4f9cd6e391d@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100406/b2722e34/attachment.pl>

From jeff.a.ryan at gmail.com  Tue Apr  6 22:28:20 2010
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Tue, 6 Apr 2010 15:28:20 -0500
Subject: [R-SIG-Finance] subsetting from timeSeries
In-Reply-To: <s2te8e755251004061322n7bcfdb2bmdebdf4f9cd6e391d@mail.gmail.com>
References: <BB885AC9-8895-40BC-97C1-C5DD0DC46077@moneytree.com>
	<g2qe8e755251004061321t60b07858h94aa0b33e5e10dca@mail.gmail.com>
	<s2te8e755251004061322n7bcfdb2bmdebdf4f9cd6e391d@mail.gmail.com>
Message-ID: <l2ke8e755251004061328wa4976baej2842a0de77429424@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100406/35a7e60a/attachment.pl>

From markknecht at gmail.com  Wed Apr  7 02:21:19 2010
From: markknecht at gmail.com (Mark Knecht)
Date: Tue, 6 Apr 2010 17:21:19 -0700
Subject: [R-SIG-Finance] Estimating volume at price for backtest data bars?
Message-ID: <t2v5bdc1c8b1004061721xf71252a8ve2daed7f47f484e9@mail.gmail.com>

Hi,
   I wonder if anyone has seen anything written publicly about
estimating volume at price within backtest bars where you don't have
any data other than up/down volume for the bar? For instance, when
looking at 1 minute ES bars they are, on average maybe 6-8 price ticks
tall. How might one estimate where the volume was in the bar for
upticks and downticks? Clearly there's no was to be completely
accurate, but maybe it's better than doing nothing.

  I'm playing with using sort of a skewed normal distribution which is
interesting, but it doesn't take open and close into account. When I
look at real data there's often a bit more up volume near the top when
the price is trending strongly up, and more to the downside when the
price is trending down. I could use other indicators for simple
estimates of trend, and then do something based on that.

   Anyway, I'm just interested in reading something on the subject, if
there's anything out there, before messing with R code.

Thanks,
Mark


From HodgessE at uhd.edu  Wed Apr  7 06:48:48 2010
From: HodgessE at uhd.edu (Hodgess, Erin)
Date: Tue, 6 Apr 2010 23:48:48 -0500
Subject: [R-SIG-Finance] using "to.weekly" on a zoo object
Message-ID: <101CBF5360343B45B9C9B0B05D71474C25B2FB@BALI.uhd.campus>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100406/b39168de/attachment.ksh>

From breman.mark at gmail.com  Wed Apr  7 08:24:32 2010
From: breman.mark at gmail.com (Mark Breman)
Date: Wed, 7 Apr 2010 08:24:32 +0200
Subject: [R-SIG-Finance] using "to.weekly" on a zoo object
In-Reply-To: <101CBF5360343B45B9C9B0B05D71474C25B2FB@BALI.uhd.campus>
References: <101CBF5360343B45B9C9B0B05D71474C25B2FB@BALI.uhd.campus>
Message-ID: <w2v5e6a2e671004062324t8ebbe3ecv6ea7b6f81cc78761@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100407/d38fab43/attachment.pl>

From brian at braverock.com  Wed Apr  7 11:05:40 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 07 Apr 2010 04:05:40 -0500
Subject: [R-SIG-Finance] Estimating volume at price for backtest data
 bars?
In-Reply-To: <t2v5bdc1c8b1004061721xf71252a8ve2daed7f47f484e9@mail.gmail.com>
References: <t2v5bdc1c8b1004061721xf71252a8ve2daed7f47f484e9@mail.gmail.com>
Message-ID: <4BBC4AE4.1020400@braverock.com>

Mark Knecht wrote:
> Hi,
>    I wonder if anyone has seen anything written publicly about
> estimating volume at price within backtest bars where you don't have
> any data other than up/down volume for the bar? For instance, when
> looking at 1 minute ES bars they are, on average maybe 6-8 price ticks
> tall. How might one estimate where the volume was in the bar for
> upticks and downticks? Clearly there's no was to be completely
> accurate, but maybe it's better than doing nothing.
> 
>   I'm playing with using sort of a skewed normal distribution which is
> interesting, but it doesn't take open and close into account. When I
> look at real data there's often a bit more up volume near the top when
> the price is trending strongly up, and more to the downside when the
> price is trending down. I could use other indicators for simple
> estimates of trend, and then do something based on that.
> 
>    Anyway, I'm just interested in reading something on the subject, if
> there's anything out there, before messing with R code.

If I get some time, I'll dig through my collection of papers, because there is 
literature on matching up Buy-driven versus sell-driven volume.

However, all this literature is on tick data.  You will likely need to acquire 
a source for tick data before you can have any accuracy at all in any resulting 
estimates.

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From brian at braverock.com  Wed Apr  7 11:12:46 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 07 Apr 2010 04:12:46 -0500
Subject: [R-SIG-Finance] using "to.weekly" on a zoo object
In-Reply-To: <101CBF5360343B45B9C9B0B05D71474C25B2FB@BALI.uhd.campus>
References: <101CBF5360343B45B9C9B0B05D71474C25B2FB@BALI.uhd.campus>
Message-ID: <4BBC4C8E.2080608@braverock.com>

Hodgess, Erin wrote:
> Dear Finance People:
> 
> I used the "get.hist.quote" to get the S&P as seen below:
> 
>>  spc <- get.hist.quote(instrument = "^gspc", start = "1998-01-01",
> +               quote = "Close")
> trying URL 'http://chart.yahoo.com/table.csv?s=^gspc&a=0&b=01&c=1998&d=3&e=05&f=2010&g=d&q=q&y=0&z=^gspc&x=.csv'
> Content type 'text/csv' length unknown
> opened URL
> .......... .......... .......... .......... ..........
> .......... .......... .......... .......... ..........
> .......... .......... .......... .......... ..........
> .......... .......... .......... ...
> downloaded 183 Kb
> 
> time series starts 1998-01-02
> 
> 
> Then I use the to.weekly to convert to weekly data:
> 
>> spc.w <- to.weekly(spc)
>> str(spc.w)
> An ?xts? object from 1998-01-02 to 2010-04-05 containing:
>   Data: num [1:641, 1:4] 975 977 939 979 957 ...
>  - attr(*, "dimnames")=List of 2
>   ..$ : NULL
>   ..$ : chr [1:4] "spc.Open" "spc.High" "spc.Low" "spc.Close"
>   Indexed by objects of class: [Date] TZ: 
>   Original class: 'zoo'  
>   xts Attributes:  
>  NULL
> 
> My question is:  I  only need the "Close" section.  The other ones (Open, High, Low) are duplicates.  Is there a way just to return the Close component, please?

spc.wc <- Cl(to.weekly(spc))
?Cl

# or

spc.wc <- to.weekly(spc)[,"spc.Close"]

# or

spc.wc <- Cl(spc[endpoints(spc,on='weeks'),])
?endpoints


There is quite a lot of data in the list archives on to.period and endpoints. 
  Also, subsetting R objects is a FAQ, covered in any good introduction to R.

Regards,

     - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From markleeds at verizon.net  Wed Apr  7 14:13:20 2010
From: markleeds at verizon.net (markleeds at verizon.net)
Date: Wed, 07 Apr 2010 07:13:20 -0500 (CDT)
Subject: [R-SIG-Finance] Estimating volume at price for backtest data
 bars?
Message-ID: <866436295.1870264.1270642400640.JavaMail.root@vms170009.mailsrvcs.net>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100407/7a614a30/attachment.html>

From markknecht at gmail.com  Wed Apr  7 16:25:12 2010
From: markknecht at gmail.com (Mark Knecht)
Date: Wed, 7 Apr 2010 07:25:12 -0700
Subject: [R-SIG-Finance] Estimating volume at price for backtest data
	bars?
In-Reply-To: <866436295.1870264.1270642400640.JavaMail.root@vms170009.mailsrvcs.net>
References: <866436295.1870264.1270642400640.JavaMail.root@vms170009.mailsrvcs.net>
Message-ID: <p2x5bdc1c8b1004070725w2f1cede3sf9993b2f3a029c74@mail.gmail.com>

On Wed, Apr 7, 2010 at 5:13 AM,  <markleeds at verizon.net> wrote:
> hi mark: if i understand your question ( not sure that I do ). google for
> lee ready algorithm.
>
>
> On Apr 7, 2010, Brian G. Peterson <brian at braverock.com> wrote:
>
> Mark Knecht wrote:
>> Hi,
>> I wonder if anyone has seen anything written publicly about
>> estimating volume at price within backtest bars where you don't have
>> any data other than up/down volume for the bar? For instance, when
>> looking at 1 minute ES bars they are, on average maybe 6-8 price ticks
>> tall. How might one estimate where the volume was in the bar for
>> upticks and downticks? Clearly there's no was to be completely
>> accurate, but maybe it's better than doing nothing.
>>
>> I'm playing with using sort of a skewed normal distribution which is
>> interesting, but it doesn't take open and close into account. When I
>> look at real data there's often a bit more up volume near the top when
>> the price is trending strongly up, and more to the downside when the
>> price is trending down. I could use other indicators for simple
>> estimates of trend, and then do something based on that.
>>
>> Anyway, I'm just interested in reading something on the subject, if
>> there's anything out there, before messing with R code.
>
> If I get some time, I'll dig through my collection of papers, because there
> is
> literature on matching up Buy-driven versus sell-driven volume.
>
> However, all this literature is on tick data. You will likely need to
> acquire
> a source for tick data before you can have any accuracy at all in any
> resulting
> estimates.
>
> - Brian
>

Brian & Mark,
   Thanks for your responses. Hopefully folks don't consider this
off-topic as I haven't posted any R code. If so we can cease the
conversation.

   On TradeStation I have tick data down to 1 tick. The problem is
that it only goes back 6 months and I need to look at system
performance much further back - say 10-20 years - where I only have
minute or larger data and want to estimate what the tick data might
have told me if I had it. The key word here is 'estimate'.

   Here's a bit more explanation about what I'm thinking about:

1) Assume I'm looking at bars for some instrument and that a certain
bar is maybe 9 ticks tall. (When talking about price I use the word
'tick' to mean each minimum price move within that bar. For the ES min
move is 0.25, so each 0.25 is one 'tick' vertically.) The 9 tick bar
goes from 998 to 1000.

2) Assume for discussion that within this bar there was up volume of
around 15000 contracts and down volume of around 7000 contracts and
that in general this bar happened a long time ago so I don't have tick
data. How might I __estimate__ how much volume occurred at each min
price move tick within the bar? Visually in the diagram below (which
likely won't survive email very well) I use a symmetrical sort-of
Fibonacci based distribution of the volume:

Dn = Down volume
Up = Up volume

Dn         Price         Up
 0         1000.00     800
500       0999.75    1300
800       0999.50     2100
1300     0999.25     3400
2100     0999.00     3400
1300     0998.75     2100
800       0998.50    1300
500       0998.25    800
300       0998.00    0

   In general there won't be any down volume at the highest price in
the bar (upper left) and there won't be any up volume at the lowest
price in the bar. (Lower right)

   What I'm interested in is means of estimating what volume *might*
have traded at each price level based on volume of the bar, relative
volume of the bar to previous or subsequent bars, time of day, type of
bar (i.e. - candlestick type for instance) Basically use any criteria
you want and come up with a way to assign volume to price in a
non-arbitrary and (hopefully) more or less realistic way.

   Hopefully this would clarify what I'm looking for. The R code
likely won't be hard at all, depending on how much math is required
and what sort of accuracy someone is looking for. In my case it really
only needs to be a rough estimate as I don't really care exactly what
happens in any single bar and really only that over lot (say 100's) of
bars I get a reasonably clear picture of volume at any given price.

Thanks,
Mark


From patzoul at free.fr  Wed Apr  7 20:45:06 2010
From: patzoul at free.fr (patzoul)
Date: Wed, 7 Apr 2010 10:45:06 -0800 (PST)
Subject: [R-SIG-Finance] how to manually add data in a timeseries?
Message-ID: <1270665906809-1754790.post@n4.nabble.com>


I have a timeseries and would like to add data for today. How can I do that?
-- 
View this message in context: http://n4.nabble.com/how-to-manually-add-data-in-a-timeseries-tp1754790p1754790.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Wed Apr  7 20:51:02 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 07 Apr 2010 13:51:02 -0500
Subject: [R-SIG-Finance] how to manually add data in a timeseries?
In-Reply-To: <1270665906809-1754790.post@n4.nabble.com>
References: <1270665906809-1754790.post@n4.nabble.com>
Message-ID: <4BBCD416.4040701@braverock.com>

On 04/07/2010 01:45 PM, patzoul wrote:
> I have a timeseries and would like to add data for today. How can I do that?
>    

try

?rbind


From patzoul at free.fr  Wed Apr  7 22:48:56 2010
From: patzoul at free.fr (patzoul)
Date: Wed, 7 Apr 2010 12:48:56 -0800 (PST)
Subject: [R-SIG-Finance] how to manually add data in a timeseries?
In-Reply-To: <4BBCD416.4040701@braverock.com>
References: <1270665906809-1754790.post@n4.nabble.com>
	<4BBCD416.4040701@braverock.com>
Message-ID: <1270673336014-1754997.post@n4.nabble.com>


My data is in variable x as shown below. 

> x
           AAPL.Open AAPL.High AAPL.Low AAPL.Close AAPL.Volume AAPL.Adjusted
2007-10-17    172.69    173.04   169.18     172.75    40271900        172.75

How can I add another line of data such as:
2010-04-07 250 250 250 250 0 250


-- 
View this message in context: http://n4.nabble.com/how-to-manually-add-data-in-a-timeseries-tp1754790p1754997.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Wed Apr  7 23:16:31 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 07 Apr 2010 16:16:31 -0500
Subject: [R-SIG-Finance] how to manually add data in a timeseries?
In-Reply-To: <1270673336014-1754997.post@n4.nabble.com>
References: <1270665906809-1754790.post@n4.nabble.com>	<4BBCD416.4040701@braverock.com>
	<1270673336014-1754997.post@n4.nabble.com>
Message-ID: <4BBCF62F.501@braverock.com>

On 04/07/2010 03:48 PM, patzoul wrote:
> My data is in variable x as shown below.
>
>    
>> x
>>      
>             AAPL.Open AAPL.High AAPL.Low AAPL.Close AAPL.Volume AAPL.Adjusted
> 2007-10-17    172.69    173.04   169.18     172.75    40271900        172.75
>
> How can I add another line of data such as:
> 2010-04-07 250 250 250 250 0 250
>
>
>    
Thank you for taking the time to clarify your question.

However, the answer to your question will not change.

You will use rbind.

You may first need to use xts() to create your new row.

This is not really a finance question.

Please start with the xts documentation and vignettes.  If you are still 
having trouble, try r-help.

   - Brian


From patzoul at free.fr  Thu Apr  8 22:19:34 2010
From: patzoul at free.fr (patzoul)
Date: Thu, 8 Apr 2010 12:19:34 -0800 (PST)
Subject: [R-SIG-Finance] how to manually add data in a timeseries?
In-Reply-To: <4BBCF62F.501@braverock.com>
References: <1270665906809-1754790.post@n4.nabble.com>
	<4BBCD416.4040701@braverock.com>
	<1270673336014-1754997.post@n4.nabble.com>
	<4BBCF62F.501@braverock.com>
Message-ID: <1270757974177-1788231.post@n4.nabble.com>


I did xts(t(c(250,0,250,0)), Sys.Date) to create the new line of data:
2010-04-08 250 0 250 0 

and then use rbind to add it to the existing table.

thanks

-- 
View this message in context: http://n4.nabble.com/how-to-manually-add-data-in-a-timeseries-tp1754790p1788231.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From Samuel.Meichtry at bkw-fmb.ch  Fri Apr  9 09:32:50 2010
From: Samuel.Meichtry at bkw-fmb.ch (Samuel.Meichtry at bkw-fmb.ch)
Date: Fri, 9 Apr 2010 09:32:50 +0200
Subject: [R-SIG-Finance] RBloomberg blpConnect() not responding
Message-ID: <201004090732.o397Wr9R020512@hypatia.math.ethz.ch>

Dear Finance People

I have a Rscript which grasps every 2 minutes for data on Bloomberg timeseries in a tryCatch-while-Loop.

When there is an error it waits 2 minutes and reconnects to Bloomberg and tries again. Unfortunately it sometimes happen, that blpConnect() is not responding and it does not give an error-message. After that I can only close manually the Skript-Error-Message-Box in Windows.

Is there a possibility to close the Rscript properly, or prevent the hanging of the RScript?

Thank you!

#My Code:
tryCatch({
   while(TRUE){
	#...
   }; #End while
   #... error, finally, etc.
}; #End while
cat("Open Bloomberg connection ...","\n") conn <- blpConnect() cat("Bloomberg connection succeeded.","\n")


My Logfile:
2010-04-09 02:34:17 Restart 1st while ...  
2010-04-09 02:34:19 Open Bloomberg connection ...			#<- Here it is hanging
------------------------------------------------------------------
2010-04-09 08:35:32 Rotc process started.				#<- I have to restart it manually!!


____________________________________________
BKW FMB Energie AG
Energy Trading
Samuel Meichtry
Analyst Energy Trading
Tel +41 31 330 53 99
Fax +41 31 330 56 16
e-mail samuel.meichtry at bkw-fmb.ch


From nelson.ana at gmail.com  Fri Apr  9 09:53:51 2010
From: nelson.ana at gmail.com (Ana Nelson)
Date: Fri, 9 Apr 2010 08:53:51 +0100
Subject: [R-SIG-Finance] RBloomberg blpConnect() not responding
In-Reply-To: <201004090732.o397Wr9R020512@hypatia.math.ethz.ch>
References: <201004090732.o397Wr9R020512@hypatia.math.ethz.ch>
Message-ID: <o2pa7d6d2741004090053je3c18e83hc5bee465448c6c21@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100409/7f992fa3/attachment.pl>

From Samuel.Meichtry at bkw-fmb.ch  Fri Apr  9 10:59:26 2010
From: Samuel.Meichtry at bkw-fmb.ch (Samuel.Meichtry at bkw-fmb.ch)
Date: Fri, 9 Apr 2010 10:59:26 +0200
Subject: [R-SIG-Finance] RBloomberg blpConnect() not responding
In-Reply-To: <o2pa7d6d2741004090053je3c18e83hc5bee465448c6c21@mail.gmail.com>
References: <201004090732.o397Wr9R020512@hypatia.math.ethz.ch>
	<o2pa7d6d2741004090053je3c18e83hc5bee465448c6c21@mail.gmail.com>
Message-ID: <201004090859.o398xdmx010930@hypatia.math.ethz.ch>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100409/e768da36/attachment.pl>

From nelson.ana at gmail.com  Fri Apr  9 11:28:46 2010
From: nelson.ana at gmail.com (Ana Nelson)
Date: Fri, 9 Apr 2010 10:28:46 +0100
Subject: [R-SIG-Finance] RBloomberg blpConnect() not responding
In-Reply-To: <201004090859.o398xdmx010930@hypatia.math.ethz.ch>
References: <201004090732.o397Wr9R020512@hypatia.math.ethz.ch>
	<o2pa7d6d2741004090053je3c18e83hc5bee465448c6c21@mail.gmail.com>
	<201004090859.o398xdmx010930@hypatia.math.ethz.ch>
Message-ID: <v2na7d6d2741004090228xeb19983ez3b1d14333db278a4@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100409/57e6cc22/attachment.pl>

From risk2009 at ath.forthnet.gr  Fri Apr  9 13:01:16 2010
From: risk2009 at ath.forthnet.gr (Research)
Date: Fri, 09 Apr 2010 14:01:16 +0300
Subject: [R-SIG-Finance] N'th of month working day problem
In-Reply-To: <971536df1001190620l54f2b904w10ac87ea22eaec94@mail.gmail.com>
References: <4B54761F.6020606@ath.forthnet.gr>
	<971536df1001180716s5eea5424vbf1dc105e94881fd@mail.gmail.com>
	<971536df1001190620l54f2b904w10ac87ea22eaec94@mail.gmail.com>
Message-ID: <4BBF08FC.3030501@ath.forthnet.gr>

Dear all,

Some time ago I received some very kind  help (special thanks to Gabor) 
to construct a function that isolates the n'th   working day of each 
month for zoo object (time series) to create monthly data from daily 
observations.

I found out that the code works fine except for the 29 till 31st dates 
of each month as it skips some months (February for example).

If  you could help me isolate the problem I would be grateful as I can 
not find a way to explain to R to keep the last  working day of month if 
I choose the 29th, 30th or 31st dates...

I enclose  a working version of the function and a script for demo purposes.

Many thanks in advance,
Costas

library(fImport)
library(zoo)
DJ<-yahooSeries("^DJI", frequency="daily", nDaysBack=10000)
DJd<-as.zoo(DJ[,4])

### Choose number of day for month

chooseday<-function(z, day)

     {

     # z.na is same as z but with missing days added using NAs
     # Its formed by merging z with a zoo-width series containing all days.

     rng <- range(time(z))
     z.na <- merge(z, zoo(, seq(rng[1], rng[2], by = "day")))

     # form a series that has NAs wherever z.na does but has 1, 2, 3, ...
     # instead of z.na's data values and then use na.locf to fill in NAs

     idx <- na.locf(seq_along(z.na) + (0 * z.na))

     # pick off elements of z.na corresponding to i'th of month

     noofday <- paste(day)

     if (day<10) noofday<-paste("0",day, sep="")

     tempdata<-z.na[idx[format(time(z.na), "%d") == noofday]]

     return(tempdata)

     }

length(chooseday(DJd,1))
length(chooseday(DJd,2))
length(chooseday(DJd,31))
length(chooseday(DJd,30))
length(chooseday(DJd,29))
length(chooseday(DJd,28))
tail(chooseday(DJd,31))


From ggrothendieck at gmail.com  Fri Apr  9 13:55:38 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 9 Apr 2010 07:55:38 -0400
Subject: [R-SIG-Finance] N'th of month working day problem
In-Reply-To: <4BBF08FC.3030501@ath.forthnet.gr>
References: <4B54761F.6020606@ath.forthnet.gr>
	<971536df1001180716s5eea5424vbf1dc105e94881fd@mail.gmail.com> 
	<971536df1001190620l54f2b904w10ac87ea22eaec94@mail.gmail.com> 
	<4BBF08FC.3030501@ath.forthnet.gr>
Message-ID: <k2i971536df1004090455xe17e401cra2823329027cfb21@mail.gmail.com>

The function seems to be working properly.  You are asking for a day
of the month which does not exist. I assume this was written a very
long time ago since there are easier ways to do this now.  yearmon
class gives an object representing the year and month of a date and if
ym is such an object then as.Date(ym) gives the first of the month and
as.Date(ym, frac = 1) gives the last of the month so:

# nth day of month or last day of month if less
nth.of.month <- function(date, n) {
	ym <- as.yearmon(date)
	pmin(as.Date(ym) + n - 1, as.Date(ym, frac = 1))
}

ag <- aggregate(DJd, nth.of.month(time(DJd), 31), tail, 1)



On Fri, Apr 9, 2010 at 7:01 AM, Research <risk2009 at ath.forthnet.gr> wrote:
> Dear all,
>
> Some time ago I received some very kind ?help (special thanks to Gabor) to
> construct a function that isolates the n'th ? working day of each month for
> zoo object (time series) to create monthly data from daily observations.
>
> I found out that the code works fine except for the 29 till 31st dates of
> each month as it skips some months (February for example).
>
> If ?you could help me isolate the problem I would be grateful as I can not
> find a way to explain to R to keep the last ?working day of month if I
> choose the 29th, 30th or 31st dates...
>
> I enclose ?a working version of the function and a script for demo purposes.
>
> Many thanks in advance,
> Costas
>
> library(fImport)
> library(zoo)
> DJ<-yahooSeries("^DJI", frequency="daily", nDaysBack=10000)
> DJd<-as.zoo(DJ[,4])
>
> ### Choose number of day for month
>
> chooseday<-function(z, day)
>
> ? ?{
>
> ? ?# z.na is same as z but with missing days added using NAs
> ? ?# Its formed by merging z with a zoo-width series containing all days.
>
> ? ?rng <- range(time(z))
> ? ?z.na <- merge(z, zoo(, seq(rng[1], rng[2], by = "day")))
>
> ? ?# form a series that has NAs wherever z.na does but has 1, 2, 3, ...
> ? ?# instead of z.na's data values and then use na.locf to fill in NAs
>
> ? ?idx <- na.locf(seq_along(z.na) + (0 * z.na))
>
> ? ?# pick off elements of z.na corresponding to i'th of month
>
> ? ?noofday <- paste(day)
>
> ? ?if (day<10) noofday<-paste("0",day, sep="")
>
> ? ?tempdata<-z.na[idx[format(time(z.na), "%d") == noofday]]
>
> ? ?return(tempdata)
>
> ? ?}
>
> length(chooseday(DJd,1))
> length(chooseday(DJd,2))
> length(chooseday(DJd,31))
> length(chooseday(DJd,30))
> length(chooseday(DJd,29))
> length(chooseday(DJd,28))
> tail(chooseday(DJd,31))
>
>
>
>
>
>
>


From Samuel.Meichtry at bkw-fmb.ch  Fri Apr  9 14:01:10 2010
From: Samuel.Meichtry at bkw-fmb.ch (Samuel.Meichtry at bkw-fmb.ch)
Date: Fri, 9 Apr 2010 14:01:10 +0200
Subject: [R-SIG-Finance] RBloomberg blpConnect() not responding
In-Reply-To: <v2na7d6d2741004090228xeb19983ez3b1d14333db278a4@mail.gmail.com>
References: <201004090732.o397Wr9R020512@hypatia.math.ethz.ch>
	<o2pa7d6d2741004090053je3c18e83hc5bee465448c6c21@mail.gmail.com>
	<201004090859.o398xdmx010930@hypatia.math.ethz.ch>
	<v2na7d6d2741004090228xeb19983ez3b1d14333db278a4@mail.gmail.com>
Message-ID: <201004091201.o39C1InS020164@hypatia.math.ethz.ch>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100409/dddbc7ef/attachment.pl>

From csun at CFR.MsState.Edu  Fri Apr  9 22:00:07 2010
From: csun at CFR.MsState.Edu (Changyou Sun)
Date: Fri, 9 Apr 2010 15:00:07 -0500
Subject: [R-SIG-Finance] GARCH estimation with exogenous variables in the
	mean equation
Message-ID: <9E8CBEC169F6C94D8FFD9E97AC051998010ED702@mail.cfr.msstate.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100409/1012e2a6/attachment.pl>

From alexios at 4dscape.com  Fri Apr  9 22:35:49 2010
From: alexios at 4dscape.com (alexios)
Date: Fri, 09 Apr 2010 21:35:49 +0100
Subject: [R-SIG-Finance] GARCH estimation with exogenous variables in
 the	mean equation
In-Reply-To: <9E8CBEC169F6C94D8FFD9E97AC051998010ED702@mail.cfr.msstate.edu>
References: <9E8CBEC169F6C94D8FFD9E97AC051998010ED702@mail.cfr.msstate.edu>
Message-ID: <4BBF8FA5.7030601@4dscape.com>

You might like to try the rgarch package on R-Forge. It allows exogenous 
variables in both the mean and variance equations.

Regards,

Alexios Ghalanos

On 4/9/2010 9:00 PM, Changyou Sun wrote:
> Hello,
>
> I need to estimate a GARCH model with exogenous variables in the mean
> equation. Currently, to my understanding, the garch function in tseries
> package can handle univariate model, and garchFit in
> fGarch can handle ARMA specification.
>
> I wonder if there is any R function that can handle exogenous variables
> in estimating GARCH.
>
> Thank you a lot.
>
>
> Edwin
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>


From konradhoppe at hotmail.de  Fri Apr  9 23:37:18 2010
From: konradhoppe at hotmail.de (Konrad Hoppe)
Date: Fri, 9 Apr 2010 23:37:18 +0200
Subject: [R-SIG-Finance] p-values of garch models
In-Reply-To: <1270757974177-1788231.post@n4.nabble.com>
Message-ID: <SNT114-DS17C78C759074A61F5D0B5DD0150@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100409/ea0889e3/attachment.pl>

From rajat at igidr.ac.in  Sat Apr 10 12:10:45 2010
From: rajat at igidr.ac.in (Rajat Tayal)
Date: Sat, 10 Apr 2010 15:40:45 +0530 (IST)
Subject: [R-SIG-Finance] Two x and two y vectors in one X_Y coordinate
	system graph
Message-ID: <7748668.1270894245610.JavaMail.root@127.0.0.1>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100410/16ded61e/attachment.pl>

From rajat at igidr.ac.in  Sat Apr 10 14:48:20 2010
From: rajat at igidr.ac.in (Rajat Tayal)
Date: Sat, 10 Apr 2010 18:18:20 +0530 (IST)
Subject: [R-SIG-Finance] Two x and two y vectors in one X-Y coordinate
	system graph
Message-ID: <11554806.1270903700120.JavaMail.root@127.0.0.1>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100410/f72928d3/attachment.pl>

From cedrick at cedrickjohnson.com  Sat Apr 10 15:10:32 2010
From: cedrick at cedrickjohnson.com (Cedrick W. Johnson)
Date: Sat, 10 Apr 2010 13:10:32 +0000
Subject: [R-SIG-Finance] Two x and two y vectors in one X-Y
	coordinatesystem graph
In-Reply-To: <11554806.1270903700120.JavaMail.root@127.0.0.1>
References: <11554806.1270903700120.JavaMail.root@127.0.0.1>
Message-ID: <300635672-1270905033-cardhu_decombobulator_blackberry.rim.net-1690799485-@bda147.bisx.prod.on.blackberry>

I would ask this on the r-help list...

-c
Sent from my BlackBerry?

-----Original Message-----
From: Rajat Tayal  <rajat at igidr.ac.in>
Date: Sat, 10 Apr 2010 18:18:20 
To: <r-sig-finance at stat.math.ethz.ch>
Subject: [R-SIG-Finance] Two x and two y vectors in one X-Y coordinate
	system graph


Hi all,
I have two line graphs drawn with two different pairs of x and y vectors.
The sample dataset is given below. Here, I have two X vectors assuming positive values. 
Only one of the y vectors assumes positive values, while the other y vector assumes negative values.


    
        
            

            
                
                
                    
                        
X1
                        
Y1
                        
X2
                        
Y2
                    
                    
                        
35
                        
0.000534
                        
265
                        
-0.000534
                    
                    
                        
47
                        
0.000639
                        
281
                        
-0.000570
                    
                    
                        
65
                        
0.000744
                        
282
                        
-0.000572
                    
                    
                        
865
                        
0.001312
                        
283
                        
-0.000575
                    
                    
                        
1265
                        
0.001342
                        
284
                        
-0.000579
                    
                    
                        
1315
                        
0.001346
                        
285
                        
-0.000584
                    
                    
                        
1325
                        
0.001347
                        
885
                        
-0.001635
                    
                    
                        
1472
                        
0.001362
                        
886
                        
-0.001636
                    
                    
                        
1477
                        
0.001364
                        
887
                        
-0.001637
                    
                    
                        
1536
                        
0.001386
                        
888
                        
-0.001638
                    
                    
                        
1541
                        
0.001388
                        
889
                        
-0.001640
                    
                    
                        
2492
                        
0.001617
                        
890
                        
-0.001641
                    
                    
                        
2506
                        
0.001622
                        
920
                        
-0.001688
                    
                    
                        
2516
                        
0.001626
                        
970
                        
-0.001761
                    
                
            
            
I am able to plot them as separate graphs using :
pdf("plot.pdf", height=9, width=6)
par(mfrow=c(1,2))
plot(y=y1, x=x1, lwd=2, col="blue", type="l")
plot(y=y2, x=x2, lwd=2, col="red", type="l")
dev.off()
but would like to plot them on one graph in a X-Y coordinate system setup . 
The idea is to somehow flip one of the curves to the third quadrant of the X-Y coordinate space while the other curve is in the first quadrant. 
How do I plot the two graphs in one figure ??? 
Any help would be highly useful.

        
    

Rajat Tayal
Ph.D Economics Candidate
Indira Gandhi Institute of Development Research,
Gen A.K.Vaidya Marg, Filmcity Road,
Santosh Nagar, Goregaon (East),
MUMBAI- 400 065.
02228416285, 09987284080
	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

From cmdr_rogue at hotmail.com  Sat Apr 10 15:14:34 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Sat, 10 Apr 2010 09:14:34 -0400
Subject: [R-SIG-Finance] Two x and two y vectors in one X-Y coordinate
 system graph
In-Reply-To: <11554806.1270903700120.JavaMail.root@127.0.0.1>
References: <11554806.1270903700120.JavaMail.root@127.0.0.1>
Message-ID: <BLU0-SMTP48EE423D0B52EA28825F30E2140@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100410/5e4130a3/attachment.pl>

From cmdr_rogue at hotmail.com  Sat Apr 10 15:15:09 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Sat, 10 Apr 2010 09:15:09 -0400
Subject: [R-SIG-Finance] Two x and two y vectors in one X_Y coordinate
 system graph
In-Reply-To: <7748668.1270894245610.JavaMail.root@127.0.0.1>
References: <7748668.1270894245610.JavaMail.root@127.0.0.1>
Message-ID: <BLU0-SMTP505EF4331A0376C616BA13E2140@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100410/efbd2278/attachment.pl>

From cmdr_rogue at hotmail.com  Sat Apr 10 15:15:59 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Sat, 10 Apr 2010 09:15:59 -0400
Subject: [R-SIG-Finance] p-values of garch models
In-Reply-To: <SNT114-DS17C78C759074A61F5D0B5DD0150@phx.gbl>
References: <SNT114-DS17C78C759074A61F5D0B5DD0150@phx.gbl>
Message-ID: <BLU0-SMTP33CBAC5143AFA720DABF2EE2140@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100410/f1d3d873/attachment.pl>

From dengyishuo at 163.com  Sun Apr 11 13:36:59 2010
From: dengyishuo at 163.com (=?UTF-8?B?6YKT5LiA56GV?=)
Date: Sun, 11 Apr 2010 03:36:59 -0800 (PST)
Subject: [R-SIG-Finance] How to fit BEKK model with R?
Message-ID: <1270985819445-1835987.post@n4.nabble.com>



Hi,all.
I want to know how to fit BEKK model with R?
Thanks!

-----
?????????????????
-- 
View this message in context: http://n4.nabble.com/How-to-fit-BEKK-model-with-R-tp1835987p1835987.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Sun Apr 11 15:38:17 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 11 Apr 2010 08:38:17 -0500
Subject: [R-SIG-Finance] How to fit BEKK model with R?
In-Reply-To: <1270985819445-1835987.post@n4.nabble.com>
References: <1270985819445-1835987.post@n4.nabble.com>
Message-ID: <4BC1D0C9.5010707@braverock.com>

??? wrote:
> 
> Hi,all.
> I want to know how to fit BEKK model with R?
> Thanks!

I think you'll need to be more exact than this.

BEKK models have been discussed in this list in the past, so there will be some 
information in the list archives.

- What have you tried?

- How do the available list archives, packages, and examples not work for you?

- Where is the description of what you are trying to accomplish (in more than 
11 words) and the accompanying code.

We can't help you until you give someone on this list enough information to be 
either:
1> easy to give you an answer, or
2> interesting enough to put some actual effort into solving your problem.

Regards,

    - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From dengyishuo at 163.com  Sun Apr 11 17:11:35 2010
From: dengyishuo at 163.com (=?UTF-8?B?6YKT5LiA56GV?=)
Date: Sun, 11 Apr 2010 07:11:35 -0800 (PST)
Subject: [R-SIG-Finance] How to fit BEKK model with R?
In-Reply-To: <4BC1D0C9.5010707@braverock.com>
References: <1270985819445-1835987.post@n4.nabble.com>
	<4BC1D0C9.5010707@braverock.com>
Message-ID: <1270998695713-1836137.post@n4.nabble.com>



Sorry for ask this question again.

I have find the answer.Thank you for your attention!


-----
?????????????????
-- 
View this message in context: http://n4.nabble.com/How-to-fit-BEKK-model-with-R-tp1835987p1836137.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jeff.a.ryan at gmail.com  Mon Apr 12 16:23:25 2010
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Mon, 12 Apr 2010 09:23:25 -0500
Subject: [R-SIG-Finance] R/Finance 2010 April 16th and 17th 2010 THIS WEEK
	in Chicago!
Message-ID: <h2se8e755251004120723ge2686472t9f7d518983f99a4d@mail.gmail.com>

It's not too late to register!  Come be part of R/Finance 2010:

http://www.RinFinance.com/register



R/Finance?2010: Applied?Finance?with?R
April 16 & 17, Chicago, IL, US
http://www.RinFinance.com

The second annual?R/Finance?conference for applied?finance?using?R,
the premier free software system for statistical computation and
graphics, will be held this spring in Chicago, IL, USA on Friday April
16 and Saturday April 17,?2010.

Registration is still open and early bird pricing ends April 1,?2010.
Given the current registration, we anticipate that many tutorial spots
will be gone before that date. ?Register at?http://www.RinFinance.com
to secure a tutorial spot and avoid a price increase.

The conference includes keynote and regular presentations as well as
short lightning talks to present a diverse range of ideas. ?The
planned list of tutorials and conference presentations

(also available at?http://www.RinFinance.com):

Friday, April 16th,?2010
------
Tutorials:
?Dirk Eddelbuettel: Rcpp/RInside
?Jeff Ryan Trading with?R
?Peter Carl/Brian Peterson: Complex Portfolio Optimization with
General Business Objectives
?Josh Buckner/Mark Seligman: GPU Programming with?R

*Achim Zeileis: Testing, Monitoring and Dating Structural Change in FX Regimes
David Smith: Analysing Large-Scale Financial Data Sets in?R
Tony Plate: Mean-variance Portfolio Optimization: Do Historical
Correlations Help or Hinder Risk Control in a Crisis?
*Ralph Vince/Soren MacBeth: Leverage Space Portfolio Model
Kris Boudt: Portfolio Optimization with Conditional Value-at-Risk Budgets
Steve Kane/Jeff Lewis: The esperr package and the Esper API
Lightning talks:
?Peter Carl: The blotter / instrument / strategy toolchain
?Wei-han Liu: Improved Generalized Gram-Charlier Expansions based on
Multivariate Skew Distributions
?Wendy Wang: Strategic Asset Allocation using Markov Switching
?James "JD" Long: Zen and the Art of Stochastic Dart Throwing (How I
Build Insurance / Reinsurance Models with?R)

Saturday, April 17th,?2010
------
Josh Buckner/Mark Seligman: GPU computing with the gputools package
Saptarshi Guha:?R?and Hadoop Integrated Processing Environment
Stefan Theussl: Distributed Text Mining with tm
*Bernhard Pfaff: Risk Modeling with?R
Lightning talks:
?Jonathan Cornelissen: RTAQ: Tools for Analysis of Trades and Quotes
?Robert Grossman: Computing in the Cloud
?Nicolas Christou/David Diez: Statistical?Finance?for Investors
Unfamiliar with Quantitative Methods
Maria Belianina: Data Management Challenges for Quantitative Research
*Marc Wildi: Adapting the MDFA to 'Financial Trading'
Eric Zivot: Simulation-based Estimation of Continuous Time Models
Dirk Eddelbuettel/Khanh Nguyen: RQuantLib: Interfacing QuantLib from?R
Lightning talks:
?Jeff Ryan: Databasing without the Database: The indexing package
?Josh Ulrich: Fast and Flexible Technical Analysis with TTR
?Ruud Koning: Thick Tails, Thin Tails, or Dependence?
?Michael North:?R?and Repast Simphony


If you are in Chicago, or can get to Chicago, there is still time to
register!  Come join 200+
finance and software professionals to discuss R and quantitative
finance this weekend!

R/Finance?2010?is organized by a local group of?R?package authors and
community contributors, hosted by the International Center for Futures
and Derivatives (ICFD) at the University of Illinois at Chicago and
made possible via sponsorship support from ICFD, REvolution Computing,
OneMarketData and Insight Algorithmics.

For the program committee:
Gib Bassett, Peter Carl, Dirk Eddelbuettel, John Miller, Brian
Peterson, Dale Rosenthal, Jeffrey Ryan


From ron_michael70 at yahoo.com  Mon Apr 12 17:03:04 2010
From: ron_michael70 at yahoo.com (Ron_M)
Date: Mon, 12 Apr 2010 07:03:04 -0800 (PST)
Subject: [R-SIG-Finance] Where to get historical quotes for LIBOR quotes
 (other than Economagic)
Message-ID: <1271084584146-1837255.post@n4.nabble.com>


Dear all, I am looking for the historical LIBOR on GBP deposit for different
tenors ranging from over-night to 1 year. I have looked into Economagic but
it seems they dont have updated series. If not possible to fetch historical
quotes, for the time now it would be great if I can get quote for 1st march,
this year.

I know this is not the right forum to post this type of query, however I
believe folks here some clue where to get them. Any help will be highly
appreciated.

Thanks,
-- 
View this message in context: http://n4.nabble.com/Where-to-get-historical-quotes-for-LIBOR-quotes-other-than-Economagic-tp1837255p1837255.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From robert at sanctumfi.com  Mon Apr 12 17:52:40 2010
From: robert at sanctumfi.com (Robert Sams)
Date: Mon, 12 Apr 2010 16:52:40 +0100
Subject: [R-SIG-Finance] Where to get historical quotes for LIBOR quotes
	(other than Economagic)
References: <1271084584146-1837255.post@n4.nabble.com>
Message-ID: <3ABD97F82224D64A81DB6860B40E506C8B8BB4@blommbergmds>

Try http://www.bbalibor.com/ and, you're right, this is not the correct
forum. 

Robert


-----Original Message-----
From: r-sig-finance-bounces at stat.math.ethz.ch
[mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of Ron_M
Sent: 12 April 2010 16:03
To: r-sig-finance at stat.math.ethz.ch
Subject: [R-SIG-Finance] Where to get historical quotes for LIBOR quotes
(other than Economagic)


Dear all, I am looking for the historical LIBOR on GBP deposit for
different
tenors ranging from over-night to 1 year. I have looked into Economagic
but
it seems they dont have updated series. If not possible to fetch
historical
quotes, for the time now it would be great if I can get quote for 1st
march,
this year.

I know this is not the right forum to post this type of query, however I
believe folks here some clue where to get them. Any help will be highly
appreciated.

Thanks,
-- 
View this message in context:
http://n4.nabble.com/Where-to-get-historical-quotes-for-LIBOR-quotes-oth
er-than-Economagic-tp1837255p1837255.html
Sent from the Rmetrics mailing list archive at Nabble.com.

_______________________________________________
R-SIG-Finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.


From konradhoppe at hotmail.de  Mon Apr 12 22:38:04 2010
From: konradhoppe at hotmail.de (Konrad Hoppe)
Date: Mon, 12 Apr 2010 22:38:04 +0200
Subject: [R-SIG-Finance] p-values of garch models
In-Reply-To: <BLU0-SMTP33CBAC5143AFA720DABF2EE2140@phx.gbl>
Message-ID: <SNT114-DS13137FB4DA089FF27D3311D0120@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100412/f2900c5f/attachment.pl>

From brian at braverock.com  Mon Apr 12 22:55:20 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 12 Apr 2010 15:55:20 -0500
Subject: [R-SIG-Finance] p-values of garch models
In-Reply-To: <SNT114-DS13137FB4DA089FF27D3311D0120@phx.gbl>
References: <SNT114-DS13137FB4DA089FF27D3311D0120@phx.gbl>
Message-ID: <4BC388B8.5090808@braverock.com>

On 04/12/2010 03:38 PM, Konrad Hoppe wrote:
> Hi,
>
> the Ljung Box statistic is valid for differrent models in my case and I want
> to distinguish automatically between those different models. My problem is,
> that it turns out, that there is more than one model with valid box
> statistic, but only one has a residual series which looks like white noise,
> and this model has only significant parameters, while the others have some
> non-significant params. Hence I need to get these p-values from the model
> and I think that there must be possibility since the p-values are
> calculated, but I'm just unable to get them...
> Any ideas to solve that problem?
>    

Konrad,

Please provide a reproducible code example.

Use one of the example data sets for whatever GARCH package you are 
using, and tell us what package that is, and comment your example so we 
can tell what you're doing.

You haven't given us enough information to say where you'll find the 
p-values, since among other things you haven't even told us which of the 
many GARCH functions within R you're using.

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From konradhoppe at hotmail.de  Tue Apr 13 09:15:42 2010
From: konradhoppe at hotmail.de (Konrad Hoppe)
Date: Tue, 13 Apr 2010 09:15:42 +0200
Subject: [R-SIG-Finance] p-values of garch models
In-Reply-To: <4BC388B8.5090808@braverock.com>
References: <SNT114-DS13137FB4DA089FF27D3311D0120@phx.gbl>,
	<4BC388B8.5090808@braverock.com>
Message-ID: <SNT114-W37FD0F55D039B2044BA6C5D0110@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100413/f74109a9/attachment.pl>

From matthieu.stigler at gmail.com  Tue Apr 13 09:23:22 2010
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Tue, 13 Apr 2010 09:23:22 +0200
Subject: [R-SIG-Finance] p-values of garch models
In-Reply-To: <SNT114-W37FD0F55D039B2044BA6C5D0110@phx.gbl>
References: <SNT114-DS13137FB4DA089FF27D3311D0120@phx.gbl>,
	<4BC388B8.5090808@braverock.com>
	<SNT114-W37FD0F55D039B2044BA6C5D0110@phx.gbl>
Message-ID: <4BC41BEA.6030301@gmail.com>



#see the structure:
str(summary(garch.fit))
#this is what you want, right?
summary(garch.fit)$coef[,4]

Konrad Hoppe a ?crit :
> okay, I see the problem...I'm absolutely new to garch modelling and hence I didn't know that there are some many different functions. I've just thought that one of you already now my problem and there is a simple solution, anyway.
> Now I've produced a code example:
>
> #########################
> install.packages("tseries")
> library(tseries)
>
> data <- vector(length=1000)
> data[1] <- 0
> set.seed(123)
>
> for(i in 2:1000){
>     data[i] <- 0.5*data[i-1] + rnorm(1)
> }
>
> garch.fit <- garch(data,order=c(1,1), trace=F)
> summary(garch.fit)
> ########################
>
> maybe you know another garch function where it's easier to get the p-values..
> hope you can help me
>
> all the best,
> konrad
>
>
>   
>> Date: Mon, 12 Apr 2010 15:55:20 -0500
>> From: brian at braverock.com
>> To: konradhoppe at hotmail.de
>> CC: r-sig-finance at stat.math.ethz.ch
>> Subject: Re: [R-SIG-Finance] p-values of garch models
>>
>> On 04/12/2010 03:38 PM, Konrad Hoppe wrote:
>>     
>>> Hi,
>>>
>>> the Ljung Box statistic is valid for differrent models in my case and I want
>>> to distinguish automatically between those different models. My problem is,
>>> that it turns out, that there is more than one model with valid box
>>> statistic, but only one has a residual series which looks like white noise,
>>> and this model has only significant parameters, while the others have some
>>> non-significant params. Hence I need to get these p-values from the model
>>> and I think that there must be possibility since the p-values are
>>> calculated, but I'm just unable to get them...
>>> Any ideas to solve that problem?
>>>    
>>>       
>> Konrad,
>>
>> Please provide a reproducible code example.
>>
>> Use one of the example data sets for whatever GARCH package you are 
>> using, and tell us what package that is, and comment your example so we 
>> can tell what you're doing.
>>
>> You haven't given us enough information to say where you'll find the 
>> p-values, since among other things you haven't even told us which of the 
>> many GARCH functions within R you're using.
>>
>>    - Brian
>>
>> -- 
>> Brian G. Peterson
>> http://braverock.com/brian/
>> Ph: 773-459-4973
>> IM: bgpbraverock
>>
>>
>>     
>  		 	   		  
> _________________________________________________________________
>
> [[elided Hotmail spam]]
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From sergeyg at gmail.com  Tue Apr 13 09:30:48 2010
From: sergeyg at gmail.com (Sergey Goriatchev)
Date: Tue, 13 Apr 2010 09:30:48 +0200
Subject: [R-SIG-Finance] sudden problem with RBloomberg
Message-ID: <s2h7cb007bd1004130030zecfda4a4rf9927dd771722b44@mail.gmail.com>

Hello everyone

I run R 2.10 (also, R 2.7.2) with RBloomberg 0.1-10
I cannot run new java-based RBloomberg due to local restrictions.

This morning I get a sudden problem with RBloomberg:

------------------------
> conn <- blpConnect(show.days="week", na.action="previous.days", periodicity="daily")

> bldata <- blpGetData(conn, signal.tickers, "PX_LAST", start=start.date, end=end.date, retval="zoo")

> conn <- blpConnect(show.days="trading", na.action="previous.days", periodicity="daily")

> ty1.csize <- blpGetData(conn,  "TY1 Comdty", "FUT_CONT_SIZE", retval="raw")[[1]][[1]] #USD

Error: Exception occurred.

> gc1.cvalue <- blpGetData(conn, "GC1 Comdty", "CONTRACT_VALUE", start=as.chron(Sys.Date()-5), end=as.chron(Sys.Date()), retval="zoo")

Warning message:
In as.matrix.BlpCOMReturn(x) : NAs introduced by coercion

> gi1.cvalue <- blpGetData(conn, "GI1 Index",  "CONTRACT_VALUE", start=as.chron(Sys.Date()-5), end=as.chron(Sys.Date()), retval="zoo")

Warning message:
In as.matrix.BlpCOMReturn(x) : NAs introduced by coercion

> es1.cvalue <- blpGetData(conn, "ES1 Index",  "CONTRACT_VALUE", start=as.chron(Sys.Date()-5), end=as.chron(Sys.Date()), retval="zoo")
Warning message:
In as.matrix.BlpCOMReturn(x) : NAs introduced by coercion

> blpDisconnect(conn)
---------------------------

I don't know what is going on, in particular the first "Error:
Exception occured" is new to me. I tried restart R, different versions
of R, feeding line by line, nothing helps.

Anyone has an inkling what the problem is caused by?

Best,
Sergey

-- 
Simplicity is the last step of art./Bruce Lee


From patrick at burns-stat.com  Tue Apr 13 09:55:51 2010
From: patrick at burns-stat.com (Patrick Burns)
Date: Tue, 13 Apr 2010 08:55:51 +0100
Subject: [R-SIG-Finance] p-values of garch models
In-Reply-To: <SNT114-DS13137FB4DA089FF27D3311D0120@phx.gbl>
References: <SNT114-DS13137FB4DA089FF27D3311D0120@phx.gbl>
Message-ID: <4BC42387.9080300@burns-stat.com>

George Box said:

All models are wrong,
some models are useful.

In particular all garch models are
wrong since markets change over time.
The best you can hope for is a model
that is adequate for your needs.

Looking at p-values won't necessarily
tell you the adequacy of the model for
your application.

Pat


On 12/04/2010 21:38, Konrad Hoppe wrote:
> Hi,
>
> the Ljung Box statistic is valid for differrent models in my case and I want
> to distinguish automatically between those different models. My problem is,
> that it turns out, that there is more than one model with valid box
> statistic, but only one has a residual series which looks like white noise,
> and this model has only significant parameters, while the others have some
> non-significant params. Hence I need to get these p-values from the model
> and I think that there must be possibility since the p-values are
> calculated, but I'm just unable to get them...
> Any ideas to solve that problem?
>
> Konrad Hoppe
>
> -----Urspr?ngliche Nachricht-----
> Von: r-sig-finance-bounces at stat.math.ethz.ch
> [mailto:r-sig-finance-bounces at stat.math.ethz.ch] Im Auftrag von Sarbo
> Gesendet: Samstag, 10. April 2010 15:16
> An: r-sig-finance at stat.math.ethz.ch
> Betreff: Re: [R-SIG-Finance] p-values of garch models
>
> What about the Ljung-Box statistics from the GARCH estimation? Wouldn't
> that provide the p-values you're looking for?
>
> On Fri, 2010-04-09 at 23:37 +0200, Konrad Hoppe wrote:
>
>> Hi list,
>>
>> I'm actually trying to model some financial data with use of garch models
>> besides other stuff. But now I'm wondering how to extract the p-values
> from
>> the garch output. I'm just unable to get them. Do I have to calculate them
>> by my own or are there any other possibilities? Of course, I've already
>> checked the help function, but there aren't any advises.
>> Hope you can help me.
>>
>> Thanks in advance,
>> Konrad Hoppe
>> http://www.konrad-hoppe.com/
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
> should go.
>>
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
>
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
> 	[[alternative HTML version deleted]]
>
>
>
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com


From konradhoppe at hotmail.de  Tue Apr 13 10:29:35 2010
From: konradhoppe at hotmail.de (Konrad Hoppe)
Date: Tue, 13 Apr 2010 10:29:35 +0200
Subject: [R-SIG-Finance] p-values of garch models
In-Reply-To: <4BC41BEA.6030301@gmail.com>
References: <SNT114-DS13137FB4DA089FF27D3311D0120@phx.gbl>,
	<4BC388B8.5090808@braverock.com>
	<SNT114-W37FD0F55D039B2044BA6C5D0110@phx.gbl>,
	<4BC41BEA.6030301@gmail.com>
Message-ID: <SNT114-W10074CAE96E24753E6AFF9D0110@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100413/c1e4d9be/attachment.pl>

From nelson.ana at gmail.com  Tue Apr 13 10:44:55 2010
From: nelson.ana at gmail.com (Ana Nelson)
Date: Tue, 13 Apr 2010 09:44:55 +0100
Subject: [R-SIG-Finance] sudden problem with RBloomberg
In-Reply-To: <s2h7cb007bd1004130030zecfda4a4rf9927dd771722b44@mail.gmail.com>
References: <s2h7cb007bd1004130030zecfda4a4rf9927dd771722b44@mail.gmail.com>
Message-ID: <x2wa7d6d2741004130144x4cf7520dt13278cca0e90fe19@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100413/8621b000/attachment.pl>

From sergeyg at gmail.com  Tue Apr 13 11:21:47 2010
From: sergeyg at gmail.com (Sergey Goriatchev)
Date: Tue, 13 Apr 2010 11:21:47 +0200
Subject: [R-SIG-Finance] sudden problem with RBloomberg
In-Reply-To: <x2wa7d6d2741004130144x4cf7520dt13278cca0e90fe19@mail.gmail.com>
References: <s2h7cb007bd1004130030zecfda4a4rf9927dd771722b44@mail.gmail.com>
	<x2wa7d6d2741004130144x4cf7520dt13278cca0e90fe19@mail.gmail.com>
Message-ID: <o2q7cb007bd1004130221v3ef091a5qde4008e609ff7df3@mail.gmail.com>

Hi, Ana

Thank you for your help.
1) I have same RDCOMClient installed on 2.10 and on 2.7.2, the one
that is available on RDCOMClient web page (don't remember version
number and do not know how to find it out in R)
2) I cannot install this version of RBloomberg where I am at, due to
IT restrictions. I need to do it at home and then transport the whole
thing here (do not ask why). And I cannot install any Java.
3) The code has been running fine before. Surely, there were glitches
from time to time, especially when there were calls for a lot of data,
but on rerun the code eventually worked. Until today.
Today I get this exception no matter what I do, I restarted PC, I
restarted R, I ran different versions of R, I ran code line by line
(once it worked, but then it started throwing off errors again). That
is really strange.
4) With contract sizes I can simply set values by hand, without calls
to Bloomberg, but I wanted it all connected to Bloomberg.
5) I cannot live without zoo objects. There is a lot of code and it
all is written around zoo objects.

I will try manually some more and see if I can find some acceptable
solution, but the code worked fine till today...

Kind Regards,
Sergey

On Tue, Apr 13, 2010 at 10:44, Ana Nelson <nelson.ana at gmail.com> wrote:
> Do you somehow have RDCOMClient installed on R 2.10? Or are you running this
> on R 2.7.2?
>
> Can you try installing this version of RBloomberg:
> install.packages("RBloomberg", repos="http://R-Forge.R-project.org")
>
> Have you been able to run this code before, and it just suddenly stopped
> working this morning?
>
> You might try an explicit blpDisconnect before you connect a second time,
> and look for error messages in the log files in C:\blp\api.
>
> Also, try running a version of this script which just calls blpGetData with
> retval="raw" and without doing anything with the result. You are doing other
> things as well as talking to RBloomberg in this code, for example your
> subsetting might be causing the exception, and asking for a zoo might be
> part of the problem further below.
>
>
> On Tue, Apr 13, 2010 at 8:30 AM, Sergey Goriatchev <sergeyg at gmail.com>
> wrote:
>>
>> Hello everyone
>>
>> I run R 2.10 (also, R 2.7.2) with RBloomberg 0.1-10
>> I cannot run new java-based RBloomberg due to local restrictions.
>>
>> This morning I get a sudden problem with RBloomberg:
>>
>> ------------------------
>> > conn <- blpConnect(show.days="week", na.action="previous.days",
>> > periodicity="daily")
>>
>> > bldata <- blpGetData(conn, signal.tickers, "PX_LAST", start=start.date,
>> > end=end.date, retval="zoo")
>>
>> > conn <- blpConnect(show.days="trading", na.action="previous.days",
>> > periodicity="daily")
>>
>> > ty1.csize <- blpGetData(conn, ?"TY1 Comdty", "FUT_CONT_SIZE",
>> > retval="raw")[[1]][[1]] #USD
>>
>> Error: Exception occurred.
>>
>> > gc1.cvalue <- blpGetData(conn, "GC1 Comdty", "CONTRACT_VALUE",
>> > start=as.chron(Sys.Date()-5), end=as.chron(Sys.Date()), retval="zoo")
>>
>> Warning message:
>> In as.matrix.BlpCOMReturn(x) : NAs introduced by coercion
>>
>> > gi1.cvalue <- blpGetData(conn, "GI1 Index", ?"CONTRACT_VALUE",
>> > start=as.chron(Sys.Date()-5), end=as.chron(Sys.Date()), retval="zoo")
>>
>> Warning message:
>> In as.matrix.BlpCOMReturn(x) : NAs introduced by coercion
>>
>> > es1.cvalue <- blpGetData(conn, "ES1 Index", ?"CONTRACT_VALUE",
>> > start=as.chron(Sys.Date()-5), end=as.chron(Sys.Date()), retval="zoo")
>> Warning message:
>> In as.matrix.BlpCOMReturn(x) : NAs introduced by coercion
>>
>> > blpDisconnect(conn)
>> ---------------------------
>>
>> I don't know what is going on, in particular the first "Error:
>> Exception occured" is new to me. I tried restart R, different versions
>> of R, feeding line by line, nothing helps.
>>
>> Anyone has an inkling what the problem is caused by?
>>
>> Best,
>> Sergey
>>
>> --
>> Simplicity is the last step of art./Bruce Lee
>>
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>
>



-- 
Simplicity is the last step of art./Bruce Lee
The more you know, the more you know you don't know. /Myself

I'm not young enough to know everything. /Oscar Wilde
Experience is one thing you can't get for nothing. /Oscar Wilde
When you are finished changing, you're finished. /Benjamin Franklin
Luck is where preparation meets opportunity. /George Patten

Kniven sk?rpes bara mot stenen.


From sergeyg at gmail.com  Tue Apr 13 11:26:14 2010
From: sergeyg at gmail.com (Sergey Goriatchev)
Date: Tue, 13 Apr 2010 11:26:14 +0200
Subject: [R-SIG-Finance] sudden problem with RBloomberg
In-Reply-To: <x2wa7d6d2741004130144x4cf7520dt13278cca0e90fe19@mail.gmail.com>
References: <s2h7cb007bd1004130030zecfda4a4rf9927dd771722b44@mail.gmail.com>
	<x2wa7d6d2741004130144x4cf7520dt13278cca0e90fe19@mail.gmail.com>
Message-ID: <j2o7cb007bd1004130226u446ad6fbi18773769c0ad0aba@mail.gmail.com>

I wanted also to add that the errors come up in the beginning of a
long script, it is second call to Bloomberg.
After this call there are numerous other calls where more data and
more diverse data is called from Bloomberg, including contract sizes.
These calls perform without errors.
Ain't that funny?

Best,
Sergey

On Tue, Apr 13, 2010 at 10:44, Ana Nelson <nelson.ana at gmail.com> wrote:
> Do you somehow have RDCOMClient installed on R 2.10? Or are you running this
> on R 2.7.2?
>
> Can you try installing this version of RBloomberg:
> install.packages("RBloomberg", repos="http://R-Forge.R-project.org")
>
> Have you been able to run this code before, and it just suddenly stopped
> working this morning?
>
> You might try an explicit blpDisconnect before you connect a second time,
> and look for error messages in the log files in C:\blp\api.
>
> Also, try running a version of this script which just calls blpGetData with
> retval="raw" and without doing anything with the result. You are doing other
> things as well as talking to RBloomberg in this code, for example your
> subsetting might be causing the exception, and asking for a zoo might be
> part of the problem further below.
>
>
> On Tue, Apr 13, 2010 at 8:30 AM, Sergey Goriatchev <sergeyg at gmail.com>
> wrote:
>>
>> Hello everyone
>>
>> I run R 2.10 (also, R 2.7.2) with RBloomberg 0.1-10
>> I cannot run new java-based RBloomberg due to local restrictions.
>>
>> This morning I get a sudden problem with RBloomberg:
>>
>> ------------------------
>> > conn <- blpConnect(show.days="week", na.action="previous.days",
>> > periodicity="daily")
>>
>> > bldata <- blpGetData(conn, signal.tickers, "PX_LAST", start=start.date,
>> > end=end.date, retval="zoo")
>>
>> > conn <- blpConnect(show.days="trading", na.action="previous.days",
>> > periodicity="daily")
>>
>> > ty1.csize <- blpGetData(conn, ?"TY1 Comdty", "FUT_CONT_SIZE",
>> > retval="raw")[[1]][[1]] #USD
>>
>> Error: Exception occurred.
>>
>> > gc1.cvalue <- blpGetData(conn, "GC1 Comdty", "CONTRACT_VALUE",
>> > start=as.chron(Sys.Date()-5), end=as.chron(Sys.Date()), retval="zoo")
>>
>> Warning message:
>> In as.matrix.BlpCOMReturn(x) : NAs introduced by coercion
>>
>> > gi1.cvalue <- blpGetData(conn, "GI1 Index", ?"CONTRACT_VALUE",
>> > start=as.chron(Sys.Date()-5), end=as.chron(Sys.Date()), retval="zoo")
>>
>> Warning message:
>> In as.matrix.BlpCOMReturn(x) : NAs introduced by coercion
>>
>> > es1.cvalue <- blpGetData(conn, "ES1 Index", ?"CONTRACT_VALUE",
>> > start=as.chron(Sys.Date()-5), end=as.chron(Sys.Date()), retval="zoo")
>> Warning message:
>> In as.matrix.BlpCOMReturn(x) : NAs introduced by coercion
>>
>> > blpDisconnect(conn)
>> ---------------------------
>>
>> I don't know what is going on, in particular the first "Error:
>> Exception occured" is new to me. I tried restart R, different versions
>> of R, feeding line by line, nothing helps.
>>
>> Anyone has an inkling what the problem is caused by?
>>
>> Best,
>> Sergey
>>
>> --
>> Simplicity is the last step of art./Bruce Lee
>>
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>
>



-- 
Simplicity is the last step of art./Bruce Lee
The more you know, the more you know you don't know. /Myself

I'm not young enough to know everything. /Oscar Wilde
Experience is one thing you can't get for nothing. /Oscar Wilde
When you are finished changing, you're finished. /Benjamin Franklin
Luck is where preparation meets opportunity. /George Patten

Kniven sk?rpes bara mot stenen.


From sergeyg at gmail.com  Tue Apr 13 11:53:52 2010
From: sergeyg at gmail.com (Sergey Goriatchev)
Date: Tue, 13 Apr 2010 11:53:52 +0200
Subject: [R-SIG-Finance] sudden problem with RBloomberg
In-Reply-To: <x2wa7d6d2741004130144x4cf7520dt13278cca0e90fe19@mail.gmail.com>
References: <s2h7cb007bd1004130030zecfda4a4rf9927dd771722b44@mail.gmail.com>
	<x2wa7d6d2741004130144x4cf7520dt13278cca0e90fe19@mail.gmail.com>
Message-ID: <o2z7cb007bd1004130253v4fbdc454xdf486bb61391b2c0@mail.gmail.com>

#Here are two examples of calls

#The first one is the one that throws errors:

#-------------------------------------------
start.date 	<- as.chron("2006-01-01")
end.date	<- as.chron(Sys.Date())

.tickers <- c("TY1 Comdty", "SP1 Index", "SPGSCIP Index", "GC1 Comdty")

conn <- blpConnect(show.days="week", na.action="previous.days",
periodicity="daily")
bldata <- blpGetData(conn, .tickers, "PX_LAST", start=start.date,
end=end.date, retval="zoo")

conn <- blpConnect(show.days="trading", na.action="previous.days",
periodicity="daily")
ty1.csize <- blpGetData(conn,  "TY1 Comdty", "FUT_CONT_SIZE",
retval="raw")[[1]][[1]] #USD
gc1.cvalue <- blpGetData(conn, "GC1 Comdty", "CONTRACT_VALUE",
start=as.chron(Sys.Date()-5), end=as.chron(Sys.Date()), retval="zoo")
gi1.cvalue <- blpGetData(conn, "GI1 Index",  "CONTRACT_VALUE",
start=as.chron(Sys.Date()-5), end=as.chron(Sys.Date()), retval="zoo")
es1.cvalue <- blpGetData(conn, "ES1 Index",  "CONTRACT_VALUE",
start=as.chron(Sys.Date()-5), end=as.chron(Sys.Date()), retval="zoo")
blpDisconnect(conn)
#------------------------------------------------

#The second one is very much further in the same script file and it works fine:

start.date 	<- as.chron("2008-01-01")
end.date 	<- as.chron( Sys.Date() )

.tickers <- c("TY1 Comdty", "RX1 Comdty", "JB1 Comdty")

conn <- blpConnect(show.days="week", na.action="previous.days",
periodicity="daily")
bond.futures <- blpGetData(conn, .tickers, "PX_LAST",
start=start.date, end=end.date, retval="zoo")

TY1.csize <- blpGetData(conn, "TY1 Comdty", "FUT_CONT_SIZE",
retval="raw")[[1]][[1]] #USD
RX1.csize <- blpGetData(conn, "RX1 Comdty", "FUT_CONT_SIZE",
retval="raw")[[1]][[1]] #EUR
JB1.csize <- blpGetData(conn, "JB1 Comdty", "FUT_CONT_SIZE",
retval="raw")[[1]][[1]] #JPY
blpDisconnect(conn)

#If I run the second one before the first one - the first one runs
without problems.
#If I run the first one before the second one - I have Exception error
and other errors in first, but second runs perfect.


From sergeyg at gmail.com  Tue Apr 13 11:57:39 2010
From: sergeyg at gmail.com (Sergey Goriatchev)
Date: Tue, 13 Apr 2010 11:57:39 +0200
Subject: [R-SIG-Finance] sudden problem with RBloomberg
In-Reply-To: <o2z7cb007bd1004130253v4fbdc454xdf486bb61391b2c0@mail.gmail.com>
References: <s2h7cb007bd1004130030zecfda4a4rf9927dd771722b44@mail.gmail.com>
	<x2wa7d6d2741004130144x4cf7520dt13278cca0e90fe19@mail.gmail.com>
	<o2z7cb007bd1004130253v4fbdc454xdf486bb61391b2c0@mail.gmail.com>
Message-ID: <m2i7cb007bd1004130257p285b868dv1569b4b8b7d76e6b@mail.gmail.com>

#I tried to shuffle the lines to the following:

start.date      <- as.chron("2006-01-01")
end.date        <- as.chron(Sys.Date())

.tickers <- c("TY1 Comdty", "SP1 Index", "SPGSCIP Index", "GC1 Comdty")

conn <- blpConnect(show.days="week", na.action="previous.days",
periodicity="daily")

bldata <- blpGetData(conn, .tickers, "PX_LAST", start=start.date,
end=end.date, retval="zoo")

ty1.csize <- blpGetData(conn,  "TY1 Comdty", "FUT_CONT_SIZE",
retval="raw")[[1]][[1]] #USD

conn <- blpConnect(show.days="trading", na.action="previous.days",
periodicity="daily")

gc1.cvalue <- blpGetData(conn, "GC1 Comdty", "CONTRACT_VALUE",
start=as.chron(Sys.Date()-5), end=as.chron(Sys.Date()), retval="zoo")

gi1.cvalue <- blpGetData(conn, "GI1 Index",  "CONTRACT_VALUE",
start=as.chron(Sys.Date()-5), end=as.chron(Sys.Date()), retval="zoo")

es1.cvalue <- blpGetData(conn, "ES1 Index",  "CONTRACT_VALUE",
start=as.chron(Sys.Date()-5), end=as.chron(Sys.Date()), retval="zoo")

blpDisconnect(conn)

#that runs without problems, so the problem is creating conns.


From nelson.ana at gmail.com  Tue Apr 13 14:42:16 2010
From: nelson.ana at gmail.com (Ana Nelson)
Date: Tue, 13 Apr 2010 13:42:16 +0100
Subject: [R-SIG-Finance] sudden problem with RBloomberg
In-Reply-To: <o2q7cb007bd1004130221v3ef091a5qde4008e609ff7df3@mail.gmail.com>
References: <s2h7cb007bd1004130030zecfda4a4rf9927dd771722b44@mail.gmail.com>
	<x2wa7d6d2741004130144x4cf7520dt13278cca0e90fe19@mail.gmail.com>
	<o2q7cb007bd1004130221v3ef091a5qde4008e609ff7df3@mail.gmail.com>
Message-ID: <w2pa7d6d2741004130542g1d6d0295u7e1db7883f6891b7@mail.gmail.com>

Sergey,

Please read this before you post to this list again:
http://www.catb.org/~esr/faqs/smart-questions.html

Please try adding blpDisconnect(conn) as below. And please check the
log file for error messages as I asked you to in my previous email.


conn <- blpConnect(show.days="week", na.action="previous.days",
periodicity="daily")
bldata <- blpGetData(conn, .tickers, "PX_LAST", start=start.date,
end=end.date, retval="zoo")
blpDisconnect(conn)

conn <- blpConnect(show.days="trading"
, na.action="previous.days",
periodicity="daily")


Regards,
Ana



On Tue, Apr 13, 2010 at 10:21 AM, Sergey Goriatchev <sergeyg at gmail.com> wrote:
>
> Hi, Ana
>
> Thank you for your help.
> 1) I have same RDCOMClient installed on 2.10 and on 2.7.2, the one
> that is available on RDCOMClient web page (don't remember version
> number and do not know how to find it out in R)
> 2) I cannot install this version of RBloomberg where I am at, due to
> IT restrictions. I need to do it at home and then transport the whole
> thing here (do not ask why). And I cannot install any Java.
> 3) The code has been running fine before. Surely, there were glitches
> from time to time, especially when there were calls for a lot of data,
> but on rerun the code eventually worked. Until today.
> Today I get this exception no matter what I do, I restarted PC, I
> restarted R, I ran different versions of R, I ran code line by line
> (once it worked, but then it started throwing off errors again). That
> is really strange.
> 4) With contract sizes I can simply set values by hand, without calls
> to Bloomberg, but I wanted it all connected to Bloomberg.
> 5) I cannot live without zoo objects. There is a lot of code and it
> all is written around zoo objects.
>
> I will try manually some more and see if I can find some acceptable
> solution, but the code worked fine till today...
>
> Kind Regards,
> Sergey
>
> On Tue, Apr 13, 2010 at 10:44, Ana Nelson <nelson.ana at gmail.com> wrote:
> > Do you somehow have RDCOMClient installed on R 2.10? Or are you running this
> > on R 2.7.2?
> >
> > Can you try installing this version of RBloomberg:
> > install.packages("RBloomberg", repos="http://R-Forge.R-project.org")
> >
> > Have you been able to run this code before, and it just suddenly stopped
> > working this morning?
> >
> > You might try an explicit blpDisconnect before you connect a second time,
> > and look for error messages in the log files in C:\blp\api.
> >
> > Also, try running a version of this script which just calls blpGetData with
> > retval="raw" and without doing anything with the result. You are doing other
> > things as well as talking to RBloomberg in this code, for example your
> > subsetting might be causing the exception, and asking for a zoo might be
> > part of the problem further below.
> >
> >
> > On Tue, Apr 13, 2010 at 8:30 AM, Sergey Goriatchev <sergeyg at gmail.com>
> > wrote:
> >>
> >> Hello everyone
> >>
> >> I run R 2.10 (also, R 2.7.2) with RBloomberg 0.1-10
> >> I cannot run new java-based RBloomberg due to local restrictions.
> >>
> >> This morning I get a sudden problem with RBloomberg:
> >>
> >> ------------------------
> >> > conn <- blpConnect(show.days="week", na.action="previous.days",
> >> > periodicity="daily")
> >>
> >> > bldata <- blpGetData(conn, signal.tickers, "PX_LAST", start=start.date,
> >> > end=end.date, retval="zoo")
> >>
> >> > conn <- blpConnect(show.days="trading", na.action="previous.days",
> >> > periodicity="daily")
> >>
> >> > ty1.csize <- blpGetData(conn, ?"TY1 Comdty", "FUT_CONT_SIZE",
> >> > retval="raw")[[1]][[1]] #USD
> >>
> >> Error: Exception occurred.
> >>
> >> > gc1.cvalue <- blpGetData(conn, "GC1 Comdty", "CONTRACT_VALUE",
> >> > start=as.chron(Sys.Date()-5), end=as.chron(Sys.Date()), retval="zoo")
> >>
> >> Warning message:
> >> In as.matrix.BlpCOMReturn(x) : NAs introduced by coercion
> >>
> >> > gi1.cvalue <- blpGetData(conn, "GI1 Index", ?"CONTRACT_VALUE",
> >> > start=as.chron(Sys.Date()-5), end=as.chron(Sys.Date()), retval="zoo")
> >>
> >> Warning message:
> >> In as.matrix.BlpCOMReturn(x) : NAs introduced by coercion
> >>
> >> > es1.cvalue <- blpGetData(conn, "ES1 Index", ?"CONTRACT_VALUE",
> >> > start=as.chron(Sys.Date()-5), end=as.chron(Sys.Date()), retval="zoo")
> >> Warning message:
> >> In as.matrix.BlpCOMReturn(x) : NAs introduced by coercion
> >>
> >> > blpDisconnect(conn)
> >> ---------------------------
> >>
> >> I don't know what is going on, in particular the first "Error:
> >> Exception occured" is new to me. I tried restart R, different versions
> >> of R, feeding line by line, nothing helps.
> >>
> >> Anyone has an inkling what the problem is caused by?
> >>
> >> Best,
> >> Sergey
> >>
> >> --
> >> Simplicity is the last step of art./Bruce Lee
> >>
> >> _______________________________________________
> >> R-SIG-Finance at stat.math.ethz.ch mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> >> -- Subscriber-posting only. If you want to post, subscribe first.
> >> -- Also note that this is not the r-help list where general R questions
> >> should go.
> >
> >
>
>
>
> --
> Simplicity is the last step of art./Bruce Lee
> The more you know, the more you know you don't know. /Myself
>
> I'm not young enough to know everything. /Oscar Wilde
> Experience is one thing you can't get for nothing. /Oscar Wilde
> When you are finished changing, you're finished. /Benjamin Franklin
> Luck is where preparation meets opportunity. /George Patten
>
> Kniven sk?rpes bara mot stenen.


From kafka at centras.lt  Tue Apr 13 23:15:25 2010
From: kafka at centras.lt (kafkaz)
Date: Tue, 13 Apr 2010 13:15:25 -0800 (PST)
Subject: [R-SIG-Finance] blotter on 15 min data
Message-ID: <1271193325979-1839017.post@n4.nabble.com>


Q: can I use blotter on 5 min. data? 
In my case, equity goes to 0 after first call of:
updatePortf(ltportfolio, Dates = currentDate)
updateAcct(ltaccount, Dates = currentDate)
updateEndEq(ltaccount, Dates = currentDate)

My data looks like this:
> head(eu5min)
                      Open   High    Low  Close
2007-01-02 02:05:00 1.3232 1.3234 1.3230 1.3234
2007-01-02 02:10:00 1.3233 1.3233 1.3230 1.3232
2007-01-02 02:15:00 1.3233 1.3234 1.3232 1.3232
2007-01-02 02:20:00 1.3233 1.3234 1.3229 1.3230
2007-01-02 02:25:00 1.3229 1.3232 1.3229 1.3231
2007-01-02 02:30:00 1.3230 1.3232 1.3229 1.3230

Here is blotter related code:
Sys.setenv(TZ="GMT")
initDate=index(eu5min[1])
rm(list=ls(envir=.blotter),envir=.blotter)
symbols<-c('eu5min')
initPortf(ltportfolio,symbols, initDate=initDate)

initAcct(ltaccount,portfolios=c(ltportfolio),
initDate=initDate,initEq=100000)
currency("USD")
stock('eu5min',currency="USD",multiplier=1)
equity = getEndEq(ltaccount, initDate)
print(paste('equity ',equity))

for(i in 2:length(signal))
{
	currentDate= time(signal)[i]
	print(paste('currentDate ',currentDate))
	updatePortf(ltportfolio, Dates = currentDate)
	updateAcct(ltaccount, Dates = currentDate)
	updateEndEq(ltaccount, Dates = currentDate)
	equity = getEndEq(ltaccount, currentDate)
	
	print(paste('equity ',equity))
}

Output of this code is:
[1] "equity  1e+05"
[1] "currentDate  2007-01-02 02:10:00"
[1] "equity  0"
[1] "currentDate  2007-01-02 02:15:00"
[1] "equity  0"
[1] "currentDate  2007-01-02 02:20:00"
[1] "equity  0"
[1] "currentDate  2007-01-02 02:25:00"
[1] "equity  0"
[1] "currentDate  2007-01-02 02:30:00"
[1] "equity  0"
[1] "currentDate  2007-01-02 02:35:00"
[1] "equity  0"

As you can see, equity goes down without any transaction.

str(eu5min)
An ?xts? object from 2007-01-02 02:05:00 to 2007-02-01 23:55:00 containing:
  Data: num [1:6509, 1:4] 1.32 1.32 1.32 1.32 1.32 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:4] "Open" "High" "Low" "Close"
  Indexed by objects of class: [POSIXt,POSIXct] TZ: GMT
  xts Attributes:  
 NULL

str(signal)
An ?xts? object from 2007-01-02 02:05:00 to 2007-02-01 23:55:00 containing:
  Data: num [1:6509, 1] 0 0 0 0 0 0 0 0 0 0 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr "Close"
  Indexed by objects of class: [POSIXt,POSIXct] TZ: GMT
  xts Attributes:  
 NULL

Any ideas about this? Thank you in advance.
-- 
View this message in context: http://n4.nabble.com/blotter-on-15-min-data-tp1839017p1839017.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From worik.stanton at gmail.com  Tue Apr 13 23:23:08 2010
From: worik.stanton at gmail.com (Worik Stanton)
Date: Wed, 14 Apr 2010 09:23:08 +1200
Subject: [R-SIG-Finance] Testing existence in xts
Message-ID: <o2k5fae31c41004131423n31c74231q26e74690754083ad@mail.gmail.com>

How do I test for the existence of an entry in a xts?

Given xts z
> z
              z
2009-01-08 1.71
2009-01-09 1.72
2009-01-12 1.71

and I want to test if z["2009-01-10",] exists, how do I do it?

cheers
Worik
-- 
Dig it out of the ground
Melt it down
Bury it
Guard it


From jeff.a.ryan at gmail.com  Tue Apr 13 23:25:40 2010
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Tue, 13 Apr 2010 16:25:40 -0500
Subject: [R-SIG-Finance] Testing existence in xts
In-Reply-To: <o2k5fae31c41004131423n31c74231q26e74690754083ad@mail.gmail.com>
References: <o2k5fae31c41004131423n31c74231q26e74690754083ad@mail.gmail.com>
Message-ID: <u2le8e755251004131425k6b736905k13d569dec28cb095@mail.gmail.com>

Try:

> library(xts)
Loading required package: zoo
> x <- xts(1:3, Sys.Date()+1:3)
> x
           [,1]
2010-04-14    1
2010-04-15    2
2010-04-16    3
> x['2010-04-17']
Data:
integer(0)

Index:
integer(0)
> length(x['2010-04-17'])
[1] 0
> length(x['2010-04-16'])
[1] 1
>

HTH
Jeff

On Tue, Apr 13, 2010 at 4:23 PM, Worik Stanton <worik.stanton at gmail.com> wrote:
> How do I test for the existence of an entry in a xts?
>
> Given xts z
>> z
> ? ? ? ? ? ? ?z
> 2009-01-08 1.71
> 2009-01-09 1.72
> 2009-01-12 1.71
>
> and I want to test if z["2009-01-10",] exists, how do I do it?
>
> cheers
> Worik
> --
> Dig it out of the ground
> Melt it down
> Bury it
> Guard it
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at insightalgo.com

ia: insight algorithmics
www.insightalgo.com


From brian at braverock.com  Tue Apr 13 23:29:17 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 13 Apr 2010 16:29:17 -0500
Subject: [R-SIG-Finance] blotter on 15 min data
In-Reply-To: <1271193325979-1839017.post@n4.nabble.com>
References: <1271193325979-1839017.post@n4.nabble.com>
Message-ID: <4BC4E22D.5060405@braverock.com>

On 04/13/2010 04:15 PM, kafkaz wrote:
> Q: can I use blotter on 5 min. data?
>    

A: Yes.  I use it on high frequency irregular and bar data all the time, 
but I do not use updateEndEq (it's not really important for what I do) 
so the problem may lie there.

Use dput() to output your data, str() does not create a reproducible 
example.  (Thank you for trying.)

Please update to current R-Forge code for blotter (there have been 
several changes recently) and related/required dependencies, and re-post 
a reproducible example.

I'm a little busy leading up to R/Finance in Chicago this week, but I'll 
take a look at it in detail on Monday and we'll work with you to get it 
fixed if you provide something we can run to reproduce your error.

Regards,

     - Brian

> In my case, equity goes to 0 after first call of:
> updatePortf(ltportfolio, Dates = currentDate)
> updateAcct(ltaccount, Dates = currentDate)
> updateEndEq(ltaccount, Dates = currentDate)
>
> My data looks like this:
>    
>> head(eu5min)
>>      
>                        Open   High    Low  Close
> 2007-01-02 02:05:00 1.3232 1.3234 1.3230 1.3234
> 2007-01-02 02:10:00 1.3233 1.3233 1.3230 1.3232
> 2007-01-02 02:15:00 1.3233 1.3234 1.3232 1.3232
> 2007-01-02 02:20:00 1.3233 1.3234 1.3229 1.3230
> 2007-01-02 02:25:00 1.3229 1.3232 1.3229 1.3231
> 2007-01-02 02:30:00 1.3230 1.3232 1.3229 1.3230
>
> Here is blotter related code:
> Sys.setenv(TZ="GMT")
> initDate=index(eu5min[1])
> rm(list=ls(envir=.blotter),envir=.blotter)
> symbols<-c('eu5min')
> initPortf(ltportfolio,symbols, initDate=initDate)
>
> initAcct(ltaccount,portfolios=c(ltportfolio),
> initDate=initDate,initEq=100000)
> currency("USD")
> stock('eu5min',currency="USD",multiplier=1)
> equity = getEndEq(ltaccount, initDate)
> print(paste('equity ',equity))
>
> for(i in 2:length(signal))
> {
> 	currentDate= time(signal)[i]
> 	print(paste('currentDate ',currentDate))
> 	updatePortf(ltportfolio, Dates = currentDate)
> 	updateAcct(ltaccount, Dates = currentDate)
> 	updateEndEq(ltaccount, Dates = currentDate)
> 	equity = getEndEq(ltaccount, currentDate)
> 	
> 	print(paste('equity ',equity))
> }
>
> Output of this code is:
> [1] "equity  1e+05"
> [1] "currentDate  2007-01-02 02:10:00"
> [1] "equity  0"
> [1] "currentDate  2007-01-02 02:15:00"
> [1] "equity  0"
> [1] "currentDate  2007-01-02 02:20:00"
> [1] "equity  0"
> [1] "currentDate  2007-01-02 02:25:00"
> [1] "equity  0"
> [1] "currentDate  2007-01-02 02:30:00"
> [1] "equity  0"
> [1] "currentDate  2007-01-02 02:35:00"
> [1] "equity  0"
>
> As you can see, equity goes down without any transaction.
>
> str(eu5min)
> An ?xts? object from 2007-01-02 02:05:00 to 2007-02-01 23:55:00 containing:
>    Data: num [1:6509, 1:4] 1.32 1.32 1.32 1.32 1.32 ...
>   - attr(*, "dimnames")=List of 2
>    ..$ : NULL
>    ..$ : chr [1:4] "Open" "High" "Low" "Close"
>    Indexed by objects of class: [POSIXt,POSIXct] TZ: GMT
>    xts Attributes:
>   NULL
>
> str(signal)
> An ?xts? object from 2007-01-02 02:05:00 to 2007-02-01 23:55:00 containing:
>    Data: num [1:6509, 1] 0 0 0 0 0 0 0 0 0 0 ...
>   - attr(*, "dimnames")=List of 2
>    ..$ : NULL
>    ..$ : chr "Close"
>    Indexed by objects of class: [POSIXt,POSIXct] TZ: GMT
>    xts Attributes:
>   NULL
>
> Any ideas about this? Thank you in advance.
>    


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From worik.stanton at gmail.com  Wed Apr 14 00:34:05 2010
From: worik.stanton at gmail.com (Worik Stanton)
Date: Wed, 14 Apr 2010 10:34:05 +1200
Subject: [R-SIG-Finance] Testing existence in xts
In-Reply-To: <u2le8e755251004131425k6b736905k13d569dec28cb095@mail.gmail.com>
References: <o2k5fae31c41004131423n31c74231q26e74690754083ad@mail.gmail.com>
	<u2le8e755251004131425k6b736905k13d569dec28cb095@mail.gmail.com>
Message-ID: <p2j5fae31c41004131534ofea4d883n726c04416367d0e4@mail.gmail.com>

So, of course, test the length of the returned value.
> x <- xts(1:3, Sys.Date()+1:3)
> x
           [,1]
2010-04-15    1
2010-04-16    2
2010-04-17    3

I am in a different time zone!

> if(length(x['2010-04-18'])){cat("True\n")}else{ cat("False\n")}
False
> if(length(x['2010-04-17'])){cat("True\n")}else{ cat("False\n")}
True
>

Obvious really.

thank you
Worik


-- 
Dig it out of the ground
Melt it down
Bury it
Guard it


From kafka at centras.lt  Wed Apr 14 13:47:59 2010
From: kafka at centras.lt (kafkaz)
Date: Wed, 14 Apr 2010 03:47:59 -0800 (PST)
Subject: [R-SIG-Finance] blotter on 15 min data
In-Reply-To: <4BC4E22D.5060405@braverock.com>
References: <1271193325979-1839017.post@n4.nabble.com>
	<4BC4E22D.5060405@braverock.com>
Message-ID: <1271245679853-1839662.post@n4.nabble.com>


Here's "eu5min" object's dump:
structure(c(1.3232, 1.3233, 1.3233, 1.3233, 1.3229, 1.323, 1.3231, 
1.323, 1.3226, 1.3229, 1.323, 1.323, 1.3234, 1.3233, 1.3234, 
1.3234, 1.3232, 1.3232, 1.3231, 1.323, 1.3229, 1.3232, 1.3233, 
1.323, 1.323, 1.323, 1.3232, 1.3229, 1.3229, 1.3229, 1.3228, 
1.3226, 1.3226, 1.3229, 1.3228, 1.3227, 1.3234, 1.3232, 1.3232, 
1.323, 1.3231, 1.323, 1.3229, 1.3227, 1.3228, 1.3231, 1.3229, 
1.3227), index = structure(c(1167703500, 1167703800, 1167704100, 
1167704400, 1167704700, 1167705000, 1167705300, 1167705600, 1167705900, 
1167706200, 1167706500, 1167706800), tzone = "GMT"), .Dim = c(12L, 
4L), .Dimnames = list(NULL, c("Open", "High", "Low", "Close")), .indexCLASS
= c("POSIXt", 
"POSIXct"), .indexTZ = "GMT", class = c("xts", "zoo"))

And the test file:
library(xts)
library(quantmod)
library(blotter)

Sys.setenv(TZ = "GMT")
eu5min<-dget('eu5min')

print(eu5min)

signal<-Cl(eu5min)
signal[which(signal!=0)]<-0

initDate=index(eu5min[1])
currency("USD")
stock('eu5min',currency="USD",multiplier=1)
symbols<-c('eu5min')
ltportfolio='longtrend'
ltaccount='longtrend'
initPortf(ltportfolio,symbols, initDate=initDate)
initAcct(ltaccount,portfolios=c(ltportfolio),
initDate=initDate,initEq=100000)

equity = getEndEq(ltaccount, initDate)
print(paste('equity ',equity))

for(i in 2:length(Cl(eu5min)))
{
	currentDate= time(signal)[i]
	print(paste('currentDate ',currentDate, ' eq ', getEndEq(ltaccount,
currentDate)))
	updatePortf(ltportfolio, Dates = currentDate)
	updateAcct(ltaccount, Dates = currentDate)
	updateEndEq(ltaccount, Dates = currentDate)
	equity = getEndEq(ltaccount, currentDate)
	
	print(paste('equity ',equity))
	if(equity == 0)
		break;
}

tmp<- try(get(paste("account", ltaccount, sep = "."), envir = .blotter))
tail(tmp[[1]][paste("::", currentDate, sep = ""), ])[, "End.Eq"]

I tried on two machines (linux and winXP) and I got the same printout:
                      Open   High    Low  Close
2007-01-02 02:05:00 1.3232 1.3234 1.3230 1.3234
2007-01-02 02:10:00 1.3233 1.3233 1.3230 1.3232
2007-01-02 02:15:00 1.3233 1.3234 1.3232 1.3232
2007-01-02 02:20:00 1.3233 1.3234 1.3229 1.3230
2007-01-02 02:25:00 1.3229 1.3232 1.3229 1.3231
2007-01-02 02:30:00 1.3230 1.3232 1.3229 1.3230
2007-01-02 02:35:00 1.3231 1.3231 1.3228 1.3229
2007-01-02 02:40:00 1.3230 1.3230 1.3226 1.3227
2007-01-02 02:45:00 1.3226 1.3229 1.3226 1.3228
2007-01-02 02:50:00 1.3229 1.3232 1.3229 1.3231
2007-01-02 02:55:00 1.3230 1.3233 1.3228 1.3229
2007-01-02 03:00:00 1.3230 1.3230 1.3227 1.3227
[1] "longtrend"
[1] "longtrend"
[1] "equity  1e+05"
[1] "currentDate  2007-01-02 02:10:00  eq  1e+05"
[1] "equity  0"
                    End.Eq
2007-01-02 02:05:00  1e+05
2007-01-02 02:05:00  0e+00
2007-01-02 02:05:00  0e+00
2007-01-02 02:10:00  0e+00

Then I tried the same test file with yahoo data and SPY ticker. In that case
equity remained at 1e+05. The only difference what I found between two gput
objects was .indexCLASS (Date for daily data vs POSIXct for 5 min. data).

-- 
View this message in context: http://n4.nabble.com/blotter-on-15-min-data-tp1839017p1839662.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From mapirlo at libero.it  Wed Apr 14 21:23:23 2010
From: mapirlo at libero.it (mapirlo at libero.it)
Date: Wed, 14 Apr 2010 21:23:23 +0200 (CEST)
Subject: [R-SIG-Finance] restrictions on cointegration relations - urca
	package
Message-ID: <15491784.1844611271273003088.JavaMail.defaultUser@defaultHost>

Hi R-programmers,

I found out urca package to deal with econometrics.

I detected a cointegration space of r=2. ok, fine.

but now :
how can I impose restrictions in first and second cointegration relation in 
the same time and obtain new beta and alpha matrix ?

In the two following cointegrations with ca.jo :
W + 7.04 Y+ 32.24 U - 0.7 t = 0
W - 1.65 Y -1.65 U + 0.008 t = 0

I wish impose :
a null coeficient for Y in the first relation ( W + 0 * Y + beta12 * U + 
beta13 * t)
coefficient of  Y =  coefficient of U in the second relation (W + betat22 * Y 
+ beta22 * U + beta23 * t)

What is the restriction matrix ? which function do I use to solve it ?

thanks in advance,

Marco


From wuyuehe at yahoo.cn  Thu Apr 15 10:06:49 2010
From: wuyuehe at yahoo.cn (=?gb2312?B?zuXUwrrT?=)
Date: Thu, 15 Apr 2010 16:06:49 +0800 (CST)
Subject: [R-SIG-Finance] BEKK help?
Message-ID: <626227.4702.qm@web92404.mail.cnh.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100415/867d3384/attachment.pl>

From cmdr_rogue at hotmail.com  Thu Apr 15 10:53:11 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Thu, 15 Apr 2010 04:53:11 -0400
Subject: [R-SIG-Finance] BEKK help?
In-Reply-To: <626227.4702.qm@web92404.mail.cnh.yahoo.com>
References: <626227.4702.qm@web92404.mail.cnh.yahoo.com>
Message-ID: <BLU0-SMTP4304EB60B4AF7977A0178AE20F0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100415/bd233250/attachment.pl>

From piotr.chmielowski at reechaim.com  Thu Apr 15 13:48:54 2010
From: piotr.chmielowski at reechaim.com (Piotr Chmielowski)
Date: Thu, 15 Apr 2010 12:48:54 +0100
Subject: [R-SIG-Finance] rbloomberg error when requesting data
Message-ID: <507AED19B31989449F31BE3BD6BC253B05ABE8A50A@srv-ldn-ex01.Reech.local>

Hello,

I use the RBloomberg package to retrieve price data for securities.
Sometimes (unfortunately this is not reproducible, so "sometimes" is the key word), one of the many calls to blpGetData triggers an error with very little info:

<checkErrorInfo> 80020009
No support for InterfaceSupportsErrorInfo
Error: Exception occurred.

Unfortunately, this error is not easily reproducible - after initializing the connection the same call with the same arguments usually succeeds.

If anybody has encountered similar behaviour in the past, and has discovered a workaround, it would be very much appreciated.

Piotr

System data below:

platform       i386-pc-mingw32
arch           i386
os             mingw32
system         i386, mingw32
status
major          2
minor          6.0
year           2007
month          10
day            03
svn rev        43063
language       R
version.string R version 2.6.0 (2007-10-03)

Package:       RBloomberg
Version:       0.1-10
Date:          2006-05-04
Title:         R/Bloomberg
Author:        Robert Sams <robert at sanctumfi.com>
Maintainer:    Robert Sams <robert at sanctumfi.com>
Description:   Fetch data from Bloomberg
License:       GPL
Depends:       RDCOMClient, zoo, chron
Packaged:      Thu May 4 18:05:46 2006; rms
Built:         R 2.6.0; ; 2007-10-09 15:18:59; windows


Piotr Chmielowski
Chief Operating Officer/Group Risk Manager

Kingsley House, Wimpole Street, London, W1G 0RE, United Kingdom
http://www.reechaim.com/

 DDI: +44 20 7399 3662

 Switchboard: +44 20 7399 3650

 Fax: +44 20 7399 3698

 Mobile: +44 7825 711 957

Email: piotr.chmielowski at reechaim.com
http://www.reechaim.com/

Reech AiM Partners LLP, Registered Office: 42-44 Portman Road, Reading, Berkshire, RG30 1EA. Registered in England and Wales No. OC321436. Authorised and regulated by the Financial Services Authority.
Reech CBRE Alternative Real Estate LLP, Registered Office: 42-44 Portman Road, Reading, Berkshire, RG30 1EA. Registered in England and Wales No. OC322313. Authorised and regulated by the Financial Services Authority.
This message and any attachments (the "message") is inte...{{dropped:10}}


From nelson.ana at gmail.com  Thu Apr 15 14:46:55 2010
From: nelson.ana at gmail.com (Ana Nelson)
Date: Thu, 15 Apr 2010 13:46:55 +0100 (IST)
Subject: [R-SIG-Finance] rbloomberg error when requesting data
In-Reply-To: <28909973.141271335513782.JavaMail.ana@Ana-Nelsons-MacBook.local>
Message-ID: <24598457.161271335610700.JavaMail.ana@Ana-Nelsons-MacBook.local>

Hi, Piotr,

Many thanks for your exemplary error report. :-)

I believe this cryptic message happens because there is an error within the Bloomberg API, but RDCOMClient or RBloomberg is not equipped to convey this message to you.

http://msdn.microsoft.com/en-us/library/ms221083.aspx
http://msdn.microsoft.com/en-us/library/ms221233.aspx

I suggest you look for errors in the Bloomberg log files located in C:\blp\api, or perhaps you can install DebugView which may give some more insight into the error which is occurring:
http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx

Then you may be able to find the cause of this intermittent issue.

You may also wish to try the newer Java-based version of RBloomberg available from findata.org.

Regards,
Ana



----- Original Message -----
From: "Piotr Chmielowski" <piotr.chmielowski at reechaim.com>
To: r-sig-finance at stat.math.ethz.ch
Sent: Thursday, 15 April, 2010 12:48:54 GMT +00:00 GMT Britain, Ireland, Portugal
Subject: [R-SIG-Finance] rbloomberg error when requesting data

Hello,

I use the RBloomberg package to retrieve price data for securities.
Sometimes (unfortunately this is not reproducible, so "sometimes" is the key word), one of the many calls to blpGetData triggers an error with very little info:

<checkErrorInfo> 80020009
No support for InterfaceSupportsErrorInfo
Error: Exception occurred.

Unfortunately, this error is not easily reproducible - after initializing the connection the same call with the same arguments usually succeeds.

If anybody has encountered similar behaviour in the past, and has discovered a workaround, it would be very much appreciated.

Piotr

System data below:

platform       i386-pc-mingw32
arch           i386
os             mingw32
system         i386, mingw32
status
major          2
minor          6.0
year           2007
month          10
day            03
svn rev        43063
language       R
version.string R version 2.6.0 (2007-10-03)

Package:       RBloomberg
Version:       0.1-10
Date:          2006-05-04
Title:         R/Bloomberg
Author:        Robert Sams <robert at sanctumfi.com>
Maintainer:    Robert Sams <robert at sanctumfi.com>
Description:   Fetch data from Bloomberg
License:       GPL
Depends:       RDCOMClient, zoo, chron
Packaged:      Thu May 4 18:05:46 2006; rms
Built:         R 2.6.0; ; 2007-10-09 15:18:59; windows


Piotr Chmielowski
Chief Operating Officer/Group Risk Manager

Kingsley House, Wimpole Street, London, W1G 0RE, United Kingdom
http://www.reechaim.com/

 DDI: +44 20 7399 3662

 Switchboard: +44 20 7399 3650

 Fax: +44 20 7399 3698

 Mobile: +44 7825 711 957

Email: piotr.chmielowski at reechaim.com
http://www.reechaim.com/

Reech AiM Partners LLP, Registered Office: 42-44 Portman Road, Reading, Berkshire, RG30 1EA. Registered in England and Wales No. OC321436. Authorised and regulated by the Financial Services Authority.
Reech CBRE Alternative Real Estate LLP, Registered Office: 42-44 Portman Road, Reading, Berkshire, RG30 1EA. Registered in England and Wales No. OC322313. Authorised and regulated by the Financial Services Authority.
This message and any attachments (the "message") is inte...{{dropped:8}}


From piotr.chmielowski at reechaim.com  Thu Apr 15 15:11:06 2010
From: piotr.chmielowski at reechaim.com (Piotr Chmielowski)
Date: Thu, 15 Apr 2010 14:11:06 +0100
Subject: [R-SIG-Finance] rbloomberg error when requesting data
In-Reply-To: <24598457.161271335610700.JavaMail.ana@Ana-Nelsons-MacBook.local>
References: <28909973.141271335513782.JavaMail.ana@Ana-Nelsons-MacBook.local>
	<24598457.161271335610700.JavaMail.ana@Ana-Nelsons-MacBook.local>
Message-ID: <507AED19B31989449F31BE3BD6BC253B05ABE8A50B@srv-ldn-ex01.Reech.local>

Ana,

The error is not easily reproducible, albeit persistent, and the diagnostics are, as you rightly notice, sparse.

It is my "guess" that it is probably caused by the transient states of the API. I would definitely *not* call this error a "bug" in the RBloomberg package for which all users I am sure are as grateful as I am.

I was remotely hoping that somebody has come across and discovered a workaround. I still harbour this hope...

Thanks for the suggestions on the log files - there are no error messages in the bbcomm.log.* files unfortunately.

I guess the rest of the discussion would take us away from the main subject of this forum.

Will try the java version - it is on the "to do" list :(

Piotr



Piotr Chmielowski
Chief Operating Officer/Group Risk Manager

Kingsley House, Wimpole Street, London, W1G 0RE, United Kingdom
http://www.reechaim.com/

 DDI: +44 20 7399 3662

 Switchboard: +44 20 7399 3650

 Fax: +44 20 7399 3698

 Mobile: +44 7825 711 957

Email: piotr.chmielowski at reechaim.com
http://www.reechaim.com/

Reech AiM Partners LLP, Registered Office: 42-44 Portman Road, Reading, Berkshire, RG30 1EA. Registered in England and Wales No. OC321436. Authorised and regulated by the Financial Services Authority.
Reech CBRE Alternative Real Estate LLP, Registered Office: 42-44 Portman Road, Reading, Berkshire, RG30 1EA. Registered in England and Wales No. OC322313. Authorised and regulated by the Financial Services Authority.
This message and any attachments (the "message") is intended solely for the addressees and is confidential. If you receive this message in error, please delete it and immediately notify the sender. Any use not in accord with its purpose, any dissemination or disclosure, either whole or partial, is prohibited except by formal approval. The internet can not guarantee the integrity of this message.  We shall not therefore be liable for the message if modified.

-----Original Message-----

From: Ana Nelson [mailto:nelson.ana at gmail.com]
Sent: Thursday, April 15, 2010 1:47 PM
To: Piotr Chmielowski
Cc: r-sig-finance at stat.math.ethz.ch
Subject: Re: [R-SIG-Finance] rbloomberg error when requesting data

Hi, Piotr,

Many thanks for your exemplary error report. :-)

I believe this cryptic message happens because there is an error within the Bloomberg API, but RDCOMClient or RBloomberg is not equipped to convey this message to you.

http://msdn.microsoft.com/en-us/library/ms221083.aspx
http://msdn.microsoft.com/en-us/library/ms221233.aspx

I suggest you look for errors in the Bloomberg log files located in C:\blp\api, or perhaps you can install DebugView which may give some more insight into the error which is occurring:
http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx

Then you may be able to find the cause of this intermittent issue.

You may also wish to try the newer Java-based version of RBloomberg available from findata.org.

Regards,
Ana



----- Original Message -----
From: "Piotr Chmielowski" <piotr.chmielowski at reechaim.com>
To: r-sig-finance at stat.math.ethz.ch
Sent: Thursday, 15 April, 2010 12:48:54 GMT +00:00 GMT Britain, Ireland, Portugal
Subject: [R-SIG-Finance] rbloomberg error when requesting data

Hello,

I use the RBloomberg package to retrieve price data for securities.
Sometimes (unfortunately this is not reproducible, so "sometimes" is the key word), one of the many calls to blpGetData triggers an error with very little info:

<checkErrorInfo> 80020009
No support for InterfaceSupportsErrorInfo
Error: Exception occurred.

Unfortunately, this error is not easily reproducible - after initializing the connection the same call with the same arguments usually succeeds.

If anybody has encountered similar behaviour in the past, and has discovered a workaround, it would be very much appreciated.

Piotr

System data below:

platform       i386-pc-mingw32
arch           i386
os             mingw32
system         i386, mingw32
status
major          2
minor          6.0
year           2007
month          10
day            03
svn rev        43063
language       R
version.string R version 2.6.0 (2007-10-03)

Package:       RBloomberg
Version:       0.1-10
Date:          2006-05-04
Title:         R/Bloomberg
Author:        Robert Sams <robert at sanctumfi.com>
Maintainer:    Robert Sams <robert at sanctumfi.com>
Description:   Fetch data from Bloomberg
License:       GPL
Depends:       RDCOMClient, zoo, chron
Packaged:      Thu May 4 18:05:46 2006; rms
Built:         R 2.6.0; ; 2007-10-09 15:18:59; windows


Piotr Chmielowski
Chief Operating Officer/Group Risk Manager

Kingsley House, Wimpole Street, London, W1G 0RE, United Kingdom
http://www.reechaim.com/

 DDI: +44 20 7399 3662

 Switchboard: +44 20 7399 3650

 Fax: +44 20 7399 3698

 Mobile: +44 7825 711 957

Email: piotr.chmielowski at reechaim.com
http://www.reechaim.com/

Reech AiM Partners LLP, Registered Office: 42-44 Portman Road, Reading, Berkshire, RG30 1EA. Registered in England and Wales No. OC321436. Authorised and regulated by the Financial Services Authority.
Reech CBRE Alternative Real Estate LLP, Registered Office: 42-44 Portman Road, Reading, Berkshire, RG30 1EA. Registered in England and Wales No. OC322313. Authorised and regulated by the Financial Services Authority.
This message and any attachments (the "message") is inte...{{dropped:10}}

_______________________________________________
R-SIG-Finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From dengyishuo at 163.com  Thu Apr 15 15:34:55 2010
From: dengyishuo at 163.com (=?gbk?B?tcvSu8u2?=)
Date: Thu, 15 Apr 2010 21:34:55 +0800 (CST)
Subject: [R-SIG-Finance] BEKK help?
In-Reply-To: <BLU0-SMTP4304EB60B4AF7977A0178AE20F0@phx.gbl>
References: <BLU0-SMTP4304EB60B4AF7977A0178AE20F0@phx.gbl>
	<626227.4702.qm@web92404.mail.cnh.yahoo.com>
Message-ID: <b16331.89b4.12801adeebc.Coremail.dengyishuo@163.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100415/0af85452/attachment.pl>

From thorsten.schmidt at gmail.com  Thu Apr 15 16:11:02 2010
From: thorsten.schmidt at gmail.com (thorsten schmidt)
Date: Thu, 15 Apr 2010 10:11:02 -0400
Subject: [R-SIG-Finance] Portfolio Optimization with Non-linear Transaction
	Cost in RMetrics
Message-ID: <q2p3ac7ea281004150711u994faa40yb8220d8c8addf87b@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100415/58881991/attachment.pl>

From brian at braverock.com  Thu Apr 15 17:01:30 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 15 Apr 2010 10:01:30 -0500
Subject: [R-SIG-Finance] Portfolio Optimization with Non-linear
 Transaction Cost in RMetrics
In-Reply-To: <q2p3ac7ea281004150711u994faa40yb8220d8c8addf87b@mail.gmail.com>
References: <q2p3ac7ea281004150711u994faa40yb8220d8c8addf87b@mail.gmail.com>
Message-ID: <4BC72A4A.4040304@braverock.com>

On 04/15/2010 09:11 AM, thorsten schmidt wrote:
> Hi,
> Is there a way to perform portfolio optimization with Non-linear transaction
> cost in fPortfolio or any of the other RMetrics packages, or other packages?
> Thank you.
>    

You haven't been very particular in describing your problem.

Please state it as a formal problem specification like:

<example>

I have a portfolio of <n> assets that all share<don't share> the same 
asset class, with <daily> periodicity and <common?> currency.

I wish to
- maximize total net wealth
- maximize exponentially weighted moving average daily return
- minimize Cornish-Fisher modified Expected Shortfall
- limit drawdowns to x%

subject to
- weight constraints on each asset

the thing I don't understand how to do is:
- my transaction costs are computed by a function that will add friction 
to the returns at different weights, based on position size, and I've 
written this function <provide code> to calculate the 'cost' of changing 
positions

...and the R code I've tried that solves part of my problem is... 
(include reproducible example)  ... with the following errors or missing 
bits as I try to solve the part I don't know the answer to...

</example>


This will help others who may have solved problems similar to yours help 
you solve your problem.

Off the top of my head, the optimization packages specific to portfolio 
optimization in R are:
- fPortfolio
- PortfolioAnalytics
- lspm
- backtest (and it's cousin portfolio)

and of course there is the optimization task view for the field of 
optimization not limited to finance:

http://cran.r-project.org/web/views/Optimization.html

but I (and I suspect anybody else) can't actually answer your question 
because you didn't tell us enough about your problem.

Which optimization solver to use is very very particular to the 
specifics of your problem.

Please take the time to formulate your question in a way that makes it 
easy for the list to help you.  A well-formed question will also 
hopefully cut down on similar questions being asked in the future.

If, by chance, I've given you enough information to help you solve your 
problem, do us all a favor and post your solution (use demo or 
non-proprietary data, of course) so that others can benefit from what 
you find out.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From wuyuehe at yahoo.cn  Thu Apr 15 17:10:53 2010
From: wuyuehe at yahoo.cn (=?utf-8?B?5LqU5pyI5rKz?=)
Date: Thu, 15 Apr 2010 23:10:53 +0800 (CST)
Subject: [R-SIG-Finance] BEKK help?
Message-ID: <416010.20038.qm@web92409.mail.cnh.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100415/b8082c6a/attachment.pl>

From brian at braverock.com  Thu Apr 15 17:35:26 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 15 Apr 2010 10:35:26 -0500
Subject: [R-SIG-Finance] package PerformanceAnalytics v1.0.2 released to CRAN
Message-ID: <4BC7323E.9000907@braverock.com>


We are pleased to announce the availability on CRAN of
PerformanceAnalytics version 1.0.2

Version: 1.0.2
Date: 2010-04-08
License: GPL
Copyright: (c) 2004-2010 Brian G. Peterson and Peter Carl
URL:http://cran.r-project.org/web/packages/PerformanceAnalytics/index.html
URL: http://r-forge.r-project.org/projects/returnanalytics/

PerformanceAnalytics is a library of econometric functions for
performance and risk analysis of financial portfolios. This
library aims to aid practitioners and researchers in using the
latest research in analysis of both normal and non-normal return
streams. It is increasingly capable of handling data of any
periodicity, including irregular and high frequency data, and
where possible P&L or price data.

PerformanceAnalytics now contains over 125 discreet public functions,
with additional datasets, wrapper functions, etc., and over 150 pages
of documentation.

As always, we are indebted to the R-SIG-Finance community for your
testing, suggestions, and support.

We hope that you find this package useful.

Please let us know how you are using it, it helps motivate us to keep
releasing code.

Regards,

    - Brian


-- 

Brian G. Peterson
http://www.braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: NEWS
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100415/01d4b685/attachment.pl>

From mane.desk at googlemail.com  Thu Apr 15 21:54:31 2010
From: mane.desk at googlemail.com (Immanuel)
Date: Thu, 15 Apr 2010 21:54:31 +0200
Subject: [R-SIG-Finance] How to install latest version of quantmod?
Message-ID: <4BC76EF7.1000908@gmail.com>

Hello together,

I'm having trouble to install the latest version of quantmod
which is according to:
http://cran.r-project.org/web/packages/quantmod/index.html
Version: 0.3-13

I first tried it this way:

> install.packages("TTR", repos="http://R-Forge.R-project.org")
> install.packages("xts", repos="http://R-Forge.R-project.org")
> install.packages("quantmod", repos="http://R-Forge.R-project.org")

but I got an not resolved error from "Default" or something.

Then I managed to install quantmod with

install.packages("quantmod")

this work but I only got Version:   0.3-8    which
is very outdated

now I thought
> install.packages("quantmod", repos="http://R-Forge.R-project.org")

would finally give me the newest version, it seemed to install fine
but somehow I have still only the old version! (according to
help(quantmod)  )


I already did quite some research on my own, but found so solution so far.
Also I have to say that I'm quite new to quantmod as well as to R in
general...


Any help is very much appreciated

Mane


From jeff.a.ryan at gmail.com  Thu Apr 15 21:58:49 2010
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Thu, 15 Apr 2010 14:58:49 -0500
Subject: [R-SIG-Finance] How to install latest version of quantmod?
In-Reply-To: <4BC76EF7.1000908@gmail.com>
References: <4BC76EF7.1000908@gmail.com>
Message-ID: <h2oe8e755251004151258v27979847j85725e464904b5bb@mail.gmail.com>

Try install.packages("Defaults")

That should get you what you need first.

Best,
Jeff

On Thu, Apr 15, 2010 at 2:54 PM, Immanuel <mane.desk at googlemail.com> wrote:
> Hello together,
>
> I'm having trouble to install the latest version of quantmod
> which is according to:
> http://cran.r-project.org/web/packages/quantmod/index.html
> Version: 0.3-13
>
> I first tried it this way:
>
>> install.packages("TTR", repos="http://R-Forge.R-project.org")
>> install.packages("xts", repos="http://R-Forge.R-project.org")
>> install.packages("quantmod", repos="http://R-Forge.R-project.org")
>
> but I got an not resolved error from "Default" or something.
>
> Then I managed to install quantmod with
>
> install.packages("quantmod")
>
> this work but I only got Version: ? 0.3-8 ? ?which
> is very outdated
>
> now I thought
>> install.packages("quantmod", repos="http://R-Forge.R-project.org")
>
> would finally give me the newest version, it seemed to install fine
> but somehow I have still only the old version! (according to
> help(quantmod) ?)
>
>
> I already did quite some research on my own, but found so solution so far.
> Also I have to say that I'm quite new to quantmod as well as to R in
> general...
>
>
> Any help is very much appreciated
>
> Mane
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at insightalgo.com

ia: insight algorithmics
www.insightalgo.com


From mane.desk at googlemail.com  Fri Apr 16 01:25:41 2010
From: mane.desk at googlemail.com (Immanuel)
Date: Fri, 16 Apr 2010 01:25:41 +0200
Subject: [R-SIG-Finance] Re How to install latest version of quantmod?
Message-ID: <4BC7A075.7020502@gmail.com>

Hey Jeff,

thanks for your fast answer.

> install.packages("quantmod", repos="http://R-Forge.R-project.org")
Warning in install.packages("quantmod", repos =
"http://R-Forge.R-project.org") :
  argument 'lib' is missing: using
'/home/flyingimmi/R/i486-pc-linux-gnu-library/2.10'
trying URL 'http://R-Forge.R-project.org/src/contrib/quantmod_0.3-14.tar.gz'
Content type 'application/x-gzip' length 118790 bytes (116 Kb)
opened URL
==================================================
downloaded 116 Kb

* installing *source* package ?quantmod? ...
** R
** demo
** preparing package for lazy loading
Loading required package: zoo
Creating a new generic function for "summary" in "quantmod"
** help
*** installing help indices
** building package indices ...
* DONE (quantmod)
---- cut---
help(quantmod)

       Package:   quantmod                             
       Type:      Package                              
       Version:   0.3-8                                
       Date:      2007-11-20                           
       Depends:   xts(>=0.0-15),Defaults               
       Suggests:  DBI,RMySQL,TTR,fSeries,its           
       LazyLoad:  yes                                  
       License:   GPL-3                                
       URL:       http://www.quantmod.com              
       URL:       http://quantmod.r-forge.r-project.org
-------

As far as I can tell is quantmod now installed in different places
and is only using the old version. :-/

any further hint's ?
regards mane


From jeff.a.ryan at gmail.com  Fri Apr 16 01:37:24 2010
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Thu, 15 Apr 2010 18:37:24 -0500
Subject: [R-SIG-Finance] Re How to install latest version of quantmod?
In-Reply-To: <4BC7A075.7020502@gmail.com>
References: <4BC7A075.7020502@gmail.com>
Message-ID: <o2je8e755251004151637y1ac6978r127332bc0eb31332@mail.gmail.com>

That is a tragically bad documentation lag ;-)

The main help file isn't automatically generated (noted, and I will
fix).  Try sessionInfo()

> sessionInfo()
R version 2.10.1 (2009-12-14)
i386-apple-darwin10.0.0

locale:
[1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] quantmod_0.3-14 TTR_0.20-1      Defaults_1.1-1  xts_0.7-1
[5] zoo_1.6-2

loaded via a namespace (and not attached):
[1] grid_2.10.1     lattice_0.17-26 tools_2.10.1
>


On Thu, Apr 15, 2010 at 6:25 PM, Immanuel <mane.desk at googlemail.com> wrote:
> Hey Jeff,
>
> thanks for your fast answer.
>
>> install.packages("quantmod", repos="http://R-Forge.R-project.org")
> Warning in install.packages("quantmod", repos =
> "http://R-Forge.R-project.org") :
> ?argument 'lib' is missing: using
> '/home/flyingimmi/R/i486-pc-linux-gnu-library/2.10'
> trying URL 'http://R-Forge.R-project.org/src/contrib/quantmod_0.3-14.tar.gz'
> Content type 'application/x-gzip' length 118790 bytes (116 Kb)
> opened URL
> ==================================================
> downloaded 116 Kb
>
> * installing *source* package ?quantmod? ...
> ** R
> ** demo
> ** preparing package for lazy loading
> Loading required package: zoo
> Creating a new generic function for "summary" in "quantmod"
> ** help
> *** installing help indices
> ** building package indices ...
> * DONE (quantmod)
> ---- cut---
> help(quantmod)
>
> ? ? ? Package: ? quantmod
> ? ? ? Type: ? ? ?Package
> ? ? ? Version: ? 0.3-8
> ? ? ? Date: ? ? ?2007-11-20
> ? ? ? Depends: ? xts(>=0.0-15),Defaults
> ? ? ? Suggests: ?DBI,RMySQL,TTR,fSeries,its
> ? ? ? LazyLoad: ?yes
> ? ? ? License: ? GPL-3
> ? ? ? URL: ? ? ? http://www.quantmod.com
> ? ? ? URL: ? ? ? http://quantmod.r-forge.r-project.org
> -------
>
> As far as I can tell is quantmod now installed in different places
> and is only using the old version. :-/
>
> any further hint's ?
> regards mane
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Jeffrey Ryan
jeffrey.ryan at insightalgo.com

ia: insight algorithmics
www.insightalgo.com


From mane.desk at googlemail.com  Fri Apr 16 01:50:32 2010
From: mane.desk at googlemail.com (Immanuel)
Date: Fri, 16 Apr 2010 01:50:32 +0200
Subject: [R-SIG-Finance] Re How to install latest version of quantmod?
In-Reply-To: <o2je8e755251004151637y1ac6978r127332bc0eb31332@mail.gmail.com>
References: <4BC7A075.7020502@gmail.com>
	<o2je8e755251004151637y1ac6978r127332bc0eb31332@mail.gmail.com>
Message-ID: <4BC7A648.3000404@gmail.com>

sessionInfo(), great I didn't know about that.
haha, so I actually had the latest version running all the time
and just didn't know it... thank for pointing this out! saved me
some time

Jeff Ryan wrote:
> That is a tragically bad documentation lag ;-)
>
> The main help file isn't automatically generated (noted, and I will
> fix).  Try sessionInfo()
>
>   
>> sessionInfo()
>>     
> R version 2.10.1 (2009-12-14)
> i386-apple-darwin10.0.0
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] quantmod_0.3-14 TTR_0.20-1      Defaults_1.1-1  xts_0.7-1
> [5] zoo_1.6-2
>
> loaded via a namespace (and not attached):
> [1] grid_2.10.1     lattice_0.17-26 tools_2.10.1
>   
>
>
> On Thu, Apr 15, 2010 at 6:25 PM, Immanuel <mane.desk at googlemail.com> wrote:
>   
>> Hey Jeff,
>>
>> thanks for your fast answer.
>>
>>     
>>> install.packages("quantmod", repos="http://R-Forge.R-project.org")
>>>       
>> Warning in install.packages("quantmod", repos =
>> "http://R-Forge.R-project.org") :
>>  argument 'lib' is missing: using
>> '/home/flyingimmi/R/i486-pc-linux-gnu-library/2.10'
>> trying URL 'http://R-Forge.R-project.org/src/contrib/quantmod_0.3-14.tar.gz'
>> Content type 'application/x-gzip' length 118790 bytes (116 Kb)
>> opened URL
>> ==================================================
>> downloaded 116 Kb
>>
>> * installing *source* package ?quantmod? ...
>> ** R
>> ** demo
>> ** preparing package for lazy loading
>> Loading required package: zoo
>> Creating a new generic function for "summary" in "quantmod"
>> ** help
>> *** installing help indices
>> ** building package indices ...
>> * DONE (quantmod)
>> ---- cut---
>> help(quantmod)
>>
>>       Package:   quantmod
>>       Type:      Package
>>       Version:   0.3-8
>>       Date:      2007-11-20
>>       Depends:   xts(>=0.0-15),Defaults
>>       Suggests:  DBI,RMySQL,TTR,fSeries,its
>>       LazyLoad:  yes
>>       License:   GPL-3
>>       URL:       http://www.quantmod.com
>>       URL:       http://quantmod.r-forge.r-project.org
>> -------
>>
>> As far as I can tell is quantmod now installed in different places
>> and is only using the old version. :-/
>>
>> any further hint's ?
>> regards mane
>>
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>     
>
>
>
>


From maiagx at gmail.com  Fri Apr 16 02:59:15 2010
From: maiagx at gmail.com (Charlotte Maia)
Date: Fri, 16 Apr 2010 12:59:15 +1200
Subject: [R-SIG-Finance] Weighted Sums of Dependent Random Variables
Message-ID: <w2jb7bfe54e1004151759l3d7f4feclc26f6b6562ebb067@mail.gmail.com>

Hi,

I'm interested in computing weighted sums of dependent random
variables (here, where the depended random variables are modelled
using a multivariate ECDF or related model).
The weighted sum is also a random variable itself, and I'm interested
in modelling, visualising, etc the (univariate) distribution of the
weighted sum.

I'm not really an expert on finance, plus I'm new to this particular
mailing list, so I apologise if there are any obvious theoretical
flaws in what I'm proposing, or if this topic has been discussed in
detail here or somewhere else.

However, if anyone is aware of any relatively general (and hopefully
open access) literature on distributions of weighted sums of dependent
random variables, where there are very liberal assumptions about the
multivariate distribution, could you please point me in the right
direction, it would truly be appreciated.


kind regards
-- 
Charlotte Maia
http://sites.google.com/site/maiagx


From wuyuehe at yahoo.cn  Fri Apr 16 09:30:36 2010
From: wuyuehe at yahoo.cn (=?utf-8?B?5LqU5pyI5rKz?=)
Date: Fri, 16 Apr 2010 15:30:36 +0800 (CST)
Subject: [R-SIG-Finance] BEKK help?
Message-ID: <156000.57868.qm@web92409.mail.cnh.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100416/9e547df3/attachment.pl>

From matthieu.stigler at gmail.com  Fri Apr 16 09:41:30 2010
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Fri, 16 Apr 2010 09:41:30 +0200
Subject: [R-SIG-Finance] BEKK help?
In-Reply-To: <156000.57868.qm@web92409.mail.cnh.yahoo.com>
References: <156000.57868.qm@web92409.mail.cnh.yahoo.com>
Message-ID: <4BC814AA.1050100@gmail.com>

because their authors put it on a usual place, sourceforge, see there. 
See also presentation at last user R conference, in Rennes 2009

??? a ?crit :
> hi all!
>
> Why I can't find "mgarch" and "mgarchBEKK" packages by "RSiteSearch" function in R homepage. I want to know where? I can find these two pachages??  
>
> Thank You!
> wuyuehe
>
>
>       
> 	[[alternative HTML version deleted]]
>
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From wuyuehe at yahoo.cn  Fri Apr 16 11:11:10 2010
From: wuyuehe at yahoo.cn (=?gb2312?B?zuXUwrrT?=)
Date: Fri, 16 Apr 2010 17:11:10 +0800 (CST)
Subject: [R-SIG-Finance] (no subject)
Message-ID: <186533.31962.qm@web92413.mail.cnh.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100416/a2c21b49/attachment.pl>

From dengyishuo at 163.com  Fri Apr 16 11:16:13 2010
From: dengyishuo at 163.com (=?gbk?B?tcvSu8u2?=)
Date: Fri, 16 Apr 2010 17:16:13 +0800 (CST)
Subject: [R-SIG-Finance] (no subject)
In-Reply-To: <186533.31962.qm@web92413.mail.cnh.yahoo.com>
References: <186533.31962.qm@web92413.mail.cnh.yahoo.com>
Message-ID: <19449a3.fd37.12805e772dc.Coremail.dengyishuo@163.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100416/65c1768e/attachment.pl>

From renault.gautier at gmail.com  Fri Apr 16 11:56:18 2010
From: renault.gautier at gmail.com (Gautier RENAULT)
Date: Fri, 16 Apr 2010 11:56:18 +0200
Subject: [R-SIG-Finance] restrictions on cointegration relations - urca
	package
In-Reply-To: <15491784.1844611271273003088.JavaMail.defaultUser@defaultHost>
References: <15491784.1844611271273003088.JavaMail.defaultUser@defaultHost>
Message-ID: <o2l5bfb4a971004160256t3f0804cfx3c83251a25b12529@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100416/118d13ac/attachment.pl>

From arun.kumar.saha at gmail.com  Fri Apr 16 12:11:10 2010
From: arun.kumar.saha at gmail.com (Arun.stat)
Date: Fri, 16 Apr 2010 02:11:10 -0800 (PST)
Subject: [R-SIG-Finance] restrictions on cointegration relations - urca
	package
In-Reply-To: <o2l5bfb4a971004160256t3f0804cfx3c83251a25b12529@mail.gmail.com>
References: <15491784.1844611271273003088.JavaMail.defaultUser@defaultHost>
	<o2l5bfb4a971004160256t3f0804cfx3c83251a25b12529@mail.gmail.com>
Message-ID: <1271412670915-1977688.post@n4.nabble.com>


well, I am not very sure whether the package ucra has the capability to put
any sort of restrictions on the parameters neither any other econometrics
software has this. But definitely you can handle those issues if you can
write some few pieces of R code and obviously well familiar with the
underlying theory. I would recommend to read Lutkepohl(2006) to get some
idea how to estimate the coefficients under the restricted parameters space.
Right now I dont have the access on that material, otherwise perhaps I could
help you in details

 :(

Best,
-- 
View this message in context: http://n4.nabble.com/restrictions-on-cointegration-relations-urca-package-tp1840324p1977688.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From Pietro.Parodi at willis.com  Fri Apr 16 13:49:12 2010
From: Pietro.Parodi at willis.com (Parodi, Pietro)
Date: Fri, 16 Apr 2010 06:49:12 -0500
Subject: [R-SIG-Finance] nearest correlation matrix
Message-ID: <DDBB63721CFE714AB0F6426EBE95CCD105F96FA8@USNSH-I-EC52.int.dir.willis.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100416/1fa93a9d/attachment.pl>

From enricoschumann at yahoo.de  Fri Apr 16 14:14:57 2010
From: enricoschumann at yahoo.de (Enrico Schumann)
Date: Fri, 16 Apr 2010 14:14:57 +0200
Subject: [R-SIG-Finance] nearest correlation matrix
In-Reply-To: <DDBB63721CFE714AB0F6426EBE95CCD105F96FA8@USNSH-I-EC52.int.dir.willis.com>
Message-ID: <918538.69251.qm@smtp138.mail.ukl.yahoo.com>

here is one of the methods from rebonato/j?ckel
http://comisef.wikidot.com/tutorial:repairingcorrelation 

regards,
enrico
> -----Urspr?ngliche Nachricht-----
> Von: r-sig-finance-bounces at stat.math.ethz.ch 
> [mailto:r-sig-finance-bounces at stat.math.ethz.ch] Im Auftrag 
> von Parodi, Pietro
> Gesendet: Freitag, 16. April 2010 13:49
> An: r-sig-finance at stat.math.ethz.ch
> Betreff: [R-SIG-Finance] nearest correlation matrix
> 
> Hello,
>  
> does anybody know of any routine in R which calculates the 
> nearest correlation matrix to a given target matrix which not 
> positive-definite (e.g. methods by Rebonato and Jueckel, 
> Higham, etc)? I've googled it but haven't found anything in R.
>  
> Thanks!
>  
> Pete 
>  
> 
> ______________________________________________________________________
> 
> For information pertaining to Willis' email confidentiality 
> and monitoring policy, usage restrictions, or for specific 
> company registration and regulatory status information, 
> please visit http://www.willis.com/email_trailer.aspx
> 
> We are now able to offer our clients an encrypted email 
> capability for secure communication purposes. If you wish to 
> take advantage of this service or learn more about it, please 
> let me know or contact your Client Advocate for full details.
> ______________________________________________________________________
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R 
> questions should go.
> No virus found in this incoming message.
> Checked by AVG - www.avg.com
> Version: 9.0.801 / Virus Database: 271.1.1/2813 - Release 
> Date: 04/15/10 20:31:00
> 


From BChiquoine at tiff.org  Fri Apr 16 14:22:56 2010
From: BChiquoine at tiff.org (Chiquoine, Ben)
Date: Fri, 16 Apr 2010 08:22:56 -0400
Subject: [R-SIG-Finance] nearest correlation matrix
In-Reply-To: <918538.69251.qm@smtp138.mail.ukl.yahoo.com>
References: <DDBB63721CFE714AB0F6426EBE95CCD105F96FA8@USNSH-I-EC52.int.dir.willis.com>
	<918538.69251.qm@smtp138.mail.ukl.yahoo.com>
Message-ID: <E71E6D5B2274B341B26B6DF3D34D802803125FAE@vsw3exch2.tiff.local>

Pete,

Try the function nearcor {sfsmisc}.  It's an implementation of Higham's algorithm.

Ben

-----Original Message-----
From: r-sig-finance-bounces at stat.math.ethz.ch [mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of Enrico Schumann
Sent: Friday, April 16, 2010 8:15 AM
To: 'Parodi, Pietro'
Cc: r-sig-finance at stat.math.ethz.ch
Subject: Re: [R-SIG-Finance] nearest correlation matrix

here is one of the methods from rebonato/j?ckel
http://comisef.wikidot.com/tutorial:repairingcorrelation 

regards,
enrico
> -----Urspr?ngliche Nachricht-----
> Von: r-sig-finance-bounces at stat.math.ethz.ch 
> [mailto:r-sig-finance-bounces at stat.math.ethz.ch] Im Auftrag 
> von Parodi, Pietro
> Gesendet: Freitag, 16. April 2010 13:49
> An: r-sig-finance at stat.math.ethz.ch
> Betreff: [R-SIG-Finance] nearest correlation matrix
> 
> Hello,
>  
> does anybody know of any routine in R which calculates the 
> nearest correlation matrix to a given target matrix which not 
> positive-definite (e.g. methods by Rebonato and Jueckel, 
> Higham, etc)? I've googled it but haven't found anything in R.
>  
> Thanks!
>  
> Pete 
>  
> 
> ______________________________________________________________________
> 
> For information pertaining to Willis' email confidentiality 
> and monitoring policy, usage restrictions, or for specific 
> company registration and regulatory status information, 
> please visit http://www.willis.com/email_trailer.aspx
> 
> We are now able to offer our clients an encrypted email 
> capability for secure communication purposes. If you wish to 
> take advantage of this service or learn more about it, please 
> let me know or contact your Client Advocate for full details.
> ______________________________________________________________________
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R 
> questions should go.
> No virus found in this incoming message.
> Checked by AVG - www.avg.com
> Version: 9.0.801 / Virus Database: 271.1.1/2813 - Release 
> Date: 04/15/10 20:31:00
> 

_______________________________________________
R-SIG-Finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.
___________________________________________
This message and any attached documents contain
information which may be confidential, subject to 
privilege or exempt from disclosure under applicable
law. These materials are solely for the use of the 
intended recipient. If you are not the intended 
recipient of this transmission, you are hereby 
notified that any distribution, disclosure, printing, 
copying, storage, modification or the taking of any
action in reliance upon this transmission is strictly
prohibited. Delivery of this message to any person
other than the intended recipient shall not
compromise or waive such confidentiality, privilege
or exemption from disclosure as to this 
communication. 

If you have received this communication in error, 
please notify the sender immediately and delete
this message from your system. 



From konradhoppe at hotmail.de  Fri Apr 16 23:02:36 2010
From: konradhoppe at hotmail.de (Konrad Hoppe)
Date: Fri, 16 Apr 2010 23:02:36 +0200
Subject: [R-SIG-Finance] GARCH - Models
Message-ID: <SNT114-DS183DBF1487FC0973458B8BD00E0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100416/cfb7c4ea/attachment.pl>

From mane.desk at googlemail.com  Sat Apr 17 00:21:01 2010
From: mane.desk at googlemail.com (Immanuel)
Date: Sat, 17 Apr 2010 00:21:01 +0200
Subject: [R-SIG-Finance] quantmod visual feedback from strategy testing
In-Reply-To: <SNT114-DS183DBF1487FC0973458B8BD00E0@phx.gbl>
References: <SNT114-DS183DBF1487FC0973458B8BD00E0@phx.gbl>
Message-ID: <4BC8E2CD.1090303@gmail.com>

An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100417/9904ada6/attachment.html>

From mane.desk at googlemail.com  Sat Apr 17 00:25:08 2010
From: mane.desk at googlemail.com (Immanuel)
Date: Sat, 17 Apr 2010 00:25:08 +0200
Subject: [R-SIG-Finance] quantmod visual feedback from strategy testing (
	plain text )
In-Reply-To: <SNT114-DS183DBF1487FC0973458B8BD00E0@phx.gbl>
References: <SNT114-DS183DBF1487FC0973458B8BD00E0@phx.gbl>
Message-ID: <4BC8E3C4.10608@gmail.com>

Hey all,

I tested a simple trading system from:
http://blog.fosstrading.com/2009/04/testing-rsi2-with-r.html

(i)

    What I'm missing is some visual feedback on the chart plot about the
    entry / exit
    signals and open positions.

    I would like to have an arrow over or below the bar where the signal
    occurred to
    indicate long or short signals and a doted line to indicate an open
    position?
    Whats the best way to accomplish this?

(ii)

    I like to code some simple Dow trend detection with visual feedback.
    How can I choose the chart background or bar at every bar according
    to the trend direction ?
    Is there an indicator for x-bar high or x-bar low? ( I need this to
    identify important high or lows)


I'm quite curious if and how all this can be realized in quantmod,
therefore I'm
happy about any hint in the right direction.

Regards mane


From cmdr_rogue at hotmail.com  Sat Apr 17 13:06:42 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Sat, 17 Apr 2010 07:06:42 -0400
Subject: [R-SIG-Finance] GARCH - Models
In-Reply-To: <SNT114-DS183DBF1487FC0973458B8BD00E0@phx.gbl>
References: <SNT114-DS183DBF1487FC0973458B8BD00E0@phx.gbl>
Message-ID: <BLU0-SMTP14DFD808FEB9B425D2B7E5E20D0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100417/913f7afa/attachment.pl>

From podvalov at gmx.net  Sat Apr 17 13:07:29 2010
From: podvalov at gmx.net (Peter Keller)
Date: Sat, 17 Apr 2010 14:07:29 +0300
Subject: [R-SIG-Finance] Problem with solver solveRquadprog in fPortfolio
Message-ID: <4BC99671.30900@gmx.net>

Hi there,

I have a serious problem with solver solveRquadprog in fPortfolio.
Unfortunately, solveRquadprog is the standard solver in fPortfolio and
pretty essential.

How to replicate the problem on my PC:

library(fPortfolio)
library(fEcofin)

library(Rsymphony)
library(lpSolveAPI)

djiData = as.timeSeries(DowJones30)
djiData.ret <- 100 * returns(djiData)
frontier <- portfolioFrontier(djiData.ret)

I get then the error message:

Error in .Fortran("qpgen2", as.double(Dmat), dvec = as.double(dvec),
as.integer(n),  :
Incorrect number of arguments (16), expecting 17 for qpgen2

I?ve installed R version 2.10.1 on Windows 7 (32 bit) with updated CTV
Finance.

Interestingly, this problem only appeared after a while. Initially,
everything worked fine, but suddenly, without doing something special,
this error appeared. I already completely uninstalled R, rebooted the PC
and re-installed R (including updated CTV Finance), but it did not help
at all.

I highly would appreciate any help. I already spent quite a lot of time
to find a solution, but there is not a lot of help available.

Best regards,

Peter Keller


From cmdr_rogue at hotmail.com  Sat Apr 17 13:10:56 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Sat, 17 Apr 2010 07:10:56 -0400
Subject: [R-SIG-Finance] nearest correlation matrix
In-Reply-To: <DDBB63721CFE714AB0F6426EBE95CCD105F96FA8@USNSH-I-EC52.int.dir.willis.com>
References: <DDBB63721CFE714AB0F6426EBE95CCD105F96FA8@USNSH-I-EC52.int.dir.willis.com>
Message-ID: <BLU0-SMTP295F0BD0285F75E7D6C398E20D0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100417/446f03c4/attachment.pl>

From chalabi at phys.ethz.ch  Sat Apr 17 13:12:42 2010
From: chalabi at phys.ethz.ch (Yohan Chalabi)
Date: Sat, 17 Apr 2010 13:12:42 +0200
Subject: [R-SIG-Finance] Problem with solver solveRquadprog in fPortfolio
In-Reply-To: <4BC99671.30900@gmx.net>
References: <4BC99671.30900@gmx.net>
Message-ID: <20100417131242.3b68750b@mimi>

>>>> "PK" == Peter Keller <podvalov at gmx.net>
>>>> on Sat, 17 Apr 2010 14:07:29 +0300

   PK> Hi there,
   PK>
   PK> I have a serious problem with solver solveRquadprog in
   PK> fPortfolio.
   PK> Unfortunately, solveRquadprog is the standard solver in
   PK> fPortfolio and
   PK> pretty essential.
   PK>
   PK> How to replicate the problem on my PC:
   PK>
   PK> library(fPortfolio)
   PK> library(fEcofin)
   PK>
   PK> library(Rsymphony)
   PK> library(lpSolveAPI)
   PK>
   PK> djiData = as.timeSeries(DowJones30)
   PK> djiData.ret <- 100 * returns(djiData)
   PK> frontier <- portfolioFrontier(djiData.ret)
   PK>
   PK> I get then the error message:
   PK>
   PK> Error in .Fortran("qpgen2", as.double(Dmat), dvec =
   PK> as.double(dvec),
   PK> as.integer(n), :
   PK> Incorrect number of arguments (16), expecting 17 for qpgen2
   PK>
   PK> I?ve installed R version 2.10.1 on Windows 7 (32 bit) with
   PK> updated CTV
   PK> Finance.
   PK>
   PK> Interestingly, this problem only appeared after a
   PK> while. Initially,
   PK> everything worked fine, but suddenly, without doing something
   PK> special,
   PK> this error appeared. I already completely uninstalled R,
   PK> rebooted the PC
   PK> and re-installed R (including updated CTV Finance), but it
   PK> did not help
   PK> at all.
   PK>
   PK> I highly would appreciate any help. I already spent quite a
   PK> lot of time
   PK> to find a solution, but there is not a lot of help available.
   PK>
   PK> Best regards,
   PK>
   PK> Peter Keller


Hi Peter,

The mentioned error is due to a change in the new version of
quadprog package and a direct call of the Fortran routine in fPortfolio.

We have already updated the devel version of fPortfolio on R-forge. As
soon as we have run all test, we will upload a new version of
fPortfolio to CRAN.

You can either wait until the new pkg is on CRAN or compile it from
source and get the devel code from R-forge. More info 
http://r-forge.r-project.org/scm/?group_id=156

Regards,
Yohan


-- 
PhD candidate
Swiss Federal Institute of Technology
Zurich

www.ethz.ch


From cmdr_rogue at hotmail.com  Sat Apr 17 13:16:55 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Sat, 17 Apr 2010 07:16:55 -0400
Subject: [R-SIG-Finance]
 =?utf-8?q?Estimation_of_Hull-White_One_-Factor_Mo?=
 =?utf-8?b?ZGVs4oCP?=
In-Reply-To: <SNT137-w48ECFF9BBD54E761967E23E81D0@phx.gbl>
References: <SNT137-w48ECFF9BBD54E761967E23E81D0@phx.gbl>
Message-ID: <BLU0-SMTP816C237E72451EE7D628A3E20D0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100417/1a86a0e5/attachment.pl>

From podvalov at gmx.net  Sat Apr 17 13:33:05 2010
From: podvalov at gmx.net (Peter Keller)
Date: Sat, 17 Apr 2010 14:33:05 +0300
Subject: [R-SIG-Finance] Problem with solver solveRquadprog in fPortfolio
In-Reply-To: <20100417131242.3b68750b@mimi>
References: <4BC99671.30900@gmx.net> <20100417131242.3b68750b@mimi>
Message-ID: <4BC99C71.2060503@gmx.net>

Yohan,

First of all thank you very much for your fast reply and clarification. 
I thought it could be an interface error, but of course I was not sure.

Do you have already a rough idea when the new version of fPortfolio will 
be released?

Have a nice weekend and best regards,

Peter

Yohan Chalabi wrote:
>>>>> "PK" == Peter Keller <podvalov at gmx.net>
>>>>> on Sat, 17 Apr 2010 14:07:29 +0300
> 
>    PK> Hi there,
>    PK>
>    PK> I have a serious problem with solver solveRquadprog in
>    PK> fPortfolio.
>    PK> Unfortunately, solveRquadprog is the standard solver in
>    PK> fPortfolio and
>    PK> pretty essential.
>    PK>
>    PK> How to replicate the problem on my PC:
>    PK>
>    PK> library(fPortfolio)
>    PK> library(fEcofin)
>    PK>
>    PK> library(Rsymphony)
>    PK> library(lpSolveAPI)
>    PK>
>    PK> djiData = as.timeSeries(DowJones30)
>    PK> djiData.ret <- 100 * returns(djiData)
>    PK> frontier <- portfolioFrontier(djiData.ret)
>    PK>
>    PK> I get then the error message:
>    PK>
>    PK> Error in .Fortran("qpgen2", as.double(Dmat), dvec =
>    PK> as.double(dvec),
>    PK> as.integer(n), :
>    PK> Incorrect number of arguments (16), expecting 17 for qpgen2
>    PK>
>    PK> I?ve installed R version 2.10.1 on Windows 7 (32 bit) with
>    PK> updated CTV
>    PK> Finance.
>    PK>
>    PK> Interestingly, this problem only appeared after a
>    PK> while. Initially,
>    PK> everything worked fine, but suddenly, without doing something
>    PK> special,
>    PK> this error appeared. I already completely uninstalled R,
>    PK> rebooted the PC
>    PK> and re-installed R (including updated CTV Finance), but it
>    PK> did not help
>    PK> at all.
>    PK>
>    PK> I highly would appreciate any help. I already spent quite a
>    PK> lot of time
>    PK> to find a solution, but there is not a lot of help available.
>    PK>
>    PK> Best regards,
>    PK>
>    PK> Peter Keller
> 
> 
> Hi Peter,
> 
> The mentioned error is due to a change in the new version of
> quadprog package and a direct call of the Fortran routine in fPortfolio.
> 
> We have already updated the devel version of fPortfolio on R-forge. As
> soon as we have run all test, we will upload a new version of
> fPortfolio to CRAN.
> 
> You can either wait until the new pkg is on CRAN or compile it from
> source and get the devel code from R-forge. More info 
> http://r-forge.r-project.org/scm/?group_id=156
> 
> Regards,
> Yohan
> 
>


From cmdr_rogue at hotmail.com  Sat Apr 17 13:38:31 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Sat, 17 Apr 2010 07:38:31 -0400
Subject: [R-SIG-Finance] Problem with solver solveRquadprog in fPortfolio
In-Reply-To: <4BC99C71.2060503@gmx.net>
References: <4BC99671.30900@gmx.net> <20100417131242.3b68750b@mimi>
	<4BC99C71.2060503@gmx.net>
Message-ID: <BLU0-SMTP834B73C478425D23A6B982E20D0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100417/ddb9d2ea/attachment.pl>

From podvalov at gmx.net  Sat Apr 17 14:08:33 2010
From: podvalov at gmx.net (Peter Keller)
Date: Sat, 17 Apr 2010 15:08:33 +0300
Subject: [R-SIG-Finance] Problem with solver solveRquadprog in fPortfolio
In-Reply-To: <BLU0-SMTP834B73C478425D23A6B982E20D0@phx.gbl>
References: <4BC99671.30900@gmx.net>
	<20100417131242.3b68750b@mimi>	<4BC99C71.2060503@gmx.net>
	<BLU0-SMTP834B73C478425D23A6B982E20D0@phx.gbl>
Message-ID: <4BC9A4C1.4060105@gmx.net>

Thanks for the suggestion. I already tried to change the solver in 
fPortfolio, but I was not yet successful.

As far as I know, you can change the solver in fPortfolio as follows:

...
Spec <- portfolioSpec()
setSolver(Spec) = "solveRquadprog"
...

But this exactly leads to the Fortran error (because it's using package 
"Rglpk"?)... So, how do I change the solver with setSolver(Spec) to use 
package "quadprog" correctly?

Unfortunately I did not find the correct function call in the fPortfolio 
eBook...

Thanks for your help in advance,

Peter

Sarbo wrote:
> In the meantime, why not use the "quadprog" package instead? It's pretty
> much the same thing, you just have to be a little more careful in
> setting out the optimisation problem.
> 
> On Sat, 2010-04-17 at 14:33 +0300, Peter Keller wrote:
> 
>> Yohan,
>>
>> First of all thank you very much for your fast reply and clarification. 
>> I thought it could be an interface error, but of course I was not sure.
>>
>> Do you have already a rough idea when the new version of fPortfolio will 
>> be released?
>>
>> Have a nice weekend and best regards,
>>
>> Peter
>>
>> Yohan Chalabi wrote:
>>>>>>> "PK" == Peter Keller <podvalov at gmx.net>
>>>>>>> on Sat, 17 Apr 2010 14:07:29 +0300
>>>    PK> Hi there,
>>>    PK>
>>>    PK> I have a serious problem with solver solveRquadprog in
>>>    PK> fPortfolio.
>>>    PK> Unfortunately, solveRquadprog is the standard solver in
>>>    PK> fPortfolio and
>>>    PK> pretty essential.
>>>    PK>
>>>    PK> How to replicate the problem on my PC:
>>>    PK>
>>>    PK> library(fPortfolio)
>>>    PK> library(fEcofin)
>>>    PK>
>>>    PK> library(Rsymphony)
>>>    PK> library(lpSolveAPI)
>>>    PK>
>>>    PK> djiData = as.timeSeries(DowJones30)
>>>    PK> djiData.ret <- 100 * returns(djiData)
>>>    PK> frontier <- portfolioFrontier(djiData.ret)
>>>    PK>
>>>    PK> I get then the error message:
>>>    PK>
>>>    PK> Error in .Fortran("qpgen2", as.double(Dmat), dvec =
>>>    PK> as.double(dvec),
>>>    PK> as.integer(n), :
>>>    PK> Incorrect number of arguments (16), expecting 17 for qpgen2
>>>    PK>
>>>    PK> I???ve installed R version 2.10.1 on Windows 7 (32 bit) with
>>>    PK> updated CTV
>>>    PK> Finance.
>>>    PK>
>>>    PK> Interestingly, this problem only appeared after a
>>>    PK> while. Initially,
>>>    PK> everything worked fine, but suddenly, without doing something
>>>    PK> special,
>>>    PK> this error appeared. I already completely uninstalled R,
>>>    PK> rebooted the PC
>>>    PK> and re-installed R (including updated CTV Finance), but it
>>>    PK> did not help
>>>    PK> at all.
>>>    PK>
>>>    PK> I highly would appreciate any help. I already spent quite a
>>>    PK> lot of time
>>>    PK> to find a solution, but there is not a lot of help available.
>>>    PK>
>>>    PK> Best regards,
>>>    PK>
>>>    PK> Peter Keller
>>>
>>>
>>> Hi Peter,
>>>
>>> The mentioned error is due to a change in the new version of
>>> quadprog package and a direct call of the Fortran routine in fPortfolio.
>>>
>>> We have already updated the devel version of fPortfolio on R-forge. As
>>> soon as we have run all test, we will upload a new version of
>>> fPortfolio to CRAN.
>>>
>>> You can either wait until the new pkg is on CRAN or compile it from
>>> source and get the devel code from R-forge. More info 
>>> http://r-forge.r-project.org/scm/?group_id=156
>>>
>>> Regards,
>>> Yohan
>>>
>>>
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From cmdr_rogue at hotmail.com  Sat Apr 17 14:15:24 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Sat, 17 Apr 2010 08:15:24 -0400
Subject: [R-SIG-Finance] Problem with solver solveRquadprog in fPortfolio
In-Reply-To: <4BC9A4C1.4060105@gmx.net>
References: <4BC99671.30900@gmx.net> <20100417131242.3b68750b@mimi>
	<4BC99C71.2060503@gmx.net>
	<BLU0-SMTP834B73C478425D23A6B982E20D0@phx.gbl>
	<4BC9A4C1.4060105@gmx.net>
Message-ID: <BLU0-SMTP35E81D1D66F27856F53FBFE20D0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100417/d6640e1f/attachment.pl>

From podvalov at gmx.net  Sat Apr 17 14:33:43 2010
From: podvalov at gmx.net (Peter Keller)
Date: Sat, 17 Apr 2010 15:33:43 +0300
Subject: [R-SIG-Finance] Problem with solver solveRquadprog in fPortfolio
In-Reply-To: <BLU0-SMTP35E81D1D66F27856F53FBFE20D0@phx.gbl>
References: <4BC99671.30900@gmx.net> <20100417131242.3b68750b@mimi>	
	<4BC99C71.2060503@gmx.net>
	<BLU0-SMTP834B73C478425D23A6B982E20D0@phx.gbl>	
	<4BC9A4C1.4060105@gmx.net>
	<BLU0-SMTP35E81D1D66F27856F53FBFE20D0@phx.gbl>
Message-ID: <4BC9AAA7.8020102@gmx.net>

Yes, it almost works, and I had "quadprog" already installed.

Unfortunately, after calling in my example (top post):

...
Spec <- portfolioSpec()
setSolver(Spec) <- "solve.QP"
frontier <- portfolioFrontier(djiData.ret, Spec)

I get now the error message:

Error in rep(0, q) : invalid 'times' argument

Tricky thing... Any idea what is the reason for that and how to solve 
it? Or better wait for new release of fPortfolio?

Kind regards,

Peter

Sarbo wrote:
> Try this:
> 
>     library(quadprog)
> 
>     Spec <- portfolioSpec()
>     setSolver(Spec) <- 'solve.QP'
> 
> "solve.QP " is the solver used by the "quadprog" package, but I suspect 
> you need to have the package loaded already in order for this to work. 
> However, since quadprog is part of the base R installation anyway, I 
> doubt you'll need to install it.
> 
> On Sat, 2010-04-17 at 15:08 +0300, Peter Keller wrote:
>> Thanks for the suggestion. I already tried to change the solver in 
>> fPortfolio, but I was not yet successful.
>>
>> As far as I know, you can change the solver in fPortfolio as follows:
>>
>> ...
>> Spec <- portfolioSpec()
>> setSolver(Spec) = "solveRquadprog"
>> ...
>>
>> But this exactly leads to the Fortran error (because it's using package 
>> "Rglpk"?)... So, how do I change the solver with setSolver(Spec) to use 
>> package "quadprog" correctly?
>>
>> Unfortunately I did not find the correct function call in the fPortfolio 
>> eBook...
>>
>> Thanks for your help in advance,
>>
>> Peter
>>
>> Sarbo wrote:
>> > In the meantime, why not use the "quadprog" package instead? It's pretty
>> > much the same thing, you just have to be a little more careful in
>> > setting out the optimisation problem.
>> > 
>> > On Sat, 2010-04-17 at 14:33 +0300, Peter Keller wrote:
>> > 
>> >> Yohan,
>> >>
>> >> First of all thank you very much for your fast reply and clarification. 
>> >> I thought it could be an interface error, but of course I was not sure.
>> >>
>> >> Do you have already a rough idea when the new version of fPortfolio will 
>> >> be released?
>> >>
>> >> Have a nice weekend and best regards,
>> >>
>> >> Peter
>> >>
>> >> Yohan Chalabi wrote:
>> >>>>>>> "PK" == Peter Keller <podvalov at gmx.net <mailto:podvalov at gmx.net>>
>> >>>>>>> on Sat, 17 Apr 2010 14:07:29 +0300
>> >>>    PK> Hi there,
>> >>>    PK>
>> >>>    PK> I have a serious problem with solver solveRquadprog in
>> >>>    PK> fPortfolio.
>> >>>    PK> Unfortunately, solveRquadprog is the standard solver in
>> >>>    PK> fPortfolio and
>> >>>    PK> pretty essential.
>> >>>    PK>
>> >>>    PK> How to replicate the problem on my PC:
>> >>>    PK>
>> >>>    PK> library(fPortfolio)
>> >>>    PK> library(fEcofin)
>> >>>    PK>
>> >>>    PK> library(Rsymphony)
>> >>>    PK> library(lpSolveAPI)
>> >>>    PK>
>> >>>    PK> djiData = as.timeSeries(DowJones30)
>> >>>    PK> djiData.ret <- 100 * returns(djiData)
>> >>>    PK> frontier <- portfolioFrontier(djiData.ret)
>> >>>    PK>
>> >>>    PK> I get then the error message:
>> >>>    PK>
>> >>>    PK> Error in .Fortran("qpgen2", as.double(Dmat), dvec =
>> >>>    PK> as.double(dvec),
>> >>>    PK> as.integer(n), :
>> >>>    PK> Incorrect number of arguments (16), expecting 17 for qpgen2
>> >>>    PK>
>> >>>    PK> I???ve installed R version 2.10.1 on Windows 7 (32 bit) with
>> >>>    PK> updated CTV
>> >>>    PK> Finance.
>> >>>    PK>
>> >>>    PK> Interestingly, this problem only appeared after a
>> >>>    PK> while. Initially,
>> >>>    PK> everything worked fine, but suddenly, without doing something
>> >>>    PK> special,
>> >>>    PK> this error appeared. I already completely uninstalled R,
>> >>>    PK> rebooted the PC
>> >>>    PK> and re-installed R (including updated CTV Finance), but it
>> >>>    PK> did not help
>> >>>    PK> at all.
>> >>>    PK>
>> >>>    PK> I highly would appreciate any help. I already spent quite a
>> >>>    PK> lot of time
>> >>>    PK> to find a solution, but there is not a lot of help available.
>> >>>    PK>
>> >>>    PK> Best regards,
>> >>>    PK>
>> >>>    PK> Peter Keller
>> >>>
>> >>>
>> >>> Hi Peter,
>> >>>
>> >>> The mentioned error is due to a change in the new version of
>> >>> quadprog package and a direct call of the Fortran routine in fPortfolio.
>> >>>
>> >>> We have already updated the devel version of fPortfolio on R-forge. As
>> >>> soon as we have run all test, we will upload a new version of
>> >>> fPortfolio to CRAN.
>> >>>
>> >>> You can either wait until the new pkg is on CRAN or compile it from
>> >>> source and get the devel code from R-forge. More info 
>> >>> http://r-forge.r-project.org/scm/?group_id=156
>> >>>
>> >>> Regards,
>> >>> Yohan
>> >>>
>> >>>
>> >> _______________________________________________
>> >> R-SIG-Finance at stat.math.ethz.ch <mailto:R-SIG-Finance at stat.math.ethz.ch> mailing list
>> >> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> >> -- Subscriber-posting only. If you want to post, subscribe first.
>> >> -- Also note that this is not the r-help list where general R questions should go.
>> > 
>> > 
>> > 
>> > 	[[alternative HTML version deleted]]
>> > 
>> > 
>> > 
>> > ------------------------------------------------------------------------
>> > 
>> > _______________________________________________
>> > R-SIG-Finance at stat.math.ethz.ch <mailto:R-SIG-Finance at stat.math.ethz.ch> mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions should go.
>>
>


From konradhoppe at hotmail.de  Sat Apr 17 14:36:12 2010
From: konradhoppe at hotmail.de (Konrad Hoppe)
Date: Sat, 17 Apr 2010 14:36:12 +0200
Subject: [R-SIG-Finance] GARCH - Models
In-Reply-To: <BLU0-SMTP14DFD808FEB9B425D2B7E5E20D0@phx.gbl>
Message-ID: <SNT114-DS395CC8AAB5322080A8D72D00D0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100417/026c8421/attachment.pl>

From josh.m.ulrich at gmail.com  Sat Apr 17 14:41:11 2010
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sat, 17 Apr 2010 07:41:11 -0500
Subject: [R-SIG-Finance] Problem with solver solveRquadprog in fPortfolio
In-Reply-To: <4BC9AAA7.8020102@gmx.net>
References: <4BC99671.30900@gmx.net> <20100417131242.3b68750b@mimi> 
	<4BC99C71.2060503@gmx.net>
	<BLU0-SMTP834B73C478425D23A6B982E20D0@phx.gbl> 
	<4BC9A4C1.4060105@gmx.net>
	<BLU0-SMTP35E81D1D66F27856F53FBFE20D0@phx.gbl> 
	<4BC9AAA7.8020102@gmx.net>
Message-ID: <r2i8cca69991004170541j4e1c64d7zae3f2d9daf997d31@mail.gmail.com>

On Sat, Apr 17, 2010 at 7:33 AM, Peter Keller <podvalov at gmx.net> wrote:
> Yes, it almost works, and I had "quadprog" already installed.
>
> Unfortunately, after calling in my example (top post):
>
> ...
> Spec <- portfolioSpec()
> setSolver(Spec) <- "solve.QP"
> frontier <- portfolioFrontier(djiData.ret, Spec)
>
> I get now the error message:
>
> Error in rep(0, q) : invalid 'times' argument
>
> Tricky thing... Any idea what is the reason for that and how to solve it? Or
> better wait for new release of fPortfolio?
>

Rather than waiting for the CRAN release, could you use the
development version on R-forge?
It's easy to install via:
install.packages("fPortfolio",repos="http://r-forge.r-project.org")

If you can't do that, you could always revert back to the previous
version of quadprog that worked with the current version of fPortfolio
on CRAN.

Best,
--
Joshua Ulrich
FOSS Trading: www.fosstrading.com



> Kind regards,
>
> Peter
>
> Sarbo wrote:
>>
>> Try this:
>>
>> ? ?library(quadprog)
>>
>> ? ?Spec <- portfolioSpec()
>> ? ?setSolver(Spec) <- 'solve.QP'
>>
>> "solve.QP " is the solver used by the "quadprog" package, but I suspect
>> you need to have the package loaded already in order for this to work.
>> However, since quadprog is part of the base R installation anyway, I doubt
>> you'll need to install it.
>>
>> On Sat, 2010-04-17 at 15:08 +0300, Peter Keller wrote:
>>>
>>> Thanks for the suggestion. I already tried to change the solver in
>>> fPortfolio, but I was not yet successful.
>>>
>>> As far as I know, you can change the solver in fPortfolio as follows:
>>>
>>> ...
>>> Spec <- portfolioSpec()
>>> setSolver(Spec) = "solveRquadprog"
>>> ...
>>>
>>> But this exactly leads to the Fortran error (because it's using package
>>> "Rglpk"?)... So, how do I change the solver with setSolver(Spec) to use
>>> package "quadprog" correctly?
>>>
>>> Unfortunately I did not find the correct function call in the fPortfolio
>>> eBook...
>>>
>>> Thanks for your help in advance,
>>>
>>> Peter
>>>
>>> Sarbo wrote:
>>> > In the meantime, why not use the "quadprog" package instead? It's
>>> > pretty
>>> > much the same thing, you just have to be a little more careful in
>>> > setting out the optimisation problem.
>>> > > On Sat, 2010-04-17 at 14:33 +0300, Peter Keller wrote:
>>> > >> Yohan,
>>> >>
>>> >> First of all thank you very much for your fast reply and
>>> >> clarification. >> I thought it could be an interface error, but of course I
>>> >> was not sure.
>>> >>
>>> >> Do you have already a rough idea when the new version of fPortfolio
>>> >> will >> be released?
>>> >>
>>> >> Have a nice weekend and best regards,
>>> >>
>>> >> Peter
>>> >>
>>> >> Yohan Chalabi wrote:
>>> >>>>>>> "PK" == Peter Keller <podvalov at gmx.net <mailto:podvalov at gmx.net>>
>>> >>>>>>> on Sat, 17 Apr 2010 14:07:29 +0300
>>> >>> ? ?PK> Hi there,
>>> >>> ? ?PK>
>>> >>> ? ?PK> I have a serious problem with solver solveRquadprog in
>>> >>> ? ?PK> fPortfolio.
>>> >>> ? ?PK> Unfortunately, solveRquadprog is the standard solver in
>>> >>> ? ?PK> fPortfolio and
>>> >>> ? ?PK> pretty essential.
>>> >>> ? ?PK>
>>> >>> ? ?PK> How to replicate the problem on my PC:
>>> >>> ? ?PK>
>>> >>> ? ?PK> library(fPortfolio)
>>> >>> ? ?PK> library(fEcofin)
>>> >>> ? ?PK>
>>> >>> ? ?PK> library(Rsymphony)
>>> >>> ? ?PK> library(lpSolveAPI)
>>> >>> ? ?PK>
>>> >>> ? ?PK> djiData = as.timeSeries(DowJones30)
>>> >>> ? ?PK> djiData.ret <- 100 * returns(djiData)
>>> >>> ? ?PK> frontier <- portfolioFrontier(djiData.ret)
>>> >>> ? ?PK>
>>> >>> ? ?PK> I get then the error message:
>>> >>> ? ?PK>
>>> >>> ? ?PK> Error in .Fortran("qpgen2", as.double(Dmat), dvec =
>>> >>> ? ?PK> as.double(dvec),
>>> >>> ? ?PK> as.integer(n), :
>>> >>> ? ?PK> Incorrect number of arguments (16), expecting 17 for qpgen2
>>> >>> ? ?PK>
>>> >>> ? ?PK> I???ve installed R version 2.10.1 on Windows 7 (32 bit) with
>>> >>> ? ?PK> updated CTV
>>> >>> ? ?PK> Finance.
>>> >>> ? ?PK>
>>> >>> ? ?PK> Interestingly, this problem only appeared after a
>>> >>> ? ?PK> while. Initially,
>>> >>> ? ?PK> everything worked fine, but suddenly, without doing something
>>> >>> ? ?PK> special,
>>> >>> ? ?PK> this error appeared. I already completely uninstalled R,
>>> >>> ? ?PK> rebooted the PC
>>> >>> ? ?PK> and re-installed R (including updated CTV Finance), but it
>>> >>> ? ?PK> did not help
>>> >>> ? ?PK> at all.
>>> >>> ? ?PK>
>>> >>> ? ?PK> I highly would appreciate any help. I already spent quite a
>>> >>> ? ?PK> lot of time
>>> >>> ? ?PK> to find a solution, but there is not a lot of help available.
>>> >>> ? ?PK>
>>> >>> ? ?PK> Best regards,
>>> >>> ? ?PK>
>>> >>> ? ?PK> Peter Keller
>>> >>>
>>> >>>
>>> >>> Hi Peter,
>>> >>>
>>> >>> The mentioned error is due to a change in the new version of
>>> >>> quadprog package and a direct call of the Fortran routine in
>>> >>> fPortfolio.
>>> >>>
>>> >>> We have already updated the devel version of fPortfolio on R-forge.
>>> >>> As
>>> >>> soon as we have run all test, we will upload a new version of
>>> >>> fPortfolio to CRAN.
>>> >>>
>>> >>> You can either wait until the new pkg is on CRAN or compile it from
>>> >>> source and get the devel code from R-forge. More info >>>
>>> >>> http://r-forge.r-project.org/scm/?group_id=156
>>> >>>
>>> >>> Regards,
>>> >>> Yohan
>>> >>>
>>> >>>
>>> >> _______________________________________________
>>> >> R-SIG-Finance at stat.math.ethz.ch
>>> >> <mailto:R-SIG-Finance at stat.math.ethz.ch> mailing list
>>> >> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> >> -- Subscriber-posting only. If you want to post, subscribe first.
>>> >> -- Also note that this is not the r-help list where general R
>>> >> questions should go.
>>> > > > > ? ? ? ? [[alternative HTML version deleted]]
>>> > > > >
>>> > > > > ------------------------------------------------------------------------
>>> > > _______________________________________________
>>> > R-SIG-Finance at stat.math.ethz.ch
>>> > <mailto:R-SIG-Finance at stat.math.ethz.ch> mailing list
>>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> > -- Subscriber-posting only. If you want to post, subscribe first.
>>> > -- Also note that this is not the r-help list where general R questions
>>> > should go.
>>>
>>
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.


From podvalov at gmx.net  Sat Apr 17 14:56:55 2010
From: podvalov at gmx.net (Peter Keller)
Date: Sat, 17 Apr 2010 15:56:55 +0300
Subject: [R-SIG-Finance] Problem with solver solveRquadprog in fPortfolio
In-Reply-To: <r2i8cca69991004170541j4e1c64d7zae3f2d9daf997d31@mail.gmail.com>
References: <4BC99671.30900@gmx.net> <20100417131242.3b68750b@mimi>
	<4BC99C71.2060503@gmx.net>
	<BLU0-SMTP834B73C478425D23A6B982E20D0@phx.gbl>
	<4BC9A4C1.4060105@gmx.net>
	<BLU0-SMTP35E81D1D66F27856F53FBFE20D0@phx.gbl>
	<4BC9AAA7.8020102@gmx.net>
	<r2i8cca69991004170541j4e1c64d7zae3f2d9daf997d31@mail.gmail.com>
Message-ID: <4BC9B017.2090801@gmx.net>

Yes, this works properly! Thank you very much!

Have a nice weekend!

Warm regards,

Peter Keller

Joshua Ulrich wrote:
> On Sat, Apr 17, 2010 at 7:33 AM, Peter Keller <podvalov at gmx.net> wrote:
>> Yes, it almost works, and I had "quadprog" already installed.
>>
>> Unfortunately, after calling in my example (top post):
>>
>> ...
>> Spec <- portfolioSpec()
>> setSolver(Spec) <- "solve.QP"
>> frontier <- portfolioFrontier(djiData.ret, Spec)
>>
>> I get now the error message:
>>
>> Error in rep(0, q) : invalid 'times' argument
>>
>> Tricky thing... Any idea what is the reason for that and how to solve it? Or
>> better wait for new release of fPortfolio?
>>
> 
> Rather than waiting for the CRAN release, could you use the
> development version on R-forge?
> It's easy to install via:
> install.packages("fPortfolio",repos="http://r-forge.r-project.org")
> 
> If you can't do that, you could always revert back to the previous
> version of quadprog that worked with the current version of fPortfolio
> on CRAN.
> 
> Best,
> --
> Joshua Ulrich
> FOSS Trading: www.fosstrading.com
> 
> 
> 
>> Kind regards,
>>
>> Peter
>>
>> Sarbo wrote:
>>> Try this:
>>>
>>>    library(quadprog)
>>>
>>>    Spec <- portfolioSpec()
>>>    setSolver(Spec) <- 'solve.QP'
>>>
>>> "solve.QP " is the solver used by the "quadprog" package, but I suspect
>>> you need to have the package loaded already in order for this to work.
>>> However, since quadprog is part of the base R installation anyway, I doubt
>>> you'll need to install it.
>>>
>>> On Sat, 2010-04-17 at 15:08 +0300, Peter Keller wrote:
>>>> Thanks for the suggestion. I already tried to change the solver in
>>>> fPortfolio, but I was not yet successful.
>>>>
>>>> As far as I know, you can change the solver in fPortfolio as follows:
>>>>
>>>> ...
>>>> Spec <- portfolioSpec()
>>>> setSolver(Spec) = "solveRquadprog"
>>>> ...
>>>>
>>>> But this exactly leads to the Fortran error (because it's using package
>>>> "Rglpk"?)... So, how do I change the solver with setSolver(Spec) to use
>>>> package "quadprog" correctly?
>>>>
>>>> Unfortunately I did not find the correct function call in the fPortfolio
>>>> eBook...
>>>>
>>>> Thanks for your help in advance,
>>>>
>>>> Peter
>>>>
>>>> Sarbo wrote:
>>>>> In the meantime, why not use the "quadprog" package instead? It's
>>>>> pretty
>>>>> much the same thing, you just have to be a little more careful in
>>>>> setting out the optimisation problem.
>>>>>> On Sat, 2010-04-17 at 14:33 +0300, Peter Keller wrote:
>>>>>>> Yohan,
>>>>>> First of all thank you very much for your fast reply and
>>>>>> clarification. >> I thought it could be an interface error, but of course I
>>>>>> was not sure.
>>>>>>
>>>>>> Do you have already a rough idea when the new version of fPortfolio
>>>>>> will >> be released?
>>>>>>
>>>>>> Have a nice weekend and best regards,
>>>>>>
>>>>>> Peter
>>>>>>
>>>>>> Yohan Chalabi wrote:
>>>>>>>>>>> "PK" == Peter Keller <podvalov at gmx.net <mailto:podvalov at gmx.net>>
>>>>>>>>>>> on Sat, 17 Apr 2010 14:07:29 +0300
>>>>>>>    PK> Hi there,
>>>>>>>    PK>
>>>>>>>    PK> I have a serious problem with solver solveRquadprog in
>>>>>>>    PK> fPortfolio.
>>>>>>>    PK> Unfortunately, solveRquadprog is the standard solver in
>>>>>>>    PK> fPortfolio and
>>>>>>>    PK> pretty essential.
>>>>>>>    PK>
>>>>>>>    PK> How to replicate the problem on my PC:
>>>>>>>    PK>
>>>>>>>    PK> library(fPortfolio)
>>>>>>>    PK> library(fEcofin)
>>>>>>>    PK>
>>>>>>>    PK> library(Rsymphony)
>>>>>>>    PK> library(lpSolveAPI)
>>>>>>>    PK>
>>>>>>>    PK> djiData = as.timeSeries(DowJones30)
>>>>>>>    PK> djiData.ret <- 100 * returns(djiData)
>>>>>>>    PK> frontier <- portfolioFrontier(djiData.ret)
>>>>>>>    PK>
>>>>>>>    PK> I get then the error message:
>>>>>>>    PK>
>>>>>>>    PK> Error in .Fortran("qpgen2", as.double(Dmat), dvec =
>>>>>>>    PK> as.double(dvec),
>>>>>>>    PK> as.integer(n), :
>>>>>>>    PK> Incorrect number of arguments (16), expecting 17 for qpgen2
>>>>>>>    PK>
>>>>>>>    PK> I???ve installed R version 2.10.1 on Windows 7 (32 bit) with
>>>>>>>    PK> updated CTV
>>>>>>>    PK> Finance.
>>>>>>>    PK>
>>>>>>>    PK> Interestingly, this problem only appeared after a
>>>>>>>    PK> while. Initially,
>>>>>>>    PK> everything worked fine, but suddenly, without doing something
>>>>>>>    PK> special,
>>>>>>>    PK> this error appeared. I already completely uninstalled R,
>>>>>>>    PK> rebooted the PC
>>>>>>>    PK> and re-installed R (including updated CTV Finance), but it
>>>>>>>    PK> did not help
>>>>>>>    PK> at all.
>>>>>>>    PK>
>>>>>>>    PK> I highly would appreciate any help. I already spent quite a
>>>>>>>    PK> lot of time
>>>>>>>    PK> to find a solution, but there is not a lot of help available.
>>>>>>>    PK>
>>>>>>>    PK> Best regards,
>>>>>>>    PK>
>>>>>>>    PK> Peter Keller
>>>>>>>
>>>>>>>
>>>>>>> Hi Peter,
>>>>>>>
>>>>>>> The mentioned error is due to a change in the new version of
>>>>>>> quadprog package and a direct call of the Fortran routine in
>>>>>>> fPortfolio.
>>>>>>>
>>>>>>> We have already updated the devel version of fPortfolio on R-forge.
>>>>>>> As
>>>>>>> soon as we have run all test, we will upload a new version of
>>>>>>> fPortfolio to CRAN.
>>>>>>>
>>>>>>> You can either wait until the new pkg is on CRAN or compile it from
>>>>>>> source and get the devel code from R-forge. More info >>>
>>>>>>> http://r-forge.r-project.org/scm/?group_id=156
>>>>>>>
>>>>>>> Regards,
>>>>>>> Yohan
>>>>>>>
>>>>>>>
>>>>>> _______________________________________________
>>>>>> R-SIG-Finance at stat.math.ethz.ch
>>>>>> <mailto:R-SIG-Finance at stat.math.ethz.ch> mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>>> -- Also note that this is not the r-help list where general R
>>>>>> questions should go.
>>>>>>>>         [[alternative HTML version deleted]]
>>>>>>>>
>>>>>>>> ------------------------------------------------------------------------
>>>>>> _______________________________________________
>>>>> R-SIG-Finance at stat.math.ethz.ch
>>>>> <mailto:R-SIG-Finance at stat.math.ethz.ch> mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>> -- Also note that this is not the r-help list where general R questions
>>>>> should go.
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>


From cmdr_rogue at hotmail.com  Sat Apr 17 14:58:21 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Sat, 17 Apr 2010 08:58:21 -0400
Subject: [R-SIG-Finance] GARCH - Models
In-Reply-To: <SNT114-DS395CC8AAB5322080A8D72D00D0@phx.gbl>
References: <SNT114-DS395CC8AAB5322080A8D72D00D0@phx.gbl>
Message-ID: <BLU0-SMTP98F03014F56F08D8AA5651E20D0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100417/ff211b01/attachment.pl>

From konradhoppe at hotmail.de  Sat Apr 17 17:29:52 2010
From: konradhoppe at hotmail.de (Konrad Hoppe)
Date: Sat, 17 Apr 2010 17:29:52 +0200
Subject: [R-SIG-Finance] GARCH - Models
In-Reply-To: <BLU0-SMTP98F03014F56F08D8AA5651E20D0@phx.gbl>
Message-ID: <SNT114-DS197A3CC9A7B26EE5D17F14D00D0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100417/708fb6ff/attachment.pl>

From konradhoppe at hotmail.de  Sat Apr 17 19:11:04 2010
From: konradhoppe at hotmail.de (Konrad Hoppe)
Date: Sat, 17 Apr 2010 19:11:04 +0200
Subject: [R-SIG-Finance] GARCH - Models
In-Reply-To: <SNT114-DS197A3CC9A7B26EE5D17F14D00D0@phx.gbl>
Message-ID: <SNT114-DS240DC4C8600D1703B86811D00D0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100417/a0d3ad9f/attachment.pl>

From cmdr_rogue at hotmail.com  Sat Apr 17 19:11:23 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Sat, 17 Apr 2010 13:11:23 -0400
Subject: [R-SIG-Finance] GARCH - Models
In-Reply-To: <SNT114-DS197A3CC9A7B26EE5D17F14D00D0@phx.gbl>
References: <SNT114-DS197A3CC9A7B26EE5D17F14D00D0@phx.gbl>
Message-ID: <BLU0-SMTP55BF2860C53DE48BF980CCE20D0@phx.gbl>

I can see your problem right away- there's no noise factor. Everything
that comes out of your model is purely deterministic- no stochastic
component to it whatsoever.

See this bit of code?

for(t in 2:length(v2)){

> 
>             v2[t] <- garch.coefs[1] + garch.coefs[2] * (r[t-1])^2 +
> garch.coefs[3] * v2[t-1]
> 
>             r[t] <- sqrt(v2[t])*r[t-1]
> 
> }

In order for this stochastic process to work, there has to be a driving
white noise factor. It's important to note the the return series itself
is considered to be essentially just a random process, the precise
nature of which depends on the conditional distribution that you
specify.

Try the version in the code I've attached instead. I don't use the
quantmod package, simply because I've never needed it- there are other
ways to get the job done.

Oh, and I made a slight error in the references I provided- you'll need
Hull Ch.19.

I hope that helps.

Regards,

Sarbo

On Sat, 2010-04-17 at 17:29 +0200, Konrad Hoppe wrote:
> Hi,
> 
> first of all, thank you for being patient with me, 
> 
> I?ve now implemented your example, but I simply don?t get any valid
> result, as you can see in the plot-call at the end of the following
> snippet:
> 
>  
> 
> install.packages("quantmod")
> 
> library(quantmod)
> 
>  
> 
> from.dat <- as.Date("01/01/91", format="%m/%d/%y")
> 
> to.dat <- as.Date(Sys.Date(), format="%m/%d/%y")
> 
> getSymbols("^GDAXI", src="yahoo", from = from.dat, to = to.dat)
> 
>  
> 
> daxTs <- ts(Ad(GDAXI))
> 
> garch.coefs <- summary(garch(diff(daxTs), order=c(1,1),
> trace=F))$coef[,1]
> 
>  
> 
> v2 <- vector(length=length(diff(daxTs)))
> 
> r <- vector(length=length(diff(daxTs)))
> 
> v2[1] <- rnorm(1)
> 
> r[1] <- rnorm(1)
> 
>  
> 
> for(t in 2:length(v2)){
> 
>             v2[t] <- garch.coefs[1] + garch.coefs[2] * (r[t-1])^2 +
> garch.coefs[3] * v2[t-1]
> 
>             r[t] <- sqrt(v2[t])*r[t-1]
> 
> }
> 
> plot.ts(r)            
> 
>  
> 
> I don?t get it what I?m doing wrong, since I?m just simulating the
> estimated model formula? hope you have a clue,
> 
>  
> 
> konrad
> 
>  
> 
> 
>                                    
> ______________________________________________________________________
> 
> Von: Sarbo [mailto:cmdr_rogue at hotmail.com] 
> Gesendet: Samstag, 17. April 2010 14:58
> An: Konrad Hoppe
> Cc: r-sig-finance at stat.math.ethz.ch
> Betreff: Re: AW: [R-SIG-Finance] GARCH - Models
> 
> 
> 
>  
> 
> Yes, it should be r_t = v_t * r_t-1
> 
> You're right about the residuals; however, that's only in the case of
> normalised residuals. The cool thing about the GARCH model is that you
> can apply different kinds of residual schemes; for instance, there is
> literature out there concerning GARCH models with t-distributed or
> even EVT-distributed residuals. As you move farther away from Gaussian
> assumptions the fitting becomes more difficult, but more robust as
> well.
> 
> On Sat, 2010-04-17 at 14:36 +0200, Konrad Hoppe wrote:
> 
> 
> 
> Hi Sarbo,
> 
> thank you for your help, I was looking for this formal representation
> you gave in your first formula, because I was just unable to conjunct
> the series of conditional variance with the outcome of the process and
> I couldn't found one.
> 
> But I think you got a small typing error there, you wrote r_t=v_t*r_t
> 
> I guess the the r_t is the sequence of returns and v_t is the
> conditional standard error, but I don't get the r_t on the
> righthandside of the equation. Is that right specified there?
> 
> And in addition I thought that the residual series of a garch model is
> the process divided by the estimated conditional variance function.
> And hence I assume a zero mean series, the residuals are standardized
> after that. Am I right?
> 
> Thanks for your help, 
> Konrad
> 
> -----Urspr?ngliche Nachricht----- 
> Von: r-sig-finance-bounces at stat.math.ethz.ch
> [mailto:r-sig-finance-bounces at stat.math.ethz.ch] Im Auftrag von Sarbo 
> Gesendet: Samstag, 17. April 2010 13:07 
> An: r-sig-finance at stat.math.ethz.ch 
> Betreff: Re: [R-SIG-Finance] GARCH - Models
> 
> Hi Konrad- I think you're using the GARCH model for the wrong purpose 
> here. It's important to remember that the GARCH model is primarily 
> designed to model returns and volatility. The best way to use a GARCH 
> model is to take a price series, calculate a return series from
> that , 
> and then generate the GARCH parameters using an R package like
> "fGARCH", 
> "tseries", or "mgarch".
> 
> Remember above all that a GARCH model is a mean-reverting model, and 
> that all you need to simulate (or predict) the future returns from a 
> GARCH model are the fitted model parameters. Since a GARCH model
> follows 
> the form:
> 
> r_t = v_t * r_t 
> v_t ^2 = l + a * r_t-1 ^2 + b * v_t-1 ^2 + e_t
> 
> it should become clear pretty quickly that once you have the three 
> parameters l, a, and b, you can set up the simulations in a
> spreadsheet 
> if necessary.
> 
> As for literature- I would always go with Hull's book, "Options, 
> Futures, & Other Derivatives", 6th edition or later, Ch.18. There's a 
> very nice explanation of the basics of the GARCH model in there.
> There's 
> also Shumway & Stoffer's "Time Series Analysis & Its Applications:
> With 
> R Examples", which is rather more relevant to what you're trying to
> do.
> 
> On Fri, 2010-04-16 at 23:02 +0200, Konrad Hoppe wrote:
> 
> > Hi list, 
> > 
> >  
> > 
> > Im still struggling with garch models. My first approach was doing
> a 
> > fourier analysis on the series and then try to explain the residuals
> with an 
> > ARIMA/GARCH model, but it turns out that this approach doesnt work
> well 
> > since the garch model doesnt add many information to the arima
> model. 
> > 
> > Ive found that the differenced series of the DAX, corrected for mean
> and 
> > slope has nearly the same residuals as the residuals from the
> fourier 
> > residuals, hence Ive littered the fourier approach but now Ive got
> a 
> > question concerning pure garch models. 
> > 
> >  
> > 
> > How can I use them to predict the series? I hope you have some
> pointers to 
> > literature, or examples for that. To make my actual approach clear,
> please 
> > check the following code snippet: 
> > 
> >  
> > 
> > library(quantmod) 
> > 
> > from.dat <- as.Date("01/01/91", format="%m/%d/%y") 
> > 
> > to.dat <- as.Date(Sys.Date(), format="%m/%d/%y") 
> > 
> > getSymbols("^GDAXI", src="yahoo", from = from.dat, to = to.dat) 
> > 
> >  
> > 
> > daxTs <- ts(Ad(GDAXI)) 
> > 
> > time <- c(1:length(daxTs)) 
> > 
> > tsData <- daxTs - lm(daxTs ~ time)$fitted.values 
> > 
> > diffData <- diff(tsData) 
> > 
> >  
> > 
> > garch.resids <- garch(diffData, order=c(1,1), trace=F)$residuals 
> > 
> > garch.resids[which(is.na(garch.resids))] <- 0 
> > 
> > plot.ts(garch.resids) 
> > 
> >  
> > 
> > as you can see in the plot, there is only white noise in the
> standardized 
> > residual series, but actually Ive no idea how this information could
> help 
> > me to predict the series. So it seems to me that the model works
> quite well, 
> > but Ive no clue how this information could help me with the
> prediction. 
> > 
> >  
> > 
> > all the best 
> > 
> > Konrad 
> > 
> > 
> >       [[alternative HTML version deleted]] 
> > 
> > _______________________________________________ 
> > R-SIG-Finance at stat.math.ethz.ch mailing list 
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance 
> > -- Subscriber-posting only. If you want to post, subscribe first. 
> > -- Also note that this is not the r-help list where general R
> questions should go.
> 
> 
> 
>         [[alternative HTML version deleted]]
> 
> _______________________________________________ 
> R-SIG-Finance at stat.math.ethz.ch mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance 
> -- Subscriber-posting only. If you want to post, subscribe first. 
> -- Also note that this is not the r-help list where general R
> questions should go.
> 
>  
> 
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100417/4b40d85b/attachment.html>
-------------- next part --------------
#Load packages:
library(fImport)
library(fGarch)

#Get data:
from <- as.Date('01/01/91', format = '%m/%d/%y')
to <- as.Date(Sys.Date() - 1, format = '%m/%d/%y')
DAX <- yahooSeries('^GDAXI', from = from, to = to)
prices <- rev(DAX[,6])
i <- 2:length(prices)
rets <- log(prices[i] / prices[i-1])

#Plot prices & returns:
par(mfrow = c(1,2))
ts.plot(prices)
ts.plot(rets)

#Fit a GARCH(1,1) model to the returns:
fit <- garchFit(data = rets)
summary(fit)

#If you want a selection of plots for this fit, use the function below:
plot(fit)

#Simulate a GARCH(1,1) model using the fitted parameters:
fitcoef <- fit at fit$par
model <- list(mu = fitcoef[1], omega = fitcoef[2], alpha = fitcoef[3], beta = fitcoef[4])
spec <- garchSpec(model)
sim <- garchSim(spec, n = 500)

#Plot the simulated GARCH(1,1) values:
ts.plot(sim)

From konradhoppe at hotmail.de  Sat Apr 17 19:30:20 2010
From: konradhoppe at hotmail.de (Konrad Hoppe)
Date: Sat, 17 Apr 2010 19:30:20 +0200
Subject: [R-SIG-Finance] GARCH - Models
In-Reply-To: <BLU0-SMTP55BF2860C53DE48BF980CCE20D0@phx.gbl>
Message-ID: <SNT114-DS17CB23ED4B733208324A2BD00D0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100417/92f02245/attachment.pl>

From bogaso.christofer at gmail.com  Sun Apr 18 18:01:07 2010
From: bogaso.christofer at gmail.com (Bogaso)
Date: Sun, 18 Apr 2010 08:01:07 -0800 (PST)
Subject: [R-SIG-Finance] A Value at Risk question
Message-ID: <1271606467198-2014925.post@n4.nabble.com>


Hi all, I need to calculate Value at Risk in Parametric setup for a typical
client defined exotic portfolio.

Suppose currently I own 10 units of some asset say it is A and in next 10
days (say, "i" which runs from 1 to 10) and I would sell each unit of "A" in
next 10 days, and put the proceeding in some risk free bond for (30-i) days,
I assume there would not be any day-by-day change in the interest offerings
by that risk free Bond i.e. a non-stochastic nature of risk free rate is
assumed.

My goal is to calculate 1-day VaR under Parametric setup at time "t=0" for
that portfolio. Would it be like simple "-1.96*10*S(0)*sigma"? Your help
will be highly appreciated.

Thanks,
-- 
View this message in context: http://n4.nabble.com/A-Value-at-Risk-question-tp2014925p2014925.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From bogaso.christofer at gmail.com  Sun Apr 18 22:18:32 2010
From: bogaso.christofer at gmail.com (Bogaso Christofer)
Date: Mon, 19 Apr 2010 01:48:32 +0530
Subject: [R-SIG-Finance] A Value at Risk question
In-Reply-To: <ea1393f8-f468-4efb-808c-cb267f05cbbb@email.android.com>
References: <ea1393f8-f468-4efb-808c-cb267f05cbbb@email.android.com>
Message-ID: <4bcb64f1.5544f10a.77bb.ffff843a@mx.google.com>

Thanks Brian for your suggestion. However I could not get actually what you said. Would you be more specific? I would be more happy if I can understand the theory rather than just to get a number.

Thanks,

-----Original Message-----
From: Brian G. Peterson [mailto:brian at braverock.com] 
Sent: 18 April 2010 23:53
To: Bogaso
Subject: Re: [R-SIG-Finance] A Value at Risk question

Use Return.rebalancing and VaR functions.

"Bogaso" <bogaso.christofer at gmail.com> wrote:

>
>Hi all, I need to calculate Value at Risk in Parametric setup for a typical
>client defined exotic portfolio.
>
>Suppose currently I own 10 units of some asset say it is A and in next 10
>days (say, "i" which runs from 1 to 10) and I would sell each unit of "A" in
>next 10 days, and put the proceeding in some risk free bond for (30-i) days,
>I assume there would not be any day-by-day change in the interest offerings
>by that risk free Bond i.e. a non-stochastic nature of risk free rate is
>assumed.
>
>My goal is to calculate 1-day VaR under Parametric setup at time "t=0" for
>that portfolio. Would it be like simple "-1.96*10*S(0)*sigma"? Your help
>will be highly appreciated.
>
>Thanks,
>-- 
>View this message in context: http://n4.nabble.com/A-Value-at-Risk-question-tp2014925p2014925.html
>Sent from the Rmetrics mailing list archive at Nabble.com.
>
>_______________________________________________
>R-SIG-Finance at stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>-- Subscriber-posting only. If you want to post, subscribe first.
>-- Also note that this is not the r-help list where general R questions should go.

-- 
Sent from my Android phone with K-9 Mail. Please excuse my brevity.


From ajayshah at mayin.org  Sun Apr 18 22:27:28 2010
From: ajayshah at mayin.org (Ajay Shah)
Date: Mon, 19 Apr 2010 01:57:28 +0530
Subject: [R-SIG-Finance] A zoo question: what does this warning mean?
Message-ID: <20100418202728.GJ1539@ajay-shahs-macbook-pro.local>

I'm producing a zoo object through a for loop which repeatedly cbinds
one more object to a main object X:

  X <- NULL
  for (i in 1:100) {
    X <- cbind(X, make.a.column(i))
  }

Everything seems to be fine. But when the loop finishes, I get this error:

  In merge.zoo(..., all = all, fill = fill, suffixes = suffixes, retclass = "zoo") :
    length of suffixes and does not match number of merged objects

What does this mean? Should I be worried?

-- 
Ajay Shah                                      http://www.mayin.org/ajayshah  
ajayshah at mayin.org                             http://ajayshahblog.blogspot.com
<*(:-? - wizard who doesn't know the answer.


From ggrothendieck at gmail.com  Sun Apr 18 22:36:37 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sun, 18 Apr 2010 16:36:37 -0400
Subject: [R-SIG-Finance] A zoo question: what does this warning mean?
In-Reply-To: <20100418202728.GJ1539@ajay-shahs-macbook-pro.local>
References: <20100418202728.GJ1539@ajay-shahs-macbook-pro.local>
Message-ID: <s2z971536df1004181336u23d60360j4169385637668b6b@mail.gmail.com>

I assume you got a warning rather than an error.  It relates to the
column names that are produced.   You could also try this:

   do.call(merge, lapply(1:100, make.a.column))

Need a reproducible example to say more about the specific problem.


On Sun, Apr 18, 2010 at 4:27 PM, Ajay Shah <ajayshah at mayin.org> wrote:
> I'm producing a zoo object through a for loop which repeatedly cbinds
> one more object to a main object X:
>
> ?X <- NULL
> ?for (i in 1:100) {
> ? ?X <- cbind(X, make.a.column(i))
> ?}
>
> Everything seems to be fine. But when the loop finishes, I get this error:
>
> ?In merge.zoo(..., all = all, fill = fill, suffixes = suffixes, retclass = "zoo") :
> ? ?length of suffixes and does not match number of merged objects
>
> What does this mean? Should I be worried?
>
> --
> Ajay Shah ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?http://www.mayin.org/ajayshah
> ajayshah at mayin.org ? ? ? ? ? ? ? ? ? ? ? ? ? ? http://ajayshahblog.blogspot.com
> <*(:-? - wizard who doesn't know the answer.
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From Achim.Zeileis at uibk.ac.at  Mon Apr 19 02:23:01 2010
From: Achim.Zeileis at uibk.ac.at (Achim Zeileis)
Date: Mon, 19 Apr 2010 02:23:01 +0200 (CEST)
Subject: [R-SIG-Finance] A zoo question: what does this warning mean?
In-Reply-To: <20100418202728.GJ1539@ajay-shahs-macbook-pro.local>
References: <20100418202728.GJ1539@ajay-shahs-macbook-pro.local>
Message-ID: <alpine.DEB.2.00.1004190220430.5495@paninaro.uibk.ac.at>

On Mon, 19 Apr 2010, Ajay Shah wrote:

> I'm producing a zoo object through a for loop which repeatedly cbinds
> one more object to a main object X:
>
>  X <- NULL
>  for (i in 1:100) {
>    X <- cbind(X, make.a.column(i))
>  }
>
> Everything seems to be fine. But when the loop finishes, I get this error:
>
>  In merge.zoo(..., all = all, fill = fill, suffixes = suffixes, retclass = "zoo") :
>    length of suffixes and does not match number of merged objects
>
> What does this mean? Should I be worried?

It is because you initialize with

   X <- NULL

In fact, I'm surprised that this works at all because you're doing

   cbind(NULL, zoo_object)

and I didn't expect the dispatch to work correctly. Simply replace the 
initialization with

   X <- zoo(,)

then it should work correctly.

Best,
Z

> -- 
> Ajay Shah                                      http://www.mayin.org/ajayshah
> ajayshah at mayin.org                             http://ajayshahblog.blogspot.com
> <*(:-? - wizard who doesn't know the answer.
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From matthieu.stigler at gmail.com  Mon Apr 19 14:49:46 2010
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Mon, 19 Apr 2010 14:49:46 +0200
Subject: [R-SIG-Finance] How to use zooreg and zoo in same plot?
Message-ID: <4BCC516A.2010509@gmail.com>

Hi

I'm having problems showing two time series in a plot, when one is of 
class zoo and the other one zooreg.  I searched but did not find mention 
of this problem... do I do something wrong? How can I solve this? Thanks 
a lot!!

x.date <- as.Date(paste(2004, rep(1:12, each=8), 
rep(c(1,4,8,12,16,20,25,28),6), sep = "-"))
x <- zoo(rnorm(96), x.date)
z<-zooreg(runif(12), start=c(2004,1), freq=12)
y<-zooreg(runif(4), start=c(2004,1), freq=4)

#try different plot methods:
plot(cbind(x,z)) #does not work
plot(cbind(y,z)) #show only z, probably because of point 9 in zoo-FAQ?
plot(cbind(y,z), type="p") #then works!

plot(x)
lines(z,col=2) #z not ploted
points(z,col=2) #z not ploted

plot(z)
lines(y,col=2) #work!


From ggrothendieck at gmail.com  Mon Apr 19 15:16:04 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 19 Apr 2010 09:16:04 -0400
Subject: [R-SIG-Finance] How to use zooreg and zoo in same plot?
In-Reply-To: <4BCC516A.2010509@gmail.com>
References: <4BCC516A.2010509@gmail.com>
Message-ID: <g2m971536df1004190616j451fc9afjeb4b460cc40613d@mail.gmail.com>

Note that if you run this you do get a message telling you precisely
what is wrong:

Warning message:
In merge.zoo(..., all = all, fill = fill, suffixes = suffixes,
retclass = "zoo") :
  Index vectors are of different classes: Date numeric

Try making them all Date class:

time(z) <- as.Date(as.yearmon(time(z)))
time(y) <- as.Date(as.yearqtr(time(y)))
plot(na.approx(cbind(x, y, z)))


On Mon, Apr 19, 2010 at 8:49 AM, Matthieu Stigler
<matthieu.stigler at gmail.com> wrote:
> Hi
>
> I'm having problems showing two time series in a plot, when one is of class
> zoo and the other one zooreg. ?I searched but did not find mention of this
> problem... do I do something wrong? How can I solve this? Thanks a lot!!
>
> x.date <- as.Date(paste(2004, rep(1:12, each=8),
> rep(c(1,4,8,12,16,20,25,28),6), sep = "-"))
> x <- zoo(rnorm(96), x.date)
> z<-zooreg(runif(12), start=c(2004,1), freq=12)
> y<-zooreg(runif(4), start=c(2004,1), freq=4)
>
> #try different plot methods:
> plot(cbind(x,z)) #does not work
> plot(cbind(y,z)) #show only z, probably because of point 9 in zoo-FAQ?
> plot(cbind(y,z), type="p") #then works!
>
> plot(x)
> lines(z,col=2) #z not ploted
> points(z,col=2) #z not ploted
>
> plot(z)
> lines(y,col=2) #work!
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


From ustaudinger at gmail.com  Tue Apr 20 16:53:34 2010
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Tue, 20 Apr 2010 16:53:34 +0200
Subject: [R-SIG-Finance] Multiple quantmod charts on one plot ?
Message-ID: <n2w65daf6a61004200753l2aa0075do1856872e3bfec27a@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100420/ed79f900/attachment.pl>

From jeff.a.ryan at gmail.com  Tue Apr 20 17:03:15 2010
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Tue, 20 Apr 2010 10:03:15 -0500
Subject: [R-SIG-Finance] Multiple quantmod charts on one plot ?
In-Reply-To: <n2w65daf6a61004200753l2aa0075do1856872e3bfec27a@mail.gmail.com>
References: <n2w65daf6a61004200753l2aa0075do1856872e3bfec27a@mail.gmail.com>
Message-ID: <m2je8e755251004200803j95d3e391i8e785d006b962983@mail.gmail.com>

Hi Ulrich,

One of the weaknesses to the original quantmod charts is the
difficulty in layout.

The (very dated) examples on the site are made by carefully managing
the layout (final expected layout) with the R function... 'layout'.

Search the list for some examples of how to do this, but suffice it to
say here that the answer revolves around 'layout' and passing
layout=NULL to the charting calls.

The newest R-forge version fixes all of this.  The code you have below
is essentially how you would use the new version, though lineChart and
co. are not yet available as wrappers.

chart_Series and add_TA will get most of what you want done, and
feedback is appreciated as I hope to get this to CRAN now that the
R/Finance conference is over.

Eventually the names will move back to the old chartSeries etc
convention, but for now to keep some sanity in old code, I will
provide both old and new functionality.

HTH
Jeff



On Tue, Apr 20, 2010 at 9:53 AM, Ulrich Staudinger
<ustaudinger at gmail.com> wrote:
> Hi there,
>
> I try to replicate the nice chart on http://www.quantmod.com/gallery/, but
> am stuck at putting several charts onto one plot.
>
> In traditional R, I would do:
>
> par(mfrow=c(2,1))
> plot(data1)
> plot(data2)
>
> ... but with quantmod, when I:
> par(mfrow=c(2,1))
> lineChart(data1)
> lineChart(data2)
>
> then I see only the line chart of data2.
>
> What do I have to use to put several line/candle/barcharts onto one plot
> pane?
>
> Thanks!
>
>
>
>
> --
> Kind regards,
> Ulrich B. Staudinger
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>



-- 
Jeffrey Ryan
jeffrey.ryan at insightalgo.com

ia: insight algorithmics
www.insightalgo.com


From cmdr_rogue at hotmail.com  Wed Apr 21 01:22:49 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Tue, 20 Apr 2010 19:22:49 -0400
Subject: [R-SIG-Finance] Multiple quantmod charts on one plot ?
In-Reply-To: <m2je8e755251004200803j95d3e391i8e785d006b962983@mail.gmail.com>
References: <n2w65daf6a61004200753l2aa0075do1856872e3bfec27a@mail.gmail.com>
	<m2je8e755251004200803j95d3e391i8e785d006b962983@mail.gmail.com>
Message-ID: <BLU0-SMTP69D2A2FF45407772B87EEBE20A0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100420/70f76946/attachment.pl>

From sergeyg at gmail.com  Wed Apr 21 15:12:52 2010
From: sergeyg at gmail.com (Sergey Goriatchev)
Date: Wed, 21 Apr 2010 15:12:52 +0200
Subject: [R-SIG-Finance] Problem with modified Var in PerformanceAnalytics?
Message-ID: <x2q7cb007bd1004210612y5eec1b9eq73bbde4a808080e3@mail.gmail.com>

Hello, everyone

I am calculating Cornish-Fisher VAR and I get an error message, so I
went in and did calculation by hand given the formula in the April 8,
2010 PerformanceAnalytics PDF
The two calculations do not match.
Am I blind and miss something obvious?

Thank you in advance for help!

Here is the code for an example:

library(PerformanceAnalytics)

Ra <- structure(c(0.00381225000000002, 0.01910025, 0.00866775000000002,
-0.00999375000000001, 0.0088140, -0.00122850000000003, 0.00286650000000001,
0.00760499999999998, 0.0026715, -0.00381224999999998, -0.00147225000000001,
0.000331499999999986, 0.00631800000000001, 0.00681525, 0.00448499999999998,
0.00428025000000001, -0.000555749999999994, -0.0189540000000000,
-0.000117000000000009, 0.00579149999999999, 0.005694, 0.000331500000000014,
0.000721500000000004, 0.000282749999999978, -0.000399750000000014,
0.016536, -0.00507974999999999, 0.00442649999999999, 0.00569399999999998,
-9.75000000002328e-06, -0.004719, 0.00773175, 0.00228150000000004,
-0.00635700000000002, 0.00163800000000003, 0.007449, 0.00535275000000001,
-0.00605474999999998, -0.00421199999999998, 0.0194610000000001,
0.0108127500000000, 0.0109102500000000, -0.0111930000000000,
0.0145665, -0.00220350000000003, 0.00364650000000005, -0.0134355,
0.0105202500000000, 0.0223665000000000, -0.0139035000000000,
-0.0076635, 0.00435824999999995, 0.00554774999999995, 0.09245925,
0.00257399999999992, 0.04094025, -0.00376349999999998, 0.00881278075224753,
0.00688591476689867, 0.0167352183579443, 0.00653643129435772,
0.0098458420745749, 0.0221513897096388, 0.00170018050184855,
0.0162582129024928, 0.0040719625229251, 0.0183583618801177,
0.00981248749367947,
-0.000320212636643245, 0.0113273034537261, 0.0138203348625449
), index = structure(c(12569, 12599, 12630, 12661, 12691, 12722,
12752, 12783, 12814, 12842, 12873, 12903, 12934, 12964, 12995,
13026, 13056, 13087, 13117, 13148, 13179, 13207, 13238, 13268,
13299, 13329, 13360, 13391, 13421, 13452, 13482, 13513, 13544,
13572, 13603, 13633, 13664, 13694, 13725, 13756, 13786, 13817,
13847, 13878, 13909, 13938, 13969, 13999, 14030, 14060, 14091,
14122, 14152, 14183, 14213, 14244, 14275, 14303, 14334, 14364,
14395, 14425, 14456, 14487, 14517, 14548, 14578, 14609, 14640,
14668, 14699), .Names = c("", "", "", "", "", "", "", "", "",
"", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "",
"", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "",
"", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "",
"", "", "", "", "", "", "", "", "", "", "", "", "", ""), class =
"Date"), class = "zoo")

#-----------------------------------

av <- mean(Ra)
std <- sd(Ra)
sk <- skewness(Ra)
kur <- kurtosis(Ra, method="excess")

zc <- qnorm(0.95)
zc2 <- zc^2
zc3 <- zc^3
sk2 <- sk^2

zcf <- zc+((zc2-1)*sk)/6+((zc3-3*zc)*kur)/24-((2*zc3-5*zc)*sk2)/36

CoFisherVAR <- -av-std*zcf
CoFisherVAR

VaR(Ra, method="modified")


From risk2009 at ath.forthnet.gr  Wed Apr 21 16:08:20 2010
From: risk2009 at ath.forthnet.gr (Research)
Date: Wed, 21 Apr 2010 17:08:20 +0300
Subject: [R-SIG-Finance] ttrTests cReturns and SMA rule
Message-ID: <4BCF06D4.4050404@ath.forthnet.gr>

Hi,

I am experimenting with the above mentioned package and the cReturns 
function. When I try to alter the rule from "macd4" as per the example 
to, say, SMA (moving average) I get:


     spData <- 
as.vector(getYahooData("SPY",start="19900101",end="20081231")[,"Close"])
     cr <- cReturns(spData, ttr = "sma", params=c(20))


 > spData <- 
as.vector(getYahooData("SPY",start="19900101",end="20081231")[,"Close"])
 >
 > cr <- cReturns(spData, ttr = "sma", params=c(20))
Error in ind[t - k] <- pos[t - k + 1] - pos[t - k] :
   replacement has length zero
 >

Any clues? Am I doing something wrong?

Thanks in advance,
Costas


From Mama_Attiglah at ssga.com  Wed Apr 21 17:53:37 2010
From: Mama_Attiglah at ssga.com (Attiglah, Mama)
Date: Wed, 21 Apr 2010 16:53:37 +0100
Subject: [R-SIG-Finance] timeSeries Error
Message-ID: <AD34C27D4F3A0649ACE5DB999EC62E50112ABAEA@LCPPW1089.corp.statestr.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100421/031cd84e/attachment.pl>

From bogaso.christofer at gmail.com  Wed Apr 21 19:33:30 2010
From: bogaso.christofer at gmail.com (Bogaso)
Date: Wed, 21 Apr 2010 09:33:30 -0800 (PST)
Subject: [R-SIG-Finance] A Value at Risk question
In-Reply-To: <4bcb64f1.5544f10a.77bb.ffff843a@mx.google.com>
References: <1271606467198-2014925.post@n4.nabble.com>
	<4bcb64f1.5544f10a.77bb.ffff843a@mx.google.com>
Message-ID: <1271871210794-2019332.post@n4.nabble.com>


Any answer please? I would really appreciate if someone can hint a better
idea on the approach to quantify risk on this portfolio. Any web-link will
also be very good.

Thanks,
-- 
View this message in context: http://n4.nabble.com/A-Value-at-Risk-question-tp2014925p2019332.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Wed Apr 21 19:45:22 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 21 Apr 2010 12:45:22 -0500
Subject: [R-SIG-Finance] A Value at Risk question
In-Reply-To: <1271871210794-2019332.post@n4.nabble.com>
References: <1271606467198-2014925.post@n4.nabble.com>	<4bcb64f1.5544f10a.77bb.ffff843a@mx.google.com>
	<1271871210794-2019332.post@n4.nabble.com>
Message-ID: <4BCF39B2.6050008@braverock.com>

On 04/21/2010 12:33 PM, Bogaso wrote:
> Any answer please? I would really appreciate if someone can hint a better
> idea on the approach to quantify risk on this portfolio. Any web-link will
> also be very good.
>
>    

see:

?VaR
?Return.rebalancing

I answered your question already. Theoretical details are covered in the 
documentation.

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From Heiko-Mayer at gmx.de  Wed Apr 21 22:48:55 2010
From: Heiko-Mayer at gmx.de (Heiko Mayer)
Date: Wed, 21 Apr 2010 22:48:55 +0200
Subject: [R-SIG-Finance] fPortfolio - SOCP not available?
Message-ID: <20100421204855.87740@gmx.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100421/c0f32a3d/attachment.pl>

From wuertz at itp.phys.ethz.ch  Thu Apr 22 00:50:04 2010
From: wuertz at itp.phys.ethz.ch (Diethelm Wuertz)
Date: Thu, 22 Apr 2010 00:50:04 +0200
Subject: [R-SIG-Finance] fPortfolio - SOCP not available?
In-Reply-To: <20100421204855.87740@gmx.net>
References: <20100421204855.87740@gmx.net>
Message-ID: <4BCF811C.7010906@itp.phys.ethz.ch>

Heiko Mayer wrote:
> Hi,
>
> I have tried to use the maxreturnPortfolio Function in fPortfolio using the 
> Rsocp solver. According to the ebook "Portfolio Optimization with 
> R/Rmetrics", Rsocp is the preferred solver for that function. It appears to 
> me that this solver is not installed (yet?)
>
> require(fPortfolio)
> lppData=100*LPP2005.RET[,1:6] 
> maxRetSpec=portfolioSpec() 
> setTargetRisk(maxRetSpec)=0.07 
> setSolver(maxRetSpec)=solveRsocp 
> maxreturnPortfolio(data=lppData,  spec = maxRetSpec, constraints = 
> "LongOnly") 
>   
Try

require(fPortfolio)
require(fPortfolioSolver)

lppData=100*LPP2005.RET[,1:6] 
maxRetSpec=portfolioSpec() 
setTargetRisk(maxRetSpec)=0.07 
setSolver(maxRetSpec)="solveRsocp"
efficientPortfolio(data=lppData, spec=maxRetSpec, constraints="LongOnly") 

Title:
 MV Efficient Portfolio 
 Estimator:         covEstimator 
 Solver:            solveRsocp 
 Optimize:          maxReturn 
 Constraints:       LongOnly 

Portfolio Weights:
   SBI    SPI    SII    LMI    MPI    ALT 
0.0000 0.0002 0.0833 0.2626 0.0000 0.1104 

Covariance Risk Budgets:
   SBI    SPI    SII    LMI    MPI    ALT 
0.0000 0.0014 0.1539 0.1124 0.0000 0.7324 

Target Return and Risks:
  mean     mu    Cov  Sigma   CVaR    VaR 
0.0129 0.0129 0.0700 0.0700 0.1413 0.0978 

Description:
 Thu Apr 22 00:46:10 2010 by user: Rmetrics




Have you heard from the Meielisalp Workhop?
Register at: www.rmetrics.org


regards
Diethelm Wuertz
> Using the code above, I am getting an error that solveRsocp is not known. I 
> have searched RForge and found the Rsocp::socp code. However, I was not 
> able to find any examples or manual. Has anybody used Rsocp so far and 
> could give me hint how to use it?
>
> Thanks,
> Heiko  
>     
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From wuertz at itp.phys.ethz.ch  Thu Apr 22 00:53:30 2010
From: wuertz at itp.phys.ethz.ch (Diethelm Wuertz)
Date: Thu, 22 Apr 2010 00:53:30 +0200
Subject: [R-SIG-Finance] timeSeries Error
In-Reply-To: <AD34C27D4F3A0649ACE5DB999EC62E50112ABAEA@LCPPW1089.corp.statestr.com>
References: <AD34C27D4F3A0649ACE5DB999EC62E50112ABAEA@LCPPW1089.corp.statestr.com>
Message-ID: <4BCF81EA.7050604@itp.phys.ethz.ch>

Attiglah, Mama wrote:
> Is anyone successful in using timeSeries function ? 
>
> All the R examples are not working, see the print below. 
>
> Anyone has experienced and fixed the pb? 
>
> Thanks 
>
>
>
>   
>> LPP = 100 * as.timeSeries(data(LPP2005REC))[, 1:3]
>>     
> Error in .local(.Object, ...) : 
>   unused argument(s) (Data = c(-0.000612745, -0.002762009, -0.001153092,
> -0.00323575, 0.00131097, 0.000539312, -0.002545021, 0.001003358,
> 0.000616951, 0.000693615, 0.000154071, 0.002999656, -0.001306436,
> -0.002232573, 0.001155402, -0.000230974, 0.000692761, 0.002075407,
> -0.000614487, -0.000307385, 0.001228973, 0.000613921, -0.000230176,
> -0.000537284, -0.001536689, 0.00307102, -0.000690158, 0.00176279,
> -0.000612792, 0.000765931, -0.000689312, -0.003223086, 0.00145935,
> 0.001303931, 0.000153292, 0.000689523, 0.000689048, 
>   
>> data(DowJones30)
>>    DowJones.ts = as.timeSeries(DowJones30)[, c("CAT", "GE", "IBM",
>>     
> "JPM", )]
> Error in .local(.Object, ...) : 
>   unused argument(s) (Data = c(5.92, 5.92, 5.88, 5.76, 5.72, 5.63, 5.53,
> 5.67, 5.68, 5.68, 5.7, 5.7, 5.97, 6.1, 6.14, 5.97, 6.1, 6.02, 6.05,
> 6.12, 6.31, 6.7, 6.64, 6.73, 6.87, 6.8, 6.75, 6.66, 6.73, 7.05, 6.88,
> 7.19, 6.97, 7.01, 6.97, 6.84, 6.74, 6.68, 6.55, 6.69, 6.6, 6.61, 6.78,
> 6.89, 6.98, 7.1, 6.98, 6.96, 6.92, 6.93, 7.11, 7.1, 7, 6.97, 6.83, 6.82,
> 6.71, 6.77, 6.79, 6.88, 6.86, 6.75, 6.65, 6.79, 6.75, 6.71, 6.69, 6.68,
> 6.62, 6.53, 6.5, 6.42, 6.74, 6.74, 7.01, 6.98, 6.95, 6.91, 7.02, 7.22,
> 7.02, 6.91, 6.97, 7.01, 
>   
>
>   


Try


libray(fPortfolio)

 > LPP = 100 * as.timeSeries(data(LPP2005REC))[, 1:3]
 > head(LPP)
GMT
                 SBI        SPI        SII
2005-11-01 -0.0612745  0.8414595 -0.3190926
2005-11-02 -0.2762009  0.2519342 -0.4117638
2005-11-03 -0.1153092  1.2707292 -0.5209409
2005-11-04 -0.3235750 -0.0702757 -0.1127165
2005-11-07  0.1310970  0.6205226 -0.1795839
2005-11-08  0.0539312  0.0329260  0.2103374

or just

 > LPP = LPP2005REC
 > head(LPP[, 1:3])
GMT
                   SBI          SPI          SII
2005-11-01 -0.000612745  0.008414595 -0.003190926
2005-11-02 -0.002762009  0.002519342 -0.004117638
2005-11-03 -0.001153092  0.012707292 -0.005209409
2005-11-04 -0.003235750 -0.000702757 -0.001127165
2005-11-07  0.001310970  0.006205226 -0.001795839
2005-11-08  0.000539312  0.000329260  0.002103374

# DowJones30 is in fEcofin

> library(fEcofin)
> data(DowJones30)
> names(DowJones30)
[1] "X.Y..m..d" "AA"        "AXP"       "T"         "BA"        
"CAT"      [7] "C"         "KO"        "DD"        "EK"        
"XOM"       "GE"       [13] "GM"        "HWP"       "HD"        
"HON"       "INTC"      "IBM"      [19] "IP"        "JPM"       
"JNJ"       "MCD"       "MRK"       "MSFT"     [25] "MMM"       
"MO"        "PG"        "SBC"       "UTX"       "WMT"      [31] "DIS"     
> DowJones.ts = as.timeSeries(DowJones30)
> head(DowJones.ts[, c("CAT", "GE", "IBM", "JPM")])
GMT
           CAT   GE   IBM  JPM
1990-12-31 9.30 4.63 27.86 2.67
1991-01-02 9.30 4.63 27.86 2.67
1991-01-03 9.15 4.53 27.95 2.67
1991-01-04 9.00 4.47 27.86 2.69
1991-01-07 8.87 4.40 27.39 2.58
1991-01-08 9.05 4.44 27.08 2.58


seems to work, at least for me.


listDescription(fPortfolio)

fPortfolio Description:

 Package:            fPortfolio
 Version:            2100.78
 Revision:           4422
 Date:               2009-09-28
 Title:              Rmetrics - Portfolio Selection and Optimization
 Author:             Rmetrics Core Team, Diethelm Wuertz
 Depends:            R (>= 2.7.0), methods, MASS, quadprog, robustbase,
                       timeDate, timeSeries, fBasics, fAssets (>=
                       2100.78), Rglpk
 Suggests:           RUnit, tcltk
 Maintainer:         Rmetrics Core Team <Rmetrics-core at r-project.org>
 Description:        Environment for teaching "Financial Engineering
                       and Computational Finance"
 NOTE:               SEVERAL PARTS ARE STILL PRELIMINARY AND MAY BE
                       CHANGED IN THE FUTURE. THIS TYPICALLY INCLUDES
                       FUNCTION AND ARGUMENT NAMES, AS WELL AS DEFAULTS
                       FOR ARGUMENTS AND RETURN VALUES.
 LazyLoad:           yes
 LazyData:           yes
 License:            GPL (>= 2)
 URL:                http://www.rmetrics.org
 Packaged:           2009-09-28 12:27:30 UTC; yankee
 Repository:         CRAN
 Date/Publication:   2009-09-28 14:10:22
 Built:              R 2.9.2; ; 2010-01-17 17:15:20 UTC; windows


 > listDescription(fEcofin)

fEcofin Description:

 Package:       fEcofin
 Version:       2100.77
 Revision:      4033
 Date:          2009-04-15
 Title:         Economic and Financial Data Sets
 Author:        Diethelm Wuertz and many others. See the SOURCE file
 Depends:       R (>= 2.6.0), utils
 Suggests:      RUnit
 Maintainer:    Rmetrics Core Team <Rmetrics-core at r-project.org>
 Description:   Environment for teaching "Financial Engineering and
                  Computational Finance"
 NOTE:          SEVERAL PARTS ARE STILL PRELIMINARY AND MAY BE CHANGED
                  IN THE FUTURE. THIS TYPICALLY INCLUDES FUNCTION AND
                  ARGUMENT NAMES, AS WELL AS DEFAULTS FOR ARGUMENTS AND
                  RETURN VALUES.
 LazyLoad:      yes
 LazyData:      yes
 License:       GPL (>= 2)
 URL:           http://www.rmetrics.org
 Built:         R 2.9.1; ; 2009-09-24 05:44:53 UTC; windows



does this help?

If you have further questions do not hesitate to contact me.

Have you heard from the Rmetrics Meielisalp Workshop?
Register at: www.rmetrics.org

kind regards
Diethelm Wuertz



> ----------
> Mama Attiglah, PhD 
> Quantitative Strategist 
> Muli Asset Class Solution & 
> Liability Driven Investment 
> State Street Global Advisors 
> London Canary Whraf 
> +44(0)203 395  6290 (Direct Line)
> +44(0)7500794963 (BB)
> +44 (0)203 395 2968 (Direct Fax) 
> --------- 
> Authorised and regulated by the Financial Services Authority. 
> State Street Global Advisors Limited, a company registered in England
> with company number 2509928 
> and VAT number 5576591 81 and whose registered office is...{{dropped:18}}
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>
>


From matthieu.stigler at gmail.com  Fri Apr 23 11:10:19 2010
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Fri, 23 Apr 2010 11:10:19 +0200
Subject: [R-SIG-Finance] zoo: how to find for series x closest day in series
	y?
Message-ID: <4BD163FB.1060205@gmail.com>

Hi

I have two series, x  and y, which don't have the same index. I then 
need to find which in y is the closest day in x. How can do I do this in 
a clean way? I have here a dirty for loop solution...
library(zoo)
#my series
x<-zoo(1:3,as.Date(c("1992-12-13", "1997-05-12", "1997-07-13")))
y<-zoo(1:5,as.Date(c("1992-12-15", "1992-12-16", 
"1997-05-10","1997-05-19", "1997-07-13")))

#but index is not always the same:
index(x)%in%index(y)

#my (dirty?) solution
xnew<-x
for(i in which(!index(x)%in%index(y))) 
xnew[i]<-which.min(abs(as.numeric(index(x)[i]-index(y))))
xnew

Is there something cleaner one could use to find the closest available day?

Thanks a lot!

Matthieu


From ggrothendieck at gmail.com  Fri Apr 23 11:50:22 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 23 Apr 2010 05:50:22 -0400
Subject: [R-SIG-Finance] zoo: how to find for series x closest day in
	series y?
In-Reply-To: <4BD163FB.1060205@gmail.com>
References: <4BD163FB.1060205@gmail.com>
Message-ID: <l2y971536df1004230250p145eb8dezb957465810452770@mail.gmail.com>

Example 4d on the sqldf home page shows how:
http://sqldf.googlecode.com

Here it is modified to work with your example data.

(Note that its important to use different column names in DFx and DFy
since it can otherwise foul up sqldf's class assignment heuristic in
this case.  If for some reason you must use names that are the same in
both DFx and DFy then use the method = "raw" argument to sqldf and
convert the date columns to Date yourself.  See sqldf home page for
more info.)

library(zoo)
library(sqldf)

x <- zoo(1:3,as.Date(c("1992-12-13", "1997-05-12", "1997-07-13")))
y <- zoo(1:5,as.Date(c("1992-12-15", "1992-12-16", "1997-05-10","1997-05-19",
"1997-07-13")))

DFx <- data.frame(x = coredata(x), xt = index(x))
DFy <- data.frame(y = coredata(y), yt = index(y))

out <- sqldf("select x, y, xt, yt from DFx x, DFy y
  where abs(xt - yt) =
  (select min(abs(xt - y2.yt)) from DFy y2)")

ix <- !duplicated(out[,3])
zoo(out[ix, 1:2], out[ix, 3])


On Fri, Apr 23, 2010 at 5:10 AM, Matthieu Stigler
<matthieu.stigler at gmail.com> wrote:
> Hi
>
> I have two series, x ?and y, which don't have the same index. I then need to
> find which in y is the closest day in x. How can do I do this in a clean
> way? I have here a dirty for loop solution...
> library(zoo)
> #my series
> x<-zoo(1:3,as.Date(c("1992-12-13", "1997-05-12", "1997-07-13")))
> y<-zoo(1:5,as.Date(c("1992-12-15", "1992-12-16", "1997-05-10","1997-05-19",
> "1997-07-13")))
>
> #but index is not always the same:
> index(x)%in%index(y)
>
> #my (dirty?) solution
> xnew<-x
> for(i in which(!index(x)%in%index(y)))
> xnew[i]<-which.min(abs(as.numeric(index(x)[i]-index(y))))
> xnew
>
> Is there something cleaner one could use to find the closest available day?
>
> Thanks a lot!
>
> Matthieu
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


From ggrothendieck at gmail.com  Fri Apr 23 12:46:37 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 23 Apr 2010 06:46:37 -0400
Subject: [R-SIG-Finance] zoo: how to find for series x closest day in
	series y?
In-Reply-To: <l2y971536df1004230250p145eb8dezb957465810452770@mail.gmail.com>
References: <4BD163FB.1060205@gmail.com>
	<l2y971536df1004230250p145eb8dezb957465810452770@mail.gmail.com>
Message-ID: <q2u971536df1004230346p26aed901q5c54daa3ea3d878d@mail.gmail.com>

Here is another solution where x and y are as in your post.

f <- function(u) which.min(abs(as.numeric(index(y)) - as.numeric(u)))
ix <- sapply(index(x), f)
cbind(x, y = coredata(y)[ix])

On Fri, Apr 23, 2010 at 5:50 AM, Gabor Grothendieck
<ggrothendieck at gmail.com> wrote:
> Example 4d on the sqldf home page shows how:
> http://sqldf.googlecode.com
>
> Here it is modified to work with your example data.
>
> (Note that its important to use different column names in DFx and DFy
> since it can otherwise foul up sqldf's class assignment heuristic in
> this case. ?If for some reason you must use names that are the same in
> both DFx and DFy then use the method = "raw" argument to sqldf and
> convert the date columns to Date yourself. ?See sqldf home page for
> more info.)
>
> library(zoo)
> library(sqldf)
>
> x <- zoo(1:3,as.Date(c("1992-12-13", "1997-05-12", "1997-07-13")))
> y <- zoo(1:5,as.Date(c("1992-12-15", "1992-12-16", "1997-05-10","1997-05-19",
> "1997-07-13")))
>
> DFx <- data.frame(x = coredata(x), xt = index(x))
> DFy <- data.frame(y = coredata(y), yt = index(y))
>
> out <- sqldf("select x, y, xt, yt from DFx x, DFy y
> ?where abs(xt - yt) =
> ?(select min(abs(xt - y2.yt)) from DFy y2)")
>
> ix <- !duplicated(out[,3])
> zoo(out[ix, 1:2], out[ix, 3])
>
>
> On Fri, Apr 23, 2010 at 5:10 AM, Matthieu Stigler
> <matthieu.stigler at gmail.com> wrote:
>> Hi
>>
>> I have two series, x ?and y, which don't have the same index. I then need to
>> find which in y is the closest day in x. How can do I do this in a clean
>> way? I have here a dirty for loop solution...
>> library(zoo)
>> #my series
>> x<-zoo(1:3,as.Date(c("1992-12-13", "1997-05-12", "1997-07-13")))
>> y<-zoo(1:5,as.Date(c("1992-12-15", "1992-12-16", "1997-05-10","1997-05-19",
>> "1997-07-13")))
>>
>> #but index is not always the same:
>> index(x)%in%index(y)
>>
>> #my (dirty?) solution
>> xnew<-x
>> for(i in which(!index(x)%in%index(y)))
>> xnew[i]<-which.min(abs(as.numeric(index(x)[i]-index(y))))
>> xnew
>>
>> Is there something cleaner one could use to find the closest available day?
>>
>> Thanks a lot!
>>
>> Matthieu
>>
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>


From brian at braverock.com  Fri Apr 23 13:44:34 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 23 Apr 2010 06:44:34 -0500
Subject: [R-SIG-Finance] Problem with modified Var in
	PerformanceAnalytics?
In-Reply-To: <x2q7cb007bd1004210612y5eec1b9eq73bbde4a808080e3@mail.gmail.com>
References: <x2q7cb007bd1004210612y5eec1b9eq73bbde4a808080e3@mail.gmail.com>
Message-ID: <4BD18822.1010801@braverock.com>

There are two discrepancies that we see on reviewing your example.

By far the biggest one is the use of p=.95.  In the calculation, it is 
actually \alpha, or 1-p, because we are concerned with the loss tail of 
the distribution, not the best 5% returns.  In the code, the function 
.checkalphaprob takes care of this.  When this is corrected, there is 
still a discrepancy, but it is very small.

The second arises from a discrepancy in the literature on comoments.  
Standardized skewness uses 1/T-1, and this is recommended for any short 
series.

Because the VaR/ES calculations in PerformanceAnalytics now also support 
component risk decomposition, we apply the standard centered 
mathematical moment calculation to calculate the third centered moment, 
which we then standardize as per the usual definition of skewness.  This 
effectively uses 1/T rather than 1/T-1.  This is a decision consistent 
with the literature on coskewness and cokurtosis, which are required for 
the component decomposition.  In longer series, the discrepancy would be 
miniscule, and in this example series, the discrepancy is still very small.

Kris and I will continue to discuss how to update the documentation, or 
perhaps the functions, to make this clearer.

Regards,

   - Brian

On 04/21/2010 08:12 AM, Sergey Goriatchev wrote:
> Hello, everyone
>
> I am calculating Cornish-Fisher VAR and I get an error message, so I
> went in and did calculation by hand given the formula in the April 8,
> 2010 PerformanceAnalytics PDF
> The two calculations do not match.
> Am I blind and miss something obvious?
>
> Thank you in advance for help!
>
> Here is the code for an example:
>
> library(PerformanceAnalytics)
>
> Ra<- structure(c(0.00381225000000002, 0.01910025, 0.00866775000000002,
> -0.00999375000000001, 0.0088140, -0.00122850000000003, 0.00286650000000001,
> 0.00760499999999998, 0.0026715, -0.00381224999999998, -0.00147225000000001,
> 0.000331499999999986, 0.00631800000000001, 0.00681525, 0.00448499999999998,
> 0.00428025000000001, -0.000555749999999994, -0.0189540000000000,
> -0.000117000000000009, 0.00579149999999999, 0.005694, 0.000331500000000014,
> 0.000721500000000004, 0.000282749999999978, -0.000399750000000014,
> 0.016536, -0.00507974999999999, 0.00442649999999999, 0.00569399999999998,
> -9.75000000002328e-06, -0.004719, 0.00773175, 0.00228150000000004,
> -0.00635700000000002, 0.00163800000000003, 0.007449, 0.00535275000000001,
> -0.00605474999999998, -0.00421199999999998, 0.0194610000000001,
> 0.0108127500000000, 0.0109102500000000, -0.0111930000000000,
> 0.0145665, -0.00220350000000003, 0.00364650000000005, -0.0134355,
> 0.0105202500000000, 0.0223665000000000, -0.0139035000000000,
> -0.0076635, 0.00435824999999995, 0.00554774999999995, 0.09245925,
> 0.00257399999999992, 0.04094025, -0.00376349999999998, 0.00881278075224753,
> 0.00688591476689867, 0.0167352183579443, 0.00653643129435772,
> 0.0098458420745749, 0.0221513897096388, 0.00170018050184855,
> 0.0162582129024928, 0.0040719625229251, 0.0183583618801177,
> 0.00981248749367947,
> -0.000320212636643245, 0.0113273034537261, 0.0138203348625449
> ), index = structure(c(12569, 12599, 12630, 12661, 12691, 12722,
> 12752, 12783, 12814, 12842, 12873, 12903, 12934, 12964, 12995,
> 13026, 13056, 13087, 13117, 13148, 13179, 13207, 13238, 13268,
> 13299, 13329, 13360, 13391, 13421, 13452, 13482, 13513, 13544,
> 13572, 13603, 13633, 13664, 13694, 13725, 13756, 13786, 13817,
> 13847, 13878, 13909, 13938, 13969, 13999, 14030, 14060, 14091,
> 14122, 14152, 14183, 14213, 14244, 14275, 14303, 14334, 14364,
> 14395, 14425, 14456, 14487, 14517, 14548, 14578, 14609, 14640,
> 14668, 14699), .Names = c("", "", "", "", "", "", "", "", "",
> "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "",
> "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "",
> "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "",
> "", "", "", "", "", "", "", "", "", "", "", "", "", ""), class =
> "Date"), class = "zoo")
>
> #-----------------------------------
>
> av<- mean(Ra)
> std<- sd(Ra)
> sk<- skewness(Ra)
> kur<- kurtosis(Ra, method="excess")
>
> zc<- qnorm(0.95)
> zc2<- zc^2
> zc3<- zc^3
> sk2<- sk^2
>
> zcf<- zc+((zc2-1)*sk)/6+((zc3-3*zc)*kur)/24-((2*zc3-5*zc)*sk2)/36
>
> CoFisherVAR<- -av-std*zcf
> CoFisherVAR
>
> VaR(Ra, method="modified")
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>    


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From matthieu.stigler at gmail.com  Fri Apr 23 15:04:59 2010
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Fri, 23 Apr 2010 15:04:59 +0200
Subject: [R-SIG-Finance] zoo: how to find for series x closest day in
 series y?
In-Reply-To: <q2u971536df1004230346p26aed901q5c54daa3ea3d878d@mail.gmail.com>
References: <4BD163FB.1060205@gmail.com>
	<l2y971536df1004230250p145eb8dezb957465810452770@mail.gmail.com>
	<q2u971536df1004230346p26aed901q5c54daa3ea3d878d@mail.gmail.com>
Message-ID: <4BD19AFB.5070006@gmail.com>

Dear gabor

Thanks a lot for your valuable help!!! I finally used your second 
solution, which is more say  in "zoo spirit". As I actually needed not 
the closest day, but the closest day AFTER, I changed it slightly to:

pos<-function(x) ifelse(x>=0, x, NA)
f2 <- function(u) which.min(pos(as.numeric(index(y)) - as.numeric(u)))
ix <- sapply(index(x), f2)

Thanks a lot again for your help!!

Mat

Gabor Grothendieck a ?crit :
> Here is another solution where x and y are as in your post.
>
> f <- function(u) which.min(abs(as.numeric(index(y)) - as.numeric(u)))
> ix <- sapply(index(x), f)
> cbind(x, y = coredata(y)[ix])
>
> On Fri, Apr 23, 2010 at 5:50 AM, Gabor Grothendieck
> <ggrothendieck at gmail.com> wrote:
>   
>> Example 4d on the sqldf home page shows how:
>> http://sqldf.googlecode.com
>>
>> Here it is modified to work with your example data.
>>
>> (Note that its important to use different column names in DFx and DFy
>> since it can otherwise foul up sqldf's class assignment heuristic in
>> this case.  If for some reason you must use names that are the same in
>> both DFx and DFy then use the method = "raw" argument to sqldf and
>> convert the date columns to Date yourself.  See sqldf home page for
>> more info.)
>>
>> library(zoo)
>> library(sqldf)
>>
>> x <- zoo(1:3,as.Date(c("1992-12-13", "1997-05-12", "1997-07-13")))
>> y <- zoo(1:5,as.Date(c("1992-12-15", "1992-12-16", "1997-05-10","1997-05-19",
>> "1997-07-13")))
>>
>> DFx <- data.frame(x = coredata(x), xt = index(x))
>> DFy <- data.frame(y = coredata(y), yt = index(y))
>>
>> out <- sqldf("select x, y, xt, yt from DFx x, DFy y
>>  where abs(xt - yt) =
>>  (select min(abs(xt - y2.yt)) from DFy y2)")
>>
>> ix <- !duplicated(out[,3])
>> zoo(out[ix, 1:2], out[ix, 3])
>>
>>
>> On Fri, Apr 23, 2010 at 5:10 AM, Matthieu Stigler
>> <matthieu.stigler at gmail.com> wrote:
>>     
>>> Hi
>>>
>>> I have two series, x  and y, which don't have the same index. I then need to
>>> find which in y is the closest day in x. How can do I do this in a clean
>>> way? I have here a dirty for loop solution...
>>> library(zoo)
>>> #my series
>>> x<-zoo(1:3,as.Date(c("1992-12-13", "1997-05-12", "1997-07-13")))
>>> y<-zoo(1:5,as.Date(c("1992-12-15", "1992-12-16", "1997-05-10","1997-05-19",
>>> "1997-07-13")))
>>>
>>> #but index is not always the same:
>>> index(x)%in%index(y)
>>>
>>> #my (dirty?) solution
>>> xnew<-x
>>> for(i in which(!index(x)%in%index(y)))
>>> xnew[i]<-which.min(abs(as.numeric(index(x)[i]-index(y))))
>>> xnew
>>>
>>> Is there something cleaner one could use to find the closest available day?
>>>
>>> Thanks a lot!
>>>
>>> Matthieu
>>>
>>> _______________________________________________
>>> R-SIG-Finance at stat.math.ethz.ch mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>>>


From ggrothendieck at gmail.com  Fri Apr 23 18:10:25 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 23 Apr 2010 12:10:25 -0400
Subject: [R-SIG-Finance] zoo: how to find for series x closest day in
	series y?
In-Reply-To: <4BD19AFB.5070006@gmail.com>
References: <4BD163FB.1060205@gmail.com>
	<l2y971536df1004230250p145eb8dezb957465810452770@mail.gmail.com>
	<q2u971536df1004230346p26aed901q5c54daa3ea3d878d@mail.gmail.com> 
	<4BD19AFB.5070006@gmail.com>
Message-ID: <t2w971536df1004230910ucb2cdb38zd25c13c93ebf73ea@mail.gmail.com>

If the problem is to find y's at or greater in time than x's then we
can use this method:

window(na.locf(merge(x, y), fromLast = TRUE), index(x))


On Fri, Apr 23, 2010 at 9:04 AM, Matthieu Stigler
<matthieu.stigler at gmail.com> wrote:
> Dear gabor
>
> Thanks a lot for your valuable help!!! I finally used your second solution,
> which is more say ?in "zoo spirit". As I actually needed not the closest
> day, but the closest day AFTER, I changed it slightly to:
>
> pos<-function(x) ifelse(x>=0, x, NA)
> f2 <- function(u) which.min(pos(as.numeric(index(y)) - as.numeric(u)))
> ix <- sapply(index(x), f2)
>
> Thanks a lot again for your help!!
>
> Mat
>
> Gabor Grothendieck a ?crit :
>>
>> Here is another solution where x and y are as in your post.
>>
>> f <- function(u) which.min(abs(as.numeric(index(y)) - as.numeric(u)))
>> ix <- sapply(index(x), f)
>> cbind(x, y = coredata(y)[ix])
>>
>> On Fri, Apr 23, 2010 at 5:50 AM, Gabor Grothendieck
>> <ggrothendieck at gmail.com> wrote:
>>
>>>
>>> Example 4d on the sqldf home page shows how:
>>> http://sqldf.googlecode.com
>>>
>>> Here it is modified to work with your example data.
>>>
>>> (Note that its important to use different column names in DFx and DFy
>>> since it can otherwise foul up sqldf's class assignment heuristic in
>>> this case. ?If for some reason you must use names that are the same in
>>> both DFx and DFy then use the method = "raw" argument to sqldf and
>>> convert the date columns to Date yourself. ?See sqldf home page for
>>> more info.)
>>>
>>> library(zoo)
>>> library(sqldf)
>>>
>>> x <- zoo(1:3,as.Date(c("1992-12-13", "1997-05-12", "1997-07-13")))
>>> y <- zoo(1:5,as.Date(c("1992-12-15", "1992-12-16",
>>> "1997-05-10","1997-05-19",
>>> "1997-07-13")))
>>>
>>> DFx <- data.frame(x = coredata(x), xt = index(x))
>>> DFy <- data.frame(y = coredata(y), yt = index(y))
>>>
>>> out <- sqldf("select x, y, xt, yt from DFx x, DFy y
>>> ?where abs(xt - yt) =
>>> ?(select min(abs(xt - y2.yt)) from DFy y2)")
>>>
>>> ix <- !duplicated(out[,3])
>>> zoo(out[ix, 1:2], out[ix, 3])
>>>
>>>
>>> On Fri, Apr 23, 2010 at 5:10 AM, Matthieu Stigler
>>> <matthieu.stigler at gmail.com> wrote:
>>>
>>>>
>>>> Hi
>>>>
>>>> I have two series, x ?and y, which don't have the same index. I then
>>>> need to
>>>> find which in y is the closest day in x. How can do I do this in a clean
>>>> way? I have here a dirty for loop solution...
>>>> library(zoo)
>>>> #my series
>>>> x<-zoo(1:3,as.Date(c("1992-12-13", "1997-05-12", "1997-07-13")))
>>>> y<-zoo(1:5,as.Date(c("1992-12-15", "1992-12-16",
>>>> "1997-05-10","1997-05-19",
>>>> "1997-07-13")))
>>>>
>>>> #but index is not always the same:
>>>> index(x)%in%index(y)
>>>>
>>>> #my (dirty?) solution
>>>> xnew<-x
>>>> for(i in which(!index(x)%in%index(y)))
>>>> xnew[i]<-which.min(abs(as.numeric(index(x)[i]-index(y))))
>>>> xnew
>>>>
>>>> Is there something cleaner one could use to find the closest available
>>>> day?
>>>>
>>>> Thanks a lot!
>>>>
>>>> Matthieu
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at stat.math.ethz.ch mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions
>>>> should go.
>>>>
>>>>
>
>


From matthieu.stigler at gmail.com  Sun Apr 25 11:29:57 2010
From: matthieu.stigler at gmail.com (mat)
Date: Sun, 25 Apr 2010 11:29:57 +0200
Subject: [R-SIG-Finance] zoo: how to find for series x closest day in
 series y?
In-Reply-To: <t2w971536df1004230910ucb2cdb38zd25c13c93ebf73ea@mail.gmail.com>
References: <4BD163FB.1060205@gmail.com>
	<l2y971536df1004230250p145eb8dezb957465810452770@mail.gmail.com>
	<q2u971536df1004230346p26aed901q5c54daa3ea3d878d@mail.gmail.com>
	<4BD19AFB.5070006@gmail.com>
	<t2w971536df1004230910ucb2cdb38zd25c13c93ebf73ea@mail.gmail.com>
Message-ID: <4BD40B95.6050404@gmail.com>

Thanks a lot Gabor, this is the "clean" code I was looking for :-)

Actually, I now need for a further application to take not only the one 
value a time t or greater than t, but take the mean of the say next 3 
values at time t or greater than t...

from:
x <- zoo(1:3,as.Date(c("1992-12-13", "1997-05-12", "1997-07-13")))
y <- zoo(1:14,as.Date(c("1992-12-15", "1992-12-16","1992-12-18", 
"1992-12-19", 
"1997-05-10","1997-05-19","1997-05-23","1997-05-24","1997-05-25",
"1997-07-13","1997-07-14","1997-07-15","1997-07-16","1997-07-19")))


I would need for "1992-12-13" to have the mean of "1992-12-15", 
"1992-12-16","1992-12-18", and so... Will need probably:
aggregate(x2, rep(index(x), each=3), mean)
but about how to construct the x2 with the 3 closest values ... I'm 
stuck again...

Thanks a lot for any hint!!

Matthieu



Gabor Grothendieck a ?crit :
> If the problem is to find y's at or greater in time than x's then we
> can use this method:
>
> window(na.locf(merge(x, y), fromLast = TRUE), index(x))
>
>
> On Fri, Apr 23, 2010 at 9:04 AM, Matthieu Stigler
> <matthieu.stigler at gmail.com> wrote:
>   
>> Dear gabor
>>
>> Thanks a lot for your valuable help!!! I finally used your second solution,
>> which is more say  in "zoo spirit". As I actually needed not the closest
>> day, but the closest day AFTER, I changed it slightly to:
>>
>> pos<-function(x) ifelse(x>=0, x, NA)
>> f2 <- function(u) which.min(pos(as.numeric(index(y)) - as.numeric(u)))
>> ix <- sapply(index(x), f2)
>>
>> Thanks a lot again for your help!!
>>
>> Mat
>>
>> Gabor Grothendieck a ?crit :
>>     
>>> Here is another solution where x and y are as in your post.
>>>
>>> f <- function(u) which.min(abs(as.numeric(index(y)) - as.numeric(u)))
>>> ix <- sapply(index(x), f)
>>> cbind(x, y = coredata(y)[ix])
>>>
>>> On Fri, Apr 23, 2010 at 5:50 AM, Gabor Grothendieck
>>> <ggrothendieck at gmail.com> wrote:
>>>
>>>       
>>>> Example 4d on the sqldf home page shows how:
>>>> http://sqldf.googlecode.com
>>>>
>>>> Here it is modified to work with your example data.
>>>>
>>>> (Note that its important to use different column names in DFx and DFy
>>>> since it can otherwise foul up sqldf's class assignment heuristic in
>>>> this case.  If for some reason you must use names that are the same in
>>>> both DFx and DFy then use the method = "raw" argument to sqldf and
>>>> convert the date columns to Date yourself.  See sqldf home page for
>>>> more info.)
>>>>
>>>> library(zoo)
>>>> library(sqldf)
>>>>
>>>> x <- zoo(1:3,as.Date(c("1992-12-13", "1997-05-12", "1997-07-13")))
>>>> y <- zoo(1:5,as.Date(c("1992-12-15", "1992-12-16",
>>>> "1997-05-10","1997-05-19",
>>>> "1997-07-13")))
>>>>
>>>> DFx <- data.frame(x = coredata(x), xt = index(x))
>>>> DFy <- data.frame(y = coredata(y), yt = index(y))
>>>>
>>>> out <- sqldf("select x, y, xt, yt from DFx x, DFy y
>>>>  where abs(xt - yt) =
>>>>  (select min(abs(xt - y2.yt)) from DFy y2)")
>>>>
>>>> ix <- !duplicated(out[,3])
>>>> zoo(out[ix, 1:2], out[ix, 3])
>>>>
>>>>
>>>> On Fri, Apr 23, 2010 at 5:10 AM, Matthieu Stigler
>>>> <matthieu.stigler at gmail.com> wrote:
>>>>
>>>>         
>>>>> Hi
>>>>>
>>>>> I have two series, x  and y, which don't have the same index. I then
>>>>> need to
>>>>> find which in y is the closest day in x. How can do I do this in a clean
>>>>> way? I have here a dirty for loop solution...
>>>>> library(zoo)
>>>>> #my series
>>>>> x<-zoo(1:3,as.Date(c("1992-12-13", "1997-05-12", "1997-07-13")))
>>>>> y<-zoo(1:5,as.Date(c("1992-12-15", "1992-12-16",
>>>>> "1997-05-10","1997-05-19",
>>>>> "1997-07-13")))
>>>>>
>>>>> #but index is not always the same:
>>>>> index(x)%in%index(y)
>>>>>
>>>>> #my (dirty?) solution
>>>>> xnew<-x
>>>>> for(i in which(!index(x)%in%index(y)))
>>>>> xnew[i]<-which.min(abs(as.numeric(index(x)[i]-index(y))))
>>>>> xnew
>>>>>
>>>>> Is there something cleaner one could use to find the closest available
>>>>> day?
>>>>>
>>>>> Thanks a lot!
>>>>>
>>>>> Matthieu
>>>>>
>>>>> _______________________________________________
>>>>> R-SIG-Finance at stat.math.ethz.ch mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>> -- Also note that this is not the r-help list where general R questions
>>>>> should go.
>>>>>
>>>>>
>>>>>           
>>


From ggrothendieck at gmail.com  Sun Apr 25 12:40:08 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sun, 25 Apr 2010 06:40:08 -0400
Subject: [R-SIG-Finance] zoo: how to find for series x closest day in
	series y?
In-Reply-To: <4BD40B95.6050404@gmail.com>
References: <4BD163FB.1060205@gmail.com>
	<l2y971536df1004230250p145eb8dezb957465810452770@mail.gmail.com>
	<q2u971536df1004230346p26aed901q5c54daa3ea3d878d@mail.gmail.com> 
	<4BD19AFB.5070006@gmail.com>
	<t2w971536df1004230910ucb2cdb38zd25c13c93ebf73ea@mail.gmail.com>
	<4BD40B95.6050404@gmail.com>
Message-ID: <y2t971536df1004250340h89b065a3r3e7d44e0adf5d730@mail.gmail.com>

Just apply the previous formula to rollmean(y, 3, align = "left") in place of y.

On Sun, Apr 25, 2010 at 5:29 AM, mat <matthieu.stigler at gmail.com> wrote:
> Thanks a lot Gabor, this is the "clean" code I was looking for :-)
>
> Actually, I now need for a further application to take not only the one
> value a time t or greater than t, but take the mean of the say next 3 values
> at time t or greater than t...
>
> from:
> x <- zoo(1:3,as.Date(c("1992-12-13", "1997-05-12", "1997-07-13")))
> y <- zoo(1:14,as.Date(c("1992-12-15", "1992-12-16","1992-12-18",
> "1992-12-19",
> "1997-05-10","1997-05-19","1997-05-23","1997-05-24","1997-05-25",
> "1997-07-13","1997-07-14","1997-07-15","1997-07-16","1997-07-19")))
>
>
> I would need for "1992-12-13" to have the mean of "1992-12-15",
> "1992-12-16","1992-12-18", and so... Will need probably:
> aggregate(x2, rep(index(x), each=3), mean)
> but about how to construct the x2 with the 3 closest values ... I'm stuck
> again...
>
> Thanks a lot for any hint!!
>
> Matthieu
>
>
>
> Gabor Grothendieck a ?crit :
>>
>> If the problem is to find y's at or greater in time than x's then we
>> can use this method:
>>
>> window(na.locf(merge(x, y), fromLast = TRUE), index(x))
>>
>>
>> On Fri, Apr 23, 2010 at 9:04 AM, Matthieu Stigler
>> <matthieu.stigler at gmail.com> wrote:
>>
>>>
>>> Dear gabor
>>>
>>> Thanks a lot for your valuable help!!! I finally used your second
>>> solution,
>>> which is more say ?in "zoo spirit". As I actually needed not the closest
>>> day, but the closest day AFTER, I changed it slightly to:
>>>
>>> pos<-function(x) ifelse(x>=0, x, NA)
>>> f2 <- function(u) which.min(pos(as.numeric(index(y)) - as.numeric(u)))
>>> ix <- sapply(index(x), f2)
>>>
>>> Thanks a lot again for your help!!
>>>
>>> Mat
>>>
>>> Gabor Grothendieck a ?crit :
>>>
>>>>
>>>> Here is another solution where x and y are as in your post.
>>>>
>>>> f <- function(u) which.min(abs(as.numeric(index(y)) - as.numeric(u)))
>>>> ix <- sapply(index(x), f)
>>>> cbind(x, y = coredata(y)[ix])
>>>>
>>>> On Fri, Apr 23, 2010 at 5:50 AM, Gabor Grothendieck
>>>> <ggrothendieck at gmail.com> wrote:
>>>>
>>>>
>>>>>
>>>>> Example 4d on the sqldf home page shows how:
>>>>> http://sqldf.googlecode.com
>>>>>
>>>>> Here it is modified to work with your example data.
>>>>>
>>>>> (Note that its important to use different column names in DFx and DFy
>>>>> since it can otherwise foul up sqldf's class assignment heuristic in
>>>>> this case. ?If for some reason you must use names that are the same in
>>>>> both DFx and DFy then use the method = "raw" argument to sqldf and
>>>>> convert the date columns to Date yourself. ?See sqldf home page for
>>>>> more info.)
>>>>>
>>>>> library(zoo)
>>>>> library(sqldf)
>>>>>
>>>>> x <- zoo(1:3,as.Date(c("1992-12-13", "1997-05-12", "1997-07-13")))
>>>>> y <- zoo(1:5,as.Date(c("1992-12-15", "1992-12-16",
>>>>> "1997-05-10","1997-05-19",
>>>>> "1997-07-13")))
>>>>>
>>>>> DFx <- data.frame(x = coredata(x), xt = index(x))
>>>>> DFy <- data.frame(y = coredata(y), yt = index(y))
>>>>>
>>>>> out <- sqldf("select x, y, xt, yt from DFx x, DFy y
>>>>> ?where abs(xt - yt) =
>>>>> ?(select min(abs(xt - y2.yt)) from DFy y2)")
>>>>>
>>>>> ix <- !duplicated(out[,3])
>>>>> zoo(out[ix, 1:2], out[ix, 3])
>>>>>
>>>>>
>>>>> On Fri, Apr 23, 2010 at 5:10 AM, Matthieu Stigler
>>>>> <matthieu.stigler at gmail.com> wrote:
>>>>>
>>>>>
>>>>>>
>>>>>> Hi
>>>>>>
>>>>>> I have two series, x ?and y, which don't have the same index. I then
>>>>>> need to
>>>>>> find which in y is the closest day in x. How can do I do this in a
>>>>>> clean
>>>>>> way? I have here a dirty for loop solution...
>>>>>> library(zoo)
>>>>>> #my series
>>>>>> x<-zoo(1:3,as.Date(c("1992-12-13", "1997-05-12", "1997-07-13")))
>>>>>> y<-zoo(1:5,as.Date(c("1992-12-15", "1992-12-16",
>>>>>> "1997-05-10","1997-05-19",
>>>>>> "1997-07-13")))
>>>>>>
>>>>>> #but index is not always the same:
>>>>>> index(x)%in%index(y)
>>>>>>
>>>>>> #my (dirty?) solution
>>>>>> xnew<-x
>>>>>> for(i in which(!index(x)%in%index(y)))
>>>>>> xnew[i]<-which.min(abs(as.numeric(index(x)[i]-index(y))))
>>>>>> xnew
>>>>>>
>>>>>> Is there something cleaner one could use to find the closest available
>>>>>> day?
>>>>>>
>>>>>> Thanks a lot!
>>>>>>
>>>>>> Matthieu
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-SIG-Finance at stat.math.ethz.ch mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>>> -- Also note that this is not the r-help list where general R
>>>>>> questions
>>>>>> should go.
>>>>>>
>>>>>>
>>>>>>
>>>
>>>
>
>


From matthieu.stigler at gmail.com  Sun Apr 25 14:33:51 2010
From: matthieu.stigler at gmail.com (mat)
Date: Sun, 25 Apr 2010 14:33:51 +0200
Subject: [R-SIG-Finance] zoo: how to find for series x closest day in
 series y?
In-Reply-To: <y2t971536df1004250340h89b065a3r3e7d44e0adf5d730@mail.gmail.com>
References: <4BD163FB.1060205@gmail.com>
	<l2y971536df1004230250p145eb8dezb957465810452770@mail.gmail.com>
	<q2u971536df1004230346p26aed901q5c54daa3ea3d878d@mail.gmail.com>
	<4BD19AFB.5070006@gmail.com>
	<t2w971536df1004230910ucb2cdb38zd25c13c93ebf73ea@mail.gmail.com>
	<4BD40B95.6050404@gmail.com>
	<y2t971536df1004250340h89b065a3r3e7d44e0adf5d730@mail.gmail.com>
Message-ID: <4BD436AF.7030509@gmail.com>


Great, smart!! Thanks a lot Gabor!!!

Matthieu

Gabor Grothendieck a ?crit :
> Just apply the previous formula to rollmean(y, 3, align = "left") in place of y.
>
> On Sun, Apr 25, 2010 at 5:29 AM, mat <matthieu.stigler at gmail.com> wrote:
>   
>> Thanks a lot Gabor, this is the "clean" code I was looking for :-)
>>
>> Actually, I now need for a further application to take not only the one
>> value a time t or greater than t, but take the mean of the say next 3 values
>> at time t or greater than t...
>>
>> from:
>> x <- zoo(1:3,as.Date(c("1992-12-13", "1997-05-12", "1997-07-13")))
>> y <- zoo(1:14,as.Date(c("1992-12-15", "1992-12-16","1992-12-18",
>> "1992-12-19",
>> "1997-05-10","1997-05-19","1997-05-23","1997-05-24","1997-05-25",
>> "1997-07-13","1997-07-14","1997-07-15","1997-07-16","1997-07-19")))
>>
>>
>> I would need for "1992-12-13" to have the mean of "1992-12-15",
>> "1992-12-16","1992-12-18", and so... Will need probably:
>> aggregate(x2, rep(index(x), each=3), mean)
>> but about how to construct the x2 with the 3 closest values ... I'm stuck
>> again...
>>
>> Thanks a lot for any hint!!
>>
>> Matthieu
>>
>>
>>
>> Gabor Grothendieck a ?crit :
>>     
>>> If the problem is to find y's at or greater in time than x's then we
>>> can use this method:
>>>
>>> window(na.locf(merge(x, y), fromLast = TRUE), index(x))
>>>
>>>
>>> On Fri, Apr 23, 2010 at 9:04 AM, Matthieu Stigler
>>> <matthieu.stigler at gmail.com> wrote:
>>>
>>>       
>>>> Dear gabor
>>>>
>>>> Thanks a lot for your valuable help!!! I finally used your second
>>>> solution,
>>>> which is more say  in "zoo spirit". As I actually needed not the closest
>>>> day, but the closest day AFTER, I changed it slightly to:
>>>>
>>>> pos<-function(x) ifelse(x>=0, x, NA)
>>>> f2 <- function(u) which.min(pos(as.numeric(index(y)) - as.numeric(u)))
>>>> ix <- sapply(index(x), f2)
>>>>
>>>> Thanks a lot again for your help!!
>>>>
>>>> Mat
>>>>
>>>> Gabor Grothendieck a ?crit :
>>>>
>>>>         
>>>>> Here is another solution where x and y are as in your post.
>>>>>
>>>>> f <- function(u) which.min(abs(as.numeric(index(y)) - as.numeric(u)))
>>>>> ix <- sapply(index(x), f)
>>>>> cbind(x, y = coredata(y)[ix])
>>>>>
>>>>> On Fri, Apr 23, 2010 at 5:50 AM, Gabor Grothendieck
>>>>> <ggrothendieck at gmail.com> wrote:
>>>>>
>>>>>
>>>>>           
>>>>>> Example 4d on the sqldf home page shows how:
>>>>>> http://sqldf.googlecode.com
>>>>>>
>>>>>> Here it is modified to work with your example data.
>>>>>>
>>>>>> (Note that its important to use different column names in DFx and DFy
>>>>>> since it can otherwise foul up sqldf's class assignment heuristic in
>>>>>> this case.  If for some reason you must use names that are the same in
>>>>>> both DFx and DFy then use the method = "raw" argument to sqldf and
>>>>>> convert the date columns to Date yourself.  See sqldf home page for
>>>>>> more info.)
>>>>>>
>>>>>> library(zoo)
>>>>>> library(sqldf)
>>>>>>
>>>>>> x <- zoo(1:3,as.Date(c("1992-12-13", "1997-05-12", "1997-07-13")))
>>>>>> y <- zoo(1:5,as.Date(c("1992-12-15", "1992-12-16",
>>>>>> "1997-05-10","1997-05-19",
>>>>>> "1997-07-13")))
>>>>>>
>>>>>> DFx <- data.frame(x = coredata(x), xt = index(x))
>>>>>> DFy <- data.frame(y = coredata(y), yt = index(y))
>>>>>>
>>>>>> out <- sqldf("select x, y, xt, yt from DFx x, DFy y
>>>>>>  where abs(xt - yt) =
>>>>>>  (select min(abs(xt - y2.yt)) from DFy y2)")
>>>>>>
>>>>>> ix <- !duplicated(out[,3])
>>>>>> zoo(out[ix, 1:2], out[ix, 3])
>>>>>>
>>>>>>
>>>>>> On Fri, Apr 23, 2010 at 5:10 AM, Matthieu Stigler
>>>>>> <matthieu.stigler at gmail.com> wrote:
>>>>>>
>>>>>>
>>>>>>             
>>>>>>> Hi
>>>>>>>
>>>>>>> I have two series, x  and y, which don't have the same index. I then
>>>>>>> need to
>>>>>>> find which in y is the closest day in x. How can do I do this in a
>>>>>>> clean
>>>>>>> way? I have here a dirty for loop solution...
>>>>>>> library(zoo)
>>>>>>> #my series
>>>>>>> x<-zoo(1:3,as.Date(c("1992-12-13", "1997-05-12", "1997-07-13")))
>>>>>>> y<-zoo(1:5,as.Date(c("1992-12-15", "1992-12-16",
>>>>>>> "1997-05-10","1997-05-19",
>>>>>>> "1997-07-13")))
>>>>>>>
>>>>>>> #but index is not always the same:
>>>>>>> index(x)%in%index(y)
>>>>>>>
>>>>>>> #my (dirty?) solution
>>>>>>> xnew<-x
>>>>>>> for(i in which(!index(x)%in%index(y)))
>>>>>>> xnew[i]<-which.min(abs(as.numeric(index(x)[i]-index(y))))
>>>>>>> xnew
>>>>>>>
>>>>>>> Is there something cleaner one could use to find the closest available
>>>>>>> day?
>>>>>>>
>>>>>>> Thanks a lot!
>>>>>>>
>>>>>>> Matthieu
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> R-SIG-Finance at stat.math.ethz.ch mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>>>> -- Also note that this is not the r-help list where general R
>>>>>>> questions
>>>>>>> should go.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>               
>>>>         
>>


From robert.nicholson at gmail.com  Mon Apr 26 04:05:15 2010
From: robert.nicholson at gmail.com (Robert Nicholson)
Date: Sun, 25 Apr 2010 21:05:15 -0500
Subject: [R-SIG-Finance] Why is blotter giving me this error?
Message-ID: <D08C4D0F-13EB-4E8A-99D9-91671AB86AD3@gmail.com>

addTxn(Portfolio=portfolio, Symbol = Transaction$Symbol, TxnDate = CurrentDate, TxnPrice = as.numeric(Transaction$Price), TxnQty = as.numeric(Transaction$Quantity), TxnFees = 0, verbose = TRUE, ConMult=1)
Error in if (PosQty == 0) PosAvgCost = 0 else { : 
  argument is of length zero
> as.numeric(Transaction$Price)
[1] 0.35
> as.numeric(Transaction$Quantity)
[1] 10


Is there anything I'm doing that's obviously wrong?

From robert.nicholson at gmail.com  Mon Apr 26 08:10:54 2010
From: robert.nicholson at gmail.com (Robert Nicholson)
Date: Mon, 26 Apr 2010 01:10:54 -0500
Subject: [R-SIG-Finance] What are the requirements for instrument names in a
	blotter portfolio?
Message-ID: <37A29213-C850-4403-90A0-80F3C92F577C@gmail.com>

Why when

names(getPortfolio(portfolio))
  [1] " -24702R9GE"

do I have

[1] "2008-05-30  -24702R9GE 10 @ 35"
Error in get(x, pos = .instrument) : object ' -24702R9GE' not found
Error in get(Symbol, envir = as.environment(.GlobalEnv)) : 
  object ' -24702R9GE' not found

when I call

	portfolio = updatePortf(Portfolio = portfolio, Dates = CurrentDate)


From brian at braverock.com  Mon Apr 26 12:01:31 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 26 Apr 2010 05:01:31 -0500
Subject: [R-SIG-Finance] What are the requirements for instrument names
 in a	blotter portfolio?
In-Reply-To: <37A29213-C850-4403-90A0-80F3C92F577C@gmail.com>
References: <37A29213-C850-4403-90A0-80F3C92F577C@gmail.com>
Message-ID: <4BD5647B.4060606@braverock.com>

R variable names may not start with a number.

instruments will be used to create R variables, so all normal naming rules for 
variables apply.

Robert Nicholson wrote:
> Why when
> 
> names(getPortfolio(portfolio))
>   [1] " -24702R9GE"
> 
> do I have
> 
> [1] "2008-05-30  -24702R9GE 10 @ 35"
> Error in get(x, pos = .instrument) : object ' -24702R9GE' not found
> Error in get(Symbol, envir = as.environment(.GlobalEnv)) : 
>   object ' -24702R9GE' not found
> 
> when I call
> 
> 	portfolio = updatePortf(Portfolio = portfolio, Dates = CurrentDate)


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From robert.nicholson at gmail.com  Mon Apr 26 15:32:54 2010
From: robert.nicholson at gmail.com (Robert Nicholson)
Date: Mon, 26 Apr 2010 08:32:54 -0500
Subject: [R-SIG-Finance] What are the requirements for instrument names
	in a	blotter portfolio?
In-Reply-To: <4BD5647B.4060606@braverock.com>
References: <37A29213-C850-4403-90A0-80F3C92F577C@gmail.com>
	<4BD5647B.4060606@braverock.com>
Message-ID: <CCE34BB1-7109-44C2-B485-FDD7589D9F32@gmail.com>

Why then do I get this?

I added

Transactions$Symbol = sub('[ -]*','INST',Transactions$Symbol)

so this prefixes everything I had with INST presumably I can have digits in the name

1] "2008-05-30 INST24702R9GE 10 @ 0.35"
Error in get(x, pos = .instrument) : object 'INST24702R9GE' not found
Error in get(Symbol, envir = as.environment(.GlobalEnv)) : 
  object 'INST24702R9GE' not found


On Apr 26, 2010, at 5:01 AM, Brian G. Peterson wrote:

> R variable names may not start with a number.
> 
> instruments will be used to create R variables, so all normal naming rules for variables apply.
> 
> Robert Nicholson wrote:
>> Why when
>> names(getPortfolio(portfolio))
>>  [1] " -24702R9GE"
>> do I have
>> [1] "2008-05-30  -24702R9GE 10 @ 35"
>> Error in get(x, pos = .instrument) : object ' -24702R9GE' not found
>> Error in get(Symbol, envir = as.environment(.GlobalEnv)) :   object ' -24702R9GE' not found
>> when I call
>> 	portfolio = updatePortf(Portfolio = portfolio, Dates = CurrentDate)
> 
> 
> -- 
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock


From brian at braverock.com  Mon Apr 26 15:40:11 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 26 Apr 2010 08:40:11 -0500
Subject: [R-SIG-Finance] What are the requirements for instrument names
 in a	blotter portfolio?
In-Reply-To: <CCE34BB1-7109-44C2-B485-FDD7589D9F32@gmail.com>
References: <37A29213-C850-4403-90A0-80F3C92F577C@gmail.com>
	<4BD5647B.4060606@braverock.com>
	<CCE34BB1-7109-44C2-B485-FDD7589D9F32@gmail.com>
Message-ID: <4BD597BB.6010403@braverock.com>

As should be clear from the documentation and examples, we have followed 
the 'quantmod' convention of storing the market data as the symbol name.

My presumtion is that as you could not possibly have stored your market 
data as '-24702R9GE' (as this is an illegal R variable name), you have 
likely also not stored it as 'INST24702R9GE'

The call that is failing, however, suggests a different problem.

This error:

Error in get(x, pos = .instrument) : object 'INST24702R9GE' not found

suggests that you haven't declared the instrument, with currency, 
multiplier, etc.

it's not clear if the next error is directly related, or if it is simply 
the code falling back to try to find the instrument data in the global 
environment.

Diagnosing this would be much easier if you provided a complete, 
reproducible example, per the posting guide.  Then I wouldn't have to 
guess, I could simply run the code.

Regards,

      - Brian

On 04/26/2010 08:32 AM, Robert Nicholson wrote:
> Why then do I get this?
>
> I added
>
> Transactions$Symbol = sub('[ -]*','INST',Transactions$Symbol)
>
> so this prefixes everything I had with INST presumably I can have digits in the name
>
> 1] "2008-05-30 INST24702R9GE 10 @ 0.35"
> Error in get(x, pos = .instrument) : object 'INST24702R9GE' not found
> Error in get(Symbol, envir = as.environment(.GlobalEnv)) :
>    object 'INST24702R9GE' not found
>
>
> On Apr 26, 2010, at 5:01 AM, Brian G. Peterson wrote:
>
>    
>> R variable names may not start with a number.
>>
>> instruments will be used to create R variables, so all normal naming rules for variables apply.
>>
>> Robert Nicholson wrote:
>>      
>>> Why when
>>> names(getPortfolio(portfolio))
>>>   [1] " -24702R9GE"
>>> do I have
>>> [1] "2008-05-30  -24702R9GE 10 @ 35"
>>> Error in get(x, pos = .instrument) : object ' -24702R9GE' not found
>>> Error in get(Symbol, envir = as.environment(.GlobalEnv)) :   object ' -24702R9GE' not found
>>> when I call
>>> 	portfolio = updatePortf(Portfolio = portfolio, Dates = CurrentDate)
>>>        
>>
>> -- 
>> Brian G. Peterson
>> http://braverock.com/brian/
>> Ph: 773-459-4973
>> IM: bgpbraverock
>>      


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From robert.nicholson at gmail.com  Mon Apr 26 15:49:55 2010
From: robert.nicholson at gmail.com (Robert Nicholson)
Date: Mon, 26 Apr 2010 08:49:55 -0500
Subject: [R-SIG-Finance] What are the requirements for instrument names
	in a	blotter portfolio?
In-Reply-To: <4BD597BB.6010403@braverock.com>
References: <37A29213-C850-4403-90A0-80F3C92F577C@gmail.com>
	<4BD5647B.4060606@braverock.com>
	<CCE34BB1-7109-44C2-B485-FDD7589D9F32@gmail.com>
	<4BD597BB.6010403@braverock.com>
Message-ID: <2693611E-51EC-4D5A-A66C-38D3238342ED@gmail.com>

Sure here's an example

Please bear I'm in mind I'm still learning R and blotter. 

The idea is to put transaction data thru and then look at the PnL ideally for each trade

The transactions file looks like this for each row

05/30/2008, YOU BOUGHT           OPENING TRANSACTION, -24702R9GE, CALL (DLQ) DELL INC JUL 25 (100 SHS),Cash,10,0.35,17.5,,,-367.5, 06/02/2008
06/12/2008, YOU SOLD             CLOSING TRANSACTION, -24702R9GE, CALL (DLQ) DELL INC JUL 25 (100 SHS),Cash,-10,0.56,18.45,,,541.54, 06/13/2008

library(quantmod)
library(blotter)
library(PerformanceAnalytics)
Transactions <- as.xts(read.zoo("/Users/robert/Downloads/transactions.csv", header=FALSE, FUN=as.POSIXct, sep=",", format="%m/%d/%Y"))
colnames(Transactions) <- c('Action', 'Symbol', 'SecurityDescription', 'Cash', 'Quantity', 'Price', 'Commission', 'Fees', 'Blank', 'Amount', 'SettlementDate')

Transactions$Symbol = sub('[ -]*','INST',Transactions$Symbol)

symbols = as.character((unique(Transactions$Symbol)))
portfolioname = 'portfolio'
accountname = 'account'

rm(list=ls(envir=.blotter),envir=.blotter)

portfolio <- initPortf(portfolioname, symbols=symbols)
account = initAcct(accountname, portfolios=portfolioname)
for (i in 1:NROW(Transactions)) {
	Transaction = Transactions[i]
        CurrentDate=time(Transaction)
	equity = getEndEq(account, CurrentDate)
        symbol = Transaction$Symbol
        price = as.numeric(Transaction$Price)
        quantity = as.numeric(Transaction$Quantity)
        if(is.na(Transaction$Fees)) {
            fees = 0
        } else {
            fees = as.numeric(Transaction$Fees)
        }
        if (is.na(Transaction$Commission)) {
	    commission = 0
        } else {
            commission = as.numeric(Transaction$Commission)
        }
	multiplier = 1
        if(substr(symbol,2,2) == '-') {
		multiplier = 100
	}
	addTxn(Portfolio=portfolio, Symbol=symbol, TxnDate=CurrentDate, TxnPrice=(price*multiplier), TxnQty=quantity, TxnFees=(commission + fees), verbose=TRUE, ConMult=1)
	portfolio = updatePortf(Portfolio = portfolio, Dates = CurrentDate)
}
#portfolio = updatePortf(Portfolio = portfolio, Dates = CurrentDate)
#account = updateAcct(Account = account, Dates = CurrentDate)
#account = updateEndEq(Account = account, Dates = CurrentDate)

On Apr 26, 2010, at 8:40 AM, Brian G. Peterson wrote:

> As should be clear from the documentation and examples, we have followed the 'quantmod' convention of storing the market data as the symbol name.
> 
> My presumtion is that as you could not possibly have stored your market data as '-24702R9GE' (as this is an illegal R variable name), you have likely also not stored it as 'INST24702R9GE'
> 
> The call that is failing, however, suggests a different problem.
> 
> This error:
> 
> Error in get(x, pos = .instrument) : object 'INST24702R9GE' not found
> 
> suggests that you haven't declared the instrument, with currency, multiplier, etc.
> 
> it's not clear if the next error is directly related, or if it is simply the code falling back to try to find the instrument data in the global environment.
> 
> Diagnosing this would be much easier if you provided a complete, reproducible example, per the posting guide.  Then I wouldn't have to guess, I could simply run the code.
> 
> Regards,
> 
>     - Brian
> 
> On 04/26/2010 08:32 AM, Robert Nicholson wrote:
>> Why then do I get this?
>> 
>> I added
>> 
>> Transactions$Symbol = sub('[ -]*','INST',Transactions$Symbol)
>> 
>> so this prefixes everything I had with INST presumably I can have digits in the name
>> 
>> 1] "2008-05-30 INST24702R9GE 10 @ 0.35"
>> Error in get(x, pos = .instrument) : object 'INST24702R9GE' not found
>> Error in get(Symbol, envir = as.environment(.GlobalEnv)) :
>>   object 'INST24702R9GE' not found
>> 
>> 
>> On Apr 26, 2010, at 5:01 AM, Brian G. Peterson wrote:
>> 
>>   
>>> R variable names may not start with a number.
>>> 
>>> instruments will be used to create R variables, so all normal naming rules for variables apply.
>>> 
>>> Robert Nicholson wrote:
>>>     
>>>> Why when
>>>> names(getPortfolio(portfolio))
>>>>  [1] " -24702R9GE"
>>>> do I have
>>>> [1] "2008-05-30  -24702R9GE 10 @ 35"
>>>> Error in get(x, pos = .instrument) : object ' -24702R9GE' not found
>>>> Error in get(Symbol, envir = as.environment(.GlobalEnv)) :   object ' -24702R9GE' not found
>>>> when I call
>>>> 	portfolio = updatePortf(Portfolio = portfolio, Dates = CurrentDate)
>>>>       
>>> 
>>> -- 
>>> Brian G. Peterson
>>> http://braverock.com/brian/
>>> Ph: 773-459-4973
>>> IM: bgpbraverock
>>>     
> 
> 
> -- 
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
> 
> 


From ustaudinger at gmail.com  Tue Apr 27 20:46:03 2010
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Tue, 27 Apr 2010 20:46:03 +0200
Subject: [R-SIG-Finance] Multiple quantmod charts on one plot ?
In-Reply-To: <BLU0-SMTP69D2A2FF45407772B87EEBE20A0@phx.gbl>
References: <n2w65daf6a61004200753l2aa0075do1856872e3bfec27a@mail.gmail.com>
	<m2je8e755251004200803j95d3e391i8e785d006b962983@mail.gmail.com>
	<BLU0-SMTP69D2A2FF45407772B87EEBE20A0@phx.gbl>
Message-ID: <o2o65daf6a61004271146w8315359y80a0c8c758e7fc26@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100427/ca8d8b1b/attachment.pl>

From calchayedd at hotmail.com  Wed Apr 28 07:34:18 2010
From: calchayedd at hotmail.com (Eddy A. Castillo S.)
Date: Wed, 28 Apr 2010 00:34:18 -0500
Subject: [R-SIG-Finance] Garch models with heavy tailed errors.
Message-ID: <SNT132-w42FD09236D6D0721A8B0E9D7020@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100428/a8a9fbf0/attachment.pl>

From kafka at centras.lt  Wed Apr 28 11:53:08 2010
From: kafka at centras.lt (kafkaz)
Date: Wed, 28 Apr 2010 02:53:08 -0700 (PDT)
Subject: [R-SIG-Finance] blotter on 15 min data
In-Reply-To: <4BC4E22D.5060405@braverock.com>
References: <1271193325979-1839017.post@n4.nabble.com>
	<4BC4E22D.5060405@braverock.com>
Message-ID: <1272448388134-2068888.post@n4.nabble.com>


Any comment?
-- 
View this message in context: http://r.789695.n4.nabble.com/blotter-on-15-min-data-tp1839017p2068888.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Wed Apr 28 13:11:28 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 28 Apr 2010 06:11:28 -0500
Subject: [R-SIG-Finance] What are the requirements for instrument names
 in a	blotter portfolio?
In-Reply-To: <B1796139-CCBD-4E94-A6A1-A0AA545897B9@gmail.com>
References: <37A29213-C850-4403-90A0-80F3C92F577C@gmail.com>
	<4BD5647B.4060606@braverock.com>
	<CCE34BB1-7109-44C2-B485-FDD7589D9F32@gmail.com>
	<4BD597BB.6010403@braverock.com>
	<2693611E-51EC-4D5A-A66C-38D3238342ED@gmail.com>
	<4BD59F2D.1090707@braverock.com>
	<B1796139-CCBD-4E94-A6A1-A0AA545897B9@gmail.com>
Message-ID: <4BD817E0.4090609@braverock.com>

Robert,

I looks to me like you're on the right track.

It looks like the line that is failing is in updatePosPL (called from updatePortf).

I think I mentioned in one of my earlier messages that you won't get cumulative 
  P&L unless you have historical market price data available.  You're 
downloading a list of transactions from your broker, and adding those via 
addTxn().  That step is going fine.  The failure is later, when you call 
updatePortf().

Comment out this line:

portfolio = updatePortf(Portfolio = portfolio, Dates = CurrentDate)

and the script should import all your transactions properly and calculate 
transaction P&L on them.  You'll be able to verify this via getPortfolio(). 
chart.Posn() will also fail without historical market price data available.

To 'mark the book' it should make sense that you need historical price data. 
Any frequency is fine: tick, bars, daily close, etc.  updatePortf() will go 
find this data and calculate a 'mark' at each time point in your market data or 
against some reference index.  I typically run trades as irregular series, like 
yours, and then mark the book on some periodic basis, like hourly or daily.

If historical market data isn't available, then there's no point in calling 
updatePortf(), (and the Account and Equity functions) as there's nothing to 
calculate at the portfolio level.

I'm not at my main development machine today, but tomorrow I'll wrap the call 
to market data in a try() statement and add a more descriptive error so that 
hopefully it will be clearer to others what is required.

I suppose eventually we could 'mark the book' based only on the trade data, 
with no unrealized P&L changes not related to prices observed at the time of a 
trade, but I'll need to think about that a little more: I'm not sure it's worth 
the effort as I always have historical market data available.

Regards,

    - Brian

Robert Nicholson wrote:
> After I made the following changes I still seem to get the same error
> 
> [1] "2008-05-30 O24702R9GE 10 @ 0.35"
> Error in get(Symbol, envir = as.environment(.GlobalEnv)) : 
>   object 'O24702R9GE' not found
> 
> 
> The code prefixes any option that begins with a - with O and leaves equity stock symbols alone.
> 
> library(quantmod)
> library(blotter)
> library(PerformanceAnalytics)
> Transactions <- as.xts(read.zoo("/Users/robert/Downloads/transactions.csv", header=FALSE, FUN=as.POSIXct, sep=",", format="%m/%d/%Y"))
> colnames(Transactions) <- c('Action', 'Symbol', 'SecurityDescription', 'Cash', 'Quantity', 'Price', 'Commission', 'Fees', 'Blank', 'Amount', 'SettlementDate')
> 
> rm(list=ls(envir=.blotter),envir=.blotter)
> rm(list=ls(envir=.instrument),envir=.instrument)
> 
> USD = currency('USD')
> 
> Transactions$Symbol = sub('^[ ]','',Transactions$Symbol)
> 
> for (symbol in unique(Transactions$Symbol)) 
> {
> 	print (symbol)
> 	if (regexpr('^$', symbol) != -1) {
> 		print("ignore")
> 	} else if (regexpr('^-', symbol) == -1) {
> 		print("stock")
> 		stock(primary_id=symbol, currency='USD', multiplier = 1, underlying_id = NULL)
> 	} else if (regexpr('^-', symbol) != -1) {
> 		option(primary_id=sub('^[-]', 'O', symbol), currency='USD', multiplier = 100, underlying_id = NULL)
> 		print ("option")
> 	} else {
> 		print ("ignore")
> 	}
> }
> 
> Transactions$Symbol = sub('^[ -]+','O',Transactions$Symbol)
> 
> symbols = unique(Transactions$Symbol)
> 
> portfolioname = 'portfolio'
> accountname = 'account'
> 
> portfolio <- initPortf(portfolioname, symbols=symbols)
> account = initAcct(accountname, portfolios=portfolioname)
> for (i in 1:NROW(Transactions)) {
> 	Transaction = Transactions[i]
>         CurrentDate=time(Transaction)
> 	equity = getEndEq(account, CurrentDate)
>         symbol = Transaction$Symbol
>         price = as.numeric(Transaction$Price)
>         quantity = as.numeric(Transaction$Quantity)
>         if(is.na(Transaction$Fees)) {
>             fees = 0
>         } else {
>             fees = as.numeric(Transaction$Fees)
>         }
>         if (is.na(Transaction$Commission)) {
> 	    commission = 0
>         } else {
>             commission = as.numeric(Transaction$Commission)
>         }
> 	multiplier = 1
>         #if(substr(symbol,2,2) == '-') {
> 	#    multiplier = 100
> 	#}
> 	addTxn(Portfolio=portfolio, Symbol=symbol, TxnDate=CurrentDate, TxnPrice=(price*multiplier), TxnQty=quantity, TxnFees=(commission + fees), verbose=TRUE, ConMult=1)
> 	portfolio = updatePortf(Portfolio = portfolio, Dates = CurrentDate)
> }
> #portfolio = updatePortf(Portfolio = portfolio, Dates = CurrentDate)
> #account = updateAcct(Account = account, Dates = CurrentDate)
> #account = updateEndEq(Account = account, Dates = CurrentDate)
> 
> On Apr 26, 2010, at 9:11 AM, Brian G. Peterson wrote:
> 
>> I'll reply in more detail later if required, after US and European markets close, and try to work through the issue for you, but I'll give you a hint/direction now.
>>
>> I would probably start by defining the currency:
>>
>> currency('USD')
>>
>> and then once you read the transaction data, you already define the symbols here:
>>
>> symbols = as.character((unique(Transactions$Symbol)))
>>
>>
>> You could then define the instruments:
>>
>> for (symbol in symbols) {
>>    option(primary_id=symbol,currency='USD',multiplier='100')
>>    # you'd need more sophistication if either of the two constants above aren't true
>> }
>>
>> Ideally, since you're dealing with option series, you'd also define the option_series information, but that probably isn't necessary for downloaded trade P&L.  Jeff Ryan and I will likely do some work this spring on automatically defining the properties for options OSI symbology, but as I said, I don't think it is necessary in your case.  I typically load the instrument metadata from our internal databases (I think this is the most likely use-case right now for non-stock portfolios).
>>
>> Incidentally, I'd see if your broker can or will provide you the data using OSI standard symbols.  the symbols you've got in your data file don't contain a lot of information.
>>
>> updatePortf() will fail if you don't have market data for each symbol to mark the book on.  This may very well not be a problem for your stated purpose, as calling getPortfolio should allow you to view the per-trade P&L, and chart.Posn should work (but will not display cumulative P&L)
>>
>> Regards,
>>
>>     - Brian
>>
>> On 04/26/2010 08:49 AM, Robert Nicholson wrote:
>>> Sure here's an example
>>>
>>> Please bear I'm in mind I'm still learning R and blotter.
>>>
>>> The idea is to put transaction data thru and then look at the PnL ideally for each trade
>>>
>>> The transactions file looks like this for each row
>>>
>>> 05/30/2008, YOU BOUGHT           OPENING TRANSACTION, -24702R9GE, CALL (DLQ) DELL INC JUL 25 (100 SHS),Cash,10,0.35,17.5,,,-367.5, 06/02/2008
>>> 06/12/2008, YOU SOLD             CLOSING TRANSACTION, -24702R9GE, CALL (DLQ) DELL INC JUL 25 (100 SHS),Cash,-10,0.56,18.45,,,541.54, 06/13/2008
>>>
>>> library(quantmod)
>>> library(blotter)
>>> library(PerformanceAnalytics)
>>> Transactions<- as.xts(read.zoo("/Users/robert/Downloads/transactions.csv", header=FALSE, FUN=as.POSIXct, sep=",", format="%m/%d/%Y"))
>>> colnames(Transactions)<- c('Action', 'Symbol', 'SecurityDescription', 'Cash', 'Quantity', 'Price', 'Commission', 'Fees', 'Blank', 'Amount', 'SettlementDate')
>>>
>>> Transactions$Symbol = sub('[ -]*','INST',Transactions$Symbol)
>>>
>>> symbols = as.character((unique(Transactions$Symbol)))
>>> portfolioname = 'portfolio'
>>> accountname = 'account'
>>>
>>> rm(list=ls(envir=.blotter),envir=.blotter)
>>>
>>> portfolio<- initPortf(portfolioname, symbols=symbols)
>>> account = initAcct(accountname, portfolios=portfolioname)
>>> for (i in 1:NROW(Transactions)) {
>>> 	Transaction = Transactions[i]
>>>         CurrentDate=time(Transaction)
>>> 	equity = getEndEq(account, CurrentDate)
>>>         symbol = Transaction$Symbol
>>>         price = as.numeric(Transaction$Price)
>>>         quantity = as.numeric(Transaction$Quantity)
>>>         if(is.na(Transaction$Fees)) {
>>>             fees = 0
>>>         } else {
>>>             fees = as.numeric(Transaction$Fees)
>>>         }
>>>         if (is.na(Transaction$Commission)) {
>>> 	    commission = 0
>>>         } else {
>>>             commission = as.numeric(Transaction$Commission)
>>>         }
>>> 	multiplier = 1
>>>         if(substr(symbol,2,2) == '-') {
>>> 		multiplier = 100
>>> 	}
>>> 	addTxn(Portfolio=portfolio, Symbol=symbol, TxnDate=CurrentDate, TxnPrice=(price*multiplier), TxnQty=quantity, TxnFees=(commission + fees), verbose=TRUE, ConMult=1)
>>> 	portfolio = updatePortf(Portfolio = portfolio, Dates = CurrentDate)
>>> }
>>> #portfolio = updatePortf(Portfolio = portfolio, Dates = CurrentDate)
>>> #account = updateAcct(Account = account, Dates = CurrentDate)
>>> #account = updateEndEq(Account = account, Dates = CurrentDate)
>>>
>>> On Apr 26, 2010, at 8:40 AM, Brian G. Peterson wrote:
>>>
>>>   
>>>> As should be clear from the documentation and examples, we have followed the 'quantmod' convention of storing the market data as the symbol name.
>>>>
>>>> My presumtion is that as you could not possibly have stored your market data as '-24702R9GE' (as this is an illegal R variable name), you have likely also not stored it as 'INST24702R9GE'
>>>>
>>>> The call that is failing, however, suggests a different problem.
>>>>
>>>> This error:
>>>>
>>>> Error in get(x, pos = .instrument) : object 'INST24702R9GE' not found
>>>>
>>>> suggests that you haven't declared the instrument, with currency, multiplier, etc.
>>>>
>>>> it's not clear if the next error is directly related, or if it is simply the code falling back to try to find the instrument data in the global environment.
>>>>
>>>> Diagnosing this would be much easier if you provided a complete, reproducible example, per the posting guide.  Then I wouldn't have to guess, I could simply run the code.
>>>>
>>>> Regards,
>>>>
>>>>     - Brian
>>>>
>>>> On 04/26/2010 08:32 AM, Robert Nicholson wrote:
>>>>     
>>>>> Why then do I get this?
>>>>>
>>>>> I added
>>>>>
>>>>> Transactions$Symbol = sub('[ -]*','INST',Transactions$Symbol)
>>>>>
>>>>> so this prefixes everything I had with INST presumably I can have digits in the name
>>>>>
>>>>> 1] "2008-05-30 INST24702R9GE 10 @ 0.35"
>>>>> Error in get(x, pos = .instrument) : object 'INST24702R9GE' not found
>>>>> Error in get(Symbol, envir = as.environment(.GlobalEnv)) :
>>>>>   object 'INST24702R9GE' not found
>>>>>
>>>>>
>>>>> On Apr 26, 2010, at 5:01 AM, Brian G. Peterson wrote:
>>>>>
>>>>>
>>>>>       
>>>>>> R variable names may not start with a number.
>>>>>>
>>>>>> instruments will be used to create R variables, so all normal naming rules for variables apply.
>>>>>>
>>>>>> Robert Nicholson wrote:
>>>>>>
>>>>>>         
>>>>>>> Why when
>>>>>>> names(getPortfolio(portfolio))
>>>>>>>  [1] " -24702R9GE"
>>>>>>> do I have
>>>>>>> [1] "2008-05-30  -24702R9GE 10 @ 35"
>>>>>>> Error in get(x, pos = .instrument) : object ' -24702R9GE' not found
>>>>>>> Error in get(Symbol, envir = as.environment(.GlobalEnv)) :   object ' -24702R9GE' not found
>>>>>>> when I call
>>>>>>> 	portfolio = updatePortf(Portfolio = portfolio, Dates = CurrentDate)
>>>>>>>
>>>>>>>           
>>>>>> -- 
>>>>>> Brian G. Peterson
>>>>>> http://braverock.com/brian/
>>>>>> Ph: 773-459-4973
>>>>>> IM: bgpbraverock
>>>>>>
>>>>>>         
>>>> -- 
>>>> Brian G. Peterson
>>>> http://braverock.com/brian/
>>>> Ph: 773-459-4973
>>>> IM: bgpbraverock
>>>>
>>>>
>>>>     
>>
>> -- 
>> Brian G. Peterson
>> http://braverock.com/brian/
>> Ph: 773-459-4973
>> IM: bgpbraverock
>>
>>


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From josh.m.ulrich at gmail.com  Wed Apr 28 17:21:47 2010
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Wed, 28 Apr 2010 10:21:47 -0500
Subject: [R-SIG-Finance] quantmod visual feedback from strategy testing
In-Reply-To: <4BC8E2CD.1090303@gmail.com>
References: <SNT114-DS183DBF1487FC0973458B8BD00E0@phx.gbl> 
	<4BC8E2CD.1090303@gmail.com>
Message-ID: <o2j8cca69991004280821yaf5f518bhe9238cc5f29bee78@mail.gmail.com>

Immanuel,

Look at the code in the chart.Posn() function in the blotter package
on r-forge.  While it may not do _exactly_ what you want, it should
give you a good start.

Best,
--
Joshua Ulrich
FOSS Trading: www.fosstrading.com



On Fri, Apr 16, 2010 at 5:21 PM, Immanuel <mane.desk at googlemail.com> wrote:
> Hey all,
>
> I tested a simple trading system from:
> http://blog.fosstrading.com/2009/04/testing-rsi2-with-r.html
>
> (i)
>
> What I'm missing is some visual feedback on the chart plot about the entry /
> exit
> signals and open positions.
>
> I would like to have an arrow over or below the bar where the signal
> occurred to
> indicate long or short signals and a doted line to indicate an open
> position?
> Whats the best way to accomplish this?
>
> (ii)
>
> I like to code some simple Dow trend detection with visual feedback.
> How can I choose the chart background or bar at every bar according to the
> trend direction ?
> Is there an indicator for x-bar high or x-bar low? ( I need this to identify
> important high or lows)
>
> I'm quite curious if and how all this can be realized in quantmod, therefore
> I'm
> happy about any hint in the right direction.
>
> Regards mane
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


From wobwu22 at yahoo.de  Wed Apr 28 17:58:47 2010
From: wobwu22 at yahoo.de (Wolfgang Wu)
Date: Wed, 28 Apr 2010 15:58:47 +0000 (GMT)
Subject: [R-SIG-Finance] Blotter - Setting up a futures_series
Message-ID: <616669.14075.qm@web23405.mail.ird.yahoo.com>

Hello,

I am playing around with blotter and am trying to set up several futures contracts. So assume I've got data for the crude oil future CL. I want to set up futures for the June 09 and July 09 contract. 

What I've done is the following:

currency("USD", multiplier=1);    
future("CL", "USD", 1000, identifiers=c("CLM9", "CLN9"))
future_series("CL", "M9", "2009-03-23", "2009-05-19")
future_series("CL", "N9", "2009-04-22", "2009-06-22")


1.) How do I link the future to the future_series? I assume this is by using the primary_id, correct?
2.) What do I specify in the identifiers in the futures function? 
3.) What is the multiplier in the future mean? Is it the value for one tick or for one point? So for oil one tick is 10 USD and one point move is 1000 USD. 
Thanks!!!

Wolfgang Wu




From brian at braverock.com  Thu Apr 29 01:28:48 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 28 Apr 2010 18:28:48 -0500
Subject: [R-SIG-Finance] Blotter - Setting up a futures_series
In-Reply-To: <616669.14075.qm@web23405.mail.ird.yahoo.com>
References: <616669.14075.qm@web23405.mail.ird.yahoo.com>
Message-ID: <4BD8C4B0.3000302@braverock.com>

Wolfgang Wu wrote:
> Hello,
> 
> I am playing around with blotter and am trying to set up several futures contracts. So assume I've got data for the crude oil future CL. I want to set up futures for the June 09 and July 09 contract. 
> 
> What I've done is the following:
> 
> currency("USD", multiplier=1);    
> future("CL", "USD", 1000, identifiers=c("CLM9", "CLN9"))
> future_series("CL", "M9", "2009-03-23", "2009-05-19")
> future_series("CL", "N9", "2009-04-22", "2009-06-22")
> 
> 
> 1.) How do I link the future to the future_series? I assume this is by using the primary_id, correct?

correct

> 2.) What do I specify in the identifiers in the futures function? 

anything or nothing at all.  identifiers are for other symbols, e.g. Bloomberg, 
Reuters, etc.  In your example, I would probably not add identifiers to the 
main contract.

> 3.) What is the multiplier in the future mean? Is it the value for one tick or for one point? So for oil one tick is 10 USD and one point move is 1000 USD. 

'point value' in your terminology.  It is used to get from the price to the 
notional value in the listed currency.  I'll probably add tick value to the 
model later this week.

> Thanks!!!

You're welcome.

Regards,

    - Brian

> Wolfgang Wu
> 
> 
> 
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From wobwu22 at yahoo.de  Thu Apr 29 09:15:54 2010
From: wobwu22 at yahoo.de (Wolfgang Wu)
Date: Thu, 29 Apr 2010 00:15:54 -0700 (PDT)
Subject: [R-SIG-Finance] Blotter - Setting up a futures_series
In-Reply-To: <4BD8C4B0.3000302@braverock.com>
References: <616669.14075.qm@web23405.mail.ird.yahoo.com>
	<4BD8C4B0.3000302@braverock.com>
Message-ID: <177574.74327.qm@web23404.mail.ird.yahoo.com>

Understood.  

But in order to mark the book at some point you will need historical data of the contracts. How is the link from the contract specifications, using the future() and future_series() functions to the actual 
historical data. What would be the equivalent to the example of a stock like this:

#Defined the stock as financial instrument
stock("GSPC",currency="USD",multiplier=1) 
#Get the historical data for variable with name "GSPC"
getSymbols('^GSPC', src='yahoo', index.class=c("POSIXt","POSIXct"),from='1998-01-01') 

Assuming I have the time series for CLM9 and CLN9 in an xts format

CLM9
            Open  High   Low Close Volume OpenInterest
2009-03-23 54.28 55.92 53.57 55.73  78959       187205
2009-03-24 55.50 55.70 54.38 55.63  75464       190182
2009-03-25 55.35 55.58 53.50 54.19 119624       198422
...
2009-05-19 59.16 60.48 58.55 59.65  40957         1838

and

CLN9
            Open  High   Low Close Volume OpenInterest
2009-04-22 50.95 51.14 49.72 50.70  95249       178023
2009-04-23 50.38 51.38 50.09 51.07  90781       181605
2009-04-24 51.13 53.09 50.40 52.94  70061       187690
...
2009-06-22 69.89 69.89 66.25 66.93  32070         4299

Regards,


 Wolfgang Wu



----- Urspr?ngliche Mail ----
Von: Brian G. Peterson <brian at braverock.com>
An: Wolfgang Wu <wobwu22 at yahoo.de>
CC: R SIG Finance <R-SIG-Finance at stat.math.ethz.ch>
Gesendet: Donnerstag, den 29. April 2010, 0:28:48 Uhr
Betreff: Re: [R-SIG-Finance] Blotter - Setting up a futures_series

Wolfgang Wu wrote:
> Hello,
> 
> I am playing around with blotter and am trying to set up several futures contracts. So assume I've got data for the crude oil future CL. I want to set up futures for the June 09 and July 09 contract. 
> What I've done is the following:
> 
> currency("USD", multiplier=1);    future("CL", "USD", 1000, identifiers=c("CLM9", "CLN9"))
> future_series("CL", "M9", "2009-03-23", "2009-05-19")
> future_series("CL", "N9", "2009-04-22", "2009-06-22")
> 
> 
> 1.) How do I link the future to the future_series? I assume this is by using the primary_id, correct?

correct

> 2.) What do I specify in the identifiers in the futures function? 

anything or nothing at all.  identifiers are for other symbols, e.g. Bloomberg, Reuters, etc.  In your example, I would probably not add identifiers to the main contract.

> 3.) What is the multiplier in the future mean? Is it the value for one tick or for one point? So for oil one tick is 10 USD and one point move is 1000 USD. 

'point value' in your terminology.  It is used to get from the price to the notional value in the listed currency.  I'll probably add tick value to the model later this week.

> Thanks!!!

You're welcome.

Regards,

   - Brian

> Wolfgang Wu
> 
> 
> 
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


-- Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock





From brian at braverock.com  Thu Apr 29 13:21:36 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 29 Apr 2010 06:21:36 -0500
Subject: [R-SIG-Finance] Blotter - Setting up a futures_series
In-Reply-To: <177574.74327.qm@web23404.mail.ird.yahoo.com>
References: <616669.14075.qm@web23405.mail.ird.yahoo.com>
	<4BD8C4B0.3000302@braverock.com>
	<177574.74327.qm@web23404.mail.ird.yahoo.com>
Message-ID: <4BD96BC0.5070907@braverock.com>

On 04/29/2010 02:15 AM, Wolfgang Wu wrote:
> Understood.
>
> But in order to mark the book at some point you will need historical data of the contracts. How is the link from the contract specifications, using the future() and future_series() functions to the actual
> historical data. What would be the equivalent to the example of a stock like this:
>
> #Defined the stock as financial instrument
> stock("GSPC",currency="USD",multiplier=1)
> #Get the historical data for variable with name "GSPC"
> getSymbols('^GSPC', src='yahoo', index.class=c("POSIXt","POSIXct"),from='1998-01-01')
>
> Assuming I have the time series for CLM9 and CLN9 in an xts format
>    


FinancialInstrument uses an underscore to separate the root symbol 
(primary_id) from the series symbol (suffix_id).  In your example, this 
means that your historical contract series data should be named

CL_M9
CL_N9

So that the blotter code can find them (blotter follows the quantmod 
convention of naming market data for the instrument)

you can see this by doing

ls(pos=.instrument)

which will show you the environment where the instrument definition 
objects are kept.

Regards,

   - Brian


> CLM9
>              Open  High   Low Close Volume OpenInterest
> 2009-03-23 54.28 55.92 53.57 55.73  78959       187205
> 2009-03-24 55.50 55.70 54.38 55.63  75464       190182
> 2009-03-25 55.35 55.58 53.50 54.19 119624       198422
> ...
> 2009-05-19 59.16 60.48 58.55 59.65  40957         1838
>
> and
>
> CLN9
>              Open  High   Low Close Volume OpenInterest
> 2009-04-22 50.95 51.14 49.72 50.70  95249       178023
> 2009-04-23 50.38 51.38 50.09 51.07  90781       181605
> 2009-04-24 51.13 53.09 50.40 52.94  70061       187690
> ...
> 2009-06-22 69.89 69.89 66.25 66.93  32070         4299
>
> Regards,
>
>
>   Wolfgang Wu
>
>
>
> ----- Urspr?ngliche Mail ----
> Von: Brian G. Peterson<brian at braverock.com>
> An: Wolfgang Wu<wobwu22 at yahoo.de>
> CC: R SIG Finance<R-SIG-Finance at stat.math.ethz.ch>
> Gesendet: Donnerstag, den 29. April 2010, 0:28:48 Uhr
> Betreff: Re: [R-SIG-Finance] Blotter - Setting up a futures_series
>
> Wolfgang Wu wrote:
>    
>> Hello,
>>
>> I am playing around with blotter and am trying to set up several futures contracts. So assume I've got data for the crude oil future CL. I want to set up futures for the June 09 and July 09 contract.
>> What I've done is the following:
>>
>> currency("USD", multiplier=1);    future("CL", "USD", 1000, identifiers=c("CLM9", "CLN9"))
>> future_series("CL", "M9", "2009-03-23", "2009-05-19")
>> future_series("CL", "N9", "2009-04-22", "2009-06-22")
>>
>>
>> 1.) How do I link the future to the future_series? I assume this is by using the primary_id, correct?
>>      
> correct
>
>    
>> 2.) What do I specify in the identifiers in the futures function?
>>      
> anything or nothing at all.  identifiers are for other symbols, e.g. Bloomberg, Reuters, etc.  In your example, I would probably not add identifiers to the main contract.
>
>    
>> 3.) What is the multiplier in the future mean? Is it the value for one tick or for one point? So for oil one tick is 10 USD and one point move is 1000 USD.
>>      
> 'point value' in your terminology.  It is used to get from the price to the notional value in the listed currency.  I'll probably add tick value to the model later this week.
>
>    
>> Thanks!!!
>>      
> You're welcome.
>
> Regards,
>
>     - Brian
>
>    
>> Wolfgang Wu
>>
>>
>>
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>      
>
> -- Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
>
>
>
>    


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From wobwu22 at yahoo.de  Thu Apr 29 15:44:32 2010
From: wobwu22 at yahoo.de (Wolfgang Wu)
Date: Thu, 29 Apr 2010 13:44:32 +0000 (GMT)
Subject: [R-SIG-Finance] Blotter - Setting up a futures_series
In-Reply-To: <4BD96BC0.5070907@braverock.com>
References: <616669.14075.qm@web23405.mail.ird.yahoo.com>
	<4BD8C4B0.3000302@braverock.com>
	<177574.74327.qm@web23404.mail.ird.yahoo.com>
	<4BD96BC0.5070907@braverock.com>
Message-ID: <260117.97523.qm@web23405.mail.ird.yahoo.com>

Sorry for being a pain in the neck but I've got another problem

When running the folloing code I get the error when I call updatePortf(): Error in if (!all(i <= 0)) stop("only zeros may be mixed with negative subscripts") : 
  missing value where TRUE/FALSE needed

#Example
library(FinancialInstrument)
library(blotter)
currency("USD", multiplier=1);    
future("TE", "USD", 1000)
future_series("TE", "M9", "2009-01-02", "2009-01-03")
future_series("TE", "N9", "2009-01-03", "2009-01-04")

TE_M9 <- xts(rbind(cbind(54.28, 55.92, 53.57, 55.73, 78959, 1), cbind(55.50, 55.70, 54.38, 55.63,  75464, 2)), order.by=as.Date(c("2009-01-02", "2009-01-03")))
colnames(TE_M9) <- c("Open","High","Low","Close","Volume", "OpenInterest");

TE_N9 <- xts(rbind(cbind(54.28, 55.92, 53.57, 55.73, 78959, 1), cbind(55.50, 55.70, 54.38, 55.63,  75464, 2)), order.by=as.Date(c("2009-01-03", "2009-01-04")))
colnames(TE_N9) <- c("Open","High","Low","Close","Volume", "OpenInterest");

initPortf(name='fPortfolio', symbols = c('TE_M9', 'TE_N9'), initPosQty = 0, initDate='2009-01-01')
initAcct(name='fAccount',portfolios='fPortfolio', initDate='2009-01-01', initEq=10000000);
addTxn('fPortfolio', Symbol='TE_M9', TxnDate="2009-01-02", TxnPrice=55, TxnQty=100, TxnFees=0, verbose=TRUE);
updatePortf(Portfolio='fPortfolio', Dates = "2009-01-02");
#-----------------------------------------------

Any idea what I am doing wrong or where the problem is?

Thanks!!

 Wolfgang Wu



----- Urspr?ngliche Mail ----
Von: Brian G. Peterson <brian at braverock.com>
An: Wolfgang Wu <wobwu22 at yahoo.de>; R SIG Finance <R-SIG-Finance at stat.math.ethz.ch>
Gesendet: Donnerstag, den 29. April 2010, 12:21:36 Uhr
Betreff: Re: AW: [R-SIG-Finance] Blotter - Setting up a futures_series

On 04/29/2010 02:15 AM, Wolfgang Wu wrote:
> Understood.
>
> But in order to mark the book at some point you will need historical data of the contracts. How is the link from the contract specifications, using the future() and future_series() functions to the actual
> historical data. What would be the equivalent to the example of a stock like this:
>
> #Defined the stock as financial instrument
> stock("GSPC",currency="USD",multiplier=1)
> #Get the historical data for variable with name "GSPC"
> getSymbols('^GSPC', src='yahoo', index.class=c("POSIXt","POSIXct"),from='1998-01-01')
>
> Assuming I have the time series for CLM9 and CLN9 in an xts format
>    


FinancialInstrument uses an underscore to separate the root symbol 
(primary_id) from the series symbol (suffix_id).  In your example, this 
means that your historical contract series data should be named

CL_M9
CL_N9

So that the blotter code can find them (blotter follows the quantmod 
convention of naming market data for the instrument)

you can see this by doing

ls(pos=.instrument)

which will show you the environment where the instrument definition 
objects are kept.

Regards,

   - Brian


> CLM9
>              Open  High   Low Close Volume OpenInterest
> 2009-03-23 54.28 55.92 53.57 55.73  78959       187205
> 2009-03-24 55.50 55.70 54.38 55.63  75464       190182
> 2009-03-25 55.35 55.58 53.50 54.19 119624       198422
> ...
> 2009-05-19 59.16 60.48 58.55 59.65  40957         1838
>
> and
>
> CLN9
>              Open  High   Low Close Volume OpenInterest
> 2009-04-22 50.95 51.14 49.72 50.70  95249       178023
> 2009-04-23 50.38 51.38 50.09 51.07  90781       181605
> 2009-04-24 51.13 53.09 50.40 52.94  70061       187690
> ...
> 2009-06-22 69.89 69.89 66.25 66.93  32070         4299
>
> Regards,
>
>
>   Wolfgang Wu
>
>
>
> ----- Urspr?ngliche Mail ----
> Von: Brian G. Peterson<brian at braverock.com>
> An: Wolfgang Wu<wobwu22 at yahoo.de>
> CC: R SIG Finance<R-SIG-Finance at stat.math.ethz.ch>
> Gesendet: Donnerstag, den 29. April 2010, 0:28:48 Uhr
> Betreff: Re: [R-SIG-Finance] Blotter - Setting up a futures_series
>
> Wolfgang Wu wrote:
>    
>> Hello,
>>
>> I am playing around with blotter and am trying to set up several futures contracts. So assume I've got data for the crude oil future CL. I want to set up futures for the June 09 and July 09 contract.
>> What I've done is the following:
>>
>> currency("USD", multiplier=1);    future("CL", "USD", 1000, identifiers=c("CLM9", "CLN9"))
>> future_series("CL", "M9", "2009-03-23", "2009-05-19")
>> future_series("CL", "N9", "2009-04-22", "2009-06-22")
>>
>>
>> 1.) How do I link the future to the future_series? I assume this is by using the primary_id, correct?
>>      
> correct
>
>    
>> 2.) What do I specify in the identifiers in the futures function?
>>      
> anything or nothing at all.  identifiers are for other symbols, e.g. Bloomberg, Reuters, etc.  In your example, I would probably not add identifiers to the main contract.
>
>    
>> 3.) What is the multiplier in the future mean? Is it the value for one tick or for one point? So for oil one tick is 10 USD and one point move is 1000 USD.
>>      
> 'point value' in your terminology.  It is used to get from the price to the notional value in the listed currency.  I'll probably add tick value to the model later this week.
>
>    
>> Thanks!!!
>>      
> You're welcome.
>
> Regards,
>
>     - Brian
>
>    
>> Wolfgang Wu
>>
>>
>>
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>      
>
> -- Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
>
>
>
>    


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock




From benjifamel at gmail.com  Fri Apr 30 15:41:20 2010
From: benjifamel at gmail.com (Benji Famel)
Date: Fri, 30 Apr 2010 09:41:20 -0400
Subject: [R-SIG-Finance] Output of fExoticOptions
Message-ID: <AD5A9AA0-D1F7-415A-8F94-360E7FEEF5A5@gmail.com>

I have a question of ignorance:
I am using the SpreadApproxOption from the fOption package and noticed  
that, despite the value described as " the option price, a numerical  
value",  the output of the function is an fOption object. How do I  
extract the option price from it, ignoring the rest of the output  
which includes quite a bit of text? The reason is that I  want to call  
this function from within excel and the additional text is causing an  
#RError.
Thank you for any info you may have.

Sent from my mobile device.


From fabianterner at gmail.com  Sat May  1 02:32:13 2010
From: fabianterner at gmail.com (FaTeR)
Date: Fri, 30 Apr 2010 17:32:13 -0700 (PDT)
Subject: [R-SIG-Finance] How to include additional explanatory variables in
 the GARCH variance equation?
Message-ID: <1272673933169-2077659.post@n4.nabble.com>


Hello List,

I want to fit a garch model that has additional explanatory variables in the
variance equation, i.e.

h(t) = garch(1,1) + w*aexp(t-1),

where aexp is a vector of several additonal (lagged) variables to explain
volatility (like trading volume, or intraday/realized volatility measures).

Has somebody already implemented something like this in R? The only option I
see right now (apart from using another statistics programme like eViews, or
OxMetrics), is to adjust the garchFit function from the fGarch package,
which seems quite cumbersome. Has anybody built another function that allows
for that feature?? Any hints or comments would be highly welcome! Many
thanks in advance!!

Regards,

Fabian

-- 
View this message in context: http://r.789695.n4.nabble.com/How-to-include-additional-explanatory-variables-in-the-GARCH-variance-equation-tp2077659p2077659.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Sat May  1 03:43:56 2010
From: alexios at 4dscape.com (alexios)
Date: Sat, 01 May 2010 02:43:56 +0100
Subject: [R-SIG-Finance] How to include additional explanatory variables
 in the GARCH variance equation?
In-Reply-To: <1272673933169-2077659.post@n4.nabble.com>
References: <1272673933169-2077659.post@n4.nabble.com>
Message-ID: <4BDB875C.9030604@4dscape.com>

The rgarch package on r-forge already implements this functionality.

Check here for download locations:
http://rgarch.r-forge.r-project.org/download.html

See the ugarchspec function for details.

-Alexios Ghalanos

On 5/1/2010 1:32 AM, FaTeR wrote:
>
> Hello List,
>
> I want to fit a garch model that has additional explanatory variables in the
> variance equation, i.e.
>
> h(t) = garch(1,1) + w*aexp(t-1),
>
> where aexp is a vector of several additonal (lagged) variables to explain
> volatility (like trading volume, or intraday/realized volatility measures).
>
> Has somebody already implemented something like this in R? The only option I
> see right now (apart from using another statistics programme like eViews, or
> OxMetrics), is to adjust the garchFit function from the fGarch package,
> which seems quite cumbersome. Has anybody built another function that allows
> for that feature?? Any hints or comments would be highly welcome! Many
> thanks in advance!!
>
> Regards,
>
> Fabian
>


From kmmatoba at stanford.edu  Sat May  1 07:45:39 2010
From: kmmatoba at stanford.edu (Kyle Matoba)
Date: Fri, 30 Apr 2010 22:45:39 -0700
Subject: [R-SIG-Finance] 'tail' method for its object
Message-ID: <w2yb72a69661004302245p972f0c5ehd342c0180f812ca2@mail.gmail.com>

Wanted to raise this in case it wasn't known (its version 1.1.8):

> library(quantmod)
> getSymbols("A",src="yahoo", return.class="its")
[1] "A"
> head(A)
An object of class ?its?
           A.Open A.High A.Low A.Close A.Volume A.Adjusted
2007-01-03  34.99  35.48 34.05   34.30  2574600      34.30
2007-01-04  34.30  34.60 33.46   34.41  2073700      34.41
2007-01-05  34.30  34.40 34.00   34.09  2676600      34.09
2007-01-08  33.98  34.08 33.68   33.97  1557200      33.97
2007-01-09  34.08  34.32 33.63   34.01  1386200      34.01
2007-01-10  34.04  34.04 33.37   33.70  2157400      33.70
Slot "dates":
[1] "2007-01-03 PST" "2007-01-04 PST" "2007-01-05 PST" "2007-01-08 PST"
[5] "2007-01-09 PST" "2007-01-10 PST"

> tail(A)
Error in x[seq.int(to = xlen, length.out = n)] : subscript out of bounds

Thanks for the good work Whit!

Kyle


From shekhardk at gmail.com  Sat May  1 10:57:00 2010
From: shekhardk at gmail.com (Shekhar Gupta)
Date: Sat, 1 May 2010 03:57:00 -0500
Subject: [R-SIG-Finance] Recent graduate looking for a job
Message-ID: <i2y9c818bb61005010157v31712b56of61eafa39455d27c@mail.gmail.com>

Hi everyone,

I am a recent graduate from IIT Chicago and have completed my MS
degree in finance (with concentrations in financial engineering,
investment management and trading). I am currently looking for a job
in the finance industry and would really appreciate if you could
forward me any current job opportunities that you may know of.
I have strong programming & quantitative skills and have completed
many projects in R language.
Any help will be deeply appreciated.

Thank you for your time.

Sincerely,
Shekhar Gupta


From armstrong.whit at gmail.com  Mon May  3 01:25:39 2010
From: armstrong.whit at gmail.com (Whit Armstrong)
Date: Sun, 2 May 2010 19:25:39 -0400
Subject: [R-SIG-Finance] 'tail' method for its object
In-Reply-To: <w2yb72a69661004302245p972f0c5ehd342c0180f812ca2@mail.gmail.com>
References: <w2yb72a69661004302245p972f0c5ehd342c0180f812ca2@mail.gmail.com>
Message-ID: <h2h8ec76081005021625pda1298f2o43eedc25e3c7ef77@mail.gmail.com>

Thanks for reporting this. I'll have a look.

On Sat, May 1, 2010 at 1:45 AM, Kyle Matoba <kmmatoba at stanford.edu> wrote:
> Wanted to raise this in case it wasn't known (its version 1.1.8):
>
>> library(quantmod)
>> getSymbols("A",src="yahoo", return.class="its")
> [1] "A"
>> head(A)
> An object of class ?its?
> ? ? ? ? ? A.Open A.High A.Low A.Close A.Volume A.Adjusted
> 2007-01-03 ?34.99 ?35.48 34.05 ? 34.30 ?2574600 ? ? ?34.30
> 2007-01-04 ?34.30 ?34.60 33.46 ? 34.41 ?2073700 ? ? ?34.41
> 2007-01-05 ?34.30 ?34.40 34.00 ? 34.09 ?2676600 ? ? ?34.09
> 2007-01-08 ?33.98 ?34.08 33.68 ? 33.97 ?1557200 ? ? ?33.97
> 2007-01-09 ?34.08 ?34.32 33.63 ? 34.01 ?1386200 ? ? ?34.01
> 2007-01-10 ?34.04 ?34.04 33.37 ? 33.70 ?2157400 ? ? ?33.70
> Slot "dates":
> [1] "2007-01-03 PST" "2007-01-04 PST" "2007-01-05 PST" "2007-01-08 PST"
> [5] "2007-01-09 PST" "2007-01-10 PST"
>
>> tail(A)
> Error in x[seq.int(to = xlen, length.out = n)] : subscript out of bounds
>
> Thanks for the good work Whit!
>
> Kyle
>


From karlavhv142 at hotmail.com  Mon May  3 15:43:13 2010
From: karlavhv142 at hotmail.com (karla hernandez villafuerte)
Date: Mon, 3 May 2010 07:43:13 -0600
Subject: [R-SIG-Finance] Cointegration, more than one structural break
In-Reply-To: <111060c21001270608i6c2e773dwe15e47f07a076dcd@mail.gmail.com>
References: <COL124-W622B2B85C6C07B6DB781CFE55F0@phx.gbl>,
	<111060c21001270608i6c2e773dwe15e47f07a076dcd@mail.gmail.com>
Message-ID: <COL124-W23C3C519F82969834C7A30E5F20@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100503/700e8d71/attachment.pl>

From matthieu.stigler at gmail.com  Mon May  3 20:52:13 2010
From: matthieu.stigler at gmail.com (mat)
Date: Tue, 04 May 2010 00:22:13 +0530
Subject: [R-SIG-Finance] Cointegration, more than one structural break
In-Reply-To: <COL124-W23C3C519F82969834C7A30E5F20@phx.gbl>
References: <COL124-W622B2B85C6C07B6DB781CFE55F0@phx.gbl>,
	<111060c21001270608i6c2e773dwe15e47f07a076dcd@mail.gmail.com>
	<COL124-W23C3C519F82969834C7A30E5F20@phx.gbl>
Message-ID: <4BDF1B5D.1080300@gmail.com>

karla hernandez villafuerte a ?crit :
> Hi!
>  
> I have taken your recomendation and I am trying to apply the 
> methodology suggested by Kejriwal and Perron in the paper "Testing for 
> Multiple Structural Changes in Cointegrated Regression Models". I 
> think that if I use the "strucchange" package and the function 
> "breakpoints", I will get the break points and dates with the same 
> methodology described in the paper.
true. So the good news for this paper is that all the estimation part is 
already available thanks to the strucchange pkg
>  
> In order to prove if the number of breaks found by the "breakpoint" 
> function is significant I want to apply the sup-Wald test. I am not 
> sure if a normal supWald test is correct of if I need to implement 
> some kind of modifications. In my case all the coefficients are 
> allowed to change. I send you the program that I am using.
I feel you will need to look more precisely into the paper:
-KP don't use fluctuation if I remember well, no?
-the test statistic (here wald test) is right, but they use also 
modified forms  in case of autocorellation or endogeneity
-the critical values have to be taken from their paper

Hope this helps

Matthieu
>  
> > ##BREAKS POINTS CALCULATION
> >
> > lrun
>
> YX[, 1] ~ YX[, 2] + dattowork[, 1] + 0
> >
> > #Empirical Fluctuation process
> > flproc <- efp(lrun, type = "RE")
> > print(sctest(flproc))
>  
>         RE test (recursive estimates test)
> data:  flproc
> RE = 3.6801, p-value = 6.893e-12
>  
> > #Bai and Perron
> > breaks<-breakpoints(lrun, h = 0.15, breaks = 3, hpc = c("none"))
> > print(breaks)
>          Optimal 4-segment partition:
> Call:
> breakpoints.formula(formula = lrun, h = 0.15, breaks = 3, hpc = c("none"))
> Breakpoints at observation number:
> 54 127 155
> Corresponding to breakdates:
> 1994(7) 2000(8) 2002(12)
>
> > dummy<-ts(rep(1,length(YXSR[,1])),start=startlag,frequency=12)
> > dummy1<-dummy; 
> dummy1[breaks$breakpoints[1]:(breaks$breakpoints[2]-1)]<-0
> > dummy2<-dummy; 
> dummy2[breaks$breakpoints[2]:(breaks$breakpoints[3]-1)]<-0
> > lrunbreak<-update.formula(lrun, . ~ . + dummy1 + dummy2)
> > longrbreak<-dyn$lm(lrunbreak)
>
> > Waldt<-wald.test(vcov(longrbreak), longrbreak$coefficients, Terms=3:4)
> > print(Waldt)
> Wald test:
> ----------
> Chi-squared test:
> X2 = 28.0, df = 2, P(> X2) = 8.2e-07
>
>  
> In advance thank you for your help!,
>  
>  
> Karla Hern?ndez
>  
>  
>  
>  
>  
>  
>  
>
>  
> ------------------------------------------------------------------------
> Date: Wed, 27 Jan 2010 15:08:05 +0100
> Subject: Re: [R-SIG-Finance] Cointegration, more than one structural break
> From: matthieu.stigler at gmail.com
> To: karlavhv142 at hotmail.com
> CC: r-sig-finance at stat.math.ethz.ch
>
> Hi
>
> Testing for multiple breaks in the cointegration framewk is 
> unfortunately for now not possible in R.
>
> For one break, you have a test in the urca/vars package, as well as 
> the Gregory Hansen Test (I had implemented it so I can send once raw 
> code if needed).
>
> If you want to implement a test for multiple breaks in cointegration, 
> have a look at the work of Kejriwal and Perron.
>
> Hope this helps
>
> Mat
>
>
>
> 2010/1/25 karla hernandez villafuerte <karlavhv142 at hotmail.com 
> <mailto:karlavhv142 at hotmail.com>>
>
>
>
>
>     Dear Members:
>
>
>
>     I want to analyse the cointegration rank using the Engle and
>     Granger methodology and taking into account the presence of more
>     than one structural break in the long run relation.
>
>     I can not find how to do that using R. If some one have a
>     suggestion I would be very glad.
>
>
>
>     Thank you!
>
>
>
>     Karla H.
>
>     _________________________________________________________________
>
>
>            [[alternative HTML version deleted]]
>
>     _______________________________________________
>     R-SIG-Finance at stat.math.ethz.ch
>     <mailto:R-SIG-Finance at stat.math.ethz.ch> mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>     -- Subscriber-posting only. If you want to post, subscribe first.
>     -- Also note that this is not the r-help list where general R
>     questions should go.
>
>
>
> ------------------------------------------------------------------------
> Con Hotmail hay una forma muy f?cil de encontrar tus emails: 
> organ?zalos por carpetas. Conoce c?mo 
> <http://www.descubrewindowslive.com/hotmail/organizacion.asp>


From sue at xlsolutions-corp.com  Wed May  5 03:29:21 2010
From: sue at xlsolutions-corp.com (sue at xlsolutions-corp.com)
Date: Tue, 04 May 2010 18:29:21 -0700
Subject: [R-SIG-Finance] Openings in the Consulting Department of
	XLSolutions Corp
Message-ID: <20100504182921.aa8924c5d28ca71e2a043bb294e795eb.109f6c59b4.wbe@mobilemail.secureserver.net>

Dear useRs,

Please help me find the ideal candidates for 2 R programming consulting
positions at XLSolutions Corp. 

The job entails building custom applications for our end users. R
programming is vital and skill in data analysis is important. If you are
interested in working with our consulting group, please contact me.

Please pass along to your contacts and If you have questions, please
email me. Telecommuting is possible for these openings.

Regards
 
 Jennifer McDonald
 Assistant to Mary RITZ
 Research and Consulting
 XLSolutions Corporation 
 North American Division 
 1700 7th Ave 
 Suite 2100 
 Seattle, WA 98101 
 Phone: 206-686-1578 
 Email: jen at xlsolutions-corp.com 
 web: www.xlsolutions-corp.com/rcourses 


From wobwu22 at yahoo.de  Thu May  6 12:23:46 2010
From: wobwu22 at yahoo.de (Wolfgang Wu)
Date: Thu, 6 May 2010 10:23:46 +0000 (GMT)
Subject: [R-SIG-Finance] Blotter - Setting up a futures_series
In-Reply-To: <260117.97523.qm@web23405.mail.ird.yahoo.com>
References: <616669.14075.qm@web23405.mail.ird.yahoo.com>
	<4BD8C4B0.3000302@braverock.com>
	<177574.74327.qm@web23404.mail.ird.yahoo.com>
	<4BD96BC0.5070907@braverock.com>
	<260117.97523.qm@web23405.mail.ird.yahoo.com>
Message-ID: <42510.32835.qm@web23403.mail.ird.yahoo.com>

It seems like the error occurs when you run updatePortf() for a date where one of the symbols are not defined. So TE_N9 doesn't have a row for the date '2009-01-02' which is causing this error. I guess this will happen often as there might be holidays or non trading days which might be different for different symbols (maybe trading on different exchanges, etc..).  Are there any work-arounds to this problem?

Also is it possible to add or remove symbols to a portfolio object later than initPortf? 

Thanks


 Wolfgang Wu



----- Urspr?ngliche Mail ----
Von: Wolfgang Wu <wobwu22 at yahoo.de>
An: Brian G. Peterson <brian at braverock.com>; R SIG Finance <R-SIG-Finance at stat.math.ethz.ch>
Gesendet: Donnerstag, den 29. April 2010, 14:44:32 Uhr
Betreff: Re: [R-SIG-Finance] Blotter - Setting up a futures_series

Sorry for being a pain in the neck but I've got another problem

When running the folloing code I get the error when I call updatePortf(): Error in if (!all(i <= 0)) stop("only zeros may be mixed with negative subscripts") : 
  missing value where TRUE/FALSE needed

#Example
library(FinancialInstrument)
library(blotter)
currency("USD", multiplier=1);    
future("TE", "USD", 1000)
future_series("TE", "M9", "2009-01-02", "2009-01-03")
future_series("TE", "N9", "2009-01-03", "2009-01-04")

TE_M9 <- xts(rbind(cbind(54.28, 55.92, 53.57, 55.73, 78959, 1), cbind(55.50, 55.70, 54.38, 55.63,  75464, 2)), order.by=as.Date(c("2009-01-02", "2009-01-03")))
colnames(TE_M9) <- c("Open","High","Low","Close","Volume", "OpenInterest");

TE_N9 <- xts(rbind(cbind(54.28, 55.92, 53.57, 55.73, 78959, 1), cbind(55.50, 55.70, 54.38, 55.63,  75464, 2)), order.by=as.Date(c("2009-01-03", "2009-01-04")))
colnames(TE_N9) <- c("Open","High","Low","Close","Volume", "OpenInterest");

initPortf(name='fPortfolio', symbols = c('TE_M9', 'TE_N9'), initPosQty = 0, initDate='2009-01-01')
initAcct(name='fAccount',portfolios='fPortfolio', initDate='2009-01-01', initEq=10000000);
addTxn('fPortfolio', Symbol='TE_M9', TxnDate="2009-01-02", TxnPrice=55, TxnQty=100, TxnFees=0, verbose=TRUE);
updatePortf(Portfolio='fPortfolio', Dates = "2009-01-02");
#-----------------------------------------------

Any idea what I am doing wrong or where the problem is?

Thanks!!

Wolfgang Wu



----- Urspr?ngliche Mail ----
Von: Brian G. Peterson <brian at braverock.com>
An: Wolfgang Wu <wobwu22 at yahoo.de>; R SIG Finance <R-SIG-Finance at stat.math.ethz.ch>
Gesendet: Donnerstag, den 29. April 2010, 12:21:36 Uhr
Betreff: Re: AW: [R-SIG-Finance] Blotter - Setting up a futures_series

On 04/29/2010 02:15 AM, Wolfgang Wu wrote:
> Understood.
>
> But in order to mark the book at some point you will need historical data of the contracts. How is the link from the contract specifications, using the future() and future_series() functions to the actual
> historical data. What would be the equivalent to the example of a stock like this:
>
> #Defined the stock as financial instrument
> stock("GSPC",currency="USD",multiplier=1)
> #Get the historical data for variable with name "GSPC"
> getSymbols('^GSPC', src='yahoo', index.class=c("POSIXt","POSIXct"),from='1998-01-01')
>
> Assuming I have the time series for CLM9 and CLN9 in an xts format
>    


FinancialInstrument uses an underscore to separate the root symbol 
(primary_id) from the series symbol (suffix_id).  In your example, this 
means that your historical contract series data should be named

CL_M9
CL_N9

So that the blotter code can find them (blotter follows the quantmod 
convention of naming market data for the instrument)

you can see this by doing

ls(pos=.instrument)

which will show you the environment where the instrument definition 
objects are kept.

Regards,

   - Brian


> CLM9
>              Open  High   Low Close Volume OpenInterest
> 2009-03-23 54.28 55.92 53.57 55.73  78959       187205
> 2009-03-24 55.50 55.70 54.38 55.63  75464       190182
> 2009-03-25 55.35 55.58 53.50 54.19 119624       198422
> ...
> 2009-05-19 59.16 60.48 58.55 59.65  40957         1838
>
> and
>
> CLN9
>              Open  High   Low Close Volume OpenInterest
> 2009-04-22 50.95 51.14 49.72 50.70  95249       178023
> 2009-04-23 50.38 51.38 50.09 51.07  90781       181605
> 2009-04-24 51.13 53.09 50.40 52.94  70061       187690
> ...
> 2009-06-22 69.89 69.89 66.25 66.93  32070         4299
>
> Regards,
>
>
>   Wolfgang Wu
>
>
>
> ----- Urspr?ngliche Mail ----
> Von: Brian G. Peterson<brian at braverock.com>
> An: Wolfgang Wu<wobwu22 at yahoo.de>
> CC: R SIG Finance<R-SIG-Finance at stat.math.ethz.ch>
> Gesendet: Donnerstag, den 29. April 2010, 0:28:48 Uhr
> Betreff: Re: [R-SIG-Finance] Blotter - Setting up a futures_series
>
> Wolfgang Wu wrote:
>    
>> Hello,
>>
>> I am playing around with blotter and am trying to set up several futures contracts. So assume I've got data for the crude oil future CL. I want to set up futures for the June 09 and July 09 contract.
>> What I've done is the following:
>>
>> currency("USD", multiplier=1);    future("CL", "USD", 1000, identifiers=c("CLM9", "CLN9"))
>> future_series("CL", "M9", "2009-03-23", "2009-05-19")
>> future_series("CL", "N9", "2009-04-22", "2009-06-22")
>>
>>
>> 1.) How do I link the future to the future_series? I assume this is by using the primary_id, correct?
>>      
> correct
>
>    
>> 2.) What do I specify in the identifiers in the futures function?
>>      
> anything or nothing at all.  identifiers are for other symbols, e.g. Bloomberg, Reuters, etc.  In your example, I would probably not add identifiers to the main contract.
>
>    
>> 3.) What is the multiplier in the future mean? Is it the value for one tick or for one point? So for oil one tick is 10 USD and one point move is 1000 USD.
>>      
> 'point value' in your terminology.  It is used to get from the price to the notional value in the listed currency.  I'll probably add tick value to the model later this week.
>
>    
>> Thanks!!!
>>      
> You're welcome.
>
> Regards,
>
>     - Brian
>
>    
>> Wolfgang Wu
>>
>>
>>
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>      
>
> -- Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
>
>
>
>    


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock



_______________________________________________
R-SIG-Finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.





From brian at braverock.com  Thu May  6 12:46:14 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 06 May 2010 05:46:14 -0500
Subject: [R-SIG-Finance] Blotter - Setting up a futures_series
In-Reply-To: <42510.32835.qm@web23403.mail.ird.yahoo.com>
References: <616669.14075.qm@web23405.mail.ird.yahoo.com>
	<4BD8C4B0.3000302@braverock.com>
	<177574.74327.qm@web23404.mail.ird.yahoo.com>
	<4BD96BC0.5070907@braverock.com>
	<260117.97523.qm@web23405.mail.ird.yahoo.com>
	<42510.32835.qm@web23403.mail.ird.yahoo.com>
Message-ID: <4BE29DF6.3000703@braverock.com>

Wolfgang Wu wrote:
> It seems like the error occurs when you run updatePortf() for a date where one of the symbols are not defined. So TE_N9 doesn't have a row for the date '2009-01-02' which is causing this error. I guess this will happen often as there might be holidays or non trading days which might be different for different symbols (maybe trading on different exchanges, etc..).  Are there any work-arounds to this problem?

That sounds like a bug.  I'll check and fix it to make sure updatePortf won't 
try to update a particular instrument beyond it's last traded date.  Ideally, 
the historical instrument data will be tested with 'try' and a warning rather 
than a fatal error will be generated.  I'll try to get to it tomorrow or over 
the weekend.

> Also is it possible to add or remove symbols to a portfolio object later than initPortf? 

On the list of functions to write...  contributed functions welcome.

Regards,

    - Brian

> Thanks
> 
> 
>  Wolfgang Wu
> 
> 
> 
> ----- Urspr?ngliche Mail ----
> Von: Wolfgang Wu <wobwu22 at yahoo.de>
> An: Brian G. Peterson <brian at braverock.com>; R SIG Finance <R-SIG-Finance at stat.math.ethz.ch>
> Gesendet: Donnerstag, den 29. April 2010, 14:44:32 Uhr
> Betreff: Re: [R-SIG-Finance] Blotter - Setting up a futures_series
> 
> Sorry for being a pain in the neck but I've got another problem
> 
> When running the folloing code I get the error when I call updatePortf(): Error in if (!all(i <= 0)) stop("only zeros may be mixed with negative subscripts") : 
>   missing value where TRUE/FALSE needed
> 
> #Example
> library(FinancialInstrument)
> library(blotter)
> currency("USD", multiplier=1);    
> future("TE", "USD", 1000)
> future_series("TE", "M9", "2009-01-02", "2009-01-03")
> future_series("TE", "N9", "2009-01-03", "2009-01-04")
> 
> TE_M9 <- xts(rbind(cbind(54.28, 55.92, 53.57, 55.73, 78959, 1), cbind(55.50, 55.70, 54.38, 55.63,  75464, 2)), order.by=as.Date(c("2009-01-02", "2009-01-03")))
> colnames(TE_M9) <- c("Open","High","Low","Close","Volume", "OpenInterest");
> 
> TE_N9 <- xts(rbind(cbind(54.28, 55.92, 53.57, 55.73, 78959, 1), cbind(55.50, 55.70, 54.38, 55.63,  75464, 2)), order.by=as.Date(c("2009-01-03", "2009-01-04")))
> colnames(TE_N9) <- c("Open","High","Low","Close","Volume", "OpenInterest");
> 
> initPortf(name='fPortfolio', symbols = c('TE_M9', 'TE_N9'), initPosQty = 0, initDate='2009-01-01')
> initAcct(name='fAccount',portfolios='fPortfolio', initDate='2009-01-01', initEq=10000000);
> addTxn('fPortfolio', Symbol='TE_M9', TxnDate="2009-01-02", TxnPrice=55, TxnQty=100, TxnFees=0, verbose=TRUE);
> updatePortf(Portfolio='fPortfolio', Dates = "2009-01-02");
> #-----------------------------------------------
> 
> Any idea what I am doing wrong or where the problem is?
> 
> Thanks!!
> 
> Wolfgang Wu
> 
> 
> 
> ----- Urspr?ngliche Mail ----
> Von: Brian G. Peterson <brian at braverock.com>
> An: Wolfgang Wu <wobwu22 at yahoo.de>; R SIG Finance <R-SIG-Finance at stat.math.ethz.ch>
> Gesendet: Donnerstag, den 29. April 2010, 12:21:36 Uhr
> Betreff: Re: AW: [R-SIG-Finance] Blotter - Setting up a futures_series
> 
> On 04/29/2010 02:15 AM, Wolfgang Wu wrote:
>> Understood.
>>
>> But in order to mark the book at some point you will need historical data of the contracts. How is the link from the contract specifications, using the future() and future_series() functions to the actual
>> historical data. What would be the equivalent to the example of a stock like this:
>>
>> #Defined the stock as financial instrument
>> stock("GSPC",currency="USD",multiplier=1)
>> #Get the historical data for variable with name "GSPC"
>> getSymbols('^GSPC', src='yahoo', index.class=c("POSIXt","POSIXct"),from='1998-01-01')
>>
>> Assuming I have the time series for CLM9 and CLN9 in an xts format
>>    
> 
> 
> FinancialInstrument uses an underscore to separate the root symbol 
> (primary_id) from the series symbol (suffix_id).  In your example, this 
> means that your historical contract series data should be named
> 
> CL_M9
> CL_N9
> 
> So that the blotter code can find them (blotter follows the quantmod 
> convention of naming market data for the instrument)
> 
> you can see this by doing
> 
> ls(pos=.instrument)
> 
> which will show you the environment where the instrument definition 
> objects are kept.
> 
> Regards,
> 
>    - Brian
> 
> 
>> CLM9
>>              Open  High   Low Close Volume OpenInterest
>> 2009-03-23 54.28 55.92 53.57 55.73  78959       187205
>> 2009-03-24 55.50 55.70 54.38 55.63  75464       190182
>> 2009-03-25 55.35 55.58 53.50 54.19 119624       198422
>> ...
>> 2009-05-19 59.16 60.48 58.55 59.65  40957         1838
>>
>> and
>>
>> CLN9
>>              Open  High   Low Close Volume OpenInterest
>> 2009-04-22 50.95 51.14 49.72 50.70  95249       178023
>> 2009-04-23 50.38 51.38 50.09 51.07  90781       181605
>> 2009-04-24 51.13 53.09 50.40 52.94  70061       187690
>> ...
>> 2009-06-22 69.89 69.89 66.25 66.93  32070         4299
>>
>> Regards,
>>
>>
>>   Wolfgang Wu
>>
>>
>>
>> ----- Urspr?ngliche Mail ----
>> Von: Brian G. Peterson<brian at braverock.com>
>> An: Wolfgang Wu<wobwu22 at yahoo.de>
>> CC: R SIG Finance<R-SIG-Finance at stat.math.ethz.ch>
>> Gesendet: Donnerstag, den 29. April 2010, 0:28:48 Uhr
>> Betreff: Re: [R-SIG-Finance] Blotter - Setting up a futures_series
>>
>> Wolfgang Wu wrote:
>>    
>>> Hello,
>>>
>>> I am playing around with blotter and am trying to set up several futures contracts. So assume I've got data for the crude oil future CL. I want to set up futures for the June 09 and July 09 contract.
>>> What I've done is the following:
>>>
>>> currency("USD", multiplier=1);    future("CL", "USD", 1000, identifiers=c("CLM9", "CLN9"))
>>> future_series("CL", "M9", "2009-03-23", "2009-05-19")
>>> future_series("CL", "N9", "2009-04-22", "2009-06-22")
>>>
>>>
>>> 1.) How do I link the future to the future_series? I assume this is by using the primary_id, correct?
>>>      
>> correct
>>
>>    
>>> 2.) What do I specify in the identifiers in the futures function?
>>>      
>> anything or nothing at all.  identifiers are for other symbols, e.g. Bloomberg, Reuters, etc.  In your example, I would probably not add identifiers to the main contract.
>>
>>    
>>> 3.) What is the multiplier in the future mean? Is it the value for one tick or for one point? So for oil one tick is 10 USD and one point move is 1000 USD.
>>>      
>> 'point value' in your terminology.  It is used to get from the price to the notional value in the listed currency.  I'll probably add tick value to the model later this week.
>>
>>    
>>> Thanks!!!
>>>      
>> You're welcome.
>>
>> Regards,
>>
>>     - Brian
>>
>>    
>>> Wolfgang Wu


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From Giuseppe.Milicia at makoglobal.com  Thu May  6 13:00:49 2010
From: Giuseppe.Milicia at makoglobal.com (Giuseppe Milicia)
Date: Thu, 6 May 2010 12:00:49 +0100
Subject: [R-SIG-Finance] PerformanceAnalytics - small problem with
	Return.excess
Message-ID: <9C9CE11E37400A41849B75A64660136762D80F0702@uk-mail-a.mako.uk.makoglobal.com>

Guys,

I've noticed a small problem in PerformanceAnalytics, Return.excess does not like timeseries with only 1 elements. Obviously this situation does not happen often, but getting around the issue is rather unelegant:

Loading required package: PerformanceAnalytics

Package PerformanceAnalytics (1.0.2.1) loaded.
Econometric tools for performance and risk analysis.
(c) 2004-2010 Peter Carl, Brian G. Peterson. License: GPL
http://r-forge.r-project.org/projects/returnanalytics/

data(managers)
> Return.excess(managers[1,1,drop=FALSE], 0)
Error in `colnames<-`(`*tmp*`, value = "HAM1 > 0") :
  attempt to set colnames on object with less than two dimensions


> version
               _
platform       i386-pc-solaris2.10
arch           i386
os             solaris2.10
system         i386, solaris2.10
status
major          2
minor          10.1
year           2009
month          12
day            14
svn rev        50720
language       R
version.string R version 2.10.1 (2009-12-14)

Cheers,

//Giuseppe

---- MAKO ----
This email and any files transmitted with it are confide...{{dropped:14}}


From brian at braverock.com  Thu May  6 13:28:22 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 06 May 2010 06:28:22 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics - small problem
	with	Return.excess
In-Reply-To: <9C9CE11E37400A41849B75A64660136762D80F0702@uk-mail-a.mako.uk.makoglobal.com>
References: <9C9CE11E37400A41849B75A64660136762D80F0702@uk-mail-a.mako.uk.makoglobal.com>
Message-ID: <4BE2A7D6.7050709@braverock.com>

A time series with only one element is not a 'series'.

In the case of excess returns, with only one return the excess return is the 
return of your asset minus the return of the risk free or benchmark asset over 
the same time period represented by your single number.

I'm not likely to spend time putting in a workaround, given that this is a 
pretty rare/edge case, and I've got other higher priorities right now.

However, we would certainly welcome a patch if you wanted to take a look at the 
code.

Regards,

     - Brian

Giuseppe Milicia wrote:
> Guys,
> 
> I've noticed a small problem in PerformanceAnalytics, Return.excess does not like timeseries with only 1 elements. Obviously this situation does not happen often, but getting around the issue is rather unelegant:
> 
> Loading required package: PerformanceAnalytics
> 
> Package PerformanceAnalytics (1.0.2.1) loaded.
> Econometric tools for performance and risk analysis.
> (c) 2004-2010 Peter Carl, Brian G. Peterson. License: GPL
> http://r-forge.r-project.org/projects/returnanalytics/
> 
> data(managers)
>> Return.excess(managers[1,1,drop=FALSE], 0)
> Error in `colnames<-`(`*tmp*`, value = "HAM1 > 0") :
>   attempt to set colnames on object with less than two dimensions
> 
> 
>> version
>                _
> platform       i386-pc-solaris2.10
> arch           i386
> os             solaris2.10
> system         i386, solaris2.10
> status
> major          2
> minor          10.1
> year           2009
> month          12
> day            14
> svn rev        50720
> language       R
> version.string R version 2.10.1 (2009-12-14)
> 
> Cheers,
> 
> //Giuseppe

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From schatzileinchen at ovi.com  Thu May  6 19:16:39 2010
From: schatzileinchen at ovi.com (Maxime S.)
Date: Thu, 6 May 2010 10:16:39 -0700 (PDT)
Subject: [R-SIG-Finance] Problem with rgarch package
Message-ID: <1273166199763-2133015.post@n4.nabble.com>


Dear all,

I'm trying to use rgarch for garch modelling.
I've downloaded the package from the R-forge but I can't manage to install
it since a Bessel package is required. Searching for this Bessel package on
the web didn't give me any relevant results. 

So, I'm asking for any suggestion how to make rgarch work. 
Thanks.

Best regards,
Maxime. 
-- 
View this message in context: http://r.789695.n4.nabble.com/Problem-with-rgarch-package-tp2133015p2133015.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From josh.m.ulrich at gmail.com  Thu May  6 19:23:17 2010
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Thu, 6 May 2010 12:23:17 -0500
Subject: [R-SIG-Finance] Problem with rgarch package
In-Reply-To: <1273166199763-2133015.post@n4.nabble.com>
References: <1273166199763-2133015.post@n4.nabble.com>
Message-ID: <o2i8cca69991005061023q9576855dq2ed2ef65df76b127@mail.gmail.com>

The Bessel package is on R-forge:
http://r-forge.r-project.org/projects/specfun/

Try rseek.org (or another R-friendly search engine) next time.

Best,
--
Joshua Ulrich
FOSS Trading: www.fosstrading.com



On Thu, May 6, 2010 at 12:16 PM, Maxime S. <schatzileinchen at ovi.com> wrote:
>
> Dear all,
>
> I'm trying to use rgarch for garch modelling.
> I've downloaded the package from the R-forge but I can't manage to install
> it since a Bessel package is required. Searching for this Bessel package on
> the web didn't give me any relevant results.
>
> So, I'm asking for any suggestion how to make rgarch work.
> Thanks.
>
> Best regards,
> Maxime.
> --
> View this message in context: http://r.789695.n4.nabble.com/Problem-with-rgarch-package-tp2133015p2133015.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From schatzileinchen at ovi.com  Thu May  6 21:51:08 2010
From: schatzileinchen at ovi.com (Maxime S.)
Date: Thu, 6 May 2010 12:51:08 -0700 (PDT)
Subject: [R-SIG-Finance] Problem with rgarch package
In-Reply-To: <o2i8cca69991005061023q9576855dq2ed2ef65df76b127@mail.gmail.com>
References: <1273166199763-2133015.post@n4.nabble.com>
	<o2i8cca69991005061023q9576855dq2ed2ef65df76b127@mail.gmail.com>
Message-ID: <1273175468848-2133281.post@n4.nabble.com>


Dear Joshua,

Thanks a lot, it works fine now.

Regards,
Maxime.
-- 
View this message in context: http://r.789695.n4.nabble.com/Problem-with-rgarch-package-tp2133015p2133281.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From karlavhv142 at hotmail.com  Fri May  7 19:21:37 2010
From: karlavhv142 at hotmail.com (karla hernandez villafuerte)
Date: Fri, 7 May 2010 11:21:37 -0600
Subject: [R-SIG-Finance] Johansen
Message-ID: <COL124-W33875A9F3ACD54C38EDD79E5F60@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100507/a1a8758e/attachment.pl>

From matthieu.stigler at gmail.com  Sat May  8 09:38:11 2010
From: matthieu.stigler at gmail.com (mat)
Date: Sat, 08 May 2010 13:08:11 +0530
Subject: [R-SIG-Finance] Johansen
In-Reply-To: <COL124-W33875A9F3ACD54C38EDD79E5F60@phx.gbl>
References: <COL124-W33875A9F3ACD54C38EDD79E5F60@phx.gbl>
Message-ID: <4BE514E3.6060308@gmail.com>

why don't you select your lags based on the VAR model, and take use it 
for the VECM? (with one lag less than VAR!)
see:

?VARselect


Hope this help

Btw, next time, provide reproducible code please!

karla hernandez villafuerte a ?crit :
>  
>
> Dear Members:
>
>  
>
> I am working with the function ca.jo from the URCA package in order to know the range of cointegration between two variables. I am trying to calculate the optimum value of the lags (called K in the function). But the package does not provide the AIC and the logLink values for objets like this.
>
> I am using the function like in the following example:
>
>  
>
> ca.jo(YX, type = c("trace"), ecdet = c("none"), K = 2, spec=c("longrun"), season = NULL, dumvar = NULL)
>
>
> I want to ask if someone knows a way to calculate the k optimum.
>
>  
>
> Thanks a lot!
>
>  
>
> Karla Hern?ndez
>  		 	   		  
> _________________________________________________________________
> Organizar y compartir tus documentos nunca fue tan f?cil. Hotmail te da 25 GB gratis. Ver m?s
>
> 	[[alternative HTML version deleted]]
>
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From cchien at alumni.poly.edu  Sun May  9 08:57:14 2010
From: cchien at alumni.poly.edu (JOSH C. CHIEN)
Date: Sat, 8 May 2010 23:57:14 -0700 (PDT)
Subject: [R-SIG-Finance]  ksmooth Function in Library ("stats")
Message-ID: <149589.81799.qm@web113112.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100508/a5ea0e75/attachment.pl>

From ymoser at gmail.com  Sun May  9 12:24:14 2010
From: ymoser at gmail.com (Yaakov Moser)
Date: Sun, 09 May 2010 13:24:14 +0300
Subject: [R-SIG-Finance] fPortfolio - Problem with constraints
Message-ID: <4BE68D4E.8000009@gmail.com>

Hi all,


I am looking for help with a problem with finding the efficient frontier 
for a portfolio subject to quite restrictive constraints.

I am using fPortfolio - see the sample code and data below.


The problem is this - the portfolio returned does not quite reach the 
ends of the efficient frontier.

In the example given, for example, the maximum risk portfolio is not 
quite where it should be.

portfolioFrontier  gives weights -   0.1881       0.2000       
0.3019       0.0600       0.2500

while it should be -  0.2000       0.2000       0.3000       
0.0600       0.2400


As can be seen, there is some discrepancy.


About a year ago Diethelm kindly suggest a maxriskPortfolio function, 
which I tried here, but it gives a portfolio with short selling for some 
reason...

maxriskPortfolio -  0.20        45.32         0.30         0.06       -44.88


A similar problem exists with the minimum risk portfolio, but this can 
be solved by using the minvariancePortfolio function

portfolioFrontier -  0.0037       0.0420       0.8943       0.0600       
0.0000

minvariancePortfolio-  0.0000       0.1564       0.7836       
0.0600       0.0000


Can anyone help with the max risk portfolio?


Also, if I have the min risk and max risk porfolios and I want to find a 
portfolio with a given risk between them, how could I do this?


Finally, I note that the portfolioFrontier function is sensitive to the 
dataset (Data in my example below), even though the adjustedCovEstimator 
function doesn't need it at all..

In some cases (and I have not discovered what the rules are), the 
portfolioFrontier won't return a result.

Deleting some data from the Data resolves the problem..


Thanks


Yaakov Moser


> library(fPortfolio)
> adjustedCovEstimator <- function(x, spec = NULL, ...)
> {
>   tempEstimator <- covEstimator(x)
>   
> tempEstimator$mu[adjustedReturnsIndex==TRUE]<-adjustedReturns[adjustedReturnsIndex==TRUE]
>   tempEstimator$Sigma<-adjustedCovariance
>   list(mu=tempEstimator$mu,Sigma=tempEstimator$Sigma)
> }
>
> Data=as.timeSeries(read.csv("C:\\TSTest.csv"))
> Spec <- portfolioSpec()
> constraints = c("minW[1]=0", "maxW[1]=0.2", "minW[2]=1E-06", 
> "maxW[2]=0.2", "minW[3]=0.3", "maxW[3]=1", "minW[4]=0.06", 
> "maxW[4]=1", "minW[5]=0", "maxW[5]=0.25")
> adjustedReturns = c(0.072,0.027,0.002,0.004,0.026)
> adjustedReturnsIndex = c(TRUE,TRUE,TRUE,TRUE,TRUE)
>
> setEstimator(Spec)<-"adjustedCovEstimator"
> adjustedCovariance=as.matrix(read.csv("c:\\adjustedCovarianceTestFail.csv"))
> adjustedPortfolio = portfolioFrontier(Data, Spec, constraints)
> adjustedPortfolio
>
> globminPortfolio<-minvariancePortfolio(Data,Spec,constraints)
> print(globminPortfolio)
>
>
> maxriskPortfolio <-
> function (data, spec = portfolioSpec(), constraints = "long-only")
> {
>    Data = portfolioData(data, spec)
>    data <- getSeries(Data)
>    targetRiskFun <- function(x, data, spec, constraints) {
>        setTargetReturn(spec) = x[1]
>        Solver = match.fun(getSolver(spec))
>        ans = Solver(data, spec, constraints)
>        # DW:
>        # Take care that the status ans$status is always 0
>        #  If the solver fails set the value of the risk to the global
>        #    min risk portfolio!
>        # Use the function try() that the calculation does not break!
>        targetRisk = -ans$objective
>        attr(targetRisk, "weights") <- ans$weights
>        attr(targetRisk, "status") <- ans$status
>        return(targetRisk)
>    }
>
>    # DW:
>    # Take care that the interval range may be large enough if short 
> selling
>    # is allowed, that requires an adaption of the range!
>    # DW:
>    # Increase the tolerance to be sure that optimize has converged!
>    portfolio <- optimize(targetRiskFun, interval = range(getMu(Data)),
>        data = Data, spec = spec, constraints = constraints,
>        tol = .Machine$double.eps^0.5)
>
>    setWeights(spec) <- attr(portfolio$objective, "weights")
>    setStatus(spec) <- attr(portfolio$objective, "status")
>    portfolio = feasiblePortfolio(data, spec, constraints)
>    portfolio at call = match.call()
>    portfolio at title = "Maximum Risk Portfolio"
>    portfolio
> }
>
> maxriskPortfolio(Data, Spec, constraints)
TSTest.csv:

> returnsData1,returnsData2,returnsData3,returnsData4,returnsData5
> 01/01/1990,0.110279651,0.019190915,0.003901142,-0.014044147,0.009070051

adjustedCovarianceTestFail.csv:

> covData1,covData2,covData3,covData4,covData5
> 0.07177011,0.008122796,-0.000179875,9.74E-05,0.003777439
> 0.008122796,0.002606836,0.000750827,0.000486699,0.001584018
> -0.000179875,0.000750827,0.001071123,0.001123975,0.001366914
> 9.74E-05,0.000486699,0.001123975,0.002925277,0.003458666
> 0.003777439,0.001584018,0.001366914,0.003458666,0.005272605
 > R.Version()$version.string
[1] "R version 2.8.1 (2008-12-22)"

 > sessionInfo()
R version 2.8.1 (2008-12-22)
i386-pc-mingw32

locale:
LC_COLLATE=English_United Kingdom.1252;LC_CTYPE=English_United 
Kingdom.1252;LC_MONETARY=English_United 
Kingdom.1252;LC_NUMERIC=C;LC_TIME=English_United Kingdom.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
  [1] fPortfolio_2100.77 Rsymphony_0.1-8    Rglpk_0.2-9        
quadprog_1.4-11
  [5] fAssets_2100.77    robustbase_0.4-5   fCopulae_2100.76   adapt_1.0-4
  [9] sn_0.4-12          mnormt_1.3-3       fBasics_2100.77    
timeSeries_2100.83
[13] timeDate_290.85    MASS_7.2-45


From brian at braverock.com  Sun May  9 13:22:39 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 09 May 2010 06:22:39 -0500
Subject: [R-SIG-Finance] ksmooth Function in Library ("stats")
In-Reply-To: <149589.81799.qm@web113112.mail.gq1.yahoo.com>
References: <149589.81799.qm@web113112.mail.gq1.yahoo.com>
Message-ID: <4BE69AFF.7020704@braverock.com>

This question has nothing to do with finance, despite the title of Carmona's 
book.  In the future, please direct non-finance questions to r-help.

The book was written quite a while ago for S-Plus.  You are using R.  The 
functions are slightly different.

Assuming for a moment that this isn't a homework assignment, the R ksmooth 
expects two series to regress, x, and  y.  Your data is univariate, and will 
thus fail with only x, per your error message.

Note also that the documentation for ksmooth says it is there only for S-Plus 
compatibility, and suggests that there are multiple better functions.

Carmona's book was good in its day, when there were no books that covered R in 
finance or time series explicitly, but now I would have to recommend Shumway 
and Stoffer, or perhaps Ruppert.  There was a thread on this list a while back 
that covered people's favorite texts for a variety of different time series 
tasks, it should be in your favorite list archive.

Regards,

    - Brian

On 05/09/2010 01:57 AM, JOSH C. CHIEN wrote:
> Hi R user,
> I'm studying "Statistical Analysis of Financial Data in S-plus" by Carmona.
> In p.21, the author introduce ksmooth function to plot curve in Kernel estimate method.
> For this case, using data set "DSPLR",S&P return, it want to know the distribution of these return on a given day.
> There are two methods to do that. One is using density Function ; the other is using kernel estimate method.
> Below is my working on R console.
>> data(DSPLR)
>> class(DSPLR)
> [1] "numeric"
>> str(DSPLR)
>   num [1:10928] 0.00798 -0.00431 -0.00734 -0.00319 -0.01234 ...
>> hist(DSPLR,probability=T)
> DENS<- ksmooth(DSPLR, kernel="normal",bandwidth = .03)
> ************************************************
> Error in ksmooth(DSPLR, kernel = "normal", bandwidth = 0.03) :
>    y must be supplied.
> For density estimation use density()
> *************************************************
>> From error message above, lack in "y value" into argument.
>
> But, I saw example on textbook.
> Author' version is " DENS<- ksmooth(DSPLR, kernel="normal",bandwidth = .03) "
>
> how to figure out this error message ?
>
> thanks a lot.
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From mam3xs at gmail.com  Mon May 10 16:50:43 2010
From: mam3xs at gmail.com (mam3xs)
Date: Mon, 10 May 2010 15:50:43 +0100
Subject: [R-SIG-Finance] time series aggregating error message
Message-ID: <AANLkTikI3jPMJ3ftScSdOWAzmUx1ZO4Gf4xrztJl4tmr@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100510/9c5ef80a/attachment.pl>

From josh.m.ulrich at gmail.com  Mon May 10 17:00:12 2010
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 10 May 2010 10:00:12 -0500
Subject: [R-SIG-Finance] time series aggregating error message
In-Reply-To: <AANLkTikI3jPMJ3ftScSdOWAzmUx1ZO4Gf4xrztJl4tmr@mail.gmail.com>
References: <AANLkTikI3jPMJ3ftScSdOWAzmUx1ZO4Gf4xrztJl4tmr@mail.gmail.com>
Message-ID: <AANLkTimOU9GZbjaEBgY5wWeVoWszxyE7Fqp_JBZpl7py@mail.gmail.com>

Have you looked at ?to.period in xts?  If so, why didn't that work for you?
--
Joshua Ulrich
FOSS Trading: www.fosstrading.com



On Mon, May 10, 2010 at 9:50 AM, mam3xs <mam3xs at gmail.com> wrote:
> Hi all,
>
> I am tring to aggregate intra-day data to daily basis data, (data sample
> attached at the end of email.)
>
> test <- read.table("D:\\test.csv", header=F, sep=",")
>
> test.ep <- test[1:304231,]
>
> tt <- as.Date(test.ep[,1], "%m/%d/%y" )
>
> rn <- test.ep[,7]
>
> test.rn <- as.xts(rn,tt)
>
> nodudate = tt[!duplicated(tt)]
>
> test.sum = aggregate(test.rn, nodudate, sum)
>
> The error message said, "Error: length(time(x)) == length(by[[1]]) is not
> TRUE"
>
>
> Appreciate for any hints.
>
> Cheers
> mam
>
>
>
> ?01/03/05 31.8 31.8 31.78 31.8 167600 0.009479 ?01/03/05 31.8 31.8 31.78
> 31.8 4500 0 ?01/03/05 31.75 31.75 31.6 31.67 11800 -0.0041 ?01/03/05 31.62
> 31.63 31.6 31.6 9200 -0.00221 ?01/03/05 31.61 31.67 31.6 31.67 20300
> 0.002213 ?01/04/05 31.69 31.71 31.67 31.71 29800 0.001262 ?01/04/05 31.7
> 31.74 31.64 31.64 34800 -0.00221 ?01/04/05 31.64 31.66 31.63 31.63 35000
> -0.00032 ?01/04/05 31.64 31.66 31.63 31.66 41600 0.000948 ?01/05/05 31.65
> 31.65 31.64 31.64 17000 -0.00063 ?01/05/05 31.61 31.61 31.6 31.6 16600
> -0.00127 ?01/05/05 31.6 31.61 31.6 31.6 6600 0 ?01/05/05 31.61 31.61 31.57
> 31.59 20500 -0.00032 ?01/05/05 31.6 31.67 31.59 31.63 12800 0.001265
> 01/06/05 31.64 31.67 31.64 31.66 5800 0.000948 ?01/06/05 31.64 31.66 31.64
> 31.66 71700 0 ?01/06/05 31.66 31.66 31.64 31.65 7300 -0.00032
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From jeff.a.ryan at gmail.com  Mon May 10 17:02:55 2010
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Mon, 10 May 2010 10:02:55 -0500
Subject: [R-SIG-Finance] time series aggregating error message
In-Reply-To: <AANLkTikI3jPMJ3ftScSdOWAzmUx1ZO4Gf4xrztJl4tmr@mail.gmail.com>
References: <AANLkTikI3jPMJ3ftScSdOWAzmUx1ZO4Gf4xrztJl4tmr@mail.gmail.com>
Message-ID: <AANLkTinLqdcx8goFPAWa5NvcU_1mUyE-xwXUndFE5nYw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100510/db9d13b1/attachment.pl>

From josh.m.ulrich at gmail.com  Mon May 10 17:51:35 2010
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 10 May 2010 10:51:35 -0500
Subject: [R-SIG-Finance] time series aggregating error message
In-Reply-To: <AANLkTimOU9GZbjaEBgY5wWeVoWszxyE7Fqp_JBZpl7py@mail.gmail.com>
References: <AANLkTikI3jPMJ3ftScSdOWAzmUx1ZO4Gf4xrztJl4tmr@mail.gmail.com> 
	<AANLkTimOU9GZbjaEBgY5wWeVoWszxyE7Fqp_JBZpl7py@mail.gmail.com>
Message-ID: <AANLkTikEZ2JemBL5sl3rklntNQbaHEkn_Bi_FfD5J2t3@mail.gmail.com>

On Mon, May 10, 2010 at 10:33 AM, mam3xs <mam3xs at gmail.com> wrote:
> Hi Josh,
>
> I've tried to.daily function before I posted the note. Basically, I am
> trying to aggregate the return data, the column 7, not the open, high, low,
> close prices.
>
> As you can see from the attached data, which consists 3 days, so after I
> aggregate there should be only 3 return data for 3 days.
>
> Cheers
> mam

Then you want:
> apply.daily(test.rn,sum)
                   [,1]
2005-01-03 -0.016000345
2005-01-04 -0.016260516
2005-01-05 -0.007899979

By the way, please keep your replies on list so others can follow the
discussion.

Best,
--
Joshua Ulrich
FOSS Trading: www.fosstrading.com



On Mon, May 10, 2010 at 10:00 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> Have you looked at ?to.period in xts? ?If so, why didn't that work for you?
> --
> Joshua Ulrich
> FOSS Trading: www.fosstrading.com
>
>
>
> On Mon, May 10, 2010 at 9:50 AM, mam3xs <mam3xs at gmail.com> wrote:
>> Hi all,
>>
>> I am tring to aggregate intra-day data to daily basis data, (data sample
>> attached at the end of email.)
>>
>> test <- read.table("D:\\test.csv", header=F, sep=",")
>>
>> test.ep <- test[1:304231,]
>>
>> tt <- as.Date(test.ep[,1], "%m/%d/%y" )
>>
>> rn <- test.ep[,7]
>>
>> test.rn <- as.xts(rn,tt)
>>
>> nodudate = tt[!duplicated(tt)]
>>
>> test.sum = aggregate(test.rn, nodudate, sum)
>>
>> The error message said, "Error: length(time(x)) == length(by[[1]]) is not
>> TRUE"
>>
>>
>> Appreciate for any hints.
>>
>> Cheers
>> mam
>>
>>
>>
>> ?01/03/05 31.8 31.8 31.78 31.8 167600 0.009479 ?01/03/05 31.8 31.8 31.78
>> 31.8 4500 0 ?01/03/05 31.75 31.75 31.6 31.67 11800 -0.0041 ?01/03/05 31.62
>> 31.63 31.6 31.6 9200 -0.00221 ?01/03/05 31.61 31.67 31.6 31.67 20300
>> 0.002213 ?01/04/05 31.69 31.71 31.67 31.71 29800 0.001262 ?01/04/05 31.7
>> 31.74 31.64 31.64 34800 -0.00221 ?01/04/05 31.64 31.66 31.63 31.63 35000
>> -0.00032 ?01/04/05 31.64 31.66 31.63 31.66 41600 0.000948 ?01/05/05 31.65
>> 31.65 31.64 31.64 17000 -0.00063 ?01/05/05 31.61 31.61 31.6 31.6 16600
>> -0.00127 ?01/05/05 31.6 31.61 31.6 31.6 6600 0 ?01/05/05 31.61 31.61 31.57
>> 31.59 20500 -0.00032 ?01/05/05 31.6 31.67 31.59 31.63 12800 0.001265
>> 01/06/05 31.64 31.67 31.64 31.66 5800 0.000948 ?01/06/05 31.64 31.66 31.64
>> 31.66 71700 0 ?01/06/05 31.66 31.66 31.64 31.65 7300 -0.00032
>>
>> ? ? ? ?[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>


From Giuseppe.Milicia at makoglobal.com  Mon May 10 17:52:42 2010
From: Giuseppe.Milicia at makoglobal.com (Giuseppe Milicia)
Date: Mon, 10 May 2010 16:52:42 +0100
Subject: [R-SIG-Finance] PerformanceAnalytics - small problem
	with	Return.excess
In-Reply-To: <4BE2A7D6.7050709@braverock.com>
References: <9C9CE11E37400A41849B75A64660136762D80F0702@uk-mail-a.mako.uk.makoglobal.com>,
	<4BE2A7D6.7050709@braverock.com>
Message-ID: <9C9CE11E37400A41849B75A6466013676BE43FEEBA@uk-mail-a.mako.uk.makoglobal.com>

Brian,

I have a patched version of the function, I attach it at the end of this mail.

I'm having problems with the SharpeRatio function as well.

>SharpeRatio(managers[,1,drop=FALSE], FUN="StdDev")

                                     HAM1
StdDev Sharpe:  (Rf=0%, p=95%) 0.02562881

But:

> mean(managers[, 1, drop = FALSE])/sd(managers[, 1, drop = FALSE])
     HAM1
0.4339932

And

> sd(managers[, 1, drop = FALSE])
      HAM1
0.02562881

Debugging the function, it seems that the call:

 result[i, ] = apply(R, 2, srm, xR = xR, Rf = Rf, p = p, FUN = FUNCT, ...)

yields only FUN(R) but the call (while in debug mode)


srm(R,xR=xR,FUN=FUNCT)

Gives the correct result... I might be doing something wrong, but I can't see what... Ideas?

//Giuseppe

-------------------------

Return.excess = function (R, Rf = 0)
{
        R = checkData(R)
        if (!is.null(dim(Rf))) {
                Rf = checkData(Rf)
                indexseries = index(cbind(R, Rf))
                columnname.Rf = colnames(Rf)
        }
        else {
                indexseries = index(R)
                columnname.Rf = Rf
                Rf = xts(rep(Rf, length(indexseries)), order.by = indexseries)
        }
        return.excess <- function(R, Rf) {
                xR = coredata(as.xts(R) - as.xts(Rf))
        }
        result = apply(R, MARGIN = 2, FUN = return.excess, Rf = Rf)

        if (!is.matrix(result)) result = matrix(result, ncol=ncol(R))
        colnames(result) = paste(colnames(R), ">", columnname.Rf)
        result = reclass(result, R)
        return(result)
}

________________________________________
From: Brian G. Peterson [brian at braverock.com]
Sent: 06 May 2010 12:28
To: Giuseppe Milicia
Cc: r-sig-finance at stat.math.ethz.ch
Subject: Re: [R-SIG-Finance] PerformanceAnalytics - small problem with  Return.excess

A time series with only one element is not a 'series'.

In the case of excess returns, with only one return the excess return is the
return of your asset minus the return of the risk free or benchmark asset over
the same time period represented by your single number.

I'm not likely to spend time putting in a workaround, given that this is a
pretty rare/edge case, and I've got other higher priorities right now.

However, we would certainly welcome a patch if you wanted to take a look at the
code.

Regards,

     - Brian

Giuseppe Milicia wrote:
> Guys,
>
> I've noticed a small problem in PerformanceAnalytics, Return.excess does not like timeseries with only 1 elements. Obviously this situation does not happen often, but getting around the issue is rather unelegant:
>
> Loading required package: PerformanceAnalytics
>
> Package PerformanceAnalytics (1.0.2.1) loaded.
> Econometric tools for performance and risk analysis.
> (c) 2004-2010 Peter Carl, Brian G. Peterson. License: GPL
> http://r-forge.r-project.org/projects/returnanalytics/
>
> data(managers)
>> Return.excess(managers[1,1,drop=FALSE], 0)
> Error in `colnames<-`(`*tmp*`, value = "HAM1 > 0") :
>   attempt to set colnames on object with less than two dimensions
>
>
>> version
>                _
> platform       i386-pc-solaris2.10
> arch           i386
> os             solaris2.10
> system         i386, solaris2.10
> status
> major          2
> minor          10.1
> year           2009
> month          12
> day            14
> svn rev        50720
> language       R
> version.string R version 2.10.1 (2009-12-14)
>
> Cheers,
>
> //Giuseppe

--
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock

---- MAKO ----
This email and any files transmitted with it are confide...{{dropped:14}}


From wobwu22 at yahoo.de  Tue May 11 15:29:58 2010
From: wobwu22 at yahoo.de (Wolfgang Wu)
Date: Tue, 11 May 2010 06:29:58 -0700 (PDT)
Subject: [R-SIG-Finance] Blotter - Setting up a futures_series
In-Reply-To: <4BE29DF6.3000703@braverock.com>
References: <616669.14075.qm@web23405.mail.ird.yahoo.com>
	<4BD8C4B0.3000302@braverock.com>
	<177574.74327.qm@web23404.mail.ird.yahoo.com>
	<4BD96BC0.5070907@braverock.com>
	<260117.97523.qm@web23405.mail.ird.yahoo.com>
	<42510.32835.qm@web23403.mail.ird.yahoo.com>
	<4BE29DF6.3000703@braverock.com>
Message-ID: <48234.97786.qm@web23404.mail.ird.yahoo.com>

The best I could come up with is to write a quick function to check if it is possible to call updatePortf() function. To do this I test if each symbol in the portfolio has a row for the passed in date.

#function to test if you can get the value of the portfolio
fCanValue <- function(Portfolio, Date){
    canValue <- TRUE;
    tempInstr <- names(fPortfolio);
    for (i in 1:length(tempInstr)){ 
        xtsInstr <- get(tempInstr[i])
        if (length(index(xtsInstr[Date])) == 0) {canValue = FALSE}
    }
    return(canValue);
}

This might work if one of the symbols might be missing a day or so because of a holiday. I am then just not calling updatePortf().


How is the best way to solve the general problem that updatePortf() seems to assume that there is a row for the date you pass in for every symbol?Is the best route to solve this 
a) to remove the symbol from the portfolio when there are no more prices? Can I just delete the xts table in portfolio and the profit and loss calculation will still work?
b) ignore symbols that have 0 position and only produce an error when you have a position in a symbol but no price? There might be still problems with holidays and missing data.
c) try to use the last available price to mark a symbol?

Regards,
 
Wolfgang Wu



----- Urspr?ngliche Mail ----
Von: Brian G. Peterson <brian at braverock.com>
An: Wolfgang Wu <wobwu22 at yahoo.de>
CC: R SIG Finance <R-SIG-Finance at stat.math.ethz.ch>
Gesendet: Donnerstag, den 6. Mai 2010, 11:46:14 Uhr
Betreff: Re: AW: [R-SIG-Finance] Blotter - Setting up a futures_series

Wolfgang Wu wrote:
> It seems like the error occurs when you run updatePortf() for a date where one of the symbols are not defined. So TE_N9 doesn't have a row for the date '2009-01-02' which is causing this error. I guess this will happen often as there might be holidays or non trading days which might be different for different symbols (maybe trading on different exchanges, etc..).  Are there any work-arounds to this problem?

That sounds like a bug.  I'll check and fix it to make sure updatePortf won't try to update a particular instrument beyond it's last traded date.  Ideally, the historical instrument data will be tested with 'try' and a warning rather than a fatal error will be generated.  I'll try to get to it tomorrow or over the weekend.

> Also is it possible to add or remove symbols to a portfolio object later than initPortf? 

On the list of functions to write...  contributed functions welcome.

Regards,

   - Brian

> Thanks
> 
> 
>  Wolfgang Wu
> 
> 
> 
> ----- Urspr?ngliche Mail ----
> Von: Wolfgang Wu <wobwu22 at yahoo.de>
> An: Brian G. Peterson <brian at braverock.com>; R SIG Finance <R-SIG-Finance at stat.math.ethz.ch>
> Gesendet: Donnerstag, den 29. April 2010, 14:44:32 Uhr
> Betreff: Re: [R-SIG-Finance] Blotter - Setting up a futures_series
> 
> Sorry for being a pain in the neck but I've got another problem
> 
> When running the folloing code I get the error when I call updatePortf(): Error in if (!all(i <= 0)) stop("only zeros may be mixed with negative subscripts") :   missing value where TRUE/FALSE needed
> 
> #Example
> library(FinancialInstrument)
> library(blotter)
> currency("USD", multiplier=1);    future("TE", "USD", 1000)
> future_series("TE", "M9", "2009-01-02", "2009-01-03")
> future_series("TE", "N9", "2009-01-03", "2009-01-04")
> 
> TE_M9 <- xts(rbind(cbind(54.28, 55.92, 53.57, 55.73, 78959, 1), cbind(55.50, 55.70, 54.38, 55.63,  75464, 2)), order.by=as.Date(c("2009-01-02", "2009-01-03")))
> colnames(TE_M9) <- c("Open","High","Low","Close","Volume", "OpenInterest");
> 
> TE_N9 <- xts(rbind(cbind(54.28, 55.92, 53.57, 55.73, 78959, 1), cbind(55.50, 55.70, 54.38, 55.63,  75464, 2)), order.by=as.Date(c("2009-01-03", "2009-01-04")))
> colnames(TE_N9) <- c("Open","High","Low","Close","Volume", "OpenInterest");
> 
> initPortf(name='fPortfolio', symbols = c('TE_M9', 'TE_N9'), initPosQty = 0, initDate='2009-01-01')
> initAcct(name='fAccount',portfolios='fPortfolio', initDate='2009-01-01', initEq=10000000);
> addTxn('fPortfolio', Symbol='TE_M9', TxnDate="2009-01-02", TxnPrice=55, TxnQty=100, TxnFees=0, verbose=TRUE);
> updatePortf(Portfolio='fPortfolio', Dates = "2009-01-02");
> #-----------------------------------------------
> 
> Any idea what I am doing wrong or where the problem is?
> 
> Thanks!!
> 
> Wolfgang Wu
> 
> 
> 
> ----- Urspr?ngliche Mail ----
> Von: Brian G. Peterson <brian at braverock.com>
> An: Wolfgang Wu <wobwu22 at yahoo.de>; R SIG Finance <R-SIG-Finance at stat.math.ethz.ch>
> Gesendet: Donnerstag, den 29. April 2010, 12:21:36 Uhr
> Betreff: Re: AW: [R-SIG-Finance] Blotter - Setting up a futures_series
> 
> On 04/29/2010 02:15 AM, Wolfgang Wu wrote:
>> Understood.
>> 
>> But in order to mark the book at some point you will need historical data of the contracts. How is the link from the contract specifications, using the future() and future_series() functions to the actual
>> historical data. What would be the equivalent to the example of a stock like this:
>> 
>> #Defined the stock as financial instrument
>> stock("GSPC",currency="USD",multiplier=1)
>> #Get the historical data for variable with name "GSPC"
>> getSymbols('^GSPC', src='yahoo', index.class=c("POSIXt","POSIXct"),from='1998-01-01')
>> 
>> Assuming I have the time series for CLM9 and CLN9 in an xts format
>>    
> 
> 
> FinancialInstrument uses an underscore to separate the root symbol (primary_id) from the series symbol (suffix_id).  In your example, this means that your historical contract series data should be named
> 
> CL_M9
> CL_N9
> 
> So that the blotter code can find them (blotter follows the quantmod convention of naming market data for the instrument)
> 
> you can see this by doing
> 
> ls(pos=.instrument)
> 
> which will show you the environment where the instrument definition objects are kept.
> 
> Regards,
> 
>    - Brian
> 
> 
>> CLM9
>>              Open  High   Low Close Volume OpenInterest
>> 2009-03-23 54.28 55.92 53.57 55.73  78959       187205
>> 2009-03-24 55.50 55.70 54.38 55.63  75464       190182
>> 2009-03-25 55.35 55.58 53.50 54.19 119624       198422
>> ...
>> 2009-05-19 59.16 60.48 58.55 59.65  40957         1838
>> 
>> and
>> 
>> CLN9
>>              Open  High   Low Close Volume OpenInterest
>> 2009-04-22 50.95 51.14 49.72 50.70  95249       178023
>> 2009-04-23 50.38 51.38 50.09 51.07  90781       181605
>> 2009-04-24 51.13 53.09 50.40 52.94  70061       187690
>> ...
>> 2009-06-22 69.89 69.89 66.25 66.93  32070         4299
>> 
>> Regards,
>> 
>> 
>>   Wolfgang Wu
>> 
>> 
>> 
>> ----- Urspr?ngliche Mail ----
>> Von: Brian G. Peterson<brian at braverock.com>
>> An: Wolfgang Wu<wobwu22 at yahoo.de>
>> CC: R SIG Finance<R-SIG-Finance at stat.math.ethz.ch>
>> Gesendet: Donnerstag, den 29. April 2010, 0:28:48 Uhr
>> Betreff: Re: [R-SIG-Finance] Blotter - Setting up a futures_series
>> 
>> Wolfgang Wu wrote:
>>    
>>> Hello,
>>> 
>>> I am playing around with blotter and am trying to set up several futures contracts. So assume I've got data for the crude oil future CL. I want to set up futures for the June 09 and July 09 contract.
>>> What I've done is the following:
>>> 
>>> currency("USD", multiplier=1);    future("CL", "USD", 1000, identifiers=c("CLM9", "CLN9"))
>>> future_series("CL", "M9", "2009-03-23", "2009-05-19")
>>> future_series("CL", "N9", "2009-04-22", "2009-06-22")
>>> 
>>> 
>>> 1.) How do I link the future to the future_series? I assume this is by using the primary_id, correct?
>>>      
>> correct
>> 
>>    
>>> 2.) What do I specify in the identifiers in the futures function?
>>>      
>> anything or nothing at all.  identifiers are for other symbols, e.g. Bloomberg, Reuters, etc.  In your example, I would probably not add identifiers to the main contract.
>> 
>>    
>>> 3.) What is the multiplier in the future mean? Is it the value for one tick or for one point? So for oil one tick is 10 USD and one point move is 1000 USD.
>>>      
>> 'point value' in your terminology.  It is used to get from the price to the notional value in the listed currency.  I'll probably add tick value to the model later this week.
>> 
>>    
>>> Thanks!!!
>>>      
>> You're welcome.
>> 
>> Regards,
>> 
>>     - Brian
>> 
>>    
>>> Wolfgang Wu


-- Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock




From brian at braverock.com  Tue May 11 16:33:29 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 11 May 2010 09:33:29 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics - small problem
	with	Return.excess
In-Reply-To: <9C9CE11E37400A41849B75A6466013676BE43FEEBA@uk-mail-a.mako.uk.makoglobal.com>
References: <9C9CE11E37400A41849B75A64660136762D80F0702@uk-mail-a.mako.uk.makoglobal.com>,
	<4BE2A7D6.7050709@braverock.com>
	<9C9CE11E37400A41849B75A6466013676BE43FEEBA@uk-mail-a.mako.uk.makoglobal.com>
Message-ID: <4BE96AB9.6000304@braverock.com>

On 05/10/2010 10:52 AM, Giuseppe Milicia wrote:
> Brian,
>
> I have a patched version of the function, I attach it at the end of this mail.

Thanks for your patch, it is in SVN on R-Forge, and will be included in the 
next version of PerformanceAnalytics on CRAN.

> I'm having problems with the SharpeRatio function as well.
>
>> >SharpeRatio(managers[,1,drop=FALSE], FUN="StdDev")
>                                       HAM1
> StdDev Sharpe:  (Rf=0%, p=95%) 0.02562881
>
> But:
>
>> >  mean(managers[, 1, drop = FALSE])/sd(managers[, 1, drop = FALSE])
>       HAM1
> 0.4339932
>
> And
>
>> >  sd(managers[, 1, drop = FALSE])
>        HAM1
> 0.02562881
>
> Debugging the function, it seems that the call:
>
>   result[i, ] = apply(R, 2, srm, xR = xR, Rf = Rf, p = p, FUN = FUNCT, ...)
>
> yields only FUN(R) but the call (while in debug mode)
>
>
> srm(R,xR=xR,FUN=FUNCT)
>
> Gives the correct result... I might be doing something wrong, but I can't see what... Ideas?
>

You were correct, 'FUN' wasn't getting passed correctly.  It looks like I 
introduced the bug when I made it possible to pass multiple functions in for 
creating modified Sharpe ratios.

Peter Carl and I have patched the function so it again works as expected.

Thanks for the report.  The fixed version of the function is attached below. 
If you could confirm that this works as expected again, we'd appreciate it.

Regards,

    - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock

--

SharpeRatio <-
function (R, Rf = 0, p = 0.95, FUN=c("StdDev", "VaR","ES"), weights=NULL, ...)
{
     # @TODO: annualize using multiperiod VaR and ES calcs

     # FUNCTION:

     R = checkData(R)

     if(!is.null(dim(Rf)))
         Rf = checkData(Rf)

     if(is.null(weights))
         xR = Return.excess(R, Rf)

     srm <-function (R, ..., Rf, p, FUNC)
     {
         FUNCT <- match.fun(FUNC)
         xR = Return.excess(R, Rf)
         SRM = mean(xR, na.rm=TRUE)/FUNCT(R=R, p=p, ...=..., invert=FALSE)
         SRM
     }

     i=1
     if(is.null(weights)){
         result = matrix(nrow=length(FUN), ncol=ncol(R))
         colnames(result) = colnames(R)
     }
     else {
         result = matrix(nrow=length(FUN))
     }

     tmprownames=vector()

     for (FUNCT in FUN){
         if (is.null(weights)){
             result[i,] = apply(R,MARGIN=2,FUN=srm,Rf=Rf,p=p,FUNC=FUNCT,...)
         }
         else {
             result[i,] = 
weighted.mean(xR,w=weights,na.rm=TRUE)/match.fun(FUNCT)(R, Rf=Rf, p=p, 
weights=weights, portfolio_method="single", ...=...)
         }
         tmprownames = c(tmprownames, paste(FUNCT, " Sharpe: ", " (Rf=", 
round(mean(Rf)*100,1), "%, p=", round(p*100,1),"%)", sep=""))
         i=i+1 #increment counter
     }
     rownames(result)=tmprownames
     return (result)
}


From Giuseppe.Milicia at makoglobal.com  Tue May 11 17:58:16 2010
From: Giuseppe.Milicia at makoglobal.com (Giuseppe Milicia)
Date: Tue, 11 May 2010 16:58:16 +0100
Subject: [R-SIG-Finance] PerformanceAnalytics - small problem
	with	Return.excess
In-Reply-To: <4BE96AB9.6000304@braverock.com>
References: <9C9CE11E37400A41849B75A64660136762D80F0702@uk-mail-a.mako.uk.makoglobal.com>,
	<4BE2A7D6.7050709@braverock.com>
	<9C9CE11E37400A41849B75A6466013676BE43FEEBA@uk-mail-a.mako.uk.makoglobal.com>,
	<4BE96AB9.6000304@braverock.com>
Message-ID: <9C9CE11E37400A41849B75A6466013676C5CA50A96@uk-mail-a.mako.uk.makoglobal.com>

Brian

Thanks for the fix, it works as expected...

Cheers!

//Giuseppe
________________________________________
From: Brian G. Peterson [brian at braverock.com]
Sent: 11 May 2010 15:33
To: Giuseppe Milicia; R-SIG-Finance
Subject: Re: [R-SIG-Finance] PerformanceAnalytics - small problem with  Return.excess

On 05/10/2010 10:52 AM, Giuseppe Milicia wrote:
> Brian,
>
> I have a patched version of the function, I attach it at the end of this mail.

Thanks for your patch, it is in SVN on R-Forge, and will be included in the
next version of PerformanceAnalytics on CRAN.

> I'm having problems with the SharpeRatio function as well.
>
>> >SharpeRatio(managers[,1,drop=FALSE], FUN="StdDev")
>                                       HAM1
> StdDev Sharpe:  (Rf=0%, p=95%) 0.02562881
>
> But:
>
>> >  mean(managers[, 1, drop = FALSE])/sd(managers[, 1, drop = FALSE])
>       HAM1
> 0.4339932
>
> And
>
>> >  sd(managers[, 1, drop = FALSE])
>        HAM1
> 0.02562881
>
> Debugging the function, it seems that the call:
>
>   result[i, ] = apply(R, 2, srm, xR = xR, Rf = Rf, p = p, FUN = FUNCT, ...)
>
> yields only FUN(R) but the call (while in debug mode)
>
>
> srm(R,xR=xR,FUN=FUNCT)
>
> Gives the correct result... I might be doing something wrong, but I can't see what... Ideas?
>

You were correct, 'FUN' wasn't getting passed correctly.  It looks like I
introduced the bug when I made it possible to pass multiple functions in for
creating modified Sharpe ratios.

Peter Carl and I have patched the function so it again works as expected.

Thanks for the report.  The fixed version of the function is attached below.
If you could confirm that this works as expected again, we'd appreciate it.

Regards,

    - Brian

--
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock

--

SharpeRatio <-
function (R, Rf = 0, p = 0.95, FUN=c("StdDev", "VaR","ES"), weights=NULL, ...)
{
     # @TODO: annualize using multiperiod VaR and ES calcs

     # FUNCTION:

     R = checkData(R)

     if(!is.null(dim(Rf)))
         Rf = checkData(Rf)

     if(is.null(weights))
         xR = Return.excess(R, Rf)

     srm <-function (R, ..., Rf, p, FUNC)
     {
         FUNCT <- match.fun(FUNC)
         xR = Return.excess(R, Rf)
         SRM = mean(xR, na.rm=TRUE)/FUNCT(R=R, p=p, ...=..., invert=FALSE)
         SRM
     }

     i=1
     if(is.null(weights)){
         result = matrix(nrow=length(FUN), ncol=ncol(R))
         colnames(result) = colnames(R)
     }
     else {
         result = matrix(nrow=length(FUN))
     }

     tmprownames=vector()

     for (FUNCT in FUN){
         if (is.null(weights)){
             result[i,] = apply(R,MARGIN=2,FUN=srm,Rf=Rf,p=p,FUNC=FUNCT,...)
         }
         else {
             result[i,] =
weighted.mean(xR,w=weights,na.rm=TRUE)/match.fun(FUNCT)(R, Rf=Rf, p=p,
weights=weights, portfolio_method="single", ...=...)
         }
         tmprownames = c(tmprownames, paste(FUNCT, " Sharpe: ", " (Rf=",
round(mean(Rf)*100,1), "%, p=", round(p*100,1),"%)", sep=""))
         i=i+1 #increment counter
     }
     rownames(result)=tmprownames
     return (result)
}

---- MAKO ----
This email and any files transmitted with it are confide...{{dropped:14}}


From vsdimitrov at yahoo.com  Tue May 11 18:10:28 2010
From: vsdimitrov at yahoo.com (Valentin Dimitrov)
Date: Tue, 11 May 2010 16:10:28 +0000 (GMT)
Subject: [R-SIG-Finance] fGarch, garchFit  - how to set the initial variance?
Message-ID: <192626.53666.qm@web23704.mail.ird.yahoo.com>

Dear all,

I am trying to use the garchFit function like for instance below:

gf<-garchFit(formula=~aparch(1,1),data=y_export,include.delta=FALSE,cond.dist="sstd",trace=FALSE)

I suppose the initial variance is somehow set according to the sample variance of my time series. 

My question is: Can I set that initial variance myself?

Is there maybe a garchFit() argument which sets this initial variance? 

Thank you very much for your help.

Kind regards, 
Valentin Dimitrov


From risk2009 at ath.forthnet.gr  Wed May 12 10:33:09 2010
From: risk2009 at ath.forthnet.gr (Research)
Date: Wed, 12 May 2010 11:33:09 +0300
Subject: [R-SIG-Finance] Replacing zoo time series values
Message-ID: <4BEA67C5.3040907@ath.forthnet.gr>

Hello,

I am importing data, say S&P 500 from yahoo:

     SPyf<-yahooSeries("^GSPC", file="SPyahoo.csv", frequency="daily", 
nDaysBack=400)
     SPCOMPd<-(SPyf[,4])
     a<-time(SPCOMPd)
     SPd<-zoo(SPCOMPd,as.POSIXct(a))

I am not sure if the above is correct but I am trying to convert a 
timeSeries object to zoo.

 > is(SPCOMPd)
[1] "timeSeries" "structure"  "vector"
 >
 > is(SPd)
[1] "zoo"

I can do

SPCOMPd[1]<-SPCOMPd[2]+SPCOMPd[3]

with the timeseries object.

Is it possible to do something like:

SPd[1]<-(SPd[2]+SP[3])/2

with the zoo object?

I get:

Error in SPd[1] <- (SPd[2] + SP[3])/2 : replacement has length zero


Thanks in advance,
Costas


From jeff.a.ryan at gmail.com  Wed May 12 12:23:21 2010
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Wed, 12 May 2010 05:23:21 -0500
Subject: [R-SIG-Finance] Replacing zoo time series values
In-Reply-To: <4BEA67C5.3040907@ath.forthnet.gr>
References: <4BEA67C5.3040907@ath.forthnet.gr>
Message-ID: <AANLkTinz7M-XuDL0CQfMJFq3aMfvftOBhuJX_2Dyi2kI@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100512/5de6c727/attachment.pl>

From ggrothendieck at gmail.com  Wed May 12 12:49:47 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 12 May 2010 06:49:47 -0400
Subject: [R-SIG-Finance] Replacing zoo time series values
In-Reply-To: <4BEA67C5.3040907@ath.forthnet.gr>
References: <4BEA67C5.3040907@ath.forthnet.gr>
Message-ID: <AANLkTiloubArxzstvISXNG3KsUQq1MQtiNbpm0niHdjU@mail.gmail.com>

Try

library(fImport)
library(zoo)
SPyf<-yahooSeries("^GSPC", file="SPyahoo.csv", frequency="daily", nDaysBack=400)
z <- as.zoo(SPyf)
z[,1] <- (z[,2]+z[,3])/2
colnames(z)[1]  <- "hilo"

See the three vignettes that come with zoo for many examples.  In
particular, vignette("zoo-quickref") illustrates the use of the
tseries package to read a series from yahoo directly into a zoo
object.  Also see the related quantmod and xts packages.

On Wed, May 12, 2010 at 4:33 AM, Research <risk2009 at ath.forthnet.gr> wrote:
> Hello,
>
> I am importing data, say S&P 500 from yahoo:
>
> ? ?SPyf<-yahooSeries("^GSPC", file="SPyahoo.csv", frequency="daily",
> nDaysBack=400)
> ? ?SPCOMPd<-(SPyf[,4])
> ? ?a<-time(SPCOMPd)
> ? ?SPd<-zoo(SPCOMPd,as.POSIXct(a))
>
> I am not sure if the above is correct but I am trying to convert a
> timeSeries object to zoo.
>
>> is(SPCOMPd)
> [1] "timeSeries" "structure" ?"vector"
>>
>> is(SPd)
> [1] "zoo"
>
> I can do
>
> SPCOMPd[1]<-SPCOMPd[2]+SPCOMPd[3]
>
> with the timeseries object.
>
> Is it possible to do something like:
>
> SPd[1]<-(SPd[2]+SP[3])/2
>
> with the zoo object?
>
> I get:
>
> Error in SPd[1] <- (SPd[2] + SP[3])/2 : replacement has length zero
>
>
> Thanks in advance,
> Costas
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


From gcreamer at gmail.com  Thu May 13 17:24:46 2010
From: gcreamer at gmail.com (German Creamer)
Date: Thu, 13 May 2010 11:24:46 -0400
Subject: [R-SIG-Finance] Conference on Modeling High Frequency Data in
	Finance II
Message-ID: <AANLkTim7r6pT9sknZNI5HsO4N6HGdM0nRH5UbE2OszT7@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100513/652825ff/attachment.pl>

From trey.johnson at yahoo.com  Thu May 13 20:57:17 2010
From: trey.johnson at yahoo.com (Trey Johnson)
Date: Thu, 13 May 2010 14:57:17 -0400
Subject: [R-SIG-Finance] Pair Trade
Message-ID: <003201caf2ce$1c64bff0$552e3fd0$@johnson@yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100513/026bf3b6/attachment.pl>

From me at censix.com  Thu May 13 21:59:34 2010
From: me at censix.com (me at censix.com)
Date: Thu, 13 May 2010 21:59:34 +0200 (CEST)
Subject: [R-SIG-Finance] Pair Trade
In-Reply-To: <003201caf2ce$1c64bff0$552e3fd0$@johnson@yahoo.com>
References: <003201caf2ce$1c64bff0$552e3fd0$@johnson@yahoo.com>
Message-ID: <58910.78.234.67.201.1273780774.squirrel@censix.com>

Hi there. from a quick glance at you code I see this:

The residuals for GDX  and GLD are obviously identical at all
times(GLD$RES==GDX$RES) , so you do NOT need the symbol loop within the
date loop.

"..for(symbol in symbols){.. "

which is causing everything to be bought twice. instead i would suggest to
just use the GLD$RES and whenever you go long GLD, go short GDX within the
same "if" block. [if that is what you want to do here]

best regards

hope you can forgive the incomplete quoting style here but it is late in
the day :)

Soren

> Hello All,
>
>
>
>                 I'm trying to set up a back-test on a pairs trade using
> blotter, but I'm stuck. The code below results in both securities being
> bought or sold for each condition, when I need one security bought the
> other
> security sold for each condition. For example, if the residual is greater
> than 5, but GLD sell GDX. I've tried numerous alterations to no avail.
> I'm
> using R version 2.10.1(2009-12-14).  Any help is greatly appreciated.
>
>
>
> Best Regards,
>
> Trey Johnson
>
>
>
>
>
> library(quantmod)
>
> library(TTR)
>
> library(blotter)
>
>
>
> # Set initial values
>
> initDate='2007-07-31'
>
> endDate='2008-03-31'
>
> initEq=100000
>
>
>
> symbols = c("GLD", "GDX")
>
>
>
> # Set currency and instruments
>
> currency("USD")
>
>  for(symbol in symbols){
>
>      stock(symbol, currency="USD",multiplier=1)
>
>  }
>
>
>
> # Load data with quantmod
>
> print("Loading data")
>
> getSymbols(symbols, from=initDate, to=endDate,
> index.class=c("POSIXt","POSIXct"))
>
>
>
> #use adjusted price
>
>  for(symbol in symbols){
>
>       x=get(symbol)
>
>       x = adjustOHLC(x, use.Adjusted=TRUE)
>
> assign(symbol,x)
>
>  }
>
>
>
> mod <- specifyModel(Cl(GLD) ~ Cl(GDX))
>
>
>
> mod.bd <- buildModel(mod, method = "lm",
> training.per=c("2007-07-31","2008-03-31"))
>
>
>
> res<-residuals(mod.bd)
>
>
>
> GLD$RES <- residuals(mod.bd)
>
> GDX$RES <- residuals(mod.bd)
>
>
>
> # Set up a portfolio object and an account object in blotter
>
> initPortf(name='Pair Trade', symbols=symbols, initDate=initDate)
>
> initAcct(name='Pair Acct', portfolios='Pair Trade', initDate=initDate,
> initEq=initEq)
>
> verbose = TRUE
>
>
>
>
>
> # Create trades
>
> for( i in 2:NROW(GLD) ) {
>
>   CurrentDate=time(GLD)[i]
>
>   equity = getEndEq(Account='Pair Acct', CurrentDate)
>
>
>
> for(symbol in symbols) {
>
>     sym = get(symbol)
>
>     ClosePrice = as.numeric(Cl(sym[i,]))
>
>     Posn = getPosQty(Portfolio='Pair Trade', Symbol=symbol,
> Date=CurrentDate)
>
>     UnitSize = as.numeric(100)
>
>       #as.numeric(trunc((equity/NROW(symbols))/ClosePrice))
>
>      #UnitSize=as.numeric(trunc(equity/ClosePrice))
>
>
>
>     # Position Entry (assume fill at close)
>
>     if( Posn == 0 ) {
>
>     #enter position
>
>       if( as.numeric(sym[i,'RES']) > as.numeric(5) ) {
>
>         addTxn(Portfolio= 'Pair Trade', Symbol=symbol,
> TxnDate=CurrentDate,
> TxnPrice=ClosePrice, TxnQty=UnitSize, TxnFees=0, verbose=verbose)
>
>       }  else
>
>      #enter position
>
>       if( as.numeric(sym[i,'RES']) < as.numeric(-5) ) {
>
>         addTxn(Portfolio= 'Pair Trade', Symbol=symbol,
> TxnDate=CurrentDate,
> TxnPrice=ClosePrice, TxnQty=-UnitSize, TxnFees=0, verbose=verbose)
>
>       }
>
>     } else {
>
>       # exit position
>
>       if(  (Posn > 0 && as.numeric(sym[i,'RES']) < as.numeric(0)) || (Posn
> <
> 0 && as.numeric(sym[i,'RES']) > as.numeric(0))  ) {
>
>         # Store trade with blotter
>
>         addTxn(Portfolio='Pair Trade', Symbol=symbol, TxnDate=CurrentDate,
> TxnPrice=ClosePrice, TxnQty= -Posn, TxnFees=0, verbose=verbose)
>
>       }
>
>     }
>
> } #end symbol loop
>
>
>
>   # Calculate P&L and resulting equity with blotter
>
>   updatePortf(Portfolio='Pair Trade', Dates=CurrentDate)
>
>   updateAcct(name='Pair Acct', Dates=CurrentDate)
>
>   updateEndEq(Account='Pair Acct', Dates=CurrentDate)
>
>
>
> } # End date loop
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


From guy.yollin at rotellacapital.com  Thu May 13 22:03:16 2010
From: guy.yollin at rotellacapital.com (Guy Yollin)
Date: Thu, 13 May 2010 15:03:16 -0500
Subject: [R-SIG-Finance] Pair Trade
In-Reply-To: <003201caf2ce$1c64bff0$552e3fd0$@johnson@yahoo.com>
References: <003201caf2ce$1c64bff0$552e3fd0$@johnson@yahoo.com>
Message-ID: <E4259A82356E7F46B4F911FB27B0D7251E0FF6FD2D@AUSP01VMBX02.collaborationhost.net>

Hi Trey,

Good example code.

I believe you want to change the sign of the residuals for one of the symbols:

replace:
GLD$RES <- residuals(mod.bd)
GDX$RES <- residuals(mod.bd)

with:
GLD$RES <- residuals(mod.bd)
GDX$RES <- -residuals(mod.bd)

Hope this helps.

Best,

-- G


-----Original Message-----
From: r-sig-finance-bounces at stat.math.ethz.ch [mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of Trey Johnson
Sent: Thursday, May 13, 2010 11:57 AM
To: r-sig-finance at stat.math.ethz.ch
Subject: [R-SIG-Finance] Pair Trade

Hello All,

 

                I'm trying to set up a back-test on a pairs trade using
blotter, but I'm stuck. The code below results in both securities being
bought or sold for each condition, when I need one security bought the other
security sold for each condition. For example, if the residual is greater
than 5, but GLD sell GDX. I've tried numerous alterations to no avail.  I'm
using R version 2.10.1(2009-12-14).  Any help is greatly appreciated.

 

Best Regards,

Trey Johnson

 

 

library(quantmod)

library(TTR)

library(blotter)

 

# Set initial values

initDate='2007-07-31'

endDate='2008-03-31'

initEq=100000

 

symbols = c("GLD", "GDX")

 

# Set currency and instruments

currency("USD")

 for(symbol in symbols){

     stock(symbol, currency="USD",multiplier=1)

 }

 

# Load data with quantmod

print("Loading data")

getSymbols(symbols, from=initDate, to=endDate,
index.class=c("POSIXt","POSIXct"))

 

#use adjusted price

 for(symbol in symbols){

      x=get(symbol)

      x = adjustOHLC(x, use.Adjusted=TRUE)

assign(symbol,x)

 }

 

mod <- specifyModel(Cl(GLD) ~ Cl(GDX))

 

mod.bd <- buildModel(mod, method = "lm",
training.per=c("2007-07-31","2008-03-31"))

 

res<-residuals(mod.bd)

 

GLD$RES <- residuals(mod.bd)

GDX$RES <- residuals(mod.bd)

 

# Set up a portfolio object and an account object in blotter

initPortf(name='Pair Trade', symbols=symbols, initDate=initDate)

initAcct(name='Pair Acct', portfolios='Pair Trade', initDate=initDate,
initEq=initEq)

verbose = TRUE

 

 

# Create trades

for( i in 2:NROW(GLD) ) {

  CurrentDate=time(GLD)[i]

  equity = getEndEq(Account='Pair Acct', CurrentDate)

 

for(symbol in symbols) {

    sym = get(symbol)

    ClosePrice = as.numeric(Cl(sym[i,]))

    Posn = getPosQty(Portfolio='Pair Trade', Symbol=symbol,
Date=CurrentDate)

    UnitSize = as.numeric(100)  

      #as.numeric(trunc((equity/NROW(symbols))/ClosePrice)) 

     #UnitSize=as.numeric(trunc(equity/ClosePrice))

 

    # Position Entry (assume fill at close)

    if( Posn == 0 ) {

    #enter position

      if( as.numeric(sym[i,'RES']) > as.numeric(5) ) {

        addTxn(Portfolio= 'Pair Trade', Symbol=symbol, TxnDate=CurrentDate,
TxnPrice=ClosePrice, TxnQty=UnitSize, TxnFees=0, verbose=verbose)

      }  else

     #enter position

      if( as.numeric(sym[i,'RES']) < as.numeric(-5) ) {

        addTxn(Portfolio= 'Pair Trade', Symbol=symbol, TxnDate=CurrentDate,
TxnPrice=ClosePrice, TxnQty=-UnitSize, TxnFees=0, verbose=verbose)

      }  

    } else {

      # exit position

      if(  (Posn > 0 && as.numeric(sym[i,'RES']) < as.numeric(0)) || (Posn <
0 && as.numeric(sym[i,'RES']) > as.numeric(0))  ) {

        # Store trade with blotter

        addTxn(Portfolio='Pair Trade', Symbol=symbol, TxnDate=CurrentDate,
TxnPrice=ClosePrice, TxnQty= -Posn, TxnFees=0, verbose=verbose)

      } 

    }

} #end symbol loop

 

  # Calculate P&L and resulting equity with blotter

  updatePortf(Portfolio='Pair Trade', Dates=CurrentDate)

  updateAcct(name='Pair Acct', Dates=CurrentDate)

  updateEndEq(Account='Pair Acct', Dates=CurrentDate)

 

} # End date loop

 


	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From mam3xs at gmail.com  Thu May 13 22:58:02 2010
From: mam3xs at gmail.com (mam3xs)
Date: Thu, 13 May 2010 21:58:02 +0100
Subject: [R-SIG-Finance] ARMA(1,1)-GARCH(1,1) rolling estimation
Message-ID: <AANLkTinzkpKf-PuD1iP78AwamY58LIT1s2XfxwXfOQFl@mail.gmail.com>

Hi all,

I got the daily stock return data from 2005 - 2008, calculated from HF
minute data. (Thanks to Jeff and Josh).

Now, I set 05 - 07yr as the carlibration period for estimating the
parameters of ARMA(1,1)-GARCH(1,1) model, aqnd leave 08 for backtesting.

So I use the return data observations from 1:760 (yr 05-07) to estimate the
volatility on 2nd-Jan-08 (the position 761),
then use the return data from 1:761 to estimate the vol on 3rd-Jan-08...
1:762...
1:763....
...
...
and so on...

My codes are as follow:

start=length(AA.day.rn['2005-01::2007-12'])
end = length(AA.day.rn)

AA.day.forecast.data = array(0, dim=(end-start))

for (i in start:end) {

    garch.fit <- garchFit(formula = ~arma(1,1)+garch(1,1), data =
AA.day.rn[1:i])
    garch.pred <- predict(garch.fit, n.ahead=1)
    AA.day.forecast.data = garch.pred[,1]

}


Following my design, there should be 193 forecast data, however, when I
checked the object "AA.day.forecast.data", it gives the whole length of the
original data( 953 observations).....
Also, I am not too sure that after the loop function of garch.fit, will
garch.pred catch the right estimation result?

Many thanks.
Mam

P.S Sample data AA.day.rn is attached with this email.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100513/13b6cdf9/attachment.html>
-------------- next part --------------
2005-01-03,-0.0160003413464409
2005-01-04,-0.0162605208717803
2005-01-05,-0.00789997525315611
2005-01-06,0.00789997525315611
2005-01-07,0.0162605208717803
2005-01-10,-0.026476460766399
2005-01-11,-0.0180486182750128
2005-01-12,-0.00744756319835327
2005-01-13,0.000679347852214462
2005-01-14,0.0151645702990448
2005-01-18,-0.00570184338663404
2005-01-19,-0.0197017242135051
2005-01-20,-0.0113853222251254
2005-01-21,0.0106989803999675
2005-01-22,0
2005-01-24,-0.0110460218749062
2005-01-25,-0.0143334039292768
2005-01-26,0.00841519692528436
2005-01-27,0.0142141412054757
2005-01-28,-0.00275767151666129
2005-01-31,0.0184683771735892
2005-02-01,0.00169290712515258
2005-02-02,-0.00271002875886506
2005-02-03,-0.0116002665540771
2005-02-04,0.00786194444347021
2005-02-07,0.00847606362912368
2005-02-08,0.0127475728225028
2005-02-09,-0.0253178079842900
2005-02-10,0.00749322307173772
2005-02-11,0.0131469953614411
2005-02-14,0.00334336653797429
2005-02-15,-0.00468384931242616
2005-02-16,0.0264740808929451
2005-02-17,0.0133010882307514
2005-02-18,-0.00743978848075999
2005-02-22,-0.00292635552679821
2005-02-23,0.00907623734692597
2005-02-24,0.0131433211145509
2005-02-25,0.00729814440334975
2005-02-28,0.0119423166642143
2005-03-01,-0.0113102053915863
2005-03-02,-0.0111200510440779
2005-03-03,-0.000639181868997252
2005-03-04,0.0164873741090208
2005-03-07,-0.0142520227072014
2005-03-08,-0.00415535199164374
2005-03-09,-0.00836286636575956
2005-03-10,-0.0156253179030807
2005-03-11,0.0169164736667007
2005-03-14,0.00578965914448437
2005-03-15,0.0130637511843630
2005-03-16,-0.00666986750910725
2005-03-17,0.0057197486727869
2005-03-18,0.00347936457287501
2005-03-21,-0.00665296292041662
2005-03-22,-0.0160208489086053
2005-03-23,-0.0185824417928244
2005-03-24,-0.000987654401272575
2005-03-28,-0.0102632915462126
2005-03-29,-0.0161023271168310
2005-03-30,0.0110981465322548
2005-03-31,0.0198682032167254
2005-04-01,-0.00756956057973879
2005-04-04,-0.00629662395198816
2005-04-05,-0.00299650632072135
2005-04-06,0.0253511518765257
2005-04-07,0.019955602667443
2005-04-08,0.00540284168233596
2005-04-11,-0.0121174952079768
2005-04-12,0.00480077734335671
2005-04-13,-0.0298142627104263
2005-04-14,-0.0162497357703191
2005-04-15,-0.0114325387774712
2005-04-18,0.00101402746562895
2005-04-19,-0.0101868453069929
2005-04-20,-0.0137459209046353
2005-04-21,0.0202096277087982
2005-04-22,-0.00988251355294878
2005-04-25,0.0081855845864398
2005-04-26,-0.0198977405149510
2005-04-27,-0.0045146803545264
2005-04-28,-0.00558465674851671
2005-04-29,0.0156280312133603
2005-05-02,0.0058409374099817
2005-05-03,0.00376133115699817
2005-05-04,0.00544589501146264
2005-05-05,-0.00374086476037894
2005-05-06,-0.00102266925565475
2005-05-09,0.00102266925565475
2005-05-10,-0.0293884589995006
2005-05-11,-0.00316289140850845
2005-05-12,-0.0307386602671729
2005-05-13,-0.0332133849870702
2005-05-16,-0.00150206562225552
2005-05-17,0.0222974678055570
2005-05-18,0.0232484135781381
2005-05-19,-0.00648417257445821
2005-05-20,-0.00689032644468623
2005-05-23,0.00941694753253675
2005-05-24,-0.0101450145468602
2005-05-25,-0.0109850976493298
2005-05-26,0.00660552860530839
2005-05-27,0.00437956904402137
2005-05-31,-0.0131966724541699
2005-06-01,0.0208150659131796
2005-06-02,0.00324734183976894
2005-06-03,-0.0156111356986273
2005-06-06,0
2005-06-07,-0.00219780308247941
2005-06-08,0.00109950533341729
2005-06-09,-0.0121615650392757
2005-06-10,0.00480859073401652
2005-06-13,0.0110092855083694
2005-06-14,-0.00585653211271309
2005-06-15,0.0116789648641462
2005-06-16,0.0129778317487141
2005-06-17,0.0170458672729885
2005-06-20,-0.0138275558951433
2005-06-21,-0.00752556857542563
2005-06-22,-0.00396468351372103
2005-06-23,-0.0152841403253734
2005-06-24,-0.0301530381706874
2005-06-27,-0.0140820595381728
2005-06-28,0.0144599170903730
2005-06-29,-0.00644307705529101
2005-06-30,-0.00380952841666771
2005-07-01,-0.00229270257097536
2005-07-05,0.00229270257097536
2005-07-06,-0.00574164256767506
2005-07-07,0.0298755439041050
2005-07-08,0.0151602090057721
2005-07-11,0.0214203143569658
2005-07-12,-0.0064865092296067
2005-07-13,-0.00871465210244393
2005-07-14,0.00545555090153726
2005-07-15,-0.00326975768155702
2005-07-18,0.00689032644468623
2005-07-19,0.0157765911196059
2005-07-20,0.0151812271302498
2005-07-21,0.00314850706133329
2005-07-22,-0.000698812048005149
2005-07-25,-0.00877660539809177
2005-07-26,-0.00317852995842793
2005-07-27,-0.00425381711979966
2005-07-28,0.0148098616569823
2005-07-29,-0.0183685842739760
2005-08-01,-0.00500358442047455
2005-08-02,0.0300004853046150
2005-08-03,-0.00208841008727045
2005-08-04,-0.0211275464258756
2005-08-05,-0.0128941614530147
2005-08-08,0.0107566472797043
2005-08-09,0.0208230569436343
2005-08-10,0.00834787456481978
2005-08-11,0.0303622162900474
2005-08-12,-0.00134499011533284
2005-08-15,-0.0245243898630840
2005-08-16,0.00241088458431049
2005-08-17,-0.0236697440859048
2005-08-18,-0.0113355801110888
2005-08-19,0.00106818596590896
2005-08-22,0.00921012532422694
2005-08-23,-0.0242695709144582
2005-08-24,-0.0105321474744819
2005-08-25,0.00291651683219563
2005-08-26,-0.00657416538693534
2005-08-29,0.00693813263390153
2005-08-30,-0.0176216013498194
2005-08-31,-0.00371057939653596
2005-09-01,0.0107229720365862
2005-09-02,-0.0099797538678521
2005-09-06,0.00148478126757912
2005-09-07,-0.0153245383561584
2005-09-08,-0.00490844859376871
2005-09-09,0.0157720130093018
2005-09-12,0.0103781509687138
2005-09-13,-0.0118695755553837
2005-09-14,-0.0074906717291574
2005-09-15,-0.00830506849848511
2005-09-16,0.0210060236930496
2005-09-19,-0.0202481608299476
2005-09-20,-0.00607904607638243
2005-09-21,-0.00841949099152872
2005-09-22,-0.0610090154402338
2005-09-23,-0.0024539889615669
2005-09-26,-0.00904983551991778
2005-09-27,-0.00788222292947882
2005-09-28,0.00249584156181859
2005-09-29,0.00951009855152218
2005-09-30,0.00492611833605583
2005-10-03,-0.0227800283318200
2005-10-04,-0.0198864179870828
2005-10-05,-0.0150702529209981
2005-10-06,-0.00609227297725345
2005-10-07,0.0065260183755087
2005-10-10,0.00605276383135145
2005-10-11,-0.0147636203056001
2005-10-12,-0.00658330224919723
2005-10-13,-0.00795760167331405
2005-10-14,0.0193412622568538
2005-10-17,0.00953213456643365
2005-10-18,0.00387347159579665
2005-10-19,0.0178804252778484
2005-10-20,-0.0153064212826757
2005-10-21,0.000428357256496259
2005-10-24,0.0253713397420179
2005-10-25,-0.00083542193664199
2005-10-26,-0.00460733799312818
2005-10-27,0.00209687642358469
2005-10-28,0.00334588350618548
2005-10-31,0.0140964191571569
2005-11-01,0.0151177547221173
2005-11-02,0.00162074589773331
2005-11-03,0.0172591079215692
2005-11-04,0.00159045759172383
2005-11-07,0.0301333697410735
2005-11-08,0.00461539280840118
2005-11-09,0.00535783907035192
2005-11-10,0.00152555330883697
2005-11-11,0.0166292569715347
2005-11-14,-0.00262713605782494
2005-11-15,-0.0124788913731879
2005-11-16,-0.00190439973762757
2005-11-17,0.00835236442552612
2005-11-18,-0.00189214815203798
2005-11-21,0.0124225199985570
2005-11-22,-0.00112296474462381
2005-11-23,0.00746272120158942
2005-11-25,0.0158587133321832
2005-11-28,0.00983077278312816
2005-11-29,0.00973506877075225
2005-11-30,-0.0137285393167024
2005-12-01,0.00977383346144922
2005-12-02,0.0121734407010963
2005-12-05,-0.00463706912583151
2005-12-06,0.00889843921079958
2005-12-07,0.0130260599095524
2005-12-08,-0.00350385782440377
2005-12-09,-0.00739830748144454
2005-12-12,-0.00745345065458114
2005-12-13,0.00816041427540082
2005-12-14,0.00669134386062487
2005-12-15,-0.00987662349591156
2005-12-16,0.000708717251492796
2005-12-19,0.0112716938366213
2005-12-20,-0.0087951314528274
2005-12-21,0.0216715926413720
2005-12-22,0.0140774856987957
2005-12-23,0.00577938035641479
2005-12-27,-0.00782716264197969
2005-12-28,0.0118867081358580
2005-12-29,0.00101231660408185
2005-12-30,-0.0027017915793488
2006-01-03,0.007748059646973
2006-01-04,0.00901960348907904
2006-01-05,0.00794969406927404
2006-01-06,-0.00330469567113134
2006-01-09,-0.0190481949706944
2006-01-10,-0.00473453708211169
2006-01-11,-0.0109067202511346
2006-01-12,-0.0131081559527395
2006-01-13,0.0051948168771041
2006-01-17,-0.00172860890061788
2006-01-18,0.00276434177414986
2006-01-19,0.0174452859346483
2006-01-20,-0.0236758356852844
2006-01-23,0.0131081559527395
2006-01-24,0.00444521162816125
2006-01-25,0.0202641179190559
2006-01-26,0.0286722557688761
2006-01-27,0.0167529691353745
2006-01-30,-0.024908290799321
2006-01-31,0.0133400383981335
2006-02-01,0.0048363789257424
2006-02-02,-0.0142535616884421
2006-02-03,-0.00228646188130410
2006-02-06,0.0547210297276948
2006-02-07,-0.0452823917145428
2006-02-08,0.00999202511556252
2006-02-09,-0.00353414022467469
2006-02-10,-0.0267465389281054
2006-02-13,-0.000330633165518179
2006-02-14,0.0366864708912544
2006-02-15,-0.0154195152720966
2006-02-16,-0.044348763078383
2006-02-17,0.0277007533155196
2006-02-21,-0.00362737413399961
2006-02-22,-0.000660938556776625
2006-02-23,-0.00165426009602676
2006-02-24,-0.00198873118247445
2006-02-27,-0.0211240042435010
2006-02-28,-0.00645931193639759
2006-03-01,0.00781386683365648
2006-03-02,0.0117747365445333
2006-03-03,0.0165841280155354
2006-03-06,-0.0199342149008173
2006-03-07,-0.0203396842371228
2006-03-08,-0.0144880078150140
2006-03-09,0.00104184763721538
2006-03-10,0.0144730300267173
2006-03-13,-0.00480110661604405
2006-03-14,0.0173798888229042
2006-03-15,0.0100841190666259
2006-03-16,0.0113070709146919
2006-03-17,-0.00430820881768978
2006-03-20,-0.00967803315705007
2006-03-21,-0.0230675085695338
2006-03-22,0.00752140297925585
2006-03-23,0.00543479598595731
2006-03-24,0.0104465987943851
2006-03-27,0.0166227231738327
2006-03-28,-0.00528926852951983
2006-03-29,0.0180658551085013
2006-03-30,0
2006-03-31,0
2006-04-03,0.00584227562422823
2006-04-04,-0.00129533696868478
2006-04-05,0.0268558339482201
2006-04-06,0.0109805024834442
2006-04-07,0.0139429059690128
2006-04-10,0.0769610411361281
2006-04-11,-0.0245145657635857
2006-04-12,-0.00585653211271309
2006-04-13,-0.0100355033495516
2006-04-17,0.00856599537019198
2006-04-18,0.0335485482008147
2006-04-19,-0.00599060413715691
2006-04-20,-0.00775531676747843
2006-04-21,0.0148829306917104
2006-04-24,0.00904983551991823
2006-04-25,-0.0104712998672958
2006-04-26,-0.00427655676726024
2006-04-27,-0.0438026226583927
2006-04-28,0.00832347254863341
2006-05-01,0.00854832029322106
2006-05-02,0.00614486205670373
2006-05-03,-0.0161744446560204
2006-05-04,0.0219917967219336
2006-05-05,0
2006-05-08,0.0464672827532921
2006-05-09,0.0229895182246991
2006-05-10,-0.0202247943182163
2006-05-11,-0.00387275726084413
2006-05-12,-0.0361213084139944
2006-05-15,-0.0389678715571935
2006-05-16,0.00506631988151218
2006-05-17,-0.0449923907939818
2006-05-18,-0.0335156251255770
2006-05-19,0.0297773030149702
2006-05-22,-0.0281708769666964
2006-05-23,-0.0100016965383336
2006-05-24,0.0038835000263977
2006-05-25,0.0214099885960310
2006-05-26,0.0209611929110536
2006-05-30,-0.0250796843970238
2006-05-31,0.0144975750664869
2006-06-01,0.0189064983900682
2006-06-02,0
2006-06-05,-0.0372208719832559
2006-06-06,-0.0222338786732417
2006-06-07,-0.0114698947112584
2006-06-08,-0.0089389769199486
2006-06-09,0.00365145633926511
2006-06-12,-0.0150228163296964
2006-06-13,0
2006-06-14,-0.0047201705978881
2006-06-15,0.0227206566215088
2006-06-16,-0.00696173870879857
2006-06-19,-0.0324572101473817
2006-06-20,0.00308801068857667
2006-06-21,0.0220235904695367
2006-06-22,0.00501421742535735
2006-06-23,0.00631546057878518
2006-06-26,0.0161055247864574
2006-06-27,-0.0095004809585335
2006-06-28,0.00558018844997754
2006-06-29,0.0432413241731946
2006-06-30,0.0143170823994918
2006-07-03,0.0223080297432303
2006-07-05,0.00992340123372681
2006-07-06,0.00388234025044287
2006-07-07,0.00594355390084811
2006-07-10,-0.0541824542467886
2006-07-11,-0.0084812821885154
2006-07-12,0.0109805024834442
2006-07-13,-0.0333099788815328
2006-07-14,-0.00712207607441329
2006-07-17,-0.0183611715661396
2006-07-18,0.00626754484467984
2006-07-19,0.0185703332994493
2006-07-20,-0.0331449536601509
2006-07-21,-0.0137747852485708
2006-07-24,0.00607084495200816
2006-07-25,0.00803755164244269
2006-07-26,-0.00602209916309304
2006-07-27,-0.0162385164929080
2006-07-28,0.0138867599915558
2006-07-31,0.00737268755145193
2006-08-01,-0.0222831637218164
2006-08-02,0.00306800990608913
2006-08-03,0.00746019058428349
2006-08-04,-0.00101402746562895
2006-08-07,-0.00576565951974972
2006-08-08,-0.00682596507040012
2006-08-09,-0.0124053968574875
2006-08-10,0.00207828270163812
2006-08-11,-0.0220404234128875
2006-08-14,-0.0120997917484136
2006-08-15,0.0198517685527313
2006-08-16,0.0076923456231559
2006-08-17,-0.00699059120839207
2006-08-18,-0.000350815649975633
2006-08-21,0.00873367996875452
2006-08-22,0.0121004069340875
2006-08-23,-0.00585905518940333
2006-08-24,-0.00902783909276517
2006-08-25,0.00729803412934693
2006-08-28,-0.00103932107051685
2006-08-29,-0.0017346058122083
2006-08-30,-0.0118757944801939
2006-08-31,0.00210600288438911
2006-09-01,0.0170350025872175
2006-09-05,-0.00379900301492642
2006-09-06,-0.00381349049430213
2006-09-07,0.00415945140417051
2006-09-08,-0.00798754029683524
2006-09-11,-0.0544547130409243
2006-09-12,0.0087977107035293
2006-09-13,0
2006-09-14,0.0166489549576352
2006-09-15,0.00964465415010585
2006-09-18,0.0116629701599407
2006-09-19,-0.0134420135040960
2006-09-20,-0.0147087853587755
2006-09-21,0
2006-09-22,-0.00616278912630897
2006-09-25,-0.0076656699522788
2006-09-26,0.0134669915163652
2006-09-27,0.00288808865007306
2006-09-28,0.00575127394063468
2006-09-29,0.00464867634937693
2006-10-02,-0.0140113662772277
2006-10-03,-0.0189925358272744
2006-10-04,0.00147383961830050
2006-10-05,0.0149829223452103
2006-10-06,0.00614718985097973
2006-10-09,0.0146719396990140
2006-10-10,-0.0566361387980456
2006-10-11,0.0138139213639850
2006-10-12,-0.0138139213639850
2006-10-13,0.00262812240626920
2006-10-16,0.0306466664786029
2006-10-17,0.00181653092639777
2006-10-18,-0.00363636764338393
2006-10-19,0.00291015119897642
2006-10-20,-0.00181785180036753
2006-10-23,0.000363834823005948
2006-10-24,0.00797105669773268
2006-10-25,0.00216294244382098
2006-10-26,-0.00577827537664488
2006-10-27,0.0246837787071286
2006-10-30,-0.00141442739281050
2006-10-31,0.0230860200341825
2006-11-01,-0.0128764611885446
2006-11-02,-0.00175284882741433
2006-11-03,-0.0003509387647882
2006-11-06,0.0115164420615592
2006-11-07,0.0130991187028600
2006-11-08,-0.0162268362830376
2006-11-09,0.00969872514211456
2006-11-10,-0.0173856952087323
2006-11-11,0
2006-11-13,-0.000701754414763833
2006-11-14,-0.00386847677792002
2006-11-15,0.0126052089189823
2006-11-16,-0.0150747815270709
2006-11-17,-0.00141392741830915
2006-11-20,0.00704972958444738
2006-11-21,0.0246326418046934
2006-11-22,0.0422739898988453
2006-11-24,0.00883080145924575
2006-11-27,-0.0217256734715141
2006-11-28,0.00497926339960708
2006-11-29,0.0248541243407026
2006-11-30,0.00643917228102131
2006-12-01,-0.00935038248847953
2006-12-04,0.00999202511556252
2006-12-05,-0.010964314934502
2006-12-06,-0.00292255444260192
2006-12-07,0.00194931835604972
2006-12-08,0.00968999830096928
2006-12-11,-0.00193050253005778
2006-12-12,-0.00161160389434167
2006-12-13,-0.0172446114875284
2006-12-14,0.00947255163982552
2006-12-15,0.00906155067757464
2006-12-18,-0.0191907011591121
2006-12-19,0.000984736662539731
2006-12-20,-0.0142080698372289
2006-12-21,-0.0269830873033512
2006-12-22,-0.000341938796287966
2006-12-26,0.00443611032895141
2006-12-27,0.0218900809947868
2006-12-28,0
2006-12-29,-0.00200066755629713
2007-01-03,-0.0222756426259969
2007-01-04,-0.00650575826548971
2007-01-05,-0.0117485801940753
2007-01-08,-0.00942909028885186
2007-01-09,0.0479543931220356
2007-01-10,0.0162551265320614
2007-01-11,0.00262898606891593
2007-01-12,0.0140135909060817
2007-01-16,-0.0104099834027833
2007-01-17,-0.000981514883311885
2007-01-18,-0.00788699454789255
2007-01-19,0.0337365760092179
2007-01-22,-0.00575817329968409
2007-01-23,0.0105314520523416
2007-01-24,0.00947874395454384
2007-01-25,0.00062873312350975
2007-01-26,0.0103174277739875
2007-01-27,0.00155400186673438
2007-01-29,-0.0125001627642316
2007-01-30,0
2007-01-31,0.0211582255073459
2007-02-01,0.00980400009662086
2007-02-02,-0.0110362861428857
2007-02-05,0.00277051123804783
2007-02-06,0.00978900444535968
2007-02-07,-0.0168845147020087
2007-02-08,0.00617285910708087
2007-02-09,-0.000615574042214906
2007-02-12,0.103727409466525
2007-02-13,-0.0290038632705882
2007-02-14,-0.0120725812342690
2007-02-15,0.00375234961855053
2007-02-16,0.00201467905244179
2007-02-20,0.00143657545177289
2007-02-21,0.00914553387876404
2007-02-22,0.0177644598238995
2007-02-23,-0.0197579105765908
2007-02-24,0
2007-02-26,0.00795007026546024
2007-02-27,-0.0454163370432443
2007-02-28,-0.0116090007435439
2007-03-01,-0.00299850299625648
2007-03-02,-0.0194063094440793
2007-03-05,-0.0295189989920628
2007-03-06,0.0230683545998431
2007-03-07,-0.00154202035181550
2007-03-08,0.00277392688272560
2007-03-09,0.0261254226806238
2007-03-10,0.00597909105605776
2007-03-12,-0.00388234025044287
2007-03-13,-0.00359712618084984
2007-03-14,0.000600420312244054
2007-03-15,0.0169621683203180
2007-03-16,-0.0121717399976857
2007-03-19,0.0154122789948872
2007-03-20,0.00205670705671368
2007-03-21,-0.0094368143543364
2007-03-22,-0.00177935990007727
2007-03-23,0.0194009612498967
2007-03-26,-0.0134820330493981
2007-03-27,0.000589970518587002
2007-03-28,-0.00977930448815245
2007-03-29,0.0029735377247313
2007-03-30,0.00651082501227851
2007-04-02,0.00147383961830094
2007-04-03,0.0195426957433575
2007-04-04,-0.00347222571074868
2007-04-05,0.00260529891176331
2007-04-09,0.0137814412030091
2007-04-10,0.0183646918562115
2007-04-11,-0.0192204899401074
2007-04-12,-0.000285428858795456
2007-04-13,0.00341978104727847
2007-04-16,-0.00971991643332615
2007-04-17,-0.00402994212641561
2007-04-18,-0.00578537916815813
2007-04-19,-0.00494402635687985
2007-04-20,0.00262047027228096
2007-04-23,-0.00700323842737616
2007-04-24,-0.00410798699769499
2007-04-25,0.0456910388388811
2007-04-26,0.00588154615235625
2007-04-27,0.00529175444576868
2007-04-30,-0.0179377006866672
2007-05-01,-0.0168262917496724
2007-05-02,0.00315865302100882
2007-05-03,0.00514728045230939
2007-05-04,0.0152847583648965
2007-05-07,0.082201137175446
2007-05-08,0.0192190412704569
2007-05-09,-0.0158611664893824
2007-05-10,-0.0295716955686030
2007-05-11,0.00977938281438062
2007-05-14,0.00994512253339774
2007-05-15,0.0155041865359653
2007-05-16,0.00383877630716567
2007-05-17,0
2007-05-18,0.0142026227063483
2007-05-21,-0.009107070279748
2007-05-22,0.00734273459837498
2007-05-23,0.0214632646507060
2007-05-24,-0.00818152574130249
2007-05-25,0.0228876731309984
2007-05-29,-0.0184167267862314
2007-05-30,0.0235132066927153
2007-05-31,-0.000726480235365923
2007-06-01,0.0172914971100613
2007-06-04,-0.0277627969773566
2007-06-05,-0.00638509045520541
2007-06-06,-0.0183993256145825
2007-06-07,-0.0228436329194666
2007-06-08,0.0185685100999149
2007-06-11,-0.00962276354145697
2007-06-12,0.00101729408569762
2007-06-13,0.0290601611515804
2007-06-14,0.0122700925918147
2007-06-15,0.0145281005629099
2007-06-18,0.00956945101615059
2007-06-19,-0.0100503358535016
2007-06-20,-0.0263173083173736
2007-06-21,-0.00395844158642733
2007-06-22,-0.0084640784121297
2007-06-25,-0.0133385644391804
2007-06-26,-0.0197012896390198
2007-06-27,0.00695251931488183
2007-06-28,0.00358606941680506
2007-06-29,0.0378823673848157
2007-07-02,0.0112608289081186
2007-07-03,0.0101720421762952
2007-07-05,0
2007-07-06,0.00672432889176733
2007-07-09,0.0170863198019515
2007-07-10,-0.0137410359175845
2007-07-11,0.0113853222251254
2007-07-12,0.0814930342511828
2007-07-13,0.0320883145515003
2007-07-16,-0.0127120355883616
2007-07-17,-0.0154708715258844
2007-07-18,0.00259515716583891
2007-07-19,-0.0374081020661698
2007-07-20,-0.0332832180650082
2007-07-23,-0.0161237282036537
2007-07-24,-0.0277065728593575
2007-07-25,-0.00924580795669172
2007-07-26,-0.0672309716687622
2007-07-27,-0.0272973090584401
2007-07-30,0.0312112083795761
2007-07-31,-0.0078431774610257
2007-08-01,-0.00711184348771754
2007-08-02,-0.00476948439903513
2007-08-03,-0.0310206936574566
2007-08-06,-0.0227219528766374
2007-08-07,0.0202531544755336
2007-08-08,0.0203894517582954
2007-08-09,-0.0448555039127019
2007-08-10,-0.0262347523856827
2007-08-13,0.0267974986019968
2007-08-14,-0.0141645427686505
2007-08-15,-0.0318867594758938
2007-08-16,-0.0591529512049789
2007-08-17,0.0374162013854225
2007-08-20,0.0305344605230853
2007-08-21,0.0188002645001473
2007-08-22,0.0434546292462858
2007-08-23,-0.0235958205966824
2007-08-24,0.0355948737505991
2007-08-27,0.00297740103564026
2007-08-28,-0.0427946596660878
2007-08-29,0.0242453007549561
2007-08-30,-0.00469160512831923
2007-08-31,0.0104568922024177
2007-09-04,0.00600438485165444
2007-09-05,-0.00573067470898492
2007-09-06,-0.0079681696491769
2007-09-07,-0.0376660601837391
2007-09-10,-0.0281790613108646
2007-09-11,0.0070464178813645
2007-09-12,-0.0126602603689059
2007-09-13,0.0234271328951401
2007-09-14,0.0268434164447262
2007-09-17,-0.00451850528735154
2007-09-18,0.0421231572642919
2007-09-19,0.0214773356105571
2007-09-20,-0.00987596442851224
2007-09-21,0.00321371460309594
2007-09-24,-0.0107527917762620
2007-09-25,0
2007-09-26,0.0387008275164091
2007-09-27,0.0152241361250613
2007-09-28,0.00179096888092189
2007-10-01,-0.000255656399193782
2007-10-02,-0.00667011195376643
2007-10-03,-0.0316407620964778
2007-10-04,0.0121469674154766
2007-10-05,0.023347363996991
2007-10-08,-0.0155041865359653
2007-10-09,0.0380682063236342
2007-10-10,-0.0292530079384652
2007-10-11,-0.0206031541372109
2007-10-12,0.00473187002783337
2007-10-15,0.00209588758933599
2007-10-16,-0.020624739542471
2007-10-17,0.0103655413139743
2007-10-18,0.018079884596506
2007-10-19,-0.0263103837330219
2007-10-22,0.00584796988242342
2007-10-23,0.00975874815643607
2007-10-24,0.00262123347987409
2007-10-25,0.00496149340017693
2007-10-26,0.0246989658507060
2007-10-29,0.028805999249081
2007-10-30,-0.0282978691568472
2007-10-31,0.00329656695142999
2007-11-01,-0.0413495598186953
2007-11-02,0.0172643576539642
2007-11-05,-0.0141031326820618
2007-11-06,0.0151399394105018
2007-11-07,-0.0315815720502988
2007-11-08,0.0106383982050557
2007-11-09,-0.0186921330121526
2007-11-12,-0.0337156780691985
2007-11-13,0.0228754635163337
2007-11-14,0.00949159668157096
2007-11-15,-0.0196245055089852
2007-11-16,-0.000550660806866166
2007-11-19,-0.0367451239368308
2007-11-20,0.00966740540213706
2007-11-21,-0.00482202040565927
2007-11-23,0.000284292823520715
2007-11-26,-0.00827748411072937
2007-11-27,0.00429001086950809
2007-11-28,0.0311866825365827
2007-11-29,0.0110042375910138
2007-11-30,-0.00493692719688976
2007-12-03,-0.0259031332620174
2007-12-04,-0.00565932466890118
2007-12-05,0.0104446962217075
2007-12-06,-0.00761103039813582
2007-12-07,0.0407540804993793
2007-12-10,0.0278614324925277
2007-12-11,-0.0465074347239085
2007-12-12,0.0235240606848137
2007-12-13,-0.0182790521112701
2007-12-14,-0.0316066023995991
2007-12-17,-0.0373469369470891
2007-12-18,0.0227481375259364
2007-12-19,-0.00549372496359135
2007-12-20,0.0260423931909792
2007-12-21,0.0264823838397996
2007-12-22,0.00685403642779203
2007-12-24,0.0111399059907442
2007-12-26,0.0107499019619901
2007-12-27,-0.0112904425156919
2007-12-28,-0.00352065360268572
2007-12-31,-0.00844576604588987
2008-01-02,-0.0079659808690824
2008-01-03,-0.00193236775105365
2008-01-04,-0.0325780003662559
2008-01-07,-0.0657763218192975
2008-01-08,-0.0548297070106099
2008-01-09,0.0416332595586648
2008-01-10,-0.0294692171286766
2008-01-11,0.0117034389766548
2008-01-14,0.0337023704148347
2008-01-15,-0.058858927088608
2008-01-16,-0.0123298122676738
2008-01-17,-0.0581383257262975
2008-01-18,0.0031093478151778
2008-01-19,0.00378723124388269
2008-01-22,-0.00932166252713618
2008-01-23,0.0110384011461906
2008-01-24,0.0566818375548954
2008-01-25,-0.00519988171975205
2008-01-28,0.0250978424446706
2008-01-29,0.0371163764660034
2008-01-30,-0.00398834705705875
2008-01-31,0.0173705418977574
2008-02-01,0
2008-02-04,0.0329847166064958
2008-02-05,-0.0405662540588936
2008-02-06,-0.0137933221323361
2008-02-07,0.0165293019512105
2008-02-08,0.0254771759767043
2008-02-11,0.00795877450834404
2008-02-12,-0.0168767884284291
2008-02-13,0.0791924944945706
2008-02-14,-0.0248581435312412
2008-02-15,0.0137623292761866
2008-02-16,0
2008-02-19,0.0152252075970658
2008-02-20,0.00274348594575091
2008-02-21,0
2008-02-22,0
2008-02-23,0.00546449447207875
2008-02-25,0.0535795073478513
2008-02-26,-0.00569802111463735
2008-02-27,0.0141846349919561
2008-02-28,0.00179096888092189
2008-02-29,-0.0519392892420569
2008-03-01,0.00322580924888261
2008-03-03,0.0236053925570237
2008-03-04,-0.0034134206701828
2008-03-05,0.0292880853765287
2008-03-06,-0.0157037594505915
2008-03-07,-0.0516484225789
2008-03-10,-0.0154188076671833
2008-03-11,0.0447653745389069
2008-03-12,0.0081913524473416
2008-03-13,0.0104712998672953
2008-03-14,-0.000260450580974680
2008-03-17,-0.0341800393993168
2008-03-18,0.0424809949761671
2008-03-19,-0.0809472758039633
2008-03-20,-0.0240975515790605
2008-03-24,0.0105609658615271
2008-03-25,0.0138166585382971
2008-03-26,0.00781036048458228
2008-03-27,-0.00753036608264113
2008-03-28,0.00502653948593501
2008-03-31,0.00555556984460193
2008-04-01,0.0123883208569522
2008-04-02,-0.00136892560734125
2008-04-03,0.0554217468891371
2008-04-04,0.0159427393188336
2008-04-07,-0.0515618589117914
2008-04-08,-0.0034979182712358
2008-04-09,-0.0078474222224596
2008-04-10,-0.0167104285592043
2008-04-11,-0.039441732051297
2008-04-14,-0.0253178079842900
2008-04-15,0.0267535584103942
2008-04-16,0.0316321205009995
2008-04-17,-0.0106205581854311
2008-04-18,0.0225040751205938
2008-04-21,-0.0110498361865852
2008-04-22,-0.02190483538805
2008-04-23,0.00707316571747052
2008-04-24,-0.0257010148519972
2008-04-25,0.0327245020747648
2008-04-28,0.000559753722984002
2008-04-29,-0.0243569106905031
2008-04-30,-0.00805991697710029
2008-05-01,0.0057637047167498
2008-05-02,0.0369524485089379
2008-05-05,0.0483812767990144
2008-05-06,0.00762258914904379
2008-05-07,0.00392003638007399
2008-05-08,0.0305661396910955
2008-05-09,-0.0134982311789478
2008-05-12,0.0621317811070061
2008-05-13,0.0179109265665303
2008-05-14,-0.0107080142724723
2008-05-15,0.0264415782317875
2008-05-16,-0.000233018759064674
2008-05-19,0.0431032404175062
2008-05-20,-0.0363676441708747
2008-05-21,-0.0362990594172388
2008-05-22,-0.0159693691285181
2008-05-23,-0.0197050710793323
2008-05-27,0.00743497848751762
2008-05-28,0.0267981931547245
2008-05-29,-0.0324933924038548
2008-05-30,0.0079149559874434
2008-06-02,-0.00518711796611493
2008-06-03,-0.0245687965808035
2008-06-04,-0.0127715656794876
2008-06-05,0.0341157532401719
2008-06-06,-0.0264332570681556
2008-06-09,0.07563741420562
2008-06-10,-0.0045039782195575
2008-06-11,-0.0624973650400085
2008-06-12,-0.0450037151169287
2008-06-13,0.0429783979689273
2008-06-16,0.0113394184661728
2008-06-17,-0.0141309441972299
2008-06-18,-0.00637350787209234
2008-06-19,0.0058651194523982
2008-06-20,-0.0527261992106518
2008-06-23,0.00907156701283629
2008-06-24,-0.0112180663612773
2008-06-25,-0.00781991311353147
2008-06-26,-0.047113173703115
2008-06-27,0.00424749328939322
2008-06-30,-0.0107955593907980
2008-07-01,-0.0138052235646731
2008-07-02,-0.0683104681601194
2008-07-03,0.0163005300739019
2008-07-07,0.0187373266669710
2008-07-08,0.00149588659158306
2008-07-09,-0.0553136379840522
2008-07-10,0.0891155334734934
2008-07-11,0.00748635802819608
2008-07-14,0.00400802139753864
2008-07-15,0.00285306898240645
2008-07-16,-0.01898245091229
2008-07-17,-0.0205346024417077
2008-07-18,0.00767644749833929
2008-07-21,-0.00738010729762273
2008-07-22,0.00384445246531495
2008-07-23,-0.0305687571747320
2008-07-24,-0.0429036890599193
2008-07-25,0.0163834792505240
2008-07-28,0.0253021828622182
2008-07-29,0.0175178143207098
2008-07-30,0.0416360343573885
2008-07-31,-0.0312115170215042
2008-08-01,-0.0473245720078221
2008-08-04,-0.0354131219057607
2008-08-05,0.0203893651453
2008-08-06,0.0199819323966537
2008-08-07,-0.0108781181471831
2008-08-08,-0.00752826642079141
2008-08-11,-0.0161882601965244
2008-08-12,-0.00932332746088438
2008-08-13,0.0408219945202553
2008-08-14,-0.0109120334509827
2008-08-15,-0.00471328445209807
2008-08-18,-0.0203634144291551
2008-08-19,0
2008-08-20,0.020993137371879
2008-08-21,0.0115789120279417
2008-08-22,0.00496586991924453
2008-08-25,-0.0276225974011357
2008-08-26,0.00602889340005097
2008-08-27,0.0125748277542455
2008-08-28,0.0121100688165119
2008-08-29,-0.0083682496705162
2008-09-02,-0.0530475801301495
2008-09-03,-0.0229055657417550
2008-09-04,-0.0411298547541414
2008-09-05,-0.00667020201684165
2008-09-08,-0.0282211977617752
2008-09-09,-0.0256894861153114
2008-09-10,0.00740744127786197
2008-09-11,0.0182820448374494
2008-09-12,0.0380355071721739
2008-09-15,-0.0637249932874853
2008-09-16,-0.0037243990909821
2008-09-17,-0.0595757317954422
2008-09-18,0.0219358580091535
2008-09-19,0.0372666698259949
2008-09-22,0.000373203960293722
2008-09-23,-0.0306900388634124
2008-09-24,0.000384689368083446
2008-09-25,-0.0428272087473931
2008-09-26,-0.0514834707238485
2008-09-29,-0.100862335455926
2008-09-30,0.0497025019311761

From matthieu.stigler at gmail.com  Fri May 14 08:50:25 2010
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Fri, 14 May 2010 08:50:25 +0200
Subject: [R-SIG-Finance] ARMA(1,1)-GARCH(1,1) rolling estimation
In-Reply-To: <AANLkTinzkpKf-PuD1iP78AwamY58LIT1s2XfxwXfOQFl@mail.gmail.com>
References: <AANLkTinzkpKf-PuD1iP78AwamY58LIT1s2XfxwXfOQFl@mail.gmail.com>
Message-ID: <4BECF2B1.1070906@gmail.com>

Should "AA.day.forecast.data" contain the series oh one step ahead 
forecasts? If yes, you need to index it also!

AA.day.forecast.data[i-start+1] <- garch.pred[,1]

Btw, if you are doing it with a loop, you might have a look on package 
foreach, which is likely to make your loop contruction easier, and 
especially can run it easily on parallel cores...

Mat

PS: try when posting to give a code fully reproducible!

mam3xs a ?crit :
> Hi all,
>
> I got the daily stock return data from 2005 - 2008, calculated from HF 
> minute data. (Thanks to Jeff and Josh).
>
> Now, I set 05 - 07yr as the carlibration period for estimating the 
> parameters of ARMA(1,1)-GARCH(1,1) model, aqnd leave 08 for backtesting.
>
> So I use the return data observations from 1:760 (yr 05-07) to 
> estimate the volatility on 2nd-Jan-08 (the position 761),
> then use the return data from 1:761 to estimate the vol on 3rd-Jan-08...
> 1:762...
> 1:763....
> ...
> ...
> and so on...
>
> My codes are as follow:
>
> start=length(AA.day.rn['2005-01::2007-12'])
> end = length(AA.day.rn)
>
> AA.day.forecast.data = array(0, dim=(end-start))
>
> for (i in start:end) {
>
>     garch.fit <- garchFit(formula = ~arma(1,1)+garch(1,1), data = 
> AA.day.rn[1:i])
>     garch.pred <- predict(garch.fit, n.ahead=1)
>     AA.day.forecast.data = garch.pred[,1]
>
> }
>
>
> Following my design, there should be 193 forecast data, however, when 
> I checked the object "AA.day.forecast.data", it gives the whole length 
> of the original data( 953 observations).....
> Also, I am not too sure that after the loop function of garch.fit, 
> will garch.pred catch the right estimation result?
>
> Many thanks.
> Mam
>
> P.S Sample data AA.day.rn is attached with this email.
> ------------------------------------------------------------------------
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From mam3xs at gmail.com  Fri May 14 12:11:21 2010
From: mam3xs at gmail.com (mam3xs)
Date: Fri, 14 May 2010 11:11:21 +0100
Subject: [R-SIG-Finance] ARMA(1,1)-GARCH(1,1) rolling estimation
In-Reply-To: <4BECF2B1.1070906@gmail.com>
References: <AANLkTinzkpKf-PuD1iP78AwamY58LIT1s2XfxwXfOQFl@mail.gmail.com>
	<4BECF2B1.1070906@gmail.com>
Message-ID: <AANLkTikHulGcKVqZFZojgVgj01s9Sf9t3I0rohYfwULv@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100514/d7acc2a3/attachment.pl>

From klein82517 at yahoo.de  Sun May 16 01:10:13 2010
From: klein82517 at yahoo.de (Andreas Klein)
Date: Sat, 15 May 2010 23:10:13 +0000 (GMT)
Subject: [R-SIG-Finance] Robust standard error for a time series mean.
Message-ID: <332387.90035.qm@web24203.mail.ird.yahoo.com>

Hello.

I have a non-stationary time series of returns and I would like to calculate the standard error for the mean of that series.

When I use the White-estimator or assume constant variance I got the same results. When I use the Newey-West-estimator, which also cares about autocorrelation, the standard errors increase a lot.

1. What is the right estimator?
2. Is the Newey West estimator strongly affected by the non-stationarity?


Does anyone have any literature source or a link to a paper or something like that? 


I hope someone can help me.


Thank you in advance.


Sincerely,
Andy.




From klein82517 at yahoo.de  Sun May 16 01:47:51 2010
From: klein82517 at yahoo.de (Andreas Klein)
Date: Sat, 15 May 2010 23:47:51 +0000 (GMT)
Subject: [R-SIG-Finance] Robust standard error for a time series mean.
In-Reply-To: <1990856496.1094756.1273966021491.JavaMail.root@vms229.mailsrvcs.net>
Message-ID: <970090.90553.qm@web24206.mail.ird.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100515/db17b5f5/attachment.pl>

From me at censix.com  Sun May 16 20:19:10 2010
From: me at censix.com (me at censix.com)
Date: Sun, 16 May 2010 20:19:10 +0200 (CEST)
Subject: [R-SIG-Finance] xts - Is there a quick and dirty way to manually
 edit an xts object ?
In-Reply-To: <4BE514E3.6060308@gmail.com>
References: <COL124-W33875A9F3ACD54C38EDD79E5F60@phx.gbl>
	<4BE514E3.6060308@gmail.com>
Message-ID: <38982.78.234.67.201.1274033950.squirrel@censix.com>

Hi to the list. I am looking for a fast way to manually edit an xts object
in R, i.e. by using the de(..) function. See example.

require(xts)
require(quantmod)
getSymbols("YHOO")
is.xts(YHOO) #TRUE

edited<-de(YHOO) # Does not work
edited<-de(as.matrix(YHOO)) # Does work for the values, but the date index
is not editable. Is there a (quick) way to edit the full xts object ?

regards

Soren


From edd at debian.org  Sun May 16 20:36:39 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 16 May 2010 13:36:39 -0500
Subject: [R-SIG-Finance] xts - Is there a quick and dirty way to
 manually edit an xts object ?
In-Reply-To: <38982.78.234.67.201.1274033950.squirrel@censix.com>
References: <COL124-W33875A9F3ACD54C38EDD79E5F60@phx.gbl>
	<4BE514E3.6060308@gmail.com>
	<38982.78.234.67.201.1274033950.squirrel@censix.com>
Message-ID: <19440.15159.238057.724180@ron.nulle.part>


On 16 May 2010 at 20:19, me at censix.com wrote:
| Hi to the list. I am looking for a fast way to manually edit an xts object
| in R, i.e. by using the de(..) function. See example.
| 
| require(xts)
| require(quantmod)
| getSymbols("YHOO")
| is.xts(YHOO) #TRUE
| 
| edited<-de(YHOO) # Does not work
| edited<-de(as.matrix(YHOO)) # Does work for the values, but the date index
| is not editable. Is there a (quick) way to edit the full xts object ?

Tough because 

   R> head(index(YHOO))
   [1] "2007-01-03" "2007-01-04" "2007-01-05" "2007-01-08" "2007-01-09" "2007-01-10"
   R> head(as.numeric(index(YHOO)))
   [1] 13516 13517 13518 13521 13522 13523
   R> 

Dates are integers; intra-daily POSIXct is floats.  Not really stuff you'd
want to edit.  You your problem is that 'what you see is NOT what you got' --
consider the first date which is printed (ie format()'ed) as 2007-01-03 but
stored as 13516.

I think you may want to write a helper function instead:

  decompose an xts in payload and index
  edit either or both
  stick it back together

and iterate til you are happy.

-- 
  Regards, Dirk


From jeff.a.ryan at gmail.com  Sun May 16 22:14:26 2010
From: jeff.a.ryan at gmail.com (jeff.a.ryan at gmail.com)
Date: Sun, 16 May 2010 20:14:26 +0000
Subject: [R-SIG-Finance] xts - Is there a quick and dirty way tomanually
	edit an xts object ?
In-Reply-To: <19440.15159.238057.724180@ron.nulle.part>
References: <COL124-W33875A9F3ACD54C38EDD79E5F60@phx.gbl><4BE514E3.6060308@gmail.com><38982.78.234.67.201.1274033950.squirrel@censix.com><19440.15159.238057.724180@ron.nulle.part>
Message-ID: <1016713662-1274040867-cardhu_decombobulator_blackberry.rim.net-415086758-@bda325.bisx.prod.on.blackberry>

I am not too sure what needs you have in terms of editing, but one last comment to consider.  

To further complicate, the internal index of an xts object is not what you see with "index()". It is actually the numeric, which gets converted into something time based upon extraction and printing. The internals of xts are very much intended with high_performance in mind, so manually manipulating can get you into trouble if you don't watch out. 

str(unclass(x)) would give you a decent idea of the problem. 

Standard accessor method for [<-.xts and index<-.xts should really be all you need. 


HTH,
Jeff
Sent via BlackBerry from T-Mobile

-----Original Message-----
From: Dirk Eddelbuettel <edd at debian.org>
Date: Sun, 16 May 2010 13:36:39 
To: <me at censix.com>
Cc: <r-sig-finance at stat.math.ethz.ch>
Subject: Re: [R-SIG-Finance] xts - Is there a quick and dirty way to
 manually edit an xts object ?


On 16 May 2010 at 20:19, me at censix.com wrote:
| Hi to the list. I am looking for a fast way to manually edit an xts object
| in R, i.e. by using the de(..) function. See example.
| 
| require(xts)
| require(quantmod)
| getSymbols("YHOO")
| is.xts(YHOO) #TRUE
| 
| edited<-de(YHOO) # Does not work
| edited<-de(as.matrix(YHOO)) # Does work for the values, but the date index
| is not editable. Is there a (quick) way to edit the full xts object ?

Tough because 

   R> head(index(YHOO))
   [1] "2007-01-03" "2007-01-04" "2007-01-05" "2007-01-08" "2007-01-09" "2007-01-10"
   R> head(as.numeric(index(YHOO)))
   [1] 13516 13517 13518 13521 13522 13523
   R> 

Dates are integers; intra-daily POSIXct is floats.  Not really stuff you'd
want to edit.  You your problem is that 'what you see is NOT what you got' --
consider the first date which is printed (ie format()'ed) as 2007-01-03 but
stored as 13516.

I think you may want to write a helper function instead:

  decompose an xts in payload and index
  edit either or both
  stick it back together

and iterate til you are happy.

-- 
  Regards, Dirk

_______________________________________________
R-SIG-Finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

From manojsw at gmail.com  Mon May 17 15:46:31 2010
From: manojsw at gmail.com (Manoj)
Date: Mon, 17 May 2010 23:46:31 +1000
Subject: [R-SIG-Finance] R + HDF5 + Pytables
Message-ID: <AANLkTinCnNq0gqB6mRgPbxA8KFjyqrgAOrBXAexDZsX7@mail.gmail.com>

Dear All,
       I have created a HDF5 file using Python + Pytables. The HDF5
file stores tick-data and as such is quite huge in size. I am planning
to use R/zoo/xts combination for analytics. The tricky bit is that I
am unable to find a good wrapper to access/query the HDF5 created by
Pytables (keeping intact all the nice features such as indices etc of
HDF5 file) .  The hdf5 library in R wouldn't help given the size of
the file.

      One (crude) option is to query data using Python/Pytables, write
to an output file and invoke R for analytics. The question is - could
this task be done in a more efficient fashion? Is there a good
HDF5/Pytables wrapper that could help me do the task completely within
R?

     Any tips/suggestions would be greatly appreciated.

Thanks.

Manoj


From daniel.cegielka at gmail.com  Mon May 17 16:51:42 2010
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Mon, 17 May 2010 16:51:42 +0200
Subject: [R-SIG-Finance] R + HDF5 + Pytables
In-Reply-To: <AANLkTinCnNq0gqB6mRgPbxA8KFjyqrgAOrBXAexDZsX7@mail.gmail.com>
References: <AANLkTinCnNq0gqB6mRgPbxA8KFjyqrgAOrBXAexDZsX7@mail.gmail.com>
Message-ID: <AANLkTinZLHlv1sL5RpXcbAkGPY-ibw9d15yM-S9W3WT6@mail.gmail.com>

Hi Monoj
I tested hdf5 with R and in my opinion there is no sense to use it
with xts/zoo for tick data.
If you will work with R, then much better is to store xts objects (or
R objects) directly on the disk (it's simpler, faster and better way).

Check (Jeff Ryan) packages:
RBerkeley: https://r-forge.r-project.org/projects/rberkeley/
indexing: http://r-forge.r-project.org/projects/indexing/

example for RBerkeley:

bdb <- db_create()
db_open(bdb,file='blotter.db')   # load db_file from disc

# and some quary
unserialize(db_get(dbh,key='GOOG'))['2010-02-17::2010-02-25',4])


If you need ultra fast solution, you must try Jeff's indexing package ;)

regards,
daniel




2010/5/17 Manoj <manojsw at gmail.com>
>
> Dear All,
> ? ? ? I have created a HDF5 file using Python + Pytables. The HDF5
> file stores tick-data and as such is quite huge in size. I am planning
> to use R/zoo/xts combination for analytics. The tricky bit is that I
> am unable to find a good wrapper to access/query the HDF5 created by
> Pytables (keeping intact all the nice features such as indices etc of
> HDF5 file) . ?The hdf5 library in R wouldn't help given the size of
> the file.
>
> ? ? ?One (crude) option is to query data using Python/Pytables, write
> to an output file and invoke R for analytics. The question is - could
> this task be done in a more efficient fashion? Is there a good
> HDF5/Pytables wrapper that could help me do the task completely within
> R?
>
> ? ? Any tips/suggestions would be greatly appreciated.
>
> Thanks.
>
> Manoj
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From manojsw at gmail.com  Tue May 18 05:56:06 2010
From: manojsw at gmail.com (Manoj)
Date: Tue, 18 May 2010 13:56:06 +1000
Subject: [R-SIG-Finance] R + HDF5 + Pytables
In-Reply-To: <AANLkTinZLHlv1sL5RpXcbAkGPY-ibw9d15yM-S9W3WT6@mail.gmail.com>
References: <AANLkTinCnNq0gqB6mRgPbxA8KFjyqrgAOrBXAexDZsX7@mail.gmail.com>
	<AANLkTinZLHlv1sL5RpXcbAkGPY-ibw9d15yM-S9W3WT6@mail.gmail.com>
Message-ID: <AANLkTilnnBWjpJ4Yhyf1k-1hcDV0RTC98erYExFnfk-Q@mail.gmail.com>

Daniel - that's interesting feedback.

Jeff: I did a quick search on indexing packages and it seems its still
in development stages - looks very promising thou. I am more than
happy to test it out and give feedback/suggestions.

Hopefully we could do a comparision/benchmarking of few different
alternatives (including commercial tools like kdb).

Manoj

2010/5/18 Daniel Cegie?ka <daniel.cegielka at gmail.com>:
> Hi Monoj
> I tested hdf5 with R and in my opinion there is no sense to use it
> with xts/zoo for tick data.
> If you will work with R, then much better is to store xts objects (or
> R objects) directly on the disk (it's simpler, faster and better way).
>
> Check (Jeff Ryan) packages:
> RBerkeley: https://r-forge.r-project.org/projects/rberkeley/
> indexing: http://r-forge.r-project.org/projects/indexing/
>
> example for RBerkeley:
>
> bdb <- db_create()
> db_open(bdb,file='blotter.db') ? # load db_file from disc
>
> # and some quary
> unserialize(db_get(dbh,key='GOOG'))['2010-02-17::2010-02-25',4])
>
>
> If you need ultra fast solution, you must try Jeff's indexing package ;)
>
> regards,
> daniel
>
>
>
>
> 2010/5/17 Manoj <manojsw at gmail.com>
>>
>> Dear All,
>> ? ? ? I have created a HDF5 file using Python + Pytables. The HDF5
>> file stores tick-data and as such is quite huge in size. I am planning
>> to use R/zoo/xts combination for analytics. The tricky bit is that I
>> am unable to find a good wrapper to access/query the HDF5 created by
>> Pytables (keeping intact all the nice features such as indices etc of
>> HDF5 file) . ?The hdf5 library in R wouldn't help given the size of
>> the file.
>>
>> ? ? ?One (crude) option is to query data using Python/Pytables, write
>> to an output file and invoke R for analytics. The question is - could
>> this task be done in a more efficient fashion? Is there a good
>> HDF5/Pytables wrapper that could help me do the task completely within
>> R?
>>
>> ? ? Any tips/suggestions would be greatly appreciated.
>>
>> Thanks.
>>
>> Manoj
>>
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>


From daniel.cegielka at gmail.com  Tue May 18 16:23:36 2010
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Tue, 18 May 2010 16:23:36 +0200
Subject: [R-SIG-Finance] R + HDF5 + Pytables
In-Reply-To: <AANLkTilnnBWjpJ4Yhyf1k-1hcDV0RTC98erYExFnfk-Q@mail.gmail.com>
References: <AANLkTinCnNq0gqB6mRgPbxA8KFjyqrgAOrBXAexDZsX7@mail.gmail.com> 
	<AANLkTinZLHlv1sL5RpXcbAkGPY-ibw9d15yM-S9W3WT6@mail.gmail.com> 
	<AANLkTilnnBWjpJ4Yhyf1k-1hcDV0RTC98erYExFnfk-Q@mail.gmail.com>
Message-ID: <AANLkTikxuiULNqtyy243jUKkR0gPUscGWkiT6hLzWEGa@mail.gmail.com>

Manoj, this is not a financial subject  - you should send this to
r-sig-hpc list.

> Hopefully we could do a comparision/benchmarking of few different
> alternatives (including commercial tools like kdb).

Now indexing is still under development, but ability to work with high
performance with TB of tick data it was one of primary design goal of
indexing package. Inside xts code you can find nice optimized C code
for low latency and high performance. And when you join xts with
indexing package you can compare it even with kdb... (next point - you
can use indexing as a shared memory for many R instances).

Indexing will work nice event with many TB of tick data and you don't
have latency from TCP stack (kdb).

It need(?) only some nice compression solution...

regards,
daniel


W dniu 18 maja 2010 05:56 u?ytkownik Manoj <manojsw at gmail.com> napisa?:
> Daniel - that's interesting feedback.
>
> Jeff: I did a quick search on indexing packages and it seems its still
> in development stages - looks very promising thou. I am more than
> happy to test it out and give feedback/suggestions.
>
> Hopefully we could do a comparision/benchmarking of few different
> alternatives (including commercial tools like kdb).
>
> Manoj
>
> 2010/5/18 Daniel Cegie?ka <daniel.cegielka at gmail.com>:
>> Hi Monoj
>> I tested hdf5 with R and in my opinion there is no sense to use it
>> with xts/zoo for tick data.
>> If you will work with R, then much better is to store xts objects (or
>> R objects) directly on the disk (it's simpler, faster and better way).
>>
>> Check (Jeff Ryan) packages:
>> RBerkeley: https://r-forge.r-project.org/projects/rberkeley/
>> indexing: http://r-forge.r-project.org/projects/indexing/
>>
>> example for RBerkeley:
>>
>> bdb <- db_create()
>> db_open(bdb,file='blotter.db') ? # load db_file from disc
>>
>> # and some quary
>> unserialize(db_get(dbh,key='GOOG'))['2010-02-17::2010-02-25',4])
>>
>>
>> If you need ultra fast solution, you must try Jeff's indexing package ;)
>>
>> regards,
>> daniel
>>
>>
>>
>>
>> 2010/5/17 Manoj <manojsw at gmail.com>
>>>
>>> Dear All,
>>> ? ? ? I have created a HDF5 file using Python + Pytables. The HDF5
>>> file stores tick-data and as such is quite huge in size. I am planning
>>> to use R/zoo/xts combination for analytics. The tricky bit is that I
>>> am unable to find a good wrapper to access/query the HDF5 created by
>>> Pytables (keeping intact all the nice features such as indices etc of
>>> HDF5 file) . ?The hdf5 library in R wouldn't help given the size of
>>> the file.
>>>
>>> ? ? ?One (crude) option is to query data using Python/Pytables, write
>>> to an output file and invoke R for analytics. The question is - could
>>> this task be done in a more efficient fashion? Is there a good
>>> HDF5/Pytables wrapper that could help me do the task completely within
>>> R?
>>>
>>> ? ? Any tips/suggestions would be greatly appreciated.
>>>
>>> Thanks.
>>>
>>> Manoj
>>>
>>> _______________________________________________
>>> R-SIG-Finance at stat.math.ethz.ch mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>
>


From jeff.a.ryan at gmail.com  Tue May 18 18:04:41 2010
From: jeff.a.ryan at gmail.com (jeff.a.ryan at gmail.com)
Date: Tue, 18 May 2010 16:04:41 +0000
Subject: [R-SIG-Finance] R + HDF5 + Pytables
In-Reply-To: <AANLkTikxuiULNqtyy243jUKkR0gPUscGWkiT6hLzWEGa@mail.gmail.com>
References: <AANLkTinCnNq0gqB6mRgPbxA8KFjyqrgAOrBXAexDZsX7@mail.gmail.com>
	<AANLkTinZLHlv1sL5RpXcbAkGPY-ibw9d15yM-S9W3WT6@mail.gmail.com>
	<AANLkTilnnBWjpJ4Yhyf1k-1hcDV0RTC98erYExFnfk-Q@mail.gmail.com><AANLkTikxuiULNqtyy243jUKkR0gPUscGWkiT6hLzWEGa@mail.gmail.com>
Message-ID: <1535314764-1274198683-cardhu_decombobulator_blackberry.rim.net-864149837-@bda325.bisx.prod.on.blackberry>

Yes, indexing is my answer to an out-of-core data solution. 

It is essentially a data.frame on disk, where OS level mmap is used to manage the process efficiently and transparently. 

It is under very active development and really is quite far from "stable", though it is functional and being used internally on data that is fairly large.

The parts that make it fast are the facts that is column oriented (like data.frames) and that traditional indexing tools are available by default. Currently sorted indexing is implemented, but bitmap variants are in the works, as well as compression tools for bitmaps. The LZO algorithm is part of the development as well as more high performance variants related to some advanced compression schemes that allow for relational algebra on the compressed bitmaps. 

As Daniel stated though this isn't really 'finance' per se, so I'll stop here. 

When the progress is further along, I will make announcements to the list(s). I am also presenting this at useR in DC this summer. 

Benchmarks against the Kdb's of the world would indeed be fun. I don't think they allow that... I wonder why? ;-)

Jeff
Sent via BlackBerry from T-Mobile

-----Original Message-----
From: Daniel Cegie?ka <daniel.cegielka at gmail.com>
Date: Tue, 18 May 2010 16:23:36 
To: Manoj<manojsw at gmail.com>
Cc: <r-sig-finance at stat.math.ethz.ch>
Subject: Re: [R-SIG-Finance] R + HDF5 + Pytables

Manoj, this is not a financial subject  - you should send this to
r-sig-hpc list.

> Hopefully we could do a comparision/benchmarking of few different
> alternatives (including commercial tools like kdb).

Now indexing is still under development, but ability to work with high
performance with TB of tick data it was one of primary design goal of
indexing package. Inside xts code you can find nice optimized C code
for low latency and high performance. And when you join xts with
indexing package you can compare it even with kdb... (next point - you
can use indexing as a shared memory for many R instances).

Indexing will work nice event with many TB of tick data and you don't
have latency from TCP stack (kdb).

It need(?) only some nice compression solution...

regards,
daniel


W dniu 18 maja 2010 05:56 u?ytkownik Manoj <manojsw at gmail.com> napisa?:
> Daniel - that's interesting feedback.
>
> Jeff: I did a quick search on indexing packages and it seems its still
> in development stages - looks very promising thou. I am more than
> happy to test it out and give feedback/suggestions.
>
> Hopefully we could do a comparision/benchmarking of few different
> alternatives (including commercial tools like kdb).
>
> Manoj
>
> 2010/5/18 Daniel Cegie?ka <daniel.cegielka at gmail.com>:
>> Hi Monoj
>> I tested hdf5 with R and in my opinion there is no sense to use it
>> with xts/zoo for tick data.
>> If you will work with R, then much better is to store xts objects (or
>> R objects) directly on the disk (it's simpler, faster and better way).
>>
>> Check (Jeff Ryan) packages:
>> RBerkeley: https://r-forge.r-project.org/projects/rberkeley/
>> indexing: http://r-forge.r-project.org/projects/indexing/
>>
>> example for RBerkeley:
>>
>> bdb <- db_create()
>> db_open(bdb,file='blotter.db') ? # load db_file from disc
>>
>> # and some quary
>> unserialize(db_get(dbh,key='GOOG'))['2010-02-17::2010-02-25',4])
>>
>>
>> If you need ultra fast solution, you must try Jeff's indexing package ;)
>>
>> regards,
>> daniel
>>
>>
>>
>>
>> 2010/5/17 Manoj <manojsw at gmail.com>
>>>
>>> Dear All,
>>> ? ? ? I have created a HDF5 file using Python + Pytables. The HDF5
>>> file stores tick-data and as such is quite huge in size. I am planning
>>> to use R/zoo/xts combination for analytics. The tricky bit is that I
>>> am unable to find a good wrapper to access/query the HDF5 created by
>>> Pytables (keeping intact all the nice features such as indices etc of
>>> HDF5 file) . ?The hdf5 library in R wouldn't help given the size of
>>> the file.
>>>
>>> ? ? ?One (crude) option is to query data using Python/Pytables, write
>>> to an output file and invoke R for analytics. The question is - could
>>> this task be done in a more efficient fashion? Is there a good
>>> HDF5/Pytables wrapper that could help me do the task completely within
>>> R?
>>>
>>> ? ? Any tips/suggestions would be greatly appreciated.
>>>
>>> Thanks.
>>>
>>> Manoj
>>>
>>> _______________________________________________
>>> R-SIG-Finance at stat.math.ethz.ch mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>
>

_______________________________________________
R-SIG-Finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

From gps at asu.edu  Thu May 20 18:26:02 2010
From: gps at asu.edu (Geoffrey Smith)
Date: Thu, 20 May 2010 09:26:02 -0700
Subject: [R-SIG-Finance] tick data sources
Message-ID: <AANLkTimu2O9gVsoxbzZu-jxkbMmQfbAnHeL7shwI8zxI@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100520/b4c3d278/attachment.pl>

From daniel.cegielka at gmail.com  Thu May 20 18:53:50 2010
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Thu, 20 May 2010 18:53:50 +0200
Subject: [R-SIG-Finance] tick data sources
In-Reply-To: <AANLkTimu2O9gVsoxbzZu-jxkbMmQfbAnHeL7shwI8zxI@mail.gmail.com>
References: <AANLkTimu2O9gVsoxbzZu-jxkbMmQfbAnHeL7shwI8zxI@mail.gmail.com>
Message-ID: <AANLkTikG0v6QpHxP4P0UgsVT8p0woA-rVxwqFQ-F7U3J@mail.gmail.com>

http://blog.fosstrading.com/2009/11/opentick-alternatives.html


With IBrokers and XTS package you are able to capture market data
(tick: last trade, bid, ask...) from TWS and store it on disk with
RBerkeley (or indexing packages).

http://code.google.com/p/ibrokers/
http://r-forge.r-project.org/projects/xts/

storage:
https://r-forge.r-project.org/projects/rberkeley/
https://r-forge.r-project.org/projects/indexing/

regards,
daniel


2010/5/20 Geoffrey Smith <gps at asu.edu>:
> Hello, is anybody aware of a cheaper alternative to Bloomberg and the
> RBloomberg package to get tick data via R? ?Thank you very much. ?Geoff
>
> --
> Geoffrey Smith
> Visiting Assistant Professor
> Department of Finance
> W. P. Carey School of Business
> Arizona State University
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From jeff.hamann at moneytree.com  Thu May 20 20:18:26 2010
From: jeff.hamann at moneytree.com (Jeff Hamann)
Date: Thu, 20 May 2010 11:18:26 -0700
Subject: [R-SIG-Finance] hourly historical prices?
Message-ID: <412F8196-10B3-43CB-B7B7-59E8531CF11B@moneytree.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100520/41363bca/attachment.pl>

From herrold at owlriver.com  Thu May 20 21:35:36 2010
From: herrold at owlriver.com (R P Herrold)
Date: Thu, 20 May 2010 15:35:36 -0400 (EDT)
Subject: [R-SIG-Finance] hourly historical prices?
In-Reply-To: <412F8196-10B3-43CB-B7B7-59E8531CF11B@moneytree.com>
References: <412F8196-10B3-43CB-B7B7-59E8531CF11B@moneytree.com>
Message-ID: <alpine.LRH.2.00.1005201534220.8061@arj.bjyevire.pbz>

On Thu, 20 May 2010, Jeff Hamann wrote:

> I'm trying to test some a simple concepts and need sub-day 
> historical prices (hourly?) for the previous 12 months for a 
> set of ETFs.
>
> I've been searching the web and can't really find anything, 
> so I thought I would ask here.
>
> Is there such a thing?

Depends on the ETF's availble history, but yes, such exist. 
Please mention a couple EFT names in which you are interested, 
and I'll rummage about

-- Russ herrold


From herrold at owlriver.com  Fri May 21 02:14:36 2010
From: herrold at owlriver.com (R P Herrold)
Date: Thu, 20 May 2010 20:14:36 -0400 (EDT)
Subject: [R-SIG-Finance] tick data sources
In-Reply-To: <AANLkTimu2O9gVsoxbzZu-jxkbMmQfbAnHeL7shwI8zxI@mail.gmail.com>
References: <AANLkTimu2O9gVsoxbzZu-jxkbMmQfbAnHeL7shwI8zxI@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.1005202012450.12676@arj.bjyevire.pbz>

On Thu, 20 May 2010, Geoffrey Smith wrote:

> Hello, is anybody aware of a cheaper alternative to Bloomberg and the
> RBloomberg package to get tick data via R?  Thank you very much.  Geoff

Within R, IBrokers comes to mind; casting a wider net, the 
trading-shim can pull 100 symbols in tandem; each through 
Interactive Brokers, which has a special procram for academic 
users
 	http://www.trading-shim.org/

-- Russ herrold


From matthieu.stigler at gmail.com  Tue May 25 15:11:12 2010
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Tue, 25 May 2010 15:11:12 +0200
Subject: [R-SIG-Finance] can I 'attach' a zoo object?
Message-ID: <4BFBCC70.6040201@gmail.com>

Hi

When importing a big data frame, I like to "attach" its variables so 
they are direclty available. I don't see how to do this with zoo... Does 
anyone has an idea how I could do that?

Take a zoo object:

library(zoo)

zooframe<-matrix(runif(3*26), nrow=3, dimnames=list(letters[1:3], paste("var", letters, sep="")))

zoo1 <-zoo(zooframe, order.by=as.Date("2003-02-01") + c(1, 

3, 7))


Can I 'attach' it, so its variables become accessible to user workspace?

attach(zoo1)

#does not work...

Thanks!


From brian at braverock.com  Tue May 25 15:19:09 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 25 May 2010 08:19:09 -0500
Subject: [R-SIG-Finance] can I 'attach' a zoo object?
In-Reply-To: <4BFBCC70.6040201@gmail.com>
References: <4BFBCC70.6040201@gmail.com>
Message-ID: <4BFBCE4D.6050606@braverock.com>

Mat,

zoo/xts are not data frames.  For zoo/xts, the underlying storage object is a 
matrix, so you can certainly access columns using the $ operator, but unlike a 
data frame, it is not actually stored internally as separate objects per column.

For big time series data in zoo/xts, take a look at the 'indexing' package if 
you are really likely to access primarily by columns.

Regards,

    - Brian

On 05/25/2010 08:11 AM, Matthieu Stigler wrote:
> Hi
>
> When importing a big data frame, I like to "attach" its variables so
> they are direclty available. I don't see how to do this with zoo... Does
> anyone has an idea how I could do that?
>
> Take a zoo object:
>
> library(zoo)
>
> zooframe<-matrix(runif(3*26), nrow=3, dimnames=list(letters[1:3],
> paste("var", letters, sep="")))
>
> zoo1 <-zoo(zooframe, order.by=as.Date("2003-02-01") + c(1,
> 3, 7))
>
>
> Can I 'attach' it, so its variables become accessible to user workspace?
>
> attach(zoo1)
>
> #does not work...
>
> Thanks!
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From ggrothendieck at gmail.com  Tue May 25 15:19:45 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Tue, 25 May 2010 09:19:45 -0400
Subject: [R-SIG-Finance] can I 'attach' a zoo object?
In-Reply-To: <4BFBCC70.6040201@gmail.com>
References: <4BFBCC70.6040201@gmail.com>
Message-ID: <AANLkTikP4YRhFgb9GhsqYXgV_g8lBHphI4DMllPeB9QU@mail.gmail.com>

Try this:

   attach(as.list(zoo1))

Also this works:

   with(zoo1, sum(vara + varb))



On Tue, May 25, 2010 at 9:11 AM, Matthieu Stigler
<matthieu.stigler at gmail.com> wrote:
> Hi
>
> When importing a big data frame, I like to "attach" its variables so they
> are direclty available. I don't see how to do this with zoo... Does anyone
> has an idea how I could do that?
>
> Take a zoo object:
>
> library(zoo)
>
> zooframe<-matrix(runif(3*26), nrow=3, dimnames=list(letters[1:3],
> paste("var", letters, sep="")))
>
> zoo1 <-zoo(zooframe, order.by=as.Date("2003-02-01") + c(1,
> 3, 7))
>
>
> Can I 'attach' it, so its variables become accessible to user workspace?
>
> attach(zoo1)
>
> #does not work...
>
> Thanks!
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>


From Achim.Zeileis at uibk.ac.at  Tue May 25 15:23:15 2010
From: Achim.Zeileis at uibk.ac.at (Achim Zeileis)
Date: Tue, 25 May 2010 15:23:15 +0200 (CEST)
Subject: [R-SIG-Finance] can I 'attach' a zoo object?
In-Reply-To: <4BFBCC70.6040201@gmail.com>
References: <4BFBCC70.6040201@gmail.com>
Message-ID: <alpine.DEB.2.00.1005251519300.14565@paninaro.uibk.ac.at>

On Tue, 25 May 2010, Matthieu Stigler wrote:

> Hi
>
> When importing a big data frame, I like to "attach" its variables so 
> they are direclty available. I don't see how to do this with zoo... Does 
> anyone has an idea how I could do that?

It can't be done directly as attach() is non-generic and will tell you

R> attach(zoo1)
Error in attach(zoo1) :
   'attach' only works for lists, data frames and environments

You can do two things: (1) Use with() which I personally typically prefer 
over attach()/detach() anyway. (2) Create a data.frame where every column 
is a zoo series and attach that.

R> with(zoo1, vara + varb)
2003-02-02 2003-02-04 2003-02-08
  0.8189917  1.1104191  0.8113533

Or:

R> zoo2 <- merge(zoo1, retclass = "data.frame")
R> names(zoo2) <- colnames(zoo1)
R> attach(zoo2)
R> vara + varb
2003-02-02 2003-02-04 2003-02-08
  0.8189917  1.1104191  0.8113533

hth,
Z

> Take a zoo object:
>
> library(zoo)
>
> zooframe<-matrix(runif(3*26), nrow=3, dimnames=list(letters[1:3], 
> paste("var", letters, sep="")))
>
> zoo1 <-zoo(zooframe, order.by=as.Date("2003-02-01") + c(1, 
> 3, 7))
>
>
> Can I 'attach' it, so its variables become accessible to user workspace?
>
> attach(zoo1)
>
> #does not work...
>
> Thanks!
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions 
> should go.
>


From matthieu.stigler at gmail.com  Tue May 25 15:28:42 2010
From: matthieu.stigler at gmail.com (Matthieu Stigler)
Date: Tue, 25 May 2010 15:28:42 +0200
Subject: [R-SIG-Finance] can I 'attach' a zoo object?
In-Reply-To: <alpine.DEB.2.00.1005251519300.14565@paninaro.uibk.ac.at>
References: <4BFBCC70.6040201@gmail.com>
	<alpine.DEB.2.00.1005251519300.14565@paninaro.uibk.ac.at>
Message-ID: <4BFBD08A.1040509@gmail.com>

Thanks to all of you for your prompt answer!

attach(as.list(zoo1))

is the solution that best fit my needs!

Thanks!

Matthieu


Achim Zeileis a ?crit :
> On Tue, 25 May 2010, Matthieu Stigler wrote:
>
>> Hi
>>
>> When importing a big data frame, I like to "attach" its variables so 
>> they are direclty available. I don't see how to do this with zoo... 
>> Does anyone has an idea how I could do that?
>
> It can't be done directly as attach() is non-generic and will tell you
>
> R> attach(zoo1)
> Error in attach(zoo1) :
>   'attach' only works for lists, data frames and environments
>
> You can do two things: (1) Use with() which I personally typically 
> prefer over attach()/detach() anyway. (2) Create a data.frame where 
> every column is a zoo series and attach that.
>
> R> with(zoo1, vara + varb)
> 2003-02-02 2003-02-04 2003-02-08
>  0.8189917  1.1104191  0.8113533
>
> Or:
>
> R> zoo2 <- merge(zoo1, retclass = "data.frame")
> R> names(zoo2) <- colnames(zoo1)
> R> attach(zoo2)
> R> vara + varb
> 2003-02-02 2003-02-04 2003-02-08
>  0.8189917  1.1104191  0.8113533
>
> hth,
> Z
>
>> Take a zoo object:
>>
>> library(zoo)
>>
>> zooframe<-matrix(runif(3*26), nrow=3, dimnames=list(letters[1:3], 
>> paste("var", letters, sep="")))
>>
>> zoo1 <-zoo(zooframe, order.by=as.Date("2003-02-01") + c(1, 3, 7))
>>
>>
>> Can I 'attach' it, so its variables become accessible to user workspace?
>>
>> attach(zoo1)
>>
>> #does not work...
>>
>> Thanks!
>>
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R 
>> questions should go.
>>


From ajayshah at mayin.org  Tue May 25 16:05:07 2010
From: ajayshah at mayin.org (Ajay Shah)
Date: Tue, 25 May 2010 19:35:07 +0530
Subject: [R-SIG-Finance] can I 'attach' a zoo object?
In-Reply-To: <4BFBD08A.1040509@gmail.com>
References: <4BFBCC70.6040201@gmail.com>
	<alpine.DEB.2.00.1005251519300.14565@paninaro.uibk.ac.at>
	<4BFBD08A.1040509@gmail.com>
Message-ID: <20100525140507.GG1575@ajay-shahs-macbook-pro.local>

On Tue, May 25, 2010 at 03:28:42PM +0200, Matthieu Stigler wrote:
> Thanks to all of you for your prompt answer!
>
> attach(as.list(zoo1))
>
> is the solution that best fit my needs!

You do realise that it's quite costly, so for large objects you have
to think carefully about this. Unlike with data frames where attach()
is free.

If I try:

  library(zoo)
  z <- zoo(matrix(runif(1000000), ncol=100), order.by=1:10000)
  d <- as.data.frame(z)
  system.time(attach(d))
  system.time(attach(as.list(z)))

I get:

> system.time(attach(d))
   user  system elapsed 
  0.016   0.007   0.025 
> system.time(attach(as.list(z)))
   user  system elapsed 
  0.572   0.280   0.979 

So it's syntactic sugar but basically you are doing costly casting
when you might think you are merely attaching.

-- 
Ajay Shah                                      http://www.mayin.org/ajayshah  
ajayshah at mayin.org                             http://ajayshahblog.blogspot.com
<*(:-? - wizard who doesn't know the answer.


From ggrothendieck at gmail.com  Tue May 25 17:05:15 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Tue, 25 May 2010 11:05:15 -0400
Subject: [R-SIG-Finance] can I 'attach' a zoo object?
In-Reply-To: <20100525140507.GG1575@ajay-shahs-macbook-pro.local>
References: <4BFBCC70.6040201@gmail.com>
	<alpine.DEB.2.00.1005251519300.14565@paninaro.uibk.ac.at> 
	<4BFBD08A.1040509@gmail.com>
	<20100525140507.GG1575@ajay-shahs-macbook-pro.local>
Message-ID: <AANLkTikdujolwN7u_57PI3lp3buY16lSQZE7w7xx4mi0@mail.gmail.com>

The majority of the time is taken by as.list.zoo, not by attach
itself.  At any rate, normally the fact that it takes an entire second
to do this for a large object is not important since we only attach it
once in the session anyways.  The time to access the data itself is
not impacted and that is normally the important part.

On Tue, May 25, 2010 at 10:05 AM, Ajay Shah <ajayshah at mayin.org> wrote:
> On Tue, May 25, 2010 at 03:28:42PM +0200, Matthieu Stigler wrote:
>> Thanks to all of you for your prompt answer!
>>
>> attach(as.list(zoo1))
>>
>> is the solution that best fit my needs!
>
> You do realise that it's quite costly, so for large objects you have
> to think carefully about this. Unlike with data frames where attach()
> is free.
>
> If I try:
>
> ?library(zoo)
> ?z <- zoo(matrix(runif(1000000), ncol=100), order.by=1:10000)
> ?d <- as.data.frame(z)
> ?system.time(attach(d))
> ?system.time(attach(as.list(z)))
>
> I get:
>
>> system.time(attach(d))
> ? user ?system elapsed
> ?0.016 ? 0.007 ? 0.025
>> system.time(attach(as.list(z)))
> ? user ?system elapsed
> ?0.572 ? 0.280 ? 0.979
>
> So it's syntactic sugar but basically you are doing costly casting
> when you might think you are merely attaching.
>
> --
> Ajay Shah ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?http://www.mayin.org/ajayshah
> ajayshah at mayin.org ? ? ? ? ? ? ? ? ? ? ? ? ? ? http://ajayshahblog.blogspot.com
> <*(:-? - wizard who doesn't know the answer.
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From ajayshah at mayin.org  Tue May 25 17:12:19 2010
From: ajayshah at mayin.org (Ajay Shah)
Date: Tue, 25 May 2010 20:42:19 +0530
Subject: [R-SIG-Finance] can I 'attach' a zoo object?
In-Reply-To: <AANLkTikdujolwN7u_57PI3lp3buY16lSQZE7w7xx4mi0@mail.gmail.com>
References: <4BFBCC70.6040201@gmail.com>
	<alpine.DEB.2.00.1005251519300.14565@paninaro.uibk.ac.at>
	<4BFBD08A.1040509@gmail.com>
	<20100525140507.GG1575@ajay-shahs-macbook-pro.local>
	<AANLkTikdujolwN7u_57PI3lp3buY16lSQZE7w7xx4mi0@mail.gmail.com>
Message-ID: <20100525151219.GM1575@ajay-shahs-macbook-pro.local>

On Tue, May 25, 2010 at 11:05:15AM -0400, Gabor Grothendieck wrote:
> The majority of the time is taken by as.list.zoo, not by attach
> itself.  

I agree. I just wanted to say that with data frames, attach() is
free. With a zoo object, we're paying the cost of casting. So even
though the syntax is seductive and elegant, at an underlying level
there is a fundamental difference. (This happens often with R, it's
not unique to this situation).

-- 
Ajay Shah                                      http://www.mayin.org/ajayshah  
ajayshah at mayin.org                             http://ajayshahblog.blogspot.com
<*(:-? - wizard who doesn't know the answer.


From jeff.a.ryan at gmail.com  Tue May 25 17:42:15 2010
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Tue, 25 May 2010 10:42:15 -0500
Subject: [R-SIG-Finance] can I 'attach' a zoo object?
In-Reply-To: <20100525151219.GM1575@ajay-shahs-macbook-pro.local>
References: <4BFBCC70.6040201@gmail.com>
	<alpine.DEB.2.00.1005251519300.14565@paninaro.uibk.ac.at>
	<4BFBD08A.1040509@gmail.com>
	<20100525140507.GG1575@ajay-shahs-macbook-pro.local>
	<AANLkTikdujolwN7u_57PI3lp3buY16lSQZE7w7xx4mi0@mail.gmail.com>
	<20100525151219.GM1575@ajay-shahs-macbook-pro.local>
Message-ID: <AANLkTinpFJRJ6LKuhxkmAOrEQSV6nSYuUESCtSmCpd4o@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100525/275bb784/attachment.pl>

From balakrishnan.ilango at thomsonreuters.com  Wed May 26 13:12:59 2010
From: balakrishnan.ilango at thomsonreuters.com (balakrishnan.ilango at thomsonreuters.com)
Date: Wed, 26 May 2010 16:42:59 +0530
Subject: [R-SIG-Finance] ta-lib & quantlib libraries for R
Message-ID: <2682D00D80F6894C87D147059DABB18703655309@TFINKABANMBX09.ERF.THOMSON.COM>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100526/2537170f/attachment.pl>

From jeff.a.ryan at gmail.com  Wed May 26 13:17:24 2010
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Wed, 26 May 2010 06:17:24 -0500
Subject: [R-SIG-Finance] ta-lib & quantlib libraries for R
In-Reply-To: <2682D00D80F6894C87D147059DABB18703655309@TFINKABANMBX09.ERF.THOMSON.COM>
References: <2682D00D80F6894C87D147059DABB18703655309@TFINKABANMBX09.ERF.THOMSON.COM>
Message-ID: <AANLkTilyi4ldFEgyUtnUWAMDv_d8a127TilXouFhF-TY@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100526/4ac5835d/attachment.pl>

From samuel.le at srlglobal.com  Wed May 26 13:14:12 2010
From: samuel.le at srlglobal.com (Samuel Le)
Date: Wed, 26 May 2010 12:14:12 +0100
Subject: [R-SIG-Finance] ta-lib & quantlib libraries for R
In-Reply-To: <2682D00D80F6894C87D147059DABB18703655309@TFINKABANMBX09.ERF.THOMSON.COM>
References: <2682D00D80F6894C87D147059DABB18703655309@TFINKABANMBX09.ERF.THOMSON.COM>
Message-ID: <4BFD0284.3090403@srlglobal.com>

Here is Quantlib for R:
http://cran.r-project.org/web/packages/RQuantLib/index.html

thanks,

Samuel

balakrishnan.ilango at thomsonreuters.com wrote:
> Hi,
>  
> I have been searching for ta-lib and quantlib libraries for R. I
> couldn't find it. Can you help me with the source?
>  
>  
>  
> Thanks,
>  
>
> Balakrishnan Ilango 
>
> Sales Manager - Investment & Advisory
>
> South Asia
>
>  
>
> Thomson Reuters
>
> 4th Floor, Nicholas Piramal Tower 'B' Wing
>
> Peninsula Corporate Park
>
> Ganpatrao Kadam Marg, Lower Parel
>
> Mumbai - 400001, India
>
> Tel: +91 22 6636 7328
>
> Mobile: +91 90046 51997
>
> Email: balakrishnan.ilango at thomsonreuters.com
> <mailto:balakrishnan.ilango at thomsonreuters.com> 
>
> web: www.thomsonreuters.com <http://www.thomsonreuters.com/> 
>
>  
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus signature database 5146 (20100526) __________
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
>
>   



__________ Information from ESET NOD32 Antivirus, version of virus signature database 5146 (20100526) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From edd at debian.org  Wed May 26 13:35:53 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 26 May 2010 06:35:53 -0500
Subject: [R-SIG-Finance] ta-lib & quantlib libraries for R
In-Reply-To: <AANLkTilyi4ldFEgyUtnUWAMDv_d8a127TilXouFhF-TY@mail.gmail.com>
References: <2682D00D80F6894C87D147059DABB18703655309@TFINKABANMBX09.ERF.THOMSON.COM>
	<AANLkTilyi4ldFEgyUtnUWAMDv_d8a127TilXouFhF-TY@mail.gmail.com>
Message-ID: <19453.1945.796372.739934@ron.nulle.part>


On 26 May 2010 at 06:17, Jeff Ryan wrote:
| There is no ta-lib in R, but there is a great TA package called TTR:

And I'd argue that TA-lib with its fixed-width array is a poor match anyway.
 
| http://cran.r-project.org/web/packages/TTR/index.html
| 
| And quantlib is indeed wrapped for R, or at least parts of:
| 
| http://dirk.eddelbuettel.com/code/rquantlib.html
| http://cran.r-project.org/web/packages/RQuantLib/index.html

Yup. Thanks for the links!

There is also a 'experimental' export of all of QuantLib to R using Swig, but
it isn't to the best of my knowledge all that actively maintained (Hi, Joe!). 
It is also unwieldy as it exports all hidden and visible symbols -- last time
I tried there were more than 15,000 in the package namespave.

And if the OP couldn't find the answer to his initial questions, I suppose he
doesn't have the Google Juice (TM pending) to get that going either.  But
just in case, a somewhat recent thread is at

	http://thread.gmane.org/gmane.comp.finance.quantlib.user/6544

It would be nice if someone gave Joe a hand with this, but it requires strong
C++ and S4 and Swig/Python skills which is not exactly common.

Dirk
 
| HTH
| Jeff
| 
| 
| 
| On Wed, May 26, 2010 at 6:12 AM, <balakrishnan.ilango at thomsonreuters.com>wrote:
| 
| > Hi,
| >
| > I have been searching for ta-lib and quantlib libraries for R. I
| > couldn't find it. Can you help me with the source?
| >
| >
| >
| > Thanks,
| >
| >
| > Balakrishnan Ilango
| >
| > Sales Manager - Investment & Advisory
| >
| > South Asia
| >
| >
| >
| > Thomson Reuters
| >
| > 4th Floor, Nicholas Piramal Tower 'B' Wing
| >
| > Peninsula Corporate Park
| >
| > Ganpatrao Kadam Marg, Lower Parel
| >
| > Mumbai - 400001, India
| >
| > Tel: +91 22 6636 7328
| >
| > Mobile: +91 90046 51997
| >
| > Email: balakrishnan.ilango at thomsonreuters.com
| > <mailto:balakrishnan.ilango at thomsonreuters.com>
| >
| > web: www.thomsonreuters.com <http://www.thomsonreuters.com/>
| >
| >
| >
| >        [[alternative HTML version deleted]]
| >
| > _______________________________________________
| > R-SIG-Finance at stat.math.ethz.ch mailing list
| > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
| > -- Subscriber-posting only. If you want to post, subscribe first.
| > -- Also note that this is not the r-help list where general R questions
| > should go.
| >
| 
| 
| 
| -- 
| Jeffrey Ryan
| jeffrey.ryan at insightalgo.com
| 
| ia: insight algorithmics
| www.insightalgo.com
| 
| 	[[alternative HTML version deleted]]
| 
| _______________________________________________
| R-SIG-Finance at stat.math.ethz.ch mailing list
| https://stat.ethz.ch/mailman/listinfo/r-sig-finance
| -- Subscriber-posting only. If you want to post, subscribe first.
| -- Also note that this is not the r-help list where general R questions should go.

-- 
  Regards, Dirk


From jorge.nieves at moorecap.com  Wed May 26 16:02:19 2010
From: jorge.nieves at moorecap.com (Jorge Nieves)
Date: Wed, 26 May 2010 10:02:19 -0400
Subject: [R-SIG-Finance] ta-lib & quantlib libraries for R
In-Reply-To: <19453.1945.796372.739934@ron.nulle.part>
Message-ID: <D595C0E05185614C90515F1E8A2D4CBF060B48DE@NYC-XCH3.win.moorecap.com>

 
On this same topic, I just took a look at the list of functions from the
quantlib library compiled within R, and I do not see the functions
related to inflation related securities. Inflation functionality is
already available in the quantlib
http://quantlib.sourcearchive.com/documentation/0.9.9/annotated.html

I am working in a project that requires the inflation functions at the
moment. I was wondering if anyone has compiled those functions outside
of the RQuantLib package.  I am not proficient how to go about compiling
those Quantlib functions to use them within R. Could someone explain how
the process works?

Thanks,

Jorge Nieves


-----Original Message-----
From: r-sig-finance-bounces at stat.math.ethz.ch
[mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of Dirk
Eddelbuettel
Sent: Wednesday, May 26, 2010 07:36 AM
To: Jeff Ryan
Cc: r-sig-finance at stat.math.ethz.ch; Joseph Wang;
balakrishnan.ilango at thomsonreuters.com
Subject: Re: [R-SIG-Finance] ta-lib & quantlib libraries for R


On 26 May 2010 at 06:17, Jeff Ryan wrote:
| There is no ta-lib in R, but there is a great TA package called TTR:

And I'd argue that TA-lib with its fixed-width array is a poor match
anyway.
 
| http://cran.r-project.org/web/packages/TTR/index.html
| 
| And quantlib is indeed wrapped for R, or at least parts of:
| 
| http://dirk.eddelbuettel.com/code/rquantlib.html
| http://cran.r-project.org/web/packages/RQuantLib/index.html

Yup. Thanks for the links!

There is also a 'experimental' export of all of QuantLib to R using
Swig, but it isn't to the best of my knowledge all that actively
maintained (Hi, Joe!). 
It is also unwieldy as it exports all hidden and visible symbols -- last
time I tried there were more than 15,000 in the package namespave.

And if the OP couldn't find the answer to his initial questions, I
suppose he doesn't have the Google Juice (TM pending) to get that going
either.  But just in case, a somewhat recent thread is at

	http://thread.gmane.org/gmane.comp.finance.quantlib.user/6544

It would be nice if someone gave Joe a hand with this, but it requires
strong
C++ and S4 and Swig/Python skills which is not exactly common.

Dirk
 
| HTH
| Jeff
| 
| 
| 
| On Wed, May 26, 2010 at 6:12 AM,
<balakrishnan.ilango at thomsonreuters.com>wrote:
| 
| > Hi,
| >
| > I have been searching for ta-lib and quantlib libraries for R. I 
| > couldn't find it. Can you help me with the source?
| >
| >
| >
| > Thanks,
| >
| >
| > Balakrishnan Ilango
| >
| > Sales Manager - Investment & Advisory
| >
| > South Asia
| >
| >
| >
| > Thomson Reuters
| >
| > 4th Floor, Nicholas Piramal Tower 'B' Wing
| >
| > Peninsula Corporate Park
| >
| > Ganpatrao Kadam Marg, Lower Parel
| >
| > Mumbai - 400001, India
| >
| > Tel: +91 22 6636 7328
| >
| > Mobile: +91 90046 51997
| >
| > Email: balakrishnan.ilango at thomsonreuters.com
| > <mailto:balakrishnan.ilango at thomsonreuters.com>
| >
| > web: www.thomsonreuters.com <http://www.thomsonreuters.com/>
| >
| >
| >
| >        [[alternative HTML version deleted]]
| >
| > _______________________________________________
| > R-SIG-Finance at stat.math.ethz.ch mailing list 
| > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
| > -- Subscriber-posting only. If you want to post, subscribe first.
| > -- Also note that this is not the r-help list where general R 
| > questions should go.
| >
| 
| 
| 
| --
| Jeffrey Ryan
| jeffrey.ryan at insightalgo.com
| 
| ia: insight algorithmics
| www.insightalgo.com
| 
| 	[[alternative HTML version deleted]]
| 
| _______________________________________________
| R-SIG-Finance at stat.math.ethz.ch mailing list 
| https://stat.ethz.ch/mailman/listinfo/r-sig-finance
| -- Subscriber-posting only. If you want to post, subscribe first.
| -- Also note that this is not the r-help list where general R
questions should go.

--
  Regards, Dirk

_______________________________________________
R-SIG-Finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.


From wuertz at itp.phys.ethz.ch  Wed May 26 20:39:03 2010
From: wuertz at itp.phys.ethz.ch (Diethelm Wuertz)
Date: Wed, 26 May 2010 20:39:03 +0200
Subject: [R-SIG-Finance] R/Rmetrics Meielisalp Summer School and
	User/Developer Workshop 2010
Message-ID: <4BFD6AC7.8030103@itp.phys.ethz.ch>


Computational Finance and Financial Engineering
1st R/Rmetrics Summer School and 4th User/Developer Meeting
Meielisalp, Lake Thune Switzerland, June 27 - July 1, 2010
                
Late Registration: https://www.rmetrics.org/meielisalp2010-registration
Students: Apply for Student Scholarships
www.rmetrics.org


                        ***  Rmetrics 2010  -  Don't miss it !  ***
                           

The Summer School and User/Developer Meeting focus on topics from 
"Computational Finance and Financial Engineering" and on the use of 
R/Rmetrics in finance, insurance and related fields.

The Summer School morning sessions have four tutorials given by key note 
speakers covering topics from time series analysis, stochastic 
differential equations, and risk management. The tutorials are together 
with practical exercises.

Summer School Lecturers:
    * Alexander McNeil, Heriot-Watt University, Edinburgh, UK
      Copulas with Examples in R
    * Eckhard Platen, University of Technology Sydney, Australia
      A Benchmark Approach to Computative Finance
    * Nakahiro Yoshida, Math Sciences, University of Tokyo, Japan
      Inference for Discretely Observed Diffusion Processes
    * Eric Zivot, Economics Department, University Washington, Seattle, USA
      Analysis of High Frequency Data in R

The afternoon User/Developer Meetings are dedicated to contributed talks 
and presentations reflecting the wide range of fields in which R and 
Rmetrics are used in finance and insurance to analyze and model data. 
The goal is to bring together students, researchers, developers, 
practitioners, and users from finance and insurance providing a platform 
for common discussions and exchange of ideas.

Invited and Contributed Presentations:
    * Wolfgang Breymann, Cash Flow Modeling and Valuation of a Swiss 
Pension Fund, Zurich
    * Bernhard Brabec, to be announced, Zurich
    * Yohan Chalabi, Outlier Resistant GARCH Modeling, Zurich
    * Karim Chine, Elastic-R: A Google docs-like Portal for Data 
Analysis in the Cloud, London
    * Alexander Eisl, Exploring the Performance of Government Debt 
Issuance, Vienna
    * Andrew Ellis, Rmetrics2AMPL: An R Optimization Interface for AMPL, 
Zurich
    * Adam Ghandar, Fuzzy Logic Valuation Rules for Hedge Fund 
Management, Adelaide
    * Patrick Henaff, A Normalized Measure of Model Risk, Brest/Rennes
    * Stefano M. Iacus, Model Identification for Discretely Observed 
Stochastic Differential Equations, Milano
    * Vikram Kuriyan, to be announced, New-York
    * Dominik Locher, Optimally Balanced and Diversified Portfolios: A 
new Approach for Depot Analysis, Zurich
    * Mahendra Mehta, Recent Financial Crisis A look, Perspective and 
Lessons, Mumbai
    * Sebastian P?rez Saaibi, R/Rmetrics Generator Tool for Google 
Motion Charts, Zurich
    * Wolfgang Polasek, Sales Response Functions (SRF) with Stochastic 
Derivative Constraints, Vienna
    * Charles Roosen, Mainstream Application Development with R, Chippenham
    * Stefan Theussl, Many Solvers, One Interface - ROI, the R 
Optimization Infrastructure Package, Vienna
    * Marc Wildi, Financial Trading: Fundamental and Intrinsic  
Perspectives, Zurich
    * Diethelm W?rtz, The Hull, the Feasible Set, and Portfolio Risk 
Surfaces, Zurich
     ... this list is still incomplete, about 25 papers will be presented.


Call for Papers:
We invite to submit abstracts presenting innovations or exciting 
applications covering the whole spectrum of computational topics in 
finance, insurance and related fields. To submit an abstract email your 
pdf file to submissions [at] rmetrics.org. Please keep abstracts to one 
page. The abstracts will become available in an online abstract booklet. 
Submission will be considered on a rolling admission basis.

Scholarship for Students:
A limited number of scholarships are available for full-time Bachelor 
and Master students which include a reduction on the accommodation fees 
(total accommodation fees would be 90.00 CHF). Please send a letter of 
motivation and a recommendation letter from your supervisor to 
submissions [at] rmetrics.org. Note that only applications send from an 
email address affiliated to an university will be accepted. Deadline to 
apply for scholarship is June 1.

Organization:
    Rmetrics Association, co-organized by
    Swiss Federal Institute of Technology, Zurich.

Conference Chairs:
    Diethelm Wuertz, Swiss Federal Institute of Technology, Zurich CH
    Stefano Iacus, University of Milano, Milano, IT
    Mahendra Mehta, Neural Tech Technologies, Mumbai, IN
    David Scott, University of Auckland, Auckland, NZ

Conference Office:
    Yohan Chalabi, Swiss Federal Institute of Technology, Zurich CH
    Andrew Ellis, Swiss Federal Institute of Technology, Zurich CH

Supported by:
    Rmetrics Association Zurich
    ETH Zurich
    REvolution Computing
    ...

Visit:
    http://www.rmetrics.org/meielisalp2010
    http://www.rmetrics.org/meielisalp2010-registration


From richard.c.herron at gmail.com  Thu May 27 20:21:55 2010
From: richard.c.herron at gmail.com (Richard Herron)
Date: Thu, 27 May 2010 14:21:55 -0400
Subject: [R-SIG-Finance] Help with ugarchfit in rgarch library to estimate
	egarch (or igarch) models
Message-ID: <AANLkTilzv0Tsc1usn6yDmVtMLTC_tdHnjET-BF2CIHMN@mail.gmail.com>

I am trying to use ugarchfit() in the rgarch library but regardless of
the class of stock.ba (e.g., unclassed, ts, zoo, xts), which is a?ts
object of monthly stock returns (single stock) and I would like to fit
an eGARCH model, but I keep getting this error using a new install of
rgarch?in R 2.10.1:

> stock.ba.egarch <- ugarchfit(stock.ba, spec)
Error in UseMethod("ugarchfit") :
? no applicable method for 'ugarchfit' applied to an object of class "ts"

Here's the (relevant) code

stock.ba <- window(stock, start=c(1831, 1), end=c(2010, 2))
spec <- ugarchspec(variance.model = list(model = "eGARCH"))
stock.ba.egarch <- ugarchfit(stock.ba, spec)

Thanks!


From alexios at 4dscape.com  Thu May 27 21:49:54 2010
From: alexios at 4dscape.com (4dscape.com)
Date: Thu, 27 May 2010 22:49:54 +0300
Subject: [R-SIG-Finance] Help with ugarchfit in rgarch library to
	estimate egarch (or igarch) models
In-Reply-To: <AANLkTilzv0Tsc1usn6yDmVtMLTC_tdHnjET-BF2CIHMN@mail.gmail.com>
References: <AANLkTilzv0Tsc1usn6yDmVtMLTC_tdHnjET-BF2CIHMN@mail.gmail.com>
Message-ID: <FD4597CE-FD8C-47A9-8DD9-34657F5403A0@4dscape.com>

Hi,
Try:
stock.ba.egarch <- ugarchfit(spec, stock.ba)
else make sure to pass the arguments named.

Regards,
Alexios Ghalanos

Sent from my iPhone

On May 27, 2010, at 9:21 PM, Richard Herron  
<richard.c.herron at gmail.com> wrote:

> I am trying to use ugarchfit() in the rgarch library but regardless of
> the class of stock.ba (e.g., unclassed, ts, zoo, xts), which is a ts
> object of monthly stock returns (single stock) and I would like to fit
> an eGARCH model, but I keep getting this error using a new install of
> rgarch in R 2.10.1:
>
>> stock.ba.egarch <- ugarchfit(stock.ba, spec)
> Error in UseMethod("ugarchfit") :
>   no applicable method for 'ugarchfit' applied to an object of class  
> "ts"
>
> Here's the (relevant) code
>
> stock.ba <- window(stock, start=c(1831, 1), end=c(2010, 2))
> spec <- ugarchspec(variance.model = list(model = "eGARCH"))
> stock.ba.egarch <- ugarchfit(stock.ba, spec)
>
> Thanks!
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R  
> questions should go.


From jorge.nieves at moorecap.com  Fri May 28 15:48:21 2010
From: jorge.nieves at moorecap.com (Jorge Nieves)
Date: Fri, 28 May 2010 09:48:21 -0400
Subject: [R-SIG-Finance] ta-lib & quantlib libraries for R
In-Reply-To: <AANLkTim5RsL7pLUfs273tJ5sc7EDgRFJKeMfR8WfQtSp@mail.gmail.com>
Message-ID: <D595C0E05185614C90515F1E8A2D4CBF060B4914@NYC-XCH3.win.moorecap.com>

If you explain me the process, I think I can help. 


Jorge Nieves


-----Original Message-----
From: Joseph Wang [mailto:joequant at gmail.com] 
Sent: Friday, May 28, 2010 09:47 AM
To: Jorge Nieves
Cc: quantlib-devel at lists.sourceforge.net; Dirk Eddelbuettel; Jeff Ryan;
r-sig-finance at stat.math.ethz.ch; balakrishnan.ilango at thomsonreuters.com
Subject: Re: [R-SIG-Finance] ta-lib & quantlib libraries for R

I just checked in a file inflation.i into Quantlib-SWIG which provides
bindings for some of the inflation based instruments.  It's very sparse.
I'll try to add the other instruments over time, but it's likely to be
slow to add (i.e. a few weeks), but if there are any volunteers that
would want to add to the file, let me know and I'll check in any
additions.

What needs to be done is pretty mechanical (cut and paste) things.


From jorge.nieves at moorecap.com  Fri May 28 16:04:42 2010
From: jorge.nieves at moorecap.com (Jorge Nieves)
Date: Fri, 28 May 2010 10:04:42 -0400
Subject: [R-SIG-Finance] ta-lib & quantlib libraries for R
In-Reply-To: <AANLkTikxZQuO84WDFbbfeALj4ZUYxd1BqNFumjwacRVi@mail.gmail.com>
Message-ID: <D595C0E05185614C90515F1E8A2D4CBF060B4915@NYC-XCH3.win.moorecap.com>

Ok.. I will take a look in detail tonight.  


Jorge Nieves
Moore Capital 
Telephone 212.782.7083
Fax 212.642.7644

-----Original Message-----
From: Joseph Wang [mailto:joequant at gmail.com] 
Sent: Friday, May 28, 2010 10:01 AM
To: Jorge Nieves
Cc: quantlib-dev at lists.sourceforge.net; Dirk Eddelbuettel; Jeff Ryan; r-sig-finance at stat.math.ethz.ch; balakrishnan.ilango at thomsonreuters.com
Subject: Re: [R-SIG-Finance] ta-lib & quantlib libraries for R

The first thing is to check out Quantlib-SWIG from

https://quantlib.svn.sourceforge.net/svnroot/quantlib/trunk/QuantLib-SWIG/

and build the R bindings.  There are build instructions in the distribution and test examples.

Once you have that done it's a matter of looking at the .hpp file of the objects you want to bind.  Find a similar object in the SWIG directory and then transform the .hpp declaration adding it to the file SWIG/inflation.i

For example what I did to create the inflation collar instruments is that I cut and paste the non-inflation collar instruments and then modified the signatures to match the .hpp files.  The one thing that I might have to rework is how Seasonality is written so that it gets passed around using boost shared pointers.

On Fri, May 28, 2010 at 9:48 AM, Jorge Nieves <jorge.nieves at moorecap.com> wrote:
> If you explain me the process, I think I can help.
>
>
> Jorge Nieves
>
>
> -----Original Message-----
> From: Joseph Wang [mailto:joequant at gmail.com]
> Sent: Friday, May 28, 2010 09:47 AM
> To: Jorge Nieves
> Cc: quantlib-devel at lists.sourceforge.net; Dirk Eddelbuettel; Jeff 
> Ryan; r-sig-finance at stat.math.ethz.ch; 
> balakrishnan.ilango at thomsonreuters.com
> Subject: Re: [R-SIG-Finance] ta-lib & quantlib libraries for R
>
> I just checked in a file inflation.i into Quantlib-SWIG which provides 
> bindings for some of the inflation based instruments. ?It's very sparse.
> I'll try to add the other instruments over time, but it's likely to be 
> slow to add (i.e. a few weeks), but if there are any volunteers that 
> would want to add to the file, let me know and I'll check in any 
> additions.
>
> What needs to be done is pretty mechanical (cut and paste) things.
>


From schubert74 at gmx.net  Fri May 28 19:38:10 2010
From: schubert74 at gmx.net (schubert)
Date: Fri, 28 May 2010 19:38:10 +0200
Subject: [R-SIG-Finance] How to use RDCOMClient (RBloomberg 0.1-11) without
	Admin rights
Message-ID: <4BFFFF82.3020207@gmx.net>

I?m using RBloomberg since November on a Windows XP machine and it works 
very well. Now I had to install it on another Bloomberg machine which 
has the same hard- and software installation. But every time I tried to 
connect to Bloomberg over COM Api (RDCOMClient) - RGUI crashed. After 
searching a lot in the internet I found that a lot of people have 
problems to use RBloomberg (version with RDCOMClient) without 
administrator rights. Funny ? because the user on the pc were the 
download worked also had no admin rights. Therefore I tested a lot with 
RDCOMClient and the Excel Examples and came to the conclusion that the 
problem isn?t a RBloomberg Problem ? it?s only a problem with the 
RDCOMclient.


The problem can be tested with these lines of code (part of test2.R from 
RDCOMClient):

library(RDCOMClient)
xl <- COMCreate("Excel.Application")
xl[["Visible"]] <- TRUE # here - RGUI crashes!


RGUI.exe crashes after using/accessing a COM Object which was already 
created. Why?

After searching a lot in different forums and giving access-rights to 
the different directories (like R, RDCOMClient, Bloomberg/API) I didn?t 
came to a solution.

Only when I tried to read the source code of RDCOM-Client I discovered 
something strange. In some errorcase a log-file ?RDCOM.err? will be 
created directly in the root directory of C:\

The Problem is that in most companies normal users do not have access 
rights to the root directory of C:\ and so the error log file can not be 
written (if it isn?t created) or changed (append with new text). In this 
case ? RGUI crashes.

If an admin creates this file (if it doesn?t exists) and give the user 
full access (read, write, change) to this file, the RDCOMClient will 
work ? at least it worked on my pc.

A better solution would be to change the source code of RDCOMClient in 
COMError.cpp ? and change there the path from C:\\RDCOM.err to a 
location where the user is allowed to write/change files . e.g. a user 
directory.

I hope I can help other users with this information to use this great 
library on pc's without admin rights.

Best regards
Thomas Schubert

PS: By the way - c:\RDCOM.err can get very very huge..


From nguyen.h.khanh at gmail.com  Fri May 28 21:15:17 2010
From: nguyen.h.khanh at gmail.com (Khanh Nguyen)
Date: Fri, 28 May 2010 15:15:17 -0400
Subject: [R-SIG-Finance] ta-lib & quantlib libraries for R
In-Reply-To: <D595C0E05185614C90515F1E8A2D4CBF060B48DE@NYC-XCH3.win.moorecap.com>
References: <19453.1945.796372.739934@ron.nulle.part>
	<D595C0E05185614C90515F1E8A2D4CBF060B48DE@NYC-XCH3.win.moorecap.com>
Message-ID: <AANLkTilvhpi1J2GwIHSKS-vRgAtal3oaMoyqiOvM8fHm@mail.gmail.com>

If you already had the functions implemented, I can help you
integrating them into R using RQuantLib..

-k

On Wed, May 26, 2010 at 10:02 AM, Jorge Nieves
<jorge.nieves at moorecap.com> wrote:
>
> On this same topic, I just took a look at the list of functions from the
> quantlib library compiled within R, and I do not see the functions
> related to inflation related securities. Inflation functionality is
> already available in the quantlib
> http://quantlib.sourcearchive.com/documentation/0.9.9/annotated.html
>
> I am working in a project that requires the inflation functions at the
> moment. I was wondering if anyone has compiled those functions outside
> of the RQuantLib package. ?I am not proficient how to go about compiling
> those Quantlib functions to use them within R. Could someone explain how
> the process works?
>
> Thanks,
>
> Jorge Nieves
>
>
> -----Original Message-----
> From: r-sig-finance-bounces at stat.math.ethz.ch
> [mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of Dirk
> Eddelbuettel
> Sent: Wednesday, May 26, 2010 07:36 AM
> To: Jeff Ryan
> Cc: r-sig-finance at stat.math.ethz.ch; Joseph Wang;
> balakrishnan.ilango at thomsonreuters.com
> Subject: Re: [R-SIG-Finance] ta-lib & quantlib libraries for R
>
>
> On 26 May 2010 at 06:17, Jeff Ryan wrote:
> | There is no ta-lib in R, but there is a great TA package called TTR:
>
> And I'd argue that TA-lib with its fixed-width array is a poor match
> anyway.
>
> | http://cran.r-project.org/web/packages/TTR/index.html
> |
> | And quantlib is indeed wrapped for R, or at least parts of:
> |
> | http://dirk.eddelbuettel.com/code/rquantlib.html
> | http://cran.r-project.org/web/packages/RQuantLib/index.html
>
> Yup. Thanks for the links!
>
> There is also a 'experimental' export of all of QuantLib to R using
> Swig, but it isn't to the best of my knowledge all that actively
> maintained (Hi, Joe!).
> It is also unwieldy as it exports all hidden and visible symbols -- last
> time I tried there were more than 15,000 in the package namespave.
>
> And if the OP couldn't find the answer to his initial questions, I
> suppose he doesn't have the Google Juice (TM pending) to get that going
> either. ?But just in case, a somewhat recent thread is at
>
> ? ? ? ?http://thread.gmane.org/gmane.comp.finance.quantlib.user/6544
>
> It would be nice if someone gave Joe a hand with this, but it requires
> strong
> C++ and S4 and Swig/Python skills which is not exactly common.
>
> Dirk
>
> | HTH
> | Jeff
> |
> |
> |
> | On Wed, May 26, 2010 at 6:12 AM,
> <balakrishnan.ilango at thomsonreuters.com>wrote:
> |
> | > Hi,
> | >
> | > I have been searching for ta-lib and quantlib libraries for R. I
> | > couldn't find it. Can you help me with the source?
> | >
> | >
> | >
> | > Thanks,
> | >
> | >
> | > Balakrishnan Ilango
> | >
> | > Sales Manager - Investment & Advisory
> | >
> | > South Asia
> | >
> | >
> | >
> | > Thomson Reuters
> | >
> | > 4th Floor, Nicholas Piramal Tower 'B' Wing
> | >
> | > Peninsula Corporate Park
> | >
> | > Ganpatrao Kadam Marg, Lower Parel
> | >
> | > Mumbai - 400001, India
> | >
> | > Tel: +91 22 6636 7328
> | >
> | > Mobile: +91 90046 51997
> | >
> | > Email: balakrishnan.ilango at thomsonreuters.com
> | > <mailto:balakrishnan.ilango at thomsonreuters.com>
> | >
> | > web: www.thomsonreuters.com <http://www.thomsonreuters.com/>
> | >
> | >
> | >
> | > ? ? ? ?[[alternative HTML version deleted]]
> | >
> | > _______________________________________________
> | > R-SIG-Finance at stat.math.ethz.ch mailing list
> | > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> | > -- Subscriber-posting only. If you want to post, subscribe first.
> | > -- Also note that this is not the r-help list where general R
> | > questions should go.
> | >
> |
> |
> |
> | --
> | Jeffrey Ryan
> | jeffrey.ryan at insightalgo.com
> |
> | ia: insight algorithmics
> | www.insightalgo.com
> |
> | ? ? ? [[alternative HTML version deleted]]
> |
> | _______________________________________________
> | R-SIG-Finance at stat.math.ethz.ch mailing list
> | https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> | -- Subscriber-posting only. If you want to post, subscribe first.
> | -- Also note that this is not the r-help list where general R
> questions should go.
>
> --
> ?Regards, Dirk
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From jorge.nieves at moorecap.com  Fri May 28 21:22:23 2010
From: jorge.nieves at moorecap.com (Jorge Nieves)
Date: Fri, 28 May 2010 15:22:23 -0400
Subject: [R-SIG-Finance] ta-lib & quantlib libraries for R
In-Reply-To: <AANLkTilvhpi1J2GwIHSKS-vRgAtal3oaMoyqiOvM8fHm@mail.gmail.com>
Message-ID: <D595C0E05185614C90515F1E8A2D4CBF060B4919@NYC-XCH3.win.moorecap.com>

Khanh,



I am not sure if you have seen Joseph Wang's earlier emails today. He indicated that there is some work related to adding the inflation functions into the "Quantlib-SWIG."  I am checking details tonight to help with the process. Is that what you are offering to do too? Will you be helping with this process?



Jorge Nieves


-----Original Message-----
From: Khanh Nguyen [mailto:nguyen.h.khanh at gmail.com] 
Sent: Friday, May 28, 2010 03:15 PM
To: Jorge Nieves
Cc: Dirk Eddelbuettel; Jeff Ryan; r-sig-finance at stat.math.ethz.ch; Joseph Wang; balakrishnan.ilango at thomsonreuters.com
Subject: Re: [R-SIG-Finance] ta-lib & quantlib libraries for R

If you already had the functions implemented, I can help you integrating them into R using RQuantLib..

-k

On Wed, May 26, 2010 at 10:02 AM, Jorge Nieves <jorge.nieves at moorecap.com> wrote:
>
> On this same topic, I just took a look at the list of functions from 
> the quantlib library compiled within R, and I do not see the functions 
> related to inflation related securities. Inflation functionality is 
> already available in the quantlib 
> http://quantlib.sourcearchive.com/documentation/0.9.9/annotated.html
>
> I am working in a project that requires the inflation functions at the 
> moment. I was wondering if anyone has compiled those functions outside 
> of the RQuantLib package. ?I am not proficient how to go about 
> compiling those Quantlib functions to use them within R. Could someone 
> explain how the process works?
>
> Thanks,
>
> Jorge Nieves
>
>
> -----Original Message-----
> From: r-sig-finance-bounces at stat.math.ethz.ch
> [mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of Dirk 
> Eddelbuettel
> Sent: Wednesday, May 26, 2010 07:36 AM
> To: Jeff Ryan
> Cc: r-sig-finance at stat.math.ethz.ch; Joseph Wang; 
> balakrishnan.ilango at thomsonreuters.com
> Subject: Re: [R-SIG-Finance] ta-lib & quantlib libraries for R
>
>
> On 26 May 2010 at 06:17, Jeff Ryan wrote:
> | There is no ta-lib in R, but there is a great TA package called TTR:
>
> And I'd argue that TA-lib with its fixed-width array is a poor match 
> anyway.
>
> | http://cran.r-project.org/web/packages/TTR/index.html
> |
> | And quantlib is indeed wrapped for R, or at least parts of:
> |
> | http://dirk.eddelbuettel.com/code/rquantlib.html
> | http://cran.r-project.org/web/packages/RQuantLib/index.html
>
> Yup. Thanks for the links!
>
> There is also a 'experimental' export of all of QuantLib to R using 
> Swig, but it isn't to the best of my knowledge all that actively 
> maintained (Hi, Joe!).
> It is also unwieldy as it exports all hidden and visible symbols -- 
> last time I tried there were more than 15,000 in the package namespave.
>
> And if the OP couldn't find the answer to his initial questions, I 
> suppose he doesn't have the Google Juice (TM pending) to get that 
> going either. ?But just in case, a somewhat recent thread is at
>
> ? ? ? ?http://thread.gmane.org/gmane.comp.finance.quantlib.user/6544
>
> It would be nice if someone gave Joe a hand with this, but it requires 
> strong
> C++ and S4 and Swig/Python skills which is not exactly common.
>
> Dirk
>
> | HTH
> | Jeff
> |
> |
> |
> | On Wed, May 26, 2010 at 6:12 AM,
> <balakrishnan.ilango at thomsonreuters.com>wrote:
> |
> | > Hi,
> | >
> | > I have been searching for ta-lib and quantlib libraries for R. I 
> | > couldn't find it. Can you help me with the source?
> | >
> | >
> | >
> | > Thanks,
> | >
> | >
> | > Balakrishnan Ilango
> | >
> | > Sales Manager - Investment & Advisory
> | >
> | > South Asia
> | >
> | >
> | >
> | > Thomson Reuters
> | >
> | > 4th Floor, Nicholas Piramal Tower 'B' Wing
> | >
> | > Peninsula Corporate Park
> | >
> | > Ganpatrao Kadam Marg, Lower Parel
> | >
> | > Mumbai - 400001, India
> | >
> | > Tel: +91 22 6636 7328
> | >
> | > Mobile: +91 90046 51997
> | >
> | > Email: balakrishnan.ilango at thomsonreuters.com
> | > <mailto:balakrishnan.ilango at thomsonreuters.com>
> | >
> | > web: www.thomsonreuters.com <http://www.thomsonreuters.com/>
> | >
> | >
> | >
> | > ? ? ? ?[[alternative HTML version deleted]]
> | >
> | > _______________________________________________
> | > R-SIG-Finance at stat.math.ethz.ch mailing list 
> | > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> | > -- Subscriber-posting only. If you want to post, subscribe first.
> | > -- Also note that this is not the r-help list where general R 
> | > questions should go.
> | >
> |
> |
> |
> | --
> | Jeffrey Ryan
> | jeffrey.ryan at insightalgo.com
> |
> | ia: insight algorithmics
> | www.insightalgo.com
> |
> | ? ? ? [[alternative HTML version deleted]]
> |
> | _______________________________________________
> | R-SIG-Finance at stat.math.ethz.ch mailing list 
> | https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> | -- Subscriber-posting only. If you want to post, subscribe first.
> | -- Also note that this is not the r-help list where general R
> questions should go.
>
> --
> ?Regards, Dirk
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R 
> questions should go.
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From edd at debian.org  Fri May 28 21:35:30 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri, 28 May 2010 14:35:30 -0500
Subject: [R-SIG-Finance] ta-lib & quantlib libraries for R
In-Reply-To: <D595C0E05185614C90515F1E8A2D4CBF060B4919@NYC-XCH3.win.moorecap.com>
References: <AANLkTilvhpi1J2GwIHSKS-vRgAtal3oaMoyqiOvM8fHm@mail.gmail.com>
	<D595C0E05185614C90515F1E8A2D4CBF060B4919@NYC-XCH3.win.moorecap.com>
Message-ID: <19456.6914.774508.341024@ron.nulle.part>


Jorge,

On 28 May 2010 at 15:22, Jorge Nieves wrote:
| I am not sure if you have seen Joseph Wang's earlier emails today. He indicated that there is some work related to adding the inflation functions into the "Quantlib-SWIG."  I am checking details tonight to help with the process. Is that what you are offering to do too? Will you be helping with this process?

With all due respect, you had missed the hint by Joe that Quantlib-Swig was
different from RQuantLib.  Quantlib-Swig is more comprehensive, more
ambitious and (in my humble but biased opinion) quite a bit harder to set-up.

So what Khanh offered you is pretty kind as you probably have RQuantLib's
ease of use (eg: binaries from CRAN) in mind.

That said, the community could do with a few more helping hands.  So if this
leads to more code (and documentation and unit tests and ...) getting into
RQuantLib then I am all for it.

Dirk 
 
 
| Jorge Nieves
| 
| 
| -----Original Message-----
| From: Khanh Nguyen [mailto:nguyen.h.khanh at gmail.com] 
| Sent: Friday, May 28, 2010 03:15 PM
| To: Jorge Nieves
| Cc: Dirk Eddelbuettel; Jeff Ryan; r-sig-finance at stat.math.ethz.ch; Joseph Wang; balakrishnan.ilango at thomsonreuters.com
| Subject: Re: [R-SIG-Finance] ta-lib & quantlib libraries for R
| 
| If you already had the functions implemented, I can help you integrating them into R using RQuantLib..
| 
| -k
| 
| On Wed, May 26, 2010 at 10:02 AM, Jorge Nieves <jorge.nieves at moorecap.com> wrote:
| >
| > On this same topic, I just took a look at the list of functions from 
| > the quantlib library compiled within R, and I do not see the functions 
| > related to inflation related securities. Inflation functionality is 
| > already available in the quantlib 
| > http://quantlib.sourcearchive.com/documentation/0.9.9/annotated.html
| >
| > I am working in a project that requires the inflation functions at the 
| > moment. I was wondering if anyone has compiled those functions outside 
| > of the RQuantLib package. ?I am not proficient how to go about 
| > compiling those Quantlib functions to use them within R. Could someone 
| > explain how the process works?
| >
| > Thanks,
| >
| > Jorge Nieves
| >
| >
| > -----Original Message-----
| > From: r-sig-finance-bounces at stat.math.ethz.ch
| > [mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of Dirk 
| > Eddelbuettel
| > Sent: Wednesday, May 26, 2010 07:36 AM
| > To: Jeff Ryan
| > Cc: r-sig-finance at stat.math.ethz.ch; Joseph Wang; 
| > balakrishnan.ilango at thomsonreuters.com
| > Subject: Re: [R-SIG-Finance] ta-lib & quantlib libraries for R
| >
| >
| > On 26 May 2010 at 06:17, Jeff Ryan wrote:
| > | There is no ta-lib in R, but there is a great TA package called TTR:
| >
| > And I'd argue that TA-lib with its fixed-width array is a poor match 
| > anyway.
| >
| > | http://cran.r-project.org/web/packages/TTR/index.html
| > |
| > | And quantlib is indeed wrapped for R, or at least parts of:
| > |
| > | http://dirk.eddelbuettel.com/code/rquantlib.html
| > | http://cran.r-project.org/web/packages/RQuantLib/index.html
| >
| > Yup. Thanks for the links!
| >
| > There is also a 'experimental' export of all of QuantLib to R using 
| > Swig, but it isn't to the best of my knowledge all that actively 
| > maintained (Hi, Joe!).
| > It is also unwieldy as it exports all hidden and visible symbols -- 
| > last time I tried there were more than 15,000 in the package namespave.
| >
| > And if the OP couldn't find the answer to his initial questions, I 
| > suppose he doesn't have the Google Juice (TM pending) to get that 
| > going either. ?But just in case, a somewhat recent thread is at
| >
| > ? ? ? ?http://thread.gmane.org/gmane.comp.finance.quantlib.user/6544
| >
| > It would be nice if someone gave Joe a hand with this, but it requires 
| > strong
| > C++ and S4 and Swig/Python skills which is not exactly common.
| >
| > Dirk
| >
| > | HTH
| > | Jeff
| > |
| > |
| > |
| > | On Wed, May 26, 2010 at 6:12 AM,
| > <balakrishnan.ilango at thomsonreuters.com>wrote:
| > |
| > | > Hi,
| > | >
| > | > I have been searching for ta-lib and quantlib libraries for R. I 
| > | > couldn't find it. Can you help me with the source?
| > | >
| > | >
| > | >
| > | > Thanks,
| > | >
| > | >
| > | > Balakrishnan Ilango
| > | >
| > | > Sales Manager - Investment & Advisory
| > | >
| > | > South Asia
| > | >
| > | >
| > | >
| > | > Thomson Reuters
| > | >
| > | > 4th Floor, Nicholas Piramal Tower 'B' Wing
| > | >
| > | > Peninsula Corporate Park
| > | >
| > | > Ganpatrao Kadam Marg, Lower Parel
| > | >
| > | > Mumbai - 400001, India
| > | >
| > | > Tel: +91 22 6636 7328
| > | >
| > | > Mobile: +91 90046 51997
| > | >
| > | > Email: balakrishnan.ilango at thomsonreuters.com
| > | > <mailto:balakrishnan.ilango at thomsonreuters.com>
| > | >
| > | > web: www.thomsonreuters.com <http://www.thomsonreuters.com/>
| > | >
| > | >
| > | >
| > | > ? ? ? ?[[alternative HTML version deleted]]
| > | >
| > | > _______________________________________________
| > | > R-SIG-Finance at stat.math.ethz.ch mailing list 
| > | > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
| > | > -- Subscriber-posting only. If you want to post, subscribe first.
| > | > -- Also note that this is not the r-help list where general R 
| > | > questions should go.
| > | >
| > |
| > |
| > |
| > | --
| > | Jeffrey Ryan
| > | jeffrey.ryan at insightalgo.com
| > |
| > | ia: insight algorithmics
| > | www.insightalgo.com
| > |
| > | ? ? ? [[alternative HTML version deleted]]
| > |
| > | _______________________________________________
| > | R-SIG-Finance at stat.math.ethz.ch mailing list 
| > | https://stat.ethz.ch/mailman/listinfo/r-sig-finance
| > | -- Subscriber-posting only. If you want to post, subscribe first.
| > | -- Also note that this is not the r-help list where general R
| > questions should go.
| >
| > --
| > ?Regards, Dirk
| >
| > _______________________________________________
| > R-SIG-Finance at stat.math.ethz.ch mailing list 
| > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
| > -- Subscriber-posting only. If you want to post, subscribe first.
| > -- Also note that this is not the r-help list where general R 
| > questions should go.
| >
| > _______________________________________________
| > R-SIG-Finance at stat.math.ethz.ch mailing list 
| > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
| > -- Subscriber-posting only. If you want to post, subscribe first.
| > -- Also note that this is not the r-help list where general R questions should go.
| >

-- 
  Regards, Dirk


From jorge.nieves at moorecap.com  Fri May 28 21:50:52 2010
From: jorge.nieves at moorecap.com (Jorge Nieves)
Date: Fri, 28 May 2010 15:50:52 -0400
Subject: [R-SIG-Finance] ta-lib & quantlib libraries for R
In-Reply-To: <19456.6914.774508.341024@ron.nulle.part>
Message-ID: <D595C0E05185614C90515F1E8A2D4CBF060B491C@NYC-XCH3.win.moorecap.com>

 
Dirk  thanks for clarifying. Indeed, I do not know the difference from one to another. I am for the most part an end user.  I honestly do not the details of what it is involved for having the QuantLib up and running within  R. I figured this could be an opportunity for me to understated. So, having said that my offer to help still stands provided that someone explains me what and how.

Jorge Nieves

-----Original Message-----
From: Dirk Eddelbuettel [mailto:edd at debian.org] 
Sent: Friday, May 28, 2010 03:36 PM
To: Jorge Nieves
Cc: Khanh Nguyen; Dirk Eddelbuettel; Jeff Ryan; r-sig-finance at stat.math.ethz.ch; Joseph Wang; balakrishnan.ilango at thomsonreuters.com
Subject: RE: [R-SIG-Finance] ta-lib & quantlib libraries for R


Jorge,

On 28 May 2010 at 15:22, Jorge Nieves wrote:
| I am not sure if you have seen Joseph Wang's earlier emails today. He indicated that there is some work related to adding the inflation functions into the "Quantlib-SWIG."  I am checking details tonight to help with the process. Is that what you are offering to do too? Will you be helping with this process?

With all due respect, you had missed the hint by Joe that Quantlib-Swig was different from RQuantLib.  Quantlib-Swig is more comprehensive, more ambitious and (in my humble but biased opinion) quite a bit harder to set-up.

So what Khanh offered you is pretty kind as you probably have RQuantLib's ease of use (eg: binaries from CRAN) in mind.

That said, the community could do with a few more helping hands.  So if this leads to more code (and documentation and unit tests and ...) getting into RQuantLib then I am all for it.

Dirk 
 
 
| Jorge Nieves
| 
| 
| -----Original Message-----
| From: Khanh Nguyen [mailto:nguyen.h.khanh at gmail.com]
| Sent: Friday, May 28, 2010 03:15 PM
| To: Jorge Nieves
| Cc: Dirk Eddelbuettel; Jeff Ryan; r-sig-finance at stat.math.ethz.ch; 
| Joseph Wang; balakrishnan.ilango at thomsonreuters.com
| Subject: Re: [R-SIG-Finance] ta-lib & quantlib libraries for R
| 
| If you already had the functions implemented, I can help you integrating them into R using RQuantLib..
| 
| -k
| 
| On Wed, May 26, 2010 at 10:02 AM, Jorge Nieves <jorge.nieves at moorecap.com> wrote:
| >
| > On this same topic, I just took a look at the list of functions from 
| > the quantlib library compiled within R, and I do not see the 
| > functions related to inflation related securities. Inflation 
| > functionality is already available in the quantlib 
| > http://quantlib.sourcearchive.com/documentation/0.9.9/annotated.html
| >
| > I am working in a project that requires the inflation functions at 
| > the moment. I was wondering if anyone has compiled those functions 
| > outside of the RQuantLib package. ?I am not proficient how to go 
| > about compiling those Quantlib functions to use them within R. Could 
| > someone explain how the process works?
| >
| > Thanks,
| >
| > Jorge Nieves
| >
| >
| > -----Original Message-----
| > From: r-sig-finance-bounces at stat.math.ethz.ch
| > [mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of Dirk 
| > Eddelbuettel
| > Sent: Wednesday, May 26, 2010 07:36 AM
| > To: Jeff Ryan
| > Cc: r-sig-finance at stat.math.ethz.ch; Joseph Wang; 
| > balakrishnan.ilango at thomsonreuters.com
| > Subject: Re: [R-SIG-Finance] ta-lib & quantlib libraries for R
| >
| >
| > On 26 May 2010 at 06:17, Jeff Ryan wrote:
| > | There is no ta-lib in R, but there is a great TA package called TTR:
| >
| > And I'd argue that TA-lib with its fixed-width array is a poor match 
| > anyway.
| >
| > | http://cran.r-project.org/web/packages/TTR/index.html
| > |
| > | And quantlib is indeed wrapped for R, or at least parts of:
| > |
| > | http://dirk.eddelbuettel.com/code/rquantlib.html
| > | http://cran.r-project.org/web/packages/RQuantLib/index.html
| >
| > Yup. Thanks for the links!
| >
| > There is also a 'experimental' export of all of QuantLib to R using 
| > Swig, but it isn't to the best of my knowledge all that actively 
| > maintained (Hi, Joe!).
| > It is also unwieldy as it exports all hidden and visible symbols -- 
| > last time I tried there were more than 15,000 in the package namespave.
| >
| > And if the OP couldn't find the answer to his initial questions, I 
| > suppose he doesn't have the Google Juice (TM pending) to get that 
| > going either. ?But just in case, a somewhat recent thread is at
| >
| > ? ? ? ?http://thread.gmane.org/gmane.comp.finance.quantlib.user/6544
| >
| > It would be nice if someone gave Joe a hand with this, but it 
| > requires strong
| > C++ and S4 and Swig/Python skills which is not exactly common.
| >
| > Dirk
| >
| > | HTH
| > | Jeff
| > |
| > |
| > |
| > | On Wed, May 26, 2010 at 6:12 AM,
| > <balakrishnan.ilango at thomsonreuters.com>wrote:
| > |
| > | > Hi,
| > | >
| > | > I have been searching for ta-lib and quantlib libraries for R. I 
| > | > couldn't find it. Can you help me with the source?
| > | >
| > | >
| > | >
| > | > Thanks,
| > | >
| > | >
| > | > Balakrishnan Ilango
| > | >
| > | > Sales Manager - Investment & Advisory
| > | >
| > | > South Asia
| > | >
| > | >
| > | >
| > | > Thomson Reuters
| > | >
| > | > 4th Floor, Nicholas Piramal Tower 'B' Wing
| > | >
| > | > Peninsula Corporate Park
| > | >
| > | > Ganpatrao Kadam Marg, Lower Parel
| > | >
| > | > Mumbai - 400001, India
| > | >
| > | > Tel: +91 22 6636 7328
| > | >
| > | > Mobile: +91 90046 51997
| > | >
| > | > Email: balakrishnan.ilango at thomsonreuters.com
| > | > <mailto:balakrishnan.ilango at thomsonreuters.com>
| > | >
| > | > web: www.thomsonreuters.com <http://www.thomsonreuters.com/>
| > | >
| > | >
| > | >
| > | > ? ? ? ?[[alternative HTML version deleted]]
| > | >
| > | > _______________________________________________
| > | > R-SIG-Finance at stat.math.ethz.ch mailing list 
| > | > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
| > | > -- Subscriber-posting only. If you want to post, subscribe first.
| > | > -- Also note that this is not the r-help list where general R 
| > | > questions should go.
| > | >
| > |
| > |
| > |
| > | --
| > | Jeffrey Ryan
| > | jeffrey.ryan at insightalgo.com
| > |
| > | ia: insight algorithmics
| > | www.insightalgo.com
| > |
| > | ? ? ? [[alternative HTML version deleted]]
| > |
| > | _______________________________________________
| > | R-SIG-Finance at stat.math.ethz.ch mailing list 
| > | https://stat.ethz.ch/mailman/listinfo/r-sig-finance
| > | -- Subscriber-posting only. If you want to post, subscribe first.
| > | -- Also note that this is not the r-help list where general R
| > questions should go.
| >
| > --
| > ?Regards, Dirk
| >
| > _______________________________________________
| > R-SIG-Finance at stat.math.ethz.ch mailing list 
| > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
| > -- Subscriber-posting only. If you want to post, subscribe first.
| > -- Also note that this is not the r-help list where general R 
| > questions should go.
| >
| > _______________________________________________
| > R-SIG-Finance at stat.math.ethz.ch mailing list 
| > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
| > -- Subscriber-posting only. If you want to post, subscribe first.
| > -- Also note that this is not the r-help list where general R questions should go.
| >

--
  Regards, Dirk


From nelson.ana at gmail.com  Mon May 31 12:27:58 2010
From: nelson.ana at gmail.com (Ana Nelson)
Date: Mon, 31 May 2010 11:27:58 +0100 (IST)
Subject: [R-SIG-Finance] How to use RDCOMClient (RBloomberg 0.1-11)
 without Admin rights
In-Reply-To: <24683729.421275301504215.JavaMail.ana@Ana-Nelsons-MacBook.local>
Message-ID: <27492033.441275301673744.JavaMail.ana@Ana-Nelsons-MacBook.local>

Hi, Thomas,

Many thanks for looking into this in such detail. I will pass this suggestion on to the maintainers of RDCOMClient.

There is a newer version of RBloomberg using the Java API available at findata.org, which will soon be the default version of RBloomberg.

Regards,
Ana



----- Original Message -----
From: "schubert" <schubert74 at gmx.net>
To: r-sig-finance at stat.math.ethz.ch
Sent: Friday, 28 May, 2010 18:38:10 GMT +00:00 GMT Britain, Ireland, Portugal
Subject: [R-SIG-Finance] How to use RDCOMClient (RBloomberg 0.1-11) without Admin rights

I?m using RBloomberg since November on a Windows XP machine and it works 
very well. Now I had to install it on another Bloomberg machine which 
has the same hard- and software installation. But every time I tried to 
connect to Bloomberg over COM Api (RDCOMClient) - RGUI crashed. After 
searching a lot in the internet I found that a lot of people have 
problems to use RBloomberg (version with RDCOMClient) without 
administrator rights. Funny ? because the user on the pc were the 
download worked also had no admin rights. Therefore I tested a lot with 
RDCOMClient and the Excel Examples and came to the conclusion that the 
problem isn?t a RBloomberg Problem ? it?s only a problem with the 
RDCOMclient.


The problem can be tested with these lines of code (part of test2.R from 
RDCOMClient):

library(RDCOMClient)
xl <- COMCreate("Excel.Application")
xl[["Visible"]] <- TRUE # here - RGUI crashes!


RGUI.exe crashes after using/accessing a COM Object which was already 
created. Why?

After searching a lot in different forums and giving access-rights to 
the different directories (like R, RDCOMClient, Bloomberg/API) I didn?t 
came to a solution.

Only when I tried to read the source code of RDCOM-Client I discovered 
something strange. In some errorcase a log-file ?RDCOM.err? will be 
created directly in the root directory of C:\

The Problem is that in most companies normal users do not have access 
rights to the root directory of C:\ and so the error log file can not be 
written (if it isn?t created) or changed (append with new text). In this 
case ? RGUI crashes.

If an admin creates this file (if it doesn?t exists) and give the user 
full access (read, write, change) to this file, the RDCOMClient will 
work ? at least it worked on my pc.

A better solution would be to change the source code of RDCOMClient in 
COMError.cpp ? and change there the path from C:\\RDCOM.err to a 
location where the user is allowed to write/change files . e.g. a user 
directory.

I hope I can help other users with this information to use this great 
library on pc's without admin rights.

Best regards
Thomas Schubert

PS: By the way - c:\RDCOM.err can get very very huge..

_______________________________________________
R-SIG-Finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From ron_michael70 at yahoo.com  Tue Jun  1 09:55:57 2010
From: ron_michael70 at yahoo.com (Ron Michael)
Date: Tue, 1 Jun 2010 00:55:57 -0700 (PDT)
Subject: [R-SIG-Finance] Needing some good stuff on valuation
Message-ID: <929633.74099.qm@web63807.mail.re1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100601/7dbb7c35/attachment.pl>

From otis at zhaw.ch  Tue Jun  1 10:55:46 2010
From: otis at zhaw.ch (Otziger Simon (otis))
Date: Tue, 1 Jun 2010 10:55:46 +0200
Subject: [R-SIG-Finance] Needing some good stuff on valuation
In-Reply-To: <929633.74099.qm@web63807.mail.re1.yahoo.com>
References: <929633.74099.qm@web63807.mail.re1.yahoo.com>
Message-ID: <7D09BA34-69FB-4864-94CF-F7E0C77E234C@zhaw.ch>

Maybe there are better books but  "Monte Carlo Methods in Financial Engineering" by Glasserman covers those topics.

HTH
Simon

On Jun 1, 2010, at 9:55 AM, Ron Michael wrote:

> Hi all, I am looking for some good textbook for Financial instrument valuation using Monte carlo simulation approach, e.g. Simulation approach for derivative pricing particularly Options valuation with Asian type of pay-off, Calculation of greeks under same simulation framework for Asian, American ir Bermudian type option etc.
>  
> Can friends here suggest me some really good book over that? Online materials are also be ok.
>  
> Your help will be highly appreciated.
>  
> Thanks,
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From samuel.le at srlglobal.com  Tue Jun  1 10:57:58 2010
From: samuel.le at srlglobal.com (Samuel Le)
Date: Tue, 01 Jun 2010 09:57:58 +0100
Subject: [R-SIG-Finance] Needing some good stuff on valuation
In-Reply-To: <7D09BA34-69FB-4864-94CF-F7E0C77E234C@zhaw.ch>
References: <929633.74099.qm@web63807.mail.re1.yahoo.com>
	<7D09BA34-69FB-4864-94CF-F7E0C77E234C@zhaw.ch>
Message-ID: <4C04CB96.50509@srlglobal.com>

There is a good book by Peter Jaeckel as well -can't remember the title 
now but it has Monte Carlo in it.

Samuel

Otziger Simon (otis) wrote:
> Maybe there are better books but  "Monte Carlo Methods in Financial Engineering" by Glasserman covers those topics.
>
> HTH
> Simon
>
> On Jun 1, 2010, at 9:55 AM, Ron Michael wrote:
>
>   
>> Hi all, I am looking for some good textbook for Financial instrument valuation using Monte carlo simulation approach, e.g. Simulation approach for derivative pricing particularly Options valuation with Asian type of pay-off, Calculation of greeks under same simulation framework for Asian, American ir Bermudian type option etc.
>>  
>> Can friends here suggest me some really good book over that? Online materials are also be ok.
>>  
>> Your help will be highly appreciated.
>>  
>> Thanks,
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>     
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus signature database 5161 (20100601) __________
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
>
>   



__________ Information from ESET NOD32 Antivirus, version of virus signature database 5161 (20100601) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From martin.becker at mx.uni-saarland.de  Tue Jun  1 11:11:44 2010
From: martin.becker at mx.uni-saarland.de (Martin Becker)
Date: Tue, 01 Jun 2010 11:11:44 +0200
Subject: [R-SIG-Finance] Needing some good stuff on valuation
In-Reply-To: <4C04CB96.50509@srlglobal.com>
References: <929633.74099.qm@web63807.mail.re1.yahoo.com>	<7D09BA34-69FB-4864-94CF-F7E0C77E234C@zhaw.ch>
	<4C04CB96.50509@srlglobal.com>
Message-ID: <4C04CED0.9000204@mx.uni-saarland.de>

The details are:

J?ckel, Peter: Monte Carlo methods in finance, Wiley Finance Series, 
John Wiley & Sons, 2002.

Best
- Martin

On 01.06.2010 10:57, Samuel Le wrote:
> There is a good book by Peter Jaeckel as well -can't remember the 
> title now but it has Monte Carlo in it.
>
> Samuel
>
> Otziger Simon (otis) wrote:
>> Maybe there are better books but  "Monte Carlo Methods in Financial 
>> Engineering" by Glasserman covers those topics.
>>
>> HTH
>> Simon
>>
>> On Jun 1, 2010, at 9:55 AM, Ron Michael wrote:
>>
>>> Hi all, I am looking for some good textbook for Financial instrument 
>>> valuation using Monte carlo simulation approach, e.g. Simulation 
>>> approach for derivative pricing particularly Options valuation with 
>>> Asian type of pay-off, Calculation of greeks under same simulation 
>>> framework for Asian, American ir Bermudian type option etc.
>>>
>>> Can friends here suggest me some really good book over that? Online 
>>> materials are also be ok.
>>>
>>> Your help will be highly appreciated.
>>>
>>> Thanks,
>>>
>>>
>>>     [[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-SIG-Finance at stat.math.ethz.ch mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R 
>>> questions should go.
>>
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R 
>> questions should go.
>>
>>
>> __________ Information from ESET NOD32 Antivirus, version of virus 
>> signature database 5161 (20100601) __________
>>
>> The message was checked by ESET NOD32 Antivirus.
>>
>> http://www.eset.com
>>
>>
>
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus 
> signature database 5161 (20100601) __________
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R 
> questions should go.


-- 
Dr. Martin Becker
Statistics and Econometrics
Saarland University
Campus C3 1, Room 217
66123 Saarbruecken
Germany


From corey at coreygallon.com  Tue Jun  1 11:21:27 2010
From: corey at coreygallon.com (Corey Gallon)
Date: Tue, 1 Jun 2010 09:21:27 +0000
Subject: [R-SIG-Finance] Needing some good stuff on valuation
In-Reply-To: <929633.74099.qm@web63807.mail.re1.yahoo.com>
References: <929633.74099.qm@web63807.mail.re1.yahoo.com>
Message-ID: <678266435-1275384091-cardhu_decombobulator_blackberry.rim.net-432349877-@bda588.bisx.prod.on.blackberry>

I've always liked the Hull books.  Also, the Wilmott books on quantitative finance are particularly good.




Cheers,

Corey

* Sent from my BlackBerry handheld device

-----Original Message-----
From: Ron Michael <ron_michael70 at yahoo.com>
Date: Tue, 1 Jun 2010 00:55:57 
To: <r-sig-finance at stat.math.ethz.ch>
Subject: [R-SIG-Finance] Needing some good stuff on valuation

Hi all, I am looking for some good textbook for Financial instrument valuation using Monte carlo simulation approach, e.g. Simulation approach for derivative pricing particularly Options valuation with Asian type of pay-off, Calculation of greeks under same simulation framework for Asian, American ir Bermudian type option etc.
?
Can friends here suggest me some really good book over that? Online materials are also be ok.
?
Your help will be highly appreciated.
?
Thanks,


	[[alternative HTML version deleted]]



From cmdr_rogue at hotmail.com  Wed Jun  2 03:54:40 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Wed, 02 Jun 2010 09:54:40 +0800
Subject: [R-SIG-Finance] Needing some good stuff on valuation
In-Reply-To: <929633.74099.qm@web63807.mail.re1.yahoo.com>
References: <929633.74099.qm@web63807.mail.re1.yahoo.com>
Message-ID: <BLU0-SMTP643388F4EDD953E7A38C75E2D00@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100602/c4c6ff27/attachment.pl>

From VOSSK at kochind.com  Wed Jun  2 16:58:30 2010
From: VOSSK at kochind.com (Voss, Kent)
Date: Wed, 2 Jun 2010 07:58:30 -0700
Subject: [R-SIG-Finance] Rbloomberg JavaAPI
Message-ID: <13CB99597D0BAA43B07ABFCE29E45F6B02EECE97@phx0mbx01.kochind.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100602/b6fe967d/attachment.pl>

From worik.stanton at gmail.com  Wed Jun  2 23:57:34 2010
From: worik.stanton at gmail.com (Worik)
Date: Thu, 03 Jun 2010 09:57:34 +1200
Subject: [R-SIG-Finance] XTS Question
Message-ID: <4C06D3CE.1030209@gmail.com>

How do I delete an element from an XTS?

I can jump through hoops with na.omit as below, but there must be a 
simpler better way that I just cannot see

cheers
Worik

 > dates <- seq.Date(from=as.Date("1996-01-01"), 
to=as.Date("1996-01-10"), length.out=10)
 > data <- 1:10
 > x <- xts(data, order.by=dates)
 > x
            [,1]
1996-01-01    1
1996-01-02    2
1996-01-03    3
1996-01-04    4
1996-01-05    5
1996-01-06    6
1996-01-07    7
1996-01-08    8
1996-01-09    9
1996-01-10   10
 > x["1996-01-04"] <- NA
 > x <- na.omit(x)
 > x
            [,1]
1996-01-01    1
1996-01-02    2
1996-01-03    3
1996-01-05    5
1996-01-06    6
1996-01-07    7
1996-01-08    8
1996-01-09    9
1996-01-10   10
 >


From etheber at gmx.de  Thu Jun  3 08:55:21 2010
From: etheber at gmx.de (Thomas Etheber)
Date: Thu, 03 Jun 2010 08:55:21 +0200
Subject: [R-SIG-Finance] XTS Question
In-Reply-To: <4C06D3CE.1030209@gmail.com>
References: <4C06D3CE.1030209@gmail.com>
Message-ID: <4C0751D9.5080206@gmx.de>

I suppose there are several ways for completing this task, for example:

x[ index(x) != c("1996-01-09", "1996-01-02" ) ]

Hth
Thomas


Am 02.06.2010 23:57, schrieb Worik:
> How do I delete an element from an XTS?
>
> I can jump through hoops with na.omit as below, but there must be a 
> simpler better way that I just cannot see
>
> cheers
> Worik
>
> > dates <- seq.Date(from=as.Date("1996-01-01"), 
> to=as.Date("1996-01-10"), length.out=10)
> > data <- 1:10
> > x <- xts(data, order.by=dates)
> > x
>            [,1]
> 1996-01-01    1
> 1996-01-02    2
> 1996-01-03    3
> 1996-01-04    4
> 1996-01-05    5
> 1996-01-06    6
> 1996-01-07    7
> 1996-01-08    8
> 1996-01-09    9
> 1996-01-10   10
> > x["1996-01-04"] <- NA
> > x <- na.omit(x)
> > x
>            [,1]
> 1996-01-01    1
> 1996-01-02    2
> 1996-01-03    3
> 1996-01-05    5
> 1996-01-06    6
> 1996-01-07    7
> 1996-01-08    8
> 1996-01-09    9
> 1996-01-10   10
> >
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R 
> questions should go.
>


From milano_amy at yahoo.com  Thu Jun  3 14:36:42 2010
From: milano_amy at yahoo.com (Amy Milano)
Date: Thu, 3 Jun 2010 05:36:42 -0700 (PDT)
Subject: [R-SIG-Finance] CreditMetrics Methodology
Message-ID: <266491.38913.qm@web114418.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100603/95895439/attachment.pl>

From brian at braverock.com  Thu Jun  3 15:47:51 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 03 Jun 2010 08:47:51 -0500
Subject: [R-SIG-Finance] CreditMetrics Methodology
In-Reply-To: <266491.38913.qm@web114418.mail.gq1.yahoo.com>
References: <266491.38913.qm@web114418.mail.gq1.yahoo.com>
Message-ID: <4C07B287.1000800@braverock.com>

On 06/03/2010 07:36 AM, Amy Milano wrote:
> Dear All,
>
> This is my first post to this group. I need some guidance as regards the CreditMetrics. I already have used the Creditmetrics (CRAN) package although I haven't understood it actually.
>
> I am reading  the Technical document of creditmetrics and I am flooded with lots of queries. I will be grateful if someone suggests some blog where these queries can be taken up and discussed or if some other resource can be tried which will help me to understand CreditMetrics methodology.
>
> Knowing the high standard of this forum, I am extremely sorry for raising this topic on this forum, but I am sure this forum can easily guide me.

Amy,

Thank you for your deference, though I didn't think this list was quite that 
stuffy... (I know I've asked some pretty simple questions at times)

I've used the CreditMetrics package in the past to evaluate portfolios of fixed 
income securities, and while it is not as advanced as the functionality 
provided by Intex, it is free and open source.

In general, the technical documentation accompanying CreditMetrics should point 
to academic references for the various techniques provided there.

You can also search the list archives for queries about fixed income valuation. 
  The classic texts by Fabozzi, Hull, etc. should also be good guides.

If you have questions about these techniques after reading the underlying 
references and trying things, those are appropriate for this list or the 
package maintainers.  Ideally, you'll also follow the posting guidelines and 
provide a description of what you're trying to accomplish and the code you've 
tried to get to that point. This helps people help you, and then also helps 
others who come along later to find answers faster.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From Horace.Tso at pgn.com  Fri Jun  4 01:07:27 2010
From: Horace.Tso at pgn.com (Horace Tso)
Date: Thu, 3 Jun 2010 16:07:27 -0700
Subject: [R-SIG-Finance] FinancialInstrument package
Message-ID: <5C3F9922B1D5FB4886B2D2045AB952F304C5AA165D@IPEXMAIL.corp.dom>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100603/876732b5/attachment.pl>

From edd at debian.org  Fri Jun  4 03:36:23 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 3 Jun 2010 20:36:23 -0500
Subject: [R-SIG-Finance] FinancialInstrument package
In-Reply-To: <5C3F9922B1D5FB4886B2D2045AB952F304C5AA165D@IPEXMAIL.corp.dom>
References: <5C3F9922B1D5FB4886B2D2045AB952F304C5AA165D@IPEXMAIL.corp.dom>
Message-ID: <19464.22679.438600.707365@ron.nulle.part>


On 3 June 2010 at 16:07, Horace Tso wrote:
| Folks, I searched and found nothing. What happened to the
| FinancialInstrument package. Blotter seems to depend on it. 

Try 

	https://r-forge.r-project.org/R/?group_id=316

and/or svn.

-- 
  Regards, Dirk


From cmdr_rogue at hotmail.com  Fri Jun  4 11:07:26 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Fri, 04 Jun 2010 05:07:26 -0400
Subject: [R-SIG-Finance] CreditMetrics Methodology
In-Reply-To: <266491.38913.qm@web114418.mail.gq1.yahoo.com>
References: <266491.38913.qm@web114418.mail.gq1.yahoo.com>
Message-ID: <BLU0-SMTP75D6193CE5FA5131701EEE2D20@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100604/738f1022/attachment.pl>

From Christian.Langkamp at basf.com  Fri Jun  4 12:15:16 2010
From: Christian.Langkamp at basf.com (Christian.Langkamp at basf.com)
Date: Fri, 4 Jun 2010 12:15:16 +0200
Subject: [R-SIG-Finance] CreditMetrics Methodology
In-Reply-To: <mailman.3.1275645601.24180.r-sig-finance@stat.math.ethz.ch>
Message-ID: <OF931EE1E7.2FA399B7-ONC1257738.003746F4-C1257738.00385458@basf-c-s.be>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100604/81142a0f/attachment.pl>

From Peter.Brecknock at bp.com  Fri Jun  4 15:35:09 2010
From: Peter.Brecknock at bp.com (Pete B)
Date: Fri, 4 Jun 2010 06:35:09 -0700 (PDT)
Subject: [R-SIG-Finance] Getting quotes for stock options
In-Reply-To: <1275189991428-2236059.post@n4.nabble.com>
References: <1275189991428-2236059.post@n4.nabble.com>
Message-ID: <1275658509127-2243241.post@n4.nabble.com>


Looks like you need to make a few changes to Martin's code

I altered the following in the yahoo.getOption function

Quote.date <- gsub("On |:","",info.raw[sm.pos[1]+1])
Strike.date <- gsub("^ *|</td","",raw[expire[1]+1])

to ....

Quote.date <- gsub("</span","",info.raw[sm.pos[1]+2])
x= sub('Expire at close ([^ ]+)','\\1',raw[expire[1]])
Strike.date <- gsub("^ *|</td","",x)

HTH

Pete
-- 
View this message in context: http://r.789695.n4.nabble.com/Getting-quotes-for-stock-options-tp2236059p2243241.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jeff.a.ryan at gmail.com  Fri Jun  4 16:06:03 2010
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Fri, 4 Jun 2010 09:06:03 -0500
Subject: [R-SIG-Finance] Getting quotes for stock options
In-Reply-To: <1275658509127-2243241.post@n4.nabble.com>
References: <1275189991428-2236059.post@n4.nabble.com>
	<1275658509127-2243241.post@n4.nabble.com>
Message-ID: <AANLkTim0U36wQyP06p1WMjcZ3xvILrEE7oPVzkLcbxl2@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100604/55731f0d/attachment.pl>

From Horace.Tso at pgn.com  Fri Jun  4 18:11:32 2010
From: Horace.Tso at pgn.com (Horace Tso)
Date: Fri, 4 Jun 2010 09:11:32 -0700
Subject: [R-SIG-Finance] FinancialInstrument package
In-Reply-To: <19464.22679.438600.707365@ron.nulle.part>
References: <5C3F9922B1D5FB4886B2D2045AB952F304C5AA165D@IPEXMAIL.corp.dom>
	<19464.22679.438600.707365@ron.nulle.part>
Message-ID: <5C3F9922B1D5FB4886B2D2045AB952F304C5AA18C3@IPEXMAIL.corp.dom>

Dirk, I noticed a flurry of exchanges about blotter on this list, yet it's not been posted on CRAN. Does that mean these five packages (blotter, TradeAnalystics, FinancialInstrument, quantstrat, RTAQ) are not ready for production use?

Thanks for the link.

H 

-----Original Message-----
From: Dirk Eddelbuettel [mailto:edd at debian.org] 
Sent: Thursday, June 03, 2010 6:36 PM
To: Horace Tso
Cc: r-sig-finance at stat.math.ethz.ch
Subject: Re: [R-SIG-Finance] FinancialInstrument package


On 3 June 2010 at 16:07, Horace Tso wrote:
| Folks, I searched and found nothing. What happened to the
| FinancialInstrument package. Blotter seems to depend on it. 

Try 

	https://r-forge.r-project.org/R/?group_id=316

and/or svn.

-- 
  Regards, Dirk


From brian at braverock.com  Fri Jun  4 21:17:58 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 04 Jun 2010 14:17:58 -0500
Subject: [R-SIG-Finance] FinancialInstrument package
In-Reply-To: <5C3F9922B1D5FB4886B2D2045AB952F304C5AA18C3@IPEXMAIL.corp.dom>
References: <5C3F9922B1D5FB4886B2D2045AB952F304C5AA165D@IPEXMAIL.corp.dom>	<19464.22679.438600.707365@ron.nulle.part>
	<5C3F9922B1D5FB4886B2D2045AB952F304C5AA18C3@IPEXMAIL.corp.dom>
Message-ID: <4C095166.9010502@braverock.com>

On 06/04/2010 11:11 AM, Horace Tso wrote:
> Dirk, I noticed a flurry of exchanges about blotter on this list, yet it's not been posted on CRAN. Does that mean these five packages (blotter, TradeAnalystics, FinancialInstrument, quantstrat, RTAQ) are not ready for production use?
>
> Thanks for the link.

TradeAnalytics is the 'project collection', the packages are under that.

blotter, FinancialInstrument, and quantstrat are all under more or less heavy 
development.  I use them on real instruments and portfolios, but they're still 
rough around the edges.  they're not on CRAN yet largely because the interfaces 
may still change, and I'd like to see a little more stability before a CRAN 
release.  With them on R-Forge, they are easy for people to install in their 
current states.  quantstrat and blotter have also prompted several improvements 
in xts and quantmod, and not all of those changes have made it to CRAN yet either.

If you want to use them, I certainly encourage it, but I'd recommend 
communicating extensively with the members of the development team to help 
bring them further along.

FinancialInstrument is the simplest, and arguably most mature, though complex 
instruments have not been modeled, the framework is there to model complex, 
synthetic, and OTC derivative products.

blotter is being worked on, it works well now for multi-instrument, 
multi-currency portfolios, but multi-currency is not completely implemented in 
the account structure.  That will likely be worked out in the next couple of 
weeks.  Jeff has also promised to speed up the portfolio P&L calculations, 
which can be quite slow right now depending on how they are called.

quantstrat needs more examples, and the framework for parameterization of 
strategies needs some work.  It is mature enough to model real high frequency 
strategies, as well as lower frequency strategies.  It would benefit from more 
'library' strategies, and collaboration is encouraged.

RTAQ is for importing and cleaning TAQ data from NYSE, and is fairly mature. 
The documentation is being completed prior to release to CRAN.  I'd like to 
provide some wrappers for the cleaning functions to use them on non-TAQ tick 
data, but I don't know when I'll have time to do that.

Regards,

    - Brian


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From landronimirc at gmail.com  Thu Jun  3 15:27:59 2010
From: landronimirc at gmail.com (Liviu Andronic)
Date: Thu, 3 Jun 2010 14:27:59 +0100
Subject: [R-SIG-Finance] CreditMetrics Methodology
In-Reply-To: <266491.38913.qm@web114418.mail.gq1.yahoo.com>
References: <266491.38913.qm@web114418.mail.gq1.yahoo.com>
Message-ID: <AANLkTinoLYiA0zKpSM4T-j6B0qqjSZ9blytTb1UvAnz8@mail.gmail.com>

Hello Amy

On Thu, Jun 3, 2010 at 1:36 PM, Amy Milano <milano_amy at yahoo.com> wrote:
> Knowing the?high standard?of this forum, I am extremely sorry for raising this topic on this forum, but I am sure this forum can easily guide me.
>
I just did a quick search on rseek [1] and there seem to be very
little hits on the package (including the Blogs tab). Probably best
would be to come up with a reproducible, simple example of what goes
wrong.

Best regards
Liviu

[1]  http://www.rseek.org/?cx=010923144343702598753%3Aboaz1reyxd4&q=creditmetrics&sa=Search+functions%2C+lists%2C+and+more&cof=FORID%3A11&siteurl=rseek.org%2F


From Horace.Tso at pgn.com  Sat Jun  5 00:02:34 2010
From: Horace.Tso at pgn.com (Horace Tso)
Date: Fri, 4 Jun 2010 15:02:34 -0700
Subject: [R-SIG-Finance] getPrice in blotter
Message-ID: <5C3F9922B1D5FB4886B2D2045AB952F304C5BD773D@IPEXMAIL.corp.dom>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100604/c9a7017a/attachment.pl>

From josh.m.ulrich at gmail.com  Sat Jun  5 00:09:08 2010
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Fri, 4 Jun 2010 17:09:08 -0500
Subject: [R-SIG-Finance] getPrice in blotter
In-Reply-To: <5C3F9922B1D5FB4886B2D2045AB952F304C5BD773D@IPEXMAIL.corp.dom>
References: <5C3F9922B1D5FB4886B2D2045AB952F304C5BD773D@IPEXMAIL.corp.dom>
Message-ID: <AANLkTilUk9voI7iE0mjAmdeBmRwkYcJUkNppHqLrF8-g@mail.gmail.com>

It's in the latest revision of quantmod on R-forge.
--
Joshua Ulrich
FOSS Trading: www.fosstrading.com



On Fri, Jun 4, 2010 at 5:02 PM, Horace Tso <Horace.Tso at pgn.com> wrote:
> Folks, thanks to Brian for showing me where to find FI, blotter is now up and running. But just fresh out of the box, i ran into this small error in all three of the example scripts. Seems like the getPrice function has been relocated elsewhere.
>
>> # Add the transactions to the portfolio
>> # if you wanted to avoid the contract multiplier warning, you would add an instrument first
>> addTxns("amzn_port","amzn",TxnData=amzn.trades,verbose=TRUE)
> ? ? ? ? ? ? ? ? ? ?Txn.Qty Txn.Price Txn.Value Txn.Avg.Cost Pos.Qty Pos.Avg.Cost
> 2010-01-14 07:18:50 ? ?-400 ? ?127.49 ? ?-50996 ? ? ? 127.49 ? ?-400 ? ? ? ? ? ?0
> 2010-01-14 07:18:53 ? ? 400 ? ?127.49 ? ? 50996 ? ? ? 127.49 ? ? ? 0 ? ? ? ? ? ?0
> ......
>> # update the portfolio stats
>> updatePortf("amzn_port",Dates="2010-01-14")
> Error in updatePosPL(Portfolio = pname, Symbol = as.character(symbol), ?:
> ?could not find function "getPrice"
>
> I'm on R 2.11.0 with xts 0.7-1, ?and quantmod 0.3-13, just updated couple weeks ago.
>
> Thanks.
>
> H
>
>
>
>
> ====================================================================================
>> sessionInfo()
> R version 2.11.0 (2010-04-22)
> i386-pc-mingw32
>
> locale:
> [1] LC_COLLATE=English_United States.1252 ?LC_CTYPE=English_United States.1252
> [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
> [5] LC_TIME=English_United States.1252
>
> attached base packages:
> [1] grDevices datasets ?splines ? graphics ?stats ? ? tcltk ? ? utils ? ? methods ? base
>
> other attached packages:
> ?[1] blotter_0.5 ? ? ? ? ? ? ? FinancialInstrument_0.0.2 quantmod_0.3-13
> ?[4] TTR_0.20-2 ? ? ? ? ? ? ? ?Defaults_1.1-1 ? ? ? ? ? ?xts_0.7-1
> ?[7] zoo_1.6-3 ? ? ? ? ? ? ? ? svSocket_0.9-48 ? ? ? ? ? TinnR_1.0.3
> [10] R2HTML_2.1 ? ? ? ? ? ? ? ?Hmisc_3.8-0 ? ? ? ? ? ? ? survival_2.35-8
>
> loaded via a namespace (and not attached):
> [1] cluster_1.12.3 grid_2.11.0 ? ?lattice_0.18-5 svMisc_0.9-57 ?tools_2.11.0
>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From brian at braverock.com  Sat Jun  5 00:23:35 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 04 Jun 2010 17:23:35 -0500
Subject: [R-SIG-Finance] getPrice in blotter
In-Reply-To: <5C3F9922B1D5FB4886B2D2045AB952F304C5BD773D@IPEXMAIL.corp.dom>
References: <5C3F9922B1D5FB4886B2D2045AB952F304C5BD773D@IPEXMAIL.corp.dom>
Message-ID: <4C097CE7.1040500@braverock.com>

On 06/04/2010 05:02 PM, Horace Tso wrote:
> Folks, thanks to Brian for showing me where to find FI, blotter is now up and running. But just fresh out of the box, i ran into this small error in all three of the example scripts. Seems like the getPrice function has been relocated elsewhere.
>
>> # Add the transactions to the portfolio
>> # if you wanted to avoid the contract multiplier warning, you would add an instrument first
>> addTxns("amzn_port","amzn",TxnData=amzn.trades,verbose=TRUE)
>                      Txn.Qty Txn.Price Txn.Value Txn.Avg.Cost Pos.Qty Pos.Avg.Cost
> 2010-01-14 07:18:50    -400    127.49    -50996       127.49    -400            0
> 2010-01-14 07:18:53     400    127.49     50996       127.49       0            0
> ......
>> # update the portfolio stats
>> updatePortf("amzn_port",Dates="2010-01-14")
> Error in updatePosPL(Portfolio = pname, Symbol = as.character(symbol),  :
>    could not find function "getPrice"
>
> I'm on R 2.11.0 with xts 0.7-1,  and quantmod 0.3-13, just updated couple weeks ago.

Per my last message, some of the required functions are in quantmod and not yet 
on CRAN.  You need to install quantmod from R-Forge SVN, getPrice is in quantmod.

Regards,

  - Brian

> Thanks.
>
> H
>
>
>
>
> ====================================================================================
>> sessionInfo()
> R version 2.11.0 (2010-04-22)
> i386-pc-mingw32
>
> locale:
> [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252
> [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
> [5] LC_TIME=English_United States.1252
>
> attached base packages:
> [1] grDevices datasets  splines   graphics  stats     tcltk     utils     methods   base
>
> other attached packages:
>   [1] blotter_0.5               FinancialInstrument_0.0.2 quantmod_0.3-13
>   [4] TTR_0.20-2                Defaults_1.1-1            xts_0.7-1
>   [7] zoo_1.6-3                 svSocket_0.9-48           TinnR_1.0.3
> [10] R2HTML_2.1                Hmisc_3.8-0               survival_2.35-8
>
> loaded via a namespace (and not attached):
> [1] cluster_1.12.3 grid_2.11.0    lattice_0.18-5 svMisc_0.9-57  tools_2.11.0
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From cchien at alumni.poly.edu  Sat Jun  5 04:03:06 2010
From: cchien at alumni.poly.edu (JOSH C. CHIEN)
Date: Fri, 4 Jun 2010 19:03:06 -0700 (PDT)
Subject: [R-SIG-Finance] About timeDate Problem
Message-ID: <358756.27867.qm@web113103.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100604/42b532ac/attachment.pl>

From v8extra at gmail.com  Sat Jun  5 16:04:56 2010
From: v8extra at gmail.com (=?iso-8859-1?Q?S=E9bastien_Durand?=)
Date: Sat, 5 Jun 2010 10:04:56 -0400
Subject: [R-SIG-Finance] Existing packages for personal finance and OFX
	importation
Message-ID: <A510BA4E-C968-4A46-8AD8-6BAA620476DA@gmail.com>

Hello to all,

I got my mind into it did some search and comparison I got myself decided to do the following :

I want to build a package for personal finance : 

-In this package I wish to be able to :
	-Read OFX data
	-Recognize transaction
	-Setup a budget through the use of buckets or envelope through time
	-Have cashflow plotting methods
	-This package will be able to utilise data from multiple accounts

My first question is quite simple:  
	Is there a package that can already do what plan to build ?

My second question is: 
	Is there a package that can simply import OFX data ?

Thanks a lot!

S?bastien


From cmdr_rogue at hotmail.com  Sun Jun  6 05:33:32 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Sat, 05 Jun 2010 23:33:32 -0400
Subject: [R-SIG-Finance] Existing packages for personal finance and OFX
 importation
In-Reply-To: <A510BA4E-C968-4A46-8AD8-6BAA620476DA@gmail.com>
References: <A510BA4E-C968-4A46-8AD8-6BAA620476DA@gmail.com>
Message-ID: <BLU0-SMTP845F1245A6CC6787CFA3E2E2D40@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100605/7b7af2d0/attachment.pl>

From J_Cuisinier at hotmail.com  Sun Jun  6 09:41:26 2010
From: J_Cuisinier at hotmail.com (julien cuisinier)
Date: Sun, 6 Jun 2010 09:41:26 +0200
Subject: [R-SIG-Finance] Existing packages for personal finance and OFX
	importation
In-Reply-To: <A510BA4E-C968-4A46-8AD8-6BAA620476DA@gmail.com>
References: <A510BA4E-C968-4A46-8AD8-6BAA620476DA@gmail.com>
Message-ID: <BLU0-SMTP95AE5431DA2BA3D7143B048FD40@phx.gbl>

Hi Sebastien,



Adding my 2 cents, for OFX data (Oanda FX data I suppose), quantmod  
package as a utility to download those data (among others data sources)

Think there are other possibilities for this specific purpose (OFX  
data download), but for having tried quantmod myself I would recommend  
it (a very good job from Jeff Ryan) + it has some charting  
capabilities that might get you off the ground for what you want (not  
sure what it is) + it is based on XTS which is a very convenient time  
series handling package (again thank you Mr Ryan & Ulrich)


HTH


Rgds,
Julien




On Jun 5, 2010, at 4:04 PM, S?bastien Durand wrote:

> Hello to all,
>
> I got my mind into it did some search and comparison I got myself  
> decided to do the following :
>
> I want to build a package for personal finance :
>
> -In this package I wish to be able to :
> 	-Read OFX data
> 	-Recognize transaction
> 	-Setup a budget through the use of buckets or envelope through time
> 	-Have cashflow plotting methods
> 	-This package will be able to utilise data from multiple accounts
>
> My first question is quite simple:
> 	Is there a package that can already do what plan to build ?
>
> My second question is:
> 	Is there a package that can simply import OFX data ?
>
> Thanks a lot!
>
> S?bastien
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R  
> questions should go.
>


From edd at debian.org  Sun Jun  6 14:12:19 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 6 Jun 2010 07:12:19 -0500
Subject: [R-SIG-Finance] Existing packages for personal finance and OFX
 importation
In-Reply-To: <BLU0-SMTP845F1245A6CC6787CFA3E2E2D40@phx.gbl>
References: <A510BA4E-C968-4A46-8AD8-6BAA620476DA@gmail.com>
	<BLU0-SMTP845F1245A6CC6787CFA3E2E2D40@phx.gbl>
Message-ID: <19467.37027.102685.653704@ron.nulle.part>


On 5 June 2010 at 23:33, Sarbo wrote:
| 1. Probably a silly question, but what's OFX? Overseas foreign exchange
| rates?

See http://www.ofx.net/ which comes up as the first Google hit for OFX.
It is a format to describe transactions.

-- 
  Regards, Dirk


From brian at braverock.com  Sun Jun  6 14:36:08 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 06 Jun 2010 07:36:08 -0500
Subject: [R-SIG-Finance] Existing packages for personal finance and OFX
 importation
In-Reply-To: <A510BA4E-C968-4A46-8AD8-6BAA620476DA@gmail.com>
References: <A510BA4E-C968-4A46-8AD8-6BAA620476DA@gmail.com>
Message-ID: <4C0B9638.8050905@braverock.com>

On 06/05/2010 09:04 AM, S?bastien Durand wrote:
> Hello to all,
>
> I got my mind into it did some search and comparison I got myself decided to do the following :
>
> I want to build a package for personal finance :
>
> -In this package I wish to be able to :
> 	-Read OFX data

Assuming we're talking about:

http://www.ofx.net/

as identified by Dirk, this is an XML format.

RSiteSearch("OFX")

returns zero hits.

... so the first thing to try would be to use the XML package by Duncan to see 
if you can parse the DTD and and parse the files into R.

Then there will likely be some work in figuring out what you want the data 
structures to look like just for handling the input data. I would recommend 
documenting and packaging the OFX parser as a separate R package, it feels like 
a standalone package.

> 	-Recognize transaction

Packages like blotter can do this, though you'd also need to identify the 
instruments that you are having transactions on.  For 'personal finance' I 
assume that this would include things like cash (various currency balances), 
stocks, bonds, mutual funds, etc.  All of these should be easy enough to model 
in FinancialInstrument so the transactions will then make sense and add up in 
blotter.

> 	-Setup a budget through the use of buckets or envelope through time
> 	-Have cashflow plotting methods

There's not enough information on these two for me to understand what you want 
to do.  There are various methods for handling portfolio rebalancing and 
optimization in R already, and of course plenty of plotting methods.  If we're 
still talking about transactions and portfolios, blotter can handle a lot of this.

> 	-This package will be able to utilise data from multiple accounts

layered account/portfolio structure is handled by blotter.

> My first question is quite simple:
> 	Is there a package that can already do what plan to build ?

Parts of it, see above.

> My second question is:
> 	Is there a package that can simply import OFX data ?


I think the OFX part is the part not covered, but if you're lucky, Duncan's XML 
package will do most of the heavy lifting of parsing the files per the DTD and 
getting them into R.  Your work would be in sorting that into R objects for 
further manipulation, and then passing the transactions on to the blotter.


> Thanks a lot!
>
> S?bastien
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From edd at debian.org  Sun Jun  6 14:51:12 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 6 Jun 2010 07:51:12 -0500
Subject: [R-SIG-Finance] Existing packages for personal finance and OFX
 importation
In-Reply-To: <4C0B9638.8050905@braverock.com>
References: <A510BA4E-C968-4A46-8AD8-6BAA620476DA@gmail.com>
	<4C0B9638.8050905@braverock.com>
Message-ID: <19467.39360.487993.196122@ron.nulle.part>


On 6 June 2010 at 07:36, Brian G. Peterson wrote:
| On 06/05/2010 09:04 AM, S?bastien Durand wrote:
| > -In this package I wish to be able to :
| > 	-Read OFX data
| 
| Assuming we're talking about:
| 
| http://www.ofx.net/
| 
| as identified by Dirk, this is an XML format.
| 
| RSiteSearch("OFX")
| 
| returns zero hits.

Yes but that doesn't mean there's no open source support for it. Just looking
at what my Debian box knows:

edd at ron:~$ apt-cache search ofx
gnucash-docs - Documentation for gnucash, a personal finance tracking program
gnucash-common - A personal finance and money tracking program
grisbi - personal finance management program
homebank-data - Data files for homebank
homebank - Manage your personal accounts at home
aqbanking-tools - basic command line homebanking utilities
libaqbanking-data - configuration files for libaqbanking
libaqbanking-doc - library for online banking applications
libaqbanking-plugins-libgwenhywfar47 - library for online banking applications plugins to libgwenhywfar
libaqbanking29-dbg - library for online banking applications - debug symbols
libaqbanking29-dev - library for online banking applications
libaqbanking29-plugins-qt4 - Qt 4 plugins needed by libaqbanking29
libaqbanking29-plugins-qt - plugins needed by libaqbanking29
libaqbanking29-plugins - plugins needed by libaqbanking29
libaqbanking29 - library for online banking applications
libaqofxconnect5 - library for OFX online banking
libofx-dev - development package for libofx2c2a
libofx4 - library to support Open Financial Exchange
ofx - Open Financial Exchange programs
gnucash-dbg - Debugging symbols for Gnucash
gnucash - A personal finance and money tracking program
skrooge - personal finance manager for KDE
edd at ron:~$ 

I can foresee e.g. a Google Summer of Code 2011 project about writing a
binding to one of those libraries.

That said, someone could of course do it earlier too.

| ... so the first thing to try would be to use the XML package by Duncan to see 
| if you can parse the DTD and and parse the files into R.
| 
| Then there will likely be some work in figuring out what you want the data 
| structures to look like just for handling the input data. I would recommend 
| documenting and packaging the OFX parser as a separate R package, it feels like 
| a standalone package.

Agreed. See above.

This could be of course as a data feeder to blotter et al. 

-- 
  Regards, Dirk


From guygreen at netvigator.com  Sun Jun  6 15:24:12 2010
From: guygreen at netvigator.com (Guy Green)
Date: Sun, 6 Jun 2010 06:24:12 -0700 (PDT)
Subject: [R-SIG-Finance] About timeDate Problem
In-Reply-To: <358756.27867.qm@web113103.mail.gq1.yahoo.com>
References: <358756.27867.qm@web113103.mail.gq1.yahoo.com>
Message-ID: <1275830652116-2244985.post@n4.nabble.com>


I may be missing something on this, but it seems timeDate is quite difficult
to work with.  For example, the following code shows some dates working, and
others not, but it is hard to see what the difference is except that
timeDate has difficulty dealing with single digit dates:

timeDate("6/7/2010", format = "%m/%d/%Y")  #works fine
timeDate("5/28/2010", format = "%m/%d/%Y")  #works fine
timeDate(c("6/7/2010", "5/28/2010"), format = "%m/%d/%Y")  #doesn't work.  I
have no idea why the dates work on their own (above), but not together.
timeDate(c("06/07/2010", "05/28/2010"), format = "%m/%d/%Y")  #works - so
the single/double issue seems to be the cause of the problem
timeDate(c("06-07-2010", "05-28-2010"), format = "%m-%d-%Y")  #works fine

Could you just use as.Date?  Does this get you what you wanted?

date <- read.csv("D:/date.csv",header=T,sep=",")
date2 = as.Date(date$Date, format = "%m/%d/%Y")
date2

Guy
-- 
View this message in context: http://r.789695.n4.nabble.com/About-timeDate-Problem-tp2243951p2244985.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From cmdr_rogue at hotmail.com  Sun Jun  6 15:29:07 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Sun, 06 Jun 2010 09:29:07 -0400
Subject: [R-SIG-Finance] About timeDate Problem
In-Reply-To: <1275830652116-2244985.post@n4.nabble.com>
References: <358756.27867.qm@web113103.mail.gq1.yahoo.com>
	<1275830652116-2244985.post@n4.nabble.com>
Message-ID: <BLU0-SMTP4466AEB6615642A11085BFE2D40@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100606/ca586213/attachment.pl>

From ymoser at gmail.com  Mon Jun  7 13:48:53 2010
From: ymoser at gmail.com (Yaakov Moser)
Date: Mon, 07 Jun 2010 14:48:53 +0300
Subject: [R-SIG-Finance] Finding an efficient portfolio with a given risk
Message-ID: <4C0CDCA5.20805@gmail.com>

Hi all,

I need to find a portfolio on the efficient frontier for a set (defined) 
risk level,
given that I have a returns and a variance-covariance matrix for a set 
of assets.
This is complicated by the fact that there may be constraints on the 
assets, eg no short selling,
and possibly others which may be more restrictive (eg asset one has to 
between 10% and 50%).

As far as I know, this functionality is not (yet?) supported by fPorfolio.
Are there any packages that do support it?
Any examples would be very helpful.

Thanks

Yaakov Moser


From brian at braverock.com  Mon Jun  7 13:58:15 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 07 Jun 2010 06:58:15 -0500
Subject: [R-SIG-Finance] Finding an efficient portfolio with a given risk
In-Reply-To: <4C0CDCA5.20805@gmail.com>
References: <4C0CDCA5.20805@gmail.com>
Message-ID: <4C0CDED7.8050102@braverock.com>

On 06/07/2010 06:48 AM, Yaakov Moser wrote:
> Hi all,
>
> I need to find a portfolio on the efficient frontier for a set (defined)
> risk level, given that I have a returns and a variance-covariance matrix for a set
> of assets.
> This is complicated by the fact that there may be constraints on the
> assets, eg no short selling, and possibly others which may be more restrictive
 > (eg asset one has to between 10% and 50%).
>
> As far as I know, this functionality is not (yet?) supported by fPorfolio.
> Are there any packages that do support it?
> Any examples would be very helpful.

You are specifying 'box constraints', and these can be constructed in standard 
quadprog.

for fPortfolio, see Diethelm's Portfolio Optimization book, page 200 and 225.

you can also use PortfolioAnalytics, though that sounds like overkill for your 
problem.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From milano_amy at yahoo.com  Mon Jun  7 14:24:13 2010
From: milano_amy at yahoo.com (Amy Milano)
Date: Mon, 7 Jun 2010 05:24:13 -0700 (PDT)
Subject: [R-SIG-Finance] CreditMetrics - Bivariate Normal Distribution
	Probabilities
Message-ID: <499036.28058.qm@web114403.mail.gq1.yahoo.com>

Hi!

Here is one small clarification I am seeking regarding the Portfolio probability distribution (where no of Obligors are 2). It is the classical example as given in the CreditMetrics document.

BOND "BBB"

Possible Migrations ?? AAA?? ?? AA ?? ??? A ? ? ?? BBB?????? BB????? B ? ??? CCC????? Default

Probabilities(%) ? ? ???? 0.02 ? ? 0.33 ??? 5.95 ? ?? 86.93 ? ? 5.30 ?? 1.17 ??? 0.12? ???? 0.18 ????????? 

Year End
 values*?????? 109.37? 109.19? 108.66? 107.55?? 105.02? 98.10? 83.64??? 51.13


Mean(BBB)? =? 107.09 (= mu1)
sd(BBB)???? =?????? 2.99 (= sd1)

* These are the values taken by BBB bond after migrating to respective ratings after 1 year.

Similarly for Bond "A"

Possible Migrations ?? AAA?? ?? AA ?? ??? A ? ? ?? BBB????? BB?????? B ? ??? CCC????? Default


Probabilities(%) ? ? ???? 0.09 ?? ? 2.27 ?? 91.05? ???? 5.52 ??? 0.74 ??? 0.26?? ? ? 0.01? ???? 0.06 ????????? 

Year End values*?????? 106.59? 106.49? 106.30? 105.64?? 103.15? 101.39??? 78.71??? 51.13



Mean(A)?? =?? 106.55 (= mu2)
sd(A)?? =?? 1.49 ? ? ??? (= sd2) 



#### Case 1 :- The correlation between BBB and A is 0.

So Probability that after 1 year, BBB will remain BBB and A will remain A is 0.8693*0.9105 = 0.7915



#### Case 2 : Let the correlation between BBB and A is 0.30 (= r )

So Probability that after 1 year, BBB will remain BBB and A will remain A = 0.7969


I have tried to arrive at this value but somehow I am missing something. I have used the following formula (assuming the normalized returns on two assets BBB and A)


p(BBB, A) = 1/[2*pi*sd1*sd2*sqrt(1-r^2)] * [exp (-z / 2*(1 - r^2))] where 

z = ((x1-mu1)/sd1)^2 + ((x2 - mu2)/sd2)^2 - 2 * r * (x1-m1)/sd1 * (x2-mu2) / sd2

(formula available at http://mathworld.wolfram.com/BivariateNormalDistribution.html)


I have taken x1 = 107.55 and x2 = 106.30 and the probability value I arrive at using above formula = 0.03612

The actual answer is 79.69% i.e. 0.7969 as given in the Creditmetrics technical document (page 26 - table 1.7).


I am held up at this particular point. I will be grateful if someone can guides me. Also I am not sure I will be able to attach the excel file with this mail, but nevertheless I am trying the same. I sincerely apologize for writing such a long
 mail.


Regards

Milano














      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100607/2a48ea9b/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: biv_prob.xls
Type: application/vnd.ms-excel
Size: 32256 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100607/2a48ea9b/attachment.xls>

From anand.chirag at gmail.com  Tue Jun  8 08:43:28 2010
From: anand.chirag at gmail.com (Chirag Anand)
Date: Tue, 8 Jun 2010 12:13:28 +0530
Subject: [R-SIG-Finance] About timeDate Problem
In-Reply-To: <1275830652116-2244985.post@n4.nabble.com>
References: <358756.27867.qm@web113103.mail.gq1.yahoo.com>
	<1275830652116-2244985.post@n4.nabble.com>
Message-ID: <201006081213.28870.anand.chirag@gmail.com>

On Sunday 06 Jun 2010 6:54:12 pm Guy Green wrote:
> I may be missing something on this, but it seems timeDate is quite
>  difficult to work with.  For example, the following code shows some dates
>  working, and others not, but it is hard to see what the difference is
>  except that timeDate has difficulty dealing with single digit dates:
> 
> timeDate("6/7/2010", format = "%m/%d/%Y")  #works fine
> timeDate("5/28/2010", format = "%m/%d/%Y")  #works fine
> timeDate(c("6/7/2010", "5/28/2010"), format = "%m/%d/%Y")  #doesn't work. 
>  I have no idea why the dates work on their own (above), but not together.
>  timeDate(c("06/07/2010", "05/28/2010"), format = "%m/%d/%Y")  #works - so
>  the single/double issue seems to be the cause of the problem
> timeDate(c("06-07-2010", "05-28-2010"), format = "%m-%d-%Y")  #works fine
> 
> Could you just use as.Date?  Does this get you what you wanted?
> 
> date <- read.csv("D:/date.csv",header=T,sep=",")
> date2 = as.Date(date$Date, format = "%m/%d/%Y")
> date2
 
If you still wants to use timeDate class, you can convert from Date class:
  dateNew <- as.timeDate(date2)
  dateNew
 
Probably, it has difficulty dealing with string of characters but from vector of "Date", 
it works fine.
 
-- 
Regards
Chirag Anand


From nelson.ana at gmail.com  Tue Jun  8 14:42:44 2010
From: nelson.ana at gmail.com (Ana Nelson)
Date: Tue, 8 Jun 2010 13:42:44 +0100 (IST)
Subject: [R-SIG-Finance] Rbloomberg JavaAPI
In-Reply-To: <13CB99597D0BAA43B07ABFCE29E45F6B02EECE97@phx0mbx01.kochind.com>
Message-ID: <5874481.01276000962586.JavaMail.ana@Ana-Nelsons-MacBook.local>

Hi, Kent,

Sorry for the delay in replying to you!

Is the file at C:\blp\API\blpapi3.jar?

If not can you take a look and let me know the full path to the file?

Also, you might try updating your Bloomberg version 3 API if that's possible, it might then place it in the standard install location. You can do this from within Bloomberg. I think the earliest versions installed the file in non-standard places, so upgrading might fix this.

Regards,
Ana



----- Original Message -----
From: "Kent Voss" <VOSSK at kochind.com>
To: r-sig-finance at stat.math.ethz.ch
Sent: Wednesday, 2 June, 2010 15:58:30 GMT +00:00 GMT Britain, Ireland, Portugal
Subject: [R-SIG-Finance] Rbloomberg JavaAPI

Ana,

RBloomberg kindly asked me to inform you that my "blpapi3.jar" file is
in "c:\blp\API" root directory, and not in the "\SPIv3\JavaAPI" sub
directory.  I'm not sure if this is the standard install, but if not,
please let me know what I need to move in order to get it working (I'm
not a Java programmer, so please excuse my ignorance on the matter). 

Thanks,

Kent Voss


	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From VOSSK at kochind.com  Tue Jun  8 21:41:08 2010
From: VOSSK at kochind.com (Voss, Kent)
Date: Tue, 8 Jun 2010 12:41:08 -0700
Subject: [R-SIG-Finance] Rbloomberg JavaAPI
In-Reply-To: <5874481.01276000962586.JavaMail.ana@Ana-Nelsons-MacBook.local>
References: <13CB99597D0BAA43B07ABFCE29E45F6B02EECE97@phx0mbx01.kochind.com>
	<5874481.01276000962586.JavaMail.ana@Ana-Nelsons-MacBook.local>
Message-ID: <13CB99597D0BAA43B07ABFCE29E45F6B02EECEE6@phx0mbx01.kochind.com>

Ana,

Yes, when I downloaded the API from the Bloomberg website (not in the
terminal, but at:  http://about.bloomberg.com/software/index.html) it
put the jar file at "C:\blp\API\blpapi3.jar".  Now when I download it
from the terminal (WAPI <GO>), I downloaded the SDK (as opposed to the
BBComm and API Tools download from the website),  it has now put it in
the path "C:\blp\API\APIv3\JavaAPI\v3.3.1.1\lib\blpapi3.jar".  Either
way, I realized through your documentation that I could direct the
blpConnect() function to where the .jar file was, and that got it
working.

Thanks for your effort in converting the interface out of the
RDCOMClient interface, it is much cleaner and so far more reliable.

Kent

-----Original Message-----
From: Ana Nelson [mailto:nelson.ana at gmail.com] 
Sent: Tuesday, June 08, 2010 5:43 AM
To: Voss, Kent
Cc: r-sig-finance at stat.math.ethz.ch
Subject: Re: [R-SIG-Finance] Rbloomberg JavaAPI

Hi, Kent,

Sorry for the delay in replying to you!

Is the file at C:\blp\API\blpapi3.jar?

If not can you take a look and let me know the full path to the file?

Also, you might try updating your Bloomberg version 3 API if that's
possible, it might then place it in the standard install location. You
can do this from within Bloomberg. I think the earliest versions
installed the file in non-standard places, so upgrading might fix this.

Regards,
Ana



----- Original Message -----
From: "Kent Voss" <VOSSK at kochind.com>
To: r-sig-finance at stat.math.ethz.ch
Sent: Wednesday, 2 June, 2010 15:58:30 GMT +00:00 GMT Britain, Ireland,
Portugal
Subject: [R-SIG-Finance] Rbloomberg JavaAPI

Ana,

RBloomberg kindly asked me to inform you that my "blpapi3.jar" file is
in "c:\blp\API" root directory, and not in the "\SPIv3\JavaAPI" sub
directory.  I'm not sure if this is the standard install, but if not,
please let me know what I need to move in order to get it working (I'm
not a Java programmer, so please excuse my ignorance on the matter). 

Thanks,

Kent Voss


	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.


From Heiko-Mayer at gmx.de  Tue Jun  8 22:02:10 2010
From: Heiko-Mayer at gmx.de (Heiko Mayer)
Date: Tue, 08 Jun 2010 22:02:10 +0200
Subject: [R-SIG-Finance] Finding an efficient portfolio with a given risk
In-Reply-To: <4C0CDCA5.20805@gmail.com>
References: <4C0CDCA5.20805@gmail.com>
Message-ID: <20100608200210.122310@gmx.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100608/ecad53a7/attachment.pl>

From daniele.amberti at ors.it  Wed Jun  9 12:30:19 2010
From: daniele.amberti at ors.it (Daniele Amberti)
Date: Wed, 9 Jun 2010 12:30:19 +0200
Subject: [R-SIG-Finance] Finding an efficient portfolio with a
Message-ID: <5C57984CA179A247803E12AAB0F7ABA66B240216B3@adorsmail01.ors.local>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100609/1fa27deb/attachment.pl>

From nguyen.h.khanh at gmail.com  Wed Jun  9 19:27:30 2010
From: nguyen.h.khanh at gmail.com (Khanh Nguyen)
Date: Wed, 9 Jun 2010 13:27:30 -0400
Subject: [R-SIG-Finance] RFC - Limit Order Book Package
In-Reply-To: <4C0FC8F5.8090206@williams.edu>
References: <4C0FC8F5.8090206@williams.edu>
Message-ID: <AANLkTikoYLFfT2SaNqxDqwqDmZnmrbnIBHJ1AVTqxcIK@mail.gmail.com>

Hello,

I am working with Andraw Liu, under the supervision of David Kane and
Jeff Enos ("backtest" and "portfolio" packages) to create a Limit
Order Book package that will model a limit order book.

Our initial version of the package is on R-Forge at
https://r-forge.r-project.org/projects/limitob/

We would appreciate suggestions and comments as to what functionality
the package should have. Currently, we have implemented the following
functions

--- "show", "summary", "plot", "display",
--- "best.bid", "best.ask",
--- "bid.price.levels", "ask.price.levels", "total.price.levels",
--- "bid.orders", "ask.orders", "total.orders",
--- "mid.point", "inside.market", "spread", "snapshot",
---  "add.order", "remove.order", "replace.order", "market.order"

Additionally, we were wondering what a good name for the package would
be--Limit Order Book sounds kind of clunky and we were thinking that
maybe "order.book", "orderbook", "limitorderbook",  simply "lob" would
work better. Suggestions on that would be helpful too!

We will summarize any responses we receive and send an email to the
listserv in a week.

Regards,

Andrew and Khanh


From daniel.cegielka at gmail.com  Wed Jun  9 20:08:15 2010
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Wed, 9 Jun 2010 20:08:15 +0200
Subject: [R-SIG-Finance] RFC - Limit Order Book Package
In-Reply-To: <AANLkTikoYLFfT2SaNqxDqwqDmZnmrbnIBHJ1AVTqxcIK@mail.gmail.com>
References: <4C0FC8F5.8090206@williams.edu>
	<AANLkTikoYLFfT2SaNqxDqwqDmZnmrbnIBHJ1AVTqxcIK@mail.gmail.com>
Message-ID: <AANLkTim5eAGwh8zDVI2DfOWHNyhkt_zj48VIa_23CGOY@mail.gmail.com>

Hi
It's interesting. Jeff Ryan plan to add Order Book in to IBrokers package.

http://code.google.com/p/ibrokers/source/browse/trunk/WISHLIST

In quantstrat package you can find some "??order book??" for
placeOrder() function. I think it will be nice if this limitob could
be easily integrated with this kind off packages.

https://r-forge.r-project.org/scm/viewvc.php/pkg/quantstrat/R/orders.R?view=markup&revision=332&root=blotter

regards,
daniel



2010/6/9 Khanh Nguyen <nguyen.h.khanh at gmail.com>:
> Hello,
>
> I am working with Andraw Liu, under the supervision of David Kane and
> Jeff Enos ("backtest" and "portfolio" packages) to create a Limit
> Order Book package that will model a limit order book.
>
> Our initial version of the package is on R-Forge at
> https://r-forge.r-project.org/projects/limitob/
>
> We would appreciate suggestions and comments as to what functionality
> the package should have. Currently, we have implemented the following
> functions
>
> --- "show", "summary", "plot", "display",
> --- "best.bid", "best.ask",
> --- "bid.price.levels", "ask.price.levels", "total.price.levels",
> --- "bid.orders", "ask.orders", "total.orders",
> --- "mid.point", "inside.market", "spread", "snapshot",
> --- ?"add.order", "remove.order", "replace.order", "market.order"
>
> Additionally, we were wondering what a good name for the package would
> be--Limit Order Book sounds kind of clunky and we were thinking that
> maybe "order.book", "orderbook", "limitorderbook", ?simply "lob" would
> work better. Suggestions on that would be helpful too!
>
> We will summarize any responses we receive and send an email to the
> listserv in a week.
>
> Regards,
>
> Andrew and Khanh
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From daniel.cegielka at gmail.com  Wed Jun  9 20:14:52 2010
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Wed, 9 Jun 2010 20:14:52 +0200
Subject: [R-SIG-Finance] RFC - Limit Order Book Package
In-Reply-To: <AANLkTim5eAGwh8zDVI2DfOWHNyhkt_zj48VIa_23CGOY@mail.gmail.com>
References: <4C0FC8F5.8090206@williams.edu>
	<AANLkTikoYLFfT2SaNqxDqwqDmZnmrbnIBHJ1AVTqxcIK@mail.gmail.com> 
	<AANLkTim5eAGwh8zDVI2DfOWHNyhkt_zj48VIa_23CGOY@mail.gmail.com>
Message-ID: <AANLkTimxinHj4eUIW1zAtO8mEBJwYscrQUlQj59hlvKq@mail.gmail.com>

Sample Order Book code you can find in QuickFAST package (FIX protocol engine).

http://code.google.com/p/quickfast/source/browse/branches/?r=145#branches/OrderBook/src/OrderBook

daniel



W dniu 9 czerwca 2010 20:08 u?ytkownik Daniel Cegie?ka
<daniel.cegielka at gmail.com> napisa?:
> Hi
> It's interesting. Jeff Ryan plan to add Order Book in to IBrokers package.
>
> http://code.google.com/p/ibrokers/source/browse/trunk/WISHLIST
>
> In quantstrat package you can find some "??order book??" for
> placeOrder() function. I think it will be nice if this limitob could
> be easily integrated with this kind off packages.
>
> https://r-forge.r-project.org/scm/viewvc.php/pkg/quantstrat/R/orders.R?view=markup&revision=332&root=blotter
>
> regards,
> daniel
>
>
>
> 2010/6/9 Khanh Nguyen <nguyen.h.khanh at gmail.com>:
>> Hello,
>>
>> I am working with Andraw Liu, under the supervision of David Kane and
>> Jeff Enos ("backtest" and "portfolio" packages) to create a Limit
>> Order Book package that will model a limit order book.
>>
>> Our initial version of the package is on R-Forge at
>> https://r-forge.r-project.org/projects/limitob/
>>
>> We would appreciate suggestions and comments as to what functionality
>> the package should have. Currently, we have implemented the following
>> functions
>>
>> --- "show", "summary", "plot", "display",
>> --- "best.bid", "best.ask",
>> --- "bid.price.levels", "ask.price.levels", "total.price.levels",
>> --- "bid.orders", "ask.orders", "total.orders",
>> --- "mid.point", "inside.market", "spread", "snapshot",
>> --- ?"add.order", "remove.order", "replace.order", "market.order"
>>
>> Additionally, we were wondering what a good name for the package would
>> be--Limit Order Book sounds kind of clunky and we were thinking that
>> maybe "order.book", "orderbook", "limitorderbook", ?simply "lob" would
>> work better. Suggestions on that would be helpful too!
>>
>> We will summarize any responses we receive and send an email to the
>> listserv in a week.
>>
>> Regards,
>>
>> Andrew and Khanh
>>
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>


From rforler at uchicago.edu  Wed Jun  9 21:16:02 2010
From: rforler at uchicago.edu (Rob Forler)
Date: Wed, 9 Jun 2010 14:16:02 -0500
Subject: [R-SIG-Finance] RFC - Limit Order Book Package
In-Reply-To: <AANLkTikoYLFfT2SaNqxDqwqDmZnmrbnIBHJ1AVTqxcIK@mail.gmail.com>
References: <4C0FC8F5.8090206@williams.edu>
	<AANLkTikoYLFfT2SaNqxDqwqDmZnmrbnIBHJ1AVTqxcIK@mail.gmail.com>
Message-ID: <AANLkTikR7iAfAP8ytspBclWxiHnyEl9vN48Ogco6r3CU@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100609/f96b6882/attachment.pl>

From jeff.a.ryan at gmail.com  Wed Jun  9 22:00:23 2010
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Wed, 9 Jun 2010 15:00:23 -0500
Subject: [R-SIG-Finance] RFC - Limit Order Book Package
In-Reply-To: <AANLkTikoYLFfT2SaNqxDqwqDmZnmrbnIBHJ1AVTqxcIK@mail.gmail.com>
References: <4C0FC8F5.8090206@williams.edu>
	<AANLkTikoYLFfT2SaNqxDqwqDmZnmrbnIBHJ1AVTqxcIK@mail.gmail.com>
Message-ID: <AANLkTikKRwKxAZZPfIsindiVIf08mtZqvuwyUA0yxoXl@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100609/f814cbd7/attachment.pl>

From patrick at burns-stat.com  Thu Jun 10 10:43:42 2010
From: patrick at burns-stat.com (Patrick Burns)
Date: Thu, 10 Jun 2010 09:43:42 +0100
Subject: [R-SIG-Finance] RFC - Limit Order Book Package
In-Reply-To: <AANLkTikKRwKxAZZPfIsindiVIf08mtZqvuwyUA0yxoXl@mail.gmail.com>
References: <4C0FC8F5.8090206@williams.edu>	<AANLkTikoYLFfT2SaNqxDqwqDmZnmrbnIBHJ1AVTqxcIK@mail.gmail.com>
	<AANLkTikKRwKxAZZPfIsindiVIf08mtZqvuwyUA0yxoXl@mail.gmail.com>
Message-ID: <4C10A5BE.4050101@burns-stat.com>

I think Jeff's points are on topic in that
having the best financial toys to play with
is in all of our interests.

I'm quite neutral on the subject.  My code is
S3, but so it can be compatible with S-PLUS.
A priori I think Jeff's opinions are likely
to be very good, and I don't have any solid
experience myself with S4.

But I'm confused.  The Bioconductor code is all
S4 and the genomics data they deal with is
usually huge.

Pat

On 09/06/2010 21:00, Jeff Ryan wrote:
> Hi Khanh,
>
> Sounds excellent!  One note on integration ease/etc.  In general S4 is
> toxic.
>
> Is there a particular reason for using S3 over S4?  I realize this isn't
> on-topic per se, but it will affect other packages ability to use (and use
> in general, as interoperability is the name of the game these days)
>
> S4 really isn't excellent for much at present, in my biased though rather
> lengthy experience in this area.
>
> Aside from general obfuscation and bugginess to S4 itself, the only other
> thing it can do that S3 can't do directly is dispatch on multiple args and
> provide some sort of protection with respect to types per slot.
>
> If we restrict to a paradigm where objects only are altered with accessor
> functions (recommended), then all the type checking can be handled there.
>   Multiple args as far as I can tell don't/won't come into play here though.
>   At least not in a way that would warrant all the "bad" of S4.
>
> Additionally S4 is not overly friendly to large objects, as any slot
> manipulation does a full object copy.  Order book is large almost by
> definition.
>
> As another possible point of interest, you could take a look at the RTAQ
> package to see what they did for TAQ data.
>
> Take it or leave it, for general widespread use and all the benefits of
> that, S4 isn't going to be a friend on this.
>
> Awesome potential and work thus far though, and awesome work so far on
> RQuantLib et al...
>
> My [S]3c. ;-)
>
> Jeff
>
> On Wed, Jun 9, 2010 at 12:27 PM, Khanh Nguyen<nguyen.h.khanh at gmail.com>wrote:
>
>> Hello,
>>
>> I am working with Andraw Liu, under the supervision of David Kane and
>> Jeff Enos ("backtest" and "portfolio" packages) to create a Limit
>> Order Book package that will model a limit order book.
>>
>> Our initial version of the package is on R-Forge at
>> https://r-forge.r-project.org/projects/limitob/
>>
>> We would appreciate suggestions and comments as to what functionality
>> the package should have. Currently, we have implemented the following
>> functions
>>
>> --- "show", "summary", "plot", "display",
>> --- "best.bid", "best.ask",
>> --- "bid.price.levels", "ask.price.levels", "total.price.levels",
>> --- "bid.orders", "ask.orders", "total.orders",
>> --- "mid.point", "inside.market", "spread", "snapshot",
>> ---  "add.order", "remove.order", "replace.order", "market.order"
>>
>> Additionally, we were wondering what a good name for the package would
>> be--Limit Order Book sounds kind of clunky and we were thinking that
>> maybe "order.book", "orderbook", "limitorderbook",  simply "lob" would
>> work better. Suggestions on that would be helpful too!
>>
>> We will summarize any responses we receive and send an email to the
>> listserv in a week.
>>
>> Regards,
>>
>> Andrew and Khanh
>>
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
>
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com


From bogaso.christofer at gmail.com  Thu Jun 10 13:26:51 2010
From: bogaso.christofer at gmail.com (Christofer Bogaso)
Date: Thu, 10 Jun 2010 16:56:51 +0530
Subject: [R-SIG-Finance] Futures contract
Message-ID: <AANLkTinEuSdkViWObqIhnUeKB3DRFnUXZ-equSJywFEx@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100610/71703dd4/attachment.pl>

From armstrong.whit at gmail.com  Thu Jun 10 13:34:55 2010
From: armstrong.whit at gmail.com (Whit Armstrong)
Date: Thu, 10 Jun 2010 07:34:55 -0400
Subject: [R-SIG-Finance] Futures contract
In-Reply-To: <AANLkTinEuSdkViWObqIhnUeKB3DRFnUXZ-equSJywFEx@mail.gmail.com>
References: <AANLkTinEuSdkViWObqIhnUeKB3DRFnUXZ-equSJywFEx@mail.gmail.com>
Message-ID: <AANLkTimyLaEleT_quG-jF2Qepj64C4zvQrV60Cr3hIZ-@mail.gmail.com>

typically one uses a continuous futures series for estimation of variance.

Or if you have a factor model use it to produce a time series of
returns from your 'near to inception' futures contract.

-Whit


On Thu, Jun 10, 2010 at 7:26 AM, Christofer Bogaso
<bogaso.christofer at gmail.com> wrote:
> Dear finance gurus, I would like to ask how you construct VCV matrix
> and Mean vector for different futures contracts on same and/or different
> underlying. My problem is, when I am near to the inception of some futures
> contract, I would not have so many historical futures quotes to legitimately
> calculate VCV matrix.
>
> Thanks for you attention
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From eugene at tyurin.com  Thu Jun 10 21:53:06 2010
From: eugene at tyurin.com (Eugene Tyurin)
Date: Thu, 10 Jun 2010 14:53:06 -0500
Subject: [R-SIG-Finance] RBloomberg - how to extract partial days
Message-ID: <AANLkTimNiwtLDbHFwfZE9e4N8BrHOjn1V1Lj6mTPbEa4@mail.gmail.com>

I am trying to extract time series out of RBloomberg that would
contain multiple days and certain hours within each day.

Right now I request all of intra-day bars and then remove the parts I
don't need. It is not very efficient, to say the least, because I
can't figure out a way to vectorize the operation. :-(

Making multiple requests to blpGetData is even less efficient.

I tried to make blpGetData accept a series of start/end points, without success:

dd <- seq.dates("6/1/2010","6/9/2010")
edc <- blpGetData(conn,"CLN0
Comdty","BEST_BID",start=chron(dd,"10:00:00"),end=chron(dd,"10:30:00"),"OPEN",barsize=2,retval="zoo")

Does anybody know of a _proper_ way to accomplish this?

Thanks in advance!


From benjifamel at gmail.com  Thu Jun 10 22:03:39 2010
From: benjifamel at gmail.com (Benji Famel)
Date: Thu, 10 Jun 2010 16:03:39 -0400
Subject: [R-SIG-Finance] SpreadapproxOption
Message-ID: <18D53AB9-07F4-4F8D-8CA1-D2FA16AF5D03@gmail.com>

Hello,

Am I being dense? Why does the call:
SpreadApproxOption (TypeFlag="c", S1=28, S2=20, X=7, Time=1, r=.10,  
sigma1=0, sigma2=0, rho=1)
Give me an option price of 0.81 instead of 0.90?

Thanks for any help...


From bcooper24 at gmail.com  Thu Jun 10 23:12:53 2010
From: bcooper24 at gmail.com (Ben Cooper)
Date: Thu, 10 Jun 2010 17:12:53 -0400
Subject: [R-SIG-Finance] Spread Approx Option question
Message-ID: <AANLkTinubhoMRLmLwW54qPV0eSdTAzGWTMQk4urPuQDx@mail.gmail.com>

Hi,

I'm asking a question for a friend who couldn't post for to the site today.

He was trying to use the function Spread Approx Option from the
package fExoticOptions. The example he showed me was,

SpreadApproxOption(TypeFlag = "c", S1 = 28, S2 = 20, X = 7, Time = 1,
r = .05, sigma1 = 0, sigma2 = 0, rho = 1)

This is returning an option price of 0.9048. Shouldn't the option
price be the simple PV of 1 at the .05 rate? What is the math that
causes the difference here?

We've also run this same example through the Haug excel model that
comes with his book, and am getting a value of .9512. This is more in
line with what I'd expect.

Thanks

Ben


From cliffclive at gmail.com  Thu Jun 10 23:29:05 2010
From: cliffclive at gmail.com (Cliff Clive)
Date: Thu, 10 Jun 2010 14:29:05 -0700 (PDT)
Subject: [R-SIG-Finance] RBloomberg: Is there a limit to the size of a tick
	data download?
Message-ID: <1276205345633-2251029.post@n4.nabble.com>


I've been trying to download a full day's worth of tick data for a stock
using RBloomberg, but for whatever reason it's only giving me a few hours at
a time.  Here are the commands I'm entering:

> conn = blpConnect()
> TICKS = tick(conn, "AMZN Equity", c("TRADE", "BID_BEST", "ASK_BEST"), 
                          "2010-06-09 00:00:00.000", "2010-06-09
23:59:59.000")

When I run this in R, I'm only getting data covering the last few hours of
my request, from 19:58:00 to 23:58:28.  I've run this several times and each
time I only seem to get a few hours' worth of data; it's not even the same
size each time.

Does anyone know what could be causing this?
-- 
View this message in context: http://r.789695.n4.nabble.com/RBloomberg-Is-there-a-limit-to-the-size-of-a-tick-data-download-tp2251029p2251029.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From cedrick at cedrickjohnson.com  Thu Jun 10 23:35:33 2010
From: cedrick at cedrickjohnson.com (Cedrick W. Johnson)
Date: Thu, 10 Jun 2010 17:35:33 -0400
Subject: [R-SIG-Finance] RBloomberg: Is there a limit to the size of a
 tick data download?
In-Reply-To: <1276205345633-2251029.post@n4.nabble.com>
References: <1276205345633-2251029.post@n4.nabble.com>
Message-ID: <4C115AA5.3020209@cedrickjohnson.com>

I seem to recall a limitation in BLP's API that restricts the amount of 
data downloaded via the API but it was somewhere in the millions for a 
given time period. That's the best I can think of off the top of my 
head, but that *may* not be the problem if you're actually getting data 
each time you make a call...

hth
c


On 6/10/2010 5:29 PM, Cliff Clive wrote:
>
> I've been trying to download a full day's worth of tick data for a stock
> using RBloomberg, but for whatever reason it's only giving me a few hours at
> a time.  Here are the commands I'm entering:
>
>> conn = blpConnect()
>> TICKS = tick(conn, "AMZN Equity", c("TRADE", "BID_BEST", "ASK_BEST"),
>                            "2010-06-09 00:00:00.000", "2010-06-09
> 23:59:59.000")
>
> When I run this in R, I'm only getting data covering the last few hours of
> my request, from 19:58:00 to 23:58:28.  I've run this several times and each
> time I only seem to get a few hours' worth of data; it's not even the same
> size each time.
>
> Does anyone know what could be causing this?


From nick.torenvliet at gmail.com  Thu Jun 10 23:35:55 2010
From: nick.torenvliet at gmail.com (Nick Torenvliet)
Date: Thu, 10 Jun 2010 17:35:55 -0400
Subject: [R-SIG-Finance] Spread Approx Option question
In-Reply-To: <AANLkTinubhoMRLmLwW54qPV0eSdTAzGWTMQk4urPuQDx@mail.gmail.com>
References: <AANLkTinubhoMRLmLwW54qPV0eSdTAzGWTMQk4urPuQDx@mail.gmail.com>
Message-ID: <AANLkTilgjEssM2WCd4PXVApa6ZI1I9HqjTYesm8s8Qab@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100610/61adefb9/attachment.pl>

From cliffclive at gmail.com  Fri Jun 11 01:12:49 2010
From: cliffclive at gmail.com (Cliff Clive)
Date: Thu, 10 Jun 2010 16:12:49 -0700 (PDT)
Subject: [R-SIG-Finance] RBloomberg: Is there a limit to the size of a
 tick data download?
In-Reply-To: <1276205345633-2251029.post@n4.nabble.com>
References: <1276205345633-2251029.post@n4.nabble.com>
Message-ID: <1276211569334-2251122.post@n4.nabble.com>


Thanks for the input Cedrick.  I don't think it's a problem with Bloomberg's
data limit, though; the files I've been getting have only been around
100-200 KB.


I've played with it a bit more, and here's what I've found.  I don't have a
solution yet, but hopefully this will add some clarity for anyone interested
in understanding my situation.

To get a full day of data I wrote a loop that called for tick data in 5
minute intervals throughout all of the hours of the trading day, and
aggregated all of the downloads into one table.  It's not a pretty solution,
but it works... sort of.  

My new problem is, even within small intervals, I've found that it's only
downloading ticks for about half of the interval (roughly the first 2 1/2
minutes of each 5 minute interval).  In fact my aggregated table is about
the same size of file as my attempt to download the full day in one shot,
making me think that I'm losing the same proportion of my data set each
time, regardless of the size of the time interval.  But that's just a
hypothesis; I still don't know what is really going on.

I'm wondering whether the problem is with R or if it's with Bloomberg. 
Maybe I'm trying to download at a busy time of day.  I'll set up my program
to run late tonight and see if it works any better.

In the mean time, if anyone does have any suggestions, I would greatly
appreciate them.

Thanks,

CC
-- 
View this message in context: http://r.789695.n4.nabble.com/RBloomberg-Is-there-a-limit-to-the-size-of-a-tick-data-download-tp2251029p2251122.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From cmdr_rogue at hotmail.com  Fri Jun 11 02:48:16 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Thu, 10 Jun 2010 20:48:16 -0400
Subject: [R-SIG-Finance] Spread Approx Option question
In-Reply-To: <AANLkTilgjEssM2WCd4PXVApa6ZI1I9HqjTYesm8s8Qab@mail.gmail.com>
References: <AANLkTinubhoMRLmLwW54qPV0eSdTAzGWTMQk4urPuQDx@mail.gmail.com>
	<AANLkTilgjEssM2WCd4PXVApa6ZI1I9HqjTYesm8s8Qab@mail.gmail.com>
Message-ID: <BLU0-SMTP13A30B82D1276FC78D6E24E2D90@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100610/4df9a3f7/attachment.pl>

From cmdr_rogue at hotmail.com  Fri Jun 11 03:13:36 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Thu, 10 Jun 2010 21:13:36 -0400
Subject: [R-SIG-Finance] Spread Approx Option question
In-Reply-To: <AANLkTinubhoMRLmLwW54qPV0eSdTAzGWTMQk4urPuQDx@mail.gmail.com>
References: <AANLkTinubhoMRLmLwW54qPV0eSdTAzGWTMQk4urPuQDx@mail.gmail.com>
Message-ID: <BLU0-SMTP67B131468242301576AA99E2D90@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100610/359aced4/attachment.pl>

From nick.torenvliet at gmail.com  Fri Jun 11 04:01:57 2010
From: nick.torenvliet at gmail.com (Nick Torenvliet)
Date: Thu, 10 Jun 2010 22:01:57 -0400
Subject: [R-SIG-Finance] Quantmod chartSeries3d
Message-ID: <AANLkTilyzgjYlRS6P0_KXoLJ5IrIdbimlhNGm6-JGR-Y@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100610/2c84a3a1/attachment.pl>

From nick.torenvliet at gmail.com  Fri Jun 11 04:06:03 2010
From: nick.torenvliet at gmail.com (Nick Torenvliet)
Date: Thu, 10 Jun 2010 22:06:03 -0400
Subject: [R-SIG-Finance] New Datasources... eoddata... wall street journal
Message-ID: <AANLkTinOe11YU6mk7pT61sutR9JQOs_F0UJFLwf6J7Rg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100610/7e20ad99/attachment.pl>

From ustaudinger at gmail.com  Fri Jun 11 09:25:34 2010
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Fri, 11 Jun 2010 09:25:34 +0200
Subject: [R-SIG-Finance] RBloomberg - how to extract partial days
In-Reply-To: <AANLkTimNiwtLDbHFwfZE9e4N8BrHOjn1V1Lj6mTPbEa4@mail.gmail.com>
References: <AANLkTimNiwtLDbHFwfZE9e4N8BrHOjn1V1Lj6mTPbEa4@mail.gmail.com>
Message-ID: <AANLkTikuY7iUXvU5hLmg6_KN9Tkyuo7JwOE2dmUbJa-i@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100611/1ac21812/attachment.pl>

From Pierre.Lequeux at avivainvestors.com  Fri Jun 11 11:19:20 2010
From: Pierre.Lequeux at avivainvestors.com (Pierre.Lequeux at avivainvestors.com)
Date: Fri, 11 Jun 2010 10:19:20 +0100
Subject: [R-SIG-Finance] RBloomberg - how to extract partial days
In-Reply-To: <AANLkTikuY7iUXvU5hLmg6_KN9Tkyuo7JwOE2dmUbJa-i@mail.gmail.com>
References: <AANLkTimNiwtLDbHFwfZE9e4N8BrHOjn1V1Lj6mTPbEa4@mail.gmail.com>
	<AANLkTikuY7iUXvU5hLmg6_KN9Tkyuo7JwOE2dmUbJa-i@mail.gmail.com>
Message-ID: <3ED3F4290512F44D9220A1BB9EAFE8540903103187@SWVLONCUEXDP02.im.root-domain.net>



Would the below do what you need ?



require(RBloomberg)
require(xts)
startdate <- "2007-02-28"
barsize  <- 30
conn <- blpConnect()
EUR    <- blp(conn, "EUR Curncy", fields = "LAST_PRICE", start ="2010-04-30 00:00", barsize = barsize , barfields= "LAST_PRICE", retval="zoo")
conn <- blpDisconnect()


Pierre

 

P please don't print this e-mail unless you really need to.


-----Original Message-----
From: r-sig-finance-bounces at stat.math.ethz.ch [mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of Ulrich Staudinger
Sent: 11 June 2010 08:26
Cc: r-sig-finance at stat.math.ethz.ch
Subject: Re: [R-SIG-Finance] RBloomberg - how to extract partial days

can't you use some of the xts functions to select a range treat that as some boolean column, which you can then use to get the data?
I'd check the subsetting section in the xts documentation ...

On Thu, Jun 10, 2010 at 9:53 PM, Eugene Tyurin <eugene at tyurin.com> wrote:

> I am trying to extract time series out of RBloomberg that would 
> contain multiple days and certain hours within each day.
>
> Right now I request all of intra-day bars and then remove the parts I 
> don't need. It is not very efficient, to say the least, because I 
> can't figure out a way to vectorize the operation. :-(
>
> Making multiple requests to blpGetData is even less efficient.
>
> I tried to make blpGetData accept a series of start/end points, 
> without
> success:
>
> dd <- seq.dates("6/1/2010","6/9/2010") edc <- blpGetData(conn,"CLN0
>
> Comdty","BEST_BID",start=chron(dd,"10:00:00"),end=chron(dd,"10:30:00")
> ,"OPEN",barsize=2,retval="zoo")
>
> Does anybody know of a _proper_ way to accomplish this?
>
> Thanks in advance!
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R 
> questions should go.
>



--
Kind regards,
Ulrich B. Staudinger

	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at stat.math.ethz.ch mailing list https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.

This email transmission and any attachments may contain confidential or legally privileged information that is intended for the addressee(s) only.  Any views or opinions presented are solely those of the author and do not necessarily represent those of Aviva Investors.  If you are not the intended recipient or person responsible for delivering this information to the intended recipient you are hereby notified that any disclosure, copying, distribution or reliance upon the contents of this email is strictly prohibited. If you have received this email transmission in error please notify the sender immediately so that we may arrange for its proper delivery and delete the message from your inbox.

Aviva Investors Global Services Limited, registered in England No. 1151805.  Entered in the Financial Services Authority register, No: 119178.

Aviva Investors Pensions Limited, registered in England No. 1059606.  Entered in the Financial Services Authority register, No:110410. 

Aviva Investors London Limited, registered in England No. 2152949.  Entered in the Financial Services Authority register, No: 448407. 

Registered Office for all companies: No. 1 Poultry, London EC2R 8EJ.  All are authorised and regulated in the UK by the Financial Services Authority.  VAT number: 105 4373 00.

Telephone calls to Aviva Investors may be recorded for training or monitoring purposes.  We may monitor traffic data of both business and personal emails.  By replying to this email, you consent to us monitoring the content of any emails you send to or receive from Aviva Investors. 


From stefano.iacus at unimi.it  Fri Jun 11 14:22:51 2010
From: stefano.iacus at unimi.it (stefano iacus)
Date: Fri, 11 Jun 2010 14:22:51 +0200
Subject: [R-SIG-Finance] Spread Approx Option question
In-Reply-To: <BLU0-SMTP67B131468242301576AA99E2D90@phx.gbl>
References: <AANLkTinubhoMRLmLwW54qPV0eSdTAzGWTMQk4urPuQDx@mail.gmail.com>
	<BLU0-SMTP67B131468242301576AA99E2D90@phx.gbl>
Message-ID: <6BC75F01-07AA-45A4-82B5-278763CD6C15@unimi.it>

I didn't check myself, but Rmetrics (as in Haug) defin his own approx for the CDF of the gaussian law (i.e. CND), here you use pnorm()

just a hint, may the original authors can explain.

stefano


On 11 Jun 2010, at 03:13, Sarbo wrote:

> Hi Ben- I responded directly to Benji, who was trying to post on the
> forum earlier but couldn't for some reason (although it appears that his
> original query went through to the list now). Anyway, it does appear
> that the code in the fExoticOptions package is a little off. I'm too
> short on time (and sleep) right now to examine it closely, but I've got
> code from back in my Jurassic days that is essentially an R
> implementation of Haug's implementation of the Kirk approximation for a
> spread option on two forward/futures contracts. The code is enclosed
> below. Feel free to test it and see if it works.
> 
> KirkSpreadOption <- function(F1, F2, K, v1, v2, r, tau, rho, cp){
> 
> F <- F1/(F2 + K)
> F3 <- F2/(F2 + K)
> v <- sqrt(v1^2 + (v2*F3)^2 - 2*rho*v1*v2*F3)
> 
> d1 <- (log(F) + 0.5*v^2*tau)/(v*sqrt(tau))
> d2 <- d1 - v*sqrt(tau)
> 
> f <- ifelse(cp == 'c', (F2 + K)*exp(-r*tau)*(F*pnorm(d1) - pnorm(d2)),
> (F2 + K)*exp(-r*tau)*(pnorm(-d2) - F*pnorm(-d1)))
> return(f)
> }
> 
> On Thu, 2010-06-10 at 17:12 -0400, Ben Cooper wrote:
> 
>> Hi,
>> 
>> I'm asking a question for a friend who couldn't post for to the site today.
>> 
>> He was trying to use the function Spread Approx Option from the
>> package fExoticOptions. The example he showed me was,
>> 
>> SpreadApproxOption(TypeFlag = "c", S1 = 28, S2 = 20, X = 7, Time = 1,
>> r = .05, sigma1 = 0, sigma2 = 0, rho = 1)
>> 
>> This is returning an option price of 0.9048. Shouldn't the option
>> price be the simple PV of 1 at the .05 rate? What is the math that
>> causes the difference here?
>> 
>> We've also run this same example through the Haug excel model that
>> comes with his book, and am getting a value of .9512. This is more in
>> line with what I'd expect.
>> 
>> Thanks
>> 
>> Ben
>> 
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


-----------------------------------
Stefano M. Iacus
Department of Economics,
Business and Statistics
University of Milan
Via Conservatorio, 7
I-20123 Milan - Italy
Ph.: +39 02 50321 461
Fax: +39 02 50321 505
http://www.economia.unimi.it/iacus
------------------------------------------------------------------------------------
Please don't send me Word or PowerPoint attachments if not 
absolutely necessary. See:
http://www.gnu.org/philosophy/no-word-attachments.html


From martin.becker at mx.uni-saarland.de  Fri Jun 11 15:07:26 2010
From: martin.becker at mx.uni-saarland.de (Martin Becker)
Date: Fri, 11 Jun 2010 15:07:26 +0200
Subject: [R-SIG-Finance] Spread Approx Option question
In-Reply-To: <AANLkTinubhoMRLmLwW54qPV0eSdTAzGWTMQk4urPuQDx@mail.gmail.com>
References: <AANLkTinubhoMRLmLwW54qPV0eSdTAzGWTMQk4urPuQDx@mail.gmail.com>
Message-ID: <4C12350E.6020906@mx.uni-saarland.de>

I guess that there is a mistake in fExoticOptions' SpreadApproxOption() 
- function; discounting seems to be done twice (SpreadApproxOption() 
calls GBSOption(), which already has discounting, but inserts an 
additional factor exp(-r*t)).
At least, 0.9048*exp(0.05) gives the result you had expected.

Best - Martin


On 10.06.2010 23:12, Ben Cooper wrote:
> Hi,
>
> I'm asking a question for a friend who couldn't post for to the site today.
>
> He was trying to use the function Spread Approx Option from the
> package fExoticOptions. The example he showed me was,
>
> SpreadApproxOption(TypeFlag = "c", S1 = 28, S2 = 20, X = 7, Time = 1,
> r = .05, sigma1 = 0, sigma2 = 0, rho = 1)
>
> This is returning an option price of 0.9048. Shouldn't the option
> price be the simple PV of 1 at the .05 rate? What is the math that
> causes the difference here?
>
> We've also run this same example through the Haug excel model that
> comes with his book, and am getting a value of .9512. This is more in
> line with what I'd expect.
>
> Thanks
>
> Ben
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>    


-- 
Dr. Martin Becker
Statistics and Econometrics
Saarland University
Campus C3 1, Room 217
66123 Saarbruecken
Germany


From trey.johnson at yahoo.com  Fri Jun 11 15:11:27 2010
From: trey.johnson at yahoo.com (Trey Johnson)
Date: Fri, 11 Jun 2010 09:11:27 -0400
Subject: [R-SIG-Finance] Quantmod chartSeries3d
In-Reply-To: <AANLkTilyzgjYlRS6P0_KXoLJ5IrIdbimlhNGm6-JGR-Y@mail.gmail.com>
References: <AANLkTilyzgjYlRS6P0_KXoLJ5IrIdbimlhNGm6-JGR-Y@mail.gmail.com>
Message-ID: <001601cb0967$9a1ec3a0$ce5c4ae0$@johnson@yahoo.com>

Nick,
	Here's the location:
http://www.quantmod.com/examples/chartSeries3d/chartSeries3d.alpha.R

Best Regards,
Trey 

-----Original Message-----
From: r-sig-finance-bounces at stat.math.ethz.ch
[mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of Nick
Torenvliet
Sent: Thursday, June 10, 2010 10:02 PM
To: r-sig-finance at stat.math.ethz.ch
Subject: [R-SIG-Finance] Quantmod chartSeries3d

Hey All -- accidentally posted this under another topic... gmail confounds
me :-)

 I'm looking at xts_quantmod_workshop-1.pdf a presentation from the 2009
 R/Finance workshop.  In it there are a number of slides showing some nifty
 3d yield curves.  I've been hunting around for more info on chartSeries3d
 but am not finding it online and ls("package:quantmod") doesn't seem to
have
 anything obvious .  Can anyone point me in the right direction to get more
 info on these?

Regards,

 Nick

	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.
Checked by AVG - www.avg.com 

14:35:00


From bcooper24 at gmail.com  Fri Jun 11 20:13:24 2010
From: bcooper24 at gmail.com (Ben Cooper)
Date: Fri, 11 Jun 2010 14:13:24 -0400
Subject: [R-SIG-Finance] Spread Approx Option question
In-Reply-To: <4C12350E.6020906@mx.uni-saarland.de>
References: <AANLkTinubhoMRLmLwW54qPV0eSdTAzGWTMQk4urPuQDx@mail.gmail.com>
	<4C12350E.6020906@mx.uni-saarland.de>
Message-ID: <AANLkTilDcf3ErrXtmLRntRQ_LYgQEgJayNetvnb-Djz6@mail.gmail.com>

Thanks to everyone for their help. I have it working now and the
results look correct.

Have a great weekend.

Ben


On Fri, Jun 11, 2010 at 9:07 AM, Martin Becker
<martin.becker at mx.uni-saarland.de> wrote:
> I guess that there is a mistake in fExoticOptions' SpreadApproxOption() -
> function; discounting seems to be done twice (SpreadApproxOption() calls
> GBSOption(), which already has discounting, but inserts an additional factor
> exp(-r*t)).
> At least, 0.9048*exp(0.05) gives the result you had expected.
>
> Best - Martin
>
>
> On 10.06.2010 23:12, Ben Cooper wrote:
>>
>> Hi,
>>
>> I'm asking a question for a friend who couldn't post for to the site
>> today.
>>
>> He was trying to use the function Spread Approx Option from the
>> package fExoticOptions. The example he showed me was,
>>
>> SpreadApproxOption(TypeFlag = "c", S1 = 28, S2 = 20, X = 7, Time = 1,
>> r = .05, sigma1 = 0, sigma2 = 0, rho = 1)
>>
>> This is returning an option price of 0.9048. Shouldn't the option
>> price be the simple PV of 1 at the .05 rate? What is the math that
>> causes the difference here?
>>
>> We've also run this same example through the Haug excel model that
>> comes with his book, and am getting a value of .9512. This is more in
>> line with what I'd expect.
>>
>> Thanks
>>
>> Ben
>>
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
>
> --
> Dr. Martin Becker
> Statistics and Econometrics
> Saarland University
> Campus C3 1, Room 217
> 66123 Saarbruecken
> Germany
>
>


From mdelvaux at gmail.com  Sat Jun 12 19:49:42 2010
From: mdelvaux at gmail.com (Marc Delvaux)
Date: Sat, 12 Jun 2010 10:49:42 -0700
Subject: [R-SIG-Finance] Unable to get option historical data using IBrokers
Message-ID: <AANLkTimRX8Gzr38KoM5bgbtfFumye0R0Dd2TgdoEAAs1@mail.gmail.com>

I am trying to use IBrokers to get historical data for options.? The
exact problem is the inability to figure how to construct a valid
contract or in general to construct a valid request for options
historical data

Details:
-????????? Working under windows, version 2.10.1
-????????? IBrokers reports version 0.2.7 (alpha)
-????????? TWS reports Build 906.2, Jun 10, 2010 6:27:24 PM
-????????? I am able to connect and download stock historical data

I tried to use both the local symbol found using the TWS contact
details and the contract ID, and playing with some function
parameters, but to no avail at this time.  I guess I just need one
small nudge to see what I do wrong, but currently I am poking in the
dark and would appreciate any help.  Example session below.

On a side topic, thank you Jeff for IBrokers, it is a tremendous
simpler way to get data in R than trying to use directly the IB API.

Regards

Marc Delvaux


R version 2.10.1 (2009-12-14)
Copyright (C) 2009 The R Foundation for Statistical Computing
ISBN 3-900051-07-0

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

IBrokers version 0.2-7: (alpha)
Implementing API Version 9.62

This software comes with NO WARRANTY.  Not intended for production use!
See ?IBrokers for details
[Previously saved workspace restored]

> R.version
               _
platform       i386-pc-mingw32
arch           i386
os             mingw32
system         i386, mingw32
status
major          2
minor          10.1
year           2009
month          12
day            14
svn rev        50720
language       R
version.string R version 2.10.1 (2009-12-14)
> library(IBrokers)
Loading required package: xts
Loading required package: zoo
> tws <- twsConnect()
> aapl <- reqHistoricalData(tws,twsSTK("AAPL"))
TWS Message: 2 -1 2104 Market data farm connection is OK:usopt
TWS Message: 2 -1 2104 Market data farm connection is OK:usfarm
TWS Message: 2 -1 2106 HMDS data farm connection is OK:ushmds2a
waiting for TWS reply ..... done.
> str(aapl)
An ?xts? object from 2010-05-13 to 2010-06-11 containing:
  Data: num [1:21, 1:8] 263 255 255 257 250 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:8] "AAPL.Open" "AAPL.High" "AAPL.Low" "AAPL.Close" ...
 - attr(*, "from")= chr "20100512  18:43:14"
 - attr(*, "to")= chr "20100612  18:43:14"
 - attr(*, "src")= chr "IB"
 - attr(*, "updated")= POSIXct[1:1], format: "2010-06-12 10:43:15.887"
  Indexed by objects of class: [POSIXt,POSIXct] TZ:
  xts Attributes:
List of 4
 $ from   : chr "20100512  18:43:14"
 $ to     : chr "20100612  18:43:14"
 $ src    : chr "IB"
 $ updated: POSIXct[1:1], format: "2010-06-12 10:43:15.887"
> nly_put <- reqHistoricalData(tws,twsOPT("NLY 100717P00017000"))
TWS Message: 2 1 366 No historical data query found for ticker id:1
waiting for TWS reply .....
Error: Unable to complete historical data request
In addition: Warning message:
In errorHandler(con, verbose, OK = c(165, 300, 366, 2104, 2106,  :
  No security definition has been found for the request.
>


From mdelvaux at gmail.com  Sun Jun 13 00:30:47 2010
From: mdelvaux at gmail.com (Marc Delvaux)
Date: Sat, 12 Jun 2010 15:30:47 -0700
Subject: [R-SIG-Finance] Unable to get option historical data using
	IBrokers
In-Reply-To: <AANLkTimRX8Gzr38KoM5bgbtfFumye0R0Dd2TgdoEAAs1@mail.gmail.com>
References: <AANLkTimRX8Gzr38KoM5bgbtfFumye0R0Dd2TgdoEAAs1@mail.gmail.com>
Message-ID: <AANLkTinSwM_hGHHetAVABBtInbaA9k03yONA_UwGmZg-@mail.gmail.com>

Poking around, I am now able to retrieve the correct historical data.
The breakthrough was to understand that I could use reqContractDetails
to get a list of valid Contracts and finally to understand the
limitation on the number of bars returned.   It also seems that you
can ask other barSize than "1 min" contrary to the remark in the help
file of reqHistoricalData.

Jeff, I cannot thank you enough to release such a wonderful package.

> tws <- twsConnect()
> nly_opts <- reqContractDetails(tws, twsOption(local="", right="P", symbol="NLY"))
2 -1 2104 Market data farm connection is OK:usopt
2 -1 2104 Market data farm connection is OK:usfarm
2 -1 2106 HMDS data farm connection is OK:ushmds2a
> nly_opt_1_hist <-  reqHistoricalData(conn = tws,
+                     Contract = nly_opts[[1]]$contract,
+                          barSize = "30 mins",
+                     duration = "20 D",
+                                       whatToShow = "BID")
TWS Message: 2 1 366 No historical data query found for ticker id:1
waiting for TWS reply ....... done.
> str(nly_opt_1_hist)
An ?xts? object from 2010-05-14 06:30:00 to 2010-06-11 12:30:00 containing:
  Data: num [1:260, 1:8] 0.25 0.29 0.3 0.31 0.31 0.32 0.32 0.32 0.3 0.31 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:8] "NLY   110122P00010000.Open" "NLY
110122P00010000.High" "NLY   110122P00010000.Low" "NLY
110122P00010000.Close" ...
 - attr(*, "from")= chr "20100523  23:27:49"
 - attr(*, "to")= chr "20100612  23:27:49"
 - attr(*, "src")= chr "IB"
 - attr(*, "updated")= POSIXct[1:1], format: "2010-06-12 15:27:52.081"
  Indexed by objects of class: [POSIXt,POSIXct] TZ:
  xts Attributes:
List of 4
 $ from   : chr "20100523  23:27:49"
 $ to     : chr "20100612  23:27:49"
 $ src    : chr "IB"
 $ updated: POSIXct[1:1], format: "2010-06-12 15:27:52.081"

Marc Delvaux

On Sat, Jun 12, 2010 at 10:49 AM, Marc Delvaux <mdelvaux at gmail.com> wrote:
> I am trying to use IBrokers to get historical data for options.? The
> exact problem is the inability to figure how to construct a valid
> contract or in general to construct a valid request for options
> historical data
>
> Details:
> -????????? Working under windows, version 2.10.1
> -????????? IBrokers reports version 0.2.7 (alpha)
> -????????? TWS reports Build 906.2, Jun 10, 2010 6:27:24 PM
> -????????? I am able to connect and download stock historical data
>
> I tried to use both the local symbol found using the TWS contact
> details and the contract ID, and playing with some function
> parameters, but to no avail at this time. ?I guess I just need one
> small nudge to see what I do wrong, but currently I am poking in the
> dark and would appreciate any help. ?Example session below.
>
> On a side topic, thank you Jeff for IBrokers, it is a tremendous
> simpler way to get data in R than trying to use directly the IB API.
>
> Regards
>
> Marc Delvaux
>
>
> R version 2.10.1 (2009-12-14)
> Copyright (C) 2009 The R Foundation for Statistical Computing
> ISBN 3-900051-07-0
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
>
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
>
> IBrokers version 0.2-7: (alpha)
> Implementing API Version 9.62
>
> This software comes with NO WARRANTY. ?Not intended for production use!
> See ?IBrokers for details
> [Previously saved workspace restored]
>
>> R.version
> ? ? ? ? ? ? ? _
> platform ? ? ? i386-pc-mingw32
> arch ? ? ? ? ? i386
> os ? ? ? ? ? ? mingw32
> system ? ? ? ? i386, mingw32
> status
> major ? ? ? ? ?2
> minor ? ? ? ? ?10.1
> year ? ? ? ? ? 2009
> month ? ? ? ? ?12
> day ? ? ? ? ? ?14
> svn rev ? ? ? ?50720
> language ? ? ? R
> version.string R version 2.10.1 (2009-12-14)
>> library(IBrokers)
> Loading required package: xts
> Loading required package: zoo
>> tws <- twsConnect()
>> aapl <- reqHistoricalData(tws,twsSTK("AAPL"))
> TWS Message: 2 -1 2104 Market data farm connection is OK:usopt
> TWS Message: 2 -1 2104 Market data farm connection is OK:usfarm
> TWS Message: 2 -1 2106 HMDS data farm connection is OK:ushmds2a
> waiting for TWS reply ..... done.
>> str(aapl)
> An ?xts? object from 2010-05-13 to 2010-06-11 containing:
> ?Data: num [1:21, 1:8] 263 255 255 257 250 ...
> ?- attr(*, "dimnames")=List of 2
> ?..$ : NULL
> ?..$ : chr [1:8] "AAPL.Open" "AAPL.High" "AAPL.Low" "AAPL.Close" ...
> ?- attr(*, "from")= chr "20100512 ?18:43:14"
> ?- attr(*, "to")= chr "20100612 ?18:43:14"
> ?- attr(*, "src")= chr "IB"
> ?- attr(*, "updated")= POSIXct[1:1], format: "2010-06-12 10:43:15.887"
> ?Indexed by objects of class: [POSIXt,POSIXct] TZ:
> ?xts Attributes:
> List of 4
> ?$ from ? : chr "20100512 ?18:43:14"
> ?$ to ? ? : chr "20100612 ?18:43:14"
> ?$ src ? ?: chr "IB"
> ?$ updated: POSIXct[1:1], format: "2010-06-12 10:43:15.887"
>> nly_put <- reqHistoricalData(tws,twsOPT("NLY 100717P00017000"))
> TWS Message: 2 1 366 No historical data query found for ticker id:1
> waiting for TWS reply .....
> Error: Unable to complete historical data request
> In addition: Warning message:
> In errorHandler(con, verbose, OK = c(165, 300, 366, 2104, 2106, ?:
> ?No security definition has been found for the request.
>>
>


From kabonline07 at yahoo.com  Mon Jun 14 10:50:38 2010
From: kabonline07 at yahoo.com (KAUSHIK BHATTACHARJEE)
Date: Mon, 14 Jun 2010 01:50:38 -0700 (PDT)
Subject: [R-SIG-Finance] GARCH Estimation Problem---- This is not a R
	problem but an econometric problem
Message-ID: <416209.27028.qm@web110012.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100614/b70f2fef/attachment.pl>

From Zeno.Adams at ebs.edu  Mon Jun 14 12:46:37 2010
From: Zeno.Adams at ebs.edu (Adams, Zeno)
Date: Mon, 14 Jun 2010 12:46:37 +0200
Subject: [R-SIG-Finance] GARCH Estimation Problem---- This is not a
	Rproblem but an econometric problem
In-Reply-To: <416209.27028.qm@web110012.mail.gq1.yahoo.com>
References: <416209.27028.qm@web110012.mail.gq1.yahoo.com>
Message-ID: <9064522880125945B98983BBAECBA1CC985764@exchsrv001.ebs.local>

I do not know if the GARCH part actually "introduces" serial correlation but it suggests that your dynamic structure is not complete and that you should add more (possibly higher order) autoregressive terms into the mean equation. This should solve autocorrelation problem.
If (ARCH term + GARCH Term) is larger than one then the variance is not stationary. In this case you should restrict (ARCH term + GARCH Term) to sum to one (using the I_GARCH model). Otherwise your parameters violate an important assumption of the GARCH model (e.g. the long-run variance  constant/(1- (ARCH term + GARCH Term)) would become negative.

Zeno

-----Original Message-----
From: r-sig-finance-bounces at stat.math.ethz.ch [mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of KAUSHIK BHATTACHARJEE
Sent: Montag, 14. Juni 2010 10:51
To: R Finance
Subject: [R-SIG-Finance] GARCH Estimation Problem---- This is not a Rproblem but an econometric problem

?
Hi All,
I need your help.
I have 9 stock returns(y) to analyze. I am running an regression : y on lagged values of Y and X1&X2 (exogenous variables). If I run an ols?? regression then?? LM test etc on the residuals shows existence of GARCH?? effect.(although there are serial correlation present in the residuals ??too but they are mild i.e. significant at 10% level ) Therefore I proceed to model the volatility using an appropriate GARCH model. Going by the method suggested by Walter Enders calculate RSS???, AIC??? , BIC??? etc. I restricted my search in 6 models ....from?? GARCH(1,1) to GARCH(2,2) only. Suppose these exercises is suggesting?? me a GARCH(1,1) or EGARCH(1,1) model. But after I fit the model and collect the residuals and subject ??them ??to tests, I observe: though there are no GARCH effect left (LB stat is giving p-values as 0.9999 for squared residuals ) but I am finding serial correlations of the residuals have increased(now almost all of them are significant at 5% level).So it appears GARCH modeling is taking care of GARCH effect but spuriously introducing serial correlation in the residuals.
I have checked with model specifications ..theoretically it seems ok and this phenomena is true for 3 stocks out of 9. Rest 6 are yielding?? nice/good results in terms no serial correlation in both residuals and squared residuals.
So where the estimation/ GARCH modeling is going wrong? Why this is happening.Anyidea?
Also if the sum of the coefficients (constant+ ARCH term + GARCH Term) is greater than one(1) then what does this imply? Should I Go for an I-GARCH model even if my dependent variable in the mean equation is I(0).
??Kaushik Bhattacharjee



      
	[[alternative HTML version deleted]]


EBS European Business School gemeinnuetzige GmbH - Sitz der Gesellschaft: Wiesbaden, Amtsgericht Wiesbaden HRB 19951 - Umsatzsteuer-ID DE 113891213 Geschaeftsfuehrer: Prof. Dr. Christopher Jahns,  Praesident; Prof. Dr. Rolf Tilmes, Dekan; Sabine Fuchs, CMO; Prof. Dr. Dr. Gerrick Frhr. v. Hoyningen-Huene, Gruendungsdekan Law School; Aufsichtsrat: Dr. Hellmut K. Albrecht, Vorsitzender

From patrick at burns-stat.com  Mon Jun 14 13:01:54 2010
From: patrick at burns-stat.com (Patrick Burns)
Date: Mon, 14 Jun 2010 12:01:54 +0100
Subject: [R-SIG-Finance] GARCH Estimation Problem---- This is not a R
 problem but an econometric problem
In-Reply-To: <416209.27028.qm@web110012.mail.gq1.yahoo.com>
References: <416209.27028.qm@web110012.mail.gq1.yahoo.com>
Message-ID: <4C160C22.4000603@burns-stat.com>

I don't know what is going on, but I'm
suspecting that LB p-value = .9999 is a
hint.

That p-value of essentially 1 is trying to
say that the squared residuals are systematically
anti autocorrelated.  That's unlikely to be
true.  More likely is that one or more outliers
are skewing the test -- the Burns Statistics
working paper on Ljung-Box talks about this and
says what test to use.

My guess is that the outlier(s) are not only
affecting the Ljung-Box test but estimation as
well.  Assuming a t-distribution rather than a
Gaussian in the garch estimate might help, but
perhaps Winsorizing the returns would be a more
profitable route.

Reality seems to be a more interesting story than
can be told with the simple model used so far.

On 14/06/2010 09:50, KAUSHIK BHATTACHARJEE wrote:
> ?
> Hi All,
> I need your help.
> I have 9 stock returns(y) to analyze. I am running an regression : y on lagged values of Y and X1&X2 (exogenous variables). If I run an ols?  regression then?  LM test etc on the residuals shows existence of GARCH?  effect.(although there are serial correlation present in the residuals ? too but they are mild i.e. significant at 10% level )
> Therefore I proceed to model the volatility using an appropriate GARCH model. Going by the method suggested by Walter Enders calculate RSS???, AIC??? , BIC??? etc. I restricted my search in 6 models ....from?  GARCH(1,1) to GARCH(2,2) only. Suppose these exercises is suggesting?  me a GARCH(1,1) or EGARCH(1,1) model. But after I fit the model and collect the residuals and subject ? them ? to tests, I observe: though there are no GARCH effect left (LB stat is giving p-values as 0.9999 for squared residuals ) but I am finding serial correlations of the residuals have increased(now almost all of them are significant at 5% level).So it appears GARCH modeling is taking care of GARCH effect but spuriously introducing serial correlation in the residuals.
> I have checked with model specifications ..theoretically it seems ok and this phenomena is true for 3 stocks out of 9. Rest 6 are yielding?  nice/good results in terms no serial correlation in both residuals and squared residuals.
> So where the estimation/ GARCH modeling is going wrong? Why this is happening.Anyidea?
> Also if the sum of the coefficients (constant+ ARCH term + GARCH Term) is greater than one(1) then what does this imply? Should I Go for an I-GARCH model even if my dependent variable in the mean equation is I(0).
> ? Kaushik Bhattacharjee
>
>
>
>
> 	[[alternative HTML version deleted]]
>
>
>
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com


From nelson.ana at gmail.com  Mon Jun 14 16:55:14 2010
From: nelson.ana at gmail.com (Ana Nelson)
Date: Mon, 14 Jun 2010 15:55:14 +0100
Subject: [R-SIG-Finance] RBloomberg: Is there a limit to the size of a
	tick data download?
In-Reply-To: <1276211569334-2251122.post@n4.nabble.com>
References: <1276205345633-2251029.post@n4.nabble.com>
	<1276211569334-2251122.post@n4.nabble.com>
Message-ID: <AANLkTimVRi8Nqp2cweVmOouMYfcM_vlUHgmhQZlj3KrR@mail.gmail.com>

Cliff,

This looks like a bug in RBloomberg. I'll fix it in the next release,
in the mean time I suggest you batch your requests into smaller
increments (try 2 hours) and combine the results.

Regards,
Ana



On Fri, Jun 11, 2010 at 12:12 AM, Cliff Clive <cliffclive at gmail.com> wrote:
>
> Thanks for the input Cedrick. ?I don't think it's a problem with Bloomberg's
> data limit, though; the files I've been getting have only been around
> 100-200 KB.
>
>
> I've played with it a bit more, and here's what I've found. ?I don't have a
> solution yet, but hopefully this will add some clarity for anyone interested
> in understanding my situation.
>
> To get a full day of data I wrote a loop that called for tick data in 5
> minute intervals throughout all of the hours of the trading day, and
> aggregated all of the downloads into one table. ?It's not a pretty solution,
> but it works... sort of.
>
> My new problem is, even within small intervals, I've found that it's only
> downloading ticks for about half of the interval (roughly the first 2 1/2
> minutes of each 5 minute interval). ?In fact my aggregated table is about
> the same size of file as my attempt to download the full day in one shot,
> making me think that I'm losing the same proportion of my data set each
> time, regardless of the size of the time interval. ?But that's just a
> hypothesis; I still don't know what is really going on.
>
> I'm wondering whether the problem is with R or if it's with Bloomberg.
> Maybe I'm trying to download at a busy time of day. ?I'll set up my program
> to run late tonight and see if it works any better.
>
> In the mean time, if anyone does have any suggestions, I would greatly
> appreciate them.
>
> Thanks,
>
> CC
> --
> View this message in context: http://r.789695.n4.nabble.com/RBloomberg-Is-there-a-limit-to-the-size-of-a-tick-data-download-tp2251029p2251122.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From cliffclive at gmail.com  Mon Jun 14 17:50:07 2010
From: cliffclive at gmail.com (Cliff Clive)
Date: Mon, 14 Jun 2010 08:50:07 -0700 (PDT)
Subject: [R-SIG-Finance] RBloomberg: Is there a limit to the size of a
 tick data download?
In-Reply-To: <AANLkTimVRi8Nqp2cweVmOouMYfcM_vlUHgmhQZlj3KrR@mail.gmail.com>
References: <1276205345633-2251029.post@n4.nabble.com>
	<1276211569334-2251122.post@n4.nabble.com>
	<AANLkTimVRi8Nqp2cweVmOouMYfcM_vlUHgmhQZlj3KrR@mail.gmail.com>
Message-ID: <AANLkTinjkaLwBfWBO9MBGEKHjy-WtnrJXV_SKXkkJO0u@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100614/f1fea83a/attachment.pl>

From nguyen.h.khanh at gmail.com  Mon Jun 14 20:25:21 2010
From: nguyen.h.khanh at gmail.com (Khanh Nguyen)
Date: Mon, 14 Jun 2010 14:25:21 -0400
Subject: [R-SIG-Finance] Follow up on limit orderbook
Message-ID: <AANLkTinDxoF6uqNjmNovXAYc-CXQPEPyRFHx9JYnqZGN@mail.gmail.com>

Hi,

Thank you for your suggestions! We are hard at work :D but wanted to
follow up on a few points. In particular S3 vs S4:

On 09/06/2010 21:00, Jeff Ryan wrote:

> Is there a particular reason for using S3 over S4? ?I realize this isn't
> on-topic per se, but it will affect other packages ability to use (and use
> in general, as interoperability is the name of the game these days)
>
> S4 really isn't excellent for much at present, in my biased though rather
> lengthy experience in this area.
>
> Aside from general obfuscation and bugginess to S4 itself, the only other
> thing it can do that S3 can't do directly is dispatch on multiple args and
> provide some sort of protection with respect to types per slot.
>
> If we restrict to a paradigm where objects only are altered with accessor
> functions (recommended), then all the type checking can be handled there.
> ?Multiple args as far as I can tell don't/won't come into play here
> though.
> ?At least not in a way that would warrant all the "bad" of S4.
>
> Additionally S4 is not overly friendly to large objects, as any slot
> manipulation does a full object copy. ?Order book is large almost by
> definition.

On Thu, Jun 10, 2010 at 4:43 AM, Patrick Burns <patrick at burns-stat.com> wrote:

> But I'm confused. ?The Bioconductor code is all
> S4 and the genomics data they deal with is
> usually huge.

We too are confused! Our datasets will typically be ~1-2 gigabytes,
and we would greatly appreciate any comments to help us decide between
S3 and S4 for analyzing datasets of that size. Additionally,
suggestions as to the best way to read in large amounts of data would
be appreciated.

Thanks,

Khanh & Andrew.


From me at censix.com  Mon Jun 14 20:44:29 2010
From: me at censix.com (me at censix.com)
Date: Mon, 14 Jun 2010 20:44:29 +0200 (CEST)
Subject: [R-SIG-Finance] Problem when installing IBrokers from
	code.google.com
Message-ID: <41798.78.234.67.201.1276541069.squirrel@censix.com>

Hi all

I just downloaded IBrokers from http://code.google.com/p/ibrokers  using
svn and have tried to install it by first creating a file called
"IBrokers_fromsvn.tar.gz" and then doing the usual installation from R
commandline:

> install.packages("~/sorencompile/IBrokers_fromsvn.tar.gz")
Warning in install.packages("~/sorencompile/IBrokers_fromsvn.tar.gz") :
  argument 'lib' is missing: using
'/home/leaf/R/i686-pc-linux-gnu-library/2.11'
inferring 'repos = NULL' from the file name
* installing *source* package ?IBrokers? ...
** R
** inst
** preparing package for lazy loading
Loading required package: zoo
** help
*** installing help indices
** building package indices ...
** testing if installed package can be loaded
IBrokers version 0.2-7: (alpha)
Implementing API Version 9.62

This software comes with NO WARRANTY.  Not intended for production use!
See ?IBrokers for details
Error in namespaceExport(ns, exports) :
  undefined exports: twsFutureOpt, twsFOP
ERROR: loading failed
* removing ?/home/leaf/R/i686-pc-linux-gnu-library/2.11/IBrokers?
Warning message:
In install.packages("~/sorencompile/IBrokers_fromsvn.tar.gz") :
  installation of package
'/home/leaf/sorencompile/IBrokers_fromsvn.tar.gz' had non-zero exit
status


Q: Is this installation failing because I am missing some essential
dependencies (unlikely but possible) or is it in the way I created the
package file ? Or should I be using a different source repository for
getting the latest IBrokers package alltogether ?

Thanks for some hints.

Soren


From jeff.a.ryan at gmail.com  Mon Jun 14 20:52:28 2010
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Mon, 14 Jun 2010 13:52:28 -0500
Subject: [R-SIG-Finance] Follow up on limit orderbook
In-Reply-To: <AANLkTinDxoF6uqNjmNovXAYc-CXQPEPyRFHx9JYnqZGN@mail.gmail.com>
References: <AANLkTinDxoF6uqNjmNovXAYc-CXQPEPyRFHx9JYnqZGN@mail.gmail.com>
Message-ID: <AANLkTinsp5vMdYIDd0OP0yTX9X4Cx7PfzmGq4-AKrMKr@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100614/a8d75c28/attachment.pl>

From jeff.a.ryan at gmail.com  Mon Jun 14 20:57:00 2010
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Mon, 14 Jun 2010 13:57:00 -0500
Subject: [R-SIG-Finance] Problem when installing IBrokers from
	code.google.com
In-Reply-To: <41798.78.234.67.201.1276541069.squirrel@censix.com>
References: <41798.78.234.67.201.1276541069.squirrel@censix.com>
Message-ID: <AANLkTingpl-QLZsbsGQgUVA3XBaJxk1S84rMr7RdJ6rR@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100614/62892fae/attachment.pl>

From daniel.cegielka at gmail.com  Tue Jun 15 00:10:07 2010
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Tue, 15 Jun 2010 00:10:07 +0200
Subject: [R-SIG-Finance] Follow up on limit orderbook
In-Reply-To: <AANLkTinsp5vMdYIDd0OP0yTX9X4Cx7PfzmGq4-AKrMKr@mail.gmail.com>
References: <AANLkTinDxoF6uqNjmNovXAYc-CXQPEPyRFHx9JYnqZGN@mail.gmail.com> 
	<AANLkTinsp5vMdYIDd0OP0yTX9X4Cx7PfzmGq4-AKrMKr@mail.gmail.com>
Message-ID: <AANLkTiltXaQ8PDRg5e91tRezU7VzGJu3yPuvaz0v7-0L@mail.gmail.com>

Hi,

It's from R-devel list:

http://www.opensubscriber.com/message/r-devel at r-project.org/14086352.html

"A general goal for the next version of R is to make S4 and S3 play
better together."

regards,
daniel



2010/6/14 Jeff Ryan <jeff.a.ryan at gmail.com>:
> A quick and painful example. ?I will craft a better one if I have more
> time...
>
>> bigData <- 1:1e7L ?# obviously this isn't "big"
>
>> setClass("bigS4", representation(d="integer", comment="character"))
> [1] "bigS4"
>> s4 <- new("bigS4")
>> system.time(s4 at d <- bigData)
> ? user ?system elapsed
> ?0.046 ? 0.028 ? 0.078
>> system.time(s4 at comment <- "comment")
> ? user ?system elapsed
> ?0.045 ? 0.028 ? 0.074
>>
>
>>
>> s3 <- list(d=NULL, comment="")
>> system.time(s3$d <- bigData)
> ? user ?system elapsed
> ?0.028 ? 0.000 ? 0.028
>> system.time(s3$comment <- "comment")
> ? user ?system elapsed
> ? ? ?0 ? ? ? 0 ? ? ? 0
>
> Point is, the entire S4 object gets copied once you call @, whereas the list
> structure (which can be a class) doesn't.
>
> If you really want to optimize, look at using environments. ?Then your
> objects _won't_ ever be copied accidentally.
>
> In the case of S4, I haven't yet found a solid use case where I can justify
> the very real costs (performance and opacity).
>
> A bigger issue is really in the Methods used for S4. ?That is constantly
> moving target/mess IMO. ?Just 2 days ago John Chambers committed another
> change that requires S3 generics for S4 classes... try keeping up with THAT
> ;-)
>
> w.r.t BioC, I have no idea why or how they employ S4, all I know is that I
> can't afford more copies in R than I already have to endure.
>
> Jeff
>
> On Mon, Jun 14, 2010 at 1:25 PM, Khanh Nguyen <nguyen.h.khanh at gmail.com>wrote:
>
>> Hi,
>>
>> Thank you for your suggestions! We are hard at work :D but wanted to
>> follow up on a few points. In particular S3 vs S4:
>>
>> On 09/06/2010 21:00, Jeff Ryan wrote:
>>
>> > Is there a particular reason for using S3 over S4? ?I realize this isn't
>> > on-topic per se, but it will affect other packages ability to use (and
>> use
>> > in general, as interoperability is the name of the game these days)
>> >
>> > S4 really isn't excellent for much at present, in my biased though rather
>> > lengthy experience in this area.
>> >
>> > Aside from general obfuscation and bugginess to S4 itself, the only other
>> > thing it can do that S3 can't do directly is dispatch on multiple args
>> and
>> > provide some sort of protection with respect to types per slot.
>> >
>> > If we restrict to a paradigm where objects only are altered with accessor
>> > functions (recommended), then all the type checking can be handled there.
>> > ?Multiple args as far as I can tell don't/won't come into play here
>> > though.
>> > ?At least not in a way that would warrant all the "bad" of S4.
>> >
>> > Additionally S4 is not overly friendly to large objects, as any slot
>> > manipulation does a full object copy. ?Order book is large almost by
>> > definition.
>>
>> On Thu, Jun 10, 2010 at 4:43 AM, Patrick Burns <patrick at burns-stat.com>
>> wrote:
>>
>> > But I'm confused. ?The Bioconductor code is all
>> > S4 and the genomics data they deal with is
>> > usually huge.
>>
>> We too are confused! Our datasets will typically be ~1-2 gigabytes,
>> and we would greatly appreciate any comments to help us decide between
>> S3 and S4 for analyzing datasets of that size. Additionally,
>> suggestions as to the best way to read in large amounts of data would
>> be appreciated.
>>
>> Thanks,
>>
>> Khanh & Andrew.
>>
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
>
>
> --
> Jeffrey Ryan
> jeffrey.ryan at insightalgo.com
>
> ia: insight algorithmics
> www.insightalgo.com
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From jeff.a.ryan at gmail.com  Tue Jun 15 00:13:41 2010
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Mon, 14 Jun 2010 17:13:41 -0500
Subject: [R-SIG-Finance] Follow up on limit orderbook
In-Reply-To: <AANLkTiltXaQ8PDRg5e91tRezU7VzGJu3yPuvaz0v7-0L@mail.gmail.com>
References: <AANLkTinDxoF6uqNjmNovXAYc-CXQPEPyRFHx9JYnqZGN@mail.gmail.com>
	<AANLkTinsp5vMdYIDd0OP0yTX9X4Cx7PfzmGq4-AKrMKr@mail.gmail.com>
	<AANLkTiltXaQ8PDRg5e91tRezU7VzGJu3yPuvaz0v7-0L@mail.gmail.com>
Message-ID: <AANLkTinC-hEEbVacq5M4uP1HsnL5OwrW48m2N4PpvcND@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100614/eeca0945/attachment.pl>

From mrmelchi at grupobica.com.ar  Tue Jun 15 14:11:51 2010
From: mrmelchi at grupobica.com.ar (Mario Melchiori)
Date: Tue, 15 Jun 2010 09:11:51 -0300
Subject: [R-SIG-Finance]  CreditMetrics Methodology
Message-ID: <AANLkTilhPQahLHVFCvzd9OraDeT9wilQXA5FhyiQ8BxN@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100615/2214543a/attachment.pl>

From landronimirc at gmail.com  Tue Jun 15 14:39:45 2010
From: landronimirc at gmail.com (Liviu Andronic)
Date: Tue, 15 Jun 2010 13:39:45 +0100
Subject: [R-SIG-Finance] CreditMetrics Methodology
In-Reply-To: <AANLkTilhPQahLHVFCvzd9OraDeT9wilQXA5FhyiQ8BxN@mail.gmail.com>
References: <AANLkTilhPQahLHVFCvzd9OraDeT9wilQXA5FhyiQ8BxN@mail.gmail.com>
Message-ID: <AANLkTimcfy5PRdjD8tB52MnDC6x6PToaJPRJzJWseQjX@mail.gmail.com>

Hello
Thank you for the information.

On Tue, Jun 15, 2010 at 1:11 PM, Mario Melchiori
<mrmelchi at grupobica.com.ar> wrote:
> theory and practical implementation. I provide VBA, MatLab and *R* codes
> that present step-by-step examples of practical applications.
>
Would you consider publishing the R code as a package, perhaps on
CRAN? This would greatly improve the odds of R users trying out the
code.

Regards
Liviu


From Heiko-Mayer at gmx.de  Tue Jun 15 22:59:22 2010
From: Heiko-Mayer at gmx.de (Heiko Mayer)
Date: Tue, 15 Jun 2010 22:59:22 +0200
Subject: [R-SIG-Finance] Futures contract
In-Reply-To: <AANLkTinEuSdkViWObqIhnUeKB3DRFnUXZ-equSJywFEx@mail.gmail.com>
References: <AANLkTinEuSdkViWObqIhnUeKB3DRFnUXZ-equSJywFEx@mail.gmail.com>
Message-ID: <20100615205922.320590@gmx.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100615/c79dddd7/attachment.pl>

From dmsilv at gmail.com  Thu Jun 17 13:34:16 2010
From: dmsilv at gmail.com (Daniel)
Date: Thu, 17 Jun 2010 08:34:16 -0300
Subject: [R-SIG-Finance] update cells
Message-ID: <AANLkTimqplw_cdmZk77BwBOCbdt_ptEegbYtAIdgGTg7@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100617/81143e71/attachment.pl>

From jeff.a.ryan at gmail.com  Thu Jun 17 15:09:16 2010
From: jeff.a.ryan at gmail.com (jeff.a.ryan at gmail.com)
Date: Thu, 17 Jun 2010 13:09:16 +0000
Subject: [R-SIG-Finance] update cells
In-Reply-To: <AANLkTimqplw_cdmZk77BwBOCbdt_ptEegbYtAIdgGTg7@mail.gmail.com>
References: <AANLkTimqplw_cdmZk77BwBOCbdt_ptEegbYtAIdgGTg7@mail.gmail.com>
Message-ID: <153342777-1276780158-cardhu_decombobulator_blackberry.rim.net-499166577-@bda325.bisx.prod.on.blackberry>

Not a Finance question. Please follow the posting guidelines and redirect to R-help

Jeff
Sent via BlackBerry from T-Mobile

-----Original Message-----
From: Daniel <dmsilv at gmail.com>
Date: Thu, 17 Jun 2010 08:34:16 
To: <r-sig-finance at stat.math.ethz.ch>
Subject: [R-SIG-Finance] update cells

Hello all,I have a table with about 18000 rows, I need to UPDATE the strings
in the "name.x" column in each row by the strings from "name.y" given if
"name.x" is NA or " ". How can I do it?
Also I want to update values in other columns, but I think that will be the
same job.
Daniel

	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From konradhoppe at hotmail.de  Fri Jun 18 00:05:10 2010
From: konradhoppe at hotmail.de (Konrad Hoppe)
Date: Fri, 18 Jun 2010 00:05:10 +0200
Subject: [R-SIG-Finance] update cells
In-Reply-To: <153342777-1276780158-cardhu_decombobulator_blackberry.rim.net-499166577-@bda325.bisx.prod.on.blackberry>
Message-ID: <SNT114-DS173A9512AACCF49295A58D0DF0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100618/79a29818/attachment.pl>

From VOSSK at kochind.com  Fri Jun 18 00:08:56 2010
From: VOSSK at kochind.com (Voss, Kent)
Date: Thu, 17 Jun 2010 15:08:56 -0700
Subject: [R-SIG-Finance] Rbloomberg currency conversion
Message-ID: <13CB99597D0BAA43B07ABFCE29E45F6B02EECF6B@phx0mbx01.kochind.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100617/19ecb917/attachment.pl>

From cchien at alumni.poly.edu  Fri Jun 18 07:52:02 2010
From: cchien at alumni.poly.edu (JOSH C. CHIEN)
Date: Thu, 17 Jun 2010 22:52:02 -0700 (PDT)
Subject: [R-SIG-Finance] About multi-dimension array on Binomial Tree
	Structure
Message-ID: <350165.88209.qm@web113108.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100617/5c0f0613/attachment.pl>

From ustaudinger at gmail.com  Fri Jun 18 08:35:42 2010
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Fri, 18 Jun 2010 08:35:42 +0200
Subject: [R-SIG-Finance] About multi-dimension array on Binomial Tree
	Structure
In-Reply-To: <350165.88209.qm@web113108.mail.gq1.yahoo.com>
References: <350165.88209.qm@web113108.mail.gq1.yahoo.com>
Message-ID: <AANLkTil1sSY2nMBLV8mUTZAtvsMsBcO4a3Hj8yFjmlob@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100618/e3dcbebb/attachment.pl>

From patrick at burns-stat.com  Fri Jun 18 10:47:54 2010
From: patrick at burns-stat.com (Patrick Burns)
Date: Fri, 18 Jun 2010 09:47:54 +0100
Subject: [R-SIG-Finance] update cells
In-Reply-To: <SNT114-DS173A9512AACCF49295A58D0DF0@phx.gbl>
References: <SNT114-DS173A9512AACCF49295A58D0DF0@phx.gbl>
Message-ID: <4C1B32BA.6080002@burns-stat.com>

As long as there is an answer on the list,
I'll take the liberty of showing what I
think is a better answer.

* The 'for' loop is not very R-ish.

* If the name columns are factors, you are
probably in trouble.

myTable <- data.frame(name_x=c('a', ' ', 'c', NA),
    name_y=LETTERS[1:4], stringsAsFactors=FALSE)

myTable2 <- within(myTable, name_x <-
    ifelse(is.na(name_x) | name_x == " ", name_y, name_x))



On 17/06/2010 23:05, Konrad Hoppe wrote:
> Hi,
>
> yes, it's really not a finance question, but I think it's okay to give an
> answer shortly:
>
> Assuming your table is named myTable, just do the following:
>
> for(i in 1:nrow(myTable)){
> 	if(is.na(myTable$name_x[i]) || (myTable$name_x[i] == " ")){
> 		myTable$name_x[i]<- myTable$name_y[i]
> 	}
> }
>
> This should work. I haven't tested it due to the fact that you haven't
> provided your first tries as a code snippet, but I'm entirely sure this will
> work. But in general I would do it via sql, this will employ the solution
> much faster.
>
> Best regards,
>
> Konrad Hoppe
> www.konrad-hoppe.com
>
>
> -----Urspr?ngliche Nachricht-----
> Von: r-sig-finance-bounces at stat.math.ethz.ch
> [mailto:r-sig-finance-bounces at stat.math.ethz.ch] Im Auftrag von
> jeff.a.ryan at gmail.com
> Gesendet: Donnerstag, 17. Juni 2010 15:09
> An: Daniel; r-sig-finance-bounces at stat.math.ethz.ch;
> r-sig-finance at stat.math.ethz.ch
> Betreff: Re: [R-SIG-Finance] update cells
>
> Not a Finance question. Please follow the posting guidelines and redirect to
> R-help
>
> Jeff
> Sent via BlackBerry from T-Mobile
>
> -----Original Message-----
> From: Daniel<dmsilv at gmail.com>
> Date: Thu, 17 Jun 2010 08:34:16
> To:<r-sig-finance at stat.math.ethz.ch>
> Subject: [R-SIG-Finance] update cells
>
> Hello all,I have a table with about 18000 rows, I need to UPDATE the strings
> in the "name.x" column in each row by the strings from "name.y" given if
> "name.x" is NA or " ". How can I do it?
> Also I want to update values in other columns, but I think that will be the
> same job.
> Daniel
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
>
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
>
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
> 	[[alternative HTML version deleted]]
>
>
>
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com


From nelson.ana at gmail.com  Fri Jun 18 12:02:19 2010
From: nelson.ana at gmail.com (Ana Nelson)
Date: Fri, 18 Jun 2010 11:02:19 +0100
Subject: [R-SIG-Finance] Rbloomberg currency conversion
In-Reply-To: <13CB99597D0BAA43B07ABFCE29E45F6B02EECF6B@phx0mbx01.kochind.com>
References: <13CB99597D0BAA43B07ABFCE29E45F6B02EECF6B@phx0mbx01.kochind.com>
Message-ID: <AANLkTinaiAXwGRfeRErDdM0yUzy2W2deyexMgEZAb3W2@mail.gmail.com>

Hi, Kent,

Thanks for sending version info and a reproducible example! Page 96 of
Bloomberg API Reference has details on the options supported by
Historical Data Request.

"currency Optional string Currency of the ISO Code. The 3 letter ISO code."

So what you probably want is:

 Data <- bdh(conn, Instruments, Field, start_date=StartDate,
option_names="currency", option_values="USD")
> Data
                 date  PX_LAST
2010-05-28 2010-05-28 107.5455
2010-05-31 2010-05-31 107.1952
2010-06-01 2010-06-01 106.5595
2010-06-02 2010-06-02 104.2471
2010-06-03 2010-06-03 107.3662
2010-06-04 2010-06-04 107.9031
2010-06-07 2010-06-07 103.5432
2010-06-08 2010-06-08 104.4109
2010-06-09 2010-06-09 103.2276
2010-06-10 2010-06-10 104.7952
2010-06-11 2010-06-11 105.9525
2010-06-14 2010-06-14 107.6706
2010-06-15 2010-06-15 108.2063
2010-06-16 2010-06-16 110.1559
2010-06-17 2010-06-17 110.1377
2010-06-18 2010-06-18 110.3081
>

Regards,
Ana


From nelson.ana at gmail.com  Fri Jun 18 12:24:06 2010
From: nelson.ana at gmail.com (Ana Nelson)
Date: Fri, 18 Jun 2010 11:24:06 +0100
Subject: [R-SIG-Finance] Bloomberg API Developer's Guide
Message-ID: <AANLkTiniBgo80lH1gwYaFTjzlRxJ8rQDs1C4AvuHxVjU@mail.gmail.com>

For users of RBloomberg, it may be useful to have a copy of the
Bloomberg API Developer's Guide as this lists available options for
various types of request.

In your Bloomberg terminal, go to DOCS 2041121 or look for
documentation within WAPI.

Appendix A: Schemas has the good stuff. For example, how to request a
particular currency for historical requests is on page 121.

(in my previous email I referenced a different page number, I was
looking at the Bloomberg API Reference which I downloaded some time
ago and which I assume is an earlier version of this document)


From atp at piskorski.com  Fri Jun 18 16:35:34 2010
From: atp at piskorski.com (Andrew Piskorski)
Date: Fri, 18 Jun 2010 10:35:34 -0400
Subject: [R-SIG-Finance] About multi-dimension array on Binomial Tree
	Structure
In-Reply-To: <350165.88209.qm@web113108.mail.gq1.yahoo.com>
References: <350165.88209.qm@web113108.mail.gq1.yahoo.com>
Message-ID: <20100618143534.GB4791@piskorski.com>

On Thu, Jun 17, 2010 at 10:52:02PM -0700, JOSH C. CHIEN wrote:

> I just know that one-dimension array can be created by calling numeric() 
> and two-dim by calling matrix().
> But, more two-dim array, how to create ?

help("array")

-- 
Andrew Piskorski <atp at piskorski.com>
http://www.piskorski.com/


From VOSSK at kochind.com  Fri Jun 18 16:44:12 2010
From: VOSSK at kochind.com (Voss, Kent)
Date: Fri, 18 Jun 2010 07:44:12 -0700
Subject: [R-SIG-Finance] Rbloomberg currency conversion
In-Reply-To: <AANLkTinaiAXwGRfeRErDdM0yUzy2W2deyexMgEZAb3W2@mail.gmail.com>
References: <13CB99597D0BAA43B07ABFCE29E45F6B02EECF6B@phx0mbx01.kochind.com>
	<AANLkTinaiAXwGRfeRErDdM0yUzy2W2deyexMgEZAb3W2@mail.gmail.com>
Message-ID: <13CB99597D0BAA43B07ABFCE29E45F6B02EECF6C@phx0mbx01.kochind.com>

Thanks so much Ana, that worked a treat.  I've been looking for the API
Reference guide and cannot seem to find it.  I've found the API
Developer's Guide (version 2.22, published May 28, 2010), but I can't
find the details on options supported by bdh.  Could you let me know the
exact name of the Reference guide and then I'll see if I can track it
down on Bloomberg.

Thanks again,
Kent 

-----Original Message-----
From: Ana Nelson [mailto:nelson.ana at gmail.com] 
Sent: Friday, June 18, 2010 3:02 AM
To: r-sig-finance at stat.math.ethz.ch
Cc: Voss, Kent
Subject: Re: [R-SIG-Finance] Rbloomberg currency conversion

Hi, Kent,

Thanks for sending version info and a reproducible example! Page 96 of
Bloomberg API Reference has details on the options supported by
Historical Data Request.

"currency Optional string Currency of the ISO Code. The 3 letter ISO
code."

So what you probably want is:

 Data <- bdh(conn, Instruments, Field, start_date=StartDate,
option_names="currency", option_values="USD")
> Data
                 date  PX_LAST
2010-05-28 2010-05-28 107.5455
2010-05-31 2010-05-31 107.1952
2010-06-01 2010-06-01 106.5595
2010-06-02 2010-06-02 104.2471
2010-06-03 2010-06-03 107.3662
2010-06-04 2010-06-04 107.9031
2010-06-07 2010-06-07 103.5432
2010-06-08 2010-06-08 104.4109
2010-06-09 2010-06-09 103.2276
2010-06-10 2010-06-10 104.7952
2010-06-11 2010-06-11 105.9525
2010-06-14 2010-06-14 107.6706
2010-06-15 2010-06-15 108.2063
2010-06-16 2010-06-16 110.1559
2010-06-17 2010-06-17 110.1377
2010-06-18 2010-06-18 110.3081
>

Regards,
Ana


From nelson.ana at gmail.com  Fri Jun 18 18:39:22 2010
From: nelson.ana at gmail.com (Ana Nelson)
Date: Fri, 18 Jun 2010 17:39:22 +0100
Subject: [R-SIG-Finance] RBloomberg: Is there a limit to the size of a
	tick data download?
In-Reply-To: <AANLkTinjkaLwBfWBO9MBGEKHjy-WtnrJXV_SKXkkJO0u@mail.gmail.com>
References: <1276205345633-2251029.post@n4.nabble.com>
	<1276211569334-2251122.post@n4.nabble.com>
	<AANLkTimVRi8Nqp2cweVmOouMYfcM_vlUHgmhQZlj3KrR@mail.gmail.com>
	<AANLkTinjkaLwBfWBO9MBGEKHjy-WtnrJXV_SKXkkJO0u@mail.gmail.com>
Message-ID: <AANLkTinJDhyiqkHFDkCScdryciYHpOu_oNHH9-XapuuV@mail.gmail.com>

Cliff,

Latest revision r141 should fix this, can you try it out and let me
know if it works for you?

-Ana



On Mon, Jun 14, 2010 at 4:50 PM, Cliff Clive <cliffclive at gmail.com> wrote:
>
> Thanks again Ana.
>
> As always, I appreciate the hard work you're putting into maintaining
> this package.
>
> Best,
>
> Cliff
>
> On Mon, Jun 14, 2010 at 9:59 AM, Ana Nelson [via R]
> <ml-node+2254506-1815688372-241286 at n4.nabble.com> wrote:
>> Cliff,
>>
>> This looks like a bug in RBloomberg. I'll fix it in the next release,
>> in the mean time I suggest you batch your requests into smaller
>> increments (try 2 hours) and combine the results.
>>
>> Regards,
>> Ana
>>
>>
>>
>> On Fri, Jun 11, 2010 at 12:12 AM, Cliff Clive <[hidden email]> wrote:
>>>
>>> Thanks for the input Cedrick. ?I don't think it's a problem with
>>> Bloomberg's
>>> data limit, though; the files I've been getting have only been around
>>> 100-200 KB.
>>>
>>>
>>> I've played with it a bit more, and here's what I've found. ?I don't have
>>> a
>>> solution yet, but hopefully this will add some clarity for anyone
>>> interested
>>> in understanding my situation.
>>>
>>> To get a full day of data I wrote a loop that called for tick data in 5
>>> minute intervals throughout all of the hours of the trading day, and
>>> aggregated all of the downloads into one table. ?It's not a pretty
>>> solution,
>>> but it works... sort of.
>>>
>>> My new problem is, even within small intervals, I've found that it's only
>>> downloading ticks for about half of the interval (roughly the first 2 1/2
>>> minutes of each 5 minute interval). ?In fact my aggregated table is about
>>> the same size of file as my attempt to download the full day in one shot,
>>> making me think that I'm losing the same proportion of my data set each
>>> time, regardless of the size of the time interval. ?But that's just a
>>> hypothesis; I still don't know what is really going on.
>>>
>>> I'm wondering whether the problem is with R or if it's with Bloomberg.
>>> Maybe I'm trying to download at a busy time of day. ?I'll set up my
>>> program
>>> to run late tonight and see if it works any better.
>>>
>>> In the mean time, if anyone does have any suggestions, I would greatly
>>> appreciate them.
>>>
>>> Thanks,
>>>
>>> CC
>>> --
>>> View this message in context:
>>> http://r.789695.n4.nabble.com/RBloomberg-Is-there-a-limit-to-the-size-of-a-tick-data-download-tp2251029p2251122.html
>>> Sent from the Rmetrics mailing list archive at Nabble.com.
>>>
>>> _______________________________________________
>>> [hidden email] mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>> _______________________________________________
>> [hidden email] mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>>
>> ________________________________
>> View message @
>> http://r.789695.n4.nabble.com/RBloomberg-Is-there-a-limit-to-the-size-of-a-tick-data-download-tp2251029p2254506.html
>> To unsubscribe from Re: RBloomberg: Is there a limit to the size of a tick
>> data download?, click here.
>>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/RBloomberg-Is-there-a-limit-to-the-size-of-a-tick-data-download-tp2251029p2254601.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From cmdr_rogue at hotmail.com  Sat Jun 19 05:02:23 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Fri, 18 Jun 2010 23:02:23 -0400
Subject: [R-SIG-Finance] About multi-dimension array on Binomial Tree
 Structure
In-Reply-To: <350165.88209.qm@web113108.mail.gq1.yahoo.com>
References: <350165.88209.qm@web113108.mail.gq1.yahoo.com>
Message-ID: <BLU0-SMTP49C6686C878630602F7378E2C10@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100618/a5b5bc38/attachment.pl>

From enricoschumann at yahoo.de  Sat Jun 19 09:47:24 2010
From: enricoschumann at yahoo.de (Enrico Schumann)
Date: Sat, 19 Jun 2010 09:47:24 +0200
Subject: [R-SIG-Finance] About multi-dimension array on Binomial
	TreeStructure
In-Reply-To: <AANLkTil1sSY2nMBLV8mUTZAtvsMsBcO4a3Hj8yFjmlob@mail.gmail.com>
Message-ID: <92091.58752.qm@smtp123.mail.ukl.yahoo.com>



higham (2002) is a very good paper on implementing tree models. 
@ARTICLE{Higham2002,
  author = {Desmond J. Higham},
  title = {{Nine Ways to Implement the Binomial Method for Option Valuation
	in MATLAB}},
  journal = {SIAM Review},
  year = {2002},
  volume = {44},
  pages = {661--677},
  number = {4}
}

higham uses matlab*, but the same principles (eg, how to get rid off the
inner loop in a standard tree) also apply to R. the paper can be found here
http://personal.strath.ac.uk/d.j.higham/reps.html. [ an R implementation is
in here http://ssrn.com/abstract=1341181 ]


hth,
enrico

* slightly off-topic: the paper was written before the advent of the JIT
compiler in matlab, so the speedups gained from vectorization are smaller
today. there is also a JIT project in R:
http://www.milbo.users.sonic.net/ra/index.html 



 

> -----Urspr?ngliche Nachricht-----
> Von: r-sig-finance-bounces at stat.math.ethz.ch 
> [mailto:r-sig-finance-bounces at stat.math.ethz.ch] Im Auftrag 
> von Ulrich Staudinger
> Gesendet: Freitag, 18. Juni 2010 08:36
> An: JOSH C. CHIEN
> Cc: R-Finance
> Betreff: Re: [R-SIG-Finance] About multi-dimension array on 
> Binomial TreeStructure
> 
> Josh,
> 
> I can't help you with your coding problem, but with another one ..
> there is no single right way in finance and the best solution 
> depends on the environment. the used programming styles, 
> languages,methodologies, etc. vary between the houses as much 
> as its personel does. Whatever works!
> 
> Cheers,
> Ulrich
> 
> On Fri, Jun 18, 2010 at 7:52 AM, JOSH C. CHIEN 
> <cchien at alumni.poly.edu>wrote:
> 
> >
> > Hi R user,
> > I'm translating VBA code to R code for work.
> > Here is example,  I hope your guys can guide me how to program 
> > multi-dimension array, s price path, on tree structure.
> >
> > VBA Code
> > Dim s() as double
> > Dim v() as double
> > ReDim s(0 To NoSteps, 0 To NoSteps)
> > ReDim V(0 To NoSteps, 0 To NoSteps)
> >
> > I just know that one-dimension array can be created by calling 
> > numeric() and two-dim by calling matrix().
> > But, more two-dim array, how to create ? ( ex. trinomial Tree, HJM, 
> > BGM...... ) Is it right way to code on programing in finance ?
> > thanks a lot.
> >
> > Sincerely,
> > Josh
> >        [[alternative HTML version deleted]]
> >
> > _______________________________________________
> > R-SIG-Finance at stat.math.ethz.ch mailing list 
> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> > -- Subscriber-posting only. If you want to post, subscribe first.
> > -- Also note that this is not the r-help list where general R 
> > questions should go.
> >
> 
> 
> 
> --
> Kind regards,
> Ulrich B. Staudinger
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R 
> questions should go.
> Internal Virus Database is out of date.
> Checked by AVG - www.avg.com
> Version: 9.0.829 / Virus Database: 271.1.1/2929 - Release 
> Date: 06/10/10 08:35:00
> 


From ajayshah at mayin.org  Sat Jun 19 19:08:19 2010
From: ajayshah at mayin.org (Ajay Shah)
Date: Sat, 19 Jun 2010 22:38:19 +0530
Subject: [R-SIG-Finance] kdb and q?
Message-ID: <20100619170819.GQ1931@ajay-shahs-macbook-pro.local>

I wonder what the R community thinks about kdb and the q language.

A person from Morgan Stanley says that R is just great as a PL but for
the performance issues faced in finance with intra-day data and
real-time analysis, R is not able to keep up and they are doing a lot
of things with kdb and q.

-- 
Ajay Shah                                      http://www.mayin.org/ajayshah  
ajayshah at mayin.org                             http://ajayshahblog.blogspot.com
<*(:-? - wizard who doesn't know the answer.


From daniel.cegielka at gmail.com  Sat Jun 19 19:41:13 2010
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Sat, 19 Jun 2010 19:41:13 +0200
Subject: [R-SIG-Finance] kdb and q?
In-Reply-To: <20100619170819.GQ1931@ajay-shahs-macbook-pro.local>
References: <20100619170819.GQ1931@ajay-shahs-macbook-pro.local>
Message-ID: <AANLkTinWQx0yQ2QrTTQabww8tfkDHpeBR4U6d_lKc7XC@mail.gmail.com>

You should ask on kdb/q list what they think about.

kdb/q is really solid product.. but horrible expensive.

R in general isn't so fast like q but we have really fast packages
like xts and indexing and you can work even with TB of tick data...
and (xts+indexing) you can compare with kdb.

So I think that if you know, what you really need, you can build
really fast product based on R... and it's free.

regards,
daniel

2010/6/19 Ajay Shah <ajayshah at mayin.org>:
> I wonder what the R community thinks about kdb and the q language.
>
> A person from Morgan Stanley says that R is just great as a PL but for
> the performance issues faced in finance with intra-day data and
> real-time analysis, R is not able to keep up and they are doing a lot
> of things with kdb and q.
>
> --
> Ajay Shah ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?http://www.mayin.org/ajayshah
> ajayshah at mayin.org ? ? ? ? ? ? ? ? ? ? ? ? ? ? http://ajayshahblog.blogspot.com
> <*(:-? - wizard who doesn't know the answer.
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From edd at debian.org  Sat Jun 19 19:54:58 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 19 Jun 2010 12:54:58 -0500
Subject: [R-SIG-Finance] kdb and q?
In-Reply-To: <20100619170819.GQ1931@ajay-shahs-macbook-pro.local>
References: <20100619170819.GQ1931@ajay-shahs-macbook-pro.local>
Message-ID: <19485.1138.160382.321299@ron.nulle.part>


Hi Ajay,

On 19 June 2010 at 22:38, Ajay Shah wrote:
| I wonder what the R community thinks about kdb and the q language.

I'm in favour, but see below.

| A person from Morgan Stanley says that R is just great as a PL but for

That would be APL, which they reinvented as aplus which you get for free in
Debian and Ubuntu these days as they 'freed it' a few years ago:

edd at ron:~$ apt-cache search aplus
aplus-fsf-dev - A+ programming language development environment
aplus-fsf-doc - A+ programming language documentation
aplus-fsf-el - XEmacs lisp for A+ development
aplus-fsf - A+ programming language run-time environment
edd at ron:~$

| the performance issues faced in finance with intra-day data and
| real-time analysis, R is not able to keep up and they are doing a lot
| of things with kdb and q.

Right. No single language is best for all tools.  So you mix and match, which
is precisely what a lot of investment firms do in-house.

At work, we looked at kdb/q and I even patched their (then more basic then
now) R bindings provided via the (nice) wiki they host; see my blog for that
patch.  Kdb gives you a free-as-in-beer version for 32bit OS which times out
after two hours.  Great for experimenting as you get a feel for the product.

We ended up going with a competing product we liked better -- OneTick.  For
that backend, I wrote a (if I dare say so) rather nice internal R package
using their C++ API and the Rcpp package for R/C++ integration.  Now I get
the best of all three worlds: a blazing fast backend/tick store with its own
language for querying, an interface to R permitting the usual broad range of
analysis as well as direct C++ access to other parts of production.

-- 
  Regards, Dirk


From nick.torenvliet at gmail.com  Sun Jun 20 01:10:20 2010
From: nick.torenvliet at gmail.com (Nick Torenvliet)
Date: Sat, 19 Jun 2010 19:10:20 -0400
Subject: [R-SIG-Finance] Recomendations for backtesting...
Message-ID: <AANLkTikHXiDHDyGuRStpIinxg3H3_cY7sMYHK8ZGG-eo@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100619/541b0308/attachment.pl>

From daniel.cegielka at gmail.com  Sun Jun 20 02:08:52 2010
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Sun, 20 Jun 2010 02:08:52 +0200
Subject: [R-SIG-Finance] Recomendations for backtesting...
In-Reply-To: <AANLkTikHXiDHDyGuRStpIinxg3H3_cY7sMYHK8ZGG-eo@mail.gmail.com>
References: <AANLkTikHXiDHDyGuRStpIinxg3H3_cY7sMYHK8ZGG-eo@mail.gmail.com>
Message-ID: <AANLkTikBMHH1fxHKqp1m8_Q1bdWUl2-Zntdvr6A587mP@mail.gmail.com>

try "blotter":

http://r-forge.r-project.org/projects/blotter/

regards,
daniel

2010/6/20 Nick Torenvliet <nick.torenvliet at gmail.com>:
> My short term goal is to put together enough tools to investigate
> algorithmic trading strategies -- everything I've read about and more.
>
> Long term goal is to put, short, long, call, swap and iterate gracefully :-)
>
> So at this point I have the following in hand:
>
> - End of day data for virtually anything I want to take a look at via
> www.eoddata.com and some code I wrote that can be found at
> http://code.google.com/p/quantkit/ (warning ... developed plugging his
> work... if you are interested and can't figure out how to build the svn
> checkout let me know I'd be more than happy to assist)
> - Intraday data for specific contracts I want to drill down on using the R
> package IBrokers -- (thanks Jeff)
> - As much graphing and technical indicators as I could want using R package
> quantmod -- (thanks again Jeff)
> - Trade initiation via activequant or IBrokers (thanks Ulrich), or just
> using the IB api straight up.
> - Some business media text mining capability using more stuff at the link
> above and the R package tm (thanks Ingo)
>
> I am now looking at trying my hand at backtesting. ?I've looked at
> activequant and I like it a lot, however that being said at this point I'd
> be into a command line tool based in R that would allow me to set up a time
> series block and run functions against it as fast as I can type them.
>
> Which bring me back to something in R -- I know Ulrich is putting together
> some R/activequant backtesting functionality and I know quantmod and
> backtest are two R packages that can support backtesting.
>
> Two questions... am I missing any options for backtesting in R AND is anyone
> willing to share the benefit of experience, or make recomendations, with
> regards to these packages...
>
> Regards and enjoy this absolutely beautiful weekend - it is time to find a
> patio somewhere!!
>
> Nick
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From vijay at myemailforever.com  Sun Jun 20 07:38:30 2010
From: vijay at myemailforever.com (Vijay Vaidyanathan)
Date: Sat, 19 Jun 2010 22:38:30 -0700
Subject: [R-SIG-Finance] Recomendations for backtesting...
In-Reply-To: <AANLkTikBMHH1fxHKqp1m8_Q1bdWUl2-Zntdvr6A587mP@mail.gmail.com>
References: <AANLkTikHXiDHDyGuRStpIinxg3H3_cY7sMYHK8ZGG-eo@mail.gmail.com>
	<AANLkTikBMHH1fxHKqp1m8_Q1bdWUl2-Zntdvr6A587mP@mail.gmail.com>
Message-ID: <577732BD-B532-443F-9E86-D62ED18F0F66@myemailforever.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100619/4bb486bc/attachment.pl>

From ustaudinger at gmail.com  Sun Jun 20 13:36:00 2010
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Sun, 20 Jun 2010 13:36:00 +0200
Subject: [R-SIG-Finance] Recomendations for backtesting...
In-Reply-To: <AANLkTikBMHH1fxHKqp1m8_Q1bdWUl2-Zntdvr6A587mP@mail.gmail.com>
References: <AANLkTikHXiDHDyGuRStpIinxg3H3_cY7sMYHK8ZGG-eo@mail.gmail.com>
	<AANLkTikBMHH1fxHKqp1m8_Q1bdWUl2-Zntdvr6A587mP@mail.gmail.com>
Message-ID: <05a401cb106c$c28f6180$47ae2480$@com>

Try AQ-R, the R offspring of activeQuant. It's in the aq svn repository and,
if you ask me, without down setting the other packages, it is much more
suited and also much more practical for large scale backtesting than the
other ones, it works with bid/ask prices and just as an example, it uses
vectors and not iterations ... 

Well, room for discussion ... 

Cheers

-----Original Message-----
From: r-sig-finance-bounces at stat.math.ethz.ch
[mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of Daniel
Cegielka
Sent: Sonntag, 20. Juni 2010 02:09
To: Nick Torenvliet
Cc: r-sig-finance at stat.math.ethz.ch
Subject: Re: [R-SIG-Finance] Recomendations for backtesting...

try "blotter":

http://r-forge.r-project.org/projects/blotter/

regards,
daniel

2010/6/20 Nick Torenvliet <nick.torenvliet at gmail.com>:
> My short term goal is to put together enough tools to investigate
> algorithmic trading strategies -- everything I've read about and more.
>
> Long term goal is to put, short, long, call, swap and iterate gracefully
:-)
>
> So at this point I have the following in hand:
>
> - End of day data for virtually anything I want to take a look at via
> www.eoddata.com and some code I wrote that can be found at
> http://code.google.com/p/quantkit/ (warning ... developed plugging his
> work... if you are interested and can't figure out how to build the svn
> checkout let me know I'd be more than happy to assist)
> - Intraday data for specific contracts I want to drill down on using the R
> package IBrokers -- (thanks Jeff)
> - As much graphing and technical indicators as I could want using R
package
> quantmod -- (thanks again Jeff)
> - Trade initiation via activequant or IBrokers (thanks Ulrich), or just
> using the IB api straight up.
> - Some business media text mining capability using more stuff at the link
> above and the R package tm (thanks Ingo)
>
> I am now looking at trying my hand at backtesting. ?I've looked at
> activequant and I like it a lot, however that being said at this point I'd
> be into a command line tool based in R that would allow me to set up a
time
> series block and run functions against it as fast as I can type them.
>
> Which bring me back to something in R -- I know Ulrich is putting together
> some R/activequant backtesting functionality and I know quantmod and
> backtest are two R packages that can support backtesting.
>
> Two questions... am I missing any options for backtesting in R AND is
anyone
> willing to share the benefit of experience, or make recomendations, with
> regards to these packages...
>
> Regards and enjoy this absolutely beautiful weekend - it is time to find a
> patio somewhere!!
>
> Nick
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
should go.
>

_______________________________________________
R-SIG-Finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.


From brian at braverock.com  Sun Jun 20 14:37:52 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 20 Jun 2010 07:37:52 -0500
Subject: [R-SIG-Finance] !SPAM: Re:  Recomendations for backtesting...
In-Reply-To: <05a401cb106c$c28f6180$47ae2480$@com>
References: <AANLkTikHXiDHDyGuRStpIinxg3H3_cY7sMYHK8ZGG-eo@mail.gmail.com>	<AANLkTikBMHH1fxHKqp1m8_Q1bdWUl2-Zntdvr6A587mP@mail.gmail.com>
	<05a401cb106c$c28f6180$47ae2480$@com>
Message-ID: <4C1E0BA0.2050409@braverock.com>

On 06/20/2010 06:36 AM, Ulrich Staudinger wrote:
> Try AQ-R, the R offspring of activeQuant. It's in the aq svn repository and,
> if you ask me, without down setting the other packages, it is much more
> suited and also much more practical for large scale backtesting than the
> other ones, it works with bid/ask prices and just as an example, it uses
> vectors and not iterations ...

Not everything can be vectorized.

While it is true that much in strategy execution can and should be vectorized, 
at some point there are path dependent steps.  You have a maximum position, or 
your next trade depends on the current trade, or you target position is some 
percentage of current account equity.  While indicators and signals can often 
be vectorized, these path-dependent steps are also a part of strategy 
execution.  Even some indicators are iterative, such as any ARMA or GARCH or 
Kalman model.

That aside, there are always opportunities for performance improvement, and 
C/C++ are readily available for places where the code needs to be faster.

Cheers,

   - Brian


From ustaudinger at gmail.com  Sun Jun 20 15:01:14 2010
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Sun, 20 Jun 2010 15:01:14 +0200
Subject: [R-SIG-Finance] Recomendations for backtesting...
In-Reply-To: <4C1E0BA0.2050409@braverock.com>
References: <AANLkTikHXiDHDyGuRStpIinxg3H3_cY7sMYHK8ZGG-eo@mail.gmail.com>	<AANLkTikBMHH1fxHKqp1m8_Q1bdWUl2-Zntdvr6A587mP@mail.gmail.com>
	<05a401cb106c$c28f6180$47ae2480$@com>
	<4C1E0BA0.2050409@braverock.com>
Message-ID: <05a501cb1078$ab29bbb0$017d3310$@com>

Brian, 

I indeed agree with you, not everything can be vectorized and your path
dependent examples are indeed a great visualization of exactly this.
Nonetheless, for many basic algorithms where you have a clear situations
like "be short 5", "be long 2", vectorization is (from my point of view) the
way to go. 

Maximum positions, conditional trades (if former trade executed) seem to
make vectorization impossible. 

In the end I think it depends on the algo and the framework, I doubt that a
generic backtesting framework can be a winner in maximum performance and the
best feature richness at the same time. As an example, blotter (IIRC) uses
short and long buy and sell commands to memorize/process orders. Whereas
this gives a lot of flexibility when one just wants to process a price list,
it seems to be less optimal from the performance point of view, as (IIRC)
this approach depends on iterating over the mentioned price list. 

As already said, the different frameworks are really great and very likely
fit different needs. 

Kind regards, 
Ulrich

-----Original Message-----
From: Brian G. Peterson [mailto:brian at braverock.com] 
Sent: Sonntag, 20. Juni 2010 14:38
To: Ulrich Staudinger
Cc: 'Daniel Cegie?ka'; 'Nick Torenvliet'; r-sig-finance at stat.math.ethz.ch
Subject: Re: [R-SIG-Finance] Recomendations for backtesting...

On 06/20/2010 06:36 AM, Ulrich Staudinger wrote:
> Try AQ-R, the R offspring of activeQuant. It's in the aq svn repository
and,
> if you ask me, without down setting the other packages, it is much more
> suited and also much more practical for large scale backtesting than the
> other ones, it works with bid/ask prices and just as an example, it uses
> vectors and not iterations ...

Not everything can be vectorized.

While it is true that much in strategy execution can and should be
vectorized, 
at some point there are path dependent steps.  You have a maximum position,
or 
your next trade depends on the current trade, or you target position is some

percentage of current account equity.  While indicators and signals can
often 
be vectorized, these path-dependent steps are also a part of strategy 
execution.  Even some indicators are iterative, such as any ARMA or GARCH or

Kalman model.

That aside, there are always opportunities for performance improvement, and 
C/C++ are readily available for places where the code needs to be faster.

Cheers,

   - Brian


From atp at piskorski.com  Sun Jun 20 18:11:39 2010
From: atp at piskorski.com (Andrew Piskorski)
Date: Sun, 20 Jun 2010 12:11:39 -0400
Subject: [R-SIG-Finance] kdb and q?
In-Reply-To: <20100619170819.GQ1931@ajay-shahs-macbook-pro.local>
References: <20100619170819.GQ1931@ajay-shahs-macbook-pro.local>
Message-ID: <20100620161139.GA88569@piskorski.com>

On Sat, Jun 19, 2010 at 10:38:19PM +0530, Ajay Shah wrote:
> I wonder what the R community thinks about kdb and the q language.

K and Q always sounded very interesting and worth learning from, but
their closed nature and very high license fees present a rather large
disincentive.  (When learning a new programming language, I'd much
rather choose one that I have the freedom to use however I like down
the road.)

There are a plethora of interesting new database products and startups
around now; Vertica, VectorWise (MonetDB/x100), VoltDB, SciDB (if it
ever gets anywhere), etc.  Unfortunately, I've never seen a good
explanation of how Kdb is similar/different to any of those.

Also, in my own experience the SQL:2003 "OLAP" order-aware operators
(lead, lag, dense_rank over partition by, etc.) are, despite their
clunky syntax, absolutely critical for serious use of market data
(e.g., daily prices or company fundamentals) in a general purpose
RDBMS like Oracle.

Perhaps Q provides similar or better power in a cleaner or faster way,
I don't know.  It would certainly be nice to have it available
directly in your programming language rather than solely in an RDBMS
at the far end of a client-server pipe.  (The same is true for many
other features of the RDBMS; it's shocking how little programming
language environments and libraries have learned from the RDBMS over
the years.)

I've long heard hints that vector languages like K and APL may tend to
map naturally to a more powerful order-aware superset of the
(unordered) relational model, but academic database researchers seem
to have written very little about this.  The only reference I've heard
of that even might be relevant (but which I've never read) is:

  http://www.amazon.com/gp/product/0201593793/102-7773671-0297757
  http://lambda-the-ultimate.org/node/3761#comment-55078

> A person from Morgan Stanley says that R is just great as a PL but for
> the performance issues faced in finance with intra-day data and
> real-time analysis, R is not able to keep up and they are doing a lot
> of things with kdb and q.

Well, Morgan Stanley is where Arthur Whitney wrote A+ before leaving
to do K, and as of 2004 Morgan (according to Whitney) was still using
A+ internally.  So, Morgan probably has the lowest bar of any big firm
to using K, Q, or other "weird" APL-derived languages.

I'd be curious to know who else is using K and its family of products;
also how many just use Kdb as a more-or-less black box vs. are doing
real programming in K and/or Q.  (I suspect that most of Kx Systems'
revenue comes from Kdb; smart move for them.)

Btw, there were other APL shops building databases targeted at Wall
Street, Kdb just seems to have been (by far) the most successful of
them.  Soliton in Canada built TimeSquare (using Sharp APL), which I
evaluated back c. 2001 by implementing (part of) Shasha's FinTime
benchmarks on both TimeSquare and Oracle 8i.  The Soliton folks seemed
pretty sharp, but from what I recall, TimeSquare wasn't really any
faster than Oracle.  (Since we already needed Oracle for other tasks
and didn't really intend to become any APL programmers, that made the
decision straightforward.)  Tick data is likely a different ballgame
from that, of course.

-- 
Andrew Piskorski <atp at piskorski.com>
http://www.piskorski.com/


From breman.mark at gmail.com  Mon Jun 21 08:28:09 2010
From: breman.mark at gmail.com (Mark Breman)
Date: Mon, 21 Jun 2010 08:28:09 +0200
Subject: [R-SIG-Finance] Recomendations for backtesting...
In-Reply-To: <AANLkTikHXiDHDyGuRStpIinxg3H3_cY7sMYHK8ZGG-eo@mail.gmail.com>
References: <AANLkTikHXiDHDyGuRStpIinxg3H3_cY7sMYHK8ZGG-eo@mail.gmail.com>
Message-ID: <AANLkTikH6gIfzWXpSFVA-LFmu3P2qM_DtiQflsKUifhT@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100621/a909e618/attachment.pl>

From jantiom at gmail.com  Mon Jun 21 15:51:43 2010
From: jantiom at gmail.com (jondollar)
Date: Mon, 21 Jun 2010 06:51:43 -0700 (PDT)
Subject: [R-SIG-Finance] R and Metatrader
In-Reply-To: <1269676516179-1693168.post@n4.nabble.com>
References: <1269676516179-1693168.post@n4.nabble.com>
Message-ID: <1277128303444-2262676.post@n4.nabble.com>


I would be interested also in interfacing R and Metratrader.

I've already made similar interface with Matlab.

I see two possibilities :

- through a database : interface as MySQL DLL for MT4 
- through a socket on the local address 127.0.0.0

I think that the second choice will be faster but there we need to define
message structure for data exchange, while the database tables are easy to
build, using timestamp as primary key

Using the database also provides easy management of historical data.

Are you looking for work at tick level or timeframe ?

I would not use the DDE server to get quotes from MT4 as it allows only one
way, so that R could not send data to MT4.

I'm new to R, so I would need to dig in, but I'm very interested to access
the nice stats libraries,

and contribute to such nice project ..

Rgds.
-- 
View this message in context: http://r.789695.n4.nabble.com/R-and-Metatrader-tp1693168p2262676.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From ezivot at u.washington.edu  Tue Jun 22 02:09:58 2010
From: ezivot at u.washington.edu (Eric Zivot)
Date: Mon, 21 Jun 2010 17:09:58 -0700
Subject: [R-SIG-Finance] aligning xts object to regularly spaced time clock
Message-ID: <002e01cb119f$408bff20$c1a3fd60$@washington.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100621/466827a6/attachment.pl>

From Achim.Zeileis at uibk.ac.at  Tue Jun 22 02:50:50 2010
From: Achim.Zeileis at uibk.ac.at (Achim Zeileis)
Date: Tue, 22 Jun 2010 02:50:50 +0200 (CEST)
Subject: [R-SIG-Finance] aligning xts object to regularly spaced time
 clock
In-Reply-To: <002e01cb119f$408bff20$c1a3fd60$@washington.edu>
References: <002e01cb119f$408bff20$c1a3fd60$@washington.edu>
Message-ID: <alpine.DEB.2.00.1006220234020.15786@paninaro.uibk.ac.at>

On Mon, 21 Jun 2010, Eric Zivot wrote:

> I am trying to align an xts object containing irregularly spaced intra-day
> price data to a regularly spaced time clock so that I can do realized
> variance/covariance calculations. For example, I have two xts objects
> msftTrades and geTrades created by the RTAQ package (the time index variable
> is a timeDate object) :

I suspect that xts has some high-level tools that could be leveraged for 
this. But as a primitive zoo developer, I only know how to do it by hand 
(which is hopefully still useful):
   1. construct regular time index
   2. expand series to regular grid (via merge)
   3. use na.locf() for "last observation carried forward"

I used only a subset of your data:

## data
x <- xts(c(30.62, 30.64, 30.66, 30.71, 30.705, 30.695, 30.725, 30.74),
   timeDate(c("2010-01-04 09:30:00", "2010-01-04 09:30:01",
   "2010-01-04 09:30:02", "2010-01-04 09:30:03", "2010-01-04 09:30:04",
   "2010-01-04 09:30:05", "2010-01-04 09:30:06", "2010-01-04 09:30:07")))
y <- xts(c(15.21, 15.22, 15.23, 15.24), timeDate(c("2010-01-04 09:30:01",
   "2010-01-04 09:30:03", "2010-01-04 09:30:06", "2010-01-04 09:30:07")))

## 1. regular index
ix <- seq(min(c(start(x), start(y))), max(c(end(x), end(y))), by = "1 s")

## 2. merged series on all time stamps
xy <- merge(xts(,ix), x = x, y = y)

## 3. last observation carried forward
xy <- na.locf(xy)

## collect data on regular index
window(xy, ix)

Remarks:
   - Note that this is fully symmetric in x and y.
   - It would work analogously for "zoo" series.
   - For other index classes, only the regular index construction would
     need to be changed (which, I think, is the main reason that this is
     not readily available in "zoo").

hth,
Z

>
>
>> start(msftTrades)
>
> GMT
>
> [1] [2010-01-04 09:30:00]
>
>> end(msftTrades)
>
> GMT
>
> [1] [2010-01-04 16:00:00]
>
>> start(geTrades)
>
> GMT
>
> [1] [2010-01-04 09:30:01]
>
>> end(geTrades)
>
> GMT
>
> [1] [2010-01-04 15:59:59]
>
>
>
>> msftTrades$PRICE[1:10,]
>
>                    PRICE
>
> 2010-01-04 09:30:00 "30.62"
>
> 2010-01-04 09:30:01 "30.64"
>
> 2010-01-04 09:30:02 "30.66"
>
> 2010-01-04 09:30:03 "30.71"
>
> 2010-01-04 09:30:04 "30.705"
>
> 2010-01-04 09:30:05 "30.695"
>
> 2010-01-04 09:30:06 "30.725"
>
> 2010-01-04 09:30:07 "30.74"
>
> 2010-01-04 09:30:08 "30.74"
>
> 2010-01-04 09:30:09 "30.74"
>
>> geTrades$PRICE[1:10,]
>
>                    PRICE
>
> 2010-01-04 09:30:01 "15.21"
>
> 2010-01-04 09:30:03 "15.22"
>
> 2010-01-04 09:30:06 "15.23"
>
> 2010-01-04 09:30:07 "15.24"
>
> 2010-01-04 09:30:08 "15.23"
>
> 2010-01-04 09:30:09 "15.23"
>
> 2010-01-04 09:30:10 "15.22"
>
> 2010-01-04 09:30:11 "15.22"
>
> 2010-01-04 09:30:13 "15.22"
>
> 2010-01-04 09:30:14 "15.21"
>
>
>
> Here, the trade prices are recorded to the nearest second but are
> irregularly spaced and the time clocks for MSFT and GE are different. For
> example, there is no transaction for GE at 09:30:02. I want to do the
> following
>
>
>
> 1.       Create a regularly spaced one second time clock between 9:30 and
> 16:00
>
> 2.       Align the two price series to this regularly spaced time clock
> using the "previous tick" method
>
>
>
> For (1),  I can use the timeDate align() function to get the regularly
> spaced time clock. For example,
>
>
>
>> td1sec = align(index(msftTrades), by="1s")
>
>> start(td1sec)
>
> GMT
>
> [1] [2010-01-04 09:30:00]
>
>> end(td1sec)
>
> GMT
>
> [1] [2010-01-04 16:00:00]
>
>> td1sec[1:5]
>
> GMT
>
> [1] [2010-01-04 09:30:00] [2010-01-04 09:30:01] [2010-01-04 09:30:02]
> [2010-01-04 09:30:03] [2010-01-04 09:30:04]
>
>> length(td1sec)
>
> [1] 23401
>
>
>
> I can't figure out how to do (2). I want to align the data in msftTrades and
> geTrades to the new time index td1sec. For the observations that do not
> occur on a given time stamp, I want to use the previous tick for that
> observation. (In S-PLUS I can easily do this using the align() function).
> The RTAQ package has a function called aggregatets() that almost does what I
> want. It will  do the previous tick aggregation to a one second clock but it
> will omit observations in case an interval is empty.
>
>
>
> For example, what I want for the geTrades data aligned to the one-second
> time clock is the following:
>
>
>
> 2010-01-04 09:30:00  NA
>
> 2010-01-04 09:30:01 "15.21"
>
> 2010-01-04 09:30:02  "15.21"
>
> 2010-01-04 09:30:03 "15.22"
>
> 2010-01-04 09:30:04 "15.22"
>
> 2010-01-04 09:30:05  "15.22"
>
> 2010-01-04 09:30:06 "15.23"
>
> 2010-01-04 09:30:07 "15.24"
>
> 2010-01-04 09:30:08 "15.23"
>
> 2010-01-04 09:30:09 "15.23"
>
> 2010-01-04 09:30:10 "15.22"
>
> 2010-01-04 09:30:11 "15.22"
>
> 2010-01-04 09:30:12 "15.22"
>
> 2010-01-04 09:30:13 "15.22"
>
> 2010-01-04 09:30:14 "15.21"
>
> .
>
>
>
>
>
>
>
>
>
>
>
>
>
> Eric Zivot
>
> Professor and Gary Waterman Distinguished Scholar
>
> Department of Economics
>
> Adjunct Professor of Finance
>
> Adjunct Professor of Statistics
>
> Box 353330                  email:  ezivot at u.washington.edu
>
> University of Washington    phone:  206-543-6715
>
> Seattle, WA 98195-3330
> www:  http://faculty.washington.edu/ezivot
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From edd at debian.org  Tue Jun 22 03:17:32 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Mon, 21 Jun 2010 20:17:32 -0500
Subject: [R-SIG-Finance] aligning xts object to regularly spaced time
 clock
In-Reply-To: <alpine.DEB.2.00.1006220234020.15786@paninaro.uibk.ac.at>
References: <002e01cb119f$408bff20$c1a3fd60$@washington.edu>
	<alpine.DEB.2.00.1006220234020.15786@paninaro.uibk.ac.at>
Message-ID: <19488.3884.136477.363278@ron.nulle.part>


On 22 June 2010 at 02:50, Achim Zeileis wrote:
| On Mon, 21 Jun 2010, Eric Zivot wrote:
| 
| > I am trying to align an xts object containing irregularly spaced intra-day
| > price data to a regularly spaced time clock so that I can do realized
| > variance/covariance calculations. For example, I have two xts objects
| > msftTrades and geTrades created by the RTAQ package (the time index variable
| > is a timeDate object) :
| 
| I suspect that xts has some high-level tools that could be leveraged for 
| this. 

Yup, I reckon that   help(to.period)   would be what Eric is looking for.

-- 
  Regards, Dirk


From brian at braverock.com  Tue Jun 22 03:25:34 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 21 Jun 2010 20:25:34 -0500
Subject: [R-SIG-Finance] !SPAM: Re: aligning xts object to regularly spaced
 time clock
In-Reply-To: <003f01cb11a5$16d142c0$4473c840$@washington.edu>
References: <002e01cb119f$408bff20$c1a3fd60$@washington.edu>
	<4C200218.6010501@braverock.com>
	<003f01cb11a5$16d142c0$4473c840$@washington.edu>
Message-ID: <4C20110E.7010100@braverock.com>

(to.period isn't the correct function for this)

Typically, on tick data, I will use align.time to get everything on an even 
index, like seconds.  This will only align on a period where you have an 
observation, as you've noticed.

Then, to get to precisely what you want, you'd do:

#this will insert NA's on the missing time stamps
index(geTrades) <- td1sec

# then this fills it in
geTrades <- na.locf(geTrades)

Regards,

    - Brian

On 06/21/2010 07:51 PM, Eric Zivot wrote:
> Brian
> I saw this function but wasn't sure how it worked. Unfortunately, it doesn't
> seem to do the trick (see below)
>
>> geTrades[1:10,]
>                      SYMBOL EX  PRICE   SIZE    COND CR   G127
> 2010-01-04 09:30:01 "GE"   "T" "15.21" "67099" ""   " 0" "0"
> 2010-01-04 09:30:03 "GE"   "Z" "15.22" "100"   "F"  " 0" "0"
> 2010-01-04 09:30:06 "GE"   "P" "15.23" "3950"  "F"  " 0" "0"
> 2010-01-04 09:30:07 "GE"   "T" "15.24" "1500"  "F"  " 0" "0"
> 2010-01-04 09:30:08 "GE"   "D" "15.23" "8000"  "F"  " 0" "0"
> 2010-01-04 09:30:09 "GE"   "P" "15.23" "1300"  "F"  " 0" "0"
> 2010-01-04 09:30:10 "GE"   "Z" "15.22" "11800" "F"  " 0" "0"
> 2010-01-04 09:30:11 "GE"   "D" "15.22" "5000"  "F"  " 0" "0"
> 2010-01-04 09:30:13 "GE"   "Z" "15.22" "1200"  "F"  " 0" "0"
> 2010-01-04 09:30:14 "GE"   "N" "15.21" "11900" "F"  " 0" "0"
>> geNew = align.time(geTrades, 1)
>> geNew[1:10,]
>                      SYMBOL EX  PRICE   SIZE    COND CR   G127
> 2010-01-04 01:30:02 "GE"   "T" "15.21" "67099" ""   " 0" "0"
> 2010-01-04 01:30:04 "GE"   "Z" "15.22" "100"   "F"  " 0" "0"
> 2010-01-04 01:30:07 "GE"   "P" "15.23" "3950"  "F"  " 0" "0"
> 2010-01-04 01:30:08 "GE"   "T" "15.24" "1500"  "F"  " 0" "0"
> 2010-01-04 01:30:09 "GE"   "D" "15.23" "8000"  "F"  " 0" "0"
> 2010-01-04 01:30:10 "GE"   "P" "15.23" "1300"  "F"  " 0" "0"
> 2010-01-04 01:30:11 "GE"   "Z" "15.22" "11800" "F"  " 0" "0"
> 2010-01-04 01:30:12 "GE"   "D" "15.22" "5000"  "F"  " 0" "0"
> 2010-01-04 01:30:14 "GE"   "Z" "15.22" "1200"  "F"  " 0" "0"
> 2010-01-04 01:30:15 "GE"   "N" "15.21" "11900" "F"  " 0" "0"
>> align.time(index(geTrades), 1)
> Error in UseMethod("align.time") :
>    no applicable method for 'align.time' applied to an object of class
> "timeDate"
>
> -----Original Message-----
> From: Brian G. Peterson [mailto:brian at braverock.com]
> Sent: Monday, June 21, 2010 5:22 PM
> To: Eric Zivot
> Cc: r-sig-finance at stat.math.ethz.ch
> Subject: Re: [R-SIG-Finance] aligning xts object to regularly spaced time
> clock
>
> The function you want is align.time()
>
> It is written to do what you're asking for.
>
> Regards,
>
>      - Brian
>
> On 06/21/2010 07:09 PM, Eric Zivot wrote:
>> I am trying to align an xts object containing irregularly spaced intra-day
>> price data to a regularly spaced time clock so that I can do realized
>> variance/covariance calculations. For example, I have two xts objects
>> msftTrades and geTrades created by the RTAQ package (the time index
> variable
>> is a timeDate object) :
>>
>>
>>
>>> start(msftTrades)
>>
>> GMT
>>
>> [1] [2010-01-04 09:30:00]
>>
>>> end(msftTrades)
>>
>> GMT
>>
>> [1] [2010-01-04 16:00:00]
>>
>>> start(geTrades)
>>
>> GMT
>>
>> [1] [2010-01-04 09:30:01]
>>
>>> end(geTrades)
>>
>> GMT
>>
>> [1] [2010-01-04 15:59:59]
>>
>>
>>
>>> msftTrades$PRICE[1:10,]
>>
>>                       PRICE
>>
>> 2010-01-04 09:30:00 "30.62"
>>
>> 2010-01-04 09:30:01 "30.64"
>>
>> 2010-01-04 09:30:02 "30.66"
>>
>> 2010-01-04 09:30:03 "30.71"
>>
>> 2010-01-04 09:30:04 "30.705"
>>
>> 2010-01-04 09:30:05 "30.695"
>>
>> 2010-01-04 09:30:06 "30.725"
>>
>> 2010-01-04 09:30:07 "30.74"
>>
>> 2010-01-04 09:30:08 "30.74"
>>
>> 2010-01-04 09:30:09 "30.74"
>>
>>> geTrades$PRICE[1:10,]
>>
>>                       PRICE
>>
>> 2010-01-04 09:30:01 "15.21"
>>
>> 2010-01-04 09:30:03 "15.22"
>>
>> 2010-01-04 09:30:06 "15.23"
>>
>> 2010-01-04 09:30:07 "15.24"
>>
>> 2010-01-04 09:30:08 "15.23"
>>
>> 2010-01-04 09:30:09 "15.23"
>>
>> 2010-01-04 09:30:10 "15.22"
>>
>> 2010-01-04 09:30:11 "15.22"
>>
>> 2010-01-04 09:30:13 "15.22"
>>
>> 2010-01-04 09:30:14 "15.21"
>>
>>
>>
>> Here, the trade prices are recorded to the nearest second but are
>> irregularly spaced and the time clocks for MSFT and GE are different. For
>> example, there is no transaction for GE at 09:30:02. I want to do the
>> following
>>
>>
>>
>> 1.       Create a regularly spaced one second time clock between 9:30 and
>> 16:00
>>
>> 2.       Align the two price series to this regularly spaced time clock
>> using the "previous tick" method
>>
>>
>>
>> For (1),  I can use the timeDate align() function to get the regularly
>> spaced time clock. For example,
>>
>>
>>
>>> td1sec = align(index(msftTrades), by="1s")
>>
>>> start(td1sec)
>>
>> GMT
>>
>> [1] [2010-01-04 09:30:00]
>>
>>> end(td1sec)
>>
>> GMT
>>
>> [1] [2010-01-04 16:00:00]
>>
>>> td1sec[1:5]
>>
>> GMT
>>
>> [1] [2010-01-04 09:30:00] [2010-01-04 09:30:01] [2010-01-04 09:30:02]
>> [2010-01-04 09:30:03] [2010-01-04 09:30:04]
>>
>>> length(td1sec)
>>
>> [1] 23401
>>
>>
>>
>> I can't figure out how to do (2). I want to align the data in msftTrades
> and
>> geTrades to the new time index td1sec. For the observations that do not
>> occur on a given time stamp, I want to use the previous tick for that
>> observation. (In S-PLUS I can easily do this using the align() function).
>> The RTAQ package has a function called aggregatets() that almost does what
> I
>> want. It will  do the previous tick aggregation to a one second clock but
> it
>> will omit observations in case an interval is empty.
>>
>>
>>
>> For example, what I want for the geTrades data aligned to the one-second
>> time clock is the following:
>>
>>
>>
>> 2010-01-04 09:30:00  NA
>>
>> 2010-01-04 09:30:01 "15.21"
>>
>> 2010-01-04 09:30:02  "15.21"
>>
>> 2010-01-04 09:30:03 "15.22"
>>
>> 2010-01-04 09:30:04 "15.22"
>>
>> 2010-01-04 09:30:05  "15.22"
>>
>> 2010-01-04 09:30:06 "15.23"
>>
>> 2010-01-04 09:30:07 "15.24"
>>
>> 2010-01-04 09:30:08 "15.23"
>>
>> 2010-01-04 09:30:09 "15.23"
>>
>> 2010-01-04 09:30:10 "15.22"
>>
>> 2010-01-04 09:30:11 "15.22"
>>
>> 2010-01-04 09:30:12 "15.22"
>>
>> 2010-01-04 09:30:13 "15.22"
>>
>> 2010-01-04 09:30:14 "15.21"
>>
>> .
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> Eric Zivot
>>
>> Professor and Gary Waterman Distinguished Scholar
>>
>> Department of Economics
>>
>> Adjunct Professor of Finance
>>
>> Adjunct Professor of Statistics
>>
>> Box 353330                  email:  ezivot at u.washington.edu
>>
>> University of Washington    phone:  206-543-6715
>>
>> Seattle, WA 98195-3330
>> www:  http://faculty.washington.edu/ezivot
>>
>>
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
> should go.
>
>


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From jeff.a.ryan at gmail.com  Tue Jun 22 03:27:16 2010
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Mon, 21 Jun 2010 20:27:16 -0500
Subject: [R-SIG-Finance] aligning xts object to regularly spaced time
	clock
In-Reply-To: <19488.3884.136477.363278@ron.nulle.part>
References: <002e01cb119f$408bff20$c1a3fd60$@washington.edu>
	<alpine.DEB.2.00.1006220234020.15786@paninaro.uibk.ac.at>
	<19488.3884.136477.363278@ron.nulle.part>
Message-ID: <AANLkTikhvC0c9VX3MJVrsHeiFi1WSGX-1yeoEPXF6Yel@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100621/8942b971/attachment.pl>

From ggrothendieck at gmail.com  Tue Jun 22 03:48:35 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 21 Jun 2010 21:48:35 -0400
Subject: [R-SIG-Finance] aligning xts object to regularly spaced time
	clock
In-Reply-To: <002e01cb119f$408bff20$c1a3fd60$@washington.edu>
References: <002e01cb119f$408bff20$c1a3fd60$@washington.edu>
Message-ID: <AANLkTik6gWIjtBkMFtBtrzkCk2o9Kbh2qSbw3PwwlwgX@mail.gmail.com>

On Mon, Jun 21, 2010 at 8:09 PM, Eric Zivot <ezivot at u.washington.edu> wrote:
> I am trying to align an xts object containing irregularly spaced intra-day
> price data to a regularly spaced time clock so that I can do realized
> variance/covariance calculations. For example, I have two xts objects
> msftTrades and geTrades created by the RTAQ package (the time index variable
> is a timeDate object) :

xts has to.period but I will also mention that zoo FAQ #13 has
examples of three different techniques and ?na.locf has a further
example using zoo.


From ggrothendieck at gmail.com  Tue Jun 22 06:52:01 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Tue, 22 Jun 2010 00:52:01 -0400
Subject: [R-SIG-Finance] !SPAM: Re: aligning xts object to regularly
	spaced time clock
In-Reply-To: <4C20110E.7010100@braverock.com>
References: <002e01cb119f$408bff20$c1a3fd60$@washington.edu> 
	<4C200218.6010501@braverock.com>
	<003f01cb11a5$16d142c0$4473c840$@washington.edu> 
	<4C20110E.7010100@braverock.com>
Message-ID: <AANLkTinXU9TmA-bX4LPw7l0CGj5bijz4J_kXYX05wu6m@mail.gmail.com>

On Mon, Jun 21, 2010 at 9:25 PM, Brian G. Peterson <brian at braverock.com> wrote:
> (to.period isn't the correct function for this)
>
> Typically, on tick data, I will use align.time to get everything on an even
> index, like seconds. ?This will only align on a period where you have an
> observation, as you've noticed.


Here is an example using zoo and timeDate.  Most of this is just to
set up some test data and after that the last two lines do the real
work.


library(zoo)
library(timeSeries)

# create a time series object
##############################

Lines <- 'date time SYMBOL EX  PRICE   SIZE    COND CR   G127
2010-01-04 09:30:01 "GE"   "T" "15.21" "67099" ""   " 0" "0"
2010-01-04 09:30:03 "GE"   "Z" "15.22" "100"   "F"  " 0" "0"
2010-01-04 09:30:06 "GE"   "P" "15.23" "3950"  "F"  " 0" "0"
2010-01-04 09:30:07 "GE"   "T" "15.24" "1500"  "F"  " 0" "0"
2010-01-04 09:30:08 "GE"   "D" "15.23" "8000"  "F"  " 0" "0"
2010-01-04 09:30:09 "GE"   "P" "15.23" "1300"  "F"  " 0" "0"
2010-01-04 09:30:10 "GE"   "Z" "15.22" "11800" "F"  " 0" "0"
2010-01-04 09:30:11 "GE"   "D" "15.22" "5000"  "F"  " 0" "0"
2010-01-04 09:30:13 "GE"   "Z" "15.22" "1200"  "F"  " 0" "0"
2010-01-04 09:30:14 "GE"   "N" "15.21" "11900" "F"  " 0" "0" '

DF <- read.table(textConnection(Lines), header = TRUE, as.is = TRUE)
tser <- timeSeries(DF[3:9], paste(DF$date, DF$time))

##############################
# convert to zoo getting rid of junk; keep timeDate class on index
##############################

z <- zoo(tser[, c(3:4, 6:7)], time(tser))

##############################
# - create 1 sec grid, g
# - merge series with zero width series based on g
# - carry observations forward into NAs that were created via na.locf
# - pick off the grid points, [g]
##############################
g <- seq(start(z), end(z), by = "sec")
na.locf(merge(z, zoo(, g)))[g]

Output looks like this:

                    PRICE SIZE  CR G127
2010-01-04 09:30:01 15.21 67099 0  0
2010-01-04 09:30:02 15.21 67099 0  0
2010-01-04 09:30:03 15.22   100 0  0
2010-01-04 09:30:04 15.22   100 0  0
2010-01-04 09:30:05 15.22   100 0  0
2010-01-04 09:30:06 15.23  3950 0  0
2010-01-04 09:30:07 15.24  1500 0  0
2010-01-04 09:30:08 15.23  8000 0  0
2010-01-04 09:30:09 15.23  1300 0  0
2010-01-04 09:30:10 15.22 11800 0  0
2010-01-04 09:30:11 15.22  5000 0  0
2010-01-04 09:30:12 15.22  5000 0  0
2010-01-04 09:30:13 15.22  1200 0  0


From daniel.cegielka at gmail.com  Tue Jun 22 08:48:20 2010
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Tue, 22 Jun 2010 08:48:20 +0200
Subject: [R-SIG-Finance] R and Metatrader
In-Reply-To: <1277128303444-2262676.post@n4.nabble.com>
References: <1269676516179-1693168.post@n4.nabble.com>
	<1277128303444-2262676.post@n4.nabble.com>
Message-ID: <AANLkTikOoAo51KCkmQAKCG4E-3nIdJ2tftFnxzUeW8C0@mail.gmail.com>

http://mt4tools.svn.sourceforge.net/viewvc/mt4tools/

regards,
daniel


2010/6/21 jondollar <jantiom at gmail.com>:
>
> I would be interested also in interfacing R and Metratrader.
>
> I've already made similar interface with Matlab.
>
> I see two possibilities :
>
> - through a database : interface as MySQL DLL for MT4
> - through a socket on the local address 127.0.0.0
>
> I think that the second choice will be faster but there we need to define
> message structure for data exchange, while the database tables are easy to
> build, using timestamp as primary key
>
> Using the database also provides easy management of historical data.
>
> Are you looking for work at tick level or timeframe ?
>
> I would not use the DDE server to get quotes from MT4 as it allows only one
> way, so that R could not send data to MT4.
>
> I'm new to R, so I would need to dig in, but I'm very interested to access
> the nice stats libraries,
>
> and contribute to such nice project ..
>
> Rgds.
> --
> View this message in context: http://r.789695.n4.nabble.com/R-and-Metatrader-tp1693168p2262676.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From daniel.cegielka at gmail.com  Tue Jun 22 11:29:16 2010
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Tue, 22 Jun 2010 11:29:16 +0200
Subject: [R-SIG-Finance] R and Metatrader
In-Reply-To: <AANLkTilwA5rDa3Xyhl8Cr41Lm3EeSRQZuqfSvsu5yYti@mail.gmail.com>
References: <1269676516179-1693168.post@n4.nabble.com>
	<1277128303444-2262676.post@n4.nabble.com> 
	<AANLkTikOoAo51KCkmQAKCG4E-3nIdJ2tftFnxzUeW8C0@mail.gmail.com> 
	<AANLkTilwA5rDa3Xyhl8Cr41Lm3EeSRQZuqfSvsu5yYti@mail.gmail.com>
Message-ID: <AANLkTimh6U0OWWc_IWmM4XyIiBuG5eNttgwWN-qjRkM7@mail.gmail.com>

W dniu 22 czerwca 2010 10:39 u?ytkownik Gentil Homme
<jantiom at gmail.com> napisa?:
> Hello Daniel,
>
> Thanks a lot.
> Very interesting !
> I'll try to compile it on V C++ 2008 Express E.
>
> Do you have experience with it ?

No, I work with linux, so MT4 isn't what I prefer.

It should be easy to work witch R and MT4 via socket. You can use
socketConnection(), readBin(), writeBin() functions. Time-series
objects from messages you can build with XTS package and endpoints()
function.

Some high quality code for broker connection you can find in IBrokers package.

http://r-forge.r-project.org/projects/xts/

http://code.google.com/p/ibrokers/

and for strategy you must to test blotter package:

https://r-forge.r-project.org/projects/blotter/

regards,
daniel


>
> Rgds,
>
> Pierre
>
>
> 2010/6/22 Daniel Cegie?ka <daniel.cegielka at gmail.com>
>>
>> http://mt4tools.svn.sourceforge.net/viewvc/mt4tools/
>>
>> regards,
>> daniel
>>
>>
>> 2010/6/21 jondollar <jantiom at gmail.com>:
>> >
>> > I would be interested also in interfacing R and Metratrader.
>> >
>> > I've already made similar interface with Matlab.
>> >
>> > I see two possibilities :
>> >
>> > - through a database : interface as MySQL DLL for MT4
>> > - through a socket on the local address 127.0.0.0
>> >
>> > I think that the second choice will be faster but there we need to
>> > define
>> > message structure for data exchange, while the database tables are easy
>> > to
>> > build, using timestamp as primary key
>> >
>> > Using the database also provides easy management of historical data.
>> >
>> > Are you looking for work at tick level or timeframe ?
>> >
>> > I would not use the DDE server to get quotes from MT4 as it allows only
>> > one
>> > way, so that R could not send data to MT4.
>> >
>> > I'm new to R, so I would need to dig in, but I'm very interested to
>> > access
>> > the nice stats libraries,
>> >
>> > and contribute to such nice project ..
>> >
>> > Rgds.
>> > --
>> > View this message in context:
>> > http://r.789695.n4.nabble.com/R-and-Metatrader-tp1693168p2262676.html
>> > Sent from the Rmetrics mailing list archive at Nabble.com.
>> >
>> > _______________________________________________
>> > R-SIG-Finance at stat.math.ethz.ch mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions
>> > should go.
>> >
>
>


From sergeyg at gmail.com  Tue Jun 22 15:43:55 2010
From: sergeyg at gmail.com (Sergey Goriatchev)
Date: Tue, 22 Jun 2010 15:43:55 +0200
Subject: [R-SIG-Finance] R on GPUs
Message-ID: <AANLkTilimeL5wH56kuV77uNcRpY_-5r_O59zfFicq8Ii@mail.gmail.com>

Hello everyone

I've seen Dirk Eddelbuettel's slides on high-performance R computing,
where he mentions NVidia GPU and shows examples of code that runs on
these GPUs.
I am curious, is there anything for running R on ATI cards. These are
the fastest mobile cards around so far (5870 in, say, Asus G73J).

Thank you for any info.

/sergey

--
-------
Kniven sk?rpes bara mot stenen.


From brian at braverock.com  Tue Jun 22 15:58:37 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 22 Jun 2010 08:58:37 -0500
Subject: [R-SIG-Finance] !SPAM: Re:  R on GPUs
In-Reply-To: <AANLkTilimeL5wH56kuV77uNcRpY_-5r_O59zfFicq8Ii@mail.gmail.com>
References: <AANLkTilimeL5wH56kuV77uNcRpY_-5r_O59zfFicq8Ii@mail.gmail.com>
Message-ID: <4C20C18D.3060007@braverock.com>

On 06/22/2010 08:43 AM, Sergey Goriatchev wrote:
> I've seen Dirk Eddelbuettel's slides on high-performance R computing,
> where he mentions NVidia GPU and shows examples of code that runs on
> these GPUs.
> I am curious, is there anything for running R on ATI cards. These are
> the fastest mobile cards around so far (5870 in, say, Asus G73J).

There are emerging standards that will unify the API of the different 
architectures.

If you look at the slides from R/Finance 2010 here:
http://www.rinfinance.com/agenda/

You can find information on the current state of the art, and plans to support 
the new standards as they mature.

I think the answer right now is "no or limited support", but you'll get more 
information from the slides than me.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From edd at debian.org  Wed Jun 23 15:32:44 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 23 Jun 2010 08:32:44 -0500
Subject: [R-SIG-Finance] R/Finance 2010 slides and follow-up
Message-ID: <19490.3324.537317.857105@ron.nulle.part>


On behalf of the R/Finance 2010 committee, we are happy to announce the
availability of presentations from the 2nd annual R/Finance conference in
Chicago.

This year's two-day conference attracted well over 200 participants from
across the globe. Academics, students and industry professionals enjoyed more
than 20 talks covering trading, optimization, risk management --- all using
R! Many of these presentations are now available for download at:latest

http://www.RinFinance.com/agenda/

You can help us build upon the success of R/Finance 2010 by taking a couple
of minutes to answer a few questions by visiting:

http://spreadsheets0.google.com/viewform?formkey=dFlNWlNyYWxkdTZXbmk2UmtwYWUwRkE6MQ

In addition to the program, we would like to pass along notes from two of our
core sponsors.  Revolution Analytics and OneMarketData have been kind enough
to provide information that may be of interest to those who were not able to
talk with them on-site.

On behalf of the  committee and our sponsors, we thank you  for making 2010 a
success!

See you again in 2011!



>From our sponsors:

** Revolution Analytics **
The Revolution R product family from Revolution Analytics is a
powerful platform for rapidly solving questions in quantitative
finance, econometrics and risk analysis. Revolution R excels not only
as a sophisticated and easy-to-use "What if?" prototyping tool, but
can significantly improve the performance of real-world applications.
It includes high-performance numerical methods, commercial support,
training, and developer tools that enhance the R language for both
rapid prototyping and production environments in quantitative finance
and risk analysis.  This web-page provides much more information on
using Revolution R in finance, including whitepapers, benchmarks and
software downloads:

http://info.revolutionanalytics.com/rfinance2010.html


** OneMarketData **
Thank you for helping make this year?s R/Finance conference such a
success!  We hope you found the presentations informative, and were
able to take away some valuable ideas and techniques that will improve
your use of R within financial risk management, analysis and trading.

To thank you for your participation, we invite you to learn more about
OneMarketData and the data management challenges present in
quantitative research. As such, we have created a dedicated R in
Finance Web page where you can access the full text of the ?Data
Management Challenges for Quantitative Research? presentation by Maria
Belianina, PhD, as well as information on OneMarketData?s R
integration.

Please visit www.onetick.com/web1/R_in_Finance.php to access this
presentation and learn more about OneMarketData. For additional
information, please contact us at +1.201.710.5977 or info at onetick.com.

Thank you again for your time and support of the R community. We look
forward to speaking soon.




-- 
  Regards, Dirk


From ben.nachtrieb at gmail.com  Thu Jun 24 00:22:30 2010
From: ben.nachtrieb at gmail.com (Ben Nachtrieb)
Date: Wed, 23 Jun 2010 16:22:30 -0600
Subject: [R-SIG-Finance] Deseasonalized TS data
Message-ID: <AANLkTilPYGfDS-8VUSUK9V20RKEwB9q9-jaMwpwmhLSR@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100623/bf2c9344/attachment.pl>

From Samuel.Meichtry at bkw-fmb.ch  Thu Jun 24 09:43:29 2010
From: Samuel.Meichtry at bkw-fmb.ch (Samuel.Meichtry at bkw-fmb.ch)
Date: Thu, 24 Jun 2010 09:43:29 +0200
Subject: [R-SIG-Finance] Bloomberg Keyboard
Message-ID: <201006240743.o5O7hW3W031850@hypatia.math.ethz.ch>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100624/32e17d56/attachment.pl>

From ustaudinger at gmail.com  Thu Jun 24 09:51:00 2010
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Thu, 24 Jun 2010 09:51:00 +0200
Subject: [R-SIG-Finance] Bloomberg Keyboard
In-Reply-To: <201006240743.o5O7hW3W031850@hypatia.math.ethz.ch>
References: <201006240743.o5O7hW3W031850@hypatia.math.ethz.ch>
Message-ID: <AANLkTikiGOXq4R__uirkt20xv0SH-wjuvwTI3S8UzYj0@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100624/e59289e9/attachment.pl>

From daniel.cegielka at gmail.com  Thu Jun 24 10:31:13 2010
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Thu, 24 Jun 2010 10:31:13 +0200
Subject: [R-SIG-Finance] Bloomberg Keyboard
In-Reply-To: <201006240743.o5O7hW3W031850@hypatia.math.ethz.ch>
References: <201006240743.o5O7hW3W031850@hypatia.math.ethz.ch>
Message-ID: <AANLkTilmK7m72LXHfIJxrJkXtIcjmBldynMhx9MO64VB@mail.gmail.com>

This is not a R finance question, so please don't spam.

There is no bloomberg "help" key on normal keyboard... but "help"
command works well.

regards,
daniel


2010/6/24  <Samuel.Meichtry at bkw-fmb.ch>:
> Hi there
>
> Can anybody give me a hint how I can get to the Bloomberg help desk where I can chat with the Bloomberg people.
>
> I miss my old keyboard with the help message key.
>
> Best regards
> Samuel
>
>
>
>
>
>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From mogeiwang at gmail.com  Thu Jun 24 16:55:09 2010
From: mogeiwang at gmail.com (Mogei Wang)
Date: Thu, 24 Jun 2010 22:55:09 +0800
Subject: [R-SIG-Finance] How to estimate the Hurst exponent in a stable and
	effective way?
Message-ID: <AANLkTikdVoZ_Yd5JL_NCVoEg0oYkmOpC9tHdHgoWJFDQ@mail.gmail.com>

Hello, very one,
I am using the package "fArma" to compute the Hurst exponent.
I have tried all the 9 *Fit functions, and got quite different results
from different functions.
And sometimes, the result is larger than 1, or less than 0.

In the program, I just call the fit functions
*Fit(myData)@Hurst$H
,       where myData is a vector (like c(1,2,3,4,5)) with a few hundreds
      elements (usually 200 to 1000).
Is this the right way to call these *Fit functions?
And are there parameters that must be carefully set?

In short, how to estimate the Hurst exponent in a stable and effective way?

Thanks ahead!

version of R: 2.10.1
version of fArma: 2100.76.

Yours, M.W.

The following is a little program for testing the *Fit functions:

----------------------------
require(stats);
require(graphics);
require(fArma);

myData <- sin((0:500)*1);
plot(myData,type="b");

print(list(pengFit(myData)@hurst$H,
rsFit(myData)@hurst$H,
aggvarFit(myData)@hurst$H,
higuchiFit(myData)@hurst$H,
absvalFit(myData)@hurst$H,
diffvarFit(myData)@hurst$H,
perFit(myData)@hurst$H,
boxperFit(myData)@hurst$H,
whittleFit(myData)@hurst$H));

----------------------------
The results of the *Fit functions:
0.01589469
0.1455046
0.1131107
-0.02142119
0.162419
0.1993037
0.358259
0.6157515
0.9951347


From djsamperi at gmail.com  Fri Jun 25 00:59:45 2010
From: djsamperi at gmail.com (Dominick Samperi)
Date: Thu, 24 Jun 2010 18:59:45 -0400
Subject: [R-SIG-Finance] How to estimate the Hurst exponent in a stable
	and effective way?
In-Reply-To: <AANLkTikdVoZ_Yd5JL_NCVoEg0oYkmOpC9tHdHgoWJFDQ@mail.gmail.com>
References: <AANLkTikdVoZ_Yd5JL_NCVoEg0oYkmOpC9tHdHgoWJFDQ@mail.gmail.com>
Message-ID: <AANLkTikImf__yjKOJMnDggxXngo4SOa0oIdnseU1RbBn@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100624/81b72471/attachment.pl>

From nick.torenvliet at gmail.com  Sat Jun 26 19:48:06 2010
From: nick.torenvliet at gmail.com (Nick Torenvliet)
Date: Sat, 26 Jun 2010 13:48:06 -0400
Subject: [R-SIG-Finance] Soliciting Comments
Message-ID: <AANLkTinsVrM-a_7FyUGxFI0I16DikNxWh2fXRX4E3FS8@mail.gmail.com>

Hi all... just showing off a little -- this graph is the culmination of
months of work -- assembling data sources, learning packages and finally
producing some output...

The contents of the graph, e.g. the contract/market and the word study are
all set in a config file and an R script runs via source() to produce the
attached .pdf.

If you have any suggestions/questions... I'd be happy to dialogue.

Regards and have a great weekend,

NIck

Disclosure... I may or may not have interest in PDS :-)

And...

The code that generates this can be found @
http://code.google.com/p/quantkit/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100626/fca446cf/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PDS.pdf
Type: application/pdf
Size: 9932 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100626/fca446cf/attachment.pdf>

From nick.torenvliet at gmail.com  Sat Jun 26 19:49:04 2010
From: nick.torenvliet at gmail.com (Nick Torenvliet)
Date: Sat, 26 Jun 2010 13:49:04 -0400
Subject: [R-SIG-Finance] Soliciting Comments
In-Reply-To: <AANLkTinsVrM-a_7FyUGxFI0I16DikNxWh2fXRX4E3FS8@mail.gmail.com>
References: <AANLkTinsVrM-a_7FyUGxFI0I16DikNxWh2fXRX4E3FS8@mail.gmail.com>
Message-ID: <AANLkTim5HsxYAxx44z3LOK2v2b9ZhTE-0m5RRMESAf6_@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100626/fc823faf/attachment.pl>

From ustaudinger at gmail.com  Sat Jun 26 21:50:29 2010
From: ustaudinger at gmail.com (Ulrich Staudinger)
Date: Sat, 26 Jun 2010 21:50:29 +0200
Subject: [R-SIG-Finance] Soliciting Comments
In-Reply-To: <AANLkTim5HsxYAxx44z3LOK2v2b9ZhTE-0m5RRMESAf6_@mail.gmail.com>
References: <AANLkTinsVrM-a_7FyUGxFI0I16DikNxWh2fXRX4E3FS8@mail.gmail.com>
	<AANLkTim5HsxYAxx44z3LOK2v2b9ZhTE-0m5RRMESAf6_@mail.gmail.com>
Message-ID: <AANLkTin54A3ePIHJDjwNRo6x4I6qPGs8B8L9-2gHULNN@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100626/f2d0e36d/attachment.pl>

From cmdr_rogue at hotmail.com  Sun Jun 27 00:24:00 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Sat, 26 Jun 2010 18:24:00 -0400
Subject: [R-SIG-Finance] Soliciting Comments
In-Reply-To: <AANLkTinsVrM-a_7FyUGxFI0I16DikNxWh2fXRX4E3FS8@mail.gmail.com>
References: <AANLkTinsVrM-a_7FyUGxFI0I16DikNxWh2fXRX4E3FS8@mail.gmail.com>
Message-ID: <BLU0-SMTP7940F159CDD7A3B69278CCE2C80@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100626/59c71bc3/attachment.pl>

From jim.callahan.orlando at gmail.com  Mon Jun 28 05:47:51 2010
From: jim.callahan.orlando at gmail.com (Jim Callahan)
Date: Sun, 27 Jun 2010 23:47:51 -0400
Subject: [R-SIG-Finance] SEC proposed rules require XML and Python?
Message-ID: <AANLkTinGl94ndYjrKizz4HEuzdjn8OiZQJeuWJrh5mnd@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100627/af1ac7fe/attachment.pl>

From krish.maheswaran at gmail.com  Tue Jun 29 02:49:00 2010
From: krish.maheswaran at gmail.com (km)
Date: Mon, 28 Jun 2010 17:49:00 -0700 (PDT)
Subject: [R-SIG-Finance] quantstrat: order sizing function question
Message-ID: <AANLkTikJykVH4ecDIHOpW4NUp8q7Dj-OPWzjSYsN3W2r@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100628/e294e6ff/attachment.pl>

From krish.maheswaran at gmail.com  Tue Jun 29 03:03:56 2010
From: krish.maheswaran at gmail.com (km)
Date: Mon, 28 Jun 2010 18:03:56 -0700 (PDT)
Subject: [R-SIG-Finance] quantstrat: order sizing question
Message-ID: <AANLkTimPKg784j2zDQ5WCz77XTySPoIDKGGqMUJj-9vx@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100628/4e093890/attachment.pl>

From brian at braverock.com  Tue Jun 29 03:18:56 2010
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 28 Jun 2010 20:18:56 -0500
Subject: [R-SIG-Finance] !SPAM: Re:  quantstrat: order sizing question
In-Reply-To: <AANLkTimPKg784j2zDQ5WCz77XTySPoIDKGGqMUJj-9vx@mail.gmail.com>
References: <AANLkTimPKg784j2zDQ5WCz77XTySPoIDKGGqMUJj-9vx@mail.gmail.com>
Message-ID: <4C294A00.6020208@braverock.com>

On 06/28/2010 08:03 PM, km wrote:
> I'm using the package quantstrat and trying (unsuccessfully) to use my own
> function for order sizing. For example using
> the demo example (faber.R), the first rule is:
>
> s<- add.rule(s, name='ruleSignal', arguments = list(data=quote(mktdata),
> sigcol="Cl.gt.SMA", sigval=TRUE, orderqty=1000, ordertype='market',
> orderside='long', pricemethod='market'), type='enter', path.dep=TRUE)
>
>
> Now I try and incorporate my own order sizing function:
>
> myOS<- function(orderqty,...){
>
>        orderqty<- orderqty[1]*orderqty[2]
>        return(orderqty)
> }
>
> I modify the rule above:
>
> s<- add.rule(s, name='ruleSignal', arguments = list(data=quote(mktdata),
> sigcol="Cl.gt.SMA", sigval=TRUE, orderqty=c(1000,2), ordertype='market',
> orderside='long', pricemethod='market'), osFUN="myOS", type='enter',
> path.dep=TRUE)
>
> When, I run the code I get a bunch of warnings and no trades are generated.
> I suspect that I'm not passing the arguments the right way from the
> "add.rule" function to the "myOs" function. I've tried lots of different
> things with no success.
> Any help would be much appreciated.

You didn't tell us what warnings you received...

osNoOp (the default) has only the arguments in your example.  You may want to 
look at osMaxPos for a more involved example function.

Currently, 'ruleSignal' (which you could also replace if you wanted to ...) 
uses 'match.fun' to match your oder sizing function into 'osFUN', and then passes:

osFUN(strategy=strategy, mktdata=mktdata, timestamp=timestamp, 
orderqty=orderqty, ordertype=ordertype, orderside=orderside, 
portfolio=portfolio, symbol=symbol)

note these are all named arguments.

We should probably update that to also pass dots, but that's all the variables 
that ruleSignal knows about *for sure* at that point in time, and I suspect it 
should be sufficient for most order sizing functions without adding dots.  I'll 
add dots to SVN now.

Notice also that orderqty, per the docs, is "numeric quantity of the desired 
order, or 'all'" and ruleSignal has a number of different numeric comparisons 
for trade direction.  I suspect that may be the source of (some of) your warnings.

So, I hope this helps point you in the right direction, but you may also need 
to give us an actually reproducible example, and tell us exactly the error or 
warning messages you're seeing.

Regards,

    - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From krish.maheswaran at gmail.com  Tue Jun 29 04:21:32 2010
From: krish.maheswaran at gmail.com (km)
Date: Mon, 28 Jun 2010 19:21:32 -0700 (PDT)
Subject: [R-SIG-Finance] !SPAM: Re:  quantstrat: order sizing question
In-Reply-To: <4C294A00.6020208@braverock.com>
References: <AANLkTimPKg784j2zDQ5WCz77XTySPoIDKGGqMUJj-9vx@mail.gmail.com>
	<4C294A00.6020208@braverock.com>
Message-ID: <1277778092852-2271666.post@n4.nabble.com>


Hi Brian:

Thanks for the response. The warning and code are below.

Cheers,
Krish





Warning messages:
1: In max(i) : no non-missing arguments to max; returning -Inf


#-------------------------------------------------------------
#Code Below
#------------------------------------------------------------

library(quantstrat)

#set initial parameters

myPortfolioName <- "longtrend"
myPortfolioStartingDate <- "1997-12-31"
myPortfolioCurrency <- "USD"
myPortfolioStartingEquity <- 1000000
myPortfolioOrderQuantity <- 100
myPortfolioSymbols <- c("XLF")
myStrategyName <- myPortfolioName





#----------------------------------------------------------------------------------

#set currency
currency(myPortfolioCurrency) 
#set tickers
symbols <- myPortfolioSymbols
#set each tickers financial instrument & multiplier
for(symbol in symbols){ stock(symbol, currency="USD", multiplier=1)}
#must specify the time class explicitely
getSymbols(symbols,src='yahoo', index.class=c("POSIXt","POSIXct"),
from='1998-01-01')


#convert data into monthly data - this is not necessary - build strategy so
it can handle all frequencies
for(symbol in symbols){
	x <-get(symbol)
	x<-to.monthly(x,indexAt='lastof',time=TRUE)
	colnames(x)<-gsub("x",symbol,colnames(x))
	assign(symbol,x)
}

#initialize portfolio containers
initPortf(name=myPortfolioName, symbol=symbols, initPosQty=0,
initDate=myPortfolioStartingDate)
initAcct(name=myPortfolioName, portfolios=myPortfolioName,
initDate=myPortfolioStartingDate, initEq=myPortfolioStartingEquity)
initOrders(portfolio=myPortfolioName, initDate=myPortfolioStartingDate)

#set strategy object
s <- strategy(myStrategyName)

#associate strategy object with indicators, signals, and rules

fixedOrderQty <- myPortfolioOrderQuantity

s <- add.indicator(strategy=s, name="SMA",
arguments=list(x=quote(Cl(mktdata)), n=10), label="SMA10")

s <- add.signal(strategy=s, name="sigCrossover",
arguments=list(data=quote(mktdata), columns=c("Close", "SMA10"),
relationship="gt"), label="C1.gt.SMA")
s <- add.signal(strategy=s, name="sigCrossover",
arguments=list(data=quote(mktdata), columns=c("Close", "SMA10"),
relationship="lt"), label="C1.lt.SMA")

#-------------------------------------
myOS <- function(orderqty,...){

      orderqty <- orderqty[1]*orderqty[2]
      return(orderqty)
}
#------------------------------------------

s <- add.rule(s, name='ruleSignal', arguments = list(data=quote(mktdata),
sigcol="Cl.gt.SMA", sigval=TRUE, orderqty=c(1000,2), ordertype='market',
orderside='long', pricemethod='market'), osFUN="myOS", type='enter',
path.dep=TRUE)

s <- add.rule(strategy=s, name="ruleSignal",
arguments=list(data=quote(mktdata), sigcol="C1.lt.SMA", sigval=T,
orderqty="all", ordertype="market", orderside=NULL, threshold=NULL),
type="exit")


#apply strategy
# Process the indicators and generate trades
start_t<-Sys.time()
out<-try(applyStrategy(strategy='s' , portfolios=myPortfolioName))
end_t<-Sys.time()
print("Strategy Loop:")
print(end_t-start_t)

-- 
View this message in context: http://r.789695.n4.nabble.com/quantstrat-order-sizing-question-tp2271635p2271666.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From aaditya.nanduri at gmail.com  Tue Jun 29 07:51:09 2010
From: aaditya.nanduri at gmail.com (Aaditya Nanduri)
Date: Tue, 29 Jun 2010 01:51:09 -0400
Subject: [R-SIG-Finance] How to input large datasets into R
Message-ID: <AANLkTin5jn6pzJEex6ksYF0vcnAh33ICqptVJ_kaEiz2@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100629/ba13b5a2/attachment.pl>

From cmdr_rogue at hotmail.com  Tue Jun 29 11:07:26 2010
From: cmdr_rogue at hotmail.com (Sarbo)
Date: Tue, 29 Jun 2010 05:07:26 -0400
Subject: [R-SIG-Finance] How to input large datasets into R
In-Reply-To: <AANLkTin5jn6pzJEex6ksYF0vcnAh33ICqptVJ_kaEiz2@mail.gmail.com>
References: <AANLkTin5jn6pzJEex6ksYF0vcnAh33ICqptVJ_kaEiz2@mail.gmail.com>
Message-ID: <BLU0-SMTP590AE68B980DE9EBAA7684E2CB0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100629/0abbc509/attachment.pl>

From cgb at datanalytics.com  Tue Jun 29 11:15:34 2010
From: cgb at datanalytics.com (Carlos J. Gil Bellosta )
Date: Tue, 29 Jun 2010 11:15:34 +0200
Subject: [R-SIG-Finance] How to input large datasets into R
In-Reply-To: <BLU0-SMTP590AE68B980DE9EBAA7684E2CB0@phx.gbl>
References: <AANLkTin5jn6pzJEex6ksYF0vcnAh33ICqptVJ_kaEiz2@mail.gmail.com>
	<BLU0-SMTP590AE68B980DE9EBAA7684E2CB0@phx.gbl>
Message-ID: <AANLkTikR8OmOSQ1BisdDHn1AdNM7VTxbnJuF6CE5mZuV@mail.gmail.com>

Dear Sarbo,

10000 x 10 and you start having problems? Maybe on a low end netbook.
I have successfully worked with 300,000 x 50 datasets on a regular
desktop PC in the past.

You may also keep your data in a database and access from R. Even if
you do not face serious data size issues, it is good policy.

Packages such as RSQLite or colbycol could also be helpful.

Best regards,

Carlos J. Gil Bellosta
http://www.datanalytics.com


2010/6/29 Sarbo <cmdr_rogue at hotmail.com>:
> The "birch" and "speedglm" packages may be useful. If you have access to
> a multi-core computer with additional memory you may also want to
> download the "REvolution" suite.
>
> Keep in mind that R is not designed to handle giant data sets (though
> having written that, I've processed data sets of dimensions on the order
> of 10000x10 in R before without too many issues). If you really want to
> run robust statistical analyses on large data sets you'll need to go for
> a much more robust language like SAS.
>
> On Tue, 2010-06-29 at 01:51 -0400, Aaditya Nanduri wrote:
>
>> Hello All.
>>
>> For my HW assignment, I was given 30 stocks with minute data (date,
>> time, open, close, high, low, vol) over 7 years.
>>
>> So, each stock has about 610000 rows of data which makes it impossible to
>> calculate z-scores for mean-reversion strategies (required for HW) for even
>> one stock.
>>
>> Is there any way R can read only certain lines of data?
>>
>> For example, in the OU process we use increments of 60. So can R read 1:60,
>> then 2:61 and so on?
>>
>> I recently tried a simple regression on half the data (training set) on my
>> school's computer only to watch it eat up the entire memory leaving me no
>> option but to restart the computer.
>>
>> The data is in .csv format if it matters.
>>
>> Im an undergrad learning about the basic methods in stat arb in an informal
>> setting so you may assume I have absolutely no clue about pretty much
>> anything and everything.
>>
>> And are there any tutorials online for using quantmod? That would be very
>> helpful.
>>
>> Thank you very much.
>>
>> Sincerely,
>> Aaditya Nanduri
>>
>> ? ? ? [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>
>
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From etheber at gmx.de  Tue Jun 29 12:06:05 2010
From: etheber at gmx.de (Thomas Etheber)
Date: Tue, 29 Jun 2010 12:06:05 +0200
Subject: [R-SIG-Finance] PerformanceAnalytics - Style Analysis
In-Reply-To: <007b01cacab2$9fdde7b0$df99b710$@washington.edu>
References: <4BA89FFF.3060000@gmx.de>
	<007b01cacab2$9fdde7b0$df99b710$@washington.edu>
Message-ID: <4C29C58D.5040309@gmx.de>

Dear Eric,
dear Brian,

thank you for your helpful comments and your regression example below. I 
just updated my R distribution and I am now running:

R:  version 2.11.1 (2010-05-31)
PerformanceAnalytics: version 1.0.2.1

It seems that your bugfix for the constrained StyleAnalyiss is not yet 
included in the new PerformanceAnalytics. Maybe the timespan between 
your fix and the release of PerformanceAnalytics 1.0.2.1 in mid April 
was too short to include it.

Eric, if you have fixed the code already, could you please send it to 
me? Maybe I can include the code in my actual project, so that I don't 
have to wait for the next release of the package.

Regards,
Thomas



Am 23.03.2010 18:59, schrieb Eric Zivot:
> You are right. The correct way to enforce that the regression coefficients
> sum to unity is to impose this in the regression instead of just normalizing
> the coefficients to sum to unity. It is not difficult to do this because it
> is a linear restriction and the restriction can be substituted into the
> linear regression to create another linear regression. I was supposed to add
> this fix to the style.fit() function last year. I'll do it now and send the
> fix off to Brian so he can put it in the PerformanceAnalytics package.
> Briefly, consider the simple linear regression
>
> Y = x1*b1 + x2*b2 + e
>
> The restriction to impose is b1 + b2 = 1. Equivalently, b1 = 1 - b2.
> Substituting into the regression gives
>
> Y = x1*(1 - b2) + x2*b2 + e = x1 + b2*(x2 - x1) + e =>  Y - x1 = b2*(x2 - x1)
> + e
>
> Therefore, the linear regression to run to impose the restriction b1+b2 = 1
> is
>
> (Y - x1) = b2*(x2 - x1) + e
>
> Once you have b2.hat, then just solve for b1 using the constraint: b1.hat =
> 1 - b2.hat. (Note that it doesn't matter if you define the restriction in
> terms of b1 = 1 - b2 or b2 = 1 - b1.)  Of course, to get the right R2 you
> have to base it on Y as the dependent variable and not Y - x1. That is,
> compute the R2 from the fitted values
>
> Y.hat = b1.hat*x1 + b2.hat*x2
>
> Where b1.hat and b2.hat are the restricted least squares coefficients.
>
> Eric Zivot                  			
> Professor and Gary Waterman Distinguished Scholar
> Department of Economics
> Adjunct Professor of Finance
> Adjunct Professor of Statistics
> Box 353330                  email:  ezivot at u.washington.edu
> University of Washington    phone:  206-543-6715
> Seattle, WA 98195-3330
> www:  http://faculty.washington.edu/ezivot
>
>
>
>
> -----Original Message-----
> From: r-sig-finance-bounces at stat.math.ethz.ch
> [mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of Thomas Etheber
> Sent: Tuesday, March 23, 2010 4:03 AM
> To: r-sig-finance at stat.math.ethz.ch
> Subject: [R-SIG-Finance] PerformanceAnalytics - Style Analysis
>
> Dear List,
>
> I had a look at the code of the PerformanceAnalytics package and I use
> this package on a regular basis.
>
> The style.fit function for Style Analysis provides thrree supported
> methods, which can be chosen via a parameter. I am talking of the
> normalized method here. This method requires the regression coefficients
> to sum to 1.
> Indeed the code in Version 1.0.0 says something like this:
>
> [... Default implementation ...]
> column.weights = as.data.frame(coef(column.lm))
> [...]
>   if (method == "normalized") {
>                  column.weights = column.weights/sum(column.weights)
>   }
>
> I suppose here we are just scaling the coefficients to sum to 1, in my
> view the regression should a priori deal with this restriction (some
> sort of constrained regression or the like).
> At least if you look at Tabel 2 of Sharpe (1992) the coefficients do not
> support the actual implementation and I think somebody might want to
> have a look at this code fragment.
> Unfortunately I do not know how to implement this kind of restricted
> regression in R, but I believe there are already ways of doing this.
> Perhaps somebody from the list can guide us to the right direction.
>
> Anyway great thx to the authors of this packkage!
> Thomas
>
> PS: In Stata the right command seems to be cnsreg.
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
>


From ggrothendieck at gmail.com  Tue Jun 29 12:15:27 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Tue, 29 Jun 2010 06:15:27 -0400
Subject: [R-SIG-Finance] How to input large datasets into R
In-Reply-To: <AANLkTin5jn6pzJEex6ksYF0vcnAh33ICqptVJ_kaEiz2@mail.gmail.com>
References: <AANLkTin5jn6pzJEex6ksYF0vcnAh33ICqptVJ_kaEiz2@mail.gmail.com>
Message-ID: <AANLkTimwyp18TgXYDHDevpNV0fGAnr-Wo3eDJ9pdwZJg@mail.gmail.com>

On Tue, Jun 29, 2010 at 1:51 AM, Aaditya Nanduri
<aaditya.nanduri at gmail.com> wrote:
> Hello All.
>
> For my HW assignment, I was given 30 stocks with minute data (date,
> time, open, close, high, low, vol) over 7 years.
>
> So, each stock has about 610000 rows of data which makes it impossible to
> calculate z-scores for mean-reversion strategies (required for HW) for even
> one stock.
>
> Is there any way R can read only certain lines of data?
>

1. You can use read.csv(..., nrows = N) to only read the first N lines
of data or you can use colClasses= argument to exclude certain
columns.  See help(read.table)

2. You can use read.csv.sql in the sqldf package to read a random set
of data.  It automatically creates a database and reads the data into
the database without going through R and then from the database it
reads a random set of rows and then deletes the database.  Here is an
example.  Note that aside from the code to create the sample data file
its only one line of code.  Also see examples 6e and 6f on the sqldf
home page:  http://sqldf.googlecode.com

# create sample data
library(sqldf)
write.table(iris, "iris150.dat", sep = ",", quote = FALSE)

# read in a random set of 4 rows
DF <- read.csv.sql("iris150.dat", sql = "select * from file order by
random(*) limit 4")


From tommy.anderberg at investmentstudio.com  Tue Jun 29 12:02:05 2010
From: tommy.anderberg at investmentstudio.com (Tommy Anderberg)
Date: Tue, 29 Jun 2010 12:02:05 +0200
Subject: [R-SIG-Finance] SEC proposed rules require XML and Python? (Jim
	Callahan)
Message-ID: <201006291019.o5TAJErX021973@lightning.unitedhosting.co.uk>

Jim Callahan wrote:
 > XML seems like an obvious choice, but Python?

Makes sense to me. It's widely available and easy to read even if you 
don't normally use it.
The proverbial executable pseudocode. :)


From armstrong.whit at gmail.com  Tue Jun 29 14:12:23 2010
From: armstrong.whit at gmail.com (Whit Armstrong)
Date: Tue, 29 Jun 2010 08:12:23 -0400
Subject: [R-SIG-Finance] How to input large datasets into R
In-Reply-To: <AANLkTin5jn6pzJEex6ksYF0vcnAh33ICqptVJ_kaEiz2@mail.gmail.com>
References: <AANLkTin5jn6pzJEex6ksYF0vcnAh33ICqptVJ_kaEiz2@mail.gmail.com>
Message-ID: <AANLkTik7v2r1fFyWf6ourF6f8ugGpmUmkDYnzFGA36Q0@mail.gmail.com>

warmstrong at research:~$ R
> stocks <- list()
> for(i in 1:30) { stocks[[i]] <- matrix(0.0,nrow=610000,ncol=7) }
> gc()
            used  (Mb) gc trigger   (Mb)  max used  (Mb)
Ncells    114397   6.2     350000   18.7    350000  18.7
Vcells 128222013 978.3  136994473 1045.2 128222477 978.3
>

1GB for the raw data doesn't seem so bad.

If you can't find a server somewhere that has a decent amount of ram,
then you have a couple of choices.

1) aggregate the data to 10min bars, or 30min bars to get started
2) use only half or a quarter of your data (which you have tried already)
3) work with only one stock in memory at a time (if you are pooling
data, this obviously wont' work)
4) use less memory hungry methods (look at Armadillo for instance:
http://dirk.eddelbuettel.com/code/rcpp.armadillo.html)
5) also check out these packages: bigmemory
(http://cran.r-project.org/web/packages/bigmemory/index.html) and
biglm  (http://cran.r-project.org/package=biglm)

This list is a great resource. Keep posting here as you progress.

-Whit


On Tue, Jun 29, 2010 at 1:51 AM, Aaditya Nanduri
<aaditya.nanduri at gmail.com> wrote:
> Hello All.
>
> For my HW assignment, I was given 30 stocks with minute data (date,
> time, open, close, high, low, vol) over 7 years.
>
> So, each stock has about 610000 rows of data which makes it impossible to
> calculate z-scores for mean-reversion strategies (required for HW) for even
> one stock.
>
> Is there any way R can read only certain lines of data?
>
> For example, in the OU process we use increments of 60. So can R read 1:60,
> then 2:61 and so on?
>
> I recently tried a simple regression on half the data (training set) on my
> school's computer only to watch it eat up the entire memory leaving me no
> option but to restart the computer.
>
> The data is in .csv format if it matters.
>
> Im an undergrad learning about the basic methods in stat arb in an informal
> setting so you may assume I have absolutely no clue about pretty much
> anything and everything.
>
> And are there any tutorials online for using quantmod? That would be very
> helpful.
>
> Thank you very much.
>
> Sincerely,
> Aaditya Nanduri
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From guy.yollin at rotellacapital.com  Tue Jun 29 16:55:28 2010
From: guy.yollin at rotellacapital.com (Guy Yollin)
Date: Tue, 29 Jun 2010 09:55:28 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics - Style Analysis
In-Reply-To: <4C29C58D.5040309@gmx.de>
References: <4BA89FFF.3060000@gmx.de>
	<007b01cacab2$9fdde7b0$df99b710$@washington.edu>
	<4C29C58D.5040309@gmx.de>
Message-ID: <E4259A82356E7F46B4F911FB27B0D7251E4F9AAC99@AUSP01VMBX02.collaborationhost.net>

Guys,

Not sure about any package updates but based on Eric's description, I think the constrained regression looks something like this:


conReg = function(R.fund,R.style)
{
  # make LHS and RHS matrices
  y = as.matrix(R.fund)
  x = as.matrix(R.style)

  # subtract x1 from both sides for constrained regression
  x1 = x[,1]
  y.new = y - x1
  x.new = x[,-1] - x1
  
  # perform constrained regression
  lm.con = lm(y.new ~ x.new - 1)
  
  # solve for b1.hat
  b1.hat = tail(cumsum(c(1,-1*coef(lm.con))),1)
  con.coef = c(b1.hat,coef(lm.con))
  names(con.coef) = colnames(x)

  # calc fitted values  
  y.hat = x %*% con.coef
  
  # compute R2
  resid = y - y.hat
  tss <- sum(y^2)
  rss <- sum(resid^2)
  R2 = 1-rss/tss
  
  # return results
  con.mod = list(coefficients = con.coef,fitted.values=y.hat,residuals=resid,r.squared=R2)
  return(con.mod)
}

# compare constrained regression with quadratic programming
data(edhec)
data(managers)
sf = style.fit(managers[97:132,2,drop=FALSE],edhec[85:120,], method="constrained", leverage=FALSE)
cr = conReg(R.fund=managers[97:132,2,drop=FALSE],R.style=edhec[85:120,])
par(mfrow=c(2,1))
barplot(sf$weights[,1],names.arg=rownames(sf$weights),las=2,cex.names=0.5)
barplot(cr$coefficients,las=2,cex.names=0.5)


Perhaps this will help you out in the near term.

Best,

-- G



-----Original Message-----
From: r-sig-finance-bounces at stat.math.ethz.ch [mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of Thomas Etheber
Sent: Tuesday, June 29, 2010 3:06 AM
To: Eric Zivot
Cc: r-sig-finance at stat.math.ethz.ch; brian at braverock.com
Subject: Re: [R-SIG-Finance] PerformanceAnalytics - Style Analysis

Dear Eric,
dear Brian,

thank you for your helpful comments and your regression example below. I 
just updated my R distribution and I am now running:

R:  version 2.11.1 (2010-05-31)
PerformanceAnalytics: version 1.0.2.1

It seems that your bugfix for the constrained StyleAnalyiss is not yet 
included in the new PerformanceAnalytics. Maybe the timespan between 
your fix and the release of PerformanceAnalytics 1.0.2.1 in mid April 
was too short to include it.

Eric, if you have fixed the code already, could you please send it to 
me? Maybe I can include the code in my actual project, so that I don't 
have to wait for the next release of the package.

Regards,
Thomas



Am 23.03.2010 18:59, schrieb Eric Zivot:
> You are right. The correct way to enforce that the regression coefficients
> sum to unity is to impose this in the regression instead of just normalizing
> the coefficients to sum to unity. It is not difficult to do this because it
> is a linear restriction and the restriction can be substituted into the
> linear regression to create another linear regression. I was supposed to add
> this fix to the style.fit() function last year. I'll do it now and send the
> fix off to Brian so he can put it in the PerformanceAnalytics package.
> Briefly, consider the simple linear regression
>
> Y = x1*b1 + x2*b2 + e
>
> The restriction to impose is b1 + b2 = 1. Equivalently, b1 = 1 - b2.
> Substituting into the regression gives
>
> Y = x1*(1 - b2) + x2*b2 + e = x1 + b2*(x2 - x1) + e =>  Y - x1 = b2*(x2 - x1)
> + e
>
> Therefore, the linear regression to run to impose the restriction b1+b2 = 1
> is
>
> (Y - x1) = b2*(x2 - x1) + e
>
> Once you have b2.hat, then just solve for b1 using the constraint: b1.hat =
> 1 - b2.hat. (Note that it doesn't matter if you define the restriction in
> terms of b1 = 1 - b2 or b2 = 1 - b1.)  Of course, to get the right R2 you
> have to base it on Y as the dependent variable and not Y - x1. That is,
> compute the R2 from the fitted values
>
> Y.hat = b1.hat*x1 + b2.hat*x2
>
> Where b1.hat and b2.hat are the restricted least squares coefficients.
>
> Eric Zivot                  			
> Professor and Gary Waterman Distinguished Scholar
> Department of Economics
> Adjunct Professor of Finance
> Adjunct Professor of Statistics
> Box 353330                  email:  ezivot at u.washington.edu
> University of Washington    phone:  206-543-6715
> Seattle, WA 98195-3330
> www:  http://faculty.washington.edu/ezivot
>
>
>
>
> -----Original Message-----
> From: r-sig-finance-bounces at stat.math.ethz.ch
> [mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of Thomas Etheber
> Sent: Tuesday, March 23, 2010 4:03 AM
> To: r-sig-finance at stat.math.ethz.ch
> Subject: [R-SIG-Finance] PerformanceAnalytics - Style Analysis
>
> Dear List,
>
> I had a look at the code of the PerformanceAnalytics package and I use
> this package on a regular basis.
>
> The style.fit function for Style Analysis provides thrree supported
> methods, which can be chosen via a parameter. I am talking of the
> normalized method here. This method requires the regression coefficients
> to sum to 1.
> Indeed the code in Version 1.0.0 says something like this:
>
> [... Default implementation ...]
> column.weights = as.data.frame(coef(column.lm))
> [...]
>   if (method == "normalized") {
>                  column.weights = column.weights/sum(column.weights)
>   }
>
> I suppose here we are just scaling the coefficients to sum to 1, in my
> view the regression should a priori deal with this restriction (some
> sort of constrained regression or the like).
> At least if you look at Tabel 2 of Sharpe (1992) the coefficients do not
> support the actual implementation and I think somebody might want to
> have a look at this code fragment.
> Unfortunately I do not know how to implement this kind of restricted
> regression in R, but I believe there are already ways of doing this.
> Perhaps somebody from the list can guide us to the right direction.
>
> Anyway great thx to the authors of this packkage!
> Thomas
>
> PS: In Stata the right command seems to be cnsreg.
>
> _______________________________________________
> R-SIG-Finance at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
>

_______________________________________________
R-SIG-Finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From gps at asu.edu  Tue Jun 29 23:25:40 2010
From: gps at asu.edu (Geoffrey Smith)
Date: Tue, 29 Jun 2010 14:25:40 -0700
Subject: [R-SIG-Finance] RBloomberg tick data
Message-ID: <AANLkTineXAc4i5vV9JRa3Yt34uCMSBF4QJJqz2F2M93j@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100629/02ed40e8/attachment.pl>

From ben.nachtrieb at gmail.com  Wed Jun 30 16:56:42 2010
From: ben.nachtrieb at gmail.com (Ben Nachtrieb)
Date: Wed, 30 Jun 2010 08:56:42 -0600
Subject: [R-SIG-Finance] R-Finance Tutorial
Message-ID: <AANLkTinomCMi8AjY-5QhK97mTpCbLPgTxiRBV-mUiTQl@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20100630/57a13958/attachment.pl>

From patrick at burns-stat.com  Wed Jun 30 17:58:58 2010
From: patrick at burns-stat.com (Patrick Burns)
Date: Wed, 30 Jun 2010 16:58:58 +0100
Subject: [R-SIG-Finance] R-Finance Tutorial
In-Reply-To: <AANLkTinomCMi8AjY-5QhK97mTpCbLPgTxiRBV-mUiTQl@mail.gmail.com>
References: <AANLkTinomCMi8AjY-5QhK97mTpCbLPgTxiRBV-mUiTQl@mail.gmail.com>
Message-ID: <4C2B69C2.9080807@burns-stat.com>

Can we presume that you've looked at the
Finance taskview?

On 30/06/2010 15:56, Ben Nachtrieb wrote:
> Hello,
>
> Does anyone have any good R-Finance tutorials?
>
> I can perform basic operations in R and I have a Master's degree in
> finance/investments; however, I would like to ties these together with an
> R-Finance tutorial. In other words, I need better understanding of the
> best packages and built-in functions available to me and how to use them. I
> don't want to reinvent the wheel so-to-speak.
>
> Basically I do quant analysis on forex, futures, and equities. So it is the
> usual time series, trade execution, portfolio, security ranking, back
> testing, optimization, etc. related functions and packages I am interested
> in. I will be using these programatically, so a good "front-end" or UI is
> not necessary (and would not be used).
>
> Does anyone have any good R-Finance tutorials?
>
> What I do not need is a Tutorial on R or Finance separately.
>
> I already have "Time Series Analysis - With Applications in R end Edition",
> but that is it...at this point.
>
> Thanks!
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com


From David.Reiner at xrtrading.com  Wed Jun 30 18:32:49 2010
From: David.Reiner at xrtrading.com (David Reiner)
Date: Wed, 30 Jun 2010 11:32:49 -0500
Subject: [R-SIG-Finance] [SPAM] - RBloomberg tick data - Email found in
 subject
In-Reply-To: <AANLkTineXAc4i5vV9JRa3Yt34uCMSBF4QJJqz2F2M93j@mail.gmail.com>
References: <AANLkTineXAc4i5vV9JRa3Yt34uCMSBF4QJJqz2F2M93j@mail.gmail.com>
Message-ID: <9DE405308A6AA24AA794B76282C6C00F0109FD14@HQ-POST1.XRTRADING.LOCAL>

Bloomberg suggests getting one ticker at a time.
Works for me.

David L. Reiner
XR Trading LLC

-----Original Message-----
From: r-sig-finance-bounces at stat.math.ethz.ch [mailto:r-sig-finance-bounces at stat.math.ethz.ch] On Behalf Of Geoffrey Smith
Sent: Tuesday, June 29, 2010 4:26 PM
To: r-sig-finance at stat.math.ethz.ch
Subject: [SPAM] - [R-SIG-Finance] RBloomberg tick data - Email found in subject

Hello, what is the most efficient way to download a large panel of daily
tick data with RBloomberg?  Is it better to download data for a large number
of tickers for just one day?  Or is it better to download data for a single
ticker over many days?  What is the maximum combination of number of tickers
and number of days before the computer blows up on me (assuming an average
power desktop pc)?  By way of example, I am looking to download tick data
for about 500 tickers over about 120 days.  Thank you very much!  Geoff

--
Geoffrey Smith
Visiting Assistant Professor
Department of Finance
W. P. Carey School of Business
Arizona State University

        [[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


This e-mail and any materials attached hereto, including, without limitation, all content hereof and thereof (collectively, "XR Content") are confidential and proprietary to XR Trading, LLC ("XR") and/or its affiliates, and are protected by intellectual property laws.  Without the prior written consent of XR, the XR Content may not (i) be disclosed to any third party or (ii) be reproduced or otherwise used by anyone other than current employees of XR or its affiliates, on behalf of XR or its affiliates.

THE XR CONTENT IS PROVIDED AS IS, WITHOUT REPRESENTATIONS OR WARRANTIES OF ANY KIND.  TO THE MAXIMUM EXTENT PERMISSIBLE UNDER APPLICABLE LAW, XR HEREBY DISCLAIMS ANY AND ALL WARRANTIES, EXPRESS AND IMPLIED, RELATING TO THE XR CONTENT, AND NEITHER XR NOR ANY OF ITS AFFILIATES SHALL IN ANY EVENT BE LIABLE FOR ANY DAMAGES OF ANY NATURE WHATSOEVER, INCLUDING, BUT NOT LIMITED TO, DIRECT, INDIRECT, CONSEQUENTIAL, SPECIAL AND PUNITIVE DAMAGES, LOSS OF PROFITS AND TRADING LOSSES, RESULTING FROM ANY PERSON'S USE OR RELIANCE UPON, OR INABILITY TO USE, ANY XR CONTENT, EVEN IF XR IS ADVISED OF THE POSSIBILITY OF SUCH DAMAGES OR IF SUCH DAMAGES WERE FORESEEABLE.


From maynaaze at yahoo.com  Wed Jun 30 19:13:21 2010
From: maynaaze at yahoo.com (julius_cesarius)
Date: Wed, 30 Jun 2010 10:13:21 -0700 (PDT)
Subject: [R-SIG-Finance] Mean reversion tests - with stationary tests and
	trending series
Message-ID: <1277918001026-2272757.post@n4.nabble.com>


I'm having an issue using PP.test or adf.test as stationarity tests. I am
looking for the right tests to use to see if a series is mean reverting for
a pairs-trading like strategy.

Basically if the series is trending the tests still say the series is
stationary, but this would not be something I can use in pairs trading.

Short of writing code to detrend and test for trending - what would be
recommended for a test that a series is mean-reverting tradeable.

Example code to illustrate:

aSeries <- sin(seq(1,numElems)/pi)*5 
bSeries <- seq(1,numElems)
cSeries <- aSeries*10 + bSeries
dSeries <- cumsum(rnorm(numElems,sd=5))+200



staTest = function(inSeries) {
	ht <- adf.test(inSeries, alternative="stationary")
	cat("ADF p-value is", ht$p.value, "\n")
	ht$p.value
}

ssa <- staTest(aSeries)
ssb <- staTest(bSeries)
ssc <- staTest(cSeries)
ssd <- staTest(dSeries)
cat('STA test A=', ssa, 'B = ', ssb, 'C = ', ssc, 'D =', ssd, '\n')


// Results obtained:

STA test A= 0.01 B =  0.99 C =  0.01 D = 0.2764712 


Clearly A is the only series that should be stationary and the p test of
0.01 'confirms' this. However C is trending upwards and the P test is still
saying it's stationary.

I would appreciate any help.
-- 
View this message in context: http://r.789695.n4.nabble.com/Mean-reversion-tests-with-stationary-tests-and-trending-series-tp2272757p2272757.html
Sent from the Rmetrics mailing list archive at Nabble.com.


